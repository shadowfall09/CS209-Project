{"items":[{"tags":["java","annotation-processing"],"comments":[{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1696192043,"post_id":77211537,"comment_id":136118796,"body_markdown":"See also a [related question[(https://stackoverflow.com/q/20358039) which addresses this problem but without the complication of a generic parameter.","body":"See also a [related question[(<a href=\"https://stackoverflow.com/q/20358039\">stackoverflow.com/q/20358039</a>) which addresses this problem but without the complication of a generic parameter."}],"answers":[{"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696190598,"creation_date":1696188690,"answer_id":77212024,"question_id":77211537,"body_markdown":"It appears that the comparison technique in the question doesn&#39;t work because it compares the raw type to the actual parameterized type. If I cast the return `TypeMirror` to a `DeclaredType`, get its `Element` representation, and then convert back to a `TypeMirror`, then the comparison works—I suppose because I&#39;m in effect applying erasure to the returned type:\r\n\r\n```java\r\nTypeElement completableFutureTypeElement = processingEnv.getElementUtils()\r\n    .getTypeElement(CompletableFuture.class.getCanonicalName());\r\nboolean isCompletableFutureReturnType = processingEnv.getTypeUtils()\r\n    .isSubtype(((DeclaredType)returnTypeMirror).asElement().asType(),\r\n        completableFutureTypeElement.asType());\r\n```\r\n\r\nThat&#39;s seems to be a bit of a hack, though. Calling `processingEnv.getTypeUtils().erasure(returnTypeMirror)` on the return type mirror, which sounds like it would do the same thing, doesn&#39;t work, though. Moreover with this approach I can&#39;t seem to use `isSubtype(…)` or `isAssignable(…)` with `Future`, even though `CompletableFuture` implements `Future`.\r\n\r\nInstead, the more semantic way seems to go in the other direction: **start by creating a `TypeMirror` for a parameterized `CompletableFuture&lt;?&gt;` against which to compare**—as you would do in Java code. You can create a parameterized unbounded wildcard using `Types.getDeclaredType(…)` from the `TypeElement` already created; along with `Types.getWildcard(…)`, passing `null` to indicate no `extends` or `super` bounds (i.e. the `?` wildcard). Then you use `isAssignable(…)` to see if the return type is something that can be assigned to the parameterized type you constructed.\r\n\r\n\r\n```java\r\nTypeElement completableFutureTypeElement = processingEnv.getElementUtils()\r\n    .getTypeElement(CompletableFuture.class.getCanonicalName());\r\nDeclaredType completableFutureWildcardTypeElement =\r\n    processingEnv.getTypeUtils().getDeclaredType(completableFutureTypeElement,\r\n        processingEnv.getTypeUtils().getWildcardType(null, null));\r\nboolean isCompletableFutureReturnType = processingEnv.getTypeUtils()\r\n    .isAssignable(returnTypeMirror, completableFutureWildcardTypeElement);\r\n```\r\n\r\nAs a bonus, `isAssignable(…)` with a return type of `CompletableFuture&lt;String&gt;` will work against `Future&lt;?&gt;` as well, so that&#39;s a good indication that this second approach of creating parameterized unbounded wildcard types is the more semantic technique.","title":"Java annotation processor comparing method return `TypeMirror` with known class","body":"<p>It appears that the comparison technique in the question doesn't work because it compares the raw type to the actual parameterized type. If I cast the return <code>TypeMirror</code> to a <code>DeclaredType</code>, get its <code>Element</code> representation, and then convert back to a <code>TypeMirror</code>, then the comparison works—I suppose because I'm in effect applying erasure to the returned type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>TypeElement completableFutureTypeElement = processingEnv.getElementUtils()\n    .getTypeElement(CompletableFuture.class.getCanonicalName());\nboolean isCompletableFutureReturnType = processingEnv.getTypeUtils()\n    .isSubtype(((DeclaredType)returnTypeMirror).asElement().asType(),\n        completableFutureTypeElement.asType());\n</code></pre>\n<p>That's seems to be a bit of a hack, though. Calling <code>processingEnv.getTypeUtils().erasure(returnTypeMirror)</code> on the return type mirror, which sounds like it would do the same thing, doesn't work, though. Moreover with this approach I can't seem to use <code>isSubtype(…)</code> or <code>isAssignable(…)</code> with <code>Future</code>, even though <code>CompletableFuture</code> implements <code>Future</code>.</p>\n<p>Instead, the more semantic way seems to go in the other direction: <strong>start by creating a <code>TypeMirror</code> for a parameterized <code>CompletableFuture&lt;?&gt;</code> against which to compare</strong>—as you would do in Java code. You can create a parameterized unbounded wildcard using <code>Types.getDeclaredType(…)</code> from the <code>TypeElement</code> already created; along with <code>Types.getWildcard(…)</code>, passing <code>null</code> to indicate no <code>extends</code> or <code>super</code> bounds (i.e. the <code>?</code> wildcard). Then you use <code>isAssignable(…)</code> to see if the return type is something that can be assigned to the parameterized type you constructed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TypeElement completableFutureTypeElement = processingEnv.getElementUtils()\n    .getTypeElement(CompletableFuture.class.getCanonicalName());\nDeclaredType completableFutureWildcardTypeElement =\n    processingEnv.getTypeUtils().getDeclaredType(completableFutureTypeElement,\n        processingEnv.getTypeUtils().getWildcardType(null, null));\nboolean isCompletableFutureReturnType = processingEnv.getTypeUtils()\n    .isAssignable(returnTypeMirror, completableFutureWildcardTypeElement);\n</code></pre>\n<p>As a bonus, <code>isAssignable(…)</code> with a return type of <code>CompletableFuture&lt;String&gt;</code> will work against <code>Future&lt;?&gt;</code> as well, so that's a good indication that this second approach of creating parameterized unbounded wildcard types is the more semantic technique.</p>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77212024,"answer_count":1,"score":1,"last_activity_date":1696190820,"creation_date":1696180963,"question_id":77211537,"body_markdown":"My Java annotation processor is generating an implementation of an interface, which has a `MyInterface.foo()` method returning `CompletableFuture&lt;String&gt;`. In my processor the `ExecutableElement` for that method indicates a `getReturnType()` `TypeMirror` with a `toString()` value of `java.util.concurrent.CompletableFuture&lt;java.lang.String&gt;`, so I know I have the right `TypeMirror` for the return type.\r\n\r\nNow I want to test in code whether this `TypeMirror` instance is indeed a `CompletableFuture` of some sort. I tried `Types.isAssignable(…)`, `Types.isSubtype(…)`, and `Types.isSameType(…)`, but none seem to work. For example:\r\n\r\n```java\r\nTypeElement completableFutureTypeElement = processingEnv.getElementUtils()\r\n    .getTypeElement(CompletableFuture.class.getCanonicalName());\r\nboolean isCompletableFutureReturnType = processingEnv.getTypeUtils()\r\n    .isSubtype(returnTypeMirror, completableFutureTypeElement.asType());\r\n```\r\n\r\nAm I using the wrong method for checking? Or is the problem that the return type is `CompletableFuture&lt;String&gt;` and I&#39;m comparing against the raw type? In any case, how do I simply check to see that non-parameterized (i.e. raw) class of return type is `CompletableFuture`? I suppose I could just compare strings, but is there are more type-safe, semantic way?\r\n\r\nMy related question is how to get a `TypeMirror` for a known class, as I did above for `completableFutureTypeElement` and then `completableFutureTypeElement.asType()`. Is there a more direct way to get a `TypeElement` and/or `TypeMirror` for a class such as `CompletableFuture.class` without doing a lookup on the string form of its name?","title":"Java annotation processor comparing method return `TypeMirror` with known class","body":"<p>My Java annotation processor is generating an implementation of an interface, which has a <code>MyInterface.foo()</code> method returning <code>CompletableFuture&lt;String&gt;</code>. In my processor the <code>ExecutableElement</code> for that method indicates a <code>getReturnType()</code> <code>TypeMirror</code> with a <code>toString()</code> value of <code>java.util.concurrent.CompletableFuture&lt;java.lang.String&gt;</code>, so I know I have the right <code>TypeMirror</code> for the return type.</p>\n<p>Now I want to test in code whether this <code>TypeMirror</code> instance is indeed a <code>CompletableFuture</code> of some sort. I tried <code>Types.isAssignable(…)</code>, <code>Types.isSubtype(…)</code>, and <code>Types.isSameType(…)</code>, but none seem to work. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>TypeElement completableFutureTypeElement = processingEnv.getElementUtils()\n    .getTypeElement(CompletableFuture.class.getCanonicalName());\nboolean isCompletableFutureReturnType = processingEnv.getTypeUtils()\n    .isSubtype(returnTypeMirror, completableFutureTypeElement.asType());\n</code></pre>\n<p>Am I using the wrong method for checking? Or is the problem that the return type is <code>CompletableFuture&lt;String&gt;</code> and I'm comparing against the raw type? In any case, how do I simply check to see that non-parameterized (i.e. raw) class of return type is <code>CompletableFuture</code>? I suppose I could just compare strings, but is there are more type-safe, semantic way?</p>\n<p>My related question is how to get a <code>TypeMirror</code> for a known class, as I did above for <code>completableFutureTypeElement</code> and then <code>completableFutureTypeElement.asType()</code>. Is there a more direct way to get a <code>TypeElement</code> and/or <code>TypeMirror</code> for a class such as <code>CompletableFuture.class</code> without doing a lookup on the string form of its name?</p>\n"},{"tags":["java","authentication","oauth-2.0","linkedin-api","spring-social-linkedin"],"comments":[{"owner":{"account_id":4064266,"reputation":1553,"user_id":3339818,"display_name":"surajs1n"},"score":0,"creation_date":1677351661,"post_id":75567710,"comment_id":133322299,"body_markdown":"is your api public or private?","body":"is your api public or private?"},{"owner":{"account_id":16256731,"reputation":1,"user_id":11739192,"display_name":"Alfonso"},"score":0,"creation_date":1677353043,"post_id":75567710,"comment_id":133322564,"body_markdown":"just testing it on localhost","body":"just testing it on localhost"},{"owner":{"account_id":4064266,"reputation":1553,"user_id":3339818,"display_name":"surajs1n"},"score":0,"creation_date":1677414914,"post_id":75567710,"comment_id":133329313,"body_markdown":"no i meant to say. the linkedin api which you are using, is that public or private api?","body":"no i meant to say. the linkedin api which you are using, is that public or private api?"},{"owner":{"account_id":7094431,"reputation":171,"user_id":5428561,"display_name":"Abhishek Kumar"},"score":0,"creation_date":1700894546,"post_id":75567710,"comment_id":136710557,"body_markdown":"were u able to resolve this? i am stuck with same issue.","body":"were u able to resolve this? i am stuck with same issue."}],"answers":[{"tags":[],"owner":{"account_id":19423258,"reputation":703,"user_id":14803323,"display_name":"Ashavan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677515095,"creation_date":1677515095,"answer_id":75583036,"question_id":75567710,"body_markdown":"Profile fields are heavily restricted with the LinkedIn API. You can see an overview [here][1]; essentially, you&#39;re getting the basic profile fields and for anything beyond that, you need to have special approval from LinkedIn. And per [this page][2], the `r_compliance` permission is closed.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/linkedin/shared/integrations/people/profile-api?context=linkedin%2Fconsumer%2Fcontext#retrieve-current-members-profile\r\n  [2]: https://learn.microsoft.com/en-us/linkedin/shared/authentication/getting-access#compliance-closed","title":"Get LinkedIn user profile data using LinkedIn oauth2","body":"<p>Profile fields are heavily restricted with the LinkedIn API. You can see an overview <a href=\"https://learn.microsoft.com/en-us/linkedin/shared/integrations/people/profile-api?context=linkedin%2Fconsumer%2Fcontext#retrieve-current-members-profile\" rel=\"nofollow noreferrer\">here</a>; essentially, you're getting the basic profile fields and for anything beyond that, you need to have special approval from LinkedIn. And per <a href=\"https://learn.microsoft.com/en-us/linkedin/shared/authentication/getting-access#compliance-closed\" rel=\"nofollow noreferrer\">this page</a>, the <code>r_compliance</code> permission is closed.</p>\n"},{"tags":[],"owner":{"account_id":92015,"reputation":5223,"user_id":252373,"accept_rate":83,"display_name":"mvbl fst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694403978,"creation_date":1694403978,"answer_id":77078811,"question_id":75567710,"body_markdown":"Use scopes:\r\n - openid\r\n - profile\r\n - email","title":"Get LinkedIn user profile data using LinkedIn oauth2","body":"<p>Use scopes:</p>\n<ul>\n<li>openid</li>\n<li>profile</li>\n<li>email</li>\n</ul>\n"}],"owner":{"account_id":16256731,"reputation":1,"user_id":11739192,"display_name":"Alfonso"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":674,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696190768,"creation_date":1677351433,"question_id":75567710,"body_markdown":"I created an app on LinkedIn Developers, and I was able to get an access token when a user logged in.\r\nThe problem is that I can only get the ID, name, email and photo of the user.\r\nI am unable to get the full details of the profile and even the link to the user&#39;s profile via (vanityName).\r\n\r\nThis is the scope I use: `scope=r_liteprofile%20r_emailaddress%20profile%20openid%20w_member_social%20email`\r\n\r\nCan anyone help?\r\n\r\nI tried different scopes and different prejection without success.\r\n","title":"Get LinkedIn user profile data using LinkedIn oauth2","body":"<p>I created an app on LinkedIn Developers, and I was able to get an access token when a user logged in.\nThe problem is that I can only get the ID, name, email and photo of the user.\nI am unable to get the full details of the profile and even the link to the user's profile via (vanityName).</p>\n<p>This is the scope I use: <code>scope=r_liteprofile%20r_emailaddress%20profile%20openid%20w_member_social%20email</code></p>\n<p>Can anyone help?</p>\n<p>I tried different scopes and different prejection without success.</p>\n"},{"tags":["java","exception","optional-parameters","optional-chaining"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":3,"creation_date":1696167576,"post_id":77210173,"comment_id":136116071,"body_markdown":"[generics - why doesn&#39;t Optional orElseThrow compile?](https://coderanch.com/t/747790/java/generics-doesn-Optional-orElseThrow-compile)","body":"<a href=\"https://coderanch.com/t/747790/java/generics-doesn-Optional-orElseThrow-compile\" rel=\"nofollow noreferrer\">generics - why doesn&#39;t Optional orElseThrow compile?</a>"}],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696190050,"creation_date":1696190050,"answer_id":77212087,"question_id":77210173,"body_markdown":"The difference is due to the use of raw types in Java. Method signature of orElseThrow is:\r\n\r\n    public &lt;X extends Throwable&gt; T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier) throws X\r\n\r\nSo, for case in line 2 and 5 you have:\r\n\r\n    Optional empty1 = Optional.empty(); // line 2\r\n    empty1.orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 5\r\n\r\nin above `orElseThrow` signature case compiler is not provided with `T` type and even thought it has `X`, it will generate raw call. It will substitute X with its upperbound which is Throwable, and T will be Object. The result is:\r\n\r\n    public Object orElseThrow(Supplier exceptionSupplier) throws Throwable\r\n                                                                 ^^^^^^^^^\r\n\r\nthus, compiler reports:\r\n\r\n    error: unreported exception Throwable\r\n\r\nThe case of:\r\n\r\n    Optional.empty().orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 4\r\n\r\nis more interesting, here no explicit type is specified, but compiler reports error of `Exception` being thrown. So its different from the previous case. You again must look at the signature of the used function, in this case Optional.empty():\r\n\r\n    public static&lt;T&gt; Optional&lt;T&gt; empty()\r\n                 ^^^ ~~~ type inference\r\n\r\nThe important part is `&lt;T&gt;` which indicate that it will infer its type `T` from the enclosing context. In `line 4` compiler is unable to infer type, and uses `Object` type instead. I believe in JLS its stated here:\r\n\r\nhttps://docs.oracle.com/javase/specs/jls/se10/html/jls-18.html#jls-18.1.3\r\n\r\n&gt; If Pl has no TypeBound, the bound αl &lt;: Object appears in the set.\r\n\r\nand also in oracle tutorial:\r\n\r\nhttps://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html\r\n\r\n&gt; The compiler requires a value for the type argument T so it starts\r\n&gt; with the value Object. Consequently, the invocation of\r\n&gt; Collections.emptyList returns a value of type List&amp;lt;Object&gt;\r\n\r\nThe important thing, is that in `line 4` you are not dealing with raw types like in lines 2 and 5, but with generic ones (generic type `T` is `Object`), so when orElseThrow is called, its signature is \r\n\r\n    public Object orElseThrow(Supplier exceptionSupplier) throws Exception\r\n\r\nboth generic types `T` nad `X` are known, so generic function call is generated, which in the end causes in your example this compiler error:\r\n\r\nerror: unreported exception Exception;\r\n\r\nNow, line 3 and 6, is explicitly using generic type Object, and this makes the signature of orElseThrow as previously:\r\n\r\n    public Object orElseThrow(Supplier exceptionSupplier) throws Exception\r\n\r\nwhich gives the same error:\r\n\r\nerror: unreported exception Exception;","title":"Difference between raw and parameterized Optional when invoking orElseGet(Supplier)","body":"<p>The difference is due to the use of raw types in Java. Method signature of orElseThrow is:</p>\n<pre><code>public &lt;X extends Throwable&gt; T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier) throws X\n</code></pre>\n<p>So, for case in line 2 and 5 you have:</p>\n<pre><code>Optional empty1 = Optional.empty(); // line 2\nempty1.orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 5\n</code></pre>\n<p>in above <code>orElseThrow</code> signature case compiler is not provided with <code>T</code> type and even thought it has <code>X</code>, it will generate raw call. It will substitute X with its upperbound which is Throwable, and T will be Object. The result is:</p>\n<pre><code>public Object orElseThrow(Supplier exceptionSupplier) throws Throwable\n                                                             ^^^^^^^^^\n</code></pre>\n<p>thus, compiler reports:</p>\n<pre><code>error: unreported exception Throwable\n</code></pre>\n<p>The case of:</p>\n<pre><code>Optional.empty().orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 4\n</code></pre>\n<p>is more interesting, here no explicit type is specified, but compiler reports error of <code>Exception</code> being thrown. So its different from the previous case. You again must look at the signature of the used function, in this case Optional.empty():</p>\n<pre><code>public static&lt;T&gt; Optional&lt;T&gt; empty()\n             ^^^ ~~~ type inference\n</code></pre>\n<p>The important part is <code>&lt;T&gt;</code> which indicate that it will infer its type <code>T</code> from the enclosing context. In <code>line 4</code> compiler is unable to infer type, and uses <code>Object</code> type instead. I believe in JLS its stated here:</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-18.html#jls-18.1.3\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jls/se10/html/jls-18.html#jls-18.1.3</a></p>\n<blockquote>\n<p>If Pl has no TypeBound, the bound αl &lt;: Object appears in the set.</p>\n</blockquote>\n<p>and also in oracle tutorial:</p>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html</a></p>\n<blockquote>\n<p>The compiler requires a value for the type argument T so it starts\nwith the value Object. Consequently, the invocation of\nCollections.emptyList returns a value of type List&lt;Object&gt;</p>\n</blockquote>\n<p>The important thing, is that in <code>line 4</code> you are not dealing with raw types like in lines 2 and 5, but with generic ones (generic type <code>T</code> is <code>Object</code>), so when orElseThrow is called, its signature is</p>\n<pre><code>public Object orElseThrow(Supplier exceptionSupplier) throws Exception\n</code></pre>\n<p>both generic types <code>T</code> nad <code>X</code> are known, so generic function call is generated, which in the end causes in your example this compiler error:</p>\n<p>error: unreported exception Exception;</p>\n<p>Now, line 3 and 6, is explicitly using generic type Object, and this makes the signature of orElseThrow as previously:</p>\n<pre><code>public Object orElseThrow(Supplier exceptionSupplier) throws Exception\n</code></pre>\n<p>which gives the same error:</p>\n<p>error: unreported exception Exception;</p>\n"}],"owner":{"account_id":5324511,"reputation":89,"user_id":8441793,"display_name":"Sy Pham"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":77212087,"answer_count":1,"score":4,"last_activity_date":1696190050,"creation_date":1696157909,"question_id":77210173,"body_markdown":"Consider the following code:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args)\r\n             // throws Exception // line 1 \r\n    {\r\n        Optional empty1 = Optional.empty(); // line 2\r\n        Optional&lt;Object&gt; empty2 = Optional.empty(); // line 3\r\n\r\n        Optional.empty().orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 4\r\n        empty1.orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 5\r\n        empty2.orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 6\r\n    }\r\n\r\n}\r\n```\r\n\r\n - When line 1 is commented, then line 4, 5, 6 all report compile-time errors:\r\n    - Line 4 and 6: **Unhandled exception: java.lang.Exception**\r\n    - Line 5: **Unhandled exception: java.lang.Throwable**\r\n   This makes me feel that line 4 is called with type parameter as `&lt;Object&gt;` like line 6, but what makes the differences on the exact exception thrown?\r\n\r\n- When line 1 is uncommented, then only line 5 reports compile-time error: **Unhandled exception: java.lang.Throwable**. It will be solved if I change line 1 to **throws Throwable**. Why throwing **Exception** is not enough for line 5 to resolve compile-time error?\r\n\r\n","title":"Difference between raw and parameterized Optional when invoking orElseGet(Supplier)","body":"<p>Consider the following code:</p>\n<pre><code>public class Main {\n    public static void main(String[] args)\n             // throws Exception // line 1 \n    {\n        Optional empty1 = Optional.empty(); // line 2\n        Optional&lt;Object&gt; empty2 = Optional.empty(); // line 3\n\n        Optional.empty().orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 4\n        empty1.orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 5\n        empty2.orElseThrow(() -&gt; new Exception(&quot;Empty optional&quot;)); // line 6\n    }\n\n}\n</code></pre>\n<ul>\n<li><p>When line 1 is commented, then line 4, 5, 6 all report compile-time errors:</p>\n<ul>\n<li>Line 4 and 6: <strong>Unhandled exception: java.lang.Exception</strong></li>\n<li>Line 5: <strong>Unhandled exception: java.lang.Throwable</strong>\nThis makes me feel that line 4 is called with type parameter as <code>&lt;Object&gt;</code> like line 6, but what makes the differences on the exact exception thrown?</li>\n</ul>\n</li>\n<li><p>When line 1 is uncommented, then only line 5 reports compile-time error: <strong>Unhandled exception: java.lang.Throwable</strong>. It will be solved if I change line 1 to <strong>throws Throwable</strong>. Why throwing <strong>Exception</strong> is not enough for line 5 to resolve compile-time error?</p>\n</li>\n</ul>\n"},{"tags":["java","gradle","nexus"],"answers":[{"tags":[],"owner":{"account_id":16073218,"reputation":23,"user_id":11601105,"display_name":"GreatDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696189505,"creation_date":1696189505,"answer_id":77212059,"question_id":77208950,"body_markdown":"It was very weird. I&#39;ve messed with it a lot and saw that the file in nexus has a full name (with -all suffix of shadowJar) for some reason! I used it all the time and maven-publish automatically converted the file to projectname+version, excluding all suffixes. I tried to manually change the name and it worked!","title":"Gradle dependency resolved but marked as unresolved and not available in IDE","body":"<p>It was very weird. I've messed with it a lot and saw that the file in nexus has a full name (with -all suffix of shadowJar) for some reason! I used it all the time and maven-publish automatically converted the file to projectname+version, excluding all suffixes. I tried to manually change the name and it worked!</p>\n"}],"owner":{"account_id":16073218,"reputation":23,"user_id":11601105,"display_name":"GreatDev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696189505,"creation_date":1696123936,"question_id":77208950,"body_markdown":"I can&#39;t give a lot of context since it&#39;s a private project, but I&#39;ll try to do my best.\r\nThere&#39;s a repo (nexus), it has my artifact. I try to add it to another project as a dependency, of corse I provide a repository field with authentication, the same as I did earlier (with the same repo).\r\n\r\nBut the dependency is not being resolved in my IDE. I made a scan in gradle, it does resolve the dependency, it finds the repo where it exists, it looks fine. But in the log it&#39;s marked as (n) - unresolved for some reason which I can&#39;t understand. Nothing in logs (even --debug) points to anything. I see in logs that it successfully finds a repo which has this dependency, it&#39;s alright. But it is unavailable in my project.\r\n\r\nThat dependencies were regularly pushed using maven-publish, they exist in the repo.\r\nAlso gradle gives no errors during project loading (nothing like &quot;unresolved dependency error&quot;), as well as it can&#39;t build the project since ClassNotFound exceptions.\r\n\r\nI tried to create another project, but none of artifacts in that repo are being resolved (but they were fine a while ago). I tried to open the project in another IDE, it has the same problem.\r\n\r\nWorth to note that I have another repo on the same nexus and artifacts from there are being resolved successfully. Also I even tried to create a test public repo for a minute, but it still does not download/apply that dependencies.\r\n\r\n\r\n\r\nAny ideas I can check out?","title":"Gradle dependency resolved but marked as unresolved and not available in IDE","body":"<p>I can't give a lot of context since it's a private project, but I'll try to do my best.\nThere's a repo (nexus), it has my artifact. I try to add it to another project as a dependency, of corse I provide a repository field with authentication, the same as I did earlier (with the same repo).</p>\n<p>But the dependency is not being resolved in my IDE. I made a scan in gradle, it does resolve the dependency, it finds the repo where it exists, it looks fine. But in the log it's marked as (n) - unresolved for some reason which I can't understand. Nothing in logs (even --debug) points to anything. I see in logs that it successfully finds a repo which has this dependency, it's alright. But it is unavailable in my project.</p>\n<p>That dependencies were regularly pushed using maven-publish, they exist in the repo.\nAlso gradle gives no errors during project loading (nothing like &quot;unresolved dependency error&quot;), as well as it can't build the project since ClassNotFound exceptions.</p>\n<p>I tried to create another project, but none of artifacts in that repo are being resolved (but they were fine a while ago). I tried to open the project in another IDE, it has the same problem.</p>\n<p>Worth to note that I have another repo on the same nexus and artifacts from there are being resolved successfully. Also I even tried to create a test public repo for a minute, but it still does not download/apply that dependencies.</p>\n<p>Any ideas I can check out?</p>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":1150739,"reputation":7888,"user_id":1132522,"display_name":"Andrew"},"score":9,"creation_date":1541010247,"post_id":45743779,"comment_id":93076584,"body_markdown":"Spent hours on this too. If you are using Maven, I ended up right clicking on my main &quot;pom.xml&quot;, then clicking &quot;Update project configuration&quot;. This regenerated my .classpath and .project files and it fixed the issue for me.","body":"Spent hours on this too. If you are using Maven, I ended up right clicking on my main &quot;pom.xml&quot;, then clicking &quot;Update project configuration&quot;. This regenerated my .classpath and .project files and it fixed the issue for me."}],"answers":[{"tags":[],"owner":{"account_id":5466952,"reputation":2336,"user_id":4347487,"display_name":"toreyhickman"},"down_vote_count":0,"up_vote_count":215,"is_accepted":true,"score":215,"last_activity_date":1544623443,"creation_date":1528818794,"answer_id":50821279,"question_id":45743779,"body_markdown":"I ran into a similar issue.  The solution was to remove everything from VS Code&#39;s workspace storage directory, which was located at `$HOME/Library/Application Support/Code/User/workspaceStorage/`.\r\n\r\nI found this solution here:  https://github.com/redhat-developer/vscode-java/wiki/Troubleshooting#clean-the-workspace-directory\r\n\r\n*Update:*  This can now be done from within VS Code as of Language Support for Java(TM) by Red Hat Version 0.33.0.  Open the command palette and type &quot;java clean&quot; (see official description in link).","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>I ran into a similar issue.  The solution was to remove everything from VS Code's workspace storage directory, which was located at <code>$HOME/Library/Application Support/Code/User/workspaceStorage/</code>.</p>\n\n<p>I found this solution here:  <a href=\"https://github.com/redhat-developer/vscode-java/wiki/Troubleshooting#clean-the-workspace-directory\" rel=\"noreferrer\">https://github.com/redhat-developer/vscode-java/wiki/Troubleshooting#clean-the-workspace-directory</a></p>\n\n<p><em>Update:</em>  This can now be done from within VS Code as of Language Support for Java(TM) by Red Hat Version 0.33.0.  Open the command palette and type \"java clean\" (see official description in link).</p>\n"},{"tags":[],"owner":{"account_id":1961505,"reputation":15719,"user_id":1762944,"accept_rate":68,"display_name":"Afzaal Ahmad Zeeshan"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1542820472,"creation_date":1542820472,"answer_id":53417381,"question_id":45743779,"body_markdown":"As already mentioned previously, you require to clean the project, but that is a bit difficult thing because every folder is a Guid, and you do not know which one to clear, thus requiring you to delete everything. Starting with **0.33.0** version of the plugin you can automatically do that from within the IDE as well, use &lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;Shift&lt;/kbd&gt; + &lt;kbd&gt;P&lt;/kbd&gt; and type, `java clean`, and IDE will show you the suggestion tip for, _Java: Clean the Java language server workspace_. Upon selection, agree and restart the IDE. It will clean the language server workspace for you. \r\n\r\nAnother approach can be, the Maven tools within the IDE. If you have this plugin installed, you can use the side bar and utilize the Maven project helper options to perform actions like, clean, install, and package etc. For example, here is the project I am having and the options this shows, \r\n\r\n[![enter image description here][1]][1]\r\n\r\nThat can be used, graphically, to manage your Maven-based projects. Also, this would work with the **Java Extension Pack**, not sure yet as to how it would behave with other extensions. \r\n\r\n  [1]: https://i.stack.imgur.com/yp6hM.png","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>As already mentioned previously, you require to clean the project, but that is a bit difficult thing because every folder is a Guid, and you do not know which one to clear, thus requiring you to delete everything. Starting with <strong>0.33.0</strong> version of the plugin you can automatically do that from within the IDE as well, use <kbd>CTRL</kbd> + <kbd>Shift</kbd> + <kbd>P</kbd> and type, <code>java clean</code>, and IDE will show you the suggestion tip for, <em>Java: Clean the Java language server workspace</em>. Upon selection, agree and restart the IDE. It will clean the language server workspace for you. </p>\n\n<p>Another approach can be, the Maven tools within the IDE. If you have this plugin installed, you can use the side bar and utilize the Maven project helper options to perform actions like, clean, install, and package etc. For example, here is the project I am having and the options this shows, </p>\n\n<p><a href=\"https://i.stack.imgur.com/yp6hM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/yp6hM.png\" alt=\"enter image description here\"></a></p>\n\n<p>That can be used, graphically, to manage your Maven-based projects. Also, this would work with the <strong>Java Extension Pack</strong>, not sure yet as to how it would behave with other extensions. </p>\n"},{"tags":[],"owner":{"account_id":367154,"reputation":1575,"user_id":713149,"accept_rate":100,"display_name":"Arjun Shetty"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1568105893,"creation_date":1568105893,"answer_id":57867314,"question_id":45743779,"body_markdown":"I had to clean this folder to get it working on Windows\r\n\r\n`%APPDATA%\\code\\Local Storage`","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>I had to clean this folder to get it working on Windows</p>\n\n<p><code>%APPDATA%\\code\\Local Storage</code></p>\n"},{"tags":[],"owner":{"account_id":2497857,"reputation":319,"user_id":2173826,"display_name":"LucianoBAF"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1576010665,"creation_date":1576010665,"answer_id":59275068,"question_id":45743779,"body_markdown":"I faced this issue after creating a whole Java project in one computer and then trying to run it on another computer.\r\n\r\nAfter doing everything said in the other answers, what really made VS Code compile was to **open each single project java file in VS Code and save it** (a simple Ctrl + S). Maybe there is a simpler way of doing it, but that is what worked for me and I hope this helps anyone stuck in this issue.","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>I faced this issue after creating a whole Java project in one computer and then trying to run it on another computer.</p>\n\n<p>After doing everything said in the other answers, what really made VS Code compile was to <strong>open each single project java file in VS Code and save it</strong> (a simple Ctrl + S). Maybe there is a simpler way of doing it, but that is what worked for me and I hope this helps anyone stuck in this issue.</p>\n"},{"tags":[],"owner":{"account_id":15462527,"reputation":7553,"user_id":11154841,"display_name":"questionto42"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589566663,"creation_date":1589565314,"answer_id":61825498,"question_id":45743779,"body_markdown":"I found another simple trick at least to get rid of &quot;cannot be resolved to a type&quot; errors which were coming from older workspaces and wrong project files I guess?. I just ran an empty main(), with the body commented out, while still keeping my local package / import commands at the start - no errors. After commenting in again, the project compiled without errors. Perhaps this refreshing effect might also help in this context?","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>I found another simple trick at least to get rid of \"cannot be resolved to a type\" errors which were coming from older workspaces and wrong project files I guess?. I just ran an empty main(), with the body commented out, while still keeping my local package / import commands at the start - no errors. After commenting in again, the project compiled without errors. Perhaps this refreshing effect might also help in this context?</p>\n"},{"tags":[],"owner":{"account_id":2721358,"reputation":2546,"user_id":6838357,"accept_rate":50,"display_name":"TigerBear"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1633502512,"creation_date":1620827227,"answer_id":67504950,"question_id":45743779,"body_markdown":"For me: CMD + Shift + P\r\nThen type &quot;Java: Clean Java language Server Workspace&quot;\r\n\r\nNote: This will reload/restart vscode as well.\r\n\r\nUpdate:\r\nThis appears to not fix it anymore for me. In my case I am using a gradle project, and needed to set the `rootProject.name` in the `settings.gradle` to be the same as the folder name that the project is in.","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>For me: CMD + Shift + P\nThen type &quot;Java: Clean Java language Server Workspace&quot;</p>\n<p>Note: This will reload/restart vscode as well.</p>\n<p>Update:\nThis appears to not fix it anymore for me. In my case I am using a gradle project, and needed to set the <code>rootProject.name</code> in the <code>settings.gradle</code> to be the same as the folder name that the project is in.</p>\n"},{"tags":[],"owner":{"account_id":23488708,"reputation":107,"user_id":17539963,"display_name":"Chetan Gupta"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1646546344,"creation_date":1646546344,"answer_id":71368014,"question_id":45743779,"body_markdown":"Press ctrl+shift+p\r\nthen search &#39;java clean&#39; and click &#39;java: clean java language server workspace&#39; then click restart IDE.\r\n","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>Press ctrl+shift+p\nthen search 'java clean' and click 'java: clean java language server workspace' then click restart IDE.</p>\n"},{"tags":[],"owner":{"account_id":27881003,"reputation":1,"user_id":21289423,"display_name":"Rohit Chavan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1677389654,"creation_date":1677389654,"answer_id":75570171,"question_id":45743779,"body_markdown":"Nothing can do,\r\njust open this file into new folder and after that run it. It should prperly run now.","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>Nothing can do,\njust open this file into new folder and after that run it. It should prperly run now.</p>\n"},{"tags":[],"owner":{"account_id":29432746,"reputation":11,"user_id":22552119,"display_name":"brglnd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694677731,"creation_date":1694618569,"answer_id":77098435,"question_id":45743779,"body_markdown":"The suggested solution did not work for me,\r\nhowever I solved it by going to my settings.json (CMD + Shift + P -&gt; &quot;Preferences: User Settings&quot;) and add the following\r\n\r\n    &quot;java.configuration.runtimes&quot;: [\r\n    \r\n    {\r\n      &quot;name&quot;: &quot;JavaSE-18&quot;,\r\n      &quot;path&quot;: &quot;/Users/[username]/Library/Java/JavaVirtualMachines/openjdk-18.0.1.1/Contents/Home&quot;,\r\n      &quot;default&quot;: true\r\n    },\r\n\r\nwhere the path to your JDK could be something else of course","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>The suggested solution did not work for me,\nhowever I solved it by going to my settings.json (CMD + Shift + P -&gt; &quot;Preferences: User Settings&quot;) and add the following</p>\n<pre><code>&quot;java.configuration.runtimes&quot;: [\n\n{\n  &quot;name&quot;: &quot;JavaSE-18&quot;,\n  &quot;path&quot;: &quot;/Users/[username]/Library/Java/JavaVirtualMachines/openjdk-18.0.1.1/Contents/Home&quot;,\n  &quot;default&quot;: true\n},\n</code></pre>\n<p>where the path to your JDK could be something else of course</p>\n"},{"tags":[],"owner":{"account_id":29438250,"reputation":11,"user_id":22556725,"display_name":"forever"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694675445,"creation_date":1694675445,"answer_id":77102567,"question_id":45743779,"body_markdown":"   I solved it by going to my settings.json and add the following\r\n\r\n        &quot;java.jdt.ls.java.home&quot;: &quot;/Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home&quot;","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>I solved it by going to my settings.json and add the following</p>\n<pre><code>    &quot;java.jdt.ls.java.home&quot;: &quot;/Library/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16248251,"reputation":33,"user_id":11732819,"display_name":"Rishabh Titvilasi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696187977,"creation_date":1696187977,"answer_id":77211979,"question_id":45743779,"body_markdown":"I was facing the same problem, I moved the Visual Studio Code app from Downloads folder to Applications folder and then restarted visual studio and ran java clean. Started working for me.","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>I was facing the same problem, I moved the Visual Studio Code app from Downloads folder to Applications folder and then restarted visual studio and ran java clean. Started working for me.</p>\n"}],"owner":{"account_id":9751197,"reputation":2038,"user_id":7229391,"display_name":"Reed Hermes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152990,"favorite_count":0,"down_vote_count":0,"up_vote_count":105,"accepted_answer_id":50821279,"answer_count":11,"score":105,"last_activity_date":1696187977,"creation_date":1502999097,"question_id":45743779,"body_markdown":"Just starting working on an existing project at work and wanted to use Visual Studio Code as my IDE (I have used it for a recent Rails project and loved it, so wanted to try with Java).\r\n\r\nHowever, whenever I try to open one of the projects I receive a ton of different errors including:\r\n\r\n- When importing java.io, java.util, or anything similar, the error:\r\n&gt;&quot;The import of java.io (or java.util) cannot be resolved&quot;\r\n\r\n- Existing classes have an error:\r\n&gt;&quot;The implicit super constructor is undefined for default constructor. Must define explicit constructor&quot;\r\n\r\n- Other random &quot;cannot resolve to a type&quot; errors.\r\n\r\nAll of these seem to stem from some sort of setting error I have with VS Code but can seem to find what it is. I have already uninstalled and reinstalled the RedHat plug-in that enables the Java language for VS Code. \r\n\r\nI have tried setting the java_home setting in the extension to the direct location of the install but that didn&#39;t work. Tried uninstalling and reinstalling java and that also didn&#39;t work.\r\n\r\nMy operating specs are as follows:\r\n\r\n- OS: macOS Sierra\r\n\r\n- VS Code version 1.15.1\r\n\r\n- JDK version 1.8.0.144\r\n\r\nAny idea on what may be causing this? Do you think it may be an error in how I have VS Code set up or if it&#39;s an error (or rather incompatibility) with how the existing project is set up?\r\n","title":"Visual Studio Code - Java - Import Errors and More","body":"<p>Just starting working on an existing project at work and wanted to use Visual Studio Code as my IDE (I have used it for a recent Rails project and loved it, so wanted to try with Java).</p>\n<p>However, whenever I try to open one of the projects I receive a ton of different errors including:</p>\n<ul>\n<li>When importing java.io, java.util, or anything similar, the error:</li>\n</ul>\n<blockquote>\n<p>&quot;The import of java.io (or java.util) cannot be resolved&quot;</p>\n</blockquote>\n<ul>\n<li>Existing classes have an error:</li>\n</ul>\n<blockquote>\n<p>&quot;The implicit super constructor is undefined for default constructor. Must define explicit constructor&quot;</p>\n</blockquote>\n<ul>\n<li>Other random &quot;cannot resolve to a type&quot; errors.</li>\n</ul>\n<p>All of these seem to stem from some sort of setting error I have with VS Code but can seem to find what it is. I have already uninstalled and reinstalled the RedHat plug-in that enables the Java language for VS Code.</p>\n<p>I have tried setting the java_home setting in the extension to the direct location of the install but that didn't work. Tried uninstalling and reinstalling java and that also didn't work.</p>\n<p>My operating specs are as follows:</p>\n<ul>\n<li><p>OS: macOS Sierra</p>\n</li>\n<li><p>VS Code version 1.15.1</p>\n</li>\n<li><p>JDK version 1.8.0.144</p>\n</li>\n</ul>\n<p>Any idea on what may be causing this? Do you think it may be an error in how I have VS Code set up or if it's an error (or rather incompatibility) with how the existing project is set up?</p>\n"},{"tags":["java","openrewrite"],"answers":[{"tags":[],"owner":{"account_id":272812,"reputation":4707,"user_id":564092,"accept_rate":94,"display_name":"Darek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696187646,"creation_date":1696187646,"answer_id":77211954,"question_id":77211943,"body_markdown":"Before anybody looses their marbles and screams at YAML (again, again) ... all it took was extra spaces ...\r\n\r\n```yaml\r\ntype: specs.openrewrite.org/v1beta/recipe\r\nname: cleanup\r\ndisplayName: &quot;Cleanup&quot;\r\ndescription: &quot;Cleanup&quot;\r\n\r\nrecipeList:\r\n  - org.openrewrite.java.logging.SystemOutToLogging:\r\n      loggerName: &quot;logger&quot;\r\n      addLogger: &quot;true&quot;\r\n```","title":"How can I specify org.openrewrite.java.logging.SystemPrintToLogging options?","body":"<p>Before anybody looses their marbles and screams at YAML (again, again) ... all it took was extra spaces ...</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>type: specs.openrewrite.org/v1beta/recipe\nname: cleanup\ndisplayName: &quot;Cleanup&quot;\ndescription: &quot;Cleanup&quot;\n\nrecipeList:\n  - org.openrewrite.java.logging.SystemOutToLogging:\n      loggerName: &quot;logger&quot;\n      addLogger: &quot;true&quot;\n</code></pre>\n"}],"owner":{"account_id":272812,"reputation":4707,"user_id":564092,"accept_rate":94,"display_name":"Darek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696187646,"creation_date":1696187475,"question_id":77211943,"body_markdown":"I would very much appreciate a sample maven or YAML configuration for the four options this rewrite recipe supports, primarily `addLogger` and `logger` ... having been struggling with it for quite some time ... \r\n\r\n```yaml\r\ntype: specs.openrewrite.org/v1beta/recipe\r\nname: cleanup\r\ndisplayName: &quot;Cleanup&quot;\r\ndescription: &quot;Cleanup&quot;\r\n\r\nrecipeList:\r\n  - org.openrewrite.java.logging.SystemOutToLogging:\r\n    loggerName: &quot;logger&quot;\r\n    addLogger: &quot;true&quot;\r\n```\r\n","title":"How can I specify org.openrewrite.java.logging.SystemPrintToLogging options?","body":"<p>I would very much appreciate a sample maven or YAML configuration for the four options this rewrite recipe supports, primarily <code>addLogger</code> and <code>logger</code> ... having been struggling with it for quite some time ...</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>type: specs.openrewrite.org/v1beta/recipe\nname: cleanup\ndisplayName: &quot;Cleanup&quot;\ndescription: &quot;Cleanup&quot;\n\nrecipeList:\n  - org.openrewrite.java.logging.SystemOutToLogging:\n    loggerName: &quot;logger&quot;\n    addLogger: &quot;true&quot;\n</code></pre>\n"},{"tags":["java","parsing","integer","numbers","hex"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1696170564,"post_id":77210772,"comment_id":136116411,"body_markdown":"Hexadecimal routines are really somewhat broken in Java. Firstly, they are mystified by `0x` and why do they really care if 0x8000_0000 is &gt; `Integer.MAX_VALUE`? It&#39;s a bit pattern and will fit in an `int`. You might try: `a[0] = Long.decode(s.replaceAll(&quot;_&quot;, &quot;&quot;)).intValue();` where `s` is your hex string and `a` is your `int[]` There&#39;s justification for being mystified by `_` as it&#39;s non-standard and a visual aid for the programmer","body":"Hexadecimal routines are really somewhat broken in Java. Firstly, they are mystified by <code>0x</code> and why do they really care if 0x8000_0000 is &gt; <code>Integer.MAX_VALUE</code>? It&#39;s a bit pattern and will fit in an <code>int</code>. You might try: <code>a[0] = Long.decode(s.replaceAll(&quot;_&quot;, &quot;&quot;)).intValue();</code> where <code>s</code> is your hex string and <code>a</code> is your <code>int[]</code> There&#39;s justification for being mystified by <code>_</code> as it&#39;s non-standard and a visual aid for the programmer"}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696169306,"creation_date":1696169306,"answer_id":77210816,"question_id":77210772,"body_markdown":"*then all values starting from &quot;0x8000_0000&quot; are not parsed to int*\r\n\r\nBecause `0x8000_0000` is `Integer.MAX_VALUE + 1`. Obviously `1` more than the greatest possible `int` can&#39;t be stored in an `int`. If you need to support **arbitrary** values, use [`BigInteger`](https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html).\r\n\r\n\tString s = &quot;0x8000_0000&quot;;\r\n\tBigInteger bi = new BigInteger(s.substring(2).replaceAll(&quot;_&quot;, &quot;&quot;), 16);\r\n\tSystem.out.println(bi.subtract(BigInteger.valueOf(Integer.MAX_VALUE)));\r\n\r\nOutputs\r\n\r\n    1","title":"JAVA: The input is hexadecimal numbers in string representation, for example &quot;0xaf12&quot;. The task is to add the value of this number to the array (int)","body":"<p><em>then all values starting from &quot;0x8000_0000&quot; are not parsed to int</em></p>\n<p>Because <code>0x8000_0000</code> is <code>Integer.MAX_VALUE + 1</code>. Obviously <code>1</code> more than the greatest possible <code>int</code> can't be stored in an <code>int</code>. If you need to support <strong>arbitrary</strong> values, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html\" rel=\"nofollow noreferrer\"><code>BigInteger</code></a>.</p>\n<pre><code>String s = &quot;0x8000_0000&quot;;\nBigInteger bi = new BigInteger(s.substring(2).replaceAll(&quot;_&quot;, &quot;&quot;), 16);\nSystem.out.println(bi.subtract(BigInteger.valueOf(Integer.MAX_VALUE)));\n</code></pre>\n<p>Outputs</p>\n<pre><code>1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696176030,"creation_date":1696172814,"answer_id":77211034,"question_id":77210772,"body_markdown":"&gt;*And if I parse through Long, then unsigned huge numbers are obtained, and I don&#39;t need such numbers - I need signed ones in the int range.*\r\n\r\nAs @g00se said in the comments, you can use [Long.decode](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Long.html#decode(java.lang.String)) for this.  Then get the `intValue`. But first you must remove the underscore as decode will throw an exception a underscores are not permitted.\r\n```\r\nString[] hexValues = {&quot;0x8000_0000&quot;, &quot;0x8000_0001&quot;, \r\n        &quot;0x1ab3&quot;, &quot;0x10&quot;, &quot;0x9&quot;, &quot;0xFFFF_FFFF&quot;};\r\nList&lt;Integer&gt; ints = new ArrayList&lt;&gt;();\r\n\r\nfor (String hex : hexValues) {\r\n    ints.add(Long.decode(hex.replace(&quot;_&quot;,&quot;&quot;)).intValue());\r\n}\r\n\r\nfor (int v : ints) {\r\n    System.out.println(v);\r\n}\r\n```\r\nprints\r\n```\r\n-2147483648\r\n-2147483647\r\n6835\r\n16\r\n9\r\n-1\r\n```\r\nYou can also do it by just converting the String values to decimal imperatively using a loop. Here is how it works.  Consider `0x2AF` and starting with `2`.\r\n```\r\nv = 0   // initialize v\r\nv = v * 16 + 2  (0*16) + 2 = 0 + 2\r\nv = v * 16 + 10 (2* 16) + 10 =32 + 10 = 42\r\nv = v * 16 + 15 (42*16) + 15 = 672 + 15 = 687\r\n```\r\n- first declare a string of hex digits\r\n- the index of each is their decimal equivalent\r\n- Converting to uppercase, repeat the previously demonstrated process.\r\n```\r\nString hexDigits = &quot;0123456789ABCDEF&quot;;\r\nfor (String hex : hexValues) {\r\n     int value = 0;\r\n     for (char c : hex.toUpperCase().toCharArray()) {\r\n         int index = hexDigits.indexOf(c);\r\n         if (index &gt;= 0) {\r\n             value = value * 16 + index; \r\n         }\r\n     }\r\n     ints.add(value);\r\n}\r\n\r\n","title":"JAVA: The input is hexadecimal numbers in string representation, for example &quot;0xaf12&quot;. The task is to add the value of this number to the array (int)","body":"<blockquote>\n<p><em>And if I parse through Long, then unsigned huge numbers are obtained, and I don't need such numbers - I need signed ones in the int range.</em></p>\n</blockquote>\n<p>As @g00se said in the comments, you can use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Long.html#decode(java.lang.String)\" rel=\"nofollow noreferrer\">Long.decode</a> for this.  Then get the <code>intValue</code>. But first you must remove the underscore as decode will throw an exception a underscores are not permitted.</p>\n<pre><code>String[] hexValues = {&quot;0x8000_0000&quot;, &quot;0x8000_0001&quot;, \n        &quot;0x1ab3&quot;, &quot;0x10&quot;, &quot;0x9&quot;, &quot;0xFFFF_FFFF&quot;};\nList&lt;Integer&gt; ints = new ArrayList&lt;&gt;();\n\nfor (String hex : hexValues) {\n    ints.add(Long.decode(hex.replace(&quot;_&quot;,&quot;&quot;)).intValue());\n}\n\nfor (int v : ints) {\n    System.out.println(v);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>-2147483648\n-2147483647\n6835\n16\n9\n-1\n</code></pre>\n<p>You can also do it by just converting the String values to decimal imperatively using a loop. Here is how it works.  Consider <code>0x2AF</code> and starting with <code>2</code>.</p>\n<pre><code>v = 0   // initialize v\nv = v * 16 + 2  (0*16) + 2 = 0 + 2\nv = v * 16 + 10 (2* 16) + 10 =32 + 10 = 42\nv = v * 16 + 15 (42*16) + 15 = 672 + 15 = 687\n</code></pre>\n<ul>\n<li>first declare a string of hex digits</li>\n<li>the index of each is their decimal equivalent</li>\n<li>Converting to uppercase, repeat the previously demonstrated process.</li>\n</ul>\n<pre><code>String hexDigits = &quot;0123456789ABCDEF&quot;;\nfor (String hex : hexValues) {\n     int value = 0;\n     for (char c : hex.toUpperCase().toCharArray()) {\n         int index = hexDigits.indexOf(c);\n         if (index &gt;= 0) {\n             value = value * 16 + index; \n         }\n     }\n     ints.add(value);\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696187092,"creation_date":1696187092,"answer_id":77211918,"question_id":77210772,"body_markdown":"&gt; _&quot;... if I parse through Long, then unsigned huge numbers are obtained, and I don&#39;t need such numbers - I need signed ones in the int range. ...&quot;_\r\n\r\nParse with _Long_ and just check the range before adding it.\r\n\r\n```java\r\nlong b = Long.parseLong(&quot;ffffffff&quot;, 16);\r\nif (b &gt;= Integer.MIN_VALUE &amp;&amp; b &lt;= Integer.MAX_VALUE) {\r\n\r\n}\r\n```","title":"JAVA: The input is hexadecimal numbers in string representation, for example &quot;0xaf12&quot;. The task is to add the value of this number to the array (int)","body":"<blockquote>\n<p><em>&quot;... if I parse through Long, then unsigned huge numbers are obtained, and I don't need such numbers - I need signed ones in the int range. ...&quot;</em></p>\n</blockquote>\n<p>Parse with <em>Long</em> and just check the range before adding it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long b = Long.parseLong(&quot;ffffffff&quot;, 16);\nif (b &gt;= Integer.MIN_VALUE &amp;&amp; b &lt;= Integer.MAX_VALUE) {\n\n}\n</code></pre>\n"}],"owner":{"account_id":29530263,"reputation":1,"user_id":22631026,"display_name":"Timofey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1696187092,"creation_date":1696168589,"question_id":77210772,"body_markdown":"The problem is that there is no way I can take the int value of this hexadecimal number and put it there in its hexadecimal form.\r\nBut, if I convert it to a decimal value, then all values starting from &quot;0x8000_0000&quot; are not parsed to int, since these values go beyond int. And if I parse through Long, then unsigned huge numbers are obtained, and I don&#39;t need such numbers - I need signed ones in the int range.\r\n\r\nI tried to do this, and I thought it was correct since some of the examples that I checked were all correct, but the tests on the assignment show that it is not correct. But what numbers the error comes out with is not shown to me.\r\n\r\nlong b = Long.parseLong(&quot;ffffffff&quot;, 16);\r\nSystem.out.println((int) (Integer.MIN_VALUE + (b - Integer.MAX_VALUE - 1)));\r\n\r\nI also saw on the Internet that you can try somehow through bit shifts, but I did not find any use for that information for my task.","title":"JAVA: The input is hexadecimal numbers in string representation, for example &quot;0xaf12&quot;. The task is to add the value of this number to the array (int)","body":"<p>The problem is that there is no way I can take the int value of this hexadecimal number and put it there in its hexadecimal form.\nBut, if I convert it to a decimal value, then all values starting from &quot;0x8000_0000&quot; are not parsed to int, since these values go beyond int. And if I parse through Long, then unsigned huge numbers are obtained, and I don't need such numbers - I need signed ones in the int range.</p>\n<p>I tried to do this, and I thought it was correct since some of the examples that I checked were all correct, but the tests on the assignment show that it is not correct. But what numbers the error comes out with is not shown to me.</p>\n<p>long b = Long.parseLong(&quot;ffffffff&quot;, 16);\nSystem.out.println((int) (Integer.MIN_VALUE + (b - Integer.MAX_VALUE - 1)));</p>\n<p>I also saw on the Internet that you can try somehow through bit shifts, but I did not find any use for that information for my task.</p>\n"},{"tags":["java","exception","executable-jar","maven-shade-plugin","marytts"],"owner":{"account_id":4459325,"reputation":1497,"user_id":3628679,"display_name":"Alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696186941,"creation_date":1696186485,"question_id":77211883,"body_markdown":"I am working on a JavaFX application in Eclipse that uses MaryTTS. In Eclipse the application works fine, but if I generate a runnable jar with Mavens shade plugin I get\r\n\r\n    marytts.exceptions.MaryConfigurationException: Cannot start MARY server\r\n            at marytts.LocalMaryInterface.&lt;init&gt;(LocalMaryInterface.java:66)\r\n            at de.levin.util.TextToSpeech.&lt;init&gt;(TextToSpeech.java:27)\r\n            at de.levin.ctrl.MainCtrl.initialize(MainCtrl.java:1317)\r\n            at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2655)\r\n            at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2548)\r\n            at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\r\n            at de.levin.sifuSays.App.start(App.java:124)\r\n            at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\r\n            at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\r\n            at com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\r\n            at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n            at com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\r\n            at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n            at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n            at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\r\n            at java.base/java.lang.Thread.run(Thread.java:1589)\r\n    Caused by: java.lang.NullPointerException: Cannot enter synchronized block because the return value of &quot;marytts.config.MaryConfig.getMainConfig()&quot; is null\r\n            at marytts.util.MaryRuntimeUtils.ensureMaryStarted(MaryRuntimeUtils.java:70)\r\n            at marytts.LocalMaryInterface.&lt;init&gt;(LocalMaryInterface.java:64)\r\n            ... 15 more\r\n\r\nI checked the implementation in https://github.com/marytts/marytts/blob/master/marytts-runtime/src/main/java/marytts/config/MaryConfig.java and I guess the important line is\r\n\r\n `private static final ServiceLoader&lt;MaryConfig&gt; configLoader = ServiceLoader.load(MaryConfig.class);`\r\n\r\nThe MaryConfig.class does exist in the jar File that the shade plugin created. \r\n\r\nAny idea?\r\n\r\nHere are my findings / thoughts: When I was trying to find out was is the issue, I found https://youtrack.jetbrains.com/issue/IDEA-240253 which sounds like a potential root cause also in the shade plugin and I recalled the Warning \r\n\r\n    [WARNING] maven-shade-plugin has detected that some files are\r\n    [WARNING] present in two or more JARs. When this happens, only one\r\n    [WARNING] single version of the file is copied to the uber jar.\r\n\r\nbut when reading the https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html page, I don&#39;t get it - my Maven skills are very limited.\r\nSo should you agree, that these things belong together, then how do I need to modify my pom.xml?\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;de.levin&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;sifuSays&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.0.0&lt;/version&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n    \t\t&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;repositories&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;jcenter&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;jcenter-bintray&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;https://jcenter.bintray.com&lt;/url&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/repositories&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;!-- JavaFX --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;19&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;19&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;19&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- JAXB API only --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.3&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- Framegrabber to get image from movies --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javacv&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.5.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;ffmpeg-platform&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0-1.5.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;flandmark&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.07-1.5.5&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/de.dfki.mary/marytts --&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/de.dfki.mary/marytts-common --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;de.dfki.mary&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;marytts-common&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/de.dfki.mary/voice-dfki-pavoque-neutral-hsmm --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;de.dfki.mary&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;voice-dfki-prudence-hsmm&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;de.dfki.mary&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;voice-cmu-slt-hsmm&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.11.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;11&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;11&lt;/target&gt;\r\n    \t\t\t\t\t&lt;release&gt;11&lt;/release&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;0.0.8&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;!-- Default configuration for running --&gt;\r\n    \t\t\t\t\t\t&lt;!-- Usage: mvn clean javafx:run --&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;default-cli&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;mainClass&gt;de.levin.sifuSays.App&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.3.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;archive&gt;\r\n    \t\t\t\t\t\t&lt;manifest&gt;\r\n    \t\t\t\t\t\t\t&lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n    \t\t\t\t\t\t\t&lt;mainClass&gt;de.levin.sifuSays.AppLauncher&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t&lt;/manifest&gt;\r\n    \t\t\t\t\t&lt;/archive&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.5.0&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;outputFile&gt;${dir}/${project.artifactId}.jar&lt;/outputFile&gt;\r\n    \t\t\t\t\t\t\t&lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n    \t\t\t\t\t\t\t&lt;transformers&gt;\r\n    \t\t\t\t\t\t\t\t&lt;transformer\r\n    \t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;mainClass&gt;de.levin.sifuSays.AppLauncher&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t\t\t&lt;/transformers&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nIn order to build the jar, I call: `clean package shade:shade` from the Eclipse Maven interface\r\n\r\nIn case you want to try\r\n\r\n    package de.levin.util;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import javax.sound.sampled.AudioInputStream;\r\n    \r\n    import marytts.LocalMaryInterface;\r\n    import marytts.MaryInterface;\r\n    import marytts.exceptions.MaryConfigurationException;\r\n    import marytts.exceptions.SynthesisException;\r\n    import marytts.util.data.audio.AudioPlayer;\r\n    \r\n    public class TextToSpeech {\r\n    \r\n    \tprivate AudioPlayer tts;\r\n    \tprivate MaryInterface marytts;\r\n    \r\n    \t/**\r\n    \t * Constructor\r\n    \t */\r\n    \tpublic TextToSpeech() {\r\n    \r\n    \t\ttry {\r\n    \t\t\tmarytts = new LocalMaryInterface();\r\n    \r\n    \t\t\tmarytts.setVoice(&quot;dfki-prudence-hsmm&quot;);\r\n    \t\t\tmarytts.setAudioEffects(&quot;Rate(durScale:1.5)+Robot(amount:0)&quot;);\r\n    \r\n    \t\t} catch (MaryConfigurationException ex) {\r\n    \t\t\tex.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \r\n    \r\n    \t/**\r\n    \t * Transform text to speech\r\n    \t * \r\n    \t * @param text\r\n    \t */\r\n    \tpublic void speak(String text) {\r\n    \r\n    \t\t// Stop the previous player\r\n    \t\tif (tts != null) {\r\n    \t\t\ttts.cancel();\r\n    \t\t}\r\n    \r\n    \t\ttry (AudioInputStream audio = marytts.generateAudio(text)) {\r\n    \r\n    \t\t\t// Player is a thread(threads can only run one time) so it can be\r\n    \t\t\t// used has to be initiated every time\r\n    \t\t\ttts = new AudioPlayer();\r\n    \t\t\ttts.setAudio(audio);\r\n    \t\t\ttts.setDaemon(true);\r\n    \t\t\ttts.start();\r\n    \r\n    \t\t} catch (SynthesisException | IOException ex) {\r\n    \t\t\tex.printStackTrace();\r\n    \t\t} \r\n    \t}\r\n    }\r\n\r\nand I call the methods from another method in another class\r\n\r\n    TextToSpeech tts = new TextToSpeech();\r\n    tts.speak(&quot;Take the stretch a little bit deeper&quot;);\r\n\r\nOne last thought: Ialso found this https://stackoverflow.com/questions/61457897/marytts-exceptions-maryconfigurationexception-cannot-start-mary-server\r\nNot sure whether it relates?!\r\n\r\nThank you in advance!","title":"MaryConfigurationException: MaryTTS and Maven shade plugin build executable jar","body":"<p>I am working on a JavaFX application in Eclipse that uses MaryTTS. In Eclipse the application works fine, but if I generate a runnable jar with Mavens shade plugin I get</p>\n<pre><code>marytts.exceptions.MaryConfigurationException: Cannot start MARY server\n        at marytts.LocalMaryInterface.&lt;init&gt;(LocalMaryInterface.java:66)\n        at de.levin.util.TextToSpeech.&lt;init&gt;(TextToSpeech.java:27)\n        at de.levin.ctrl.MainCtrl.initialize(MainCtrl.java:1317)\n        at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2655)\n        at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2548)\n        at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\n        at de.levin.sifuSays.App.start(App.java:124)\n        at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\n        at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\n        at com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\n        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n        at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\n        at java.base/java.lang.Thread.run(Thread.java:1589)\nCaused by: java.lang.NullPointerException: Cannot enter synchronized block because the return value of &quot;marytts.config.MaryConfig.getMainConfig()&quot; is null\n        at marytts.util.MaryRuntimeUtils.ensureMaryStarted(MaryRuntimeUtils.java:70)\n        at marytts.LocalMaryInterface.&lt;init&gt;(LocalMaryInterface.java:64)\n        ... 15 more\n</code></pre>\n<p>I checked the implementation in <a href=\"https://github.com/marytts/marytts/blob/master/marytts-runtime/src/main/java/marytts/config/MaryConfig.java\" rel=\"nofollow noreferrer\">https://github.com/marytts/marytts/blob/master/marytts-runtime/src/main/java/marytts/config/MaryConfig.java</a> and I guess the important line is</p>\n<p><code>private static final ServiceLoader&lt;MaryConfig&gt; configLoader = ServiceLoader.load(MaryConfig.class);</code></p>\n<p>The MaryConfig.class does exist in the jar File that the shade plugin created.</p>\n<p>Any idea?</p>\n<p>Here are my findings / thoughts: When I was trying to find out was is the issue, I found <a href=\"https://youtrack.jetbrains.com/issue/IDEA-240253\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-240253</a> which sounds like a potential root cause also in the shade plugin and I recalled the Warning</p>\n<pre><code>[WARNING] maven-shade-plugin has detected that some files are\n[WARNING] present in two or more JARs. When this happens, only one\n[WARNING] single version of the file is copied to the uber jar.\n</code></pre>\n<p>but when reading the <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html</a> page, I don't get it - my Maven skills are very limited.\nSo should you agree, that these things belong together, then how do I need to modify my pom.xml?</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;de.levin&lt;/groupId&gt;\n    &lt;artifactId&gt;sifuSays&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;jcenter&lt;/id&gt;\n            &lt;name&gt;jcenter-bintray&lt;/name&gt;\n            &lt;url&gt;https://jcenter.bintray.com&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;dependencies&gt;\n        &lt;!-- JavaFX --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;19&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;19&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;19&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- JAXB API only --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;4.0.3&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Framegrabber to get image from movies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\n            &lt;artifactId&gt;javacv&lt;/artifactId&gt;\n            &lt;version&gt;1.5.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\n            &lt;artifactId&gt;ffmpeg-platform&lt;/artifactId&gt;\n            &lt;version&gt;6.0-1.5.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\n            &lt;artifactId&gt;flandmark&lt;/artifactId&gt;\n            &lt;version&gt;1.07-1.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/de.dfki.mary/marytts --&gt;\n        &lt;!-- https://mvnrepository.com/artifact/de.dfki.mary/marytts-common --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;de.dfki.mary&lt;/groupId&gt;\n            &lt;artifactId&gt;marytts-common&lt;/artifactId&gt;\n            &lt;version&gt;5.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/de.dfki.mary/voice-dfki-pavoque-neutral-hsmm --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;de.dfki.mary&lt;/groupId&gt;\n            &lt;artifactId&gt;voice-dfki-prudence-hsmm&lt;/artifactId&gt;\n            &lt;version&gt;5.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;de.dfki.mary&lt;/groupId&gt;\n            &lt;artifactId&gt;voice-cmu-slt-hsmm&lt;/artifactId&gt;\n            &lt;version&gt;5.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;de.levin.sifuSays.App&lt;/mainClass&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;mainClass&gt;de.levin.sifuSays.AppLauncher&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputFile&gt;${dir}/${project.artifactId}.jar&lt;/outputFile&gt;\n                            &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                    implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;mainClass&gt;de.levin.sifuSays.AppLauncher&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>In order to build the jar, I call: <code>clean package shade:shade</code> from the Eclipse Maven interface</p>\n<p>In case you want to try</p>\n<pre><code>package de.levin.util;\n\nimport java.io.IOException;\n\nimport javax.sound.sampled.AudioInputStream;\n\nimport marytts.LocalMaryInterface;\nimport marytts.MaryInterface;\nimport marytts.exceptions.MaryConfigurationException;\nimport marytts.exceptions.SynthesisException;\nimport marytts.util.data.audio.AudioPlayer;\n\npublic class TextToSpeech {\n\n    private AudioPlayer tts;\n    private MaryInterface marytts;\n\n    /**\n     * Constructor\n     */\n    public TextToSpeech() {\n\n        try {\n            marytts = new LocalMaryInterface();\n\n            marytts.setVoice(&quot;dfki-prudence-hsmm&quot;);\n            marytts.setAudioEffects(&quot;Rate(durScale:1.5)+Robot(amount:0)&quot;);\n\n        } catch (MaryConfigurationException ex) {\n            ex.printStackTrace();\n        }\n    }\n\n\n\n    /**\n     * Transform text to speech\n     * \n     * @param text\n     */\n    public void speak(String text) {\n\n        // Stop the previous player\n        if (tts != null) {\n            tts.cancel();\n        }\n\n        try (AudioInputStream audio = marytts.generateAudio(text)) {\n\n            // Player is a thread(threads can only run one time) so it can be\n            // used has to be initiated every time\n            tts = new AudioPlayer();\n            tts.setAudio(audio);\n            tts.setDaemon(true);\n            tts.start();\n\n        } catch (SynthesisException | IOException ex) {\n            ex.printStackTrace();\n        } \n    }\n}\n</code></pre>\n<p>and I call the methods from another method in another class</p>\n<pre><code>TextToSpeech tts = new TextToSpeech();\ntts.speak(&quot;Take the stretch a little bit deeper&quot;);\n</code></pre>\n<p>One last thought: Ialso found this <a href=\"https://stackoverflow.com/questions/61457897/marytts-exceptions-maryconfigurationexception-cannot-start-mary-server\">marytts.exceptions.MaryConfigurationException: Cannot start MARY server</a>\nNot sure whether it relates?!</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","google-maps"],"comments":[{"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":0,"creation_date":1263920529,"post_id":2095181,"comment_id":2028369,"body_markdown":"I don&#39;t think this is available via the service, only their javascript API.","body":"I don&#39;t think this is available via the service, only their javascript API."}],"answers":[{"tags":[],"owner":{"account_id":38309,"reputation":19501,"user_id":109880,"accept_rate":76,"display_name":"Fortega"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1263920880,"creation_date":1263920469,"answer_id":2095278,"question_id":2095181,"body_markdown":"Google only provides this in javascript.\r\nHowever, there is a [request][1] to provide it in java also. So possibly, it will be there in the near future.\r\n\r\nThe fact that there is no out-of-the-box solution from google, doesn&#39;t mean that you can not create one for yourselve of course...\r\n\r\n\r\n[EDIT]\r\nFor example, you could read the sourcecode of [your directions in html][2] to find the distance and the route.\r\n\r\n\r\n  [1]: http://code.google.com/p/gmaps-api-issues/issues/detail?id=235\r\n  [2]: http://maps.google.com/maps?q=from+37.771008,+-122.41175+to+37.62345,+-122.41175&amp;output=html","title":"google maps api java","body":"<p>Google only provides this in javascript.\nHowever, there is a <a href=\"http://code.google.com/p/gmaps-api-issues/issues/detail?id=235\" rel=\"nofollow noreferrer\">request</a> to provide it in java also. So possibly, it will be there in the near future.</p>\n\n<p>The fact that there is no out-of-the-box solution from google, doesn't mean that you can not create one for yourselve of course...</p>\n\n<p>[EDIT]\nFor example, you could read the sourcecode of <a href=\"http://maps.google.com/maps?q=from+37.771008,+-122.41175+to+37.62345,+-122.41175&amp;output=html\" rel=\"nofollow noreferrer\">your directions in html</a> to find the distance and the route.</p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1263920720,"creation_date":1263920720,"answer_id":2095314,"question_id":2095181,"body_markdown":"&lt;a href=&quot;http://www.mozilla.org/rhino/&quot;&gt;Rhino&lt;/a&gt; provides a javascript engine for Java applications. You can play around with it.","title":"google maps api java","body":"<p><a href=\"http://www.mozilla.org/rhino/\" rel=\"nofollow noreferrer\">Rhino</a> provides a javascript engine for Java applications. You can play around with it.</p>\n"},{"tags":[],"owner":{"account_id":4243102,"reputation":3047,"user_id":5784939,"display_name":"Eugene Maysyuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696186674,"creation_date":1696186674,"answer_id":77211892,"question_id":2095181,"body_markdown":"You can use official [Java Client][1] for Google Maps\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.maps&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;google-maps-services&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.25&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\nTake a look at `com.google.maps.DistanceMatrixApi` and `com.google.maps.DirectionsAPI`\r\n\r\nCode sample for Distance Matrix API ([Documentation][2]):\r\n\r\n    \tpublic static List&lt;DistanceMatrixRow&gt; distance() {\r\n\t\tList&lt;DistanceMatrixRow&gt; results = new ArrayList&lt;&gt;();\r\n\t\ttry {\r\n\t\t\tGeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\r\n\t\t\tString[] origins = {&quot;New Yourk, NY&quot;};\r\n\t\t\tString[] destinations = {&quot;Jersey City, NJ&quot;};\r\n\t\t\tDistanceMatrix response = DistanceMatrixApi.getDistanceMatrix(ctx, origins, destinations)\r\n\t\t\t\t.units(Unit.METRIC)\r\n\t\t\t\t.mode(TravelMode.DRIVING)\r\n\t\t\t\t.await();\r\n\r\n\t\t\tresults.addAll(Arrays.asList(response.rows));\r\n\t\t} catch (ApiException e) {\r\n\t\t\tlogger.error(&quot;ApiException: &quot;, e);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\tlogger.error(&quot;InterruptedException: &quot;, e);\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(&quot;IOException: &quot;, e);\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\nCode sample for Directions API ([Documentation][3])\r\n\r\n\tpublic static List&lt;DirectionsRoute&gt; routes() {\r\n\t\tList&lt;DirectionsRoute&gt; results = new ArrayList&lt;&gt;();\r\n\t\ttry {\r\n\t\t\tGeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\r\n\t\t\tString origin = &quot;New Yourk, NY&quot;;\r\n\t\t\tString destination = &quot;Jersey City, NJ&quot;;\r\n\t\t\tDirectionsResult response = DirectionsApi.getDirections(ctx, origin, destination)\r\n\t\t\t\t.units(Unit.METRIC)\r\n\t\t\t\t.mode(TravelMode.TRANSIT)\r\n\t\t\t\t.transitMode(TransitMode.BUS)\r\n\t\t\t\t.await();\r\n\r\n\t\t\tArrays.stream(response.geocodedWaypoints).forEach(System.out::println);\r\n\t\t\tresults.addAll(Arrays.asList(response.routes));\r\n\t\t} catch (ApiException e) {\r\n\t\t\tlogger.error(&quot;ApiException: &quot;, e);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\tlogger.error(&quot;InterruptedException: &quot;, e);\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(&quot;IOException: &quot;, e);\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\r\n  [1]: https://developers.google.com/maps/documentation/places/web-service/client-library\r\n  [2]: https://developers.google.com/maps/documentation/distance-matrix\r\n  [3]: https://developers.google.com/maps/documentation/directions\r\n\r\nI invested my own time to investigate how to use Google Maps SDK. At the time I was looking at this there was no any docs on how to use that Java Client. If you found my answer helpful, please consider leaving a vote.","title":"google maps api java","body":"<p>You can use official <a href=\"https://developers.google.com/maps/documentation/places/web-service/client-library\" rel=\"nofollow noreferrer\">Java Client</a> for Google Maps</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.maps&lt;/groupId&gt;\n        &lt;artifactId&gt;google-maps-services&lt;/artifactId&gt;\n        &lt;version&gt;2.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;version&gt;1.7.25&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Take a look at <code>com.google.maps.DistanceMatrixApi</code> and <code>com.google.maps.DirectionsAPI</code></p>\n<p>Code sample for Distance Matrix API (<a href=\"https://developers.google.com/maps/documentation/distance-matrix\" rel=\"nofollow noreferrer\">Documentation</a>):</p>\n<pre><code>    public static List&lt;DistanceMatrixRow&gt; distance() {\n    List&lt;DistanceMatrixRow&gt; results = new ArrayList&lt;&gt;();\n    try {\n        GeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\n        String[] origins = {&quot;New Yourk, NY&quot;};\n        String[] destinations = {&quot;Jersey City, NJ&quot;};\n        DistanceMatrix response = DistanceMatrixApi.getDistanceMatrix(ctx, origins, destinations)\n            .units(Unit.METRIC)\n            .mode(TravelMode.DRIVING)\n            .await();\n\n        results.addAll(Arrays.asList(response.rows));\n    } catch (ApiException e) {\n        logger.error(&quot;ApiException: &quot;, e);\n    } catch (InterruptedException e) {\n        logger.error(&quot;InterruptedException: &quot;, e);\n    } catch (IOException e) {\n        logger.error(&quot;IOException: &quot;, e);\n    }\n\n    return results;\n}\n</code></pre>\n<p>Code sample for Directions API (<a href=\"https://developers.google.com/maps/documentation/directions\" rel=\"nofollow noreferrer\">Documentation</a>)</p>\n<pre><code>public static List&lt;DirectionsRoute&gt; routes() {\n    List&lt;DirectionsRoute&gt; results = new ArrayList&lt;&gt;();\n    try {\n        GeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\n        String origin = &quot;New Yourk, NY&quot;;\n        String destination = &quot;Jersey City, NJ&quot;;\n        DirectionsResult response = DirectionsApi.getDirections(ctx, origin, destination)\n            .units(Unit.METRIC)\n            .mode(TravelMode.TRANSIT)\n            .transitMode(TransitMode.BUS)\n            .await();\n\n        Arrays.stream(response.geocodedWaypoints).forEach(System.out::println);\n        results.addAll(Arrays.asList(response.routes));\n    } catch (ApiException e) {\n        logger.error(&quot;ApiException: &quot;, e);\n    } catch (InterruptedException e) {\n        logger.error(&quot;InterruptedException: &quot;, e);\n    } catch (IOException e) {\n        logger.error(&quot;IOException: &quot;, e);\n    }\n\n    return results;\n}\n</code></pre>\n<p>I invested my own time to investigate how to use Google Maps SDK. At the time I was looking at this there was no any docs on how to use that Java Client. If you found my answer helpful, please consider leaving a vote.</p>\n"}],"owner":{"account_id":54032,"reputation":18552,"user_id":161628,"accept_rate":81,"display_name":"Rohit Banga"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2482,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":2095278,"answer_count":3,"score":4,"last_activity_date":1696186674,"creation_date":1263919680,"question_id":2095181,"body_markdown":"i have a console application, needs to find the distance and route between two places using the google maps api. that means i do not have a browser and hence no javascript. is it possible to do it using java using a HTTP request or something. i have tried geocoding and can find the latitude and longitude of a given address using HTTP requests. how to find distance and routes using java.","title":"google maps api java","body":"<p>i have a console application, needs to find the distance and route between two places using the google maps api. that means i do not have a browser and hence no javascript. is it possible to do it using java using a HTTP request or something. i have tried geocoding and can find the latitude and longitude of a given address using HTTP requests. how to find distance and routes using java.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"score":1,"creation_date":1696185326,"post_id":77211790,"comment_id":136118084,"body_markdown":"Do you want the answer about how e.g. OpenJDK does it, or do you want the &quot;that&#39;s up to the implementation to decide&quot; answer? Generally local variables are stored on the [call stack](https://en.wikipedia.org/wiki/Call_stack) and each local variable maps to a particular stack offset in the current frame; but in practice a local variable might get mapped to a CPU register, or might not actually exist at runtime at all if the compiler decides to eliminate it.","body":"Do you want the answer about how e.g. OpenJDK does it, or do you want the &quot;that&#39;s up to the implementation to decide&quot; answer? Generally local variables are stored on the <a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow noreferrer\">call stack</a> and each local variable maps to a particular stack offset in the current frame; but in practice a local variable might get mapped to a CPU register, or might not actually exist at runtime at all if the compiler decides to eliminate it."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1696185366,"post_id":77211790,"comment_id":136118091,"body_markdown":"You might want to check other questions like https://stackoverflow.com/questions/28134766/where-are-memory-addresses-stored-in-java","body":"You might want to check other questions like <a href=\"https://stackoverflow.com/questions/28134766/where-are-memory-addresses-stored-in-java\" title=\"where are memory addresses stored in java\">stackoverflow.com/questions/28134766/&hellip;</a>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1696186480,"post_id":77211790,"comment_id":136118202,"body_markdown":"The compiler creates a table/map for variables and their assigned address. In most compiled languages, the variable name is not part of the binary code, only the address.","body":"The compiler creates a table/map for variables and their assigned address. In most compiled languages, the variable name is not part of the binary code, only the address."}],"answers":[{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696186582,"creation_date":1696186582,"answer_id":77211888,"question_id":77211790,"body_markdown":"Fundamentally, this is a question about &quot;how computers work&quot;, and in particular, that a location in memory has an identification which we call its &quot;address&quot;. \r\n\r\nThe address does not need to be &quot;stored&quot; in memory (and then you&#39;d be asking about the address of the memory location that held the address). \r\n\r\nIn your example, the &#39;person&#39; variable is allocated to one location which has its own address, and that location contains the value &#39;abc123&#39;, which is another address. \r\n\r\nThere is no &#39;looking up&#39; to be done, except to the extent that, **during compilation** (not execution), the compiler has structures that hold the properties of names that occur in the source code, and in particular, the corresponding address of names of variables.\r\n\r\n(Simplified explanation: at this level is seems pointless to talk about variable scope, stacks, etc.)\r\n","title":"How does Java actually store and access variables i.e. memory addresses?","body":"<p>Fundamentally, this is a question about &quot;how computers work&quot;, and in particular, that a location in memory has an identification which we call its &quot;address&quot;.</p>\n<p>The address does not need to be &quot;stored&quot; in memory (and then you'd be asking about the address of the memory location that held the address).</p>\n<p>In your example, the 'person' variable is allocated to one location which has its own address, and that location contains the value 'abc123', which is another address.</p>\n<p>There is no 'looking up' to be done, except to the extent that, <strong>during compilation</strong> (not execution), the compiler has structures that hold the properties of names that occur in the source code, and in particular, the corresponding address of names of variables.</p>\n<p>(Simplified explanation: at this level is seems pointless to talk about variable scope, stacks, etc.)</p>\n"}],"owner":{"account_id":1309929,"reputation":4821,"user_id":1258130,"accept_rate":60,"display_name":"eja"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1696186733,"answer_count":1,"score":-1,"last_activity_date":1696186582,"creation_date":1696185097,"question_id":77211790,"body_markdown":"Most tutorials, guides, resources, universities etc. teach us how, when initializing some objects, the actual data gets stored in memory, and the &quot;variable&quot; itself is only a pointer or reference to that block of memory. \r\n\r\nSo, for the following block of code:\r\n```\r\nPerson person = new Person(&quot;Name&quot;);\r\n```\r\nLet&#39;s say the actual data gets stored somewhere randomly in RAM, and the reference to it is `ABC123` - that reference gets assigned to the `person` variable. \r\n\r\nSo, if we can say that `person` is actually `ABC123` which is the address of the actual data, then what can we say about that address itself? Where and how is `ABC123` (as a value on its own) stored, and when later on using the variable `person`, for example, like so:\r\n```\r\nString name = person.getName();\r\n```\r\n\r\nHow is the address value `ABC123` looked up?\r\n\r\nIs the word &quot;person&quot; parsed as a string? Is there a collection of these references that map to the strings (variable names) - and if so how is that collection itself stored?\r\n\r\n\r\n\r\n","title":"How does Java actually store and access variables i.e. memory addresses?","body":"<p>Most tutorials, guides, resources, universities etc. teach us how, when initializing some objects, the actual data gets stored in memory, and the &quot;variable&quot; itself is only a pointer or reference to that block of memory.</p>\n<p>So, for the following block of code:</p>\n<pre><code>Person person = new Person(&quot;Name&quot;);\n</code></pre>\n<p>Let's say the actual data gets stored somewhere randomly in RAM, and the reference to it is <code>ABC123</code> - that reference gets assigned to the <code>person</code> variable.</p>\n<p>So, if we can say that <code>person</code> is actually <code>ABC123</code> which is the address of the actual data, then what can we say about that address itself? Where and how is <code>ABC123</code> (as a value on its own) stored, and when later on using the variable <code>person</code>, for example, like so:</p>\n<pre><code>String name = person.getName();\n</code></pre>\n<p>How is the address value <code>ABC123</code> looked up?</p>\n<p>Is the word &quot;person&quot; parsed as a string? Is there a collection of these references that map to the strings (variable names) - and if so how is that collection itself stored?</p>\n"},{"tags":["java","google-places-api"],"answers":[{"tags":[],"owner":{"account_id":398477,"reputation":1965,"user_id":763176,"display_name":"saxman"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1347995856,"creation_date":1347995856,"answer_id":12483526,"question_id":12460471,"body_markdown":"Here&#39;s a more complete example (includes JSON parsing and some exception handling) for Places API search, autocomplete, and details. It was written for Android, but can be easily ported for non-Android use (need to include org.json libs and use different logging). The `Place` class is a simple value object.\r\n\r\n    package com.example.google.places;\r\n    \r\n    import org.json.JSONArray;\r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    import android.util.Log;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n    import java.net.URLEncoder;\r\n    import java.util.ArrayList;\r\n    \r\n    /**\r\n     * @author saxman\r\n     */\r\n    public class PlacesService {\r\n        private static final String LOG_TAG = &quot;ExampleApp&quot;;\r\n    \r\n        private static final String PLACES_API_BASE = &quot;https://maps.googleapis.com/maps/api/place&quot;;\r\n        \r\n        private static final String TYPE_AUTOCOMPLETE = &quot;/autocomplete&quot;;\r\n        private static final String TYPE_DETAILS = &quot;/details&quot;;\r\n        private static final String TYPE_SEARCH = &quot;/search&quot;;\r\n        \r\n        private static final String OUT_JSON = &quot;/json&quot;;\r\n    \r\n        // KEY!\r\n        private static final String API_KEY = &quot;YOUR KEY&quot;;\r\n    \r\n        public static ArrayList&lt;Place&gt; autocomplete(String input) {\r\n            ArrayList&lt;Place&gt; resultList = null;\r\n    \r\n            HttpURLConnection conn = null;\r\n            StringBuilder jsonResults = new StringBuilder();\r\n            try {\r\n                StringBuilder sb = new StringBuilder(PLACES_API_BASE);\r\n                sb.append(TYPE_AUTOCOMPLETE);\r\n                sb.append(OUT_JSON);\r\n                sb.append(&quot;?sensor=false&quot;);\r\n                sb.append(&quot;&amp;key=&quot; + API_KEY);\r\n                sb.append(&quot;&amp;input=&quot; + URLEncoder.encode(input, &quot;utf8&quot;));\r\n    \r\n                URL url = new URL(sb.toString());\r\n                conn = (HttpURLConnection) url.openConnection();\r\n                InputStreamReader in = new InputStreamReader(conn.getInputStream());\r\n    \r\n                int read;\r\n                char[] buff = new char[1024];\r\n                while ((read = in.read(buff)) != -1) {\r\n                    jsonResults.append(buff, 0, read);\r\n                }\r\n            } catch (MalformedURLException e) {\r\n                Log.e(LOG_TAG, &quot;Error processing Places API URL&quot;, e);\r\n                return resultList;\r\n            } catch (IOException e) {\r\n                Log.e(LOG_TAG, &quot;Error connecting to Places API&quot;, e);\r\n                return resultList;\r\n            } finally {\r\n                if (conn != null) {\r\n                    conn.disconnect();\r\n                }\r\n            }\r\n    \r\n            try {\r\n                // Create a JSON object hierarchy from the results\r\n                JSONObject jsonObj = new JSONObject(jsonResults.toString());\r\n                JSONArray predsJsonArray = jsonObj.getJSONArray(&quot;predictions&quot;);\r\n    \r\n                // Extract the Place descriptions from the results\r\n                resultList = new ArrayList&lt;Place&gt;(predsJsonArray.length());\r\n                for (int i = 0; i &lt; predsJsonArray.length(); i++) {\r\n                    Place place = new Place();\r\n                    place.reference = predsJsonArray.getJSONObject(i).getString(&quot;reference&quot;);\r\n                    place.name = predsJsonArray.getJSONObject(i).getString(&quot;description&quot;);\r\n                    resultList.add(place);\r\n                }\r\n            } catch (JSONException e) {\r\n                Log.e(LOG_TAG, &quot;Error processing JSON results&quot;, e);\r\n            }\r\n    \r\n            return resultList;\r\n        }\r\n        \r\n        public static ArrayList&lt;Place&gt; search(String keyword, double lat, double lng, int radius) {\r\n            ArrayList&lt;Place&gt; resultList = null;\r\n    \r\n            HttpURLConnection conn = null;\r\n            StringBuilder jsonResults = new StringBuilder();\r\n            try {\r\n                StringBuilder sb = new StringBuilder(PLACES_API_BASE);\r\n                sb.append(TYPE_SEARCH);\r\n                sb.append(OUT_JSON);\r\n                sb.append(&quot;?sensor=false&quot;);\r\n                sb.append(&quot;&amp;key=&quot; + API_KEY);\r\n                sb.append(&quot;&amp;keyword=&quot; + URLEncoder.encode(keyword, &quot;utf8&quot;));\r\n                sb.append(&quot;&amp;location=&quot; + String.valueOf(lat) + &quot;,&quot; + String.valueOf(lng));\r\n                sb.append(&quot;&amp;radius=&quot; + String.valueOf(radius));\r\n    \r\n                URL url = new URL(sb.toString());\r\n                conn = (HttpURLConnection) url.openConnection();\r\n                InputStreamReader in = new InputStreamReader(conn.getInputStream());\r\n    \r\n                int read;\r\n                char[] buff = new char[1024];\r\n                while ((read = in.read(buff)) != -1) {\r\n                    jsonResults.append(buff, 0, read);\r\n                }\r\n            } catch (MalformedURLException e) {\r\n                Log.e(LOG_TAG, &quot;Error processing Places API URL&quot;, e);\r\n                return resultList;\r\n            } catch (IOException e) {\r\n                Log.e(LOG_TAG, &quot;Error connecting to Places API&quot;, e);\r\n                return resultList;\r\n            } finally {\r\n                if (conn != null) {\r\n                    conn.disconnect();\r\n                }\r\n            }\r\n    \r\n            try {\r\n                // Create a JSON object hierarchy from the results\r\n                JSONObject jsonObj = new JSONObject(jsonResults.toString());\r\n                JSONArray predsJsonArray = jsonObj.getJSONArray(&quot;results&quot;);\r\n    \r\n                // Extract the Place descriptions from the results\r\n                resultList = new ArrayList&lt;Place&gt;(predsJsonArray.length());\r\n                for (int i = 0; i &lt; predsJsonArray.length(); i++) {\r\n                    Place place = new Place();\r\n                    place.reference = predsJsonArray.getJSONObject(i).getString(&quot;reference&quot;);\r\n                    place.name = predsJsonArray.getJSONObject(i).getString(&quot;name&quot;);\r\n                    resultList.add(place);\r\n                }\r\n            } catch (JSONException e) {\r\n                Log.e(LOG_TAG, &quot;Error processing JSON results&quot;, e);\r\n            }\r\n    \r\n            return resultList;\r\n        }\r\n        \r\n        public static Place details(String reference) {\r\n            HttpURLConnection conn = null;\r\n            StringBuilder jsonResults = new StringBuilder();\r\n            try {\r\n                StringBuilder sb = new StringBuilder(PLACES_API_BASE);\r\n                sb.append(TYPE_DETAILS);\r\n                sb.append(OUT_JSON);\r\n                sb.append(&quot;?sensor=false&quot;);\r\n                sb.append(&quot;&amp;key=&quot; + API_KEY);\r\n                sb.append(&quot;&amp;reference=&quot; + URLEncoder.encode(reference, &quot;utf8&quot;));\r\n            \r\n                URL url = new URL(sb.toString());\r\n                conn = (HttpURLConnection) url.openConnection();\r\n                InputStreamReader in = new InputStreamReader(conn.getInputStream());\r\n            \r\n                // Load the results into a StringBuilder\r\n                int read;\r\n                char[] buff = new char[1024];\r\n                while ((read = in.read(buff)) != -1) {\r\n                    jsonResults.append(buff, 0, read);\r\n                }\r\n            } catch (MalformedURLException e) {\r\n                Log.e(LOG_TAG, &quot;Error processing Places API URL&quot;, e);\r\n                return null;\r\n            } catch (IOException e) {\r\n                Log.e(LOG_TAG, &quot;Error connecting to Places API&quot;, e);\r\n                return null;\r\n            } finally {\r\n                if (conn != null) {\r\n                    conn.disconnect();\r\n                }\r\n            }\r\n            \r\n            Place place = null;\r\n            try {\r\n                // Create a JSON object hierarchy from the results\r\n                JSONObject jsonObj = new JSONObject(jsonResults.toString()).getJSONObject(&quot;result&quot;);\r\n            \r\n                place = new Place();\r\n                place.icon = jsonObj.getString(&quot;icon&quot;);\r\n                place.name = jsonObj.getString(&quot;name&quot;);\r\n                place.formatted_address = jsonObj.getString(&quot;formatted_address&quot;);\r\n                if (jsonObj.has(&quot;formatted_phone_number&quot;)) {\r\n                    place.formatted_phone_number = jsonObj.getString(&quot;formatted_phone_number&quot;);\r\n                }\r\n            } catch (JSONException e) {\r\n                Log.e(LOG_TAG, &quot;Error processing JSON results&quot;, e);\r\n            }\r\n    \r\n            return place;\r\n        }\r\n    }\r\n\r\n","title":"How to send a Google Places Search Request with Java","body":"<p>Here's a more complete example (includes JSON parsing and some exception handling) for Places API search, autocomplete, and details. It was written for Android, but can be easily ported for non-Android use (need to include org.json libs and use different logging). The <code>Place</code> class is a simple value object.</p>\n\n<pre><code>package com.example.google.places;\n\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport android.util.Log;\n\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport java.net.URLEncoder;\nimport java.util.ArrayList;\n\n/**\n * @author saxman\n */\npublic class PlacesService {\n    private static final String LOG_TAG = \"ExampleApp\";\n\n    private static final String PLACES_API_BASE = \"https://maps.googleapis.com/maps/api/place\";\n\n    private static final String TYPE_AUTOCOMPLETE = \"/autocomplete\";\n    private static final String TYPE_DETAILS = \"/details\";\n    private static final String TYPE_SEARCH = \"/search\";\n\n    private static final String OUT_JSON = \"/json\";\n\n    // KEY!\n    private static final String API_KEY = \"YOUR KEY\";\n\n    public static ArrayList&lt;Place&gt; autocomplete(String input) {\n        ArrayList&lt;Place&gt; resultList = null;\n\n        HttpURLConnection conn = null;\n        StringBuilder jsonResults = new StringBuilder();\n        try {\n            StringBuilder sb = new StringBuilder(PLACES_API_BASE);\n            sb.append(TYPE_AUTOCOMPLETE);\n            sb.append(OUT_JSON);\n            sb.append(\"?sensor=false\");\n            sb.append(\"&amp;key=\" + API_KEY);\n            sb.append(\"&amp;input=\" + URLEncoder.encode(input, \"utf8\"));\n\n            URL url = new URL(sb.toString());\n            conn = (HttpURLConnection) url.openConnection();\n            InputStreamReader in = new InputStreamReader(conn.getInputStream());\n\n            int read;\n            char[] buff = new char[1024];\n            while ((read = in.read(buff)) != -1) {\n                jsonResults.append(buff, 0, read);\n            }\n        } catch (MalformedURLException e) {\n            Log.e(LOG_TAG, \"Error processing Places API URL\", e);\n            return resultList;\n        } catch (IOException e) {\n            Log.e(LOG_TAG, \"Error connecting to Places API\", e);\n            return resultList;\n        } finally {\n            if (conn != null) {\n                conn.disconnect();\n            }\n        }\n\n        try {\n            // Create a JSON object hierarchy from the results\n            JSONObject jsonObj = new JSONObject(jsonResults.toString());\n            JSONArray predsJsonArray = jsonObj.getJSONArray(\"predictions\");\n\n            // Extract the Place descriptions from the results\n            resultList = new ArrayList&lt;Place&gt;(predsJsonArray.length());\n            for (int i = 0; i &lt; predsJsonArray.length(); i++) {\n                Place place = new Place();\n                place.reference = predsJsonArray.getJSONObject(i).getString(\"reference\");\n                place.name = predsJsonArray.getJSONObject(i).getString(\"description\");\n                resultList.add(place);\n            }\n        } catch (JSONException e) {\n            Log.e(LOG_TAG, \"Error processing JSON results\", e);\n        }\n\n        return resultList;\n    }\n\n    public static ArrayList&lt;Place&gt; search(String keyword, double lat, double lng, int radius) {\n        ArrayList&lt;Place&gt; resultList = null;\n\n        HttpURLConnection conn = null;\n        StringBuilder jsonResults = new StringBuilder();\n        try {\n            StringBuilder sb = new StringBuilder(PLACES_API_BASE);\n            sb.append(TYPE_SEARCH);\n            sb.append(OUT_JSON);\n            sb.append(\"?sensor=false\");\n            sb.append(\"&amp;key=\" + API_KEY);\n            sb.append(\"&amp;keyword=\" + URLEncoder.encode(keyword, \"utf8\"));\n            sb.append(\"&amp;location=\" + String.valueOf(lat) + \",\" + String.valueOf(lng));\n            sb.append(\"&amp;radius=\" + String.valueOf(radius));\n\n            URL url = new URL(sb.toString());\n            conn = (HttpURLConnection) url.openConnection();\n            InputStreamReader in = new InputStreamReader(conn.getInputStream());\n\n            int read;\n            char[] buff = new char[1024];\n            while ((read = in.read(buff)) != -1) {\n                jsonResults.append(buff, 0, read);\n            }\n        } catch (MalformedURLException e) {\n            Log.e(LOG_TAG, \"Error processing Places API URL\", e);\n            return resultList;\n        } catch (IOException e) {\n            Log.e(LOG_TAG, \"Error connecting to Places API\", e);\n            return resultList;\n        } finally {\n            if (conn != null) {\n                conn.disconnect();\n            }\n        }\n\n        try {\n            // Create a JSON object hierarchy from the results\n            JSONObject jsonObj = new JSONObject(jsonResults.toString());\n            JSONArray predsJsonArray = jsonObj.getJSONArray(\"results\");\n\n            // Extract the Place descriptions from the results\n            resultList = new ArrayList&lt;Place&gt;(predsJsonArray.length());\n            for (int i = 0; i &lt; predsJsonArray.length(); i++) {\n                Place place = new Place();\n                place.reference = predsJsonArray.getJSONObject(i).getString(\"reference\");\n                place.name = predsJsonArray.getJSONObject(i).getString(\"name\");\n                resultList.add(place);\n            }\n        } catch (JSONException e) {\n            Log.e(LOG_TAG, \"Error processing JSON results\", e);\n        }\n\n        return resultList;\n    }\n\n    public static Place details(String reference) {\n        HttpURLConnection conn = null;\n        StringBuilder jsonResults = new StringBuilder();\n        try {\n            StringBuilder sb = new StringBuilder(PLACES_API_BASE);\n            sb.append(TYPE_DETAILS);\n            sb.append(OUT_JSON);\n            sb.append(\"?sensor=false\");\n            sb.append(\"&amp;key=\" + API_KEY);\n            sb.append(\"&amp;reference=\" + URLEncoder.encode(reference, \"utf8\"));\n\n            URL url = new URL(sb.toString());\n            conn = (HttpURLConnection) url.openConnection();\n            InputStreamReader in = new InputStreamReader(conn.getInputStream());\n\n            // Load the results into a StringBuilder\n            int read;\n            char[] buff = new char[1024];\n            while ((read = in.read(buff)) != -1) {\n                jsonResults.append(buff, 0, read);\n            }\n        } catch (MalformedURLException e) {\n            Log.e(LOG_TAG, \"Error processing Places API URL\", e);\n            return null;\n        } catch (IOException e) {\n            Log.e(LOG_TAG, \"Error connecting to Places API\", e);\n            return null;\n        } finally {\n            if (conn != null) {\n                conn.disconnect();\n            }\n        }\n\n        Place place = null;\n        try {\n            // Create a JSON object hierarchy from the results\n            JSONObject jsonObj = new JSONObject(jsonResults.toString()).getJSONObject(\"result\");\n\n            place = new Place();\n            place.icon = jsonObj.getString(\"icon\");\n            place.name = jsonObj.getString(\"name\");\n            place.formatted_address = jsonObj.getString(\"formatted_address\");\n            if (jsonObj.has(\"formatted_phone_number\")) {\n                place.formatted_phone_number = jsonObj.getString(\"formatted_phone_number\");\n            }\n        } catch (JSONException e) {\n            Log.e(LOG_TAG, \"Error processing JSON results\", e);\n        }\n\n        return place;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1994740,"reputation":1268,"user_id":1787937,"display_name":"pushbit"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1372288316,"creation_date":1372287795,"answer_id":17331893,"question_id":12460471,"body_markdown":"A Java library for working with the Google Places API is available on GitHub and in Maven Central (disclosure: I&#39;m the developer.)  Getting a list of places (or details, photo, etc.) can be done in one or two lines.  See the project page for examples and set up details.\r\n\r\nhttps://github.com/pushbit/sprockets","title":"How to send a Google Places Search Request with Java","body":"<p>A Java library for working with the Google Places API is available on GitHub and in Maven Central (disclosure: I'm the developer.)  Getting a list of places (or details, photo, etc.) can be done in one or two lines.  See the project page for examples and set up details.</p>\n\n<p><a href=\"https://github.com/pushbit/sprockets\" rel=\"noreferrer\">https://github.com/pushbit/sprockets</a></p>\n"},{"tags":[],"owner":{"account_id":3244809,"reputation":370,"user_id":2736717,"accept_rate":0,"display_name":"CapeAndCowl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1418636157,"creation_date":1418636157,"answer_id":27481029,"question_id":12460471,"body_markdown":"There doesn&#39;t exist any official Java library available for Google Places API. However, there are several projects hosted on Github. Another one is this:\r\n[Google Places API Java Library on Github][1]\r\n\r\n\r\n  [1]: https://github.com/skd1993/google-places-api-java","title":"How to send a Google Places Search Request with Java","body":"<p>There doesn't exist any official Java library available for Google Places API. However, there are several projects hosted on Github. Another one is this:\n<a href=\"https://github.com/skd1993/google-places-api-java\" rel=\"nofollow\">Google Places API Java Library on Github</a></p>\n"},{"tags":[],"owner":{"account_id":4243102,"reputation":3047,"user_id":5784939,"display_name":"Eugene Maysyuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696186177,"creation_date":1696181585,"answer_id":77211576,"question_id":12460471,"body_markdown":"You can use official [Java Client][1] for Google Maps (includes Places API)\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.maps&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;google-maps-services&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.25&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n  [1]: https://developers.google.com/maps/documentation/places/web-service/client-library\r\n\r\nfor nearbySearch\r\n\r\n    public static List&lt;PlacesSearchResult&gt; nearbySearch(double lat, double lng, int radiusInMeters) {\r\n\t\tList&lt;PlacesSearchResult&gt; results = new ArrayList&lt;&gt;();\r\n\t\ttry {\r\n\t\t\tGeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\r\n\t\t\tPlacesSearchResponse response = PlacesApi.nearbySearchQuery(ctx, new LatLng(lat, lng))\r\n\t\t\t\t.type(PlaceType.RESTAURANT)\r\n\t\t\t\t.radius(radiusInMeters)\r\n\t\t\t\t.await();\r\n\r\n\t\t\tresults.addAll(Arrays.asList(response.results));\r\n\r\n\t\t\tint page = 1; // Google Maps API provides maximum 60 results by search (3 pages maximum, each containing 20 records)\r\n\t\t\twhile (response.nextPageToken != null &amp;&amp; !response.nextPageToken.isBlank() &amp;&amp; response.results.length == 20 &amp;&amp; page &lt;= 2) {\r\n\t\t\t\tThread.sleep(3000); // Google has SLA for no more than N requests per second in free tier\r\n\t\t\t\tresponse = PlacesApi.nearbySearchNextPage(ctx, response.nextPageToken).await();\r\n\t\t\t\tresults.addAll(Arrays.asList(response.results));\r\n\t\t\t\tpage++;\r\n\t\t\t\tThread.sleep(2000);\r\n\t\t\t}\r\n\r\n\t\t} catch (ApiException e) {\r\n\t\t\tlogger.error(&quot;ApiException: &quot;, e);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\tlogger.error(&quot;InterruptedException: &quot;, e);\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(&quot;IOException: &quot;, e);\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\nfor findPlace\r\n\r\n    public static PlacesSearchResult[] findPlace(double lat, double lng) {\r\n\t\tGeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\r\n\r\n\t\tFindPlaceFromText response = null;\r\n\t\ttry {\r\n\t\t\tresponse = PlacesApi.findPlaceFromText(ctx, &quot;restaurants&quot;, FindPlaceFromTextRequest.InputType.TEXT_QUERY)\r\n\t\t\t\t.fields(\r\n\t\t\t\t\tFindPlaceFromTextRequest.FieldMask.NAME,\r\n\t\t\t\t\tFindPlaceFromTextRequest.FieldMask.FORMATTED_ADDRESS,\r\n\t\t\t\t\tFindPlaceFromTextRequest.FieldMask.RATING,\r\n\t\t\t\t\tFindPlaceFromTextRequest.FieldMask.OPENING_HOURS)\r\n\t\t\t\t.locationBias(new FindPlaceFromTextRequest.LocationBiasCircular(new LatLng(lat, lng), 10000))\r\n\t\t\t\t.await();\r\n\t\t} catch (ApiException e) {\r\n\t\t\tlogger.error(&quot;ApiException: &quot;, e);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\tlogger.error(&quot;InterruptedException: &quot;, e);\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(&quot;IOException: &quot;, e);\r\n\t\t}\r\n\t\t\r\n\t\treturn response != null ? response.candidates : null;\r\n\t}","title":"How to send a Google Places Search Request with Java","body":"<p>You can use official <a href=\"https://developers.google.com/maps/documentation/places/web-service/client-library\" rel=\"nofollow noreferrer\">Java Client</a> for Google Maps (includes Places API)</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.maps&lt;/groupId&gt;\n        &lt;artifactId&gt;google-maps-services&lt;/artifactId&gt;\n        &lt;version&gt;2.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;version&gt;1.7.25&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>for nearbySearch</p>\n<pre><code>public static List&lt;PlacesSearchResult&gt; nearbySearch(double lat, double lng, int radiusInMeters) {\n    List&lt;PlacesSearchResult&gt; results = new ArrayList&lt;&gt;();\n    try {\n        GeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\n        PlacesSearchResponse response = PlacesApi.nearbySearchQuery(ctx, new LatLng(lat, lng))\n            .type(PlaceType.RESTAURANT)\n            .radius(radiusInMeters)\n            .await();\n\n        results.addAll(Arrays.asList(response.results));\n\n        int page = 1; // Google Maps API provides maximum 60 results by search (3 pages maximum, each containing 20 records)\n        while (response.nextPageToken != null &amp;&amp; !response.nextPageToken.isBlank() &amp;&amp; response.results.length == 20 &amp;&amp; page &lt;= 2) {\n            Thread.sleep(3000); // Google has SLA for no more than N requests per second in free tier\n            response = PlacesApi.nearbySearchNextPage(ctx, response.nextPageToken).await();\n            results.addAll(Arrays.asList(response.results));\n            page++;\n            Thread.sleep(2000);\n        }\n\n    } catch (ApiException e) {\n        logger.error(&quot;ApiException: &quot;, e);\n    } catch (InterruptedException e) {\n        logger.error(&quot;InterruptedException: &quot;, e);\n    } catch (IOException e) {\n        logger.error(&quot;IOException: &quot;, e);\n    }\n\n    return results;\n}\n</code></pre>\n<p>for findPlace</p>\n<pre><code>public static PlacesSearchResult[] findPlace(double lat, double lng) {\n    GeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\n\n    FindPlaceFromText response = null;\n    try {\n        response = PlacesApi.findPlaceFromText(ctx, &quot;restaurants&quot;, FindPlaceFromTextRequest.InputType.TEXT_QUERY)\n            .fields(\n                FindPlaceFromTextRequest.FieldMask.NAME,\n                FindPlaceFromTextRequest.FieldMask.FORMATTED_ADDRESS,\n                FindPlaceFromTextRequest.FieldMask.RATING,\n                FindPlaceFromTextRequest.FieldMask.OPENING_HOURS)\n            .locationBias(new FindPlaceFromTextRequest.LocationBiasCircular(new LatLng(lat, lng), 10000))\n            .await();\n    } catch (ApiException e) {\n        logger.error(&quot;ApiException: &quot;, e);\n    } catch (InterruptedException e) {\n        logger.error(&quot;InterruptedException: &quot;, e);\n    } catch (IOException e) {\n        logger.error(&quot;IOException: &quot;, e);\n    }\n    \n    return response != null ? response.candidates : null;\n}\n</code></pre>\n"}],"owner":{"account_id":1236184,"reputation":11230,"user_id":1199731,"accept_rate":69,"display_name":"d0x"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27246,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"accepted_answer_id":12483526,"answer_count":4,"score":11,"last_activity_date":1696186177,"creation_date":1347889139,"question_id":12460471,"body_markdown":"I need to search Goolge Places Pages by long/lat for any banks in the area of 20m.\r\nThis [Google Places Doc][1] describes how to do it with JavaScript. They are using a `google.maps.LatLng` Object that i don&#39;t have in Java.\r\n\r\nDoes anyone now how to call the Service?\r\n\r\nMaybe there is also an Java API for Goolge Places?\r\n\r\nBest Regards,\r\nChristian.\r\n\r\nEdit 1:\r\n\r\nI found [someone][2] constructing the url like this:\r\n\r\n    String url = baseUrl + &quot;location=&quot; + lat + &quot;,&quot; + lon + &quot;&amp;&quot; +\r\n                     &quot;radius=&quot; + searchRadius + &quot;&amp;&quot; + types + &quot;&amp;&quot; + &quot;sensor=true&quot; +\r\n                     &quot;&amp;&quot; + &quot;key=&quot; + googleAPIKey;\r\n  [1]: https://developers.google.com/maps/documentation/javascript/places#place_search_requests\r\n  [2]: https://stackoverflow.com/questions/10865738/how-to-show-near-places-using-google-places-api\r\n\r\nAnswer: Edit 2:\r\n\r\nI because of the post above i found out how to do it. This is a example how to send the request:\r\n\r\n    public class GooglePlacesClient\r\n    {\r\n    \tprivate static final String\tGOOGLE_API_KEY\t= &quot;***&quot;;\r\n    \r\n    \tprivate final HttpClient\tclient\t\t\t= new DefaultHttpClient();\r\n    \r\n    \tpublic static void main(final String[] args) throws ParseException, IOException, URISyntaxException\r\n    \t{\r\n    \t\tnew GooglePlacesClient().performSearch(&quot;establishment&quot;, 8.6668310, 50.1093060);\r\n    \t}\r\n    \r\n    \tpublic void performSearch(final String types, final double lon, final double lat) throws ParseException, IOException, URISyntaxException\r\n    \t{\r\n    \t\tfinal URIBuilder builder = new URIBuilder().setScheme(&quot;https&quot;).setHost(&quot;maps.googleapis.com&quot;).setPath(&quot;/maps/api/place/search/json&quot;);\r\n    \r\n    \t\tbuilder.addParameter(&quot;location&quot;, lat + &quot;,&quot; + lon);\r\n    \t\tbuilder.addParameter(&quot;radius&quot;, &quot;5&quot;);\r\n    \t\tbuilder.addParameter(&quot;types&quot;, types);\r\n    \t\tbuilder.addParameter(&quot;sensor&quot;, &quot;true&quot;);\r\n    \t\tbuilder.addParameter(&quot;key&quot;, GooglePlacesClient.GOOGLE_API_KEY);\r\n    \r\n    \t\tfinal HttpUriRequest request = new HttpGet(builder.build());\r\n    \r\n    \t\tfinal HttpResponse execute = this.client.execute(request);\r\n    \r\n    \t\tfinal String response = EntityUtils.toString(execute.getEntity());\r\n    \r\n    \t\tSystem.out.println(response);\r\n    \t}\r\n    \r\n    }\r\n    ","title":"How to send a Google Places Search Request with Java","body":"<p>I need to search Goolge Places Pages by long/lat for any banks in the area of 20m.\nThis <a href=\"https://developers.google.com/maps/documentation/javascript/places#place_search_requests\" rel=\"noreferrer\">Google Places Doc</a> describes how to do it with JavaScript. They are using a <code>google.maps.LatLng</code> Object that i don't have in Java.</p>\n\n<p>Does anyone now how to call the Service?</p>\n\n<p>Maybe there is also an Java API for Goolge Places?</p>\n\n<p>Best Regards,\nChristian.</p>\n\n<p>Edit 1:</p>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/10865738/how-to-show-near-places-using-google-places-api\">someone</a> constructing the url like this:</p>\n\n<pre><code>String url = baseUrl + \"location=\" + lat + \",\" + lon + \"&amp;\" +\n                 \"radius=\" + searchRadius + \"&amp;\" + types + \"&amp;\" + \"sensor=true\" +\n                 \"&amp;\" + \"key=\" + googleAPIKey;\n</code></pre>\n\n<p>Answer: Edit 2:</p>\n\n<p>I because of the post above i found out how to do it. This is a example how to send the request:</p>\n\n<pre><code>public class GooglePlacesClient\n{\n    private static final String GOOGLE_API_KEY  = \"***\";\n\n    private final HttpClient    client          = new DefaultHttpClient();\n\n    public static void main(final String[] args) throws ParseException, IOException, URISyntaxException\n    {\n        new GooglePlacesClient().performSearch(\"establishment\", 8.6668310, 50.1093060);\n    }\n\n    public void performSearch(final String types, final double lon, final double lat) throws ParseException, IOException, URISyntaxException\n    {\n        final URIBuilder builder = new URIBuilder().setScheme(\"https\").setHost(\"maps.googleapis.com\").setPath(\"/maps/api/place/search/json\");\n\n        builder.addParameter(\"location\", lat + \",\" + lon);\n        builder.addParameter(\"radius\", \"5\");\n        builder.addParameter(\"types\", types);\n        builder.addParameter(\"sensor\", \"true\");\n        builder.addParameter(\"key\", GooglePlacesClient.GOOGLE_API_KEY);\n\n        final HttpUriRequest request = new HttpGet(builder.build());\n\n        final HttpResponse execute = this.client.execute(request);\n\n        final String response = EntityUtils.toString(execute.getEntity());\n\n        System.out.println(response);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","libgdx","render"],"owner":{"account_id":28747898,"reputation":43,"user_id":22589424,"display_name":"dmmm7"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696185803,"creation_date":1696066199,"question_id":77206429,"body_markdown":"During learning libGDX I encountered a problem with rendering mountains on background. In book I have folowing part of code:\r\n```\r\nprivate void init () {\r\n dimension.set(10, 2);\r\n regMountainLeft = \r\nAssets.instance.levelDecoration.mountainLeft;\r\n regMountainRight = \r\nAssets.instance.levelDecoration.mountainRight;\r\n // shift mountain and extend length\r\n origin.x = -dimension.x * 2;\r\n length += dimension.x * 2;\r\n }\r\n```\r\nIn this part we shift origin on the opposite side of y axis to render first texture at this starting point according to hide offset between different textures of mountains (here will be three batch of texture layers).\r\n ```\r\n private void drawMountain (SpriteBatch batch, float offsetX, \r\nfloat offsetY, float tintColor) {\r\n TextureRegion reg = null;\r\n batch.setColor(tintColor, tintColor, tintColor, 1);\r\n float xRel = dimension.x * offsetX;\r\n float yRel = dimension.y * offsetY;\r\n // mountains span the whole level\r\n int mountainLength = 0;\r\n mountainLength += MathUtils.ceil(length / (2 * dimension.x));\r\n mountainLength += MathUtils.ceil(0.5f + offsetX);\r\n for (int i = 0; i &lt; mountainLength; i++) {\r\n // mountain left\r\n reg = regMountainLeft;\r\n batch.draw(reg.getTexture(), origin.x + xRel, position.y + \r\norigin.y + yRel, origin.x, origin.y, dimension.x, dimension.y, \r\nscale.x, scale.y, rotation, reg.getRegionX(), reg.getRegionY(), \r\nreg.getRegionWidth(), reg.getRegionHeight(), false, false);\r\n xRel += dimension.x;\r\n // mountain right ...\r\n```\r\nHere we define how much full textures will be drawn with `mountainLength += MathUtils.ceil(length / (2 * dimension.x));` and `mountainLength += MathUtils.ceil(0.5f + offsetX);`. In this part I catch a problem with understanding the logic. Why do we use exactly `0.5f` in `mountainLength += MathUtils.ceil(0.5f + offsetX);` and also what is the logic of this line.&lt;br&gt;For example if we have negative offset, we move our texture to the left, so here will be gap in the end of full texture batch, so we need to close it therefore we need to increase `mountainLength`, it will be possible if we change `mountainLength += MathUtils.ceil(0.5f + offsetX);` to `mountainLength += MathUtils.ceil(0.5f - offsetX);`.&lt;br&gt;Help me to undersand this part of code maybe I am missing something.\r\nAlso attach render part:\r\n```\r\npublic void render (SpriteBatch batch) {\r\n // distant mountains (dark gray)\r\n drawMountain(batch, 0.5f, 0.5f, 0.5f);\r\n // distant mountains (gray)\r\n drawMountain(batch, 0.25f, 0.25f, 0.7f);\r\n // distant mountains (light gray)\r\n drawMountain(batch, 0.0f, 0.0f, 0.9f);\r\n }\r\n```\r\n","title":"Render object with offset in libGDX","body":"<p>During learning libGDX I encountered a problem with rendering mountains on background. In book I have folowing part of code:</p>\n<pre><code>private void init () {\n dimension.set(10, 2);\n regMountainLeft = \nAssets.instance.levelDecoration.mountainLeft;\n regMountainRight = \nAssets.instance.levelDecoration.mountainRight;\n // shift mountain and extend length\n origin.x = -dimension.x * 2;\n length += dimension.x * 2;\n }\n</code></pre>\n<p>In this part we shift origin on the opposite side of y axis to render first texture at this starting point according to hide offset between different textures of mountains (here will be three batch of texture layers).</p>\n<pre><code>private void drawMountain (SpriteBatch batch, float offsetX, \nfloat offsetY, float tintColor) {\nTextureRegion reg = null;\nbatch.setColor(tintColor, tintColor, tintColor, 1);\nfloat xRel = dimension.x * offsetX;\nfloat yRel = dimension.y * offsetY;\n// mountains span the whole level\nint mountainLength = 0;\nmountainLength += MathUtils.ceil(length / (2 * dimension.x));\nmountainLength += MathUtils.ceil(0.5f + offsetX);\nfor (int i = 0; i &lt; mountainLength; i++) {\n// mountain left\nreg = regMountainLeft;\nbatch.draw(reg.getTexture(), origin.x + xRel, position.y + \norigin.y + yRel, origin.x, origin.y, dimension.x, dimension.y, \nscale.x, scale.y, rotation, reg.getRegionX(), reg.getRegionY(), \nreg.getRegionWidth(), reg.getRegionHeight(), false, false);\nxRel += dimension.x;\n// mountain right ...\n</code></pre>\n<p>Here we define how much full textures will be drawn with <code>mountainLength += MathUtils.ceil(length / (2 * dimension.x));</code> and <code>mountainLength += MathUtils.ceil(0.5f + offsetX);</code>. In this part I catch a problem with understanding the logic. Why do we use exactly <code>0.5f</code> in <code>mountainLength += MathUtils.ceil(0.5f + offsetX);</code> and also what is the logic of this line.<br>For example if we have negative offset, we move our texture to the left, so here will be gap in the end of full texture batch, so we need to close it therefore we need to increase <code>mountainLength</code>, it will be possible if we change <code>mountainLength += MathUtils.ceil(0.5f + offsetX);</code> to <code>mountainLength += MathUtils.ceil(0.5f - offsetX);</code>.<br>Help me to undersand this part of code maybe I am missing something.\nAlso attach render part:</p>\n<pre><code>public void render (SpriteBatch batch) {\n // distant mountains (dark gray)\n drawMountain(batch, 0.5f, 0.5f, 0.5f);\n // distant mountains (gray)\n drawMountain(batch, 0.25f, 0.25f, 0.7f);\n // distant mountains (light gray)\n drawMountain(batch, 0.0f, 0.0f, 0.9f);\n }\n</code></pre>\n"},{"tags":["java","google-maps"],"answers":[{"tags":[],"owner":{"account_id":1079,"reputation":27949,"user_id":1432,"accept_rate":66,"display_name":"jsight"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1262494890,"creation_date":1262494890,"answer_id":1994040,"question_id":1993981,"body_markdown":"Your best bet for client side Java would be the [Static Maps API][1].  For server-side Java, the answer will heavily depend on what framework you are using for development.  Having said that, the Google Maps API [is well documented][2].\r\n\r\n\r\n  [1]: http://code.google.com/apis/maps/documentation/staticmaps/\r\n  [2]: http://code.google.com/apis/maps/documentation/index.html","title":"How to access google maps api in Java Application?","body":"<p>Your best bet for client side Java would be the <a href=\"http://code.google.com/apis/maps/documentation/staticmaps/\" rel=\"nofollow noreferrer\">Static Maps API</a>.  For server-side Java, the answer will heavily depend on what framework you are using for development.  Having said that, the Google Maps API <a href=\"http://code.google.com/apis/maps/documentation/index.html\" rel=\"nofollow noreferrer\">is well documented</a>.</p>\n"},{"tags":[],"owner":{"account_id":44450,"reputation":39683,"user_id":130515,"display_name":"Mohamed Mansour"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1559091947,"creation_date":1262497694,"answer_id":1994106,"question_id":1993981,"body_markdown":"you can use Swing Labs, JXMapKit from swingx:\r\nhttp://today.java.net/pub/a/today/2007/10/30/building-maps-into-swing-app-with-jxmapviewer.html\r\n\r\nIt is pretty straight forward. For more info refer to the website. \r\n\r\n    JXMapKit mapView = new JXMapKit();\r\n    mapView.setDefaultProvider(DefaultProviders.OpenStreetMaps);\r\n    mapView.setDataProviderCreditShown(true);\r\n    add(mapView)\r\n\r\n\r\nIt will look like this:\r\n\r\n[![alt text][1]][1]  \n&lt;sub&gt;(source: [java.net](http://today.java.net/images/2007/10/basic_running_app.png))&lt;/sub&gt;  \n\r\n\r\nTake a look at the source code in the article above, with three lines of code, you can view a map easily:\r\n\r\n  [1]: https://i.stack.imgur.com/n2otq.png","title":"How to access google maps api in Java Application?","body":"<p>you can use Swing Labs, JXMapKit from swingx:\n<a href=\"http://today.java.net/pub/a/today/2007/10/30/building-maps-into-swing-app-with-jxmapviewer.html\" rel=\"nofollow noreferrer\">http://today.java.net/pub/a/today/2007/10/30/building-maps-into-swing-app-with-jxmapviewer.html</a></p>\n\n<p>It is pretty straight forward. For more info refer to the website. </p>\n\n<pre><code>JXMapKit mapView = new JXMapKit();\nmapView.setDefaultProvider(DefaultProviders.OpenStreetMaps);\nmapView.setDataProviderCreditShown(true);\nadd(mapView)\n</code></pre>\n\n<p>It will look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/n2otq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n2otq.png\" alt=\"alt text\"></a><br>\n<sub>(source: <a href=\"http://today.java.net/images/2007/10/basic_running_app.png\" rel=\"nofollow noreferrer\">java.net</a>)</sub>  </p>\n\n<p>Take a look at the source code in the article above, with three lines of code, you can view a map easily:</p>\n"},{"tags":[],"owner":{"account_id":37283,"reputation":3124,"user_id":106550,"accept_rate":67,"display_name":"adrian.tarau"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1262497927,"creation_date":1262497927,"answer_id":1994111,"question_id":1993981,"body_markdown":"You can use [Swing-WS][1], a component JXMapViewer is available and provides similar functionality as JavaScript version. However it is still not legal to access Google tile servers outside the provided APIs : JavaScript and Flash.\r\n\r\nThere is an issue opened to track this request : http://code.google.com/p/gmaps-api-issues/issues/detail?id=1396. It is approved but who knows when it&#39;s gonna be available.\r\n\r\n\r\n\r\n\r\n  [1]: https://swingx-ws.dev.java.net/","title":"How to access google maps api in Java Application?","body":"<p>You can use <a href=\"https://swingx-ws.dev.java.net/\" rel=\"nofollow noreferrer\">Swing-WS</a>, a component JXMapViewer is available and provides similar functionality as JavaScript version. However it is still not legal to access Google tile servers outside the provided APIs : JavaScript and Flash.</p>\n\n<p>There is an issue opened to track this request : <a href=\"http://code.google.com/p/gmaps-api-issues/issues/detail?id=1396\" rel=\"nofollow noreferrer\">http://code.google.com/p/gmaps-api-issues/issues/detail?id=1396</a>. It is approved but who knows when it's gonna be available.</p>\n"},{"tags":[],"owner":{"account_id":6674085,"reputation":79,"user_id":5149365,"accept_rate":67,"display_name":"Joshua Smith"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439905360,"creation_date":1439905360,"answer_id":32074153,"question_id":1993981,"body_markdown":"if you are looking for just a static map the you can use this code to get the map working:\r\n\r\n    import java.awt.BorderLayout;\r\n    \r\n    public class GoogleMapsGui extends JFrame {\r\n    \r\n    \tfinal Logger log = Logger.getLogger(GoogleMapsGui.class.getName());\r\n    \tprivate JPanel contentPane;\r\n    \r\n    \t/**\r\n    \t * Launch the application.\r\n    \t */\r\n    \tpublic static void main(String[] args) {\r\n    \t\tEventQueue.invokeLater(new Runnable() {\r\n    \t\t\tpublic void run() {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tGoogleMapsGui frame = new GoogleMapsGui();\r\n    \t\t\t\t\tframe.setVisible(true);\r\n    \t\t\t\t} catch (Exception e) {\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Create the frame.\r\n    \t */\r\n    \tpublic GoogleMapsGui() {\r\n    \t\tsetTitle(&quot;Map&quot;);\r\n    \t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tsetBounds(100, 100, 592, 352);\r\n    \t\tcontentPane = new JPanel();\r\n    \t\tcontentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\r\n    \t\tsetContentPane(contentPane);\r\n    \r\n    \t\tJFrame test = new JFrame(&quot;Google Maps&quot;);\r\n    \r\n    \t\ttry {\r\n    \t\t\t// String latitude = &quot;-25.9994652&quot;;\r\n    \t\t\t// String longitude = &quot;28.3112051&quot;;\r\n    \t\t\tString location = JOptionPane\r\n    \t\t\t\t\t.showInputDialog(&quot; please enter the desired loccation&quot;);// get\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// the\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// location\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// for\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// geo\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// coding\r\n    \t\t\tScanner sc = new Scanner(location);\r\n    \t\t\tScanner sc2 = new Scanner(location);\r\n    \t\t\tString marker = &quot;&quot;;\r\n    \t\t\tString path = JOptionPane\r\n    \t\t\t\t\t.showInputDialog(&quot;what is your destination?&quot;);\r\n    \t\t\tString zoom = JOptionPane\r\n    \t\t\t\t\t.showInputDialog(&quot;how far in do you want to zoom?\\n&quot;\r\n    \t\t\t\t\t\t\t+ &quot;12(zoomed out) - 20 (zoomed in)&quot;);\r\n    \r\n    \t\t\tString imageUrl = &quot;https://maps.googleapis.com/maps/api/staticmap?&quot;;\r\n    \t\t\twhile (sc.hasNext()) {// add location to imageUrl\r\n    \t\t\t\timageUrl = imageUrl + sc.next();\r\n    \t\t\t}\r\n    \t\t\tmarker = &quot;&amp;markers=color:red|&quot;;\r\n    \t\t\twhile (sc2.hasNext()) {// add marker location to marker\r\n    \t\t\t\tmarker = marker + sc2.next() + &quot;,&quot;;\r\n    \r\n    \t\t\t}\r\n    \t\t\tmarker = marker.substring(0, marker.length() - 1);\r\n    \r\n    \t\t\timageUrl = imageUrl + &quot;&amp;size=620x620&amp;scale=2&amp;maptype=hybrid&quot;\r\n    \t\t\t\t\t+ marker;\r\n    \t\t\t//\r\n    \t\t\tlog.info(&quot;Generated url&quot;);\r\n    \r\n    \t\t\tString destinationFile = &quot;image.jpg&quot;;\r\n    \r\n    \t\t\t// read the map image from Google\r\n    \t\t\t// then save it to a local file: image.jpg\r\n    \t\t\t//\r\n    \t\t\tURL url = new URL(imageUrl);\r\n    \t\t\tInputStream is = url.openStream();\r\n    \t\t\tOutputStream os = new FileOutputStream(destinationFile);\r\n    \r\n    \t\t\tbyte[] b = new byte[2048];\r\n    \t\t\tint length;\r\n    \r\n    \t\t\twhile ((length = is.read(b)) != -1) {\r\n    \t\t\t\tos.write(b, 0, length);\r\n    \t\t\t}\r\n    \t\t\tlog.info(&quot;Created image.jpg&quot;);\r\n    \r\n    \t\t\tis.close();\r\n    \t\t\tos.close();\r\n    \t\t\tsc.close();\r\n    \t\t\tsc2.close();\r\n    \t\t\tlog.info(&quot;Closed util&#39;s&quot;);\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t\tSystem.exit(1);\r\n    \t\t\tlog.severe(&quot;Could not create image.jpg&quot;);\r\n    \t\t}// fin getting and storing image\r\n    \r\n    \t\tImageIcon imageIcon = new ImageIcon((new ImageIcon(&quot;image.jpg&quot;))\r\n    \t\t\t\t.getImage().getScaledInstance(630, 600,\r\n    \t\t\t\t\t\tjava.awt.Image.SCALE_SMOOTH));\r\n    \t\tcontentPane.setLayout(null);\r\n    \t\tJLabel imgMap = new JLabel(imageIcon);\r\n    \t\timgMap.setBounds(5, 5, 571, 308);\r\n    \t\tcontentPane.add(imgMap);\r\n    \t}\r\n    \r\n    }\r\nalso check out the Goolge static maps API [here](https://developers.google.com/maps/documentation/staticmaps/intro)","title":"How to access google maps api in Java Application?","body":"<p>if you are looking for just a static map the you can use this code to get the map working:</p>\n\n<pre><code>import java.awt.BorderLayout;\n\npublic class GoogleMapsGui extends JFrame {\n\n    final Logger log = Logger.getLogger(GoogleMapsGui.class.getName());\n    private JPanel contentPane;\n\n    /**\n     * Launch the application.\n     */\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    GoogleMapsGui frame = new GoogleMapsGui();\n                    frame.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    /**\n     * Create the frame.\n     */\n    public GoogleMapsGui() {\n        setTitle(\"Map\");\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setBounds(100, 100, 592, 352);\n        contentPane = new JPanel();\n        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\n        setContentPane(contentPane);\n\n        JFrame test = new JFrame(\"Google Maps\");\n\n        try {\n            // String latitude = \"-25.9994652\";\n            // String longitude = \"28.3112051\";\n            String location = JOptionPane\n                    .showInputDialog(\" please enter the desired loccation\");// get\n                                                                            // the\n                                                                            // location\n                                                                            // for\n                                                                            // geo\n                                                                            // coding\n            Scanner sc = new Scanner(location);\n            Scanner sc2 = new Scanner(location);\n            String marker = \"\";\n            String path = JOptionPane\n                    .showInputDialog(\"what is your destination?\");\n            String zoom = JOptionPane\n                    .showInputDialog(\"how far in do you want to zoom?\\n\"\n                            + \"12(zoomed out) - 20 (zoomed in)\");\n\n            String imageUrl = \"https://maps.googleapis.com/maps/api/staticmap?\";\n            while (sc.hasNext()) {// add location to imageUrl\n                imageUrl = imageUrl + sc.next();\n            }\n            marker = \"&amp;markers=color:red|\";\n            while (sc2.hasNext()) {// add marker location to marker\n                marker = marker + sc2.next() + \",\";\n\n            }\n            marker = marker.substring(0, marker.length() - 1);\n\n            imageUrl = imageUrl + \"&amp;size=620x620&amp;scale=2&amp;maptype=hybrid\"\n                    + marker;\n            //\n            log.info(\"Generated url\");\n\n            String destinationFile = \"image.jpg\";\n\n            // read the map image from Google\n            // then save it to a local file: image.jpg\n            //\n            URL url = new URL(imageUrl);\n            InputStream is = url.openStream();\n            OutputStream os = new FileOutputStream(destinationFile);\n\n            byte[] b = new byte[2048];\n            int length;\n\n            while ((length = is.read(b)) != -1) {\n                os.write(b, 0, length);\n            }\n            log.info(\"Created image.jpg\");\n\n            is.close();\n            os.close();\n            sc.close();\n            sc2.close();\n            log.info(\"Closed util's\");\n        } catch (IOException e) {\n            e.printStackTrace();\n            System.exit(1);\n            log.severe(\"Could not create image.jpg\");\n        }// fin getting and storing image\n\n        ImageIcon imageIcon = new ImageIcon((new ImageIcon(\"image.jpg\"))\n                .getImage().getScaledInstance(630, 600,\n                        java.awt.Image.SCALE_SMOOTH));\n        contentPane.setLayout(null);\n        JLabel imgMap = new JLabel(imageIcon);\n        imgMap.setBounds(5, 5, 571, 308);\n        contentPane.add(imgMap);\n    }\n\n}\n</code></pre>\n\n<p>also check out the Goolge static maps API <a href=\"https://developers.google.com/maps/documentation/staticmaps/intro\" rel=\"nofollow\">here</a></p>\n"},{"tags":[],"owner":{"account_id":4243102,"reputation":3047,"user_id":5784939,"display_name":"Eugene Maysyuk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696184364,"creation_date":1696184364,"answer_id":77211750,"question_id":1993981,"body_markdown":"You can use official [Java Client][1] for Google Maps\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.maps&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;google-maps-services&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.25&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n  [1]: https://developers.google.com/maps/documentation/places/web-service/client-library\r\n\r\nHere&#39;s an example how to access Google Maps Places API\r\n\r\n    public static List&lt;PlacesSearchResult&gt; nearbySearch(double lat, double lng, int radiusInMeters) {\r\n\t\tList&lt;PlacesSearchResult&gt; results = new ArrayList&lt;&gt;();\r\n\t\ttry {\r\n\t\t\tGeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\r\n\t\t\tPlacesSearchResponse response = PlacesApi.nearbySearchQuery(ctx, new LatLng(lat, lng))\r\n\t\t\t\t.type(PlaceType.RESTAURANT)\r\n\t\t\t\t.radius(radiusInMeters)\r\n\t\t\t\t.await();\r\n\r\n\t\t\tresults.addAll(Arrays.asList(response.results));\r\n\r\n\t\t\tint page = 1; // Google Maps API provides maximum 60 results by search (3 pages maximum, each containing 20 records)\r\n\t\t\twhile (response.nextPageToken != null &amp;&amp; !response.nextPageToken.isBlank() &amp;&amp; response.results.length == 20 &amp;&amp; page &lt;= 2) {\r\n\t\t\t\tThread.sleep(3000); // Google has SLA for no more than N requests per second in free tier\r\n\t\t\t\tresponse = PlacesApi.nearbySearchNextPage(ctx, response.nextPageToken).await();\r\n\t\t\t\tresults.addAll(Arrays.asList(response.results));\r\n\t\t\t\tpage++;\r\n\t\t\t\tThread.sleep(2000);\r\n\t\t\t}\r\n\r\n\t\t} catch (ApiException e) {\r\n\t\t\tlogger.error(&quot;ApiException: &quot;, e);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\tlogger.error(&quot;InterruptedException: &quot;, e);\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(&quot;IOException: &quot;, e);\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\nfor findPlace\r\n\r\n    public static PlacesSearchResult[] findPlace(double lat, double lng) {\r\n\t\tGeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\r\n\r\n\t\tFindPlaceFromText response = null;\r\n\t\ttry {\r\n\t\t\tresponse = PlacesApi.findPlaceFromText(ctx, &quot;restaurants&quot;, FindPlaceFromTextRequest.InputType.TEXT_QUERY)\r\n\t\t\t\t.fields(\r\n\t\t\t\t\tFindPlaceFromTextRequest.FieldMask.NAME,\r\n\t\t\t\t\tFindPlaceFromTextRequest.FieldMask.FORMATTED_ADDRESS,\r\n\t\t\t\t\tFindPlaceFromTextRequest.FieldMask.RATING,\r\n\t\t\t\t\tFindPlaceFromTextRequest.FieldMask.OPENING_HOURS)\r\n\t\t\t\t.locationBias(new FindPlaceFromTextRequest.LocationBiasCircular(new LatLng(lat, lng), 10000))\r\n\t\t\t\t.await();\r\n\t\t} catch (ApiException e) {\r\n\t\t\tlogger.error(&quot;ApiException: &quot;, e);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\tlogger.error(&quot;InterruptedException: &quot;, e);\r\n\t\t} catch (IOException e) {\r\n\t\t\tlogger.error(&quot;IOException: &quot;, e);\r\n\t\t}\r\n\t\t\r\n\t\treturn response != null ? response.candidates : null;\r\n\t}","title":"How to access google maps api in Java Application?","body":"<p>You can use official <a href=\"https://developers.google.com/maps/documentation/places/web-service/client-library\" rel=\"nofollow noreferrer\">Java Client</a> for Google Maps</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.maps&lt;/groupId&gt;\n        &lt;artifactId&gt;google-maps-services&lt;/artifactId&gt;\n        &lt;version&gt;2.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;version&gt;1.7.25&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Here's an example how to access Google Maps Places API</p>\n<pre><code>public static List&lt;PlacesSearchResult&gt; nearbySearch(double lat, double lng, int radiusInMeters) {\n    List&lt;PlacesSearchResult&gt; results = new ArrayList&lt;&gt;();\n    try {\n        GeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\n        PlacesSearchResponse response = PlacesApi.nearbySearchQuery(ctx, new LatLng(lat, lng))\n            .type(PlaceType.RESTAURANT)\n            .radius(radiusInMeters)\n            .await();\n\n        results.addAll(Arrays.asList(response.results));\n\n        int page = 1; // Google Maps API provides maximum 60 results by search (3 pages maximum, each containing 20 records)\n        while (response.nextPageToken != null &amp;&amp; !response.nextPageToken.isBlank() &amp;&amp; response.results.length == 20 &amp;&amp; page &lt;= 2) {\n            Thread.sleep(3000); // Google has SLA for no more than N requests per second in free tier\n            response = PlacesApi.nearbySearchNextPage(ctx, response.nextPageToken).await();\n            results.addAll(Arrays.asList(response.results));\n            page++;\n            Thread.sleep(2000);\n        }\n\n    } catch (ApiException e) {\n        logger.error(&quot;ApiException: &quot;, e);\n    } catch (InterruptedException e) {\n        logger.error(&quot;InterruptedException: &quot;, e);\n    } catch (IOException e) {\n        logger.error(&quot;IOException: &quot;, e);\n    }\n\n    return results;\n}\n</code></pre>\n<p>for findPlace</p>\n<pre><code>public static PlacesSearchResult[] findPlace(double lat, double lng) {\n    GeoApiContext ctx = new GeoApiContext.Builder().apiKey(API_KEY).build();\n\n    FindPlaceFromText response = null;\n    try {\n        response = PlacesApi.findPlaceFromText(ctx, &quot;restaurants&quot;, FindPlaceFromTextRequest.InputType.TEXT_QUERY)\n            .fields(\n                FindPlaceFromTextRequest.FieldMask.NAME,\n                FindPlaceFromTextRequest.FieldMask.FORMATTED_ADDRESS,\n                FindPlaceFromTextRequest.FieldMask.RATING,\n                FindPlaceFromTextRequest.FieldMask.OPENING_HOURS)\n            .locationBias(new FindPlaceFromTextRequest.LocationBiasCircular(new LatLng(lat, lng), 10000))\n            .await();\n    } catch (ApiException e) {\n        logger.error(&quot;ApiException: &quot;, e);\n    } catch (InterruptedException e) {\n        logger.error(&quot;InterruptedException: &quot;, e);\n    } catch (IOException e) {\n        logger.error(&quot;IOException: &quot;, e);\n    }\n    \n    return response != null ? response.candidates : null;\n}\n</code></pre>\n"}],"owner":{"account_id":87475,"reputation":91,"user_id":242555,"display_name":"R.Karthik Vasishta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10315,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":5,"score":9,"last_activity_date":1696184364,"creation_date":1262492572,"question_id":1993981,"body_markdown":"How do you access google maps API from a Java application?","title":"How to access google maps api in Java Application?","body":"<p>How do you access google maps API from a Java application?</p>\n"},{"tags":["java","for-loop"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":2,"creation_date":1696082445,"post_id":77207238,"comment_id":136110011,"body_markdown":"*`Different books uses different declaration.  I used both of them but in both cases, it resulted in syntax error`.*  Assuming you copied the examples correctly, you now know what books not to use.","body":"<i><code>Different books uses different declaration.  I used both of them but in both cases, it resulted in syntax error</code>.</i>  Assuming you copied the examples correctly, you now know what books not to use."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1696091947,"post_id":77207238,"comment_id":136111033,"body_markdown":"In the &#39;loop control&#39; part of an if-statement there are 3 parts separated by semicolons.  Therefore, anything with more than 2 semicolons is wrong. Easy!","body":"In the &#39;loop control&#39; part of an if-statement there are 3 parts separated by semicolons.  Therefore, anything with more than 2 semicolons is wrong. Easy!"}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696081632,"creation_date":1696081632,"answer_id":77207253,"question_id":77207238,"body_markdown":"Option (c). Like,\r\n\r\n\tfor (int a = 1, b = 1; a &lt;= 5; a++, b++) {\r\n\t\tSystem.out.printf(&quot;a=%d, b=%d%n&quot;, a, b);\r\n\t}\r\n\r\nWhich outputs\r\n\r\n    a=1, b=1\r\n    a=2, b=2\r\n    a=3, b=3\r\n    a=4, b=4\r\n    a=5, b=5\r\n\r\nNormally you would change the initial condition and increment for `b` if you wanted to use this form.","title":"Multi-variable for-loop declaration in Java","body":"<p>Option (c). Like,</p>\n<pre><code>for (int a = 1, b = 1; a &lt;= 5; a++, b++) {\n    System.out.printf(&quot;a=%d, b=%d%n&quot;, a, b);\n}\n</code></pre>\n<p>Which outputs</p>\n<pre><code>a=1, b=1\na=2, b=2\na=3, b=3\na=4, b=4\na=5, b=5\n</code></pre>\n<p>Normally you would change the initial condition and increment for <code>b</code> if you wanted to use this form.</p>\n"},{"tags":[],"owner":{"account_id":5648623,"reputation":768,"user_id":4469946,"accept_rate":65,"display_name":"Jay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696081660,"creation_date":1696081660,"answer_id":77207255,"question_id":77207238,"body_markdown":"        for (int a = 1, b = 1; a &lt;= 5; a++, b++) {\r\n            System.out.println(a);\r\n            System.out.println(b);\r\n        }\r\nNotice it should be `a++, b++` and not `a++ ; b++`","title":"Multi-variable for-loop declaration in Java","body":"<pre><code>    for (int a = 1, b = 1; a &lt;= 5; a++, b++) {\n        System.out.println(a);\n        System.out.println(b);\n    }\n</code></pre>\n<p>Notice it should be <code>a++, b++</code> and not <code>a++ ; b++</code></p>\n"},{"tags":[],"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696081862,"creation_date":1696081862,"answer_id":77207266,"question_id":77207238,"body_markdown":"You can initialize multiple variables (a and b in your example) separated by commas and your loop will continue as long as the condition `(a &lt;= 5)` is `true`, and the increment expressions `(a++ and b++)` will be executed after each iteration of the loop:\r\n\r\n    for (int a = 1, b = 1; a &lt;= 5; a++, b++)","title":"Multi-variable for-loop declaration in Java","body":"<p>You can initialize multiple variables (a and b in your example) separated by commas and your loop will continue as long as the condition <code>(a &lt;= 5)</code> is <code>true</code>, and the increment expressions <code>(a++ and b++)</code> will be executed after each iteration of the loop:</p>\n<pre><code>for (int a = 1, b = 1; a &lt;= 5; a++, b++)\n</code></pre>\n"}],"owner":{"account_id":25434284,"reputation":103,"user_id":22027634,"display_name":"Agnibho Dutta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77207255,"answer_count":3,"score":0,"last_activity_date":1696184354,"creation_date":1696081371,"question_id":77207238,"body_markdown":"What is the correct declaration of multi-variable for-loop declaration in Java?\r\n\r\n1. ```for (int a = 1; int b = 1; a &lt;= 5; a++; b++)```\r\n\r\n2. ```for (int a = 1, b = 1; a &lt;= 5; a++; b++)```\r\n\r\nDifferent books uses different declaration. \r\n\r\n\r\n\r\n\r\n\r\nI used both of them but in both cases, it resulted in syntax error.","title":"Multi-variable for-loop declaration in Java","body":"<p>What is the correct declaration of multi-variable for-loop declaration in Java?</p>\n<ol>\n<li><p><code>for (int a = 1; int b = 1; a &lt;= 5; a++; b++)</code></p>\n</li>\n<li><p><code>for (int a = 1, b = 1; a &lt;= 5; a++; b++)</code></p>\n</li>\n</ol>\n<p>Different books uses different declaration.</p>\n<p>I used both of them but in both cases, it resulted in syntax error.</p>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":7719031,"reputation":2254,"user_id":5845802,"display_name":"PrasadU"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696183389,"creation_date":1696183389,"answer_id":77211697,"question_id":77211081,"body_markdown":"the gradle documentation [java_library_configurations_graph][1] provides the detailed explanation.  \r\nstart point - *classpath are realised from the dependency configuration (impl...etc), you should not need to meddle with *classpath (unless doing something special)\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/java_library_plugin.html#sec:java_library_configurations_graph","title":"Gradle question: implementation vs runtimeClasspath, testImplementation vs testRuntimeClasspath","body":"<p>the gradle documentation <a href=\"https://docs.gradle.org/current/userguide/java_library_plugin.html#sec:java_library_configurations_graph\" rel=\"nofollow noreferrer\">java_library_configurations_graph</a> provides the detailed explanation.<br />\nstart point - *classpath are realised from the dependency configuration (impl...etc), you should not need to meddle with *classpath (unless doing something special)</p>\n"}],"owner":{"account_id":2500295,"reputation":1257,"user_id":2175604,"accept_rate":43,"display_name":"techie11"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77211697,"answer_count":1,"score":0,"last_activity_date":1696183389,"creation_date":1696173692,"question_id":77211081,"body_markdown":"I&#39;m new to Gradle.\r\n\r\nThe command:\r\n\r\n    $ ./gradlew dependencies\r\n\r\ndisplay a list of dependencies. would someone explain what is the differences between the followings?\r\n\r\n    implementation vs runtimeClasspath              // they both specifies dependencies for runtime\r\n    testImplementation vs testRuntimeClasspath      // they both specifies dependencies for testing\r\n\r\n\r\n","title":"Gradle question: implementation vs runtimeClasspath, testImplementation vs testRuntimeClasspath","body":"<p>I'm new to Gradle.</p>\n<p>The command:</p>\n<pre><code>$ ./gradlew dependencies\n</code></pre>\n<p>display a list of dependencies. would someone explain what is the differences between the followings?</p>\n<pre><code>implementation vs runtimeClasspath              // they both specifies dependencies for runtime\ntestImplementation vs testRuntimeClasspath      // they both specifies dependencies for testing\n</code></pre>\n"},{"tags":["java","oop","junit"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1696182079,"post_id":77211597,"comment_id":136117681,"body_markdown":"&quot;*... don&#39;t seem to understand what is exactly happening right here...*&quot; - It is an anonymous class, sub-classing `Subject`.","body":"&quot;<i>... don&#39;t seem to understand what is exactly happening right here...</i>&quot; - It is an anonymous class, sub-classing <code>Subject</code>."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":2,"creation_date":1696182214,"post_id":77211597,"comment_id":136117692,"body_markdown":"Does this answer your question? [Java, anonymous inner class definition](https://stackoverflow.com/questions/8913406/java-anonymous-inner-class-definition)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/8913406/java-anonymous-inner-class-definition\">Java, anonymous inner class definition</a>"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1696215252,"post_id":77211597,"comment_id":136120490,"body_markdown":"The term you want to Google is &quot;Java anonymous inner class&quot;.","body":"The term you want to Google is &quot;Java anonymous inner class&quot;."}],"answers":[{"tags":[],"owner":{"account_id":2163224,"reputation":6602,"user_id":1916917,"accept_rate":60,"display_name":"Holloway"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696182676,"creation_date":1696182267,"answer_id":77211619,"question_id":77211597,"body_markdown":"This is not really related to tests or mocking. What&#39;s happing is you&#39;re creating an anonymous subclass.\r\n\r\n```java\r\nSubject s1 = fill(new Subject() {\r\n    private static final long serialVersionUID = 1L;\r\n});\r\n```\r\n\r\nis equivalent to\r\n\r\n```java\r\nclass NewSubject {\r\n    private static final long  serialVersionUID = 1L;\r\n}\r\n\r\n// and then where the original call was used\r\nSubject s1 = fill(new NewSubject());\r\n```\r\n\r\nWithout seeing the surrounding code it&#39;s not easy to know why it&#39;s done this way, but I&#39;m guessing the tests end up serialising and deserialising the class at some point. The `serialVersionUID` field is a special field used by the built in serialisation which means it would generally appear unused in user code.\r\n\r\nNote that this only works because the serialisation looks for a `serialVersionUID` field on the specific class being serialised. You cannot use this method to override private fields used in the superclass as any direct use of them in the parent class will still use the original.","title":"Java mock class construction","body":"<p>This is not really related to tests or mocking. What's happing is you're creating an anonymous subclass.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Subject s1 = fill(new Subject() {\n    private static final long serialVersionUID = 1L;\n});\n</code></pre>\n<p>is equivalent to</p>\n<pre class=\"lang-java prettyprint-override\"><code>class NewSubject {\n    private static final long  serialVersionUID = 1L;\n}\n\n// and then where the original call was used\nSubject s1 = fill(new NewSubject());\n</code></pre>\n<p>Without seeing the surrounding code it's not easy to know why it's done this way, but I'm guessing the tests end up serialising and deserialising the class at some point. The <code>serialVersionUID</code> field is a special field used by the built in serialisation which means it would generally appear unused in user code.</p>\n<p>Note that this only works because the serialisation looks for a <code>serialVersionUID</code> field on the specific class being serialised. You cannot use this method to override private fields used in the superclass as any direct use of them in the parent class will still use the original.</p>\n"},{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696182509,"creation_date":1696182509,"answer_id":77211637,"question_id":77211597,"body_markdown":"&gt; an error message of: The value of field new Subject(){}.serialVersionUID is not used\r\n\r\nThat&#39;s a warning message, not an error message. It is emitted by the compiler because the field is declared, but not used by any code you have written, and the compiler suspects that it may be unused and therefore a programming mistake.\r\n\r\nHowever, the compiler is not omniscient, and one thing it can not take into account is access at runtime through the Reflection API. And it is possible such is happening here, because a field called `serialVersionUID` has a special role in Java Serialization. \r\n\r\nThat is, if Java Serialization is used with this class, the field may be useful, and the warning spurious, in which case you can use `@SuppressWarnings` to silence the compiler.\r\n\r\nOn the other hand, if this class is not used with Java Serialization, the field is indeed useless, and can be safely deleted.\r\n\r\n&gt; as I understand that the serialVersionUID is somehow nested inside the Subject class, but not directly inside, will a getter be able to show it?\r\n\r\nThe syntax \r\n\r\n```\r\nnew Subject { \r\n    private static final long serialVersionUID = 1L;\r\n}\r\n```\r\n\r\ndeclares an anonymous inner class that extends `Subject`, and instantiates it.","title":"Java mock class construction","body":"<blockquote>\n<p>an error message of: The value of field new Subject(){}.serialVersionUID is not used</p>\n</blockquote>\n<p>That's a warning message, not an error message. It is emitted by the compiler because the field is declared, but not used by any code you have written, and the compiler suspects that it may be unused and therefore a programming mistake.</p>\n<p>However, the compiler is not omniscient, and one thing it can not take into account is access at runtime through the Reflection API. And it is possible such is happening here, because a field called <code>serialVersionUID</code> has a special role in Java Serialization.</p>\n<p>That is, if Java Serialization is used with this class, the field may be useful, and the warning spurious, in which case you can use <code>@SuppressWarnings</code> to silence the compiler.</p>\n<p>On the other hand, if this class is not used with Java Serialization, the field is indeed useless, and can be safely deleted.</p>\n<blockquote>\n<p>as I understand that the serialVersionUID is somehow nested inside the Subject class, but not directly inside, will a getter be able to show it?</p>\n</blockquote>\n<p>The syntax</p>\n<pre><code>new Subject { \n    private static final long serialVersionUID = 1L;\n}\n</code></pre>\n<p>declares an anonymous inner class that extends <code>Subject</code>, and instantiates it.</p>\n"}],"owner":{"account_id":29575875,"reputation":1,"user_id":22666848,"display_name":"Ignas Davulis"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77211637,"answer_count":2,"score":-1,"last_activity_date":1696182676,"creation_date":1696181831,"question_id":77211597,"body_markdown":"I am trying to understand what is exactly happening in this java unit test, as I managed to find that there is a possibility to pass values to Java class&#39;s constructor not inside the parentheses, but inside brackets after the classes parentheses, yet, don&#39;t seem to understand what is exactly happening right here in the attached unit test? My guess would be that it is creating a variable for that Subject class, but I don&#39;t need to create it inside my class&#39;s definition(declare a variable inside the class file/code)\r\n\r\n```\r\n        Subject s1 = fill(new Subject() {\r\n            private static final long serialVersionUID = 1L;\r\n        });\r\n\r\n```\r\n\r\n\r\n```\r\n/* The class definition */\r\npublic class Subject {\r\n    private int id;\r\n    private String address;\r\n    private String city;\r\n    private String county;\r\n    private String state;\r\n    private String country;\r\n    private String email;\r\n    private String phone;\r\n    private String web;\r\n    private String zip;\r\n\r\n// setters and getter for the declared variables here, also using default constructor\r\n\r\n```\r\n\r\n\r\n\r\nI tried googling but couldn&#39;t define what exactly I am trying to find, and the issue I am facing is that it is showing an error message of: \r\n`The value of field new Subject(){}.serialVersionUID is not used` &lt;- as I understand that the serialVersionUID is somehow nested inside the Subject class, but not directly inside, will a getter  be able to show it?","title":"Java mock class construction","body":"<p>I am trying to understand what is exactly happening in this java unit test, as I managed to find that there is a possibility to pass values to Java class's constructor not inside the parentheses, but inside brackets after the classes parentheses, yet, don't seem to understand what is exactly happening right here in the attached unit test? My guess would be that it is creating a variable for that Subject class, but I don't need to create it inside my class's definition(declare a variable inside the class file/code)</p>\n<pre><code>        Subject s1 = fill(new Subject() {\n            private static final long serialVersionUID = 1L;\n        });\n\n</code></pre>\n<pre><code>/* The class definition */\npublic class Subject {\n    private int id;\n    private String address;\n    private String city;\n    private String county;\n    private String state;\n    private String country;\n    private String email;\n    private String phone;\n    private String web;\n    private String zip;\n\n// setters and getter for the declared variables here, also using default constructor\n\n</code></pre>\n<p>I tried googling but couldn't define what exactly I am trying to find, and the issue I am facing is that it is showing an error message of:\n<code>The value of field new Subject(){}.serialVersionUID is not used</code> &lt;- as I understand that the serialVersionUID is somehow nested inside the Subject class, but not directly inside, will a getter  be able to show it?</p>\n"},{"tags":["java","jar","visual-studio-code"],"comments":[{"owner":{"account_id":17983057,"reputation":1072,"user_id":13068918,"display_name":"Sheng Chen"},"score":0,"creation_date":1644478647,"post_id":70986751,"comment_id":125618806,"body_markdown":"Looks like you are not using the latest extension since the content of screenshots are out-of-date","body":"Looks like you are not using the latest extension since the content of screenshots are out-of-date"}],"answers":[{"tags":[],"owner":{"account_id":17942799,"reputation":7768,"user_id":13037676,"display_name":"Steven-MSFT"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1644395500,"creation_date":1644395500,"answer_id":71046229,"question_id":70986751,"body_markdown":"Have you tried to open a java file? Because the extension activated depends on the opened filename extension.\r\n\r\nYou can refer to [here][1].\r\n\r\nIf it still does not work, could you provide the OS and the versions of the \r\nVSCode and extensions?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/62275468/java-dependency-viewer-not-appearing-in-the-explorer-window-of-visual-studio-cod","title":"Why cant I see Java project view in VS Code?","body":"<p>Have you tried to open a java file? Because the extension activated depends on the opened filename extension.</p>\n<p>You can refer to <a href=\"https://stackoverflow.com/questions/62275468/java-dependency-viewer-not-appearing-in-the-explorer-window-of-visual-studio-cod\">here</a>.</p>\n<p>If it still does not work, could you provide the OS and the versions of the\nVSCode and extensions?</p>\n"},{"tags":[],"owner":{"account_id":24347399,"reputation":101,"user_id":18283743,"display_name":"1y0una"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648199652,"creation_date":1646298582,"answer_id":71334580,"question_id":70986751,"body_markdown":"As for the 3 dots, here&#39;s what I think: different versions may be slightly different, you see, there are no three points in this one [enter image description here][1]. So you may update it when you are free. \r\n\r\nAs for the project view, you may have to open a project before it appears, Steven-MSFT has said it in detail, you can see it first. If you still have questions, you can provide some details again. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SrQqx.png","title":"Why cant I see Java project view in VS Code?","body":"<p>As for the 3 dots, here's what I think: different versions may be slightly different, you see, there are no three points in this one <a href=\"https://i.stack.imgur.com/SrQqx.png\" rel=\"nofollow noreferrer\">enter image description here</a>. So you may update it when you are free.</p>\n<p>As for the project view, you may have to open a project before it appears, Steven-MSFT has said it in detail, you can see it first. If you still have questions, you can provide some details again.</p>\n"},{"tags":[],"owner":{"account_id":9718768,"reputation":265,"user_id":7208148,"display_name":"soolaugust"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657524502,"creation_date":1657524502,"answer_id":72935058,"question_id":70986751,"body_markdown":"Anyway, you can try the following 2 steps:\r\n\r\n1. open a `.java` file\r\n2. reboot your vscode","title":"Why cant I see Java project view in VS Code?","body":"<p>Anyway, you can try the following 2 steps:</p>\n<ol>\n<li>open a <code>.java</code> file</li>\n<li>reboot your vscode</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2909719,"reputation":19935,"user_id":2494262,"accept_rate":64,"display_name":"MrE"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669954144,"creation_date":1669954144,"answer_id":74650813,"question_id":70986751,"body_markdown":"I have struggled quite a bit with this and none of the &#39;obvious&#39; solutions worked.\r\n\r\nThe way I ended up solving the issue is by creating a new Java Project and looking at the difference in the config of the files.\r\n\r\nEspecially in the `.project` file, there were missing entries. Some also in the `.settings/*.prefs` files \r\nAfter updating those in my own project, it got detected properly.\r\n\r\n","title":"Why cant I see Java project view in VS Code?","body":"<p>I have struggled quite a bit with this and none of the 'obvious' solutions worked.</p>\n<p>The way I ended up solving the issue is by creating a new Java Project and looking at the difference in the config of the files.</p>\n<p>Especially in the <code>.project</code> file, there were missing entries. Some also in the <code>.settings/*.prefs</code> files\nAfter updating those in my own project, it got detected properly.</p>\n"},{"tags":[],"owner":{"account_id":15594545,"reputation":160,"user_id":11250492,"display_name":"Prem G"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1687438720,"creation_date":1687438720,"answer_id":76532184,"question_id":70986751,"body_markdown":"Open Command Palette and type &#39;Explorer: Focus on Java Projects View&#39; (can refer screenshot below)\r\n\r\nhope it helps! :)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4883p.png","title":"Why cant I see Java project view in VS Code?","body":"<p>Open Command Palette and type 'Explorer: Focus on Java Projects View' (can refer screenshot below)</p>\n<p>hope it helps! :)</p>\n<p><a href=\"https://i.stack.imgur.com/4883p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4883p.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":29568360,"reputation":1,"user_id":22661160,"display_name":"Arya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696181656,"creation_date":1696065195,"answer_id":77206377,"question_id":70986751,"body_markdown":"It has been a while, have you tried opening the Explorer box and checking the Java Project tag, I have the same problem and it takes a few hours to realize lol.\r\n\r\n![Java project check box][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yjhvN.png","title":"Why cant I see Java project view in VS Code?","body":"<p>It has been a while, have you tried opening the Explorer box and checking the Java Project tag, I have the same problem and it takes a few hours to realize lol.</p>\n<p><img src=\"https://i.stack.imgur.com/yjhvN.png\" alt=\"Java project check box\" /></p>\n"}],"owner":{"account_id":13876943,"reputation":479,"user_id":10018352,"display_name":"Zizi96"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6827,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":6,"score":4,"last_activity_date":1696181656,"creation_date":1643979391,"question_id":70986751,"body_markdown":"So I&#39;m trying to add jar files to a java project. \r\n\r\nI&#39;ve been told the following:\r\n\r\n&gt; If you want a more beginner-friendly way of adding libraries, you can\r\n&gt; also use the [Project Manager][1] for Java extension, which is included in\r\n&gt; the Java Extension Pack. With it, you can click the + icon on\r\n&gt; Referenced Libraries in the JAVA PROJECTS view, as shown in [this\r\n&gt; example][2]. A quick tip if you need to add many libraries from a folder\r\n&gt; is to Shift or Alt + click the + icon, which will let you select an\r\n&gt; entire folder containing multiple .jar files.\r\n\r\n\r\nAfter installing Project manager extension and creating a new Java project in VS code, I get to this screen. \r\n![My Java project[3]][3]\r\n\r\nAs mentioned by VS code, I should be able to see the project view tab after creating my java project. The issue is I don&#39;t see the project view tab as shown in the image above. VS code says I should see the 3 dots by the explorer subheading to enable it, but again, I don&#39;t have these 3 dots as shown in the first image.\r\n\r\n[![enter image description here][4]][4]\r\n\r\nI have both project manager and the extension pack installed, so I really don&#39;t understand why I cant see or enable project view.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nAny suggestions on enabling project view?\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-dependency\r\n  [2]: https://code.visualstudio.com/docs/java/java-project#_add-a-jar\r\n  [3]: https://i.stack.imgur.com/XTAL4.png\r\n  [4]: https://i.stack.imgur.com/7HADt.png\r\n  [5]: https://i.stack.imgur.com/RDwPr.png","title":"Why cant I see Java project view in VS Code?","body":"<p>So I'm trying to add jar files to a java project.</p>\n<p>I've been told the following:</p>\n<blockquote>\n<p>If you want a more beginner-friendly way of adding libraries, you can\nalso use the <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-dependency\" rel=\"nofollow noreferrer\">Project Manager</a> for Java extension, which is included in\nthe Java Extension Pack. With it, you can click the + icon on\nReferenced Libraries in the JAVA PROJECTS view, as shown in <a href=\"https://code.visualstudio.com/docs/java/java-project#_add-a-jar\" rel=\"nofollow noreferrer\">this\nexample</a>. A quick tip if you need to add many libraries from a folder\nis to Shift or Alt + click the + icon, which will let you select an\nentire folder containing multiple .jar files.</p>\n</blockquote>\n<p>After installing Project manager extension and creating a new Java project in VS code, I get to this screen.\n<img src=\"https://i.stack.imgur.com/XTAL4.png\" alt=\"My Java project3\" /></p>\n<p>As mentioned by VS code, I should be able to see the project view tab after creating my java project. The issue is I don't see the project view tab as shown in the image above. VS code says I should see the 3 dots by the explorer subheading to enable it, but again, I don't have these 3 dots as shown in the first image.</p>\n<p><a href=\"https://i.stack.imgur.com/7HADt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7HADt.png\" alt=\"enter image description here\" /></a></p>\n<p>I have both project manager and the extension pack installed, so I really don't understand why I cant see or enable project view.</p>\n<p><a href=\"https://i.stack.imgur.com/RDwPr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RDwPr.png\" alt=\"enter image description here\" /></a></p>\n<p>Any suggestions on enabling project view?</p>\n"},{"tags":["java","spring","hibernate","jpa","liquibase"],"answers":[{"tags":[],"owner":{"account_id":3122640,"reputation":1154,"user_id":2642116,"display_name":"minni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696179726,"creation_date":1586855185,"answer_id":61204176,"question_id":56666758,"body_markdown":"I found, that the parameters for the naming-strategies are not used in the `liquibase-hibernate4` package.\r\n\r\nMy solution is to use the `libquibase-hibernate5` (5 instead of 4) in the latest version available on maven-central (3.8):\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;liquibase-hibernate5&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.8&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\r\nThe complete plugin definition in the `pom.xml` is:\r\n\r\n\t&lt;!-- database migration with liquibase --&gt;\r\n\t&lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.8.9&lt;/version&gt;\r\n\t\t&lt;configuration&gt;\r\n\t\t\t&lt;propertyFileWillOverride&gt;true&lt;/propertyFileWillOverride&gt;\r\n\t\t\t&lt;propertyFile&gt;src/main/resources/db/liquibase.properties&lt;/propertyFile&gt;\r\n\t\t\t&lt;diffChangeLogFile&gt;src/main/resources/db/changes/${maven.build.timestamp}_changelog.xml&lt;/diffChangeLogFile&gt;\r\n\t\t\t&lt;verbose&gt;true&lt;/verbose&gt;\r\n\t\t\t&lt;logging&gt;debug&lt;/logging&gt;\r\n\t\t&lt;/configuration&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;liquibase-hibernate5&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.8&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.20.0-GA&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.1.9.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;de.meisterbohne.framework&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;meisterbohne-spring-base&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.0.3&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/plugin&gt;\r\n\r\n\r\nAdditionally, I upgraded `liquibase-core` to the latest version (3.8.9), by overriding the Spring default from the parent pom, with the following property in `pom.xml`:\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;liquibase.version&gt;3.8.9&lt;/liquibase.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\r\nIn `liquibase.properties` you can set the `referenceUrl` with the two additional parameters for naming-strategies:\r\n\r\n - hibernate.physical_naming_strategy\r\n - hibernate.implicit_naming_strategy\r\n  \r\n\r\nExample (I use our own naming strategies):\r\n\r\n\treferenceUrl=hibernate:spring:\\\r\n\tde.meisterbohne.dms,\\\r\n\tde.meisterbohne.framework.spring\\\r\n\t?dialect=org.hibernate.dialect.MySQL5InnoDBDialect\\\r\n\t&amp;hibernate.physical_naming_strategy=de.meisterbohne.framework.spring.common.data.names.MeisterbohnePhysicalNamingStrategy\\\r\n\t&amp;hibernate.implicit_naming_strategy=de.meisterbohne.framework.spring.common.data.names.MeisterbohneImplicitNamingStrategy\r\n\r\n\r\nExample naming strategies:\r\n- MeisterbohneImplicitNamingStrategy.java  \r\n  https://gist.github.com/herrminni/6bca5b6384a863fe139b4be5899cad89\r\n\r\n- MeisterbohnePhysicalNamingStrategy.java  \r\n  https://gist.github.com/herrminni/11160e51f48ccd856c84d59982267c09","title":"Spring liquibase custom ImplicitNamingStrategy","body":"<p>I found, that the parameters for the naming-strategies are not used in the <code>liquibase-hibernate4</code> package.</p>\n<p>My solution is to use the <code>libquibase-hibernate5</code> (5 instead of 4) in the latest version available on maven-central (3.8):</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\n    &lt;artifactId&gt;liquibase-hibernate5&lt;/artifactId&gt;\n    &lt;version&gt;3.8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The complete plugin definition in the <code>pom.xml</code> is:</p>\n<pre><code>&lt;!-- database migration with liquibase --&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n    &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.9&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;propertyFileWillOverride&gt;true&lt;/propertyFileWillOverride&gt;\n        &lt;propertyFile&gt;src/main/resources/db/liquibase.properties&lt;/propertyFile&gt;\n        &lt;diffChangeLogFile&gt;src/main/resources/db/changes/${maven.build.timestamp}_changelog.xml&lt;/diffChangeLogFile&gt;\n        &lt;verbose&gt;true&lt;/verbose&gt;\n        &lt;logging&gt;debug&lt;/logging&gt;\n    &lt;/configuration&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-hibernate5&lt;/artifactId&gt;\n            &lt;version&gt;3.8&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n            &lt;version&gt;3.20.0-GA&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;2.1.9.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;de.meisterbohne.framework&lt;/groupId&gt;\n            &lt;artifactId&gt;meisterbohne-spring-base&lt;/artifactId&gt;\n            &lt;version&gt;1.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Additionally, I upgraded <code>liquibase-core</code> to the latest version (3.8.9), by overriding the Spring default from the parent pom, with the following property in <code>pom.xml</code>:</p>\n<pre><code>&lt;properties&gt;\n    &lt;liquibase.version&gt;3.8.9&lt;/liquibase.version&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>In <code>liquibase.properties</code> you can set the <code>referenceUrl</code> with the two additional parameters for naming-strategies:</p>\n<ul>\n<li>hibernate.physical_naming_strategy</li>\n<li>hibernate.implicit_naming_strategy</li>\n</ul>\n<p>Example (I use our own naming strategies):</p>\n<pre><code>referenceUrl=hibernate:spring:\\\nde.meisterbohne.dms,\\\nde.meisterbohne.framework.spring\\\n?dialect=org.hibernate.dialect.MySQL5InnoDBDialect\\\n&amp;hibernate.physical_naming_strategy=de.meisterbohne.framework.spring.common.data.names.MeisterbohnePhysicalNamingStrategy\\\n&amp;hibernate.implicit_naming_strategy=de.meisterbohne.framework.spring.common.data.names.MeisterbohneImplicitNamingStrategy\n</code></pre>\n<p>Example naming strategies:</p>\n<ul>\n<li><p>MeisterbohneImplicitNamingStrategy.java<br />\n<a href=\"https://gist.github.com/herrminni/6bca5b6384a863fe139b4be5899cad89\" rel=\"nofollow noreferrer\">https://gist.github.com/herrminni/6bca5b6384a863fe139b4be5899cad89</a></p>\n</li>\n<li><p>MeisterbohnePhysicalNamingStrategy.java<br />\n<a href=\"https://gist.github.com/herrminni/11160e51f48ccd856c84d59982267c09\" rel=\"nofollow noreferrer\">https://gist.github.com/herrminni/11160e51f48ccd856c84d59982267c09</a></p>\n</li>\n</ul>\n"}],"owner":{"account_id":1221477,"reputation":4119,"user_id":1188047,"accept_rate":60,"display_name":"Ben"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1264,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1696179726,"creation_date":1560944091,"question_id":56666758,"body_markdown":"I want to be able to set a naming strategy for foreign keys, currently keys are named like `FK_qsp8qs9j1wbh965jtxfbu2q2u` and I&#39;d like to generate names like `FK_TABLE1_TABLE2` I written the following naming strategy: \r\n\r\n    @Component\r\n    public class CustomImplicitNamingStrategy extends SpringImplicitNamingStrategy {\r\n    \r\n        @Override\r\n        public Identifier determineForeignKeyName(ImplicitForeignKeyNameSource source) {\r\n            Identifier userProvidedIdentifier = source.getUserProvidedIdentifier();\r\n    \r\n            if (userProvidedIdentifier != null) {\r\n                return userProvidedIdentifier;\r\n            }\r\n            String foreignKey = format(&quot;FK_%s_%s&quot;, source.getTableName().getText(), source.getReferencedTableName().getText());\r\n    \r\n            return Identifier.toIdentifier(foreignKey);\r\n        }\r\n    \r\n    }\r\n\r\n**application.properties**\r\n\r\n    spring.jpa.hibernate.naming.implicit-strategy=foo.bar.CustomImplicitNamingStrategy \r\n\r\n**liquibase.properties**\r\n\r\n    referenceUrl=hibernate:spring:foo.bar.model?dialect=org.hibernate.dialect.Oracle10gDialect&amp;hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&amp;hibernate.implicit_naming_strategy=foo.bar.CustomImplicitNamingStrategy\r\n\r\n**pom.xml**\r\n\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;!--   Liquibase plugin configuration  --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n                &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.4.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;referenceUrl&gt;\r\n                        hibernate:spring:foo.bar.model?dialect=org.hibernate.dialect.Oracle10gDialect&amp;hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&amp;hibernate.implicit_naming_strategy=foo.bar.CustomImplicitNamingStrategy\r\n                    &lt;/referenceUrl&gt;\r\n                    &lt;propertyFile&gt;${project.basedir}/src/main/resources/liquibase.properties&lt;/propertyFile&gt;\r\n                    &lt;diffChangeLogFile&gt;\r\n                        ${project.basedir}/src/main/resources/db/changelogs/${maven.build.timestamp}_changelog.xml\r\n                    &lt;/diffChangeLogFile&gt;\r\n                    &lt;changeLogFile&gt;\r\n                        ${project.basedir}/src/main/resources/db/changelogs/db.changelog-master.xml\r\n                    &lt;/changeLogFile&gt;\r\n                    &lt;logging&gt;info&lt;/logging&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;liquibase-hibernate4&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.5&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n                        &lt;version&gt;4.1.7.RELEASE&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n                        &lt;version&gt;1.7.3.RELEASE&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n                        &lt;version&gt;1.4.198&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n                        &lt;version&gt;4.1.7.RELEASE&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n\r\n        &lt;/plugins&gt;\r\n\r\nIt seems regardless of the configuration liquibase falls back to `ImplicitNamingStrategyJpaCompliantImpl` and ignores the custom one.","title":"Spring liquibase custom ImplicitNamingStrategy","body":"<p>I want to be able to set a naming strategy for foreign keys, currently keys are named like <code>FK_qsp8qs9j1wbh965jtxfbu2q2u</code> and I'd like to generate names like <code>FK_TABLE1_TABLE2</code> I written the following naming strategy: </p>\n\n<pre><code>@Component\npublic class CustomImplicitNamingStrategy extends SpringImplicitNamingStrategy {\n\n    @Override\n    public Identifier determineForeignKeyName(ImplicitForeignKeyNameSource source) {\n        Identifier userProvidedIdentifier = source.getUserProvidedIdentifier();\n\n        if (userProvidedIdentifier != null) {\n            return userProvidedIdentifier;\n        }\n        String foreignKey = format(\"FK_%s_%s\", source.getTableName().getText(), source.getReferencedTableName().getText());\n\n        return Identifier.toIdentifier(foreignKey);\n    }\n\n}\n</code></pre>\n\n<p><strong>application.properties</strong></p>\n\n<pre><code>spring.jpa.hibernate.naming.implicit-strategy=foo.bar.CustomImplicitNamingStrategy \n</code></pre>\n\n<p><strong>liquibase.properties</strong></p>\n\n<pre><code>referenceUrl=hibernate:spring:foo.bar.model?dialect=org.hibernate.dialect.Oracle10gDialect&amp;hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&amp;hibernate.implicit_naming_strategy=foo.bar.CustomImplicitNamingStrategy\n</code></pre>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n\n        &lt;!--   Liquibase plugin configuration  --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.4.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;referenceUrl&gt;\n                    hibernate:spring:foo.bar.model?dialect=org.hibernate.dialect.Oracle10gDialect&amp;hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&amp;hibernate.implicit_naming_strategy=foo.bar.CustomImplicitNamingStrategy\n                &lt;/referenceUrl&gt;\n                &lt;propertyFile&gt;${project.basedir}/src/main/resources/liquibase.properties&lt;/propertyFile&gt;\n                &lt;diffChangeLogFile&gt;\n                    ${project.basedir}/src/main/resources/db/changelogs/${maven.build.timestamp}_changelog.xml\n                &lt;/diffChangeLogFile&gt;\n                &lt;changeLogFile&gt;\n                    ${project.basedir}/src/main/resources/db/changelogs/db.changelog-master.xml\n                &lt;/changeLogFile&gt;\n                &lt;logging&gt;info&lt;/logging&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.liquibase.ext&lt;/groupId&gt;\n                    &lt;artifactId&gt;liquibase-hibernate4&lt;/artifactId&gt;\n                    &lt;version&gt;3.5&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n                    &lt;version&gt;4.1.7.RELEASE&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n                    &lt;version&gt;1.7.3.RELEASE&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n                    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n                    &lt;version&gt;1.4.198&lt;/version&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n                    &lt;version&gt;4.1.7.RELEASE&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n</code></pre>\n\n<p>It seems regardless of the configuration liquibase falls back to <code>ImplicitNamingStrategyJpaCompliantImpl</code> and ignores the custom one.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":25748814,"reputation":146,"user_id":19501659,"display_name":"Habib Z."},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1695806345,"creation_date":1695462974,"answer_id":77162490,"question_id":77151029,"body_markdown":"You can use Bytebuddy to create classes at runtime and load them to a specific ClassLoader : \r\n\r\n        Map&lt;String, Class&lt;?&gt;&gt; fields = new HashMap&lt;&gt;();\r\n\t\tfields.put(&quot;firstName&quot;, String.class);\r\n\t\tfields.put(&quot;lastName&quot;, String.class);\r\n\t\tfields.put(&quot;birthDate&quot;, Date.class);\r\n\t\tfields.put(&quot;image&quot;, byte[].class);\r\n\t\tfields.put(&quot;version&quot;, Long.class);\r\n        var className = &quot;com.hzerai.dynamicjpa.models.Person&quot;;\r\n        var builder = new ByteBuddy().subclass(Object.class)\r\n\t\t\t\t.annotateType(AnnotationDescription.Builder.ofType(javax.persistence.Entity.class).build());\r\n\t\tfor (Map.Entry&lt;String, Class&lt;?&gt;&gt; e : fields.entrySet()) {\r\n\t\t\tbuilder = builder.defineField(e.getKey(), e.getValue())\r\n\t\t\t\t\t.annotateField(AnnotationDescription.Builder.ofType(javax.persistence.Column.class).build());\r\n\t\t}\r\n\t\tbuilder = builder.defineField(&quot;id&quot;, Long.class).annotateField(\r\n\t\t\t\tAnnotationDescription.Builder.ofType(javax.persistence.Id.class).build(),\r\n\t\t\t\tAnnotationDescription.Builder.ofType(javax.persistence.Column.class).build(),\r\n\t\t\t\tAnnotationDescription.Builder.ofType(javax.persistence.GeneratedValue.class).build());\r\n\t\tUnloaded&lt;?&gt; generatedClass = builder.name(className).make();\r\n\t\tgeneratedClass.load(Main.class.getClassLoader(), ClassLoadingStrategy.Default.INJECTION);\r\n\t\tClass&lt;?&gt; cls = Class.forName(className);\r\n\r\nYou can do the same to the spring repositories.\r\n\r\nAfter loading the classes to the classLoader, you just need to refresh the spring context to rescan the packages.\r\n\r\nI did something similar creating entities and managing them using jpa/hibernate at runtime.\r\n\r\nCheck-out this repo : https://github.com/HabibZerai/dynamic-jpa.git","title":"Create Spring JPA Entities at runtime","body":"<p>You can use Bytebuddy to create classes at runtime and load them to a specific ClassLoader :</p>\n<pre><code>    Map&lt;String, Class&lt;?&gt;&gt; fields = new HashMap&lt;&gt;();\n    fields.put(&quot;firstName&quot;, String.class);\n    fields.put(&quot;lastName&quot;, String.class);\n    fields.put(&quot;birthDate&quot;, Date.class);\n    fields.put(&quot;image&quot;, byte[].class);\n    fields.put(&quot;version&quot;, Long.class);\n    var className = &quot;com.hzerai.dynamicjpa.models.Person&quot;;\n    var builder = new ByteBuddy().subclass(Object.class)\n            .annotateType(AnnotationDescription.Builder.ofType(javax.persistence.Entity.class).build());\n    for (Map.Entry&lt;String, Class&lt;?&gt;&gt; e : fields.entrySet()) {\n        builder = builder.defineField(e.getKey(), e.getValue())\n                .annotateField(AnnotationDescription.Builder.ofType(javax.persistence.Column.class).build());\n    }\n    builder = builder.defineField(&quot;id&quot;, Long.class).annotateField(\n            AnnotationDescription.Builder.ofType(javax.persistence.Id.class).build(),\n            AnnotationDescription.Builder.ofType(javax.persistence.Column.class).build(),\n            AnnotationDescription.Builder.ofType(javax.persistence.GeneratedValue.class).build());\n    Unloaded&lt;?&gt; generatedClass = builder.name(className).make();\n    generatedClass.load(Main.class.getClassLoader(), ClassLoadingStrategy.Default.INJECTION);\n    Class&lt;?&gt; cls = Class.forName(className);\n</code></pre>\n<p>You can do the same to the spring repositories.</p>\n<p>After loading the classes to the classLoader, you just need to refresh the spring context to rescan the packages.</p>\n<p>I did something similar creating entities and managing them using jpa/hibernate at runtime.</p>\n<p>Check-out this repo : <a href=\"https://github.com/HabibZerai/dynamic-jpa.git\" rel=\"nofollow noreferrer\">https://github.com/HabibZerai/dynamic-jpa.git</a></p>\n"},{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696178175,"creation_date":1696163490,"answer_id":77210477,"question_id":77151029,"body_markdown":"Yes, you can generate Spring JPA entities programmatically at runtime.\r\n\r\nYou have to use **HBM2Java** in a tricky way. Let me show you how.\r\n\r\nI&#39;m using **MacOS**, **JDK 1.8**, **MySQL 8.0.30 Server**, **Spring Boot** **1.5.3.RELEASE** and **HBM2Java** to demonstrate the programmatic approach.\r\n\r\n**Step - By - Step Process :**\r\n\r\n**The complete project structure:**\r\n\r\n    .\r\n    ├── HELP.md\r\n    ├── mvnw\r\n    ├── mvnw.cmd\r\n    ├── pom.xml\r\n    ├── src\r\n    │&#160;&#160; ├── main\r\n    │&#160;&#160; │&#160;&#160; ├── java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160; └── com\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;     └── example\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;         └── hbm2java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;             └── springboot\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                 └── hbm2javaspringbootruntime\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                     ├── Hbm2javaSpringBootRuntimeApplication.java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                     ├── controllers\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                     │&#160;&#160; └── EntityGeneratorController.java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                     ├── service\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                     │&#160;&#160; └── GenerateEntityFromDBService.java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                     ├── strategy\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                     │&#160;&#160; └── TestDatabaseReverseEngineeringStrategy.java\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                     └── utils\r\n    │&#160;&#160; │&#160;&#160; │&#160;&#160;                         └── Hbm2JavaUtils.java\r\n    │&#160;&#160; │&#160;&#160; └── resources\r\n    │&#160;&#160; │&#160;&#160;     ├── application.properties\r\n    │&#160;&#160; │&#160;&#160;     ├── hbm\r\n    │&#160;&#160; │&#160;&#160;     │&#160;&#160; └── test-db.cfg.xml\r\n    │&#160;&#160; │&#160;&#160;     ├── static\r\n    │&#160;&#160; │&#160;&#160;     └── templates\r\n    │&#160;&#160; └── test\r\n    │&#160;&#160;     └── java\r\n    │&#160;&#160;         └── com\r\n    │&#160;&#160;             └── example\r\n    │&#160;&#160;                 └── hbm2java\r\n    │&#160;&#160;                     └── springboot\r\n    │&#160;&#160;                         └── hbm2javaspringbootruntime\r\n\r\n\r\nYou will need to dependencies like `spring-dev-tools` (for live reload), `hibernate-tools`, `hibernate-entitymanager` and `spring-data-jpa` in the **pom.xml**.\r\n\r\n**Yes**, you can use both **JPA** and explicit Hibernate approach in the same project.\r\n\r\n**Note:** `hibernate-tools` comes with **HBM2Java** features and we have to leverage those features in our spring boot application to generate the entities on runtime. \r\n\r\n**pom.xml:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example.hbm2java.spring-boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;hbm2java-spring-boot-runtime&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;hbm2java-spring-boot-runtime&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.10.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.3.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-tools&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.3.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;version&gt;8.0.13&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nNow, I assume you already have schema with tables in it.\r\n\r\nI have created a schema &#39;TEST&#39; in DB and it has tables &#39;User&#39; and &#39;Role&#39;.\r\n\r\nSchema Structure:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nTable Structure:\r\n\r\nUser:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nRole:\r\n[![enter image description here][3]][3]\r\n\r\nStartup Class:\r\n\r\n    @SpringBootApplication\r\n    public class Hbm2javaSpringBootRuntimeApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Hbm2javaSpringBootRuntimeApplication.class, args);\r\n        }\r\n        \r\n    }\r\n\r\nEntityGeneratorController (REST-API):\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;entity&quot;)\r\n    public class EntityGeneratorController {\r\n    \r\n        @Autowired\r\n        private GenerateEntityFromDBService service;\r\n    \r\n        @PostMapping(&quot;generate-from-db&quot;)\r\n        public void generateEntitiesFromDatabase(@RequestParam String basePackageName,\r\n                                                 @RequestParam String hibernateCfgFileName,\r\n                                                 @RequestParam String reverseStrategyClassName) {\r\n            try {\r\n                service.generateEntities(basePackageName, hibernateCfgFileName, reverseStrategyClassName);\r\n                System.out.println(&quot;Entities are generated successfully and now restarting the server....&quot;);\r\n                // Reload/Restart the server after generating the entities.\r\n                Restarter.getInstance().restart();\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Entities are failed to generate. Reason: &quot; + e.getMessage());\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n**Note:** You can see the line `Restarter.getInstance().restart();`. This will take the responsibility of restarting the server.\r\n\r\nI have created a POST REST Endpoint to generate the entities on runtime,  restart the server and spring context will be updated with JPA entities.\r\n\r\nThis endpoint takes the three parameters:\r\n\r\n- **basePackageName** (Base Package Name) in the project where you want the HBM2Java to work.\r\n- **hibernateCfgFileName** (Hibernate CFG File name with extension) that is needed by **HBM2Java** to work. You have create it for the every Schema that you are targetting. The HBM2Java current logic will pick CFG files from `src/main/resources/hbm/&lt;hibernateCfgFileName&gt;`.\r\n- **reverseStrategyClassName** (Reverse Engineering Strategy Class) is used to control default reverse engineering in HBM2Java by providing your own custom reverse engineering logic. Current HBM2Java logic will pick ReverseEngineeringStrategy from `&lt;basePackageName&gt;.strategy.&lt;reverseStrategyClassName&gt;`\r\n\r\nBusiness Logic/Service Layer:\r\n\r\n    @Service\r\n    public class GenerateEntityFromDBService {\r\n    \r\n        @Autowired\r\n        private Hbm2JavaUtils utils;\r\n    \r\n        public void generateEntities(String basePackageName, String hibernateCfgFileName, String reverseStrategyClassName) {\r\n            HibernateToolTask toolTask = utils.createHibernateToolTaskInstance();\r\n            JDBCConfigurationTask jdbcConf = utils.createJDBCConfigurationTaskInstance(toolTask, basePackageName,\r\n                    hibernateCfgFileName, reverseStrategyClassName);\r\n            jdbcConf.execute();\r\n            Hbm2JavaExporterTask hbm2Java = utils.createEntityExporterTaskInstance(toolTask);\r\n            hbm2Java.execute();\r\n        }\r\n    \r\n    }\r\n\r\nReverse Engineering Strategy for TEST DB:\r\n\r\n    /**\r\n     * This class will be used to override the Default Reverse Engineering Strategy\r\n     * and control the reverse engineering only for &#39;TEST&#39; DB\r\n     */\r\n    public class TestDatabaseReverseEngineeringStrategy extends DelegatingReverseEngineeringStrategy {\r\n    \r\n        private ReverseEngineeringStrategy delegate;\r\n    \r\n        public TestDatabaseReverseEngineeringStrategy(ReverseEngineeringStrategy delegate) {\r\n            super(delegate);\r\n            this.delegate = delegate;\r\n        }\r\n    \r\n        /**\r\n         * This method be called to tell HBM to generate entities from tables present only in &#39;TEST&#39; schema only.\r\n         * &lt;p&gt;\r\n         * Otherwise, by default all the schemas are selected.\r\n         *\r\n         * @return the selected list of schema on which the HBM has to run.\r\n         */\r\n        public List&lt;SchemaSelection&gt; getSchemaSelections() {\r\n            return delegate == null ? null : Collections.singletonList(new SchemaSelection(&quot;TEST&quot;, &quot;TEST&quot;));\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nCustom Utility to handle HBM2Java:\r\n\r\n    @Component\r\n    public class Hbm2JavaUtils {\r\n    \r\n        private static final File DESTINATION_DIR = new File(&quot;src/main/java&quot;);\r\n    \r\n        public HibernateToolTask createHibernateToolTaskInstance() {\r\n            HibernateToolTask toolTask = new HibernateToolTask();\r\n            toolTask.setDestDir(DESTINATION_DIR);\r\n            return toolTask;\r\n        }\r\n    \r\n        public JDBCConfigurationTask createJDBCConfigurationTaskInstance(HibernateToolTask toolTask,\r\n                                                                         String basePackageName,\r\n                                                                         String hibernateCfgFileName,\r\n                                                                         String reverseStrategyClassName) {\r\n            JDBCConfigurationTask jdbcConfTask = toolTask.createJDBCConfiguration();\r\n            jdbcConfTask.setConfigurationFile(new File(&quot;src/main/resources/hbm/&quot; + hibernateCfgFileName));\r\n            jdbcConfTask.setReverseStrategy(basePackageName + &quot;.strategy.&quot; + reverseStrategyClassName);\r\n            jdbcConfTask.setDetectManyToMany(true);\r\n            jdbcConfTask.setDetectOneToOne(true);\r\n            jdbcConfTask.setPackageName(basePackageName + &quot;.persistence&quot;);\r\n            return jdbcConfTask;\r\n        }\r\n    \r\n        public Hbm2JavaExporterTask createEntityExporterTaskInstance(HibernateToolTask toolTask) {\r\n            Hbm2JavaExporterTask hbm2Java = (Hbm2JavaExporterTask) toolTask.createHbm2Java();\r\n            hbm2Java.setJdk5(Boolean.TRUE);\r\n            hbm2Java.setEjb3(Boolean.TRUE);\r\n            hbm2Java.setDestdir(DESTINATION_DIR);\r\n            hbm2Java.validateParameters();\r\n            return hbm2Java;\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nNote: The entities will in the `basePackageName.persistence` package. You can see the line `jdbcConfTask.setPackageName(basePackageName + &quot;.persistence&quot;);`\r\n\r\n\r\n**CFG file (test-db.cfg.xml):**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration SYSTEM\r\n            &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-configuration&gt;\r\n    \t&lt;session-factory&gt;\r\n    \t\t&lt;property name=&quot;hibernate.dialect&quot;&gt;\r\n    \t\t\torg.hibernate.dialect.MySQLDialect\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;\r\n    \t\t\tcom.mysql.cj.jdbc.Driver\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.connection.url&quot;&gt;\r\n    \t\t\tjdbc:mysql://localhost:3306/TEST?autoReconnect=true&amp;amp;useSSL=false\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.default_schema&quot;&gt;TEST&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.connection.username&quot;&gt;\r\n    \t\t\troot\r\n    \t\t&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;hibernate.connection.password&quot;&gt;Anish@123&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n    \t&lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\napplication.properties (for Spring Data JPA) :\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/TEST\r\n    spring.datasource.username=root\r\n    spring.datasource.password=Anish@123\r\n\r\nAfter the application starts successfully, we will need to hit the POST EndPoint.\r\n\r\n[![enter image description here][4]][4]\r\n\r\nIt will successfully create the Role and User JPA entities and restart the server too.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nUser:\r\n\r\n    // Generated 01-Oct-2023 17:37:04 by Hibernate Tools 5.2.3.Final\r\n    \r\n    \r\n    import javax.persistence.*;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    /**\r\n     * User generated by hbm2java\r\n     */\r\n    @Entity\r\n    @Table(name = &quot;USER&quot;\r\n            , catalog = &quot;TEST&quot;\r\n    )\r\n    public class User implements java.io.Serializable {\r\n    \r\n    \r\n        private int id;\r\n        private String name;\r\n        private Set&lt;Role&gt; roles = new HashSet&lt;Role&gt;(0);\r\n    \r\n        public User() {\r\n        }\r\n    \r\n    \r\n        public User(int id, String name) {\r\n            this.id = id;\r\n            this.name = name;\r\n        }\r\n    \r\n        public User(int id, String name, Set&lt;Role&gt; roles) {\r\n            this.id = id;\r\n            this.name = name;\r\n            this.roles = roles;\r\n        }\r\n    \r\n        @Id \r\n        @Column(name = &quot;ID&quot;, unique = true, nullable = false)\r\n        public int getId() {\r\n            return this.id;\r\n        }\r\n    \r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n    \r\n        @Column(name = &quot;NAME&quot;, nullable = false, length = 50)\r\n        public String getName() {\r\n            return this.name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\r\n        public Set&lt;Role&gt; getRoles() {\r\n            return this.roles;\r\n        }\r\n    \r\n        public void setRoles(Set&lt;Role&gt; roles) {\r\n            this.roles = roles;\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nRole:\r\n\r\n    // Generated 01-Oct-2023 17:37:04 by Hibernate Tools 5.2.3.Final\r\n    \r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.FetchType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.JoinColumn;\r\n    import javax.persistence.ManyToOne;\r\n    import javax.persistence.Table;\r\n    \r\n    /**\r\n     * Role generated by hbm2java\r\n     */\r\n    @Entity\r\n    @Table(name = &quot;ROLE&quot;\r\n            , catalog = &quot;TEST&quot;\r\n    )\r\n    public class Role implements java.io.Serializable {\r\n    \r\n    \r\n        private int id;\r\n        private User user;\r\n        private String name;\r\n    \r\n        public Role() {\r\n        }\r\n    \r\n        public Role(int id, User user, String name) {\r\n            this.id = id;\r\n            this.user = user;\r\n            this.name = name;\r\n        }\r\n    \r\n        @Id\r\n        @Column(name = &quot;ID&quot;, unique = true, nullable = false)\r\n        public int getId() {\r\n            return this.id;\r\n        }\r\n    \r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;FK_USER_ID&quot;, nullable = false)\r\n        public User getUser() {\r\n            return this.user;\r\n        }\r\n    \r\n        public void setUser(User user) {\r\n            this.user = user;\r\n        }\r\n    \r\n    \r\n        @Column(name = &quot;NAME&quot;, nullable = false, length = 50)\r\n        public String getName() {\r\n            return this.name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nNow to test whether or not I&#39;m able to do CRUD operation via Spring-Data-JPA, I created an User CrudRepository interface.\r\n\r\n    package com.example.hbm2java.springboot.hbm2javaspringbootruntime.persistence.repository;\r\n    \r\n    import com.example.hbm2java.springboot.hbm2javaspringbootruntime.persistence.User;\r\n    import org.springframework.data.repository.CrudRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface UserRepository extends CrudRepository&lt;User, Integer&gt; {\r\n    }\r\n\r\nAlso, I updated the existing controller with new endpoint to verify.\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;entity&quot;)\r\n    public class EntityGeneratorController {\r\n    \r\n        @Autowired\r\n        private UserRepository repo;\r\n    \r\n        @PostMapping(&quot;saveUser&quot;)\r\n        public User saveUser() {\r\n            User u = new User();\r\n            u.setId(1);\r\n            u.setName(&quot;Anish&quot;);\r\n            return repo.save(u);\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n[![enter image description here][6]][6]\r\n\r\nDB:\r\n\r\n[![enter image description here][7]][7]\r\n\r\nThis proves that Spring-Data-JPA is working fine.\r\n\r\nRestart logs:\r\n\r\n[![enter image description here][8]][8]\r\n\r\n***Credits to the blogs that helped me to reach to the solution:***\r\n\r\n- Thanks to [Junjun Dachi&#39;s Blog][9] for the wonderful example on programmatic **HBM2Java** approach.\r\n- [JBoss Hibernate Tools Blog][10] on **Reverse Engineering Strategy Example**.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iVaYX.png\r\n  [2]: https://i.stack.imgur.com/oI3aX.png\r\n  [3]: https://i.stack.imgur.com/SK0T4.png\r\n  [4]: https://i.stack.imgur.com/girEu.png\r\n  [5]: https://i.stack.imgur.com/l7sgg.png\r\n  [6]: https://i.stack.imgur.com/hwTeM.png\r\n  [7]: https://i.stack.imgur.com/lWb2R.png\r\n  [8]: https://i.stack.imgur.com/WfGPJ.png\r\n  [9]: http://junjun-java.blogspot.com/2017/06/reverse-engineering-gernerate-java.html\r\n  [10]: https://docs.jboss.org/tools/OLD/2.0.0.GA/hibernatetools/en/html_single/index.html#custom-reveng-strategy\r\n","title":"Create Spring JPA Entities at runtime","body":"<p>Yes, you can generate Spring JPA entities programmatically at runtime.</p>\n<p>You have to use <strong>HBM2Java</strong> in a tricky way. Let me show you how.</p>\n<p>I'm using <strong>MacOS</strong>, <strong>JDK 1.8</strong>, <strong>MySQL 8.0.30 Server</strong>, <strong>Spring Boot</strong> <strong>1.5.3.RELEASE</strong> and <strong>HBM2Java</strong> to demonstrate the programmatic approach.</p>\n<p><strong>Step - By - Step Process :</strong></p>\n<p><strong>The complete project structure:</strong></p>\n<pre><code>.\n├── HELP.md\n├── mvnw\n├── mvnw.cmd\n├── pom.xml\n├── src\n│   ├── main\n│   │   ├── java\n│   │   │   └── com\n│   │   │       └── example\n│   │   │           └── hbm2java\n│   │   │               └── springboot\n│   │   │                   └── hbm2javaspringbootruntime\n│   │   │                       ├── Hbm2javaSpringBootRuntimeApplication.java\n│   │   │                       ├── controllers\n│   │   │                       │   └── EntityGeneratorController.java\n│   │   │                       ├── service\n│   │   │                       │   └── GenerateEntityFromDBService.java\n│   │   │                       ├── strategy\n│   │   │                       │   └── TestDatabaseReverseEngineeringStrategy.java\n│   │   │                       └── utils\n│   │   │                           └── Hbm2JavaUtils.java\n│   │   └── resources\n│   │       ├── application.properties\n│   │       ├── hbm\n│   │       │   └── test-db.cfg.xml\n│   │       ├── static\n│   │       └── templates\n│   └── test\n│       └── java\n│           └── com\n│               └── example\n│                   └── hbm2java\n│                       └── springboot\n│                           └── hbm2javaspringbootruntime\n</code></pre>\n<p>You will need to dependencies like <code>spring-dev-tools</code> (for live reload), <code>hibernate-tools</code>, <code>hibernate-entitymanager</code> and <code>spring-data-jpa</code> in the <strong>pom.xml</strong>.</p>\n<p><strong>Yes</strong>, you can use both <strong>JPA</strong> and explicit Hibernate approach in the same project.</p>\n<p><strong>Note:</strong> <code>hibernate-tools</code> comes with <strong>HBM2Java</strong> features and we have to leverage those features in our spring boot application to generate the entities on runtime.</p>\n<p><strong>pom.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example.hbm2java.spring-boot&lt;/groupId&gt;\n    &lt;artifactId&gt;hbm2java-spring-boot-runtime&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;hbm2java-spring-boot-runtime&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;5.2.10.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-tools&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;version&gt;8.0.13&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Now, I assume you already have schema with tables in it.</p>\n<p>I have created a schema 'TEST' in DB and it has tables 'User' and 'Role'.</p>\n<p>Schema Structure:</p>\n<p><a href=\"https://i.stack.imgur.com/iVaYX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iVaYX.png\" alt=\"enter image description here\" /></a></p>\n<p>Table Structure:</p>\n<p>User:</p>\n<p><a href=\"https://i.stack.imgur.com/oI3aX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oI3aX.png\" alt=\"enter image description here\" /></a></p>\n<p>Role:\n<a href=\"https://i.stack.imgur.com/SK0T4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SK0T4.png\" alt=\"enter image description here\" /></a></p>\n<p>Startup Class:</p>\n<pre><code>@SpringBootApplication\npublic class Hbm2javaSpringBootRuntimeApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Hbm2javaSpringBootRuntimeApplication.class, args);\n    }\n    \n}\n</code></pre>\n<p>EntityGeneratorController (REST-API):</p>\n<pre><code>@RestController\n@RequestMapping(&quot;entity&quot;)\npublic class EntityGeneratorController {\n\n    @Autowired\n    private GenerateEntityFromDBService service;\n\n    @PostMapping(&quot;generate-from-db&quot;)\n    public void generateEntitiesFromDatabase(@RequestParam String basePackageName,\n                                             @RequestParam String hibernateCfgFileName,\n                                             @RequestParam String reverseStrategyClassName) {\n        try {\n            service.generateEntities(basePackageName, hibernateCfgFileName, reverseStrategyClassName);\n            System.out.println(&quot;Entities are generated successfully and now restarting the server....&quot;);\n            // Reload/Restart the server after generating the entities.\n            Restarter.getInstance().restart();\n        } catch (Exception e) {\n            System.out.println(&quot;Entities are failed to generate. Reason: &quot; + e.getMessage());\n        }\n\n    }\n}\n</code></pre>\n<p><strong>Note:</strong> You can see the line <code>Restarter.getInstance().restart();</code>. This will take the responsibility of restarting the server.</p>\n<p>I have created a POST REST Endpoint to generate the entities on runtime,  restart the server and spring context will be updated with JPA entities.</p>\n<p>This endpoint takes the three parameters:</p>\n<ul>\n<li><strong>basePackageName</strong> (Base Package Name) in the project where you want the HBM2Java to work.</li>\n<li><strong>hibernateCfgFileName</strong> (Hibernate CFG File name with extension) that is needed by <strong>HBM2Java</strong> to work. You have create it for the every Schema that you are targetting. The HBM2Java current logic will pick CFG files from <code>src/main/resources/hbm/&lt;hibernateCfgFileName&gt;</code>.</li>\n<li><strong>reverseStrategyClassName</strong> (Reverse Engineering Strategy Class) is used to control default reverse engineering in HBM2Java by providing your own custom reverse engineering logic. Current HBM2Java logic will pick ReverseEngineeringStrategy from <code>&lt;basePackageName&gt;.strategy.&lt;reverseStrategyClassName&gt;</code></li>\n</ul>\n<p>Business Logic/Service Layer:</p>\n<pre><code>@Service\npublic class GenerateEntityFromDBService {\n\n    @Autowired\n    private Hbm2JavaUtils utils;\n\n    public void generateEntities(String basePackageName, String hibernateCfgFileName, String reverseStrategyClassName) {\n        HibernateToolTask toolTask = utils.createHibernateToolTaskInstance();\n        JDBCConfigurationTask jdbcConf = utils.createJDBCConfigurationTaskInstance(toolTask, basePackageName,\n                hibernateCfgFileName, reverseStrategyClassName);\n        jdbcConf.execute();\n        Hbm2JavaExporterTask hbm2Java = utils.createEntityExporterTaskInstance(toolTask);\n        hbm2Java.execute();\n    }\n\n}\n</code></pre>\n<p>Reverse Engineering Strategy for TEST DB:</p>\n<pre><code>/**\n * This class will be used to override the Default Reverse Engineering Strategy\n * and control the reverse engineering only for 'TEST' DB\n */\npublic class TestDatabaseReverseEngineeringStrategy extends DelegatingReverseEngineeringStrategy {\n\n    private ReverseEngineeringStrategy delegate;\n\n    public TestDatabaseReverseEngineeringStrategy(ReverseEngineeringStrategy delegate) {\n        super(delegate);\n        this.delegate = delegate;\n    }\n\n    /**\n     * This method be called to tell HBM to generate entities from tables present only in 'TEST' schema only.\n     * &lt;p&gt;\n     * Otherwise, by default all the schemas are selected.\n     *\n     * @return the selected list of schema on which the HBM has to run.\n     */\n    public List&lt;SchemaSelection&gt; getSchemaSelections() {\n        return delegate == null ? null : Collections.singletonList(new SchemaSelection(&quot;TEST&quot;, &quot;TEST&quot;));\n    }\n\n\n}\n</code></pre>\n<p>Custom Utility to handle HBM2Java:</p>\n<pre><code>@Component\npublic class Hbm2JavaUtils {\n\n    private static final File DESTINATION_DIR = new File(&quot;src/main/java&quot;);\n\n    public HibernateToolTask createHibernateToolTaskInstance() {\n        HibernateToolTask toolTask = new HibernateToolTask();\n        toolTask.setDestDir(DESTINATION_DIR);\n        return toolTask;\n    }\n\n    public JDBCConfigurationTask createJDBCConfigurationTaskInstance(HibernateToolTask toolTask,\n                                                                     String basePackageName,\n                                                                     String hibernateCfgFileName,\n                                                                     String reverseStrategyClassName) {\n        JDBCConfigurationTask jdbcConfTask = toolTask.createJDBCConfiguration();\n        jdbcConfTask.setConfigurationFile(new File(&quot;src/main/resources/hbm/&quot; + hibernateCfgFileName));\n        jdbcConfTask.setReverseStrategy(basePackageName + &quot;.strategy.&quot; + reverseStrategyClassName);\n        jdbcConfTask.setDetectManyToMany(true);\n        jdbcConfTask.setDetectOneToOne(true);\n        jdbcConfTask.setPackageName(basePackageName + &quot;.persistence&quot;);\n        return jdbcConfTask;\n    }\n\n    public Hbm2JavaExporterTask createEntityExporterTaskInstance(HibernateToolTask toolTask) {\n        Hbm2JavaExporterTask hbm2Java = (Hbm2JavaExporterTask) toolTask.createHbm2Java();\n        hbm2Java.setJdk5(Boolean.TRUE);\n        hbm2Java.setEjb3(Boolean.TRUE);\n        hbm2Java.setDestdir(DESTINATION_DIR);\n        hbm2Java.validateParameters();\n        return hbm2Java;\n    }\n\n\n}\n</code></pre>\n<p>Note: The entities will in the <code>basePackageName.persistence</code> package. You can see the line <code>jdbcConfTask.setPackageName(basePackageName + &quot;.persistence&quot;);</code></p>\n<p><strong>CFG file (test-db.cfg.xml):</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration SYSTEM\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;\n            org.hibernate.dialect.MySQLDialect\n        &lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;\n            com.mysql.cj.jdbc.Driver\n        &lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;\n            jdbc:mysql://localhost:3306/TEST?autoReconnect=true&amp;amp;useSSL=false\n        &lt;/property&gt;\n        &lt;property name=&quot;hibernate.default_schema&quot;&gt;TEST&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;\n            root\n        &lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;Anish@123&lt;/property&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>application.properties (for Spring Data JPA) :</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/TEST\nspring.datasource.username=root\nspring.datasource.password=Anish@123\n</code></pre>\n<p>After the application starts successfully, we will need to hit the POST EndPoint.</p>\n<p><a href=\"https://i.stack.imgur.com/girEu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/girEu.png\" alt=\"enter image description here\" /></a></p>\n<p>It will successfully create the Role and User JPA entities and restart the server too.</p>\n<p><a href=\"https://i.stack.imgur.com/l7sgg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l7sgg.png\" alt=\"enter image description here\" /></a></p>\n<p>User:</p>\n<pre><code>// Generated 01-Oct-2023 17:37:04 by Hibernate Tools 5.2.3.Final\n\n\nimport javax.persistence.*;\nimport java.util.HashSet;\nimport java.util.Set;\n\n/**\n * User generated by hbm2java\n */\n@Entity\n@Table(name = &quot;USER&quot;\n        , catalog = &quot;TEST&quot;\n)\npublic class User implements java.io.Serializable {\n\n\n    private int id;\n    private String name;\n    private Set&lt;Role&gt; roles = new HashSet&lt;Role&gt;(0);\n\n    public User() {\n    }\n\n\n    public User(int id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n\n    public User(int id, String name, Set&lt;Role&gt; roles) {\n        this.id = id;\n        this.name = name;\n        this.roles = roles;\n    }\n\n    @Id \n    @Column(name = &quot;ID&quot;, unique = true, nullable = false)\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n\n    @Column(name = &quot;NAME&quot;, nullable = false, length = 50)\n    public String getName() {\n        return this.name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\n    public Set&lt;Role&gt; getRoles() {\n        return this.roles;\n    }\n\n    public void setRoles(Set&lt;Role&gt; roles) {\n        this.roles = roles;\n    }\n\n\n}\n</code></pre>\n<p>Role:</p>\n<pre><code>// Generated 01-Oct-2023 17:37:04 by Hibernate Tools 5.2.3.Final\n\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.ManyToOne;\nimport javax.persistence.Table;\n\n/**\n * Role generated by hbm2java\n */\n@Entity\n@Table(name = &quot;ROLE&quot;\n        , catalog = &quot;TEST&quot;\n)\npublic class Role implements java.io.Serializable {\n\n\n    private int id;\n    private User user;\n    private String name;\n\n    public Role() {\n    }\n\n    public Role(int id, User user, String name) {\n        this.id = id;\n        this.user = user;\n        this.name = name;\n    }\n\n    @Id\n    @Column(name = &quot;ID&quot;, unique = true, nullable = false)\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;FK_USER_ID&quot;, nullable = false)\n    public User getUser() {\n        return this.user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n\n    @Column(name = &quot;NAME&quot;, nullable = false, length = 50)\n    public String getName() {\n        return this.name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n\n}\n</code></pre>\n<p>Now to test whether or not I'm able to do CRUD operation via Spring-Data-JPA, I created an User CrudRepository interface.</p>\n<pre><code>package com.example.hbm2java.springboot.hbm2javaspringbootruntime.persistence.repository;\n\nimport com.example.hbm2java.springboot.hbm2javaspringbootruntime.persistence.User;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface UserRepository extends CrudRepository&lt;User, Integer&gt; {\n}\n</code></pre>\n<p>Also, I updated the existing controller with new endpoint to verify.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;entity&quot;)\npublic class EntityGeneratorController {\n\n    @Autowired\n    private UserRepository repo;\n\n    @PostMapping(&quot;saveUser&quot;)\n    public User saveUser() {\n        User u = new User();\n        u.setId(1);\n        u.setName(&quot;Anish&quot;);\n        return repo.save(u);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<p><a href=\"https://i.stack.imgur.com/hwTeM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hwTeM.png\" alt=\"enter image description here\" /></a></p>\n<p>DB:</p>\n<p><a href=\"https://i.stack.imgur.com/lWb2R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lWb2R.png\" alt=\"enter image description here\" /></a></p>\n<p>This proves that Spring-Data-JPA is working fine.</p>\n<p>Restart logs:</p>\n<p><a href=\"https://i.stack.imgur.com/WfGPJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WfGPJ.png\" alt=\"enter image description here\" /></a></p>\n<p><em><strong>Credits to the blogs that helped me to reach to the solution:</strong></em></p>\n<ul>\n<li>Thanks to <a href=\"http://junjun-java.blogspot.com/2017/06/reverse-engineering-gernerate-java.html\" rel=\"nofollow noreferrer\">Junjun Dachi's Blog</a> for the wonderful example on programmatic <strong>HBM2Java</strong> approach.</li>\n<li><a href=\"https://docs.jboss.org/tools/OLD/2.0.0.GA/hibernatetools/en/html_single/index.html#custom-reveng-strategy\" rel=\"nofollow noreferrer\">JBoss Hibernate Tools Blog</a> on <strong>Reverse Engineering Strategy Example</strong>.</li>\n</ul>\n"}],"owner":{"account_id":2155965,"reputation":687,"user_id":1911196,"accept_rate":71,"display_name":"ndueck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77162490,"answer_count":2,"score":2,"last_activity_date":1696179460,"creation_date":1695305248,"question_id":77151029,"body_markdown":"I would like to create JPA Entities at runtime, based on a given database scheme, that will be polled through a REST-API and I need to register them in the Spring Context. \r\n\r\nThere are two approaches that comes to my mind:\r\n\r\n1. Use a code generator, similiar to hbm2java (hibernate-tools), generate the entities at startup. However I have to restart everytime a table will be added.\r\n\r\n2. Generate code for the entity as well but compile the java code at runtime and register the entity in the spring context manually. \r\n\r\nIt has to be Spring Data JPA, because I want to setup Spring Data (or OData with Spring support) on top.\r\n\r\nIs there an approach to register entities at runtime without creating a POJO/Entity class (as a file)?","title":"Create Spring JPA Entities at runtime","body":"<p>I would like to create JPA Entities at runtime, based on a given database scheme, that will be polled through a REST-API and I need to register them in the Spring Context.</p>\n<p>There are two approaches that comes to my mind:</p>\n<ol>\n<li><p>Use a code generator, similiar to hbm2java (hibernate-tools), generate the entities at startup. However I have to restart everytime a table will be added.</p>\n</li>\n<li><p>Generate code for the entity as well but compile the java code at runtime and register the entity in the spring context manually.</p>\n</li>\n</ol>\n<p>It has to be Spring Data JPA, because I want to setup Spring Data (or OData with Spring support) on top.</p>\n<p>Is there an approach to register entities at runtime without creating a POJO/Entity class (as a file)?</p>\n"},{"tags":["java","spring","maven"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1696180913,"post_id":77211321,"comment_id":136117546,"body_markdown":"question is: what did you search? A lot of the libraries documentation can be easily found by typing the name of the library + javadocs or documentation","body":"question is: what did you search? A lot of the libraries documentation can be easily found by typing the name of the library + javadocs or documentation"}],"answers":[{"tags":[],"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696178757,"creation_date":1696178757,"answer_id":77211400,"question_id":77211321,"body_markdown":"Each library has it&#39;s own site where you can find the documentation of that library. The Maven repository is just the deposit where Maven downloads open-source libraries from. If you need the documentation of Spring, just search for &quot;Spring documentation&quot;.","title":"In MVN Repository, How do people find how to use library? (Spring, Java)","body":"<p>Each library has it's own site where you can find the documentation of that library. The Maven repository is just the deposit where Maven downloads open-source libraries from. If you need the documentation of Spring, just search for &quot;Spring documentation&quot;.</p>\n"}],"owner":{"account_id":15086301,"reputation":1,"user_id":10887431,"display_name":"user10887431"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1696182328,"answer_count":1,"score":-3,"last_activity_date":1696178757,"creation_date":1696177560,"question_id":77211321,"body_markdown":"I&#39;ve added dependency like this to use mysql connection\r\n\r\n[enter image description here][1]\r\n\r\n\r\n\r\nAnd I got to know that libraries are from MVN Repository\r\nI searched for Docs but it wan&#39;t there\r\n\r\n[enter image description here][2]\r\n\r\n\r\n\r\nHow do people find how to use library in MVN Repository?\r\n\r\n\r\n\r\nI have searched in Google, Youtube\r\nAnd lots of info were &#39;How to install from MVN Respository&#39; and &#39;Example codes&#39;\r\n\r\nI want &#39;How to find Docs&#39;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EnCKf.png\r\n  [2]: https://i.stack.imgur.com/uw4lD.png","title":"In MVN Repository, How do people find how to use library? (Spring, Java)","body":"<p>I've added dependency like this to use mysql connection</p>\n<p><a href=\"https://i.stack.imgur.com/EnCKf.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>And I got to know that libraries are from MVN Repository\nI searched for Docs but it wan't there</p>\n<p><a href=\"https://i.stack.imgur.com/uw4lD.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>How do people find how to use library in MVN Repository?</p>\n<p>I have searched in Google, Youtube\nAnd lots of info were 'How to install from MVN Respository' and 'Example codes'</p>\n<p>I want 'How to find Docs'</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":1,"creation_date":1696138885,"post_id":77209360,"comment_id":136113788,"body_markdown":"Please add crash log from the logcat window of your Android Studio","body":"Please add crash log from the logcat window of your Android Studio"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1696142121,"post_id":77209360,"comment_id":136113988,"body_markdown":"If you encounter problems, it&#39;s best to create a [MCVE](https://stackoverflow.com/help/mcve) when posting a question. You posted almost **500** (five hundred) lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way, you increase your chances of being helped. Please take a moment and read [how to ask a question](https://stackoverflow.com/help/how-to-ask).","body":"If you encounter problems, it&#39;s best to create a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> when posting a question. You posted almost <b>500</b> (five hundred) lines of code for this issue. That&#39;s a lot for people to parse and try to debug online. Please edit your question and isolate the problem, in that way, you increase your chances of being helped. Please take a moment and read <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question</a>."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1696142152,"post_id":77209360,"comment_id":136113993,"body_markdown":"Besides that, if the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question.","body":"Besides that, if the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question."},{"owner":{"account_id":29263725,"reputation":13,"user_id":22420024,"display_name":"Rany&#234; Wilames"},"score":0,"creation_date":1696173741,"post_id":77209360,"comment_id":136116761,"body_markdown":"@PawanHarariya added Crash log.","body":"@PawanHarariya added Crash log."},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1696178055,"post_id":77209360,"comment_id":136117207,"body_markdown":"Move `updateNavHeader` from `onCreateView` to `onViewCreated` (so there is actually a root view). See also [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Move <code>updateNavHeader</code> from <code>onCreateView</code> to <code>onViewCreated</code> (so there is actually a root view). See also <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"}],"answers":[{"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696176146,"creation_date":1696175212,"answer_id":77211172,"question_id":77209360,"body_markdown":"To find reference to the views in a fragment, use the parent view. `getView()` returns the parent view after `onCreateView()` and since you are calling `updateNavHeader()` inside the `onCreateView()` its getting null.\r\n\r\nSo, either you can initialize all your view in the `onCreate()` itself or make the `view` global so that you can access it anywhere.\r\n\r\n```\r\n @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n       \r\n        // you can also make this global if you don&#39;t want to initialize your views in onCreate \r\n        View view = inflater.inflate(R.layout.fragment_profile, container, false);\r\n        fAuth = FirebaseAuth.getInstance();\r\n        currentUser = fAuth.getCurrentUser();\r\n\r\n        // get all your view inside the onCreate itself since you have declared them globally\r\n        profileUsername = view.findViewById(R.id.profileUser);\r\n        profileEmail = view.findViewById(R.id.profileEmail);\r\n        profilePassword = view.findViewById(R.id.profilePassword);\r\n        profileImg = view.findViewById(R.id.profileImg);\r\n\r\n        // These two are missing from your code\r\n        titleEmail = view.findViewById(R.id.titleEmail);\r\n        titleUsername = view.findViewById(R.id.titleUsername);\r\n\r\n        updateNavHeader(); // crashing because it called and there is no parent\r\n        return view; // here the parent is returned \r\n\r\n    }\r\n\r\n    private void updateNavHeader() {\r\n        \r\n        \r\n        titleEmail.setText(currentUser.getEmail());\r\n        titleUsername.setText(currentUser.getDisplayName());\r\n        Glide.with(this).load(currentUser.getPhotoUrl()).into(profileImg);\r\n    }\r\n```","title":"Retrieve Data from Firebase and Display in Profile Page - Android Studio","body":"<p>To find reference to the views in a fragment, use the parent view. <code>getView()</code> returns the parent view after <code>onCreateView()</code> and since you are calling <code>updateNavHeader()</code> inside the <code>onCreateView()</code> its getting null.</p>\n<p>So, either you can initialize all your view in the <code>onCreate()</code> itself or make the <code>view</code> global so that you can access it anywhere.</p>\n<pre><code> @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n       \n        // you can also make this global if you don't want to initialize your views in onCreate \n        View view = inflater.inflate(R.layout.fragment_profile, container, false);\n        fAuth = FirebaseAuth.getInstance();\n        currentUser = fAuth.getCurrentUser();\n\n        // get all your view inside the onCreate itself since you have declared them globally\n        profileUsername = view.findViewById(R.id.profileUser);\n        profileEmail = view.findViewById(R.id.profileEmail);\n        profilePassword = view.findViewById(R.id.profilePassword);\n        profileImg = view.findViewById(R.id.profileImg);\n\n        // These two are missing from your code\n        titleEmail = view.findViewById(R.id.titleEmail);\n        titleUsername = view.findViewById(R.id.titleUsername);\n\n        updateNavHeader(); // crashing because it called and there is no parent\n        return view; // here the parent is returned \n\n    }\n\n    private void updateNavHeader() {\n        \n        \n        titleEmail.setText(currentUser.getEmail());\n        titleUsername.setText(currentUser.getDisplayName());\n        Glide.with(this).load(currentUser.getPhotoUrl()).into(profileImg);\n    }\n</code></pre>\n"}],"owner":{"account_id":29263725,"reputation":13,"user_id":22420024,"display_name":"Rany&#234; Wilames"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696178063,"accepted_answer_id":77211172,"answer_count":1,"score":0,"last_activity_date":1696176146,"creation_date":1696138775,"question_id":77209360,"body_markdown":"I am trying to Retrieve user data registered on Firebase and display on the user profile page, like this: [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/I082U.png\r\nHowever, I don&#39;t know if I&#39;m doing it the right way (probably not), since I had problems with ʽfindViewByIDʼ, as I don&#39;t know how to use it in a fragment and I ended up adapting it this way:\r\n\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                                 Bundle savedInstanceState) {\r\n            View view = inflater.inflate(R.layout.fragment_profile, container, false);\r\n            \r\n            return view;\r\n\r\n\r\nIn the end, when I ran the project, when I clicked to access the profile page, the application crashed before anything even appeared. If possible, could you help me find the error and **make the data actually shown on the page**?\r\n\r\nHere are the codes:\r\n\r\n**fragment_profile.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:background=&quot;@drawable/loginbkg&quot;\r\n        tools:context=&quot;.ProfileFragment&quot;&gt;\r\n\r\n        &lt;com.google.android.material.circularreveal.cardview.CircularRevealCardView\r\n            android:id=&quot;@+id/circularRevealCardView&quot;\r\n            android:layout_width=&quot;90dp&quot;\r\n            android:layout_height=&quot;90dp&quot;\r\n            android:layout_marginTop=&quot;35dp&quot;\r\n            android:background=&quot;@color/white&quot;\r\n            app:cardElevation=&quot;4dp&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:shapeAppearanceOverlay=&quot;@style/circular&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:layout_width=&quot;100dp&quot;\r\n            android:layout_height=&quot;100dp&quot;\r\n            android:id=&quot;@+id/profileImg&quot;\r\n            android:elevation=&quot;8dp&quot;\r\n            android:layout_marginTop=&quot;30dp&quot;\r\n            android:src=&quot;@drawable/profile_null&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:shapeAppearanceOverlay=&quot;@style/roundedImageViewRounded&quot;/&gt;\r\n\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/titleUsername&quot;\r\n            android:layout_marginTop=&quot;10dp&quot;\r\n            android:text=&quot;Name&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@id/profileImg&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@id/profileImg&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/profileImg&quot;/&gt;\r\n        &lt;TextView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/titleEmail&quot;\r\n            android:text=&quot;Email&quot;\r\n            android:textColor=&quot;@color/white&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@id/titleUsername&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@id/titleUsername&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/titleUsername&quot;/&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/linearLayout&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            android:padding=&quot;10dp&quot;\r\n            android:background=&quot;@drawable/custom_profilelinear&quot;\r\n            android:layout_marginStart=&quot;24dp&quot;\r\n            android:layout_marginEnd=&quot;24dp&quot;\r\n            android:layout_marginTop=&quot;30dp&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/titleEmail&quot;&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;32dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_margin=&quot;10dp&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:elevation=&quot;5dp&quot;\r\n                    android:orientation=&quot;vertical&quot;\r\n                    android:padding=&quot;8dp&quot;&gt;\r\n\r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/followersNo&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;60dp&quot;\r\n                        android:gravity=&quot;center&quot;\r\n                        android:text=&quot;0&quot;\r\n                        android:textAlignment=&quot;center&quot;\r\n                        android:textColor=&quot;@color/pinks&quot;\r\n                        android:textSize=&quot;26sp&quot;\r\n                        android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/followers&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;Seguidores&quot;\r\n                        android:textAlignment=&quot;center&quot;\r\n                        android:textColor=&quot;@color/pinks&quot;\r\n                        android:textSize=&quot;16sp&quot; /&gt;\r\n                &lt;/LinearLayout&gt;\r\n\r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;32dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_margin=&quot;10dp&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:elevation=&quot;5dp&quot;\r\n                    android:orientation=&quot;vertical&quot;\r\n                    android:padding=&quot;8dp&quot;&gt;\r\n\r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/followingNo&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;60dp&quot;\r\n                        android:gravity=&quot;center&quot;\r\n                        android:text=&quot;0&quot;\r\n                        android:textAlignment=&quot;center&quot;\r\n                        android:textColor=&quot;@color/pinks&quot;\r\n                        android:textSize=&quot;26sp&quot;\r\n                        android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/following&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;Seguindo&quot;\r\n                        android:textAlignment=&quot;center&quot;\r\n                        android:textColor=&quot;@color/pinks&quot;\r\n                        android:textSize=&quot;16sp&quot; /&gt;\r\n                &lt;/LinearLayout&gt;\r\n            &lt;/LinearLayout&gt;\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:layout_marginLeft=&quot;10dp&quot;\r\n                android:layout_marginRight=&quot;10dp&quot;\r\n                android:layout_marginBottom=&quot;10dp&quot;\r\n                android:layout_marginTop=&quot;20dp&quot;\r\n                android:orientation=&quot;horizontal&quot;&gt;\r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/user&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:text=&quot;Usu&#225;rio&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    android:textColor=&quot;@color/pinks&quot;\r\n                    android:textSize=&quot;18sp&quot;/&gt;\r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/profileUser&quot;\r\n                    android:text=&quot;username&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:textAlignment=&quot;viewEnd&quot;\r\n                    android:textColor=&quot;@color/pink&quot;\r\n                    android:textSize=&quot;18sp&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n            &lt;androidx.appcompat.widget.AppCompatImageView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;1dp&quot;\r\n                android:layout_margin=&quot;10dp&quot;\r\n                android:alpha=&quot;0.5&quot;\r\n                android:background=&quot;@color/pinks&quot;/&gt;\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_margin=&quot;10dp&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:orientation=&quot;horizontal&quot;&gt;\r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/email&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:text=&quot;Email&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    android:textColor=&quot;@color/pinks&quot;\r\n                    android:textSize=&quot;18sp&quot;/&gt;\r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/profileEmail&quot;\r\n                    android:text=&quot;email&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:textAlignment=&quot;viewEnd&quot;\r\n                    android:textColor=&quot;@color/pink&quot;\r\n                    android:textSize=&quot;18sp&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n            &lt;androidx.appcompat.widget.AppCompatImageView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;1dp&quot;\r\n                android:layout_margin=&quot;10dp&quot;\r\n                android:alpha=&quot;0.5&quot;\r\n                android:background=&quot;@color/pinks&quot;/&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_margin=&quot;10dp&quot;\r\n                android:padding=&quot;8dp&quot;\r\n                android:orientation=&quot;horizontal&quot;&gt;\r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/password&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:text=&quot;Senha&quot;\r\n                    android:textStyle=&quot;bold&quot;\r\n                    android:textColor=&quot;@color/pinks&quot;\r\n                    android:textSize=&quot;18sp&quot;/&gt;\r\n                &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/profilePassword&quot;\r\n                    android:text=&quot;password&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:textAlignment=&quot;viewEnd&quot;\r\n                    android:textColor=&quot;@color/pinks&quot;\r\n                    android:textSize=&quot;18sp&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n        &lt;/LinearLayout&gt;\r\n        &lt;Button\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;60dp&quot;\r\n            android:id=&quot;@+id/editButton&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:text=&quot;Editar Perfil&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:backgroundTint=&quot;@color/pinks&quot;\r\n            app:cornerRadius = &quot;20dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@id/linearLayout&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@id/linearLayout&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/linearLayout&quot;/&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n**ProfileFragment**\r\n\r\n    package com.ete.smarthub;\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.fragment.app.Fragment;\r\n\r\n    import android.os.Bundle;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.ImageView;\r\n    import android.widget.TextView;\r\n\r\n    import com.bumptech.glide.Glide;\r\n    import com.google.android.material.navigation.NavigationView;\r\n    import com.google.firebase.auth.FirebaseAuth;\r\n    import com.google.firebase.auth.FirebaseUser;\r\n\r\n    public class ProfileFragment extends Fragment {\r\n\r\n        TextView profileUsername, profileEmail, profilePassword;\r\n        TextView titleUsername, titleEmail;\r\n        ImageView profileImg;\r\n        FirebaseAuth fAuth;\r\n        FirebaseUser currentUser;\r\n\r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                                 Bundle savedInstanceState) {\r\n            View view = inflater.inflate(R.layout.fragment_profile, container, false);\r\n            fAuth = FirebaseAuth.getInstance();\r\n            currentUser = fAuth.getCurrentUser();\r\n\r\n\r\n            updateNavHeader();\r\n            return view;\r\n\r\n        }\r\n\r\n        private void updateNavHeader() {\r\n            profileUsername = getView().findViewById(R.id.profileUser);\r\n            profileEmail = getView().findViewById(R.id.profileEmail);\r\n            profilePassword = getView().findViewById(R.id.profilePassword);\r\n            profileImg = getView().findViewById(R.id.profileImg);\r\n\r\n            titleEmail.setText(currentUser.getEmail());\r\n            titleUsername.setText(currentUser.getDisplayName());\r\n\r\n            Glide.with(this).load(currentUser.getPhotoUrl()).into(profileImg);\r\n        }\r\n    }\r\n\r\n\r\n**FormLogin**\r\n\r\n    package com.ete.smarthub;\r\n\r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import android.app.AlertDialog;\r\n    import android.content.DialogInterface;\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.text.TextUtils;\r\n    import android.util.Patterns;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n\r\n    import com.google.android.gms.tasks.OnCompleteListener;\r\n    import com.google.android.gms.tasks.OnFailureListener;\r\n    import com.google.android.gms.tasks.OnSuccessListener;\r\n    import com.google.android.gms.tasks.Task;\r\n    import com.google.firebase.auth.AuthResult;\r\n    import com.google.firebase.auth.FirebaseAuth;\r\n    import com.google.firebase.auth.FirebaseUser;\r\n    import com.google.firebase.database.DataSnapshot;\r\n    import com.google.firebase.database.DatabaseError;\r\n    import com.google.firebase.database.DatabaseReference;\r\n    import com.google.firebase.database.FirebaseDatabase;\r\n    import com.google.firebase.database.Query;\r\n    import com.google.firebase.database.ValueEventListener;\r\n\r\n    public class FormLogin extends AppCompatActivity {\r\n        EditText loginEmail;\r\n        EditText loginPassword;\r\n        TextView signupText, forgetTextLink;\r\n        Button loginButton;\r\n        FirebaseAuth fAuth;\r\n\r\n\r\n\r\n        @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n            FirebaseUser user = fAuth.getCurrentUser();\r\n\r\n            if(user != null) {\r\n\r\n                startActivity(new Intent(FormLogin.this, Drawer.class));\r\n                finish();\r\n\r\n            }\r\n        }\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_login);\r\n\r\n            loginEmail = findViewById(R.id.login_email);\r\n            loginPassword = findViewById(R.id.login_password);\r\n            loginButton = findViewById(R.id.login_button);\r\n            signupText = findViewById(R.id.signupText);\r\n            forgetTextLink = findViewById(R.id.forgetText);\r\n\r\n\r\n\r\n            fAuth = FirebaseAuth.getInstance();\r\n\r\n            loginButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    String Email = loginEmail.getText().toString();\r\n                    String Senha = loginPassword.getText().toString();\r\n\r\n                if (!Email.isEmpty() &amp;&amp; Patterns.EMAIL_ADDRESS.matcher(Email).matches()){\r\n                    if (!Senha.isEmpty()){\r\n                        fAuth.signInWithEmailAndPassword(Email, Senha)\r\n                                .addOnSuccessListener(new OnSuccessListener&lt;AuthResult&gt;() {\r\n                                    @Override\r\n                                    public void onSuccess(AuthResult authResult) {\r\n                                        Toast.makeText(FormLogin.this, &quot;Login Efetuado!&quot; , Toast.LENGTH_SHORT).show();\r\n                                        startActivity(new Intent(FormLogin.this, Drawer.class));\r\n                                        finish();\r\n                                    }\r\n                                }).addOnFailureListener(new OnFailureListener() {\r\n                                    @Override\r\n                                    public void onFailure(@NonNull Exception e) {\r\n                                        Toast.makeText(FormLogin.this, &quot;Login Falhou!&quot; , Toast.LENGTH_SHORT).show();\r\n                                    }\r\n                                });\r\n                        }\r\n                    else{\r\n                        loginPassword.setError(&quot;Preencha todos os campos!&quot;);\r\n                    }\r\n                    }else if (Email.isEmpty()){\r\n                        loginEmail.setError(&quot;Preencha todos os campos!&quot;);\r\n                    }else {\r\n                        loginEmail.setError(&quot;Informe um Email v&#225;lido&quot;);\r\n                    }\r\n                }\r\n                });\r\n\r\n                forgetTextLink.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n\r\n                        final EditText resetMail = new EditText(v.getContext());\r\n                        final AlertDialog.Builder passwordResetDialog = new AlertDialog.Builder(v.getContext());\r\n                        passwordResetDialog.setTitle(&quot;Redefinir Senha?&quot;);\r\n                        passwordResetDialog.setMessage(&quot;Para redefinir sua senha, informe o e-mail&quot; +\r\n                                &quot; cadastrado na sua conta e lhe enviaremos um link com as instru&#231;&#245;es.&quot;);\r\n                        passwordResetDialog.setView(resetMail);\r\n\r\n                        passwordResetDialog.setPositiveButton(&quot;Enviar&quot;, new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                // extract the email and send reset link\r\n                                String mail = resetMail.getText().toString();\r\n                                fAuth.sendPasswordResetEmail(mail).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                                    @Override\r\n                                    public void onSuccess(Void aVoid) {\r\n                                        Toast.makeText(FormLogin.this, &quot;Link de redefini&#231;&#227;o enviado para o e-mail informado.&quot;, Toast.LENGTH_SHORT).show();\r\n                                    }\r\n                                }).addOnFailureListener(new OnFailureListener() {\r\n                                    @Override\r\n                                    public void onFailure(@NonNull Exception e) {\r\n                                        Toast.makeText(FormLogin.this, &quot;Erro! Link de redefini&#231;&#227;o n&#227;o enviado&quot;, Toast.LENGTH_SHORT).show();\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                        passwordResetDialog.setNegativeButton(&quot;Fechar&quot;, new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialog, int which) {\r\n                                // close the dialog\r\n                            }\r\n                        });\r\n\r\n                        passwordResetDialog.create().show();\r\n                    }\r\n                });\r\n            signupText.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    Intent intent = new Intent(FormLogin.this, FormCadastro.class);\r\n                    startActivity(intent);\r\n            };\r\n        });\r\n    }\r\n    }\r\n\r\n\r\n**Log Cat:**\r\n\r\n&gt; FATAL EXCEPTION: main\r\n                                                                                                    Process: com.ete.smarthub, PID: 3812\r\n                                                                                                    java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.view.View android.view.View.findViewById(int)&#39; on a null object reference\r\n                                                                                                    \tat com.ete.smarthub.ProfileFragment.updateNavHeader(ProfileFragment.java:40)\r\n                                                                                                    \tat com.ete.smarthub.ProfileFragment.onCreateView(ProfileFragment.java:34)\r\n                                                                                                    \tat androidx.fragment.app.Fragment.performCreateView(Fragment.java:2963)\r\n                                                                                                    \tat androidx.fragment.app.FragmentStateManager.createView(FragmentStateManager.java:518)\r\n                                                                                                    \tat androidx.fragment.app.FragmentStateManager.moveToExpectedState(FragmentStateManager.java:282)\r\n                                                                                                    \tat androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:2189)\r\n                                                                                                    \tat androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:2100)\r\n                                                                                                    \tat androidx.fragment.app.FragmentManager.execPendingActions(FragmentManager.java:2002)\r\n                                                                                                    \tat androidx.fragment.app.FragmentManager$5.run(FragmentManager.java:524)\r\n                                                                                                    \tat android.os.Handler.handleCallback(Handler.java:938)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n                                                                                                    \tat android.os.Looper.loopOnce(Looper.java:201)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:288)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:7839)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)","title":"Retrieve Data from Firebase and Display in Profile Page - Android Studio","body":"<p>I am trying to Retrieve user data registered on Firebase and display on the user profile page, like this: <a href=\"https://i.stack.imgur.com/I082U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I082U.png\" alt=\"enter image description here\" /></a></p>\n<p>However, I don't know if I'm doing it the right way (probably not), since I had problems with ʽfindViewByIDʼ, as I don't know how to use it in a fragment and I ended up adapting it this way:</p>\n<pre><code>public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_profile, container, false);\n        \n        return view;\n</code></pre>\n<p>In the end, when I ran the project, when I clicked to access the profile page, the application crashed before anything even appeared. If possible, could you help me find the error and <strong>make the data actually shown on the page</strong>?</p>\n<p>Here are the codes:</p>\n<p><strong>fragment_profile.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@drawable/loginbkg&quot;\n    tools:context=&quot;.ProfileFragment&quot;&gt;\n\n    &lt;com.google.android.material.circularreveal.cardview.CircularRevealCardView\n        android:id=&quot;@+id/circularRevealCardView&quot;\n        android:layout_width=&quot;90dp&quot;\n        android:layout_height=&quot;90dp&quot;\n        android:layout_marginTop=&quot;35dp&quot;\n        android:background=&quot;@color/white&quot;\n        app:cardElevation=&quot;4dp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:shapeAppearanceOverlay=&quot;@style/circular&quot; /&gt;\n\n    &lt;ImageView\n        android:layout_width=&quot;100dp&quot;\n        android:layout_height=&quot;100dp&quot;\n        android:id=&quot;@+id/profileImg&quot;\n        android:elevation=&quot;8dp&quot;\n        android:layout_marginTop=&quot;30dp&quot;\n        android:src=&quot;@drawable/profile_null&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:shapeAppearanceOverlay=&quot;@style/roundedImageViewRounded&quot;/&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/titleUsername&quot;\n        android:layout_marginTop=&quot;10dp&quot;\n        android:text=&quot;Name&quot;\n        android:textColor=&quot;@color/white&quot;\n        android:textSize=&quot;20sp&quot;\n        android:textStyle=&quot;bold&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@id/profileImg&quot;\n        app:layout_constraintStart_toStartOf=&quot;@id/profileImg&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/profileImg&quot;/&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/titleEmail&quot;\n        android:text=&quot;Email&quot;\n        android:textColor=&quot;@color/white&quot;\n        android:textSize=&quot;18sp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@id/titleUsername&quot;\n        app:layout_constraintStart_toStartOf=&quot;@id/titleUsername&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/titleUsername&quot;/&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/linearLayout&quot;\n        android:orientation=&quot;vertical&quot;\n        android:padding=&quot;10dp&quot;\n        android:background=&quot;@drawable/custom_profilelinear&quot;\n        android:layout_marginStart=&quot;24dp&quot;\n        android:layout_marginEnd=&quot;24dp&quot;\n        android:layout_marginTop=&quot;30dp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/titleEmail&quot;&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;horizontal&quot;&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;32dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_margin=&quot;10dp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:elevation=&quot;5dp&quot;\n                android:orientation=&quot;vertical&quot;\n                android:padding=&quot;8dp&quot;&gt;\n\n                &lt;TextView\n                    android:id=&quot;@+id/followersNo&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;60dp&quot;\n                    android:gravity=&quot;center&quot;\n                    android:text=&quot;0&quot;\n                    android:textAlignment=&quot;center&quot;\n                    android:textColor=&quot;@color/pinks&quot;\n                    android:textSize=&quot;26sp&quot;\n                    android:textStyle=&quot;bold&quot; /&gt;\n\n                &lt;TextView\n                    android:id=&quot;@+id/followers&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;Seguidores&quot;\n                    android:textAlignment=&quot;center&quot;\n                    android:textColor=&quot;@color/pinks&quot;\n                    android:textSize=&quot;16sp&quot; /&gt;\n            &lt;/LinearLayout&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;32dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_margin=&quot;10dp&quot;\n                android:layout_weight=&quot;1&quot;\n                android:elevation=&quot;5dp&quot;\n                android:orientation=&quot;vertical&quot;\n                android:padding=&quot;8dp&quot;&gt;\n\n                &lt;TextView\n                    android:id=&quot;@+id/followingNo&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;60dp&quot;\n                    android:gravity=&quot;center&quot;\n                    android:text=&quot;0&quot;\n                    android:textAlignment=&quot;center&quot;\n                    android:textColor=&quot;@color/pinks&quot;\n                    android:textSize=&quot;26sp&quot;\n                    android:textStyle=&quot;bold&quot; /&gt;\n\n                &lt;TextView\n                    android:id=&quot;@+id/following&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:text=&quot;Seguindo&quot;\n                    android:textAlignment=&quot;center&quot;\n                    android:textColor=&quot;@color/pinks&quot;\n                    android:textSize=&quot;16sp&quot; /&gt;\n            &lt;/LinearLayout&gt;\n        &lt;/LinearLayout&gt;\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:padding=&quot;8dp&quot;\n            android:layout_marginLeft=&quot;10dp&quot;\n            android:layout_marginRight=&quot;10dp&quot;\n            android:layout_marginBottom=&quot;10dp&quot;\n            android:layout_marginTop=&quot;20dp&quot;\n            android:orientation=&quot;horizontal&quot;&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/user&quot;\n                android:layout_weight=&quot;1&quot;\n                android:text=&quot;Usuário&quot;\n                android:textStyle=&quot;bold&quot;\n                android:textColor=&quot;@color/pinks&quot;\n                android:textSize=&quot;18sp&quot;/&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/profileUser&quot;\n                android:text=&quot;username&quot;\n                android:layout_weight=&quot;1&quot;\n                android:textAlignment=&quot;viewEnd&quot;\n                android:textColor=&quot;@color/pink&quot;\n                android:textSize=&quot;18sp&quot;/&gt;\n        &lt;/LinearLayout&gt;\n        &lt;androidx.appcompat.widget.AppCompatImageView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;1dp&quot;\n            android:layout_margin=&quot;10dp&quot;\n            android:alpha=&quot;0.5&quot;\n            android:background=&quot;@color/pinks&quot;/&gt;\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_margin=&quot;10dp&quot;\n            android:padding=&quot;8dp&quot;\n            android:orientation=&quot;horizontal&quot;&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/email&quot;\n                android:layout_weight=&quot;1&quot;\n                android:text=&quot;Email&quot;\n                android:textStyle=&quot;bold&quot;\n                android:textColor=&quot;@color/pinks&quot;\n                android:textSize=&quot;18sp&quot;/&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/profileEmail&quot;\n                android:text=&quot;email&quot;\n                android:layout_weight=&quot;1&quot;\n                android:textAlignment=&quot;viewEnd&quot;\n                android:textColor=&quot;@color/pink&quot;\n                android:textSize=&quot;18sp&quot;/&gt;\n        &lt;/LinearLayout&gt;\n        &lt;androidx.appcompat.widget.AppCompatImageView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;1dp&quot;\n            android:layout_margin=&quot;10dp&quot;\n            android:alpha=&quot;0.5&quot;\n            android:background=&quot;@color/pinks&quot;/&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_margin=&quot;10dp&quot;\n            android:padding=&quot;8dp&quot;\n            android:orientation=&quot;horizontal&quot;&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/password&quot;\n                android:layout_weight=&quot;1&quot;\n                android:text=&quot;Senha&quot;\n                android:textStyle=&quot;bold&quot;\n                android:textColor=&quot;@color/pinks&quot;\n                android:textSize=&quot;18sp&quot;/&gt;\n            &lt;TextView\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/profilePassword&quot;\n                android:text=&quot;password&quot;\n                android:layout_weight=&quot;1&quot;\n                android:textAlignment=&quot;viewEnd&quot;\n                android:textColor=&quot;@color/pinks&quot;\n                android:textSize=&quot;18sp&quot;/&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/LinearLayout&gt;\n    &lt;Button\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;60dp&quot;\n        android:id=&quot;@+id/editButton&quot;\n        android:gravity=&quot;center&quot;\n        android:text=&quot;Editar Perfil&quot;\n        android:textSize=&quot;18sp&quot;\n        android:backgroundTint=&quot;@color/pinks&quot;\n        app:cornerRadius = &quot;20dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@id/linearLayout&quot;\n        app:layout_constraintStart_toStartOf=&quot;@id/linearLayout&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/linearLayout&quot;/&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p><strong>ProfileFragment</strong></p>\n<pre><code>package com.ete.smarthub;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.fragment.app.Fragment;\n\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\nimport android.widget.TextView;\n\nimport com.bumptech.glide.Glide;\nimport com.google.android.material.navigation.NavigationView;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.FirebaseUser;\n\npublic class ProfileFragment extends Fragment {\n\n    TextView profileUsername, profileEmail, profilePassword;\n    TextView titleUsername, titleEmail;\n    ImageView profileImg;\n    FirebaseAuth fAuth;\n    FirebaseUser currentUser;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_profile, container, false);\n        fAuth = FirebaseAuth.getInstance();\n        currentUser = fAuth.getCurrentUser();\n\n\n        updateNavHeader();\n        return view;\n\n    }\n\n    private void updateNavHeader() {\n        profileUsername = getView().findViewById(R.id.profileUser);\n        profileEmail = getView().findViewById(R.id.profileEmail);\n        profilePassword = getView().findViewById(R.id.profilePassword);\n        profileImg = getView().findViewById(R.id.profileImg);\n\n        titleEmail.setText(currentUser.getEmail());\n        titleUsername.setText(currentUser.getDisplayName());\n\n        Glide.with(this).load(currentUser.getPhotoUrl()).into(profileImg);\n    }\n}\n</code></pre>\n<p><strong>FormLogin</strong></p>\n<pre><code>package com.ete.smarthub;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.app.AlertDialog;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.text.TextUtils;\nimport android.util.Patterns;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.OnFailureListener;\nimport com.google.android.gms.tasks.OnSuccessListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.auth.AuthResult;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.FirebaseUser;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.Query;\nimport com.google.firebase.database.ValueEventListener;\n\npublic class FormLogin extends AppCompatActivity {\n    EditText loginEmail;\n    EditText loginPassword;\n    TextView signupText, forgetTextLink;\n    Button loginButton;\n    FirebaseAuth fAuth;\n\n\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        FirebaseUser user = fAuth.getCurrentUser();\n\n        if(user != null) {\n\n            startActivity(new Intent(FormLogin.this, Drawer.class));\n            finish();\n\n        }\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login);\n\n        loginEmail = findViewById(R.id.login_email);\n        loginPassword = findViewById(R.id.login_password);\n        loginButton = findViewById(R.id.login_button);\n        signupText = findViewById(R.id.signupText);\n        forgetTextLink = findViewById(R.id.forgetText);\n\n\n\n        fAuth = FirebaseAuth.getInstance();\n\n        loginButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String Email = loginEmail.getText().toString();\n                String Senha = loginPassword.getText().toString();\n\n            if (!Email.isEmpty() &amp;&amp; Patterns.EMAIL_ADDRESS.matcher(Email).matches()){\n                if (!Senha.isEmpty()){\n                    fAuth.signInWithEmailAndPassword(Email, Senha)\n                            .addOnSuccessListener(new OnSuccessListener&lt;AuthResult&gt;() {\n                                @Override\n                                public void onSuccess(AuthResult authResult) {\n                                    Toast.makeText(FormLogin.this, &quot;Login Efetuado!&quot; , Toast.LENGTH_SHORT).show();\n                                    startActivity(new Intent(FormLogin.this, Drawer.class));\n                                    finish();\n                                }\n                            }).addOnFailureListener(new OnFailureListener() {\n                                @Override\n                                public void onFailure(@NonNull Exception e) {\n                                    Toast.makeText(FormLogin.this, &quot;Login Falhou!&quot; , Toast.LENGTH_SHORT).show();\n                                }\n                            });\n                    }\n                else{\n                    loginPassword.setError(&quot;Preencha todos os campos!&quot;);\n                }\n                }else if (Email.isEmpty()){\n                    loginEmail.setError(&quot;Preencha todos os campos!&quot;);\n                }else {\n                    loginEmail.setError(&quot;Informe um Email válido&quot;);\n                }\n            }\n            });\n\n            forgetTextLink.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n\n                    final EditText resetMail = new EditText(v.getContext());\n                    final AlertDialog.Builder passwordResetDialog = new AlertDialog.Builder(v.getContext());\n                    passwordResetDialog.setTitle(&quot;Redefinir Senha?&quot;);\n                    passwordResetDialog.setMessage(&quot;Para redefinir sua senha, informe o e-mail&quot; +\n                            &quot; cadastrado na sua conta e lhe enviaremos um link com as instruções.&quot;);\n                    passwordResetDialog.setView(resetMail);\n\n                    passwordResetDialog.setPositiveButton(&quot;Enviar&quot;, new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialog, int which) {\n                            // extract the email and send reset link\n                            String mail = resetMail.getText().toString();\n                            fAuth.sendPasswordResetEmail(mail).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                                @Override\n                                public void onSuccess(Void aVoid) {\n                                    Toast.makeText(FormLogin.this, &quot;Link de redefinição enviado para o e-mail informado.&quot;, Toast.LENGTH_SHORT).show();\n                                }\n                            }).addOnFailureListener(new OnFailureListener() {\n                                @Override\n                                public void onFailure(@NonNull Exception e) {\n                                    Toast.makeText(FormLogin.this, &quot;Erro! Link de redefinição não enviado&quot;, Toast.LENGTH_SHORT).show();\n                                }\n                            });\n                        }\n                    });\n\n                    passwordResetDialog.setNegativeButton(&quot;Fechar&quot;, new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialog, int which) {\n                            // close the dialog\n                        }\n                    });\n\n                    passwordResetDialog.create().show();\n                }\n            });\n        signupText.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Intent intent = new Intent(FormLogin.this, FormCadastro.class);\n                startActivity(intent);\n        };\n    });\n}\n}\n</code></pre>\n<p><strong>Log Cat:</strong></p>\n<blockquote>\n<p>FATAL EXCEPTION: main\nProcess: com.ete.smarthub, PID: 3812\njava.lang.NullPointerException: Attempt to invoke virtual method 'android.view.View android.view.View.findViewById(int)' on a null object reference\nat com.ete.smarthub.ProfileFragment.updateNavHeader(ProfileFragment.java:40)\nat com.ete.smarthub.ProfileFragment.onCreateView(ProfileFragment.java:34)\nat androidx.fragment.app.Fragment.performCreateView(Fragment.java:2963)\nat androidx.fragment.app.FragmentStateManager.createView(FragmentStateManager.java:518)\nat androidx.fragment.app.FragmentStateManager.moveToExpectedState(FragmentStateManager.java:282)\nat androidx.fragment.app.FragmentManager.executeOpsTogether(FragmentManager.java:2189)\nat androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute(FragmentManager.java:2100)\nat androidx.fragment.app.FragmentManager.execPendingActions(FragmentManager.java:2002)\nat androidx.fragment.app.FragmentManager$5.run(FragmentManager.java:524)\nat android.os.Handler.handleCallback(Handler.java:938)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loopOnce(Looper.java:201)\nat android.os.Looper.loop(Looper.java:288)\nat android.app.ActivityThread.main(ActivityThread.java:7839)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)</p>\n</blockquote>\n"},{"tags":["java","combinatorics"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1696118269,"post_id":77208634,"comment_id":136112883,"body_markdown":"By the way, You may hard code `10 ^ 9 + 7` as `1_000_000_007`.","body":"By the way, You may hard code <code>10 ^ 9 + 7</code> as <code>1_000_000_007</code>."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1696119544,"post_id":77208634,"comment_id":136112939,"body_markdown":"You are almost surely running into loss of precision (i.e. rounding errors) in float calculations.  Please see [What Every Computer Scientist Should Know About Floating-Point Arithmetic](https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) and \n[Is Floating Point Broken?](https://stackoverflow.com/q/588004/18157)  `double` can represent very large numbers, but with limited precision.  `1E30` and `1E30+1` are indistinguishable.","body":"You are almost surely running into loss of precision (i.e. rounding errors) in float calculations.  Please see <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a> and  <a href=\"https://stackoverflow.com/q/588004/18157\">Is Floating Point Broken?</a>  <code>double</code> can represent very large numbers, but with limited precision.  <code>1E30</code> and <code>1E30+1</code> are indistinguishable."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1696126425,"post_id":77208634,"comment_id":136113228,"body_markdown":"You really shouldn&#39;t be using doubles for this.  Use ints or longs.","body":"You really shouldn&#39;t be using doubles for this.  Use ints or longs."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1696130320,"post_id":77208634,"comment_id":136113390,"body_markdown":"@LouisWasserman this won&#39;t work if OP changes all the doubles to ints or longs, because they&#39;ll get an integer division inside the `for` loop.  They&#39;ll also need to fix the `*=` operation.  This algorithm looks OK to me, but the first line inside the loop probably needs to be `binomialCoefficient = binomialCoefficient * (nPar + 1 - i) / i;` where all the variables are `long`.  That forces the multiplication to happen before the division, which removes the integer division problem.","body":"@LouisWasserman this won&#39;t work if OP changes all the doubles to ints or longs, because they&#39;ll get an integer division inside the <code>for</code> loop.  They&#39;ll also need to fix the <code>*=</code> operation.  This algorithm looks OK to me, but the first line inside the loop probably needs to be <code>binomialCoefficient = binomialCoefficient * (nPar + 1 - i) &#47; i;</code> where all the variables are <code>long</code>.  That forces the multiplication to happen before the division, which removes the integer division problem."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1696131378,"post_id":77208634,"comment_id":136113441,"body_markdown":"@DawoodibnKareem if you can divide `x` by `y` that does not mean you can divide `mod(x,k)` by `y`, the idea of getting remainder of intermediate result is wrong when we use division.","body":"@DawoodibnKareem if you can divide <code>x</code> by <code>y</code> that does not mean you can divide <code>mod(x,k)</code> by <code>y</code>, the idea of getting remainder of intermediate result is wrong when we use division."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1696131771,"post_id":77208634,"comment_id":136113460,"body_markdown":"@AndreyB.Panfilov That&#39;s true in general, yes, but `10^9+7` happens to be prime, and since one of the conditions of the question is `n &lt;= 2000`, in THIS PARTICULAR CASE, the division will always come out to an integer, provided you multiply first.","body":"@AndreyB.Panfilov That&#39;s true in general, yes, but <code>10^9+7</code> happens to be prime, and since one of the conditions of the question is <code>n &lt;= 2000</code>, in THIS PARTICULAR CASE, the division will always come out to an integer, provided you multiply first."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1696132413,"post_id":77208634,"comment_id":136113479,"body_markdown":"that does not make sense whether it is prime or not, imagine you got `1_000_000_008` at previous step and the next divisor is `2`, that is obvious you will get the wrong result on the next step if you perform modulo division.","body":"that does not make sense whether it is prime or not, imagine you got <code>1_000_000_008</code> at previous step and the next divisor is <code>2</code>, that is obvious you will get the wrong result on the next step if you perform modulo division."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1696132502,"post_id":77208634,"comment_id":136113487,"body_markdown":"Just switching to longs won&#39;t help, the problem is both `*= ((nPar + 1 - i) / i)` and `%= mPar` operations may produce **wrong result**. Another formula which does not involve division is required, for example `(n,k)=(n-1,k-1)+(n-1,k)`","body":"Just switching to longs won&#39;t help, the problem is both <code>*= ((nPar + 1 - i) &#47; i)</code> and <code>%= mPar</code> operations may produce <b>wrong result</b>. Another formula which does not involve division is required, for example <code>(n,k)=(n-1,k-1)+(n-1,k)</code>"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1696133744,"post_id":77208634,"comment_id":136113550,"body_markdown":"Ah yes, I spoke too hastily.  I retract my earlier position.  @AndreyB.Panfilov is absolutely right - we can&#39;t just simulate modular division by doing integer division and hoping for the best.  We could use the `BigInteger` class, which has a `modInverse` method, so we could invert the divisor and multiply.  Or we could use the recursive formula, which requires lots of additions.  It&#39;s unclear to me which would perform better - perhaps some experimentation is in order.","body":"Ah yes, I spoke too hastily.  I retract my earlier position.  @AndreyB.Panfilov is absolutely right - we can&#39;t just simulate modular division by doing integer division and hoping for the best.  We could use the <code>BigInteger</code> class, which has a <code>modInverse</code> method, so we could invert the divisor and multiply.  Or we could use the recursive formula, which requires lots of additions.  It&#39;s unclear to me which would perform better - perhaps some experimentation is in order."},{"owner":{"account_id":29571591,"reputation":23,"user_id":22663624,"display_name":"Eragonrider"},"score":0,"creation_date":1696152884,"post_id":77208634,"comment_id":136114786,"body_markdown":"I changed the *= to binomialCoefficient * (nPar + 1 - i)/i and it got closer to the expected result of (100, 50) just like Dawood ibn Kareem suggested. The result was 500657818.","body":"I changed the *= to binomialCoefficient * (nPar + 1 - i)/i and it got closer to the expected result of (100, 50) just like Dawood ibn Kareem suggested. The result was 500657818."},{"owner":{"account_id":29571591,"reputation":23,"user_id":22663624,"display_name":"Eragonrider"},"score":0,"creation_date":1696153891,"post_id":77208634,"comment_id":136114860,"body_markdown":"Just like some suggested, there is a recurssive form that uses addition. I tried that solution but it just gets stuck and times out for the second test case.","body":"Just like some suggested, there is a recurssive form that uses addition. I tried that solution but it just gets stuck and times out for the second test case."}],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1696175836,"creation_date":1696166538,"answer_id":77210636,"question_id":77208634,"body_markdown":"Well, as I have mentioned in comments, you can&#39;t use integer division together with modular division, otherwise you will get wrong results. That means you need to find some kind of recurrent relation or algorithm which does not involve division, I do see following options:\r\n\r\n**I**. the obvious recurrent relation is based on Pascal triangle:\r\n\r\n`(n,k) = (n-1,k-1) + (n-1,k)`\r\n\r\nit does not involve division, hence we may perform our computations using following idea:\r\n\r\n`mod((n,k),m) = mod((n-1,k-1),m) + mod((n-1,k),m)`\r\n\r\nThe problem is, the best time complexity we may achieve there is ~ `O(n*k)`, moreover, we need some sufficient amount of memory to store either intermediate results or call stack. \r\n\r\n```java\r\npublic static int ncr(int n, int r) {\r\n    // todo: could be optimized to O(r) space\r\n    int[][] interim = new int[n + 1][r + 1];\r\n    return ncr(n, r, interim);\r\n}\r\n\r\npublic static int ncr(int n, int r, int[][] interim) {\r\n    int modulo = 1000000007;\r\n    if (r == 0 || n == r) {\r\n        return 1;\r\n    }\r\n    if (interim[n][r] &gt; 0) {\r\n        return interim[n][r];\r\n    }\r\n    return interim[n][r] = (ncr(n - 1, r - 1, interim) + ncr(n - 1, r, interim)) % modulo;\r\n}\r\n```\r\n\r\nHowever, I do believe this approach (with some obvious optimizations) is the only one relevant from programmer perspective - others require to perform some research or existence of math background.\r\n\r\n\r\n**II**. math solution\r\n\r\nby definition:\r\n\r\n`(n,k)` = `n*(n-1)*..*(n-k-1)/(1*2*..*k)`\r\n\r\nhere we do know how to calculate `mod(n*(n-1)*..*(n-k-1),m)` and that seems not to be a big deal:\r\n\r\n`mod(mod(mod(n,m)*mod(n-1,m),m)*mod(n-2,m),m)....`\r\n\r\nthe actual challenge is what to do with `1/(1*2*..*k)` part, and the main idea is: is it possible to replace division in `mod(p/q, m)` by multiplication, i.e. find some `r` that satisfies following equality: `mod(p/q, m) = mod(p*r, m)`? And the answer is: yes, it is possible - according to Fermat theorem it is `pow(q,m-2)`, technically we may even calculate `mod(pow(q,m-2),m)` with [`O(logm)` time complexity](https://stackoverflow.com/a/72830791/3426309):\r\n\r\n```java\r\npublic static int modpow(int x, int n) {\r\n    int modulo = 1000000007;\r\n    long product = 1;\r\n    long p = x;\r\n    while (n != 0) {\r\n        if ((n &amp; 1) == 1) {\r\n            product = product * p % modulo;\r\n        }\r\n        p = (p * p % modulo);\r\n        n &gt;&gt;= 1;\r\n    }\r\n    return (int) product;\r\n}\r\n\r\npublic static int ncr(int n, int r) {\r\n    int modulo = 1000000007;\r\n\r\n    long mult = 1;\r\n    for (int i = n; i &gt; n - r; i--) {\r\n        mult = (mult * i) % modulo;\r\n    }\r\n    \r\n    for (int i = 2; i &lt;= r; i++) {\r\n        mult = (mult * modpow(i, modulo - 2)) % modulo;\r\n    }\r\n\r\n    return (int) mult;\r\n}\r\n```\r\n\r\n\r\nHowever, as was actually mentioned by @Dawood ibn Kareem in comments: `BigInteger#modInverse` does return something usefull as well and we may rewrite previous code using following form (which is slower than the previous one):\r\n\r\n\r\n```java\r\npublic static int ncr(int n, int r) {\r\n    int modulo = 1000000007;\r\n    BigInteger bm = BigInteger.valueOf(modulo);\r\n\r\n    long mult = 1;\r\n    for (int i = n; i &gt; n - r; i--) {\r\n        mult = (mult * i) % modulo;\r\n    }\r\n\r\n    for (int i = 2; i &lt;= r; i++) {\r\n        mult = (mult * BigInteger.valueOf(i).modInverse(bm).intValue()) % modulo;\r\n    }\r\n\r\n    return (int) mult;\r\n}\r\n```\r\n\r\n\r\n\r\non the other hand, that is too java specific and most probably we need to &quot;find&quot; another idea of calculating modular inverse, and [Extended Euclidean algorithm](https://en.wikipedia.org/wiki/Extended_Euclidean_algorithm#Computing_multiplicative_inverses_in_modular_structures) comes to the rescue:\r\n\r\n```\r\nfunction inverse(a, n)\r\n    t := 0;     newt := 1\r\n    r := n;     newr := a\r\n\r\n    while newr ≠ 0 do\r\n        quotient := r div newr\r\n        (t, newt) := (newt, t − quotient &#215; newt) \r\n        (r, newr) := (newr, r − quotient &#215; newr)\r\n\r\n    if r &gt; 1 then\r\n        return &quot;a is not invertible&quot;\r\n    if t &lt; 0 then\r\n        t := t + n\r\n\r\n    return t\r\n```\r\n\r\nwhich in our case could be simplified to the following recurrent relation (note, since `m % x &lt; x` we may use dynamic programming approach):\r\n\r\n\r\n```\r\ninv(x) = (inv(m % x) * (m - m/x)) % m\r\n```\r\n\r\nand now we get:\r\n\r\n```\r\npublic static int ncr(int n, int r) {\r\n    int modulo = 1000000007;\r\n\r\n    long mult = 1;\r\n    for (int i = n; i &gt; n - r; i--) {\r\n        mult = (mult * i) % modulo;\r\n    }\r\n\r\n    int[] invs = new int[r + 1];\r\n    invs[0] = 1;\r\n    if (r &gt; 1) {\r\n        invs[1] = 1;\r\n    }\r\n\r\n    for (int i = 2; i &lt;= r; i++) {\r\n        invs[i] = (int) (((long) invs[modulo % i] * (modulo - modulo / i)) % modulo);\r\n        mult = (mult * invs[i]) % modulo;\r\n    }\r\n\r\n    return (int) mult;\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\nUPD. It seems I have missed the obvious optimization, and the fastest solution among suggested is actually following (no knowledge of extended Euclidean algorithm required):\r\n\r\n\r\n```java\r\npublic static int modpow(int x, int n) {\r\n    int modulo = 1000000007;\r\n    long product = 1;\r\n    long p = x;\r\n    while (n != 0) {\r\n        if ((n &amp; 1) == 1) {\r\n            product = product * p % modulo;\r\n        }\r\n        p = (p * p % modulo);\r\n        n &gt;&gt;= 1;\r\n    }\r\n    return (int) product;\r\n}\r\n\r\npublic static int ncr(int n, int r) {\r\n    int modulo = 1000000007;\r\n\r\n    long mult = 1;\r\n    for (int i = n; i &gt; n - r; i--) {\r\n        mult = (mult * i) % modulo;\r\n    }\r\n\r\n    long div = 1;\r\n    for (int i = 2; i &lt;= r; i++) {\r\n        div = (div * i) % modulo;\r\n    }\r\n\r\n    //int modInverse = BigInteger.valueOf(div).modInverse(BigInteger.valueOf(modulo)).intValue();\r\n    //return (int) ((mult * modInverse) % modulo);\r\n    return (int) ((mult * modpow((int) div, modulo - 2)) % modulo);\r\n}\r\n```","title":"The multiplicative formula for calculating the Binomial Coefficient in Java for large n and k values modulo 10^9 + 7 outputs incorrect value","body":"<p>Well, as I have mentioned in comments, you can't use integer division together with modular division, otherwise you will get wrong results. That means you need to find some kind of recurrent relation or algorithm which does not involve division, I do see following options:</p>\n<p><strong>I</strong>. the obvious recurrent relation is based on Pascal triangle:</p>\n<p><code>(n,k) = (n-1,k-1) + (n-1,k)</code></p>\n<p>it does not involve division, hence we may perform our computations using following idea:</p>\n<p><code>mod((n,k),m) = mod((n-1,k-1),m) + mod((n-1,k),m)</code></p>\n<p>The problem is, the best time complexity we may achieve there is ~ <code>O(n*k)</code>, moreover, we need some sufficient amount of memory to store either intermediate results or call stack.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int ncr(int n, int r) {\n    // todo: could be optimized to O(r) space\n    int[][] interim = new int[n + 1][r + 1];\n    return ncr(n, r, interim);\n}\n\npublic static int ncr(int n, int r, int[][] interim) {\n    int modulo = 1000000007;\n    if (r == 0 || n == r) {\n        return 1;\n    }\n    if (interim[n][r] &gt; 0) {\n        return interim[n][r];\n    }\n    return interim[n][r] = (ncr(n - 1, r - 1, interim) + ncr(n - 1, r, interim)) % modulo;\n}\n</code></pre>\n<p>However, I do believe this approach (with some obvious optimizations) is the only one relevant from programmer perspective - others require to perform some research or existence of math background.</p>\n<p><strong>II</strong>. math solution</p>\n<p>by definition:</p>\n<p><code>(n,k)</code> = <code>n*(n-1)*..*(n-k-1)/(1*2*..*k)</code></p>\n<p>here we do know how to calculate <code>mod(n*(n-1)*..*(n-k-1),m)</code> and that seems not to be a big deal:</p>\n<p><code>mod(mod(mod(n,m)*mod(n-1,m),m)*mod(n-2,m),m)....</code></p>\n<p>the actual challenge is what to do with <code>1/(1*2*..*k)</code> part, and the main idea is: is it possible to replace division in <code>mod(p/q, m)</code> by multiplication, i.e. find some <code>r</code> that satisfies following equality: <code>mod(p/q, m) = mod(p*r, m)</code>? And the answer is: yes, it is possible - according to Fermat theorem it is <code>pow(q,m-2)</code>, technically we may even calculate <code>mod(pow(q,m-2),m)</code> with <a href=\"https://stackoverflow.com/a/72830791/3426309\"><code>O(logm)</code> time complexity</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int modpow(int x, int n) {\n    int modulo = 1000000007;\n    long product = 1;\n    long p = x;\n    while (n != 0) {\n        if ((n &amp; 1) == 1) {\n            product = product * p % modulo;\n        }\n        p = (p * p % modulo);\n        n &gt;&gt;= 1;\n    }\n    return (int) product;\n}\n\npublic static int ncr(int n, int r) {\n    int modulo = 1000000007;\n\n    long mult = 1;\n    for (int i = n; i &gt; n - r; i--) {\n        mult = (mult * i) % modulo;\n    }\n    \n    for (int i = 2; i &lt;= r; i++) {\n        mult = (mult * modpow(i, modulo - 2)) % modulo;\n    }\n\n    return (int) mult;\n}\n</code></pre>\n<p>However, as was actually mentioned by @Dawood ibn Kareem in comments: <code>BigInteger#modInverse</code> does return something usefull as well and we may rewrite previous code using following form (which is slower than the previous one):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int ncr(int n, int r) {\n    int modulo = 1000000007;\n    BigInteger bm = BigInteger.valueOf(modulo);\n\n    long mult = 1;\n    for (int i = n; i &gt; n - r; i--) {\n        mult = (mult * i) % modulo;\n    }\n\n    for (int i = 2; i &lt;= r; i++) {\n        mult = (mult * BigInteger.valueOf(i).modInverse(bm).intValue()) % modulo;\n    }\n\n    return (int) mult;\n}\n</code></pre>\n<p>on the other hand, that is too java specific and most probably we need to &quot;find&quot; another idea of calculating modular inverse, and <a href=\"https://en.wikipedia.org/wiki/Extended_Euclidean_algorithm#Computing_multiplicative_inverses_in_modular_structures\" rel=\"nofollow noreferrer\">Extended Euclidean algorithm</a> comes to the rescue:</p>\n<pre><code>function inverse(a, n)\n    t := 0;     newt := 1\n    r := n;     newr := a\n\n    while newr ≠ 0 do\n        quotient := r div newr\n        (t, newt) := (newt, t − quotient × newt) \n        (r, newr) := (newr, r − quotient × newr)\n\n    if r &gt; 1 then\n        return &quot;a is not invertible&quot;\n    if t &lt; 0 then\n        t := t + n\n\n    return t\n</code></pre>\n<p>which in our case could be simplified to the following recurrent relation (note, since <code>m % x &lt; x</code> we may use dynamic programming approach):</p>\n<pre><code>inv(x) = (inv(m % x) * (m - m/x)) % m\n</code></pre>\n<p>and now we get:</p>\n<pre><code>public static int ncr(int n, int r) {\n    int modulo = 1000000007;\n\n    long mult = 1;\n    for (int i = n; i &gt; n - r; i--) {\n        mult = (mult * i) % modulo;\n    }\n\n    int[] invs = new int[r + 1];\n    invs[0] = 1;\n    if (r &gt; 1) {\n        invs[1] = 1;\n    }\n\n    for (int i = 2; i &lt;= r; i++) {\n        invs[i] = (int) (((long) invs[modulo % i] * (modulo - modulo / i)) % modulo);\n        mult = (mult * invs[i]) % modulo;\n    }\n\n    return (int) mult;\n}\n</code></pre>\n<hr />\n<p>UPD. It seems I have missed the obvious optimization, and the fastest solution among suggested is actually following (no knowledge of extended Euclidean algorithm required):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int modpow(int x, int n) {\n    int modulo = 1000000007;\n    long product = 1;\n    long p = x;\n    while (n != 0) {\n        if ((n &amp; 1) == 1) {\n            product = product * p % modulo;\n        }\n        p = (p * p % modulo);\n        n &gt;&gt;= 1;\n    }\n    return (int) product;\n}\n\npublic static int ncr(int n, int r) {\n    int modulo = 1000000007;\n\n    long mult = 1;\n    for (int i = n; i &gt; n - r; i--) {\n        mult = (mult * i) % modulo;\n    }\n\n    long div = 1;\n    for (int i = 2; i &lt;= r; i++) {\n        div = (div * i) % modulo;\n    }\n\n    //int modInverse = BigInteger.valueOf(div).modInverse(BigInteger.valueOf(modulo)).intValue();\n    //return (int) ((mult * modInverse) % modulo);\n    return (int) ((mult * modpow((int) div, modulo - 2)) % modulo);\n}\n</code></pre>\n"}],"owner":{"account_id":29571591,"reputation":23,"user_id":22663624,"display_name":"Eragonrider"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77210636,"answer_count":1,"score":2,"last_activity_date":1696175836,"creation_date":1696112695,"question_id":77208634,"body_markdown":"I have an assignment that asks to create a program that can calculate the binomial coefficient given any n, k such that 1&lt;=k&lt;=n&lt;=2000. I am able to accomplish this for small n, k, but for some reason its not accurate at larger n and k values.\r\n\r\nHere is my current code\r\n\r\n```\r\nimport java.io.BufferedInputStream;\r\nimport java.util.Scanner;\r\n\r\npublic class Main\r\n{\r\n    public static double bCoeffModded(double nPar, double kPar, double mPar) {\r\n        if ((nPar == kPar) || (kPar == 0)) {\r\n            return 1;\r\n        }\r\n        \r\n        double binomialCoefficient = nPar;\r\n        \r\n        for (int i = 2; i &lt;= kPar; i++) {\r\n            binomialCoefficient *= ((nPar + 1 - i) / i);\r\n            binomialCoefficient %= mPar;\r\n        }\r\n        return binomialCoefficient;\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        // Declarations\r\n        double n, k;\r\n        double m = (int) Math.pow(10,9) + 7; // modulus\r\n        int c;\r\n        \r\n        // Input\r\n        Scanner reader = new Scanner(new BufferedInputStream(System.in));\r\n        n = reader.nextInt();\r\n        k = reader.nextInt();\r\n        \r\n        // Calculations\r\n        c = (int) bCoeffModded(n, k, m);\r\n        \r\n        // OutPut\r\n        System.out.println(c);\r\n    }\r\n}\r\n```\r\n\r\nI am applying the modulus in each iteration because it reduces the chance for an overflow. I think there is an overflow anyway because the accuracy is dropping anyways.\r\n\r\nThe formula and a overview of the binomial coefficient can be found [here](https://en.wikipedia.org/wiki/Binomial_coefficient). I should note I already tried the recursive method and factorial method. Both have overflow issues as well.\r\n\r\ntest case 1:  \r\n6 4  \r\n**expected** 15  \r\n**actual** 15  \r\n\r\ntest case 2:  \r\n100 50  \r\n**expected** 538992043  \r\n**actual** 309695578  \r\n\r\n","title":"The multiplicative formula for calculating the Binomial Coefficient in Java for large n and k values modulo 10^9 + 7 outputs incorrect value","body":"<p>I have an assignment that asks to create a program that can calculate the binomial coefficient given any n, k such that 1&lt;=k&lt;=n&lt;=2000. I am able to accomplish this for small n, k, but for some reason its not accurate at larger n and k values.</p>\n<p>Here is my current code</p>\n<pre><code>import java.io.BufferedInputStream;\nimport java.util.Scanner;\n\npublic class Main\n{\n    public static double bCoeffModded(double nPar, double kPar, double mPar) {\n        if ((nPar == kPar) || (kPar == 0)) {\n            return 1;\n        }\n        \n        double binomialCoefficient = nPar;\n        \n        for (int i = 2; i &lt;= kPar; i++) {\n            binomialCoefficient *= ((nPar + 1 - i) / i);\n            binomialCoefficient %= mPar;\n        }\n        return binomialCoefficient;\n    }\n    \n    public static void main(String[] args) {\n        // Declarations\n        double n, k;\n        double m = (int) Math.pow(10,9) + 7; // modulus\n        int c;\n        \n        // Input\n        Scanner reader = new Scanner(new BufferedInputStream(System.in));\n        n = reader.nextInt();\n        k = reader.nextInt();\n        \n        // Calculations\n        c = (int) bCoeffModded(n, k, m);\n        \n        // OutPut\n        System.out.println(c);\n    }\n}\n</code></pre>\n<p>I am applying the modulus in each iteration because it reduces the chance for an overflow. I think there is an overflow anyway because the accuracy is dropping anyways.</p>\n<p>The formula and a overview of the binomial coefficient can be found <a href=\"https://en.wikipedia.org/wiki/Binomial_coefficient\" rel=\"nofollow noreferrer\">here</a>. I should note I already tried the recursive method and factorial method. Both have overflow issues as well.</p>\n<p>test case 1:<br />\n6 4<br />\n<strong>expected</strong> 15<br />\n<strong>actual</strong> 15</p>\n<p>test case 2:<br />\n100 50<br />\n<strong>expected</strong> 538992043<br />\n<strong>actual</strong> 309695578</p>\n"},{"tags":["java","eclipse","server","rmi"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1696076814,"post_id":77206868,"comment_id":136109487,"body_markdown":"Do you have a `module-info.java` file in your [Eclipse] Java project? I&#39;m guessing that you do, so add this line to it: `exports rmiproject;`","body":"Do you have a <code>module-info.java</code> file in your [Eclipse] Java project? I&#39;m guessing that you do, so add this line to it: <code>exports rmiproject;</code>"},{"owner":{"account_id":29565686,"reputation":1,"user_id":22659160,"display_name":"MrAlex"},"score":0,"creation_date":1696079095,"post_id":77206868,"comment_id":136109693,"body_markdown":"@Abra Hi, thank you for your reply! I did this and now I get a new error: java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: \n\tjava.net.ConnectException: Connection refused: connect\n\tat java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:625)\n\t...","body":"@Abra Hi, thank you for your reply! I did this and now I get a new error: java.rmi.ConnectException: Connection refused to host: localhost; nested exception is:  \tjava.net.ConnectException: Connection refused: connect \tat java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndp&zwnj;&#8203;oint.java:625) \t..."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1696079455,"post_id":77206868,"comment_id":136109728,"body_markdown":"According to your question, I&#39;m assuming that you are using the default RMI port, i.e. 1099. Either the port is not bound or it is behind a firewall. When you started up _rmiregistry_, you probably got a dialog window asking whether to &quot;allow access&quot; (at least, that&#39;s what I got). You need to allow access. By the way, I got the same dialog window the first time I launched your `Server` class. Again, you need to allow access.","body":"According to your question, I&#39;m assuming that you are using the default RMI port, i.e. 1099. Either the port is not bound or it is behind a firewall. When you started up <i>rmiregistry</i>, you probably got a dialog window asking whether to &quot;allow access&quot; (at least, that&#39;s what I got). You need to allow access. By the way, I got the same dialog window the first time I launched your <code>Server</code> class. Again, you need to allow access."},{"owner":{"account_id":29565686,"reputation":1,"user_id":22659160,"display_name":"MrAlex"},"score":0,"creation_date":1696079763,"post_id":77206868,"comment_id":136109752,"body_markdown":"Yep true. I tried this so: I started up rmiregistry from CMD, allowed the acces and now this is what I get: java.rmi.ServerException: RemoteException occurred in server thread; nested exception is: \n\tjava.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: \n\tjava.lang.ClassNotFoundException: rmiproject.HelloIn\n\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:392)....","body":"Yep true. I tried this so: I started up rmiregistry from CMD, allowed the acces and now this is what I get: java.rmi.ServerException: RemoteException occurred in server thread; nested exception is:  \tjava.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:  \tjava.lang.ClassNotFoundException: rmiproject.HelloIn \tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastSer&zwnj;&#8203;verRef.java:392)...."},{"owner":{"account_id":29565686,"reputation":1,"user_id":22659160,"display_name":"MrAlex"},"score":0,"creation_date":1696079931,"post_id":77206868,"comment_id":136109767,"body_markdown":"I just fixed it! I solved this last problem just running the rmiregistry from my project path. Thank you for your help!","body":"I just fixed it! I solved this last problem just running the rmiregistry from my project path. Thank you for your help!"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1696080470,"post_id":77206868,"comment_id":136109824,"body_markdown":"You may want to [answer your own question](https://stackoverflow.com/help/self-answer).","body":"You may want to <a href=\"https://stackoverflow.com/help/self-answer\">answer your own question</a>."}],"answers":[{"tags":[],"owner":{"account_id":29565686,"reputation":1,"user_id":22659160,"display_name":"MrAlex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696174448,"creation_date":1696174427,"answer_id":77211123,"question_id":77206868,"body_markdown":"Fixed in this way :\r\n- added exports rmiproject(name of the package) to module-info.java\r\n- start rmiregistry from cmd (in your src path) ","title":"JAVA RMI problems on eclipse","body":"<p>Fixed in this way :</p>\n<ul>\n<li>added exports rmiproject(name of the package) to module-info.java</li>\n<li>start rmiregistry from cmd (in your src path)</li>\n</ul>\n"}],"owner":{"account_id":29565686,"reputation":1,"user_id":22659160,"display_name":"MrAlex"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696174448,"creation_date":1696074401,"question_id":77206868,"body_markdown":"I&#39;m trying to run a simple Java RMI on my eclipse, but every time I get different errors. If I run my sources through CMD (I&#39;m on Windows) it works, but I&#39;d prefer to run my code on Eclipse since it&#39;s more comfortable!\r\n\r\n\r\nThis is the code:\r\n\r\nInterface\r\n```java\r\npackage rmiproject;\r\n\r\nimport java.rmi.*;\r\n\r\npublic interface HelloIn extends Remote {\r\n\r\n\tpublic String ciao(String name) throws RemoteException;\r\n}\r\n```\r\nServer\r\n```java\r\npackage rmiproject;\r\n\r\nimport java.net.MalformedURLException;\r\nimport java.rmi.Naming;\r\nimport java.rmi.RemoteException;\r\nimport java.rmi.server.UnicastRemoteObject;\r\n\r\npublic class Server extends UnicastRemoteObject implements HelloIn {\r\n\r\n\tprotected Server() throws RemoteException {\r\n\t\tsuper();\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\t@Override\r\n\tpublic String ciao(String name) throws RemoteException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tString output= &quot;Server dice ciao &quot;+name;\r\n\t\treturn output;\r\n\t}\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tSystem.setProperty(&quot;java.rmi.server.hostname&quot;,&quot;myipaddress&quot;);\r\n        try {\r\n            Naming.rebind(&quot;//localhost/Server&quot;, new Server());\r\n        } catch (RemoteException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        } catch (MalformedURLException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        }\r\n\t}\r\n}\r\n```\r\nClient\r\n```java\r\npackage rmiproject;\r\n\r\nimport java.net.MalformedURLException;\r\nimport java.rmi.Naming;\r\nimport java.rmi.NotBoundException;\r\nimport java.rmi.RemoteException;\r\n\r\npublic class Client {\r\n    private static HelloIn lookup;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n        try {\r\n\t\t\tlookup= (HelloIn) Naming.lookup(&quot;//localhost/Server&quot;);\r\n\t\t\tString s= lookup.ciao(&quot;peppe&quot;);\r\n\t\t\tSystem.out.println(s);\r\n\t\t} catch (MalformedURLException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (RemoteException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (NotBoundException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nThis is the error I get if I run it on Eclipse:\r\n```none\r\nException in thread &quot;main&quot; java.lang.reflect.InaccessibleObjectException: Unable to make public abstract java.lang.String rmiproject.HelloIn.ciao(java.lang.String) throws java.rmi.RemoteException accessible: module Rmi does not &quot;exports rmiproject&quot; to module java.rmi\r\n\tat java.base/java.lang.reflect.AccessibleObject.throwInaccessibleObjectException(AccessibleObject.java:391)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:367)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:315)\r\n\tat java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:203)\r\n\tat java.base/java.lang.reflect.Method.setAccessible(Method.java:197)\r\n\tat java.rmi/sun.rmi.server.UnicastServerRef$HashToMethod_Maps$1.run(UnicastServerRef.java:598)\r\n\tat java.rmi/sun.rmi.server.UnicastServerRef$HashToMethod_Maps$1.run(UnicastServerRef.java:596)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:319)\r\n\tat java.rmi/sun.rmi.server.UnicastServerRef$HashToMethod_Maps.computeValue(UnicastServerRef.java:595)\r\n\tat java.rmi/sun.rmi.server.UnicastServerRef$HashToMethod_Maps.computeValue(UnicastServerRef.java:574)\r\n\tat java.rmi/sun.rmi.server.WeakClassHashMap.get(WeakClassHashMap.java:74)\r\n\tat java.rmi/sun.rmi.server.UnicastServerRef.exportObject(UnicastServerRef.java:236)\r\n\tat java.rmi/java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:473)\r\n\tat java.rmi/java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:358)\r\n\tat java.rmi/java.rmi.server.UnicastRemoteObject.&lt;init&gt;(UnicastRemoteObject.java:230)\r\n\tat java.rmi/java.rmi.server.UnicastRemoteObject.&lt;init&gt;(UnicastRemoteObject.java:212)\r\n\tat Rmi/rmiproject.Server.&lt;init&gt;(Server.java:10)\r\n\tat Rmi/rmiproject.Server.main(Server.java:29)\r\n```\r\nWhen I run it on my CMD, these are the steps I follow:\r\n- First I set a path for my JDK and then I start *rmiregistry*.\r\n- Then I open two other windows and I start the server and then the client.\r\n```none\r\njavac rmiproject/Server.java\r\njava rmiproject.Server\r\n```\r\nSame for the client on a different window.\r\n","title":"JAVA RMI problems on eclipse","body":"<p>I'm trying to run a simple Java RMI on my eclipse, but every time I get different errors. If I run my sources through CMD (I'm on Windows) it works, but I'd prefer to run my code on Eclipse since it's more comfortable!</p>\n<p>This is the code:</p>\n<p>Interface</p>\n<pre class=\"lang-java prettyprint-override\"><code>package rmiproject;\n\nimport java.rmi.*;\n\npublic interface HelloIn extends Remote {\n\n    public String ciao(String name) throws RemoteException;\n}\n</code></pre>\n<p>Server</p>\n<pre class=\"lang-java prettyprint-override\"><code>package rmiproject;\n\nimport java.net.MalformedURLException;\nimport java.rmi.Naming;\nimport java.rmi.RemoteException;\nimport java.rmi.server.UnicastRemoteObject;\n\npublic class Server extends UnicastRemoteObject implements HelloIn {\n\n    protected Server() throws RemoteException {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n\n    /**\n     * \n     */\n    @Override\n    public String ciao(String name) throws RemoteException {\n        // TODO Auto-generated method stub\n        String output= &quot;Server dice ciao &quot;+name;\n        return output;\n    }\n\n    private static final long serialVersionUID = 1L;\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        System.setProperty(&quot;java.rmi.server.hostname&quot;,&quot;myipaddress&quot;);\n        try {\n            Naming.rebind(&quot;//localhost/Server&quot;, new Server());\n        } catch (RemoteException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (MalformedURLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Client</p>\n<pre class=\"lang-java prettyprint-override\"><code>package rmiproject;\n\nimport java.net.MalformedURLException;\nimport java.rmi.Naming;\nimport java.rmi.NotBoundException;\nimport java.rmi.RemoteException;\n\npublic class Client {\n    private static HelloIn lookup;\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        try {\n            lookup= (HelloIn) Naming.lookup(&quot;//localhost/Server&quot;);\n            String s= lookup.ciao(&quot;peppe&quot;);\n            System.out.println(s);\n        } catch (MalformedURLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (RemoteException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (NotBoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>This is the error I get if I run it on Eclipse:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.reflect.InaccessibleObjectException: Unable to make public abstract java.lang.String rmiproject.HelloIn.ciao(java.lang.String) throws java.rmi.RemoteException accessible: module Rmi does not &quot;exports rmiproject&quot; to module java.rmi\n    at java.base/java.lang.reflect.AccessibleObject.throwInaccessibleObjectException(AccessibleObject.java:391)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:367)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:315)\n    at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:203)\n    at java.base/java.lang.reflect.Method.setAccessible(Method.java:197)\n    at java.rmi/sun.rmi.server.UnicastServerRef$HashToMethod_Maps$1.run(UnicastServerRef.java:598)\n    at java.rmi/sun.rmi.server.UnicastServerRef$HashToMethod_Maps$1.run(UnicastServerRef.java:596)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:319)\n    at java.rmi/sun.rmi.server.UnicastServerRef$HashToMethod_Maps.computeValue(UnicastServerRef.java:595)\n    at java.rmi/sun.rmi.server.UnicastServerRef$HashToMethod_Maps.computeValue(UnicastServerRef.java:574)\n    at java.rmi/sun.rmi.server.WeakClassHashMap.get(WeakClassHashMap.java:74)\n    at java.rmi/sun.rmi.server.UnicastServerRef.exportObject(UnicastServerRef.java:236)\n    at java.rmi/java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:473)\n    at java.rmi/java.rmi.server.UnicastRemoteObject.exportObject(UnicastRemoteObject.java:358)\n    at java.rmi/java.rmi.server.UnicastRemoteObject.&lt;init&gt;(UnicastRemoteObject.java:230)\n    at java.rmi/java.rmi.server.UnicastRemoteObject.&lt;init&gt;(UnicastRemoteObject.java:212)\n    at Rmi/rmiproject.Server.&lt;init&gt;(Server.java:10)\n    at Rmi/rmiproject.Server.main(Server.java:29)\n</code></pre>\n<p>When I run it on my CMD, these are the steps I follow:</p>\n<ul>\n<li>First I set a path for my JDK and then I start <em>rmiregistry</em>.</li>\n<li>Then I open two other windows and I start the server and then the client.</li>\n</ul>\n<pre class=\"lang-none prettyprint-override\"><code>javac rmiproject/Server.java\njava rmiproject.Server\n</code></pre>\n<p>Same for the client on a different window.</p>\n"},{"tags":["java","recursion","divide-and-conquer"],"comments":[{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":2,"creation_date":1696168514,"post_id":77210735,"comment_id":136116178,"body_markdown":"There is nothing special about recursive calls. The same principle applies as with other, non-recursive calls: the caller makes the call, and when that call returns back to the caller, the caller proceeds with the next statement, which might be another function call...","body":"There is nothing special about recursive calls. The same principle applies as with other, non-recursive calls: the caller makes the call, and when that call returns back to the caller, the caller proceeds with the next statement, which might be another function call..."}],"answers":[{"tags":[],"owner":{"account_id":8306545,"reputation":47686,"user_id":6243352,"display_name":"ggorlen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696174299,"creation_date":1696170778,"answer_id":77210918,"question_id":77210735,"body_markdown":"&gt; I am having trouble understanding how the stack will be formed since there are back to back two recursive statements and a call to the merge function\r\n\r\nIt&#39;s immaterial how many recursive (or non-recursive) subcalls are made from a function as far as the stack is concerned. If a function has two recursive calls, the first recursive call must completely finish (i.e. clear the stack frames it created) before the second recursive call begins on a totally fresh &quot;sub-stack&quot; (if you will). Stacks can only push or pop, so it&#39;s not like the stack splits into two or anything like that.\r\n\r\n&gt; I am not sure if the second recursive call is made side by side the first one and what that stack will look like, and in what order will merge be called on the &#39;subarrays&#39;\r\n\r\nAs mentioned above, multiple recursive calls happen in series, not parallel or &quot;side by side&quot;. The left subarray call chain runs, clears and then the right subarray chain takes its place on the stack, running and clearing.\r\n\r\nRecursion isn&#39;t necessary to understand this. Consider the following pseudocode:\r\n\r\n```js\r\nfunction bar() {}\r\nfunction baz() {}\r\nfunction foo() {\r\n  bar();\r\n  baz();\r\n}\r\nfoo();\r\n```\r\n\r\nThe stack will be:\r\n\r\n1. `[]` (initially empty)\r\n1. `[foo]` (call `foo()`)\r\n1. `[foo, bar]` (call `bar()` from `foo()`, pausing `foo()`)\r\n1. `[foo]` (complete `bar()`, returning control to `foo()` momentarily)\r\n1. `[foo, baz]` (call `baz()` from `foo()`, pausing `foo()`)\r\n1. `[foo]` (complete `baz()`, returning control to `foo()`)\r\n1. `[]` (complete `foo()`, popping the last item from the call stack)\r\n\r\nSo `bar` and `baz` will never be on the stack at the same time.\r\n\r\nI&#39;m not sure what you mean by &quot;what order will `merge` be called on the subarrays&quot;, but `merge` isn&#39;t called until both subarrays are sorted recursively and the calls spawned by the current call to `mergeSort` are completed. `merge` then, well, merges the two subarrays into one sorted subarray, fulfilling `mergeSort`&#39;s obligation to its parent frame (sorting its subarray) and returning control to that parent frame, which is paused waiting for its child call to finish. Once it regains control, the parent call will then begin work on its right subchild or merge its sorted subarrays, depending on where its execution was blocked.\r\n\r\nHere&#39;s what the call stack would look like on an array with 6 elements, similar to yours (the whole array is passed through the calls, so that&#39;s always the same and can be ignored for the purposes of call stack visualization):\r\n\r\n&lt;!-- begin snippet: js hide: true console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    const printStack = (s, action) =&gt; {\r\n      s = [\r\n        ...s.slice(0, -1),\r\n        `${s.at(-1)} (${action})`,\r\n      ];\r\n      console.log(s.reverse().join(&quot;\\n&quot;));\r\n    }\r\n\r\n    const f = (lo, hi, stack=[]) =&gt; {\r\n      stack.push(`f(${lo}, ${hi})`);\r\n      printStack(stack, &quot;push&quot;);\r\n\r\n      if (lo &lt; hi) {\r\n        let mid = Math.floor((lo + hi) / 2);\r\n        f(lo, mid, stack);\r\n        f(mid + 1, hi, stack);\r\n      }\r\n\r\n      printStack(stack, &quot;pop&quot;);\r\n      stack.pop();\r\n    };\r\n\r\n    f(0, 6);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAnother common way to visualize the calls is:\r\n\r\n&lt;!-- begin snippet: js hide: true console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    const f = (lo, hi, depth=0) =&gt; {\r\n      const p = &quot;  &quot;.repeat(depth);\r\n      console.log(`${p}push: f(${lo}, ${hi})`);\r\n\r\n      if (lo &lt; hi) {\r\n        let mid = Math.floor((lo + hi) / 2);\r\n        f(lo, mid, depth + 1);\r\n        f(mid + 1, hi, depth + 1);\r\n      }\r\n\r\n      console.log(`${p}pop:  f(${lo}, ${hi})`);\r\n    };\r\n\r\n    f(0, 6);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIn this visualizer, the current stack grows left to right. You can determine the current stack by following the left-right thread, keeping in mind that previous calls on the same level are already popped, not running in parallel. Adding animation can help clarify the behavior:\r\n\r\n&lt;!-- begin snippet: js hide: true console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    const sleep = ms =&gt; new Promise(r =&gt; setTimeout(r, ms));\r\n    const delay = 1000;\r\n\r\n    const f = async (lo, hi, depth=0) =&gt; {\r\n      const p = &quot;  &quot;.repeat(depth);\r\n      console.log(`${p}push: f(${lo}, ${hi})`);\r\n      await sleep(delay);\r\n\r\n      if (lo &lt; hi) {\r\n        let mid = Math.floor((lo + hi) / 2);\r\n        await f(lo, mid, depth + 1);\r\n        await f(mid + 1, hi, depth + 1);\r\n      }\r\n\r\n      console.log(`${p}pop:  f(${lo}, ${hi})`);\r\n      await sleep(delay);\r\n    };\r\n\r\n    f(0, 6);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How will the stack be formed by Recursion in the MergeSort function?","body":"<blockquote>\n<p>I am having trouble understanding how the stack will be formed since there are back to back two recursive statements and a call to the merge function</p>\n</blockquote>\n<p>It's immaterial how many recursive (or non-recursive) subcalls are made from a function as far as the stack is concerned. If a function has two recursive calls, the first recursive call must completely finish (i.e. clear the stack frames it created) before the second recursive call begins on a totally fresh &quot;sub-stack&quot; (if you will). Stacks can only push or pop, so it's not like the stack splits into two or anything like that.</p>\n<blockquote>\n<p>I am not sure if the second recursive call is made side by side the first one and what that stack will look like, and in what order will merge be called on the 'subarrays'</p>\n</blockquote>\n<p>As mentioned above, multiple recursive calls happen in series, not parallel or &quot;side by side&quot;. The left subarray call chain runs, clears and then the right subarray chain takes its place on the stack, running and clearing.</p>\n<p>Recursion isn't necessary to understand this. Consider the following pseudocode:</p>\n<pre class=\"lang-js prettyprint-override\"><code>function bar() {}\nfunction baz() {}\nfunction foo() {\n  bar();\n  baz();\n}\nfoo();\n</code></pre>\n<p>The stack will be:</p>\n<ol>\n<li><code>[]</code> (initially empty)</li>\n<li><code>[foo]</code> (call <code>foo()</code>)</li>\n<li><code>[foo, bar]</code> (call <code>bar()</code> from <code>foo()</code>, pausing <code>foo()</code>)</li>\n<li><code>[foo]</code> (complete <code>bar()</code>, returning control to <code>foo()</code> momentarily)</li>\n<li><code>[foo, baz]</code> (call <code>baz()</code> from <code>foo()</code>, pausing <code>foo()</code>)</li>\n<li><code>[foo]</code> (complete <code>baz()</code>, returning control to <code>foo()</code>)</li>\n<li><code>[]</code> (complete <code>foo()</code>, popping the last item from the call stack)</li>\n</ol>\n<p>So <code>bar</code> and <code>baz</code> will never be on the stack at the same time.</p>\n<p>I'm not sure what you mean by &quot;what order will <code>merge</code> be called on the subarrays&quot;, but <code>merge</code> isn't called until both subarrays are sorted recursively and the calls spawned by the current call to <code>mergeSort</code> are completed. <code>merge</code> then, well, merges the two subarrays into one sorted subarray, fulfilling <code>mergeSort</code>'s obligation to its parent frame (sorting its subarray) and returning control to that parent frame, which is paused waiting for its child call to finish. Once it regains control, the parent call will then begin work on its right subchild or merge its sorted subarrays, depending on where its execution was blocked.</p>\n<p>Here's what the call stack would look like on an array with 6 elements, similar to yours (the whole array is passed through the calls, so that's always the same and can be ignored for the purposes of call stack visualization):</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const printStack = (s, action) =&gt; {\n  s = [\n    ...s.slice(0, -1),\n    `${s.at(-1)} (${action})`,\n  ];\n  console.log(s.reverse().join(\"\\n\"));\n}\n\nconst f = (lo, hi, stack=[]) =&gt; {\n  stack.push(`f(${lo}, ${hi})`);\n  printStack(stack, \"push\");\n\n  if (lo &lt; hi) {\n    let mid = Math.floor((lo + hi) / 2);\n    f(lo, mid, stack);\n    f(mid + 1, hi, stack);\n  }\n\n  printStack(stack, \"pop\");\n  stack.pop();\n};\n\nf(0, 6);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Another common way to visualize the calls is:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const f = (lo, hi, depth=0) =&gt; {\n  const p = \"  \".repeat(depth);\n  console.log(`${p}push: f(${lo}, ${hi})`);\n\n  if (lo &lt; hi) {\n    let mid = Math.floor((lo + hi) / 2);\n    f(lo, mid, depth + 1);\n    f(mid + 1, hi, depth + 1);\n  }\n\n  console.log(`${p}pop:  f(${lo}, ${hi})`);\n};\n\nf(0, 6);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>In this visualizer, the current stack grows left to right. You can determine the current stack by following the left-right thread, keeping in mind that previous calls on the same level are already popped, not running in parallel. Adding animation can help clarify the behavior:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const sleep = ms =&gt; new Promise(r =&gt; setTimeout(r, ms));\nconst delay = 1000;\n\nconst f = async (lo, hi, depth=0) =&gt; {\n  const p = \"  \".repeat(depth);\n  console.log(`${p}push: f(${lo}, ${hi})`);\n  await sleep(delay);\n\n  if (lo &lt; hi) {\n    let mid = Math.floor((lo + hi) / 2);\n    await f(lo, mid, depth + 1);\n    await f(mid + 1, hi, depth + 1);\n  }\n\n  console.log(`${p}pop:  f(${lo}, ${hi})`);\n  await sleep(delay);\n};\n\nf(0, 6);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":25682972,"reputation":21,"user_id":19445493,"display_name":"ABC123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696174299,"creation_date":1696168059,"question_id":77210735,"body_markdown":"This is the Merge Sort code:\r\n```\r\npublic class MergeSort {\r\n    public static void main(String[] args) {\r\n        int[] arr = {12, 11, 13, 5, 6, 7};\r\n\r\n        System.out.println(&quot;Unsorted Array:&quot;);\r\n        printArray(arr);\r\n\r\n        mergeSort(arr, 0, arr.length - 1);\r\n\r\n        System.out.println(&quot;Sorted Array:&quot;);\r\n        printArray(arr);\r\n    }\r\n\r\n    public static void mergeSort(int[] arr, int left, int right) {\r\n        if (left &lt; right) {\r\n            int middle = (left + right) / 2;\r\n\r\n            mergeSort(arr, left, middle);\r\n            mergeSort(arr, middle + 1, right);\r\n\r\n            merge(arr, left, middle, right);\r\n        }\r\n    }\r\n\r\n    public static void merge(int[] arr, int left, int middle, int right) {\r\n        int n1 = middle - left + 1;\r\n        int n2 = right - middle;\r\n\r\n        int[] leftArray = new int[n1];\r\n        int[] rightArray = new int[n2];\r\n\r\n        for (int i = 0; i &lt; n1; i++) {\r\n            leftArray[i] = arr[left + i];\r\n        }\r\n        for (int i = 0; i &lt; n2; i++) {\r\n            rightArray[i] = arr[middle + 1 + i];\r\n        }\r\n\r\n        int i = 0, j = 0;\r\n        int k = left;\r\n\r\n        while (i &lt; n1 &amp;&amp; j &lt; n2) {\r\n            if (leftArray[i] &lt;= rightArray[j]) {\r\n                arr[k] = leftArray[i];\r\n                i++;\r\n            } else {\r\n                arr[k] = rightArray[j];\r\n                j++;\r\n            }\r\n            k++;\r\n        }\r\n\r\n        while (i &lt; n1) {\r\n            arr[k] = leftArray[i];\r\n            i++;\r\n            k++;\r\n        }\r\n\r\n        while (j &lt; n2) {\r\n            arr[k] = rightArray[j];\r\n            j++;\r\n            k++;\r\n        }\r\n    }\r\n\r\n    public static void printArray(int[] arr) {\r\n        for (int value : arr) {\r\n            System.out.print(value + &quot; &quot;);\r\n        }\r\n        System.out.println();\r\n    }\r\n}\r\n\r\n```\r\nI am specifically looking at the ```mergeSort(int[] arr, int left, int right)``` function which recursively calls itself and divides the array using the middle index or ```m```. \r\nI am having trouble understanding how the stack will be formed since there are back to back two recursive statements and a call to the merge function. \r\nFor instance, if there is an ```int[] array = [5, 4, 6, 7, 8, 2, 1]```\r\nand r and l are array.length - 1 and 0 respectively, then the base condition is satisfied, m = 3 and the first recursive call is made which assigns ```m``` to ```right```. Then the same recursive call is made until the base condition is not satisfied.Once the base condition is not satisfied, the second recursive call is made. I am not sure if the second recursive call is made side by side the first one and what that stack will look like, and in what order will merge be called on the &#39;subarrays&#39;. \r\nPlease help by showing what the stack would look like for the aforementioned array and in what order will merge be called on them. Thank you!","title":"How will the stack be formed by Recursion in the MergeSort function?","body":"<p>This is the Merge Sort code:</p>\n<pre><code>public class MergeSort {\n    public static void main(String[] args) {\n        int[] arr = {12, 11, 13, 5, 6, 7};\n\n        System.out.println(&quot;Unsorted Array:&quot;);\n        printArray(arr);\n\n        mergeSort(arr, 0, arr.length - 1);\n\n        System.out.println(&quot;Sorted Array:&quot;);\n        printArray(arr);\n    }\n\n    public static void mergeSort(int[] arr, int left, int right) {\n        if (left &lt; right) {\n            int middle = (left + right) / 2;\n\n            mergeSort(arr, left, middle);\n            mergeSort(arr, middle + 1, right);\n\n            merge(arr, left, middle, right);\n        }\n    }\n\n    public static void merge(int[] arr, int left, int middle, int right) {\n        int n1 = middle - left + 1;\n        int n2 = right - middle;\n\n        int[] leftArray = new int[n1];\n        int[] rightArray = new int[n2];\n\n        for (int i = 0; i &lt; n1; i++) {\n            leftArray[i] = arr[left + i];\n        }\n        for (int i = 0; i &lt; n2; i++) {\n            rightArray[i] = arr[middle + 1 + i];\n        }\n\n        int i = 0, j = 0;\n        int k = left;\n\n        while (i &lt; n1 &amp;&amp; j &lt; n2) {\n            if (leftArray[i] &lt;= rightArray[j]) {\n                arr[k] = leftArray[i];\n                i++;\n            } else {\n                arr[k] = rightArray[j];\n                j++;\n            }\n            k++;\n        }\n\n        while (i &lt; n1) {\n            arr[k] = leftArray[i];\n            i++;\n            k++;\n        }\n\n        while (j &lt; n2) {\n            arr[k] = rightArray[j];\n            j++;\n            k++;\n        }\n    }\n\n    public static void printArray(int[] arr) {\n        for (int value : arr) {\n            System.out.print(value + &quot; &quot;);\n        }\n        System.out.println();\n    }\n}\n\n</code></pre>\n<p>I am specifically looking at the <code>mergeSort(int[] arr, int left, int right)</code> function which recursively calls itself and divides the array using the middle index or <code>m</code>.\nI am having trouble understanding how the stack will be formed since there are back to back two recursive statements and a call to the merge function.\nFor instance, if there is an <code>int[] array = [5, 4, 6, 7, 8, 2, 1]</code>\nand r and l are array.length - 1 and 0 respectively, then the base condition is satisfied, m = 3 and the first recursive call is made which assigns <code>m</code> to <code>right</code>. Then the same recursive call is made until the base condition is not satisfied.Once the base condition is not satisfied, the second recursive call is made. I am not sure if the second recursive call is made side by side the first one and what that stack will look like, and in what order will merge be called on the 'subarrays'.\nPlease help by showing what the stack would look like for the aforementioned array and in what order will merge be called on them. Thank you!</p>\n"},{"tags":["java","jersey","swagger","openapi"],"comments":[{"owner":{"account_id":39252,"reputation":89792,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1631146584,"post_id":68905907,"comment_id":122147386,"body_markdown":"I&#39;m not aware of any dynamic Java clients for OpenAPI. But there&#39;s a library that can [generate JSON examples for request bodies](https://stackoverflow.com/q/55978052/113116) based on their schema definitions.","body":"I&#39;m not aware of any dynamic Java clients for OpenAPI. But there&#39;s a library that can <a href=\"https://stackoverflow.com/q/55978052/113116\">generate JSON examples for request bodies</a> based on their schema definitions."}],"answers":[{"tags":[],"owner":{"account_id":18572,"reputation":10668,"user_id":42645,"accept_rate":76,"display_name":"zedoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696173630,"creation_date":1696173630,"answer_id":77211079,"question_id":68905907,"body_markdown":"This is for clojure but has a java class to hook into: https://github.com/oliyh/martian#java","title":"How can I dynamically connect to a Swagger / OpenAPI endpoint in java?","body":"<p>This is for clojure but has a java class to hook into: <a href=\"https://github.com/oliyh/martian#java\" rel=\"nofollow noreferrer\">https://github.com/oliyh/martian#java</a></p>\n"}],"owner":{"account_id":220392,"reputation":10621,"user_id":5209935,"accept_rate":14,"display_name":"Matthew"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":300,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1696173630,"creation_date":1629800849,"question_id":68905907,"body_markdown":"I want to write code that dynamically connects to an OpenAPI endpoint. I don&#39;t want to use code generation.\r\n\r\nSomething like so:\r\n\r\n```java\r\nOpenAPI openAPI = new OpenAPIParser().readLocation(...).getOpenAPI();\r\nString path = ...;\r\nString method = &quot;get&quot;;\r\nMap&lt;String, String&gt; parameters = ...;\r\n\r\nOperation operation = openAPI.get(path).readOperationsMap().get(method);\r\n\r\n//What do I do next?!\r\nWebTaget target = WhatGoesHere(path, parametrs);\r\nResponse response = target.request()...;\r\n```\r\n\r\nThere must be a library out there that can take an `OpenAPI` definition and make connections right? ","title":"How can I dynamically connect to a Swagger / OpenAPI endpoint in java?","body":"<p>I want to write code that dynamically connects to an OpenAPI endpoint. I don't want to use code generation.</p>\n<p>Something like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>OpenAPI openAPI = new OpenAPIParser().readLocation(...).getOpenAPI();\nString path = ...;\nString method = &quot;get&quot;;\nMap&lt;String, String&gt; parameters = ...;\n\nOperation operation = openAPI.get(path).readOperationsMap().get(method);\n\n//What do I do next?!\nWebTaget target = WhatGoesHere(path, parametrs);\nResponse response = target.request()...;\n</code></pre>\n<p>There must be a library out there that can take an <code>OpenAPI</code> definition and make connections right?</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1541589643,"post_id":53188430,"comment_id":93265945,"body_markdown":"`MB` with a capital &#39;B&#39;.","body":"<code>MB</code> with a capital &#39;B&#39;."},{"owner":{"account_id":11643394,"reputation":1124,"user_id":8527109,"display_name":"L&#225;szl&#243; Stahorszki"},"score":2,"creation_date":1541589829,"post_id":53188430,"comment_id":93266028,"body_markdown":"https://github.com/spring-projects/spring-framework/blob/master/spring-core/src/main/java/org/springframework/util/unit/DataSize.java here you can see that &quot;B&quot; is indeed capital","body":"<a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-core/src/main/java/org/springframework/util/unit/DataSize.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/blob/master/&hellip;</a> here you can see that &quot;B&quot; is indeed capital"}],"answers":[{"tags":[],"owner":{"account_id":3695262,"reputation":8590,"user_id":3391490,"accept_rate":100,"display_name":"Thirumal"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1592565299,"creation_date":1541594803,"answer_id":53189741,"question_id":53188430,"body_markdown":"As [Michael][1] &amp; [Stahorszki][2] mentioned \r\n\r\n&gt; **&quot;B&quot;**\r\n\r\n must be capital \r\n\r\n    Property : spring.servlet.multipart.maxFileSize= 50MB\r\n\r\nIn Yaml\r\n\r\n    spring:    \r\n      servlet:\r\n        multipart:\r\n          max-file-size: ${MAX_FILE_SIZE:8MB}\r\n          max-request-size: ${MAX_REQUEST_SIZE:8MB}\r\n\r\n  [1]: https://stackoverflow.com/users/1898563/michael\r\n  [2]: https://stackoverflow.com/users/8527109/l%C3%A1szl%C3%B3-stahorszki","title":"upload file size limit in spring boot","body":"<p>As <a href=\"https://stackoverflow.com/users/1898563/michael\">Michael</a> &amp; <a href=\"https://stackoverflow.com/users/8527109/l%C3%A1szl%C3%B3-stahorszki\">Stahorszki</a> mentioned </p>\n\n<blockquote>\n  <p><strong>\"B\"</strong></p>\n</blockquote>\n\n<p>must be capital </p>\n\n<pre><code>Property : spring.servlet.multipart.maxFileSize= 50MB\n</code></pre>\n\n<p>In Yaml</p>\n\n<pre><code>spring:    \n  servlet:\n    multipart:\n      max-file-size: ${MAX_FILE_SIZE:8MB}\n      max-request-size: ${MAX_REQUEST_SIZE:8MB}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9275281,"reputation":61,"user_id":6888115,"display_name":"Андрей Палкин"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576413803,"creation_date":1564485140,"answer_id":57270325,"question_id":53188430,"body_markdown":"Today I have repeated this error, althought I set &quot;MB&quot; with capital &quot;B&quot;:\r\n \r\n\r\n    Description:\r\n    \r\n    Failed to bind properties under &#39;spring.servlet.multipart.max-file-size&#39; to org.springframework.util.unit.DataSize:\r\n    \r\n        Property: spring.servlet.multipart.max-file-size\r\n        Value: 300MB \r\n        Origin: class path resource [application.properties]:27:40\r\n        Reason: failed to convert java.lang.String to org.springframework.util.unit.DataSize\r\n\r\nIf I comment out this options application wouldn&#39;t start anyway - there are some errors in the spring context.\r\nSo I think it is a wrong error message then context cannot be created + multipart options are given.","title":"upload file size limit in spring boot","body":"<p>Today I have repeated this error, althought I set \"MB\" with capital \"B\":</p>\n\n<pre><code>Description:\n\nFailed to bind properties under 'spring.servlet.multipart.max-file-size' to org.springframework.util.unit.DataSize:\n\n    Property: spring.servlet.multipart.max-file-size\n    Value: 300MB \n    Origin: class path resource [application.properties]:27:40\n    Reason: failed to convert java.lang.String to org.springframework.util.unit.DataSize\n</code></pre>\n\n<p>If I comment out this options application wouldn't start anyway - there are some errors in the spring context.\nSo I think it is a wrong error message then context cannot be created + multipart options are given.</p>\n"},{"tags":[],"owner":{"account_id":20600216,"reputation":1,"user_id":15121640,"display_name":"Phước Sang Huỳnh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648985965,"creation_date":1648977346,"answer_id":71724525,"question_id":53188430,"body_markdown":"In my case, I had redundant whitespace at the end of size (after MB, KB). To fix this, I deleted the space.","title":"upload file size limit in spring boot","body":"<p>In my case, I had redundant whitespace at the end of size (after MB, KB). To fix this, I deleted the space.</p>\n"},{"tags":[],"owner":{"account_id":11847624,"reputation":941,"user_id":8669765,"display_name":"Shashank Bodkhe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696173431,"creation_date":1696173431,"answer_id":77211068,"question_id":53188430,"body_markdown":"Remove the space as well after 50MB, I faced the same error but due to space after value attribute\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zBEFA.png","title":"upload file size limit in spring boot","body":"<p>Remove the space as well after 50MB, I faced the same error but due to space after value attribute</p>\n<p><a href=\"https://i.stack.imgur.com/zBEFA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zBEFA.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3695262,"reputation":8590,"user_id":3391490,"accept_rate":100,"display_name":"Thirumal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10129,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":53189741,"answer_count":4,"score":11,"last_activity_date":1696173431,"creation_date":1541589495,"question_id":53188430,"body_markdown":"In version 2.1.0, spring.servlet.multipart.max-file-size property failed to bind org.springframework.util.unit.DataSize.\r\n\r\n    Property : spring.servlet.multipart.maxFileSize= 50Mb\r\n\r\nException\r\n\r\n    Description:\r\n\r\n    Failed to bind properties under &#39;spring.servlet.multipart.max-file-size&#39; to org.springframework.util.unit.DataSize:\r\n\r\n    Property: spring.servlet.multipart.maxfilesize\r\n    Value: 50Mb\r\n    Origin: &quot;spring.servlet.multipart.maxFileSize&quot; from property source &quot;bootstrapProperties&quot;\r\n    Reason: failed to convert java.lang.String to @org.springframework.boot.convert.DataSizeUnit org.springframework.util.unit.DataSize\r\n\r\n    Action:\r\n\r\n    Update your application&#39;s configuration","title":"upload file size limit in spring boot","body":"<p>In version 2.1.0, spring.servlet.multipart.max-file-size property failed to bind org.springframework.util.unit.DataSize.</p>\n\n<pre><code>Property : spring.servlet.multipart.maxFileSize= 50Mb\n</code></pre>\n\n<p>Exception</p>\n\n<pre><code>Description:\n\nFailed to bind properties under 'spring.servlet.multipart.max-file-size' to org.springframework.util.unit.DataSize:\n\nProperty: spring.servlet.multipart.maxfilesize\nValue: 50Mb\nOrigin: \"spring.servlet.multipart.maxFileSize\" from property source \"bootstrapProperties\"\nReason: failed to convert java.lang.String to @org.springframework.boot.convert.DataSizeUnit org.springframework.util.unit.DataSize\n\nAction:\n\nUpdate your application's configuration\n</code></pre>\n"},{"tags":["java","predicate"],"comments":[{"owner":{"account_id":16765025,"reputation":1192,"user_id":12118888,"display_name":"Payel Senapati"},"score":0,"creation_date":1654115535,"post_id":72467515,"comment_id":128017731,"body_markdown":"I just want to know how isEqual() works, how to use it? I just tried some use but failed I guess","body":"I just want to know how isEqual() works, how to use it? I just tried some use but failed I guess"},{"owner":{"account_id":16765025,"reputation":1192,"user_id":12118888,"display_name":"Payel Senapati"},"score":0,"creation_date":1654115820,"post_id":72467515,"comment_id":128017802,"body_markdown":"Please give an example","body":"Please give an example"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1654115860,"creation_date":1654115860,"answer_id":72467778,"question_id":72467515,"body_markdown":"`Predicate.isEqual` is a factory method that creates predicates that test if a given thing is equal to the parameter passed in.\r\n\r\n`Predicate.isEqual(containsApple)` creates a `Predicate&lt;Predicate&lt;List&lt;Fruits&gt;&gt;&gt;` that tests if a given thing is equal to `containsApple`. However, since `containsApple` refers to an instance created from a lambda, and nothing much is guaranteed about the equality of instances created from lambda expressions (See the [JLS][1]), nothing much can be said about the result of calling `test` on it. The classes of the lambda instances may or may not implement `equals`, and `containsApple` may or may not be the same instance as `containsApple2`, depending on the implementation.\r\n\r\nRather than comparing lambda instances, a typical example of using `Predicate.isEqual` is:\r\n\r\n    Fruits apple = new Fruits(&quot;Apple&quot;);\r\n    Predicate&lt;Fruits&gt; isApple = Predicate.isEqual(apple);\r\n    // rather than this slightly longer version:\r\n    // Predicate&lt;Fruits&gt; isApple = x -&gt; Objects.equals(x, apple);\r\n\r\nThen you can pass `isApple` around, to other methods that take `Predicate`s, and/or call `test` on it. `isApple.test(apple)` would be true, `isApple.test(new Fruits(&quot;something else&quot;))` would be false. I would also recommend that you override `equals` and `hashCode` in `Fruits`.\r\n\r\nNote that we generally make predicates that test against individual objects, rather than lists (collections) of things. We would pass these predicates to other methods (such as `Stream.filter`), and let *them* do the filtering. For example, to filter a list to get all the apples:\r\n\r\n    List&lt;Fruits&gt; apples = fruitsList.stream()\r\n        .filter(Predicate.isEqual(apple)).toList();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.27.4","title":"Unable to get my head around Predicate isEqual method","body":"<p><code>Predicate.isEqual</code> is a factory method that creates predicates that test if a given thing is equal to the parameter passed in.</p>\n<p><code>Predicate.isEqual(containsApple)</code> creates a <code>Predicate&lt;Predicate&lt;List&lt;Fruits&gt;&gt;&gt;</code> that tests if a given thing is equal to <code>containsApple</code>. However, since <code>containsApple</code> refers to an instance created from a lambda, and nothing much is guaranteed about the equality of instances created from lambda expressions (See the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.27.4\" rel=\"nofollow noreferrer\">JLS</a>), nothing much can be said about the result of calling <code>test</code> on it. The classes of the lambda instances may or may not implement <code>equals</code>, and <code>containsApple</code> may or may not be the same instance as <code>containsApple2</code>, depending on the implementation.</p>\n<p>Rather than comparing lambda instances, a typical example of using <code>Predicate.isEqual</code> is:</p>\n<pre><code>Fruits apple = new Fruits(&quot;Apple&quot;);\nPredicate&lt;Fruits&gt; isApple = Predicate.isEqual(apple);\n// rather than this slightly longer version:\n// Predicate&lt;Fruits&gt; isApple = x -&gt; Objects.equals(x, apple);\n</code></pre>\n<p>Then you can pass <code>isApple</code> around, to other methods that take <code>Predicate</code>s, and/or call <code>test</code> on it. <code>isApple.test(apple)</code> would be true, <code>isApple.test(new Fruits(&quot;something else&quot;))</code> would be false. I would also recommend that you override <code>equals</code> and <code>hashCode</code> in <code>Fruits</code>.</p>\n<p>Note that we generally make predicates that test against individual objects, rather than lists (collections) of things. We would pass these predicates to other methods (such as <code>Stream.filter</code>), and let <em>them</em> do the filtering. For example, to filter a list to get all the apples:</p>\n<pre><code>List&lt;Fruits&gt; apples = fruitsList.stream()\n    .filter(Predicate.isEqual(apple)).toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107851,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654115879,"creation_date":1654115879,"answer_id":72467783,"question_id":72467515,"body_markdown":"One should use singular here for the class Fruits.\r\n\r\nFirst you must establish _equality_ of Fruit. Also should you ever want it to store in a HashMap or HashSet, a `hashCode` implementation is important.\r\n\r\n    public class Fruit {\r\n        private final String fruit; // Or name.\r\n    \r\n        public Fruit(String fruit) {\r\n            this.fruit = fruit;\r\n        }\r\n    \r\n        public String getFruit() {\r\n            return fruit;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object other) {\r\n            return other instanceOf Fruit &amp;&amp; ((Fruit) other).fruit.equals(fruit);\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return fruit.hashCode();\r\n        }\r\n    }\r\n\r\nThe Iterator class is rather old and its primary advantage is you can walk through and still remove an element with `iterator.remove()`, which is not allowed on the List in a - statefull - for (ConcurrentModificationException).\r\n\r\n    Predicate&lt;List&lt;Fruit&gt;&gt; containsApple = list -&gt; {\r\n        for (Fruit fruit: list) {\r\n            if (fruit.getFruit().equals(&quot;Apple&quot;)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    Predicate&lt;List&lt;Fruit&gt;&gt; containsApple = list -&gt; list.contains(new Fruit(&quot;Apple&quot;));\r\n\r\nAdvisable is to get acquainted with Stream (like _for_ iterating through a collection) and its expressive power.\r\n\r\n    Predicate&lt;List&lt;Fruit&gt;&gt; containsApple = list -&gt;\r\n        list.stream()\r\n            .anyMatch(fr -&gt; fr.getFruit().equals(&quot;Apple&quot;));","title":"Unable to get my head around Predicate isEqual method","body":"<p>One should use singular here for the class Fruits.</p>\n<p>First you must establish <em>equality</em> of Fruit. Also should you ever want it to store in a HashMap or HashSet, a <code>hashCode</code> implementation is important.</p>\n<pre><code>public class Fruit {\n    private final String fruit; // Or name.\n\n    public Fruit(String fruit) {\n        this.fruit = fruit;\n    }\n\n    public String getFruit() {\n        return fruit;\n    }\n\n    @Override\n    public boolean equals(Object other) {\n        return other instanceOf Fruit &amp;&amp; ((Fruit) other).fruit.equals(fruit);\n    }\n\n    @Override\n    public int hashCode() {\n        return fruit.hashCode();\n    }\n}\n</code></pre>\n<p>The Iterator class is rather old and its primary advantage is you can walk through and still remove an element with <code>iterator.remove()</code>, which is not allowed on the List in a - statefull - for (ConcurrentModificationException).</p>\n<pre><code>Predicate&lt;List&lt;Fruit&gt;&gt; containsApple = list -&gt; {\n    for (Fruit fruit: list) {\n        if (fruit.getFruit().equals(&quot;Apple&quot;)) {\n            return true;\n        }\n    }\n    return false;\n};\n\nPredicate&lt;List&lt;Fruit&gt;&gt; containsApple = list -&gt; list.contains(new Fruit(&quot;Apple&quot;));\n</code></pre>\n<p>Advisable is to get acquainted with Stream (like <em>for</em> iterating through a collection) and its expressive power.</p>\n<pre><code>Predicate&lt;List&lt;Fruit&gt;&gt; containsApple = list -&gt;\n    list.stream()\n        .anyMatch(fr -&gt; fr.getFruit().equals(&quot;Apple&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16765025,"reputation":1192,"user_id":12118888,"display_name":"Payel Senapati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655822281,"creation_date":1654592743,"answer_id":72528622,"question_id":72467515,"body_markdown":"As mentioned by @user16320675 in comments one of the simplest examples would be - \r\n\r\n```\r\nimport java.util.function.Predicate;\r\n\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        Integer num1 = 2;\r\n        Integer num2 = 3;\r\n        Predicate&lt;Integer&gt; predicate = Predicate.isEqual(num1);\r\n        System.out.println(predicate.test(num1));\r\n        System.out.println(predicate.test(num2));\r\n    }\r\n}\r\n```\r\n\r\nOutput -\r\n\r\n```\r\ntrue\r\nfalse\r\n```\r\n\r\nThe code can also be rewritten as -\r\n\r\n```\r\n        System.out.println(Predicate.isEqual(num1).test(num1));\r\n        System.out.println(Predicate.isEqual(num1).test(num2));\r\n```\r\n\r\nwith same output.\r\n\r\nA practical application in Java streams - \r\n\r\nCode -\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.function.Predicate;\r\n\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(&quot;Elephant&quot;);\r\n        list.add(&quot;Hippo&quot;);\r\n        list.add(&quot;Rhino&quot;);\r\n        list.add(&quot;Deer&quot;);\r\n        list.add(&quot;Hippo&quot;);\r\n        list.add(&quot;Zebra&quot;);\r\n\r\n        Predicate&lt;String&gt; predicate = Predicate.isEqual(&quot;Hippo&quot;);\r\n\r\n        list.stream().filter(predicate).forEach(System.out::println);\r\n    }\r\n}\r\n\r\n```\r\n\r\nOutput - \r\n\r\n```\r\nHippo\r\nHippo\r\n```","title":"Unable to get my head around Predicate isEqual method","body":"<p>As mentioned by @user16320675 in comments one of the simplest examples would be -</p>\n<pre><code>import java.util.function.Predicate;\n\npublic class App {\n    public static void main(String[] args) {\n        Integer num1 = 2;\n        Integer num2 = 3;\n        Predicate&lt;Integer&gt; predicate = Predicate.isEqual(num1);\n        System.out.println(predicate.test(num1));\n        System.out.println(predicate.test(num2));\n    }\n}\n</code></pre>\n<p>Output -</p>\n<pre><code>true\nfalse\n</code></pre>\n<p>The code can also be rewritten as -</p>\n<pre><code>        System.out.println(Predicate.isEqual(num1).test(num1));\n        System.out.println(Predicate.isEqual(num1).test(num2));\n</code></pre>\n<p>with same output.</p>\n<p>A practical application in Java streams -</p>\n<p>Code -</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Predicate;\n\npublic class App {\n    public static void main(String[] args) {\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        list.add(&quot;Elephant&quot;);\n        list.add(&quot;Hippo&quot;);\n        list.add(&quot;Rhino&quot;);\n        list.add(&quot;Deer&quot;);\n        list.add(&quot;Hippo&quot;);\n        list.add(&quot;Zebra&quot;);\n\n        Predicate&lt;String&gt; predicate = Predicate.isEqual(&quot;Hippo&quot;);\n\n        list.stream().filter(predicate).forEach(System.out::println);\n    }\n}\n\n</code></pre>\n<p>Output -</p>\n<pre><code>Hippo\nHippo\n</code></pre>\n"}],"owner":{"account_id":16765025,"reputation":1192,"user_id":12118888,"display_name":"Payel Senapati"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":644,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72467778,"answer_count":3,"score":2,"last_activity_date":1696173280,"creation_date":1654114294,"question_id":72467515,"body_markdown":"In Java docs it is given - \r\n\r\n```\r\nModifier and Type                      Method and Description\r\nstatic &lt;T&gt; Predicate&lt;T&gt; \t           isEqual(Object targetRef)\r\n                                       Returns a predicate that tests if two arguments are equal according to Objects.equals(Object, Object).\r\n```\r\n\r\nIn https://www.geeksforgeeks.org/java-8-predicate-with-examples/ \r\n\r\nit is given - \r\n\r\n&lt;blockquote&gt;\r\n\r\nisEqual(Object targetRef) : Returns a predicate that tests if two arguments are equal according to Objects.equals(Object, Object).\r\n\r\nstatic  Predicate isEqual(Object targetRef)\r\nReturns a predicate that tests if two arguments are \r\nequal according to Objects.equals(Object, Object).\r\nT : the type of arguments to the predicate\r\nParameters:\r\ntargetRef : the object reference with which to \r\ncompare for equality, which may be null\r\nReturns: a predicate that tests if two arguments \r\nare equal according to Objects.equals(Object, Object)\r\n\r\n&lt;/blockquote&gt;\r\n\r\nI can&#39;t get a grisp of what this `Objects.equals(Object, Object)` might be \r\n\r\nI write the following code to try it out - \r\n\r\nClass Fruits - \r\n\r\n`Fruits.java` - \r\n\r\n```\r\npublic class Fruits {\r\n    private String fruit;\r\n\r\n    public Fruits(String fruit) {\r\n        this.fruit = fruit;\r\n    }\r\n\r\n    public String getFruit() {\r\n        return fruit;\r\n    }\r\n}\r\n```\r\n\r\nHere, the other methods of predicate seem to be quite easy to understand - \r\n\r\n```\r\nPredicate&lt;List&lt;Fruits&gt;&gt; containsApple = list -&gt; {\r\n            boolean myReturn = false;\r\n            Iterator&lt;Fruits&gt; iterator = list.iterator();\r\n            while (iterator.hasNext()) {\r\n                Fruits fruits = iterator.next();\r\n                String fruit = fruits.getFruit();\r\n                if (fruit.equals(&quot;Apple&quot;)) {\r\n                    myReturn = true;\r\n                    break;\r\n                }\r\n            }\r\n            return myReturn;\r\n        };\r\n```\r\n\r\n```\r\nPredicate&lt;List&lt;Fruits&gt;&gt; containsOrange = list -&gt; {\r\n            boolean myReturn = false;\r\n            Iterator&lt;Fruits&gt; iterator = list.iterator();\r\n            while (iterator.hasNext()) {\r\n                Fruits fruits = iterator.next();\r\n                String fruit = fruits.getFruit();\r\n                if (fruit.equals(&quot;Orange&quot;)) {\r\n                    myReturn = true;\r\n                    break;\r\n                }\r\n            }\r\n            return myReturn;\r\n        };\r\n```\r\n\r\n```\r\nPredicate&lt;List&lt;Fruits&gt;&gt; containsAppleAndOrange = list -&gt; {\r\n            return containsApple.and(containsOrange).test(list);\r\n        };\r\n```\r\n```\r\nPredicate&lt;List&lt;Fruits&gt;&gt; containsAppleOrRange = list -&gt; {\r\n            return containsApple.or(containsOrange).test(list);\r\n        };\r\n\r\n```\r\n```\r\nPredicate&lt;List&lt;Fruits&gt;&gt; notContainsApple = list -&gt; {\r\n            return containsApple.negate().test(list);\r\n        };\r\n```\r\n```\r\nPredicate&lt;List&lt;Fruits&gt;&gt; notContainsOrange = list -&gt; {\r\n            return containsOrange.negate().test(list);\r\n        };\r\n```\r\n```\r\nPredicate&lt;List&lt;Fruits&gt;&gt; notContainsAppleAndOrange = list -&gt; {\r\n            return containsAppleAndOrange.negate().test(list);\r\n        };\r\n```\r\n```\r\nPredicate&lt;List&lt;Fruits&gt;&gt; notContainsAppleOrOrange = list -&gt; {\r\n            return containsAppleOrRange.negate().test(list);\r\n        };\r\n```\r\n\r\nHere I test it with following data - \r\n\r\n```\r\n        List&lt;Fruits&gt; list1 = new ArrayList&lt;&gt;(List.of(\r\n                new Fruits(&quot;Apple&quot;),\r\n                new Fruits(&quot;Orange&quot;),\r\n                new Fruits(&quot;Mango&quot;),\r\n                new Fruits(&quot;Banana&quot;)\r\n        ));\r\n\r\n        List&lt;Fruits&gt; list2 = new ArrayList&lt;&gt;(List.of(\r\n                new Fruits(&quot;Apple&quot;),\r\n                new Fruits(&quot;Mango&quot;),\r\n                new Fruits(&quot;Banana&quot;),\r\n                new Fruits(&quot;Berry&quot;)\r\n        ));\r\n\r\n        List&lt;Fruits&gt; list3 = new ArrayList&lt;&gt;(List.of(\r\n                new Fruits(&quot;Orange&quot;),\r\n                new Fruits(&quot;Mango&quot;),\r\n                new Fruits(&quot;Banana&quot;),\r\n                new Fruits(&quot;Berry&quot;)\r\n        ));\r\n```\r\n\r\nResult is as expected. \r\n\r\nBut in no way can I understand how to implement the `isEqual()` method - \r\n\r\nTo see that two arguments are equal are not I create another predicate - \r\n\r\n```\r\nredicate&lt;List&lt;Fruits&gt;&gt; containsApple2 = list -&gt; {\r\n            boolean myReturn = false;\r\n            Iterator&lt;Fruits&gt; iterator = list.iterator();\r\n            while (iterator.hasNext()) {\r\n                Fruits fruits = iterator.next();\r\n                String fruit = fruits.getFruit();\r\n                if (fruit.equals(&quot;Apple&quot;)) {\r\n                    myReturn = true;\r\n                    break;\r\n                }\r\n            }\r\n            return myReturn;\r\n        };\r\n```\r\n\r\nI try something like (without understanding why) - \r\n\r\n```\r\nSystem.out.println(Predicate.isEqual(containsApple).test(list1));\r\n```\r\n\r\n\r\nOutput - `false`\r\n\r\nNow what happened here?\r\n\r\n```\r\nSystem.out.println(Predicate.isEqual(containsApple2).test(containsApple));\r\n```\r\n\r\nOutput - `false`\r\n\r\nNow again what happened here?\r\n\r\nSo, how to exactly use this `isEqual` method? ","title":"Unable to get my head around Predicate isEqual method","body":"<p>In Java docs it is given -</p>\n<pre><code>Modifier and Type                      Method and Description\nstatic &lt;T&gt; Predicate&lt;T&gt;                isEqual(Object targetRef)\n                                       Returns a predicate that tests if two arguments are equal according to Objects.equals(Object, Object).\n</code></pre>\n<p>In <a href=\"https://www.geeksforgeeks.org/java-8-predicate-with-examples/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/java-8-predicate-with-examples/</a></p>\n<p>it is given -</p>\n<blockquote>\n<p>isEqual(Object targetRef) : Returns a predicate that tests if two arguments are equal according to Objects.equals(Object, Object).</p>\n<p>static  Predicate isEqual(Object targetRef)\nReturns a predicate that tests if two arguments are\nequal according to Objects.equals(Object, Object).\nT : the type of arguments to the predicate\nParameters:\ntargetRef : the object reference with which to\ncompare for equality, which may be null\nReturns: a predicate that tests if two arguments\nare equal according to Objects.equals(Object, Object)</p>\n</blockquote>\n<p>I can't get a grisp of what this <code>Objects.equals(Object, Object)</code> might be</p>\n<p>I write the following code to try it out -</p>\n<p>Class Fruits -</p>\n<p><code>Fruits.java</code> -</p>\n<pre><code>public class Fruits {\n    private String fruit;\n\n    public Fruits(String fruit) {\n        this.fruit = fruit;\n    }\n\n    public String getFruit() {\n        return fruit;\n    }\n}\n</code></pre>\n<p>Here, the other methods of predicate seem to be quite easy to understand -</p>\n<pre><code>Predicate&lt;List&lt;Fruits&gt;&gt; containsApple = list -&gt; {\n            boolean myReturn = false;\n            Iterator&lt;Fruits&gt; iterator = list.iterator();\n            while (iterator.hasNext()) {\n                Fruits fruits = iterator.next();\n                String fruit = fruits.getFruit();\n                if (fruit.equals(&quot;Apple&quot;)) {\n                    myReturn = true;\n                    break;\n                }\n            }\n            return myReturn;\n        };\n</code></pre>\n<pre><code>Predicate&lt;List&lt;Fruits&gt;&gt; containsOrange = list -&gt; {\n            boolean myReturn = false;\n            Iterator&lt;Fruits&gt; iterator = list.iterator();\n            while (iterator.hasNext()) {\n                Fruits fruits = iterator.next();\n                String fruit = fruits.getFruit();\n                if (fruit.equals(&quot;Orange&quot;)) {\n                    myReturn = true;\n                    break;\n                }\n            }\n            return myReturn;\n        };\n</code></pre>\n<pre><code>Predicate&lt;List&lt;Fruits&gt;&gt; containsAppleAndOrange = list -&gt; {\n            return containsApple.and(containsOrange).test(list);\n        };\n</code></pre>\n<pre><code>Predicate&lt;List&lt;Fruits&gt;&gt; containsAppleOrRange = list -&gt; {\n            return containsApple.or(containsOrange).test(list);\n        };\n\n</code></pre>\n<pre><code>Predicate&lt;List&lt;Fruits&gt;&gt; notContainsApple = list -&gt; {\n            return containsApple.negate().test(list);\n        };\n</code></pre>\n<pre><code>Predicate&lt;List&lt;Fruits&gt;&gt; notContainsOrange = list -&gt; {\n            return containsOrange.negate().test(list);\n        };\n</code></pre>\n<pre><code>Predicate&lt;List&lt;Fruits&gt;&gt; notContainsAppleAndOrange = list -&gt; {\n            return containsAppleAndOrange.negate().test(list);\n        };\n</code></pre>\n<pre><code>Predicate&lt;List&lt;Fruits&gt;&gt; notContainsAppleOrOrange = list -&gt; {\n            return containsAppleOrRange.negate().test(list);\n        };\n</code></pre>\n<p>Here I test it with following data -</p>\n<pre><code>        List&lt;Fruits&gt; list1 = new ArrayList&lt;&gt;(List.of(\n                new Fruits(&quot;Apple&quot;),\n                new Fruits(&quot;Orange&quot;),\n                new Fruits(&quot;Mango&quot;),\n                new Fruits(&quot;Banana&quot;)\n        ));\n\n        List&lt;Fruits&gt; list2 = new ArrayList&lt;&gt;(List.of(\n                new Fruits(&quot;Apple&quot;),\n                new Fruits(&quot;Mango&quot;),\n                new Fruits(&quot;Banana&quot;),\n                new Fruits(&quot;Berry&quot;)\n        ));\n\n        List&lt;Fruits&gt; list3 = new ArrayList&lt;&gt;(List.of(\n                new Fruits(&quot;Orange&quot;),\n                new Fruits(&quot;Mango&quot;),\n                new Fruits(&quot;Banana&quot;),\n                new Fruits(&quot;Berry&quot;)\n        ));\n</code></pre>\n<p>Result is as expected.</p>\n<p>But in no way can I understand how to implement the <code>isEqual()</code> method -</p>\n<p>To see that two arguments are equal are not I create another predicate -</p>\n<pre><code>redicate&lt;List&lt;Fruits&gt;&gt; containsApple2 = list -&gt; {\n            boolean myReturn = false;\n            Iterator&lt;Fruits&gt; iterator = list.iterator();\n            while (iterator.hasNext()) {\n                Fruits fruits = iterator.next();\n                String fruit = fruits.getFruit();\n                if (fruit.equals(&quot;Apple&quot;)) {\n                    myReturn = true;\n                    break;\n                }\n            }\n            return myReturn;\n        };\n</code></pre>\n<p>I try something like (without understanding why) -</p>\n<pre><code>System.out.println(Predicate.isEqual(containsApple).test(list1));\n</code></pre>\n<p>Output - <code>false</code></p>\n<p>Now what happened here?</p>\n<pre><code>System.out.println(Predicate.isEqual(containsApple2).test(containsApple));\n</code></pre>\n<p>Output - <code>false</code></p>\n<p>Now again what happened here?</p>\n<p>So, how to exactly use this <code>isEqual</code> method?</p>\n"},{"tags":["java","android","service","battery-saver","android-powermanager"],"comments":[{"owner":{"account_id":12438275,"reputation":1057,"user_id":9057721,"display_name":"Style-7"},"score":0,"creation_date":1696176094,"post_id":77211053,"comment_id":136116975,"body_markdown":"There is no way for prevent stopping.","body":"There is no way for prevent stopping."},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":0,"creation_date":1696179207,"post_id":77211053,"comment_id":136117343,"body_markdown":"You can create foreground service with startForeground and adding notification to it.","body":"You can create foreground service with startForeground and adding notification to it."}],"owner":{"account_id":4028357,"reputation":41,"user_id":3315586,"display_name":"Murtaza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1696173247,"creation_date":1696173247,"question_id":77211053,"body_markdown":"my code runs at Android 5.1 (API level 22), in my application ondestroy activiit i will start my service for background works.\r\nfor a while everything goes normal and service is in running state. bu sudenly it stop.\r\nwhos can is prevent is from stoppng\r\n\r\n\r\n\r\n`context.startService(new Intent(context, RunningService.class));`\r\n\r\n` @Nullable\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n        return START_STICKY;\r\n    }`","title":"Android Service Stops after a while","body":"<p>my code runs at Android 5.1 (API level 22), in my application ondestroy activiit i will start my service for background works.\nfor a while everything goes normal and service is in running state. bu sudenly it stop.\nwhos can is prevent is from stoppng</p>\n<p><code>context.startService(new Intent(context, RunningService.class));</code></p>\n<p>` @Nullable\n@Override\npublic IBinder onBind(Intent intent) {\nreturn null;\n}</p>\n<pre><code>@Override\npublic int onStartCommand(Intent intent, int flags, int startId) {\n    return START_STICKY;\n}`\n</code></pre>\n"},{"tags":["java","spring-boot","maven","compilation","lombok"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1683634254,"post_id":76208835,"comment_id":134393799,"body_markdown":"Please check again. Maybe restart IntelliJ.  With Lombok plugin installed and enabled and with Annotation processing enabled this works for me.","body":"Please check again. Maybe restart IntelliJ.  With Lombok plugin installed and enabled and with Annotation processing enabled this works for me."}],"answers":[{"tags":[],"owner":{"account_id":4418450,"reputation":11,"user_id":3599273,"display_name":"Scavia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683634295,"creation_date":1683634268,"answer_id":76209221,"question_id":76208835,"body_markdown":" - Firstly remove the scope tag from the pom\r\n - run the &quot;mvn clean compile&quot;\r\n - make sure the lombok dependency has been imported into your project and you must see it under the external dependencies in your project explorer\r\n - then use the @Data annotation it makes your code less busy\r\n\r\n","title":"Compilation error with Lombok dependency on SpringBoot Application - Maven","body":"<ul>\n<li>Firstly remove the scope tag from the pom</li>\n<li>run the &quot;mvn clean compile&quot;</li>\n<li>make sure the lombok dependency has been imported into your project and you must see it under the external dependencies in your project explorer</li>\n<li>then use the @Data annotation it makes your code less busy</li>\n</ul>\n"}],"owner":{"account_id":17945962,"reputation":25,"user_id":13040241,"display_name":"Andres Chaves"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696172984,"creation_date":1683631780,"question_id":76208835,"body_markdown":"I want my application to use the Lombok dependency, mainly because of the ***@Getters, @Setters, @NoArgsConstructor and @AllArgsConstructors***, I already have the plugin installed in IntelliJ and the Annotation Processors configuration enabled. When compiling the project Maven throws error: *&#39;cannot find symbol&#39;*, everywhere ***getters*** and ***setters*** are being used.\r\nThis is the dependency that i&#39;m using:\r\n\r\n```\r\n    &lt;dependencies&gt;\r\n        ...\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.26&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n ```\r\n\r\nThe version of SpringBoot I am using is *3.0.2*\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/B3gGA.png","title":"Compilation error with Lombok dependency on SpringBoot Application - Maven","body":"<p>I want my application to use the Lombok dependency, mainly because of the <em><strong>@Getters, @Setters, @NoArgsConstructor and @AllArgsConstructors</strong></em>, I already have the plugin installed in IntelliJ and the Annotation Processors configuration enabled. When compiling the project Maven throws error: <em>'cannot find symbol'</em>, everywhere <em><strong>getters</strong></em> and <em><strong>setters</strong></em> are being used.\nThis is the dependency that i'm using:</p>\n<pre><code>    &lt;dependencies&gt;\n        ...\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.26&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>The version of SpringBoot I am using is <em>3.0.2</em></p>\n<p><a href=\"https://i.stack.imgur.com/B3gGA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B3gGA.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","postgresql","spring-boot","unit-testing","testcontainers"],"answers":[{"tags":[],"owner":{"account_id":183892,"reputation":1036,"user_id":419581,"accept_rate":100,"display_name":"r&#233;my"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623353623,"creation_date":1623276674,"answer_id":67912303,"question_id":67912066,"body_markdown":"I guess you missed the following\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\ntest-dependency. (Or remove the `&lt;scope/&gt;` at all.)\r\n\r\nTable not found errors often indicate a mismatch of the schema and model and the available driver.\r\n\r\nAlso your test class seems to be spring-boot independent. How do you run it?  You could benefit of auto-configuration, like described here: https://www.baeldung.com/spring-boot-testcontainers-integration-test\r\n(but I guess you don&#39;t like that ;))","title":"Spring boot test using testcontainers postgresql","body":"<p>I guess you missed the following</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>test-dependency. (Or remove the <code>&lt;scope/&gt;</code> at all.)</p>\n<p>Table not found errors often indicate a mismatch of the schema and model and the available driver.</p>\n<p>Also your test class seems to be spring-boot independent. How do you run it?  You could benefit of auto-configuration, like described here: <a href=\"https://www.baeldung.com/spring-boot-testcontainers-integration-test\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-testcontainers-integration-test</a>\n(but I guess you don't like that ;))</p>\n"},{"tags":[],"owner":{"account_id":10328218,"reputation":2812,"user_id":7619034,"display_name":"Rob Evans"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623285533,"creation_date":1623285208,"answer_id":67913180,"question_id":67912066,"body_markdown":"The error is telling you no such table exists\r\n```\r\norg.postgresql.util.PSQLException: ERROR: relation &quot;table_from_schema&quot; does not exist\r\n```\r\n\r\nIt seems that the connection to the DB is established, but the query you&#39;re attempting is not working.\r\n\r\nI had a quick look and from what I could see the table `table_from_schema` is not present in the standard postgres schema.\r\n\r\nHowever `select * from pg_tables;` may work. Try accessing a different table and see if this resolves the issue for you temporarily, so you can confirm the issue is selecting from a table name that doesn&#39;t exist rather than something more obscure.\r\n\r\nIf you are able to, you can put a break point in after the docker container has spun up and connect using a database client. Once you&#39;re connected you can then try inspect the database manually, testing your SQL commands before you copy-paste them to your codebase.\r\n\r\nIf you want the SQL scripts to run in your docker container, you need to mount the `test/resources` dir to the container&#39;s `/docker-entrypoint-initdb.d` dir using a volume mapping for the container. Any `*.sh` and `*.sql` scripts will then be run. You may need to restructure your sql scripts so you have one root script that calls scripts in a directory lower down. This is especially true if there&#39;s any ordering requirement between the two.\r\n\r\nSee https://hub.docker.com/_/postgres &quot;Initialization scripts&quot;\r\n\r\nMounting into your container with testcontainers is as simple as:\r\n\r\n```java\r\nString pathToFile = &quot;&lt;project-root-dir&gt;/src/test/resources&quot;;\r\nnew GenericContainer(...)\r\n        .withFileSystemBind(pathToFile, &quot;/docker-entrypoint-initdb.d&quot;, BindMode.READ_ONLY)\r\n```\r\n\r\nSee https://www.testcontainers.org/features/files/","title":"Spring boot test using testcontainers postgresql","body":"<p>The error is telling you no such table exists</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: relation &quot;table_from_schema&quot; does not exist\n</code></pre>\n<p>It seems that the connection to the DB is established, but the query you're attempting is not working.</p>\n<p>I had a quick look and from what I could see the table <code>table_from_schema</code> is not present in the standard postgres schema.</p>\n<p>However <code>select * from pg_tables;</code> may work. Try accessing a different table and see if this resolves the issue for you temporarily, so you can confirm the issue is selecting from a table name that doesn't exist rather than something more obscure.</p>\n<p>If you are able to, you can put a break point in after the docker container has spun up and connect using a database client. Once you're connected you can then try inspect the database manually, testing your SQL commands before you copy-paste them to your codebase.</p>\n<p>If you want the SQL scripts to run in your docker container, you need to mount the <code>test/resources</code> dir to the container's <code>/docker-entrypoint-initdb.d</code> dir using a volume mapping for the container. Any <code>*.sh</code> and <code>*.sql</code> scripts will then be run. You may need to restructure your sql scripts so you have one root script that calls scripts in a directory lower down. This is especially true if there's any ordering requirement between the two.</p>\n<p>See <a href=\"https://hub.docker.com/_/postgres\" rel=\"nofollow noreferrer\">https://hub.docker.com/_/postgres</a> &quot;Initialization scripts&quot;</p>\n<p>Mounting into your container with testcontainers is as simple as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String pathToFile = &quot;&lt;project-root-dir&gt;/src/test/resources&quot;;\nnew GenericContainer(...)\n        .withFileSystemBind(pathToFile, &quot;/docker-entrypoint-initdb.d&quot;, BindMode.READ_ONLY)\n</code></pre>\n<p>See <a href=\"https://www.testcontainers.org/features/files/\" rel=\"nofollow noreferrer\">https://www.testcontainers.org/features/files/</a></p>\n"}],"owner":{"account_id":3816358,"reputation":553,"user_id":3165644,"accept_rate":0,"display_name":"Mihir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13153,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1696172495,"creation_date":1623274959,"question_id":67912066,"body_markdown":"I have a Java Spring boot project, heavily using the database (Postgres) for it&#39;s repository/data. It is the basic MVC project, controllers are all REST controllers. The project works well (service is up, able to call service via REST clients and all).\r\n\r\nNow, I am adding the unit tests to it. I am pretty new to Spring boot and mostly the unit test part. Owing to the CI/CD (build pipeline), I cannot use the persistent/external DB for tests. Hence I need to use in-memory DB.\r\n\r\nThe initial run (Main class) runs a bunch of DB queries to build up cache while project comes up. So I would need postgres DB for testing (lots of DB functions used).\r\n\r\nBasically, I would need to use Testcontainers (postgresql). I am writing a very basic test first to get hold of it.\r\n\r\nI have the schema.sql and data.sql stored (to be used only for testing).\r\n\r\n    src\r\n       |\r\n       main\r\n       test\r\n    \t\t|\r\n    \t\tresources\r\n    \t\t\t\t|\r\n    \t\t\t\tapplication-test.properties\r\n    \t\t\t\tschema.sql\r\n    \t\t\t\tdata.sql\r\n\r\nRelevant pom.xml\r\n\r\n    &lt;properties&gt;\r\n    \t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t&lt;testcontainers.version&gt;1.15.1&lt;/testcontainers.version&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;dependencies&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;0.9.1&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;exclusions&gt;\r\n    \t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n    \t\t\t&lt;/exclusion&gt;\r\n    \t\t&lt;/exclusions&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.11.2&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.11&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.9.4&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;20201115&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;testcontainers&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;${testcontainers.version}&lt;/version&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;localstack&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;${testcontainers.version}&lt;/version&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;${testcontainers.version}&lt;/version&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;${testcontainers.version}&lt;/version&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    &lt;/dependencies&gt;\t\r\n\r\nMy Test class:\r\n\r\n    @Testcontainers\r\n    @Sql(scripts = {&quot;file:src/test/resources/schema.sql&quot;,&quot;file:src/test/resources/data.sql&quot;})\r\n    class ApplicationTests {\r\n    \r\n    \t@Container\r\n    \tstatic PostgreSQLContainer&lt;?&gt; postgreSQLContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:12&quot;)\r\n    \t\t\t.withUsername(&quot;testcontainers&quot;)\r\n    \t\t\t.withPassword(&quot;testcontainers&quot;)\r\n    \t\t\t.withDatabaseName(&quot;tescontainers&quot;);\r\n    \r\n    \r\n    \t@Test\r\n    \tvoid testPostgreSQLModule() throws SQLException {\r\n    \t\ttry (Connection connection = DriverManager\r\n    \t\t\t\t.getConnection(postgreSQLContainer.getJdbcUrl(), &quot;testcontainers&quot;, &quot;testcontainers&quot;);\r\n    \t\t\t PreparedStatement preparedStatement = connection.prepareStatement(&quot;SELECT * FROM table_from_schema&quot;)) {\r\n    \t\t\ttry (ResultSet resultSet = preparedStatement.executeQuery()) {\r\n    \t\t\t\twhile (resultSet.next()) {\r\n    \t\t\t\t\tSystem.out.println(resultSet.getString(&quot;column1&quot;));\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\t\r\n\r\nI am simply trying to test the DB.\r\n\r\nHowever, when I run the test, it fails saying that\r\n\r\n    org.postgresql.util.PSQLException: ERROR: relation &quot;table_from_schema&quot; does not exist\r\n\r\nI tried to debug it, i.e. stopped just inside my Test (testPostgreSQLModule). I can see the docker component with Postgres.\r\n\r\n    $ docker ps\r\n    CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS                     NAMES\r\n    fc3ff1e04ceb        postgres:12                 &quot;docker-entrypoint.s…&quot;   16 seconds ago      Up 15 seconds \r\n\r\nBut when I login to it and run psql, I see the DB (tescontainers) is created, however it does not have any schema (tables/functions).\r\n\r\n    tescontainers=# \\dt\r\n    Did not find any relations.\r\n    tescontainers=# \r\n\r\nBasically, my files are not being run. \r\n\r\nDoes @SQL annotation on class level does not work with Testcontainers initialization as in my case?\r\n\r\nWhat is needed here so both my initial scripts run?\r\n\r\nI tried using .withInitScript, and it runs. However, I have lots of data to initialize and the file is too large (and would grow), so I separate DDL (schema) and Inserts (data). Now, my issue is how to run multiple init files (schema.sql, data.sql) using &quot;withInitScript&quot; ? So I tries @SQL annotation, but it does not seems to work.\r\n\r\n---**UPDATE/EDIT**----\r\n\r\nTo give the context clear, I am looking for below. If anyone can guide please?\r\n\r\n 1. All profile (dev/ist/uat/prod) should be using their respective persistence DB (from their application.*env*.properties). \r\n 2. Only for the test, I need the in-memory DB, but cannot use H2 (and similar) as I have lots of DB related tests and need Postgres (functions , etc). So, trying out Testcontainers.\r\n 3. When the application boots up, it fetches some data from respective DB (based on env) to prepare the initial cache and other methods will use it while servicing any rest calls. Hence, for **Test** (only) I need a new in-memory DB with all schema/data (which I can provide via SQL files) , so that while test, the boot up should use that test DB and corresponding tests wil work based on that initial data.\r\n 4. So I need a way to bring up test DB (in-memory/testcontainers) whenever Test runs, and pass multiple SQL files for initialization of Test DB (before any test runs). Any idea on what is the best approach?","title":"Spring boot test using testcontainers postgresql","body":"<p>I have a Java Spring boot project, heavily using the database (Postgres) for it's repository/data. It is the basic MVC project, controllers are all REST controllers. The project works well (service is up, able to call service via REST clients and all).</p>\n<p>Now, I am adding the unit tests to it. I am pretty new to Spring boot and mostly the unit test part. Owing to the CI/CD (build pipeline), I cannot use the persistent/external DB for tests. Hence I need to use in-memory DB.</p>\n<p>The initial run (Main class) runs a bunch of DB queries to build up cache while project comes up. So I would need postgres DB for testing (lots of DB functions used).</p>\n<p>Basically, I would need to use Testcontainers (postgresql). I am writing a very basic test first to get hold of it.</p>\n<p>I have the schema.sql and data.sql stored (to be used only for testing).</p>\n<pre><code>src\n   |\n   main\n   test\n        |\n        resources\n                |\n                application-test.properties\n                schema.sql\n                data.sql\n</code></pre>\n<p>Relevant pom.xml</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;testcontainers.version&gt;1.15.1&lt;/testcontainers.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n        &lt;version&gt;0.9.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.11.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n        &lt;version&gt;3.11&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;\n        &lt;version&gt;1.9.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.json&lt;/groupId&gt;\n        &lt;artifactId&gt;json&lt;/artifactId&gt;\n        &lt;version&gt;20201115&lt;/version&gt;\n    &lt;/dependency&gt;\n    \n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n        &lt;artifactId&gt;testcontainers&lt;/artifactId&gt;\n        &lt;version&gt;${testcontainers.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n        &lt;artifactId&gt;localstack&lt;/artifactId&gt;\n        &lt;version&gt;${testcontainers.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n        &lt;version&gt;${testcontainers.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;version&gt;${testcontainers.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt; \n</code></pre>\n<p>My Test class:</p>\n<pre><code>@Testcontainers\n@Sql(scripts = {&quot;file:src/test/resources/schema.sql&quot;,&quot;file:src/test/resources/data.sql&quot;})\nclass ApplicationTests {\n\n    @Container\n    static PostgreSQLContainer&lt;?&gt; postgreSQLContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:12&quot;)\n            .withUsername(&quot;testcontainers&quot;)\n            .withPassword(&quot;testcontainers&quot;)\n            .withDatabaseName(&quot;tescontainers&quot;);\n\n\n    @Test\n    void testPostgreSQLModule() throws SQLException {\n        try (Connection connection = DriverManager\n                .getConnection(postgreSQLContainer.getJdbcUrl(), &quot;testcontainers&quot;, &quot;testcontainers&quot;);\n             PreparedStatement preparedStatement = connection.prepareStatement(&quot;SELECT * FROM table_from_schema&quot;)) {\n            try (ResultSet resultSet = preparedStatement.executeQuery()) {\n                while (resultSet.next()) {\n                    System.out.println(resultSet.getString(&quot;column1&quot;));\n                }\n            }\n        }\n    }\n}   \n</code></pre>\n<p>I am simply trying to test the DB.</p>\n<p>However, when I run the test, it fails saying that</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: relation &quot;table_from_schema&quot; does not exist\n</code></pre>\n<p>I tried to debug it, i.e. stopped just inside my Test (testPostgreSQLModule). I can see the docker component with Postgres.</p>\n<pre><code>$ docker ps\nCONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS                     NAMES\nfc3ff1e04ceb        postgres:12                 &quot;docker-entrypoint.s…&quot;   16 seconds ago      Up 15 seconds \n</code></pre>\n<p>But when I login to it and run psql, I see the DB (tescontainers) is created, however it does not have any schema (tables/functions).</p>\n<pre><code>tescontainers=# \\dt\nDid not find any relations.\ntescontainers=# \n</code></pre>\n<p>Basically, my files are not being run.</p>\n<p>Does @SQL annotation on class level does not work with Testcontainers initialization as in my case?</p>\n<p>What is needed here so both my initial scripts run?</p>\n<p>I tried using .withInitScript, and it runs. However, I have lots of data to initialize and the file is too large (and would grow), so I separate DDL (schema) and Inserts (data). Now, my issue is how to run multiple init files (schema.sql, data.sql) using &quot;withInitScript&quot; ? So I tries @SQL annotation, but it does not seems to work.</p>\n<p>---<strong>UPDATE/EDIT</strong>----</p>\n<p>To give the context clear, I am looking for below. If anyone can guide please?</p>\n<ol>\n<li>All profile (dev/ist/uat/prod) should be using their respective persistence DB (from their application.<em>env</em>.properties).</li>\n<li>Only for the test, I need the in-memory DB, but cannot use H2 (and similar) as I have lots of DB related tests and need Postgres (functions , etc). So, trying out Testcontainers.</li>\n<li>When the application boots up, it fetches some data from respective DB (based on env) to prepare the initial cache and other methods will use it while servicing any rest calls. Hence, for <strong>Test</strong> (only) I need a new in-memory DB with all schema/data (which I can provide via SQL files) , so that while test, the boot up should use that test DB and corresponding tests wil work based on that initial data.</li>\n<li>So I need a way to bring up test DB (in-memory/testcontainers) whenever Test runs, and pass multiple SQL files for initialization of Test DB (before any test runs). Any idea on what is the best approach?</li>\n</ol>\n"},{"tags":["java","visual-studio-code","ssh","vscode-extensions"],"answers":[{"tags":[],"owner":{"account_id":18596004,"reputation":29,"user_id":13552014,"display_name":"ecormaksin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696143914,"creation_date":1696143914,"answer_id":77209535,"question_id":77209328,"body_markdown":"As a workaround, when I add a configuration to maven-compiler-plugin to maven pom.xml and launch maven from command-line, the source file become to be compiled automatically.\r\n\r\nI use Spring Boot, and the configuration example is as follows.\r\n\r\n```xml\r\n  &lt;!-- ... --&gt;\r\n  &lt;properties&gt;\r\n    &lt;java.version&gt;11&lt;/java.version&gt;\r\n  &lt;/properties&gt;\r\n  &lt;!-- ... --&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.11.0&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;source&gt;${java.version}&lt;/source&gt;\r\n          &lt;target&gt;${java.version}&lt;/target&gt;\r\n          &lt;compilerArgs&gt;\r\n          &lt;arg&gt;-Xlint:all&lt;/arg&gt;\r\n          &lt;/compilerArgs&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  &lt;!-- ... --&gt;\r\n```","title":"Java Autobuild does not work on Remote SSH via Visual Studio Code","body":"<p>As a workaround, when I add a configuration to maven-compiler-plugin to maven pom.xml and launch maven from command-line, the source file become to be compiled automatically.</p>\n<p>I use Spring Boot, and the configuration example is as follows.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;!-- ... --&gt;\n  &lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n  &lt;/properties&gt;\n  &lt;!-- ... --&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.11.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;${java.version}&lt;/source&gt;\n          &lt;target&gt;${java.version}&lt;/target&gt;\n          &lt;compilerArgs&gt;\n          &lt;arg&gt;-Xlint:all&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;!-- ... --&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18596004,"reputation":29,"user_id":13552014,"display_name":"ecormaksin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696171251,"creation_date":1696171251,"answer_id":77210948,"question_id":77209328,"body_markdown":"I could solve the problem.\r\nVSCode extensions on the remote machine were not installed properly.\r\n&#39;Extension Pack for Java&#39; extension and other extensions did not work.\r\nIn the Explorer pane on vscode, &#39;JAVA PROJECTS&#39; and &#39;MAVEN&#39; sections did not exist.\r\n\r\nWhen I **disabled ipv6 on the remote machine** (VirtualBox vm), extensions were installed properly.\r\nAnd when I changed a Java source file, autobuild worked without maven-compiler-plugin.","title":"Java Autobuild does not work on Remote SSH via Visual Studio Code","body":"<p>I could solve the problem.\nVSCode extensions on the remote machine were not installed properly.\n'Extension Pack for Java' extension and other extensions did not work.\nIn the Explorer pane on vscode, 'JAVA PROJECTS' and 'MAVEN' sections did not exist.</p>\n<p>When I <strong>disabled ipv6 on the remote machine</strong> (VirtualBox vm), extensions were installed properly.\nAnd when I changed a Java source file, autobuild worked without maven-compiler-plugin.</p>\n"}],"owner":{"account_id":18596004,"reputation":29,"user_id":13552014,"display_name":"ecormaksin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77210948,"answer_count":2,"score":0,"last_activity_date":1696171251,"creation_date":1696137430,"question_id":77209328,"body_markdown":"I use Visual Studio Code and &#39;Remote - SSH&#39; extension.\r\nI launch a virtual machine (Ubuntu 22.04) on VirtualBox with bridge network. My host machine is Windows 11 Pro 22H2.\r\nI installed xrdp on the virtual machine, and I can connect to the virtual machine using remote desktop.\r\n\r\nWhen I edit a Java source file using Visual Studio Code on my host via Remote SSH, the source file is not built automatically.\r\n\r\nHowever, I edit the same Java source file using &#39;remote&#39; Visual Stdio Code on the guest virtual machine via remote desktop(xrdp), the source file is built automatically.\r\n\r\nTo develop using Visual Studio Code on the virtual machine is slow, so I want to develop on my host using Visual Studio Code and Remote SSH extension.\r\n\r\nHow do I resolve to this problem?\r\n","title":"Java Autobuild does not work on Remote SSH via Visual Studio Code","body":"<p>I use Visual Studio Code and 'Remote - SSH' extension.\nI launch a virtual machine (Ubuntu 22.04) on VirtualBox with bridge network. My host machine is Windows 11 Pro 22H2.\nI installed xrdp on the virtual machine, and I can connect to the virtual machine using remote desktop.</p>\n<p>When I edit a Java source file using Visual Studio Code on my host via Remote SSH, the source file is not built automatically.</p>\n<p>However, I edit the same Java source file using 'remote' Visual Stdio Code on the guest virtual machine via remote desktop(xrdp), the source file is built automatically.</p>\n<p>To develop using Visual Studio Code on the virtual machine is slow, so I want to develop on my host using Visual Studio Code and Remote SSH extension.</p>\n<p>How do I resolve to this problem?</p>\n"},{"tags":["java","flip","bytebuffer"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":6,"creation_date":1360453992,"post_id":14792968,"comment_id":20715220,"body_markdown":"It &quot;flips&quot; the buffer from read to write (and vice versa). http://thushw.blogspot.com/2009/10/java-bytebuffer-how-does-this-work.html","body":"It &quot;flips&quot; the buffer from read to write (and vice versa). <a href=\"http://thushw.blogspot.com/2009/10/java-bytebuffer-how-does-this-work.html\" rel=\"nofollow noreferrer\">thushw.blogspot.com/2009/10/&hellip;</a>"},{"owner":{"account_id":1241689,"reputation":172569,"user_id":1204143,"accept_rate":64,"display_name":"nneonneo"},"score":2,"creation_date":1360454437,"post_id":14792968,"comment_id":20715332,"body_markdown":"@BrianRoach: It flips from read to write but is not as useful for write to read unless you are writing fixed-size structures. For flipping to write to read, use `reset` instead.","body":"@BrianRoach: It flips from read to write but is not as useful for write to read unless you are writing fixed-size structures. For flipping to write to read, use <code>reset</code> instead."},{"owner":{"display_name":"user166390"},"score":0,"creation_date":1360455133,"post_id":14792968,"comment_id":20715473,"body_markdown":"Remember to ask &quot;objective&quot; questions; or, at least, make the predominant question seem objective :D","body":"Remember to ask &quot;objective&quot; questions; or, at least, make the predominant question seem objective :D"},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":0,"creation_date":1360467187,"post_id":14792968,"comment_id":20717639,"body_markdown":"@nneonneo - It was kinda non-question, wasn&#39;t really going to spend much time on explaining the details, hence just a comment and a link.","body":"@nneonneo - It was kinda non-question, wasn&#39;t really going to spend much time on explaining the details, hence just a comment and a link."}],"answers":[{"tags":[],"owner":{"account_id":1241689,"reputation":172569,"user_id":1204143,"accept_rate":64,"display_name":"nneonneo"},"down_vote_count":0,"up_vote_count":153,"is_accepted":false,"score":153,"last_activity_date":1508000293,"creation_date":1360454214,"answer_id":14793037,"question_id":14792968,"body_markdown":"One fairly common use case for the `ByteBuffer` is to construct some data structure piece-by-piece and then write that whole structure to disk. `flip` is used to flip the `ByteBuffer` from &quot;reading from I/O&quot; (`put`ting) to &quot;writing to I/O&quot; (`get`ting): after a sequence of `put`s is used to fill the `ByteBuffer`, `flip` will set the limit of the buffer to the current position and reset the position to zero. This has the effect of making a future `get` or `write` from the buffer write all of what was `put` into the buffer and no more.\r\n\r\nAfter finishing the `put`, you might want to reuse the `ByteBuffer` to construct another data structure. To &quot;unflip&quot; it, call `clear`. This resets the limit to the capacity (making all of the buffer usable), and the position to 0.\r\n\r\nSo, a typical usage scenario:\r\n\r\n    ByteBuffer b = new ByteBuffer(1024);\r\n    for(int i=0; i&lt;N; i++) {\r\n        b.clear();\r\n        b.put(header[i]);\r\n        b.put(data[i]);\r\n        b.flip();\r\n        out.write(b);\r\n    }","title":"What is the purpose of ByteBuffer&#39;s flip method? (And why is it called &quot;flip&quot;?)","body":"<p>One fairly common use case for the <code>ByteBuffer</code> is to construct some data structure piece-by-piece and then write that whole structure to disk. <code>flip</code> is used to flip the <code>ByteBuffer</code> from \"reading from I/O\" (<code>put</code>ting) to \"writing to I/O\" (<code>get</code>ting): after a sequence of <code>put</code>s is used to fill the <code>ByteBuffer</code>, <code>flip</code> will set the limit of the buffer to the current position and reset the position to zero. This has the effect of making a future <code>get</code> or <code>write</code> from the buffer write all of what was <code>put</code> into the buffer and no more.</p>\n\n<p>After finishing the <code>put</code>, you might want to reuse the <code>ByteBuffer</code> to construct another data structure. To \"unflip\" it, call <code>clear</code>. This resets the limit to the capacity (making all of the buffer usable), and the position to 0.</p>\n\n<p>So, a typical usage scenario:</p>\n\n<pre><code>ByteBuffer b = new ByteBuffer(1024);\nfor(int i=0; i&lt;N; i++) {\n    b.clear();\n    b.put(header[i]);\n    b.put(data[i]);\n    b.flip();\n    out.write(b);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"down_vote_count":26,"up_vote_count":27,"is_accepted":false,"score":1,"last_activity_date":1651493692,"creation_date":1360460186,"answer_id":14793730,"question_id":14792968,"body_markdown":"A buffer has a fixed `capacity`; it maintains 2 pointers: `start` and `end`. `get()` returns the byte at the `start` position and increments `start`. `put()` puts the byte at the `end` position and increments `end`. No `flip()`!","title":"What is the purpose of ByteBuffer&#39;s flip method? (And why is it called &quot;flip&quot;?)","body":"<p>A buffer has a fixed <code>capacity</code>; it maintains 2 pointers: <code>start</code> and <code>end</code>. <code>get()</code> returns the byte at the <code>start</code> position and increments <code>start</code>. <code>put()</code> puts the byte at the <code>end</code> position and increments <code>end</code>. No <code>flip()</code>!</p>\n"},{"tags":[],"owner":{"account_id":9893515,"reputation":6772,"user_id":7325804,"display_name":"Arnav Rao"},"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1650583202,"creation_date":1527053414,"answer_id":50480459,"question_id":14792968,"body_markdown":"Flip assigns the current position value to the limit property and sets the position property to `0`. Flip is useful to drain only active elements from a buffer.\r\n\r\nFor example, below program prints &quot;hello&quot; instead of empty elements of the buffer. Method calls `limit` and `position` can be replaced with `flip`.\r\n\r\n\tCharBuffer cbuff = CharBuffer.allocate(40);\r\n\tcbuff.put(&quot;hello&quot;);\t\r\n    // These two lines below are what flip does\r\n\tcbuff.limit(cbuff.position());\r\n\tcbuff.position(0);\r\n\t\t\r\n\twhile(cbuff.hasRemaining()) {\r\n\t\tSystem.out.println(cbuff.get());\r\n\t}\r\n\r\nSee http://www.zoftino.com/java-nio-tutorial for more information on buffers and channels.","title":"What is the purpose of ByteBuffer&#39;s flip method? (And why is it called &quot;flip&quot;?)","body":"<p>Flip assigns the current position value to the limit property and sets the position property to <code>0</code>. Flip is useful to drain only active elements from a buffer.</p>\n<p>For example, below program prints &quot;hello&quot; instead of empty elements of the buffer. Method calls <code>limit</code> and <code>position</code> can be replaced with <code>flip</code>.</p>\n<pre><code>CharBuffer cbuff = CharBuffer.allocate(40);\ncbuff.put(&quot;hello&quot;); \n// These two lines below are what flip does\ncbuff.limit(cbuff.position());\ncbuff.position(0);\n    \nwhile(cbuff.hasRemaining()) {\n    System.out.println(cbuff.get());\n}\n</code></pre>\n<p>See <a href=\"http://www.zoftino.com/java-nio-tutorial\" rel=\"nofollow noreferrer\">http://www.zoftino.com/java-nio-tutorial</a> for more information on buffers and channels.</p>\n"},{"tags":[],"owner":{"account_id":8954228,"reputation":65,"user_id":6755818,"display_name":"vkohli"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1535562093,"creation_date":1535552579,"answer_id":52079790,"question_id":14792968,"body_markdown":"*flip()* method makes a buffer ready for a new sequence of channel-write or relative get operations: It sets the limit to the current position and then sets the position to zero.\r\n\r\nBuffer keeps track of the data written into it. Post writing, *flip()* method is called to switch from writing to reading mode.","title":"What is the purpose of ByteBuffer&#39;s flip method? (And why is it called &quot;flip&quot;?)","body":"<p><em>flip()</em> method makes a buffer ready for a new sequence of channel-write or relative get operations: It sets the limit to the current position and then sets the position to zero.</p>\n\n<p>Buffer keeps track of the data written into it. Post writing, <em>flip()</em> method is called to switch from writing to reading mode.</p>\n"},{"tags":[],"owner":{"account_id":1175385,"reputation":22626,"user_id":1151521,"accept_rate":77,"display_name":"Aleksandr Dubinsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696171108,"creation_date":1696171108,"answer_id":77210939,"question_id":14792968,"body_markdown":"`compact` is the inverse of `flip` for the general use case.\r\n\r\n```\r\nbuf = ByteBuffer.allocate(...);  // create\r\nbuf.put(...);   // write\r\nbuf.flip();     // get ready to read\r\nbuf.get(...);   // read some of the data\r\nbuf.compact();  // delete the read data and get ready to write again\r\n```","title":"What is the purpose of ByteBuffer&#39;s flip method? (And why is it called &quot;flip&quot;?)","body":"<p><code>compact</code> is the inverse of <code>flip</code> for the general use case.</p>\n<pre><code>buf = ByteBuffer.allocate(...);  // create\nbuf.put(...);   // write\nbuf.flip();     // get ready to read\nbuf.get(...);   // read some of the data\nbuf.compact();  // delete the read data and get ready to write again\n</code></pre>\n"}],"owner":{"account_id":1200939,"reputation":29479,"user_id":1171620,"accept_rate":43,"display_name":"Suzan Cioc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68335,"favorite_count":0,"down_vote_count":0,"up_vote_count":119,"answer_count":5,"score":119,"last_activity_date":1696171108,"creation_date":1360453716,"question_id":14792968,"body_markdown":"Why does ByteBuffer&#39;s flip() method called &quot;flip&quot;? What is &quot;flipped&quot; here? According to apidoc, two successive flips won&#39;t restore original state, and multiple flips will probably tend `limit()` to become zero.\r\n\r\nCan I &quot;unflip&quot; somehow to reuse bytes went out of a limit?\r\n\r\nCan I concatenate tail to be flipped with some other data?","title":"What is the purpose of ByteBuffer&#39;s flip method? (And why is it called &quot;flip&quot;?)","body":"<p>Why does ByteBuffer's flip() method called \"flip\"? What is \"flipped\" here? According to apidoc, two successive flips won't restore original state, and multiple flips will probably tend <code>limit()</code> to become zero.</p>\n\n<p>Can I \"unflip\" somehow to reuse bytes went out of a limit?</p>\n\n<p>Can I concatenate tail to be flipped with some other data?</p>\n"},{"tags":["java","database","connection","connection-pooling"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696170911,"creation_date":1696170911,"answer_id":77210925,"question_id":77210700,"body_markdown":"When you call `DataSource.getConnection`, the datasource implementation knows how to talk to the connection pool manager, and asks it to provide the connection:\r\n\r\n  - If there is an existing (free) database connection in the pool, the pool manager returns it (and marks it as in-use).\r\n  - If there is no free connection, the pool manager creates the physical connection and adds it to the pool (as in-use) and returns it.\r\n\r\nThe relationship between the `Connection` and `PooledConnection` instances is (I think) driver dependent.  They could be represented by a single implementation class, or there could be distinct classes for the two concepts.  \r\n\r\nBut your application code should not need to know this.  Indeed, ideally it should not depend on the driver implementation classes at all, because that would mean that your application is &quot;coupled&quot; with the driver code.\r\n\r\n(The documents don&#39;t state this clearly because the spec writers were trying to avoid unnecessarily *constraining* driver implementations.  This is a good thing.)\r\n","title":"Connection Pool and PooledConnection","body":"<p>When you call <code>DataSource.getConnection</code>, the datasource implementation knows how to talk to the connection pool manager, and asks it to provide the connection:</p>\n<ul>\n<li>If there is an existing (free) database connection in the pool, the pool manager returns it (and marks it as in-use).</li>\n<li>If there is no free connection, the pool manager creates the physical connection and adds it to the pool (as in-use) and returns it.</li>\n</ul>\n<p>The relationship between the <code>Connection</code> and <code>PooledConnection</code> instances is (I think) driver dependent.  They could be represented by a single implementation class, or there could be distinct classes for the two concepts.</p>\n<p>But your application code should not need to know this.  Indeed, ideally it should not depend on the driver implementation classes at all, because that would mean that your application is &quot;coupled&quot; with the driver code.</p>\n<p>(The documents don't state this clearly because the spec writers were trying to avoid unnecessarily <em>constraining</em> driver implementations.  This is a good thing.)</p>\n"}],"owner":{"account_id":24170524,"reputation":37,"user_id":18132664,"display_name":"Chris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1696170911,"creation_date":1696167620,"question_id":77210700,"body_markdown":"I am currently learning about Connection Pooling concept. I went through the [official documentation][1] in Oracle website that tells about Datasources and ConnectionPooling.\r\n\r\nIn the documentation it is mentioned:\r\n\r\n&gt; When the DataSource interface is implemented to work with a ConnectionPoolDataSource implementation, all of the connections produced by instances of that DataSource class will automatically be pooled connections.\r\n\r\nThe above statement is fine. To put it in simple words, a Connection Pool consists of Open Connections (PooledConnection) objects which can be accessed through the DataSource.getConnection() method.\r\n\r\nIt is mentioned in the PooledConnection interface documentation that the \r\n\r\n&gt; PooledConnection object represents a physical connection to a data source.When an application calls the method DataSource.getConnection, it gets back a Connection object. If connection pooling is being done, that Connection object is actually a handle to a PooledConnection object, which is a physical connection.\r\n\r\nHow does a PooledConnection object provide a java.sql.Connection object? I know there is a method ```getConnection()``` in the PooledConnection interface which provides the Connection object, but in the documentation it is mentioned as:\r\n\r\n&gt; The connection pool manager calls this method when an application has called the method DataSource.getConnection and there are **no PooledConnection objects** available in the Pool.\r\n\r\n**So if there is a PooledConnection object that is already present in the Pool** then how is the Connection object obtained and how does PooledConnection provide the java.sql.Connection object when the Datasource.getConnection() is called and there is PooledConnection object present in the pool? How does a Connection object is actually a handle to a PooledConnection object? This is really confusing and documentations are not clear.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html#datasource_connection","title":"Connection Pool and PooledConnection","body":"<p>I am currently learning about Connection Pooling concept. I went through the <a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html#datasource_connection\" rel=\"nofollow noreferrer\">official documentation</a> in Oracle website that tells about Datasources and ConnectionPooling.</p>\n<p>In the documentation it is mentioned:</p>\n<blockquote>\n<p>When the DataSource interface is implemented to work with a ConnectionPoolDataSource implementation, all of the connections produced by instances of that DataSource class will automatically be pooled connections.</p>\n</blockquote>\n<p>The above statement is fine. To put it in simple words, a Connection Pool consists of Open Connections (PooledConnection) objects which can be accessed through the DataSource.getConnection() method.</p>\n<p>It is mentioned in the PooledConnection interface documentation that the</p>\n<blockquote>\n<p>PooledConnection object represents a physical connection to a data source.When an application calls the method DataSource.getConnection, it gets back a Connection object. If connection pooling is being done, that Connection object is actually a handle to a PooledConnection object, which is a physical connection.</p>\n</blockquote>\n<p>How does a PooledConnection object provide a java.sql.Connection object? I know there is a method <code>getConnection()</code> in the PooledConnection interface which provides the Connection object, but in the documentation it is mentioned as:</p>\n<blockquote>\n<p>The connection pool manager calls this method when an application has called the method DataSource.getConnection and there are <strong>no PooledConnection objects</strong> available in the Pool.</p>\n</blockquote>\n<p><strong>So if there is a PooledConnection object that is already present in the Pool</strong> then how is the Connection object obtained and how does PooledConnection provide the java.sql.Connection object when the Datasource.getConnection() is called and there is PooledConnection object present in the pool? How does a Connection object is actually a handle to a PooledConnection object? This is really confusing and documentations are not clear.</p>\n"},{"tags":["java","algorithm","recursion","iteration","binary-tree"],"comments":[{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":2,"creation_date":1695112651,"post_id":77132398,"comment_id":135977192,"body_markdown":"Why not use a `Stack&lt;Pair&lt;TreeNode,Integer&gt;&gt;` to store the value?","body":"Why not use a <code>Stack&lt;Pair&lt;TreeNode,Integer&gt;&gt;</code> to store the value?"},{"owner":{"account_id":1706785,"reputation":48162,"user_id":1565698,"accept_rate":38,"display_name":"Sylwester"},"score":0,"creation_date":1695143811,"post_id":77132398,"comment_id":135983603,"body_markdown":"Preserving space complexity == the same overhead as recursive solution. Then you&#39;re right since the stack pushes will basically be similar to the call stack in a recursive solution","body":"Preserving space complexity == the same overhead as recursive solution. Then you&#39;re right since the stack pushes will basically be similar to the call stack in a recursive solution"}],"answers":[{"tags":[],"owner":{"account_id":18622828,"reputation":1142,"user_id":13572593,"display_name":"Yashawant"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695974451,"creation_date":1695974451,"answer_id":77200295,"question_id":77132398,"body_markdown":"If you want to have space complexity of O(H), that is, space required is directly proportional to the height of the tree,\r\n\r\nyou can use two `Stack`s one for right subtree and other for left subtree to maintain the sum of left and right subtree respectively,\r\n\r\nThe stacks will have `List&lt;Integer&gt;`s in which the first element of the list will denote the level or height the `TreeNode` and the second element will denote the sum of the subtree in which the `TreeNode` is root node. Then by determining whether the current `TreeNode` is left child or right child of it&#39;s parent we can save the sum in relevant stack.\r\n\r\n```java\r\npublic static List&lt;Integer&gt; postorderTraversal(TreeNode root) { \r\n    List&lt;Integer&gt; postOrderTrvNodes = new LinkedList&lt;&gt;();\r\n    if(root == null){\r\n         return postOrderTrvNodes;\r\n     }\r\n    Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\r\n\r\n    //\r\n\r\n    Stack&lt;List&lt;Integer&gt;&gt; leftStack = new Stack&lt;&gt;();\r\n    Stack&lt;List&lt;Integer&gt;&gt; rightStack = new Stack&lt;&gt;();\r\n\r\n    leftStack.push(Arrays.asList(0, 0));\r\n\r\n    //\r\n\r\n    TreeNode current = root;\r\n    TreeNode lastVisited = null;\r\n\r\n    while (!stack.isEmpty() || current != null) {\r\n        if (current != null) {\r\n            stack.push(current);\r\n            current = current.left;\r\n            //\r\n            if (current != null) {\r\n                List&lt;Integer&gt; lpk = leftStack.peek();\r\n                if(!rightStack.isEmpty()) {\r\n                    List&lt;Integer&gt; rpk = rightStack.peek();\r\n                    if(rpk.get(0) &gt; lpk.get(0)) {\r\n                        leftStack.push(Arrays.asList(rpk.get(0) + 1, 0));\r\n                    } else {\r\n                        leftStack.push(Arrays.asList(lpk.get(0) + 1, 0));\r\n                    }\r\n                } else {\r\n                    leftStack.push(Arrays.asList(lpk.get(0) + 1, 0));\r\n                }\r\n            }\r\n            //\r\n        } else {\r\n            TreeNode peekNode = stack.peek();\r\n            if (peekNode.right != null &amp;&amp; peekNode.right != lastVisited) {\r\n                current = peekNode.right;\r\n                //\r\n                if(!rightStack.isEmpty()) {\r\n                    List&lt;Integer&gt; rpk = rightStack.peek();\r\n                    List&lt;Integer&gt; lpk = leftStack.peek();\r\n                    if(rpk.get(0) &gt; lpk.get(0)) {\r\n                        rightStack.push(Arrays.asList(rpk.get(0) + 1, 0));\r\n                    } else {\r\n                        rightStack.push(Arrays.asList(lpk.get(0) + 1, 0));\r\n                    }\r\n                } else if(rightStack.isEmpty() &amp;&amp; !leftStack.isEmpty()) {\r\n                    List&lt;Integer&gt; lpk = leftStack.peek();\r\n                    rightStack.push(Arrays.asList(lpk.get(0) + 1, 0));\r\n                } else {\r\n                    List&lt;Integer&gt; rpk = rightStack.peek();\r\n                    rightStack.push(Arrays.asList(rpk.get(0) + 1, 0));\r\n                }\r\n                //\r\n            } else {\r\n                TreeNode poppedNode = stack.pop();\r\n                \r\n                // right subtree fully explored and parent is a left child\r\n                \r\n                if(rightStack.isEmpty() &amp;&amp; !leftStack.isEmpty()) {\r\n                    List&lt;Integer&gt; nd = leftStack.pop();\r\n                    int nv = nd.get(1) + poppedNode.val;\r\n                    postOrderTrvNodes.add(nv);\r\n\r\n                    if (!leftStack.isEmpty()) {\r\n                        List&lt;Integer&gt; lpk = leftStack.peek();\r\n                        lpk.set(1, lpk.get(1) + nv);\r\n                    }\r\n                }\r\n                // left subtree fully explored and parent is a right child\r\n                else if(leftStack.isEmpty() &amp;&amp; !rightStack.isEmpty()) {\r\n                    List&lt;Integer&gt; nd = rightStack.pop();\r\n                    int nv = nd.get(1) + poppedNode.val;\r\n                    postOrderTrvNodes.add(nv);\r\n                    \r\n                    if (!rightStack.isEmpty()) {\r\n                        List&lt;Integer&gt; rpk = rightStack.peek();\r\n                        rpk.set(1, rpk.get(1) + nv);\r\n                    }\r\n                } else {\r\n                    List&lt;Integer&gt; rpk = rightStack.peek();\r\n                    List&lt;Integer&gt; lpk = leftStack.peek();\r\n                    \r\n                    int lh = lpk.get(0);\r\n                    int rh = rpk.get(0);\r\n                    \r\n                    // node is right child of parent\r\n                    if(lh &lt; rh) {\r\n                        int nv = rpk.get(1) + poppedNode.val;\r\n                        postOrderTrvNodes.add(nv);\r\n                        rightStack.pop();\r\n\r\n                        List&lt;Integer&gt; nlpk = leftStack.peek();\r\n\r\n                        if(!rightStack.isEmpty()) {\r\n                            List&lt;Integer&gt; nrpk = rightStack.peek();\r\n                            // parent is right child of grandparent\r\n                            if(nlpk.get(0) &lt; nrpk.get(0)) {\r\n                                nrpk.set(1, nrpk.get(1) + nv);\r\n                            } else {\r\n                                // parent is left child of grandparent\r\n                                nlpk.set(1, nlpk.get(1) + nv);\r\n                            }\r\n                        } else {\r\n                            // parent is left child of grandparent\r\n                            nlpk.set(1, nlpk.get(1) + nv);\r\n                        }\r\n                    }\r\n                    \r\n                    // node is left child of parent\r\n                    if(lh &gt; rh) {\r\n                        int nv = lpk.get(1) + poppedNode.val;\r\n                        postOrderTrvNodes.add(nv);\r\n                        leftStack.pop();\r\n                        \r\n                        List&lt;Integer&gt; nrpk = rightStack.peek();\r\n\r\n                        if(!leftStack.isEmpty()) {\r\n                            \r\n                            List&lt;Integer&gt; nlpk = leftStack.peek();\r\n                            //\r\n                            if(nlpk.get(0) &gt; nrpk.get(0)) {\r\n                                nlpk.set(1, nlpk.get(1) + nv);\r\n                            } else {\r\n                                nrpk.set(1, nrpk.get(1) + nv);\r\n                            }\r\n                        } else {\r\n                            //\r\n                            nrpk.set(1, nrpk.get(1) + nv);\r\n                        }\r\n                    }\r\n                }\r\n                \r\n                //\r\n\r\n                // postOrderTrvNodes.add(poppedNode.val);\r\n\r\n                lastVisited = poppedNode;\r\n            }\r\n        }\r\n    }\r\n    return postOrderTrvNodes;\r\n}\r\n```\r\n\r\nYou can optimize the code further by maybe using a different data structure like `Pair&lt;Integer&gt;` instead of `List&lt;Integer&gt;`.\r\n\r\nI programmed the code in `python` and then converted it to the java code above the original python code is added below\r\n\r\n```python\r\ndef poTravel(tn: TreeNode):\r\n    st, po = [], []\r\n\r\n    current = tn\r\n\r\n    lv = None\r\n\r\n    ls, rs = [[0, 0]], []\r\n\r\n    while st or current:\r\n        if current:\r\n            st.append(current)\r\n            current = current.left\r\n            if current:\r\n                if rs and rs[-1][0] &gt; ls[-1][0]:\r\n                    ls.append([rs[-1][0] + 1 if rs else 1, 0])\r\n                else:\r\n                    ls.append([ls[-1][0] + 1 if ls else 1, 0])\r\n\r\n        else:\r\n            if st[-1].right and lv != st[-1].right:\r\n                current = st[-1].right\r\n                if rs and ls[-1][0] &gt; rs[-1][0]:\r\n                    rs.append([ls[-1][0] + 1 if ls else 1, 0])\r\n                elif not rs and ls:\r\n                    rs.append([ls[-1][0] + 1 if ls else 1, 0])\r\n                else:\r\n                    rs.append([rs[-1][0] + 1 if rs else 1, 0])\r\n\r\n            else:\r\n                nd = st.pop()\r\n\r\n                if not rs and ls:\r\n                    nv = ls[-1][1] + nd.val\r\n                    po.append(nv)\r\n                    ls.pop()\r\n                    if ls:\r\n                        ls[-1][1] += nv\r\n\r\n                elif not ls and rs:\r\n                    nv = rs[-1][1] + nd.val\r\n                    po.append(nv)\r\n                    rs.pop()\r\n                    if rs:\r\n                        rs[-1][1] += nv\r\n\r\n                elif ls[-1][0] &lt; rs[-1][0]:\r\n                    nv = rs[-1][1] + nd.val\r\n                    po.append(nv)\r\n                    rs.pop()\r\n                    if rs and ls[-1][0] &lt; rs[-1][0]:\r\n                        rs[-1][1] += nv\r\n                    else:\r\n                        ls[-1][1] += nv\r\n\r\n                elif rs[-1][0] &lt; ls[-1][0]:\r\n                    nv = ls[-1][1] + nd.val\r\n                    po.append(nv)\r\n                    ls.pop()\r\n                    if ls and rs[-1][0] &lt; ls[-1][0]:\r\n                        ls[-1][1] += nv\r\n                    else:\r\n                        rs[-1][1] += nv\r\n\r\n                lv = nd\r\n\r\n    return po\r\n\r\n```","title":"How can I learn to convert recursive solution to iterative solution while preserving the space complexity?","body":"<p>If you want to have space complexity of O(H), that is, space required is directly proportional to the height of the tree,</p>\n<p>you can use two <code>Stack</code>s one for right subtree and other for left subtree to maintain the sum of left and right subtree respectively,</p>\n<p>The stacks will have <code>List&lt;Integer&gt;</code>s in which the first element of the list will denote the level or height the <code>TreeNode</code> and the second element will denote the sum of the subtree in which the <code>TreeNode</code> is root node. Then by determining whether the current <code>TreeNode</code> is left child or right child of it's parent we can save the sum in relevant stack.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;Integer&gt; postorderTraversal(TreeNode root) { \n    List&lt;Integer&gt; postOrderTrvNodes = new LinkedList&lt;&gt;();\n    if(root == null){\n         return postOrderTrvNodes;\n     }\n    Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\n\n    //\n\n    Stack&lt;List&lt;Integer&gt;&gt; leftStack = new Stack&lt;&gt;();\n    Stack&lt;List&lt;Integer&gt;&gt; rightStack = new Stack&lt;&gt;();\n\n    leftStack.push(Arrays.asList(0, 0));\n\n    //\n\n    TreeNode current = root;\n    TreeNode lastVisited = null;\n\n    while (!stack.isEmpty() || current != null) {\n        if (current != null) {\n            stack.push(current);\n            current = current.left;\n            //\n            if (current != null) {\n                List&lt;Integer&gt; lpk = leftStack.peek();\n                if(!rightStack.isEmpty()) {\n                    List&lt;Integer&gt; rpk = rightStack.peek();\n                    if(rpk.get(0) &gt; lpk.get(0)) {\n                        leftStack.push(Arrays.asList(rpk.get(0) + 1, 0));\n                    } else {\n                        leftStack.push(Arrays.asList(lpk.get(0) + 1, 0));\n                    }\n                } else {\n                    leftStack.push(Arrays.asList(lpk.get(0) + 1, 0));\n                }\n            }\n            //\n        } else {\n            TreeNode peekNode = stack.peek();\n            if (peekNode.right != null &amp;&amp; peekNode.right != lastVisited) {\n                current = peekNode.right;\n                //\n                if(!rightStack.isEmpty()) {\n                    List&lt;Integer&gt; rpk = rightStack.peek();\n                    List&lt;Integer&gt; lpk = leftStack.peek();\n                    if(rpk.get(0) &gt; lpk.get(0)) {\n                        rightStack.push(Arrays.asList(rpk.get(0) + 1, 0));\n                    } else {\n                        rightStack.push(Arrays.asList(lpk.get(0) + 1, 0));\n                    }\n                } else if(rightStack.isEmpty() &amp;&amp; !leftStack.isEmpty()) {\n                    List&lt;Integer&gt; lpk = leftStack.peek();\n                    rightStack.push(Arrays.asList(lpk.get(0) + 1, 0));\n                } else {\n                    List&lt;Integer&gt; rpk = rightStack.peek();\n                    rightStack.push(Arrays.asList(rpk.get(0) + 1, 0));\n                }\n                //\n            } else {\n                TreeNode poppedNode = stack.pop();\n                \n                // right subtree fully explored and parent is a left child\n                \n                if(rightStack.isEmpty() &amp;&amp; !leftStack.isEmpty()) {\n                    List&lt;Integer&gt; nd = leftStack.pop();\n                    int nv = nd.get(1) + poppedNode.val;\n                    postOrderTrvNodes.add(nv);\n\n                    if (!leftStack.isEmpty()) {\n                        List&lt;Integer&gt; lpk = leftStack.peek();\n                        lpk.set(1, lpk.get(1) + nv);\n                    }\n                }\n                // left subtree fully explored and parent is a right child\n                else if(leftStack.isEmpty() &amp;&amp; !rightStack.isEmpty()) {\n                    List&lt;Integer&gt; nd = rightStack.pop();\n                    int nv = nd.get(1) + poppedNode.val;\n                    postOrderTrvNodes.add(nv);\n                    \n                    if (!rightStack.isEmpty()) {\n                        List&lt;Integer&gt; rpk = rightStack.peek();\n                        rpk.set(1, rpk.get(1) + nv);\n                    }\n                } else {\n                    List&lt;Integer&gt; rpk = rightStack.peek();\n                    List&lt;Integer&gt; lpk = leftStack.peek();\n                    \n                    int lh = lpk.get(0);\n                    int rh = rpk.get(0);\n                    \n                    // node is right child of parent\n                    if(lh &lt; rh) {\n                        int nv = rpk.get(1) + poppedNode.val;\n                        postOrderTrvNodes.add(nv);\n                        rightStack.pop();\n\n                        List&lt;Integer&gt; nlpk = leftStack.peek();\n\n                        if(!rightStack.isEmpty()) {\n                            List&lt;Integer&gt; nrpk = rightStack.peek();\n                            // parent is right child of grandparent\n                            if(nlpk.get(0) &lt; nrpk.get(0)) {\n                                nrpk.set(1, nrpk.get(1) + nv);\n                            } else {\n                                // parent is left child of grandparent\n                                nlpk.set(1, nlpk.get(1) + nv);\n                            }\n                        } else {\n                            // parent is left child of grandparent\n                            nlpk.set(1, nlpk.get(1) + nv);\n                        }\n                    }\n                    \n                    // node is left child of parent\n                    if(lh &gt; rh) {\n                        int nv = lpk.get(1) + poppedNode.val;\n                        postOrderTrvNodes.add(nv);\n                        leftStack.pop();\n                        \n                        List&lt;Integer&gt; nrpk = rightStack.peek();\n\n                        if(!leftStack.isEmpty()) {\n                            \n                            List&lt;Integer&gt; nlpk = leftStack.peek();\n                            //\n                            if(nlpk.get(0) &gt; nrpk.get(0)) {\n                                nlpk.set(1, nlpk.get(1) + nv);\n                            } else {\n                                nrpk.set(1, nrpk.get(1) + nv);\n                            }\n                        } else {\n                            //\n                            nrpk.set(1, nrpk.get(1) + nv);\n                        }\n                    }\n                }\n                \n                //\n\n                // postOrderTrvNodes.add(poppedNode.val);\n\n                lastVisited = poppedNode;\n            }\n        }\n    }\n    return postOrderTrvNodes;\n}\n</code></pre>\n<p>You can optimize the code further by maybe using a different data structure like <code>Pair&lt;Integer&gt;</code> instead of <code>List&lt;Integer&gt;</code>.</p>\n<p>I programmed the code in <code>python</code> and then converted it to the java code above the original python code is added below</p>\n<pre class=\"lang-py prettyprint-override\"><code>def poTravel(tn: TreeNode):\n    st, po = [], []\n\n    current = tn\n\n    lv = None\n\n    ls, rs = [[0, 0]], []\n\n    while st or current:\n        if current:\n            st.append(current)\n            current = current.left\n            if current:\n                if rs and rs[-1][0] &gt; ls[-1][0]:\n                    ls.append([rs[-1][0] + 1 if rs else 1, 0])\n                else:\n                    ls.append([ls[-1][0] + 1 if ls else 1, 0])\n\n        else:\n            if st[-1].right and lv != st[-1].right:\n                current = st[-1].right\n                if rs and ls[-1][0] &gt; rs[-1][0]:\n                    rs.append([ls[-1][0] + 1 if ls else 1, 0])\n                elif not rs and ls:\n                    rs.append([ls[-1][0] + 1 if ls else 1, 0])\n                else:\n                    rs.append([rs[-1][0] + 1 if rs else 1, 0])\n\n            else:\n                nd = st.pop()\n\n                if not rs and ls:\n                    nv = ls[-1][1] + nd.val\n                    po.append(nv)\n                    ls.pop()\n                    if ls:\n                        ls[-1][1] += nv\n\n                elif not ls and rs:\n                    nv = rs[-1][1] + nd.val\n                    po.append(nv)\n                    rs.pop()\n                    if rs:\n                        rs[-1][1] += nv\n\n                elif ls[-1][0] &lt; rs[-1][0]:\n                    nv = rs[-1][1] + nd.val\n                    po.append(nv)\n                    rs.pop()\n                    if rs and ls[-1][0] &lt; rs[-1][0]:\n                        rs[-1][1] += nv\n                    else:\n                        ls[-1][1] += nv\n\n                elif rs[-1][0] &lt; ls[-1][0]:\n                    nv = ls[-1][1] + nd.val\n                    po.append(nv)\n                    ls.pop()\n                    if ls and rs[-1][0] &lt; ls[-1][0]:\n                        ls[-1][1] += nv\n                    else:\n                        rs[-1][1] += nv\n\n                lv = nd\n\n    return po\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696170743,"creation_date":1696113599,"answer_id":77208667,"question_id":77132398,"body_markdown":"I&#39;m not entirely sure I understand the question, but the following iterative function will return a post-order traversal of the given tree, in O(N) steps and with O(H) space.\r\n\r\n    public static List&lt;Integer&gt; postorderTraversal(TreeNode root) {\r\n        final List&lt;Integer&gt; results = new LinkedList&lt;&gt;();\r\n\r\n        final Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\r\n        final Stack&lt;Boolean&gt; dirStack = new Stack&lt;&gt;();\r\n\r\n        TreeNode curr = root;\r\n\r\n        while (!stack.isEmpty() || curr != null) {\r\n            if (curr == null) {\r\n                curr = stack.pop();\r\n                final boolean up = dirStack.pop();\r\n                if (up) {\r\n                    results.add(curr.value);\r\n                    curr = null;\r\n                }\r\n            } else {\r\n                stack.push(curr);\r\n                dirStack.push(true);\r\n                stack.push(curr.right);\r\n                dirStack.push(false);\r\n                curr = curr.left;\r\n            }\r\n        }\r\n\r\n        return results;\r\n    }\r\n\r\nA simple test:\r\n\r\n    public static void main(String[] args) {\r\n        final TreeNode root =\r\n                new TreeNode(\r\n                        new TreeNode(\r\n                                new TreeNode(1),\r\n                                5,\r\n                                new TreeNode(\r\n                                        new TreeNode(2),\r\n                                        4,\r\n                                        new TreeNode(3))\r\n                        ),\r\n                        9,\r\n                        new TreeNode(\r\n                                new TreeNode(6),\r\n                                8,\r\n                                new TreeNode(7)\r\n                        )\r\n                );\r\n\r\n        final List&lt;Integer&gt; l = postorderTraversal(root);\r\n\r\n        System.out.println(&quot;PostorderTraversal = &quot; + l);\r\n    }\r\n\r\noutputs the following:\r\n\r\n    PostorderTraversal = [1, 2, 3, 4, 5, 6, 7, 8, 9]\r\n\r\nThe algorithm is derived by considering the recursive solution for a post-order tree traversal. For each node it has three steps:\r\n\r\n 1. Process left node.\r\n 1. Process right node.\r\n 1. Add node value to list.\r\n\r\nWhen we convert this to an iterative solution, we need to effectively defer steps 2 &amp; 3 by pushing them onto a stack, and then proceeed with step 1. Step 2 &amp; 3 both require a node from the stack, but we also require a boolean flag to distinguish the two steps. I.e. we need a stack of nodes *and a stack of boolean values*.","title":"How can I learn to convert recursive solution to iterative solution while preserving the space complexity?","body":"<p>I'm not entirely sure I understand the question, but the following iterative function will return a post-order traversal of the given tree, in O(N) steps and with O(H) space.</p>\n<pre><code>public static List&lt;Integer&gt; postorderTraversal(TreeNode root) {\n    final List&lt;Integer&gt; results = new LinkedList&lt;&gt;();\n\n    final Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\n    final Stack&lt;Boolean&gt; dirStack = new Stack&lt;&gt;();\n\n    TreeNode curr = root;\n\n    while (!stack.isEmpty() || curr != null) {\n        if (curr == null) {\n            curr = stack.pop();\n            final boolean up = dirStack.pop();\n            if (up) {\n                results.add(curr.value);\n                curr = null;\n            }\n        } else {\n            stack.push(curr);\n            dirStack.push(true);\n            stack.push(curr.right);\n            dirStack.push(false);\n            curr = curr.left;\n        }\n    }\n\n    return results;\n}\n</code></pre>\n<p>A simple test:</p>\n<pre><code>public static void main(String[] args) {\n    final TreeNode root =\n            new TreeNode(\n                    new TreeNode(\n                            new TreeNode(1),\n                            5,\n                            new TreeNode(\n                                    new TreeNode(2),\n                                    4,\n                                    new TreeNode(3))\n                    ),\n                    9,\n                    new TreeNode(\n                            new TreeNode(6),\n                            8,\n                            new TreeNode(7)\n                    )\n            );\n\n    final List&lt;Integer&gt; l = postorderTraversal(root);\n\n    System.out.println(&quot;PostorderTraversal = &quot; + l);\n}\n</code></pre>\n<p>outputs the following:</p>\n<pre><code>PostorderTraversal = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n<p>The algorithm is derived by considering the recursive solution for a post-order tree traversal. For each node it has three steps:</p>\n<ol>\n<li>Process left node.</li>\n<li>Process right node.</li>\n<li>Add node value to list.</li>\n</ol>\n<p>When we convert this to an iterative solution, we need to effectively defer steps 2 &amp; 3 by pushing them onto a stack, and then proceeed with step 1. Step 2 &amp; 3 both require a node from the stack, but we also require a boolean flag to distinguish the two steps. I.e. we need a stack of nodes <em>and a stack of boolean values</em>.</p>\n"}],"owner":{"account_id":11396057,"reputation":664,"user_id":8354437,"display_name":"Ankit Chauhan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":271,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":2,"score":4,"last_activity_date":1696170743,"creation_date":1695107778,"question_id":77132398,"body_markdown":"I am trying to solve a easy binary tree question to convert the existing binary tree to a sum tree. \r\nThe recursive solution for this is : \r\n```\r\nclass Solution{\r\n&#160; &#160; public void toSumTree(Node root){\r\n&#160; &#160; &#160; &#160; &#160;solve(root);\r\n&#160; &#160; }\r\n&#160; &#160; private int solve(Node node){\r\n&#160; &#160; &#160; &#160; if(node == null){\r\n&#160; &#160; &#160; &#160; &#160; &#160; return 0;\r\n&#160; &#160; &#160; &#160; }\r\n&#160; &#160; &#160; &#160; \r\n&#160; &#160; &#160; &#160; int leftSubtreeValue = solve(node.left);\r\n&#160; &#160; &#160; &#160; int rightSubtreeValue = solve(node.right);\r\n&#160; &#160; &#160; &#160; int currentNodeValue = node.data;\r\n&#160; &#160; &#160; &#160; \r\n&#160; &#160; &#160; &#160; node.data = leftSubtreeValue + rightSubtreeValue;\r\n&#160; &#160; &#160; &#160; \r\n&#160; &#160; &#160; &#160; return currentNodeValue + leftSubtreeValue + rightSubtreeValue;\r\n&#160; &#160; }\r\n}\r\n```\r\nThis give us the time and space complexity as O(N) and O(H) respectively. \r\n\r\nNow since the above recursive approach is similar to post-order traversal, I think we can use some version of iterative post-order travesal like below : \r\n\r\n```\r\nclass Solution {\r\n&#160; &#160; public List&lt;Integer&gt; postorderTraversal(TreeNode root) { \r\n&#160; &#160; &#160; &#160; List&lt;Integer&gt; postOrderTrvNodes = new LinkedList&lt;&gt;();\r\n&#160; &#160; &#160; &#160; if(root == null){\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160;return postOrderTrvNodes;\r\n&#160; &#160; &#160; &#160; &#160;}\r\n&#160; &#160; &#160; &#160; Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\r\n&#160; &#160; &#160; &#160; TreeNode current = root;\r\n&#160; &#160; &#160; &#160; TreeNode lastVisited = null;\r\n&#160; &#160; &#160; &#160; while (!stack.isEmpty() || current != null) {\r\n&#160; &#160; &#160; &#160; &#160; &#160; if (current != null) {\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; stack.push(current);\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; current = current.left;\r\n&#160; &#160; &#160; &#160; &#160; &#160; } else {\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; TreeNode peekNode = stack.peek();\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; if (peekNode.right != null &amp;&amp; peekNode.right != lastVisited) {\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; current = peekNode.right;\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; } else {\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; TreeNode poppedNode = stack.pop();\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; postOrderTrvNodes.add(poppedNode.val);\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; lastVisited = poppedNode;\r\n&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; }\r\n&#160; &#160; &#160; &#160; &#160; &#160; }\r\n&#160; &#160; &#160; &#160; }\r\n&#160; &#160; &#160; &#160; return postOrderTrvNodes;\r\n&#160; &#160; }\r\n}\r\n```\r\n\r\nWhat I am not able to come up with is how to store the required sum of subtree at each node so that space complexity remains O(H). If we use a HashMap that stores sum of subtree at current node in a HashMap&lt;Node, Integer&gt; then the space complexity will become O(N).\r\n\r\nWhat I want is some protocol that can be followed in general to mimic what Java is doing with internal stack. ","title":"How can I learn to convert recursive solution to iterative solution while preserving the space complexity?","body":"<p>I am trying to solve a easy binary tree question to convert the existing binary tree to a sum tree.\nThe recursive solution for this is :</p>\n<pre><code>class Solution{\n    public void toSumTree(Node root){\n         solve(root);\n    }\n    private int solve(Node node){\n        if(node == null){\n            return 0;\n        }\n        \n        int leftSubtreeValue = solve(node.left);\n        int rightSubtreeValue = solve(node.right);\n        int currentNodeValue = node.data;\n        \n        node.data = leftSubtreeValue + rightSubtreeValue;\n        \n        return currentNodeValue + leftSubtreeValue + rightSubtreeValue;\n    }\n}\n</code></pre>\n<p>This give us the time and space complexity as O(N) and O(H) respectively.</p>\n<p>Now since the above recursive approach is similar to post-order traversal, I think we can use some version of iterative post-order travesal like below :</p>\n<pre><code>class Solution {\n    public List&lt;Integer&gt; postorderTraversal(TreeNode root) { \n        List&lt;Integer&gt; postOrderTrvNodes = new LinkedList&lt;&gt;();\n        if(root == null){\n             return postOrderTrvNodes;\n         }\n        Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;();\n        TreeNode current = root;\n        TreeNode lastVisited = null;\n        while (!stack.isEmpty() || current != null) {\n            if (current != null) {\n                stack.push(current);\n                current = current.left;\n            } else {\n                TreeNode peekNode = stack.peek();\n                if (peekNode.right != null &amp;&amp; peekNode.right != lastVisited) {\n                    current = peekNode.right;\n                } else {\n                    TreeNode poppedNode = stack.pop();\n                    postOrderTrvNodes.add(poppedNode.val);\n                    lastVisited = poppedNode;\n                }\n            }\n        }\n        return postOrderTrvNodes;\n    }\n}\n</code></pre>\n<p>What I am not able to come up with is how to store the required sum of subtree at each node so that space complexity remains O(H). If we use a HashMap that stores sum of subtree at current node in a HashMap&lt;Node, Integer&gt; then the space complexity will become O(N).</p>\n<p>What I want is some protocol that can be followed in general to mimic what Java is doing with internal stack.</p>\n"},{"tags":["java","error-handling"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1696180716,"post_id":77210908,"comment_id":136117527,"body_markdown":"Please, do not post images of code or of error messages, see [How to ask](https://stackoverflow.com/help/how-to-ask).","body":"Please, do not post images of code or of error messages, see <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a>."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1696210278,"post_id":77210908,"comment_id":136120175,"body_markdown":"I also found eclipse hard to use when I was starting programming. I tried it because it was what the &quot;cool people&quot; were using. Never floated my boat. I recommend trying IntelliJ IDEA. https://www.jetbrains.com/idea/download/?fromIDE=&amp;section=mac\n\nAs for your error, I&#39;ve never seen it my entire 10 years of programming in Java. It looks like it&#39;s because you need to remove jrt.fs from your dependencies: https://stackoverflow.com/q/74772599/4425643 The way you are launching your application might be incorrect. You should run as Java Application instead of `new configuration`.","body":"I also found eclipse hard to use when I was starting programming. I tried it because it was what the &quot;cool people&quot; were using. Never floated my boat. I recommend trying IntelliJ IDEA. <a href=\"https://www.jetbrains.com/idea/download/?fromIDE=&amp;section=mac\" rel=\"nofollow noreferrer\">jetbrains.com/idea/download/?fromIDE=&amp;section=mac</a>  As for your error, I&#39;ve never seen it my entire 10 years of programming in Java. It looks like it&#39;s because you need to remove jrt.fs from your dependencies: <a href=\"https://stackoverflow.com/q/74772599/4425643\">stackoverflow.com/q/74772599/4425643</a> The way you are launching your application might be incorrect. You should run as Java Application instead of <code>new configuration</code>."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1696210530,"post_id":77210908,"comment_id":136120196,"body_markdown":"Does this answer your question? [Package jdk.internal.jimage.decompressor in both module jrt.fs and module java.base](https://stackoverflow.com/questions/74772599/package-jdk-internal-jimage-decompressor-in-both-module-jrt-fs-and-module-java-b)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/74772599/package-jdk-internal-jimage-decompressor-in-both-module-jrt-fs-and-module-java-b\">Package jdk.internal.jimage.decompressor in both module jrt.fs and module java.base</a>"}],"owner":{"account_id":27049467,"reputation":13,"user_id":20603072,"display_name":"Pearce Maguire"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696170456,"creation_date":1696170456,"question_id":77210908,"body_markdown":"when I try to run my code I am presented with [![enter image description here](https://i.stack.imgur.com/Z3hFr.jpg)](https://i.stack.imgur.com/Z3hFr.jpg)\r\n\r\nI am new to java and do not know how to processed. I have found it difficult to install eclipse onto my Mac so that may have something to do with it. If anyone has a clue on how I should processed it would be very much helpful. Thanks in advance ","title":"Java coding error: Error occurred during initialization of boot layer","body":"<p>when I try to run my code I am presented with <a href=\"https://i.stack.imgur.com/Z3hFr.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z3hFr.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I am new to java and do not know how to processed. I have found it difficult to install eclipse onto my Mac so that may have something to do with it. If anyone has a clue on how I should processed it would be very much helpful. Thanks in advance</p>\n"},{"tags":["java","batch-file","windows-10","antlr","antlr4"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1696170418,"post_id":77210827,"comment_id":136116394,"body_markdown":"Possible typo: Your grun.bat file ends with `TestRig %` but shouldn&#39;t it end with `TestRig %*`?","body":"Possible typo: Your grun.bat file ends with <code>TestRig %</code> but shouldn&#39;t it end with <code>TestRig %*</code>?"},{"owner":{"account_id":10645856,"reputation":199,"user_id":7838597,"accept_rate":40,"display_name":"J.Ober"},"score":0,"creation_date":1696172528,"post_id":77210827,"comment_id":136116625,"body_markdown":"thanks, that was the error. Now I get the error &quot;Can&#39;t load Hello as lexer or parser&quot; when using &quot;grun&quot;, but it works when using &quot;java org.antlr.v4.gui.TestRig&quot; instead. Do you have an idea for this?","body":"thanks, that was the error. Now I get the error &quot;Can&#39;t load Hello as lexer or parser&quot; when using &quot;grun&quot;, but it works when using &quot;java org.antlr.v4.gui.TestRig&quot; instead. Do you have an idea for this?"},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1696176611,"post_id":77210827,"comment_id":136117035,"body_markdown":"I don&#39;t know since that is a completely different issue.","body":"I don&#39;t know since that is a completely different issue."}],"owner":{"account_id":10645856,"reputation":199,"user_id":7838597,"accept_rate":40,"display_name":"J.Ober"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696170975,"answer_count":0,"score":0,"last_activity_date":1696170383,"creation_date":1696169394,"question_id":77210827,"body_markdown":"At the Definitive Antlr 4 reference&#39;s Hello.g4 example I want to use grum as supposed. I have the classpath+path variables set:\r\n```\r\nClassPath: C:\\Users\\jofwf\\lib\\antlr-4.13.1-complete.jar\r\nPath: C:\\Users\\jofwf\\lib\\\r\n```\r\nIn /lib/ are antlr-4.13.1-complete.jar and\r\ngrun.bat which contains:\r\n```\r\njava -cp C:\\Users\\jofwf\\lib\\antlr-4.13.1-complete.jar org.antlr.v4.gui.TestRig %\r\n```\r\n\r\nI can use the command antlr4 without problems.\r\n \r\nWhen I use &#39;grun&#39; in terminal I get just the same output as when using &#39;grun Hello r -tokens&#39; though. Everything after &#39;grun&#39; in the whole command is seemingly ignored. (Executed in the folder containing the Hello grammar and compiled class and java files)\r\nThe output for both commands:\r\n```\r\nC:\\Users\\jofwf&gt;java -cp C:\\Users\\jofwf\\lib\\antlr-4.13.1-complete.jar org.antlr.v4.gui.TestRig\r\njava org.antlr.v4.gui.TestRig GrammarName startRuleName\r\n  [-tokens] [-tree] [-gui] [-ps file.ps] [-encoding encodingname]\r\n  [-trace] [-diagnostics] [-SLL]\r\n  [input-filename(s)]\r\nUse startRuleName=&#39;tokens&#39; if GrammarName is a lexer grammar.\r\nOmitting input-filename makes rig read from stdin.\r\n```\r\n","title":"Antlr4 Grun command ignores parameters","body":"<p>At the Definitive Antlr 4 reference's Hello.g4 example I want to use grum as supposed. I have the classpath+path variables set:</p>\n<pre><code>ClassPath: C:\\Users\\jofwf\\lib\\antlr-4.13.1-complete.jar\nPath: C:\\Users\\jofwf\\lib\\\n</code></pre>\n<p>In /lib/ are antlr-4.13.1-complete.jar and\ngrun.bat which contains:</p>\n<pre><code>java -cp C:\\Users\\jofwf\\lib\\antlr-4.13.1-complete.jar org.antlr.v4.gui.TestRig %\n</code></pre>\n<p>I can use the command antlr4 without problems.</p>\n<p>When I use 'grun' in terminal I get just the same output as when using 'grun Hello r -tokens' though. Everything after 'grun' in the whole command is seemingly ignored. (Executed in the folder containing the Hello grammar and compiled class and java files)\nThe output for both commands:</p>\n<pre><code>C:\\Users\\jofwf&gt;java -cp C:\\Users\\jofwf\\lib\\antlr-4.13.1-complete.jar org.antlr.v4.gui.TestRig\njava org.antlr.v4.gui.TestRig GrammarName startRuleName\n  [-tokens] [-tree] [-gui] [-ps file.ps] [-encoding encodingname]\n  [-trace] [-diagnostics] [-SLL]\n  [input-filename(s)]\nUse startRuleName='tokens' if GrammarName is a lexer grammar.\nOmitting input-filename makes rig read from stdin.\n</code></pre>\n"},{"tags":["java","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":14037507,"reputation":68,"user_id":10139837,"display_name":"coderAsk"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1696163606,"creation_date":1696163606,"answer_id":77210483,"question_id":77210415,"body_markdown":"In your App class, Spring will not automatically inject application context . You need to manually inject the Spring application context and retrieve MessageRepository Bean from the Spring application context .\r\n\r\n\r\nYou can use something like this.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @SpringBootApplication\r\n    public class App {\r\n        private MessageRepository messageRepository ; \r\n\r\n        public void saveMessage(Message message) {messageRepository.save(message);}\r\n\r\n        public static void main(String[] args) {        \r\n          System.out.println(&quot;Hello World!&quot;);\r\n          \r\n          // Initialize Spring application context\r\n          ApplicationContext app = SpringApplication.run(App.class, args);\r\n          // Retrieve MessageRepository Bean\r\n           messageRepository = app.getBean(MessageRepository.class);\r\n          \r\n            App app = new App();\r\n            Message message = new Message();        \r\n            String timeStamp = new \r\n            SimpleDateFormat(&quot;yyyy.MM.dd.HH.mm.ss&quot;).format(new java.util.Date());       \r\n            message.setText(&quot;SpringDataJPA: &quot; + timeStamp);          \r\n            app.saveMessage(message);\r\n\r\n        } \r\n        \r\n     }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Missing something basic with Spring Data JPA","body":"<p>In your App class, Spring will not automatically inject application context . You need to manually inject the Spring application context and retrieve MessageRepository Bean from the Spring application context .</p>\n<p>You can use something like this.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@SpringBootApplication\npublic class App {\n    private MessageRepository messageRepository ; \n\n    public void saveMessage(Message message) {messageRepository.save(message);}\n\n    public static void main(String[] args) {        \n      System.out.println(\"Hello World!\");\n      \n      // Initialize Spring application context\n      ApplicationContext app = SpringApplication.run(App.class, args);\n      // Retrieve MessageRepository Bean\n       messageRepository = app.getBean(MessageRepository.class);\n      \n        App app = new App();\n        Message message = new Message();        \n        String timeStamp = new \n        SimpleDateFormat(\"yyyy.MM.dd.HH.mm.ss\").format(new java.util.Date());       \n        message.setText(\"SpringDataJPA: \" + timeStamp);          \n        app.saveMessage(message);\n\n    } \n    \n }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696170212,"creation_date":1696169520,"answer_id":77210838,"question_id":77210415,"body_markdown":"In the test case , the spring testing framework which is enabled by `@ExtendWith(SpringExtension.class)` which will help you to configure and start the spring context behind the scene and so those `@Autowired` stuff can work.\r\n\r\nTo do the equivalent things in a standalone and non spring-boot way,  you can create `AnnotationConfigApplicationContext` manually like :  \r\n\r\n``` java\r\npublic class Main {\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\t ApplicationContext context = new AnnotationConfigApplicationContext(SpringDataConfiguration.class, App.class);\r\n\t\t App app = context.getBean(App.class);\r\n\t\t app.main();\r\n\t}\r\n}\r\n```\r\n\r\nAnd you also need to modify the `main()` of the `App` class a bit :\r\n\r\n``` \r\npublic class App {\r\n\r\n    @Autowired \r\n    private MessageRepository messageRepository;\r\n\r\n    public void saveMessage(Message message) {      \r\n     messageRepository.save(message);        \r\n    }\r\n\r\n\r\n    public void main() {       \r\n        System.out.println(&quot;Hello World!&quot;);\r\n        Message message = new Message();            \r\n        message.setText(&quot;some text&quot;);          \r\n        saveMessage(message);\r\n     }\r\n}\r\n\r\n```\r\n\r\nmainly you have to change it to the instance method because you do not need create the `App` instance by yourself but let spring to create and then manage it such that it can autowire other beans like `MessageRepository` into it.","title":"Missing something basic with Spring Data JPA","body":"<p>In the test case , the spring testing framework which is enabled by <code>@ExtendWith(SpringExtension.class)</code> which will help you to configure and start the spring context behind the scene and so those <code>@Autowired</code> stuff can work.</p>\n<p>To do the equivalent things in a standalone and non spring-boot way,  you can create <code>AnnotationConfigApplicationContext</code> manually like :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    \n    public static void main(String[] args) {\n         ApplicationContext context = new AnnotationConfigApplicationContext(SpringDataConfiguration.class, App.class);\n         App app = context.getBean(App.class);\n         app.main();\n    }\n}\n</code></pre>\n<p>And you also need to modify the <code>main()</code> of the <code>App</code> class a bit :</p>\n<pre><code>public class App {\n\n    @Autowired \n    private MessageRepository messageRepository;\n\n    public void saveMessage(Message message) {      \n     messageRepository.save(message);        \n    }\n\n\n    public void main() {       \n        System.out.println(&quot;Hello World!&quot;);\n        Message message = new Message();            \n        message.setText(&quot;some text&quot;);          \n        saveMessage(message);\n     }\n}\n\n</code></pre>\n<p>mainly you have to change it to the instance method because you do not need create the <code>App</code> instance by yourself but let spring to create and then manage it such that it can autowire other beans like <code>MessageRepository</code> into it.</p>\n"}],"owner":{"account_id":1669466,"reputation":658,"user_id":1536209,"accept_rate":25,"display_name":"jwh20"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77210838,"answer_count":2,"score":0,"last_activity_date":1696170212,"creation_date":1696162322,"question_id":77210415,"body_markdown":"I&#39;m working my way though Catalin Tudose&#39;s &quot;Java Persistence with Spring Data and Hibernate&quot; and I&#39;ve hit a roadblock with the Spring Data JPA example in Chapter 2.\r\n\r\nComplete code is here:\r\n\r\n[Example Code][1]\r\n\r\nIf I use the example exactly as written using @Test like this it works fine:\r\n\r\n    package com.manning.javapersistence.ch02;\r\n    \r\n    import com.manning.javapersistence.ch02.configuration.SpringDataConfiguration;\r\n    import com.manning.javapersistence.ch02.repositories.MessageRepository;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.test.context.ContextConfiguration;\r\n    import org.springframework.test.context.junit.jupiter.SpringExtension;\r\n    \r\n    import java.util.List;\r\n    \r\n    import static org.junit.jupiter.api.Assertions.assertAll;\r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    \r\n    @ExtendWith(SpringExtension.class)\r\n    @ContextConfiguration(classes = {SpringDataConfiguration.class})\r\n    public class HelloWorldSpringDataJPATest {\r\n    \r\n        @Autowired\r\n        private MessageRepository messageRepository;\r\n    \r\n        @Test\r\n        public void storeLoadMessage() {\r\n            Message message = new Message();\r\n            message.setText(&quot;Hello World from Spring Data JPA!&quot;);\r\n    \r\n            messageRepository.save(message);\r\n    \r\n            List&lt;Message&gt; messages = (List&lt;Message&gt;) messageRepository.findAll();\r\n    \r\n            assertAll(\r\n                    () -&gt; assertEquals(1, messages.size()),\r\n                    () -&gt; assertEquals(&quot;Hello World from Spring Data JPA!&quot;, messages.get(0).getText())\r\n            );\r\n    \r\n        }\r\n    }\r\n\r\nI believe that the line:\r\n\r\n    @ContextConfiguration(classes = {SpringDataConfiguration.class})\r\n\r\nsets up the context so that my SpringDataConfiguration gets processed by Spring Data JPA and the @AutoWired works at runtime.\r\n\r\nBut I am wanting to use this outside of the test context and I have this:\r\n\r\n    public class App {\r\n    \r\n    \t@Autowired \tprivate MessageRepository messageRepository;\r\n    \r\n    \tpublic void saveMessage(Message message) { \t\tmessageRepository.save(message);\t \t}\r\n    \r\n    \tpublic static void main(String[] args) { \t\tSystem.out.println(&quot;Hello World!&quot;);\r\n    \r\n    \t\tApp app = new App();\r\n    \r\n    \t\tMessage message = new Message(); \t\t\r\n            String timeStamp = new \r\n            SimpleDateFormat(&quot;yyyy.MM.dd.HH.mm.ss&quot;).format(new java.util.Date()); \t\t\r\n            message.setText(&quot;SpringDataJPA: &quot; + timeStamp); \t\t \r\n            app.saveMessage(message);\r\n    \r\n    \t}\t }\r\n\r\nWhen I run it I get a NullPointerException because the messageRepository is not getting auto wired by Spring Data JPA.\r\n\r\nWhat am I missing?  How do I get the @AutoWired to work at runtime outside of the @Test context?\r\n\r\n  [1]: https://github.com/ctudose/java-persistence-spring-data-hibernate","title":"Missing something basic with Spring Data JPA","body":"<p>I'm working my way though Catalin Tudose's &quot;Java Persistence with Spring Data and Hibernate&quot; and I've hit a roadblock with the Spring Data JPA example in Chapter 2.</p>\n<p>Complete code is here:</p>\n<p><a href=\"https://github.com/ctudose/java-persistence-spring-data-hibernate\" rel=\"nofollow noreferrer\">Example Code</a></p>\n<p>If I use the example exactly as written using @Test like this it works fine:</p>\n<pre><code>package com.manning.javapersistence.ch02;\n\nimport com.manning.javapersistence.ch02.configuration.SpringDataConfiguration;\nimport com.manning.javapersistence.ch02.repositories.MessageRepository;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\n\nimport java.util.List;\n\nimport static org.junit.jupiter.api.Assertions.assertAll;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\n@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {SpringDataConfiguration.class})\npublic class HelloWorldSpringDataJPATest {\n\n    @Autowired\n    private MessageRepository messageRepository;\n\n    @Test\n    public void storeLoadMessage() {\n        Message message = new Message();\n        message.setText(&quot;Hello World from Spring Data JPA!&quot;);\n\n        messageRepository.save(message);\n\n        List&lt;Message&gt; messages = (List&lt;Message&gt;) messageRepository.findAll();\n\n        assertAll(\n                () -&gt; assertEquals(1, messages.size()),\n                () -&gt; assertEquals(&quot;Hello World from Spring Data JPA!&quot;, messages.get(0).getText())\n        );\n\n    }\n}\n</code></pre>\n<p>I believe that the line:</p>\n<pre><code>@ContextConfiguration(classes = {SpringDataConfiguration.class})\n</code></pre>\n<p>sets up the context so that my SpringDataConfiguration gets processed by Spring Data JPA and the @AutoWired works at runtime.</p>\n<p>But I am wanting to use this outside of the test context and I have this:</p>\n<pre><code>public class App {\n\n    @Autowired  private MessageRepository messageRepository;\n\n    public void saveMessage(Message message) {      messageRepository.save(message);        }\n\n    public static void main(String[] args) {        System.out.println(&quot;Hello World!&quot;);\n\n        App app = new App();\n\n        Message message = new Message();        \n        String timeStamp = new \n        SimpleDateFormat(&quot;yyyy.MM.dd.HH.mm.ss&quot;).format(new java.util.Date());       \n        message.setText(&quot;SpringDataJPA: &quot; + timeStamp);          \n        app.saveMessage(message);\n\n    }    }\n</code></pre>\n<p>When I run it I get a NullPointerException because the messageRepository is not getting auto wired by Spring Data JPA.</p>\n<p>What am I missing?  How do I get the @AutoWired to work at runtime outside of the @Test context?</p>\n"},{"tags":["java","mysql","hibernate","connection-pooling","c3p0"],"comments":[{"owner":{"account_id":1879878,"reputation":24286,"user_id":1700321,"display_name":"Aleksandr M"},"score":1,"creation_date":1408695578,"post_id":25381168,"comment_id":39695748,"body_markdown":"Use a connection pool.","body":"Use a connection pool."},{"owner":{"account_id":1070146,"reputation":427,"user_id":1069633,"display_name":"Saurabh Ande"},"score":0,"creation_date":1408997072,"post_id":25381168,"comment_id":39791388,"body_markdown":"You definitely need a Database connection pooling.  Please try [this link][1] \n\n\n  [1]: http://stackoverflow.com/a/7621207/1069633","body":"You definitely need a Database connection pooling.  Please try [this link][1]      [1]: <a href=\"http://stackoverflow.com/a/7621207/1069633\">stackoverflow.com/a/7621207/1069633</a>"},{"owner":{"account_id":4518727,"reputation":2512,"user_id":3672715,"accept_rate":75,"display_name":"Ripu Daman"},"score":0,"creation_date":1409076501,"post_id":25381168,"comment_id":39826507,"body_markdown":"Can you check this link http://stackoverflow.com/questions/23850585/how-to-start-spring-boot-app-without-depending-on-database? I think it will help you as this page eventually explains the settings required to set up the database connection on the fly whenever required.","body":"Can you check this link <a href=\"http://stackoverflow.com/questions/23850585/how-to-start-spring-boot-app-without-depending-on-database\" title=\"how to start spring boot app without depending on database\">stackoverflow.com/questions/23850585/&hellip;</a>? I think it will help you as this page eventually explains the settings required to set up the database connection on the fly whenever required."}],"answers":[{"tags":[],"owner":{"account_id":2228690,"reputation":396,"user_id":1966873,"accept_rate":100,"display_name":"AmuletxHeart"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1408446088,"creation_date":1408444733,"answer_id":25381289,"question_id":25381168,"body_markdown":"What server are you using? Are you hosting on a cloud platform as a service such as OpenShift?\r\n\r\nUsually for free plans, your site will spin down after idling for a while. When accessed again after some time, the web server spins up the fastest, but the database server spins up slower, causing the connection error. Usually just refreshing the page a few times will wake everything up and be good to go.\r\n\r\nhttps://www.openshift.com/products/pricing under &quot;Gear idling&quot;\r\n\r\nUpdate: if you are running on your own server,\r\n\r\nChange this line to the following for a quick fix\r\n\r\n    &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/dbName?autoReconnect=true&lt;/property&gt;\r\n\r\n\r\nSee this question for better understanding\r\n\r\nhttps://stackoverflow.com/questions/7565143/com-mysql-jdbc-exceptions-jdbc4-mysqlnontransientconnectionexception-no-operati","title":"Not able to connect with database after some times of deployment on server","body":"<p>What server are you using? Are you hosting on a cloud platform as a service such as OpenShift?</p>\n\n<p>Usually for free plans, your site will spin down after idling for a while. When accessed again after some time, the web server spins up the fastest, but the database server spins up slower, causing the connection error. Usually just refreshing the page a few times will wake everything up and be good to go.</p>\n\n<p><a href=\"https://www.openshift.com/products/pricing\" rel=\"nofollow noreferrer\">https://www.openshift.com/products/pricing</a> under \"Gear idling\"</p>\n\n<p>Update: if you are running on your own server,</p>\n\n<p>Change this line to the following for a quick fix</p>\n\n<pre><code>&lt;property name=\"hibernate.connection.url\"&gt;jdbc:mysql://localhost:3306/dbName?autoReconnect=true&lt;/property&gt;\n</code></pre>\n\n<p>See this question for better understanding</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7565143/com-mysql-jdbc-exceptions-jdbc4-mysqlnontransientconnectionexception-no-operati\">com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after connection closed</a></p>\n"},{"tags":[],"owner":{"account_id":3727665,"reputation":2086,"user_id":3101090,"display_name":"John R"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1408456996,"creation_date":1408456996,"answer_id":25385468,"question_id":25381168,"body_markdown":"The problem is occurring because your app is leaving the connections open for too long and something is timing them out.  One of three things is timing out the connection:\r\n\r\n 1. A firewall between the app server and database server \r\n 2. The database server OS\r\n 3. The database engine\r\n\r\nHave you considered setting maxIdleTime to a non-zero value or configuring Hibernate to use a [connection pool](http://www.mchange.com/projects/c3p0/) that can periodically test the connections (thereby keeping the TCP connection open) or [discard them after they have been open for a certain period of time](http://www.mchange.com/projects/c3p0/#maxIdleTime)?","title":"Not able to connect with database after some times of deployment on server","body":"<p>The problem is occurring because your app is leaving the connections open for too long and something is timing them out.  One of three things is timing out the connection:</p>\n\n<ol>\n<li>A firewall between the app server and database server </li>\n<li>The database server OS</li>\n<li>The database engine</li>\n</ol>\n\n<p>Have you considered setting maxIdleTime to a non-zero value or configuring Hibernate to use a <a href=\"http://www.mchange.com/projects/c3p0/\" rel=\"nofollow\">connection pool</a> that can periodically test the connections (thereby keeping the TCP connection open) or <a href=\"http://www.mchange.com/projects/c3p0/#maxIdleTime\" rel=\"nofollow\">discard them after they have been open for a certain period of time</a>?</p>\n"},{"tags":[],"owner":{"account_id":4293486,"reputation":85,"user_id":3509166,"accept_rate":50,"display_name":"Tee_Shady"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1408692460,"creation_date":1408692460,"answer_id":25441722,"question_id":25381168,"body_markdown":"You have to configure your idle time and configure a connection pool too, i will recommend  c3p0\r\n\r\nhttp://www.mkyong.com/hibernate/how-to-configure-the-c3p0-connection-pool-in-hibernate/\r\n\r\nAlso you can fin here the basic of how to configure parameters and how it works\r\n\r\nhttps://stackoverflow.com/questions/475893/what-are-the-required-c3p0-settings-for-hibernate-in-order-to-avoid-deadlocks\r\n\r\n\r\nIn some cases when you &quot;modify&quot; your app from outside those errors may occur","title":"Not able to connect with database after some times of deployment on server","body":"<p>You have to configure your idle time and configure a connection pool too, i will recommend  c3p0</p>\n\n<p><a href=\"http://www.mkyong.com/hibernate/how-to-configure-the-c3p0-connection-pool-in-hibernate/\" rel=\"nofollow noreferrer\">http://www.mkyong.com/hibernate/how-to-configure-the-c3p0-connection-pool-in-hibernate/</a></p>\n\n<p>Also you can fin here the basic of how to configure parameters and how it works</p>\n\n<p><a href=\"https://stackoverflow.com/questions/475893/what-are-the-required-c3p0-settings-for-hibernate-in-order-to-avoid-deadlocks\">What are the required C3P0 settings for hibernate in order to avoid Deadlocks</a></p>\n\n<p>In some cases when you \"modify\" your app from outside those errors may occur</p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1408737384,"creation_date":1408726456,"answer_id":25452029,"question_id":25381168,"body_markdown":"In your configuration properties you have used c3p0 property maxIdleTime, but c3p0 properties are configured using `c3p0.` prefix or `hibernate.c3p0.`. Note that enabling any of `c3p0` properties automatically enables the corresponding connection provider by hibernate heuristics. In the log isn&#39;t seen that you are using c3p0. If you are not configured data sources then Hibernate will use `hibernate.connection.provider_class org.hibernate.connection.DriverManagerConnectionProvider`. This connection provider has in-built rudimentary connection pool for which you can set a `hibernate.connection.pool_size`, but it is used only for development purposes. Never use it in the production environment. \r\n\r\nYou might have endless discussion on topic [How to fix java.net.SocketException: Broken pipe][1]. After some time you will realize that you have remained *open* connections in the pool, which are suddenly closed on the other side by the following reasons:\r\n\r\n - Firewalls or routers may clamp down on idle connections (the MySQL client/server protocol does not\r\nping).\r\n - The MySQL Server may be closing idle connections that exceed the `wait_timeout` or\r\n`interactive_timeout` threshold.    \r\n\r\nTo help troubleshoot these issues, the following tips can be used: \r\n\r\n - A recent (5.1.13+) version of JDBC driver is used.\r\n - Ensure that `wait_timeout` and `interactive_timeout` are set sufficiently high. Check if `interactiveClient` is used.\r\n - Ensure that `tcpKeepalive` is enabled.\r\n - Ensure that any configurable firewall or router timeout settings allow for the maximum expected connection idle time.\r\n - Ensure connections are valid when used from the connection pool. Use a query that starts with `/* ping */` to execute a lightweight ping instead of full query. Note, the syntax of the ping needs to be exactly as specified here.\r\n - Explicitly validate the connection before using it if the connection has been left idle for an extended period of time.\r\n - Minimize the duration a connection object is left idle while other application logic is executed.\r\n\r\nTo comply to some of this options you&#39;d better use a connection pool that you can use with Hibernate. Hibernate has support for commons-dbcp, c3p0, and proxool. Also you can configure JNDI data source on web server to use with hibernate, it has a connection pool. See [Chapter 7 Connection Pooling with Connector/J][2].  \r\n\r\nIf you like to configure Hibernate with c3p0 you should read this [How-To configure the C3P0 connection pool][3]. For dbcp example configuration you should check this post [MySQL, Hibernate and Broken Pipe Exception][4]. Whatever connection pooling you will use is up to you.   \r\n\r\n\r\n  [1]: https://stackoverflow.com/q/2309561/573032\r\n  [2]: http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-j2ee-concepts-connection-pooling.html\r\n  [3]: https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool\r\n  [4]: http://amitcodes.com/2008/07/26/16/","title":"Not able to connect with database after some times of deployment on server","body":"<p>In your configuration properties you have used c3p0 property maxIdleTime, but c3p0 properties are configured using <code>c3p0.</code> prefix or <code>hibernate.c3p0.</code>. Note that enabling any of <code>c3p0</code> properties automatically enables the corresponding connection provider by hibernate heuristics. In the log isn't seen that you are using c3p0. If you are not configured data sources then Hibernate will use <code>hibernate.connection.provider_class org.hibernate.connection.DriverManagerConnectionProvider</code>. This connection provider has in-built rudimentary connection pool for which you can set a <code>hibernate.connection.pool_size</code>, but it is used only for development purposes. Never use it in the production environment. </p>\n\n<p>You might have endless discussion on topic <a href=\"https://stackoverflow.com/q/2309561/573032\">How to fix java.net.SocketException: Broken pipe</a>. After some time you will realize that you have remained <em>open</em> connections in the pool, which are suddenly closed on the other side by the following reasons:</p>\n\n<ul>\n<li>Firewalls or routers may clamp down on idle connections (the MySQL client/server protocol does not\nping).</li>\n<li>The MySQL Server may be closing idle connections that exceed the <code>wait_timeout</code> or\n<code>interactive_timeout</code> threshold.    </li>\n</ul>\n\n<p>To help troubleshoot these issues, the following tips can be used: </p>\n\n<ul>\n<li>A recent (5.1.13+) version of JDBC driver is used.</li>\n<li>Ensure that <code>wait_timeout</code> and <code>interactive_timeout</code> are set sufficiently high. Check if <code>interactiveClient</code> is used.</li>\n<li>Ensure that <code>tcpKeepalive</code> is enabled.</li>\n<li>Ensure that any configurable firewall or router timeout settings allow for the maximum expected connection idle time.</li>\n<li>Ensure connections are valid when used from the connection pool. Use a query that starts with <code>/* ping */</code> to execute a lightweight ping instead of full query. Note, the syntax of the ping needs to be exactly as specified here.</li>\n<li>Explicitly validate the connection before using it if the connection has been left idle for an extended period of time.</li>\n<li>Minimize the duration a connection object is left idle while other application logic is executed.</li>\n</ul>\n\n<p>To comply to some of this options you'd better use a connection pool that you can use with Hibernate. Hibernate has support for commons-dbcp, c3p0, and proxool. Also you can configure JNDI data source on web server to use with hibernate, it has a connection pool. See <a href=\"http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-j2ee-concepts-connection-pooling.html\" rel=\"nofollow noreferrer\">Chapter 7 Connection Pooling with Connector/J</a>.  </p>\n\n<p>If you like to configure Hibernate with c3p0 you should read this <a href=\"https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool\" rel=\"nofollow noreferrer\">How-To configure the C3P0 connection pool</a>. For dbcp example configuration you should check this post <a href=\"http://amitcodes.com/2008/07/26/16/\" rel=\"nofollow noreferrer\">MySQL, Hibernate and Broken Pipe Exception</a>. Whatever connection pooling you will use is up to you.   </p>\n"}],"owner":{"account_id":469868,"reputation":5329,"user_id":876739,"accept_rate":57,"display_name":"xrcwrn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15475,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":4,"score":9,"last_activity_date":1696169655,"creation_date":1408444298,"question_id":25381168,"body_markdown":"I uploaded my war file on my server it works perfectly after deploy but after some time it shows exception.\r\nI am using struts2 and hibernate\r\n\r\nmy `hibernate.cfg.xml` is\r\n\r\n\r\n&lt;!-- language: lang-xml --&gt; \r\n\r\n    &lt;session-factory&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/dbName&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;UserName&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;Password&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.zeroDateTimeBehavior&quot;&gt;round&lt;/property&gt;  \r\n        &lt;property name=&quot;autoReconnect&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;maxIdleTime&quot;&gt;0&lt;/property&gt;\r\n        &lt;property name=&quot;use_sql_comments&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.pool_size&quot;&gt;20&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.current_session_context_class&quot;&gt;org.hibernate.context.ThreadLocalSessionContext&lt;/property&gt;\r\n        &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt; \r\n    &lt;/session-factory&gt;\r\n\r\nOn console After executing query it is showing following `Exception`\r\n\r\n    263512233 [http-bio-12414-exec-1768] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: 08003\r\n    263512233 [http-bio-12414-exec-1768] ERROR org.hibernate.util.JDBCExceptionReporter - No operations allowed after connection closed.Connection was implicitly closed by the driver.\r\n    org.hibernate.exception.JDBCConnectionException: could not execute query\r\n    \tat org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)\r\n    \tat org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2545)\r\n    \tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)\r\n    \tat org.hibernate.loader.Loader.list(Loader.java:2271)\r\n    \tat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:459)\r\n    \tat org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:365)\r\n    \tat org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)\r\n    \tat org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)\r\n    \tat org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)\r\n    \tat iland.login.LoginBusiness.HbmLogin(LoginBusiness.java:104)\r\n    \tat iland.login.LoginAction.doLogin(LoginAction.java:53)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:450)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:289)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:252)\r\n    \tat org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:167)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)\r\n    \tat org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:239)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:239)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:73)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:91)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:161)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:189)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)\r\n    \tat org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:563)\r\n    \tat org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)\r\n    \tat org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:99)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n    \tat java.lang.Thread.run(Thread.java:662)\r\n    Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed by the driver.\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:513)\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:407)\r\n    \tat com.mysql.jdbc.Util.getInstance(Util.java:382)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1013)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)\r\n    \tat com.mysql.jdbc.ConnectionImpl.throwConnectionClosedException(ConnectionImpl.java:1213)\r\n    \tat com.mysql.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:1200)\r\n    \tat com.mysql.jdbc.ConnectionImpl.prepareStatement(ConnectionImpl.java:4203)\r\n    \tat com.mysql.jdbc.ConnectionImpl.prepareStatement(ConnectionImpl.java:4169)\r\n    \tat org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)\r\n    \tat org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)\r\n    \tat org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)\r\n    \tat org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1700)\r\n    \tat org.hibernate.loader.Loader.doQuery(Loader.java:801)\r\n    \tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2542)\r\n    \t... 77 more\r\n    Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 102,104,208 milliseconds ago.  The last packet sent successfully to the server was 102,104,208 milliseconds ago. is longer than the server configured value of &#39;wait_timeout&#39;. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property &#39;autoReconnect=true&#39; to avoid this problem.\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:513)\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:407)\r\n    \tat com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)\r\n    \tat com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3348)\r\n    \tat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1967)\r\n    \tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2140)\r\n    \tat com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2626)\r\n    \tat com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2111)\r\n    \tat com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2273)\r\n    \tat org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)\r\n    \tat org.hibernate.loader.Loader.getResultSet(Loader.java:1953)\r\n    \tat org.hibernate.loader.Loader.doQuery(Loader.java:802)\r\n    \t... 79 more\r\n    Caused by: java.net.SocketException: Broken pipe\r\n    \tat java.net.SocketOutputStream.socketWrite0(Native Method)\r\n    \tat java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\r\n    \tat java.net.SocketOutputStream.write(SocketOutputStream.java:136)\r\n    \tat java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\r\n    \tat java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\r\n    \tat com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3329)\r\n    \t... 87 more\r\n    Hibernate: \r\n        /* insert iland.hbm.ErrorLog\r\n            */ insert \r\n            into\r\n                xrcwrn_retail_shop.error_log\r\n                (class, method, line_no, error, add_date) \r\n            values\r\n                (?, ?, ?, ?, ?)\r\n    Aug 19, 2014 5:23:08 AM com.opensymphony.xwork2.util.logging.commons.CommonsLogger error\r\n    SEVERE: Exception occurred during processing request: null\r\n    java.lang.NullPointerException\r\n    \tat iland.login.LoginBusiness.LoginSessionSave(LoginBusiness.java:123)\r\n    \tat iland.login.LoginBusiness.HbmLogin(LoginBusiness.java:116)\r\n    \tat iland.login.LoginAction.doLogin(LoginAction.java:53)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:450)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:289)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:252)\r\n    \tat org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:167)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)\r\n    \tat org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:239)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:239)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:73)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:91)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)\r\n    \tat com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:161)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:189)\r\n    \tat com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\r\n    \tat org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)\r\n    \tat org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:563)\r\n    \tat org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)\r\n    \tat org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:99)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n    \tat java.lang.Thread.run(Thread.java:662)\r\n\r\n\r\nHow to resolve above problem.\r\nSo that it can work properly all the time.\r\n\r\nEdit: After few hours of deployment it is showing above problem. On my server I am using Apache Tomcat 7 and my sql database.\r\n\r\nNew Addition:\r\n  Added following details\r\n\r\n    &lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;20&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;0&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.max_statements&quot;&gt;50&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.c3p0.idle_test_period&quot;&gt;0&lt;/property&gt;\r\n\r\nStill facing the problem what modification/addition should I make here\r\n","title":"Not able to connect with database after some times of deployment on server","body":"<p>I uploaded my war file on my server it works perfectly after deploy but after some time it shows exception.\nI am using struts2 and hibernate</p>\n\n<p>my <code>hibernate.cfg.xml</code> is</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;session-factory&gt;\n    &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.driver_class\"&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.url\"&gt;jdbc:mysql://localhost:3306/dbName&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.username\"&gt;UserName&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.password\"&gt;Password&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.zeroDateTimeBehavior\"&gt;round&lt;/property&gt;  \n    &lt;property name=\"autoReconnect\"&gt;true&lt;/property&gt;\n    &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n    &lt;property name=\"format_sql\"&gt;true&lt;/property&gt;\n    &lt;property name=\"maxIdleTime\"&gt;0&lt;/property&gt;\n    &lt;property name=\"use_sql_comments\"&gt;true&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.pool_size\"&gt;20&lt;/property&gt;\n    &lt;property name=\"hibernate.current_session_context_class\"&gt;org.hibernate.context.ThreadLocalSessionContext&lt;/property&gt;\n    &lt;property name=\"current_session_context_class\"&gt;thread&lt;/property&gt; \n&lt;/session-factory&gt;\n</code></pre>\n\n<p>On console After executing query it is showing following <code>Exception</code></p>\n\n<pre><code>263512233 [http-bio-12414-exec-1768] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: 08003\n263512233 [http-bio-12414-exec-1768] ERROR org.hibernate.util.JDBCExceptionReporter - No operations allowed after connection closed.Connection was implicitly closed by the driver.\norg.hibernate.exception.JDBCConnectionException: could not execute query\n    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)\n    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)\n    at org.hibernate.loader.Loader.doList(Loader.java:2545)\n    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)\n    at org.hibernate.loader.Loader.list(Loader.java:2271)\n    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:459)\n    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:365)\n    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)\n    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)\n    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)\n    at iland.login.LoginBusiness.HbmLogin(LoginBusiness.java:104)\n    at iland.login.LoginAction.doLogin(LoginAction.java:53)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:450)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:289)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:252)\n    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:167)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)\n    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:239)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:239)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:73)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:91)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:161)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:189)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)\n    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:563)\n    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)\n    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:99)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662)\nCaused by: com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed by the driver.\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:407)\n    at com.mysql.jdbc.Util.getInstance(Util.java:382)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1013)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)\n    at com.mysql.jdbc.ConnectionImpl.throwConnectionClosedException(ConnectionImpl.java:1213)\n    at com.mysql.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:1200)\n    at com.mysql.jdbc.ConnectionImpl.prepareStatement(ConnectionImpl.java:4203)\n    at com.mysql.jdbc.ConnectionImpl.prepareStatement(ConnectionImpl.java:4169)\n    at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)\n    at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)\n    at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)\n    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1700)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:801)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)\n    at org.hibernate.loader.Loader.doList(Loader.java:2542)\n    ... 77 more\nCaused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 102,104,208 milliseconds ago.  The last packet sent successfully to the server was 102,104,208 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:407)\n    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)\n    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3348)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1967)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2140)\n    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2626)\n    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2111)\n    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2273)\n    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)\n    at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:802)\n    ... 79 more\nCaused by: java.net.SocketException: Broken pipe\n    at java.net.SocketOutputStream.socketWrite0(Native Method)\n    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\n    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)\n    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\n    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3329)\n    ... 87 more\nHibernate: \n    /* insert iland.hbm.ErrorLog\n        */ insert \n        into\n            xrcwrn_retail_shop.error_log\n            (class, method, line_no, error, add_date) \n        values\n            (?, ?, ?, ?, ?)\nAug 19, 2014 5:23:08 AM com.opensymphony.xwork2.util.logging.commons.CommonsLogger error\nSEVERE: Exception occurred during processing request: null\njava.lang.NullPointerException\n    at iland.login.LoginBusiness.LoginSessionSave(LoginBusiness.java:123)\n    at iland.login.LoginBusiness.HbmLogin(LoginBusiness.java:116)\n    at iland.login.LoginAction.doLogin(LoginAction.java:53)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:450)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:289)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:252)\n    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:167)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)\n    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:239)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:239)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:73)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:91)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)\n    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:161)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:189)\n    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:246)\n    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)\n    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:563)\n    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)\n    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:99)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n    at java.lang.Thread.run(Thread.java:662)\n</code></pre>\n\n<p>How to resolve above problem.\nSo that it can work properly all the time.</p>\n\n<p>Edit: After few hours of deployment it is showing above problem. On my server I am using Apache Tomcat 7 and my sql database.</p>\n\n<p>New Addition:\n  Added following details</p>\n\n<pre><code>&lt;property name=\"hibernate.c3p0.min_size\"&gt;5&lt;/property&gt;\n&lt;property name=\"hibernate.c3p0.max_size\"&gt;20&lt;/property&gt;\n&lt;property name=\"hibernate.c3p0.timeout\"&gt;0&lt;/property&gt;\n&lt;property name=\"hibernate.c3p0.max_statements\"&gt;50&lt;/property&gt;\n&lt;property name=\"hibernate.c3p0.idle_test_period\"&gt;0&lt;/property&gt;\n</code></pre>\n\n<p>Still facing the problem what modification/addition should I make here</p>\n"},{"tags":["java","sql","hibernate","jpa","hibernate-native-query"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1641726537,"post_id":70637754,"comment_id":124876268,"body_markdown":"How does the executed SQL statement look like?","body":"How does the executed SQL statement look like?"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1641726586,"post_id":70637754,"comment_id":124876275,"body_markdown":"And the join looks wired: &quot;FROM table_A table_A JOIN example example ON example.id = :idExample &quot; you are not joing table_A and example at all","body":"And the join looks wired: &quot;FROM table_A table_A JOIN example example ON example.id = :idExample &quot; you are not joing table_A and example at all"}],"answers":[{"tags":[],"owner":{"account_id":29574952,"reputation":1,"user_id":22666171,"display_name":"lamlpFX15058"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696169276,"creation_date":1696169010,"answer_id":77210798,"question_id":70637754,"body_markdown":"You should create DTO is an entity and ensure that values of query which map to id field (one or more) in DTO are not duplicated\r\n\r\nMy DTO:\r\n\r\n    @Embeddable\r\n    public class PrimaryKey implements Serializable {\r\n        private int job_id;\r\n        private int prof_id;\r\n    }\r\n\r\n    \r\n\r\n    @SqlResultSetMapping(\r\n            name = &quot;JobProfileResultMapping&quot;,\r\n            classes = @ConstructorResult(\r\n                    targetClass = JobProfileResult.class,\r\n                    columns = {\r\n                            @ColumnResult(name = &quot;job_id&quot;, type = Integer.class),\r\n                            @ColumnResult(name = &quot;prof_id&quot;, type = Integer.class),\r\n                            @ColumnResult(name = &quot;title&quot;, type = String.class),\r\n                            @ColumnResult(name = &quot;name&quot;, type = String.class)\r\n                    }\r\n            )\r\n    )\r\n    @Entity\r\n    @IdClass(PrimaryKey.class)\r\n    public class JobProfileResult {\r\n        @Id\r\n        private int job_id;\r\n    \r\n        @Id\r\n        private int prof_id;\r\n        private String title;\r\n    \r\n        private String name;\r\n    \r\n        public void setJob_id(int job_id) {\r\n            this.job_id = job_id;\r\n        }\r\n    \r\n        public void setTitle(String title) {\r\n            this.title = title;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public int getJob_id() {\r\n            return job_id;\r\n        }\r\n    \r\n        public String getTitle() {\r\n            return title;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    }\r\n\r\nMy repository:\r\n\r\n    @Repository\r\n    public interface JobProfileRepository extends JpaRepository&lt;JobProfileResult, Integer&gt; {\r\n        @Query(value = &quot;select j.job_id, p.prof_id, j.title, p.name from job j join job_profile jp on j.job_id=jp.job_id join profile p on jp.prof_id=p.prof_id&quot;, nativeQuery = true)\r\n        public List&lt;JobProfileResult&gt; getJobProfile();\r\n    }\r\n\r\n","title":"@NamedNativeQuery @SqlResultSetMapping wrong mapping COUNT(*)","body":"<p>You should create DTO is an entity and ensure that values of query which map to id field (one or more) in DTO are not duplicated</p>\n<p>My DTO:</p>\n<pre><code>@Embeddable\npublic class PrimaryKey implements Serializable {\n    private int job_id;\n    private int prof_id;\n}\n\n\n\n@SqlResultSetMapping(\n        name = &quot;JobProfileResultMapping&quot;,\n        classes = @ConstructorResult(\n                targetClass = JobProfileResult.class,\n                columns = {\n                        @ColumnResult(name = &quot;job_id&quot;, type = Integer.class),\n                        @ColumnResult(name = &quot;prof_id&quot;, type = Integer.class),\n                        @ColumnResult(name = &quot;title&quot;, type = String.class),\n                        @ColumnResult(name = &quot;name&quot;, type = String.class)\n                }\n        )\n)\n@Entity\n@IdClass(PrimaryKey.class)\npublic class JobProfileResult {\n    @Id\n    private int job_id;\n\n    @Id\n    private int prof_id;\n    private String title;\n\n    private String name;\n\n    public void setJob_id(int job_id) {\n        this.job_id = job_id;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getJob_id() {\n        return job_id;\n    }\n\n    public String getTitle() {\n        return title;\n    }\n\n    public String getName() {\n        return name;\n    }\n}\n</code></pre>\n<p>My repository:</p>\n<pre><code>@Repository\npublic interface JobProfileRepository extends JpaRepository&lt;JobProfileResult, Integer&gt; {\n    @Query(value = &quot;select j.job_id, p.prof_id, j.title, p.name from job j join job_profile jp on j.job_id=jp.job_id join profile p on jp.prof_id=p.prof_id&quot;, nativeQuery = true)\n    public List&lt;JobProfileResult&gt; getJobProfile();\n}\n</code></pre>\n"}],"owner":{"account_id":16704835,"reputation":117,"user_id":12073583,"display_name":"Ed-Genesis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":405,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696169276,"creation_date":1641691252,"question_id":70637754,"body_markdown":"I&#39;m having a strange error using @SqlResultSetMapping and @NamedNativeQuery.\r\n\r\nMy Entity has:\r\n\r\n    @NamedNativeQuery(\r\n            name = &quot;example_query&quot;,\r\n            query = &quot;SELECT table_A.id, &quot; +\r\n                    &quot;COUNT(*) AS numberOfA &quot; +\r\n                    &quot;FROM table_A table_A &quot; +\r\n                    &quot;  JOIN example example ON example.id = :idExample &quot; +\r\n                    &quot;GROUP BY id &quot; +\r\n                    &quot;ORDER BY numberOfA DESC;&quot;,\r\n            resultSetMapping = &quot;myMapping&quot;\r\n    )\r\n    @SqlResultSetMapping(\r\n            name = &quot;myMapping&quot;,\r\n            classes = @ConstructorResult(\r\n                    targetClass = ExampleDTO.class,\r\n                    columns = {\r\n                            @ColumnResult(name = &quot;id&quot;, type = Integer.class),\r\n                            @ColumnResult(name = &quot;numberOfA&quot;, type = Integer.class)\r\n                    }\r\n            )\r\n    )\r\n    public class Entity implements Serializable { /////// }\r\n\r\n\r\nMy DTO is like:\r\n\r\n    public class ExampleDTO {\r\n    \r\n        private Integer id;\r\n        private Integer numberOfA;\r\n    \r\n    }\r\n\r\nMy Repository:\r\n\r\n    public interface Entity extends JpaRepository&lt;Entity,Integer&gt; {\r\n\r\n        @Query(name = &quot;example_query&quot;, nativeQuery = true)\r\n        List&lt;ExampleDTO&gt; findExampleQuery(@Param(&quot;id&quot;) Integer id);\r\n\r\n    }\r\n\r\nOn the database the same query return:\r\n\r\n    id     |      numberofa\r\n     1               11\r\n     2                5\r\n\r\nand the mapping return an object with:\r\n\r\n    id     |      numberofa\r\n     1               154\r\n     2                70\r\n\r\nHow is that possible?","title":"@NamedNativeQuery @SqlResultSetMapping wrong mapping COUNT(*)","body":"<p>I'm having a strange error using @SqlResultSetMapping and @NamedNativeQuery.</p>\n<p>My Entity has:</p>\n<pre><code>@NamedNativeQuery(\n        name = &quot;example_query&quot;,\n        query = &quot;SELECT table_A.id, &quot; +\n                &quot;COUNT(*) AS numberOfA &quot; +\n                &quot;FROM table_A table_A &quot; +\n                &quot;  JOIN example example ON example.id = :idExample &quot; +\n                &quot;GROUP BY id &quot; +\n                &quot;ORDER BY numberOfA DESC;&quot;,\n        resultSetMapping = &quot;myMapping&quot;\n)\n@SqlResultSetMapping(\n        name = &quot;myMapping&quot;,\n        classes = @ConstructorResult(\n                targetClass = ExampleDTO.class,\n                columns = {\n                        @ColumnResult(name = &quot;id&quot;, type = Integer.class),\n                        @ColumnResult(name = &quot;numberOfA&quot;, type = Integer.class)\n                }\n        )\n)\npublic class Entity implements Serializable { /////// }\n</code></pre>\n<p>My DTO is like:</p>\n<pre><code>public class ExampleDTO {\n\n    private Integer id;\n    private Integer numberOfA;\n\n}\n</code></pre>\n<p>My Repository:</p>\n<pre><code>public interface Entity extends JpaRepository&lt;Entity,Integer&gt; {\n\n    @Query(name = &quot;example_query&quot;, nativeQuery = true)\n    List&lt;ExampleDTO&gt; findExampleQuery(@Param(&quot;id&quot;) Integer id);\n\n}\n</code></pre>\n<p>On the database the same query return:</p>\n<pre><code>id     |      numberofa\n 1               11\n 2                5\n</code></pre>\n<p>and the mapping return an object with:</p>\n<pre><code>id     |      numberofa\n 1               154\n 2                70\n</code></pre>\n<p>How is that possible?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":8347952,"reputation":5186,"user_id":6271180,"display_name":"Benoit"},"down_vote_count":2,"up_vote_count":26,"is_accepted":false,"score":24,"last_activity_date":1575551246,"creation_date":1575551246,"answer_id":59195898,"question_id":57750294,"body_markdown":"A simple workaround is to [disable the Restart](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-restart-disable) by setting the system property:\r\n\r\n    spring.devtools.restart.enabled = false\r\n\r\nFor example, when using spring-boot maven plugin, launch the app this way:\r\n\r\n\r\n    mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-Dspring.devtools.restart.enabled=false&quot;\r\n\r\n","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<p>A simple workaround is to <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-restart-disable\" rel=\"noreferrer\">disable the Restart</a> by setting the system property:</p>\n\n<pre><code>spring.devtools.restart.enabled = false\n</code></pre>\n\n<p>For example, when using spring-boot maven plugin, launch the app this way:</p>\n\n<pre><code>mvn spring-boot:run -Dspring-boot.run.jvmArguments=\"-Dspring.devtools.restart.enabled=false\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16121915,"reputation":709,"user_id":11637696,"display_name":"Hilal Aissani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620288831,"creation_date":1594414688,"answer_id":62842171,"question_id":57750294,"body_markdown":"I was having the same problem when I am connecting to the mysql db via persistence.xml:\r\n\r\n    &lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_1_0.xsd&quot;\r\n                 version=&quot;2.2&quot;&gt;\r\n        &lt;!-- the name=&quot;pu&quot; will be used in MainApplicationClass --&gt;\r\n        &lt;persistence-unit name=&quot;pu1&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n            &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n            &lt;properties&gt;\r\n                &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot; /&gt;\r\n                &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot; /&gt;\r\n                &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:mysql://localhost:3306/spring_hibernate_jpa_db?useSSL=false&amp;amp;serverTimezone=UTC&amp;amp;useLegacyDatetimeCode=false&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;hilal&quot; /&gt;\r\n                &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;hilal&quot; /&gt;\r\n                &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;false&quot; /&gt;\r\n                &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot; /&gt;\r\n                &lt;property name=&quot;hibernate.id.new_generator_mappings&quot; value=&quot;true&quot; /&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n    \r\n\r\nthe only solution for me is to start mvn with the command:\r\n\r\n    mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;Dspring.devtools.restart.enabled=false&quot;","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<p>I was having the same problem when I am connecting to the mysql db via persistence.xml:</p>\n<pre><code>&lt;persistence xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_1_0.xsd&quot;\n             version=&quot;2.2&quot;&gt;\n    &lt;!-- the name=&quot;pu&quot; will be used in MainApplicationClass --&gt;\n    &lt;persistence-unit name=&quot;pu1&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQLDialect&quot; /&gt;\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot; /&gt;\n            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:mysql://localhost:3306/spring_hibernate_jpa_db?useSSL=false&amp;amp;serverTimezone=UTC&amp;amp;useLegacyDatetimeCode=false&quot;/&gt;\n            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;hilal&quot; /&gt;\n            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;hilal&quot; /&gt;\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;false&quot; /&gt;\n            &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot; /&gt;\n            &lt;property name=&quot;hibernate.id.new_generator_mappings&quot; value=&quot;true&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>the only solution for me is to start mvn with the command:</p>\n<pre><code>mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;Dspring.devtools.restart.enabled=false&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11529584,"reputation":631,"user_id":8448924,"display_name":"Brijesh Lakkad"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1596222816,"creation_date":1596222816,"answer_id":63197839,"question_id":57750294,"body_markdown":"Maybe what is happening here is that:\r\nReference is being created of the base class and then casting is happening for the inherited class.\r\n\r\nLet me give an example. Assume that we have a base class named &quot;BaseClass&quot; and one class &quot;ChildClass&quot; is extending &quot;BaseClass&quot;.\r\n\r\n    BaseClass bClass = new BaseClass(); // NOTICE HERE -&gt; new BaseClass();\r\n    \r\n    \r\n    // Somewhere in next code lines\r\n    ChildClass childClass = (ChildClass) bClass;\r\n\r\nThis will **throw the error** which you are mentioning. \r\n\r\n**DO this:**\r\n\r\n    BaseClass bClass = new ChildClass(); // NOTICE HERE -&gt; new ChildClass();\r\n    \r\n    \r\n    // Somewhere in next code lines\r\n    ChildClass childClass = (ChildClass) bClass;\r\n\r\n\r\nI hope this will solve the problem as it solved mine\r\n\r\n\r\n","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<p>Maybe what is happening here is that:\nReference is being created of the base class and then casting is happening for the inherited class.</p>\n<p>Let me give an example. Assume that we have a base class named &quot;BaseClass&quot; and one class &quot;ChildClass&quot; is extending &quot;BaseClass&quot;.</p>\n<pre><code>BaseClass bClass = new BaseClass(); // NOTICE HERE -&gt; new BaseClass();\n\n\n// Somewhere in next code lines\nChildClass childClass = (ChildClass) bClass;\n</code></pre>\n<p>This will <strong>throw the error</strong> which you are mentioning.</p>\n<p><strong>DO this:</strong></p>\n<pre><code>BaseClass bClass = new ChildClass(); // NOTICE HERE -&gt; new ChildClass();\n\n\n// Somewhere in next code lines\nChildClass childClass = (ChildClass) bClass;\n</code></pre>\n<p>I hope this will solve the problem as it solved mine</p>\n"},{"tags":[],"owner":{"account_id":19396623,"reputation":193,"user_id":14184172,"display_name":"SriRamaSaiKartheek pamidimukka"},"down_vote_count":4,"up_vote_count":20,"is_accepted":false,"score":16,"last_activity_date":1598639392,"creation_date":1598639392,"answer_id":63639151,"question_id":57750294,"body_markdown":"```\r\njava.lang.ClassCastException: class &lt;Class_Name&gt; cannot be cast to class &lt;Class_Name&gt; (&lt;Class_Name&gt; is in unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader &lt;Class_Name&gt; is in unnamed module of loader &#39;app&#39;)\r\n```\r\n\r\nThis is related to spring dev tools package. Try removing the package if it is not required.\r\n","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<pre><code>java.lang.ClassCastException: class &lt;Class_Name&gt; cannot be cast to class &lt;Class_Name&gt; (&lt;Class_Name&gt; is in unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader &lt;Class_Name&gt; is in unnamed module of loader 'app')\n</code></pre>\n<p>This is related to spring dev tools package. Try removing the package if it is not required.</p>\n"},{"tags":[],"owner":{"account_id":15084230,"reputation":13,"user_id":13261186,"display_name":"Nidhi Agrawal"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1608481832,"creation_date":1608481832,"answer_id":65382151,"question_id":57750294,"body_markdown":"removing the dependency of devtools from pom.xml will help \r\n\r\n    &lt;!-- \t&lt;dependency&gt;\r\n    \t        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t        &lt;optional&gt;true&lt;/optional&gt;\r\n    \t    &lt;/dependency&gt;\r\n    --&gt;","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<p>removing the dependency of devtools from pom.xml will help</p>\n<pre><code>&lt;!--    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n--&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13592842,"reputation":1,"user_id":9805726,"display_name":"Hilmi Kantarci"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1639649307,"creation_date":1639649307,"answer_id":70377156,"question_id":57750294,"body_markdown":"You should be main class\r\n```\r\npublic static void main(String[] args) {\r\n\r\n    System.setProperty(&quot;spring.devtools.restart.enabled&quot;, &quot;false&quot;);\r\n\r\n    SpringApplication.run(MyApp.class, args);\r\n}\r\n```\r\n\r\n\r\n","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<p>You should be main class</p>\n<pre><code>public static void main(String[] args) {\n\n    System.setProperty(&quot;spring.devtools.restart.enabled&quot;, &quot;false&quot;);\n\n    SpringApplication.run(MyApp.class, args);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":415813,"reputation":3142,"user_id":790839,"display_name":"Anver Sadhat"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1644992239,"creation_date":1644992239,"answer_id":71137172,"question_id":57750294,"body_markdown":"This might work : If you are using springboot devtools in your project (pom/gradle), then make sure your class that is using @SpringBootApplication is  ***&quot;public&quot;***.\r\n\r\n\r\n    @SpringBootApplication\r\n    public class MyApp {\r\n      public static void main(String ... args) {\r\n            SpringApplication.run(MyApp.class,args);\r\n        }\r\n    }","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<p>This might work : If you are using springboot devtools in your project (pom/gradle), then make sure your class that is using @SpringBootApplication is  <em><strong>&quot;public&quot;</strong></em>.</p>\n<pre><code>@SpringBootApplication\npublic class MyApp {\n  public static void main(String ... args) {\n        SpringApplication.run(MyApp.class,args);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671150852,"creation_date":1671150852,"answer_id":74819040,"question_id":57750294,"body_markdown":"I tried this and it&#39;s working in my case :\r\n\r\n    mvn dependency:purge-local-repository\r\n\r\n","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<p>I tried this and it's working in my case :</p>\n<pre><code>mvn dependency:purge-local-repository\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4907986,"reputation":1440,"user_id":3997460,"accept_rate":62,"display_name":"megloff"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696168783,"creation_date":1696168783,"answer_id":77210785,"question_id":57750294,"body_markdown":"The problem is that when you are using the devtools the ClassLoader get set to a different one `org.springframework.boot.devtools.restart.classloader.RestartClassLoader` then the Cache Provider / Framework you are using. \r\n\r\nIn case you are using JCache or EhCache you simple initialize the Cache Manager by making sure that you are using the same class loader. \r\n\r\nMore information and background can be found [here][1]\r\n\r\n```\r\nimport javax.cache.CacheManager;\r\nimport javax.cache.Caching;\r\nimport javax.cache.spi.CachingProvider;\r\n\r\n@Configuration\r\n@EnableCaching\r\n@Slf4j\r\npublic class CachingConfiguration {\r\n\r\n\t@Bean\r\n\t@Primary\r\n\tpublic CacheManager myCacheManager() {\r\n     \r\n    // The trick is to use &quot;Thread.currentThread().getContextClassLoader()&quot;\r\n    // which overwrites the default class loader set internally by the cache provider\r\n    // with this you ensure both Class loaders are the same when you are using the devtools \r\n\r\n\t\tCachingProvider provider = Caching.getCachingProvider();\r\n\t\tCacheManager cacheManager = provider.getCacheManager(provider.getDefaultURI(), Thread.currentThread().getContextClassLoader());\r\n\t\treturn cacheManager;\r\n\t}\r\n\r\n\r\n    // Optional - in the same class or separate class you can verify the \r\n    // reload which gets initiated by the devtools. So you can check if the \r\n    // Class loader of your cache Manager and the one currently used by the\r\n    // Spring Framework is the same\r\n    \r\n    @Autowired\r\n\t@Lazy\r\n\tCacheManager cacheManager;\r\n\r\n    @EventListener\r\n\tpublic void handleContextRefreshEvent(ContextRefreshedEvent ctxEvt) {\t\t\t\r\n        ClassLoader loader1 = Thread.currentThread().getContextClassLoader();\r\n\t\tClassLoader loader2 = cacheManager.getClassLoader();\r\n\t\tlog.debug(&quot;{} = {}&quot;, loader1, loader2);\r\n\t}\r\n}\r\n```\r\n\r\nThe expected output should then be\r\n\r\n```\r\norg.springframework.boot.devtools.restart.classloader.RestartClassLoader@3478e262 = org.springframework.boot.devtools.restart.classloader.RestartClassLoader@3478e262\r\n```\r\n\r\n  [1]: https://segmentfault.com/a/1190000041647471/en","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<p>The problem is that when you are using the devtools the ClassLoader get set to a different one <code>org.springframework.boot.devtools.restart.classloader.RestartClassLoader</code> then the Cache Provider / Framework you are using.</p>\n<p>In case you are using JCache or EhCache you simple initialize the Cache Manager by making sure that you are using the same class loader.</p>\n<p>More information and background can be found <a href=\"https://segmentfault.com/a/1190000041647471/en\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>import javax.cache.CacheManager;\nimport javax.cache.Caching;\nimport javax.cache.spi.CachingProvider;\n\n@Configuration\n@EnableCaching\n@Slf4j\npublic class CachingConfiguration {\n\n    @Bean\n    @Primary\n    public CacheManager myCacheManager() {\n     \n    // The trick is to use &quot;Thread.currentThread().getContextClassLoader()&quot;\n    // which overwrites the default class loader set internally by the cache provider\n    // with this you ensure both Class loaders are the same when you are using the devtools \n\n        CachingProvider provider = Caching.getCachingProvider();\n        CacheManager cacheManager = provider.getCacheManager(provider.getDefaultURI(), Thread.currentThread().getContextClassLoader());\n        return cacheManager;\n    }\n\n\n    // Optional - in the same class or separate class you can verify the \n    // reload which gets initiated by the devtools. So you can check if the \n    // Class loader of your cache Manager and the one currently used by the\n    // Spring Framework is the same\n    \n    @Autowired\n    @Lazy\n    CacheManager cacheManager;\n\n    @EventListener\n    public void handleContextRefreshEvent(ContextRefreshedEvent ctxEvt) {           \n        ClassLoader loader1 = Thread.currentThread().getContextClassLoader();\n        ClassLoader loader2 = cacheManager.getClassLoader();\n        log.debug(&quot;{} = {}&quot;, loader1, loader2);\n    }\n}\n</code></pre>\n<p>The expected output should then be</p>\n<pre><code>org.springframework.boot.devtools.restart.classloader.RestartClassLoader@3478e262 = org.springframework.boot.devtools.restart.classloader.RestartClassLoader@3478e262\n</code></pre>\n"}],"owner":{"account_id":15755381,"reputation":251,"user_id":11368709,"display_name":"ddavidik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48664,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":9,"score":25,"last_activity_date":1696168783,"creation_date":1567382776,"question_id":57750294,"body_markdown":"I am quite new to Spring and Java as a whole and I am currently working on an API. I&#39;ve got this code which accesses MSSQL database, retrieves the results and IS SUPPOSED TO visualize it, but it doesn&#39;t work. I mean, if I would only call the procedure and visualize the result set, it would work normally. The problem is that I can&#39;t work with the &quot;RatingProcedure&quot; object. When I try get some object&#39;s value, it shows me following **error**: \r\n\r\n&gt;Hibernate: \r\n    {call dis_entity.spdcmpracovnici(?,?,?,?)}\r\n&gt;2019-09-02 01:56:01.355  WARN 8720 --- [nio-8050-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class com.pproi.dcm.ratingprocedure.RatingProcedure ([Ljava.lang.Object; is in module java.base of loader &#39;bootstrap&#39;; &gt;com.pproi.dcm.ratingprocedure.RatingProcedure is in unnamed module of loader &gt;org.springframework.boot.devtools.restart.classloader.RestartClassLoader @7193df92)]\r\n\r\n**The code:**\r\n```\r\n@GetMapping(&quot;/replacements/{sourceId}/workers&quot;)\r\n\tpublic ResponseEntity&lt;List&lt;PossibleReplacementResponseModel&gt;&gt; getReplacements(@PathVariable Integer sourceId,\r\n\t\t\t@RequestParam(required = false) Integer targetWorkerId,\r\n\t\t\t@RequestParam(required = false) Integer targetLineId,\r\n\t\t\t@RequestParam(required = false) String targetWorkplaces) {\r\n\r\n\t\tList&lt;PossibleReplacementResponseModel&gt; response = new ArrayList&lt;&gt;();\r\n\r\n\t\t// 400 Bad Request\r\n\t\tif ((targetLineId != null &amp;&amp; targetWorkerId != null) || (targetWorkplaces != null &amp;&amp; targetLineId == null))\r\n\t\t\treturn ResponseEntity.badRequest().build();\r\n\r\n\t\tStoredProcedureQuery ratingProcedure = entityManager.createNamedStoredProcedureQuery(&quot;dcmrating&quot;);\r\n\r\n\t\tStoredProcedureQuery storedProcedure = ratingProcedure.setParameter(&quot;pk_target_worker&quot;, targetWorkerId)\r\n\t\t\t\t.setParameter(&quot;pk_target_sdl&quot;, targetLineId).setParameter(&quot;pk_target_workplaces&quot;, targetWorkplaces)\r\n\t\t\t\t.setParameter(&quot;pk_source_sdl&quot;, sourceId);\r\n\r\n\t\tList&lt;RatingProcedure&gt; ratings = storedProcedure.getResultList();\r\n\t\t\r\n\t\tfor(RatingProcedure rating : ratings) {\r\n\t\t\tPossibleReplacementResponseModel responseModel = new PossibleReplacementResponseModel();\r\n\t\t\tOptional&lt;Worker&gt; _worker = workerRepository.findById(rating.getPersonalId());\r\n\t\t\t\r\n\t\t\tif(_worker.isPresent()) {\r\n\t\t\t\tWorker worker = _worker.get();\r\n\t\t\t\tresponseModel.setId(worker.getId());\r\n\t\t\t\tresponseModel.setName(worker.getFullName());\r\n\t\t\t\tresponseModel.setSkills(findWorkersSkills(worker));\r\n\t\t\t\tresponseModel.setPhysicalExamination(findWorkersMedicalExaminationEndDate(worker));\r\n\t\t\t\tresponseModel.setExams(findWorkersExams(worker));\r\n\t\t\t\tresponseModel.setRestrictions(findWorkersRestrictions(worker));\r\n\t\t\t\tresponseModel.setRating(rating.getRating());\r\n\t\t\t}\r\n\t\t\tresponse.add(responseModel);\r\n\t\t}\r\n\t\t\r\n\t\treturn ResponseEntity.ok(response);\r\n\t}\r\n```\r\n\r\nI probably even have an idea about the solution! I probably should customize my Restart Classloader as seen in [here](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-customizing-classload), but there my skills end and I have no idea what I should specify in the file. \r\n\r\nAny ideas?\r\n\r\nThank you a lot.","title":"Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader","body":"<p>I am quite new to Spring and Java as a whole and I am currently working on an API. I've got this code which accesses MSSQL database, retrieves the results and IS SUPPOSED TO visualize it, but it doesn't work. I mean, if I would only call the procedure and visualize the result set, it would work normally. The problem is that I can't work with the \"RatingProcedure\" object. When I try get some object's value, it shows me following <strong>error</strong>: </p>\n\n<blockquote>\n  <p>Hibernate: \n      {call dis_entity.spdcmpracovnici(?,?,?,?)}\n  2019-09-02 01:56:01.355  WARN 8720 --- [nio-8050-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [java.lang.ClassCastException: class [Ljava.lang.Object; cannot be cast to class com.pproi.dcm.ratingprocedure.RatingProcedure ([Ljava.lang.Object; is in module java.base of loader 'bootstrap'; >com.pproi.dcm.ratingprocedure.RatingProcedure is in unnamed module of loader >org.springframework.boot.devtools.restart.classloader.RestartClassLoader @7193df92)]</p>\n</blockquote>\n\n<p><strong>The code:</strong></p>\n\n<pre><code>@GetMapping(\"/replacements/{sourceId}/workers\")\n    public ResponseEntity&lt;List&lt;PossibleReplacementResponseModel&gt;&gt; getReplacements(@PathVariable Integer sourceId,\n            @RequestParam(required = false) Integer targetWorkerId,\n            @RequestParam(required = false) Integer targetLineId,\n            @RequestParam(required = false) String targetWorkplaces) {\n\n        List&lt;PossibleReplacementResponseModel&gt; response = new ArrayList&lt;&gt;();\n\n        // 400 Bad Request\n        if ((targetLineId != null &amp;&amp; targetWorkerId != null) || (targetWorkplaces != null &amp;&amp; targetLineId == null))\n            return ResponseEntity.badRequest().build();\n\n        StoredProcedureQuery ratingProcedure = entityManager.createNamedStoredProcedureQuery(\"dcmrating\");\n\n        StoredProcedureQuery storedProcedure = ratingProcedure.setParameter(\"pk_target_worker\", targetWorkerId)\n                .setParameter(\"pk_target_sdl\", targetLineId).setParameter(\"pk_target_workplaces\", targetWorkplaces)\n                .setParameter(\"pk_source_sdl\", sourceId);\n\n        List&lt;RatingProcedure&gt; ratings = storedProcedure.getResultList();\n\n        for(RatingProcedure rating : ratings) {\n            PossibleReplacementResponseModel responseModel = new PossibleReplacementResponseModel();\n            Optional&lt;Worker&gt; _worker = workerRepository.findById(rating.getPersonalId());\n\n            if(_worker.isPresent()) {\n                Worker worker = _worker.get();\n                responseModel.setId(worker.getId());\n                responseModel.setName(worker.getFullName());\n                responseModel.setSkills(findWorkersSkills(worker));\n                responseModel.setPhysicalExamination(findWorkersMedicalExaminationEndDate(worker));\n                responseModel.setExams(findWorkersExams(worker));\n                responseModel.setRestrictions(findWorkersRestrictions(worker));\n                responseModel.setRating(rating.getRating());\n            }\n            response.add(responseModel);\n        }\n\n        return ResponseEntity.ok(response);\n    }\n</code></pre>\n\n<p>I probably even have an idea about the solution! I probably should customize my Restart Classloader as seen in <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-customizing-classload\" rel=\"noreferrer\">here</a>, but there my skills end and I have no idea what I should specify in the file. </p>\n\n<p>Any ideas?</p>\n\n<p>Thank you a lot.</p>\n"},{"tags":["java","spring","inversion-of-control","ioc-container"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1696161955,"post_id":77210228,"comment_id":136115548,"body_markdown":"The beans in your config are called player and student, not A and B.","body":"The beans in your config are called player and student, not A and B."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1696162104,"post_id":77210228,"comment_id":136115559,"body_markdown":"The parent attribute means that the child configuration inherits the configuration data from the parent configuration. It doesn&#39;t mean that a parent bean is actually created.","body":"The parent attribute means that the child configuration inherits the configuration data from the parent configuration. It doesn&#39;t mean that a parent bean is actually created."}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696168715,"creation_date":1696168166,"answer_id":77210740,"question_id":77210228,"body_markdown":"According to [this][1] :\r\n\r\n&gt; A child bean definition inherits scope, constructor argument values,\r\n&gt; property values, and method overrides from the parent, with the option\r\n&gt; to add new values. **Any scope, initialization method, destroy method,\r\n&gt; or static factory method settings that you specify override the\r\n&gt; corresponding parent settings.**\r\n\r\nSo first of all , it only make sense to configure the `init-method` of the child bean if its `init-method` is different from the parent bean.  If both child and parent beans has the same `init-method` , it is not necessary to configure the `init-method` on the child bean.\r\n\r\nSecond, whether the initialisation method will execute its parent initialisation method or not is its implementation details which from the bean definition point of view , it does not care about it. It only care you tell it what is the initialisation method such that it will simply execute it after it creates a bean instance and that &#39;s it.\r\n\r\nSo if you want `Player` &#39;s initialisation method to execute its parent &#39;s init. method , you can implement it as : \r\n\r\n``` java\r\npublic class Player extends Student{\r\n\r\n   \r\n  void init(){\r\n     super.init();\r\n     //do other player initialisation codes here..\r\n  }\r\n\r\n}\r\n``` \r\n\r\nOtherwise , you can implement it as :\r\n\r\n``` java\r\npublic class Player extends Student{\r\n\r\n   \r\n  void init(){\r\n     //do player initialisation codes here..\r\n  }\r\n\r\n}\r\n``` \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/core/beans/child-bean-definitions.html#page-title","title":"Question of lifycycle callbacks of beans in Spring","body":"<p>According to <a href=\"https://docs.spring.io/spring-framework/reference/core/beans/child-bean-definitions.html#page-title\" rel=\"nofollow noreferrer\">this</a> :</p>\n<blockquote>\n<p>A child bean definition inherits scope, constructor argument values,\nproperty values, and method overrides from the parent, with the option\nto add new values. <strong>Any scope, initialization method, destroy method,\nor static factory method settings that you specify override the\ncorresponding parent settings.</strong></p>\n</blockquote>\n<p>So first of all , it only make sense to configure the <code>init-method</code> of the child bean if its <code>init-method</code> is different from the parent bean.  If both child and parent beans has the same <code>init-method</code> , it is not necessary to configure the <code>init-method</code> on the child bean.</p>\n<p>Second, whether the initialisation method will execute its parent initialisation method or not is its implementation details which from the bean definition point of view , it does not care about it. It only care you tell it what is the initialisation method such that it will simply execute it after it creates a bean instance and that 's it.</p>\n<p>So if you want <code>Player</code> 's initialisation method to execute its parent 's init. method , you can implement it as :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Player extends Student{\n\n   \n  void init(){\n     super.init();\n     //do other player initialisation codes here..\n  }\n\n}\n</code></pre>\n<p>Otherwise , you can implement it as :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Player extends Student{\n\n   \n  void init(){\n     //do player initialisation codes here..\n  }\n\n}\n</code></pre>\n"}],"owner":{"account_id":28898608,"reputation":1,"user_id":22134084,"display_name":"Ford Chen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696168715,"creation_date":1696158867,"question_id":77210228,"body_markdown":"Spring documentation describes that beans managed by Ioc container are implicitly pre-instantiated by default other than specifying them as being lazy-initialized. I define a child bean definition A which inherits the configuration data from its parent bean definition B. Both of them have an &lt;init-method&gt; attribute specified on the &lt;bean&gt; element. Then I retrieved an instance of bean A through the Ioc container and I found the Ioc container just called the bean A initialization method. Why the Ioc container didn&#39;t call the initialization method of bean B which was instantiated at startup? \r\n```\r\n&lt;bean id=&quot;student&quot; class=&quot;com.ford.spring.pojo.Student&quot; lazy-init=&quot;true&quot; init-method=&quot;init&quot;&gt;\r\n        &lt;property name=&quot;age&quot; value=&quot;20&quot;/&gt;\r\n        &lt;property name=&quot;gender&quot; value=&quot;male&quot;/&gt;\r\n        &lt;property name=&quot;name&quot; value=&quot;porro&quot;/&gt;\r\n        &lt;property name=&quot;id&quot; value=&quot;1&quot;/&gt;\r\n&lt;/bean&gt;\r\n&lt;bean id=&quot;player&quot;\r\n          class=&quot;com.ford.spring.pojo.Player&quot;\r\n          parent=&quot;student&quot; init-method=&quot;init&quot; destroy-method=&quot;destroy&quot;&gt;\r\n        &lt;property name=&quot;nationality&quot; value=&quot;Italy&quot;/&gt;\r\n&lt;/bean&gt;\r\n```\r\n\r\n```\r\nConfigurableApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;config-metadata.xml&quot;);\r\nPlayer player = (Player) applicationContext.getBean(&quot;player&quot;);\r\napplicationContext.close();\r\nSystem.out.println(player);\r\n```\r\n\r\n\r\n\r\nWhy the Ioc container didn&#39;t call the initialization method of bean B which was instantiated at startup? ","title":"Question of lifycycle callbacks of beans in Spring","body":"<p>Spring documentation describes that beans managed by Ioc container are implicitly pre-instantiated by default other than specifying them as being lazy-initialized. I define a child bean definition A which inherits the configuration data from its parent bean definition B. Both of them have an  attribute specified on the  element. Then I retrieved an instance of bean A through the Ioc container and I found the Ioc container just called the bean A initialization method. Why the Ioc container didn't call the initialization method of bean B which was instantiated at startup?</p>\n<pre><code>&lt;bean id=&quot;student&quot; class=&quot;com.ford.spring.pojo.Student&quot; lazy-init=&quot;true&quot; init-method=&quot;init&quot;&gt;\n        &lt;property name=&quot;age&quot; value=&quot;20&quot;/&gt;\n        &lt;property name=&quot;gender&quot; value=&quot;male&quot;/&gt;\n        &lt;property name=&quot;name&quot; value=&quot;porro&quot;/&gt;\n        &lt;property name=&quot;id&quot; value=&quot;1&quot;/&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;player&quot;\n          class=&quot;com.ford.spring.pojo.Player&quot;\n          parent=&quot;student&quot; init-method=&quot;init&quot; destroy-method=&quot;destroy&quot;&gt;\n        &lt;property name=&quot;nationality&quot; value=&quot;Italy&quot;/&gt;\n&lt;/bean&gt;\n</code></pre>\n<pre><code>ConfigurableApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;config-metadata.xml&quot;);\nPlayer player = (Player) applicationContext.getBean(&quot;player&quot;);\napplicationContext.close();\nSystem.out.println(player);\n</code></pre>\n<p>Why the Ioc container didn't call the initialization method of bean B which was instantiated at startup?</p>\n"},{"tags":["java","collections","hashmap","hashtable"],"comments":[{"owner":{"account_id":2848635,"reputation":129,"user_id":2446305,"display_name":"MissFiona"},"score":43,"creation_date":1491775819,"post_id":40471,"comment_id":89607770,"body_markdown":"HashTable is obsolete in Java 1.7 and it is recommended to use ConcurrentMap implementation","body":"HashTable is obsolete in Java 1.7 and it is recommended to use ConcurrentMap implementation"},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":9,"creation_date":1577581873,"post_id":40471,"comment_id":105203863,"body_markdown":"@MissFiona No, [`ConcurrentMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html) is *not* necessary here, as the Question says “non-threaded applications” meaning threading/concurrency is not an issue.","body":"@MissFiona No, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\" rel=\"nofollow noreferrer\"><code>ConcurrentMap</code></a> is <i>not</i> necessary here, as the Question says “non-threaded applications” meaning threading/concurrency is not an issue."},{"owner":{"account_id":12883313,"reputation":431,"user_id":9317690,"display_name":"alife"},"score":8,"creation_date":1645982769,"post_id":40471,"comment_id":126006792,"body_markdown":"@BasilBourque, Yes, but I believe what MissFiona meant by that was something akin to _&quot;`HashTable` has traditionally been only chosen because of its partial threading protection.  But that&#39;s been obviated by `ConcurrentHashMap`, so it&#39;s generally regarded as retired.  It&#39;s generally recommended to choose between `HashMap` or `ConcurrentHashMap`.&quot;_  And I believe that to be a sensible comment, if it&#39;s what she meant.","body":"@BasilBourque, Yes, but I believe what MissFiona meant by that was something akin to <i>&quot;<code>HashTable</code> has traditionally been only chosen because of its partial threading protection.  But that&#39;s been obviated by <code>ConcurrentHashMap</code>, so it&#39;s generally regarded as retired.  It&#39;s generally recommended to choose between <code>HashMap</code> or <code>ConcurrentHashMap</code>.&quot;</i>  And I believe that to be a sensible comment, if it&#39;s what she meant."},{"owner":{"account_id":6333754,"reputation":2065,"user_id":4917881,"display_name":"aventurin"},"score":1,"creation_date":1656531396,"post_id":40471,"comment_id":128598700,"body_markdown":"According to https://doi.org/10.48550/arXiv.1602.00984 Hashtable is more efficient than HashMap in terms of both energy consumption and execution time.","body":"According to <a href=\"https://doi.org/10.48550/arXiv.1602.00984\" rel=\"nofollow noreferrer\">doi.org/10.48550/arXiv.1602.00984</a> Hashtable is more efficient than HashMap in terms of both energy consumption and execution time."},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683972841,"post_id":40471,"comment_id":134450752,"body_markdown":"@aventurin I wonder if that is still the case now biased locking is disabled since Java 15.","body":"@aventurin I wonder if that is still the case now biased locking is disabled since Java 15."}],"answers":[{"tags":[],"owner":{"account_id":3006,"reputation":36853,"user_id":4257,"accept_rate":81,"display_name":"pkaeding"},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1220386493,"creation_date":1220386493,"answer_id":40483,"question_id":40471,"body_markdown":"Based on the info [here][1], I&#39;d recommend going with HashMap.  I think the biggest advantage is that Java will prevent you from modifying it while you are iterating over it, unless you do it through the iterator.\r\n\r\n\r\n  [1]: http://www.jguru.com/faq/view.jsp?EID=430247","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>Based on the info <a href=\"http://www.jguru.com/faq/view.jsp?EID=430247\" rel=\"noreferrer\">here</a>, I'd recommend going with HashMap.  I think the biggest advantage is that Java will prevent you from modifying it while you are iterating over it, unless you do it through the iterator.</p>\n"},{"tags":[],"owner":{"account_id":746,"reputation":50421,"user_id":974,"accept_rate":82,"display_name":"izb"},"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1600201723,"creation_date":1220386954,"answer_id":40512,"question_id":40471,"body_markdown":"`Hashtable` is synchronized, whereas `HashMap` isn&#39;t. That makes `Hashtable` slower than `Hashmap`.\r\n\r\nFor single thread applications, use `HashMap` since they are otherwise the same in terms of functionality.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><code>Hashtable</code> is synchronized, whereas <code>HashMap</code> isn't. That makes <code>Hashtable</code> slower than <code>Hashmap</code>.</p>\n<p>For single thread applications, use <code>HashMap</code> since they are otherwise the same in terms of functionality.</p>\n"},{"tags":[],"owner":{"account_id":2772,"reputation":7970,"user_id":3898,"accept_rate":86,"display_name":"Miles D"},"down_vote_count":0,"up_vote_count":59,"is_accepted":false,"score":59,"last_activity_date":1425286523,"creation_date":1220387130,"answer_id":40522,"question_id":40471,"body_markdown":"`Hashtable` is similar to the `HashMap` and has a similar interface. It is recommended that you use `HashMap`, unless you require support for legacy applications or you need synchronisation, as the `Hashtables` methods are synchronised. So in your case as you are not multi-threading, `HashMaps` are your best bet.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><code>Hashtable</code> is similar to the <code>HashMap</code> and has a similar interface. It is recommended that you use <code>HashMap</code>, unless you require support for legacy applications or you need synchronisation, as the <code>Hashtables</code> methods are synchronised. So in your case as you are not multi-threading, <code>HashMaps</code> are your best bet.</p>\n"},{"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"down_vote_count":1,"up_vote_count":77,"is_accepted":false,"score":76,"last_activity_date":1220387400,"creation_date":1220387400,"answer_id":40548,"question_id":40471,"body_markdown":"In addition to what izb said, `HashMap` allows null values, whereas the `Hashtable` does not.\r\n\r\nAlso note that `Hashtable` extends the `Dictionary` class, which as the [Javadocs][1] state, is obsolete and has been replaced by the `Map` interface.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.4.2/docs/api/java/util/Dictionary.html","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>In addition to what izb said, <code>HashMap</code> allows null values, whereas the <code>Hashtable</code> does not.</p>\n\n<p>Also note that <code>Hashtable</code> extends the <code>Dictionary</code> class, which as the <a href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/util/Dictionary.html\" rel=\"noreferrer\">Javadocs</a> state, is obsolete and has been replaced by the <code>Map</code> interface.</p>\n"},{"tags":[],"owner":{"account_id":3019,"reputation":7919,"user_id":4276,"display_name":"Tim Howland"},"down_vote_count":4,"up_vote_count":25,"is_accepted":false,"score":21,"last_activity_date":1220395139,"creation_date":1220395139,"answer_id":40848,"question_id":40471,"body_markdown":"For threaded apps, you can often get away with ConcurrentHashMap- depends on your performance requirements.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>For threaded apps, you can often get away with ConcurrentHashMap- depends on your performance requirements.</p>\n"},{"tags":[],"owner":{"account_id":1518,"reputation":52575,"user_id":2030,"accept_rate":91,"display_name":"Josh Brown"},"down_vote_count":2,"up_vote_count":4227,"is_accepted":true,"score":4225,"last_activity_date":1675776375,"creation_date":1220396557,"answer_id":40878,"question_id":40471,"body_markdown":"There are several differences between [`HashMap`][1] and [`Hashtable`][2] in Java:\r\n\r\n 1. `Hashtable` is [synchronized][3], whereas `HashMap` is not. This makes `HashMap` better for non-threaded applications, as unsynchronized Objects typically perform better than synchronized ones.\r\n\r\n 2. `Hashtable` does not allow `null` keys or values.  `HashMap` allows one `null` key and any number of `null` values.\r\n\r\n 3. One of HashMap&#39;s subclasses is [`LinkedHashMap`][4], so in the event that you&#39;d want predictable iteration order (which is insertion order by default), you could easily swap out the `HashMap` for a `LinkedHashMap`.  This wouldn&#39;t be as easy if you were using `Hashtable`.\r\n\r\nSince synchronization is not an issue for you, I&#39;d recommend `HashMap`. If synchronization becomes an issue, you may also look at [`ConcurrentHashMap`][5].\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HashMap.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Hashtable.html\r\n  [3]: https://stackoverflow.com/questions/1085709/what-does-synchronized-mean\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/LinkedHashMap.html\r\n  [5]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>There are several differences between <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/HashMap.html\" rel=\"noreferrer\"><code>HashMap</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Hashtable.html\" rel=\"noreferrer\"><code>Hashtable</code></a> in Java:</p>\n<ol>\n<li><p><code>Hashtable</code> is <a href=\"https://stackoverflow.com/questions/1085709/what-does-synchronized-mean\">synchronized</a>, whereas <code>HashMap</code> is not. This makes <code>HashMap</code> better for non-threaded applications, as unsynchronized Objects typically perform better than synchronized ones.</p>\n</li>\n<li><p><code>Hashtable</code> does not allow <code>null</code> keys or values.  <code>HashMap</code> allows one <code>null</code> key and any number of <code>null</code> values.</p>\n</li>\n<li><p>One of HashMap's subclasses is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/LinkedHashMap.html\" rel=\"noreferrer\"><code>LinkedHashMap</code></a>, so in the event that you'd want predictable iteration order (which is insertion order by default), you could easily swap out the <code>HashMap</code> for a <code>LinkedHashMap</code>.  This wouldn't be as easy if you were using <code>Hashtable</code>.</p>\n</li>\n</ol>\n<p>Since synchronization is not an issue for you, I'd recommend <code>HashMap</code>. If synchronization becomes an issue, you may also look at <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html\" rel=\"noreferrer\"><code>ConcurrentHashMap</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":2466,"reputation":34852,"user_id":3434,"accept_rate":90,"display_name":"Apocalisp"},"down_vote_count":1,"up_vote_count":156,"is_accepted":false,"score":155,"last_activity_date":1512423074,"creation_date":1220397251,"answer_id":40894,"question_id":40471,"body_markdown":"`HashMap`: An implementation of the `Map` interface that uses hash codes to index an array.\r\n`Hashtable`: Hi, 1998 called. They want their collections API back.\r\n\r\nSeriously though, you&#39;re better off staying away from `Hashtable` altogether. For single-threaded apps, you don&#39;t need the extra overhead of synchronisation. For highly concurrent apps, the paranoid synchronisation might lead to starvation, deadlocks, or unnecessary garbage collection pauses. Like Tim Howland pointed out, you might use `ConcurrentHashMap` instead.\r\n","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><code>HashMap</code>: An implementation of the <code>Map</code> interface that uses hash codes to index an array.\n<code>Hashtable</code>: Hi, 1998 called. They want their collections API back.</p>\n\n<p>Seriously though, you're better off staying away from <code>Hashtable</code> altogether. For single-threaded apps, you don't need the extra overhead of synchronisation. For highly concurrent apps, the paranoid synchronisation might lead to starvation, deadlocks, or unnecessary garbage collection pauses. Like Tim Howland pointed out, you might use <code>ConcurrentHashMap</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":1387,"reputation":32183,"user_id":1853,"accept_rate":94,"display_name":"serg10"},"down_vote_count":0,"up_vote_count":793,"is_accepted":false,"score":793,"last_activity_date":1621077750,"creation_date":1220439641,"answer_id":41454,"question_id":40471,"body_markdown":"Note, that a lot of the answers state that Hashtable is synchronized.  **In practice this buys you very little.**  The synchronization is on the accessor/mutator methods will stop two threads adding or removing from the map concurrently, but in the real world, you will often need additional synchronization.\r\n\r\nA very common idiom is to &quot;check then put&quot; — i.e. look for an entry in the `Map`, and add it if it does not already exist. This is not in any way an atomic operation whether you use `Hashtable` or `HashMap`.\r\n\r\nAn equivalently synchronised `HashMap` can be obtained by:\r\n\r\n    Collections.synchronizedMap(myMap);\r\n\r\nBut to correctly implement this logic you need **additional synchronisation** of the form:\r\n\r\n    synchronized(myMap) {\r\n        if (!myMap.containsKey(&quot;tomato&quot;))\r\n            myMap.put(&quot;tomato&quot;, &quot;red&quot;);\r\n    }\r\n\r\nEven iterating over a `Hashtable`&#39;s entries (or a `HashMap` obtained by `Collections.synchronizedMap`) is not thread-safe unless you also guard the `Map` against being modified through additional synchronization.\r\n\r\nImplementations of the [`ConcurrentMap`][1] interface (for example [`ConcurrentHashMap`][2]) solve some of this by including **thread safe check-then-act semantics** such as:\r\n\r\n    ConcurrentMap.putIfAbsent(key, value);\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>Note, that a lot of the answers state that Hashtable is synchronized.  <strong>In practice this buys you very little.</strong>  The synchronization is on the accessor/mutator methods will stop two threads adding or removing from the map concurrently, but in the real world, you will often need additional synchronization.</p>\n<p>A very common idiom is to &quot;check then put&quot; — i.e. look for an entry in the <code>Map</code>, and add it if it does not already exist. This is not in any way an atomic operation whether you use <code>Hashtable</code> or <code>HashMap</code>.</p>\n<p>An equivalently synchronised <code>HashMap</code> can be obtained by:</p>\n<pre><code>Collections.synchronizedMap(myMap);\n</code></pre>\n<p>But to correctly implement this logic you need <strong>additional synchronisation</strong> of the form:</p>\n<pre><code>synchronized(myMap) {\n    if (!myMap.containsKey(&quot;tomato&quot;))\n        myMap.put(&quot;tomato&quot;, &quot;red&quot;);\n}\n</code></pre>\n<p>Even iterating over a <code>Hashtable</code>'s entries (or a <code>HashMap</code> obtained by <code>Collections.synchronizedMap</code>) is not thread-safe unless you also guard the <code>Map</code> against being modified through additional synchronization.</p>\n<p>Implementations of the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\" rel=\"noreferrer\"><code>ConcurrentMap</code></a> interface (for example <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html\" rel=\"noreferrer\"><code>ConcurrentHashMap</code></a>) solve some of this by including <strong>thread safe check-then-act semantics</strong> such as:</p>\n<pre><code>ConcurrentMap.putIfAbsent(key, value);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":42594,"reputation":12865,"user_id":124111,"accept_rate":98,"display_name":"aberrant80"},"down_vote_count":7,"up_vote_count":437,"is_accepted":false,"score":430,"last_activity_date":1533644284,"creation_date":1245894377,"answer_id":1041798,"question_id":40471,"body_markdown":"`Hashtable` is considered legacy code. There&#39;s nothing about `Hashtable` that can&#39;t be done using `HashMap` or derivations of `HashMap`, so for new code, I don&#39;t see any justification for going back to `Hashtable`.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><code>Hashtable</code> is considered legacy code. There's nothing about <code>Hashtable</code> that can't be done using <code>HashMap</code> or derivations of <code>HashMap</code>, so for new code, I don't see any justification for going back to <code>Hashtable</code>.</p>\n"},{"tags":[],"owner":{"account_id":897210,"reputation":431,"user_id":934204,"display_name":"Neerja"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1684078205,"creation_date":1315464013,"answer_id":7344090,"question_id":40471,"body_markdown":"Another key difference between `Hashtable` and `HashMap` is that the *Iterator* in the HashMap is  fail-fast  while the *enumerator* for the Hashtable is not and throw *ConcurrentModificationException* if any other Thread modifies the map structurally  by adding or removing any element except Iterator&#39;s own remove()  method. But this is not a guaranteed behavior and will be done by JVM on best effort.\r\n\r\nMy source: http://javarevisited.blogspot.com/2010/10/difference-between-hashmap-and.html\r\n","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>Another key difference between <code>Hashtable</code> and <code>HashMap</code> is that the <em>Iterator</em> in the HashMap is  fail-fast  while the <em>enumerator</em> for the Hashtable is not and throw <em>ConcurrentModificationException</em> if any other Thread modifies the map structurally  by adding or removing any element except Iterator's own remove()  method. But this is not a guaranteed behavior and will be done by JVM on best effort.</p>\n<p>My source: <a href=\"http://javarevisited.blogspot.com/2010/10/difference-between-hashmap-and.html\" rel=\"nofollow noreferrer\">http://javarevisited.blogspot.com/2010/10/difference-between-hashmap-and.html</a></p>\n"},{"tags":[],"owner":{"account_id":395843,"reputation":5303,"user_id":759012,"display_name":"sravan"},"down_vote_count":27,"up_vote_count":258,"is_accepted":false,"score":231,"last_activity_date":1621012566,"creation_date":1317710392,"answer_id":7644118,"question_id":40471,"body_markdown":"This question is often asked in interviews to check whether the candidate understands the correct usage of collection classes and is aware of alternative solutions available.\r\n\r\n 1. The `HashMap` class is roughly equivalent to `Hashtable`, except that it is non synchronized and permits nulls. (`HashMap` allows null values as key and value whereas `Hashtable` doesn&#39;t allow `null`s).\r\n 2. `HashMap` does not guarantee that the order of the map will remain constant over time.\r\n 3. `HashMap` is non synchronized whereas `Hashtable` is synchronized.\r\n 4. Iterator in the `HashMap` is fail-safe while the enumerator for the `Hashtable` is not and throw `ConcurrentModificationException` if any other Thread modifies the map structurally by adding or removing any element except `Iterator`&#39;s own `remove()`  method. But this is not a guaranteed behavior and will be done by JVM on best effort.\r\n\r\nNote on Some Important Terms:\r\n\r\n 1. Synchronized means only one thread can modify a hash table at one point in time. Basically, it means that any thread before performing an update on a `Hashtable` will have to acquire a lock on the object while others will wait for the lock to be released.\r\n 2. Fail-safe is relevant within the context of iterators. If an iterator has been created on a collection object and some other thread tries to modify the collection object &quot;structurally&quot;, a concurrent modification exception will be thrown. It is possible for other threads though to invoke the `set` method since it doesn&#39;t modify the collection &quot;structurally&quot;. However, if prior to calling `set`, the collection has been modified structurally, `IllegalArgumentException` will be thrown.\r\n 3. Structurally modification means deleting or inserting element which could effectively change the structure of the map.\r\n\r\n`HashMap` can be synchronized by\r\n\r\n`Map m = Collections.synchronizeMap(hashMap);`\r\n\r\n\r\n Map provides Collection views instead of direct support for iteration via Enumeration objects. Collection views greatly enhance the expressiveness of the interface, as discussed later in this section. Map allows you to iterate over keys, values, or key-value pairs; `Hashtable` does not provide the third option. Map provides a safe way to remove entries in the midst of iteration; `Hashtable` did not. Finally, Map fixes a minor deficiency in the `Hashtable` interface. `Hashtable` has a method called contains, which returns true if the `Hashtable` contains a given value. Given its name, you&#39;d expect this method to return true if the `Hashtable` contained a given key because the key is the primary access mechanism for a `Hashtable`. The Map interface eliminates this source of confusion by renaming the method `containsValue`. Also, this improves the interface&#39;s consistency — `containsValue` parallels `containsKey`.\r\n\r\n&gt; [The Map Interface][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>This question is often asked in interviews to check whether the candidate understands the correct usage of collection classes and is aware of alternative solutions available.</p>\n<ol>\n<li>The <code>HashMap</code> class is roughly equivalent to <code>Hashtable</code>, except that it is non synchronized and permits nulls. (<code>HashMap</code> allows null values as key and value whereas <code>Hashtable</code> doesn't allow <code>null</code>s).</li>\n<li><code>HashMap</code> does not guarantee that the order of the map will remain constant over time.</li>\n<li><code>HashMap</code> is non synchronized whereas <code>Hashtable</code> is synchronized.</li>\n<li>Iterator in the <code>HashMap</code> is fail-safe while the enumerator for the <code>Hashtable</code> is not and throw <code>ConcurrentModificationException</code> if any other Thread modifies the map structurally by adding or removing any element except <code>Iterator</code>'s own <code>remove()</code>  method. But this is not a guaranteed behavior and will be done by JVM on best effort.</li>\n</ol>\n<p>Note on Some Important Terms:</p>\n<ol>\n<li>Synchronized means only one thread can modify a hash table at one point in time. Basically, it means that any thread before performing an update on a <code>Hashtable</code> will have to acquire a lock on the object while others will wait for the lock to be released.</li>\n<li>Fail-safe is relevant within the context of iterators. If an iterator has been created on a collection object and some other thread tries to modify the collection object &quot;structurally&quot;, a concurrent modification exception will be thrown. It is possible for other threads though to invoke the <code>set</code> method since it doesn't modify the collection &quot;structurally&quot;. However, if prior to calling <code>set</code>, the collection has been modified structurally, <code>IllegalArgumentException</code> will be thrown.</li>\n<li>Structurally modification means deleting or inserting element which could effectively change the structure of the map.</li>\n</ol>\n<p><code>HashMap</code> can be synchronized by</p>\n<p><code>Map m = Collections.synchronizeMap(hashMap);</code></p>\n<p>Map provides Collection views instead of direct support for iteration via Enumeration objects. Collection views greatly enhance the expressiveness of the interface, as discussed later in this section. Map allows you to iterate over keys, values, or key-value pairs; <code>Hashtable</code> does not provide the third option. Map provides a safe way to remove entries in the midst of iteration; <code>Hashtable</code> did not. Finally, Map fixes a minor deficiency in the <code>Hashtable</code> interface. <code>Hashtable</code> has a method called contains, which returns true if the <code>Hashtable</code> contains a given value. Given its name, you'd expect this method to return true if the <code>Hashtable</code> contained a given key because the key is the primary access mechanism for a <code>Hashtable</code>. The Map interface eliminates this source of confusion by renaming the method <code>containsValue</code>. Also, this improves the interface's consistency — <code>containsValue</code> parallels <code>containsKey</code>.</p>\n<blockquote>\n<p><a href=\"http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html\" rel=\"noreferrer\">The Map Interface</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":106428,"reputation":2040,"user_id":283519,"accept_rate":75,"display_name":"pwes"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1417335110,"creation_date":1326359836,"answer_id":8832544,"question_id":40471,"body_markdown":"Beside all the other important aspects already mentioned here, Collections API (e.g. Map interface) is being modified all the time to conform to the &quot;latest and greatest&quot; additions to Java spec.\r\n\r\nFor example, compare Java 5 Map iterating:\r\n\r\n    for (Elem elem : map.keys()) {\r\n      elem.doSth();\r\n    }\r\n\r\nversus the old Hashtable approach:\r\n\r\n    for (Enumeration en = htable.keys(); en.hasMoreElements(); ) {\r\n      Elem elem = (Elem) en.nextElement();\r\n      elem.doSth();\r\n    }\r\n\r\nIn Java 1.8 we are also promised to be able to construct and access HashMaps like in good old scripting languages:\r\n\r\n    Map&lt;String,Integer&gt; map = { &quot;orange&quot; : 12, &quot;apples&quot; : 15 };\r\n    map[&quot;apples&quot;];\r\n\r\n**Update:** No, they won&#39;t land in 1.8... :(\r\n\r\nhttps://stackoverflow.com/questions/13692213/are-project-coins-collection-enhancements-going-to-be-in-jdk8","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>Beside all the other important aspects already mentioned here, Collections API (e.g. Map interface) is being modified all the time to conform to the \"latest and greatest\" additions to Java spec.</p>\n\n<p>For example, compare Java 5 Map iterating:</p>\n\n<pre><code>for (Elem elem : map.keys()) {\n  elem.doSth();\n}\n</code></pre>\n\n<p>versus the old Hashtable approach:</p>\n\n<pre><code>for (Enumeration en = htable.keys(); en.hasMoreElements(); ) {\n  Elem elem = (Elem) en.nextElement();\n  elem.doSth();\n}\n</code></pre>\n\n<p>In Java 1.8 we are also promised to be able to construct and access HashMaps like in good old scripting languages:</p>\n\n<pre><code>Map&lt;String,Integer&gt; map = { \"orange\" : 12, \"apples\" : 15 };\nmap[\"apples\"];\n</code></pre>\n\n<p><strong>Update:</strong> No, they won't land in 1.8... :(</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13692213/are-project-coins-collection-enhancements-going-to-be-in-jdk8\">Are Project Coin&#39;s collection enhancements going to be in JDK8?</a></p>\n"},{"tags":[],"owner":{"account_id":1161303,"reputation":19991,"user_id":1140748,"accept_rate":93,"display_name":"alain.janinm"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1335707866,"creation_date":1335707866,"answer_id":10372667,"question_id":40471,"body_markdown":"- [HashTable][1] is synchronized, if you are using it in a single thread you can use [HashMap][2], which is an unsynchronized version. Unsynchronized objects are often a little more performant. By the way if multiple threads access a HashMap concurrently, and at least one of the threads modifies the map structurally, it must be synchronized externally. \r\nYoun can wrap a unsynchronized map in a synchronized one using :\r\n\r\n        Map m = Collections.synchronizedMap(new HashMap(...));\r\n\r\n- HashTable can only contain non-null object as a key or as a value. HashMap can contain one null key and null values.\r\n\r\n- The iterators returned by Map are fail-fast, if the map is structurally modified at any time after the iterator is created, in any way except through the iterator&#39;s own remove method, the iterator will throw a `ConcurrentModificationException`. Thus, in the face of concurrent modification, the iterator fails quickly and cleanly, rather than risking arbitrary, non-deterministic behavior at an undetermined time in the future. **Whereas** the Enumerations returned by Hashtable&#39;s keys and elements methods are not fail-fast. \r\n\r\n- HashTable and HashMap are member of the [Java Collections Framework][3] (since Java 2 platform v1.2, HashTable was retrofitted to implement the Map interface).\r\n\r\n- HashTable is considered legacy code, the documentation advise to use [ConcurrentHashMap][4] in place of Hashtable if a thread-safe highly-concurrent implementation is desired.\r\n\r\n- HashMap doesn&#39;t guarantee the order in which elements are returned. For HashTable I guess it&#39;s the same but I&#39;m not entirely sure, I don&#39;t find ressource that clearly state that.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/technotes/guides/collections/index.html\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<ul>\n<li><p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\" rel=\"noreferrer\">HashTable</a> is synchronized, if you are using it in a single thread you can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html\" rel=\"noreferrer\">HashMap</a>, which is an unsynchronized version. Unsynchronized objects are often a little more performant. By the way if multiple threads access a HashMap concurrently, and at least one of the threads modifies the map structurally, it must be synchronized externally. \nYoun can wrap a unsynchronized map in a synchronized one using :</p>\n\n<pre><code>Map m = Collections.synchronizedMap(new HashMap(...));\n</code></pre></li>\n<li><p>HashTable can only contain non-null object as a key or as a value. HashMap can contain one null key and null values.</p></li>\n<li><p>The iterators returned by Map are fail-fast, if the map is structurally modified at any time after the iterator is created, in any way except through the iterator's own remove method, the iterator will throw a <code>ConcurrentModificationException</code>. Thus, in the face of concurrent modification, the iterator fails quickly and cleanly, rather than risking arbitrary, non-deterministic behavior at an undetermined time in the future. <strong>Whereas</strong> the Enumerations returned by Hashtable's keys and elements methods are not fail-fast. </p></li>\n<li><p>HashTable and HashMap are member of the <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/collections/index.html\" rel=\"noreferrer\">Java Collections Framework</a> (since Java 2 platform v1.2, HashTable was retrofitted to implement the Map interface).</p></li>\n<li><p>HashTable is considered legacy code, the documentation advise to use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"noreferrer\">ConcurrentHashMap</a> in place of Hashtable if a thread-safe highly-concurrent implementation is desired.</p></li>\n<li><p>HashMap doesn't guarantee the order in which elements are returned. For HashTable I guess it's the same but I'm not entirely sure, I don't find ressource that clearly state that.</p></li>\n</ul>\n"},{"tags":[],"owner":{"display_name":"user1506047"},"down_vote_count":6,"up_vote_count":9,"is_accepted":false,"score":3,"last_activity_date":1344515325,"creation_date":1344515325,"answer_id":11883473,"question_id":40471,"body_markdown":"HashMaps gives you freedom of synchronization and debugging is lot more easier","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>HashMaps gives you freedom of synchronization and debugging is lot more easier</p>\n"},{"tags":[],"owner":{"account_id":433589,"reputation":1552,"user_id":819014,"accept_rate":69,"display_name":"Sujan"},"down_vote_count":1,"up_vote_count":81,"is_accepted":false,"score":80,"last_activity_date":1574444099,"creation_date":1353389753,"answer_id":13467173,"question_id":40471,"body_markdown":"Take a look at this chart. It provides comparisons between different data structures along with `HashMap` and `Hashtable`. The comparison is precise, clear and easy to understand.\r\n\r\n[Java Collection Matrix][1]\r\n\r\n\r\n  [1]: https://docs.google.com/spreadsheet/pub?key=0Aq3e8BiuZY2wdFpHSlV0QzVmV1lUNHJidGd2b0Zrb3c&amp;single=true&amp;gid=0&amp;output=pdf","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>Take a look at this chart. It provides comparisons between different data structures along with <code>HashMap</code> and <code>Hashtable</code>. The comparison is precise, clear and easy to understand.</p>\n\n<p><a href=\"https://docs.google.com/spreadsheet/pub?key=0Aq3e8BiuZY2wdFpHSlV0QzVmV1lUNHJidGd2b0Zrb3c&amp;single=true&amp;gid=0&amp;output=pdf\" rel=\"noreferrer\">Java Collection Matrix</a></p>\n"},{"tags":[],"owner":{"account_id":1163881,"reputation":13899,"user_id":1142881,"accept_rate":99,"display_name":"SkyWalker"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1390552504,"creation_date":1355129834,"answer_id":13797704,"question_id":40471,"body_markdown":"`HashMap` and `Hashtable` have significant algorithmic differences as well. No one has mentioned this before so that&#39;s why I am bringing it up. `HashMap` will construct a hash table with power of two size, increase it dynamically such that you have at most about eight elements (collisions) in any bucket and will stir the elements very well for general element types. However, the `Hashtable` implementation provides better and finer control over the hashing if you know what you are doing, namely you can fix the table size using e.g. the closest prime number to your values domain size and this will result in better performance than HashMap i.e. less collisions for some cases.\r\n\r\nSeparate from the obvious differences discussed extensively in this question, I see the Hashtable as a &quot;manual drive&quot; car where you have better control over the hashing and the HashMap as the &quot;automatic drive&quot; counterpart that will generally perform well.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><code>HashMap</code> and <code>Hashtable</code> have significant algorithmic differences as well. No one has mentioned this before so that's why I am bringing it up. <code>HashMap</code> will construct a hash table with power of two size, increase it dynamically such that you have at most about eight elements (collisions) in any bucket and will stir the elements very well for general element types. However, the <code>Hashtable</code> implementation provides better and finer control over the hashing if you know what you are doing, namely you can fix the table size using e.g. the closest prime number to your values domain size and this will result in better performance than HashMap i.e. less collisions for some cases.</p>\n\n<p>Separate from the obvious differences discussed extensively in this question, I see the Hashtable as a \"manual drive\" car where you have better control over the hashing and the HashMap as the \"automatic drive\" counterpart that will generally perform well.</p>\n"},{"tags":[],"owner":{"account_id":1235727,"reputation":2403,"user_id":1199342,"display_name":"raja"},"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1565982524,"creation_date":1358832679,"answer_id":14452144,"question_id":40471,"body_markdown":" 1. `Hashtable` is synchronized whereas `HashMap` is not.\r\n 2. Another difference is that iterator in the `HashMap` is fail-safe\r\n    while the enumerator for the `Hashtable` isn&#39;t. If you change the map\r\n    while iterating, you&#39;ll know.\r\n 3. `HashMap` permits null values in it, while `Hashtable` doesn&#39;t.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<ol>\n<li><code>Hashtable</code> is synchronized whereas <code>HashMap</code> is not.</li>\n<li>Another difference is that iterator in the <code>HashMap</code> is fail-safe\nwhile the enumerator for the <code>Hashtable</code> isn't. If you change the map\nwhile iterating, you'll know.</li>\n<li><code>HashMap</code> permits null values in it, while <code>Hashtable</code> doesn't.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1240815,"reputation":255,"user_id":1203455,"display_name":"Ankit"},"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1545962718,"creation_date":1359639665,"answer_id":14627155,"question_id":40471,"body_markdown":"HashMap: It is a class available inside java.util package and it is used to store the element in key and value format.\r\n\r\nHashtable: It is a legacy class which is being recognized inside collection framework.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>HashMap: It is a class available inside java.util package and it is used to store the element in key and value format.</p>\n\n<p>Hashtable: It is a legacy class which is being recognized inside collection framework.</p>\n"},{"tags":[],"owner":{"account_id":259109,"reputation":2800,"user_id":541755,"accept_rate":71,"display_name":"jontejj"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1366565242,"creation_date":1366037392,"answer_id":16018266,"question_id":40471,"body_markdown":"[HashTable][1] is a legacy class in the jdk that shouldn&#39;t be used anymore. Replace usages of it with [ConcurrentHashMap][2]. If you don&#39;t require thread safety, use [HashMap][3] which isn&#39;t [threadsafe][4] but faster and uses less memory.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html\r\n  [2]: http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html\r\n  [3]: http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\r\n  [4]: http://jsr-305.googlecode.com/svn/trunk/javadoc/javax/annotation/concurrent/ThreadSafe.html","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html\" rel=\"noreferrer\">HashTable</a> is a legacy class in the jdk that shouldn't be used anymore. Replace usages of it with <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"noreferrer\">ConcurrentHashMap</a>. If you don't require thread safety, use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\" rel=\"noreferrer\">HashMap</a> which isn't <a href=\"http://jsr-305.googlecode.com/svn/trunk/javadoc/javax/annotation/concurrent/ThreadSafe.html\" rel=\"noreferrer\">threadsafe</a> but faster and uses less memory.</p>\n"},{"tags":[],"owner":{"account_id":815542,"reputation":514,"user_id":1162526,"display_name":"pong"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1373882050,"creation_date":1373882050,"answer_id":17651399,"question_id":40471,"body_markdown":"`HashMap` is emulated and therefore usable in `GWT client code` whereas `Hashtable` is not.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><code>HashMap</code> is emulated and therefore usable in <code>GWT client code</code> whereas <code>Hashtable</code> is not.</p>\n"},{"tags":[],"owner":{"account_id":2887509,"reputation":473,"user_id":2476998,"accept_rate":17,"display_name":"Ekanta Swain"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1374594626,"creation_date":1374594626,"answer_id":17815037,"question_id":40471,"body_markdown":"HashMap is a class  used to store the element in key and value format.it is not thread safe.\r\nbecause it is not synchronized .where as Hashtable is synchronized.Hashmap permits null but hastable doesn&#39;t permit null.\r\n","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>HashMap is a class  used to store the element in key and value format.it is not thread safe.\nbecause it is not synchronized .where as Hashtable is synchronized.Hashmap permits null but hastable doesn't permit null.</p>\n"},{"tags":[],"owner":{"account_id":2171736,"reputation":4684,"user_id":1923551,"display_name":"user1923551"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1397144678,"creation_date":1386765949,"answer_id":20519518,"question_id":40471,"body_markdown":"There are 5 basic differentiations with HashTable and HashMaps. \r\n\r\n1. Maps allows you to iterate and retrieve keys, values, and both key-value pairs as well, Where HashTable don&#39;t have all this capability. \r\n2. In Hashtable there is a function contains(), which is very confusing to use. Because the meaning of contains is slightly deviating. Whether it means contains key or contains  value? tough to understand. Same thing in Maps we have ContainsKey() and ContainsValue() functions, which are very easy to understand. \r\n3. In hashmap you can remove element while iterating, safely. where as it is not possible in hashtables.\r\n4. HashTables are by default synchronized, so it can be used with multiple threads easily. Where as HashMaps are not synchronized by default, so can be used with only single thread.  But you can still convert HashMap to synchronized by using Collections util class&#39;s synchronizedMap(Map&lt;K,V&gt; m) function.\r\n5. HashTable won&#39;t allow null keys or null values. Where as HashMap allows one null key, and multiple null values.\r\n\r\n","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>There are 5 basic differentiations with HashTable and HashMaps. </p>\n\n<ol>\n<li>Maps allows you to iterate and retrieve keys, values, and both key-value pairs as well, Where HashTable don't have all this capability. </li>\n<li>In Hashtable there is a function contains(), which is very confusing to use. Because the meaning of contains is slightly deviating. Whether it means contains key or contains  value? tough to understand. Same thing in Maps we have ContainsKey() and ContainsValue() functions, which are very easy to understand. </li>\n<li>In hashmap you can remove element while iterating, safely. where as it is not possible in hashtables.</li>\n<li>HashTables are by default synchronized, so it can be used with multiple threads easily. Where as HashMaps are not synchronized by default, so can be used with only single thread.  But you can still convert HashMap to synchronized by using Collections util class's synchronizedMap(Map m) function.</li>\n<li>HashTable won't allow null keys or null values. Where as HashMap allows one null key, and multiple null values.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3556468,"reputation":390,"user_id":2970123,"accept_rate":75,"display_name":"PetarMI"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1545962656,"creation_date":1394204561,"answer_id":22253585,"question_id":40471,"body_markdown":"Since Hashtable in Java is a subclass of Dictionary class which is now obsolete due to the existence of Map Interface, it is not used anymore. Moreover, there isn&#39;t anything you can&#39;t do with a class that implements the Map Interface that you can do with a Hashtable. ","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>Since Hashtable in Java is a subclass of Dictionary class which is now obsolete due to the existence of Map Interface, it is not used anymore. Moreover, there isn't anything you can't do with a class that implements the Map Interface that you can do with a Hashtable. </p>\n"},{"tags":[],"owner":{"account_id":446042,"reputation":12428,"user_id":838841,"accept_rate":100,"display_name":"Shreyos Adikari"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1427039073,"creation_date":1395179216,"answer_id":22491742,"question_id":40471,"body_markdown":"My small contribution :\n\n&gt;1. First and most significant different between `Hashtable` and `HashMap` is that, `HashMap` is not thread-safe  while `Hashtable` is a thread-safe collection.\n&gt;\n&gt;2. Second important difference between `Hashtable` and `HashMap` is performance, since `HashMap` is not synchronized it perform better than `Hashtable`.\n&gt;\n&gt;3. Third difference on `Hashtable` vs `HashMap` is that `Hashtable` is obsolete class and you should be using `ConcurrentHashMap` in place of `Hashtable` in Java.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>My small contribution :</p>\n<blockquote>\n<ol>\n<li><p>First and most significant different between <code>Hashtable</code> and <code>HashMap</code> is that, <code>HashMap</code> is not thread-safe  while <code>Hashtable</code> is a thread-safe collection.</p>\n</li>\n<li><p>Second important difference between <code>Hashtable</code> and <code>HashMap</code> is performance, since <code>HashMap</code> is not synchronized it perform better than <code>Hashtable</code>.</p>\n</li>\n<li><p>Third difference on <code>Hashtable</code> vs <code>HashMap</code> is that <code>Hashtable</code> is obsolete class and you should be using <code>ConcurrentHashMap</code> in place of <code>Hashtable</code> in Java.</p>\n</li>\n</ol>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":40011,"reputation":40045,"user_id":115722,"accept_rate":85,"display_name":"pierrotlefou"},"down_vote_count":0,"up_vote_count":151,"is_accepted":false,"score":151,"last_activity_date":1433310213,"creation_date":1395737881,"answer_id":22629569,"question_id":40471,"body_markdown":"Keep in mind that `HashTable` was legacy class before Java Collections Framework (JCF) was introduced and was later retrofitted to implement the `Map` interface. So was `Vector` and `Stack`. \r\n\r\n**Therefore, always stay away from them in new code since there always better alternative in the JCF** as others had pointed out.\r\n\r\n\r\n\r\nHere is the [Java collection cheat sheet][1] that you will find useful. Notice the gray block contains the legacy class HashTable,Vector and Stack.\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://pierrchen.blogspot.com/2014/03/java-collections-framework-cheat-sheet.html\r\n  [2]: http://i.stack.imgur.com/PyflH.png","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>Keep in mind that <code>HashTable</code> was legacy class before Java Collections Framework (JCF) was introduced and was later retrofitted to implement the <code>Map</code> interface. So was <code>Vector</code> and <code>Stack</code>. </p>\n\n<p><strong>Therefore, always stay away from them in new code since there always better alternative in the JCF</strong> as others had pointed out.</p>\n\n<p>Here is the <a href=\"http://pierrchen.blogspot.com/2014/03/java-collections-framework-cheat-sheet.html\" rel=\"noreferrer\">Java collection cheat sheet</a> that you will find useful. Notice the gray block contains the legacy class HashTable,Vector and Stack.</p>\n\n<p><img src=\"https://i.stack.imgur.com/PyflH.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":3903322,"reputation":1789,"user_id":3230563,"accept_rate":0,"display_name":"JegsVala"},"down_vote_count":5,"up_vote_count":17,"is_accepted":false,"score":12,"last_activity_date":1500994772,"creation_date":1404541677,"answer_id":24583680,"question_id":40471,"body_markdown":"**HashMap and HashTable**    \r\n\r\n - Some important points about HashMap and HashTable.\r\n       please read below details.\r\n\r\n1) Hashtable and Hashmap implement the java.util.Map interface\r\n2) Both Hashmap and Hashtable is the hash based collection. and working on hashing.\r\nso these are similarity of HashMap and HashTable.    \r\n     \r\n\r\n    \r\n\r\n - What is the difference between HashMap and HashTable?\r\n\r\n \r\n \r\n\r\n1) First difference is HashMap is not thread safe While HashTable is ThreadSafe  \r\n2) HashMap is performance wise better because it is not thread safe. while Hashtable performance wise is not better because it is thread safe. so multiple thread can not access Hashtable at the same time.\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n\r\n","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><strong>HashMap and HashTable</strong>    </p>\n\n<ul>\n<li>Some important points about HashMap and HashTable.\n   please read below details.</li>\n</ul>\n\n<p>1) Hashtable and Hashmap implement the java.util.Map interface\n2) Both Hashmap and Hashtable is the hash based collection. and working on hashing.\nso these are similarity of HashMap and HashTable.    </p>\n\n<ul>\n<li>What is the difference between HashMap and HashTable?</li>\n</ul>\n\n<p>1) First difference is HashMap is not thread safe While HashTable is ThreadSafe<br>\n2) HashMap is performance wise better because it is not thread safe. while Hashtable performance wise is not better because it is thread safe. so multiple thread can not access Hashtable at the same time.</p>\n"},{"tags":[],"owner":{"account_id":3128716,"reputation":347,"user_id":2647077,"display_name":"Night0"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1438848290,"creation_date":1408269518,"answer_id":25348157,"question_id":40471,"body_markdown":"Old and classic topic, just want to add this helpful blog that explains this:\r\n\r\n[http://blog.manishchhabra.com/2012/08/the-5-main-differences-betwen-hashmap-and-hashtable/][1]\r\n\r\nBlog by Manish Chhabra\r\n\r\n&gt; The 5 main differences betwen HashMap and Hashtable\r\n&gt; \r\n&gt; HashMap and Hashtable both implement java.util.Map interface but there\r\n&gt; are some differences that Java developers must understand to write\r\n&gt; more efficient code. As of the Java 2 platform v1.2, Hashtable class\r\n&gt; was retrofitted to implement the Map interface, making it a member of\r\n&gt; the Java Collections Framework.\r\n&gt; \r\n&gt; 1. One of the major differences between HashMap and Hashtable is that HashMap is non-synchronized whereas Hashtable is synchronized, which\r\n&gt; means Hashtable is thread-safe and can be shared between multiple\r\n&gt; threads but HashMap cannot be shared between multiple threads without\r\n&gt; proper synchronization. Java 5 introduced ConcurrentHashMap which is\r\n&gt; an alternative of Hashtable and provides better scalability than\r\n&gt; Hashtable in Java.Synchronized means only one thread can modify a hash\r\n&gt; table at one point of time. Basically, it means that any thread before\r\n&gt; performing an update on a hashtable will have to acquire a lock on the\r\n&gt; object while others will wait for lock to be released.\r\n&gt; \r\n&gt; 2. The HashMap class is roughly equivalent to Hashtable, except that it permits nulls. (HashMap allows null values as key and value whereas\r\n&gt; Hashtable doesn’t allow nulls).\r\n&gt; \r\n&gt; 3. The third significant difference between HashMap vs Hashtable is that Iterator in the HashMap is a fail-fast iterator while the\r\n&gt; enumerator for the Hashtable is not and throw\r\n&gt; ConcurrentModificationException if any other Thread modifies the map\r\n&gt; structurally by adding or removing any element except Iterator’s own\r\n&gt; remove() method. But this is not a guaranteed behavior and will be\r\n&gt; done by JVM on best effort. This is also an important difference\r\n&gt; between Enumeration and Iterator in Java.\r\n&gt; \r\n&gt; 4. One more notable difference between Hashtable and HashMap is that because of thread-safety and synchronization Hashtable is much slower\r\n&gt; than HashMap if used in Single threaded environment. So if you don’t\r\n&gt; need synchronization and HashMap is only used by one thread, it out\r\n&gt; perform Hashtable in Java.\r\n&gt; \r\n&gt; 5. HashMap does not guarantee that the order of the map will remain constant over time.\r\n&gt; \r\n&gt; Note that HashMap can be synchronized by\r\n&gt; \r\n&gt;     Map m = Collections.synchronizedMap(hashMap);\r\n&gt; \r\n&gt; In Summary there are significant differences between Hashtable and\r\n&gt; HashMap in Java e.g. thread-safety and speed and based upon that only\r\n&gt; use Hashtable if you absolutely need thread-safety, if you are running\r\n&gt; Java 5 consider using ConcurrentHashMap in Java.\r\n\r\n\r\n  [1]: http://blog.manishchhabra.com/2012/08/the-5-main-differences-betwen-hashmap-and-hashtable/","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>Old and classic topic, just want to add this helpful blog that explains this:</p>\n\n<p><a href=\"http://blog.manishchhabra.com/2012/08/the-5-main-differences-betwen-hashmap-and-hashtable/\" rel=\"noreferrer\">http://blog.manishchhabra.com/2012/08/the-5-main-differences-betwen-hashmap-and-hashtable/</a></p>\n\n<p>Blog by Manish Chhabra</p>\n\n<blockquote>\n  <p>The 5 main differences betwen HashMap and Hashtable</p>\n  \n  <p>HashMap and Hashtable both implement java.util.Map interface but there\n  are some differences that Java developers must understand to write\n  more efficient code. As of the Java 2 platform v1.2, Hashtable class\n  was retrofitted to implement the Map interface, making it a member of\n  the Java Collections Framework.</p>\n  \n  <ol>\n  <li><p>One of the major differences between HashMap and Hashtable is that HashMap is non-synchronized whereas Hashtable is synchronized, which\n  means Hashtable is thread-safe and can be shared between multiple\n  threads but HashMap cannot be shared between multiple threads without\n  proper synchronization. Java 5 introduced ConcurrentHashMap which is\n  an alternative of Hashtable and provides better scalability than\n  Hashtable in Java.Synchronized means only one thread can modify a hash\n  table at one point of time. Basically, it means that any thread before\n  performing an update on a hashtable will have to acquire a lock on the\n  object while others will wait for lock to be released.</p></li>\n  <li><p>The HashMap class is roughly equivalent to Hashtable, except that it permits nulls. (HashMap allows null values as key and value whereas\n  Hashtable doesn’t allow nulls).</p></li>\n  <li><p>The third significant difference between HashMap vs Hashtable is that Iterator in the HashMap is a fail-fast iterator while the\n  enumerator for the Hashtable is not and throw\n  ConcurrentModificationException if any other Thread modifies the map\n  structurally by adding or removing any element except Iterator’s own\n  remove() method. But this is not a guaranteed behavior and will be\n  done by JVM on best effort. This is also an important difference\n  between Enumeration and Iterator in Java.</p></li>\n  <li><p>One more notable difference between Hashtable and HashMap is that because of thread-safety and synchronization Hashtable is much slower\n  than HashMap if used in Single threaded environment. So if you don’t\n  need synchronization and HashMap is only used by one thread, it out\n  perform Hashtable in Java.</p></li>\n  <li><p>HashMap does not guarantee that the order of the map will remain constant over time.</p></li>\n  </ol>\n  \n  <p>Note that HashMap can be synchronized by</p>\n\n<pre><code>Map m = Collections.synchronizedMap(hashMap);\n</code></pre>\n  \n  <p>In Summary there are significant differences between Hashtable and\n  HashMap in Java e.g. thread-safety and speed and based upon that only\n  use Hashtable if you absolutely need thread-safety, if you are running\n  Java 5 consider using ConcurrentHashMap in Java.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4945915,"reputation":545,"user_id":3981269,"accept_rate":31,"display_name":"Rahul Tripathi"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1427039033,"creation_date":1409138981,"answer_id":25526024,"question_id":40471,"body_markdown":"1.`Hashmap` and `HashTable` both store key and value. \r\n\r\n2.`Hashmap` can store one key as `null`. `Hashtable` can&#39;t store `null`.\r\n \r\n3.`HashMap` is not synchronized but `Hashtable` is synchronized. \r\n\r\n4.`HashMap` can be synchronized with `Collection.SyncronizedMap(map)`\r\n\r\n    Map hashmap = new HashMap();\r\n    \r\n    Map map = Collections.SyncronizedMap(hashmap);","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>1.<code>Hashmap</code> and <code>HashTable</code> both store key and value. </p>\n\n<p>2.<code>Hashmap</code> can store one key as <code>null</code>. <code>Hashtable</code> can't store <code>null</code>.</p>\n\n<p>3.<code>HashMap</code> is not synchronized but <code>Hashtable</code> is synchronized. </p>\n\n<p>4.<code>HashMap</code> can be synchronized with <code>Collection.SyncronizedMap(map)</code></p>\n\n<pre><code>Map hashmap = new HashMap();\n\nMap map = Collections.SyncronizedMap(hashmap);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4129207,"reputation":75209,"user_id":3395198,"accept_rate":54,"display_name":"IntelliJ Amiya"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1461663976,"creation_date":1423554271,"answer_id":28426488,"question_id":40471,"body_markdown":"**`Hashtable:`**\r\n\r\n**Hashtable** is a data structure that retains values of key-value pair. It doesn’t allow null for both the keys and the values. You will get a `NullPointerException` if you add null value. It is synchronized. So it comes with its cost. Only one thread can access **HashTable** at a particular time.\r\n\r\n**Example** :\r\n\r\n    import java.util.Map;\r\n    import java.util.Hashtable;\r\n     \r\n    public class TestClass {\r\n     \r\n        public static void main(String args[ ]) {\r\n        Map&lt;Integer,String&gt; states= new Hashtable&lt;Integer,String&gt;();\r\n        states.put(1, &quot;INDIA&quot;);\r\n        states.put(2, &quot;USA&quot;);\r\n         \r\n        states.put(3, null);    //will throw NullPointerEcxeption at runtime\r\n             \r\n        System.out.println(states.get(1));\r\n        System.out.println(states.get(2));\r\n    //  System.out.println(states.get(3));\r\n     \r\n        }\r\n    }\r\n\r\n**HashMap:**\r\n\r\n**HashMap** is like **Hashtable** but it also accepts key value pair. It allows null for both the keys and the values. Its performance better is better than `HashTable`, because it is `unsynchronized`.\r\n\r\n**Example:**\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n     \r\n    public class TestClass {\r\n     \r\n        public static void main(String args[ ]) {\r\n        Map&lt;Integer,String&gt; states = new HashMap&lt;Integer,String&gt;();\r\n        states.put(1, &quot;INDIA&quot;);\r\n        states.put(2, &quot;USA&quot;);\r\n         \r\n        states.put(3, null);    // Okay\r\n        states.put(null,&quot;UK&quot;);\r\n         \r\n        System.out.println(states.get(1));\r\n        System.out.println(states.get(2));\r\n        System.out.println(states.get(3));\r\n     \r\n        }\r\n    }","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><strong><code>Hashtable:</code></strong></p>\n\n<p><strong>Hashtable</strong> is a data structure that retains values of key-value pair. It doesn’t allow null for both the keys and the values. You will get a <code>NullPointerException</code> if you add null value. It is synchronized. So it comes with its cost. Only one thread can access <strong>HashTable</strong> at a particular time.</p>\n\n<p><strong>Example</strong> :</p>\n\n<pre><code>import java.util.Map;\nimport java.util.Hashtable;\n\npublic class TestClass {\n\n    public static void main(String args[ ]) {\n    Map&lt;Integer,String&gt; states= new Hashtable&lt;Integer,String&gt;();\n    states.put(1, \"INDIA\");\n    states.put(2, \"USA\");\n\n    states.put(3, null);    //will throw NullPointerEcxeption at runtime\n\n    System.out.println(states.get(1));\n    System.out.println(states.get(2));\n//  System.out.println(states.get(3));\n\n    }\n}\n</code></pre>\n\n<p><strong>HashMap:</strong></p>\n\n<p><strong>HashMap</strong> is like <strong>Hashtable</strong> but it also accepts key value pair. It allows null for both the keys and the values. Its performance better is better than <code>HashTable</code>, because it is <code>unsynchronized</code>.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class TestClass {\n\n    public static void main(String args[ ]) {\n    Map&lt;Integer,String&gt; states = new HashMap&lt;Integer,String&gt;();\n    states.put(1, \"INDIA\");\n    states.put(2, \"USA\");\n\n    states.put(3, null);    // Okay\n    states.put(null,\"UK\");\n\n    System.out.println(states.get(1));\n    System.out.println(states.get(2));\n    System.out.println(states.get(3));\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4318219,"reputation":537,"user_id":3527383,"accept_rate":43,"display_name":"amitguptageek"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1460263590,"creation_date":1452018942,"answer_id":34618895,"question_id":40471,"body_markdown":"**Synchronization or Thread Safe** :\r\n\r\nHash Map is not synchronized hence it is not thred safe and it cannot be shared between multiple threads without proper synchronized block whereas, Hashtable is synchronized and hence it is thread safe.\r\n\r\n**Null keys and null values** :\r\n\r\nHashMap allows one null key and any number of null values.Hashtable does not allow null keys or values. \r\n\r\n**Iterating the values**:\r\n\r\nIterator in the HashMap is a fail-fast iterator while the enumerator for the Hashtable is not and throw ConcurrentModificationException if any other Thread modifies the map structurally by adding or removing any element except Iterator’s own remove() method.\r\n\r\n**Superclass and Legacy** :\r\n\r\nHashMap is subclass of AbstractMap class whereas Hashtable is subclass of Dictionary class.\r\n\r\n**Performance** :\r\n\r\nAs HashMap is not synchronized it is faster as compared to Hashtable.\r\n\r\nRefer http://modernpathshala.com/Article/1020/difference-between-hashmap-and-hashtable-in-java for examples and interview questions and quiz related to  Java collection","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><strong>Synchronization or Thread Safe</strong> :</p>\n\n<p>Hash Map is not synchronized hence it is not thred safe and it cannot be shared between multiple threads without proper synchronized block whereas, Hashtable is synchronized and hence it is thread safe.</p>\n\n<p><strong>Null keys and null values</strong> :</p>\n\n<p>HashMap allows one null key and any number of null values.Hashtable does not allow null keys or values. </p>\n\n<p><strong>Iterating the values</strong>:</p>\n\n<p>Iterator in the HashMap is a fail-fast iterator while the enumerator for the Hashtable is not and throw ConcurrentModificationException if any other Thread modifies the map structurally by adding or removing any element except Iterator’s own remove() method.</p>\n\n<p><strong>Superclass and Legacy</strong> :</p>\n\n<p>HashMap is subclass of AbstractMap class whereas Hashtable is subclass of Dictionary class.</p>\n\n<p><strong>Performance</strong> :</p>\n\n<p>As HashMap is not synchronized it is faster as compared to Hashtable.</p>\n\n<p>Refer <a href=\"http://modernpathshala.com/Article/1020/difference-between-hashmap-and-hashtable-in-java\" rel=\"nofollow\">http://modernpathshala.com/Article/1020/difference-between-hashmap-and-hashtable-in-java</a> for examples and interview questions and quiz related to  Java collection</p>\n"},{"tags":[],"owner":{"account_id":3997984,"reputation":4081,"user_id":3294902,"display_name":"Kostas Kryptos"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1462374255,"creation_date":1462374255,"answer_id":37031553,"question_id":40471,"body_markdown":"Apart from the differences already mentioned, it should be noted that since Java 8, `HashMap` dynamically replaces the Nodes (linked list) used in each bucket with TreeNodes (red-black tree), so that even if high hash collisions exist, the worst case *when searching* is\r\n\r\nO(log(n)) for `HashMap` **Vs** O(n) in `Hashtable`.\r\n\r\n*The aforementioned improvement has not been applied to `Hashtable` yet, but only to `HashMap`, `LinkedHashMap`, and `ConcurrentHashMap`.\r\n\r\nFYI, currently,\r\n\r\n - `TREEIFY_THRESHOLD = 8` : if a bucket contains more than 8 nodes, the linked list is transformed into a balanced tree.\r\n - `UNTREEIFY_THRESHOLD = 6` : when a bucket becomes too small (due to removal or resizing) the tree is converted back to linked list.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>Apart from the differences already mentioned, it should be noted that since Java 8, <code>HashMap</code> dynamically replaces the Nodes (linked list) used in each bucket with TreeNodes (red-black tree), so that even if high hash collisions exist, the worst case <em>when searching</em> is</p>\n\n<p>O(log(n)) for <code>HashMap</code> <strong>Vs</strong> O(n) in <code>Hashtable</code>.</p>\n\n<p>*The aforementioned improvement has not been applied to <code>Hashtable</code> yet, but only to <code>HashMap</code>, <code>LinkedHashMap</code>, and <code>ConcurrentHashMap</code>.</p>\n\n<p>FYI, currently,</p>\n\n<ul>\n<li><code>TREEIFY_THRESHOLD = 8</code> : if a bucket contains more than 8 nodes, the linked list is transformed into a balanced tree.</li>\n<li><code>UNTREEIFY_THRESHOLD = 6</code> : when a bucket becomes too small (due to removal or resizing) the tree is converted back to linked list.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6701313,"reputation":7980,"user_id":5167682,"accept_rate":29,"display_name":"roottraveller"},"down_vote_count":0,"up_vote_count":118,"is_accepted":false,"score":118,"last_activity_date":1622289194,"creation_date":1488794984,"answer_id":42622789,"question_id":40471,"body_markdown":"There are many good answers already posted. I&#39;m adding few new points and summarizing it.\r\n\r\n`HashMap` and `Hashtable` both are used to store *data in key and value form*. Both are using hashing technique to store unique keys.\r\nBut there are many differences between HashMap and Hashtable classes that are given below.\r\n\r\n**HashMap**\t\r\n\r\n1. ``HashMap`` is non synchronized. It is not-thread safe and can&#39;t be shared between many threads without proper synchronization code. \t\r\n2. ``HashMap`` allows one null key and multiple null values.\t\r\n3. `HashMap` is a new class introduced in JDK 1.2.\t\r\n4. `HashMap` is fast.\t\r\n5. We can make the `HashMap` as synchronized by calling this code   \r\n         `Map m = Collections.synchronizedMap(HashMap);\t `  \r\n6. `HashMap` is traversed by Iterator.\t\r\n7. Iterator in `HashMap` is fail-fast.\t\r\n8. `HashMap` inherits AbstractMap class.\t\r\n\r\n**Hashtable**\r\n\r\n1. `Hashtable` is synchronized. It is thread-safe and can be shared with many threads.  \r\n2. `Hashtable` doesn&#39;t allow null key or value.  \r\n3. `Hashtable` is a legacy class.  \r\n4. `Hashtable` is slow.  \r\n5. `Hashtable` is internally synchronized and can&#39;t be unsynchronized.  \r\n6. `Hashtable` is traversed by Enumerator and Iterator.  \r\n7. Enumerator in `Hashtable` is not fail-fast.  \r\n8. `Hashtable` inherits Dictionary class.\r\n\r\nFurther reading [What is difference between HashMap and Hashtable in Java?][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: http://javarevisited.blogspot.in/2010/10/difference-between-hashmap-and.html\r\n  [2]: https://i.stack.imgur.com/sDoih.png","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>There are many good answers already posted. I'm adding few new points and summarizing it.</p>\n<p><code>HashMap</code> and <code>Hashtable</code> both are used to store <em>data in key and value form</em>. Both are using hashing technique to store unique keys.\nBut there are many differences between HashMap and Hashtable classes that are given below.</p>\n<p><strong>HashMap</strong></p>\n<ol>\n<li><code>HashMap</code> is non synchronized. It is not-thread safe and can't be shared between many threads without proper synchronization code.</li>\n<li><code>HashMap</code> allows one null key and multiple null values.</li>\n<li><code>HashMap</code> is a new class introduced in JDK 1.2.</li>\n<li><code>HashMap</code> is fast.</li>\n<li>We can make the <code>HashMap</code> as synchronized by calling this code<br />\n<code>Map m = Collections.synchronizedMap(HashMap);  </code></li>\n<li><code>HashMap</code> is traversed by Iterator.</li>\n<li>Iterator in <code>HashMap</code> is fail-fast.</li>\n<li><code>HashMap</code> inherits AbstractMap class.</li>\n</ol>\n<p><strong>Hashtable</strong></p>\n<ol>\n<li><code>Hashtable</code> is synchronized. It is thread-safe and can be shared with many threads.</li>\n<li><code>Hashtable</code> doesn't allow null key or value.</li>\n<li><code>Hashtable</code> is a legacy class.</li>\n<li><code>Hashtable</code> is slow.</li>\n<li><code>Hashtable</code> is internally synchronized and can't be unsynchronized.</li>\n<li><code>Hashtable</code> is traversed by Enumerator and Iterator.</li>\n<li>Enumerator in <code>Hashtable</code> is not fail-fast.</li>\n<li><code>Hashtable</code> inherits Dictionary class.</li>\n</ol>\n<p>Further reading <a href=\"http://javarevisited.blogspot.in/2010/10/difference-between-hashmap-and.html\" rel=\"noreferrer\">What is difference between HashMap and Hashtable in Java?</a></p>\n<p><a href=\"https://i.stack.imgur.com/sDoih.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sDoih.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":5295682,"reputation":379,"user_id":4226914,"display_name":"KIBOU Hassan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492789315,"creation_date":1492789315,"answer_id":43546846,"question_id":40471,"body_markdown":"The Hashtable class is synchronized, that is, it is designed to be used by applications that handle multiple or multithreaded process. Synchronized classes are less efficient in the classical case of an application to a process, so the Hashmap class is faster in general.\r\nThe HashTable class does not accept the Null value, either for keys or for values, while the HashMap class allows a single key with Null and as many as null as possible.","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>The Hashtable class is synchronized, that is, it is designed to be used by applications that handle multiple or multithreaded process. Synchronized classes are less efficient in the classical case of an application to a process, so the Hashmap class is faster in general.\nThe HashTable class does not accept the Null value, either for keys or for values, while the HashMap class allows a single key with Null and as many as null as possible.</p>\n"},{"tags":[],"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1684105786,"creation_date":1515067124,"answer_id":48094803,"question_id":40471,"body_markdown":"*A [`Collection`](https://docs.oracle.com/javase/tutorial/collections/intro/index.html) — sometimes called a container — is simply an object that groups multiple elements into a single unit. `Collections` are used to store, retrieve, manipulate, and communicate aggregate data. A collections framework &lt;sup&gt;[W](https://en.wikipedia.org/wiki/Java_collections_framework)&lt;/sup&gt; is a unified architecture for representing and manipulating collections.*\r\n\r\nThe `HashMap` &lt;sup&gt;[_`JDK1.2`_](https://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html)&lt;/sup&gt; and Hashtable &lt;sup&gt;[_`JDK1.0`_](https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)&lt;/sup&gt;, both are used to represent a group of objects that are represented in `&lt;Key, Value&gt;` pair. Each `&lt;Key, Value&gt;` pair is called `Entry` object. The collection of Entries is referred by the object of `HashMap` and `Hashtable`. Keys in a collection must be unique or distinctive. [as they are used to retrieve a mapped value a particular key. values in a collection can be duplicated.]\r\n\r\n-----\r\n\r\n**&#171;** **Superclass, Legacy and Collection Framework member**\r\n\r\n *Hashtable is a legacy class introduced in `JDK1.0`, which is a subclass of Dictionary class. From `JDK1.2` Hashtable is re-engineered to implement the [Map interface](https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html) to make a member of collection framework. HashMap is a member of Java Collection Framework right from the beginning of its introduction in `JDK1.2`. HashMap is the subclass of the AbstractMap class.*\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n \r\n    public class Hashtable&lt;K,V&gt; extends Dictionary&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable { ... }\r\n    \r\n    public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable { ... }\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n**&#171;** **Initial capacity and Load factor**\r\n\r\n *The capacity is the number of buckets in the Hashtable, and the initial capacity is simply the capacity at the time the Hashtable is created. Note that the Hashtable is open: in the case of a [hash collision](http://www.algolist.net/Data_structures/Hash_table/Chaining), a single bucket stores multiple entries, which must be searched sequentially. The load factor is a measure of how full the Hashtable is allowed to get before its capacity is automatically increased.*\r\n    \r\n _HashMap constructs an empty Hashtable with the default initial capacity **(16)** and the default load factor (0.75). Where as Hashtable constructs empty Hashtable with a default initial capacity **(11)** and load factor/fill ratio (0.75)._\r\n\r\n[![Hash Map &amp; Hashtable][1]][1]\r\n\r\n**&#171;** **Structural modification in case of hash collision**\r\n\r\n  _`HashMap`, `Hashtable` in case of hash collisions they store the map entries in linked lists. **From Java8 for `HashMap`** if hash bucket grows beyond a certain threshold, that bucket will switch from [`linked list of entries to a balanced tree`](http://openjdk.java.net/jeps/180). which improve worst-case performance from O(n) to O(log n). While converting the list to binary tree, hashcode is used as a branching variable. If there are two different hashcodes in the same bucket, one is considered bigger and goes to the right of the tree and other one to the left. But when both the hashcodes are equal, `HashMap` assumes that the keys are comparable, and compares the key to determine the direction so that some order can be maintained. It is a good practice to make the keys of `HashMap` [comparable](https://stackoverflow.com/a/31244596/5081877). On adding entries if bucket size reaches `TREEIFY_THRESHOLD = 8` convert linked list of entries to a balanced tree, on removing entries less than `TREEIFY_THRESHOLD`  and at most `UNTREEIFY_THRESHOLD = 6` will reconvert  balanced tree to linked list of entries. &lt;sup&gt;[Java 8 SRC](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/HashMap.java#l244), [stackpost](https://stackoverflow.com/a/43911638/5081877)&lt;/sup&gt;_\r\n\r\n\r\n**&#171;** **Collection-view iteration, Fail-Fast and Fail-Safe**\r\n\r\n     \r\n        +--------------------+-----------+-------------+\r\n        |                    | Iterator  | Enumeration |\r\n        +--------------------+-----------+-------------+\r\n        | Hashtable          | fail-fast |    safe     |\r\n        +--------------------+-----------+-------------+\r\n        | HashMap            | fail-fast | fail-fast   |\r\n        +--------------------+-----------+-------------+\r\n        | ConcurrentHashMap  |   safe    |   safe      |\r\n        +--------------------+-----------+-------------+\r\n\r\n    \r\n[`Iterator`](https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html) is a fail-fast in nature. i.e it throws ConcurrentModificationException if a collection is modified while iterating other than it’s own remove() method. Where as [`Enumeration`](https://docs.oracle.com/javase/8/docs/api/java/util/Enumeration.html) is fail-safe in nature. It doesn’t throw any exceptions if a collection is modified while iterating. \r\n\r\nAccording to Java API Docs, Iterator is always preferred over the Enumeration. \r\n\r\n&lt;sub&gt;&lt;b&gt;NOTE:&lt;/b&gt; The functionality of Enumeration interface is duplicated by the Iterator interface. In addition, Iterator adds an optional remove operation, and has shorter method names. New implementations should consider using Iterator in preference to Enumeration.&lt;/sub&gt;\r\n\r\nIn [Java 5 introduced ConcurrentMap Interface](https://docs.oracle.com/javase/8/docs/technotes/guides/collections/changes5.html): `ConcurrentHashMap` - a highly concurrent, high-performance `ConcurrentMap` implementation backed by a hash table. This implementation never blocks when performing retrievals and allows the client to select the concurrency level for updates. It is intended as a drop-in replacement for `Hashtable`: in addition to implementing `ConcurrentMap`, it supports all of the &quot;legacy&quot; methods peculiar to `Hashtable`.\r\n    \r\n * Each `HashMapEntry`s value is [volatile](https://stackoverflow.com/a/47695757/5081877) thereby ensuring fine grain consistency for contended modifications and subsequent reads; each read reflects the most recently completed update\r\n    \r\n * Iterators and Enumerations are Fail Safe - reflecting the state at some point since the creation of iterator/enumeration; this allows for simultaneous reads and modifications at the cost of reduced consistency. They do not throw ConcurrentModificationException. However, iterators are designed to be used by only one thread at a time.\r\n\r\n * **_Like `Hashtable` but unlike `HashMap`, this class does not allow null to be used as a key or value._**\r\n    \r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n    public static void main(String[] args) {\r\n\r\n        //HashMap&lt;String, Integer&gt; hash = new HashMap&lt;String, Integer&gt;();\r\n        Hashtable&lt;String, Integer&gt; hash = new Hashtable&lt;String, Integer&gt;();\r\n        //ConcurrentHashMap&lt;String, Integer&gt; hash = new ConcurrentHashMap&lt;&gt;();\r\n        \r\n        new Thread() {\r\n            @Override public void run() {\r\n                try {\r\n                    for (int i = 10; i &lt; 20; i++) {\r\n                        sleepThread(1);\r\n                        System.out.println(&quot;T1 :- Key&quot;+i);\r\n                        hash.put(&quot;Key&quot;+i, i);\r\n                    }\r\n                    System.out.println( System.identityHashCode( hash ) );\r\n                } catch ( Exception e ) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }.start();\r\n        new Thread() {\r\n            @Override public void run() {\r\n                try {\r\n                    sleepThread(5);\r\n                    // ConcurrentHashMap  traverse using Iterator, Enumeration is Fail-Safe.\r\n                    \r\n                    // Hashtable traverse using Enumeration is Fail-Safe, Iterator is Fail-Fast.\r\n                    for (Enumeration&lt;String&gt; e = hash.keys(); e.hasMoreElements(); ) {\r\n                        sleepThread(1);\r\n                        System.out.println(&quot;T2 : &quot;+ e.nextElement());\r\n                    }\r\n                    \r\n                    // HashMap traverse using Iterator, Enumeration is Fail-Fast.\r\n                    /*\r\n                    for (Iterator&lt; Entry&lt;String, Integer&gt; &gt; it = hash.entrySet().iterator(); it.hasNext(); ) {\r\n                        sleepThread(1);\r\n                        System.out.println(&quot;T2 : &quot;+ it.next());\r\n                        // ConcurrentModificationException at java.util.Hashtable$Enumerator.next\r\n                    }\r\n                    */\r\n                    \r\n                    /*\r\n                    Set&lt; Entry&lt;String, Integer&gt; &gt; entrySet = hash.entrySet();\r\n                    Iterator&lt; Entry&lt;String, Integer&gt; &gt; it = entrySet.iterator();\r\n                    Enumeration&lt;Entry&lt;String, Integer&gt;&gt; entryEnumeration = Collections.enumeration( entrySet );\r\n                    while( entryEnumeration.hasMoreElements() ) {\r\n                        sleepThread(1);\r\n                        Entry&lt;String, Integer&gt; nextElement = entryEnumeration.nextElement();\r\n                        System.out.println(&quot;T2 : &quot;+ nextElement.getKey() +&quot; : &quot;+ nextElement.getValue() );\r\n                        //java.util.ConcurrentModificationException at java.util.HashMap$HashIterator.nextNode\r\n                        //                                          at java.util.HashMap$EntryIterator.next\r\n                        //                                          at java.util.Collections$3.nextElement\r\n                    }\r\n                    */\r\n                } catch ( Exception e ) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }.start();\r\n        \r\n        Map&lt;String, String&gt; unmodifiableMap = Collections.unmodifiableMap( map );\r\n        try {\r\n            unmodifiableMap.put(&quot;key4&quot;, &quot;unmodifiableMap&quot;);\r\n        } catch (java.lang.UnsupportedOperationException e) {\r\n            System.err.println(&quot;UnsupportedOperationException : &quot;+ e.getMessage() );\r\n        }\r\n    }\r\n    static void sleepThread( int sec ) {\r\n        try {\r\n            Thread.sleep( 1000 * sec );\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    \r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n**&#171;** **Null Keys And Null Values**\r\n\r\n  `HashMap` allows maximum one null key and any number of null values. Where as `Hashtable` doesn’t allow even a single null key and null value, if the key or value null is then it throws NullPointerException. &lt;sup&gt;[Example](https://stackoverflow.com/a/31243387/5081877)&lt;/sup&gt;\r\n  \r\n**&#171;** **Synchronized, Thread Safe**\r\n\r\n  `Hashtable` is internally synchronized. Therefore, it is very much safe to use `Hashtable` in multi threaded applications. Where as `HashMap` is not internally synchronized. Therefore, it is not safe to use `HashMap` in multi threaded applications without external synchronization. You can externally synchronize `HashMap` using `Collections.synchronizedMap()` method.\r\n\r\n**&#171;** **Performance**\r\n\r\n  As `Hashtable` is internally synchronized, this makes `Hashtable` slightly slower than the `HashMap`.\r\n\r\n-----\r\n\r\n@See\r\n\r\n * [A red–black tree is a kind of self-balancing binary search tree](https://en.wikipedia.org/wiki/Red%E2%80%93black_tree)\r\n * [Performance Improvement for `HashMap` in Java 8](https://www.nagarro.com/de/perspectives/post/24/performance-improvement-for-hashmap-in-java-8)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AerdR.png","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><em>A <a href=\"https://docs.oracle.com/javase/tutorial/collections/intro/index.html\" rel=\"nofollow noreferrer\"><code>Collection</code></a> — sometimes called a container — is simply an object that groups multiple elements into a single unit. <code>Collections</code> are used to store, retrieve, manipulate, and communicate aggregate data. A collections framework <sup><a href=\"https://en.wikipedia.org/wiki/Java_collections_framework\" rel=\"nofollow noreferrer\">W</a></sup> is a unified architecture for representing and manipulating collections.</em></p>\n<p>The <code>HashMap</code> <sup><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html\" rel=\"nofollow noreferrer\"><em><code>JDK1.2</code></em></a></sup> and Hashtable <sup><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\"><em><code>JDK1.0</code></em></a></sup>, both are used to represent a group of objects that are represented in <code>&lt;Key, Value&gt;</code> pair. Each <code>&lt;Key, Value&gt;</code> pair is called <code>Entry</code> object. The collection of Entries is referred by the object of <code>HashMap</code> and <code>Hashtable</code>. Keys in a collection must be unique or distinctive. [as they are used to retrieve a mapped value a particular key. values in a collection can be duplicated.]</p>\n<hr />\n<p><strong>«</strong> <strong>Superclass, Legacy and Collection Framework member</strong></p>\n<p><em>Hashtable is a legacy class introduced in <code>JDK1.0</code>, which is a subclass of Dictionary class. From <code>JDK1.2</code> Hashtable is re-engineered to implement the <a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/map.html\" rel=\"nofollow noreferrer\">Map interface</a> to make a member of collection framework. HashMap is a member of Java Collection Framework right from the beginning of its introduction in <code>JDK1.2</code>. HashMap is the subclass of the AbstractMap class.</em></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Hashtable&lt;K,V&gt; extends Dictionary&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable { ... }\n\npublic class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable { ... }\n</code></pre>\n\n<p><strong>«</strong> <strong>Initial capacity and Load factor</strong></p>\n<p><em>The capacity is the number of buckets in the Hashtable, and the initial capacity is simply the capacity at the time the Hashtable is created. Note that the Hashtable is open: in the case of a <a href=\"http://www.algolist.net/Data_structures/Hash_table/Chaining\" rel=\"nofollow noreferrer\">hash collision</a>, a single bucket stores multiple entries, which must be searched sequentially. The load factor is a measure of how full the Hashtable is allowed to get before its capacity is automatically increased.</em></p>\n<p><em>HashMap constructs an empty Hashtable with the default initial capacity <strong>(16)</strong> and the default load factor (0.75). Where as Hashtable constructs empty Hashtable with a default initial capacity <strong>(11)</strong> and load factor/fill ratio (0.75).</em></p>\n<p><a href=\"https://i.stack.imgur.com/AerdR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AerdR.png\" alt=\"Hash Map &amp; Hashtable\" /></a></p>\n<p><strong>«</strong> <strong>Structural modification in case of hash collision</strong></p>\n<p><em><code>HashMap</code>, <code>Hashtable</code> in case of hash collisions they store the map entries in linked lists. <strong>From Java8 for <code>HashMap</code></strong> if hash bucket grows beyond a certain threshold, that bucket will switch from <a href=\"http://openjdk.java.net/jeps/180\" rel=\"nofollow noreferrer\"><code>linked list of entries to a balanced tree</code></a>. which improve worst-case performance from O(n) to O(log n). While converting the list to binary tree, hashcode is used as a branching variable. If there are two different hashcodes in the same bucket, one is considered bigger and goes to the right of the tree and other one to the left. But when both the hashcodes are equal, <code>HashMap</code> assumes that the keys are comparable, and compares the key to determine the direction so that some order can be maintained. It is a good practice to make the keys of <code>HashMap</code> <a href=\"https://stackoverflow.com/a/31244596/5081877\">comparable</a>. On adding entries if bucket size reaches <code>TREEIFY_THRESHOLD = 8</code> convert linked list of entries to a balanced tree, on removing entries less than <code>TREEIFY_THRESHOLD</code>  and at most <code>UNTREEIFY_THRESHOLD = 6</code> will reconvert  balanced tree to linked list of entries. <sup><a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/HashMap.java#l244\" rel=\"nofollow noreferrer\">Java 8 SRC</a>, <a href=\"https://stackoverflow.com/a/43911638/5081877\">stackpost</a></sup></em></p>\n<p><strong>«</strong> <strong>Collection-view iteration, Fail-Fast and Fail-Safe</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    +--------------------+-----------+-------------+\n    |                    | Iterator  | Enumeration |\n    +--------------------+-----------+-------------+\n    | Hashtable          | fail-fast |    safe     |\n    +--------------------+-----------+-------------+\n    | HashMap            | fail-fast | fail-fast   |\n    +--------------------+-----------+-------------+\n    | ConcurrentHashMap  |   safe    |   safe      |\n    +--------------------+-----------+-------------+\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html\" rel=\"nofollow noreferrer\"><code>Iterator</code></a> is a fail-fast in nature. i.e it throws ConcurrentModificationException if a collection is modified while iterating other than it’s own remove() method. Where as <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Enumeration.html\" rel=\"nofollow noreferrer\"><code>Enumeration</code></a> is fail-safe in nature. It doesn’t throw any exceptions if a collection is modified while iterating.</p>\n<p>According to Java API Docs, Iterator is always preferred over the Enumeration.</p>\n<p><sub><b>NOTE:</b> The functionality of Enumeration interface is duplicated by the Iterator interface. In addition, Iterator adds an optional remove operation, and has shorter method names. New implementations should consider using Iterator in preference to Enumeration.</sub></p>\n<p>In <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/collections/changes5.html\" rel=\"nofollow noreferrer\">Java 5 introduced ConcurrentMap Interface</a>: <code>ConcurrentHashMap</code> - a highly concurrent, high-performance <code>ConcurrentMap</code> implementation backed by a hash table. This implementation never blocks when performing retrievals and allows the client to select the concurrency level for updates. It is intended as a drop-in replacement for <code>Hashtable</code>: in addition to implementing <code>ConcurrentMap</code>, it supports all of the &quot;legacy&quot; methods peculiar to <code>Hashtable</code>.</p>\n<ul>\n<li><p>Each <code>HashMapEntry</code>s value is <a href=\"https://stackoverflow.com/a/47695757/5081877\">volatile</a> thereby ensuring fine grain consistency for contended modifications and subsequent reads; each read reflects the most recently completed update</p>\n</li>\n<li><p>Iterators and Enumerations are Fail Safe - reflecting the state at some point since the creation of iterator/enumeration; this allows for simultaneous reads and modifications at the cost of reduced consistency. They do not throw ConcurrentModificationException. However, iterators are designed to be used by only one thread at a time.</p>\n</li>\n<li><p><strong><em>Like <code>Hashtable</code> but unlike <code>HashMap</code>, this class does not allow null to be used as a key or value.</em></strong></p>\n</li>\n</ul>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n\n    //HashMap&lt;String, Integer&gt; hash = new HashMap&lt;String, Integer&gt;();\n    Hashtable&lt;String, Integer&gt; hash = new Hashtable&lt;String, Integer&gt;();\n    //ConcurrentHashMap&lt;String, Integer&gt; hash = new ConcurrentHashMap&lt;&gt;();\n    \n    new Thread() {\n        @Override public void run() {\n            try {\n                for (int i = 10; i &lt; 20; i++) {\n                    sleepThread(1);\n                    System.out.println(&quot;T1 :- Key&quot;+i);\n                    hash.put(&quot;Key&quot;+i, i);\n                }\n                System.out.println( System.identityHashCode( hash ) );\n            } catch ( Exception e ) {\n                e.printStackTrace();\n            }\n        }\n    }.start();\n    new Thread() {\n        @Override public void run() {\n            try {\n                sleepThread(5);\n                // ConcurrentHashMap  traverse using Iterator, Enumeration is Fail-Safe.\n                \n                // Hashtable traverse using Enumeration is Fail-Safe, Iterator is Fail-Fast.\n                for (Enumeration&lt;String&gt; e = hash.keys(); e.hasMoreElements(); ) {\n                    sleepThread(1);\n                    System.out.println(&quot;T2 : &quot;+ e.nextElement());\n                }\n                \n                // HashMap traverse using Iterator, Enumeration is Fail-Fast.\n                /*\n                for (Iterator&lt; Entry&lt;String, Integer&gt; &gt; it = hash.entrySet().iterator(); it.hasNext(); ) {\n                    sleepThread(1);\n                    System.out.println(&quot;T2 : &quot;+ it.next());\n                    // ConcurrentModificationException at java.util.Hashtable$Enumerator.next\n                }\n                */\n                \n                /*\n                Set&lt; Entry&lt;String, Integer&gt; &gt; entrySet = hash.entrySet();\n                Iterator&lt; Entry&lt;String, Integer&gt; &gt; it = entrySet.iterator();\n                Enumeration&lt;Entry&lt;String, Integer&gt;&gt; entryEnumeration = Collections.enumeration( entrySet );\n                while( entryEnumeration.hasMoreElements() ) {\n                    sleepThread(1);\n                    Entry&lt;String, Integer&gt; nextElement = entryEnumeration.nextElement();\n                    System.out.println(&quot;T2 : &quot;+ nextElement.getKey() +&quot; : &quot;+ nextElement.getValue() );\n                    //java.util.ConcurrentModificationException at java.util.HashMap$HashIterator.nextNode\n                    //                                          at java.util.HashMap$EntryIterator.next\n                    //                                          at java.util.Collections$3.nextElement\n                }\n                */\n            } catch ( Exception e ) {\n                e.printStackTrace();\n            }\n        }\n    }.start();\n    \n    Map&lt;String, String&gt; unmodifiableMap = Collections.unmodifiableMap( map );\n    try {\n        unmodifiableMap.put(&quot;key4&quot;, &quot;unmodifiableMap&quot;);\n    } catch (java.lang.UnsupportedOperationException e) {\n        System.err.println(&quot;UnsupportedOperationException : &quot;+ e.getMessage() );\n    }\n}\nstatic void sleepThread( int sec ) {\n    try {\n        Thread.sleep( 1000 * sec );\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p><strong>«</strong> <strong>Null Keys And Null Values</strong></p>\n<p><code>HashMap</code> allows maximum one null key and any number of null values. Where as <code>Hashtable</code> doesn’t allow even a single null key and null value, if the key or value null is then it throws NullPointerException. <sup><a href=\"https://stackoverflow.com/a/31243387/5081877\">Example</a></sup></p>\n<p><strong>«</strong> <strong>Synchronized, Thread Safe</strong></p>\n<p><code>Hashtable</code> is internally synchronized. Therefore, it is very much safe to use <code>Hashtable</code> in multi threaded applications. Where as <code>HashMap</code> is not internally synchronized. Therefore, it is not safe to use <code>HashMap</code> in multi threaded applications without external synchronization. You can externally synchronize <code>HashMap</code> using <code>Collections.synchronizedMap()</code> method.</p>\n<p><strong>«</strong> <strong>Performance</strong></p>\n<p>As <code>Hashtable</code> is internally synchronized, this makes <code>Hashtable</code> slightly slower than the <code>HashMap</code>.</p>\n<hr />\n<p>@See</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Red%E2%80%93black_tree\" rel=\"nofollow noreferrer\">A red–black tree is a kind of self-balancing binary search tree</a></li>\n<li><a href=\"https://www.nagarro.com/de/perspectives/post/24/performance-improvement-for-hashmap-in-java-8\" rel=\"nofollow noreferrer\">Performance Improvement for <code>HashMap</code> in Java 8</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10719390,"reputation":2290,"user_id":7888956,"display_name":"Chathuran D"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1572435142,"creation_date":1572435142,"answer_id":58624450,"question_id":40471,"body_markdown":"**HashMap** and **Hashtable** both are used to store data in key and value form. Both are using hashing technique to store unique keys.\r\nut there are many differences between HashMap and Hashtable classes that are given below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mLpKn.png","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p><strong>HashMap</strong> and <strong>Hashtable</strong> both are used to store data in key and value form. Both are using hashing technique to store unique keys.\nut there are many differences between HashMap and Hashtable classes that are given below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/mLpKn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mLpKn.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":3051,"reputation":51703,"user_id":4316,"accept_rate":100,"display_name":"dmanxiii"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1735935,"favorite_count":0,"down_vote_count":8,"up_vote_count":4312,"accepted_answer_id":40878,"answer_count":35,"score":4304,"last_activity_date":1696168668,"creation_date":1220386320,"question_id":40471,"body_markdown":"What are the differences between a [`HashMap`][map] and a [`Hashtable`][table] in Java?\r\n\r\nWhich is more efficient for non-threaded applications?\r\n\r\n[map]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html\r\n[table]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Hashtable.html","title":"What are the differences between a HashMap and a Hashtable in Java?","body":"<p>What are the differences between a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html\" rel=\"noreferrer\"><code>HashMap</code></a> and a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Hashtable.html\" rel=\"noreferrer\"><code>Hashtable</code></a> in Java?</p>\n\n<p>Which is more efficient for non-threaded applications?</p>\n"},{"tags":["java","spring-boot","memcached","jhipster","spring-cache"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":2,"creation_date":1451833749,"post_id":34577936,"comment_id":56900668,"body_markdown":"Do you have the same `class` on your classpath twice? Or do you have it loaded from multiple classloaders (or example in a WebApp environment). The usual cause for a class cannot be cast to itself issues is that the classes are loaded from different places...","body":"Do you have the same <code>class</code> on your classpath twice? Or do you have it loaded from multiple classloaders (or example in a WebApp environment). The usual cause for a class cannot be cast to itself issues is that the classes are loaded from different places..."},{"owner":{"account_id":4742078,"reputation":6224,"user_id":3834478,"display_name":"sisyphus"},"score":2,"creation_date":1451833813,"post_id":34577936,"comment_id":56900691,"body_markdown":"At a guess, it looks like some kind of ClassLoader issue. Looks like you&#39;ve got two different classloaders which have loaded the same class.","body":"At a guess, it looks like some kind of ClassLoader issue. Looks like you&#39;ve got two different classloaders which have loaded the same class."},{"owner":{"account_id":238952,"reputation":2166,"user_id":508214,"accept_rate":73,"display_name":"titogeo"},"score":1,"creation_date":1451834389,"post_id":34577936,"comment_id":56900866,"body_markdown":"@sisyphus i use spring boot + devtools. I read some where devtools keeps  one class loader for static jars and one for application code. Would this cause issue?","body":"@sisyphus i use spring boot + devtools. I read some where devtools keeps  one class loader for static jars and one for application code. Would this cause issue?"},{"owner":{"account_id":238952,"reputation":2166,"user_id":508214,"accept_rate":73,"display_name":"titogeo"},"score":2,"creation_date":1451834723,"post_id":34577936,"comment_id":56900983,"body_markdown":"@BoristheSpider Yes that&#39;s it, i removed spring-boot-devtools and its working. Thanks Guys","body":"@BoristheSpider Yes that&#39;s it, i removed spring-boot-devtools and its working. Thanks Guys"},{"owner":{"account_id":238952,"reputation":2166,"user_id":508214,"accept_rate":73,"display_name":"titogeo"},"score":0,"creation_date":1451837298,"post_id":34577936,"comment_id":56901852,"body_markdown":"Should I raise an issue with spring-boot. as per the their guidelines they are watching this tag. Also I don&#39;t think this is fixable, please suggest.","body":"Should I raise an issue with spring-boot. as per the their guidelines they are watching this tag. Also I don&#39;t think this is fixable, please suggest."},{"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"score":0,"creation_date":1451841030,"post_id":34577936,"comment_id":56903201,"body_markdown":"I just did. This isn&#39;t an issue we&#39;re not aware of so it does not need a new issue.","body":"I just did. This isn&#39;t an issue we&#39;re not aware of so it does not need a new issue."},{"owner":{"account_id":4907986,"reputation":1440,"user_id":3997460,"accept_rate":62,"display_name":"megloff"},"score":0,"creation_date":1696168697,"post_id":34577936,"comment_id":136116206,"body_markdown":"See below I posted an answer, please see if it might help you in your case","body":"See below I posted an answer, please see if it might help you in your case"}],"answers":[{"tags":[],"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1451840985,"creation_date":1451840985,"answer_id":34579221,"question_id":34577936,"body_markdown":"This is [a known limitation of Devtools](http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-known-restart-limitations). When the cache entry is deserialized, the object is not attached to the proper classloader.\r\n\r\nThere are various ways you can fix this issue:\r\n\r\n1. Disable cache when you&#39;re running your application in development\r\n2. Use a different cache manager (if you&#39;re using Spring Boot 1.3, you could force a `simple` cache manager using the `spring.cache.type` property in `application-dev.properties` and enable the dev profile in your IDE)\r\n3. Configure memcached (and things that are cached) to [run in the application classloader](http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-customizing-classload). I wouldn&#39;t recommend that option since the two first above are much easier to implement","title":"spring-boot-devtools causing ClassCastException while getting from cache.","body":"<p>This is <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-known-restart-limitations\" rel=\"noreferrer\">a known limitation of Devtools</a>. When the cache entry is deserialized, the object is not attached to the proper classloader.</p>\n\n<p>There are various ways you can fix this issue:</p>\n\n<ol>\n<li>Disable cache when you're running your application in development</li>\n<li>Use a different cache manager (if you're using Spring Boot 1.3, you could force a <code>simple</code> cache manager using the <code>spring.cache.type</code> property in <code>application-dev.properties</code> and enable the dev profile in your IDE)</li>\n<li>Configure memcached (and things that are cached) to <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-devtools-customizing-classload\" rel=\"noreferrer\">run in the application classloader</a>. I wouldn't recommend that option since the two first above are much easier to implement</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9692548,"reputation":61,"user_id":7190169,"display_name":"Arny"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1484922683,"creation_date":1484922683,"answer_id":41766003,"question_id":34577936,"body_markdown":"Well I got the same error, but the caching was not the reason. Actually I was using caching, but the commenting the caching out didn&#39;t help.\r\n\r\nBased on the hints here and there I just introduced additional serialization/derialization of my object. It&#39;s definatelly the best way (the performance issue), but it&#39;s working.\r\n\r\nSo, just for the others I changed my code from:\r\n\r\n    \r\n    @Cacheable(&quot;tests&quot;)\r\n\tpublic MyDTO loadData(String testID) {\r\n\t\t// add file extension to match XML file\r\n\t\treturn (MyDTO) this.xmlMarshaller.loadXML(String.format(&quot;%s/%s.xml&quot;, xmlPath, testID));\r\n\t}\r\n\r\nto:\r\n\r\n    @Cacheable(&quot;tests&quot;)\r\n\tpublic MyDTO loadData(String testID) {\r\n\t\t// add file extension to match XML file\r\n\t\tObject dtoObject = this.xmlMarshaller.loadXML(String.format(&quot;%s/%s.xml&quot;, xmlPath, testID));\r\n\t\tbyte[] data = serializeDTO(dtoObject);\r\n\t\tMyDTO dto = deserializeDTO(data);\r\n\t\treturn dto;\r\n\t}\r\n\r\n\tprivate MyDTO deserializeDTO(byte[] data) {\r\n\t\tMyDTO dto = null;\r\n\t\ttry {\r\n\t\t\tByteArrayInputStream fileIn = new ByteArrayInputStream(data);\r\n\t\t\tObjectInputStream in = new ConfigurableObjectInputStream(fileIn,\r\n\t\t\t\t\tThread.currentThread().getContextClassLoader());\r\n\t\t\tdto = (MyDTO) in.readObject();\r\n\t\t\tin.close();\r\n\t\t\tfileIn.close();\r\n\t\t} catch (Exception e) {\r\n\t\t\tString msg = &quot;Deserialization of marshalled XML failed!&quot;;\r\n\t\t\tLOG.error(msg, e);\r\n\t\t\tthrow new RuntimeException(msg, e);\r\n\t\t}\r\n\t\treturn dto;\r\n\t}\r\n\t\r\n\tprivate byte[] serializeDTO(Object dtoObject) {\r\n\t\tbyte[] result = null;\r\n\t\ttry {\r\n\t\t\tByteArrayOutputStream data = new ByteArrayOutputStream();\r\n\t\t\tObjectOutputStream out = new ObjectOutputStream(data);\r\n\t\t\tout.writeObject(dtoObject);\r\n\t\t\tout.close();\r\n\t\t\tresult = data.toByteArray();\r\n\t\t\tdata.close();\r\n\t\t} catch (IOException e) {\r\n\t\t\tString msg = &quot;Serialization of marshalled XML failed!&quot;;\r\n\t\t\tLOG.error(msg, e);\r\n\t\t\tthrow new RuntimeException(msg, e);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n*Note: this is not any sofisticated solution, but just the hint of usage ConfigurableObjectInputStream class.*","title":"spring-boot-devtools causing ClassCastException while getting from cache.","body":"<p>Well I got the same error, but the caching was not the reason. Actually I was using caching, but the commenting the caching out didn't help.</p>\n\n<p>Based on the hints here and there I just introduced additional serialization/derialization of my object. It's definatelly the best way (the performance issue), but it's working.</p>\n\n<p>So, just for the others I changed my code from:</p>\n\n<pre><code>@Cacheable(\"tests\")\npublic MyDTO loadData(String testID) {\n    // add file extension to match XML file\n    return (MyDTO) this.xmlMarshaller.loadXML(String.format(\"%s/%s.xml\", xmlPath, testID));\n}\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>@Cacheable(\"tests\")\npublic MyDTO loadData(String testID) {\n    // add file extension to match XML file\n    Object dtoObject = this.xmlMarshaller.loadXML(String.format(\"%s/%s.xml\", xmlPath, testID));\n    byte[] data = serializeDTO(dtoObject);\n    MyDTO dto = deserializeDTO(data);\n    return dto;\n}\n\nprivate MyDTO deserializeDTO(byte[] data) {\n    MyDTO dto = null;\n    try {\n        ByteArrayInputStream fileIn = new ByteArrayInputStream(data);\n        ObjectInputStream in = new ConfigurableObjectInputStream(fileIn,\n                Thread.currentThread().getContextClassLoader());\n        dto = (MyDTO) in.readObject();\n        in.close();\n        fileIn.close();\n    } catch (Exception e) {\n        String msg = \"Deserialization of marshalled XML failed!\";\n        LOG.error(msg, e);\n        throw new RuntimeException(msg, e);\n    }\n    return dto;\n}\n\nprivate byte[] serializeDTO(Object dtoObject) {\n    byte[] result = null;\n    try {\n        ByteArrayOutputStream data = new ByteArrayOutputStream();\n        ObjectOutputStream out = new ObjectOutputStream(data);\n        out.writeObject(dtoObject);\n        out.close();\n        result = data.toByteArray();\n        data.close();\n    } catch (IOException e) {\n        String msg = \"Serialization of marshalled XML failed!\";\n        LOG.error(msg, e);\n        throw new RuntimeException(msg, e);\n    }\n\n    return result;\n}\n</code></pre>\n\n<p><em>Note: this is not any sofisticated solution, but just the hint of usage ConfigurableObjectInputStream class.</em></p>\n"},{"tags":[],"owner":{"account_id":3896319,"reputation":3078,"user_id":3225260,"accept_rate":45,"display_name":"mad_fox"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545428127,"creation_date":1545428127,"answer_id":53891027,"question_id":34577936,"body_markdown":"I was running into this same issue when running a project in eclipse with the STS plugin enabled. Even though I removed the devtools dependency completely from the project. It was still enabled in eclipse. To fix this, I had to disable devtools. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VvGZF.png","title":"spring-boot-devtools causing ClassCastException while getting from cache.","body":"<p>I was running into this same issue when running a project in eclipse with the STS plugin enabled. Even though I removed the devtools dependency completely from the project. It was still enabled in eclipse. To fix this, I had to disable devtools. </p>\n\n<p><a href=\"https://i.stack.imgur.com/VvGZF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VvGZF.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":4907986,"reputation":1440,"user_id":3997460,"accept_rate":62,"display_name":"megloff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696168328,"creation_date":1696167974,"answer_id":77210730,"question_id":34577936,"body_markdown":"The problem is that when you are using the devtools the ClassLoader get set to a different one `org.springframework.boot.devtools.restart.classloader.RestartClassLoader` then the Cache Provider / Framework you are using. \r\n\r\nIn case you are using JCache or EhCache you simple initialize the Cache Manager by making sure that you are using the same class loader. \r\n\r\nMore information and background can be found [here][1]\r\n\r\n```\r\nimport javax.cache.CacheManager;\r\nimport javax.cache.Caching;\r\nimport javax.cache.spi.CachingProvider;\r\n\r\n@Configuration\r\n@EnableCaching\r\n@Slf4j\r\npublic class CachingConfiguration {\r\n\r\n\t@Bean\r\n\t@Primary\r\n\tpublic CacheManager myCacheManager() {\r\n     \r\n    // The trick is to use &quot;Thread.currentThread().getContextClassLoader()&quot;\r\n    // which overwrites the default class loader set internally by the cache provider\r\n    // with this you ensure both Class loaders are the same when you are using the devtools \r\n\r\n\t\tCachingProvider provider = Caching.getCachingProvider();\r\n\t\tCacheManager cacheManager = provider.getCacheManager(provider.getDefaultURI(), Thread.currentThread().getContextClassLoader());\r\n\t\treturn cacheManager;\r\n\t}\r\n\r\n\r\n    // Optional - in the same class or separate class you can verify the \r\n    // reload which gets initiated by the devtools. So you can check if the \r\n    // Class loader of your cache Manager and the one currently used by the\r\n    // Spring Framework is the same\r\n    \r\n    @Autowired\r\n\t@Lazy\r\n\tCacheManager cacheManager;\r\n\r\n    @EventListener\r\n\tpublic void handleContextRefreshEvent(ContextRefreshedEvent ctxEvt) {\t\t\t\r\n        ClassLoader loader1 = Thread.currentThread().getContextClassLoader();\r\n\t\tClassLoader loader2 = cacheManager.getClassLoader();\r\n\t\tlog.debug(&quot;{} = {}&quot;, loader1, loader2);\r\n\t}\r\n}\r\n```\r\n\r\nThe expected output should then be\r\n\r\n```\r\norg.springframework.boot.devtools.restart.classloader.RestartClassLoader@3478e262 = org.springframework.boot.devtools.restart.classloader.RestartClassLoader@3478e262\r\n```\r\n\r\n\r\n  [1]: https://segmentfault.com/a/1190000041647471/en","title":"spring-boot-devtools causing ClassCastException while getting from cache.","body":"<p>The problem is that when you are using the devtools the ClassLoader get set to a different one <code>org.springframework.boot.devtools.restart.classloader.RestartClassLoader</code> then the Cache Provider / Framework you are using.</p>\n<p>In case you are using JCache or EhCache you simple initialize the Cache Manager by making sure that you are using the same class loader.</p>\n<p>More information and background can be found <a href=\"https://segmentfault.com/a/1190000041647471/en\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>import javax.cache.CacheManager;\nimport javax.cache.Caching;\nimport javax.cache.spi.CachingProvider;\n\n@Configuration\n@EnableCaching\n@Slf4j\npublic class CachingConfiguration {\n\n    @Bean\n    @Primary\n    public CacheManager myCacheManager() {\n     \n    // The trick is to use &quot;Thread.currentThread().getContextClassLoader()&quot;\n    // which overwrites the default class loader set internally by the cache provider\n    // with this you ensure both Class loaders are the same when you are using the devtools \n\n        CachingProvider provider = Caching.getCachingProvider();\n        CacheManager cacheManager = provider.getCacheManager(provider.getDefaultURI(), Thread.currentThread().getContextClassLoader());\n        return cacheManager;\n    }\n\n\n    // Optional - in the same class or separate class you can verify the \n    // reload which gets initiated by the devtools. So you can check if the \n    // Class loader of your cache Manager and the one currently used by the\n    // Spring Framework is the same\n    \n    @Autowired\n    @Lazy\n    CacheManager cacheManager;\n\n    @EventListener\n    public void handleContextRefreshEvent(ContextRefreshedEvent ctxEvt) {           \n        ClassLoader loader1 = Thread.currentThread().getContextClassLoader();\n        ClassLoader loader2 = cacheManager.getClassLoader();\n        log.debug(&quot;{} = {}&quot;, loader1, loader2);\n    }\n}\n</code></pre>\n<p>The expected output should then be</p>\n<pre><code>org.springframework.boot.devtools.restart.classloader.RestartClassLoader@3478e262 = org.springframework.boot.devtools.restart.classloader.RestartClassLoader@3478e262\n</code></pre>\n"}],"owner":{"account_id":238952,"reputation":2166,"user_id":508214,"accept_rate":73,"display_name":"titogeo"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7648,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":34579221,"answer_count":4,"score":10,"last_activity_date":1696168328,"creation_date":1451833461,"question_id":34577936,"body_markdown":"I am facing issue while getting value from cache. \r\n\r\n    java.lang.RuntimeException: java.lang.ClassCastException: com.mycom.admin.domain.User cannot be cast to com.mycom.admin.domain.User\r\n\r\n\r\nCache Configuration\r\n\r\n    @Configuration\r\n    @EnableCaching\r\n    @AutoConfigureAfter(value = { MetricsConfiguration.class, DatabaseConfiguration.class })\r\n    @Profile(&quot;!&quot; + Constants.SPRING_PROFILE_FAST)\r\n    public class MemcachedCacheConfiguration extends CachingConfigurerSupport {\r\n    \r\n        private final Logger log = LoggerFactory.getLogger(MemcachedCacheConfiguration.class);\r\n    \r\n        @Override\r\n        @Bean\r\n        public CacheManager cacheManager() {\r\n            ExtendedSSMCacheManager cacheManager = new ExtendedSSMCacheManager();\r\n            try {\r\n                List&lt;SSMCache&gt; list = new ArrayList&lt;&gt;();\r\n                list.add(new SSMCache(defaultCache(&quot;apiCache&quot;), 86400, false));\r\n                cacheManager.setCaches(list);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return cacheManager;\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public CacheResolver cacheResolver() {\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        public CacheErrorHandler errorHandler() {\r\n            return null;\r\n        }\r\n    \r\n        private Cache defaultCache(String cacheName) throws Exception {\r\n            CacheFactory cacheFactory = new CacheFactory();\r\n            cacheFactory.setCacheName(cacheName);\r\n            cacheFactory.setCacheClientFactory(new MemcacheClientFactoryImpl());\r\n            String serverHost = &quot;127.0.0.1:11211&quot;;\r\n            cacheFactory.setAddressProvider(new DefaultAddressProvider(serverHost));\r\n            cacheFactory.setConfiguration(cacheConfiguration());\r\n            return cacheFactory.getObject();\r\n        }\r\n    \r\n        @Bean\r\n        public CacheConfiguration cacheConfiguration() {\r\n            CacheConfiguration cacheConfiguration = new CacheConfiguration();\r\n            cacheConfiguration.setConsistentHashing(true);\r\n            return cacheConfiguration;\r\n        }\r\n    \r\n    }\r\n\r\nAnd annotated with \r\n\r\n    @Cacheable(value = &quot;apiCache#86400&quot;, key = &quot;&#39;User-&#39;.concat(#login)&quot;)\r\n\r\nI am using com.google.code.simple-spring-memcached 3.5.0\r\n\r\nValue is getting cached but while getting application throws class cast error. What would be the possible issues. \r\n\r\n[Full stack trace][1]\r\n\r\n\r\n  [1]: http://pastebin.com/uMxCigQ7","title":"spring-boot-devtools causing ClassCastException while getting from cache.","body":"<p>I am facing issue while getting value from cache. </p>\n\n<pre><code>java.lang.RuntimeException: java.lang.ClassCastException: com.mycom.admin.domain.User cannot be cast to com.mycom.admin.domain.User\n</code></pre>\n\n<p>Cache Configuration</p>\n\n<pre><code>@Configuration\n@EnableCaching\n@AutoConfigureAfter(value = { MetricsConfiguration.class, DatabaseConfiguration.class })\n@Profile(\"!\" + Constants.SPRING_PROFILE_FAST)\npublic class MemcachedCacheConfiguration extends CachingConfigurerSupport {\n\n    private final Logger log = LoggerFactory.getLogger(MemcachedCacheConfiguration.class);\n\n    @Override\n    @Bean\n    public CacheManager cacheManager() {\n        ExtendedSSMCacheManager cacheManager = new ExtendedSSMCacheManager();\n        try {\n            List&lt;SSMCache&gt; list = new ArrayList&lt;&gt;();\n            list.add(new SSMCache(defaultCache(\"apiCache\"), 86400, false));\n            cacheManager.setCaches(list);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return cacheManager;\n    }\n\n\n    @Override\n    public CacheResolver cacheResolver() {\n        return null;\n    }\n\n    @Override\n    public CacheErrorHandler errorHandler() {\n        return null;\n    }\n\n    private Cache defaultCache(String cacheName) throws Exception {\n        CacheFactory cacheFactory = new CacheFactory();\n        cacheFactory.setCacheName(cacheName);\n        cacheFactory.setCacheClientFactory(new MemcacheClientFactoryImpl());\n        String serverHost = \"127.0.0.1:11211\";\n        cacheFactory.setAddressProvider(new DefaultAddressProvider(serverHost));\n        cacheFactory.setConfiguration(cacheConfiguration());\n        return cacheFactory.getObject();\n    }\n\n    @Bean\n    public CacheConfiguration cacheConfiguration() {\n        CacheConfiguration cacheConfiguration = new CacheConfiguration();\n        cacheConfiguration.setConsistentHashing(true);\n        return cacheConfiguration;\n    }\n\n}\n</code></pre>\n\n<p>And annotated with </p>\n\n<pre><code>@Cacheable(value = \"apiCache#86400\", key = \"'User-'.concat(#login)\")\n</code></pre>\n\n<p>I am using com.google.code.simple-spring-memcached 3.5.0</p>\n\n<p>Value is getting cached but while getting application throws class cast error. What would be the possible issues. </p>\n\n<p><a href=\"http://pastebin.com/uMxCigQ7\" rel=\"noreferrer\">Full stack trace</a></p>\n"},{"tags":["java","corda","corda-flow"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1696168300,"post_id":77197011,"comment_id":136116155,"body_markdown":"Was the Java version upgraded recently?","body":"Was the Java version upgraded recently?"},{"owner":{"account_id":8837519,"reputation":85,"user_id":6601135,"display_name":"mcapptivate"},"score":0,"creation_date":1696262150,"post_id":77197011,"comment_id":136127447,"body_markdown":"No. I&#39;m still on Java 11 as it&#39;s stated in the documentation.","body":"No. I&#39;m still on Java 11 as it&#39;s stated in the documentation."}],"answers":[{"tags":[],"owner":{"account_id":6569975,"reputation":305,"user_id":5078374,"display_name":"shpitc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696168066,"creation_date":1696168066,"answer_id":77210736,"question_id":77197011,"body_markdown":"I belive that your dependencies libraries require sandbox security policy adjustments. You can find more explanations here:\r\n\r\nhttps://docs.r3.com/en/platform/corda/5.0/deploying-operating/config/security-policies.html","title":"Corda 5 Exception","body":"<p>I belive that your dependencies libraries require sandbox security policy adjustments. You can find more explanations here:</p>\n<p><a href=\"https://docs.r3.com/en/platform/corda/5.0/deploying-operating/config/security-policies.html\" rel=\"nofollow noreferrer\">https://docs.r3.com/en/platform/corda/5.0/deploying-operating/config/security-policies.html</a></p>\n"}],"owner":{"account_id":8837519,"reputation":85,"user_id":6601135,"display_name":"mcapptivate"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696168066,"creation_date":1695920969,"question_id":77197011,"body_markdown":"*I get this error when calling flow management API in corda 5 `/flow/{{short_hash}}`.*\r\n\r\n&lt;!-- begin snippet: js hide: false console: false babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    {\r\n      &quot;flowStatusResponses&quot;: [\r\n        {\r\n          &quot;holdingIdentityShortHash&quot;: &quot;4558C1BAA9F2&quot;,\r\n          &quot;clientRequestId&quot;: &quot;test-flow-1&quot;,\r\n          &quot;flowId&quot;: &quot;c05a1690-fa8e-46b4-a026-825205f086b5&quot;,\r\n          &quot;flowStatus&quot;: &quot;FAILED&quot;,\r\n          &quot;flowResult&quot;: null,\r\n          &quot;flowError&quot;: {\r\n            &quot;type&quot;: &quot;FLOW_FAILED&quot;,\r\n            &quot;message&quot;: &quot;Execution failed with \\&quot;Failed to create the sandbox: Failed to resolve bundles: javax.activation-api [512], jaxb-api [513], com.opencsv [515]\\&quot; after 5 retry attempts.&quot;\r\n          },\r\n          &quot;timestamp&quot;: &quot;2023-09-28T15:33:14.410Z&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n*Does anyone have any idea what&#39;s happening here? I assumed it should work without having to have to add any additional dependendies.*","title":"Corda 5 Exception","body":"<p><em>I get this error when calling flow management API in corda 5 <code>/flow/{{short_hash}}</code>.</em></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>{\n  \"flowStatusResponses\": [\n    {\n      \"holdingIdentityShortHash\": \"4558C1BAA9F2\",\n      \"clientRequestId\": \"test-flow-1\",\n      \"flowId\": \"c05a1690-fa8e-46b4-a026-825205f086b5\",\n      \"flowStatus\": \"FAILED\",\n      \"flowResult\": null,\n      \"flowError\": {\n        \"type\": \"FLOW_FAILED\",\n        \"message\": \"Execution failed with \\\"Failed to create the sandbox: Failed to resolve bundles: javax.activation-api [512], jaxb-api [513], com.opencsv [515]\\\" after 5 retry attempts.\"\n      },\n      \"timestamp\": \"2023-09-28T15:33:14.410Z\"\n    }\n  ]\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><em>Does anyone have any idea what's happening here? I assumed it should work without having to have to add any additional dependendies.</em></p>\n"},{"tags":["java","oop","interface","abstract-class"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1696169073,"post_id":77210718,"comment_id":136116244,"body_markdown":"*&quot;Can I answer with format like before Java8 and after Java8?&quot;* - Well ... the addition of `default` methods in Java 8 has certainly made a comparison of interfaces and abstract classes more complicated.  So ... yes ... you should include that in ... what you tell your interviewer.  (And of course, that means you need to understand `default` methods and what they bring to Java.)","body":"<i>&quot;Can I answer with format like before Java8 and after Java8?&quot;</i> - Well ... the addition of <code>default</code> methods in Java 8 has certainly made a comparison of interfaces and abstract classes more complicated.  So ... yes ... you should include that in ... what you tell your interviewer.  (And of course, that means you need to understand <code>default</code> methods and what they bring to Java.)"}],"owner":{"account_id":24325927,"reputation":3,"user_id":18265473,"display_name":"Trương C&#244;ng Tr&#236;nh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696167880,"answer_count":0,"score":0,"last_activity_date":1696167817,"creation_date":1696167817,"question_id":77210718,"body_markdown":"What should I answer the question: &quot;What are differences between interfaces and abstract classes in Java?&quot; in the interview? Can I answer with format like before Java8 and after Java8? Please makes sense for me...\r\n\r\n\r\nWhat are differences between interfaces and abstract classes in Java?","title":"Differences between interfaces and abstract classes in Java?","body":"<p>What should I answer the question: &quot;What are differences between interfaces and abstract classes in Java?&quot; in the interview? Can I answer with format like before Java8 and after Java8? Please makes sense for me...</p>\n<p>What are differences between interfaces and abstract classes in Java?</p>\n"},{"tags":["java","spring","jpa"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1621842202,"post_id":67667904,"comment_id":119606705,"body_markdown":"Does this answer your question? [Stream.peek() method in Java 8 vs Java 9](https://stackoverflow.com/questions/48221783/stream-peek-method-in-java-8-vs-java-9)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/48221783/stream-peek-method-in-java-8-vs-java-9\">Stream.peek() method in Java 8 vs Java 9</a>"}],"answers":[{"tags":[],"owner":{"account_id":13222198,"reputation":84,"user_id":9548566,"display_name":"Jatinder"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1696167440,"creation_date":1621839975,"answer_id":67667905,"question_id":67667904,"body_markdown":"After making some changes in code it work as expected on development and production. I just change the object value in the `map()` and return after that collect the object to list using the `Collectors.toList()` method and again use `forEach()` loop and update the entity data. Now code works as expected. \r\n\r\n1st option:\r\n\r\n    public void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\r\n    \t\tList&lt;BusinessQRCode&gt; businessQrCode = qrCodeRepo.findByBusinessId(businessId);\r\n    \t\tbusinessQrCode.stream().map(qr -&gt; {\r\n    \t\t\tqr.setMenuUrl(menuUrl);\r\n    \t\t\tqr.setMenuType(menuType);\r\n    \t\t\treturn qr;\r\n    \t\t}).collect(Collectors.toList())\r\n              .forEach(qr -&gt; qrCodeRepo.save(qr));\r\n    }\r\n\r\n\r\n2nd option: (good than 1st)\r\n\r\n    public void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\r\n        List&lt;BusinessQRCode&gt; businessQrCode = qrCodeRepo.findByBusinessId(businessId).stream().map(qr -&gt; {\r\n        \tqr.setMenuUrl(menuUrl);\r\n        \tqr.setMenuType(menuType);\r\n        \treturn qr;\r\n        }).collect(Collectors.toList()); \r\n        qrCodeRepo.saveAll(businessQrCode);\r\n    \r\n    }","title":"Why does JPA Repository save method does not update entity details on production?","body":"<p>After making some changes in code it work as expected on development and production. I just change the object value in the <code>map()</code> and return after that collect the object to list using the <code>Collectors.toList()</code> method and again use <code>forEach()</code> loop and update the entity data. Now code works as expected.</p>\n<p>1st option:</p>\n<pre><code>public void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\n        List&lt;BusinessQRCode&gt; businessQrCode = qrCodeRepo.findByBusinessId(businessId);\n        businessQrCode.stream().map(qr -&gt; {\n            qr.setMenuUrl(menuUrl);\n            qr.setMenuType(menuType);\n            return qr;\n        }).collect(Collectors.toList())\n          .forEach(qr -&gt; qrCodeRepo.save(qr));\n}\n</code></pre>\n<p>2nd option: (good than 1st)</p>\n<pre><code>public void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\n    List&lt;BusinessQRCode&gt; businessQrCode = qrCodeRepo.findByBusinessId(businessId).stream().map(qr -&gt; {\n        qr.setMenuUrl(menuUrl);\n        qr.setMenuType(menuType);\n        return qr;\n    }).collect(Collectors.toList()); \n    qrCodeRepo.saveAll(businessQrCode);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1621844039,"creation_date":1621842120,"answer_id":67668326,"question_id":67667904,"body_markdown":"The problem is that [`count`](https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#count--) \r\n\r\n&gt;may choose to not execute the stream pipeline (either sequentially or in parallel) if it is capable of computing the count directly from the stream source. In such cases no source elements will be traversed and no intermediate operations will be evaluated. Behavioral parameters with side-effects, which are strongly discouraged except for harmless cases such as debugging, may be affected\r\n\r\nAnd exactly that happens in your case. The solution is to neither use `map` or `count` at all since you do not need / use them for what they are supposed to be used for and instead use a single `forEach` instead:\r\n\r\n    public void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\r\n        List&lt;BusinessQRCode&gt; businessQrCode = qrCodeRepo.findByBusinessId(businessId);\r\n        businessQrCode.stream().forEach(qr -&gt; {\r\n            qr.setMenuUrl(menuUrl);\r\n            qr.setMenuType(menuType);\r\n            qrCodeRepo.save(qr);\r\n        });\r\n    }\r\n\r\nNote that you could just do the exact same thing with a for loop with less calls, same amount of lines and without unnecessarily using streams:\r\n\r\n    public void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\r\n        List&lt;BusinessQRCode&gt; businessQrCode = qrCodeRepo.findByBusinessId(businessId);\r\n        for (BusinessQRCode qr : businessQrCode) {\r\n            qr.setMenuUrl(menuUrl);\r\n            qr.setMenuType(menuType);\r\n            qrCodeRepo.save(qr);\r\n        };\r\n    }\r\n\r\n\r\n","title":"Why does JPA Repository save method does not update entity details on production?","body":"<p>The problem is that <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/Stream.html#count--\" rel=\"nofollow noreferrer\"><code>count</code></a></p>\n<blockquote>\n<p>may choose to not execute the stream pipeline (either sequentially or in parallel) if it is capable of computing the count directly from the stream source. In such cases no source elements will be traversed and no intermediate operations will be evaluated. Behavioral parameters with side-effects, which are strongly discouraged except for harmless cases such as debugging, may be affected</p>\n</blockquote>\n<p>And exactly that happens in your case. The solution is to neither use <code>map</code> or <code>count</code> at all since you do not need / use them for what they are supposed to be used for and instead use a single <code>forEach</code> instead:</p>\n<pre><code>public void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\n    List&lt;BusinessQRCode&gt; businessQrCode = qrCodeRepo.findByBusinessId(businessId);\n    businessQrCode.stream().forEach(qr -&gt; {\n        qr.setMenuUrl(menuUrl);\n        qr.setMenuType(menuType);\n        qrCodeRepo.save(qr);\n    });\n}\n</code></pre>\n<p>Note that you could just do the exact same thing with a for loop with less calls, same amount of lines and without unnecessarily using streams:</p>\n<pre><code>public void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\n    List&lt;BusinessQRCode&gt; businessQrCode = qrCodeRepo.findByBusinessId(businessId);\n    for (BusinessQRCode qr : businessQrCode) {\n        qr.setMenuUrl(menuUrl);\n        qr.setMenuType(menuType);\n        qrCodeRepo.save(qr);\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6937186,"reputation":1164,"user_id":5324721,"display_name":"Kumar Ashutosh"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1621850360,"creation_date":1621850360,"answer_id":67670046,"question_id":67667904,"body_markdown":"just my two cents.\r\n\r\nYou should always return Optional from query results. You may have it as:\r\n\r\n### In repository:\r\n\r\n```java\r\nOptional&lt;List&lt;BusinessQRCode&gt;&gt; findByBusinessId(Long businessId);\r\n```\r\n\r\n### In Service:\r\n\r\n```java\r\npublic void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\r\n\r\n// Fetch iterate, if exist\r\nqrCodeRepo.findByBusinessId(businessId).ifPresent(qrCodes_ -&gt; {\r\n\r\n  qrCodes_.forEach(code_-&gt; {\r\n     qr.setMenuUrl(menuUrl);\r\n     qr.setMenuType(menuType);\r\n  });\r\n\r\n  qrCodeRepo.saveAll(qrCodes_);\r\n\r\n});\r\n\r\n```\r\n\r\nWhy use map when you are returning same qr. You can skip that part and also the collect function. We already have the list of qrCodes, just iterate them and set the values then save all at once.","title":"Why does JPA Repository save method does not update entity details on production?","body":"<p>just my two cents.</p>\n<p>You should always return Optional from query results. You may have it as:</p>\n<h3>In repository:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>Optional&lt;List&lt;BusinessQRCode&gt;&gt; findByBusinessId(Long businessId);\n</code></pre>\n<h3>In Service:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>public void updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\n\n// Fetch iterate, if exist\nqrCodeRepo.findByBusinessId(businessId).ifPresent(qrCodes_ -&gt; {\n\n  qrCodes_.forEach(code_-&gt; {\n     qr.setMenuUrl(menuUrl);\n     qr.setMenuType(menuType);\n  });\n\n  qrCodeRepo.saveAll(qrCodes_);\n\n});\n\n</code></pre>\n<p>Why use map when you are returning same qr. You can skip that part and also the collect function. We already have the list of qrCodes, just iterate them and set the values then save all at once.</p>\n"}],"owner":{"account_id":13222198,"reputation":84,"user_id":9548566,"display_name":"Jatinder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2099,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67670046,"answer_count":3,"score":1,"last_activity_date":1696167440,"creation_date":1621839975,"question_id":67667904,"body_markdown":"I am using spring data JPA I am trying to update the entity using the JPARepository method save() to update the entity details. Code I have written to update the entity works fine in development as expected. But the same code does not work on the production server it does not give any error only the code written inside the map() does not work. Below is my code\r\n\r\n    public Long updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\r\n            return qrCodeRepo.findByBusinessId(businessId).businessQrCode.stream().map(qr -&gt; {\r\n                qr.setMenuUrl(menuUrl);\r\n                qr.setMenuType(menuType);\r\n                return qrCodeRepo.save(qr);\r\n            }).count();\r\n    \r\n        }","title":"Why does JPA Repository save method does not update entity details on production?","body":"<p>I am using spring data JPA I am trying to update the entity using the JPARepository method save() to update the entity details. Code I have written to update the entity works fine in development as expected. But the same code does not work on the production server it does not give any error only the code written inside the map() does not work. Below is my code</p>\n<pre><code>public Long updateQrCodeUrlByBusinessDetails(Long businessId, String menuUrl, MENU_TYPE menuType) {\n        return qrCodeRepo.findByBusinessId(businessId).businessQrCode.stream().map(qr -&gt; {\n            qr.setMenuUrl(menuUrl);\n            qr.setMenuType(menuType);\n            return qrCodeRepo.save(qr);\n        }).count();\n\n    }\n</code></pre>\n"},{"tags":["java","database","graph","nosql"],"answers":[{"tags":[],"owner":{"account_id":121000,"reputation":12426,"user_id":313768,"accept_rate":88,"display_name":"Reinderien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1284741346,"creation_date":1284741346,"answer_id":3737217,"question_id":3735591,"body_markdown":"Why not test out all three and apply a benchmark for your particular data? Otherwise it&#39;s difficult to say which one would perform the fastest.","title":"Open source graph database","body":"<p>Why not test out all three and apply a benchmark for your particular data? Otherwise it's difficult to say which one would perform the fastest.</p>\n"},{"tags":[],"owner":{"account_id":164052,"reputation":805,"user_id":386578,"display_name":"wako"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1284764522,"creation_date":1284764522,"answer_id":3739641,"question_id":3735591,"body_markdown":"I think you can pay attention at [Flockdb][1] too.\r\n\r\n  [1]: http://github.com/twitter/flockdb","title":"Open source graph database","body":"<p>I think you can pay attention at <a href=\"http://github.com/twitter/flockdb\" rel=\"nofollow noreferrer\">Flockdb</a> too.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564351,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1284767485,"creation_date":1284767485,"answer_id":3739799,"question_id":3735591,"body_markdown":"I agree with [@Reinderien][1], you should bench these products. But I would also add [OrientDB][2] in the mix. Quoting its author in [this comment][3]:\r\n\r\n&gt; I&#39;m working to OrientDB. It&#39;s a NoSQL\r\n&gt; hybrid document-graph dbms with\r\n&gt; special operators for graph\r\n&gt; operations. The main difference is\r\n&gt; that you can query it using SQL\r\n&gt; language with some extension like:\r\n&gt; \r\n&gt;     select from People where friends TRAVERSE(1,7) (name = &#39;Ayende&#39; and surname = &#39;Rahien&#39;)\r\n&gt; \r\n&gt; This means get all the people that\r\n&gt; have any relationship of friends with\r\n&gt; you up to the 7th level of separation.\r\n\r\nAccording to its website, the performances looks pretty decent. Worth the look at least.\r\n \r\n  [1]: https://stackoverflow.com/questions/3735591/open-source-graph-database/3737217#3737217\r\n  [2]: http://code.google.com/p/orient/\r\n  [3]: http://ayende.com/Blog/archive/2010/05/06/that-no-sql-thing-graph-databases.aspx#40002","title":"Open source graph database","body":"<p>I agree with <a href=\"https://stackoverflow.com/questions/3735591/open-source-graph-database/3737217#3737217\">@Reinderien</a>, you should bench these products. But I would also add <a href=\"http://code.google.com/p/orient/\" rel=\"nofollow noreferrer\">OrientDB</a> in the mix. Quoting its author in <a href=\"http://ayende.com/Blog/archive/2010/05/06/that-no-sql-thing-graph-databases.aspx#40002\" rel=\"nofollow noreferrer\">this comment</a>:</p>\n\n<blockquote>\n  <p>I'm working to OrientDB. It's a NoSQL\n  hybrid document-graph dbms with\n  special operators for graph\n  operations. The main difference is\n  that you can query it using SQL\n  language with some extension like:</p>\n\n<pre><code>select from People where friends TRAVERSE(1,7) (name = 'Ayende' and surname = 'Rahien')\n</code></pre>\n  \n  <p>This means get all the people that\n  have any relationship of friends with\n  you up to the 7th level of separation.</p>\n</blockquote>\n\n<p>According to its website, the performances looks pretty decent. Worth the look at least.</p>\n"},{"tags":[],"owner":{"account_id":16716,"reputation":4321,"user_id":36710,"display_name":"nawroth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285021358,"creation_date":1285021358,"answer_id":3755947,"question_id":3735591,"body_markdown":"From version 1.1 you can read data without using a transaction in Neo4j. In case you want to read uncommitted data though, you can only do that from inside the same transaction (and obviously need a transaction in the first place). More information on transactions is found in the [Neo4j wiki][1].\r\n\r\n\r\n  [1]: http://wiki.neo4j.org/content/Transactions","title":"Open source graph database","body":"<p>From version 1.1 you can read data without using a transaction in Neo4j. In case you want to read uncommitted data though, you can only do that from inside the same transaction (and obviously need a transaction in the first place). More information on transactions is found in the <a href=\"http://wiki.neo4j.org/content/Transactions\" rel=\"nofollow noreferrer\">Neo4j wiki</a>.</p>\n"},{"tags":[],"owner":{"account_id":183283,"reputation":8938,"user_id":418563,"display_name":"Lvca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1285230114,"creation_date":1285230114,"answer_id":3776517,"question_id":3735591,"body_markdown":"Fortunately there is a common interface for most of them: [Blueprints][1]. On top of it there are a lot of technologies such as the Gremlin language and REST access to the graph. Visit [Tinkerpop][2] to know more.\r\n\r\nAbout benchmarks there is a work-in-progress project called [graphdb-bench][3] (always by Tinkerpop), but AFAIK is in development.\r\n\r\n  [1]: http://wiki.github.com/tinkerpop/blueprints\r\n  [2]: http://www.tinkerpop.com\r\n  [3]: http://github.com/tinkerpop/graphdb-bench","title":"Open source graph database","body":"<p>Fortunately there is a common interface for most of them: <a href=\"http://wiki.github.com/tinkerpop/blueprints\" rel=\"nofollow noreferrer\">Blueprints</a>. On top of it there are a lot of technologies such as the Gremlin language and REST access to the graph. Visit <a href=\"http://www.tinkerpop.com\" rel=\"nofollow noreferrer\">Tinkerpop</a> to know more.</p>\n\n<p>About benchmarks there is a work-in-progress project called <a href=\"http://github.com/tinkerpop/graphdb-bench\" rel=\"nofollow noreferrer\">graphdb-bench</a> (always by Tinkerpop), but AFAIK is in development.</p>\n"},{"tags":[],"owner":{"account_id":15515200,"reputation":121,"user_id":11192950,"display_name":"Eya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559240701,"creation_date":1559240701,"answer_id":56383696,"question_id":3735591,"body_markdown":"I would recommend you to take a look at AgensGraph and its perfomance.  `https://bitnine.net/agensgraph/`\r\n\r\nAgensGraph supports &quot;Shortest path&quot; as well and you can use it easily. ","title":"Open source graph database","body":"<p>I would recommend you to take a look at AgensGraph and its perfomance.  <code>https://bitnine.net/agensgraph/</code></p>\n\n<p>AgensGraph supports \"Shortest path\" as well and you can use it easily. </p>\n"},{"tags":[],"owner":{"account_id":1496632,"reputation":609,"user_id":1402404,"display_name":"Wey Gu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696167344,"creation_date":1632902828,"answer_id":69372661,"question_id":3735591,"body_markdown":"Nebula Graph(0) is Modern, Open Source(1), Scalable(to a huge scale), Performant, you can choose between 3 replicas and 1 replica.\r\nIt supports `FIND PATH`(2)\r\n\r\n(0) https://github.com/vesoft-inc/nebula\r\n\r\n(1) https://github.com/vesoft-inc/nebula#licensing\r\n\r\n(2) https://docs.nebula-graph.io/2.5.1/3.ngql-guide/16.subgraph-and-path/2.find-path/\r\n\r\n\r\n```\r\nnebula&gt; FIND SHORTEST PATH FROM &quot;player102&quot; TO &quot;team204&quot; OVER *;\r\n+--------------------------------------------+\r\n| path                                       |\r\n+--------------------------------------------+\r\n| &lt;(&quot;player102&quot;)-[:serve@0 {}]-&gt;(&quot;team204&quot;)&gt; |\r\n+--------------------------------------------+\r\n```","title":"Open source graph database","body":"<p>Nebula Graph(0) is Modern, Open Source(1), Scalable(to a huge scale), Performant, you can choose between 3 replicas and 1 replica.\nIt supports <code>FIND PATH</code>(2)</p>\n<p>(0) <a href=\"https://github.com/vesoft-inc/nebula\" rel=\"nofollow noreferrer\">https://github.com/vesoft-inc/nebula</a></p>\n<p>(1) <a href=\"https://github.com/vesoft-inc/nebula#licensing\" rel=\"nofollow noreferrer\">https://github.com/vesoft-inc/nebula#licensing</a></p>\n<p>(2) <a href=\"https://docs.nebula-graph.io/2.5.1/3.ngql-guide/16.subgraph-and-path/2.find-path/\" rel=\"nofollow noreferrer\">https://docs.nebula-graph.io/2.5.1/3.ngql-guide/16.subgraph-and-path/2.find-path/</a></p>\n<pre><code>nebula&gt; FIND SHORTEST PATH FROM &quot;player102&quot; TO &quot;team204&quot; OVER *;\n+--------------------------------------------+\n| path                                       |\n+--------------------------------------------+\n| &lt;(&quot;player102&quot;)-[:serve@0 {}]-&gt;(&quot;team204&quot;)&gt; |\n+--------------------------------------------+\n</code></pre>\n"}],"owner":{"account_id":71693,"reputation":14336,"user_id":207335,"accept_rate":75,"display_name":"Boolean"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2377,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":3739799,"answer_count":7,"score":6,"last_activity_date":1696167344,"creation_date":1284729189,"question_id":3735591,"body_markdown":"I need graph database for my project. I want to perform shortest path operation on the graph. I searched google and found neo4j, InfoGrid and sones. I am not sure which one performs the best.\r\n\r\nNeo4j is insisting on transaction for read queries also, so I am worried it will cause delays. I want high performance graph database engine. It will be awesome if it can support shortest path also.\r\n","title":"Open source graph database","body":"<p>I need graph database for my project. I want to perform shortest path operation on the graph. I searched google and found neo4j, InfoGrid and sones. I am not sure which one performs the best.</p>\n\n<p>Neo4j is insisting on transaction for read queries also, so I am worried it will cause delays. I want high performance graph database engine. It will be awesome if it can support shortest path also.</p>\n"},{"tags":["java","amazon-web-services","aws-code-deploy"],"comments":[{"owner":{"account_id":6157899,"reputation":19791,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1696158599,"post_id":77208973,"comment_id":136115271,"body_markdown":"Do you know why Java terminates before `stop_bot.sh` runs to terminate it?","body":"Do you know why Java terminates before <code>stop_bot.sh</code> runs to terminate it?"},{"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"score":0,"creation_date":1696159555,"post_id":77208973,"comment_id":136115353,"body_markdown":"@ErmiyaEskandary does it?","body":"@ErmiyaEskandary does it?"},{"owner":{"account_id":6157899,"reputation":19791,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":1,"creation_date":1696159799,"post_id":77208973,"comment_id":136115378,"body_markdown":"&#39;Script - stop_bot.sh [stderr]java: no process found&#39; - meaning Java has already terminated so `killall` can&#39;t find a process to kill, which then makes your script fail. You can make it just do a simple if check to see if it&#39;s still running but not sure what you&#39;re expecting here without more info on the bot. Did you copy paste the command in `start_bot.sh` from somewhere?","body":"&#39;Script - stop_bot.sh [stderr]java: no process found&#39; - meaning Java has already terminated so <code>killall</code> can&#39;t find a process to kill, which then makes your script fail. You can make it just do a simple if check to see if it&#39;s still running but not sure what you&#39;re expecting here without more info on the bot. Did you copy paste the command in <code>start_bot.sh</code> from somewhere?"},{"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"score":0,"creation_date":1696167351,"post_id":77208973,"comment_id":136116044,"body_markdown":"@ErmiyaEskandary indeed the problem was in stop_bot.sh, I posted more detailed answer below","body":"@ErmiyaEskandary indeed the problem was in stop_bot.sh, I posted more detailed answer below"},{"owner":{"account_id":6157899,"reputation":19791,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":1,"creation_date":1696167420,"post_id":77208973,"comment_id":136116051,"body_markdown":"Glad you got it sorted but FYI it&#39;s usually good SO etiquette to allow the person who answered your question, to answer the question. All good in this case but just for future questions :)","body":"Glad you got it sorted but FYI it&#39;s usually good SO etiquette to allow the person who answered your question, to answer the question. All good in this case but just for future questions :)"}],"answers":[{"tags":[],"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696167329,"creation_date":1696167329,"answer_id":77210684,"question_id":77208973,"body_markdown":"It seems like my stop_bot.sh fails when no Java processes are running and on the first deployment after installing CodeDeploy, it isn&#39;t running ApplicationStop and that&#39;s why it succeeds.\r\n\r\nI replaced my stop_bot.sh script with this: \r\n\r\n```sh\r\n#!/bin/bash\r\n\r\n# Check if any Java processes are running\r\njava_pids=$(pgrep java)\r\n\r\nif [ -n &quot;$java_pids&quot; ]; then\r\n  # Stop all Java processes\r\n  for pid in $java_pids; do\r\n    kill -9 &quot;$pid&quot;\r\n    echo &quot;Java process stopped (PID: $pid)&quot;\r\n  done\r\nelse\r\n  echo &quot;No Java processes found&quot;\r\nfi\r\n```\r\n\r\nand start_bot.sh with this:\r\n\r\n```sh\r\nnohup java -jar /tmp/DuoCord-0.1.jar dev.rifaii.Main\r\n```\r\n\r\nThis fixed the issue","title":"CodeDeploy succeeds only once","body":"<p>It seems like my stop_bot.sh fails when no Java processes are running and on the first deployment after installing CodeDeploy, it isn't running ApplicationStop and that's why it succeeds.</p>\n<p>I replaced my stop_bot.sh script with this:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\n# Check if any Java processes are running\njava_pids=$(pgrep java)\n\nif [ -n &quot;$java_pids&quot; ]; then\n  # Stop all Java processes\n  for pid in $java_pids; do\n    kill -9 &quot;$pid&quot;\n    echo &quot;Java process stopped (PID: $pid)&quot;\n  done\nelse\n  echo &quot;No Java processes found&quot;\nfi\n</code></pre>\n<p>and start_bot.sh with this:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>nohup java -jar /tmp/DuoCord-0.1.jar dev.rifaii.Main\n</code></pre>\n<p>This fixed the issue</p>\n"}],"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696167329,"creation_date":1696125159,"question_id":77208973,"body_markdown":"I&#39;m trying to deploy a Discord bot written in Java on an AWS EC2 instance using CodeDeploy.\r\n\r\nI installed the CodeDeploy agent and tried deploying and it worked fine. However, when I tried deploying again I got this error: \r\n\r\n&gt; The overall deployment failed because too many individual instances failed deployment, too few healthy instances are available for deployment, or some instances in your deployment group are experiencing problems.\r\n\r\nWhen I check event logs it&#39;s failing on the first step `ApplicationStop`\r\n\r\n```\r\nLifecycleEvent - ApplicationStop\r\nScript - stop_bot.sh\r\n[stderr]java: no process found\r\n```\r\n\r\nHere&#39;s my appspec.yml:\r\n\r\n```yml\r\nversion: 0.0\r\nos: linux\r\nfiles:\r\n  - source: /DuoCord-0.1.jar\r\n    destination: /tmp\r\nhooks:\r\n  ApplicationStart:\r\n    - location: start_bot.sh\r\n      timeout: 300\r\n      runas: root\r\n  ApplicationStop:\r\n    - location: stop_bot.sh\r\n      timeout: 300\r\n      runas: root\r\n```\r\n\r\nstart_bot.sh:\r\n\r\n```sh\r\nnohup java -jar /tmp/DuoCord-0.1.jar dev.rifaii.Main /dev/null 2&gt; /dev/null &lt; /dev/null &amp;\r\n```\r\n\r\nstop_bot.sh:\r\n\r\n```sh\r\nkillall -9 java\r\n```\r\n\r\nI tried uninstalling the codedeploy-agent and installing it again and the deployment worked, but again on the second attempt it gave the same error","title":"CodeDeploy succeeds only once","body":"<p>I'm trying to deploy a Discord bot written in Java on an AWS EC2 instance using CodeDeploy.</p>\n<p>I installed the CodeDeploy agent and tried deploying and it worked fine. However, when I tried deploying again I got this error:</p>\n<blockquote>\n<p>The overall deployment failed because too many individual instances failed deployment, too few healthy instances are available for deployment, or some instances in your deployment group are experiencing problems.</p>\n</blockquote>\n<p>When I check event logs it's failing on the first step <code>ApplicationStop</code></p>\n<pre><code>LifecycleEvent - ApplicationStop\nScript - stop_bot.sh\n[stderr]java: no process found\n</code></pre>\n<p>Here's my appspec.yml:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>version: 0.0\nos: linux\nfiles:\n  - source: /DuoCord-0.1.jar\n    destination: /tmp\nhooks:\n  ApplicationStart:\n    - location: start_bot.sh\n      timeout: 300\n      runas: root\n  ApplicationStop:\n    - location: stop_bot.sh\n      timeout: 300\n      runas: root\n</code></pre>\n<p>start_bot.sh:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>nohup java -jar /tmp/DuoCord-0.1.jar dev.rifaii.Main /dev/null 2&gt; /dev/null &lt; /dev/null &amp;\n</code></pre>\n<p>stop_bot.sh:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>killall -9 java\n</code></pre>\n<p>I tried uninstalling the codedeploy-agent and installing it again and the deployment worked, but again on the second attempt it gave the same error</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696142759,"post_id":77209487,"comment_id":136114020,"body_markdown":"What exactly do you want that line to do?","body":"What exactly do you want that line to do?"},{"owner":{"account_id":29176547,"reputation":1,"user_id":22351690,"display_name":"Lawrence Mavhaire"},"score":0,"creation_date":1696142867,"post_id":77209487,"comment_id":136114022,"body_markdown":"to ignore lower case of the check letter on the ID number","body":"to ignore lower case of the check letter on the ID number"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696143584,"post_id":77209487,"comment_id":136114068,"body_markdown":"and only the third to last character is relevant? Also, why are you not using `String#contains`?","body":"and only the third to last character is relevant? Also, why are you not using <code>String#contains</code>?"},{"owner":{"account_id":29176547,"reputation":1,"user_id":22351690,"display_name":"Lawrence Mavhaire"},"score":0,"creation_date":1696144849,"post_id":77209487,"comment_id":136114151,"body_markdown":"how can i do that? I tried converting that Character to upper case but the output would be false","body":"how can i do that? I tried converting that Character to upper case but the output would be false"},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1696145453,"post_id":77209487,"comment_id":136114195,"body_markdown":"Learn how to format code in your Question. I fixed this code this time.","body":"Learn how to format code in your Question. I fixed this code this time."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1696145619,"post_id":77209487,"comment_id":136114206,"body_markdown":"No, it sounds like you want to pay attention to lowercase, not ignore it. Your Question is poorly worded. Do you want to accept lowercase inputs or do you want to forbid lowercase inputs?","body":"No, it sounds like you want to pay attention to lowercase, not ignore it. Your Question is poorly worded. Do you want to accept lowercase inputs or do you want to forbid lowercase inputs?"},{"owner":{"account_id":1692034,"reputation":3195,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1696145713,"post_id":77209487,"comment_id":136114215,"body_markdown":"`equalsIgnoreCase()` is not defined for `char` – how does you code compile when you remove the commenting from the that line starting with `//idNumber.charAt(9) …`?","body":"<code>equalsIgnoreCase()</code> is not defined for <code>char</code> – how does you code compile when you remove the commenting from the that line starting with <code>&#47;&#47;idNumber.charAt(9) …</code>?"}],"answers":[{"tags":[],"owner":{"account_id":29515674,"reputation":1,"user_id":22619681,"display_name":"Ramin Gahramanzada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696167158,"creation_date":1696146945,"answer_id":77209658,"question_id":77209487,"body_markdown":"To achieve this, you can convert both the actual check letter and the expected check letter to uppercase and then compare them. Here&#39;s the modified code:\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class ValidateID {\r\n\r\n    public static boolean validID(String idNumber) {\r\n\r\n        idNumber = idNumber.replaceAll(&quot;[^\\\\dABCDEFGHIJKLMNOPQRSTVWXYZ]&quot;, &quot;&quot;);\r\n        if (idNumber.length() != 12) {\r\n            return false;\r\n        }\r\n        for (int i = 0; i &lt; 9; i++) {\r\n            if (!Character.isDigit(idNumber.charAt(i))) {\r\n                return false;\r\n            }\r\n        }        \r\n        int remainder = Integer.parseInt(idNumber.substring(0, 9)) % 23;\r\n        char expectedCheckLetter = &quot;ABCDEFGHJKLMNPQRSTVWXYZ&quot;.charAt(remainder - 1);\r\n\r\n        char actualCheckLetter = idNumber.charAt(idNumber.length() - 1);\r\n\r\n        // Convert both letters to uppercase and compare them\r\n        if (Character.toUpperCase(actualCheckLetter) != Character.toUpperCase(expectedCheckLetter)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.println(&quot;Enter your ID number : &quot;);\r\n        String idNumber = scanner.nextLine();\r\n\r\n        if (validID(idNumber)) {\r\n            System.out.println(&quot;Your ID number is valid&quot;);\r\n        } else {\r\n            System.out.println(&quot;Invalid ID&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"how to use java eqaulsIgnoreCase() method","body":"<p>To achieve this, you can convert both the actual check letter and the expected check letter to uppercase and then compare them. Here's the modified code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class ValidateID {\n\n    public static boolean validID(String idNumber) {\n\n        idNumber = idNumber.replaceAll(&quot;[^\\\\dABCDEFGHIJKLMNOPQRSTVWXYZ]&quot;, &quot;&quot;);\n        if (idNumber.length() != 12) {\n            return false;\n        }\n        for (int i = 0; i &lt; 9; i++) {\n            if (!Character.isDigit(idNumber.charAt(i))) {\n                return false;\n            }\n        }        \n        int remainder = Integer.parseInt(idNumber.substring(0, 9)) % 23;\n        char expectedCheckLetter = &quot;ABCDEFGHJKLMNPQRSTVWXYZ&quot;.charAt(remainder - 1);\n\n        char actualCheckLetter = idNumber.charAt(idNumber.length() - 1);\n\n        // Convert both letters to uppercase and compare them\n        if (Character.toUpperCase(actualCheckLetter) != Character.toUpperCase(expectedCheckLetter)) {\n            return false;\n        }\n        return true;\n    }\n\n    public static void main(String[] args) {\n\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(&quot;Enter your ID number : &quot;);\n        String idNumber = scanner.nextLine();\n\n        if (validID(idNumber)) {\n            System.out.println(&quot;Your ID number is valid&quot;);\n        } else {\n            System.out.println(&quot;Invalid ID&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696151283,"creation_date":1696148869,"answer_id":77209753,"question_id":77209487,"body_markdown":"## Opposite of `equalsIgnoreCase`\r\n\r\nYou asked about the [`String#equalsIgnoreCase`][1] method. \r\n\r\nBut your prose suggests that you want the opposite. You do not want to *ignore* [case][2], you want to pay attention to case. You want to reject lowercase characters while accepting uppercase letters. \r\n\r\n\r\n## Requirements\r\n\r\nYour Question is unclear, but it seems you want to verify that the tenth of 12 characters of input is an uppercase Basic Latin letter (A-Z) while the rest are Basic Latin digits (0-9). (&lt;-- Notice how simply a requirement can be stated.)\r\n\r\n## Avoid `char`\r\n\r\nAvoid using `char`, as that type has been essentially broken since Java 2 and legacy since Java 5. As a 16-bit value, `char` type is physically incapable of representing most characters. \r\n\r\n## Code points\r\n\r\nInstead, make a habit of using [Unicode code point][3] integers when working with individual characters. \r\n\r\n## `switch` in modern Java\r\n\r\nIn modern Java, we can use a `switch` to test for a series of values. We want to loop on all the code points, and for each zero-based position number (an index) we check to see if that code point represents a digit or an uppercase letter.\r\n\r\n## Example code (first draft)\r\n\r\n```java\r\npackage work.basil.example;\r\n\r\npublic class ValidateId\r\n{\r\n    private static long EXPECTED_LENGTH = 12;\r\n\r\n    public static boolean isValidId ( final String proposedId )\r\n    {\r\n        if ( ! ( proposedId.codePoints ( ).count ( ) == ValidateId.EXPECTED_LENGTH ) )\r\n        {\r\n            return false;\r\n        }\r\n        int[] codePoints = proposedId.codePoints ( ).toArray ( );\r\n        for ( int index = 0 ; index &lt; codePoints.length ; index++ )\r\n        {\r\n            int codePoint = codePoints[ index ];\r\n            switch ( index )\r\n            {\r\n                case 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 10 , 11 -&gt;\r\n                {\r\n                    if ( ! Character.isDigit ( codePoint ) )\r\n                    {\r\n                        return false;\r\n                    }\r\n                }\r\n                case 9 -&gt;\r\n                {\r\n                    if ( ! Character.isUpperCase ( codePoint ) )\r\n                    {\r\n                        return false;\r\n                    }\r\n                }\r\n                default -&gt; throw new IllegalStateException ( &quot;Unexpected index: &quot; + index );\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nExercise that code:\r\n\r\n```java\r\nSystem.out.println ( &quot;2x2081811D13&quot; + &quot; = &quot; +  ValidateId.isValidId ( &quot;2x2081811D13&quot; ) );  // BAD: 2nd character (index 1) is a letter, not a digit.\r\nSystem.out.println ( &quot;292081811d13&quot; + &quot; = &quot; +  ValidateId.isValidId ( &quot;292081811d13&quot; ) );  // BAD: 10th character (index 9) is lowercase.\r\nSystem.out.println ( &quot;292081811D13&quot; + &quot; = &quot; +  ValidateId.isValidId ( &quot;292081811D13&quot; ) );  // GOOD.\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\n2x2081811D13 = false\r\n292081811d13 = false\r\n292081811D13 = true\r\n```\r\n\r\n## Basic Latin\r\n\r\nThat code might be good enough. But that code is not perfect. That code ignores the [*Basic Latin*][4] restriction. Other characters beyond  Basic Latin can [also be a digit][5], and others can be an uppercase letter. So strictly speaking, we should check that all the code points are equal to or below 122, the code point for `z`. We can add a simple test near the top for that.\r\n\r\n## Example code (second draft)\r\n\r\nAlso, we can replace the `!` at the front with `!=` in the test.\r\n\r\nFor brevity, we could collapse the `if` statements.\r\n\r\n```java\r\npackage work.basil.example;\r\n\r\npublic class ValidateId\r\n{\r\n    private static long EXPECTED_LENGTH = 12;\r\n    private static long LAST_CODE_POINT_OF_INTEREST = &quot;z&quot;.codePointAt ( 0 ); // 122 = code point of `z`.\r\n\r\n    public static boolean isValidId ( final String proposedId )\r\n    {\r\n        if ( proposedId.codePoints ( ).count ( ) != ValidateId.EXPECTED_LENGTH ) return false;\r\n        if ( proposedId.codePoints ( ).filter ( ( int codePoint ) -&gt; codePoint &gt; LAST_CODE_POINT_OF_INTEREST ).count ( ) != 0 ) return false;\r\n        int[] codePoints = proposedId.codePoints ( ).toArray ( );\r\n        for ( int index = 0 ; index &lt; codePoints.length ; index++ )\r\n        {\r\n            int codePoint = codePoints[ index ];\r\n            switch ( index )\r\n            {\r\n                case 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 10 , 11 -&gt;\r\n                {\r\n                    if ( ! Character.isDigit ( codePoint ) ) return false;\r\n                }\r\n                case 9 -&gt;\r\n                {\r\n                    if ( ! Character.isUpperCase ( codePoint ) ) return false;\r\n                }\r\n                default -&gt; throw new IllegalStateException ( &quot;Unexpected index: &quot; + index );\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nWe need to add another test. This extra test case has a THAI DIGIT ONE in the 2nd position. That character passes the `Character.isDigit` check, but will flunk our new check for any code points above 122. \r\n\r\n```java\r\nSystem.out.println ( &quot;2x2081811D13&quot; + &quot; = &quot; + ValidateId.isValidId ( &quot;2x2081811D13&quot; ) );  // BAD: 2nd character (index 1) is a letter, not a digit.\r\nSystem.out.println ( &quot;292081811d13&quot; + &quot; = &quot; + ValidateId.isValidId ( &quot;292081811d13&quot; ) );  // BAD: 10th character (index 9) is lowercase.\r\nSystem.out.println ( &quot;2๑2081811D13&quot; + &quot; = &quot; + ValidateId.isValidId ( &quot;2๑2081811D13&quot; ) );  // BAD: 2nd character (index 1) has a digit but is outside of Basic Latin: THAI DIGIT ONE.\r\nSystem.out.println ( &quot;292081811D13&quot; + &quot; = &quot; + ValidateId.isValidId ( &quot;292081811D13&quot; ) );  // GOOD.\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\n2x2081811D13 = false\r\n292081811d13 = false\r\n2๑2081811D13 = false\r\n292081811D13 = true\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#equalsIgnoreCase(java.lang.String)\r\n  [2]: https://en.wikipedia.org/wiki/Letter_case\r\n  [3]: https://en.wikipedia.org/wiki/List_of_Unicode_characters\r\n  [4]: https://en.wikipedia.org/wiki/Basic_Latin_(Unicode_block)\r\n  [5]: https://www.fileformat.info/info/unicode/category/Nd/list.htm","title":"how to use java eqaulsIgnoreCase() method","body":"<h2>Opposite of <code>equalsIgnoreCase</code></h2>\n<p>You asked about the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#equalsIgnoreCase(java.lang.String)\" rel=\"nofollow noreferrer\"><code>String#equalsIgnoreCase</code></a> method.</p>\n<p>But your prose suggests that you want the opposite. You do not want to <em>ignore</em> <a href=\"https://en.wikipedia.org/wiki/Letter_case\" rel=\"nofollow noreferrer\">case</a>, you want to pay attention to case. You want to reject lowercase characters while accepting uppercase letters.</p>\n<h2>Requirements</h2>\n<p>Your Question is unclear, but it seems you want to verify that the tenth of 12 characters of input is an uppercase Basic Latin letter (A-Z) while the rest are Basic Latin digits (0-9). (&lt;-- Notice how simply a requirement can be stated.)</p>\n<h2>Avoid <code>char</code></h2>\n<p>Avoid using <code>char</code>, as that type has been essentially broken since Java 2 and legacy since Java 5. As a 16-bit value, <code>char</code> type is physically incapable of representing most characters.</p>\n<h2>Code points</h2>\n<p>Instead, make a habit of using <a href=\"https://en.wikipedia.org/wiki/List_of_Unicode_characters\" rel=\"nofollow noreferrer\">Unicode code point</a> integers when working with individual characters.</p>\n<h2><code>switch</code> in modern Java</h2>\n<p>In modern Java, we can use a <code>switch</code> to test for a series of values. We want to loop on all the code points, and for each zero-based position number (an index) we check to see if that code point represents a digit or an uppercase letter.</p>\n<h2>Example code (first draft)</h2>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example;\n\npublic class ValidateId\n{\n    private static long EXPECTED_LENGTH = 12;\n\n    public static boolean isValidId ( final String proposedId )\n    {\n        if ( ! ( proposedId.codePoints ( ).count ( ) == ValidateId.EXPECTED_LENGTH ) )\n        {\n            return false;\n        }\n        int[] codePoints = proposedId.codePoints ( ).toArray ( );\n        for ( int index = 0 ; index &lt; codePoints.length ; index++ )\n        {\n            int codePoint = codePoints[ index ];\n            switch ( index )\n            {\n                case 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 10 , 11 -&gt;\n                {\n                    if ( ! Character.isDigit ( codePoint ) )\n                    {\n                        return false;\n                    }\n                }\n                case 9 -&gt;\n                {\n                    if ( ! Character.isUpperCase ( codePoint ) )\n                    {\n                        return false;\n                    }\n                }\n                default -&gt; throw new IllegalStateException ( &quot;Unexpected index: &quot; + index );\n            }\n        }\n        return true;\n    }\n}\n</code></pre>\n<p>Exercise that code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;2x2081811D13&quot; + &quot; = &quot; +  ValidateId.isValidId ( &quot;2x2081811D13&quot; ) );  // BAD: 2nd character (index 1) is a letter, not a digit.\nSystem.out.println ( &quot;292081811d13&quot; + &quot; = &quot; +  ValidateId.isValidId ( &quot;292081811d13&quot; ) );  // BAD: 10th character (index 9) is lowercase.\nSystem.out.println ( &quot;292081811D13&quot; + &quot; = &quot; +  ValidateId.isValidId ( &quot;292081811D13&quot; ) );  // GOOD.\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2x2081811D13 = false\n292081811d13 = false\n292081811D13 = true\n</code></pre>\n<h2>Basic Latin</h2>\n<p>That code might be good enough. But that code is not perfect. That code ignores the <a href=\"https://en.wikipedia.org/wiki/Basic_Latin_(Unicode_block)\" rel=\"nofollow noreferrer\"><em>Basic Latin</em></a> restriction. Other characters beyond  Basic Latin can <a href=\"https://www.fileformat.info/info/unicode/category/Nd/list.htm\" rel=\"nofollow noreferrer\">also be a digit</a>, and others can be an uppercase letter. So strictly speaking, we should check that all the code points are equal to or below 122, the code point for <code>z</code>. We can add a simple test near the top for that.</p>\n<h2>Example code (second draft)</h2>\n<p>Also, we can replace the <code>!</code> at the front with <code>!=</code> in the test.</p>\n<p>For brevity, we could collapse the <code>if</code> statements.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example;\n\npublic class ValidateId\n{\n    private static long EXPECTED_LENGTH = 12;\n    private static long LAST_CODE_POINT_OF_INTEREST = &quot;z&quot;.codePointAt ( 0 ); // 122 = code point of `z`.\n\n    public static boolean isValidId ( final String proposedId )\n    {\n        if ( proposedId.codePoints ( ).count ( ) != ValidateId.EXPECTED_LENGTH ) return false;\n        if ( proposedId.codePoints ( ).filter ( ( int codePoint ) -&gt; codePoint &gt; LAST_CODE_POINT_OF_INTEREST ).count ( ) != 0 ) return false;\n        int[] codePoints = proposedId.codePoints ( ).toArray ( );\n        for ( int index = 0 ; index &lt; codePoints.length ; index++ )\n        {\n            int codePoint = codePoints[ index ];\n            switch ( index )\n            {\n                case 0 , 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 10 , 11 -&gt;\n                {\n                    if ( ! Character.isDigit ( codePoint ) ) return false;\n                }\n                case 9 -&gt;\n                {\n                    if ( ! Character.isUpperCase ( codePoint ) ) return false;\n                }\n                default -&gt; throw new IllegalStateException ( &quot;Unexpected index: &quot; + index );\n            }\n        }\n        return true;\n    }\n}\n</code></pre>\n<p>We need to add another test. This extra test case has a THAI DIGIT ONE in the 2nd position. That character passes the <code>Character.isDigit</code> check, but will flunk our new check for any code points above 122.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;2x2081811D13&quot; + &quot; = &quot; + ValidateId.isValidId ( &quot;2x2081811D13&quot; ) );  // BAD: 2nd character (index 1) is a letter, not a digit.\nSystem.out.println ( &quot;292081811d13&quot; + &quot; = &quot; + ValidateId.isValidId ( &quot;292081811d13&quot; ) );  // BAD: 10th character (index 9) is lowercase.\nSystem.out.println ( &quot;2๑2081811D13&quot; + &quot; = &quot; + ValidateId.isValidId ( &quot;2๑2081811D13&quot; ) );  // BAD: 2nd character (index 1) has a digit but is outside of Basic Latin: THAI DIGIT ONE.\nSystem.out.println ( &quot;292081811D13&quot; + &quot; = &quot; + ValidateId.isValidId ( &quot;292081811D13&quot; ) );  // GOOD.\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2x2081811D13 = false\n292081811d13 = false\n2๑2081811D13 = false\n292081811D13 = true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696165286,"creation_date":1696164203,"answer_id":77210518,"question_id":77209487,"body_markdown":"To validate the **ID** string you may be able to use something simple like this (read comments in code):\r\n\r\n    public static boolean isValidID(String idNumber) { \r\n        /* Auto-Convert any lowercase alpha characters \r\n           (in this use-case, one) to uppercase:    */ \r\n        idNumber = idNumber.toUpperCase(); \r\n        /* Use the String#matches() method with a Regular Expression\r\n           to validate the supplied ID string. It will return true if\r\n           the ID string matches the regex or, false if not.      */\r\n        return (idNumber.matches(&quot;^\\\\d{9}[A-Z]{1}\\\\d{2}$&quot;)); \r\n    }\r\n\r\nThe [Regular Expression](https://www.vogella.com/tutorials/JavaRegularExpressions/article.html) (regex) passed to the [String#matches()](https://www.tutorialspoint.com/java/java_string_matches.htm) method does the following:\r\n\r\n - `^` Asserts position at start of a line;\r\n - `\\\\d{9}` Does the ID string start with **9** digits (each **digit** from **0** to **9**);\r\n - `[A-Z]{1}` After the **9** digits is there a single (one) uppercase alpha letter character (**A** to **Z**);\r\n - `\\\\d{2}` After the alpha character, are there two (2) more digits\r\n   (each **digit** from **0** to **9**);\r\n - `$` Asserts position at the end of a line.\r\n\r\nThe ID string conversion to uppercase should really be done before it is passed to the `isValidID()` method so that it is already modified before further use. If done this way, then *there is no need* for the conversion *within* the `isValidID()` method:\r\n\r\n    // Get ID:\r\n    String idNumber = &quot;292081811d13&quot;;\r\n    idNumber = idNumber.toUpperCase();\r\n    if (!isValidID(idNumber) {\r\n        System.out.println(&quot;ID is Invalid! (&quot; + idNumber + &quot;)&quot;);\r\n        // return - exit - whatever\r\n    }\r\n    System.out.println(&quot;The supplied ID (&quot; + idNumber + &quot;) is Valid!&quot;);","title":"how to use java eqaulsIgnoreCase() method","body":"<p>To validate the <strong>ID</strong> string you may be able to use something simple like this (read comments in code):</p>\n<pre><code>public static boolean isValidID(String idNumber) { \n    /* Auto-Convert any lowercase alpha characters \n       (in this use-case, one) to uppercase:    */ \n    idNumber = idNumber.toUpperCase(); \n    /* Use the String#matches() method with a Regular Expression\n       to validate the supplied ID string. It will return true if\n       the ID string matches the regex or, false if not.      */\n    return (idNumber.matches(&quot;^\\\\d{9}[A-Z]{1}\\\\d{2}$&quot;)); \n}\n</code></pre>\n<p>The <a href=\"https://www.vogella.com/tutorials/JavaRegularExpressions/article.html\" rel=\"nofollow noreferrer\">Regular Expression</a> (regex) passed to the <a href=\"https://www.tutorialspoint.com/java/java_string_matches.htm\" rel=\"nofollow noreferrer\">String#matches()</a> method does the following:</p>\n<ul>\n<li><code>^</code> Asserts position at start of a line;</li>\n<li><code>\\\\d{9}</code> Does the ID string start with <strong>9</strong> digits (each <strong>digit</strong> from <strong>0</strong> to <strong>9</strong>);</li>\n<li><code>[A-Z]{1}</code> After the <strong>9</strong> digits is there a single (one) uppercase alpha letter character (<strong>A</strong> to <strong>Z</strong>);</li>\n<li><code>\\\\d{2}</code> After the alpha character, are there two (2) more digits\n(each <strong>digit</strong> from <strong>0</strong> to <strong>9</strong>);</li>\n<li><code>$</code> Asserts position at the end of a line.</li>\n</ul>\n<p>The ID string conversion to uppercase should really be done before it is passed to the <code>isValidID()</code> method so that it is already modified before further use. If done this way, then <em>there is no need</em> for the conversion <em>within</em> the <code>isValidID()</code> method:</p>\n<pre><code>// Get ID:\nString idNumber = &quot;292081811d13&quot;;\nidNumber = idNumber.toUpperCase();\nif (!isValidID(idNumber) {\n    System.out.println(&quot;ID is Invalid! (&quot; + idNumber + &quot;)&quot;);\n    // return - exit - whatever\n}\nSystem.out.println(&quot;The supplied ID (&quot; + idNumber + &quot;) is Valid!&quot;);\n</code></pre>\n"}],"owner":{"account_id":29176547,"reputation":1,"user_id":22351690,"display_name":"Lawrence Mavhaire"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1696167158,"creation_date":1696142607,"question_id":77209487,"body_markdown":"Am trying to use the IgnoreCase method in java\r\n\r\nI want to write code that validates ID number like 292081811D13 but the when you enter lower case &#39;d&#39; the results is false:\r\n\r\n```java\r\nimport\tjava.util.*;\r\n\r\npublic class ValidateID{\r\n\r\n\tpublic static boolean validID(String idNumber){\r\n\t\tidNumber = idNumber.replaceAll(&quot;[^\\\\dABCDEFGHIJKLMNOPQRSTVWXYZ]&quot;, &quot;&quot;);\r\n\t\tif(idNumber.length()!= 12 ){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfor(int i = 0; i &lt; 9; i++){\r\n\t\t\tif(!Character.isDigit(idNumber.charAt(i))){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tint remainder = Integer.parseInt(idNumber.substring(0,9)) % 23;\r\n\t\tchar expectedCheckLetter = &quot;ABCDEFGHJKLMNPQRSTVWXYZ&quot;.charAt(remainder-1);\r\n\t\t//idNumber.charAt(9).equalsIgnoreCase(expectedCheckLetter);\r\n\r\n\t\tif(Character.toUpperCase(idNumber.charAt(idNumber.length() - 3)) != expectedCheckLetter){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Enter your ID number : &quot;);\r\n\t\tString idNumber = scanner.nextLine();\r\n\r\n\t\tif(validID(idNumber)){\t\r\n\t\t\tSystem.out.println(&quot;Your ID number is valid&quot;);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;invalid ID&quot;);\r\n\t\t}\r\n\t}\r\n} \r\n```\r\n\r\n","title":"how to use java eqaulsIgnoreCase() method","body":"<p>Am trying to use the IgnoreCase method in java</p>\n<p>I want to write code that validates ID number like 292081811D13 but the when you enter lower case 'd' the results is false:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import  java.util.*;\n\npublic class ValidateID{\n\n    public static boolean validID(String idNumber){\n        idNumber = idNumber.replaceAll(&quot;[^\\\\dABCDEFGHIJKLMNOPQRSTVWXYZ]&quot;, &quot;&quot;);\n        if(idNumber.length()!= 12 ){\n            return false;\n        }\n\n        for(int i = 0; i &lt; 9; i++){\n            if(!Character.isDigit(idNumber.charAt(i))){\n                return false;\n            }\n        }\n        int remainder = Integer.parseInt(idNumber.substring(0,9)) % 23;\n        char expectedCheckLetter = &quot;ABCDEFGHJKLMNPQRSTVWXYZ&quot;.charAt(remainder-1);\n        //idNumber.charAt(9).equalsIgnoreCase(expectedCheckLetter);\n\n        if(Character.toUpperCase(idNumber.charAt(idNumber.length() - 3)) != expectedCheckLetter){\n            return false;\n        }\n        return true;\n    }\n\n    public static void main(String[] args) {\n\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(&quot;Enter your ID number : &quot;);\n        String idNumber = scanner.nextLine();\n\n        if(validID(idNumber)){  \n            System.out.println(&quot;Your ID number is valid&quot;);\n        } else {\n            System.out.println(&quot;invalid ID&quot;);\n        }\n    }\n} \n</code></pre>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":3318964,"reputation":1068,"user_id":2790577,"accept_rate":30,"display_name":"basiclawe"},"score":1,"creation_date":1696113674,"post_id":77208514,"comment_id":136112626,"body_markdown":"Please provide 1) your library file (pom.xml, gradle…) 2) Please edit your code area by adding the java import.","body":"Please provide 1) your library file (pom.xml, gradle…) 2) Please edit your code area by adding the java import."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1696162374,"post_id":77208514,"comment_id":136115585,"body_markdown":"You need to explicitly enable batch consumer factory.","body":"You need to explicitly enable batch consumer factory."}],"answers":[{"tags":[],"owner":{"account_id":7120972,"reputation":68,"user_id":5445608,"display_name":"Silvio Papa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696166932,"creation_date":1696115740,"answer_id":77208728,"question_id":77208514,"body_markdown":"Please give more details, but for now try to change your code to consume `ConsumerRecord` and not List.\r\n\r\n```java\r\n@KafkaListener(topics = {&quot;journal-topic1&quot;})\r\npublic void message(ConsumerRecord&lt;String, String&gt; record) {\r\n    //Process\r\n}\r\n```\r\n\r\nor else if you want to consumer entire batch of consumer records view there :\r\n\r\n[*Kafka listener receiving List&lt;ConsumerRecord&lt;String, String&gt;&gt;, is it possible to consume?*][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54361329/kafka-listener-receiving-listconsumerrecordstring-string-is-it-possible-to","title":"Spring Boot and @KafkaListener","body":"<p>Please give more details, but for now try to change your code to consume <code>ConsumerRecord</code> and not List.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@KafkaListener(topics = {&quot;journal-topic1&quot;})\npublic void message(ConsumerRecord&lt;String, String&gt; record) {\n    //Process\n}\n</code></pre>\n<p>or else if you want to consumer entire batch of consumer records view there :</p>\n<p><a href=\"https://stackoverflow.com/questions/54361329/kafka-listener-receiving-listconsumerrecordstring-string-is-it-possible-to\"><em>Kafka listener receiving List&lt;ConsumerRecord&lt;String, String&gt;&gt;, is it possible to consume?</em></a></p>\n"}],"owner":{"account_id":11210679,"reputation":1241,"user_id":8224838,"display_name":"AntonBoarf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696166932,"creation_date":1696109349,"question_id":77208514,"body_markdown":"I&#39;m using Spring Boot 2.7 with Kafka integration for consuming records.\r\n\r\nHere&#39;s my listener, very simple :\r\n\r\n    @KafkaListener(topics = {&quot;journal-topic1&quot;})\r\n    public void onMessage(List&lt;ConsumerRecord&lt;String, String&gt;&gt; records) {\r\n        //processing\r\n    }\r\n\r\nMy problem is : I don&#39;t get `List&lt;ConsumerRecord&lt;String, String&gt;&gt;` but a list of my values : `List&lt;String&gt;`\r\n\r\nHere is my config :\r\n\r\n    spring:\r\n      kafka:\r\n        topic: &quot;journal-topic1&quot;\r\n        properties:\r\n          auto-create-topics-enable: true\r\n        consumer:\r\n          bootstrap-servers: localhost:9092\r\n          group-id: &quot;journal-group1&quot;\r\n          key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n          value-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n          auto-offset-reset: latest\r\n        admin:\r\n          properties:\r\n            bootstrap-servers: localhost:9092","title":"Spring Boot and @KafkaListener","body":"<p>I'm using Spring Boot 2.7 with Kafka integration for consuming records.</p>\n<p>Here's my listener, very simple :</p>\n<pre><code>@KafkaListener(topics = {&quot;journal-topic1&quot;})\npublic void onMessage(List&lt;ConsumerRecord&lt;String, String&gt;&gt; records) {\n    //processing\n}\n</code></pre>\n<p>My problem is : I don't get <code>List&lt;ConsumerRecord&lt;String, String&gt;&gt;</code> but a list of my values : <code>List&lt;String&gt;</code></p>\n<p>Here is my config :</p>\n<pre><code>spring:\n  kafka:\n    topic: &quot;journal-topic1&quot;\n    properties:\n      auto-create-topics-enable: true\n    consumer:\n      bootstrap-servers: localhost:9092\n      group-id: &quot;journal-group1&quot;\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\n      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer\n      auto-offset-reset: latest\n    admin:\n      properties:\n        bootstrap-servers: localhost:9092\n</code></pre>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":2,"creation_date":1696154854,"post_id":77209983,"comment_id":136114944,"body_markdown":"U and V are used, together they specify edges and the edges matter because they change the shape of the tree. Your code essentially assumes that the tree is a linked list, but in general it has a different shape.","body":"U and V are used, together they specify edges and the edges matter because they change the shape of the tree. Your code essentially assumes that the tree is a linked list, but in general it has a different shape."},{"owner":{"account_id":17772156,"reputation":362,"user_id":12905411,"display_name":"technotigr"},"score":0,"creation_date":1696155273,"post_id":77209983,"comment_id":136114982,"body_markdown":"@harold, for example 1 explanation, I see that all possible sub pairs are used like `(1,2), (1,3), (1,4)` then (2,3),(2,4), then `(3,4)` Im not clear how U and V used here.","body":"@harold, for example 1 explanation, I see that all possible sub pairs are used like <code>(1,2), (1,3), (1,4)</code> then (2,3),(2,4), then <code>(3,4)</code> Im not clear how U and V used here."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1696155398,"post_id":77209983,"comment_id":136114992,"body_markdown":"Take care of java naming conventions. Variables should start with lowercase character.","body":"Take care of java naming conventions. Variables should start with lowercase character."}],"answers":[{"tags":[],"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696156742,"creation_date":1696156742,"answer_id":77210120,"question_id":77209983,"body_markdown":"As mentioned in comments, In your approach, you used two nested loops to iterate over all pairs of vertices, but this approach does not take into account the ***tree structure*** and the paths between vertices. It calculates the sum of all pairwise differences without considering the paths in the tree.\r\n\r\nTo correctly solve this problem, you need to perform a ***depth-first traversal*** to calculate the sum of differences along the paths from each vertex to all other vertices.\r\n\r\nSpecifically, you need to maintain the following information at each node:\r\n\r\n 1. The sum of all values in the subtree rooted at that node.\r\n 2. The maximum value in the subtree rooted at that node.\r\n 3. The minimum value in the subtree rooted at that node.\r\n 4. The number of nodes in the subtree rooted at that node.\r\n\r\nWith this information, you can compute the difference D(i, j) between the maximum and minimum values along the path from node i to node j efficiently.\r\n\r\nIn Java, you can define a ***TreeNode*** class to represent the tree structure and a ***sumOfDifferences*** method to calculate the sum of differences between the maximum and minimum values on all paths in the tree. The ***dfs*** method performs a depth-first traversal of the tree and computes the required statistics.The main idea is that the dfs method ***recursively*** calculates the sum of differences along all paths from the current vertex *u* to its descendants in the subtree, considering the values assigned to each vertex. The sum is accumulated and returned for each vertex, and the final result is the sum of all such values for all vertices in the tree.\r\n\r\nHere&#39;s the java example that I worked with:\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nclass TreeNode {\r\n    int value;\r\n    List&lt;TreeNode&gt; children;\r\n\r\n    public TreeNode(int value) {\r\n        this.value = value;\r\n        this.children = new ArrayList&lt;&gt;();\r\n    }\r\n}\r\n\r\npublic class TreeDifferenceSum {\r\n    public static void main(String[] args) {\r\n        // Example usage:\r\n        TreeNode root = new TreeNode(201338);\r\n        TreeNode node1 = new TreeNode(761471);\r\n        TreeNode node2 = new TreeNode(227682);\r\n        TreeNode node3 = new TreeNode(627276);\r\n        TreeNode node4 = new TreeNode(432478);\r\n\r\n        root.children.add(node1);\r\n        root.children.add(node2);\r\n        root.children.add(node3);\r\n        root.children.add(node4);\r\n\r\n        TreeNode node5 = new TreeNode(761471);\r\n        node1.children.add(node5);\r\n\r\n        TreeNode node6 = new TreeNode(432478);\r\n        node4.children.add(node6);\r\n\r\n        long result = sumOfDifferences(root);\r\n        System.out.println(result);  // Output: 4231495\r\n    }\r\n\r\n    public static long sumOfDifferences(TreeNode root) {\r\n        long[] result = new long[1];\r\n        dfs(root, result);\r\n        return result[0];\r\n    }\r\n\r\n    public static long[] dfs(TreeNode node, long[] result) {\r\n        int max = node.value;\r\n        int min = node.value;\r\n        int sum = node.value;\r\n        int count = 1;\r\n\r\n        for (TreeNode child : node.children) {\r\n            long[] childStats = dfs(child, result);\r\n            max = Math.max(max, childStats[0]);\r\n            min = Math.min(min, childStats[1]);\r\n            sum += childStats[2];\r\n            count += childStats[3];\r\n        }\r\n\r\n        result[0] += (long) count * node.value - sum + (max - min);\r\n        return new long[]{max, min, sum, count};\r\n    }\r\n}\r\n\r\n```\r\n\r\nFeel free to ask any further question if you need more explanation.\r\n\r\nGood luck!","title":"Disjoint sets find the sum","body":"<p>As mentioned in comments, In your approach, you used two nested loops to iterate over all pairs of vertices, but this approach does not take into account the <em><strong>tree structure</strong></em> and the paths between vertices. It calculates the sum of all pairwise differences without considering the paths in the tree.</p>\n<p>To correctly solve this problem, you need to perform a <em><strong>depth-first traversal</strong></em> to calculate the sum of differences along the paths from each vertex to all other vertices.</p>\n<p>Specifically, you need to maintain the following information at each node:</p>\n<ol>\n<li>The sum of all values in the subtree rooted at that node.</li>\n<li>The maximum value in the subtree rooted at that node.</li>\n<li>The minimum value in the subtree rooted at that node.</li>\n<li>The number of nodes in the subtree rooted at that node.</li>\n</ol>\n<p>With this information, you can compute the difference D(i, j) between the maximum and minimum values along the path from node i to node j efficiently.</p>\n<p>In Java, you can define a <em><strong>TreeNode</strong></em> class to represent the tree structure and a <em><strong>sumOfDifferences</strong></em> method to calculate the sum of differences between the maximum and minimum values on all paths in the tree. The <em><strong>dfs</strong></em> method performs a depth-first traversal of the tree and computes the required statistics.The main idea is that the dfs method <em><strong>recursively</strong></em> calculates the sum of differences along all paths from the current vertex <em>u</em> to its descendants in the subtree, considering the values assigned to each vertex. The sum is accumulated and returned for each vertex, and the final result is the sum of all such values for all vertices in the tree.</p>\n<p>Here's the java example that I worked with:</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nclass TreeNode {\n    int value;\n    List&lt;TreeNode&gt; children;\n\n    public TreeNode(int value) {\n        this.value = value;\n        this.children = new ArrayList&lt;&gt;();\n    }\n}\n\npublic class TreeDifferenceSum {\n    public static void main(String[] args) {\n        // Example usage:\n        TreeNode root = new TreeNode(201338);\n        TreeNode node1 = new TreeNode(761471);\n        TreeNode node2 = new TreeNode(227682);\n        TreeNode node3 = new TreeNode(627276);\n        TreeNode node4 = new TreeNode(432478);\n\n        root.children.add(node1);\n        root.children.add(node2);\n        root.children.add(node3);\n        root.children.add(node4);\n\n        TreeNode node5 = new TreeNode(761471);\n        node1.children.add(node5);\n\n        TreeNode node6 = new TreeNode(432478);\n        node4.children.add(node6);\n\n        long result = sumOfDifferences(root);\n        System.out.println(result);  // Output: 4231495\n    }\n\n    public static long sumOfDifferences(TreeNode root) {\n        long[] result = new long[1];\n        dfs(root, result);\n        return result[0];\n    }\n\n    public static long[] dfs(TreeNode node, long[] result) {\n        int max = node.value;\n        int min = node.value;\n        int sum = node.value;\n        int count = 1;\n\n        for (TreeNode child : node.children) {\n            long[] childStats = dfs(child, result);\n            max = Math.max(max, childStats[0]);\n            min = Math.min(min, childStats[1]);\n            sum += childStats[2];\n            count += childStats[3];\n        }\n\n        result[0] += (long) count * node.value - sum + (max - min);\n        return new long[]{max, min, sum, count};\n    }\n}\n\n</code></pre>\n<p>Feel free to ask any further question if you need more explanation.</p>\n<p>Good luck!</p>\n"},{"tags":[],"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696165402,"creation_date":1696165402,"answer_id":77210579,"question_id":77209983,"body_markdown":"This problem has an O(n log n) solution using a [disjoint set data structure][1], which is probably why the words &quot;disjoint set&quot; appear in the title.\r\n\r\nFirst, though, we need to reframe the problem.\r\n\r\nImagine that we iterate through all simple paths in the tree, and in each path we find the max `A[i]` and the min `A[j]`, and then add `A[i]-A[j]` to our running sum...\r\n\r\nThe end result is that each `A[i]` will be added some number of times to the sum, and this number is the number of paths in which `A[i]` is maximum.  Similarly each `A[j]` will be subtracted a number of times equal to the number of paths in which it is the minimum.\r\n\r\nWe can calculate these multiples for every vertex in a much faster way, allowing us to find the sum much more quickly.\r\n\r\nFirst we will calculate the number of times that each `A[i]` is added and the sum of all those additions.  Remove all the edges from the tree, so that all the vertices are disconnected.  Sort the vertices by their weights in `A`, and iterate through the vertices in ascending weight order.  For each vertex `i`:\r\n\r\n - Add the edges containing vertex `i` to the tree.\r\n - Each edge we add will connect `i` to a different connected component.\r\n - These edges will create new paths, and vertex `i` will have the maximum `A[i]` in ALL of these paths, because we&#39;re walking them in sorted order.\r\n - If we keep track of the size of each connected component, then as we connect them together, we can calculate the number of new paths created `n` and add `n*A[i]` to our total.\r\n\r\nTo calculate the total of all subtractions, we use exactly the same procedure, except that we iterate the vertices in *descending* weight order, so that each vertex will be the minimum in all paths that it creates.\r\n\r\nThe disjoint set data structure can be used to keep track of the sizes of all the connected components.  Just use union by size instead of rank, make a set for each vertex, and union sets adjacent to each edge.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Disjoint-set_data_structure","title":"Disjoint sets find the sum","body":"<p>This problem has an O(n log n) solution using a <a href=\"https://en.wikipedia.org/wiki/Disjoint-set_data_structure\" rel=\"nofollow noreferrer\">disjoint set data structure</a>, which is probably why the words &quot;disjoint set&quot; appear in the title.</p>\n<p>First, though, we need to reframe the problem.</p>\n<p>Imagine that we iterate through all simple paths in the tree, and in each path we find the max <code>A[i]</code> and the min <code>A[j]</code>, and then add <code>A[i]-A[j]</code> to our running sum...</p>\n<p>The end result is that each <code>A[i]</code> will be added some number of times to the sum, and this number is the number of paths in which <code>A[i]</code> is maximum.  Similarly each <code>A[j]</code> will be subtracted a number of times equal to the number of paths in which it is the minimum.</p>\n<p>We can calculate these multiples for every vertex in a much faster way, allowing us to find the sum much more quickly.</p>\n<p>First we will calculate the number of times that each <code>A[i]</code> is added and the sum of all those additions.  Remove all the edges from the tree, so that all the vertices are disconnected.  Sort the vertices by their weights in <code>A</code>, and iterate through the vertices in ascending weight order.  For each vertex <code>i</code>:</p>\n<ul>\n<li>Add the edges containing vertex <code>i</code> to the tree.</li>\n<li>Each edge we add will connect <code>i</code> to a different connected component.</li>\n<li>These edges will create new paths, and vertex <code>i</code> will have the maximum <code>A[i]</code> in ALL of these paths, because we're walking them in sorted order.</li>\n<li>If we keep track of the size of each connected component, then as we connect them together, we can calculate the number of new paths created <code>n</code> and add <code>n*A[i]</code> to our total.</li>\n</ul>\n<p>To calculate the total of all subtractions, we use exactly the same procedure, except that we iterate the vertices in <em>descending</em> weight order, so that each vertex will be the minimum in all paths that it creates.</p>\n<p>The disjoint set data structure can be used to keep track of the sizes of all the connected components.  Just use union by size instead of rank, make a set for each vertex, and union sets adjacent to each edge.</p>\n"}],"owner":{"account_id":17772156,"reputation":362,"user_id":12905411,"display_name":"technotigr"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696165402,"creation_date":1696154285,"question_id":77209983,"body_markdown":"Disjoint Sets: A tree that consists of N vertices is given. On each node/vertex, a number is written. The number written on each node/vertex is given in the form of an array A where A[i] will be the number written on the ith node.\r\n\r\nLet&#39;s denote a function D(a,b) as the difference between the maximum and minimum value of A[i] on a simple path connecting vertices A and B.\r\n\r\nFind the sum of all D(i,j) where 1 &lt;= i &lt;= N and i&lt;=j&lt;=N.\r\n\r\nInput Format:\r\nThe first line of input contains an integer N denoting the number of vertices in the tree.\r\n\r\nThe second line of input contains N integers A1, A2,......AN denoting the number is written on the vertices. \r\n\r\nNext N-1 lines contain two vertices U and V denoting an edge connecting vertex U and vertex V.\r\n\r\n**Example 1:**\r\n\r\n    4  --denotes N\r\n    2 2 3 1 --denotes N integers\r\n    1 2  --denotes two vertices U and V\r\n    1 3  --denotes two vertices U and V\r\n    1 4  --denotes two vertices U and V﻿\r\n\r\n**Constraints**\r\n\r\n    1 &lt;= N &lt;= 1000000.\r\n    1 &lt;= A[i] &lt;= 1000000.\r\n    1 &lt;= U,V &lt;= N.\r\n\r\n**Output Format**\r\n\r\n    The output contains a single integer denoting the sum of all D(i,j) where 1 &lt;= i &lt;= N and i&lt;=j&lt;=N.\r\n\r\n**Sample Output**\r\n\r\n    6\r\n\r\n**Explanation**\r\n\r\n    D(1,2)=2-2=0\r\n    D(1,3)=3-2=1 D(1,4)=2-1-1\r\n    D(2,3)=3-2=1\r\n    D(2,4)=2-1=1\r\n    D(3,4)=3-1=2\r\n    Sum: 1+1+1+1+2 = 6.\r\n\r\nHere is my code:\r\n\r\nBased on the above example, I am not clear what is the purpose of U and V arrays as they are not used for calculating the result. So I have come up with the below code using A array itself:\r\n\r\n    public long solve(int[] A, int[] U, int[] V) {\r\n    \tint n = A.length;\r\n    \tint result = 0;\r\n    \tfor(int i=0; i&lt;n; i++) {\r\n    \t\tint a1 = A[i];\r\n    \t\tfor(int j=i; j&lt;n; j++) {\r\n    \t\t\tint a2 = A[j];\r\n    \t\t\tresult += Math.abs(a1 - a2);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThis code works for the above sample input. But getting the wrong output for the below test cases:\r\n\r\n**Example 2:**\r\n\r\n    5\r\n    201338 761471 227682 627276 432478\r\n    1 4\r\n    3 4\r\n    4 2\r\n    2 5\r\n\r\n**Expected Output**\r\n\r\n    4231495\r\n\r\n**My code Output:** \r\n﻿\r\n\r\n    3039720\r\n\r\n**Example 3:**\r\n\r\n    6\r\n    292534 971348 841318 313729 754982 262031\r\n    1 4\r\n    1 2\r\n    1 6\r\n    5 6\r\n    2 3\r\n\r\n**Expected Output**\r\n\r\n    7264803\r\n\r\n**My output:**\r\n\r\n    5634190\r\n\r\nWhat is the correct approach to solve this problem?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Disjoint sets find the sum","body":"<p>Disjoint Sets: A tree that consists of N vertices is given. On each node/vertex, a number is written. The number written on each node/vertex is given in the form of an array A where A[i] will be the number written on the ith node.</p>\n<p>Let's denote a function D(a,b) as the difference between the maximum and minimum value of A[i] on a simple path connecting vertices A and B.</p>\n<p>Find the sum of all D(i,j) where 1 &lt;= i &lt;= N and i&lt;=j&lt;=N.</p>\n<p>Input Format:\nThe first line of input contains an integer N denoting the number of vertices in the tree.</p>\n<p>The second line of input contains N integers A1, A2,......AN denoting the number is written on the vertices.</p>\n<p>Next N-1 lines contain two vertices U and V denoting an edge connecting vertex U and vertex V.</p>\n<p><strong>Example 1:</strong></p>\n<pre><code>4  --denotes N\n2 2 3 1 --denotes N integers\n1 2  --denotes two vertices U and V\n1 3  --denotes two vertices U and V\n1 4  --denotes two vertices U and V﻿\n</code></pre>\n<p><strong>Constraints</strong></p>\n<pre><code>1 &lt;= N &lt;= 1000000.\n1 &lt;= A[i] &lt;= 1000000.\n1 &lt;= U,V &lt;= N.\n</code></pre>\n<p><strong>Output Format</strong></p>\n<pre><code>The output contains a single integer denoting the sum of all D(i,j) where 1 &lt;= i &lt;= N and i&lt;=j&lt;=N.\n</code></pre>\n<p><strong>Sample Output</strong></p>\n<pre><code>6\n</code></pre>\n<p><strong>Explanation</strong></p>\n<pre><code>D(1,2)=2-2=0\nD(1,3)=3-2=1 D(1,4)=2-1-1\nD(2,3)=3-2=1\nD(2,4)=2-1=1\nD(3,4)=3-1=2\nSum: 1+1+1+1+2 = 6.\n</code></pre>\n<p>Here is my code:</p>\n<p>Based on the above example, I am not clear what is the purpose of U and V arrays as they are not used for calculating the result. So I have come up with the below code using A array itself:</p>\n<pre><code>public long solve(int[] A, int[] U, int[] V) {\n    int n = A.length;\n    int result = 0;\n    for(int i=0; i&lt;n; i++) {\n        int a1 = A[i];\n        for(int j=i; j&lt;n; j++) {\n            int a2 = A[j];\n            result += Math.abs(a1 - a2);\n        }\n    }\n}\n</code></pre>\n<p>This code works for the above sample input. But getting the wrong output for the below test cases:</p>\n<p><strong>Example 2:</strong></p>\n<pre><code>5\n201338 761471 227682 627276 432478\n1 4\n3 4\n4 2\n2 5\n</code></pre>\n<p><strong>Expected Output</strong></p>\n<pre><code>4231495\n</code></pre>\n<p><strong>My code Output:</strong>\n﻿</p>\n<pre><code>3039720\n</code></pre>\n<p><strong>Example 3:</strong></p>\n<pre><code>6\n292534 971348 841318 313729 754982 262031\n1 4\n1 2\n1 6\n5 6\n2 3\n</code></pre>\n<p><strong>Expected Output</strong></p>\n<pre><code>7264803\n</code></pre>\n<p><strong>My output:</strong></p>\n<pre><code>5634190\n</code></pre>\n<p>What is the correct approach to solve this problem?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":22025312,"reputation":11,"user_id":16293419,"display_name":"Jagan Tirumalai"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1624409863,"creation_date":1624409863,"answer_id":68092285,"question_id":68088980,"body_markdown":"Try this site\r\n\r\nhttps://jar-download.com/artifacts/javax.xml.ws/jaxws-api/2.3.1/source-code\r\n\r\nDownload the jaxws-api.jar and add it to your lib folder. Then try to run...","title":"ClassNotFoundException: javax.xml.ws.Service","body":"<p>Try this site</p>\n<p><a href=\"https://jar-download.com/artifacts/javax.xml.ws/jaxws-api/2.3.1/source-code\" rel=\"nofollow noreferrer\">https://jar-download.com/artifacts/javax.xml.ws/jaxws-api/2.3.1/source-code</a></p>\n<p>Download the jaxws-api.jar and add it to your lib folder. Then try to run...</p>\n"}],"owner":{"account_id":14251413,"reputation":97,"user_id":10294967,"display_name":"Juanma Perez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9042,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1696165395,"creation_date":1624386147,"question_id":68088980,"body_markdown":"I am updating my multi-module spring boot app from Java 8 to Java 11, when I compile and run I have the next error:\r\n\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean \r\n    with name &#39;useCaseConfiguration&#39;: Unsatisfied dependency expressed through field &#39;recordRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;recordRepositoryAdapter&#39; defined in class path resource [com/grupoasv/ifuner/configuration/RepositoryAdapterConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.grupoasv.ifuner.core.application.boundary.repository.IRecordRepository]: Factory method &#39;recordRepositoryAdapter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/ws/Service\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:598)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:376)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1404)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:860)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1204)\r\n\tat com.grupoasv.ifuner.IfunerApplication.main(IfunerApplication.java:14)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;recordRepositoryAdapter&#39; defined in class path resource [com/grupoasv/ifuner/configuration/RepositoryAdapterConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.grupoasv.ifuner.core.application.boundary.repository.IRecordRepository]: Factory method &#39;recordRepositoryAdapter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/ws/Service\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1320)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1159)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1271)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1191)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:595)\r\n\t... 19 common frames omitted\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.grupoasv.ifuner.core.application.boundary.repository.IRecordRepository]: Factory method &#39;recordRepositoryAdapter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/ws/Service\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\r\n\t... 32 common frames omitted\r\n    Caused by: java.lang.NoClassDefFoundError: javax/xml/ws/Service\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\r\n\tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:800)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:698)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621)\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\tat com.grupoasv.ifuner.configuration.RepositoryAdapterConfiguration.recordRepositoryAdapter(RepositoryAdapterConfiguration.java:457)\r\n\tat com.grupoasv.ifuner.configuration.RepositoryAdapterConfiguration$$EnhancerBySpringCGLIB$$80ba45a9.CGLIB$recordRepositoryAdapter$33(&lt;generated&gt;)\r\n\tat com.grupoasv.ifuner.configuration.RepositoryAdapterConfiguration$$EnhancerBySpringCGLIB$$80ba45a9$$FastClassBySpringCGLIB$$ddd4bcbb.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\r\n\tat com.grupoasv.ifuner.configuration.RepositoryAdapterConfiguration$$EnhancerBySpringCGLIB$$80ba45a9.recordRepositoryAdapter(&lt;generated&gt;)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n\t... 33 common frames omitted\r\n    Caused by: java.lang.ClassNotFoundException: javax.xml.ws.Service\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\t... 53 common frames omitted\r\n\r\n    Process finished with exit code 1\r\n\r\n\r\nI try with adding this dependencies:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd many more dependencies, I think that is something relationship with JavaEE modules and Corba by Java 11 update, but I try other answers on stack overflow, but nothing works, any idea? \r\n","title":"ClassNotFoundException: javax.xml.ws.Service","body":"<p>I am updating my multi-module spring boot app from Java 8 to Java 11, when I compile and run I have the next error:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean \nwith name 'useCaseConfiguration': Unsatisfied dependency expressed through field 'recordRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'recordRepositoryAdapter' defined in class path resource [com/grupoasv/ifuner/configuration/RepositoryAdapterConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.grupoasv.ifuner.core.application.boundary.repository.IRecordRepository]: Factory method 'recordRepositoryAdapter' threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/ws/Service\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:598)\nat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:376)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1404)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:860)\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:744)\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:391)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1204)\nat com.grupoasv.ifuner.IfunerApplication.main(IfunerApplication.java:14)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'recordRepositoryAdapter' defined in class path resource [com/grupoasv/ifuner/configuration/RepositoryAdapterConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.grupoasv.ifuner.core.application.boundary.repository.IRecordRepository]: Factory method 'recordRepositoryAdapter' threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/ws/Service\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1320)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1159)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1271)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1191)\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:595)\n... 19 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.grupoasv.ifuner.core.application.boundary.repository.IRecordRepository]: Factory method 'recordRepositoryAdapter' threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/ws/Service\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622)\n... 32 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: javax/xml/ws/Service\nat java.base/java.lang.ClassLoader.defineClass1(Native Method)\nat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\nat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174)\nat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:800)\nat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:698)\nat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621)\nat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579)\nat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\nat com.grupoasv.ifuner.configuration.RepositoryAdapterConfiguration.recordRepositoryAdapter(RepositoryAdapterConfiguration.java:457)\nat com.grupoasv.ifuner.configuration.RepositoryAdapterConfiguration$$EnhancerBySpringCGLIB$$80ba45a9.CGLIB$recordRepositoryAdapter$33(&lt;generated&gt;)\nat com.grupoasv.ifuner.configuration.RepositoryAdapterConfiguration$$EnhancerBySpringCGLIB$$80ba45a9$$FastClassBySpringCGLIB$$ddd4bcbb.invoke(&lt;generated&gt;)\nat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\nat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363)\nat com.grupoasv.ifuner.configuration.RepositoryAdapterConfiguration$$EnhancerBySpringCGLIB$$80ba45a9.recordRepositoryAdapter(&lt;generated&gt;)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n... 33 common frames omitted\nCaused by: java.lang.ClassNotFoundException: javax.xml.ws.Service\nat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\nat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n... 53 common frames omitted\n\nProcess finished with exit code 1\n</code></pre>\n<p>I try with adding this dependencies:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And many more dependencies, I think that is something relationship with JavaEE modules and Corba by Java 11 update, but I try other answers on stack overflow, but nothing works, any idea?</p>\n"},{"tags":["java","spring","postgresql","spring-data"],"comments":[{"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"score":0,"creation_date":1696165427,"post_id":77210557,"comment_id":136115857,"body_markdown":"Did you get it? https://stackoverflow.com/questions/61033132/migrating-from-java-8-to-java-11-not-able-to-load-jdk-internal-util-class-java","body":"Did you get it? <a href=\"https://stackoverflow.com/questions/61033132/migrating-from-java-8-to-java-11-not-able-to-load-jdk-internal-util-class-java\" title=\"migrating from java 8 to java 11 not able to load jdk internal util class java\">stackoverflow.com/questions/61033132/&hellip;</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1696168169,"post_id":77210557,"comment_id":136116142,"body_markdown":"That Holger&#39;s comment in ^^^ implies that the problem is most likely due to instrumentation (or similar) going wrong.  (I looked at the code for `ArraysSupport` and I concur with what he said.)  On that basis, you should be checking that your Spring dependencies have consistent version numbers and they are all compatible with Java 11.  Likewise for your application&#39;s other dependencies.  My guess is that you have picked up a version of the `javassist` JAR (or similar) that is not compatible with your JVM,","body":"That Holger&#39;s comment in ^^^ implies that the problem is most likely due to instrumentation (or similar) going wrong.  (I looked at the code for <code>ArraysSupport</code> and I concur with what he said.)  On that basis, you should be checking that your Spring dependencies have consistent version numbers and they are all compatible with Java 11.  Likewise for your application&#39;s other dependencies.  My guess is that you have picked up a version of the <code>javassist</code> JAR (or similar) that is not compatible with your JVM,"}],"owner":{"account_id":29574530,"reputation":1,"user_id":22665860,"display_name":"Lex Parser"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696166243,"answer_count":0,"score":0,"last_activity_date":1696164991,"creation_date":1696164991,"question_id":77210557,"body_markdown":"When I carefully removed part on functionality, I faced this error.\r\nI don&#39;t change anything in area there error is thrown. JDK distrib changes can&#39;t help (and I don&#39;t migrate from 8, stay only on 11). \r\n\r\nPart of log that I can show you:\r\n\r\n```\r\njava.lang.NoClassDefFoundError: Could not initialize class jdk.internal.util.ArraysSupport\r\n\tat java.util.Arrays.equals(Arrays.java:2873) ~[?:?]\r\n\tat sun.security.util.ObjectIdentifier.equals(ObjectIdentifier.java:381) ~[?:?]\r\n\tat sun.security.x509.AlgorithmId.derEncode(AlgorithmId.java:213) ~[?:?]\r\n\tat sun.security.x509.AlgorithmId.encode(AlgorithmId.java:158) ~[?:?]\r\n\tat sun.security.x509.X509Key.encode(X509Key.java:471) ~[?:?]\r\n\tat sun.security.x509.X509Key.buildX509Key(X509Key.java:214) ~[?:?]\r\n\tat sun.security.x509.X509Key.parse(X509Key.java:170) ~[?:?]\r\n\tat sun.security.x509.CertificateX509Key.&lt;init&gt;(CertificateX509Key.java:75) ~[?:?]\r\n\tat sun.security.x509.X509CertInfo.parse(X509CertInfo.java:674) ~[?:?]\r\n\tat sun.security.x509.X509CertInfo.&lt;init&gt;(X509CertInfo.java:169) ~[?:?]\r\n\tat sun.security.x509.X509CertImpl.parse(X509CertImpl.java:1842) ~[?:?]\r\n\tat sun.security.x509.X509CertImpl.&lt;init&gt;(X509CertImpl.java:194) ~[?:?]\r\n\tat sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:105) ~[?:?]\r\n\tat java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:355) ~[?:?]\r\n\tat sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:435) ~[?:?]\r\n\tat sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:369) ~[?:?]\r\n\tat sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[?:?]\r\n\tat sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443) ~[?:?]\r\n\tat sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:421) ~[?:?]\r\n\tat sun.security.ssl.TransportContext.dispatch(TransportContext.java:182) ~[?:?]\r\n\tat sun.security.ssl.SSLTransport.decode(SSLTransport.java:172) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1426) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1336) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:450) ~[?:?]\r\n\tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:421) ~[?:?]\r\n\tat org.postgresql.ssl.MakeSSL.convert(MakeSSL.java:40) ~[postgresql-42.2.6.jar:42.2.6]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:441) ~[postgresql-42.2.6.jar:42.2.6]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:94) ~[postgresql-42.2.6.jar:42.2.6]\r\n\tat org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:192) ~[postgresql-42.2.6.jar:42.2.6]\r\n\tat org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49) ~[postgresql-42.2.6.jar:42.2.6]\r\n\tat org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:195) ~[postgresql-42.2.6.jar:42.2.6]\r\n\tat org.postgresql.Driver.makeConnection(Driver.java:458) ~[postgresql-42.2.6.jar:42.2.6]\r\n\tat org.postgresql.Driver.connect(Driver.java:260) ~[postgresql-42.2.6.jar:42.2.6]\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:677) ~[java.sql:?]\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:189) ~[java.sql:?]\r\n\tat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:155) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:146) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:205) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.datasource.SingleConnectionDataSource.initConnection(SingleConnectionDataSource.java:224) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.datasource.SingleConnectionDataSource.getConnection(SingleConnectionDataSource.java:164) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:376) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:465) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:475) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:508) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:515) ~[spring-jdbc-5.3.12.jar:5.3.12]\r\n```","title":"Could not initialize class jdk.internal.util.ArraysSupport","body":"<p>When I carefully removed part on functionality, I faced this error.\nI don't change anything in area there error is thrown. JDK distrib changes can't help (and I don't migrate from 8, stay only on 11).</p>\n<p>Part of log that I can show you:</p>\n<pre><code>java.lang.NoClassDefFoundError: Could not initialize class jdk.internal.util.ArraysSupport\n    at java.util.Arrays.equals(Arrays.java:2873) ~[?:?]\n    at sun.security.util.ObjectIdentifier.equals(ObjectIdentifier.java:381) ~[?:?]\n    at sun.security.x509.AlgorithmId.derEncode(AlgorithmId.java:213) ~[?:?]\n    at sun.security.x509.AlgorithmId.encode(AlgorithmId.java:158) ~[?:?]\n    at sun.security.x509.X509Key.encode(X509Key.java:471) ~[?:?]\n    at sun.security.x509.X509Key.buildX509Key(X509Key.java:214) ~[?:?]\n    at sun.security.x509.X509Key.parse(X509Key.java:170) ~[?:?]\n    at sun.security.x509.CertificateX509Key.&lt;init&gt;(CertificateX509Key.java:75) ~[?:?]\n    at sun.security.x509.X509CertInfo.parse(X509CertInfo.java:674) ~[?:?]\n    at sun.security.x509.X509CertInfo.&lt;init&gt;(X509CertInfo.java:169) ~[?:?]\n    at sun.security.x509.X509CertImpl.parse(X509CertImpl.java:1842) ~[?:?]\n    at sun.security.x509.X509CertImpl.&lt;init&gt;(X509CertImpl.java:194) ~[?:?]\n    at sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:105) ~[?:?]\n    at java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:355) ~[?:?]\n    at sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:435) ~[?:?]\n    at sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:369) ~[?:?]\n    at sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392) ~[?:?]\n    at sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443) ~[?:?]\n    at sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:421) ~[?:?]\n    at sun.security.ssl.TransportContext.dispatch(TransportContext.java:182) ~[?:?]\n    at sun.security.ssl.SSLTransport.decode(SSLTransport.java:172) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1426) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1336) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:450) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:421) ~[?:?]\n    at org.postgresql.ssl.MakeSSL.convert(MakeSSL.java:40) ~[postgresql-42.2.6.jar:42.2.6]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.enableSSL(ConnectionFactoryImpl.java:441) ~[postgresql-42.2.6.jar:42.2.6]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:94) ~[postgresql-42.2.6.jar:42.2.6]\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:192) ~[postgresql-42.2.6.jar:42.2.6]\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49) ~[postgresql-42.2.6.jar:42.2.6]\n    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:195) ~[postgresql-42.2.6.jar:42.2.6]\n    at org.postgresql.Driver.makeConnection(Driver.java:458) ~[postgresql-42.2.6.jar:42.2.6]\n    at org.postgresql.Driver.connect(Driver.java:260) ~[postgresql-42.2.6.jar:42.2.6]\n    at java.sql.DriverManager.getConnection(DriverManager.java:677) ~[java.sql:?]\n    at java.sql.DriverManager.getConnection(DriverManager.java:189) ~[java.sql:?]\n    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:155) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:146) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:205) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.datasource.SingleConnectionDataSource.initConnection(SingleConnectionDataSource.java:224) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.datasource.SingleConnectionDataSource.getConnection(SingleConnectionDataSource.java:164) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:376) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:465) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:475) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:508) ~[spring-jdbc-5.3.12.jar:5.3.12]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:515) ~[spring-jdbc-5.3.12.jar:5.3.12]\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","database-connectivity"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1696165194,"post_id":77210497,"comment_id":136115833,"body_markdown":"Does this answer your question? [Spring boot - Not a managed type](https://stackoverflow.com/questions/28664064/spring-boot-not-a-managed-type)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/28664064/spring-boot-not-a-managed-type\">Spring boot - Not a managed type</a>"},{"owner":{"account_id":22948774,"reputation":1,"user_id":18747620,"display_name":"Jatin Bundel"},"score":0,"creation_date":1696165633,"post_id":77210497,"comment_id":136115883,"body_markdown":"@HovercraftFullOfEels Thanks my problem is resolved what I do is just replace \n```import javax.persistence``` To ```import jakarta.persistence```","body":"@HovercraftFullOfEels Thanks my problem is resolved what I do is just replace  <code>import javax.persistence</code> To <code>import jakarta.persistence</code>"},{"owner":{"account_id":22948774,"reputation":1,"user_id":18747620,"display_name":"Jatin Bundel"},"score":0,"creation_date":1696166386,"post_id":77210497,"comment_id":136115960,"body_markdown":"Now data is not Entering in the Database","body":"Now data is not Entering in the Database"},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1696169403,"post_id":77210497,"comment_id":136116281,"body_markdown":"Then you&#39;ve got other, new problems.","body":"Then you&#39;ve got other, new problems."}],"owner":{"account_id":22948774,"reputation":1,"user_id":18747620,"display_name":"Jatin Bundel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696167456,"answer_count":0,"score":0,"last_activity_date":1696164942,"creation_date":1696163951,"question_id":77210497,"body_markdown":"**BootjpaexampleApplication.java**\r\n```\r\npackage com.jpa.test;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.ApplicationContext;\r\n\r\nimport com.jpa.test.dao.EmployeeRepository;\r\nimport com.jpa.test.entities.EmployeeDetails;\r\n\r\n@SpringBootApplication\r\npublic class BootjpaexampleApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tApplicationContext context = SpringApplication.run(BootjpaexampleApplication.class, args);\r\n\t\t\r\n\t\tEmployeeRepository employeeRepository = context.getBean(EmployeeRepository.class);\r\n\t\t\r\n\t\tEmployeeDetails empDetails = new EmployeeDetails();\r\n\t\t\r\n\t\tempDetails.setEmpName(&quot;Jatin Bundel&quot;);\r\n\t\tempDetails.setEmpDepartment(&quot;Software Developer&quot;);\r\n\t\tempDetails.setEmpSalary(420000);\r\n\t\t\r\n\t\tEmployeeDetails empDetails1 = employeeRepository.save(empDetails);\r\n\t\t\r\n\t\tSystem.out.println(empDetails1);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n**EmployeeDetails.java**\r\n\r\n```\r\npackage com.jpa.test.entities;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\n\r\n@Entity\r\npublic class EmployeeDetails {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate int id;\r\n\t\r\n\tprivate String empName;\r\n\t\r\n\tprivate String empDepartment;\r\n\t\r\n\tprivate double empSalary;\r\n\r\n\tpublic EmployeeDetails(int id, String empName, String empDepartment, double empSalary) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.empName = empName;\r\n\t\tthis.empDepartment = empDepartment;\r\n\t\tthis.empSalary = empSalary;\r\n\t}\r\n\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\r\n\tpublic String getEmpName() {\r\n\t\treturn empName;\r\n\t}\r\n\r\n\tpublic void setEmpName(String empName) {\r\n\t\tthis.empName = empName;\r\n\t}\r\n\r\n\tpublic String getEmpDepartment() {\r\n\t\treturn empDepartment;\r\n\t}\r\n\r\n\tpublic void setEmpDepartment(String empDepartment) {\r\n\t\tthis.empDepartment = empDepartment;\r\n\t}\r\n\r\n\tpublic double getEmpSalary() {\r\n\t\treturn empSalary;\r\n\t}\r\n\r\n\tpublic void setEmpSalary(double empSalary) {\r\n\t\tthis.empSalary = empSalary;\r\n\t}\r\n\r\n\tpublic EmployeeDetails() {\r\n\t\tsuper();\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;EmployeeDetails [id=&quot; + id + &quot;, empName=&quot; + empName + &quot;, empDepartment=&quot; + empDepartment\r\n\t\t\t\t+ &quot;, empSalary=&quot; + empSalary + &quot;]&quot;;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\n**EmployeeRepository.java**\r\n```\r\npackage com.jpa.test.dao;\r\n\r\nimport org.springframework.data.repository.CrudRepository;\r\n\r\nimport com.jpa.test.entities.EmployeeDetails;\r\n\r\npublic interface EmployeeRepository extends CrudRepository&lt;EmployeeDetails, Integer&gt; {\r\n\r\n}\r\n```\r\n\r\n\r\n**application.properties**\r\n```\r\nspring.datasource.name=test\r\nspring.datasource.url=jdbc:mysql://localhost:3306/test\r\nspring.datasource.username=root\r\nspring.datasource.password=root\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n\r\n\r\n\r\n\r\nI already tried to add all files in the main package but does not solved this error.\r\n\r\nI did changed my application properties. And tried every single combination but it refuses to work.\r\n\r\n\r\n# Error\r\n```\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-10-01T17:56:08.903+05:30 ERROR 3248 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;employeeRepository&#39; defined in com.jpa.test.EmployeeRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.jpa.test.EmployeeDetails\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942) ~[spring-context-6.0.12.jar:6.0.12]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.12.jar:6.0.12]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) ~[spring-boot-3.1.4.jar:3.1.4]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.1.4.jar:3.1.4]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-3.1.4.jar:3.1.4]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1309) ~[spring-boot-3.1.4.jar:3.1.4]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1298) ~[spring-boot-3.1.4.jar:3.1.4]\r\n\tat com.jpa.test.BootjpaexampleApplication.main(BootjpaexampleApplication.java:11) ~[classes/:na]\r\nCaused by: java.lang.IllegalArgumentException: Not a managed type: class com.jpa.test.EmployeeDetails\r\n\tat org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:192) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n\tat org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:467) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n\tat org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:97) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n\tat org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.&lt;init&gt;(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:81) ~[spring-data-jpa-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.4.jar:3.1.4]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.12.jar:6.0.12]\r\n\t... 15 common frames omitted\r\n```","title":"I am currently practicing Spring Boot with Mysql database and after running application getting this error for employeeRepository","body":"<p><strong>BootjpaexampleApplication.java</strong></p>\n<pre><code>package com.jpa.test;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationContext;\n\nimport com.jpa.test.dao.EmployeeRepository;\nimport com.jpa.test.entities.EmployeeDetails;\n\n@SpringBootApplication\npublic class BootjpaexampleApplication {\n\n    public static void main(String[] args) {\n        ApplicationContext context = SpringApplication.run(BootjpaexampleApplication.class, args);\n        \n        EmployeeRepository employeeRepository = context.getBean(EmployeeRepository.class);\n        \n        EmployeeDetails empDetails = new EmployeeDetails();\n        \n        empDetails.setEmpName(&quot;Jatin Bundel&quot;);\n        empDetails.setEmpDepartment(&quot;Software Developer&quot;);\n        empDetails.setEmpSalary(420000);\n        \n        EmployeeDetails empDetails1 = employeeRepository.save(empDetails);\n        \n        System.out.println(empDetails1);\n    }\n\n}\n</code></pre>\n<p><strong>EmployeeDetails.java</strong></p>\n<pre><code>package com.jpa.test.entities;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class EmployeeDetails {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n    \n    private String empName;\n    \n    private String empDepartment;\n    \n    private double empSalary;\n\n    public EmployeeDetails(int id, String empName, String empDepartment, double empSalary) {\n        super();\n        this.id = id;\n        this.empName = empName;\n        this.empDepartment = empDepartment;\n        this.empSalary = empSalary;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getEmpName() {\n        return empName;\n    }\n\n    public void setEmpName(String empName) {\n        this.empName = empName;\n    }\n\n    public String getEmpDepartment() {\n        return empDepartment;\n    }\n\n    public void setEmpDepartment(String empDepartment) {\n        this.empDepartment = empDepartment;\n    }\n\n    public double getEmpSalary() {\n        return empSalary;\n    }\n\n    public void setEmpSalary(double empSalary) {\n        this.empSalary = empSalary;\n    }\n\n    public EmployeeDetails() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n\n    @Override\n    public String toString() {\n        return &quot;EmployeeDetails [id=&quot; + id + &quot;, empName=&quot; + empName + &quot;, empDepartment=&quot; + empDepartment\n                + &quot;, empSalary=&quot; + empSalary + &quot;]&quot;;\n    }\n}\n\n</code></pre>\n<p><strong>EmployeeRepository.java</strong></p>\n<pre><code>package com.jpa.test.dao;\n\nimport org.springframework.data.repository.CrudRepository;\n\nimport com.jpa.test.entities.EmployeeDetails;\n\npublic interface EmployeeRepository extends CrudRepository&lt;EmployeeDetails, Integer&gt; {\n\n}\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.name=test\nspring.datasource.url=jdbc:mysql://localhost:3306/test\nspring.datasource.username=root\nspring.datasource.password=root\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>I already tried to add all files in the main package but does not solved this error.</p>\n<p>I did changed my application properties. And tried every single combination but it refuses to work.</p>\n<h1>Error</h1>\n<pre><code>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-10-01T17:56:08.903+05:30 ERROR 3248 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeRepository' defined in com.jpa.test.EmployeeRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.jpa.test.EmployeeDetails\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.12.jar:6.0.12]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.12.jar:6.0.12]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.12.jar:6.0.12]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.12.jar:6.0.12]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.12.jar:6.0.12]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.12.jar:6.0.12]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.12.jar:6.0.12]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:967) ~[spring-beans-6.0.12.jar:6.0.12]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942) ~[spring-context-6.0.12.jar:6.0.12]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.12.jar:6.0.12]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) ~[spring-boot-3.1.4.jar:3.1.4]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.1.4.jar:3.1.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-3.1.4.jar:3.1.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1309) ~[spring-boot-3.1.4.jar:3.1.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1298) ~[spring-boot-3.1.4.jar:3.1.4]\n    at com.jpa.test.BootjpaexampleApplication.main(BootjpaexampleApplication.java:11) ~[classes/:na]\nCaused by: java.lang.IllegalArgumentException: Not a managed type: class com.jpa.test.EmployeeDetails\n    at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:192) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n    at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:467) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n    at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:97) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n    at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.&lt;init&gt;(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.1.4.jar:3.1.4]\n    at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.1.4.jar:3.1.4]\n    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.1.4.jar:3.1.4]\n    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.1.4.jar:3.1.4]\n    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.1.4.jar:3.1.4]\n    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:81) ~[spring-data-jpa-3.1.4.jar:3.1.4]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.1.4.jar:3.1.4]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.1.4.jar:3.1.4]\n    at org.springframework.data.util.Lazy.getNullable(Lazy.java:245) ~[spring-data-commons-3.1.4.jar:3.1.4]\n    at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-3.1.4.jar:3.1.4]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.1.4.jar:3.1.4]\n    at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.1.4.jar:3.1.4]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.12.jar:6.0.12]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.12.jar:6.0.12]\n    ... 15 common frames omitted\n</code></pre>\n"},{"tags":["java","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696164798,"creation_date":1683288735,"answer_id":76182066,"question_id":76181701,"body_markdown":"The line\r\n\r\n```\r\nprivate static final Logger logger = LogManager.getLogger(&quot;MyCoreLog&quot;);\r\n```\r\n\r\nis executed and assigned _only once_, when your `MyCoreLog` class is initially loaded (on first access).\r\n\r\nSo in the first test &quot;logger(1)&quot; is assigned to the static field `MyCoreLog#logger`. The second test creates a new instance &quot;logger(2)&quot; which is never assigned to your static field (because static field initializers are executed _once exactly_).\r\nWhen executing the second test, your `MyCoreLog` still holds a reference to the logger from the first test.\r\n\r\nThis is another spin on https://stackoverflow.com/q/74027324/112968 albeit a bit more tricky to detect. You should be able to verify by using a debugger and checking and comparing the object identity of the `logger` instances in both tests and in your class.\r\n\r\nHow to solve?\r\n\r\n1. Create only a single mock of &quot;logger&quot; and assign it in a `@BeforeClass` method or when loading your test class, then use this reference in `verify`\r\n2. Get rid of the mocks and verify call altogether. Use reflection or your logging framework&#39;s facilities to query the list of active loggers and then perform the check on this logger instance. \r\n\r\nExample code for solution 1:\r\n\r\n```\r\nclass CoreLogTest {\r\n    MockedStatic&lt;LogManager&gt; logManager;\r\n    // only a single shared instance (the static keyword is important):\r\n    private static final Logger loggerMock = mock(Logger.class);\r\n\r\n    @BeforeEach\r\n    public void setUp()\r\n    {\r\n        logManager = mockStatic(LogManager.class);\r\n        // LogManager.getLogger is still only executed by the first test!\r\n        logManager.when(() -&gt; LogManager.getLogger(&quot;MyCoreLog&quot;)).thenReturn(logger);\r\n    }\r\n\r\n    @AfterEach\r\n    public void tearDown() throws Exception\r\n    {\r\n        logManager.close();\r\n    }\r\n    \r\n    \r\n    @Test\r\n    void error() {\r\n        String errorMessage = &quot;error message&quot;;\r\n\r\n        MyCoreLog.error(errorMessage);\r\n\r\n        verify(logger).error(errorMessage); // Ok\r\n    }\r\n    \r\n    @Test\r\n    void errorWith() {\r\n        String errorMessage = &quot;error message 2&quot;;\r\n\r\n        MyCoreLog.error(errorMessage);\r\n\r\n        verify(logger).error(errorMessage);\r\n    }\r\n}\r\n```","title":"There were zero interactions with this mock when run tests together","body":"<p>The line</p>\n<pre><code>private static final Logger logger = LogManager.getLogger(&quot;MyCoreLog&quot;);\n</code></pre>\n<p>is executed and assigned <em>only once</em>, when your <code>MyCoreLog</code> class is initially loaded (on first access).</p>\n<p>So in the first test &quot;logger(1)&quot; is assigned to the static field <code>MyCoreLog#logger</code>. The second test creates a new instance &quot;logger(2)&quot; which is never assigned to your static field (because static field initializers are executed <em>once exactly</em>).\nWhen executing the second test, your <code>MyCoreLog</code> still holds a reference to the logger from the first test.</p>\n<p>This is another spin on <a href=\"https://stackoverflow.com/q/74027324/112968\">Why are my mocked methods not called when executing a unit test?</a> albeit a bit more tricky to detect. You should be able to verify by using a debugger and checking and comparing the object identity of the <code>logger</code> instances in both tests and in your class.</p>\n<p>How to solve?</p>\n<ol>\n<li>Create only a single mock of &quot;logger&quot; and assign it in a <code>@BeforeClass</code> method or when loading your test class, then use this reference in <code>verify</code></li>\n<li>Get rid of the mocks and verify call altogether. Use reflection or your logging framework's facilities to query the list of active loggers and then perform the check on this logger instance.</li>\n</ol>\n<p>Example code for solution 1:</p>\n<pre><code>class CoreLogTest {\n    MockedStatic&lt;LogManager&gt; logManager;\n    // only a single shared instance (the static keyword is important):\n    private static final Logger loggerMock = mock(Logger.class);\n\n    @BeforeEach\n    public void setUp()\n    {\n        logManager = mockStatic(LogManager.class);\n        // LogManager.getLogger is still only executed by the first test!\n        logManager.when(() -&gt; LogManager.getLogger(&quot;MyCoreLog&quot;)).thenReturn(logger);\n    }\n\n    @AfterEach\n    public void tearDown() throws Exception\n    {\n        logManager.close();\n    }\n    \n    \n    @Test\n    void error() {\n        String errorMessage = &quot;error message&quot;;\n\n        MyCoreLog.error(errorMessage);\n\n        verify(logger).error(errorMessage); // Ok\n    }\n    \n    @Test\n    void errorWith() {\n        String errorMessage = &quot;error message 2&quot;;\n\n        MyCoreLog.error(errorMessage);\n\n        verify(logger).error(errorMessage);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":969545,"reputation":1876,"user_id":992347,"accept_rate":74,"display_name":"Gabriel Mu&#241;umel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683628642,"creation_date":1683628642,"answer_id":76208421,"question_id":76181701,"body_markdown":"The only way I solved this was:\r\n\r\n```java\r\nclass CoreLogTest {\r\n    private static MockedStatic&lt;LogManager&gt; logManager;\r\n    // only a single shared instance:\r\n    private static final Logger loggerMock = mock(Logger.class);\r\n\r\n    @BeforeAll\r\n    public static void setUp()\r\n    {\r\n        logManager = mockStatic(LogManager.class);\r\n        // LogManager.getLogger is still only executed by the first test!\r\n        logManager.when(() -&gt; LogManager.getLogger(&quot;MyCoreLog&quot;)).thenReturn(loggerMock);\r\n    }\r\n\r\n    @AfterAll\r\n    public static void tearDown()\r\n    {\r\n        logManager.close();\r\n    }\r\n    \r\n    \r\n    @Test\r\n    void error() {\r\n        String errorMessage = &quot;error message&quot;;\r\n\r\n        MyCoreLog.error(errorMessage);\r\n\r\n        verify(logger).error(errorMessage); // Ok\r\n    }\r\n    \r\n    @Test\r\n    void errorWith() {\r\n        String errorMessage = &quot;error message 2&quot;;\r\n\r\n        MyCoreLog.error(errorMessage);\r\n\r\n        verify(logger).error(errorMessage);\r\n    }\r\n}\r\n```\r\n","title":"There were zero interactions with this mock when run tests together","body":"<p>The only way I solved this was:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class CoreLogTest {\n    private static MockedStatic&lt;LogManager&gt; logManager;\n    // only a single shared instance:\n    private static final Logger loggerMock = mock(Logger.class);\n\n    @BeforeAll\n    public static void setUp()\n    {\n        logManager = mockStatic(LogManager.class);\n        // LogManager.getLogger is still only executed by the first test!\n        logManager.when(() -&gt; LogManager.getLogger(&quot;MyCoreLog&quot;)).thenReturn(loggerMock);\n    }\n\n    @AfterAll\n    public static void tearDown()\n    {\n        logManager.close();\n    }\n    \n    \n    @Test\n    void error() {\n        String errorMessage = &quot;error message&quot;;\n\n        MyCoreLog.error(errorMessage);\n\n        verify(logger).error(errorMessage); // Ok\n    }\n    \n    @Test\n    void errorWith() {\n        String errorMessage = &quot;error message 2&quot;;\n\n        MyCoreLog.error(errorMessage);\n\n        verify(logger).error(errorMessage);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17606059,"reputation":31,"user_id":12775089,"display_name":"Annanraen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688027293,"creation_date":1688027293,"answer_id":76579311,"question_id":76181701,"body_markdown":"I used the solution as posted by @knittl, with one small adjustment (adding static):\r\n\r\n    private static final Logger loggerMock = mock(Logger.class);\r\n\r\nps: couldn&#39;t add this as comment, due to low reputation","title":"There were zero interactions with this mock when run tests together","body":"<p>I used the solution as posted by @knittl, with one small adjustment (adding static):</p>\n<pre><code>private static final Logger loggerMock = mock(Logger.class);\n</code></pre>\n<p>ps: couldn't add this as comment, due to low reputation</p>\n"}],"owner":{"account_id":969545,"reputation":1876,"user_id":992347,"accept_rate":74,"display_name":"Gabriel Mu&#241;umel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":279,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1696164798,"creation_date":1683286194,"question_id":76181701,"body_markdown":"I&#39;m getting the following error when run my tests together. If I run each test there is no issue. \r\n\r\n```bash\r\nWanted but not invoked:\r\nlogger.error(&quot;Error message 2&quot;);\r\n-&gt; at acme.logger.MyCoreLogTest.errorWith(MyCoreLogTest.java:74)\r\nActually, there were zero interactions with this mock.\r\n```\r\n\r\n**MyCoreLogger**:\r\n\r\n```java\r\npackage acme.mycore.logger;\r\n\r\nimport org.apache.logging.log4j.LogManager;\r\nimport org.apache.logging.log4j.Logger;\r\n\r\npublic class MyCoreLog {\r\n\tprivate static final Logger logger = LogManager.getLogger(&quot;MyCoreLog&quot;);\r\n\t\r\n\tpublic static final String id = &quot;my_id&quot;;\r\n\t\r\n\tpublic static void error(String message) {\r\n        if (System.getenv(id) != null)\r\n            logger.error(String.format(&quot;%s, %s=%s&quot;, message, id, System.getenv(id)));\r\n        else\r\n            logger.error(message);\r\n    }\r\n}\r\n```\r\n\r\n**CoreLogTest**:\r\n```java\r\npackage acme.mycore.logger;\r\n\r\nimport org.apache.logging.log4j.LogManager;\r\nimport org.junit.jupiter.api.AfterEach;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport org.apache.logging.log4j.Logger;\r\nimport org.mockito.MockedStatic;\r\nimport static org.mockito.Mockito.*;\r\n\r\n\r\nclass CoreLogTest {\r\n\tMockedStatic&lt;LogManager&gt; logManager;\r\n    @BeforeEach\r\n    public void setUp()\r\n    {\r\n        logManager = mockStatic(LogManager.class);\r\n    }\r\n\r\n    @AfterEach\r\n    public void tearDown() throws Exception\r\n    {\r\n        logManager.close();\r\n    }\r\n\t\r\n\t\r\n\t@Test\r\n    void error() {\r\n        String errorMessage = &quot;error message&quot;;\r\n\r\n        Logger logger = mock(Logger.class);\r\n\t\tlogManager.when(() -&gt; LogManager.getLogger(&quot;MyCoreLog&quot;)).thenReturn(logger);\r\n\r\n\t\tMyCoreLog.error(errorMessage);\r\n\r\n\t\tverify(logger).error(errorMessage); // Ok\r\n    }\r\n\t\r\n\t@Test\r\n    void errorWith() {\r\n        String errorMessage = &quot;error message 2&quot;;\r\n\r\n        Logger logger = mock(Logger.class);\r\n\t\tlogManager.when(() -&gt; LogManager.getLogger(&quot;MyCoreLog&quot;)).thenReturn(logger);\r\n\r\n\t\tMyCoreLog.error(errorMessage);\r\n\r\n\t\tverify(logger).error(errorMessage);  // Wanted but not invoked: logger.error(&quot;error message 2&quot;); Actually, there were zero interactions with this mock.\r\n    }\r\n}\r\n\r\n```","title":"There were zero interactions with this mock when run tests together","body":"<p>I'm getting the following error when run my tests together. If I run each test there is no issue.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Wanted but not invoked:\nlogger.error(&quot;Error message 2&quot;);\n-&gt; at acme.logger.MyCoreLogTest.errorWith(MyCoreLogTest.java:74)\nActually, there were zero interactions with this mock.\n</code></pre>\n<p><strong>MyCoreLogger</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package acme.mycore.logger;\n\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\npublic class MyCoreLog {\n    private static final Logger logger = LogManager.getLogger(&quot;MyCoreLog&quot;);\n    \n    public static final String id = &quot;my_id&quot;;\n    \n    public static void error(String message) {\n        if (System.getenv(id) != null)\n            logger.error(String.format(&quot;%s, %s=%s&quot;, message, id, System.getenv(id)));\n        else\n            logger.error(message);\n    }\n}\n</code></pre>\n<p><strong>CoreLogTest</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package acme.mycore.logger;\n\nimport org.apache.logging.log4j.LogManager;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport org.apache.logging.log4j.Logger;\nimport org.mockito.MockedStatic;\nimport static org.mockito.Mockito.*;\n\n\nclass CoreLogTest {\n    MockedStatic&lt;LogManager&gt; logManager;\n    @BeforeEach\n    public void setUp()\n    {\n        logManager = mockStatic(LogManager.class);\n    }\n\n    @AfterEach\n    public void tearDown() throws Exception\n    {\n        logManager.close();\n    }\n    \n    \n    @Test\n    void error() {\n        String errorMessage = &quot;error message&quot;;\n\n        Logger logger = mock(Logger.class);\n        logManager.when(() -&gt; LogManager.getLogger(&quot;MyCoreLog&quot;)).thenReturn(logger);\n\n        MyCoreLog.error(errorMessage);\n\n        verify(logger).error(errorMessage); // Ok\n    }\n    \n    @Test\n    void errorWith() {\n        String errorMessage = &quot;error message 2&quot;;\n\n        Logger logger = mock(Logger.class);\n        logManager.when(() -&gt; LogManager.getLogger(&quot;MyCoreLog&quot;)).thenReturn(logger);\n\n        MyCoreLog.error(errorMessage);\n\n        verify(logger).error(errorMessage);  // Wanted but not invoked: logger.error(&quot;error message 2&quot;); Actually, there were zero interactions with this mock.\n    }\n}\n\n</code></pre>\n"},{"tags":["java","web-services","tomcat","access-control"],"comments":[{"owner":{"account_id":1430778,"reputation":3528,"user_id":1353243,"accept_rate":64,"display_name":"thar45"},"score":1,"creation_date":1356081080,"post_id":13986868,"comment_id":19303143,"body_markdown":"[Duplicated](http://stackoverflow.com/questions/9648212/tomcat-403-error)","body":"<a href=\"http://stackoverflow.com/questions/9648212/tomcat-403-error\">Duplicated</a>"},{"owner":{"account_id":152539,"reputation":19707,"user_id":367141,"accept_rate":100,"display_name":"David"},"score":0,"creation_date":1356081932,"post_id":13986868,"comment_id":19303449,"body_markdown":"Please post your web.xml","body":"Please post your web.xml"},{"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"score":0,"creation_date":1356091995,"post_id":13986868,"comment_id":19307594,"body_markdown":"Is your app called &quot;dupload&quot; or &quot;mps4&quot;?","body":"Is your app called &quot;dupload&quot; or &quot;mps4&quot;?"},{"owner":{"account_id":251630,"reputation":3579,"user_id":529160,"accept_rate":70,"display_name":"Treper"},"score":0,"creation_date":1356317207,"post_id":13986868,"comment_id":19355709,"body_markdown":"My app called mps4. &quot;dupload&quot; have a html form to submit to the mps4 app to get task status.","body":"My app called mps4. &quot;dupload&quot; have a html form to submit to the mps4 app to get task status."}],"answers":[{"tags":[],"owner":{"account_id":5699180,"reputation":1,"user_id":4504767,"display_name":"Andev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422477307,"creation_date":1422477307,"answer_id":28201908,"question_id":13986868,"body_markdown":"You should fix this:\r\n\r\n    &lt;user username=&quot;viewer&quot; password=&quot;viewer&quot; roles=&quot;admin,tomcat,manager-gui,manager-script&quot;/&gt;\r\n\r\nThis user needs the role &#39;manager-script&#39; to be deleted so that he will gain the access via html-interface. So it should look like:\r\n\r\n    &lt;user username=&quot;viewer&quot; password=&quot;viewer&quot; roles=&quot;admin,tomcat,manager-gui&quot;/&gt;","title":"Why Tomcat gives 403 error?","body":"<p>You should fix this:</p>\n\n<pre><code>&lt;user username=\"viewer\" password=\"viewer\" roles=\"admin,tomcat,manager-gui,manager-script\"/&gt;\n</code></pre>\n\n<p>This user needs the role 'manager-script' to be deleted so that he will gain the access via html-interface. So it should look like:</p>\n\n<pre><code>&lt;user username=\"viewer\" password=\"viewer\" roles=\"admin,tomcat,manager-gui\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3067630,"reputation":145,"user_id":2598990,"display_name":"Jeroen K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422481310,"creation_date":1422481310,"answer_id":28202956,"question_id":13986868,"body_markdown":"Your web.xml says the role &#39;viewer&#39; is required. You log in as the admin user, who does not have that role. \r\n\r\nUpdate your tomcat-users.xml as follows: \r\n\r\n    &lt;user username=&quot;admin&quot; password=&quot;admin&quot; roles=&quot;manager-gui, viewer&quot;/&gt;;\r\n\r\nOddly enough, your &#39;viewer&#39; user doesn&#39;t have the viewer role either, but that&#39;s not what causes the problem (if you log in as admin)\r\n","title":"Why Tomcat gives 403 error?","body":"<p>Your web.xml says the role 'viewer' is required. You log in as the admin user, who does not have that role. </p>\n\n<p>Update your tomcat-users.xml as follows: </p>\n\n<pre><code>&lt;user username=\"admin\" password=\"admin\" roles=\"manager-gui, viewer\"/&gt;;\n</code></pre>\n\n<p>Oddly enough, your 'viewer' user doesn't have the viewer role either, but that's not what causes the problem (if you log in as admin)</p>\n"}],"owner":{"account_id":251630,"reputation":3579,"user_id":529160,"accept_rate":70,"display_name":"Treper"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9812,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696161715,"creation_date":1356079657,"question_id":13986868,"body_markdown":"I configure my tomcat-users.xml below:\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt; \r\n    &lt;tomcat-users&gt; \r\n    &lt;role rolename=&quot;tomcat&quot;/&gt; \r\n    &lt;role rolename=&quot;role1&quot;/&gt; \r\n    &lt;role rolename=&quot;manager&quot;/&gt; \r\n    &lt;role rolename=&quot;admin&quot;/&gt; \r\n    &lt;user username=&quot;admin&quot; password=&quot;admin&quot; roles=&quot;admin,manager&quot;/&gt; \r\n    &lt;user username=&quot;tomcat&quot; password=&quot;tomcat&quot; roles=&quot;tomcat&quot;/&gt; \r\n    &lt;user username=&quot;role1&quot; password=&quot;tomcat&quot; roles=&quot;role1&quot;/&gt; \r\n    &lt;user username=&quot;both&quot; password=&quot;tomcat&quot; roles=&quot;tomcat,role1&quot;/&gt;  \r\n    &lt;/tomcat-users&gt;\r\n\r\nI placed an html page under `webapps/dupload/task.html` page which submit a query form to a servlet. The html code is following:\r\n\r\n\r\n\r\n    &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;\r\n    &lt;HTML&gt;\r\n    &lt;HEAD&gt;\r\n     &lt;TITLE&gt;A Sample Form Using POST&lt;/TITLE&gt;\r\n    &lt;/HEAD&gt;\r\n    \r\n    &lt;BODY BGCOLOR=&quot;#FDF5E6&quot;&gt;\r\n    &lt;H2 ALIGN=&quot;CENTER&quot;&gt;SimpleTaskQuery&lt;/H2&gt;\r\n    \r\n    &lt;FORM ACTION=&quot;http://10.5.20.78:8080/mps4/ui/SimpleTaskQueryServlet&quot;\r\n       METHOD=&quot;POST&quot;&gt;\r\n     &lt;CENTER&gt;\r\n    Task Id:\r\n     &lt;INPUT TYPE=&quot;TEXT&quot; NAME=&quot;id&quot; VALUE=&quot;111&quot;&gt;&lt;BR&gt;\r\n     &lt;INPUT TYPE=&quot;SUBMIT&quot;&gt;\r\n     &lt;/CENTER&gt;\r\n    &lt;/FORM&gt;\r\n    \r\n    &lt;/BODY&gt;\r\n    &lt;/HTML&gt;\r\n\r\n But when I submit the form, tomcat gives the following error:\r\n\r\n    HTTP Status 403 - Access to the requested resource has been denied\r\n    \r\n    type Status report\r\n    \r\n    message Access to the requested resource has been denied\r\n    \r\n    description Access to the specified resource (Access to the requested resource has been denied) has been forbidden.\r\n    \r\n    Apache Tomcat/7.0.26\r\n\r\nI have already edited the tomcat-users.xml and login with the admin user account. Why does this still not work? \r\n\r\n**Update:**\r\n\r\nThe webapp&#39;s web.xml is following:\r\nweb.xml:  \r\n\r\n     &lt;security-constraint&gt;\r\n        &lt;web-resource-collection&gt;\r\n          &lt;web-resource-name&gt;HTMLManger and Manager command&lt;/web-resource-name&gt;\r\n          &lt;url-pattern&gt;/ui/*&lt;/url-pattern&gt;\r\n        &lt;/web-resource-collection&gt;\r\n        &lt;auth-constraint&gt;\r\n          &lt;role-name&gt;viewer&lt;/role-name&gt;\r\n        &lt;/auth-constraint&gt;\r\n      &lt;/security-constraint&gt;\r\n      &lt;login-config&gt;\r\n        &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\r\n        &lt;realm-name&gt;Tomcat Manager Application&lt;/realm-name&gt;\r\n      &lt;/login-config&gt;\r\n      &lt;security-role&gt;\r\n        &lt;description&gt; &lt;/description&gt;\r\n        &lt;role-name&gt;viewer&lt;/role-name&gt;\r\n      &lt;/security-role&gt;\r\n\r\n\r\nＩ　ｅｄｉｔ　ｔｈｅ　ｔｏｍｃａｔ－ｕｓｅｒｓ．ｘｍｌ　ｔｏ：\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n    &lt;tomcat-users&gt;\r\n    &lt;role rolename=&quot;manager-gui&quot;/&gt;\r\n    &lt;role rolename=&quot;manager-status&quot;/&gt;\r\n    &lt;role rolename=&quot;manager-script&quot;/&gt;\r\n    &lt;role rolename=&quot;manager-jmx&quot;/&gt;\r\n    &lt;role rolename=&quot;viewer&quot;/&gt;\r\n    &lt;role rolename=&quot;admin&quot;/&gt;\r\n    &lt;role rolename=&quot;tomcat&quot;/&gt;\r\n    &lt;user username=&quot;admin&quot; password=&quot;admin&quot; roles=&quot;manager-gui&quot;/&gt;\r\n    &lt;user username=&quot;viewer&quot; password=&quot;viewer&quot; roles=&quot;admin,tomcat,manager-gui,manager-script&quot;/&gt;\r\n    &lt;/tomcat-users&gt;\r\n\r\nＢｕｔ　ｉｔ　ｓｔｉｌｌ　ｎｏｔ　ｗｏｒｋ．","title":"Why Tomcat gives 403 error?","body":"<p>I configure my tomcat-users.xml below:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt; \n&lt;tomcat-users&gt; \n&lt;role rolename=\"tomcat\"/&gt; \n&lt;role rolename=\"role1\"/&gt; \n&lt;role rolename=\"manager\"/&gt; \n&lt;role rolename=\"admin\"/&gt; \n&lt;user username=\"admin\" password=\"admin\" roles=\"admin,manager\"/&gt; \n&lt;user username=\"tomcat\" password=\"tomcat\" roles=\"tomcat\"/&gt; \n&lt;user username=\"role1\" password=\"tomcat\" roles=\"role1\"/&gt; \n&lt;user username=\"both\" password=\"tomcat\" roles=\"tomcat,role1\"/&gt;  \n&lt;/tomcat-users&gt;\n</code></pre>\n\n<p>I placed an html page under <code>webapps/dupload/task.html</code> page which submit a query form to a servlet. The html code is following:</p>\n\n<pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\"&gt;\n&lt;HTML&gt;\n&lt;HEAD&gt;\n &lt;TITLE&gt;A Sample Form Using POST&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n\n&lt;BODY BGCOLOR=\"#FDF5E6\"&gt;\n&lt;H2 ALIGN=\"CENTER\"&gt;SimpleTaskQuery&lt;/H2&gt;\n\n&lt;FORM ACTION=\"http://10.5.20.78:8080/mps4/ui/SimpleTaskQueryServlet\"\n   METHOD=\"POST\"&gt;\n &lt;CENTER&gt;\nTask Id:\n &lt;INPUT TYPE=\"TEXT\" NAME=\"id\" VALUE=\"111\"&gt;&lt;BR&gt;\n &lt;INPUT TYPE=\"SUBMIT\"&gt;\n &lt;/CENTER&gt;\n&lt;/FORM&gt;\n\n&lt;/BODY&gt;\n&lt;/HTML&gt;\n</code></pre>\n\n<p>But when I submit the form, tomcat gives the following error:</p>\n\n<pre><code>HTTP Status 403 - Access to the requested resource has been denied\n\ntype Status report\n\nmessage Access to the requested resource has been denied\n\ndescription Access to the specified resource (Access to the requested resource has been denied) has been forbidden.\n\nApache Tomcat/7.0.26\n</code></pre>\n\n<p>I have already edited the tomcat-users.xml and login with the admin user account. Why does this still not work? </p>\n\n<p><strong>Update:</strong></p>\n\n<p>The webapp's web.xml is following:\nweb.xml:  </p>\n\n<pre><code> &lt;security-constraint&gt;\n    &lt;web-resource-collection&gt;\n      &lt;web-resource-name&gt;HTMLManger and Manager command&lt;/web-resource-name&gt;\n      &lt;url-pattern&gt;/ui/*&lt;/url-pattern&gt;\n    &lt;/web-resource-collection&gt;\n    &lt;auth-constraint&gt;\n      &lt;role-name&gt;viewer&lt;/role-name&gt;\n    &lt;/auth-constraint&gt;\n  &lt;/security-constraint&gt;\n  &lt;login-config&gt;\n    &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\n    &lt;realm-name&gt;Tomcat Manager Application&lt;/realm-name&gt;\n  &lt;/login-config&gt;\n  &lt;security-role&gt;\n    &lt;description&gt; &lt;/description&gt;\n    &lt;role-name&gt;viewer&lt;/role-name&gt;\n  &lt;/security-role&gt;\n</code></pre>\n\n<p>Ｉ　ｅｄｉｔ　ｔｈｅ　ｔｏｍｃａｔ－ｕｓｅｒｓ．ｘｍｌ　ｔｏ：</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;tomcat-users&gt;\n&lt;role rolename=\"manager-gui\"/&gt;\n&lt;role rolename=\"manager-status\"/&gt;\n&lt;role rolename=\"manager-script\"/&gt;\n&lt;role rolename=\"manager-jmx\"/&gt;\n&lt;role rolename=\"viewer\"/&gt;\n&lt;role rolename=\"admin\"/&gt;\n&lt;role rolename=\"tomcat\"/&gt;\n&lt;user username=\"admin\" password=\"admin\" roles=\"manager-gui\"/&gt;\n&lt;user username=\"viewer\" password=\"viewer\" roles=\"admin,tomcat,manager-gui,manager-script\"/&gt;\n&lt;/tomcat-users&gt;\n</code></pre>\n\n<p>Ｂｕｔ　ｉｔ　ｓｔｉｌｌ　ｎｏｔ　ｗｏｒｋ．</p>\n"},{"tags":["java","arrays","list","java-8","equals"],"comments":[{"owner":{"account_id":1041528,"reputation":3262,"user_id":1047469,"display_name":"marthursson"},"score":2,"creation_date":1455536674,"post_id":35408290,"comment_id":58517894,"body_markdown":"If you were just using List&lt;List&lt;String&gt;&gt; instead of List&lt;String[]&gt; you would be able to do list1.equals(list2). The actual comparison (under the covers) will still be brute force though.","body":"If you were just using List&lt;List&lt;String&gt;&gt; instead of List&lt;String[]&gt; you would be able to do list1.equals(list2). The actual comparison (under the covers) will still be brute force though."},{"owner":{"account_id":3686352,"reputation":3327,"user_id":3070062,"display_name":"Falco"},"score":3,"creation_date":1455555688,"post_id":35408290,"comment_id":58530829,"body_markdown":"The code works, is fast and easy to read/understand and maintain... why the hell change it? Why is shorter better ?","body":"The code works, is fast and easy to read/understand and maintain... why the hell change it? Why is shorter better ?"},{"owner":{"account_id":1464388,"reputation":3904,"user_id":1377706,"accept_rate":83,"display_name":"Pharap"},"score":1,"creation_date":1455579123,"post_id":35408290,"comment_id":58542575,"body_markdown":"Bear in mind shorter solutions might also be slower.","body":"Bear in mind shorter solutions might also be slower."},{"owner":{"account_id":435063,"reputation":4304,"user_id":821436,"accept_rate":79,"display_name":"Martin Schr&#246;der"},"score":3,"creation_date":1455659505,"post_id":35408290,"comment_id":58585442,"body_markdown":"What&#39;s &quot;better&quot;? Faster? Easier to maintain? Uses less memory?","body":"What&#39;s &quot;better&quot;? Faster? Easier to maintain? Uses less memory?"},{"owner":{"account_id":1901532,"reputation":61142,"user_id":1717300,"accept_rate":89,"display_name":"hyde"},"score":0,"creation_date":1456149657,"post_id":35408290,"comment_id":58799017,"body_markdown":"@MartinSchr&#246;der I clarified the question a bit about that.","body":"@MartinSchr&#246;der I clarified the question a bit about that."}],"answers":[{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"down_vote_count":1,"up_vote_count":53,"is_accepted":false,"score":52,"last_activity_date":1455536580,"creation_date":1455536580,"answer_id":35408484,"question_id":35408290,"body_markdown":"The `for` loop at least can be streamified, leading to:\r\n\r\n    return (list1.size()==list2.size() &amp;&amp;\r\n            IntStream.range(0, list1.size())\r\n                     .allMatch(i -&gt; Arrays.equals(list1.get(i), list2.get(i)));","title":"How to compare equality of lists of arrays with modern Java?","body":"<p>The <code>for</code> loop at least can be streamified, leading to:</p>\n\n<pre><code>return (list1.size()==list2.size() &amp;&amp;\n        IntStream.range(0, list1.size())\n                 .allMatch(i -&gt; Arrays.equals(list1.get(i), list2.get(i)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1455565074,"creation_date":1455536868,"answer_id":35408595,"question_id":35408290,"body_markdown":"You _could_ use a stream if the lists are random access lists (so that a call to `get` is fast - generally constant time) leading to:\r\n\r\n    //checks for null and size before\r\n    boolean same = IntStream.range(0, list1.size()).allMatch(i -&gt; Arrays.equals(list1.get(i), list2.get(i)));\r\n\r\nHowever, you might give as parameters some implementations that are not (such as LinkedLists). In this case, the best way is to use the iterator explicitly. Something like:\r\n\r\n    boolean compare(List&lt;String[]&gt; list1, List&lt;String[]&gt; list2) {\r\n        \r\n        //checks for null and size\r\n\r\n        Iterator&lt;String[]&gt; iteList1 = list1.iterator();\r\n        Iterator&lt;String[]&gt; iteList2 = list2.iterator();\r\n    \r\n        while(iteList1.hasNext()) {\r\n            if(!Arrays.equals(iteList1.next(), iteList2.next())) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }","title":"How to compare equality of lists of arrays with modern Java?","body":"<p>You <em>could</em> use a stream if the lists are random access lists (so that a call to <code>get</code> is fast - generally constant time) leading to:</p>\n\n<pre><code>//checks for null and size before\nboolean same = IntStream.range(0, list1.size()).allMatch(i -&gt; Arrays.equals(list1.get(i), list2.get(i)));\n</code></pre>\n\n<p>However, you might give as parameters some implementations that are not (such as LinkedLists). In this case, the best way is to use the iterator explicitly. Something like:</p>\n\n<pre><code>boolean compare(List&lt;String[]&gt; list1, List&lt;String[]&gt; list2) {\n\n    //checks for null and size\n\n    Iterator&lt;String[]&gt; iteList1 = list1.iterator();\n    Iterator&lt;String[]&gt; iteList2 = list2.iterator();\n\n    while(iteList1.hasNext()) {\n        if(!Arrays.equals(iteList1.next(), iteList2.next())) {\n            return false;\n        }\n    }\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":393366,"reputation":3638,"user_id":755183,"accept_rate":71,"display_name":"hahn"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1455621304,"creation_date":1455537227,"answer_id":35408718,"question_id":35408290,"body_markdown":"using `zip` (which originates from lambda b93) function from https://stackoverflow.com/a/23529010/755183, code could look like:\r\n\r\n    boolean match = a.size() == b.size() &amp;&amp; \r\n                    zip(a.stream(), b.stream(), Arrays::deepEquals).\r\n                    allMatch(equal -&gt; equal)\r\n\r\n\r\nupdate\r\n------\r\n\r\nin order to check size of arrays first and then content this could be a solution to consider\r\n\r\n    final boolean match = a.size() == b.size() \r\n                       &amp;&amp; zip(a.stream(), b.stream(), (as, bs) -&gt; as.length == bs.length).\r\n                          allMatch(equal -&gt; equal)\r\n                       &amp;&amp; zip(a.stream(), b.stream(), Arrays::deepEquals).\r\n                          allMatch(equal -&gt; equal);\r\n\r\n ","title":"How to compare equality of lists of arrays with modern Java?","body":"<p>using <code>zip</code> (which originates from lambda b93) function from <a href=\"https://stackoverflow.com/a/23529010/755183\">https://stackoverflow.com/a/23529010/755183</a>, code could look like:</p>\n\n<pre><code>boolean match = a.size() == b.size() &amp;&amp; \n                zip(a.stream(), b.stream(), Arrays::deepEquals).\n                allMatch(equal -&gt; equal)\n</code></pre>\n\n<h2>update</h2>\n\n<p>in order to check size of arrays first and then content this could be a solution to consider</p>\n\n<pre><code>final boolean match = a.size() == b.size() \n                   &amp;&amp; zip(a.stream(), b.stream(), (as, bs) -&gt; as.length == bs.length).\n                      allMatch(equal -&gt; equal)\n                   &amp;&amp; zip(a.stream(), b.stream(), Arrays::deepEquals).\n                      allMatch(equal -&gt; equal);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6093107,"reputation":23142,"user_id":4754790,"accept_rate":94,"display_name":"Dragan Bozanovic"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1696160642,"creation_date":1455537796,"answer_id":35408904,"question_id":35408290,"body_markdown":"1) Solution based on Java 8 streams:\r\n    ```java\r\n    List&lt;List&lt;String&gt;&gt; first = list1.stream().map(Arrays::asList).collect(toList());\r\n    List&lt;List&lt;String&gt;&gt; second = list2.stream().map(Arrays::asList).collect(toList());\r\n    return first.equals(second);\r\n    ```\r\n\r\n2) Much simpler solution (works in Java 5+):\r\n    ```java\r\n    return Arrays.deepEquals(list1.toArray(), list2.toArray());\r\n    ```\r\n\r\n3) Regarding your new requirement (to check the contained String arrays length first), you could write a generic helper method that does equality check for transformed lists:\r\n    ```java\r\n    &lt;T, U&gt; boolean equal(List&lt;T&gt; list1, List&lt;T&gt; list2, Function&lt;T, U&gt; mapper) {\r\n    \tList&lt;U&gt; first = list1.stream().map(mapper).collect(toList());\r\n    \tList&lt;U&gt; second = list2.stream().map(mapper).collect(toList());\r\n    \treturn first.equals(second);\r\n    }\r\n    ```\r\n\r\n    Then the solution could be:\r\n\r\n    ```java\r\n    return equal(list1, list2, s -&gt; s.length)\r\n    \t&amp;&amp; equal(list1, list2, Arrays::asList);\r\n    ```","title":"How to compare equality of lists of arrays with modern Java?","body":"<ol>\n<li><p>Solution based on Java 8 streams:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;List&lt;String&gt;&gt; first = list1.stream().map(Arrays::asList).collect(toList());\nList&lt;List&lt;String&gt;&gt; second = list2.stream().map(Arrays::asList).collect(toList());\nreturn first.equals(second);\n</code></pre>\n</li>\n<li><p>Much simpler solution (works in Java 5+):</p>\n<pre class=\"lang-java prettyprint-override\"><code>return Arrays.deepEquals(list1.toArray(), list2.toArray());\n</code></pre>\n</li>\n<li><p>Regarding your new requirement (to check the contained String arrays length first), you could write a generic helper method that does equality check for transformed lists:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;T, U&gt; boolean equal(List&lt;T&gt; list1, List&lt;T&gt; list2, Function&lt;T, U&gt; mapper) {\n    List&lt;U&gt; first = list1.stream().map(mapper).collect(toList());\n    List&lt;U&gt; second = list2.stream().map(mapper).collect(toList());\n    return first.equals(second);\n}\n</code></pre>\n<p>Then the solution could be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return equal(list1, list2, s -&gt; s.length)\n    &amp;&amp; equal(list1, list2, Arrays::asList);\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1455630802,"creation_date":1455552727,"answer_id":35413998,"question_id":35408290,"body_markdown":"You could stream over one list and compare to each element of the other by using an iterator:\r\n\r\n    Iterator&lt;String[]&gt; it = list1.iterator();\r\n    boolean match = list1.size() == list2.size() &amp;&amp;\r\n                    list2.stream().allMatch(a -&gt; Arrays.equals(a, it.next()));\r\n\r\nUsing an iterator instead of the `get(index)` method on the first list is better because it doesn&#39;t matter whether the list is `RandomAccess` or not.\r\n\r\nNote: this only works with a *sequential* stream. Using a parallel stream will lead to wrong results.\r\n\r\n\r\n----------\r\n\r\n\r\nEDIT: As per the question last edit, which indicates it would be better to check the length of every pair of arrays *in advance*, I think it could be achieved with a slight modification to my previous code:\r\n\r\n    Iterator&lt;String[]&gt; itLength = list1.iterator();\r\n    Iterator&lt;String[]&gt; itContents = list1.iterator();\r\n\r\n    boolean match = \r\n            list1.size() == list2.size()\r\n        &amp;&amp; \r\n            list2.stream()\r\n                .allMatch(a -&gt; {\r\n                    String[] s = itLength.next();\r\n                    return s == null ? a == null :\r\n                           a == null ? s == null :\r\n                           a.length == s.length;\r\n                })\r\n        &amp;&amp; \r\n            list2.stream()\r\n                .allMatch(a -&gt; Arrays.equals(a, itContents.next()));\r\n\r\nHere I&#39;m using two iterators and am streaming `list2` twice, but I see no other way to check all lengths before checking the contents of the first pair of arrays. Check for lengths is null-safe, while check for contents is delegated to the [`Arrays.equals(array1, array2)`][1] method.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#equals-java.lang.Object:A-java.lang.Object:A-","title":"How to compare equality of lists of arrays with modern Java?","body":"<p>You could stream over one list and compare to each element of the other by using an iterator:</p>\n\n<pre><code>Iterator&lt;String[]&gt; it = list1.iterator();\nboolean match = list1.size() == list2.size() &amp;&amp;\n                list2.stream().allMatch(a -&gt; Arrays.equals(a, it.next()));\n</code></pre>\n\n<p>Using an iterator instead of the <code>get(index)</code> method on the first list is better because it doesn't matter whether the list is <code>RandomAccess</code> or not.</p>\n\n<p>Note: this only works with a <em>sequential</em> stream. Using a parallel stream will lead to wrong results.</p>\n\n<hr>\n\n<p>EDIT: As per the question last edit, which indicates it would be better to check the length of every pair of arrays <em>in advance</em>, I think it could be achieved with a slight modification to my previous code:</p>\n\n<pre><code>Iterator&lt;String[]&gt; itLength = list1.iterator();\nIterator&lt;String[]&gt; itContents = list1.iterator();\n\nboolean match = \n        list1.size() == list2.size()\n    &amp;&amp; \n        list2.stream()\n            .allMatch(a -&gt; {\n                String[] s = itLength.next();\n                return s == null ? a == null :\n                       a == null ? s == null :\n                       a.length == s.length;\n            })\n    &amp;&amp; \n        list2.stream()\n            .allMatch(a -&gt; Arrays.equals(a, itContents.next()));\n</code></pre>\n\n<p>Here I'm using two iterators and am streaming <code>list2</code> twice, but I see no other way to check all lengths before checking the contents of the first pair of arrays. Check for lengths is null-safe, while check for contents is delegated to the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#equals-java.lang.Object:A-java.lang.Object:A-\" rel=\"nofollow\"><code>Arrays.equals(array1, array2)</code></a> method.</p>\n"}],"owner":{"account_id":1901532,"reputation":61142,"user_id":1717300,"accept_rate":89,"display_name":"hyde"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15093,"favorite_count":0,"down_vote_count":1,"up_vote_count":71,"accepted_answer_id":35408904,"answer_count":5,"score":70,"last_activity_date":1696160642,"creation_date":1455536006,"question_id":35408290,"body_markdown":"I have two lists of arrays. \r\n\r\nHow do I easily compare equality of these *with Java 8 and its features*, without using external libraries? I am looking for a &quot;better&quot; (higher-level, shorter, more efficient) solution than brute-force code like this (untested code, may contain typos etc, not the point of the question):\r\n\r\n    boolean compare(List&lt;String[]&gt; list1, List&lt;String[]&gt; list2) \r\n    {\r\n        // tests for nulls etc omitted\r\n        if(list1.size() != list2.size()) {\r\n           return false;\r\n        }\r\n        for(i=0; i&lt;list1.size(); ++i) {\r\n            if(!Arrays.equals(list1.get(i), list2.get(i))) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\nOr, if there isn&#39;t any nicer way, that&#39;s a valid answer too.\r\n\r\nBonus: If Java 9 offers an even better way what whaterver Java 8 can offer, feel free to mention it as well.\r\n\r\n**Edit:** After looking at the comments, and seeing how this question has become moderately hot, I think **the &quot;*better*&quot; should include first checking lengths of all arrays, before checking array contents**, because that has potential to find inequality much quicker, if inner arrays are long.","title":"How to compare equality of lists of arrays with modern Java?","body":"<p>I have two lists of arrays. </p>\n\n<p>How do I easily compare equality of these <em>with Java 8 and its features</em>, without using external libraries? I am looking for a \"better\" (higher-level, shorter, more efficient) solution than brute-force code like this (untested code, may contain typos etc, not the point of the question):</p>\n\n<pre><code>boolean compare(List&lt;String[]&gt; list1, List&lt;String[]&gt; list2) \n{\n    // tests for nulls etc omitted\n    if(list1.size() != list2.size()) {\n       return false;\n    }\n    for(i=0; i&lt;list1.size(); ++i) {\n        if(!Arrays.equals(list1.get(i), list2.get(i))) {\n            return false;\n        }\n    }\n    return true;\n}\n</code></pre>\n\n<p>Or, if there isn't any nicer way, that's a valid answer too.</p>\n\n<p>Bonus: If Java 9 offers an even better way what whaterver Java 8 can offer, feel free to mention it as well.</p>\n\n<p><strong>Edit:</strong> After looking at the comments, and seeing how this question has become moderately hot, I think <strong>the \"<em>better</em>\" should include first checking lengths of all arrays, before checking array contents</strong>, because that has potential to find inequality much quicker, if inner arrays are long.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1696159955,"post_id":77210266,"comment_id":136115395,"body_markdown":"I don&#39;t think that there is a significantly more elegant solution.  You might consider using Java 8+ streams, but the streams APIs don&#39;t provide an elegant way of comparing two lists element by element.  And as you observed `Objects.equals` and `Objects.deepEquals` don&#39;t work.  They both end up using `Object::equals` on the arrays ... which is equivalent to `==`.","body":"I don&#39;t think that there is a significantly more elegant solution.  You might consider using Java 8+ streams, but the streams APIs don&#39;t provide an elegant way of comparing two lists element by element.  And as you observed <code>Objects.equals</code> and <code>Objects.deepEquals</code> don&#39;t work.  They both end up using <code>Object::equals</code> on the arrays ... which is equivalent to <code>==</code>."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1696160392,"post_id":77210266,"comment_id":136115432,"body_markdown":"I&#39;ve found an (almost) duplicate for this.  Its just that I disagree that the solution it suggests is better than an explicit loop.  Elegance is a matter of opinion.","body":"I&#39;ve found an (almost) duplicate for this.  Its just that I disagree that the solution it suggests is better than an explicit loop.  Elegance is a matter of opinion."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1696217186,"post_id":77210266,"comment_id":136120631,"body_markdown":"There is one workaround:  store ByteBuffers in your Lists instead of byte arrays.  Unlike arrays, [ByteBuffer defines an equals method](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteBuffer.html#equals(java.lang.Object)) which will compare content, allow you to compare the Lists using `a.equals(b)`.","body":"There is one workaround:  store ByteBuffers in your Lists instead of byte arrays.  Unlike arrays, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteBuffer.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">ByteBuffer defines an equals method</a> which will compare content, allow you to compare the Lists using <code>a.equals(b)</code>."}],"owner":{"account_id":16466407,"reputation":584,"user_id":11896414,"display_name":"once"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1696160271,"answer_count":0,"score":1,"last_activity_date":1696159557,"creation_date":1696159355,"question_id":77210266,"body_markdown":"Is there any elegant way to compare if two list of byte[] is equals without looping all the elements ? I have tried `equals`, `Objects.equals`, `Objects.deepEquals,` but neither worked.\r\n\r\n    @Test\r\n    public void testListByteArray() {\r\n      final String textStr1 = &quot;test1&quot;;\r\n      final String textStr2 = &quot;test2&quot;;\r\n    \r\n      List&lt;byte[]&gt; a = Arrays.asList(textStr1.getBytes(), textStr2.getBytes());\r\n      List&lt;byte[]&gt; b = Arrays.asList(textStr1.getBytes(), textStr2.getBytes());\r\n    \r\n      Assert.assertTrue(a.size() == b.size());\r\n    \r\n      for (int i = 0; i &lt; a.size(); i++) {\r\n        Assert.assertTrue(Arrays.equals(a.get(i), b.get(i)));\r\n      }\r\n\r\n      Assert.assertTrue(a.equals(b)); //fail\r\n      Assert.assertTrue(Objects.equals(a, b)); //fail\r\n      Assert.assertTrue(Objects.deepEquals(a, b)); //fail\r\n    }","title":"Compare two list of byte array","body":"<p>Is there any elegant way to compare if two list of byte[] is equals without looping all the elements ? I have tried <code>equals</code>, <code>Objects.equals</code>, <code>Objects.deepEquals,</code> but neither worked.</p>\n<pre><code>@Test\npublic void testListByteArray() {\n  final String textStr1 = &quot;test1&quot;;\n  final String textStr2 = &quot;test2&quot;;\n\n  List&lt;byte[]&gt; a = Arrays.asList(textStr1.getBytes(), textStr2.getBytes());\n  List&lt;byte[]&gt; b = Arrays.asList(textStr1.getBytes(), textStr2.getBytes());\n\n  Assert.assertTrue(a.size() == b.size());\n\n  for (int i = 0; i &lt; a.size(); i++) {\n    Assert.assertTrue(Arrays.equals(a.get(i), b.get(i)));\n  }\n\n  Assert.assertTrue(a.equals(b)); //fail\n  Assert.assertTrue(Objects.equals(a, b)); //fail\n  Assert.assertTrue(Objects.deepEquals(a, b)); //fail\n}\n</code></pre>\n"},{"tags":["java","opencv","aruco","opencv-solvepnp"],"comments":[{"owner":{"account_id":3072614,"reputation":12296,"user_id":2602877,"display_name":"Christoph Rackwitz"},"score":0,"creation_date":1696153987,"post_id":77208867,"comment_id":136114868,"body_markdown":"boards have been turned into their own objects. browse the C++ docs. nobody really maintains the java bindings or the docs. java is a strange and complex ecosystem that doesn&#39;t attract anyone who knows OpenCV itself (C++)","body":"boards have been turned into their own objects. browse the C++ docs. nobody really maintains the java bindings or the docs. java is a strange and complex ecosystem that doesn&#39;t attract anyone who knows OpenCV itself (C++)"}],"owner":{"account_id":15783520,"reputation":75,"user_id":11389102,"display_name":"Tommy131313"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696159075,"creation_date":1696120577,"question_id":77208867,"body_markdown":"The current OpenCV Java documentation indicates that `estimatePoseCharucoBoard()` is still a viable Java method in `org.opencv.aruco.Aruco`. I don&#39;t have that class and I can&#39;t find the method in any other classes that I have. I see some nearby, related methods have been moved or deprecated or replaced. I can&#39;t find any information about `estimatePoseCharucoBoard()` except it should be available. I see SO posts about looping through all the markers to duplicate the functionality of the missing `estimatePoseSingleMarkers​()` or use solvePnP. Has `estimatePoseCharucoBoard()` met with a similar but undocumented fate?","title":"What is the Java import for OpenCV 4.8.0 estimatePoseCharucoBoard()?","body":"<p>The current OpenCV Java documentation indicates that <code>estimatePoseCharucoBoard()</code> is still a viable Java method in <code>org.opencv.aruco.Aruco</code>. I don't have that class and I can't find the method in any other classes that I have. I see some nearby, related methods have been moved or deprecated or replaced. I can't find any information about <code>estimatePoseCharucoBoard()</code> except it should be available. I see SO posts about looping through all the markers to duplicate the functionality of the missing <code>estimatePoseSingleMarkers​()</code> or use solvePnP. Has <code>estimatePoseCharucoBoard()</code> met with a similar but undocumented fate?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4350455,"reputation":1980,"user_id":3550988,"accept_rate":75,"display_name":"Carl Poole"},"score":3,"creation_date":1488207845,"post_id":42488983,"comment_id":72117474,"body_markdown":"What did you try so far?","body":"What did you try so far?"},{"owner":{"account_id":6486576,"reputation":3695,"user_id":5021963,"accept_rate":100,"display_name":"Ed de Almeida"},"score":7,"creation_date":1488207848,"post_id":42488983,"comment_id":72117476,"body_markdown":"You are going to get lots of downvotes this way. We are not here to do your homework.","body":"You are going to get lots of downvotes this way. We are not here to do your homework."},{"owner":{"account_id":52616,"reputation":1042916,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":3,"creation_date":1488207867,"post_id":42488983,"comment_id":72117487,"body_markdown":"Welcome to Stack Overflow! Please take the [tour], have a look around, and read through the [help], in particular [*How do I ask a good question?*](/help/how-to-ask) Dumping your assignments on us is not asking a good question.","body":"Welcome to Stack Overflow! Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>, have a look around, and read through the <a href=\"https://stackoverflow.com/help\">help center</a>, in particular <a href=\"/help/how-to-ask\"><i>How do I ask a good question?</i></a> Dumping your assignments on us is not asking a good question."},{"owner":{"account_id":8038583,"reputation":4800,"user_id":6060964,"display_name":"node_modules"},"score":6,"creation_date":1488208027,"post_id":42488983,"comment_id":72117622,"body_markdown":"Hire a freelancer, we are not a codefactory.","body":"Hire a freelancer, we are not a codefactory."},{"owner":{"account_id":3150862,"reputation":11755,"user_id":2664350,"display_name":"piet.t"},"score":3,"creation_date":1488208078,"post_id":42488983,"comment_id":72117660,"body_markdown":"Ouch, I think adding &quot;as soon as possible&quot; easily has doubled the number of downvotes you have to expect.","body":"Ouch, I think adding &quot;as soon as possible&quot; easily has doubled the number of downvotes you have to expect."},{"owner":{"account_id":5018541,"reputation":12086,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"score":2,"creation_date":1488208445,"post_id":42488983,"comment_id":72117894,"body_markdown":"Please see [Why is “Can someone help me?” not an actual question?](http://meta.stackoverflow.com/q/284236) as well as [this article](http://meta.softwareengineering.stackexchange.com/questions/6166/open-letter-to-students-with-homework-problems) on why you can&#39;t (and shouldn&#39;t) ask this kind of question here.","body":"Please see <a href=\"http://meta.stackoverflow.com/q/284236\">Why is “Can someone help me?” not an actual question?</a> as well as <a href=\"http://meta.softwareengineering.stackexchange.com/questions/6166/open-letter-to-students-with-homework-problems\">this article</a> on why you can&#39;t (and shouldn&#39;t) ask this kind of question here."},{"owner":{"account_id":5018541,"reputation":12086,"user_id":4032703,"accept_rate":100,"display_name":"EJoshuaS - Stand with Ukraine"},"score":1,"creation_date":1488209585,"post_id":42488983,"comment_id":72118728,"body_markdown":"Can you be more specific about what&#39;s wrong with what you have right now?","body":"Can you be more specific about what&#39;s wrong with what you have right now?"}],"answers":[{"tags":[],"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1488458663,"creation_date":1488444567,"answer_id":42550660,"question_id":42488983,"body_markdown":"Drop your wonky initial setting of `longest` and `sec`. Create them and `temp` the following way: \r\n\r\n    String longest=&quot;&quot;;\r\n    String sec=&quot;&quot;;\r\n    String temp=&quot;&quot;;\r\n\r\n    for(int i = 0; i &lt; l; i++) {\r\n        ...\r\n\r\nWhy would you set `longest` and `sec` both to the first word - guess what happens if that first word is the longest in the sentence?\r\n\r\nThen your code produces the output:\r\n\r\n&gt;Longest word is Sayan  \r\n&gt;Second Longest word is home.\r\n\r\nThat is more correct than what you currently have but still not what you would expect ... because there is the `.` at the end of the sentence you have to take care of - maybe make the check for `ch!=&#39; &#39;` a bit more complex and check against `&#39;.&#39;` as well. I leave it for you to figure out how to do that correctly.","title":"Write a program to find the second longest word without using array","body":"<p>Drop your wonky initial setting of <code>longest</code> and <code>sec</code>. Create them and <code>temp</code> the following way: </p>\n\n<pre><code>String longest=\"\";\nString sec=\"\";\nString temp=\"\";\n\nfor(int i = 0; i &lt; l; i++) {\n    ...\n</code></pre>\n\n<p>Why would you set <code>longest</code> and <code>sec</code> both to the first word - guess what happens if that first word is the longest in the sentence?</p>\n\n<p>Then your code produces the output:</p>\n\n<blockquote>\n  <p>Longest word is Sayan<br>\n  Second Longest word is home.</p>\n</blockquote>\n\n<p>That is more correct than what you currently have but still not what you would expect ... because there is the <code>.</code> at the end of the sentence you have to take care of - maybe make the check for <code>ch!=' '</code> a bit more complex and check against <code>'.'</code> as well. I leave it for you to figure out how to do that correctly.</p>\n"},{"tags":[],"owner":{"account_id":10307097,"reputation":1,"user_id":7604022,"display_name":"Rishav Mukherjee"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1521619246,"creation_date":1521616880,"answer_id":49400404,"question_id":42488983,"body_markdown":"Here is a very basic code to find the second longest word:      \r\n           \r\n           class Second\r\n           {\r\n                public static void main(String str)//str has the required sentence\r\n                {\r\n                    String m=&quot;&quot;,q=&quot;&quot;;\r\n                    int lar=0;\r\n                    str=str+&quot; &quot;;\r\n                    for(int i=1;i&lt;=2;i++)\r\n                    {\r\n                        for(int k=0;k&lt;str.length();k++)\r\n                        {\r\n                           char ch=str.charAt(k);\r\n                           if(ch!=&#39; &#39;)\r\n                           m=m+ch;\r\n                           else\r\n                           {\r\n                               if(m.length()&gt;lar)\r\n                               {\r\n                                  q=m;\r\n                                  lar=q.length();\r\n                               }\r\n                               m=&quot;&quot;;\r\n                           }\r\n                         }\r\n                         if(i==1)\r\n                         {\r\n                            System.out.println(&quot;The longest word is: &quot;+q);\r\n                            str=str.replace(q,&quot; &quot;);\r\n                            lar=0;\r\n                         }\r\n                    }\r\n                    System.out.println(&quot;The second longest word is: &quot;+q);\r\n                 }\r\n           }","title":"Write a program to find the second longest word without using array","body":"<p>Here is a very basic code to find the second longest word:      </p>\n\n<pre><code>       class Second\n       {\n            public static void main(String str)//str has the required sentence\n            {\n                String m=\"\",q=\"\";\n                int lar=0;\n                str=str+\" \";\n                for(int i=1;i&lt;=2;i++)\n                {\n                    for(int k=0;k&lt;str.length();k++)\n                    {\n                       char ch=str.charAt(k);\n                       if(ch!=' ')\n                       m=m+ch;\n                       else\n                       {\n                           if(m.length()&gt;lar)\n                           {\n                              q=m;\n                              lar=q.length();\n                           }\n                           m=\"\";\n                       }\n                     }\n                     if(i==1)\n                     {\n                        System.out.println(\"The longest word is: \"+q);\n                        str=str.replace(q,\" \");\n                        lar=0;\n                     }\n                }\n                System.out.println(\"The second longest word is: \"+q);\n             }\n       }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9069674,"reputation":33,"user_id":6753363,"display_name":"Mohit Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525492572,"creation_date":1525492572,"answer_id":50185553,"question_id":42488983,"body_markdown":"This is happening because you have initialized the longest element as first word and sec also as longest(which is **Sayan** itself). Now longest = &quot;Sayan&quot; and sec = &quot;Sayan&quot;, you went inside the array but you never found any word which is bigger than longest or sec.\r\n","title":"Write a program to find the second longest word without using array","body":"<p>This is happening because you have initialized the longest element as first word and sec also as longest(which is <strong>Sayan</strong> itself). Now longest = \"Sayan\" and sec = \"Sayan\", you went inside the array but you never found any word which is bigger than longest or sec.</p>\n"},{"tags":[],"owner":{"account_id":2337675,"reputation":143,"user_id":2049626,"display_name":"Sudeep Krishnan M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696158847,"creation_date":1696158847,"answer_id":77210227,"question_id":42488983,"body_markdown":"    To find the Second Largest Word Try the Below, I used the TreeMap which will sort in the natural order of the key\r\n    \r\n       \r\n    \r\n        public class FindSecondLargest {\r\n        Map&lt;Integer,String&gt; map;\r\n        public String getSecondLargest(String[] testarr) {\r\n            int length= testarr.length;\r\n            map=new TreeMap&lt;&gt;();\r\n            for(int i=0;i&lt;length;i++)\r\n            {\r\n                map.put(testarr[i].length(),testarr[i]);\r\n            }\r\n            int i=0;\r\n            String result=&quot;&quot;;\r\n            Set&lt;Map.Entry&lt;Integer,String&gt;&gt; entry = map.entrySet();\r\n            for(Map.Entry&lt;Integer, String&gt;itr:entry)\r\n            {\r\n                if(i==length-2) {\r\n                    result = itr.getValue();\r\n                    break;\r\n                }\r\n                else i++;\r\n    \r\n            }\r\n            return result;\r\n        }\r\n    }","title":"Write a program to find the second longest word without using array","body":"<pre><code>To find the Second Largest Word Try the Below, I used the TreeMap which will sort in the natural order of the key\n\n   \n\n    public class FindSecondLargest {\n    Map&lt;Integer,String&gt; map;\n    public String getSecondLargest(String[] testarr) {\n        int length= testarr.length;\n        map=new TreeMap&lt;&gt;();\n        for(int i=0;i&lt;length;i++)\n        {\n            map.put(testarr[i].length(),testarr[i]);\n        }\n        int i=0;\n        String result=&quot;&quot;;\n        Set&lt;Map.Entry&lt;Integer,String&gt;&gt; entry = map.entrySet();\n        for(Map.Entry&lt;Integer, String&gt;itr:entry)\n        {\n            if(i==length-2) {\n                result = itr.getValue();\n                break;\n            }\n            else i++;\n\n        }\n        return result;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9621150,"reputation":11,"user_id":7630490,"display_name":"Ayan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3102,"favorite_count":0,"down_vote_count":23,"up_vote_count":3,"answer_count":4,"score":-20,"last_activity_date":1696158847,"creation_date":1488207760,"question_id":42488983,"body_markdown":"I need a java program to find the second-longest word in a sentence (without using an array).\r\n\r\n\r\nThis is the code I have so far:\r\n```\r\nimport java.io.*;\r\nclass Second_longest_Trial {\r\n  public static void main(String args[]) throws IOException {\r\n    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\r\n    System.out.println(&quot;Enter the sentence&quot;);\r\n    String s = in .readLine();\r\n    s = s.trim() + &quot; &quot;;\r\n    String longest = s.substring(0, s.indexOf(&#39; &#39;));\r\n    String sec = longest;\r\n    int l = s.length();\r\n    String temp = &quot; &quot;, str = &quot; &quot;;\r\n\r\n    for (int i = s.indexOf(&#39; &#39;) + 1; i &lt; l; i++) {\r\n      char ch = s.charAt(i);\r\n\r\n      if (ch != &#39; &#39;)\r\n        temp = temp + ch;\r\n      else {\r\n        if (temp.length() &gt; longest.length()) {\r\n          sec = longest;\r\n          longest = temp;\r\n        } else if (temp.length() &gt; sec.length()) {\r\n          sec = temp;\r\n        }\r\n        temp = &quot; &quot;;\r\n      }\r\n    }\r\n\r\n    System.out.println(&quot;Longest word is &quot; + longest);\r\n    System.out.println(&quot;Second Longest word is &quot; + sec);\r\n  }\r\n}\r\n```\r\n\r\nWhen I am giving the input-\r\n\r\n&gt; Sayan goes home.\r\n\r\nThis outputs-\r\n\r\n&gt; Longest word is Sayan\r\n&gt; Second Longest word is Sayan \r\n\r\nI should have got the output as follows-\r\n\r\n&gt; Longest word is Sayan\r\n&gt; Second Longest word is goes \r\n","title":"Write a program to find the second longest word without using array","body":"<p>I need a java program to find the second-longest word in a sentence (without using an array).</p>\n<p>This is the code I have so far:</p>\n<pre><code>import java.io.*;\nclass Second_longest_Trial {\n  public static void main(String args[]) throws IOException {\n    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n    System.out.println(&quot;Enter the sentence&quot;);\n    String s = in .readLine();\n    s = s.trim() + &quot; &quot;;\n    String longest = s.substring(0, s.indexOf(' '));\n    String sec = longest;\n    int l = s.length();\n    String temp = &quot; &quot;, str = &quot; &quot;;\n\n    for (int i = s.indexOf(' ') + 1; i &lt; l; i++) {\n      char ch = s.charAt(i);\n\n      if (ch != ' ')\n        temp = temp + ch;\n      else {\n        if (temp.length() &gt; longest.length()) {\n          sec = longest;\n          longest = temp;\n        } else if (temp.length() &gt; sec.length()) {\n          sec = temp;\n        }\n        temp = &quot; &quot;;\n      }\n    }\n\n    System.out.println(&quot;Longest word is &quot; + longest);\n    System.out.println(&quot;Second Longest word is &quot; + sec);\n  }\n}\n</code></pre>\n<p>When I am giving the input-</p>\n<blockquote>\n<p>Sayan goes home.</p>\n</blockquote>\n<p>This outputs-</p>\n<blockquote>\n<p>Longest word is Sayan\nSecond Longest word is Sayan</p>\n</blockquote>\n<p>I should have got the output as follows-</p>\n<blockquote>\n<p>Longest word is Sayan\nSecond Longest word is goes</p>\n</blockquote>\n"},{"tags":["java","android","c","kotlin","math"],"comments":[{"owner":{"account_id":23549491,"reputation":7426,"user_id":17592432,"display_name":"Fe2O3"},"score":0,"creation_date":1696150372,"post_id":77209795,"comment_id":136114587,"body_markdown":"Why don&#39;t you read the doco for the function `exp()`? While you&#39;re there, check into something like `pow()`...","body":"Why don&#39;t you read the doco for the function <code>exp()</code>? While you&#39;re there, check into something like <code>pow()</code>..."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":1,"creation_date":1696150426,"post_id":77209795,"comment_id":136114591,"body_markdown":"You&#39;re computing two completely different things and get two completely different results","body":"You&#39;re computing two completely different things and get two completely different results"},{"owner":{"account_id":12776,"reputation":107137,"user_id":25324,"accept_rate":100,"display_name":"pmg"},"score":0,"creation_date":1696150492,"post_id":77209795,"comment_id":136114593,"body_markdown":"For the C version, you want `printf(&quot;%f\\n&quot;, pow(M_E, -4));` ... remember to `#include &lt;math.h&gt;`","body":"For the C version, you want <code>printf(&quot;%f\\n&quot;, pow(M_E, -4));</code> ... remember to <code>#include &lt;math.h&gt;</code>"},{"owner":{"account_id":23549491,"reputation":7426,"user_id":17592432,"display_name":"Fe2O3"},"score":0,"creation_date":1696150628,"post_id":77209795,"comment_id":136114599,"body_markdown":"@pmg &quot;_converting C Code to Java_&quot;... The C version is probably the starting point...","body":"@pmg &quot;<i>converting C Code to Java</i>&quot;... The C version is probably the starting point..."},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1696157341,"post_id":77209795,"comment_id":136115159,"body_markdown":"`1*Math.exp(-4)` is not the same thing as `1.0e-4` (in fact, the equivalent in Java is also `1.0e-4`).","body":"<code>1*Math.exp(-4)</code> is not the same thing as <code>1.0e-4</code> (in fact, the equivalent in Java is also <code>1.0e-4</code>)."}],"answers":[{"tags":[],"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1696158195,"creation_date":1696157849,"answer_id":77210171,"question_id":77209795,"body_markdown":"In C, `1.0e-4` denotes 1.0•10&lt;sup&gt;−4&lt;/sup&gt;.\r\n\r\nIn Kotlin, `Math.exp(-4)` denotes *e*&lt;sup&gt;−4&lt;/sup&gt;, where *e* is [Euler’s number](https://en.wikipedia.org/wiki/E_(mathematical_constant)), approximately 2.718281828459.\r\n\r\nIn Kotlin, you can use `1e-4` or `1.0e-4` for 10&lt;sup&gt;−4&lt;/sup&gt;. Note the exact value used in computation will differ slightly from 10&lt;sup&gt;−4&lt;/sup&gt; because the input text is converted to a floating-point format that uses base two.","title":"E value different in C and Kotlin Math.exp","body":"<p>In C, <code>1.0e-4</code> denotes 1.0•10<sup>−4</sup>.</p>\n<p>In Kotlin, <code>Math.exp(-4)</code> denotes <em>e</em><sup>−4</sup>, where <em>e</em> is <a href=\"https://en.wikipedia.org/wiki/E_(mathematical_constant)\" rel=\"nofollow noreferrer\">Euler’s number</a>, approximately 2.718281828459.</p>\n<p>In Kotlin, you can use <code>1e-4</code> or <code>1.0e-4</code> for 10<sup>−4</sup>. Note the exact value used in computation will differ slightly from 10<sup>−4</sup> because the input text is converted to a floating-point format that uses base two.</p>\n"}],"owner":{"account_id":8790688,"reputation":1,"user_id":6570619,"display_name":"Prasad Manjula"},"comment_count":5,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1696160975,"answer_count":1,"score":-4,"last_activity_date":1696158195,"creation_date":1696150022,"question_id":77209795,"body_markdown":"I am converting C Code to Java(kotlin) for a Android app\r\n\r\nIn C I get\r\n    \r\n```\r\nprintf(&quot;\\\\n  e value :%f \\\\n&quot;, 1.0e-4);\r\n    e value :0.000100\r\n```\r\n\r\n\r\n\r\nIn Android Studio\r\n   \r\n    System.out.println(&quot;e value &quot;+ 1*Math.exp(-4));\r\n\r\n    Output\r\n    e value 0.01831563888873418\r\n\r\nAny idea why? C language code is the working code i found.. i need to get the same result with kotlin\r\n","title":"E value different in C and Kotlin Math.exp","body":"<p>I am converting C Code to Java(kotlin) for a Android app</p>\n<p>In C I get</p>\n<pre><code>printf(&quot;\\\\n  e value :%f \\\\n&quot;, 1.0e-4);\n    e value :0.000100\n</code></pre>\n<p>In Android Studio</p>\n<pre><code>System.out.println(&quot;e value &quot;+ 1*Math.exp(-4));\n\nOutput\ne value 0.01831563888873418\n</code></pre>\n<p>Any idea why? C language code is the working code i found.. i need to get the same result with kotlin</p>\n"},{"tags":["java","geometry","line","line-intersection"],"comments":[{"owner":{"account_id":2716548,"reputation":1719,"user_id":2343795,"accept_rate":75,"display_name":"snickers10m"},"score":0,"creation_date":1429897477,"post_id":29854085,"comment_id":47834125,"body_markdown":"While your question is readable and answerable, there are still some things to improve upon, including explaining each non-obvious variable and including what you&#39;ve tried so far. You&#39;ll get an answer eventually but please see http://stackoverflow.com/help/how-to-ask in the meantime","body":"While your question is readable and answerable, there are still some things to improve upon, including explaining each non-obvious variable and including what you&#39;ve tried so far. You&#39;ll get an answer eventually but please see <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> in the meantime"},{"owner":{"account_id":4934454,"reputation":37277,"user_id":3973077,"accept_rate":77,"display_name":"Paul Boddington"},"score":1,"creation_date":1429898153,"post_id":29854085,"comment_id":47834519,"body_markdown":"Just check for the vertical case first and deal with it separately.","body":"Just check for the vertical case first and deal with it separately."},{"owner":{"account_id":4309809,"reputation":115,"user_id":3521250,"accept_rate":33,"display_name":"user3521250"},"score":0,"creation_date":1429899184,"post_id":29854085,"comment_id":47835087,"body_markdown":"is there another formula to handle this case? what i want to do is to add some micro value to one of the coordinate , so  i will  not have a multiplication by 0 , then i will get the intersection point  but with some lose of precision","body":"is there another formula to handle this case? what i want to do is to add some micro value to one of the coordinate , so  i will  not have a multiplication by 0 , then i will get the intersection point  but with some lose of precision"},{"owner":{"account_id":449564,"reputation":78054,"user_id":844416,"display_name":"MBo"},"score":0,"creation_date":1429931251,"post_id":29854085,"comment_id":47846826,"body_markdown":"This formula don&#39;t bother about vertical segment. d is not zero when only one of the segments is vertical. d is equal to 0 when segments are parallel - treat this as special case.","body":"This formula don&#39;t bother about vertical segment. d is not zero when only one of the segments is vertical. d is equal to 0 when segments are parallel - treat this as special case."}],"answers":[{"tags":[],"owner":{"account_id":1580982,"reputation":57898,"user_id":1468366,"accept_rate":78,"display_name":"MvG"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1429914344,"creation_date":1429914344,"answer_id":29858558,"question_id":29854085,"body_markdown":"&lt;!-- language-all: lang-none --&gt;\r\n\r\n# Line intersection without special cases\r\n\r\nComing from a background of projective geometry, I&#39;d write the points in homogeneous coordinates:\r\n\r\n    v1 = [x1, y1, 1]\r\n    v2 = [x2, y2, 1]\r\n    v3 = [x3, y3, 1]\r\n    v4 = [x4, y4, 1]\r\n\r\nThen both the line joining two points and the intersection of two lines can be expressed using the cross product:\r\n\r\n    [x5, y5, z5] = (v1 &#215; v2) &#215; (v3 &#215; v4)\r\n\r\nwhich you can dehomogenize to find the resulting point as\r\n\r\n    [x5/z5, y5/z5]\r\n\r\nwithout having to deal with any special cases. If your lines are parallel, the last point would lead to a division by zero, though, so you might want to catch that case.\r\n\r\n# Restriction to segments\r\n\r\nThe above is for infinite lines, though. You might want to keep the code which returns `null` if the point of intersection falls outside the bounding box. But if you want real segments, that code is incorrect: you could have a point of intersection which lies outside one of the segments but still inside the bounding box.\r\n\r\nA proper check can be implemented using an orientation-checking predicate. The determinant of three of the vectors `vi` given above will have positive sign if the triangle they form has one orientation, and negative sign for the opposite orientation. So the points `v3` and `v4` lie on different sides of `s1` if\r\n\r\n    det(v1, v2, v3) * det(v1, v2, v4) &lt; 0\r\n\r\nand in a similar way `v1` and `v2` lie on different sides of `s2` if\r\n\r\n    det(v3, v4, v1) * det(v3, v4, v2) &lt; 0\r\n\r\nso if both of these are satisfied, you have an intersection between the segments. If you want to include the segment endpoints, change the `&lt;` to a `≤` in these inequalities.","title":"Line Segments Intersection(intersection Point)","body":"\n\n<h1>Line intersection without special cases</h1>\n\n<p>Coming from a background of projective geometry, I'd write the points in homogeneous coordinates:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>v1 = [x1, y1, 1]\nv2 = [x2, y2, 1]\nv3 = [x3, y3, 1]\nv4 = [x4, y4, 1]\n</code></pre>\n\n<p>Then both the line joining two points and the intersection of two lines can be expressed using the cross product:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[x5, y5, z5] = (v1 × v2) × (v3 × v4)\n</code></pre>\n\n<p>which you can dehomogenize to find the resulting point as</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[x5/z5, y5/z5]\n</code></pre>\n\n<p>without having to deal with any special cases. If your lines are parallel, the last point would lead to a division by zero, though, so you might want to catch that case.</p>\n\n<h1>Restriction to segments</h1>\n\n<p>The above is for infinite lines, though. You might want to keep the code which returns <code>null</code> if the point of intersection falls outside the bounding box. But if you want real segments, that code is incorrect: you could have a point of intersection which lies outside one of the segments but still inside the bounding box.</p>\n\n<p>A proper check can be implemented using an orientation-checking predicate. The determinant of three of the vectors <code>vi</code> given above will have positive sign if the triangle they form has one orientation, and negative sign for the opposite orientation. So the points <code>v3</code> and <code>v4</code> lie on different sides of <code>s1</code> if</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>det(v1, v2, v3) * det(v1, v2, v4) &lt; 0\n</code></pre>\n\n<p>and in a similar way <code>v1</code> and <code>v2</code> lie on different sides of <code>s2</code> if</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>det(v3, v4, v1) * det(v3, v4, v2) &lt; 0\n</code></pre>\n\n<p>so if both of these are satisfied, you have an intersection between the segments. If you want to include the segment endpoints, change the <code>&lt;</code> to a <code>≤</code> in these inequalities.</p>\n"},{"tags":[],"owner":{"account_id":4869631,"reputation":426,"user_id":3926617,"display_name":"Wandeber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1463162394,"creation_date":1463162394,"answer_id":37216524,"question_id":29854085,"body_markdown":"I have tried code it without testing... I hope it works! ^^\r\n\r\n    public static Point intersection(Segment s1, Segment s2) {\r\n        // Components of the first segment&#39;s rect.\r\n        Point v1 = new Point(s1.p2.x - s1.p1.x, s1.p2.y - s1.p1.y); // Directional vector\r\n        double a1 = v.y;\r\n        double b1 = -v.x;\r\n        double c1 = v1.x * s1.p1.y - s1.v.y * s1.p1.x;\r\n    \r\n        // Components of the second segment&#39;s rect.\r\n        Point v2 = new Point(s2.p2.x - s2.p1.x, s2.p2.y - s2.p1.y);\r\n        double a2 = v2.y;\r\n        double b2 = -v2.x;\r\n        double c2 = v2.x * s2.p1.y - s2.v.y * s2.p1.x;\r\n        \r\n        // Calc intersection between RECTS.\r\n        Point intersection = null;\r\n        double det = a1 * b2 - b1 * a2;\r\n        if (det != 0) {\r\n            intersection = new Point(\r\n                (b2 * (-c1) - b1 * (-c2)) / det;\r\n                (a1 * (-c2) - a2 * (-c1)) / det;\r\n            );\r\n        }\r\n    \r\n        // Checks ff segments collides.\r\n        if (\r\n            intersection != null &amp;&amp;\r\n            (\r\n                (s1.p1.x &lt;= intersection.x &amp;&amp; intersection.x &lt;= s1.p2.x) ||\r\n                (s1.p2.x &lt;= intersection.x &amp;&amp; intersection.x &lt;= s1.p1.x)\r\n            ) &amp;&amp;\r\n            (\r\n                (s1.p1.y &lt;= intersection.y &amp;&amp; intersection.y &lt;= s1.p2.y) ||\r\n                (s1.p2.y &lt;= intersection.y &amp;&amp; intersection.y &lt;= s1.p1.y)\r\n            ) &amp;&amp;\r\n            (\r\n                (s2.p1.x &lt;= intersection.x &amp;&amp; intersection.x &lt;= s2.p2.x) ||\r\n                (s2.p2.x &lt;= intersection.x &amp;&amp; intersection.x &lt;= s2.p1.x)\r\n            ) &amp;&amp;\r\n            (\r\n                (s2.p1.y &lt;= intersection.y &amp;&amp; intersection.y &lt;= s2.p2.y) ||\r\n                (s2.p2.y &lt;= intersection.y &amp;&amp; intersection.y &lt;= s2.p1.y)\r\n            )\r\n        )\r\n            return intersection;\r\n    \r\n        return null;\r\n    };","title":"Line Segments Intersection(intersection Point)","body":"<p>I have tried code it without testing... I hope it works! ^^</p>\n\n<pre><code>public static Point intersection(Segment s1, Segment s2) {\n    // Components of the first segment's rect.\n    Point v1 = new Point(s1.p2.x - s1.p1.x, s1.p2.y - s1.p1.y); // Directional vector\n    double a1 = v.y;\n    double b1 = -v.x;\n    double c1 = v1.x * s1.p1.y - s1.v.y * s1.p1.x;\n\n    // Components of the second segment's rect.\n    Point v2 = new Point(s2.p2.x - s2.p1.x, s2.p2.y - s2.p1.y);\n    double a2 = v2.y;\n    double b2 = -v2.x;\n    double c2 = v2.x * s2.p1.y - s2.v.y * s2.p1.x;\n\n    // Calc intersection between RECTS.\n    Point intersection = null;\n    double det = a1 * b2 - b1 * a2;\n    if (det != 0) {\n        intersection = new Point(\n            (b2 * (-c1) - b1 * (-c2)) / det;\n            (a1 * (-c2) - a2 * (-c1)) / det;\n        );\n    }\n\n    // Checks ff segments collides.\n    if (\n        intersection != null &amp;&amp;\n        (\n            (s1.p1.x &lt;= intersection.x &amp;&amp; intersection.x &lt;= s1.p2.x) ||\n            (s1.p2.x &lt;= intersection.x &amp;&amp; intersection.x &lt;= s1.p1.x)\n        ) &amp;&amp;\n        (\n            (s1.p1.y &lt;= intersection.y &amp;&amp; intersection.y &lt;= s1.p2.y) ||\n            (s1.p2.y &lt;= intersection.y &amp;&amp; intersection.y &lt;= s1.p1.y)\n        ) &amp;&amp;\n        (\n            (s2.p1.x &lt;= intersection.x &amp;&amp; intersection.x &lt;= s2.p2.x) ||\n            (s2.p2.x &lt;= intersection.x &amp;&amp; intersection.x &lt;= s2.p1.x)\n        ) &amp;&amp;\n        (\n            (s2.p1.y &lt;= intersection.y &amp;&amp; intersection.y &lt;= s2.p2.y) ||\n            (s2.p2.y &lt;= intersection.y &amp;&amp; intersection.y &lt;= s2.p1.y)\n        )\n    )\n        return intersection;\n\n    return null;\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3132,"reputation":5748,"user_id":4454,"accept_rate":59,"display_name":"Eyal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613164161,"creation_date":1613164161,"answer_id":66179054,"question_id":29854085,"body_markdown":"Here&#39;s my answer.  I have tested it to be accurate by making a loop that checks that the answer it gives is the same as the one given by the Boost geometry library and they agree on each test, though the one that I have written below is much much faster than the one in Boost.  The test makes every possible line segment where x is and integer in [-3,2] and y is an integer in [-3,2], for all possible pairs of line segments.\r\n\r\nThe code below considers line segments that touch at endpoints to be intersecting. \r\n T-shaped intersections are also considered intersecting.  The code is in c++ but would be easily adaptable to any language.  It&#39;s based on a different stackoverflow answer but that answer did not handle endpoints correctly.\r\n\r\nIt uses the cross product method, which can report if a point is to the left or to the right of a given ray.\r\n\r\nThere are some optimizations to be made in the math but doing them showed no performance improvement over compilation with `g++ -O2` and sometime the performance even decreased!  The compiler is able to do those optimizations so I prefered to leave the code readable.\r\n\r\n```c++\r\n// is_left(): tests if a point is Left|On|Right of an infinite line.\r\n//    Input:  three points p0, p1, and p2\r\n//    Return: &gt;0 for p2 left of the line through p0 and p1\r\n//            =0 for p2 on the line\r\n//            &lt;0 for p2 right of the line\r\n//    See: Algorithm 1 &quot;Area of Triangles and Polygons&quot;\r\n//    This is p0p1 cross p0p2.\r\nextern inline coordinate_type_fp is_left(point_type_fp p0, point_type_fp p1, point_type_fp p2) {\r\n  return ((p1.x() - p0.x()) * (p2.y() - p0.y()) -\r\n          (p2.x() - p0.x()) * (p1.y() - p0.y()));\r\n}\r\n\r\n// Is x between a and b, where a can be lesser or greater than b.  If\r\n// x == a or x == b, also returns true. */\r\nextern inline coordinate_type_fp is_between(coordinate_type_fp a,\r\n                                            coordinate_type_fp x,\r\n                                            coordinate_type_fp b) {\r\n  return x == a || x == b || (a-x&gt;0) == (x-b&gt;0);\r\n}\r\n\r\n// https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect\r\nextern inline bool is_intersecting(const point_type_fp&amp; p0, const point_type_fp&amp; p1,\r\n                                   const point_type_fp&amp; p2, const point_type_fp&amp; p3) {\r\n  const coordinate_type_fp left012 = is_left(p0, p1, p2);\r\n  const coordinate_type_fp left013 = is_left(p0, p1, p3);\r\n  const coordinate_type_fp left230 = is_left(p2, p3, p0);\r\n  const coordinate_type_fp left231 = is_left(p2, p3, p1);\r\n\r\n  if (p0 != p1) {\r\n    if (left012 == 0) {\r\n      if (is_between(p0.x(), p2.x(), p1.x()) &amp;&amp;\r\n          is_between(p0.y(), p2.y(), p1.y())) {\r\n        return true; // p2 is on the line p0 to p1\r\n      }\r\n    }\r\n    if (left013 == 0) {\r\n      if (is_between(p0.x(), p3.x(), p1.x()) &amp;&amp;\r\n          is_between(p0.y(), p3.y(), p1.y())) {\r\n        return true; // p3 is on the line p0 to p1\r\n      }\r\n    }\r\n  }\r\n  if (p2 != p3) {\r\n    if (left230 == 0) {\r\n      if (is_between(p2.x(), p0.x(), p3.x()) &amp;&amp;\r\n          is_between(p2.y(), p0.y(), p3.y())) {\r\n        return true; // p0 is on the line p2 to p3\r\n      }\r\n    }\r\n    if (left231 == 0) {\r\n      if (is_between(p2.x(), p1.x(), p3.x()) &amp;&amp;\r\n          is_between(p2.y(), p1.y(), p3.y())) {\r\n        return true; // p1 is on the line p2 to p3\r\n      }\r\n    }\r\n  }\r\n  if ((left012 &gt; 0) == (left013 &gt; 0) ||\r\n      (left230 &gt; 0) == (left231 &gt; 0)) {\r\n    if (p1 == p2) {\r\n      return true;\r\n    }\r\n    return false;\r\n  } else {\r\n    return true;\r\n  }\r\n}\r\n```\r\n\r\nThe test code:\r\n\r\n```c++\r\nBOOST_AUTO_TEST_CASE(small, *boost::unit_test::disabled()) {\r\n  for (double x0 = -3; x0 &lt; 3; x0++) {\r\n    for (double y0 = -3; y0 &lt; 3; y0++) {\r\n      for (double x1 = -3; x1 &lt; 3; x1++) {\r\n        for (double y1 = -3; y1 &lt; 3; y1++) {\r\n          for (double x2 = -3; x2 &lt; 3; x2++) {\r\n            for (double y2 = -3; y2 &lt; 3; y2++) {\r\n              for (double x3 = -3; x3 &lt; 3; x3++) {\r\n                for (double y3 = -3; y3 &lt; 3; y3++) {\r\n                  point_type_fp p0{x0, y0};\r\n                  point_type_fp p1{x1, y1};\r\n                  point_type_fp p2{x2, y2};\r\n                  point_type_fp p3{x3, y3};\r\n                  linestring_type_fp ls0{p0,p1};\r\n                  linestring_type_fp ls1{p2,p3};\r\n                  BOOST_TEST_INFO(&quot;intersection: &quot; &lt;&lt; bg::wkt(ls0) &lt;&lt; &quot; &quot; &lt;&lt; bg::wkt(ls1));\r\n                  BOOST_CHECK_EQUAL(\r\n                      path_finding::is_intersecting(p0, p1, p2, p3),\r\n                      bg::intersects(ls0, ls1));\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```","title":"Line Segments Intersection(intersection Point)","body":"<p>Here's my answer.  I have tested it to be accurate by making a loop that checks that the answer it gives is the same as the one given by the Boost geometry library and they agree on each test, though the one that I have written below is much much faster than the one in Boost.  The test makes every possible line segment where x is and integer in [-3,2] and y is an integer in [-3,2], for all possible pairs of line segments.</p>\n<p>The code below considers line segments that touch at endpoints to be intersecting.\nT-shaped intersections are also considered intersecting.  The code is in c++ but would be easily adaptable to any language.  It's based on a different stackoverflow answer but that answer did not handle endpoints correctly.</p>\n<p>It uses the cross product method, which can report if a point is to the left or to the right of a given ray.</p>\n<p>There are some optimizations to be made in the math but doing them showed no performance improvement over compilation with <code>g++ -O2</code> and sometime the performance even decreased!  The compiler is able to do those optimizations so I prefered to leave the code readable.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// is_left(): tests if a point is Left|On|Right of an infinite line.\n//    Input:  three points p0, p1, and p2\n//    Return: &gt;0 for p2 left of the line through p0 and p1\n//            =0 for p2 on the line\n//            &lt;0 for p2 right of the line\n//    See: Algorithm 1 &quot;Area of Triangles and Polygons&quot;\n//    This is p0p1 cross p0p2.\nextern inline coordinate_type_fp is_left(point_type_fp p0, point_type_fp p1, point_type_fp p2) {\n  return ((p1.x() - p0.x()) * (p2.y() - p0.y()) -\n          (p2.x() - p0.x()) * (p1.y() - p0.y()));\n}\n\n// Is x between a and b, where a can be lesser or greater than b.  If\n// x == a or x == b, also returns true. */\nextern inline coordinate_type_fp is_between(coordinate_type_fp a,\n                                            coordinate_type_fp x,\n                                            coordinate_type_fp b) {\n  return x == a || x == b || (a-x&gt;0) == (x-b&gt;0);\n}\n\n// https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect\nextern inline bool is_intersecting(const point_type_fp&amp; p0, const point_type_fp&amp; p1,\n                                   const point_type_fp&amp; p2, const point_type_fp&amp; p3) {\n  const coordinate_type_fp left012 = is_left(p0, p1, p2);\n  const coordinate_type_fp left013 = is_left(p0, p1, p3);\n  const coordinate_type_fp left230 = is_left(p2, p3, p0);\n  const coordinate_type_fp left231 = is_left(p2, p3, p1);\n\n  if (p0 != p1) {\n    if (left012 == 0) {\n      if (is_between(p0.x(), p2.x(), p1.x()) &amp;&amp;\n          is_between(p0.y(), p2.y(), p1.y())) {\n        return true; // p2 is on the line p0 to p1\n      }\n    }\n    if (left013 == 0) {\n      if (is_between(p0.x(), p3.x(), p1.x()) &amp;&amp;\n          is_between(p0.y(), p3.y(), p1.y())) {\n        return true; // p3 is on the line p0 to p1\n      }\n    }\n  }\n  if (p2 != p3) {\n    if (left230 == 0) {\n      if (is_between(p2.x(), p0.x(), p3.x()) &amp;&amp;\n          is_between(p2.y(), p0.y(), p3.y())) {\n        return true; // p0 is on the line p2 to p3\n      }\n    }\n    if (left231 == 0) {\n      if (is_between(p2.x(), p1.x(), p3.x()) &amp;&amp;\n          is_between(p2.y(), p1.y(), p3.y())) {\n        return true; // p1 is on the line p2 to p3\n      }\n    }\n  }\n  if ((left012 &gt; 0) == (left013 &gt; 0) ||\n      (left230 &gt; 0) == (left231 &gt; 0)) {\n    if (p1 == p2) {\n      return true;\n    }\n    return false;\n  } else {\n    return true;\n  }\n}\n</code></pre>\n<p>The test code:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>BOOST_AUTO_TEST_CASE(small, *boost::unit_test::disabled()) {\n  for (double x0 = -3; x0 &lt; 3; x0++) {\n    for (double y0 = -3; y0 &lt; 3; y0++) {\n      for (double x1 = -3; x1 &lt; 3; x1++) {\n        for (double y1 = -3; y1 &lt; 3; y1++) {\n          for (double x2 = -3; x2 &lt; 3; x2++) {\n            for (double y2 = -3; y2 &lt; 3; y2++) {\n              for (double x3 = -3; x3 &lt; 3; x3++) {\n                for (double y3 = -3; y3 &lt; 3; y3++) {\n                  point_type_fp p0{x0, y0};\n                  point_type_fp p1{x1, y1};\n                  point_type_fp p2{x2, y2};\n                  point_type_fp p3{x3, y3};\n                  linestring_type_fp ls0{p0,p1};\n                  linestring_type_fp ls1{p2,p3};\n                  BOOST_TEST_INFO(&quot;intersection: &quot; &lt;&lt; bg::wkt(ls0) &lt;&lt; &quot; &quot; &lt;&lt; bg::wkt(ls1));\n                  BOOST_CHECK_EQUAL(\n                      path_finding::is_intersecting(p0, p1, p2, p3),\n                      bg::intersects(ls0, ls1));\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2737555,"reputation":1073,"user_id":2359895,"accept_rate":100,"display_name":"Paul Baxter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696158112,"creation_date":1696158112,"answer_id":77210195,"question_id":29854085,"body_markdown":"    // calculate the intersection of 2 line segments\r\n    // segment 1 = points A and B\r\n    // segment 2 = points C and D\r\n    // if there is an intersection return the point in pt\r\n    // from https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection\r\n    //\r\n    //      /      \\     /         \\          /      \\     /         \\\r\n    //      |  x1  |     | x2 - x1 |          |  x3  |     | x4 - x3 |\r\n    // L1 = |  --  | + t | ------- |,    L2 = |  --  | + u | ------- |\r\n    //      |  y1  |     | y2 - y1 |          |  y3  |     | y4 - y3 |\r\n    //      \\      /     \\         /          \\      /     \\         /\r\n    //\r\n    //\r\n    //      |  x1 - x3   x3 - x4  |\r\n    //      |  y1 - y3   y3 - y4  |     (x1 - x3)(y3 - y4) - (y1 - y3)(x3 - x4)\r\n    // t  = -----------------------  =  ---------------------------------------\r\n    //      |  x1 - x2   x3 - x4  |     (x1 - x2)(y3 - y4) - (y1 - y2)(x3 - x4)\r\n    //      |  y1 - y2   y3 - y4  |\r\n    //\r\n    //\r\n    //      |  x1 - x3   x1 - x2  |\r\n    //      |  y1 - y3   y1 - y2  |     (x1 - x3)(y1 - y2) - (y1 - y3)(x1 - x2)\r\n    // u  = -----------------------  =  ---------------------------------------\r\n    //      |  x1 - x2   x3 - x4  |     (x1 - x2)(y3 - y4) - (y1 - y2)(x3 - x4)\r\n    //      |  y1 - y2   y3 - y4  |\r\n    //\r\n    // (Px,Py) = (x1 + t(x2 - x1), y1 + t(y2 - y1))\r\n    //\r\n    // NOTE:\r\n    //    denominators are the same for t and u and must not be 0\r\n    //    t and u must be in the range 0 to 1\r\n    //\r\n    bool calc_intersection(const point&amp; A, const point&amp; B, const point&amp; C, const point&amp; D, point&amp; pt)\r\n    {\r\n       const double compare_tolerance = .00001;\r\n\r\n        pt = { 0,0 };\r\n\r\n        const auto x1 = A.x;\r\n        const auto y1 = A.y;\r\n        const auto x2 = B.x;\r\n        const auto y2 = B.y;\r\n        const auto x3 = C.x;\r\n        const auto y3 = C.y;\r\n        const auto x4 = D.x;\r\n        const auto y4 = D.y;\r\n\r\n        // this is done for simplifying terms\r\n        const auto x1_x2 = x1 - x2;\r\n        const auto x1_x3 = x1 - x3;\r\n        const auto x2_x1 = x2 - x1;\r\n        const auto x3_x4 = x3 - x4;\r\n\r\n        const auto y1_y2 = y1 - y2;\r\n        const auto y1_y3 = y1 - y3;\r\n        const auto y2_y1 = y2 - y1;\r\n        const auto y3_y4 = y3 - y4;\r\n\r\n        const auto denominator = x1_x2 * y3_y4 - y1_y2 * x3_x4;\r\n        if (abs(denominator) &lt; compare_tolerance)\r\n            return false;\r\n\r\n        const auto t = (x1_x3 * y3_y4 - y1_y3 * x3_x4) / denominator;\r\n        if (t &lt; 0 || t &gt; 1)\r\n            return false;\r\n\r\n        const auto u = (x1_x3 * y1_y2 - y1_y3 * x1_x2) / denominator;\r\n        if (u &lt; 0 || u &gt; 1)\r\n            return false;\r\n\r\n        pt = point(x1 + t * x2_x1, y1 + t * y2_y1);\r\n        return true;\r\n    }\r\n","title":"Line Segments Intersection(intersection Point)","body":"<pre><code>// calculate the intersection of 2 line segments\n// segment 1 = points A and B\n// segment 2 = points C and D\n// if there is an intersection return the point in pt\n// from https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection\n//\n//      /      \\     /         \\          /      \\     /         \\\n//      |  x1  |     | x2 - x1 |          |  x3  |     | x4 - x3 |\n// L1 = |  --  | + t | ------- |,    L2 = |  --  | + u | ------- |\n//      |  y1  |     | y2 - y1 |          |  y3  |     | y4 - y3 |\n//      \\      /     \\         /          \\      /     \\         /\n//\n//\n//      |  x1 - x3   x3 - x4  |\n//      |  y1 - y3   y3 - y4  |     (x1 - x3)(y3 - y4) - (y1 - y3)(x3 - x4)\n// t  = -----------------------  =  ---------------------------------------\n//      |  x1 - x2   x3 - x4  |     (x1 - x2)(y3 - y4) - (y1 - y2)(x3 - x4)\n//      |  y1 - y2   y3 - y4  |\n//\n//\n//      |  x1 - x3   x1 - x2  |\n//      |  y1 - y3   y1 - y2  |     (x1 - x3)(y1 - y2) - (y1 - y3)(x1 - x2)\n// u  = -----------------------  =  ---------------------------------------\n//      |  x1 - x2   x3 - x4  |     (x1 - x2)(y3 - y4) - (y1 - y2)(x3 - x4)\n//      |  y1 - y2   y3 - y4  |\n//\n// (Px,Py) = (x1 + t(x2 - x1), y1 + t(y2 - y1))\n//\n// NOTE:\n//    denominators are the same for t and u and must not be 0\n//    t and u must be in the range 0 to 1\n//\nbool calc_intersection(const point&amp; A, const point&amp; B, const point&amp; C, const point&amp; D, point&amp; pt)\n{\n   const double compare_tolerance = .00001;\n\n    pt = { 0,0 };\n\n    const auto x1 = A.x;\n    const auto y1 = A.y;\n    const auto x2 = B.x;\n    const auto y2 = B.y;\n    const auto x3 = C.x;\n    const auto y3 = C.y;\n    const auto x4 = D.x;\n    const auto y4 = D.y;\n\n    // this is done for simplifying terms\n    const auto x1_x2 = x1 - x2;\n    const auto x1_x3 = x1 - x3;\n    const auto x2_x1 = x2 - x1;\n    const auto x3_x4 = x3 - x4;\n\n    const auto y1_y2 = y1 - y2;\n    const auto y1_y3 = y1 - y3;\n    const auto y2_y1 = y2 - y1;\n    const auto y3_y4 = y3 - y4;\n\n    const auto denominator = x1_x2 * y3_y4 - y1_y2 * x3_x4;\n    if (abs(denominator) &lt; compare_tolerance)\n        return false;\n\n    const auto t = (x1_x3 * y3_y4 - y1_y3 * x3_x4) / denominator;\n    if (t &lt; 0 || t &gt; 1)\n        return false;\n\n    const auto u = (x1_x3 * y1_y2 - y1_y3 * x1_x2) / denominator;\n    if (u &lt; 0 || u &gt; 1)\n        return false;\n\n    pt = point(x1 + t * x2_x1, y1 + t * y2_y1);\n    return true;\n}\n</code></pre>\n"}],"owner":{"account_id":4309809,"reputation":115,"user_id":3521250,"accept_rate":33,"display_name":"user3521250"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1696158112,"creation_date":1429897275,"question_id":29854085,"body_markdown":"I have created a function to calculate the intersection point of two line segment .\r\n\r\nUnfortunantly the code below dosen&#39;t work if one of the segment is verticale\r\n \r\n\r\n        public static Point intersection(Segment s1, Segment s2) {\r\n        double x1 = s1.getP1().getX();\r\n        double y1 = s1.getP1().getY() ;\r\n        double x2 = s1.getP2().getX();\r\n        double y2 = s1.getP2().getY() ;\r\n        double x3 = s2.getP1().getX();\r\n        double y3 = s2.getP1().getY();\r\n        double x4 = s2.getP2().getX();\r\n        double y4 = s2.getP2().getY();\r\n\r\n        double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\r\n        if (d == 0) {\r\n            return null;\r\n        }\r\n        double xi = ((x3 - x4) * (x1 * y2 - y1 * x2) - (x1 - x2) * (x3 * y4 - y3 * x4)) / d;\r\n        double yi = ((y3 - y4) * (x1 * y2 - y1 * x2) - (y1 - y2) * (x3 * y4 - y3 * x4)) / d;\r\n        Point p = new Point(xi, yi);\r\n        if (xi &lt; Math.min(x1, x2) || xi &gt; Math.max(x1, x2)) {\r\n            return null;\r\n        }\r\n        if (xi &lt; Math.min(x3, x4) || xi &gt; Math.max(x3, x4)) {\r\n            return null;\r\n        }\r\n        return p;\r\n    }\r\n\r\n\r\nthe problem when i have a vertical line segment , this formula\r\n\r\n    double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\r\n\r\n is equal to 0 and the method return null.\r\n\r\nHow can I handle this exception.\r\n\r\nThank you","title":"Line Segments Intersection(intersection Point)","body":"<p>I have created a function to calculate the intersection point of two line segment .</p>\n\n<p>Unfortunantly the code below dosen't work if one of the segment is verticale</p>\n\n<pre><code>    public static Point intersection(Segment s1, Segment s2) {\n    double x1 = s1.getP1().getX();\n    double y1 = s1.getP1().getY() ;\n    double x2 = s1.getP2().getX();\n    double y2 = s1.getP2().getY() ;\n    double x3 = s2.getP1().getX();\n    double y3 = s2.getP1().getY();\n    double x4 = s2.getP2().getX();\n    double y4 = s2.getP2().getY();\n\n    double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n    if (d == 0) {\n        return null;\n    }\n    double xi = ((x3 - x4) * (x1 * y2 - y1 * x2) - (x1 - x2) * (x3 * y4 - y3 * x4)) / d;\n    double yi = ((y3 - y4) * (x1 * y2 - y1 * x2) - (y1 - y2) * (x3 * y4 - y3 * x4)) / d;\n    Point p = new Point(xi, yi);\n    if (xi &lt; Math.min(x1, x2) || xi &gt; Math.max(x1, x2)) {\n        return null;\n    }\n    if (xi &lt; Math.min(x3, x4) || xi &gt; Math.max(x3, x4)) {\n        return null;\n    }\n    return p;\n}\n</code></pre>\n\n<p>the problem when i have a vertical line segment , this formula</p>\n\n<pre><code>double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n</code></pre>\n\n<p>is equal to 0 and the method return null.</p>\n\n<p>How can I handle this exception.</p>\n\n<p>Thank you</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696144016,"post_id":77209529,"comment_id":136114098,"body_markdown":"Can you please include a [mcve] as well as what exactly you tried and why? Also, please use a [code block] to format any code/data/errors you have.","body":"Can you please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as well as what exactly you tried and why? Also, please use a <a href=\"https://stackoverflow.com/editing-help#code\">code block</a> to format any code/data/errors you have."},{"owner":{"account_id":26506211,"reputation":1,"user_id":20142337,"display_name":"Amit Kumar sahu"},"score":0,"creation_date":1696144853,"post_id":77209529,"comment_id":136114153,"body_markdown":"When I run this project locally it runs as expected. But when I try to deploy it to the railway server It does not run.","body":"When I run this project locally it runs as expected. But when I try to deploy it to the railway server It does not run."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696146836,"post_id":77209529,"comment_id":136114299,"body_markdown":"As mentioned, please create a [mcve] with the minimal necessary code and configuration to reproduce the problem.","body":"As mentioned, please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with the minimal necessary code and configuration to reproduce the problem."},{"owner":{"account_id":26506211,"reputation":1,"user_id":20142337,"display_name":"Amit Kumar sahu"},"score":0,"creation_date":1696148350,"post_id":77209529,"comment_id":136114431,"body_markdown":"I did not set the environment variable so the error occurred after @dea1st suggestions, I realized and checked and set the environment variable. Now, It is working as expected. thank you","body":"I did not set the environment variable so the error occurred after @dea1st suggestions, I realized and checked and set the environment variable. Now, It is working as expected. thank you"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696149731,"post_id":77209529,"comment_id":136114539,"body_markdown":"In case you think this solution could help future readers, you can [answer your own question](https://stackoverflow.com/help/self-answer) and share what exactly needs to be done in order to fix this issue.","body":"In case you think this solution could help future readers, you can <a href=\"https://stackoverflow.com/help/self-answer\">answer your own question</a> and share what exactly needs to be done in order to fix this issue."},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1696157450,"post_id":77209529,"comment_id":136115169,"body_markdown":"I guess you mean you have migrated to Spring Boot 3.1.2, because Spring (or Spring Framework) 3.1.2 is ancient.","body":"I guess you mean you have migrated to Spring Boot 3.1.2, because Spring (or Spring Framework) 3.1.2 is ancient."},{"owner":{"account_id":18999437,"reputation":2463,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1696415515,"post_id":77209529,"comment_id":136149108,"body_markdown":"Welcome to Stack Overflow! Thank you for your question. However it seems like you are not familiar with the guide of Stack Overflow to [How To: Ask a good question](https://stackoverflow.com/help/how-to-ask). Please read it and adjust your question accordingly by using the [Edit](https://stackoverflow.com/posts/77068047/edit) option. Happy coding!","body":"Welcome to Stack Overflow! Thank you for your question. However it seems like you are not familiar with the guide of Stack Overflow to <a href=\"https://stackoverflow.com/help/how-to-ask\">How To: Ask a good question</a>. Please read it and adjust your question accordingly by using the <a href=\"https://stackoverflow.com/posts/77068047/edit\">Edit</a> option. Happy coding!"}],"answers":[{"tags":[],"owner":{"account_id":29515674,"reputation":1,"user_id":22619681,"display_name":"Ramin Gahramanzada"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696144651,"creation_date":1696144651,"answer_id":77209562,"question_id":77209529,"body_markdown":"that is your answer:\r\n. Specifically, it seems to be related to the configuration file location, which must end with a &#39;/&#39;.\r\n\r\njava.lang.IllegalStateException: Location &#39;file:./config//application-/etc/profile.yaml&#39; must end with &#39;/&#39;\r\nTo resolve this issue, you should check the application&#39;s configuration file and ensure that the location is correctly specified and ends with a &#39;/&#39;.\r\nLocate your Spring Boot application&#39;s configuration file, which appears to be application-/etc/profile.yaml.\r\n\r\nVerify that the location specified in your configuration file is correctly formatted and ends with a &#39;/&#39;. \r\n","title":"I have migrated spring to 3.1.2 then It runs as expected in local machine then but when I deployed this to railway server then i got this error","body":"<p>that is your answer:\n. Specifically, it seems to be related to the configuration file location, which must end with a '/'.</p>\n<p>java.lang.IllegalStateException: Location 'file:./config//application-/etc/profile.yaml' must end with '/'\nTo resolve this issue, you should check the application's configuration file and ensure that the location is correctly specified and ends with a '/'.\nLocate your Spring Boot application's configuration file, which appears to be application-/etc/profile.yaml.</p>\n<p>Verify that the location specified in your configuration file is correctly formatted and ends with a '/'.</p>\n"}],"owner":{"account_id":26506211,"reputation":1,"user_id":20142337,"display_name":"Amit Kumar sahu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1696157563,"creation_date":1696143633,"question_id":77209529,"body_markdown":"18:01:21.983 [main] ERROR org.springframework.boot.SpringApplication -- Application run failed\r\n\r\n```none\r\njava.lang.IllegalStateException: Location &#39;file:./config//application-/etc/profile.yaml&#39; must end with &#39;/&#39;\r\n    at org.springframework.util.Assert.state(Assert.java:97)\r\n    at org.springframework.boot.context.config.LocationResourceLoader.validatePattern(LocationResourceLoader.java:134)\r\n    at org.springframework.boot.context.config.LocationResourceLoader.getResources(LocationResourceLoader.java:95)\r\n    at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolvePattern(StandardConfigDataLocationResolver.java:314)\r\n    at at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolveProfileSpecific(StandardConfigDataLocationResolver.java:150)\r\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.lambda$resolve$2(ConfigDataLocationResolvers.java:107)\r\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:113)\r\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:106)\r\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:94)\r\n    at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:106)\r\n    at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:98)\r\n    at org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:86)\r\n    at org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)\r\n    at org.springframework.boot.context.config.ConfigDataEnvironment.processWithProfiles(ConfigDataEnvironment.java:313)\r\n    at org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:234)\r\n    at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)\r\n    at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)\r\n    at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)\r\n    at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)\r\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n    at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\r\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\r\n    at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\r\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\r\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\r\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\r\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:356)\r\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\r\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\r\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\r\n    at com.amit.dps.Application.main(Application.java:31)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:95)\r\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\r\n```\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.amit.dps&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;dps.app.apis&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;dps.app.apis&lt;/name&gt;\r\n\t&lt;description&gt;This is backend apis for school website&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- spring security dependency  --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;version&gt;8.0.31&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.modelmapper/modelmapper --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-validation --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;0.9.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t   &lt;dependency&gt;\r\n\t        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\r\n\t        &lt;version&gt;2.3.0.1&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t        &lt;version&gt;2.3.1&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    \r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n","title":"I have migrated spring to 3.1.2 then It runs as expected in local machine then but when I deployed this to railway server then i got this error","body":"<p>18:01:21.983 [main] ERROR org.springframework.boot.SpringApplication -- Application run failed</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.IllegalStateException: Location 'file:./config//application-/etc/profile.yaml' must end with '/'\n    at org.springframework.util.Assert.state(Assert.java:97)\n    at org.springframework.boot.context.config.LocationResourceLoader.validatePattern(LocationResourceLoader.java:134)\n    at org.springframework.boot.context.config.LocationResourceLoader.getResources(LocationResourceLoader.java:95)\n    at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolvePattern(StandardConfigDataLocationResolver.java:314)\n    at at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolveProfileSpecific(StandardConfigDataLocationResolver.java:150)\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.lambda$resolve$2(ConfigDataLocationResolvers.java:107)\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:113)\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:106)\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:94)\n    at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:106)\n    at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:98)\n    at org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:86)\n    at org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:115)\n    at org.springframework.boot.context.config.ConfigDataEnvironment.processWithProfiles(ConfigDataEnvironment.java:313)\n    at org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:234)\n    at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:96)\n    at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:89)\n    at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)\n    at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\n    at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\n    at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:356)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\n    at com.amit.dps.Application.main(Application.java:31)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:95)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.amit.dps&lt;/groupId&gt;\n    &lt;artifactId&gt;dps.app.apis&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;dps.app.apis&lt;/name&gt;\n    &lt;description&gt;This is backend apis for school website&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!-- spring security dependency  --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        \n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;version&gt;8.0.31&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!-- https://mvnrepository.com/artifact/org.modelmapper/modelmapper --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-validation --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!-- https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n       &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","data-structures","collections"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":5,"creation_date":1324968719,"post_id":8641883,"comment_id":10733870,"body_markdown":"TreeSet and TreeMap are two collections backed up by a binary tree.","body":"TreeSet and TreeMap are two collections backed up by a binary tree."},{"owner":{"account_id":439254,"reputation":10081,"user_id":828077,"accept_rate":62,"display_name":"Rajesh Pantula"},"score":2,"creation_date":1324969089,"post_id":8641883,"comment_id":10733932,"body_markdown":"Im not talking only of Binary tree, Why dont we have a generalized tree implementation, a Tree Inteface ?","body":"Im not talking only of Binary tree, Why dont we have a generalized tree implementation, a Tree Inteface ?"},{"owner":{"account_id":439254,"reputation":10081,"user_id":828077,"accept_rate":62,"display_name":"Rajesh Pantula"},"score":1,"creation_date":1324969226,"post_id":8641883,"comment_id":10733958,"body_markdown":"there are lot of external libraries, which give this kind of functionality, rather it could have been included in Collections API itself, my questions is why it is not included as a general data-structure in collection API of java.?","body":"there are lot of external libraries, which give this kind of functionality, rather it could have been included in Collections API itself, my questions is why it is not included as a general data-structure in collection API of java.?"},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":3,"creation_date":1324969258,"post_id":8641883,"comment_id":10733963,"body_markdown":"You&#39;d need to ask James Gosling. No one here can answer your question with any authority. Anything anyone would have to say would be merely speculation and opinion.","body":"You&#39;d need to ask James Gosling. No one here can answer your question with any authority. Anything anyone would have to say would be merely speculation and opinion."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1324971911,"post_id":8641883,"comment_id":10734344,"body_markdown":"javax.swing.tree.TreeModel is a tree. I&#39;ve never used it outside of Swing, but I don&#39;t see why it couldn&#39;t be.","body":"javax.swing.tree.TreeModel is a tree. I&#39;ve never used it outside of Swing, but I don&#39;t see why it couldn&#39;t be."},{"owner":{"account_id":367162,"reputation":1451,"user_id":713165,"accept_rate":58,"display_name":"Nitin"},"score":1,"creation_date":1324978540,"post_id":8641883,"comment_id":10735392,"body_markdown":"you do have treeset and tree map.","body":"you do have treeset and tree map."},{"owner":{"account_id":1494269,"reputation":922,"user_id":1400596,"accept_rate":42,"display_name":"Mangoose"},"score":4,"creation_date":1409739379,"post_id":8641883,"comment_id":40064403,"body_markdown":"@BrianRoach  Not James gosling. We need to ask Joshua Bloch:)","body":"@BrianRoach  Not James gosling. We need to ask Joshua Bloch:)"},{"owner":{"account_id":213709,"reputation":8276,"user_id":467240,"accept_rate":57,"display_name":"mtyson"},"score":0,"creation_date":1412001236,"post_id":8641883,"comment_id":40904927,"body_markdown":"Make sure you close this one because its actually interesting.  Power trip.","body":"Make sure you close this one because its actually interesting.  Power trip."},{"owner":{"account_id":43131,"reputation":4487,"user_id":125904,"accept_rate":76,"display_name":"asyncwait"},"score":0,"creation_date":1428134320,"post_id":8641883,"comment_id":47055673,"body_markdown":"`TreeMap` and `TreeSet` are always confusing names for tree based implementation of `Map` and `Set`","body":"<code>TreeMap</code> and <code>TreeSet</code> are always confusing names for tree based implementation of <code>Map</code> and <code>Set</code>"},{"owner":{"account_id":1109288,"reputation":1653,"user_id":1100060,"accept_rate":0,"display_name":"Nathan B"},"score":0,"creation_date":1645224212,"post_id":8641883,"comment_id":125823204,"body_markdown":"Great question. TreeMap and TreeSet can&#39;t contain elements with identical key, we definitely need a regular sorted Tree implementation.","body":"Great question. TreeMap and TreeSet can&#39;t contain elements with identical key, we definitely need a regular sorted Tree implementation."}],"answers":[{"tags":[],"owner":{"account_id":414094,"reputation":3948,"user_id":788109,"accept_rate":86,"display_name":"Scorpion"},"down_vote_count":4,"up_vote_count":2,"is_accepted":false,"score":-2,"last_activity_date":1324968701,"creation_date":1324968701,"answer_id":8641936,"question_id":8641883,"body_markdown":"java.util.TreeMap is an implementation of Red and Black Tree.","title":"Why Java Collections API does not have Tree implementation","body":"<p>java.util.TreeMap is an implementation of Red and Black Tree.</p>\n"},{"tags":[],"owner":{"account_id":1118498,"reputation":950,"user_id":1107296,"display_name":"Wizart"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1324969363,"creation_date":1324968951,"answer_id":8641952,"question_id":8641883,"body_markdown":"IMHO, theoretically, Tree is not a type of collection, it&#39;s just a type of implementation. I mean there are abstract collections such as Set (unordered set of entries), List (ordered set of entries), Map (two sets of entries with relations between them), and there are their implementations: array, list (e.g. ArrayList and LinkedList), HashSet etc., all of them have their own advantages and disadvantages. Thus, Tree is just one of implementations (for lists, e.g.) which may give you (roughly) faster search than array but no access by index.\r\n\r\nBTW, there is TreeMap (&quot;Red-Black tree based NavigableMap implementation&quot;) and TreeSet (&quot;A NavigableSet implementation based on a TreeMap.&quot;) classes in Java.","title":"Why Java Collections API does not have Tree implementation","body":"<p>IMHO, theoretically, Tree is not a type of collection, it's just a type of implementation. I mean there are abstract collections such as Set (unordered set of entries), List (ordered set of entries), Map (two sets of entries with relations between them), and there are their implementations: array, list (e.g. ArrayList and LinkedList), HashSet etc., all of them have their own advantages and disadvantages. Thus, Tree is just one of implementations (for lists, e.g.) which may give you (roughly) faster search than array but no access by index.</p>\n\n<p>BTW, there is TreeMap (\"Red-Black tree based NavigableMap implementation\") and TreeSet (\"A NavigableSet implementation based on a TreeMap.\") classes in Java.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1696157440,"creation_date":1324970710,"answer_id":8642120,"question_id":8641883,"body_markdown":"&gt; I think there should be some strong reason why they decided not to include it in collections API.\r\n\r\nI think that the reason is that nobody has come up with a good API for trees that is both \r\n\r\n  - general purpose enough to cover a wide range of use-cases, and \r\n  - useful enough to compensate for the performance and usability overheads of being general.  \r\n\r\n(And where do you stop? Tree? Binary tree? N-ary tree? DAG? Graph?)\r\n\r\nIt is worth noting that neither Apache Commons Collections or Google Collections (aka Guava) have a tree API.  However, there is an active Guava issue on this topic - http://code.google.com/p/guava-libraries/issues/detail?id=174 - so clearly at least *some* people agree with your point of view.\r\n\r\n**UPDATE**\r\n\r\nAs of version 15.0, Guava now has tree support in the form of the `TreeTraverser` and `BinaryTreeTraverser` classes.  But this may not be what you expect.  In truth, these classes don&#39;t actually implement the tree data structure.  Instead, you have to do this in a generic type parameter.  Further to that, the `Traverser` classes even avoid making assumptions about the APIs of the node type.  They do this by being abstract classes, and requiring the concrete traverser subtype to implement the operations that interrogate the tree; e.g. to get a node&#39;s children.\r\n\r\n--------\r\n\r\nFWIW, `TreeMap` and `TreeSet` are not &quot;tree APIs&quot;.  They are tree-based implementations of the `Map` and `Set` APIs.  The tree-ness is totally concealed by the public APIs, making these two classes completely unsuitable for use as general purpose trees.","title":"Why Java Collections API does not have Tree implementation","body":"<blockquote>\n<p>I think there should be some strong reason why they decided not to include it in collections API.</p>\n</blockquote>\n<p>I think that the reason is that nobody has come up with a good API for trees that is both</p>\n<ul>\n<li>general purpose enough to cover a wide range of use-cases, and</li>\n<li>useful enough to compensate for the performance and usability overheads of being general.</li>\n</ul>\n<p>(And where do you stop? Tree? Binary tree? N-ary tree? DAG? Graph?)</p>\n<p>It is worth noting that neither Apache Commons Collections or Google Collections (aka Guava) have a tree API.  However, there is an active Guava issue on this topic - <a href=\"http://code.google.com/p/guava-libraries/issues/detail?id=174\" rel=\"nofollow noreferrer\">http://code.google.com/p/guava-libraries/issues/detail?id=174</a> - so clearly at least <em>some</em> people agree with your point of view.</p>\n<p><strong>UPDATE</strong></p>\n<p>As of version 15.0, Guava now has tree support in the form of the <code>TreeTraverser</code> and <code>BinaryTreeTraverser</code> classes.  But this may not be what you expect.  In truth, these classes don't actually implement the tree data structure.  Instead, you have to do this in a generic type parameter.  Further to that, the <code>Traverser</code> classes even avoid making assumptions about the APIs of the node type.  They do this by being abstract classes, and requiring the concrete traverser subtype to implement the operations that interrogate the tree; e.g. to get a node's children.</p>\n<hr />\n<p>FWIW, <code>TreeMap</code> and <code>TreeSet</code> are not &quot;tree APIs&quot;.  They are tree-based implementations of the <code>Map</code> and <code>Set</code> APIs.  The tree-ness is totally concealed by the public APIs, making these two classes completely unsuitable for use as general purpose trees.</p>\n"}],"owner":{"account_id":439254,"reputation":10081,"user_id":828077,"accept_rate":62,"display_name":"Rajesh Pantula"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21914,"favorite_count":0,"down_vote_count":2,"up_vote_count":29,"closed_date":1325028803,"answer_count":3,"score":27,"last_activity_date":1696157440,"creation_date":1324968075,"question_id":8641883,"body_markdown":"Just out of curiosity, I recently had to use a tree for one of my programs, i had to build a binary tree myself, but why does the Collections API does not have a default implementation of tree(or even a binary tree)?\r\n\r\nI think there should be some strong reason why they decided not to include it in collections API.\r\n\r\n","title":"Why Java Collections API does not have Tree implementation","body":"<p>Just out of curiosity, I recently had to use a tree for one of my programs, i had to build a binary tree myself, but why does the Collections API does not have a default implementation of tree(or even a binary tree)?</p>\n\n<p>I think there should be some strong reason why they decided not to include it in collections API.</p>\n"},{"tags":["java","hibernate","kotlin","gradle"],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696157381,"creation_date":1696157381,"answer_id":77210145,"question_id":77209456,"body_markdown":"I bet you&#39;d need to import `hibernate-common-annotations` library to make it work, now it&#39;s missing in your gradle build file:\r\n\r\nhttps://mvnrepository.com/artifact/org.hibernate.common/hibernate-commons-annotations","title":"Exception NoClassDefFoundError: ReflectionManager with Hibernate 6","body":"<p>I bet you'd need to import <code>hibernate-common-annotations</code> library to make it work, now it's missing in your gradle build file:</p>\n<p><a href=\"https://mvnrepository.com/artifact/org.hibernate.common/hibernate-commons-annotations\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.hibernate.common/hibernate-commons-annotations</a></p>\n"}],"owner":{"account_id":23991483,"reputation":45,"user_id":17977576,"display_name":"Fridolin1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696157381,"creation_date":1696141576,"question_id":77209456,"body_markdown":"I tried to implement Hibernate 6 in my Kotlin Project, but i get the following error:\r\n`Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/ReflectionManager Caused by: java.lang.ClassNotFoundException: org.hibernate.annotations.common.reflection.ReflectionManager`\r\n\r\nThis is my build.gradle.kts:\r\n\r\n```\r\nplugins {\r\n    kotlin(&quot;jvm&quot;) version &quot;1.9.0&quot;\r\n}\r\n\r\ngroup = &quot;org.example&quot;\r\nversion = &quot;1.0-SNAPSHOT&quot;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    testImplementation(&quot;org.jetbrains.kotlin:kotlin-test:1.8.10&quot;)\r\n    // https://mvnrepository.com/artifact/org.javacord/javacord\r\n    implementation(&quot;org.javacord:javacord:3.8.0&quot;)\r\n    // https://mvnrepository.com/artifact/com.google.code.gson/gson\r\n    implementation(&quot;com.google.code.gson:gson:2.10.1&quot;)\r\n    // https://central.sonatype.com/artifact/org.hibernate.orm/hibernate-core/6.3.1.Final\r\n    implementation(&quot;org.hibernate.orm:hibernate-core:6.3.1.Final&quot;)\r\n//    // https://mvnrepository.com/artifact/org.xerial/sqlite-jdbc\r\n//    implementation(&quot;org.xerial:sqlite-jdbc:3.43.0.0&quot;)\r\n    // https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core\r\n    implementation(&quot;org.apache.logging.log4j:log4j-core:2.20.0&quot;)\r\n//    // https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-community-dialects\r\n//    implementation(&quot;org.hibernate.orm:hibernate-community-dialects:6.3.1.Final&quot;)\r\n    // https://mvnrepository.com/artifact/com.h2database/h2\r\n    implementation(&quot;com.h2database:h2:2.2.224&quot;)\r\n}\r\n\r\ntasks.test {\r\n    useJUnitPlatform()\r\n}\r\n\r\nkotlin {\r\n    jvmToolchain(8)\r\n}\r\n```\r\n\r\nAnd this my code:\r\n\r\n```\r\nfun main() {\r\n    val registry = StandardServiceRegistryBuilder().configure().build()\r\n    val sessionFactory = MetadataSources(registry).buildMetadata().buildSessionFactory()\r\n    val session = sessionFactory.openSession()\r\n    session.beginTransaction()\r\n    session.persist(Account(829707526215172136L, 639095276619169813L, 1337))\r\n    session.transaction.commit()\r\n}\r\n```\r\n\r\nI already tried to implement the hibernate-commons-annotations, because this was someone else&#39;s solution, but that didn&#39;t work.","title":"Exception NoClassDefFoundError: ReflectionManager with Hibernate 6","body":"<p>I tried to implement Hibernate 6 in my Kotlin Project, but i get the following error:\n<code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/ReflectionManager Caused by: java.lang.ClassNotFoundException: org.hibernate.annotations.common.reflection.ReflectionManager</code></p>\n<p>This is my build.gradle.kts:</p>\n<pre><code>plugins {\n    kotlin(&quot;jvm&quot;) version &quot;1.9.0&quot;\n}\n\ngroup = &quot;org.example&quot;\nversion = &quot;1.0-SNAPSHOT&quot;\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    testImplementation(&quot;org.jetbrains.kotlin:kotlin-test:1.8.10&quot;)\n    // https://mvnrepository.com/artifact/org.javacord/javacord\n    implementation(&quot;org.javacord:javacord:3.8.0&quot;)\n    // https://mvnrepository.com/artifact/com.google.code.gson/gson\n    implementation(&quot;com.google.code.gson:gson:2.10.1&quot;)\n    // https://central.sonatype.com/artifact/org.hibernate.orm/hibernate-core/6.3.1.Final\n    implementation(&quot;org.hibernate.orm:hibernate-core:6.3.1.Final&quot;)\n//    // https://mvnrepository.com/artifact/org.xerial/sqlite-jdbc\n//    implementation(&quot;org.xerial:sqlite-jdbc:3.43.0.0&quot;)\n    // https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core\n    implementation(&quot;org.apache.logging.log4j:log4j-core:2.20.0&quot;)\n//    // https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-community-dialects\n//    implementation(&quot;org.hibernate.orm:hibernate-community-dialects:6.3.1.Final&quot;)\n    // https://mvnrepository.com/artifact/com.h2database/h2\n    implementation(&quot;com.h2database:h2:2.2.224&quot;)\n}\n\ntasks.test {\n    useJUnitPlatform()\n}\n\nkotlin {\n    jvmToolchain(8)\n}\n</code></pre>\n<p>And this my code:</p>\n<pre><code>fun main() {\n    val registry = StandardServiceRegistryBuilder().configure().build()\n    val sessionFactory = MetadataSources(registry).buildMetadata().buildSessionFactory()\n    val session = sessionFactory.openSession()\n    session.beginTransaction()\n    session.persist(Account(829707526215172136L, 639095276619169813L, 1337))\n    session.transaction.commit()\n}\n</code></pre>\n<p>I already tried to implement the hibernate-commons-annotations, because this was someone else's solution, but that didn't work.</p>\n"},{"tags":["java","multithreading","java-8","jvm","jvm-hotspot"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1696155409,"post_id":77209950,"comment_id":136114993,"body_markdown":"Is the thread stack size not what you’re looking for?","body":"Is the thread stack size not what you’re looking for?"},{"owner":{"account_id":7352305,"reputation":125,"user_id":5598020,"display_name":"Gestalt"},"score":0,"creation_date":1696155662,"post_id":77209950,"comment_id":136115010,"body_markdown":"As I understand it, thread stack size in java decides how many frames I can have for each Thread&#39;s stack / how deep I could get into recursive calls. What I want to configure is the number of threads my application can create irrespective of their stack size. This seems to be independent of stack size acc. to my first source.","body":"As I understand it, thread stack size in java decides how many frames I can have for each Thread&#39;s stack / how deep I could get into recursive calls. What I want to configure is the number of threads my application can create irrespective of their stack size. This seems to be independent of stack size acc. to my first source."},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1696157117,"post_id":77209950,"comment_id":136115133,"body_markdown":"Your first point is wrong, the maximum is dependent on the OS limit **and** stack size (or in other words, either you hit the OS limit on threads, or you run out of memory). In any case, as far as I know, Java does not have an option to limit this. To be honest, I&#39;m not sure what you&#39;re doing that you need to worry about this.","body":"Your first point is wrong, the maximum is dependent on the OS limit <b>and</b> stack size (or in other words, either you hit the OS limit on threads, or you run out of memory). In any case, as far as I know, Java does not have an option to limit this. To be honest, I&#39;m not sure what you&#39;re doing that you need to worry about this."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1696410917,"post_id":77209950,"comment_id":136148047,"body_markdown":"@MarkRotteveel by default, the stack memory is allocated but not committed. So if you only create threads but don’t run them or the code executed by the thread makes no use of the stack, the stack size does indeed not influence the number of threads you can create. It had an impact on 32 bit systems, of course, where even virtual memory (address space) was scarce.","body":"@MarkRotteveel by default, the stack memory is allocated but not committed. So if you only create threads but don’t run them or the code executed by the thread makes no use of the stack, the stack size does indeed not influence the number of threads you can create. It had an impact on 32 bit systems, of course, where even virtual memory (address space) was scarce."}],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696157043,"creation_date":1696157043,"answer_id":77210132,"question_id":77209950,"body_markdown":"In OpenJDK 8, there isn&#39;t a direct JVM property to configure the max. memory **specifically for thread creation**. The memory used for thread stacks is a part of the process&#39;s native memory, and the total native memory that a process can use is managed by the operating system.\r\n\r\nSo you were right about the `-Xmx` param – it controls the maximum heap size but doesn&#39;t influence the native memory that can be used for thread creation. The important note is that if your application uses less heap memory, *more native memory may be available for thread creation*, assuming the total memory of the system is fixed - perhaps that&#39;s something you may try.\r\n\r\nSo yeah, here isn&#39;t a direct JVM property to control the total memory used for thread creation specifically.","title":"Impact of heap space / non heap space memory on number of possible threads for a jvm process","body":"<p>In OpenJDK 8, there isn't a direct JVM property to configure the max. memory <strong>specifically for thread creation</strong>. The memory used for thread stacks is a part of the process's native memory, and the total native memory that a process can use is managed by the operating system.</p>\n<p>So you were right about the <code>-Xmx</code> param – it controls the maximum heap size but doesn't influence the native memory that can be used for thread creation. The important note is that if your application uses less heap memory, <em>more native memory may be available for thread creation</em>, assuming the total memory of the system is fixed - perhaps that's something you may try.</p>\n<p>So yeah, here isn't a direct JVM property to control the total memory used for thread creation specifically.</p>\n"}],"owner":{"account_id":7352305,"reputation":125,"user_id":5598020,"display_name":"Gestalt"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77210132,"answer_count":1,"score":1,"last_activity_date":1696157043,"creation_date":1696153402,"question_id":77209950,"body_markdown":"Based on a number of blog posts and stackoverflow questions I&#39;ve come to the following conclusions:\r\n\r\n - Maximum number of possible threads in a java application is dependent on the OS limit and NOT on stack size (xss). [Source](https://foojay.io/today/exploring-the-impact-of-stack-size-on-jvm-thread-creation-a-myth-debunked/)\r\n - Also, according to the many answers to this SO [question](https://stackoverflow.com/questions/763579/how-many-threads-can-a-java-vm-support) max possible threads can depend on a number of factors-\r\n      - OS and CPU architecture\r\n      - **Heap size**\r\n\r\nI haven&#39;t considered the impact of heap size on the number of threads my application can create like the answers in the SO question suggest. \r\n\r\nIs there a straightforward jvm property which allows me to configure the max memory that can be used for the creation of new threads? I don&#39;t think I can justify increasing -Xmx or any other memory section not explicitly dedicated to thread creation for increasing the number of threads in my app but I can&#39;t seem to find such a jvm property.\r\n\r\nJVM in question is openjdk 8 (hotspot) 1.8.\r\n\r\n","title":"Impact of heap space / non heap space memory on number of possible threads for a jvm process","body":"<p>Based on a number of blog posts and stackoverflow questions I've come to the following conclusions:</p>\n<ul>\n<li>Maximum number of possible threads in a java application is dependent on the OS limit and NOT on stack size (xss). <a href=\"https://foojay.io/today/exploring-the-impact-of-stack-size-on-jvm-thread-creation-a-myth-debunked/\" rel=\"nofollow noreferrer\">Source</a></li>\n<li>Also, according to the many answers to this SO <a href=\"https://stackoverflow.com/questions/763579/how-many-threads-can-a-java-vm-support\">question</a> max possible threads can depend on a number of factors-\n<ul>\n<li>OS and CPU architecture</li>\n<li><strong>Heap size</strong></li>\n</ul>\n</li>\n</ul>\n<p>I haven't considered the impact of heap size on the number of threads my application can create like the answers in the SO question suggest.</p>\n<p>Is there a straightforward jvm property which allows me to configure the max memory that can be used for the creation of new threads? I don't think I can justify increasing -Xmx or any other memory section not explicitly dedicated to thread creation for increasing the number of threads in my app but I can't seem to find such a jvm property.</p>\n<p>JVM in question is openjdk 8 (hotspot) 1.8.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":1,"creation_date":1696154851,"post_id":77209934,"comment_id":136114943,"body_markdown":"Can you add more details? The current question is unclear.","body":"Can you add more details? The current question is unclear."},{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1696156787,"post_id":77209934,"comment_id":136115102,"body_markdown":"Hi @MaksimEliseev I&#39;ve given an example","body":"Hi @MaksimEliseev I&#39;ve given an example"}],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696156612,"creation_date":1696156612,"answer_id":77210111,"question_id":77209934,"body_markdown":"The question is not really clear, but I bet you may want to use powerful Spring&#39;s event-driven capabilities, combined with Spring Boot&#39;s profile management, kinda:\r\n\r\n1. Define your custom event:\r\n```\r\npublic class CustomApplicationReadyEvent extends ApplicationEvent {\r\n    public CustomApplicationReadyEvent(Object source) {\r\n        super(source);\r\n    }\r\n}\r\n```\r\n2. Publish when your desired profile is active:\r\n```\r\n@Component\r\npublic class CustomEventPublisher implements CommandLineRunner {\r\n\r\n    @Autowired\r\n    private ApplicationContext context;\r\n\r\n    @Value(&quot;${spring.profiles.active:}&quot;)\r\n    private String activeProfile;\r\n\r\n    @Override\r\n    public void run(String... args) throws Exception {\r\n        if (&quot;foobar&quot;.equals(activeProfile)) {\r\n            context.publishEvent(new CustomApplicationReadyEvent(this));\r\n        }\r\n    }\r\n}\r\n```\r\n3. Consume &amp; make what you want right in the listner\r\n```\r\n@Component\r\npublic class CustomEventListener {\r\n\r\n    @EventListener\r\n    public void handleCustomEvent(CustomApplicationReadyEvent event) {\r\n        // your main logic here\r\n    }\r\n}\r\n```\r\nJust note that the Spring context itself will still initialize beans and perform its standard lifecycle, so you may &quot;delay&quot; your own custom logic only\r\n","title":"Delay Spring Boot application start","body":"<p>The question is not really clear, but I bet you may want to use powerful Spring's event-driven capabilities, combined with Spring Boot's profile management, kinda:</p>\n<ol>\n<li>Define your custom event:</li>\n</ol>\n<pre><code>public class CustomApplicationReadyEvent extends ApplicationEvent {\n    public CustomApplicationReadyEvent(Object source) {\n        super(source);\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li>Publish when your desired profile is active:</li>\n</ol>\n<pre><code>@Component\npublic class CustomEventPublisher implements CommandLineRunner {\n\n    @Autowired\n    private ApplicationContext context;\n\n    @Value(&quot;${spring.profiles.active:}&quot;)\n    private String activeProfile;\n\n    @Override\n    public void run(String... args) throws Exception {\n        if (&quot;foobar&quot;.equals(activeProfile)) {\n            context.publishEvent(new CustomApplicationReadyEvent(this));\n        }\n    }\n}\n</code></pre>\n<ol start=\"3\">\n<li>Consume &amp; make what you want right in the listner</li>\n</ol>\n<pre><code>@Component\npublic class CustomEventListener {\n\n    @EventListener\n    public void handleCustomEvent(CustomApplicationReadyEvent event) {\n        // your main logic here\n    }\n}\n</code></pre>\n<p>Just note that the Spring context itself will still initialize beans and perform its standard lifecycle, so you may &quot;delay&quot; your own custom logic only</p>\n"}],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696156673,"creation_date":1696153204,"question_id":77209934,"body_markdown":"I&#39;ve got a custom event and I&#39;d like my Spring Boot application start after it is published.\r\n\r\nThis event is only published when the profile `foobar` is active. If it is not, Spring Boot application should launch as usual.\r\n\r\nCan I do that?\r\n\r\nUPDATE:\r\n\r\nSuppose that profile `foobar` is active. In that case the `FoobarClass` component is initialized (`@Profile(&quot;foobar&quot;)`).\r\n\r\nIn the `FoobarClass.java` there&#39;s a `@PostConstruct` method.\r\n```\r\n@PostConstruct\r\npublic void postInit() {\r\n    // some code\r\n    launchSpringAppEvent.publishEvent(&quot;All done! Spring app can be launched now.&quot;);\r\n}\r\n```\r\nThe event is published and that would indicate the app is ready to be opened for users.","title":"Delay Spring Boot application start","body":"<p>I've got a custom event and I'd like my Spring Boot application start after it is published.</p>\n<p>This event is only published when the profile <code>foobar</code> is active. If it is not, Spring Boot application should launch as usual.</p>\n<p>Can I do that?</p>\n<p>UPDATE:</p>\n<p>Suppose that profile <code>foobar</code> is active. In that case the <code>FoobarClass</code> component is initialized (<code>@Profile(&quot;foobar&quot;)</code>).</p>\n<p>In the <code>FoobarClass.java</code> there's a <code>@PostConstruct</code> method.</p>\n<pre><code>@PostConstruct\npublic void postInit() {\n    // some code\n    launchSpringAppEvent.publishEvent(&quot;All done! Spring app can be launched now.&quot;);\n}\n</code></pre>\n<p>The event is published and that would indicate the app is ready to be opened for users.</p>\n"},{"tags":["java","oracle","jdbc"],"comments":[{"owner":{"account_id":2486854,"reputation":5426,"user_id":2165134,"display_name":"Zelldon"},"score":0,"creation_date":1442991710,"post_id":32732907,"comment_id":53307266,"body_markdown":"Read the jdbc spec... http://download.oracle.com/otn-pub/jcp/jdbc-4_1-mrel-spec/jdbc4.1-fr-spec.pdf?AuthParam=1442991726_ff601b99bbf7b784c0d86c72623ce6bd","body":"Read the jdbc spec... <a href=\"http://download.oracle.com/otn-pub/jcp/jdbc-4_1-mrel-spec/jdbc4.1-fr-spec.pdf?AuthParam=1442991726_ff601b99bbf7b784c0d86c72623ce6bd\" rel=\"nofollow noreferrer\">download.oracle.com/otn-pub/jcp/jdbc-4_1-mrel-spec/&hellip;</a>"},{"owner":{"account_id":1144443,"reputation":4425,"user_id":2113996,"accept_rate":31,"display_name":"eatSleepCode"},"score":0,"creation_date":1442991885,"post_id":32732907,"comment_id":53307345,"body_markdown":"@Zelldon it says unauthorised request","body":"@Zelldon it says unauthorised request"},{"owner":{"account_id":2486854,"reputation":5426,"user_id":2165134,"display_name":"Zelldon"},"score":0,"creation_date":1442992037,"post_id":32732907,"comment_id":53307424,"body_markdown":"Ok try this https://jcp.org/aboutJava/communityprocess/mrel/jsr221/index2.html","body":"Ok try this <a href=\"https://jcp.org/aboutJava/communityprocess/mrel/jsr221/index2.html\" rel=\"nofollow noreferrer\">jcp.org/aboutJava/communityprocess/mrel/jsr221/index2.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":873079,"reputation":2743,"user_id":923498,"accept_rate":86,"display_name":"Alexander Tokarev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442992218,"creation_date":1442992218,"answer_id":32733185,"question_id":32732907,"body_markdown":"Actually, JDBC is just an interface. What happens on database side depends on JDBC driver that is used in your application.","title":"JDBC physical vs logical","body":"<p>Actually, JDBC is just an interface. What happens on database side depends on JDBC driver that is used in your application.</p>\n"},{"tags":[],"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442992748,"creation_date":1442992748,"answer_id":32733347,"question_id":32732907,"body_markdown":"The exact details really depend on the driver and database. But in general: opening a connection is a relatively expensive operation so you typically want to reuse the same connection for several queries. There are also several implementations of connection pooling around (just do a little search). Opening the connection will typically establish the network connection to the DBMS (if there is a network connection; there are also in memory databases) and do the authentication of the DB user.\r\n\r\nA connection is not the same as a transaction, you can have several transactions in one connection.","title":"JDBC physical vs logical","body":"<p>The exact details really depend on the driver and database. But in general: opening a connection is a relatively expensive operation so you typically want to reuse the same connection for several queries. There are also several implementations of connection pooling around (just do a little search). Opening the connection will typically establish the network connection to the DBMS (if there is a network connection; there are also in memory databases) and do the authentication of the DB user.</p>\n\n<p>A connection is not the same as a transaction, you can have several transactions in one connection.</p>\n"},{"tags":[],"owner":{"account_id":299053,"reputation":3959,"user_id":605422,"display_name":"Giovanni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1442993397,"creation_date":1442993397,"answer_id":32733536,"question_id":32732907,"body_markdown":"In java you work with mainly with interfaces specified in the `java.sql` package, the class you usually deal with is `DriverManager` that allows you to get a Connection (an interface that gives you access to all the other ones ResultSet, Statement, etc). I try to give you an overview of what happens during the more common operations when working with an Oracle Database\r\n\r\n 1. `DriverManager.getConnection`: it gives you a Connection object and create a session (visibile in v$session view of the database) on the server side. If you look at the [documentation][1] you can read that the preferred method for creating connection is to use `DataSource` that may provide connection pooling i.e. you create a fixed number of database connections (i.e. database sessions) and reuse them as needed. Connection pooling is a very welcome feature when working with Oracle databases since a connection creation is expensive (Oracle must create a remore process/thread, etc) and some of the data about sql parse (hard and soft) is kept at the connection/session level\r\n 2. create a PreparedStatement: on the server side Oracle looks at the\r\n    SQL area if it can find the same sql and if it finds it reuses the\r\n    access plan (i&#39;m not going into the detail of these but building an\r\n    access plan to the data may be a very expensive operation). If you\r\n    want to go further you can read here a [detailed explanation][2] of\r\n    what happens when Oracle parses a query\r\n 3. bind the data to the preparedStatement and executing it: you pass\r\n    the parameters to the statement and on the server side it binds the\r\n    data to sql and execute it\r\n 4. If you are reading data from a resultSet you have a cursor on the\r\n    server side (Oracle has provides a read only and forward only\r\n    cursor) and when you issue a next on the resultset the same\r\n    operation is made on the server side if you have a fetch size of 1\r\n    on the jdbc side; otherwise the implementation may cache some\r\n    results (which is usually a good things since with the same network\r\n    roundtrip you can fetch more data)\r\n\r\n\r\nThis a rough overview because the topic is very broad and it depends on the detail level you need; you may face very different configurations that change what really happens on the java side.\r\n \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/index.html?java/sql/package-summary.html\r\n  [2]: https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2588723819082","title":"JDBC physical vs logical","body":"<p>In java you work with mainly with interfaces specified in the <code>java.sql</code> package, the class you usually deal with is <code>DriverManager</code> that allows you to get a Connection (an interface that gives you access to all the other ones ResultSet, Statement, etc). I try to give you an overview of what happens during the more common operations when working with an Oracle Database</p>\n\n<ol>\n<li><code>DriverManager.getConnection</code>: it gives you a Connection object and create a session (visibile in v$session view of the database) on the server side. If you look at the <a href=\"https://docs.oracle.com/javase/8/docs/api/index.html?java/sql/package-summary.html\" rel=\"nofollow\">documentation</a> you can read that the preferred method for creating connection is to use <code>DataSource</code> that may provide connection pooling i.e. you create a fixed number of database connections (i.e. database sessions) and reuse them as needed. Connection pooling is a very welcome feature when working with Oracle databases since a connection creation is expensive (Oracle must create a remore process/thread, etc) and some of the data about sql parse (hard and soft) is kept at the connection/session level</li>\n<li>create a PreparedStatement: on the server side Oracle looks at the\nSQL area if it can find the same sql and if it finds it reuses the\naccess plan (i'm not going into the detail of these but building an\naccess plan to the data may be a very expensive operation). If you\nwant to go further you can read here a <a href=\"https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:2588723819082\" rel=\"nofollow\">detailed explanation</a> of\nwhat happens when Oracle parses a query</li>\n<li>bind the data to the preparedStatement and executing it: you pass\nthe parameters to the statement and on the server side it binds the\ndata to sql and execute it</li>\n<li>If you are reading data from a resultSet you have a cursor on the\nserver side (Oracle has provides a read only and forward only\ncursor) and when you issue a next on the resultset the same\noperation is made on the server side if you have a fetch size of 1\non the jdbc side; otherwise the implementation may cache some\nresults (which is usually a good things since with the same network\nroundtrip you can fetch more data)</li>\n</ol>\n\n<p>This a rough overview because the topic is very broad and it depends on the detail level you need; you may face very different configurations that change what really happens on the java side.</p>\n"},{"tags":[],"owner":{"account_id":5319768,"reputation":530,"user_id":4243558,"display_name":"khesam109"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696156234,"creation_date":1693047624,"answer_id":76982658,"question_id":32732907,"body_markdown":"You can find a good explanation about this topic in High-Performance Java Persistence written by Vlad Mihalcea. I try to provide a summary:\r\n\r\nFirst of all, `DriverManager` requests a new physical connection from underlying driver  (establish a TCP connection to a database server). In the early version of the JDBC, it only supported the `DriverManager` utility for fetching db connections which is mainly enough for desktop application that employing a 2-tier architecture. Therefore, each user creates its own dedicated db connection. Consider that each db server can only offer a limited number of connections based on several parameters and in addition to that, establishing a db connection is a heavy operation.\r\n\r\nIn enterprise application, however، we mainly use 3-tier architecture where the middle layer acts as a bridge between user requests and data source and help us to manage the db connections in a better manner (reuse db connection). So, the application server provides logical connections instead of physical connections. The `javax.sql.DataSource` interface is a logical connections provider. In a simple word, `DataSource` delegates connection requests to the underlying `DriverManager`.\r\nThe connection request workflow could be something like this:\r\n\r\n1. The application data layer asks the `DataSource` for a database connection.\r\n2. The `DataSource` uses the underlying driver to open a physical connection.\r\n3. A physical connection is created, and a TCP socket is opened.\r\n4. The `DataSource` does not wrap the physical connection, and it simply lends it to the application layer.\r\n5. The application executes statements using the acquired database connection.\r\n6. When the connection is no longer needed, the application closes the physical connection along with the underlying TCP socket.","title":"JDBC physical vs logical","body":"<p>You can find a good explanation about this topic in High-Performance Java Persistence written by Vlad Mihalcea. I try to provide a summary:</p>\n<p>First of all, <code>DriverManager</code> requests a new physical connection from underlying driver  (establish a TCP connection to a database server). In the early version of the JDBC, it only supported the <code>DriverManager</code> utility for fetching db connections which is mainly enough for desktop application that employing a 2-tier architecture. Therefore, each user creates its own dedicated db connection. Consider that each db server can only offer a limited number of connections based on several parameters and in addition to that, establishing a db connection is a heavy operation.</p>\n<p>In enterprise application, however، we mainly use 3-tier architecture where the middle layer acts as a bridge between user requests and data source and help us to manage the db connections in a better manner (reuse db connection). So, the application server provides logical connections instead of physical connections. The <code>javax.sql.DataSource</code> interface is a logical connections provider. In a simple word, <code>DataSource</code> delegates connection requests to the underlying <code>DriverManager</code>.\nThe connection request workflow could be something like this:</p>\n<ol>\n<li>The application data layer asks the <code>DataSource</code> for a database connection.</li>\n<li>The <code>DataSource</code> uses the underlying driver to open a physical connection.</li>\n<li>A physical connection is created, and a TCP socket is opened.</li>\n<li>The <code>DataSource</code> does not wrap the physical connection, and it simply lends it to the application layer.</li>\n<li>The application executes statements using the acquired database connection.</li>\n<li>When the connection is no longer needed, the application closes the physical connection along with the underlying TCP socket.</li>\n</ol>\n"}],"owner":{"account_id":1144443,"reputation":4425,"user_id":2113996,"accept_rate":31,"display_name":"eatSleepCode"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1257,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1696156234,"creation_date":1442991254,"question_id":32732907,"body_markdown":"In jdbc api we mainly deal with Connection, DriverManager, Transactions.\nJDBC is mainly used to connect to database and do CRUD operations. So I just need to know how each step works at lower level of JDBC.\n\nSo When we do `DriverManager.getConnection()` what happens? do it creates a session at database side? A transactions is created? What Basically a connection is?\n\nwhen we do execute statements, then how database round trip happens? what is happening behind the scenes? How data is passed from java app to db and vice versa?\n\n# update\n\nso basically I just need to know what is happening at java side and database side on each step.\n\n1. What does it mean by establishing a connection with database? does some sort socket is created?","title":"JDBC physical vs logical","body":"<p>In jdbc api we mainly deal with Connection, DriverManager, Transactions.\nJDBC is mainly used to connect to database and do CRUD operations. So I just need to know how each step works at lower level of JDBC.</p>\n<p>So When we do <code>DriverManager.getConnection()</code> what happens? do it creates a session at database side? A transactions is created? What Basically a connection is?</p>\n<p>when we do execute statements, then how database round trip happens? what is happening behind the scenes? How data is passed from java app to db and vice versa?</p>\n<h1>update</h1>\n<p>so basically I just need to know what is happening at java side and database side on each step.</p>\n<ol>\n<li>What does it mean by establishing a connection with database? does some sort socket is created?</li>\n</ol>\n"},{"tags":["java","android","for-loop","arraylist","iterator"],"comments":[{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1696155168,"post_id":77169855,"comment_id":136114973,"body_markdown":"While I cannot make sense of this Question, I get the feeling that your overwrought use of lists and maps should be replaced with a custom class, likely a `record`, to hold that data.","body":"While I cannot make sense of this Question, I get the feeling that your overwrought use of lists and maps should be replaced with a custom class, likely a <code>record</code>, to hold that data."}],"answers":[{"tags":[],"owner":{"account_id":15370459,"reputation":1,"user_id":11088630,"display_name":"A Koirul Anwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696154327,"creation_date":1695790535,"answer_id":77184754,"question_id":77169855,"body_markdown":"I&#39;ve found a solution, and what I did is create a function to find the smallest list.\r\n\r\n    private int theSmallestVal(int a, int b, int c, int d, int e){\r\n        int[] val = {a, b, c, d, e};\r\n        Arrays.sort(val);\r\n        return val[0];\r\n    }\r\n\r\nThen I call the function like this:\r\n\r\n    al = theSmallestVal(acceleroTime.size(),acceleroElaps.size(), acceleroXval.size(),\r\n                        acceleroYval.size(), acceleroZval.size());\r\n\r\nAfter I found the smallest the value, I use that value to be the reference value to be iterated by for `i`.\r\n\r\n    for (int i = 0; i &lt; al; i++) {\r\n         HashMap data = new HashMap();\r\n         data.put(&quot;person&quot;, &quot;Adi&quot;);\r\n         data.put(&quot;tool&quot;, &quot;Accelerometer&quot;);\r\n         ....\r\n         ....\r\n         ....\r\n     }\r\n\r\nBy doing so, I could avoid out of bound exception.","title":"How to equalize the size of the list collection Java","body":"<p>I've found a solution, and what I did is create a function to find the smallest list.</p>\n<pre><code>private int theSmallestVal(int a, int b, int c, int d, int e){\n    int[] val = {a, b, c, d, e};\n    Arrays.sort(val);\n    return val[0];\n}\n</code></pre>\n<p>Then I call the function like this:</p>\n<pre><code>al = theSmallestVal(acceleroTime.size(),acceleroElaps.size(), acceleroXval.size(),\n                    acceleroYval.size(), acceleroZval.size());\n</code></pre>\n<p>After I found the smallest the value, I use that value to be the reference value to be iterated by for <code>i</code>.</p>\n<pre><code>for (int i = 0; i &lt; al; i++) {\n     HashMap data = new HashMap();\n     data.put(&quot;person&quot;, &quot;Adi&quot;);\n     data.put(&quot;tool&quot;, &quot;Accelerometer&quot;);\n     ....\n     ....\n     ....\n }\n</code></pre>\n<p>By doing so, I could avoid out of bound exception.</p>\n"}],"owner":{"account_id":15370459,"reputation":1,"user_id":11088630,"display_name":"A Koirul Anwar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696156968,"accepted_answer_id":77184754,"answer_count":1,"score":0,"last_activity_date":1696156117,"creation_date":1695614421,"question_id":77169855,"body_markdown":"I have a collection of lists that contain data from a streamed sensor. I wrote a for loop to form it to the format that I would later use to send it to another place (web server). However, sometimes the size of the lists differs by 1 or 2, and when it does the code will throw an out of bounds exception.\r\n\r\nThis is the code I use to assemble the format,\r\n```java\r\nfor (int i = 0; i &lt; acceleroElaps.size(); i++) {\r\n    HashMap data = new HashMap();\r\n    data.put(&quot;person&quot;, &quot;Adi&quot;);\r\n    data.put(&quot;tool&quot;, &quot;Accelerometer&quot;);\r\n    data.put(&quot;time&quot;, acceleroTime.get(i));\r\n    data.put(&quot;elapsed&quot;, acceleroElaps.get(i));\r\n    data.put(&quot;xaxis&quot;, acceleroXval.get(i));\r\n    data.put(&quot;yaxis&quot;, acceleroYval.get(i));\r\n    data.put(&quot;zaxis&quot;, acceleroZval.get(i));\r\n\r\n    accelData.add(data);\r\n}\r\n```\r\nSometimes one of the lists doesn&#39;t have the same size. I&#39;ve tried to iterate it over with iterator like this\r\n\r\n```java\r\nListIterator&lt;String&gt; iterAT = acceleroTime.listIterator();\r\nListIterator&lt;String&gt; iterAE = acceleroElaps.listIterator();\r\nListIterator&lt;String&gt; iterAX = acceleroXval.listIterator();\r\nListIterator&lt;String&gt; iterAY = acceleroYval.listIterator();\r\nListIterator&lt;String&gt; iterAZ = acceleroZval.listIterator();\r\n\r\nwhile (iterAT.hasNext() &amp;&amp; iterAE.hasNext() &amp;&amp; iterAX.hasNext() &amp;&amp; iterAY.hasNext() &amp;&amp; iterAZ.hasNext()){\r\n    String at = iterAT.next();\r\n    String ae = iterAE.next();\r\n    String ax = iterAX.next();\r\n    String ay = iterAY.next();\r\n    String az = iterAZ.next();\r\n    HashMap data = new HashMap();\r\n    data.put(&quot;person&quot;, &quot;Adi&quot;);\r\n    data.put(&quot;tool&quot;, &quot;Accelerometer&quot;);\r\n    data.put(&quot;time&quot;, at);\r\n    data.put(&quot;elapsed&quot;, ae);\r\n    data.put(&quot;xaxis&quot;, ax);\r\n    data.put(&quot;yaxis&quot;, ay);\r\n    data.put(&quot;zaxis&quot;, az);\r\n    accelData.add(data);\r\n    a++;\r\n    f++;\r\n}\r\n```\r\nHowever, this would throw `ConcurrentModificationException`, so I tried to equalize the size of the lists, because it just differs 1 or 2 data points. Or maybe there&#39;s another solution? I&#39;m running out of ideas.","title":"How to equalize the size of the list collection Java","body":"<p>I have a collection of lists that contain data from a streamed sensor. I wrote a for loop to form it to the format that I would later use to send it to another place (web server). However, sometimes the size of the lists differs by 1 or 2, and when it does the code will throw an out of bounds exception.</p>\n<p>This is the code I use to assemble the format,</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; acceleroElaps.size(); i++) {\n    HashMap data = new HashMap();\n    data.put(&quot;person&quot;, &quot;Adi&quot;);\n    data.put(&quot;tool&quot;, &quot;Accelerometer&quot;);\n    data.put(&quot;time&quot;, acceleroTime.get(i));\n    data.put(&quot;elapsed&quot;, acceleroElaps.get(i));\n    data.put(&quot;xaxis&quot;, acceleroXval.get(i));\n    data.put(&quot;yaxis&quot;, acceleroYval.get(i));\n    data.put(&quot;zaxis&quot;, acceleroZval.get(i));\n\n    accelData.add(data);\n}\n</code></pre>\n<p>Sometimes one of the lists doesn't have the same size. I've tried to iterate it over with iterator like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>ListIterator&lt;String&gt; iterAT = acceleroTime.listIterator();\nListIterator&lt;String&gt; iterAE = acceleroElaps.listIterator();\nListIterator&lt;String&gt; iterAX = acceleroXval.listIterator();\nListIterator&lt;String&gt; iterAY = acceleroYval.listIterator();\nListIterator&lt;String&gt; iterAZ = acceleroZval.listIterator();\n\nwhile (iterAT.hasNext() &amp;&amp; iterAE.hasNext() &amp;&amp; iterAX.hasNext() &amp;&amp; iterAY.hasNext() &amp;&amp; iterAZ.hasNext()){\n    String at = iterAT.next();\n    String ae = iterAE.next();\n    String ax = iterAX.next();\n    String ay = iterAY.next();\n    String az = iterAZ.next();\n    HashMap data = new HashMap();\n    data.put(&quot;person&quot;, &quot;Adi&quot;);\n    data.put(&quot;tool&quot;, &quot;Accelerometer&quot;);\n    data.put(&quot;time&quot;, at);\n    data.put(&quot;elapsed&quot;, ae);\n    data.put(&quot;xaxis&quot;, ax);\n    data.put(&quot;yaxis&quot;, ay);\n    data.put(&quot;zaxis&quot;, az);\n    accelData.add(data);\n    a++;\n    f++;\n}\n</code></pre>\n<p>However, this would throw <code>ConcurrentModificationException</code>, so I tried to equalize the size of the lists, because it just differs 1 or 2 data points. Or maybe there's another solution? I'm running out of ideas.</p>\n"},{"tags":["javascript","java","scroll","appium"],"answers":[{"tags":[],"owner":{"account_id":9821802,"reputation":3,"user_id":7276258,"display_name":"masudr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696155719,"creation_date":1696155719,"answer_id":77210062,"question_id":77136424,"body_markdown":"    WebElement ele = driver.findElement(AppiumBy.accessibilityId(&quot;YourID&quot;));\r\n\t\tMap&lt;String, Object&gt; params = new HashMap&lt;&gt;();\r\n\t\tparams.put(&quot;direction&quot;, &quot;down&quot;);\r\n\t\tparams.put(&quot;element&quot;, ((RemoteWebElement)ele).getId());\r\n\t\tdriver.executeScript(&quot;mobile:scroll&quot;, params);\r\n\r\nTry this to scroll into a specific element","title":"how to perform scroll in appium using java for iOS","body":"<pre><code>WebElement ele = driver.findElement(AppiumBy.accessibilityId(&quot;YourID&quot;));\n    Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\n    params.put(&quot;direction&quot;, &quot;down&quot;);\n    params.put(&quot;element&quot;, ((RemoteWebElement)ele).getId());\n    driver.executeScript(&quot;mobile:scroll&quot;, params);\n</code></pre>\n<p>Try this to scroll into a specific element</p>\n"}],"owner":{"account_id":22222148,"reputation":11,"user_id":16459607,"display_name":"Nadeesha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1696155719,"creation_date":1695141337,"question_id":77136424,"body_markdown":"I was trying to perform scroll down action in an IOS mobile app using java. There is one javascript line to perform the scroll down action. this is the code I wrote.\r\n\r\n\t\r\n\tHashMap&lt;String,Object&gt; params= new HashMap&lt;&gt;();\r\n        params.put(&quot;direction&quot;, &quot;down&quot;);\r\n\tparams.put(&quot;name&quot;, &quot;Tap here to add promotions by promo code&quot;);\t\r\n\tdriver.executeScript(&quot;mobile:scroll&quot; , params);\r\n\r\nthis is the error I&#39;m receiving\r\n\r\n&#39;Tap here to add promotions by promo code&#39; identifier didn&#39;t match any elements","title":"how to perform scroll in appium using java for iOS","body":"<p>I was trying to perform scroll down action in an IOS mobile app using java. There is one javascript line to perform the scroll down action. this is the code I wrote.</p>\n<pre><code>HashMap&lt;String,Object&gt; params= new HashMap&lt;&gt;();\n    params.put(&quot;direction&quot;, &quot;down&quot;);\nparams.put(&quot;name&quot;, &quot;Tap here to add promotions by promo code&quot;); \ndriver.executeScript(&quot;mobile:scroll&quot; , params);\n</code></pre>\n<p>this is the error I'm receiving</p>\n<p>'Tap here to add promotions by promo code' identifier didn't match any elements</p>\n"},{"tags":["java","git","maven","hook"],"answers":[{"tags":[],"owner":{"account_id":2170359,"reputation":338,"user_id":1922534,"display_name":"Peter Minearo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682349361,"creation_date":1682349361,"answer_id":76093439,"question_id":76068640,"body_markdown":"After learning more about Git Hooks.  If there is a conflict from a merge, or rebase, the Git Hooks will not be called. This means there is no way to automatically resolve conflicts from merges, or rebases.  Conflicts must always be done manually.\r\n\r\nThere is a way to validate the version in the POM files are correct by using the pre-commit, or pre-push, hooks.  Though using pre-commit will execute on every `git commit`.  `pre-push` may be the way to go if version validation is what is needed.  ","title":"Git Hook access to Merge Conflicts","body":"<p>After learning more about Git Hooks.  If there is a conflict from a merge, or rebase, the Git Hooks will not be called. This means there is no way to automatically resolve conflicts from merges, or rebases.  Conflicts must always be done manually.</p>\n<p>There is a way to validate the version in the POM files are correct by using the pre-commit, or pre-push, hooks.  Though using pre-commit will execute on every <code>git commit</code>.  <code>pre-push</code> may be the way to go if version validation is what is needed.</p>\n"},{"tags":[],"owner":{"account_id":26710978,"reputation":1,"user_id":20316353,"display_name":"user20316353"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696155650,"creation_date":1696155650,"answer_id":77210057,"question_id":76068640,"body_markdown":"You can try to do it through a custom merge driver. Every time there is a merge conflict, your custom merge driver will be called. So the only thing you have to do is implement such a driver for combining POMs.","title":"Git Hook access to Merge Conflicts","body":"<p>You can try to do it through a custom merge driver. Every time there is a merge conflict, your custom merge driver will be called. So the only thing you have to do is implement such a driver for combining POMs.</p>\n"}],"owner":{"account_id":2170359,"reputation":338,"user_id":1922534,"display_name":"Peter Minearo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696155650,"creation_date":1682029381,"question_id":76068640,"body_markdown":"I know I am not the first person to have this problem, but I could not find an answer for what I am looking for. I am familiar with Git, but new to Git hooks.\r\n\r\n&lt;h1&gt;Problem:&lt;/h1&gt;\r\n&lt;p&gt;\r\nI have a Git repo that is made up of several Java modules using Maven to build the artifacts.  In the &quot;master/main&quot; branch the version number is always `Major.Minor.Patch.Build-SNAPSHOT`, until a release is made then the `-SNAPSHOT` is dropped and the artifact is created. Then the correct version number(s) are incremented to the next version and `-SNAPSHOT` is added back in.  Each night there is a nightly build that will increment the Build version number; and based on Semantic Versioning the `Major.Minor.Patch` versions will be updated based on Pull Request merges. So, the POM version will be changing daily in different ways.\r\n&lt;/p&gt;\r\n&lt;p&gt;\r\nWhen a developer creates a branch off of &quot;master/main&quot;, we want to write a Git hook to change the POM version to `Major.Minor.Patch.Build-DEV-QUALIFIER-SNAPSHOT`. I have figured out where to do that with the `post-checkout` Git hook. And have written a generic version validation shell script to be used.  \r\n&lt;/p&gt;\r\n&lt;p&gt;\r\nWhen a developer merges the latest from &quot;master/main&quot; into their branch, this will create a conflict. I can use the `pre-merge-commit` hook to do a `git checkout --theirs [PATH TO POM FILE]`; and then call the version validation script to change the POM versions. I believe there is a hook to do the same thing for rebases. And possibly one for both rebase and merge. `post-rewrite`?\r\n&lt;/p&gt;\r\n&lt;p&gt;\r\nHere is where the problem starts to come into play....\r\nWhat happens when a developer makes a change to the POM file (ex - adds a new dependency)?  Every time they do a merge/rebase; they would loose their changes and have to add those changes back in.\r\n&lt;/p&gt;\r\n&lt;h1&gt;Question:&lt;/h1&gt;\r\n&lt;p&gt;\r\nSince there will always be a merge conflict with the POM files, is there an easy way to automate the conflicts coming in from &quot;master/main&quot;? Using the new POM version, but keeping the changes the developer has made at the same time? \r\n&lt;/p&gt;\r\n&lt;hr&gt;\r\n&lt;p&gt;\r\nOr, is the best way to read in the POM file which will have a conflict that looks like:\r\n\r\n    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\r\n    &lt;version&gt;1.2.3.4-Dev-Qualifier-SNAPSHOT&lt;/version&gt;\r\n    =======\r\n    &lt;version&gt;1.2.3.5-SNAPSHOT&lt;/version&gt;\r\n    &gt;&gt;&gt;&gt;&gt;&gt;&gt; master/main\r\n\r\nand remove:\r\n\r\n    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\r\n    &lt;version&gt;1.2.3.4-Dev-Qualifier-SNAPSHOT&lt;/version&gt;\r\n    =======\r\n    &gt;&gt;&gt;&gt;&gt;&gt;&gt; master/main\r\n\r\nLeaving \r\n\r\n    &lt;version&gt;1.2.3.5-SNAPSHOT&lt;/version&gt;\r\n\r\nin place?\r\n&lt;/p&gt;\r\n&lt;hr&gt;\r\n&lt;p&gt;\r\nOr do we tell the developer to resolve any conflicts and then use the `pre-commit` hook to validate the POM versions.\r\n&lt;/p&gt;\r\n&lt;hr&gt;\r\n&lt;p&gt;\r\nAre there any libraries that will do all of this?  Like I mentioned earlier, I know I am not the first person to face this problem.\r\n&lt;/p&gt;\r\n\r\n","title":"Git Hook access to Merge Conflicts","body":"<p>I know I am not the first person to have this problem, but I could not find an answer for what I am looking for. I am familiar with Git, but new to Git hooks.</p>\n<h1>Problem:</h1>\n<p>\nI have a Git repo that is made up of several Java modules using Maven to build the artifacts.  In the \"master/main\" branch the version number is always `Major.Minor.Patch.Build-SNAPSHOT`, until a release is made then the `-SNAPSHOT` is dropped and the artifact is created. Then the correct version number(s) are incremented to the next version and `-SNAPSHOT` is added back in.  Each night there is a nightly build that will increment the Build version number; and based on Semantic Versioning the `Major.Minor.Patch` versions will be updated based on Pull Request merges. So, the POM version will be changing daily in different ways.\n</p>\n<p>\nWhen a developer creates a branch off of \"master/main\", we want to write a Git hook to change the POM version to `Major.Minor.Patch.Build-DEV-QUALIFIER-SNAPSHOT`. I have figured out where to do that with the `post-checkout` Git hook. And have written a generic version validation shell script to be used.  \n</p>\n<p>\nWhen a developer merges the latest from \"master/main\" into their branch, this will create a conflict. I can use the `pre-merge-commit` hook to do a `git checkout --theirs [PATH TO POM FILE]`; and then call the version validation script to change the POM versions. I believe there is a hook to do the same thing for rebases. And possibly one for both rebase and merge. `post-rewrite`?\n</p>\n<p>\nHere is where the problem starts to come into play....\nWhat happens when a developer makes a change to the POM file (ex - adds a new dependency)?  Every time they do a merge/rebase; they would loose their changes and have to add those changes back in.\n</p>\n<h1>Question:</h1>\n<p>\nSince there will always be a merge conflict with the POM files, is there an easy way to automate the conflicts coming in from \"master/main\"? Using the new POM version, but keeping the changes the developer has made at the same time? \n</p>\n<hr>\n<p>\nOr, is the best way to read in the POM file which will have a conflict that looks like:\n<pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\n&lt;version&gt;1.2.3.4-Dev-Qualifier-SNAPSHOT&lt;/version&gt;\n=======\n&lt;version&gt;1.2.3.5-SNAPSHOT&lt;/version&gt;\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; master/main\n</code></pre>\n<p>and remove:</p>\n<pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\n&lt;version&gt;1.2.3.4-Dev-Qualifier-SNAPSHOT&lt;/version&gt;\n=======\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; master/main\n</code></pre>\n<p>Leaving</p>\n<pre><code>&lt;version&gt;1.2.3.5-SNAPSHOT&lt;/version&gt;\n</code></pre>\n<p>in place?</p>\n</p>\n<hr>\n<p>\nOr do we tell the developer to resolve any conflicts and then use the `pre-commit` hook to validate the POM versions.\n</p>\n<hr>\n<p>\nAre there any libraries that will do all of this?  Like I mentioned earlier, I know I am not the first person to face this problem.\n</p>\n"},{"tags":["java","mongodb","spring-boot","docker","docker-compose"],"comments":[{"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"score":0,"creation_date":1696145642,"post_id":77209598,"comment_id":136114210,"body_markdown":"I have also tried changing the host side port. But same error comes.","body":"I have also tried changing the host side port. But same error comes."},{"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"score":0,"creation_date":1696145782,"post_id":77209598,"comment_id":136114223,"body_markdown":"I am also able to use `mongodb` using `docker exec -it mongocontainer mongosh`","body":"I am also able to use <code>mongodb</code> using <code>docker exec -it mongocontainer mongosh</code>"},{"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"score":0,"creation_date":1696146611,"post_id":77209598,"comment_id":136114280,"body_markdown":"Yes it is able to connect to mysql - `/usr/sbin/mysqld: ready for connections. Version: &#39;8.1.0&#39;  socket: &#39;/var/run/mysqld/mysqld.sock&#39;  port: 3306  MySQL Community Server - GPL.` BUT NOT TO MONGODB container","body":"Yes it is able to connect to mysql - <code>&#47;usr&#47;sbin&#47;mysqld: ready for connections. Version: &#39;8.1.0&#39;  socket: &#39;&#47;var&#47;run&#47;mysqld&#47;mysqld.sock&#39;  port: 3306  MySQL Community Server - GPL.</code> BUT NOT TO MONGODB container"}],"answers":[{"tags":[],"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696155629,"creation_date":1696155629,"answer_id":77210056,"question_id":77209598,"body_markdown":"The application container `myproject` and the MySQL database `mysqldb` both declare `networks: [netshop]`, but the MongoDB database `mongocontainer` doesn&#39;t.  Since the two containers aren&#39;t on the same network, they can&#39;t talk to each other.\r\n\r\nThe easiest solution to this is to delete _all_ of the `networks:` blocks in the entire file.  Compose provides a network named `default` for you and attaches containers to it; for most projects you don&#39;t need any manual network setup at all.\r\n\r\nI&#39;d also delete the obsolete `links:` option, which is unnecessary with Docker networks.  Conversely it will help to add `mongocontainer` into the `depends_on:` list, though this won&#39;t guarantee that the databases are both fully started before the application wants to connect to them.","title":"docker compose configuration not able to connect to mongodb container","body":"<p>The application container <code>myproject</code> and the MySQL database <code>mysqldb</code> both declare <code>networks: [netshop]</code>, but the MongoDB database <code>mongocontainer</code> doesn't.  Since the two containers aren't on the same network, they can't talk to each other.</p>\n<p>The easiest solution to this is to delete <em>all</em> of the <code>networks:</code> blocks in the entire file.  Compose provides a network named <code>default</code> for you and attaches containers to it; for most projects you don't need any manual network setup at all.</p>\n<p>I'd also delete the obsolete <code>links:</code> option, which is unnecessary with Docker networks.  Conversely it will help to add <code>mongocontainer</code> into the <code>depends_on:</code> list, though this won't guarantee that the databases are both fully started before the application wants to connect to them.</p>\n"}],"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77210056,"answer_count":1,"score":0,"last_activity_date":1696155629,"creation_date":1696145428,"question_id":77209598,"body_markdown":"In my project I am trying to connect both to `mysql` and `mongodb`. I think I am able to connect to `mysql` container. But I am getting error on trying to connect to mongodb container.\r\n\r\napplication.properties file\r\n\r\n    # SERVER\r\n    server.port = 5555\r\n    spring.datasource.url=jdbc:mysql://mysqldb:3306/shopdb\r\n    spring.datasource.username=root\r\n    spring.datasource.password=root\r\n    \r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    #spring.jpa.hibernate.ddl-auto=update\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\r\n    spring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\r\n    \r\n    \r\n    application.security.jwt.secret-key=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970\r\n    application.security.jwt.expiration=7200000\r\n    application.security.jwt.refresh-token.expiration=604800000\r\n    \r\n    \r\n    spring.data.mongodb.host=mongocontainer\r\n    spring.data.mongodb.port=27017\r\n    spring.data.mongodb.database=ShopDb\r\n\r\nDockerfile:\r\n\r\n    FROM openjdk:17-alpine\r\n    WORKDIR /app\r\n    COPY target/myproject-0.0.1-SNAPSHOT.jar /app/myproject.jar\r\n    EXPOSE 5555\r\n    CMD [&quot;java&quot;,&quot;-jar&quot;,&quot;myproject.jar&quot;]\r\n\r\ndocker-compose.yml\r\n\r\n    version: &quot;5&quot;\r\n    services:\r\n      mysqldb:\r\n       image: mysql:latest\r\n       ports:\r\n        - &quot;3307:3306&quot;\r\n       networks:\r\n        - netshop\r\n       environment:\r\n        MYSQL_DATABASE: shopdb\r\n        MYSQL_USER: root\r\n        MYSQL_PASSWORD: root\r\n       volumes:\r\n        - type: bind\r\n          source: /C/Users/tim/Documents/mysqldata\r\n          target: /var/lib/mysql\r\n      mongocontainer:\r\n       image: mongo:latest\r\n       container_name: mongocontainer\r\n       restart: always\r\n       ports:\r\n        - 27017:27017  \r\n      myproject:\r\n       image:\r\n        timqwert09/myproject:latest\r\n       ports:\r\n        - &quot;5555:5555&quot;\r\n       networks:\r\n        - netshop\r\n       depends_on:\r\n        - mysqldb\r\n       links:\r\n        - mongocontainer\r\n    networks:\r\n     netshop:\r\n      driver: bridge\r\n       \r\n\r\nI first build my image. It is successfully build. Then under resources directory I run `docker-compose up`\r\n\r\nI runs smoothly, but in end it is giving below error : \r\n\r\n    resources-myproject-1  | com.mongodb.MongoSocketException: mongocontainer: Try again\r\n    resources-myproject-1  |    at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:217) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:78) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:68) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:183) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:198) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:158) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\r\n    resources-myproject-1  | Caused by: java.net.UnknownHostException: mongocontainer: Try again\r\n    resources-myproject-1  |    at java.base/java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:932) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1517) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:851) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1507) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1366) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1300) ~[na:na]\r\n    resources-myproject-1  |    at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:209) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    ... 6 common frames omitted\r\n    resources-myproject-1  |\r\n    resources-myproject-1  | 2023-10-01T07:05:22.194Z  INFO 1 --- [container:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server mongocontainer:27017\r\n    resources-myproject-1  |\r\n    resources-myproject-1  | com.mongodb.MongoSocketException: mongocontainer\r\n    resources-myproject-1  |    at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:217) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:78) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:68) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:183) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:198) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:158) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\r\n    resources-myproject-1  | Caused by: java.net.UnknownHostException: mongocontainer\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress$CachedAddresses.get(InetAddress.java:800) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:886) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1507) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1366) ~[na:na]\r\n    resources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1300) ~[na:na]\r\n    resources-myproject-1  |    at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:209) ~[mongodb-driver-core-4.8.2.jar!/:na]\r\n    resources-myproject-1  |    ... 6 common frames omitted\r\n    resources-myproject-1  |\r\n\r\nI would also like to tell that in host machine i.e windows here, I have mongodb installed but it is not running. Does it make any difference..? How do I connect my app to mongodb container? I am new to docker environment. I have followed as per tutorials and code available on internet.\r\n\r\n","title":"docker compose configuration not able to connect to mongodb container","body":"<p>In my project I am trying to connect both to <code>mysql</code> and <code>mongodb</code>. I think I am able to connect to <code>mysql</code> container. But I am getting error on trying to connect to mongodb container.</p>\n<p>application.properties file</p>\n<pre><code># SERVER\nserver.port = 5555\nspring.datasource.url=jdbc:mysql://mysqldb:3306/shopdb\nspring.datasource.username=root\nspring.datasource.password=root\n\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\n#spring.jpa.hibernate.ddl-auto=update\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.show-sql=true\nspring.jpa.hibernate.naming.implicit-strategy = org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\nspring.jpa.hibernate.naming.physical-strategy = org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n\n\napplication.security.jwt.secret-key=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970\napplication.security.jwt.expiration=7200000\napplication.security.jwt.refresh-token.expiration=604800000\n\n\nspring.data.mongodb.host=mongocontainer\nspring.data.mongodb.port=27017\nspring.data.mongodb.database=ShopDb\n</code></pre>\n<p>Dockerfile:</p>\n<pre><code>FROM openjdk:17-alpine\nWORKDIR /app\nCOPY target/myproject-0.0.1-SNAPSHOT.jar /app/myproject.jar\nEXPOSE 5555\nCMD [&quot;java&quot;,&quot;-jar&quot;,&quot;myproject.jar&quot;]\n</code></pre>\n<p>docker-compose.yml</p>\n<pre><code>version: &quot;5&quot;\nservices:\n  mysqldb:\n   image: mysql:latest\n   ports:\n    - &quot;3307:3306&quot;\n   networks:\n    - netshop\n   environment:\n    MYSQL_DATABASE: shopdb\n    MYSQL_USER: root\n    MYSQL_PASSWORD: root\n   volumes:\n    - type: bind\n      source: /C/Users/tim/Documents/mysqldata\n      target: /var/lib/mysql\n  mongocontainer:\n   image: mongo:latest\n   container_name: mongocontainer\n   restart: always\n   ports:\n    - 27017:27017  \n  myproject:\n   image:\n    timqwert09/myproject:latest\n   ports:\n    - &quot;5555:5555&quot;\n   networks:\n    - netshop\n   depends_on:\n    - mysqldb\n   links:\n    - mongocontainer\nnetworks:\n netshop:\n  driver: bridge\n   \n</code></pre>\n<p>I first build my image. It is successfully build. Then under resources directory I run <code>docker-compose up</code></p>\n<p>I runs smoothly, but in end it is giving below error :</p>\n<pre><code>resources-myproject-1  | com.mongodb.MongoSocketException: mongocontainer: Try again\nresources-myproject-1  |    at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:217) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:78) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:68) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:183) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:198) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:158) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\nresources-myproject-1  | Caused by: java.net.UnknownHostException: mongocontainer: Try again\nresources-myproject-1  |    at java.base/java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:932) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1517) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:851) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1507) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1366) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1300) ~[na:na]\nresources-myproject-1  |    at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:209) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    ... 6 common frames omitted\nresources-myproject-1  |\nresources-myproject-1  | 2023-10-01T07:05:22.194Z  INFO 1 --- [container:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server mongocontainer:27017\nresources-myproject-1  |\nresources-myproject-1  | com.mongodb.MongoSocketException: mongocontainer\nresources-myproject-1  |    at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:217) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:78) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:68) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:183) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:198) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:158) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    at java.base/java.lang.Thread.run(Thread.java:831) ~[na:na]\nresources-myproject-1  | Caused by: java.net.UnknownHostException: mongocontainer\nresources-myproject-1  |    at java.base/java.net.InetAddress$CachedAddresses.get(InetAddress.java:800) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:886) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1507) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1366) ~[na:na]\nresources-myproject-1  |    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1300) ~[na:na]\nresources-myproject-1  |    at com.mongodb.ServerAddress.getSocketAddresses(ServerAddress.java:209) ~[mongodb-driver-core-4.8.2.jar!/:na]\nresources-myproject-1  |    ... 6 common frames omitted\nresources-myproject-1  |\n</code></pre>\n<p>I would also like to tell that in host machine i.e windows here, I have mongodb installed but it is not running. Does it make any difference..? How do I connect my app to mongodb container? I am new to docker environment. I have followed as per tutorials and code available on internet.</p>\n"},{"tags":["java","client-server","observer-pattern"],"comments":[{"owner":{"account_id":1571474,"reputation":3851,"user_id":1459075,"accept_rate":91,"display_name":"Brandon Ling"},"score":0,"creation_date":1432324154,"post_id":30404734,"comment_id":48897363,"body_markdown":"Seems like you are starting a thread that does nothing. Thread thread = new Thread(), thread.start()","body":"Seems like you are starting a thread that does nothing. Thread thread = new Thread(), thread.start()"},{"owner":{"account_id":3780327,"reputation":175,"user_id":3140006,"accept_rate":75,"display_name":"kemenesendre"},"score":0,"creation_date":1432324668,"post_id":30404734,"comment_id":48897604,"body_markdown":"Yes, your are right. I edited the code in the main method of the client class, but the same problem is still up.","body":"Yes, your are right. I edited the code in the main method of the client class, but the same problem is still up."},{"owner":{"account_id":3780327,"reputation":175,"user_id":3140006,"accept_rate":75,"display_name":"kemenesendre"},"score":0,"creation_date":1432324948,"post_id":30404734,"comment_id":48897748,"body_markdown":"ClientSide is my controller for login. I will post it right know, but there is no problem I think.","body":"ClientSide is my controller for login. I will post it right know, but there is no problem I think."}],"answers":[{"tags":[],"owner":{"account_id":27175738,"reputation":1,"user_id":20711751,"display_name":"Jo Mager"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696154861,"creation_date":1696153833,"answer_id":77209968,"question_id":30404734,"body_markdown":"for my solution I needed a list of all connected clients on server-side:\r\n\r\n    public class ClientListModel {\r\n    \tprivate List&lt;ClientHandler&gt; liste = new LinkedList&lt;&gt;();\r\n    \tprivate ClientListView clientView;\r\n    \r\n    \tpublic List&lt;ClientHandler&gt; getListe() {\r\n    \t\treturn liste;\r\n    \t}\r\n    \r\n    \tpublic void setListe(List&lt;ClientHandler&gt; liste) {\r\n    \t\tthis.liste = liste;\r\n    \t}\r\n    \r\n    \tpublic ClientListView getClientView() {\r\n    \t\treturn clientView;\r\n    \t}\r\n    \r\n    \tpublic void setClientView(ClientListView clientView) {\r\n    \t\tthis.clientView = clientView;\r\n    \t}\r\n    \r\n    \tpublic void update() {\r\n    \t\tclientView.update();\r\n    \t}\r\n    \r\n    \tpublic void add(ClientHandler echoClientHandler) {\r\n    \t\tliste.add(echoClientHandler);\r\n    \t\tupdate();\r\n    \t}\r\n    \r\n    \tpublic void remove(ClientHandler echoClientHandler) {\r\n    \t\tliste.remove(echoClientHandler);\r\n    \t\tupdate();\r\n    \t}\r\n    }\r\n\r\nThe view-class prints out information to the console:\r\n\r\n    public class ClientListView {\r\n    \tClientListModel clientModel;\r\n    \r\n    \tpublic ClientListView() {\r\n    \t\tsuper();\r\n    \t}\r\n    \r\n    \tpublic void update() {\r\n    \t\tSystem.out.println(&quot;*** connected clients ***&quot;);\r\n    \t\tfor (ClientHandler client : clientModel.getListe()) {\r\n    \t\t\tSystem.out.println(client.getClientSocket().getInetAddress());\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic ClientListModel getClientModel() {\r\n    \t\treturn clientModel;\r\n    \t}\r\n    \r\n    \tpublic void setClientModel(ClientListModel clientModel) {\r\n    \t\tthis.clientModel = clientModel;\r\n    \t}\r\n    }\r\n\r\nThe actual server holds both classes. It can send a update trigger to all registered client handlers.\r\n\r\n    public class Server implements Runnable {\r\n    \tprivate Thread t;\r\n    \tprivate int port;\r\n    \tprivate ServerSocket serverSocket;\r\n    \tprivate ClientListModel clientListModel = new ClientListModel();\r\n    \tprivate ClientListView clientListView = new ClientListView();\r\n    \tprivate PostgresMock postgres;\r\n    \r\n    \tpublic Server(int port) {\r\n    \t\tthis.port = port;\r\n    \t\tthis.postgres = new PostgresMock(&quot;me&quot;, &quot;pass123&quot;);\r\n    \r\n    \t\t// initiate mvc\r\n    \t\tgetClientListModel().setClientView(clientListView);\r\n    \t\tclientListView.setClientModel(getClientListModel());\r\n    \r\n    \t\tt = new Thread(this);\r\n    \t\tt.start();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\ttry {\r\n    \t\t\tserverSocket = new ServerSocket(port);\r\n    \t\t\tSystem.out.println(&quot;listening on port &quot; + port);\r\n    \t\t\twhile (true) {\r\n    \t\t\t\tnew ClientHandler(serverSocket.accept(), this);\r\n    \t\t\t}\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tSystem.out.println(e);\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tpublic void updateClients() {\r\n    \t\tfor (ClientHandler client : getClientListModel().getListe()) {\r\n    \t\t\tclient.sendMsg(&quot;trigger update&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic void close() throws IOException {\r\n    \t\tthis.serverSocket.close();\r\n    \t}\r\n    \r\n    \tpublic ClientListModel getClientListModel() {\r\n    \t\treturn clientListModel;\r\n    \t}\r\n    \r\n    \tpublic PostgresMock getPostgres() {\r\n    \t\treturn postgres;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tServer server = new Server(5555);\r\n    \t}\r\n    \r\n    }\r\n\r\nHere is the client handler:\r\n\r\n    public class ClientHandler implements Runnable {\r\n    \tprivate Thread t;\r\n    \tprivate Socket clientSocket;\r\n    \tprivate PrintWriter out;\r\n    \tprivate BufferedReader in;\r\n    \tprivate Server server;\r\n    \r\n    \tpublic ClientHandler(Socket socket, Server server) {\r\n    \t\tthis.clientSocket = socket;\r\n    \t\tthis.server = server;\r\n    \t\tserver.getClientListModel().add(this);\r\n    \r\n    \t\tt = new Thread(this);\r\n    \t\tt.start();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \r\n    \t\ttry {\r\n    \t\t\tout = new PrintWriter(clientSocket.getOutputStream(), true);\r\n    \t\t\tin = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n    \r\n    \t\t\tString inputLine;\r\n    \t\t\twhile ((inputLine = in.readLine()) != null) {\r\n    \t\t\t\t\r\n    \t\t\t\t// IN\r\n    \t\t\t\tSystem.out.println(&quot;in: &quot; + inputLine);\r\n    \t\t\t\t\r\n    \t\t\t\tJSONArray data = server.getPostgres().execute(inputLine);\r\n    \t\t\t\t\r\n    \t\t\t\tif (!isSelectStatement(inputLine)) {\r\n    \t\t\t\t\tserver.updateClients();\r\n    \t\t\t\t}\r\n    \t\t\t\tif (data == null) {\r\n    \t\t\t\t\tsendMsg(&quot;nil&quot;);\r\n    \t\t\t\t\tcontinue;\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tsendMsg(data.toString());\r\n    \t\t\t\t\r\n    \t\t\t\t// OUT\r\n    \t\t\t\tSystem.out.println(&quot;out: &quot; + data.toString());\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\tserver.getClientListModel().remove(this);\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tSystem.err.println(e);\r\n    \t\t\tserver.getClientListModel().remove(this);\r\n    \t\t} \r\n    \t}\r\n    \r\n    \tpublic Socket getClientSocket() {\r\n    \t\treturn clientSocket;\r\n    \t}\r\n    \r\n    \tprivate boolean isSelectStatement(String sql) {\r\n    \t\treturn sql.toUpperCase().startsWith(&quot;SELECT&quot;) || sql.toUpperCase().startsWith(&quot;WITH&quot;);\r\n    \t}\r\n    \r\n    \tpublic void sendMsg(String msg) {\r\n    \t\tout.println(msg);\r\n    \t}\r\n    \r\n    }\r\n\r\nIt detects whether a select statement or a some other statement is going to be executet. If its not a select statement the server will trigger updates.\r\n\r\nThe Postgres class is just a mock class.\r\n\r\n    public class PostgresMock {\r\n    \r\n    \tpublic PostgresMock(String user, String password) {\r\n    \r\n    \t}\r\n    \r\n    \tpublic JSONArray execute(String sqlStatement) {\r\n    \t\treturn new JSONArray();\r\n    \t}\r\n    }\r\n\r\nFinally the client class. It does a lot of stuff but most importently it triggers the actual update method.\r\n\r\n    public class Client implements Runnable {\r\n    \tprivate volatile String msgOut = null;\r\n    \tprivate volatile String msgIn = null;\r\n    \tprivate volatile boolean done = true;\r\n    \tprivate int queryTimeout = 1000;\r\n    \r\n    \tprivate Socket clientSocket;\r\n    \tprivate BufferedReader in;\r\n    \tprivate PrintWriter out;\r\n    \r\n    \tprivate String ip;\r\n    \tprivate int port;\r\n    \r\n    \tprivate Thread t;\r\n    \r\n    \tprivate static volatile boolean active = true;\r\n    \r\n    \tprivate static int clockRate = 1;\r\n    \r\n    \tpublic Client(String ip, int port) {\r\n    \t\tthis.ip = ip;\r\n    \t\tthis.port = port;\r\n    \t\tt = new Thread(this);\r\n    \t\tt.start();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \r\n    \t\ttry {\r\n    \t\t\tconnect();\r\n    \r\n    \t\t\tString response;\r\n    \r\n    \t\t\twhile (active) {\r\n    \r\n    \t\t\t\tif (getMsgOut() != null) {\r\n    \t\t\t\t\tout.println(getMsgOut());\r\n    \t\t\t\t\tsetMsgOut(null);\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tresponse = readResponse();\r\n    \r\n    \t\t\t\tif (response != null) {\r\n    \t\t\t\t\tSystem.out.println(java.time.LocalDateTime.now() + &quot;: in: &quot; + response);\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tpollResponse(response);\r\n    \r\n    \t\t\t\t// slow down loop\r\n    \t\t\t\tThread.sleep(clockRate);\r\n    \t\t\t}\r\n    \t\t} catch (InterruptedException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate void connect() {\r\n    \t\twhile (clientSocket == null &amp;&amp; active) {\r\n    \t\t\ttry {\r\n    \t\t\t\tclientSocket = new Socket(ip, port);\r\n    \t\t\t\tout = new PrintWriter(clientSocket.getOutputStream(), true);\r\n    \t\t\t\tin = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n    \t\t\t} catch (UnknownHostException e) {\r\n    \t\t\t\tSystem.out.println(e);\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\tSystem.out.println(e);\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tThread.sleep(1000);\r\n    \t\t\t\t} catch (InterruptedException e1) {\r\n    \t\t\t\t\te1.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic String readResponse() throws IOException {\r\n    \t\tString userInput = null;\r\n    \t\twhile (in.ready() &amp;&amp; (userInput = in.readLine()) != null) {\r\n    \t\t\treturn userInput;\r\n    \t\t}\r\n    \t\treturn userInput;\r\n    \t}\r\n    \r\n    \tprivate void pollResponse(String response) {\r\n    \t\tif (response == null) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\tif (response.equals(&quot;trigger update&quot;)) {\r\n    \t\t\tSystem.out.println(&quot;do update stuff here ...&quot;); // trigger your update event here\r\n    \t\t} else {\r\n    \t\t\tsetMsgIn(response);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic String query(String sql, long timeout) {\r\n    \t\twhile (!done) {} // I don&#39;t know if this is actually necessary\r\n    \r\n    \t\tdone = false;\r\n    \r\n    \t\tlong start = System.currentTimeMillis();\r\n    \r\n    \t\tsetMsgIn(null);\r\n    \t\tsetMsgOut(sql);\r\n    \r\n    \t\twhile ((System.currentTimeMillis() - start &lt; timeout) &amp;&amp; getMsgIn() == null) {}\r\n    \t\t\r\n    \t\tsetMsgOut(null);\r\n    \r\n    \t\tdone = true;\r\n    \r\n    \t\treturn getMsgIn();\r\n    \t}\r\n    \r\n    \tpublic String query(String sql) {\r\n    \t\treturn query(sql, queryTimeout);\r\n    \t}\r\n    \r\n    \tString getMsgOut() {\r\n    \t\treturn msgOut;\r\n    \t}\r\n    \r\n    \tvoid setMsgOut(String msgOut) {\r\n    \t\tthis.msgOut = msgOut;\r\n    \t}\r\n    \r\n    \tString getMsgIn() {\r\n    \t\treturn msgIn;\r\n    \t}\r\n    \r\n    \tvoid setMsgIn(String msgIn) {\r\n    \t\tthis.msgIn = msgIn;\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tClient c = new Client(&quot;127.0.0.1&quot;, 5555);\r\n    \t\tc.query(&quot;select * from atable;&quot;);\r\n    \t\tc.query(&quot;insert into atable (avalue) values (&#39;anything&#39;);&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\nI didn&#39;t do a lot of optimization to the code but I hope it helps.","title":"Java Client-Server and Observer","body":"<p>for my solution I needed a list of all connected clients on server-side:</p>\n<pre><code>public class ClientListModel {\n    private List&lt;ClientHandler&gt; liste = new LinkedList&lt;&gt;();\n    private ClientListView clientView;\n\n    public List&lt;ClientHandler&gt; getListe() {\n        return liste;\n    }\n\n    public void setListe(List&lt;ClientHandler&gt; liste) {\n        this.liste = liste;\n    }\n\n    public ClientListView getClientView() {\n        return clientView;\n    }\n\n    public void setClientView(ClientListView clientView) {\n        this.clientView = clientView;\n    }\n\n    public void update() {\n        clientView.update();\n    }\n\n    public void add(ClientHandler echoClientHandler) {\n        liste.add(echoClientHandler);\n        update();\n    }\n\n    public void remove(ClientHandler echoClientHandler) {\n        liste.remove(echoClientHandler);\n        update();\n    }\n}\n</code></pre>\n<p>The view-class prints out information to the console:</p>\n<pre><code>public class ClientListView {\n    ClientListModel clientModel;\n\n    public ClientListView() {\n        super();\n    }\n\n    public void update() {\n        System.out.println(&quot;*** connected clients ***&quot;);\n        for (ClientHandler client : clientModel.getListe()) {\n            System.out.println(client.getClientSocket().getInetAddress());\n        }\n    }\n\n    public ClientListModel getClientModel() {\n        return clientModel;\n    }\n\n    public void setClientModel(ClientListModel clientModel) {\n        this.clientModel = clientModel;\n    }\n}\n</code></pre>\n<p>The actual server holds both classes. It can send a update trigger to all registered client handlers.</p>\n<pre><code>public class Server implements Runnable {\n    private Thread t;\n    private int port;\n    private ServerSocket serverSocket;\n    private ClientListModel clientListModel = new ClientListModel();\n    private ClientListView clientListView = new ClientListView();\n    private PostgresMock postgres;\n\n    public Server(int port) {\n        this.port = port;\n        this.postgres = new PostgresMock(&quot;me&quot;, &quot;pass123&quot;);\n\n        // initiate mvc\n        getClientListModel().setClientView(clientListView);\n        clientListView.setClientModel(getClientListModel());\n\n        t = new Thread(this);\n        t.start();\n    }\n\n    @Override\n    public void run() {\n        try {\n            serverSocket = new ServerSocket(port);\n            System.out.println(&quot;listening on port &quot; + port);\n            while (true) {\n                new ClientHandler(serverSocket.accept(), this);\n            }\n        } catch (IOException e) {\n            System.out.println(e);\n        }\n\n    }\n\n    public void updateClients() {\n        for (ClientHandler client : getClientListModel().getListe()) {\n            client.sendMsg(&quot;trigger update&quot;);\n        }\n    }\n\n    public void close() throws IOException {\n        this.serverSocket.close();\n    }\n\n    public ClientListModel getClientListModel() {\n        return clientListModel;\n    }\n\n    public PostgresMock getPostgres() {\n        return postgres;\n    }\n\n    public static void main(String[] args) {\n        Server server = new Server(5555);\n    }\n\n}\n</code></pre>\n<p>Here is the client handler:</p>\n<pre><code>public class ClientHandler implements Runnable {\n    private Thread t;\n    private Socket clientSocket;\n    private PrintWriter out;\n    private BufferedReader in;\n    private Server server;\n\n    public ClientHandler(Socket socket, Server server) {\n        this.clientSocket = socket;\n        this.server = server;\n        server.getClientListModel().add(this);\n\n        t = new Thread(this);\n        t.start();\n    }\n\n    @Override\n    public void run() {\n\n        try {\n            out = new PrintWriter(clientSocket.getOutputStream(), true);\n            in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n\n            String inputLine;\n            while ((inputLine = in.readLine()) != null) {\n                \n                // IN\n                System.out.println(&quot;in: &quot; + inputLine);\n                \n                JSONArray data = server.getPostgres().execute(inputLine);\n                \n                if (!isSelectStatement(inputLine)) {\n                    server.updateClients();\n                }\n                if (data == null) {\n                    sendMsg(&quot;nil&quot;);\n                    continue;\n                }\n                \n                sendMsg(data.toString());\n                \n                // OUT\n                System.out.println(&quot;out: &quot; + data.toString());\n                \n            }\n            server.getClientListModel().remove(this);\n        } catch (IOException e) {\n            System.err.println(e);\n            server.getClientListModel().remove(this);\n        } \n    }\n\n    public Socket getClientSocket() {\n        return clientSocket;\n    }\n\n    private boolean isSelectStatement(String sql) {\n        return sql.toUpperCase().startsWith(&quot;SELECT&quot;) || sql.toUpperCase().startsWith(&quot;WITH&quot;);\n    }\n\n    public void sendMsg(String msg) {\n        out.println(msg);\n    }\n\n}\n</code></pre>\n<p>It detects whether a select statement or a some other statement is going to be executet. If its not a select statement the server will trigger updates.</p>\n<p>The Postgres class is just a mock class.</p>\n<pre><code>public class PostgresMock {\n\n    public PostgresMock(String user, String password) {\n\n    }\n\n    public JSONArray execute(String sqlStatement) {\n        return new JSONArray();\n    }\n}\n</code></pre>\n<p>Finally the client class. It does a lot of stuff but most importently it triggers the actual update method.</p>\n<pre><code>public class Client implements Runnable {\n    private volatile String msgOut = null;\n    private volatile String msgIn = null;\n    private volatile boolean done = true;\n    private int queryTimeout = 1000;\n\n    private Socket clientSocket;\n    private BufferedReader in;\n    private PrintWriter out;\n\n    private String ip;\n    private int port;\n\n    private Thread t;\n\n    private static volatile boolean active = true;\n\n    private static int clockRate = 1;\n\n    public Client(String ip, int port) {\n        this.ip = ip;\n        this.port = port;\n        t = new Thread(this);\n        t.start();\n    }\n\n    @Override\n    public void run() {\n\n        try {\n            connect();\n\n            String response;\n\n            while (active) {\n\n                if (getMsgOut() != null) {\n                    out.println(getMsgOut());\n                    setMsgOut(null);\n                }\n\n                response = readResponse();\n\n                if (response != null) {\n                    System.out.println(java.time.LocalDateTime.now() + &quot;: in: &quot; + response);\n                }\n\n                pollResponse(response);\n\n                // slow down loop\n                Thread.sleep(clockRate);\n            }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void connect() {\n        while (clientSocket == null &amp;&amp; active) {\n            try {\n                clientSocket = new Socket(ip, port);\n                out = new PrintWriter(clientSocket.getOutputStream(), true);\n                in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n            } catch (UnknownHostException e) {\n                System.out.println(e);\n            } catch (IOException e) {\n                System.out.println(e);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e1) {\n                    e1.printStackTrace();\n                }\n            }\n        }\n    }\n\n    public String readResponse() throws IOException {\n        String userInput = null;\n        while (in.ready() &amp;&amp; (userInput = in.readLine()) != null) {\n            return userInput;\n        }\n        return userInput;\n    }\n\n    private void pollResponse(String response) {\n        if (response == null) {\n            return;\n        }\n        if (response.equals(&quot;trigger update&quot;)) {\n            System.out.println(&quot;do update stuff here ...&quot;); // trigger your update event here\n        } else {\n            setMsgIn(response);\n        }\n    }\n\n    public String query(String sql, long timeout) {\n        while (!done) {} // I don't know if this is actually necessary\n\n        done = false;\n\n        long start = System.currentTimeMillis();\n\n        setMsgIn(null);\n        setMsgOut(sql);\n\n        while ((System.currentTimeMillis() - start &lt; timeout) &amp;&amp; getMsgIn() == null) {}\n        \n        setMsgOut(null);\n\n        done = true;\n\n        return getMsgIn();\n    }\n\n    public String query(String sql) {\n        return query(sql, queryTimeout);\n    }\n\n    String getMsgOut() {\n        return msgOut;\n    }\n\n    void setMsgOut(String msgOut) {\n        this.msgOut = msgOut;\n    }\n\n    String getMsgIn() {\n        return msgIn;\n    }\n\n    void setMsgIn(String msgIn) {\n        this.msgIn = msgIn;\n    }\n    \n    public static void main(String[] args) {\n        Client c = new Client(&quot;127.0.0.1&quot;, 5555);\n        c.query(&quot;select * from atable;&quot;);\n        c.query(&quot;insert into atable (avalue) values ('anything');&quot;);\n    }\n\n}\n</code></pre>\n<p>I didn't do a lot of optimization to the code but I hope it helps.</p>\n"}],"owner":{"account_id":3780327,"reputation":175,"user_id":3140006,"accept_rate":75,"display_name":"kemenesendre"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1092,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1696154861,"creation_date":1432323689,"question_id":30404734,"body_markdown":"I am implementing a Java Client-Server application for a university task and I&#39;m stuck at the following point: I am obliged to use client-server and also update the view whenever the data in the database changes. What I have done is that whenever a change in the database should occur I notify all the clients with the &quot;CHANGE IN DATA&quot; message and then the client should read and understand this message in order to call a method that will update it&#39;s graphic interface. However, or I&#39;m mistaking the reading part on client side or because of some error, the clients don&#39;t read the &quot;CHANGE IN DATA&quot; message so the whole gets stuck at this point and the view doesn&#39;t update.\r\n\r\nHere are some relevant codes!\r\nServer class:\r\n\r\n    public class FinesPaymentServer implements Runnable {\r\n    \r\n    private Database database;\r\n    private UserGateway userGateway;\r\n    private FineGateway fineGateway;\r\n    private DriverGateway driverGateway;\r\n    private Socket connection;\r\n    private int ID;\r\n    static ArrayList&lt;Socket&gt; clientsConnected;\r\n    \r\n    /**\r\n     * Constructor of the class connecting to the database and initializing the socket\r\n     * @param database the database used\r\n     * @param connection the socket for the server\r\n     * @param ID the id\r\n     */\r\n    private FinesPaymentServer(Database database, UserGateway userGateway, FineGateway fineGateway, DriverGateway driverGateway, Socket connection, int ID) {\r\n        this.connection = connection;\r\n        this.userGateway = userGateway;\r\n        this.fineGateway = fineGateway;\r\n        this.driverGateway = driverGateway;\r\n        this.database = database;\r\n        this.ID = ID;\r\n    }\r\n    \r\n    /**\r\n     * Run method of the threads for each socket on the server\r\n     */\r\n    public void run() {\r\n        try {\r\n            while(true)\r\n                readFromClient(connection);\r\n        } catch (IOException | SQLException e) {\r\n        System.out.println(e);\r\n        }\r\n    }\r\n    \r\n     /**\r\n     * Read method from the client\r\n     * @param client the client socket from where to read\r\n     * @throws IOException\r\n     * @throws SQLException \r\n     */\r\n    public void readFromClient(Socket client) throws IOException, SQLException {\r\n        BufferedInputStream is = new BufferedInputStream(client.getInputStream());\r\n        InputStreamReader reader = new InputStreamReader(is);\r\n        StringBuffer process = new StringBuffer();\r\n        int character;\r\n        while((character = reader.read()) != 13) {\r\n            process.append((char)character);\r\n        }\r\n        System.out.println(&quot;[SERVER READ]: &quot;+process);\r\n        String[] words = process.toString().split(&quot;\\\\s+&quot;);\r\n        switch (process.charAt(0)) {\r\n            case &#39;a&#39; : \r\n            {\r\n                int type = database.verifyLogin(words[1], words[2]);\r\n                sendMessage(client, &quot;&quot;+type + &quot; &quot;);\r\n                break;\r\n            }\r\n            case &#39;b&#39; :\r\n            {\r\n                String rs = userGateway.getUsers();\r\n                sendMessage(client, rs);\r\n                break;\r\n            }\r\n            case &#39;c&#39; :\r\n            {\r\n                userGateway.createUser(words[1], words[2], words[3]);\r\n                notifyClients();\r\n                break;\r\n            }\r\n            case &#39;d&#39; :\r\n            {\r\n                userGateway.updateUser(words[1], words[2], words[3]);\r\n                notifyClients();\r\n                break;\r\n            }\r\n            case &#39;e&#39; :\r\n            {\r\n                userGateway.deleteUser(words[1]);\r\n                notifyClients();\r\n                break;\r\n            }\r\n        }\r\n        try {\r\n        Thread.sleep(1000);\r\n        } catch (Exception e){}\r\n        String time_stamp = new java.util.Date().toString();\r\n        String returnCode = &quot;Single Socket Server responded at &quot; + time_stamp + (char) 13;\r\n        sendMessage(client, returnCode);\r\n    }\r\n    \r\n    /**\r\n     * Method for sending messages from the server to the client\r\n     * @param client the client socket where to send the message\r\n     * @param message the message itself to be sent\r\n     * @throws IOException \r\n     */\r\n    private void sendMessage(Socket client, String message) throws IOException {\r\n        BufferedWriter writer = new BufferedWriter(\r\n        new OutputStreamWriter(client.getOutputStream()));\r\n        writer.write(message);\r\n        System.out.println(&quot;[SERVER WRITE]: &quot;+message);\r\n        writer.flush();\r\n    }\r\n    \r\n    public void notifyClients() throws IOException\r\n    {\r\n        for(Socket s : clientsConnected)\r\n        {\r\n            sendMessage(s, &quot;CHANGE IN DATA &quot;);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * @param args the command line arguments\r\n     * @throws java.sql.SQLException\r\n     */\r\n    public static void main(String[] args) throws SQLException {\r\n        Database database = new Database();\r\n        UserGateway userGateway = new UserGateway();\r\n        FineGateway fineGateway = new FineGateway();\r\n        DriverGateway driverGateway = new DriverGateway();\r\n        clientsConnected = new ArrayList&lt;&gt;();\r\n        // Setting a default port number.\r\n        int portNumber = 2015;\r\n        int count = 0;\r\n        System.out.println(&quot;Starting the multiple socket server at port: &quot; + portNumber);\r\n        try {\r\n        ServerSocket serverSocket = new ServerSocket(portNumber);\r\n        System.out.println(&quot;Multiple Socket Server Initialized&quot;);\r\n        //Listen for clients\r\n        while(true) {\r\n        Socket client = serverSocket.accept();\r\n        clientsConnected.add(client);\r\n        Runnable runnable = new FinesPaymentServer(database, userGateway, fineGateway, driverGateway, client, ++count);\r\n        Thread thread = new Thread(runnable);\r\n        thread.start();\r\n        }\r\n        } catch (Exception e) {}\r\n    }\r\n    }\r\n\r\nThe client class:\r\n\r\n    public class FinesPaymentClient implements Runnable {\r\n\r\n    private String hostname = &quot;localhost&quot;;\r\n    private int port = 2015;\r\n    Socket socketClient;\r\n    AdministratorModel adminModel;\r\n    PoliceModel policeModel;\r\n    PostModel postModel;\r\n    \r\n    /**\r\n     * Constructor of the class\r\n     * @param hostname the host name of the connection\r\n     * @param port the port of the connection\r\n     * @throws UnknownHostException\r\n     * @throws IOException \r\n     */\r\n    public FinesPaymentClient(String hostname, int port, AdministratorModel adminModel, PoliceModel policeModel, PostModel postModel) throws UnknownHostException, IOException\r\n    {\r\n        this.hostname = hostname;\r\n        this.port = port;\r\n        this.adminModel = adminModel;\r\n        this.policeModel = policeModel;\r\n        this.postModel = postModel;\r\n        connect();\r\n    }\r\n    \r\n    /**\r\n     * Method for connecting to the host by a socket\r\n     * @throws UnknownHostException\r\n     * @throws IOException \r\n     */\r\n    public void connect() throws UnknownHostException, IOException {\r\n        System.out.println(&quot;Attempting to connect to &quot; + hostname + &quot;:&quot; + port);\r\n        socketClient = new Socket(hostname, port);\r\n        System.out.println(&quot;Connection Established&quot;);\r\n    }\r\n    \r\n    /**\r\n     * Method for reading response from the server\r\n     * @return the string read from the server\r\n     * @throws IOException \r\n     */\r\n    public String readResponse() throws IOException {\r\n        String userInput;\r\n        BufferedReader stdIn = new BufferedReader(\r\n        new InputStreamReader(socketClient.getInputStream()));\r\n        System.out.println(&quot;[CLIENT READ]:&quot;);\r\n        while ((userInput = stdIn.readLine()) != null) {\r\n            System.out.println(userInput);\r\n            return userInput;\r\n        }\r\n        return userInput;\r\n    }\r\n    \r\n    /**\r\n     * Method for closing connection between client and server\r\n     * @throws IOException \r\n     */\r\n    public void closeConnection() throws IOException {\r\n        socketClient.close();\r\n    }\r\n    \r\n    /**\r\n     * Method for writing messages to the server\r\n     * @param message the message to be sent\r\n     * @throws IOException \r\n     */\r\n    public void writeMessage(String message) throws IOException {\r\n        String time_stamp = new java.util.Date().toString();\r\n        // Please note that we placed a char(13) at the end of process...\r\n        // we use this to let the server know we are at the end\r\n        // of the data we are sending\r\n        String process = message + (char) 13;\r\n        BufferedWriter stdOut = new BufferedWriter(\r\n        new OutputStreamWriter(socketClient.getOutputStream()));\r\n        stdOut.write(process);\r\n        System.out.println(&quot;[CLIENT WRITE]: &quot;+process);\r\n        // We need to flush the buffer to ensure that the data will be written\r\n        // across the socket in a timely manner\r\n        stdOut.flush();\r\n    }\r\n    \r\n    @Override\r\n    public void run() {\r\n        try {\r\n            String response;\r\n            while(true)\r\n            {\r\n                response = readResponse();\r\n                System.out.println(&quot;HERE&quot;+response.substring(0, 13));\r\n                if(response.substring(0, 13).equals(&quot;CHANGE IN DATA&quot;))\r\n                {\r\n                    adminModel.setChange();\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            System.out.println(e);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Main method of the application\r\n     * @param arg the parameters given as arguments\r\n     * @throws SQLException\r\n     * @throws UnknownHostException\r\n     * @throws IOException \r\n     */\r\n    public static void main(String arg[]) throws SQLException, UnknownHostException, IOException {\r\n        AdministratorModel adminModel = new AdministratorModel();\r\n        PoliceModel policeModel = new PoliceModel();\r\n        PostModel postModel = new PostModel();\r\n        FinesPaymentClient client = new FinesPaymentClient(&quot;localhost&quot;, 2015, adminModel, policeModel, postModel);\r\n        Runnable client2 = new FinesPaymentClient(&quot;localhost&quot;, 2015, adminModel, policeModel, postModel);\r\n        Thread thread = new Thread(client2);\r\n        thread.start();\r\n        Login login = new Login();\r\n        ClientSide clientSide = new ClientSide(login, client, adminModel, policeModel, postModel);\r\n    }\r\n    }\r\n\r\nClientSide class:\r\n\r\n    public class ClientSide {\r\n    private final Login login;\r\n    private FinesPaymentClient client;\r\n    AdministratorModel adminModel;\r\n    PoliceModel policeModel;\r\n    PostModel postModel;\r\n    \r\n    /**\r\n     * Constructor instantiating needed classes\r\n     * @param login an instance of the login class\r\n     * @param client the client needing the control logic\r\n     * @param adminModel\r\n     * @param policeModel\r\n     * @param postModel\r\n     * @throws SQLException using classes connecting to a database sql exceptions can occur\r\n     */\r\n    public ClientSide(Login login, FinesPaymentClient client, AdministratorModel adminModel, PoliceModel policeModel, PostModel postModel) throws SQLException\r\n    {\r\n        this.login = login;\r\n        this.client = client;\r\n        this.adminModel = adminModel;\r\n        this.policeModel = policeModel;\r\n        this.postModel = postModel;\r\n        login.addButtonListener(new ButtonListener());\r\n    }\r\n    \r\n    /**\r\n     * Listener for the login button. Reads, verifies and provides the interface according to logged in user type.\r\n     */\r\n    class ButtonListener implements ActionListener {\r\n\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            try \r\n            {\r\n                client.writeMessage(&quot;a &quot; + login.field1.getText()+ &quot; &quot; + login.field2.getText());\r\n                String response = client.readResponse();\r\n                if(response.charAt(0) == &#39;1&#39;)\r\n                {   \r\n                    login.setVisible(false);\r\n                    AdministratorGUI administratorGUI = new AdministratorGUI(adminModel, client);\r\n                    AdministratorController adminController = new AdministratorController(client, administratorGUI, adminModel);              \r\n                }\r\n                //if user is post office employee\r\n                else if(response.charAt(0) == &#39;2&#39;)\r\n                {\r\n                    login.setVisible(false);\r\n                    PostGUI postGUI = new PostGUI();\r\n                    PostController postController = new PostController(client, postGUI, postModel);\r\n                }\r\n                //if user is police employee\r\n                else if(response.charAt(0) == &#39;3&#39;)\r\n                {\r\n                    login.setVisible(false);\r\n                    PoliceGUI policeGUI = new PoliceGUI();\r\n                    PoliceController policeController = new PoliceController(client, policeGUI, policeModel);              \r\n                }\r\n                else\r\n                {\r\n                    JOptionPane.showMessageDialog(null,&quot;Login failed! Please try again!&quot;);\r\n                }\r\n            } \r\n            catch (IOException ex) \r\n            {\r\n                Logger.getLogger(ClientSide.class.getName()).log(Level.SEVERE, null, ex);\r\n            }\r\n        }\r\n    }\r\n    }\r\n\r\nI&#39;m 99% sure that the error is on client side reading the message sent from the server as notification, but I simply cannot figure it out how could I retrieve that message. Right now I have a try in the client threads run method, but doesn&#39;t work. Other classes and other functionalities work just fine, this is my only problem. Do you have any ideas what the mistake could be? I would appreciate any help.","title":"Java Client-Server and Observer","body":"<p>I am implementing a Java Client-Server application for a university task and I'm stuck at the following point: I am obliged to use client-server and also update the view whenever the data in the database changes. What I have done is that whenever a change in the database should occur I notify all the clients with the \"CHANGE IN DATA\" message and then the client should read and understand this message in order to call a method that will update it's graphic interface. However, or I'm mistaking the reading part on client side or because of some error, the clients don't read the \"CHANGE IN DATA\" message so the whole gets stuck at this point and the view doesn't update.</p>\n\n<p>Here are some relevant codes!\nServer class:</p>\n\n<pre><code>public class FinesPaymentServer implements Runnable {\n\nprivate Database database;\nprivate UserGateway userGateway;\nprivate FineGateway fineGateway;\nprivate DriverGateway driverGateway;\nprivate Socket connection;\nprivate int ID;\nstatic ArrayList&lt;Socket&gt; clientsConnected;\n\n/**\n * Constructor of the class connecting to the database and initializing the socket\n * @param database the database used\n * @param connection the socket for the server\n * @param ID the id\n */\nprivate FinesPaymentServer(Database database, UserGateway userGateway, FineGateway fineGateway, DriverGateway driverGateway, Socket connection, int ID) {\n    this.connection = connection;\n    this.userGateway = userGateway;\n    this.fineGateway = fineGateway;\n    this.driverGateway = driverGateway;\n    this.database = database;\n    this.ID = ID;\n}\n\n/**\n * Run method of the threads for each socket on the server\n */\npublic void run() {\n    try {\n        while(true)\n            readFromClient(connection);\n    } catch (IOException | SQLException e) {\n    System.out.println(e);\n    }\n}\n\n /**\n * Read method from the client\n * @param client the client socket from where to read\n * @throws IOException\n * @throws SQLException \n */\npublic void readFromClient(Socket client) throws IOException, SQLException {\n    BufferedInputStream is = new BufferedInputStream(client.getInputStream());\n    InputStreamReader reader = new InputStreamReader(is);\n    StringBuffer process = new StringBuffer();\n    int character;\n    while((character = reader.read()) != 13) {\n        process.append((char)character);\n    }\n    System.out.println(\"[SERVER READ]: \"+process);\n    String[] words = process.toString().split(\"\\\\s+\");\n    switch (process.charAt(0)) {\n        case 'a' : \n        {\n            int type = database.verifyLogin(words[1], words[2]);\n            sendMessage(client, \"\"+type + \" \");\n            break;\n        }\n        case 'b' :\n        {\n            String rs = userGateway.getUsers();\n            sendMessage(client, rs);\n            break;\n        }\n        case 'c' :\n        {\n            userGateway.createUser(words[1], words[2], words[3]);\n            notifyClients();\n            break;\n        }\n        case 'd' :\n        {\n            userGateway.updateUser(words[1], words[2], words[3]);\n            notifyClients();\n            break;\n        }\n        case 'e' :\n        {\n            userGateway.deleteUser(words[1]);\n            notifyClients();\n            break;\n        }\n    }\n    try {\n    Thread.sleep(1000);\n    } catch (Exception e){}\n    String time_stamp = new java.util.Date().toString();\n    String returnCode = \"Single Socket Server responded at \" + time_stamp + (char) 13;\n    sendMessage(client, returnCode);\n}\n\n/**\n * Method for sending messages from the server to the client\n * @param client the client socket where to send the message\n * @param message the message itself to be sent\n * @throws IOException \n */\nprivate void sendMessage(Socket client, String message) throws IOException {\n    BufferedWriter writer = new BufferedWriter(\n    new OutputStreamWriter(client.getOutputStream()));\n    writer.write(message);\n    System.out.println(\"[SERVER WRITE]: \"+message);\n    writer.flush();\n}\n\npublic void notifyClients() throws IOException\n{\n    for(Socket s : clientsConnected)\n    {\n        sendMessage(s, \"CHANGE IN DATA \");\n    }\n}\n\n/**\n * @param args the command line arguments\n * @throws java.sql.SQLException\n */\npublic static void main(String[] args) throws SQLException {\n    Database database = new Database();\n    UserGateway userGateway = new UserGateway();\n    FineGateway fineGateway = new FineGateway();\n    DriverGateway driverGateway = new DriverGateway();\n    clientsConnected = new ArrayList&lt;&gt;();\n    // Setting a default port number.\n    int portNumber = 2015;\n    int count = 0;\n    System.out.println(\"Starting the multiple socket server at port: \" + portNumber);\n    try {\n    ServerSocket serverSocket = new ServerSocket(portNumber);\n    System.out.println(\"Multiple Socket Server Initialized\");\n    //Listen for clients\n    while(true) {\n    Socket client = serverSocket.accept();\n    clientsConnected.add(client);\n    Runnable runnable = new FinesPaymentServer(database, userGateway, fineGateway, driverGateway, client, ++count);\n    Thread thread = new Thread(runnable);\n    thread.start();\n    }\n    } catch (Exception e) {}\n}\n}\n</code></pre>\n\n<p>The client class:</p>\n\n<pre><code>public class FinesPaymentClient implements Runnable {\n\nprivate String hostname = \"localhost\";\nprivate int port = 2015;\nSocket socketClient;\nAdministratorModel adminModel;\nPoliceModel policeModel;\nPostModel postModel;\n\n/**\n * Constructor of the class\n * @param hostname the host name of the connection\n * @param port the port of the connection\n * @throws UnknownHostException\n * @throws IOException \n */\npublic FinesPaymentClient(String hostname, int port, AdministratorModel adminModel, PoliceModel policeModel, PostModel postModel) throws UnknownHostException, IOException\n{\n    this.hostname = hostname;\n    this.port = port;\n    this.adminModel = adminModel;\n    this.policeModel = policeModel;\n    this.postModel = postModel;\n    connect();\n}\n\n/**\n * Method for connecting to the host by a socket\n * @throws UnknownHostException\n * @throws IOException \n */\npublic void connect() throws UnknownHostException, IOException {\n    System.out.println(\"Attempting to connect to \" + hostname + \":\" + port);\n    socketClient = new Socket(hostname, port);\n    System.out.println(\"Connection Established\");\n}\n\n/**\n * Method for reading response from the server\n * @return the string read from the server\n * @throws IOException \n */\npublic String readResponse() throws IOException {\n    String userInput;\n    BufferedReader stdIn = new BufferedReader(\n    new InputStreamReader(socketClient.getInputStream()));\n    System.out.println(\"[CLIENT READ]:\");\n    while ((userInput = stdIn.readLine()) != null) {\n        System.out.println(userInput);\n        return userInput;\n    }\n    return userInput;\n}\n\n/**\n * Method for closing connection between client and server\n * @throws IOException \n */\npublic void closeConnection() throws IOException {\n    socketClient.close();\n}\n\n/**\n * Method for writing messages to the server\n * @param message the message to be sent\n * @throws IOException \n */\npublic void writeMessage(String message) throws IOException {\n    String time_stamp = new java.util.Date().toString();\n    // Please note that we placed a char(13) at the end of process...\n    // we use this to let the server know we are at the end\n    // of the data we are sending\n    String process = message + (char) 13;\n    BufferedWriter stdOut = new BufferedWriter(\n    new OutputStreamWriter(socketClient.getOutputStream()));\n    stdOut.write(process);\n    System.out.println(\"[CLIENT WRITE]: \"+process);\n    // We need to flush the buffer to ensure that the data will be written\n    // across the socket in a timely manner\n    stdOut.flush();\n}\n\n@Override\npublic void run() {\n    try {\n        String response;\n        while(true)\n        {\n            response = readResponse();\n            System.out.println(\"HERE\"+response.substring(0, 13));\n            if(response.substring(0, 13).equals(\"CHANGE IN DATA\"))\n            {\n                adminModel.setChange();\n            }\n        }\n    } catch (IOException e) {\n        System.out.println(e);\n    }\n}\n\n/**\n * Main method of the application\n * @param arg the parameters given as arguments\n * @throws SQLException\n * @throws UnknownHostException\n * @throws IOException \n */\npublic static void main(String arg[]) throws SQLException, UnknownHostException, IOException {\n    AdministratorModel adminModel = new AdministratorModel();\n    PoliceModel policeModel = new PoliceModel();\n    PostModel postModel = new PostModel();\n    FinesPaymentClient client = new FinesPaymentClient(\"localhost\", 2015, adminModel, policeModel, postModel);\n    Runnable client2 = new FinesPaymentClient(\"localhost\", 2015, adminModel, policeModel, postModel);\n    Thread thread = new Thread(client2);\n    thread.start();\n    Login login = new Login();\n    ClientSide clientSide = new ClientSide(login, client, adminModel, policeModel, postModel);\n}\n}\n</code></pre>\n\n<p>ClientSide class:</p>\n\n<pre><code>public class ClientSide {\nprivate final Login login;\nprivate FinesPaymentClient client;\nAdministratorModel adminModel;\nPoliceModel policeModel;\nPostModel postModel;\n\n/**\n * Constructor instantiating needed classes\n * @param login an instance of the login class\n * @param client the client needing the control logic\n * @param adminModel\n * @param policeModel\n * @param postModel\n * @throws SQLException using classes connecting to a database sql exceptions can occur\n */\npublic ClientSide(Login login, FinesPaymentClient client, AdministratorModel adminModel, PoliceModel policeModel, PostModel postModel) throws SQLException\n{\n    this.login = login;\n    this.client = client;\n    this.adminModel = adminModel;\n    this.policeModel = policeModel;\n    this.postModel = postModel;\n    login.addButtonListener(new ButtonListener());\n}\n\n/**\n * Listener for the login button. Reads, verifies and provides the interface according to logged in user type.\n */\nclass ButtonListener implements ActionListener {\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        try \n        {\n            client.writeMessage(\"a \" + login.field1.getText()+ \" \" + login.field2.getText());\n            String response = client.readResponse();\n            if(response.charAt(0) == '1')\n            {   \n                login.setVisible(false);\n                AdministratorGUI administratorGUI = new AdministratorGUI(adminModel, client);\n                AdministratorController adminController = new AdministratorController(client, administratorGUI, adminModel);              \n            }\n            //if user is post office employee\n            else if(response.charAt(0) == '2')\n            {\n                login.setVisible(false);\n                PostGUI postGUI = new PostGUI();\n                PostController postController = new PostController(client, postGUI, postModel);\n            }\n            //if user is police employee\n            else if(response.charAt(0) == '3')\n            {\n                login.setVisible(false);\n                PoliceGUI policeGUI = new PoliceGUI();\n                PoliceController policeController = new PoliceController(client, policeGUI, policeModel);              \n            }\n            else\n            {\n                JOptionPane.showMessageDialog(null,\"Login failed! Please try again!\");\n            }\n        } \n        catch (IOException ex) \n        {\n            Logger.getLogger(ClientSide.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n}\n}\n</code></pre>\n\n<p>I'm 99% sure that the error is on client side reading the message sent from the server as notification, but I simply cannot figure it out how could I retrieve that message. Right now I have a try in the client threads run method, but doesn't work. Other classes and other functionalities work just fine, this is my only problem. Do you have any ideas what the mistake could be? I would appreciate any help.</p>\n"},{"tags":["java","sockets","socketexception"],"answers":[{"tags":[],"owner":{"account_id":12731935,"reputation":11,"user_id":9248244,"display_name":"T.Er"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559231053,"creation_date":1559217845,"answer_id":56377978,"question_id":56376807,"body_markdown":"I think, you don&#39;t have permission for access your email. For example while i try in my gmail account, if i don&#39;t open the setting that show at below, i get a authorization failed but if i open the setting, i can send e-mail with your code. \r\n\r\nPlease check your e-mail permission and settings. \r\n\r\n[settings picture][1]\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rIMYL.png","title":"Could not connect to SMTP host: outlook.office365.com, port: 587; nested exception is: java.net.SocketException: Permission denied: connect","body":"<p>I think, you don't have permission for access your email. For example while i try in my gmail account, if i don't open the setting that show at below, i get a authorization failed but if i open the setting, i can send e-mail with your code. </p>\n\n<p>Please check your e-mail permission and settings. </p>\n\n<p><a href=\"https://i.stack.imgur.com/rIMYL.png\" rel=\"nofollow noreferrer\">settings picture</a></p>\n"}],"owner":{"account_id":13925153,"reputation":3,"user_id":10054676,"display_name":"rama"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9638,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696154730,"creation_date":1559213423,"question_id":56376807,"body_markdown":"I have written code that sends email using outlook.office365.com. When I am running the program getting the following error.\r\n\r\n\r\n&gt;**javax.mail.MessagingException:** Could not connect to SMTP host: outlook.office365.com, port: 587;\r\n nested exception is:\r\n\t\r\n&gt;**`java.net.SocketException:`** Permission denied: connect\r\n\r\n\r\n    private static final String SERVIDOR_SMTP = &quot;outlook.office365.com&quot;;\r\n    private static final int PORTA_SERVIDOR_SMTP = 587;\r\n    private static final String CONTA_PADRAO = &quot;xxxx@xxx.com&quot;; //Cofig  Mail Id\r\n    private static final String SENHA_CONTA_PADRAO = &quot;XYZ&quot;; // Password\r\n\r\n    private final String from = &quot;xxxx@xxx.com&quot;; \r\n    private final String to = &quot;xxxx@xxx.com&quot;;\r\n\r\n    private final String subject = &quot;Teste&quot;;\r\n    private final String messageContent = &quot;Teste de Mensagem&quot;;\r\n\r\n    public void sendEmail() {\r\n        final Session session = Session.getInstance(this.getEmailProperties(), new Authenticator() {\r\n\r\n            @Override\r\n            protected PasswordAuthentication getPasswordAuthentication() {\r\n                return new PasswordAuthentication(CONTA_PADRAO, SENHA_CONTA_PADRAO);\r\n            }\r\n\r\n        });\r\n\r\n        try {\r\n            final Message message = new MimeMessage(session);\r\n            message.setRecipient(Message.RecipientType.TO, new InternetAddress(to));\r\n            message.setFrom(new InternetAddress(from));\r\n            message.setSubject(subject);\r\n            message.setText(messageContent);\r\n            message.setSentDate(new Date());\r\n            Transport.send(message);\r\n        } catch (final MessagingException ex) {\r\n           System.out.println(&quot; &quot;+ex);\r\n        }\r\n    }\r\n\r\n    public Properties getEmailProperties() {\r\n        final Properties config = new Properties();\r\n        config.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n        config.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n        config.put(&quot;mail.smtp.host&quot;, SERVIDOR_SMTP);\r\n        config.put(&quot;mail.smtp.port&quot;, PORTA_SERVIDOR_SMTP);\r\n        return config;\r\n    }\r\n\r\n    public static void main(final String[] args) {\r\n        new SendAttachmentInEmail().sendEmail();\r\n    }\r\n","title":"Could not connect to SMTP host: outlook.office365.com, port: 587; nested exception is: java.net.SocketException: Permission denied: connect","body":"<p>I have written code that sends email using outlook.office365.com. When I am running the program getting the following error.</p>\n\n<blockquote>\n  <p><strong>javax.mail.MessagingException:</strong> Could not connect to SMTP host: outlook.office365.com, port: 587;\n   nested exception is:</p>\n  \n  <p><strong><code>java.net.SocketException:</code></strong> Permission denied: connect</p>\n</blockquote>\n\n<pre><code>private static final String SERVIDOR_SMTP = \"outlook.office365.com\";\nprivate static final int PORTA_SERVIDOR_SMTP = 587;\nprivate static final String CONTA_PADRAO = \"xxxx@xxx.com\"; //Cofig  Mail Id\nprivate static final String SENHA_CONTA_PADRAO = \"XYZ\"; // Password\n\nprivate final String from = \"xxxx@xxx.com\"; \nprivate final String to = \"xxxx@xxx.com\";\n\nprivate final String subject = \"Teste\";\nprivate final String messageContent = \"Teste de Mensagem\";\n\npublic void sendEmail() {\n    final Session session = Session.getInstance(this.getEmailProperties(), new Authenticator() {\n\n        @Override\n        protected PasswordAuthentication getPasswordAuthentication() {\n            return new PasswordAuthentication(CONTA_PADRAO, SENHA_CONTA_PADRAO);\n        }\n\n    });\n\n    try {\n        final Message message = new MimeMessage(session);\n        message.setRecipient(Message.RecipientType.TO, new InternetAddress(to));\n        message.setFrom(new InternetAddress(from));\n        message.setSubject(subject);\n        message.setText(messageContent);\n        message.setSentDate(new Date());\n        Transport.send(message);\n    } catch (final MessagingException ex) {\n       System.out.println(\" \"+ex);\n    }\n}\n\npublic Properties getEmailProperties() {\n    final Properties config = new Properties();\n    config.put(\"mail.smtp.auth\", \"true\");\n    config.put(\"mail.smtp.starttls.enable\", \"true\");\n    config.put(\"mail.smtp.host\", SERVIDOR_SMTP);\n    config.put(\"mail.smtp.port\", PORTA_SERVIDOR_SMTP);\n    return config;\n}\n\npublic static void main(final String[] args) {\n    new SendAttachmentInEmail().sendEmail();\n}\n</code></pre>\n"},{"tags":["java","json","jackson","elastic-appsearch"],"comments":[{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1680783578,"post_id":75948745,"comment_id":133958377,"body_markdown":"I believe this is a go-to usecase for [Josson](https://github.com/octomix/josson) - try reading a few questions about it here on SO and you&#39;ll see.","body":"I believe this is a go-to usecase for <a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">Josson</a> - try reading a few questions about it here on SO and you&#39;ll see."},{"owner":{"account_id":18936900,"reputation":46,"user_id":13819413,"display_name":"Diego Sanz"},"score":0,"creation_date":1681136427,"post_id":75948745,"comment_id":134004082,"body_markdown":"As this library doesn&#39;t have a big number of stars, I don&#39;t think it would be the best solution for a production environment. Isn&#39;t there any way to do it with Jackson ir any other popular parsing library?","body":"As this library doesn&#39;t have a big number of stars, I don&#39;t think it would be the best solution for a production environment. Isn&#39;t there any way to do it with Jackson ir any other popular parsing library?"},{"owner":{"account_id":18936900,"reputation":46,"user_id":13819413,"display_name":"Diego Sanz"},"score":0,"creation_date":1681280993,"post_id":75948745,"comment_id":134029088,"body_markdown":"For the moment, I have created a class like the indicated in this question: https://stackoverflow.com/questions/75977888/use-jackson-deserializer-to-read-child-json-object and then I map with Mapstruct from the other class to this one","body":"For the moment, I have created a class like the indicated in this question: <a href=\"https://stackoverflow.com/questions/75977888/use-jackson-deserializer-to-read-child-json-object\" title=\"use jackson deserializer to read child json object\">stackoverflow.com/questions/75977888/&hellip;</a> and then I map with Mapstruct from the other class to this one"}],"answers":[{"tags":[],"owner":{"account_id":9190353,"reputation":457,"user_id":6831116,"display_name":"Gopinath Radhakrishnan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681358617,"creation_date":1681358617,"answer_id":76001531,"question_id":75948745,"body_markdown":"You can read the JSON Property as Map and unpack the needed attribute and assign to the property. You should be able to do something like:\r\n\r\n```\r\nclass MyClass {\r\n    private String name;\r\n    private Double number;\r\n\r\n    @JsonProperty(&quot;name&quot;)\r\n    private void unpackNameFromNestedRawObject(Map&lt;String, String&gt; name) {\r\n      this.name = name.get(&quot;raw&quot;);\r\n    }\r\n\r\n    @JsonProperty(&quot;number&quot;)\r\n    private void unpackNumberFromNestedRawObject(Map&lt;String, Double&gt; number) {\r\n      this.number = number.get(&quot;raw&quot;);\r\n    }\r\n\r\n    public String getName() {\r\n      return name;\r\n    }\r\n\r\n    public void setName(final String name) {\r\n      this.name = name;\r\n    }\r\n\r\n    public Double getNumber() {\r\n      return number;\r\n    }\r\n\r\n    public void setNumber(final Double number) {\r\n      this.number = number;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n      return &quot;MyClass{&quot; + &quot;name=&#39;&quot; + name + &#39;\\&#39;&#39; + &quot;, number=&quot; + number + &#39;}&#39;;\r\n    }\r\n  }\r\n```","title":"Parse JSON in Java with intermediate element ({&quot;realKey&quot;: {&quot;badKey&quot;: &quot;goodValue&quot;}}))","body":"<p>You can read the JSON Property as Map and unpack the needed attribute and assign to the property. You should be able to do something like:</p>\n<pre><code>class MyClass {\n    private String name;\n    private Double number;\n\n    @JsonProperty(&quot;name&quot;)\n    private void unpackNameFromNestedRawObject(Map&lt;String, String&gt; name) {\n      this.name = name.get(&quot;raw&quot;);\n    }\n\n    @JsonProperty(&quot;number&quot;)\n    private void unpackNumberFromNestedRawObject(Map&lt;String, Double&gt; number) {\n      this.number = number.get(&quot;raw&quot;);\n    }\n\n    public String getName() {\n      return name;\n    }\n\n    public void setName(final String name) {\n      this.name = name;\n    }\n\n    public Double getNumber() {\n      return number;\n    }\n\n    public void setNumber(final Double number) {\n      this.number = number;\n    }\n\n    @Override\n    public String toString() {\n      return &quot;MyClass{&quot; + &quot;name='&quot; + name + '\\'' + &quot;, number=&quot; + number + '}';\n    }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18936900,"reputation":46,"user_id":13819413,"display_name":"Diego Sanz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696154636,"creation_date":1696154636,"answer_id":77209999,"question_id":75948745,"body_markdown":"For anyone who have the same doubt, I finally created a class like this one:\r\n\r\n    public class Wrapper&lt;T&gt; {\r\n        T value;\r\n        // getters/setters\r\n    }\r\n\r\nAnd then I created my class like this one:\r\n\r\n    public class MyClass {\r\n        RawWrapper&lt;String&gt; aStringField;\r\n        RawWrapper&lt;Integer&gt; aIntegerField;\r\n        ...\r\n    }\r\n\r\nWith that, JSON is parsed correctly. If then you want to transform it to another class with the same fields but without RawWrappers, in my case I have used Mapstruct to indicate how to pass from RawWrapper&lt;String&gt; to String, RawWrapper&lt;Integer&gt; to Integer, etc., and that&#39;s all!","title":"Parse JSON in Java with intermediate element ({&quot;realKey&quot;: {&quot;badKey&quot;: &quot;goodValue&quot;}}))","body":"<p>For anyone who have the same doubt, I finally created a class like this one:</p>\n<pre><code>public class Wrapper&lt;T&gt; {\n    T value;\n    // getters/setters\n}\n</code></pre>\n<p>And then I created my class like this one:</p>\n<pre><code>public class MyClass {\n    RawWrapper&lt;String&gt; aStringField;\n    RawWrapper&lt;Integer&gt; aIntegerField;\n    ...\n}\n</code></pre>\n<p>With that, JSON is parsed correctly. If then you want to transform it to another class with the same fields but without RawWrappers, in my case I have used Mapstruct to indicate how to pass from RawWrapper to String, RawWrapper to Integer, etc., and that's all!</p>\n"}],"owner":{"account_id":18936900,"reputation":46,"user_id":13819413,"display_name":"Diego Sanz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1696154636,"creation_date":1680778851,"question_id":75948745,"body_markdown":"I have a problem parsing a JSON to a Java class. I have read about Elasticsearch Search App APIs, and I have found responses are like this one:\r\n\r\n\r\n```\r\n{\r\n  &quot;name&quot;: {&quot;raw&quot;: &quot;Hello world&quot;},\r\n  &quot;number&quot;: {&quot;raw&quot;: 7.5}\r\n}\r\n```\r\n\r\nThat is, every field is an object with a key called `raw` and the real value I want. I would like to have a Java class like this one:\r\n\r\n\r\n```\r\npublic class MyClass {\r\n  private String name;\r\n  private Double number;\r\n}\r\n```\r\n\r\nI haven&#39;t seen in Jackson or any other mapping library something in order to map this JSON easily.\r\n\r\n\r\n\r\nI would expect something like that if we use Jackson (is not a requisite, we could use any other parsing library):\r\n\r\n\r\n```\r\nObjectMapper objectMapper = new ObjectMapper();\r\nMyClass jsonParsed = objectMapper.readValue(json, MyClass.class);\r\n```\r\n","title":"Parse JSON in Java with intermediate element ({&quot;realKey&quot;: {&quot;badKey&quot;: &quot;goodValue&quot;}}))","body":"<p>I have a problem parsing a JSON to a Java class. I have read about Elasticsearch Search App APIs, and I have found responses are like this one:</p>\n<pre><code>{\n  &quot;name&quot;: {&quot;raw&quot;: &quot;Hello world&quot;},\n  &quot;number&quot;: {&quot;raw&quot;: 7.5}\n}\n</code></pre>\n<p>That is, every field is an object with a key called <code>raw</code> and the real value I want. I would like to have a Java class like this one:</p>\n<pre><code>public class MyClass {\n  private String name;\n  private Double number;\n}\n</code></pre>\n<p>I haven't seen in Jackson or any other mapping library something in order to map this JSON easily.</p>\n<p>I would expect something like that if we use Jackson (is not a requisite, we could use any other parsing library):</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nMyClass jsonParsed = objectMapper.readValue(json, MyClass.class);\n</code></pre>\n"},{"tags":["java","methods","encapsulation"],"comments":[{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":5,"creation_date":1696151216,"post_id":77209841,"comment_id":136114646,"body_markdown":"Nothing will stop you from casting to `User`, so no, this does not provide &quot;protection&quot;, it will just be speedbump. That is also not the purpose of interfaces.","body":"Nothing will stop you from casting to <code>User</code>, so no, this does not provide &quot;protection&quot;, it will just be speedbump. That is also not the purpose of interfaces."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1696153056,"post_id":77209841,"comment_id":136114798,"body_markdown":"Anything &quot;public&quot; is accessible from anywhere! Moreover an interface is always public and is a &quot;tool&quot; for classes to group methods for purpose, it is not an access modifier or preventer Class definition access modifiers and method access modifiers public protected private and default are the main key to creating unobtainable classes and methods. If you want to prevent an interface from accessing a method , use the &quot;final&quot; keyword on the method signature. E.g. public final int getInt(){","body":"Anything &quot;public&quot; is accessible from anywhere! Moreover an interface is always public and is a &quot;tool&quot; for classes to group methods for purpose, it is not an access modifier or preventer Class definition access modifiers and method access modifiers public protected private and default are the main key to creating unobtainable classes and methods. If you want to prevent an interface from accessing a method , use the &quot;final&quot; keyword on the method signature. E.g. public final int getInt(){"},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1696157214,"post_id":77209841,"comment_id":136115146,"body_markdown":"@SamuelMarchant An interface is not always public, the methods defined in an interface are public, but the interface itself doesn&#39;t need to be. Also defining a method as final doesn&#39;t prevent access to a method, it just prevents overriding of the method.","body":"@SamuelMarchant An interface is not always public, the methods defined in an interface are public, but the interface itself doesn&#39;t need to be. Also defining a method as final doesn&#39;t prevent access to a method, it just prevents overriding of the method."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1696216660,"post_id":77209841,"comment_id":136120586,"body_markdown":"@Mark Rotteveel There isn&#39;t enough space in one comment for the last piece of it you have described! thx.","body":"@Mark Rotteveel There isn&#39;t enough space in one comment for the last piece of it you have described! thx."}],"answers":[{"tags":[],"owner":{"account_id":3588984,"reputation":115,"user_id":2995460,"display_name":"anteastra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696152165,"creation_date":1696152165,"answer_id":77209890,"question_id":77209841,"body_markdown":"SOLID principles are the key answer for your concernes.\r\nIn a way you want to separate logic of managing the state and managing operations you should create much more classes.\r\n\r\nHere is possible solution:\r\nYour class User is pojo now. Making **User** class **immutable** will make impossible to change objects of this class.\r\n\r\nTo perform changes on object you would need to create a new object with new internal state. Usually it would be done with some other class as a facade which will perform required operations and return new object.\r\n\r\nEffectively you would need some class **UserOperationManager**\r\nwhich will handle all required access to object\r\n\r\nThis approach will cover single responsibility and interface segregation principle","title":"Is creating an interface to a class a way to prevent to access the setters of this same class?","body":"<p>SOLID principles are the key answer for your concernes.\nIn a way you want to separate logic of managing the state and managing operations you should create much more classes.</p>\n<p>Here is possible solution:\nYour class User is pojo now. Making <strong>User</strong> class <strong>immutable</strong> will make impossible to change objects of this class.</p>\n<p>To perform changes on object you would need to create a new object with new internal state. Usually it would be done with some other class as a facade which will perform required operations and return new object.</p>\n<p>Effectively you would need some class <strong>UserOperationManager</strong>\nwhich will handle all required access to object</p>\n<p>This approach will cover single responsibility and interface segregation principle</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696154267,"creation_date":1696152820,"answer_id":77209924,"question_id":77209841,"body_markdown":"The [Answer by anteastra][1], and the [Comment by Mark Rotteveel][2], are both correct. \r\n\r\n## Produce an immutable object, with a copy of current state\r\n\r\nIf your app has some places where `User` should be mutable, and other places where `User` should be immutable, then make another class for the immutable situation. \r\n\r\nIf the main purpose of this other class is to transparently communicate immutable data, use a [record][3]. \r\n\r\n```java\r\npublic record UserImmutable ( String name ) implements UserOperations \r\n{\r\n    public String getName() {\r\n        return this.name ;\r\n    }\r\n}\r\n```\r\n\r\nAdd a `toUserImmutable()` method to your mutable class. This method produces an instance of our record with data based on the current state of our mutable object.\r\n\r\n```java\r\npublic class User implements UserOperations {\r\n\r\n    private String name;\r\n\r\n    public User(String name) {\r\n        this.name = name ;\r\n    }\r\n \r\n    public String getName() {\r\n        return name ;\r\n    }\r\n \r\n    public void setName(String name) {\r\n        this.name ;\r\n    }\r\n\r\n    public UserImmutable toUserImmutable() {\r\n        return new UserImmutable( this.name ) ;\r\n    }\r\n}\r\n```\r\n\r\nUsage:\r\n\r\n    UserImmutable userImmutable = user.toUserImmutable() ;  // Capture an immutable copy of the mutable object’s state. \r\n\r\nOr, use the more general interface. \r\n\r\n    UserOperations userImmutable = user.toUserImmutable() ;  // Capture an immutable copy of the mutable object’s state. \r\n\r\n\r\nOf course your immutable copy is just that, a copy. If the original mutable object changes its state, the immutable copy does *not* change. Whether that is a good thing or a bad thing depends on the specifics of your app’s situation.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77209890/642706\r\n  [2]: https://stackoverflow.com/questions/77209841/is-creating-an-interface-to-a-class-a-way-to-prevent-to-access-the-setters-of-th#comment136114646_77209841\r\n  [3]: https://openjdk.org/jeps/395","title":"Is creating an interface to a class a way to prevent to access the setters of this same class?","body":"<p>The <a href=\"https://stackoverflow.com/a/77209890/642706\">Answer by anteastra</a>, and the <a href=\"https://stackoverflow.com/questions/77209841/is-creating-an-interface-to-a-class-a-way-to-prevent-to-access-the-setters-of-th#comment136114646_77209841\">Comment by Mark Rotteveel</a>, are both correct.</p>\n<h2>Produce an immutable object, with a copy of current state</h2>\n<p>If your app has some places where <code>User</code> should be mutable, and other places where <code>User</code> should be immutable, then make another class for the immutable situation.</p>\n<p>If the main purpose of this other class is to transparently communicate immutable data, use a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record UserImmutable ( String name ) implements UserOperations \n{\n    public String getName() {\n        return this.name ;\n    }\n}\n</code></pre>\n<p>Add a <code>toUserImmutable()</code> method to your mutable class. This method produces an instance of our record with data based on the current state of our mutable object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class User implements UserOperations {\n\n    private String name;\n\n    public User(String name) {\n        this.name = name ;\n    }\n \n    public String getName() {\n        return name ;\n    }\n \n    public void setName(String name) {\n        this.name ;\n    }\n\n    public UserImmutable toUserImmutable() {\n        return new UserImmutable( this.name ) ;\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>UserImmutable userImmutable = user.toUserImmutable() ;  // Capture an immutable copy of the mutable object’s state. \n</code></pre>\n<p>Or, use the more general interface.</p>\n<pre><code>UserOperations userImmutable = user.toUserImmutable() ;  // Capture an immutable copy of the mutable object’s state. \n</code></pre>\n<p>Of course your immutable copy is just that, a copy. If the original mutable object changes its state, the immutable copy does <em>not</em> change. Whether that is a good thing or a bad thing depends on the specifics of your app’s situation.</p>\n"},{"tags":[],"owner":{"account_id":14536865,"reputation":1,"user_id":10499972,"display_name":"Evgeny Smagin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696154205,"creation_date":1696154205,"answer_id":77209978,"question_id":77209841,"body_markdown":"As already said above it is better to use immutable state (mark the fields final) and exclude setter, if still for some reason you need to leave setter, then you can make it private and use it in those methods that are declared in the public interface","title":"Is creating an interface to a class a way to prevent to access the setters of this same class?","body":"<p>As already said above it is better to use immutable state (mark the fields final) and exclude setter, if still for some reason you need to leave setter, then you can make it private and use it in those methods that are declared in the public interface</p>\n"}],"owner":{"account_id":20597029,"reputation":11,"user_id":22665139,"display_name":"Dervieux Beno&#238;t"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1696154267,"creation_date":1696150962,"question_id":77209841,"body_markdown":"Let&#39;s say I have the class `User` with the attributes `name`, `email` etc.. In my code, I still want to be able to update that information, but I don&#39;t want anyone being able to reach the setters methods directly.\r\n\r\n```\r\npublic class User implements UserOperations {\r\n\r\n    private String name;\r\n\r\n    public User(String name) {\r\n        this.name = name\r\n    }\r\n \r\n    public String getName() {\r\n        return name \r\n    }\r\n \r\n    public void setName(String name) {\r\n        this.name;\r\n    }\r\n}\r\n```\r\n```\r\npublic interface UserOperations {\r\n\r\n     String getName();\r\n}\r\n```\r\n\r\nIs creating an interface with only the getters methods a good idea or should I change the access-capabilities of the User&#39;s method from `public` to `private` or `protected`? \r\n\r\nI tried to implement the interface, but I feel as if it&#39;s not the best solution there is.","title":"Is creating an interface to a class a way to prevent to access the setters of this same class?","body":"<p>Let's say I have the class <code>User</code> with the attributes <code>name</code>, <code>email</code> etc.. In my code, I still want to be able to update that information, but I don't want anyone being able to reach the setters methods directly.</p>\n<pre><code>public class User implements UserOperations {\n\n    private String name;\n\n    public User(String name) {\n        this.name = name\n    }\n \n    public String getName() {\n        return name \n    }\n \n    public void setName(String name) {\n        this.name;\n    }\n}\n</code></pre>\n<pre><code>public interface UserOperations {\n\n     String getName();\n}\n</code></pre>\n<p>Is creating an interface with only the getters methods a good idea or should I change the access-capabilities of the User's method from <code>public</code> to <code>private</code> or <code>protected</code>?</p>\n<p>I tried to implement the interface, but I feel as if it's not the best solution there is.</p>\n"},{"tags":["java","android","mediapipe"],"owner":{"account_id":8203692,"reputation":606,"user_id":9551463,"display_name":"General Omosco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696153175,"creation_date":1696153175,"question_id":77209933,"body_markdown":"What I&#39;m trying to achieved is to get the mediapipe frame output and modify it like adding overlay and other stuffs then send it back to mediapipe, but unfortunately I&#39;m getting white blank in the bitmap image.\r\n\r\nI tried to see check [here (FrameProcessor.java)](https://github.com/google/mediapipe/blob/master/mediapipe/java/com/google/mediapipe/components/FrameProcessor.java) if they are some way they converted the gpu frame to bitmap but there&#39;s none!\r\n\r\n```\r\n\r\nclass MyTextureConsumer implements TextureFrameConsumer {\r\n    private final FrameProcessor processor;\r\n    private final Context context;\r\n    private int aa=0;\r\n\r\n    MyTextureConsumer(Context context, FrameProcessor processor) {\r\n        this.context = context;\r\n        this.processor = processor;\r\n    }\r\n    @Override\r\n    public void onNewFrame(TextureFrame frame) {\r\n        // Get GPU texture id\r\n        int textureId = frame.getTextureName();\r\n\r\n        int[] frameBuffer = new int[1];\r\n        GLES20.glGenFramebuffers(1, frameBuffer, 0);\r\n        GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, frameBuffer[0]);\r\n\r\n        GLES20.glFramebufferTexture2D(\r\n                GLES20.GL_FRAMEBUFFER, GLES20.GL_COLOR_ATTACHMENT0, GLES20.GL_TEXTURE_2D, textureId, 0);\r\n\r\n        // Bind the FBO and read the texture into a ByteBuffer\r\n        GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, frameBuffer[0]);\r\n\r\n        ByteBuffer buffer = ByteBuffer.allocateDirect(frame.getWidth() * frame.getHeight() * 4); // RGBA format\r\n        buffer.order(ByteOrder.nativeOrder());\r\n\r\n        GLES20.glReadPixels(0, 0, frame.getWidth(), frame.getHeight(), GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, buffer);\r\n\r\n        // Create a Bitmap from the ByteBuffer\r\n        Bitmap bitmap = Bitmap.createBitmap(frame.getWidth(), frame.getHeight(), Bitmap.Config.ARGB_8888);\r\n        buffer.rewind();\r\n        bitmap.copyPixelsFromBuffer(buffer);\r\n\r\n        saveBitmapToGallery(bitmap); // I&#39;m getting blank white bitmap image\r\n        // Release OpenGL resources\r\n        GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, 0);\r\n        GLES20.glDeleteFramebuffers(1, frameBuffer, 0);\r\n\r\n        // Create a Canvas for drawing on the bitmap\r\n        Canvas canvas = new Canvas(bitmap);\r\n\r\n        // Define circle properties (position and radius)\r\n        int centerX = frame.getWidth() / 2;\r\n        int centerY = frame.getHeight() / 2;\r\n        int radius = Math.min(frame.getWidth(), frame.getHeight()) / 4; // Adjust the radius as needed\r\n\r\n        // Create a Paint object for drawing the circle\r\n        Paint paint = new Paint();\r\n        paint.setColor(Color.RED); // Circle color\r\n        paint.setStyle(Paint.Style.FILL);\r\n\r\n        // Draw a filled circle on the bitmap\r\n        canvas.drawCircle(centerX, centerY, radius, paint);\r\n\r\n        // Convert the modified bitmap back to a ByteBuffer\r\n        ByteBuffer editedByteBuffer = ByteBuffer.allocateDirect(frame.getWidth() * frame.getHeight() * 4); // ARGB_8888 format\r\n        bitmap.copyPixelsToBuffer(editedByteBuffer);\r\n        Bitmap editedBitmap = Bitmap.createBitmap(frame.getWidth(), frame.getHeight(), Bitmap.Config.ARGB_8888);\r\n        editedByteBuffer.rewind();\r\n        editedBitmap.copyPixelsFromBuffer(editedByteBuffer);\r\n\r\n\r\n\r\n        Packet imagePacket = processor.getPacketCreator().createRgbImageFrame(editedBitmap);\r\n\r\n        try {\r\n            //processor.getGraph().addConsumablePacketToInputStream(&quot;input_video&quot;, imagePacket, frame.getTimestamp());\r\n        } catch (MediaPipeException var10) {\r\n            Log.e(&quot;FrameProcessor&quot;, &quot;Mediapipe error: &quot;, var10);\r\n        }\r\n        \r\n        System.out.println(&quot;========================================&quot;);\r\n        System.out.println(&quot;NEW FRAME&quot;);\r\n        System.out.println(&quot;===================s=====================&quot;);\r\n        imagePacket.release();\r\n        frame.release();\r\n    }\r\n    private void saveBitmapToGallery(Bitmap bitmap) {\r\n        aa++;\r\n        if(aa &lt; 45 || aa &gt; 50) return;\r\n        ContentValues values = new ContentValues();\r\n        values.put(MediaStore.Images.Media.DISPLAY_NAME, &quot;my_image.png&quot;);\r\n        values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/png&quot;);\r\n\r\n        Uri uri = context.getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\r\n\r\n        try {\r\n            OutputStream fos = context.getContentResolver().openOutputStream(uri);\r\n            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);\r\n            fos.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n};\r\n```","title":"How to convert GPU TextureFrame to bitmap in android mediapipe","body":"<p>What I'm trying to achieved is to get the mediapipe frame output and modify it like adding overlay and other stuffs then send it back to mediapipe, but unfortunately I'm getting white blank in the bitmap image.</p>\n<p>I tried to see check <a href=\"https://github.com/google/mediapipe/blob/master/mediapipe/java/com/google/mediapipe/components/FrameProcessor.java\" rel=\"nofollow noreferrer\">here (FrameProcessor.java)</a> if they are some way they converted the gpu frame to bitmap but there's none!</p>\n<pre><code>\nclass MyTextureConsumer implements TextureFrameConsumer {\n    private final FrameProcessor processor;\n    private final Context context;\n    private int aa=0;\n\n    MyTextureConsumer(Context context, FrameProcessor processor) {\n        this.context = context;\n        this.processor = processor;\n    }\n    @Override\n    public void onNewFrame(TextureFrame frame) {\n        // Get GPU texture id\n        int textureId = frame.getTextureName();\n\n        int[] frameBuffer = new int[1];\n        GLES20.glGenFramebuffers(1, frameBuffer, 0);\n        GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, frameBuffer[0]);\n\n        GLES20.glFramebufferTexture2D(\n                GLES20.GL_FRAMEBUFFER, GLES20.GL_COLOR_ATTACHMENT0, GLES20.GL_TEXTURE_2D, textureId, 0);\n\n        // Bind the FBO and read the texture into a ByteBuffer\n        GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, frameBuffer[0]);\n\n        ByteBuffer buffer = ByteBuffer.allocateDirect(frame.getWidth() * frame.getHeight() * 4); // RGBA format\n        buffer.order(ByteOrder.nativeOrder());\n\n        GLES20.glReadPixels(0, 0, frame.getWidth(), frame.getHeight(), GLES20.GL_RGBA, GLES20.GL_UNSIGNED_BYTE, buffer);\n\n        // Create a Bitmap from the ByteBuffer\n        Bitmap bitmap = Bitmap.createBitmap(frame.getWidth(), frame.getHeight(), Bitmap.Config.ARGB_8888);\n        buffer.rewind();\n        bitmap.copyPixelsFromBuffer(buffer);\n\n        saveBitmapToGallery(bitmap); // I'm getting blank white bitmap image\n        // Release OpenGL resources\n        GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, 0);\n        GLES20.glDeleteFramebuffers(1, frameBuffer, 0);\n\n        // Create a Canvas for drawing on the bitmap\n        Canvas canvas = new Canvas(bitmap);\n\n        // Define circle properties (position and radius)\n        int centerX = frame.getWidth() / 2;\n        int centerY = frame.getHeight() / 2;\n        int radius = Math.min(frame.getWidth(), frame.getHeight()) / 4; // Adjust the radius as needed\n\n        // Create a Paint object for drawing the circle\n        Paint paint = new Paint();\n        paint.setColor(Color.RED); // Circle color\n        paint.setStyle(Paint.Style.FILL);\n\n        // Draw a filled circle on the bitmap\n        canvas.drawCircle(centerX, centerY, radius, paint);\n\n        // Convert the modified bitmap back to a ByteBuffer\n        ByteBuffer editedByteBuffer = ByteBuffer.allocateDirect(frame.getWidth() * frame.getHeight() * 4); // ARGB_8888 format\n        bitmap.copyPixelsToBuffer(editedByteBuffer);\n        Bitmap editedBitmap = Bitmap.createBitmap(frame.getWidth(), frame.getHeight(), Bitmap.Config.ARGB_8888);\n        editedByteBuffer.rewind();\n        editedBitmap.copyPixelsFromBuffer(editedByteBuffer);\n\n\n\n        Packet imagePacket = processor.getPacketCreator().createRgbImageFrame(editedBitmap);\n\n        try {\n            //processor.getGraph().addConsumablePacketToInputStream(&quot;input_video&quot;, imagePacket, frame.getTimestamp());\n        } catch (MediaPipeException var10) {\n            Log.e(&quot;FrameProcessor&quot;, &quot;Mediapipe error: &quot;, var10);\n        }\n        \n        System.out.println(&quot;========================================&quot;);\n        System.out.println(&quot;NEW FRAME&quot;);\n        System.out.println(&quot;===================s=====================&quot;);\n        imagePacket.release();\n        frame.release();\n    }\n    private void saveBitmapToGallery(Bitmap bitmap) {\n        aa++;\n        if(aa &lt; 45 || aa &gt; 50) return;\n        ContentValues values = new ContentValues();\n        values.put(MediaStore.Images.Media.DISPLAY_NAME, &quot;my_image.png&quot;);\n        values.put(MediaStore.Images.Media.MIME_TYPE, &quot;image/png&quot;);\n\n        Uri uri = context.getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);\n\n        try {\n            OutputStream fos = context.getContentResolver().openOutputStream(uri);\n            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);\n            fos.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n};\n</code></pre>\n"},{"tags":["java","performance","logging","log4j"],"comments":[{"owner":{"account_id":14531,"reputation":118870,"user_id":29995,"accept_rate":77,"display_name":"Rob Hruska"},"score":0,"creation_date":1282942293,"post_id":3588019,"comment_id":3764590,"body_markdown":"While information like source file and line are nice to have, if you&#39;re writing your logs correctly you shouldn&#39;t need them. Most logs should be unique, and will be using the class they&#39;re in as the Logger name. If you include the logger name in your logs, you should easily be able to determine the log you&#39;re looking for in the corresponding file.","body":"While information like source file and line are nice to have, if you&#39;re writing your logs correctly you shouldn&#39;t need them. Most logs should be unique, and will be using the class they&#39;re in as the Logger name. If you include the logger name in your logs, you should easily be able to determine the log you&#39;re looking for in the corresponding file."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1282942493,"post_id":3588019,"comment_id":3764623,"body_markdown":"@Rob, having source and line available allows you to jump directly to the location - perhaps even automatically - instead of having to look for it manually.","body":"@Rob, having source and line available allows you to jump directly to the location - perhaps even automatically - instead of having to look for it manually."},{"owner":{"account_id":14531,"reputation":118870,"user_id":29995,"accept_rate":77,"display_name":"Rob Hruska"},"score":0,"creation_date":1282942600,"post_id":3588019,"comment_id":3764651,"body_markdown":"@Thorbj&#248;rn - A lot of the applications I work with have source/line numbers enabled, and I agree that it&#39;s convenient. But if performance is a concern, one could still debug successfully without it.","body":"@Thorbj&#248;rn - A lot of the applications I work with have source/line numbers enabled, and I agree that it&#39;s convenient. But if performance is a concern, one could still debug successfully without it."},{"owner":{"account_id":150370,"reputation":549,"user_id":363517,"accept_rate":75,"display_name":"Renan Mozone"},"score":0,"creation_date":1282943084,"post_id":3588019,"comment_id":3764717,"body_markdown":"My intention is to use the location information as a unique identifier for the log message, and later compute statistics using these unique identifiers, not for assist in debugging tasks. But I agree that having location information in the log file is handy.","body":"My intention is to use the location information as a unique identifier for the log message, and later compute statistics using these unique identifiers, not for assist in debugging tasks. But I agree that having location information in the log file is handy."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1282943460,"post_id":3588019,"comment_id":3764764,"body_markdown":"@Rob, if performance is that much a concern you don&#39;t log at all.  In any case, Java 6 allows that information to be picked out MUCH cheaper than before.  I don&#39;t know if Log4j has been updated to use that yet.","body":"@Rob, if performance is that much a concern you don&#39;t log at all.  In any case, Java 6 allows that information to be picked out MUCH cheaper than before.  I don&#39;t know if Log4j has been updated to use that yet."},{"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"score":0,"creation_date":1282943717,"post_id":3588019,"comment_id":3764785,"body_markdown":"stack trace is still expensive. throwing and catching exceptions are dirty cheap, except the part of filling stack trace.","body":"stack trace is still expensive. throwing and catching exceptions are dirty cheap, except the part of filling stack trace."},{"owner":{"account_id":12145,"reputation":40207,"user_id":23771,"accept_rate":60,"display_name":"Mike Dunlavey"},"score":0,"creation_date":1282944149,"post_id":3588019,"comment_id":3764831,"body_markdown":"What is the end purpose for doing this?","body":"What is the end purpose for doing this?"},{"owner":{"account_id":12145,"reputation":40207,"user_id":23771,"accept_rate":60,"display_name":"Mike Dunlavey"},"score":0,"creation_date":1283003412,"post_id":3588019,"comment_id":3768123,"body_markdown":"What I&#39;m getting at is, are you doing this in order to find &quot;hotspots&quot; or &quot;bottlenecks&quot;, or for some other purpose? The question is tagged &quot;performance&quot;.","body":"What I&#39;m getting at is, are you doing this in order to find &quot;hotspots&quot; or &quot;bottlenecks&quot;, or for some other purpose? The question is tagged &quot;performance&quot;."},{"owner":{"account_id":150370,"reputation":549,"user_id":363517,"accept_rate":75,"display_name":"Renan Mozone"},"score":0,"creation_date":1283183410,"post_id":3588019,"comment_id":3781422,"body_markdown":"@Mike, the idea is to use log messages to compute general statistics like errors, warnings and even program functionality utilization, not for tuning purposes. Besides that, in distributed environments this technique could help detect servers that are behaving differently than others.","body":"@Mike, the idea is to use log messages to compute general statistics like errors, warnings and even program functionality utilization, not for tuning purposes. Besides that, in distributed environments this technique could help detect servers that are behaving differently than others."}],"answers":[{"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1282943462,"creation_date":1282943462,"answer_id":3588143,"question_id":3588019,"body_markdown":"I agree with Rob that it is generally unnecessary. Usually there&#39;s some distinct string in a log message, searching for it will get to the source. With a good IDE this is really fast.\r\n\r\nNow, given the question as is, this is a possible solution:\r\n\r\n    Class Foo\r\n        void bar()\r\n            new Logger(){} . warn(&quot;blah&quot;);\r\n\r\nfor each log action at runtime, a new object is created - that&#39;s not a problem.\r\n\r\nfor each line of source containing such log statement, a new class is created. that can be too many.\r\n\r\nhere&#39;s how the magic works:\r\n\r\n    abstract public class Logger\r\n        static Map&lt;Class, String&gt; sourceInfo = new ...\r\n        public Logger()\r\n            Class thisClass = this.getClass();\r\n            String info = sourceInfo.get(thisClass);\r\n            if(info==null)\r\n                 info = ... // init from stack trace\r\n                 sourceInfo.put(thisClass,info)\r\n            this.info = info\r\n\r\n         public void warn(msg)\r\n            log(WARN, this.info,msg)","title":"How to write caller location information in a log file using Java, without hurting performance?","body":"<p>I agree with Rob that it is generally unnecessary. Usually there's some distinct string in a log message, searching for it will get to the source. With a good IDE this is really fast.</p>\n\n<p>Now, given the question as is, this is a possible solution:</p>\n\n<pre><code>Class Foo\n    void bar()\n        new Logger(){} . warn(\"blah\");\n</code></pre>\n\n<p>for each log action at runtime, a new object is created - that's not a problem.</p>\n\n<p>for each line of source containing such log statement, a new class is created. that can be too many.</p>\n\n<p>here's how the magic works:</p>\n\n<pre><code>abstract public class Logger\n    static Map&lt;Class, String&gt; sourceInfo = new ...\n    public Logger()\n        Class thisClass = this.getClass();\n        String info = sourceInfo.get(thisClass);\n        if(info==null)\n             info = ... // init from stack trace\n             sourceInfo.put(thisClass,info)\n        this.info = info\n\n     public void warn(msg)\n        log(WARN, this.info,msg)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":160483,"reputation":10670,"user_id":380587,"accept_rate":89,"display_name":"Adam Schmideg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1282943900,"creation_date":1282943900,"answer_id":3588197,"question_id":3588019,"body_markdown":"How about making it part of the build process to replace certain placeholders, like `$filename$` and `$linenumber$` in this snippet.\r\n\r\n    logger.info(&quot;The original message... $filename$ $linenumber$&quot;);\r\n\r\nTo replace the filename, it may suffice to have keyword substitution with your revision control system.  Disclaimer: this is just from the top of my head, I never tried it myself.","title":"How to write caller location information in a log file using Java, without hurting performance?","body":"<p>How about making it part of the build process to replace certain placeholders, like <code>$filename$</code> and <code>$linenumber$</code> in this snippet.</p>\n\n<pre><code>logger.info(\"The original message... $filename$ $linenumber$\");\n</code></pre>\n\n<p>To replace the filename, it may suffice to have keyword substitution with your revision control system.  Disclaimer: this is just from the top of my head, I never tried it myself.</p>\n"},{"tags":[],"owner":{"account_id":13512904,"reputation":98,"user_id":9748566,"display_name":"PhilKes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696062364,"creation_date":1696062364,"answer_id":77206223,"question_id":3588019,"body_markdown":"For anyone looking for a more current solution if you use log4j/logback with slf4j, I wrote a **maven-plugin** addressing this issue, while not generating any performance issues either:\r\nhttps://github.com/PhilKes/slf4j-caller-info-maven-plugin\r\n\r\nThis plugin **injects the class name, optionally also the method name and source code line number into all SLF4J log statements at compile time** (see [configuration](https://github.com/PhilKes/slf4j-caller-info-maven-plugin#configuration)).\r\nAll you need to do is to add the `callerInformation` MDC parameter to your log-pattern and add the plugin in your `pom.xml`:\r\n```xml\r\n&lt;plugin&gt;\r\n &lt;groupId&gt;io.github.philkes&lt;/groupId&gt;\r\n &lt;artifactId&gt;slf4j-caller-info-maven-plugin&lt;/artifactId&gt;\r\n &lt;version&gt;1.1.0&lt;/version&gt;\r\n &lt;executions&gt;\r\n   &lt;execution&gt;\r\n     &lt;goals&gt;\r\n        &lt;goal&gt;inject&lt;/goal&gt;\r\n     &lt;/goals&gt;\r\n   &lt;/execution&gt;\r\n &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"How to write caller location information in a log file using Java, without hurting performance?","body":"<p>For anyone looking for a more current solution if you use log4j/logback with slf4j, I wrote a <strong>maven-plugin</strong> addressing this issue, while not generating any performance issues either:\n<a href=\"https://github.com/PhilKes/slf4j-caller-info-maven-plugin\" rel=\"nofollow noreferrer\">https://github.com/PhilKes/slf4j-caller-info-maven-plugin</a></p>\n<p>This plugin <strong>injects the class name, optionally also the method name and source code line number into all SLF4J log statements at compile time</strong> (see <a href=\"https://github.com/PhilKes/slf4j-caller-info-maven-plugin#configuration\" rel=\"nofollow noreferrer\">configuration</a>).\nAll you need to do is to add the <code>callerInformation</code> MDC parameter to your log-pattern and add the plugin in your <code>pom.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n &lt;groupId&gt;io.github.philkes&lt;/groupId&gt;\n &lt;artifactId&gt;slf4j-caller-info-maven-plugin&lt;/artifactId&gt;\n &lt;version&gt;1.1.0&lt;/version&gt;\n &lt;executions&gt;\n   &lt;execution&gt;\n     &lt;goals&gt;\n        &lt;goal&gt;inject&lt;/goal&gt;\n     &lt;/goals&gt;\n   &lt;/execution&gt;\n &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696153123,"creation_date":1696153123,"answer_id":77209932,"question_id":3588019,"body_markdown":"If you are looking for a Log4j API counterpart to [Phil&#39;s SLF4J plugin](https://stackoverflow.com/a/77206223/11748454), since Log4j API 2.10 there is a [`LogBuilder#withLocation`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/LogBuilder.html#withLocation-java.lang.StackTraceElement-) method that allows tools to inject location information into byte-code.\r\n\r\nRecently we published [`log4j-maven-transform-plugin`](https://github.com/apache/logging-log4j-transform/tree/main/log4j-transform-maven-plugin) that postprocesses class file and replaces classical logging calls like:\r\n```lang-java\r\npublic void helloLog() {\r\n    logger.info(MarkerManager.getMarker(&quot;NET&quot;), &quot;Sending {} bytes of data.&quot;, 1000);\r\n}\r\n```\r\ninto a `LogBuilder` call with injected location:\r\n```lang-java\r\nprivate static final StackTraceElement[] locations = {\r\n        new StackTraceElement(&quot;org.apache.logging.log4j.HelloWorld&quot;, &quot;HelloWorld.java&quot;, &quot;helloLog&quot;, 1234)\r\n};\r\n\r\npublic void helloLog() {\r\n    logger.atInfo()\r\n          .withLocation(locations[0])\r\n          .withMarker(MarkerManager.getMarker(&quot;NET&quot;))\r\n          .log(&quot;Sending {} bytes of data.&quot;, 1000);\r\n}\r\n```\r\n\r\nIt is pretty straightforward to use, you just need to add:\r\n```lang-xml\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;log4j-transform-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;0.1.0&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;process-classes&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n```\r\nto your Maven plugins.","title":"How to write caller location information in a log file using Java, without hurting performance?","body":"<p>If you are looking for a Log4j API counterpart to <a href=\"https://stackoverflow.com/a/77206223/11748454\">Phil's SLF4J plugin</a>, since Log4j API 2.10 there is a <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/LogBuilder.html#withLocation-java.lang.StackTraceElement-\" rel=\"nofollow noreferrer\"><code>LogBuilder#withLocation</code></a> method that allows tools to inject location information into byte-code.</p>\n<p>Recently we published <a href=\"https://github.com/apache/logging-log4j-transform/tree/main/log4j-transform-maven-plugin\" rel=\"nofollow noreferrer\"><code>log4j-maven-transform-plugin</code></a> that postprocesses class file and replaces classical logging calls like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void helloLog() {\n    logger.info(MarkerManager.getMarker(&quot;NET&quot;), &quot;Sending {} bytes of data.&quot;, 1000);\n}\n</code></pre>\n<p>into a <code>LogBuilder</code> call with injected location:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final StackTraceElement[] locations = {\n        new StackTraceElement(&quot;org.apache.logging.log4j.HelloWorld&quot;, &quot;HelloWorld.java&quot;, &quot;helloLog&quot;, 1234)\n};\n\npublic void helloLog() {\n    logger.atInfo()\n          .withLocation(locations[0])\n          .withMarker(MarkerManager.getMarker(&quot;NET&quot;))\n          .log(&quot;Sending {} bytes of data.&quot;, 1000);\n}\n</code></pre>\n<p>It is pretty straightforward to use, you just need to add:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n        &lt;artifactId&gt;log4j-transform-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;0.1.0&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;process-classes&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>to your Maven plugins.</p>\n"}],"owner":{"account_id":150370,"reputation":549,"user_id":363517,"accept_rate":75,"display_name":"Renan Mozone"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":866,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":3588197,"answer_count":4,"score":4,"last_activity_date":1696153123,"creation_date":1282942129,"question_id":3588019,"body_markdown":"How can I write caller location information (Java source file and line), in a log file using Java and log4j, but without hurting performance?\r\nlog4j allow you to write such information in the log file, but it uses the stack trace to get that it information, every time a log statement is issued, what causes performance degradation.\r\nI&#39;m looking for a performance friendly alternative, like getting the location information at compile time instead at runtime. It is possible to use annotations to accomplish that? Or maybe some other technique?","title":"How to write caller location information in a log file using Java, without hurting performance?","body":"<p>How can I write caller location information (Java source file and line), in a log file using Java and log4j, but without hurting performance?\nlog4j allow you to write such information in the log file, but it uses the stack trace to get that it information, every time a log statement is issued, what causes performance degradation.\nI'm looking for a performance friendly alternative, like getting the location information at compile time instead at runtime. It is possible to use annotations to accomplish that? Or maybe some other technique?</p>\n"},{"tags":["java","servlets","jakarta-ee","load-balancing"],"answers":[{"tags":[],"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1529054913,"creation_date":1529054913,"answer_id":50872730,"question_id":50872354,"body_markdown":"Typically the load balancer will make a HTTP request to your servlet. If it answers 200 OK  (or includes something in the payload that the load balancer looks for) then the application is healthy; if not the load balancer stops routing traffic to it until it becomes healthy again. In other words it is very feasible and you don&#39;t need to do anything special at all. Just answer a normal request and configure the load balancer to make the right call.\r\n\r\nI would poll every x seconds rather than minutes, but that depends on the application. Perhaps your users can tolerate a minute&#39;s downtime.","title":"Signal problems to load balancer","body":"<p>Typically the load balancer will make a HTTP request to your servlet. If it answers 200 OK  (or includes something in the payload that the load balancer looks for) then the application is healthy; if not the load balancer stops routing traffic to it until it becomes healthy again. In other words it is very feasible and you don't need to do anything special at all. Just answer a normal request and configure the load balancer to make the right call.</p>\n\n<p>I would poll every x seconds rather than minutes, but that depends on the application. Perhaps your users can tolerate a minute's downtime.</p>\n"}],"owner":{"account_id":4421843,"reputation":564,"user_id":3601527,"accept_rate":84,"display_name":"SocketM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":50872730,"answer_count":1,"score":1,"last_activity_date":1696152138,"creation_date":1529053640,"question_id":50872354,"body_markdown":"\r\nI want to implement a simple servlet that makes every n minutes some validation on a web application. The purpose of this validations is to return a http status code to a load balancer. The load balancer can now if certain node can be used or not.\r\n\r\nIs my solution (using a servlet) feasible? What do you propose and moreover how can a heartbeat can be embedded into a Java servlet?\r\n\r\nI&#39;m using Java EE technologies.\r\n","title":"Signal problems to load balancer","body":"<p>I want to implement a simple servlet that makes every n minutes some validation on a web application. The purpose of this validations is to return a http status code to a load balancer. The load balancer can now if certain node can be used or not.</p>\n<p>Is my solution (using a servlet) feasible? What do you propose and moreover how can a heartbeat can be embedded into a Java servlet?</p>\n<p>I'm using Java EE technologies.</p>\n"},{"tags":["java","spring","authentication","spring-security","annotations"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696151912,"creation_date":1696149341,"answer_id":77209770,"question_id":77207866,"body_markdown":"Why you need to implement `HandlerMethodArgumentResolver` to resolve `@AuthenticationPrincipal` ? Spring security already shipped with an implementation called `AuthenticationPrincipalArgumentResolver` for doing such thing and will be enable by default. \r\n\r\nAs long as you customize the `Authentication` to contain your user object and store it to the `SecurityContext` after spring security successfully authenticate an user , it should work out of the box.\r\n\r\nThe only situation you need to implement a `HandlerMethodArgumentResolver` is that you are not using spring security but want to specify an user object for the current user as an argument in the controller method. If that is the case , you don&#39;t need to annotate `@AuthenticationPrincipal` in the controller &#39;s argument as your implementation is nothing do with it.\r\n\r\n\r\n\r\n","title":"@AuthenticationPrincipal and HandlerMethodArgumentResolver interface","body":"<p>Why you need to implement <code>HandlerMethodArgumentResolver</code> to resolve <code>@AuthenticationPrincipal</code> ? Spring security already shipped with an implementation called <code>AuthenticationPrincipalArgumentResolver</code> for doing such thing and will be enable by default.</p>\n<p>As long as you customize the <code>Authentication</code> to contain your user object and store it to the <code>SecurityContext</code> after spring security successfully authenticate an user , it should work out of the box.</p>\n<p>The only situation you need to implement a <code>HandlerMethodArgumentResolver</code> is that you are not using spring security but want to specify an user object for the current user as an argument in the controller method. If that is the case , you don't need to annotate <code>@AuthenticationPrincipal</code> in the controller 's argument as your implementation is nothing do with it.</p>\n"}],"owner":{"account_id":29449089,"reputation":3,"user_id":22565852,"display_name":"Anthony26"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77209770,"answer_count":1,"score":0,"last_activity_date":1696151912,"creation_date":1696092337,"question_id":77207866,"body_markdown":"I am trying to understand the usecase of @AuthenticationPrincipal.\r\n\r\nIn my controller, I have an method where I use as a parameter \r\n\r\n`@AuthenticationPrincipal User user`\r\n\r\nThe objective is to get a user from a jwt, so I have created a resolver class which is implementing HandlerMethodArgumentResolver. For the supportsParameters it is my User class, and my resolveArgument get the jwt from the webRequest, decode it and create a User object, this one is returned (And used in my controller method).\r\n\r\nI have tried to remove @AuthenticationPrincipal because I am not using the Principal in my class which implements HandlerMethodArgumentResolver, it works perfectly but according to my research it is &quot;very advised&quot; to use this annotation even if it works without.\r\n\r\nDoes someone know why and how exactly in this case it is/isn&#39;t necessary to use @AuthenticationPrincipal, it will help me to have a better comprehension about it ?\r\n\r\nThank you","title":"@AuthenticationPrincipal and HandlerMethodArgumentResolver interface","body":"<p>I am trying to understand the usecase of @AuthenticationPrincipal.</p>\n<p>In my controller, I have an method where I use as a parameter</p>\n<p><code>@AuthenticationPrincipal User user</code></p>\n<p>The objective is to get a user from a jwt, so I have created a resolver class which is implementing HandlerMethodArgumentResolver. For the supportsParameters it is my User class, and my resolveArgument get the jwt from the webRequest, decode it and create a User object, this one is returned (And used in my controller method).</p>\n<p>I have tried to remove @AuthenticationPrincipal because I am not using the Principal in my class which implements HandlerMethodArgumentResolver, it works perfectly but according to my research it is &quot;very advised&quot; to use this annotation even if it works without.</p>\n<p>Does someone know why and how exactly in this case it is/isn't necessary to use @AuthenticationPrincipal, it will help me to have a better comprehension about it ?</p>\n<p>Thank you</p>\n"},{"tags":["java","memory","compiler-errors","implicit-conversion","memory-size"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":9,"creation_date":1696145139,"post_id":77209578,"comment_id":136114176,"body_markdown":"Whether something is implicitly convertible to a type has nothing to do with memory storage.","body":"Whether something is implicitly convertible to a type has nothing to do with memory storage."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1696145316,"post_id":77209578,"comment_id":136114189,"body_markdown":"To extend on @Sweeper&#39;s comment: they both use 4 bytes, but interpret the bytes very differently. I recommend reading about  [Two&#39;s complement (`e.wikipedia.org`)](https://en.wikipedia.org/wiki/Two%27s_complement) and [IEEE 754 (`en.wikipedia.org`)](https://en.wikipedia.org/wiki/IEEE_754).","body":"To extend on @Sweeper&#39;s comment: they both use 4 bytes, but interpret the bytes very differently. I recommend reading about  <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">Two&#39;s complement (<code>e.wikipedia.org</code>)</a> and <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754 (<code>en.wikipedia.org</code>)</a>."},{"owner":{"account_id":8732,"reputation":87908,"user_id":15880,"accept_rate":75,"display_name":"Powerlord"},"score":4,"creation_date":1696146684,"post_id":77209578,"comment_id":136114289,"body_markdown":"Because of how floating point numbers work, float has a much larger range than int does.  Java doesn&#39;t allow implicit casts from number types with a larger range to number types with a smaller range.  **Explicit** casts are another matter entirely.","body":"Because of how floating point numbers work, float has a much larger range than int does.  Java doesn&#39;t allow implicit casts from number types with a larger range to number types with a smaller range.  <b>Explicit</b> casts are another matter entirely."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1696161465,"post_id":77209578,"comment_id":136115514,"body_markdown":"Because the designers of the language have decided so. Probably because C++ (from which Java took great inspiration) has the same rule. There are a few funny points in which conversions they allow to us make implicitly and which not, though this one seems pretty fair to me for the reasons mentioned in the other comments.and in the answers.","body":"Because the designers of the language have decided so. Probably because C++ (from which Java took great inspiration) has the same rule. There are a few funny points in which conversions they allow to us make implicitly and which not, though this one seems pretty fair to me for the reasons mentioned in the other comments.and in the answers."}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696151295,"creation_date":1696150193,"answer_id":77209805,"question_id":77209578,"body_markdown":"A conversion from `float` to `int` is lossy both in precision, but also in range (magnitude). \r\n\r\nOn the precision side, storing 10.5f in an `int` would make you lose the fractional value, but the range is probably even more relevant.\r\nAn `int` can store [-2147483648, 2147483647], while a `float` can store numbers roughly in the range [-3.4e38, 3.4e38]. In other words, `float` has a lot of numbers you cannot just store in an `int` without some form of overflow. \r\n\r\nSo, because you could lose precision and/or have overflow, the Java compiler doesn&#39;t allow you to assign a `float` to an `int` without explicitly signalling that you accept the consequences. And you signal that by using an explicit cast (in your example, you would need to use `int a = (int) f;`).\r\n\r\nAlthough `float` and `int` are both 4 bytes, their representation is entirely different. If you would want to know &quot;what is the equivalent `int` value for the 4 bytes of a `float`&quot;, you will need to use [`Float.floatToIntBits(float)`][1], but the integer value you&#39;ll receive will have no (seeming) correlation to the original float value (e.g. `Float.floatToIntBits(10.5f)` produces the integer `1093140480`).\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Float.html#floatToIntBits(float)","title":"Why float to int is not implicitly converted in Java when both uses 4 bytes in memory?","body":"<p>A conversion from <code>float</code> to <code>int</code> is lossy both in precision, but also in range (magnitude).</p>\n<p>On the precision side, storing 10.5f in an <code>int</code> would make you lose the fractional value, but the range is probably even more relevant.\nAn <code>int</code> can store [-2147483648, 2147483647], while a <code>float</code> can store numbers roughly in the range [-3.4e38, 3.4e38]. In other words, <code>float</code> has a lot of numbers you cannot just store in an <code>int</code> without some form of overflow.</p>\n<p>So, because you could lose precision and/or have overflow, the Java compiler doesn't allow you to assign a <code>float</code> to an <code>int</code> without explicitly signalling that you accept the consequences. And you signal that by using an explicit cast (in your example, you would need to use <code>int a = (int) f;</code>).</p>\n<p>Although <code>float</code> and <code>int</code> are both 4 bytes, their representation is entirely different. If you would want to know &quot;what is the equivalent <code>int</code> value for the 4 bytes of a <code>float</code>&quot;, you will need to use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Float.html#floatToIntBits(float)\" rel=\"nofollow noreferrer\"><code>Float.floatToIntBits(float)</code></a>, but the integer value you'll receive will have no (seeming) correlation to the original float value (e.g. <code>Float.floatToIntBits(10.5f)</code> produces the integer <code>1093140480</code>).</p>\n"},{"tags":[],"owner":{"account_id":29573400,"reputation":1,"user_id":22664993,"display_name":"Manuna Mady"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696150387,"creation_date":1696150387,"answer_id":77209822,"question_id":77209578,"body_markdown":"The reason why both float and int require 4 bytes of memory storage but int can be converted to float and float cannot to int is because of the way that float and int numbers are represented in memory.\r\n\r\n**Integers** are represented in memory as a sequence of bits, where each bit represents a single digit in the number. For example, the integer 10 would be represented in memory as the following sequence of bits:\r\n\r\n    00000000 00000000 00000000 00001010\r\n\r\n\r\n**Floats** are represented in memory using a different format. Floats use a special format called **IEEE 754**. IEEE 754 allows floats to represent a wider range of numbers than integers, but it also requires more memory.\r\n\r\nThe IEEE 754 format for floats is as follows:\r\n\r\n    Sign bit: 1 bit\r\nExponent: 8 bits\r\nMantissa: 23 bits\r\n\r\nThe sign bit indicates whether the number is positive or negative. The exponent controls the magnitude of the number. The mantissa represents the fractional part of the number.\r\n\r\nWhen an integer is converted to a float, the integer is simply placed in the mantissa of the float. This means that the float will lose any precision that is beyond the 23 bits of the mantissa.\r\n\r\nHowever, when a float is converted to an integer, it is not possible to recover the lost precision. This is why the compiler will not allow you to convert a float to an integer without explicitly casting it.\r\n\r\nIn the code snippet that you provided, the compiler is preventing you from converting the float `f` to the integer `a` because it would result in data loss.\r\n\r\nIf you need to convert a float to an integer, you can use the following code:\r\n\r\n    int a = (int) f;\r\n\r\n\r\nThis will cast the float `f` to an integer, and the compiler will round the number to the nearest integer.\r\n\r\nHowever, it is important to note that this can result in inaccurate results, especially if the float number is close to a boundary between two integers.","title":"Why float to int is not implicitly converted in Java when both uses 4 bytes in memory?","body":"<p>The reason why both float and int require 4 bytes of memory storage but int can be converted to float and float cannot to int is because of the way that float and int numbers are represented in memory.</p>\n<p><strong>Integers</strong> are represented in memory as a sequence of bits, where each bit represents a single digit in the number. For example, the integer 10 would be represented in memory as the following sequence of bits:</p>\n<pre><code>00000000 00000000 00000000 00001010\n</code></pre>\n<p><strong>Floats</strong> are represented in memory using a different format. Floats use a special format called <strong>IEEE 754</strong>. IEEE 754 allows floats to represent a wider range of numbers than integers, but it also requires more memory.</p>\n<p>The IEEE 754 format for floats is as follows:</p>\n<pre><code>Sign bit: 1 bit\n</code></pre>\n<p>Exponent: 8 bits\nMantissa: 23 bits</p>\n<p>The sign bit indicates whether the number is positive or negative. The exponent controls the magnitude of the number. The mantissa represents the fractional part of the number.</p>\n<p>When an integer is converted to a float, the integer is simply placed in the mantissa of the float. This means that the float will lose any precision that is beyond the 23 bits of the mantissa.</p>\n<p>However, when a float is converted to an integer, it is not possible to recover the lost precision. This is why the compiler will not allow you to convert a float to an integer without explicitly casting it.</p>\n<p>In the code snippet that you provided, the compiler is preventing you from converting the float <code>f</code> to the integer <code>a</code> because it would result in data loss.</p>\n<p>If you need to convert a float to an integer, you can use the following code:</p>\n<pre><code>int a = (int) f;\n</code></pre>\n<p>This will cast the float <code>f</code> to an integer, and the compiler will round the number to the nearest integer.</p>\n<p>However, it is important to note that this can result in inaccurate results, especially if the float number is close to a boundary between two integers.</p>\n"}],"owner":{"account_id":29572982,"reputation":1,"user_id":22664660,"display_name":"Ritika Upadhyay"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696151745,"creation_date":1696145061,"question_id":77209578,"body_markdown":"Why is it so that both float and int requires 4 bytes of memory storage, but int can be converted to float and float cannot to int? Please explain in terms of memory storage, like what happens in the memory storage?\r\n\r\n```java\r\nclass A5 {\r\n\r\n    public static void main(String[] args) {\r\n     \r\n        float f = 10.5f;\r\n        int a = f;\r\n        System.out.println(a);\r\n}\r\n```\r\n\r\nit gave error like  this-&gt;\r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems:\r\n        Type mismatch: cannot convert from float to int\r\n\r\n        Syntax error, insert &quot;}&quot; to complete ClassBody\r\n            at A5.main(A5.java:6)\r\n```","title":"Why float to int is not implicitly converted in Java when both uses 4 bytes in memory?","body":"<p>Why is it so that both float and int requires 4 bytes of memory storage, but int can be converted to float and float cannot to int? Please explain in terms of memory storage, like what happens in the memory storage?</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A5 {\n\n    public static void main(String[] args) {\n     \n        float f = 10.5f;\n        int a = f;\n        System.out.println(a);\n}\n</code></pre>\n<p>it gave error like  this-&gt;</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems:\n        Type mismatch: cannot convert from float to int\n\n        Syntax error, insert &quot;}&quot; to complete ClassBody\n            at A5.main(A5.java:6)\n</code></pre>\n"},{"tags":["java","object","methods","abstraction"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":4,"creation_date":1696140851,"post_id":77209414,"comment_id":136113914,"body_markdown":"What us the question? Are you having any errors?","body":"What us the question? Are you having any errors?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1696143365,"post_id":77209414,"comment_id":136114056,"body_markdown":"You probably assume that someone will look at the code of the method that you posted and tell you how to fix it. I very much doubt that will happen. I suggest that you read [ask] and pay particular attention to the part about how to write a [mcve]. By the way, an interface cannot have [attributes](https://stackoverflow.com/questions/7311274/attributes-member-variables-in-interfaces).","body":"You probably assume that someone will look at the code of the method that you posted and tell you how to fix it. I very much doubt that will happen. I suggest that you read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and pay particular attention to the part about how to write a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. By the way, an interface cannot have <a href=\"https://stackoverflow.com/questions/7311274/attributes-member-variables-in-interfaces\">attributes</a>."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1696144793,"post_id":77209414,"comment_id":136114147,"body_markdown":"It&#39;s very simple. `this.den` does not exist.","body":"It&#39;s very simple. <code>this.den</code> does not exist."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1696144824,"post_id":77209414,"comment_id":136114150,"body_markdown":"@TimRoberts What difference would that make? A: none.","body":"@TimRoberts What difference would that make? A: none."},{"owner":{"account_id":1692034,"reputation":3195,"user_id":1554195,"display_name":"tquadrat"},"score":1,"creation_date":1696145283,"post_id":77209414,"comment_id":136114185,"body_markdown":"What&#39;s the definition of `RationalInterface`? As an interface, it can only have methods and static attributes. `den` is not a method (that would be `den()` ) and a static would not make sense.","body":"What&#39;s the definition of <code>RationalInterface</code>? As an interface, it can only have methods and static attributes. <code>den</code> is not a method (that would be <code>den()</code> ) and a static would not make sense."}],"answers":[{"tags":[],"owner":{"account_id":29573400,"reputation":1,"user_id":22664993,"display_name":"Manuna Mady"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696151616,"creation_date":1696147497,"answer_id":77209691,"question_id":77209414,"body_markdown":"To access the numerator and denominator attributes from the secondRational object, you need to use the dot notation. For example, to access the numerator attribute, you would use the following code:\r\n\r\nint numerator = secondRational.numerator;\r\nTo access the denominator attribute, you would use the following code:\r\n\r\nint denominator = secondRational.denominator;\r\nYou can then use these variables in your code to perform the addition operation.\r\n\r\nHere is an updated version of your code that uses the dot notation to access the secondRational values:\r\n\r\n```\r\n@Override\r\npublic RationalInterface add(RationalInterface secondRational) {\r\n\r\n    // Access the numerator and denominator values from the secondRational object\r\n    int numerator = this.num * secondRational.denominator + this.den * secondRational.numerator;\r\n    int denominator = this.den * secondRational.denominator;\r\n\r\n    // Update the numerator and denominator values for the current object\r\n    this.num = numerator;\r\n    this.den = denominator;\r\n\r\n    // Return the current object\r\n    return this;\r\n} // end add\r\n```","title":"Passing Object Through Method in Java","body":"<p>To access the numerator and denominator attributes from the secondRational object, you need to use the dot notation. For example, to access the numerator attribute, you would use the following code:</p>\n<p>int numerator = secondRational.numerator;\nTo access the denominator attribute, you would use the following code:</p>\n<p>int denominator = secondRational.denominator;\nYou can then use these variables in your code to perform the addition operation.</p>\n<p>Here is an updated version of your code that uses the dot notation to access the secondRational values:</p>\n<pre><code>@Override\npublic RationalInterface add(RationalInterface secondRational) {\n\n    // Access the numerator and denominator values from the secondRational object\n    int numerator = this.num * secondRational.denominator + this.den * secondRational.numerator;\n    int denominator = this.den * secondRational.denominator;\n\n    // Update the numerator and denominator values for the current object\n    this.num = numerator;\n    this.den = denominator;\n\n    // Return the current object\n    return this;\n} // end add\n</code></pre>\n"}],"owner":{"account_id":29484627,"reputation":33,"user_id":22594833,"display_name":"Randolf Gabrielle Uy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696151499,"answer_count":1,"score":0,"last_activity_date":1696151616,"creation_date":1696140473,"question_id":77209414,"body_markdown":"I am trying to get a second object to pass through my method so that I can add values from each object. I am trying to access the numerator attribute and denominator attribute from the &quot;secondRational&quot; object. \r\n\r\n    @Override\r\n    public RationalInterface add(RationalInterface secondRational) {\r\n        // How do I access the secondRational values within the child class Rational?\r\n        int numerator = this.num * secondRational.den + this.den * secondRational.num;\r\n        int denominator = this.den * secondRational.den;\r\n        this.num = numerator;\r\n        this.den = denominator;\r\n        return this;\r\n    } // end add\r\n\r\nThe error that I receive is that the den symbol for secondRational is not resolved. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GsHNl.png","title":"Passing Object Through Method in Java","body":"<p>I am trying to get a second object to pass through my method so that I can add values from each object. I am trying to access the numerator attribute and denominator attribute from the &quot;secondRational&quot; object.</p>\n<pre><code>@Override\npublic RationalInterface add(RationalInterface secondRational) {\n    // How do I access the secondRational values within the child class Rational?\n    int numerator = this.num * secondRational.den + this.den * secondRational.num;\n    int denominator = this.den * secondRational.den;\n    this.num = numerator;\n    this.den = denominator;\n    return this;\n} // end add\n</code></pre>\n<p>The error that I receive is that the den symbol for secondRational is not resolved.</p>\n<p><a href=\"https://i.stack.imgur.com/GsHNl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GsHNl.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","c","eclipse-cdt"],"owner":{"account_id":23801138,"reputation":1,"user_id":17811324,"display_name":"hyvuonggia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696150161,"creation_date":1696150110,"question_id":77209800,"body_markdown":"For example, I have a header.h file which has a few value defined macro:\r\n\r\n```\r\n#define MACRO1 value1\r\n#define MACRO2 value2\r\n```\r\n\r\nI would like to parse these macros using Java CDT parser and store its name as well as the value and store it into a map and print them:\r\n\r\n```\r\nMACRO1 = value1\r\nMACRO2 = value2\r\n```\r\n\r\nI have researched on some source but all of them just showing how to parser the macro name only.\r\n\r\nAnd my expectation would be loop through a map and print them.\r\n\r\nFor example:\r\n\r\n```\r\nMACRO1 = value1\r\nMACRO2 = value2\r\n```","title":"Parse value defined macro in C header file using Java CDT parser","body":"<p>For example, I have a header.h file which has a few value defined macro:</p>\n<pre><code>#define MACRO1 value1\n#define MACRO2 value2\n</code></pre>\n<p>I would like to parse these macros using Java CDT parser and store its name as well as the value and store it into a map and print them:</p>\n<pre><code>MACRO1 = value1\nMACRO2 = value2\n</code></pre>\n<p>I have researched on some source but all of them just showing how to parser the macro name only.</p>\n<p>And my expectation would be loop through a map and print them.</p>\n<p>For example:</p>\n<pre><code>MACRO1 = value1\nMACRO2 = value2\n</code></pre>\n"},{"tags":["java","spring","spring-data-r2dbc","r2dbc","r2dbc-postgresql"],"answers":[{"tags":[],"owner":{"account_id":9948503,"reputation":126,"user_id":7362164,"display_name":"kamalhm"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1610209426,"creation_date":1610209426,"answer_id":65644897,"question_id":65351356,"body_markdown":"I&#39;ve found this to be the easiest way to prepare your database test environment\r\n```java\r\n  private void initializeDatabase() {\r\n    ConnectionFactory connectionFactory = ConnectionFactories.get(dbUrl);\r\n    R2dbcEntityTemplate template = new R2dbcEntityTemplate(connectionFactory);\r\n    String query = &quot;CREATE TABLE IF NOT EXISTS member (id SERIAL PRIMARY KEY, name TEXT NOT NULL);&quot;;\r\n    template.getDatabaseClient().sql(query).fetch().rowsUpdated().block();\r\n  }\r\n```\r\nand call this method on a `@Before` annotation to be run on the tests\r\n\r\nfor example, this is what I end up with\r\n\r\n```java\r\n  @BeforeEach\r\n  public void setup() {\r\n    initializeDatabase();\r\n    insertData();\r\n  }\r\n\r\n  private void initializeDatabase() {\r\n    ConnectionFactory connectionFactory = ConnectionFactories.get(dbUrl);\r\n    R2dbcEntityTemplate template = new R2dbcEntityTemplate(connectionFactory);\r\n    String query = &quot;CREATE TABLE IF NOT EXISTS member (id SERIAL PRIMARY KEY, name TEXT NOT NULL);&quot;;\r\n    template.getDatabaseClient().sql(query).fetch().rowsUpdated().block();\r\n  }\r\n\r\n  private void insertData() {\r\n    Flux&lt;Member&gt; memberFlux = Flux.just(\r\n        Member.builder().name(&quot;Andrew&quot;).build(),\r\n        Member.builder().name(&quot;Bob&quot;).build(),\r\n        Member.builder().name(&quot;Charlie&quot;).build(),\r\n        Member.builder().name(&quot;Dave&quot;).build()\r\n    );\r\n    memberRepository.deleteAll()\r\n        .thenMany(memberFlux)\r\n        .flatMap(memberRepository::save)\r\n        .doOnNext(member -&gt; log.info(&quot;inserted {}&quot;, member))\r\n        .blockLast();\r\n  }\r\n```","title":"initialize database for testing purpose on Spring Data R2DBC","body":"<p>I've found this to be the easiest way to prepare your database test environment</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private void initializeDatabase() {\n    ConnectionFactory connectionFactory = ConnectionFactories.get(dbUrl);\n    R2dbcEntityTemplate template = new R2dbcEntityTemplate(connectionFactory);\n    String query = &quot;CREATE TABLE IF NOT EXISTS member (id SERIAL PRIMARY KEY, name TEXT NOT NULL);&quot;;\n    template.getDatabaseClient().sql(query).fetch().rowsUpdated().block();\n  }\n</code></pre>\n<p>and call this method on a <code>@Before</code> annotation to be run on the tests</p>\n<p>for example, this is what I end up with</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @BeforeEach\n  public void setup() {\n    initializeDatabase();\n    insertData();\n  }\n\n  private void initializeDatabase() {\n    ConnectionFactory connectionFactory = ConnectionFactories.get(dbUrl);\n    R2dbcEntityTemplate template = new R2dbcEntityTemplate(connectionFactory);\n    String query = &quot;CREATE TABLE IF NOT EXISTS member (id SERIAL PRIMARY KEY, name TEXT NOT NULL);&quot;;\n    template.getDatabaseClient().sql(query).fetch().rowsUpdated().block();\n  }\n\n  private void insertData() {\n    Flux&lt;Member&gt; memberFlux = Flux.just(\n        Member.builder().name(&quot;Andrew&quot;).build(),\n        Member.builder().name(&quot;Bob&quot;).build(),\n        Member.builder().name(&quot;Charlie&quot;).build(),\n        Member.builder().name(&quot;Dave&quot;).build()\n    );\n    memberRepository.deleteAll()\n        .thenMany(memberFlux)\n        .flatMap(memberRepository::save)\n        .doOnNext(member -&gt; log.info(&quot;inserted {}&quot;, member))\n        .blockLast();\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1780786,"reputation":1522,"user_id":1623598,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615262709,"creation_date":1615262709,"answer_id":66540662,"question_id":65351356,"body_markdown":"In case you want to reuse the existing `src/main/resources/schema.sql`, you can get it this way (in Kotlin):\r\n\r\n```\r\n@TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n@DataR2dbcTest\r\nclass YourRepositoryTest @Autowired constructor(\r\n    private val yourRepository: YourRepository,\r\n    private val r2dbcEntityTemplate: R2dbcEntityTemplate\r\n) {\r\n\r\n    @BeforeAll\r\n    fun setup() {\r\n        val schema = StreamUtils.copyToString(\r\n            ClassPathResource(&quot;schema.sql&quot;).inputStream,\r\n            Charset.defaultCharset()\r\n        )\r\n        r2dbcEntityTemplate.databaseClient.sql(schema).fetch().rowsUpdated().block()\r\n    }\r\n```\r\n\r\nAlso, using `@DataR2dbcTest` already provides an `R2dbcEntityTemplate` bean, so you can inject it in your tests. No need to instantiate it yourself, especially on each test.","title":"initialize database for testing purpose on Spring Data R2DBC","body":"<p>In case you want to reuse the existing <code>src/main/resources/schema.sql</code>, you can get it this way (in Kotlin):</p>\n<pre><code>@TestInstance(TestInstance.Lifecycle.PER_CLASS)\n@DataR2dbcTest\nclass YourRepositoryTest @Autowired constructor(\n    private val yourRepository: YourRepository,\n    private val r2dbcEntityTemplate: R2dbcEntityTemplate\n) {\n\n    @BeforeAll\n    fun setup() {\n        val schema = StreamUtils.copyToString(\n            ClassPathResource(&quot;schema.sql&quot;).inputStream,\n            Charset.defaultCharset()\n        )\n        r2dbcEntityTemplate.databaseClient.sql(schema).fetch().rowsUpdated().block()\n    }\n</code></pre>\n<p>Also, using <code>@DataR2dbcTest</code> already provides an <code>R2dbcEntityTemplate</code> bean, so you can inject it in your tests. No need to instantiate it yourself, especially on each test.</p>\n"},{"tags":[],"owner":{"account_id":4505592,"reputation":41,"user_id":3663027,"display_name":"user3663027"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1624725029,"creation_date":1624580793,"answer_id":68124073,"question_id":65351356,"body_markdown":"I came here looking for an answer for this exactly problem. Created a `TestDBInitializer` bean loading a `test-data.sql` file but it&#39;s not working even using `@Profile` annotation. A cleaner, althought not ideal, solution I found is using `@Import({ MyTestDbInitializer.class })` like so:\r\n\r\n    @DataR2dbcTest\r\n    @Import({ TestDBInitializerConfig.class })\r\n    class R2dbcTest {\r\n    \t\r\n        @Autowired\r\n        private MyRepository repository;\r\n    \r\n        @Test\r\n        void testSomething() {\r\n            Flux&lt;MyEntity&gt; fluxResult = this.repository.findAll();\r\n            \r\n            StepVerifier.create(fluxResult)\r\n                // do things...\r\n                .thenConsumeWhile(x -&gt; true)\r\n                .expectComplete()\r\n        \t\t.log()\r\n        \t\t.verify();\r\n        }\r\n    }\r\n\r\n    @Configuration\r\n    @Profile(&quot;test&quot;)\r\n    public class MyTestDbInitializer {\r\n    \r\n    \t@Bean\r\n    \tpublic ConnectionFactoryInitializer testProfileInitializer(ConnectionFactory connectionFactory) {\r\n    \r\n    \t\tConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\r\n    \t\tinitializer.setConnectionFactory(connectionFactory);\r\n    \r\n    \t\tCompositeDatabasePopulator populator = new CompositeDatabasePopulator();\r\n    \t\tpopulator.addPopulators(new ResourceDatabasePopulator(new ClassPathResource(&quot;schema.sql&quot;), new ClassPathResource(&quot;test-data.sql&quot;)));\r\n    \t\tinitializer.setDatabasePopulator(populator);\r\n    \r\n    \t\treturn initializer;\r\n    \t}\r\n    }\r\n\r\nStill looking for an answer that doesn&#39;t need any manual initialization nor the usage of `@Import` annotation.\r\n","title":"initialize database for testing purpose on Spring Data R2DBC","body":"<p>I came here looking for an answer for this exactly problem. Created a <code>TestDBInitializer</code> bean loading a <code>test-data.sql</code> file but it's not working even using <code>@Profile</code> annotation. A cleaner, althought not ideal, solution I found is using <code>@Import({ MyTestDbInitializer.class })</code> like so:</p>\n<pre><code>@DataR2dbcTest\n@Import({ TestDBInitializerConfig.class })\nclass R2dbcTest {\n    \n    @Autowired\n    private MyRepository repository;\n\n    @Test\n    void testSomething() {\n        Flux&lt;MyEntity&gt; fluxResult = this.repository.findAll();\n        \n        StepVerifier.create(fluxResult)\n            // do things...\n            .thenConsumeWhile(x -&gt; true)\n            .expectComplete()\n            .log()\n            .verify();\n    }\n}\n\n@Configuration\n@Profile(&quot;test&quot;)\npublic class MyTestDbInitializer {\n\n    @Bean\n    public ConnectionFactoryInitializer testProfileInitializer(ConnectionFactory connectionFactory) {\n\n        ConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\n        initializer.setConnectionFactory(connectionFactory);\n\n        CompositeDatabasePopulator populator = new CompositeDatabasePopulator();\n        populator.addPopulators(new ResourceDatabasePopulator(new ClassPathResource(&quot;schema.sql&quot;), new ClassPathResource(&quot;test-data.sql&quot;)));\n        initializer.setDatabasePopulator(populator);\n\n        return initializer;\n    }\n}\n</code></pre>\n<p>Still looking for an answer that doesn't need any manual initialization nor the usage of <code>@Import</code> annotation.</p>\n"},{"tags":[],"owner":{"account_id":2831238,"reputation":421,"user_id":2432798,"display_name":"Kikin-Sama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696149901,"creation_date":1696149901,"answer_id":77209790,"question_id":65351356,"body_markdown":"I had the same problem and ended up using flyway like so:\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nAnd then adding the appropriate configuration\r\n\r\n    @DynamicPropertySource\r\n\tprivate static void configureProperties(DynamicPropertyRegistry registry){\r\n\t\tregistry.add(&quot;spring.r2dbc.url&quot;,() -&gt; String.format(&quot;r2dbc:pool:postgresql://%s:%d/%s&quot;,postgres.getHost(),postgres.getFirstMappedPort(),postgres.getDatabaseName()));\r\n\t\tregistry.add(&quot;spring.r2dbc.username&quot;,postgres::getUsername);\r\n\t\tregistry.add(&quot;spring.r2dbc.password&quot;,postgres::getPassword);\r\n\t\tregistry.add(&quot;spring.flyway.url&quot;,postgres::getJdbcUrl);\r\n\t\tregistry.add(&quot;spring.flyway.user&quot;,postgres::getUsername);\r\n\t\tregistry.add(&quot;spring.flyway.password&quot;,postgres::getPassword);\r\n\t}\r\n\r\nThat allowed me to define my scripts inside `src/test/resources/db/migration`\r\n\r\nHope it helps.","title":"initialize database for testing purpose on Spring Data R2DBC","body":"<p>I had the same problem and ended up using flyway like so:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n    &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And then adding the appropriate configuration</p>\n<pre><code>@DynamicPropertySource\nprivate static void configureProperties(DynamicPropertyRegistry registry){\n    registry.add(&quot;spring.r2dbc.url&quot;,() -&gt; String.format(&quot;r2dbc:pool:postgresql://%s:%d/%s&quot;,postgres.getHost(),postgres.getFirstMappedPort(),postgres.getDatabaseName()));\n    registry.add(&quot;spring.r2dbc.username&quot;,postgres::getUsername);\n    registry.add(&quot;spring.r2dbc.password&quot;,postgres::getPassword);\n    registry.add(&quot;spring.flyway.url&quot;,postgres::getJdbcUrl);\n    registry.add(&quot;spring.flyway.user&quot;,postgres::getUsername);\n    registry.add(&quot;spring.flyway.password&quot;,postgres::getPassword);\n}\n</code></pre>\n<p>That allowed me to define my scripts inside <code>src/test/resources/db/migration</code></p>\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":9948503,"reputation":126,"user_id":7362164,"display_name":"kamalhm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5276,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":65644897,"answer_count":4,"score":3,"last_activity_date":1696149901,"creation_date":1608261417,"question_id":65351356,"body_markdown":"In a non-test environment, I can set up the bean to initialize the database with the `schema.sql` like this\r\n\r\n```\r\n\t@Bean\r\n\tConnectionFactoryInitializer initializer(@Qualifier(&quot;connectionFactory&quot;) ConnectionFactory connectionFactory) {\r\n\r\n\t\tConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\r\n\t\tinitializer.setConnectionFactory(connectionFactory);\r\n\t\tinitializer.setDatabasePopulator(new ResourceDatabasePopulator(new ClassPathResource(&quot;schema.sql&quot;)));\r\n\r\n\t\treturn initializer;\r\n\t}\r\n```\r\n\r\nthe problem is, I want to do something like this but for testing purpose. I&#39;m trying to do some kind of integration testing with the database so I want the schema to be inserted to a dummy database too.\r\n\r\nI&#39;ve tried using this annotation but it still won&#39;t execute\r\n\r\n```\r\n@Sql(scripts = &quot;classpath:schema.sql&quot;, executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD)\r\n```\r\n\r\nI&#39;ve created a separate `application-test.properties` on my test resources folder containg this properties values\r\n```\r\nspring.r2dbc.url=r2dbc:postgresql://localhost:5432/test\r\nspring.r2dbc.username=postgres\r\n\r\nlogging.level.org.springframework.r2dbc=DEBUG\r\n```\r\nand have added `@ActiveProfiles(profiles = &quot;test&quot;)` annotation too.\r\n\r\n\r\n","title":"initialize database for testing purpose on Spring Data R2DBC","body":"<p>In a non-test environment, I can set up the bean to initialize the database with the <code>schema.sql</code> like this</p>\n<pre><code>    @Bean\n    ConnectionFactoryInitializer initializer(@Qualifier(&quot;connectionFactory&quot;) ConnectionFactory connectionFactory) {\n\n        ConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\n        initializer.setConnectionFactory(connectionFactory);\n        initializer.setDatabasePopulator(new ResourceDatabasePopulator(new ClassPathResource(&quot;schema.sql&quot;)));\n\n        return initializer;\n    }\n</code></pre>\n<p>the problem is, I want to do something like this but for testing purpose. I'm trying to do some kind of integration testing with the database so I want the schema to be inserted to a dummy database too.</p>\n<p>I've tried using this annotation but it still won't execute</p>\n<pre><code>@Sql(scripts = &quot;classpath:schema.sql&quot;, executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD)\n</code></pre>\n<p>I've created a separate <code>application-test.properties</code> on my test resources folder containg this properties values</p>\n<pre><code>spring.r2dbc.url=r2dbc:postgresql://localhost:5432/test\nspring.r2dbc.username=postgres\n\nlogging.level.org.springframework.r2dbc=DEBUG\n</code></pre>\n<p>and have added <code>@ActiveProfiles(profiles = &quot;test&quot;)</code> annotation too.</p>\n"},{"tags":["java","oop","interface"],"comments":[{"owner":{"account_id":1276558,"reputation":1700,"user_id":1231693,"accept_rate":69,"display_name":"mellow-yellow"},"score":0,"creation_date":1654891412,"post_id":2575429,"comment_id":128209142,"body_markdown":"Per Java Champion Ben Evans at Red Hat, &quot;Java permits only two sorts of values: primitive types and object references,&quot; and since interfaces are not primitives, and because `reverse()` accepts a formal parameter (from the caller&#39;s formal argument) of an interface type `NodeList`, then `reverse()` accepts an object reference, not an interface. You can confirm this by looking at the bytecode, where you would see `invokeinterface` as part of a vtable parsing, which implements dynamic method dispatch. See https://blogs.oracle.com/javamagazine/post/mastering-the-mechanics-of-java-method-invocation","body":"Per Java Champion Ben Evans at Red Hat, &quot;Java permits only two sorts of values: primitive types and object references,&quot; and since interfaces are not primitives, and because <code>reverse()</code> accepts a formal parameter (from the caller&#39;s formal argument) of an interface type <code>NodeList</code>, then <code>reverse()</code> accepts an object reference, not an interface. You can confirm this by looking at the bytecode, where you would see <code>invokeinterface</code> as part of a vtable parsing, which implements dynamic method dispatch. See <a href=\"https://blogs.oracle.com/javamagazine/post/mastering-the-mechanics-of-java-method-invocation\" rel=\"nofollow noreferrer\">blogs.oracle.com/javamagazine/post/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":92166,"reputation":10550,"user_id":252704,"accept_rate":100,"display_name":"Pindatjuh"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1270406026,"creation_date":1270405660,"answer_id":2575447,"question_id":2575429,"body_markdown":"The argument needs an object, which class implements an interface (the parameter).\r\n\r\nIn **pseudo** Java the code:\r\n\r\n    void reverse(NodeList node) {\r\n        // your code\r\n    }\r\n\r\nis equal to:\r\n\r\n    reverse(x) {\r\n        if(x == null || x instanceof NodeList) {\r\n             // your code\r\n        }else throw new RuntimeException(&quot;Some sort of error.&quot;);\r\n    }\r\n\r\nNote; read more on Interfaces here: http://java.sun.com/docs/books/tutorial/java/IandI/interfaceAsType.html","title":"interface as a method parameter in Java","body":"<p>The argument needs an object, which class implements an interface (the parameter).</p>\n\n<p>In <strong>pseudo</strong> Java the code:</p>\n\n<pre><code>void reverse(NodeList node) {\n    // your code\n}\n</code></pre>\n\n<p>is equal to:</p>\n\n<pre><code>reverse(x) {\n    if(x == null || x instanceof NodeList) {\n         // your code\n    }else throw new RuntimeException(\"Some sort of error.\");\n}\n</code></pre>\n\n<p>Note; read more on Interfaces here: <a href=\"http://java.sun.com/docs/books/tutorial/java/IandI/interfaceAsType.html\" rel=\"noreferrer\">http://java.sun.com/docs/books/tutorial/java/IandI/interfaceAsType.html</a></p>\n"},{"tags":[],"owner":{"account_id":27678,"reputation":70328,"user_id":73297,"accept_rate":90,"display_name":"Ben Zotto"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1270405684,"creation_date":1270405684,"answer_id":2575450,"question_id":2575429,"body_markdown":"It&#39;s not the interface &quot;object&quot; being passed to the method, still just a regular object. It&#39;s just a way of saying &quot;this parameter will accept any object that supports this interface&quot;. It&#39;s equivalent to accepting some object of a base class type, even if you&#39;re passing in a subclass.","title":"interface as a method parameter in Java","body":"<p>It's not the interface \"object\" being passed to the method, still just a regular object. It's just a way of saying \"this parameter will accept any object that supports this interface\". It's equivalent to accepting some object of a base class type, even if you're passing in a subclass.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":82,"is_accepted":true,"score":82,"last_activity_date":1382578399,"creation_date":1270405731,"answer_id":2575454,"question_id":2575429,"body_markdown":"This is in fact one of the most common and useful ways to use an interface. The interface defines a contract, and your code can work with any class that implements the interface, without having to know the concrete class - it can even work with classes that didn&#39;t exist yet when the code was written.\r\n\r\nThere are many examples in the Java standard API, especially in the collections framework. For example, [Collections.sort()][1] can sort anything that implements the `List` interface (not just `ArrayList` or `LinkedList`, though implementing your own `List` is uncommon) and whose contents implement the `Comparable` interface (not just `String` or the numerical wrapper classes - and having your own class implement `Comparable` for that purpose is *quite* common).\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Collections.html#sort(java.util.List)","title":"interface as a method parameter in Java","body":"<p>This is in fact one of the most common and useful ways to use an interface. The interface defines a contract, and your code can work with any class that implements the interface, without having to know the concrete class - it can even work with classes that didn't exist yet when the code was written.</p>\n\n<p>There are many examples in the Java standard API, especially in the collections framework. For example, <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Collections.html#sort(java.util.List)\" rel=\"noreferrer\">Collections.sort()</a> can sort anything that implements the <code>List</code> interface (not just <code>ArrayList</code> or <code>LinkedList</code>, though implementing your own <code>List</code> is uncommon) and whose contents implement the <code>Comparable</code> interface (not just <code>String</code> or the numerical wrapper classes - and having your own class implement <code>Comparable</code> for that purpose is <em>quite</em> common).</p>\n"},{"tags":[],"owner":{"account_id":98678,"reputation":2329,"user_id":266971,"accept_rate":78,"display_name":"ahe"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1533460383,"creation_date":1270405911,"answer_id":2575464,"question_id":2575429,"body_markdown":"This is called programming to interfaces. You don&#39;t code to a specific implementation class of node lists but to the interface implemented by all those implementations.\r\n\r\nThat way your code will still work if someone writes a new and much better implementation of `NodeList` after you wrote your reverse method and you don&#39;t have to adapt your code for each new implementation of `NodeList`.","title":"interface as a method parameter in Java","body":"<p>This is called programming to interfaces. You don't code to a specific implementation class of node lists but to the interface implemented by all those implementations.</p>\n\n<p>That way your code will still work if someone writes a new and much better implementation of <code>NodeList</code> after you wrote your reverse method and you don't have to adapt your code for each new implementation of <code>NodeList</code>.</p>\n"},{"tags":[],"owner":{"account_id":4035343,"reputation":1229,"user_id":3320018,"accept_rate":82,"display_name":"Nirmal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1428808673,"creation_date":1428808673,"answer_id":29585560,"question_id":2575429,"body_markdown":"The major benefit of using interfaces, IMHO, is being able to test easily. Suppose you have an interface called, PatientManager. \r\n\r\nYou can write specific unit tests for imaginable things like &quot;CachingPatientManager&quot; or &quot;LDAPPatientManager&quot;, the use case could be myriad. \r\n\r\nThe benefit is because the programming to interface becomes highly reusable and testable. ","title":"interface as a method parameter in Java","body":"<p>The major benefit of using interfaces, IMHO, is being able to test easily. Suppose you have an interface called, PatientManager. </p>\n\n<p>You can write specific unit tests for imaginable things like \"CachingPatientManager\" or \"LDAPPatientManager\", the use case could be myriad. </p>\n\n<p>The benefit is because the programming to interface becomes highly reusable and testable. </p>\n"},{"tags":[],"owner":{"account_id":5924521,"reputation":773,"user_id":4660857,"display_name":"user4660857"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455413346,"creation_date":1455413346,"answer_id":35387409,"question_id":2575429,"body_markdown":"You cannot create an instance (/object ) of an Interface. \r\nYes, you can pass Interface as a parameter in the function. But the question seems incomplete. Interface isn&#39;t implemented by any class. Something is missing. If you try to run this, compiler will not show any error. \r\n\r\nBut, in the reverse() method you need to create an instance of class that implements NodeList interface. I hope this makes sense. ","title":"interface as a method parameter in Java","body":"<p>You cannot create an instance (/object ) of an Interface. \nYes, you can pass Interface as a parameter in the function. But the question seems incomplete. Interface isn't implemented by any class. Something is missing. If you try to run this, compiler will not show any error. </p>\n\n<p>But, in the reverse() method you need to create an instance of class that implements NodeList interface. I hope this makes sense. </p>\n"},{"tags":[],"owner":{"account_id":3502382,"reputation":3469,"user_id":2928853,"accept_rate":83,"display_name":"jrook"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1474250174,"creation_date":1474250174,"answer_id":39564352,"question_id":2575429,"body_markdown":"This is one possible implementation:\r\n\r\n    public class ReverseList { \r\n\tinterface NodeList {\r\n\t\tint getItem();\r\n\t\tNodeList nextNode();\r\n\t}\r\n\t\r\n\tstatic class Node implements NodeList {\r\n\t\tprivate int item;\r\n\t\tprivate Node next;\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic int getItem() {\r\n\t\t\treturn item;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void setItem(int si) {\r\n\t\t\titem = si;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic NodeList nextNode() {\r\n\t\t\treturn this.next;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void setNext(Node n) {this.next=n;}\r\n\t\t\r\n\t}\r\n\t\r\n\tNode reverse(NodeList head) {\r\n\t\tNode node = (Node) head;\r\n\t\tNode previous = null;\r\n\t\twhile(node.nextNode() !=null) {\r\n\t\t\tNode tempNext = (Node) node.nextNode();\r\n\t\t\tnode.setNext(previous);\r\n\t\t\tprevious = node;\r\n\t\t\tnode = tempNext;\r\n\t\t}\r\n\t\tnode.setNext(previous);\r\n\t\treturn node;\r\n\t\t\r\n\t}\r\n\tpublic static void main(String[] args) {\r\n\t\t//Initialization block\r\n\t\tReverseList rl = new ReverseList();\r\n\t\tNode n1= new Node(); n1.setItem(1);\r\n\t\tNode n2=new Node(); n2.setItem(2);\r\n\t\tNode n3 =new Node(); n3.setItem(3);\r\n\t\tn1.setNext(n2); n2.setNext(n3); n3.setNext(null);\r\n\t\t\r\n\t\t//Reversing the list\r\n\t\tSystem.out.println(&quot;Before reversal&quot;);\t\t\r\n\t\tSystem.out.println(n1.getItem() +&quot;-&gt;&quot; \r\n\t\t\t\t\t\t+ n1.nextNode().getItem() + &quot;-&gt;&quot;\r\n\t\t\t\t\t\t+ n1.nextNode().nextNode().getItem() + &quot;-&gt;&quot;\r\n\t\t\t\t\t\t+n1.nextNode().nextNode().nextNode());\r\n\t\t\r\n\t\t\r\n\t\trl.reverse(n1);\r\n\t\t\r\n\t\tSystem.out.println(&quot;\\nAfter reversal&quot;);\r\n\t\tSystem.out.println(n3.getItem() +&quot;-&gt;&quot; \r\n\t\t\t\t+ n3.nextNode().getItem() + &quot;-&gt;&quot;\r\n\t\t\t\t+ n3.nextNode().nextNode().getItem() + &quot;-&gt;&quot;\r\n\t\t\t\t+n3.nextNode().nextNode().nextNode());\r\n\t\t\t}\r\n    }\r\n\r\n\r\nProgram output:\r\n\r\n    Before reversal\r\n    1-&gt;2-&gt;3-&gt;null\r\n\r\n    After reversal\r\n    3-&gt;2-&gt;1-&gt;null\r\n\r\nI am very curious to know if this problem can be solved by using an anonymous class. Any ideas?","title":"interface as a method parameter in Java","body":"<p>This is one possible implementation:</p>\n\n<pre><code>public class ReverseList { \ninterface NodeList {\n    int getItem();\n    NodeList nextNode();\n}\n\nstatic class Node implements NodeList {\n    private int item;\n    private Node next;\n\n    @Override\n    public int getItem() {\n        return item;\n    }\n\n    public void setItem(int si) {\n        item = si;\n    }\n\n    @Override\n    public NodeList nextNode() {\n        return this.next;\n    }\n\n    public void setNext(Node n) {this.next=n;}\n\n}\n\nNode reverse(NodeList head) {\n    Node node = (Node) head;\n    Node previous = null;\n    while(node.nextNode() !=null) {\n        Node tempNext = (Node) node.nextNode();\n        node.setNext(previous);\n        previous = node;\n        node = tempNext;\n    }\n    node.setNext(previous);\n    return node;\n\n}\npublic static void main(String[] args) {\n    //Initialization block\n    ReverseList rl = new ReverseList();\n    Node n1= new Node(); n1.setItem(1);\n    Node n2=new Node(); n2.setItem(2);\n    Node n3 =new Node(); n3.setItem(3);\n    n1.setNext(n2); n2.setNext(n3); n3.setNext(null);\n\n    //Reversing the list\n    System.out.println(\"Before reversal\");      \n    System.out.println(n1.getItem() +\"-&gt;\" \n                    + n1.nextNode().getItem() + \"-&gt;\"\n                    + n1.nextNode().nextNode().getItem() + \"-&gt;\"\n                    +n1.nextNode().nextNode().nextNode());\n\n\n    rl.reverse(n1);\n\n    System.out.println(\"\\nAfter reversal\");\n    System.out.println(n3.getItem() +\"-&gt;\" \n            + n3.nextNode().getItem() + \"-&gt;\"\n            + n3.nextNode().nextNode().getItem() + \"-&gt;\"\n            +n3.nextNode().nextNode().nextNode());\n        }\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>Before reversal\n1-&gt;2-&gt;3-&gt;null\n\nAfter reversal\n3-&gt;2-&gt;1-&gt;null\n</code></pre>\n\n<p>I am very curious to know if this problem can be solved by using an anonymous class. Any ideas?</p>\n"},{"tags":[],"owner":{"account_id":6299250,"reputation":107,"user_id":4894370,"display_name":"Yoho"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1516776075,"creation_date":1516776075,"answer_id":48416288,"question_id":2575429,"body_markdown":"Had this same confusion while learning lambda stuff.\r\nThis video didnt explain the concept, but it&#39;s a clear way for you to see how it works in terms of passing an interface as a parameter.\r\n\r\nhttps://www.youtube.com/watch?v=mk3erzL70yM","title":"interface as a method parameter in Java","body":"<p>Had this same confusion while learning lambda stuff.\nThis video didnt explain the concept, but it's a clear way for you to see how it works in terms of passing an interface as a parameter.</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=mk3erzL70yM\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=mk3erzL70yM</a></p>\n"},{"tags":[],"owner":{"account_id":2211885,"reputation":11194,"user_id":1953504,"accept_rate":66,"display_name":"Sal-laS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696148567,"creation_date":1696148567,"answer_id":77209741,"question_id":2575429,"body_markdown":"Maybe it&#39;s too late, but still i leave my answer here as I found your question helpful.\r\n\r\n------------------------------------------------------------\r\n\r\n*When an interface is used as the parameter type of a method, it means that this method accepts any object that contains implementations of the interface.*\r\n\r\nThere is a good example for this usage, and it&#39;s when you try to pass an `ArrayList` to a method. As you know, you can pass your `ArrayList` as `List` as below:\r\n\r\n\r\n    public int getListSize(List&lt;String&gt; myList){\r\n       return myList.size();\r\n    }\r\n\r\nand then, this will give you the flexibility to pass any object which implements List methods. For example, you can do:\r\n\r\n    List&lt;String&gt; myList1 = new ArrayList&lt;&gt;();\r\n    List&lt;String&gt; myList2 = new LinkedList&lt;&gt;();\r\n    List&lt;String&gt; myList3 = new Vector&lt;&gt;();\r\n    \r\n    int size1 = getListSize(myList1); // Valid, myList1 is an ArrayList\r\n    int size2 = getListSize(myList2); // Valid, myList2 is a LinkedList\r\n    int size3 = getListSize(myList3); // Valid, myList3 is a Vector\r\n\r\n  \r\n\r\n\r\n","title":"interface as a method parameter in Java","body":"<p>Maybe it's too late, but still i leave my answer here as I found your question helpful.</p>\n<hr />\n<p><em>When an interface is used as the parameter type of a method, it means that this method accepts any object that contains implementations of the interface.</em></p>\n<p>There is a good example for this usage, and it's when you try to pass an <code>ArrayList</code> to a method. As you know, you can pass your <code>ArrayList</code> as <code>List</code> as below:</p>\n<pre><code>public int getListSize(List&lt;String&gt; myList){\n   return myList.size();\n}\n</code></pre>\n<p>and then, this will give you the flexibility to pass any object which implements List methods. For example, you can do:</p>\n<pre><code>List&lt;String&gt; myList1 = new ArrayList&lt;&gt;();\nList&lt;String&gt; myList2 = new LinkedList&lt;&gt;();\nList&lt;String&gt; myList3 = new Vector&lt;&gt;();\n\nint size1 = getListSize(myList1); // Valid, myList1 is an ArrayList\nint size2 = getListSize(myList2); // Valid, myList2 is a LinkedList\nint size3 = getListSize(myList3); // Valid, myList3 is a Vector\n</code></pre>\n"}],"owner":{"account_id":60011,"reputation":5533,"user_id":179385,"accept_rate":97,"display_name":"zihaoyu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116776,"favorite_count":0,"down_vote_count":1,"up_vote_count":73,"accepted_answer_id":2575454,"answer_count":9,"score":72,"last_activity_date":1696148567,"creation_date":1270405303,"question_id":2575429,"body_markdown":"I had an interview days ago and was thrown a question like this.\r\n\r\nQ: Reverse a linked list. Following code is given:\r\n\r\n    public class ReverseList { \r\n        interface NodeList {\r\n            int getItem();\r\n            NodeList nextNode();\r\n        }\r\n        void reverse(NodeList node) {\r\n    \r\n        }\r\n        public static void main(String[] args) {\r\n      \r\n        }\r\n    }\r\n\r\nI was confused because I did not know an interface object could be used as a method parameter. The interviewer explained a little bit but I am still not sure about this. Could somebody enlighten me?","title":"interface as a method parameter in Java","body":"<p>I had an interview days ago and was thrown a question like this.</p>\n\n<p>Q: Reverse a linked list. Following code is given:</p>\n\n<pre><code>public class ReverseList { \n    interface NodeList {\n        int getItem();\n        NodeList nextNode();\n    }\n    void reverse(NodeList node) {\n\n    }\n    public static void main(String[] args) {\n\n    }\n}\n</code></pre>\n\n<p>I was confused because I did not know an interface object could be used as a method parameter. The interviewer explained a little bit but I am still not sure about this. Could somebody enlighten me?</p>\n"},{"tags":["java","spring","security","jwt"],"answers":[{"tags":[],"owner":{"account_id":1920229,"reputation":3923,"user_id":1731935,"accept_rate":75,"display_name":"Manuel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696148189,"creation_date":1696148189,"answer_id":77209721,"question_id":77201964,"body_markdown":"Probably because in your method `extractToken` you extract the `token` but return `null`.\r\n\r\nFor future questions, please provide some JUnit test, or the request you sent via Postman. Additionally, spring-security DEBUG logs would be helpful as well.","title":"Java security status 403","body":"<p>Probably because in your method <code>extractToken</code> you extract the <code>token</code> but return <code>null</code>.</p>\n<p>For future questions, please provide some JUnit test, or the request you sent via Postman. Additionally, spring-security DEBUG logs would be helpful as well.</p>\n"}],"owner":{"account_id":21980832,"reputation":49,"user_id":16255922,"display_name":"Bartolinio Kooperinio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1696148189,"creation_date":1695990540,"question_id":77201964,"body_markdown":"I&#39;ve configured simple security based on JWT tokens and roles. I&#39;ve tested in in postman and every request have status 403 forbidden. I have no idea what is blocking my requests because even if i comment every filter and leave only permitAll it still says 403 every time.\r\n\r\nSecurity config code:\r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class SpringSecurityConfig {\r\n\r\n    @Value(&quot;${jwt.secret}&quot;)\r\n    private String jwtSecret;\r\n\r\n    @Value(&quot;${jwt.issuer}&quot;)\r\n    private String jwtIssuer;\r\n\r\n    @Bean\r\n    public JWTVerifier jwtVerifier() {\r\n        Algorithm algorithm = Algorithm.HMAC256(jwtSecret);\r\n        return JWT.require(algorithm)\r\n                .withIssuer(jwtIssuer)\r\n                .build();\r\n    }\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((requests) -&gt; requests\r\n                        .requestMatchers(&quot;/api/users/**&quot;).permitAll()\r\n                        //.requestMatchers(&quot;/api/librarian/**&quot;).hasAnyRole(&quot;librarian&quot;, &quot;programmer&quot;)\r\n                        //.requestMatchers(&quot;/api/reader/**&quot;).hasAnyRole(&quot;reader&quot;, &quot;programmer&quot;)\r\n                        //.anyRequest().authenticated()\r\n\r\n                )\r\n                .cors(Customizer.withDefaults())\r\n                .csrf(Customizer.withDefaults());\r\n\r\n        //http.addFilterBefore(new JWTFilter(jwtVerifier()), UsernamePasswordAuthenticationFilter.class);\r\n\r\n        return http.build();\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nJWT token filter code: \r\n```\r\n@AllArgsConstructor\r\npublic class JWTFilter extends UsernamePasswordAuthenticationFilter {\r\n    private final JWTVerifier jwtVerifier;\r\n\r\n\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n            throws IOException, ServletException {\r\n        String token = extractToken(request);\r\n\r\n        if (token != null) {\r\n            try {\r\n                DecodedJWT jwt = jwtVerifier.verify(token);\r\n\r\n                Authentication authentication = createAuthenticationFromToken(jwt);\r\n\r\n                SecurityContextHolder.getContext().setAuthentication(authentication);\r\n            } catch (JWTVerificationException e) {\r\n            }\r\n        }\r\n\r\n        chain.doFilter(request, response);\r\n    }\r\n    private Authentication createAuthenticationFromToken(DecodedJWT jwt) {\r\n        String username = jwt.getClaim(&quot;username&quot;).asString();\r\n        List&lt;SimpleGrantedAuthority&gt; authorities = jwt.getClaim(&quot;roles&quot;)\r\n                .asList(String.class)\r\n                .stream()\r\n                .map(SimpleGrantedAuthority::new)\r\n                .toList();\r\n\r\n        return new UsernamePasswordAuthenticationToken(username, null, authorities);\r\n    }\r\n\r\n    // Extract the JWT token from the request\r\n    private String extractToken(HttpServletRequest request) {\r\n         String token = request.getHeader(&quot;Authorization&quot;);\r\n        return null;\r\n    }\r\n}\r\n\r\n```","title":"Java security status 403","body":"<p>I've configured simple security based on JWT tokens and roles. I've tested in in postman and every request have status 403 forbidden. I have no idea what is blocking my requests because even if i comment every filter and leave only permitAll it still says 403 every time.</p>\n<p>Security config code:</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class SpringSecurityConfig {\n\n    @Value(&quot;${jwt.secret}&quot;)\n    private String jwtSecret;\n\n    @Value(&quot;${jwt.issuer}&quot;)\n    private String jwtIssuer;\n\n    @Bean\n    public JWTVerifier jwtVerifier() {\n        Algorithm algorithm = Algorithm.HMAC256(jwtSecret);\n        return JWT.require(algorithm)\n                .withIssuer(jwtIssuer)\n                .build();\n    }\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((requests) -&gt; requests\n                        .requestMatchers(&quot;/api/users/**&quot;).permitAll()\n                        //.requestMatchers(&quot;/api/librarian/**&quot;).hasAnyRole(&quot;librarian&quot;, &quot;programmer&quot;)\n                        //.requestMatchers(&quot;/api/reader/**&quot;).hasAnyRole(&quot;reader&quot;, &quot;programmer&quot;)\n                        //.anyRequest().authenticated()\n\n                )\n                .cors(Customizer.withDefaults())\n                .csrf(Customizer.withDefaults());\n\n        //http.addFilterBefore(new JWTFilter(jwtVerifier()), UsernamePasswordAuthenticationFilter.class);\n\n        return http.build();\n    }\n\n}\n\n</code></pre>\n<p>JWT token filter code:</p>\n<pre><code>@AllArgsConstructor\npublic class JWTFilter extends UsernamePasswordAuthenticationFilter {\n    private final JWTVerifier jwtVerifier;\n\n\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n        String token = extractToken(request);\n\n        if (token != null) {\n            try {\n                DecodedJWT jwt = jwtVerifier.verify(token);\n\n                Authentication authentication = createAuthenticationFromToken(jwt);\n\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            } catch (JWTVerificationException e) {\n            }\n        }\n\n        chain.doFilter(request, response);\n    }\n    private Authentication createAuthenticationFromToken(DecodedJWT jwt) {\n        String username = jwt.getClaim(&quot;username&quot;).asString();\n        List&lt;SimpleGrantedAuthority&gt; authorities = jwt.getClaim(&quot;roles&quot;)\n                .asList(String.class)\n                .stream()\n                .map(SimpleGrantedAuthority::new)\n                .toList();\n\n        return new UsernamePasswordAuthenticationToken(username, null, authorities);\n    }\n\n    // Extract the JWT token from the request\n    private String extractToken(HttpServletRequest request) {\n         String token = request.getHeader(&quot;Authorization&quot;);\n        return null;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":16362262,"reputation":292,"user_id":11817534,"display_name":"Michael Ndiritu"},"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1643710171,"creation_date":1643710171,"answer_id":70938716,"question_id":70938297,"body_markdown":"They haven&#39;t talked about in the release docs but  manually add a buildscript block above the plugins block then inside the buildscript block add a depedencies block.\r\n\r\nlike this:\r\n\r\n    buildscript {\r\n\r\n            dependencies {\r\n\r\n                  classpath(&quot;androidx.navigation:navigation-safe-args-gradle-plugin:2.4.0&quot;)\r\n\r\n                         }\r\n           }\r\n\r\n\r\n    plugins {\r\n          id &#39;com.android.application&#39; version &#39;7.1.0-rc01&#39; apply false\r\n          //......\r\n        }\r\n  \r\n\r\n\r\n\r\n   ","title":"How to add classpath in new version of Android Studio","body":"<p>They haven't talked about in the release docs but  manually add a buildscript block above the plugins block then inside the buildscript block add a depedencies block.</p>\n<p>like this:</p>\n<pre><code>buildscript {\n\n        dependencies {\n\n              classpath(&quot;androidx.navigation:navigation-safe-args-gradle-plugin:2.4.0&quot;)\n\n                     }\n       }\n\n\nplugins {\n      id 'com.android.application' version '7.1.0-rc01' apply false\n      //......\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14718183,"reputation":1354,"user_id":10629573,"display_name":"Liong"},"down_vote_count":2,"up_vote_count":62,"is_accepted":true,"score":60,"last_activity_date":1646835422,"creation_date":1646835422,"answer_id":71410793,"question_id":70938297,"body_markdown":"In the latest version in February 2022 doesn&#39;t need to add `buildscript` anymore just add the id in `build.gradle` for project. It will be like this in `build.gradle` for project:\r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;7.1.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.1.2&#39; apply false\r\n    id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.6.10&#39; apply false\r\n\r\n    id &#39;androidx.navigation.safeargs&#39; version &#39;2.4.1&#39; apply false\r\n    // classpath are changed, so no need to add classpath anymore just the id and the version\r\n}\r\n```\r\n\r\nDon&#39;t forget add the id again in the `build.gradle` module,\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;org.jetbrains.kotlin.android&#39;\r\n    id &#39;androidx.navigation.safeargs&#39;\r\n}\r\n```","title":"How to add classpath in new version of Android Studio","body":"<p>In the latest version in February 2022 doesn't need to add <code>buildscript</code> anymore just add the id in <code>build.gradle</code> for project. It will be like this in <code>build.gradle</code> for project:</p>\n<pre><code>plugins {\n    id 'com.android.application' version '7.1.2' apply false\n    id 'com.android.library' version '7.1.2' apply false\n    id 'org.jetbrains.kotlin.android' version '1.6.10' apply false\n\n    id 'androidx.navigation.safeargs' version '2.4.1' apply false\n    // classpath are changed, so no need to add classpath anymore just the id and the version\n}\n</code></pre>\n<p>Don't forget add the id again in the <code>build.gradle</code> module,</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'org.jetbrains.kotlin.android'\n    id 'androidx.navigation.safeargs'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17037470,"reputation":109,"user_id":12326202,"display_name":"Hassan El Sayed Ammer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696147812,"creation_date":1650071507,"answer_id":71890293,"question_id":70938297,"body_markdown":"So they mentioned that in the build.Gradle file as top-level comment And I saw it as a bad practice \r\ndon&#39;t mention it below that  \r\n1- open your build.Gradle (app module) scroll to the top until you see that comment \r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nthen take this code As copy put it this line is[![enter image description here][1]][1] builtin comment \r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\n\r\nbuildscript {\r\n\r\n    dependencies {\r\n\r\n        classpath &quot;androidx.navigation:navigation-safe-args-gradle-plugin:lasted-version&quot;\r\n\r\n    }\r\n}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VWJoe.png","title":"How to add classpath in new version of Android Studio","body":"<p>So they mentioned that in the build.Gradle file as top-level comment And I saw it as a bad practice\ndon't mention it below that<br />\n1- open your build.Gradle (app module) scroll to the top until you see that comment\n// Top-level build file where you can add configuration options common to all sub-projects/modules.</p>\n<p>then take this code As copy put it this line is<a href=\"https://i.stack.imgur.com/VWJoe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VWJoe.png\" alt=\"enter image description here\" /></a> builtin comment\n// Top-level build file where you can add configuration options common to all sub-projects/modules.</p>\n<p>buildscript {</p>\n<pre><code>dependencies {\n\n    classpath &quot;androidx.navigation:navigation-safe-args-gradle-plugin:lasted-version&quot;\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":3600473,"reputation":526,"user_id":3003883,"display_name":"Numan Turkeri"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660347359,"creation_date":1660347359,"answer_id":73340607,"question_id":70938297,"body_markdown":"You dont need buildscript.You can add as &#39;id&#39; inside plugin component.I was face with it in hilt entegration.Here is the sample\r\nTop level gradle \r\n\r\n    \r\n    \r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;7.2.2&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;7.2.2&#39; apply false\r\n        id &#39;com.google.dagger.hilt.android&#39; version &#39;2.43.2&#39; apply false\r\n    }\r\n    \r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\nAnd second level(project level gradle)\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;com.google.dagger.hilt.android&#39;\r\n    }....\r\n\r\n\r\n    dependencies {\r\n    \r\n    .....\r\n        implementation &#39;com.google.dagger:hilt-android:2.43.2&#39;\r\n        annotationProcessor &#39;com.google.dagger:hilt-compiler:2.43.2&#39;\r\n    }\r\n\r\n","title":"How to add classpath in new version of Android Studio","body":"<p>You dont need buildscript.You can add as 'id' inside plugin component.I was face with it in hilt entegration.Here is the sample\nTop level gradle</p>\n<pre><code>plugins {\n    id 'com.android.application' version '7.2.2' apply false\n    id 'com.android.library' version '7.2.2' apply false\n    id 'com.google.dagger.hilt.android' version '2.43.2' apply false\n}\n\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>And second level(project level gradle)</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.dagger.hilt.android'\n}....\n\n\ndependencies {\n\n.....\n    implementation 'com.google.dagger:hilt-android:2.43.2'\n    annotationProcessor 'com.google.dagger:hilt-compiler:2.43.2'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9961744,"reputation":925,"user_id":7370837,"display_name":"vinay shetty"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672760755,"creation_date":1672760755,"answer_id":74995557,"question_id":70938297,"body_markdown":"We can add class path directly in the top Level Build.gradle file as follows.\r\n\r\nCode\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    buildscript {\r\n        repositories {\r\n            google()\r\n        }\r\n        dependencies {\r\n            def nav_version = &quot;2.5.3&quot;\r\n            classpath &quot;androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version&quot;\r\n        }\r\n    }\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;7.3.1&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;7.3.1&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.7.20&#39; apply false\r\n    }\r\n\r\nThis is sample for adding safe args for Navigation component as suggested in the [Documentation][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vrT9A.png\r\n  [2]: https://developer.android.com/guide/navigation/navigation-pass-data#Safe-args","title":"How to add classpath in new version of Android Studio","body":"<p>We can add class path directly in the top Level Build.gradle file as follows.</p>\n<p>Code\n<a href=\"https://i.stack.imgur.com/vrT9A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vrT9A.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>buildscript {\n    repositories {\n        google()\n    }\n    dependencies {\n        def nav_version = &quot;2.5.3&quot;\n        classpath &quot;androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version&quot;\n    }\n}\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '7.3.1' apply false\n    id 'com.android.library' version '7.3.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.7.20' apply false\n}\n</code></pre>\n<p>This is sample for adding safe args for Navigation component as suggested in the <a href=\"https://developer.android.com/guide/navigation/navigation-pass-data#Safe-args\" rel=\"nofollow noreferrer\">Documentation</a></p>\n"}],"owner":{"account_id":23273813,"reputation":628,"user_id":17358267,"display_name":"Dr.KeyOk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28484,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":71410793,"answer_count":5,"score":42,"last_activity_date":1696147812,"creation_date":1643708242,"question_id":70938297,"body_markdown":"I updated my android studio version to bumblebee version.&lt;br&gt;\r\nNow I want add navigation component to my project.&lt;br&gt;\r\nI want add classpath to gradle, but this file gradle has been changed and I don&#39;y know how can I add this.&lt;br&gt;\r\n\r\nI want add this `        classpath(&quot;androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version&quot;)\r\n` to gradle files!&lt;br&gt;\r\n\r\nMy project gradle file is : \r\n\r\n        plugins {\r\n        id &#39;com.android.application&#39; version &#39;7.1.0&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;7.1.0&#39; apply false\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.6.10&#39; apply false\r\n    }\r\n    \r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\n\r\nHow can I add this classpath to application gradle ?!","title":"How to add classpath in new version of Android Studio","body":"<p>I updated my android studio version to bumblebee version.<br>\nNow I want add navigation component to my project.<br>\nI want add classpath to gradle, but this file gradle has been changed and I don'y know how can I add this.<br></p>\n<p>I want add this <code>       classpath(&quot;androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version&quot;)</code> to gradle files!<br></p>\n<p>My project gradle file is :</p>\n<pre><code>    plugins {\n    id 'com.android.application' version '7.1.0' apply false\n    id 'com.android.library' version '7.1.0' apply false\n    id 'org.jetbrains.kotlin.android' version '1.6.10' apply false\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>How can I add this classpath to application gradle ?!</p>\n"},{"tags":["java","tomcat","java-11","tomcat9","openjdk-11"],"comments":[{"owner":{"account_id":1718670,"reputation":4778,"user_id":1575188,"display_name":"fantaghirocco"},"score":0,"creation_date":1574678236,"post_id":59029527,"comment_id":104303740,"body_markdown":"https://github.com/jbilander/HowTos/wiki/How-to-setup-Tomcat-9-on-Java-OpenJDK-11-and-Apache-proxy_ajp-on-Ubuntu-18.04-LTS","body":"<a href=\"https://github.com/jbilander/HowTos/wiki/How-to-setup-Tomcat-9-on-Java-OpenJDK-11-and-Apache-proxy_ajp-on-Ubuntu-18.04-LTS\" rel=\"nofollow noreferrer\">github.com/jbilander/HowTos/wiki/&hellip;</a>"},{"owner":{"account_id":9857169,"reputation":33,"user_id":7301332,"display_name":"rahul sharma"},"score":0,"creation_date":1574679063,"post_id":59029527,"comment_id":104304167,"body_markdown":"I&#39;m not sure that we can use adoptopenJdk or not","body":"I&#39;m not sure that we can use adoptopenJdk or not"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574687144,"creation_date":1574686609,"answer_id":59032376,"question_id":59029527,"body_markdown":"This is pretty weird.  The `java.io` module is part of the Java runtime.\r\n\r\nThe only explanation I can think of is that someone has put a copy of `rt.jar` &lt;sup&gt;1&lt;/sup&gt; from an older version of Java into your webapp&#39;s WAR file, or one of the Tomcat shared libraries folder.  Since Tomcat&#39;s webapp class-loaders have the search order inverted compared with a typical Java application, that could lead to these classes being loaded from the wrong place, leading to a sealing violation.\r\n\r\n&lt;sup&gt;1 - Or something like this.  It also could be a JAR containing a subset of the standard class libraries that have been &quot;tweaked&quot; for some purpose.&lt;/sup&gt;","title":"Tomcat 9 not able to start with OpenJDK 11","body":"<p>This is pretty weird.  The <code>java.io</code> module is part of the Java runtime.</p>\n\n<p>The only explanation I can think of is that someone has put a copy of <code>rt.jar</code> <sup>1</sup> from an older version of Java into your webapp's WAR file, or one of the Tomcat shared libraries folder.  Since Tomcat's webapp class-loaders have the search order inverted compared with a typical Java application, that could lead to these classes being loaded from the wrong place, leading to a sealing violation.</p>\n\n<p><sup>1 - Or something like this.  It also could be a JAR containing a subset of the standard class libraries that have been \"tweaked\" for some purpose.</sup></p>\n"},{"tags":[],"owner":{"account_id":8928280,"reputation":58,"user_id":6661742,"display_name":"Hari Prassad Kannan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586252494,"creation_date":1586252494,"answer_id":61077069,"question_id":59029527,"body_markdown":"what was the installation procedure followed for Tomcat 9 and Openjdk 11\r\n\r\nPlease make sure that you point to the proper JVM.dll file because in OpenJDK 11 version\r\nnot bundled with JRE. in Tomcat properties you need to map jvm.dll present in bin/server/jvm.dll.\r\n","title":"Tomcat 9 not able to start with OpenJDK 11","body":"<p>what was the installation procedure followed for Tomcat 9 and Openjdk 11</p>\n\n<p>Please make sure that you point to the proper JVM.dll file because in OpenJDK 11 version\nnot bundled with JRE. in Tomcat properties you need to map jvm.dll present in bin/server/jvm.dll.</p>\n"}],"owner":{"account_id":9857169,"reputation":33,"user_id":7301332,"display_name":"rahul sharma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696147480,"creation_date":1574676984,"question_id":59029527,"body_markdown":"I installed *Tomcat 9* with *OpenJDK 11* but the Tomcat service didn&#39;t start and failed with the following error:\r\n\r\n    SEVERE: A child container failed during start\r\n    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/orion]]\r\n    \tat java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n    \tat java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:951)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:831)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1432)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1422)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:944)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:261)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:801)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:695)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:350)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:492)\r\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/orion]]\r\n    \tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:441)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1432)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1422)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:944)\r\n    \t... 21 more\r\n    Caused by: org.apache.xerces.parsers.ObjectFactory$ConfigurationError: Provider org.apache.xerces.parsers.XIncludeAwareParserConfiguration could not be instantiated: java.lang.SecurityException: Sealing violation loading java.io.StringReader : Package java.io is sealed.\r\n    \tat org.apache.xerces.parsers.ObjectFactory.newInstance(Unknown Source)\r\n    \tat org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)\r\n    \tat org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)\r\n    \tat org.apache.xerces.parsers.SAXParser.&lt;init&gt;(Unknown Source)\r\n    \tat org.apache.xerces.parsers.SAXParser.&lt;init&gt;(Unknown Source)\r\n    \tat org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.&lt;init&gt;(Unknown Source)\r\n    \tat org.apache.xerces.jaxp.SAXParserImpl.&lt;init&gt;(Unknown Source)\r\n    \tat org.apache.xerces.jaxp.SAXParserFactoryImpl.newSAXParser(Unknown Source)\r\n    \tat org.apache.tomcat.util.digester.Digester.getParser(Digester.java:614)\r\n    \tat org.apache.tomcat.util.descriptor.web.WebXmlParser.&lt;init&gt;(WebXmlParser.java:62)\r\n    \tat org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1099)\r\n    \tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:769)\r\n    \tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5007)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t... 27 more\r\n    \r\nAfter diagnostic I found that one of the jar(xerces.jar) is creating issue, so I removed that jar from my application. After that tomcat service started without any issue.   \r\n    \r\nBut once I try to access one of my servlet it gave me below error:\r\n\r\n    INFO: Marking servlet [InfoServlet] as unavailable\r\n    Nov 25, 2019 3:33:24 PM org.apache.catalina.core.StandardWrapperValve invoke\r\n    SEVERE: Allocate exception for servlet [InfoServlet]\r\n    java.lang.SecurityException: Sealing violation loading java.io.StringWriter : Package java.io is sealed.\r\n    \tat org.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2363)\r\n    \tat org.apache.catalina.loader.WebappClassLoaderBase$PrivilegedFindClassByName.run(WebappClassLoaderBase.java:156)\r\n    \tat org.apache.catalina.loader.WebappClassLoaderBase$PrivilegedFindClassByName.run(WebappClassLoaderBase.java:145)\r\n    \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n    \tat org.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:832)\r\n    \tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1297)\r\n    \tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1157)\r\n    \tat org.apache.log4j.Category.getInstance(Category.java:522)\r\n    \tat com.pg.orion.basic.rmiservlet.InfoServlet.&lt;clinit&gt;(InfoServlet.java:32)\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:151)\r\n    \tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1032)\r\n    \tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:761)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:133)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:668)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n    \tat org.apache.coyote.ajp.AjpProcessor.service(AjpProcessor.java:394)\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n    \r\n    \r\n    \r\n**Best part is everything is working with Java 8 without removing anything.**\r\n\r\nIt looks like issue is not related to `xerces.jar` as it is already working with *Java 8*. After some research I found that \r\n\r\nA sealing violation means that some classes from a sealed package were loaded from two different locations (directories or jar files).\r\n\r\nA sealed package is one that essentially says &quot;I know that all classes in this package come from a single jar file. For security reason no other location may provide classes that are in this package&quot;.\r\n \r\nThis is not the case as everything working with *Java 8*. Any help will be appreciated.\r\n\r\n\r\nAfter diagnostic I found that -Djava.security.manager parameter is causing the whole problem that we set additionally in service.bat while installing tomcat. After removing -Djava.security.manager,tomcat is working normally. \r\nHowever, security manager we enabled in java 8 due to security policy and now because of that tomcat it is not running in java11. \r\nHow to resolve this issue with security manager enable and with java 11??? \r\n     ","title":"Tomcat 9 not able to start with OpenJDK 11","body":"<p>I installed <em>Tomcat 9</em> with <em>OpenJDK 11</em> but the Tomcat service didn't start and failed with the following error:</p>\n\n<pre><code>SEVERE: A child container failed during start\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/orion]]\n    at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)\n    at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:951)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:831)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1432)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1422)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:944)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:261)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:422)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:801)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:695)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:350)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:492)\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/orion]]\n    at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:441)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1432)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1422)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:944)\n    ... 21 more\nCaused by: org.apache.xerces.parsers.ObjectFactory$ConfigurationError: Provider org.apache.xerces.parsers.XIncludeAwareParserConfiguration could not be instantiated: java.lang.SecurityException: Sealing violation loading java.io.StringReader : Package java.io is sealed.\n    at org.apache.xerces.parsers.ObjectFactory.newInstance(Unknown Source)\n    at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)\n    at org.apache.xerces.parsers.ObjectFactory.createObject(Unknown Source)\n    at org.apache.xerces.parsers.SAXParser.&lt;init&gt;(Unknown Source)\n    at org.apache.xerces.parsers.SAXParser.&lt;init&gt;(Unknown Source)\n    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.&lt;init&gt;(Unknown Source)\n    at org.apache.xerces.jaxp.SAXParserImpl.&lt;init&gt;(Unknown Source)\n    at org.apache.xerces.jaxp.SAXParserFactoryImpl.newSAXParser(Unknown Source)\n    at org.apache.tomcat.util.digester.Digester.getParser(Digester.java:614)\n    at org.apache.tomcat.util.descriptor.web.WebXmlParser.&lt;init&gt;(WebXmlParser.java:62)\n    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1099)\n    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:769)\n    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5007)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    ... 27 more\n</code></pre>\n\n<p>After diagnostic I found that one of the jar(xerces.jar) is creating issue, so I removed that jar from my application. After that tomcat service started without any issue.   </p>\n\n<p>But once I try to access one of my servlet it gave me below error:</p>\n\n<pre><code>INFO: Marking servlet [InfoServlet] as unavailable\nNov 25, 2019 3:33:24 PM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Allocate exception for servlet [InfoServlet]\njava.lang.SecurityException: Sealing violation loading java.io.StringWriter : Package java.io is sealed.\n    at org.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2363)\n    at org.apache.catalina.loader.WebappClassLoaderBase$PrivilegedFindClassByName.run(WebappClassLoaderBase.java:156)\n    at org.apache.catalina.loader.WebappClassLoaderBase$PrivilegedFindClassByName.run(WebappClassLoaderBase.java:145)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at org.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:832)\n    at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1297)\n    at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1157)\n    at org.apache.log4j.Category.getInstance(Category.java:522)\n    at com.pg.orion.basic.rmiservlet.InfoServlet.&lt;clinit&gt;(InfoServlet.java:32)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:151)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1032)\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:761)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:133)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:668)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    at org.apache.coyote.ajp.AjpProcessor.service(AjpProcessor.java:394)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:791)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1417)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n\n<p><strong>Best part is everything is working with Java 8 without removing anything.</strong></p>\n\n<p>It looks like issue is not related to <code>xerces.jar</code> as it is already working with <em>Java 8</em>. After some research I found that </p>\n\n<p>A sealing violation means that some classes from a sealed package were loaded from two different locations (directories or jar files).</p>\n\n<p>A sealed package is one that essentially says \"I know that all classes in this package come from a single jar file. For security reason no other location may provide classes that are in this package\".</p>\n\n<p>This is not the case as everything working with <em>Java 8</em>. Any help will be appreciated.</p>\n\n<p>After diagnostic I found that -Djava.security.manager parameter is causing the whole problem that we set additionally in service.bat while installing tomcat. After removing -Djava.security.manager,tomcat is working normally. \nHowever, security manager we enabled in java 8 due to security policy and now because of that tomcat it is not running in java11. \nHow to resolve this issue with security manager enable and with java 11??? </p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":7828744,"reputation":2225,"user_id":5919568,"accept_rate":83,"display_name":"Morteza Jalambadani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696147003,"creation_date":1696147003,"answer_id":77209663,"question_id":77209521,"body_markdown":"You can utilize Dynamic Query with the Specification(JPA) or Query DSL solution. I believe that [this post][1] could be of assistance. You can implement it very easily using NamedParameterJdbcTemplate, as demonstrated in the following example:\r\n\r\n    @Service\r\n    public class ExampleService {\r\n    \r\n    \t@Autowired\r\n        private NamedParameterJdbcTemplate jdbcTemplate;\r\n    \r\n        \r\n    \r\n    \r\n        public void executeConditionalQuery(boolean condition) {\r\n            String sql = &quot;SELECT * FROM your_table WHERE&quot;;\r\n            Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\r\n    \r\n            if (condition) {\r\n                sql += &quot; column_name = :value&quot;;\r\n                params.put(&quot;value&quot;, &quot;desired_value&quot;);\r\n            } else {\r\n                sql += &quot; another_column = :value&quot;;\r\n                params.put(&quot;value&quot;, &quot;another_desired_value&quot;);\r\n            }\r\n    \r\n            jdbcTemplate.query(sql, params, (rs, rowNum) -&gt; {\r\n                // Process the query results here\r\n                return null;\r\n            });\r\n        }\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/28874135/dynamic-spring-data-jpa-repository-query-with-arbitrary-and-clauses\r\n","title":"Advanced Custom Query For Spring JPA","body":"<p>You can utilize Dynamic Query with the Specification(JPA) or Query DSL solution. I believe that <a href=\"https://stackoverflow.com/questions/28874135/dynamic-spring-data-jpa-repository-query-with-arbitrary-and-clauses\">this post</a> could be of assistance. You can implement it very easily using NamedParameterJdbcTemplate, as demonstrated in the following example:</p>\n<pre><code>@Service\npublic class ExampleService {\n\n    @Autowired\n    private NamedParameterJdbcTemplate jdbcTemplate;\n\n    \n\n\n    public void executeConditionalQuery(boolean condition) {\n        String sql = &quot;SELECT * FROM your_table WHERE&quot;;\n        Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\n\n        if (condition) {\n            sql += &quot; column_name = :value&quot;;\n            params.put(&quot;value&quot;, &quot;desired_value&quot;);\n        } else {\n            sql += &quot; another_column = :value&quot;;\n            params.put(&quot;value&quot;, &quot;another_desired_value&quot;);\n        }\n\n        jdbcTemplate.query(sql, params, (rs, rowNum) -&gt; {\n            // Process the query results here\n            return null;\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16221044,"reputation":331,"user_id":11712575,"display_name":"Jason Chan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77209663,"answer_count":1,"score":0,"last_activity_date":1696147003,"creation_date":1696143578,"question_id":77209521,"body_markdown":"I have a springboot endpoint where users have an advanced search option. Users are able to put in data they want to filter by, and users can put any amount of restrictions they want (with at least 1).\r\n\r\nHere is my DTO:\r\n\r\n\r\n\r\n    Date date;\r\n    String email;\r\n    int transactionNumber;\r\n\r\n\r\n\r\nIn my service layer, I have a stringbuilder that looks like this:\r\n\r\n    public String createQuery(DTO dto){\r\n        StringBuilder sb = new StringBuilder();\r\n        if(Objects.nonNull(dto.getDate())){\r\n            sb.apphend(&quot; AND date = &quot; + dto.getDate() + &quot; &quot;);\r\n        }\r\n    }\r\n    //... etc till the entire string is made\r\n\r\nIn my repository layer:\r\n\r\n    @Query(value = &quot;SELECT * FROM table WHERE user = :user :customQuery&quot;, nativeQuery = true)\r\n    List&lt;tableEntity&gt; findByAdvancedSearch(@Param(&quot;user) String user, @Param(&quot;customQuery&quot;) String customQuery);\r\n\r\n\r\nI am not sure how to fix this or go about having a repository where I can have a query take a dynamic number of restrictions. Is there a good way to do this?\r\n\r\nI tried to use the custom query, since you are able to do a custom number of inputs, but I realize that using the `:variable` command sanitizes the query as a string.","title":"Advanced Custom Query For Spring JPA","body":"<p>I have a springboot endpoint where users have an advanced search option. Users are able to put in data they want to filter by, and users can put any amount of restrictions they want (with at least 1).</p>\n<p>Here is my DTO:</p>\n<pre><code>Date date;\nString email;\nint transactionNumber;\n</code></pre>\n<p>In my service layer, I have a stringbuilder that looks like this:</p>\n<pre><code>public String createQuery(DTO dto){\n    StringBuilder sb = new StringBuilder();\n    if(Objects.nonNull(dto.getDate())){\n        sb.apphend(&quot; AND date = &quot; + dto.getDate() + &quot; &quot;);\n    }\n}\n//... etc till the entire string is made\n</code></pre>\n<p>In my repository layer:</p>\n<pre><code>@Query(value = &quot;SELECT * FROM table WHERE user = :user :customQuery&quot;, nativeQuery = true)\nList&lt;tableEntity&gt; findByAdvancedSearch(@Param(&quot;user) String user, @Param(&quot;customQuery&quot;) String customQuery);\n</code></pre>\n<p>I am not sure how to fix this or go about having a repository where I can have a query take a dynamic number of restrictions. Is there a good way to do this?</p>\n<p>I tried to use the custom query, since you are able to do a custom number of inputs, but I realize that using the <code>:variable</code> command sanitizes the query as a string.</p>\n"},{"tags":["java","data-structures"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1696141597,"creation_date":1696141597,"answer_id":77209458,"question_id":77209297,"body_markdown":"It runs correctly and returns the correct output.\r\n\r\nHere is an alternate implementation.\r\n\r\n```java\r\nScanner in = new Scanner(System.in);\r\nint N = in.nextInt(), i = 0;\r\nrecord Student(int id, String firstName, String cgpa) {}\r\nList&lt;Student&gt; a = new ArrayList&lt;&gt;();\r\ndo a.add(new Student(in.nextInt(), in.next(), in.next()));\r\nwhile (++i &lt; N);\r\na.sort((x, y) -&gt; {\r\n    if (x.cgpa.equals(y.cgpa))\r\n        if (x.firstName.equalsIgnoreCase(y.firstName))\r\n            return Integer.compare(x.id, y.id);\r\n        else return x.firstName.compareToIgnoreCase(y.firstName);\r\n    else return y.cgpa.compareTo(x.cgpa);\r\n});\r\na.forEach(x -&gt; System.out.println(x.firstName));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n5\r\n33 Rumpa 3.68\r\n85 Ashis 3.85\r\n56 Samiha 3.75\r\n19 Samara 3.75\r\n22 Fahim 3.76\r\nAshis\r\nFahim\r\nSamara\r\nSamiha\r\nRumpa\r\n```","title":"I have a question on HackerRank where some test cases pass for this code, and some do not","body":"<p>It runs correctly and returns the correct output.</p>\n<p>Here is an alternate implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner in = new Scanner(System.in);\nint N = in.nextInt(), i = 0;\nrecord Student(int id, String firstName, String cgpa) {}\nList&lt;Student&gt; a = new ArrayList&lt;&gt;();\ndo a.add(new Student(in.nextInt(), in.next(), in.next()));\nwhile (++i &lt; N);\na.sort((x, y) -&gt; {\n    if (x.cgpa.equals(y.cgpa))\n        if (x.firstName.equalsIgnoreCase(y.firstName))\n            return Integer.compare(x.id, y.id);\n        else return x.firstName.compareToIgnoreCase(y.firstName);\n    else return y.cgpa.compareTo(x.cgpa);\n});\na.forEach(x -&gt; System.out.println(x.firstName));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>5\n33 Rumpa 3.68\n85 Ashis 3.85\n56 Samiha 3.75\n19 Samara 3.75\n22 Fahim 3.76\nAshis\nFahim\nSamara\nSamiha\nRumpa\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696146941,"creation_date":1696146625,"answer_id":77209644,"question_id":77209297,"body_markdown":"The problem is here:  \r\nhttps://www.hackerrank.com/challenges/java-sort/problem\r\n\r\nThe problem states (under **Constraints**):\r\n&gt; The name contains only lowercase English letters.\r\n\r\nThat&#39;s a lie.  \r\nWhen I submitted your code (to Hackerrank), I got 5 out of 7 test cases failed. I unlocked the first failed test case and downloaded it. Here it is:\r\n```none\r\n100\r\n1 PdeLwCYcXHBUyDovShzHKI 1.85\r\n2 XHjqMumVZfSW 0.18\r\n3 zXiGscYethmwLgalEVwuSGdzxI 0.17\r\n4 ggjwTvvaAraioUNmKKfKWwA 1.13\r\n5 PrvDm 1.38\r\n6 NnDGDcEQ 1.59\r\n7 hyDbVOGaobNkXZR 2.39\r\n8 HYasEeNIkTsDSnuMXQGDuFIZuGen 2.01\r\n9 AVSHnKvDZorlL 3.46\r\n10 aOdxZenFiSfZzoO 3.32\r\n11 PnfTXKEvdJeLaciXAIooDmqlTuBxJL 1.30\r\n12 FSXEeOwelNxMVutJDFjEzLm 0.81\r\n13 QryjiTfrkcUGnJBnkzAWwdiqJhZqh 1.87\r\n14 YVTVYxRUiAoFNNgHJGyF 0.70\r\n15 dofSxfFEwPPnKwFfVsynJkBDhumIA 1.52\r\n16 JXneisxgkeLkak 2.98\r\n17 hjBCAXDgihUqPExDuRrJcz 1.15\r\n18 fwXRzErDWcyKjPxbOfApVJx 1.81\r\n19 YAmyNFyT 0.12\r\n20 VSgQTgiqNyQMRerhQdLRUemcEQX 3.75\r\n21 tMloJlO 1.18\r\n22 yvOgyJLb 3.21\r\n23 VDhZY 3.14\r\n24 XvxXsDKIjkFJHiWTOkd 3.37\r\n25 mcNnINTMSdpMxwTApWSJ 2.72\r\n26 vosdf 2.00\r\n27 DHRSaJQJdJiJBmxjmLouQ 2.80\r\n28 KvzKzel 0.10\r\n29 xcRgist 0.23\r\n30 QWPwPuN 1.58\r\n31 sydIngROEZHupsHzPFFpXhZh 3.02\r\n32 yNXtoxp 0.78\r\n33 bGVtEfpjOniybCxKYVrPMkqbhVYsG 3.19\r\n34 bsbxNbUVvECrfSV 3.51\r\n35 fRHKrHh 0.16\r\n36 XgBjLqwusge 1.57\r\n37 jTkQkHxwAKfyykjWiyJKTqcCUZ 2.26\r\n38 ZZDGEToBqnxnPK 2.13\r\n39 pVGMylZEC 2.64\r\n40 UhhdgCqcOuWAJOFWKqsGUGw 3.62\r\n41 keyYAGA 0.03\r\n42 MkVKGyExPayZExpJEl 0.42\r\n43 uMwoJFugvXGnSgaApSIzNN 3.79\r\n44 BmnINxoKI 0.91\r\n45 toTIoHWsZB 0.36\r\n46 xvIUeYZMlBrRbAUxcLtzLPdjORQIYZ 0.81\r\n47 LIaCQ 1.28\r\n48 jadiayxBP 1.18\r\n49 NQfoFodr 0.48\r\n50 QumKkEcRFIdHaTHudcvHjEAYlAnkn 1.99\r\n51 hlTgCgoFvpFUSXTssbQ 3.55\r\n52 mzEhSqlRtxslyNZZnmCGGdvJbujoIe 0.97\r\n53 ABAJwYeibIJQ 3.58\r\n54 KUlxpQpgbCPp 2.61\r\n55 XhhoNTJ 2.06\r\n56 nTBfkiqGrAem 1.78\r\n57 ArFnJ 1.33\r\n58 tzqGKOBIHnl 0.86\r\n59 gmWXph 3.85\r\n60 KkKNPuDXiddAsnCQZgnMQyhJqB 2.47\r\n61 PDpUZLlXiihnpYCmDCor 2.62\r\n62 WneXKKERUBQ 1.57\r\n63 NElkBCFZUUJBLLcVjQn 1.48\r\n64 mdOtOeFpyLW 2.73\r\n65 FOIzcUHOGYTBnGLn 0.02\r\n66 ibyUYmXdfoAW 3.75\r\n67 wCZQpyjUBfEmZpApljyxKbPv 2.04\r\n68 fmbSzWBAFYvgvYoAfNgh 0.56\r\n69 rAFMZelAhtAYs 0.12\r\n70 IwQmGhDJAiExVBjUmHXAfvUDqUyksh 3.38\r\n71 CEoQmJhGNuufStMmSAHCj 0.95\r\n72 LtbWRlEpzNbawIIo 3.94\r\n73 FxwndjRHEXgXaXYw 1.55\r\n74 euKDKBZrwqODRtIyWji 2.01\r\n75 ssLafrVwU 3.93\r\n76 ZlusqchpsvpSimDBnocPXdgCW 1.52\r\n77 FfMtpOUNvGKBETc 2.39\r\n78 WJTKFI 0.36\r\n79 bHfivIcusSyRnaovkBZazI 1.87\r\n80 RzXoSUoHEcIH 1.73\r\n81 dkrlgltSHdWFTvldivCmKGIRdp 0.60\r\n82 NDnPzRMahqJNvqArVFrqrZOphOAHO 0.19\r\n83 tVsahPGsuJFIQ 1.37\r\n84 EcKbvrkcWEkqZZMHXnqzjTSG 2.68\r\n85 EnSVRSXzsyWuCMVVe 2.15\r\n86 qJOdMwks 2.09\r\n87 tNDpFOSdpdUfUbzkcINKdHIaZxV 0.28\r\n88 VkNpJJXfFnzBclOPwIvdabTxqSzFJ 2.97\r\n89 SjqGgkIlXdWxmVgZkrqgaBX 1.28\r\n90 agPfUmvm 1.79\r\n91 oWgzOedgOdRozRaEymNOLPRCqvl 0.60\r\n92 LdHAmtvQLIEpXoWwmhfEDmguyJ 1.61\r\n93 hYGUutHgTzGQhWM 1.89\r\n94 FEXmMZqytnoWRMACuad 1.15\r\n95 wAEauaPeHuTdnyQY 0.75\r\n96 vcGdlaKlNsEp 0.90\r\n97 OllfZlACfxPdXgsM 1.56\r\n98 FlbyiCXNChMaokOglrGd 0.25\r\n99 dwBNMwtQwYeZprqQpXK 1.70\r\n100 vZuGpylfeQrliAXfJT 2.45\r\n```\r\nAs you can see, it does **not** contain _only lowercase English letters_.\r\n\r\nHence you just need to change your comparison of the [Student] name to the following:\r\n```java\r\nint fNameComparison= student1.getFname().compareTo(student2.getFname());\r\n```\r\nOnce I made that change and re-submitted the code, all test cases passed.\r\n\r\nFor the sake of completeness, here is the entire solution &amp;ndash; including the above change.\r\n```java\r\nimport java.util.*;\r\n\r\nclass Student{\r\n\tprivate int id;\r\n\tprivate String fname;\r\n\tprivate double cgpa;\r\n\tpublic Student(int id, String fname, double cgpa) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.fname = fname;\r\n\t\tthis.cgpa = cgpa;\r\n\t}\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\tpublic String getFname() {\r\n\t\treturn fname;\r\n\t}\r\n\tpublic double getCgpa() {\r\n\t\treturn cgpa;\r\n\t}\r\n}\r\n\r\nclass CombinedComparator implements Comparator&lt;Student&gt;{\r\n    @Override\r\n     public int compare(Student student1, Student student2){\r\n         int gpaComparison = Double.compare(student2.getCgpa(), student1.getCgpa());\r\n         \r\n         if(gpaComparison==0){\r\n             int fNameComparison= student1.getFname().compareTo(student2.getFname());\r\n             if(fNameComparison==0){\r\n                 return Integer.compare(student1.getId(), student2.getId());\r\n             }\r\n             return fNameComparison;\r\n         }\r\n         return gpaComparison;\r\n     }\r\n}\r\n\r\n//Complete the code\r\npublic class Solution\r\n{\r\n\tpublic static void main(String[] args){\r\n\t\tScanner in = new Scanner(System.in);\r\n\t\tint testCases = Integer.parseInt(in.nextLine());\r\n\t\t\r\n\t\tList&lt;Student&gt; studentList = new ArrayList&lt;Student&gt;();\r\n\t\twhile(testCases&gt;0){\r\n\t\t\tint id = in.nextInt();\r\n\t\t\tString fname = in.next();\r\n\t\t\tdouble cgpa = in.nextDouble();\r\n\t\t\t\r\n\t\t\tStudent st = new Student(id, fname, cgpa);\r\n\t\t\tstudentList.add(st);\r\n\t\t\t\r\n\t\t\ttestCases--;\r\n\t\t}\r\n        Collections.sort(studentList,new CombinedComparator());\r\n      \tfor(Student st: studentList){\r\n\t\t\tSystem.out.println(st.getFname());\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nBy the way, nearly all HackerRank problems have online solutions available. Just Google for **hackerrank** ___name of problem___ **solution**. So for your problem, I Googled:\r\n&gt; hackerrank java sort solution\r\n\r\nFirst result was:  \r\nhttps://programs.programmingoneonone.com/2021/02/hackerrank-java-sort-solution.html","title":"I have a question on HackerRank where some test cases pass for this code, and some do not","body":"<p>The problem is here:<br />\n<a href=\"https://www.hackerrank.com/challenges/java-sort/problem\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/java-sort/problem</a></p>\n<p>The problem states (under <strong>Constraints</strong>):</p>\n<blockquote>\n<p>The name contains only lowercase English letters.</p>\n</blockquote>\n<p>That's a lie.<br />\nWhen I submitted your code (to Hackerrank), I got 5 out of 7 test cases failed. I unlocked the first failed test case and downloaded it. Here it is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>100\n1 PdeLwCYcXHBUyDovShzHKI 1.85\n2 XHjqMumVZfSW 0.18\n3 zXiGscYethmwLgalEVwuSGdzxI 0.17\n4 ggjwTvvaAraioUNmKKfKWwA 1.13\n5 PrvDm 1.38\n6 NnDGDcEQ 1.59\n7 hyDbVOGaobNkXZR 2.39\n8 HYasEeNIkTsDSnuMXQGDuFIZuGen 2.01\n9 AVSHnKvDZorlL 3.46\n10 aOdxZenFiSfZzoO 3.32\n11 PnfTXKEvdJeLaciXAIooDmqlTuBxJL 1.30\n12 FSXEeOwelNxMVutJDFjEzLm 0.81\n13 QryjiTfrkcUGnJBnkzAWwdiqJhZqh 1.87\n14 YVTVYxRUiAoFNNgHJGyF 0.70\n15 dofSxfFEwPPnKwFfVsynJkBDhumIA 1.52\n16 JXneisxgkeLkak 2.98\n17 hjBCAXDgihUqPExDuRrJcz 1.15\n18 fwXRzErDWcyKjPxbOfApVJx 1.81\n19 YAmyNFyT 0.12\n20 VSgQTgiqNyQMRerhQdLRUemcEQX 3.75\n21 tMloJlO 1.18\n22 yvOgyJLb 3.21\n23 VDhZY 3.14\n24 XvxXsDKIjkFJHiWTOkd 3.37\n25 mcNnINTMSdpMxwTApWSJ 2.72\n26 vosdf 2.00\n27 DHRSaJQJdJiJBmxjmLouQ 2.80\n28 KvzKzel 0.10\n29 xcRgist 0.23\n30 QWPwPuN 1.58\n31 sydIngROEZHupsHzPFFpXhZh 3.02\n32 yNXtoxp 0.78\n33 bGVtEfpjOniybCxKYVrPMkqbhVYsG 3.19\n34 bsbxNbUVvECrfSV 3.51\n35 fRHKrHh 0.16\n36 XgBjLqwusge 1.57\n37 jTkQkHxwAKfyykjWiyJKTqcCUZ 2.26\n38 ZZDGEToBqnxnPK 2.13\n39 pVGMylZEC 2.64\n40 UhhdgCqcOuWAJOFWKqsGUGw 3.62\n41 keyYAGA 0.03\n42 MkVKGyExPayZExpJEl 0.42\n43 uMwoJFugvXGnSgaApSIzNN 3.79\n44 BmnINxoKI 0.91\n45 toTIoHWsZB 0.36\n46 xvIUeYZMlBrRbAUxcLtzLPdjORQIYZ 0.81\n47 LIaCQ 1.28\n48 jadiayxBP 1.18\n49 NQfoFodr 0.48\n50 QumKkEcRFIdHaTHudcvHjEAYlAnkn 1.99\n51 hlTgCgoFvpFUSXTssbQ 3.55\n52 mzEhSqlRtxslyNZZnmCGGdvJbujoIe 0.97\n53 ABAJwYeibIJQ 3.58\n54 KUlxpQpgbCPp 2.61\n55 XhhoNTJ 2.06\n56 nTBfkiqGrAem 1.78\n57 ArFnJ 1.33\n58 tzqGKOBIHnl 0.86\n59 gmWXph 3.85\n60 KkKNPuDXiddAsnCQZgnMQyhJqB 2.47\n61 PDpUZLlXiihnpYCmDCor 2.62\n62 WneXKKERUBQ 1.57\n63 NElkBCFZUUJBLLcVjQn 1.48\n64 mdOtOeFpyLW 2.73\n65 FOIzcUHOGYTBnGLn 0.02\n66 ibyUYmXdfoAW 3.75\n67 wCZQpyjUBfEmZpApljyxKbPv 2.04\n68 fmbSzWBAFYvgvYoAfNgh 0.56\n69 rAFMZelAhtAYs 0.12\n70 IwQmGhDJAiExVBjUmHXAfvUDqUyksh 3.38\n71 CEoQmJhGNuufStMmSAHCj 0.95\n72 LtbWRlEpzNbawIIo 3.94\n73 FxwndjRHEXgXaXYw 1.55\n74 euKDKBZrwqODRtIyWji 2.01\n75 ssLafrVwU 3.93\n76 ZlusqchpsvpSimDBnocPXdgCW 1.52\n77 FfMtpOUNvGKBETc 2.39\n78 WJTKFI 0.36\n79 bHfivIcusSyRnaovkBZazI 1.87\n80 RzXoSUoHEcIH 1.73\n81 dkrlgltSHdWFTvldivCmKGIRdp 0.60\n82 NDnPzRMahqJNvqArVFrqrZOphOAHO 0.19\n83 tVsahPGsuJFIQ 1.37\n84 EcKbvrkcWEkqZZMHXnqzjTSG 2.68\n85 EnSVRSXzsyWuCMVVe 2.15\n86 qJOdMwks 2.09\n87 tNDpFOSdpdUfUbzkcINKdHIaZxV 0.28\n88 VkNpJJXfFnzBclOPwIvdabTxqSzFJ 2.97\n89 SjqGgkIlXdWxmVgZkrqgaBX 1.28\n90 agPfUmvm 1.79\n91 oWgzOedgOdRozRaEymNOLPRCqvl 0.60\n92 LdHAmtvQLIEpXoWwmhfEDmguyJ 1.61\n93 hYGUutHgTzGQhWM 1.89\n94 FEXmMZqytnoWRMACuad 1.15\n95 wAEauaPeHuTdnyQY 0.75\n96 vcGdlaKlNsEp 0.90\n97 OllfZlACfxPdXgsM 1.56\n98 FlbyiCXNChMaokOglrGd 0.25\n99 dwBNMwtQwYeZprqQpXK 1.70\n100 vZuGpylfeQrliAXfJT 2.45\n</code></pre>\n<p>As you can see, it does <strong>not</strong> contain <em>only lowercase English letters</em>.</p>\n<p>Hence you just need to change your comparison of the [Student] name to the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int fNameComparison= student1.getFname().compareTo(student2.getFname());\n</code></pre>\n<p>Once I made that change and re-submitted the code, all test cases passed.</p>\n<p>For the sake of completeness, here is the entire solution – including the above change.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\nclass Student{\n    private int id;\n    private String fname;\n    private double cgpa;\n    public Student(int id, String fname, double cgpa) {\n        super();\n        this.id = id;\n        this.fname = fname;\n        this.cgpa = cgpa;\n    }\n    public int getId() {\n        return id;\n    }\n    public String getFname() {\n        return fname;\n    }\n    public double getCgpa() {\n        return cgpa;\n    }\n}\n\nclass CombinedComparator implements Comparator&lt;Student&gt;{\n    @Override\n     public int compare(Student student1, Student student2){\n         int gpaComparison = Double.compare(student2.getCgpa(), student1.getCgpa());\n         \n         if(gpaComparison==0){\n             int fNameComparison= student1.getFname().compareTo(student2.getFname());\n             if(fNameComparison==0){\n                 return Integer.compare(student1.getId(), student2.getId());\n             }\n             return fNameComparison;\n         }\n         return gpaComparison;\n     }\n}\n\n//Complete the code\npublic class Solution\n{\n    public static void main(String[] args){\n        Scanner in = new Scanner(System.in);\n        int testCases = Integer.parseInt(in.nextLine());\n        \n        List&lt;Student&gt; studentList = new ArrayList&lt;Student&gt;();\n        while(testCases&gt;0){\n            int id = in.nextInt();\n            String fname = in.next();\n            double cgpa = in.nextDouble();\n            \n            Student st = new Student(id, fname, cgpa);\n            studentList.add(st);\n            \n            testCases--;\n        }\n        Collections.sort(studentList,new CombinedComparator());\n        for(Student st: studentList){\n            System.out.println(st.getFname());\n        }\n    }\n}\n</code></pre>\n<p>By the way, nearly all HackerRank problems have online solutions available. Just Google for <strong>hackerrank</strong> <em><strong>name of problem</strong></em> <strong>solution</strong>. So for your problem, I Googled:</p>\n<blockquote>\n<p>hackerrank java sort solution</p>\n</blockquote>\n<p>First result was:<br />\n<a href=\"https://programs.programmingoneonone.com/2021/02/hackerrank-java-sort-solution.html\" rel=\"nofollow noreferrer\">https://programs.programmingoneonone.com/2021/02/hackerrank-java-sort-solution.html</a></p>\n"}],"owner":{"account_id":29026225,"reputation":11,"user_id":22234315,"display_name":"Kavindu Gamage"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696146941,"creation_date":1696136368,"question_id":77209297,"body_markdown":"You are given a list of student information: ID, FirstName, and CGPA. Your task is to rearrange them according to their CGPA in decreasing order. If two student have the same CGPA, then arrange them according to their first name in alphabetical order. If those two students also have the same first name, then order them according to their ID. No two students have the same ID.\r\n**Hint:** You can use comparators to sort a list of objects. See the oracle docs to learn about comparators.\r\n\r\n**Input Format**\r\nThe first line of input contains an integer N , representing the total number of students. The next N lines contains a list of student information in the following structure:\r\n`ID Name CGPA`\r\n\r\n**Constraints**\r\n2≤N≤1000\r\n0≤ID≤1000000\r\n5≤|Name|≤305\r\n0≤CGPA≤4.000\r\n\r\nThe name contains only lowercase English letters. The **ID** contains only integer numbers without leading zeros. The CGPA will contain, at most, 2 digits after the decimal point.\r\n\r\n**Output Format**\r\nAfter rearranging the students according to the above rules, print the first name of each student on a separate line.\r\n\r\n**Sample Input**\r\n5\r\n33 Rumpa 3.68\r\n85 Ashis 3.85\r\n56 Samiha 3.75\r\n19 Samara 3.75\r\n22 Fahim 3.76\r\n\r\n**Sample Output**\r\nAshis\r\nFahim\r\nSamara\r\nSamiha\r\nRumpa\r\n\r\n**This is my code;**\r\n\r\n```\r\nimport java.util.*;\r\n\r\nclass Student{\r\n    private int id;\r\n    private String fname;\r\n    private double cgpa;\r\n    public Student(int id, String fname, double cgpa) {\r\n        super();\r\n        this.id = id;\r\n        this.fname = fname;\r\n        this.cgpa = cgpa;\r\n    }\r\n    public int getId() {\r\n        return id;\r\n    }\r\n    public String getFname() {\r\n        return fname;\r\n    }\r\n    public double getCgpa() {\r\n        return cgpa;\r\n    }\r\n}\r\n\r\n\r\nclass CombinedComparator implements Comparator&lt;Student&gt;{\r\n    @Override\r\n     public int compare(Student student1, Student student2){\r\n         int gpaComparison = Double.compare(student2.getCgpa(), student1.getCgpa());\r\n         \r\n         if(gpaComparison==0){\r\n             int fNameComparison= student1.getFname().toLowerCase().compareToIgnoreCase(student2.getFname().toLowerCase());\r\n             if(fNameComparison==0){\r\n                 return Integer.compare(student1.getId(), student2.getId());\r\n             }\r\n             return fNameComparison;\r\n         }\r\n         return gpaComparison;\r\n     }\r\n}\r\n\r\n\r\n//Complete the code\r\npublic class Solution\r\n{\r\n    public static void main(String[] args){\r\n        Scanner in = new Scanner(System.in);\r\n        int testCases = Integer.parseInt(in.nextLine());\r\n        \r\n        List&lt;Student&gt; studentList = new ArrayList&lt;Student&gt;();\r\n        while(testCases&gt;0){\r\n            int id = in.nextInt();\r\n            String fname = in.next();\r\n            double cgpa = in.nextDouble();\r\n\r\n            \r\n            Student st = new Student(id, fname, cgpa);\r\n            studentList.add(st);\r\n            \r\n            testCases--;\r\n        }\r\n        Collections.sort(studentList, new CombinedComparator());\r\n        \r\n        \r\n          for(Student st: studentList){\r\n            System.out.println(st.getFname());\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n```","title":"I have a question on HackerRank where some test cases pass for this code, and some do not","body":"<p>You are given a list of student information: ID, FirstName, and CGPA. Your task is to rearrange them according to their CGPA in decreasing order. If two student have the same CGPA, then arrange them according to their first name in alphabetical order. If those two students also have the same first name, then order them according to their ID. No two students have the same ID.\n<strong>Hint:</strong> You can use comparators to sort a list of objects. See the oracle docs to learn about comparators.</p>\n<p><strong>Input Format</strong>\nThe first line of input contains an integer N , representing the total number of students. The next N lines contains a list of student information in the following structure:\n<code>ID Name CGPA</code></p>\n<p><strong>Constraints</strong>\n2≤N≤1000\n0≤ID≤1000000\n5≤|Name|≤305\n0≤CGPA≤4.000</p>\n<p>The name contains only lowercase English letters. The <strong>ID</strong> contains only integer numbers without leading zeros. The CGPA will contain, at most, 2 digits after the decimal point.</p>\n<p><strong>Output Format</strong>\nAfter rearranging the students according to the above rules, print the first name of each student on a separate line.</p>\n<p><strong>Sample Input</strong>\n5\n33 Rumpa 3.68\n85 Ashis 3.85\n56 Samiha 3.75\n19 Samara 3.75\n22 Fahim 3.76</p>\n<p><strong>Sample Output</strong>\nAshis\nFahim\nSamara\nSamiha\nRumpa</p>\n<p><strong>This is my code;</strong></p>\n<pre><code>import java.util.*;\n\nclass Student{\n    private int id;\n    private String fname;\n    private double cgpa;\n    public Student(int id, String fname, double cgpa) {\n        super();\n        this.id = id;\n        this.fname = fname;\n        this.cgpa = cgpa;\n    }\n    public int getId() {\n        return id;\n    }\n    public String getFname() {\n        return fname;\n    }\n    public double getCgpa() {\n        return cgpa;\n    }\n}\n\n\nclass CombinedComparator implements Comparator&lt;Student&gt;{\n    @Override\n     public int compare(Student student1, Student student2){\n         int gpaComparison = Double.compare(student2.getCgpa(), student1.getCgpa());\n         \n         if(gpaComparison==0){\n             int fNameComparison= student1.getFname().toLowerCase().compareToIgnoreCase(student2.getFname().toLowerCase());\n             if(fNameComparison==0){\n                 return Integer.compare(student1.getId(), student2.getId());\n             }\n             return fNameComparison;\n         }\n         return gpaComparison;\n     }\n}\n\n\n//Complete the code\npublic class Solution\n{\n    public static void main(String[] args){\n        Scanner in = new Scanner(System.in);\n        int testCases = Integer.parseInt(in.nextLine());\n        \n        List&lt;Student&gt; studentList = new ArrayList&lt;Student&gt;();\n        while(testCases&gt;0){\n            int id = in.nextInt();\n            String fname = in.next();\n            double cgpa = in.nextDouble();\n\n            \n            Student st = new Student(id, fname, cgpa);\n            studentList.add(st);\n            \n            testCases--;\n        }\n        Collections.sort(studentList, new CombinedComparator());\n        \n        \n          for(Student st: studentList){\n            System.out.println(st.getFname());\n        }\n    }\n}\n\n\n\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate"],"owner":{"account_id":29573249,"reputation":1,"user_id":22664877,"display_name":"Tushar Arora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696145978,"creation_date":1696144554,"question_id":77209557,"body_markdown":"&gt;Error | Getting org.springframework.dao.CannotAcquireLockException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.LockAcquisitionException: could not execute statement\r\n\r\n\r\nI have a code, which is updating and inserting 50 records in a batch at a time.\r\n\r\n```\r\nvoid updateAndInsert(List&lt;UserData&gt; userDataList) {\r\n    for(List&lt;UserData&gt; userData : Lists.partition(userDataList, 50)) {\r\n        updateRecords(userData);\r\n        insertRecords(userData);\r\n    }\r\n}\r\n\r\nupdateRecords(List&lt;UserData&gt; userData) {\r\n       return em.createNamedQuery(&quot;updateUserData&quot;).setParameter(&quot;userData&quot;,         userData).executeUpdate();\r\n}\r\n\r\nupdateRecords(List&lt;UserData&gt; userData) {\r\n       //  Insert in batch of 50\r\n}\r\n```\r\n\r\n\r\nAnd also inserting 50 records at a time.\r\n\r\n\r\n\r\nThis code is working fine, when calling updateAndInsert from single thread.\r\n\r\nBut it is giving CannotAcquireLockException when calling the updateAndInsert method from multiple threads. I have the requirement to call this method for a batch from parallel. Is there any way to avoid this exception.\r\n\r\nCan I apply wait for some time whenever got this exception and again try to insert or update in database.\r\n\r\n\r\n\r\nI want to insert and update records in batches of 50 from multiple threads, without any exception.","title":"Error | Getting org.springframework.dao.CannotAcquireLockException: org.hibernate.exception.LockAcquisitionException: could not execute statement","body":"<blockquote>\n<p>Error | Getting org.springframework.dao.CannotAcquireLockException: could not execute statement; SQL [n/a]; nested exception is org.hibernate.exception.LockAcquisitionException: could not execute statement</p>\n</blockquote>\n<p>I have a code, which is updating and inserting 50 records in a batch at a time.</p>\n<pre><code>void updateAndInsert(List&lt;UserData&gt; userDataList) {\n    for(List&lt;UserData&gt; userData : Lists.partition(userDataList, 50)) {\n        updateRecords(userData);\n        insertRecords(userData);\n    }\n}\n\nupdateRecords(List&lt;UserData&gt; userData) {\n       return em.createNamedQuery(&quot;updateUserData&quot;).setParameter(&quot;userData&quot;,         userData).executeUpdate();\n}\n\nupdateRecords(List&lt;UserData&gt; userData) {\n       //  Insert in batch of 50\n}\n</code></pre>\n<p>And also inserting 50 records at a time.</p>\n<p>This code is working fine, when calling updateAndInsert from single thread.</p>\n<p>But it is giving CannotAcquireLockException when calling the updateAndInsert method from multiple threads. I have the requirement to call this method for a batch from parallel. Is there any way to avoid this exception.</p>\n<p>Can I apply wait for some time whenever got this exception and again try to insert or update in database.</p>\n<p>I want to insert and update records in batches of 50 from multiple threads, without any exception.</p>\n"},{"tags":["java","arrays","stack"],"comments":[{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1696123060,"post_id":77208879,"comment_id":136113100,"body_markdown":"Why dont you just use a debugger and add a breakpoint when you are pushing K and another breakpoint while printing to figure out why it doesnt work as expected?","body":"Why dont you just use a debugger and add a breakpoint when you are pushing K and another breakpoint while printing to figure out why it doesnt work as expected?"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1696126381,"post_id":77208879,"comment_id":136113225,"body_markdown":"Note that if you resize, you currently don&#39;t add the element to the resized array.","body":"Note that if you resize, you currently don&#39;t add the element to the resized array."}],"answers":[{"tags":[],"owner":{"account_id":4663157,"reputation":15204,"user_id":3776927,"display_name":"derpirscher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696144820,"creation_date":1696144820,"answer_id":77209569,"question_id":77208879,"body_markdown":"In your `push()` function you do not add the new element to the stack, when you need to resize the array. You just copy the current stack and forget about the new element, because the actual adding to the stack is contained in the `else` branch which is only executed when the `if` brachch isn&#39;t executed. \r\n\r\nThe simplest is probably, just to make the content of the `else` branch to be executed unconditionally. \r\n\r\n    public void push(String elements)\r\n    {\r\n        if(topOfStack == theStack.length - 1)\r\n        {\r\n            int reallocateSize = (theStack.length) * 2;\r\n            String [] newStack = new String[reallocateSize];\r\n            System.arraycopy(theStack, 0, newStack, 0, theStack.length);\r\n            theStack = newStack;\r\n        }\r\n        theStack[++topOfStack] = elements;\r\n    }\r\n","title":"Unbounded array-based list output not showing up on display after reallocation?","body":"<p>In your <code>push()</code> function you do not add the new element to the stack, when you need to resize the array. You just copy the current stack and forget about the new element, because the actual adding to the stack is contained in the <code>else</code> branch which is only executed when the <code>if</code> brachch isn't executed.</p>\n<p>The simplest is probably, just to make the content of the <code>else</code> branch to be executed unconditionally.</p>\n<pre><code>public void push(String elements)\n{\n    if(topOfStack == theStack.length - 1)\n    {\n        int reallocateSize = (theStack.length) * 2;\n        String [] newStack = new String[reallocateSize];\n        System.arraycopy(theStack, 0, newStack, 0, theStack.length);\n        theStack = newStack;\n    }\n    theStack[++topOfStack] = elements;\n}\n</code></pre>\n"}],"owner":{"account_id":29572028,"reputation":1,"user_id":22663960,"display_name":"Shan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696144917,"creation_date":1696121035,"question_id":77208879,"body_markdown":"```\r\n\r\npublic class stackCode\r\n{\r\n    private String[] theStack; //the array-based stack  \r\n    private int stackSize = 10; //the size of stack\r\n    private int topOfStack; //top of stack\r\n\r\n    public stackCode()\r\n    {//this is building or initializing the stack within the stack \r\n        theStack = new String[stackSize]; //the elements within the stack \r\n        topOfStack = -1;\r\n    }\r\n    \r\n    public void push(String elements)\r\n    {\r\n        if(topOfStack == theStack.length - 1)\r\n        {\r\n            int reallocateSize = (theStack.length) * 2;\r\n            String [] newStack = new String[reallocateSize];\r\n            System.arraycopy(theStack, 0, newStack, 0, theStack.length);\r\n            theStack = newStack;\r\n        }\r\n        else{\r\n            theStack[++topOfStack] = elements;\r\n        }\r\n    }\r\n\r\n    public String pop()\r\n    {\r\n        if(isEmpty())\r\n        {\r\n            System.out.println(&quot;Stack is empty, please fill in with new values.&quot;);\r\n            return null;\r\n        }\r\n        return theStack[topOfStack--];\r\n    }\r\n\r\n     \r\n    public void peek(int index)\r\n    {\r\n        if(isEmpty())\r\n        {\r\n            System.out.println(&quot;Stack is empty. No values to see&quot;);\r\n        }\r\n        else{\r\n            System.out.println(theStack[index]);\r\n        }\r\n    }\r\n    public boolean isEmpty()\r\n    {\r\n        return topOfStack == -1; \r\n    }\r\n    public void print()\r\n    {\r\n        if(isEmpty())\r\n        {\r\n            System.out.println(&quot;Stack is empty&quot;);\r\n        }\r\n        else {\r\n            for(int i = topOfStack; i &gt;= 0; i--)\r\n            {\r\n                System.out.println(theStack[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\npublic static void main(String [] args)\r\n{\r\n    stackCode theFirstStack = new stackCode();\r\n    theFirstStack.push(&quot;A&quot;);\r\n    theFirstStack.push(&quot;B&quot;);\r\n    theFirstStack.push(&quot;C&quot;);\r\n    theFirstStack.push(&quot;D&quot;);\r\n    theFirstStack.push(&quot;E&quot;);\r\n    theFirstStack.push(&quot;F&quot;);\r\n    theFirstStack.push(&quot;G&quot;);\r\n    theFirstStack.push(&quot;H&quot;);\r\n    theFirstStack.push(&quot;I&quot;);\r\n    theFirstStack.push(&quot;J&quot;);\r\n    theFirstStack.push(&quot;K&quot;);\r\n    theFirstStack.push(&quot;L&quot;);\r\n    theFirstStack.push(&quot;M&quot;);\r\n    theFirstStack.print();\r\n    \r\n}\r\n\r\n}\r\n```\r\n\r\n\r\nHello! I am attempting to create an unbounded stack with an initial allocation size of 10 without using any library functions. I have set up the code where the allocation size doubles when the length of the stack equals the allocation size, but when I go to print out the whole stack for the output, all the elements are dsiplayed except for the 11th element (&quot;K&quot;). \r\n\r\nI tried playing with the constructor and the `push` function a bit. &quot;K&quot; does display when I change the `topOfStack == 0`, but I was taught that it should be initialized to -1 to indicate that the stack is empty initially. Could someone help to explain what I am doing wrong/if I am missing something? I am new to java and coding in general so I would greatly appreciate a reason behind the solution or behind the mistake I made. Thanks! ","title":"Unbounded array-based list output not showing up on display after reallocation?","body":"<pre><code>\npublic class stackCode\n{\n    private String[] theStack; //the array-based stack  \n    private int stackSize = 10; //the size of stack\n    private int topOfStack; //top of stack\n\n    public stackCode()\n    {//this is building or initializing the stack within the stack \n        theStack = new String[stackSize]; //the elements within the stack \n        topOfStack = -1;\n    }\n    \n    public void push(String elements)\n    {\n        if(topOfStack == theStack.length - 1)\n        {\n            int reallocateSize = (theStack.length) * 2;\n            String [] newStack = new String[reallocateSize];\n            System.arraycopy(theStack, 0, newStack, 0, theStack.length);\n            theStack = newStack;\n        }\n        else{\n            theStack[++topOfStack] = elements;\n        }\n    }\n\n    public String pop()\n    {\n        if(isEmpty())\n        {\n            System.out.println(&quot;Stack is empty, please fill in with new values.&quot;);\n            return null;\n        }\n        return theStack[topOfStack--];\n    }\n\n     \n    public void peek(int index)\n    {\n        if(isEmpty())\n        {\n            System.out.println(&quot;Stack is empty. No values to see&quot;);\n        }\n        else{\n            System.out.println(theStack[index]);\n        }\n    }\n    public boolean isEmpty()\n    {\n        return topOfStack == -1; \n    }\n    public void print()\n    {\n        if(isEmpty())\n        {\n            System.out.println(&quot;Stack is empty&quot;);\n        }\n        else {\n            for(int i = topOfStack; i &gt;= 0; i--)\n            {\n                System.out.println(theStack[i]);\n            }\n        }\n    }\n\n\n\npublic static void main(String [] args)\n{\n    stackCode theFirstStack = new stackCode();\n    theFirstStack.push(&quot;A&quot;);\n    theFirstStack.push(&quot;B&quot;);\n    theFirstStack.push(&quot;C&quot;);\n    theFirstStack.push(&quot;D&quot;);\n    theFirstStack.push(&quot;E&quot;);\n    theFirstStack.push(&quot;F&quot;);\n    theFirstStack.push(&quot;G&quot;);\n    theFirstStack.push(&quot;H&quot;);\n    theFirstStack.push(&quot;I&quot;);\n    theFirstStack.push(&quot;J&quot;);\n    theFirstStack.push(&quot;K&quot;);\n    theFirstStack.push(&quot;L&quot;);\n    theFirstStack.push(&quot;M&quot;);\n    theFirstStack.print();\n    \n}\n\n}\n</code></pre>\n<p>Hello! I am attempting to create an unbounded stack with an initial allocation size of 10 without using any library functions. I have set up the code where the allocation size doubles when the length of the stack equals the allocation size, but when I go to print out the whole stack for the output, all the elements are dsiplayed except for the 11th element (&quot;K&quot;).</p>\n<p>I tried playing with the constructor and the <code>push</code> function a bit. &quot;K&quot; does display when I change the <code>topOfStack == 0</code>, but I was taught that it should be initialized to -1 to indicate that the stack is empty initially. Could someone help to explain what I am doing wrong/if I am missing something? I am new to java and coding in general so I would greatly appreciate a reason behind the solution or behind the mistake I made. Thanks!</p>\n"},{"tags":["javascript","java","spring","spring-boot","eclipse-plugin"],"comments":[{"owner":{"account_id":3439105,"reputation":1830,"user_id":2881450,"accept_rate":100,"display_name":"jHilscher"},"score":1,"creation_date":1696077103,"post_id":77206959,"comment_id":136109515,"body_markdown":"You need to install some kind of JavaScript support.\nSomethink like this: https://eclipse.dev/webtools/jsdt/\nUse the Eclipse Marketplace.","body":"You need to install some kind of JavaScript support. Somethink like this: <a href=\"https://eclipse.dev/webtools/jsdt/\" rel=\"nofollow noreferrer\">eclipse.dev/webtools/jsdt</a> Use the Eclipse Marketplace."},{"owner":{"account_id":29567791,"reputation":1,"user_id":22660740,"display_name":"Shahezad"},"score":0,"creation_date":1696140651,"post_id":77206959,"comment_id":136113896,"body_markdown":"Tried but getting error while installing . Updating my question with images","body":"Tried but getting error while installing . Updating my question with images"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":2,"creation_date":1696144126,"post_id":77206959,"comment_id":136114105,"body_markdown":"Better avoid plugins like codemix or other plugins from the same vendor as they patch Eclipse via loadtime weaving which can cause issues and slow down Eclipse (the vendor of this plugin tries to cheat the open source license of Eclipse by doing so). The problem seems to be that you run your quite old version (which is more than two years and 9 releases behind) of Eclipse with Java 9, but current STS and Eclipse versions require Java 17 or higher to run. Consider do a fresh installation of current Eclipse or STS containing Java 17 and latest JavaScript support via Eclipse Wild Web Developer.","body":"Better avoid plugins like codemix or other plugins from the same vendor as they patch Eclipse via loadtime weaving which can cause issues and slow down Eclipse (the vendor of this plugin tries to cheat the open source license of Eclipse by doing so). The problem seems to be that you run your quite old version (which is more than two years and 9 releases behind) of Eclipse with Java 9, but current STS and Eclipse versions require Java 17 or higher to run. Consider do a fresh installation of current Eclipse or STS containing Java 17 and latest JavaScript support via Eclipse Wild Web Developer."}],"owner":{"account_id":29567791,"reputation":1,"user_id":22660740,"display_name":"Shahezad"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696143605,"creation_date":1696076165,"question_id":77206959,"body_markdown":"I have installed STS 3.9.17. I have created basic spring boot application.\r\nWhenever I am creating javascript file it is working as text file only that&#39;s syntax coloring and syntax checking according toJS not working in STS tool.\r\nI tried to change setting in Preferences -&gt; client JS -&gt; Enable syntax coloring but it disabled.\r\nI tried to install codemix as well as web developer tool. I am getting error in that also.\r\n\r\nGetting following error while trying to install codemix or web developer tools:\r\n\r\n    Cannot complete the install because some dependencies are not satisfiable\r\n      Software being installed: a.jre.javase 9.0.0\r\n      Software currently installed: Spring Tool Suite 3.9.17.202106211301-RELEASE-e418 (org.springsource.sts.ide 3.9.17.202106211301-RELEASE-e418)\r\n      Cannot satisfy dependency:\r\n        From: Spring Tool Suite 3.9.17.202106211301-RELEASE-e418 (org.springsource.sts.ide 3.9.17.202106211301-RELEASE-e418)\r\n        To: org.eclipse.equinox.p2.iu; a.jre.javase [9.0.0,9.0.0]\r\n\r\nPlease let me know solutions.\r\nThanks!\r\n[web developer tool error][1]\r\n[Spring](https://i.stack.imgur.com/KgyzG.png)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FrK5i.png","title":"Javascript file detected as text file hence no no syntax coloring and check working","body":"<p>I have installed STS 3.9.17. I have created basic spring boot application.\nWhenever I am creating javascript file it is working as text file only that's syntax coloring and syntax checking according toJS not working in STS tool.\nI tried to change setting in Preferences -&gt; client JS -&gt; Enable syntax coloring but it disabled.\nI tried to install codemix as well as web developer tool. I am getting error in that also.</p>\n<p>Getting following error while trying to install codemix or web developer tools:</p>\n<pre><code>Cannot complete the install because some dependencies are not satisfiable\n  Software being installed: a.jre.javase 9.0.0\n  Software currently installed: Spring Tool Suite 3.9.17.202106211301-RELEASE-e418 (org.springsource.sts.ide 3.9.17.202106211301-RELEASE-e418)\n  Cannot satisfy dependency:\n    From: Spring Tool Suite 3.9.17.202106211301-RELEASE-e418 (org.springsource.sts.ide 3.9.17.202106211301-RELEASE-e418)\n    To: org.eclipse.equinox.p2.iu; a.jre.javase [9.0.0,9.0.0]\n</code></pre>\n<p>Please let me know solutions.\nThanks!\n<a href=\"https://i.stack.imgur.com/FrK5i.png\" rel=\"nofollow noreferrer\">web developer tool error</a>\n<a href=\"https://i.stack.imgur.com/KgyzG.png\" rel=\"nofollow noreferrer\">Spring</a></p>\n"},{"tags":["java","hibernate","connection"],"comments":[{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1696262969,"post_id":77209522,"comment_id":136127604,"body_markdown":"Where are you calling `validate(username, password)` function? Also try to change query to `&quot;FROM employee e WHERE e.username = :userNameQuery&quot;`","body":"Where are you calling <code>validate(username, password)</code> function? Also try to change query to <code>&quot;FROM employee e WHERE e.username = :userNameQuery&quot;</code>"},{"owner":{"account_id":27485390,"reputation":1,"user_id":20971732,"display_name":"Huỳnh Khả Phi"},"score":0,"creation_date":1697130017,"post_id":77209522,"comment_id":136244170,"body_markdown":"Thank you. Problem was solved. I added `configuration.addAnnotatedClass(net.employeeregjdbc.model.Employee.class);` into HibernateUtil.java\nSorry for the lack of information provided","body":"Thank you. Problem was solved. I added <code>configuration.addAnnotatedClass(net.employeeregjdbc.model.Em&zwnj;&#8203;ployee.class);</code> into HibernateUtil.java Sorry for the lack of information provided"}],"owner":{"account_id":27485390,"reputation":1,"user_id":20971732,"display_name":"Huỳnh Khả Phi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696143579,"creation_date":1696143579,"question_id":77209522,"body_markdown":"I&#39;m learning how to use Hibernate with Servlet. And this error appeared on console:\r\n```\r\njava.lang.IllegalStateException: org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl@1b79d968 is closed\r\n```\r\nI&#39;ve tried to find the previous solution but there isn&#39;t any. I tried to use session.close() but it didn&#39;t  work. The browser stuck on loading. And when I restarted the tomcat, it can&#39;t response for a while.\r\n\r\nPlease help me. Thank in advance.\r\n\r\n\r\n**My jars:**\r\n\r\n- antlr-2.7.7\r\n- byte-buddy-1.8.17\r\n- classmate-1.3.4\r\n- dom4j-2.1.1\r\n- hibernate-commons-annotations-5.0.4.Final\r\n- hibernate-core-5.3.7.Final\r\n- jandex-2.0.5.Final\r\n- javassist-3.23.1-GA\r\n- javax.activation-1.2.0\r\n- javax.activation-api-1.2.0\r\n- javax.persistence-api-2.2\r\n- jaxb-api-2.3.0\r\n- jaxb-core-2.3.0\r\n- jaxb-impl-2.3.0\r\n- jboss-logging-3.3.2.Final\r\n- jboss-transaction-api_1.2_spec-1.1.1.Final\r\n- jsp-api-2.2\r\n- jstl-1.2\r\n- mysql-connector-java-8.0.13\r\n- protobuf-java-3.6.1\r\n- servlet-api-2.5\r\n\r\nTomcat v9.0\r\n\r\n**EmployeeHiberDAO.java**\r\n```\r\npackage net.employeeregjdbc.dao;\r\n\r\nimport org.hibernate.Session;\r\nimport org.hibernate.Transaction;\r\n\r\nimport net.employeeregjdbc.controller.util.HibernateUtil;\r\nimport net.employeeregjdbc.model.Employee;\r\n\r\n\r\n\r\npublic class EmployeeHiberDAO {\r\n\t\r\n\t\r\n\t\r\n\tpublic void saveEmployee(Employee employee) {\r\n\t\tTransaction transaction = null;\r\n\t\ttry (Session session = HibernateUtil.getSessionFactory().openSession()) {\r\n\t\t\t\r\n\t\t\ttransaction = session.beginTransaction();\r\n\t\t\tsession.save(employee);\r\n\t\t\ttransaction.commit();\r\n\t\t\t\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\tif (transaction != null ) transaction.rollback();\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\tpublic boolean validate(String username, String password) {\r\n\t\tTransaction transaction = null;\r\n\t\tEmployee employee = null;\r\n\t\t\r\n\t\ttry (Session session = HibernateUtil.getSessionFactory().openSession()) {\r\n\t\t\ttransaction = session.beginTransaction();\r\n\t\t\temployee = (Employee) session.createQuery(&quot;FROM employee WHERE employee.username =:userNameQuery&quot;)\r\n\t\t\t\t\t.setParameter(&quot;userNameQuery&quot;, username).uniqueResult();\r\n\t\t\tSystem.out.println(employee);\r\n\t\t\tif (employee != null &amp;&amp; employee.getPassword().equals(password)) return true;\r\n\t\t\ttransaction.commit();\r\n\t\t} catch (Exception e) {\r\n\t\t\tif (transaction != null ) transaction.rollback();\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\n\r\n**Employee.java**\r\n\r\n```\r\npackage net.employeeregjdbc.model;\r\n\r\nimport java.io.Serializable;\r\n\r\nimport javax.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;employee&quot;)\r\npublic class Employee implements Serializable {\r\n\tpublic Employee() {\r\n\t\tsuper();\r\n\t}\r\n\t\r\n\tprivate static long searialVersionUID = 1L;\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\tprivate int id;\r\n\t@Column(name = &quot;name&quot;)\r\n\tprivate String name;\r\n\t@Column(name = &quot;username&quot;)\r\n\tprivate String username;\r\n\t@Column(name = &quot;password&quot;)\r\n\tprivate String password;\r\n\t@Column(name = &quot;note&quot;)\r\n\tprivate String note;\r\n\t\r\n\t\r\n\tpublic Employee(int id, String name, String username, String password, String note) {\r\n\t\tsuper();\r\n\t\tthis.name = name;\r\n\t\tthis.username = username;\r\n\t\tthis.password = password;\r\n\t\tthis.note = note;\r\n\t}\r\n\t\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\tpublic String getUsername() {\r\n\t\treturn username;\r\n\t}\r\n\tpublic void setUsername(String username) {\r\n\t\tthis.username = username;\r\n\t}\r\n\tpublic String getPassword() {\r\n\t\treturn password;\r\n\t}\r\n\tpublic void setPassword(String password) {\r\n\t\tthis.password = password;\r\n\t}\r\n\tpublic String getNote() {\r\n\t\treturn note;\r\n\t}\r\n\tpublic void setNote(String note) {\r\n\t\tthis.note = note;\r\n\t}\r\n\t\r\n}\r\n\r\n````\r\n\r\n**On console:**\r\n```\r\nOct 01, 2023 1:37:45 PM org.hibernate.Version logVersion\r\nINFO: HHH000412: Hibernate Core {5.3.7.Final}\r\nOct 01, 2023 1:37:45 PM org.hibernate.cfg.Environment &lt;clinit&gt;\r\nINFO: HHH000206: hibernate.properties not found\r\nHibernate java config service registry was created\r\nOct 01, 2023 1:37:46 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\r\nINFO: HCANN000001: Hibernate Commons Annotations {5.0.4.Final}\r\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\nLoading class `com.mysql.jdbc.Driver&#39;. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver&#39;. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.\r\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001005: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost:3306/j2ee_registration_employee_jdbc]\r\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001001: Connection properties: {password=****, user=root}\r\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001003: Autocommit mode: false\r\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\r\nINFO: HHH000115: Hibernate connection pool size: 20 (min=1)\r\nOct 01, 2023 1:37:47 PM org.hibernate.dialect.Dialect &lt;init&gt;\r\nINFO: HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect\r\nOct 01, 2023 1:37:48 PM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\r\nINFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@54d13650] for (non-JTA) DDL execution was not in auto-commit mode; the Connection &#39;local transaction&#39; will be committed and the Connection will be set into auto-commit mode.\r\nOct 01, 2023 1:37:49 PM org.hibernate.hql.internal.QueryTranslatorFactoryInitiator initiateService\r\nINFO: HHH000397: Using ASTQueryTranslatorFactory\r\njava.lang.IllegalStateException: org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl@1b79d968 is closed\r\n\tat org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.errorIfClosed(AbstractLogicalConnectionImplementor.java:37)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:135)\r\n\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:254)\r\n\tat org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.rollback(AbstractLogicalConnectionImplementor.java:116)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.rollback(JdbcResourceLocalTransactionCoordinatorImpl.java:294)\r\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.rollback(TransactionImpl.java:139)\r\n\tat net.employeeregjdbc.dao.EmployeeHiberDAO.validate(EmployeeHiberDAO.java:44)\r\n\tat net.employeeregjdbc.controller.EmployeeLoginHiber.authenticate(EmployeeLoginHiber.java:58)\r\n\tat net.employeeregjdbc.controller.EmployeeLoginHiber.doPost(EmployeeLoginHiber.java:49)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:696)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589)\r\n```\r\n\r\n\r\n","title":"java.lang.IllegalStateException: org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl@1b79d968 is closed","body":"<p>I'm learning how to use Hibernate with Servlet. And this error appeared on console:</p>\n<pre><code>java.lang.IllegalStateException: org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl@1b79d968 is closed\n</code></pre>\n<p>I've tried to find the previous solution but there isn't any. I tried to use session.close() but it didn't  work. The browser stuck on loading. And when I restarted the tomcat, it can't response for a while.</p>\n<p>Please help me. Thank in advance.</p>\n<p><strong>My jars:</strong></p>\n<ul>\n<li>antlr-2.7.7</li>\n<li>byte-buddy-1.8.17</li>\n<li>classmate-1.3.4</li>\n<li>dom4j-2.1.1</li>\n<li>hibernate-commons-annotations-5.0.4.Final</li>\n<li>hibernate-core-5.3.7.Final</li>\n<li>jandex-2.0.5.Final</li>\n<li>javassist-3.23.1-GA</li>\n<li>javax.activation-1.2.0</li>\n<li>javax.activation-api-1.2.0</li>\n<li>javax.persistence-api-2.2</li>\n<li>jaxb-api-2.3.0</li>\n<li>jaxb-core-2.3.0</li>\n<li>jaxb-impl-2.3.0</li>\n<li>jboss-logging-3.3.2.Final</li>\n<li>jboss-transaction-api_1.2_spec-1.1.1.Final</li>\n<li>jsp-api-2.2</li>\n<li>jstl-1.2</li>\n<li>mysql-connector-java-8.0.13</li>\n<li>protobuf-java-3.6.1</li>\n<li>servlet-api-2.5</li>\n</ul>\n<p>Tomcat v9.0</p>\n<p><strong>EmployeeHiberDAO.java</strong></p>\n<pre><code>package net.employeeregjdbc.dao;\n\nimport org.hibernate.Session;\nimport org.hibernate.Transaction;\n\nimport net.employeeregjdbc.controller.util.HibernateUtil;\nimport net.employeeregjdbc.model.Employee;\n\n\n\npublic class EmployeeHiberDAO {\n    \n    \n    \n    public void saveEmployee(Employee employee) {\n        Transaction transaction = null;\n        try (Session session = HibernateUtil.getSessionFactory().openSession()) {\n            \n            transaction = session.beginTransaction();\n            session.save(employee);\n            transaction.commit();\n            \n            \n        } catch (Exception e) {\n            if (transaction != null ) transaction.rollback();\n            e.printStackTrace();\n        }\n    }\n    \n    \n    \n    public boolean validate(String username, String password) {\n        Transaction transaction = null;\n        Employee employee = null;\n        \n        try (Session session = HibernateUtil.getSessionFactory().openSession()) {\n            transaction = session.beginTransaction();\n            employee = (Employee) session.createQuery(&quot;FROM employee WHERE employee.username =:userNameQuery&quot;)\n                    .setParameter(&quot;userNameQuery&quot;, username).uniqueResult();\n            System.out.println(employee);\n            if (employee != null &amp;&amp; employee.getPassword().equals(password)) return true;\n            transaction.commit();\n        } catch (Exception e) {\n            if (transaction != null ) transaction.rollback();\n            e.printStackTrace();\n        }\n        return false;\n    }\n    \n}\n\n</code></pre>\n<p><strong>Employee.java</strong></p>\n<pre><code>package net.employeeregjdbc.model;\n\nimport java.io.Serializable;\n\nimport javax.persistence.*;\n\n@Entity\n@Table(name = &quot;employee&quot;)\npublic class Employee implements Serializable {\n    public Employee() {\n        super();\n    }\n    \n    private static long searialVersionUID = 1L;\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n    @Column(name = &quot;name&quot;)\n    private String name;\n    @Column(name = &quot;username&quot;)\n    private String username;\n    @Column(name = &quot;password&quot;)\n    private String password;\n    @Column(name = &quot;note&quot;)\n    private String note;\n    \n    \n    public Employee(int id, String name, String username, String password, String note) {\n        super();\n        this.name = name;\n        this.username = username;\n        this.password = password;\n        this.note = note;\n    }\n    \n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public String getUsername() {\n        return username;\n    }\n    public void setUsername(String username) {\n        this.username = username;\n    }\n    public String getPassword() {\n        return password;\n    }\n    public void setPassword(String password) {\n        this.password = password;\n    }\n    public String getNote() {\n        return note;\n    }\n    public void setNote(String note) {\n        this.note = note;\n    }\n    \n}\n\n</code></pre>\n<p><strong>On console:</strong></p>\n<pre><code>Oct 01, 2023 1:37:45 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {5.3.7.Final}\nOct 01, 2023 1:37:45 PM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\nHibernate java config service registry was created\nOct 01, 2023 1:37:46 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {5.0.4.Final}\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\nLoading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001005: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost:3306/j2ee_registration_employee_jdbc]\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001001: Connection properties: {password=****, user=root}\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001003: Autocommit mode: false\nOct 01, 2023 1:37:46 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\nINFO: HHH000115: Hibernate connection pool size: 20 (min=1)\nOct 01, 2023 1:37:47 PM org.hibernate.dialect.Dialect &lt;init&gt;\nINFO: HHH000400: Using dialect: org.hibernate.dialect.MySQL55Dialect\nOct 01, 2023 1:37:48 PM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\nINFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@54d13650] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.\nOct 01, 2023 1:37:49 PM org.hibernate.hql.internal.QueryTranslatorFactoryInitiator initiateService\nINFO: HHH000397: Using ASTQueryTranslatorFactory\njava.lang.IllegalStateException: org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl@1b79d968 is closed\n    at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.errorIfClosed(AbstractLogicalConnectionImplementor.java:37)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:135)\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:254)\n    at org.hibernate.resource.jdbc.internal.AbstractLogicalConnectionImplementor.rollback(AbstractLogicalConnectionImplementor.java:116)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.rollback(JdbcResourceLocalTransactionCoordinatorImpl.java:294)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.rollback(TransactionImpl.java:139)\n    at net.employeeregjdbc.dao.EmployeeHiberDAO.validate(EmployeeHiberDAO.java:44)\n    at net.employeeregjdbc.controller.EmployeeLoginHiber.authenticate(EmployeeLoginHiber.java:58)\n    at net.employeeregjdbc.controller.EmployeeLoginHiber.doPost(EmployeeLoginHiber.java:49)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:696)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\n</code></pre>\n"},{"tags":["java","gradle","junit5"],"owner":{"account_id":22397387,"reputation":1,"user_id":16608444,"display_name":"WafeTolkon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696142890,"creation_date":1695997112,"question_id":77202672,"body_markdown":"I try to change the ExecutionMode of running tests during Runtime execution but the tests are freezing. \r\n\r\nI used: \r\n- Java 11\r\n- JUnit 5 = 5.10.0\r\n- Gradle 7.6 \r\n- Playwright in docker in headless node. \r\n\r\nI used such configuration to make the parallelisation of the tests. \r\n\r\n```\r\njunit.jupiter.execution.parallel.enabled=true\r\njunit.jupiter.execution.parallel.mode.default=same_thread\r\njunit.jupiter.execution.parallel.mode.classes.default=concurrent\r\njunit.jupiter.testinstance.lifecycle.default=PER_CLASS\r\njunit.jupiter.execution.parallel.config.strategy=custom\r\njunit.jupiter.execution.parallel.config.custom.class=*.CustomStrategyParallelism\r\n```\r\n\r\n\r\nAs You see above, the test classes run in parallel and methods in the same thread.  \r\nEverything is fine with this. \r\n\r\nBut in I want to run several classes in the in the same thread by each other (sequentially) in one run, the most test class in  parallel and few class in the same thread.\r\nFor example: As I want \r\nTestClassA (tests in same thread ) - takes thread-1.  \r\nTestClassB (tests in same thread ) - takes thread-3.  \r\nTestClassC (tests in same thread ) - takes thread-5.  \r\nTestClassG (tests in same thread ) - takes thread-4.  \r\n\r\n**TestClassA finished new TestClassG takes the thread - thread-1.   \r\n**\r\n**TestClassG finished new TestClassO takes the thread - thread-1.   \r\n**\r\nTestClassB, TestClassB,  TestClassC, TestClassG run in parallel and TestClassA,TestClassG,TestClassO should run in the same thread.\r\n\r\nI used the annotation from JUnit5 @Execution(ExecutionMode.SAME_THREAD) and added to TestClassA,TestClassG,TestClassO. \r\n\r\nBut in this configuration tests are freezing during the Runtime execution.\r\nIn the console there are no logs to see what is wrong, no exceptions, just freezing.\r\n\r\nIf I remove the  @Execution(ExecutionMode.SAME_THREAD) from the test classes, tests run passed success.\r\n\r\nThanks.\r\n\r\n \r\nTried to increase the memory docker container but did not help\r\n\r\nGot Thread dump. \r\n\r\n        Threads class SMR info:\r\n    _java_thread_list=0x00007fa170000c40, length=28, elements={\r\n    0x00007fa1b8029000, 0x00007fa1b817f800, 0x00007fa1b8181800, 0x00007fa1b8186800,\r\n    0x00007fa1b8188800, 0x00007fa1b818a800, 0x00007fa1b818d000, 0x00007fa1b818f000,\r\n    0x00007fa1b81a4800, 0x00007fa1b8c88800, 0x00007fa1b8cd4000, 0x00007fa1b8cd5000,\r\n    0x00007fa1b9510000, 0x00007fa11004c000, 0x00007fa11005d000, 0x00007fa114001000,\r\n    0x00007fa108001000, 0x00007fa11005e000, 0x00007fa110060000, 0x00007fa114022800,\r\n    0x00007fa0f80a4000, 0x00007fa1140ca000, 0x00007fa0f8610000, 0x00007fa1142bb800,\r\n    0x00007fa114216000, 0x00007fa0f80a5800, 0x00007fa0f80c8800, 0x00007fa170004800\r\n    }\r\n    \r\n    &quot;Test worker&quot; #1 prio=5 os_prio=0 cpu=3111.48ms elapsed=5125.63s tid=0x00007fa1b8029000 nid=0x13c in Object.wait()  [0x00007fa1bc178000]\r\n       java.lang.Thread.State: WAITING (on object monitor)\r\n            at java.lang.Object.wait(java.base@11.0.20.1/Native Method)\r\n            - waiting on &lt;0x00000000c3b09a00&gt; (a org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask)\r\n            at java.util.concurrent.ForkJoinTask.externalInterruptibleAwaitDone(java.base@11.0.20.1/ForkJoinTask.java:356)\r\n            - waiting to re-lock in wait() &lt;0x00000000c3b09a00&gt; (a org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask)\r\n            at java.util.concurrent.ForkJoinTask.get(java.base@11.0.20.1/ForkJoinTask.java:1004) \r\n    \r\n    &quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 cpu=23.27ms elapsed=5125.62s tid=0x00007fa1b817f800 nid=0x148 waiting on condition  [0x00007fa191ffe000]\r\n       java.lang.Thread.State: RUNNABLE\r\n            at java.lang.ref.Reference.waitForReferencePendingList(java.base@11.0.20.1/Native Method) \r\n    \r\n    Finalizer&quot; #3 daemon prio=8 os_prio=0 cpu=711.13ms elapsed=5125.62s tid=0x00007fa1b8181800 nid=0x149 in Object.wait()  [0x00007fa191efe000]\r\n       java.lang.Thread.State: WAITING (on object monitor)\r\n            at java.lang.Object.wait(java.base@11.0.20.1/Native Method)\r\n            - waiting on &lt;no object reference available&gt;\r\n    \r\n    Signal Dispatcher&quot; #4 daemon prio=9 os_prio=0 cpu=0.47ms elapsed=5125.61s tid=0x00007fa1b8186800 nid=0x14a runnable  [0x0000000000000000]\r\n       java.lang.Thread.State: RUNNABLE\r\n    \r\n    &quot;Service Thread&quot; #5 daemon prio=9 os_prio=0 cpu=0.23ms elapsed=5125.61s tid=0x00007fa1b8188800 nid=0x14b runnable  [0x0000000000000000]\r\n       java.lang.Thread.State: RUNNABLE\r\n    \r\n    &quot;C2 CompilerThread0&quot; #6 daemon prio=9 os_prio=0 cpu=55854.38ms elapsed=5125.61s tid=0x00007fa1b818a800 nid=0x14c waiting on condition  [0x0000000000000000]\r\n       java.lang.Thread.State: RUNNABLE\r\n       No compile task\r\n    \r\n    &quot;C1 CompilerThread0&quot; #9 daemon prio=9 os_prio=0 cpu=7449.78ms elapsed=5125.61s tid=0x00007fa1b818d000 nid=0x14d waiting on condition  [0x0000000000000000]\r\n       java.lang.Thread.State: RUNNABLE\r\n       No compile task\r\n    \r\n    &quot;Sweeper thread&quot; #10 daemon prio=9 os_prio=0 cpu=151.99ms elapsed=5125.61s tid=0x00007fa1b818f000 nid=0x14e runnable  [0x0000000000000000]\r\n       java.lang.Thread.State: RUNNABLE\r\n    \r\n    \r\n    &quot;Common-Cleaner&quot; #11 daemon prio=8 os_prio=0 cpu=11.24ms elapsed=5125.58s tid=0x00007fa1b81a4800 nid=0x14f in Object.wait()  [0x00007fa1918fe000]\r\n       java.lang.Thread.State: TIMED_WAITING (on object monitor)\r\n            at java.lang.Object.wait(java.base@11.0.20.1/Native Method)\r\n    \r\n    &quot;/127.0.0.1:38124 to /127.0.0.1:44321 workers&quot; #13 prio=5 os_prio=0 cpu=16.22ms elapsed=5125.00s tid=0x00007fa1b8c88800 nid=0x158 waiting on condition  [0x00007fa1911f8000]\r\n       java.lang.Thread.State: WAITING (parking) \r\n    \r\n    \r\n    &quot;/127.0.0.1:38124 to /127.0.0.1:44321 workers Thread 2&quot; #14 prio=5 os_prio=0 cpu=261.53ms elapsed=5124.99s tid=0x00007fa1b8cd4000 nid=0x159 waiting on condition  [0x00007fa190ef8000]\r\n       java.lang.Thread.State: WAITING (parking)\r\n    \r\n    &quot;/127.0.0.1:38124 to /127.0.0.1:44321 workers Thread 3&quot; #15 prio=5 os_prio=0 cpu=10.05ms elapsed=5124.99s tid=0x00007fa1b8cd5000 nid=0x15a runnable  [0x00007fa190df8000]\r\n       java.lang.Thread.State: RUNNABLE\r\n            at sun.nio.ch.EPoll.wait(java.base@11.0.20.1/Native Method)\r\n    \r\n    &quot;ForkJoinPool-1-worker-3&quot; #16 daemon prio=5 os_prio=0 cpu=464014.46ms elapsed=5122.26s tid=0x00007fa1b9510000 nid=0x165 waiting on condition  [0x00007fa11f5fd000]\r\n       java.lang.Thread.State: WAITING (parking)\r\n            at jdk.internal.misc.Unsafe.park(java.base@11.0.20.1/Native Method) \r\n    \r\n    \r\n    &quot;ForkJoinPool-1-worker-5&quot; #17 daemon prio=5 os_prio=0 cpu=30368.82ms elapsed=5122.21s tid=0x00007fa11004c000 nid=0x166 waiting on condition  [0x00007fa11f4fd000]\r\n       java.lang.Thread.State: TIMED_WAITING (parking) \r\n    \r\n    \r\n    &quot;ForkJoinPool-1-worker-7&quot; #18 daemon prio=5 os_prio=0 cpu=7436.00ms elapsed=5122.21s tid=0x00007fa11005d000 nid=0x167 waiting on condition  [0x00007fa11f3fe000]\r\n       java.lang.Thread.State: WAITING (parking) \r\n    \r\n    \r\n    &quot;ForkJoinPool-1-worker-9&quot; #19 daemon prio=5 os_prio=0 cpu=13860.08ms elapsed=5122.20s tid=0x00007fa114001000 nid=0x168 waiting on condition  [0x00007fa11f2fe000]\r\n       java.lang.Thread.State: WAITING (parking) \r\n    \r\n    \r\n    &quot;ForkJoinPool-1-worker-13&quot; #21 daemon prio=5 os_prio=0 cpu=8765.08ms elapsed=5122.20s tid=0x00007fa108001000 nid=0x169 waiting on condition  [0x00007fa11f1fe000]\r\n       java.lang.Thread.State: WAITING (parking) \r\n    \r\n    \r\n    &quot;ForkJoinPool-1-worker-11&quot; #20 daemon prio=5 os_prio=0 cpu=7355.41ms elapsed=5122.20s tid=0x00007fa11005e000 nid=0x16a waiting on condition  [0x00007fa11f0fe000]\r\n       java.lang.Thread.State: WAITING (parking)\r\n            at jdk.internal.misc.Unsafe.park(java.base@11.0.20.1/Native Method)\r\n    \r\n    \r\n    &quot;ForkJoinPool-1-worker-15&quot; #22 daemon prio=5 os_prio=0 cpu=30042.77ms elapsed=5122.20s tid=0x00007fa110060000 nid=0x16b waiting on condition  [0x00007fa11effd000]\r\n       java.lang.Thread.State: TIMED_WAITING (parking) \r\n    \r\n    \r\n    &quot;process reaper (pid 29293)&quot; #29 daemon prio=10 os_prio=0 cpu=10.90ms elapsed=5121.26s tid=0x00007fa114022800 nid=0x19c runnable  [0x00007fa198086000]\r\n       java.lang.Thread.State: RUNNABLE \r\n    \r\n    \r\n    &quot;process reaper (pid 29474)&quot; #25 daemon prio=10 os_prio=0 cpu=8.41ms elapsed=5121.26s tid=0x00007fa0f80a4000 nid=0x1b4 runnable  [0x00007fa1900a2000]\r\n       java.lang.Thread.State: RUNNABLE \r\n    \r\n    &quot;ForkJoinPool.commonPool-worker-5&quot; #45 daemon prio=5 os_prio=0 cpu=22.57ms elapsed=5118.99s tid=0x00007fa1140ca000 nid=0x5b8 waiting on condition  [0x00007fa11cbfe000]\r\n       java.lang.Thread.State: WAITING (parking) \r\n    \r\n    &quot;Java2D Disposer&quot; #160 daemon prio=10 os_prio=0 cpu=1.71ms elapsed=4306.39s tid=0x00007fa0f8610000 nid=0x44f8 in Object.wait()  [0x00007fa11defe000]\r\n       java.lang.Thread.State: WAITING (on object monitor)\r\n            at java.lang.Object.wait(java.base@11.0.20.1/Nati \r\n    \r\n    \r\n    Thread-215&quot; #246 daemon prio=5 os_prio=0 cpu=22.48ms elapsed=3610.22s tid=0x00007fa1142bb800 nid=0x726e runnable  [0x00007fa11dffe000]\r\n       java.lang.Thread.State: RUNNABLE \r\n    \r\n       \r\n    &quot;VM Thread&quot; os_prio=0 cpu=1139.49ms elapsed=5125.62s tid=0x00007fa1b817c800 nid=0x147 runnable  \r\n    &quot;GC Thread#0&quot; os_prio=0 cpu=1284.26ms elapsed=5125.63s tid=0x00007fa1b8041000 nid=0x13e runnable  \r\n    &quot;GC Thread#1&quot; os_prio=0 cpu=1291.54ms elapsed=5125.28s tid=0x00007fa184001000 nid=0x152 runnable  \r\n    &quot;GC Thread#2&quot; os_prio=0 cpu=1363.65ms elapsed=5125.28s tid=0x00007fa184002800 nid=0x153 runnable  \r\n    &quot;GC Thread#3&quot; os_prio=0 cpu=1236.08ms elapsed=5124.61s tid=0x00007fa184005800 nid=0x15c runnable  \r\n    &quot;GC Thread#4&quot; os_prio=0 cpu=1357.65ms elapsed=5124.61s tid=0x00007fa184007000 nid=0x15d runnable  \r\n    &quot;GC Thread#5&quot; os_prio=0 cpu=1213.51ms elapsed=5124.61s tid=0x00007fa184008800 nid=0x15e runnable  \r\n    &quot;GC Thread#6&quot; os_prio=0 cpu=1310.53ms elapsed=5124.61s tid=0x00007fa18400a000 nid=0x15f runnable  \r\n    &quot;GC Thread#7&quot; os_prio=0 cpu=1281.43ms elapsed=5124.61s tid=0x00007fa18400c000 nid=0x160 runnable  \r\n    &quot;G1 Main Marker&quot; os_prio=0 cpu=32.17ms elapsed=5125.63s tid=0x00007fa1b805c800 nid=0x13f runnable  \r\n    &quot;G1 Conc#0&quot; os_prio=0 cpu=4679.17ms elapsed=5125.63s tid=0x00007fa1b805e800 nid=0x140 runnable  \r\n    &quot;G1 Conc#1&quot; os_prio=0 cpu=4657.74ms elapsed=5123.58s tid=0x00007fa194001000 nid=0x164 runnable  \r\n    &quot;G1 Refine#0&quot; os_prio=0 cpu=24.97ms elapsed=5125.63s tid=0x00007fa1b80e7000 nid=0x143 runnable  \r\n    &quot;G1 Refine#1&quot; os_prio=0 cpu=4.33ms elapsed=5124.58s tid=0x00007fa188001000 nid=0x161 runnable  \r\n    &quot;G1 Refine#2&quot; os_prio=0 cpu=0.32ms elapsed=5124.58s tid=0x00007fa12c001000 nid=0x162 runnable  \r\n    &quot;G1 Refine#3&quot; os_prio=0 cpu=0.09ms elapsed=5124.58s tid=0x00007fa120001000 nid=0x163 runnable  \r\n    &quot;G1 Young RemSet Sampling&quot; os_prio=0 cpu=1657.17ms elapsed=5125.63s tid=0x00007fa1b80e8800 nid=0x145 runnable  \r\n    &quot;VM Periodic Task Thread&quot; os_prio=0 cpu=5369.87ms elapsed=5125.40s tid=0x00007fa1b86c4800 nid=0x150 waiting on condition.    \r\n\r\n  \r\n\r\n        Logs above the java dump, tests in parallel in 7 threads. \r\n    As I see &quot;Test worker&quot; is the test gradle task is waiting. \r\n    ForkJoinPool-1-worker-3 -&gt; WAITING status \r\n    ForkJoinPool-1-worker-5 -&gt; TIMED_WAITING status\r\n    ForkJoinPool-1-worker-7 -&gt; WAITING status\r\n    ForkJoinPool-1-worker-9 -&gt; WAITING status\r\n    ForkJoinPool-1-worker-13 -&gt; WAITING status\r\n    ForkJoinPool-1-worker-11 -&gt; WAITING status  \r\n    ForkJoinPool-1-worker-15 -&gt; TIMED_WAITING status\r\n\r\n","title":"JUnit5: Changing the ExecutionMode during Runtime execution the Tests are freezing","body":"<p>I try to change the ExecutionMode of running tests during Runtime execution but the tests are freezing.</p>\n<p>I used:</p>\n<ul>\n<li>Java 11</li>\n<li>JUnit 5 = 5.10.0</li>\n<li>Gradle 7.6</li>\n<li>Playwright in docker in headless node.</li>\n</ul>\n<p>I used such configuration to make the parallelisation of the tests.</p>\n<pre><code>junit.jupiter.execution.parallel.enabled=true\njunit.jupiter.execution.parallel.mode.default=same_thread\njunit.jupiter.execution.parallel.mode.classes.default=concurrent\njunit.jupiter.testinstance.lifecycle.default=PER_CLASS\njunit.jupiter.execution.parallel.config.strategy=custom\njunit.jupiter.execution.parallel.config.custom.class=*.CustomStrategyParallelism\n</code></pre>\n<p>As You see above, the test classes run in parallel and methods in the same thread.<br />\nEverything is fine with this.</p>\n<p>But in I want to run several classes in the in the same thread by each other (sequentially) in one run, the most test class in  parallel and few class in the same thread.\nFor example: As I want\nTestClassA (tests in same thread ) - takes thread-1.<br />\nTestClassB (tests in same thread ) - takes thread-3.<br />\nTestClassC (tests in same thread ) - takes thread-5.<br />\nTestClassG (tests in same thread ) - takes thread-4.</p>\n<p>**TestClassA finished new TestClassG takes the thread - thread-1.<br />\n**\n**TestClassG finished new TestClassO takes the thread - thread-1.<br />\n**\nTestClassB, TestClassB,  TestClassC, TestClassG run in parallel and TestClassA,TestClassG,TestClassO should run in the same thread.</p>\n<p>I used the annotation from JUnit5 @Execution(ExecutionMode.SAME_THREAD) and added to TestClassA,TestClassG,TestClassO.</p>\n<p>But in this configuration tests are freezing during the Runtime execution.\nIn the console there are no logs to see what is wrong, no exceptions, just freezing.</p>\n<p>If I remove the  @Execution(ExecutionMode.SAME_THREAD) from the test classes, tests run passed success.</p>\n<p>Thanks.</p>\n<p>Tried to increase the memory docker container but did not help</p>\n<p>Got Thread dump.</p>\n<pre><code>    Threads class SMR info:\n_java_thread_list=0x00007fa170000c40, length=28, elements={\n0x00007fa1b8029000, 0x00007fa1b817f800, 0x00007fa1b8181800, 0x00007fa1b8186800,\n0x00007fa1b8188800, 0x00007fa1b818a800, 0x00007fa1b818d000, 0x00007fa1b818f000,\n0x00007fa1b81a4800, 0x00007fa1b8c88800, 0x00007fa1b8cd4000, 0x00007fa1b8cd5000,\n0x00007fa1b9510000, 0x00007fa11004c000, 0x00007fa11005d000, 0x00007fa114001000,\n0x00007fa108001000, 0x00007fa11005e000, 0x00007fa110060000, 0x00007fa114022800,\n0x00007fa0f80a4000, 0x00007fa1140ca000, 0x00007fa0f8610000, 0x00007fa1142bb800,\n0x00007fa114216000, 0x00007fa0f80a5800, 0x00007fa0f80c8800, 0x00007fa170004800\n}\n\n&quot;Test worker&quot; #1 prio=5 os_prio=0 cpu=3111.48ms elapsed=5125.63s tid=0x00007fa1b8029000 nid=0x13c in Object.wait()  [0x00007fa1bc178000]\n   java.lang.Thread.State: WAITING (on object monitor)\n        at java.lang.Object.wait(java.base@11.0.20.1/Native Method)\n        - waiting on &lt;0x00000000c3b09a00&gt; (a org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask)\n        at java.util.concurrent.ForkJoinTask.externalInterruptibleAwaitDone(java.base@11.0.20.1/ForkJoinTask.java:356)\n        - waiting to re-lock in wait() &lt;0x00000000c3b09a00&gt; (a org.junit.platform.engine.support.hierarchical.ForkJoinPoolHierarchicalTestExecutorService$ExclusiveTask)\n        at java.util.concurrent.ForkJoinTask.get(java.base@11.0.20.1/ForkJoinTask.java:1004) \n\n&quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 cpu=23.27ms elapsed=5125.62s tid=0x00007fa1b817f800 nid=0x148 waiting on condition  [0x00007fa191ffe000]\n   java.lang.Thread.State: RUNNABLE\n        at java.lang.ref.Reference.waitForReferencePendingList(java.base@11.0.20.1/Native Method) \n\nFinalizer&quot; #3 daemon prio=8 os_prio=0 cpu=711.13ms elapsed=5125.62s tid=0x00007fa1b8181800 nid=0x149 in Object.wait()  [0x00007fa191efe000]\n   java.lang.Thread.State: WAITING (on object monitor)\n        at java.lang.Object.wait(java.base@11.0.20.1/Native Method)\n        - waiting on &lt;no object reference available&gt;\n\nSignal Dispatcher&quot; #4 daemon prio=9 os_prio=0 cpu=0.47ms elapsed=5125.61s tid=0x00007fa1b8186800 nid=0x14a runnable  [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;Service Thread&quot; #5 daemon prio=9 os_prio=0 cpu=0.23ms elapsed=5125.61s tid=0x00007fa1b8188800 nid=0x14b runnable  [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n&quot;C2 CompilerThread0&quot; #6 daemon prio=9 os_prio=0 cpu=55854.38ms elapsed=5125.61s tid=0x00007fa1b818a800 nid=0x14c waiting on condition  [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n   No compile task\n\n&quot;C1 CompilerThread0&quot; #9 daemon prio=9 os_prio=0 cpu=7449.78ms elapsed=5125.61s tid=0x00007fa1b818d000 nid=0x14d waiting on condition  [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n   No compile task\n\n&quot;Sweeper thread&quot; #10 daemon prio=9 os_prio=0 cpu=151.99ms elapsed=5125.61s tid=0x00007fa1b818f000 nid=0x14e runnable  [0x0000000000000000]\n   java.lang.Thread.State: RUNNABLE\n\n\n&quot;Common-Cleaner&quot; #11 daemon prio=8 os_prio=0 cpu=11.24ms elapsed=5125.58s tid=0x00007fa1b81a4800 nid=0x14f in Object.wait()  [0x00007fa1918fe000]\n   java.lang.Thread.State: TIMED_WAITING (on object monitor)\n        at java.lang.Object.wait(java.base@11.0.20.1/Native Method)\n\n&quot;/127.0.0.1:38124 to /127.0.0.1:44321 workers&quot; #13 prio=5 os_prio=0 cpu=16.22ms elapsed=5125.00s tid=0x00007fa1b8c88800 nid=0x158 waiting on condition  [0x00007fa1911f8000]\n   java.lang.Thread.State: WAITING (parking) \n\n\n&quot;/127.0.0.1:38124 to /127.0.0.1:44321 workers Thread 2&quot; #14 prio=5 os_prio=0 cpu=261.53ms elapsed=5124.99s tid=0x00007fa1b8cd4000 nid=0x159 waiting on condition  [0x00007fa190ef8000]\n   java.lang.Thread.State: WAITING (parking)\n\n&quot;/127.0.0.1:38124 to /127.0.0.1:44321 workers Thread 3&quot; #15 prio=5 os_prio=0 cpu=10.05ms elapsed=5124.99s tid=0x00007fa1b8cd5000 nid=0x15a runnable  [0x00007fa190df8000]\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.EPoll.wait(java.base@11.0.20.1/Native Method)\n\n&quot;ForkJoinPool-1-worker-3&quot; #16 daemon prio=5 os_prio=0 cpu=464014.46ms elapsed=5122.26s tid=0x00007fa1b9510000 nid=0x165 waiting on condition  [0x00007fa11f5fd000]\n   java.lang.Thread.State: WAITING (parking)\n        at jdk.internal.misc.Unsafe.park(java.base@11.0.20.1/Native Method) \n\n\n&quot;ForkJoinPool-1-worker-5&quot; #17 daemon prio=5 os_prio=0 cpu=30368.82ms elapsed=5122.21s tid=0x00007fa11004c000 nid=0x166 waiting on condition  [0x00007fa11f4fd000]\n   java.lang.Thread.State: TIMED_WAITING (parking) \n\n\n&quot;ForkJoinPool-1-worker-7&quot; #18 daemon prio=5 os_prio=0 cpu=7436.00ms elapsed=5122.21s tid=0x00007fa11005d000 nid=0x167 waiting on condition  [0x00007fa11f3fe000]\n   java.lang.Thread.State: WAITING (parking) \n\n\n&quot;ForkJoinPool-1-worker-9&quot; #19 daemon prio=5 os_prio=0 cpu=13860.08ms elapsed=5122.20s tid=0x00007fa114001000 nid=0x168 waiting on condition  [0x00007fa11f2fe000]\n   java.lang.Thread.State: WAITING (parking) \n\n\n&quot;ForkJoinPool-1-worker-13&quot; #21 daemon prio=5 os_prio=0 cpu=8765.08ms elapsed=5122.20s tid=0x00007fa108001000 nid=0x169 waiting on condition  [0x00007fa11f1fe000]\n   java.lang.Thread.State: WAITING (parking) \n\n\n&quot;ForkJoinPool-1-worker-11&quot; #20 daemon prio=5 os_prio=0 cpu=7355.41ms elapsed=5122.20s tid=0x00007fa11005e000 nid=0x16a waiting on condition  [0x00007fa11f0fe000]\n   java.lang.Thread.State: WAITING (parking)\n        at jdk.internal.misc.Unsafe.park(java.base@11.0.20.1/Native Method)\n\n\n&quot;ForkJoinPool-1-worker-15&quot; #22 daemon prio=5 os_prio=0 cpu=30042.77ms elapsed=5122.20s tid=0x00007fa110060000 nid=0x16b waiting on condition  [0x00007fa11effd000]\n   java.lang.Thread.State: TIMED_WAITING (parking) \n\n\n&quot;process reaper (pid 29293)&quot; #29 daemon prio=10 os_prio=0 cpu=10.90ms elapsed=5121.26s tid=0x00007fa114022800 nid=0x19c runnable  [0x00007fa198086000]\n   java.lang.Thread.State: RUNNABLE \n\n\n&quot;process reaper (pid 29474)&quot; #25 daemon prio=10 os_prio=0 cpu=8.41ms elapsed=5121.26s tid=0x00007fa0f80a4000 nid=0x1b4 runnable  [0x00007fa1900a2000]\n   java.lang.Thread.State: RUNNABLE \n\n&quot;ForkJoinPool.commonPool-worker-5&quot; #45 daemon prio=5 os_prio=0 cpu=22.57ms elapsed=5118.99s tid=0x00007fa1140ca000 nid=0x5b8 waiting on condition  [0x00007fa11cbfe000]\n   java.lang.Thread.State: WAITING (parking) \n\n&quot;Java2D Disposer&quot; #160 daemon prio=10 os_prio=0 cpu=1.71ms elapsed=4306.39s tid=0x00007fa0f8610000 nid=0x44f8 in Object.wait()  [0x00007fa11defe000]\n   java.lang.Thread.State: WAITING (on object monitor)\n        at java.lang.Object.wait(java.base@11.0.20.1/Nati \n\n\nThread-215&quot; #246 daemon prio=5 os_prio=0 cpu=22.48ms elapsed=3610.22s tid=0x00007fa1142bb800 nid=0x726e runnable  [0x00007fa11dffe000]\n   java.lang.Thread.State: RUNNABLE \n\n   \n&quot;VM Thread&quot; os_prio=0 cpu=1139.49ms elapsed=5125.62s tid=0x00007fa1b817c800 nid=0x147 runnable  \n&quot;GC Thread#0&quot; os_prio=0 cpu=1284.26ms elapsed=5125.63s tid=0x00007fa1b8041000 nid=0x13e runnable  \n&quot;GC Thread#1&quot; os_prio=0 cpu=1291.54ms elapsed=5125.28s tid=0x00007fa184001000 nid=0x152 runnable  \n&quot;GC Thread#2&quot; os_prio=0 cpu=1363.65ms elapsed=5125.28s tid=0x00007fa184002800 nid=0x153 runnable  \n&quot;GC Thread#3&quot; os_prio=0 cpu=1236.08ms elapsed=5124.61s tid=0x00007fa184005800 nid=0x15c runnable  \n&quot;GC Thread#4&quot; os_prio=0 cpu=1357.65ms elapsed=5124.61s tid=0x00007fa184007000 nid=0x15d runnable  \n&quot;GC Thread#5&quot; os_prio=0 cpu=1213.51ms elapsed=5124.61s tid=0x00007fa184008800 nid=0x15e runnable  \n&quot;GC Thread#6&quot; os_prio=0 cpu=1310.53ms elapsed=5124.61s tid=0x00007fa18400a000 nid=0x15f runnable  \n&quot;GC Thread#7&quot; os_prio=0 cpu=1281.43ms elapsed=5124.61s tid=0x00007fa18400c000 nid=0x160 runnable  \n&quot;G1 Main Marker&quot; os_prio=0 cpu=32.17ms elapsed=5125.63s tid=0x00007fa1b805c800 nid=0x13f runnable  \n&quot;G1 Conc#0&quot; os_prio=0 cpu=4679.17ms elapsed=5125.63s tid=0x00007fa1b805e800 nid=0x140 runnable  \n&quot;G1 Conc#1&quot; os_prio=0 cpu=4657.74ms elapsed=5123.58s tid=0x00007fa194001000 nid=0x164 runnable  \n&quot;G1 Refine#0&quot; os_prio=0 cpu=24.97ms elapsed=5125.63s tid=0x00007fa1b80e7000 nid=0x143 runnable  \n&quot;G1 Refine#1&quot; os_prio=0 cpu=4.33ms elapsed=5124.58s tid=0x00007fa188001000 nid=0x161 runnable  \n&quot;G1 Refine#2&quot; os_prio=0 cpu=0.32ms elapsed=5124.58s tid=0x00007fa12c001000 nid=0x162 runnable  \n&quot;G1 Refine#3&quot; os_prio=0 cpu=0.09ms elapsed=5124.58s tid=0x00007fa120001000 nid=0x163 runnable  \n&quot;G1 Young RemSet Sampling&quot; os_prio=0 cpu=1657.17ms elapsed=5125.63s tid=0x00007fa1b80e8800 nid=0x145 runnable  \n&quot;VM Periodic Task Thread&quot; os_prio=0 cpu=5369.87ms elapsed=5125.40s tid=0x00007fa1b86c4800 nid=0x150 waiting on condition.    \n\n\n\n    Logs above the java dump, tests in parallel in 7 threads. \nAs I see &quot;Test worker&quot; is the test gradle task is waiting. \nForkJoinPool-1-worker-3 -&gt; WAITING status \nForkJoinPool-1-worker-5 -&gt; TIMED_WAITING status\nForkJoinPool-1-worker-7 -&gt; WAITING status\nForkJoinPool-1-worker-9 -&gt; WAITING status\nForkJoinPool-1-worker-13 -&gt; WAITING status\nForkJoinPool-1-worker-11 -&gt; WAITING status  \nForkJoinPool-1-worker-15 -&gt; TIMED_WAITING status\n</code></pre>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":2540630,"reputation":1426,"user_id":2206512,"accept_rate":100,"display_name":"Prakash Bhagat"},"score":0,"creation_date":1395156339,"post_id":22483686,"comment_id":34203000,"body_markdown":"Can you pls place screenshot or stacktrace?","body":"Can you pls place screenshot or stacktrace?"}],"answers":[{"tags":[],"owner":{"account_id":2737217,"reputation":1295,"user_id":2359634,"accept_rate":71,"display_name":"user2359634"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1395160049,"creation_date":1395160049,"answer_id":22485333,"question_id":22483686,"body_markdown":"Solved the error by choosing the **Packaging** as **jar** , while converting to Maven Project . I earlier selected the packaging as war , which created the issue.","title":"Error converting dynamic web project to Maven Project","body":"<p>Solved the error by choosing the <strong>Packaging</strong> as <strong>jar</strong> , while converting to Maven Project . I earlier selected the packaging as war , which created the issue.</p>\n"},{"tags":[],"owner":{"account_id":29573088,"reputation":1,"user_id":22664744,"display_name":"Tapan Kumar Mandal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696141770,"creation_date":1696141770,"answer_id":77209467,"question_id":22483686,"body_markdown":"need to update forcefully the maven Right click on the project -&gt; then go to maven -&gt; update the project - select force to update","title":"Error converting dynamic web project to Maven Project","body":"<p>need to update forcefully the maven Right click on the project -&gt; then go to maven -&gt; update the project - select force to update</p>\n"}],"owner":{"account_id":2737217,"reputation":1295,"user_id":2359634,"accept_rate":71,"display_name":"user2359634"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1088,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":22485333,"answer_count":2,"score":0,"last_activity_date":1696141770,"creation_date":1395156151,"question_id":22483686,"body_markdown":"While trying to convert dynamic web project to Maven project i get the error:\r\n\r\n**An internal error occurred during: &quot;Updating Maven Project&quot;.\r\norg/codehaus/plexus/archiver/jar/JarArchiver**\r\n\r\nI am using Eclipse Kepler IDE for Java EE Developers. \r\n\r\nI tried the solutions mentioned in this link https://stackoverflow.com/questions/14491298/an-internal-error-occurred-during-updating-maven-dependencies , but didn&#39;t work for me.\r\n\r\nAny idea what should be done to solve this problem?","title":"Error converting dynamic web project to Maven Project","body":"<p>While trying to convert dynamic web project to Maven project i get the error:</p>\n\n<p><strong>An internal error occurred during: \"Updating Maven Project\".\norg/codehaus/plexus/archiver/jar/JarArchiver</strong></p>\n\n<p>I am using Eclipse Kepler IDE for Java EE Developers. </p>\n\n<p>I tried the solutions mentioned in this link <a href=\"https://stackoverflow.com/questions/14491298/an-internal-error-occurred-during-updating-maven-dependencies\">An internal error occurred during: &quot;Updating Maven Dependencies&quot;</a> , but didn't work for me.</p>\n\n<p>Any idea what should be done to solve this problem?</p>\n"},{"tags":["java","visual-studio-code","terminal"],"comments":[{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":1,"creation_date":1696139766,"post_id":77209167,"comment_id":136113843,"body_markdown":"Just put your input into a file, and use `... &lt; file.txt` to feed it in.","body":"Just put your input into a file, and use <code>... &lt; file.txt</code> to feed it in."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1696232148,"post_id":77209167,"comment_id":136121923,"body_markdown":"You can modify the code to implement your requirements. This is not a vscode problem.","body":"You can modify the code to implement your requirements. This is not a vscode problem."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1698284189,"post_id":77209167,"comment_id":136386879,"body_markdown":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems.","body":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696141470,"creation_date":1696140932,"answer_id":77209432,"question_id":77209167,"body_markdown":"You are reading input and printing output in the same loop. I suggest that you separate input and output into two loops. First get all the input and save it in some kind of data structure like an array and then process the array and print the output.\r\n\r\nIn the below code I create a class whose members store the values for `n`, `k` and `x`. I create an array and store the class instances that are initialized from the input. Then I process the array.\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class C {\r\n    private float  k;\r\n    private float  n;\r\n    private float  x;\r\n\r\n    public C(float n, float k, float x) {\r\n        this.n = n;\r\n        this.k = k;\r\n        this.x = x;\r\n    }\r\n\r\n    public String test() {\r\n        return (x&lt;(k/2*(1+k)))||(x&gt;k/2*(2*n-k+1)) ? &quot;NO&quot; : &quot;YES&quot;;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Scanner stdin = new Scanner(System.in);\r\n        int t = Integer.parseInt(stdin.nextLine());\r\n        C[] cases = new C[t];\r\n        for (int i = 0; i &lt; t; i++) {\r\n            String line = stdin.nextLine();\r\n            String[] parts = line.split(&quot; &quot;);\r\n            cases[i] = new C(Float.parseFloat(parts[0]),\r\n                             Float.parseFloat(parts[1]),\r\n                             Float.parseFloat(parts[2]));\r\n        }\r\n        for (int i = 0; i &lt; t; i++) {\r\n            System.out.println(cases[i].test());\r\n        }\r\n    }\r\n}\r\n```\r\nFor anyone interested, the problem is on this webpage:  \r\nhttps://codeforces.com/contest/1878/problem/C\r\n","title":"How to stop vscode integrated terminal from showing output in between multiple lines of input","body":"<p>You are reading input and printing output in the same loop. I suggest that you separate input and output into two loops. First get all the input and save it in some kind of data structure like an array and then process the array and print the output.</p>\n<p>In the below code I create a class whose members store the values for <code>n</code>, <code>k</code> and <code>x</code>. I create an array and store the class instances that are initialized from the input. Then I process the array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class C {\n    private float  k;\n    private float  n;\n    private float  x;\n\n    public C(float n, float k, float x) {\n        this.n = n;\n        this.k = k;\n        this.x = x;\n    }\n\n    public String test() {\n        return (x&lt;(k/2*(1+k)))||(x&gt;k/2*(2*n-k+1)) ? &quot;NO&quot; : &quot;YES&quot;;\n    }\n\n    public static void main(String[] args) {\n        Scanner stdin = new Scanner(System.in);\n        int t = Integer.parseInt(stdin.nextLine());\n        C[] cases = new C[t];\n        for (int i = 0; i &lt; t; i++) {\n            String line = stdin.nextLine();\n            String[] parts = line.split(&quot; &quot;);\n            cases[i] = new C(Float.parseFloat(parts[0]),\n                             Float.parseFloat(parts[1]),\n                             Float.parseFloat(parts[2]));\n        }\n        for (int i = 0; i &lt; t; i++) {\n            System.out.println(cases[i].test());\n        }\n    }\n}\n</code></pre>\n<p>For anyone interested, the problem is on this webpage:<br />\n<a href=\"https://codeforces.com/contest/1878/problem/C\" rel=\"nofollow noreferrer\">https://codeforces.com/contest/1878/problem/C</a></p>\n"}],"owner":{"account_id":27725550,"reputation":1,"user_id":21165178,"display_name":"MonsieurSeed"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1696141470,"creation_date":1696132373,"question_id":77209167,"body_markdown":"I&#39;m a beginner with CP, and one day when I was doing CF Round 900 (Div.3) Question C, I found that the integrated terminal in VS Code is showing output in between multiple lines of input. What I did is just copy the entire input into the integrated terminal\r\n\r\nMy input:\r\n```none\r\n12\r\n5 3 10\r\n5 3 3\r\n10 10 55\r\n6 5 20\r\n2 1 26\r\n187856 87856 2609202300\r\n200000 190000 19000000000\r\n28 5 2004\r\n2 2 2006\r\n9 6 40\r\n47202 32455 613407217\r\n185977 145541 15770805980\r\n```\r\nWhat it looks like in the VS Code integrated terminal after I entered my input:\r\n```none\r\n12\r\n5 3 10\r\n5 3 3\r\n10 10 55\r\n6 5 20\r\n2 1 26\r\n187856 8785YES\r\nNO\r\nYES\r\nYES\r\nNO\r\n6 2609202300\r\n200000 190000 19000000000\r\n28 5 2004\r\n2NO\r\nYES\r\nNO\r\n 2 2006\r\n9 6 40\r\n47202 32455 613407217\r\n185977 145541NO\r\nNO\r\nYES\r\n 15770805980\r\nYES\r\n```\r\nMy code:\r\n```java\r\nimport java.util.*;\r\nimport java.io.*;\r\n\r\npublic class C {\r\n\r\n    public static void main(String[] args) throws IOException{\r\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\r\n        int T = Integer.parseInt(in.readLine());\r\n        for (int t = 0; t &lt; T; t ++) {\r\n            StringTokenizer st = new StringTokenizer(in.readLine());\r\n            float n = Float.parseFloat(st.nextToken());\r\n            float k = Float.parseFloat(st.nextToken());\r\n            float x = Float.parseFloat(st.nextToken());\r\n            if ((x&lt;(k/2*(1+k)))||(x&gt;k/2*(2*n-k+1))) {System.out.println(&quot;NO&quot;);}\r\n            else {System.out.println(&quot;YES&quot;);}\r\n        }\r\n    }\r\n}\r\n```\r\nVS Code is running on a Mac machine. \r\nCould anyone help me? Thanks!\r\n\r\n1. I tried to run it in external terminal it works fine, but I still wish to run it in internal terminal. \r\n2. I tried to run a python file but it still doesn&#39;t work.","title":"How to stop vscode integrated terminal from showing output in between multiple lines of input","body":"<p>I'm a beginner with CP, and one day when I was doing CF Round 900 (Div.3) Question C, I found that the integrated terminal in VS Code is showing output in between multiple lines of input. What I did is just copy the entire input into the integrated terminal</p>\n<p>My input:</p>\n<pre class=\"lang-none prettyprint-override\"><code>12\n5 3 10\n5 3 3\n10 10 55\n6 5 20\n2 1 26\n187856 87856 2609202300\n200000 190000 19000000000\n28 5 2004\n2 2 2006\n9 6 40\n47202 32455 613407217\n185977 145541 15770805980\n</code></pre>\n<p>What it looks like in the VS Code integrated terminal after I entered my input:</p>\n<pre class=\"lang-none prettyprint-override\"><code>12\n5 3 10\n5 3 3\n10 10 55\n6 5 20\n2 1 26\n187856 8785YES\nNO\nYES\nYES\nNO\n6 2609202300\n200000 190000 19000000000\n28 5 2004\n2NO\nYES\nNO\n 2 2006\n9 6 40\n47202 32455 613407217\n185977 145541NO\nNO\nYES\n 15770805980\nYES\n</code></pre>\n<p>My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\nimport java.io.*;\n\npublic class C {\n\n    public static void main(String[] args) throws IOException{\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n        int T = Integer.parseInt(in.readLine());\n        for (int t = 0; t &lt; T; t ++) {\n            StringTokenizer st = new StringTokenizer(in.readLine());\n            float n = Float.parseFloat(st.nextToken());\n            float k = Float.parseFloat(st.nextToken());\n            float x = Float.parseFloat(st.nextToken());\n            if ((x&lt;(k/2*(1+k)))||(x&gt;k/2*(2*n-k+1))) {System.out.println(&quot;NO&quot;);}\n            else {System.out.println(&quot;YES&quot;);}\n        }\n    }\n}\n</code></pre>\n<p>VS Code is running on a Mac machine.\nCould anyone help me? Thanks!</p>\n<ol>\n<li>I tried to run it in external terminal it works fine, but I still wish to run it in internal terminal.</li>\n<li>I tried to run a python file but it still doesn't work.</li>\n</ol>\n"},{"tags":["java","android","video-processing","mediamuxer"],"comments":[{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":0,"creation_date":1686122900,"post_id":76358307,"comment_id":134754164,"body_markdown":"I see. The bytes works well with a surface view. I am able to stream the video. However, only when I am trying to encode the bytedata the frames are corrupted. Here is a link to the output video https://dropmefiles.com/yfqad","body":"I see. The bytes works well with a surface view. I am able to stream the video. However, only when I am trying to encode the bytedata the frames are corrupted. Here is a link to the output video <a href=\"https://dropmefiles.com/yfqad\" rel=\"nofollow noreferrer\">dropmefiles.com/yfqad</a>"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":0,"creation_date":1686212471,"post_id":76358307,"comment_id":134769037,"body_markdown":"@VC.One Can you please help with this?","body":"@VC.One Can you please help with this?"},{"owner":{"account_id":2348025,"reputation":15239,"user_id":2057709,"display_name":"VC.One"},"score":1,"creation_date":1686319420,"post_id":76358307,"comment_id":134786728,"body_markdown":"Your **SPS** and **PPS** is wrong. Your code says it makes a 1280x720 frame but your file has 640x600 frame, and the input from array of NAL units might itself be yet another different frame resolution... The fastest way to know your expected settings is to check. **(1)** If your NAL units all start with an Annex-B **start code** like `00 00 01` then just concat them into one long array, and save as an H264 file to test with VLC media player. **(2)** If you don&#39;t have start codes, then you need to show how your input is structured (you might have to remove some extra bytes to reach video data)","body":"Your <b>SPS</b> and <b>PPS</b> is wrong. Your code says it makes a 1280x720 frame but your file has 640x600 frame, and the input from array of NAL units might itself be yet another different frame resolution... The fastest way to know your expected settings is to check. <b>(1)</b> If your NAL units all start with an Annex-B <b>start code</b> like <code>00 00 01</code> then just concat them into one long array, and save as an H264 file to test with VLC media player. <b>(2)</b> If you don&#39;t have start codes, then you need to show how your input is structured (you might have to remove some extra bytes to reach video data)"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":0,"creation_date":1686320608,"post_id":76358307,"comment_id":134787009,"body_markdown":"These are my SPS and PPS bytes combined in one array. `[0, 0, 0, 1, 103, 66, 0, 41, -30, -112, 22, -121, -74, 6, -84, 24, 4, 27, -121, -119, 17, 80, 0, 0, 0, 1, 104, -50, 60, -128]`\nDo I need to encode these as well?","body":"These are my SPS and PPS bytes combined in one array. <code>[0, 0, 0, 1, 103, 66, 0, 41, -30, -112, 22, -121, -74, 6, -84, 24, 4, 27, -121, -119, 17, 80, 0, 0, 0, 1, 104, -50, 60, -128]</code> Do I need to encode these as well?"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":0,"creation_date":1686320786,"post_id":76358307,"comment_id":134787056,"body_markdown":"All my frames starts with`0 0 0 1` which is why I am using stripNALUnitStartCode. Do we need this information while endoing or should I strip this data from my frames?","body":"All my frames starts with<code>0 0 0 1</code> which is why I am using stripNALUnitStartCode. Do we need this information while endoing or should I strip this data from my frames?"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":1,"creation_date":1686562382,"post_id":76358307,"comment_id":134810303,"body_markdown":"I fixed the file, the video is now encoded in 1280x720. The frames are still corrupted can you please have a quick look if there is something wrong . Here is the file with a screenshot of the code info https://dropmefiles.com/w9LC3","body":"I fixed the file, the video is now encoded in 1280x720. The frames are still corrupted can you please have a quick look if there is something wrong . Here is the file with a screenshot of the code info <a href=\"https://dropmefiles.com/w9LC3\" rel=\"nofollow noreferrer\">dropmefiles.com/w9LC3</a>"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":0,"creation_date":1686569805,"post_id":76358307,"comment_id":134811809,"body_markdown":"I have added the requested information in my post. For some reason the first NalUnit after the sps and pps is only 30 length compared to the other nalunits and NalUnit1 and NalUnit2 have timestamps have identical values is this normal?","body":"I have added the requested information in my post. For some reason the first NalUnit after the sps and pps is only 30 length compared to the other nalunits and NalUnit1 and NalUnit2 have timestamps have identical values is this normal?"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":1,"creation_date":1686820275,"post_id":76358307,"comment_id":134852916,"body_markdown":"@VC.One https://dropmefiles.com/Cewey I have added the new raw bytes[] file with NALUNIT1 and NALUNIT2. The file is around 13kb. Also, added a new version of the recording. If you caould please check.","body":"@VC.One <a href=\"https://dropmefiles.com/Cewey\" rel=\"nofollow noreferrer\">dropmefiles.com/Cewey</a> I have added the new raw bytes[] file with NALUNIT1 and NALUNIT2. The file is around 13kb. Also, added a new version of the recording. If you caould please check."},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":1,"creation_date":1686924795,"post_id":76358307,"comment_id":134869662,"body_markdown":"I have refactored my code and updated my post with the current encoding method and output log if you can please have a look. I tried everything, not sure if it is a hardware issue where writing speed comes into play or not","body":"I have refactored my code and updated my post with the current encoding method and output log if you can please have a look. I tried everything, not sure if it is a hardware issue where writing speed comes into play or not"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":1,"creation_date":1686927244,"post_id":76358307,"comment_id":134870236,"body_markdown":"I did so, removed the first spspps and changed the resolution to 720*480. Still no results :( when you have time if you can check the configuration that I have added in the post perhaps there is something off","body":"I did so, removed the first spspps and changed the resolution to 720*480. Still no results :( when you have time if you can check the configuration that I have added in the post perhaps there is something off"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":1,"creation_date":1687180886,"post_id":76358307,"comment_id":134896770,"body_markdown":"It&#39;s coming together. I dropped the encoding stuff and now I have some frames that are visible but the video is still corrupted.  I have updated my code and uploaded the new video and raw bytes files here - https://dropmefiles.com/rn6I0\n\nCan you please have a look","body":"It&#39;s coming together. I dropped the encoding stuff and now I have some frames that are visible but the video is still corrupted.  I have updated my code and uploaded the new video and raw bytes files here - <a href=\"https://dropmefiles.com/rn6I0\" rel=\"nofollow noreferrer\">dropmefiles.com/rn6I0</a>  Can you please have a look"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":1,"creation_date":1687248186,"post_id":76358307,"comment_id":134906034,"body_markdown":"After reading this thread https://stackoverflow.com/a/20686267/17121708 I finally I fixed it by adding the combined sps+pps frame that is captured at the start of the stream before each nalunit frame. Thanks a lot for the help I would love to buy you a cofee for helping me troubleshoot this!","body":"After reading this thread <a href=\"https://stackoverflow.com/a/20686267/17121708\">stackoverflow.com/a/20686267/17121708</a> I finally I fixed it by adding the combined sps+pps frame that is captured at the start of the stream before each nalunit frame. Thanks a lot for the help I would love to buy you a cofee for helping me troubleshoot this!"},{"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"score":1,"creation_date":1687250323,"post_id":76358307,"comment_id":134906464,"body_markdown":"Yes If you want I  think you will provide a better explanation with your answer and I will mark it as solved)","body":"Yes If you want I  think you will provide a better explanation with your answer and I will mark it as solved)"}],"answers":[{"tags":[],"owner":{"account_id":2348025,"reputation":15239,"user_id":2057709,"display_name":"VC.One"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687345245,"creation_date":1687297098,"answer_id":76518541,"question_id":76358307,"body_markdown":"\r\n**Why does the video have corrupted frames?** From a look at the [shared bytes](https://dropmefiles.com/rn6I0): \r\n\r\n**1) Every frame is a Key-frame**  &lt;br&gt;\r\nI wondered why your MP4&#39;s section for listing keyframes, the `stss` atom, had **every single frame** listed as a type &quot;Key-frame&quot; (why no P-frames and B-frames?) but then I see that your code has this command:\r\n\r\n    mMediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 1);\r\n\r\nSince you are **muxing** (copy/pasting existing media bytes), that **media has its own interval** which should be written into the output MP4... A Muxing process does not need to be given a new keyframe interval. \r\n\r\n**solution:** &lt;br&gt;\r\nTest a possible fix of disabling (or comment `//`) that line, &lt;br&gt;\r\nWith same `//` disabling of the `bitrate` setting. \r\n\r\n**2) Your first frame is not a keyframe**&lt;br&gt; \r\nThe first video frame that you send to the muxer is not a keyframe. &lt;br&gt;It is marked as a key-frame in the MP4 metadata (at the **stss** atom) but it&#39;s actual bytes are of type P-frame. This means: After **start-code** `0, 0, 0, 1` your NAL header is found to be hex: `42`, or decimal: `65`). Be aware because a decimal `65` is not same as hex `65` and so it can be confusing, if you forget to convert, and think that decimal `65` means this NALU is a keyframe.\r\n\r\n**solution:** &lt;br&gt;\r\nMake sure you send a NAL unit with decimals: `0, 0, 0, 1, 101` (or in hex: `00, 00, 00, 01, 65`).\r\n\r\nThe `101` marks it as a keyframe NALU (header byte value is: `0x65` or as decimal value: `101`).\r\n\r\n**3) You have wrong SPS and PPS** &lt;br&gt;\r\nOnce again the problem is a wrong SPS and PPS... &lt;br&gt;\r\nInside the MP4, the SPS/PPS data goes into the **avcC** section (which holds the &quot;AVC configuration&quot;, and AVC is just an alternate name for H264). \r\n\r\nIf I manually overwrite a part of the `avcC` section by copy/pasting over the bytes from the raw NALUs then your corrupt MP4 shows a perfect picture (not messy colours). \r\n\r\n**solution:** &lt;br&gt;\r\n\r\n**option A:** Try to set a `MediaFormat` with the SPS and PPS included. &lt;br&gt;This means putting an entry for [Codec-Specfic Data](https://developer.android.com/reference/android/media/MediaCodec#CSD) according to these **keys**:\r\n\r\n    Format\t\tCSD buffer #0\t\t\t\t\t\tCSD buffer #1\t\t\t\t\t\tCSD buffer #2\r\n    H.264 AVC\tSPS (Sequence Parameter Sets)\t\tPPS (Picture Parameter Sets)\t\tNot Used\r\n\r\n**option B:** In a worst case scenario you might have to manually fix the bytes after the MP4 file is created by your Android code (_eg:_ after the file creation code finishes, run another function which finds and overwrites some circa 25 bytes of existing SPS &amp; PPS inside the newly created MP4). Hopefully not needed as a solution.\r\n\r\nI cannot test Android code, please check if this example code creates a working MP4:\r\n\r\n**(1)** Converting between Decimals into Hex (since bytes are written as hex)\r\n\r\n    //# check Byte as Decimal\r\n    int temp_int = (NALU_SPS[4] &amp; 0xFF); //where NALU_SPS is an Array.\r\n    System.out.println(&quot;NALU Decimal: &quot; + temp_int );\r\n    \r\n    //# check Byte as Hex\r\n    String temp_str = Integer.toString( temp_int, 16 );\r\n    temp_str = (temp_str.length() &lt; 2) ? (&quot;0&quot;+temp_str) : temp_str;\r\n    System.out.println(&quot;NALU Byte: 0x&quot; + temp_str );\r\n\r\n\r\nUse the above to convert your Array values when double-checking their byte value, since tutorials and H264 Specification will mention the byte values in a Hex format.\r\n\r\nA byte example like `0xFF` is hex `FF` and is decimal `255`. \r\n\r\n**(2)** Try this `MediaFormat` setup.\r\n\r\n    //# Set up MediaCodec\r\n    mMediaFormat = MediaFormat.createVideoFormat(codecName, width, height);\r\n    mMediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, framerate);\r\n    \r\n    //# Your SPS/PPS in an Array. Can be: byte[] ...or Else: int[]\r\n    byte[] NALU_SPS = { 0x00, 0x00, 0x00, 0x01, 0x67, 0x42, 0x00, 0x29, 0xE2, 0x90, 0x16, 0x87, 0xB6, 0x06, 0xAC, 0x18, 0x04, 0x1B, 0x87, 0x89, 0x11, 0x50 };\r\n    byte[] NALU_PPS = { 0x00, 0x00, 0x00, 0x01, 0x68, 0xCE, 0x3C, 0x80 };\r\n    \r\n    //# send SPS/PPS to the Muxer\r\n    mMediaFormat.setByteBuffer( &quot;csd-0&quot;, ByteBuffer.wrap( NALU_SPS ) );\r\n    mMediaFormat.setByteBuffer( &quot;csd-1&quot;, ByteBuffer.wrap( NALU_PPS ) );\r\n    \r\n    //# This might not be needed (since Muxer could get from SPS/PPS)\r\n    mMediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, colorFormat);\r\n    \r\n    //# test with these disabled\r\n    //mMediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, bitrate);\r\n    //mMediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 1);\r\n\r\n\r\n\r\n","title":"How to fix corrupted video (green frames) after muxing using MediaMuxer and MediaCodec","body":"<p><strong>Why does the video have corrupted frames?</strong> From a look at the <a href=\"https://dropmefiles.com/rn6I0\" rel=\"nofollow noreferrer\">shared bytes</a>:</p>\n<p><strong>1) Every frame is a Key-frame</strong>  <br>\nI wondered why your MP4's section for listing keyframes, the <code>stss</code> atom, had <strong>every single frame</strong> listed as a type &quot;Key-frame&quot; (why no P-frames and B-frames?) but then I see that your code has this command:</p>\n<pre><code>mMediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 1);\n</code></pre>\n<p>Since you are <strong>muxing</strong> (copy/pasting existing media bytes), that <strong>media has its own interval</strong> which should be written into the output MP4... A Muxing process does not need to be given a new keyframe interval.</p>\n<p><strong>solution:</strong> <br>\nTest a possible fix of disabling (or comment <code>//</code>) that line, <br>\nWith same <code>//</code> disabling of the <code>bitrate</code> setting.</p>\n<p><strong>2) Your first frame is not a keyframe</strong><br>\nThe first video frame that you send to the muxer is not a keyframe. <br>It is marked as a key-frame in the MP4 metadata (at the <strong>stss</strong> atom) but it's actual bytes are of type P-frame. This means: After <strong>start-code</strong> <code>0, 0, 0, 1</code> your NAL header is found to be hex: <code>42</code>, or decimal: <code>65</code>). Be aware because a decimal <code>65</code> is not same as hex <code>65</code> and so it can be confusing, if you forget to convert, and think that decimal <code>65</code> means this NALU is a keyframe.</p>\n<p><strong>solution:</strong> <br>\nMake sure you send a NAL unit with decimals: <code>0, 0, 0, 1, 101</code> (or in hex: <code>00, 00, 00, 01, 65</code>).</p>\n<p>The <code>101</code> marks it as a keyframe NALU (header byte value is: <code>0x65</code> or as decimal value: <code>101</code>).</p>\n<p><strong>3) You have wrong SPS and PPS</strong> <br>\nOnce again the problem is a wrong SPS and PPS... <br>\nInside the MP4, the SPS/PPS data goes into the <strong>avcC</strong> section (which holds the &quot;AVC configuration&quot;, and AVC is just an alternate name for H264).</p>\n<p>If I manually overwrite a part of the <code>avcC</code> section by copy/pasting over the bytes from the raw NALUs then your corrupt MP4 shows a perfect picture (not messy colours).</p>\n<p><strong>solution:</strong> <br></p>\n<p><strong>option A:</strong> Try to set a <code>MediaFormat</code> with the SPS and PPS included. <br>This means putting an entry for <a href=\"https://developer.android.com/reference/android/media/MediaCodec#CSD\" rel=\"nofollow noreferrer\">Codec-Specfic Data</a> according to these <strong>keys</strong>:</p>\n<pre><code>Format      CSD buffer #0                       CSD buffer #1                       CSD buffer #2\nH.264 AVC   SPS (Sequence Parameter Sets)       PPS (Picture Parameter Sets)        Not Used\n</code></pre>\n<p><strong>option B:</strong> In a worst case scenario you might have to manually fix the bytes after the MP4 file is created by your Android code (<em>eg:</em> after the file creation code finishes, run another function which finds and overwrites some circa 25 bytes of existing SPS &amp; PPS inside the newly created MP4). Hopefully not needed as a solution.</p>\n<p>I cannot test Android code, please check if this example code creates a working MP4:</p>\n<p><strong>(1)</strong> Converting between Decimals into Hex (since bytes are written as hex)</p>\n<pre><code>//# check Byte as Decimal\nint temp_int = (NALU_SPS[4] &amp; 0xFF); //where NALU_SPS is an Array.\nSystem.out.println(&quot;NALU Decimal: &quot; + temp_int );\n\n//# check Byte as Hex\nString temp_str = Integer.toString( temp_int, 16 );\ntemp_str = (temp_str.length() &lt; 2) ? (&quot;0&quot;+temp_str) : temp_str;\nSystem.out.println(&quot;NALU Byte: 0x&quot; + temp_str );\n</code></pre>\n<p>Use the above to convert your Array values when double-checking their byte value, since tutorials and H264 Specification will mention the byte values in a Hex format.</p>\n<p>A byte example like <code>0xFF</code> is hex <code>FF</code> and is decimal <code>255</code>.</p>\n<p><strong>(2)</strong> Try this <code>MediaFormat</code> setup.</p>\n<pre><code>//# Set up MediaCodec\nmMediaFormat = MediaFormat.createVideoFormat(codecName, width, height);\nmMediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, framerate);\n\n//# Your SPS/PPS in an Array. Can be: byte[] ...or Else: int[]\nbyte[] NALU_SPS = { 0x00, 0x00, 0x00, 0x01, 0x67, 0x42, 0x00, 0x29, 0xE2, 0x90, 0x16, 0x87, 0xB6, 0x06, 0xAC, 0x18, 0x04, 0x1B, 0x87, 0x89, 0x11, 0x50 };\nbyte[] NALU_PPS = { 0x00, 0x00, 0x00, 0x01, 0x68, 0xCE, 0x3C, 0x80 };\n\n//# send SPS/PPS to the Muxer\nmMediaFormat.setByteBuffer( &quot;csd-0&quot;, ByteBuffer.wrap( NALU_SPS ) );\nmMediaFormat.setByteBuffer( &quot;csd-1&quot;, ByteBuffer.wrap( NALU_PPS ) );\n\n//# This might not be needed (since Muxer could get from SPS/PPS)\nmMediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, colorFormat);\n\n//# test with these disabled\n//mMediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, bitrate);\n//mMediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1280134,"reputation":50,"user_id":1234424,"display_name":"Sandeep"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696140538,"creation_date":1696140538,"answer_id":77209415,"question_id":76358307,"body_markdown":"My advice is to not use MediaMuxer because it seems to produce wrong output. use mp4v2 library instead, it will produce the correct output and work consistently across all devices.","title":"How to fix corrupted video (green frames) after muxing using MediaMuxer and MediaCodec","body":"<p>My advice is to not use MediaMuxer because it seems to produce wrong output. use mp4v2 library instead, it will produce the correct output and work consistently across all devices.</p>\n"}],"owner":{"account_id":22997147,"reputation":314,"user_id":17121708,"display_name":"Charles Semaan"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76518541,"answer_count":2,"score":3,"last_activity_date":1696140538,"creation_date":1685371781,"question_id":76358307,"body_markdown":"I am trying to encode an mp4 video from an array of NalUnits where each unit is a frame represented by byte[] that is saved from an rtp packet from an rtsp stream. I am encoding 451 frames at a 30fps where the first frame data is the spp and pps frame combined. This is my current configuration:\r\n\r\n    Width: 720\r\n    Height: 480\r\n    Bitrate: 10_000_000\r\n    Fps: 30\r\n    Colorformat: COLOR_FormatYUV420Flexible\r\n    Key I Frame Interval: 1\r\n\r\nHere is my method where I encode the configure the encoder:\r\n\r\n    public boolean createMp4Video(FrameQueue.Frame[] frames, File dir) {\r\n        try {\r\n            // Set up MediaMuxer\r\n            Date date = new Date();\r\n            File file = new File(dir, date + &quot;-recording.mp4&quot;);\r\n            this.muxer = new MediaMuxer(file.getAbsolutePath(), MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4);\r\n    \r\n            // Set up MediaCodec\r\n            mMediaFormat = MediaFormat.createVideoFormat(codecName, width, height);\r\n            mMediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, colorFormat);\r\n            mMediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, bitrate);\r\n            mMediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, framerate);\r\n            mMediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 1);\r\n    \r\n            codec = MediaCodec.createEncoderByType(codecName);\r\n            codec.configure(mMediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);\r\n    \r\n            codec.start();\r\n    \r\n            MediaCodec.BufferInfo videoBufferInfo = new MediaCodec.BufferInfo();\r\n    \r\n            // Process frames\r\n            for (int i = 0; i &lt; frames.length; i++) {\r\n                if (i == frames.length - 1) { // if last frame, add end of stream flag\r\n                    muxFrame(frames[i].getData(), i, true);\r\n                } else {\r\n                    muxFrame(frames[i].getData()), i, false);                     \r\n            }\r\n    \r\n                // Stop and release resources\r\n                muxer.stop();\r\n                muxer.release();\r\n                codec.stop();\r\n                codec.release();\r\n                listener.onMp4VideoCreated();\r\n                return true;\r\n            } catch (IOException e) {\r\n                return false;\r\n            }\r\n        }\r\n\r\nI loop through all the frames using a simple for loop and call the following function to method:\r\n\r\n    private void muxFrame(byte[] frameData, int encodeIndex, boolean isVideoEOS) {\r\n        long presentationTimeUs = 1000000 / framerate * encodeIndex\r\n    \r\n        int inputBufferIndex = codec.dequeueInputBuffer(-1);\r\n        if (inputBufferIndex &gt;= 0) {\r\n            ByteBuffer inputBuffer = codec.getInputBuffer(inputBufferIndex);\r\n            inputBuffer.put(frameData);\r\n            codec.queueInputBuffer(inputBufferIndex, 0, frameData.length, presentationTimeUs, 0);\r\n        }\r\n    \r\n        // Create a MediaCodec.BufferInfo to hold the frame information\r\n        MediaCodec.BufferInfo muxerOutputBufferInfo = new MediaCodec.BufferInfo();\r\n    \r\n        int outputBufferIndex = codec.dequeueOutputBuffer(muxerOutputBufferInfo, 1000);\r\n    \r\n        switch (outputBufferIndex) {\r\n            case MediaCodec.INFO_OUTPUT_FORMAT_CHANGED:\r\n                MediaFormat newFormat = codec.getOutputFormat();\r\n                mVideoTrack = muxer.addTrack(newFormat);\r\n                muxer.start();\r\n                break;\r\n            case MediaCodec.INFO_TRY_AGAIN_LATER:\r\n                break;\r\n            default:\r\n                // Set the size, presentation time, and flags of the muxerOutputBufferInfo\r\n                muxerOutputBufferInfo.size = frameData.length;\r\n                muxerOutputBufferInfo.offset = 0;\r\n                muxerOutputBufferInfo.flags = isVideoEOS ? MediaCodec.BUFFER_FLAG_END_OF_STREAM : MediaCodec.BUFFER_FLAG_KEY_FRAME;\r\n                muxerOutputBufferInfo.presentationTimeUs = presentationTimeUs;\r\n                // Write the frame data to the muxer\r\n                muxer.writeSampleData(mVideoTrack, ByteBuffer.wrap(frameData), muxerOutputBufferInfo);\r\n                codec.releaseOutputBuffer(outputBufferIndex, false);\r\n                break;\r\n        }\r\n    \r\n    \r\n    }\r\n\r\n\r\n\r\nI am able to save the video and play it but all the frames are corrupted and green as such https://dropmefiles.com/rn6I0\r\n\r\n\r\nHere is my log when I am encoding:\r\n\r\n    I/OMXClient: IOmx service obtained\r\n    W/OMXUtils: do not know color format 0x7f000200 = 2130706944\r\n    W/OMXUtils: do not know color format 0x7f000789 = 2130708361\r\n    I/ACodec: [OMX.MTK.VIDEO.ENCODER.AVC] using color format 0x7f420888 in place of 0x7f420888\r\n    I/ACodec_vilte: set I frame rate\r\n    I/ACodec_vilte: set framerate\r\n    I/ACodec_vilte: setMTKParameters, width: 720\r\n    I/ACodec_vilte: setMTKParameters, height: 480\r\n    I/ACodec: setupAVCEncoderParameters with [profile: Baseline] [level: Level41]\r\n    I/ACodec: [OMX.MTK.VIDEO.ENCODER.AVC] cannot encode color aspects. Ignoring.\r\n    I/ACodec: [OMX.MTK.VIDEO.ENCODER.AVC] cannot encode HDR static metadata. Ignoring.\r\n    I/ACodec: setupVideoEncoder succeeded\r\n    I/ACodec_vilte: set I frame rate\r\n    I/ACodec_vilte: set framerate\r\n    I/ACodec_vilte: setMTKParameters, width: 720\r\n    I/ACodec_vilte: setMTKParameters, height: 480\r\n    I/general: [33]\tConfiguring video encoder - 450 frames\r\n    I/general: [33]\tVideo encoding in progress\r\n    D/MPEG4Writer: start+ 797\r\n    I/MPEG4Writer: limits: 4294967295/0 bytes/us, bit rate: -1 bps and the estimated moov size 3191 bytes\r\n    D/MPEG4Writer: start+ 2403\r\n    D/MPEG4Writer: start- 2481\r\n    D/MPEG4Writer: start- 964\r\n    I/MPEG4Writer: setStartTimestampUs: 166665\r\n    I/MPEG4Writer: Earliest track starting time: 166665\r\n    D/MPEG4Writer: Video mStartTimestampUs=166665us\r\n    D/MPEG4Writer: reset+ 1081\r\n    D/MPEG4Writer: Video track stopping. Stop source\r\n    D/MPEG4Writer: Video track source stopping\r\n    D/MPEG4Writer: Video track source stopped\r\n    I/MPEG4Writer: Received total/0-length (439/0) buffers and encoded 439 frames. - Video\r\n    D/MPEG4Writer: Video track stopped. Stop source\r\n    D/MPEG4Writer: Stopping writer thread\r\n    D/MPEG4Writer: 0 chunks are written in the last batch\r\n    D/MPEG4Writer: Writer thread stopped\r\n    I/MPEG4Writer: Ajust the moov start time from 166665 us -&gt; 166665 us\r\n    I/MPEG4Writer: The mp4 file will not be streamable.\r\n    D/MPEG4Writer: reset- 1187\r\n    D/MPEG4Writer: reset+ 1081\r\n    D/MPEG4Writer: Video track stopping. Stop source\r\n    I/general: [33]\tMP4 video created successfully\r\n\r\n","title":"How to fix corrupted video (green frames) after muxing using MediaMuxer and MediaCodec","body":"<p>I am trying to encode an mp4 video from an array of NalUnits where each unit is a frame represented by byte[] that is saved from an rtp packet from an rtsp stream. I am encoding 451 frames at a 30fps where the first frame data is the spp and pps frame combined. This is my current configuration:</p>\n<pre><code>Width: 720\nHeight: 480\nBitrate: 10_000_000\nFps: 30\nColorformat: COLOR_FormatYUV420Flexible\nKey I Frame Interval: 1\n</code></pre>\n<p>Here is my method where I encode the configure the encoder:</p>\n<pre><code>public boolean createMp4Video(FrameQueue.Frame[] frames, File dir) {\n    try {\n        // Set up MediaMuxer\n        Date date = new Date();\n        File file = new File(dir, date + &quot;-recording.mp4&quot;);\n        this.muxer = new MediaMuxer(file.getAbsolutePath(), MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4);\n\n        // Set up MediaCodec\n        mMediaFormat = MediaFormat.createVideoFormat(codecName, width, height);\n        mMediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, colorFormat);\n        mMediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, bitrate);\n        mMediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, framerate);\n        mMediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 1);\n\n        codec = MediaCodec.createEncoderByType(codecName);\n        codec.configure(mMediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);\n\n        codec.start();\n\n        MediaCodec.BufferInfo videoBufferInfo = new MediaCodec.BufferInfo();\n\n        // Process frames\n        for (int i = 0; i &lt; frames.length; i++) {\n            if (i == frames.length - 1) { // if last frame, add end of stream flag\n                muxFrame(frames[i].getData(), i, true);\n            } else {\n                muxFrame(frames[i].getData()), i, false);                     \n        }\n\n            // Stop and release resources\n            muxer.stop();\n            muxer.release();\n            codec.stop();\n            codec.release();\n            listener.onMp4VideoCreated();\n            return true;\n        } catch (IOException e) {\n            return false;\n        }\n    }\n</code></pre>\n<p>I loop through all the frames using a simple for loop and call the following function to method:</p>\n<pre><code>private void muxFrame(byte[] frameData, int encodeIndex, boolean isVideoEOS) {\n    long presentationTimeUs = 1000000 / framerate * encodeIndex\n\n    int inputBufferIndex = codec.dequeueInputBuffer(-1);\n    if (inputBufferIndex &gt;= 0) {\n        ByteBuffer inputBuffer = codec.getInputBuffer(inputBufferIndex);\n        inputBuffer.put(frameData);\n        codec.queueInputBuffer(inputBufferIndex, 0, frameData.length, presentationTimeUs, 0);\n    }\n\n    // Create a MediaCodec.BufferInfo to hold the frame information\n    MediaCodec.BufferInfo muxerOutputBufferInfo = new MediaCodec.BufferInfo();\n\n    int outputBufferIndex = codec.dequeueOutputBuffer(muxerOutputBufferInfo, 1000);\n\n    switch (outputBufferIndex) {\n        case MediaCodec.INFO_OUTPUT_FORMAT_CHANGED:\n            MediaFormat newFormat = codec.getOutputFormat();\n            mVideoTrack = muxer.addTrack(newFormat);\n            muxer.start();\n            break;\n        case MediaCodec.INFO_TRY_AGAIN_LATER:\n            break;\n        default:\n            // Set the size, presentation time, and flags of the muxerOutputBufferInfo\n            muxerOutputBufferInfo.size = frameData.length;\n            muxerOutputBufferInfo.offset = 0;\n            muxerOutputBufferInfo.flags = isVideoEOS ? MediaCodec.BUFFER_FLAG_END_OF_STREAM : MediaCodec.BUFFER_FLAG_KEY_FRAME;\n            muxerOutputBufferInfo.presentationTimeUs = presentationTimeUs;\n            // Write the frame data to the muxer\n            muxer.writeSampleData(mVideoTrack, ByteBuffer.wrap(frameData), muxerOutputBufferInfo);\n            codec.releaseOutputBuffer(outputBufferIndex, false);\n            break;\n    }\n\n\n}\n</code></pre>\n<p>I am able to save the video and play it but all the frames are corrupted and green as such <a href=\"https://dropmefiles.com/rn6I0\" rel=\"nofollow noreferrer\">https://dropmefiles.com/rn6I0</a></p>\n<p>Here is my log when I am encoding:</p>\n<pre><code>I/OMXClient: IOmx service obtained\nW/OMXUtils: do not know color format 0x7f000200 = 2130706944\nW/OMXUtils: do not know color format 0x7f000789 = 2130708361\nI/ACodec: [OMX.MTK.VIDEO.ENCODER.AVC] using color format 0x7f420888 in place of 0x7f420888\nI/ACodec_vilte: set I frame rate\nI/ACodec_vilte: set framerate\nI/ACodec_vilte: setMTKParameters, width: 720\nI/ACodec_vilte: setMTKParameters, height: 480\nI/ACodec: setupAVCEncoderParameters with [profile: Baseline] [level: Level41]\nI/ACodec: [OMX.MTK.VIDEO.ENCODER.AVC] cannot encode color aspects. Ignoring.\nI/ACodec: [OMX.MTK.VIDEO.ENCODER.AVC] cannot encode HDR static metadata. Ignoring.\nI/ACodec: setupVideoEncoder succeeded\nI/ACodec_vilte: set I frame rate\nI/ACodec_vilte: set framerate\nI/ACodec_vilte: setMTKParameters, width: 720\nI/ACodec_vilte: setMTKParameters, height: 480\nI/general: [33] Configuring video encoder - 450 frames\nI/general: [33] Video encoding in progress\nD/MPEG4Writer: start+ 797\nI/MPEG4Writer: limits: 4294967295/0 bytes/us, bit rate: -1 bps and the estimated moov size 3191 bytes\nD/MPEG4Writer: start+ 2403\nD/MPEG4Writer: start- 2481\nD/MPEG4Writer: start- 964\nI/MPEG4Writer: setStartTimestampUs: 166665\nI/MPEG4Writer: Earliest track starting time: 166665\nD/MPEG4Writer: Video mStartTimestampUs=166665us\nD/MPEG4Writer: reset+ 1081\nD/MPEG4Writer: Video track stopping. Stop source\nD/MPEG4Writer: Video track source stopping\nD/MPEG4Writer: Video track source stopped\nI/MPEG4Writer: Received total/0-length (439/0) buffers and encoded 439 frames. - Video\nD/MPEG4Writer: Video track stopped. Stop source\nD/MPEG4Writer: Stopping writer thread\nD/MPEG4Writer: 0 chunks are written in the last batch\nD/MPEG4Writer: Writer thread stopped\nI/MPEG4Writer: Ajust the moov start time from 166665 us -&gt; 166665 us\nI/MPEG4Writer: The mp4 file will not be streamable.\nD/MPEG4Writer: reset- 1187\nD/MPEG4Writer: reset+ 1081\nD/MPEG4Writer: Video track stopping. Stop source\nI/general: [33] MP4 video created successfully\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-s3","jodatime","aws-sdk"],"comments":[{"owner":{"account_id":346094,"reputation":4664,"user_id":1470785,"accept_rate":58,"display_name":"IgnazioC"},"score":1,"creation_date":1439841087,"post_id":32058431,"comment_id":52015943,"body_markdown":"please specify what is the questione.","body":"please specify what is the questione."}],"answers":[{"tags":[],"owner":{"account_id":6804222,"reputation":1411,"user_id":5236556,"display_name":"Andrew Shore"},"down_vote_count":0,"up_vote_count":87,"is_accepted":false,"score":87,"last_activity_date":1439840759,"creation_date":1439840759,"answer_id":32058472,"question_id":32058431,"body_markdown":"This is caused by a bug between JodaTime and versions of Java greater then 1.8u60. Upgrading to JodaTime version 2.8.1 or later solves the issue. See the following Github issues for reference.\r\n\r\nhttps://github.com/aws/aws-sdk-java/issues/484\r\nhttps://github.com/aws/aws-sdk-java/issues/444\r\n","title":"AWS Java SDK - AWS authentication requires a valid Date or x-amz-date header","body":"<p>This is caused by a bug between JodaTime and versions of Java greater then 1.8u60. Upgrading to JodaTime version 2.8.1 or later solves the issue. See the following Github issues for reference.</p>\n\n<p><a href=\"https://github.com/aws/aws-sdk-java/issues/484\">https://github.com/aws/aws-sdk-java/issues/484</a>\n<a href=\"https://github.com/aws/aws-sdk-java/issues/444\">https://github.com/aws/aws-sdk-java/issues/444</a></p>\n"},{"tags":[],"owner":{"account_id":2169682,"reputation":151,"user_id":1922015,"display_name":"Rhythm"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1452014925,"creation_date":1452014925,"answer_id":34617752,"question_id":32058431,"body_markdown":"Update your AWS Java SDK to 1.10.1 or later","title":"AWS Java SDK - AWS authentication requires a valid Date or x-amz-date header","body":"<p>Update your AWS Java SDK to 1.10.1 or later</p>\n"},{"tags":[],"owner":{"account_id":70100,"reputation":4960,"user_id":203619,"accept_rate":43,"display_name":"mooreds"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1453740187,"creation_date":1453740187,"answer_id":34997737,"question_id":32058431,"body_markdown":"As far as I can see, there are three solutions to this issue:\r\n\r\n* upgrade joda time\r\n* upgrade the AWS java SDK\r\n* downgrade java to a version less than 1.8u60 (java7 seems to work fine)","title":"AWS Java SDK - AWS authentication requires a valid Date or x-amz-date header","body":"<p>As far as I can see, there are three solutions to this issue:</p>\n\n<ul>\n<li>upgrade joda time</li>\n<li>upgrade the AWS java SDK</li>\n<li>downgrade java to a version less than 1.8u60 (java7 seems to work fine)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2647494,"reputation":1006,"user_id":2289889,"display_name":"Avinash Singh"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1465365538,"creation_date":1465365538,"answer_id":37694343,"question_id":32058431,"body_markdown":"I faced while using presto.\r\nThe problem is with java version jdk1.8.0_60 greater downgrade it to jdk1.8.0_45 will solve the problem","title":"AWS Java SDK - AWS authentication requires a valid Date or x-amz-date header","body":"<p>I faced while using presto.\nThe problem is with java version jdk1.8.0_60 greater downgrade it to jdk1.8.0_45 will solve the problem</p>\n"},{"tags":[],"owner":{"account_id":11048175,"reputation":41,"user_id":8113504,"display_name":"Vipul Kacha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534844219,"creation_date":1497969039,"answer_id":44655904,"question_id":32058431,"body_markdown":"i have faced same problem.i have solved now.only thing is that java 1.8u60+ does not support aws sdk 1.10.10 so you can just update aws sdk version 1.11.52 ..i mean latest version and it resolved it.\r\n\r\nAlso please look out for the conflicts in the dependency tree, when you upgrade the versions. In my case there was a conflict with the httpclient after upgrading aws sdk version.","title":"AWS Java SDK - AWS authentication requires a valid Date or x-amz-date header","body":"<p>i have faced same problem.i have solved now.only thing is that java 1.8u60+ does not support aws sdk 1.10.10 so you can just update aws sdk version 1.11.52 ..i mean latest version and it resolved it.</p>\n\n<p>Also please look out for the conflicts in the dependency tree, when you upgrade the versions. In my case there was a conflict with the httpclient after upgrading aws sdk version.</p>\n"},{"tags":[],"owner":{"account_id":20665681,"reputation":1,"user_id":15172597,"display_name":"Jon Cano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612829572,"creation_date":1612829572,"answer_id":66111204,"question_id":32058431,"body_markdown":"All the answers above drove me nuts because they recommend changing libraries, clients or some other major change.  I have to use client 1.9.31 and I don&#39;t have control over which joda or JVM.  So here is the java fix without having to do everything above!\r\n\r\nBefore you send your request, like PutObjectRequest, do this:\r\n\r\n\tputObjectRequest.putCustomRequestHeader(&quot;x-amz-date&quot;, getServerTime());\r\n\r\n\tpublic static String getServerTime() {\r\n\t    SimpleDateFormat dateFormat = new SimpleDateFormat(\r\n\t        &quot;EEE, dd MMM yyyy HH:mm:ss Z&quot;, Locale.US);\r\n\t    return dateFormat.format(Calendar.getInstance().getTime());\r\n\t}\r\n","title":"AWS Java SDK - AWS authentication requires a valid Date or x-amz-date header","body":"<p>All the answers above drove me nuts because they recommend changing libraries, clients or some other major change.  I have to use client 1.9.31 and I don't have control over which joda or JVM.  So here is the java fix without having to do everything above!</p>\n<p>Before you send your request, like PutObjectRequest, do this:</p>\n<pre><code>putObjectRequest.putCustomRequestHeader(&quot;x-amz-date&quot;, getServerTime());\n\npublic static String getServerTime() {\n    SimpleDateFormat dateFormat = new SimpleDateFormat(\n        &quot;EEE, dd MMM yyyy HH:mm:ss Z&quot;, Locale.US);\n    return dateFormat.format(Calendar.getInstance().getTime());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29572153,"reputation":1,"user_id":22664051,"display_name":"Gabriel Chavez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696140377,"creation_date":1696123156,"answer_id":77208923,"question_id":32058431,"body_markdown":"To solve this problem you must add the joda-time-2.10.13.jar library to the project.","title":"AWS Java SDK - AWS authentication requires a valid Date or x-amz-date header","body":"<p>To solve this problem you must add the joda-time-2.10.13.jar library to the project.</p>\n"}],"owner":{"account_id":6804222,"reputation":1411,"user_id":5236556,"display_name":"Andrew Shore"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19831,"favorite_count":0,"down_vote_count":1,"up_vote_count":54,"answer_count":7,"score":53,"last_activity_date":1696140377,"creation_date":1439840602,"question_id":32058431,"body_markdown":"Getting the following exception when using the AWS SDK for Java and Java 1.8u60+.\r\n\r\n    com.amazonaws.services.s3.model.AmazonS3Exception: AWS authentication requires a valid Date or x-amz-date header (Service: Amazon S3; Status Code: 403; Error Code: AccessDenied; Request ID: 41C359C079CBAFCF)\r\n        at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1182) ~[aws-java-sdk-core-1.10.10.jar:na]\r\n        at com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:770) ~[aws-java-sdk-core-1.10.10.jar:na]\r\n        at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:489) ~[aws-java-sdk-core-1.10.10.jar:na]\r\n        at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:310) ~[aws-java-sdk-core-1.10.10.jar:na]\r\n        at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:3608) ~[aws-java-sdk-s3-1.10.10.jar:na]\r\n        at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:3561) ~[aws-java-sdk-s3-1.10.10.jar:na]\r\n        at com.amazonaws.services.s3.AmazonS3Client.listObjects(AmazonS3Client.java:647) ~[aws-java-sdk-s3-1.10.10.jar:na]\r\n        at com.amazonaws.services.s3.AmazonS3Client.listObjects(AmazonS3Client.java:632) ~[aws-java-sdk-s3-1.10.10.jar:na]","title":"AWS Java SDK - AWS authentication requires a valid Date or x-amz-date header","body":"<p>Getting the following exception when using the AWS SDK for Java and Java 1.8u60+.</p>\n\n<pre><code>com.amazonaws.services.s3.model.AmazonS3Exception: AWS authentication requires a valid Date or x-amz-date header (Service: Amazon S3; Status Code: 403; Error Code: AccessDenied; Request ID: 41C359C079CBAFCF)\n    at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1182) ~[aws-java-sdk-core-1.10.10.jar:na]\n    at com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:770) ~[aws-java-sdk-core-1.10.10.jar:na]\n    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:489) ~[aws-java-sdk-core-1.10.10.jar:na]\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:310) ~[aws-java-sdk-core-1.10.10.jar:na]\n    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:3608) ~[aws-java-sdk-s3-1.10.10.jar:na]\n    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:3561) ~[aws-java-sdk-s3-1.10.10.jar:na]\n    at com.amazonaws.services.s3.AmazonS3Client.listObjects(AmazonS3Client.java:647) ~[aws-java-sdk-s3-1.10.10.jar:na]\n    at com.amazonaws.services.s3.AmazonS3Client.listObjects(AmazonS3Client.java:632) ~[aws-java-sdk-s3-1.10.10.jar:na]\n</code></pre>\n"},{"tags":["java","gson","nio"],"comments":[{"owner":{"account_id":5303874,"reputation":5062,"user_id":4464702,"accept_rate":96,"display_name":"randers"},"score":1,"creation_date":1462103696,"post_id":36964995,"comment_id":61488324,"body_markdown":"Please also show the `StackOverflowError` stacktrace.","body":"Please also show the <code>StackOverflowError</code> stacktrace."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1696140804,"post_id":36964995,"comment_id":136113909,"body_markdown":"Why would you serialize a `Path`?","body":"Why would you serialize a <code>Path</code>?"}],"answers":[{"tags":[],"owner":{"account_id":1022086,"reputation":14601,"user_id":1032167,"accept_rate":50,"display_name":"varren"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1508858797,"creation_date":1462105424,"answer_id":36966590,"question_id":36964995,"body_markdown":"Your problem is that `Path` is an `interface`. Let&#39;s suppose you used `Paths.get(&quot;/&quot;)` which will create instance of something like `WindowsPath` on my Windows PC. Now, you have to tell GSON how to deserialize this type:\r\n\r\n    ConstructorSetup setup = new ConstructorSetup();\r\n    setup.setAppIconMimmapDirPathOnPc(Paths.get(&quot;/&quot;));\r\n\r\n    // here we get actual class type of our Path object\r\n    Class classT = setup.getAppIconMimmapDirPathOnPc().getClass();\r\n\r\n    Gson gson = new GsonBuilder().registerTypeAdapter(classT, new MyPathConverter())\r\n\r\nAnother approach you can go with is to `registerTypeHierarchyAdapter`:\r\n\r\n    .registerTypeHierarchyAdapter(Path.class, new MyPathConverter())\r\n\r\nThe purpose of typeHierarchyAdapter is to cover the case when you want the same representation for all subtypes of a type, which is exactly your case with `Path`.","title":"How to serialize java.nio.file.Path with Gson?","body":"<p>Your problem is that <code>Path</code> is an <code>interface</code>. Let's suppose you used <code>Paths.get(\"/\")</code> which will create instance of something like <code>WindowsPath</code> on my Windows PC. Now, you have to tell GSON how to deserialize this type:</p>\n\n<pre><code>ConstructorSetup setup = new ConstructorSetup();\nsetup.setAppIconMimmapDirPathOnPc(Paths.get(\"/\"));\n\n// here we get actual class type of our Path object\nClass classT = setup.getAppIconMimmapDirPathOnPc().getClass();\n\nGson gson = new GsonBuilder().registerTypeAdapter(classT, new MyPathConverter())\n</code></pre>\n\n<p>Another approach you can go with is to <code>registerTypeHierarchyAdapter</code>:</p>\n\n<pre><code>.registerTypeHierarchyAdapter(Path.class, new MyPathConverter())\n</code></pre>\n\n<p>The purpose of typeHierarchyAdapter is to cover the case when you want the same representation for all subtypes of a type, which is exactly your case with <code>Path</code>.</p>\n"}],"owner":{"account_id":6239644,"reputation":3889,"user_id":4853702,"accept_rate":65,"display_name":"Alexandr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4491,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":36966590,"answer_count":1,"score":14,"last_activity_date":1696138692,"creation_date":1462094018,"question_id":36964995,"body_markdown":"I get `java.lang.StackOverflowError` when trying to serialize `Object` that contains `java.nio.file.Path`\r\n\r\nEven when i wrote:\r\n\r\n    public class PathConverter implements JsonDeserializer&lt;Path&gt;, JsonSerializer&lt;Path&gt; {\r\n        @Override\r\n        public Path deserialize(JsonElement jsonElement, Type type, JsonDeserializationContext jsonDeserializationContext) throws JsonParseException {\r\n            return Paths.get(jsonElement.getAsString());\r\n        }\r\n    \r\n        @Override\r\n        public JsonElement serialize(Path path, Type type, JsonSerializationContext jsonSerializationContext) {\r\n            return new JsonPrimitive(path.toString());\r\n        }\r\n    }\r\n\r\nand apply it:\r\n\r\n        String json = new GsonBuilder()\r\n                .registerTypeAdapter(Path.class, new PathConverter())\r\n                .create()\r\n                .toJson(constructorSetup, new TypeToken&lt;ConstructorSetup&gt;() {}.getType());\r\n\r\nI still can&#39;t serialize this class:\r\n\r\n    public class ConstructorSetup {\r\n    \r\n        private Path appIconMimmapDirPathOnPc;\r\n\r\n    }\r\n\r\nStacktrace: (full on [pastebin][1])\r\n\r\n    Exception in thread &quot;main&quot; java.lang.StackOverflowError\r\n    \tat com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)\r\n    \tat com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)\r\n    \tat com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)\r\n            ...\r\n    \tat com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)\r\n    \tat com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:355)\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:117)\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)\r\n    \tat com.google.gson.Gson.getAdapter(Gson.java:356)\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.&lt;init&gt;(ReflectiveTypeAdapterFactory.java:82)\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)\r\n    \tat com.google.gson.Gson.getAdapter(Gson.java:356)\r\n            ...\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.&lt;init&gt;(ReflectiveTypeAdapterFactory.java:82)\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)\r\n    \tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)\r\n    \tat com.google.gson.Gson.getAdapter(Gson.java:356)\r\n\r\nAny solution?\r\n\r\n\r\n  [1]: http://pastebin.com/5LUsZWb2","title":"How to serialize java.nio.file.Path with Gson?","body":"<p>I get <code>java.lang.StackOverflowError</code> when trying to serialize <code>Object</code> that contains <code>java.nio.file.Path</code></p>\n\n<p>Even when i wrote:</p>\n\n<pre><code>public class PathConverter implements JsonDeserializer&lt;Path&gt;, JsonSerializer&lt;Path&gt; {\n    @Override\n    public Path deserialize(JsonElement jsonElement, Type type, JsonDeserializationContext jsonDeserializationContext) throws JsonParseException {\n        return Paths.get(jsonElement.getAsString());\n    }\n\n    @Override\n    public JsonElement serialize(Path path, Type type, JsonSerializationContext jsonSerializationContext) {\n        return new JsonPrimitive(path.toString());\n    }\n}\n</code></pre>\n\n<p>and apply it:</p>\n\n<pre><code>    String json = new GsonBuilder()\n            .registerTypeAdapter(Path.class, new PathConverter())\n            .create()\n            .toJson(constructorSetup, new TypeToken&lt;ConstructorSetup&gt;() {}.getType());\n</code></pre>\n\n<p>I still can't serialize this class:</p>\n\n<pre><code>public class ConstructorSetup {\n\n    private Path appIconMimmapDirPathOnPc;\n\n}\n</code></pre>\n\n<p>Stacktrace: (full on <a href=\"http://pastebin.com/5LUsZWb2\" rel=\"noreferrer\">pastebin</a>)</p>\n\n<pre><code>Exception in thread \"main\" java.lang.StackOverflowError\n    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)\n    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)\n    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)\n        ...\n    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)\n    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:355)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:117)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)\n    at com.google.gson.Gson.getAdapter(Gson.java:356)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.&lt;init&gt;(ReflectiveTypeAdapterFactory.java:82)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)\n    at com.google.gson.Gson.getAdapter(Gson.java:356)\n        ...\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.&lt;init&gt;(ReflectiveTypeAdapterFactory.java:82)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)\n    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)\n    at com.google.gson.Gson.getAdapter(Gson.java:356)\n</code></pre>\n\n<p>Any solution?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9855,"page":150,"page_size":100}
