{"items":[{"tags":["java","swing","awt","paint","jcomponent"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1686964333,"post_id":76492323,"comment_id":134875396,"body_markdown":"You&#39;re overriding `paint`.  You should be overriding `paintComponent`.  You should be using a `JPanel` for drawing.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) section.","body":"You&#39;re overriding <code>paint</code>.  You should be overriding <code>paintComponent</code>.  You should be using a <code>JPanel</code> for drawing.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> section."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1686980945,"post_id":76492323,"comment_id":134876218,"body_markdown":"Did you try entering the following in the search box at the top of this webpage? [\\[swing\\] drag mouse draw oval](https://stackoverflow.com/search?q=%5Bswing%5D+drag+mouse+draw+oval)","body":"Did you try entering the following in the search box at the top of this webpage? <a href=\"https://stackoverflow.com/search?q=%5Bswing%5D+drag+mouse+draw+oval\">&#91;swing&#93; drag mouse draw oval</a>"},{"owner":{"account_id":9127339,"reputation":1,"user_id":22053715,"display_name":"pprts1"},"score":0,"creation_date":1686987899,"post_id":76492323,"comment_id":134876712,"body_markdown":"@GilbertLeBlanc: It seems I completely forgot about this chapter of the tutorial and only remember that I clicked the link to the article but then left the chapter out. I think I&#39;m not there yet to completely understand what&#39;s going on in the background. Thank you for the link, I will take my time to read all of this.","body":"@GilbertLeBlanc: It seems I completely forgot about this chapter of the tutorial and only remember that I clicked the link to the article but then left the chapter out. I think I&#39;m not there yet to completely understand what&#39;s going on in the background. Thank you for the link, I will take my time to read all of this."},{"owner":{"account_id":9127339,"reputation":1,"user_id":22053715,"display_name":"pprts1"},"score":0,"creation_date":1686988243,"post_id":76492323,"comment_id":134876737,"body_markdown":"@Abra: I googled before considering posting here and after writing the comment viewed at the recommended postings before sending. Both the tutorial Gilbert Le Blanc  linked and your link point towards the invokeLater() method, I think the next step for me will be learning this and concurrency overall. Thank you very much!","body":"@Abra: I googled before considering posting here and after writing the comment viewed at the recommended postings before sending. Both the tutorial Gilbert Le Blanc  linked and your link point towards the invokeLater() method, I think the next step for me will be learning this and concurrency overall. Thank you very much!"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1687013667,"post_id":76492323,"comment_id":134879284,"body_markdown":"The invokeLater() method, while important for understanding how Swing works, is not the cause of your painting problems. Read the Swing tutorial  on &quot;Perfoming Custom Painting&quot; to understand the correct way to do painting.","body":"The invokeLater() method, while important for understanding how Swing works, is not the cause of your painting problems. Read the Swing tutorial  on &quot;Perfoming Custom Painting&quot; to understand the correct way to do painting."},{"owner":{"account_id":9127339,"reputation":1,"user_id":22053715,"display_name":"pprts1"},"score":0,"creation_date":1687187749,"post_id":76492323,"comment_id":134898329,"body_markdown":"@camickr: yes, thank you!","body":"@camickr: yes, thank you!"}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687013530,"creation_date":1687013530,"answer_id":76496735,"question_id":76492323,"body_markdown":"&gt; Why does it not work this way with JComponent?\r\n\r\nActually it works correctly with JComponent.\r\n\r\nThe difference between the two components is that by default:\r\n\r\n1. `JComponent` is non-opaque (transparent), which means the parent component will be painted first before the JComponent painting method is invoked and therefore the background is cleared so you only see a single oval.\r\n2. `JPanel` is opaque, which means it is responsible for clearing the background first before doing the custom painting to prevent painting artifacts. You are not doing this.\r\n\r\nWhat you are seeing is a painting artifact with the JPanel since the old painting is not removed. \r\n\r\nTry drawing on the panel and then resize the frame and you will see all the ovals except the last one are removed.\r\n\r\nSee: https://stackoverflow.com/a/52878359/131872 for one way to do the painting.\r\n","title":"Problem drawing on JComponent via MouseMotionListener added to a JFrame","body":"<blockquote>\n<p>Why does it not work this way with JComponent?</p>\n</blockquote>\n<p>Actually it works correctly with JComponent.</p>\n<p>The difference between the two components is that by default:</p>\n<ol>\n<li><code>JComponent</code> is non-opaque (transparent), which means the parent component will be painted first before the JComponent painting method is invoked and therefore the background is cleared so you only see a single oval.</li>\n<li><code>JPanel</code> is opaque, which means it is responsible for clearing the background first before doing the custom painting to prevent painting artifacts. You are not doing this.</li>\n</ol>\n<p>What you are seeing is a painting artifact with the JPanel since the old painting is not removed.</p>\n<p>Try drawing on the panel and then resize the frame and you will see all the ovals except the last one are removed.</p>\n<p>See: <a href=\"https://stackoverflow.com/a/52878359/131872\">https://stackoverflow.com/a/52878359/131872</a> for one way to do the painting.</p>\n"}],"owner":{"account_id":9127339,"reputation":1,"user_id":22053715,"display_name":"pprts1"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687013530,"creation_date":1686935505,"question_id":76492323,"body_markdown":"\r\nI want to draw ovals while dragging my mouse over a `JComponent` I added to a `JFrame`. I created two classes, one which extends `JComponent`, implements `MouseMotionListener` and overrides the paint(Graphics g) method, and another class with the main method in which I create a `JFrame` and add the `JComponent` to the frame. However, when I click and drag my mouse, nothing happens. I then added a default constructor to my `Painter` class and `addMouseMotionListener(this)` and `setPreferredSize(new Dimension(800,600));`, which made a black oval appear and follow my mouse pointer, deleting the previous ovals. \r\n\r\nI have included the code for the two classes. Can anyone guide me on what could be wrong?\r\nWhen I change `JComponent` to `JPanel` it works. Why does it not work this way with JComponent?\r\n\r\n```java\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.event.MouseEvent;\r\nimport java.awt.event.MouseMotionListener;\r\nimport javax.swing.JComponent;\r\n\r\n\r\npublic class Painter extends JComponent implements MouseMotionListener {\r\n    private int x = -10;\r\n    private int y = -10;\r\n    \r\n    public Painter() {\r\n        addMouseMotionListener(this);\r\n        setPreferredSize(new Dimension(800,600));\r\n    }\t\r\n    \r\n    @Override\r\n    public void paint(Graphics g) {\r\n        Graphics2D g2 = (Graphics2D) g;\r\n        g2.setColor(Color.black);\r\n        g2.fillOval(x, y, 10, 10);\r\n    }\t\r\n    \r\n    @Override\r\n    public void mouseDragged(MouseEvent e) {\r\n        x = e.getX();\r\n        y = e.getY();\r\n        repaint();\r\n    }\r\n\r\n    @Override\r\n    public void mouseMoved(MouseEvent e) {\r\n        // do nothing\r\n    }\r\n}\r\n```\r\n\r\n```java\r\nimport javax.swing.JFrame;\r\n\r\npublic class Main{\r\n    public static void main(String[] args) {\r\n        JFrame frame = new JFrame();\r\n        Painter painter = new Painter();\r\n        frame.setSize(800, 600);\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.add(painter);\r\n        frame.setVisible(true);\r\n    }\r\n}\r\n```","title":"Problem drawing on JComponent via MouseMotionListener added to a JFrame","body":"<p>I want to draw ovals while dragging my mouse over a <code>JComponent</code> I added to a <code>JFrame</code>. I created two classes, one which extends <code>JComponent</code>, implements <code>MouseMotionListener</code> and overrides the paint(Graphics g) method, and another class with the main method in which I create a <code>JFrame</code> and add the <code>JComponent</code> to the frame. However, when I click and drag my mouse, nothing happens. I then added a default constructor to my <code>Painter</code> class and <code>addMouseMotionListener(this)</code> and <code>setPreferredSize(new Dimension(800,600));</code>, which made a black oval appear and follow my mouse pointer, deleting the previous ovals.</p>\n<p>I have included the code for the two classes. Can anyone guide me on what could be wrong?\nWhen I change <code>JComponent</code> to <code>JPanel</code> it works. Why does it not work this way with JComponent?</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseMotionListener;\nimport javax.swing.JComponent;\n\n\npublic class Painter extends JComponent implements MouseMotionListener {\n    private int x = -10;\n    private int y = -10;\n    \n    public Painter() {\n        addMouseMotionListener(this);\n        setPreferredSize(new Dimension(800,600));\n    }   \n    \n    @Override\n    public void paint(Graphics g) {\n        Graphics2D g2 = (Graphics2D) g;\n        g2.setColor(Color.black);\n        g2.fillOval(x, y, 10, 10);\n    }   \n    \n    @Override\n    public void mouseDragged(MouseEvent e) {\n        x = e.getX();\n        y = e.getY();\n        repaint();\n    }\n\n    @Override\n    public void mouseMoved(MouseEvent e) {\n        // do nothing\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.JFrame;\n\npublic class Main{\n    public static void main(String[] args) {\n        JFrame frame = new JFrame();\n        Painter painter = new Painter();\n        frame.setSize(800, 600);\n        frame.setLocationRelativeTo(null);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(painter);\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":["java","scala","configuration","databricks","jsonnet"],"owner":{"account_id":20310607,"reputation":1,"user_id":14897789,"display_name":"Anuran Roy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687013208,"creation_date":1687013208,"question_id":76496719,"body_markdown":"I am new to using Jsonnet and I am trying to create a configuration file using `sjsonnet` by DataBricks in a Java codebase. The README on their Github Repo explains how to use Jsonnet without external variables, which is as follows:\r\n\r\n```java\r\n// JsonnetRunner.java\r\n...\r\nint res = sjsonnet.SjsonnetMain.main0(\r\n    new String[]{&quot;foo.jsonnet&quot;},\r\n    new DefaultParseCache,\r\n    System.in,\r\n    System.out,\r\n    System.err,\r\n    os.package$.MODULE$.pwd(),\r\n    scala.None$.empty()\r\n);\r\n...\r\n```\r\n\r\nI want to run a Jsonnet file that takes in two `--ext-str` arguments. I am able to do this by running `jsonnet --ext-str &quot;var1=Foo&quot; --ext-str &quot;var2=Bar&quot;` using the official Jsonnet implementation, and as `./sjsonnet.jar --ext-str &quot;var1=Foo&quot; --ext-str &quot;var2=Bar&quot;` using the Sjsonnet JAR. My question is: how can I implement this in my Java code? Additionally, I would like to get the JSON string once the Jsonnet execution finishes instead of getting it on the output. \r\n\r\nThank you in advance!","title":"Adding external variables to sjsonnet","body":"<p>I am new to using Jsonnet and I am trying to create a configuration file using <code>sjsonnet</code> by DataBricks in a Java codebase. The README on their Github Repo explains how to use Jsonnet without external variables, which is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// JsonnetRunner.java\n...\nint res = sjsonnet.SjsonnetMain.main0(\n    new String[]{&quot;foo.jsonnet&quot;},\n    new DefaultParseCache,\n    System.in,\n    System.out,\n    System.err,\n    os.package$.MODULE$.pwd(),\n    scala.None$.empty()\n);\n...\n</code></pre>\n<p>I want to run a Jsonnet file that takes in two <code>--ext-str</code> arguments. I am able to do this by running <code>jsonnet --ext-str &quot;var1=Foo&quot; --ext-str &quot;var2=Bar&quot;</code> using the official Jsonnet implementation, and as <code>./sjsonnet.jar --ext-str &quot;var1=Foo&quot; --ext-str &quot;var2=Bar&quot;</code> using the Sjsonnet JAR. My question is: how can I implement this in my Java code? Additionally, I would like to get the JSON string once the Jsonnet execution finishes instead of getting it on the output.</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","spring-boot","jpa"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1687049082,"post_id":76496691,"comment_id":134882712,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":28730006,"reputation":1,"user_id":22002161,"display_name":"Carlo97"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687012904,"creation_date":1687012904,"question_id":76496691,"body_markdown":"i&#39;m developing a management software for resturant (it&#39;s an university project). This is the situation: i have an object Ordination - Ordinazione - (I&#39;m from Italy, so in the example all this name will be in italian). I&#39;m explainig the entire problem first and then i will show you all the interested code. An ordination, in my logic, is composed by an object called InfoOrdine - information about the ordination -. Because when a waiter will note that, he had to consider the number of plate and the state of preparation for each of them.\r\nIn terms of logic, in the class Ordination i have something that for each plate associate ad information about all of this plate.\r\nI have used a map for the implementation (Map\\&lt;Piatto, InfoOrdine\\&gt; infopiatto) and used the @OneToMany tag, because one ordination instance can have multiple record of piatto-information.\r\nBut when i save this in PostgreSQL through JPARepository, something strage happen. The table ordination with the attribute id_ordinazione, id_tavolo ed evasa is saved correctly. In the other side, the table info_ordine is &quot;half-saved&quot;. I&#39;m will show you the screenshot:\r\n\r\n[enter image description here](https://i.stack.imgur.com/pkwFn.png)\r\n\r\nid_ordinazion and id_piatto aren&#39;t saved and i don&#39;t know why. This two attributes are really importat because through them i can join the table with Ordinazione and obtain all the information that I want. Even more weird (for me obviuosly, i know that for someone else is easy to resolve this) is the fact that a new column is created autunomly (info_piatto_key) and act the role of id_piatto.\r\nI&#39;m showing you the class:\r\n\r\n```\r\npackage com.springone3.demo.Entity;\r\n\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\nimport com.springone3.demo.Controller.PiattoController;\r\nimport com.springone3.demo.MyCustomInfoPiattoDeserializer;\r\nimport jakarta.persistence.*;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\n\r\nimport java.lang.reflect.Array;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\n\r\n@Entity\r\n@Table\r\npublic class Ordinazione {\r\n\r\n\r\n    @Id\r\n    @SequenceGenerator(\r\n            name = &quot;ordinazione_sequence&quot;,\r\n            sequenceName = &quot;ordinazione_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;ordinazione_sequence&quot;\r\n    )\r\n    private Long idOrdinazione;\r\n\r\n    private String idTavolo;\r\n\r\n    // L&#39;opzione CacadeType.ALL assicura che tutte le operazioni di persistenza (inserimento, aggiornamento, cancellazione) eseguite sull&#39;oggetto Ordinazione si riflettano anche sugli oggetti\r\n    // InfoOrdine associati. L&#39;opzione orphanRemoval = true permette di rimuovere automaticamente gli oggetti InfoOrdine orfani quando vengono rimossi dalla mappa &#39;infoOrdini&#39;\r\n\r\n    @OneToMany(mappedBy = &quot;ordinazione&quot;,cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\r\n    Map&lt;Piatto, InfoOrdine&gt; infoPiatto;\r\n\r\n    private boolean evasa = false;\r\n   \r\n\r\n    public Ordinazione(Long idOrdinazione, String idTavolo) {\r\n        this.idOrdinazione = idOrdinazione;\r\n        this.idTavolo = idTavolo;\r\n        this.infoPiatto = new HashMap&lt;&gt;();\r\n    }\r\n\r\n  \r\n    public Ordinazione() {\r\n    }\r\n\r\n\r\n    // getter and settet\r\n  \r\n\r\n    /*\r\n\r\n    public void aggiungiPiatto(Piatto piatto, Integer quantity) {\r\n        InfoOrdine info = new InfoOrdine(quantity, InfoOrdine.StatoOrdine.DA_PREPARARE);\r\n        infoPiatto.put(piatto, info);\r\n    }\r\n\r\n     */\r\n\r\n    public void aggiungiPiatto(Piatto piatto, Integer quantity) {\r\n        InfoOrdine info = new InfoOrdine(quantity, InfoOrdine.StatoOrdine.DA_PREPARARE, this);\r\n        infoPiatto.put(piatto, info);\r\n    }\r\n\r\n\r\n\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;idOrdinazione=&quot; + idOrdinazione +\r\n                &quot;, idTavolo=&#39;&quot; + idTavolo + &#39;\\&#39;&#39; +\r\n                &quot;, infoPiatto=&quot; + infoPiatto.toString() +\r\n                &quot;, evasa=&quot; + evasa +\r\n                &#39;}&#39;;\r\n    }\r\n\r\n\r\n\r\n}\r\n```\r\n\r\nprivate idOrdinazione - the ID of the table/class - ;\r\nprivate String idTavolo - an identifier for specify the table (in sense of resturant and not relational database).\r\nprivate boolean evasa - the customer has received his food? -\r\nMap\\&lt;Piatto, InfoOrdine\\&gt; infoPiatto.\r\n\r\nThe last one is the critical part. In fact, i have two custom object type for key - value of the map.\r\nThe first one, is refered to plate of food. The class is the following:\r\n\r\n```\r\n\r\n@Entity\r\n@Table\r\npublic class Piatto {\r\n\r\n    @Id\r\n    @SequenceGenerator(\r\n            name = &quot;piatto_sequence&quot;,\r\n            sequenceName = &quot;piatto_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;piatto_sequence&quot;\r\n    )\r\n\r\n    private Long idPiatto;\r\n\r\n\r\n    private String nome;\r\n\r\n    private String descrizione;\r\n\r\n    private String allergeni;\r\n\r\n\r\n\r\n    //@JsonManagedReference\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    @JoinColumn(\r\n            name = &quot;id_categoria&quot;\r\n          // nullable = false\r\n           // referencedColumnName = &quot;id_categoria&quot;\r\n    )\r\n    private Categoria categoria;\r\n    private String costo;\r\n\r\n    public Piatto(Long idPiatto, Categoria categoria, String nome, String descrizione, String allergeni, String costo) {\r\n        this.idPiatto = idPiatto;\r\n        this.categoria = categoria;\r\n        this.nome = nome;\r\n        this.descrizione = descrizione;\r\n        this.allergeni = allergeni;\r\n        this.costo = costo;\r\n    }\r\n\r\n    public Piatto(Long idPiatto, String nome, String descrizione, String allergeni, String costo) {\r\n        this.idPiatto = idPiatto;\r\n        this.nome = nome;\r\n        this.descrizione = descrizione;\r\n        this.allergeni = allergeni;\r\n        this.costo = costo;\r\n    }\r\n\r\n\r\n    public Piatto(){}\r\n\r\n\r\n\r\n   // getter and setter\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;[idPiatto:&#39;&quot; + idPiatto + &#39;\\&#39;&#39; +\r\n                &quot;, nome:&#39;&quot; + nome + &#39;\\&#39;&#39; +\r\n                &quot;, descrizione:&#39;&quot; + descrizione + &#39;\\&#39;&#39; +\r\n                &quot;, allergeni:&#39;&quot; + allergeni + &#39;\\&#39;&#39; +\r\n                &quot;, categoria:&#39;&quot; + categoria + &#39;\\&#39;&#39; +\r\n                &quot;, costo:&#39;&quot; + costo  + &#39;\\&#39;&#39; + &quot;]&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe second is referred to information about the ordination; for example two plate of appetizers, one of main course, etc with the state of preparations.\r\nThe class is the following:\r\n\r\n```\r\n@Entity\r\n@Table\r\npublic class InfoOrdine {\r\n\r\n    @Id\r\n\r\n    @SequenceGenerator(\r\n            name = &quot;info_ordine_sequence&quot;,\r\n            sequenceName = &quot;info_ordine_sequence&quot;,\r\n            allocationSize = 1\r\n    )\r\n    @GeneratedValue(\r\n            strategy = GenerationType.SEQUENCE,\r\n            generator = &quot;info_ordine_sequence&quot;\r\n    )\r\n    private Long id;\r\n\r\n//    @EmbeddedId\r\n//    private InfoOrdineId id;\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    @OnDelete(action = OnDeleteAction.CASCADE)\r\n    // @MapsId(&quot;idOrdinazione&quot;)\r\n    @JoinColumn(name = &quot;id_ordinazione&quot;)\r\n    private Ordinazione ordinazione;\r\n\r\n    @OneToOne\r\n    // @MapsId(&quot;idPiatto&quot;)\r\n    @JoinColumn(name = &quot;id_piatto&quot;)\r\n    private Piatto piatto;\r\n    private int quantity;\r\n    @Enumerated(EnumType.STRING)\r\n    private InfoOrdine.StatoOrdine stato;\r\n\r\n    /*\r\n\r\n    public InfoOrdine(int quantity, InfoOrdine.StatoOrdine stato) {\r\n        this.quantity = quantity;\r\n        this.stato = stato;\r\n    }\r\n\r\n     */\r\n\r\n    public InfoOrdine(int quantity, InfoOrdine.StatoOrdine stato, Ordinazione ordinazione) {\r\n        this.ordinazione = ordinazione;\r\n        this.quantity = quantity;\r\n        this.stato = stato;\r\n    }\r\n\r\n    public InfoOrdine(int quantity){\r\n        this.quantity = quantity;\r\n        this.stato = StatoOrdine.DA_PREPARARE;\r\n    }\r\n\r\n    public InfoOrdine() {\r\n    }\r\n\r\n    // getter and setter\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;[quantity:&#39;&quot; + quantity + &#39;\\&#39;&#39; +\r\n                &quot;, stato:&#39;&quot; + stato + &#39;\\&#39;&#39; + &quot;]&quot;;\r\n    }\r\n    public enum StatoOrdine {\r\n        DA_PREPARARE,\r\n        IN_PREPARAZIONE,\r\n        COMPLETATO;\r\n    }\r\n}\r\n```\r\n\r\nPlease, i&#39;m stuck in this problem and i don&#39;t know how to resolve. I&#39;m sorry for this very long question.\r\n\r\nI expect to save tha table indo_ordine with tha right value of column id_piatto and id_ordinazione.","title":"Java Spring Boot, probelm to save into PostgreSQL a map of two custom object","body":"<p>i'm developing a management software for resturant (it's an university project). This is the situation: i have an object Ordination - Ordinazione - (I'm from Italy, so in the example all this name will be in italian). I'm explainig the entire problem first and then i will show you all the interested code. An ordination, in my logic, is composed by an object called InfoOrdine - information about the ordination -. Because when a waiter will note that, he had to consider the number of plate and the state of preparation for each of them.\nIn terms of logic, in the class Ordination i have something that for each plate associate ad information about all of this plate.\nI have used a map for the implementation (Map&lt;Piatto, InfoOrdine&gt; infopiatto) and used the @OneToMany tag, because one ordination instance can have multiple record of piatto-information.\nBut when i save this in PostgreSQL through JPARepository, something strage happen. The table ordination with the attribute id_ordinazione, id_tavolo ed evasa is saved correctly. In the other side, the table info_ordine is &quot;half-saved&quot;. I'm will show you the screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/pkwFn.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>id_ordinazion and id_piatto aren't saved and i don't know why. This two attributes are really importat because through them i can join the table with Ordinazione and obtain all the information that I want. Even more weird (for me obviuosly, i know that for someone else is easy to resolve this) is the fact that a new column is created autunomly (info_piatto_key) and act the role of id_piatto.\nI'm showing you the class:</p>\n<pre><code>package com.springone3.demo.Entity;\n\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\nimport com.springone3.demo.Controller.PiattoController;\nimport com.springone3.demo.MyCustomInfoPiattoDeserializer;\nimport jakarta.persistence.*;\nimport org.springframework.beans.factory.annotation.Autowired;\n\nimport java.lang.reflect.Array;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n\n@Entity\n@Table\npublic class Ordinazione {\n\n\n    @Id\n    @SequenceGenerator(\n            name = &quot;ordinazione_sequence&quot;,\n            sequenceName = &quot;ordinazione_sequence&quot;,\n            allocationSize = 1\n    )\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;ordinazione_sequence&quot;\n    )\n    private Long idOrdinazione;\n\n    private String idTavolo;\n\n    // L'opzione CacadeType.ALL assicura che tutte le operazioni di persistenza (inserimento, aggiornamento, cancellazione) eseguite sull'oggetto Ordinazione si riflettano anche sugli oggetti\n    // InfoOrdine associati. L'opzione orphanRemoval = true permette di rimuovere automaticamente gli oggetti InfoOrdine orfani quando vengono rimossi dalla mappa 'infoOrdini'\n\n    @OneToMany(mappedBy = &quot;ordinazione&quot;,cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)\n    Map&lt;Piatto, InfoOrdine&gt; infoPiatto;\n\n    private boolean evasa = false;\n   \n\n    public Ordinazione(Long idOrdinazione, String idTavolo) {\n        this.idOrdinazione = idOrdinazione;\n        this.idTavolo = idTavolo;\n        this.infoPiatto = new HashMap&lt;&gt;();\n    }\n\n  \n    public Ordinazione() {\n    }\n\n\n    // getter and settet\n  \n\n    /*\n\n    public void aggiungiPiatto(Piatto piatto, Integer quantity) {\n        InfoOrdine info = new InfoOrdine(quantity, InfoOrdine.StatoOrdine.DA_PREPARARE);\n        infoPiatto.put(piatto, info);\n    }\n\n     */\n\n    public void aggiungiPiatto(Piatto piatto, Integer quantity) {\n        InfoOrdine info = new InfoOrdine(quantity, InfoOrdine.StatoOrdine.DA_PREPARARE, this);\n        infoPiatto.put(piatto, info);\n    }\n\n\n\n\n    @Override\n    public String toString() {\n        return &quot;idOrdinazione=&quot; + idOrdinazione +\n                &quot;, idTavolo='&quot; + idTavolo + '\\'' +\n                &quot;, infoPiatto=&quot; + infoPiatto.toString() +\n                &quot;, evasa=&quot; + evasa +\n                '}';\n    }\n\n\n\n}\n</code></pre>\n<p>private idOrdinazione - the ID of the table/class - ;\nprivate String idTavolo - an identifier for specify the table (in sense of resturant and not relational database).\nprivate boolean evasa - the customer has received his food? -\nMap&lt;Piatto, InfoOrdine&gt; infoPiatto.</p>\n<p>The last one is the critical part. In fact, i have two custom object type for key - value of the map.\nThe first one, is refered to plate of food. The class is the following:</p>\n<pre><code>\n@Entity\n@Table\npublic class Piatto {\n\n    @Id\n    @SequenceGenerator(\n            name = &quot;piatto_sequence&quot;,\n            sequenceName = &quot;piatto_sequence&quot;,\n            allocationSize = 1\n    )\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;piatto_sequence&quot;\n    )\n\n    private Long idPiatto;\n\n\n    private String nome;\n\n    private String descrizione;\n\n    private String allergeni;\n\n\n\n    //@JsonManagedReference\n    @ManyToOne(fetch = FetchType.LAZY)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    @JoinColumn(\n            name = &quot;id_categoria&quot;\n          // nullable = false\n           // referencedColumnName = &quot;id_categoria&quot;\n    )\n    private Categoria categoria;\n    private String costo;\n\n    public Piatto(Long idPiatto, Categoria categoria, String nome, String descrizione, String allergeni, String costo) {\n        this.idPiatto = idPiatto;\n        this.categoria = categoria;\n        this.nome = nome;\n        this.descrizione = descrizione;\n        this.allergeni = allergeni;\n        this.costo = costo;\n    }\n\n    public Piatto(Long idPiatto, String nome, String descrizione, String allergeni, String costo) {\n        this.idPiatto = idPiatto;\n        this.nome = nome;\n        this.descrizione = descrizione;\n        this.allergeni = allergeni;\n        this.costo = costo;\n    }\n\n\n    public Piatto(){}\n\n\n\n   // getter and setter\n\n    @Override\n    public String toString() {\n        return &quot;[idPiatto:'&quot; + idPiatto + '\\'' +\n                &quot;, nome:'&quot; + nome + '\\'' +\n                &quot;, descrizione:'&quot; + descrizione + '\\'' +\n                &quot;, allergeni:'&quot; + allergeni + '\\'' +\n                &quot;, categoria:'&quot; + categoria + '\\'' +\n                &quot;, costo:'&quot; + costo  + '\\'' + &quot;]&quot;;\n    }\n\n}\n</code></pre>\n<p>The second is referred to information about the ordination; for example two plate of appetizers, one of main course, etc with the state of preparations.\nThe class is the following:</p>\n<pre><code>@Entity\n@Table\npublic class InfoOrdine {\n\n    @Id\n\n    @SequenceGenerator(\n            name = &quot;info_ordine_sequence&quot;,\n            sequenceName = &quot;info_ordine_sequence&quot;,\n            allocationSize = 1\n    )\n    @GeneratedValue(\n            strategy = GenerationType.SEQUENCE,\n            generator = &quot;info_ordine_sequence&quot;\n    )\n    private Long id;\n\n//    @EmbeddedId\n//    private InfoOrdineId id;\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @OnDelete(action = OnDeleteAction.CASCADE)\n    // @MapsId(&quot;idOrdinazione&quot;)\n    @JoinColumn(name = &quot;id_ordinazione&quot;)\n    private Ordinazione ordinazione;\n\n    @OneToOne\n    // @MapsId(&quot;idPiatto&quot;)\n    @JoinColumn(name = &quot;id_piatto&quot;)\n    private Piatto piatto;\n    private int quantity;\n    @Enumerated(EnumType.STRING)\n    private InfoOrdine.StatoOrdine stato;\n\n    /*\n\n    public InfoOrdine(int quantity, InfoOrdine.StatoOrdine stato) {\n        this.quantity = quantity;\n        this.stato = stato;\n    }\n\n     */\n\n    public InfoOrdine(int quantity, InfoOrdine.StatoOrdine stato, Ordinazione ordinazione) {\n        this.ordinazione = ordinazione;\n        this.quantity = quantity;\n        this.stato = stato;\n    }\n\n    public InfoOrdine(int quantity){\n        this.quantity = quantity;\n        this.stato = StatoOrdine.DA_PREPARARE;\n    }\n\n    public InfoOrdine() {\n    }\n\n    // getter and setter\n\n    @Override\n    public String toString() {\n        return &quot;[quantity:'&quot; + quantity + '\\'' +\n                &quot;, stato:'&quot; + stato + '\\'' + &quot;]&quot;;\n    }\n    public enum StatoOrdine {\n        DA_PREPARARE,\n        IN_PREPARAZIONE,\n        COMPLETATO;\n    }\n}\n</code></pre>\n<p>Please, i'm stuck in this problem and i don't know how to resolve. I'm sorry for this very long question.</p>\n<p>I expect to save tha table indo_ordine with tha right value of column id_piatto and id_ordinazione.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1687012012,"post_id":76496400,"comment_id":134879111,"body_markdown":"[Here is the API specification](https://docs.oracle.com/en/java/javase/20/docs/api/index.html)","body":"<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/index.html\" rel=\"nofollow noreferrer\">Here is the API specification</a>"}],"answers":[{"tags":[],"owner":{"account_id":2392155,"reputation":2372,"user_id":2091803,"accept_rate":86,"display_name":"Abdullah Leghari"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687011235,"creation_date":1687011235,"answer_id":76496587,"question_id":76496400,"body_markdown":"Yes, there are, though these are nowadays less frequently used because of the free availability of OpenJDK SDK (which includes JVM, JRE, Java Class libraries (JCL), and everything).\r\n\r\nA notable project was [Apache Harmony][1] which had implementations for almost all classes available in Java SE 5.0. It had implemented 99% of Java SE 5 classes and about 97% of Java SE 6. Link [here][2].\r\n\r\nApache Harmony could run several large projects including Eclipse, and TomCat, among others. Also, Android was based on classes from this project.\r\n\r\nGNU had their project, [GNU Class Path][3]. It states implementing &gt;95% of classes for Java up to version 6.\r\n\r\nIBM also provides its own full [Java implementations][4] as a complete replacement for what Oracle is attempting to serve. IBM implementations are used mainly on their Z/OS-based mainframes.\r\n\r\nThere were/are several JCL implementations. Now that OpenJDK is freely available there is less incentive in using alternates. Android started using OpenJDK JCL. When Java was not free, there were more efforts towards non-Oracle JVMs, JREs, and JCLs (which are bundled together to make the JDK)\r\n\r\n\r\n  [1]: https://harmony.apache.org/subcomponents/classlibrary/\r\n  [2]: http://people.apache.org/~hindessm/japi/\r\n  [3]: https://www.gnu.org/software/classpath/\r\n  [4]: https://www.ibm.com/support/pages/java-sdk/","title":"Java : Are there non-Oracle implementations of Java standard classes?","body":"<p>Yes, there are, though these are nowadays less frequently used because of the free availability of OpenJDK SDK (which includes JVM, JRE, Java Class libraries (JCL), and everything).</p>\n<p>A notable project was <a href=\"https://harmony.apache.org/subcomponents/classlibrary/\" rel=\"nofollow noreferrer\">Apache Harmony</a> which had implementations for almost all classes available in Java SE 5.0. It had implemented 99% of Java SE 5 classes and about 97% of Java SE 6. Link <a href=\"http://people.apache.org/%7Ehindessm/japi/\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Apache Harmony could run several large projects including Eclipse, and TomCat, among others. Also, Android was based on classes from this project.</p>\n<p>GNU had their project, <a href=\"https://www.gnu.org/software/classpath/\" rel=\"nofollow noreferrer\">GNU Class Path</a>. It states implementing &gt;95% of classes for Java up to version 6.</p>\n<p>IBM also provides its own full <a href=\"https://www.ibm.com/support/pages/java-sdk/\" rel=\"nofollow noreferrer\">Java implementations</a> as a complete replacement for what Oracle is attempting to serve. IBM implementations are used mainly on their Z/OS-based mainframes.</p>\n<p>There were/are several JCL implementations. Now that OpenJDK is freely available there is less incentive in using alternates. Android started using OpenJDK JCL. When Java was not free, there were more efforts towards non-Oracle JVMs, JREs, and JCLs (which are bundled together to make the JDK)</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687012260,"creation_date":1687011840,"answer_id":76496630,"question_id":76496400,"body_markdown":"I don&#39;t believe there is a _standardization_ of the framework classes.\r\n\r\nFor example, the _[OpenJDK](https://openjdk.org/)_ utilizes proposals for implementing new, and deprecating old, logic.  \r\nYou can review a template, here.&amp;nbsp; _[OpenJDK &amp;ndash; JEP 2: JEP Template](https://openjdk.org/jeps/2)_.\r\n\r\nIf it were a standardization, there would be a more formal process.\r\n\r\nAs _@andrewJames_ mentioned in the comments, there is also the _[Java Language Specification](https://docs.oracle.com/javase/specs/jls/se20/html/index.html)_, which, at the least, provides a specification on this topic.\r\n\r\n_[1.4. Relationship to Predefined Classes and Interfaces](https://docs.oracle.com/javase/specs/jls/se20/html/jls-1.html#jls-1.4)_.\r\n\r\n&gt; _&quot;... In particular, some classes and interfaces have a special relationship with the Java programming language. Examples include classes such as Object, Class, ClassLoader, String, and Thread, and the classes and interfaces in the package java.lang.reflect, among others. This specification constrains the behavior of such classes and interfaces, but does not provide a complete specification for them. The reader is referred to the Java SE Platform API documentation. ...&quot;_","title":"Java : Are there non-Oracle implementations of Java standard classes?","body":"<p>I don't believe there is a <em>standardization</em> of the framework classes.</p>\n<p>For example, the <em><a href=\"https://openjdk.org/\" rel=\"nofollow noreferrer\">OpenJDK</a></em> utilizes proposals for implementing new, and deprecating old, logic.<br />\nYou can review a template, here.  <em><a href=\"https://openjdk.org/jeps/2\" rel=\"nofollow noreferrer\">OpenJDK – JEP 2: JEP Template</a></em>.</p>\n<p>If it were a standardization, there would be a more formal process.</p>\n<p>As <em>@andrewJames</em> mentioned in the comments, there is also the <em><a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/index.html\" rel=\"nofollow noreferrer\">Java Language Specification</a></em>, which, at the least, provides a specification on this topic.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-1.html#jls-1.4\" rel=\"nofollow noreferrer\">1.4. Relationship to Predefined Classes and Interfaces</a></em>.</p>\n<blockquote>\n<p><em>&quot;... In particular, some classes and interfaces have a special relationship with the Java programming language. Examples include classes such as Object, Class, ClassLoader, String, and Thread, and the classes and interfaces in the package java.lang.reflect, among others. This specification constrains the behavior of such classes and interfaces, but does not provide a complete specification for them. The reader is referred to the Java SE Platform API documentation. ...&quot;</em></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":28783522,"reputation":42,"user_id":22044581,"display_name":"Preston Thorpe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687012485,"creation_date":1687012485,"answer_id":76496665,"question_id":76496400,"body_markdown":"Have you looked into GNU Classpath? https://en.wikipedia.org/wiki/GNU_Classpath\r\n\r\nThis is the only other complete implementation of the java std lib that I am aware of, although there definitely may be more out there. I am not sure if each JDK (OpenJDK, Coretto, etc) has their own libraries, but this seems to answer your question whether or not each one is required to implement Oracles std lib.\r\n\r\nEDIT: 30 min wait time to answer, I missed it and someone already mentioned this and gave a far better answer.","title":"Java : Are there non-Oracle implementations of Java standard classes?","body":"<p>Have you looked into GNU Classpath? <a href=\"https://en.wikipedia.org/wiki/GNU_Classpath\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/GNU_Classpath</a></p>\n<p>This is the only other complete implementation of the java std lib that I am aware of, although there definitely may be more out there. I am not sure if each JDK (OpenJDK, Coretto, etc) has their own libraries, but this seems to answer your question whether or not each one is required to implement Oracles std lib.</p>\n<p>EDIT: 30 min wait time to answer, I missed it and someone already mentioned this and gave a far better answer.</p>\n"}],"owner":{"account_id":151036,"reputation":2696,"user_id":364651,"accept_rate":64,"display_name":"johngreen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76496587,"answer_count":3,"score":4,"last_activity_date":1687012485,"creation_date":1687008571,"question_id":76496400,"body_markdown":"As far as I understand, anyone can implement a JVM (Java Virtual Machine) that conforms to the [JVM specification][1]. However, when it comes to the standard Java library (e.g. classes like `String`, `ArrayList`, etc.), are compilers allowed to re-implement these classes, or any JDK *has* to use the implementations provided by Oracle? If third-party implementations are allowed, can anyone please point to a few of these because I have searched the Internet a lot and haven&#39;t found any answer yet.\r\n\r\nI am new to the Java ecosystem have a long C++ background. In C++, the [Standard Template Library][2] is standarised as part of the C++ standard and every compiler implements its own version. However, I have failed to find a similar standard for Java library classes. There is, of course, the [Oracle API documentation][3] but it doesn&#39;t really compare with the detailed specification C++ provides.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se8/html/\r\n  [2]: https://en.cppreference.com/w/cpp/standard_library\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/index.html","title":"Java : Are there non-Oracle implementations of Java standard classes?","body":"<p>As far as I understand, anyone can implement a JVM (Java Virtual Machine) that conforms to the <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/\" rel=\"nofollow noreferrer\">JVM specification</a>. However, when it comes to the standard Java library (e.g. classes like <code>String</code>, <code>ArrayList</code>, etc.), are compilers allowed to re-implement these classes, or any JDK <em>has</em> to use the implementations provided by Oracle? If third-party implementations are allowed, can anyone please point to a few of these because I have searched the Internet a lot and haven't found any answer yet.</p>\n<p>I am new to the Java ecosystem have a long C++ background. In C++, the <a href=\"https://en.cppreference.com/w/cpp/standard_library\" rel=\"nofollow noreferrer\">Standard Template Library</a> is standarised as part of the C++ standard and every compiler implements its own version. However, I have failed to find a similar standard for Java library classes. There is, of course, the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/index.html\" rel=\"nofollow noreferrer\">Oracle API documentation</a> but it doesn't really compare with the detailed specification C++ provides.</p>\n"},{"tags":["java","rest","web","apache-karaf"],"comments":[{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1687015226,"post_id":76496603,"comment_id":134879516,"body_markdown":"I&#39;ve created https://github.com/ops4j/org.ops4j.pax.web/issues/1868 because this may be a problem after the refactoring. I&#39;ll check after the weekend.","body":"I&#39;ve created <a href=\"https://github.com/ops4j/org.ops4j.pax.web/issues/1868\" rel=\"nofollow noreferrer\">github.com/ops4j/org.ops4j.pax.web/issues/1868</a> because this may be a problem after the refactoring. I&#39;ll check after the weekend."},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687149092,"post_id":76496603,"comment_id":134891053,"body_markdown":"Ok Thanks for raising the bug in pax web, pls reply once you checked.","body":"Ok Thanks for raising the bug in pax web, pls reply once you checked."},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687195085,"post_id":76496603,"comment_id":134899788,"body_markdown":"Any update on this please? @GrzegorzGrzybek","body":"Any update on this please? @GrzegorzGrzybek"},{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1687239269,"post_id":76496603,"comment_id":134904642,"body_markdown":"Not yet. Give me some time please.","body":"Not yet. Give me some time please."},{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1687264237,"post_id":76496603,"comment_id":134909599,"body_markdown":"I just checked that this attribute is present in Pax Web 8 used in Karaf 4.4.3. You&#39;d have to provide more details about how did you configure Karaf and CXF (?) here. Where do you use HttpsFilter? Please add details to https://github.com/ops4j/org.ops4j.pax.web/issues/1868","body":"I just checked that this attribute is present in Pax Web 8 used in Karaf 4.4.3. You&#39;d have to provide more details about how did you configure Karaf and CXF (?) here. Where do you use HttpsFilter? Please add details to <a href=\"https://github.com/ops4j/org.ops4j.pax.web/issues/1868\" rel=\"nofollow noreferrer\">github.com/ops4j/org.ops4j.pax.web/issues/1868</a>"},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687280345,"post_id":76496603,"comment_id":134913464,"body_markdown":"@GrzegorzGrzybek could you pls let me know when does this attribute &quot;Javax.servlet.request.X509certificate&quot; get populated in containerrequestcontext before it comes to filter method.","body":"@GrzegorzGrzybek could you pls let me know when does this attribute &quot;Javax.servlet.request.X509certificate&quot; get populated in containerrequestcontext before it comes to filter method."},{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1687322899,"post_id":76496603,"comment_id":134918534,"body_markdown":"It depends on which Pax Web runtime you use (Jetty? Tomcat? Undertow?) If (default in Karaf 4.4) it&#39;s Jetty, the attribute is &quot;virtual&quot;: https://github.com/eclipse/jetty.project/blob/jetty-9.4.51.v20230217/jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java#L355","body":"It depends on which Pax Web runtime you use (Jetty? Tomcat? Undertow?) If (default in Karaf 4.4) it&#39;s Jetty, the attribute is &quot;virtual&quot;: <a href=\"https://github.com/eclipse/jetty.project/blob/jetty-9.4.51.v20230217/jetty-server/src/main/java/org/eclipse/jetty/server/SecureRequestCustomizer.java#L355\" rel=\"nofollow noreferrer\">github.com/eclipse/jetty.project/blob/jetty-9.4.51.v20230217&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687324435,"post_id":76496603,"comment_id":134918721,"body_markdown":"Any idea on how does containerrequestcontext  gets built with Javax.servlet.request.X509certificate before filter method?","body":"Any idea on how does containerrequestcontext  gets built with Javax.servlet.request.X509certificate before filter method?"},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687334389,"post_id":76496603,"comment_id":134920559,"body_markdown":"we were using Jetty , pax web 8.0.15 and karaf 4.4.3, also we use pax web whiteboard feature. –","body":"we were using Jetty , pax web 8.0.15 and karaf 4.4.3, also we use pax web whiteboard feature. –"},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687335991,"post_id":76496603,"comment_id":134920946,"body_markdown":"we get only below property names if i do getPropertyNames from containerrequstcontext object    &quot; [org.glassfish.jersey.message.internal.TracingLogger, javax.servlet.request.key_size, org.eclipse.jetty.servlet.request.ssl_session, javax.servlet.request.cipher_suite, javax.servlet.request.ssl_session_id]&quot;  pls advise on this","body":"we get only below property names if i do getPropertyNames from containerrequstcontext object    &quot; [org.glassfish.jersey.message.internal.TracingLogger, javax.servlet.request.key_size, org.eclipse.jetty.servlet.request.ssl_session, javax.servlet.request.cipher_suite, javax.servlet.request.ssl_session_id]&quot;  pls advise on this"},{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1687340070,"post_id":76496603,"comment_id":134921886,"body_markdown":"do you have client certificate requirement turned on? (show me `etc/org.ops4j.pax.web.cfg`)","body":"do you have client certificate requirement turned on? (show me <code>etc&#47;org.ops4j.pax.web.cfg</code>)"},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687343514,"post_id":76496603,"comment_id":134922567,"body_markdown":"we have below props set in pax web cfg,  org.ops4j.pax.web.config.file=${karaf.etc}/jetty.xml\norg.osgi.service.http.port=${karaf.web.port}\norg.osgi.service.http.enabled=true\norg.osgi.service.http.secure.enabled=true\norg.osgi.service.http.secure.enabled.protocols=TLSv1.2\norg.osgi.service.http.port.secure=${karaf.web.secure.port}\norg.ops4j.pax.web.ssl.ciphersuites.included=&lt;some value&gt;\norg.ops4j.pax.web.ssl.clientauthwanted=true\norg.ops4j.pax.web.ssl.clientauthneeded=true","body":"we have below props set in pax web cfg,  org.ops4j.pax.web.config.file=${karaf.etc}/jetty.xml org.osgi.service.http.port=${karaf.web.port} org.osgi.service.http.enabled=true org.osgi.service.http.secure.enabled=true org.osgi.service.http.secure.enabled.protocols=TLSv1.2 org.osgi.service.http.port.secure=${karaf.web.secure.port} org.ops4j.pax.web.ssl.ciphersuites.included=&lt;some value&gt; org.ops4j.pax.web.ssl.clientauthwanted=true org.ops4j.pax.web.ssl.clientauthneeded=true"},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687348386,"post_id":76496603,"comment_id":134923592,"body_markdown":"@GrzegorzGrzybek pls help on this.","body":"@GrzegorzGrzybek pls help on this."},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687351325,"post_id":76496603,"comment_id":134924278,"body_markdown":"@GrzegorzGrzybek  After enabled debug logs, i saw we were getting  below from jettyAwareLogger,\n-&gt;SslConnection@b4b9f98{NOT_HANDSHAKING,eio=-1/-1,di=-1,fill=IDLE,flush=IDLE}\nAny idea on this? Any property we need to add to solve this?","body":"@GrzegorzGrzybek  After enabled debug logs, i saw we were getting  below from jettyAwareLogger, -&gt;SslConnection@b4b9f98{NOT_HANDSHAKING,eio=-1/-1,di=-1,fill&zwnj;&#8203;=IDLE,flush=IDLE} Any idea on this? Any property we need to add to solve this?"},{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1687359412,"post_id":76496603,"comment_id":134926432,"body_markdown":"SO comments are not the best way to solve this issue. Please add more details (like logs and configs) to https://github.com/ops4j/org.ops4j.pax.web/issues/1868. Seeing the bundles you have installed would also help (in Karaf: `la -l`)","body":"SO comments are not the best way to solve this issue. Please add more details (like logs and configs) to <a href=\"https://github.com/ops4j/org.ops4j.pax.web/issues/1868\" rel=\"nofollow noreferrer\">github.com/ops4j/org.ops4j.pax.web/issues/1868</a>. Seeing the bundles you have installed would also help (in Karaf: <code>la -l</code>)"},{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1687359475,"post_id":76496603,"comment_id":134926451,"body_markdown":"But the solution may be quicker ;) Use `org.ops4j.pax.web.ssl.clientauth.needed` instead of `org.ops4j.pax.web.ssl.clientauthneeded`","body":"But the solution may be quicker ;) Use <code>org.ops4j.pax.web.ssl.clientauth.needed</code> instead of <code>org.ops4j.pax.web.ssl.clientauthneeded</code>"},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687410688,"post_id":76496603,"comment_id":134933368,"body_markdown":"I tried with org.ops4j.pax.web.ssl.clientauth.needed But Getting error &quot;curl: (58) NSS: client certificate not found (nickname not specified)&quot; but we see osgi pax web documentation has this property named as  org.ops4j.pax.web.ssl.clientauthneeded   , pls suggest why you are asking to use org.ops4j.pax.web.ssl.clientauth.needed","body":"I tried with org.ops4j.pax.web.ssl.clientauth.needed But Getting error &quot;curl: (58) NSS: client certificate not found (nickname not specified)&quot; but we see osgi pax web documentation has this property named as  org.ops4j.pax.web.ssl.clientauthneeded   , pls suggest why you are asking to use org.ops4j.pax.web.ssl.clientauth.needed"},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687411320,"post_id":76496603,"comment_id":134933430,"body_markdown":"Updated with list of 3pp bundles we use in the github link you shared. pls check.","body":"Updated with list of 3pp bundles we use in the github link you shared. pls check."},{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1687411766,"post_id":76496603,"comment_id":134933489,"body_markdown":"Unfortunately Pax Web documentation is outdated... I didn&#39;t have time to update it.","body":"Unfortunately Pax Web documentation is outdated... I didn&#39;t have time to update it."},{"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"score":0,"creation_date":1687413448,"post_id":76496603,"comment_id":134933718,"body_markdown":"I have copied 3pp bundle list in the git hub , pls check and also we get error like &quot;curl: (58) NSS: client certificate not found (nickname not specified)&quot; after updated pax web property as you suggested. Any idea?","body":"I have copied 3pp bundle list in the git hub , pls check and also we get error like &quot;curl: (58) NSS: client certificate not found (nickname not specified)&quot; after updated pax web property as you suggested. Any idea?"}],"owner":{"account_id":24090368,"reputation":31,"user_id":18063716,"display_name":"Ganesh ram"},"comment_count":20,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687011542,"creation_date":1687011542,"question_id":76496603,"body_markdown":"Getting &quot;javax.servlet.request.X509Certificate&quot; as null in &quot;HttpsFilter&quot; class after Karaf step-up to 4.4.3\r\n\r\n```java\r\nimport javax.ws.rs.container.ContainerRequestFilter;\r\n\r\npublic class HttpsFilter implements ContainerRequestFilter {\r\n    @Override\r\n    public void filter(ContainerRequestContext containerRequestContext) {\r\n        if (isSecure) {\r\n            X509Certificate[] x509Certificate = (X509Certificate[]) containerRequestContext.getProperty(&quot;javax.servlet.request.X509Certificate&quot;);\r\n            --------------------\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAfter upgrading Karaf to 4.4.3, the &quot;javax.servlet.request.X509Certificate&quot; is returning as null within the &quot;HttpsFilter&quot; class, although it was working correctly before. Any ideas on how to resolve this issue would be appreciated.","title":"Getting javax.servlet.request.X509Certificate as null in HttpsFilter class after karaf stepup to 4.4.3","body":"<p>Getting &quot;javax.servlet.request.X509Certificate&quot; as null in &quot;HttpsFilter&quot; class after Karaf step-up to 4.4.3</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.ws.rs.container.ContainerRequestFilter;\n\npublic class HttpsFilter implements ContainerRequestFilter {\n    @Override\n    public void filter(ContainerRequestContext containerRequestContext) {\n        if (isSecure) {\n            X509Certificate[] x509Certificate = (X509Certificate[]) containerRequestContext.getProperty(&quot;javax.servlet.request.X509Certificate&quot;);\n            --------------------\n        }\n    }\n}\n</code></pre>\n<p>After upgrading Karaf to 4.4.3, the &quot;javax.servlet.request.X509Certificate&quot; is returning as null within the &quot;HttpsFilter&quot; class, although it was working correctly before. Any ideas on how to resolve this issue would be appreciated.</p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1646670282,"post_id":71383550,"comment_id":126175490,"body_markdown":"1) If I&#39;m not mistaken, this is a Gson design flaw probably here: https://github.com/google/gson/blob/bab0f5a1f7040389eb8fe0cb417ba1854e33dbd0/gson/src/main/java/com/google/gson/internal/bind/ReflectiveTypeAdapterFactory.java#L219 . 2) Why are you trying to write an empty string for an integer? 3) In general, try assigning the default field values to work around. 4) If neither works for you (and you still think string-integer coercion is totally fine), create a specialized DTO class for `CatDetails`.","body":"1) If I&#39;m not mistaken, this is a Gson design flaw probably here: <a href=\"https://github.com/google/gson/blob/bab0f5a1f7040389eb8fe0cb417ba1854e33dbd0/gson/src/main/java/com/google/gson/internal/bind/ReflectiveTypeAdapterFactory.java#L219\" rel=\"nofollow noreferrer\">github.com/google/gson/blob/&hellip;</a> . 2) Why are you trying to write an empty string for an integer? 3) In general, try assigning the default field values to work around. 4) If neither works for you (and you still think string-integer coercion is totally fine), create a specialized DTO class for <code>CatDetails</code>."},{"owner":{"account_id":11761233,"reputation":110,"user_id":8607192,"display_name":"Anil K"},"score":0,"creation_date":1646670628,"post_id":71383550,"comment_id":126175646,"body_markdown":"I agree for point -1 but when writing code registerTypeAdapter then work perfectly but it work for all Integer fields.","body":"I agree for point -1 but when writing code registerTypeAdapter then work perfectly but it work for all Integer fields."},{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1646671078,"post_id":71383550,"comment_id":126175854,"body_markdown":"Yeah, this is what I&#39;m talking about: `@JsonAdapter` probably can&#39;t work for null fields. So you seem to have ran into a Gson bug but I cannot double check it right now, something is telling me so. Also, consider the point #4 and points #2 and #3 together: extract a specialized DTO (Data Transfer Object) class to map all the fields that Gson can support without tricks, probably holding the integer-string coercion mapping and keeping default values where necessary.","body":"Yeah, this is what I&#39;m talking about: <code>@JsonAdapter</code> probably can&#39;t work for null fields. So you seem to have ran into a Gson bug but I cannot double check it right now, something is telling me so. Also, consider the point #4 and points #2 and #3 together: extract a specialized DTO (Data Transfer Object) class to map all the fields that Gson can support without tricks, probably holding the integer-string coercion mapping and keeping default values where necessary."},{"owner":{"account_id":11761233,"reputation":110,"user_id":8607192,"display_name":"Anil K"},"score":0,"creation_date":1646671218,"post_id":71383550,"comment_id":126175923,"body_markdown":"Sorry for partial reply.. I can choose other points.. But still some challenge.. 2) Actually target system accepting same. 3) Default value give a different answer when we pass zero. Because zero is also a valid value. 4) I can do if there is small set of object family tree. After that still i need to write ObjectMapper to which transfer my data.","body":"Sorry for partial reply.. I can choose other points.. But still some challenge.. 2) Actually target system accepting same. 3) Default value give a different answer when we pass zero. Because zero is also a valid value. 4) I can do if there is small set of object family tree. After that still i need to write ObjectMapper to which transfer my data."},{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1646671893,"post_id":71383550,"comment_id":126176211,"body_markdown":"3) Ah, sorry, I seem to have missed your very point. So, you can&#39;t pass `null` just because the target system works so. 4) Well, not sure if we&#39;re on the same page, but I still believe you need a specialized DTO (for robustness, it may have a single constructor to make sure everything is mapped properly; using MapStruct or a similar tool to remove the imperative boilerplate). You can also try using `JsonSerializer` for the `CarDetails` class and do the coercion right there, but it also has some drawbacks (no `@SerializedName` support, etc)... Or switch from Gson...","body":"3) Ah, sorry, I seem to have missed your very point. So, you can&#39;t pass <code>null</code> just because the target system works so. 4) Well, not sure if we&#39;re on the same page, but I still believe you need a specialized DTO (for robustness, it may have a single constructor to make sure everything is mapped properly; using MapStruct or a similar tool to remove the imperative boilerplate). You can also try using <code>JsonSerializer</code> for the <code>CarDetails</code> class and do the coercion right there, but it also has some drawbacks (no <code>@SerializedName</code> support, etc)... Or switch from Gson..."},{"owner":{"account_id":11761233,"reputation":110,"user_id":8607192,"display_name":"Anil K"},"score":0,"creation_date":1646674386,"post_id":71383550,"comment_id":126177194,"body_markdown":"I opened it as a bug - https://github.com/google/gson/issues/2088. Let me check, why TypeAdapterRuntimeTypeWrapper not interfering if null occurs but TypeAdapter skipping null value. And there is no overloaded method.","body":"I opened it as a bug - <a href=\"https://github.com/google/gson/issues/2088\" rel=\"nofollow noreferrer\">github.com/google/gson/issues/2088</a>. Let me check, why TypeAdapterRuntimeTypeWrapper not interfering if null occurs but TypeAdapter skipping null value. And there is no overloaded method."}],"answers":[{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646674826,"creation_date":1646674826,"answer_id":71385150,"question_id":71383550,"body_markdown":"You need to set [`@JsonAdapter#nullSafe`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/JsonAdapter.html#nullSafe()) to `false`, otherwise Gson by default makes your specified adapter null-safe. For example:\r\n```java\r\n@JsonAdapter(value = EmptyIfNullIntegerTypeAdapter.class, nullSafe = false)\r\nprivate Integer catlives;\r\n```","title":"Gson TypeAdapter not working for null with annotation JsonAdapter","body":"<p>You need to set <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/JsonAdapter.html#nullSafe()\" rel=\"nofollow noreferrer\"><code>@JsonAdapter#nullSafe</code></a> to <code>false</code>, otherwise Gson by default makes your specified adapter null-safe. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonAdapter(value = EmptyIfNullIntegerTypeAdapter.class, nullSafe = false)\nprivate Integer catlives;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11761233,"reputation":110,"user_id":8607192,"display_name":"Anil K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646724505,"creation_date":1646724505,"answer_id":71391397,"question_id":71383550,"body_markdown":"**- JsonAdapter property `nullSafe = false` solved my problem.**\r\n```\r\n@JsonAdapter(value = EmptyIfNullIntegerTypeAdapter.class, nullSafe = false)\r\nprivate Integer catlives;\r\n```\r\n\r\n&gt; But the same does not work with JsonSerializer. \r\n\r\n```\r\npublic class EmptyIfNullTypeAdapter&lt;T&gt; implements JsonSerializer&lt;T&gt; {\r\n\t@Override\r\n\tpublic JsonElement serialize(T src, Type typeOfSrc, JsonSerializationContext context) {\r\n\t\tif (src == null) {\r\n\t\t\treturn new JsonPrimitive(&quot;&quot;);\r\n\t\t} else {\r\n\t\t\tswitch (typeOfSrc.getTypeName()) {\r\n\t\t\tcase &quot;java.lang.Integer&quot;:\r\n\t\t\t\treturn new JsonPrimitive(Integer.parseInt(src.toString()));\r\n\t\t\tcase &quot;java.lang.Long&quot;:\r\n\t\t\t\treturn new JsonPrimitive(Long.parseLong(src.toString()));\r\n\t\t\tcase &quot;java.lang.Double&quot;:\r\n\t\t\t\treturn new JsonPrimitive(Double.parseDouble(src.toString()));\r\n\t\t\tdefault:\r\n\t\t\t\treturn new JsonPrimitive(src.toString());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\t@JsonAdapter(value=EmptyIfNullTypeAdapter.class, nullSafe=false)\r\n\tprivate Integer catlives;\r\n\t@JsonAdapter(value=EmptyIfNullTypeAdapter.class, nullSafe=false)\r\n\tprivate Integer phone;\r\n```","title":"Gson TypeAdapter not working for null with annotation JsonAdapter","body":"<p><strong>- JsonAdapter property <code>nullSafe = false</code> solved my problem.</strong></p>\n<pre><code>@JsonAdapter(value = EmptyIfNullIntegerTypeAdapter.class, nullSafe = false)\nprivate Integer catlives;\n</code></pre>\n<blockquote>\n<p>But the same does not work with JsonSerializer.</p>\n</blockquote>\n<pre><code>public class EmptyIfNullTypeAdapter&lt;T&gt; implements JsonSerializer&lt;T&gt; {\n    @Override\n    public JsonElement serialize(T src, Type typeOfSrc, JsonSerializationContext context) {\n        if (src == null) {\n            return new JsonPrimitive(&quot;&quot;);\n        } else {\n            switch (typeOfSrc.getTypeName()) {\n            case &quot;java.lang.Integer&quot;:\n                return new JsonPrimitive(Integer.parseInt(src.toString()));\n            case &quot;java.lang.Long&quot;:\n                return new JsonPrimitive(Long.parseLong(src.toString()));\n            case &quot;java.lang.Double&quot;:\n                return new JsonPrimitive(Double.parseDouble(src.toString()));\n            default:\n                return new JsonPrimitive(src.toString());\n            }\n        }\n    }\n}\n    @JsonAdapter(value=EmptyIfNullTypeAdapter.class, nullSafe=false)\n    private Integer catlives;\n    @JsonAdapter(value=EmptyIfNullTypeAdapter.class, nullSafe=false)\n    private Integer phone;\n</code></pre>\n"}],"owner":{"account_id":11761233,"reputation":110,"user_id":8607192,"display_name":"Anil K"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":945,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71385150,"answer_count":2,"score":0,"last_activity_date":1687011514,"creation_date":1646667424,"question_id":71383550,"body_markdown":"[![enter image description here][1]][1]**TypeAdapter nullSafe skipping custom handling code.**\r\n\r\nI have written IntegerTypeAdapter and use as annotation to achieve below output, but written code in gson library completely not allowing null handling with annotation configuration.\r\n\r\nIf I uncomment line 1,2,4 and comment line 3, then still i don&#39;t achieve my desire output.\r\n\r\n&gt; When i debug library code at line number 189 (given screenshot image)\r\n&gt; not reaching to my custom Adapter code so null handling not working\r\n&gt; with annotation. Is there any alternative way to achieve desired\r\n&gt; output based on annotation configuration?\r\n\r\nDesired Output:\r\n\r\n 1. catlives - &quot;&quot; (As used annotation and have null value)\r\n 2. phone - 89    (As used annotation and have Integer value)\r\n 3. rank -        (No key present because not using annotation and have null value)\r\n\r\n```\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\nclass CatDetails {\r\n    private String name;\r\n    private String breed;\r\n    private String email;\r\n    //@JsonAdapter(EmptyIfNullIntegerTypeAdapter.class) //1\r\n    private Integer catlives;\r\n    //@JsonAdapter(EmptyIfNullIntegerTypeAdapter.class) //2\r\n    private Integer phone;\r\n    private String city;\r\n    private Integer rank;\r\n    private Boolean likesMice;\r\n}\r\n\r\n\r\npublic class EmptyIfNullIntegerTypeAdapter extends TypeAdapter&lt;Integer&gt; {\r\n\r\n    @Override\r\n    public void write(JsonWriter out, Integer value) throws IOException {\r\n        if (value == null) {\r\n            out.value(&quot;&quot;);\r\n            return;\r\n        }\r\n        out.value(value);\r\n    }\r\n\r\n    @Override\r\n    public Integer read(JsonReader in) throws IOException {\r\n        if (in.peek() == JsonToken.NULL) {\r\n            in.nextNull();\r\n            return 0;\r\n        }\r\n        return in.nextInt();\r\n    }\r\n\r\n}\r\n\r\n\r\npublic class MyApp {\r\n    public static void main(String... args) {\r\n        CatDetails user = new CatDetails(&quot;cat007&quot;, &quot;YUI&quot;, &quot;abc.cat@gmail.com&quot;, null,89, &quot;new&quot;,null, true);\r\n        Gson gson = new GsonBuilder().setPrettyPrinting().registerTypeAdapter(Integer.class, new EmptyIfNullIntegerTypeAdapter()).create(); //3\r\n        //Gson gson = new GsonBuilder().setPrettyPrinting().create(); //4\r\n        String json = gson.toJson(user);\r\n        System.out.println(json);\r\n    }\r\n\r\n}\r\n\r\n\r\nCurrently code giving below Output:\r\n{\r\n  &quot;name&quot;: &quot;cat007&quot;,\r\n  &quot;breed&quot;: &quot;YUI&quot;,\r\n  &quot;email&quot;: &quot;abc.cat@gmail.com&quot;,\r\n  &quot;catlives&quot;: &quot;&quot;,\r\n  &quot;phone&quot;: 89,\r\n  &quot;city&quot;: &quot;new&quot;,\r\n  &quot;rank&quot;: &quot;&quot;,\r\n  &quot;likesMice&quot;: true\r\n}\r\n\r\n```\r\nLooking below output with annotation:\r\n\r\nSpecial care with two Integer fields (catlives &amp; phone) only *if value is null it write empty string.* Whereas for other Integer field when value null then work like default (skip key-value pair). \r\n\r\n```\r\n{\r\n  &quot;name&quot;: &quot;cat007&quot;,\r\n  &quot;breed&quot;: &quot;YUI&quot;,\r\n  &quot;email&quot;: &quot;abc.cat@gmail.com&quot;,\r\n  &quot;catlives&quot;: &quot;&quot;,\r\n  &quot;phone&quot;: 89,\r\n  &quot;city&quot;: &quot;new&quot;,\r\n  &quot;likesMice&quot;: true\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2ko5C.jpg","title":"Gson TypeAdapter not working for null with annotation JsonAdapter","body":"<p><a href=\"https://i.stack.imgur.com/2ko5C.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2ko5C.jpg\" alt=\"enter image description here\" /></a><strong>TypeAdapter nullSafe skipping custom handling code.</strong></p>\n<p>I have written IntegerTypeAdapter and use as annotation to achieve below output, but written code in gson library completely not allowing null handling with annotation configuration.</p>\n<p>If I uncomment line 1,2,4 and comment line 3, then still i don't achieve my desire output.</p>\n<blockquote>\n<p>When i debug library code at line number 189 (given screenshot image)\nnot reaching to my custom Adapter code so null handling not working\nwith annotation. Is there any alternative way to achieve desired\noutput based on annotation configuration?</p>\n</blockquote>\n<p>Desired Output:</p>\n<ol>\n<li>catlives - &quot;&quot; (As used annotation and have null value)</li>\n<li>phone - 89    (As used annotation and have Integer value)</li>\n<li>rank -        (No key present because not using annotation and have null value)</li>\n</ol>\n<pre><code>@AllArgsConstructor\n@Getter\n@Setter\nclass CatDetails {\n    private String name;\n    private String breed;\n    private String email;\n    //@JsonAdapter(EmptyIfNullIntegerTypeAdapter.class) //1\n    private Integer catlives;\n    //@JsonAdapter(EmptyIfNullIntegerTypeAdapter.class) //2\n    private Integer phone;\n    private String city;\n    private Integer rank;\n    private Boolean likesMice;\n}\n\n\npublic class EmptyIfNullIntegerTypeAdapter extends TypeAdapter&lt;Integer&gt; {\n\n    @Override\n    public void write(JsonWriter out, Integer value) throws IOException {\n        if (value == null) {\n            out.value(&quot;&quot;);\n            return;\n        }\n        out.value(value);\n    }\n\n    @Override\n    public Integer read(JsonReader in) throws IOException {\n        if (in.peek() == JsonToken.NULL) {\n            in.nextNull();\n            return 0;\n        }\n        return in.nextInt();\n    }\n\n}\n\n\npublic class MyApp {\n    public static void main(String... args) {\n        CatDetails user = new CatDetails(&quot;cat007&quot;, &quot;YUI&quot;, &quot;abc.cat@gmail.com&quot;, null,89, &quot;new&quot;,null, true);\n        Gson gson = new GsonBuilder().setPrettyPrinting().registerTypeAdapter(Integer.class, new EmptyIfNullIntegerTypeAdapter()).create(); //3\n        //Gson gson = new GsonBuilder().setPrettyPrinting().create(); //4\n        String json = gson.toJson(user);\n        System.out.println(json);\n    }\n\n}\n\n\nCurrently code giving below Output:\n{\n  &quot;name&quot;: &quot;cat007&quot;,\n  &quot;breed&quot;: &quot;YUI&quot;,\n  &quot;email&quot;: &quot;abc.cat@gmail.com&quot;,\n  &quot;catlives&quot;: &quot;&quot;,\n  &quot;phone&quot;: 89,\n  &quot;city&quot;: &quot;new&quot;,\n  &quot;rank&quot;: &quot;&quot;,\n  &quot;likesMice&quot;: true\n}\n\n</code></pre>\n<p>Looking below output with annotation:</p>\n<p>Special care with two Integer fields (catlives &amp; phone) only <em>if value is null it write empty string.</em> Whereas for other Integer field when value null then work like default (skip key-value pair).</p>\n<pre><code>{\n  &quot;name&quot;: &quot;cat007&quot;,\n  &quot;breed&quot;: &quot;YUI&quot;,\n  &quot;email&quot;: &quot;abc.cat@gmail.com&quot;,\n  &quot;catlives&quot;: &quot;&quot;,\n  &quot;phone&quot;: 89,\n  &quot;city&quot;: &quot;new&quot;,\n  &quot;likesMice&quot;: true\n}\n\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":22565,"reputation":11004,"user_id":55794,"accept_rate":54,"display_name":"emeraldjava"},"score":0,"creation_date":1517847250,"post_id":48626394,"comment_id":84250384,"body_markdown":"I&#39;d be interested to know what you would like to replace &#39;something&#39; with in this case, since this might give a simpler solution. You could look to create a custom bean with extends PropertyPlaceholderConfigurer, this gives you hook points to apply your property name substitution logic and then pass back to spring to set the values see https://stackoverflow.com/questions/26150527/how-can-i-reload-properties-file-in-spring-4-using-annotations/39138850#39138850","body":"I&#39;d be interested to know what you would like to replace &#39;something&#39; with in this case, since this might give a simpler solution. You could look to create a custom bean with extends PropertyPlaceholderConfigurer, this gives you hook points to apply your property name substitution logic and then pass back to spring to set the values see <a href=\"https://stackoverflow.com/questions/26150527/how-can-i-reload-properties-file-in-spring-4-using-annotations/39138850#39138850\" title=\"how can i reload properties file in spring 4 using annotations\">stackoverflow.com/questions/26150527/&hellip;</a>"},{"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"score":0,"creation_date":1517912860,"post_id":48626394,"comment_id":84277934,"body_markdown":"I created a custom PropertyPlaceholderConfigurer bean like in your example but it didn&#39;t work.","body":"I created a custom PropertyPlaceholderConfigurer bean like in your example but it didn&#39;t work."},{"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"score":0,"creation_date":1517913490,"post_id":48626394,"comment_id":84278397,"body_markdown":"It is created via `new` declaration in `AbstractEnvironment`: `private final ConfigurablePropertyResolver propertyResolver = new PropertySourcesPropertyResolver(this.propertySources);`","body":"It is created via <code>new</code> declaration in <code>AbstractEnvironment</code>: <code>private final ConfigurablePropertyResolver propertyResolver = new PropertySourcesPropertyResolver(this.propertySources);</code>"},{"owner":{"account_id":22565,"reputation":11004,"user_id":55794,"accept_rate":54,"display_name":"emeraldjava"},"score":0,"creation_date":1517913718,"post_id":48626394,"comment_id":84278546,"body_markdown":"I suggest you post the code for your custom class and details of the error you are seeing.","body":"I suggest you post the code for your custom class and details of the error you are seeing."},{"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"score":0,"creation_date":1517917029,"post_id":48626394,"comment_id":84280702,"body_markdown":"I posted my code. I also debuged the stacktrace of getting property and I could not find where this `PropertyPlaceholderConfigurer` is used.","body":"I posted my code. I also debuged the stacktrace of getting property and I could not find where this <code>PropertyPlaceholderConfigurer</code> is used."},{"owner":{"account_id":14885599,"reputation":486,"user_id":11211480,"display_name":"vinter"},"score":0,"creation_date":1686534702,"post_id":48626394,"comment_id":134806870,"body_markdown":"@Praytic did you solve this use case? I&#39;m also looking for the similar one.","body":"@Praytic did you solve this use case? I&#39;m also looking for the similar one."},{"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"score":0,"creation_date":1686681476,"post_id":48626394,"comment_id":134831927,"body_markdown":"No, feel free to post the answer here if you find one.","body":"No, feel free to post the answer here if you find one."},{"owner":{"account_id":14885599,"reputation":486,"user_id":11211480,"display_name":"vinter"},"score":0,"creation_date":1687011366,"post_id":48626394,"comment_id":134879041,"body_markdown":"@Praytic i have solved a similar use case and posted an answer, for more details you can refer to the article that i have shared in the answer","body":"@Praytic i have solved a similar use case and posted an answer, for more details you can refer to the article that i have shared in the answer"}],"answers":[{"tags":[],"owner":{"account_id":14885599,"reputation":486,"user_id":11211480,"display_name":"vinter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687011202,"creation_date":1687011202,"answer_id":76496585,"question_id":48626394,"body_markdown":"I had a similar requirement and solved this use case.\r\n\r\nIn short:\r\n\r\nSince spring tries to resolve the properties in the order from list of porperty sources, the basic idea is to add our custom property source at the top[0th index] of the PropertySources in the current `Environment`. \r\n\r\nTo do that, override the `getAppliedPropertySources()` method in `PropertySourcesPlaceholderConfigurer.java` class and do `addFirst` the custom property source in the current spring `Evnironment`. So that spring will try to resolve the placeholder from our custom source first, and if not found, goes through the remaining property sources.\r\n\r\n    @Configuration\r\n    \r\n    public class CustomPropertySourcesPlaceholderConfigurer extends PropertySourcesPlaceholderConfigurer {\r\n    \r\n    private static final String[] IGNORABLE_SECRETS = new String[] {&quot;secrets.property1&quot;, &quot;secrets.property2&quot;};\r\n    \r\n    @Override\r\n    public PropertySources getAppliedPropertySources() throws IllegalStateException {\r\n    \r\n        // gets the applied property sources\r\n        MutablePropertySources appliedPropertySources = (MutablePropertySources) super.getAppliedPropertySources();\r\n    \r\n        // fetches the property source of the current evnironment\r\n        PropertySource&lt;?&gt; environmentPropertySource = appliedPropertySources.get(&quot;environmentProperties&quot;);\r\n    \r\n        if (Objects.nonNull(environmentPropertySource)) {\r\n            addCustomPropertySourceToIgnoreRefresh(environmentPropertySource);\r\n        }\r\n        return appliedPropertySources;\r\n    }\r\n    \r\n    private void addCustomPropertySourceToIgnoreRefresh(PropertySource&lt;?&gt; environmentPropertySource) {\r\n        Map&lt;String, Object&gt; customPropertyMap = new HashMap&lt;&gt;();\r\n        \r\n        // Iterating over properties listed in IGNORABLE_SECRETS to override them\r\n               \r\n        for (String ignorableSecretProperty: IGNORABLE_SECRETS) {\r\n\r\n            customPropertyMap.put(ignorableSecretProperty, &quot;customValueForThatPorperty&quot;);\r\n            \r\n            // For my use case, i&#39;m trying to fetch the secrets from the property sources that are loaded\r\n            // during the bootstrap phase and using them as sort of cache so that spring boot doesn&#39;t \r\n            // need to make grpc calls to google to resolve the secrets during the consul refresh\r\n            //  customPropertyMap.put(ignorableSecretProperty,\r\n            //                  environmentPropertySource.getProperty(ignorableSecretProperty));\r\n\r\n        }\r\n        ConfigurableEnvironment configurableEnvironment =\r\n                (ConfigurableEnvironment) environmentPropertySource.getSource();\r\n\r\n        // post fetching the configurable environment, adding my hash map as custom map property source\r\n        configurableEnvironment.getPropertySources()\r\n                               .addFirst(new MapPropertySource(&quot;customPropertySource&quot;, customPropertyMap));\r\n    }\r\n    \r\n    @Override\r\n    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\r\n        super.postProcessBeanFactory(beanFactory);\r\n    }\r\n}\r\n\r\nFor more details you can refer to the [article][1] that I have published in medium.\r\n\r\n\r\n  [1]: https://medium.com/@shashikanth.gajjelli/overriding-placeholder-properties-during-spring-boot-consul-refresh-c9e2ec40b470","title":"How to resolve all placeholders which start with &quot;something&quot; in spring environment properties?","body":"<p>I had a similar requirement and solved this use case.</p>\n<p>In short:</p>\n<p>Since spring tries to resolve the properties in the order from list of porperty sources, the basic idea is to add our custom property source at the top[0th index] of the PropertySources in the current <code>Environment</code>.</p>\n<p>To do that, override the <code>getAppliedPropertySources()</code> method in <code>PropertySourcesPlaceholderConfigurer.java</code> class and do <code>addFirst</code> the custom property source in the current spring <code>Evnironment</code>. So that spring will try to resolve the placeholder from our custom source first, and if not found, goes through the remaining property sources.</p>\n<pre><code>@Configuration\n\npublic class CustomPropertySourcesPlaceholderConfigurer extends PropertySourcesPlaceholderConfigurer {\n\nprivate static final String[] IGNORABLE_SECRETS = new String[] {&quot;secrets.property1&quot;, &quot;secrets.property2&quot;};\n\n@Override\npublic PropertySources getAppliedPropertySources() throws IllegalStateException {\n\n    // gets the applied property sources\n    MutablePropertySources appliedPropertySources = (MutablePropertySources) super.getAppliedPropertySources();\n\n    // fetches the property source of the current evnironment\n    PropertySource&lt;?&gt; environmentPropertySource = appliedPropertySources.get(&quot;environmentProperties&quot;);\n\n    if (Objects.nonNull(environmentPropertySource)) {\n        addCustomPropertySourceToIgnoreRefresh(environmentPropertySource);\n    }\n    return appliedPropertySources;\n}\n\nprivate void addCustomPropertySourceToIgnoreRefresh(PropertySource&lt;?&gt; environmentPropertySource) {\n    Map&lt;String, Object&gt; customPropertyMap = new HashMap&lt;&gt;();\n    \n    // Iterating over properties listed in IGNORABLE_SECRETS to override them\n           \n    for (String ignorableSecretProperty: IGNORABLE_SECRETS) {\n\n        customPropertyMap.put(ignorableSecretProperty, &quot;customValueForThatPorperty&quot;);\n        \n        // For my use case, i'm trying to fetch the secrets from the property sources that are loaded\n        // during the bootstrap phase and using them as sort of cache so that spring boot doesn't \n        // need to make grpc calls to google to resolve the secrets during the consul refresh\n        //  customPropertyMap.put(ignorableSecretProperty,\n        //                  environmentPropertySource.getProperty(ignorableSecretProperty));\n\n    }\n    ConfigurableEnvironment configurableEnvironment =\n            (ConfigurableEnvironment) environmentPropertySource.getSource();\n\n    // post fetching the configurable environment, adding my hash map as custom map property source\n    configurableEnvironment.getPropertySources()\n                           .addFirst(new MapPropertySource(&quot;customPropertySource&quot;, customPropertyMap));\n}\n\n@Override\npublic void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\n    super.postProcessBeanFactory(beanFactory);\n}\n</code></pre>\n<p>}</p>\n<p>For more details you can refer to the <a href=\"https://medium.com/@shashikanth.gajjelli/overriding-placeholder-properties-during-spring-boot-consul-refresh-c9e2ec40b470\" rel=\"nofollow noreferrer\">article</a> that I have published in medium.</p>\n"}],"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1455,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76496585,"answer_count":1,"score":0,"last_activity_date":1687011202,"creation_date":1517845958,"question_id":48626394,"body_markdown":"I have a Java lib which is based on Spring Boot. In my case I need to resolve placeholders which start with `something.*` in my own way before this property will be resolved by some Spring Property Resolver. For example:\r\n\r\n**application.properties**:\r\n\r\n    spring.datasource.url=&quot;${something.url}&quot;\r\n\r\nSo this placeholder is matching my `something.*` pattern and I want to replace it with `specific` word before Spring will try to resolve it. Where can I do it so I can avoid creating system properties with `System.setProperty`?\r\n\r\nHere is my attempts on achieving it:\r\n\r\n\r\n    import org.springframework.beans.BeansException;\r\n    import org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\r\n    import org.springframework.beans.factory.config.PropertyPlaceholderConfigurer;\r\n    import org.springframework.util.PropertyPlaceholderHelper;\r\n    import org.springframework.util.StringValueResolver;\r\n    \r\n    import java.util.Properties;\r\n    \r\n    public class MyPropertyPlaceholderConfigurer extends PropertyPlaceholderConfigurer {\r\n    \r\n        @Override\r\n        protected void processProperties(ConfigurableListableBeanFactory beanFactoryToProcess, Properties props)\r\n                throws BeansException {\r\n            StringValueResolver valueResolver = new ReloadablePlaceholderResolvingStringValueResolver(props);\r\n            this.doProcessProperties(beanFactoryToProcess, valueResolver);\r\n        }\r\n    \r\n        private class ReloadablePlaceholderResolvingStringValueResolver\r\n                implements StringValueResolver {\r\n    \r\n            private final PropertyPlaceholderHelper helper;\r\n            private final ReloadablePropertyPlaceholderConfigurerResolver resolver;\r\n    \r\n            public ReloadablePlaceholderResolvingStringValueResolver(Properties props) {\r\n                this.helper = new MyPropertyPlaceholderHelper(placeholderPrefix, placeholderSuffix, valueSeparator, ignoreUnresolvablePlaceholders);\r\n                this.resolver = new ReloadablePropertyPlaceholderConfigurerResolver(props);\r\n            }\r\n    \r\n            @Override\r\n            public String resolveStringValue(String strVal) throws BeansException {\r\n                String value = this.helper.replacePlaceholders(strVal, this.resolver);\r\n                return (value.equals(nullValue) ? null : value);\r\n            }\r\n        }\r\n    \r\n        private class ReloadablePropertyPlaceholderConfigurerResolver\r\n                implements PropertyPlaceholderHelper.PlaceholderResolver {\r\n    \r\n            private Properties props;\r\n            private ReloadablePropertyPlaceholderConfigurerResolver(Properties props) {\r\n                this.props = props;\r\n            }\r\n    \r\n            @Override\r\n            public String resolvePlaceholder(String placeholderName) {\r\n                return MyPropertyPlaceholderConfigurer.this.resolvePlaceholder(placeholderName, props, SYSTEM_PROPERTIES_MODE_FALLBACK);\r\n            }\r\n        }\r\n    }\r\n\r\nInitializing bean:\r\n\r\n    @Bean\r\n    public PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n        return new MyPropertyPlaceholderConfigurer();\r\n    }\r\n\r\nGetting resolved property:\r\n\r\n    @RestController\r\n    public class MainController {\r\n    \r\n        @Autowired\r\n        private Environment environment;\r\n        \r\n        @GetMapping(&quot;/getEnvProeprty&quot;)\r\n        public String getEnvironmentName() {\r\n            return environment.getProperty(&quot;spring.datasource.url&quot;);\r\n        }\r\n    }","title":"How to resolve all placeholders which start with &quot;something&quot; in spring environment properties?","body":"<p>I have a Java lib which is based on Spring Boot. In my case I need to resolve placeholders which start with <code>something.*</code> in my own way before this property will be resolved by some Spring Property Resolver. For example:</p>\n\n<p><strong>application.properties</strong>:</p>\n\n<pre><code>spring.datasource.url=\"${something.url}\"\n</code></pre>\n\n<p>So this placeholder is matching my <code>something.*</code> pattern and I want to replace it with <code>specific</code> word before Spring will try to resolve it. Where can I do it so I can avoid creating system properties with <code>System.setProperty</code>?</p>\n\n<p>Here is my attempts on achieving it:</p>\n\n<pre><code>import org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\nimport org.springframework.beans.factory.config.PropertyPlaceholderConfigurer;\nimport org.springframework.util.PropertyPlaceholderHelper;\nimport org.springframework.util.StringValueResolver;\n\nimport java.util.Properties;\n\npublic class MyPropertyPlaceholderConfigurer extends PropertyPlaceholderConfigurer {\n\n    @Override\n    protected void processProperties(ConfigurableListableBeanFactory beanFactoryToProcess, Properties props)\n            throws BeansException {\n        StringValueResolver valueResolver = new ReloadablePlaceholderResolvingStringValueResolver(props);\n        this.doProcessProperties(beanFactoryToProcess, valueResolver);\n    }\n\n    private class ReloadablePlaceholderResolvingStringValueResolver\n            implements StringValueResolver {\n\n        private final PropertyPlaceholderHelper helper;\n        private final ReloadablePropertyPlaceholderConfigurerResolver resolver;\n\n        public ReloadablePlaceholderResolvingStringValueResolver(Properties props) {\n            this.helper = new MyPropertyPlaceholderHelper(placeholderPrefix, placeholderSuffix, valueSeparator, ignoreUnresolvablePlaceholders);\n            this.resolver = new ReloadablePropertyPlaceholderConfigurerResolver(props);\n        }\n\n        @Override\n        public String resolveStringValue(String strVal) throws BeansException {\n            String value = this.helper.replacePlaceholders(strVal, this.resolver);\n            return (value.equals(nullValue) ? null : value);\n        }\n    }\n\n    private class ReloadablePropertyPlaceholderConfigurerResolver\n            implements PropertyPlaceholderHelper.PlaceholderResolver {\n\n        private Properties props;\n        private ReloadablePropertyPlaceholderConfigurerResolver(Properties props) {\n            this.props = props;\n        }\n\n        @Override\n        public String resolvePlaceholder(String placeholderName) {\n            return MyPropertyPlaceholderConfigurer.this.resolvePlaceholder(placeholderName, props, SYSTEM_PROPERTIES_MODE_FALLBACK);\n        }\n    }\n}\n</code></pre>\n\n<p>Initializing bean:</p>\n\n<pre><code>@Bean\npublic PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\n    return new MyPropertyPlaceholderConfigurer();\n}\n</code></pre>\n\n<p>Getting resolved property:</p>\n\n<pre><code>@RestController\npublic class MainController {\n\n    @Autowired\n    private Environment environment;\n\n    @GetMapping(\"/getEnvProeprty\")\n    public String getEnvironmentName() {\n        return environment.getProperty(\"spring.datasource.url\");\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays"],"answers":[{"tags":[],"owner":{"account_id":1021725,"reputation":10018,"user_id":1031887,"accept_rate":77,"display_name":"phatfingers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687011166,"creation_date":1687011166,"answer_id":76496583,"question_id":76496080,"body_markdown":"You seem to be overlooking some edge cases, and are overcomplicating your solution by creating an additional `empty` array.  You should be able to solve this linearly, with one pass through the `flowerbed` array.\r\n\r\n* You can place a flowerpot in the first position or last position if the adjacent position is empty.\r\n* You can place a flowerpot in a middle position if both it and its two adjacent neighbors are empty.\r\n* When you place a flowerpot, it affects the availability of your next flowerpot.\r\n* It is possible to have a flowerbed with only one pot.","title":"Is there any way to solve this array problem using the approach i tried to use?","body":"<p>You seem to be overlooking some edge cases, and are overcomplicating your solution by creating an additional <code>empty</code> array.  You should be able to solve this linearly, with one pass through the <code>flowerbed</code> array.</p>\n<ul>\n<li>You can place a flowerpot in the first position or last position if the adjacent position is empty.</li>\n<li>You can place a flowerpot in a middle position if both it and its two adjacent neighbors are empty.</li>\n<li>When you place a flowerpot, it affects the availability of your next flowerpot.</li>\n<li>It is possible to have a flowerbed with only one pot.</li>\n</ul>\n"}],"owner":{"account_id":28839562,"reputation":1,"user_id":22088150,"display_name":"Sanjit Pandit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687011166,"creation_date":1687003025,"question_id":76496080,"body_markdown":"&lt;https://leetcode.com/studyplan/leetcode-75/&gt;\r\n\r\nYou have a long flowerbed in which some of the plots are planted, and some are not. However, flowers cannot be planted in **adjacent** plots.\r\n\r\nGiven an integer array `flowerbed` containing `0`&#39;s and `1`&#39;s, where `0` means empty and `1` means not empty, and an integer `n`, return `true`&#160;*if* `n` *new flowers can be planted in the* `flowerbed` *without violating the no-adjacent-flowers rule and* `false` *otherwise*.\r\n\r\n```\r\npublic class Solution {\r\n    public static boolean canPlaceFlowers(int[] flowerbed, int n) {\r\n        boolean b=false;\r\n        int[] empty = new int[flowerbed.length];\r\n        int k = 0;\r\n        for (int i = 0; i &lt; flowerbed.length; i++) {\r\n            if (flowerbed[i] != 1) {\r\n                empty[k] = i;\r\n                k++;\r\n            }\r\n\r\n        }\r\n        int h=0;\r\n        for (int j = 1; j &lt;= n; j++) {\r\n            for (h=0;h &lt; empty.length; h++) {\r\n                int v = empty[h] - 1&gt;=0?empty[h] - 1:0;\r\n                int x = empty[h] + 1&lt;=flowerbed.length-1?empty[h] + 1:0;\r\n                if (flowerbed[empty[h]] == 0 &amp;&amp; flowerbed[x] == 0 &amp;&amp; flowerbed[v] == 0) {\r\n                    b = true;\r\n                    flowerbed[empty[h]]=1;\r\n                    empty[h]=0;\r\n\r\n                } else\r\n                    continue;\r\n            }\r\n        }\r\n        if(empty.length==h)\r\n        {\r\n            b = false;\r\n        }\r\n        if(n ==0)\r\n        {\r\n            b = true;\r\n        }\r\n        return b;\r\n    }\r\n}\r\n```","title":"Is there any way to solve this array problem using the approach i tried to use?","body":"<p><a href=\"https://leetcode.com/studyplan/leetcode-75/\" rel=\"nofollow noreferrer\">https://leetcode.com/studyplan/leetcode-75/</a></p>\n<p>You have a long flowerbed in which some of the plots are planted, and some are not. However, flowers cannot be planted in <strong>adjacent</strong> plots.</p>\n<p>Given an integer array <code>flowerbed</code> containing <code>0</code>'s and <code>1</code>'s, where <code>0</code> means empty and <code>1</code> means not empty, and an integer <code>n</code>, return <code>true</code> <em>if</em> <code>n</code> <em>new flowers can be planted in the</em> <code>flowerbed</code> <em>without violating the no-adjacent-flowers rule and</em> <code>false</code> <em>otherwise</em>.</p>\n<pre><code>public class Solution {\n    public static boolean canPlaceFlowers(int[] flowerbed, int n) {\n        boolean b=false;\n        int[] empty = new int[flowerbed.length];\n        int k = 0;\n        for (int i = 0; i &lt; flowerbed.length; i++) {\n            if (flowerbed[i] != 1) {\n                empty[k] = i;\n                k++;\n            }\n\n        }\n        int h=0;\n        for (int j = 1; j &lt;= n; j++) {\n            for (h=0;h &lt; empty.length; h++) {\n                int v = empty[h] - 1&gt;=0?empty[h] - 1:0;\n                int x = empty[h] + 1&lt;=flowerbed.length-1?empty[h] + 1:0;\n                if (flowerbed[empty[h]] == 0 &amp;&amp; flowerbed[x] == 0 &amp;&amp; flowerbed[v] == 0) {\n                    b = true;\n                    flowerbed[empty[h]]=1;\n                    empty[h]=0;\n\n                } else\n                    continue;\n            }\n        }\n        if(empty.length==h)\n        {\n            b = false;\n        }\n        if(n ==0)\n        {\n            b = true;\n        }\n        return b;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","rxjs","memory-leaks"],"comments":[{"owner":{"account_id":342919,"reputation":38579,"user_id":674326,"display_name":"Brandon"},"score":0,"creation_date":1687460859,"post_id":76496468,"comment_id":134943875,"body_markdown":"most likely the requests in question are returning streaming results  which means until the server &quot;ends&quot; the stream or the UI unsubscribes then the server infrastructure required to process that request will be pinned by the open connection.  Check your Java code for StreamingResponseBody usage or some other library like WebFlux to see if this is the cause.  Also you can use Chrome devtools on the app and monitor the network tab for requests that never finish to help find the ones that are streaming","body":"most likely the requests in question are returning streaming results  which means until the server &quot;ends&quot; the stream or the UI unsubscribes then the server infrastructure required to process that request will be pinned by the open connection.  Check your Java code for StreamingResponseBody usage or some other library like WebFlux to see if this is the cause.  Also you can use Chrome devtools on the app and monitor the network tab for requests that never finish to help find the ones that are streaming"}],"owner":{"account_id":8590798,"reputation":496,"user_id":9330647,"display_name":"ElderFuthark"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687009524,"creation_date":1687009524,"question_id":76496468,"body_markdown":"At my work, I was doing some operational maintenance in production and I noticed one of our Java/Spring Boot/Hibernate applications was using over 4GB of memory while idle. I immediately suspected that something was amiss, as other developers on the team had never seen this behavior before. I was able to replicate the issue in our test environment and used VisualVM to inspect the application&#39;s resources. Turns out there were several memory leaks.\r\n\r\nOur frontend is using Angular with RxJS to subscribe to methods that wrap an HTTP request made by Angular&#39;s HttpClient. After cross checking calls frontend was making with the Java objects that were consuming the most memory, I found there was no unsubscribe--even in ngOnDestroy--for some of the subscriptions. Adding an unsubscribe immediately caused Java to garbage collect those objects.\r\n\r\nI understand not calling unsubscribe can cause a memory leak. But what I don&#39;t understand is why this causes a memory leak in Java, particularly a standard REST API application. I&#39;ve searched for an answer but every example I&#39;ve found only discusses the relationship between subscribe and unsubscribe. Has anyone encountered this issue before or can someone offer an explanation? In case it&#39;s something version specific, I&#39;ve listed the core technologies we&#39;re using with their versions below:\r\n\r\n- Java 13\r\n- Spring Boot (2.6.6)\r\n- Hibernate ORM (5.6.7.Final)\r\n- Angular 9 (9.1.0)\r\n- RxJS (6.5.4)","title":"Why not calling RXJS unsubscribe appears to cause a memory leak in Java application?","body":"<p>At my work, I was doing some operational maintenance in production and I noticed one of our Java/Spring Boot/Hibernate applications was using over 4GB of memory while idle. I immediately suspected that something was amiss, as other developers on the team had never seen this behavior before. I was able to replicate the issue in our test environment and used VisualVM to inspect the application's resources. Turns out there were several memory leaks.</p>\n<p>Our frontend is using Angular with RxJS to subscribe to methods that wrap an HTTP request made by Angular's HttpClient. After cross checking calls frontend was making with the Java objects that were consuming the most memory, I found there was no unsubscribe--even in ngOnDestroy--for some of the subscriptions. Adding an unsubscribe immediately caused Java to garbage collect those objects.</p>\n<p>I understand not calling unsubscribe can cause a memory leak. But what I don't understand is why this causes a memory leak in Java, particularly a standard REST API application. I've searched for an answer but every example I've found only discusses the relationship between subscribe and unsubscribe. Has anyone encountered this issue before or can someone offer an explanation? In case it's something version specific, I've listed the core technologies we're using with their versions below:</p>\n<ul>\n<li>Java 13</li>\n<li>Spring Boot (2.6.6)</li>\n<li>Hibernate ORM (5.6.7.Final)</li>\n<li>Angular 9 (9.1.0)</li>\n<li>RxJS (6.5.4)</li>\n</ul>\n"},{"tags":["java","google-translate"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687013659,"post_id":76496391,"comment_id":134879282,"body_markdown":"Where and how are you running that? What&#39;s the value of `System.defaultCharset()`? What&#39;s returned by that request looks odd, if not wrong","body":"Where and how are you running that? What&#39;s the value of <code>System.defaultCharset()</code>? What&#39;s returned by that request looks odd, if not wrong"},{"owner":{"account_id":3014557,"reputation":1292,"user_id":2557108,"accept_rate":50,"display_name":"Yonoss"},"score":0,"creation_date":1687015670,"post_id":76496391,"comment_id":134879597,"body_markdown":"@g00se Charset.defaultCharset() returns &quot;UTF-8&quot;.  My app is a Spring boot app, running on a docker container: azul/zulu-openjdk-alpine:17 . As I&#39;ve mentioned it doesn&#39;t look like an encoding problem, at least not on my end. I&#39;ve also tried to get the byte array from the httpclient and covert it to UTF-8 string, and I&#39;m seeing the same behavior:  HttpResponse&lt;byte[]&gt; response = client.send(request, BodyHandlers.ofByteArray());\nString responseString = new String(response.body(), StandardCharsets.UTF_8);","body":"@g00se Charset.defaultCharset() returns &quot;UTF-8&quot;.  My app is a Spring boot app, running on a docker container: azul/zulu-openjdk-alpine:17 . As I&#39;ve mentioned it doesn&#39;t look like an encoding problem, at least not on my end. I&#39;ve also tried to get the byte array from the httpclient and covert it to UTF-8 string, and I&#39;m seeing the same behavior:  HttpResponse&lt;byte[]&gt; response = client.send(request, BodyHandlers.ofByteArray()); String responseString = new String(response.body(), StandardCharsets.UTF_8);"},{"owner":{"account_id":3014557,"reputation":1292,"user_id":2557108,"accept_rate":50,"display_name":"Yonoss"},"score":0,"creation_date":1687015840,"post_id":76496391,"comment_id":134879624,"body_markdown":"Specifying the charset utf-8 in the ofString method, has the same result:  HttpResponse&lt;String&gt; response = client.send(request, BodyHandlers.ofString(Charset.forName(&quot;UTF-8&quot;)));","body":"Specifying the charset utf-8 in the ofString method, has the same result:  HttpResponse&lt;String&gt; response = client.send(request, BodyHandlers.ofString(Charset.forName(&quot;UTF-8&quot;)));"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687016165,"post_id":76496391,"comment_id":134879688,"body_markdown":"fwiw I get exactly the same thing. It&#39;s a space character. I don&#39;t know what this is, but the fact that it *starts* with `)]}&#39;` doesn&#39;t fill me with confidence ;)","body":"fwiw I get exactly the same thing. It&#39;s a space character. I don&#39;t know what this is, but the fact that it <i>starts</i> with <code>)]}&#39;</code> doesn&#39;t fill me with confidence ;)"},{"owner":{"account_id":3014557,"reputation":1292,"user_id":2557108,"accept_rate":50,"display_name":"Yonoss"},"score":0,"creation_date":1687016553,"post_id":76496391,"comment_id":134879751,"body_markdown":"Those start characters can be seen in the google translate web page responses too. And there works OK. So I doubt is that.","body":"Those start characters can be seen in the google translate web page responses too. And there works OK. So I doubt is that."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687017735,"post_id":76496391,"comment_id":134879894,"body_markdown":"What would that mean though? It looks like the *end* of some sort of json","body":"What would that mean though? It looks like the <i>end</i> of some sort of json"},{"owner":{"account_id":3014557,"reputation":1292,"user_id":2557108,"accept_rate":50,"display_name":"Yonoss"},"score":0,"creation_date":1687018034,"post_id":76496391,"comment_id":134879942,"body_markdown":"Not sure what their role is...","body":"Not sure what their role is..."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687018136,"post_id":76496391,"comment_id":134879953,"body_markdown":"And it *ends* with `3;[9]0;` How on earth would you use that?","body":"And it <i>ends</i> with <code>3;[9]0;</code> How on earth would you use that?"},{"owner":{"account_id":3014557,"reputation":1292,"user_id":2557108,"accept_rate":50,"display_name":"Yonoss"},"score":0,"creation_date":1687018266,"post_id":76496391,"comment_id":134879977,"body_markdown":"I&#39;m only interested in the translated text. I don&#39;t care about the rest of the elements. And to extract that I use a pattern matcher: Pattern.compile(&quot;&lt;span id=\\&quot;tw-answ-target-text\\&quot;&gt;(.*?)&lt;\\\\/span&gt;&quot;);","body":"I&#39;m only interested in the translated text. I don&#39;t care about the rest of the elements. And to extract that I use a pattern matcher: Pattern.compile(&quot;&lt;span id=\\&quot;tw-answ-target-text\\&quot;&gt;(.*?)&lt;\\\\/span&gt;&quot;);"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687018654,"post_id":76496391,"comment_id":134880025,"body_markdown":"Well the translated text is deficient. It has a space where the character you say should be present ought to be. It could be because the get request is not right","body":"Well the translated text is deficient. It has a space where the character you say should be present ought to be. It could be because the get request is not right"}],"owner":{"account_id":3014557,"reputation":1292,"user_id":2557108,"accept_rate":50,"display_name":"Yonoss"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687009399,"creation_date":1687008486,"question_id":76496391,"body_markdown":"I am trying to use the google translate public API endpoint to translate a handful of words  from english to romanian, and while doing this I&#39;ve noticed that when I am calling this endpoint from by java application, the response is missing the characters containing diacritics.\r\neg:\r\nfor &quot;delete&quot; it returns &quot; terge&quot; instead of &quot;șterge&quot;. The &quot;ș&quot; is missing from the google translate API response.\r\n\r\nGoogle translate response content:\r\n\r\n    &lt;span id=&quot;tw-answ-target-text&quot;&gt; terge&lt;/span&gt;\r\n\r\nExpected response content:\r\n\r\n    &lt;span id=&quot;tw-answ-target-text&quot;&gt;șterge&lt;/span&gt;\r\n\r\nIt doesn&#39;t seem to be an encoding problem, as if I create a test endpoint on my end which returns &quot;șterge&quot;, my java code is able to get the complete string back &quot;șterge&quot;. Also I am not seeing any problems with asian languages like chinese and/or japanese.\r\n\r\nIf I&#39;m sending the same translation request, from my browser, the &quot;ș&quot; char is being returned.\r\n\r\nCould this be some kind of protection mechanism on Googles side? Not sure what else it could be... Any idea?\r\n\r\n\r\nMy java code looks something like below. I am running it on openJDK 17:\r\n\r\n\r\n    import java.io.IOException;\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.net.URI;\r\n    import java.net.URLEncoder;\r\n    import java.net.http.HttpRequest;\r\n    import java.net.http.HttpRequest.Builder;\r\n    import java.net.http.HttpResponse;\r\n    import java.time.Duration;\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpResponse.BodyHandlers;\r\n    \r\n    \r\n    public class TestTranslate {\r\n        public static void main(String[] args) {\r\n            try{\r\n                HttpClient client = HttpClient.newBuilder().connectTimeout(Duration.ofMinutes(1)).build();\r\n                String translatePayload = &quot;async=translate,sl:en,tl:ro,st:delete,id:&quot; + System.currentTimeMillis() + &quot;,qc:true,ac:true,_id:tw-async-translate,_pms:s,_fmt:pc&quot;;\r\n            \r\n                Builder requestBuilder = HttpRequest.newBuilder().uri(URI.create(&quot;https://www.google.com/async/translate&quot;))\r\n                    .timeout(Duration.ofMinutes(1))\r\n                    .header(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded;charset=UTF-8&quot;);\r\n    \t\t\r\n                HttpRequest request = requestBuilder.POST(HttpRequest.BodyPublishers.ofString(translatePayload)).build();\r\n    \r\n                HttpResponse&lt;String&gt; response = client.send(request, BodyHandlers.ofString());\r\n                System.out.println(&quot;=======================1&quot;);\r\n                System.out.println(response.body());\r\n            } catch(Exception e) {\r\n                System.out.println(&quot;=======================2&quot;);\r\n                e.printStackTrace(System.out);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"Any idea why google translate API doesn&#39;t return characters containing diacritics when API is called from a java app?","body":"<p>I am trying to use the google translate public API endpoint to translate a handful of words  from english to romanian, and while doing this I've noticed that when I am calling this endpoint from by java application, the response is missing the characters containing diacritics.\neg:\nfor &quot;delete&quot; it returns &quot; terge&quot; instead of &quot;șterge&quot;. The &quot;ș&quot; is missing from the google translate API response.</p>\n<p>Google translate response content:</p>\n<pre><code>&lt;span id=&quot;tw-answ-target-text&quot;&gt; terge&lt;/span&gt;\n</code></pre>\n<p>Expected response content:</p>\n<pre><code>&lt;span id=&quot;tw-answ-target-text&quot;&gt;șterge&lt;/span&gt;\n</code></pre>\n<p>It doesn't seem to be an encoding problem, as if I create a test endpoint on my end which returns &quot;șterge&quot;, my java code is able to get the complete string back &quot;șterge&quot;. Also I am not seeing any problems with asian languages like chinese and/or japanese.</p>\n<p>If I'm sending the same translation request, from my browser, the &quot;ș&quot; char is being returned.</p>\n<p>Could this be some kind of protection mechanism on Googles side? Not sure what else it could be... Any idea?</p>\n<p>My java code looks something like below. I am running it on openJDK 17:</p>\n<pre><code>import java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.net.URI;\nimport java.net.URLEncoder;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpRequest.Builder;\nimport java.net.http.HttpResponse;\nimport java.time.Duration;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpResponse.BodyHandlers;\n\n\npublic class TestTranslate {\n    public static void main(String[] args) {\n        try{\n            HttpClient client = HttpClient.newBuilder().connectTimeout(Duration.ofMinutes(1)).build();\n            String translatePayload = &quot;async=translate,sl:en,tl:ro,st:delete,id:&quot; + System.currentTimeMillis() + &quot;,qc:true,ac:true,_id:tw-async-translate,_pms:s,_fmt:pc&quot;;\n        \n            Builder requestBuilder = HttpRequest.newBuilder().uri(URI.create(&quot;https://www.google.com/async/translate&quot;))\n                .timeout(Duration.ofMinutes(1))\n                .header(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded;charset=UTF-8&quot;);\n        \n            HttpRequest request = requestBuilder.POST(HttpRequest.BodyPublishers.ofString(translatePayload)).build();\n\n            HttpResponse&lt;String&gt; response = client.send(request, BodyHandlers.ofString());\n            System.out.println(&quot;=======================1&quot;);\n            System.out.println(response.body());\n        } catch(Exception e) {\n            System.out.println(&quot;=======================2&quot;);\n            e.printStackTrace(System.out);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","docker"],"owner":{"account_id":4017891,"reputation":181,"user_id":3309305,"display_name":"user3309305"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687008549,"creation_date":1687008549,"question_id":76496395,"body_markdown":"I am not able to connect to mysql using a JAVA Program.\r\n\r\nsudo netstat -ntlup | grep 3306\r\n\r\ntcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN      13226/docker-proxy  \r\ntcp6       0      0 :::3306                 :::*                    LISTEN      13232/docker-proxy\r\n\r\nEven with telnet i tested it was connecting\r\ntelnet localhost 3306\r\n\r\n```Trying 127.0.0.1...\r\nConnected to localhost.\r\nEscape character is &#39;^]&#39;\r\n\r\nBut My java application not able to connect jdbc:mysql://localhost/test","title":"Not able to connect to mysql running in a Docker","body":"<p>I am not able to connect to mysql using a JAVA Program.</p>\n<p>sudo netstat -ntlup | grep 3306</p>\n<p>tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN      13226/docker-proxy<br />\ntcp6       0      0 :::3306                 :::*                    LISTEN      13232/docker-proxy</p>\n<p>Even with telnet i tested it was connecting\ntelnet localhost 3306</p>\n<pre><code>Connected to localhost.\nEscape character is '^]'\n\nBut My java application not able to connect jdbc:mysql://localhost/test\n</code></pre>\n"},{"tags":["java","user-interface","netweaver","webdynpro"],"answers":[{"tags":[],"owner":{"account_id":542551,"reputation":10395,"user_id":911419,"accept_rate":79,"display_name":"Suncatcher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467543390,"creation_date":1467543390,"answer_id":38169242,"question_id":29997672,"body_markdown":"To iterate child elements of root element you should access root in `wdDoModifyView()` method:\r\n\r\n    IWDUIElementContainer root = (IWDUIElementContainer) view.getRootElement();\r\n\tIWDUIElement[] elements = root.getChildren();\r\n\t for (int i = 0; i &lt; elements.length; i++) {\r\n\t\t  IWDUIElement element = elements[i];\r\n\t\t  String id = element.getId();\r\n\r\n\t\t  if (id.equals(&quot;Button&quot;)) {\r\n\t\t\t  IWDButton button = (IWDButton)view.getElement(id);\r\n\t\t\t  button.setText(&quot;someText&quot;);\r\n          }\r\n\r\n     }","title":"How do I get all UI elements of a Web Dynpro Java view?","body":"<p>To iterate child elements of root element you should access root in <code>wdDoModifyView()</code> method:</p>\n\n<pre><code>IWDUIElementContainer root = (IWDUIElementContainer) view.getRootElement();\nIWDUIElement[] elements = root.getChildren();\n for (int i = 0; i &lt; elements.length; i++) {\n      IWDUIElement element = elements[i];\n      String id = element.getId();\n\n      if (id.equals(\"Button\")) {\n          IWDButton button = (IWDButton)view.getElement(id);\n          button.setText(\"someText\");\n      }\n\n }\n</code></pre>\n"}],"owner":{"account_id":6243013,"reputation":11,"user_id":4855974,"display_name":"Roberto Reinert"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":390,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1687005938,"creation_date":1430533375,"question_id":29997672,"body_markdown":"Is there any way to recursively iterate over all elements inside the root element of a Web Dynpro Java view? \r\n\r\nFor each found child element I would like to read/modify properties at runtime.\r\n","title":"How do I get all UI elements of a Web Dynpro Java view?","body":"<p>Is there any way to recursively iterate over all elements inside the root element of a Web Dynpro Java view?</p>\n<p>For each found child element I would like to read/modify properties at runtime.</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686930609,"creation_date":1686929378,"answer_id":76491618,"question_id":76490858,"body_markdown":"You can use the following pattern, although, there will be additional text within the captures.\r\n\r\n```none\r\n(?:&lt;np&gt;(.+?)(?=&lt;np&gt;|$))+?\r\n```\r\n\r\nAnd, you can populate the _groups_ map as follows.\r\n\r\n```java\r\npublic void processInput() {\r\n    Pattern regex = Pattern.compile(pattern);\r\n    Matcher matcher = regex.matcher(input);\r\n\r\n    int groupIndex = 1;\r\n\r\n    while (matcher.find())\r\n        groups.put(groupIndex++, matcher.group(1));\r\n\r\n    System.out.println(groups);\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n{1=semitic languages such as , 2=Hebrew ,, 3=mip ,, 4=bip ,, 5=bop or , 6=Arabic}\r\n```\r\n\r\nYou could then, remove the additional text from within the program, or add a set of values within the pattern.\r\n\r\n```none\r\n(?:&lt;np&gt;(.+?)(?=(?: languages such as | ,| or )&lt;np&gt;|$))+?\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n{1=semitic, 2=Hebrew, 3=mip, 4=bip, 5=bop, 6=Arabic}\r\n```","title":"how to detect and extract multiple occurrences of a group in a regex","body":"<p>You can use the following pattern, although, there will be additional text within the captures.</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?:&lt;np&gt;(.+?)(?=&lt;np&gt;|$))+?\n</code></pre>\n<p>And, you can populate the <em>groups</em> map as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void processInput() {\n    Pattern regex = Pattern.compile(pattern);\n    Matcher matcher = regex.matcher(input);\n\n    int groupIndex = 1;\n\n    while (matcher.find())\n        groups.put(groupIndex++, matcher.group(1));\n\n    System.out.println(groups);\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>{1=semitic languages such as , 2=Hebrew ,, 3=mip ,, 4=bip ,, 5=bop or , 6=Arabic}\n</code></pre>\n<p>You could then, remove the additional text from within the program, or add a set of values within the pattern.</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?:&lt;np&gt;(.+?)(?=(?: languages such as | ,| or )&lt;np&gt;|$))+?\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>{1=semitic, 2=Hebrew, 3=mip, 4=bip, 5=bop, 6=Arabic}\n</code></pre>\n"}],"owner":{"account_id":27514784,"reputation":1,"user_id":20995951,"display_name":"yuval cohen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687005784,"creation_date":1686923474,"question_id":76490858,"body_markdown":"I&#39;m trying to extract specific groups from a given string using regular expressions in Java. The pattern includes an option to capture an unknown number of `&lt;np&gt;` elements after the &quot;such as&quot; phrase, and I want to be able to save all of them. However, in my current implementation, I seem to be overwriting some of the groups and missing others.\r\n\r\nHere&#39;s the code I have so far:\r\n\r\n\r\n```java\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\n\r\npublic class Detector {\r\n    private final String input;\r\n    private final String pattern;\r\n    private final String lemma;\r\n    private final Map&lt;Integer, String&gt; groups;\r\n\r\n    public Detector(String input, String pattern, String lemma) {\r\n        this.input = input;\r\n        this.pattern = pattern;\r\n        this.lemma = lemma;\r\n        this.groups = new HashMap&lt;&gt;();\r\n        processInput();\r\n    }\r\n\r\n    public void processInput() {\r\n        Pattern regex = Pattern.compile(pattern);\r\n        Matcher matcher = regex.matcher(input);\r\n\r\n        int groupIndex = 1;\r\n\r\n        if (matcher.find()) {\r\n            groups.put(groupIndex, matcher.group(1));\r\n            groupIndex++;\r\n\r\n            for (int i = 2; i &lt;= matcher.groupCount(); i++) {\r\n                String group = matcher.group(i);\r\n                if (group != null ) {\r\n                    groups.put(groupIndex, group);\r\n                    groupIndex++;\r\n                }\r\n            }\r\n        }\r\n\r\n        System.out.println(groups);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        String input = &quot;&lt;np&gt;semitic languages such as &lt;np&gt;Hebrew ,&lt;np&gt;mip ,&lt;np&gt;bip ,&lt;np&gt;bop or &lt;np&gt;Arabic&quot;;\r\n        String pattern = &quot;&lt;np&gt;,?([\\\\w\\\\s]+)\\\\s+such as\\\\s+&lt;np&gt;([\\\\w]+)\\\\s(?:,&lt;np&gt;([\\\\w]+)\\\\s)*(?:(?:and|or)\\\\s&lt;np&gt;([\\\\w]+))?&quot;;\r\n        Detector suchAs = new Detector(input, pattern, &quot;mip&quot;);\r\n    }\r\n}\r\n```\r\n\r\nThe current output I&#39;m getting is `{1=semitic languages, 2=Hebrew, 3=bop, 4=Arabic}`, but it seems that I&#39;m missing the groups mip and bip. I suspect that I&#39;m overwriting them, but I&#39;m not sure how to save them before they get overwritten.\r\n\r\nAny help would be appreciated. Thank you! \r\nedit: i was given an easier task each np will be marked at its beggining and end as follows  &lt;np&gt;semitic languages&lt;/np&gt; such as &lt;np&gt;Hebrew&lt;/np&gt;,&lt;np&gt;bip&lt;/np&gt; &lt;np&gt;bop&lt;/np&gt; or &lt;np&gt;Arabic&lt;/np&gt; are composed of &lt;np&gt;consonants&lt;/np&gt; and &lt;np&gt;voyels&lt;/np&gt; i still cant get it to work but it should make things easier\r\n","title":"how to detect and extract multiple occurrences of a group in a regex","body":"<p>I'm trying to extract specific groups from a given string using regular expressions in Java. The pattern includes an option to capture an unknown number of <code>&lt;np&gt;</code> elements after the &quot;such as&quot; phrase, and I want to be able to save all of them. However, in my current implementation, I seem to be overwriting some of the groups and missing others.</p>\n<p>Here's the code I have so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.HashMap;\nimport java.util.Map;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class Detector {\n    private final String input;\n    private final String pattern;\n    private final String lemma;\n    private final Map&lt;Integer, String&gt; groups;\n\n    public Detector(String input, String pattern, String lemma) {\n        this.input = input;\n        this.pattern = pattern;\n        this.lemma = lemma;\n        this.groups = new HashMap&lt;&gt;();\n        processInput();\n    }\n\n    public void processInput() {\n        Pattern regex = Pattern.compile(pattern);\n        Matcher matcher = regex.matcher(input);\n\n        int groupIndex = 1;\n\n        if (matcher.find()) {\n            groups.put(groupIndex, matcher.group(1));\n            groupIndex++;\n\n            for (int i = 2; i &lt;= matcher.groupCount(); i++) {\n                String group = matcher.group(i);\n                if (group != null ) {\n                    groups.put(groupIndex, group);\n                    groupIndex++;\n                }\n            }\n        }\n\n        System.out.println(groups);\n    }\n\n    public static void main(String[] args) {\n        String input = &quot;&lt;np&gt;semitic languages such as &lt;np&gt;Hebrew ,&lt;np&gt;mip ,&lt;np&gt;bip ,&lt;np&gt;bop or &lt;np&gt;Arabic&quot;;\n        String pattern = &quot;&lt;np&gt;,?([\\\\w\\\\s]+)\\\\s+such as\\\\s+&lt;np&gt;([\\\\w]+)\\\\s(?:,&lt;np&gt;([\\\\w]+)\\\\s)*(?:(?:and|or)\\\\s&lt;np&gt;([\\\\w]+))?&quot;;\n        Detector suchAs = new Detector(input, pattern, &quot;mip&quot;);\n    }\n}\n</code></pre>\n<p>The current output I'm getting is <code>{1=semitic languages, 2=Hebrew, 3=bop, 4=Arabic}</code>, but it seems that I'm missing the groups mip and bip. I suspect that I'm overwriting them, but I'm not sure how to save them before they get overwritten.</p>\n<p>Any help would be appreciated. Thank you!\nedit: i was given an easier task each np will be marked at its beggining and end as follows  semitic languages such as Hebrew,bip bop or Arabic are composed of consonants and voyels i still cant get it to work but it should make things easier</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686991727,"post_id":76495341,"comment_id":134877011,"body_markdown":"If you are checking the resulted JSON then you will not see the list of tasks. It is annotated with JsonBackReference.","body":"If you are checking the resulted JSON then you will not see the list of tasks. It is annotated with JsonBackReference."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686991887,"post_id":76495341,"comment_id":134877025,"body_markdown":"PS: for the inheritance type TABLE_PER_CLASS no discriminator column needed. Only for SINGLE_TABLE","body":"PS: for the inheritance type TABLE_PER_CLASS no discriminator column needed. Only for SINGLE_TABLE"},{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1686991954,"post_id":76495341,"comment_id":134877028,"body_markdown":"I was getting Jackson error without the JsonBackReference - how do I retrieve it then?","body":"I was getting Jackson error without the JsonBackReference - how do I retrieve it then?"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686992575,"post_id":76495341,"comment_id":134877092,"body_markdown":"What error exactly?","body":"What error exactly?"},{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1686992804,"post_id":76495341,"comment_id":134877108,"body_markdown":"Looks like infinite recursion when I remove BackReference and Managed Reference.","body":"Looks like infinite recursion when I remove BackReference and Managed Reference."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686993143,"post_id":76495341,"comment_id":134877134,"body_markdown":"Yes. You have a bi-directional relationship. But maybe you can mark another end of relationship as JsonBackReference and this one as JsonManagedReference? Would it be an option?","body":"Yes. You have a bi-directional relationship. But maybe you can mark another end of relationship as JsonBackReference and this one as JsonManagedReference? Would it be an option?"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686994110,"post_id":76495341,"comment_id":134877217,"body_markdown":"Can you try the above solution? If you get the appropriate type of task in the result? (I would rather stick with SO communication and provide a proper answer).","body":"Can you try the above solution? If you get the appropriate type of task in the result? (I would rather stick with SO communication and provide a proper answer)."},{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1686994256,"post_id":76495341,"comment_id":134877223,"body_markdown":"I am not sure what you mean by other end of the relationship.","body":"I am not sure what you mean by other end of the relationship."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686994448,"post_id":76495341,"comment_id":134877242,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254114/discussion-between-mar-z-and-al-grant).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254114/discussion-between-mar-z-and-al-grant\">continue this discussion in chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687005210,"creation_date":1687005210,"answer_id":76496210,"question_id":76495341,"body_markdown":"We have discussed it on chat and I was able to reproduce your settings. There are some issues with your code:\r\n1. The `@JsonBackReference` annotation in the `HealthCheck` entity cause the field `tasks` to not being serialized. Hence not present in JSON at all. You should swap both annotations around like this:\r\n```\r\n// in HealthCheck\r\n@JsonManagedReference\r\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy=&quot;healthCheck&quot;)\r\nprivate List&lt;Task&gt; tasks;\r\n// in Task\r\n@JsonBackReference\r\n@ManyToOne(fetch = FetchType.LAZY, optional = false)\r\nprivate HealthCheck healthCheck;\r\n```\r\n2. You have a field named `healthCheck` not only in the `Task` entity but also in the `PIT` entity. With different meaning. As this field is in use for mapping of tasks this cause an issue while Hibernate is fetching and mapping the entities. Most probably you don&#39;t need the second field. Either remove or rename it.\r\n3. For the inheritance type TABLE_PER_CLASS no discriminator column needed. Only for SINGLE_TABLE\r\n4. It is also important to have a proper data in the database. For the minimal test case you should have following entries:\r\n```\r\nTable HEALTH_CHECK: (health_check_id)\r\n(1)\r\nTable TASK: empty! (you have no entities of type Task)\r\nTable PIT: (task_id, health_check_id)\r\n(1, 1)\r\n(2, 1)\r\n```\r\nThis means two PITs (with ID 1 and 2) related to the HEALTH_CHECK with ID=1.","title":"Spring - JPA query for second level entity on Table Per Class","body":"<p>We have discussed it on chat and I was able to reproduce your settings. There are some issues with your code:</p>\n<ol>\n<li>The <code>@JsonBackReference</code> annotation in the <code>HealthCheck</code> entity cause the field <code>tasks</code> to not being serialized. Hence not present in JSON at all. You should swap both annotations around like this:</li>\n</ol>\n<pre><code>// in HealthCheck\n@JsonManagedReference\n@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy=&quot;healthCheck&quot;)\nprivate List&lt;Task&gt; tasks;\n// in Task\n@JsonBackReference\n@ManyToOne(fetch = FetchType.LAZY, optional = false)\nprivate HealthCheck healthCheck;\n</code></pre>\n<ol start=\"2\">\n<li>You have a field named <code>healthCheck</code> not only in the <code>Task</code> entity but also in the <code>PIT</code> entity. With different meaning. As this field is in use for mapping of tasks this cause an issue while Hibernate is fetching and mapping the entities. Most probably you don't need the second field. Either remove or rename it.</li>\n<li>For the inheritance type TABLE_PER_CLASS no discriminator column needed. Only for SINGLE_TABLE</li>\n<li>It is also important to have a proper data in the database. For the minimal test case you should have following entries:</li>\n</ol>\n<pre><code>Table HEALTH_CHECK: (health_check_id)\n(1)\nTable TASK: empty! (you have no entities of type Task)\nTable PIT: (task_id, health_check_id)\n(1, 1)\n(2, 1)\n</code></pre>\n<p>This means two PITs (with ID 1 and 2) related to the HEALTH_CHECK with ID=1.</p>\n"}],"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76496210,"answer_count":1,"score":1,"last_activity_date":1687005210,"creation_date":1686990147,"question_id":76495341,"body_markdown":"Querying for a second level entity in Spring with JPA and there is no error, the web page sits on spinning wheel loading, and the debugger window shows the query, but no error.\r\n\r\nThe top-level entity is `Health Check`, and I am trying to retrieve a list of entities extended by `Task` with it.\r\n\r\n**Health Check**\r\n\r\n```java\r\n@Entity\r\n@Data\r\n@Table(name=&quot;HEALTH_CHECK&quot;)\r\npublic class HealthCheck {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = IDENTITY)\r\n    private Long healthCheckid;\r\n\r\n    @JsonManagedReference\r\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\r\n    private Bird bird;\r\n\r\n    @JsonBackReference\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy=&quot;healthCheck&quot;)\r\n    private List&lt;Task&gt; tasks;\r\n\r\n}\r\n```\r\n\r\n**Task**\r\n\r\n```java\r\n@Entity\r\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n@DiscriminatorColumn(name = &quot;TASK_TYPE&quot;)\r\n@Table(name=&quot;TASK&quot;)\r\npublic class Task {\r\n\r\n    @Id\r\n    private Long taskId;\r\n\r\n    @JsonManagedReference\r\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    private HealthCheck healthCheck;\r\n\r\n}\r\n```\r\n\r\nVarious entities extend `Task` like `PIT`, `MEM` and `XMIT` - only `PIT` shown here for berevity:\r\n\r\n**PIT**\r\n\r\n```java\r\n@Entity\r\npublic class PIT extends Task {\r\n\r\n    @Column(unique = true)\r\n    @NotEmpty(message = &quot;Name must not be null or empty&quot;)\r\n    private String code;\r\n\r\n    @JoinColumn(name =&quot;date_instered&quot;)\r\n    private LocalDate dateInserted;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY, optional = true)\r\n    private HealthCheck healthCheck;\r\n\r\n    @Lob\r\n    private String comment;    \r\n}\r\n```\r\n\r\n\r\n**NB** PIT is one of four extended classes using Task. I have tried to query for a `Health Check` with all associated tasks in the following query, but this just gives `Health Check` details.\r\n\r\n```java\r\npublic interface HealthCheckRepository extends JpaRepository&lt;HealthCheck, Long&gt; {\r\n\r\n    @Query(&quot;SELECT h FROM HealthCheck h JOIN FETCH h.tasks t WHERE h.healthCheckid = :id&quot;)\r\n    Optional&lt;HealthCheck&gt; getFullHealthCheck(@Param(&quot;health_check_id&quot;) Long id);\r\n\r\n}\r\n```\r\n\r\nIn plain english, I want to get a specific `HealthCheck` and the associated id of Task. If any of the extended classes of `PIT` `MEM` XMIT` are also present (in there own tables) they will share the same Id as task (in the above query it would be t.id). Part of the answer is to do with TYPE in the query like [here][1].\r\n\r\nHow can I include fields from the child classes like `PIT` where there is a record?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/71723116/i-want-to-implement-inheritance-strategytable-per-class-using-discriminator-co","title":"Spring - JPA query for second level entity on Table Per Class","body":"<p>Querying for a second level entity in Spring with JPA and there is no error, the web page sits on spinning wheel loading, and the debugger window shows the query, but no error.</p>\n<p>The top-level entity is <code>Health Check</code>, and I am trying to retrieve a list of entities extended by <code>Task</code> with it.</p>\n<p><strong>Health Check</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Data\n@Table(name=&quot;HEALTH_CHECK&quot;)\npublic class HealthCheck {\n\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    private Long healthCheckid;\n\n    @JsonManagedReference\n    @ManyToOne(fetch = FetchType.EAGER, optional = false)\n    private Bird bird;\n\n    @JsonBackReference\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, mappedBy=&quot;healthCheck&quot;)\n    private List&lt;Task&gt; tasks;\n\n}\n</code></pre>\n<p><strong>Task</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@DiscriminatorColumn(name = &quot;TASK_TYPE&quot;)\n@Table(name=&quot;TASK&quot;)\npublic class Task {\n\n    @Id\n    private Long taskId;\n\n    @JsonManagedReference\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    private HealthCheck healthCheck;\n\n}\n</code></pre>\n<p>Various entities extend <code>Task</code> like <code>PIT</code>, <code>MEM</code> and <code>XMIT</code> - only <code>PIT</code> shown here for berevity:</p>\n<p><strong>PIT</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class PIT extends Task {\n\n    @Column(unique = true)\n    @NotEmpty(message = &quot;Name must not be null or empty&quot;)\n    private String code;\n\n    @JoinColumn(name =&quot;date_instered&quot;)\n    private LocalDate dateInserted;\n\n    @OneToOne(fetch = FetchType.LAZY, optional = true)\n    private HealthCheck healthCheck;\n\n    @Lob\n    private String comment;    \n}\n</code></pre>\n<p><strong>NB</strong> PIT is one of four extended classes using Task. I have tried to query for a <code>Health Check</code> with all associated tasks in the following query, but this just gives <code>Health Check</code> details.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface HealthCheckRepository extends JpaRepository&lt;HealthCheck, Long&gt; {\n\n    @Query(&quot;SELECT h FROM HealthCheck h JOIN FETCH h.tasks t WHERE h.healthCheckid = :id&quot;)\n    Optional&lt;HealthCheck&gt; getFullHealthCheck(@Param(&quot;health_check_id&quot;) Long id);\n\n}\n</code></pre>\n<p>In plain english, I want to get a specific <code>HealthCheck</code> and the associated id of Task. If any of the extended classes of <code>PIT</code> <code>MEM</code> XMIT` are also present (in there own tables) they will share the same Id as task (in the above query it would be t.id). Part of the answer is to do with TYPE in the query like <a href=\"https://stackoverflow.com/questions/71723116/i-want-to-implement-inheritance-strategytable-per-class-using-discriminator-co\">here</a>.</p>\n<p>How can I include fields from the child classes like <code>PIT</code> where there is a record?</p>\n"},{"tags":["java","spring","hibernate","spring-context","hibernate-6.x"],"answers":[{"tags":[],"owner":{"account_id":28829784,"reputation":67,"user_id":22080520,"display_name":"vesper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686986173,"creation_date":1686890171,"answer_id":76486983,"question_id":76486584,"body_markdown":"&lt;s&gt;is there any particular reason you want to make the sequence generator a bean?\r\n\r\nas long as it implements `org.hibernate.id.IdentifierGenerator` (it does), you should be able to apply your incremental logic for whatever field you want by using the `@GenericGenerator` annotation\r\n\r\nreference - https://thorben-janssen.com/custom-sequence-based-idgenerator/&lt;/s&gt;\r\n\r\ni finally made time to try to replicate your problem and the only way i was able to get this to work was passing a value in the jvm arguments via `-Dsequence-prefix=ex-prefix-` and then pulling that property value without using spring. so in your case:\r\n\r\n```\r\npublic class CustomSequenceGenerator extends SequenceStyleGenerator {\r\n  private String valueFromPropFile = System.getProperty(&quot;sequence-prefix&quot;); // &quot;ex-prefix-&quot;\r\n\r\n  @Override\r\n  public Serializable generate(...) {...}\r\n\r\n}\r\n```\r\n\r\nit&#39;s kinda ugly but hey it works","title":"Using custom sequence generator from spring context","body":"<p><s>is there any particular reason you want to make the sequence generator a bean?</p>\n<p>as long as it implements <code>org.hibernate.id.IdentifierGenerator</code> (it does), you should be able to apply your incremental logic for whatever field you want by using the <code>@GenericGenerator</code> annotation</p>\n<p>reference - <a href=\"https://thorben-janssen.com/custom-sequence-based-idgenerator/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/custom-sequence-based-idgenerator/</a></s></p>\n<p>i finally made time to try to replicate your problem and the only way i was able to get this to work was passing a value in the jvm arguments via <code>-Dsequence-prefix=ex-prefix-</code> and then pulling that property value without using spring. so in your case:</p>\n<pre><code>public class CustomSequenceGenerator extends SequenceStyleGenerator {\n  private String valueFromPropFile = System.getProperty(&quot;sequence-prefix&quot;); // &quot;ex-prefix-&quot;\n\n  @Override\n  public Serializable generate(...) {...}\n\n}\n</code></pre>\n<p>it's kinda ugly but hey it works</p>\n"},{"tags":[],"owner":{"account_id":1681527,"reputation":2381,"user_id":1545664,"accept_rate":69,"display_name":"lemoncodes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687004874,"creation_date":1687004874,"answer_id":76496180,"question_id":76486584,"body_markdown":"I&#39;ve managed to have a reference to the spring application context based on this [question][1]\r\n\r\nThe idea is, make a spring bean which will inject a the `ApplicationContext` bean and have it set into a ApplicationContext utility class. \r\n\r\nFrom there, you can use your application context utility class to access the application context instance and get the property field value via \r\n`applicationContext.getEnvironment().getProperty(&quot;prop.file.prefix&quot;)`\r\n\r\nSee this [code reference][2] on how to setup the application context configuration\r\n\r\nHope this helps everyone get an idea on how to achieve this kind of workaround.\r\n\r\nIf you have any other idea to achieve the same, please do put your answers. I know there are other ways to achieve the same.\r\n\r\n  [1]: https://stackoverflow.com/questions/28005761/how-to-access-a-method-a-spring-bean-from-a-class-not-in-the-spring-container\r\n  [2]: https://gist.github.com/mdread/3175976","title":"Using custom sequence generator from spring context","body":"<p>I've managed to have a reference to the spring application context based on this <a href=\"https://stackoverflow.com/questions/28005761/how-to-access-a-method-a-spring-bean-from-a-class-not-in-the-spring-container\">question</a></p>\n<p>The idea is, make a spring bean which will inject a the <code>ApplicationContext</code> bean and have it set into a ApplicationContext utility class.</p>\n<p>From there, you can use your application context utility class to access the application context instance and get the property field value via\n<code>applicationContext.getEnvironment().getProperty(&quot;prop.file.prefix&quot;)</code></p>\n<p>See this <a href=\"https://gist.github.com/mdread/3175976\" rel=\"nofollow noreferrer\">code reference</a> on how to setup the application context configuration</p>\n<p>Hope this helps everyone get an idea on how to achieve this kind of workaround.</p>\n<p>If you have any other idea to achieve the same, please do put your answers. I know there are other ways to achieve the same.</p>\n"}],"owner":{"account_id":1681527,"reputation":2381,"user_id":1545664,"accept_rate":69,"display_name":"lemoncodes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1687004874,"creation_date":1686882002,"question_id":76486584,"body_markdown":"Hello i have this issue on a custom sequence generator that is not managed by spring context. \r\n\r\nThis issue came to be when we migrated to hibernate 6 as well as spring-boot 3 and spring 6.\r\n\r\n**The Problem**\r\n\r\nI cannot seem to get the values from the property file within my customer generator via `@Value`\r\n\r\nI have annotated `@Component` to my `CustomSequenceGenerator`, see below\r\n\r\n**CustomSequenceGenerator.java**\r\n\r\n    @Component\r\n    public class CustomSequenceGenerator extends SequenceStyleGenerator {\r\n      @Value(&quot;${value.from.property.file}&quot;)\r\n      private String valueFromPropFile;\r\n\r\n      @Override\r\n      public Serializable generate(...) {...}\r\n    \r\n    }\r\n\r\n**MyEntity.java**\r\n\r\n    @Entity\r\n    @Table(name=&quot;myentity&quot;)\r\n    @Getter\r\n    @Setter\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class MyEntity {\r\n    \r\n       @Id\r\n       @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;seq_gen&quot;)\r\n       @GenericGenerator(\r\n            name = &quot;seq_gen&quot;,\r\n            strategy = &quot;com.demo.CustomSequenceGenerator&quot;,\r\n            parameters = {\r\n               @Parameters(name = &quot;increment_size&quot;, value = &quot;1&quot;)\r\n            }    \r\n       )\r\n       private String id;\r\n    \r\n       ...\r\n    }\r\n\r\nBased on the above code snippet, my value `valueFromPropFile` is always null. \r\n\r\nIt seems that `CustomSequenceGenerator` is not managed by spring. Instead, hibernate is the one instantiating it and that is why i can&#39;t get the values from `@Value`.\r\n\r\nConfirmed this when i try to display the Object it self. \r\n\r\nin `CustomSequenceGenerator.java`, in on of the `configure` method. i put a logging and display `this`. At the same time, i logged somewhere in a @RestController, the instance of the `CustomSequenceGenerator` via `ApplicatonContext` `getBean` method.\r\n\r\nResults were, they have different memory reference. therefore i can conluded that they have different instances. \r\n\r\n**Question**\r\n\r\nSo my question is, how do i make sure that the instance of `CustomSequenceGenerator` that is being used by hibernate will be the same instance that is in the spring context. Or how do i make sure hibernate don&#39;t instantiate new `CustomSequenceGenerator` and instead use one from spring context","title":"Using custom sequence generator from spring context","body":"<p>Hello i have this issue on a custom sequence generator that is not managed by spring context.</p>\n<p>This issue came to be when we migrated to hibernate 6 as well as spring-boot 3 and spring 6.</p>\n<p><strong>The Problem</strong></p>\n<p>I cannot seem to get the values from the property file within my customer generator via <code>@Value</code></p>\n<p>I have annotated <code>@Component</code> to my <code>CustomSequenceGenerator</code>, see below</p>\n<p><strong>CustomSequenceGenerator.java</strong></p>\n<pre><code>@Component\npublic class CustomSequenceGenerator extends SequenceStyleGenerator {\n  @Value(&quot;${value.from.property.file}&quot;)\n  private String valueFromPropFile;\n\n  @Override\n  public Serializable generate(...) {...}\n\n}\n</code></pre>\n<p><strong>MyEntity.java</strong></p>\n<pre><code>@Entity\n@Table(name=&quot;myentity&quot;)\n@Getter\n@Setter\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class MyEntity {\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;seq_gen&quot;)\n   @GenericGenerator(\n        name = &quot;seq_gen&quot;,\n        strategy = &quot;com.demo.CustomSequenceGenerator&quot;,\n        parameters = {\n           @Parameters(name = &quot;increment_size&quot;, value = &quot;1&quot;)\n        }    \n   )\n   private String id;\n\n   ...\n}\n</code></pre>\n<p>Based on the above code snippet, my value <code>valueFromPropFile</code> is always null.</p>\n<p>It seems that <code>CustomSequenceGenerator</code> is not managed by spring. Instead, hibernate is the one instantiating it and that is why i can't get the values from <code>@Value</code>.</p>\n<p>Confirmed this when i try to display the Object it self.</p>\n<p>in <code>CustomSequenceGenerator.java</code>, in on of the <code>configure</code> method. i put a logging and display <code>this</code>. At the same time, i logged somewhere in a @RestController, the instance of the <code>CustomSequenceGenerator</code> via <code>ApplicatonContext</code> <code>getBean</code> method.</p>\n<p>Results were, they have different memory reference. therefore i can conluded that they have different instances.</p>\n<p><strong>Question</strong></p>\n<p>So my question is, how do i make sure that the instance of <code>CustomSequenceGenerator</code> that is being used by hibernate will be the same instance that is in the spring context. Or how do i make sure hibernate don't instantiate new <code>CustomSequenceGenerator</code> and instead use one from spring context</p>\n"},{"tags":["java","hadoop","jdbc","hana","sqoop2"],"comments":[{"owner":{"account_id":76469,"reputation":18423,"user_id":218890,"accept_rate":64,"display_name":"vwegert"},"score":0,"creation_date":1421770084,"post_id":28049378,"comment_id":44481938,"body_markdown":"I think this may be off-topic because there&#39;s nothing to indicate that this is a programming-related question and/or a reproducible general issue.","body":"I think this may be off-topic because there&#39;s nothing to indicate that this is a programming-related question and/or a reproducible general issue."},{"owner":{"account_id":4774622,"reputation":1360,"user_id":3858193,"accept_rate":59,"display_name":"user3858193"},"score":0,"creation_date":1424797579,"post_id":28049378,"comment_id":45693816,"body_markdown":"Hi ,I could manage to do this using sap jdbc driver. The password was about to change and hence error was throwing. DBA modified the password and it solved the prob.","body":"Hi ,I could manage to do this using sap jdbc driver. The password was about to change and hence error was throwing. DBA modified the password and it solved the prob."},{"owner":{"account_id":76469,"reputation":18423,"user_id":218890,"accept_rate":64,"display_name":"vwegert"},"score":0,"creation_date":1424797701,"post_id":28049378,"comment_id":45693896,"body_markdown":"Then this is definitely off-topic.","body":"Then this is definitely off-topic."},{"owner":{"account_id":4954362,"reputation":1595,"user_id":3987417,"accept_rate":100,"display_name":"Hafiz Mujadid"},"score":0,"creation_date":1430374821,"post_id":28049378,"comment_id":48041220,"body_markdown":"@user3858193 How did you managed? I am facing same issue","body":"@user3858193 How did you managed? I am facing same issue"}],"answers":[{"tags":[],"owner":{"account_id":4774622,"reputation":1360,"user_id":3858193,"accept_rate":59,"display_name":"user3858193"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1430482525,"creation_date":1430482525,"answer_id":29986676,"question_id":28049378,"body_markdown":"@hafizmujadid  when there is a password expiration deadline comes , it throws these error. What you have to do is ask the team from Sap Hana side to change the password. This solved my problem and it may be yours.\r\n","title":"Connection failure to SAP HANA from Sqoop SAP DBTech JDBC: [414]: user is forced to change password","body":"<p>@hafizmujadid  when there is a password expiration deadline comes , it throws these error. What you have to do is ask the team from Sap Hana side to change the password. This solved my problem and it may be yours.</p>\n"}],"owner":{"account_id":4774622,"reputation":1360,"user_id":3858193,"accept_rate":59,"display_name":"user3858193"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1470,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":29986676,"answer_count":1,"score":0,"last_activity_date":1687004835,"creation_date":1421768404,"question_id":28049378,"body_markdown":"Though the User id and password is correct, I am getting below error message.\r\n\r\nPlease let me know if you have any solution.\r\n\r\nIn SAP HANA - HIVE Table.\r\n\r\n&gt; ```\r\n&gt; Warning: /apps/opt/cloudera/parcels/CDH-5.2.0-1.cdh5.2.0.p0.36/bin/../lib/sqoop/../accumulo does not exist! Accumulo imports will fail.\r\n&gt; Please set $ACCUMULO_HOME to the root of your Accumulo installation.\r\n&gt; 15/01/20 10:30:15 INFO sqoop.Sqoop: Running Sqoop version: 1.4.5-cdh5.2.0\r\n&gt; 15/01/20 10:30:15 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.\r\n&gt; 15/01/20 10:30:15 INFO tool.BaseSqoopTool: Using Hive-specific delimiters for output. You can override\r\n&gt; 15/01/20 10:30:15 INFO tool.BaseSqoopTool: delimiters with --fields-terminated-by, etc.\r\n&gt; 15/01/20 10:30:15 INFO teradata.TeradataManagerFactory: Loaded connector factory for &#39;Cloudera Connector Powered by Teradata&#39; on version 1.2c5\r\n&gt; 15/01/20 10:30:15 WARN sqoop.ConnFactory: Parameter --driver is set to an explicit driver however appropriate connection manager is not being set (via --connection-manager).\r\n&gt;   Sqoop is going to fall back to org.apache.sqoop.manager.GenericJdbcManager. Please specify explicitly which connection manager should be used next time.\r\n&gt; 15/01/20 10:30:15 INFO manager.SqlManager: Using default fetchSize of 1000\r\n&gt; 15/01/20 10:30:15 INFO tool.CodeGenTool: Beginning code generation\r\n&gt; 15/01/20 10:30:16 ERROR manager.SqlManager: Error executing statement:\r\n&gt;   com.sap.db.jdbc.exceptions.JDBCDriverException: SAP DBTech JDBC: [414]: user is forced to change password: alter password required for user CH1HAHSGPOC\r\n&gt;   com.sap.db.jdbc.exceptions.JDBCDriverException: SAP DBTech JDBC: [414]: user is forced to change password: alter password required for user CH1HAHSGPOC\r\n&gt;         at com.sap.db.jdbc.exceptions.SQLExceptionSapDB.createException(SQLExceptionSapDB.java:334)\r\n&gt;         at com.sap.db.jdbc.exceptions.SQLExceptionSapDB.generateDatabaseException(SQLExceptionSapDB.java:174)\r\n&gt;         at com.sap.db.jdbc.packet.ReplyPacket.buildExceptionChain(ReplyPacket.java:102)\r\n&gt; ```\r\n","title":"Connection failure to SAP HANA from Sqoop SAP DBTech JDBC: [414]: user is forced to change password","body":"<p>Though the User id and password is correct, I am getting below error message.</p>\n<p>Please let me know if you have any solution.</p>\n<p>In SAP HANA - HIVE Table.</p>\n<blockquote>\n<pre><code>Warning: /apps/opt/cloudera/parcels/CDH-5.2.0-1.cdh5.2.0.p0.36/bin/../lib/sqoop/../accumulo does not exist! Accumulo imports will fail.\nPlease set $ACCUMULO_HOME to the root of your Accumulo installation.\n15/01/20 10:30:15 INFO sqoop.Sqoop: Running Sqoop version: 1.4.5-cdh5.2.0\n15/01/20 10:30:15 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.\n15/01/20 10:30:15 INFO tool.BaseSqoopTool: Using Hive-specific delimiters for output. You can override\n15/01/20 10:30:15 INFO tool.BaseSqoopTool: delimiters with --fields-terminated-by, etc.\n15/01/20 10:30:15 INFO teradata.TeradataManagerFactory: Loaded connector factory for 'Cloudera Connector Powered by Teradata' on version 1.2c5\n15/01/20 10:30:15 WARN sqoop.ConnFactory: Parameter --driver is set to an explicit driver however appropriate connection manager is not being set (via --connection-manager).\n  Sqoop is going to fall back to org.apache.sqoop.manager.GenericJdbcManager. Please specify explicitly which connection manager should be used next time.\n15/01/20 10:30:15 INFO manager.SqlManager: Using default fetchSize of 1000\n15/01/20 10:30:15 INFO tool.CodeGenTool: Beginning code generation\n15/01/20 10:30:16 ERROR manager.SqlManager: Error executing statement:\n  com.sap.db.jdbc.exceptions.JDBCDriverException: SAP DBTech JDBC: [414]: user is forced to change password: alter password required for user CH1HAHSGPOC\n  com.sap.db.jdbc.exceptions.JDBCDriverException: SAP DBTech JDBC: [414]: user is forced to change password: alter password required for user CH1HAHSGPOC\n        at com.sap.db.jdbc.exceptions.SQLExceptionSapDB.createException(SQLExceptionSapDB.java:334)\n        at com.sap.db.jdbc.exceptions.SQLExceptionSapDB.generateDatabaseException(SQLExceptionSapDB.java:174)\n        at com.sap.db.jdbc.packet.ReplyPacket.buildExceptionChain(ReplyPacket.java:102)\n</code></pre>\n</blockquote>\n"},{"tags":["java","eclipse","maven","web-applications"],"comments":[{"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"score":0,"creation_date":1514454458,"post_id":48005134,"comment_id":82978417,"body_markdown":"Where is the error?","body":"Where is the error?"},{"owner":{"account_id":7487906,"reputation":426,"user_id":5690546,"display_name":"karthik selvaraj"},"score":0,"creation_date":1514454521,"post_id":48005134,"comment_id":82978450,"body_markdown":"sorry please check now.","body":"sorry please check now."},{"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"score":0,"creation_date":1514454629,"post_id":48005134,"comment_id":82978511,"body_markdown":"I think this will help you https://stackoverflow.com/a/10685698/3143670","body":"I think this will help you <a href=\"https://stackoverflow.com/a/10685698/3143670\">stackoverflow.com/a/10685698/3143670</a>"},{"owner":{"account_id":2176106,"reputation":5850,"user_id":1926762,"accept_rate":60,"display_name":"Oomph Fortuity"},"score":0,"creation_date":1514454704,"post_id":48005134,"comment_id":82978553,"body_markdown":"This problem is due to settings.xml is not defined properly. Please refer https://stackoverflow.com/questions/15334394/could-not-transfer-artifact-org-apache-maven-pluginsmaven-surefire-pluginpom2","body":"This problem is due to settings.xml is not defined properly. Please refer <a href=\"https://stackoverflow.com/questions/15334394/could-not-transfer-artifact-org-apache-maven-pluginsmaven-surefire-pluginpom2\" title=\"could not transfer artifact org apache maven pluginsmaven surefire pluginpom2\">stackoverflow.com/questions/15334394/&hellip;</a>"},{"owner":{"account_id":7487906,"reputation":426,"user_id":5690546,"display_name":"karthik selvaraj"},"score":0,"creation_date":1514454719,"post_id":48005134,"comment_id":82978560,"body_markdown":"I have checked that answer but where do i find .lastUpdated file","body":"I have checked that answer but where do i find .lastUpdated file"},{"owner":{"account_id":7487906,"reputation":426,"user_id":5690546,"display_name":"karthik selvaraj"},"score":0,"creation_date":1514454906,"post_id":48005134,"comment_id":82978674,"body_markdown":"@OomphFortuity - which setting.xml? i think that is different question.","body":"@OomphFortuity - which setting.xml? i think that is different question."},{"owner":{"account_id":2176106,"reputation":5850,"user_id":1926762,"accept_rate":60,"display_name":"Oomph Fortuity"},"score":0,"creation_date":1514454971,"post_id":48005134,"comment_id":82978719,"body_markdown":"@karthikselvaraj on which location you have placed settings.xml?","body":"@karthikselvaraj on which location you have placed settings.xml?"},{"owner":{"account_id":7487906,"reputation":426,"user_id":5690546,"display_name":"karthik selvaraj"},"score":0,"creation_date":1514455073,"post_id":48005134,"comment_id":82978778,"body_markdown":"@OomphFortuity - I don&#39;t have file like that","body":"@OomphFortuity - I don&#39;t have file like that"},{"owner":{"account_id":2176106,"reputation":5850,"user_id":1926762,"accept_rate":60,"display_name":"Oomph Fortuity"},"score":0,"creation_date":1514455788,"post_id":48005134,"comment_id":82979176,"body_markdown":"@karthikselvaraj this is the issue.Please configure your local repo https://maven.apache.org/guides/mini/guide-configuring-maven.html","body":"@karthikselvaraj this is the issue.Please configure your local repo <a href=\"https://maven.apache.org/guides/mini/guide-configuring-maven.html\" rel=\"nofollow noreferrer\">maven.apache.org/guides/mini/guide-configuring-maven.html</a>"},{"owner":{"account_id":7487906,"reputation":426,"user_id":5690546,"display_name":"karthik selvaraj"},"score":0,"creation_date":1514457773,"post_id":48005134,"comment_id":82980212,"body_markdown":"@OomphFortuity - thanks for your command, finally I have fixed this issue by deleting com.thoughtworks.xstream:xstream folder from local repo","body":"@OomphFortuity - thanks for your command, finally I have fixed this issue by deleting com.thoughtworks.xstream:xstream folder from local repo"},{"owner":{"account_id":7487906,"reputation":426,"user_id":5690546,"display_name":"karthik selvaraj"},"score":0,"creation_date":1514457934,"post_id":48005134,"comment_id":82980283,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/162087/discussion-between-karthik-selvaraj-and-oomph-fortuity).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/162087/discussion-between-karthik-selvaraj-and-oomph-fortuity\">continue this discussion in chat</a>."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1514460827,"post_id":48005134,"comment_id":82981612,"body_markdown":"I would say based on the error message you have either a firewall/proxy in front of the internet access which fails .. ` The operation was cancelled....`","body":"I would say based on the error message you have either a firewall/proxy in front of the internet access which fails .. ` The operation was cancelled....`"}],"answers":[{"tags":[],"owner":{"account_id":7487906,"reputation":426,"user_id":5690546,"display_name":"karthik selvaraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1514457910,"creation_date":1514457910,"answer_id":48006005,"question_id":48005134,"body_markdown":"I fixed this issue by deleting the corresponding failed to download artifact directory in my local repo. So that next time it will downloaded automatically.","title":"Error in pom.xml file in eclipse webapp","body":"<p>I fixed this issue by deleting the corresponding failed to download artifact directory in my local repo. So that next time it will downloaded automatically.</p>\n"},{"tags":[],"owner":{"account_id":26804170,"reputation":1,"user_id":20395690,"display_name":"Brown Whale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687003223,"creation_date":1687003223,"answer_id":76496088,"question_id":48005134,"body_markdown":"Let me explain the problem in layman terms\r\n 1. one of the dependencies in the pom.xml is unable to be downloaded.\r\n 2. that&#39;s the reason it keeps on showing error whatever you try.\r\n 3. the solution is, identify the dependency and remove it from the pom.xml\r\n 4. Add it as a Jar file (if the dependency is mandatory, else just ignore the dependency)\r\n 5. tricky part is, you have to identify the correct dependency which shows the error.\r\n     Hope this helps. \r\nps: I am a noobie, I faced the similar issue and the above was the solution which worked for me. Thanks!\r\n","title":"Error in pom.xml file in eclipse webapp","body":"<p>Let me explain the problem in layman terms</p>\n<ol>\n<li>one of the dependencies in the pom.xml is unable to be downloaded.</li>\n<li>that's the reason it keeps on showing error whatever you try.</li>\n<li>the solution is, identify the dependency and remove it from the pom.xml</li>\n<li>Add it as a Jar file (if the dependency is mandatory, else just ignore the dependency)</li>\n<li>tricky part is, you have to identify the correct dependency which shows the error.\nHope this helps.\nps: I am a noobie, I faced the similar issue and the above was the solution which worked for me. Thanks!</li>\n</ol>\n"}],"owner":{"account_id":7487906,"reputation":426,"user_id":5690546,"display_name":"karthik selvaraj"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4269,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":48006005,"answer_count":2,"score":1,"last_activity_date":1687003223,"creation_date":1514454387,"question_id":48005134,"body_markdown":"I am getting following error message in `pom.xml` file, anyone please help me to solve this problem. I have searched the solution in google yet to get solution.\r\n\r\n**ERROR**\r\n\r\n    Failure to transfer com.thoughtworks.xstream:xstream:pom:1.3.1 from https://repo.maven.apache.org/maven2 was \r\n     cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or \r\n     updates are forced. Original error: Could not transfer artifact com.thoughtworks.xstream:xstream:pom:1.3.1 from/to \r\n     central (https://repo.maven.apache.org/maven2): The operation was cancelled.\r\n\r\n**pom.xml**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.maven&lt;/groupId&gt;\r\n      &lt;artifactId&gt;helloworld&lt;/artifactId&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;helloworld Maven Webapp&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;finalName&gt;helloworld&lt;/finalName&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"Error in pom.xml file in eclipse webapp","body":"<p>I am getting following error message in <code>pom.xml</code> file, anyone please help me to solve this problem. I have searched the solution in google yet to get solution.</p>\n\n<p><strong>ERROR</strong></p>\n\n<pre><code>Failure to transfer com.thoughtworks.xstream:xstream:pom:1.3.1 from https://repo.maven.apache.org/maven2 was \n cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or \n updates are forced. Original error: Could not transfer artifact com.thoughtworks.xstream:xstream:pom:1.3.1 from/to \n central (https://repo.maven.apache.org/maven2): The operation was cancelled.\n</code></pre>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.maven&lt;/groupId&gt;\n  &lt;artifactId&gt;helloworld&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;helloworld Maven Webapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;helloworld&lt;/finalName&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","android","webview"],"answers":[{"tags":[],"owner":{"account_id":5442381,"reputation":16756,"user_id":4409113,"accept_rate":88,"display_name":"ʍѳђઽ૯ท"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1537206359,"creation_date":1537205065,"answer_id":52372916,"question_id":52372826,"body_markdown":"Use `onBackPressed()` method outside of `WebView` and inside the `Activity` class method:\r\n\r\n    @Override\r\n    public void onBackPressed()\r\n            {\r\n                WebView webView = (WebView) findViewById(R.id.webView); // Remove this\r\n                if(webView.canGoBack()){\r\n                    webView.goBack();\r\n                }else{\r\n                    super.onBackPressed();\r\n                }\r\n          }\r\n     \r\n    }\r\n\r\nAlso, try initializing `WebView` inside `onCreate()` method and remove the second duplicate code inside `onBackPressed()`. \r\n\r\n\r\n----------\r\n\r\n\r\nTo be able to access it inside whole `Activity`, initialize it like this:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        String ShowOrHideWebViewInitialUse = &quot;show&quot;;\r\n        private WebView webview;\r\n        private ProgressBar spinner;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            webview = (WebView) findViewById(R.id.webView); \r\n    }","title":"Implement Back Button on WebView Android","body":"<p>Use <code>onBackPressed()</code> method outside of <code>WebView</code> and inside the <code>Activity</code> class method:</p>\n\n<pre><code>@Override\npublic void onBackPressed()\n        {\n            WebView webView = (WebView) findViewById(R.id.webView); // Remove this\n            if(webView.canGoBack()){\n                webView.goBack();\n            }else{\n                super.onBackPressed();\n            }\n      }\n\n}\n</code></pre>\n\n<p>Also, try initializing <code>WebView</code> inside <code>onCreate()</code> method and remove the second duplicate code inside <code>onBackPressed()</code>. </p>\n\n<hr>\n\n<p>To be able to access it inside whole <code>Activity</code>, initialize it like this:</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    String ShowOrHideWebViewInitialUse = \"show\";\n    private WebView webview;\n    private ProgressBar spinner;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        webview = (WebView) findViewById(R.id.webView); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12790330,"reputation":2710,"user_id":9255057,"display_name":"Hardik Hirpara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687003008,"creation_date":1687003008,"answer_id":76496078,"question_id":52372826,"body_markdown":"try this one\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    @Override\r\n        public void onBackPressed() {\r\n            if (webView.canGoBack()) {\r\n                webView.goBack();\r\n            } else {\r\n                super.onBackPressed();\r\n            }\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Implement Back Button on WebView Android","body":"<p>try this one</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>@Override\n    public void onBackPressed() {\n        if (webView.canGoBack()) {\n            webView.goBack();\n        } else {\n            super.onBackPressed();\n        }\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":14103315,"reputation":455,"user_id":10370607,"display_name":"L.885"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4409,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52372916,"answer_count":2,"score":1,"last_activity_date":1687003008,"creation_date":1537204709,"question_id":52372826,"body_markdown":"I tried to implement back button on android webview but it said that \r\n\r\n    error: method does not override or implement a method from a supertype    \r\n    error: cannot find symbol method onBackPressed()\r\n\r\n   \r\nActivity codes:\r\n\r\n\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.webkit.WebView;\r\n    import android.webkit.WebViewClient;\r\n    import android.graphics.Bitmap;\r\n    import android.view.View;\r\n    import android.widget.ProgressBar;\r\n    import android.view.KeyEvent;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        String ShowOrHideWebViewInitialUse = &quot;show&quot;;\r\n        private WebView webview ;\r\n        private ProgressBar spinner;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            webview =(WebView)findViewById(R.id.webView);\r\n            spinner = (ProgressBar)findViewById(R.id.progressBar1);\r\n            webview.setWebViewClient(new CustomWebViewClient());\r\n    \r\n            webview.getSettings().setJavaScriptEnabled(true);\r\n            webview.getSettings().setDomStorageEnabled(true);\r\n            webview.setOverScrollMode(WebView.OVER_SCROLL_NEVER);\r\n            webview.loadUrl(&quot;http://web.com&quot;);\r\n    \r\n        }\r\n    \r\n        // This allows for a splash screen\r\n        // (and hide elements once the page loads)\r\n        private class CustomWebViewClient extends WebViewClient {\r\n    \r\n            @Override\r\n            public void onPageStarted(WebView webview, String url, Bitmap favicon) {\r\n    \r\n                // only make it invisible the FIRST time the app is run\r\n                if (ShowOrHideWebViewInitialUse.equals(&quot;show&quot;)) {\r\n                    webview.setVisibility(webview.INVISIBLE);\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public void onPageFinished(WebView view, String url) {\r\n    \r\n                ShowOrHideWebViewInitialUse = &quot;hide&quot;;\r\n                spinner.setVisibility(View.GONE);\r\n    \r\n                view.setVisibility(webview.VISIBLE);\r\n                super.onPageFinished(view, url);\r\n    \r\n            }\r\n    \r\n            @Override\r\n            public void onBackPressed()\r\n            {\r\n                WebView webView = (WebView) findViewById(R.id.webView);\r\n                if(webView.canGoBack()){\r\n                    webView.goBack();\r\n                }else{\r\n                    super.onBackPressed();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nI tried approach from other source on stackoverflow but still not get a valid answer. Maybe my knowledge still not par with other. I hope that someone in this community can help me to solve this issue. Also a brief explanation about what should I do to make the back button work on webview","title":"Implement Back Button on WebView Android","body":"<p>I tried to implement back button on android webview but it said that </p>\n\n<pre><code>error: method does not override or implement a method from a supertype    \nerror: cannot find symbol method onBackPressed()\n</code></pre>\n\n<p>Activity codes:</p>\n\n<pre><code>import android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\nimport android.graphics.Bitmap;\nimport android.view.View;\nimport android.widget.ProgressBar;\nimport android.view.KeyEvent;\n\npublic class MainActivity extends AppCompatActivity {\n\n    String ShowOrHideWebViewInitialUse = \"show\";\n    private WebView webview ;\n    private ProgressBar spinner;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        webview =(WebView)findViewById(R.id.webView);\n        spinner = (ProgressBar)findViewById(R.id.progressBar1);\n        webview.setWebViewClient(new CustomWebViewClient());\n\n        webview.getSettings().setJavaScriptEnabled(true);\n        webview.getSettings().setDomStorageEnabled(true);\n        webview.setOverScrollMode(WebView.OVER_SCROLL_NEVER);\n        webview.loadUrl(\"http://web.com\");\n\n    }\n\n    // This allows for a splash screen\n    // (and hide elements once the page loads)\n    private class CustomWebViewClient extends WebViewClient {\n\n        @Override\n        public void onPageStarted(WebView webview, String url, Bitmap favicon) {\n\n            // only make it invisible the FIRST time the app is run\n            if (ShowOrHideWebViewInitialUse.equals(\"show\")) {\n                webview.setVisibility(webview.INVISIBLE);\n            }\n        }\n\n        @Override\n        public void onPageFinished(WebView view, String url) {\n\n            ShowOrHideWebViewInitialUse = \"hide\";\n            spinner.setVisibility(View.GONE);\n\n            view.setVisibility(webview.VISIBLE);\n            super.onPageFinished(view, url);\n\n        }\n\n        @Override\n        public void onBackPressed()\n        {\n            WebView webView = (WebView) findViewById(R.id.webView);\n            if(webView.canGoBack()){\n                webView.goBack();\n            }else{\n                super.onBackPressed();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I tried approach from other source on stackoverflow but still not get a valid answer. Maybe my knowledge still not par with other. I hope that someone in this community can help me to solve this issue. Also a brief explanation about what should I do to make the back button work on webview</p>\n"},{"tags":["java","apache-spark"],"answers":[{"tags":[],"owner":{"account_id":25028548,"reputation":425,"user_id":18886549,"display_name":"shalnarkftw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686231248,"creation_date":1686231248,"answer_id":76432417,"question_id":76431897,"body_markdown":"**Spark 3.4.0** runs on **Java 8/11/17**, Scala 2.12/2.13, Python 3.7+, and R 3.5+.\r\n\r\n**Java 8** prior to **version 8u362** support is deprecated as of Spark 3.4.0. \r\n\r\n[Spark 3.4.0 Official documentation][1]\r\n\r\n\r\n  [1]: https://spark.apache.org/docs/3.4.0/#:~:text=Spark%20runs%20on%20Java%208,3.6%2B%20and%20R%203.5%2B.","title":"Which JDK to use with Spark?","body":"<p><strong>Spark 3.4.0</strong> runs on <strong>Java 8/11/17</strong>, Scala 2.12/2.13, Python 3.7+, and R 3.5+.</p>\n<p><strong>Java 8</strong> prior to <strong>version 8u362</strong> support is deprecated as of Spark 3.4.0.</p>\n<p><a href=\"https://spark.apache.org/docs/3.4.0/#:%7E:text=Spark%20runs%20on%20Java%208,3.6%2B%20and%20R%203.5%2B.\" rel=\"nofollow noreferrer\">Spark 3.4.0 Official documentation</a></p>\n"}],"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":868,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76432417,"answer_count":1,"score":0,"last_activity_date":1687002780,"creation_date":1686227547,"question_id":76431897,"body_markdown":"I am new to Spark, and I keep running into various &quot;module java.base does not export XXX&quot;.  I keep adding more --add-open options to the JVM. There are a *lot* of SO posts about these issues.\r\n\r\n[this post][1] has a pretty long list.\r\n\r\nI am now at these options:\r\n\r\n    --add-opens=java.base/java.nio=ALL-UNNAMED\r\n    --add-opens java.base/java.lang=ALL-UNNAMED\r\n    --add-opens=java.base/java.lang.invoke=ALL-UNNAMED \r\n    --add-opens=java.base/java.lang.reflect=ALL-UNNAMED \r\n    --add-opens=java.base/java.io=ALL-UNNAMED \r\n    --add-opens=java.base/java.net=ALL-UNNAMED \r\n    --add-opens=java.base/java.nio=ALL-UNNAMED \r\n    --add-opens java.base/java.util=ALL-UNNAMED\r\n    --add-opens=java.base/java.util.concurrent=ALL-UNNAMED \r\n    --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED \r\n    --add-opens=java.base/sun.nio.ch=ALL-UNNAMED \r\n    --add-opens=java.base/sun.nio.cs=ALL-UNNAMED \r\n    --add-opens=java.base/sun.security.action=ALL-UNNAMED \r\n    --add-opens=java.base/sun.util.calendar=ALL-UNNAMED \r\n    --add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED\r\n\r\nand I don&#39;t seem to have any issues. But this is disturbing. These options are not documented AFAIK. You just have to keep figuring out options until you stop getting errors.\r\n\r\nSo my question is: Which JDK is recommended for Spark? Release notes for 3.4.0 rather sound like Java 8 is on the way to being deprecated.  And I would like to use Java 17 because of new language features, and the expectation that my project dependencies will no longer be available in Java 8 some day.\r\n\r\nPerhaps a better way to think of this is: Where on Spark&#39;s roadmap, if at all, will there no longer be a requirement to add all of these undocumented options? Is there a timeline for JDK 8 support end-of-life?\r\n\r\nPS: This is a real pain for Intellij IDEA IDE because these options have to be pasted into every Run Configuration. Kind of a side question, but can these options be put into a global place in IDEA so that all Run Configurations pick it up?\r\n\r\nPPS: I am not using Hadoop, does that make simpler options available by somehow excluding that support from Spark?\r\n\r\nUPDATE: a colleague told me to put these in a file and use @filepath in the JVM options, makes things somewhat easier.\r\n\r\n  [1]: https://stackoverflow.com/questions/73465937/apache-spark-3-3-0-breaks-on-java-17-with-cannot-access-class-sun-nio-ch-direct/73504175#73504175\r\n","title":"Which JDK to use with Spark?","body":"<p>I am new to Spark, and I keep running into various &quot;module java.base does not export XXX&quot;.  I keep adding more --add-open options to the JVM. There are a <em>lot</em> of SO posts about these issues.</p>\n<p><a href=\"https://stackoverflow.com/questions/73465937/apache-spark-3-3-0-breaks-on-java-17-with-cannot-access-class-sun-nio-ch-direct/73504175#73504175\">this post</a> has a pretty long list.</p>\n<p>I am now at these options:</p>\n<pre><code>--add-opens=java.base/java.nio=ALL-UNNAMED\n--add-opens java.base/java.lang=ALL-UNNAMED\n--add-opens=java.base/java.lang.invoke=ALL-UNNAMED \n--add-opens=java.base/java.lang.reflect=ALL-UNNAMED \n--add-opens=java.base/java.io=ALL-UNNAMED \n--add-opens=java.base/java.net=ALL-UNNAMED \n--add-opens=java.base/java.nio=ALL-UNNAMED \n--add-opens java.base/java.util=ALL-UNNAMED\n--add-opens=java.base/java.util.concurrent=ALL-UNNAMED \n--add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED \n--add-opens=java.base/sun.nio.ch=ALL-UNNAMED \n--add-opens=java.base/sun.nio.cs=ALL-UNNAMED \n--add-opens=java.base/sun.security.action=ALL-UNNAMED \n--add-opens=java.base/sun.util.calendar=ALL-UNNAMED \n--add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED\n</code></pre>\n<p>and I don't seem to have any issues. But this is disturbing. These options are not documented AFAIK. You just have to keep figuring out options until you stop getting errors.</p>\n<p>So my question is: Which JDK is recommended for Spark? Release notes for 3.4.0 rather sound like Java 8 is on the way to being deprecated.  And I would like to use Java 17 because of new language features, and the expectation that my project dependencies will no longer be available in Java 8 some day.</p>\n<p>Perhaps a better way to think of this is: Where on Spark's roadmap, if at all, will there no longer be a requirement to add all of these undocumented options? Is there a timeline for JDK 8 support end-of-life?</p>\n<p>PS: This is a real pain for Intellij IDEA IDE because these options have to be pasted into every Run Configuration. Kind of a side question, but can these options be put into a global place in IDEA so that all Run Configurations pick it up?</p>\n<p>PPS: I am not using Hadoop, does that make simpler options available by somehow excluding that support from Spark?</p>\n<p>UPDATE: a colleague told me to put these in a file and use @filepath in the JVM options, makes things somewhat easier.</p>\n"},{"tags":["java","collections","hashset"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":5,"creation_date":1686922833,"post_id":76490758,"comment_id":134869151,"body_markdown":"Please show the code for `Car`. My *guess* is that you haven&#39;t overridden `equals` appropriately. But if you could provide a [mcve], no-one would have to guess...","body":"Please show the code for <code>Car</code>. My <i>guess</i> is that you haven&#39;t overridden <code>equals</code> appropriately. But if you could provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, no-one would have to guess..."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1686922924,"post_id":76490758,"comment_id":134869175,"body_markdown":"what about `System.out.println(a.equals(b));` ? Having the same hash code is not the same as being equal! (e.g. `&quot;Aa&quot;.hashCode() == &quot;BB&quot;.hashCode() // == 2112`)","body":"what about <code>System.out.println(a.equals(b));</code> ? Having the same hash code is not the same as being equal! (e.g. <code>&quot;Aa&quot;.hashCode() == &quot;BB&quot;.hashCode() &#47;&#47; == 2112</code>)"},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1686922932,"post_id":76490758,"comment_id":134869177,"body_markdown":"[public boolean add(E e)](https://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html#add-E-): *Adds the specified element to this set if it is not already present. **More formally, adds the specified element e to this set if this set contains no element e2 such that (e==null ? e2==null : e.equals(e2))*.**","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html#add-E-\" rel=\"nofollow noreferrer\">public boolean add(E e)</a>: <i>Adds the specified element to this set if it is not already present. <b>More formally, adds the specified element e to this set if this set contains no element e2 such that (e==null ? e2==null : e.equals(e2))</i>.</b>"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686923597,"post_id":76490758,"comment_id":134869360,"body_markdown":"I remember one of the puzzles in the excellent `Java Puzzlers (Josh Bloch &amp; Neil Gafter) illustrates exactly this problem.","body":"I remember one of the puzzles in the excellent `Java Puzzlers (Josh Bloch &amp; Neil Gafter) illustrates exactly this problem."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686931089,"post_id":76490758,"comment_id":134871057,"body_markdown":"I get different hash codes, here.","body":"I get different hash codes, here."}],"answers":[{"tags":[],"owner":{"account_id":24403934,"reputation":31,"user_id":18332327,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686922931,"creation_date":1686922931,"answer_id":76490788,"question_id":76490758,"body_markdown":"If a.equals(b) is true then there hashcode() must also be same.\r\n\r\nOverride both .equals() and .hashCode() in your custom class.\r\n\r\nUse the same fields of your custom class to calculate hashCode which you used to check equality in .equals().\r\n\r\nYes it&#39;ll make sure that there are only unique instances of your customClass in hash-set. So go for it.","title":"Java HashSet unique elements","body":"<p>If a.equals(b) is true then there hashcode() must also be same.</p>\n<p>Override both .equals() and .hashCode() in your custom class.</p>\n<p>Use the same fields of your custom class to calculate hashCode which you used to check equality in .equals().</p>\n<p>Yes it'll make sure that there are only unique instances of your customClass in hash-set. So go for it.</p>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1686929297,"creation_date":1686924251,"answer_id":76490950,"question_id":76490758,"body_markdown":"# Update\r\n\r\nAfter seeing that your method signature was incorrect, I would suggest the following:\r\n\r\nIf you had placed `@Override` on your `public boolean equals(Car c)`, you would have had a compile-time error.\r\n\r\n```java\r\n@Override\r\npublic boolean equals(Car c) { // ERROR\r\n    // ...            ^ expected Object here\r\n}\r\n```\r\n\r\nThis would be caused because the parameter in the method signature was incorrect. The compiler did not know that you mean `public boolean equals(Object c)`. When you override a method, always add the annotation. This way you do not experience any undesired behavior.\r\n\r\n---\r\n\r\n# Original answer\r\n\r\nIf you use an IDE like IntelliJ or VSCode (with the &quot;Java Code Generators&quot; extension), you can have them generate constructors, accessors (getters), mutators (setters), `toString()`, and even override the `equals(Object)` and `hashCode()` methods.\r\n\r\nIf you use Lombok, you can even have it generate overrides via [`@EqualsAndHashCode`](https://projectlombok.org/features/EqualsAndHashCode).\r\n\r\nUser k314159 mentioned pointed out that you can use the `record` keyword to define a standard POJO object. For information on this new construct check out: [Java 14 Record vs. Lombok](https://www.baeldung.com/java-record-vs-lombok). Please keep in mind that this is a feature of JDK 14.\r\n\r\n## Generate methods with IDE\r\n\r\nHere is an example of overriding the `Object` methods `equals`, `hashCode`, and `toString`:\r\n\r\n```java\r\nimport java.util.Objects;\r\n\r\npublic class Car {\r\n    private String make;\r\n    private String model;\r\n    private int year;\r\n\r\n    public Car() {}\r\n\r\n    public Car(String make, String model, int year) {\r\n        this.make = make;\r\n        this.model = model;\r\n        this.year = year;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object other) {\r\n        if (other == this) return true;\r\n        if (!(other instanceof Car)) return false;\r\n        Car car = (Car) other;\r\n        return Objects.equals(make, car.make) &amp;&amp; Objects.equals(model, car.model) &amp;&amp; year == car.year;\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(make, model, year);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;{&quot; +\r\n                &quot; make=&#39;&quot; + getMake() + &quot;&#39;&quot; +\r\n                &quot;, model=&#39;&quot; + getModel() + &quot;&#39;&quot; +\r\n                &quot;, year=&#39;&quot; + getYear() + &quot;&#39;&quot; +\r\n                &quot;}&quot;;\r\n    }\r\n\r\n    public String getMake() {\r\n        return this.make;\r\n    }\r\n\r\n    public void setMake(String make) {\r\n        this.make = make;\r\n    }\r\n\r\n    public String getModel() {\r\n        return this.model;\r\n    }\r\n\r\n    public void setModel(String model) {\r\n        this.model = model;\r\n    }\r\n\r\n    public int getYear() {\r\n        return this.year;\r\n    }\r\n\r\n    public void setYear(int year) {\r\n        this.year = year;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\nimport java.util.HashSet;\r\n\r\npublic class CarDriver {\r\n    public static void main(String[] args) {\r\n        HashSet&lt;Car&gt; hashSet = new HashSet&lt;Car&gt;();\r\n\r\n        Car a = new Car(&quot;Ferrari&quot;, &quot;F40&quot;, 1987);\r\n        Car b = new Car(&quot;Ferrari&quot;, &quot;F40&quot;, 1987);\r\n\r\n        System.out.println(hashSet.add(a)); // true\r\n        System.out.println(hashSet.add(b)); // false\r\n\r\n        System.out.println(hashSet);\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\ntrue\r\nfalse\r\n[{ make=&#39;Ferrari&#39;, model=&#39;F40&#39;, year=&#39;1987&#39;}]\r\n```\r\n\r\n---\r\n\r\n## Lombok\r\n\r\nHere is the latest dependency version for Maven (as of today):\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    &lt;version&gt;1.18.28&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThe same `Car` class above can be compiled using the following annotations:\r\n\r\n```java\r\nimport lombok.*;\r\n\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode\r\n@Getter\r\n@Setter\r\n@ToString\r\npublic class Car {\r\n    private String make;\r\n    private String model;\r\n    private int year;\r\n}\r\n```\r\n\r\nWith the [`@Data`](https://projectlombok.org/features/Data) annotation, we can eliminate `@ToString`, `@EqualsAndHashCode`, `@Getter`, and `@Setter`. Keep in mind that this annotation will also use the `@RequiredArgsConstructor` as well.\r\n\r\n```java\r\nimport lombok.*;\r\n\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\npublic class Car {\r\n    private String make;\r\n    private String model;\r\n    private int year;\r\n}\r\n```\r\n\r\nMinimal POM:\r\n\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven-compiler-plugin.version&gt;3.11.0&lt;/maven-compiler-plugin.version&gt;\r\n    &lt;lombok.version&gt;1.18.28&lt;/lombok.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n      &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n      &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;annotationProcessorPaths&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n              &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n          &lt;/annotationProcessorPaths&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n## Java 14+\r\n\r\nThe following `record` will generate the following methods for you:\r\n\r\n```java\r\npublic record Car(String make, String model, int year) {}\r\n```\r\n\r\n- Constructor\r\n  - Public constructor, with an argument for each field\r\n- Getters\r\n  - These match the names of the fields (does not include the common &quot;get&quot; bean method prefix e.g. `car.make()` instead of `car.getMake()`.\r\n- Common `Object` method overrides:\r\n  - `equals`, `hashCode`, and `toString`\r\n\r\nSee also: [Java 14 Record Keyword](https://www.baeldung.com/java-record-keyword)","title":"Java HashSet unique elements","body":"<h1>Update</h1>\n<p>After seeing that your method signature was incorrect, I would suggest the following:</p>\n<p>If you had placed <code>@Override</code> on your <code>public boolean equals(Car c)</code>, you would have had a compile-time error.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic boolean equals(Car c) { // ERROR\n    // ...            ^ expected Object here\n}\n</code></pre>\n<p>This would be caused because the parameter in the method signature was incorrect. The compiler did not know that you mean <code>public boolean equals(Object c)</code>. When you override a method, always add the annotation. This way you do not experience any undesired behavior.</p>\n<hr />\n<h1>Original answer</h1>\n<p>If you use an IDE like IntelliJ or VSCode (with the &quot;Java Code Generators&quot; extension), you can have them generate constructors, accessors (getters), mutators (setters), <code>toString()</code>, and even override the <code>equals(Object)</code> and <code>hashCode()</code> methods.</p>\n<p>If you use Lombok, you can even have it generate overrides via <a href=\"https://projectlombok.org/features/EqualsAndHashCode\" rel=\"nofollow noreferrer\"><code>@EqualsAndHashCode</code></a>.</p>\n<p>User k314159 mentioned pointed out that you can use the <code>record</code> keyword to define a standard POJO object. For information on this new construct check out: <a href=\"https://www.baeldung.com/java-record-vs-lombok\" rel=\"nofollow noreferrer\">Java 14 Record vs. Lombok</a>. Please keep in mind that this is a feature of JDK 14.</p>\n<h2>Generate methods with IDE</h2>\n<p>Here is an example of overriding the <code>Object</code> methods <code>equals</code>, <code>hashCode</code>, and <code>toString</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Objects;\n\npublic class Car {\n    private String make;\n    private String model;\n    private int year;\n\n    public Car() {}\n\n    public Car(String make, String model, int year) {\n        this.make = make;\n        this.model = model;\n        this.year = year;\n    }\n\n    @Override\n    public boolean equals(Object other) {\n        if (other == this) return true;\n        if (!(other instanceof Car)) return false;\n        Car car = (Car) other;\n        return Objects.equals(make, car.make) &amp;&amp; Objects.equals(model, car.model) &amp;&amp; year == car.year;\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(make, model, year);\n    }\n\n    @Override\n    public String toString() {\n        return &quot;{&quot; +\n                &quot; make='&quot; + getMake() + &quot;'&quot; +\n                &quot;, model='&quot; + getModel() + &quot;'&quot; +\n                &quot;, year='&quot; + getYear() + &quot;'&quot; +\n                &quot;}&quot;;\n    }\n\n    public String getMake() {\n        return this.make;\n    }\n\n    public void setMake(String make) {\n        this.make = make;\n    }\n\n    public String getModel() {\n        return this.model;\n    }\n\n    public void setModel(String model) {\n        this.model = model;\n    }\n\n    public int getYear() {\n        return this.year;\n    }\n\n    public void setYear(int year) {\n        this.year = year;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.HashSet;\n\npublic class CarDriver {\n    public static void main(String[] args) {\n        HashSet&lt;Car&gt; hashSet = new HashSet&lt;Car&gt;();\n\n        Car a = new Car(&quot;Ferrari&quot;, &quot;F40&quot;, 1987);\n        Car b = new Car(&quot;Ferrari&quot;, &quot;F40&quot;, 1987);\n\n        System.out.println(hashSet.add(a)); // true\n        System.out.println(hashSet.add(b)); // false\n\n        System.out.println(hashSet);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>true\nfalse\n[{ make='Ferrari', model='F40', year='1987'}]\n</code></pre>\n<hr />\n<h2>Lombok</h2>\n<p>Here is the latest dependency version for Maven (as of today):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;version&gt;1.18.28&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The same <code>Car</code> class above can be compiled using the following annotations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.*;\n\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode\n@Getter\n@Setter\n@ToString\npublic class Car {\n    private String make;\n    private String model;\n    private int year;\n}\n</code></pre>\n<p>With the <a href=\"https://projectlombok.org/features/Data\" rel=\"nofollow noreferrer\"><code>@Data</code></a> annotation, we can eliminate <code>@ToString</code>, <code>@EqualsAndHashCode</code>, <code>@Getter</code>, and <code>@Setter</code>. Keep in mind that this annotation will also use the <code>@RequiredArgsConstructor</code> as well.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.*;\n\n@NoArgsConstructor\n@AllArgsConstructor\n@Data\npublic class Car {\n    private String make;\n    private String model;\n    private int year;\n}\n</code></pre>\n<p>Minimal POM:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;properties&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven-compiler-plugin.version&gt;3.11.0&lt;/maven-compiler-plugin.version&gt;\n    &lt;lombok.version&gt;1.18.28&lt;/lombok.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n      &lt;version&gt;${lombok.version}&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;annotationProcessorPaths&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n              &lt;version&gt;${lombok.version}&lt;/version&gt;\n            &lt;/path&gt;\n          &lt;/annotationProcessorPaths&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<h2>Java 14+</h2>\n<p>The following <code>record</code> will generate the following methods for you:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record Car(String make, String model, int year) {}\n</code></pre>\n<ul>\n<li>Constructor\n<ul>\n<li>Public constructor, with an argument for each field</li>\n</ul>\n</li>\n<li>Getters\n<ul>\n<li>These match the names of the fields (does not include the common &quot;get&quot; bean method prefix e.g. <code>car.make()</code> instead of <code>car.getMake()</code>.</li>\n</ul>\n</li>\n<li>Common <code>Object</code> method overrides:\n<ul>\n<li><code>equals</code>, <code>hashCode</code>, and <code>toString</code></li>\n</ul>\n</li>\n</ul>\n<p>See also: <a href=\"https://www.baeldung.com/java-record-keyword\" rel=\"nofollow noreferrer\">Java 14 Record Keyword</a></p>\n"},{"tags":[],"owner":{"account_id":18999437,"reputation":2463,"user_id":13867124,"display_name":"AztecCodes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686932195,"creation_date":1686925165,"answer_id":76491083,"question_id":76490758,"body_markdown":"&lt;h3&gt;Java HashSet unique elements&lt;/h3&gt;\r\n\r\nIn this example the `HashSet` treats the Car objects `a` and `b` as separate elements because they have different addresses in the memory. Even though their attribute values are the same, the `hashCode()` method in Java generates unique identifiers based on memory addresses. Because of that the `HashSet` considers `a` and `b` as distinct objects and allows both of them to be summed up.\r\n\r\nTo make sure that the `HashSet` treats two Car objects as equal even when they have the same attribute values, you need to override the `hashCode()` and `equals()` methods in the Car class. Those methods make it possible to provide a custom way of determining equality based on the attribute values of the objects.\r\n\r\nHere you have an example from me on how you could solve this issue:\r\n\r\n**My Code Example:**\r\n\r\n    import java.util.HashSet;\r\n    import java.util.Objects;\r\n    \r\n    public class Car {\r\n    \r\n      // Variables\r\n      private String make;\r\n      private String model;\r\n      private short year;\r\n    \r\n      // Constructor\r\n      public Car(String make, String model, short year) {\r\n        this.make = make;\r\n        this.model = model;\r\n        this.year = year;\r\n      }\r\n    \r\n      // Methods - Getters n&#39; Setters and other methods\r\n    \r\n      @Override\r\n      public int hashCode() {\r\n        // Generating hash code based on attribute values using Objects.hash() method\r\n        return Objects.hash(make, model, year);\r\n      }\r\n    \r\n      @Override\r\n      public boolean equals(Object obj) {\r\n    \r\n        // Comparing attributes for equality\r\n        if (this == obj)\r\n          return true;\r\n        if (obj == null || getClass() != obj.getClass())\r\n          return false;\r\n        Car other = (Car) obj;\r\n        return Objects.equals(make, other.make) &amp;&amp;\r\n          Objects.equals(model, other.model) &amp;&amp;\r\n          year == other.year;\r\n      }\r\n    }\r\n    \r\n    /*\r\n     *  HashSetExample class including the main method\r\n     * \r\n     */\r\n    public class HashSetExample {\r\n      public static void main(String[] args) {\r\n    \r\n        // Creating a HashSet variable to store Car objects\r\n        HashSet &lt; Car &gt; hash = new HashSet &lt; Car &gt; ();\r\n    \r\n        // Creating two Car objects with the same values\r\n        Car a = new Car(&quot;Ferrari&quot;, &quot;F40&quot;, 1987);\r\n        Car b = new Car(&quot;Ferrari&quot;, &quot;F40&quot;, 1987);\r\n    \r\n        // Printing the HashCodes\r\n        System.out.println(&quot;Hashcode of a: &quot; + a.hashCode());\r\n        System.out.println(&quot;Hashcode of b: &quot; + b.hashCode());\r\n    \r\n        // Adding the Car objects to the HashSet\r\n        System.out.println(hash.add(a));\r\n        System.out.println(hash.add(b));\r\n    \r\n        // Printing the size of the HashSet\r\n        System.out.println(hash.size());\r\n      }\r\n    }\r\n\r\nIf you have any questions write a comment. Mind that I put two classes into the same &quot;file&quot; in this answer.","title":"Java HashSet unique elements","body":"<h3>Java HashSet unique elements</h3>\n<p>In this example the <code>HashSet</code> treats the Car objects <code>a</code> and <code>b</code> as separate elements because they have different addresses in the memory. Even though their attribute values are the same, the <code>hashCode()</code> method in Java generates unique identifiers based on memory addresses. Because of that the <code>HashSet</code> considers <code>a</code> and <code>b</code> as distinct objects and allows both of them to be summed up.</p>\n<p>To make sure that the <code>HashSet</code> treats two Car objects as equal even when they have the same attribute values, you need to override the <code>hashCode()</code> and <code>equals()</code> methods in the Car class. Those methods make it possible to provide a custom way of determining equality based on the attribute values of the objects.</p>\n<p>Here you have an example from me on how you could solve this issue:</p>\n<p><strong>My Code Example:</strong></p>\n<pre><code>import java.util.HashSet;\nimport java.util.Objects;\n\npublic class Car {\n\n  // Variables\n  private String make;\n  private String model;\n  private short year;\n\n  // Constructor\n  public Car(String make, String model, short year) {\n    this.make = make;\n    this.model = model;\n    this.year = year;\n  }\n\n  // Methods - Getters n' Setters and other methods\n\n  @Override\n  public int hashCode() {\n    // Generating hash code based on attribute values using Objects.hash() method\n    return Objects.hash(make, model, year);\n  }\n\n  @Override\n  public boolean equals(Object obj) {\n\n    // Comparing attributes for equality\n    if (this == obj)\n      return true;\n    if (obj == null || getClass() != obj.getClass())\n      return false;\n    Car other = (Car) obj;\n    return Objects.equals(make, other.make) &amp;&amp;\n      Objects.equals(model, other.model) &amp;&amp;\n      year == other.year;\n  }\n}\n\n/*\n *  HashSetExample class including the main method\n * \n */\npublic class HashSetExample {\n  public static void main(String[] args) {\n\n    // Creating a HashSet variable to store Car objects\n    HashSet &lt; Car &gt; hash = new HashSet &lt; Car &gt; ();\n\n    // Creating two Car objects with the same values\n    Car a = new Car(&quot;Ferrari&quot;, &quot;F40&quot;, 1987);\n    Car b = new Car(&quot;Ferrari&quot;, &quot;F40&quot;, 1987);\n\n    // Printing the HashCodes\n    System.out.println(&quot;Hashcode of a: &quot; + a.hashCode());\n    System.out.println(&quot;Hashcode of b: &quot; + b.hashCode());\n\n    // Adding the Car objects to the HashSet\n    System.out.println(hash.add(a));\n    System.out.println(hash.add(b));\n\n    // Printing the size of the HashSet\n    System.out.println(hash.size());\n  }\n}\n</code></pre>\n<p>If you have any questions write a comment. Mind that I put two classes into the same &quot;file&quot; in this answer.</p>\n"}],"owner":{"account_id":1870688,"reputation":41,"user_id":7209325,"display_name":"Sergio Obici"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1687002345,"creation_date":1686922676,"question_id":76490758,"body_markdown":"About HashSet .... The method add() returns true if this set did not already contain the specified element.\r\nBut if I write:\r\n```\r\nHashSet&lt;Car&gt; hash = new HashSet&lt;Car&gt;();\r\nCar a = new Car(&quot;Ferrari&quot;,&quot;F40&quot;,1987);\r\nCar b = new Car(&quot;Ferrari&quot;,&quot;F40&quot;,1987);\r\nSystem.out.println(&quot;Hashcode di a:&quot;+a.hashCode());\r\nSystem.out.println(&quot;Hashcode di b:&quot;+b.hashCode());\r\nSystem.out.println(hash.add(a));\r\nSystem.out.println(hash.add(b));\r\n```\r\nI obtain this:\r\n```\r\nHashcode di a: 1824327938 \r\nHashcode di b: 1824327938\r\ntrue\r\ntrue\r\n```\r\n\r\n... and I have a set of two elements. I&#39;d expect just one. \r\nWhat&#39;s there I don&#39;t understand?\r\nHow I can avoid the second add?\r\n\r\nThank in advance.\r\n\r\nSergio\r\n\r\nPS\r\nI add my equals method:\r\n\r\n    public boolean equals(Car c) {\r\n    \t  if (brand.equals(c.getBrand()) &amp;&amp; model.equals(c.getModel()) &amp;&amp; version == c.getVersion())\r\n    \t    return true;\r\n    \t  else\r\n    \t    return false;\r\n    \t}\r\n    }\r\n\r\nand that&#39;s it. It seems that I wrote equals method in a wrong way not considering that equals argoument must be Object and not directly a Car.\r\n","title":"Java HashSet unique elements","body":"<p>About HashSet .... The method add() returns true if this set did not already contain the specified element.\nBut if I write:</p>\n<pre><code>HashSet&lt;Car&gt; hash = new HashSet&lt;Car&gt;();\nCar a = new Car(&quot;Ferrari&quot;,&quot;F40&quot;,1987);\nCar b = new Car(&quot;Ferrari&quot;,&quot;F40&quot;,1987);\nSystem.out.println(&quot;Hashcode di a:&quot;+a.hashCode());\nSystem.out.println(&quot;Hashcode di b:&quot;+b.hashCode());\nSystem.out.println(hash.add(a));\nSystem.out.println(hash.add(b));\n</code></pre>\n<p>I obtain this:</p>\n<pre><code>Hashcode di a: 1824327938 \nHashcode di b: 1824327938\ntrue\ntrue\n</code></pre>\n<p>... and I have a set of two elements. I'd expect just one.\nWhat's there I don't understand?\nHow I can avoid the second add?</p>\n<p>Thank in advance.</p>\n<p>Sergio</p>\n<p>PS\nI add my equals method:</p>\n<pre><code>public boolean equals(Car c) {\n      if (brand.equals(c.getBrand()) &amp;&amp; model.equals(c.getModel()) &amp;&amp; version == c.getVersion())\n        return true;\n      else\n        return false;\n    }\n}\n</code></pre>\n<p>and that's it. It seems that I wrote equals method in a wrong way not considering that equals argoument must be Object and not directly a Car.</p>\n"},{"tags":["java","swing","java-9","jeditorpane","preferredsize"],"answers":[{"tags":[],"owner":{"account_id":5707766,"reputation":801,"user_id":4510718,"display_name":"MatheM"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1521020107,"creation_date":1521018699,"answer_id":49273598,"question_id":49273118,"body_markdown":"I have faced similar problem, but with JLabel. My solution was to set the size of the JLabel which seems to force the component to recalculate its preferred size.\r\n\r\nTry this:\r\n\r\n    JEditorPane pane = new JEditorPane(&quot;text/html&quot;, &quot;&quot;);\r\n\r\n\tpane.setText(&quot;&lt;html&gt;One line&lt;/html&gt;&quot;);\r\n\tSystem.out.println(pane.getPreferredSize());\r\n\tpane.setText(&quot;&lt;html&gt;Line one&lt;br /&gt;Line 2&lt;br /&gt;Third line&lt;br /&gt;Line four&lt;/html&gt;&quot;);\r\n\t\r\n    // get width from initial preferred size, height should be much larger than necessary\r\n    pane.setSize(61, 1000);\r\n\t\r\n    System.out.println(pane.getPreferredSize());\r\n\r\nIn this casse the output is\r\n\r\n    java.awt.Dimension[width=53,height=25]\r\n    java.awt.Dimension[width=61,height=82]\r\n\r\nNote: my fonts are different, that is why I get different dimensions.\r\n\r\nEdit: I changed your getTableCellRendererComponent in the longer example like this and it is working for me. I am using jdk9.0.4, 64 bit.\r\n\r\n    @Override\r\n\tpublic Component getTableCellRendererComponent(JTable table, Object value, boolean selected, boolean hasFocus, int row, int col) {\r\n\t\tsetText(value.toString());\r\n\t\t\r\n\t\tDimension preferredSize = getPreferredSize();\r\n\t\tsetSize(new Dimension(preferredSize.width, 1000));\r\n\t\tpreferredSize = getPreferredSize();\r\n\t\t\r\n\t\tSystem.out.format(&quot;Row %d preferred size %s%n&quot;, row, preferredSize);\r\n\t\tif (preferredSize.height &gt; 0 &amp;&amp; table.getRowHeight(row) != preferredSize.height) {\r\n\t\t\ttable.setRowHeight(row, preferredSize.height);\r\n\t\t}\r\n        return this;\r\n    }\r\n","title":"JEditorPane.getPreferredSize not always working in Java 9?","body":"<p>I have faced similar problem, but with JLabel. My solution was to set the size of the JLabel which seems to force the component to recalculate its preferred size.</p>\n\n<p>Try this:</p>\n\n<pre><code>JEditorPane pane = new JEditorPane(\"text/html\", \"\");\n\npane.setText(\"&lt;html&gt;One line&lt;/html&gt;\");\nSystem.out.println(pane.getPreferredSize());\npane.setText(\"&lt;html&gt;Line one&lt;br /&gt;Line 2&lt;br /&gt;Third line&lt;br /&gt;Line four&lt;/html&gt;\");\n\n// get width from initial preferred size, height should be much larger than necessary\npane.setSize(61, 1000);\n\nSystem.out.println(pane.getPreferredSize());\n</code></pre>\n\n<p>In this casse the output is</p>\n\n<pre><code>java.awt.Dimension[width=53,height=25]\njava.awt.Dimension[width=61,height=82]\n</code></pre>\n\n<p>Note: my fonts are different, that is why I get different dimensions.</p>\n\n<p>Edit: I changed your getTableCellRendererComponent in the longer example like this and it is working for me. I am using jdk9.0.4, 64 bit.</p>\n\n<pre><code>@Override\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean selected, boolean hasFocus, int row, int col) {\n    setText(value.toString());\n\n    Dimension preferredSize = getPreferredSize();\n    setSize(new Dimension(preferredSize.width, 1000));\n    preferredSize = getPreferredSize();\n\n    System.out.format(\"Row %d preferred size %s%n\", row, preferredSize);\n    if (preferredSize.height &gt; 0 &amp;&amp; table.getRowHeight(row) != preferredSize.height) {\n        table.setRowHeight(row, preferredSize.height);\n    }\n    return this;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10744379,"reputation":399,"user_id":7906257,"display_name":"rupashka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642450894,"creation_date":1642450894,"answer_id":70747078,"question_id":49273118,"body_markdown":"Based on previous suggestion and digging in JDK sources I&#39;m suggesting a little bit simpler solution:\r\n\r\n    setSize(new Dimention(0, 0))\r\n\r\nBased on BasicTextUI.getPreferredSize implementation it forces to recalculate root view size\r\n\r\n                } else if (d.width == 0 &amp;&amp; d.height == 0) {\r\n                // Probably haven&#39;t been layed out yet, force some sort of\r\n                // initial sizing.\r\n                rootView.setSize(Integer.MAX_VALUE, Integer.MAX_VALUE);\r\n            }\r\n","title":"JEditorPane.getPreferredSize not always working in Java 9?","body":"<p>Based on previous suggestion and digging in JDK sources I'm suggesting a little bit simpler solution:</p>\n<pre><code>setSize(new Dimention(0, 0))\n</code></pre>\n<p>Based on BasicTextUI.getPreferredSize implementation it forces to recalculate root view size</p>\n<pre><code>            } else if (d.width == 0 &amp;&amp; d.height == 0) {\n            // Probably haven't been layed out yet, force some sort of\n            // initial sizing.\n            rootView.setSize(Integer.MAX_VALUE, Integer.MAX_VALUE);\n        }\n</code></pre>\n"}],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":606,"favorite_count":0,"down_vote_count":2,"up_vote_count":12,"accepted_answer_id":49273598,"answer_count":2,"score":10,"last_activity_date":1687002130,"creation_date":1521017074,"question_id":49273118,"body_markdown":"This question is about different behaviour of `JEditorPane` in Java 8 and Java 9. I’d like to know if others have experienced the same, whether it could be a bug in Java 9, and if possible have your input to how to handle it in Java 9.\r\n\r\nContext: In our (age-old) code base we are using a subclass of `JTable`, and for rendering multi-line HTML in one of the columns we are using a subclass of `JEditorPane`. We are using `JEditorPane.getPreferredSize()` for determining the height of the content and using it for setting the height of the table row. It’s been working well for many years. It doesn’t work in Java 9; the rows are displayed just 10 pixels high. Seen both on Windows and Mac.\r\n\r\nI should like to show you two code examples. If the first and shorter one suffices for you, feel free to skip the second and longer one.\r\n\r\nMCVE:\r\n\r\n\tJEditorPane pane = new JEditorPane(&quot;text/html&quot;, &quot;&quot;);\r\n\t\r\n\tpane.setText(&quot;&lt;html&gt;One line&lt;/html&gt;&quot;);\r\n\tSystem.out.println(pane.getPreferredSize());\r\n\tpane.setText(&quot;&lt;html&gt;Line one&lt;br /&gt;Line 2&lt;br /&gt;Third line&lt;br /&gt;Line four&lt;/html&gt;&quot;);\r\n\tSystem.out.println(pane.getPreferredSize());\r\n\r\nOutput in Java 8 (1.8.0_131):\r\n\r\n    java.awt.Dimension[width=48,height=15]\r\n    java.awt.Dimension[width=57,height=60]\r\n\r\nAnd on Java 9 (jdk-9.0.4):\r\n\r\n    java.awt.Dimension[width=49,height=15]\r\n    java.awt.Dimension[width=58,height=0]\r\n\r\nIn Java 9 the first time I set the text, the preferred height reflects it. Every subsequent time it doesn’t.\r\n\r\nI have searched to see if I could find any information on a bug that might account for this, did not find anything relevant.\r\n\r\n**Question: Is this intended (change of) behaviour? Is it a bug??**\r\n\r\n## Longer example\r\n\r\n    public class TestJEditorPaneAsRenderer extends JFrame {\r\n    \r\n    \tpublic TestJEditorPaneAsRenderer() {\r\n    \t\tsuper(&quot;Test JEditorPane&quot;);\r\n    \t\t\r\n    \t\tMyRenderer renderer = new MyRenderer();\r\n    \t\t\r\n    \t\tString html2 = &quot;&lt;html&gt;one/2&lt;br /&gt;two/2&lt;/html&gt;&quot;;\r\n    \t\tString html4 = &quot;&lt;html&gt;one of four&lt;br /&gt;two of four&lt;br /&gt;&quot;\r\n    \t\t\t\t+ &quot;three of four&lt;br /&gt;four of four&lt;/html&gt;&quot;;\r\n    \t\tJTable table = new JTable(new String[][] { { html2 }, { html4 } },\r\n    \t\t                          new String[] { &quot;Dummy col title&quot; }) {\r\n    \t\t\t@Override\r\n    \t\t\tpublic TableCellRenderer getDefaultRenderer(Class&lt;?&gt; colType) {\r\n    \t\t\t\treturn renderer;\r\n    \t\t\t}\r\n    \t\t};\r\n    \t\t\r\n    \t\tadd(table);\r\n    \t\tsetSize(100, 150);\r\n    \t\tsetDefaultCloseOperation(EXIT_ON_CLOSE);\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(System.getProperty(&quot;java.version&quot;));\r\n    \t\tnew TestJEditorPaneAsRenderer().setVisible(true);\r\n    \t}\r\n    \r\n    }\r\n    \r\n    class MyRenderer extends JEditorPane implements TableCellRenderer {\r\n    \r\n    \tpublic MyRenderer() {\r\n    \t\tsuper(&quot;text/html&quot;, &quot;&quot;);\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic Component getTableCellRendererComponent(\r\n    \t\t\tJTable table, Object value, boolean selected, boolean hasFocus, int row, int col) {\r\n    \t\tsetText(value.toString());\r\n    \t\tDimension preferredSize = getPreferredSize();\r\n    \t\tSystem.out.format(&quot;Row %d preferred size %s%n&quot;,row, preferredSize);\r\n    \t\tif (preferredSize.height &gt; 0 &amp;&amp; table.getRowHeight(row) != preferredSize.height) {\r\n    \t\t\ttable.setRowHeight(row, preferredSize.height);\r\n    \t\t}\r\n    \t\treturn this;\r\n    \t}\r\n    \t\r\n    }\r\n\r\nResult on Java 8 is as expected:\r\n\r\n[![Java 8 screen shot][1]][1]\r\n\r\nOutput from Java 8:\r\n\r\n    1.8.0_131\r\n    Row 0 preferred size java.awt.Dimension[width=32,height=30]\r\n    Row 1 preferred size java.awt.Dimension[width=72,height=60]\r\n    Row 0 preferred size java.awt.Dimension[width=32,height=30]\r\n    Row 1 preferred size java.awt.Dimension[width=72,height=60]\r\n\r\nOn Java 9 the second row is not shown high enough so most of the lines are hidden:\r\n\r\n[![Java 9 screen shot showing problem][2]][2]\r\n\r\nOutput from Java 9:\r\n\r\n    9.0.4\r\n    Row 0 preferred size java.awt.Dimension[width=33,height=30]\r\n    Row 1 preferred size java.awt.Dimension[width=73,height=0]\r\n    Row 0 preferred size java.awt.Dimension[width=33,height=0]\r\n    Row 1 preferred size java.awt.Dimension[width=73,height=0]\r\n\r\nA possible fix is if I create a new renderer component each time by changing the body of `getDefaultRenderer()` to:\r\n\r\n\treturn new MyRenderer();\r\n\r\nNow the table looks good as on Java 8. If necessary I suppose we could live with a similar fix in our production code, but it seems quite a waste. Especially if it’s only necessary until the behaviour change is reverted in a coming Java version. **I’d be grateful for your suggestions here.**\r\n\r\n  [1]: https://i.stack.imgur.com/MhPRc.png\r\n  [2]: https://i.stack.imgur.com/vIduJ.png","title":"JEditorPane.getPreferredSize not always working in Java 9?","body":"<p>This question is about different behaviour of <code>JEditorPane</code> in Java 8 and Java 9. I’d like to know if others have experienced the same, whether it could be a bug in Java 9, and if possible have your input to how to handle it in Java 9.</p>\n<p>Context: In our (age-old) code base we are using a subclass of <code>JTable</code>, and for rendering multi-line HTML in one of the columns we are using a subclass of <code>JEditorPane</code>. We are using <code>JEditorPane.getPreferredSize()</code> for determining the height of the content and using it for setting the height of the table row. It’s been working well for many years. It doesn’t work in Java 9; the rows are displayed just 10 pixels high. Seen both on Windows and Mac.</p>\n<p>I should like to show you two code examples. If the first and shorter one suffices for you, feel free to skip the second and longer one.</p>\n<p>MCVE:</p>\n<pre><code>JEditorPane pane = new JEditorPane(&quot;text/html&quot;, &quot;&quot;);\n\npane.setText(&quot;&lt;html&gt;One line&lt;/html&gt;&quot;);\nSystem.out.println(pane.getPreferredSize());\npane.setText(&quot;&lt;html&gt;Line one&lt;br /&gt;Line 2&lt;br /&gt;Third line&lt;br /&gt;Line four&lt;/html&gt;&quot;);\nSystem.out.println(pane.getPreferredSize());\n</code></pre>\n<p>Output in Java 8 (1.8.0_131):</p>\n<pre><code>java.awt.Dimension[width=48,height=15]\njava.awt.Dimension[width=57,height=60]\n</code></pre>\n<p>And on Java 9 (jdk-9.0.4):</p>\n<pre><code>java.awt.Dimension[width=49,height=15]\njava.awt.Dimension[width=58,height=0]\n</code></pre>\n<p>In Java 9 the first time I set the text, the preferred height reflects it. Every subsequent time it doesn’t.</p>\n<p>I have searched to see if I could find any information on a bug that might account for this, did not find anything relevant.</p>\n<p><strong>Question: Is this intended (change of) behaviour? Is it a bug??</strong></p>\n<h2>Longer example</h2>\n<pre><code>public class TestJEditorPaneAsRenderer extends JFrame {\n\n    public TestJEditorPaneAsRenderer() {\n        super(&quot;Test JEditorPane&quot;);\n        \n        MyRenderer renderer = new MyRenderer();\n        \n        String html2 = &quot;&lt;html&gt;one/2&lt;br /&gt;two/2&lt;/html&gt;&quot;;\n        String html4 = &quot;&lt;html&gt;one of four&lt;br /&gt;two of four&lt;br /&gt;&quot;\n                + &quot;three of four&lt;br /&gt;four of four&lt;/html&gt;&quot;;\n        JTable table = new JTable(new String[][] { { html2 }, { html4 } },\n                                  new String[] { &quot;Dummy col title&quot; }) {\n            @Override\n            public TableCellRenderer getDefaultRenderer(Class&lt;?&gt; colType) {\n                return renderer;\n            }\n        };\n        \n        add(table);\n        setSize(100, 150);\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n    }\n    \n    public static void main(String[] args) {\n        System.out.println(System.getProperty(&quot;java.version&quot;));\n        new TestJEditorPaneAsRenderer().setVisible(true);\n    }\n\n}\n\nclass MyRenderer extends JEditorPane implements TableCellRenderer {\n\n    public MyRenderer() {\n        super(&quot;text/html&quot;, &quot;&quot;);\n    }\n    \n    @Override\n    public Component getTableCellRendererComponent(\n            JTable table, Object value, boolean selected, boolean hasFocus, int row, int col) {\n        setText(value.toString());\n        Dimension preferredSize = getPreferredSize();\n        System.out.format(&quot;Row %d preferred size %s%n&quot;,row, preferredSize);\n        if (preferredSize.height &gt; 0 &amp;&amp; table.getRowHeight(row) != preferredSize.height) {\n            table.setRowHeight(row, preferredSize.height);\n        }\n        return this;\n    }\n    \n}\n</code></pre>\n<p>Result on Java 8 is as expected:</p>\n<p><a href=\"https://i.stack.imgur.com/MhPRc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MhPRc.png\" alt=\"Java 8 screen shot\" /></a></p>\n<p>Output from Java 8:</p>\n<pre><code>1.8.0_131\nRow 0 preferred size java.awt.Dimension[width=32,height=30]\nRow 1 preferred size java.awt.Dimension[width=72,height=60]\nRow 0 preferred size java.awt.Dimension[width=32,height=30]\nRow 1 preferred size java.awt.Dimension[width=72,height=60]\n</code></pre>\n<p>On Java 9 the second row is not shown high enough so most of the lines are hidden:</p>\n<p><a href=\"https://i.stack.imgur.com/vIduJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vIduJ.png\" alt=\"Java 9 screen shot showing problem\" /></a></p>\n<p>Output from Java 9:</p>\n<pre><code>9.0.4\nRow 0 preferred size java.awt.Dimension[width=33,height=30]\nRow 1 preferred size java.awt.Dimension[width=73,height=0]\nRow 0 preferred size java.awt.Dimension[width=33,height=0]\nRow 1 preferred size java.awt.Dimension[width=73,height=0]\n</code></pre>\n<p>A possible fix is if I create a new renderer component each time by changing the body of <code>getDefaultRenderer()</code> to:</p>\n<pre><code>return new MyRenderer();\n</code></pre>\n<p>Now the table looks good as on Java 8. If necessary I suppose we could live with a similar fix in our production code, but it seems quite a waste. Especially if it’s only necessary until the behaviour change is reverted in a coming Java version. <strong>I’d be grateful for your suggestions here.</strong></p>\n"},{"tags":["java","gradle","unicode","properties-file"],"answers":[{"tags":[],"owner":{"account_id":5048364,"reputation":27671,"user_id":4053652,"display_name":"Stanislav"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1465546578,"creation_date":1465546578,"answer_id":37743251,"question_id":37729847,"body_markdown":"You can do it providing the additional copy specification for properties files, this way:\r\n\r\n    import org.apache.tools.ant.filters.EscapeUnicode\r\n    tasks.withType(ProcessResources).each { task -&gt;\r\n        task.from(task.getSource()) {\r\n            include &#39;**/*.properties&#39;\r\n            filter(EscapeUnicode)\r\n        }\r\n    }","title":"How to automatically escape unicode characters in Java property files using Gradle?","body":"<p>You can do it providing the additional copy specification for properties files, this way:</p>\n\n<pre><code>import org.apache.tools.ant.filters.EscapeUnicode\ntasks.withType(ProcessResources).each { task -&gt;\n    task.from(task.getSource()) {\n        include '**/*.properties'\n        filter(EscapeUnicode)\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":407559,"reputation":726,"user_id":777714,"display_name":"Mathieu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687001774,"creation_date":1687001460,"answer_id":76495986,"question_id":37729847,"body_markdown":"[The solution given by stanislav][1] caused me duplicate file conflicts (I think this creates a new &quot;pipeline&quot; from the same source files, only including &#39;properties&#39; files, filtering, and writing to the same dir as the original task, but the original &quot;pipelines&quot; of the task stay unchanged).\r\n\r\nFor anyone looking to do this without duplication, here is my solution. It is also using `Native2AsciiFilter` instead of `EscapeUnicode` which should give a more similar result to `native2ascii` maven tool. This filter works on lines and not on files (it does not extend `java.io.FilterReader`), so we can&#39;t use it directly as a parameter of `filter`.\r\n\r\n```groovy\r\nimport org.apache.tools.ant.filters.Native2AsciiFilter\r\ntasks.withType(ProcessResources).each { task -&gt;\r\n    def nativeToAscii = new Native2AsciiFilter()\r\n    task.filesMatching(&#39;**/*.properties&#39;) {\r\n        filter { line -&gt; nativeToAscii.filter(line) }\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/37743251/777714","title":"How to automatically escape unicode characters in Java property files using Gradle?","body":"<p><a href=\"https://stackoverflow.com/a/37743251/777714\">The solution given by stanislav</a> caused me duplicate file conflicts (I think this creates a new &quot;pipeline&quot; from the same source files, only including 'properties' files, filtering, and writing to the same dir as the original task, but the original &quot;pipelines&quot; of the task stay unchanged).</p>\n<p>For anyone looking to do this without duplication, here is my solution. It is also using <code>Native2AsciiFilter</code> instead of <code>EscapeUnicode</code> which should give a more similar result to <code>native2ascii</code> maven tool. This filter works on lines and not on files (it does not extend <code>java.io.FilterReader</code>), so we can't use it directly as a parameter of <code>filter</code>.</p>\n<pre><code>import org.apache.tools.ant.filters.Native2AsciiFilter\ntasks.withType(ProcessResources).each { task -&gt;\n    def nativeToAscii = new Native2AsciiFilter()\n    task.filesMatching('**/*.properties') {\n        filter { line -&gt; nativeToAscii.filter(line) }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1859709,"reputation":581,"user_id":1684528,"accept_rate":45,"display_name":"Christian R&#228;del"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1266,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1687001774,"creation_date":1465485018,"question_id":37729847,"body_markdown":"I&#39;m translating a **Java** application by using a ```ResourceBundle``` with various ```*.properties``` files. Now I like to have a **Gradle** task or want to modify a task to automatically escape any *unicode* character by replacing it with its *ASCII* representation, something like Java&#39;s ```native2ascii``` tool does.\r\n\r\nThis is what I&#39;m done so far with my build file, but the **output remains unescaped**:\r\n\r\n    import org.apache.tools.ant.filters.EscapeUnicode\r\n\r\n    tasks.withType(ProcessResources) {\r\n        filesMatching(&#39;**/*.properties&#39;) {\r\n            println &quot;\\t-&gt; ${it}&quot;\r\n            filter EscapeUnicode\r\n        }\r\n    }\r\n\r\n*Any help is appreciated.*","title":"How to automatically escape unicode characters in Java property files using Gradle?","body":"<p>I'm translating a <strong>Java</strong> application by using a <code>ResourceBundle</code> with various <code>*.properties</code> files. Now I like to have a <strong>Gradle</strong> task or want to modify a task to automatically escape any <em>unicode</em> character by replacing it with its <em>ASCII</em> representation, something like Java's <code>native2ascii</code> tool does.</p>\n\n<p>This is what I'm done so far with my build file, but the <strong>output remains unescaped</strong>:</p>\n\n<pre><code>import org.apache.tools.ant.filters.EscapeUnicode\n\ntasks.withType(ProcessResources) {\n    filesMatching('**/*.properties') {\n        println \"\\t-&gt; ${it}\"\n        filter EscapeUnicode\n    }\n}\n</code></pre>\n\n<p><em>Any help is appreciated.</em></p>\n"},{"tags":["java","generics","compiler-errors"],"comments":[{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":0,"creation_date":1453813246,"post_id":35013179,"comment_id":57755427,"body_markdown":"&quot;looks a bit complicated&quot; - indeed. I wonder whether this nesting is really necessary (or reasonably beneficial) for the application case. Omitting the last `extends` already solves the problem, but as long as it is not clear where this genericity is actually *required*, one can not say whether this applicable in your case.","body":"&quot;looks a bit complicated&quot; - indeed. I wonder whether this nesting is really necessary (or reasonably beneficial) for the application case. Omitting the last <code>extends</code> already solves the problem, but as long as it is not clear where this genericity is actually <i>required</i>, one can not say whether this applicable in your case."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1454331422,"post_id":35013179,"comment_id":57981829,"body_markdown":"You’re right, as the code in the question stands, parameterization of `AbstractA` is superfluous, and therefore `AbstractB&lt;T extends AbstractA&gt;` is enough.","body":"You’re right, as the code in the question stands, parameterization of <code>AbstractA</code> is superfluous, and therefore <code>AbstractB&lt;T extends AbstractA&gt;</code> is enough."},{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1633612638,"post_id":35013179,"comment_id":122810295,"body_markdown":"I don&#39;t see any reason why this question has been DVed heavily. IMHO, this question is clear, focused and has all the necessary elements to classify it as a good question. It will be useful for future visitors if one of the DVers can explain the reason.","body":"I don&#39;t see any reason why this question has been DVed heavily. IMHO, this question is clear, focused and has all the necessary elements to classify it as a good question. It will be useful for future visitors if one of the DVers can explain the reason."}],"answers":[{"tags":[],"owner":{"account_id":7612673,"reputation":610,"user_id":5773084,"accept_rate":83,"display_name":"Chris Wohlert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453820866,"creation_date":1453815952,"answer_id":35015267,"question_id":35013179,"body_markdown":"If I&#39;ve understood you correctly, this should create the binding you want.\r\n\r\n    class Demo {\r\n\r\n    \tpublic static void main(String[] args) {\r\n    \t\tConcreteA a = new ConcreteA();\r\n    \t\tConcreteB b = new ConcreteB();\r\n    \t\ta.foo(b);\r\n\t\t    b = (ConcreteB) a.getB();\r\n    \t}\r\n    }\r\n\t\r\n    abstract class AbstractA&lt;T extends AbstractB&lt;?&gt;&gt;{\r\n\r\n    \tprivate AbstractB&lt;?&gt; b;\r\n\t\r\n    \tpublic AbstractB&lt;?&gt; getB(){\r\n    \t\treturn b;\r\n    \t}\r\n\t\r\n        void foo(AbstractB&lt;?&gt; aB) {\r\n        \tb = aB;\r\n            aB.bar(this);\r\n        }\r\n    }\r\n\r\n    abstract class AbstractB&lt;T extends AbstractA&lt;?&gt;&gt; {\r\n    \r\n    \tprivate AbstractA&lt;?&gt; a;\r\n    \t\r\n    \tpublic AbstractA&lt;?&gt; getA(){\r\n    \t\treturn a;\r\n    \t}\r\n    \t\r\n        public void bar(AbstractA&lt;?&gt; theA) {\r\n            a = theA;\r\n            theA.foo(this);\r\n        }\r\n    }\r\n        \r\n    class ConcreteA extends AbstractA&lt;ConcreteB&gt;{\r\n    \t\r\n    }\r\n    \r\n    class ConcreteB extends AbstractB&lt;ConcreteA&gt;{\r\n    \t\r\n    }\r\n\r\nI think this is what you ended up at yourself. I am not able to remove the cast to ConcreteB, getB() simply cannot be sure of the type it is holding. I now see why you had multiple generic statements in your declaration. :)\r\n\r\nIf you&#39;re up for it, continue searching, and post your own answer if you find one, I&#39;d love to see it.\r\n\r\nI hope solving half your problem counts for anything. ;)","title":"Java cooperating generic classes: can we avoid unchecked cast?","body":"<p>If I've understood you correctly, this should create the binding you want.</p>\n\n<pre><code>class Demo {\n\n    public static void main(String[] args) {\n        ConcreteA a = new ConcreteA();\n        ConcreteB b = new ConcreteB();\n        a.foo(b);\n        b = (ConcreteB) a.getB();\n    }\n}\n\nabstract class AbstractA&lt;T extends AbstractB&lt;?&gt;&gt;{\n\n    private AbstractB&lt;?&gt; b;\n\n    public AbstractB&lt;?&gt; getB(){\n        return b;\n    }\n\n    void foo(AbstractB&lt;?&gt; aB) {\n        b = aB;\n        aB.bar(this);\n    }\n}\n\nabstract class AbstractB&lt;T extends AbstractA&lt;?&gt;&gt; {\n\n    private AbstractA&lt;?&gt; a;\n\n    public AbstractA&lt;?&gt; getA(){\n        return a;\n    }\n\n    public void bar(AbstractA&lt;?&gt; theA) {\n        a = theA;\n        theA.foo(this);\n    }\n}\n\nclass ConcreteA extends AbstractA&lt;ConcreteB&gt;{\n\n}\n\nclass ConcreteB extends AbstractB&lt;ConcreteA&gt;{\n\n}\n</code></pre>\n\n<p>I think this is what you ended up at yourself. I am not able to remove the cast to ConcreteB, getB() simply cannot be sure of the type it is holding. I now see why you had multiple generic statements in your declaration. :)</p>\n\n<p>If you're up for it, continue searching, and post your own answer if you find one, I'd love to see it.</p>\n\n<p>I hope solving half your problem counts for anything. ;)</p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453928124,"creation_date":1453919162,"answer_id":35045207,"question_id":35013179,"body_markdown":"I think I got it now why I cannot declare `public void setA(T theA)` in `AbstractB` and then call it as `aB.setA(this)` in `foo()`. Suppose we had:\r\n\r\n    class IntermediateConcreteA extends AbstractA&lt;ConcreteB&gt; {\r\n    \r\n    \t@Override\r\n    \tpublic ConcreteB createB() {\r\n    \t\treturn new ConcreteB();\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    class SubConcreteA1 extends IntermediateConcreteA {}\r\n    \r\n    class SubConcreteA2 extends IntermediateConcreteA {}\r\n    \r\n    class ConcreteB extends AbstractB&lt;SubConcreteA2&gt; {}\r\n\r\nNow if I have a `SubConcreteA1` and call its `foo()`, then `createB()` will return an object that can pass as an `AbstractB&lt;SubConcreteA2&gt;` but cannot pass as an `AbstractB&lt;SubConcreteA1&gt;`. Therefore its `setA()` shouldn’t accept `this` as an argument. The compiler error message is logical after all.","title":"Java cooperating generic classes: can we avoid unchecked cast?","body":"<p>I think I got it now why I cannot declare <code>public void setA(T theA)</code> in <code>AbstractB</code> and then call it as <code>aB.setA(this)</code> in <code>foo()</code>. Suppose we had:</p>\n\n<pre><code>class IntermediateConcreteA extends AbstractA&lt;ConcreteB&gt; {\n\n    @Override\n    public ConcreteB createB() {\n        return new ConcreteB();\n    }\n\n}\n\nclass SubConcreteA1 extends IntermediateConcreteA {}\n\nclass SubConcreteA2 extends IntermediateConcreteA {}\n\nclass ConcreteB extends AbstractB&lt;SubConcreteA2&gt; {}\n</code></pre>\n\n<p>Now if I have a <code>SubConcreteA1</code> and call its <code>foo()</code>, then <code>createB()</code> will return an object that can pass as an <code>AbstractB&lt;SubConcreteA2&gt;</code> but cannot pass as an <code>AbstractB&lt;SubConcreteA1&gt;</code>. Therefore its <code>setA()</code> shouldn’t accept <code>this</code> as an argument. The compiler error message is logical after all.</p>\n"},{"tags":[],"owner":{"account_id":31622,"reputation":120341,"user_id":86989,"display_name":"newacct"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454060877,"creation_date":1453957898,"answer_id":35053314,"question_id":35013179,"body_markdown":"Each abstract class would be parameterized with two type parameters, one for the actual concrete class of A, and one for the actual concrete class of B:\r\n\r\n    public abstract class AbstractA&lt;A extends AbstractA&lt;A,B&gt;, B extends AbstractB&lt;A,B&gt;&gt; {\r\n    \r\n        protected void foo() {\r\n            B aB = createB();\r\n            aB.setA(getThis());\r\n        }\r\n    \r\n        abstract public A getThis();\r\n        abstract public B createB();\r\n    \r\n    }\r\n    \r\n    public abstract class AbstractB&lt;A extends AbstractA&lt;A,B&gt;, B extends AbstractB&lt;A,B&gt;&gt; {\r\n    \r\n        private A theA;\r\n    \r\n        public void setA(A theA) {\r\n            this.theA = theA;\r\n        }\r\n    \r\n        protected A getA() {\r\n            return theA;\r\n        }\r\n    \r\n    }\r\n    \r\n    public class ConcreteA extends AbstractA&lt;ConcreteA, ConcreteB&gt; {\r\n    \r\n        @Override\r\n        public ConcreteA getThis() {\r\n            return this;\r\n        }\r\n    \r\n        @Override\r\n        public ConcreteB createB() {\r\n            return new ConcreteB();\r\n        }\r\n    \r\n        public void concreteAMethod() {\r\n            // ...\r\n        }\r\n    \r\n    }\r\n    \r\n    public class ConcreteB extends AbstractB&lt;ConcreteA, ConcreteB&gt; {\r\n    \r\n        public void bar() {\r\n            ConcreteA a = getA();\r\n            a.concreteAMethod();\r\n        }\r\n    \r\n    }","title":"Java cooperating generic classes: can we avoid unchecked cast?","body":"<p>Each abstract class would be parameterized with two type parameters, one for the actual concrete class of A, and one for the actual concrete class of B:</p>\n\n<pre><code>public abstract class AbstractA&lt;A extends AbstractA&lt;A,B&gt;, B extends AbstractB&lt;A,B&gt;&gt; {\n\n    protected void foo() {\n        B aB = createB();\n        aB.setA(getThis());\n    }\n\n    abstract public A getThis();\n    abstract public B createB();\n\n}\n\npublic abstract class AbstractB&lt;A extends AbstractA&lt;A,B&gt;, B extends AbstractB&lt;A,B&gt;&gt; {\n\n    private A theA;\n\n    public void setA(A theA) {\n        this.theA = theA;\n    }\n\n    protected A getA() {\n        return theA;\n    }\n\n}\n\npublic class ConcreteA extends AbstractA&lt;ConcreteA, ConcreteB&gt; {\n\n    @Override\n    public ConcreteA getThis() {\n        return this;\n    }\n\n    @Override\n    public ConcreteB createB() {\n        return new ConcreteB();\n    }\n\n    public void concreteAMethod() {\n        // ...\n    }\n\n}\n\npublic class ConcreteB extends AbstractB&lt;ConcreteA, ConcreteB&gt; {\n\n    public void bar() {\n        ConcreteA a = getA();\n        a.concreteAMethod();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454586476,"creation_date":1454583607,"answer_id":35199270,"question_id":35013179,"body_markdown":"A factory can solve it:\r\n\r\n    public abstract class AbstractA {\r\n    \r\n    \tpublic void abstractAMethod() {\r\n    \t\t// ...\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    public abstract class AbstractB&lt;A&gt; {\r\n    \r\n        private A theA;\r\n    \r\n        public void setA(A theA) {\r\n            this.theA = theA;\r\n        }\r\n    \r\n        protected A getA() {\r\n            return theA;\r\n        }\r\n    \r\n    }\r\n    \r\n    public abstract class AbstractFactory&lt;A extends AbstractA, B extends AbstractB&lt;A&gt;&gt; {\r\n    \t\r\n    \tprivate A theA = createA();\r\n    \r\n    \tpublic A getA() {\r\n    \t\treturn theA ;\r\n    \t}\r\n    \t\r\n    \tpublic B getNextB() {\r\n    \t\tB newB = createB();\r\n    \t\tnewB.setA(theA);\r\n    \t\treturn newB;\r\n    \t}\r\n    \t\r\n    \tprotected abstract A createA();\r\n    \tprotected abstract B createB();\r\n    }\r\n\r\nNow the user can go:\r\n\r\n    public class ConcreteA extends AbstractA {\r\n    \t\r\n    \tpublic void concreteAMethod() {\r\n    \t\t// ...\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    public class ConcreteB extends AbstractB&lt;ConcreteA&gt; {\r\n    \r\n    \tpublic void bar() {\r\n    \t\tConcreteA a = getA();\r\n    \t\ta.abstractAMethod();\r\n    \t\ta.concreteAMethod();\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    public class ConcreteFactory extends AbstractFactory&lt;ConcreteA, ConcreteB&gt; {\r\n    \r\n    \t@Override\r\n    \tprotected ConcreteA createA() {\r\n    \t\treturn new ConcreteA();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected ConcreteB createB() {\r\n    \t\treturn new ConcreteB();\r\n    \t}\r\n    \r\n    }\r\n\r\nI don’t think it’s a typical application of the abstract factory pattern, though …\r\n\r\n@Chris Wohlert, I did give up in my production code since I considered the factory overkill, but I could not let go of the theoretical question.","title":"Java cooperating generic classes: can we avoid unchecked cast?","body":"<p>A factory can solve it:</p>\n\n<pre><code>public abstract class AbstractA {\n\n    public void abstractAMethod() {\n        // ...\n    }\n\n}\n\npublic abstract class AbstractB&lt;A&gt; {\n\n    private A theA;\n\n    public void setA(A theA) {\n        this.theA = theA;\n    }\n\n    protected A getA() {\n        return theA;\n    }\n\n}\n\npublic abstract class AbstractFactory&lt;A extends AbstractA, B extends AbstractB&lt;A&gt;&gt; {\n\n    private A theA = createA();\n\n    public A getA() {\n        return theA ;\n    }\n\n    public B getNextB() {\n        B newB = createB();\n        newB.setA(theA);\n        return newB;\n    }\n\n    protected abstract A createA();\n    protected abstract B createB();\n}\n</code></pre>\n\n<p>Now the user can go:</p>\n\n<pre><code>public class ConcreteA extends AbstractA {\n\n    public void concreteAMethod() {\n        // ...\n    }\n\n}\n\npublic class ConcreteB extends AbstractB&lt;ConcreteA&gt; {\n\n    public void bar() {\n        ConcreteA a = getA();\n        a.abstractAMethod();\n        a.concreteAMethod();\n    }\n\n}\n\npublic class ConcreteFactory extends AbstractFactory&lt;ConcreteA, ConcreteB&gt; {\n\n    @Override\n    protected ConcreteA createA() {\n        return new ConcreteA();\n    }\n\n    @Override\n    protected ConcreteB createB() {\n        return new ConcreteB();\n    }\n\n}\n</code></pre>\n\n<p>I don’t think it’s a typical application of the abstract factory pattern, though …</p>\n\n<p>@Chris Wohlert, I did give up in my production code since I considered the factory overkill, but I could not let go of the theoretical question.</p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1456223706,"creation_date":1456223706,"answer_id":35575089,"question_id":35013179,"body_markdown":"I have come to realize that my problem really came out of stuffing two concepts into the AbstractA/ConcreteA hierarchy that didn’t belong together. Though maybe not interesting to very many, I am posting this insight for two reasons: (1) I feel I owe Chris Wohlert the answer I have found myself (2) more importantly, I’d love to inspire anyone else facing a similar tricky generics issue to review your design from a higher level than just solving the generics and/or class cast issue. It certainly helped me. The cast/generics problem was a sign that something more fundamental was not quite right.\r\n\r\n    public abstract class AbstractA {\r\n    \t\r\n    \tpublic void foo() {\r\n    \t\tAbstractB aB = createB();\r\n            aB.setA(this);\r\n    \t}\r\n    \r\n        /** factory method */\r\n        abstract public AbstractB createB();\r\n    \r\n    }\r\n    \r\n    public abstract class AbstractB {\r\n    \r\n        private AbstractA theA;\r\n    \r\n        public void setA(AbstractA theA) {\r\n            this.theA = theA;\r\n        }\r\n    \r\n        // methods that use theA\r\n        \r\n    }\r\n\r\nNo generics and no class cast. Taking out the stuff that didn’t belong in the A class hierarchy into ConcreteC (with no AbstractC):\r\n\r\n    public class Client {\r\n    \r\n    \tpublic void putTheActTogether() {\r\n    \t\tConcreteC theC = new ConcreteC();\r\n    \t\t\r\n    \t\t// the concrete A\r\n    \t\tAbstractA theA = new AbstractA() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic AbstractB createB() {\r\n    \t\t\t\treturn new ConcreteB(theC);\r\n    \t\t\t}\r\n    \t\t};\r\n    \t\t// call methods in theA\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    public class ConcreteB extends AbstractB {\r\n    \r\n    \tprivate final ConcreteC c;\r\n    \t\r\n    \tpublic ConcreteB(ConcreteC c) {\r\n    \t\tsuper();\r\n    \t\tthis.c = c;\r\n    \t}\r\n    \r\n    \tpublic void bar() {\r\n    \t\tc.concreteCMethod();\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    public class ConcreteC {\r\n    \r\n    \tpublic void concreteCMethod() { // was concreteAMethod(); moved and renamed\r\n    \t\t// ...\r\n    \t}\r\n    \t\r\n    }\r\n\r\nThe client needs a few more lines than before. In my real-world code I needed to duplicate one final field in AbstractA and ConcreteC, but it made sense to do. All in all I consider it a low price for a design that is otherwise pure and simple.","title":"Java cooperating generic classes: can we avoid unchecked cast?","body":"<p>I have come to realize that my problem really came out of stuffing two concepts into the AbstractA/ConcreteA hierarchy that didn’t belong together. Though maybe not interesting to very many, I am posting this insight for two reasons: (1) I feel I owe Chris Wohlert the answer I have found myself (2) more importantly, I’d love to inspire anyone else facing a similar tricky generics issue to review your design from a higher level than just solving the generics and/or class cast issue. It certainly helped me. The cast/generics problem was a sign that something more fundamental was not quite right.</p>\n\n<pre><code>public abstract class AbstractA {\n\n    public void foo() {\n        AbstractB aB = createB();\n        aB.setA(this);\n    }\n\n    /** factory method */\n    abstract public AbstractB createB();\n\n}\n\npublic abstract class AbstractB {\n\n    private AbstractA theA;\n\n    public void setA(AbstractA theA) {\n        this.theA = theA;\n    }\n\n    // methods that use theA\n\n}\n</code></pre>\n\n<p>No generics and no class cast. Taking out the stuff that didn’t belong in the A class hierarchy into ConcreteC (with no AbstractC):</p>\n\n<pre><code>public class Client {\n\n    public void putTheActTogether() {\n        ConcreteC theC = new ConcreteC();\n\n        // the concrete A\n        AbstractA theA = new AbstractA() {\n            @Override\n            public AbstractB createB() {\n                return new ConcreteB(theC);\n            }\n        };\n        // call methods in theA\n    }\n\n}\n\npublic class ConcreteB extends AbstractB {\n\n    private final ConcreteC c;\n\n    public ConcreteB(ConcreteC c) {\n        super();\n        this.c = c;\n    }\n\n    public void bar() {\n        c.concreteCMethod();\n    }\n\n}\n\npublic class ConcreteC {\n\n    public void concreteCMethod() { // was concreteAMethod(); moved and renamed\n        // ...\n    }\n\n}\n</code></pre>\n\n<p>The client needs a few more lines than before. In my real-world code I needed to duplicate one final field in AbstractA and ConcreteC, but it made sense to do. All in all I consider it a low price for a design that is otherwise pure and simple.</p>\n"}],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":741,"favorite_count":0,"down_vote_count":8,"up_vote_count":5,"accepted_answer_id":35575089,"answer_count":5,"score":-3,"last_activity_date":1687001616,"creation_date":1453808905,"question_id":35013179,"body_markdown":"I have two abstract generic classes. They cooperate and hence depend on each other. Occasionally one needs to pass `this` to the other. I am trying to find a type safe way to do that.\r\n\r\n    public abstract class AbstractA&lt;T extends AbstractB&lt;? extends AbstractA&lt;T&gt;&gt;&gt; {\r\n    \r\n    \tprotected void foo() {\r\n    \t\tT aB = createB();\r\n    \t\taB.setA(this);\r\n    \t}\r\n    \r\n    \t/** factory method */\r\n    \tabstract public T createB();\r\n    \t\r\n    }\r\n    \r\n    public abstract class AbstractB&lt;T extends AbstractA&lt;? extends AbstractB&lt;T&gt;&gt;&gt; {\r\n    \r\n    \tprivate T theA;\r\n    \t\r\n    \t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \tpublic void setA(AbstractA&lt;? extends AbstractB&lt;?&gt;&gt; theA) { // dreamed of parameter list (T theA)\r\n    \t\t// Unchecked cast from AbstractA&lt;capture#1-of ? extends AbstractB&lt;?&gt;&gt; to T\r\n    \t\tthis.theA = (T) theA;\r\n    \t}\r\n    \t\r\n    \tprotected T getA() {\r\n    \t\treturn theA;\r\n    \t}\r\n    \t\r\n    }\r\n\r\nMy question is whether I can find a cleaner way so I avoid the unchecked cast in `AbstractB.setA()`. I had hoped to declare it `setA(T theA)`, but then the call to it won’t compile: The method setA(capture#1-of ? extends AbstractA&amp;lt;T&amp;gt;) in the type AbstractB&amp;lt;capture#1-of ? extends AbstractA&amp;lt;T&amp;gt;&amp;gt; is not applicable for the arguments (AbstractA&amp;lt;T&amp;gt;). I am still struggling to understand whether the compiler should know enough to allow it or not.\r\n\r\nI was thinking my problem may be related to the one discussed in https://stackoverflow.com/questions/8021900/java-generics-compilation-error-the-method-methodclasscapture1-of-extends. My unchecked cast was inspired from there. I liked the reply by Tom Hawtin - tackling, but I have not found a way to apply it to my situation.\r\n\r\nMy user will declare concrete subclasses and instantiate one `ConcreteA` and any number of `ConcreteB`s:\r\n\r\n    public class ConcreteA extends AbstractA&lt;ConcreteB&gt; {\r\n    \r\n    \t@Override\r\n    \tpublic ConcreteB createB() {\r\n    \t\treturn new ConcreteB();\r\n    \t}\r\n    \t\r\n    \tpublic void concreteAMethod() {\r\n    \t\t// ...\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    public class ConcreteB extends AbstractB&lt;ConcreteA&gt; {\r\n    \r\n    \tpublic void bar() {\r\n    \t\tConcreteA a = getA();\r\n    \t\ta.concreteAMethod();\r\n    \t}\r\n    \t\r\n    }\r\n\r\n(`class AbstractA&lt;T extends AbstractB&lt;? extends AbstractA&lt;T&gt;&gt;&gt;` looks a bit complicated; I thought I needed it for concrete subclasses to know each other’s exact types, but apparently it doesn’t give me that.)","title":"Java cooperating generic classes: can we avoid unchecked cast?","body":"<p>I have two abstract generic classes. They cooperate and hence depend on each other. Occasionally one needs to pass <code>this</code> to the other. I am trying to find a type safe way to do that.</p>\n<pre><code>public abstract class AbstractA&lt;T extends AbstractB&lt;? extends AbstractA&lt;T&gt;&gt;&gt; {\n\n    protected void foo() {\n        T aB = createB();\n        aB.setA(this);\n    }\n\n    /** factory method */\n    abstract public T createB();\n    \n}\n\npublic abstract class AbstractB&lt;T extends AbstractA&lt;? extends AbstractB&lt;T&gt;&gt;&gt; {\n\n    private T theA;\n    \n    @SuppressWarnings(&quot;unchecked&quot;)\n    public void setA(AbstractA&lt;? extends AbstractB&lt;?&gt;&gt; theA) { // dreamed of parameter list (T theA)\n        // Unchecked cast from AbstractA&lt;capture#1-of ? extends AbstractB&lt;?&gt;&gt; to T\n        this.theA = (T) theA;\n    }\n    \n    protected T getA() {\n        return theA;\n    }\n    \n}\n</code></pre>\n<p>My question is whether I can find a cleaner way so I avoid the unchecked cast in <code>AbstractB.setA()</code>. I had hoped to declare it <code>setA(T theA)</code>, but then the call to it won’t compile: The method setA(capture#1-of ? extends AbstractA&lt;T&gt;) in the type AbstractB&lt;capture#1-of ? extends AbstractA&lt;T&gt;&gt; is not applicable for the arguments (AbstractA&lt;T&gt;). I am still struggling to understand whether the compiler should know enough to allow it or not.</p>\n<p>I was thinking my problem may be related to the one discussed in <a href=\"https://stackoverflow.com/questions/8021900/java-generics-compilation-error-the-method-methodclasscapture1-of-extends\">Java generics compilation error - The method method(Class&lt;capture#1-of ? extends Interface&gt;) in the type &lt;type&gt; is not applicable for the arguments</a>. My unchecked cast was inspired from there. I liked the reply by Tom Hawtin - tackling, but I have not found a way to apply it to my situation.</p>\n<p>My user will declare concrete subclasses and instantiate one <code>ConcreteA</code> and any number of <code>ConcreteB</code>s:</p>\n<pre><code>public class ConcreteA extends AbstractA&lt;ConcreteB&gt; {\n\n    @Override\n    public ConcreteB createB() {\n        return new ConcreteB();\n    }\n    \n    public void concreteAMethod() {\n        // ...\n    }\n    \n}\n\npublic class ConcreteB extends AbstractB&lt;ConcreteA&gt; {\n\n    public void bar() {\n        ConcreteA a = getA();\n        a.concreteAMethod();\n    }\n    \n}\n</code></pre>\n<p>(<code>class AbstractA&lt;T extends AbstractB&lt;? extends AbstractA&lt;T&gt;&gt;&gt;</code> looks a bit complicated; I thought I needed it for concrete subclasses to know each other’s exact types, but apparently it doesn’t give me that.)</p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"comments":[{"owner":{"account_id":320466,"reputation":8954,"user_id":638764,"display_name":"mazaneicha"},"score":0,"creation_date":1686943905,"post_id":76492035,"comment_id":134873314,"body_markdown":"Just curious, what is a `persist()` in `....foreachPartition(persist())`?","body":"Just curious, what is a <code>persist()</code> in <code>....foreachPartition(persist())</code>?"},{"owner":{"account_id":4821703,"reputation":5934,"user_id":3892213,"accept_rate":80,"display_name":"best wishes"},"score":0,"creation_date":1686962937,"post_id":76492035,"comment_id":134875320,"body_markdown":"It just does write to hdfs. For some reason, we have to write in a single file.","body":"It just does write to hdfs. For some reason, we have to write in a single file."},{"owner":{"account_id":320466,"reputation":8954,"user_id":638764,"display_name":"mazaneicha"},"score":0,"creation_date":1686969634,"post_id":76492035,"comment_id":134875658,"body_markdown":"Would `persist(dataSet.cache().toLocalIterator())` serve the need better then? https://spark.apache.org/docs/3.3.0/api/java/org/apache/spark/rdd/RDD.html#toLocalIterator--","body":"Would <code>persist(dataSet.cache().toLocalIterator())</code> serve the need better then? <a href=\"https://spark.apache.org/docs/3.3.0/api/java/org/apache/spark/rdd/RDD.html#toLocalIterator--\" rel=\"nofollow noreferrer\">spark.apache.org/docs/3.3.0/api/java/org/apache/spark/rdd/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":21002866,"reputation":442,"user_id":15433308,"display_name":"krezno"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687000983,"creation_date":1686940318,"answer_id":76492799,"question_id":76492035,"body_markdown":"You need to create what is called a stage barrier, something that will force spark not to push the coalesce and the join into the same stage.\r\n\r\nIf you can manage holding the whole result on a single partition, the join result probably isn&#39;t too large. Consider replacing `coalesce` with `repartition`, which will do a full shuffle but also create a stage barrier and perform the join in parallel. This was fast enough for my use cases but might not be best practice as `repartition` is an expensive operation.\r\n\r\nIt might be faster to call `df.localCheckpoint` which writes intermediate results to disk (but unlike `cache` creates a stage barrier) then `coalesce` but I haven&#39;t personally tried it.\r\n\r\nMore elaboration [here](https://youtu.be/daXEp4HmS-E?t=1785)\r\n\r\n","title":"Spark force a distributed join","body":"<p>You need to create what is called a stage barrier, something that will force spark not to push the coalesce and the join into the same stage.</p>\n<p>If you can manage holding the whole result on a single partition, the join result probably isn't too large. Consider replacing <code>coalesce</code> with <code>repartition</code>, which will do a full shuffle but also create a stage barrier and perform the join in parallel. This was fast enough for my use cases but might not be best practice as <code>repartition</code> is an expensive operation.</p>\n<p>It might be faster to call <code>df.localCheckpoint</code> which writes intermediate results to disk (but unlike <code>cache</code> creates a stage barrier) then <code>coalesce</code> but I haven't personally tried it.</p>\n<p>More elaboration <a href=\"https://youtu.be/daXEp4HmS-E?t=1785\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":4821703,"reputation":5934,"user_id":3892213,"accept_rate":80,"display_name":"best wishes"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76492799,"answer_count":1,"score":0,"last_activity_date":1687000983,"creation_date":1686932700,"question_id":76492035,"body_markdown":"i have a spark sql job where i am doing\r\n\r\n```\r\nDataset&lt;Row&gt; currentDataSet = hdfsHandler.loadDataSet(sparkSession, &quot;somelocation&quot;);\r\ncurrentDataSet.createOrReplaceTempView(CURRENT_USER_VIEW);\r\n\r\nDataset&lt;Row&gt; previousDataSet = hdfsHandler.loadDataSet(sparkSession, &quot;somelocation2);\r\npreviousDataSet.createOrReplaceTempView(PREVIOUS_USER_VIEW);\r\n\r\nString currentRunColumn = &quot;c.&quot;.concat(&quot;userid&quot;);\r\nString previousRunColumn = &quot;p.&quot;.concat(&quot;userid&quot;);\r\n\r\nDataset&lt;Row&gt; addedRecordDataSets = sparkSession.sql(&quot;SELECT &quot; + currentRunColumn + &quot; FROM &quot; +\r\n        CURRENT_USER_VIEW + &quot; AS c &quot; +\r\n        &quot; LEFT JOIN &quot; + PREVIOUS_USER_VIEW + &quot; AS p &quot; +\r\n        &quot; ON &quot; + currentRunColumn + &quot; == &quot; + previousRunColumn +\r\n        &quot; WHERE &quot; + previousRunColumn + &quot; IS NULL &quot;);\r\n\r\ndataSet.coalesce(1).persist(StorageLevel.DISK_ONLY()).foreachPartition(persist());\r\n```\r\n\r\nfor this job 3 jobs are created\r\n\r\n1. read from hdfs currentDataSet\r\n2. read from hdfs previousDataSet\r\n3. join two dataset, coalesce, call persist().\r\n\r\nthe 3rd step is executed only on 1 executor because foreachPartition(persist()) is the only terminal operation. If the datasets are huge it will take lots of time. is there a way i can do a distributed join and then only coalesce it? \r\n\r\none way i can think of is by adding one more terminal operator like count after computing addedRecordDataSets, but just that will not solve the issue i will have to cache as well so that we are not having to rejoin  the data. But caching is a costly operation. Is it possible to to just force materialise the dataset?\r\n\r\nthis questions seems to be relevant to [this][1] SO\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/36106593/how-to-materialize-an-rdd-explicitly-in-spark","title":"Spark force a distributed join","body":"<p>i have a spark sql job where i am doing</p>\n<pre><code>Dataset&lt;Row&gt; currentDataSet = hdfsHandler.loadDataSet(sparkSession, &quot;somelocation&quot;);\ncurrentDataSet.createOrReplaceTempView(CURRENT_USER_VIEW);\n\nDataset&lt;Row&gt; previousDataSet = hdfsHandler.loadDataSet(sparkSession, &quot;somelocation2);\npreviousDataSet.createOrReplaceTempView(PREVIOUS_USER_VIEW);\n\nString currentRunColumn = &quot;c.&quot;.concat(&quot;userid&quot;);\nString previousRunColumn = &quot;p.&quot;.concat(&quot;userid&quot;);\n\nDataset&lt;Row&gt; addedRecordDataSets = sparkSession.sql(&quot;SELECT &quot; + currentRunColumn + &quot; FROM &quot; +\n        CURRENT_USER_VIEW + &quot; AS c &quot; +\n        &quot; LEFT JOIN &quot; + PREVIOUS_USER_VIEW + &quot; AS p &quot; +\n        &quot; ON &quot; + currentRunColumn + &quot; == &quot; + previousRunColumn +\n        &quot; WHERE &quot; + previousRunColumn + &quot; IS NULL &quot;);\n\ndataSet.coalesce(1).persist(StorageLevel.DISK_ONLY()).foreachPartition(persist());\n</code></pre>\n<p>for this job 3 jobs are created</p>\n<ol>\n<li>read from hdfs currentDataSet</li>\n<li>read from hdfs previousDataSet</li>\n<li>join two dataset, coalesce, call persist().</li>\n</ol>\n<p>the 3rd step is executed only on 1 executor because foreachPartition(persist()) is the only terminal operation. If the datasets are huge it will take lots of time. is there a way i can do a distributed join and then only coalesce it?</p>\n<p>one way i can think of is by adding one more terminal operator like count after computing addedRecordDataSets, but just that will not solve the issue i will have to cache as well so that we are not having to rejoin  the data. But caching is a costly operation. Is it possible to to just force materialise the dataset?</p>\n<p>this questions seems to be relevant to <a href=\"https://stackoverflow.com/questions/36106593/how-to-materialize-an-rdd-explicitly-in-spark\">this</a> SO</p>\n"},{"tags":["java","java-9","java-module"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1687268701,"post_id":76495914,"comment_id":134910813,"body_markdown":"Do you understand the *actual purpose* of the `--upgrade-module-path` option?","body":"Do you understand the <i>actual purpose</i> of the <code>--upgrade-module-path</code> option?"},{"owner":{"account_id":18337316,"reputation":11,"user_id":13354429,"display_name":"fade"},"score":0,"creation_date":1687312445,"post_id":76495914,"comment_id":134917747,"body_markdown":"@Holger It is used to specify the location of updated or upgraded modules when running a modular Java application. I tried to use `--module-path`, but I need to specify all the modules, which I haven&#39;t encountered when I didn&#39;t use unnamed modules. Perhaps, I may have some confusion regarding the usage of modules. Could you please suggest some better advice on how to use them effectively?","body":"@Holger It is used to specify the location of updated or upgraded modules when running a modular Java application. I tried to use <code>--module-path</code>, but I need to specify all the modules, which I haven&#39;t encountered when I didn&#39;t use unnamed modules. Perhaps, I may have some confusion regarding the usage of modules. Could you please suggest some better advice on how to use them effectively?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1687330999,"post_id":76495914,"comment_id":134919802,"body_markdown":"You can specify directories *containing* the modules in `--module-path`, rather than each module. But, of course, it requires a suitable directory structure to be an advantage. There is no way to use modules without specifying the path to the modules. Apparently, you’re running in an environment which generates the startup options for you, so the fact that your module’s path is missing, is a configuration problem of that environment. The purpose of `--upgrade-module-path` is to specify a path to upgraded versions *of the JDK modules*. It’s not for fixing problems with the ordinary module path.","body":"You can specify directories <i>containing</i> the modules in <code>--module-path</code>, rather than each module. But, of course, it requires a suitable directory structure to be an advantage. There is no way to use modules without specifying the path to the modules. Apparently, you’re running in an environment which generates the startup options for you, so the fact that your module’s path is missing, is a configuration problem of that environment. The purpose of <code>--upgrade-module-path</code> is to specify a path to upgraded versions <i>of the JDK modules</i>. It’s not for fixing problems with the ordinary module path."}],"owner":{"account_id":18337316,"reputation":11,"user_id":13354429,"display_name":"fade"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687000143,"creation_date":1687000100,"question_id":76495914,"body_markdown":"I am new to using `Java 9` modules.\r\n\r\nI am aware that there are different types of `Java 9` modules such as `Automatic modules` and `Unnamed modules`.\r\n\r\nI am curious why I am able to use third-party dependencies such as `google-guava` as `Automatic modules` directly in a module, but when I use a library that I have written which does not have a `module-info.java` file, I need to add `jvm` options like `--upgrade-module-path`. Are there any solutions available that would eliminate the need to add `jvm` options? \r\n\r\nHere is a link to my demo: https://github.com/FadeDemo/java-module-demo/blob/main/module-consumer-new/src/main/java/org/fade/demo/module/consumer/niu/Test.java\r\n","title":"Are there any solutions available that would eliminate the need to add `jvm` options when using Java 9 modules?","body":"<p>I am new to using <code>Java 9</code> modules.</p>\n<p>I am aware that there are different types of <code>Java 9</code> modules such as <code>Automatic modules</code> and <code>Unnamed modules</code>.</p>\n<p>I am curious why I am able to use third-party dependencies such as <code>google-guava</code> as <code>Automatic modules</code> directly in a module, but when I use a library that I have written which does not have a <code>module-info.java</code> file, I need to add <code>jvm</code> options like <code>--upgrade-module-path</code>. Are there any solutions available that would eliminate the need to add <code>jvm</code> options?</p>\n<p>Here is a link to my demo: <a href=\"https://github.com/FadeDemo/java-module-demo/blob/main/module-consumer-new/src/main/java/org/fade/demo/module/consumer/niu/Test.java\" rel=\"nofollow noreferrer\">https://github.com/FadeDemo/java-module-demo/blob/main/module-consumer-new/src/main/java/org/fade/demo/module/consumer/niu/Test.java</a></p>\n"},{"tags":["java","parsing","datetime"],"comments":[{"owner":{"account_id":6340208,"reputation":48515,"user_id":4922375,"accept_rate":96,"display_name":"Andrew Tobilko"},"score":0,"creation_date":1443444448,"post_id":32823368,"comment_id":53482145,"body_markdown":"why are you waiting for an exception?","body":"why are you waiting for an exception?"},{"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":4,"creation_date":1443444596,"post_id":32823368,"comment_id":53482254,"body_markdown":"@AndrewTobilko, presumably because 31 Feb. doesn&#39;t exist.","body":"@AndrewTobilko, presumably because 31 Feb. doesn&#39;t exist."},{"owner":{"account_id":5995725,"reputation":4137,"user_id":4710425,"accept_rate":59,"display_name":"SatyaTNV"},"score":0,"creation_date":1443444719,"post_id":32823368,"comment_id":53482338,"body_markdown":"But formatter does not know about that.","body":"But formatter does not know about that."},{"owner":{"account_id":393799,"reputation":6228,"user_id":755851,"display_name":"Foon"},"score":0,"creation_date":1443444736,"post_id":32823368,"comment_id":53482350,"body_markdown":"Out of curiosity, does 02/29/2015 (which also doesn&#39;t exist) behave as expected?","body":"Out of curiosity, does 02/29/2015 (which also doesn&#39;t exist) behave as expected?"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1443444973,"post_id":32823368,"comment_id":53482526,"body_markdown":"@Satya: What makes you think that? Something clearly knows that date doesn&#39;t exist, as it&#39;s converting it to the 28th...","body":"@Satya: What makes you think that? Something clearly knows that date doesn&#39;t exist, as it&#39;s converting it to the 28th..."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":1,"creation_date":1443450545,"post_id":32823368,"comment_id":53486534,"body_markdown":"@JonSkeet My apologies for misleading you earlier, the problem was not the missing milliseconds. It was in fact the missing Era. It still requires a `DateTimeFormatterBuilder` but with a default for the Era, not for milliseconds. If you want to edit &amp; undelete your answer, feel free.","body":"@JonSkeet My apologies for misleading you earlier, the problem was not the missing milliseconds. It was in fact the missing Era. It still requires a <code>DateTimeFormatterBuilder</code> but with a default for the Era, not for milliseconds. If you want to edit &amp; undelete your answer, feel free."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1443451929,"post_id":32823368,"comment_id":53487422,"body_markdown":"@RealSkeptic: Thanks, will do. Still &quot;urgh&quot;.","body":"@RealSkeptic: Thanks, will do. Still &quot;urgh&quot;."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1443453986,"creation_date":1443444821,"answer_id":32823520,"question_id":32823368,"body_markdown":"You just need a strict [`ResolverStyle`][1].\r\n\r\n&gt; Parsing a text string occurs in two phases. Phase 1 is a basic text parse according to the fields added to the builder. Phase 2 resolves the parsed field-value pairs into date and/or time objects. This style is used to control how phase 2, resolving, happens.\r\n\r\nSample code - where `withResolverStyle(ResolverStyle.STRICT)` is the important change, along with the use of `uuuu` rather than `yyyy` (where `uuuu` is &quot;year&quot; and &quot;yyyy&quot; is &quot;year of era&quot;, and therefore ambiguous):\r\n\r\n    import java.time.*;\r\n    import java.time.format.*;\r\n    import java.util.*;\r\n    \r\n    public class Test {\r\n    \r\n        public static void main(String[] args) {\r\n            String dateFormat = &quot;HH:mm:ss MM/dd/uuuu&quot;;\r\n            String dateString = &quot;11:30:59 02/31/2015&quot;;\r\n            DateTimeFormatter dateTimeFormatter = DateTimeFormatter\r\n                .ofPattern(dateFormat, Locale.US)\r\n                .withResolverStyle(ResolverStyle.STRICT);\r\n            try {\r\n                LocalDateTime date = LocalDateTime.parse(dateString, dateTimeFormatter);\r\n                System.out.println(date);\r\n            } catch (DateTimeParseException e) {\r\n                // Throw invalid date message\r\n                System.out.println(&quot;Exception was thrown&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/format/ResolverStyle.html","title":"Java 8 LocalDateTime is parsing invalid datetime","body":"<p>You just need a strict <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/format/ResolverStyle.html\"><code>ResolverStyle</code></a>.</p>\n\n<blockquote>\n  <p>Parsing a text string occurs in two phases. Phase 1 is a basic text parse according to the fields added to the builder. Phase 2 resolves the parsed field-value pairs into date and/or time objects. This style is used to control how phase 2, resolving, happens.</p>\n</blockquote>\n\n<p>Sample code - where <code>withResolverStyle(ResolverStyle.STRICT)</code> is the important change, along with the use of <code>uuuu</code> rather than <code>yyyy</code> (where <code>uuuu</code> is \"year\" and \"yyyy\" is \"year of era\", and therefore ambiguous):</p>\n\n<pre><code>import java.time.*;\nimport java.time.format.*;\nimport java.util.*;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        String dateFormat = \"HH:mm:ss MM/dd/uuuu\";\n        String dateString = \"11:30:59 02/31/2015\";\n        DateTimeFormatter dateTimeFormatter = DateTimeFormatter\n            .ofPattern(dateFormat, Locale.US)\n            .withResolverStyle(ResolverStyle.STRICT);\n        try {\n            LocalDateTime date = LocalDateTime.parse(dateString, dateTimeFormatter);\n            System.out.println(date);\n        } catch (DateTimeParseException e) {\n            // Throw invalid date message\n            System.out.println(\"Exception was thrown\");\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3018719,"reputation":416,"user_id":2560234,"accept_rate":50,"display_name":"jste89"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443450622,"creation_date":1443445182,"answer_id":32823626,"question_id":32823368,"body_markdown":"LocalDateTime.parse will only throw an error if the String passed in contains invalid characters, a number of days exceeding 31 or a month exceeding 12.\r\n\r\nFor example, if you modified your code as such:\r\n\r\n    String dateString = &quot;11:30:59 0zz2/31/2015&quot;;\r\n\r\nan exception would be thrown caused by the invalid &#39;zz&#39; characters within your given date. As to why it&#39;s &#39;rounding-down&#39; the date so to speak, that I don&#39;t know.\r\n\r\nSource: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#parse-java.lang.CharSequence-","title":"Java 8 LocalDateTime is parsing invalid datetime","body":"<p>LocalDateTime.parse will only throw an error if the String passed in contains invalid characters, a number of days exceeding 31 or a month exceeding 12.</p>\n\n<p>For example, if you modified your code as such:</p>\n\n<pre><code>String dateString = \"11:30:59 0zz2/31/2015\";\n</code></pre>\n\n<p>an exception would be thrown caused by the invalid 'zz' characters within your given date. As to why it's 'rounding-down' the date so to speak, that I don't know.</p>\n\n<p>Source: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#parse-java.lang.CharSequence-\" rel=\"nofollow\">https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#parse-java.lang.CharSequence-</a></p>\n"},{"tags":[],"owner":{"account_id":5995725,"reputation":4137,"user_id":4710425,"accept_rate":59,"display_name":"SatyaTNV"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1443453594,"creation_date":1443445951,"answer_id":32823908,"question_id":32823368,"body_markdown":"    try {\r\n        SimpleDateFormat df = new java.text.SimpleDateFormat(&quot;HH:mm:ss MM/dd/yyyy&quot;);\r\n        df.setLenient(false);\r\n        System.out.println(df.parse(&quot;11:30:59 02/29/2015&quot;));\r\n    } catch (java.text.ParseException e) {\r\n      System.out.println(e);\r\n    }\r\n\r\nI found one solution to recognize date as a valid date with [DateFormat.setLenient(boolean)][1]. If you try to parse any invalid date it will throws parse exception.\r\n\r\n**Edit:**\r\n\r\n`Java 8`, but this will raise exception if a month is not between `1` and `12`, if a day is more than `32`. Exactly not working. But for month its working.\r\n\r\n    try {\r\n    TemporalAccessor ta = DateTimeFormatter.ofPattern(&quot;HH:mm:ss MM/dd/yyyy&quot;).parse(&quot;11:30:59 02/32/2015&quot;);\r\n    } catch (Exception e) {\r\n    System.out.println(e);\r\n    }\r\n\r\n**Output:**\r\n\r\n    java.time.format.DateTimeParseException: Text &#39;11:30:59 02/32/2015&#39; could not be\r\n     parsed: Invalid value for DayOfMonth (valid values 1 - 28/31): 32\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#setLenient(boolean)","title":"Java 8 LocalDateTime is parsing invalid datetime","body":"<pre><code>try {\n    SimpleDateFormat df = new java.text.SimpleDateFormat(\"HH:mm:ss MM/dd/yyyy\");\n    df.setLenient(false);\n    System.out.println(df.parse(\"11:30:59 02/29/2015\"));\n} catch (java.text.ParseException e) {\n  System.out.println(e);\n}\n</code></pre>\n\n<p>I found one solution to recognize date as a valid date with <a href=\"http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#setLenient(boolean)\" rel=\"nofollow\">DateFormat.setLenient(boolean)</a>. If you try to parse any invalid date it will throws parse exception.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p><code>Java 8</code>, but this will raise exception if a month is not between <code>1</code> and <code>12</code>, if a day is more than <code>32</code>. Exactly not working. But for month its working.</p>\n\n<pre><code>try {\nTemporalAccessor ta = DateTimeFormatter.ofPattern(\"HH:mm:ss MM/dd/yyyy\").parse(\"11:30:59 02/32/2015\");\n} catch (Exception e) {\nSystem.out.println(e);\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>java.time.format.DateTimeParseException: Text '11:30:59 02/32/2015' could not be\n parsed: Invalid value for DayOfMonth (valid values 1 - 28/31): 32\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5504458,"reputation":791,"user_id":4374481,"display_name":"Palamino"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1443451645,"creation_date":1443451645,"answer_id":32825874,"question_id":32823368,"body_markdown":"The Java 8 DateTimeFormatter uses yyyy to mean YEAR_OF_ERA, and uuuu to mean YEAR.  You need to modify your pattern string as follows:\r\n\r\n    String dateFormat = &quot;HH:mm:ss MM/dd/uuuu&quot;;\r\n\r\nThe DateTimeFormatter defaults to using the SMART resolver style, but you want it to use the STRICT resolver style.  Modify your dateTimeFormatter initialization code as follows:\r\n\r\n    DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(dateFormat, Locale.US)\r\n                                                           .withResolverStyle(ResolverStyle.STRICT);\r\n","title":"Java 8 LocalDateTime is parsing invalid datetime","body":"<p>The Java 8 DateTimeFormatter uses yyyy to mean YEAR_OF_ERA, and uuuu to mean YEAR.  You need to modify your pattern string as follows:</p>\n\n<pre><code>String dateFormat = \"HH:mm:ss MM/dd/uuuu\";\n</code></pre>\n\n<p>The DateTimeFormatter defaults to using the SMART resolver style, but you want it to use the STRICT resolver style.  Modify your dateTimeFormatter initialization code as follows:</p>\n\n<pre><code>DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(dateFormat, Locale.US)\n                                                       .withResolverStyle(ResolverStyle.STRICT);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1443452198,"creation_date":1443452198,"answer_id":32826042,"question_id":32823368,"body_markdown":"It is not rounding down.  February has never had 31 days, and it is impossible to use a validating date / time object to represent a day that doesn&#39;t exist.\r\n\r\nAs a result, it takes the invalid input and gives you the best approximation to the correct date (the last date of February that year).\r\n\r\n`SimpleDateFormat` inherits from `DateFormat` which has a `setLenient(boolean value)` method on it.  I would expect that if you called `setLenient(true)` prior to parsing, it would probably complain more, [as detailed in the javadocs][1].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient(boolean)","title":"Java 8 LocalDateTime is parsing invalid datetime","body":"<p>It is not rounding down.  February has never had 31 days, and it is impossible to use a validating date / time object to represent a day that doesn't exist.</p>\n\n<p>As a result, it takes the invalid input and gives you the best approximation to the correct date (the last date of February that year).</p>\n\n<p><code>SimpleDateFormat</code> inherits from <code>DateFormat</code> which has a <code>setLenient(boolean value)</code> method on it.  I would expect that if you called <code>setLenient(true)</code> prior to parsing, it would probably complain more, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient(boolean)\" rel=\"nofollow\">as detailed in the javadocs</a>.</p>\n"}],"owner":{"account_id":2315704,"reputation":11983,"user_id":2032823,"accept_rate":84,"display_name":"Zeeshan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36677,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":32823520,"answer_count":5,"score":34,"last_activity_date":1686999970,"creation_date":1443444359,"question_id":32823368,"body_markdown":"I wanted to validate datetime in client side so I wrote the following code. But instead of getting an exception I am getting a proper datetime object for 31st of February date string, which is clearly an invalid date. \r\n\r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString dateFormat = &quot;HH:mm:ss MM/dd/yyyy&quot;;\r\n    \t\tString dateString = &quot;11:30:59 02/31/2015&quot;;\r\n    \t\tDateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(dateFormat, Locale.US);\r\n    \t\ttry {\r\n    \t\t\tLocalDateTime date = LocalDateTime.parse(dateString, dateTimeFormatter);\r\n    \t\t\tSystem.out.println(date);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// Throw invalid date message\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n**Output** : 2015-02-28T11:30:59\r\n\r\nDoes anyone know why `LocalDateTime` is parsing this datetime instead of throwing an exception.","title":"Java 8 LocalDateTime is parsing invalid datetime","body":"<p>I wanted to validate datetime in client side so I wrote the following code. But instead of getting an exception I am getting a proper datetime object for 31st of February date string, which is clearly an invalid date.</p>\n<pre><code>public class Test {\n\n    public static void main(String[] args) {\n        String dateFormat = &quot;HH:mm:ss MM/dd/yyyy&quot;;\n        String dateString = &quot;11:30:59 02/31/2015&quot;;\n        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(dateFormat, Locale.US);\n        try {\n            LocalDateTime date = LocalDateTime.parse(dateString, dateTimeFormatter);\n            System.out.println(date);\n        } catch (Exception e) {\n            // Throw invalid date message\n        }\n    }\n}\n</code></pre>\n<p><strong>Output</strong> : 2015-02-28T11:30:59</p>\n<p>Does anyone know why <code>LocalDateTime</code> is parsing this datetime instead of throwing an exception.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":8617182,"reputation":664,"user_id":6453588,"display_name":"omnichord"},"score":0,"creation_date":1610652692,"post_id":64818845,"comment_id":116207591,"body_markdown":"Does this answer your question? [Using Spring Boot 2.2.0&#39;s @ConstructorBinding for multiple Beans](https://stackoverflow.com/questions/58944506/using-spring-boot-2-2-0s-constructorbinding-for-multiple-beans)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/58944506/using-spring-boot-2-2-0s-constructorbinding-for-multiple-beans\">Using Spring Boot 2.2.0&#39;s @ConstructorBinding for multiple Beans</a>"}],"answers":[{"tags":[],"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686998936,"creation_date":1605262262,"answer_id":64819050,"question_id":64818845,"body_markdown":"In the `Spring Boot` reference documentation for `@ConstructorBinding` it is said:\r\n\r\n&gt; To use constructor binding the class must be enabled using @EnableConfigurationProperties or configuration property scanning. You cannot use constructor binding with beans that are created by the regular Spring mechanisms (e.g. @Component beans, beans created via @Bean methods or beans loaded using @Import)\r\n\r\nSee [Spring boot documentation]( https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html)\r\n\r\nPerhaps some of the answers in https://stackoverflow.com/questions/26137932/immutable-configurationproperties will be enough to solve your problem.","title":"Immutable ConfigurationProperties from Bean Methods","body":"<p>In the <code>Spring Boot</code> reference documentation for <code>@ConstructorBinding</code> it is said:</p>\n<blockquote>\n<p>To use constructor binding the class must be enabled using @EnableConfigurationProperties or configuration property scanning. You cannot use constructor binding with beans that are created by the regular Spring mechanisms (e.g. @Component beans, beans created via @Bean methods or beans loaded using @Import)</p>\n</blockquote>\n<p>See <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html\" rel=\"nofollow noreferrer\">Spring boot documentation</a></p>\n<p>Perhaps some of the answers in <a href=\"https://stackoverflow.com/questions/26137932/immutable-configurationproperties\">Immutable @ConfigurationProperties</a> will be enough to solve your problem.</p>\n"}],"owner":{"account_id":2346285,"reputation":13265,"user_id":2056452,"accept_rate":69,"display_name":"derM - not here for BOT dreams"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":787,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686998936,"creation_date":1605261401,"question_id":64818845,"body_markdown":"You can create `ConfigurationProperties`-Objects with Spring, in various ways.\r\n\r\nOne way, is to add the `@ConfigurationProperties`-Annotation to an `@Bean`-Declaration like so:\r\n\r\n    @Bean\r\n    @ConfigurationProperties(&quot;my.property.group&quot;)\r\n    public MyProperties myProperties() {\r\n       return new MyProperties();\r\n    }\r\n\r\nwhich will create a bean from `MyProperties`-class and consequently use its *setters* to fill its members with values from the configuration file.\r\n\r\nYou can also have the annotation directly on the `MyProperties`-Object like so:\r\n\r\n    @ConfigurationProperties(&quot;my.property.group&quot;)\r\n    public class MyProperties {\r\n        @Getter @Setter private String myFirstValue;\r\n        @Getter @Setter private String mySecondValue;\r\n    }\r\n\r\ncreating it by placing `@EnableConfigurationProperties(MyProperties.class)` to any loaded configuration.\r\n\r\nIt is also possible to create this class in an immutable way, using `@ConstructorBinding`\r\n\r\n     @ConfigurationProperties(&quot;my.property.group&quot;)\r\n     @ConstructorBinding\r\n     public class MyProperties {\r\n         @Getter private final String myFirstValue;\r\n         @Getter private final String mySecondValue;\r\n         \r\n         public MyProperties(String myFirstValue, String mySecondValue) {\r\n             this.myFirstValue = myFirstValue;\r\n             this.mySecondValue = mySecondValue;\r\n         }\r\n     }\r\n\r\n-----\r\n\r\n__*But how can I create immutable ConfigurationProperties in combination with the first @Bean-method?*__\r\n\r\nI tried something like this:\r\n\r\n     @Bean\r\n     @ConfigurationProperties(&quot;my.property.group&quot;)\r\n     // @ConstructorBinding &lt;---- This is not applicable to methods\r\n     public MyProperties myProperties(String myFirstValue, String mySecondValue) {\r\n         return new MyProperties(myFirstValue, mySecondValue);\r\n     }\r\n\r\nwhich tells me, it could not autowire the parameters, I shall consider declaring some beans of type `String`\r\n","title":"Immutable ConfigurationProperties from Bean Methods","body":"<p>You can create <code>ConfigurationProperties</code>-Objects with Spring, in various ways.</p>\n<p>One way, is to add the <code>@ConfigurationProperties</code>-Annotation to an <code>@Bean</code>-Declaration like so:</p>\n<pre><code>@Bean\n@ConfigurationProperties(&quot;my.property.group&quot;)\npublic MyProperties myProperties() {\n   return new MyProperties();\n}\n</code></pre>\n<p>which will create a bean from <code>MyProperties</code>-class and consequently use its <em>setters</em> to fill its members with values from the configuration file.</p>\n<p>You can also have the annotation directly on the <code>MyProperties</code>-Object like so:</p>\n<pre><code>@ConfigurationProperties(&quot;my.property.group&quot;)\npublic class MyProperties {\n    @Getter @Setter private String myFirstValue;\n    @Getter @Setter private String mySecondValue;\n}\n</code></pre>\n<p>creating it by placing <code>@EnableConfigurationProperties(MyProperties.class)</code> to any loaded configuration.</p>\n<p>It is also possible to create this class in an immutable way, using <code>@ConstructorBinding</code></p>\n<pre><code> @ConfigurationProperties(&quot;my.property.group&quot;)\n @ConstructorBinding\n public class MyProperties {\n     @Getter private final String myFirstValue;\n     @Getter private final String mySecondValue;\n     \n     public MyProperties(String myFirstValue, String mySecondValue) {\n         this.myFirstValue = myFirstValue;\n         this.mySecondValue = mySecondValue;\n     }\n }\n</code></pre>\n<hr />\n<p><strong><em>But how can I create immutable ConfigurationProperties in combination with the first @Bean-method?</em></strong></p>\n<p>I tried something like this:</p>\n<pre><code> @Bean\n @ConfigurationProperties(&quot;my.property.group&quot;)\n // @ConstructorBinding &lt;---- This is not applicable to methods\n public MyProperties myProperties(String myFirstValue, String mySecondValue) {\n     return new MyProperties(myFirstValue, mySecondValue);\n }\n</code></pre>\n<p>which tells me, it could not autowire the parameters, I shall consider declaring some beans of type <code>String</code></p>\n"},{"tags":["java","abstract-class","implementation"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1686933622,"post_id":76492060,"comment_id":134871576,"body_markdown":"&quot;*My question is: Why?*&quot; - you must ask the author(s), we can only guess: maybe to avoid having an instance of that class created directly, eventually to force it to be sub-classed to be able to determine the `_type`. BTW `new MyClass3() {}` is creating an (anonymous) sub-class of `MyClass3` (and an instance of that sub-class)","body":"&quot;<i>My question is: Why?</i>&quot; - you must ask the author(s), we can only guess: maybe to avoid having an instance of that class created directly, eventually to force it to be sub-classed to be able to determine the <code>_type</code>. BTW <code>new MyClass3() {}</code> is creating an (anonymous) sub-class of <code>MyClass3</code> (and an instance of that sub-class)"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1686965883,"post_id":76492060,"comment_id":134875486,"body_markdown":"All of the _methods_ are implemented, but it can&#39;t do its job, which requires some subtlety with reflection and generics, without a subclass.","body":"All of the <i>methods</i> are implemented, but it can&#39;t do its job, which requires some subtlety with reflection and generics, without a subclass."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686998883,"creation_date":1686933365,"answer_id":76492107,"question_id":76492060,"body_markdown":"From the docs of [TypeReference][1]:\r\n\r\n&gt; This generic abstract class is used for obtaining full generics type information by sub-classing;\r\n\r\nIt makes no sense to have instances of this class, because you can&#39;t extract generic type information from it, only from concrete subclasses, hence it&#39;s abstract.\r\n\r\n  [1]: https://fasterxml.github.io/jackson-core/javadoc/2.8/com/fasterxml/jackson/core/type/TypeReference.html","title":"abstract class, but all its methods have implementation","body":"<p>From the docs of <a href=\"https://fasterxml.github.io/jackson-core/javadoc/2.8/com/fasterxml/jackson/core/type/TypeReference.html\" rel=\"nofollow noreferrer\">TypeReference</a>:</p>\n<blockquote>\n<p>This generic abstract class is used for obtaining full generics type information by sub-classing;</p>\n</blockquote>\n<p>It makes no sense to have instances of this class, because you can't extract generic type information from it, only from concrete subclasses, hence it's abstract.</p>\n"}],"owner":{"account_id":6672699,"reputation":379,"user_id":5148363,"accept_rate":82,"display_name":"nik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686998883,"creation_date":1686932887,"question_id":76492060,"body_markdown":"I start working with jackson library. It has this class:\r\n\r\n    public abstract class TypeReference&lt;T&gt; implements Comparable&lt;com.fasterxml.jackson.core.type.TypeReference&lt;T&gt;&gt; {\r\n        protected final Type _type;\r\n    \r\n        protected TypeReference() {\r\n            Type superClass = this.getClass().getGenericSuperclass();\r\n            if (superClass instanceof Class) {\r\n                throw new IllegalArgumentException(&quot;Internal error: TypeReference constructed without actual type information&quot;);\r\n            } else {\r\n                this._type = ((ParameterizedType)superClass).getActualTypeArguments()[0];\r\n            }\r\n        }\r\n    \r\n        public Type getType() {\r\n            return this._type;\r\n        }\r\n    \r\n        public int compareTo(com.fasterxml.jackson.core.type.TypeReference&lt;T&gt; o) {\r\n            return 0;\r\n        }\r\n    }\r\nSo it is abstract class, but all its methods have implementation. My question is: Why? Why use abstract class when all its methods have implementation? Why not just use not abstract class?\r\n\r\nHere is simple illustration:\r\n\r\n    package com.company;\r\n\r\n    abstract class MyClass1 {\r\n        void  method1() {};\r\n        abstract void  method2();\r\n    }\r\n\r\n    abstract class MyClass2 {\r\n        void  method1() {};\r\n        void  method2() {};\r\n    }\r\n\r\n    class MyClass3 {\r\n        void  method1() {};\r\n        void  method2() {};\r\n    }\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            MyClass1 obj1 = new MyClass1() {\r\n                @Override\r\n                void method2() {}\r\n            };\r\n            MyClass2 obj2 = new MyClass2() {};\r\n            MyClass3 obj3 = new MyClass3() {};\r\n        }\r\n    }\r\n\r\nInitialization of obj2 and obj3 is the same. So why use MyClass2 instead of MyClass3?","title":"abstract class, but all its methods have implementation","body":"<p>I start working with jackson library. It has this class:</p>\n<pre><code>public abstract class TypeReference&lt;T&gt; implements Comparable&lt;com.fasterxml.jackson.core.type.TypeReference&lt;T&gt;&gt; {\n    protected final Type _type;\n\n    protected TypeReference() {\n        Type superClass = this.getClass().getGenericSuperclass();\n        if (superClass instanceof Class) {\n            throw new IllegalArgumentException(&quot;Internal error: TypeReference constructed without actual type information&quot;);\n        } else {\n            this._type = ((ParameterizedType)superClass).getActualTypeArguments()[0];\n        }\n    }\n\n    public Type getType() {\n        return this._type;\n    }\n\n    public int compareTo(com.fasterxml.jackson.core.type.TypeReference&lt;T&gt; o) {\n        return 0;\n    }\n}\n</code></pre>\n<p>So it is abstract class, but all its methods have implementation. My question is: Why? Why use abstract class when all its methods have implementation? Why not just use not abstract class?</p>\n<p>Here is simple illustration:</p>\n<pre><code>package com.company;\n\nabstract class MyClass1 {\n    void  method1() {};\n    abstract void  method2();\n}\n\nabstract class MyClass2 {\n    void  method1() {};\n    void  method2() {};\n}\n\nclass MyClass3 {\n    void  method1() {};\n    void  method2() {};\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        MyClass1 obj1 = new MyClass1() {\n            @Override\n            void method2() {}\n        };\n        MyClass2 obj2 = new MyClass2() {};\n        MyClass3 obj3 = new MyClass3() {};\n    }\n}\n</code></pre>\n<p>Initialization of obj2 and obj3 is the same. So why use MyClass2 instead of MyClass3?</p>\n"},{"tags":["java","android","jaxb","docx4j","docx-to-pdf-conversion"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1687004272,"post_id":76495834,"comment_id":134878299,"body_markdown":"`JAXBContext` expects to be running on a JVM, not on Android, based on that error. Note that your `Docx4j4Android4` sample is 6-7 years old, which is fairly ancient and might be based on older versions of the various libraries.","body":"<code>JAXBContext</code> expects to be running on a JVM, not on Android, based on that error. Note that your <code>Docx4j4Android4</code> sample is 6-7 years old, which is fairly ancient and might be based on older versions of the various libraries."}],"owner":{"account_id":16450803,"reputation":654,"user_id":11884269,"display_name":"Volper"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686998862,"creation_date":1686998862,"question_id":76495834,"body_markdown":"I am trying to convert a .docx file to .pdf with Docx4J. I get this error:\r\n```\r\nFATAL EXCEPTION: main\r\nProcess: com.example.docx4jtest, PID: 9798\r\njava.lang.NoSuchMethodError: No virtual method getModule()Ljava/lang/Module; in class Ljava/lang/Class; or its super classes (declaration of &#39;java.lang.Class&#39; appears in /apex/com.android.art/javalib/core-oj.jar)\r\n\tat jakarta.xml.bind.ModuleUtil.delegateAddOpensToImplModule(ModuleUtil.java:111)\r\n\tat jakarta.xml.bind.ContextFinder.find(ContextFinder.java:323)\r\n\tat jakarta.xml.bind.JAXBContext.newInstance(JAXBContext.java:392)\r\n\tat org.docx4j.jaxb.Context.&lt;clinit&gt;(Context.java:121)\r\n\tat org.docx4j.openpackaging.contenttype.ContentTypeManager.parseContentTypesFile(ContentTypeManager.java:849)\r\n\tat org.docx4j.openpackaging.io3.Load3.get(Load3.java:146)\r\n\tat org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:572)\r\n\tat org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:421)\r\n\tat org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:298)\r\n\tat org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:276)\r\n\tat org.docx4j.openpackaging.packages.WordprocessingMLPackage.load(WordprocessingMLPackage.java:170)\r\n\tat com.example.docx4jtest.MainActivity.onCreate(MainActivity.java:58)\r\n\tat android.app.Activity.performCreate(Activity.java:8290)\r\n\tat android.app.Activity.performCreate(Activity.java:8269)\r\n\tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1384)\r\n\tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3657)\r\n\tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3813)\r\n\tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:101)\r\n\tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n\tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n\tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2308)\r\n\tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n\tat android.os.Looper.loopOnce(Looper.java:201)\r\n\tat android.os.Looper.loop(Looper.java:288)\r\n\tat android.app.ActivityThread.main(ActivityThread.java:7898)\r\n\tat java.lang.reflect.Method.invoke(Native Method)\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\r\n```\r\nThis exact error message only [appeared once on Google Search](https://youtrack.jetbrains.com/issue/KTOR-5419) and there was no sign of Docx4J there.\r\n\r\nCode:\r\n```java\r\nString tag = &quot;Docx4J Test&quot;;\r\ntry {\r\n    WordprocessingMLPackage mlPackage = WordprocessingMLPackage.load(getFilesDir().toPath().resolve(&quot;template-default.docx&quot;).toFile());\r\n    mlPackage.save(getFilesDir().toPath().resolve(&quot;result.docx&quot;).toFile());\r\n    Log.d(tag, &quot;SAVED&quot;);\r\n    FileOutputStream outputStream = new FileOutputStream(getFilesDir().toPath().resolve(&quot;result.pdf&quot;).toFile());\r\n    Docx4J.toPDF(mlPackage, outputStream);\r\n    Log.d(tag, &quot;SUCCESS&quot;);\r\n} catch (Docx4JException | FileNotFoundException e) {\r\n    Log.d(tag, &quot;onCreate: &quot;.concat(e.getMessage()));\r\n}\r\n```\r\nI added those dependencies to `app/build.gradle`:\r\n```\r\nimplementation(&quot;org.docx4j:docx4j-JAXB-ReferenceImpl:8.3.3&quot;) {\r\n    exclude group: &quot;commons-logging&quot;\r\n}\r\nimplementation &quot;com.fasterxml:aalto-xml:1.3.2&quot;\r\nimplementation &quot;javax.xml.stream:stax-api:1.0-2&quot;\r\nimplementation files(&quot;libs/awt-bastardised-17v8.jar&quot;) // https://github.com/plutext/Docx4j4Android4/blob/master/app/libs/awt-bastardised-17v8.jar\r\nimplementation(&quot;org.docx4j:docx4j-export-fo:11.4.8&quot;) {\r\n    exclude group: &quot;org.apache.xmlgraphics&quot;\r\n}\r\nimplementation &quot;org.glassfish.jaxb:jaxb-runtime:4.0.3&quot;\r\n```\r\nChanging to MOXy didn&#39;t work - same error. I tried downgrading `jaxb-runtime` but got a different error.\r\n\r\nHere&#39;s the full example so you can run it yourself: https://github.com/Volper212/docx4j-test\r\n\r\nKeep in mind that in order to run this you need a `template-default.docx` file in the `files` directory of the app (`/data/user/0/com.example.docx4jtest/files/template-default.docx`). This can be any valid .docx file.\r\n\r\nTo get to this point, I used, among others, these resources:\r\n- https://github.com/plutext/docx4j/blob/master/docs/Docx4j_GettingStarted.pdf\r\n- https://github.com/plutext/Docx4j4Android4","title":"Trying to convert to PDF with Docx4J: No virtual method getModule()Ljava/lang/Module","body":"<p>I am trying to convert a .docx file to .pdf with Docx4J. I get this error:</p>\n<pre><code>FATAL EXCEPTION: main\nProcess: com.example.docx4jtest, PID: 9798\njava.lang.NoSuchMethodError: No virtual method getModule()Ljava/lang/Module; in class Ljava/lang/Class; or its super classes (declaration of 'java.lang.Class' appears in /apex/com.android.art/javalib/core-oj.jar)\n    at jakarta.xml.bind.ModuleUtil.delegateAddOpensToImplModule(ModuleUtil.java:111)\n    at jakarta.xml.bind.ContextFinder.find(ContextFinder.java:323)\n    at jakarta.xml.bind.JAXBContext.newInstance(JAXBContext.java:392)\n    at org.docx4j.jaxb.Context.&lt;clinit&gt;(Context.java:121)\n    at org.docx4j.openpackaging.contenttype.ContentTypeManager.parseContentTypesFile(ContentTypeManager.java:849)\n    at org.docx4j.openpackaging.io3.Load3.get(Load3.java:146)\n    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:572)\n    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:421)\n    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:298)\n    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:276)\n    at org.docx4j.openpackaging.packages.WordprocessingMLPackage.load(WordprocessingMLPackage.java:170)\n    at com.example.docx4jtest.MainActivity.onCreate(MainActivity.java:58)\n    at android.app.Activity.performCreate(Activity.java:8290)\n    at android.app.Activity.performCreate(Activity.java:8269)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1384)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3657)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3813)\n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:101)\n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2308)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loopOnce(Looper.java:201)\n    at android.os.Looper.loop(Looper.java:288)\n    at android.app.ActivityThread.main(ActivityThread.java:7898)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\n</code></pre>\n<p>This exact error message only <a href=\"https://youtrack.jetbrains.com/issue/KTOR-5419\" rel=\"nofollow noreferrer\">appeared once on Google Search</a> and there was no sign of Docx4J there.</p>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String tag = &quot;Docx4J Test&quot;;\ntry {\n    WordprocessingMLPackage mlPackage = WordprocessingMLPackage.load(getFilesDir().toPath().resolve(&quot;template-default.docx&quot;).toFile());\n    mlPackage.save(getFilesDir().toPath().resolve(&quot;result.docx&quot;).toFile());\n    Log.d(tag, &quot;SAVED&quot;);\n    FileOutputStream outputStream = new FileOutputStream(getFilesDir().toPath().resolve(&quot;result.pdf&quot;).toFile());\n    Docx4J.toPDF(mlPackage, outputStream);\n    Log.d(tag, &quot;SUCCESS&quot;);\n} catch (Docx4JException | FileNotFoundException e) {\n    Log.d(tag, &quot;onCreate: &quot;.concat(e.getMessage()));\n}\n</code></pre>\n<p>I added those dependencies to <code>app/build.gradle</code>:</p>\n<pre><code>implementation(&quot;org.docx4j:docx4j-JAXB-ReferenceImpl:8.3.3&quot;) {\n    exclude group: &quot;commons-logging&quot;\n}\nimplementation &quot;com.fasterxml:aalto-xml:1.3.2&quot;\nimplementation &quot;javax.xml.stream:stax-api:1.0-2&quot;\nimplementation files(&quot;libs/awt-bastardised-17v8.jar&quot;) // https://github.com/plutext/Docx4j4Android4/blob/master/app/libs/awt-bastardised-17v8.jar\nimplementation(&quot;org.docx4j:docx4j-export-fo:11.4.8&quot;) {\n    exclude group: &quot;org.apache.xmlgraphics&quot;\n}\nimplementation &quot;org.glassfish.jaxb:jaxb-runtime:4.0.3&quot;\n</code></pre>\n<p>Changing to MOXy didn't work - same error. I tried downgrading <code>jaxb-runtime</code> but got a different error.</p>\n<p>Here's the full example so you can run it yourself: <a href=\"https://github.com/Volper212/docx4j-test\" rel=\"nofollow noreferrer\">https://github.com/Volper212/docx4j-test</a></p>\n<p>Keep in mind that in order to run this you need a <code>template-default.docx</code> file in the <code>files</code> directory of the app (<code>/data/user/0/com.example.docx4jtest/files/template-default.docx</code>). This can be any valid .docx file.</p>\n<p>To get to this point, I used, among others, these resources:</p>\n<ul>\n<li><a href=\"https://github.com/plutext/docx4j/blob/master/docs/Docx4j_GettingStarted.pdf\" rel=\"nofollow noreferrer\">https://github.com/plutext/docx4j/blob/master/docs/Docx4j_GettingStarted.pdf</a></li>\n<li><a href=\"https://github.com/plutext/Docx4j4Android4\" rel=\"nofollow noreferrer\">https://github.com/plutext/Docx4j4Android4</a></li>\n</ul>\n"},{"tags":["java","android","node.js","android-studio","file"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1686994718,"post_id":76495569,"comment_id":134877264,"body_markdown":"Uri.getPath() gives you a nonsense path as you saw and could have determined yourself if you had used File.exists() on ut before upload.","body":"Uri.getPath() gives you a nonsense path as you saw and could have determined yourself if you had used File.exists() on ut before upload."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1686994773,"post_id":76495569,"comment_id":134877267,"body_markdown":"You have a nice content scheme uri visible with Uri toString(). Use the uri to handle the file.","body":"You have a nice content scheme uri visible with Uri toString(). Use the uri to handle the file."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1686994896,"post_id":76495569,"comment_id":134877277,"body_markdown":"I see now that you do not use that wrong &#39;path&#39;. Instead you opened an InputStream for that uri. Well that is the way to go. You dont need that &#39;path&#39;. What is your problem?","body":"I see now that you do not use that wrong &#39;path&#39;. Instead you opened an InputStream for that uri. Well that is the way to go. You dont need that &#39;path&#39;. What is your problem?"},{"owner":{"account_id":27352742,"reputation":15,"user_id":20861643,"display_name":"abcd1211231"},"score":0,"creation_date":1686995829,"post_id":76495569,"comment_id":134877377,"body_markdown":"@blackapps My problem is i dont see the file is send to the server, i dont know the file is send or not. The server should show the message in console (console.log(&#39;File uploaded:&#39;, req.file);) but i dont see anything","body":"@blackapps My problem is i dont see the file is send to the server, i dont know the file is send or not. The server should show the message in console (console.log(&#39;File uploaded:&#39;, req.file);) but i dont see anything"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1686996330,"post_id":76495569,"comment_id":134877452,"body_markdown":"`i dont know the file is send or not.` Well you can know it if you knew what your asynctask did. Tell how it runned? Did you look in the logcat for exceptions? And why not add some log statements. And why not implement an onPostExecute() to inform the user -and yourself- how doInBackground() executed?","body":"<code>i dont know the file is send or not.</code> Well you can know it if you knew what your asynctask did. Tell how it runned? Did you look in the logcat for exceptions? And why not add some log statements. And why not implement an onPostExecute() to inform the user -and yourself- how doInBackground() executed?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1686996490,"post_id":76495569,"comment_id":134877472,"body_markdown":"`// Process response...` You are not determining the response. Do it if you wanna know what happens.","body":"<code>&#47;&#47; Process response...</code> You are not determining the response. Do it if you wanna know what happens."}],"owner":{"account_id":27352742,"reputation":15,"user_id":20861643,"display_name":"abcd1211231"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686996072,"creation_date":1686994120,"question_id":76495569,"body_markdown":"I have a button in html file when it is pressed it calls al function chooseFile() in MainActivity.java and auto send the data to the server.\r\nScript in html:\r\n```\r\n&lt;script&gt;\r\n    document.getElementById(&quot;chooseFile&quot;).addEventListener(&quot;click&quot;, function(event) {\r\n        event.preventDefault();\r\n\r\n        Android.chooseFile();\r\n    });\r\n```\r\n\r\nMainActivity.java\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    private RetrofitInterface retrofitInterface;\r\n    private Retrofit retrofit;\r\n    private WebView webView;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        webView = findViewById(R.id.webview);\r\n        webView.getSettings().setAllowContentAccess(true);\r\n        webView.getSettings().setAllowFileAccess(true);\r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.addJavascriptInterface(new WebAppInterface(), &quot;Android&quot;);\r\n        webView.loadUrl(&quot;file:///android_asset/upload.html&quot;);\r\n    }\r\npublic class WebAppInterface {\r\n        @JavascriptInterface\r\n        public void chooseFile() {\r\n            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n            intent.addCategory(Intent.CATEGORY_OPENABLE);\r\n            intent.setType(&quot;*/*&quot;);\r\n            startActivityForResult(Intent.createChooser(intent, &quot;Choose File&quot;), 1);\r\n        }\r\n}\r\n\r\n@Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == 1 &amp;&amp; resultCode == RESULT_OK) {\r\n            if (data != null &amp;&amp; data.getData() != null) {\r\n                Uri uri = data.getData();\r\n                String filePath = uri.getPath();\r\n                sendPDF(this,uri);\r\n            }\r\n        }\r\n    }\r\n\r\npublic static void sendPDF(Context context, Uri fileUri) {\r\n        new AsyncTask&lt;Uri, Void, Void&gt;() {\r\n            @Override\r\n            protected Void doInBackground(Uri... uris) {\r\n                Uri uri = uris[0];\r\n                try {           \r\n                    URL url = new URL(&quot;http://Ipv4/upload&quot;);\r\n                    HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n                    conn.setRequestMethod(&quot;POST&quot;);\r\n\r\n                    conn.setDoInput(true);\r\n                    conn.setDoOutput(true);\r\n\r\n                    conn.setRequestProperty(&quot;Connection&quot;, &quot;Keep-Alive&quot;);\r\n                    conn.setRequestProperty(&quot;Cache-Control&quot;, &quot;no-cache&quot;);\r\n\r\n                    conn.setReadTimeout(35000);\r\n                    conn.setConnectTimeout(35000);\r\n\r\n                    // Open InputStream from Uri\r\n                    InputStream inputStream = context.getContentResolver().openInputStream(uri);\r\n\r\n                    // Write data from InputStream to output stream\r\n                    OutputStream os = conn.getOutputStream();\r\n                    byte[] buffer = new byte[4096];\r\n                    int bytesRead;\r\n                    while ((bytesRead = inputStream.read(buffer)) != -1) {\r\n                        os.write(buffer, 0, bytesRead);\r\n                    }\r\n                    os.flush();\r\n                    os.close();\r\n                    inputStream.close();\r\n\r\n                    // Process response...\r\n\r\n                    conn.disconnect();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\n                return null;\r\n            }\r\n        }.execute(fileUri);\r\n    }\r\n\r\n```\r\nThis is my server:\r\n```\r\nconst uploadDirectory = &#39;uploads&#39;;\r\n\r\n// Create the uploads directory if it doesn&#39;t exist\r\nif (!fs.existsSync(uploadDirectory)) {\r\n    fs.mkdirSync(uploadDirectory);\r\n}\r\n\r\n// Set up Multer storage configuration\r\nconst storage = multer.diskStorage({\r\n    destination: (req, file, cb) =&gt; {\r\n        cb(null, &#39;uploads/&#39;);\r\n    },\r\n    filename: (req, file, cb) =&gt; {\r\n        cb(null, file.originalname);\r\n    }\r\n});\r\n\r\nconst upload = multer({ storage });\r\n\r\n// POST route for file upload\r\napp.post(&#39;/upload&#39;, upload.single(&#39;myFile&#39;), async (req, res) =&gt; {\r\n    // File upload successful\r\n    console.log(&#39;File uploaded:&#39;, req.file);\r\n});\r\n\r\n// Start the server\r\napp.listen(3001, () =&gt; {\r\n    console.log(&#39;Server is running on port 3001&#39;);\r\n});\r\n```\r\n\r\nThe logcat after i choose file:\r\n```\r\n2023-06-17 16:21:27.807   979-2356  TrafficStats            com.example.verifycertificate        D  tagSocket(183) with statsTag=0xffffffff, statsUid=-1\r\n2023-06-17 16:21:27.813   979-1008  OpenGLRenderer          com.example.verifycertificate        E  Unable to match the desired swap behavior.\r\n2023-06-17 16:21:29.423   979-1008  EGL_emulation           com.example.verifycertificate        D  app_time_stats: avg=166.52ms min=4.56ms max=1404.14ms count=9\r\n```\r\nWhen try to get full file path ( the file path when i use uri.getPath(); is: /document/document: 100002321 ) so i try to use URI to send file. But the server doesn&#39;t resposne anything.\r\n\r\nMy problem is i dont see the file is send to the server, i dont know the file is send or not. The server should show the message in console (console.log(&#39;File uploaded:&#39;, req.file);) but i dont see anything.","title":"Problem when send pdf file from Android to nodeJS server","body":"<p>I have a button in html file when it is pressed it calls al function chooseFile() in MainActivity.java and auto send the data to the server.\nScript in html:</p>\n<pre><code>&lt;script&gt;\n    document.getElementById(&quot;chooseFile&quot;).addEventListener(&quot;click&quot;, function(event) {\n        event.preventDefault();\n\n        Android.chooseFile();\n    });\n</code></pre>\n<p>MainActivity.java</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    private RetrofitInterface retrofitInterface;\n    private Retrofit retrofit;\n    private WebView webView;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        webView = findViewById(R.id.webview);\n        webView.getSettings().setAllowContentAccess(true);\n        webView.getSettings().setAllowFileAccess(true);\n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.addJavascriptInterface(new WebAppInterface(), &quot;Android&quot;);\n        webView.loadUrl(&quot;file:///android_asset/upload.html&quot;);\n    }\npublic class WebAppInterface {\n        @JavascriptInterface\n        public void chooseFile() {\n            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\n            intent.addCategory(Intent.CATEGORY_OPENABLE);\n            intent.setType(&quot;*/*&quot;);\n            startActivityForResult(Intent.createChooser(intent, &quot;Choose File&quot;), 1);\n        }\n}\n\n@Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if (requestCode == 1 &amp;&amp; resultCode == RESULT_OK) {\n            if (data != null &amp;&amp; data.getData() != null) {\n                Uri uri = data.getData();\n                String filePath = uri.getPath();\n                sendPDF(this,uri);\n            }\n        }\n    }\n\npublic static void sendPDF(Context context, Uri fileUri) {\n        new AsyncTask&lt;Uri, Void, Void&gt;() {\n            @Override\n            protected Void doInBackground(Uri... uris) {\n                Uri uri = uris[0];\n                try {           \n                    URL url = new URL(&quot;http://Ipv4/upload&quot;);\n                    HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n                    conn.setRequestMethod(&quot;POST&quot;);\n\n                    conn.setDoInput(true);\n                    conn.setDoOutput(true);\n\n                    conn.setRequestProperty(&quot;Connection&quot;, &quot;Keep-Alive&quot;);\n                    conn.setRequestProperty(&quot;Cache-Control&quot;, &quot;no-cache&quot;);\n\n                    conn.setReadTimeout(35000);\n                    conn.setConnectTimeout(35000);\n\n                    // Open InputStream from Uri\n                    InputStream inputStream = context.getContentResolver().openInputStream(uri);\n\n                    // Write data from InputStream to output stream\n                    OutputStream os = conn.getOutputStream();\n                    byte[] buffer = new byte[4096];\n                    int bytesRead;\n                    while ((bytesRead = inputStream.read(buffer)) != -1) {\n                        os.write(buffer, 0, bytesRead);\n                    }\n                    os.flush();\n                    os.close();\n                    inputStream.close();\n\n                    // Process response...\n\n                    conn.disconnect();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n\n                return null;\n            }\n        }.execute(fileUri);\n    }\n\n</code></pre>\n<p>This is my server:</p>\n<pre><code>const uploadDirectory = 'uploads';\n\n// Create the uploads directory if it doesn't exist\nif (!fs.existsSync(uploadDirectory)) {\n    fs.mkdirSync(uploadDirectory);\n}\n\n// Set up Multer storage configuration\nconst storage = multer.diskStorage({\n    destination: (req, file, cb) =&gt; {\n        cb(null, 'uploads/');\n    },\n    filename: (req, file, cb) =&gt; {\n        cb(null, file.originalname);\n    }\n});\n\nconst upload = multer({ storage });\n\n// POST route for file upload\napp.post('/upload', upload.single('myFile'), async (req, res) =&gt; {\n    // File upload successful\n    console.log('File uploaded:', req.file);\n});\n\n// Start the server\napp.listen(3001, () =&gt; {\n    console.log('Server is running on port 3001');\n});\n</code></pre>\n<p>The logcat after i choose file:</p>\n<pre><code>2023-06-17 16:21:27.807   979-2356  TrafficStats            com.example.verifycertificate        D  tagSocket(183) with statsTag=0xffffffff, statsUid=-1\n2023-06-17 16:21:27.813   979-1008  OpenGLRenderer          com.example.verifycertificate        E  Unable to match the desired swap behavior.\n2023-06-17 16:21:29.423   979-1008  EGL_emulation           com.example.verifycertificate        D  app_time_stats: avg=166.52ms min=4.56ms max=1404.14ms count=9\n</code></pre>\n<p>When try to get full file path ( the file path when i use uri.getPath(); is: /document/document: 100002321 ) so i try to use URI to send file. But the server doesn't resposne anything.</p>\n<p>My problem is i dont see the file is send to the server, i dont know the file is send or not. The server should show the message in console (console.log('File uploaded:', req.file);) but i dont see anything.</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":25879779,"reputation":11,"user_id":19609075,"display_name":"Shaik Shahid Afridi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686994847,"creation_date":1686994847,"question_id":76495613,"body_markdown":"I am trying to make a starter Springboot application and have been scratching my head over this, I will provide the code and structure and explain the problem below:\r\n\r\nmy applications.properties file\r\n```\r\nspring.mvc.view.prefix=/WEB-INF/views/\r\nspring.mvc.view.suffix=.jsp\r\n```\r\nmy registrationController.java\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\n@Controller\r\npublic class RegistrationController {\r\n\t\r\n\t@GetMapping(&quot;/registration&quot;)\r\n\tpublic String registerMe() {\r\n\t\treturn &quot;register&quot;;\r\n\t}\r\n\r\n}\r\n```\r\nand register.jsp\r\n\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n    pageEncoding=&quot;UTF-8&quot;%&gt;\r\n    \r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n&lt;title&gt;Registration&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;h1&gt;Register&lt;/h1&gt;\r\n    &lt;form action=&quot;userDetails&quot;&gt;\r\n    UserName : &lt;input id=&quot;name&quot; name=&quot;name&quot;/&gt;\r\n    Email ID : &lt;input id=&quot;email&quot; name=&quot;email&quot;/&gt;\r\n    Password : &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot;/&gt;\r\n    Mobile Number : &lt;input id=&quot;number&quot; name=&quot;number&quot;/&gt;\r\n    &lt;input type=&quot;submit&quot; value=&quot;Register Me&quot;/&gt;\r\n       \r\n    \r\n    \r\n    &lt;/form&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n```\r\nmy pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.2&lt;/version&gt; &lt;!-- Specify the version you want to use --&gt;\r\n  \t\t    &lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n\t &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\n\r\n[![My folder structure](https://i.stack.imgur.com/0bO5m.png)](https://i.stack.imgur.com/0bO5m.png)\r\n\r\n\r\nWhen I try to run with this with the default login and the console password I am getting white label error `Whitelabel Error Page\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.` And when I try with @RestController instead of @Controller I am able to print &quot;register&quot; as a string but still not as a JSP file, which is what I want to achieve. Any suggestions?","title":"Spring boot view is not accessing register.jsp file instead it is printing register string on page","body":"<p>I am trying to make a starter Springboot application and have been scratching my head over this, I will provide the code and structure and explain the problem below:</p>\n<p>my applications.properties file</p>\n<pre><code>spring.mvc.view.prefix=/WEB-INF/views/\nspring.mvc.view.suffix=.jsp\n</code></pre>\n<p>my registrationController.java</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\n\n@Controller\npublic class RegistrationController {\n    \n    @GetMapping(&quot;/registration&quot;)\n    public String registerMe() {\n        return &quot;register&quot;;\n    }\n\n}\n</code></pre>\n<p>and register.jsp</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n    \n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;Registration&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Register&lt;/h1&gt;\n    &lt;form action=&quot;userDetails&quot;&gt;\n    UserName : &lt;input id=&quot;name&quot; name=&quot;name&quot;/&gt;\n    Email ID : &lt;input id=&quot;email&quot; name=&quot;email&quot;/&gt;\n    Password : &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot;/&gt;\n    Mobile Number : &lt;input id=&quot;number&quot; name=&quot;number&quot;/&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Register Me&quot;/&gt;\n       \n    \n    \n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n<p>my pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt; &lt;!-- Specify the version you want to use --&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n     &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n&lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/0bO5m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0bO5m.png\" alt=\"My folder structure\" /></a></p>\n<p>When I try to run with this with the default login and the console password I am getting white label error <code>Whitelabel Error Page This application has no explicit mapping for /error, so you are seeing this as a fallback.</code> And when I try with @RestController instead of @Controller I am able to print &quot;register&quot; as a string but still not as a JSP file, which is what I want to achieve. Any suggestions?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686992691,"post_id":76494972,"comment_id":134877103,"body_markdown":"Please show your code...","body":"Please show your code..."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686993192,"post_id":76494972,"comment_id":134877139,"body_markdown":"BTW: I would suggest to upgrade your surefire plugin version as well as the maven-compiler-plugin version to most recent versions and also use JDK21 ...Also use most recent version of Maven...","body":"BTW: I would suggest to upgrade your surefire plugin version as well as the maven-compiler-plugin version to most recent versions and also use JDK21 ...Also use most recent version of Maven..."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686993753,"post_id":76494972,"comment_id":134877179,"body_markdown":"The step to get a runnable jar you have to use maven-shade-plugin but I would say that&#39;s the next step. First get it compiled etc.","body":"The step to get a runnable jar you have to use maven-shade-plugin but I would say that&#39;s the next step. First get it compiled etc."}],"answers":[{"tags":[],"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686994586,"creation_date":1686994586,"answer_id":76495598,"question_id":76494972,"body_markdown":"The configuration for surefire/failsafe/compiler plugin:\r\n\r\nUsing the [following versions of maven plugins][1]:\r\n\r\n* maven-compiler-plugin version 3.11.0\r\n* maven-surefire-plugin version 3.1.2\r\n* maven-failsafe-plugin version 3.1.2\r\n\r\n\r\n&lt;!-- language:language-xml --&gt;\r\n\r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.release&gt;21&lt;/maven.compiler.release&gt;\r\n      &lt;/properties&gt;\r\n      ..\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;argLine&gt;\r\n                --add-modules jdk.incubator.vector\r\n              &lt;/argLine&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;argLine&gt;\r\n                --add-modules jdk.incubator.vector\r\n              &lt;/argLine&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;compilerArgs&gt;\r\n                &lt;arg&gt;--add-modules&lt;/arg&gt;\r\n                &lt;arg&gt;jdk.incubator.vector&lt;/arg&gt;\r\n              &lt;/compilerArgs&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n\r\nAn example with Vector API (running on JDK 21 ea build):\r\n\r\n&lt;!-- language:language-java --&gt;\r\n\r\n    package com.soebes.jdk21.incubator;\r\n    \r\n    import jdk.incubator.vector.FloatVector;\r\n    import jdk.incubator.vector.VectorSpecies;\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    class VectorTest {\r\n    \r\n      static final VectorSpecies&lt;Float&gt; SPECIES = FloatVector.SPECIES_256;\r\n    \r\n      void vectorComputation(float[] a, float[] b, float[] c) {\r\n    \r\n        for (int i = 0; i &lt; a.length; i += SPECIES.length()) {\r\n          var m = SPECIES.indexInRange(i, a.length);\r\n          // FloatVector va, vb, vc;\r\n          var va = FloatVector.fromArray(SPECIES, a, i, m);\r\n          var vb = FloatVector.fromArray(SPECIES, b, i, m);\r\n          var vc = va.mul(va).\r\n              add(vb.mul(vb)).\r\n              neg();\r\n          vc.intoArray(c, i, m);\r\n        }\r\n      }\r\n    \r\n      @Test\r\n      void name() {\r\n        float[] a = {1.0f, 2.0f, 3.0f, 4.0f};\r\n        float[] b = {1.0f, 2.0f, 3.0f, 4.0f};\r\n        float[] c = {1.0f, 2.0f, 3.0f, 4.0f};\r\n    \r\n        vectorComputation(a, b, c);\r\n      }\r\n    }\r\n\r\nYou can find a full working example here: https://github.com/khmarbaise/jdk21 and in that class: https://github.com/khmarbaise/jdk21/blob/main/src/test/java/com/soebes/jdk21/incubator/VectorTest.java \r\nBut you have to install most recent JDK 21 ea build. \r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/","title":"Issues using jdk.incubator.vector in a Maven Project","body":"<p>The configuration for surefire/failsafe/compiler plugin:</p>\n<p>Using the <a href=\"https://maven.apache.org/plugins/\" rel=\"nofollow noreferrer\">following versions of maven plugins</a>:</p>\n<ul>\n<li>maven-compiler-plugin version 3.11.0</li>\n<li>maven-surefire-plugin version 3.1.2</li>\n<li>maven-failsafe-plugin version 3.1.2</li>\n</ul>\n\n<pre><code>  &lt;properties&gt;\n    &lt;maven.compiler.release&gt;21&lt;/maven.compiler.release&gt;\n  &lt;/properties&gt;\n  ..\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;argLine&gt;\n            --add-modules jdk.incubator.vector\n          &lt;/argLine&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;argLine&gt;\n            --add-modules jdk.incubator.vector\n          &lt;/argLine&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;compilerArgs&gt;\n            &lt;arg&gt;--add-modules&lt;/arg&gt;\n            &lt;arg&gt;jdk.incubator.vector&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n<p>An example with Vector API (running on JDK 21 ea build):</p>\n\n<pre><code>package com.soebes.jdk21.incubator;\n\nimport jdk.incubator.vector.FloatVector;\nimport jdk.incubator.vector.VectorSpecies;\nimport org.junit.jupiter.api.Test;\n\nclass VectorTest {\n\n  static final VectorSpecies&lt;Float&gt; SPECIES = FloatVector.SPECIES_256;\n\n  void vectorComputation(float[] a, float[] b, float[] c) {\n\n    for (int i = 0; i &lt; a.length; i += SPECIES.length()) {\n      var m = SPECIES.indexInRange(i, a.length);\n      // FloatVector va, vb, vc;\n      var va = FloatVector.fromArray(SPECIES, a, i, m);\n      var vb = FloatVector.fromArray(SPECIES, b, i, m);\n      var vc = va.mul(va).\n          add(vb.mul(vb)).\n          neg();\n      vc.intoArray(c, i, m);\n    }\n  }\n\n  @Test\n  void name() {\n    float[] a = {1.0f, 2.0f, 3.0f, 4.0f};\n    float[] b = {1.0f, 2.0f, 3.0f, 4.0f};\n    float[] c = {1.0f, 2.0f, 3.0f, 4.0f};\n\n    vectorComputation(a, b, c);\n  }\n}\n</code></pre>\n<p>You can find a full working example here: <a href=\"https://github.com/khmarbaise/jdk21\" rel=\"nofollow noreferrer\">https://github.com/khmarbaise/jdk21</a> and in that class: <a href=\"https://github.com/khmarbaise/jdk21/blob/main/src/test/java/com/soebes/jdk21/incubator/VectorTest.java\" rel=\"nofollow noreferrer\">https://github.com/khmarbaise/jdk21/blob/main/src/test/java/com/soebes/jdk21/incubator/VectorTest.java</a>\nBut you have to install most recent JDK 21 ea build.</p>\n"}],"owner":{"account_id":19513003,"reputation":53,"user_id":14276536,"display_name":"need_help_ples"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686994586,"creation_date":1686982678,"question_id":76494972,"body_markdown":"I am trying to figure out how to use the `jdk.incubator.vector` inside my Maven Project, but it always return these errors:\r\n\r\n```\r\nCaused by: java.lang.Error: Unresolved compilation problems: \r\n    The import jdk.incubator cannot be resolved\r\n    The import jdk.incubator cannot be resolved\r\n    VectorSpecies cannot be resolved to a type\r\n    FloatVector cannot be resolved to a variable\r\n    VectorSpecies cannot be resolved to a type\r\n    DoubleVector cannot be resolved to a type\r\n    DoubleVector cannot be resolved\r\n    VectorSpecies cannot be resolved to a type\r\n    .....\r\n\r\n```\r\n\r\nThis is my `pom.xml` file:\r\n```xml\r\n&lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;!-- Use JDK 17, instead of the default one (JDK 1.5) --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;17&lt;/release&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;--add-modules&lt;/arg&gt;\r\n                        &lt;arg&gt;jdk.incubator.vector&lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;!-- Testing Settings --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.22.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;systemPropertyVariables&gt;\r\n                        &lt;org.vanilladb.core.config.file&gt;${project.build.directory}/test-classes/org/vanilladb/core/vanilladb.properties&lt;/org.vanilladb.core.config.file&gt;\r\n                        &lt;java.util.logging.config.file&gt;${project.build.directory}/test-classes/java/util/logging/logging.properties&lt;/java.util.logging.config.file&gt;\r\n                    &lt;/systemPropertyVariables&gt;\r\n                    &lt;forkCount&gt;1&lt;/forkCount&gt;\r\n                    &lt;argLine&gt;--add-modules&lt;/argLine&gt;\r\n                    &lt;argLine&gt;jdk.incubator.vector&lt;/argLine&gt;\r\n                    &lt;includes&gt;\r\n                        &lt;include&gt;org/vanilladb/core/FullTestSuite.java&lt;/include&gt;\r\n                    &lt;/includes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n....\r\n```\r\nI would then compile the code into a runnable jar file, and run it.\r\nAnd my run argument would look like the following:\r\n```\r\njava -jar --add-modules=jdk.incubator.vector -Djava.util.logging.config.file=logging.properties -Dorg.vanilladb.bench.config.file=vanillabench.properties -Dorg.vanilladb.core.config.file=vanilladb.properties server.jar baseline_DB\r\n```\r\n\r\nI&#39;m very new to Maven, can someone kindly help to resolve the problem?\r\nThanks in advance.","title":"Issues using jdk.incubator.vector in a Maven Project","body":"<p>I am trying to figure out how to use the <code>jdk.incubator.vector</code> inside my Maven Project, but it always return these errors:</p>\n<pre><code>Caused by: java.lang.Error: Unresolved compilation problems: \n    The import jdk.incubator cannot be resolved\n    The import jdk.incubator cannot be resolved\n    VectorSpecies cannot be resolved to a type\n    FloatVector cannot be resolved to a variable\n    VectorSpecies cannot be resolved to a type\n    DoubleVector cannot be resolved to a type\n    DoubleVector cannot be resolved\n    VectorSpecies cannot be resolved to a type\n    .....\n\n</code></pre>\n<p>This is my <code>pom.xml</code> file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;!-- Use JDK 17, instead of the default one (JDK 1.5) --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;17&lt;/release&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;--add-modules&lt;/arg&gt;\n                        &lt;arg&gt;jdk.incubator.vector&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;!-- Testing Settings --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.22.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;systemPropertyVariables&gt;\n                        &lt;org.vanilladb.core.config.file&gt;${project.build.directory}/test-classes/org/vanilladb/core/vanilladb.properties&lt;/org.vanilladb.core.config.file&gt;\n                        &lt;java.util.logging.config.file&gt;${project.build.directory}/test-classes/java/util/logging/logging.properties&lt;/java.util.logging.config.file&gt;\n                    &lt;/systemPropertyVariables&gt;\n                    &lt;forkCount&gt;1&lt;/forkCount&gt;\n                    &lt;argLine&gt;--add-modules&lt;/argLine&gt;\n                    &lt;argLine&gt;jdk.incubator.vector&lt;/argLine&gt;\n                    &lt;includes&gt;\n                        &lt;include&gt;org/vanilladb/core/FullTestSuite.java&lt;/include&gt;\n                    &lt;/includes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n....\n</code></pre>\n<p>I would then compile the code into a runnable jar file, and run it.\nAnd my run argument would look like the following:</p>\n<pre><code>java -jar --add-modules=jdk.incubator.vector -Djava.util.logging.config.file=logging.properties -Dorg.vanilladb.bench.config.file=vanillabench.properties -Dorg.vanilladb.core.config.file=vanilladb.properties server.jar baseline_DB\n</code></pre>\n<p>I'm very new to Maven, can someone kindly help to resolve the problem?\nThanks in advance.</p>\n"},{"tags":["java","mongodb","ssl","synchronization"],"comments":[{"owner":{"account_id":3690946,"reputation":1,"user_id":21999157,"display_name":"krishna murti pathak"},"score":0,"creation_date":1686994301,"post_id":76495576,"comment_id":134877228,"body_markdown":"Please suggest solutions, it will be of great help.","body":"Please suggest solutions, it will be of great help."},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1686995972,"post_id":76495576,"comment_id":134877404,"body_markdown":"I think `mongodb+srv` is used only when you connect to MongoDB Atlas (MongoDB Cloud service) but you connect to your local host","body":"I think <code>mongodb+srv</code> is used only when you connect to MongoDB Atlas (MongoDB Cloud service) but you connect to your local host"}],"owner":{"account_id":3690946,"reputation":1,"user_id":21999157,"display_name":"krishna murti pathak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686994223,"creation_date":1686994223,"question_id":76495576,"body_markdown":"I am using `mongoclient` in my plain Java application project using Gradle with the following dependencies:\r\n\r\n```groovy\r\ndependencies {\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.9.2&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.9.2&#39;\r\n    compileOnly &#39;org.projectlombok:lombok:1.18.26&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok:1.18.26&#39;\r\n    implementation group: &#39;org.mongodb&#39;, name: &#39;mongodb-driver-sync&#39;, version: &#39;4.9.0&#39;\r\n    implementation group: &#39;org.mongodb&#39;, name: &#39;mongodb-driver-reactivestreams&#39;, version: &#39;4.9.1&#39;\r\n    implementation(&#39;com.fasterxml.jackson.core:jackson-databind:2.14.2&#39;)\r\n    implementation group: &#39;org.modelmapper&#39;, name: &#39;modelmapper&#39;, version: &#39;0.7.5&#39;\r\n}\r\n```\r\n\r\nWhen I use the standard connection string format, the application is able to connect without any problems. However, when I try to use a DNS Seed list connection string `(mongodb+srv)` because the production URL is in that format and I do not have the standard URL, I get an error:\r\n\r\n```\r\ncom.mongodb.MongoTimeoutException: Timed out after 30000 ms while waiting to connect. Client view of cluster state is {type=UNKNOWN, servers=[{address=127.0.0.1:27017, type=UNKNOWN, state=CONNECTING, exception={com.mongodb.MongoSocketWriteException: Exception sending message}, caused by {javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake}, caused by {java.io.EOFException: SSL peer shut down incorrectly}}]\r\n```\r\n\r\nThe code snippet that is causing the problem is:\r\n\r\n```java\r\nMongoClientSettings settings = MongoClientSettings.builder()\r\n                    .applyToSslSettings(builder -&gt; {\r\n                        builder.enabled(true);\r\n                        builder.invalidHostNameAllowed(true);\r\n                    })\r\n                    .applyToSocketSettings(builder -&gt; {\r\n                        builder.connectTimeout(6000, TimeUnit.SECONDS);\r\n                        builder.readTimeout(6000, TimeUnit.SECONDS);\r\n                    })\r\n                    .build();\r\ncom.mongodb.client.MongoClient blockingMongoClient = com.mongodb.client.MongoClients.create(settings);\r\n            com.mongodb.client.MongoDatabase db = blockingMongoClient.getDatabase(Objects.requireNonNull(connectionString.getDatabase()));\r\n            com.mongodb.client.MongoCollection&lt;Document&gt; allUsers = db.getCollection(&quot;name of collection&quot;);\r\n            LOGGER.info(&quot;total number of : &quot; +allUsers.countDocuments());\r\n```\r\n\r\nThe connection string that I am passing in the above code looks like:\r\n\r\n```\r\nmongodb+srv://username:password@host/dbname?retryWrites=true&amp;w=majority\r\n```\r\n\r\nBelow is my SSL Handshake report when I debug:\r\n\r\n```\r\n&quot;ClientHello&quot;: {\r\n  &quot;client version&quot;      : &quot;TLSv1.1&quot;,\r\n  &quot;random&quot;              : &quot;32 36 C7 96 66 7C 61 64 DA A1 5B 2E F3 A2 EF B5 D8 B9 A4 6A 5C 2F 9E 3A 24 0D 5A 22 EA 2E 95 45&quot;,\r\n  &quot;session id&quot;          : &quot;&quot;,\r\n  &quot;cipher suites&quot;       : &quot;[TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\r\n  &quot;compression methods&quot; : &quot;00&quot;,\r\n  &quot;extensions&quot;          : [\r\n    &quot;server_name (0)&quot;: {\r\n      type=host_name (0), value=localhost\r\n    },\r\n    &quot;status_request (5)&quot;: {\r\n      &quot;certificate status type&quot;: ocsp\r\n      &quot;OCSP status request&quot;: {\r\n        &quot;responder_id&quot;: &lt;empty&gt;\r\n        &quot;request extensions&quot;: {\r\n          &lt;empty&gt;\r\n        }\r\n      }\r\n    },\r\n    &quot;supported_groups (10)&quot;: {\r\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\r\n    },\r\n    &quot;ec_point_formats (11)&quot;: {\r\n      &quot;formats&quot;: [uncompressed]\r\n    },\r\n    &quot;status_request_v2 (17)&quot;: {\r\n      &quot;cert status request&quot;: {\r\n        &quot;certificate status type&quot;: ocsp_multi\r\n        &quot;OCSP status request&quot;: {\r\n          &quot;responder_id&quot;: &lt;empty&gt;\r\n          &quot;request extensions&quot;: {\r\n            &lt;empty&gt;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    &quot;extended_master_secret (23)&quot;: {\r\n      &lt;empty&gt;\r\n    },\r\n    &quot;supported_versions (43)&quot;: {\r\n      &quot;versions&quot;: [TLSv1.1]\r\n    }\r\n  ]\r\n}\r\n)\r\njavax.net.ssl|DEBUG|11|cluster-ClusterId{value=&#39;648d7ae45252df58e9fd0c8d&#39;, description=&#39;null&#39;}-127.0.0.1:27017|2023-06-17 14:51:08.694 IST|ClientHello.java:642|Produced ClientHello handshake message (\r\n&quot;ClientHello&quot;: {\r\n  &quot;client version&quot;      : &quot;TLSv1.1&quot;,\r\n  &quot;random&quot;              : &quot;5D 3A 7F C2 75 40 D3 7F EA 6F 14 DD 0B 96 DA 5D E4 8E C0 1E AA 69 24 D3 BE 5C 23 FE B9 0D CF D7&quot;,\r\n  &quot;session id&quot;          : &quot;&quot;,\r\n  &quot;cipher suites&quot;       : &quot;[TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\r\n  &quot;compression methods&quot; : &quot;00&quot;,\r\n  &quot;extensions&quot;          : [\r\n    &quot;server_name (0)&quot;: {\r\n      type=host_name (0), value=localhost\r\n    },\r\n    &quot;status_request (5)&quot;: {\r\n      &quot;certificate status type&quot;: ocsp\r\n      &quot;OCSP status request&quot;: {\r\n        &quot;responder_id&quot;: &lt;empty&gt;\r\n        &quot;request extensions&quot;: {\r\n          &lt;empty&gt;\r\n        }\r\n      }\r\n    },\r\n    &quot;supported_groups (10)&quot;: {\r\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\r\n    },\r\n    &quot;ec_point_formats (11)&quot;: {\r\n      &quot;formats&quot;: [uncompressed]\r\n    },\r\n    &quot;status_request_v2 (17)&quot;: {\r\n      &quot;cert status request&quot;: {\r\n        &quot;certificate status type&quot;: ocsp_multi\r\n        &quot;OCSP status request&quot;: {\r\n          &quot;responder_id&quot;: &lt;empty&gt;\r\n          &quot;request extensions&quot;: {\r\n            &lt;empty&gt;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    &quot;extended_master_secret (23)&quot;: {\r\n      &lt;empty&gt;\r\n    },\r\n    &quot;supported_versions (43)&quot;: {\r\n      &quot;versions&quot;: [TLSv1.1]\r\n    }\r\n  ]\r\n}\r\n)\r\njavax.net.ssl|ERROR|11|cluster-ClusterId{value=&#39;648d7ae45252df58e9fd0c8d&#39;, description=&#39;null&#39;}-127.0.0.1:27017|2023-06-17 14:51:08.696 IST|TransportContext.java:345|Fatal (HANDSHAKE_FAILURE): Couldn&#39;t kickstart handshaking (\r\n&quot;throwable&quot; : {\r\n  javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.handleEOF(SSLSocketImpl.java:1696)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1514)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1416)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:921)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1291)\r\n  \tat com.mongodb.internal.connection.SocketStream.write(SocketStream.java:102)\r\n  \tat com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:577)\r\n  \tat com.mongodb.internal.connection.InternalStreamConnection.sendCommandMessage(InternalStreamConnection.java:411)\r\n  \tat com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:357)\r\n  \tat com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:102)\r\n  \tat com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:49)\r\n  \tat com.mongodb.internal.connection.InternalStreamConnectionInitializer.initializeConnectionDescription(InternalStreamConnectionInitializer.java:129)\r\n  \tat com.mongodb.internal.connection.InternalStreamConnectionInitializer.startHandshake(InternalStreamConnectionInitializer.java:77)\r\n  \tat com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:206)\r\n  \tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:199)\r\n  \tat com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:159)\r\n  \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n  Caused by: java.io.EOFException: SSL peer shut down incorrectly\r\n  \tat java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:483)\r\n  \tat java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:472)\r\n  \tat java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:160)\r\n  \tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1506)\r\n  \t... 16 more}\r\n\r\n)\r\n\r\n```","title":"MongoClient connection from Java is throwing SSL Handshake exception when using DNS seed list connection format","body":"<p>I am using <code>mongoclient</code> in my plain Java application project using Gradle with the following dependencies:</p>\n<pre><code>dependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.9.2'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.9.2'\n    compileOnly 'org.projectlombok:lombok:1.18.26'\n    annotationProcessor 'org.projectlombok:lombok:1.18.26'\n    implementation group: 'org.mongodb', name: 'mongodb-driver-sync', version: '4.9.0'\n    implementation group: 'org.mongodb', name: 'mongodb-driver-reactivestreams', version: '4.9.1'\n    implementation('com.fasterxml.jackson.core:jackson-databind:2.14.2')\n    implementation group: 'org.modelmapper', name: 'modelmapper', version: '0.7.5'\n}\n</code></pre>\n<p>When I use the standard connection string format, the application is able to connect without any problems. However, when I try to use a DNS Seed list connection string <code>(mongodb+srv)</code> because the production URL is in that format and I do not have the standard URL, I get an error:</p>\n<pre><code>com.mongodb.MongoTimeoutException: Timed out after 30000 ms while waiting to connect. Client view of cluster state is {type=UNKNOWN, servers=[{address=127.0.0.1:27017, type=UNKNOWN, state=CONNECTING, exception={com.mongodb.MongoSocketWriteException: Exception sending message}, caused by {javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake}, caused by {java.io.EOFException: SSL peer shut down incorrectly}}]\n</code></pre>\n<p>The code snippet that is causing the problem is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MongoClientSettings settings = MongoClientSettings.builder()\n                    .applyToSslSettings(builder -&gt; {\n                        builder.enabled(true);\n                        builder.invalidHostNameAllowed(true);\n                    })\n                    .applyToSocketSettings(builder -&gt; {\n                        builder.connectTimeout(6000, TimeUnit.SECONDS);\n                        builder.readTimeout(6000, TimeUnit.SECONDS);\n                    })\n                    .build();\ncom.mongodb.client.MongoClient blockingMongoClient = com.mongodb.client.MongoClients.create(settings);\n            com.mongodb.client.MongoDatabase db = blockingMongoClient.getDatabase(Objects.requireNonNull(connectionString.getDatabase()));\n            com.mongodb.client.MongoCollection&lt;Document&gt; allUsers = db.getCollection(&quot;name of collection&quot;);\n            LOGGER.info(&quot;total number of : &quot; +allUsers.countDocuments());\n</code></pre>\n<p>The connection string that I am passing in the above code looks like:</p>\n<pre><code>mongodb+srv://username:password@host/dbname?retryWrites=true&amp;w=majority\n</code></pre>\n<p>Below is my SSL Handshake report when I debug:</p>\n<pre><code>&quot;ClientHello&quot;: {\n  &quot;client version&quot;      : &quot;TLSv1.1&quot;,\n  &quot;random&quot;              : &quot;32 36 C7 96 66 7C 61 64 DA A1 5B 2E F3 A2 EF B5 D8 B9 A4 6A 5C 2F 9E 3A 24 0D 5A 22 EA 2E 95 45&quot;,\n  &quot;session id&quot;          : &quot;&quot;,\n  &quot;cipher suites&quot;       : &quot;[TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\n  &quot;compression methods&quot; : &quot;00&quot;,\n  &quot;extensions&quot;          : [\n    &quot;server_name (0)&quot;: {\n      type=host_name (0), value=localhost\n    },\n    &quot;status_request (5)&quot;: {\n      &quot;certificate status type&quot;: ocsp\n      &quot;OCSP status request&quot;: {\n        &quot;responder_id&quot;: &lt;empty&gt;\n        &quot;request extensions&quot;: {\n          &lt;empty&gt;\n        }\n      }\n    },\n    &quot;supported_groups (10)&quot;: {\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\n    },\n    &quot;ec_point_formats (11)&quot;: {\n      &quot;formats&quot;: [uncompressed]\n    },\n    &quot;status_request_v2 (17)&quot;: {\n      &quot;cert status request&quot;: {\n        &quot;certificate status type&quot;: ocsp_multi\n        &quot;OCSP status request&quot;: {\n          &quot;responder_id&quot;: &lt;empty&gt;\n          &quot;request extensions&quot;: {\n            &lt;empty&gt;\n          }\n        }\n      }\n    },\n    &quot;extended_master_secret (23)&quot;: {\n      &lt;empty&gt;\n    },\n    &quot;supported_versions (43)&quot;: {\n      &quot;versions&quot;: [TLSv1.1]\n    }\n  ]\n}\n)\njavax.net.ssl|DEBUG|11|cluster-ClusterId{value='648d7ae45252df58e9fd0c8d', description='null'}-127.0.0.1:27017|2023-06-17 14:51:08.694 IST|ClientHello.java:642|Produced ClientHello handshake message (\n&quot;ClientHello&quot;: {\n  &quot;client version&quot;      : &quot;TLSv1.1&quot;,\n  &quot;random&quot;              : &quot;5D 3A 7F C2 75 40 D3 7F EA 6F 14 DD 0B 96 DA 5D E4 8E C0 1E AA 69 24 D3 BE 5C 23 FE B9 0D CF D7&quot;,\n  &quot;session id&quot;          : &quot;&quot;,\n  &quot;cipher suites&quot;       : &quot;[TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\n  &quot;compression methods&quot; : &quot;00&quot;,\n  &quot;extensions&quot;          : [\n    &quot;server_name (0)&quot;: {\n      type=host_name (0), value=localhost\n    },\n    &quot;status_request (5)&quot;: {\n      &quot;certificate status type&quot;: ocsp\n      &quot;OCSP status request&quot;: {\n        &quot;responder_id&quot;: &lt;empty&gt;\n        &quot;request extensions&quot;: {\n          &lt;empty&gt;\n        }\n      }\n    },\n    &quot;supported_groups (10)&quot;: {\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\n    },\n    &quot;ec_point_formats (11)&quot;: {\n      &quot;formats&quot;: [uncompressed]\n    },\n    &quot;status_request_v2 (17)&quot;: {\n      &quot;cert status request&quot;: {\n        &quot;certificate status type&quot;: ocsp_multi\n        &quot;OCSP status request&quot;: {\n          &quot;responder_id&quot;: &lt;empty&gt;\n          &quot;request extensions&quot;: {\n            &lt;empty&gt;\n          }\n        }\n      }\n    },\n    &quot;extended_master_secret (23)&quot;: {\n      &lt;empty&gt;\n    },\n    &quot;supported_versions (43)&quot;: {\n      &quot;versions&quot;: [TLSv1.1]\n    }\n  ]\n}\n)\njavax.net.ssl|ERROR|11|cluster-ClusterId{value='648d7ae45252df58e9fd0c8d', description='null'}-127.0.0.1:27017|2023-06-17 14:51:08.696 IST|TransportContext.java:345|Fatal (HANDSHAKE_FAILURE): Couldn't kickstart handshaking (\n&quot;throwable&quot; : {\n  javax.net.ssl.SSLHandshakeException: Remote host terminated the handshake\n    at java.base/sun.security.ssl.SSLSocketImpl.handleEOF(SSLSocketImpl.java:1696)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1514)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1416)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\n    at java.base/sun.security.ssl.SSLSocketImpl.ensureNegotiated(SSLSocketImpl.java:921)\n    at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.write(SSLSocketImpl.java:1291)\n    at com.mongodb.internal.connection.SocketStream.write(SocketStream.java:102)\n    at com.mongodb.internal.connection.InternalStreamConnection.sendMessage(InternalStreamConnection.java:577)\n    at com.mongodb.internal.connection.InternalStreamConnection.sendCommandMessage(InternalStreamConnection.java:411)\n    at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:357)\n    at com.mongodb.internal.connection.CommandHelper.sendAndReceive(CommandHelper.java:102)\n    at com.mongodb.internal.connection.CommandHelper.executeCommand(CommandHelper.java:49)\n    at com.mongodb.internal.connection.InternalStreamConnectionInitializer.initializeConnectionDescription(InternalStreamConnectionInitializer.java:129)\n    at com.mongodb.internal.connection.InternalStreamConnectionInitializer.startHandshake(InternalStreamConnectionInitializer.java:77)\n    at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:206)\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:199)\n    at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:159)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n  Caused by: java.io.EOFException: SSL peer shut down incorrectly\n    at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:483)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:472)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:160)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1506)\n    ... 16 more}\n\n)\n\n</code></pre>\n"},{"tags":["java","jpa","playframework","hql"],"comments":[{"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"score":0,"creation_date":1317578364,"post_id":7626894,"comment_id":9262150,"body_markdown":"or just use an *indexed* list, so the original order is retained. &quot;ordered&quot; lists are prone to problems and break transparent persistence","body":"or just use an <i>indexed</i> list, so the original order is retained. &quot;ordered&quot; lists are prone to problems and break transparent persistence"}],"answers":[{"tags":[],"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1317565364,"creation_date":1317565364,"answer_id":7626921,"question_id":7626894,"body_markdown":"If there&#39;s no &quot;natural&quot; order then it&#39;s likely you&#39;ll need to order manually; you *might* be able to rely on DB ordering depending on the DB and query construction, but IMO that&#39;s risky. \r\n\r\nOn the plus side, unless you have a huge number of objects, the overhead is trivial.","title":"JPQL/HQL - Is it possible to specify the order, by providing a list of IDs?","body":"<p>If there's no \"natural\" order then it's likely you'll need to order manually; you <em>might</em> be able to rely on DB ordering depending on the DB and query construction, but IMO that's risky. </p>\n\n<p>On the plus side, unless you have a huge number of objects, the overhead is trivial.</p>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1317565392,"creation_date":1317565392,"answer_id":7626924,"question_id":7626894,"body_markdown":"This particular case would be easily handled using ORDER BY id DESC, but I&#39;m guessing that it&#39;s only a poorly chosen example.\r\n\r\nI&#39;d say it&#39;s not possible unless you can find a way to take advantage of SQL to do it.\r\n\r\nYou should have a persistence layer to map objects from a database into Java (you should not be passing ResultSet out of the persistence layer).  It&#39;d be trivial to do it there.\r\n","title":"JPQL/HQL - Is it possible to specify the order, by providing a list of IDs?","body":"<p>This particular case would be easily handled using ORDER BY id DESC, but I'm guessing that it's only a poorly chosen example.</p>\n\n<p>I'd say it's not possible unless you can find a way to take advantage of SQL to do it.</p>\n\n<p>You should have a persistence layer to map objects from a database into Java (you should not be passing ResultSet out of the persistence layer).  It'd be trivial to do it there.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1317565514,"creation_date":1317565514,"answer_id":7626938,"question_id":7626894,"body_markdown":"I think you&#39;ll have to sort the items in Java:\r\n\r\n    public void sortItems(List&lt;Item&gt; items, final List&lt;Long&gt; ids) {\r\n        Collections.sort(items, new Comparator&lt;Item&gt;() {\r\n            @Override\r\n            public int compare(Item i1, Item i2) {\r\n                int index1 = ids.indexOf(i1.getId());\r\n                int index2 = ids.indexOf(i2.getId());\r\n                return Integer.valueOf(index1).compareTo(Integer.valueOf(index2));\r\n            }\r\n        });\r\n    }","title":"JPQL/HQL - Is it possible to specify the order, by providing a list of IDs?","body":"<p>I think you'll have to sort the items in Java:</p>\n\n<pre><code>public void sortItems(List&lt;Item&gt; items, final List&lt;Long&gt; ids) {\n    Collections.sort(items, new Comparator&lt;Item&gt;() {\n        @Override\n        public int compare(Item i1, Item i2) {\n            int index1 = ids.indexOf(i1.getId());\n            int index2 = ids.indexOf(i2.getId());\n            return Integer.valueOf(index1).compareTo(Integer.valueOf(index2));\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10098447,"reputation":171,"user_id":7463077,"display_name":"Jaap Reitsma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579609032,"creation_date":1579609032,"answer_id":59840975,"question_id":7626894,"body_markdown":"Even old questions are asked much later again. I solved this using a mapping:\r\n```\r\n@Override\r\npublic List&lt;MyItem&gt; fetch(List&lt;Long&gt; ids) {\r\n\t// Create an identity map using the generic fetch. Rows are returned, but not necessarily in the same order\r\n\tMap&lt;Long, MyItem&gt; resultMap = super.fetch(ids).stream().collect(Collectors.toMap(MyItem::getId, Function.identity()));\r\n\t// Now return the rows in the same order as the ids, using the map.\r\n\treturn ids.stream().map(id -&gt; resultMap.get(id)).collect(Collectors.toList());\r\n}\r\n```\r\n","title":"JPQL/HQL - Is it possible to specify the order, by providing a list of IDs?","body":"<p>Even old questions are asked much later again. I solved this using a mapping:</p>\n\n<pre><code>@Override\npublic List&lt;MyItem&gt; fetch(List&lt;Long&gt; ids) {\n    // Create an identity map using the generic fetch. Rows are returned, but not necessarily in the same order\n    Map&lt;Long, MyItem&gt; resultMap = super.fetch(ids).stream().collect(Collectors.toMap(MyItem::getId, Function.identity()));\n    // Now return the rows in the same order as the ids, using the map.\n    return ids.stream().map(id -&gt; resultMap.get(id)).collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23977999,"reputation":73,"user_id":17965846,"display_name":"wuttke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661238827,"creation_date":1661238733,"answer_id":73454513,"question_id":7626894,"body_markdown":"A little easier\r\n\r\n    items.sort(Comparator.comparingLong(i -&gt; ids.indexOf(i.getId())));","title":"JPQL/HQL - Is it possible to specify the order, by providing a list of IDs?","body":"<p>A little easier</p>\n<pre><code>items.sort(Comparator.comparingLong(i -&gt; ids.indexOf(i.getId())));\n</code></pre>\n"}],"owner":{"account_id":449103,"reputation":8486,"user_id":843699,"accept_rate":59,"display_name":"electrotype"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1432,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":7626921,"answer_count":5,"score":1,"last_activity_date":1686992620,"creation_date":1317565152,"question_id":7626894,"body_markdown":"(Note: I&#39;m using the Play! framework, which uses Hibernate as the JPA implementation.)\r\n\r\nI have a list of IDs and I want to get the Items from the database by keeping the order that is used in my ID list.\r\n\r\nLet&#39;s say my list is: 444,222,333,111\r\n\r\nI want the JPQL/HQL to return the Item with id #444 first, then the one with id #222, etc.\r\n\r\nI tried something like: \r\n\r\n    id in (444,222,333,111) order by id=444 DESC, id=222 DESC, id=333 DESC, id=111 DESC\r\n\r\nBut it doesn&#39;t seem to work.\r\n\r\nIs it possible or will I have to forget the &quot;order by&quot; part and manually re-order the Items once returned?\r\n\r\n\r\n\r\n","title":"JPQL/HQL - Is it possible to specify the order, by providing a list of IDs?","body":"<p>(Note: I'm using the Play! framework, which uses Hibernate as the JPA implementation.)</p>\n\n<p>I have a list of IDs and I want to get the Items from the database by keeping the order that is used in my ID list.</p>\n\n<p>Let's say my list is: 444,222,333,111</p>\n\n<p>I want the JPQL/HQL to return the Item with id #444 first, then the one with id #222, etc.</p>\n\n<p>I tried something like: </p>\n\n<pre><code>id in (444,222,333,111) order by id=444 DESC, id=222 DESC, id=333 DESC, id=111 DESC\n</code></pre>\n\n<p>But it doesn't seem to work.</p>\n\n<p>Is it possible or will I have to forget the \"order by\" part and manually re-order the Items once returned?</p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":8487283,"reputation":1292,"user_id":6364956,"accept_rate":86,"display_name":"Sadiq Ali"},"score":1,"creation_date":1500291184,"post_id":45143135,"comment_id":77254885,"body_markdown":"Maybe this will be of some help to you. [SO Question](https://stackoverflow.com/questions/5905896/intellij-inspection-gives-cannot-resolve-symbol-but-still-compiles-code)\n\nYou may have to re-import the project. `View -&gt; Tool Windows -&gt; Maven Projects, then click on cycle arrows icon`","body":"Maybe this will be of some help to you. <a href=\"https://stackoverflow.com/questions/5905896/intellij-inspection-gives-cannot-resolve-symbol-but-still-compiles-code\">SO Question</a>  You may have to re-import the project. <code>View -&gt; Tool Windows -&gt; Maven Projects, then click on cycle arrows icon</code>"},{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1500291535,"post_id":45143135,"comment_id":77255137,"body_markdown":"See https://confluence.jetbrains.com/display/IDEADEV/Maven+Integration+FAQ#MavenIntegrationFAQ-GeneratedSources","body":"See <a href=\"https://confluence.jetbrains.com/display/IDEADEV/Maven+Integration+FAQ#MavenIntegrationFAQ-GeneratedSources\" rel=\"nofollow noreferrer\">confluence.jetbrains.com/display/IDEADEV/&hellip;</a>"},{"owner":{"account_id":3586404,"reputation":1171,"user_id":2993494,"accept_rate":44,"display_name":"Tom Withers"},"score":0,"creation_date":1500291793,"post_id":45143135,"comment_id":77255314,"body_markdown":"@CrazyCoder My folders are there that&#39;s not the issue. When I mark it as source intellij doesn&#39;t seem to know about it","body":"@CrazyCoder My folders are there that&#39;s not the issue. When I mark it as source intellij doesn&#39;t seem to know about it"},{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1500291814,"post_id":45143135,"comment_id":77255328,"body_markdown":"Please share the [Minimal, Complete, and Verifiable example](http://stackoverflow.com/help/mcve).","body":"Please share the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."},{"owner":{"account_id":3586404,"reputation":1171,"user_id":2993494,"accept_rate":44,"display_name":"Tom Withers"},"score":0,"creation_date":1500291971,"post_id":45143135,"comment_id":77255448,"body_markdown":"@CrazyCoder my explanation is fine, there is nothing else I can say to make it clear....","body":"@CrazyCoder my explanation is fine, there is nothing else I can say to make it clear...."},{"owner":{"account_id":3586404,"reputation":1171,"user_id":2993494,"accept_rate":44,"display_name":"Tom Withers"},"score":0,"creation_date":1500292309,"post_id":45143135,"comment_id":77255689,"body_markdown":"@SadiqAli I tried this and It hasnt worked","body":"@SadiqAli I tried this and It hasnt worked"},{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1500292984,"post_id":45143135,"comment_id":77256184,"body_markdown":"You can share a sample so that others can reproduce it and tell you how to fix it.","body":"You can share a sample so that others can reproduce it and tell you how to fix it."}],"answers":[{"tags":[],"owner":{"account_id":3586404,"reputation":1171,"user_id":2993494,"accept_rate":44,"display_name":"Tom Withers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1500298656,"creation_date":1500298656,"answer_id":45145798,"question_id":45143135,"body_markdown":"Fixed this error....\r\n\r\nIntelliJ was marking all `subdir` of my `generated-sources/cxf` folder as source roots... So a simple highlight of all folders and un-mark as sources fixes the issue.","title":"Intellij-idea cannot see generated sources directory","body":"<p>Fixed this error....</p>\n\n<p>IntelliJ was marking all <code>subdir</code> of my <code>generated-sources/cxf</code> folder as source roots... So a simple highlight of all folders and un-mark as sources fixes the issue.</p>\n"},{"tags":[],"owner":{"account_id":10669883,"reputation":150,"user_id":7855267,"display_name":"Asad Abdin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1510640076,"creation_date":1510640076,"answer_id":47278829,"question_id":45143135,"body_markdown":"uncheck &quot;Create Separate module per source set&quot; in Preferences &gt; Build, Execution, Deployment &gt; Gradle and then rebuild / gradle refresh","title":"Intellij-idea cannot see generated sources directory","body":"<p>uncheck \"Create Separate module per source set\" in Preferences > Build, Execution, Deployment > Gradle and then rebuild / gradle refresh</p>\n"},{"tags":[],"owner":{"account_id":28828593,"reputation":1,"user_id":22079588,"display_name":"Aksh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686990418,"creation_date":1686849569,"answer_id":76484085,"question_id":45143135,"body_markdown":"I had a similar situation where I had to generate a Java class from the script through the `pom.xml` file. Even after I could see that the Java class was generated successfully after compiling the package, I mentioned I was not able to import that generated Java class and use it any other class. \r\n\r\nSince this took much of my time to resolve the issue and I could not find any proper answers, I&#39;m posting the steps I performed so that it could be a help to anyone in the future with similar issues.\r\n\r\n1. First mark the generated source directory as the source by going to File -&gt;Project Structure -&gt; modules. Click on the Source tab and add your generated folder as source.\r\n\r\n2. Right click on the folder under generated source folder and select mark directory as -&gt; Generated sources root \r\n\r\n3. Use this plugin so that generated class can be imported to any other class. \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n      &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;executions&gt;\r\n        &lt;execution&gt;\r\n          &lt;id&gt;add-java-source&lt;/id&gt;\r\n          &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n          &lt;goals&gt;\r\n            &lt;goal&gt;add-source&lt;/goal&gt;\r\n          &lt;/goals&gt;\r\n          &lt;configuration&gt;\r\n            &lt;sources&gt;\r\n              &lt;source&gt;${project.build.directory}/generated-sources/{folderUnderGeneratedSrcFolder} &lt;/source&gt;\r\n            &lt;/sources&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n      &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHope this helps!!!!!\r\n","title":"Intellij-idea cannot see generated sources directory","body":"<p>I had a similar situation where I had to generate a Java class from the script through the <code>pom.xml</code> file. Even after I could see that the Java class was generated successfully after compiling the package, I mentioned I was not able to import that generated Java class and use it any other class.</p>\n<p>Since this took much of my time to resolve the issue and I could not find any proper answers, I'm posting the steps I performed so that it could be a help to anyone in the future with similar issues.</p>\n<ol>\n<li><p>First mark the generated source directory as the source by going to File -&gt;Project Structure -&gt; modules. Click on the Source tab and add your generated folder as source.</p>\n</li>\n<li><p>Right click on the folder under generated source folder and select mark directory as -&gt; Generated sources root</p>\n</li>\n<li><p>Use this plugin so that generated class can be imported to any other class.</p>\n</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n  &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0&lt;/version&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;id&gt;add-java-source&lt;/id&gt;\n      &lt;phase&gt;generate-sources&lt;/phase&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;add-source&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n        &lt;sources&gt;\n          &lt;source&gt;${project.build.directory}/generated-sources/{folderUnderGeneratedSrcFolder} &lt;/source&gt;\n        &lt;/sources&gt;\n      &lt;/configuration&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Hope this helps!!!!!</p>\n"}],"owner":{"account_id":3586404,"reputation":1171,"user_id":2993494,"accept_rate":44,"display_name":"Tom Withers"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7666,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":45145798,"answer_count":3,"score":1,"last_activity_date":1686990418,"creation_date":1500291029,"question_id":45143135,"body_markdown":"I have a maven project in IntelliJ I have marked the generated sources directory as the source by doing `Files&gt;Project Structure` and marking as source. I&#39;ve also done it the other way by right clicking on the folder and marking as generated-sources.\r\n\r\nI&#39;m still getting errors saying the IntelliJ cannot find things in these folders `Cannot resolve symbol &#39;name_of_folder&#39;` when I&#39;m creating a SOAP implementation \r\n\r\nDoes anyone know how I can fix this issue? From what I can see I have done everything correctly to mark that folder and IntelliJ Should be able to read from there","title":"Intellij-idea cannot see generated sources directory","body":"<p>I have a maven project in IntelliJ I have marked the generated sources directory as the source by doing <code>Files&gt;Project Structure</code> and marking as source. I've also done it the other way by right clicking on the folder and marking as generated-sources.</p>\n\n<p>I'm still getting errors saying the IntelliJ cannot find things in these folders <code>Cannot resolve symbol 'name_of_folder'</code> when I'm creating a SOAP implementation </p>\n\n<p>Does anyone know how I can fix this issue? From what I can see I have done everything correctly to mark that folder and IntelliJ Should be able to read from there</p>\n"},{"tags":["java","javascript","html","three.js","webgl"],"answers":[{"tags":[],"owner":{"account_id":1156728,"reputation":19434,"user_id":1137134,"display_name":"mrdoob"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1412685555,"creation_date":1412685555,"answer_id":26236237,"question_id":26236045,"body_markdown":"You can use this Chrome extension to record a `&lt;canvas&gt;`:\r\n\r\nhttps://chrome.google.com/webstore/detail/rendercan/enlfmgpmfaibbeoelliknejffljklemg\r\n\r\nThis will produce a compressed file with all the frames. With that file uncompressed you can use `ffmpeg` to combine all the frames in one single video like this:\r\n\r\n    ffmpeg -r 60 -i canvas-%09d.png out.mp4\r\n\r\nIf the command line route intimidates you, I think After Effects or similar allow you to do that too.","title":"Three.js: How can I convert a Scene into an MPG4 Video?","body":"<p>You can use this Chrome extension to record a <code>&lt;canvas&gt;</code>:</p>\n\n<p><a href=\"https://chrome.google.com/webstore/detail/rendercan/enlfmgpmfaibbeoelliknejffljklemg\">https://chrome.google.com/webstore/detail/rendercan/enlfmgpmfaibbeoelliknejffljklemg</a></p>\n\n<p>This will produce a compressed file with all the frames. With that file uncompressed you can use <code>ffmpeg</code> to combine all the frames in one single video like this:</p>\n\n<pre><code>ffmpeg -r 60 -i canvas-%09d.png out.mp4\n</code></pre>\n\n<p>If the command line route intimidates you, I think After Effects or similar allow you to do that too.</p>\n"},{"tags":[],"owner":{"account_id":7125830,"reputation":41,"user_id":5659475,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1638181722,"creation_date":1638181722,"answer_id":70153082,"question_id":26236045,"body_markdown":"Check this github repo, I think it does exactly that:\r\nhttps://github.com/spite/ccapture.js/","title":"Three.js: How can I convert a Scene into an MPG4 Video?","body":"<p>Check this github repo, I think it does exactly that:\n<a href=\"https://github.com/spite/ccapture.js/\" rel=\"nofollow noreferrer\">https://github.com/spite/ccapture.js/</a></p>\n"},{"tags":[],"owner":{"account_id":5508109,"reputation":3185,"user_id":4375397,"accept_rate":60,"display_name":"Philip"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686990390,"creation_date":1686990390,"answer_id":76495357,"question_id":26236045,"body_markdown":"If you use the `FFmpeg` library you could try something like:\r\n\r\n    for ( let i = 0; i &lt; frames; i ++ ) {\r\n    \r\n    \tplayer.render( currentTime );\r\n    \r\n    \tconst num = i.toString().padStart( 5, &#39;0&#39; );\r\n    \tffmpeg.FS( &#39;writeFile&#39;, `tmp.${num}.png`, await fetchFile( canvas.toDataURL() ) );\r\n    \tcurrentTime += 1 / fps;\r\n    \r\n    \tprogress.setValue( ( i / frames ) * 0.5 );\r\n    \r\n    }\r\n\r\n[Github Source][1]\r\n\r\n\r\n  [1]: https://github.com/mrdoob/three.js/blob/3e5d141bcc05e0e4d3d3aa760d9be4329c7239b8/editor/js/Sidebar.Project.Video.js#L90-L100","title":"Three.js: How can I convert a Scene into an MPG4 Video?","body":"<p>If you use the <code>FFmpeg</code> library you could try something like:</p>\n<pre><code>for ( let i = 0; i &lt; frames; i ++ ) {\n\n    player.render( currentTime );\n\n    const num = i.toString().padStart( 5, '0' );\n    ffmpeg.FS( 'writeFile', `tmp.${num}.png`, await fetchFile( canvas.toDataURL() ) );\n    currentTime += 1 / fps;\n\n    progress.setValue( ( i / frames ) * 0.5 );\n\n}\n</code></pre>\n<p><a href=\"https://github.com/mrdoob/three.js/blob/3e5d141bcc05e0e4d3d3aa760d9be4329c7239b8/editor/js/Sidebar.Project.Video.js#L90-L100\" rel=\"nofollow noreferrer\">Github Source</a></p>\n"}],"owner":{"account_id":1051966,"reputation":32747,"user_id":1055664,"accept_rate":57,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5973,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1686990390,"creation_date":1412684982,"question_id":26236045,"body_markdown":"I have a three.js scene: \r\n\r\n    var scene = new THREE.Scene();\r\n\r\nThe scene contains many objects which are animated. My goal is to export the animation as a mpg4 video. \r\n\r\nMy questions: \r\n\r\n1. How can I export a scene to get an mpg4 video?\r\n2. Should I do the export on the client side or on the server side?\r\n\r\nEdit:\r\n \r\nI need it to run on a website or on a Java based server. No browser extensions please.\r\n\r\n","title":"Three.js: How can I convert a Scene into an MPG4 Video?","body":"<p>I have a three.js scene: </p>\n\n<pre><code>var scene = new THREE.Scene();\n</code></pre>\n\n<p>The scene contains many objects which are animated. My goal is to export the animation as a mpg4 video. </p>\n\n<p>My questions: </p>\n\n<ol>\n<li>How can I export a scene to get an mpg4 video?</li>\n<li>Should I do the export on the client side or on the server side?</li>\n</ol>\n\n<p>Edit:</p>\n\n<p>I need it to run on a website or on a Java based server. No browser extensions please.</p>\n"},{"tags":["java","mysql","hibernate","cpanel","remote-access"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686927262,"post_id":76491319,"comment_id":134870243,"body_markdown":"You&#39;ll be lucky if that&#39;s allowed. Most cPanel hosting would not allow remote access.","body":"You&#39;ll be lucky if that&#39;s allowed. Most cPanel hosting would not allow remote access."},{"owner":{"account_id":20048923,"reputation":1,"user_id":20658188,"display_name":"Mukai"},"score":0,"creation_date":1686927864,"post_id":76491319,"comment_id":134870385,"body_markdown":"I am not aware, so its impossible?","body":"I am not aware, so its impossible?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686928076,"post_id":76491319,"comment_id":134870425,"body_markdown":"Not impossible maybe, but certainly security considerations would forbid it normally. I remember having the same using case with cheap hosting so wrote a server-side script to access it and invoked it with http. That&#39;s not going to fly with Hibernate. But you should be asking yourself why you&#39;d want to expose your own app. Client-side access is really not securable in any practical way","body":"Not impossible maybe, but certainly security considerations would forbid it normally. I remember having the same using case with cheap hosting so wrote a server-side script to access it and invoked it with http. That&#39;s not going to fly with Hibernate. But you should be asking yourself why you&#39;d want to expose your own app. Client-side access is really not securable in any practical way"},{"owner":{"account_id":20048923,"reputation":1,"user_id":20658188,"display_name":"Mukai"},"score":0,"creation_date":1686928685,"post_id":76491319,"comment_id":134870542,"body_markdown":"I have a desktop application I want to use database on cpanel,","body":"I have a desktop application I want to use database on cpanel,"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686929082,"post_id":76491319,"comment_id":134870624,"body_markdown":"I know that - hence my lengthy comment ;)","body":"I know that - hence my lengthy comment ;)"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1686943972,"post_id":76491319,"comment_id":134873325,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":20048923,"reputation":1,"user_id":20658188,"display_name":"Mukai"},"score":0,"creation_date":1686992259,"post_id":76491319,"comment_id":134877059,"body_markdown":"Javafx desktop application have to connect to mysql database on cpanel, do I need to consider ssl if yes how","body":"Javafx desktop application have to connect to mysql database on cpanel, do I need to consider ssl if yes how"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687002173,"post_id":76491319,"comment_id":134878034,"body_markdown":"Likely irrelevant - it won&#39;t solve the access problem","body":"Likely irrelevant - it won&#39;t solve the access problem"}],"owner":{"account_id":20048923,"reputation":1,"user_id":20658188,"display_name":"Mukai"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686990072,"creation_date":1686927004,"question_id":76491319,"body_markdown":"How can I establish a connection to a MySQL database on cPanel from a Java desktop application using Hibernate? My current connection string is:\r\n\r\n```jdbc:mysql://ipaddress_to_cpannel/databasename?useSSL=true&amp;requireSSL=true&amp;verifyServerCertificate=false```\r\n\r\nThe username and password are set in the Hibernate config file and belong to the user I created on cPanel.\r\n\r\nJavafx desktop application have to connect to mysql database on cpanel, do I need to consider ssl if yes how","title":"mysql on cpanel remote access from java dasktop application: Hibernate","body":"<p>How can I establish a connection to a MySQL database on cPanel from a Java desktop application using Hibernate? My current connection string is:</p>\n<p><code>jdbc:mysql://ipaddress_to_cpannel/databasename?useSSL=true&amp;requireSSL=true&amp;verifyServerCertificate=false</code></p>\n<p>The username and password are set in the Hibernate config file and belong to the user I created on cPanel.</p>\n<p>Javafx desktop application have to connect to mysql database on cpanel, do I need to consider ssl if yes how</p>\n"},{"tags":["java","docker","maven"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":2,"creation_date":1686940190,"post_id":76492704,"comment_id":134872697,"body_markdown":"See [this post](https://stackoverflow.com/questions/38723833/what-is-the-purpose-of-mvnw-and-mvnw-cmd-files).  It&#39;s a matter of preference.","body":"See <a href=\"https://stackoverflow.com/questions/38723833/what-is-the-purpose-of-mvnw-and-mvnw-cmd-files\">this post</a>.  It&#39;s a matter of preference."},{"owner":{"account_id":11135162,"reputation":63,"user_id":8173903,"display_name":"Wesley Alves"},"score":0,"creation_date":1686940925,"post_id":76492704,"comment_id":134872817,"body_markdown":"Oh, I see. Thanks!","body":"Oh, I see. Thanks!"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1686995809,"post_id":76492704,"comment_id":134877373,"body_markdown":"The maven wrapper requires internet connectivity to even get started.  You may not want that.","body":"The maven wrapper requires internet connectivity to even get started.  You may not want that."}],"answers":[{"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686988723,"creation_date":1686988723,"answer_id":76495263,"question_id":76492704,"body_markdown":"The Maven image is the official image to build with Maven. Why take something else and install Maven first (indirectly, though)?\r\n\r\nI mean, you also not just start a plain linux image and install the JDK first.\r\n\r\nUsing the Maven image will be the fastest and most stable way of doing Maven.","title":"Docker: Maven images vs JDK Images","body":"<p>The Maven image is the official image to build with Maven. Why take something else and install Maven first (indirectly, though)?</p>\n<p>I mean, you also not just start a plain linux image and install the JDK first.</p>\n<p>Using the Maven image will be the fastest and most stable way of doing Maven.</p>\n"}],"owner":{"account_id":11135162,"reputation":63,"user_id":8173903,"display_name":"Wesley Alves"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76495263,"answer_count":1,"score":0,"last_activity_date":1686988723,"creation_date":1686939289,"question_id":76492704,"body_markdown":"Reading about Java applications with Docker, I noticed that some people use JDK images, such as Amazon Corretto, Eclpise Temurin, etc, and to build the project they use the Maven Wrapper (mvnw), while others use the actual Maven image, which has the &quot;mvn&quot; command available.\r\n\r\nAre there any advantages or disadvantages of one approach over the other?","title":"Docker: Maven images vs JDK Images","body":"<p>Reading about Java applications with Docker, I noticed that some people use JDK images, such as Amazon Corretto, Eclpise Temurin, etc, and to build the project they use the Maven Wrapper (mvnw), while others use the actual Maven image, which has the &quot;mvn&quot; command available.</p>\n<p>Are there any advantages or disadvantages of one approach over the other?</p>\n"},{"tags":["java","javascript","rest","jakarta-ee","cookies"],"answers":[{"tags":[],"owner":{"account_id":73316,"reputation":9114,"user_id":211205,"display_name":"rzymek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1379598894,"creation_date":1379598894,"answer_id":18896632,"question_id":15096641,"body_markdown":"That&#39;s strange. I&#39;ve tried to reproduce your problem, but everything worked fine:\r\n\r\n\timport javax.ws.rs.core.Cookie;\r\n\timport javax.ws.rs.core.NewCookie;\r\n\timport javax.ws.rs.core.Response;\r\n\r\n\t@GET\r\n\t@Path(value = &quot;/test&quot;)\r\n\tpublic Response test() {\r\n\t\tNewCookie c = new NewCookie(&quot;name1&quot;, &quot;value1&quot;);\r\n\t\tCookie cookie = new Cookie(&quot;name2&quot;, &quot;value2&quot;);\r\n\t\tNewCookie c2 = new NewCookie(cookie);\r\n\t\treturn Response.ok(&quot;response1&quot;).cookie(c, c2).build();\r\n\t}\r\n`curl -i $URL` gave me:\r\n\r\n    HTTP/1.1 200 OK\r\n    Server: Apache-Coyote/1.1\r\n    Server: Apache-Coyote/1.1\r\n    Set-Cookie: name1=value1; Version=1\r\n    Set-Cookie: name2=value2; Version=1\r\n    Date: Thu, 19 Sep 2013 13:52:43 GMT\r\n    Content-Type: application/json\r\n    Content-Length: 13\r\n\r\n    [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]\r\nThe cookies also showed up in Chrome&#39;s Resources. ","title":"JAX-RS Cookies in response not showing in browser","body":"<p>That's strange. I've tried to reproduce your problem, but everything worked fine:</p>\n\n<pre><code>import javax.ws.rs.core.Cookie;\nimport javax.ws.rs.core.NewCookie;\nimport javax.ws.rs.core.Response;\n\n@GET\n@Path(value = \"/test\")\npublic Response test() {\n    NewCookie c = new NewCookie(\"name1\", \"value1\");\n    Cookie cookie = new Cookie(\"name2\", \"value2\");\n    NewCookie c2 = new NewCookie(cookie);\n    return Response.ok(\"response1\").cookie(c, c2).build();\n}\n</code></pre>\n\n<p><code>curl -i $URL</code> gave me:</p>\n\n<pre><code>HTTP/1.1 200 OK\nServer: Apache-Coyote/1.1\nServer: Apache-Coyote/1.1\nSet-Cookie: name1=value1; Version=1\nSet-Cookie: name2=value2; Version=1\nDate: Thu, 19 Sep 2013 13:52:43 GMT\nContent-Type: application/json\nContent-Length: 13\n\n[\"a\",\"b\",\"c\"]\n</code></pre>\n\n<p>The cookies also showed up in Chrome's Resources. </p>\n"},{"tags":[],"owner":{"account_id":6121121,"reputation":82,"user_id":4774618,"display_name":"sainid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464117710,"creation_date":1464117710,"answer_id":37422151,"question_id":15096641,"body_markdown":"Not sure why your function doesn&#39;t get you your cookie information, but I might have an idea why it doesn&#39;t show up in your browser.\r\n\r\nIt helped me to remember that you need to visit the specific path that the cookie was set on for the browser to display the cookie in the console.\r\n\r\nIn the example above, make sure to visit the url displayed in the &quot;Path:&quot; section.","title":"JAX-RS Cookies in response not showing in browser","body":"<p>Not sure why your function doesn't get you your cookie information, but I might have an idea why it doesn't show up in your browser.</p>\n\n<p>It helped me to remember that you need to visit the specific path that the cookie was set on for the browser to display the cookie in the console.</p>\n\n<p>In the example above, make sure to visit the url displayed in the \"Path:\" section.</p>\n"},{"tags":[],"owner":{"account_id":447250,"reputation":2382,"user_id":840772,"accept_rate":22,"display_name":"virtuvious"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1485258325,"creation_date":1485258325,"answer_id":41827416,"question_id":15096641,"body_markdown":"For somebody landing on this issue.\r\n\r\nThis problem occurs when the domain or the path values are not set properly\r\n\r\nUse the below snippet to set the path and domain\r\n\r\n    NewCookie cookie = new NewCookie(&quot;cookie-name&quot;, &quot;cookie-value,&quot;/&quot;, &quot;&quot;, &quot;cookie description&quot;, 1000000, false);\r\n\r\nFor example, In your browser you should see these values after its set\r\n\r\n    Set-Cookie:x-auth-cookie=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJtbTMiLCJhdWRpZW5jZSI6IkJST1dTRVIiLCJjcmVhdGVkIjoxNDg1MjU4MDcwMzQ2LCJyb2xlcyI6WyJBRE1JTiIsIlRFQUNIRVIiXSwiZXhwIjoxNDg2MjU4MDcwfQ.TM6oiCsOXh2zNou00H-5tkafAj40AngkbrCA62Vdyi5si_5hZFdmZFfitmK_bgRJexmFC49KlpAaRzGJF8bvMQ;Version=1;Comment=&quot;cookie description&quot;;Domain=;Path=/;Max-Age=1000000","title":"JAX-RS Cookies in response not showing in browser","body":"<p>For somebody landing on this issue.</p>\n\n<p>This problem occurs when the domain or the path values are not set properly</p>\n\n<p>Use the below snippet to set the path and domain</p>\n\n<pre><code>NewCookie cookie = new NewCookie(\"cookie-name\", \"cookie-value,\"/\", \"\", \"cookie description\", 1000000, false);\n</code></pre>\n\n<p>For example, In your browser you should see these values after its set</p>\n\n<pre><code>Set-Cookie:x-auth-cookie=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJtbTMiLCJhdWRpZW5jZSI6IkJST1dTRVIiLCJjcmVhdGVkIjoxNDg1MjU4MDcwMzQ2LCJyb2xlcyI6WyJBRE1JTiIsIlRFQUNIRVIiXSwiZXhwIjoxNDg2MjU4MDcwfQ.TM6oiCsOXh2zNou00H-5tkafAj40AngkbrCA62Vdyi5si_5hZFdmZFfitmK_bgRJexmFC49KlpAaRzGJF8bvMQ;Version=1;Comment=\"cookie description\";Domain=;Path=/;Max-Age=1000000\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9923624,"reputation":9,"user_id":7345994,"display_name":"Pavan Kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1686986506,"creation_date":1686973435,"answer_id":76494622,"question_id":15096641,"body_markdown":"When I set the cookie in the request `/home/security/getcookie`, with the code below:\r\n\r\n`NewCookie cookie = new NewCookie(&quot;MyCookie&quot;, &quot;MyCookieValue&quot;, &quot;/&quot;, &quot;&quot;, 1, null, -1, null, false,false);`\r\n\r\nIt was available as part of request headers only for requests starting with `/home/security/` (`/home/security/*`)\r\n\r\nAny other request (`home/work/one`, `/home/employee/getemployee..`) the cookie is not available.\r\n\r\nOut of curiosity, I did an experiment. \r\nAdd new API `/home/security/testing` security rest controller. Cookie was passed to it.\r\n\r\nModified Employee controller, request `/home/employee/getemployee` to `/home/security/employee/getemployee`. Cookie did not get passed for this. I was anticipating the cookie was set at &quot;/home/security/&quot; so it would get passed. But no luck \r\n\r\nNot able to understand whats happening. Tried all the combinations with NewCookie attributes: domain, path, httpOnly, age... But no luck.\r\n\r\nLooks I am encountering this issue https://stackoverflow.com/questions/38351769/path-attribute-of-cookie-is-not-affecting-for-subsequent-requests.\r\n\r\nBut not able to figure out solution.\r\nI am running the application on Docker based jetty server.\r\n","title":"JAX-RS Cookies in response not showing in browser","body":"<p>When I set the cookie in the request <code>/home/security/getcookie</code>, with the code below:</p>\n<p><code>NewCookie cookie = new NewCookie(&quot;MyCookie&quot;, &quot;MyCookieValue&quot;, &quot;/&quot;, &quot;&quot;, 1, null, -1, null, false,false);</code></p>\n<p>It was available as part of request headers only for requests starting with <code>/home/security/</code> (<code>/home/security/*</code>)</p>\n<p>Any other request (<code>home/work/one</code>, <code>/home/employee/getemployee..</code>) the cookie is not available.</p>\n<p>Out of curiosity, I did an experiment.\nAdd new API <code>/home/security/testing</code> security rest controller. Cookie was passed to it.</p>\n<p>Modified Employee controller, request <code>/home/employee/getemployee</code> to <code>/home/security/employee/getemployee</code>. Cookie did not get passed for this. I was anticipating the cookie was set at &quot;/home/security/&quot; so it would get passed. But no luck</p>\n<p>Not able to understand whats happening. Tried all the combinations with NewCookie attributes: domain, path, httpOnly, age... But no luck.</p>\n<p>Looks I am encountering this issue <a href=\"https://stackoverflow.com/questions/38351769/path-attribute-of-cookie-is-not-affecting-for-subsequent-requests\">Path attribute of Cookie is not affecting for subsequent requests</a>.</p>\n<p>But not able to figure out solution.\nI am running the application on Docker based jetty server.</p>\n"}],"owner":{"display_name":"user1655719"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6990,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":4,"score":8,"last_activity_date":1686986506,"creation_date":1361903578,"question_id":15096641,"body_markdown":"I am using Rest response to set cookies on the client side. But I cannot see the cookie being set when I open up &#39;Resources&#39; in Chrome. But interestingly, when I go to chrome settings and check all cookies, I find the cookies I am setting. Again, getCookie() javascript function from w3schools (or better version to handle all possibilities) fetch me nothing. I tried firefox, there same thing happens. When I see all cookies, I see my cookies, but JS function getCookie() does not return me anything. I think the cookies are not getting set properly. \r\n\r\nHere is my JAX-RS response :\r\n\r\n&lt;pre&gt;\r\n\r\n\tCookie c1 = new Cookie(Constants.SESSION_TOKEN, response\r\n\t\t\t\t.getSessionToken().getValue());\r\n\t\t\r\n\t\tCookie c2 = new Cookie(Constants.USER_IDENTIFIER,\r\n\t\t\t\tresponse.getUserIdentifier());\r\n\t\t\r\n\t\tNewCookie cookie1 = new NewCookie(c1);\r\n\t\tNewCookie cookie2 = new NewCookie(c2);\r\n\t\t\r\n\t\treturn Response.ok(jsonResponse, MediaType.APPLICATION_JSON)\r\n\t\t\t\t.cookie(cookie1,cookie2).build();\r\n&lt;/pre&gt;\r\n\r\nAnd this is my JS getCookie() function \r\n\r\n&lt;pre&gt;\r\n\tfunction getCookies() {\r\n\t\tvar c = document.cookie, v = 0, cookies = {};\r\n\t\tif (document.cookie.match(/^\\s*\\$Version=(?:&quot;1&quot;|1);\\s*(.*)/)) {\r\n\t\t\tc = RegExp.$1;\r\n\t\t\tv = 1;\r\n\t\t}\r\n\t\tif (v === 0) {\r\n\t\t\tc\r\n\t\t\t\t\t.split(/[,;]/)\r\n\t\t\t\t\t.map(\r\n\t\t\t\t\t\t\tfunction(cookie) {\r\n\t\t\t\t\t\t\t\tvar parts = cookie.split(/=/, 2), name = decodeURIComponent(parts[0]\r\n\t\t\t\t\t\t\t\t\t\t.trimLeft()), value = parts.length &gt; 1 ? decodeURIComponent(parts[1]\r\n\t\t\t\t\t\t\t\t\t\t.trimRight())\r\n\t\t\t\t\t\t\t\t\t\t: null;\r\n\t\t\t\t\t\t\t\tcookies[name] = value;\r\n\t\t\t\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tc\r\n\t\t\t\t\t.match(\r\n\t\t\t\t\t\t\t/(?:^|\\s+)([!#$%&amp;&#39;*+\\-.0-9A-Z^`a-z|~]+)=([!#$%&amp;&#39;*+\\-.0-9A-Z^`a-z|~]*|&quot;(?:[\\x20-\\x7E\\x80\\xFF]|\\\\[\\x00-\\x7F])*&quot;)(?=\\s*[,;]|$)/g)\r\n\t\t\t\t\t.map(\r\n\t\t\t\t\t\t\tfunction($0, $1) {\r\n\t\t\t\t\t\t\t\tvar name = $0, value = $1.charAt(0) === &#39;&quot;&#39; ? $1\r\n\t\t\t\t\t\t\t\t\t\t.substr(1, -1).replace(/\\\\(.)/g, &quot;$1&quot;)\r\n\t\t\t\t\t\t\t\t\t\t: $1;\r\n\t\t\t\t\t\t\t\tcookies[name] = value;\r\n\t\t\t\t\t\t\t});\r\n\t\t}\r\n\t\treturn cookies;\r\n\t}\r\n\tfunction getCookie(name) {\r\n\t\treturn getCookies()[name];\r\n\t}\r\n&lt;/pre&gt;\r\n\r\n\r\n![enter image description here][1]\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Tmepc.png\r\n  [2]: http://i.stack.imgur.com/3Mar0.png","title":"JAX-RS Cookies in response not showing in browser","body":"<p>I am using Rest response to set cookies on the client side. But I cannot see the cookie being set when I open up 'Resources' in Chrome. But interestingly, when I go to chrome settings and check all cookies, I find the cookies I am setting. Again, getCookie() javascript function from w3schools (or better version to handle all possibilities) fetch me nothing. I tried firefox, there same thing happens. When I see all cookies, I see my cookies, but JS function getCookie() does not return me anything. I think the cookies are not getting set properly. </p>\n\n<p>Here is my JAX-RS response :</p>\n\n<pre>\n\n    Cookie c1 = new Cookie(Constants.SESSION_TOKEN, response\n                .getSessionToken().getValue());\n\n        Cookie c2 = new Cookie(Constants.USER_IDENTIFIER,\n                response.getUserIdentifier());\n\n        NewCookie cookie1 = new NewCookie(c1);\n        NewCookie cookie2 = new NewCookie(c2);\n\n        return Response.ok(jsonResponse, MediaType.APPLICATION_JSON)\n                .cookie(cookie1,cookie2).build();\n</pre>\n\n<p>And this is my JS getCookie() function </p>\n\n<pre>\n    function getCookies() {\n        var c = document.cookie, v = 0, cookies = {};\n        if (document.cookie.match(/^\\s*\\$Version=(?:\"1\"|1);\\s*(.*)/)) {\n            c = RegExp.$1;\n            v = 1;\n        }\n        if (v === 0) {\n            c\n                    .split(/[,;]/)\n                    .map(\n                            function(cookie) {\n                                var parts = cookie.split(/=/, 2), name = decodeURIComponent(parts[0]\n                                        .trimLeft()), value = parts.length > 1 ? decodeURIComponent(parts[1]\n                                        .trimRight())\n                                        : null;\n                                cookies[name] = value;\n                            });\n        } else {\n            c\n                    .match(\n                            /(?:^|\\s+)([!#$%&'*+\\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\\-.0-9A-Z^`a-z|~]*|\"(?:[\\x20-\\x7E\\x80\\xFF]|\\\\[\\x00-\\x7F])*\")(?=\\s*[,;]|$)/g)\n                    .map(\n                            function($0, $1) {\n                                var name = $0, value = $1.charAt(0) === '\"' ? $1\n                                        .substr(1, -1).replace(/\\\\(.)/g, \"$1\")\n                                        : $1;\n                                cookies[name] = value;\n                            });\n        }\n        return cookies;\n    }\n    function getCookie(name) {\n        return getCookies()[name];\n    }\n</pre>\n\n<p><img src=\"https://i.stack.imgur.com/Tmepc.png\" alt=\"enter image description here\">\n<img src=\"https://i.stack.imgur.com/3Mar0.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","ios","voiceover","robovm"],"owner":{"account_id":23923139,"reputation":1,"user_id":17918640,"display_name":"SincereDevotion"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686985979,"creation_date":1686985979,"question_id":76495138,"body_markdown":"I was playing around with the UIAccessibility for iOS to work with VoiceOver. However, I can&#39;t get it to work and I get a weird error.\r\n\r\nHere is the code (snippet):\r\n\r\n\r\n```\r\nUIAccessibilityElement accessibilityElement = new UIAccessibilityElement(iosAccessibility);\r\n\r\n        accessibilityElement.setAccessibilityFrame(new CGRect(x, y, width, height));\r\n\r\n        if (item.GetName() != null)\r\n            accessibilityElement.setAccessibilityLabel(item.GetName());\r\n        else\r\n            accessibilityElement.setAccessibilityLabel(&quot;Default Name&quot;);\r\n\r\n        if (item.GetDescription() != null)\r\n            accessibilityElement.setAccessibilityHint(item.GetDescription());\r\n        else\r\n            accessibilityElement.setAccessibilityHint(&quot;Default Description&quot;);\r\n\r\n        if (item.GetAccessibilityCode() == item.Get_Libraries_Interface_Item__NOT_ACCESSIBLE_())\r\n            accessibilityElement.setAccessibilityElement(false);\r\n        else\r\n            accessibilityElement.setAccessibilityElement(true);\r\n\r\n        accessibilityElement.setAccessibilityTraits(UIAccessibilityTraits.Image);\r\n\r\n        // Add the accessibility element to the list\r\n        accessibilityElements.add(accessibilityElement);\r\n\r\n        // Inform iOS that the accessibility elements have changed\r\n        UIAccessibilityGlobals.postNotification(UIAccessibilityNotification.LayoutChangedNotification, accessibilityElement);\r\n```\r\n\r\n\r\n\r\nError: class java.lang.UnsatisfiedLinkError, Optional @GlobalValue method org/robovm/apple/uikit/UIAccessibilityTraits.NoneValue()J not bound\r\n\r\nAm I doing something wrong?\r\n\r\n\r\n","title":"RoboVM UIAccessibilityTraits errors","body":"<p>I was playing around with the UIAccessibility for iOS to work with VoiceOver. However, I can't get it to work and I get a weird error.</p>\n<p>Here is the code (snippet):</p>\n<pre><code>UIAccessibilityElement accessibilityElement = new UIAccessibilityElement(iosAccessibility);\n\n        accessibilityElement.setAccessibilityFrame(new CGRect(x, y, width, height));\n\n        if (item.GetName() != null)\n            accessibilityElement.setAccessibilityLabel(item.GetName());\n        else\n            accessibilityElement.setAccessibilityLabel(&quot;Default Name&quot;);\n\n        if (item.GetDescription() != null)\n            accessibilityElement.setAccessibilityHint(item.GetDescription());\n        else\n            accessibilityElement.setAccessibilityHint(&quot;Default Description&quot;);\n\n        if (item.GetAccessibilityCode() == item.Get_Libraries_Interface_Item__NOT_ACCESSIBLE_())\n            accessibilityElement.setAccessibilityElement(false);\n        else\n            accessibilityElement.setAccessibilityElement(true);\n\n        accessibilityElement.setAccessibilityTraits(UIAccessibilityTraits.Image);\n\n        // Add the accessibility element to the list\n        accessibilityElements.add(accessibilityElement);\n\n        // Inform iOS that the accessibility elements have changed\n        UIAccessibilityGlobals.postNotification(UIAccessibilityNotification.LayoutChangedNotification, accessibilityElement);\n</code></pre>\n<p>Error: class java.lang.UnsatisfiedLinkError, Optional @GlobalValue method org/robovm/apple/uikit/UIAccessibilityTraits.NoneValue()J not bound</p>\n<p>Am I doing something wrong?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":28368661,"reputation":86,"user_id":21697614,"display_name":"Nandish Chauhan "},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686984995,"creation_date":1686916171,"answer_id":76489889,"question_id":76442515,"body_markdown":"There is no issue in using generics in Java unless it is implemented well. I have seen many projects using response wrappers for API calls in spring boot. \r\n\r\nHere is an example where generics are used in response entity.\r\n\r\n```\r\n@Builder\r\n@NoArgsConstructor\r\n@Data\r\n@AllArgsConstructor\r\npublic class Response&lt;T extends Object&gt; {\r\n    private LocalDateTime timestamp;\r\n    private int status;\r\n    private Boolean isSuccess;\r\n    private String message;\r\n    private T data;\r\n}\r\n```\r\nIt is a wrapper class where every API response will contain the following fields\r\n\r\n```\r\npublic class ResponseWrapper {\r\n    public static &lt;T extends Object&gt; ResponseEntity&lt;T&gt; generateResponse(HttpStatus status, boolean isSuccess, String message, T responseObj) {\r\n        Response&lt;Object&gt; response = Response.builder().timestamp(LocalDateTime.now()).status(status.value()).isSuccess(isSuccess).message(message).data(responseObj).build();\r\n        return new ResponseEntity&lt;T&gt;((T) response, status);\r\n    }\r\n    public static &lt;T extends Object&gt; ResponseEntity&lt;T&gt; ok(T responseObj) {\r\n        return generateResponse(HttpStatus.OK, true, &quot;&quot;, responseObj);\r\n    }\r\n    public static ResponseEntity&lt;String&gt; message(String message) {\r\n        return generateResponse(HttpStatus.OK, true, message, &quot;&quot;);\r\n    }\r\n    public static ResponseEntity&lt;String&gt; error(String message, HttpStatus status) {\r\n        return generateResponse(status, false, message, &quot;&quot;);\r\n    }\r\n}\r\n```\r\nThis is the wrapper that needs to be called from the controller\r\n\r\n```\r\n    @GetMapping(value = &quot;/dummy/users&quot;, produces = { Api.V10 })\r\n    public ResponseEntity&lt;List&lt;User&gt;&gt; getAllDummyUsers() {\r\n        return ResponseWrapper.ok(userService.getAllUsers());\r\n    }\r\n```\r\n\r\nHope I understood the question and was able to provide an answer.","title":"Java using Type Response APIs Problems","body":"<p>There is no issue in using generics in Java unless it is implemented well. I have seen many projects using response wrappers for API calls in spring boot.</p>\n<p>Here is an example where generics are used in response entity.</p>\n<pre><code>@Builder\n@NoArgsConstructor\n@Data\n@AllArgsConstructor\npublic class Response&lt;T extends Object&gt; {\n    private LocalDateTime timestamp;\n    private int status;\n    private Boolean isSuccess;\n    private String message;\n    private T data;\n}\n</code></pre>\n<p>It is a wrapper class where every API response will contain the following fields</p>\n<pre><code>public class ResponseWrapper {\n    public static &lt;T extends Object&gt; ResponseEntity&lt;T&gt; generateResponse(HttpStatus status, boolean isSuccess, String message, T responseObj) {\n        Response&lt;Object&gt; response = Response.builder().timestamp(LocalDateTime.now()).status(status.value()).isSuccess(isSuccess).message(message).data(responseObj).build();\n        return new ResponseEntity&lt;T&gt;((T) response, status);\n    }\n    public static &lt;T extends Object&gt; ResponseEntity&lt;T&gt; ok(T responseObj) {\n        return generateResponse(HttpStatus.OK, true, &quot;&quot;, responseObj);\n    }\n    public static ResponseEntity&lt;String&gt; message(String message) {\n        return generateResponse(HttpStatus.OK, true, message, &quot;&quot;);\n    }\n    public static ResponseEntity&lt;String&gt; error(String message, HttpStatus status) {\n        return generateResponse(status, false, message, &quot;&quot;);\n    }\n}\n</code></pre>\n<p>This is the wrapper that needs to be called from the controller</p>\n<pre><code>    @GetMapping(value = &quot;/dummy/users&quot;, produces = { Api.V10 })\n    public ResponseEntity&lt;List&lt;User&gt;&gt; getAllDummyUsers() {\n        return ResponseWrapper.ok(userService.getAllUsers());\n    }\n</code></pre>\n<p>Hope I understood the question and was able to provide an answer.</p>\n"}],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76489889,"answer_count":1,"score":0,"last_activity_date":1686984995,"creation_date":1686331840,"question_id":76442515,"body_markdown":"What are some issues using Generic Types in API Responses? Does it cause any coding bugs, issues, or compatibility headaches? Ccurrently using Java 8, Spring Boot 3, with React 17. I prefer using stable class types.\r\n\r\nhttps://stackoverflow.com/questions/6765024/generic-type-as-parameter-in-java-method\r\n\r\n    private static &lt;T&gt; List&lt;T&gt; pushBack(List&lt;T&gt; list, Class&lt;T&gt; typeKey) throws Exception {\r\n        list.add(typeKey.getConstructor().newInstance());\r\n        return list;\r\n    }\r\n\r\nI see a problem thread here, https://github.com/swagger-api/swagger-core/issues/498\r\n","title":"Java using Type Response APIs Problems","body":"<p>What are some issues using Generic Types in API Responses? Does it cause any coding bugs, issues, or compatibility headaches? Ccurrently using Java 8, Spring Boot 3, with React 17. I prefer using stable class types.</p>\n<p><a href=\"https://stackoverflow.com/questions/6765024/generic-type-as-parameter-in-java-method\">Generic type as parameter in Java Method</a></p>\n<pre><code>private static &lt;T&gt; List&lt;T&gt; pushBack(List&lt;T&gt; list, Class&lt;T&gt; typeKey) throws Exception {\n    list.add(typeKey.getConstructor().newInstance());\n    return list;\n}\n</code></pre>\n<p>I see a problem thread here, <a href=\"https://github.com/swagger-api/swagger-core/issues/498\" rel=\"nofollow noreferrer\">https://github.com/swagger-api/swagger-core/issues/498</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661633359,"post_id":73514287,"comment_id":129819765,"body_markdown":"The problem is simply that in the class MessagingService, you named the method &quot;addMessage&quot; instead of &quot;add&quot;.","body":"The problem is simply that in the class MessagingService, you named the method &quot;addMessage&quot; instead of &quot;add&quot;."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661633605,"post_id":73514287,"comment_id":129819797,"body_markdown":"Some other unrelated tips to write better code: 1) all fields in all classes can be final. 2) code against interfaces,  do not declare as ArrayList (implementation) but as List (interface). 3) Each time you implement equals, do not forget to implement hashCode as well. 4) in the method add, you don&#39;t need to declare the field max, you can write directly &lt;=280 in the if block.","body":"Some other unrelated tips to write better code: 1) all fields in all classes can be final. 2) code against interfaces,  do not declare as ArrayList (implementation) but as List (interface). 3) Each time you implement equals, do not forget to implement hashCode as well. 4) in the method add, you don&#39;t need to declare the field max, you can write directly &lt;=280 in the if block."},{"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"score":0,"creation_date":1661633791,"post_id":73514287,"comment_id":129819830,"body_markdown":"yes, thank you. it&#39;s something i didn&#39;t change before posting it and was part of me trying things to get it to work.","body":"yes, thank you. it&#39;s something i didn&#39;t change before posting it and was part of me trying things to get it to work."},{"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"score":0,"creation_date":1661633829,"post_id":73514287,"comment_id":129819842,"body_markdown":"it still does not want to take the (v) part so.","body":"it still does not want to take the (v) part so."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661633877,"post_id":73514287,"comment_id":129819852,"body_markdown":"Of course because you named the message &quot;m&quot;, not &quot;v&quot;. So it&#39;s &quot;m&quot; that you should add to ms, not &quot;v&quot;","body":"Of course because you named the message &quot;m&quot;, not &quot;v&quot;. So it&#39;s &quot;m&quot; that you should add to ms, not &quot;v&quot;"},{"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"score":0,"creation_date":1661634016,"post_id":73514287,"comment_id":129819876,"body_markdown":"that&#39;s the problem. the test is part of the exercise. i can&#39;t change it.\nif i use m the code does compile. but if i use the test that is part of the exercise it does not even compile due to the error.\nand thanks alot for your time","body":"that&#39;s the problem. the test is part of the exercise. i can&#39;t change it. if i use m the code does compile. but if i use the test that is part of the exercise it does not even compile due to the error. and thanks alot for your time"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661634273,"post_id":73514287,"comment_id":129819922,"body_markdown":"It doesn&#39;t make sense then, v is not a declared symbol and as you posted, the code can&#39;t compile. You are surely missing something in the exercise, are you sharing all the information you have?","body":"It doesn&#39;t make sense then, v is not a declared symbol and as you posted, the code can&#39;t compile. You are surely missing something in the exercise, are you sharing all the information you have?"},{"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"score":0,"creation_date":1661634452,"post_id":73514287,"comment_id":129819954,"body_markdown":"yes i am sure. \nthe exercise part i posted above, is the complete text of the exercise.","body":"yes i am sure.  the exercise part i posted above, is the complete text of the exercise."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661634684,"post_id":73514287,"comment_id":129819998,"body_markdown":"I&#39;m sorry but it really doesn&#39;t make sense, they can&#39;t expect to add(v) if v is not a declared symbol, that&#39;s basic java (the compiler would fail to compile). If you have a link to the exercise, I can have a look. But I&#39;m pretty sure they do `ms.add(m)` and if they don&#39;t, then this v must come from somewhere you&#39;re not sharing with us","body":"I&#39;m sorry but it really doesn&#39;t make sense, they can&#39;t expect to add(v) if v is not a declared symbol, that&#39;s basic java (the compiler would fail to compile). If you have a link to the exercise, I can have a look. But I&#39;m pretty sure they do <code>ms.add(m)</code> and if they don&#39;t, then this v must come from somewhere you&#39;re not sharing with us"},{"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"score":0,"creation_date":1661634826,"post_id":73514287,"comment_id":129820024,"body_markdown":"no need to be sorry, im really happy you are trying to help.\n\nExerciselink is : https://java-programming.mooc.fi/part-6/1-objects-within-objects","body":"no need to be sorry, im really happy you are trying to help.  Exerciselink is : <a href=\"https://java-programming.mooc.fi/part-6/1-objects-within-objects\" rel=\"nofollow noreferrer\">java-programming.mooc.fi/part-6/1-objects-within-objects</a>"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661635010,"post_id":73514287,"comment_id":129820042,"body_markdown":"It asks me to login to see the exercise, so I can&#39;t see it. If you submit your code naming the method &quot;add&quot; instead of &quot;addMessage&quot; in your class MessagingService, what does it say?","body":"It asks me to login to see the exercise, so I can&#39;t see it. If you submit your code naming the method &quot;add&quot; instead of &quot;addMessage&quot; in your class MessagingService, what does it say?"},{"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"score":0,"creation_date":1661635073,"post_id":73514287,"comment_id":129820060,"body_markdown":"I submitted it again after running it with (m) and it passed, but it didn&#39;t pass the local  tests.\nAnyway it is solved now thank you really much for your help, even so i still don&#39;t understand why it would order me to run the test with (v).","body":"I submitted it again after running it with (m) and it passed, but it didn&#39;t pass the local  tests. Anyway it is solved now thank you really much for your help, even so i still don&#39;t understand why it would order me to run the test with (v)."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661635315,"post_id":73514287,"comment_id":129820089,"body_markdown":"I think it&#39;s simply a typo in their message. They must be running the code with m (else it wouldn&#39;t compile), but probably they forgot to update the description they print for help. Anyway, as a suggestion, I don&#39;t know what is this website you&#39;re following to study java but by a quick look there are several bad practices implemented in their examples, I don&#39;t think you&#39;re learning java by the best source","body":"I think it&#39;s simply a typo in their message. They must be running the code with m (else it wouldn&#39;t compile), but probably they forgot to update the description they print for help. Anyway, as a suggestion, I don&#39;t know what is this website you&#39;re following to study java but by a quick look there are several bad practices implemented in their examples, I don&#39;t think you&#39;re learning java by the best source"},{"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"score":0,"creation_date":1661635807,"post_id":73514287,"comment_id":129820150,"body_markdown":"It is part of the MOOC fi (Multiple open online courses finnland) of the university of hellsinki.\ni use it because it is free and i wanted to see if im able to understand and learn  java, as im only doing it in my freetime and i was interested in learning java by a kind of guided course.\nwhat source would you suggest to use if i may ask.","body":"It is part of the MOOC fi (Multiple open online courses finnland) of the university of hellsinki. i use it because it is free and i wanted to see if im able to understand and learn  java, as im only doing it in my freetime and i was interested in learning java by a kind of guided course. what source would you suggest to use if i may ask."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661635907,"post_id":73514287,"comment_id":129820169,"body_markdown":"If you&#39;re really a beginner, I suggest you https://www.hackerrank.com/java-tutorial/ . The day you&#39;ll be interviewing for a software developer position, you&#39;ll most surely solve an exercise on this platform. It has a lot of nice theoretical references plus a lot of nice exercises that make you improving not only your java skills but generally speaking your software development thinking. Happy learning!","body":"If you&#39;re really a beginner, I suggest you <a href=\"https://www.hackerrank.com/java-tutorial/\" rel=\"nofollow noreferrer\">hackerrank.com/java-tutorial</a> . The day you&#39;ll be interviewing for a software developer position, you&#39;ll most surely solve an exercise on this platform. It has a lot of nice theoretical references plus a lot of nice exercises that make you improving not only your java skills but generally speaking your software development thinking. Happy learning!"},{"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"score":0,"creation_date":1661636081,"post_id":73514287,"comment_id":129820200,"body_markdown":"thank you for your patience and your help Matteo i really appreciate it.\nas this is my first post may i ask you how i can mark this question as solved and how to honour (thank) you on your profile ? \ni will look into the link you suggested :)","body":"thank you for your patience and your help Matteo i really appreciate it. as this is my first post may i ask you how i can mark this question as solved and how to honour (thank) you on your profile ?  i will look into the link you suggested :)"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1661636146,"post_id":73514287,"comment_id":129820206,"body_markdown":"I should have posted it as an answer, you can&#39;t accept a solution in comments. You can answer your own question and mark it as answered (in 2 days I think), no need to honour me I&#39;m glad if I could be of help :)","body":"I should have posted it as an answer, you can&#39;t accept a solution in comments. You can answer your own question and mark it as answered (in 2 days I think), no need to honour me I&#39;m glad if I could be of help :)"},{"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"score":1,"creation_date":1661636299,"post_id":73514287,"comment_id":129820229,"body_markdown":"I appreciate it even more then.\nHave a nice evening and a nice rest of the weekend :)","body":"I appreciate it even more then. Have a nice evening and a nice rest of the weekend :)"}],"owner":{"account_id":25865650,"reputation":1,"user_id":19597374,"display_name":"user19597374"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686983635,"creation_date":1661632974,"question_id":73514287,"body_markdown":"I try to solve the exercise mentioned in the title but can&#39;t get the tests to pass.\r\nI&#39;d really appreciate some help as im still a beginner.\r\n\r\nFor your understanding i&#39; ll post the exercise and explain what i&#39;ve tried.\r\nAt least i try to explain ;)\r\n\r\nPls excuse if i this post does not fullfill all the rules or standards as it&#39;s my first time posting and english is not my nativ language.\r\n\r\nThank you\r\n\r\nThe exercise:\r\n\r\n\r\n----------\r\n\r\n\r\nThe exercise template comes with a pre-defined Message class that can be used to create objects representing messages. Each message has a sender and some content.\r\n\r\nImplement the MessagingService class. The class must have a parameterless constructor and contain a list of Message objects. After that, add the following two methods to the class:\r\n\r\npublic void add(Message message) - adds a message passed as a parameter to the messaging service as long as the message content is at most 280 characters long.\r\npublic ArrayList&lt;Message&gt; getMessages() - returns the messages added to the messaging service.\r\nTip! You can find out the length of the string using the length() method associated with the string.\r\n\r\n\r\n----------\r\nIf i try to submit the exercise i get the following error.\r\n\r\nAn error occurred during execution of the program. Try out your program using the following code:\r\n\r\n    MessagingService ms = new MessagingService();\r\n    System.out.println(ms.getMessages());\r\n    Message m = new Message(&quot;sender&quot;, &quot;message&quot;);\r\n    ms.add(v);\r\n    System.out.println(ms.getMessages());\r\n\r\n----------\r\nIf i try the code listed above in my main class i get an error for ms.add(v)\r\n(cannot find symbol for variable v)\r\nif i change ms.add(v) into ms.addMessage(m) it prints Message m.\r\n\r\nBelow is the code \r\n\r\n**MessageServicing class**\r\n\r\n    import java.util.ArrayList;\r\n    public class MessagingService {\r\n        private ArrayList&lt;Message&gt; liste;\r\n     \r\n        \r\n        public MessagingService(){\r\n         this.liste=new ArrayList&lt;&gt;();\r\n         \r\n            \r\n        }\r\n        public void addMessage(Message message){\r\n            int max=280;\r\n            if(message.getContent().length() &lt;=max){\r\n            liste.add(message);   \r\n        }\r\n        }\r\n            public ArrayList&lt;Message&gt; getMessages(){\r\n                return this.liste;\r\n            }\r\n        }\r\n\r\n----------\r\nMessageclass\r\n\r\n    import java.util.Objects;\r\n    \r\n    public class Message {\r\n    \r\n        private String sender;\r\n        private String content;\r\n    \r\n        public Message(String sender, String content) {\r\n            this.sender = sender;\r\n            this.content = content;\r\n        }\r\n        public Message(String content){\r\n            this.content=content;\r\n        }\r\n    \r\n        public String getSender() {\r\n            return sender;\r\n        }\r\n    \r\n        public String getContent() {\r\n            return content;\r\n        }\r\n    \r\n        public String toString() {\r\n            return this.sender + &quot;: &quot; + this.content;\r\n        }\r\n    \r\n        // created using the &quot;insert code&quot; feature of NetBeans\r\n        @Override\r\n        public boolean equals(Object obj) {\r\n            if (this == obj) {\r\n                return true;\r\n            }\r\n            if (obj == null) {\r\n                return false;\r\n            }\r\n            if (getClass() != obj.getClass()) {\r\n                return false;\r\n            }\r\n            final Message other = (Message) obj;\r\n            if (!Objects.equals(this.sender, other.sender)) {\r\n                return false;\r\n            }\r\n            if (!Objects.equals(this.content, other.content)) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    \r\n    }\r\n\r\n----------\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Question regarding the tests of MOOC fi 1 part 6 exercise 3 java","body":"<p>I try to solve the exercise mentioned in the title but can't get the tests to pass.\nI'd really appreciate some help as im still a beginner.</p>\n<p>For your understanding i' ll post the exercise and explain what i've tried.\nAt least i try to explain ;)</p>\n<p>Pls excuse if i this post does not fullfill all the rules or standards as it's my first time posting and english is not my nativ language.</p>\n<p>Thank you</p>\n<p>The exercise:</p>\n<hr />\n<p>The exercise template comes with a pre-defined Message class that can be used to create objects representing messages. Each message has a sender and some content.</p>\n<p>Implement the MessagingService class. The class must have a parameterless constructor and contain a list of Message objects. After that, add the following two methods to the class:</p>\n<p>public void add(Message message) - adds a message passed as a parameter to the messaging service as long as the message content is at most 280 characters long.\npublic ArrayList getMessages() - returns the messages added to the messaging service.\nTip! You can find out the length of the string using the length() method associated with the string.</p>\n<hr />\n<p>If i try to submit the exercise i get the following error.</p>\n<p>An error occurred during execution of the program. Try out your program using the following code:</p>\n<pre><code>MessagingService ms = new MessagingService();\nSystem.out.println(ms.getMessages());\nMessage m = new Message(&quot;sender&quot;, &quot;message&quot;);\nms.add(v);\nSystem.out.println(ms.getMessages());\n</code></pre>\n<hr />\n<p>If i try the code listed above in my main class i get an error for ms.add(v)\n(cannot find symbol for variable v)\nif i change ms.add(v) into ms.addMessage(m) it prints Message m.</p>\n<p>Below is the code</p>\n<p><strong>MessageServicing class</strong></p>\n<pre><code>import java.util.ArrayList;\npublic class MessagingService {\n    private ArrayList&lt;Message&gt; liste;\n \n    \n    public MessagingService(){\n     this.liste=new ArrayList&lt;&gt;();\n     \n        \n    }\n    public void addMessage(Message message){\n        int max=280;\n        if(message.getContent().length() &lt;=max){\n        liste.add(message);   \n    }\n    }\n        public ArrayList&lt;Message&gt; getMessages(){\n            return this.liste;\n        }\n    }\n</code></pre>\n<hr />\n<p>Messageclass</p>\n<pre><code>import java.util.Objects;\n\npublic class Message {\n\n    private String sender;\n    private String content;\n\n    public Message(String sender, String content) {\n        this.sender = sender;\n        this.content = content;\n    }\n    public Message(String content){\n        this.content=content;\n    }\n\n    public String getSender() {\n        return sender;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public String toString() {\n        return this.sender + &quot;: &quot; + this.content;\n    }\n\n    // created using the &quot;insert code&quot; feature of NetBeans\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) {\n            return true;\n        }\n        if (obj == null) {\n            return false;\n        }\n        if (getClass() != obj.getClass()) {\n            return false;\n        }\n        final Message other = (Message) obj;\n        if (!Objects.equals(this.sender, other.sender)) {\n            return false;\n        }\n        if (!Objects.equals(this.content, other.content)) {\n            return false;\n        }\n        return true;\n    }\n\n}\n</code></pre>\n<hr />\n"},{"tags":["java","jdbc","xampp","blob"],"owner":{"account_id":24987008,"reputation":1,"user_id":18848678,"display_name":"Kurt Pascua"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686982638,"creation_date":1686982448,"question_id":76494963,"body_markdown":"I&#39;m trying to experiment with mouse events involving the mouse clicking the image and that image will be displayed to another JFrame inside of the labels. The error seems to be the id of the image and I put error handling to print &quot;No user found with the specified ID&quot;\r\n\r\nI use the mouseclick event to direct me to my Imageviewer class\r\n\r\n\r\n```\r\n    private void lblImageViewMouseClicked(java.awt.event.MouseEvent evt) {                                          \r\n        // TODO add your handling code here\r\n        byte[] img = null;\r\n        try {\r\n            Connection myConn = ConDB.getConnection();\r\n            Statement st = myConn.createStatement();\r\n\r\n            String query = &quot;SELECT * FROM users WHERE id=&#39;&quot; + id.getText() + &quot;&#39;&quot;;\r\n            ResultSet rs = st.executeQuery(query);\r\n            if (rs.next()) {\r\n                img = rs.getBytes(&quot;image_file&quot;);\r\n                if (img != null) {\r\n                    APImageViewer view = new APImageViewer();\r\n                    view.setTitle(&quot;Image View&quot;);\r\n                    view.setVisible(true);\r\n                    view.pack();\r\n                    view.setLocationRelativeTo(null);\r\n                    view.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n\r\n                    ImageIcon image = new ImageIcon(img);\r\n                    Image im = image.getImage();\r\n                    Image myImg = im.getScaledInstance(471, 482, Image.SCALE_SMOOTH);\r\n                    ImageIcon newImage = new ImageIcon(myImg);\r\n\r\n                    APImageViewer.lblImage.setIcon(newImage);\r\n\r\n                    // Close the current frame\r\n                    this.dispose();\r\n                } else {\r\n                    System.out.println(&quot;No image found for the specified user&quot;);\r\n                }\r\n            } else {\r\n                System.out.println(&quot;No user found with the specified ID&quot;);\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.println(e);\r\n        }\r\n    }  \r\n```\r\n\r\nand it will direct me to my ImageViewer I also instantiate it so it will be displayed on my label\r\n\r\n\r\n```\r\n    public void instantiateLblImageView() {\r\n        lblImage = new javax.swing.JLabel(); // Instantiate the lblImageView object\r\n        panelWrapper.add(lblImage, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 40, 530, 280)); // Add lblImageView to jPanel1\r\n\r\n    }\r\n```\r\n\r\nMy Database connection is\r\n\r\n\r\n```\r\npackage Main;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\n\r\npublic class ConDB {\r\n\r\n    public static Connection getConnection() throws Exception {\r\n        String dbRoot = &quot;jdbc:mysql://&quot;;\r\n        String hostName = &quot;localhost:3306/&quot;;\r\n        String dbName = &quot;humss_db&quot;;\r\n        String dbURL = dbRoot + hostName + dbName;\r\n\r\n        String hostUsername = &quot;root&quot;;\r\n        String hostPassword = &quot;&quot;;\r\n\r\n        try {\r\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n            Connection myConn = (Connection) DriverManager.getConnection(dbURL, hostUsername, hostPassword);\r\n            return myConn;\r\n        } catch (Exception e) {\r\n            System.err.println(e);\r\n            return null;\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\n","title":"Image won&#39;t display on Image viewer","body":"<p>I'm trying to experiment with mouse events involving the mouse clicking the image and that image will be displayed to another JFrame inside of the labels. The error seems to be the id of the image and I put error handling to print &quot;No user found with the specified ID&quot;</p>\n<p>I use the mouseclick event to direct me to my Imageviewer class</p>\n<pre><code>    private void lblImageViewMouseClicked(java.awt.event.MouseEvent evt) {                                          \n        // TODO add your handling code here\n        byte[] img = null;\n        try {\n            Connection myConn = ConDB.getConnection();\n            Statement st = myConn.createStatement();\n\n            String query = &quot;SELECT * FROM users WHERE id='&quot; + id.getText() + &quot;'&quot;;\n            ResultSet rs = st.executeQuery(query);\n            if (rs.next()) {\n                img = rs.getBytes(&quot;image_file&quot;);\n                if (img != null) {\n                    APImageViewer view = new APImageViewer();\n                    view.setTitle(&quot;Image View&quot;);\n                    view.setVisible(true);\n                    view.pack();\n                    view.setLocationRelativeTo(null);\n                    view.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n\n                    ImageIcon image = new ImageIcon(img);\n                    Image im = image.getImage();\n                    Image myImg = im.getScaledInstance(471, 482, Image.SCALE_SMOOTH);\n                    ImageIcon newImage = new ImageIcon(myImg);\n\n                    APImageViewer.lblImage.setIcon(newImage);\n\n                    // Close the current frame\n                    this.dispose();\n                } else {\n                    System.out.println(&quot;No image found for the specified user&quot;);\n                }\n            } else {\n                System.out.println(&quot;No user found with the specified ID&quot;);\n            }\n        } catch (Exception e) {\n            System.out.println(e);\n        }\n    }  \n</code></pre>\n<p>and it will direct me to my ImageViewer I also instantiate it so it will be displayed on my label</p>\n<pre><code>    public void instantiateLblImageView() {\n        lblImage = new javax.swing.JLabel(); // Instantiate the lblImageView object\n        panelWrapper.add(lblImage, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 40, 530, 280)); // Add lblImageView to jPanel1\n\n    }\n</code></pre>\n<p>My Database connection is</p>\n<pre><code>package Main;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\n\npublic class ConDB {\n\n    public static Connection getConnection() throws Exception {\n        String dbRoot = &quot;jdbc:mysql://&quot;;\n        String hostName = &quot;localhost:3306/&quot;;\n        String dbName = &quot;humss_db&quot;;\n        String dbURL = dbRoot + hostName + dbName;\n\n        String hostUsername = &quot;root&quot;;\n        String hostPassword = &quot;&quot;;\n\n        try {\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            Connection myConn = (Connection) DriverManager.getConnection(dbURL, hostUsername, hostPassword);\n            return myConn;\n        } catch (Exception e) {\n            System.err.println(e);\n            return null;\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","redis","truststore","lettuce"],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686981986,"creation_date":1686981986,"answer_id":76494943,"question_id":76494124,"body_markdown":"You are importing the cert provided into the default truststore (CACERTS) correctly.\r\n\r\nIt looks like the host being called (redis.internal.cloud.com) does not have a cert signed by redis_ca.pem or the hostname on the cert is wrong. Try to [pull the cert with openssl][1] and check against cert in redis_ca.pem.\r\n\r\nTry adding the actual host cert to CACERTS truststore.\r\n\r\n\r\n  [1]: https://serverfault.com/questions/661978/displaying-a-remote-ssl-certificate-details-using-cli-tools","title":"PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: lettuce redis cluster error","body":"<p>You are importing the cert provided into the default truststore (CACERTS) correctly.</p>\n<p>It looks like the host being called (redis.internal.cloud.com) does not have a cert signed by redis_ca.pem or the hostname on the cert is wrong. Try to <a href=\"https://serverfault.com/questions/661978/displaying-a-remote-ssl-certificate-details-using-cli-tools\">pull the cert with openssl</a> and check against cert in redis_ca.pem.</p>\n<p>Try adding the actual host cert to CACERTS truststore.</p>\n"}],"owner":{"account_id":2994486,"reputation":9111,"user_id":2541276,"accept_rate":55,"display_name":"user51"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686981986,"creation_date":1686959094,"question_id":76494124,"body_markdown":"I&#39;ve a below java program to connect to a secured redis cluster.\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport io.lettuce.core.RedisURI;\r\nimport io.lettuce.core.SocketOptions;\r\nimport io.lettuce.core.TimeoutOptions;\r\nimport io.lettuce.core.cluster.ClusterClientOptions;\r\nimport io.lettuce.core.cluster.ClusterTopologyRefreshOptions;\r\nimport io.lettuce.core.cluster.RedisClusterClient;\r\nimport io.lettuce.core.cluster.api.async.RedisAdvancedClusterAsyncCommands;\r\nimport io.lettuce.core.codec.ByteArrayCodec;\r\nimport java.time.Duration;\r\nimport java.time.temporal.ChronoUnit;\r\nimport java.util.concurrent.ExecutionException;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws ExecutionException, InterruptedException {\r\n        RedisURI uri = RedisURI.create(&quot;rediss://redis.internal.cloud.com:6379&quot;);\r\n        uri.setVerifyPeer(true);\r\n        RedisClusterClient rcc = RedisClusterClient.create(uri);\r\n        ClusterTopologyRefreshOptions tc = ClusterTopologyRefreshOptions.builder().refreshPeriod(Duration.of(10, ChronoUnit.MINUTES)).enableAllAdaptiveRefreshTriggers().build();\r\n        ClusterClientOptions.Builder options = ClusterClientOptions.builder().topologyRefreshOptions(tc);\r\n        SocketOptions so = SocketOptions.builder()\r\n                .connectTimeout(Duration.ofMillis(1000))\r\n                .tcpNoDelay(true)\r\n                .keepAlive(false)\r\n                .build();\r\n        TimeoutOptions to = TimeoutOptions.builder()\r\n                .timeoutCommands(true)\r\n                .fixedTimeout(Duration.ofMillis(1000))\r\n                .build();\r\n        ClusterClientOptions cco = options.socketOptions(so).timeoutOptions(to)\r\n                .cancelCommandsOnReconnectFailure(true)\r\n                .pingBeforeActivateConnection(true)\r\n                .build();\r\n                rcc.setOptions(cco);\r\n        RedisAdvancedClusterAsyncCommands conn = rcc.connect(new ByteArrayCodec()).async();\r\n    }\r\n}\r\n```\r\n\r\nThe redis labs has provided `redis_ca.pem` I don&#39;t know how to use that connect.\r\n\r\nWhen I run the code I get below exception - \r\n\r\n&gt;Jun 16, 2023 10:46:12 PM io.lettuce.core.cluster.topology.DefaultClusterTopologyRefresh lambda$openConnections$12\r\n&gt;WARNING: Unable to connect to [redis-11748.internal.c19953.us-west-2-mz.ec2.cloud.rlrcp.com:11748]: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n&gt;Exception in thread &quot;main&quot; io.lettuce.core.RedisConnectionException: Unable to establish a connection to Redis Cluster\r\n&gt;\tat io.lettuce.core.cluster.RedisClusterClient.lambda$assertInitialPartitions$26(RedisClusterClient.java:926)\r\n&gt;\tat io.lettuce.core.cluster.RedisClusterClient.get(RedisClusterClient.java:945)\r\n&gt;\tat io.lettuce.core.cluster.RedisClusterClient.assertInitialPartitions(RedisClusterClient.java:925)\r\n&gt;\tat io.lettuce.core.cluster.RedisClusterClient.connect(RedisClusterClient.java:401)\r\n&gt;\tat org.example.RedisClient.main(RedisClient.java:36)\r\n&gt;Caused by: io.lettuce.core.cluster.topology.DefaultClusterTopologyRefresh$CannotRetrieveClusterPartitions: Cannot retrieve cluster partitions from [rediss://redis.internal.cloud.com:6379]\r\n&gt;\r\n&gt;Details:\r\n&gt;\t[rediss://redis.internal.cloud.com:6379]: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n&gt;\r\n&gt;\tSuppressed: io.lettuce.core.RedisConnectionException: Unable to connect to [redis-11748.internal.c19953.us-west-2-mz.ec2.cloud.rlrcp.com:11748]: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n&gt;\t\tat io.lettuce.core.cluster.topology.DefaultClusterTopologyRefresh.lambda$openConnections$12(DefaultClusterTopologyRefresh.java:347)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)\r\n&gt;\t\tat io.lettuce.core.AbstractRedisClient.lambda$null$5(AbstractRedisClient.java:470)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)\r\n&gt;\t\tat io.lettuce.core.protocol.RedisHandshakeHandler.lambda$fail$4(RedisHandshakeHandler.java:139)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.addListener(DefaultPromise.java:185)\r\n&gt;\t\tat io.netty.channel.DefaultChannelPromise.addListener(DefaultChannelPromise.java:95)\r\n&gt;\t\tat io.netty.channel.DefaultChannelPromise.addListener(DefaultChannelPromise.java:30)\r\n&gt;\t\tat io.lettuce.core.protocol.RedisHandshakeHandler.fail(RedisHandshakeHandler.java:138)\r\n&gt;\t\tat io.lettuce.core.protocol.RedisHandshakeHandler.lambda$channelActive$3(RedisHandshakeHandler.java:107)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)\r\n&gt;\t\tat io.lettuce.core.RedisHandshake.lambda$tryHandshakeResp3$1(RedisHandshake.java:115)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\r\n&gt;\t\tat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)\r\n&gt;\t\tat io.lettuce.core.protocol.AsyncCommand.doCompleteExceptionally(AsyncCommand.java:139)\r\n&gt;\t\tat io.lettuce.core.protocol.AsyncCommand.completeExceptionally(AsyncCommand.java:132)\r\n&gt;\t\tat io.lettuce.core.RedisHandshake.lambda$dispatch$7(RedisHandshake.java:263)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)\r\n&gt;\t\tat io.netty.util.internal.PromiseNotificationUtil.tryFailure(PromiseNotificationUtil.java:64)\r\n&gt;\t\tat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:57)\r\n&gt;\t\tat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:31)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)\r\n&gt;\t\tat io.netty.util.internal.PromiseNotificationUtil.tryFailure(PromiseNotificationUtil.java:64)\r\n&gt;\t\tat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:57)\r\n&gt;\t\tat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:31)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)\r\n&gt;\t\tat io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)\r\n&gt;\t\tat io.netty.util.internal.PromiseNotificationUtil.tryFailure(PromiseNotificationUtil.java:64)\r\n&gt;\t\tat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:57)\r\n&gt;\t\tat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:31)\r\n&gt;\t\tat io.netty.channel.AbstractCoalescingBufferQueue.releaseAndCompleteAll(AbstractCoalescingBufferQueue.java:350)\r\n&gt;\t\tat io.netty.channel.AbstractCoalescingBufferQueue.releaseAndFailAll(AbstractCoalescingBufferQueue.java:208)\r\n&gt;\t\tat io.netty.handler.ssl.SslHandler.wrap(SslHandler.java:864)\r\n&gt;\t\tat io.netty.handler.ssl.SslHandler.wrapAndFlush(SslHandler.java:800)\r\n&gt;\t\tat io.netty.handler.ssl.SslHandler.handleUnwrapThrowable(SslHandler.java:1276)\r\n&gt;\t\tat io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1250)\r\n&gt;\t\tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1294)\r\n&gt;\t\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)\r\n&gt;\t\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468)\r\n&gt;\t\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\r\n&gt;\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n&gt;\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n&gt;\t\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n&gt;\t\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n&gt;\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n&gt;\t\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n&gt;\t\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n&gt;\t\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n&gt;\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n&gt;\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n&gt;\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n&gt;\t\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n&gt;\t\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n&gt;\t\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n&gt;\t\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n&gt;\t\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n&gt;\tCaused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n&gt;\t\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n&gt;\t\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:349)\r\n&gt;\t\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:292)\r\n&gt;\t\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:287)\r\n&gt;\t\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1357)\r\n&gt;\t\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1232)\r\n&gt;\t\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1175)\r\n&gt;\t\tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\r\n&gt;\t\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443)\r\n&gt;\t\tat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1074)\r\n&gt;\t\tat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1061)\r\n&gt;\t\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n&gt;\t\tat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask.run(SSLEngineImpl.java:1008)\r\n&gt;\t\tat io.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1558)\r\n&gt;\t\tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1404)\r\n&gt;\t\tat io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1245)\r\n&gt;\t\t... 20 more\r\n&gt;\tCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n&gt;\t\tat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\r\n&gt;\t\tat java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\r\n&gt;\t\tat java.base/sun.security.validator.Validator.validate(Validator.java:264)\r\n&gt;\t\tat java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313)\r\n&gt;\t\tat java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:276)\r\n&gt;\t\tat java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:141)\r\n&gt;\t\tat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1335)\r\n&gt;\t\t... 31 more\r\n&gt;\tCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n&gt;\t\tat java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\r\n&gt;\t\tat java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\r\n&gt;\t\tat java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\r\n&gt;\t\tat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\r\n&gt;\t\t... 37 more\r\n\r\nI also tried to import pem using the below command - \r\n\r\n\r\n```\r\n$ keytool -import -alias RedislabsCA -keystore ~/.sdkman/candidates/java/current/lib/security/cacerts -file ~/redis_ca.pem -storepass changeit -noprompt\r\nWarning: use -cacerts option to access cacerts keystore\r\nCertificate was added to keystore\r\n\r\nWarning:\r\nThe input uses the SHA1withRSA signature algorithm which is considered a security risk. This algorithm will be disabled in a future update.\r\n```\r\n\r\nHow can I configure truststore and password correctly?","title":"PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: lettuce redis cluster error","body":"<p>I've a below java program to connect to a secured redis cluster.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport io.lettuce.core.RedisURI;\nimport io.lettuce.core.SocketOptions;\nimport io.lettuce.core.TimeoutOptions;\nimport io.lettuce.core.cluster.ClusterClientOptions;\nimport io.lettuce.core.cluster.ClusterTopologyRefreshOptions;\nimport io.lettuce.core.cluster.RedisClusterClient;\nimport io.lettuce.core.cluster.api.async.RedisAdvancedClusterAsyncCommands;\nimport io.lettuce.core.codec.ByteArrayCodec;\nimport java.time.Duration;\nimport java.time.temporal.ChronoUnit;\nimport java.util.concurrent.ExecutionException;\n\npublic class Main {\n    public static void main(String[] args) throws ExecutionException, InterruptedException {\n        RedisURI uri = RedisURI.create(&quot;rediss://redis.internal.cloud.com:6379&quot;);\n        uri.setVerifyPeer(true);\n        RedisClusterClient rcc = RedisClusterClient.create(uri);\n        ClusterTopologyRefreshOptions tc = ClusterTopologyRefreshOptions.builder().refreshPeriod(Duration.of(10, ChronoUnit.MINUTES)).enableAllAdaptiveRefreshTriggers().build();\n        ClusterClientOptions.Builder options = ClusterClientOptions.builder().topologyRefreshOptions(tc);\n        SocketOptions so = SocketOptions.builder()\n                .connectTimeout(Duration.ofMillis(1000))\n                .tcpNoDelay(true)\n                .keepAlive(false)\n                .build();\n        TimeoutOptions to = TimeoutOptions.builder()\n                .timeoutCommands(true)\n                .fixedTimeout(Duration.ofMillis(1000))\n                .build();\n        ClusterClientOptions cco = options.socketOptions(so).timeoutOptions(to)\n                .cancelCommandsOnReconnectFailure(true)\n                .pingBeforeActivateConnection(true)\n                .build();\n                rcc.setOptions(cco);\n        RedisAdvancedClusterAsyncCommands conn = rcc.connect(new ByteArrayCodec()).async();\n    }\n}\n</code></pre>\n<p>The redis labs has provided <code>redis_ca.pem</code> I don't know how to use that connect.</p>\n<p>When I run the code I get below exception -</p>\n<blockquote>\n<p>Jun 16, 2023 10:46:12 PM io.lettuce.core.cluster.topology.DefaultClusterTopologyRefresh lambda$openConnections$12\nWARNING: Unable to connect to [redis-11748.internal.c19953.us-west-2-mz.ec2.cloud.rlrcp.com:11748]: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nException in thread &quot;main&quot; io.lettuce.core.RedisConnectionException: Unable to establish a connection to Redis Cluster\nat io.lettuce.core.cluster.RedisClusterClient.lambda$assertInitialPartitions$26(RedisClusterClient.java:926)\nat io.lettuce.core.cluster.RedisClusterClient.get(RedisClusterClient.java:945)\nat io.lettuce.core.cluster.RedisClusterClient.assertInitialPartitions(RedisClusterClient.java:925)\nat io.lettuce.core.cluster.RedisClusterClient.connect(RedisClusterClient.java:401)\nat org.example.RedisClient.main(RedisClient.java:36)\nCaused by: io.lettuce.core.cluster.topology.DefaultClusterTopologyRefresh$CannotRetrieveClusterPartitions: Cannot retrieve cluster partitions from [rediss://redis.internal.cloud.com:6379]</p>\n<p>Details:\n[rediss://redis.internal.cloud.com:6379]: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</p>\n<p>Suppressed: io.lettuce.core.RedisConnectionException: Unable to connect to [redis-11748.internal.c19953.us-west-2-mz.ec2.cloud.rlrcp.com:11748]: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat io.lettuce.core.cluster.topology.DefaultClusterTopologyRefresh.lambda$openConnections$12(DefaultClusterTopologyRefresh.java:347)\nat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)\nat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837)\nat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\nat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)\nat io.lettuce.core.AbstractRedisClient.lambda$null$5(AbstractRedisClient.java:470)\nat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)\nat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837)\nat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\nat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)\nat io.lettuce.core.protocol.RedisHandshakeHandler.lambda$fail$4(RedisHandshakeHandler.java:139)\nat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\nat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)\nat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\nat io.netty.util.concurrent.DefaultPromise.addListener(DefaultPromise.java:185)\nat io.netty.channel.DefaultChannelPromise.addListener(DefaultChannelPromise.java:95)\nat io.netty.channel.DefaultChannelPromise.addListener(DefaultChannelPromise.java:30)\nat io.lettuce.core.protocol.RedisHandshakeHandler.fail(RedisHandshakeHandler.java:138)\nat io.lettuce.core.protocol.RedisHandshakeHandler.lambda$channelActive$3(RedisHandshakeHandler.java:107)\nat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)\nat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837)\nat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\nat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)\nat io.lettuce.core.RedisHandshake.lambda$tryHandshakeResp3$1(RedisHandshake.java:115)\nat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:859)\nat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:837)\nat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:506)\nat java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2088)\nat io.lettuce.core.protocol.AsyncCommand.doCompleteExceptionally(AsyncCommand.java:139)\nat io.lettuce.core.protocol.AsyncCommand.completeExceptionally(AsyncCommand.java:132)\nat io.lettuce.core.RedisHandshake.lambda$dispatch$7(RedisHandshake.java:263)\nat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\nat io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583)\nat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559)\nat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\nat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)\nat io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)\nat io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)\nat io.netty.util.internal.PromiseNotificationUtil.tryFailure(PromiseNotificationUtil.java:64)\nat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:57)\nat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:31)\nat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\nat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)\nat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\nat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)\nat io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)\nat io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)\nat io.netty.util.internal.PromiseNotificationUtil.tryFailure(PromiseNotificationUtil.java:64)\nat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:57)\nat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:31)\nat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590)\nat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:557)\nat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492)\nat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636)\nat io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:629)\nat io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:118)\nat io.netty.util.internal.PromiseNotificationUtil.tryFailure(PromiseNotificationUtil.java:64)\nat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:57)\nat io.netty.channel.DelegatingChannelPromiseNotifier.operationComplete(DelegatingChannelPromiseNotifier.java:31)\nat io.netty.channel.AbstractCoalescingBufferQueue.releaseAndCompleteAll(AbstractCoalescingBufferQueue.java:350)\nat io.netty.channel.AbstractCoalescingBufferQueue.releaseAndFailAll(AbstractCoalescingBufferQueue.java:208)\nat io.netty.handler.ssl.SslHandler.wrap(SslHandler.java:864)\nat io.netty.handler.ssl.SslHandler.wrapAndFlush(SslHandler.java:800)\nat io.netty.handler.ssl.SslHandler.handleUnwrapThrowable(SslHandler.java:1276)\nat io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1250)\nat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1294)\nat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529)\nat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468)\nat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\nat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\nat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\nat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\nat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\nat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\nat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\nat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\nat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\nat java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\nat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:349)\nat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:292)\nat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:287)\nat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1357)\nat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.onConsumeCertificate(CertificateMessage.java:1232)\nat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.consume(CertificateMessage.java:1175)\nat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:392)\nat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:443)\nat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1074)\nat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1061)\nat java.base/java.security.AccessController.doPrivileged(Native Method)\nat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask.run(SSLEngineImpl.java:1008)\nat io.netty.handler.ssl.SslHandler.runDelegatedTasks(SslHandler.java:1558)\nat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1404)\nat io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1245)\n... 20 more\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\nat java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\nat java.base/sun.security.validator.Validator.validate(Validator.java:264)\nat java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:313)\nat java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:276)\nat java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:141)\nat java.base/sun.security.ssl.CertificateMessage$T13CertificateConsumer.checkServerCerts(CertificateMessage.java:1335)\n... 31 more\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\nat java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\nat java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\nat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\n... 37 more</p>\n</blockquote>\n<p>I also tried to import pem using the below command -</p>\n<pre><code>$ keytool -import -alias RedislabsCA -keystore ~/.sdkman/candidates/java/current/lib/security/cacerts -file ~/redis_ca.pem -storepass changeit -noprompt\nWarning: use -cacerts option to access cacerts keystore\nCertificate was added to keystore\n\nWarning:\nThe input uses the SHA1withRSA signature algorithm which is considered a security risk. This algorithm will be disabled in a future update.\n</code></pre>\n<p>How can I configure truststore and password correctly?</p>\n"},{"tags":["java","mysql","spring","spring-boot","jdbc"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686905195,"post_id":76488362,"comment_id":134865451,"body_markdown":"Try to remove the prepared statements cache properties. Query cache is not supported any more by MySQL driver.","body":"Try to remove the prepared statements cache properties. Query cache is not supported any more by MySQL driver."},{"owner":{"account_id":16229941,"reputation":13,"user_id":11719021,"display_name":"Tushar Srivastava"},"score":0,"creation_date":1686907170,"post_id":76488362,"comment_id":134865868,"body_markdown":"Still getting same error after updating the properties. Updated properties are. #jdbc.master.dataSource.cachePrepStmts= true\n\n#jdbc.master.dataSource.prepStmtCacheSize= 250\n\n#jdbc.master.dataSource.prepStmtCacheSqlLimit= 2048.    #jdbc.master.dataSource.cacheServerConfiguration=true","body":"Still getting same error after updating the properties. Updated properties are. #jdbc.master.dataSource.cachePrepStmts= true  #jdbc.master.dataSource.prepStmtCacheSize= 250  #jdbc.master.dataSource.prepStmtCacheSqlLimit= 2048.    #jdbc.master.dataSource.cacheServerConfiguration=true"},{"owner":{"account_id":7035840,"reputation":33810,"user_id":5389997,"display_name":"Shadow"},"score":0,"creation_date":1686907690,"post_id":76488362,"comment_id":134865997,"body_markdown":"I don&#39;t think any of these properties set the query cache parameter. None of the current mysql jdb driver versions should have a property that requires query cache","body":"I don&#39;t think any of these properties set the query cache parameter. None of the current mysql jdb driver versions should have a property that requires query cache"}],"answers":[{"tags":[],"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686981853,"creation_date":1686981853,"answer_id":76494938,"question_id":76488362,"body_markdown":"The Query Cache has been removed from 8.0.xx  Hence the several Variables for `query_cache_%` are no longer available.  (And the Status values for `Qc_%` are gone.)\r\n\r\nAny 3rd party product touching those needs to be updated.\r\n\r\n(The &#39;deprecation&#39; warning was probably given a few years ago with 5.7 or 8.0.0.)","title":"Failed to create/setup connection: Unknown system variable &#39; query_cache_size&#39;&quot;}","body":"<p>The Query Cache has been removed from 8.0.xx  Hence the several Variables for <code>query_cache_%</code> are no longer available.  (And the Status values for <code>Qc_%</code> are gone.)</p>\n<p>Any 3rd party product touching those needs to be updated.</p>\n<p>(The 'deprecation' warning was probably given a few years ago with 5.7 or 8.0.0.)</p>\n"}],"owner":{"account_id":16229941,"reputation":13,"user_id":11719021,"display_name":"Tushar Srivastava"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686981853,"creation_date":1686904346,"question_id":76488362,"body_markdown":"I am running app with JDBC and MySQL using hikari pool, but I can&#39;t build it because of this error :\r\n\r\n    &quot;,&quot;message&quot;:&quot;HikariPool-1 - Starting...&quot;}\r\n    {&quot;timestamp&quot;:&quot;16 Jun 2023 13:42:04,078&quot;,&quot;thread&quot;:&quot;Timer-0&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;logger&quot;:&quot;com.zaxxer.hikari.pool.PoolBase&quot;,&quot;message&quot;:&quot;HikariPool-1 - Failed to create/setup connection: Unknown system variable &#39;\r\n    query_cache_size&#39;&quot;}\r\n    {&quot;timestamp&quot;:&quot;16 Jun 2023 13:42:04,078&quot;,&quot;thread&quot;:&quot;Timer-0&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;logger&quot;:&quot;com.zaxxer.hikari.pool.HikariPool&quot;,&quot;message&quot;:&quot;HikariPool-1 - Cannot acquire connection from data source&quot;,&quot;error.type&quot;:&quot;\r\n    java.sql.SQLException&quot;,&quot;error.message&quot;:&quot;Unknown system variable &#39;query_cache_size&#39;&quot;,&quot;stack_trace&quot;:&quot;java.sql.SQLException: Unknown system variable &#39;query_cache_size&#39;\\n\\tat com.mysql.cj.jdbc.exceptions.SQLE\r\n    rror.createSQLException(SQLError.java:130)\\n\\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(Conn\r\n    ectionImpl.java:825)\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446)\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)\\n\\tat com.mysql.cj.jdbc.NonRegisteri\r\n    ngDriver.connect(NonRegisteringDriver.java:188)\\n\\tat com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:417)\\n\\tat com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:1\r\n    29)\\n\\tat com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:114)\\n\\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:367)\\n\\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntr\r\n    y(PoolBase.java:196)\\n\\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:467)\\n\\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:541)\\n\\tat com.zaxxer.hikari.pool.Hi\r\n    kariPool.&lt;init&gt;(HikariPool.java:115)\\n\\tat com.zaxxer.hikari.HikariDataSource.&lt;init&gt;(HikariDataSource.java:81)\\n\\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method\r\n    )\\n\\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\\n\\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(D\r\n    elegatingConstructorAccessorImpl.java:45)\\n\\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\\n\\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.ja\r\n    va:480)\\n\\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211)\\n\\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.j\r\n    ava:117)\\n\\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:311)\\n\\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstruct\r\n    or(ConstructorResolver.java:296)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)\\n\\tat org.springframew\r\n    ork.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFac\r\n    tory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\\n\\\r\n    tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\\n\\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton\r\n    (DefaultSingletonBeanRegistry.java:234)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\\n\\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)\\n\\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\\n\\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\\n\\tat com.paytm.wallet.dao.manager.BeanManager.&lt;clinit&gt;(BeanManager.java:47)\\n\\tat com.paytm.wallet.dao.domain.PlatformManager.getAllPlatforms(PlatformManager.java:123)\\n\\tat com.paytm.wallet.dao.cache.PlatformCache.loadPlatformHashmap(PlatformCache.java:64)\\n\\tat com.paytm.wallet.dao.cache.PlatformCache$LoadPlatform.run(PlatformCache.java:46)\\n\\tat java.base/java.util.TimerThread.mainLoop(Timer.java:566)\\n\\tat java.base/java.util.TimerThread.run(Timer.java:516)\\n&quot;}\r\n\r\nI have already updated the mysql version and driver as follow but still getting same error:\r\n```\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&lt;version&gt;8.0.33&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\njdbc driver property as follow\r\n\r\n\r\n```\r\njdbc.master.driver=com.mysql.cj.jdbc.Driver\r\n#jdbc.master.driver=com.mysql.jdbc.Driver\r\n\r\njdbc.master.url=jdbc:mysql://localhost:6033/test\r\n\r\njdbc.master.maximumPoolSize=30\r\n\r\njdbc.master.dataSource.cachePrepStmts= true\r\n\r\njdbc.master.dataSource.prepStmtCacheSize= 250\r\n\r\njdbc.master.dataSource.prepStmtCacheSqlLimit= 2048\r\n\r\njdbc.master.connectionTimeout=250\r\n\r\njdbc.master.dataSource.useLocalSessionState=true\r\n\r\njdbc.master.dataSource.readOnlyPropagatesToServer=true\r\n\r\njdbc.master.dataSource.cacheServerConfiguration=true\r\n`\r\njdbc.master.dataSource.characterEncoding=UTF-8\r\n```\r\n\r\nAlso mysql version is as follow\r\n| version                  | 8.0.31                       |\r\n| version_comment          | MySQL Community Server - GPL\r\n","title":"Failed to create/setup connection: Unknown system variable &#39; query_cache_size&#39;&quot;}","body":"<p>I am running app with JDBC and MySQL using hikari pool, but I can't build it because of this error :</p>\n<pre><code>&quot;,&quot;message&quot;:&quot;HikariPool-1 - Starting...&quot;}\n{&quot;timestamp&quot;:&quot;16 Jun 2023 13:42:04,078&quot;,&quot;thread&quot;:&quot;Timer-0&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;logger&quot;:&quot;com.zaxxer.hikari.pool.PoolBase&quot;,&quot;message&quot;:&quot;HikariPool-1 - Failed to create/setup connection: Unknown system variable '\nquery_cache_size'&quot;}\n{&quot;timestamp&quot;:&quot;16 Jun 2023 13:42:04,078&quot;,&quot;thread&quot;:&quot;Timer-0&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;logger&quot;:&quot;com.zaxxer.hikari.pool.HikariPool&quot;,&quot;message&quot;:&quot;HikariPool-1 - Cannot acquire connection from data source&quot;,&quot;error.type&quot;:&quot;\njava.sql.SQLException&quot;,&quot;error.message&quot;:&quot;Unknown system variable 'query_cache_size'&quot;,&quot;stack_trace&quot;:&quot;java.sql.SQLException: Unknown system variable 'query_cache_size'\\n\\tat com.mysql.cj.jdbc.exceptions.SQLE\nrror.createSQLException(SQLError.java:130)\\n\\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(Conn\nectionImpl.java:825)\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446)\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)\\n\\tat com.mysql.cj.jdbc.NonRegisteri\nngDriver.connect(NonRegisteringDriver.java:188)\\n\\tat com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:417)\\n\\tat com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:1\n29)\\n\\tat com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:114)\\n\\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:367)\\n\\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntr\ny(PoolBase.java:196)\\n\\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:467)\\n\\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:541)\\n\\tat com.zaxxer.hikari.pool.Hi\nkariPool.&lt;init&gt;(HikariPool.java:115)\\n\\tat com.zaxxer.hikari.HikariDataSource.&lt;init&gt;(HikariDataSource.java:81)\\n\\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method\n)\\n\\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\\n\\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(D\nelegatingConstructorAccessorImpl.java:45)\\n\\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\\n\\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.ja\nva:480)\\n\\tat org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211)\\n\\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.j\nava:117)\\n\\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:311)\\n\\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstruct\nor(ConstructorResolver.java:296)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)\\n\\tat org.springframew\nork.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFac\ntory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\\n\\\ntat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\\n\\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton\n(DefaultSingletonBeanRegistry.java:234)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\\n\\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:330)\\n\\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:113)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1707)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1452)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\\n\\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\\n\\tat com.paytm.wallet.dao.manager.BeanManager.&lt;clinit&gt;(BeanManager.java:47)\\n\\tat com.paytm.wallet.dao.domain.PlatformManager.getAllPlatforms(PlatformManager.java:123)\\n\\tat com.paytm.wallet.dao.cache.PlatformCache.loadPlatformHashmap(PlatformCache.java:64)\\n\\tat com.paytm.wallet.dao.cache.PlatformCache$LoadPlatform.run(PlatformCache.java:46)\\n\\tat java.base/java.util.TimerThread.mainLoop(Timer.java:566)\\n\\tat java.base/java.util.TimerThread.run(Timer.java:516)\\n&quot;}\n</code></pre>\n<p>I have already updated the mysql version and driver as follow but still getting same error:</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;mysql&lt;/groupId&gt;\n&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n&lt;version&gt;8.0.33&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>jdbc driver property as follow</p>\n<pre><code>jdbc.master.driver=com.mysql.cj.jdbc.Driver\n#jdbc.master.driver=com.mysql.jdbc.Driver\n\njdbc.master.url=jdbc:mysql://localhost:6033/test\n\njdbc.master.maximumPoolSize=30\n\njdbc.master.dataSource.cachePrepStmts= true\n\njdbc.master.dataSource.prepStmtCacheSize= 250\n\njdbc.master.dataSource.prepStmtCacheSqlLimit= 2048\n\njdbc.master.connectionTimeout=250\n\njdbc.master.dataSource.useLocalSessionState=true\n\njdbc.master.dataSource.readOnlyPropagatesToServer=true\n\njdbc.master.dataSource.cacheServerConfiguration=true\n`\njdbc.master.dataSource.characterEncoding=UTF-8\n</code></pre>\n<p>Also mysql version is as follow\n| version                  | 8.0.31                       |\n| version_comment          | MySQL Community Server - GPL</p>\n"},{"tags":["java","intellij-idea","package"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1686980431,"post_id":76494809,"comment_id":134876178,"body_markdown":"You can also navigate the tree using arrow keys. Is that better?","body":"You can also navigate the tree using arrow keys. Is that better?"},{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1686980941,"post_id":76494809,"comment_id":134876217,"body_markdown":"@Sweeper it replaces five mouse clicks by ten key hits: at each step, one key left to open the level, one key down to go to the next level below. So I&#39;m sorry, but it doesn&#39;t really help.","body":"@Sweeper it replaces five mouse clicks by ten key hits: at each step, one key left to open the level, one key down to go to the next level below. So I&#39;m sorry, but it doesn&#39;t really help."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686981198,"creation_date":1686981198,"answer_id":76494915,"question_id":76494809,"body_markdown":"On the top of the navigator, there is a dropdown menu:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf you switch that to &quot;Packages&quot; (with two clicks), it shows you all the packages:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWith just one more click on a package, you get something similar to your last picture, showing you the classes.\r\n\r\nAlso note that you can navigate this tree with arrow keys. Up and down to select a node, left to expand a node/select the child node, and right to collapse a node/select the parent node. So you *technically* don&#39;t need any &quot;clicks&quot;.\r\n\r\nAnother option would be to find the parent folder of the packages using the shortcut for Navigate -&gt; Files... (it&#39;s command-shift-O on macOS, not sure about Windows) \r\n\r\n[![enter image description here][3]][3]\r\n\r\nIf your modules have a consistent directory structure, this could be useful since the folder you are looking for has a known name, like &quot;main&quot;, &quot;test&quot;, or &quot;java&quot;.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4Gkesm.png\r\n  [2]: https://i.stack.imgur.com/vOgEXm.png\r\n  [3]: https://i.stack.imgur.com/BThLjm.png","title":"How may I reduce the number of mouse clicks to look at the sources of the packages of one module? Currently I have five mouse clicks to do each time","body":"<p>On the top of the navigator, there is a dropdown menu:</p>\n<p><a href=\"https://i.stack.imgur.com/4Gkesm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4Gkesm.png\" alt=\"enter image description here\" /></a></p>\n<p>If you switch that to &quot;Packages&quot; (with two clicks), it shows you all the packages:</p>\n<p><a href=\"https://i.stack.imgur.com/vOgEXm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vOgEXm.png\" alt=\"enter image description here\" /></a></p>\n<p>With just one more click on a package, you get something similar to your last picture, showing you the classes.</p>\n<p>Also note that you can navigate this tree with arrow keys. Up and down to select a node, left to expand a node/select the child node, and right to collapse a node/select the parent node. So you <em>technically</em> don't need any &quot;clicks&quot;.</p>\n<p>Another option would be to find the parent folder of the packages using the shortcut for Navigate -&gt; Files... (it's command-shift-O on macOS, not sure about Windows)</p>\n<p><a href=\"https://i.stack.imgur.com/BThLjm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BThLjm.png\" alt=\"enter image description here\" /></a></p>\n<p>If your modules have a consistent directory structure, this could be useful since the folder you are looking for has a known name, like &quot;main&quot;, &quot;test&quot;, or &quot;java&quot;.</p>\n"}],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76494915,"answer_count":1,"score":1,"last_activity_date":1686981198,"creation_date":1686978699,"question_id":76494809,"body_markdown":"I do not know, in advance, the name of the _Java_ source or the package I&#39;m looking for.  \r\nWith _Tree Appearance: Flatten Package_, in _Project View_, I&#39;m starting here:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe first mouse click I&#39;m doing leads me here:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThe second one:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThe third:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nFourth:\r\n\r\n[![enter image description here][5]][5]\r\n\r\nFifth:\r\n\r\n[![enter image description here][6]][6]\r\n\r\nAnd this isn&#39;t convenient. Most of my modules have a single package, but I have twenty modules in my project, and developing with _IntelliJ_ is: _click click click click click click click..._ \r\n\r\nI&#39;m missing an option somewhere that (like in _Eclipse_, if I remember well) opens by default a folded _Java_ module on its first package available.\r\n\r\nMeaning that by clicking on the module name, in the first picture, I would immediately see what is shown on the last picture of my question.\r\n\r\nIs it possible?\r\n\r\nOf course, if then all the packages of my module are unfolded and clearly shown, it could be interesting. But if only the first package is opened, showing its sources, it would be already convenient.\r\n\r\n  [1]: https://i.stack.imgur.com/BqRcU.png\r\n  [2]: https://i.stack.imgur.com/8UduD.png\r\n  [3]: https://i.stack.imgur.com/z732t.png\r\n  [4]: https://i.stack.imgur.com/daNos.png\r\n  [5]: https://i.stack.imgur.com/4aCN3.png\r\n  [6]: https://i.stack.imgur.com/0VFMo.png","title":"How may I reduce the number of mouse clicks to look at the sources of the packages of one module? Currently I have five mouse clicks to do each time","body":"<p>I do not know, in advance, the name of the <em>Java</em> source or the package I'm looking for.<br />\nWith <em>Tree Appearance: Flatten Package</em>, in <em>Project View</em>, I'm starting here:</p>\n<p><a href=\"https://i.stack.imgur.com/BqRcU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BqRcU.png\" alt=\"enter image description here\" /></a></p>\n<p>The first mouse click I'm doing leads me here:</p>\n<p><a href=\"https://i.stack.imgur.com/8UduD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8UduD.png\" alt=\"enter image description here\" /></a></p>\n<p>The second one:</p>\n<p><a href=\"https://i.stack.imgur.com/z732t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z732t.png\" alt=\"enter image description here\" /></a></p>\n<p>The third:</p>\n<p><a href=\"https://i.stack.imgur.com/daNos.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/daNos.png\" alt=\"enter image description here\" /></a></p>\n<p>Fourth:</p>\n<p><a href=\"https://i.stack.imgur.com/4aCN3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4aCN3.png\" alt=\"enter image description here\" /></a></p>\n<p>Fifth:</p>\n<p><a href=\"https://i.stack.imgur.com/0VFMo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0VFMo.png\" alt=\"enter image description here\" /></a></p>\n<p>And this isn't convenient. Most of my modules have a single package, but I have twenty modules in my project, and developing with <em>IntelliJ</em> is: <em>click click click click click click click...</em></p>\n<p>I'm missing an option somewhere that (like in <em>Eclipse</em>, if I remember well) opens by default a folded <em>Java</em> module on its first package available.</p>\n<p>Meaning that by clicking on the module name, in the first picture, I would immediately see what is shown on the last picture of my question.</p>\n<p>Is it possible?</p>\n<p>Of course, if then all the packages of my module are unfolded and clearly shown, it could be interesting. But if only the first package is opened, showing its sources, it would be already convenient.</p>\n"},{"tags":["java","reflection","casting"],"comments":[{"owner":{"account_id":1181998,"reputation":798,"user_id":1156739,"accept_rate":100,"display_name":"Pawel"},"score":0,"creation_date":1326926683,"post_id":8918550,"comment_id":11157881,"body_markdown":"There is a good explanation: [http://stackoverflow.com/questions/2092659/what-is-difference-between-class-forname-and-class-forname-newinstance][1]\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/2092659/what-is-difference-between-class-forname-and-class-forname-newinstance","body":"There is a good explanation: [<a href=\"http://stackoverflow.com/questions/2092659/what-is-difference-between-class-forname-and-class-forname-newinstance][1]\" title=\"what is difference between class forname and class forname newinstance%5d%5b1%5d\">stackoverflow.com/questions/2092659/&hellip;</a>        [1]: <a href=\"http://stackoverflow.com/questions/2092659/what-is-difference-between-class-forname-and-class-forname-newinstance\" title=\"what is difference between class forname and class forname newinstance\">stackoverflow.com/questions/2092659/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1326926433,"creation_date":1326926433,"answer_id":8918592,"question_id":8918550,"body_markdown":"The return type of `Class.forName` will be `Class&lt;? extends Object&gt;`. You want `Class&lt;? extends String&gt;`, for instance using `String.class`. \r\n\r\n    String str = String.class.cast(object);\r\n\r\nNot very useful, until you start replacing `String` with some kind of interface type.\r\n\r\nIn any case, reflection is generally evil.","title":"Cast via reflection and use of Class.cast()","body":"<p>The return type of <code>Class.forName</code> will be <code>Class&lt;? extends Object&gt;</code>. You want <code>Class&lt;? extends String&gt;</code>, for instance using <code>String.class</code>. </p>\n\n<pre><code>String str = String.class.cast(object);\n</code></pre>\n\n<p>Not very useful, until you start replacing <code>String</code> with some kind of interface type.</p>\n\n<p>In any case, reflection is generally evil.</p>\n"},{"tags":[],"owner":{"account_id":309467,"reputation":670,"user_id":621923,"display_name":"David Lantos"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1326926629,"creation_date":1326926629,"answer_id":8918633,"question_id":8918550,"body_markdown":"`Class.forName` will return a `Class&lt;?&gt;` type object. The `cast` method will return the type parameter of Class. Thus, in this case it&#39;ll return a ? (Object) type object.\r\n\r\nYou should try:\r\n\r\n    Class&lt;String&gt; strClass = (Class&lt;String&gt;) Class.forName(&quot;java.lang.String&quot;);\r\n    String str = strClass.cast(object);\r\n\r\nSee also [Class.cast()][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#cast%28java.lang.Object%29","title":"Cast via reflection and use of Class.cast()","body":"<p><code>Class.forName</code> will return a <code>Class&lt;?&gt;</code> type object. The <code>cast</code> method will return the type parameter of Class. Thus, in this case it'll return a ? (Object) type object.</p>\n\n<p>You should try:</p>\n\n<pre><code>Class&lt;String&gt; strClass = (Class&lt;String&gt;) Class.forName(\"java.lang.String\");\nString str = strClass.cast(object);\n</code></pre>\n\n<p>See also <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#cast%28java.lang.Object%29\" rel=\"nofollow\">Class.cast()</a></p>\n"},{"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1326962921,"creation_date":1326929899,"answer_id":8919164,"question_id":8918550,"body_markdown":"You can avoid a warning e.g. with the following code:\r\n\r\n    public &lt;T&gt; T getObject(Class&lt;T&gt; type){\r\n      Object o = getSomeObject();\r\n      if (type.isInstance(o)){\r\n         return type.cast(o);\r\n      } else {\r\n         return null;\r\n      }\r\n    }\r\n\r\nwhile the following code will raise a warning:\r\n\r\n    public &lt;T&gt; T getObject(){\r\n      return (T) getSomeObject();\r\n    }","title":"Cast via reflection and use of Class.cast()","body":"<p>You can avoid a warning e.g. with the following code:</p>\n\n<pre><code>public &lt;T&gt; T getObject(Class&lt;T&gt; type){\n  Object o = getSomeObject();\n  if (type.isInstance(o)){\n     return type.cast(o);\n  } else {\n     return null;\n  }\n}\n</code></pre>\n\n<p>while the following code will raise a warning:</p>\n\n<pre><code>public &lt;T&gt; T getObject(){\n  return (T) getSomeObject();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1686979254,"creation_date":1326931641,"answer_id":8919379,"question_id":8918550,"body_markdown":"An example where is does work:\r\n\r\n    class Favorites {\r\n        private Map&lt;Class&lt;?&gt;, Object&gt; map = new HashMap&lt;Class&lt;?&gt;, Object&gt;();\r\n\r\n        public &lt;T&gt; T get(Class&lt;T&gt; clazz) {\r\n            return clazz.cast(map.get(clazz));\r\n        }\r\n\r\n        public &lt;T&gt; void put(Class&lt;T&gt; clazz, T favorite) {\r\n            map.put(clazz, favorite);\r\n        }\r\n    }\r\n\r\nwhich allows you to write:\r\n\r\n    Favorites favs = new Favorites();\r\n    favs.put(String.class, &quot;Hello&quot;);\r\n    String favoriteString = favs.get(String.class);\r\n\r\nThe reason your code doesn&#39;t work is that Class.forName() returns a `Class&lt;?&gt;`, i.e. a class object representing an unknown type. While the compiler could possibly infer the type in your example, it can not in general. Consider:\r\n\r\n    Class.forName(new BufferedReader(System.in).readLine())\r\n\r\nwhat&#39;s the type of this expression? Clearly the compiler cannot know what the class name will be at runtime, so it doesn&#39;t know whether\r\n\r\n    String s = Class.forName(new BufferedReader(System.in).readLine()).cast(o);\r\n\r\nis safe. Therefore it requests an explicit cast.","title":"Cast via reflection and use of Class.cast()","body":"<p>An example where is does work:</p>\n<pre><code>class Favorites {\n    private Map&lt;Class&lt;?&gt;, Object&gt; map = new HashMap&lt;Class&lt;?&gt;, Object&gt;();\n\n    public &lt;T&gt; T get(Class&lt;T&gt; clazz) {\n        return clazz.cast(map.get(clazz));\n    }\n\n    public &lt;T&gt; void put(Class&lt;T&gt; clazz, T favorite) {\n        map.put(clazz, favorite);\n    }\n}\n</code></pre>\n<p>which allows you to write:</p>\n<pre><code>Favorites favs = new Favorites();\nfavs.put(String.class, &quot;Hello&quot;);\nString favoriteString = favs.get(String.class);\n</code></pre>\n<p>The reason your code doesn't work is that Class.forName() returns a <code>Class&lt;?&gt;</code>, i.e. a class object representing an unknown type. While the compiler could possibly infer the type in your example, it can not in general. Consider:</p>\n<pre><code>Class.forName(new BufferedReader(System.in).readLine())\n</code></pre>\n<p>what's the type of this expression? Clearly the compiler cannot know what the class name will be at runtime, so it doesn't know whether</p>\n<pre><code>String s = Class.forName(new BufferedReader(System.in).readLine()).cast(o);\n</code></pre>\n<p>is safe. Therefore it requests an explicit cast.</p>\n"}],"owner":{"account_id":141485,"reputation":7515,"user_id":739927,"accept_rate":88,"display_name":"Jarek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89205,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"closed_date":1326943695,"accepted_answer_id":8919379,"answer_count":4,"score":29,"last_activity_date":1686979254,"creation_date":1326926222,"question_id":8918550,"body_markdown":"&gt; **Possible Duplicate:**  \r\n&gt; [Java Class.cast() vs. cast operator](https://stackoverflow.com/questions/1555326/java-class-cast-vs-cast-operator)  \r\n\r\n&lt;!-- End of automatically inserted text --&gt;\r\n\r\nI am unsuccessfully trying to find out what `Class.cast()` does or what it may be good for. At the same time I am wondering whether I can somehow cast an object via reflection.\r\n\r\nFirst I thought something like the lines below might work:\r\n\r\n    Object o = &quot;A string&quot;;\r\n    String str = Class.forName(&quot;java.lang.String&quot;).cast(object);\r\n\r\nBut without an explicit cast it does not work.\r\n\r\nSo what is the `cast` method of `Class` class good for? And is it somehow possible just with reflection to cast objects, so you find the object&#39;s class, use `Class.forName` on it and cast it somehow?","title":"Cast via reflection and use of Class.cast()","body":"<blockquote>\n<p><strong>Possible Duplicate:</strong><br />\n<a href=\"https://stackoverflow.com/questions/1555326/java-class-cast-vs-cast-operator\">Java Class.cast() vs. cast operator</a></p>\n</blockquote>\n\n<p>I am unsuccessfully trying to find out what <code>Class.cast()</code> does or what it may be good for. At the same time I am wondering whether I can somehow cast an object via reflection.</p>\n<p>First I thought something like the lines below might work:</p>\n<pre><code>Object o = &quot;A string&quot;;\nString str = Class.forName(&quot;java.lang.String&quot;).cast(object);\n</code></pre>\n<p>But without an explicit cast it does not work.</p>\n<p>So what is the <code>cast</code> method of <code>Class</code> class good for? And is it somehow possible just with reflection to cast objects, so you find the object's class, use <code>Class.forName</code> on it and cast it somehow?</p>\n"},{"tags":["java","mysql","java-stream","jooq","paging"],"comments":[{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1685948214,"post_id":76395455,"comment_id":134726534,"body_markdown":"There&#39;s nothing like this in jOOQ itself, if that&#39;s what your question is about...","body":"There&#39;s nothing like this in jOOQ itself, if that&#39;s what your question is about..."}],"answers":[{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686978043,"creation_date":1686065935,"answer_id":76416284,"question_id":76395455,"body_markdown":"Here are the solutions by my library [abacus-jdbc][1]. \r\n\r\n 1. If you want to return a `stream` with all records(pages) by one query and split by stream api:\r\n\r\n\r\n        JdbcUtil.prepareQuery(dataSource, sqlQuery)\r\n              //.setParameters(...); // if needed\r\n              stream(YourEntityClass.class); //.split(pageSize)\r\n\r\n\r\n 2. If you want to return a `stream` for one specific page (by seek?)\r\n\r\n\r\n        final String query = &quot;select * from yourTable where someIdColumn &gt; ? order by someIdColumn limit pageSize&quot;;\r\n        JdbcUtil.prepareQuery(dataSource, query)\r\n              .setLong(1, lastPageEndId);\r\n              stream(YourEntityClass.class); // or stream(rowMapper);\r\n\r\n3. If you want to return a `stream`. Each element in the stream is one `page`(a list of records) which is loaded by executing query once:\r\n\r\n\r\n        final String query = &quot;select * from yourTable where someIdColumn &gt; ? order by someIdColumn limit pageSize&quot;;\r\n        JdbcUtil.queryByPage(dataSource, query, pageSize, (stmt, ret) -&gt; stmt.setLong(1, ret == null ? startId : ret.get(ret.size() - 1).getId());\r\n\r\n  [1]: https://github.com/landawn/abacus-jdbc","title":"Adapting paged data to Java Stream","body":"<p>Here are the solutions by my library <a href=\"https://github.com/landawn/abacus-jdbc\" rel=\"nofollow noreferrer\">abacus-jdbc</a>.</p>\n<ol>\n<li><p>If you want to return a <code>stream</code> with all records(pages) by one query and split by stream api:</p>\n<pre><code>JdbcUtil.prepareQuery(dataSource, sqlQuery)\n      //.setParameters(...); // if needed\n      stream(YourEntityClass.class); //.split(pageSize)\n</code></pre>\n</li>\n<li><p>If you want to return a <code>stream</code> for one specific page (by seek?)</p>\n<pre><code>final String query = &quot;select * from yourTable where someIdColumn &gt; ? order by someIdColumn limit pageSize&quot;;\nJdbcUtil.prepareQuery(dataSource, query)\n      .setLong(1, lastPageEndId);\n      stream(YourEntityClass.class); // or stream(rowMapper);\n</code></pre>\n</li>\n<li><p>If you want to return a <code>stream</code>. Each element in the stream is one <code>page</code>(a list of records) which is loaded by executing query once:</p>\n<pre><code> final String query = &quot;select * from yourTable where someIdColumn &gt; ? order by someIdColumn limit pageSize&quot;;\n JdbcUtil.queryByPage(dataSource, query, pageSize, (stmt, ret) -&gt; stmt.setLong(1, ret == null ? startId : ret.get(ret.size() - 1).getId());\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":4833436,"reputation":409,"user_id":3900981,"accept_rate":78,"display_name":"Jans Rautenbach"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686978043,"creation_date":1685785322,"question_id":76395455,"body_markdown":"I want to take paged data (from a DB) and adapt it into a lazy-loading Java Stream so that the clients of my DAO don&#39;t need to worry about page indexes, offsets, and so on.\r\n\r\nMy setup is as follows: I have a DAO method that can fetch pages of data from a DB. Specifically, it uses [MySQL SEEK](https://blog.jooq.org/faster-sql-paging-with-jooq-using-the-seek-method/) to do paging. I.e., to fetch page 5, you need to provide the method with the last record of page 4. \r\n\r\nWhat is the simplest way of adapting this style of paging to a Java Stream? For my use case libraries are fine, but frameworks (Spring, Androidx, etc) are not.\r\n\r\n## My implementation\r\n\r\nI&#39;ve written my own implementation as follows. (`Field`, `Record`, and `Result` are JOOQ classes)\r\n\r\n\r\n```java\r\npublic abstract class PagedSeekIterator&lt;K&gt; implements Iterator&lt;Record&gt; {\r\n\r\n   private K lastId = null;\r\n   private boolean done = false;\r\n   private Iterator&lt;Record&gt; currentIterator = null;\r\n   private final Field&lt;K&gt; idField;\r\n\r\n   public PagedSeekIterator(Field&lt;K&gt; idField) {\r\n      this.idField = idField;\r\n   }\r\n\r\n   @Override\r\n   public boolean hasNext() {\r\n      if (done) {\r\n         return false;\r\n      }\r\n      try {\r\n         if (currentIterator == null) {\r\n            // first call. Do init\r\n            currentIterator = fetchWithSeek(lastId).iterator();\r\n            return hasNext();\r\n         }\r\n         if (currentIterator.hasNext()) {\r\n            return true;\r\n         } else {\r\n            // current page is read through. Fetch next page\r\n            Result&lt;Record&gt; res = fetchWithSeek(lastId);\r\n            if (res.isEmpty()) {\r\n               // we&#39;re done here\r\n               done = true;\r\n               currentIterator = null;\r\n               return false;\r\n            } else {\r\n               // next page looks good\r\n               currentIterator = res.iterator();\r\n               return true;\r\n            }\r\n         }\r\n      } catch (SQLException e) {\r\n         throw new SqlRuntimeException(&quot;Failed to fetch page&quot;, e);\r\n      }\r\n   }\r\n\r\n   @Override\r\n   public Record next() {\r\n      if (!hasNext()) {\r\n         throw new NoSuchElementException(&quot;We&#39;re done here.&quot;);\r\n      }\r\n\r\n      Record rec = currentIterator.next();\r\n      lastId = rec.get(idField);\r\n      return rec;\r\n   }\r\n\r\n   // lastId will be null on the first call\r\n   protected abstract Result&lt;Record&gt; fetchWithSeek(K lastId) throws SQLException;\r\n}\r\n```\r\n\r\nAnd then adapting to a stream is conveniently taken care of by Guava:\r\n\r\n```java\r\nStreams.stream(new PagedSeekIterator&lt;Long&gt;(Actions.ACTION.ID){\r\n  // override fetchWithSeek()\r\n});\r\n// returns a lazy Stream&lt;Record&gt;\r\n```\r\n\r\nMy implementation works, but I can&#39;t help but feel like I&#39;m reinventing the wheel here.\r\n\r\n## Other things I&#39;ve tried\r\n\r\nI&#39;ve also tried looking into [AndroidX Paging](https://developer.android.com/topic/libraries/architecture/paging/v3-overview), but using it outside an Android/Kotlin context is painful and I&#39;ve found it adds more complexity than it alleviates for my plain Java project. \r\n","title":"Adapting paged data to Java Stream","body":"<p>I want to take paged data (from a DB) and adapt it into a lazy-loading Java Stream so that the clients of my DAO don't need to worry about page indexes, offsets, and so on.</p>\n<p>My setup is as follows: I have a DAO method that can fetch pages of data from a DB. Specifically, it uses <a href=\"https://blog.jooq.org/faster-sql-paging-with-jooq-using-the-seek-method/\" rel=\"nofollow noreferrer\">MySQL SEEK</a> to do paging. I.e., to fetch page 5, you need to provide the method with the last record of page 4.</p>\n<p>What is the simplest way of adapting this style of paging to a Java Stream? For my use case libraries are fine, but frameworks (Spring, Androidx, etc) are not.</p>\n<h2>My implementation</h2>\n<p>I've written my own implementation as follows. (<code>Field</code>, <code>Record</code>, and <code>Result</code> are JOOQ classes)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class PagedSeekIterator&lt;K&gt; implements Iterator&lt;Record&gt; {\n\n   private K lastId = null;\n   private boolean done = false;\n   private Iterator&lt;Record&gt; currentIterator = null;\n   private final Field&lt;K&gt; idField;\n\n   public PagedSeekIterator(Field&lt;K&gt; idField) {\n      this.idField = idField;\n   }\n\n   @Override\n   public boolean hasNext() {\n      if (done) {\n         return false;\n      }\n      try {\n         if (currentIterator == null) {\n            // first call. Do init\n            currentIterator = fetchWithSeek(lastId).iterator();\n            return hasNext();\n         }\n         if (currentIterator.hasNext()) {\n            return true;\n         } else {\n            // current page is read through. Fetch next page\n            Result&lt;Record&gt; res = fetchWithSeek(lastId);\n            if (res.isEmpty()) {\n               // we're done here\n               done = true;\n               currentIterator = null;\n               return false;\n            } else {\n               // next page looks good\n               currentIterator = res.iterator();\n               return true;\n            }\n         }\n      } catch (SQLException e) {\n         throw new SqlRuntimeException(&quot;Failed to fetch page&quot;, e);\n      }\n   }\n\n   @Override\n   public Record next() {\n      if (!hasNext()) {\n         throw new NoSuchElementException(&quot;We're done here.&quot;);\n      }\n\n      Record rec = currentIterator.next();\n      lastId = rec.get(idField);\n      return rec;\n   }\n\n   // lastId will be null on the first call\n   protected abstract Result&lt;Record&gt; fetchWithSeek(K lastId) throws SQLException;\n}\n</code></pre>\n<p>And then adapting to a stream is conveniently taken care of by Guava:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Streams.stream(new PagedSeekIterator&lt;Long&gt;(Actions.ACTION.ID){\n  // override fetchWithSeek()\n});\n// returns a lazy Stream&lt;Record&gt;\n</code></pre>\n<p>My implementation works, but I can't help but feel like I'm reinventing the wheel here.</p>\n<h2>Other things I've tried</h2>\n<p>I've also tried looking into <a href=\"https://developer.android.com/topic/libraries/architecture/paging/v3-overview\" rel=\"nofollow noreferrer\">AndroidX Paging</a>, but using it outside an Android/Kotlin context is painful and I've found it adds more complexity than it alleviates for my plain Java project.</p>\n"},{"tags":["java","unit-testing","mockito","junit4","spring-repositories"],"comments":[{"owner":{"account_id":20277691,"reputation":97,"user_id":14872321,"display_name":"Tamim Chowdhury"},"score":0,"creation_date":1686936098,"post_id":76492336,"comment_id":134872074,"body_markdown":"Can you paste the actual error you get?","body":"Can you paste the actual error you get?"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":2,"creation_date":1686936482,"post_id":76492336,"comment_id":134872140,"body_markdown":"You are not supposed to use `@DataJpaTest` and `@SpringBootTest` together - they both set up spring context (with different slices of the app) - use only one. For the NPE - please post entire stack trace.","body":"You are not supposed to use <code>@DataJpaTest</code> and <code>@SpringBootTest</code> together - they both set up spring context (with different slices of the app) - use only one. For the NPE - please post entire stack trace."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1686944363,"post_id":76492336,"comment_id":134873401,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":28634839,"reputation":1,"user_id":21925154,"display_name":"shreyash"},"score":0,"creation_date":1686977324,"post_id":76492336,"comment_id":134876029,"body_markdown":"I removed @SpringBootTest still getting the same error","body":"I removed @SpringBootTest still getting the same error"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1687008234,"post_id":76492336,"comment_id":134878696,"body_markdown":"So if there is an NPE at that point, the immediate cause is that `codeRepository` is `null`.  In other words, it has not been (successfully) autowired.","body":"So if there is an NPE at that point, the immediate cause is that <code>codeRepository</code> is <code>null</code>.  In other words, it has not been (successfully) autowired."}],"owner":{"account_id":28634839,"reputation":1,"user_id":21925154,"display_name":"shreyash"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686977255,"creation_date":1686935603,"question_id":76492336,"body_markdown":"**THIS IS THE CODE**\r\n***I WANT TO WRITE JUNITS FOR REPOSITORYY, AND TEST findByName() method***\r\n\r\n\r\n```\r\n   public interface CodeRepository extends JpaRepository&lt;CodeEntity, Integer&gt; {\r\n\r\n\t\r\n\tCodeEntity findByCode(String code);\r\n\r\n\tCodeEntity findByCodeIgnoreCaseAndCodeType(String code, String codeType);\r\n}\r\n```  \r\n # I wrote junit test case for this \r\n       @DataJpaTest\r\n       public class CodeRepositoryTest {\r\n       \r\n        @Autowired\r\n\t    CodeRepository codeRepository;\r\n\r\n\t    final TestData testData = new TestData();\r\n\r\n\t    @Test\r\n\t    public void testRepository() {\r\n\t\tfinal CodeEntity codeEntity = testData.getCodeEntity(); //codeEntity is not null\r\n\t\tcodeRepository.save(codeEntity);   //here i am getting null pointer exception\r\n\r\n***STACK TRACE***\r\n\r\njava.lang.NullPointerException\r\n\tat com.oversighttech.ocr.dao.repository.CodeRepositoryTest.testRepository(CodeRepositoryTest.java:29)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)\r\n\r\n","title":"I am trying to junit test repository , getting null pointer exception","body":"<p><strong>THIS IS THE CODE</strong>\n<em><strong>I WANT TO WRITE JUNITS FOR REPOSITORYY, AND TEST findByName() method</strong></em></p>\n<pre><code>   public interface CodeRepository extends JpaRepository&lt;CodeEntity, Integer&gt; {\n\n    \n    CodeEntity findByCode(String code);\n\n    CodeEntity findByCodeIgnoreCaseAndCodeType(String code, String codeType);\n}\n</code></pre>\n<h1>I wrote junit test case for this</h1>\n<pre><code>   @DataJpaTest\n   public class CodeRepositoryTest {\n   \n    @Autowired\n    CodeRepository codeRepository;\n\n    final TestData testData = new TestData();\n\n    @Test\n    public void testRepository() {\n    final CodeEntity codeEntity = testData.getCodeEntity(); //codeEntity is not null\n    codeRepository.save(codeEntity);   //here i am getting null pointer exception\n</code></pre>\n<p><em><strong>STACK TRACE</strong></em></p>\n<p>java.lang.NullPointerException\nat com.oversighttech.ocr.dao.repository.CodeRepositoryTest.testRepository(CodeRepositoryTest.java:29)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\nat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\nat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)</p>\n"},{"tags":["java","hashmap","iteration"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1686916161,"post_id":76489842,"comment_id":134867719,"body_markdown":"How else are you going to set an address for each student if you don&#39;t access each element of the list? &quot;Access each element of the list&quot; is what &quot;iterating through entire students list&quot; means. There is no way around this.","body":"How else are you going to set an address for each student if you don&#39;t access each element of the list? &quot;Access each element of the list&quot; is what &quot;iterating through entire students list&quot; means. There is no way around this."},{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1686916240,"post_id":76489842,"comment_id":134867736,"body_markdown":"How would you apply changes to every student if you don&#39;t go through the complete list? Anyway, depending on the map implementation, compexity for the algorithm is between O(n) which is pretty good and O(n&#178;). I would guess it tends to be on the better side of the scale if you don&#39;t do anything silly with the map.","body":"How would you apply changes to every student if you don&#39;t go through the complete list? Anyway, depending on the map implementation, compexity for the algorithm is between O(n) which is pretty good and O(n&#178;). I would guess it tends to be on the better side of the scale if you don&#39;t do anything silly with the map."},{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1686916409,"post_id":76489842,"comment_id":134867767,"body_markdown":"Are you perhaps looking for a solution where you don&#39;t need to keep every object in memory at the same time? In that case you should describe the data a bit more.","body":"Are you perhaps looking for a solution where you don&#39;t need to keep every object in memory at the same time? In that case you should describe the data a bit more."},{"owner":{"account_id":1598790,"reputation":199,"user_id":1480299,"display_name":"AD90"},"score":0,"creation_date":1686917574,"post_id":76489842,"comment_id":134868004,"body_markdown":"Yes, I will not be able to do it without iterating the whole list, but I just wanted to check if there is any readymade framework which is passed with key field, list and map, will map the values directly.","body":"Yes, I will not be able to do it without iterating the whole list, but I just wanted to check if there is any readymade framework which is passed with key field, list and map, will map the values directly."},{"owner":{"account_id":28367824,"reputation":73,"user_id":21696871,"display_name":"fnymmm"},"score":0,"creation_date":1686917902,"post_id":76489842,"comment_id":134868068,"body_markdown":"You can try and use parallel streams to enhance performance. [Here&#39;s](https://www.baeldung.com/java-when-to-use-parallel-stream) a tutorial.","body":"You can try and use parallel streams to enhance performance. <a href=\"https://www.baeldung.com/java-when-to-use-parallel-stream\" rel=\"nofollow noreferrer\">Here&#39;s</a> a tutorial."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686920702,"post_id":76489842,"comment_id":134868677,"body_markdown":"There is one more performant way: Arrange the data store (e.g. a database) where you&#39;re getting these lists in such a way that it returns the data in one go (e.g. using a query with a JOIN). Exact implementation will vary based on the data store you&#39;re using.","body":"There is one more performant way: Arrange the data store (e.g. a database) where you&#39;re getting these lists in such a way that it returns the data in one go (e.g. using a query with a JOIN). Exact implementation will vary based on the data store you&#39;re using."}],"owner":{"account_id":1598790,"reputation":199,"user_id":1480299,"display_name":"AD90"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686973917,"creation_date":1686915851,"question_id":76489842,"body_markdown":"I have two lists below:\r\n\r\nList&lt;Student&gt; students; where Student class is as below:\r\n\r\n```\r\npublic class Student {\r\n  private int id;\r\n  private int addressId;\r\n  private String name;\r\n  private String address;\r\n}\r\n\r\npublic class Address {\r\n  private int id;\r\n  private String address;\r\n}\r\n\r\npublic class MapperClass {\r\n  public void map(List&lt;Student&gt; students, Map&lt;int, String&gt; addresses ){\r\n    //For each student, I want to take address from addresses map and update the Student class&#39;s address field. \r\n    // Below is sample code I have implemented\r\n    students.forEach(s -&gt; s.setAddress(addresses.get(s.getAddressId()))\r\n  }\r\n}\r\n\r\n```\r\n\r\nThis implementation is working per expectation. But is there more optimized way for doing that instead of iterating through entire students list? I&#39;ll be having huge data in both map and students list. \r\n\r\nPlease share if I can use any libraries/algorithm can be used for this.\r\n\r\nThank you.","title":"Map Object properties from another list","body":"<p>I have two lists below:</p>\n<p>List students; where Student class is as below:</p>\n<pre><code>public class Student {\n  private int id;\n  private int addressId;\n  private String name;\n  private String address;\n}\n\npublic class Address {\n  private int id;\n  private String address;\n}\n\npublic class MapperClass {\n  public void map(List&lt;Student&gt; students, Map&lt;int, String&gt; addresses ){\n    //For each student, I want to take address from addresses map and update the Student class's address field. \n    // Below is sample code I have implemented\n    students.forEach(s -&gt; s.setAddress(addresses.get(s.getAddressId()))\n  }\n}\n\n</code></pre>\n<p>This implementation is working per expectation. But is there more optimized way for doing that instead of iterating through entire students list? I'll be having huge data in both map and students list.</p>\n<p>Please share if I can use any libraries/algorithm can be used for this.</p>\n<p>Thank you.</p>\n"},{"tags":["java","list","arraylist"],"comments":[{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1686956629,"post_id":76494000,"comment_id":134874896,"body_markdown":"And since you already have a `List&lt;Integer&gt;`, why don&#39;t you just `res.add(list)`?","body":"And since you already have a <code>List&lt;Integer&gt;</code>, why don&#39;t you just <code>res.add(list)</code>?"},{"owner":{"account_id":11756706,"reputation":11,"user_id":12502870,"display_name":"Anna"},"score":0,"creation_date":1686957399,"post_id":76494000,"comment_id":134874943,"body_markdown":"if I use res.add(list), I will get  [[],[]] instead of like this [[5,4,11,2],[5,8,4,5]].","body":"if I use res.add(list), I will get  [[],[]] instead of like this [[5,4,11,2],[5,8,4,5]]."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1686957657,"post_id":76494000,"comment_id":134874966,"body_markdown":"@TimRoberts I think that&#39;s OP&#39;s question.","body":"@TimRoberts I think that&#39;s OP&#39;s question."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1686957834,"post_id":76494000,"comment_id":134874980,"body_markdown":"You need a copy because you&#39;re clearing the original list at the end of `dfs()`.","body":"You need a copy because you&#39;re clearing the original list at the end of <code>dfs()</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1686960177,"post_id":76494000,"comment_id":134875138,"body_markdown":"For reference, the LeetCode problem is https://leetcode.com/problems/path-sum-ii/ .","body":"For reference, the LeetCode problem is <a href=\"https://leetcode.com/problems/path-sum-ii/\" rel=\"nofollow noreferrer\">leetcode.com/problems/path-sum-ii</a> ."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1686985662,"post_id":76494000,"comment_id":134876534,"body_markdown":"@OldDogProgrammer `dfs()` is being called recursively **with** a non-empty list, so creating a new list in it will not work; it could be a field variable instead, since it is always the same instance","body":"@OldDogProgrammer <code>dfs()</code> is being called recursively <b>with</b> a non-empty list, so creating a new list in it will not work; it could be a field variable instead, since it is always the same instance"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1687022259,"post_id":76494000,"comment_id":134880418,"body_markdown":"@user16320675.  Thanks. I don&#39;t know how I missed that.","body":"@user16320675.  Thanks. I don&#39;t know how I missed that."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686973288,"creation_date":1686972707,"answer_id":76494593,"question_id":76494000,"body_markdown":"&gt; _&quot;... When I change `res.add(new ArrayList&lt;&gt;(list))` to `res.add(list)`, for example, I got res as `[[],[]]`, which should be like this `[[5,4,11,2],[5,8,4,5]]`. ...&quot;_\r\n\r\nThis is because the _list_ is an object, thus it will still be affected here,\r\n\r\n```java\r\nlist.add(node.val);\r\n```\r\n\r\nAnd, here\r\n\r\n```java\r\nlist.remove(list.size() - 1);\r\n```\r\n\r\nIt can be confusing, as you&#39;d imagine a new object value would be passed.\r\n\r\nBy using _`res.add(new ArrayList&lt;&gt;(list))`_, you are creating a new copy, of _list_&amp;mdash;thus, it will not be affected.\r\n\r\nHere is the source for that specific _ArrayList_ constructor method.  \r\n_[GitHub &amp;ndash; jdk/src/java.base/share/classes/java/util/ArrayList.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ArrayList.java#L180)_.\r\n\r\n&gt; _&quot;... And I know `List` is an interface, while `ArrayList` is a `Collection` class. I&#39;m still confused about it.&quot;_\r\n\r\nYou&#39;re correct.&amp;nbsp; Although, _List_ is simply an interface _within_ the _Collections_ framework.  \r\nIt still is, technically, a collection.\r\n\r\nHere is the _List_ JavaDoc.&amp;nbsp; _[List (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html)_.\r\n\r\nAnd, here is the JavaDoc for the _Collections Framework_.  \r\n_[java.util (Java SE 20 &amp;amp; JDK 20) &amp;ndash; Java Collections Framework](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/package-summary.html#CollectionsFramework)_.\r\n\r\nFinally, here is a Java Tutorial, on the _Collections Framework_.  \r\n_[Trail: Collections (The Java&amp;trade; Tutorials)](https://docs.oracle.com/javase/tutorial/collections/index.html)_.","title":"how to add List&lt;Integer&gt; to List&lt;List&lt;Integer&gt;&gt;?","body":"<blockquote>\n<p><em>&quot;... When I change <code>res.add(new ArrayList&lt;&gt;(list))</code> to <code>res.add(list)</code>, for example, I got res as <code>[[],[]]</code>, which should be like this <code>[[5,4,11,2],[5,8,4,5]]</code>. ...&quot;</em></p>\n</blockquote>\n<p>This is because the <em>list</em> is an object, thus it will still be affected here,</p>\n<pre class=\"lang-java prettyprint-override\"><code>list.add(node.val);\n</code></pre>\n<p>And, here</p>\n<pre class=\"lang-java prettyprint-override\"><code>list.remove(list.size() - 1);\n</code></pre>\n<p>It can be confusing, as you'd imagine a new object value would be passed.</p>\n<p>By using <em><code>res.add(new ArrayList&lt;&gt;(list))</code></em>, you are creating a new copy, of <em>list</em>—thus, it will not be affected.</p>\n<p>Here is the source for that specific <em>ArrayList</em> constructor method.<br />\n<em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/ArrayList.java#L180\" rel=\"nofollow noreferrer\">GitHub – jdk/src/java.base/share/classes/java/util/ArrayList.java</a></em>.</p>\n<blockquote>\n<p><em>&quot;... And I know <code>List</code> is an interface, while <code>ArrayList</code> is a <code>Collection</code> class. I'm still confused about it.&quot;</em></p>\n</blockquote>\n<p>You're correct.  Although, <em>List</em> is simply an interface <em>within</em> the <em>Collections</em> framework.<br />\nIt still is, technically, a collection.</p>\n<p>Here is the <em>List</em> JavaDoc.  <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\">List (Java SE 20 &amp; JDK 20)</a></em>.</p>\n<p>And, here is the JavaDoc for the <em>Collections Framework</em>.<br />\n<em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/package-summary.html#CollectionsFramework\" rel=\"nofollow noreferrer\">java.util (Java SE 20 &amp; JDK 20) – Java Collections Framework</a></em>.</p>\n<p>Finally, here is a Java Tutorial, on the <em>Collections Framework</em>.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/collections/index.html\" rel=\"nofollow noreferrer\">Trail: Collections (The Java™ Tutorials)</a></em>.</p>\n"}],"owner":{"account_id":11756706,"reputation":11,"user_id":12502870,"display_name":"Anna"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686973288,"creation_date":1686956357,"question_id":76494000,"body_markdown":"I am trying to solve Leetcode 113 Path Sum II. Here is the solution:\r\n\r\n```\r\nclass Solution {\r\n    List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();\r\n    public List&lt;List&lt;Integer&gt;&gt; pathSum(TreeNode root, int targetSum) {\r\n        dfs(root, targetSum, new ArrayList&lt;&gt;());\r\n        return res;\r\n    }\r\n    private void dfs (TreeNode node, int targetSum, List&lt;Integer&gt; list) {\r\n        if (node == null) return;\r\n        list.add(node.val);\r\n        if (targetSum == node.val &amp;&amp; node.left == null &amp;&amp; node.right == null) {\r\n          **  res.add(new ArrayList&lt;&gt;(list));**\r\n        }else {\r\n            if (node.left != null) dfs(node.left, targetSum - node.val, list);\r\n            if (node.right != null) dfs(node.right, targetSum - node.val, list);\r\n\r\n        }\r\n        list.remove(list.size() - 1);\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen I change `res.add(new ArrayList&lt;&gt;(list))` to `res.add(list)`, for example, I got res as `[[],[]]`, which should be like this `[[5,4,11,2],[5,8,4,5]]`.\r\n\r\nWhy I cannot use `res.add(list);` directly? list is defined by `ArrayList&lt;&gt;()`. \r\n\r\nI checked related answers and know there are two ways to define a two dimensional array:\r\n\r\n1. `List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;List&lt;Integer&gt;&gt;();`\r\n2. `List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();`\r\n\r\nAnd I know `List` is an interface, while `ArrayList` is a `Collection` class. I&#39;m still confused about it.","title":"how to add List&lt;Integer&gt; to List&lt;List&lt;Integer&gt;&gt;?","body":"<p>I am trying to solve Leetcode 113 Path Sum II. Here is the solution:</p>\n<pre><code>class Solution {\n    List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();\n    public List&lt;List&lt;Integer&gt;&gt; pathSum(TreeNode root, int targetSum) {\n        dfs(root, targetSum, new ArrayList&lt;&gt;());\n        return res;\n    }\n    private void dfs (TreeNode node, int targetSum, List&lt;Integer&gt; list) {\n        if (node == null) return;\n        list.add(node.val);\n        if (targetSum == node.val &amp;&amp; node.left == null &amp;&amp; node.right == null) {\n          **  res.add(new ArrayList&lt;&gt;(list));**\n        }else {\n            if (node.left != null) dfs(node.left, targetSum - node.val, list);\n            if (node.right != null) dfs(node.right, targetSum - node.val, list);\n\n        }\n        list.remove(list.size() - 1);\n    }\n\n}\n</code></pre>\n<p>When I change <code>res.add(new ArrayList&lt;&gt;(list))</code> to <code>res.add(list)</code>, for example, I got res as <code>[[],[]]</code>, which should be like this <code>[[5,4,11,2],[5,8,4,5]]</code>.</p>\n<p>Why I cannot use <code>res.add(list);</code> directly? list is defined by <code>ArrayList&lt;&gt;()</code>.</p>\n<p>I checked related answers and know there are two ways to define a two dimensional array:</p>\n<ol>\n<li><code>List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;List&lt;Integer&gt;&gt;();</code></li>\n<li><code>List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();</code></li>\n</ol>\n<p>And I know <code>List</code> is an interface, while <code>ArrayList</code> is a <code>Collection</code> class. I'm still confused about it.</p>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1511605043,"creation_date":1511605043,"answer_id":47484824,"question_id":47484295,"body_markdown":"You need to tell gradle that the jar task depends on the frontend&#39;s build task, otherwise it could run the jar file before the build task, and thus have nothing to include in the jar.\r\n\r\nIt&#39;s also a better idea to refer to projects by their name, instead of using absolute paths:\r\n\r\n    jar {\r\n        dependsOn(&#39;:frontend:build&#39;)\r\n    \r\n        into(&#39;public&#39;) {\r\n            from &quot;${project(&#39;:frontend&#39;).projectDir}/www&quot;\r\n        }\r\n    }","title":"Include distribution folder of frontend build in the JAR with Gradle","body":"<p>You need to tell gradle that the jar task depends on the frontend's build task, otherwise it could run the jar file before the build task, and thus have nothing to include in the jar.</p>\n\n<p>It's also a better idea to refer to projects by their name, instead of using absolute paths:</p>\n\n<pre><code>jar {\n    dependsOn(':frontend:build')\n\n    into('public') {\n        from \"${project(':frontend').projectDir}/www\"\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1602,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":47484824,"answer_count":1,"score":1,"last_activity_date":1686972675,"creation_date":1511601029,"question_id":47484295,"body_markdown":"I am a gradle beginner and I am struggling to include the frontend distribution build folder in the backend jar (I use Spring Boot and the frontend is an ionic app). In the backend.gradle, I configured the jar-Task that should include the frontend-build folder (called www) into build folder of the backend. The jar task runs through, but the desired artifacts are not present in the backend-build folder and therefore not in the final jar. Would be glad for any help.\r\n\r\nproject structure:\r\n\r\n    project\r\n    build.gradle\r\n    settings.gradle\r\n    backend\r\n    --&gt; backend.gradle\r\n    frontend\r\n    --&gt; frontend.gradle\r\n\r\nsettings.gradle\r\n\r\n    include &#39;backend&#39;\r\n    include &#39;frontend&#39;\r\n    \r\n    rootProject.children.each {\r\n        it.buildFileName = it.name + &#39;.gradle&#39;\r\n    }\r\n\r\nbuild.gradle\r\n\r\n    allprojects {\r\n    \r\n        buildscript {\r\n            repositories {\r\n                mavenCentral()\r\n            }\r\n        }\r\n    \r\n        apply plugin: &#39;idea&#39;\r\n    \r\n        repositories {\r\n            mavenCentral()\r\n        }    \r\n    }\r\n\r\nfrontend.gradle\r\n\r\n    plugins {\r\n      id &quot;com.moowork.node&quot; version &quot;1.2.0&quot;\r\n    }   \r\n    \r\n    task clean(dependsOn: &#39;npm_run_clean&#39;) {\r\n    }\r\n    \r\n    task build(dependsOn: &#39;npm_run_build&#39;) {\r\n    }\r\n\r\nbackend.gradle\r\n\r\n    buildscript {\r\n        ext {\r\n            springBootVersion = &#39;1.5.8.RELEASE&#39;\r\n        }\r\n        dependencies {\r\n            classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n        }\r\n    }\r\n    \r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    \r\n    group = &#39;ch.renewinkler&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = 1.8\r\n    \r\n    \r\n    jar {\r\n        from(&#39;frontend/www&#39;) {\r\n            into(&#39;public&#39;)\r\n        }\r\n    }\r\n    \r\n    processResources.dependsOn(&#39;:frontend:build&#39;)\r\n    \r\n    dependencies {\r\n        compile(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n        testCompile(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    }\r\n\r\n\r\n","title":"Include distribution folder of frontend build in the JAR with Gradle","body":"<p>I am a gradle beginner and I am struggling to include the frontend distribution build folder in the backend jar (I use Spring Boot and the frontend is an ionic app). In the backend.gradle, I configured the jar-Task that should include the frontend-build folder (called www) into build folder of the backend. The jar task runs through, but the desired artifacts are not present in the backend-build folder and therefore not in the final jar. Would be glad for any help.</p>\n\n<p>project structure:</p>\n\n<pre><code>project\nbuild.gradle\nsettings.gradle\nbackend\n--&gt; backend.gradle\nfrontend\n--&gt; frontend.gradle\n</code></pre>\n\n<p>settings.gradle</p>\n\n<pre><code>include 'backend'\ninclude 'frontend'\n\nrootProject.children.each {\n    it.buildFileName = it.name + '.gradle'\n}\n</code></pre>\n\n<p>build.gradle</p>\n\n<pre><code>allprojects {\n\n    buildscript {\n        repositories {\n            mavenCentral()\n        }\n    }\n\n    apply plugin: 'idea'\n\n    repositories {\n        mavenCentral()\n    }    \n}\n</code></pre>\n\n<p>frontend.gradle</p>\n\n<pre><code>plugins {\n  id \"com.moowork.node\" version \"1.2.0\"\n}   \n\ntask clean(dependsOn: 'npm_run_clean') {\n}\n\ntask build(dependsOn: 'npm_run_build') {\n}\n</code></pre>\n\n<p>backend.gradle</p>\n\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '1.5.8.RELEASE'\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n    }\n}\n\napply plugin: 'java'\napply plugin: 'org.springframework.boot'\n\ngroup = 'ch.renewinkler'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = 1.8\n\n\njar {\n    from('frontend/www') {\n        into('public')\n    }\n}\n\nprocessResources.dependsOn(':frontend:build')\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter-web')\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n}\n</code></pre>\n"},{"tags":["java","linked-list","out-of-memory"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686923890,"post_id":76490892,"comment_id":134869431,"body_markdown":"What&#39;s strange about it? You&#39;re out of memory.","body":"What&#39;s strange about it? You&#39;re out of memory."},{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":1,"creation_date":1686923962,"post_id":76490892,"comment_id":134869447,"body_markdown":"`resultLN.next = resultLN;` - you make your node point to itself as the next one - so that means your `toString` method will loop endlessly","body":"<code>resultLN.next = resultLN;</code> - you make your node point to itself as the next one - so that means your <code>toString</code> method will loop endlessly"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686924780,"post_id":76490892,"comment_id":134869660,"body_markdown":"&quot;result like&quot; are you getting that result or are you expecting that result? Please don&#39;t use &#39;like&#39; in that kind of sentences.  Same for &quot;I&#39;m expecting the result like &#39;708&#39;&quot;. Are you expecting the result to be exactly 708, or do you expect it to be similar to 708? Please be more precise.","body":"&quot;result like&quot; are you getting that result or are you expecting that result? Please don&#39;t use &#39;like&#39; in that kind of sentences.  Same for &quot;I&#39;m expecting the result like &#39;708&#39;&quot;. Are you expecting the result to be exactly 708, or do you expect it to be similar to 708? Please be more precise."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686924820,"post_id":76490892,"comment_id":134869672,"body_markdown":"Use [code format](https://stackoverflow.com/editing-help#code) for logs, not quote format. Quote is for human text, not logs and other pre formatted text. Quote breaks the existing format of the log, makes it very hard to read and gets in the way of trying to copy text for investigation.","body":"Use <a href=\"https://stackoverflow.com/editing-help#code\">code format</a> for logs, not quote format. Quote is for human text, not logs and other pre formatted text. Quote breaks the existing format of the log, makes it very hard to read and gets in the way of trying to copy text for investigation."},{"owner":{"account_id":6388068,"reputation":7,"user_id":4955271,"display_name":"FelixSunYX"},"score":0,"creation_date":1686972488,"post_id":76490892,"comment_id":134875819,"body_markdown":"Thanks mate! You are correct, I was wrong with creating the ListNode. @UnholySheep","body":"Thanks mate! You are correct, I was wrong with creating the ListNode. @UnholySheep"}],"owner":{"account_id":6388068,"reputation":7,"user_id":4955271,"display_name":"FelixSunYX"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686972372,"creation_date":1686923738,"question_id":76490892,"body_markdown":"I wrote a main method for a small demo of ListNode. However, it showed a strange error of &#39;java.lang.OutOfMemoryError: Java heap space&#39;;\r\n\r\nThe ListNode class is:\r\n```\r\nstatic class ListNode extends Object {\r\n\t\tint val;\r\n\t\tListNode next;\r\n\r\n\t\tListNode() {\r\n\r\n\t\t}\r\n\r\n\t\tListNode(int val) {\r\n\t\t\tthis.val = val;\r\n\t\t}\r\n\r\n\t\tListNode(int val, ListNode next) {\r\n\t\t\tthis.val = val;\r\n\t\t\tthis.next = next;\r\n\t\t}\r\n\r\n\t\tpublic String toString(){\r\n\t\t\tStringBuffer value = new StringBuffer();\r\n\t\t\tvalue.append(this.val);\r\n\t\t\twhile(next != null){\r\n\t\t\t\tvalue.append(next.val);\r\n\t\t\t\tnext = next.next;\r\n\t\t\t}\r\n\t\t\treturn value.toString();\r\n\t\t}\r\n\t}\r\n```\r\nand I wrote a method for add two numbers of values of ListNod:\r\n```\r\npublic static ListNode addTwoNums(ListNode l1, ListNode l2){\r\n\t\tListNode resultLN = new ListNode();\r\n\r\n\t\tStringBuffer lString = new StringBuffer().append(l1.val);\r\n\t\tListNode lNext = l1.next;\r\n\t\twhile (lNext != null){\r\n\t\t\tlString.append(lNext.val);\r\n\t\t\tlNext = lNext.next;\r\n\t\t}\r\n\t\tInteger l1Int = Integer.parseInt(lString.toString());\r\n\t\tSystem.out.println(&quot;l1Int: &quot; + l1Int);\r\n\r\n\t\tlString = new StringBuffer().append(l2.val);\r\n\t\tlNext = l2.next;\r\n\t\twhile (lNext != null){\r\n\t\t\tlString.append(lNext.val);\r\n\t\t\tlNext = lNext.next;\r\n\t\t}\r\n\t\tInteger l2Int = Integer.parseInt(lString.toString());\r\n\t\tSystem.out.println(&quot;l2Int: &quot; + l2Int);\r\n\r\n\t\tInteger total = l1Int + l2Int;\r\n\t\tSystem.out.println(&quot;total: &quot; + total);\r\n\r\n\t\tSystem.out.println(&quot;Starting ============ &quot;);\r\n\t\tString resultString = new StringBuffer().append(total).reverse().toString();\r\n\t\t\t\tSystem.out.println(&quot;Reversed: &quot; + resultString);\r\n\t\tint i = 0;\r\n\t\tListNode node = new ListNode();\r\n\t\tresultLN.next = null;\r\n\t\twhile(i &lt; resultString.length()){\r\n\t\t\tresultLN.val = Integer.parseInt(String.valueOf(resultString.charAt(i)));\r\n\t\t\tresultLN.next = resultLN;\r\n\t\t\ti ++;\r\n\t\t}\r\n\t\treturn resultLN;\r\n\t}\r\n```\r\nThe main method is :\r\n```\r\npublic static void main(String[] args) {\r\n\t\tListNode l1 = new ListNode(2, new ListNode(4, new ListNode(3)));\r\n\t\tListNode l2 = new ListNode(5, new ListNode(6, new ListNode(4)));\r\n\t\tListNode resultListNode = addTwoNums(l1,l2);\r\n\t\tSystem.out.println(resultListNode.toString());\r\n\t}\r\n```\r\n\r\nThe printed result like:\r\n```\r\nl1Int: 243\r\nl2Int: 564\r\ntotal: 807\r\nStarting ============ \r\nReversed: 708\r\n```\r\n\r\nHowever, the last print doesn&#39;t show. I&#39;m expecting the result like &#39;708&#39; in the last line of main method, but I got exception:\r\n```\r\nException in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n\tat java.util.Arrays.copyOf(Arrays.java:3332)\r\n```\r\nDoes anybody know what&#39;s the problem of my demo ? Is there any problem of my last &#39;while&#39; loop?","title":"When I try to play with ListNode, a error of &#39;java.lang.OutOfMemoryError: Java heap space&#39; occurs","body":"<p>I wrote a main method for a small demo of ListNode. However, it showed a strange error of 'java.lang.OutOfMemoryError: Java heap space';</p>\n<p>The ListNode class is:</p>\n<pre><code>static class ListNode extends Object {\n        int val;\n        ListNode next;\n\n        ListNode() {\n\n        }\n\n        ListNode(int val) {\n            this.val = val;\n        }\n\n        ListNode(int val, ListNode next) {\n            this.val = val;\n            this.next = next;\n        }\n\n        public String toString(){\n            StringBuffer value = new StringBuffer();\n            value.append(this.val);\n            while(next != null){\n                value.append(next.val);\n                next = next.next;\n            }\n            return value.toString();\n        }\n    }\n</code></pre>\n<p>and I wrote a method for add two numbers of values of ListNod:</p>\n<pre><code>public static ListNode addTwoNums(ListNode l1, ListNode l2){\n        ListNode resultLN = new ListNode();\n\n        StringBuffer lString = new StringBuffer().append(l1.val);\n        ListNode lNext = l1.next;\n        while (lNext != null){\n            lString.append(lNext.val);\n            lNext = lNext.next;\n        }\n        Integer l1Int = Integer.parseInt(lString.toString());\n        System.out.println(&quot;l1Int: &quot; + l1Int);\n\n        lString = new StringBuffer().append(l2.val);\n        lNext = l2.next;\n        while (lNext != null){\n            lString.append(lNext.val);\n            lNext = lNext.next;\n        }\n        Integer l2Int = Integer.parseInt(lString.toString());\n        System.out.println(&quot;l2Int: &quot; + l2Int);\n\n        Integer total = l1Int + l2Int;\n        System.out.println(&quot;total: &quot; + total);\n\n        System.out.println(&quot;Starting ============ &quot;);\n        String resultString = new StringBuffer().append(total).reverse().toString();\n                System.out.println(&quot;Reversed: &quot; + resultString);\n        int i = 0;\n        ListNode node = new ListNode();\n        resultLN.next = null;\n        while(i &lt; resultString.length()){\n            resultLN.val = Integer.parseInt(String.valueOf(resultString.charAt(i)));\n            resultLN.next = resultLN;\n            i ++;\n        }\n        return resultLN;\n    }\n</code></pre>\n<p>The main method is :</p>\n<pre><code>public static void main(String[] args) {\n        ListNode l1 = new ListNode(2, new ListNode(4, new ListNode(3)));\n        ListNode l2 = new ListNode(5, new ListNode(6, new ListNode(4)));\n        ListNode resultListNode = addTwoNums(l1,l2);\n        System.out.println(resultListNode.toString());\n    }\n</code></pre>\n<p>The printed result like:</p>\n<pre><code>l1Int: 243\nl2Int: 564\ntotal: 807\nStarting ============ \nReversed: 708\n</code></pre>\n<p>However, the last print doesn't show. I'm expecting the result like '708' in the last line of main method, but I got exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Arrays.java:3332)\n</code></pre>\n<p>Does anybody know what's the problem of my demo ? Is there any problem of my last 'while' loop?</p>\n"},{"tags":["java","logging","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":296025,"reputation":803,"user_id":2087674,"accept_rate":80,"display_name":"babernathy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380292219,"creation_date":1380292219,"answer_id":19053329,"question_id":19052070,"body_markdown":"I&#39;m assuming you want your module management code define the logger configuration, right? If so, you may want to take a look at this portion of the manual which talks about extending LoggerConfig which based on what your asking is what I _think_ you are looking for. \r\n\r\nhttp://logging.apache.org/log4j/2.x/manual/extending.html\r\n\r\nFor what it&#39;s worth, I&#39;ve been involved in large plug-in based systems before (using OSGi) and we honestly haven&#39;t taken this route. It&#39;s usually easier to just grep the class or package you are interested in from a single log file. \r\n","title":"Log4j2: Dynamic creation of log files for multiple logs","body":"<p>I'm assuming you want your module management code define the logger configuration, right? If so, you may want to take a look at this portion of the manual which talks about extending LoggerConfig which based on what your asking is what I <em>think</em> you are looking for. </p>\n\n<p><a href=\"http://logging.apache.org/log4j/2.x/manual/extending.html\" rel=\"nofollow\">http://logging.apache.org/log4j/2.x/manual/extending.html</a></p>\n\n<p>For what it's worth, I've been involved in large plug-in based systems before (using OSGi) and we honestly haven't taken this route. It's usually easier to just grep the class or package you are interested in from a single log file. </p>\n"},{"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1380406298,"creation_date":1380406298,"answer_id":19072195,"question_id":19052070,"body_markdown":"if you really need to determine the log file dynamically, take a look at the Log4J2 [RoutingAppender][1]. A longer example is in the [FAQ][2] and these stackoverflow questions may be of interest:\r\nhttps://stackoverflow.com/questions/18279656/wildcard-pattern-for-routingappender-of-log4j2\r\nand https://stackoverflow.com/questions/17827923/how-to-write-different-logs-in-different-files-with-log4j2-mdc-in-xml\r\n\r\nNote that you need to set values in the `ThreadContext` map that the RoutingAppender uses to decide which appender to route the log event to. This means that you would need to put some value in the ThreadContext map every time your code enters a different plugin.\r\n\r\nHowever, do you really need it to be this dynamic? If you know in advance what plugins you have, you can just declare a logger for each plugin (using the package name of the plugin is a common way to do this), and map each such logger to a separate appender.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;\r\n      &lt;Appenders&gt;\r\n        &lt;File name=&quot;MyFile&quot; fileName=&quot;logs/app.log&quot;&gt;\r\n          &lt;PatternLayout&gt;\r\n            &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\r\n          &lt;/PatternLayout&gt;\r\n        &lt;/File&gt;\r\n        &lt;File name=&quot;plugin1&quot; fileName=&quot;logs/plugin1.log&quot;&gt;\r\n          &lt;PatternLayout&gt;\r\n            &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\r\n          &lt;/PatternLayout&gt;\r\n        &lt;/File&gt;\r\n        &lt;File name=&quot;plugin2&quot; fileName=&quot;logs/plugin2.log&quot;&gt;\r\n          &lt;PatternLayout&gt;\r\n            &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\r\n          &lt;/PatternLayout&gt;\r\n        &lt;/File&gt;\r\n      &lt;/Appenders&gt;\r\n      &lt;Loggers&gt;\r\n        &lt;Logger name=&quot;com.mycomp.project.plugin1&quot; level=&quot;debug&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;plugin1&quot; level=&quot;debug&quot; /&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Logger name=&quot;com.mycomp.project.plugin2&quot; level=&quot;debug&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;plugin2&quot; level=&quot;debug&quot; /&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Root level=&quot;trace&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;MyFile&quot; level=&quot;trace&quot; /&gt;\r\n        &lt;/Root&gt;\r\n      &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\n  [1]: http://logging.apache.org/log4j/2.x/manual/appenders.html#RoutingAppender\r\n  [2]: http://logging.apache.org/log4j/2.x/faq.html#separate_log_files\r\n","title":"Log4j2: Dynamic creation of log files for multiple logs","body":"<p>if you really need to determine the log file dynamically, take a look at the Log4J2 <a href=\"http://logging.apache.org/log4j/2.x/manual/appenders.html#RoutingAppender\" rel=\"nofollow noreferrer\">RoutingAppender</a>. A longer example is in the <a href=\"http://logging.apache.org/log4j/2.x/faq.html#separate_log_files\" rel=\"nofollow noreferrer\">FAQ</a> and these stackoverflow questions may be of interest:\n<a href=\"https://stackoverflow.com/questions/18279656/wildcard-pattern-for-routingappender-of-log4j2\">Wildcard pattern for RoutingAppender of Log4j2</a>\nand <a href=\"https://stackoverflow.com/questions/17827923/how-to-write-different-logs-in-different-files-with-log4j2-mdc-in-xml\">How to write different logs in different files with log4j2 (MDC in xml)?</a></p>\n\n<p>Note that you need to set values in the <code>ThreadContext</code> map that the RoutingAppender uses to decide which appender to route the log event to. This means that you would need to put some value in the ThreadContext map every time your code enters a different plugin.</p>\n\n<p>However, do you really need it to be this dynamic? If you know in advance what plugins you have, you can just declare a logger for each plugin (using the package name of the plugin is a common way to do this), and map each such logger to a separate appender.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"warn\" name=\"MyApp\" packages=\"\"&gt;\n  &lt;Appenders&gt;\n    &lt;File name=\"MyFile\" fileName=\"logs/app.log\"&gt;\n      &lt;PatternLayout&gt;\n        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\n      &lt;/PatternLayout&gt;\n    &lt;/File&gt;\n    &lt;File name=\"plugin1\" fileName=\"logs/plugin1.log\"&gt;\n      &lt;PatternLayout&gt;\n        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\n      &lt;/PatternLayout&gt;\n    &lt;/File&gt;\n    &lt;File name=\"plugin2\" fileName=\"logs/plugin2.log\"&gt;\n      &lt;PatternLayout&gt;\n        &lt;Pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/Pattern&gt;\n      &lt;/PatternLayout&gt;\n    &lt;/File&gt;\n  &lt;/Appenders&gt;\n  &lt;Loggers&gt;\n    &lt;Logger name=\"com.mycomp.project.plugin1\" level=\"debug\"&gt;\n      &lt;AppenderRef ref=\"plugin1\" level=\"debug\" /&gt;\n    &lt;/Logger&gt;\n    &lt;Logger name=\"com.mycomp.project.plugin2\" level=\"debug\"&gt;\n      &lt;AppenderRef ref=\"plugin2\" level=\"debug\" /&gt;\n    &lt;/Logger&gt;\n    &lt;Root level=\"trace\"&gt;\n      &lt;AppenderRef ref=\"MyFile\" level=\"trace\" /&gt;\n    &lt;/Root&gt;\n  &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1490764,"reputation":1434,"user_id":1397894,"accept_rate":100,"display_name":"spaceemotion"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380534946,"creation_date":1380534946,"answer_id":19091269,"question_id":19052070,"body_markdown":"Even though Remko Popma&#39;s answer might be the most efficient way to do the logging, I built a small class that can create log files on it&#39;s own.\r\n\r\nI think I will use the accepted answer&#39;s solution, so here is the code I wrote to work around the XML file stuff:\r\n\r\n\timport gnu.trove.map.hash.THashMap;\r\n\timport org.apache.logging.log4j.Level;\r\n\timport org.apache.logging.log4j.core.Logger;\r\n\timport org.apache.logging.log4j.core.LoggerContext;\r\n\timport org.apache.logging.log4j.core.appender.FileAppender;\r\n\timport org.apache.logging.log4j.core.async.AsyncLoggerContext;\r\n\timport org.apache.logging.log4j.core.layout.PatternLayout;\r\n\timport org.apache.logging.log4j.message.FormattedMessageFactory;\r\n\timport org.apache.logging.log4j.message.MessageFactory;\r\n\t\r\n\timport java.io.File;\r\n\timport java.io.IOException;\r\n\timport java.util.Map;\r\n\t\r\n\t/**\r\n\t * Represents a manager for custom log files stored inside a log folder.\r\n\t */\r\n\tpublic class LoggingManager {\r\n\t\t/** The default log file extension */\r\n\t\tpublic static final String FILE_EXTENSION = &quot;log&quot;;\r\n\r\n\t\t/** The global context used for all loggers */\r\n\t\tprivate final LoggerContext context;\r\n\r\n\t\t/** The global message factory used for all loggers */\r\n\t\tprivate final MessageFactory msgFactory;\r\n\r\n\t\t/** A map of all created logs */\r\n\t\tprivate final Map&lt;String, Logger&gt; logCache;\r\n\r\n\t\t/** The folder containing the log files */\r\n\t\tprivate final File logFolder;\r\n\r\n\r\n\t\tpublic LoggingManager(String name, File logFolder) throws IOException {\r\n\t\t\tthis.logFolder = logFolder;\r\n\r\n\t\t\tif(!logFolder.exists()) {\r\n\t\t\t\tif(!logFolder.mkdirs()) {\r\n\t\t\t\t\tthrow new IOException(&quot;Could not create log folder&quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.logCache = new THashMap&lt;String, Logger&gt;();\r\n\r\n\t\t\t// Create logger context\r\n\t\t\tthis.context = new AsyncLoggerContext(name);\r\n\r\n\t\t\t// Create formatted message factory\r\n\t\t\tthis.msgFactory = new FormattedMessageFactory();\r\n\t\t}\r\n\r\n\t\tpublic Logger getLogger(String name) {\r\n\t\t\tLogger logger = logCache.get(name);\r\n\r\n\t\t\t// Create a new one\r\n\t\t\tif(logger == null) {\r\n\t\t\t\tlogger = new SimpleLogger(name);\r\n\r\n\t\t\t\tFileAppender appender = FileAppender.createAppender(\r\n\t\t\t\t\t\tnew File(logFolder, name + &quot;.&quot; + FILE_EXTENSION).getAbsolutePath(),\r\n\t\t\t\t\t\t&quot;true&quot;,\r\n\t\t\t\t\t\t&quot;false&quot;,\r\n\t\t\t\t\t\t&quot;file_appender-&quot; + name,\r\n\t\t\t\t\t\t&quot;true&quot;,\r\n\t\t\t\t\t\t&quot;false&quot;,\r\n\t\t\t\t\t\t&quot;true&quot;,\r\n\t\t\t\t\t\tPatternLayout.createLayout(PatternLayout.SIMPLE_CONVERSION_PATTERN, null, null, &quot;UTF-8&quot;, &quot;true&quot;),\r\n\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t&quot;false&quot;,\r\n\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t);\r\n\r\n\t\t\t\tappender.start();\r\n\t\t\t\tlogger.getContext().getConfiguration().getLoggerConfig(&quot;root&quot;).addAppender(appender, Level.ALL, null);\r\n\r\n\t\t\t\t// Add to log cache\r\n\t\t\t\tlogCache.put(name, logger);\r\n\t\t\t}\r\n\r\n\t\t\t// Return the logger\r\n\t\t\treturn logger;\r\n\t\t}\r\n\r\n\t\tprivate class SimpleLogger extends Logger {\r\n\r\n\t\t\tpublic SimpleLogger(String name) {\r\n\t\t\t\tsuper(context, name, msgFactory);\r\n\r\n\t\t\t\t// Set to all levels\r\n\t\t\t\tthis.setLevel(Level.ALL);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\nIf you don&#39;t use `trove` you can replace it with a normal java `HashMap` if you want.","title":"Log4j2: Dynamic creation of log files for multiple logs","body":"<p>Even though Remko Popma's answer might be the most efficient way to do the logging, I built a small class that can create log files on it's own.</p>\n\n<p>I think I will use the accepted answer's solution, so here is the code I wrote to work around the XML file stuff:</p>\n\n<pre><code>import gnu.trove.map.hash.THashMap;\nimport org.apache.logging.log4j.Level;\nimport org.apache.logging.log4j.core.Logger;\nimport org.apache.logging.log4j.core.LoggerContext;\nimport org.apache.logging.log4j.core.appender.FileAppender;\nimport org.apache.logging.log4j.core.async.AsyncLoggerContext;\nimport org.apache.logging.log4j.core.layout.PatternLayout;\nimport org.apache.logging.log4j.message.FormattedMessageFactory;\nimport org.apache.logging.log4j.message.MessageFactory;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Map;\n\n/**\n * Represents a manager for custom log files stored inside a log folder.\n */\npublic class LoggingManager {\n    /** The default log file extension */\n    public static final String FILE_EXTENSION = \"log\";\n\n    /** The global context used for all loggers */\n    private final LoggerContext context;\n\n    /** The global message factory used for all loggers */\n    private final MessageFactory msgFactory;\n\n    /** A map of all created logs */\n    private final Map&lt;String, Logger&gt; logCache;\n\n    /** The folder containing the log files */\n    private final File logFolder;\n\n\n    public LoggingManager(String name, File logFolder) throws IOException {\n        this.logFolder = logFolder;\n\n        if(!logFolder.exists()) {\n            if(!logFolder.mkdirs()) {\n                throw new IOException(\"Could not create log folder\");\n            }\n        }\n\n        this.logCache = new THashMap&lt;String, Logger&gt;();\n\n        // Create logger context\n        this.context = new AsyncLoggerContext(name);\n\n        // Create formatted message factory\n        this.msgFactory = new FormattedMessageFactory();\n    }\n\n    public Logger getLogger(String name) {\n        Logger logger = logCache.get(name);\n\n        // Create a new one\n        if(logger == null) {\n            logger = new SimpleLogger(name);\n\n            FileAppender appender = FileAppender.createAppender(\n                    new File(logFolder, name + \".\" + FILE_EXTENSION).getAbsolutePath(),\n                    \"true\",\n                    \"false\",\n                    \"file_appender-\" + name,\n                    \"true\",\n                    \"false\",\n                    \"true\",\n                    PatternLayout.createLayout(PatternLayout.SIMPLE_CONVERSION_PATTERN, null, null, \"UTF-8\", \"true\"),\n                    null,\n                    \"false\",\n                    null,\n                    null\n            );\n\n            appender.start();\n            logger.getContext().getConfiguration().getLoggerConfig(\"root\").addAppender(appender, Level.ALL, null);\n\n            // Add to log cache\n            logCache.put(name, logger);\n        }\n\n        // Return the logger\n        return logger;\n    }\n\n    private class SimpleLogger extends Logger {\n\n        public SimpleLogger(String name) {\n            super(context, name, msgFactory);\n\n            // Set to all levels\n            this.setLevel(Level.ALL);\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>If you don't use <code>trove</code> you can replace it with a normal java <code>HashMap</code> if you want.</p>\n"},{"tags":[],"owner":{"account_id":24110224,"reputation":11,"user_id":18080917,"display_name":"shubham puri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657451886,"creation_date":1657362390,"answer_id":72920609,"question_id":19052070,"body_markdown":"    ***** Creating Dynamic Multiple Log Files using RoutingAppender and\r\n                    RollingFileAppender based on MDC *****\r\n\r\n    1) In the below file I am creating the three files dynamically \r\n           a) specialspecial.log\r\n           b) rollingtest.log\r\n           c) Queue.Name.log\r\n\r\n     Note: we can create as many as you want just need change the keyname\r\n     like ThreadContext.remove(&quot;keyname&quot;); //removing previous key\r\n          ThreadContext.put(&quot;keyname&quot;,&quot;fileNameWithPath&quot;) //adding new file\r\n           log.info(&quot;Message&quot;); //now onwards log the messages into above file\r\n\r\n    2)  I have added the IdlePurgePolicy( 1min) - if the log events are not coming for 1 min then \r\n        it released all resources attached with the appender and deletes the dormant appender\r\n\r\n     and after deleting the appender if again log event is coming then it \r\n     will create the new appender and log the messages into our desired file \r\n     I have created my own and tested working fine in debug mode\r\n     ---------------------------------------------------------------------------------------\r\n    log4j2.properties\r\n    \r\n    status=debug\r\n    name=PropertiesConfig\r\n\r\n    filter.threshold.type=ThresholdFilter\r\n    filter.threshold.level=debug\r\n\r\n    appenders=routing\r\n    appender.routing.type=Routing\r\n    appender.routing.name=Routing\r\n\r\n    appender.routing.purge.type=IdlePurgePolicy\r\n    appender.routing.purge.timeToLive=1\r\n    appender.routing.purge.timeUnit=minutes\r\n\r\n    appender.routing.routes.type=Routes\r\n    appender.routing.routes.pattern=$${ctx:keyname}\r\n    \r\n    appender.routing.routes.route.type=Route\r\n    appender.routing.routes.route.rolling.type=RollingFile\r\n    appender.routing.routes.route.rolling.name=RollingFile\r\n    appender.routing.routes.route.rolling.fileName=${ctx:keyname}.log\r\n    appender.routing.routes.route.rolling.filePattern=${ctx:keyname}-%d{MM-dd-yy-HH-mm-ss}-%i.log.gz\r\n    appender.routing.routes.route.rolling.layout.type=PatternLayout\r\n    appender.routing.routes.route.rolling.layout.pattern=%m%n\r\n    appender.routing.routes.route.rolling.policies.type=Policies\r\n    #appender.routing.routes.route.rolling.policies.time.type=TimeBasedTriggeringPolicy\r\n    #appender.routing.routes.route.rolling.policies.time.interval=2\r\n    #appender.routing.routes.route.rolling.policies.time.modulate=true\r\n    appender.routing.routes.route.rolling.policies.size.type=SizeBasedTriggeringPolicy\r\n    appender.routing.routes.route.rolling.policies.size.size=1KB\r\n    appender.routing.routes.route.rolling.strategy.type=DefaultRolloverStrategy\r\n    appender.routing.routes.route.rolling.strategy.max=5\r\n    appender.routing.routes.route2.type=Route\r\n    appender.routing.routes.route2.key=P:/TestLogging/specialspecial\r\n    #appender.routing.routes.route.ref=Routes\r\n    \r\n    appender.routing.routes.route2.rolling.type=RollingFile\r\n    appender.routing.routes.route2.rolling.name=RollingFile\r\n    appender.routing.routes.route2.rolling.fileName=${ctx:keyname}.log\r\n    appender.routing.routes.route2.rolling.filePattern=${ctx:keyname}-%d{MM-dd-yy-HH-mm-ss}-%i.log.gz\r\n    appender.routing.routes.route2.rolling.layout.type=PatternLayout\r\n    appender.routing.routes.route2.rolling.layout.pattern=%d %p %C{1.} [%t] %m%n\r\n    appender.routing.routes.route2.rolling.policies.type=Policies\r\n    #appender.routing.routes.route2.rolling.policies.time.type=TimeBasedTriggeringPolicy\r\n    #appender.routing.routes.route2.rolling.policies.time.interval=2\r\n    #appender.routing.routes.route2.rolling.policies.time.modulate=true\r\n    appender.routing.routes.route2.rolling.policies.size.type=SizeBasedTriggeringPolicy\r\n    appender.routing.routes.route2.rolling.policies.size.size=1KB\r\n    appender.routing.routes.route2.rolling.strategy.type=DefaultRolloverStrategy\r\n    appender.routing.routes.route2.rolling.strategy.max = 5\r\n    loggers=routing\r\n    logger.routing.level=debug\r\n    logger.routing.name=com.infy.demo\r\n    logger.routing.additivity=false\r\n    logger.routing.appenderRef.routing.ref=Routing\r\n    rootLogger.level=debug\r\n    ------------------------------------------------------------------------------------------------------------------\r\n    TestLog4j2Logging.class\r\n \r\n     package com.infy.demo;\r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.time.LocalDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n    import org.apache.logging.log4j.ThreadContext;\r\n    import org.apache.logging.log4j.core.config.ConfigurationSource;\r\n    import org.apache.logging.log4j.core.config.Configurator;\r\n\r\n    public class TestLog4j2Logging {\r\n\t\r\n\tprivate static final Logger log = LogManager.getLogger(TestLog4j2Logging.class);\r\n\t\r\n\tpublic TestLog4j2Logging() {\r\n\t\tlogInfo(&quot;Logging has been initalized&quot;);\r\n\t}\r\n\t\r\n\tstatic {\r\n\t\tThreadContext.put(&quot;keyname&quot;,&quot;P:/TestLogging/TestLog4j2Logging&quot;);\r\n\t\tConfigurator.initialize(null, &quot;./properties/log4j2.properties&quot;);\r\n\t}\r\n\t\r\n\tpublic  void logTestLog4j2LoggingMesg()\r\n\t{\r\n\t\t\r\n\t\tString[] arr = {&quot;Msg1111111111111&quot;,&quot;Msg222222222222222&quot;,&quot;Msg3333333333333&quot;,&quot;Msg44444444444&quot;};\r\n\t\tfor (String string : arr) {\r\n\t\t\tlogInfo(string);\r\n\t\t\tlogError(string);\r\n\t\t\tlog.debug(string);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void logMqMsg() throws Exception\r\n\t{\r\n\t\t\r\n\t\t\r\n\t\tString[] mqArr = {&quot;MQ111111111111111111&quot;,&quot;MQ222222222222222222222222&quot;,&quot;MQ3333333333333333333333&quot;};\r\n\t\tfor (String string : mqArr) {\r\n\t\t\tlog.info(string);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tpublic void logSpecialKeyRouteMsgAppender()\r\n\t{\r\n\t\tString[] mqArr = {&quot;Special111111111111111111&quot;,&quot;Special222222222222222222222222&quot;,&quot;Special3333333333333333333333&quot;};\r\n\t\tfor (String string : mqArr) {\r\n\t\t\tlog.info(string);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) throws Exception\r\n\t{\r\n\t\tTestLog4j2Logging testLog4j2Logging = new TestLog4j2Logging();\r\n\t System.out.println(&quot;=================file TestLog4j2Logging.log creating and logging the messages==============================================&quot;);\r\n\t//Logging the messages for the this class level Logging\r\n\t\ttestLog4j2Logging.logTestLog4j2LoggingMesg();\r\n\t\t\r\n\t\t\r\n\t System.out.println(&quot;=================file Queue.Name.log creating and logging the messages c==============================================&quot;);\r\n\t//Logging the messages for the MQ Logging file Queue.Name\t\r\n\t\tThreadContext.remove(&quot;keyname&quot;);\r\n\t\tThreadContext.put(&quot;keyname&quot;, &quot;P:/TestLogging/Queue.Name&quot;);\r\n\t\ttestLog4j2Logging.logMqMsg();\r\n\t\tThreadContext.remove(&quot;keyname&quot;);\r\n\t\tThreadContext.put(&quot;keyname&quot;, &quot;P:/TestLogging/TestLog4j2Logging&quot;);\r\n\t\t\r\n\t\t\r\n\tSystem.out.println(&quot;=================file TestLog4j2Logging logging the messages==============================================&quot;);\r\n\t    //Logging the messages for special key in the log4j.properties file \r\n\t\tThreadContext.remove(&quot;keyname&quot;);\r\n\t\tThreadContext.put(&quot;keyname&quot;, &quot;P:/TestLogging/specialspecial&quot;);\r\n\t\ttestLog4j2Logging.logSpecialKeyRouteMsgAppender();\r\n\t\tThreadContext.remove(&quot;keyname&quot;);\r\n\t\tThreadContext.put(&quot;keyname&quot;, &quot;P:/TestLogging/TestLog4j2Logging&quot;);\r\n\t\t\r\n\t\tThread.sleep(61000);\r\n\t\tlogInfo(&quot;Logging is Complted sucessfully&quot;);\r\n\t\tSystem.out.println(&quot;Messages are getting Logged&quot;);\r\n\t}\r\n\t\r\n\tprivate static String getCurrentDateAndTime() {\r\n\t\t DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);  \r\n\r\n\t\treturn dtf.format(LocalDateTime.now());\r\n\t}\r\n\t\r\n\tprivate static void logInfo(String msg) {\r\n\t\tlog.info(&quot;{} INFO  {} - {}&quot;,getCurrentDateAndTime(),TestLog4j2Logging.class.getName(),msg);\r\n\t}\r\n\t\r\n\tprivate static void logError(String msg) {\r\n\t\tlog.info(&quot;{} ERROR {} - {}&quot;,getCurrentDateAndTime(),TestLog4j2Logging.class.getName(),msg);\r\n\t}\r\n\r\n}\r\n      ","title":"Log4j2: Dynamic creation of log files for multiple logs","body":"<pre><code>***** Creating Dynamic Multiple Log Files using RoutingAppender and\n                RollingFileAppender based on MDC *****\n\n1) In the below file I am creating the three files dynamically \n       a) specialspecial.log\n       b) rollingtest.log\n       c) Queue.Name.log\n\n Note: we can create as many as you want just need change the keyname\n like ThreadContext.remove(&quot;keyname&quot;); //removing previous key\n      ThreadContext.put(&quot;keyname&quot;,&quot;fileNameWithPath&quot;) //adding new file\n       log.info(&quot;Message&quot;); //now onwards log the messages into above file\n\n2)  I have added the IdlePurgePolicy( 1min) - if the log events are not coming for 1 min then \n    it released all resources attached with the appender and deletes the dormant appender\n\n and after deleting the appender if again log event is coming then it \n will create the new appender and log the messages into our desired file \n I have created my own and tested working fine in debug mode\n ---------------------------------------------------------------------------------------\nlog4j2.properties\n\nstatus=debug\nname=PropertiesConfig\n\nfilter.threshold.type=ThresholdFilter\nfilter.threshold.level=debug\n\nappenders=routing\nappender.routing.type=Routing\nappender.routing.name=Routing\n\nappender.routing.purge.type=IdlePurgePolicy\nappender.routing.purge.timeToLive=1\nappender.routing.purge.timeUnit=minutes\n\nappender.routing.routes.type=Routes\nappender.routing.routes.pattern=$${ctx:keyname}\n\nappender.routing.routes.route.type=Route\nappender.routing.routes.route.rolling.type=RollingFile\nappender.routing.routes.route.rolling.name=RollingFile\nappender.routing.routes.route.rolling.fileName=${ctx:keyname}.log\nappender.routing.routes.route.rolling.filePattern=${ctx:keyname}-%d{MM-dd-yy-HH-mm-ss}-%i.log.gz\nappender.routing.routes.route.rolling.layout.type=PatternLayout\nappender.routing.routes.route.rolling.layout.pattern=%m%n\nappender.routing.routes.route.rolling.policies.type=Policies\n#appender.routing.routes.route.rolling.policies.time.type=TimeBasedTriggeringPolicy\n#appender.routing.routes.route.rolling.policies.time.interval=2\n#appender.routing.routes.route.rolling.policies.time.modulate=true\nappender.routing.routes.route.rolling.policies.size.type=SizeBasedTriggeringPolicy\nappender.routing.routes.route.rolling.policies.size.size=1KB\nappender.routing.routes.route.rolling.strategy.type=DefaultRolloverStrategy\nappender.routing.routes.route.rolling.strategy.max=5\nappender.routing.routes.route2.type=Route\nappender.routing.routes.route2.key=P:/TestLogging/specialspecial\n#appender.routing.routes.route.ref=Routes\n\nappender.routing.routes.route2.rolling.type=RollingFile\nappender.routing.routes.route2.rolling.name=RollingFile\nappender.routing.routes.route2.rolling.fileName=${ctx:keyname}.log\nappender.routing.routes.route2.rolling.filePattern=${ctx:keyname}-%d{MM-dd-yy-HH-mm-ss}-%i.log.gz\nappender.routing.routes.route2.rolling.layout.type=PatternLayout\nappender.routing.routes.route2.rolling.layout.pattern=%d %p %C{1.} [%t] %m%n\nappender.routing.routes.route2.rolling.policies.type=Policies\n#appender.routing.routes.route2.rolling.policies.time.type=TimeBasedTriggeringPolicy\n#appender.routing.routes.route2.rolling.policies.time.interval=2\n#appender.routing.routes.route2.rolling.policies.time.modulate=true\nappender.routing.routes.route2.rolling.policies.size.type=SizeBasedTriggeringPolicy\nappender.routing.routes.route2.rolling.policies.size.size=1KB\nappender.routing.routes.route2.rolling.strategy.type=DefaultRolloverStrategy\nappender.routing.routes.route2.rolling.strategy.max = 5\nloggers=routing\nlogger.routing.level=debug\nlogger.routing.name=com.infy.demo\nlogger.routing.additivity=false\nlogger.routing.appenderRef.routing.ref=Routing\nrootLogger.level=debug\n------------------------------------------------------------------------------------------------------------------\nTestLog4j2Logging.class\n\n package com.infy.demo;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\n\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport org.apache.logging.log4j.ThreadContext;\nimport org.apache.logging.log4j.core.config.ConfigurationSource;\nimport org.apache.logging.log4j.core.config.Configurator;\n\npublic class TestLog4j2Logging {\n\nprivate static final Logger log = LogManager.getLogger(TestLog4j2Logging.class);\n\npublic TestLog4j2Logging() {\n    logInfo(&quot;Logging has been initalized&quot;);\n}\n\nstatic {\n    ThreadContext.put(&quot;keyname&quot;,&quot;P:/TestLogging/TestLog4j2Logging&quot;);\n    Configurator.initialize(null, &quot;./properties/log4j2.properties&quot;);\n}\n\npublic  void logTestLog4j2LoggingMesg()\n{\n    \n    String[] arr = {&quot;Msg1111111111111&quot;,&quot;Msg222222222222222&quot;,&quot;Msg3333333333333&quot;,&quot;Msg44444444444&quot;};\n    for (String string : arr) {\n        logInfo(string);\n        logError(string);\n        log.debug(string);\n    }\n}\n\npublic void logMqMsg() throws Exception\n{\n    \n    \n    String[] mqArr = {&quot;MQ111111111111111111&quot;,&quot;MQ222222222222222222222222&quot;,&quot;MQ3333333333333333333333&quot;};\n    for (String string : mqArr) {\n        log.info(string);\n    }\n}\n\n\npublic void logSpecialKeyRouteMsgAppender()\n{\n    String[] mqArr = {&quot;Special111111111111111111&quot;,&quot;Special222222222222222222222222&quot;,&quot;Special3333333333333333333333&quot;};\n    for (String string : mqArr) {\n        log.info(string);\n    }\n}\n\npublic static void main(String[] args) throws Exception\n{\n    TestLog4j2Logging testLog4j2Logging = new TestLog4j2Logging();\n System.out.println(&quot;=================file TestLog4j2Logging.log creating and logging the messages==============================================&quot;);\n//Logging the messages for the this class level Logging\n    testLog4j2Logging.logTestLog4j2LoggingMesg();\n    \n    \n System.out.println(&quot;=================file Queue.Name.log creating and logging the messages c==============================================&quot;);\n//Logging the messages for the MQ Logging file Queue.Name   \n    ThreadContext.remove(&quot;keyname&quot;);\n    ThreadContext.put(&quot;keyname&quot;, &quot;P:/TestLogging/Queue.Name&quot;);\n    testLog4j2Logging.logMqMsg();\n    ThreadContext.remove(&quot;keyname&quot;);\n    ThreadContext.put(&quot;keyname&quot;, &quot;P:/TestLogging/TestLog4j2Logging&quot;);\n    \n    \nSystem.out.println(&quot;=================file TestLog4j2Logging logging the messages==============================================&quot;);\n    //Logging the messages for special key in the log4j.properties file \n    ThreadContext.remove(&quot;keyname&quot;);\n    ThreadContext.put(&quot;keyname&quot;, &quot;P:/TestLogging/specialspecial&quot;);\n    testLog4j2Logging.logSpecialKeyRouteMsgAppender();\n    ThreadContext.remove(&quot;keyname&quot;);\n    ThreadContext.put(&quot;keyname&quot;, &quot;P:/TestLogging/TestLog4j2Logging&quot;);\n    \n    Thread.sleep(61000);\n    logInfo(&quot;Logging is Complted sucessfully&quot;);\n    System.out.println(&quot;Messages are getting Logged&quot;);\n}\n\nprivate static String getCurrentDateAndTime() {\n     DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);  \n\n    return dtf.format(LocalDateTime.now());\n}\n\nprivate static void logInfo(String msg) {\n    log.info(&quot;{} INFO  {} - {}&quot;,getCurrentDateAndTime(),TestLog4j2Logging.class.getName(),msg);\n}\n\nprivate static void logError(String msg) {\n    log.info(&quot;{} ERROR {} - {}&quot;,getCurrentDateAndTime(),TestLog4j2Logging.class.getName(),msg);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":5530214,"reputation":2694,"user_id":4722577,"accept_rate":0,"display_name":"CAMD_3441"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686971833,"creation_date":1686971833,"answer_id":76494561,"question_id":19052070,"body_markdown":"You can use the Routing Appender, which you can find more info here https://logging.apache.org/log4j/2.x/manual/appenders.html#RoutingAppender and https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/routing/RoutingAppender.html\r\n\r\nI do have sample code using log4j2 Routing Appender in github here https://github.com/cdcentral/LoggingApp/pull/3/files\r\n\r\nHere&#39;s some important snippets.\r\n\r\nIn the log4j2.xml file I have this in the `Appenders` section:\r\n\r\n    &lt;Routing name=&quot;Routing&quot;&gt;\r\n      &lt;Routes pattern=&quot;$${ctx:DYNAMIC_LOG}&quot;&gt;\r\n        &lt;Route&gt;\r\n          &lt;RollingFile name=&quot;routing_log&quot; append=&quot;true&quot; fileName=&quot;${logDirectory}/${ctx:DYNAMIC_LOG}_log.log&quot;\r\n             filePattern=&quot;${logDirectory}/archive/${ctx:DYNAMIC_LOG}_Downlink-%d{MM-dd-yyyy}-%i.log&quot;&gt;\r\n            &lt;PatternLayout&gt;\r\n              &lt;pattern&gt;%d{ISO8601} [%t] %p %c %L - %m%n&lt;/pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n            &lt;Policies&gt;\r\n              &lt;OnStartupTriggeringPolicy /&gt;\r\n              &lt;TimeBasedTriggeringPolicy/&gt;\r\n              &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\r\n            &lt;/Policies&gt;\r\n            &lt;!-- Deletes log files, with format *.log, older than 2 days --&gt;\r\n            &lt;DefaultRolloverStrategy&gt;\r\n                &lt;Delete basePath=&quot;${logDirectory}/&quot; maxDepth=&quot;1&quot;&gt;\r\n                    &lt;IfFileName glob=&quot;*_log.log&quot; /&gt;\r\n                    &lt;IfLastModified age=&quot;2d&quot; /&gt;\r\n                &lt;/Delete&gt;\r\n            &lt;/DefaultRolloverStrategy&gt;\r\n          &lt;/RollingFile&gt;\r\n        &lt;/Route&gt;\r\n      &lt;/Routes&gt;\r\n    &lt;/Routing&gt;\r\n\r\nIn the `Loggers` section I did this Logger referencing the `Appender` above:\r\n\r\n    &lt;Logger name=&quot;RoutingLogger&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\r\n      &lt;appender-ref ref=&quot;Routing&quot; level=&quot;DEBUG&quot; /&gt;\r\n    &lt;/Logger&gt;\r\n\r\nIn your java class where you have a reference to the `RoutingLogger` you would have to put a `ThreadContext.put(&#39;key&#39;, &#39;value&#39;);` line of code before the logging with the RoutingLogger, like this:\r\n\r\n    import static com.ancocentral.loggingapp.LogHelper.ROUTING_LOGGER;\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n    import org.apache.logging.log4j.ThreadContext;\r\n    \r\n    /**\r\n     *\r\n     * @author chris\r\n     */\r\n    public class StartService implements Runnable {\r\n     \r\n        private String instance = &quot;&quot;;\r\n        public StartService (String instance) {\r\n            this.instance = instance;\r\n        }\r\n        @Override\r\n        public void run() {\r\n            connect();\r\n            try {\r\n                Thread.sleep(5000);\r\n            } catch (InterruptedException ex) {\r\n                ThreadContext.put(&quot;DYNAMIC_LOG&quot;, instance);\r\n                ROUTING_LOGGER.fatal(instance + &quot; Exception -&gt;&quot;, ex);\r\n            }\r\n            disconnect();\r\n        }\r\n        private void connect() {\r\n            ThreadContext.put(&quot;DYNAMIC_LOG&quot;, instance);\r\n            ROUTING_LOGGER.info(instance + &quot; is connecting.&quot;);\r\n        }\r\n        private void disconnect() {\r\n            ThreadContext.put(&quot;DYNAMIC_LOG&quot;, instance);\r\n            ROUTING_LOGGER.warn(instance + &quot; is disconnecting.&quot;);\r\n        }\r\n    }\r\n\r\nThe `DYNAMIC_LOG` text above is associated to the `&lt;Routing&gt; -&gt; &lt;Routes pattern= ` value in the log4j2.xml\r\n\r\nThe `instance` variable is a parameter passed into the class above.  The class is instantiated multiple times and a unique string id is passed in to it in the constructor and this unique string helps these log statements be written to different log files.\r\n\r\nHere&#39;s how I instantiate this class in the `main` method:\r\n\r\n        public static void main(String[] args) {\r\n\r\n            StartService ss = new StartService(&quot;Database_A&quot;);\r\n            Thread serviceThread = new Thread(ss);\r\n            serviceThread.start();\r\n    \r\n            StartService ss2 = new StartService(&quot;Database_B&quot;);\r\n            Thread serviceThread2 = new Thread(ss2);\r\n            serviceThread2.start();\r\n       }\r\n\r\nSo the logs that will be generated after this is ran will be &quot;Database_A_log.log&quot; and a &quot;Database_B_log.log&quot; \r\n\r\nTo see the rest of the peripheral code in this app you can look at my github link above.","title":"Log4j2: Dynamic creation of log files for multiple logs","body":"<p>You can use the Routing Appender, which you can find more info here <a href=\"https://logging.apache.org/log4j/2.x/manual/appenders.html#RoutingAppender\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/appenders.html#RoutingAppender</a> and <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/routing/RoutingAppender.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/appender/routing/RoutingAppender.html</a></p>\n<p>I do have sample code using log4j2 Routing Appender in github here <a href=\"https://github.com/cdcentral/LoggingApp/pull/3/files\" rel=\"nofollow noreferrer\">https://github.com/cdcentral/LoggingApp/pull/3/files</a></p>\n<p>Here's some important snippets.</p>\n<p>In the log4j2.xml file I have this in the <code>Appenders</code> section:</p>\n<pre><code>&lt;Routing name=&quot;Routing&quot;&gt;\n  &lt;Routes pattern=&quot;$${ctx:DYNAMIC_LOG}&quot;&gt;\n    &lt;Route&gt;\n      &lt;RollingFile name=&quot;routing_log&quot; append=&quot;true&quot; fileName=&quot;${logDirectory}/${ctx:DYNAMIC_LOG}_log.log&quot;\n         filePattern=&quot;${logDirectory}/archive/${ctx:DYNAMIC_LOG}_Downlink-%d{MM-dd-yyyy}-%i.log&quot;&gt;\n        &lt;PatternLayout&gt;\n          &lt;pattern&gt;%d{ISO8601} [%t] %p %c %L - %m%n&lt;/pattern&gt;\n        &lt;/PatternLayout&gt;\n        &lt;Policies&gt;\n          &lt;OnStartupTriggeringPolicy /&gt;\n          &lt;TimeBasedTriggeringPolicy/&gt;\n          &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot;/&gt;\n        &lt;/Policies&gt;\n        &lt;!-- Deletes log files, with format *.log, older than 2 days --&gt;\n        &lt;DefaultRolloverStrategy&gt;\n            &lt;Delete basePath=&quot;${logDirectory}/&quot; maxDepth=&quot;1&quot;&gt;\n                &lt;IfFileName glob=&quot;*_log.log&quot; /&gt;\n                &lt;IfLastModified age=&quot;2d&quot; /&gt;\n            &lt;/Delete&gt;\n        &lt;/DefaultRolloverStrategy&gt;\n      &lt;/RollingFile&gt;\n    &lt;/Route&gt;\n  &lt;/Routes&gt;\n&lt;/Routing&gt;\n</code></pre>\n<p>In the <code>Loggers</code> section I did this Logger referencing the <code>Appender</code> above:</p>\n<pre><code>&lt;Logger name=&quot;RoutingLogger&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\n  &lt;appender-ref ref=&quot;Routing&quot; level=&quot;DEBUG&quot; /&gt;\n&lt;/Logger&gt;\n</code></pre>\n<p>In your java class where you have a reference to the <code>RoutingLogger</code> you would have to put a <code>ThreadContext.put('key', 'value');</code> line of code before the logging with the RoutingLogger, like this:</p>\n<pre><code>import static com.ancocentral.loggingapp.LogHelper.ROUTING_LOGGER;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport org.apache.logging.log4j.ThreadContext;\n\n/**\n *\n * @author chris\n */\npublic class StartService implements Runnable {\n \n    private String instance = &quot;&quot;;\n    public StartService (String instance) {\n        this.instance = instance;\n    }\n    @Override\n    public void run() {\n        connect();\n        try {\n            Thread.sleep(5000);\n        } catch (InterruptedException ex) {\n            ThreadContext.put(&quot;DYNAMIC_LOG&quot;, instance);\n            ROUTING_LOGGER.fatal(instance + &quot; Exception -&gt;&quot;, ex);\n        }\n        disconnect();\n    }\n    private void connect() {\n        ThreadContext.put(&quot;DYNAMIC_LOG&quot;, instance);\n        ROUTING_LOGGER.info(instance + &quot; is connecting.&quot;);\n    }\n    private void disconnect() {\n        ThreadContext.put(&quot;DYNAMIC_LOG&quot;, instance);\n        ROUTING_LOGGER.warn(instance + &quot; is disconnecting.&quot;);\n    }\n}\n</code></pre>\n<p>The <code>DYNAMIC_LOG</code> text above is associated to the <code>&lt;Routing&gt; -&gt; &lt;Routes pattern= </code> value in the log4j2.xml</p>\n<p>The <code>instance</code> variable is a parameter passed into the class above.  The class is instantiated multiple times and a unique string id is passed in to it in the constructor and this unique string helps these log statements be written to different log files.</p>\n<p>Here's how I instantiate this class in the <code>main</code> method:</p>\n<pre><code>    public static void main(String[] args) {\n\n        StartService ss = new StartService(&quot;Database_A&quot;);\n        Thread serviceThread = new Thread(ss);\n        serviceThread.start();\n\n        StartService ss2 = new StartService(&quot;Database_B&quot;);\n        Thread serviceThread2 = new Thread(ss2);\n        serviceThread2.start();\n   }\n</code></pre>\n<p>So the logs that will be generated after this is ran will be &quot;Database_A_log.log&quot; and a &quot;Database_B_log.log&quot;</p>\n<p>To see the rest of the peripheral code in this app you can look at my github link above.</p>\n"}],"owner":{"account_id":1490764,"reputation":1434,"user_id":1397894,"accept_rate":100,"display_name":"spaceemotion"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15078,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":19072195,"answer_count":5,"score":6,"last_activity_date":1686971833,"creation_date":1380288637,"question_id":19052070,"body_markdown":"I am currently creating a system that can have modules (think of them as plugins), where each one of them can have their own log, dedicated.\r\n\r\nI would like to use the log4j2 project for logging, but I seem to have some trouble with the file appenders.\r\n\r\nThe main project (the module loader and &quot;core&quot; of the whole thing) should have its own log file, while the modules should have their own (like `mod_XXXXXXXX.log`).\r\n\r\nBy reading the documentation about the appenders I discovered the `FileAppender` class, and I was going to use that. Until I found out that I can&#39;t just simple add the appender to the default logger created by `LogManager.getLog()`.\r\n\r\nThe logger returned by the LogManager is a different logger than the `Logger` interface.\r\n\r\nEven searching did not give me any near solution, all I found was predefined file logs in the xml configuration - which is not what I want.\r\n\r\nThank you for reading; even the slightest clue is welcome :)","title":"Log4j2: Dynamic creation of log files for multiple logs","body":"<p>I am currently creating a system that can have modules (think of them as plugins), where each one of them can have their own log, dedicated.</p>\n\n<p>I would like to use the log4j2 project for logging, but I seem to have some trouble with the file appenders.</p>\n\n<p>The main project (the module loader and \"core\" of the whole thing) should have its own log file, while the modules should have their own (like <code>mod_XXXXXXXX.log</code>).</p>\n\n<p>By reading the documentation about the appenders I discovered the <code>FileAppender</code> class, and I was going to use that. Until I found out that I can't just simple add the appender to the default logger created by <code>LogManager.getLog()</code>.</p>\n\n<p>The logger returned by the LogManager is a different logger than the <code>Logger</code> interface.</p>\n\n<p>Even searching did not give me any near solution, all I found was predefined file logs in the xml configuration - which is not what I want.</p>\n\n<p>Thank you for reading; even the slightest clue is welcome :)</p>\n"},{"tags":["java","webautomation","playwright"],"answers":[{"tags":[],"owner":{"account_id":2754837,"reputation":19523,"user_id":2373249,"accept_rate":25,"display_name":"hardkoded"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1615813028,"creation_date":1615813028,"answer_id":66638453,"question_id":66638076,"body_markdown":"There is no Switch action like Selenium. You can use the `waitForPage` or `waitForPopup` functions. You just need to know what is the action triggering that new page. e.g.\r\n\r\n```\u001B\r\nPage popup = context.waitForPage(() -&gt; page.click(&quot;a&quot;));\r\n```\r\n\r\nThe `context` class also has a `pages()` function, which returns all the open pages.","title":"How do I switch to new tab or window in playwright-java?","body":"<p>There is no Switch action like Selenium. You can use the <code>waitForPage</code> or <code>waitForPopup</code> functions. You just need to know what is the action triggering that new page. e.g.</p>\n<pre><code>Page popup = context.waitForPage(() -&gt; page.click(&quot;a&quot;));\n</code></pre>\n<p>The <code>context</code> class also has a <code>pages()</code> function, which returns all the open pages.</p>\n"},{"tags":[],"owner":{"account_id":8284617,"reputation":656,"user_id":8689681,"display_name":"AthulMuralidhar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663338444,"creation_date":1663338444,"answer_id":73746331,"question_id":66638076,"body_markdown":"expanding on @hardkoded&#39;s answer, I got an error and am now using this: \r\n```\r\ncontext.waitForEvent(&#39;page&#39;)\r\n```\r\nworks for my purposes so far","title":"How do I switch to new tab or window in playwright-java?","body":"<p>expanding on @hardkoded's answer, I got an error and am now using this:</p>\n<pre><code>context.waitForEvent('page')\n</code></pre>\n<p>works for my purposes so far</p>\n"},{"tags":[],"owner":{"account_id":25568646,"reputation":374,"user_id":19349390,"display_name":"ttqa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663842087,"creation_date":1663842087,"answer_id":73813015,"question_id":66638076,"body_markdown":"\r\nWhat you want to do is continue your test in a new page. The official docs: https://playwright.dev/docs/pages#handling-new-pages\r\n\r\nHere is an example where we first work in the initial &quot;page&quot; and then, after clicking a button we want to continue our tests in a new tab we define as &quot;newPage&quot;:\r\n\r\n            // Here we are working in the initial page\r\n            await page.locator(&quot;#locator&quot;).type(&quot;This happens in the initial page..&quot;);\r\n    \r\n            /*  When &quot;Ok&quot; is clicked the test waits for a new page event and assigns to new page object to a variable called newPage\r\n                After this point we want the test to continue in the new tab,\r\n                so we&#39;ll have to use the newly defined newPage variable when working on that tab\r\n            */\r\n            const [newPage] = await Promise.all([\r\n                context.waitForEvent(&#39;page&#39;),\r\n                page.locator(&quot;span &gt;&gt; text=Ok&quot;).click()\r\n                \r\n            ])\r\n            await newPage.waitForLoadState();\r\n    \r\n            console.log(&quot;A new tab opened and the url of the tab is: &quot; + newPage.url());\r\n    \r\n            // Here we work with the newPage object and we can perform actions like with page\r\n            await newPage.locator(&quot;#Description&quot;).type(&quot;This happens in a new tab!&quot;);\r\n\r\n","title":"How do I switch to new tab or window in playwright-java?","body":"<p>What you want to do is continue your test in a new page. The official docs: <a href=\"https://playwright.dev/docs/pages#handling-new-pages\" rel=\"nofollow noreferrer\">https://playwright.dev/docs/pages#handling-new-pages</a></p>\n<p>Here is an example where we first work in the initial &quot;page&quot; and then, after clicking a button we want to continue our tests in a new tab we define as &quot;newPage&quot;:</p>\n<pre><code>        // Here we are working in the initial page\n        await page.locator(&quot;#locator&quot;).type(&quot;This happens in the initial page..&quot;);\n\n        /*  When &quot;Ok&quot; is clicked the test waits for a new page event and assigns to new page object to a variable called newPage\n            After this point we want the test to continue in the new tab,\n            so we'll have to use the newly defined newPage variable when working on that tab\n        */\n        const [newPage] = await Promise.all([\n            context.waitForEvent('page'),\n            page.locator(&quot;span &gt;&gt; text=Ok&quot;).click()\n            \n        ])\n        await newPage.waitForLoadState();\n\n        console.log(&quot;A new tab opened and the url of the tab is: &quot; + newPage.url());\n\n        // Here we work with the newPage object and we can perform actions like with page\n        await newPage.locator(&quot;#Description&quot;).type(&quot;This happens in a new tab!&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7583167,"reputation":26,"user_id":5753228,"display_name":"Elayaraja K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681852806,"creation_date":1681852806,"answer_id":76049122,"question_id":66638076,"body_markdown":"Below code snippet works between tabs. \r\n\r\n    page.context().pages().stream().filter(x -&gt; x.title().equals(&quot;expectedTitle&quot;)).findFirst().get().bringToFront();\r\n\r\n","title":"How do I switch to new tab or window in playwright-java?","body":"<p>Below code snippet works between tabs.</p>\n<pre><code>page.context().pages().stream().filter(x -&gt; x.title().equals(&quot;expectedTitle&quot;)).findFirst().get().bringToFront();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14377603,"reputation":21,"user_id":10385698,"display_name":"Lucas Bonanno"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686971097,"creation_date":1686971097,"answer_id":76494535,"question_id":66638076,"body_markdown":"It works fine for me:\r\n\r\n    String newUrl = page.context().pages().get(index_to_switch).url();\r\n    page.navigate(newUrl);\r\n\r\nbut you can also try this way:\r\n\r\n    page.context().pages().get(index_to_switch).bringToFront()","title":"How do I switch to new tab or window in playwright-java?","body":"<p>It works fine for me:</p>\n<pre><code>String newUrl = page.context().pages().get(index_to_switch).url();\npage.navigate(newUrl);\n</code></pre>\n<p>but you can also try this way:</p>\n<pre><code>page.context().pages().get(index_to_switch).bringToFront()\n</code></pre>\n"}],"owner":{"account_id":17342846,"reputation":103,"user_id":12563055,"display_name":"chetan rajiv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6279,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1686971097,"creation_date":1615811477,"question_id":66638076,"body_markdown":"How can we switch to a new window that has opened while running test, and how can I get back to the parent window in playwright-java?","title":"How do I switch to new tab or window in playwright-java?","body":"<p>How can we switch to a new window that has opened while running test, and how can I get back to the parent window in playwright-java?</p>\n"},{"tags":["java","unit-testing","mockito","powermock","powermockito"],"comments":[{"owner":{"display_name":"user180100"},"score":1,"creation_date":1462857296,"post_id":37129192,"comment_id":61799523,"body_markdown":"`implClassTestSpy` is a spied-on instance can&#39;t you just do a `doNothing().when(implClassTestSpy, &quot;voidMethodWithParams&quot;, anyString())` or something like that? see http://stackoverflow.com/questions/25020277/mockito-powermockito-mock-private-void-method","body":"<code>implClassTestSpy</code> is a spied-on instance can&#39;t you just do a <code>doNothing().when(implClassTestSpy, &quot;voidMethodWithParams&quot;, anyString())</code> or something like that? see <a href=\"http://stackoverflow.com/questions/25020277/mockito-powermockito-mock-private-void-method\" title=\"mockito powermockito mock private void method\">stackoverflow.com/questions/25020277/&hellip;</a>"},{"owner":{"account_id":247492,"reputation":431,"user_id":522249,"accept_rate":89,"display_name":"Dinesh Kumar Sarangapani"},"score":0,"creation_date":1462969887,"post_id":37129192,"comment_id":61860763,"body_markdown":"Yes, I can do that. What is the difference ?","body":"Yes, I can do that. What is the difference ?"}],"answers":[{"tags":[],"owner":{"account_id":3431128,"reputation":495,"user_id":2875519,"display_name":"Felix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524120897,"creation_date":1524120897,"answer_id":49914553,"question_id":37129192,"body_markdown":"Redescribe the Question :  \r\n&gt; use Powermock&#39;s `suppress + method()` cannot correctly get the `@Overriden protected` method : __voidMethodWithParams__, because the problem `TooManyMethodsFoundException `, find two methods which exist in class `ImplClassTest ` and `AbstractTest`\r\n\r\n__Problem__ : find two method! Powermock didn&#39;t know to suppress which one.\r\n \r\n        // encounter TooManyMethodsFoundException !!!\r\n        suppress(method(AbstractTest.class, &quot;voidMethodWithParams&quot;, String.class));\r\n\r\n\r\n__Workaround__: This problem surely ugly, use java original way `foo.class.getMethod()`  __\\(just for public\\)__ or `bar.class.getDeClaredMethod()` __(for Protected and Private)__\r\n     \r\n    // &quot;voidMethodWithParams&quot; is protected method use getDeclaredMethod()\r\n     suppress(ImplClassTest.class.getDeclaredMethod(&quot;voidMethodWithParams&quot;, String.class))\r\n    // &quot;publicMethod&quot; use getMethod()\r\n     suppress(ContainPublicMethodClass.class.getMethod(&quot;publicMethod&quot;, foo.class))\r\n\r\n__PS__ : if you want to suppress all the method in one class, use powermock&#39;s `methodsDeclaredIn()`\r\n     \r\n    import static org.powermock.api.support.membermodification.MemberMatcher.methodsDeclaredIn;\r\n    suppress(methodsDeclaredIn(AbstractTest.class))\r\n","title":"TooManyMethodsFoundException for inherited protected methods in PowerMock","body":"<p>Redescribe the Question :  </p>\n\n<blockquote>\n  <p>use Powermock's <code>suppress + method()</code> cannot correctly get the <code>@Overriden protected</code> method : <strong>voidMethodWithParams</strong>, because the problem <code>TooManyMethodsFoundException</code>, find two methods which exist in class <code>ImplClassTest</code> and <code>AbstractTest</code></p>\n</blockquote>\n\n<p><strong>Problem</strong> : find two method! Powermock didn't know to suppress which one.</p>\n\n<pre><code>    // encounter TooManyMethodsFoundException !!!\n    suppress(method(AbstractTest.class, \"voidMethodWithParams\", String.class));\n</code></pre>\n\n<p><strong>Workaround</strong>: This problem surely ugly, use java original way <code>foo.class.getMethod()</code>  <strong>(just for public)</strong> or <code>bar.class.getDeClaredMethod()</code> <strong>(for Protected and Private)</strong></p>\n\n<pre><code>// \"voidMethodWithParams\" is protected method use getDeclaredMethod()\n suppress(ImplClassTest.class.getDeclaredMethod(\"voidMethodWithParams\", String.class))\n// \"publicMethod\" use getMethod()\n suppress(ContainPublicMethodClass.class.getMethod(\"publicMethod\", foo.class))\n</code></pre>\n\n<p><strong>PS</strong> : if you want to suppress all the method in one class, use powermock's <code>methodsDeclaredIn()</code></p>\n\n<pre><code>import static org.powermock.api.support.membermodification.MemberMatcher.methodsDeclaredIn;\nsuppress(methodsDeclaredIn(AbstractTest.class))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28837660,"reputation":1,"user_id":22086667,"display_name":"fayyu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686970244,"creation_date":1686970244,"answer_id":76494506,"question_id":37129192,"body_markdown":"Update your mockito versions to the compatible mockito core mockito-all","title":"TooManyMethodsFoundException for inherited protected methods in PowerMock","body":"<p>Update your mockito versions to the compatible mockito core mockito-all</p>\n"}],"owner":{"account_id":247492,"reputation":431,"user_id":522249,"accept_rate":89,"display_name":"Dinesh Kumar Sarangapani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1402,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1686970244,"creation_date":1462853910,"question_id":37129192,"body_markdown":"Steps to re-produce,\r\n\r\n 1. Create a class with a protected method and override the same in subclass.\r\n 2. Create a test for the subclass and try to suppress the method call `throws TooManyMethodsFoundException`.\r\n\r\nTestInterface.java\r\n\r\n    package com.test.powermock;\r\n    \r\n    /**\r\n     * Created by dineshkumar on 06/05/16.\r\n     */\r\n    public interface TestInterface {\r\n        public int testMethod() throws Exception;\r\n    }\r\n\r\n\r\nAbstractTest.java\r\n\r\n    package com.test.powermock;\r\n    \r\n    /**\r\n     * Created by dineshkumar on 06/05/16.\r\n     */\r\n    public abstract class AbstractTest implements TestInterface {\r\n    \r\n    public int testMethod() throws Exception {\r\n            return 0;\r\n        }\r\n    \r\n        protected void voidMethodWithParams(String a) throws Exception{\r\n    \r\n        }\r\n    }\r\n\r\n\r\nImplClassTest.java\r\n\r\n    package com.test.powermock;\r\n    \r\n    /**\r\n     * Created by dineshkumar on 06/05/16.\r\n     */\r\n    public class ImplClassTest extends AbstractTest {\r\n    \r\n    \r\n        @Override\r\n        public int testMethod() throws Exception {\r\n            voidMethodWithParams(&quot;a&quot;);\r\n            return 2;\r\n        }\r\n    \r\n        @Override\r\n        protected void voidMethodWithParams(String a) throws Exception{\r\n            System.out.println(&quot;dd&quot;);\r\n        }\r\n    }\r\n\r\n\r\nImplClassTestTest.java\r\n\r\n    package com.test.powermock;\r\n    \r\n    import org.powermock.api.mockito.PowerMockito;\r\n    import static org.powermock.api.support.membermodification.MemberMatcher.method;\r\n    import static org.powermock.api.support.membermodification.MemberModifier.suppress;\r\n    import static org.testng.Assert.*;\r\n    \r\n    /**\r\n     * Created by dineshkumar on 06/05/16.\r\n     */\r\n    public class ImplClassTestTest {\r\n    \r\n        @org.testng.annotations.Test\r\n        public void testTestMethod() throws Exception {\r\n            ImplClassTest implClassTestSpy = PowerMockito.spy(new ImplClassTest());\r\n            suppress(method(ImplClassTest.class, &quot;voidMethodWithParams&quot;, String.class));\r\n            int res = implClassTestSpy.testMethod();\r\n            assertEquals(res, 2);\r\n        }\r\n    }\r\n\r\nAfter google, https://groups.google.com/forum/#!topic/powermock/h1U5YyEXqfY\r\n\r\nAlso tried the following code,\r\n\r\n    package com.test.powermock;\r\n    \r\n    import org.powermock.api.mockito.PowerMockito;\r\n    \r\n    import static org.powermock.api.support.membermodification.MemberMatcher.method;\r\n    import static org.powermock.api.support.membermodification.MemberModifier.suppress;\r\n    import static org.testng.Assert.*;\r\n    \r\n    /**\r\n     * Created by dineshkumar on 06/05/16.\r\n     */\r\n    public class ImplClassTestTest {\r\n    \r\n        @org.testng.annotations.Test\r\n        public void testTestMethod() throws Exception {\r\n            ImplClassTest implClassTestSpy = PowerMockito.spy(new ImplClassTest());\r\n            suppress(method(AbstractTest.class, &quot;voidMethodWithParams&quot;, String.class));\r\n            suppress(method(ImplClassTest.class, &quot;voidMethodWithParams&quot;, String.class));\r\n            int res = implClassTestSpy.testMethod();\r\n            assertEquals(res, 2);\r\n        }\r\n    }\r\n\r\nIs there any way I can suppress the methods ?","title":"TooManyMethodsFoundException for inherited protected methods in PowerMock","body":"<p>Steps to re-produce,</p>\n\n<ol>\n<li>Create a class with a protected method and override the same in subclass.</li>\n<li>Create a test for the subclass and try to suppress the method call <code>throws TooManyMethodsFoundException</code>.</li>\n</ol>\n\n<p>TestInterface.java</p>\n\n<pre><code>package com.test.powermock;\n\n/**\n * Created by dineshkumar on 06/05/16.\n */\npublic interface TestInterface {\n    public int testMethod() throws Exception;\n}\n</code></pre>\n\n<p>AbstractTest.java</p>\n\n<pre><code>package com.test.powermock;\n\n/**\n * Created by dineshkumar on 06/05/16.\n */\npublic abstract class AbstractTest implements TestInterface {\n\npublic int testMethod() throws Exception {\n        return 0;\n    }\n\n    protected void voidMethodWithParams(String a) throws Exception{\n\n    }\n}\n</code></pre>\n\n<p>ImplClassTest.java</p>\n\n<pre><code>package com.test.powermock;\n\n/**\n * Created by dineshkumar on 06/05/16.\n */\npublic class ImplClassTest extends AbstractTest {\n\n\n    @Override\n    public int testMethod() throws Exception {\n        voidMethodWithParams(\"a\");\n        return 2;\n    }\n\n    @Override\n    protected void voidMethodWithParams(String a) throws Exception{\n        System.out.println(\"dd\");\n    }\n}\n</code></pre>\n\n<p>ImplClassTestTest.java</p>\n\n<pre><code>package com.test.powermock;\n\nimport org.powermock.api.mockito.PowerMockito;\nimport static org.powermock.api.support.membermodification.MemberMatcher.method;\nimport static org.powermock.api.support.membermodification.MemberModifier.suppress;\nimport static org.testng.Assert.*;\n\n/**\n * Created by dineshkumar on 06/05/16.\n */\npublic class ImplClassTestTest {\n\n    @org.testng.annotations.Test\n    public void testTestMethod() throws Exception {\n        ImplClassTest implClassTestSpy = PowerMockito.spy(new ImplClassTest());\n        suppress(method(ImplClassTest.class, \"voidMethodWithParams\", String.class));\n        int res = implClassTestSpy.testMethod();\n        assertEquals(res, 2);\n    }\n}\n</code></pre>\n\n<p>After google, <a href=\"https://groups.google.com/forum/#!topic/powermock/h1U5YyEXqfY\" rel=\"nofollow\">https://groups.google.com/forum/#!topic/powermock/h1U5YyEXqfY</a></p>\n\n<p>Also tried the following code,</p>\n\n<pre><code>package com.test.powermock;\n\nimport org.powermock.api.mockito.PowerMockito;\n\nimport static org.powermock.api.support.membermodification.MemberMatcher.method;\nimport static org.powermock.api.support.membermodification.MemberModifier.suppress;\nimport static org.testng.Assert.*;\n\n/**\n * Created by dineshkumar on 06/05/16.\n */\npublic class ImplClassTestTest {\n\n    @org.testng.annotations.Test\n    public void testTestMethod() throws Exception {\n        ImplClassTest implClassTestSpy = PowerMockito.spy(new ImplClassTest());\n        suppress(method(AbstractTest.class, \"voidMethodWithParams\", String.class));\n        suppress(method(ImplClassTest.class, \"voidMethodWithParams\", String.class));\n        int res = implClassTestSpy.testMethod();\n        assertEquals(res, 2);\n    }\n}\n</code></pre>\n\n<p>Is there any way I can suppress the methods ?</p>\n"},{"tags":["java","class","encapsulation"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1686969378,"post_id":76494466,"comment_id":134875646,"body_markdown":"Look at your constructor - you&#39;re assigning the instance values (`this.hand`) to the parameters you&#39;re passing in.  The assignment should be the other way around (ie `this.hand = hand`)","body":"Look at your constructor - you&#39;re assigning the instance values (<code>this.hand</code>) to the parameters you&#39;re passing in.  The assignment should be the other way around (ie <code>this.hand = hand</code>)"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686969426,"creation_date":1686969426,"answer_id":76494491,"question_id":76494466,"body_markdown":"&gt; _&quot;... Why are the variables not being saved? ...&quot;_\r\n\r\nIn your constructor method, you have the assignment&#39;s reversed.\r\n\r\n```java\r\npublic Player (Hand hand, int chips, String name) {\r\n    hand = this.hand;\r\n    chips = this.chips;\r\n    name = this.name;\r\n}\r\n```\r\n\r\nIt should be, the following.\r\n\r\n```java\r\npublic Player (Hand hand, int chips, String name) {\r\n    this.hand = hand;\r\n    this.chips = chips;\r\n    this.name = name;\r\n}\r\n```\r\n\r\nIn this situation, the _this_ keyword is used to differentiate the instance variables from the local variables.\r\n\r\n_[Using the this Keyword (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Classes and Objects)](https://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)_.","title":"Player class returning null 0 null","body":"<blockquote>\n<p><em>&quot;... Why are the variables not being saved? ...&quot;</em></p>\n</blockquote>\n<p>In your constructor method, you have the assignment's reversed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Player (Hand hand, int chips, String name) {\n    hand = this.hand;\n    chips = this.chips;\n    name = this.name;\n}\n</code></pre>\n<p>It should be, the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Player (Hand hand, int chips, String name) {\n    this.hand = hand;\n    this.chips = chips;\n    this.name = name;\n}\n</code></pre>\n<p>In this situation, the <em>this</em> keyword is used to differentiate the instance variables from the local variables.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html\" rel=\"nofollow noreferrer\">Using the this Keyword (The Java™ Tutorials &gt; Learning the Java Language &gt; Classes and Objects)</a></em>.</p>\n"}],"owner":{"account_id":28816596,"reputation":1,"user_id":22070086,"display_name":"Derrick Perry"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1686983159,"answer_count":1,"score":-1,"last_activity_date":1686969426,"creation_date":1686968821,"question_id":76494466,"body_markdown":"I created a player with: `Player player = new Player(hand, 5000, &quot;Player_1&quot;);`\r\n\r\nWhen printing class it prints &quot;null 0 null&quot;\r\n\r\nWhy are the variables not being saved? Thanks!\r\n\r\nPlayer class:\r\n\r\n```\r\npublic class Player {\r\n    private Hand hand; //hand with 5 cards\r\n    private int chips; //chips left\r\n    private String name; //name of player\r\n\r\n    public Player (Hand hand, int chips, String name) {\r\n        hand = this.hand;\r\n        chips = this.chips;\r\n        name = this.name;\r\n    }\r\n\r\n    public int getChips() {\r\n        return chips;\r\n    }\r\n\r\n    public Hand getHand() {\r\n        return hand;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return name + &quot; &quot; + chips + &quot; &quot; + hand;\r\n    }\r\n}\r\n```\r\n\r\n","title":"Player class returning null 0 null","body":"<p>I created a player with: <code>Player player = new Player(hand, 5000, &quot;Player_1&quot;);</code></p>\n<p>When printing class it prints &quot;null 0 null&quot;</p>\n<p>Why are the variables not being saved? Thanks!</p>\n<p>Player class:</p>\n<pre><code>public class Player {\n    private Hand hand; //hand with 5 cards\n    private int chips; //chips left\n    private String name; //name of player\n\n    public Player (Hand hand, int chips, String name) {\n        hand = this.hand;\n        chips = this.chips;\n        name = this.name;\n    }\n\n    public int getChips() {\n        return chips;\n    }\n\n    public Hand getHand() {\n        return hand;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    @Override\n    public String toString() {\n        return name + &quot; &quot; + chips + &quot; &quot; + hand;\n    }\n}\n</code></pre>\n"},{"tags":["java","jackson","swagger","springdoc","springdoc-openapi-ui"],"comments":[{"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"score":1,"creation_date":1628706227,"post_id":68747036,"comment_id":121495758,"body_markdown":"There is an option with [JsonProperty](https://www.baeldung.com/jackson-serialize-enums#3-using-jsonproperty), [JsonCreator](https://www.baeldung.com/jackson-serialize-enums#4-using-jsoncreator) and overriding [`toString()`](https://stackoverflow.com/questions/62677965/using-schemaallowablevalues-for-enum-param-using-openapi-in-spring-boot). Can you check whether these work pls?","body":"There is an option with <a href=\"https://www.baeldung.com/jackson-serialize-enums#3-using-jsonproperty\" rel=\"nofollow noreferrer\">JsonProperty</a>, <a href=\"https://www.baeldung.com/jackson-serialize-enums#4-using-jsoncreator\" rel=\"nofollow noreferrer\">JsonCreator</a> and overriding <a href=\"https://stackoverflow.com/questions/62677965/using-schemaallowablevalues-for-enum-param-using-openapi-in-spring-boot\"><code>toString()</code></a>. Can you check whether these work pls?"},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1628707576,"post_id":68747036,"comment_id":121496236,"body_markdown":"`JsonProperty` and (as alluded to in the question) `toString()` work.  No such luck with `JsonCreator` (though given that creates an enum from a value and doesn&#39;t declaratively specify a mapping, I don&#39;t think there&#39;s really any reasonable way it _could_ work).","body":"<code>JsonProperty</code> and (as alluded to in the question) <code>toString()</code> work.  No such luck with <code>JsonCreator</code> (though given that creates an enum from a value and doesn&#39;t declaratively specify a mapping, I don&#39;t think there&#39;s really any reasonable way it <i>could</i> work)."},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1628707796,"post_id":68747036,"comment_id":121496307,"body_markdown":"@aksappy Thanks; I&#39;ve expanded the `JsonProperty` suggestion into an answer.","body":"@aksappy Thanks; I&#39;ve expanded the <code>JsonProperty</code> suggestion into an answer."}],"answers":[{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628707777,"creation_date":1628707777,"answer_id":68747457,"question_id":68747036,"body_markdown":"One solution is to replace the `@JsonValue` implementation with `@JsonProperty`:\r\n\r\n```lang-java\r\npublic enum Suit {\r\n    @JsonProperty(&quot;Hearts&quot;) HEARTS,\r\n    @JsonProperty(&quot;Diamonds&quot;) DIAMONDS,\r\n    @JsonProperty(&quot;Clubs&quot;) CLUBS,\r\n    @JsonProperty(&quot;Spades&quot;) SPADES;\r\n}\r\n```\r\n\r\nNote that this does result in some duplication if the value is programmatically needed, as it will need to be specified both in `@JsonProperty` as well as a value on the enum.","title":"How can have springdoc-openapi use the @JsonValue enum format without changing toString?","body":"<p>One solution is to replace the <code>@JsonValue</code> implementation with <code>@JsonProperty</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum Suit {\n    @JsonProperty(&quot;Hearts&quot;) HEARTS,\n    @JsonProperty(&quot;Diamonds&quot;) DIAMONDS,\n    @JsonProperty(&quot;Clubs&quot;) CLUBS,\n    @JsonProperty(&quot;Spades&quot;) SPADES;\n}\n</code></pre>\n<p>Note that this does result in some duplication if the value is programmatically needed, as it will need to be specified both in <code>@JsonProperty</code> as well as a value on the enum.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670888915,"creation_date":1628712025,"answer_id":68748287,"question_id":68747036,"body_markdown":"A [`PropertyCustomizer`](https://javadoc.io/static/org.springdoc/springdoc-openapi-common/1.5.10/org/springdoc/core/customizers/PropertyCustomizer.html) Spring bean can be created to customize the property.  This can be done either for the specific enum type, or globally for all enums.\r\n\r\n## Type-specific customizer with explicit list\r\n\r\nThe following customizer will explicitly set the enum values for the specific enum type:\r\n\r\n```lang-java\r\nimport com.fasterxml.jackson.databind.JavaType;\r\nimport io.swagger.v3.core.converter.AnnotatedType;\r\nimport io.swagger.v3.oas.models.media.Schema;\r\nimport io.swagger.v3.oas.models.media.StringSchema;\r\nimport org.springdoc.core.customizers.PropertyCustomizer;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.List;\r\n\r\n@Component\r\npublic class SuitPropertyCustomizer implements PropertyCustomizer {\r\n    @Override\r\n    public Schema customize(Schema property, AnnotatedType type) {\r\n        if (property instanceof StringSchema &amp;&amp; isSuit(type)) {\r\n            property.setEnum(List.of(&quot;Hearts&quot;, &quot;Diamonds&quot;, &quot;Clubs&quot;, &quot;Spades&quot;));\r\n        }\r\n\r\n        return property;\r\n    }\r\n\r\n    private boolean isSuit(AnnotatedType type) {\r\n        return type.getType() instanceof JavaType t\r\n                &amp;&amp; t.isTypeOrSubTypeOf(Suit.class);\r\n    }\r\n}\r\n```\r\n\r\n## Global enum customizer using `@JsonValue`\r\n\r\nThe following customizer will use the Jackson String representation for all enum types, meaning the `@JsonValue` annotation will be used where applicable.\r\n\r\n```lang-java\r\nimport com.fasterxml.jackson.databind.JavaType;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport io.swagger.v3.core.converter.AnnotatedType;\r\nimport io.swagger.v3.core.util.Json;\r\nimport io.swagger.v3.oas.models.media.Schema;\r\nimport io.swagger.v3.oas.models.media.StringSchema;\r\nimport org.springdoc.core.customizers.PropertyCustomizer;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.stream.Collectors;\r\n\r\n@Component\r\npublic class EnumValuePropertyCustomizer implements PropertyCustomizer {\r\n    @Override\r\n    public Schema customize(Schema property, AnnotatedType type) {\r\n        if (property instanceof StringSchema &amp;&amp; isEnumType(type)) {\r\n            ObjectMapper objectMapper = Json.mapper();\r\n\r\n            property.setEnum(Arrays.stream(((JavaType) type.getType()).getRawClass().getEnumConstants())\r\n                    .map(e -&gt; objectMapper.convertValue(e, String.class))\r\n                    .collect(Collectors.toList()));\r\n        }\r\n        return property;\r\n    }\r\n\r\n    private boolean isEnumType(AnnotatedType type) {\r\n        return type.getType() instanceof JavaType t &amp;&amp; t.getType().isEnumType();\r\n    }\r\n}\r\n```","title":"How can have springdoc-openapi use the @JsonValue enum format without changing toString?","body":"<p>A <a href=\"https://javadoc.io/static/org.springdoc/springdoc-openapi-common/1.5.10/org/springdoc/core/customizers/PropertyCustomizer.html\" rel=\"nofollow noreferrer\"><code>PropertyCustomizer</code></a> Spring bean can be created to customize the property.  This can be done either for the specific enum type, or globally for all enums.</p>\n<h2>Type-specific customizer with explicit list</h2>\n<p>The following customizer will explicitly set the enum values for the specific enum type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.JavaType;\nimport io.swagger.v3.core.converter.AnnotatedType;\nimport io.swagger.v3.oas.models.media.Schema;\nimport io.swagger.v3.oas.models.media.StringSchema;\nimport org.springdoc.core.customizers.PropertyCustomizer;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\n\n@Component\npublic class SuitPropertyCustomizer implements PropertyCustomizer {\n    @Override\n    public Schema customize(Schema property, AnnotatedType type) {\n        if (property instanceof StringSchema &amp;&amp; isSuit(type)) {\n            property.setEnum(List.of(&quot;Hearts&quot;, &quot;Diamonds&quot;, &quot;Clubs&quot;, &quot;Spades&quot;));\n        }\n\n        return property;\n    }\n\n    private boolean isSuit(AnnotatedType type) {\n        return type.getType() instanceof JavaType t\n                &amp;&amp; t.isTypeOrSubTypeOf(Suit.class);\n    }\n}\n</code></pre>\n<h2>Global enum customizer using <code>@JsonValue</code></h2>\n<p>The following customizer will use the Jackson String representation for all enum types, meaning the <code>@JsonValue</code> annotation will be used where applicable.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.JavaType;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport io.swagger.v3.core.converter.AnnotatedType;\nimport io.swagger.v3.core.util.Json;\nimport io.swagger.v3.oas.models.media.Schema;\nimport io.swagger.v3.oas.models.media.StringSchema;\nimport org.springdoc.core.customizers.PropertyCustomizer;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Arrays;\nimport java.util.stream.Collectors;\n\n@Component\npublic class EnumValuePropertyCustomizer implements PropertyCustomizer {\n    @Override\n    public Schema customize(Schema property, AnnotatedType type) {\n        if (property instanceof StringSchema &amp;&amp; isEnumType(type)) {\n            ObjectMapper objectMapper = Json.mapper();\n\n            property.setEnum(Arrays.stream(((JavaType) type.getType()).getRawClass().getEnumConstants())\n                    .map(e -&gt; objectMapper.convertValue(e, String.class))\n                    .collect(Collectors.toList()));\n        }\n        return property;\n    }\n\n    private boolean isEnumType(AnnotatedType type) {\n        return type.getType() instanceof JavaType t &amp;&amp; t.getType().isEnumType();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1686968001,"creation_date":1629238672,"answer_id":68824609,"question_id":68747036,"body_markdown":"This was due to bug [#3998](https://github.com/swagger-api/swagger-core/issues/3998) in versions of [Swagger Core](https://github.com/swagger-api/swagger-core) prior to 2.2.5.  In those versions of the library, `@JsonValue` is handled properly when on a public method, but not when on a field.  Upgrading to version 2.2.5 of Swagger Core or later will cause the example to work as desired without modification.\r\n\r\nAlternatively, for versions of Swagger Core before 2.2.5, adding a public accessor method will have the desired effect:\r\n\r\n```lang-java\r\npublic enum Suit {\r\n    HEARTS(&quot;Hearts&quot;), DIAMONDS(&quot;Diamonds&quot;), CLUBS(&quot;Clubs&quot;), SPADES(&quot;Spades&quot;);\r\n\r\n    private final String jsonValue;\r\n\r\n    Suit(String jsonValue) { this.jsonValue = jsonValue; }\r\n\r\n    @JsonValue\r\n    public String getJsonValue() {\r\n        return jsonValue;\r\n    }\r\n}\r\n```","title":"How can have springdoc-openapi use the @JsonValue enum format without changing toString?","body":"<p>This was due to bug <a href=\"https://github.com/swagger-api/swagger-core/issues/3998\" rel=\"nofollow noreferrer\">#3998</a> in versions of <a href=\"https://github.com/swagger-api/swagger-core\" rel=\"nofollow noreferrer\">Swagger Core</a> prior to 2.2.5.  In those versions of the library, <code>@JsonValue</code> is handled properly when on a public method, but not when on a field.  Upgrading to version 2.2.5 of Swagger Core or later will cause the example to work as desired without modification.</p>\n<p>Alternatively, for versions of Swagger Core before 2.2.5, adding a public accessor method will have the desired effect:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum Suit {\n    HEARTS(&quot;Hearts&quot;), DIAMONDS(&quot;Diamonds&quot;), CLUBS(&quot;Clubs&quot;), SPADES(&quot;Spades&quot;);\n\n    private final String jsonValue;\n\n    Suit(String jsonValue) { this.jsonValue = jsonValue; }\n\n    @JsonValue\n    public String getJsonValue() {\n        return jsonValue;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8869,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":68824609,"answer_count":3,"score":4,"last_activity_date":1686968001,"creation_date":1628705450,"question_id":68747036,"body_markdown":"I have a Spring Boot application using [springdoc-openapi](https://springdoc.org) to generate Swagger API documentation for my controllers.  One of the enums used in the JSON request/response has a different JSON representation than its `value`/`toString()`.  This is achieved using the Jackson [`@JsonValue`](http://fasterxml.github.io/jackson-annotations/javadoc/2.12/com/fasterxml/jackson/annotation/JsonValue.html) annotation:\r\n\r\n```lang-java\r\npublic enum Suit {\r\n    HEARTS(&quot;Hearts&quot;), DIAMONDS(&quot;Diamonds&quot;), CLUBS(&quot;Clubs&quot;), SPADES(&quot;Spades&quot;);\r\n\r\n    @JsonValue\r\n    private final String jsonValue;\r\n\r\n    Suit(String jsonValue) { this.jsonValue = jsonValue; }\r\n}\r\n```\r\n\r\nHowever, the generated Swagger API docs use the enum value (specifically, the value of `toString()`) rather than the JSON representation (per `@JsonValue`) when listing the enum values:\r\n\r\n```lang-json\r\n{\r\n  &quot;openapi&quot;: &quot;3.0.1&quot;,\r\n  &quot;info&quot;: { &quot;title&quot;: &quot;OpenAPI definition&quot;, &quot;version&quot;: &quot;v0&quot; },\r\n  &quot;servers&quot;: [\r\n    { &quot;url&quot;: &quot;http://localhost:8080&quot;, &quot;description&quot;: &quot;Generated server url&quot; }\r\n  ],\r\n  &quot;paths&quot;: { ... },\r\n  &quot;components&quot;: {\r\n    &quot;schemas&quot;: {\r\n      &quot;PlayingCard&quot;: {\r\n        &quot;type&quot;: &quot;object&quot;,\r\n        &quot;properties&quot;: {\r\n          &quot;suit&quot;: {\r\n            &quot;type&quot;: &quot;string&quot;,\r\n            &quot;enum&quot;: [ &quot;Hearts&quot;, &quot;Diamonds&quot;, &quot;Clubs&quot;, &quot;Spades&quot; ]\r\n          },\r\n          &quot;value&quot;: { &quot;type&quot;: &quot;integer&quot;, &quot;format&quot;: &quot;int32&quot; }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThere is closed issue [#1101](https://github.com/springdoc/springdoc-openapi/issues/1101) in the springdoc-openapi project which requests allowing `@JsonValue` to affect the enum serialization.  However, that issue was [closed](https://github.com/springdoc/springdoc-openapi/issues/1101#issuecomment-806731501) since no PR was submitted for it.\r\n\r\nHow can I get the enum list to match the actual JSON type accepted/returned by the REST endpoint, and not the `toString()` values?\r\n\r\nMy first thought to solving this issue was to use the [`@Schema(allowableValues = {...}]`](https://javadoc.io/static/io.swagger.core.v3/swagger-annotations/2.1.10/io/swagger/v3/oas/annotations/media/Schema.html) annotation from [Swagger Core](https://github.com/swagger-api/swagger-core).  However, whether by bug or by design, this adds to the list of values, rather than replacing it:\r\n\r\n```lang-java\r\n@Schema(allowableValues = {&quot;Hearts&quot;, &quot;Diamonds&quot;, &quot;Clubs&quot;, &quot;Spades&quot;})\r\npublic enum Suit {\r\n    HEARTS(&quot;Hearts&quot;), DIAMONDS(&quot;Diamonds&quot;), CLUBS(&quot;Clubs&quot;), SPADES(&quot;Spades&quot;);\r\n    // ...\r\n}\r\n```\r\n\r\n```lang-json\r\n&quot;suit&quot;: {\r\n  &quot;type&quot;: &quot;string&quot;,\r\n  &quot;enum&quot;: [\r\n    &quot;HEARTS&quot;, \r\n    &quot;DIAMONDS&quot;,\r\n    &quot;CLUBS&quot;,\r\n    &quot;SPADES&quot;,\r\n    &quot;Hearts&quot;,\r\n    &quot;Diamonds&quot;,\r\n    &quot;Clubs&quot;,\r\n    &quot;Spades&quot;\r\n  ]\r\n}\r\n```\r\n\r\n## Reproducible Example\r\n\r\n```lang-groovy\r\nplugins {\r\n    id &#39;org.springframework.boot&#39; version &#39;2.5.3&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    id &#39;java&#39;\r\n}\r\n\r\nsourceCompatibility = &#39;11&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;io.swagger.core.v3:swagger-annotations:2.1.10&#39;\r\n    implementation &#39;org.springdoc:springdoc-openapi-ui:1.5.10&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n}\r\n```\r\n\r\n```lang-java\r\npackage com.example.springdoc;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonValue;\r\n\r\npublic class PlayingCard {\r\n    private Suit suit;\r\n    private Integer value;\r\n\r\n    public Suit getSuit() { return suit; }\r\n    public void setSuit(Suit suit) { this.suit = suit; }\r\n    public Integer getValue() { return value; }\r\n    public void setValue(Integer value) { this.value = value; }\r\n\r\n    public enum Suit {\r\n        HEARTS(&quot;Hearts&quot;), DIAMONDS(&quot;Diamonds&quot;), CLUBS(&quot;Clubs&quot;), SPADES(&quot;Spades&quot;);\r\n\r\n        @JsonValue\r\n        private final String jsonValue;\r\n\r\n        Suit(String jsonValue) { this.jsonValue = jsonValue; }\r\n    }\r\n}\r\n```\r\n\r\n```\r\npackage com.example.springdoc;\r\n\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/playingCard&quot;)\r\npublic class PlayingCardController {\r\n    @PostMapping\r\n    public PlayingCard echo(@RequestBody PlayingCard card) {\r\n        return card;\r\n    }\r\n}\r\n```\r\n\r\nSwagger URL: `http://localhost:8080/v3/api-docs`","title":"How can have springdoc-openapi use the @JsonValue enum format without changing toString?","body":"<p>I have a Spring Boot application using <a href=\"https://springdoc.org\" rel=\"nofollow noreferrer\">springdoc-openapi</a> to generate Swagger API documentation for my controllers.  One of the enums used in the JSON request/response has a different JSON representation than its <code>value</code>/<code>toString()</code>.  This is achieved using the Jackson <a href=\"http://fasterxml.github.io/jackson-annotations/javadoc/2.12/com/fasterxml/jackson/annotation/JsonValue.html\" rel=\"nofollow noreferrer\"><code>@JsonValue</code></a> annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum Suit {\n    HEARTS(&quot;Hearts&quot;), DIAMONDS(&quot;Diamonds&quot;), CLUBS(&quot;Clubs&quot;), SPADES(&quot;Spades&quot;);\n\n    @JsonValue\n    private final String jsonValue;\n\n    Suit(String jsonValue) { this.jsonValue = jsonValue; }\n}\n</code></pre>\n<p>However, the generated Swagger API docs use the enum value (specifically, the value of <code>toString()</code>) rather than the JSON representation (per <code>@JsonValue</code>) when listing the enum values:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;openapi&quot;: &quot;3.0.1&quot;,\n  &quot;info&quot;: { &quot;title&quot;: &quot;OpenAPI definition&quot;, &quot;version&quot;: &quot;v0&quot; },\n  &quot;servers&quot;: [\n    { &quot;url&quot;: &quot;http://localhost:8080&quot;, &quot;description&quot;: &quot;Generated server url&quot; }\n  ],\n  &quot;paths&quot;: { ... },\n  &quot;components&quot;: {\n    &quot;schemas&quot;: {\n      &quot;PlayingCard&quot;: {\n        &quot;type&quot;: &quot;object&quot;,\n        &quot;properties&quot;: {\n          &quot;suit&quot;: {\n            &quot;type&quot;: &quot;string&quot;,\n            &quot;enum&quot;: [ &quot;Hearts&quot;, &quot;Diamonds&quot;, &quot;Clubs&quot;, &quot;Spades&quot; ]\n          },\n          &quot;value&quot;: { &quot;type&quot;: &quot;integer&quot;, &quot;format&quot;: &quot;int32&quot; }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>There is closed issue <a href=\"https://github.com/springdoc/springdoc-openapi/issues/1101\" rel=\"nofollow noreferrer\">#1101</a> in the springdoc-openapi project which requests allowing <code>@JsonValue</code> to affect the enum serialization.  However, that issue was <a href=\"https://github.com/springdoc/springdoc-openapi/issues/1101#issuecomment-806731501\" rel=\"nofollow noreferrer\">closed</a> since no PR was submitted for it.</p>\n<p>How can I get the enum list to match the actual JSON type accepted/returned by the REST endpoint, and not the <code>toString()</code> values?</p>\n<p>My first thought to solving this issue was to use the <a href=\"https://javadoc.io/static/io.swagger.core.v3/swagger-annotations/2.1.10/io/swagger/v3/oas/annotations/media/Schema.html\" rel=\"nofollow noreferrer\"><code>@Schema(allowableValues = {...}]</code></a> annotation from <a href=\"https://github.com/swagger-api/swagger-core\" rel=\"nofollow noreferrer\">Swagger Core</a>.  However, whether by bug or by design, this adds to the list of values, rather than replacing it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Schema(allowableValues = {&quot;Hearts&quot;, &quot;Diamonds&quot;, &quot;Clubs&quot;, &quot;Spades&quot;})\npublic enum Suit {\n    HEARTS(&quot;Hearts&quot;), DIAMONDS(&quot;Diamonds&quot;), CLUBS(&quot;Clubs&quot;), SPADES(&quot;Spades&quot;);\n    // ...\n}\n</code></pre>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;suit&quot;: {\n  &quot;type&quot;: &quot;string&quot;,\n  &quot;enum&quot;: [\n    &quot;HEARTS&quot;, \n    &quot;DIAMONDS&quot;,\n    &quot;CLUBS&quot;,\n    &quot;SPADES&quot;,\n    &quot;Hearts&quot;,\n    &quot;Diamonds&quot;,\n    &quot;Clubs&quot;,\n    &quot;Spades&quot;\n  ]\n}\n</code></pre>\n<h2>Reproducible Example</h2>\n<pre class=\"lang-groovy prettyprint-override\"><code>plugins {\n    id 'org.springframework.boot' version '2.5.3'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n}\n\nsourceCompatibility = '11'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'io.swagger.core.v3:swagger-annotations:2.1.10'\n    implementation 'org.springdoc:springdoc-openapi-ui:1.5.10'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.springdoc;\n\nimport com.fasterxml.jackson.annotation.JsonValue;\n\npublic class PlayingCard {\n    private Suit suit;\n    private Integer value;\n\n    public Suit getSuit() { return suit; }\n    public void setSuit(Suit suit) { this.suit = suit; }\n    public Integer getValue() { return value; }\n    public void setValue(Integer value) { this.value = value; }\n\n    public enum Suit {\n        HEARTS(&quot;Hearts&quot;), DIAMONDS(&quot;Diamonds&quot;), CLUBS(&quot;Clubs&quot;), SPADES(&quot;Spades&quot;);\n\n        @JsonValue\n        private final String jsonValue;\n\n        Suit(String jsonValue) { this.jsonValue = jsonValue; }\n    }\n}\n</code></pre>\n<pre><code>package com.example.springdoc;\n\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(&quot;/playingCard&quot;)\npublic class PlayingCardController {\n    @PostMapping\n    public PlayingCard echo(@RequestBody PlayingCard card) {\n        return card;\n    }\n}\n</code></pre>\n<p>Swagger URL: <code>http://localhost:8080/v3/api-docs</code></p>\n"},{"tags":["java","geometry","polygon"],"comments":[{"owner":{"account_id":4188528,"reputation":890,"user_id":3431636,"accept_rate":79,"display_name":"Seraf"},"score":0,"creation_date":1535720467,"post_id":8721406,"comment_id":91182682,"body_markdown":"You can use the Polygon and Point in the `java.awt` library: `new Polygon(x_coordinates, y_coordinates, coordinates.length).contains(new Point(x, y))` where `x_coordinates` and `y_coordinates` are of type `Array[Integer]`","body":"You can use the Polygon and Point in the <code>java.awt</code> library: <code>new Polygon(x_coordinates, y_coordinates, coordinates.length).contains(new Point(x, y))</code> where <code>x_coordinates</code> and <code>y_coordinates</code> are of type <code>Array[Integer]</code>"}],"answers":[{"tags":[],"owner":{"account_id":1132580,"reputation":25787,"user_id":1118321,"accept_rate":100,"display_name":"user1118321"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1325645233,"creation_date":1325645233,"answer_id":8721443,"question_id":8721406,"body_markdown":"Check to see if it&#39;s on the same side of the 4 half-planes defined by the lines that contain the line segments that make up the sides of the quad.\r\n\r\n[Here](http://erich.realtimerendering.com/ptinpoly/) is a good explanation.","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>Check to see if it's on the same side of the 4 half-planes defined by the lines that contain the line segments that make up the sides of the quad.</p>\n\n<p><a href=\"http://erich.realtimerendering.com/ptinpoly/\" rel=\"nofollow\">Here</a> is a good explanation.</p>\n"},{"tags":[],"owner":{"account_id":974783,"reputation":4190,"user_id":996405,"accept_rate":43,"display_name":"Kavka"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1325646920,"creation_date":1325645311,"answer_id":8721452,"question_id":8721406,"body_markdown":"The `java.awt.Polygon` class has a number of `contains(...)` methods if you use [Polygon][1] objects to represent your polygon.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.html","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>The <code>java.awt.Polygon</code> class has a number of <code>contains(...)</code> methods if you use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.html\">Polygon</a> objects to represent your polygon.</p>\n"},{"tags":[],"owner":{"account_id":45510,"reputation":9296,"user_id":134176,"accept_rate":100,"display_name":"Dean Povey"},"down_vote_count":0,"up_vote_count":98,"is_accepted":true,"score":98,"last_activity_date":1544753750,"creation_date":1325645638,"answer_id":8721483,"question_id":8721406,"body_markdown":"This page: [http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html](https://web.archive.org/web/20161108113341/https://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html) shows how to do this for any polygon.\r\n\r\nI have a Java implementation of this, but it is too big to post here in its entirety.  However, you should be able to work it out:\r\n\r\n    class Boundary {\r\n        private final Point[] points; // Points making up the boundary\r\n        ...\r\n\r\n\r\n        /**\r\n         * Return true if the given point is contained inside the boundary.\r\n         * See: http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n         * @param test The point to check\r\n         * @return true if the point is inside the boundary, false otherwise\r\n         *\r\n         */\r\n        public boolean contains(Point test) {\r\n          int i;\r\n          int j;\r\n          boolean result = false;\r\n          for (i = 0, j = points.length - 1; i &lt; points.length; j = i++) {\r\n            if ((points[i].y &gt; test.y) != (points[j].y &gt; test.y) &amp;&amp;\r\n                (test.x &lt; (points[j].x - points[i].x) * (test.y - points[i].y) / (points[j].y-points[i].y) + points[i].x)) {\r\n              result = !result;\r\n             }\r\n          }\r\n          return result;\r\n        }\r\n    }\r\n\r\nAnd here is a sketch of the Point class\r\n\r\n    /**\r\n     * Two dimensional cartesian point.\r\n     */\r\n    public class Point {\r\n      public final double x;\r\n      public final double y;\r\n      ...\r\n    }\r\n","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>This page: <a href=\"https://web.archive.org/web/20161108113341/https://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\" rel=\"noreferrer\">http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html</a> shows how to do this for any polygon.</p>\n\n<p>I have a Java implementation of this, but it is too big to post here in its entirety.  However, you should be able to work it out:</p>\n\n<pre><code>class Boundary {\n    private final Point[] points; // Points making up the boundary\n    ...\n\n\n    /**\n     * Return true if the given point is contained inside the boundary.\n     * See: http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n     * @param test The point to check\n     * @return true if the point is inside the boundary, false otherwise\n     *\n     */\n    public boolean contains(Point test) {\n      int i;\n      int j;\n      boolean result = false;\n      for (i = 0, j = points.length - 1; i &lt; points.length; j = i++) {\n        if ((points[i].y &gt; test.y) != (points[j].y &gt; test.y) &amp;&amp;\n            (test.x &lt; (points[j].x - points[i].x) * (test.y - points[i].y) / (points[j].y-points[i].y) + points[i].x)) {\n          result = !result;\n         }\n      }\n      return result;\n    }\n}\n</code></pre>\n\n<p>And here is a sketch of the Point class</p>\n\n<pre><code>/**\n * Two dimensional cartesian point.\n */\npublic class Point {\n  public final double x;\n  public final double y;\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":479763,"reputation":641,"user_id":892639,"display_name":"Jim"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1325646754,"creation_date":1325646754,"answer_id":8721584,"question_id":8721406,"body_markdown":"Assuming that your point is at Y coordinate y, simply calculate the x positions where each\r\nof the polygon&#39;s (non-horizontal) lines cross y. Count the number of x positions that are\r\nless than the x position of your point. If the number of x positions is odd, your point is\r\ninside the polygon. Note: this works for all polygons, not just convex. Think of it this way:\r\ndraw a line from infinitely far away straight in to your point. When that line crosses a\r\npolygon line, it is now inside the polygon. Cross the line again, outside. Cross again,\r\ninside (and so forth). Hope this helps!\r\n","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>Assuming that your point is at Y coordinate y, simply calculate the x positions where each\nof the polygon's (non-horizontal) lines cross y. Count the number of x positions that are\nless than the x position of your point. If the number of x positions is odd, your point is\ninside the polygon. Note: this works for all polygons, not just convex. Think of it this way:\ndraw a line from infinitely far away straight in to your point. When that line crosses a\npolygon line, it is now inside the polygon. Cross the line again, outside. Cross again,\ninside (and so forth). Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":1251810,"reputation":1033,"user_id":1212086,"display_name":"Nadav"},"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1510407422,"creation_date":1398180898,"answer_id":23223947,"question_id":8721406,"body_markdown":"For those who would like to understand how the method written by Dean Povey above works, here is the explanation:\r\n&lt;p&gt;\r\nThe method looks at a &quot;ray&quot; that starts at the tested spot and extends to infinity to the right side of the X axis. For each polygon segment, it checks if the ray crosses it. If the total number of segment crossing is odd then the tested point is considered inside the polygon, otherwise - it is outside.\r\n&lt;p&gt;\r\nTo understand the way the crossing is calculated, consider the following figure:\r\n\r\n                v2\r\n                o\r\n               /\r\n              / c (intersection)\r\n    o--------x----------------------&gt; to infinity\r\n    t       /\r\n           /   \r\n          /\r\n         o\r\n         v1\r\n\r\nFor the intersection to occur, tested.y must be between the y values of the segment&#39;s vertices (v1 and v2). This is the first condition of the if statement in the method. If this is what happens, then the horizontal line must intersect the segment. It only remains to establish whether the intersection happens to the right of the\r\ntested point or to the left of it. This requires finding the x coordinate of the intersection point, which is:\r\n\r\n                  t.y - v1.y\r\n    c.x = v1.x + ----------- * (v2.x - v1.x)\r\n                 v2.y - v1.y\r\n\r\nAll that remains to be done is examining the subtleties:\r\n&lt;ul&gt;\r\n&lt;li&gt;If v1.y == v2.y then the ray goes along the segment and\r\ntherefore the segment has no influence on the outcome. Indeed, the first part\r\nof the if statement returns false in that case.\r\n&lt;li&gt;The code first multiplies and only then divides. This is done to support\r\nvery small differences between v1.x and v2.x, which\r\nmight lead to a zero after the division, due to rounding.\r\n&lt;li&gt;Finally, the problem of crossing exactly on a vertex should be\r\naddressed. Consider the following two cases:\r\n&lt;/ul&gt;\r\n\r\n             o                    o\r\n             |                     \\     o\r\n             | A1                C1 \\   /\r\n             |                       \\ / C2  \r\n    o--------x-----------x------------x--------&gt; to infinity\r\n            /           / \\\r\n        A2 /        B1 /   \\ B2\r\n          /           /     \\ \r\n         o           /       o\r\n                    o\r\n\r\nNow, to verify if it works, check for yourself what is returned for each\r\nof the 4 segments by the if condition in the method body.\r\nYou should find that the segments above the ray (A1, C1, C2) receive\r\na positive result, while those below it (A2, B1, B2) receive a negative\r\none. This means that the A vertex contributes an odd number (1) to the crossing\r\ncount, while B and C contribute an even number (0 and 2, respectively), which\r\nis exactly what is desired. A is indeed a real crossing of the polygon, while B\r\nand C are just two cases of &quot;fly-by&quot;.\r\n\r\n\r\n","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>For those who would like to understand how the method written by Dean Povey above works, here is the explanation:\n<p>\nThe method looks at a \"ray\" that starts at the tested spot and extends to infinity to the right side of the X axis. For each polygon segment, it checks if the ray crosses it. If the total number of segment crossing is odd then the tested point is considered inside the polygon, otherwise - it is outside.\n<p>\nTo understand the way the crossing is calculated, consider the following figure:</p>\n\n<pre><code>            v2\n            o\n           /\n          / c (intersection)\no--------x----------------------&gt; to infinity\nt       /\n       /   \n      /\n     o\n     v1\n</code></pre>\n\n<p>For the intersection to occur, tested.y must be between the y values of the segment's vertices (v1 and v2). This is the first condition of the if statement in the method. If this is what happens, then the horizontal line must intersect the segment. It only remains to establish whether the intersection happens to the right of the\ntested point or to the left of it. This requires finding the x coordinate of the intersection point, which is:</p>\n\n<pre><code>              t.y - v1.y\nc.x = v1.x + ----------- * (v2.x - v1.x)\n             v2.y - v1.y\n</code></pre>\n\n<p>All that remains to be done is examining the subtleties:</p>\n\n<ul>\n<li>If v1.y == v2.y then the ray goes along the segment and\ntherefore the segment has no influence on the outcome. Indeed, the first part\nof the if statement returns false in that case.\n<li>The code first multiplies and only then divides. This is done to support\nvery small differences between v1.x and v2.x, which\nmight lead to a zero after the division, due to rounding.\n<li>Finally, the problem of crossing exactly on a vertex should be\naddressed. Consider the following two cases:\n</ul>\n\n<pre><code>         o                    o\n         |                     \\     o\n         | A1                C1 \\   /\n         |                       \\ / C2  \no--------x-----------x------------x--------&gt; to infinity\n        /           / \\\n    A2 /        B1 /   \\ B2\n      /           /     \\ \n     o           /       o\n                o\n</code></pre>\n\n<p>Now, to verify if it works, check for yourself what is returned for each\nof the 4 segments by the if condition in the method body.\nYou should find that the segments above the ray (A1, C1, C2) receive\na positive result, while those below it (A2, B1, B2) receive a negative\none. This means that the A vertex contributes an odd number (1) to the crossing\ncount, while B and C contribute an even number (0 and 2, respectively), which\nis exactly what is desired. A is indeed a real crossing of the polygon, while B\nand C are just two cases of \"fly-by\".</p>\n"},{"tags":[],"owner":{"account_id":4398357,"reputation":5480,"user_id":3584765,"accept_rate":61,"display_name":"Eypros"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1474894460,"creation_date":1403525692,"answer_id":24365675,"question_id":8721406,"body_markdown":"Just to add a (simple) Java implementation of the original code in C from [code suggested by @Dean Povey][1] (I don&#39;t know why @Dean Povey is referring to a large implementation):\r\n\r\n    static boolean pnpoly(double[] vertx, double[] verty, double testx, double testy)\r\n    {\r\n    \tint nvert = vertx.length;\r\n    \tint i, j;\r\n    \tboolean c = false;\r\n    \tfor (i = 0, j = nvert-1; i &lt; nvert; j = i++) {\r\n    \t\tif ( ((verty[i]&gt;testy) != (verty[j]&gt;testy)) &amp;&amp;\r\n    \t\t\t\t(testx &lt; (vertx[j]-vertx[i]) * (testy-verty[i]) / (verty[j]-verty[i]) + vertx[i]) )\r\n    \t\t\tc = !c;\r\n    \t}\r\n    \treturn c;\r\n    }\t\r\n\r\nI did not change the case to comply with Java rule to show the minimal changes required. I have also tested it in simple cases and it works fine.\r\n\r\n\r\n  [1]: http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>Just to add a (simple) Java implementation of the original code in C from <a href=\"http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\" rel=\"nofollow\">code suggested by @Dean Povey</a> (I don't know why @Dean Povey is referring to a large implementation):</p>\n\n<pre><code>static boolean pnpoly(double[] vertx, double[] verty, double testx, double testy)\n{\n    int nvert = vertx.length;\n    int i, j;\n    boolean c = false;\n    for (i = 0, j = nvert-1; i &lt; nvert; j = i++) {\n        if ( ((verty[i]&gt;testy) != (verty[j]&gt;testy)) &amp;&amp;\n                (testx &lt; (vertx[j]-vertx[i]) * (testy-verty[i]) / (verty[j]-verty[i]) + vertx[i]) )\n            c = !c;\n    }\n    return c;\n}   \n</code></pre>\n\n<p>I did not change the case to comply with Java rule to show the minimal changes required. I have also tested it in simple cases and it works fine.</p>\n"},{"tags":[],"owner":{"account_id":5594012,"reputation":174,"user_id":5254694,"display_name":"Apoorva Ambhoj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483713765,"creation_date":1483710290,"answer_id":41507078,"question_id":8721406,"body_markdown":"Say, x[] is the array of x points and y[] is the array of y points.&lt;br&gt;\r\nYou are meant to return 1 if the point exists in the polygon and 2 if not. where (planeX,planeY) is the point you need to check.\r\n\r\n    //check like this\r\n    return new Polygon(x,y,x.length).contains(planeX, planeY)?1:2;","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>Say, x[] is the array of x points and y[] is the array of y points.<br>\nYou are meant to return 1 if the point exists in the polygon and 2 if not. where (planeX,planeY) is the point you need to check.</p>\n\n<pre><code>//check like this\nreturn new Polygon(x,y,x.length).contains(planeX, planeY)?1:2;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4188528,"reputation":890,"user_id":3431636,"accept_rate":79,"display_name":"Seraf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535722011,"creation_date":1535722011,"answer_id":52116491,"question_id":8721406,"body_markdown":"Polygon&#39;s abscissas `x_array: Array[Integer]`\r\n\r\nPolygon&#39;s ordinates: `y_array: Array[Integer]`\r\n\r\nPoint: `x: Integer, y: Integer`\r\n\r\n    import java.awt.Polygon\r\n    import java.awt.Point\r\n    ...\r\n\r\n    final boolean isInPolygon = \r\n        new Polygon(x_array,y_array,x_array.length).contains(new Point(x, y));\r\n\r\nIn this example we create an object `java.awt.Polygon` and use the method contains to check if your coordinates are in the shape you designed.\r\n\r\nI use the object `java.awt.Point` to represent the coordinates to make the code elegant but that is optional, you can directly use `.contains(x, y)`","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>Polygon's abscissas <code>x_array: Array[Integer]</code></p>\n\n<p>Polygon's ordinates: <code>y_array: Array[Integer]</code></p>\n\n<p>Point: <code>x: Integer, y: Integer</code></p>\n\n<pre><code>import java.awt.Polygon\nimport java.awt.Point\n...\n\nfinal boolean isInPolygon = \n    new Polygon(x_array,y_array,x_array.length).contains(new Point(x, y));\n</code></pre>\n\n<p>In this example we create an object <code>java.awt.Polygon</code> and use the method contains to check if your coordinates are in the shape you designed.</p>\n\n<p>I use the object <code>java.awt.Point</code> to represent the coordinates to make the code elegant but that is optional, you can directly use <code>.contains(x, y)</code></p>\n"},{"tags":[],"owner":{"account_id":11368907,"reputation":4584,"user_id":8334991,"display_name":"Alexandre Fenyo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686965304,"creation_date":1671541805,"answer_id":74863626,"question_id":8721406,"body_markdown":"Many answers are based on intersections. Here is a simple algorithm not based on intersections but only using vector products.\r\nThis method is less complex that methods based on intersections, but only works for convex polygons. Since the question is about convex polygons, this less complex method should be preferred.\r\n\r\nImagine that your convex polygon (P0, P1, ..., Pn), with (Pi-1, Pi) being its segments, is a needle clock and that the point C you want to check is inside the clock. The points (Pi) will either turn clockwise, or counterclockwise. Imagine a needle attached to C, that gives hours when turning clockwise. The vectors CP0→, CP1→, CP2→, CP...→, CPn→ all turn either clockwise, or counterclockwise. This means that the vector products CP0→⨯CP1→, CP1→⨯CP2→, CP2→⨯CP...→, CPn-1→⨯CPn→ and CPn→⨯CP0→ all have the same orientation. Since they are also colinear, their orientation is defined by the sign of their scalar product taken two by two.\r\nThis property only occurs when C is inside the polygon. Therefore, iif the signs of the scalar products of the vector products are constant, C is inside the polygon.\r\n\r\n","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>Many answers are based on intersections. Here is a simple algorithm not based on intersections but only using vector products.\nThis method is less complex that methods based on intersections, but only works for convex polygons. Since the question is about convex polygons, this less complex method should be preferred.</p>\n<p>Imagine that your convex polygon (P0, P1, ..., Pn), with (Pi-1, Pi) being its segments, is a needle clock and that the point C you want to check is inside the clock. The points (Pi) will either turn clockwise, or counterclockwise. Imagine a needle attached to C, that gives hours when turning clockwise. The vectors CP0→, CP1→, CP2→, CP...→, CPn→ all turn either clockwise, or counterclockwise. This means that the vector products CP0→⨯CP1→, CP1→⨯CP2→, CP2→⨯CP...→, CPn-1→⨯CPn→ and CPn→⨯CP0→ all have the same orientation. Since they are also colinear, their orientation is defined by the sign of their scalar product taken two by two.\nThis property only occurs when C is inside the polygon. Therefore, iif the signs of the scalar products of the vector products are constant, C is inside the polygon.</p>\n"}],"owner":{"account_id":109063,"reputation":13146,"user_id":289182,"accept_rate":86,"display_name":"NPike"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64938,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":8721483,"answer_count":9,"score":39,"last_activity_date":1686965304,"creation_date":1325644883,"question_id":8721406,"body_markdown":"I have a convex polygon (typically just a rotated square), and I know all of 4 points.  How do I determine if a given point (yellow/green) is *inside* the polygon?\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/6uSYj.png\r\n\r\nEDIT:  For this particular project, I don&#39;t have access to all of the libraries of the JDK, such as AWT.","title":"How to determine if a point is inside a 2D convex polygon?","body":"<p>I have a convex polygon (typically just a rotated square), and I know all of 4 points.  How do I determine if a given point (yellow/green) is <em>inside</em> the polygon?</p>\n\n<p><img src=\"https://i.stack.imgur.com/6uSYj.png\" alt=\"enter image description here\"></p>\n\n<p>EDIT:  For this particular project, I don't have access to all of the libraries of the JDK, such as AWT.</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1686958861,"post_id":76494044,"comment_id":134875049,"body_markdown":"How does the Bird class look?","body":"How does the Bird class look?"},{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1686959484,"post_id":76494044,"comment_id":134875094,"body_markdown":"Add entity. Would you mind updating your answer (would also be great to see the dervied save method)","body":"Add entity. Would you mind updating your answer (would also be great to see the dervied save method)"},{"owner":{"account_id":27038179,"reputation":69,"user_id":20593455,"display_name":"Kaushal"},"score":0,"creation_date":1686959522,"post_id":76494044,"comment_id":134875099,"body_markdown":"Try to autowire this birdRepo that you are using in serviceimpl","body":"Try to autowire this birdRepo that you are using in serviceimpl"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1686962455,"post_id":76494044,"comment_id":134875295,"body_markdown":"Why can&#39;t you use the `Optional&lt;T&gt; findById(ID primaryKey);` provided from the CrudRepository?","body":"Why can&#39;t you use the <code>Optional&lt;T&gt; findById(ID primaryKey);</code> provided from the CrudRepository?"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1686962571,"post_id":76494044,"comment_id":134875307,"body_markdown":"I guess the problem lies in that the query can not guarantee to return a Bird. You can unwrap the optional in your service layer by defaulting to null, if you really want to. (I&#39;d stick with the optional).","body":"I guess the problem lies in that the query can not guarantee to return a Bird. You can unwrap the optional in your service layer by defaulting to null, if you really want to. (I&#39;d stick with the optional)."},{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1686963150,"post_id":76494044,"comment_id":134875330,"body_markdown":"I am using Optional&lt;T&gt; findById(ID primaryKey); aren&#39;t I? Do I need to add the Crud repo or does it come with JPA?","body":"I am using Optional&lt;T&gt; findById(ID primaryKey); aren&#39;t I? Do I need to add the Crud repo or does it come with JPA?"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686984543,"post_id":76494044,"comment_id":134876462,"body_markdown":"1. Bird entity must have a no-args constructor. 2. Remove the Bird findById method from BirdRepository and just use the auto-generated one in your service like: return birdRepository.findById(id).get()","body":"1. Bird entity must have a no-args constructor. 2. Remove the Bird findById method from BirdRepository and just use the auto-generated one in your service like: return birdRepository.findById(id).get()"}],"answers":[{"tags":[],"owner":{"account_id":20457602,"reputation":17,"user_id":15010903,"display_name":"Vishwas Saini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686958561,"creation_date":1686958561,"answer_id":76494105,"question_id":76494044,"body_markdown":"To resolve this issue, you can try the following steps:\r\n\r\n 1. Make sure the Bird entity class has a property named id of type Long and that it is annotated with the appropriate annotations, such as `@Id` and `@GeneratedValue`.\r\n 2. Verify that the Bird entity class is correctly mapped to the database table. Ensure that the table has a primary key column matching the id property of the Bird entity.\r\n\r\nTo properly find the error I need the `Bird.class` enitiy definition.","title":"Incompatible return type on derived query in JPA","body":"<p>To resolve this issue, you can try the following steps:</p>\n<ol>\n<li>Make sure the Bird entity class has a property named id of type Long and that it is annotated with the appropriate annotations, such as <code>@Id</code> and <code>@GeneratedValue</code>.</li>\n<li>Verify that the Bird entity class is correctly mapped to the database table. Ensure that the table has a primary key column matching the id property of the Bird entity.</li>\n</ol>\n<p>To properly find the error I need the <code>Bird.class</code> enitiy definition.</p>\n"}],"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686959733,"creation_date":1686957274,"question_id":76494044,"body_markdown":"I have the following Spring project and trying to use the derived query to return one Bird by Id.\r\n\r\n**Bird**\r\n\r\n    @Entity\r\n    @Data\r\n    public class Bird {\r\n        @Id\r\n        @GeneratedValue(strategy = IDENTITY)\r\n        private Long id;\r\n        @Column(unique = true)\r\n        @NotEmpty(message = &quot;Name must not be null or empty&quot;)\r\n        private String name;\r\n        @Enumerated(EnumType.STRING)\r\n        private Sex sex;\r\n    \r\n        // other stuff\r\n        }\r\n\r\n**BirdRepository**\r\n    \r\n    public interface BirdRepository extends JpaRepository&lt;Bird, Long&gt; {\r\n\r\n        Bird findById(Long Id);\r\n    }\r\n\r\n**BirdServiceImpl**\r\n\r\n    @Service\r\n    @Transactional\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    public class BirdServiceImpl implements BirdService {\r\n    \r\n        private final BirdRepository birdRepository;\r\n    \r\n        @Override\r\n        public Bird get(Long id) {\r\n            return birdRepository.findById(id);\r\n        }\r\n    }\r\n\r\n**BirdService**\r\n\r\n    public interface BirdService {\r\n\r\n    Bird get(Long id);\r\n    }\r\n\r\nThe error I get in the IDE is:\r\n    \r\n    `Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;birdRepository&#39; \r\n    defined in com.nz.eagle.repository.BirdRepository defined in @EnableJpaRepositories declared on\r\n    JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.nz.eagle.model.Bird   \r\n    com.nz.eagle.repository.BirdRepository.FindById(java.lang.Long)! Reason: Failed to create query for method public abstract com.nz.eagle.model.Bird     \r\n    com.nz.eagle.repository.BirdRepository.FindById(java.lang.Long)! No property &#39;findById&#39; found for type &#39;Bird&#39;!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.nz.eagle.model.Bird     \r\n    com.nz.eagle.repository.BirdRepository.FindById(java.lang.Long)! No property &#39;findById&#39; found for type &#39;Bird&#39;!`\r\n\r\n**Q:** What am I missing. I want to be able to use the derived Save and Get methods for one entity.\r\n","title":"Incompatible return type on derived query in JPA","body":"<p>I have the following Spring project and trying to use the derived query to return one Bird by Id.</p>\n<p><strong>Bird</strong></p>\n<pre><code>@Entity\n@Data\npublic class Bird {\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    private Long id;\n    @Column(unique = true)\n    @NotEmpty(message = &quot;Name must not be null or empty&quot;)\n    private String name;\n    @Enumerated(EnumType.STRING)\n    private Sex sex;\n\n    // other stuff\n    }\n</code></pre>\n<p><strong>BirdRepository</strong></p>\n<pre><code>public interface BirdRepository extends JpaRepository&lt;Bird, Long&gt; {\n\n    Bird findById(Long Id);\n}\n</code></pre>\n<p><strong>BirdServiceImpl</strong></p>\n<pre><code>@Service\n@Transactional\n@Slf4j\n@RequiredArgsConstructor\npublic class BirdServiceImpl implements BirdService {\n\n    private final BirdRepository birdRepository;\n\n    @Override\n    public Bird get(Long id) {\n        return birdRepository.findById(id);\n    }\n}\n</code></pre>\n<p><strong>BirdService</strong></p>\n<pre><code>public interface BirdService {\n\nBird get(Long id);\n}\n</code></pre>\n<p>The error I get in the IDE is:</p>\n<pre><code>`Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birdRepository' \ndefined in com.nz.eagle.repository.BirdRepository defined in @EnableJpaRepositories declared on\nJpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract com.nz.eagle.model.Bird   \ncom.nz.eagle.repository.BirdRepository.FindById(java.lang.Long)! Reason: Failed to create query for method public abstract com.nz.eagle.model.Bird     \ncom.nz.eagle.repository.BirdRepository.FindById(java.lang.Long)! No property 'findById' found for type 'Bird'!; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract com.nz.eagle.model.Bird     \ncom.nz.eagle.repository.BirdRepository.FindById(java.lang.Long)! No property 'findById' found for type 'Bird'!`\n</code></pre>\n<p><strong>Q:</strong> What am I missing. I want to be able to use the derived Save and Get methods for one entity.</p>\n"},{"tags":["java","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":19896142,"reputation":167,"user_id":14577209,"display_name":"Maleesha97"},"score":0,"creation_date":1686780063,"post_id":76477303,"comment_id":134848042,"body_markdown":"Did you check the timestamps of data written to BQ? whether they are within the expected window or not?","body":"Did you check the timestamps of data written to BQ? whether they are within the expected window or not?"},{"owner":{"account_id":2697635,"reputation":1299,"user_id":2329241,"accept_rate":67,"display_name":"Narendra Jaggi"},"score":0,"creation_date":1686796468,"post_id":76477303,"comment_id":134849599,"body_markdown":"I have eventTime coming from the producer and my job adding ingestion time. In BQ I can see only miliseconds difference between two. For eg eventTime is 2023-06-14T19:47:49.488Z then ingestionTime is 2023-06-14T19:47:49.891Z.\nMy expectation is for some records it should come around more than 1 min or higher","body":"I have eventTime coming from the producer and my job adding ingestion time. In BQ I can see only miliseconds difference between two. For eg eventTime is 2023-06-14T19:47:49.488Z then ingestionTime is 2023-06-14T19:47:49.891Z. My expectation is for some records it should come around more than 1 min or higher"},{"owner":{"account_id":1900300,"reputation":1162,"user_id":1716285,"accept_rate":8,"display_name":"Soliman"},"score":1,"creation_date":1686947351,"post_id":76477303,"comment_id":134873800,"body_markdown":"Can you share your window code? it will be helpful.","body":"Can you share your window code? it will be helpful."}],"answers":[{"tags":[],"owner":{"account_id":13185554,"reputation":534,"user_id":12022900,"display_name":"Joevanie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686958244,"creation_date":1686958244,"answer_id":76494093,"question_id":76477303,"body_markdown":"&lt;p style=&quot;margin: 0;&quot;&gt;I think you were not able to set the proper triggers and used the default configuration which is event time. I believe you should use the After Processing Time trigger and set it to a minute like this code from the &lt;a href=&quot;https://beam.apache.org/documentation/programming-guide/#triggers&quot;&gt;official docs&lt;/a&gt;&lt;/p&gt;\r\n\r\n  \r\n\r\n    pcollection | WindowInto(\r\n        FixedWindows(1 * 60),\r\n        trigger=AfterProcessingTime(1 * 60),\r\n        accumulation_mode=AccumulationMode.DISCARDING)","title":"How to verify windowing is working in Apache Beam Dataflow","body":"I think you were not able to set the proper triggers and used the default configuration which is event time. I believe you should use the After Processing Time trigger and set it to a minute like this code from the <a href=\"https://beam.apache.org/documentation/programming-guide/#triggers\" rel=\"nofollow noreferrer\">official docs</a></p>\n<pre><code>pcollection | WindowInto(\n    FixedWindows(1 * 60),\n    trigger=AfterProcessingTime(1 * 60),\n    accumulation_mode=AccumulationMode.DISCARDING)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2927439,"reputation":992,"user_id":2508468,"accept_rate":50,"display_name":"vdolez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686958992,"creation_date":1686958992,"answer_id":76494120,"question_id":76477303,"body_markdown":"You can write your own [Test pipeline](https://beam.apache.org/documentation/pipelines/test-your-pipeline/#an-example-test-for-a-composite-transform) using something like:\r\n```java\r\nPipeline p = TestPipeline.create();\r\n```\r\n\r\nFor **testing unbounded pipelines**, there&#39;s a [blog post](https://beam.apache.org/blog/test-stream/) that explains how to do it, it may have change a bit since 2016, but you&#39;ll find some good resources to start.\r\n\r\nYour goal is to use `PAssert` to verify that tests are passing in the different `PCollection` triggered by your windows.\r\n\r\n```java\r\n// Only one value is emitted for the blue team\r\nPAssert.that(teamScores)\r\n       .inWindow(window)\r\n       .containsInAnyOrder(KV.of(&quot;blue&quot;, 18));\r\np.run();\r\n```","title":"How to verify windowing is working in Apache Beam Dataflow","body":"<p>You can write your own <a href=\"https://beam.apache.org/documentation/pipelines/test-your-pipeline/#an-example-test-for-a-composite-transform\" rel=\"nofollow noreferrer\">Test pipeline</a> using something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Pipeline p = TestPipeline.create();\n</code></pre>\n<p>For <strong>testing unbounded pipelines</strong>, there's a <a href=\"https://beam.apache.org/blog/test-stream/\" rel=\"nofollow noreferrer\">blog post</a> that explains how to do it, it may have change a bit since 2016, but you'll find some good resources to start.</p>\n<p>Your goal is to use <code>PAssert</code> to verify that tests are passing in the different <code>PCollection</code> triggered by your windows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Only one value is emitted for the blue team\nPAssert.that(teamScores)\n       .inWindow(window)\n       .containsInAnyOrder(KV.of(&quot;blue&quot;, 18));\np.run();\n</code></pre>\n"}],"owner":{"account_id":2697635,"reputation":1299,"user_id":2329241,"accept_rate":67,"display_name":"Narendra Jaggi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686958992,"creation_date":1686774412,"question_id":76477303,"body_markdown":"I have **dataflow job using apache beam** fix window of 1 min. It consume messages from pub sub topic and sinks to BigQuery table. &lt;br&gt;\r\nEven after using windowing for 1 min , I can see messages are getting sinked to BQ as soon as those are published by consumer.&lt;br&gt;\r\nIs there way I can confirm that windowing is actually working? I have seen many examples but none of the article is mentioning about validations.","title":"How to verify windowing is working in Apache Beam Dataflow","body":"<p>I have <strong>dataflow job using apache beam</strong> fix window of 1 min. It consume messages from pub sub topic and sinks to BigQuery table. <br>\nEven after using windowing for 1 min , I can see messages are getting sinked to BQ as soon as those are published by consumer.<br>\nIs there way I can confirm that windowing is actually working? I have seen many examples but none of the article is mentioning about validations.</p>\n"},{"tags":["java","spring","validation","ip","spring-roo"],"comments":[{"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"score":0,"creation_date":1360852563,"post_id":14877019,"comment_id":20858301,"body_markdown":"You need to build your own validator. Check [this page](http://www.javabeat.net/2011/04/the-bean-validation-api-in-spring-roo-framework/all/1/) for an example that validates the ISBN number","body":"You need to build your own validator. Check <a href=\"http://www.javabeat.net/2011/04/the-bean-validation-api-in-spring-roo-framework/all/1/\" rel=\"nofollow noreferrer\">this page</a> for an example that validates the ISBN number"}],"answers":[{"tags":[],"owner":{"account_id":1086182,"reputation":3886,"user_id":1081849,"display_name":"sbk"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1360853146,"creation_date":1360852565,"answer_id":14877174,"question_id":14877019,"body_markdown":"Definitely possible.  You will need to code a custom annotation and implementation class.  Not too much effort.  See here for background: http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/#validator-customconstraints\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE })\r\n    @Documented\r\n    @Constraint(validatedBy = IpAddressValidator.class)\r\n    public @interface IpAddress\r\n    {\r\n      String message() default &quot;{ipAddress.invalid}&quot;;\r\n      Class&lt;?&gt;[] groups() default {};\r\n      Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\nand\r\n\r\n    public class IpAddressValidator implements ConstraintValidator&lt;IpAddress, Object&gt;\r\n    {\r\n      @Override\r\n      public void initialize(IpAddress constraintAnnotation)\r\n      {\r\n      }\r\n\r\n      @Override\r\n      public boolean isValid(Object value, ConstraintValidatorContext cvContext)\r\n      {\r\n        // logic here\r\n      }\r\n    }\r\n","title":"Spring IP address validation","body":"<p>Definitely possible.  You will need to code a custom annotation and implementation class.  Not too much effort.  See here for background: <a href=\"http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/#validator-customconstraints\" rel=\"noreferrer\">http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/#validator-customconstraints</a></p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE })\n@Documented\n@Constraint(validatedBy = IpAddressValidator.class)\npublic @interface IpAddress\n{\n  String message() default \"{ipAddress.invalid}\";\n  Class&lt;?&gt;[] groups() default {};\n  Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public class IpAddressValidator implements ConstraintValidator&lt;IpAddress, Object&gt;\n{\n  @Override\n  public void initialize(IpAddress constraintAnnotation)\n  {\n  }\n\n  @Override\n  public boolean isValid(Object value, ConstraintValidatorContext cvContext)\n  {\n    // logic here\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":60076,"reputation":8249,"user_id":179573,"accept_rate":100,"display_name":"abalogh"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1360852592,"creation_date":1360852592,"answer_id":14877184,"question_id":14877019,"body_markdown":"Essentially you want to use JSR-303 annotations with a custom validator. See a full working example [here][1].\r\n\r\n\r\n  [1]: http://forum.springsource.org/showthread.php?90053-Custom-validator-together-with-JSR-303-annotation","title":"Spring IP address validation","body":"<p>Essentially you want to use JSR-303 annotations with a custom validator. See a full working example <a href=\"http://forum.springsource.org/showthread.php?90053-Custom-validator-together-with-JSR-303-annotation\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":30369,"reputation":30094,"user_id":82804,"accept_rate":72,"display_name":"David Rabinowitz"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1504169028,"creation_date":1360852903,"answer_id":14877281,"question_id":14877019,"body_markdown":"You can use the JSR 303 Pattern validator, with an IP address regex:\r\n\r\n\r\n    @NotNull\r\n    @Pattern(regexp = &quot;^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$&quot;)\r\n    private String ip;\r\n\r\nedit: escape backslash","title":"Spring IP address validation","body":"<p>You can use the JSR 303 Pattern validator, with an IP address regex:</p>\n\n<pre><code>@NotNull\n@Pattern(regexp = \"^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$\")\nprivate String ip;\n</code></pre>\n\n<p>edit: escape backslash</p>\n"},{"tags":[],"owner":{"account_id":1807376,"reputation":1019,"user_id":1644214,"accept_rate":100,"display_name":"alvonellos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686958099,"creation_date":1686958099,"answer_id":76494083,"question_id":14877019,"body_markdown":"I know I&#39;m digging up an old answer but I wanted to add a few things here. that I think could help because I was personally unsatisfied by all these answers for a couple reasons. \r\n\r\n1). Doing a @Pattern above every IP like that is kinda ugly and it&#39;d be cool just to have a quick class to include. \r\n\r\n2). IPv4 is trivial. IPv6 is not. \r\n\r\nIf you&#39;re looking to do IPv6, read this: [https://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses][1]\r\n\r\n3). \r\nIf you want a simple IPv4 validator in one nice class, check out this code I hacked together and tested over on my own website. Works nicely.  \r\n\r\n    import jakarta.validation.Constraint;\r\n    import jakarta.validation.Payload;\r\n    import jakarta.validation.Valid;\r\n    import jakarta.validation.constraints.Pattern;\r\n    \r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    import java.lang.annotation.Target;\r\n    \r\n    @Pattern(regexp = ValidIPv4.IPV4_REGEX)\r\n    @Constraint(validatedBy = {})\r\n    @Target({ElementType.FIELD, ElementType.PARAMETER})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface ValidIPv4 {\r\n        // JSR 303 Pattern Validator for IPv4\r\n        String IPV4_REGEX = &quot;^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$&quot;;\r\n    \r\n        String message() default &quot;must match &quot; + IPV4_REGEX;\r\n    \r\n        Class&lt;?&gt;[] groups() default {};\r\n    \r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    }\r\n\r\nand of course a really nice unit test you can use: \r\n\r\n    import jakarta.validation.ConstraintViolation;\r\n    import jakarta.validation.Validation;\r\n    import jakarta.validation.Validator;\r\n    import jakarta.validation.ValidatorFactory;\r\n    import org.springframework.validation.annotation.Validated;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import java.util.Set;\r\n    \r\n    import static org.testng.AssertJUnit.assertEquals;\r\n    \r\n    public class ValidIPv4Test {\r\n    \r\n        @Validated\r\n        private class MyClass {\r\n            @ValidIPv4\r\n            private String ipv4;\r\n    \r\n            public String getIpv4() {\r\n                return ipv4;\r\n            }\r\n    \r\n            public void setIpv4(String ipv4) {\r\n                this.ipv4 = ipv4;\r\n            }\r\n        }\r\n    \r\n        @Test\r\n        public void testValidFormat() {\r\n            // Create a ValidatorFactory and Validator\r\n            ValidatorFactory validatorFactory = Validation.buildDefaultValidatorFactory();\r\n            Validator validator = validatorFactory.getValidator();\r\n    \r\n            // Create an object with the field to validate\r\n            MyClass myClass = new MyClass();\r\n            myClass.setIpv4(&quot;127.0.0.1&quot;);\r\n    \r\n            // Perform validation\r\n            Set&lt;ConstraintViolation&lt;MyClass&gt;&gt; violations = validator.validate(myClass);\r\n    \r\n            // Assert that there are no validation violations\r\n            assertEquals(0, violations.size());\r\n        }\r\n    \r\n        @Test\r\n        public void testInvalidFormat() {\r\n            // Create a ValidatorFactory and Validator\r\n            ValidatorFactory validatorFactory = Validation.buildDefaultValidatorFactory();\r\n            Validator validator = validatorFactory.getValidator();\r\n    \r\n            // Create an object with the field to validate\r\n            MyClass myClass = new MyClass();\r\n            myClass.setIpv4(&quot;827.0.0.1&quot;);\r\n    \r\n            // Perform validation\r\n            Set&lt;ConstraintViolation&lt;MyClass&gt;&gt; violations = validator.validate(myClass);\r\n    \r\n            // Assert that there is one validation violation\r\n            assertEquals(1, violations.size());\r\n    \r\n            // Assert that the violation is related to the field\r\n            ConstraintViolation&lt;MyClass&gt; violation = violations.iterator().next();\r\n            assertEquals(&quot;must match \\&quot;&quot; + ValidIPv4.IPV4_REGEX + &quot;\\&quot;&quot;, violation.getMessage());\r\n            assertEquals(&quot;ipv4&quot;, violation.getPropertyPath().toString());\r\n        }\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses","title":"Spring IP address validation","body":"<p>I know I'm digging up an old answer but I wanted to add a few things here. that I think could help because I was personally unsatisfied by all these answers for a couple reasons.</p>\n<p>1). Doing a @Pattern above every IP like that is kinda ugly and it'd be cool just to have a quick class to include.</p>\n<p>2). IPv4 is trivial. IPv6 is not.</p>\n<p>If you're looking to do IPv6, read this: <a href=\"https://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\">Regular expression that matches valid IPv6 addresses</a></p>\n<p>3).\nIf you want a simple IPv4 validator in one nice class, check out this code I hacked together and tested over on my own website. Works nicely.</p>\n<pre><code>import jakarta.validation.Constraint;\nimport jakarta.validation.Payload;\nimport jakarta.validation.Valid;\nimport jakarta.validation.constraints.Pattern;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Pattern(regexp = ValidIPv4.IPV4_REGEX)\n@Constraint(validatedBy = {})\n@Target({ElementType.FIELD, ElementType.PARAMETER})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface ValidIPv4 {\n    // JSR 303 Pattern Validator for IPv4\n    String IPV4_REGEX = &quot;^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$&quot;;\n\n    String message() default &quot;must match &quot; + IPV4_REGEX;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p>and of course a really nice unit test you can use:</p>\n<pre><code>import jakarta.validation.ConstraintViolation;\nimport jakarta.validation.Validation;\nimport jakarta.validation.Validator;\nimport jakarta.validation.ValidatorFactory;\nimport org.springframework.validation.annotation.Validated;\nimport org.testng.annotations.Test;\n\nimport java.util.Set;\n\nimport static org.testng.AssertJUnit.assertEquals;\n\npublic class ValidIPv4Test {\n\n    @Validated\n    private class MyClass {\n        @ValidIPv4\n        private String ipv4;\n\n        public String getIpv4() {\n            return ipv4;\n        }\n\n        public void setIpv4(String ipv4) {\n            this.ipv4 = ipv4;\n        }\n    }\n\n    @Test\n    public void testValidFormat() {\n        // Create a ValidatorFactory and Validator\n        ValidatorFactory validatorFactory = Validation.buildDefaultValidatorFactory();\n        Validator validator = validatorFactory.getValidator();\n\n        // Create an object with the field to validate\n        MyClass myClass = new MyClass();\n        myClass.setIpv4(&quot;127.0.0.1&quot;);\n\n        // Perform validation\n        Set&lt;ConstraintViolation&lt;MyClass&gt;&gt; violations = validator.validate(myClass);\n\n        // Assert that there are no validation violations\n        assertEquals(0, violations.size());\n    }\n\n    @Test\n    public void testInvalidFormat() {\n        // Create a ValidatorFactory and Validator\n        ValidatorFactory validatorFactory = Validation.buildDefaultValidatorFactory();\n        Validator validator = validatorFactory.getValidator();\n\n        // Create an object with the field to validate\n        MyClass myClass = new MyClass();\n        myClass.setIpv4(&quot;827.0.0.1&quot;);\n\n        // Perform validation\n        Set&lt;ConstraintViolation&lt;MyClass&gt;&gt; violations = validator.validate(myClass);\n\n        // Assert that there is one validation violation\n        assertEquals(1, violations.size());\n\n        // Assert that the violation is related to the field\n        ConstraintViolation&lt;MyClass&gt; violation = violations.iterator().next();\n        assertEquals(&quot;must match \\&quot;&quot; + ValidIPv4.IPV4_REGEX + &quot;\\&quot;&quot;, violation.getMessage());\n        assertEquals(&quot;ipv4&quot;, violation.getPropertyPath().toString());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1558204,"reputation":421,"user_id":1448709,"accept_rate":80,"display_name":"mbs"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12890,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":14877174,"answer_count":4,"score":10,"last_activity_date":1686958099,"creation_date":1360852087,"question_id":14877019,"body_markdown":"I&#39;m looking for a possiblity to validate IP addresses in my Spring roo project.\r\n\r\nMy entity looks like this\r\n\r\n    package com.ip.test.domain;\r\n\r\n    import javax.persistence.ManyToOne;\r\n    import javax.validation.constraints.NotNull;\r\n    import javax.validation.constraints.Size;\r\n    import org.springframework.roo.addon.javabean.RooJavaBean;\r\n    import org.springframework.roo.addon.jpa.activerecord.RooJpaActiveRecord;\r\n    import org.springframework.roo.addon.tostring.RooToString;\r\n\r\n    @RooJavaBean\r\n    @RooToString\r\n    @RooJpaActiveRecord\r\n    public class IP {\r\n\r\n    @NotNull\r\n    @Size(min = 7, max = 15)\r\n    private String ip;\r\n\r\n    @ManyToOne\r\n    private Hoster Hoster;\r\n    }\r\n\r\nWith this setup it validates only if the string contains 7 to 15 characters, but not really if it&#39;s an IP address. \r\n\r\nSomething like\r\n\r\n    @validIpAddress\r\n    private String ip;\r\n\r\nwould be nice.\r\n\r\nAny idea if that&#39;s possible?","title":"Spring IP address validation","body":"<p>I'm looking for a possiblity to validate IP addresses in my Spring roo project.</p>\n\n<p>My entity looks like this</p>\n\n<pre><code>package com.ip.test.domain;\n\nimport javax.persistence.ManyToOne;\nimport javax.validation.constraints.NotNull;\nimport javax.validation.constraints.Size;\nimport org.springframework.roo.addon.javabean.RooJavaBean;\nimport org.springframework.roo.addon.jpa.activerecord.RooJpaActiveRecord;\nimport org.springframework.roo.addon.tostring.RooToString;\n\n@RooJavaBean\n@RooToString\n@RooJpaActiveRecord\npublic class IP {\n\n@NotNull\n@Size(min = 7, max = 15)\nprivate String ip;\n\n@ManyToOne\nprivate Hoster Hoster;\n}\n</code></pre>\n\n<p>With this setup it validates only if the string contains 7 to 15 characters, but not really if it's an IP address. </p>\n\n<p>Something like</p>\n\n<pre><code>@validIpAddress\nprivate String ip;\n</code></pre>\n\n<p>would be nice.</p>\n\n<p>Any idea if that's possible?</p>\n"},{"tags":["java","android","json","butterknife"],"owner":{"account_id":19288273,"reputation":3,"user_id":14098847,"display_name":"Tanmay Nandwana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686957630,"creation_date":1686957630,"question_id":76494061,"body_markdown":"I have an app and I don&#39;t need to show the subcategory rather than i want to show the items page directly in my app like when user click category it should open items page without show the subcategory and shows all data of that category. \r\nhere is my category code\r\n\r\n```\r\nimport static com.grocery.food.Activity.HomeActivity.homeActivity;\r\n\r\n\r\npublic class CategoryFragment extends Fragment implements CategoryAdp.RecyclerTouchListener, GetResult.MyListener {\r\n    // TODO: Rename parameter arguments, choose names that match\r\n\r\n    private static final String ARG_PARAM1 = &quot;param1&quot;;\r\n    private static final String ARG_PARAM2 = &quot;param2&quot;;\r\n    @BindView(R.id.recycler_view)\r\n    RecyclerView recyclerView;\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n    CategoryAdp adapter;\r\n    List&lt;CatItem&gt; categoryList;\r\n    Unbinder unbinder;\r\n    SessionManager sessionManager;\r\n    User user;\r\n\r\n    public CategoryFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    // TODO: Rename and change types and number of parameters\r\n    public static CategoryFragment newInstance(String param1, String param2) {\r\n        CategoryFragment fragment = new CategoryFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view = inflater.inflate(R.layout.fragment_category, container, false);\r\n        unbinder = ButterKnife.bind(this, view);\r\n        categoryList = new ArrayList&lt;&gt;();\r\n        sessionManager = new SessionManager(getActivity());\r\n        user = sessionManager.getUserDetails(&quot;&quot;);\r\n\r\n//        categoryList = (List&lt;CatItem&gt;) getArguments().getSerializable(&quot;arraylist&quot;);\r\n        ;\r\n\r\n        recyclerView.setLayoutManager(new GridLayoutManager(getActivity(), 3));\r\n        recyclerView.setItemAnimator(new DefaultItemAnimator());\r\n\r\n        getCategory();\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onClickItem(View v, int position) {\r\n        homeActivity.ShowMenu();\r\n        Bundle args = new Bundle();\r\n        args.putInt(&quot;id&quot;, position);\r\n        Fragment fragment = new SubCategoryFragment();\r\n        fragment.setArguments(args);\r\n        HomeActivity.getInstance().callFragment(fragment);\r\n    }\r\n\r\n    @Override\r\n    public void onLongClickItem(View v, int position) {\r\n\r\n    }\r\n\r\n    private void getCategory() {\r\n        HomeActivity.custPrograssbar.PrograssCreate(getActivity());\r\n        JSONObject jsonObject = new JSONObject();\r\n        try {\r\n            jsonObject.put(&quot;uid&quot;, user.getId());\r\n            JsonParser jsonParser = new JsonParser();\r\n            Call&lt;JsonObject&gt; call = APIClient.getInterface().getCat((JsonObject) jsonParser.parse(jsonObject.toString()));\r\n            GetResult getResult = new GetResult();\r\n            getResult.setMyListener(this);\r\n            getResult.callForLogin(call, &quot;1&quot;);\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public void callback(JsonObject result, String callNo) {\r\n        try {\r\n\r\n\r\n            HomeActivity.custPrograssbar.ClosePrograssBar();\r\n            if (callNo.equalsIgnoreCase(&quot;1&quot;) &amp;&amp; result.toString() != null) {\r\n                Gson gson = new Gson();\r\n                Category category = gson.fromJson(result.toString(), Category.class);\r\n                categoryList = category.getData();\r\n                adapter = new CategoryAdp(getActivity(), categoryList, this);\r\n                recyclerView.setAdapter(adapter);\r\n            }\r\n        } catch (Exception e) {\r\n\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nnow when user clicks the category it should show only itemlist:\r\n```\r\npackage com.grocery.food.Fragment;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.DefaultItemAnimator;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.JsonObject;\r\nimport com.google.gson.JsonParser;\r\nimport com.grocery.food.Activity.HomeActivity;\r\nimport com.grocery.food.Adepter.SubCategoryAdp;\r\nimport com.grocery.food.Model.SubCategory;\r\nimport com.grocery.food.Model.SubcatItem;\r\nimport com.grocery.food.Model.User;\r\nimport com.grocery.food.R;\r\nimport com.grocery.food.Utils.SessionManager;\r\nimport com.grocery.food.retrofit.APIClient;\r\nimport com.grocery.food.retrofit.GetResult;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport butterknife.BindView;\r\nimport butterknife.ButterKnife;\r\nimport butterknife.Unbinder;\r\nimport retrofit2.Call;\r\n\r\nimport static com.grocery.food.Activity.HomeActivity.homeActivity;\r\n\r\n\r\npublic class SubCategoryFragment extends Fragment implements GetResult.MyListener, SubCategoryAdp.RecyclerTouchListener {\r\n    // TODO: Rename parameter arguments, choose names that match\r\n\r\n    private static final String ARG_PARAM1 = &quot;param1&quot;;\r\n    private static final String ARG_PARAM2 = &quot;param2&quot;;\r\n    @BindView(R.id.recycler_view)\r\n    RecyclerView recyclerView;\r\n\r\n    // TODO: Rename and change types of parameters\r\n    private String mParam1;\r\n    private String mParam2;\r\n    SubCategoryAdp adapter;\r\n    List&lt;SubcatItem&gt; categoryList;\r\n    Unbinder unbinder;\r\n    SessionManager sessionManager;\r\n    User user;\r\n    int CID = 0;\r\n\r\n    public SubCategoryFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    // TODO: Rename and change types and number of parameters\r\n    public static SubCategoryFragment newInstance(String param1, String param2) {\r\n        SubCategoryFragment fragment = new SubCategoryFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(ARG_PARAM1, param1);\r\n        args.putString(ARG_PARAM2, param2);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        if (getArguments() != null) {\r\n            mParam1 = getArguments().getString(ARG_PARAM1);\r\n            mParam2 = getArguments().getString(ARG_PARAM2);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view = inflater.inflate(R.layout.fragment_subcategory, container, false);\r\n        unbinder = ButterKnife.bind(this, view);\r\n        Bundle b = getArguments();\r\n        CID = b.getInt(&quot;id&quot;);\r\n\r\n        categoryList = new ArrayList&lt;&gt;();\r\n        sessionManager = new SessionManager(getActivity());\r\n        user = sessionManager.getUserDetails(&quot;&quot;);\r\n\r\n\r\n        recyclerView.setLayoutManager(new GridLayoutManager(getActivity(), 3));\r\n        recyclerView.setItemAnimator(new DefaultItemAnimator());\r\n\r\n        getSubCategory();\r\n        return view;\r\n    }\r\n\r\n    @Override\r\n    public void onClickItem(View v, int cid, int scid) {\r\n        homeActivity.ShowMenu();\r\n        Bundle args = new Bundle();\r\n        args.putInt(&quot;cid&quot;, cid);\r\n        args.putInt(&quot;scid&quot;, scid);\r\n        Fragment fragment = new ItemListFragment();\r\n        fragment.setArguments(args);\r\n        HomeActivity.getInstance().callFragment(fragment);\r\n    }\r\n\r\n    @Override\r\n    public void onLongClickItem(View v, int position) {\r\n\r\n    }\r\n\r\n    private void getSubCategory() {\r\n        HomeActivity.custPrograssbar.PrograssCreate(getActivity());\r\n        JSONObject jsonObject = new JSONObject();\r\n        try {\r\n            jsonObject.put(&quot;category_id&quot;, CID);\r\n            JsonParser jsonParser = new JsonParser();\r\n            Call&lt;JsonObject&gt; call = APIClient.getInterface().getSubcategory((JsonObject) jsonParser.parse(jsonObject.toString()));\r\n            GetResult getResult = new GetResult();\r\n            getResult.setMyListener(this);\r\n            getResult.callForLogin(call, &quot;1&quot;);\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public void callback(JsonObject result, String callNo) {\r\n        try {\r\n\r\n\r\n            HomeActivity.custPrograssbar.ClosePrograssBar();\r\n            if (callNo.equalsIgnoreCase(&quot;1&quot;) &amp;&amp; result.toString() != null) {\r\n                Gson gson = new Gson();\r\n                SubCategory category = gson.fromJson(result.toString(), SubCategory.class);\r\n                categoryList = category.getData();\r\n                adapter = new SubCategoryAdp(getActivity(), categoryList, this);\r\n                recyclerView.setAdapter(adapter);\r\n            }\r\n        } catch (Exception e) {\r\n\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nnow here&#39;s my itelist code please have a look to it too..\r\n```\r\npackage com.grocery.food.Activity;\r\n\r\nimport android.database.Cursor;\r\nimport android.graphics.Paint;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.grocery.food.DataBase.DatabaseHelper;\r\nimport com.grocery.food.DataBase.MyCart;\r\nimport com.grocery.food.Model.Price;\r\nimport com.grocery.food.Model.ProductItem;\r\nimport com.grocery.food.R;\r\nimport com.grocery.food.Utils.SessionManager;\r\nimport com.grocery.food.retrofit.APIClient;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport butterknife.BindView;\r\nimport butterknife.ButterKnife;\r\nimport butterknife.OnClick;\r\n\r\nimport static com.grocery.food.Fragment.ItemListFragment.itemListFragment;\r\nimport static com.grocery.food.Utils.SessionManager.CURRUNCY;\r\n\r\npublic class ItemDetailsActivity extends AppCompatActivity {\r\n\r\n\r\n    ProductItem productItem;\r\n    Price price;\r\n    @BindView(R.id.imgP)\r\n    ImageView imgP;\r\n    @BindView(R.id.img_back)\r\n    ImageView imgBack;\r\n    @BindView(R.id.img_cart)\r\n    ImageView imgCart;\r\n    @BindView(R.id.txt_tcount)\r\n    TextView txtTcount;\r\n    @BindView(R.id.lvl_cart)\r\n    RelativeLayout lvlCart;\r\n    @BindView(R.id.txt_title)\r\n    TextView txtTitle;\r\n    @BindView(R.id.txt_desc)\r\n    TextView txtDesc;\r\n    @BindView(R.id.lvl_pricelist)\r\n    LinearLayout lvlPricelist;\r\n    @BindView(R.id.btn_addtocart)\r\n    Button btnAddtocart;\r\n    ArrayList&lt;Price&gt; priceslist;\r\n    DatabaseHelper databaseHelper;\r\n    SessionManager sessionManager;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_item_details);\r\n        ButterKnife.bind(this);\r\n        sessionManager=new SessionManager(this);\r\n        databaseHelper = new DatabaseHelper(ItemDetailsActivity.this);\r\n        productItem = (ProductItem) getIntent().getParcelableExtra(&quot;MyClass&quot;);\r\n        priceslist = getIntent().getParcelableArrayListExtra(&quot;MyList&quot;);\r\n        if (productItem != null) {\r\n            txtTitle.setText(&quot;&quot; + productItem.getProductName());\r\n            txtDesc.setText(&quot;&quot; + productItem.getShortDesc());\r\n            Glide.with(this).load(APIClient.Base_URL + &quot;/&quot; + productItem.getProductImage()).thumbnail(Glide.with(this).load(R.drawable.ezgifresize)).into(imgP);\r\n            setJoinPlayrList(lvlPricelist, productItem, priceslist);\r\n            updateItem();\r\n        }\r\n    }\r\n\r\n    public void updateItem() {\r\n        Cursor res = databaseHelper.getAllData();\r\n        if (res.getCount() == 0) {\r\n            txtTcount.setText(&quot;0&quot;);\r\n\r\n        } else {\r\n            txtTcount.setText(&quot;&quot; + res.getCount());\r\n        }\r\n    }\r\n\r\n    @OnClick({R.id.img_back, R.id.lvl_cart, R.id.btn_addtocart})\r\n    public void onClick(View view) {\r\n        switch (view.getId()) {\r\n            case R.id.img_back:\r\n                finish();\r\n                break;\r\n            case R.id.lvl_cart:\r\n                fragment();\r\n                break;\r\n            case R.id.btn_addtocart:\r\n                finish();\r\n                break;\r\n        }\r\n    }\r\n\r\n    private void setJoinPlayrList(LinearLayout lnrView, ProductItem datum, List&lt;Price&gt; priceList) {\r\n\r\n        lnrView.removeAllViews();\r\n        final int[] count = {0};\r\n        DatabaseHelper helper = new DatabaseHelper(lnrView.getContext());\r\n        if (priceList != null &amp;&amp; priceList.size() &gt; 0) {\r\n            for (int i = 0; i &lt; priceList.size(); i++) {\r\n                LayoutInflater inflater = LayoutInflater.from(this);\r\n\r\n                View view = inflater.inflate(R.layout.custome_prize, null);\r\n\r\n                TextView txt_price = view.findViewById(R.id.txt_price);\r\n                TextView txt_gram = view.findViewById(R.id.txt_gram);\r\n                TextView txt_offer = view.findViewById(R.id.txt_offer);\r\n                TextView txtcount = view.findViewById(R.id.txtcount);\r\n                LinearLayout img_mins = view.findViewById(R.id.img_mins);\r\n                LinearLayout img_plus = view.findViewById(R.id.img_plus);\r\n                MyCart myCart = new MyCart();\r\n                myCart.setPID(datum.getId());\r\n                myCart.setImage(datum.getProductImage());\r\n                myCart.setTitle(datum.getProductName());\r\n                myCart.setWeight(priceList.get(i).getProductType());\r\n                myCart.setCost(priceList.get(i).getProductPrice());\r\n                myCart.setDiscount(datum.getmDiscount());\r\n                int qrt = helper.getCard(myCart.getPID(), myCart.getCost());\r\n                if (qrt != -1) {\r\n                    count[0] = qrt;\r\n                    txtcount.setText(&quot;&quot; + count[0]);\r\n                    txtcount.setVisibility(View.VISIBLE);\r\n                } else {\r\n                    txtcount.setVisibility(View.VISIBLE);\r\n                    img_mins.setVisibility(View.VISIBLE);\r\n                }\r\n                img_mins.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n\r\n                        count[0] = Integer.parseInt(txtcount.getText().toString());\r\n\r\n                        count[0] = count[0] - 1;\r\n                        if (count[0] &lt;= 0) {\r\n                            img_mins.setVisibility(View.VISIBLE);\r\n                            txtcount.setText(&quot;0&quot;);\r\n                            txtcount.setVisibility(View.VISIBLE);\r\n                            helper.deleteRData(myCart.getPID(), myCart.getCost());\r\n                        } else {\r\n                            txtcount.setVisibility(View.VISIBLE);\r\n                            txtcount.setText(&quot;&quot; + count[0]);\r\n                            myCart.setQty(String.valueOf(count[0]));\r\n                            Log.e(&quot;INsert&quot;, &quot;--&gt; &quot; + helper.insertData(myCart));\r\n                        }\r\n                        if (itemListFragment != null)\r\n                            itemListFragment.updateItem();\r\n                        updateItem();\r\n                    }\r\n                });\r\n\r\n                img_plus.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        txtcount.setVisibility(View.VISIBLE);\r\n                        img_mins.setVisibility(View.VISIBLE);\r\n                        count[0] = Integer.parseInt(txtcount.getText().toString());\r\n\r\n                        count[0] = count[0] + 1;\r\n                        txtcount.setText(&quot;&quot; + count[0]);\r\n                        myCart.setQty(String.valueOf(count[0]));\r\n                        Log.e(&quot;INsert&quot;, &quot;--&gt; &quot; + helper.insertData(myCart));\r\n                        if (itemListFragment != null)\r\n                            itemListFragment.updateItem();\r\n                        updateItem();\r\n                    }\r\n                });\r\n\r\n\r\n                txt_gram.setText(&quot;&quot; + priceList.get(i).getProductType());\r\n\r\n\r\n                if (datum.getmDiscount() &gt; 0) {\r\n                    double  res = (Double.parseDouble(priceList.get(i).getProductPrice()) / 100.0f)* datum.getmDiscount();\r\n                    res = Integer.parseInt(priceList.get(i).getProductPrice()) - res;\r\n                    txt_offer.setText(sessionManager.getStringData(CURRUNCY)+ priceList.get(i).getProductPrice());\r\n                    txt_offer.setPaintFlags(txt_offer.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);\r\n                    txt_price.setText(sessionManager.getStringData(CURRUNCY)  + res);\r\n                } else {\r\n                    txt_offer.setVisibility(View.GONE);\r\n                    txt_price.setText(sessionManager.getStringData(CURRUNCY)  + priceList.get(i).getProductPrice());\r\n                }\r\n                lnrView.addView(view);\r\n            }\r\n        }\r\n    }\r\n\r\n    public void fragment() {\r\n        SessionManager.ISCART = true;\r\n        finish();\r\n\r\n    }\r\n\r\n\r\n}\r\n```\r\n","title":"Need to combine my category, subcategory, item in java for my android app","body":"<p>I have an app and I don't need to show the subcategory rather than i want to show the items page directly in my app like when user click category it should open items page without show the subcategory and shows all data of that category.\nhere is my category code</p>\n<pre><code>import static com.grocery.food.Activity.HomeActivity.homeActivity;\n\n\npublic class CategoryFragment extends Fragment implements CategoryAdp.RecyclerTouchListener, GetResult.MyListener {\n    // TODO: Rename parameter arguments, choose names that match\n\n    private static final String ARG_PARAM1 = &quot;param1&quot;;\n    private static final String ARG_PARAM2 = &quot;param2&quot;;\n    @BindView(R.id.recycler_view)\n    RecyclerView recyclerView;\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n    CategoryAdp adapter;\n    List&lt;CatItem&gt; categoryList;\n    Unbinder unbinder;\n    SessionManager sessionManager;\n    User user;\n\n    public CategoryFragment() {\n        // Required empty public constructor\n    }\n\n    // TODO: Rename and change types and number of parameters\n    public static CategoryFragment newInstance(String param1, String param2) {\n        CategoryFragment fragment = new CategoryFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View view = inflater.inflate(R.layout.fragment_category, container, false);\n        unbinder = ButterKnife.bind(this, view);\n        categoryList = new ArrayList&lt;&gt;();\n        sessionManager = new SessionManager(getActivity());\n        user = sessionManager.getUserDetails(&quot;&quot;);\n\n//        categoryList = (List&lt;CatItem&gt;) getArguments().getSerializable(&quot;arraylist&quot;);\n        ;\n\n        recyclerView.setLayoutManager(new GridLayoutManager(getActivity(), 3));\n        recyclerView.setItemAnimator(new DefaultItemAnimator());\n\n        getCategory();\n        return view;\n    }\n\n    @Override\n    public void onClickItem(View v, int position) {\n        homeActivity.ShowMenu();\n        Bundle args = new Bundle();\n        args.putInt(&quot;id&quot;, position);\n        Fragment fragment = new SubCategoryFragment();\n        fragment.setArguments(args);\n        HomeActivity.getInstance().callFragment(fragment);\n    }\n\n    @Override\n    public void onLongClickItem(View v, int position) {\n\n    }\n\n    private void getCategory() {\n        HomeActivity.custPrograssbar.PrograssCreate(getActivity());\n        JSONObject jsonObject = new JSONObject();\n        try {\n            jsonObject.put(&quot;uid&quot;, user.getId());\n            JsonParser jsonParser = new JsonParser();\n            Call&lt;JsonObject&gt; call = APIClient.getInterface().getCat((JsonObject) jsonParser.parse(jsonObject.toString()));\n            GetResult getResult = new GetResult();\n            getResult.setMyListener(this);\n            getResult.callForLogin(call, &quot;1&quot;);\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n    @Override\n    public void callback(JsonObject result, String callNo) {\n        try {\n\n\n            HomeActivity.custPrograssbar.ClosePrograssBar();\n            if (callNo.equalsIgnoreCase(&quot;1&quot;) &amp;&amp; result.toString() != null) {\n                Gson gson = new Gson();\n                Category category = gson.fromJson(result.toString(), Category.class);\n                categoryList = category.getData();\n                adapter = new CategoryAdp(getActivity(), categoryList, this);\n                recyclerView.setAdapter(adapter);\n            }\n        } catch (Exception e) {\n\n        }\n    }\n}\n</code></pre>\n<p>now when user clicks the category it should show only itemlist:</p>\n<pre><code>package com.grocery.food.Fragment;\n\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\nimport androidx.fragment.app.Fragment;\nimport androidx.recyclerview.widget.DefaultItemAnimator;\nimport androidx.recyclerview.widget.GridLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport com.google.gson.Gson;\nimport com.google.gson.JsonObject;\nimport com.google.gson.JsonParser;\nimport com.grocery.food.Activity.HomeActivity;\nimport com.grocery.food.Adepter.SubCategoryAdp;\nimport com.grocery.food.Model.SubCategory;\nimport com.grocery.food.Model.SubcatItem;\nimport com.grocery.food.Model.User;\nimport com.grocery.food.R;\nimport com.grocery.food.Utils.SessionManager;\nimport com.grocery.food.retrofit.APIClient;\nimport com.grocery.food.retrofit.GetResult;\n\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport butterknife.BindView;\nimport butterknife.ButterKnife;\nimport butterknife.Unbinder;\nimport retrofit2.Call;\n\nimport static com.grocery.food.Activity.HomeActivity.homeActivity;\n\n\npublic class SubCategoryFragment extends Fragment implements GetResult.MyListener, SubCategoryAdp.RecyclerTouchListener {\n    // TODO: Rename parameter arguments, choose names that match\n\n    private static final String ARG_PARAM1 = &quot;param1&quot;;\n    private static final String ARG_PARAM2 = &quot;param2&quot;;\n    @BindView(R.id.recycler_view)\n    RecyclerView recyclerView;\n\n    // TODO: Rename and change types of parameters\n    private String mParam1;\n    private String mParam2;\n    SubCategoryAdp adapter;\n    List&lt;SubcatItem&gt; categoryList;\n    Unbinder unbinder;\n    SessionManager sessionManager;\n    User user;\n    int CID = 0;\n\n    public SubCategoryFragment() {\n        // Required empty public constructor\n    }\n\n    // TODO: Rename and change types and number of parameters\n    public static SubCategoryFragment newInstance(String param1, String param2) {\n        SubCategoryFragment fragment = new SubCategoryFragment();\n        Bundle args = new Bundle();\n        args.putString(ARG_PARAM1, param1);\n        args.putString(ARG_PARAM2, param2);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        if (getArguments() != null) {\n            mParam1 = getArguments().getString(ARG_PARAM1);\n            mParam2 = getArguments().getString(ARG_PARAM2);\n        }\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View view = inflater.inflate(R.layout.fragment_subcategory, container, false);\n        unbinder = ButterKnife.bind(this, view);\n        Bundle b = getArguments();\n        CID = b.getInt(&quot;id&quot;);\n\n        categoryList = new ArrayList&lt;&gt;();\n        sessionManager = new SessionManager(getActivity());\n        user = sessionManager.getUserDetails(&quot;&quot;);\n\n\n        recyclerView.setLayoutManager(new GridLayoutManager(getActivity(), 3));\n        recyclerView.setItemAnimator(new DefaultItemAnimator());\n\n        getSubCategory();\n        return view;\n    }\n\n    @Override\n    public void onClickItem(View v, int cid, int scid) {\n        homeActivity.ShowMenu();\n        Bundle args = new Bundle();\n        args.putInt(&quot;cid&quot;, cid);\n        args.putInt(&quot;scid&quot;, scid);\n        Fragment fragment = new ItemListFragment();\n        fragment.setArguments(args);\n        HomeActivity.getInstance().callFragment(fragment);\n    }\n\n    @Override\n    public void onLongClickItem(View v, int position) {\n\n    }\n\n    private void getSubCategory() {\n        HomeActivity.custPrograssbar.PrograssCreate(getActivity());\n        JSONObject jsonObject = new JSONObject();\n        try {\n            jsonObject.put(&quot;category_id&quot;, CID);\n            JsonParser jsonParser = new JsonParser();\n            Call&lt;JsonObject&gt; call = APIClient.getInterface().getSubcategory((JsonObject) jsonParser.parse(jsonObject.toString()));\n            GetResult getResult = new GetResult();\n            getResult.setMyListener(this);\n            getResult.callForLogin(call, &quot;1&quot;);\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n    @Override\n    public void callback(JsonObject result, String callNo) {\n        try {\n\n\n            HomeActivity.custPrograssbar.ClosePrograssBar();\n            if (callNo.equalsIgnoreCase(&quot;1&quot;) &amp;&amp; result.toString() != null) {\n                Gson gson = new Gson();\n                SubCategory category = gson.fromJson(result.toString(), SubCategory.class);\n                categoryList = category.getData();\n                adapter = new SubCategoryAdp(getActivity(), categoryList, this);\n                recyclerView.setAdapter(adapter);\n            }\n        } catch (Exception e) {\n\n        }\n    }\n}\n\n</code></pre>\n<p>now here's my itelist code please have a look to it too..</p>\n<pre><code>package com.grocery.food.Activity;\n\nimport android.database.Cursor;\nimport android.graphics.Paint;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.ImageView;\nimport android.widget.LinearLayout;\nimport android.widget.RelativeLayout;\nimport android.widget.TextView;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.bumptech.glide.Glide;\nimport com.grocery.food.DataBase.DatabaseHelper;\nimport com.grocery.food.DataBase.MyCart;\nimport com.grocery.food.Model.Price;\nimport com.grocery.food.Model.ProductItem;\nimport com.grocery.food.R;\nimport com.grocery.food.Utils.SessionManager;\nimport com.grocery.food.retrofit.APIClient;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport butterknife.BindView;\nimport butterknife.ButterKnife;\nimport butterknife.OnClick;\n\nimport static com.grocery.food.Fragment.ItemListFragment.itemListFragment;\nimport static com.grocery.food.Utils.SessionManager.CURRUNCY;\n\npublic class ItemDetailsActivity extends AppCompatActivity {\n\n\n    ProductItem productItem;\n    Price price;\n    @BindView(R.id.imgP)\n    ImageView imgP;\n    @BindView(R.id.img_back)\n    ImageView imgBack;\n    @BindView(R.id.img_cart)\n    ImageView imgCart;\n    @BindView(R.id.txt_tcount)\n    TextView txtTcount;\n    @BindView(R.id.lvl_cart)\n    RelativeLayout lvlCart;\n    @BindView(R.id.txt_title)\n    TextView txtTitle;\n    @BindView(R.id.txt_desc)\n    TextView txtDesc;\n    @BindView(R.id.lvl_pricelist)\n    LinearLayout lvlPricelist;\n    @BindView(R.id.btn_addtocart)\n    Button btnAddtocart;\n    ArrayList&lt;Price&gt; priceslist;\n    DatabaseHelper databaseHelper;\n    SessionManager sessionManager;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_item_details);\n        ButterKnife.bind(this);\n        sessionManager=new SessionManager(this);\n        databaseHelper = new DatabaseHelper(ItemDetailsActivity.this);\n        productItem = (ProductItem) getIntent().getParcelableExtra(&quot;MyClass&quot;);\n        priceslist = getIntent().getParcelableArrayListExtra(&quot;MyList&quot;);\n        if (productItem != null) {\n            txtTitle.setText(&quot;&quot; + productItem.getProductName());\n            txtDesc.setText(&quot;&quot; + productItem.getShortDesc());\n            Glide.with(this).load(APIClient.Base_URL + &quot;/&quot; + productItem.getProductImage()).thumbnail(Glide.with(this).load(R.drawable.ezgifresize)).into(imgP);\n            setJoinPlayrList(lvlPricelist, productItem, priceslist);\n            updateItem();\n        }\n    }\n\n    public void updateItem() {\n        Cursor res = databaseHelper.getAllData();\n        if (res.getCount() == 0) {\n            txtTcount.setText(&quot;0&quot;);\n\n        } else {\n            txtTcount.setText(&quot;&quot; + res.getCount());\n        }\n    }\n\n    @OnClick({R.id.img_back, R.id.lvl_cart, R.id.btn_addtocart})\n    public void onClick(View view) {\n        switch (view.getId()) {\n            case R.id.img_back:\n                finish();\n                break;\n            case R.id.lvl_cart:\n                fragment();\n                break;\n            case R.id.btn_addtocart:\n                finish();\n                break;\n        }\n    }\n\n    private void setJoinPlayrList(LinearLayout lnrView, ProductItem datum, List&lt;Price&gt; priceList) {\n\n        lnrView.removeAllViews();\n        final int[] count = {0};\n        DatabaseHelper helper = new DatabaseHelper(lnrView.getContext());\n        if (priceList != null &amp;&amp; priceList.size() &gt; 0) {\n            for (int i = 0; i &lt; priceList.size(); i++) {\n                LayoutInflater inflater = LayoutInflater.from(this);\n\n                View view = inflater.inflate(R.layout.custome_prize, null);\n\n                TextView txt_price = view.findViewById(R.id.txt_price);\n                TextView txt_gram = view.findViewById(R.id.txt_gram);\n                TextView txt_offer = view.findViewById(R.id.txt_offer);\n                TextView txtcount = view.findViewById(R.id.txtcount);\n                LinearLayout img_mins = view.findViewById(R.id.img_mins);\n                LinearLayout img_plus = view.findViewById(R.id.img_plus);\n                MyCart myCart = new MyCart();\n                myCart.setPID(datum.getId());\n                myCart.setImage(datum.getProductImage());\n                myCart.setTitle(datum.getProductName());\n                myCart.setWeight(priceList.get(i).getProductType());\n                myCart.setCost(priceList.get(i).getProductPrice());\n                myCart.setDiscount(datum.getmDiscount());\n                int qrt = helper.getCard(myCart.getPID(), myCart.getCost());\n                if (qrt != -1) {\n                    count[0] = qrt;\n                    txtcount.setText(&quot;&quot; + count[0]);\n                    txtcount.setVisibility(View.VISIBLE);\n                } else {\n                    txtcount.setVisibility(View.VISIBLE);\n                    img_mins.setVisibility(View.VISIBLE);\n                }\n                img_mins.setOnClickListener(new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {\n\n                        count[0] = Integer.parseInt(txtcount.getText().toString());\n\n                        count[0] = count[0] - 1;\n                        if (count[0] &lt;= 0) {\n                            img_mins.setVisibility(View.VISIBLE);\n                            txtcount.setText(&quot;0&quot;);\n                            txtcount.setVisibility(View.VISIBLE);\n                            helper.deleteRData(myCart.getPID(), myCart.getCost());\n                        } else {\n                            txtcount.setVisibility(View.VISIBLE);\n                            txtcount.setText(&quot;&quot; + count[0]);\n                            myCart.setQty(String.valueOf(count[0]));\n                            Log.e(&quot;INsert&quot;, &quot;--&gt; &quot; + helper.insertData(myCart));\n                        }\n                        if (itemListFragment != null)\n                            itemListFragment.updateItem();\n                        updateItem();\n                    }\n                });\n\n                img_plus.setOnClickListener(new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {\n                        txtcount.setVisibility(View.VISIBLE);\n                        img_mins.setVisibility(View.VISIBLE);\n                        count[0] = Integer.parseInt(txtcount.getText().toString());\n\n                        count[0] = count[0] + 1;\n                        txtcount.setText(&quot;&quot; + count[0]);\n                        myCart.setQty(String.valueOf(count[0]));\n                        Log.e(&quot;INsert&quot;, &quot;--&gt; &quot; + helper.insertData(myCart));\n                        if (itemListFragment != null)\n                            itemListFragment.updateItem();\n                        updateItem();\n                    }\n                });\n\n\n                txt_gram.setText(&quot;&quot; + priceList.get(i).getProductType());\n\n\n                if (datum.getmDiscount() &gt; 0) {\n                    double  res = (Double.parseDouble(priceList.get(i).getProductPrice()) / 100.0f)* datum.getmDiscount();\n                    res = Integer.parseInt(priceList.get(i).getProductPrice()) - res;\n                    txt_offer.setText(sessionManager.getStringData(CURRUNCY)+ priceList.get(i).getProductPrice());\n                    txt_offer.setPaintFlags(txt_offer.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);\n                    txt_price.setText(sessionManager.getStringData(CURRUNCY)  + res);\n                } else {\n                    txt_offer.setVisibility(View.GONE);\n                    txt_price.setText(sessionManager.getStringData(CURRUNCY)  + priceList.get(i).getProductPrice());\n                }\n                lnrView.addView(view);\n            }\n        }\n    }\n\n    public void fragment() {\n        SessionManager.ISCART = true;\n        finish();\n\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1686623529,"post_id":76461360,"comment_id":134821059,"body_markdown":"Change `System.out.println(&quot;Register Gagal&quot;);` to `e.printStackTrace();` &lt;- This will provide you with more useful information as to the reason for the exception (and it&#39;s actual source)","body":"Change <code>System.out.println(&quot;Register Gagal&quot;);</code> to <code>e.printStackTrace();</code> &lt;- This will provide you with more useful information as to the reason for the exception (and it&#39;s actual source)"}],"owner":{"account_id":26792610,"reputation":1,"user_id":20385789,"display_name":"zQynians"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686955507,"creation_date":1686623223,"question_id":76461360,"body_markdown":"private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n        // TODO add your handling code here:\r\n        // Mengambil nilai jLabel36Text dari jFrame1\r\n    jLabel36Text = landingViews.jLabel36Text;\r\n    \r\n    // Mengatur nilai jLabel8 dengan jLabel36Text\r\n    jLabel18.setText(jLabel36Text);\r\n    jLabel19.setText(String.valueOf(jLabel32Text));\r\n    \r\n    //memanggil menu\r\n    jLabel3.setText(jLabel10Text);\r\n    jLabel5.setText(jLabel12Text);\r\n    jLabel7.setText(jLabel11Text);\r\n    jLabel9.setText(jLabel13Text);\r\n    \r\n    //memanggil jumlah\r\n    jLabel4.setText(&quot;&quot;+hitungan);\r\n    jLabel6.setText(&quot;&quot;+hitungan2);\r\n    jLabel8.setText(&quot;&quot;+hitungan3);\r\n    jLabel10.setText(&quot;&quot;+hitungan4);\r\n    \r\n    //memanggil harga\r\n    jLabel11.setText(&quot;&quot;+harga1);\r\n    jLabel12.setText(&quot;&quot;+harga2);\r\n    jLabel13.setText(&quot;&quot;+harga3);\r\n    jLabel14.setText(&quot;&quot;+harga4);\r\n   \r\n    \r\n    \r\n    try {\r\n            String id = &quot;&quot;;\r\n            String namaMenu = this.jLabel10Text;\r\n            double harga = this.harga1;\r\n            int jumlah =this.hitungan;\r\n            double subtotal = this.harga1;\r\n            \r\n            \r\n            if (namaMenu.isEmpty()) {\r\n                JOptionPane.showMessageDialog(null, &quot;Data tidak boleh kosong&quot;);\r\n                this.requestFocus();\r\n            }\r\n             else {\r\n                cont.addMenu(id, namaMenu, harga, jumlah, subtotal);\r\n                this.dispose();\r\n                JOptionPane.showMessageDialog(null, &quot;Menu telah terinput&quot;);\r\n                landingViews logView = new landingViews();\r\n                logView.show();\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Register Gagal&quot;);\r\n        }\r\ni expecting this netbeans code button send the data on cont.addMenu(id, namaMenu, harga, jumlah, subtotal); \r\nto myPHPAdmin. but it cant`your text`","title":"Why output always get to &#39;catch&#39;?","body":"<p>private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {<br />\n// TODO add your handling code here:\n// Mengambil nilai jLabel36Text dari jFrame1\njLabel36Text = landingViews.jLabel36Text;</p>\n<pre><code>// Mengatur nilai jLabel8 dengan jLabel36Text\njLabel18.setText(jLabel36Text);\njLabel19.setText(String.valueOf(jLabel32Text));\n\n//memanggil menu\njLabel3.setText(jLabel10Text);\njLabel5.setText(jLabel12Text);\njLabel7.setText(jLabel11Text);\njLabel9.setText(jLabel13Text);\n\n//memanggil jumlah\njLabel4.setText(&quot;&quot;+hitungan);\njLabel6.setText(&quot;&quot;+hitungan2);\njLabel8.setText(&quot;&quot;+hitungan3);\njLabel10.setText(&quot;&quot;+hitungan4);\n\n//memanggil harga\njLabel11.setText(&quot;&quot;+harga1);\njLabel12.setText(&quot;&quot;+harga2);\njLabel13.setText(&quot;&quot;+harga3);\njLabel14.setText(&quot;&quot;+harga4);\n\n\n\ntry {\n        String id = &quot;&quot;;\n        String namaMenu = this.jLabel10Text;\n        double harga = this.harga1;\n        int jumlah =this.hitungan;\n        double subtotal = this.harga1;\n        \n        \n        if (namaMenu.isEmpty()) {\n            JOptionPane.showMessageDialog(null, &quot;Data tidak boleh kosong&quot;);\n            this.requestFocus();\n        }\n         else {\n            cont.addMenu(id, namaMenu, harga, jumlah, subtotal);\n            this.dispose();\n            JOptionPane.showMessageDialog(null, &quot;Menu telah terinput&quot;);\n            landingViews logView = new landingViews();\n            logView.show();\n        }\n    } catch (Exception e) {\n        System.out.println(&quot;Register Gagal&quot;);\n    }\n</code></pre>\n<p>i expecting this netbeans code button send the data on cont.addMenu(id, namaMenu, harga, jumlah, subtotal);\nto myPHPAdmin. but it cant<code>your text</code></p>\n"},{"tags":["java","android","xml","android-layout"],"answers":[{"tags":[],"owner":{"account_id":22198154,"reputation":41,"user_id":16439243,"display_name":"Abdelrahman Esam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686954238,"creation_date":1686954238,"answer_id":76493895,"question_id":76493718,"body_markdown":"well by defualt there is no styles.xml file .... you have the themes.xml file only and you should create the styles file by your self ...right click and new android resource file and create it ","title":"I am unable to find the styles file in the Values folder in Android development","body":"<p>well by defualt there is no styles.xml file .... you have the themes.xml file only and you should create the styles file by your self ...right click and new android resource file and create it</p>\n"}],"owner":{"account_id":28836858,"reputation":1,"user_id":22086063,"display_name":"Ayush Shrivastav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686954238,"creation_date":1686951577,"question_id":76493718,"body_markdown":"I am new to Android Development and cannot find the styles file in the Values folder. Am I misunderstanding something? Is there another way to style buttons since I cannot override pre-defined styles? Please help me find any alternative solutions to this problem and any suggestions for how to proceed as a beginner?","title":"I am unable to find the styles file in the Values folder in Android development","body":"<p>I am new to Android Development and cannot find the styles file in the Values folder. Am I misunderstanding something? Is there another way to style buttons since I cannot override pre-defined styles? Please help me find any alternative solutions to this problem and any suggestions for how to proceed as a beginner?</p>\n"},{"tags":["java","spring-boot","junit"],"comments":[{"owner":{"account_id":26780105,"reputation":294,"user_id":20375079,"display_name":"Seb Perp"},"score":0,"creation_date":1684797553,"post_id":76308882,"comment_id":134566477,"body_markdown":"For a reason I don&#39;t yet understand, the mocked objects in the RateService are not the ones you configure in your test.","body":"For a reason I don&#39;t yet understand, the mocked objects in the RateService are not the ones you configure in your test."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1684798905,"post_id":76308882,"comment_id":134566589,"body_markdown":"@SebPerp I have no idea why resttemplate returns null. I hope you can help me.","body":"@SebPerp I have no idea why resttemplate returns null. I hope you can help me."},{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1684819048,"post_id":76308882,"comment_id":134568370,"body_markdown":"Did you try to stub like this?\n when(restTemplate.exchange(anyString(), eq(HttpMethod.GET), any(HttpEntity.class), eq(RateResponse.class)))\n                .thenReturn(responseEntity); (Could be that you are stubbing the wrong method)","body":"Did you try to stub like this?  when(restTemplate.exchange(anyString(), eq(HttpMethod.GET), any(HttpEntity.class), eq(RateResponse.class)))                 .thenReturn(responseEntity); (Could be that you are stubbing the wrong method)"},{"owner":{"account_id":26780105,"reputation":294,"user_id":20375079,"display_name":"Seb Perp"},"score":0,"creation_date":1684824130,"post_id":76308882,"comment_id":134569175,"body_markdown":"@Feelfree I tried to change the matchers of the method, the issue is not the stubbing. Stubbing done in the test class is not &quot;passed&quot; to the RateService as the objects are different. If you inject &quot;manually&quot; the mocks in the service, stubbing works.","body":"@Feelfree I tried to change the matchers of the method, the issue is not the stubbing. Stubbing done in the test class is not &quot;passed&quot; to the RateService as the objects are different. If you inject &quot;manually&quot; the mocks in the service, stubbing works."}],"answers":[{"tags":[],"owner":{"account_id":26780105,"reputation":294,"user_id":20375079,"display_name":"Seb Perp"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1684870667,"creation_date":1684798973,"answer_id":76310493,"question_id":76308882,"body_markdown":"I missed the fact that BaseServiceTest is a SpringBootTest. I think you got problems because your original code tries to use, at the same time, Mockito injection and Spring injection.\r\n\r\nA clean solution if you want a SpringBootTest is to :\r\n\r\n1. Create a @Configuration class dedicated to your tests, that will create mocked spring beans :\r\n\r\n```\r\n    @Profile(&quot;test&quot;)\r\n    @Configuration\r\n    public class TestConfiguration {\r\n\r\n        @Bean\r\n        @Primary\r\n        public RateRepository mockRateRepository() {\r\n            return mock(RateRepository.class);\r\n        }\r\n\r\n    }\r\n```\r\n\r\nAnd just let Spring inject the services and repository that you use into your test :\r\n\r\n```\r\nclass RateServiceTest extends BaseServiceTest {\r\n\r\n    @Autowired\r\n    private RateRepository rateRepository;\r\n\r\n    @Autowired\r\n    private RateService rateService;\r\n\r\n    @Test\r\n    void testCalculateRate() {\r\n\r\n        // Mocked data\r\n        EnumCurrency base = EnumCurrency.EUR;\r\n        List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\r\n        LocalDate date = LocalDate.of(2023, 5, 22);\r\n\r\n        // Mocked rate entity\r\n        RateEntity mockedRateEntity = new RateEntity();\r\n        mockedRateEntity.setBase(base);\r\n        mockedRateEntity.setDate(date);\r\n        Map&lt;EnumCurrency, Double&gt; rates = new EnumMap&lt;&gt;(EnumCurrency.class);\r\n        rates.put(EnumCurrency.USD, 1.2);\r\n        rates.put(EnumCurrency.GBP, 0.9);\r\n        mockedRateEntity.setRates(rates);\r\n\r\n        // Mock repository behavior\r\n        when(rateRepository.findOneByDate(date)).thenReturn(Optional.of(mockedRateEntity));\r\n\r\n        // Mock API response\r\n        RateResponse mockedRateResponse = RateResponse.builder()\r\n                .base(base)\r\n                .rates(rates)\r\n                .date(date)\r\n                .build();\r\n\r\n        // Create a mock response entity with the expected headers and body\r\n        ResponseEntity&lt;RateResponse&gt; mockedResponseEntity = ResponseEntity.ok()\r\n                .body(mockedRateResponse);\r\n\r\n        // Call the method\r\n        RateDto result = rateService.calculateRate(base, targets, date);\r\n\r\n\r\n        // Verify the result\r\n        assertThat(result.getBase()).isEqualTo(base);\r\n        assertThat(result.getDate()).isEqualTo(date);\r\n        assertThat(result.getRates()).hasSize(2);\r\n        assertThat(result.getRates()).containsExactlyInAnyOrder(\r\n                new RateInfoDto(EnumCurrency.USD, 1.2),\r\n                new RateInfoDto(EnumCurrency.GBP, 0.9)\r\n        );\r\n\r\n        // Verify repository method was called\r\n        verify(rateRepository, times(1)).findOneByDate(date);\r\n\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nYou now have multiple solutions for your problem.\r\n\r\n----------------------------------------\r\n\r\n**Old answer**\r\n\r\nI don&#39;t have a complete solution for you but I hope my analysis will help you.\r\n\r\n 1. Your first problem is not that restTemplate.exchange return null but that rateRepository.findOneByDate(date) does not return your mockedRateEntity. If your test was working fine, restTemplate would not be called, as it is called only when the rateRepository does not return an object. But you mocked it so as it returns one.\r\n\r\n2. I don&#39;t know why yet but, when debugging, we can see that the mocked restTemplate (@13398) and rateRepository(@13396) in your test class:\r\n\r\n[![in test][1]][1]\r\n\r\nare not the same mocked objects than the ones injected in the RestService class (restTemplate@17879 and rateRepository@17878) :\r\n\r\n[![in service][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nfvW7.png\r\n  [2]: https://i.stack.imgur.com/0YBrO.png\r\n\r\nI found a solution that is not totally satisfying (sorry) but that works :\r\n\r\n - Remove @InjectMocks there:\r\n```\r\n    @InjectMocks\r\n    private RateService rateService;\r\n```\r\n\r\n - instantiate yourself the RateService :\r\n```\r\n    rateService = new RateService(rateRepository, restTemplate);\r\n```\r\n\r\nYou&#39;ll also need to remove this part :\r\n\r\n```\r\n    when(restTemplate.exchange(\r\n                    anyString(),\r\n                    eq(HttpMethod.GET),\r\n                    any(HttpEntity.class),\r\n                    eq(RateResponse.class)\r\n    )).thenReturn(mockedResponseEntity);\r\n```\r\nbecause restTemplate won&#39;t be called if rateRepository returns a result.\r\n\r\nComplete test class that works with the solution I found is :\r\n\r\n```\r\npackage com.exchangeapi.currencyexchange.service;\r\n\r\nimport com.exchangeapi.currencyexchange.base.BaseServiceTest;\r\nimport com.exchangeapi.currencyexchange.dto.RateDto;\r\nimport com.exchangeapi.currencyexchange.dto.RateInfoDto;\r\nimport com.exchangeapi.currencyexchange.entity.RateEntity;\r\nimport com.exchangeapi.currencyexchange.entity.enums.EnumCurrency;\r\nimport com.exchangeapi.currencyexchange.payload.response.RateResponse;\r\nimport com.exchangeapi.currencyexchange.repository.RateRepository;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.mockito.Mock;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.client.RestTemplate;\r\n\r\nimport java.time.LocalDate;\r\nimport java.util.*;\r\n\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\nimport static org.mockito.Mockito.*;\r\n\r\n\r\nclass RateServiceTest extends BaseServiceTest {\r\n\r\n    @Mock\r\n    private RateRepository rateRepository;\r\n\r\n    @Mock\r\n    private RestTemplate restTemplate;\r\n\r\n    @Test\r\n    void testCalculateRate() {\r\n\r\n        // Mocked data\r\n        EnumCurrency base = EnumCurrency.EUR;\r\n        List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\r\n        LocalDate date = LocalDate.of(2023, 5, 22);\r\n\r\n        // Mocked rate entity\r\n        RateEntity mockedRateEntity = new RateEntity();\r\n        mockedRateEntity.setBase(base);\r\n        mockedRateEntity.setDate(date);\r\n        Map&lt;EnumCurrency, Double&gt; rates = new HashMap&lt;&gt;();\r\n        rates.put(EnumCurrency.USD, 1.2);\r\n        rates.put(EnumCurrency.GBP, 0.9);\r\n        mockedRateEntity.setRates(rates);\r\n\r\n        // Mock repository behavior\r\n        when(rateRepository.findOneByDate(date)).thenReturn(Optional.of(mockedRateEntity));\r\n\r\n        // Mock API response\r\n        RateResponse mockedRateResponse = RateResponse.builder()\r\n                .base(base)\r\n                .rates(rates)\r\n                .date(date)\r\n                .build();\r\n\r\n        // Create a mock response entity with the expected headers and body\r\n        ResponseEntity&lt;RateResponse&gt; mockedResponseEntity = ResponseEntity.ok()\r\n                .body(mockedRateResponse);\r\n\r\n        // Mock RestTemplate behavior\r\n//        when(restTemplate.exchange(\r\n//                anyString(),\r\n//                eq(HttpMethod.GET),\r\n//                any(HttpEntity.class),\r\n//                eq(RateResponse.class)\r\n//        )).thenReturn(mockedResponseEntity);\r\n\r\n        RateService rateService = new RateService(rateRepository, restTemplate);\r\n\r\n        // Call the method\r\n        RateDto result = rateService.calculateRate(base, targets, date);\r\n\r\n\r\n        // Verify API call was made\r\n//        String expectedUrl = getExchangeUrl(date, base, targets);\r\n//        HttpHeaders expectedHeaders = new HttpHeaders();\r\n//        expectedHeaders.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\r\n//        HttpEntity&lt;String&gt; expectedHttpEntity = new HttpEntity&lt;&gt;(expectedHeaders);\r\n\r\n\r\n        // Verify the result\r\n        assertThat(result.getBase()).isEqualTo(base);\r\n        assertThat(result.getDate()).isEqualTo(date);\r\n        assertThat(result.getRates()).hasSize(2);\r\n        assertThat(result.getRates()).containsExactlyInAnyOrder(\r\n                new RateInfoDto(EnumCurrency.USD, 1.2),\r\n                new RateInfoDto(EnumCurrency.GBP, 0.9)\r\n        );\r\n\r\n        // Verify repository method was called\r\n        verify(rateRepository, times(1)).findOneByDate(date);\r\n\r\n//        verify(restTemplate, times(1)).exchange(\r\n//                eq(expectedUrl),\r\n//                eq(HttpMethod.GET),\r\n//                eq(expectedHttpEntity),\r\n//                eq(RateResponse.class)\r\n//        );\r\n    }\r\n\r\n//    private String getExchangeUrl(LocalDate rateDate, EnumCurrency base, List&lt;EnumCurrency&gt; targets) {\r\n//\r\n//        String symbols = String.join(&quot;%2C&quot;, targets.stream().map(EnumCurrency::name).toArray(String[]::new));\r\n//        return EXCHANGE_API_BASE_URL + rateDate + &quot;?symbols=&quot; + symbols + &quot;&amp;base=&quot; + base;\r\n//    }\r\n}\r\n```\r\n\r\nI let the useless code commented to let you easily see what I changed / removed.\r\n\r\nGood luck !","title":"Spring Boot JUnit Test - Resttemplate returns null in ServiceTest (How to mock restTemplate exchange)","body":"<p>I missed the fact that BaseServiceTest is a SpringBootTest. I think you got problems because your original code tries to use, at the same time, Mockito injection and Spring injection.</p>\n<p>A clean solution if you want a SpringBootTest is to :</p>\n<ol>\n<li>Create a @Configuration class dedicated to your tests, that will create mocked spring beans :</li>\n</ol>\n<pre><code>    @Profile(&quot;test&quot;)\n    @Configuration\n    public class TestConfiguration {\n\n        @Bean\n        @Primary\n        public RateRepository mockRateRepository() {\n            return mock(RateRepository.class);\n        }\n\n    }\n</code></pre>\n<p>And just let Spring inject the services and repository that you use into your test :</p>\n<pre><code>class RateServiceTest extends BaseServiceTest {\n\n    @Autowired\n    private RateRepository rateRepository;\n\n    @Autowired\n    private RateService rateService;\n\n    @Test\n    void testCalculateRate() {\n\n        // Mocked data\n        EnumCurrency base = EnumCurrency.EUR;\n        List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\n        LocalDate date = LocalDate.of(2023, 5, 22);\n\n        // Mocked rate entity\n        RateEntity mockedRateEntity = new RateEntity();\n        mockedRateEntity.setBase(base);\n        mockedRateEntity.setDate(date);\n        Map&lt;EnumCurrency, Double&gt; rates = new EnumMap&lt;&gt;(EnumCurrency.class);\n        rates.put(EnumCurrency.USD, 1.2);\n        rates.put(EnumCurrency.GBP, 0.9);\n        mockedRateEntity.setRates(rates);\n\n        // Mock repository behavior\n        when(rateRepository.findOneByDate(date)).thenReturn(Optional.of(mockedRateEntity));\n\n        // Mock API response\n        RateResponse mockedRateResponse = RateResponse.builder()\n                .base(base)\n                .rates(rates)\n                .date(date)\n                .build();\n\n        // Create a mock response entity with the expected headers and body\n        ResponseEntity&lt;RateResponse&gt; mockedResponseEntity = ResponseEntity.ok()\n                .body(mockedRateResponse);\n\n        // Call the method\n        RateDto result = rateService.calculateRate(base, targets, date);\n\n\n        // Verify the result\n        assertThat(result.getBase()).isEqualTo(base);\n        assertThat(result.getDate()).isEqualTo(date);\n        assertThat(result.getRates()).hasSize(2);\n        assertThat(result.getRates()).containsExactlyInAnyOrder(\n                new RateInfoDto(EnumCurrency.USD, 1.2),\n                new RateInfoDto(EnumCurrency.GBP, 0.9)\n        );\n\n        // Verify repository method was called\n        verify(rateRepository, times(1)).findOneByDate(date);\n\n    }\n\n\n}\n</code></pre>\n<p>You now have multiple solutions for your problem.</p>\n<hr />\n<p><strong>Old answer</strong></p>\n<p>I don't have a complete solution for you but I hope my analysis will help you.</p>\n<ol>\n<li><p>Your first problem is not that restTemplate.exchange return null but that rateRepository.findOneByDate(date) does not return your mockedRateEntity. If your test was working fine, restTemplate would not be called, as it is called only when the rateRepository does not return an object. But you mocked it so as it returns one.</p>\n</li>\n<li><p>I don't know why yet but, when debugging, we can see that the mocked restTemplate (@13398) and rateRepository(@13396) in your test class:</p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/nfvW7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nfvW7.png\" alt=\"in test\" /></a></p>\n<p>are not the same mocked objects than the ones injected in the RestService class (restTemplate@17879 and rateRepository@17878) :</p>\n<p><a href=\"https://i.stack.imgur.com/0YBrO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0YBrO.png\" alt=\"in service\" /></a></p>\n<p>I found a solution that is not totally satisfying (sorry) but that works :</p>\n<ul>\n<li>Remove @InjectMocks there:</li>\n</ul>\n<pre><code>    @InjectMocks\n    private RateService rateService;\n</code></pre>\n<ul>\n<li>instantiate yourself the RateService :</li>\n</ul>\n<pre><code>    rateService = new RateService(rateRepository, restTemplate);\n</code></pre>\n<p>You'll also need to remove this part :</p>\n<pre><code>    when(restTemplate.exchange(\n                    anyString(),\n                    eq(HttpMethod.GET),\n                    any(HttpEntity.class),\n                    eq(RateResponse.class)\n    )).thenReturn(mockedResponseEntity);\n</code></pre>\n<p>because restTemplate won't be called if rateRepository returns a result.</p>\n<p>Complete test class that works with the solution I found is :</p>\n<pre><code>package com.exchangeapi.currencyexchange.service;\n\nimport com.exchangeapi.currencyexchange.base.BaseServiceTest;\nimport com.exchangeapi.currencyexchange.dto.RateDto;\nimport com.exchangeapi.currencyexchange.dto.RateInfoDto;\nimport com.exchangeapi.currencyexchange.entity.RateEntity;\nimport com.exchangeapi.currencyexchange.entity.enums.EnumCurrency;\nimport com.exchangeapi.currencyexchange.payload.response.RateResponse;\nimport com.exchangeapi.currencyexchange.repository.RateRepository;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.Mock;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.client.RestTemplate;\n\nimport java.time.LocalDate;\nimport java.util.*;\n\nimport static org.assertj.core.api.Assertions.assertThat;\nimport static org.mockito.Mockito.*;\n\n\nclass RateServiceTest extends BaseServiceTest {\n\n    @Mock\n    private RateRepository rateRepository;\n\n    @Mock\n    private RestTemplate restTemplate;\n\n    @Test\n    void testCalculateRate() {\n\n        // Mocked data\n        EnumCurrency base = EnumCurrency.EUR;\n        List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\n        LocalDate date = LocalDate.of(2023, 5, 22);\n\n        // Mocked rate entity\n        RateEntity mockedRateEntity = new RateEntity();\n        mockedRateEntity.setBase(base);\n        mockedRateEntity.setDate(date);\n        Map&lt;EnumCurrency, Double&gt; rates = new HashMap&lt;&gt;();\n        rates.put(EnumCurrency.USD, 1.2);\n        rates.put(EnumCurrency.GBP, 0.9);\n        mockedRateEntity.setRates(rates);\n\n        // Mock repository behavior\n        when(rateRepository.findOneByDate(date)).thenReturn(Optional.of(mockedRateEntity));\n\n        // Mock API response\n        RateResponse mockedRateResponse = RateResponse.builder()\n                .base(base)\n                .rates(rates)\n                .date(date)\n                .build();\n\n        // Create a mock response entity with the expected headers and body\n        ResponseEntity&lt;RateResponse&gt; mockedResponseEntity = ResponseEntity.ok()\n                .body(mockedRateResponse);\n\n        // Mock RestTemplate behavior\n//        when(restTemplate.exchange(\n//                anyString(),\n//                eq(HttpMethod.GET),\n//                any(HttpEntity.class),\n//                eq(RateResponse.class)\n//        )).thenReturn(mockedResponseEntity);\n\n        RateService rateService = new RateService(rateRepository, restTemplate);\n\n        // Call the method\n        RateDto result = rateService.calculateRate(base, targets, date);\n\n\n        // Verify API call was made\n//        String expectedUrl = getExchangeUrl(date, base, targets);\n//        HttpHeaders expectedHeaders = new HttpHeaders();\n//        expectedHeaders.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\n//        HttpEntity&lt;String&gt; expectedHttpEntity = new HttpEntity&lt;&gt;(expectedHeaders);\n\n\n        // Verify the result\n        assertThat(result.getBase()).isEqualTo(base);\n        assertThat(result.getDate()).isEqualTo(date);\n        assertThat(result.getRates()).hasSize(2);\n        assertThat(result.getRates()).containsExactlyInAnyOrder(\n                new RateInfoDto(EnumCurrency.USD, 1.2),\n                new RateInfoDto(EnumCurrency.GBP, 0.9)\n        );\n\n        // Verify repository method was called\n        verify(rateRepository, times(1)).findOneByDate(date);\n\n//        verify(restTemplate, times(1)).exchange(\n//                eq(expectedUrl),\n//                eq(HttpMethod.GET),\n//                eq(expectedHttpEntity),\n//                eq(RateResponse.class)\n//        );\n    }\n\n//    private String getExchangeUrl(LocalDate rateDate, EnumCurrency base, List&lt;EnumCurrency&gt; targets) {\n//\n//        String symbols = String.join(&quot;%2C&quot;, targets.stream().map(EnumCurrency::name).toArray(String[]::new));\n//        return EXCHANGE_API_BASE_URL + rateDate + &quot;?symbols=&quot; + symbols + &quot;&amp;base=&quot; + base;\n//    }\n}\n</code></pre>\n<p>I let the useless code commented to let you easily see what I changed / removed.</p>\n<p>Good luck !</p>\n"},{"tags":[],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686953722,"creation_date":1686953722,"answer_id":76493863,"question_id":76308882,"body_markdown":"Here is my answer shown below\r\n\r\nHere is the **BaseServiceTest** shown below\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    @ActiveProfiles(value = &quot;test&quot;)\r\n    public abstract class BaseServiceTest {\r\n    \r\n    }\r\n\r\nHere is the **RateServiceTest** shown below\r\n\r\n    class RateServiceTest extends BaseServiceTest {\r\n    \r\n    \r\n        @Mock\r\n        private RateRepository rateRepository;\r\n    \r\n        @Mock\r\n        private RestTemplate restTemplate;\r\n    \r\n        @InjectMocks\r\n        private RateService rateService;\r\n    \r\n    \r\n        @Test\r\n        void whenCalculateRate_butRateRepositoryFoundOne() {\r\n    \r\n            // Mocked data\r\n            EnumCurrency base = EnumCurrency.EUR;\r\n            List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\r\n            LocalDate date = LocalDate.of(2023, 5, 22);\r\n    \r\n            // Mocked rate entity\r\n            RateEntity mockedRateEntity = new RateEntity();\r\n            mockedRateEntity.setBase(base);\r\n            mockedRateEntity.setDate(date);\r\n            Map&lt;EnumCurrency, Double&gt; rates = new HashMap&lt;&gt;();\r\n            rates.put(EnumCurrency.USD, 1.2);\r\n            rates.put(EnumCurrency.GBP, 0.9);\r\n            mockedRateEntity.setRates(rates);\r\n    \r\n            List&lt;RateInfoDto&gt; rateInfoList = targets.stream()\r\n                    .map(currency -&gt; new RateInfoDto(currency, rates.get(currency)))\r\n                    .collect(Collectors.toList());\r\n    \r\n            RateDto expected = RateDto.builder()\r\n                    .id(mockedRateEntity.getId())\r\n                    .base(mockedRateEntity.getBase())\r\n                    .date(mockedRateEntity.getDate())\r\n                    .rates(rateInfoList)\r\n                    .build();\r\n    \r\n            // Mock repository behavior\r\n            when(rateRepository.findOneByDate(date)).thenReturn(Optional.of(mockedRateEntity));\r\n    \r\n    \r\n            // Call the method\r\n            RateDto result = rateService.calculateRate(base, targets, date);\r\n    \r\n            // Verify the result\r\n            assertThat(result.getBase()).isEqualTo(expected.getBase());\r\n            assertThat(result.getDate()).isEqualTo(expected.getDate());\r\n            assertThat(result.getRates()).hasSize(2);\r\n            assertThat(result.getRates()).containsExactlyInAnyOrder(\r\n                    new RateInfoDto(EnumCurrency.USD, 1.2),\r\n                    new RateInfoDto(EnumCurrency.GBP, 0.9)\r\n            );\r\n    \r\n            // Verify repository method was called\r\n            verify(rateRepository, times(1)).findOneByDate(date);\r\n    \r\n            // The saveRatesFromApi method won&#39;t be run because the rateRepository.findOneByDate return the mockedRateEntity\r\n            verify(restTemplate, times(0)).exchange(\r\n                    anyString(),\r\n                    eq(HttpMethod.GET),\r\n                    any(HttpEntity.class),\r\n                    eq(RateResponse.class)\r\n            );\r\n        }\r\n    \r\n        @Test\r\n        void whenCalculateRate_andRateRepositoryNotFound() {\r\n            // Mocked data\r\n            EnumCurrency base = EnumCurrency.EUR;\r\n            List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\r\n            LocalDate date = LocalDate.of(2023, 5, 22);\r\n    \r\n            // Mocked rate entity\r\n            RateEntity mockedRateEntity = new RateEntity();\r\n            mockedRateEntity.setBase(base);\r\n            mockedRateEntity.setDate(date);\r\n            Map&lt;EnumCurrency, Double&gt; rates = new HashMap&lt;&gt;();\r\n            rates.put(EnumCurrency.USD, 1.2);\r\n            rates.put(EnumCurrency.GBP, 0.9);\r\n            mockedRateEntity.setRates(rates);\r\n    \r\n            List&lt;RateInfoDto&gt; rateInfoList = targets.stream()\r\n                    .map(currency -&gt; new RateInfoDto(currency, rates.get(currency)))\r\n                    .collect(Collectors.toList());\r\n    \r\n            RateDto expected = RateDto.builder()\r\n                    .id(mockedRateEntity.getId())\r\n                    .base(mockedRateEntity.getBase())\r\n                    .date(mockedRateEntity.getDate())\r\n                    .rates(rateInfoList)\r\n                    .build();\r\n    \r\n            // Mock API response\r\n            RateResponse mockedRateResponse = RateResponse.builder()\r\n                    .base(base)\r\n                    .rates(rates)\r\n                    .date(date)\r\n                    .build();\r\n    \r\n            ResponseEntity&lt;RateResponse&gt; mockedResponseEntity = ResponseEntity.ok().body(mockedRateResponse);\r\n    \r\n            // Mock repository behavior\r\n            when(rateRepository.findOneByDate(date)).thenReturn(Optional.empty()); // Return null to simulate repository not finding the entity\r\n    \r\n            when(restTemplate.exchange(\r\n                    anyString(),\r\n                    eq(HttpMethod.GET),\r\n                    any(HttpEntity.class),\r\n                    eq(RateResponse.class)\r\n            )).thenReturn(mockedResponseEntity);\r\n    \r\n            // Mock saveRatesFromApi behavior\r\n            when(rateRepository.save(any(RateEntity.class))).thenReturn(mockedRateEntity);\r\n    \r\n            // Call the method\r\n            RateDto result = rateService.calculateRate(base, targets, date);\r\n    \r\n            // Verify the result\r\n            assertThat(result.getBase()).isEqualTo(expected.getBase());\r\n            assertThat(result.getDate()).isEqualTo(expected.getDate());\r\n            assertThat(result.getRates()).hasSize(2);\r\n            assertThat(result.getRates()).containsExactlyInAnyOrder(\r\n                    new RateInfoDto(EnumCurrency.USD, 1.2),\r\n                    new RateInfoDto(EnumCurrency.GBP, 0.9)\r\n            );\r\n    \r\n            // Verify repository method was called\r\n            verify(rateRepository, times(1)).findOneByDate(date);\r\n            verify(rateRepository, times(1)).save(any(RateEntity.class));\r\n    \r\n            // Verify restTemplate.exchange was called\r\n            verify(restTemplate, times(1)).exchange(\r\n                    anyString(),\r\n                    eq(HttpMethod.GET),\r\n                    any(HttpEntity.class),\r\n                    eq(RateResponse.class)\r\n            );\r\n        }\r\n    \r\n    }","title":"Spring Boot JUnit Test - Resttemplate returns null in ServiceTest (How to mock restTemplate exchange)","body":"<p>Here is my answer shown below</p>\n<p>Here is the <strong>BaseServiceTest</strong> shown below</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@ActiveProfiles(value = &quot;test&quot;)\npublic abstract class BaseServiceTest {\n\n}\n</code></pre>\n<p>Here is the <strong>RateServiceTest</strong> shown below</p>\n<pre><code>class RateServiceTest extends BaseServiceTest {\n\n\n    @Mock\n    private RateRepository rateRepository;\n\n    @Mock\n    private RestTemplate restTemplate;\n\n    @InjectMocks\n    private RateService rateService;\n\n\n    @Test\n    void whenCalculateRate_butRateRepositoryFoundOne() {\n\n        // Mocked data\n        EnumCurrency base = EnumCurrency.EUR;\n        List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\n        LocalDate date = LocalDate.of(2023, 5, 22);\n\n        // Mocked rate entity\n        RateEntity mockedRateEntity = new RateEntity();\n        mockedRateEntity.setBase(base);\n        mockedRateEntity.setDate(date);\n        Map&lt;EnumCurrency, Double&gt; rates = new HashMap&lt;&gt;();\n        rates.put(EnumCurrency.USD, 1.2);\n        rates.put(EnumCurrency.GBP, 0.9);\n        mockedRateEntity.setRates(rates);\n\n        List&lt;RateInfoDto&gt; rateInfoList = targets.stream()\n                .map(currency -&gt; new RateInfoDto(currency, rates.get(currency)))\n                .collect(Collectors.toList());\n\n        RateDto expected = RateDto.builder()\n                .id(mockedRateEntity.getId())\n                .base(mockedRateEntity.getBase())\n                .date(mockedRateEntity.getDate())\n                .rates(rateInfoList)\n                .build();\n\n        // Mock repository behavior\n        when(rateRepository.findOneByDate(date)).thenReturn(Optional.of(mockedRateEntity));\n\n\n        // Call the method\n        RateDto result = rateService.calculateRate(base, targets, date);\n\n        // Verify the result\n        assertThat(result.getBase()).isEqualTo(expected.getBase());\n        assertThat(result.getDate()).isEqualTo(expected.getDate());\n        assertThat(result.getRates()).hasSize(2);\n        assertThat(result.getRates()).containsExactlyInAnyOrder(\n                new RateInfoDto(EnumCurrency.USD, 1.2),\n                new RateInfoDto(EnumCurrency.GBP, 0.9)\n        );\n\n        // Verify repository method was called\n        verify(rateRepository, times(1)).findOneByDate(date);\n\n        // The saveRatesFromApi method won't be run because the rateRepository.findOneByDate return the mockedRateEntity\n        verify(restTemplate, times(0)).exchange(\n                anyString(),\n                eq(HttpMethod.GET),\n                any(HttpEntity.class),\n                eq(RateResponse.class)\n        );\n    }\n\n    @Test\n    void whenCalculateRate_andRateRepositoryNotFound() {\n        // Mocked data\n        EnumCurrency base = EnumCurrency.EUR;\n        List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\n        LocalDate date = LocalDate.of(2023, 5, 22);\n\n        // Mocked rate entity\n        RateEntity mockedRateEntity = new RateEntity();\n        mockedRateEntity.setBase(base);\n        mockedRateEntity.setDate(date);\n        Map&lt;EnumCurrency, Double&gt; rates = new HashMap&lt;&gt;();\n        rates.put(EnumCurrency.USD, 1.2);\n        rates.put(EnumCurrency.GBP, 0.9);\n        mockedRateEntity.setRates(rates);\n\n        List&lt;RateInfoDto&gt; rateInfoList = targets.stream()\n                .map(currency -&gt; new RateInfoDto(currency, rates.get(currency)))\n                .collect(Collectors.toList());\n\n        RateDto expected = RateDto.builder()\n                .id(mockedRateEntity.getId())\n                .base(mockedRateEntity.getBase())\n                .date(mockedRateEntity.getDate())\n                .rates(rateInfoList)\n                .build();\n\n        // Mock API response\n        RateResponse mockedRateResponse = RateResponse.builder()\n                .base(base)\n                .rates(rates)\n                .date(date)\n                .build();\n\n        ResponseEntity&lt;RateResponse&gt; mockedResponseEntity = ResponseEntity.ok().body(mockedRateResponse);\n\n        // Mock repository behavior\n        when(rateRepository.findOneByDate(date)).thenReturn(Optional.empty()); // Return null to simulate repository not finding the entity\n\n        when(restTemplate.exchange(\n                anyString(),\n                eq(HttpMethod.GET),\n                any(HttpEntity.class),\n                eq(RateResponse.class)\n        )).thenReturn(mockedResponseEntity);\n\n        // Mock saveRatesFromApi behavior\n        when(rateRepository.save(any(RateEntity.class))).thenReturn(mockedRateEntity);\n\n        // Call the method\n        RateDto result = rateService.calculateRate(base, targets, date);\n\n        // Verify the result\n        assertThat(result.getBase()).isEqualTo(expected.getBase());\n        assertThat(result.getDate()).isEqualTo(expected.getDate());\n        assertThat(result.getRates()).hasSize(2);\n        assertThat(result.getRates()).containsExactlyInAnyOrder(\n                new RateInfoDto(EnumCurrency.USD, 1.2),\n                new RateInfoDto(EnumCurrency.GBP, 0.9)\n        );\n\n        // Verify repository method was called\n        verify(rateRepository, times(1)).findOneByDate(date);\n        verify(rateRepository, times(1)).save(any(RateEntity.class));\n\n        // Verify restTemplate.exchange was called\n        verify(restTemplate, times(1)).exchange(\n                anyString(),\n                eq(HttpMethod.GET),\n                any(HttpEntity.class),\n                eq(RateResponse.class)\n        );\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":650,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76310493,"answer_count":2,"score":1,"last_activity_date":1686953722,"creation_date":1684779043,"question_id":76308882,"body_markdown":"I have a problem to write the JUnit Test with the usage of resttemplate.\r\n\r\nWhen I run the `testCalculateRate`, I got this error message shown below\r\n\r\n```java\r\njava.lang.NullPointerException: Cannot invoke &quot;org.springframework.http.ResponseEntity.getBody()&quot; because &quot;responseEntity&quot; is null \r\n``` \r\nI noticed that `ResponseEntity&lt;RateResponse&gt; responseEntity = restTemplate.exchange(url, HttpMethod.GET, headersEntity, RateResponse.class);` returns `null`.\r\n\r\n\r\n\r\nNext, I debug the code\r\n\r\nHere is saveRatesFromApi method of RateService\r\n\r\n    private RateEntity saveRatesFromApi(LocalDate rateDate, EnumCurrency base, List&lt;EnumCurrency&gt; targets) {\r\n    \r\n            log.info(&quot;ExchangeService | saveRatesFromApi is called&quot;);\r\n    \r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\r\n            headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n            final HttpEntity&lt;String&gt; headersEntity = new HttpEntity&lt;&gt;(headers);\r\n            String url = getExchangeUrl(rateDate, base, targets);\r\n    \r\n            ResponseEntity&lt;RateResponse&gt; responseEntity = restTemplate.exchange(url, HttpMethod.GET, headersEntity, RateResponse.class);  ---&gt; ERROR LINE\r\n    \r\n            RateResponse rates = responseEntity.getBody();\r\n            RateEntity entity = convert(rates);\r\n            return rateRepository.save(entity);\r\n        }\r\n\r\nHere RateServiceTest shown below\r\n\r\n```java\r\n    import static com.exchangeapi.currencyexchange.constants.Constants.EXCHANGE_API_API_KEY;\r\n    import static com.exchangeapi.currencyexchange.constants.Constants.EXCHANGE_API_BASE_URL;\r\n    \r\n    class RateServiceTest extends BaseServiceTest {\r\n    \r\n        @Mock\r\n        private RateRepository rateRepository;\r\n    \r\n        @Mock\r\n        private RestTemplate restTemplate;\r\n    \r\n        @InjectMocks\r\n        private RateService rateService;\r\n    \r\n        @Test\r\n        void testCalculateRate() {\r\n    \r\n            // Initialize mocks\r\n            MockitoAnnotations.openMocks(this);\r\n    \r\n            // Mocked data\r\n            EnumCurrency base = EnumCurrency.EUR;\r\n            List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\r\n            LocalDate date = LocalDate.of(2023, 5, 22);\r\n    \r\n            // Mocked rate entity\r\n            RateEntity mockedRateEntity = new RateEntity();\r\n            mockedRateEntity.setBase(base);\r\n            mockedRateEntity.setDate(date);\r\n            Map&lt;EnumCurrency, Double&gt; rates = new HashMap&lt;&gt;();\r\n            rates.put(EnumCurrency.USD, 1.2);\r\n            rates.put(EnumCurrency.GBP, 0.9);\r\n            mockedRateEntity.setRates(rates);\r\n    \r\n            // Mock repository behavior\r\n            when(rateRepository.findOneByDate(date)).thenReturn(Optional.of(mockedRateEntity));\r\n    \r\n            // Mock API response\r\n            RateResponse mockedRateResponse = RateResponse.builder()\r\n                    .base(base)\r\n                    .rates(rates)\r\n                    .date(date)\r\n                    .build();\r\n    \r\n            // Create a HttpHeaders object and set the &quot;apikey&quot; header\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\r\n    \r\n            // Create a mock response entity with the expected headers and body\r\n            ResponseEntity&lt;RateResponse&gt; mockedResponseEntity = ResponseEntity.ok()\r\n                    .headers(headers)\r\n                    .body(mockedRateResponse);\r\n    \r\n            // Mock RestTemplate behavior\r\n            when(restTemplate.exchange(\r\n                    anyString(),\r\n                    eq(HttpMethod.GET),\r\n                    any(HttpEntity.class),\r\n                    eq(RateResponse.class)\r\n            )).thenReturn(mockedResponseEntity);\r\n    \r\n            // Call the method\r\n            RateDto result = rateService.calculateRate(base, targets, date);\r\n    \r\n            // Verify repository method was called\r\n            verify(rateRepository, times(1)).findOneByDate(date);\r\n    \r\n            // Verify API call was made\r\n            String expectedUrl = getExchangeUrl(date, base, targets);\r\n            HttpHeaders expectedHeaders = new HttpHeaders();\r\n            expectedHeaders.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\r\n            HttpEntity&lt;String&gt; expectedHttpEntity = new HttpEntity&lt;&gt;(expectedHeaders);\r\n            verify(restTemplate, times(1)).exchange(\r\n                    eq(expectedUrl),\r\n                    eq(HttpMethod.GET),\r\n                    eq(expectedHttpEntity),\r\n                    eq(RateResponse.class)\r\n            );\r\n    \r\n            // Verify the result\r\n            assertThat(result.getBase()).isEqualTo(base);\r\n            assertThat(result.getDate()).isEqualTo(date);\r\n            assertThat(result.getRates()).hasSize(2);\r\n            assertThat(result.getRates()).containsExactlyInAnyOrder(\r\n                    new RateInfoDto(EnumCurrency.USD, 1.2),\r\n                    new RateInfoDto(EnumCurrency.GBP, 0.9)\r\n            );\r\n        }\r\n    \r\n        private String getExchangeUrl(LocalDate rateDate, EnumCurrency base, List&lt;EnumCurrency&gt; targets) {\r\n    \r\n            String symbols = String.join(&quot;%2C&quot;, targets.stream().map(EnumCurrency::name).toArray(String[]::new));\r\n            return EXCHANGE_API_BASE_URL + rateDate + &quot;?symbols=&quot; + symbols + &quot;&amp;base=&quot; + base;\r\n        }\r\n    }\r\n```\r\n\r\nHow can I fix the issue?\r\n\r\nHere is the repo : [Link][1]\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/currencyexchange","title":"Spring Boot JUnit Test - Resttemplate returns null in ServiceTest (How to mock restTemplate exchange)","body":"<p>I have a problem to write the JUnit Test with the usage of resttemplate.</p>\n<p>When I run the <code>testCalculateRate</code>, I got this error message shown below</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.NullPointerException: Cannot invoke &quot;org.springframework.http.ResponseEntity.getBody()&quot; because &quot;responseEntity&quot; is null \n</code></pre>\n<p>I noticed that <code>ResponseEntity&lt;RateResponse&gt; responseEntity = restTemplate.exchange(url, HttpMethod.GET, headersEntity, RateResponse.class);</code> returns <code>null</code>.</p>\n<p>Next, I debug the code</p>\n<p>Here is saveRatesFromApi method of RateService</p>\n<pre><code>private RateEntity saveRatesFromApi(LocalDate rateDate, EnumCurrency base, List&lt;EnumCurrency&gt; targets) {\n\n        log.info(&quot;ExchangeService | saveRatesFromApi is called&quot;);\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n        final HttpEntity&lt;String&gt; headersEntity = new HttpEntity&lt;&gt;(headers);\n        String url = getExchangeUrl(rateDate, base, targets);\n\n        ResponseEntity&lt;RateResponse&gt; responseEntity = restTemplate.exchange(url, HttpMethod.GET, headersEntity, RateResponse.class);  ---&gt; ERROR LINE\n\n        RateResponse rates = responseEntity.getBody();\n        RateEntity entity = convert(rates);\n        return rateRepository.save(entity);\n    }\n</code></pre>\n<p>Here RateServiceTest shown below</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import static com.exchangeapi.currencyexchange.constants.Constants.EXCHANGE_API_API_KEY;\n    import static com.exchangeapi.currencyexchange.constants.Constants.EXCHANGE_API_BASE_URL;\n    \n    class RateServiceTest extends BaseServiceTest {\n    \n        @Mock\n        private RateRepository rateRepository;\n    \n        @Mock\n        private RestTemplate restTemplate;\n    \n        @InjectMocks\n        private RateService rateService;\n    \n        @Test\n        void testCalculateRate() {\n    \n            // Initialize mocks\n            MockitoAnnotations.openMocks(this);\n    \n            // Mocked data\n            EnumCurrency base = EnumCurrency.EUR;\n            List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\n            LocalDate date = LocalDate.of(2023, 5, 22);\n    \n            // Mocked rate entity\n            RateEntity mockedRateEntity = new RateEntity();\n            mockedRateEntity.setBase(base);\n            mockedRateEntity.setDate(date);\n            Map&lt;EnumCurrency, Double&gt; rates = new HashMap&lt;&gt;();\n            rates.put(EnumCurrency.USD, 1.2);\n            rates.put(EnumCurrency.GBP, 0.9);\n            mockedRateEntity.setRates(rates);\n    \n            // Mock repository behavior\n            when(rateRepository.findOneByDate(date)).thenReturn(Optional.of(mockedRateEntity));\n    \n            // Mock API response\n            RateResponse mockedRateResponse = RateResponse.builder()\n                    .base(base)\n                    .rates(rates)\n                    .date(date)\n                    .build();\n    \n            // Create a HttpHeaders object and set the &quot;apikey&quot; header\n            HttpHeaders headers = new HttpHeaders();\n            headers.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\n    \n            // Create a mock response entity with the expected headers and body\n            ResponseEntity&lt;RateResponse&gt; mockedResponseEntity = ResponseEntity.ok()\n                    .headers(headers)\n                    .body(mockedRateResponse);\n    \n            // Mock RestTemplate behavior\n            when(restTemplate.exchange(\n                    anyString(),\n                    eq(HttpMethod.GET),\n                    any(HttpEntity.class),\n                    eq(RateResponse.class)\n            )).thenReturn(mockedResponseEntity);\n    \n            // Call the method\n            RateDto result = rateService.calculateRate(base, targets, date);\n    \n            // Verify repository method was called\n            verify(rateRepository, times(1)).findOneByDate(date);\n    \n            // Verify API call was made\n            String expectedUrl = getExchangeUrl(date, base, targets);\n            HttpHeaders expectedHeaders = new HttpHeaders();\n            expectedHeaders.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\n            HttpEntity&lt;String&gt; expectedHttpEntity = new HttpEntity&lt;&gt;(expectedHeaders);\n            verify(restTemplate, times(1)).exchange(\n                    eq(expectedUrl),\n                    eq(HttpMethod.GET),\n                    eq(expectedHttpEntity),\n                    eq(RateResponse.class)\n            );\n    \n            // Verify the result\n            assertThat(result.getBase()).isEqualTo(base);\n            assertThat(result.getDate()).isEqualTo(date);\n            assertThat(result.getRates()).hasSize(2);\n            assertThat(result.getRates()).containsExactlyInAnyOrder(\n                    new RateInfoDto(EnumCurrency.USD, 1.2),\n                    new RateInfoDto(EnumCurrency.GBP, 0.9)\n            );\n        }\n    \n        private String getExchangeUrl(LocalDate rateDate, EnumCurrency base, List&lt;EnumCurrency&gt; targets) {\n    \n            String symbols = String.join(&quot;%2C&quot;, targets.stream().map(EnumCurrency::name).toArray(String[]::new));\n            return EXCHANGE_API_BASE_URL + rateDate + &quot;?symbols=&quot; + symbols + &quot;&amp;base=&quot; + base;\n        }\n    }\n</code></pre>\n<p>How can I fix the issue?</p>\n<p>Here is the repo : <a href=\"https://github.com/Rapter1990/currencyexchange\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java","android","file","android-studio","explorer"],"answers":[{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1599828738,"creation_date":1599828738,"answer_id":63847466,"question_id":63847083,"body_markdown":"In onActivityResult() :\r\n\r\n    InputStream dataStream = getContentResolver().openInputStream(data.getData());\r\n\r\nThrow away that getPath() function.\r\n\r\nThis works for all uries.","title":"Error in Android Studio with File Chooser in Download Folder","body":"<p>In onActivityResult() :</p>\n<pre><code>InputStream dataStream = getContentResolver().openInputStream(data.getData());\n</code></pre>\n<p>Throw away that getPath() function.</p>\n<p>This works for all uries.</p>\n"},{"tags":[],"owner":{"account_id":13000947,"reputation":99,"user_id":9397088,"display_name":"Anjana Rodrigo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1622718026,"creation_date":1622718026,"answer_id":67820214,"question_id":63847083,"body_markdown":"\r\n\r\nThe only problem is getting the path of the download directory or msf and NumberFormat exception, Try this one. It worked for me correctly\r\n\r\n    package com.example.bookingmelbourne;\r\n    import android.content.ContentUris;\r\n    import android.content.Context;\r\n    import android.database.Cursor;\r\n    import android.net.Uri;\r\n    import android.os.Build;\r\n    import android.os.Environment;\r\n    import android.provider.DocumentsContract;\r\n    import android.provider.MediaStore;\r\n    import android.provider.OpenableColumns;\r\n    import android.text.TextUtils;\r\n    import android.util.Log;\r\n    \r\n    import androidx.annotation.Nullable;\r\n    import androidx.annotation.WorkerThread;\r\n    \r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    \r\n    public class FileUtils {\r\n        private static final String TAG = &quot;FileUtils&quot;;\r\n    @WorkerThread\r\n    @Nullable\r\n    public static String getReadablePathFromUri(Context context, Uri uri) {\r\n    \r\n        String path = null;\r\n        if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) {\r\n            path = uri.getPath();\r\n        }\r\n    \r\n        if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.KITKAT) {\r\n            path = getPath(context, uri);\r\n        }\r\n    \r\n        if (TextUtils.isEmpty(path)) {\r\n            return path;\r\n        }\r\n    \r\n        Log.d(TAG, &quot;get path from uri: &quot; + path);\r\n        if (!isReadablePath(path)) {\r\n            int index = path.lastIndexOf(&quot;/&quot;);\r\n            String name = path.substring(index + 1);\r\n            String dstPath = context.getCacheDir().getAbsolutePath() + File.separator + name;\r\n            if (copyFile(context, uri, dstPath)) {\r\n                path = dstPath;\r\n                Log.d(TAG, &quot;copy file success: &quot; + path);\r\n            } else {\r\n                Log.d(TAG, &quot;copy file fail!&quot;);\r\n            } \r\n        }\r\n        return path;\r\n    }\r\n    \r\n    public static String getPath(final Context context, final Uri uri) {\r\n        final boolean isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT;\r\n        if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) {\r\n            if (isExternalStorageDocument(uri)) {\r\n                final String docId = DocumentsContract.getDocumentId(uri);\r\n                Log.d(&quot;External Storage&quot;, docId);\r\n                final String[] split = docId.split(&quot;:&quot;);\r\n                final String type = split[0];\r\n    \r\n                if (&quot;primary&quot;.equalsIgnoreCase(type)) {\r\n                    return Environment.getExternalStorageDirectory() + &quot;/&quot; + split[1];\r\n                }\r\n            } else if (isDownloadsDocument(uri)) {\r\n    \r\n                String dstPath = context.getCacheDir().getAbsolutePath() + File.separator + getFileName(context,uri);\r\n    \r\n                 if (copyFile(context, uri, dstPath)) {\r\n                    Log.d(TAG, &quot;copy file success: &quot; + dstPath);\r\n                    return dstPath;\r\n    \r\n                } else {\r\n                    Log.d(TAG, &quot;copy file fail!&quot;);\r\n                }\r\n    \r\n    \r\n            } else if (isMediaDocument(uri)) {\r\n                final String docId = DocumentsContract.getDocumentId(uri);\r\n                final String[] split = docId.split(&quot;:&quot;);\r\n                final String type = split[0];\r\n    \r\n                Uri contentUri = null;\r\n                if (&quot;image&quot;.equals(type)) {\r\n                    contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\r\n                } else if (&quot;video&quot;.equals(type)) {\r\n                    contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\r\n                } else if (&quot;audio&quot;.equals(type)) {\r\n                    contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\r\n                }\r\n    \r\n                final String selection = &quot;_id=?&quot;;\r\n                final String[] selectionArgs = new String[]{split[1]};\r\n                return getDataColumn(context, contentUri, selection, selectionArgs);\r\n            }\r\n        } else if (&quot;content&quot;.equalsIgnoreCase(uri.getScheme())) {\r\n            return getDataColumn(context, uri, null, null);\r\n        } else if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) {\r\n            return uri.getPath();\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    public static String getFileName(Context context, Uri uri) {\r\n    \r\n        Cursor cursor = context.getContentResolver().query(uri,null,null,null,null);\r\n        int nameindex = cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);\r\n        cursor.moveToFirst();\r\n    \r\n        return  cursor.getString(nameindex);\r\n    }\r\n    \r\n    \r\n    private static String getDataColumn(Context context, Uri uri, String selection,\r\n                                        String[] selectionArgs) {\r\n        Cursor cursor = null;\r\n        final String column = &quot;_data&quot;;\r\n        final String[] projection = {column};\r\n    \r\n        try {\r\n            cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs,\r\n                    null);\r\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\r\n                final int column_index = cursor.getColumnIndexOrThrow(column);\r\n                return cursor.getString(column_index);\r\n            }\r\n        } finally {\r\n            if (cursor != null)\r\n                cursor.close();\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    private static boolean isExternalStorageDocument(Uri uri) {\r\n        return &quot;com.android.externalstorage.documents&quot;.equals(uri.getAuthority());\r\n    }\r\n    \r\n    private static boolean isDownloadsDocument(Uri uri) {\r\n        return &quot;com.android.providers.downloads.documents&quot;.equals(uri.getAuthority());\r\n    }\r\n    \r\n    private static boolean isMediaDocument(Uri uri) {\r\n        return &quot;com.android.providers.media.documents&quot;.equals(uri.getAuthority());\r\n    }\r\n    \r\n    private static boolean isReadablePath(@Nullable String path) {\r\n        if (TextUtils.isEmpty(path)) {\r\n            return false;\r\n        }\r\n        boolean isLocalPath;\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n            if (!TextUtils.isEmpty(path)) {\r\n                File localFile = new File(path);\r\n                isLocalPath = localFile.exists() &amp;&amp; localFile.canRead();\r\n            } else {\r\n                isLocalPath = false;\r\n            }\r\n        } else {\r\n            isLocalPath = path.startsWith(File.separator);\r\n        }\r\n        return isLocalPath;\r\n    }\r\n    \r\n    private static boolean copyFile(Context context, Uri uri, String dstPath) {\r\n        InputStream inputStream = null;\r\n        OutputStream outputStream = null;\r\n        try {\r\n            inputStream = context.getContentResolver().openInputStream(uri);\r\n            outputStream = new FileOutputStream(dstPath);\r\n    \r\n            byte[] buff = new byte[100 * 1024];\r\n            int len;\r\n            while ((len = inputStream.read(buff)) != -1) {\r\n                outputStream.write(buff, 0, len);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        } finally {\r\n            if (inputStream != null) {\r\n                try {\r\n                    inputStream.close();\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n    \r\n            if (outputStream != null) {\r\n                try {\r\n                    outputStream.close();\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    \r\n      }\r\n\r\nAfter that, you can call this method passing context and uri objects\r\n\r\n  \r\n\r\n     String realPath = FileUtils.getReadablePathFromUri(context,uri)\r\n\r\n","title":"Error in Android Studio with File Chooser in Download Folder","body":"<p>The only problem is getting the path of the download directory or msf and NumberFormat exception, Try this one. It worked for me correctly</p>\n<pre><code>package com.example.bookingmelbourne;\nimport android.content.ContentUris;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.net.Uri;\nimport android.os.Build;\nimport android.os.Environment;\nimport android.provider.DocumentsContract;\nimport android.provider.MediaStore;\nimport android.provider.OpenableColumns;\nimport android.text.TextUtils;\nimport android.util.Log;\n\nimport androidx.annotation.Nullable;\nimport androidx.annotation.WorkerThread;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\npublic class FileUtils {\n    private static final String TAG = &quot;FileUtils&quot;;\n@WorkerThread\n@Nullable\npublic static String getReadablePathFromUri(Context context, Uri uri) {\n\n    String path = null;\n    if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) {\n        path = uri.getPath();\n    }\n\n    if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.KITKAT) {\n        path = getPath(context, uri);\n    }\n\n    if (TextUtils.isEmpty(path)) {\n        return path;\n    }\n\n    Log.d(TAG, &quot;get path from uri: &quot; + path);\n    if (!isReadablePath(path)) {\n        int index = path.lastIndexOf(&quot;/&quot;);\n        String name = path.substring(index + 1);\n        String dstPath = context.getCacheDir().getAbsolutePath() + File.separator + name;\n        if (copyFile(context, uri, dstPath)) {\n            path = dstPath;\n            Log.d(TAG, &quot;copy file success: &quot; + path);\n        } else {\n            Log.d(TAG, &quot;copy file fail!&quot;);\n        } \n    }\n    return path;\n}\n\npublic static String getPath(final Context context, final Uri uri) {\n    final boolean isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT;\n    if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) {\n        if (isExternalStorageDocument(uri)) {\n            final String docId = DocumentsContract.getDocumentId(uri);\n            Log.d(&quot;External Storage&quot;, docId);\n            final String[] split = docId.split(&quot;:&quot;);\n            final String type = split[0];\n\n            if (&quot;primary&quot;.equalsIgnoreCase(type)) {\n                return Environment.getExternalStorageDirectory() + &quot;/&quot; + split[1];\n            }\n        } else if (isDownloadsDocument(uri)) {\n\n            String dstPath = context.getCacheDir().getAbsolutePath() + File.separator + getFileName(context,uri);\n\n             if (copyFile(context, uri, dstPath)) {\n                Log.d(TAG, &quot;copy file success: &quot; + dstPath);\n                return dstPath;\n\n            } else {\n                Log.d(TAG, &quot;copy file fail!&quot;);\n            }\n\n\n        } else if (isMediaDocument(uri)) {\n            final String docId = DocumentsContract.getDocumentId(uri);\n            final String[] split = docId.split(&quot;:&quot;);\n            final String type = split[0];\n\n            Uri contentUri = null;\n            if (&quot;image&quot;.equals(type)) {\n                contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\n            } else if (&quot;video&quot;.equals(type)) {\n                contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n            } else if (&quot;audio&quot;.equals(type)) {\n                contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\n            }\n\n            final String selection = &quot;_id=?&quot;;\n            final String[] selectionArgs = new String[]{split[1]};\n            return getDataColumn(context, contentUri, selection, selectionArgs);\n        }\n    } else if (&quot;content&quot;.equalsIgnoreCase(uri.getScheme())) {\n        return getDataColumn(context, uri, null, null);\n    } else if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) {\n        return uri.getPath();\n    }\n    return null;\n}\n\npublic static String getFileName(Context context, Uri uri) {\n\n    Cursor cursor = context.getContentResolver().query(uri,null,null,null,null);\n    int nameindex = cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);\n    cursor.moveToFirst();\n\n    return  cursor.getString(nameindex);\n}\n\n\nprivate static String getDataColumn(Context context, Uri uri, String selection,\n                                    String[] selectionArgs) {\n    Cursor cursor = null;\n    final String column = &quot;_data&quot;;\n    final String[] projection = {column};\n\n    try {\n        cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs,\n                null);\n        if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n            final int column_index = cursor.getColumnIndexOrThrow(column);\n            return cursor.getString(column_index);\n        }\n    } finally {\n        if (cursor != null)\n            cursor.close();\n    }\n    return null;\n}\n\nprivate static boolean isExternalStorageDocument(Uri uri) {\n    return &quot;com.android.externalstorage.documents&quot;.equals(uri.getAuthority());\n}\n\nprivate static boolean isDownloadsDocument(Uri uri) {\n    return &quot;com.android.providers.downloads.documents&quot;.equals(uri.getAuthority());\n}\n\nprivate static boolean isMediaDocument(Uri uri) {\n    return &quot;com.android.providers.media.documents&quot;.equals(uri.getAuthority());\n}\n\nprivate static boolean isReadablePath(@Nullable String path) {\n    if (TextUtils.isEmpty(path)) {\n        return false;\n    }\n    boolean isLocalPath;\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n        if (!TextUtils.isEmpty(path)) {\n            File localFile = new File(path);\n            isLocalPath = localFile.exists() &amp;&amp; localFile.canRead();\n        } else {\n            isLocalPath = false;\n        }\n    } else {\n        isLocalPath = path.startsWith(File.separator);\n    }\n    return isLocalPath;\n}\n\nprivate static boolean copyFile(Context context, Uri uri, String dstPath) {\n    InputStream inputStream = null;\n    OutputStream outputStream = null;\n    try {\n        inputStream = context.getContentResolver().openInputStream(uri);\n        outputStream = new FileOutputStream(dstPath);\n\n        byte[] buff = new byte[100 * 1024];\n        int len;\n        while ((len = inputStream.read(buff)) != -1) {\n            outputStream.write(buff, 0, len);\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n        return false;\n    } finally {\n        if (inputStream != null) {\n            try {\n                inputStream.close();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n\n        if (outputStream != null) {\n            try {\n                outputStream.close();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n    }\n    return true;\n}\n\n  }\n</code></pre>\n<p>After that, you can call this method passing context and uri objects</p>\n<pre><code> String realPath = FileUtils.getReadablePathFromUri(context,uri)\n</code></pre>\n"}],"owner":{"account_id":18999437,"reputation":2463,"user_id":13867124,"display_name":"AztecCodes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2315,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1686953445,"creation_date":1599827194,"question_id":63847083,"body_markdown":"**My Problem**\r\n\r\nI am currently developing an Android application with Android Studio.\r\nTo choose a file the user clicks on a button, the explorer opens and he can select a file.\r\nFor this process I used a helper class called FileChooser.Java. This whole system functions very well as long as the user doesn&#39;t select a file from the Download folder.\r\n\r\nIf the users tries to select a file from the Download folder this happens:\r\n\r\n*NumberFormatException: for input string: &quot;msf:80123&quot;*\r\n\r\nThe URL the FileChooser returns:\r\n *content://com.android.providers.downloads.documents/document/msf:80662*\r\n\r\nThis is because the helper class expects a long type. Removing the msf: and adding the ID to the end doesn&#39;t work either. It seems like Android adds this msf: tag to everything in the Download folder.\r\n\r\nI am looking for a valid solution to call files from the Download folder too.\r\n\r\n**The Call**\r\n```\r\nUri selectedFile = data.getData();\r\nInputStream dataStream = new FileInputStream(FileChooser.getPath(getContext(), selectedFile));\r\n```\r\n**Exception Call in FileChooser Class**\r\n\r\n```\r\n final Uri contentUri = ContentUris.withAppendedId(\r\n       Uri.parse(&quot;content://downloads/public_downloads&quot;), Long.valueOf(id));\r\n```\r\n\r\n**Helper Class FileChooser**\r\n```\r\npackage com.example.dsvconverter.helper;\r\n\r\nimport android.content.ContentUris;\r\nimport android.content.Context;\r\nimport android.database.Cursor;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Environment;\r\nimport android.provider.DocumentsContract;\r\nimport android.provider.MediaStore;\r\n\r\n\r\npublic class FileChooser {\r\n\r\n    /**\r\n     * Get a file path from a Uri. This will get the the path for Storage Access\r\n     * Framework Documents, as well as the _data field for the MediaStore and\r\n     * other file-based ContentProviders.\r\n     *\r\n     * @param context The context.\r\n     * @param uri The Uri to query.\r\n     * @author paulburke\r\n     */\r\n    public static String getPath(final Context context, final Uri uri) {\r\n\r\n        final boolean isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT;\r\n\r\n        // DocumentProvider\r\n        if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) {\r\n            // ExternalStorageProvider\r\n            if (isExternalStorageDocument(uri)) {\r\n                final String docId = DocumentsContract.getDocumentId(uri);\r\n                final String[] split = docId.split(&quot;:&quot;);\r\n                final String type = split[0];\r\n\r\n                if (&quot;primary&quot;.equalsIgnoreCase(type)) {\r\n                    return Environment.getExternalStorageDirectory() + &quot;/&quot; + split[1];\r\n                }\r\n\r\n                // TODO handle non-primary volumes\r\n            }\r\n            // DownloadsProvider\r\n            else if (isDownloadsDocument(uri)) {\r\n\r\n                final String id = DocumentsContract.getDocumentId(uri);\r\n                final String[] split = id.split(&quot;:&quot;);\r\n                final String type = split[0];\r\n\r\n                final Uri contentUri = ContentUris.withAppendedId(\r\n                        Uri.parse(&quot;content://downloads/public_downloads&quot;), Long.valueOf(id));\r\n\r\n                return getDataColumn(context, contentUri, null, null);\r\n            }\r\n            // MediaProvider\r\n            else if (isMediaDocument(uri)) {\r\n                final String docId = DocumentsContract.getDocumentId(uri);\r\n                final String[] split = docId.split(&quot;:&quot;);\r\n                final String type = split[0];\r\n\r\n                Uri contentUri = null;\r\n                if (&quot;image&quot;.equals(type)) {\r\n                    contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\r\n                } else if (&quot;video&quot;.equals(type)) {\r\n                    contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\r\n                } else if (&quot;audio&quot;.equals(type)) {\r\n                    contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\r\n                }\r\n\r\n                final String selection = &quot;_id=?&quot;;\r\n                final String[] selectionArgs = new String[] {\r\n                        split[1]\r\n                };\r\n\r\n                return getDataColumn(context, contentUri, selection, selectionArgs);\r\n            }\r\n        }\r\n        // MediaStore (and general)\r\n        else if (&quot;content&quot;.equalsIgnoreCase(uri.getScheme())) {\r\n            return getDataColumn(context, uri, null, null);\r\n        }\r\n        // File\r\n        else if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) {\r\n            return uri.getPath();\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Get the value of the data column for this Uri. This is useful for\r\n     * MediaStore Uris, and other file-based ContentProviders.\r\n     *\r\n     * @param context The context.\r\n     * @param uri The Uri to query.\r\n     * @param selection (Optional) Filter used in the query.\r\n     * @param selectionArgs (Optional) Selection arguments used in the query.\r\n     * @return The value of the _data column, which is typically a file path.\r\n     */\r\n    public static String getDataColumn(Context context, Uri uri, String selection,\r\n                                       String[] selectionArgs) {\r\n\r\n        Cursor cursor = null;\r\n        final String column = &quot;_data&quot;;\r\n        final String[] projection = {\r\n                column\r\n        };\r\n\r\n        try {\r\n            cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs,\r\n                    null);\r\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\r\n                final int column_index = cursor.getColumnIndexOrThrow(column);\r\n                return cursor.getString(column_index);\r\n            }\r\n        } finally {\r\n            if (cursor != null)\r\n                cursor.close();\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    /**\r\n     * @param uri The Uri to check.\r\n     * @return Whether the Uri authority is ExternalStorageProvider.\r\n     */\r\n    public static boolean isExternalStorageDocument(Uri uri) {\r\n        return &quot;com.android.externalstorage.documents&quot;.equals(uri.getAuthority());\r\n    }\r\n\r\n    /**\r\n     * @param uri The Uri to check.\r\n     * @return Whether the Uri authority is DownloadsProvider.\r\n     */\r\n    public static boolean isDownloadsDocument(Uri uri) {\r\n        return &quot;com.android.providers.downloads.documents&quot;.equals(uri.getAuthority());\r\n    }\r\n\r\n    /**\r\n     * @param uri The Uri to check.\r\n     * @return Whether the Uri authority is MediaProvider.\r\n     */\r\n    public static boolean isMediaDocument(Uri uri) {\r\n        return &quot;com.android.providers.media.documents&quot;.equals(uri.getAuthority());\r\n    }\r\n}\r\n```\r\n\r\n**Update:**\r\nThe code provided by @blackapps worked, however now I have a new problem.\r\n\r\n**Blackapps Code:**\r\n\r\n    InputStream dataStream = getContentResolver().openInputStream(data.getData());\r\n\r\nThis solution works, however something is different now. I am making a **PGP Tool** and this `InputStream` contains a **Public Key** read from the file selected. The **PGP Library** doesn&#39;t recognize it as a **Public Key** anymore if I create the `InputStream` with your way. However if I print it into the console, it looks correct and same.\r\n\r\n**Question:**\r\n\r\nWhy does @Blackapps solution work, but the library doesn&#39;t recognize it as a Public Key anymore, even if the printed string is 1:1 same?","title":"Error in Android Studio with File Chooser in Download Folder","body":"<p><strong>My Problem</strong></p>\n<p>I am currently developing an Android application with Android Studio.\nTo choose a file the user clicks on a button, the explorer opens and he can select a file.\nFor this process I used a helper class called FileChooser.Java. This whole system functions very well as long as the user doesn't select a file from the Download folder.</p>\n<p>If the users tries to select a file from the Download folder this happens:</p>\n<p><em>NumberFormatException: for input string: &quot;msf:80123&quot;</em></p>\n<p>The URL the FileChooser returns:\n<em>content://com.android.providers.downloads.documents/document/msf:80662</em></p>\n<p>This is because the helper class expects a long type. Removing the msf: and adding the ID to the end doesn't work either. It seems like Android adds this msf: tag to everything in the Download folder.</p>\n<p>I am looking for a valid solution to call files from the Download folder too.</p>\n<p><strong>The Call</strong></p>\n<pre><code>Uri selectedFile = data.getData();\nInputStream dataStream = new FileInputStream(FileChooser.getPath(getContext(), selectedFile));\n</code></pre>\n<p><strong>Exception Call in FileChooser Class</strong></p>\n<pre><code> final Uri contentUri = ContentUris.withAppendedId(\n       Uri.parse(&quot;content://downloads/public_downloads&quot;), Long.valueOf(id));\n</code></pre>\n<p><strong>Helper Class FileChooser</strong></p>\n<pre><code>package com.example.dsvconverter.helper;\n\nimport android.content.ContentUris;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.net.Uri;\nimport android.os.Build;\nimport android.os.Environment;\nimport android.provider.DocumentsContract;\nimport android.provider.MediaStore;\n\n\npublic class FileChooser {\n\n    /**\n     * Get a file path from a Uri. This will get the the path for Storage Access\n     * Framework Documents, as well as the _data field for the MediaStore and\n     * other file-based ContentProviders.\n     *\n     * @param context The context.\n     * @param uri The Uri to query.\n     * @author paulburke\n     */\n    public static String getPath(final Context context, final Uri uri) {\n\n        final boolean isKitKat = Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT;\n\n        // DocumentProvider\n        if (isKitKat &amp;&amp; DocumentsContract.isDocumentUri(context, uri)) {\n            // ExternalStorageProvider\n            if (isExternalStorageDocument(uri)) {\n                final String docId = DocumentsContract.getDocumentId(uri);\n                final String[] split = docId.split(&quot;:&quot;);\n                final String type = split[0];\n\n                if (&quot;primary&quot;.equalsIgnoreCase(type)) {\n                    return Environment.getExternalStorageDirectory() + &quot;/&quot; + split[1];\n                }\n\n                // TODO handle non-primary volumes\n            }\n            // DownloadsProvider\n            else if (isDownloadsDocument(uri)) {\n\n                final String id = DocumentsContract.getDocumentId(uri);\n                final String[] split = id.split(&quot;:&quot;);\n                final String type = split[0];\n\n                final Uri contentUri = ContentUris.withAppendedId(\n                        Uri.parse(&quot;content://downloads/public_downloads&quot;), Long.valueOf(id));\n\n                return getDataColumn(context, contentUri, null, null);\n            }\n            // MediaProvider\n            else if (isMediaDocument(uri)) {\n                final String docId = DocumentsContract.getDocumentId(uri);\n                final String[] split = docId.split(&quot;:&quot;);\n                final String type = split[0];\n\n                Uri contentUri = null;\n                if (&quot;image&quot;.equals(type)) {\n                    contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;\n                } else if (&quot;video&quot;.equals(type)) {\n                    contentUri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;\n                } else if (&quot;audio&quot;.equals(type)) {\n                    contentUri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;\n                }\n\n                final String selection = &quot;_id=?&quot;;\n                final String[] selectionArgs = new String[] {\n                        split[1]\n                };\n\n                return getDataColumn(context, contentUri, selection, selectionArgs);\n            }\n        }\n        // MediaStore (and general)\n        else if (&quot;content&quot;.equalsIgnoreCase(uri.getScheme())) {\n            return getDataColumn(context, uri, null, null);\n        }\n        // File\n        else if (&quot;file&quot;.equalsIgnoreCase(uri.getScheme())) {\n            return uri.getPath();\n        }\n\n        return null;\n    }\n\n    /**\n     * Get the value of the data column for this Uri. This is useful for\n     * MediaStore Uris, and other file-based ContentProviders.\n     *\n     * @param context The context.\n     * @param uri The Uri to query.\n     * @param selection (Optional) Filter used in the query.\n     * @param selectionArgs (Optional) Selection arguments used in the query.\n     * @return The value of the _data column, which is typically a file path.\n     */\n    public static String getDataColumn(Context context, Uri uri, String selection,\n                                       String[] selectionArgs) {\n\n        Cursor cursor = null;\n        final String column = &quot;_data&quot;;\n        final String[] projection = {\n                column\n        };\n\n        try {\n            cursor = context.getContentResolver().query(uri, projection, selection, selectionArgs,\n                    null);\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n                final int column_index = cursor.getColumnIndexOrThrow(column);\n                return cursor.getString(column_index);\n            }\n        } finally {\n            if (cursor != null)\n                cursor.close();\n        }\n        return null;\n    }\n\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is ExternalStorageProvider.\n     */\n    public static boolean isExternalStorageDocument(Uri uri) {\n        return &quot;com.android.externalstorage.documents&quot;.equals(uri.getAuthority());\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is DownloadsProvider.\n     */\n    public static boolean isDownloadsDocument(Uri uri) {\n        return &quot;com.android.providers.downloads.documents&quot;.equals(uri.getAuthority());\n    }\n\n    /**\n     * @param uri The Uri to check.\n     * @return Whether the Uri authority is MediaProvider.\n     */\n    public static boolean isMediaDocument(Uri uri) {\n        return &quot;com.android.providers.media.documents&quot;.equals(uri.getAuthority());\n    }\n}\n</code></pre>\n<p><strong>Update:</strong>\nThe code provided by @blackapps worked, however now I have a new problem.</p>\n<p><strong>Blackapps Code:</strong></p>\n<pre><code>InputStream dataStream = getContentResolver().openInputStream(data.getData());\n</code></pre>\n<p>This solution works, however something is different now. I am making a <strong>PGP Tool</strong> and this <code>InputStream</code> contains a <strong>Public Key</strong> read from the file selected. The <strong>PGP Library</strong> doesn't recognize it as a <strong>Public Key</strong> anymore if I create the <code>InputStream</code> with your way. However if I print it into the console, it looks correct and same.</p>\n<p><strong>Question:</strong></p>\n<p>Why does @Blackapps solution work, but the library doesn't recognize it as a Public Key anymore, even if the printed string is 1:1 same?</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":2868776,"reputation":20877,"user_id":2462531,"accept_rate":40,"display_name":"Shailendra Madda"},"score":1,"creation_date":1633324986,"post_id":69428278,"comment_id":122719636,"body_markdown":"Can you post your app-level `build.gradle` code here","body":"Can you post your app-level <code>build.gradle</code> code here"},{"owner":{"account_id":2868776,"reputation":20877,"user_id":2462531,"accept_rate":40,"display_name":"Shailendra Madda"},"score":0,"creation_date":1633328806,"post_id":69428278,"comment_id":122720450,"body_markdown":"This might help you: https://stackoverflow.com/a/69069742/2462531","body":"This might help you: <a href=\"https://stackoverflow.com/a/69069742/2462531\">stackoverflow.com/a/69069742/2462531</a>"}],"answers":[{"tags":[],"owner":{"account_id":14750547,"reputation":326,"user_id":10652763,"display_name":"Payam Monsef"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633340291,"creation_date":1633340291,"answer_id":69433838,"question_id":69428278,"body_markdown":"It&#39;s probably caused by room library as it happened to me before.\r\nUsually android studio gives more info about what&#39;s causing the error, you can check the build log and click on the parent error and it will give a hint to fix the problem.\r\n\r\nIf you are using Room please share your dao and entities so we can help.\r\n\r\nIt can be caused by many reasons but you can get more info about it by look into the parent error of &quot;Execution failed for task &#39;:app:kaptDebugKotlin&#39;.&quot;\r\n\r\nsometimes you have to scroll top to see the real failing build error\r\n\r\n[![][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rIW8p.png","title":"Execution failed for task &#39;:app:kaptDebugKotlin&#39;. &gt;","body":"<p>It's probably caused by room library as it happened to me before.\nUsually android studio gives more info about what's causing the error, you can check the build log and click on the parent error and it will give a hint to fix the problem.</p>\n<p>If you are using Room please share your dao and entities so we can help.</p>\n<p>It can be caused by many reasons but you can get more info about it by look into the parent error of &quot;Execution failed for task ':app:kaptDebugKotlin'.&quot;</p>\n<p>sometimes you have to scroll top to see the real failing build error</p>\n<p><a href=\"https://i.stack.imgur.com/rIW8p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rIW8p.png\" alt=\"\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1835910,"reputation":91,"user_id":1666320,"display_name":"ROM"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1633987613,"creation_date":1633987613,"answer_id":69532642,"question_id":69428278,"body_markdown":"Getting the same on the Apple M1 chip. Works on my intel. Very frustrating","title":"Execution failed for task &#39;:app:kaptDebugKotlin&#39;. &gt;","body":"<p>Getting the same on the Apple M1 chip. Works on my intel. Very frustrating</p>\n"},{"tags":[],"owner":{"account_id":10038794,"reputation":802,"user_id":8229399,"display_name":"philoopher97"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637697873,"creation_date":1637697873,"answer_id":70087163,"question_id":69428278,"body_markdown":"I faced the same problem.\r\n\r\nI was using `kapt` annotation processor. Replacing with `annotationProcessor` solved my issue.\r\n\r\nSee [here][1] for details.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/63034316/14313644","title":"Execution failed for task &#39;:app:kaptDebugKotlin&#39;. &gt;","body":"<p>I faced the same problem.</p>\n<p>I was using <code>kapt</code> annotation processor. Replacing with <code>annotationProcessor</code> solved my issue.</p>\n<p>See <a href=\"https://stackoverflow.com/a/63034316/14313644\">here</a> for details.</p>\n"},{"tags":[],"owner":{"account_id":6378774,"reputation":836,"user_id":4948924,"display_name":"Gayatri Patel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1646005152,"creation_date":1646005152,"answer_id":71289322,"question_id":69428278,"body_markdown":"I had same error I was using below code\r\n\r\n    implementation &quot;android.arch.persistence.room:runtime:1.1.1&quot;\r\n    kapt &quot;android.arch.persistence.room:compiler:1.1.1&quot;\r\n\r\nI solved using dependency as below\r\n\r\n    def room_version = &quot;2.4.1&quot;\r\n    implementation &quot;androidx.room:room-runtime:$room_version&quot;\r\n    kapt &quot;androidx.room:room-compiler:$room_version&quot;\r\n    implementation &quot;androidx.room:room-ktx:$room_version&quot;\r\n    ","title":"Execution failed for task &#39;:app:kaptDebugKotlin&#39;. &gt;","body":"<p>I had same error I was using below code</p>\n<pre><code>implementation &quot;android.arch.persistence.room:runtime:1.1.1&quot;\nkapt &quot;android.arch.persistence.room:compiler:1.1.1&quot;\n</code></pre>\n<p>I solved using dependency as below</p>\n<pre><code>def room_version = &quot;2.4.1&quot;\nimplementation &quot;androidx.room:room-runtime:$room_version&quot;\nkapt &quot;androidx.room:room-compiler:$room_version&quot;\nimplementation &quot;androidx.room:room-ktx:$room_version&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28083116,"reputation":1,"user_id":21453862,"display_name":"Adewale Stephen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686953142,"creation_date":1686953142,"answer_id":76493816,"question_id":69428278,"body_markdown":"this may look like a complex error but I sorted it out by replacing &quot;kapt&quot; with &quot;annotationProcessor&quot; in the build.gradle dependencies ","title":"Execution failed for task &#39;:app:kaptDebugKotlin&#39;. &gt;","body":"<p>this may look like a complex error but I sorted it out by replacing &quot;kapt&quot; with &quot;annotationProcessor&quot; in the build.gradle dependencies</p>\n"}],"owner":{"account_id":13279018,"reputation":51,"user_id":9587362,"display_name":"Joules007"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6572,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":71289322,"answer_count":5,"score":5,"last_activity_date":1686953142,"creation_date":1633289830,"question_id":69428278,"body_markdown":"Getting this error when making a build on Android Studio\r\n\r\n\r\nExecution failed for task &#39;:app:kaptDebugKotlin&#39;.\r\n&gt; A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction\r\n   &gt; java.lang.reflect.InvocationTargetException (no error message)\r\n","title":"Execution failed for task &#39;:app:kaptDebugKotlin&#39;. &gt;","body":"<p>Getting this error when making a build on Android Studio</p>\n<p>Execution failed for task ':app:kaptDebugKotlin'.</p>\n<blockquote>\n<p>A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction\njava.lang.reflect.InvocationTargetException (no error message)</p>\n</blockquote>\n"},{"tags":["java","maven","jar","processbuilder"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1686951491,"post_id":76493643,"comment_id":134874357,"body_markdown":"I do not believe that your operation system is able to run executables that are inside a JAR file.","body":"I do not believe that your operation system is able to run executables that are inside a JAR file."},{"owner":{"account_id":19964900,"reputation":107,"user_id":17101279,"display_name":"Overdrowsed"},"score":0,"creation_date":1686951716,"post_id":76493643,"comment_id":134874382,"body_markdown":"It is, I&#39;d assumed processbuilder automatically means a cmd instance, turns out I had to specify I wanted a cmd","body":"It is, I&#39;d assumed processbuilder automatically means a cmd instance, turns out I had to specify I wanted a cmd"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1686951853,"post_id":76493643,"comment_id":134874399,"body_markdown":"&quot;*It is*&quot;? you&#39;re saying that your OP sys is able to run EXE files inside a JAR file?","body":"&quot;<i>It is</i>&quot;? you&#39;re saying that your OP sys is able to run EXE files inside a JAR file?"},{"owner":{"account_id":19964900,"reputation":107,"user_id":17101279,"display_name":"Overdrowsed"},"score":0,"creation_date":1686951973,"post_id":76493643,"comment_id":134874415,"body_markdown":"no, the java code runs that","body":"no, the java code runs that"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1686952140,"post_id":76493643,"comment_id":134874432,"body_markdown":"but from documentation of `ProcessBuilder`, the provided command is &quot;*the specified operating system program and arguments*&quot; and I do not believe that an EXE inside a JAR is considered a &quot;system program&quot; (usually, for Windows, such executables are found by searching the directories listed on the `PATH` variable or the path given with the command - AFAIK neither accepts a path to inside a JAR) - the EXE will have to be extracted to the file system to be executed","body":"but from documentation of <code>ProcessBuilder</code>, the provided command is &quot;<i>the specified operating system program and arguments</i>&quot; and I do not believe that an EXE inside a JAR is considered a &quot;system program&quot; (usually, for Windows, such executables are found by searching the directories listed on the <code>PATH</code> variable or the path given with the command - AFAIK neither accepts a path to inside a JAR) - the EXE will have to be extracted to the file system to be executed"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1686952482,"post_id":76493643,"comment_id":134874478,"body_markdown":"&quot;java code runs that&quot; - not directly; it delegates to the operating system, similar to having the command and its arguments typed on the systems CLI  (aka Command Prompt for Windows)","body":"&quot;java code runs that&quot; - not directly; it delegates to the operating system, similar to having the command and its arguments typed on the systems CLI  (aka Command Prompt for Windows)"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1686965256,"post_id":76493643,"comment_id":134875451,"body_markdown":"An “embedded resource” is an entry inside a zip file. You can’t “run” executables that are contained in zip files, they first need to be extracted. You should also not be referencing “src” in you code, it won’t exist once your app is packaged","body":"An “embedded resource” is an entry inside a zip file. You can’t “run” executables that are contained in zip files, they first need to be extracted. You should also not be referencing “src” in you code, it won’t exist once your app is packaged"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686989158,"post_id":76493643,"comment_id":134876820,"body_markdown":"*(I removed src/main/resources before building...)* Don&#39;t do that. That&#39;s essential to Maven&#39;s packaging process. Anything in there will end up in the right place at the root of the jar. So you can address that as `getResourceAsStream(&quot;/foo.exe&quot;)` for extraction. I suggest `java.io.tmpdir`","body":"<i>(I removed src/main/resources before building...)</i> Don&#39;t do that. That&#39;s essential to Maven&#39;s packaging process. Anything in there will end up in the right place at the root of the jar. So you can address that as <code>getResourceAsStream(&quot;&#47;foo.exe&quot;)</code> for extraction. I suggest <code>java.io.tmpdir</code>"}],"answers":[{"tags":[],"owner":{"account_id":19964900,"reputation":107,"user_id":17101279,"display_name":"Overdrowsed"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1686951754,"creation_date":1686951754,"answer_id":76493736,"question_id":76493643,"body_markdown":"Turns out I need to specify I need to run a cmd, I assumed ProcessBuilder automatically meant a cmd instance","title":"jar executable can&#39;t find binary which is included in jar","body":"<p>Turns out I need to specify I need to run a cmd, I assumed ProcessBuilder automatically meant a cmd instance</p>\n"}],"owner":{"account_id":19964900,"reputation":107,"user_id":17101279,"display_name":"Overdrowsed"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686951754,"creation_date":1686950568,"question_id":76493643,"body_markdown":"I&#39;m running a cmd tool from a java app with ```ProcessBuilder```, it&#39;s located in ```src/main/resources/external/name-of-tool/name-of-tool.exe```. When I build jar with maven and try to run it I get an IOException with message ```CreateProcess error=2, The system cannot find the file specified```. I checked jar file and the ```.exe``` is right there in ```external/name-of-tool``` folder. In the code, I&#39;m using a string for how I&#39;d normally run a cmd tool, and it works fine in the IDE (I removed ```src/main/resources``` before building, assuming a relative path from &quot;root&quot; of the jar would work, so just ```external/name-of-tool/name-of-tool.exe, but I tried both ways). What am I doing wrong?","title":"jar executable can&#39;t find binary which is included in jar","body":"<p>I'm running a cmd tool from a java app with <code>ProcessBuilder</code>, it's located in <code>src/main/resources/external/name-of-tool/name-of-tool.exe</code>. When I build jar with maven and try to run it I get an IOException with message <code>CreateProcess error=2, The system cannot find the file specified</code>. I checked jar file and the <code>.exe</code> is right there in <code>external/name-of-tool</code> folder. In the code, I'm using a string for how I'd normally run a cmd tool, and it works fine in the IDE (I removed <code>src/main/resources</code> before building, assuming a relative path from &quot;root&quot; of the jar would work, so just ```external/name-of-tool/name-of-tool.exe, but I tried both ways). What am I doing wrong?</p>\n"},{"tags":["java","recursion","data-structures","binary-search-tree"],"comments":[{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1686948490,"post_id":76493058,"comment_id":134873956,"body_markdown":"No that is not possible.","body":"No that is not possible."},{"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"score":0,"creation_date":1686983010,"post_id":76493058,"comment_id":134876359,"body_markdown":"thanks @trincot","body":"thanks @trincot"},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1687073458,"post_id":76493058,"comment_id":134883955,"body_markdown":"You can make do with one iterator traversing the other tree, or a recursive procedure using extended state, whether using parameter passing or instance member access. (say, min and max to enlist)","body":"You can make do with one iterator traversing the other tree, or a recursive procedure using extended state, whether using parameter passing or instance member access. (say, min and max to enlist)"}],"answers":[{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686951542,"creation_date":1686951542,"answer_id":76493715,"question_id":76493058,"body_markdown":"You cannot recurse over the two trees simultaneously here as you need to traverse the two trees independently (each time you return from a recursive call you effectively move back up *both* trees). The simplest solution I can see is to use a stack-based solution, albeit with two stacks:\r\n\r\n    public static List&lt;Integer&gt; getAllElements(TreeNode root1, TreeNode root2) {\r\n        final List&lt;Integer&gt; l = new ArrayList&lt;&gt;();\r\n\r\n        final Deque&lt;TreeNode&gt; stack1 = new ArrayDeque&lt;&gt;();\r\n        final Deque&lt;TreeNode&gt; stack2 = new ArrayDeque&lt;&gt;();\r\n\r\n        TreeNode node1 = root1;\r\n        TreeNode node2 = root2;\r\n\r\n        while (node1 != null || !stack1.isEmpty() || node2 != null || !stack2.isEmpty()) {\r\n            while (node1 != null) {\r\n                stack1.push(node1);\r\n                node1 = node1.left;\r\n            }\r\n\r\n            while (node2 != null) {\r\n                stack2.push(node2);\r\n                node2 = node2.left;\r\n            }\r\n\r\n            if (stack2.isEmpty() || (!stack1.isEmpty() &amp;&amp; stack1.peek().val &lt;= stack2.peek().val)) {\r\n                node1 = stack1.pop();\r\n                l.add(node1.val);\r\n                node1 = node1.right;\r\n            } else {\r\n                node2 = stack2.pop();\r\n                l.add(node2.val);\r\n                node2 = node2.right;\r\n            }\r\n        }\r\n\r\n        return l;\r\n    }\r\n","title":"Print elements in sorted order from 2 given BSTs","body":"<p>You cannot recurse over the two trees simultaneously here as you need to traverse the two trees independently (each time you return from a recursive call you effectively move back up <em>both</em> trees). The simplest solution I can see is to use a stack-based solution, albeit with two stacks:</p>\n<pre><code>public static List&lt;Integer&gt; getAllElements(TreeNode root1, TreeNode root2) {\n    final List&lt;Integer&gt; l = new ArrayList&lt;&gt;();\n\n    final Deque&lt;TreeNode&gt; stack1 = new ArrayDeque&lt;&gt;();\n    final Deque&lt;TreeNode&gt; stack2 = new ArrayDeque&lt;&gt;();\n\n    TreeNode node1 = root1;\n    TreeNode node2 = root2;\n\n    while (node1 != null || !stack1.isEmpty() || node2 != null || !stack2.isEmpty()) {\n        while (node1 != null) {\n            stack1.push(node1);\n            node1 = node1.left;\n        }\n\n        while (node2 != null) {\n            stack2.push(node2);\n            node2 = node2.left;\n        }\n\n        if (stack2.isEmpty() || (!stack1.isEmpty() &amp;&amp; stack1.peek().val &lt;= stack2.peek().val)) {\n            node1 = stack1.pop();\n            l.add(node1.val);\n            node1 = node1.right;\n        } else {\n            node2 = stack2.pop();\n            l.add(node2.val);\n            node2 = node2.right;\n        }\n    }\n\n    return l;\n}\n</code></pre>\n"}],"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686951542,"creation_date":1686943363,"question_id":76493058,"body_markdown":"This problem is given at [LeetCode][1]\r\nIt states that given 2 BSTs, return a Java List of type `Integer` that has elements in ascending order.\r\nThere are 2 ways I can think of it can be solved\r\n1. Do inorder traversal of each BST and add elements of both traversal into a common `List` and then sort it.\r\n2. Implement a `BST` iterator. Use simple merge technique by instantiating over the 2 trees and moving the iterators. I am pasting my solution for this approach that works(for completeness sake only)\r\n\r\n```\r\n/**\r\n * Definition for a binary tree node.\r\n * public class TreeNode {\r\n *     int val;\r\n *     TreeNode left;\r\n *     TreeNode right;\r\n *     TreeNode() {}\r\n *     TreeNode(int val) { this.val = val; }\r\n *     TreeNode(int val, TreeNode left, TreeNode right) {\r\n *         this.val = val;\r\n *         this.left = left;\r\n *         this.right = right;\r\n *     }\r\n * }\r\n */\r\n\r\nclass MyIterator {\r\n    TreeNode root;\r\n    TreeNode iteratorPtr;\r\n    Stack&lt;TreeNode&gt; s;\r\n\r\n    public void pushToStack(TreeNode node) {\r\n        while(node!=null) {\r\n            s.push(node);\r\n            node = node.left;\r\n        }\r\n    }\r\n\r\n    public boolean hasNext() {\r\n        return s.size()&gt;0;\r\n    }\r\n\r\n    public int peek() {\r\n        return s.peek().val;\r\n    }\r\n\r\n    public int getNext() {\r\n        var retVal = s.pop();\r\n        if(retVal.right!=null) {\r\n            pushToStack(retVal.right);\r\n        }\r\n        return retVal.val;\r\n    }\r\n\r\n    public MyIterator(TreeNode root) {\r\n        s = new Stack&lt;&gt;();\r\n        this.root = root;\r\n        pushToStack(root);\r\n    }\r\n}\r\n\r\nclass Solution {\r\n    public List&lt;Integer&gt; getAllElements(TreeNode root1, TreeNode root2) {\r\n        var iterator1 = new MyIterator(root1);\r\n        var iterator2 = new MyIterator(root2);\r\n\r\n        List&lt;Integer&gt; lst = new ArrayList&lt;&gt;();\r\n        while(iterator1.hasNext() &amp;&amp; iterator2.hasNext()) {\r\n            if(iterator1.peek()&lt;iterator2.peek()) {\r\n                lst.add(iterator1.getNext());\r\n            } else {\r\n                lst.add(iterator2.getNext());\r\n            }\r\n        }\r\n        while(iterator1.hasNext()) {\r\n                lst.add(iterator1.getNext());\r\n        }\r\n        while(iterator2.hasNext()) {\r\n                lst.add(iterator2.getNext());\r\n        }\r\n        return lst;\r\n    }\r\n}\r\n```\r\n\r\n**How do I solve this using recursion that recurses over both Trees and the method is intelligent enough to increment the right inorder pointers in single recursion manipulating both pointers?** \r\nBasically say a method like `recurse(TreeNode root1, TreeNode root2, List&lt;Integer&gt; lst)`. This method must be able to compare the 2 values, then decide how to recurse. But I am not sure how to come up with it. Because with single tree, the we rely on recursion to give us the benefit of stack that can achieve inorder of a single tree\r\n\r\n\r\n\r\n  [1]: https://leetcode.com/problems/all-elements-in-two-binary-search-trees/description/","title":"Print elements in sorted order from 2 given BSTs","body":"<p>This problem is given at <a href=\"https://leetcode.com/problems/all-elements-in-two-binary-search-trees/description/\" rel=\"nofollow noreferrer\">LeetCode</a>\nIt states that given 2 BSTs, return a Java List of type <code>Integer</code> that has elements in ascending order.\nThere are 2 ways I can think of it can be solved</p>\n<ol>\n<li>Do inorder traversal of each BST and add elements of both traversal into a common <code>List</code> and then sort it.</li>\n<li>Implement a <code>BST</code> iterator. Use simple merge technique by instantiating over the 2 trees and moving the iterators. I am pasting my solution for this approach that works(for completeness sake only)</li>\n</ol>\n<pre><code>/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode() {}\n *     TreeNode(int val) { this.val = val; }\n *     TreeNode(int val, TreeNode left, TreeNode right) {\n *         this.val = val;\n *         this.left = left;\n *         this.right = right;\n *     }\n * }\n */\n\nclass MyIterator {\n    TreeNode root;\n    TreeNode iteratorPtr;\n    Stack&lt;TreeNode&gt; s;\n\n    public void pushToStack(TreeNode node) {\n        while(node!=null) {\n            s.push(node);\n            node = node.left;\n        }\n    }\n\n    public boolean hasNext() {\n        return s.size()&gt;0;\n    }\n\n    public int peek() {\n        return s.peek().val;\n    }\n\n    public int getNext() {\n        var retVal = s.pop();\n        if(retVal.right!=null) {\n            pushToStack(retVal.right);\n        }\n        return retVal.val;\n    }\n\n    public MyIterator(TreeNode root) {\n        s = new Stack&lt;&gt;();\n        this.root = root;\n        pushToStack(root);\n    }\n}\n\nclass Solution {\n    public List&lt;Integer&gt; getAllElements(TreeNode root1, TreeNode root2) {\n        var iterator1 = new MyIterator(root1);\n        var iterator2 = new MyIterator(root2);\n\n        List&lt;Integer&gt; lst = new ArrayList&lt;&gt;();\n        while(iterator1.hasNext() &amp;&amp; iterator2.hasNext()) {\n            if(iterator1.peek()&lt;iterator2.peek()) {\n                lst.add(iterator1.getNext());\n            } else {\n                lst.add(iterator2.getNext());\n            }\n        }\n        while(iterator1.hasNext()) {\n                lst.add(iterator1.getNext());\n        }\n        while(iterator2.hasNext()) {\n                lst.add(iterator2.getNext());\n        }\n        return lst;\n    }\n}\n</code></pre>\n<p><strong>How do I solve this using recursion that recurses over both Trees and the method is intelligent enough to increment the right inorder pointers in single recursion manipulating both pointers?</strong>\nBasically say a method like <code>recurse(TreeNode root1, TreeNode root2, List&lt;Integer&gt; lst)</code>. This method must be able to compare the 2 values, then decide how to recurse. But I am not sure how to come up with it. Because with single tree, the we rely on recursion to give us the benefit of stack that can achieve inorder of a single tree</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":10637559,"reputation":2455,"user_id":7833793,"display_name":"R4N"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686951043,"creation_date":1686951043,"answer_id":76493681,"question_id":76492486,"body_markdown":"I haven&#39;t tried running your code at all, but from first glance it looks like you&#39;re not calling up the filter chain after setting the security context&#39;s authentication within JwtAuthenticationFilter (although you do if there is no authorization header).\r\n\r\nTry adjusting this:\r\n\r\n```\r\n...\r\n        if (email != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null){\r\n            UserDetails userDetails = userDetailsService.loadUserByUsername(email);\r\n            if (jwtService.isTokenValid(jwt, userDetails)){\r\n                UsernamePasswordAuthenticationToken authenticationToken\r\n                        = new UsernamePasswordAuthenticationToken(\r\n                        userDetails, null, userDetails.getAuthorities());\r\n                authenticationToken.setDetails(\r\n                        new WebAuthenticationDetailsSource().buildDetails(request)\r\n                );\r\n                SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n            }\r\n        }\r\n```\r\n\r\nto call the next filter in the chain:\r\n\r\n```\r\n        if (email != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null){\r\n            UserDetails userDetails = userDetailsService.loadUserByUsername(email);\r\n            if (jwtService.isTokenValid(jwt, userDetails)){\r\n                UsernamePasswordAuthenticationToken authenticationToken\r\n                        = new UsernamePasswordAuthenticationToken(\r\n                        userDetails, null, userDetails.getAuthorities());\r\n                authenticationToken.setDetails(\r\n                        new WebAuthenticationDetailsSource().buildDetails(request)\r\n                );\r\n                SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n            }\r\n        }\r\n        // causes the next filter in the chain to be invoked\r\n        filterChain.doFilter(request, response);\r\n```\r\n\r\nHere is the comment in the header of FilterChain for the `doFilter` method:\r\n\r\n```\r\n    /**\r\n     * Causes the next filter in the chain to be invoked, or if the calling\r\n     * filter is the last filter in the chain, causes the resource at the end of\r\n     * the chain to be invoked.\r\n     *\r\n     * @param request\r\n     *            the request to pass along the chain.\r\n     * @param response\r\n     *            the response to pass along the chain.\r\n     *\r\n     * @throws IOException if an I/O error occurs during the processing of the\r\n     *                     request\r\n     * @throws ServletException if the processing fails for any other reason\r\n     */\r\n    public void doFilter(ServletRequest request, ServletResponse response)\r\n            throws IOException, ServletException;\r\n```\r\n\r\n","title":"After implementing Spring security Authentication my app doesn&#39;t return correct bodies just empty 200 HTTP responses","body":"<p>I haven't tried running your code at all, but from first glance it looks like you're not calling up the filter chain after setting the security context's authentication within JwtAuthenticationFilter (although you do if there is no authorization header).</p>\n<p>Try adjusting this:</p>\n<pre><code>...\n        if (email != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null){\n            UserDetails userDetails = userDetailsService.loadUserByUsername(email);\n            if (jwtService.isTokenValid(jwt, userDetails)){\n                UsernamePasswordAuthenticationToken authenticationToken\n                        = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                authenticationToken.setDetails(\n                        new WebAuthenticationDetailsSource().buildDetails(request)\n                );\n                SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n            }\n        }\n</code></pre>\n<p>to call the next filter in the chain:</p>\n<pre><code>        if (email != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null){\n            UserDetails userDetails = userDetailsService.loadUserByUsername(email);\n            if (jwtService.isTokenValid(jwt, userDetails)){\n                UsernamePasswordAuthenticationToken authenticationToken\n                        = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                authenticationToken.setDetails(\n                        new WebAuthenticationDetailsSource().buildDetails(request)\n                );\n                SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n            }\n        }\n        // causes the next filter in the chain to be invoked\n        filterChain.doFilter(request, response);\n</code></pre>\n<p>Here is the comment in the header of FilterChain for the <code>doFilter</code> method:</p>\n<pre><code>    /**\n     * Causes the next filter in the chain to be invoked, or if the calling\n     * filter is the last filter in the chain, causes the resource at the end of\n     * the chain to be invoked.\n     *\n     * @param request\n     *            the request to pass along the chain.\n     * @param response\n     *            the response to pass along the chain.\n     *\n     * @throws IOException if an I/O error occurs during the processing of the\n     *                     request\n     * @throws ServletException if the processing fails for any other reason\n     */\n    public void doFilter(ServletRequest request, ServletResponse response)\n            throws IOException, ServletException;\n</code></pre>\n"}],"owner":{"account_id":18018246,"reputation":35,"user_id":13096209,"display_name":"sBeran23"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76493681,"answer_count":1,"score":2,"last_activity_date":1686951043,"creation_date":1686937189,"question_id":76492486,"body_markdown":"I have implemented some easy method to authenticate users in springboot which returns jwt and validates users but the app stopped giving responses with actual bodies and started sending empty 200 responses any clue why this might be? According to the debugger the program never ends up on the Request I was trying to call but authorization with the jwt  is always succesfull\r\n\r\nmy classes\r\n\r\n**JWTService**\r\n\r\n```java\r\n@Service\r\npublic class JwtService {\r\nprivate static final String SECRET_KEY = &quot;32bitkey&quot;;\r\npublic String extractEmail(String token) {\r\nreturn exctractClaim(token, Claims::getSubject);\r\n}\r\n\r\n    public &lt;T&gt; T exctractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n        final Claims claims = extractAllClaims(token);\r\n        return claimsResolver.apply(claims);\r\n    }\r\n    \r\n    public String generateToken(\r\n            UserDetails userDetails) {\r\n        return generateToken(Map.of(), userDetails);\r\n    }\r\n    public String generateToken(\r\n            Map&lt;String, Object&gt; extraClaims,\r\n            UserDetails userDetails) {\r\n        return Jwts\r\n                .builder()\r\n                .setClaims(extraClaims)\r\n                .setSubject(userDetails.getUsername())\r\n                .setIssuedAt(new Date(System.currentTimeMillis()))\r\n                .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 60 * 10))\r\n                .signWith(getSigningKey(), SignatureAlgorithm.HS256)\r\n                .compact();\r\n    }\r\n    \r\n    public boolean isTokenValid(String token, UserDetails userDetails) {\r\n        final String email = extractEmail(token);\r\n        return email.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token);\r\n    }\r\n    \r\n    public boolean isTokenExpired(String token) {\r\n        return extractExpiration(token).before(new Date());\r\n    }\r\n    \r\n    private Date extractExpiration(String token) {\r\n       return exctractClaim(token, Claims::getExpiration);\r\n    }\r\n    \r\n    private Claims extractAllClaims(String token) {\r\n        return Jwts\r\n                .parserBuilder()\r\n                .setSigningKey(getSigningKey())\r\n                .build()\r\n                .parseClaimsJws(token)\r\n                .getBody();\r\n    }\r\n    private Key getSigningKey() {\r\n        byte[] keyBytes = Decoders.BASE64.decode(SECRET_KEY);\r\n        return Keys.hmacShaKeyFor(keyBytes);\r\n    }\r\n```\r\n\r\n**Security filter chain**\r\n\r\n```java\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity security) throws Exception {\r\n        security\r\n                .csrf()\r\n                .disable()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(\r\n                        &quot;/fixture/getFixturesBySportAndDate&quot;,\r\n                        &quot;/user/register&quot;,\r\n                        &quot;/user/authenticate&quot;,\r\n                        &quot;/league/getLeaguesByFixturePlayedAtDateInSport&quot;,\r\n                        &quot;/team/fillTeamsHockey&quot;,\r\n                        &quot;/fixture/fillFixturesHockey&quot;,\r\n                        &quot;/fixture/fillFixturesBasketball&quot;)\r\n                .permitAll()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authenticationProvider(authenticationProvider)\r\n                .addFilterBefore(jwtAuthetificationFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n        return security.build();\r\n    }\r\n```\r\n\r\n**JwtAuthFilter**\r\n\r\n```java\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class JwtAuthetificationFilter extends OncePerRequestFilter {\r\n    private final JwtService jwtService;\r\n    @Autowired\r\n    private UserDetailsService userDetailsService;\r\n    @Override\r\n    protected void doFilterInternal(\r\n            @NonNull HttpServletRequest request,\r\n            @NonNull HttpServletResponse response,\r\n            @NonNull FilterChain filterChain\r\n    ) throws ServletException, IOException {\r\n        final String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\r\n        final String jwt;\r\n        final String email;\r\n        if (authorizationHeader == null || !authorizationHeader.startsWith(&quot;Bearer &quot;)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n        jwt = authorizationHeader.substring(7);\r\n        email = jwtService.extractEmail(jwt);\r\n        if (email != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null){\r\n            UserDetails userDetails = userDetailsService.loadUserByUsername(email);\r\n            if (jwtService.isTokenValid(jwt, userDetails)){\r\n                UsernamePasswordAuthenticationToken authenticationToken\r\n                        = new UsernamePasswordAuthenticationToken(\r\n                        userDetails, null, userDetails.getAuthorities());\r\n                authenticationToken.setDetails(\r\n                        new WebAuthenticationDetailsSource().buildDetails(request)\r\n                );\r\n                SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n**Application Config**\r\n\r\n```java\r\n@Configuration @RequiredArgsConstructor\r\npublic class ApplicationConfig {\r\n\r\n    private final UserRepository userRepository;\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService() {\r\n        return username -&gt; userRepository.findByEmail(username)\r\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\r\n        };\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n        authenticationProvider.setUserDetailsService(userDetailsService());\r\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\r\n        return authenticationProvider;\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration cfg) throws Exception {\r\n         return cfg.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n       return new BCryptPasswordEncoder();\r\n    }\r\n```\r\n\r\n**Example request**\r\n\r\n```java\r\n    @GetMapping(value = &quot;/getUserInfo&quot;)\r\n    public ResponseEntity&lt;User&gt; getUserInfo(HttpServletRequest request){\r\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n        String email = authentication.getName();\r\n        User user = userRepository.findByEmail(email).get();\r\n        return ResponseEntity.ok(user);\r\n    }\r\n```\r\n\r\nI tried changing basically everything and debugging the info but couldn&#39;t get it done because it just gave me the answer that the request never executes","title":"After implementing Spring security Authentication my app doesn&#39;t return correct bodies just empty 200 HTTP responses","body":"<p>I have implemented some easy method to authenticate users in springboot which returns jwt and validates users but the app stopped giving responses with actual bodies and started sending empty 200 responses any clue why this might be? According to the debugger the program never ends up on the Request I was trying to call but authorization with the jwt  is always succesfull</p>\n<p>my classes</p>\n<p><strong>JWTService</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class JwtService {\nprivate static final String SECRET_KEY = &quot;32bitkey&quot;;\npublic String extractEmail(String token) {\nreturn exctractClaim(token, Claims::getSubject);\n}\n\n    public &lt;T&gt; T exctractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = extractAllClaims(token);\n        return claimsResolver.apply(claims);\n    }\n    \n    public String generateToken(\n            UserDetails userDetails) {\n        return generateToken(Map.of(), userDetails);\n    }\n    public String generateToken(\n            Map&lt;String, Object&gt; extraClaims,\n            UserDetails userDetails) {\n        return Jwts\n                .builder()\n                .setClaims(extraClaims)\n                .setSubject(userDetails.getUsername())\n                .setIssuedAt(new Date(System.currentTimeMillis()))\n                .setExpiration(new Date(System.currentTimeMillis() + 1000 * 60 * 60 * 10))\n                .signWith(getSigningKey(), SignatureAlgorithm.HS256)\n                .compact();\n    }\n    \n    public boolean isTokenValid(String token, UserDetails userDetails) {\n        final String email = extractEmail(token);\n        return email.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token);\n    }\n    \n    public boolean isTokenExpired(String token) {\n        return extractExpiration(token).before(new Date());\n    }\n    \n    private Date extractExpiration(String token) {\n       return exctractClaim(token, Claims::getExpiration);\n    }\n    \n    private Claims extractAllClaims(String token) {\n        return Jwts\n                .parserBuilder()\n                .setSigningKey(getSigningKey())\n                .build()\n                .parseClaimsJws(token)\n                .getBody();\n    }\n    private Key getSigningKey() {\n        byte[] keyBytes = Decoders.BASE64.decode(SECRET_KEY);\n        return Keys.hmacShaKeyFor(keyBytes);\n    }\n</code></pre>\n<p><strong>Security filter chain</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity security) throws Exception {\n        security\n                .csrf()\n                .disable()\n                .authorizeHttpRequests()\n                .requestMatchers(\n                        &quot;/fixture/getFixturesBySportAndDate&quot;,\n                        &quot;/user/register&quot;,\n                        &quot;/user/authenticate&quot;,\n                        &quot;/league/getLeaguesByFixturePlayedAtDateInSport&quot;,\n                        &quot;/team/fillTeamsHockey&quot;,\n                        &quot;/fixture/fillFixturesHockey&quot;,\n                        &quot;/fixture/fillFixturesBasketball&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authenticationProvider(authenticationProvider)\n                .addFilterBefore(jwtAuthetificationFilter, UsernamePasswordAuthenticationFilter.class);\n\n        return security.build();\n    }\n</code></pre>\n<p><strong>JwtAuthFilter</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@RequiredArgsConstructor\npublic class JwtAuthetificationFilter extends OncePerRequestFilter {\n    private final JwtService jwtService;\n    @Autowired\n    private UserDetailsService userDetailsService;\n    @Override\n    protected void doFilterInternal(\n            @NonNull HttpServletRequest request,\n            @NonNull HttpServletResponse response,\n            @NonNull FilterChain filterChain\n    ) throws ServletException, IOException {\n        final String authorizationHeader = request.getHeader(&quot;Authorization&quot;);\n        final String jwt;\n        final String email;\n        if (authorizationHeader == null || !authorizationHeader.startsWith(&quot;Bearer &quot;)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n        jwt = authorizationHeader.substring(7);\n        email = jwtService.extractEmail(jwt);\n        if (email != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null){\n            UserDetails userDetails = userDetailsService.loadUserByUsername(email);\n            if (jwtService.isTokenValid(jwt, userDetails)){\n                UsernamePasswordAuthenticationToken authenticationToken\n                        = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                authenticationToken.setDetails(\n                        new WebAuthenticationDetailsSource().buildDetails(request)\n                );\n                SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n            }\n        }\n    }\n</code></pre>\n<p><strong>Application Config</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration @RequiredArgsConstructor\npublic class ApplicationConfig {\n\n    private final UserRepository userRepository;\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        return username -&gt; userRepository.findByEmail(username)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));\n        };\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService());\n        authenticationProvider.setPasswordEncoder(passwordEncoder());\n        return authenticationProvider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration cfg) throws Exception {\n         return cfg.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n       return new BCryptPasswordEncoder();\n    }\n</code></pre>\n<p><strong>Example request</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    @GetMapping(value = &quot;/getUserInfo&quot;)\n    public ResponseEntity&lt;User&gt; getUserInfo(HttpServletRequest request){\n        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n        String email = authentication.getName();\n        User user = userRepository.findByEmail(email).get();\n        return ResponseEntity.ok(user);\n    }\n</code></pre>\n<p>I tried changing basically everything and debugging the info but couldn't get it done because it just gave me the answer that the request never executes</p>\n"},{"tags":["java","cookies","jax-rs"],"comments":[{"owner":{"account_id":281082,"reputation":11615,"user_id":577181,"accept_rate":20,"display_name":"John Ament"},"score":0,"creation_date":1407679499,"post_id":25225901,"comment_id":39299245,"body_markdown":"Can you provide an example of what you tried and what didn&#39;t work?","body":"Can you provide an example of what you tried and what didn&#39;t work?"}],"answers":[{"tags":[],"owner":{"account_id":1324097,"reputation":1459,"user_id":1269314,"accept_rate":29,"display_name":"julius_am"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1407734946,"creation_date":1407734946,"answer_id":25236357,"question_id":25225901,"body_markdown":"To attach the cookie to all requests the domain and path should be:\r\ndomain = &quot;&quot;;\r\npath = &quot;/&quot;\r\n\r\nSo the cookie creation will look as follows:\r\n\r\n    NewCookie(&quot;cookie-name&quot;, &quot;cookie-value&quot;, &quot;/&quot;, &quot;&quot;, &quot;comment&quot;, 100, false);\r\n\r\n","title":"Cookie domain and path with jax-rs","body":"<p>To attach the cookie to all requests the domain and path should be:\ndomain = \"\";\npath = \"/\"</p>\n\n<p>So the cookie creation will look as follows:</p>\n\n<pre><code>NewCookie(\"cookie-name\", \"cookie-value\", \"/\", \"\", \"comment\", 100, false);\n</code></pre>\n"}],"owner":{"account_id":1324097,"reputation":1459,"user_id":1269314,"accept_rate":29,"display_name":"julius_am"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3566,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":25236357,"answer_count":1,"score":8,"last_activity_date":1686950146,"creation_date":1407649246,"question_id":25225901,"body_markdown":"I&#39;m using jax-rs and trying to add a cookie to my response.\r\nThe problem is that when adding a cookie the following way:\r\n\r\n    new NewCookie(&quot;cookie-name&quot;, &quot;cookie-value&quot;);\r\n\r\nthe cookie is being attached only to the requests of the same path.\r\nFor example, if I add the cookie in the request &quot;/myapp/users/login&quot;, I don&#39;t see that cookie when calling other requests. I think the explanation to this is that, for some reason, the path of the cookie is &quot;/myapp/users&quot; so when calling &quot;myapp/someotherpath&quot; the cookie is not being attached.\r\n\r\nI tried using another constructor of NewCookie where I can set domain and path but couldn&#39;t make it work, can some one give me an example of setting domain and path that will attach the cookie to all requests? isn&#39;t this supposed to be the default behavior anyway?","title":"Cookie domain and path with jax-rs","body":"<p>I'm using jax-rs and trying to add a cookie to my response.\nThe problem is that when adding a cookie the following way:</p>\n\n<pre><code>new NewCookie(\"cookie-name\", \"cookie-value\");\n</code></pre>\n\n<p>the cookie is being attached only to the requests of the same path.\nFor example, if I add the cookie in the request \"/myapp/users/login\", I don't see that cookie when calling other requests. I think the explanation to this is that, for some reason, the path of the cookie is \"/myapp/users\" so when calling \"myapp/someotherpath\" the cookie is not being attached.</p>\n\n<p>I tried using another constructor of NewCookie where I can set domain and path but couldn't make it work, can some one give me an example of setting domain and path that will attach the cookie to all requests? isn't this supposed to be the default behavior anyway?</p>\n"},{"tags":["java","encoding","outputstream"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1548704831,"post_id":54408436,"comment_id":95629268,"body_markdown":"Do you use Visual Studio Code for your Java file, or do you use it to view your `temp.txt`, or both?","body":"Do you use Visual Studio Code for your Java file, or do you use it to view your <code>temp.txt</code>, or both?"},{"owner":{"account_id":6302036,"reputation":71,"user_id":4896353,"accept_rate":0,"display_name":"bennes"},"score":0,"creation_date":1548749539,"post_id":54408436,"comment_id":95642823,"body_markdown":"only for java file","body":"only for java file"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1548750318,"post_id":54408436,"comment_id":95643168,"body_markdown":"There lies the problem: your source code file is not encoded as UTF-8. You should grab a decent IDE or text editor and set the file&#39;s charset to UTF-8.","body":"There lies the problem: your source code file is not encoded as UTF-8. You should grab a decent IDE or text editor and set the file&#39;s charset to UTF-8."},{"owner":{"account_id":6302036,"reputation":71,"user_id":4896353,"accept_rate":0,"display_name":"bennes"},"score":0,"creation_date":1548753952,"post_id":54408436,"comment_id":95645086,"body_markdown":"oh, I like VS Code :( Probably there will be an option how to encode source code file in UTF-8, no?","body":"oh, I like VS Code :( Probably there will be an option how to encode source code file in UTF-8, no?"},{"owner":{"account_id":6302036,"reputation":71,"user_id":4896353,"accept_rate":0,"display_name":"bennes"},"score":0,"creation_date":1548755364,"post_id":54408436,"comment_id":95645955,"body_markdown":"even there is in the bottom right pane the possibility to change encoding in VS code, but obiously it doesn`t help","body":"even there is in the bottom right pane the possibility to change encoding in VS code, but obiously it doesn`t help"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1548775440,"post_id":54408436,"comment_id":95658795,"body_markdown":"With which application are you *viewing* the file?","body":"With which application are you <i>viewing</i> the file?"},{"owner":{"account_id":6302036,"reputation":71,"user_id":4896353,"accept_rate":0,"display_name":"bennes"},"score":0,"creation_date":1548777791,"post_id":54408436,"comment_id":95660289,"body_markdown":"I think VS Code is not the problem. I tried to run java code only through cmd, and still the encoding problem. Application I tried to save as txt and csv, to open the file I used notepad, sublime and excel. Each try with the same incorrect result.","body":"I think VS Code is not the problem. I tried to run java code only through cmd, and still the encoding problem. Application I tried to save as txt and csv, to open the file I used notepad, sublime and excel. Each try with the same incorrect result."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1548784665,"post_id":54408436,"comment_id":95664063,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/187509/discussion-between-mc-emperor-and-bennes).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/187509/discussion-between-mc-emperor-and-bennes\">continue this discussion in chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":3098373,"reputation":135,"user_id":2623124,"display_name":"linoskoczek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552943279,"creation_date":1548703846,"answer_id":54408999,"question_id":54408436,"body_markdown":"Your code is correct. You probably already have a file named _temp.txt_, and therefore Java writes text to the existing file (replacing previous content). What can be a problem is an encoding, that you already have set in your file. \r\n\r\nIn other words, you can&#39;t (or at least shouldn&#39;t) write UTF-8 text to the file with for example WINDOWS-1250 encoding or you would get an exact result as you have described.\r\n\r\nIf you didn&#39;t have this file, Java would automatically create a file with UTF-8 encoding. \r\n\r\n**Possible solutions:**\r\n\r\n 1. Change encoding of your current file (usually you can open it in any text editor, use _Save as_ and then specify encoding as _UTF-8_.\r\n 2. Remove this file and Java will create it automatically with proper encoding.\r\n\r\n___\r\nBy the way, you should use `StandardCharsets` class instead of using `String charsetName` in order to avoid UnsupportedEncodingException:\r\n\r\n    new OutputStreamWriter(new FileOutputStream(&quot;temp.txt&quot;), StandardCharsets.UTF_8)\r\n\r\n","title":"java utf8 encoding outputstream not working","body":"<p>Your code is correct. You probably already have a file named <em>temp.txt</em>, and therefore Java writes text to the existing file (replacing previous content). What can be a problem is an encoding, that you already have set in your file. </p>\n\n<p>In other words, you can't (or at least shouldn't) write UTF-8 text to the file with for example WINDOWS-1250 encoding or you would get an exact result as you have described.</p>\n\n<p>If you didn't have this file, Java would automatically create a file with UTF-8 encoding. </p>\n\n<p><strong>Possible solutions:</strong></p>\n\n<ol>\n<li>Change encoding of your current file (usually you can open it in any text editor, use <em>Save as</em> and then specify encoding as <em>UTF-8</em>.</li>\n<li>Remove this file and Java will create it automatically with proper encoding.</li>\n</ol>\n\n<hr>\n\n<p>By the way, you should use <code>StandardCharsets</code> class instead of using <code>String charsetName</code> in order to avoid UnsupportedEncodingException:</p>\n\n<pre><code>new OutputStreamWriter(new FileOutputStream(\"temp.txt\"), StandardCharsets.UTF_8)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1833103,"reputation":697,"user_id":1664043,"accept_rate":46,"display_name":"user1664043"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611173255,"creation_date":1611173255,"answer_id":65816875,"question_id":54408436,"body_markdown":"When you say &quot;I see special characters not showing properly&quot;, where are you seeing them?\r\n\r\nWhat you say/show next *looks* like the string, utf-8 encoded (i.e. the accented a&#39;s are each represented by 2 chars, in what appears to be the appropriate encoding).\r\n\r\nWhat I would expect the issue to be is that the java code is not outputting a BOM at the beginning of the file, leaving the interpretation of utf-8 sequences up to the discretion of the reader.","title":"java utf8 encoding outputstream not working","body":"<p>When you say &quot;I see special characters not showing properly&quot;, where are you seeing them?</p>\n<p>What you say/show next <em>looks</em> like the string, utf-8 encoded (i.e. the accented a's are each represented by 2 chars, in what appears to be the appropriate encoding).</p>\n<p>What I would expect the issue to be is that the java code is not outputting a BOM at the beginning of the file, leaving the interpretation of utf-8 sequences up to the discretion of the reader.</p>\n"}],"owner":{"account_id":6302036,"reputation":71,"user_id":4896353,"accept_rate":0,"display_name":"bennes"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13853,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686949515,"creation_date":1548701354,"question_id":54408436,"body_markdown":"I need to write a program which is able to write UTF-8 data into a file.\r\n\r\nI found out examples on the internet, however, I am not able to progress to desired result.\r\n\r\nCode:\r\n\r\n    import java.io.BufferedWriter;\r\n    import java.io.FileOutputStream;\r\n    import java.io.OutputStreamWriter;\r\n    import java.io.Writer;\r\n     \r\n    public class UTF8WriterDemo {\r\n     \r\n        public static void main(String[] args) {\r\n            Writer out = null;\r\n            try {\r\n                out = new BufferedWriter(\r\n                        new OutputStreamWriter(new FileOutputStream(&quot;c://java//temp.txt&quot;), &quot;UTF-8&quot;));\r\n     \r\n     \r\n                String text = &quot;This tex&#225;&#225;t will be added to File !!&quot;;\r\n     \r\n                out.write(text);\r\n                out.close();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n     \r\n        }\r\n     \r\n    }\r\n     \r\n     \r\n\r\n\r\nEverything run succesfully, but at the end I see special characters not showing properly: \r\nThis tex&#195;&#161;&#195;&#161;t will be added to File !!\r\n\r\n\r\nI tried several examples from the internet with the same result.\r\n\r\nI use Visual Studio code.\r\n\r\nWhere could be the problem please?\r\n\r\n\r\nThank you","title":"java utf8 encoding outputstream not working","body":"<p>I need to write a program which is able to write UTF-8 data into a file.</p>\n\n<p>I found out examples on the internet, however, I am not able to progress to desired result.</p>\n\n<p>Code:</p>\n\n<pre><code>import java.io.BufferedWriter;\nimport java.io.FileOutputStream;\nimport java.io.OutputStreamWriter;\nimport java.io.Writer;\n\npublic class UTF8WriterDemo {\n\n    public static void main(String[] args) {\n        Writer out = null;\n        try {\n            out = new BufferedWriter(\n                    new OutputStreamWriter(new FileOutputStream(\"c://java//temp.txt\"), \"UTF-8\"));\n\n\n            String text = \"This texáát will be added to File !!\";\n\n            out.write(text);\n            out.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Everything run succesfully, but at the end I see special characters not showing properly: \nThis texÃ¡Ã¡t will be added to File !!</p>\n\n<p>I tried several examples from the internet with the same result.</p>\n\n<p>I use Visual Studio code.</p>\n\n<p>Where could be the problem please?</p>\n\n<p>Thank you</p>\n"},{"tags":["java","apache-arrow"],"answers":[{"tags":[],"owner":{"account_id":1617696,"reputation":2210,"user_id":1673861,"accept_rate":65,"display_name":"L. Blanc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662579363,"creation_date":1662579363,"answer_id":73640686,"question_id":73640434,"body_markdown":"What you most commonly would want to do is to create a TransferPair object for each Vector in the source VectorSchemaRoot, to transfer its buffers to new vectors in the second one. \r\n\r\nIn this case what you have, though, is not really a &quot;copy&quot; as the data is passed from one VSR to another, rather than copied. A typical use-case for this approach is using VectorSchemaRoots in a pipeline where they process data sequentially. \r\n\r\nIf you could say a bit more about what you&#39;re trying to accomplish I might be able to provide a better answer. \r\n\r\n","title":"Java Apache Arrow Copy data from one VectorSchemaRoot to another","body":"<p>What you most commonly would want to do is to create a TransferPair object for each Vector in the source VectorSchemaRoot, to transfer its buffers to new vectors in the second one.</p>\n<p>In this case what you have, though, is not really a &quot;copy&quot; as the data is passed from one VSR to another, rather than copied. A typical use-case for this approach is using VectorSchemaRoots in a pipeline where they process data sequentially.</p>\n<p>If you could say a bit more about what you're trying to accomplish I might be able to provide a better answer.</p>\n"},{"tags":[],"owner":{"account_id":3992512,"reputation":1270,"user_id":3290958,"display_name":"dehumanizer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686948348,"creation_date":1686948348,"answer_id":76493463,"question_id":73640434,"body_markdown":"This is how I implemented it. Make sure you close the `originalRoot`, otherwise you&#39;ll get a memory leak exception. Also, `getAllocator()` creates a child allocator from `RootAllocator`, i.e. don&#39;t create a new root — you&#39;ll get another exception there must be the same shared root.\r\n\r\n```\r\n  private VectorSchemaRoot cloneRoot(VectorSchemaRoot originalRoot) {\r\n    VectorSchemaRoot theRoot = VectorSchemaRoot.create(originalRoot.getSchema(), getAllocator());\r\n    VectorLoader loader = new VectorLoader(theRoot);\r\n    VectorUnloader unloader = new VectorUnloader(originalRoot);\r\n    try (ArrowRecordBatch recordBatch = unloader.getRecordBatch()) {\r\n      loader.load(recordBatch);\r\n    }\r\n    return theRoot;\r\n  }\r\n```","title":"Java Apache Arrow Copy data from one VectorSchemaRoot to another","body":"<p>This is how I implemented it. Make sure you close the <code>originalRoot</code>, otherwise you'll get a memory leak exception. Also, <code>getAllocator()</code> creates a child allocator from <code>RootAllocator</code>, i.e. don't create a new root — you'll get another exception there must be the same shared root.</p>\n<pre><code>  private VectorSchemaRoot cloneRoot(VectorSchemaRoot originalRoot) {\n    VectorSchemaRoot theRoot = VectorSchemaRoot.create(originalRoot.getSchema(), getAllocator());\n    VectorLoader loader = new VectorLoader(theRoot);\n    VectorUnloader unloader = new VectorUnloader(originalRoot);\n    try (ArrowRecordBatch recordBatch = unloader.getRecordBatch()) {\n      loader.load(recordBatch);\n    }\n    return theRoot;\n  }\n</code></pre>\n"}],"owner":{"account_id":3737085,"reputation":8812,"user_id":3107798,"accept_rate":50,"display_name":"jjbskir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686948348,"creation_date":1662577819,"question_id":73640434,"body_markdown":"If I have a `VectorSchemaRoot` that already contains data using the the [Java Apache Arrow][1] library, how would I go about copying that data to another `VectorSchemaRoot`?\r\n\r\n\r\n  [1]: https://arrow.apache.org/docs/java/index.html","title":"Java Apache Arrow Copy data from one VectorSchemaRoot to another","body":"<p>If I have a <code>VectorSchemaRoot</code> that already contains data using the the <a href=\"https://arrow.apache.org/docs/java/index.html\" rel=\"nofollow noreferrer\">Java Apache Arrow</a> library, how would I go about copying that data to another <code>VectorSchemaRoot</code>?</p>\n"},{"tags":["java","kubernetes","google-kubernetes-engine"],"comments":[{"owner":{"account_id":7248598,"reputation":11598,"user_id":5529712,"display_name":"Gari Singh"},"score":0,"creation_date":1686987184,"post_id":76493448,"comment_id":134876667,"body_markdown":"GKE won&#39;t upgrade the control plane and the node pools within the same 24 hour period.  So the node pool should be upgraded to 1.25 soon (or you can manually update as well).\n\nAs for the DD agent, do you have any more details on why the pod can&#39;t be scheduled?  Maybe the event log for the pod has some details?  `kubectl describe pod ...`","body":"GKE won&#39;t upgrade the control plane and the node pools within the same 24 hour period.  So the node pool should be upgraded to 1.25 soon (or you can manually update as well).  As for the DD agent, do you have any more details on why the pod can&#39;t be scheduled?  Maybe the event log for the pod has some details?  <code>kubectl describe pod ...</code>"}],"owner":{"account_id":185507,"reputation":511,"user_id":422268,"accept_rate":73,"display_name":"Tony Giaccone"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686948146,"creation_date":1686948146,"question_id":76493448,"body_markdown":"We have an java app that&#39;s running in GKE, and it was using v1.23 which is about to EOL so we&#39;re trying to upgrade to a newer version. We upgraded to v1.24 and everything was good. So I choose to let google upgrade to v1.25 and now we have a problem. \r\n\r\nthe pool is configured with version 1.24.12-gke 1000 and an image type of Ubuntu with containerd \r\n\r\nThe nodes in the cluster view all show green ready. \r\n\r\nBut we&#39;re getting an error message: \r\n\r\n**Problem**\r\n\r\nYour cluster has 1 unschedulable pod\r\n\r\n**Details** Unschedulable pods\r\n\r\ndatadog-agent-v52f4\r\n\r\nI recognize that this is an old version of the datadog java agent, and I am guessing that I need to upgrade this as well.  But this is just my WAG about the problem and I haven&#39;t been able to find any information about what versions of the datadog agent work with which versions of GKE. \r\n\r\nAlso there&#39;s conflicting information displayed with regard to the cluster vs the Node pool. The cluster seems to be at 1.25.8-gke.500\tbut the pool is still at 1.24.12-gke.1000\r\n\r\n\r\nAny suggestions about how to resolve my problem?","title":"GKE cluster has unschedulable pods datadog-agent-v52f4","body":"<p>We have an java app that's running in GKE, and it was using v1.23 which is about to EOL so we're trying to upgrade to a newer version. We upgraded to v1.24 and everything was good. So I choose to let google upgrade to v1.25 and now we have a problem.</p>\n<p>the pool is configured with version 1.24.12-gke 1000 and an image type of Ubuntu with containerd</p>\n<p>The nodes in the cluster view all show green ready.</p>\n<p>But we're getting an error message:</p>\n<p><strong>Problem</strong></p>\n<p>Your cluster has 1 unschedulable pod</p>\n<p><strong>Details</strong> Unschedulable pods</p>\n<p>datadog-agent-v52f4</p>\n<p>I recognize that this is an old version of the datadog java agent, and I am guessing that I need to upgrade this as well.  But this is just my WAG about the problem and I haven't been able to find any information about what versions of the datadog agent work with which versions of GKE.</p>\n<p>Also there's conflicting information displayed with regard to the cluster vs the Node pool. The cluster seems to be at 1.25.8-gke.500   but the pool is still at 1.24.12-gke.1000</p>\n<p>Any suggestions about how to resolve my problem?</p>\n"},{"tags":["java","eclipse","configuration","oomph"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1686950791,"post_id":76493378,"comment_id":134874275,"body_markdown":"Do a web search without the `-D` prefix: see [`oomph.update.url`](https://www.eclipse.org/forums/index.php?t=msg&amp;th=1109150&amp;goto=1845142&amp;#msg_1845142) and [`oomph.redirection.index.redirection`](https://github.com/a-langer/eclipse-oomph-console#settings). The `eclipse.ini` will be updated as well and is not recommended to be edited.","body":"Do a web search without the <code>-D</code> prefix: see <a href=\"https://www.eclipse.org/forums/index.php?t=msg&amp;th=1109150&amp;goto=1845142&amp;#msg_1845142\" rel=\"nofollow noreferrer\"><code>oomph.update.url</code></a> and <a href=\"https://github.com/a-langer/eclipse-oomph-console#settings\" rel=\"nofollow noreferrer\"><code>oomph.redirection.index.redirection</code></a>. The <code>eclipse.ini</code> will be updated as well and is not recommended to be edited."}],"owner":{"account_id":300494,"reputation":13934,"user_id":607655,"accept_rate":81,"display_name":"Meng Lu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686947239,"creation_date":1686947239,"question_id":76493378,"body_markdown":"I&#39;ve recently upgraded my Eclipse to 2023-06. Then I examined my eclipse.ini which has been used for more than a year and multiple updated versions of Eclipse. I found two lines of oomph configuration:\r\n```\r\n-Doomph.update.url=http://download.eclipse.org/oomph/updates/milestone/latest\r\n-Doomph.redirection.index.redirection=index:/-&gt;http://git.eclipse.org/c/oomph/org.eclipse.oomph.git/plain/setups/\r\n```\r\n\r\nI probably previously copied them from somewhere but no longer remember why. So, questions:\r\n\r\n1. What do they do? Or how do they make things different from the default behavior? \r\n2. Are they still necessary or useful for the newest version of Eclipse, i.e. 2023-06?\r\n3. In genera where can one find documentation and usage of these configuration parameters?\r\n","title":"Explicit configuration for Eclipse Ooomph in eclipse.ini useful?","body":"<p>I've recently upgraded my Eclipse to 2023-06. Then I examined my eclipse.ini which has been used for more than a year and multiple updated versions of Eclipse. I found two lines of oomph configuration:</p>\n<pre><code>-Doomph.update.url=http://download.eclipse.org/oomph/updates/milestone/latest\n-Doomph.redirection.index.redirection=index:/-&gt;http://git.eclipse.org/c/oomph/org.eclipse.oomph.git/plain/setups/\n</code></pre>\n<p>I probably previously copied them from somewhere but no longer remember why. So, questions:</p>\n<ol>\n<li>What do they do? Or how do they make things different from the default behavior?</li>\n<li>Are they still necessary or useful for the newest version of Eclipse, i.e. 2023-06?</li>\n<li>In genera where can one find documentation and usage of these configuration parameters?</li>\n</ol>\n"},{"tags":["java","drop-down-menu","command-line-interface"],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686946511,"creation_date":1686946511,"question_id":76493321,"body_markdown":"I would like to use a select element in a Java CLI, similar to this example:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JZRSn.png\r\n\r\nthat I stole from https://github.com/go-survey/survey\r\n\r\nI found plenty of information about how you could do it in Go, but I did not find something useful for Java except the library https://github.com/mabe02/lanterna which is not really what I am looking for because I tries to create a whole GUI in a shell, and does not support powershell or cmd on Windows.\r\n\r\nCan anyone tell me how to do this?","title":"Select UI element in Java CLI","body":"<p>I would like to use a select element in a Java CLI, similar to this example:</p>\n<p><a href=\"https://i.stack.imgur.com/JZRSn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JZRSn.png\" alt=\"enter image description here\" /></a></p>\n<p>that I stole from <a href=\"https://github.com/go-survey/survey\" rel=\"nofollow noreferrer\">https://github.com/go-survey/survey</a></p>\n<p>I found plenty of information about how you could do it in Go, but I did not find something useful for Java except the library <a href=\"https://github.com/mabe02/lanterna\" rel=\"nofollow noreferrer\">https://github.com/mabe02/lanterna</a> which is not really what I am looking for because I tries to create a whole GUI in a shell, and does not support powershell or cmd on Windows.</p>\n<p>Can anyone tell me how to do this?</p>\n"},{"tags":["java","spring","filter","spring-security"],"answers":[{"tags":[],"owner":{"account_id":28830456,"reputation":21,"user_id":22081027,"display_name":"Ammolite"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686946345,"creation_date":1686946345,"answer_id":76493305,"question_id":76490569,"body_markdown":"The problem was solved like this: UserDetailsService uses a request to the repository, looking for a user by email. Spring was passing the decrypted email correctly, but adding a line break.\r\n\r\nSo far I&#39;ve replaced this:\r\n\r\n    repo.findByEmail(email.replaceAll(&quot;\\n&quot;,&quot;&quot;)\r\n\r\nAfter that, the user became located, the session was confirmed. I&#39;ll see where the line wrapping came from and, if anything, I&#39;ll supplement the answer.","title":"Remember-me in Spring Security doesn&#39;t work","body":"<p>The problem was solved like this: UserDetailsService uses a request to the repository, looking for a user by email. Spring was passing the decrypted email correctly, but adding a line break.</p>\n<p>So far I've replaced this:</p>\n<pre><code>repo.findByEmail(email.replaceAll(&quot;\\n&quot;,&quot;&quot;)\n</code></pre>\n<p>After that, the user became located, the session was confirmed. I'll see where the line wrapping came from and, if anything, I'll supplement the answer.</p>\n"}],"owner":{"account_id":28830456,"reputation":21,"user_id":22081027,"display_name":"Ammolite"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":339,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76493305,"answer_count":1,"score":1,"last_activity_date":1686946345,"creation_date":1686921314,"question_id":76490569,"body_markdown":"Faced the following problem: when you try to delete the JSESSIONID or restart the browser, the next request to the server resets the remember-me Cookie and does not confirm the session.\r\n\r\n```\r\nhttp\r\n            .authenticationManager(authManager(http))\r\n            .authorizeHttpRequests()\r\n            .requestMatchers(&quot;/auth/sendCode&quot;, &quot;/login&quot;).permitAll()\r\n            .requestMatchers(&quot;/api/*&quot;).hasAuthority(&quot;USER&quot;)\r\n            .anyRequest()\r\n            .authenticated()\r\n            .and()\r\n            .exceptionHandling()\r\n            .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\r\n            .and()\r\n            .formLogin().passwordParameter(&quot;code&quot;).usernameParameter(&quot;email&quot;)\r\n            .successHandler((request, response, authentication) -&gt; {\r\n                response.setStatus(HttpServletResponse.SC_OK);\r\n            }).failureHandler((request, response, exception) -&gt; response.setStatus(HttpServletResponse.SC_UNAUTHORIZED))\r\n            .permitAll()\r\n            .and()\r\n            .logout()\r\n            .logoutSuccessUrl(&quot;/&quot;)\r\n            .deleteCookies(&quot;JSESSIONID&quot;)\r\n            .and()\r\n            .rememberMe()        .tokenRepository(persistentTokenRepository())\r\n.userDetailsService(userDetailsService())\r\n            .alwaysRemember(true)\r\n            .tokenValiditySeconds(24*60*60*14)\r\n            .key(&quot;Mykey&quot;);\r\n    return http.build();\r\n\r\n    @Bean\r\npublic PersistentTokenRepository persistentTokenRepository(){\r\n    JdbcTokenRepositoryImpl tokenRepository = new JdbcTokenRepositoryImpl();\r\n    tokenRepository.setDataSource(dataSource);\r\n    return tokenRepository;\r\n}\r\n```\r\n\r\nWhen requested from any of the authorized user paths, a 401 is returned from exceptionHandling(). There are two Set-Cookies in a row in the response headers:\r\n\r\n\r\n    Set-Cookie: remember-me=; Max-Age=0; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/\r\n\r\n    Set-Cookie: remember-me=aFRLMWhLYkhmNzVLMWh6M2I0b2ZYQSUzRCUzRDo2Snd1ZWFkcTFZRGlzZXp4RjAwRHlBJTNEJTNE; Max-Age=1209600; Expires=Thu, 29-Jun-2023 23:40:17 GMT; Path=/; HttpOnly\r\n\r\n\r\nThere is a table in the database and every time a new remember-me token is created:\r\n[persistent table](https://i.stack.imgur.com/F8TO2.png)\r\n\r\n\r\nIt is necessary that the cookie is not reset and works all the time tokenValiditySeconds. Please, tell me what could be the problem?","title":"Remember-me in Spring Security doesn&#39;t work","body":"<p>Faced the following problem: when you try to delete the JSESSIONID or restart the browser, the next request to the server resets the remember-me Cookie and does not confirm the session.</p>\n<pre><code>http\n            .authenticationManager(authManager(http))\n            .authorizeHttpRequests()\n            .requestMatchers(&quot;/auth/sendCode&quot;, &quot;/login&quot;).permitAll()\n            .requestMatchers(&quot;/api/*&quot;).hasAuthority(&quot;USER&quot;)\n            .anyRequest()\n            .authenticated()\n            .and()\n            .exceptionHandling()\n            .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\n            .and()\n            .formLogin().passwordParameter(&quot;code&quot;).usernameParameter(&quot;email&quot;)\n            .successHandler((request, response, authentication) -&gt; {\n                response.setStatus(HttpServletResponse.SC_OK);\n            }).failureHandler((request, response, exception) -&gt; response.setStatus(HttpServletResponse.SC_UNAUTHORIZED))\n            .permitAll()\n            .and()\n            .logout()\n            .logoutSuccessUrl(&quot;/&quot;)\n            .deleteCookies(&quot;JSESSIONID&quot;)\n            .and()\n            .rememberMe()        .tokenRepository(persistentTokenRepository())\n.userDetailsService(userDetailsService())\n            .alwaysRemember(true)\n            .tokenValiditySeconds(24*60*60*14)\n            .key(&quot;Mykey&quot;);\n    return http.build();\n\n    @Bean\npublic PersistentTokenRepository persistentTokenRepository(){\n    JdbcTokenRepositoryImpl tokenRepository = new JdbcTokenRepositoryImpl();\n    tokenRepository.setDataSource(dataSource);\n    return tokenRepository;\n}\n</code></pre>\n<p>When requested from any of the authorized user paths, a 401 is returned from exceptionHandling(). There are two Set-Cookies in a row in the response headers:</p>\n<pre><code>Set-Cookie: remember-me=; Max-Age=0; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/\n\nSet-Cookie: remember-me=aFRLMWhLYkhmNzVLMWh6M2I0b2ZYQSUzRCUzRDo2Snd1ZWFkcTFZRGlzZXp4RjAwRHlBJTNEJTNE; Max-Age=1209600; Expires=Thu, 29-Jun-2023 23:40:17 GMT; Path=/; HttpOnly\n</code></pre>\n<p>There is a table in the database and every time a new remember-me token is created:\n<a href=\"https://i.stack.imgur.com/F8TO2.png\" rel=\"nofollow noreferrer\">persistent table</a></p>\n<p>It is necessary that the cookie is not reset and works all the time tokenValiditySeconds. Please, tell me what could be the problem?</p>\n"},{"tags":["java","remedy"],"answers":[{"tags":[],"owner":{"account_id":1912441,"reputation":2961,"user_id":1725871,"accept_rate":88,"display_name":"JoSSte"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1581930132,"creation_date":1581798051,"answer_id":60242767,"question_id":60090160,"body_markdown":"The API provides this. Look in the `ARServerUser` javadoc:\r\n\r\nIt is used like this:\r\n\r\n    //connect to AR server\r\n    ARServerUser server = new ARServerUser();\r\n    server.setServer(&quot;localhost&quot;);\r\n    server.setUser(&quot;Demo&quot;);\r\n    server.setPassword(&quot;&quot;);\r\n    // begin bulk transaction\r\n    server.beginBulkEntryTransaction();\r\n    //create and submit Entry Objects\r\n    \r\n    for(int x = 0; x &lt; 10; x++){\r\n      try {\r\n\t\t\tEntry entry = new Entry();\r\n\t\t\tentry.put(Constants.AR_CORE_SUBMITTER, new Value(submitter));\r\n\t\t    entry.put(Constants.AR_CORE_STATUS,new Value(status, DataType.ENUM));\r\n   \t\t\tentry.put(Constants.AR_CORE_SHORT_DESCRIPTION, new Value(shortDesc));\r\n\t\t\tentryIdOut = server.createEntry(formName, entry);\r\n\t\t} catch (ARException e) {\r\n\t\t\tARExceptionHandler(e, &quot;Cannot create the entry.&quot; );\r\n\t\t}\r\n    }\r\n    //Commit Bulk transaction: all entries are saved to Remedy\r\n     List&lt;BulkEntryReturn&gt;  bulkIds = server.endBulkEntryTransaction(Constants.AR_BULK_ENTRY_ACTION_SEND);\r\n     //bulkIds now contains all the entry Ids for your committed entries\r\n    \r\n\r\nNote that the code above has some uninitialized variables, so will not run as is (and may throw an `ARBulkException`)","title":"Is there any way to create multiple records at once in BMC Remedy using Java?","body":"<p>The API provides this. Look in the <code>ARServerUser</code> javadoc:</p>\n\n<p>It is used like this:</p>\n\n<pre><code>//connect to AR server\nARServerUser server = new ARServerUser();\nserver.setServer(\"localhost\");\nserver.setUser(\"Demo\");\nserver.setPassword(\"\");\n// begin bulk transaction\nserver.beginBulkEntryTransaction();\n//create and submit Entry Objects\n\nfor(int x = 0; x &lt; 10; x++){\n  try {\n        Entry entry = new Entry();\n        entry.put(Constants.AR_CORE_SUBMITTER, new Value(submitter));\n        entry.put(Constants.AR_CORE_STATUS,new Value(status, DataType.ENUM));\n        entry.put(Constants.AR_CORE_SHORT_DESCRIPTION, new Value(shortDesc));\n        entryIdOut = server.createEntry(formName, entry);\n    } catch (ARException e) {\n        ARExceptionHandler(e, \"Cannot create the entry.\" );\n    }\n}\n//Commit Bulk transaction: all entries are saved to Remedy\n List&lt;BulkEntryReturn&gt;  bulkIds = server.endBulkEntryTransaction(Constants.AR_BULK_ENTRY_ACTION_SEND);\n //bulkIds now contains all the entry Ids for your committed entries\n</code></pre>\n\n<p>Note that the code above has some uninitialized variables, so will not run as is (and may throw an <code>ARBulkException</code>)</p>\n"}],"owner":{"account_id":11270861,"reputation":349,"user_id":8266370,"display_name":"Dusayanta Prasad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":491,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":60242767,"answer_count":1,"score":1,"last_activity_date":1686945492,"creation_date":1580976037,"question_id":60090160,"body_markdown":"Is it good to get the ARServerUser context once and call the setEntry method multiple times in the loop or, is there any better way to do this?","title":"Is there any way to create multiple records at once in BMC Remedy using Java?","body":"<p>Is it good to get the ARServerUser context once and call the setEntry method multiple times in the loop or, is there any better way to do this?</p>\n"},{"tags":["java","neo4j","spring-data","spring-data-neo4j"],"answers":[{"tags":[],"owner":{"account_id":13001928,"reputation":46,"user_id":9397755,"display_name":"Jennifer Reif"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686945191,"creation_date":1686945191,"answer_id":76493216,"question_id":76427799,"body_markdown":"If I understand correctly, I did something similar with the Java version data where we have child deltas of different types. A colleague showed me how to create an abstract Delta class that several other classes extended. The overridden toString method should give you the type of the subclass coming back. https://github.com/JMHReif/sdn-jdk-versions/blob/gerrits-playground/src/main/java/com/jmhreif/sdnjdkversions/domain/Delta.java","title":"How to hydrate a spring data neo4j entity with a field that is defined as a List of interaces?","body":"<p>If I understand correctly, I did something similar with the Java version data where we have child deltas of different types. A colleague showed me how to create an abstract Delta class that several other classes extended. The overridden toString method should give you the type of the subclass coming back. <a href=\"https://github.com/JMHReif/sdn-jdk-versions/blob/gerrits-playground/src/main/java/com/jmhreif/sdnjdkversions/domain/Delta.java\" rel=\"nofollow noreferrer\">https://github.com/JMHReif/sdn-jdk-versions/blob/gerrits-playground/src/main/java/com/jmhreif/sdnjdkversions/domain/Delta.java</a></p>\n"}],"owner":{"account_id":23790128,"reputation":31,"user_id":17801653,"display_name":"Hunter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686945191,"creation_date":1686182470,"question_id":76427799,"body_markdown":"If my Entity has a field which is a Collection of interface types how can I tell spring data to hydrate each item in the collection based on the correct concrete type? Is there some way I can make a custom mapping which makes spring instantiate a Song class for example if there is some data returned from neo4j that uniquely identifies the record as a Song class (the Song class implements MusicItem)? My musicItems collection below should have multiple entries all with concrete types of MusicItem.\r\n\r\nEntity\r\n```\r\npublic class Dater implements CSVFormat{\r\n\r\n\t@Id\r\n\tprivate String userId;\r\n\r\n\t@Relationship(type = &quot;LISTENS_TO&quot;)\r\n\tprivate Set&lt;MusicItem&gt; musicItems = new HashSet&lt;&gt;();\r\n```\r\nMusicItem interface of music that Dater has listened to\r\n```\r\npublic interface MusicItem{\r\n\r\n\tString getName();\r\n\tMusicItemType getType();\r\n\r\n}\r\n```\r\n\r\nExample implementation of MusicItem I want to instantiate when it is returned from db\r\n```\r\npublic class Song implements MusicItem{\r\n\t@Id\r\n\t@GeneratedValue\r\n\tprivate Long id;\r\n\r\n}\r\n```\r\nRepository query\r\n```\r\npublic interface DaterRepository extends Neo4jRepository&lt;Dater,String&gt;{\r\n\r\n\t@Query(&quot;MATCH (user:Dater { userId: $userId })-[:LISTENS_TO]-&gt;(musicItems)&lt;-[mr:LISTENS_TO]-(matches:Dater) &quot;\r\n\t\t\t+ &quot;where id(user) &lt;&gt; id(matches) &quot;\r\n\t\t\t+ &quot;RETURN matches, collect(mr), collect(musicItems) &quot;)\r\n\tList&lt;Dater&gt; getMatches(String userId);\r\n```\r\nExample data in db\r\n```\r\n{\r\n  &quot;identity&quot;: 2912,\r\n  &quot;labels&quot;: [\r\n    &quot;MusicItem&quot;,\r\n    &quot;Song&quot;\r\n  ],\r\n  &quot;properties&quot;: {\r\n&quot;name&quot;: &quot;Youth&quot;,\r\n&quot;isrc&quot;: &quot;QM6P41904468&quot;,\r\n&quot;smallImageUrl&quot;: &quot;https://is4-ssl.mzstatic.com/image/thumb/Music123/v4/3e/29/f8/3e29f87e-239e-d85d-f30e-b93689e863ec/194491036614.jpg/75x75bb.jpg&quot;,\r\n&quot;mediumImageUrl&quot;: &quot;https://is4-ssl.mzstatic.com/image/thumb/Music123/v4/3e/29/f8/3e29f87e-239e-d85d-f30e-b93689e863ec/194491036614.jpg/320x320bb.jpg&quot;,\r\n&quot;largeImageUrl&quot;: &quot;https://is4-ssl.mzstatic.com/image/thumb/Music123/v4/3e/29/f8/3e29f87e-239e-d85d-f30e-b93689e863ec/194491036614.jpg/640x640bb.jpg&quot;\r\n  }\r\n}","title":"How to hydrate a spring data neo4j entity with a field that is defined as a List of interaces?","body":"<p>If my Entity has a field which is a Collection of interface types how can I tell spring data to hydrate each item in the collection based on the correct concrete type? Is there some way I can make a custom mapping which makes spring instantiate a Song class for example if there is some data returned from neo4j that uniquely identifies the record as a Song class (the Song class implements MusicItem)? My musicItems collection below should have multiple entries all with concrete types of MusicItem.</p>\n<p>Entity</p>\n<pre><code>public class Dater implements CSVFormat{\n\n    @Id\n    private String userId;\n\n    @Relationship(type = &quot;LISTENS_TO&quot;)\n    private Set&lt;MusicItem&gt; musicItems = new HashSet&lt;&gt;();\n</code></pre>\n<p>MusicItem interface of music that Dater has listened to</p>\n<pre><code>public interface MusicItem{\n\n    String getName();\n    MusicItemType getType();\n\n}\n</code></pre>\n<p>Example implementation of MusicItem I want to instantiate when it is returned from db</p>\n<pre><code>public class Song implements MusicItem{\n    @Id\n    @GeneratedValue\n    private Long id;\n\n}\n</code></pre>\n<p>Repository query</p>\n<pre><code>public interface DaterRepository extends Neo4jRepository&lt;Dater,String&gt;{\n\n    @Query(&quot;MATCH (user:Dater { userId: $userId })-[:LISTENS_TO]-&gt;(musicItems)&lt;-[mr:LISTENS_TO]-(matches:Dater) &quot;\n            + &quot;where id(user) &lt;&gt; id(matches) &quot;\n            + &quot;RETURN matches, collect(mr), collect(musicItems) &quot;)\n    List&lt;Dater&gt; getMatches(String userId);\n</code></pre>\n<p>Example data in db</p>\n<pre><code>{\n  &quot;identity&quot;: 2912,\n  &quot;labels&quot;: [\n    &quot;MusicItem&quot;,\n    &quot;Song&quot;\n  ],\n  &quot;properties&quot;: {\n&quot;name&quot;: &quot;Youth&quot;,\n&quot;isrc&quot;: &quot;QM6P41904468&quot;,\n&quot;smallImageUrl&quot;: &quot;https://is4-ssl.mzstatic.com/image/thumb/Music123/v4/3e/29/f8/3e29f87e-239e-d85d-f30e-b93689e863ec/194491036614.jpg/75x75bb.jpg&quot;,\n&quot;mediumImageUrl&quot;: &quot;https://is4-ssl.mzstatic.com/image/thumb/Music123/v4/3e/29/f8/3e29f87e-239e-d85d-f30e-b93689e863ec/194491036614.jpg/320x320bb.jpg&quot;,\n&quot;largeImageUrl&quot;: &quot;https://is4-ssl.mzstatic.com/image/thumb/Music123/v4/3e/29/f8/3e29f87e-239e-d85d-f30e-b93689e863ec/194491036614.jpg/640x640bb.jpg&quot;\n  }\n}\n</code></pre>\n"},{"tags":["java","logic"],"answers":[{"tags":[],"owner":{"account_id":20511355,"reputation":500,"user_id":15053047,"display_name":"IWilms"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686945176,"creation_date":1686945176,"answer_id":76493214,"question_id":76409379,"body_markdown":"The task is basically to find the common tail of two strings and print the number of characters of both strings that are not part of the common tail.\r\nThis is the code we are talking about.\r\n```java-lang\r\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\r\n\t\tString a=br.readLine();\r\n\t\tString b=br.readLine();\r\n\t\tchar [] arrA = a.toCharArray();\r\n\t\tchar [] arrB = b.toCharArray();\r\n\t\tlong count =0;\r\n\t\tif(arrA.length&gt;arrB.length) count = arrA.length-arrB.length;\r\n\t\telse count = arrB.length-arrA.length;\r\n```\r\n`count` is the difference in length of both strings. The beginning of the longer string cannot be part of the common tail.\r\nBut this `for` loop is wrong:\r\n```java-lang\r\n\t\tfor(int i=0;i&lt;Math.min(arrA.length,arrB.length);i++) {\r\n\t\t\tif(arrA[arrA.length-1-i]!=arrB[arrB.length-1-i]) count=count+2;\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(count);\r\n```\r\nYou iterate backwards and idle as long as the characters of both strings match. However, once they differ, you must add them, regardless of whether they match again or not. Consider\r\n```java-lang\r\nABA\r\nACA\r\n```\r\nThis version will print 2 instead of the correct 4, because it counts `B` and `C`, but not the first two `A`. You could fix it like this\r\n```java-lang\r\n        boolean commonTail = true;\r\n        for(int i=0;i&lt;Math.min(arrA.length,arrB.length);i++) {\r\n            if(arrA[arrA.length-1-i]!=arrB[arrB.length-1-i])\r\n                commonTail = false;\r\n            if(!commonTail)\r\n                count=count+2;\r\n        }\r\n        System.out.println(count);\r\n```","title":"Counting equal elements characters in java","body":"<p>The task is basically to find the common tail of two strings and print the number of characters of both strings that are not part of the common tail.\nThis is the code we are talking about.</p>\n<pre><code>        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        String a=br.readLine();\n        String b=br.readLine();\n        char [] arrA = a.toCharArray();\n        char [] arrB = b.toCharArray();\n        long count =0;\n        if(arrA.length&gt;arrB.length) count = arrA.length-arrB.length;\n        else count = arrB.length-arrA.length;\n</code></pre>\n<p><code>count</code> is the difference in length of both strings. The beginning of the longer string cannot be part of the common tail.\nBut this <code>for</code> loop is wrong:</p>\n<pre><code>        for(int i=0;i&lt;Math.min(arrA.length,arrB.length);i++) {\n            if(arrA[arrA.length-1-i]!=arrB[arrB.length-1-i]) count=count+2;\n        }\n        \n        System.out.println(count);\n</code></pre>\n<p>You iterate backwards and idle as long as the characters of both strings match. However, once they differ, you must add them, regardless of whether they match again or not. Consider</p>\n<pre><code>ABA\nACA\n</code></pre>\n<p>This version will print 2 instead of the correct 4, because it counts <code>B</code> and <code>C</code>, but not the first two <code>A</code>. You could fix it like this</p>\n<pre><code>        boolean commonTail = true;\n        for(int i=0;i&lt;Math.min(arrA.length,arrB.length);i++) {\n            if(arrA[arrA.length-1-i]!=arrB[arrB.length-1-i])\n                commonTail = false;\n            if(!commonTail)\n                count=count+2;\n        }\n        System.out.println(count);\n</code></pre>\n"}],"owner":{"account_id":11373766,"reputation":101,"user_id":11910952,"display_name":"Drigy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76493214,"answer_count":1,"score":0,"last_activity_date":1686945176,"creation_date":1685992313,"question_id":76409379,"body_markdown":"I&#39;m doing some exercises on codeforces and learning java. And i came across this deviation in solution results. When i test them in my console they work as intended but only one works on codeforces judge.\r\nThere&#39;s this code(that can pass the tests, in java): https://codeforces.com/contest/1005/submission/208626855 \r\n\r\nAnd this one, that can&#39;t pass test 6 and probably many others: https://codeforces.com/contest/1005/submission/208624411 \r\n\r\nTest 6 is something like, input:\r\n\r\n-string a:&quot;aaaaaaaaaaaaa&quot;... 399991 times\r\n       \r\n-string b:&quot;&quot;\r\n\r\nOutput: mine(in codeforces is 5) and real one is 399991.\r\n\r\nI don&#39;t know what differences are happening and don&#39;t know where can I ask this besides here, thank you for the help.","title":"Counting equal elements characters in java","body":"<p>I'm doing some exercises on codeforces and learning java. And i came across this deviation in solution results. When i test them in my console they work as intended but only one works on codeforces judge.\nThere's this code(that can pass the tests, in java): <a href=\"https://codeforces.com/contest/1005/submission/208626855\" rel=\"nofollow noreferrer\">https://codeforces.com/contest/1005/submission/208626855</a></p>\n<p>And this one, that can't pass test 6 and probably many others: <a href=\"https://codeforces.com/contest/1005/submission/208624411\" rel=\"nofollow noreferrer\">https://codeforces.com/contest/1005/submission/208624411</a></p>\n<p>Test 6 is something like, input:</p>\n<p>-string a:&quot;aaaaaaaaaaaaa&quot;... 399991 times</p>\n<p>-string b:&quot;&quot;</p>\n<p>Output: mine(in codeforces is 5) and real one is 399991.</p>\n<p>I don't know what differences are happening and don't know where can I ask this besides here, thank you for the help.</p>\n"},{"tags":["java","javafx","jdbc"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":4,"creation_date":1686759244,"post_id":76475516,"comment_id":134844322,"body_markdown":"What implementation of `Executor` is used for `exec`?","body":"What implementation of <code>Executor</code> is used for <code>exec</code>?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":4,"creation_date":1686762479,"post_id":76475516,"comment_id":134844992,"body_markdown":"And how are you handling connections? Are you using a single connection, or a connection pool?","body":"And how are you handling connections? Are you using a single connection, or a connection pool?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":4,"creation_date":1686766611,"post_id":76475516,"comment_id":134845811,"body_markdown":"(It sounds like you are already submitting these on different threads, but using the same connection. MySQL will only allocate one server-side thread per connection, so the second call will not be able to retrieve data until the first call completes. Also note that even with multiple connections, if tables are locked then even other connections can be blocked by the first connection.)","body":"(It sounds like you are already submitting these on different threads, but using the same connection. MySQL will only allocate one server-side thread per connection, so the second call will not be able to retrieve data until the first call completes. Also note that even with multiple connections, if tables are locked then even other connections can be blocked by the first connection.)"},{"owner":{"account_id":18455933,"reputation":311,"user_id":13444713,"display_name":"Abderaouf Boucenna"},"score":0,"creation_date":1686771155,"post_id":76475516,"comment_id":134846562,"body_markdown":"@James_D i dont know if Im understanding you correctly, but this is how I implemented `exec` :  ```exec = Executors.newCachedThreadPool(runnable -&gt; {\n            Thread t = new Thread(runnable);\n            t.setDaemon(true);\n            return t;\n        });```","body":"@James_D i dont know if Im understanding you correctly, but this is how I implemented <code>exec</code> :  <code>exec = Executors.newCachedThreadPool(runnable -&gt; {             Thread t = new Thread(runnable);             t.setDaemon(true);             return t;         });</code>"},{"owner":{"account_id":18455933,"reputation":311,"user_id":13444713,"display_name":"Abderaouf Boucenna"},"score":0,"creation_date":1686771403,"post_id":76475516,"comment_id":134846602,"body_markdown":"@James_D for the connection im using a single connection, there is a class called DataHandler where all the requests to the database are made, and the instance of this class is shared across all the controllers. From your last comment, I guess what I am trying to achieve is impossible since im using the same connection, and even a connection pool can&#39;t fix the issue.","body":"@James_D for the connection im using a single connection, there is a class called DataHandler where all the requests to the database are made, and the instance of this class is shared across all the controllers. From your last comment, I guess what I am trying to achieve is impossible since im using the same connection, and even a connection pool can&#39;t fix the issue."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":4,"creation_date":1686772206,"post_id":76475516,"comment_id":134846745,"body_markdown":"*&quot;for the connection im using a single connection&quot;* This is the problem. *&quot;even a connection pool can&#39;t fix the issue&quot;*. No, this is not necessarily correct. If you use a connection pool, then each request will have its own connection, and MySQL will assign a thread for each connection. As long as the database calls don&#39;t require transactional locking (e.g. if you&#39;re only reading data), they should be able to proceed in parallel.","body":"<i>&quot;for the connection im using a single connection&quot;</i> This is the problem. <i>&quot;even a connection pool can&#39;t fix the issue&quot;</i>. No, this is not necessarily correct. If you use a connection pool, then each request will have its own connection, and MySQL will assign a thread for each connection. As long as the database calls don&#39;t require transactional locking (e.g. if you&#39;re only reading data), they should be able to proceed in parallel."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":4,"creation_date":1686772320,"post_id":76475516,"comment_id":134846774,"body_markdown":"All you need to do is modify the `DataHandler` class so it uses a connection pool instead of a single connection. Since you have factored the database access into a separate class (which is good practice for exactly this kind of reason) it should be a fairly simple modification.","body":"All you need to do is modify the <code>DataHandler</code> class so it uses a connection pool instead of a single connection. Since you have factored the database access into a separate class (which is good practice for exactly this kind of reason) it should be a fairly simple modification."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1686812097,"post_id":76475516,"comment_id":134851231,"body_markdown":"Here&#39;s a [tutorial](https://www.baeldung.com/hikaricp) on how to add the Hikari connection pool to your application, in case that might help you.  Hikari is the same connection pool that Spring uses.  But if you don&#39;t need all of the other stuff and complexity in Spring and you already have a working app based on simple JDBC connections, just adding Hikari to your app by following the linked tutorial should be pretty straight-forward.","body":"Here&#39;s a <a href=\"https://www.baeldung.com/hikaricp\" rel=\"nofollow noreferrer\">tutorial</a> on how to add the Hikari connection pool to your application, in case that might help you.  Hikari is the same connection pool that Spring uses.  But if you don&#39;t need all of the other stuff and complexity in Spring and you already have a working app based on simple JDBC connections, just adding Hikari to your app by following the linked tutorial should be pretty straight-forward."},{"owner":{"account_id":18455933,"reputation":311,"user_id":13444713,"display_name":"Abderaouf Boucenna"},"score":2,"creation_date":1686869791,"post_id":76475516,"comment_id":134861563,"body_markdown":"After some research and tests, I came with a solution but Im not sure if this is how it is supposed to be coded: i changed the `DataHandler` class a bit and used Hikari as suggested by @jewelsea, I removed the `Connection conn` static variable, created a datasource and used `try (Connection conn = datasource.getConnection()) {}` before *EACH* call to the database (`datasource` is a `HikariDataSource`), I got the result I wanted but i dont know if my code is now optimal.","body":"After some research and tests, I came with a solution but Im not sure if this is how it is supposed to be coded: i changed the <code>DataHandler</code> class a bit and used Hikari as suggested by @jewelsea, I removed the <code>Connection conn</code> static variable, created a datasource and used <code>try (Connection conn = datasource.getConnection()) {}</code> before <i>EACH</i> call to the database (<code>datasource</code> is a <code>HikariDataSource</code>), I got the result I wanted but i dont know if my code is now optimal."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1686872961,"post_id":76475516,"comment_id":134861827,"body_markdown":"@AbderaoufBoucenna you can [self answer](https://stackoverflow.com/help/self-answer).  If you provide enough detail in the answer it will likely be reviewed and feedback provided (unless it is all OK, in which case it will just be upvoted).  If you are using Hikari correctly (sounds like you are), the solution will be pretty optimal.","body":"@AbderaoufBoucenna you can <a href=\"https://stackoverflow.com/help/self-answer\">self answer</a>.  If you provide enough detail in the answer it will likely be reviewed and feedback provided (unless it is all OK, in which case it will just be upvoted).  If you are using Hikari correctly (sounds like you are), the solution will be pretty optimal."}],"answers":[{"tags":[],"owner":{"account_id":22384219,"reputation":108,"user_id":16597286,"display_name":"Windir"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1686776988,"creation_date":1686776988,"answer_id":76477557,"question_id":76475516,"body_markdown":"By using a thread pool executor the tasks will be executed on a separate thread.\r\n\r\n    private ExecutorService exec = Executors.newFixedThreadPool(n); \r\n    //n the number of threads\r\n\r\n    loadingHbox.setVisible(true);\r\n\r\n       Task&lt;Void&gt; task = new Task&lt;&gt;() {\r\n           @Override\r\n           protected Void call() {\r\n               if (!searchString.isBlank()) {\r\n                   MHHistoriqueTable.setItems(db.getProduitsVendusParPeriode(dateDebut, dateFin, MHEspeceCheck.isSelected(), MHDebitCheck.isSelected(), searchString));\r\n                   MHHNbreResultatsText.setText(MHHistoriqueTable.getItems().size() + &quot; vente(s)&quot;);\r\n               }\r\n               return null;\r\n           }\r\n       };\r\n\r\n    exec.submit(task);\r\n\r\nMake sure to shutdown the task aswell.\r\n\r\n","title":"Execute multiple database calls through different threads all at once","body":"<p>By using a thread pool executor the tasks will be executed on a separate thread.</p>\n<pre><code>private ExecutorService exec = Executors.newFixedThreadPool(n); \n//n the number of threads\n\nloadingHbox.setVisible(true);\n\n   Task&lt;Void&gt; task = new Task&lt;&gt;() {\n       @Override\n       protected Void call() {\n           if (!searchString.isBlank()) {\n               MHHistoriqueTable.setItems(db.getProduitsVendusParPeriode(dateDebut, dateFin, MHEspeceCheck.isSelected(), MHDebitCheck.isSelected(), searchString));\n               MHHNbreResultatsText.setText(MHHistoriqueTable.getItems().size() + &quot; vente(s)&quot;);\n           }\n           return null;\n       }\n   };\n\nexec.submit(task);\n</code></pre>\n<p>Make sure to shutdown the task aswell.</p>\n"},{"tags":[],"owner":{"account_id":18455933,"reputation":311,"user_id":13444713,"display_name":"Abderaouf Boucenna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686944783,"creation_date":1686944783,"answer_id":76493177,"question_id":76475516,"body_markdown":"## UPDATE ##\r\nAs suggested by @jewelsea in the comments, I implemented HikariCP to my DAO to use a connection pool.\r\nThis is how my DAO looked before :\r\n```\r\npublic class DataHandler {\r\n    private static DataHandler handler = null;\r\n    private static Connection conn = null;\r\n    private static Statement stmt = null;\r\n    private boolean connected = false;\r\n\r\n    private DataHandler() {\r\n        dbConnection(&quot;localhost:3306&quot;);\r\n\r\n        if (getConnection() == null) {\r\n            connected = false;\r\n            return;\r\n        }\r\n    }\r\n\r\n    private void dbConnection(String ipPort) {\r\n        try {\r\n            String dbUrl = &quot;jdbc:mysql://&quot; + ipPort + &quot;/database?serverTimezone=UTC&quot;;\r\n\r\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;).getDeclaredConstructor().newInstance();\r\n            conn = DriverManager.getConnection(dbUrl, &quot;user&quot;, &quot;password&quot;);\r\n\r\n            connected = true;\r\n        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | SQLException | NoSuchMethodException | InvocationTargetException ex) {\r\n            connected = false;\r\n        }\r\n    }\r\n\r\n    public static DataHandler getInstance() {\r\n        if (handler == null) handler = new DataHandler();\r\n\r\n        return handler;\r\n    }\r\n\r\n    public Connection getConnection() {\r\n        return DataHandler.conn;\r\n    }\r\n\r\n    public boolean isConnected() {\r\n        return connected;\r\n    }\r\n\r\n    // To retrieve data or to do any call to the database, the functions looked like this\r\n    public void loadAdherents() {\r\n        try {\r\n            adherents.clear();\r\n\r\n            String sql = &quot;SELECT * FROM ADHERENTS ORDER BY nom_prenom&quot;;\r\n            ResultSet rs = getConnection().createStatement().executeQuery(sql);\r\n\r\n            while (rs.next()) {\r\n                /* DATA FETCHING */\r\n            }\r\n\r\n            rs.close();\r\n        } catch (SQLException ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI was using a ___single connection___ `Connection conn` to make any call to the database, which was highly likely the &quot;issue&quot; with my program.\r\n\r\nAfter implementing HikariCP, my DAO became like this (pay attention to the try-catch when retrieving data) :\r\n```\r\npublic class DataHandler {\r\n    private static DataHandler handler = null;\r\n    private static HikariDataSource dataSource = null;\r\n    private static Statement stmt = null;\r\n    private boolean connected = false;\r\n\r\n    private DataHandler() {\r\n        dbConnection(&quot;localhost:3306&quot;);\r\n\r\n        if (getDataSource() == null) {\r\n            connected = false;\r\n            return;\r\n        }\r\n    }\r\n\r\n    private void dbConnection(String ipPort) {\r\n        String dbUrl = &quot;jdbc:mysql://&quot; + ipPort + &quot;/database?serverTimezone=UTC&quot;;\r\n\r\n        HikariConfig config = new HikariConfig();\r\n\r\n        config.setJdbcUrl(dbUrl);\r\n        config.setUsername(&quot;user&quot;);\r\n        config.setPassword(&quot;password&quot;);\r\n        config.addDataSourceProperty(&quot;cachePrepStmts&quot;, &quot;true&quot;);\r\n        config.addDataSourceProperty(&quot;prepStmtCacheSize&quot;, &quot;250&quot;);\r\n        config.addDataSourceProperty(&quot;prepStmtCacheSqlLimit&quot;, &quot;2048&quot;);\r\n        config.addDataSourceProperty(&quot;useServerPrepStmts&quot;, &quot;true&quot;);\r\n        config.addDataSourceProperty(&quot;useLocalSessionState&quot;, &quot;true&quot;);\r\n        config.addDataSourceProperty(&quot;rewriteBatchedStatements&quot;, &quot;true&quot;);\r\n        config.addDataSourceProperty(&quot;cacheResultSetMetadata&quot;, &quot;true&quot;);\r\n        config.addDataSourceProperty(&quot;elideSetAutoCommits&quot;, &quot;true&quot;);\r\n        config.addDataSourceProperty(&quot;maintainTimeStats&quot;, &quot;false&quot;);\r\n        config.setMaximumPoolSize(30);\r\n        config.setAutoCommit(true);\r\n\r\n        try {\r\n            dataSource = new HikariDataSource(config);\r\n            connected = true;\r\n        } catch (HikariPool.PoolInitializationException e) {\r\n            connected = false;\r\n        }\r\n    }\r\n\r\n    public static DataHandler getInstance() {\r\n        if (handler == null) handler = new DataHandler();\r\n\r\n        return handler;\r\n    }\r\n\r\n    public static HikariDataSource getDataSource() {\r\n        return dataSource;\r\n    }\r\n\r\n    public Connection getConnection() {\r\n        try {\r\n            return getDataSource().getConnection();\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public boolean isConnected() {\r\n        return connected;\r\n    }\r\n\r\n    // I had to add Connection conn = getConnection() in every try-catch to get a connection\r\n    // from the connection pool\r\n    // and the try-catch block automatically closes the connection once its done\r\n    public void loadAdherents() {\r\n        try (Connection conn = getConnection()) {\r\n            adherents.clear();\r\n\r\n            String sql = &quot;SELECT * FROM ADHERENTS ORDER BY nom_prenom&quot;;\r\n            ResultSet rs = conn.createStatement().executeQuery(sql);\r\n\r\n            while (rs.next()) {\r\n                /* FETCHING DATA */\r\n            }\r\n\r\n            rs.close();\r\n        } catch (SQLException ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBefore every call to the database, I added `try (Connection conn = getConnection())` to use a connection from the connection pool.","title":"Execute multiple database calls through different threads all at once","body":"<h2>UPDATE</h2>\n<p>As suggested by @jewelsea in the comments, I implemented HikariCP to my DAO to use a connection pool.\nThis is how my DAO looked before :</p>\n<pre><code>public class DataHandler {\n    private static DataHandler handler = null;\n    private static Connection conn = null;\n    private static Statement stmt = null;\n    private boolean connected = false;\n\n    private DataHandler() {\n        dbConnection(&quot;localhost:3306&quot;);\n\n        if (getConnection() == null) {\n            connected = false;\n            return;\n        }\n    }\n\n    private void dbConnection(String ipPort) {\n        try {\n            String dbUrl = &quot;jdbc:mysql://&quot; + ipPort + &quot;/database?serverTimezone=UTC&quot;;\n\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;).getDeclaredConstructor().newInstance();\n            conn = DriverManager.getConnection(dbUrl, &quot;user&quot;, &quot;password&quot;);\n\n            connected = true;\n        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | SQLException | NoSuchMethodException | InvocationTargetException ex) {\n            connected = false;\n        }\n    }\n\n    public static DataHandler getInstance() {\n        if (handler == null) handler = new DataHandler();\n\n        return handler;\n    }\n\n    public Connection getConnection() {\n        return DataHandler.conn;\n    }\n\n    public boolean isConnected() {\n        return connected;\n    }\n\n    // To retrieve data or to do any call to the database, the functions looked like this\n    public void loadAdherents() {\n        try {\n            adherents.clear();\n\n            String sql = &quot;SELECT * FROM ADHERENTS ORDER BY nom_prenom&quot;;\n            ResultSet rs = getConnection().createStatement().executeQuery(sql);\n\n            while (rs.next()) {\n                /* DATA FETCHING */\n            }\n\n            rs.close();\n        } catch (SQLException ex) {\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I was using a <em><strong>single connection</strong></em> <code>Connection conn</code> to make any call to the database, which was highly likely the &quot;issue&quot; with my program.</p>\n<p>After implementing HikariCP, my DAO became like this (pay attention to the try-catch when retrieving data) :</p>\n<pre><code>public class DataHandler {\n    private static DataHandler handler = null;\n    private static HikariDataSource dataSource = null;\n    private static Statement stmt = null;\n    private boolean connected = false;\n\n    private DataHandler() {\n        dbConnection(&quot;localhost:3306&quot;);\n\n        if (getDataSource() == null) {\n            connected = false;\n            return;\n        }\n    }\n\n    private void dbConnection(String ipPort) {\n        String dbUrl = &quot;jdbc:mysql://&quot; + ipPort + &quot;/database?serverTimezone=UTC&quot;;\n\n        HikariConfig config = new HikariConfig();\n\n        config.setJdbcUrl(dbUrl);\n        config.setUsername(&quot;user&quot;);\n        config.setPassword(&quot;password&quot;);\n        config.addDataSourceProperty(&quot;cachePrepStmts&quot;, &quot;true&quot;);\n        config.addDataSourceProperty(&quot;prepStmtCacheSize&quot;, &quot;250&quot;);\n        config.addDataSourceProperty(&quot;prepStmtCacheSqlLimit&quot;, &quot;2048&quot;);\n        config.addDataSourceProperty(&quot;useServerPrepStmts&quot;, &quot;true&quot;);\n        config.addDataSourceProperty(&quot;useLocalSessionState&quot;, &quot;true&quot;);\n        config.addDataSourceProperty(&quot;rewriteBatchedStatements&quot;, &quot;true&quot;);\n        config.addDataSourceProperty(&quot;cacheResultSetMetadata&quot;, &quot;true&quot;);\n        config.addDataSourceProperty(&quot;elideSetAutoCommits&quot;, &quot;true&quot;);\n        config.addDataSourceProperty(&quot;maintainTimeStats&quot;, &quot;false&quot;);\n        config.setMaximumPoolSize(30);\n        config.setAutoCommit(true);\n\n        try {\n            dataSource = new HikariDataSource(config);\n            connected = true;\n        } catch (HikariPool.PoolInitializationException e) {\n            connected = false;\n        }\n    }\n\n    public static DataHandler getInstance() {\n        if (handler == null) handler = new DataHandler();\n\n        return handler;\n    }\n\n    public static HikariDataSource getDataSource() {\n        return dataSource;\n    }\n\n    public Connection getConnection() {\n        try {\n            return getDataSource().getConnection();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    public boolean isConnected() {\n        return connected;\n    }\n\n    // I had to add Connection conn = getConnection() in every try-catch to get a connection\n    // from the connection pool\n    // and the try-catch block automatically closes the connection once its done\n    public void loadAdherents() {\n        try (Connection conn = getConnection()) {\n            adherents.clear();\n\n            String sql = &quot;SELECT * FROM ADHERENTS ORDER BY nom_prenom&quot;;\n            ResultSet rs = conn.createStatement().executeQuery(sql);\n\n            while (rs.next()) {\n                /* FETCHING DATA */\n            }\n\n            rs.close();\n        } catch (SQLException ex) {\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Before every call to the database, I added <code>try (Connection conn = getConnection())</code> to use a connection from the connection pool.</p>\n"}],"owner":{"account_id":18455933,"reputation":311,"user_id":13444713,"display_name":"Abderaouf Boucenna"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686944783,"creation_date":1686758641,"question_id":76475516,"body_markdown":"After successfully executing database calls in the background using `Task` to not freeze the UI, I noticed using the state of the tasks that only one database call at a time can be possible. The UI does not freeze but the results are a bit delayed if a call takes a lot of time.\r\n\r\nFor example, when these calls are executing seperately, I have **CALL 1** that takes ~7 seconds to retrieve data, and **CALL 2** is pretty instant and takes 550ms to retrieve data. But when I call **CALL 1** then **CALL 2** just after it, **CALL 2** does not retrieve data until **CALL 1** is done: **CALL 2** states indicates *RUNNING* until **CALL 1** states indicates *SUCCEEDED*.\r\n\r\nIs there a way to make multiple calls at the same time through different threads without one blocking the other ?\r\n\r\nHere is a sample of the code I use to make a call (**CALL 1**) to the database :\r\n ```\r\nprivate void loadHistoriqueVentesData() {\r\n    LocalDate dateDebut = MHDateDebutField.getValue();\r\n    LocalDate dateFin = MHDateFinField.getValue();\r\n    String searchString = MHSearchField.getText().trim();\r\n\r\n    if (dateDebut == null || dateFin == null)\r\n        return;\r\n\r\n    if (!MHEspeceCheck.isSelected() &amp;&amp; !MHDebitCheck.isSelected())\r\n        return;\r\n    \r\n\r\n    loadingHbox.setVisible(true);\r\n\r\n    Task&lt;Void&gt; task = new Task&lt;&gt;() {\r\n        @Override\r\n        protected Void call() {\r\n            if (!searchString.isBlank()) {\r\n                MHHistoriqueTable.setItems(db.getProduitsVendusParPeriode(dateDebut, dateFin, MHEspeceCheck.isSelected(), MHDebitCheck.isSelected(), searchString));\r\n                MHHNbreResultatsText.setText(MHHistoriqueTable.getItems().size() + &quot; vente(s)&quot;);\r\n            }\r\n            return null;\r\n        }\r\n    };\r\n\r\n    //stateProperty for Task:\r\n    task.stateProperty().addListener((observable, oldValue, newState) -&gt; {\r\n        System.out.println(newState);\r\n        if (newState == Worker.State.SUCCEEDED) {\r\n            loadingHbox.setVisible(false);\r\n        }\r\n    });\r\n    exec.execute(task);\r\n}\r\n\r\n\r\npublic ObservableList&lt;ProduitVendu&gt; getProduitsVendusParPeriode(LocalDate dateDebut, LocalDate dateFin, boolean isEspece, boolean isDebit, String nomSearch) {\r\n    try {\r\n        ObservableList&lt;ProduitVendu&gt; result = FXCollections.observableArrayList();\r\n\r\n        String sql = &quot;SELECT id_produit_vendu, PV.numero_bon, reference, designation, quantite, prix_vendu, benefice, date_vente, heure_vente FROM PRODUITS_VENDUS PV, HISTORIQUE_VENTES HV WHERE designation LIKE ? AND PV.numero_bon=HV.numero_bon AND HV.date_vente BETWEEN ? AND ?&quot;;\r\n        if (isEspece &amp;&amp; !isDebit)\r\n            sql = sql + &quot; AND HV.numero_bon NOT IN (SELECT AC.numero_bon FROM adherents_conso AC UNION SELECT PC.numero_bon FROM personnel_conso PC)&quot;;\r\n        if (!isEspece &amp;&amp; isDebit)\r\n            sql = sql + &quot; AND HV.numero_bon IN (SELECT AC.numero_bon FROM adherents_conso AC UNION SELECT PC.numero_bon FROM personnel_conso PC)&quot;;\r\n        sql = sql + &quot; ORDER BY PV.numero_bon DESC&quot;;\r\n\r\n        PreparedStatement prepare = getConnection().prepareStatement(sql);\r\n        prepare.setString(1, &quot;%&quot; + nomSearch + &quot;%&quot;);\r\n        prepare.setString(2, dateDebut.toString());\r\n        prepare.setString(3, dateFin.toString());\r\n\r\n        ResultSet rs = prepare.executeQuery();\r\n\r\n        while (rs.next()) {\r\n            int idProduitVendu = rs.getInt(&quot;id_produit_vendu&quot;);\r\n            int numeroBon = rs.getInt(&quot;numero_bon&quot;);\r\n            int reference = rs.getInt(&quot;reference&quot;);\r\n            String designation = rs.getString(&quot;designation&quot;);\r\n            int quantite = rs.getInt(&quot;quantite&quot;);\r\n            double prixVendu = rs.getDouble(&quot;prix_vendu&quot;);\r\n            double benefice = rs.getDouble(&quot;benefice&quot;);\r\n            LocalDate dateVente = rs.getDate(&quot;date_vente&quot;).toLocalDate();\r\n            LocalTime heureVente = rs.getTime(&quot;heure_vente&quot;).toLocalTime();\r\n\r\n            result.add(new ProduitVendu(idProduitVendu, numeroBon, reference, designation, quantite, prixVendu, benefice, dateVente, heureVente));\r\n        }\r\n        rs.close();\r\n\r\n        return result;\r\n    } catch (SQLException ex) {\r\n        ex.printStackTrace();\r\n    }\r\n    return null;\r\n}\r\n ```\r\nP.S.: `exec` is a `java.util.concurrent.Executor` and im using MySQL for database.","title":"Execute multiple database calls through different threads all at once","body":"<p>After successfully executing database calls in the background using <code>Task</code> to not freeze the UI, I noticed using the state of the tasks that only one database call at a time can be possible. The UI does not freeze but the results are a bit delayed if a call takes a lot of time.</p>\n<p>For example, when these calls are executing seperately, I have <strong>CALL 1</strong> that takes ~7 seconds to retrieve data, and <strong>CALL 2</strong> is pretty instant and takes 550ms to retrieve data. But when I call <strong>CALL 1</strong> then <strong>CALL 2</strong> just after it, <strong>CALL 2</strong> does not retrieve data until <strong>CALL 1</strong> is done: <strong>CALL 2</strong> states indicates <em>RUNNING</em> until <strong>CALL 1</strong> states indicates <em>SUCCEEDED</em>.</p>\n<p>Is there a way to make multiple calls at the same time through different threads without one blocking the other ?</p>\n<p>Here is a sample of the code I use to make a call (<strong>CALL 1</strong>) to the database :</p>\n<pre><code>private void loadHistoriqueVentesData() {\n   LocalDate dateDebut = MHDateDebutField.getValue();\n   LocalDate dateFin = MHDateFinField.getValue();\n   String searchString = MHSearchField.getText().trim();\n\n   if (dateDebut == null || dateFin == null)\n       return;\n\n   if (!MHEspeceCheck.isSelected() &amp;&amp; !MHDebitCheck.isSelected())\n       return;\n   \n\n   loadingHbox.setVisible(true);\n\n   Task&lt;Void&gt; task = new Task&lt;&gt;() {\n       @Override\n       protected Void call() {\n           if (!searchString.isBlank()) {\n               MHHistoriqueTable.setItems(db.getProduitsVendusParPeriode(dateDebut, dateFin, MHEspeceCheck.isSelected(), MHDebitCheck.isSelected(), searchString));\n               MHHNbreResultatsText.setText(MHHistoriqueTable.getItems().size() + &quot; vente(s)&quot;);\n           }\n           return null;\n       }\n   };\n\n   //stateProperty for Task:\n   task.stateProperty().addListener((observable, oldValue, newState) -&gt; {\n       System.out.println(newState);\n       if (newState == Worker.State.SUCCEEDED) {\n           loadingHbox.setVisible(false);\n       }\n   });\n   exec.execute(task);\n}\n\n\npublic ObservableList&lt;ProduitVendu&gt; getProduitsVendusParPeriode(LocalDate dateDebut, LocalDate dateFin, boolean isEspece, boolean isDebit, String nomSearch) {\n   try {\n       ObservableList&lt;ProduitVendu&gt; result = FXCollections.observableArrayList();\n\n       String sql = &quot;SELECT id_produit_vendu, PV.numero_bon, reference, designation, quantite, prix_vendu, benefice, date_vente, heure_vente FROM PRODUITS_VENDUS PV, HISTORIQUE_VENTES HV WHERE designation LIKE ? AND PV.numero_bon=HV.numero_bon AND HV.date_vente BETWEEN ? AND ?&quot;;\n       if (isEspece &amp;&amp; !isDebit)\n           sql = sql + &quot; AND HV.numero_bon NOT IN (SELECT AC.numero_bon FROM adherents_conso AC UNION SELECT PC.numero_bon FROM personnel_conso PC)&quot;;\n       if (!isEspece &amp;&amp; isDebit)\n           sql = sql + &quot; AND HV.numero_bon IN (SELECT AC.numero_bon FROM adherents_conso AC UNION SELECT PC.numero_bon FROM personnel_conso PC)&quot;;\n       sql = sql + &quot; ORDER BY PV.numero_bon DESC&quot;;\n\n       PreparedStatement prepare = getConnection().prepareStatement(sql);\n       prepare.setString(1, &quot;%&quot; + nomSearch + &quot;%&quot;);\n       prepare.setString(2, dateDebut.toString());\n       prepare.setString(3, dateFin.toString());\n\n       ResultSet rs = prepare.executeQuery();\n\n       while (rs.next()) {\n           int idProduitVendu = rs.getInt(&quot;id_produit_vendu&quot;);\n           int numeroBon = rs.getInt(&quot;numero_bon&quot;);\n           int reference = rs.getInt(&quot;reference&quot;);\n           String designation = rs.getString(&quot;designation&quot;);\n           int quantite = rs.getInt(&quot;quantite&quot;);\n           double prixVendu = rs.getDouble(&quot;prix_vendu&quot;);\n           double benefice = rs.getDouble(&quot;benefice&quot;);\n           LocalDate dateVente = rs.getDate(&quot;date_vente&quot;).toLocalDate();\n           LocalTime heureVente = rs.getTime(&quot;heure_vente&quot;).toLocalTime();\n\n           result.add(new ProduitVendu(idProduitVendu, numeroBon, reference, designation, quantite, prixVendu, benefice, dateVente, heureVente));\n       }\n       rs.close();\n\n       return result;\n   } catch (SQLException ex) {\n       ex.printStackTrace();\n   }\n   return null;\n}\n</code></pre>\n<p>P.S.: <code>exec</code> is a <code>java.util.concurrent.Executor</code> and im using MySQL for database.</p>\n"},{"tags":["java","encryption","end-to-end-encryption","signal-protocol"],"answers":[{"tags":[],"owner":{"account_id":87653,"reputation":122570,"user_id":242933,"accept_rate":53,"display_name":"ma11hew28"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1598384394,"creation_date":1598380964,"answer_id":63585220,"question_id":63581119,"body_markdown":"After reviewing the source code of [Signal Android][1], I think Alice is supposed to also send Bob the type (as plaintext) of the ciphertext message.\r\n\r\nIn the class [`SignalServiceCipher`][2]:\r\n\r\n- The instance method [`encrypt(SignalProtocolAddress, Optional&lt;UnidentifiedAccess&gt;, byte[])`][3] returns an instance of [`OutgoingPushMessage`][4] with its `type` property set to that of the ciphertext message and its `body` property set to the Base64 encoded serialized ciphertext message.\r\n\r\n- The instance method [`decrypt(SignalServiceEnvelope, byte[])`][5] gets the type of the ciphertext message from its first argument, which is an instance of [SignalServiceEnvelope][6].\r\n\r\n\r\n  [1]: https://github.com/signalapp/Signal-Android\r\n  [2]: https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/api/crypto/SignalServiceCipher.java\r\n  [3]: https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/api/crypto/SignalServiceCipher.java#L78\r\n  [4]: https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/internal/push/OutgoingPushMessage.java\r\n  [5]: https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/api/crypto/SignalServiceCipher.java#L156\r\n  [6]: https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/api/messages/SignalServiceEnvelope.java","title":"How to get the type of a serialized ciphertext message?","body":"<p>After reviewing the source code of <a href=\"https://github.com/signalapp/Signal-Android\" rel=\"nofollow noreferrer\">Signal Android</a>, I think Alice is supposed to also send Bob the type (as plaintext) of the ciphertext message.</p>\n<p>In the class <a href=\"https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/api/crypto/SignalServiceCipher.java\" rel=\"nofollow noreferrer\"><code>SignalServiceCipher</code></a>:</p>\n<ul>\n<li><p>The instance method <a href=\"https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/api/crypto/SignalServiceCipher.java#L78\" rel=\"nofollow noreferrer\"><code>encrypt(SignalProtocolAddress, Optional&lt;UnidentifiedAccess&gt;, byte[])</code></a> returns an instance of <a href=\"https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/internal/push/OutgoingPushMessage.java\" rel=\"nofollow noreferrer\"><code>OutgoingPushMessage</code></a> with its <code>type</code> property set to that of the ciphertext message and its <code>body</code> property set to the Base64 encoded serialized ciphertext message.</p>\n</li>\n<li><p>The instance method <a href=\"https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/api/crypto/SignalServiceCipher.java#L156\" rel=\"nofollow noreferrer\"><code>decrypt(SignalServiceEnvelope, byte[])</code></a> gets the type of the ciphertext message from its first argument, which is an instance of <a href=\"https://github.com/signalapp/Signal-Android/blob/master/libsignal/service/src/main/java/org/whispersystems/signalservice/api/messages/SignalServiceEnvelope.java\" rel=\"nofollow noreferrer\">SignalServiceEnvelope</a>.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10817783,"reputation":1038,"user_id":7956161,"display_name":"Muhammad Ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630354399,"creation_date":1630354399,"answer_id":68989828,"question_id":63581119,"body_markdown":"1 - Alice generate identityKeyPair(Long Term), signedPreKey(Medium Term) &amp; Ephemeral PreKeys &amp; save those keys into storage in base64.\r\ne.g \r\n \r\n    public static String generateIdentityKeyPair() {\r\n        IdentityKeyPair identityKeyPair = KeyHelper.generateIdentityKeyPair();\r\n        return encodeToBase64(identityKeyPair.serialize());\r\n    }\r\n2 - Send\r\n\r\n - List of PreKey Id &amp; Public key to server in Serialized format\r\n - Signed PreKey Id, signedPreKeyPublicKey, signedPreKeyRecordSignature\r\n - Public Key of IdentityKeyPair \r\n - Registration Id\r\n\r\nFor Encryption and Decryption you first have to make to encrypted session\r\n\r\n \r\n\r\n    private void initSessionFromPreKey() throws UntrustedIdentityException, InvalidKeyException {\r\n            InMemorySignalProtocolStore protocolStore = new InMemorySignalProtocolStore(localUser.getIdentityKeyPair(), localUser.getRegistrationId());\r\n            protocolStore.storePreKey(localUser.getPreKeys().get(0).getId(), localUser.getPreKeys().get(0));\r\n            protocolStore.storeSignedPreKey(localUser.getSignedPreKey().getId(), localUser.getSignedPreKey());\r\n            this.protocolStore = protocolStore;\r\n    \r\n    \r\n            //Session\r\n            SessionBuilder sessionBuilder = new SessionBuilder(protocolStore, remoteUser.getSignalProtocolAddress());\r\n            PreKeyBundle preKeyBundle = new PreKeyBundle(\r\n                    remoteUser.getRegistrationId(),\r\n                    remoteUser.getSignalProtocolAddress().getDeviceId(),\r\n                    remoteUser.getPreKeyId(),\r\n                    remoteUser.getPreKeyPublicKey(),\r\n                    remoteUser.getSignedPreKeyId(),\r\n                    remoteUser.getSignedPreKeyPublicKey(),\r\n                    remoteUser.getSignedPreKeySignature(),\r\n                    remoteUser.getIdentityKeyPairPublicKey()\r\n            );\r\n    \r\n            sessionBuilder.process(preKeyBundle);\r\n            mSessionCipher = new SessionCipher(protocolStore, protocolAddress);\r\n        }\r\n\r\n \r\nEncryption &amp; Decryption \r\n\r\n    public String encrypt(String message) throws InvalidVersionException, InvalidMessageException, UntrustedIdentityException, InvalidKeyException {\r\n            createSession(Operation.ENCRYPT);\r\n            CiphertextMessage ciphertextMessage = mSessionCipher.encrypt(message.getBytes());\r\n            PreKeySignalMessage preKeySignalMessage = new PreKeySignalMessage(ciphertextMessage.serialize());\r\n            return KeyUtils.encodeToBase64(preKeySignalMessage.serialize());\r\n        }\r\n    \r\n        public String decrypt(String message) throws InvalidVersionException, InvalidMessageException, InvalidKeyException, DuplicateMessageException, InvalidKeyIdException, UntrustedIdentityException, LegacyMessageException {\r\n            createSession(Operation.DECRYPT);\r\n            byte[] bytes = KeyUtils.decodeToByteArray(message);\r\n            byte[] decryptedMessage = mSessionCipher.decrypt(new PreKeySignalMessage(bytes));\r\n            return new String(decryptedMessage, StandardCharsets.UTF_8);\r\n        }\r\n\r\n\r\nYou can also look other source code which are available on github\r\nhttps://github.com/lvijay/DemoSignal\r\n\r\nhttps://github.com/signalapp/libsignal-protocol-java/pull/21/commits/3496ed996359f6d3d8ee52dcecb8f8b0d45b3cbc (The Library author is using is wrapper of signal protocol you can change wrapper library to signal protocol)\r\n","title":"How to get the type of a serialized ciphertext message?","body":"<p>1 - Alice generate identityKeyPair(Long Term), signedPreKey(Medium Term) &amp; Ephemeral PreKeys &amp; save those keys into storage in base64.\ne.g</p>\n<pre><code>public static String generateIdentityKeyPair() {\n    IdentityKeyPair identityKeyPair = KeyHelper.generateIdentityKeyPair();\n    return encodeToBase64(identityKeyPair.serialize());\n}\n</code></pre>\n<p>2 - Send</p>\n<ul>\n<li>List of PreKey Id &amp; Public key to server in Serialized format</li>\n<li>Signed PreKey Id, signedPreKeyPublicKey, signedPreKeyRecordSignature</li>\n<li>Public Key of IdentityKeyPair</li>\n<li>Registration Id</li>\n</ul>\n<p>For Encryption and Decryption you first have to make to encrypted session</p>\n<pre><code>private void initSessionFromPreKey() throws UntrustedIdentityException, InvalidKeyException {\n        InMemorySignalProtocolStore protocolStore = new InMemorySignalProtocolStore(localUser.getIdentityKeyPair(), localUser.getRegistrationId());\n        protocolStore.storePreKey(localUser.getPreKeys().get(0).getId(), localUser.getPreKeys().get(0));\n        protocolStore.storeSignedPreKey(localUser.getSignedPreKey().getId(), localUser.getSignedPreKey());\n        this.protocolStore = protocolStore;\n\n\n        //Session\n        SessionBuilder sessionBuilder = new SessionBuilder(protocolStore, remoteUser.getSignalProtocolAddress());\n        PreKeyBundle preKeyBundle = new PreKeyBundle(\n                remoteUser.getRegistrationId(),\n                remoteUser.getSignalProtocolAddress().getDeviceId(),\n                remoteUser.getPreKeyId(),\n                remoteUser.getPreKeyPublicKey(),\n                remoteUser.getSignedPreKeyId(),\n                remoteUser.getSignedPreKeyPublicKey(),\n                remoteUser.getSignedPreKeySignature(),\n                remoteUser.getIdentityKeyPairPublicKey()\n        );\n\n        sessionBuilder.process(preKeyBundle);\n        mSessionCipher = new SessionCipher(protocolStore, protocolAddress);\n    }\n</code></pre>\n<p>Encryption &amp; Decryption</p>\n<pre><code>public String encrypt(String message) throws InvalidVersionException, InvalidMessageException, UntrustedIdentityException, InvalidKeyException {\n        createSession(Operation.ENCRYPT);\n        CiphertextMessage ciphertextMessage = mSessionCipher.encrypt(message.getBytes());\n        PreKeySignalMessage preKeySignalMessage = new PreKeySignalMessage(ciphertextMessage.serialize());\n        return KeyUtils.encodeToBase64(preKeySignalMessage.serialize());\n    }\n\n    public String decrypt(String message) throws InvalidVersionException, InvalidMessageException, InvalidKeyException, DuplicateMessageException, InvalidKeyIdException, UntrustedIdentityException, LegacyMessageException {\n        createSession(Operation.DECRYPT);\n        byte[] bytes = KeyUtils.decodeToByteArray(message);\n        byte[] decryptedMessage = mSessionCipher.decrypt(new PreKeySignalMessage(bytes));\n        return new String(decryptedMessage, StandardCharsets.UTF_8);\n    }\n</code></pre>\n<p>You can also look other source code which are available on github\n<a href=\"https://github.com/lvijay/DemoSignal\" rel=\"nofollow noreferrer\">https://github.com/lvijay/DemoSignal</a></p>\n<p><a href=\"https://github.com/signalapp/libsignal-protocol-java/pull/21/commits/3496ed996359f6d3d8ee52dcecb8f8b0d45b3cbc\" rel=\"nofollow noreferrer\">https://github.com/signalapp/libsignal-protocol-java/pull/21/commits/3496ed996359f6d3d8ee52dcecb8f8b0d45b3cbc</a> (The Library author is using is wrapper of signal protocol you can change wrapper library to signal protocol)</p>\n"}],"owner":{"account_id":87653,"reputation":122570,"user_id":242933,"accept_rate":53,"display_name":"ma11hew28"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":336,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686944503,"creation_date":1598365819,"question_id":63581119,"body_markdown":"I&#39;m using [libsignal-protocol-java][1] according to [Signal&#39;s Documentation][2] to implement end-to-end encryption in a messaging app.\r\n\r\nLet&#39;s say Alice sends Bob a (pairwise) serialized ciphertext message. How does Bob know how to deserialize it? Doesn&#39;t he first need to know the type of the ciphertext message? My understanding is that a pairwise ciphertext message could either be a signal message (`WHISPER_TYPE`) or a pre key signal message (`PREKEY_TYPE`). So how does Bob know which type it is?\r\n\r\nIs Alice supposed to also send Bob the type (as plaintext) of the ciphertext message?\r\n\r\nOr is there another way that Bob could detect the type? For example, is Bob supposed to try to deserialize it as if it&#39;s a signal message, and if that fails, then try to deserialize it as if it&#39;s a pre key signal message?\r\n\r\n\r\n  [1]: https://github.com/signalapp/libsignal-protocol-java\r\n  [2]: https://signal.org/docs/","title":"How to get the type of a serialized ciphertext message?","body":"<p>I'm using <a href=\"https://github.com/signalapp/libsignal-protocol-java\" rel=\"nofollow noreferrer\">libsignal-protocol-java</a> according to <a href=\"https://signal.org/docs/\" rel=\"nofollow noreferrer\">Signal's Documentation</a> to implement end-to-end encryption in a messaging app.</p>\n<p>Let's say Alice sends Bob a (pairwise) serialized ciphertext message. How does Bob know how to deserialize it? Doesn't he first need to know the type of the ciphertext message? My understanding is that a pairwise ciphertext message could either be a signal message (<code>WHISPER_TYPE</code>) or a pre key signal message (<code>PREKEY_TYPE</code>). So how does Bob know which type it is?</p>\n<p>Is Alice supposed to also send Bob the type (as plaintext) of the ciphertext message?</p>\n<p>Or is there another way that Bob could detect the type? For example, is Bob supposed to try to deserialize it as if it's a signal message, and if that fails, then try to deserialize it as if it's a pre key signal message?</p>\n"},{"tags":["java","flutter","dart","ecdh"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1686931408,"post_id":76490559,"comment_id":134871120,"body_markdown":"The public keys have different formats: uncompressed on the Dart side, DER encoded X.509/SPKI on the Java side. You need to align the formats. E.g. the Dart package `basic_utils` supports the import/export of X.509/SPKI keys.","body":"The public keys have different formats: uncompressed on the Dart side, DER encoded X.509/SPKI on the Java side. You need to align the formats. E.g. the Dart package <code>basic_utils</code> supports the import/export of X.509/SPKI keys."},{"owner":{"account_id":1247323,"reputation":1647,"user_id":1319938,"accept_rate":67,"display_name":"mah454"},"score":0,"creation_date":1686940619,"post_id":76490559,"comment_id":134872760,"body_markdown":"currently uncompressed  ```publicKey.Q!.getEncoded(false)```","body":"currently uncompressed  <code>publicKey.Q!.getEncoded(false)</code>"},{"owner":{"account_id":1247323,"reputation":1647,"user_id":1319938,"accept_rate":67,"display_name":"mah454"},"score":0,"creation_date":1686940712,"post_id":76490559,"comment_id":134872780,"body_markdown":"can you give me example code ? \npointycastle documentation has not any description about this !","body":"can you give me example code ?  pointycastle documentation has not any description about this !"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1686944235,"post_id":76490559,"comment_id":134873365,"body_markdown":"See my answer, there I give for the Dart and the Java side an example for the key export, import and generation of the shared secret.","body":"See my answer, there I give for the Dart and the Java side an example for the key export, import and generation of the shared secret."}],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686943977,"creation_date":1686943977,"answer_id":76493112,"question_id":76490559,"body_markdown":"Both sides use different key formats: `getPublicKey()` in the Dart code returns the public key in raw, uncompressed format. `convertByteArrayToPublicKey()` in the Java code requires the key in X.509/SPKI format, ASN.1/DER encoded.\r\n\r\nThe different formats are the reason for your problem. The fix is to use identical formats. The adaptation can be done on the Dart side (export in X.509/SPKI format), on the Java side (import of a raw, uncompressed key) or via a key conversion tool.\r\n\r\nIn the following the adaption is done on the Dart side. For import/export of keys e.g. the Dart package [*basic_utils*][1] can be used. The following solution is based on the code you posted.\r\n\r\n&lt;h3&gt;Part 1: Key export&lt;/h3&gt;\r\n\r\nKey (generation via `init()` and) export can be implemented on the Dart side as follows: \r\n\r\n```dart\r\nimport &#39;package:basic_utils/basic_utils.dart&#39;;\r\nimport &#39;package:pointycastle/export.dart&#39;;\r\n...\r\nvar ecdh = EcdhHandler.init();\r\nvar x509pemFromDart = CryptoUtils.encodeEcPublicKeyToPem(ecdh.publicKey);\r\nvar sec1pemFromDart = CryptoUtils.encodeEcPrivateKeyToPem(ecdh.privateKey);\r\n...\r\nclass EcdhHandler {  \r\n  ...  \r\n  ECPublicKey get publicKey {\r\n    return _keyPair.publicKey as ECPublicKey;\r\n  }\r\n  ECPrivateKey get privateKey {\r\n    return _keyPair.privateKey as ECPrivateKey;\r\n  }\r\n  EcdhHandler.init() {\r\n    _domainParameters = ECDomainParameters(ECCurve_prime256v1().domainName);\r\n    ...\r\n```\r\n\r\nHere the following has to be considered:\r\n- Instead of `ECCurve_secp256r1()`, `ECCurve_prime256v1()` must be used, since *basic_utils* does not accept the former (error message: *ObjectIdentifier secp256r1 is not supported yet*). Note that both identifiers name the same curve: *prime256v1* aka *NIST P-256* are aliases of *secp256r1*.\r\n- In addition to the public key, the private key is also exported to make it easier to separate key generation and key agreement in this test. \r\n- The public key is exported in X.509/SPKI format, PEM encoded, the private key in SEC1 format, PEM encoded (the SEC1 format is chosen because it is supported by *basic_utils*).\r\n\r\nKey (generation and) export on the Java side can be implemented as follows:\r\n\r\n```java\r\nKeyPairGenerator kpg = KeyPairGenerator.getInstance(&quot;EC&quot;);\r\nECGenParameterSpec secp256r1 = new ECGenParameterSpec(&quot;secp256r1&quot;);\r\nkpg.initialize(secp256r1);\r\nKeyPair kp = kpg.generateKeyPair();\r\nString x509DerFromJava = Base64.getEncoder().encodeToString(kp.getPublic().getEncoded());\r\nString pkcs8DerFromJava = Base64.getEncoder().encodeToString(kp.getPrivate().getEncoded());\r\n```\r\n\r\nThe public key is exported in X.509/SPKI format, DER encoded, the private key in PKCS#8 format, DER encoded (the PKCS#8 format was chosen because it is supported by JCA/JCE by default). \r\n\r\n------------\r\n\r\n&lt;h3&gt;Part 2: Key import and key agreement&lt;/h3&gt;\r\n\r\nKey import and key agreement on the Dart side can be implemented as follows (the keys used here were generated with the code from the first part):\r\n\r\n```dart\r\nvar x509DerFromJava = base64.decode(&quot;MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEXcXjAIwp17z2hHuKe+yd1xD6VnX8cFjmaibxeMnTVNQCilTaW+M2WkcAdNTDVJSGA9EYNpfJgHrw1G8055Ml4w==&quot;);\r\nvar sec1pemFromDart = &quot;&quot;&quot;-----BEGIN EC PRIVATE KEY-----\r\nMHcCAQEEIGW/gmCOh3bWEKFhuX+bbHpMmfP7YKQA7KS6Ddfqx658oAoGCCqGSM49\r\nAwEHoUQDQgAE7ux8syhN5jc7IOQDQgjr7Lgc9QiY2lD9O+3vA9ly+HaxD5H9Ihy6\r\nAM5ATMlZurtxz4V9FrOie+Nmhydu8TnMow==\r\n-----END EC PRIVATE KEY-----&quot;&quot;&quot;;\r\nvar x509FromJava = CryptoUtils.ecPublicKeyFromDerBytes(x509DerFromJava);\r\nvar sec1FromDart = CryptoUtils.ecPrivateKeyFromPem(sec1pemFromDart);\r\n\r\nvar agreement = ECDHBasicAgreement();\r\nagreement.init(sec1FromDart);\r\nvar sharedSecret = agreement.calculateAgreement(x509FromJava);\r\nprint(sharedSecret.toRadixString(16)); // f50ba48e19b4c3ddf35f23d24c27b335ef3f3fe61bc5a52d069262e83e653f6a\r\n```\r\n\r\nand on the Java side: Here the public key must be converted from PEM to DER. This is relatively simple: header, footer and line breaks have to be removed and the rest has to be Base64 decoded. Alternatively, BouncyCastle can be used to import the PEM key *directly*:\r\n\r\n```java\r\nString x509PemFromDart = &quot;&quot;&quot;\r\n-----BEGIN PUBLIC KEY-----\r\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE7ux8syhN5jc7IOQDQgjr7Lgc9QiY\r\n2lD9O+3vA9ly+HaxD5H9Ihy6AM5ATMlZurtxz4V9FrOie+Nmhydu8TnMow==\r\n-----END PUBLIC KEY-----&quot;&quot;&quot;;\r\nbyte[] x509DerFromDart = Base64.getDecoder().decode(x509PemFromDart.replace(&quot;-----BEGIN PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;-----END PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;\\n&quot; , &quot;&quot;));\r\nPublicKey x509FromDart = convertByteArrayToPublicKey(x509DerFromDart);\r\nbyte[] pkcs8DerFromJava = Base64.getDecoder().decode(&quot;MEECAQAwEwYHKoZIzj0CAQYIKoZIzj0DAQcEJzAlAgEBBCCl52mYjL52FtHM0s3J+9BHReocDl4Dmo0hoAHr9LxVqA==&quot;);\r\nPrivateKey pkcs8FromJava = KeyFactory.getInstance(&quot;EC&quot;).generatePrivate(new PKCS8EncodedKeySpec(pkcs8DerFromJava));\r\n\r\nKeyAgreement keyAgreement = KeyAgreement.getInstance(&quot;ECDH&quot;);\r\nkeyAgreement.init(pkcs8FromJava);\r\nkeyAgreement.doPhase(x509FromDart, true);\r\nbyte[] sharedSecret = keyAgreement.generateSecret();\r\nSystem.out.println(HexFormat.of().formatHex(sharedSecret)); // f50ba48e19b4c3ddf35f23d24c27b335ef3f3fe61bc5a52d069262e83e653f6a\r\n```\r\n\r\nTest result: On both sides the same shared secret is generated!\r\n\r\n[1]: https://pub.dev/packages/basic_utils","title":"ECDH Compatible between Dart pointycastle and Java 17","body":"<p>Both sides use different key formats: <code>getPublicKey()</code> in the Dart code returns the public key in raw, uncompressed format. <code>convertByteArrayToPublicKey()</code> in the Java code requires the key in X.509/SPKI format, ASN.1/DER encoded.</p>\n<p>The different formats are the reason for your problem. The fix is to use identical formats. The adaptation can be done on the Dart side (export in X.509/SPKI format), on the Java side (import of a raw, uncompressed key) or via a key conversion tool.</p>\n<p>In the following the adaption is done on the Dart side. For import/export of keys e.g. the Dart package <a href=\"https://pub.dev/packages/basic_utils\" rel=\"nofollow noreferrer\"><em>basic_utils</em></a> can be used. The following solution is based on the code you posted.</p>\n<h3>Part 1: Key export</h3>\n<p>Key (generation via <code>init()</code> and) export can be implemented on the Dart side as follows:</p>\n<pre class=\"lang-dart prettyprint-override\"><code>import 'package:basic_utils/basic_utils.dart';\nimport 'package:pointycastle/export.dart';\n...\nvar ecdh = EcdhHandler.init();\nvar x509pemFromDart = CryptoUtils.encodeEcPublicKeyToPem(ecdh.publicKey);\nvar sec1pemFromDart = CryptoUtils.encodeEcPrivateKeyToPem(ecdh.privateKey);\n...\nclass EcdhHandler {  \n  ...  \n  ECPublicKey get publicKey {\n    return _keyPair.publicKey as ECPublicKey;\n  }\n  ECPrivateKey get privateKey {\n    return _keyPair.privateKey as ECPrivateKey;\n  }\n  EcdhHandler.init() {\n    _domainParameters = ECDomainParameters(ECCurve_prime256v1().domainName);\n    ...\n</code></pre>\n<p>Here the following has to be considered:</p>\n<ul>\n<li>Instead of <code>ECCurve_secp256r1()</code>, <code>ECCurve_prime256v1()</code> must be used, since <em>basic_utils</em> does not accept the former (error message: <em>ObjectIdentifier secp256r1 is not supported yet</em>). Note that both identifiers name the same curve: <em>prime256v1</em> aka <em>NIST P-256</em> are aliases of <em>secp256r1</em>.</li>\n<li>In addition to the public key, the private key is also exported to make it easier to separate key generation and key agreement in this test.</li>\n<li>The public key is exported in X.509/SPKI format, PEM encoded, the private key in SEC1 format, PEM encoded (the SEC1 format is chosen because it is supported by <em>basic_utils</em>).</li>\n</ul>\n<p>Key (generation and) export on the Java side can be implemented as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>KeyPairGenerator kpg = KeyPairGenerator.getInstance(&quot;EC&quot;);\nECGenParameterSpec secp256r1 = new ECGenParameterSpec(&quot;secp256r1&quot;);\nkpg.initialize(secp256r1);\nKeyPair kp = kpg.generateKeyPair();\nString x509DerFromJava = Base64.getEncoder().encodeToString(kp.getPublic().getEncoded());\nString pkcs8DerFromJava = Base64.getEncoder().encodeToString(kp.getPrivate().getEncoded());\n</code></pre>\n<p>The public key is exported in X.509/SPKI format, DER encoded, the private key in PKCS#8 format, DER encoded (the PKCS#8 format was chosen because it is supported by JCA/JCE by default).</p>\n<hr />\n<h3>Part 2: Key import and key agreement</h3>\n<p>Key import and key agreement on the Dart side can be implemented as follows (the keys used here were generated with the code from the first part):</p>\n<pre class=\"lang-dart prettyprint-override\"><code>var x509DerFromJava = base64.decode(&quot;MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEXcXjAIwp17z2hHuKe+yd1xD6VnX8cFjmaibxeMnTVNQCilTaW+M2WkcAdNTDVJSGA9EYNpfJgHrw1G8055Ml4w==&quot;);\nvar sec1pemFromDart = &quot;&quot;&quot;-----BEGIN EC PRIVATE KEY-----\nMHcCAQEEIGW/gmCOh3bWEKFhuX+bbHpMmfP7YKQA7KS6Ddfqx658oAoGCCqGSM49\nAwEHoUQDQgAE7ux8syhN5jc7IOQDQgjr7Lgc9QiY2lD9O+3vA9ly+HaxD5H9Ihy6\nAM5ATMlZurtxz4V9FrOie+Nmhydu8TnMow==\n-----END EC PRIVATE KEY-----&quot;&quot;&quot;;\nvar x509FromJava = CryptoUtils.ecPublicKeyFromDerBytes(x509DerFromJava);\nvar sec1FromDart = CryptoUtils.ecPrivateKeyFromPem(sec1pemFromDart);\n\nvar agreement = ECDHBasicAgreement();\nagreement.init(sec1FromDart);\nvar sharedSecret = agreement.calculateAgreement(x509FromJava);\nprint(sharedSecret.toRadixString(16)); // f50ba48e19b4c3ddf35f23d24c27b335ef3f3fe61bc5a52d069262e83e653f6a\n</code></pre>\n<p>and on the Java side: Here the public key must be converted from PEM to DER. This is relatively simple: header, footer and line breaks have to be removed and the rest has to be Base64 decoded. Alternatively, BouncyCastle can be used to import the PEM key <em>directly</em>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String x509PemFromDart = &quot;&quot;&quot;\n-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE7ux8syhN5jc7IOQDQgjr7Lgc9QiY\n2lD9O+3vA9ly+HaxD5H9Ihy6AM5ATMlZurtxz4V9FrOie+Nmhydu8TnMow==\n-----END PUBLIC KEY-----&quot;&quot;&quot;;\nbyte[] x509DerFromDart = Base64.getDecoder().decode(x509PemFromDart.replace(&quot;-----BEGIN PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;-----END PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;\\n&quot; , &quot;&quot;));\nPublicKey x509FromDart = convertByteArrayToPublicKey(x509DerFromDart);\nbyte[] pkcs8DerFromJava = Base64.getDecoder().decode(&quot;MEECAQAwEwYHKoZIzj0CAQYIKoZIzj0DAQcEJzAlAgEBBCCl52mYjL52FtHM0s3J+9BHReocDl4Dmo0hoAHr9LxVqA==&quot;);\nPrivateKey pkcs8FromJava = KeyFactory.getInstance(&quot;EC&quot;).generatePrivate(new PKCS8EncodedKeySpec(pkcs8DerFromJava));\n\nKeyAgreement keyAgreement = KeyAgreement.getInstance(&quot;ECDH&quot;);\nkeyAgreement.init(pkcs8FromJava);\nkeyAgreement.doPhase(x509FromDart, true);\nbyte[] sharedSecret = keyAgreement.generateSecret();\nSystem.out.println(HexFormat.of().formatHex(sharedSecret)); // f50ba48e19b4c3ddf35f23d24c27b335ef3f3fe61bc5a52d069262e83e653f6a\n</code></pre>\n<p>Test result: On both sides the same shared secret is generated!</p>\n"}],"owner":{"account_id":1247323,"reputation":1647,"user_id":1319938,"accept_rate":67,"display_name":"mah454"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":236,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76493112,"answer_count":1,"score":1,"last_activity_date":1686943977,"creation_date":1686921246,"question_id":76490559,"body_markdown":"I want to communicate between dart and java with ECDH (secp256r1 algorithm) .     \r\nthis is my Dart Code :    \r\n```\r\nimport &#39;dart:convert&#39;;\r\nimport &#39;dart:math&#39;;\r\nimport &#39;dart:typed_data&#39;;\r\nimport &#39;package:pointycastle/export.dart&#39;;\r\n\r\nclass EcdhHandler {\r\n  late final AsymmetricKeyPair _keyPair;\r\n  late final ECDomainParameters _domainParameters;\r\n\r\n  EcdhHandler.init() {\r\n    _domainParameters = ECDomainParameters(ECCurve_secp256r1().domainName);\r\n    var ecParams = ECKeyGeneratorParameters(_domainParameters);\r\n    var params = ParametersWithRandom&lt;ECKeyGeneratorParameters&gt;(ecParams, getSecureRandom());\r\n\r\n    var keyGenerator = ECKeyGenerator();\r\n    keyGenerator.init(params);\r\n    _keyPair = keyGenerator.generateKeyPair();\r\n  }\r\n\r\n  Uint8List getPublicKey() {\r\n    var publicKey = _keyPair.publicKey as ECPublicKey;\r\n    var publicPoint = publicKey.Q!.getEncoded(false);\r\n    return publicPoint;\r\n  }\r\n\r\n  ECPublicKey bytesToPublicKey(Uint8List bytes) {\r\n    var domainParams = (_keyPair.publicKey as ECPublicKey).parameters;\r\n    var curve = domainParams!.curve;\r\n    var point = curve.decodePoint(bytes);\r\n    return ECPublicKey(point, domainParams);\r\n  }\r\n\r\n  BigInt makeSharedSecret(ECPublicKey remotePublicKey) {\r\n    var agreement = ECDHBasicAgreement();\r\n    var privateKey = _keyPair.privateKey as ECPrivateKey;\r\n    agreement.init(privateKey);\r\n    return agreement.calculateAgreement(remotePublicKey);\r\n  }\r\n  SecureRandom getSecureRandom() {\r\n    var secureRandom = FortunaRandom();\r\n    var random = Random.secure();\r\n    List&lt;int&gt; seeds = [];\r\n    for (int i = 0; i &lt; 32; i++) {\r\n      seeds.add(random.nextInt(255));\r\n    }\r\n    secureRandom.seed(KeyParameter(Uint8List.fromList(seeds)));\r\n    return secureRandom;\r\n  }\r\n\r\n}\r\n```    \r\n\r\nand this Java code : \r\n```\r\nimport javax.crypto.KeyAgreement;\r\nimport java.security.*;\r\nimport java.security.spec.ECGenParameterSpec;\r\nimport java.security.spec.X509EncodedKeySpec;\r\nimport java.util.Arrays;\r\n\r\npublic class ECDHHandler {\r\n    private PublicKey publicKey;\r\n    private KeyAgreement keyAgreement;\r\n    private byte[] sharedSecret;\r\n\r\n    public ECDHHandler() {\r\n        makeKeyExchangeParams();\r\n    }\r\n\r\n    private void makeKeyExchangeParams() {\r\n        try {\r\n            KeyPairGenerator kpg = KeyPairGenerator.getInstance(&quot;EC&quot;);\r\n            ECGenParameterSpec secp256r1 = new ECGenParameterSpec(&quot;secp256r1&quot;);\r\n            kpg.initialize(secp256r1);\r\n            KeyPair kp = kpg.generateKeyPair();\r\n            keyAgreement = KeyAgreement.getInstance(&quot;ECDH&quot;);\r\n            keyAgreement.init(kp.getPrivate());\r\n            publicKey = kp.getPublic();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void initializeSharedSecret(PublicKey publickey) {\r\n        try {\r\n            keyAgreement.doPhase(publickey, true);\r\n            sharedSecret = keyAgreement.generateSecret();\r\n        } catch (InvalidKeyException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public PublicKey convertByteArrayToPublicKey(byte[] bytes) {\r\n        try {\r\n            KeyFactory kf = KeyFactory.getInstance(&quot;EC&quot;);\r\n            X509EncodedKeySpec pkSpec = new X509EncodedKeySpec(bytes);\r\n            return kf.generatePublic(pkSpec);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n}\r\n``` \r\n\r\nI generate public key with pointycastle on dart application and send that to Java .     \r\n**My problem :**       \r\nmethod ```convertByteArrayToPublicKey``` on java can not parse byte codes to ecdh public key !      \r\n \r\nI always receive :     \r\n```\r\njava.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException: DerInputStream.getLength(): lengthTag=20, too big.\r\n```     \r\n\r\n```\r\npointycastle: ^3.7.3 \r\n\r\nDart SDK version: 3.0.2 (stable) (Tue May 23 08:26:58 2023 +0000) on &quot;linux_x64&quot;\r\n\r\njava version &quot;17.0.4&quot; 2022-07-19 LTS\r\nJava(TM) SE Runtime Environment GraalVM EE 22.2.0 (build 17.0.4+11-LTS-jvmci-22.2-b05)\r\nJava HotSpot(TM) 64-Bit Server VM GraalVM EE 22.2.0 (build 17.0.4+11-LTS-jvmci-22.2-b05, mixed mode, sharing)\r\n```","title":"ECDH Compatible between Dart pointycastle and Java 17","body":"<p>I want to communicate between dart and java with ECDH (secp256r1 algorithm) .<br />\nthis is my Dart Code :</p>\n<pre><code>import 'dart:convert';\nimport 'dart:math';\nimport 'dart:typed_data';\nimport 'package:pointycastle/export.dart';\n\nclass EcdhHandler {\n  late final AsymmetricKeyPair _keyPair;\n  late final ECDomainParameters _domainParameters;\n\n  EcdhHandler.init() {\n    _domainParameters = ECDomainParameters(ECCurve_secp256r1().domainName);\n    var ecParams = ECKeyGeneratorParameters(_domainParameters);\n    var params = ParametersWithRandom&lt;ECKeyGeneratorParameters&gt;(ecParams, getSecureRandom());\n\n    var keyGenerator = ECKeyGenerator();\n    keyGenerator.init(params);\n    _keyPair = keyGenerator.generateKeyPair();\n  }\n\n  Uint8List getPublicKey() {\n    var publicKey = _keyPair.publicKey as ECPublicKey;\n    var publicPoint = publicKey.Q!.getEncoded(false);\n    return publicPoint;\n  }\n\n  ECPublicKey bytesToPublicKey(Uint8List bytes) {\n    var domainParams = (_keyPair.publicKey as ECPublicKey).parameters;\n    var curve = domainParams!.curve;\n    var point = curve.decodePoint(bytes);\n    return ECPublicKey(point, domainParams);\n  }\n\n  BigInt makeSharedSecret(ECPublicKey remotePublicKey) {\n    var agreement = ECDHBasicAgreement();\n    var privateKey = _keyPair.privateKey as ECPrivateKey;\n    agreement.init(privateKey);\n    return agreement.calculateAgreement(remotePublicKey);\n  }\n  SecureRandom getSecureRandom() {\n    var secureRandom = FortunaRandom();\n    var random = Random.secure();\n    List&lt;int&gt; seeds = [];\n    for (int i = 0; i &lt; 32; i++) {\n      seeds.add(random.nextInt(255));\n    }\n    secureRandom.seed(KeyParameter(Uint8List.fromList(seeds)));\n    return secureRandom;\n  }\n\n}\n</code></pre>\n<p>and this Java code :</p>\n<pre><code>import javax.crypto.KeyAgreement;\nimport java.security.*;\nimport java.security.spec.ECGenParameterSpec;\nimport java.security.spec.X509EncodedKeySpec;\nimport java.util.Arrays;\n\npublic class ECDHHandler {\n    private PublicKey publicKey;\n    private KeyAgreement keyAgreement;\n    private byte[] sharedSecret;\n\n    public ECDHHandler() {\n        makeKeyExchangeParams();\n    }\n\n    private void makeKeyExchangeParams() {\n        try {\n            KeyPairGenerator kpg = KeyPairGenerator.getInstance(&quot;EC&quot;);\n            ECGenParameterSpec secp256r1 = new ECGenParameterSpec(&quot;secp256r1&quot;);\n            kpg.initialize(secp256r1);\n            KeyPair kp = kpg.generateKeyPair();\n            keyAgreement = KeyAgreement.getInstance(&quot;ECDH&quot;);\n            keyAgreement.init(kp.getPrivate());\n            publicKey = kp.getPublic();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void initializeSharedSecret(PublicKey publickey) {\n        try {\n            keyAgreement.doPhase(publickey, true);\n            sharedSecret = keyAgreement.generateSecret();\n        } catch (InvalidKeyException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public PublicKey convertByteArrayToPublicKey(byte[] bytes) {\n        try {\n            KeyFactory kf = KeyFactory.getInstance(&quot;EC&quot;);\n            X509EncodedKeySpec pkSpec = new X509EncodedKeySpec(bytes);\n            return kf.generatePublic(pkSpec);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>I generate public key with pointycastle on dart application and send that to Java .<br />\n<strong>My problem :</strong><br />\nmethod <code>convertByteArrayToPublicKey</code> on java can not parse byte codes to ecdh public key !</p>\n<p>I always receive :</p>\n<pre><code>java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException: DerInputStream.getLength(): lengthTag=20, too big.\n</code></pre>\n<pre><code>pointycastle: ^3.7.3 \n\nDart SDK version: 3.0.2 (stable) (Tue May 23 08:26:58 2023 +0000) on &quot;linux_x64&quot;\n\njava version &quot;17.0.4&quot; 2022-07-19 LTS\nJava(TM) SE Runtime Environment GraalVM EE 22.2.0 (build 17.0.4+11-LTS-jvmci-22.2-b05)\nJava HotSpot(TM) 64-Bit Server VM GraalVM EE 22.2.0 (build 17.0.4+11-LTS-jvmci-22.2-b05, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","aws-lambda","amazon-ecs","aws-java-sdk"],"comments":[{"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"score":0,"creation_date":1687624193,"post_id":76418424,"comment_id":134964133,"body_markdown":"Similar behavior with pure nodejs lamda function. It takes aprox 4 min. The task always is completed but sometimes the return answer never reaches the target","body":"Similar behavior with pure nodejs lamda function. It takes aprox 4 min. The task always is completed but sometimes the return answer never reaches the target"}],"answers":[{"tags":[],"owner":{"account_id":10066486,"reputation":725,"user_id":7441537,"display_name":"Andr&#233; Machado"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1686943814,"creation_date":1686925238,"answer_id":76491090,"question_id":76418424,"body_markdown":"There is not a lot of information in the question to give you a proper answer. \r\n\r\nFrom what I understood from your question you are executing a lambda and sometimes it completes and other times it times out. If this is in fact the case it most likely isn&#39;t a connectivity problem, so the problem should be the lambda design/performance. \r\n\r\nA quick thing I would try first - if you didn’t yet - would be to increase the Lambda available memory (I think the default is 128MB). Increasing the available memory can significantly increase your Lambda performance. [[Source]](https://aws.amazon.com/blogs/compute/operating-lambda-performance-optimization-part-2/)\r\n\r\nA couple of other tips that might be useful for you to debug your problem:\r\n\r\n 1. **Review Lambda Design/Performance**: Examine the code and execution\r\n    logic of your Lambda function to ensure it is optimized for\r\n    performance. Look for any potential bottlenecks or long-running\r\n    operations that could be causing the function to exceed the timeout\r\n    limit. Also make sure you take advantage of [execution environment reuse](https://docs.aws.amazon.com/lambda/latest/dg/best-practices.html#function-code) whenever \r\n    possible.\r\n    \r\n 2. **Check for Dependencies or External API Calls**: If your Lambda\r\n    function relies on other AWS services or external APIs, verify if\r\n    any of these dependencies are causing delays or timeouts. Monitor\r\n    the logs of the Lambda function to identify any potential issues\r\n    with these external interactions.\r\n    \r\n 3. **Analyse Lambda Function Logs**: Enable detailed logging within your\r\n    Lambda function and review the logs to gain insights into its\r\n    execution behaviour. Look for any error messages, warnings, or\r\n    performance-related information that could help diagnose the hanging\r\n    behaviour.\r\n    \r\n 4. **Check AWS Service Limits**: Confirm that you have not exceeded any\r\n    [service limits](https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html) for AWS Lambda that could be affecting the\r\n    behaviour. For example, check if you have reached the maximum\r\n    concurrent executions.\r\n    \r\n 5. **Consider Alternative Solutions**: If your workload requires longer\r\n    processing times beyond the 15-minute limit imposed by Lambda,\r\n    consider alternative AWS services such as another ECS task or even EC2 to handle those workloads. These services offer more control \r\n    over the computing\r\n    environment and allow for longer execution times.\r\n\r\nHowever, for a better understanding of what exactly might be happenning it would be useful if you could share the code (or the part of the code that you think has problems). If the code is proprietary a pseudo-code version or an explanation may also be useful.","title":"AWS lambda invoke sometimes hangs indefinitely when executed via ECS","body":"<p>There is not a lot of information in the question to give you a proper answer.</p>\n<p>From what I understood from your question you are executing a lambda and sometimes it completes and other times it times out. If this is in fact the case it most likely isn't a connectivity problem, so the problem should be the lambda design/performance.</p>\n<p>A quick thing I would try first - if you didn’t yet - would be to increase the Lambda available memory (I think the default is 128MB). Increasing the available memory can significantly increase your Lambda performance. <a href=\"https://aws.amazon.com/blogs/compute/operating-lambda-performance-optimization-part-2/\" rel=\"nofollow noreferrer\">[Source]</a></p>\n<p>A couple of other tips that might be useful for you to debug your problem:</p>\n<ol>\n<li><p><strong>Review Lambda Design/Performance</strong>: Examine the code and execution\nlogic of your Lambda function to ensure it is optimized for\nperformance. Look for any potential bottlenecks or long-running\noperations that could be causing the function to exceed the timeout\nlimit. Also make sure you take advantage of <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/best-practices.html#function-code\" rel=\"nofollow noreferrer\">execution environment reuse</a> whenever\npossible.</p>\n</li>\n<li><p><strong>Check for Dependencies or External API Calls</strong>: If your Lambda\nfunction relies on other AWS services or external APIs, verify if\nany of these dependencies are causing delays or timeouts. Monitor\nthe logs of the Lambda function to identify any potential issues\nwith these external interactions.</p>\n</li>\n<li><p><strong>Analyse Lambda Function Logs</strong>: Enable detailed logging within your\nLambda function and review the logs to gain insights into its\nexecution behaviour. Look for any error messages, warnings, or\nperformance-related information that could help diagnose the hanging\nbehaviour.</p>\n</li>\n<li><p><strong>Check AWS Service Limits</strong>: Confirm that you have not exceeded any\n<a href=\"https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html\" rel=\"nofollow noreferrer\">service limits</a> for AWS Lambda that could be affecting the\nbehaviour. For example, check if you have reached the maximum\nconcurrent executions.</p>\n</li>\n<li><p><strong>Consider Alternative Solutions</strong>: If your workload requires longer\nprocessing times beyond the 15-minute limit imposed by Lambda,\nconsider alternative AWS services such as another ECS task or even EC2 to handle those workloads. These services offer more control\nover the computing\nenvironment and allow for longer execution times.</p>\n</li>\n</ol>\n<p>However, for a better understanding of what exactly might be happenning it would be useful if you could share the code (or the part of the code that you think has problems). If the code is proprietary a pseudo-code version or an explanation may also be useful.</p>\n"}],"owner":{"account_id":6200839,"reputation":476,"user_id":4830695,"accept_rate":82,"display_name":"fyodorfranz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":436,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1686943814,"creation_date":1686085235,"question_id":76418424,"body_markdown":"I have an spring boot app which is invoking lambda functions via aws-java-sdk-lambda like so:\r\n\r\n    import com.amazonaws.services.lambda.AWSLambda;\r\n    ...\r\n    \r\n    InvokeResult result = awsLambda.invoke(invokeRequest);\r\n\r\nNow when I&#39;m running this from my local machine, this works fine: it invokes the function and then returns a response when it completes. Sometimes, the lambda function times out, and in that scenario, I get a response indicating this. \r\n\r\nI also have this app deployed in an ECS task, and I&#39;ve noticed that, in that context, if the lambda function doesn&#39;t take more than 10 mins to complete, I get a response just as expected. However, if it takes much longer than that or if it ultimately times out after 15 mins, the invoke method hangs indefinitely in the ECS task (whereas locally I always get a response back after 15 mins at the latest - indicating a timeout). \r\n\r\nIn order to address this I&#39;ve tried adjusting the ClientConfiguration so that it times out after 16 mins, however, this solution won&#39;t work since sometimes the lambda function completes after about 10 mins and the invoke method still hangs indefinitely in the ECS task  (though, again, this never happens for me when running the app locally). \r\n\r\nI considered whether this could be permission related, however, that doesn&#39;t seem likely. The task has &quot;lambda:InvokeFunction&quot; and &quot;lambda:GetFunction&quot; permissions and does behave as expected when the lambda function completes in under 10 mins. Is there anything else I should try to prevent the invocation from hanging?\r\n\r\n","title":"AWS lambda invoke sometimes hangs indefinitely when executed via ECS","body":"<p>I have an spring boot app which is invoking lambda functions via aws-java-sdk-lambda like so:</p>\n<pre><code>import com.amazonaws.services.lambda.AWSLambda;\n...\n\nInvokeResult result = awsLambda.invoke(invokeRequest);\n</code></pre>\n<p>Now when I'm running this from my local machine, this works fine: it invokes the function and then returns a response when it completes. Sometimes, the lambda function times out, and in that scenario, I get a response indicating this.</p>\n<p>I also have this app deployed in an ECS task, and I've noticed that, in that context, if the lambda function doesn't take more than 10 mins to complete, I get a response just as expected. However, if it takes much longer than that or if it ultimately times out after 15 mins, the invoke method hangs indefinitely in the ECS task (whereas locally I always get a response back after 15 mins at the latest - indicating a timeout).</p>\n<p>In order to address this I've tried adjusting the ClientConfiguration so that it times out after 16 mins, however, this solution won't work since sometimes the lambda function completes after about 10 mins and the invoke method still hangs indefinitely in the ECS task  (though, again, this never happens for me when running the app locally).</p>\n<p>I considered whether this could be permission related, however, that doesn't seem likely. The task has &quot;lambda:InvokeFunction&quot; and &quot;lambda:GetFunction&quot; permissions and does behave as expected when the lambda function completes in under 10 mins. Is there anything else I should try to prevent the invocation from hanging?</p>\n"},{"tags":["java","date","localdate","yearmonth"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1684125811,"post_id":76250521,"comment_id":134465383,"body_markdown":"I am sorry, I can’t follow. I think I need a representative assortment of example inputs with desired outputs.","body":"I am sorry, I can’t follow. I think I need a representative assortment of example inputs with desired outputs."},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1684132630,"post_id":76250521,"comment_id":134466164,"body_markdown":"@OleV.V. The start date and end date are inputs the expected outputs are `startDateGeneration` and `endDateGeneration`","body":"@OleV.V. The start date and end date are inputs the expected outputs are <code>startDateGeneration</code> and <code>endDateGeneration</code>"},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1684133334,"post_id":76250521,"comment_id":134466267,"body_markdown":"@OleV.V. Let me know if this helps or would you need more details","body":"@OleV.V. Let me know if this helps or would you need more details"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1684175111,"post_id":76250521,"comment_id":134475833,"body_markdown":"I am still far from understanding it all. So these are guesses, and you must deem whether they are right or not: 1. If start_month &gt; end_month, the row spans New Year. In this case a date is in the range if monthOfDate &lt;= end_month || monthOfDate &gt;= start_month. In the opposite case, not crossing New Year, the condition is monthOfDate &gt;= start_month &amp;&amp; monthOfDate &lt;= end_month. 2. Similarly if advance_start_month &gt; discount_start_month, then the “advance” period (whatever that is) starts the year before, so subtract 1 from the year.","body":"I am still far from understanding it all. So these are guesses, and you must deem whether they are right or not: 1. If start_month &gt; end_month, the row spans New Year. In this case a date is in the range if monthOfDate &lt;= end_month || monthOfDate &gt;= start_month. In the opposite case, not crossing New Year, the condition is monthOfDate &gt;= start_month &amp;&amp; monthOfDate &lt;= end_month. 2. Similarly if advance_start_month &gt; discount_start_month, then the “advance” period (whatever that is) starts the year before, so subtract 1 from the year."},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1684210018,"post_id":76250521,"comment_id":134480227,"body_markdown":"@OleV.V. 1. Your first condition should be `&amp;&amp;` 2. the advance_start_month will always be less than the discount_start_month","body":"@OleV.V. 1. Your first condition should be <code>&amp;&amp;</code> 2. the advance_start_month will always be less than the discount_start_month"},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1684211468,"post_id":76250521,"comment_id":134480336,"body_markdown":"@OleV.V. I have edited the question and added more details with date examples, describing how the flow is . This should help you else let me know how I can help in further understanding.","body":"@OleV.V. I have edited the question and added more details with date examples, describing how the flow is . This should help you else let me know how I can help in further understanding."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1684217151,"post_id":76250521,"comment_id":134480977,"body_markdown":"1. I put `||` (or) there on purpose. If the date is 2023-12-19, discount_start_month is 12 and end month 1, then if I do 12 &lt;= 1 &amp;&amp; 12 &gt;= 12, then it will never be true even thought the date is within the interval from December through January. With `||` it will be true for dates in December and January and no other dates.  2. In the FEB_MAR row discount_start_month is 2 and advance_start_month is 12. And 12 is not less than 2. I think this was why you asked that question to begin with? I am sorry, I am about to give up on helping you.","body":"1. I put <code>||</code> (or) there on purpose. If the date is 2023-12-19, discount_start_month is 12 and end month 1, then if I do 12 &lt;= 1 &amp;&amp; 12 &gt;= 12, then it will never be true even thought the date is within the interval from December through January. With <code>||</code> it will be true for dates in December and January and no other dates.  2. In the FEB_MAR row discount_start_month is 2 and advance_start_month is 12. And 12 is not less than 2. I think this was why you asked that question to begin with? I am sorry, I am about to give up on helping you."},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1684220295,"post_id":76250521,"comment_id":134481514,"body_markdown":"@OleV.V. ` I think this was why you asked that question to begin with?`  the current logic is handled for Dececmber month what if the month was 10 or 11 in the `discount_start_month`. `I am sorry, I am about to give up on helping you.` Oops ! Is this a complex question or you are having trouble to understand it ?","body":"@OleV.V. ` I think this was why you asked that question to begin with?`  the current logic is handled for Dececmber month what if the month was 10 or 11 in the <code>discount_start_month</code>. <code>I am sorry, I am about to give up on helping you.</code> Oops ! Is this a complex question or you are having trouble to understand it ?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1684230071,"post_id":76250521,"comment_id":134483793,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/253674/discussion-between-ole-v-v-and-oldcode).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/253674/discussion-between-ole-v-v-and-oldcode\">continue this discussion in chat</a>."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684968836,"post_id":76250521,"comment_id":134596849,"body_markdown":"@oldcode, I&#39;ll give this a try.  I was planning on just creating my own objects and using `Calendar` for comparison, if needed.  Any objections?","body":"@oldcode, I&#39;ll give this a try.  I was planning on just creating my own objects and using <code>Calendar</code> for comparison, if needed.  Any objections?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684974134,"post_id":76250521,"comment_id":134597381,"body_markdown":"@oldcode, for `isInRange`, there is a `discountDate` parameter.  What is this value?  I thought the input was a start and end date.","body":"@oldcode, for <code>isInRange</code>, there is a <code>discountDate</code> parameter.  What is this value?  I thought the input was a start and end date."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684974419,"post_id":76250521,"comment_id":134597413,"body_markdown":"@oldcode, and finally, your &quot;expected output&quot; data has, for example, and start and end date of 2023-08-01 and 2023-10-01.  The discount start and end dates appear to only extend for 1 month, how would this match any of the data-sets?","body":"@oldcode, and finally, your &quot;expected output&quot; data has, for example, and start and end date of 2023-08-01 and 2023-10-01.  The discount start and end dates appear to only extend for 1 month, how would this match any of the data-sets?"},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1685015102,"post_id":76250521,"comment_id":134603405,"body_markdown":"@Reilas  For SeasonId `101` , the `advance_start_month` for `2023-08-01` is `06` from above table as shown in screenshot and the advance_end_month for `2023-10-01` is `11`","body":"@Reilas  For SeasonId <code>101</code> , the <code>advance_start_month</code> for <code>2023-08-01</code> is <code>06</code> from above table as shown in screenshot and the advance_end_month for <code>2023-10-01</code> is <code>11</code>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1685356040,"post_id":76250521,"comment_id":134644722,"body_markdown":"It is probably pretty easy to implement the logic you need. However, I cannot help but wonder why anyone would shoot themselves in their own feet like this, making a simple matter complicated. Why don&#39;t you use actual dates instead of strange combinations of months and &quot;seasons&quot; for designating the beginnings and ends of discount periods? Did somebody decide that this would not be complicated enough and then make it harder on purpose?","body":"It is probably pretty easy to implement the logic you need. However, I cannot help but wonder why anyone would shoot themselves in their own feet like this, making a simple matter complicated. Why don&#39;t you use actual dates instead of strange combinations of months and &quot;seasons&quot; for designating the beginnings and ends of discount periods? Did somebody decide that this would not be complicated enough and then make it harder on purpose?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1685356199,"post_id":76250521,"comment_id":134644752,"body_markdown":"Besides, you never explained how seasons translate to years and what the advance dates actually mean. It seems like the advance start month is always two months prior to the discount start and the advance end always identical to the discount end. Therefore, you can automatically calculate them. Who designs such a system? A masochist maybe - no offence meant.","body":"Besides, you never explained how seasons translate to years and what the advance dates actually mean. It seems like the advance start month is always two months prior to the discount start and the advance end always identical to the discount end. Therefore, you can automatically calculate them. Who designs such a system? A masochist maybe - no offence meant."},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1685621793,"post_id":76250521,"comment_id":134687610,"body_markdown":"@kriegaex - You cannot use the actual dates an actual date might lie anywhere between the range, the problem is to detect the `advance_start_month` and the valid year for it. Lets say if the season id is `101` and the actual date could lie anywhere between April and May you would have to pick up this info from database and then simply subtract the month from `advance_start_month`.","body":"@kriegaex - You cannot use the actual dates an actual date might lie anywhere between the range, the problem is to detect the <code>advance_start_month</code> and the valid year for it. Lets say if the season id is <code>101</code> and the actual date could lie anywhere between April and May you would have to pick up this info from database and then simply subtract the month from <code>advance_start_month</code>."},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1685621923,"post_id":76250521,"comment_id":134687633,"body_markdown":"@kriegaex -`Therefore, you can automatically calculate them` , not always I have given here some limited examples here. `Besides, you never explained how seasons translate to years` you cannot store year info as storing year info would make it invalid for next year. That is why you have to explicitly derive the year from the months ? Wouldn&#39;t it be dumb to store the year info when the table could have the same data for years and years ?","body":"@kriegaex -<code>Therefore, you can automatically calculate them</code> , not always I have given here some limited examples here. <code>Besides, you never explained how seasons translate to years</code> you cannot store year info as storing year info would make it invalid for next year. That is why you have to explicitly derive the year from the months ? Wouldn&#39;t it be dumb to store the year info when the table could have the same data for years and years ?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1685625031,"post_id":76250521,"comment_id":134688460,"body_markdown":"No, it would not be dumb. Storing exact dates for each period would unburden you from  calculating dates with a complex algorithm. This premature optimisation to try and store as little info as possible in the DBMS probably neither saves any significant amount of storage space nor does it yield any performance gain. Furthermore, you would be more flexible in the future. What if for some reason business comes up with the idea to have a special Xmas discount from 05-Dec to 10-Jan? If you simply store dates, you can do that. If you assume that forever it will be full months, you cannot.","body":"No, it would not be dumb. Storing exact dates for each period would unburden you from  calculating dates with a complex algorithm. This premature optimisation to try and store as little info as possible in the DBMS probably neither saves any significant amount of storage space nor does it yield any performance gain. Furthermore, you would be more flexible in the future. What if for some reason business comes up with the idea to have a special Xmas discount from 05-Dec to 10-Jan? If you simply store dates, you can do that. If you assume that forever it will be full months, you cannot."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1685625168,"post_id":76250521,"comment_id":134688502,"body_markdown":"What actually is &quot;dumb&quot; (I mean suboptimal) - pardon my French, I am just using your own words - is the current design. You are trying to solve a home-grown problem you would not even have if you would simply store dates. This is not unlike masturbation - being busy, playing with yourself. &#128521; No disrespect, I am just trying to make a point and be very clear. Ever heard about the KISS principle?","body":"What actually is &quot;dumb&quot; (I mean suboptimal) - pardon my French, I am just using your own words - is the current design. You are trying to solve a home-grown problem you would not even have if you would simply store dates. This is not unlike masturbation - being busy, playing with yourself. 😉 No disrespect, I am just trying to make a point and be very clear. Ever heard about the KISS principle?"},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1685715541,"post_id":76250521,"comment_id":134704277,"body_markdown":"@kriegaex you are not trying to understand the point my friend, we cannot store the dates only months can be stored, how can you even think of storing the full date with the years, the logic should work for any year not only the ones that is stored. This month info is like a configuration and it set for years and years. Why would anyone store the dates and then modify the year logic in Database every year to make the logic working ?","body":"@kriegaex you are not trying to understand the point my friend, we cannot store the dates only months can be stored, how can you even think of storing the full date with the years, the logic should work for any year not only the ones that is stored. This month info is like a configuration and it set for years and years. Why would anyone store the dates and then modify the year logic in Database every year to make the logic working ?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1685721494,"post_id":76250521,"comment_id":134705574,"body_markdown":"If you only explain a small part of the story, how am I supposed to know more than you tell? Your statement that I am not _trying_ to understand is false, otherwise why would I bother commenting? I cannot read your mind, and your specification is incomplete. SO is not a discussion forum, but a Q/A platform. Just look at the sheer number of comments your question has provoked. Ideally it should just be a question and an answer. Anyway, this is a waste of time. I am out of here, good luck.","body":"If you only explain a small part of the story, how am I supposed to know more than you tell? Your statement that I am not <i>trying</i> to understand is false, otherwise why would I bother commenting? I cannot read your mind, and your specification is incomplete. SO is not a discussion forum, but a Q/A platform. Just look at the sheer number of comments your question has provoked. Ideally it should just be a question and an answer. Anyway, this is a waste of time. I am out of here, good luck."},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1685805586,"post_id":76250521,"comment_id":134714020,"body_markdown":"@kriegaex `If you only explain a small part of the story, how am I supposed to know more than you tell? ` I posted a question with all details, deleted it as I got comments feedback was to shorten the question, I argued and explained making it short will not do any good, so had to delete the question and posted a new one with only core logic you can take a look here as you have enough rep to view deleted question[actual question](https://stackoverflow.com/questions/76248877/comparing-months-without-years-data-for-all-date-usecases)","body":"@kriegaex <code>If you only explain a small part of the story, how am I supposed to know more than you tell? </code> I posted a question with all details, deleted it as I got comments feedback was to shorten the question, I argued and explained making it short will not do any good, so had to delete the question and posted a new one with only core logic you can take a look here as you have enough rep to view deleted question<a href=\"https://stackoverflow.com/questions/76248877/comparing-months-without-years-data-for-all-date-usecases\">actual question</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1686472480,"post_id":76250521,"comment_id":134800837,"body_markdown":"Maybe next time, just ask a clear, concise question with some code and link the question to a GitHub repository with a full, minimal sample project reproducing your situation. Next to nobody feels inclined to copy many code snippets into their IDEs, then noticing that some small part or a build configuration is missing. Like others said here and over in the other question before, it is kind of difficult to find out what the actual question is. Again, good luck to you.","body":"Maybe next time, just ask a clear, concise question with some code and link the question to a GitHub repository with a full, minimal sample project reproducing your situation. Next to nobody feels inclined to copy many code snippets into their IDEs, then noticing that some small part or a build configuration is missing. Like others said here and over in the other question before, it is kind of difficult to find out what the actual question is. Again, good luck to you."},{"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"score":0,"creation_date":1686943482,"post_id":76250521,"comment_id":134873247,"body_markdown":"@kriegaex I have removed lot of verbose information. Please let me know if you can read through it and understand ?","body":"@kriegaex I have removed lot of verbose information. Please let me know if you can read through it and understand ?"}],"answers":[{"tags":[],"owner":{"account_id":27530879,"reputation":3,"user_id":21009407,"display_name":"1 1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685391578,"creation_date":1685391517,"answer_id":76360118,"question_id":76250521,"body_markdown":"    private static boolean isInRange(\r\n        LocalDate discountDate, Integer fromMonth, Integer toMonth) {\r\n      int discountYear = discountDate.getYear();\r\n    \r\n      if (fromMonth &gt; toMonth) {\r\n        if (discountDate.getMonthValue() == Constants.DEC_MONTH) {\r\n          toMonth += 12;\r\n        } else if (discountDate.getMonthValue() == Constants.JAN_MONTH) {\r\n          fromMonth -= 12;\r\n        }\r\n      }\r\n    \r\n      return discountDate.getMonthValue() &gt;= fromMonth &amp;&amp; discountDate.getMonthValue() &lt;= toMonth;\r\n    }\r\nand \r\n\r\n    int startYear = fromDate.getYear();\r\n    int endYear = toDate.getYear();\r\n    int advanceStartMonth = fromDateSeasonMap.get(Constants.ADVANCE_START_MONTH);\r\n    int advanceEndMonth = toDateSeasonMap.get(Constants.ADVANCE_END_MONTH);\r\n    \r\n    if (advanceStartMonth &gt;= Constants.OCT_MONTH &amp;&amp; advanceStartMonth &lt;= Constants.DEC_MONTH &amp;&amp; startYear == endYear) {\r\n      startYear -= 1;\r\n    }\r\n    \r\n    if (advanceEndMonth &gt;= Constants.OCT_MONTH &amp;&amp; advanceEndMonth &lt;= Constants.DEC_MONTH &amp;&amp; startYear == endYear) {\r\n      endYear -= 1;\r\n    }\r\n    \r\n    if (advanceEndMonth &lt; advanceStartMonth) {\r\n      if (toDate.getMonthValue() == Constants.DEC_MONTH) {\r\n        endYear += 1;\r\n      }\r\n    }\r\n    \r\n    LocalDate startDateGeneration = fromDate.withMonth(advanceStartMonth).withYear(startYear);\r\n    LocalDate endDateGeneration = toDate.withMonth(advanceEndMonth).withYear(endYear);\r\n    \r\n    // Adjust the end day of the month for endDateGeneration\r\n    int lastDayOfMonth = YearMonth.of(endYear, advanceEndMonth).lengthOfMonth();\r\n    endDateGeneration = endDateGeneration.withDayOfMonth(lastDayOfMonth);\r\n\r\nHope that helps, the question isn&#39;t very clear, but this could help you.\r\n","title":"Querying dates within months using only numerical values months","body":"<pre><code>private static boolean isInRange(\n    LocalDate discountDate, Integer fromMonth, Integer toMonth) {\n  int discountYear = discountDate.getYear();\n\n  if (fromMonth &gt; toMonth) {\n    if (discountDate.getMonthValue() == Constants.DEC_MONTH) {\n      toMonth += 12;\n    } else if (discountDate.getMonthValue() == Constants.JAN_MONTH) {\n      fromMonth -= 12;\n    }\n  }\n\n  return discountDate.getMonthValue() &gt;= fromMonth &amp;&amp; discountDate.getMonthValue() &lt;= toMonth;\n}\n</code></pre>\n<p>and</p>\n<pre><code>int startYear = fromDate.getYear();\nint endYear = toDate.getYear();\nint advanceStartMonth = fromDateSeasonMap.get(Constants.ADVANCE_START_MONTH);\nint advanceEndMonth = toDateSeasonMap.get(Constants.ADVANCE_END_MONTH);\n\nif (advanceStartMonth &gt;= Constants.OCT_MONTH &amp;&amp; advanceStartMonth &lt;= Constants.DEC_MONTH &amp;&amp; startYear == endYear) {\n  startYear -= 1;\n}\n\nif (advanceEndMonth &gt;= Constants.OCT_MONTH &amp;&amp; advanceEndMonth &lt;= Constants.DEC_MONTH &amp;&amp; startYear == endYear) {\n  endYear -= 1;\n}\n\nif (advanceEndMonth &lt; advanceStartMonth) {\n  if (toDate.getMonthValue() == Constants.DEC_MONTH) {\n    endYear += 1;\n  }\n}\n\nLocalDate startDateGeneration = fromDate.withMonth(advanceStartMonth).withYear(startYear);\nLocalDate endDateGeneration = toDate.withMonth(advanceEndMonth).withYear(endYear);\n\n// Adjust the end day of the month for endDateGeneration\nint lastDayOfMonth = YearMonth.of(endYear, advanceEndMonth).lengthOfMonth();\nendDateGeneration = endDateGeneration.withDayOfMonth(lastDayOfMonth);\n</code></pre>\n<p>Hope that helps, the question isn't very clear, but this could help you.</p>\n"},{"tags":[],"owner":{"account_id":25838667,"reputation":312,"user_id":19574650,"display_name":"I.sh."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685397706,"creation_date":1685397706,"answer_id":76360533,"question_id":76250521,"body_markdown":"To handle the logic for `isInRange` when the start month is greater than the end month, you can modify the logic as follows:\r\n\r\n```java\r\nprivate static boolean isInRange(LocalDate discountDate, Integer fromMonth, Integer toMonth) {\r\n    int discountYear = discountDate.getYear();\r\n    int discountMonth = discountDate.getMonthValue();\r\n\r\n    if (fromMonth &lt;= toMonth) {\r\n        return discountMonth &gt;= fromMonth &amp;&amp; discountMonth &lt;= toMonth;\r\n    } else {\r\n        if (discountMonth &gt;= fromMonth || discountMonth &lt;= toMonth) {\r\n            return true;\r\n        } else {\r\n            if (discountMonth == Constants.JAN_MONTH &amp;&amp; toMonth == Constants.DEC_MONTH) {\r\n                return true;\r\n            }\r\n            if (discountMonth == Constants.DEC_MONTH &amp;&amp; fromMonth == Constants.JAN_MONTH) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n```\r\n\r\nThis logic handles the case when the start month is greater than the end month by considering the special cases of December (12) and January (1).\r\n\r\nTo handle the year generation logic based on the dataset, you can use the following approach:\r\n\r\n1. Get the start year from the `fromDate` object.\r\n2. Get the end year from the `toDate` object.\r\n3. Retrieve the `advance_start_month` and `advance_end_month` from the dataset.\r\n4. Check if the `advance_start_month` falls between October (10) and December (12) inclusive, and the start year is the same as the end year. If true, decrement the start year by 1.\r\n5. Check if the `advance_end_month` is less than the `advance_start_month`. If true, check if the `toDate` month is December (12) and increment the end year by 1.\r\n\r\nHere&#39;s an example implementation of the year generation logic:\r\n\r\n```java\r\nint startYear = fromDate.getYear();\r\nint endYear = toDate.getYear();\r\n\r\n// Get the advance_start_month from the DB iterating object of the start date\r\nint advanceStartMonth = ...; // Retrieve the value from the dataset\r\n\r\nif (advanceStartMonth &gt;= Constants.OCT_MONTH &amp;&amp; advanceStartMonth &lt;= Constants.DEC_MONTH &amp;&amp; startYear == endYear) {\r\n    startYear = startYear - 1;\r\n}\r\n\r\n// Get the advance_start_month and advance_end_month from the DB iterating object of the end date\r\nint advanceEndMonth = ...; // Retrieve the value from the dataset\r\n\r\nif (advanceEndMonth &lt; advanceStartMonth) {\r\n    if (toDate.getMonthValue() == Constants.DEC_MONTH) {\r\n        endYear = endYear + 1;\r\n    }\r\n}\r\n```\r\n\r\nBy following this approach, you can generate the correct start and end years for the `startDateGeneration` and `endDateGeneration` objects.\r\n\r\nPlease note that you need to retrieve the corresponding values from the dataset for `advance_start_month` and `advance_end_month` as mentioned in the code comments.\r\n\r\nI hope I&#39;ve understand the question correctly, it was hard to follow.","title":"Querying dates within months using only numerical values months","body":"<p>To handle the logic for <code>isInRange</code> when the start month is greater than the end month, you can modify the logic as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean isInRange(LocalDate discountDate, Integer fromMonth, Integer toMonth) {\n    int discountYear = discountDate.getYear();\n    int discountMonth = discountDate.getMonthValue();\n\n    if (fromMonth &lt;= toMonth) {\n        return discountMonth &gt;= fromMonth &amp;&amp; discountMonth &lt;= toMonth;\n    } else {\n        if (discountMonth &gt;= fromMonth || discountMonth &lt;= toMonth) {\n            return true;\n        } else {\n            if (discountMonth == Constants.JAN_MONTH &amp;&amp; toMonth == Constants.DEC_MONTH) {\n                return true;\n            }\n            if (discountMonth == Constants.DEC_MONTH &amp;&amp; fromMonth == Constants.JAN_MONTH) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n</code></pre>\n<p>This logic handles the case when the start month is greater than the end month by considering the special cases of December (12) and January (1).</p>\n<p>To handle the year generation logic based on the dataset, you can use the following approach:</p>\n<ol>\n<li>Get the start year from the <code>fromDate</code> object.</li>\n<li>Get the end year from the <code>toDate</code> object.</li>\n<li>Retrieve the <code>advance_start_month</code> and <code>advance_end_month</code> from the dataset.</li>\n<li>Check if the <code>advance_start_month</code> falls between October (10) and December (12) inclusive, and the start year is the same as the end year. If true, decrement the start year by 1.</li>\n<li>Check if the <code>advance_end_month</code> is less than the <code>advance_start_month</code>. If true, check if the <code>toDate</code> month is December (12) and increment the end year by 1.</li>\n</ol>\n<p>Here's an example implementation of the year generation logic:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int startYear = fromDate.getYear();\nint endYear = toDate.getYear();\n\n// Get the advance_start_month from the DB iterating object of the start date\nint advanceStartMonth = ...; // Retrieve the value from the dataset\n\nif (advanceStartMonth &gt;= Constants.OCT_MONTH &amp;&amp; advanceStartMonth &lt;= Constants.DEC_MONTH &amp;&amp; startYear == endYear) {\n    startYear = startYear - 1;\n}\n\n// Get the advance_start_month and advance_end_month from the DB iterating object of the end date\nint advanceEndMonth = ...; // Retrieve the value from the dataset\n\nif (advanceEndMonth &lt; advanceStartMonth) {\n    if (toDate.getMonthValue() == Constants.DEC_MONTH) {\n        endYear = endYear + 1;\n    }\n}\n</code></pre>\n<p>By following this approach, you can generate the correct start and end years for the <code>startDateGeneration</code> and <code>endDateGeneration</code> objects.</p>\n<p>Please note that you need to retrieve the corresponding values from the dataset for <code>advance_start_month</code> and <code>advance_end_month</code> as mentioned in the code comments.</p>\n<p>I hope I've understand the question correctly, it was hard to follow.</p>\n"}],"owner":{"account_id":5635559,"reputation":1669,"user_id":4706252,"accept_rate":67,"display_name":"oldcode"},"comment_count":24,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1686943436,"creation_date":1684117518,"question_id":76250521,"body_markdown":"I have 2 date values and a set of rows which have a range defined as `discount_start_month` and `discount_end_month`. The current situation is that I only have month information as below, there is no year data to compare the input 2 dates values with these months.\r\n\r\n\r\nThe goal is to take the date and see in between which range of months they fall into. At any given point of time they may fall into any of `discount_code` \r\n\r\nFor Eg: A date 01 January 2022 would come under `DEC_JAN` row.\r\nA date 01 December 2021 would still come uder `DEC_JAN` row\r\n\r\n**Problem:**\r\n\r\n1. The problem statement is without year information how would you check in which range do the input dates lie ?\r\n2. Once I figure out (1), I need to generate 2 dates with the values `advance_start_month` and `advance_end_month`, so for the above it would be ,\r\n\r\n2 dates would be named as `startDateGeneration` and `endDateGeneration`\r\n\r\n`startDateGeneration` would be generated from the `discount_code`&#39;s `advance_start_month`,\r\n\r\n\r\nconsidering example 01 January 2022, the `startDateGeneration` would be generated from `DEC_JAN`&#39;s `advance_start_month` and `advance_end_month`\r\n\r\n\r\nday -&gt; first day of the month of October (from `advance_start_month`)\r\n\r\nMonth -&gt; October\r\n\r\nYear -&gt; Previous year \r\n\r\n\r\n`startDateGeneration` would be 01 October 2021\r\n\r\n\r\nSame for `endDateGeneration`, we would use the `advance_end_month`\r\nso it would be 01 January 2022\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nInputs are **start date** and **end date**.\r\n\r\n\r\nCode to find the dates in range by iterating over the above dataset.\r\n\r\n\r\n    private static boolean isInRange(\r\n          LocalDate discountDate, Integer fromMonth, Integer toMonth) {\r\n        YearMonth fromMonthDiscount = YearMonth.of(discountDate.getYear(), fromMonth);\r\n        YearMonth toMonthDiscount = YearMonth.of(discountDate.getYear(), toMonth);\r\n        YearMonth yearMonthDiscountDate =\r\n            YearMonth.of(discountDate.getYear(), discountDate.getMonthValue());\r\n    \r\n        if (fromMonth &gt; toMonth) {\r\n          if (discountDate.getMonthValue() == Constants.DEC_MONTH) {\r\n            toMonthDiscount = YearMonth.of(discountDate.getYear() + 1, toMonth);\r\n          } else if (discountDate.getMonthValue() == Constants.JAN_MONTH) {\r\n            fromMonthDiscount = YearMonth.of(discountDate.getYear() - 1, fromMonth);\r\n          }\r\n        }\r\n    \r\n        return (yearMonthDiscountDate.isAfter(fromMonthDiscount)\r\n                || yearMonthDiscountDate.equals(fromMonthDiscount))\r\n            &amp;&amp; (yearMonthDiscountDate.isBefore(toMonthDiscount)\r\n                || yearMonthDiscountDate.equals(toMonthDiscount));\r\n      }\r\n   \r\n\r\n\r\nLogic to find the problem statement (2) part,\r\n\r\n\r\n     int startYear = fromDate.getYear();\r\n        int endYear = toDate.getYear();\r\n        \r\n        // Get the advance_start_month from the DB iterating object of the start date\r\n        int advanceStartMonth = ....\r\n        \r\n        if(advanceStartMonth &gt;= Constants.OCT_MONTH &amp;&amp;\r\n            advanceStartMonth &lt;= Constants.DEC_MONTH &amp;&amp;\r\n            startYear == endYear) {\r\n            startYear = startYear - 1;\r\n        }\r\n        \r\n        // Get the advance_start_month and advance_end_month from the DB iterating object of the end date  \r\n        int discountResultStartMonth = //.......\r\n            int discountResultEndMonth = //........\r\n        \r\n            if (discountResultStartMonth &gt; discountResultEndMonth) {\r\n                if (toDate.getMonthValue() == Constants.DEC_MONTH) {\r\n                    endYear = endYear + 1;\r\n                }\r\n            }\r\n\r\n\r\nLogic for forming the dates to generate a range out of these,\r\n\r\n`fromDateSeasonMap` -&gt; Dataset for 1 row from the above dataset(for start date)\r\n`toDateSeasonMap` -&gt; Dataset for 1 row from the above dataset(for end date)\r\n\r\n    LocalDate startDateGeneration =\r\n              fromDate\r\n                  .withMonth((Integer) fromDateSeasonMap.get(Constants.ADVANCE_START_MONTH))\r\n                  .withYear(startYear);\r\n          LocalDate endDateGeneration =\r\n              toDate\r\n                  .withMonth((Integer) toDateSeasonMap.get(Constants.ADVANCE_END_MONTH))\r\n                  .withYear(endYear)\r\n                  .withDayOfMonth(\r\n                      YearMonth.of(endYear, (Integer) toDateSeasonMap.get(Constants.ADVANCE_END_MONTH))\r\n                          .atEndOfMonth()\r\n                          .getDayOfMonth());\r\n\r\nNotes:\r\n\r\n1. At any given point of time there would be no overlapping months in the dataset.\r\n2. Only Months numerical data is present.\r\n3. There would be no values greater than 12 as there are only 12 months in a year.\r\n\r\n\r\nExpected Input and output\r\n\r\n    Begin Input\r\n    Start Date: 2023-08-01\r\n    End Date: 2023-10-01\r\n    startDateGeneration: 2023-06-01\r\n    endDateGeneration: 2023-11-30\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-09-01\r\n    End Date: 2023-12-01\r\n    startDateGeneration: 2023-07-01\r\n    endDateGeneration: 2024-01-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-01-30\r\n    End Date: 2023-02-01\r\n    startDateGeneration: 2022-11-30\r\n    endDateGeneration: 2023-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-01-30\r\n    End Date: 2023-02-01\r\n    startDateGeneration: 2022-11-30\r\n    endDateGeneration: 2023-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2022-10-30\r\n    End Date: 2023-02-01\r\n    startDateGeneration: 2022-08-30\r\n    endDateGeneration: 2023-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2022-08-30\r\n    End Date: 2022-10-01\r\n    startDateGeneration: 2022-06-30\r\n    endDateGeneration: 2022-12-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2022-08-30\r\n    End Date: 2023-02-01\r\n    startDateGeneration: 2022-06-30\r\n    endDateGeneration: 2023-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-04-30\r\n    End Date: 2023-07-01\r\n    startDateGeneration: 2023-02-28\r\n    endDateGeneration: 2023-07-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-06-30\r\n    End Date: 2023-07-01\r\n    startDateGeneration: 2023-04-30\r\n    endDateGeneration: 2023-07-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-08-30\r\n    End Date: 2023-10-01\r\n    startDateGeneration: 2023-06-30\r\n    endDateGeneration: 2023-12-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-10-30\r\n    End Date: 2024-01-01\r\n    startDateGeneration: 2023-08-30\r\n    endDateGeneration: 2024-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2022-12-30\r\n    End Date: 2023-02-01\r\n    startDateGeneration: 2022-10-30\r\n    endDateGeneration: 2023-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-01-30\r\n    End Date: 2023-02-01\r\n    startDateGeneration: 2022-10-30\r\n    endDateGeneration: 2023-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2022-10-01\r\n    End Date: 2023-02-01\r\n    startDateGeneration: 2022-07-01\r\n    endDateGeneration: 2023-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2022-12-01\r\n    End Date: 2023-02-01\r\n    startDateGeneration: 2022-10-01\r\n    endDateGeneration: 2023-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-02-01\r\n    End Date: 2023-04-01\r\n    startDateGeneration: 2022-12-01\r\n    endDateGeneration: 2023-05-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-02-01\r\n    End Date: 2023-03-01\r\n    startDateGeneration: 2022-12-01\r\n    endDateGeneration: 2023-03-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-04-30\r\n    End Date: 2023-06-01\r\n    startDateGeneration: 2023-02-28\r\n    endDateGeneration: 2023-07-31\r\n    ===================================\r\n    Begin Input\r\n    Start Date: 2023-06-30\r\n    End Date: 2023-08-01\r\n    startDateGeneration: 2023-04-30\r\n    endDateGeneration: 2023-08-31\r\n    ===================================\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uO4nG.png\r\n  [2]: https://i.stack.imgur.com/z5c1i.png\r\n","title":"Querying dates within months using only numerical values months","body":"<p>I have 2 date values and a set of rows which have a range defined as <code>discount_start_month</code> and <code>discount_end_month</code>. The current situation is that I only have month information as below, there is no year data to compare the input 2 dates values with these months.</p>\n<p>The goal is to take the date and see in between which range of months they fall into. At any given point of time they may fall into any of <code>discount_code</code></p>\n<p>For Eg: A date 01 January 2022 would come under <code>DEC_JAN</code> row.\nA date 01 December 2021 would still come uder <code>DEC_JAN</code> row</p>\n<p><strong>Problem:</strong></p>\n<ol>\n<li>The problem statement is without year information how would you check in which range do the input dates lie ?</li>\n<li>Once I figure out (1), I need to generate 2 dates with the values <code>advance_start_month</code> and <code>advance_end_month</code>, so for the above it would be ,</li>\n</ol>\n<p>2 dates would be named as <code>startDateGeneration</code> and <code>endDateGeneration</code></p>\n<p><code>startDateGeneration</code> would be generated from the <code>discount_code</code>'s <code>advance_start_month</code>,</p>\n<p>considering example 01 January 2022, the <code>startDateGeneration</code> would be generated from <code>DEC_JAN</code>'s <code>advance_start_month</code> and <code>advance_end_month</code></p>\n<p>day -&gt; first day of the month of October (from <code>advance_start_month</code>)</p>\n<p>Month -&gt; October</p>\n<p>Year -&gt; Previous year</p>\n<p><code>startDateGeneration</code> would be 01 October 2021</p>\n<p>Same for <code>endDateGeneration</code>, we would use the <code>advance_end_month</code>\nso it would be 01 January 2022</p>\n<p><a href=\"https://i.stack.imgur.com/uO4nG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uO4nG.png\" alt=\"enter image description here\" /></a></p>\n<p>Inputs are <strong>start date</strong> and <strong>end date</strong>.</p>\n<p>Code to find the dates in range by iterating over the above dataset.</p>\n<pre><code>private static boolean isInRange(\n      LocalDate discountDate, Integer fromMonth, Integer toMonth) {\n    YearMonth fromMonthDiscount = YearMonth.of(discountDate.getYear(), fromMonth);\n    YearMonth toMonthDiscount = YearMonth.of(discountDate.getYear(), toMonth);\n    YearMonth yearMonthDiscountDate =\n        YearMonth.of(discountDate.getYear(), discountDate.getMonthValue());\n\n    if (fromMonth &gt; toMonth) {\n      if (discountDate.getMonthValue() == Constants.DEC_MONTH) {\n        toMonthDiscount = YearMonth.of(discountDate.getYear() + 1, toMonth);\n      } else if (discountDate.getMonthValue() == Constants.JAN_MONTH) {\n        fromMonthDiscount = YearMonth.of(discountDate.getYear() - 1, fromMonth);\n      }\n    }\n\n    return (yearMonthDiscountDate.isAfter(fromMonthDiscount)\n            || yearMonthDiscountDate.equals(fromMonthDiscount))\n        &amp;&amp; (yearMonthDiscountDate.isBefore(toMonthDiscount)\n            || yearMonthDiscountDate.equals(toMonthDiscount));\n  }\n</code></pre>\n<p>Logic to find the problem statement (2) part,</p>\n<pre><code> int startYear = fromDate.getYear();\n    int endYear = toDate.getYear();\n    \n    // Get the advance_start_month from the DB iterating object of the start date\n    int advanceStartMonth = ....\n    \n    if(advanceStartMonth &gt;= Constants.OCT_MONTH &amp;&amp;\n        advanceStartMonth &lt;= Constants.DEC_MONTH &amp;&amp;\n        startYear == endYear) {\n        startYear = startYear - 1;\n    }\n    \n    // Get the advance_start_month and advance_end_month from the DB iterating object of the end date  \n    int discountResultStartMonth = //.......\n        int discountResultEndMonth = //........\n    \n        if (discountResultStartMonth &gt; discountResultEndMonth) {\n            if (toDate.getMonthValue() == Constants.DEC_MONTH) {\n                endYear = endYear + 1;\n            }\n        }\n</code></pre>\n<p>Logic for forming the dates to generate a range out of these,</p>\n<p><code>fromDateSeasonMap</code> -&gt; Dataset for 1 row from the above dataset(for start date)\n<code>toDateSeasonMap</code> -&gt; Dataset for 1 row from the above dataset(for end date)</p>\n<pre><code>LocalDate startDateGeneration =\n          fromDate\n              .withMonth((Integer) fromDateSeasonMap.get(Constants.ADVANCE_START_MONTH))\n              .withYear(startYear);\n      LocalDate endDateGeneration =\n          toDate\n              .withMonth((Integer) toDateSeasonMap.get(Constants.ADVANCE_END_MONTH))\n              .withYear(endYear)\n              .withDayOfMonth(\n                  YearMonth.of(endYear, (Integer) toDateSeasonMap.get(Constants.ADVANCE_END_MONTH))\n                      .atEndOfMonth()\n                      .getDayOfMonth());\n</code></pre>\n<p>Notes:</p>\n<ol>\n<li>At any given point of time there would be no overlapping months in the dataset.</li>\n<li>Only Months numerical data is present.</li>\n<li>There would be no values greater than 12 as there are only 12 months in a year.</li>\n</ol>\n<p>Expected Input and output</p>\n<pre><code>Begin Input\nStart Date: 2023-08-01\nEnd Date: 2023-10-01\nstartDateGeneration: 2023-06-01\nendDateGeneration: 2023-11-30\n===================================\nBegin Input\nStart Date: 2023-09-01\nEnd Date: 2023-12-01\nstartDateGeneration: 2023-07-01\nendDateGeneration: 2024-01-31\n===================================\nBegin Input\nStart Date: 2023-01-30\nEnd Date: 2023-02-01\nstartDateGeneration: 2022-11-30\nendDateGeneration: 2023-03-31\n===================================\nBegin Input\nStart Date: 2023-01-30\nEnd Date: 2023-02-01\nstartDateGeneration: 2022-11-30\nendDateGeneration: 2023-03-31\n===================================\nBegin Input\nStart Date: 2022-10-30\nEnd Date: 2023-02-01\nstartDateGeneration: 2022-08-30\nendDateGeneration: 2023-03-31\n===================================\nBegin Input\nStart Date: 2022-08-30\nEnd Date: 2022-10-01\nstartDateGeneration: 2022-06-30\nendDateGeneration: 2022-12-31\n===================================\nBegin Input\nStart Date: 2022-08-30\nEnd Date: 2023-02-01\nstartDateGeneration: 2022-06-30\nendDateGeneration: 2023-03-31\n===================================\nBegin Input\nStart Date: 2023-04-30\nEnd Date: 2023-07-01\nstartDateGeneration: 2023-02-28\nendDateGeneration: 2023-07-31\n===================================\nBegin Input\nStart Date: 2023-06-30\nEnd Date: 2023-07-01\nstartDateGeneration: 2023-04-30\nendDateGeneration: 2023-07-31\n===================================\nBegin Input\nStart Date: 2023-08-30\nEnd Date: 2023-10-01\nstartDateGeneration: 2023-06-30\nendDateGeneration: 2023-12-31\n===================================\nBegin Input\nStart Date: 2023-10-30\nEnd Date: 2024-01-01\nstartDateGeneration: 2023-08-30\nendDateGeneration: 2024-03-31\n===================================\nBegin Input\nStart Date: 2022-12-30\nEnd Date: 2023-02-01\nstartDateGeneration: 2022-10-30\nendDateGeneration: 2023-03-31\n===================================\nBegin Input\nStart Date: 2023-01-30\nEnd Date: 2023-02-01\nstartDateGeneration: 2022-10-30\nendDateGeneration: 2023-03-31\n===================================\nBegin Input\nStart Date: 2022-10-01\nEnd Date: 2023-02-01\nstartDateGeneration: 2022-07-01\nendDateGeneration: 2023-03-31\n===================================\nBegin Input\nStart Date: 2022-12-01\nEnd Date: 2023-02-01\nstartDateGeneration: 2022-10-01\nendDateGeneration: 2023-03-31\n===================================\nBegin Input\nStart Date: 2023-02-01\nEnd Date: 2023-04-01\nstartDateGeneration: 2022-12-01\nendDateGeneration: 2023-05-31\n===================================\nBegin Input\nStart Date: 2023-02-01\nEnd Date: 2023-03-01\nstartDateGeneration: 2022-12-01\nendDateGeneration: 2023-03-31\n===================================\nBegin Input\nStart Date: 2023-04-30\nEnd Date: 2023-06-01\nstartDateGeneration: 2023-02-28\nendDateGeneration: 2023-07-31\n===================================\nBegin Input\nStart Date: 2023-06-30\nEnd Date: 2023-08-01\nstartDateGeneration: 2023-04-30\nendDateGeneration: 2023-08-31\n===================================\n</code></pre>\n"},{"tags":["java","csv","date","datetime","timestamp"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686916632,"post_id":76489586,"comment_id":134867803,"body_markdown":"With which API?","body":"With which API?"},{"owner":{"account_id":3963817,"reputation":1269,"user_id":3270329,"accept_rate":80,"display_name":"KVK"},"score":0,"creation_date":1686916793,"post_id":76489586,"comment_id":134867847,"body_markdown":"@g00se with opencsv","body":"@g00se with opencsv"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686917333,"post_id":76489586,"comment_id":134867951,"body_markdown":"Version number please","body":"Version number please"},{"owner":{"account_id":3963817,"reputation":1269,"user_id":3270329,"accept_rate":80,"display_name":"KVK"},"score":0,"creation_date":1686917964,"post_id":76489586,"comment_id":134868083,"body_markdown":"@g00se 3.8 version","body":"@g00se 3.8 version"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686919140,"post_id":76489586,"comment_id":134868340,"body_markdown":"Shall look if I have time. You know you have a missing double quote above?","body":"Shall look if I have time. You know you have a missing double quote above?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686922197,"post_id":76489586,"comment_id":134869013,"body_markdown":"Fine for me with 5.7.1. It might be something else doing that to your data","body":"Fine for me with 5.7.1. It might be something else doing that to your data"}],"owner":{"account_id":3963817,"reputation":1269,"user_id":3270329,"accept_rate":80,"display_name":"KVK"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686943408,"creation_date":1686913661,"question_id":76489586,"body_markdown":"I am trying to write CSV file with SQL time stamp value with the below formate \r\n\r\n    @CsvDate(&quot;yyyy-MM-dd HH:mm:ss a&quot;)\r\n    private Timestamp inDate;\r\n\r\nBut while writing into CSV file which ever hours are less then 12, format automatically changed to **(m/dd/yyyy HH:mm:ss) ex 4/26/2023 10:14:52 AM)** \r\n\r\nIf date above 12 hrs format is happening correctly\r\n**Ex: 2023-04-22 14:14:52 PM** \r\n\r\nCan anyone help me to fix this issue\r\n","title":"CsvDate format issue","body":"<p>I am trying to write CSV file with SQL time stamp value with the below formate</p>\n<pre><code>@CsvDate(&quot;yyyy-MM-dd HH:mm:ss a&quot;)\nprivate Timestamp inDate;\n</code></pre>\n<p>But while writing into CSV file which ever hours are less then 12, format automatically changed to <strong>(m/dd/yyyy HH:mm:ss) ex 4/26/2023 10:14:52 AM)</strong></p>\n<p>If date above 12 hrs format is happening correctly\n<strong>Ex: 2023-04-22 14:14:52 PM</strong></p>\n<p>Can anyone help me to fix this issue</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1686115079,"post_id":76420034,"comment_id":134753054,"body_markdown":"Check your dependencies, maybe there is a chance that you have two versions of the same library, where should be this class that is producing error. So maybe when IDEA is compiling code it is taking version of lib without class, and maven is taking correct one","body":"Check your dependencies, maybe there is a chance that you have two versions of the same library, where should be this class that is producing error. So maybe when IDEA is compiling code it is taking version of lib without class, and maven is taking correct one"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1686117129,"post_id":76420034,"comment_id":134753240,"body_markdown":"`target.classes.com.udacity.webcrawler.IgnoredUrls` looks like you&#39;re confusing package structure with maven file layout.","body":"<code>target.classes.com.udacity.webcrawler.IgnoredUrls</code> looks like you&#39;re confusing package structure with maven file layout."},{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1686121383,"post_id":76420034,"comment_id":134753899,"body_markdown":"Please pull src code on Github and help me to check whether im wrong somewhere","body":"Please pull src code on Github and help me to check whether im wrong somewhere"},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686152495,"post_id":76420034,"comment_id":134760866,"body_markdown":"I cloned your repo, ran `mvn test` (in Eclpse, embedded Maven 3.8.7) and got the same error an other class: `Caused by: java.lang.ClassNotFoundException: target.classes.com.udacity.webcrawler.json.ConfigurationLoader`: https://gist.github.com/gerib/7dc26411c1195ecfbcc4ff50ff3a7071.","body":"I cloned your repo, ran <code>mvn test</code> (in Eclpse, embedded Maven 3.8.7) and got the same error an other class: <code>Caused by: java.lang.ClassNotFoundException: target.classes.com.udacity.webcrawler.json.ConfigurationLoad&zwnj;&#8203;er</code>: <a href=\"https://gist.github.com/gerib/7dc26411c1195ecfbcc4ff50ff3a7071\" rel=\"nofollow noreferrer\">gist.github.com/gerib/7dc26411c1195ecfbcc4ff50ff3a7071</a>."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686152943,"post_id":76420034,"comment_id":134760959,"body_markdown":"If I run _JUnit Test_ on `ProfilerImplTest` in Eclipse everything&#39;s fine.","body":"If I run <i>JUnit Test</i> on <code>ProfilerImplTest</code> in Eclipse everything&#39;s fine."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686155939,"post_id":76420034,"comment_id":134761569,"body_markdown":"Can it be that the tests (functions) are not completely self-contained so that execution order matters? To rule that out I&#39;d try to use the same [`@Order(n)`](https://junit.org/junit5/docs/5.8.2/api/org.junit.jupiter.api/org/junit/jupiter/api/Order.html) as they are run in the IDE successfully.","body":"Can it be that the tests (functions) are not completely self-contained so that execution order matters? To rule that out I&#39;d try to use the same <a href=\"https://junit.org/junit5/docs/5.8.2/api/org.junit.jupiter.api/org/junit/jupiter/api/Order.html\" rel=\"nofollow noreferrer\"><code>@Order(n)</code></a> as they are run in the IDE successfully."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686160623,"post_id":76420034,"comment_id":134762531,"body_markdown":"I tried it. Order doesn&#39;t  matter. Since (as @AntonTokmakov above) I&#39;m also irritated by this `target.classes.com.udacity.webcrawler` package I ran `mvn test -X`: `[DEBUG] Configuring mojo &#39;org.apache.maven.plugins:maven-surefire-plugin:3.1.0:test&#39; with basic configurator`\\n`[DEBUG]   (f) classesDirectory = /home/geri/dev/so.eclipse.wksp/so-76420034-java-unit-test/target/classes` looks OK. Then I tried different versions of the Surefire plugin (3.1.2, 3.0.0, 2.22.2), to no avail. ...cont&#39;d...","body":"I tried it. Order doesn&#39;t  matter. Since (as @AntonTokmakov above) I&#39;m also irritated by this <code>target.classes.com.udacity.webcrawler</code> package I ran <code>mvn test -X</code>: <code>[DEBUG] Configuring mojo &#39;org.apache.maven.plugins:maven-surefire-plugin:3.1.0:test&#39; with basic configurator</code>\\n<code>[DEBUG]   (f) classesDirectory = &#47;home&#47;geri&#47;dev&#47;so.eclipse.wksp&#47;so-76420034-java-unit-test&#47;ta&zwnj;&#8203;rget&#47;classes</code> looks OK. Then I tried different versions of the Surefire plugin (3.1.2, 3.0.0, 2.22.2), to no avail. ...cont&#39;d..."},{"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"score":0,"creation_date":1686163716,"post_id":76420034,"comment_id":134763055,"body_markdown":"Then I ran `mvn test -Dmaven.surefire.debug` in the shell with a conditional breakpoint in Eclipse at `WebCrawlerServiceLocator:55`: `info.getPackageName().startsWith(&quot;target&quot;)`...and....really, it came to `className: &quot;target.classes.com.udacity.webcrawler.json.ConfigurationLoader&quot;`. ...cont&#39;d...","body":"Then I ran <code>mvn test -Dmaven.surefire.debug</code> in the shell with a conditional breakpoint in Eclipse at <code>WebCrawlerServiceLocator:55</code>: <code>info.getPackageName().startsWith(&quot;target&quot;)</code>...and....really, it came to <code>className: &quot;target.classes.com.udacity.webcrawler.json.ConfigurationLoa&zwnj;&#8203;der&quot;</code>. ...cont&#39;d..."}],"answers":[{"tags":[],"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686942164,"creation_date":1686164122,"answer_id":76426292,"question_id":76420034,"body_markdown":"After the actions in the comments to the question I:\r\n\r\n* added `.peek(System.out::println)` prior to (line 52) `filter(classInfo -&gt; ...)` in `WebCrawlerServiceLocator`,\r\n* ran `mvn test -Dmaven.surefire.debug &gt; mvn-test.out` and\r\n* on line 5617 therein there was `target.classes.com.udacity.webcrawler.json.ConfigurationLoader` followed by the error mentioned in the question and its comments:\r\n\r\n````\r\n...\r\ntarget.classes.com.udacity.webcrawler.json.ConfigurationLoader\r\n[ERROR] Tests run: 8, Failures: 0, Errors: 8, Skipped: 0, Time elapsed: 0.84 s &lt;&lt;&lt; FAILURE! - in com.udacity.webcrawler.profiler.ProfilerImplTest\r\n[ERROR] delegateHasNoMethodsAnnotated  Time elapsed: 0.008 s  &lt;&lt;&lt; ERROR!\r\njava.lang.ExceptionInInitializerError\r\n\tat com.udacity.webcrawler.service.ServiceLocator.webCrawlerLocator(ServiceLocator.java:13)\r\n\tat com.udacity.webcrawler.profiler.ProfilerImpl.&lt;init&gt;(ProfilerImpl.java:34)\r\n\tat com.udacity.webcrawler.profiler.ProfilerImplTest.&lt;init&gt;(ProfilerImplTest.java:27)\r\n    ...\r\n````\r\n\r\nSo, apparently [`ImmutableSet&lt;ClassInfo&gt; com.google.common.reflect.ClassPath.getAllClasses()`][gac] takes Maven&#39;s `${project.basedir}` as class path entry. The problem is:\r\n\r\n* that you can&#39;t simply strip `target/classes/` from `packageName` in `map(info -&gt; { ... })` since [`ClassPath.ClassInfo`][cpci-doc] has no setters\r\n* and it has a constructor [`ClassInfo(File file, String resourceName, ClassLoader loader)`][cpci-src] but with default (package) access only.\r\n\r\nAnyway, [`ClassPath`&#39;s javadoc][cp] mentions at the very beginning:\r\n\r\n&gt; ## Prefer [ClassGraph][cg] over `ClassPath`\r\n\r\n### UPDATE\r\n\r\nOut of curiosity I implemented the usage of _ClassGraph_ (which perhaps is even more performant since it has `classInfo.hasAnnotation(...)` which lets you keep only those `ClassInfo`s you&#39;re interested in before they are transformed into `Class`es in `map(...)` ):\r\n\r\n#### POM\r\n```\r\n\t\t...\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.classgraph&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;classgraph&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.8.160&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t...\r\n```\r\n### `WebCrawlerServiceLocator`\r\n```\r\n...\r\nimport static java.lang.System.out;\r\n...\r\nimport io.github.classgraph.ClassGraph;\r\n...\r\nprivate static final Class&lt;? extends Annotation&gt; WRAPPED = Wrapped.class;\r\n...\r\n\t@Override\r\n\tpublic Collection&lt;Class&lt;?&gt;&gt; locateService() {\r\n\r\n\t\ttry {\r\n\t\t\treturn new HashSet&lt;&gt;( ClassPath.from( ClassLoader.getSystemClassLoader() ).getAllClasses().stream()\r\n\t\t\t\t\t.filter( classInfo -&gt; !classInfo.getName().equals( &quot;module-info&quot; ) || !classInfo.getName().equals( &quot;package-info&quot; ) )\r\n\t\t\t\t\t//.peek( out::println )\r\n\t\t\t\t\t.map( classInfo -&gt; {\r\n\t\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\t\t//if ( classInfo.getName().contains( &quot;com.udacity&quot; ) )\r\n\t\t\t\t\t\t\t//\tout.printf( &quot;--&gt; name: %s%n--&gt; cp: %s%n%n&quot;,\r\n\t\t\t\t\t\t\t//\t\tclassInfo.getName(), System.getProperty( &quot;java.class.path&quot; ) );\r\n\r\n\t\t\t\t\t\t\treturn classInfo.load();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcatch ( Error | Exception e ) {\r\n\t\t\t\t\t\t\tout.printf( &quot;--&gt; %s --&gt; return null%n&quot;, e );\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} ) // map(...)\r\n\t\t\t\t\t//.peek( out::println )\r\n\t\t\t\t\t.filter( Objects::nonNull )\r\n\t\t\t\t\t.filter( clazz -&gt; clazz.isAnnotationPresent( WRAPPED ) )\r\n\t\t\t\t\t.toList() ); // HashSet&lt;&gt;(...)\r\n\t\t}\r\n\t\tcatch ( IOException e ) {\r\n\t\t\tout.printf( &quot;--&gt; %s%n--&gt; return empty list%n&quot;, e );\r\n\t\t\treturn Collections.emptyList();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic Collection&lt;Class&lt;?&gt;&gt; locateService2() {\r\n\r\n\t\ttry {\r\n\t\t\treturn new HashSet&lt;Class&lt;?&gt;&gt;(\r\n\t\t\t\t\tnew ClassGraph().enableAllInfo().scan().getAllClasses().stream()\r\n\t\t\t\t\t\t\t.filter( classInfo -&gt; !classInfo.getName().equals( &quot;module-info&quot; ) || !classInfo.getName().equals( &quot;package-info&quot; ) )\r\n\t\t\t\t\t\t\t//.peek( out::println )\r\n\t\t\t\t\t\t\t.filter( classInfo -&gt; classInfo.hasAnnotation( WRAPPED ) )\r\n\t\t\t\t\t\t\t.map( classInfo -&gt; {\r\n\t\t\t\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\t\t\t\t//if ( classInfo.getName().contains( &quot;com.udacity&quot; ) )\r\n\t\t\t\t\t\t\t\t\t//\tout.printf( &quot;--&gt; name: %s%n--&gt; cp: %s%n%n&quot;,\r\n\t\t\t\t\t\t\t\t\t//\t\tclassInfo.getName(), System.getProperty( &quot;java.class.path&quot; ) );\r\n\r\n\t\t\t\t\t\t\t\t\treturn classInfo.loadClass();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcatch ( Error | Exception e ) {\r\n\t\t\t\t\t\t\t\t\tout.printf( &quot;--&gt; %s --&gt; return null%n&quot;, e );\r\n\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} ) // map(...\r\n\t\t\t\t\t\t\t//.peek( out::println )\r\n\t\t\t\t\t\t\t.filter( Objects::nonNull )\r\n\t\t\t\t\t\t\t.toList() ); // HashSet&lt;&gt;(...)\r\n\t\t}\r\n\t\t// with IOException compile error: &quot;Unreachable catch block for IOException. This exception is never thrown from the try statement body&quot;\r\n\t\tcatch ( /*IO*/ Exception e ) {\r\n\t\t\tout.printf( &quot;--&gt; %s%n--&gt; return empty list%n&quot;, e );\r\n\t\t\treturn Collections.emptyList();\r\n\t\t}\r\n\t}\r\n...\r\n```\r\nBTW, with the `INSTANCE` and `getInstance()` members this class looks like intended to be a Singleton at first sight. But it isn&#39;t. Since there&#39;s `return new WebCrawlerServiceLocator( true );` in `getInstance()`. That might confuse readers/users of this class (without any Javadoc in addition). I&#39;d complain about that in a code review, about both.\r\n\r\n### `WebCrawlerServiceLocatorTest`\r\n```\r\npackage com.udacity.webcrawler.service;\r\n\r\nimport static java.lang.System.out;\r\nimport static org.junit.Assert.assertFalse;\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\nimport java.util.Collection;\r\n\r\nimport org.junit.jupiter.api.Test;\r\n\r\npublic final class WebCrawlerServiceLocatorTest {\r\n\r\n\tprivate static final int CLASS_COUNT = 3;\r\n\r\n\t@Test\r\n\tpublic void locateServiceWithTest_NotEmpty() {\r\n\r\n\t\tServiceLocator&lt;Class&lt;?&gt;&gt; locator = WebCrawlerServiceLocator.getInstance( true );\r\n\t\tCollection&lt;Class&lt;?&gt;&gt; classes = locator.locateService();\r\n\t\tout.printf( &quot;### locateService(): classes collection contains %d classes: %s %n&quot;,\r\n\t\t\t\tclasses.size(), classes.toString() );\r\n\t\tassertFalse( &quot;classes collection is empty&quot;, classes.isEmpty() );\r\n\t\tassertEquals( CLASS_COUNT, classes.size() );\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void locateServiceWithoutTest_NotEmpty() {\r\n\r\n\t\tServiceLocator&lt;Class&lt;?&gt;&gt; locator = WebCrawlerServiceLocator.getInstance( false );\r\n\t\tCollection&lt;Class&lt;?&gt;&gt; classes = locator.locateService();\r\n\t\tout.printf( &quot;### locateService(): classes collection contains %d classes: %s %n&quot;,\r\n\t\t\t\tclasses.size(), classes.toString() );\r\n\t\tassertFalse( &quot;classes collection is empty&quot;, classes.isEmpty() );\r\n\t\tassertEquals( CLASS_COUNT, classes.size() );\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void locateServiceWithTest2_NotEmpty() {\r\n\r\n\t\t//ServiceLocator&lt;Class&lt;?&gt;&gt; locator = WebCrawlerServiceLocator.getInstance( true ); // compile error\r\n\t\t// ServiceLocator has no locateService2(), hence using the following for the time being:\r\n\t\tWebCrawlerServiceLocator locator = (WebCrawlerServiceLocator) WebCrawlerServiceLocator.getInstance( true );\r\n\r\n\t\tCollection&lt;Class&lt;?&gt;&gt; classes = locator.locateService2();\r\n\t\tout.printf( &quot;### locateService2(): classes collection contains %d classes: %s %n&quot;,\r\n\t\t\t\tclasses.size(), classes.toString() );\r\n\t\tassertFalse( &quot;classes collection is empty&quot;, classes.isEmpty() );\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void locateServiceWithoutTest2_NotEmpty() {\r\n\r\n\t\t//ServiceLocator&lt;Class&lt;?&gt;&gt; locator = WebCrawlerServiceLocator.getInstance( false ); // compile error\r\n\t\t// , ServiceLocator has no locateService2(), hence using the following for the time being:\r\n\t\tWebCrawlerServiceLocator locator = (WebCrawlerServiceLocator) WebCrawlerServiceLocator.getInstance( false );\r\n\r\n\t\tCollection&lt;Class&lt;?&gt;&gt; classes = locator.locateService2();\r\n\t\tout.printf( &quot;### locateService2(): classes collection contains %d classes: %s %n&quot;,\r\n\t\t\t\tclasses.size(), classes.toString() );\r\n\t\tassertFalse( &quot;classes collection is empty&quot;, classes.isEmpty() );\r\n\t}\r\n\r\n}\r\n```\r\n### `mvn test`\r\n```\r\n...\r\n[INFO] --- surefire:3.1.2:test (default-test) @ udacity-webcrawler ---\r\n[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider\r\n[INFO]\r\n[INFO] -------------------------------------------------------\r\n[INFO]  T E S T S\r\n[INFO] -------------------------------------------------------\r\n[INFO] Running com.udacity.webcrawler.json.ConfigurationLoaderTest\r\n[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.191 s -- in com.udacity.webcrawler.json.ConfigurationLoaderTest\r\n[INFO] Running com.udacity.webcrawler.json.CrawlResultWriterTest\r\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.021 s -- in com.udacity.webcrawler.json.CrawlResultWriterTest\r\n[INFO] Running com.udacity.webcrawler.parser.PageParserImplTest\r\n[ERROR] Tests run: 2, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 0.093 s &lt;&lt;&lt; FAILURE! -- in com.udacity.webcrawler.parser.PageParserImplTest\r\n...\r\n[INFO] Running com.udacity.webcrawler.profiler.ProfilerImplTest\r\n[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.906 s -- in com.udacity.webcrawler.profiler.ProfilerImplTest\r\n[INFO] Running com.udacity.webcrawler.service.WebCrawlerServiceLocatorTest\r\n[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.724 s -- in com.udacity.webcrawler.service.WebCrawlerServiceLocatorTest\r\n[INFO] Running com.udacity.webcrawler.WordCountsTest\r\n[ERROR] Tests run: 2, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 0.011 s &lt;&lt;&lt; FAILURE! -- in com.udacity.webcrawler.WordCountsTest\r\n...\r\n[INFO] Running com.udacity.webcrawler.ParallelWebCrawlerTest\r\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.067 s -- in com.udacity.webcrawler.ParallelWebCrawlerTest\r\n[INFO] Running com.udacity.webcrawler.SequentialWebCrawlerTest\r\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.013 s -- in com.udacity.webcrawler.SequentialWebCrawlerTest\r\n[INFO] Running com.udacity.webcrawler.WebCrawlerTest\r\n[ERROR] Tests run: 22, Failures: 14, Errors: 0, Skipped: 0, Time elapsed: 0.221 s &lt;&lt;&lt; FAILURE! -- in com.udacity.webcrawler.WebCrawlerTest\r\n...\r\n[ERROR] Tests run: 53, Failures: 18, Errors: 0, Skipped: 0\r\n...\r\n```\r\n\r\nSo, the tests run, at least. They &quot;just&quot; fail due to failing assertions.\r\n\r\nAnd, BTW, I&#39;d not introduce an extra `/src/test/data` dir. I&#39;d use `/src/test/resources` because that&#39;s what it is for – Convention over Configuration. Such you can use `AnyTest.class.getClassLoader().getResource(&quot;path-relative-to-resources-dir/file.name&quot;)` in your tests and avoid having to define `&lt;testDataDir&gt;` in your POM and, more important, to define `-DtestDataDir=...` as VM argument when running unit tests from within your IDE. And you can use [resource filtering][filter] (which is string interpolation, in fact), a powerful feature.\r\n\r\nIf you grant me [access on GitHub][gerib] I can push a branch with all the changes.\r\n\r\n## UPDATE\r\n\r\nThe original `webCrawlerServiceLocator.locateService()` works now, too. I think that&#39;s because I declared only the following for JUnit in the POM:\r\n```\r\n\t...\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.junit&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;junit-bom&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;5.9.3&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\t...\r\n\t&lt;dependencies&gt;\r\n\t\t...\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\t...\r\n```\r\n\r\nSo, it seems that incompatibilities between JUnit dependencies (in a certain version) and Maven&#39;s Surefire plugin (in a certain version) might have caused the original issue.\r\n\r\n[gac]: https://guava.dev/releases/snapshot/api/docs/com/google/common/reflect/ClassPath.html#getAllClasses()\r\n[cpci-doc]: https://guava.dev/releases/snapshot/api/docs/com/google/common/reflect/ClassPath.ClassInfo.html\r\n[cpci-src]: https://github.com/google/guava/blob/master/guava/src/com/google/common/reflect/ClassPath.java#L303\r\n[cg]: https://github.com/classgraph/classgraph/wiki\r\n[cp]: https://guava.dev/releases/snapshot/api/docs/com/google/common/reflect/ClassPath.html\r\n[gerib]: https://github.com/gerib\r\n[filter]: https://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html","title":"Java unit test run successfully on Intellij but fail on maven","body":"<p>After the actions in the comments to the question I:</p>\n<ul>\n<li>added <code>.peek(System.out::println)</code> prior to (line 52) <code>filter(classInfo -&gt; ...)</code> in <code>WebCrawlerServiceLocator</code>,</li>\n<li>ran <code>mvn test -Dmaven.surefire.debug &gt; mvn-test.out</code> and</li>\n<li>on line 5617 therein there was <code>target.classes.com.udacity.webcrawler.json.ConfigurationLoader</code> followed by the error mentioned in the question and its comments:</li>\n</ul>\n<pre><code>...\ntarget.classes.com.udacity.webcrawler.json.ConfigurationLoader\n[ERROR] Tests run: 8, Failures: 0, Errors: 8, Skipped: 0, Time elapsed: 0.84 s &lt;&lt;&lt; FAILURE! - in com.udacity.webcrawler.profiler.ProfilerImplTest\n[ERROR] delegateHasNoMethodsAnnotated  Time elapsed: 0.008 s  &lt;&lt;&lt; ERROR!\njava.lang.ExceptionInInitializerError\n    at com.udacity.webcrawler.service.ServiceLocator.webCrawlerLocator(ServiceLocator.java:13)\n    at com.udacity.webcrawler.profiler.ProfilerImpl.&lt;init&gt;(ProfilerImpl.java:34)\n    at com.udacity.webcrawler.profiler.ProfilerImplTest.&lt;init&gt;(ProfilerImplTest.java:27)\n    ...\n</code></pre>\n<p>So, apparently <a href=\"https://guava.dev/releases/snapshot/api/docs/com/google/common/reflect/ClassPath.html#getAllClasses()\" rel=\"nofollow noreferrer\"><code>ImmutableSet&lt;ClassInfo&gt; com.google.common.reflect.ClassPath.getAllClasses()</code></a> takes Maven's <code>${project.basedir}</code> as class path entry. The problem is:</p>\n<ul>\n<li>that you can't simply strip <code>target/classes/</code> from <code>packageName</code> in <code>map(info -&gt; { ... })</code> since <a href=\"https://guava.dev/releases/snapshot/api/docs/com/google/common/reflect/ClassPath.ClassInfo.html\" rel=\"nofollow noreferrer\"><code>ClassPath.ClassInfo</code></a> has no setters</li>\n<li>and it has a constructor <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/reflect/ClassPath.java#L303\" rel=\"nofollow noreferrer\"><code>ClassInfo(File file, String resourceName, ClassLoader loader)</code></a> but with default (package) access only.</li>\n</ul>\n<p>Anyway, <a href=\"https://guava.dev/releases/snapshot/api/docs/com/google/common/reflect/ClassPath.html\" rel=\"nofollow noreferrer\"><code>ClassPath</code>'s javadoc</a> mentions at the very beginning:</p>\n<blockquote>\n<h2>Prefer <a href=\"https://github.com/classgraph/classgraph/wiki\" rel=\"nofollow noreferrer\">ClassGraph</a> over <code>ClassPath</code></h2>\n</blockquote>\n<h3>UPDATE</h3>\n<p>Out of curiosity I implemented the usage of <em>ClassGraph</em> (which perhaps is even more performant since it has <code>classInfo.hasAnnotation(...)</code> which lets you keep only those <code>ClassInfo</code>s you're interested in before they are transformed into <code>Class</code>es in <code>map(...)</code> ):</p>\n<h4>POM</h4>\n<pre><code>        ...\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.classgraph&lt;/groupId&gt;\n            &lt;artifactId&gt;classgraph&lt;/artifactId&gt;\n            &lt;version&gt;4.8.160&lt;/version&gt;\n        &lt;/dependency&gt;\n        ...\n</code></pre>\n<h3><code>WebCrawlerServiceLocator</code></h3>\n<pre><code>...\nimport static java.lang.System.out;\n...\nimport io.github.classgraph.ClassGraph;\n...\nprivate static final Class&lt;? extends Annotation&gt; WRAPPED = Wrapped.class;\n...\n    @Override\n    public Collection&lt;Class&lt;?&gt;&gt; locateService() {\n\n        try {\n            return new HashSet&lt;&gt;( ClassPath.from( ClassLoader.getSystemClassLoader() ).getAllClasses().stream()\n                    .filter( classInfo -&gt; !classInfo.getName().equals( &quot;module-info&quot; ) || !classInfo.getName().equals( &quot;package-info&quot; ) )\n                    //.peek( out::println )\n                    .map( classInfo -&gt; {\n                        try {\n\n                            //if ( classInfo.getName().contains( &quot;com.udacity&quot; ) )\n                            //  out.printf( &quot;--&gt; name: %s%n--&gt; cp: %s%n%n&quot;,\n                            //      classInfo.getName(), System.getProperty( &quot;java.class.path&quot; ) );\n\n                            return classInfo.load();\n                        }\n                        catch ( Error | Exception e ) {\n                            out.printf( &quot;--&gt; %s --&gt; return null%n&quot;, e );\n                            return null;\n                        }\n                    } ) // map(...)\n                    //.peek( out::println )\n                    .filter( Objects::nonNull )\n                    .filter( clazz -&gt; clazz.isAnnotationPresent( WRAPPED ) )\n                    .toList() ); // HashSet&lt;&gt;(...)\n        }\n        catch ( IOException e ) {\n            out.printf( &quot;--&gt; %s%n--&gt; return empty list%n&quot;, e );\n            return Collections.emptyList();\n        }\n    }\n\n    public Collection&lt;Class&lt;?&gt;&gt; locateService2() {\n\n        try {\n            return new HashSet&lt;Class&lt;?&gt;&gt;(\n                    new ClassGraph().enableAllInfo().scan().getAllClasses().stream()\n                            .filter( classInfo -&gt; !classInfo.getName().equals( &quot;module-info&quot; ) || !classInfo.getName().equals( &quot;package-info&quot; ) )\n                            //.peek( out::println )\n                            .filter( classInfo -&gt; classInfo.hasAnnotation( WRAPPED ) )\n                            .map( classInfo -&gt; {\n                                try {\n\n                                    //if ( classInfo.getName().contains( &quot;com.udacity&quot; ) )\n                                    //  out.printf( &quot;--&gt; name: %s%n--&gt; cp: %s%n%n&quot;,\n                                    //      classInfo.getName(), System.getProperty( &quot;java.class.path&quot; ) );\n\n                                    return classInfo.loadClass();\n                                }\n                                catch ( Error | Exception e ) {\n                                    out.printf( &quot;--&gt; %s --&gt; return null%n&quot;, e );\n                                    return null;\n                                }\n                            } ) // map(...\n                            //.peek( out::println )\n                            .filter( Objects::nonNull )\n                            .toList() ); // HashSet&lt;&gt;(...)\n        }\n        // with IOException compile error: &quot;Unreachable catch block for IOException. This exception is never thrown from the try statement body&quot;\n        catch ( /*IO*/ Exception e ) {\n            out.printf( &quot;--&gt; %s%n--&gt; return empty list%n&quot;, e );\n            return Collections.emptyList();\n        }\n    }\n...\n</code></pre>\n<p>BTW, with the <code>INSTANCE</code> and <code>getInstance()</code> members this class looks like intended to be a Singleton at first sight. But it isn't. Since there's <code>return new WebCrawlerServiceLocator( true );</code> in <code>getInstance()</code>. That might confuse readers/users of this class (without any Javadoc in addition). I'd complain about that in a code review, about both.</p>\n<h3><code>WebCrawlerServiceLocatorTest</code></h3>\n<pre><code>package com.udacity.webcrawler.service;\n\nimport static java.lang.System.out;\nimport static org.junit.Assert.assertFalse;\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\nimport java.util.Collection;\n\nimport org.junit.jupiter.api.Test;\n\npublic final class WebCrawlerServiceLocatorTest {\n\n    private static final int CLASS_COUNT = 3;\n\n    @Test\n    public void locateServiceWithTest_NotEmpty() {\n\n        ServiceLocator&lt;Class&lt;?&gt;&gt; locator = WebCrawlerServiceLocator.getInstance( true );\n        Collection&lt;Class&lt;?&gt;&gt; classes = locator.locateService();\n        out.printf( &quot;### locateService(): classes collection contains %d classes: %s %n&quot;,\n                classes.size(), classes.toString() );\n        assertFalse( &quot;classes collection is empty&quot;, classes.isEmpty() );\n        assertEquals( CLASS_COUNT, classes.size() );\n    }\n\n    @Test\n    public void locateServiceWithoutTest_NotEmpty() {\n\n        ServiceLocator&lt;Class&lt;?&gt;&gt; locator = WebCrawlerServiceLocator.getInstance( false );\n        Collection&lt;Class&lt;?&gt;&gt; classes = locator.locateService();\n        out.printf( &quot;### locateService(): classes collection contains %d classes: %s %n&quot;,\n                classes.size(), classes.toString() );\n        assertFalse( &quot;classes collection is empty&quot;, classes.isEmpty() );\n        assertEquals( CLASS_COUNT, classes.size() );\n    }\n\n    @Test\n    public void locateServiceWithTest2_NotEmpty() {\n\n        //ServiceLocator&lt;Class&lt;?&gt;&gt; locator = WebCrawlerServiceLocator.getInstance( true ); // compile error\n        // ServiceLocator has no locateService2(), hence using the following for the time being:\n        WebCrawlerServiceLocator locator = (WebCrawlerServiceLocator) WebCrawlerServiceLocator.getInstance( true );\n\n        Collection&lt;Class&lt;?&gt;&gt; classes = locator.locateService2();\n        out.printf( &quot;### locateService2(): classes collection contains %d classes: %s %n&quot;,\n                classes.size(), classes.toString() );\n        assertFalse( &quot;classes collection is empty&quot;, classes.isEmpty() );\n    }\n\n    @Test\n    public void locateServiceWithoutTest2_NotEmpty() {\n\n        //ServiceLocator&lt;Class&lt;?&gt;&gt; locator = WebCrawlerServiceLocator.getInstance( false ); // compile error\n        // , ServiceLocator has no locateService2(), hence using the following for the time being:\n        WebCrawlerServiceLocator locator = (WebCrawlerServiceLocator) WebCrawlerServiceLocator.getInstance( false );\n\n        Collection&lt;Class&lt;?&gt;&gt; classes = locator.locateService2();\n        out.printf( &quot;### locateService2(): classes collection contains %d classes: %s %n&quot;,\n                classes.size(), classes.toString() );\n        assertFalse( &quot;classes collection is empty&quot;, classes.isEmpty() );\n    }\n\n}\n</code></pre>\n<h3><code>mvn test</code></h3>\n<pre><code>...\n[INFO] --- surefire:3.1.2:test (default-test) @ udacity-webcrawler ---\n[INFO] Using auto detected provider org.apache.maven.surefire.junitplatform.JUnitPlatformProvider\n[INFO]\n[INFO] -------------------------------------------------------\n[INFO]  T E S T S\n[INFO] -------------------------------------------------------\n[INFO] Running com.udacity.webcrawler.json.ConfigurationLoaderTest\n[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.191 s -- in com.udacity.webcrawler.json.ConfigurationLoaderTest\n[INFO] Running com.udacity.webcrawler.json.CrawlResultWriterTest\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.021 s -- in com.udacity.webcrawler.json.CrawlResultWriterTest\n[INFO] Running com.udacity.webcrawler.parser.PageParserImplTest\n[ERROR] Tests run: 2, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 0.093 s &lt;&lt;&lt; FAILURE! -- in com.udacity.webcrawler.parser.PageParserImplTest\n...\n[INFO] Running com.udacity.webcrawler.profiler.ProfilerImplTest\n[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.906 s -- in com.udacity.webcrawler.profiler.ProfilerImplTest\n[INFO] Running com.udacity.webcrawler.service.WebCrawlerServiceLocatorTest\n[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.724 s -- in com.udacity.webcrawler.service.WebCrawlerServiceLocatorTest\n[INFO] Running com.udacity.webcrawler.WordCountsTest\n[ERROR] Tests run: 2, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 0.011 s &lt;&lt;&lt; FAILURE! -- in com.udacity.webcrawler.WordCountsTest\n...\n[INFO] Running com.udacity.webcrawler.ParallelWebCrawlerTest\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.067 s -- in com.udacity.webcrawler.ParallelWebCrawlerTest\n[INFO] Running com.udacity.webcrawler.SequentialWebCrawlerTest\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.013 s -- in com.udacity.webcrawler.SequentialWebCrawlerTest\n[INFO] Running com.udacity.webcrawler.WebCrawlerTest\n[ERROR] Tests run: 22, Failures: 14, Errors: 0, Skipped: 0, Time elapsed: 0.221 s &lt;&lt;&lt; FAILURE! -- in com.udacity.webcrawler.WebCrawlerTest\n...\n[ERROR] Tests run: 53, Failures: 18, Errors: 0, Skipped: 0\n...\n</code></pre>\n<p>So, the tests run, at least. They &quot;just&quot; fail due to failing assertions.</p>\n<p>And, BTW, I'd not introduce an extra <code>/src/test/data</code> dir. I'd use <code>/src/test/resources</code> because that's what it is for – Convention over Configuration. Such you can use <code>AnyTest.class.getClassLoader().getResource(&quot;path-relative-to-resources-dir/file.name&quot;)</code> in your tests and avoid having to define <code>&lt;testDataDir&gt;</code> in your POM and, more important, to define <code>-DtestDataDir=...</code> as VM argument when running unit tests from within your IDE. And you can use <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html\" rel=\"nofollow noreferrer\">resource filtering</a> (which is string interpolation, in fact), a powerful feature.</p>\n<p>If you grant me <a href=\"https://github.com/gerib\" rel=\"nofollow noreferrer\">access on GitHub</a> I can push a branch with all the changes.</p>\n<h2>UPDATE</h2>\n<p>The original <code>webCrawlerServiceLocator.locateService()</code> works now, too. I think that's because I declared only the following for JUnit in the POM:</p>\n<pre><code>    ...\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.junit&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-bom&lt;/artifactId&gt;\n                &lt;version&gt;5.9.3&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    ...\n    &lt;dependencies&gt;\n        ...\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    ...\n</code></pre>\n<p>So, it seems that incompatibilities between JUnit dependencies (in a certain version) and Maven's Surefire plugin (in a certain version) might have caused the original issue.</p>\n"}],"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76426292,"answer_count":1,"score":2,"last_activity_date":1686942164,"creation_date":1686114393,"question_id":76420034,"body_markdown":"I am facing an issue that the unit test cases pass on IntelliJ but fail on `mvn test` command. I think the problem is about java 17 but I&#39;m not sure. Src code can be found [here][1]\r\n\r\nMaven version (with jdk 17):\r\n\r\n    Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\r\n    Maven home: D:\\Apps\\maven-3.6.3\\bin\\..\r\n    Java version: 17.0.1, vendor: Oracle Corporation, runtime: D:\\Program Files\\jdk17\\app\r\n    Default locale: en_US, platform encoding: Cp1258\r\n    OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\r\n\r\npom.xml:\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.google.inject/guice --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.inject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guice&lt;/artifactId&gt;\r\n            &lt;version&gt;5.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/javax.inject/javax.inject --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.inject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\r\n            &lt;version&gt;1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.13.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.13.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.jsoup/jsoup --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\r\n            &lt;version&gt;1.14.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;!-- Test Dependencies --&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.google.truth/truth --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.truth&lt;/groupId&gt;\r\n            &lt;artifactId&gt;truth&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.3&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n            &lt;version&gt;5.8.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;single&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;archive&gt;\r\n                                &lt;manifest&gt;\r\n                                    &lt;mainClass&gt;\r\n                                        com.udacity.webcrawler.main.WebCrawlerMain\r\n                                    &lt;/mainClass&gt;\r\n                                &lt;/manifest&gt;\r\n                            &lt;/archive&gt;\r\n                            &lt;descriptorRefs&gt;\r\n                                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                            &lt;/descriptorRefs&gt;\r\n                            &lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;trimStackTrace&gt;false&lt;/trimStackTrace&gt;\r\n                    &lt;systemProperties&gt;\r\n                        &lt;property&gt;\r\n                            &lt;name&gt;testDataDir&lt;/name&gt;\r\n                            &lt;value&gt;${project.basedir}/src/test/data&lt;/value&gt;\r\n                        &lt;/property&gt;\r\n                        &lt;property&gt;\r\n                            &lt;name&gt;crawlerImplementations&lt;/name&gt;\r\n                            &lt;value&gt;\r\n                                com.udacity.webcrawler.SequentialWebCrawler\r\n                                com.udacity.webcrawler.ParallelWebCrawler\r\n                            &lt;/value&gt;\r\n                        &lt;/property&gt;\r\n                    &lt;/systemProperties&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;version&gt;3.1.0&lt;/version&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n                        &lt;version&gt;5.8.2&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nHere is the code:\r\n    \r\n    public final class ProfilerImplTest {\r\n        private final FakeClock clock = new FakeClock();\r\n        private final Profiler profiler = new ProfilerImpl(clock, true);\r\n        private final ProfiledInterfaceImpl delegate = new ProfiledInterfaceImpl(clock);\r\n    \r\n        @Test\r\n        public void delegateHasNoMethodsAnnotated() {\r\n            assertThrows(\r\n                    IllegalArgumentException.class,\r\n                    () -&gt; profiler.wrap(NonProfiledInterface.class, new NonProfiledInterfaceImpl()),\r\n                    &quot;Profiler.wrap() should throw an IllegalArgumentException if the wrapped interface does &quot; +\r\n                            &quot;not contain a @Profiled method.&quot;);\r\n        }\r\n    \r\n        @Test\r\n        public void testToString() {\r\n            ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\r\n    \r\n            assertWithMessage(&quot;The proxy should delegate toString() calls to the wrapped object.&quot;)\r\n                    .that(proxy.toString())\r\n                    .isEqualTo(delegate.toString());\r\n        }\r\n    \r\n        @Test\r\n        public void testHashCode() {\r\n            ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\r\n    \r\n            assertWithMessage(&quot;The proxy should delegate hashCode() calls to the wrapped object.&quot;)\r\n                    .that(proxy.hashCode())\r\n                    .isEqualTo(delegate.hashCode());\r\n        }\r\n    \r\n        @Test\r\n        public void testEquals() {\r\n            ProfiledInterface proxy1 = profiler.wrap(ProfiledInterface.class, delegate);\r\n            ProfiledInterface proxy2 = profiler.wrap(ProfiledInterface.class, delegate);\r\n    \r\n            assertThat(proxy1).isNotSameInstanceAs(delegate);\r\n            assertThat(proxy1).isEqualTo(delegate);\r\n            assertThat(delegate).isEqualTo(proxy1);\r\n    \r\n            assertWithMessage(&quot;Each call to Profiler.wrap() should create a new proxy object.&quot;)\r\n                    .that(proxy1)\r\n                    .isNotSameInstanceAs(proxy2);\r\n            assertWithMessage(&quot;Two proxies should be equal if their wrapped objects are equal&quot;)\r\n                    .that(proxy1)\r\n                    .isEqualTo(proxy2);\r\n            assertWithMessage(&quot;Two proxies should be equal if their wrapped objects are equal&quot;)\r\n                    .that(proxy2)\r\n                    .isEqualTo(proxy1);\r\n        }\r\n    \r\n        @Test\r\n        public void testNonObjectEquals() {\r\n            ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\r\n    \r\n            assertWithMessage(&quot;Incorrect equals() method was called&quot;)\r\n                    .that(proxy.equals(&quot;foo&quot;, &quot;bar&quot;))\r\n                    .isFalse();\r\n    \r\n            assertThat(delegate.wasFakeEqualsCalled()).isTrue();\r\n        }\r\n    \r\n        @Test\r\n        public void testBasicProfiling() throws Exception {\r\n            ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\r\n    \r\n            Instant beforeInvocation = clock.instant();\r\n    \r\n            assertWithMessage(&quot;The intercepted method did not forward the return value correctly&quot;)\r\n                    .that(proxy.profiled())\r\n                    .isEqualTo(&quot;profiled&quot;);\r\n            Instant afterInvocation = clock.instant();\r\n            assertWithMessage(&quot;Expected time to advance from invocation.&quot;)\r\n                    .that(beforeInvocation)\r\n                    .isLessThan(afterInvocation);\r\n    \r\n            // Run the method again a few more times to aggregate some data.\r\n            proxy.profiled();\r\n            proxy.profiled();\r\n    \r\n            CloseableStringWriter writer = new CloseableStringWriter();\r\n            profiler.writeData(writer);\r\n            assertWithMessage(&quot;Streams should usually be closed in the same scope where they were created&quot;)\r\n                    .that(writer.isClosed())\r\n                    .isFalse();\r\n            String written = writer.toString();\r\n            assertWithMessage(&quot;The profile data was not written or is incorrect&quot;)\r\n                    .that(written)\r\n                    .contains(\r\n                            &quot;com.udacity.webcrawler.profiler.ProfilerImplTest$ProfiledInterfaceImpl#profiled&quot;);\r\n            assertThat(written).contains(&quot;0m 3s 0ms&quot;);\r\n        }\r\n    \r\n        @Test\r\n        public void testDeclaredExceptionHandling() throws Exception {\r\n            ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\r\n    \r\n            Instant beforeInvocation = clock.instant();\r\n            Throwable expected = assertThrows(\r\n                    Throwable.class,\r\n                    () -&gt; proxy.throwSomething(new Throwable(&quot;expected exception&quot;)),\r\n                    &quot;The method interceptor should forward exceptions thrown by the wrapped object&quot;);\r\n            assertWithMessage(&quot;The proxy threw a different exception than was thrown by the wrapped object&quot;)\r\n                    .that(expected)\r\n                    .hasMessageThat()\r\n                    .isEqualTo(&quot;expected exception&quot;);\r\n    \r\n            Instant afterInvocation = clock.instant();\r\n            assertWithMessage(&quot;Expected time to advance from invocation.&quot;)\r\n                    .that(beforeInvocation)\r\n                    .isLessThan(afterInvocation);\r\n    \r\n            CloseableStringWriter writer = new CloseableStringWriter();\r\n            profiler.writeData(writer);\r\n            assertWithMessage(&quot;Streams should usually be closed in the same scope where they were created&quot;)\r\n                    .that(writer.isClosed())\r\n                    .isFalse();\r\n            String written = writer.toString();\r\n            assertWithMessage(&quot;Profile data should still be recorded if an exception was thrown.&quot;)\r\n                    .that(written)\r\n                    .contains(&quot;com.udacity.webcrawler.profiler.ProfilerImplTest$ProfiledInterfaceImpl&quot;);\r\n            assertThat(written).contains(&quot;0m 1s 0ms&quot;);\r\n        }\r\n    \r\n        @Test\r\n        public void testServiceLoader() throws Exception {\r\n            Field metadataField = ProfilerImpl.class.getDeclaredField(&quot;serviceMetadata&quot;);\r\n            metadataField.setAccessible(true);\r\n            Profiler trueProfiler = new ProfilerImpl(clock, true);\r\n            Profiler falseProfiler = new ProfilerImpl(clock, false);\r\n    \r\n            assertEquals(2, ((Map&lt;Class&lt;?&gt;, ServiceMetadata&lt;?&gt;&gt;) metadataField.get(falseProfiler)).size());\r\n            assertEquals(3, ((Map&lt;Class&lt;?&gt;, ServiceMetadata&lt;?&gt;&gt;) metadataField.get(trueProfiler)).size());\r\n        }\r\n    \r\n        /**\r\n         * A test interface that does not have any {@link Profiled} methods.\r\n         */\r\n        private interface NonProfiledInterface {\r\n        }\r\n    \r\n        /**\r\n         * Concrete implementation of {@link NonProfiledInterface}.\r\n         */\r\n        private static final class NonProfiledInterfaceImpl implements NonProfiledInterface {\r\n        }\r\n    \r\n        /**\r\n         * A test interface that has a method annotated with {@link Profiled}.\r\n         */\r\n        private interface ProfiledInterface {\r\n            @Profiled\r\n            String profiled();\r\n    \r\n            @Profiled\r\n            void throwSomething(Throwable throwable) throws Throwable;\r\n    \r\n            boolean equals(String foo, String bar);\r\n        }\r\n    \r\n        /**\r\n         * Concrete implementation of {@link ProfiledInterface}.\r\n         */\r\n        @Wrapped\r\n        private static final class ProfiledInterfaceImpl implements ProfiledInterface {\r\n            private final FakeClock fakeClock;\r\n            private boolean wasFakeEqualsCalled = false;\r\n    \r\n            ProfiledInterfaceImpl(FakeClock fakeClock) {\r\n                this.fakeClock = Objects.requireNonNull(fakeClock);\r\n            }\r\n    \r\n            @Override\r\n            public String profiled() {\r\n                fakeClock.tick(Duration.ofSeconds(1));\r\n                return &quot;profiled&quot;;\r\n            }\r\n    \r\n            @Override\r\n            public void throwSomething(Throwable throwable) throws Throwable {\r\n                fakeClock.tick(Duration.ofSeconds(1));\r\n                throw throwable;\r\n            }\r\n    \r\n            @Override\r\n            public boolean equals(Object other) {\r\n                // All instances of ProfiledInterface are equal to one another.\r\n                return (other instanceof ProfiledInterface);\r\n            }\r\n    \r\n            @Override\r\n            public boolean equals(String foo, String bar) {\r\n                Objects.requireNonNull(foo);\r\n                Objects.requireNonNull(bar);\r\n                wasFakeEqualsCalled = true;\r\n                return false;\r\n            }\r\n    \r\n            public boolean wasFakeEqualsCalled() {\r\n                return wasFakeEqualsCalled;\r\n            }\r\n        }\r\n    }\r\n\r\nException was thrown at the line `private final Profiler profiler = new ProfilerImpl(clock, true);` and I don&#39;t know why. Please check the below code:\r\n    \r\n    /**\r\n     * Concrete implementation of the {@link Profiler}.\r\n     */\r\n    final class ProfilerImpl implements Profiler {\r\n        private final Map&lt;Class&lt;?&gt;, ServiceMetadata&lt;?&gt;&gt; serviceMetadata;\r\n        private final Clock clock;\r\n        private final ProfilingState state = new ProfilingState();\r\n        private final ZonedDateTime startTime;\r\n    \r\n        @Inject\r\n        ProfilerImpl(Clock clock, boolean includeTest) {\r\n            this.clock = Objects.requireNonNull(clock);\r\n            this.startTime = ZonedDateTime.now(clock);\r\n            ServiceLocator&lt;Class&lt;?&gt;&gt; serviceLocator = ServiceLocator.webCrawlerLocator(includeTest);\r\n            serviceMetadata = serviceLocator.parse(serviceLocator.locateService());\r\n        }\r\n    \r\n        private ServiceMetadata&lt;?&gt; profiledClass(Class&lt;?&gt; klass) {\r\n            for (Class&lt;?&gt; clazz : serviceMetadata.keySet()) {\r\n                if (klass.isAssignableFrom(clazz)) {\r\n                    return serviceMetadata.get(clazz);\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        public &lt;T&gt; T wrap(Class&lt;T&gt; klass, T delegate) {\r\n            Objects.requireNonNull(klass);\r\n    \r\n            ServiceMetadata&lt;?&gt; profiledClass = profiledClass(klass);\r\n            if (profiledClass == null) {\r\n                throw new IllegalArgumentException(klass.getName() + &quot;doesn&#39;t have profiled methods.&quot;);\r\n            }\r\n    \r\n            ProfilingMethodInterceptor interceptor = new ProfilingMethodInterceptor(clock, delegate, state, startTime, profiledClass);\r\n    \r\n            Object proxy = Proxy.newProxyInstance(\r\n                    ProfilerImpl.class.getClassLoader(),\r\n                    new Class[]{klass},\r\n                    interceptor\r\n            );\r\n    \r\n            return (T) proxy;\r\n        }\r\n    \r\n        @Override\r\n        public void writeData(Path path) {\r\n            Objects.requireNonNull(path);\r\n    \r\n            try (Writer writer = Files.newBufferedWriter(path, StandardOpenOption.CREATE, StandardOpenOption.APPEND)) {\r\n                writeData(writer);\r\n                writer.flush();\r\n            } catch (IOException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void writeData(Writer writer) throws IOException {\r\n            writer.write(&quot;Run at &quot; + RFC_1123_DATE_TIME.format(startTime));\r\n            writer.write(System.lineSeparator());\r\n            state.write(writer);\r\n            writer.write(System.lineSeparator());\r\n        }\r\n    }\r\n\r\nStack trace:\r\n\r\n    Caused by: java.lang.ClassNotFoundException: target.classes.com.udacity.webcrawler.IgnoredUrls\r\n            at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n            at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n            at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n            at com.google.common.reflect.ClassPath$ClassInfo.load(ClassPath.java:360)\r\n            ... 88 more\r\n\r\n\r\nPlease help\r\n\r\n\r\n  [1]: https://github.com/anaconda875/udacity-webcrawler\r\n","title":"Java unit test run successfully on Intellij but fail on maven","body":"<p>I am facing an issue that the unit test cases pass on IntelliJ but fail on <code>mvn test</code> command. I think the problem is about java 17 but I'm not sure. Src code can be found <a href=\"https://github.com/anaconda875/udacity-webcrawler\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Maven version (with jdk 17):</p>\n<pre><code>Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nMaven home: D:\\Apps\\maven-3.6.3\\bin\\..\nJava version: 17.0.1, vendor: Oracle Corporation, runtime: D:\\Program Files\\jdk17\\app\nDefault locale: en_US, platform encoding: Cp1258\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.google.inject/guice --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.inject&lt;/groupId&gt;\n        &lt;artifactId&gt;guice&lt;/artifactId&gt;\n        &lt;version&gt;5.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.inject/javax.inject --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n        &lt;version&gt;1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.13.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.13.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.jsoup/jsoup --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\n        &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\n        &lt;version&gt;1.14.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Test Dependencies --&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.google.truth/truth --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.truth&lt;/groupId&gt;\n        &lt;artifactId&gt;truth&lt;/artifactId&gt;\n        &lt;version&gt;1.1.3&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n        &lt;version&gt;5.8.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;archive&gt;\n                            &lt;manifest&gt;\n                                &lt;mainClass&gt;\n                                    com.udacity.webcrawler.main.WebCrawlerMain\n                                &lt;/mainClass&gt;\n                            &lt;/manifest&gt;\n                        &lt;/archive&gt;\n                        &lt;descriptorRefs&gt;\n                            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                        &lt;/descriptorRefs&gt;\n                        &lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;trimStackTrace&gt;false&lt;/trimStackTrace&gt;\n                &lt;systemProperties&gt;\n                    &lt;property&gt;\n                        &lt;name&gt;testDataDir&lt;/name&gt;\n                        &lt;value&gt;${project.basedir}/src/test/data&lt;/value&gt;\n                    &lt;/property&gt;\n                    &lt;property&gt;\n                        &lt;name&gt;crawlerImplementations&lt;/name&gt;\n                        &lt;value&gt;\n                            com.udacity.webcrawler.SequentialWebCrawler\n                            com.udacity.webcrawler.ParallelWebCrawler\n                        &lt;/value&gt;\n                    &lt;/property&gt;\n                &lt;/systemProperties&gt;\n            &lt;/configuration&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n                    &lt;version&gt;5.8.2&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>Here is the code:</p>\n<pre><code>public final class ProfilerImplTest {\n    private final FakeClock clock = new FakeClock();\n    private final Profiler profiler = new ProfilerImpl(clock, true);\n    private final ProfiledInterfaceImpl delegate = new ProfiledInterfaceImpl(clock);\n\n    @Test\n    public void delegateHasNoMethodsAnnotated() {\n        assertThrows(\n                IllegalArgumentException.class,\n                () -&gt; profiler.wrap(NonProfiledInterface.class, new NonProfiledInterfaceImpl()),\n                &quot;Profiler.wrap() should throw an IllegalArgumentException if the wrapped interface does &quot; +\n                        &quot;not contain a @Profiled method.&quot;);\n    }\n\n    @Test\n    public void testToString() {\n        ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\n\n        assertWithMessage(&quot;The proxy should delegate toString() calls to the wrapped object.&quot;)\n                .that(proxy.toString())\n                .isEqualTo(delegate.toString());\n    }\n\n    @Test\n    public void testHashCode() {\n        ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\n\n        assertWithMessage(&quot;The proxy should delegate hashCode() calls to the wrapped object.&quot;)\n                .that(proxy.hashCode())\n                .isEqualTo(delegate.hashCode());\n    }\n\n    @Test\n    public void testEquals() {\n        ProfiledInterface proxy1 = profiler.wrap(ProfiledInterface.class, delegate);\n        ProfiledInterface proxy2 = profiler.wrap(ProfiledInterface.class, delegate);\n\n        assertThat(proxy1).isNotSameInstanceAs(delegate);\n        assertThat(proxy1).isEqualTo(delegate);\n        assertThat(delegate).isEqualTo(proxy1);\n\n        assertWithMessage(&quot;Each call to Profiler.wrap() should create a new proxy object.&quot;)\n                .that(proxy1)\n                .isNotSameInstanceAs(proxy2);\n        assertWithMessage(&quot;Two proxies should be equal if their wrapped objects are equal&quot;)\n                .that(proxy1)\n                .isEqualTo(proxy2);\n        assertWithMessage(&quot;Two proxies should be equal if their wrapped objects are equal&quot;)\n                .that(proxy2)\n                .isEqualTo(proxy1);\n    }\n\n    @Test\n    public void testNonObjectEquals() {\n        ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\n\n        assertWithMessage(&quot;Incorrect equals() method was called&quot;)\n                .that(proxy.equals(&quot;foo&quot;, &quot;bar&quot;))\n                .isFalse();\n\n        assertThat(delegate.wasFakeEqualsCalled()).isTrue();\n    }\n\n    @Test\n    public void testBasicProfiling() throws Exception {\n        ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\n\n        Instant beforeInvocation = clock.instant();\n\n        assertWithMessage(&quot;The intercepted method did not forward the return value correctly&quot;)\n                .that(proxy.profiled())\n                .isEqualTo(&quot;profiled&quot;);\n        Instant afterInvocation = clock.instant();\n        assertWithMessage(&quot;Expected time to advance from invocation.&quot;)\n                .that(beforeInvocation)\n                .isLessThan(afterInvocation);\n\n        // Run the method again a few more times to aggregate some data.\n        proxy.profiled();\n        proxy.profiled();\n\n        CloseableStringWriter writer = new CloseableStringWriter();\n        profiler.writeData(writer);\n        assertWithMessage(&quot;Streams should usually be closed in the same scope where they were created&quot;)\n                .that(writer.isClosed())\n                .isFalse();\n        String written = writer.toString();\n        assertWithMessage(&quot;The profile data was not written or is incorrect&quot;)\n                .that(written)\n                .contains(\n                        &quot;com.udacity.webcrawler.profiler.ProfilerImplTest$ProfiledInterfaceImpl#profiled&quot;);\n        assertThat(written).contains(&quot;0m 3s 0ms&quot;);\n    }\n\n    @Test\n    public void testDeclaredExceptionHandling() throws Exception {\n        ProfiledInterface proxy = profiler.wrap(ProfiledInterface.class, delegate);\n\n        Instant beforeInvocation = clock.instant();\n        Throwable expected = assertThrows(\n                Throwable.class,\n                () -&gt; proxy.throwSomething(new Throwable(&quot;expected exception&quot;)),\n                &quot;The method interceptor should forward exceptions thrown by the wrapped object&quot;);\n        assertWithMessage(&quot;The proxy threw a different exception than was thrown by the wrapped object&quot;)\n                .that(expected)\n                .hasMessageThat()\n                .isEqualTo(&quot;expected exception&quot;);\n\n        Instant afterInvocation = clock.instant();\n        assertWithMessage(&quot;Expected time to advance from invocation.&quot;)\n                .that(beforeInvocation)\n                .isLessThan(afterInvocation);\n\n        CloseableStringWriter writer = new CloseableStringWriter();\n        profiler.writeData(writer);\n        assertWithMessage(&quot;Streams should usually be closed in the same scope where they were created&quot;)\n                .that(writer.isClosed())\n                .isFalse();\n        String written = writer.toString();\n        assertWithMessage(&quot;Profile data should still be recorded if an exception was thrown.&quot;)\n                .that(written)\n                .contains(&quot;com.udacity.webcrawler.profiler.ProfilerImplTest$ProfiledInterfaceImpl&quot;);\n        assertThat(written).contains(&quot;0m 1s 0ms&quot;);\n    }\n\n    @Test\n    public void testServiceLoader() throws Exception {\n        Field metadataField = ProfilerImpl.class.getDeclaredField(&quot;serviceMetadata&quot;);\n        metadataField.setAccessible(true);\n        Profiler trueProfiler = new ProfilerImpl(clock, true);\n        Profiler falseProfiler = new ProfilerImpl(clock, false);\n\n        assertEquals(2, ((Map&lt;Class&lt;?&gt;, ServiceMetadata&lt;?&gt;&gt;) metadataField.get(falseProfiler)).size());\n        assertEquals(3, ((Map&lt;Class&lt;?&gt;, ServiceMetadata&lt;?&gt;&gt;) metadataField.get(trueProfiler)).size());\n    }\n\n    /**\n     * A test interface that does not have any {@link Profiled} methods.\n     */\n    private interface NonProfiledInterface {\n    }\n\n    /**\n     * Concrete implementation of {@link NonProfiledInterface}.\n     */\n    private static final class NonProfiledInterfaceImpl implements NonProfiledInterface {\n    }\n\n    /**\n     * A test interface that has a method annotated with {@link Profiled}.\n     */\n    private interface ProfiledInterface {\n        @Profiled\n        String profiled();\n\n        @Profiled\n        void throwSomething(Throwable throwable) throws Throwable;\n\n        boolean equals(String foo, String bar);\n    }\n\n    /**\n     * Concrete implementation of {@link ProfiledInterface}.\n     */\n    @Wrapped\n    private static final class ProfiledInterfaceImpl implements ProfiledInterface {\n        private final FakeClock fakeClock;\n        private boolean wasFakeEqualsCalled = false;\n\n        ProfiledInterfaceImpl(FakeClock fakeClock) {\n            this.fakeClock = Objects.requireNonNull(fakeClock);\n        }\n\n        @Override\n        public String profiled() {\n            fakeClock.tick(Duration.ofSeconds(1));\n            return &quot;profiled&quot;;\n        }\n\n        @Override\n        public void throwSomething(Throwable throwable) throws Throwable {\n            fakeClock.tick(Duration.ofSeconds(1));\n            throw throwable;\n        }\n\n        @Override\n        public boolean equals(Object other) {\n            // All instances of ProfiledInterface are equal to one another.\n            return (other instanceof ProfiledInterface);\n        }\n\n        @Override\n        public boolean equals(String foo, String bar) {\n            Objects.requireNonNull(foo);\n            Objects.requireNonNull(bar);\n            wasFakeEqualsCalled = true;\n            return false;\n        }\n\n        public boolean wasFakeEqualsCalled() {\n            return wasFakeEqualsCalled;\n        }\n    }\n}\n</code></pre>\n<p>Exception was thrown at the line <code>private final Profiler profiler = new ProfilerImpl(clock, true);</code> and I don't know why. Please check the below code:</p>\n<pre><code>/**\n * Concrete implementation of the {@link Profiler}.\n */\nfinal class ProfilerImpl implements Profiler {\n    private final Map&lt;Class&lt;?&gt;, ServiceMetadata&lt;?&gt;&gt; serviceMetadata;\n    private final Clock clock;\n    private final ProfilingState state = new ProfilingState();\n    private final ZonedDateTime startTime;\n\n    @Inject\n    ProfilerImpl(Clock clock, boolean includeTest) {\n        this.clock = Objects.requireNonNull(clock);\n        this.startTime = ZonedDateTime.now(clock);\n        ServiceLocator&lt;Class&lt;?&gt;&gt; serviceLocator = ServiceLocator.webCrawlerLocator(includeTest);\n        serviceMetadata = serviceLocator.parse(serviceLocator.locateService());\n    }\n\n    private ServiceMetadata&lt;?&gt; profiledClass(Class&lt;?&gt; klass) {\n        for (Class&lt;?&gt; clazz : serviceMetadata.keySet()) {\n            if (klass.isAssignableFrom(clazz)) {\n                return serviceMetadata.get(clazz);\n            }\n        }\n        return null;\n    }\n\n    @Override\n    public &lt;T&gt; T wrap(Class&lt;T&gt; klass, T delegate) {\n        Objects.requireNonNull(klass);\n\n        ServiceMetadata&lt;?&gt; profiledClass = profiledClass(klass);\n        if (profiledClass == null) {\n            throw new IllegalArgumentException(klass.getName() + &quot;doesn't have profiled methods.&quot;);\n        }\n\n        ProfilingMethodInterceptor interceptor = new ProfilingMethodInterceptor(clock, delegate, state, startTime, profiledClass);\n\n        Object proxy = Proxy.newProxyInstance(\n                ProfilerImpl.class.getClassLoader(),\n                new Class[]{klass},\n                interceptor\n        );\n\n        return (T) proxy;\n    }\n\n    @Override\n    public void writeData(Path path) {\n        Objects.requireNonNull(path);\n\n        try (Writer writer = Files.newBufferedWriter(path, StandardOpenOption.CREATE, StandardOpenOption.APPEND)) {\n            writeData(writer);\n            writer.flush();\n        } catch (IOException ex) {\n            ex.printStackTrace();\n        }\n    }\n\n    @Override\n    public void writeData(Writer writer) throws IOException {\n        writer.write(&quot;Run at &quot; + RFC_1123_DATE_TIME.format(startTime));\n        writer.write(System.lineSeparator());\n        state.write(writer);\n        writer.write(System.lineSeparator());\n    }\n}\n</code></pre>\n<p>Stack trace:</p>\n<pre><code>Caused by: java.lang.ClassNotFoundException: target.classes.com.udacity.webcrawler.IgnoredUrls\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        at com.google.common.reflect.ClassPath$ClassInfo.load(ClassPath.java:360)\n        ... 88 more\n</code></pre>\n<p>Please help</p>\n"},{"tags":["java","dockerfile","graalvm"],"answers":[{"tags":[],"owner":{"account_id":497130,"reputation":1166,"user_id":1885085,"display_name":"Gilles D."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1569828547,"creation_date":1569828547,"answer_id":58163326,"question_id":58137906,"body_markdown":"Your command line for `native-image` contains `-cp -jar app.jar`. This is interpreted as `-jar` is the classpath and `app.jar` is the main class.\r\n\r\nI think you wanted `native-image --no-server -cp app.jar com.arindam.knative.gke.KnativeSpringGkeApplication`.","title":"build docker image using graalvm Error: Main entry point class &#39;app.jar&#39; not found com.oracle.svm.core.util.UserError$UserException","body":"<p>Your command line for <code>native-image</code> contains <code>-cp -jar app.jar</code>. This is interpreted as <code>-jar</code> is the classpath and <code>app.jar</code> is the main class.</p>\n\n<p>I think you wanted <code>native-image --no-server -cp app.jar com.arindam.knative.gke.KnativeSpringGkeApplication</code>.</p>\n"},{"tags":[],"owner":{"account_id":50156,"reputation":427,"user_id":149493,"display_name":"Raja Nagendra Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622973141,"creation_date":1622973141,"answer_id":67857812,"question_id":58137906,"body_markdown":"If HW.class to be compiled, say \r\n\r\n    native-image HW\r\n\r\nnot \r\n\r\n    native-image HW.class\r\n","title":"build docker image using graalvm Error: Main entry point class &#39;app.jar&#39; not found com.oracle.svm.core.util.UserError$UserException","body":"<p>If HW.class to be compiled, say</p>\n<pre><code>native-image HW\n</code></pre>\n<p>not</p>\n<pre><code>native-image HW.class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5794488,"reputation":1356,"user_id":4570698,"display_name":"harsh pamnani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686942021,"creation_date":1686942021,"answer_id":76492931,"question_id":58137906,"body_markdown":"I encountered a similar issue with a basic &quot;Hello World&quot; program. The problem arose because I initially compiled the Java file using Corretto Java 17 and then attempted to build a native image of that class using the command `native-image Hello`.\r\n\r\nHowever, I resolved the issue by removing the existing class file and recompiling it using the GraalVM JDK. Afterward, when I executed the same command, it started working as expected.","title":"build docker image using graalvm Error: Main entry point class &#39;app.jar&#39; not found com.oracle.svm.core.util.UserError$UserException","body":"<p>I encountered a similar issue with a basic &quot;Hello World&quot; program. The problem arose because I initially compiled the Java file using Corretto Java 17 and then attempted to build a native image of that class using the command <code>native-image Hello</code>.</p>\n<p>However, I resolved the issue by removing the existing class file and recompiling it using the GraalVM JDK. Afterward, when I executed the same command, it started working as expected.</p>\n"}],"owner":{"account_id":15305214,"reputation":659,"user_id":11042217,"display_name":"ARINDAM BANERJEE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4912,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1686942021,"creation_date":1569599823,"question_id":58137906,"body_markdown":"I am trying to build my Docker image using graalvm-ce but it fails showing error as:\r\n\r\nAs per oracle blog post I have mentioned the Java class also as a starting point but still it fails.\r\n\r\n```\r\nError: Main entry point class &#39;app.jar&#39; not found.\r\ncom.oracle.svm.core.util.UserError$UserException: Main entry point class &#39;app.jar&#39; not found.\r\n        at com.oracle.svm.core.util.UserError.abort(UserError.java:65)\r\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.buildImage(NativeImageGeneratorRunner.java:260)\r\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.build(NativeImageGeneratorRunner.java:448)\r\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.main(NativeImageGeneratorRunner.java:113)\r\nError: Image build request failed with exit status 1\r\n```\r\n\r\nHere is my Dockerfile:\r\n\r\n```\r\n#Multi stage docker file\r\n\r\nFROM maven:3.6.1-jdk-8 AS build\r\n\r\nENV APP_HOME=/root/dev/app/\r\n\r\nCOPY src $APP_HOME/src\r\n\r\nCOPY pom.xml $APP_HOME/\r\n\r\nRUN mvn -f $APP_HOME/pom.xml clean package -DskipTests\r\n\r\n\r\n\r\nFROM oracle/graalvm-ce:19.2.0 AS build-aot\r\n\r\nRUN ln -s /opt/graalvm-ce-19.2.0 /opt/graalvm\r\nENV GRAALVM_HOME=/opt/graalvm\r\nENV JAVA_HOME=/opt/graalvm\r\nENV PATH=${GRAALVM_HOME}/bin:${PATH}\r\nRUN gu install native-image\r\nCOPY --from=build /root/dev/app/target/knative-spring-gke-1.0.jar /app.jar\r\nRUN native-image --no-server -cp -jar app.jar com.arindam.knative.gke.KnativeSpringGkeApplication\r\n#ENTRYPOINT [&quot;./app&quot;]\r\n\r\nFROM frolvlad/alpine-glibc\r\nEXPOSE 8080\r\nCOPY --from=build-aot /app .\r\nENTRYPOINT [&quot;./app&quot;]\r\n```\r\n\r\nAny idea? Thanks in advance.\r\n\r\n\r\n","title":"build docker image using graalvm Error: Main entry point class &#39;app.jar&#39; not found com.oracle.svm.core.util.UserError$UserException","body":"<p>I am trying to build my Docker image using graalvm-ce but it fails showing error as:</p>\n\n<p>As per oracle blog post I have mentioned the Java class also as a starting point but still it fails.</p>\n\n<pre><code>Error: Main entry point class 'app.jar' not found.\ncom.oracle.svm.core.util.UserError$UserException: Main entry point class 'app.jar' not found.\n        at com.oracle.svm.core.util.UserError.abort(UserError.java:65)\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.buildImage(NativeImageGeneratorRunner.java:260)\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.build(NativeImageGeneratorRunner.java:448)\n        at com.oracle.svm.hosted.NativeImageGeneratorRunner.main(NativeImageGeneratorRunner.java:113)\nError: Image build request failed with exit status 1\n</code></pre>\n\n<p>Here is my Dockerfile:</p>\n\n<pre><code>#Multi stage docker file\n\nFROM maven:3.6.1-jdk-8 AS build\n\nENV APP_HOME=/root/dev/app/\n\nCOPY src $APP_HOME/src\n\nCOPY pom.xml $APP_HOME/\n\nRUN mvn -f $APP_HOME/pom.xml clean package -DskipTests\n\n\n\nFROM oracle/graalvm-ce:19.2.0 AS build-aot\n\nRUN ln -s /opt/graalvm-ce-19.2.0 /opt/graalvm\nENV GRAALVM_HOME=/opt/graalvm\nENV JAVA_HOME=/opt/graalvm\nENV PATH=${GRAALVM_HOME}/bin:${PATH}\nRUN gu install native-image\nCOPY --from=build /root/dev/app/target/knative-spring-gke-1.0.jar /app.jar\nRUN native-image --no-server -cp -jar app.jar com.arindam.knative.gke.KnativeSpringGkeApplication\n#ENTRYPOINT [\"./app\"]\n\nFROM frolvlad/alpine-glibc\nEXPOSE 8080\nCOPY --from=build-aot /app .\nENTRYPOINT [\"./app\"]\n</code></pre>\n\n<p>Any idea? Thanks in advance.</p>\n"},{"tags":["java","android","android-studio","android-4.4-kitkat"],"answers":[{"tags":[],"owner":{"account_id":18542382,"reputation":3683,"user_id":13510562,"display_name":"rmunge"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592670698,"creation_date":1592558141,"answer_id":62467046,"question_id":62466477,"body_markdown":"You are most likely missing another .so file. Ensure that all .so files are in the same directory.\r\n\r\nThe following may help to identify referenced .so files:\r\nhttps://unix.stackexchange.com/questions/120015/how-to-find-out-the-dynamic-libraries-executables-loads-when-run\r\n\r\n\r\n----------\r\n\r\nUpdate:\r\n\r\nI&#39;m not aware of any android API for this type of hardware. According to https://kcosit.com/kcosit-v720-p1496437.html your device contains most likely a OEM version of the SE4710 barcode scanner, manufactured by Motorola. It seems that there exists an SDK from Motorola but I could only find the corresponding  [documenation][1]. It is most likely used as base for SDKs provided by OEM licensors. One of such an SDK is available here: https://developer.zebra.com/community/tools\r\n\r\nMaybe you are lucky and you can use this SDK also for your device. If it should \r\n also be compatible with your device you would of course also need to check license of the SDK - I haven&#39;t found any info yet. Maybe you are able to find a source for the original SDK from Motorolla or an other SDK from an OEM licensor.\r\n\r\n\r\n  [1]: https://help.famoco.com/downloads/SWDecodeAndroid_IG.pdf","title":"dlopen failed: cannot locate symbol &quot;_ZN7android10VectorImpl19reservedVectorImpl1Ev&quot;","body":"<p>You are most likely missing another .so file. Ensure that all .so files are in the same directory.</p>\n<p>The following may help to identify referenced .so files:\n<a href=\"https://unix.stackexchange.com/questions/120015/how-to-find-out-the-dynamic-libraries-executables-loads-when-run\">https://unix.stackexchange.com/questions/120015/how-to-find-out-the-dynamic-libraries-executables-loads-when-run</a></p>\n<hr />\n<p>Update:</p>\n<p>I'm not aware of any android API for this type of hardware. According to <a href=\"https://kcosit.com/kcosit-v720-p1496437.html\" rel=\"nofollow noreferrer\">https://kcosit.com/kcosit-v720-p1496437.html</a> your device contains most likely a OEM version of the SE4710 barcode scanner, manufactured by Motorola. It seems that there exists an SDK from Motorola but I could only find the corresponding  <a href=\"https://help.famoco.com/downloads/SWDecodeAndroid_IG.pdf\" rel=\"nofollow noreferrer\">documenation</a>. It is most likely used as base for SDKs provided by OEM licensors. One of such an SDK is available here: <a href=\"https://developer.zebra.com/community/tools\" rel=\"nofollow noreferrer\">https://developer.zebra.com/community/tools</a></p>\n<p>Maybe you are lucky and you can use this SDK also for your device. If it should\nalso be compatible with your device you would of course also need to check license of the SDK - I haven't found any info yet. Maybe you are able to find a source for the original SDK from Motorolla or an other SDK from an OEM licensor.</p>\n"}],"owner":{"account_id":14950171,"reputation":129,"user_id":10794112,"display_name":"lukeey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1358,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1686940965,"creation_date":1592555983,"question_id":62466477,"body_markdown":"I need help, cause I&#39;m stucked for 2 days from now and i can&#39;t find anything.\r\nI bought device: Kcosit V720 on aliexpress and they send me library with it, but it&#39;s so hard to get it work correctly.\r\n\r\nWhile I was trying to load library, i had to download libcamera_client.so, because libbarcodereader.so needed it, so i don&#39;t know if it is compatible, but now, I&#39;m receiving another error. Any ideas how to fix it ?:\r\n\r\n    2020-06-19 09:29:33.056 7239-7239/com.myapplication E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.myapplication, PID: 7239\r\n    java.lang.UnsatisfiedLinkError: dlopen failed: cannot locate symbol &quot;_ZN7android10VectorImpl19reservedVectorImpl1Ev&quot; referenced by &quot;/data/app/com.myapplication-1/lib/arm/libbarcodereader.so&quot;...\r\n        at java.lang.Runtime.loadLibrary0(Runtime.java:977)\r\n        at java.lang.System.loadLibrary(System.java:1530)\r\n        at com.myapplication.MainActivity.&lt;clinit&gt;(MainActivity.java:12)\r\n        at java.lang.Class.newInstance(Native Method)\r\n        at android.app.Instrumentation.newActivity(Instrumentation.java:1078)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2616)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2789)\r\n        at android.app.ActivityThread.-wrap12(ActivityThread.java)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1527)\r\n        at android.os.Handler.dispatchMessage(Handler.java:110)\r\n        at android.os.Looper.loop(Looper.java:203)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6251)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1063)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:924)","title":"dlopen failed: cannot locate symbol &quot;_ZN7android10VectorImpl19reservedVectorImpl1Ev&quot;","body":"<p>I need help, cause I'm stucked for 2 days from now and i can't find anything.\nI bought device: Kcosit V720 on aliexpress and they send me library with it, but it's so hard to get it work correctly.</p>\n<p>While I was trying to load library, i had to download libcamera_client.so, because libbarcodereader.so needed it, so i don't know if it is compatible, but now, I'm receiving another error. Any ideas how to fix it ?:</p>\n<pre><code>2020-06-19 09:29:33.056 7239-7239/com.myapplication E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.myapplication, PID: 7239\njava.lang.UnsatisfiedLinkError: dlopen failed: cannot locate symbol &quot;_ZN7android10VectorImpl19reservedVectorImpl1Ev&quot; referenced by &quot;/data/app/com.myapplication-1/lib/arm/libbarcodereader.so&quot;...\n    at java.lang.Runtime.loadLibrary0(Runtime.java:977)\n    at java.lang.System.loadLibrary(System.java:1530)\n    at com.myapplication.MainActivity.&lt;clinit&gt;(MainActivity.java:12)\n    at java.lang.Class.newInstance(Native Method)\n    at android.app.Instrumentation.newActivity(Instrumentation.java:1078)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2616)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2789)\n    at android.app.ActivityThread.-wrap12(ActivityThread.java)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1527)\n    at android.os.Handler.dispatchMessage(Handler.java:110)\n    at android.os.Looper.loop(Looper.java:203)\n    at android.app.ActivityThread.main(ActivityThread.java:6251)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1063)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:924)\n</code></pre>\n"},{"tags":["java","amazon-web-services","exception","amazon-cognito"],"answers":[{"tags":[],"owner":{"account_id":16233358,"reputation":11,"user_id":13894221,"display_name":"Luciana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686940876,"creation_date":1686940876,"answer_id":76492838,"question_id":76443214,"body_markdown":"So, after some time I finally understood that I was just not reading the documentation correctly, the OAuthFlow is being set automatically as &quot;client_credentials&quot;, which doesn&#39;t support these scopes for some reason. After I set the OAuthFlow to &quot;code&quot; it started working.\r\n\r\nIn case anyone comes across this in the future and uses it as reference, I also had to set OAuthFlowsUserPoolClient to &quot;true&quot; and add the scope &quot;openid&quot; to be able to use &quot;profile&quot; and &quot;email&quot;. It ended up like this:\r\n\r\n`````\r\n  CreateUserPoolClientRequest req = new CreateUserPoolClientRequest();\r\n    \t\t\r\n  req.withSupportedIdentityProviders(&quot;COGNITO&quot;);\r\n  req.withAllowedOAuthFlows(&quot;code&quot;);\r\n  req.setAllowedOAuthFlowsUserPoolClient(true);\r\n  req.withAllowedOAuthScopes(&quot;openid&quot;, &quot;profile&quot;, &quot;email&quot;); \r\n\r\n  req.withLogoutURLs(&quot;https://&quot;+ appName +&quot;.com&quot;);\r\n  req.withCallbackURLs(&quot;https://&quot;+ appName +&quot;.com&quot;);\r\n  req.setDefaultRedirectURI(&quot;https://&quot;+ appName +&quot;.com&quot;);\r\n\r\n  req.setUserPoolId(userPoolId);\r\n  req.setClientName(appName);\r\n  req.setGenerateSecret(true);     \t\t\r\n  \r\n  CreateUserPoolClientResult result = idProviderClient.createUserPoolClient(req);\r\n`````\r\n\r\nThe exception itself was coming from the &quot;client_credentials&quot; being set as default, though.","title":"Why am I receiving InvalidOAuthFlowException when I&#39;m not setting an OAuthFlow in Cognito API?","body":"<p>So, after some time I finally understood that I was just not reading the documentation correctly, the OAuthFlow is being set automatically as &quot;client_credentials&quot;, which doesn't support these scopes for some reason. After I set the OAuthFlow to &quot;code&quot; it started working.</p>\n<p>In case anyone comes across this in the future and uses it as reference, I also had to set OAuthFlowsUserPoolClient to &quot;true&quot; and add the scope &quot;openid&quot; to be able to use &quot;profile&quot; and &quot;email&quot;. It ended up like this:</p>\n<pre><code>  CreateUserPoolClientRequest req = new CreateUserPoolClientRequest();\n            \n  req.withSupportedIdentityProviders(&quot;COGNITO&quot;);\n  req.withAllowedOAuthFlows(&quot;code&quot;);\n  req.setAllowedOAuthFlowsUserPoolClient(true);\n  req.withAllowedOAuthScopes(&quot;openid&quot;, &quot;profile&quot;, &quot;email&quot;); \n\n  req.withLogoutURLs(&quot;https://&quot;+ appName +&quot;.com&quot;);\n  req.withCallbackURLs(&quot;https://&quot;+ appName +&quot;.com&quot;);\n  req.setDefaultRedirectURI(&quot;https://&quot;+ appName +&quot;.com&quot;);\n\n  req.setUserPoolId(userPoolId);\n  req.setClientName(appName);\n  req.setGenerateSecret(true);          \n  \n  CreateUserPoolClientResult result = idProviderClient.createUserPoolClient(req);\n</code></pre>\n<p>The exception itself was coming from the &quot;client_credentials&quot; being set as default, though.</p>\n"}],"owner":{"account_id":16233358,"reputation":11,"user_id":13894221,"display_name":"Luciana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76492838,"answer_count":1,"score":0,"last_activity_date":1686940876,"creation_date":1686339342,"question_id":76443214,"body_markdown":"I&#39;m trying to write a java function to integrate with the Cognito API but I&#39;m getting this exception:\r\n\r\n&gt; 09/06/2023 16:02:26  com.amazonaws.services.cognitoidp.model.InvalidOAuthFlowException: profile is not supported with client_credentials flow (Service: AWSCognitoIdentityProvider; Status Code: 400; Error Code: InvalidOAuthFlowException; Request ID: ID)\r\n\r\n\r\nThis is the function I have written, though:\r\n\r\n\r\n```\r\n    \t\tCreateUserPoolClientRequest req = new CreateUserPoolClientRequest();\r\n    \t\t\r\n    \t\treq.setUserPoolId(userPoolId);\r\n    \t\treq.setClientName(appName);\r\n    \t\t\r\n    \t\tList&lt;String&gt; scopes = new ArrayList&lt;String&gt;();\r\n    \t\tscopes.add(&quot;profile&quot;);\r\n    \t\tscopes.add(&quot;email&quot;);\r\n    \t\t\r\n    \t\treq.setAllowedOAuthScopes(scopes); \r\n    \t\t\r\n    \t\tCreateUserPoolClientResult result = idProviderClient.createUserPoolClient(req);\r\n```\r\n\r\nAs you can see, I have not set Allowed OAuth Flow, only Allowed OAuth Scopes. Going by this documentation [here](https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_CreateUserPoolClient.html), AllowedOAuthFlow is not required, so I don&#39;t see where this exception is coming from.\r\n\r\nIf I don&#39;t set the AllowedOAuthScopes the function is successful, but I want to set them. What do I do?","title":"Why am I receiving InvalidOAuthFlowException when I&#39;m not setting an OAuthFlow in Cognito API?","body":"<p>I'm trying to write a java function to integrate with the Cognito API but I'm getting this exception:</p>\n<blockquote>\n<p>09/06/2023 16:02:26  com.amazonaws.services.cognitoidp.model.InvalidOAuthFlowException: profile is not supported with client_credentials flow (Service: AWSCognitoIdentityProvider; Status Code: 400; Error Code: InvalidOAuthFlowException; Request ID: ID)</p>\n</blockquote>\n<p>This is the function I have written, though:</p>\n<pre><code>            CreateUserPoolClientRequest req = new CreateUserPoolClientRequest();\n            \n            req.setUserPoolId(userPoolId);\n            req.setClientName(appName);\n            \n            List&lt;String&gt; scopes = new ArrayList&lt;String&gt;();\n            scopes.add(&quot;profile&quot;);\n            scopes.add(&quot;email&quot;);\n            \n            req.setAllowedOAuthScopes(scopes); \n            \n            CreateUserPoolClientResult result = idProviderClient.createUserPoolClient(req);\n</code></pre>\n<p>As you can see, I have not set Allowed OAuth Flow, only Allowed OAuth Scopes. Going by this documentation <a href=\"https://docs.aws.amazon.com/cognito-user-identity-pools/latest/APIReference/API_CreateUserPoolClient.html\" rel=\"nofollow noreferrer\">here</a>, AllowedOAuthFlow is not required, so I don't see where this exception is coming from.</p>\n<p>If I don't set the AllowedOAuthScopes the function is successful, but I want to set them. What do I do?</p>\n"},{"tags":["java","android","json"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1686871735,"post_id":76486061,"comment_id":134861724,"body_markdown":"Please be more specific about what is not working.","body":"Please be more specific about what is not working."},{"owner":{"account_id":13181158,"reputation":420,"user_id":9520479,"display_name":"Jhilton"},"score":1,"creation_date":1686875590,"post_id":76486061,"comment_id":134862059,"body_markdown":"JSONObject expect the string to be the JSON string, not a path to a file. Maybe this link may help https://stackoverflow.com/a/20090084/9520479","body":"JSONObject expect the string to be the JSON string, not a path to a file. Maybe this link may help <a href=\"https://stackoverflow.com/a/20090084/9520479\">stackoverflow.com/a/20090084/9520479</a>"},{"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"score":0,"creation_date":1686878281,"post_id":76486061,"comment_id":134862286,"body_markdown":"Tried the stuff in the link, but when it tries to run the inputStream it crashes with an IOException","body":"Tried the stuff in the link, but when it tries to run the inputStream it crashes with an IOException"},{"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"score":0,"creation_date":1686881242,"post_id":76486061,"comment_id":134862498,"body_markdown":"Okay, figured out that my method being static was screwing with the parsing. That&#39;s fixed, but it still won&#39;t map onto an object giving me a com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 2 column 2 path $[0] error","body":"Okay, figured out that my method being static was screwing with the parsing. That&#39;s fixed, but it still won&#39;t map onto an object giving me a com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 2 column 2 path $[0] error"}],"answers":[{"tags":[],"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686940632,"creation_date":1686940632,"answer_id":76492820,"question_id":76486061,"body_markdown":"Alright I figured out my issues. First, I needed to make my method non-static, which allowed me to read the JSON file through an InputStream. Then I needed to use an array (but not a list... for some reason?) to map all the json data to objects. At the end my code looked like this:\r\n\r\n     private String deserializeItem() throws IOException, JSONException {\r\n        String itemText = &quot;&quot;;\r\n        Gson gson = new Gson();\r\n        InputStream is = getAssets().open(&quot;JSONFile.json&quot;);\r\n        String jsonTxt = IOUtils.toString(is, &quot;UTF-8&quot;);\r\n        Item[] items = gson.fromJson(jsonTxt, Item[].class);\r\n        List&lt;Item&gt; itemList = new ArrayList&lt;Item&gt;();\r\n\r\n        //Eliminates objects with null and empty item names\r\n        for (int i=0; i&lt;items.length; i++)\r\n        {\r\n            if (items[i].getItemName() == null) {continue;}\r\n            else if (items[i].getItemName().equals(&quot;&quot;)) {continue;}\r\n            else {itemList.add(items[i]);}\r\n        }\r\n\r\nThis let me parse the JSON file into objects and remove all null and empty values in it.","title":"How to parse a JSON file in android while skipping items with null values","body":"<p>Alright I figured out my issues. First, I needed to make my method non-static, which allowed me to read the JSON file through an InputStream. Then I needed to use an array (but not a list... for some reason?) to map all the json data to objects. At the end my code looked like this:</p>\n<pre><code> private String deserializeItem() throws IOException, JSONException {\n    String itemText = &quot;&quot;;\n    Gson gson = new Gson();\n    InputStream is = getAssets().open(&quot;JSONFile.json&quot;);\n    String jsonTxt = IOUtils.toString(is, &quot;UTF-8&quot;);\n    Item[] items = gson.fromJson(jsonTxt, Item[].class);\n    List&lt;Item&gt; itemList = new ArrayList&lt;Item&gt;();\n\n    //Eliminates objects with null and empty item names\n    for (int i=0; i&lt;items.length; i++)\n    {\n        if (items[i].getItemName() == null) {continue;}\n        else if (items[i].getItemName().equals(&quot;&quot;)) {continue;}\n        else {itemList.add(items[i]);}\n    }\n</code></pre>\n<p>This let me parse the JSON file into objects and remove all null and empty values in it.</p>\n"}],"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686940632,"creation_date":1686871299,"question_id":76486061,"body_markdown":"Part of my JSON file: \r\n```\r\n[\r\n{&quot;id&quot;: 755, &quot;listId&quot;: 2, &quot;name&quot;: &quot;&quot;},\r\n{&quot;id&quot;: 203, &quot;listId&quot;: 2, &quot;name&quot;: &quot;&quot;},\r\n{&quot;id&quot;: 684, &quot;listId&quot;: 1, &quot;name&quot;: &quot;Item 684&quot;},\r\n{&quot;id&quot;: 276, &quot;listId&quot;: 1, &quot;name&quot;: &quot;Item 276&quot;},\r\n{&quot;id&quot;: 736, &quot;listId&quot;: 3, &quot;name&quot;: null},\r\n{&quot;id&quot;: 926, &quot;listId&quot;: 4, &quot;name&quot;: null},\r\n{&quot;id&quot;: 808, &quot;listId&quot;: 4, &quot;name&quot;: &quot;Item 808&quot;}]\r\n```\r\n\r\nI want to parse the JSON file into Item objects while skipping over the null values. However I&#39;m getting an error now from gson\r\n\r\n&gt; com.google.gson.JsonSyntaxException: java.lang.IllegalStateException:\r\n&gt; Expected BEGIN_ARRAY but was BEGIN_OBJECT at line 2 column 2 path $[0]\r\n\r\n\r\n```\r\nprivate String deserializeItem() throws IOException, JSONException {\r\n        String itemText = &quot;&quot;;\r\n        //Item item = new Item();\r\n        Gson gson = new Gson();\r\n\r\n        InputStream is = getAssets().open(&quot;JSONFile.json&quot;);\r\n        String jsonTxt = IOUtils.toString(is, &quot;UTF-8&quot;);\r\n        //Map map = gson.fromJson(jsonTxt, Map.class);\r\n        //Map&lt;String,Item&gt; map = new HashMap&lt;String, Item&gt;();\r\n        //map = (Map&lt;String,Item&gt;) gson.fromJson(jsonTxt, map.getClass());\r\n        //List&lt;Item&gt; itemList = Arrays.asList(gson.fromJson(jsonTxt, Item[].class));\r\n        //Item item = gson.fromJson(jsonTxt, Item.class);\r\n        JsonElement json = gson.fromJson(new FileReader(&quot;fetchJSONFile.json&quot;), JsonElement.class);\r\n        String result = gson.toJson(json);\r\n\r\n        System.out.println(jsonTxt);\r\n        //JSONObject json = new JSONObject(jsonTxt);\r\n        //String a = json.getString(&quot;1000&quot;);\r\n        //System.out.println(a);\r\n\r\n        return itemText;\r\n```\r\nCommented out portions are my various attempts to get this to work. It reads the file now without crashing, but does not parse to an object.\r\n","title":"How to parse a JSON file in android while skipping items with null values","body":"<p>Part of my JSON file:</p>\n<pre><code>[\n{&quot;id&quot;: 755, &quot;listId&quot;: 2, &quot;name&quot;: &quot;&quot;},\n{&quot;id&quot;: 203, &quot;listId&quot;: 2, &quot;name&quot;: &quot;&quot;},\n{&quot;id&quot;: 684, &quot;listId&quot;: 1, &quot;name&quot;: &quot;Item 684&quot;},\n{&quot;id&quot;: 276, &quot;listId&quot;: 1, &quot;name&quot;: &quot;Item 276&quot;},\n{&quot;id&quot;: 736, &quot;listId&quot;: 3, &quot;name&quot;: null},\n{&quot;id&quot;: 926, &quot;listId&quot;: 4, &quot;name&quot;: null},\n{&quot;id&quot;: 808, &quot;listId&quot;: 4, &quot;name&quot;: &quot;Item 808&quot;}]\n</code></pre>\n<p>I want to parse the JSON file into Item objects while skipping over the null values. However I'm getting an error now from gson</p>\n<blockquote>\n<p>com.google.gson.JsonSyntaxException: java.lang.IllegalStateException:\nExpected BEGIN_ARRAY but was BEGIN_OBJECT at line 2 column 2 path $[0]</p>\n</blockquote>\n<pre><code>private String deserializeItem() throws IOException, JSONException {\n        String itemText = &quot;&quot;;\n        //Item item = new Item();\n        Gson gson = new Gson();\n\n        InputStream is = getAssets().open(&quot;JSONFile.json&quot;);\n        String jsonTxt = IOUtils.toString(is, &quot;UTF-8&quot;);\n        //Map map = gson.fromJson(jsonTxt, Map.class);\n        //Map&lt;String,Item&gt; map = new HashMap&lt;String, Item&gt;();\n        //map = (Map&lt;String,Item&gt;) gson.fromJson(jsonTxt, map.getClass());\n        //List&lt;Item&gt; itemList = Arrays.asList(gson.fromJson(jsonTxt, Item[].class));\n        //Item item = gson.fromJson(jsonTxt, Item.class);\n        JsonElement json = gson.fromJson(new FileReader(&quot;fetchJSONFile.json&quot;), JsonElement.class);\n        String result = gson.toJson(json);\n\n        System.out.println(jsonTxt);\n        //JSONObject json = new JSONObject(jsonTxt);\n        //String a = json.getString(&quot;1000&quot;);\n        //System.out.println(a);\n\n        return itemText;\n</code></pre>\n<p>Commented out portions are my various attempts to get this to work. It reads the file now without crashing, but does not parse to an object.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":15226980,"reputation":64,"user_id":10987272,"display_name":"Enol Garc&#237;a Gonz&#225;lez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686937765,"creation_date":1686937765,"answer_id":76492555,"question_id":76115129,"body_markdown":"You need to add another dependency on the pom.xml file for the language that you are going to process. In your case, for java, you nedd to add this dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;de.jplag&lt;/groupId&gt;\r\n        &lt;artifactId&gt;java&lt;/artifactId&gt;\r\n        &lt;version&gt;4.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nDo not remove your current dependency, you will need both.","title":"Cannot resolve de.jplag.java.Language(), trying to use the JPlag API","body":"<p>You need to add another dependency on the pom.xml file for the language that you are going to process. In your case, for java, you nedd to add this dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;de.jplag&lt;/groupId&gt;\n    &lt;artifactId&gt;java&lt;/artifactId&gt;\n    &lt;version&gt;4.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Do not remove your current dependency, you will need both.</p>\n"}],"owner":{"account_id":20142342,"reputation":13,"user_id":14771760,"display_name":"authorized_bot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686937765,"creation_date":1682543565,"question_id":76115129,"body_markdown":"I&#39;m trying to learn how to use the API but keep running into this error, all I did was copy paste the example code\r\n\r\n\r\n\r\n\r\n\r\n```\r\nLanguage language = new de.jplag.java.Language();\r\n        Set&lt;File&gt; submissionDirectories = Set.of(new File(&quot;/path/to/rootDir&quot;));\r\n        File baseCode = new File(&quot;/path/to/baseCode&quot;);\r\n        JPlagOptions options = new JPlagOptions(language, submissionDirectories, Set.of()).withBaseCodeSubmissionDirectory(baseCode);\r\n\r\n        JPlag jplag = new JPlag(options);\r\n        try {\r\n            JPlagResult result = jplag.run();\r\n\r\n            // Optional\r\n            ReportObjectFactory reportObjectFactory = new ReportObjectFactory();\r\n            reportObjectFactory.createAndSaveReport(result, &quot;/path/to/output&quot;);\r\n        } catch (ExitException e) {\r\n            // error handling here\r\n        }\r\n```\r\nThis is the version I&#39;m using\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;de.jplag&lt;/\r\n    &lt;artifactId&gt;jplag&lt;/artifactId&gt;\r\n    &lt;version&gt;4.2.0&lt;/version&gt;\r\n&lt;/dependency&gt;  \r\n```","title":"Cannot resolve de.jplag.java.Language(), trying to use the JPlag API","body":"<p>I'm trying to learn how to use the API but keep running into this error, all I did was copy paste the example code</p>\n<pre><code>Language language = new de.jplag.java.Language();\n        Set&lt;File&gt; submissionDirectories = Set.of(new File(&quot;/path/to/rootDir&quot;));\n        File baseCode = new File(&quot;/path/to/baseCode&quot;);\n        JPlagOptions options = new JPlagOptions(language, submissionDirectories, Set.of()).withBaseCodeSubmissionDirectory(baseCode);\n\n        JPlag jplag = new JPlag(options);\n        try {\n            JPlagResult result = jplag.run();\n\n            // Optional\n            ReportObjectFactory reportObjectFactory = new ReportObjectFactory();\n            reportObjectFactory.createAndSaveReport(result, &quot;/path/to/output&quot;);\n        } catch (ExitException e) {\n            // error handling here\n        }\n</code></pre>\n<p>This is the version I'm using</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;de.jplag&lt;/\n    &lt;artifactId&gt;jplag&lt;/artifactId&gt;\n    &lt;version&gt;4.2.0&lt;/version&gt;\n&lt;/dependency&gt;  \n</code></pre>\n"},{"tags":["java","import","text-to-speech","importerror","freetts"],"owner":{"account_id":27855384,"reputation":1,"user_id":21268996,"display_name":"sams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686937235,"creation_date":1686506590,"question_id":76451828,"body_markdown":"I tried to make a tts code but i faild at the very beginning. The .jars are downloaded and in my lib, but i can`t import them into my code. it only shows: &quot;The package com.sun.speech is not accessible&quot;\r\nDid that happen to anyone else and does anyone know how to resolve this?\r\n\r\nIdk if this helps, but im using eclipse, i have a module-info.java and i added: &quot;requires jdk.httpserver;&quot;\r\nbut that doesnt help\r\n\r\nimport com.sun.speech.freetts.Voice;  \r\nimport com.sun.speech.freetts.VoiceManager;\r\n\r\nand thats where i failed, the first 2 lines of code. I never had a problem with importing stuff and it also works if i imoprt other things in the same class","title":"Java FreeTTS: The package com.sun.speech is not accessible","body":"<p>I tried to make a tts code but i faild at the very beginning. The .jars are downloaded and in my lib, but i can`t import them into my code. it only shows: &quot;The package com.sun.speech is not accessible&quot;\nDid that happen to anyone else and does anyone know how to resolve this?</p>\n<p>Idk if this helps, but im using eclipse, i have a module-info.java and i added: &quot;requires jdk.httpserver;&quot;\nbut that doesnt help</p>\n<p>import com.sun.speech.freetts.Voice;<br />\nimport com.sun.speech.freetts.VoiceManager;</p>\n<p>and thats where i failed, the first 2 lines of code. I never had a problem with importing stuff and it also works if i imoprt other things in the same class</p>\n"},{"tags":["java","class","import","package"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1431791264,"creation_date":1431791264,"answer_id":30277669,"question_id":30277632,"body_markdown":"I strongly suspect the problem is in how you&#39;re compiling.\r\n\r\nBoth `ConvertiEuro.java` and `Valuta.java` should be in a directory called `finanza`, and you should ideally compile from the *parent* directory, so that all the compiler knows where to find other code in the same package. It would *expect* to find a source file in a `finanza` directory under the one you&#39;re currently in, for a package called `finanza`.\r\n\r\nIt&#39;s simplest just to compile all the files at the same time though:\r\n\r\n    javac finanza/*.java\r\n\r\n... or better yet, use an IDE which will manage this sort of things for you.","title":"A java class can&#39;t find an other in the same package","body":"<p>I strongly suspect the problem is in how you're compiling.</p>\n\n<p>Both <code>ConvertiEuro.java</code> and <code>Valuta.java</code> should be in a directory called <code>finanza</code>, and you should ideally compile from the <em>parent</em> directory, so that all the compiler knows where to find other code in the same package. It would <em>expect</em> to find a source file in a <code>finanza</code> directory under the one you're currently in, for a package called <code>finanza</code>.</p>\n\n<p>It's simplest just to compile all the files at the same time though:</p>\n\n<pre><code>javac finanza/*.java\n</code></pre>\n\n<p>... or better yet, use an IDE which will manage this sort of things for you.</p>\n"}],"owner":{"account_id":4433743,"reputation":2585,"user_id":3610183,"accept_rate":87,"display_name":"rainman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9048,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":30277669,"answer_count":1,"score":0,"last_activity_date":1686937105,"creation_date":1431791057,"question_id":30277632,"body_markdown":"I am implementing a java program in ubuntu without an IDE that converts a currency to €, i have 2 classes ConvertiEuro and Valuta both in the same directory (package) called finanza, the class ConvertiEuro uses the class Valuta, when i try to compile Valuta.java it compiles correctly but when i compile ConvertiEuro.java I get an error saying &quot;ConvertiEuro.java:3: error: cannot find symbol&quot; I don&#39;t know why here is the code\r\n\r\n      package finanza;\r\n\r\n       public class Valuta {\r\n\r\n         private String nomeValuta;\r\n         private double totValuta;\r\n\r\n\r\n\r\n        public Valuta(String nomeVal, double totVal) {\r\n\r\n                 nomeValuta = nomeVal;\r\n                 totValuta = totVal;\r\n       }\r\n\r\n           public String getNomeValuta() {\r\n\r\n              return nomeValuta;    \r\n           }\r\n\r\n            public double getTotValuta() {\r\n              return totValuta;     \r\n       }\r\n\r\n\r\n  }\r\n\r\n   \r\n\r\n    package finanza;\r\n\r\n     import finanza.Valuta;\r\n\r\n     public class ConvertiEuro {\r\n\r\n\r\n    private int valuteGestibili;\r\n    private int cont = 0;\r\n    private Valuta [] valutas;\r\n\r\n\r\n\r\n    public ConvertiEuro(int valuteGest) {\r\n\r\n        this.valuteGestibili = valuteGest;\r\n        this.valutas = new Valuta [this.valuteGestibili];\r\n\r\n\r\n    }\r\n    public boolean impostaValuta(Valuta val){\r\n\r\n\r\n        if(cont&lt;valuteGestibili) {\r\n            this.valutas[cont] = val;\r\n            cont ++;\r\n            return true; \r\n\r\n        }\r\n        else {\r\n            return false;\r\n        }   \r\n\r\n    }\r\n\r\n    }\r\n\r\nand this how I compile: javac ConvertiEuro.java","title":"A java class can&#39;t find an other in the same package","body":"<p>I am implementing a java program in ubuntu without an IDE that converts a currency to €, i have 2 classes ConvertiEuro and Valuta both in the same directory (package) called finanza, the class ConvertiEuro uses the class Valuta, when i try to compile Valuta.java it compiles correctly but when i compile ConvertiEuro.java I get an error saying \"ConvertiEuro.java:3: error: cannot find symbol\" I don't know why here is the code</p>\n\n<pre><code>  package finanza;\n\n   public class Valuta {\n\n     private String nomeValuta;\n     private double totValuta;\n\n\n\n    public Valuta(String nomeVal, double totVal) {\n\n             nomeValuta = nomeVal;\n             totValuta = totVal;\n   }\n\n       public String getNomeValuta() {\n\n          return nomeValuta;    \n       }\n\n        public double getTotValuta() {\n          return totValuta;     \n   }\n</code></pre>\n\n<p>}</p>\n\n<pre><code>package finanza;\n\n import finanza.Valuta;\n\n public class ConvertiEuro {\n\n\nprivate int valuteGestibili;\nprivate int cont = 0;\nprivate Valuta [] valutas;\n\n\n\npublic ConvertiEuro(int valuteGest) {\n\n    this.valuteGestibili = valuteGest;\n    this.valutas = new Valuta [this.valuteGestibili];\n\n\n}\npublic boolean impostaValuta(Valuta val){\n\n\n    if(cont&lt;valuteGestibili) {\n        this.valutas[cont] = val;\n        cont ++;\n        return true; \n\n    }\n    else {\n        return false;\n    }   \n\n}\n\n}\n</code></pre>\n\n<p>and this how I compile: javac ConvertiEuro.java</p>\n"},{"tags":["java","spring-boot","file"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1686924827,"post_id":76490972,"comment_id":134869675,"body_markdown":"What&#39;s not working? You can&#39;t find any file in the folder? Is it working locally but not when packaged? Do you get an error? In addition, I don&#39;t think you can get a Bean from a void method. I never checked because it makes no sense. If you want something to run at startup, check CommandLineRunner","body":"What&#39;s not working? You can&#39;t find any file in the folder? Is it working locally but not when packaged? Do you get an error? In addition, I don&#39;t think you can get a Bean from a void method. I never checked because it makes no sense. If you want something to run at startup, check CommandLineRunner"},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1686925267,"post_id":76490972,"comment_id":134869795,"body_markdown":"@grekier question eddited and errors added. In addition, I&#39;m using `@Bean` just to get the method executed on the startup, I&#39;ll change it to `@PostConstruct` or something like that.","body":"@grekier question eddited and errors added. In addition, I&#39;m using <code>@Bean</code> just to get the method executed on the startup, I&#39;ll change it to <code>@PostConstruct</code> or something like that."}],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686925801,"creation_date":1686924780,"answer_id":76491025,"question_id":76490972,"body_markdown":"I think you should rewrite your code as\r\n```java\r\n\r\n@Configuration\r\npublic class ClientSSLConfig {\r\n    @Value(&quot;classpath:/client_cert&quot;)\r\n    private Resource resource;\r\n    @Autowired\r\n    private ResourceLoader resourceLoader;\r\n\r\n    @Bean\r\n    public void getCertificates(){\r\n        try{\r\n            // Resource resource = new ClassPathResource(&quot;/client_cert&quot;, YourSpringBootApplication.class);\r\n            // Resource resource = resourceLoader.getResource(&quot;/client_cert&quot;);\r\n            File folder = resource.getFile();\r\n\r\n            for(File file : folder.listFiles()){\r\n                loadCerts(file);\r\n            }\r\n\r\n        } catch ( URISyntaxException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```","title":"How to read an entire folder from Resources - Java 8 Spring Boot","body":"<p>I think you should rewrite your code as</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Configuration\npublic class ClientSSLConfig {\n    @Value(&quot;classpath:/client_cert&quot;)\n    private Resource resource;\n    @Autowired\n    private ResourceLoader resourceLoader;\n\n    @Bean\n    public void getCertificates(){\n        try{\n            // Resource resource = new ClassPathResource(&quot;/client_cert&quot;, YourSpringBootApplication.class);\n            // Resource resource = resourceLoader.getResource(&quot;/client_cert&quot;);\n            File folder = resource.getFile();\n\n            for(File file : folder.listFiles()){\n                loadCerts(file);\n            }\n\n        } catch ( URISyntaxException e) {\n            throw new RuntimeException(e);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686926438,"creation_date":1686926438,"answer_id":76491243,"question_id":76490972,"body_markdown":"This will allow you to read a file from a folder named properties in /resources. tweak to return the proper format.\r\nLook at https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html for usage of PathMatchingResourcePatternResolver. It can return back multiple files also. (In my case I just needed one.)\r\n\r\n\r\n    /**\r\n     * In Spring this will read a file from src/main/resources/properties folder\r\n     * @param fileName\r\n     * @return\r\n     * @throws Exception\r\n     */\r\n    public static String readFileInProperties(String fileName) throws Exception\r\n    {\r\n    \tString retData = null;\r\n    \ttry {\r\n    \t    // Get all the files under this inner resource folder: properties\r\n    \t    String scannedPackage = &quot;properties/&quot; + fileName;;\r\n    \t    PathMatchingResourcePatternResolver scanner = new PathMatchingResourcePatternResolver();\r\n    \t    Resource[] resources = scanner.getResources(scannedPackage);\r\n    \r\n    \t    if (resources == null || resources.length == 0)\r\n    \t    {\r\n    \t        log.warn(&quot;Warning: could not find any resources in this scanned package: &quot; + scannedPackage);\r\n    \t    }\r\n    \t    else \r\n    \t    {\r\n    \t    \tif(resources.length != 1)\r\n    \t    \t{\r\n    \t    \t\tlog.error(&quot;More than one file : &quot; + scannedPackage);\r\n    \t    \t\tthrow new RuntimeException(&quot;More than one file : &quot; + scannedPackage);\r\n    \t    \t}\r\n    \t        for (Resource resource : resources) \r\n    \t        {\r\n    \t            log.info(resource.getFilename());\r\n    \t            try(InputStream is = resource.getInputStream())\r\n    \t            {\r\n    \t                ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n    \t                int nRead;\r\n    \t                byte[] data = new byte[1024];\r\n    \t                while ((nRead = is.read(data, 0, data.length)) != -1) \r\n    \t                {\r\n    \t                    buffer.write(data, 0, nRead);\r\n    \t                }\r\n    \r\n    \t                buffer.flush();\r\n    \t                byte[] byteArray = buffer.toByteArray();\r\n    \t                retData = new String(byteArray, StandardCharsets.UTF_8);\r\n    \t            }\r\n    \t        }\r\n    \t    }\r\n    \t} \r\n    \tcatch (Exception e) \r\n    \t{\r\n    \t    throw new Exception(&quot;Failed to read the resources folder: &quot; + e.getMessage(), e);\r\n    \t}\r\n    \treturn retData;\r\n    }","title":"How to read an entire folder from Resources - Java 8 Spring Boot","body":"<p>This will allow you to read a file from a folder named properties in /resources. tweak to return the proper format.\nLook at <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/support/PathMatchingResourcePatternResolver.html</a> for usage of PathMatchingResourcePatternResolver. It can return back multiple files also. (In my case I just needed one.)</p>\n<pre><code>/**\n * In Spring this will read a file from src/main/resources/properties folder\n * @param fileName\n * @return\n * @throws Exception\n */\npublic static String readFileInProperties(String fileName) throws Exception\n{\n    String retData = null;\n    try {\n        // Get all the files under this inner resource folder: properties\n        String scannedPackage = &quot;properties/&quot; + fileName;;\n        PathMatchingResourcePatternResolver scanner = new PathMatchingResourcePatternResolver();\n        Resource[] resources = scanner.getResources(scannedPackage);\n\n        if (resources == null || resources.length == 0)\n        {\n            log.warn(&quot;Warning: could not find any resources in this scanned package: &quot; + scannedPackage);\n        }\n        else \n        {\n            if(resources.length != 1)\n            {\n                log.error(&quot;More than one file : &quot; + scannedPackage);\n                throw new RuntimeException(&quot;More than one file : &quot; + scannedPackage);\n            }\n            for (Resource resource : resources) \n            {\n                log.info(resource.getFilename());\n                try(InputStream is = resource.getInputStream())\n                {\n                    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n                    int nRead;\n                    byte[] data = new byte[1024];\n                    while ((nRead = is.read(data, 0, data.length)) != -1) \n                    {\n                        buffer.write(data, 0, nRead);\n                    }\n\n                    buffer.flush();\n                    byte[] byteArray = buffer.toByteArray();\n                    retData = new String(byteArray, StandardCharsets.UTF_8);\n                }\n            }\n        }\n    } \n    catch (Exception e) \n    {\n        throw new Exception(&quot;Failed to read the resources folder: &quot; + e.getMessage(), e);\n    }\n    return retData;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686936963,"creation_date":1686927746,"answer_id":76491426,"question_id":76490972,"body_markdown":"\r\n- use a `PathMatchingResourcePatternResolver` (resolver)\r\n- filter out all *.cert* files via `resolver.getResources(&quot;client_cert/*.cert&quot;)`\r\n \r\nThis will load all the certificates at startup\r\n```java\r\n\r\n@Component\r\nclass ClientCertComponent {\r\n\r\n\t@EventListener\r\n\tpublic void loadCerts(ApplicationReadyEvent event) throws IOException {\r\n\t\tPathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\r\n\t\tResource[] clientCerts = resolver.getResources(&quot;client_cert/*.cert&quot;);\r\n\t\tfor (Resource cert:clientCerts){\r\n\t\t\tloadCert(cert);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void loadCert(Resource cert){\r\n\t\t// load the client certificate\r\n\t}\r\n\r\n}\r\n\r\n```","title":"How to read an entire folder from Resources - Java 8 Spring Boot","body":"<ul>\n<li>use a <code>PathMatchingResourcePatternResolver</code> (resolver)</li>\n<li>filter out all <em>.cert</em> files via <code>resolver.getResources(&quot;client_cert/*.cert&quot;)</code></li>\n</ul>\n<p>This will load all the certificates at startup</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Component\nclass ClientCertComponent {\n\n    @EventListener\n    public void loadCerts(ApplicationReadyEvent event) throws IOException {\n        PathMatchingResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();\n        Resource[] clientCerts = resolver.getResources(&quot;client_cert/*.cert&quot;);\n        for (Resource cert:clientCerts){\n            loadCert(cert);\n        }\n    }\n\n    public void loadCert(Resource cert){\n        // load the client certificate\n    }\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76491426,"answer_count":3,"score":1,"last_activity_date":1686936963,"creation_date":1686924377,"question_id":76490972,"body_markdown":"I have a Spring Boot project with Java 8.\r\n\r\nMy project has a requirement to add certificates to Java Keystore due to some peculiarities.\r\n\r\nI have created a folder inside resource folders where I&#39;ll put all the certificates:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nMy spring boot application is compiled in a .jar file. \r\n\r\nI&#39;m trying to read the whole `client_cert` folder, so I&#39;ll be able to iterate over each file in it.\r\n\r\nBut are hard to make out how to do it.\r\n\r\nThis is how I&#39;m currently doing this:\r\n\r\n```java\r\n\r\npackage my.app.config;\r\n\r\n/**imports*/\r\n\r\n@Configuration\r\npublic class ClientSSLConfig {\r\n\r\n    @Bean\r\n    public void getCertificates(){\r\n        try{\r\n            \r\n            File folder = new File(this.getClass().getResource(&quot;/client_cert&quot;).toURI());\r\n\r\n            for(File file : folder.listFiles()){\r\n                loadCerts(file);\r\n            }\r\n\r\n        } catch ( URISyntaxException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n.....\r\n\r\n```\r\n\r\nThis is not working. \r\n\r\nIt Throws `java.lang.IllegalArgumentException: URI is not hierarchical`.\r\n\r\nIf I try different, using `getFile()` instead of `toURI()`, it kinda works, but the `listFiles()` returns null:\r\n\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n\r\nI tried to use `getResourceAsStream()` but I end up stuck in the same problem.\r\n\r\nSo, what am I missing?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/z6vgk.png\r\n  [2]: https://i.stack.imgur.com/e0T68.png\r\n  [3]: https://i.stack.imgur.com/ThGjx.png","title":"How to read an entire folder from Resources - Java 8 Spring Boot","body":"<p>I have a Spring Boot project with Java 8.</p>\n<p>My project has a requirement to add certificates to Java Keystore due to some peculiarities.</p>\n<p>I have created a folder inside resource folders where I'll put all the certificates:</p>\n<p><a href=\"https://i.stack.imgur.com/z6vgk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z6vgk.png\" alt=\"enter image description here\" /></a></p>\n<p>My spring boot application is compiled in a .jar file.</p>\n<p>I'm trying to read the whole <code>client_cert</code> folder, so I'll be able to iterate over each file in it.</p>\n<p>But are hard to make out how to do it.</p>\n<p>This is how I'm currently doing this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage my.app.config;\n\n/**imports*/\n\n@Configuration\npublic class ClientSSLConfig {\n\n    @Bean\n    public void getCertificates(){\n        try{\n            \n            File folder = new File(this.getClass().getResource(&quot;/client_cert&quot;).toURI());\n\n            for(File file : folder.listFiles()){\n                loadCerts(file);\n            }\n\n        } catch ( URISyntaxException e) {\n            throw new RuntimeException(e);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n.....\n\n</code></pre>\n<p>This is not working.</p>\n<p>It Throws <code>java.lang.IllegalArgumentException: URI is not hierarchical</code>.</p>\n<p>If I try different, using <code>getFile()</code> instead of <code>toURI()</code>, it kinda works, but the <code>listFiles()</code> returns null:</p>\n<p><a href=\"https://i.stack.imgur.com/e0T68.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e0T68.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried to use <code>getResourceAsStream()</code> but I end up stuck in the same problem.</p>\n<p>So, what am I missing?</p>\n"},{"tags":["java","rest","weblogic","primavera"],"answers":[{"tags":[],"owner":{"account_id":4375830,"reputation":51,"user_id":4360324,"display_name":"SkynetAdmin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682202789,"creation_date":1682202789,"answer_id":76082233,"question_id":75036531,"body_markdown":"Since I didn&#39;t get any response and I couldn&#39;t find any solution, I updated the Primavera environment to version 22.12. After this update, all endpoints are now available.","title":"Why does Primavera P6 EPPM REST API version 2112 not allow access to Spread REST Endpoints?","body":"<p>Since I didn't get any response and I couldn't find any solution, I updated the Primavera environment to version 22.12. After this update, all endpoints are now available.</p>\n"}],"owner":{"account_id":4375830,"reputation":51,"user_id":4360324,"display_name":"SkynetAdmin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":539,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76082233,"answer_count":1,"score":0,"last_activity_date":1686936046,"creation_date":1673043014,"question_id":75036531,"body_markdown":"I&#39;m developing a Java application to extract data from Oracle Primavera P6 EPPM 2112 by using the P6 EPPM REST API.\r\n\r\nI installed Weblogic, Primavera P6 EPPM version 21.12 with P6 WebServices, Microsoft SQL Server and loaded project data provided by customer.\r\n\r\nEverything is working fine and my Java application can get Project, WBS and Activity data through P6 EPPM REST API, the problem is that I need to load spread information but **all Spread REST endpoints don&#39;t exists in my server**. These Spread endpoints are available in P6 WebServices (SOAP) but not in the REST API service.\r\n\r\nI searched on Oracle&#39;s P6 EPPM REST API website documentation and the Spread REST endpoints are available with all other endpoints:\r\n\r\n[P6 EPPM Rest API - Spread REST Endpoints](https://docs.oracle.com/cd/F37125_01/English/Integration_Documentation/rest_api/api-spread.html )\r\n\r\nI have read all available P6 EPPM 2112 related documentation and searched online for this issue without success. I also posted a question on Oracle Communities website but still without answer.\r\n\r\nIs there any additional configuration I must do in order to enable these Spread endpoints or are they only available in newer P6 EPPM versions?\r\n\r\nIn short, why Spread REST endpoints are not available on my P6 EPPM 2112 server?\r\n\r\nI installed the full P6 package on three different machines (2 Windows 10 desktop clients and 1 Windows Server machine) to see if I made a mistake in the installation process, but Spread REST endpoints are not available on any of these installations.","title":"Why does Primavera P6 EPPM REST API version 2112 not allow access to Spread REST Endpoints?","body":"<p>I'm developing a Java application to extract data from Oracle Primavera P6 EPPM 2112 by using the P6 EPPM REST API.</p>\n<p>I installed Weblogic, Primavera P6 EPPM version 21.12 with P6 WebServices, Microsoft SQL Server and loaded project data provided by customer.</p>\n<p>Everything is working fine and my Java application can get Project, WBS and Activity data through P6 EPPM REST API, the problem is that I need to load spread information but <strong>all Spread REST endpoints don't exists in my server</strong>. These Spread endpoints are available in P6 WebServices (SOAP) but not in the REST API service.</p>\n<p>I searched on Oracle's P6 EPPM REST API website documentation and the Spread REST endpoints are available with all other endpoints:</p>\n<p><a href=\"https://docs.oracle.com/cd/F37125_01/English/Integration_Documentation/rest_api/api-spread.html\" rel=\"nofollow noreferrer\">P6 EPPM Rest API - Spread REST Endpoints</a></p>\n<p>I have read all available P6 EPPM 2112 related documentation and searched online for this issue without success. I also posted a question on Oracle Communities website but still without answer.</p>\n<p>Is there any additional configuration I must do in order to enable these Spread endpoints or are they only available in newer P6 EPPM versions?</p>\n<p>In short, why Spread REST endpoints are not available on my P6 EPPM 2112 server?</p>\n<p>I installed the full P6 package on three different machines (2 Windows 10 desktop clients and 1 Windows Server machine) to see if I made a mistake in the installation process, but Spread REST endpoints are not available on any of these installations.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1687050674,"post_id":76492192,"comment_id":134882807,"body_markdown":"Could we please get a [mcve]? Where does the jar live, how do you point the compiler to it / how do you build?","body":"Could we please get a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Where does the jar live, how do you point the compiler to it / how do you build?"},{"owner":{"account_id":28835636,"reputation":1,"user_id":22085105,"display_name":"Yronusa 2000"},"score":0,"creation_date":1687169968,"post_id":76492192,"comment_id":134894608,"body_markdown":"I&#39;m simply creating a new IntellijIdea project, add a new library using Files | Project Structures | Libairies | Add a library\n\nMy librairies folder looks like a single file which contains the PATH of the .jar (the path is correct I checked). I then import the class from automatic completion import, Intellij does detect the package but doesn&#39;t compile.","body":"I&#39;m simply creating a new IntellijIdea project, add a new library using Files | Project Structures | Libairies | Add a library  My librairies folder looks like a single file which contains the PATH of the .jar (the path is correct I checked). I then import the class from automatic completion import, Intellij does detect the package but doesn&#39;t compile."}],"answers":[{"tags":[],"owner":{"account_id":25653278,"reputation":29,"user_id":19420200,"display_name":"peterdsp"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1686935871,"creation_date":1686935871,"answer_id":76492370,"question_id":76492192,"body_markdown":"Oh, the dreaded &quot;package does not exist&quot; error when trying to import a JAR library into IntelliJ IDEA! Don&#39;t panic, we&#39;ve all been there. Let&#39;s tackle this together with a touch of humor. First, let&#39;s make sure that JAR library is not playing hide-and-seek with you. Check if it&#39;s in the right place, like your project&#39;s `lib` directory. Maybe it went on a little adventure and got lost somewhere else. Next, let&#39;s invite it to the party by adding it to your project&#39;s classpath. You know, it&#39;s like giving it a VIP pass to enter your code. Oh, and make sure the JAR library is compatible with your Java version, otherwise they won&#39;t be able to communicate properly. If things still don&#39;t work, let&#39;s try downloading the JAR library again. Maybe it just had a bad hair day and got a bit corrupted. And if all else fails, let&#39;s give it a fresh start with a new project and see if it behaves better there. And hey, don&#39;t be shy to reach out to the JAR library&#39;s author. Maybe they have some magical solution up their sleeve. Hang in there, we&#39;ll tame this &quot;package does not exist&quot; error in no time!","title":"IntellijIdea : &quot;package does not exist&quot; from imported jar library","body":"<p>Oh, the dreaded &quot;package does not exist&quot; error when trying to import a JAR library into IntelliJ IDEA! Don't panic, we've all been there. Let's tackle this together with a touch of humor. First, let's make sure that JAR library is not playing hide-and-seek with you. Check if it's in the right place, like your project's <code>lib</code> directory. Maybe it went on a little adventure and got lost somewhere else. Next, let's invite it to the party by adding it to your project's classpath. You know, it's like giving it a VIP pass to enter your code. Oh, and make sure the JAR library is compatible with your Java version, otherwise they won't be able to communicate properly. If things still don't work, let's try downloading the JAR library again. Maybe it just had a bad hair day and got a bit corrupted. And if all else fails, let's give it a fresh start with a new project and see if it behaves better there. And hey, don't be shy to reach out to the JAR library's author. Maybe they have some magical solution up their sleeve. Hang in there, we'll tame this &quot;package does not exist&quot; error in no time!</p>\n"}],"owner":{"account_id":28835636,"reputation":1,"user_id":22085105,"display_name":"Yronusa 2000"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686935871,"creation_date":1686934036,"question_id":76492192,"body_markdown":"Despite autocompleting working and no errors being shown, I can&#39;t used jar libraries imported in my IntellijIdea project, whatever the library or the project: compiling gives me a &quot;package xxx does not exist&quot;\r\n\r\nThe problem seems to be common but none of the solutions I finded on stack overflow or anywhere else worked (reinstalled intellijIdea, invalidate caches...). I ask again, maybe someone has a new magic solution.\r\n\r\nI&#39;m using the &quot;Minecraft development&quot; plugin (spigot API) and try to import another plugin as a dependency. IntellijIdea version: IntelliJ IDEA 2023.1.2 (Community Edition)\r\n","title":"IntellijIdea : &quot;package does not exist&quot; from imported jar library","body":"<p>Despite autocompleting working and no errors being shown, I can't used jar libraries imported in my IntellijIdea project, whatever the library or the project: compiling gives me a &quot;package xxx does not exist&quot;</p>\n<p>The problem seems to be common but none of the solutions I finded on stack overflow or anywhere else worked (reinstalled intellijIdea, invalidate caches...). I ask again, maybe someone has a new magic solution.</p>\n<p>I'm using the &quot;Minecraft development&quot; plugin (spigot API) and try to import another plugin as a dependency. IntellijIdea version: IntelliJ IDEA 2023.1.2 (Community Edition)</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1686938657,"post_id":76492352,"comment_id":134872486,"body_markdown":"Not something I know how to do, unfortunately. There are even some bugs related to this, like https://bugs.eclipse.org/bugs/show_bug.cgi?id=547052.","body":"Not something I know how to do, unfortunately. There are even some bugs related to this, like <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=547052\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=547052</a>."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":2,"creation_date":1686944412,"post_id":76492352,"comment_id":134873406,"body_markdown":"You can turn off the save actions in &quot;Java &gt; Editor &gt; Save Actions&quot; in the Preferences.","body":"You can turn off the save actions in &quot;Java &gt; Editor &gt; Save Actions&quot; in the Preferences."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1686949874,"post_id":76492352,"comment_id":134874144,"body_markdown":"@PetrJaneček Eclipse platform and JDT have moved to GitHub. [Make sure it has reported here, best with a pull request](https://github.com/eclipse-jdt/eclipse.jdt.ui/issues).","body":"@PetrJaneček Eclipse platform and JDT have moved to GitHub. <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.ui/issues\" rel=\"nofollow noreferrer\">Make sure it has reported here, best with a pull request</a>."},{"owner":{"account_id":4183692,"reputation":170,"user_id":3655454,"display_name":"feldentm"},"score":0,"creation_date":1687082874,"post_id":76492352,"comment_id":134884902,"body_markdown":"Turning off save actions is the only way I see to react to this, but it is not really a workaround as there can be actions in the save actions list that cannot be applied by hotkey, right? I mean the formatting itself isn&#39;t an issue. The entire code cleanup is.","body":"Turning off save actions is the only way I see to react to this, but it is not really a workaround as there can be actions in the save actions list that cannot be applied by hotkey, right? I mean the formatting itself isn&#39;t an issue. The entire code cleanup is."}],"owner":{"account_id":4183692,"reputation":170,"user_id":3655454,"display_name":"feldentm"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686935738,"creation_date":1686935738,"question_id":76492352,"body_markdown":"Is there a way to configure Eclipse to prevent save actions on a file unless it is free of compile errors, or the entire project is error-free?\r\nSometimes you need to save a file because you reached the end of the work day or similar, but are not done with your edits. This can be especially annoying if the file is ill-formed wrt. braces or has issues inside lambdas because it may cause formatting or import organization to throw away larger parts of your imports or even break code after your edits.","title":"Prevent eclipse to perform save actions if code does not compile","body":"<p>Is there a way to configure Eclipse to prevent save actions on a file unless it is free of compile errors, or the entire project is error-free?\nSometimes you need to save a file because you reached the end of the work day or similar, but are not done with your edits. This can be especially annoying if the file is ill-formed wrt. braces or has issues inside lambdas because it may cause formatting or import organization to throw away larger parts of your imports or even break code after your edits.</p>\n"},{"tags":["java","spring-boot","authentication","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1686935476,"post_id":76491649,"comment_id":134871956,"body_markdown":"please do not describe your code, post your code","body":"please do not describe your code, post your code"},{"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"score":0,"creation_date":1686935573,"post_id":76491649,"comment_id":134871979,"body_markdown":"I have just updated my question. Please recheck.","body":"I have just updated my question. Please recheck."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1686937162,"post_id":76491649,"comment_id":134872251,"body_markdown":"Why are you not using the built in jwt features that come with spring security that are documented under the JWT chapter in the spring security documentation? What is the point of having a security framework if you dont intend to use it?","body":"Why are you not using the built in jwt features that come with spring security that are documented under the JWT chapter in the spring security documentation? What is the point of having a security framework if you dont intend to use it?"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1686937211,"post_id":76491649,"comment_id":134872266,"body_markdown":"Also read the architecture chapter in the spring security docs as it documents how exception handling is done","body":"Also read the architecture chapter in the spring security docs as it documents how exception handling is done"}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1686935548,"creation_date":1686929630,"question_id":76491649,"body_markdown":"I am working on a Spring Boot application and have following requirements-\r\n1. I have two entities (admin) and (company) with separate tables.  \r\n2. I want login endpoints for both the entities using Spring Security.\r\n\r\nWhat I did-  \r\nI created two Authentication providers (AdminAuthenticationProvider and CompanyAuthenticationProvider). I added them both to the authentication manager. The AuthenticationManager.authenticate method is used in the login methods. The AdminAuthenticationProvider uses data from admin table and CompanyAuthenticationProvider from company table.  \r\n**AdminAuthenticationProvider.java-**\r\n```\r\n@Component\r\npublic class AdminAuthenticationProvider implements AuthenticationProvider {\r\n\r\n   @Autowired\r\n   CustomAdminDetailsService adminDetailsService;\r\n\r\n    @Autowired\r\n    PasswordEncoder passwordEncoder;\r\n\r\n    //Authentication manager authenticate() method calls this method\r\n    @Override\r\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n      String username=String.valueOf(authentication.getPrincipal());\r\n      String password=String.valueOf(authentication.getCredentials());\r\n      \r\n      UserDetails adminDetails=adminDetailsService.loadUserByUsername(username);\r\n      if(adminDetails!=null){\r\n        if(passwordEncoder.matches(password, adminDetails.getPassword())){\r\n            //if the passwords match we can return authentication object (authenticated(true))\r\n            UsernamePasswordAuthenticationToken token=new UsernamePasswordAuthenticationToken(username, password,new ArrayList&lt;&gt;());\r\n            return token;\r\n        }\r\n      }\r\n\r\n      throw new BadCredentialsException(&quot;Wrong Credentials&quot;);\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(Class&lt;?&gt; authentication) {\r\n        //We will support UsernamePasswordAuthenticationToken type of Authentication token\r\n        //If the incoming authentication object is of this type then return true\r\n        return UsernamePasswordAuthenticationToken.class.equals(authentication);\r\n    }\r\n    \r\n}\r\n```\r\n**CompanyAuthenticationProvider.java-**\r\n```\r\n@Component\r\npublic class CompanyAuthenticationProvider implements AuthenticationProvider {\r\n\r\n    @Autowired\r\n    private CustomCompanyDetailsService companyDetailsService;\r\n\r\n    @Autowired\r\n    PasswordEncoder passwordEncoder;\r\n\r\n    // Authentication manager authenticate() method calls this method\r\n    @Override\r\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n        String username = String.valueOf(authentication.getPrincipal());\r\n        String password = String.valueOf(authentication.getCredentials());\r\n\r\n        UserDetails companyDetails = companyDetailsService.loadUserByUsername(username);\r\n        if (companyDetails != null) {\r\n            if (passwordEncoder.matches(password, companyDetails.getPassword())) {\r\n                // if the passwords match we can return authentication object\r\n                // (authenticated(true))\r\n                UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(username, password,\r\n                        new ArrayList&lt;&gt;());\r\n                return token;\r\n            }\r\n        }\r\n\r\n        throw new BadCredentialsException(&quot;Wrong Credentials&quot;);\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(Class&lt;?&gt; authentication) {\r\n        // We will support UsernamePasswordAuthenticationToken type of Authentication\r\n        // token\r\n        // If the incoming authentication object is of this type then return true\r\n        return UsernamePasswordAuthenticationToken.class.equals(authentication);\r\n    }\r\n\r\n}\r\n```\r\n\r\n**SecurityConfig-**\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableWebMvc \r\n@EnableMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfigs {\r\n    public static final String[] PUBLIC_URLS = {\r\n\r\n        //for admin\r\n           &quot;/admin/register&quot;,\r\n           &quot;/admin/login&quot;,\r\n\r\n        //for company\r\n        &quot;/company/login&quot;,\r\n\r\n        //email\r\n        &quot;/email/**&quot;\r\n\r\n    };\r\n\r\n    @Autowired\r\n    private AuthenticationEntryPoint unauthorizedHandler;\r\n    @Autowired\r\n    private JwtAuthenticationFilter jwtAuthenticationFilter;\r\n    @Autowired\r\n    CompanyAuthenticationProvider companyAuthenticationProvider;\r\n\r\n    @Autowired\r\n    AdminAuthenticationProvider adminAuthenticationProvider;\r\n\r\n    \r\n\r\n    @Autowired\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http,AuthenticationManager authenticationManager) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeHttpRequests() // authorize http requests\r\n                .requestMatchers(PUBLIC_URLS)\r\n                .permitAll()\r\n                .anyRequest()\r\n                .authenticated() // authenticate\r\n                .and()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(unauthorizedHandler)\r\n                .and()\r\n                .sessionManagement()\r\n                \r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\n        http.addFilterBefore(this.jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\r\n        http.authenticationManager(authenticationManager);\r\n        return http.build();\r\n    }\r\n\r\n    \r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(HttpSecurity http) throws Exception {\r\n        AuthenticationManagerBuilder authenticationManagerBuilder = http\r\n                .getSharedObject(AuthenticationManagerBuilder.class);\r\n        authenticationManagerBuilder\r\n        // .authenticationProvider(companyAuthenticationProvider)\r\n        .authenticationProvider(adminAuthenticationProvider);\r\n\r\n        return authenticationManagerBuilder.build();\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class JwtAuthenticationEntryPoint implements AuthenticationEntryPoint{\r\n   \r\n    @Autowired\r\n    @Qualifier(&quot;handlerExceptionResolver&quot;)\r\n    private HandlerExceptionResolver resolver;\r\n\r\n    @Override\r\n    public void commence(HttpServletRequest request, HttpServletResponse response,\r\n            AuthenticationException authException) throws IOException, ServletException {\r\n                resolver.resolveException(request, response, null, authException);\r\n    }\r\n    \r\n}\r\n```\r\nProblem-  \r\n1. In case of wrong username or password the authentication providers are invoked infinitely repeatedly. (Although I am throwing a BadCredentialsException in the authentication providers.)\r\n2. My second question is how can I intercept the BadCredentialsException in the providers to notify users of wrong username or password?\r\n\r\nPlease help!\r\n","title":"Custom authentication providers called infinitely: Spring Security","body":"<p>I am working on a Spring Boot application and have following requirements-</p>\n<ol>\n<li>I have two entities (admin) and (company) with separate tables.</li>\n<li>I want login endpoints for both the entities using Spring Security.</li>\n</ol>\n<p>What I did-<br />\nI created two Authentication providers (AdminAuthenticationProvider and CompanyAuthenticationProvider). I added them both to the authentication manager. The AuthenticationManager.authenticate method is used in the login methods. The AdminAuthenticationProvider uses data from admin table and CompanyAuthenticationProvider from company table.<br />\n<strong>AdminAuthenticationProvider.java-</strong></p>\n<pre><code>@Component\npublic class AdminAuthenticationProvider implements AuthenticationProvider {\n\n   @Autowired\n   CustomAdminDetailsService adminDetailsService;\n\n    @Autowired\n    PasswordEncoder passwordEncoder;\n\n    //Authentication manager authenticate() method calls this method\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n      String username=String.valueOf(authentication.getPrincipal());\n      String password=String.valueOf(authentication.getCredentials());\n      \n      UserDetails adminDetails=adminDetailsService.loadUserByUsername(username);\n      if(adminDetails!=null){\n        if(passwordEncoder.matches(password, adminDetails.getPassword())){\n            //if the passwords match we can return authentication object (authenticated(true))\n            UsernamePasswordAuthenticationToken token=new UsernamePasswordAuthenticationToken(username, password,new ArrayList&lt;&gt;());\n            return token;\n        }\n      }\n\n      throw new BadCredentialsException(&quot;Wrong Credentials&quot;);\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        //We will support UsernamePasswordAuthenticationToken type of Authentication token\n        //If the incoming authentication object is of this type then return true\n        return UsernamePasswordAuthenticationToken.class.equals(authentication);\n    }\n    \n}\n</code></pre>\n<p><strong>CompanyAuthenticationProvider.java-</strong></p>\n<pre><code>@Component\npublic class CompanyAuthenticationProvider implements AuthenticationProvider {\n\n    @Autowired\n    private CustomCompanyDetailsService companyDetailsService;\n\n    @Autowired\n    PasswordEncoder passwordEncoder;\n\n    // Authentication manager authenticate() method calls this method\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        String username = String.valueOf(authentication.getPrincipal());\n        String password = String.valueOf(authentication.getCredentials());\n\n        UserDetails companyDetails = companyDetailsService.loadUserByUsername(username);\n        if (companyDetails != null) {\n            if (passwordEncoder.matches(password, companyDetails.getPassword())) {\n                // if the passwords match we can return authentication object\n                // (authenticated(true))\n                UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(username, password,\n                        new ArrayList&lt;&gt;());\n                return token;\n            }\n        }\n\n        throw new BadCredentialsException(&quot;Wrong Credentials&quot;);\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        // We will support UsernamePasswordAuthenticationToken type of Authentication\n        // token\n        // If the incoming authentication object is of this type then return true\n        return UsernamePasswordAuthenticationToken.class.equals(authentication);\n    }\n\n}\n</code></pre>\n<p><strong>SecurityConfig-</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableWebMvc \n@EnableMethodSecurity(prePostEnabled = true)\npublic class SecurityConfigs {\n    public static final String[] PUBLIC_URLS = {\n\n        //for admin\n           &quot;/admin/register&quot;,\n           &quot;/admin/login&quot;,\n\n        //for company\n        &quot;/company/login&quot;,\n\n        //email\n        &quot;/email/**&quot;\n\n    };\n\n    @Autowired\n    private AuthenticationEntryPoint unauthorizedHandler;\n    @Autowired\n    private JwtAuthenticationFilter jwtAuthenticationFilter;\n    @Autowired\n    CompanyAuthenticationProvider companyAuthenticationProvider;\n\n    @Autowired\n    AdminAuthenticationProvider adminAuthenticationProvider;\n\n    \n\n    @Autowired\n    private PasswordEncoder passwordEncoder;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http,AuthenticationManager authenticationManager) throws Exception {\n        http.csrf().disable()\n                .authorizeHttpRequests() // authorize http requests\n                .requestMatchers(PUBLIC_URLS)\n                .permitAll()\n                .anyRequest()\n                .authenticated() // authenticate\n                .and()\n                .exceptionHandling()\n                .authenticationEntryPoint(unauthorizedHandler)\n                .and()\n                .sessionManagement()\n                \n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        http.addFilterBefore(this.jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\n        http.authenticationManager(authenticationManager);\n        return http.build();\n    }\n\n    \n\n    @Bean\n    public AuthenticationManager authenticationManager(HttpSecurity http) throws Exception {\n        AuthenticationManagerBuilder authenticationManagerBuilder = http\n                .getSharedObject(AuthenticationManagerBuilder.class);\n        authenticationManagerBuilder\n        // .authenticationProvider(companyAuthenticationProvider)\n        .authenticationProvider(adminAuthenticationProvider);\n\n        return authenticationManagerBuilder.build();\n    }\n}\n</code></pre>\n<pre><code>public class JwtAuthenticationEntryPoint implements AuthenticationEntryPoint{\n   \n    @Autowired\n    @Qualifier(&quot;handlerExceptionResolver&quot;)\n    private HandlerExceptionResolver resolver;\n\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n            AuthenticationException authException) throws IOException, ServletException {\n                resolver.resolveException(request, response, null, authException);\n    }\n    \n}\n</code></pre>\n<p>Problem-</p>\n<ol>\n<li>In case of wrong username or password the authentication providers are invoked infinitely repeatedly. (Although I am throwing a BadCredentialsException in the authentication providers.)</li>\n<li>My second question is how can I intercept the BadCredentialsException in the providers to notify users of wrong username or password?</li>\n</ol>\n<p>Please help!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9628,"page":364,"page_size":100}
