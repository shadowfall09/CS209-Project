{"items":[{"tags":["java","class","static","methods","synchronized"],"answers":[{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"down_vote_count":15,"up_vote_count":146,"is_accepted":true,"score":131,"last_activity_date":1477987353,"creation_date":1231808010,"answer_id":437627,"question_id":437620,"body_markdown":"&gt;  Since a static method has no associated object,  *will the synchronized keyword lock on the class, instead of the object?*\r\n\r\nYes. :) ","title":"Java synchronized static methods: lock on object or class","body":"<blockquote>\n  <p>Since a static method has no associated object,  <em>will the synchronized keyword lock on the class, instead of the object?</em></p>\n</blockquote>\n\n<p>Yes. :) </p>\n"},{"tags":[],"owner":{"account_id":9269,"reputation":37307,"user_id":17041,"display_name":"Cowan"},"down_vote_count":0,"up_vote_count":203,"is_accepted":false,"score":203,"last_activity_date":1587720405,"creation_date":1231815521,"answer_id":437821,"question_id":437620,"body_markdown":"Just to add a little detail to Oscar&#39;s (pleasingly succinct!) answer, the relevant section on the Java Language Specification is [8.4.3.6, &#39;synchronized Methods&#39;][1]:\r\n\r\n  \r\n\r\n&gt; A synchronized method acquires a monitor ([&#167;17.1][2]) before it executes. For a class (static) method, the monitor associated with the Class object for the method&#39;s class is used. For an instance method, the monitor associated with this (the object for which the method was invoked) is used. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.1","title":"Java synchronized static methods: lock on object or class","body":"<p>Just to add a little detail to Oscar's (pleasingly succinct!) answer, the relevant section on the Java Language Specification is <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6\" rel=\"noreferrer\">8.4.3.6, 'synchronized Methods'</a>:</p>\n\n<blockquote>\n  <p>A synchronized method acquires a monitor (<a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.1\" rel=\"noreferrer\">§17.1</a>) before it executes. For a class (static) method, the monitor associated with the Class object for the method's class is used. For an instance method, the monitor associated with this (the object for which the method was invoked) is used. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":15857,"reputation":10459,"user_id":1440720,"display_name":"jfpoilpret"},"down_vote_count":0,"up_vote_count":81,"is_accepted":false,"score":81,"last_activity_date":1231844563,"creation_date":1231844563,"answer_id":438626,"question_id":437620,"body_markdown":"One point you have to be careful about (several programmers generally fall in that trap) is that there is no link between synchronized static methods and sync&#39;ed non static methods, ie:\r\n\r\n    class A {\r\n        static synchronized f() {...}\r\n        synchronized g() {...}\r\n    }\r\n\r\nMain:\r\n\r\n    A a = new A();\r\n\r\nThread 1:\r\n\r\n    A.f();\r\n\r\nThread 2:\r\n\r\n    a.g();\r\n\r\nf() and g() are not synchronized with each other and thus can execute totally concurrently.\r\n\r\n","title":"Java synchronized static methods: lock on object or class","body":"<p>One point you have to be careful about (several programmers generally fall in that trap) is that there is no link between synchronized static methods and sync'ed non static methods, ie:</p>\n\n<pre><code>class A {\n    static synchronized f() {...}\n    synchronized g() {...}\n}\n</code></pre>\n\n<p>Main:</p>\n\n<pre><code>A a = new A();\n</code></pre>\n\n<p>Thread 1:</p>\n\n<pre><code>A.f();\n</code></pre>\n\n<p>Thread 2:</p>\n\n<pre><code>a.g();\n</code></pre>\n\n<p>f() and g() are not synchronized with each other and thus can execute totally concurrently.</p>\n"},{"tags":[],"owner":{"display_name":"user267405"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1578559140,"creation_date":1265404752,"answer_id":2210504,"question_id":437620,"body_markdown":"Unless you implement g() as follows:\r\n\r\n    g() {\r\n        synchronized(getClass()) {\r\n            ...\r\n        }\r\n    }\r\n\r\nI find this pattern useful also when I want to implement mutual exclusion between different instances of the object (which is needed when accesing an external resource, for example).","title":"Java synchronized static methods: lock on object or class","body":"<p>Unless you implement g() as follows:</p>\n\n<pre><code>g() {\n    synchronized(getClass()) {\n        ...\n    }\n}\n</code></pre>\n\n<p>I find this pattern useful also when I want to implement mutual exclusion between different instances of the object (which is needed when accesing an external resource, for example).</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477987598,"creation_date":1477987598,"answer_id":40356196,"question_id":437620,"body_markdown":"Have a look at oracle documentation page on  [Intrinsic Locks and Synchronization][1]\r\n\r\n&gt; You might wonder what happens when a static synchronized method is invoked, since a static method is associated with a class, not an object. **In this case, the thread acquires the intrinsic lock for the Class object associated with the class**. **Thus access to class&#39;s static fields is controlled by a lock that&#39;s distinct from the lock for any instance of the class**.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html","title":"Java synchronized static methods: lock on object or class","body":"<p>Have a look at oracle documentation page on  <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html\" rel=\"nofollow\">Intrinsic Locks and Synchronization</a></p>\n\n<blockquote>\n  <p>You might wonder what happens when a static synchronized method is invoked, since a static method is associated with a class, not an object. <strong>In this case, the thread acquires the intrinsic lock for the Class object associated with the class</strong>. <strong>Thus access to class's static fields is controlled by a lock that's distinct from the lock for any instance of the class</strong>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5947498,"reputation":110,"user_id":4676599,"display_name":"Pahansith Gunathilake"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1478667300,"creation_date":1478667300,"answer_id":40500366,"question_id":437620,"body_markdown":"A static method also has an associated object. It belongs to Class.class file in JDK toolkit. When the .class file load into the ram, the Class.class creates a instance of it called template object.\r\n\r\nEg :- when you try to create object from existing customer class like\r\n\r\n    Customer c = new Customer();\r\nThe Customer.class load into RAM. In that moment Class.class in JDK toolkit creates an Object called Template object and load that Customer.class into that template object.Static members of that Customer.class become attributes and methods in that template object.\r\n\r\nSo a static method or attribute also has an object","title":"Java synchronized static methods: lock on object or class","body":"<p>A static method also has an associated object. It belongs to Class.class file in JDK toolkit. When the .class file load into the ram, the Class.class creates a instance of it called template object.</p>\n\n<p>Eg :- when you try to create object from existing customer class like</p>\n\n<pre><code>Customer c = new Customer();\n</code></pre>\n\n<p>The Customer.class load into RAM. In that moment Class.class in JDK toolkit creates an Object called Template object and load that Customer.class into that template object.Static members of that Customer.class become attributes and methods in that template object.</p>\n\n<p>So a static method or attribute also has an object</p>\n"},{"tags":[],"owner":{"account_id":10964838,"reputation":1,"user_id":8056890,"display_name":"Pragya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700704518,"creation_date":1495594244,"answer_id":44148139,"question_id":437620,"body_markdown":"&gt; For those who are not familiar static synchronized method locked on class object e.g. for string class, it&#39;s `String.class` while instance synchronized method locks on the current instance of Object denoted by “this” keyword in Java. \r\n&gt; \r\n&gt; Since both of these objects are different they have a different lock so while one thread is executing the static synchronized method, the other thread in java doesn’t need to wait for that thread to return instead it will acquire a separate lock denoted byte .class literal and enter into the static synchronized method. \r\n\r\nSource: https://javarevisited.blogspot.com/2012/03/mixing-static-and-non-static.html","title":"Java synchronized static methods: lock on object or class","body":"<blockquote>\n<p>For those who are not familiar static synchronized method locked on class object e.g. for string class, it's <code>String.class</code> while instance synchronized method locks on the current instance of Object denoted by “this” keyword in Java.</p>\n<p>Since both of these objects are different they have a different lock so while one thread is executing the static synchronized method, the other thread in java doesn’t need to wait for that thread to return instead it will acquire a separate lock denoted byte .class literal and enter into the static synchronized method.</p>\n</blockquote>\n<p>Source: <a href=\"https://javarevisited.blogspot.com/2012/03/mixing-static-and-non-static.html\" rel=\"nofollow noreferrer\">https://javarevisited.blogspot.com/2012/03/mixing-static-and-non-static.html</a></p>\n"},{"tags":[],"owner":{"account_id":1189417,"reputation":30924,"user_id":1162620,"accept_rate":70,"display_name":"Ravi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1518552768,"creation_date":1502599557,"answer_id":45657164,"question_id":437620,"body_markdown":"Below examples gives more clarity between class and object lock, hope below example will help others as well :)\r\n\r\nFor example we have below methods one acquire class and other acquire object lock :\r\n\r\n    public class MultiThread {\r\n\r\n        public static synchronized void staticLock() throws InterruptedException {\r\n            for (int i = 0; i &lt; 10; i++) {\r\n                Thread.sleep(100);\r\n                System.out.println(Thread.currentThread().getName() + &quot; &quot; + i);\r\n            }\r\n        }\r\n\r\n        public synchronized void objLock() throws InterruptedException {\r\n            for (int i = 0; i &lt; 10; i++) {\r\n                Thread.sleep(100);\r\n                System.out.println(Thread.currentThread().getName() + &quot; &quot; + i);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nSo, now we can have following scenarios :\r\n\r\n 1. When threads using **same Object** tries to access `objLock` **OR** `staticLock` method same time (i.e. both threads are trying to access same method)\r\n\r\n        Thread-0 0\r\n        Thread-0 1\r\n        Thread-0 2\r\n        Thread-0 3\r\n        Thread-0 4\r\n        Thread-1 0\r\n        Thread-1 1\r\n        Thread-1 2\r\n        Thread-1 3\r\n        Thread-1 4\r\n\r\n 2. When threads using **same Object** tries to access `staticLock` and `objLock` methods same time (tries accessing different methods)\r\n\r\n        Thread-0 0\r\n        Thread-1 0\r\n        Thread-0 1\r\n        Thread-1 1\r\n        Thread-0 2\r\n        Thread-1 2\r\n        Thread-1 3\r\n        Thread-0 3\r\n        Thread-0 4\r\n        Thread-1 4\r\n\r\n 3. When threads using **different Object** tries to access `staticLock` method\r\n\r\n        Thread-0 0\r\n        Thread-0 1\r\n        Thread-0 2\r\n        Thread-0 3\r\n        Thread-0 4\r\n        Thread-1 0\r\n        Thread-1 1\r\n        Thread-1 2\r\n        Thread-1 3\r\n        Thread-1 4\r\n\r\n 4. When threads using **different Object** tries to access `objLock` method\r\n\r\n        Thread-0 0\r\n        Thread-1 0\r\n        Thread-0 1\r\n        Thread-1 1\r\n        Thread-0 2\r\n        Thread-1 2\r\n        Thread-1 3\r\n        Thread-0 3\r\n        Thread-0 4\r\n        Thread-1 4","title":"Java synchronized static methods: lock on object or class","body":"<p>Below examples gives more clarity between class and object lock, hope below example will help others as well :)</p>\n\n<p>For example we have below methods one acquire class and other acquire object lock :</p>\n\n<pre><code>public class MultiThread {\n\n    public static synchronized void staticLock() throws InterruptedException {\n        for (int i = 0; i &lt; 10; i++) {\n            Thread.sleep(100);\n            System.out.println(Thread.currentThread().getName() + \" \" + i);\n        }\n    }\n\n    public synchronized void objLock() throws InterruptedException {\n        for (int i = 0; i &lt; 10; i++) {\n            Thread.sleep(100);\n            System.out.println(Thread.currentThread().getName() + \" \" + i);\n        }\n    }\n}\n</code></pre>\n\n<p>So, now we can have following scenarios :</p>\n\n<ol>\n<li><p>When threads using <strong>same Object</strong> tries to access <code>objLock</code> <strong>OR</strong> <code>staticLock</code> method same time (i.e. both threads are trying to access same method)</p>\n\n<pre><code>Thread-0 0\nThread-0 1\nThread-0 2\nThread-0 3\nThread-0 4\nThread-1 0\nThread-1 1\nThread-1 2\nThread-1 3\nThread-1 4\n</code></pre></li>\n<li><p>When threads using <strong>same Object</strong> tries to access <code>staticLock</code> and <code>objLock</code> methods same time (tries accessing different methods)</p>\n\n<pre><code>Thread-0 0\nThread-1 0\nThread-0 1\nThread-1 1\nThread-0 2\nThread-1 2\nThread-1 3\nThread-0 3\nThread-0 4\nThread-1 4\n</code></pre></li>\n<li><p>When threads using <strong>different Object</strong> tries to access <code>staticLock</code> method</p>\n\n<pre><code>Thread-0 0\nThread-0 1\nThread-0 2\nThread-0 3\nThread-0 4\nThread-1 0\nThread-1 1\nThread-1 2\nThread-1 3\nThread-1 4\n</code></pre></li>\n<li><p>When threads using <strong>different Object</strong> tries to access <code>objLock</code> method</p>\n\n<pre><code>Thread-0 0\nThread-1 0\nThread-0 1\nThread-1 1\nThread-0 2\nThread-1 2\nThread-1 3\nThread-0 3\nThread-0 4\nThread-1 4\n</code></pre></li>\n</ol>\n"}],"owner":{"account_id":17315,"reputation":15891,"user_id":38663,"accept_rate":27,"display_name":"jbu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101420,"favorite_count":0,"down_vote_count":0,"up_vote_count":150,"accepted_answer_id":437627,"answer_count":8,"score":150,"last_activity_date":1700704518,"creation_date":1231807719,"question_id":437620,"body_markdown":"The [Java documentation][1] says: \r\n\r\n&gt; it is not possible for two invocations of synchronized methods on the same object to interleave.\r\n\r\nWhat does this mean for a static method?  Since a static method has no associated object, will the synchronized keyword lock on the class, instead of the object?\r\n\r\n[1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html","title":"Java synchronized static methods: lock on object or class","body":"<p>The <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow noreferrer\">Java documentation</a> says:</p>\n<blockquote>\n<p>it is not possible for two invocations of synchronized methods on the same object to interleave.</p>\n</blockquote>\n<p>What does this mean for a static method?  Since a static method has no associated object, will the synchronized keyword lock on the class, instead of the object?</p>\n"},{"tags":["java","spring-boot","oauth-2.0"],"comments":[{"owner":{"account_id":3711737,"reputation":2137,"user_id":3088897,"accept_rate":69,"display_name":"Minisha"},"score":0,"creation_date":1581342258,"post_id":60151747,"comment_id":106389228,"body_markdown":"I followed this repo for setting the config: https://github.com/mariubog/oauth-client-sample/blob/master/src/main/java/oauth/client/demo/config/OauthClientConfig.java","body":"I followed this repo for setting the config: <a href=\"https://github.com/mariubog/oauth-client-sample/blob/master/src/main/java/oauth/client/demo/config/OauthClientConfig.java\" rel=\"nofollow noreferrer\">github.com/mariubog/oauth-client-sample/blob/master/src/main&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":2734023,"reputation":2572,"user_id":2357083,"display_name":"Abbin Varghese"},"score":0,"creation_date":1581342397,"post_id":60151747,"comment_id":106389324,"body_markdown":"It can happen if the token response(especially the expires_in) is not in the default format. Did you verify that ?","body":"It can happen if the token response(especially the expires_in) is not in the default format. Did you verify that ?"},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1581342641,"post_id":60151747,"comment_id":106389468,"body_markdown":"Which version of Spring Boot are you working with?","body":"Which version of Spring Boot are you working with?"},{"owner":{"account_id":3711737,"reputation":2137,"user_id":3088897,"accept_rate":69,"display_name":"Minisha"},"score":0,"creation_date":1581343080,"post_id":60151747,"comment_id":106389720,"body_markdown":"org.springframework.security.oauth:spring-security-oauth2 is the OAuthClient and sprinboot version: 2.1.8.RELEASE","body":"org.springframework.security.oauth:spring-security-oauth2 is the OAuthClient and sprinboot version: 2.1.8.RELEASE"},{"owner":{"account_id":3711737,"reputation":2137,"user_id":3088897,"accept_rate":69,"display_name":"Minisha"},"score":0,"creation_date":1581343117,"post_id":60151747,"comment_id":106389746,"body_markdown":"@Abbin It is in the default format milliseconds","body":"@Abbin It is in the default format milliseconds"},{"owner":{"account_id":3711737,"reputation":2137,"user_id":3088897,"accept_rate":69,"display_name":"Minisha"},"score":0,"creation_date":1581343396,"post_id":60151747,"comment_id":106389896,"body_markdown":"Do you guys have a example code in github, that I could follow?","body":"Do you guys have a example code in github, that I could follow?"},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1581343582,"post_id":60151747,"comment_id":106390003,"body_markdown":"You could give Spring Boot 2.2 a try if you are able, there have been several changes to the OAUTH2 implementation in that version and a google seems to indicate that token refreshing may work more out of the box when upgrading to that version.","body":"You could give Spring Boot 2.2 a try if you are able, there have been several changes to the OAUTH2 implementation in that version and a google seems to indicate that token refreshing may work more out of the box when upgrading to that version."},{"owner":{"account_id":3711737,"reputation":2137,"user_id":3088897,"accept_rate":69,"display_name":"Minisha"},"score":0,"creation_date":1581343762,"post_id":60151747,"comment_id":106390120,"body_markdown":"Its uses webFlux I am not using webFlux in my project yet. And its more for reactive programing","body":"Its uses webFlux I am not using webFlux in my project yet. And its more for reactive programing"},{"owner":{"account_id":3711737,"reputation":2137,"user_id":3088897,"accept_rate":69,"display_name":"Minisha"},"score":0,"creation_date":1582336497,"post_id":60151747,"comment_id":106754062,"body_markdown":"I use client-credentials, which doesnt support refresh token, I looked into the spring code and found it","body":"I use client-credentials, which doesnt support refresh token, I looked into the spring code and found it"}],"answers":[{"tags":[],"owner":{"account_id":3711737,"reputation":2137,"user_id":3088897,"accept_rate":69,"display_name":"Minisha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582617010,"creation_date":1582336649,"answer_id":60348348,"question_id":60151747,"body_markdown":"ClientCredentialsAccessTokenProvider doesn&#39;t not support &quot;Refresh Token&quot; according to spring boot oAuth implementation.\r\n\r\nI fixed the problem by checking the expiry and setting the token in oAuthContext to null before making the rest call.\r\n\r\n \r\n\r\n      private void checkTokenExpiry() {\r\n            OAuth2ClientContext oAuth2ClientContext = oAuth2RestOperations.getOAuth2ClientContext();\r\n            if (oAuth2ClientContext == null) {\r\n                return;\r\n            }\r\n            OAuth2AccessToken accessToken = oAuth2ClientContext.getAccessToken();\r\n            if (accessToken != null &amp;&amp; (accessToken.getExpiresIn() &gt; 5000 || accessToken\r\n                .isExpired())) { //5 seconds\r\n                log.info(&quot;Token expired&quot;);\r\n                oAuth2RestOperations.getOAuth2ClientContext()\r\n                    .setAccessToken(null); //to re-fetch the token\r\n            }\r\n        }\r\n\r\n","title":"OAuth2RestTemplate doesnt refresh the token after it expired","body":"<p>ClientCredentialsAccessTokenProvider doesn't not support \"Refresh Token\" according to spring boot oAuth implementation.</p>\n\n<p>I fixed the problem by checking the expiry and setting the token in oAuthContext to null before making the rest call.</p>\n\n<pre><code>  private void checkTokenExpiry() {\n        OAuth2ClientContext oAuth2ClientContext = oAuth2RestOperations.getOAuth2ClientContext();\n        if (oAuth2ClientContext == null) {\n            return;\n        }\n        OAuth2AccessToken accessToken = oAuth2ClientContext.getAccessToken();\n        if (accessToken != null &amp;&amp; (accessToken.getExpiresIn() &gt; 5000 || accessToken\n            .isExpired())) { //5 seconds\n            log.info(\"Token expired\");\n            oAuth2RestOperations.getOAuth2ClientContext()\n                .setAccessToken(null); //to re-fetch the token\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":3711737,"reputation":2137,"user_id":3088897,"accept_rate":69,"display_name":"Minisha"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":920,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1700703744,"creation_date":1581342199,"question_id":60151747,"body_markdown":"I am using Spring OAuth2RestTemplate and the token is not refreshed after its expired. Below is my token provider. What am I missing? Any pointers would really help. \r\n\r\n    @Bean\r\n            public AccessTokenProvider clientAccessTokenProvider() {\r\n                ClientCredentialsAccessTokenProvider accessTokenProvider = new ClientCredentialsAccessTokenProvider();\r\n                accessTokenProvider.setRequestFactory(getClientHttpRequestFactory());\r\n                return accessTokenProvider;\r\n            }\r\n\r\n","title":"OAuth2RestTemplate doesnt refresh the token after it expired","body":"<p>I am using Spring OAuth2RestTemplate and the token is not refreshed after its expired. Below is my token provider. What am I missing? Any pointers would really help. </p>\n\n<pre><code>@Bean\n        public AccessTokenProvider clientAccessTokenProvider() {\n            ClientCredentialsAccessTokenProvider accessTokenProvider = new ClientCredentialsAccessTokenProvider();\n            accessTokenProvider.setRequestFactory(getClientHttpRequestFactory());\n            return accessTokenProvider;\n        }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","spring-security-oauth2"],"answers":[{"tags":[],"owner":{"account_id":10074768,"reputation":3044,"user_id":7650222,"display_name":"Anar Sultanov"},"down_vote_count":2,"up_vote_count":64,"is_accepted":true,"score":62,"last_activity_date":1585647647,"creation_date":1574443431,"answer_id":58999002,"question_id":58982286,"body_markdown":"OAuth 2.0 Client features of Spring Security 5.2.x do not support `RestTemplate`, but only `WebClient`. See [Spring Security Reference][1]:\r\n\r\n&gt; **HTTP Client support**\r\n&gt; \r\n&gt; * `WebClient` integration for Servlet Environments (for requesting\r\n&gt; protected resources)\r\n\r\n\r\nIn addition, `RestTemplate` will be deprecated in a future version. See [RestTemplate javadoc][2]:\r\n\r\n&gt; **NOTE:** As of 5.0, the non-blocking, reactive\r\n&gt; `org.springframework.web.reactive.client.WebClient` offers a modern\r\n&gt; alternative to the `RestTemplate` with efficient support for both sync\r\n&gt; and async, as well as streaming scenarios. The `RestTemplate` will be\r\n&gt; deprecated in a future version and will not have major new features\r\n&gt; added going forward. See the `WebClient` section of the Spring Framework\r\n&gt; reference documentation for more details and example code.\r\n\r\nTherefore, the best solution would be to abandon `RestTemplate` in favor of `WebClient`.\r\n\r\n\r\n----------\r\n\r\n\r\n## Using `WebClient` for Client Credentials Flow ##\r\nConfigure client registration and provider either programmatically or using Spring Boot auto-configuration:\r\n\r\n    spring:\r\n      security:\r\n        oauth2:\r\n          client:\r\n            registration:\r\n              custom:\r\n                client-id: clientId\r\n                client-secret: clientSecret\r\n                authorization-grant-type: client_credentials\r\n            provider:\r\n              custom:\r\n                token-uri: http://localhost:8081/oauth/token\r\n\r\n…​and the `OAuth2AuthorizedClientManager` `@Bean`:\r\n\r\n    @Bean\r\n    public OAuth2AuthorizedClientManager authorizedClientManager(\r\n            ClientRegistrationRepository clientRegistrationRepository,\r\n            OAuth2AuthorizedClientRepository authorizedClientRepository) {\r\n    \r\n        OAuth2AuthorizedClientProvider authorizedClientProvider =\r\n                OAuth2AuthorizedClientProviderBuilder.builder()\r\n                        .clientCredentials()\r\n                        .build();\r\n    \r\n        DefaultOAuth2AuthorizedClientManager authorizedClientManager =\r\n                new DefaultOAuth2AuthorizedClientManager(\r\n                        clientRegistrationRepository, authorizedClientRepository);\r\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n    \r\n        return authorizedClientManager;\r\n    }\r\n\r\nConfigure the `WebClient` instance to use `ServerOAuth2AuthorizedClientExchangeFilterFunction` with the provided `OAuth2AuthorizedClientManager`:\r\n\r\n    @Bean\r\n    WebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n        ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\r\n                new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n        oauth2Client.setDefaultClientRegistrationId(&quot;custom&quot;);\r\n        return WebClient.builder()\r\n                .apply(oauth2Client.oauth2Configuration())\r\n                .build();\r\n    }\r\n\r\nNow, if you try to make a request using this `WebClient` instance, it will first request a token from the authorization server and include it in the request.\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/5.2.1.RELEASE/reference/htmlsingle/#oauth2client\r\n  [2]: https://docs.spring.io/spring/docs/5.2.1.RELEASE/javadoc-api/org/springframework/web/client/RestTemplate.html","title":"Spring Security 5 Replacement for OAuth2RestTemplate","body":"<p>OAuth 2.0 Client features of Spring Security 5.2.x do not support <code>RestTemplate</code>, but only <code>WebClient</code>. See <a href=\"https://docs.spring.io/spring-security/site/docs/5.2.1.RELEASE/reference/htmlsingle/#oauth2client\" rel=\"noreferrer\">Spring Security Reference</a>:</p>\n\n<blockquote>\n  <p><strong>HTTP Client support</strong></p>\n  \n  <ul>\n  <li><code>WebClient</code> integration for Servlet Environments (for requesting\n  protected resources)</li>\n  </ul>\n</blockquote>\n\n<p>In addition, <code>RestTemplate</code> will be deprecated in a future version. See <a href=\"https://docs.spring.io/spring/docs/5.2.1.RELEASE/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"noreferrer\">RestTemplate javadoc</a>:</p>\n\n<blockquote>\n  <p><strong>NOTE:</strong> As of 5.0, the non-blocking, reactive\n  <code>org.springframework.web.reactive.client.WebClient</code> offers a modern\n  alternative to the <code>RestTemplate</code> with efficient support for both sync\n  and async, as well as streaming scenarios. The <code>RestTemplate</code> will be\n  deprecated in a future version and will not have major new features\n  added going forward. See the <code>WebClient</code> section of the Spring Framework\n  reference documentation for more details and example code.</p>\n</blockquote>\n\n<p>Therefore, the best solution would be to abandon <code>RestTemplate</code> in favor of <code>WebClient</code>.</p>\n\n<hr>\n\n<h2>Using <code>WebClient</code> for Client Credentials Flow</h2>\n\n<p>Configure client registration and provider either programmatically or using Spring Boot auto-configuration:</p>\n\n<pre><code>spring:\n  security:\n    oauth2:\n      client:\n        registration:\n          custom:\n            client-id: clientId\n            client-secret: clientSecret\n            authorization-grant-type: client_credentials\n        provider:\n          custom:\n            token-uri: http://localhost:8081/oauth/token\n</code></pre>\n\n<p>…​and the <code>OAuth2AuthorizedClientManager</code> <code>@Bean</code>:</p>\n\n<pre><code>@Bean\npublic OAuth2AuthorizedClientManager authorizedClientManager(\n        ClientRegistrationRepository clientRegistrationRepository,\n        OAuth2AuthorizedClientRepository authorizedClientRepository) {\n\n    OAuth2AuthorizedClientProvider authorizedClientProvider =\n            OAuth2AuthorizedClientProviderBuilder.builder()\n                    .clientCredentials()\n                    .build();\n\n    DefaultOAuth2AuthorizedClientManager authorizedClientManager =\n            new DefaultOAuth2AuthorizedClientManager(\n                    clientRegistrationRepository, authorizedClientRepository);\n    authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\n    return authorizedClientManager;\n}\n</code></pre>\n\n<p>Configure the <code>WebClient</code> instance to use <code>ServerOAuth2AuthorizedClientExchangeFilterFunction</code> with the provided <code>OAuth2AuthorizedClientManager</code>:</p>\n\n<pre><code>@Bean\nWebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\n    ServletOAuth2AuthorizedClientExchangeFilterFunction oauth2Client =\n            new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n    oauth2Client.setDefaultClientRegistrationId(\"custom\");\n    return WebClient.builder()\n            .apply(oauth2Client.oauth2Configuration())\n            .build();\n}\n</code></pre>\n\n<p>Now, if you try to make a request using this <code>WebClient</code> instance, it will first request a token from the authorization server and include it in the request.</p>\n"},{"tags":[],"owner":{"account_id":2454767,"reputation":1248,"user_id":2140248,"accept_rate":45,"display_name":"Matt Williams"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1575890512,"creation_date":1575890512,"answer_id":59247804,"question_id":58982286,"body_markdown":"The above answer from @Anar Sultanov helped me get to this point, but as I had to add some additional headers to my OAuth token request I thought I would provide a full answer for how I solved the issue for my use case.\r\n\r\nConfigure provider details\r\n---------------------------\r\nAdd the following to `application.properties`\r\n\r\n``` lang-java\r\nspring.security.oauth2.client.registration.uaa.client-id=${CLIENT_ID:}\r\nspring.security.oauth2.client.registration.uaa.client-secret=${CLIENT_SECRET:}\r\nspring.security.oauth2.client.registration.uaa.scope=${SCOPE:}\r\nspring.security.oauth2.client.registration.uaa.authorization-grant-type=client_credentials\r\nspring.security.oauth2.client.provider.uaa.token-uri=${UAA_URL:}\r\n```\r\n\r\nImplement custom `ReactiveOAuth2AccessTokenResponseClient`\r\n------------------------------------------------------------\r\nAs this is server-to-server communication we need to use the `ServerOAuth2AuthorizedClientExchangeFilterFunction`. This only accepts a `ReactiveOAuth2AuthorizedClientManager`, not the non-reactive `OAuth2AuthorizedClientManager`. Therefore when we use `ReactiveOAuth2AuthorizedClientManager.setAuthorizedClientProvider()` (to give it the provider to use to make the OAuth2 request) we have to give it a `ReactiveOAuth2AuthorizedClientProvider` instead of the non-reactive `OAuth2AuthorizedClientProvider`. As per the [spring-security reference documentation](https://docs.spring.io/spring-security/site/docs/current/reference/html5/#customizing-the-access-token-request-3) if you use a non-reactive `DefaultClientCredentialsTokenResponseClient` you can use the `.setRequestEntityConverter()` method to alter the OAuth2 token request, but the reactive equivalent `WebClientReactiveClientCredentialsTokenResponseClient` does not provide this facility, so we have to implement our own (we can make use of the existing `WebClientReactiveClientCredentialsTokenResponseClient` logic).\r\n\r\nMy implementation was called `UaaWebClientReactiveClientCredentialsTokenResponseClient` (implementation omitted as it only very slightly alters the `headers()` and `body()` methods from the default `WebClientReactiveClientCredentialsTokenResponseClient` to add some extra headers/body fields, it does not change the underlying auth flow). \r\n\r\nConfigure `WebClient`\r\n---------------------\r\nThe `ServerOAuth2AuthorizedClientExchangeFilterFunction.setClientCredentialsTokenResponseClient()` method has been deprecated, so following the deprecation advice from that method:\r\n&gt;Deprecated. *Use `ServerOAuth2AuthorizedClientExchangeFilterFunction(ReactiveOAuth2AuthorizedClientManager)` instead. Create an instance of `ClientCredentialsReactiveOAuth2AuthorizedClientProvider` configured with a `WebClientReactiveClientCredentialsTokenResponseClient` (or a custom one) and than supply it to `DefaultReactiveOAuth2AuthorizedClientManager`.*\r\n\r\nThis ends up with configuration looking something like:\r\n``` lang-java\r\n@Bean(&quot;oAuth2WebClient&quot;)\r\npublic WebClient oauthFilteredWebClient(final ReactiveClientRegistrationRepository \r\n    clientRegistrationRepository)\r\n{\r\n    final ClientCredentialsReactiveOAuth2AuthorizedClientProvider\r\n        clientCredentialsReactiveOAuth2AuthorizedClientProvider =\r\n            new ClientCredentialsReactiveOAuth2AuthorizedClientProvider();\r\n    clientCredentialsReactiveOAuth2AuthorizedClientProvider.setAccessTokenResponseClient(\r\n        new UaaWebClientReactiveClientCredentialsTokenResponseClient());\r\n\r\n    final DefaultReactiveOAuth2AuthorizedClientManager defaultReactiveOAuth2AuthorizedClientManager =\r\n        new DefaultReactiveOAuth2AuthorizedClientManager(clientRegistrationRepository,\r\n            new UnAuthenticatedServerOAuth2AuthorizedClientRepository());\r\n    defaultReactiveOAuth2AuthorizedClientManager.setAuthorizedClientProvider(\r\n        clientCredentialsReactiveOAuth2AuthorizedClientProvider);\r\n\r\n    final ServerOAuth2AuthorizedClientExchangeFilterFunction oAuthFilter =\r\n        new ServerOAuth2AuthorizedClientExchangeFilterFunction(defaultReactiveOAuth2AuthorizedClientManager);\r\n    oAuthFilter.setDefaultClientRegistrationId(&quot;uaa&quot;);\r\n\r\n    return WebClient.builder()\r\n        .filter(oAuthFilter)\r\n\t    .build();\r\n}\r\n```\r\n\r\nUse `WebClient` as normal\r\n-------------------------\r\nThe `oAuth2WebClient` bean is now ready to be used to access resources protected by our configured OAuth2 provider in the way you would make any other request using a `WebClient`.","title":"Spring Security 5 Replacement for OAuth2RestTemplate","body":"<p>The above answer from @Anar Sultanov helped me get to this point, but as I had to add some additional headers to my OAuth token request I thought I would provide a full answer for how I solved the issue for my use case.</p>\n\n<h2>Configure provider details</h2>\n\n<p>Add the following to <code>application.properties</code></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>spring.security.oauth2.client.registration.uaa.client-id=${CLIENT_ID:}\nspring.security.oauth2.client.registration.uaa.client-secret=${CLIENT_SECRET:}\nspring.security.oauth2.client.registration.uaa.scope=${SCOPE:}\nspring.security.oauth2.client.registration.uaa.authorization-grant-type=client_credentials\nspring.security.oauth2.client.provider.uaa.token-uri=${UAA_URL:}\n</code></pre>\n\n<h2>Implement custom <code>ReactiveOAuth2AccessTokenResponseClient</code></h2>\n\n<p>As this is server-to-server communication we need to use the <code>ServerOAuth2AuthorizedClientExchangeFilterFunction</code>. This only accepts a <code>ReactiveOAuth2AuthorizedClientManager</code>, not the non-reactive <code>OAuth2AuthorizedClientManager</code>. Therefore when we use <code>ReactiveOAuth2AuthorizedClientManager.setAuthorizedClientProvider()</code> (to give it the provider to use to make the OAuth2 request) we have to give it a <code>ReactiveOAuth2AuthorizedClientProvider</code> instead of the non-reactive <code>OAuth2AuthorizedClientProvider</code>. As per the <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#customizing-the-access-token-request-3\" rel=\"noreferrer\">spring-security reference documentation</a> if you use a non-reactive <code>DefaultClientCredentialsTokenResponseClient</code> you can use the <code>.setRequestEntityConverter()</code> method to alter the OAuth2 token request, but the reactive equivalent <code>WebClientReactiveClientCredentialsTokenResponseClient</code> does not provide this facility, so we have to implement our own (we can make use of the existing <code>WebClientReactiveClientCredentialsTokenResponseClient</code> logic).</p>\n\n<p>My implementation was called <code>UaaWebClientReactiveClientCredentialsTokenResponseClient</code> (implementation omitted as it only very slightly alters the <code>headers()</code> and <code>body()</code> methods from the default <code>WebClientReactiveClientCredentialsTokenResponseClient</code> to add some extra headers/body fields, it does not change the underlying auth flow). </p>\n\n<h2>Configure <code>WebClient</code></h2>\n\n<p>The <code>ServerOAuth2AuthorizedClientExchangeFilterFunction.setClientCredentialsTokenResponseClient()</code> method has been deprecated, so following the deprecation advice from that method:</p>\n\n<blockquote>\n  <p>Deprecated. <em>Use <code>ServerOAuth2AuthorizedClientExchangeFilterFunction(ReactiveOAuth2AuthorizedClientManager)</code> instead. Create an instance of <code>ClientCredentialsReactiveOAuth2AuthorizedClientProvider</code> configured with a <code>WebClientReactiveClientCredentialsTokenResponseClient</code> (or a custom one) and than supply it to <code>DefaultReactiveOAuth2AuthorizedClientManager</code>.</em></p>\n</blockquote>\n\n<p>This ends up with configuration looking something like:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean(\"oAuth2WebClient\")\npublic WebClient oauthFilteredWebClient(final ReactiveClientRegistrationRepository \n    clientRegistrationRepository)\n{\n    final ClientCredentialsReactiveOAuth2AuthorizedClientProvider\n        clientCredentialsReactiveOAuth2AuthorizedClientProvider =\n            new ClientCredentialsReactiveOAuth2AuthorizedClientProvider();\n    clientCredentialsReactiveOAuth2AuthorizedClientProvider.setAccessTokenResponseClient(\n        new UaaWebClientReactiveClientCredentialsTokenResponseClient());\n\n    final DefaultReactiveOAuth2AuthorizedClientManager defaultReactiveOAuth2AuthorizedClientManager =\n        new DefaultReactiveOAuth2AuthorizedClientManager(clientRegistrationRepository,\n            new UnAuthenticatedServerOAuth2AuthorizedClientRepository());\n    defaultReactiveOAuth2AuthorizedClientManager.setAuthorizedClientProvider(\n        clientCredentialsReactiveOAuth2AuthorizedClientProvider);\n\n    final ServerOAuth2AuthorizedClientExchangeFilterFunction oAuthFilter =\n        new ServerOAuth2AuthorizedClientExchangeFilterFunction(defaultReactiveOAuth2AuthorizedClientManager);\n    oAuthFilter.setDefaultClientRegistrationId(\"uaa\");\n\n    return WebClient.builder()\n        .filter(oAuthFilter)\n        .build();\n}\n</code></pre>\n\n<h2>Use <code>WebClient</code> as normal</h2>\n\n<p>The <code>oAuth2WebClient</code> bean is now ready to be used to access resources protected by our configured OAuth2 provider in the way you would make any other request using a <code>WebClient</code>.</p>\n"},{"tags":[],"owner":{"account_id":313334,"reputation":417,"user_id":2806640,"display_name":"Jogger"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1583094173,"creation_date":1583094173,"answer_id":60479407,"question_id":58982286,"body_markdown":"I found @matt Williams answer quite helpful. Though I would like add in case someone would like to programatically pass clientId and secret for WebClient configuration. Here is how it can be Done.\r\n\r\n   \r\n\r\n     @Configuration\r\n        public class WebClientConfig {\r\n    \r\n        public static final String TEST_REGISTRATION_ID = &quot;test-client&quot;;\r\n    \r\n        @Bean\r\n        public ReactiveClientRegistrationRepository clientRegistrationRepository() {\r\n            var clientRegistration = ClientRegistration.withRegistrationId(TEST_REGISTRATION_ID)\r\n                    .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\r\n                    .clientId(&quot;&lt;client_id&gt;&quot;)\r\n                    .clientSecret(&quot;&lt;client_secret&gt;&quot;)\r\n                    .tokenUri(&quot;&lt;token_uri&gt;&quot;)\r\n                    .build();\r\n            return new InMemoryReactiveClientRegistrationRepository(clientRegistration);\r\n        }\r\n    \r\n        @Bean\r\n        public WebClient testWebClient(ReactiveClientRegistrationRepository clientRegistrationRepo) {\r\n    \r\n            var oauth = new ServerOAuth2AuthorizedClientExchangeFilterFunction(clientRegistrationRepo,  new UnAuthenticatedServerOAuth2AuthorizedClientRepository());\r\n            oauth.setDefaultClientRegistrationId(TEST_REGISTRATION_ID);\r\n    \r\n            return WebClient.builder()\r\n                    .baseUrl(&quot;https://.test.com&quot;)\r\n                    .filter(oauth)\r\n                    .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\r\n        }\r\n    }","title":"Spring Security 5 Replacement for OAuth2RestTemplate","body":"<p>I found @matt Williams answer quite helpful. Though I would like add in case someone would like to programatically pass clientId and secret for WebClient configuration. Here is how it can be Done.</p>\n\n<pre><code> @Configuration\n    public class WebClientConfig {\n\n    public static final String TEST_REGISTRATION_ID = \"test-client\";\n\n    @Bean\n    public ReactiveClientRegistrationRepository clientRegistrationRepository() {\n        var clientRegistration = ClientRegistration.withRegistrationId(TEST_REGISTRATION_ID)\n                .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\n                .clientId(\"&lt;client_id&gt;\")\n                .clientSecret(\"&lt;client_secret&gt;\")\n                .tokenUri(\"&lt;token_uri&gt;\")\n                .build();\n        return new InMemoryReactiveClientRegistrationRepository(clientRegistration);\n    }\n\n    @Bean\n    public WebClient testWebClient(ReactiveClientRegistrationRepository clientRegistrationRepo) {\n\n        var oauth = new ServerOAuth2AuthorizedClientExchangeFilterFunction(clientRegistrationRepo,  new UnAuthenticatedServerOAuth2AuthorizedClientRepository());\n        oauth.setDefaultClientRegistrationId(TEST_REGISTRATION_ID);\n\n        return WebClient.builder()\n                .baseUrl(\"https://.test.com\")\n                .filter(oauth)\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8135283,"reputation":369,"user_id":6127125,"display_name":"Leandro Assis"},"down_vote_count":1,"up_vote_count":37,"is_accepted":false,"score":36,"last_activity_date":1583927959,"creation_date":1583925139,"answer_id":60634690,"question_id":58982286,"body_markdown":"Hi maybe it&#39;s too late however RestTemplate is still supported in Spring Security 5, to non-reactive app RestTemplate is still used what you have to do is only configure spring security properly and create an interceptor as mentioned on migration guide\r\n\r\nUse the following configuration to use client_credentials flow\r\n\r\napplication.yml\r\n```\r\nspring:\r\n  security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          jwk-set-uri: ${okta.oauth2.issuer}/v1/keys\r\n      client:\r\n        registration:\r\n          okta:\r\n            client-id: ${okta.oauth2.clientId}\r\n            client-secret: ${okta.oauth2.clientSecret}\r\n            scope: &quot;custom-scope&quot;\r\n            authorization-grant-type: client_credentials\r\n            provider: okta\r\n        provider:\r\n          okta:\r\n            authorization-uri: ${okta.oauth2.issuer}/v1/authorize\r\n            token-uri: ${okta.oauth2.issuer}/v1/token\r\n```\r\n\r\nConfiguration to OauthResTemplate\r\n\r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class OAuthRestTemplateConfig {\r\n\r\n    public static final String OAUTH_WEBCLIENT = &quot;OAUTH_WEBCLIENT&quot;;\r\n\r\n    private final RestTemplateBuilder restTemplateBuilder;\r\n    private final OAuth2AuthorizedClientService oAuth2AuthorizedClientService;\r\n    private final ClientRegistrationRepository clientRegistrationRepository;\r\n\r\n    @Bean(OAUTH_WEBCLIENT)\r\n    RestTemplate oAuthRestTemplate() {\r\n        var clientRegistration = clientRegistrationRepository.findByRegistrationId(Constants.OKTA_AUTH_SERVER_ID);\r\n\r\n        return restTemplateBuilder\r\n                .additionalInterceptors(new OAuthClientCredentialsRestTemplateInterceptorConfig(authorizedClientManager(), clientRegistration))\r\n                .setReadTimeout(Duration.ofSeconds(5))\r\n                .setConnectTimeout(Duration.ofSeconds(1))\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    OAuth2AuthorizedClientManager authorizedClientManager() {\r\n        var authorizedClientProvider = OAuth2AuthorizedClientProviderBuilder.builder()\r\n                .clientCredentials()\r\n                .build();\r\n\r\n        var authorizedClientManager = new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository, oAuth2AuthorizedClientService);\r\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n\r\n        return authorizedClientManager;\r\n    }\r\n\r\n}\r\n```\r\n\r\nInterceptor\r\n```\r\npublic class OAuthClientCredentialsRestTemplateInterceptor implements ClientHttpRequestInterceptor {\r\n\r\n    private final OAuth2AuthorizedClientManager manager;\r\n    private final Authentication principal;\r\n    private final ClientRegistration clientRegistration;\r\n\r\n    public OAuthClientCredentialsRestTemplateInterceptor(OAuth2AuthorizedClientManager manager, ClientRegistration clientRegistration) {\r\n        this.manager = manager;\r\n        this.clientRegistration = clientRegistration;\r\n        this.principal = createPrincipal();\r\n    }\r\n\r\n    @Override\r\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n        OAuth2AuthorizeRequest oAuth2AuthorizeRequest = OAuth2AuthorizeRequest\r\n                .withClientRegistrationId(clientRegistration.getRegistrationId())\r\n                .principal(principal)\r\n                .build();\r\n        OAuth2AuthorizedClient client = manager.authorize(oAuth2AuthorizeRequest);\r\n        if (isNull(client)) {\r\n            throw new IllegalStateException(&quot;client credentials flow on &quot; + clientRegistration.getRegistrationId() + &quot; failed, client is null&quot;);\r\n        }\r\n\r\n        request.getHeaders().add(HttpHeaders.AUTHORIZATION, BEARER_PREFIX + client.getAccessToken().getTokenValue());\r\n        return execution.execute(request, body);\r\n    }\r\n\r\n    private Authentication createPrincipal() {\r\n        return new Authentication() {\r\n            @Override\r\n            public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n                return Collections.emptySet();\r\n            }\r\n\r\n            @Override\r\n            public Object getCredentials() {\r\n                return null;\r\n            }\r\n\r\n            @Override\r\n            public Object getDetails() {\r\n                return null;\r\n            }\r\n\r\n            @Override\r\n            public Object getPrincipal() {\r\n                return this;\r\n            }\r\n\r\n            @Override\r\n            public boolean isAuthenticated() {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException {\r\n            }\r\n\r\n            @Override\r\n            public String getName() {\r\n                return clientRegistration.getClientId();\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n\r\nThis will generate access_token in the first call and whenever the token is expired. OAuth2AuthorizedClientManager will manage all this to you\r\n\r\n","title":"Spring Security 5 Replacement for OAuth2RestTemplate","body":"<p>Hi maybe it's too late however RestTemplate is still supported in Spring Security 5, to non-reactive app RestTemplate is still used what you have to do is only configure spring security properly and create an interceptor as mentioned on migration guide</p>\n\n<p>Use the following configuration to use client_credentials flow</p>\n\n<p>application.yml</p>\n\n<pre><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          jwk-set-uri: ${okta.oauth2.issuer}/v1/keys\n      client:\n        registration:\n          okta:\n            client-id: ${okta.oauth2.clientId}\n            client-secret: ${okta.oauth2.clientSecret}\n            scope: \"custom-scope\"\n            authorization-grant-type: client_credentials\n            provider: okta\n        provider:\n          okta:\n            authorization-uri: ${okta.oauth2.issuer}/v1/authorize\n            token-uri: ${okta.oauth2.issuer}/v1/token\n</code></pre>\n\n<p>Configuration to OauthResTemplate</p>\n\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class OAuthRestTemplateConfig {\n\n    public static final String OAUTH_WEBCLIENT = \"OAUTH_WEBCLIENT\";\n\n    private final RestTemplateBuilder restTemplateBuilder;\n    private final OAuth2AuthorizedClientService oAuth2AuthorizedClientService;\n    private final ClientRegistrationRepository clientRegistrationRepository;\n\n    @Bean(OAUTH_WEBCLIENT)\n    RestTemplate oAuthRestTemplate() {\n        var clientRegistration = clientRegistrationRepository.findByRegistrationId(Constants.OKTA_AUTH_SERVER_ID);\n\n        return restTemplateBuilder\n                .additionalInterceptors(new OAuthClientCredentialsRestTemplateInterceptorConfig(authorizedClientManager(), clientRegistration))\n                .setReadTimeout(Duration.ofSeconds(5))\n                .setConnectTimeout(Duration.ofSeconds(1))\n                .build();\n    }\n\n    @Bean\n    OAuth2AuthorizedClientManager authorizedClientManager() {\n        var authorizedClientProvider = OAuth2AuthorizedClientProviderBuilder.builder()\n                .clientCredentials()\n                .build();\n\n        var authorizedClientManager = new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository, oAuth2AuthorizedClientService);\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\n        return authorizedClientManager;\n    }\n\n}\n</code></pre>\n\n<p>Interceptor</p>\n\n<pre><code>public class OAuthClientCredentialsRestTemplateInterceptor implements ClientHttpRequestInterceptor {\n\n    private final OAuth2AuthorizedClientManager manager;\n    private final Authentication principal;\n    private final ClientRegistration clientRegistration;\n\n    public OAuthClientCredentialsRestTemplateInterceptor(OAuth2AuthorizedClientManager manager, ClientRegistration clientRegistration) {\n        this.manager = manager;\n        this.clientRegistration = clientRegistration;\n        this.principal = createPrincipal();\n    }\n\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n        OAuth2AuthorizeRequest oAuth2AuthorizeRequest = OAuth2AuthorizeRequest\n                .withClientRegistrationId(clientRegistration.getRegistrationId())\n                .principal(principal)\n                .build();\n        OAuth2AuthorizedClient client = manager.authorize(oAuth2AuthorizeRequest);\n        if (isNull(client)) {\n            throw new IllegalStateException(\"client credentials flow on \" + clientRegistration.getRegistrationId() + \" failed, client is null\");\n        }\n\n        request.getHeaders().add(HttpHeaders.AUTHORIZATION, BEARER_PREFIX + client.getAccessToken().getTokenValue());\n        return execution.execute(request, body);\n    }\n\n    private Authentication createPrincipal() {\n        return new Authentication() {\n            @Override\n            public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n                return Collections.emptySet();\n            }\n\n            @Override\n            public Object getCredentials() {\n                return null;\n            }\n\n            @Override\n            public Object getDetails() {\n                return null;\n            }\n\n            @Override\n            public Object getPrincipal() {\n                return this;\n            }\n\n            @Override\n            public boolean isAuthenticated() {\n                return false;\n            }\n\n            @Override\n            public void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException {\n            }\n\n            @Override\n            public String getName() {\n                return clientRegistration.getClientId();\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>This will generate access_token in the first call and whenever the token is expired. OAuth2AuthorizedClientManager will manage all this to you</p>\n"},{"tags":[],"owner":{"account_id":8592635,"reputation":91,"user_id":6436720,"display_name":"Krishnakanth Yachareni"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1668034637,"creation_date":1668034637,"answer_id":74382304,"question_id":58982286,"body_markdown":"This is a simple alternative to `OAuth2RestTemplate`. The following snippet has been tested using Spring Boot `3.0.0-M4` and there is no `application.yml` configuration is needed.\r\n\r\nSecurityConfig.java\r\n````java\r\n    @Bean\r\n    public ReactiveClientRegistrationRepository getRegistration() {\r\n        ClientRegistration registration = ClientRegistration\r\n                .withRegistrationId(&quot;custom&quot;)\r\n                .tokenUri(&quot;&lt;token_URI&gt;&quot;)\r\n                .clientId(&quot;&lt;client_id&gt;&quot;)\r\n                .clientSecret(&quot;&lt;secret&gt;&quot;)\r\n                .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\r\n                .build();\r\n        return new InMemoryReactiveClientRegistrationRepository(registration);\r\n    }\r\n\r\n    @Bean\r\n    public WebClient webClient(ReactiveClientRegistrationRepository clientRegistrations) {\r\n        InMemoryReactiveOAuth2AuthorizedClientService clientService = new InMemoryReactiveOAuth2AuthorizedClientService(clientRegistrations);\r\n        AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager = new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(clientRegistrations, clientService);\r\n        ServerOAuth2AuthorizedClientExchangeFilterFunction oauth = new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n        oauth.setDefaultClientRegistrationId(&quot;custom&quot;);\r\n        return WebClient.builder()\r\n                .filter(oauth)\r\n                .filter(errorHandler()) // This is an optional\r\n                .build();\r\n\r\n    }\r\n\r\n    public static ExchangeFilterFunction errorHandler() {\r\n        return ExchangeFilterFunction.ofResponseProcessor(clientResponse -&gt; {\r\n\r\n            if (clientResponse.statusCode().is5xxServerError() || clientResponse.statusCode().is4xxClientError()) {\r\n                return clientResponse.bodyToMono(String.class)\r\n                        .flatMap(errorBody -&gt; Mono.error(new IllegalAccessException(errorBody)));\r\n            } else {\r\n                return Mono.just(clientResponse);\r\n            }\r\n        });\r\n    }\r\n````\r\npom.xml\r\n````xml\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.0-M4&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;dependencies&gt;\r\n````","title":"Spring Security 5 Replacement for OAuth2RestTemplate","body":"<p>This is a simple alternative to <code>OAuth2RestTemplate</code>. The following snippet has been tested using Spring Boot <code>3.0.0-M4</code> and there is no <code>application.yml</code> configuration is needed.</p>\n<p>SecurityConfig.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public ReactiveClientRegistrationRepository getRegistration() {\n        ClientRegistration registration = ClientRegistration\n                .withRegistrationId(&quot;custom&quot;)\n                .tokenUri(&quot;&lt;token_URI&gt;&quot;)\n                .clientId(&quot;&lt;client_id&gt;&quot;)\n                .clientSecret(&quot;&lt;secret&gt;&quot;)\n                .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\n                .build();\n        return new InMemoryReactiveClientRegistrationRepository(registration);\n    }\n\n    @Bean\n    public WebClient webClient(ReactiveClientRegistrationRepository clientRegistrations) {\n        InMemoryReactiveOAuth2AuthorizedClientService clientService = new InMemoryReactiveOAuth2AuthorizedClientService(clientRegistrations);\n        AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager = new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(clientRegistrations, clientService);\n        ServerOAuth2AuthorizedClientExchangeFilterFunction oauth = new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n        oauth.setDefaultClientRegistrationId(&quot;custom&quot;);\n        return WebClient.builder()\n                .filter(oauth)\n                .filter(errorHandler()) // This is an optional\n                .build();\n\n    }\n\n    public static ExchangeFilterFunction errorHandler() {\n        return ExchangeFilterFunction.ofResponseProcessor(clientResponse -&gt; {\n\n            if (clientResponse.statusCode().is5xxServerError() || clientResponse.statusCode().is4xxClientError()) {\n                return clientResponse.bodyToMono(String.class)\n                        .flatMap(errorBody -&gt; Mono.error(new IllegalAccessException(errorBody)));\n            } else {\n                return Mono.just(clientResponse);\n            }\n        });\n    }\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0-M4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":2454767,"reputation":1248,"user_id":2140248,"accept_rate":45,"display_name":"Matt Williams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69204,"favorite_count":0,"down_vote_count":0,"up_vote_count":76,"accepted_answer_id":58999002,"answer_count":5,"score":76,"last_activity_date":1700703656,"creation_date":1574364003,"question_id":58982286,"body_markdown":"In `spring-security-oauth2:2.4.0.RELEASE`, classes such as `OAuth2RestTemplate`, `OAuth2ProtectedResourceDetails` and `ClientCredentialsAccessTokenProvider` have all been marked as deprecated.\r\n\r\nFrom the javadoc on these classes, it points to a [spring security migration guide](https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide) that insinuates that people should migrate to the core spring-security 5 project. However, I&#39;m having trouble finding how I would implement my use case in this project.\r\n\r\nAll of the documentation and examples talk about integrating with a 3rd part OAuth provider if you want incoming requests to your application to be authenticated and you want to use the 3rd party OAuth provider to verify the identity. \r\n\r\nIn my use case, all I want to do is make a request with a `RestTemplate` to an external service that is protected by OAuth. Currently, I create an `OAuth2ProtectedResourceDetails` with my client id and secret which I pass into an `OAuth2RestTemplate`. I also have a custom `ClientCredentialsAccessTokenProvider` added to the `OAuth2ResTemplate` that just adds some extra headers to the token request that are required by the OAuth provider I&#39;m using.\r\n\r\nIn the spring-security 5 documentation, I&#39;ve found a section that mentions [customising the token request](https://docs.spring.io/spring-security/site/docs/current/reference/html5/#customizing-the-access-token-request-3), but again that looks to be in the context of authenticating an incoming request with a 3rd party OAuth provider. It is not clear how you would use this in combination with something like a `ClientHttpRequestInterceptor` to ensure that each outgoing request to an external service first gets a token and then gets that added to the request. \r\n\r\nAlso, in the migration guide linked above, there is reference to an `OAuth2AuthorizedClientService` which it says is useful for using in interceptors. But again, this looks like it relies on things like the `ClientRegistrationRepository` which seems to be where it maintains registrations for third party providers if you want to use that provide to ensure an incoming request is authenticated.\r\n\r\nIs there any way I can make use of the new functionality in spring-security 5 for registering OAuth providers in order to get a token to add to outgoing requests from my application?","title":"Spring Security 5 Replacement for OAuth2RestTemplate","body":"<p>In <code>spring-security-oauth2:2.4.0.RELEASE</code>, classes such as <code>OAuth2RestTemplate</code>, <code>OAuth2ProtectedResourceDetails</code> and <code>ClientCredentialsAccessTokenProvider</code> have all been marked as deprecated.</p>\n<p>From the javadoc on these classes, it points to a <a href=\"https://github.com/spring-projects/spring-security/wiki/OAuth-2.0-Migration-Guide\" rel=\"nofollow noreferrer\">spring security migration guide</a> that insinuates that people should migrate to the core spring-security 5 project. However, I'm having trouble finding how I would implement my use case in this project.</p>\n<p>All of the documentation and examples talk about integrating with a 3rd part OAuth provider if you want incoming requests to your application to be authenticated and you want to use the 3rd party OAuth provider to verify the identity.</p>\n<p>In my use case, all I want to do is make a request with a <code>RestTemplate</code> to an external service that is protected by OAuth. Currently, I create an <code>OAuth2ProtectedResourceDetails</code> with my client id and secret which I pass into an <code>OAuth2RestTemplate</code>. I also have a custom <code>ClientCredentialsAccessTokenProvider</code> added to the <code>OAuth2ResTemplate</code> that just adds some extra headers to the token request that are required by the OAuth provider I'm using.</p>\n<p>In the spring-security 5 documentation, I've found a section that mentions <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#customizing-the-access-token-request-3\" rel=\"nofollow noreferrer\">customising the token request</a>, but again that looks to be in the context of authenticating an incoming request with a 3rd party OAuth provider. It is not clear how you would use this in combination with something like a <code>ClientHttpRequestInterceptor</code> to ensure that each outgoing request to an external service first gets a token and then gets that added to the request.</p>\n<p>Also, in the migration guide linked above, there is reference to an <code>OAuth2AuthorizedClientService</code> which it says is useful for using in interceptors. But again, this looks like it relies on things like the <code>ClientRegistrationRepository</code> which seems to be where it maintains registrations for third party providers if you want to use that provide to ensure an incoming request is authenticated.</p>\n<p>Is there any way I can make use of the new functionality in spring-security 5 for registering OAuth providers in order to get a token to add to outgoing requests from my application?</p>\n"},{"tags":["java","spring","spring-security-oauth2","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":49344,"reputation":361,"user_id":146870,"display_name":"reidarok"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1478696050,"creation_date":1478696050,"answer_id":40507524,"question_id":40306542,"body_markdown":"As nobody has replied yet, I&#39;ll attempt to answer my own question.\r\n\r\nI have created a Repository bean which caches and returns a RestTemplate based on a secret client key:\r\n\r\n    @Repository\r\n    public class ExternalServiceRepository {\r\n    \r\n        private static ConcurrentHashMap&lt;String, OAuth2RestTemplate&gt; restTemplates = new ConcurrentHashMap&lt;&gt;();\r\n    \r\n        /**\r\n         * Get a RestTemplate for a specific client based on it&#39;s client secret id.\r\n         * Create one if it hasn&#39;t been initialized yet.\r\n         */\r\n        public OAuth2RestTemplate restTemplate(String clientKey) {\r\n            \r\n            synchronized (restTemplates) {\r\n                OAuth2RestTemplate restTemplate = restTemplates.get(clientKey);\r\n                \r\n                if (restTemplate == null) {\r\n                    ClientCredentialsResourceDetails details = new ClientCredentialsResourceDetails();\r\n                    details.setAccessTokenUri(&quot;https://external-service.example.com/OAuth/Token&quot;);\r\n                    details.setClientId(&quot;abcdefghijklmnopq&quot;);\r\n                    details.setClientSecret(clientKey);\r\n                    details.setGrantType(&quot;client_credentials&quot;);\r\n                    \r\n                    restTemplate = new OAuth2RestTemplate(details, new DefaultOAuth2ClientContext());\r\n                    restTemplates.put(clientKey, restTemplate);\r\n                }\r\n                \r\n                return restTemplate;\r\n            }\r\n        }\r\n    }\r\n\r\nInstead of using the @EnableOAuth2Client annotation, which sets up an OAuth2 client context for every HTTP session, I&#39;m creating my own DefaultOAuth2ClientContext. As I&#39;m only using client credentials, I believe this code to be thread safe (please prove me wrong if you think otherwise).\r\n\r\nFinally, instead of injecting the RestTemplate, I&#39;m injecting and using my repository to get access to the restTemplate for a given client secret:\r\n\r\n    RestTemplate restTemplate =\r\n        externalServiceRepository.restTemplate(&quot;123456789123456789123456789&quot;);\r\n\r\n","title":"Using OAuth2RestTemplate on behalf of a number of users","body":"<p>As nobody has replied yet, I'll attempt to answer my own question.</p>\n\n<p>I have created a Repository bean which caches and returns a RestTemplate based on a secret client key:</p>\n\n<pre><code>@Repository\npublic class ExternalServiceRepository {\n\n    private static ConcurrentHashMap&lt;String, OAuth2RestTemplate&gt; restTemplates = new ConcurrentHashMap&lt;&gt;();\n\n    /**\n     * Get a RestTemplate for a specific client based on it's client secret id.\n     * Create one if it hasn't been initialized yet.\n     */\n    public OAuth2RestTemplate restTemplate(String clientKey) {\n\n        synchronized (restTemplates) {\n            OAuth2RestTemplate restTemplate = restTemplates.get(clientKey);\n\n            if (restTemplate == null) {\n                ClientCredentialsResourceDetails details = new ClientCredentialsResourceDetails();\n                details.setAccessTokenUri(\"https://external-service.example.com/OAuth/Token\");\n                details.setClientId(\"abcdefghijklmnopq\");\n                details.setClientSecret(clientKey);\n                details.setGrantType(\"client_credentials\");\n\n                restTemplate = new OAuth2RestTemplate(details, new DefaultOAuth2ClientContext());\n                restTemplates.put(clientKey, restTemplate);\n            }\n\n            return restTemplate;\n        }\n    }\n}\n</code></pre>\n\n<p>Instead of using the @EnableOAuth2Client annotation, which sets up an OAuth2 client context for every HTTP session, I'm creating my own DefaultOAuth2ClientContext. As I'm only using client credentials, I believe this code to be thread safe (please prove me wrong if you think otherwise).</p>\n\n<p>Finally, instead of injecting the RestTemplate, I'm injecting and using my repository to get access to the restTemplate for a given client secret:</p>\n\n<pre><code>RestTemplate restTemplate =\n    externalServiceRepository.restTemplate(\"123456789123456789123456789\");\n</code></pre>\n"}],"owner":{"account_id":49344,"reputation":361,"user_id":146870,"display_name":"reidarok"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3779,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":40507524,"answer_count":1,"score":7,"last_activity_date":1700702673,"creation_date":1477662656,"question_id":40306542,"body_markdown":"I&#39;m creating a system which regularly exports data on behalf of many users to an external system, with OAuth2-authenticated HTTP requests.\r\n\r\nI have successfully been able to communicate with the external service using Spring Security OAuth2, with an OAuth2RestTemplate configured like this:\r\n\r\n    @Configuration\r\n    @EnableOAuth2Client\r\n    public class ExternalServiceConfiguration {\r\n        \r\n        @Autowired\r\n        private OAuth2ClientContext oauth2Context;\r\n    \r\n        @Bean\r\n        public OAuth2ProtectedResourceDetails credentials() {\r\n            \r\n            ClientCredentialsResourceDetails details = new ClientCredentialsResourceDetails();\r\n            details.setAccessTokenUri(&quot;https://external-service.example.com/OAuth/Token&quot;);\r\n            details.setClientId(&quot;abcdefghijklmnopq&quot;);\r\n            details.setClientSecret(&quot;123456789123456789123456789&quot;);\r\n            details.setGrantType(&quot;client_credentials&quot;);\r\n            \r\n            return details;\r\n        }\r\n        \r\n        @Bean\r\n        public OAuth2RestTemplate externalServiceRestTemplate() {\r\n            return new OAuth2RestTemplate(credentials(), oauth2Context);\r\n        }\r\n    }\r\n\r\nThis works well, and I&#39;m able to inject the OAuth2RestTemplate bean into my services:\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;externalServiceRestTemplate&quot;)\r\n    private OAuth2RestTemplate restTemplate;\r\n\r\nHowever, in my application, I have a number of users that each need to configure their own client keys. In case it&#39;s relevant, I&#39;m doing this in a batch job, meaning it is done outside of a regular HTTP request, and sometimes in the same thread context.\r\n\r\nThis means that I will need to have multiple OAuth2ProtectedResourceDetails, and, I assume, multiple OAuth2RestTemplate instances as well. As this is something each user will be configuring on their own, it has to happen dynamically, based on client credentials saved in a database.\r\n\r\nDoes anyone have any advice on how to configure a dynamic number of OAuth2RestTemplate instances in an efficient, but thread-safe way?","title":"Using OAuth2RestTemplate on behalf of a number of users","body":"<p>I'm creating a system which regularly exports data on behalf of many users to an external system, with OAuth2-authenticated HTTP requests.</p>\n<p>I have successfully been able to communicate with the external service using Spring Security OAuth2, with an OAuth2RestTemplate configured like this:</p>\n<pre><code>@Configuration\n@EnableOAuth2Client\npublic class ExternalServiceConfiguration {\n    \n    @Autowired\n    private OAuth2ClientContext oauth2Context;\n\n    @Bean\n    public OAuth2ProtectedResourceDetails credentials() {\n        \n        ClientCredentialsResourceDetails details = new ClientCredentialsResourceDetails();\n        details.setAccessTokenUri(&quot;https://external-service.example.com/OAuth/Token&quot;);\n        details.setClientId(&quot;abcdefghijklmnopq&quot;);\n        details.setClientSecret(&quot;123456789123456789123456789&quot;);\n        details.setGrantType(&quot;client_credentials&quot;);\n        \n        return details;\n    }\n    \n    @Bean\n    public OAuth2RestTemplate externalServiceRestTemplate() {\n        return new OAuth2RestTemplate(credentials(), oauth2Context);\n    }\n}\n</code></pre>\n<p>This works well, and I'm able to inject the OAuth2RestTemplate bean into my services:</p>\n<pre><code>@Autowired\n@Qualifier(&quot;externalServiceRestTemplate&quot;)\nprivate OAuth2RestTemplate restTemplate;\n</code></pre>\n<p>However, in my application, I have a number of users that each need to configure their own client keys. In case it's relevant, I'm doing this in a batch job, meaning it is done outside of a regular HTTP request, and sometimes in the same thread context.</p>\n<p>This means that I will need to have multiple OAuth2ProtectedResourceDetails, and, I assume, multiple OAuth2RestTemplate instances as well. As this is something each user will be configuring on their own, it has to happen dynamically, based on client credentials saved in a database.</p>\n<p>Does anyone have any advice on how to configure a dynamic number of OAuth2RestTemplate instances in an efficient, but thread-safe way?</p>\n"},{"tags":["javascript","java","selenium-webdriver","testcase"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1700676783,"post_id":77532219,"comment_id":136685035,"body_markdown":"How can an asterisk be available?","body":"How can an asterisk be available?"}],"answers":[{"tags":[],"owner":{"account_id":937336,"reputation":54163,"user_id":966023,"accept_rate":65,"display_name":"pguardiario"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700701820,"creation_date":1700701820,"answer_id":77533863,"question_id":77532219,"body_markdown":"You can do something like this:\r\n\r\n    valid = driver.execute_script(&quot;&quot;&quot;\r\n      return arguments[0].checkValidity()\r\n    &quot;&quot;&quot;, inputElement)\r\n\r\nwhich will be false if the input is empty and required","title":"How to write selenium code for validate asterisk symbol","body":"<p>You can do something like this:</p>\n<pre><code>valid = driver.execute_script(&quot;&quot;&quot;\n  return arguments[0].checkValidity()\n&quot;&quot;&quot;, inputElement)\n</code></pre>\n<p>which will be false if the input is empty and required</p>\n"}],"owner":{"account_id":29968780,"reputation":11,"user_id":22966695,"display_name":"Ajay D"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1700701820,"creation_date":1700676034,"question_id":77532219,"body_markdown":"How to write selenium code for validate asterisk availablity with mandatory fields e.g First Name* , Last Name* , Enter Address*, Enter Phone Number* \r\nNeed to validate asterisk availablity after the field name\r\n\r\nTrying to write selenium code ","title":"How to write selenium code for validate asterisk symbol","body":"<p>How to write selenium code for validate asterisk availablity with mandatory fields e.g First Name* , Last Name* , Enter Address*, Enter Phone Number*\nNeed to validate asterisk availablity after the field name</p>\n<p>Trying to write selenium code</p>\n"},{"tags":["java","spring-boot","ibm-mq","spring-jms"],"comments":[{"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"score":0,"creation_date":1586811750,"post_id":61194451,"comment_id":108260885,"body_markdown":"I would suggest you point only to the com.ibm.mq.allclient.jar and a jms.jar that is 2.0.  You should NOT mix any jars from MQ v7.5.0 if this is what you are doing.","body":"I would suggest you point only to the com.ibm.mq.allclient.jar and a jms.jar that is 2.0.  You should NOT mix any jars from MQ v7.5.0 if this is what you are doing."},{"owner":{"account_id":13071481,"reputation":888,"user_id":9444909,"display_name":"Mark Taylor"},"score":0,"creation_date":1586848138,"post_id":61194451,"comment_id":108270974,"body_markdown":"If you are using the MQ JMS Spring Boot starter, you should not be explicitly putting either jms.jar or the allclient versions in your POM. Leave it to the spring boot setup to automatically provide the dependencies.","body":"If you are using the MQ JMS Spring Boot starter, you should not be explicitly putting either jms.jar or the allclient versions in your POM. Leave it to the spring boot setup to automatically provide the dependencies."},{"owner":{"account_id":320241,"reputation":2134,"user_id":638413,"accept_rate":100,"display_name":"Daniel Steinmann"},"score":0,"creation_date":1586848479,"post_id":61194451,"comment_id":108271139,"body_markdown":"Where did you put your `application.properties`? I have a feeling the config is not picked up during test execution so the code runs with the default configuration `localhost(1414)`.","body":"Where did you put your <code>application.properties</code>? I have a feeling the config is not picked up during test execution so the code runs with the default configuration <code>localhost(1414)</code>."},{"owner":{"account_id":2804587,"reputation":1686,"user_id":2412077,"accept_rate":25,"display_name":"loganrussell48"},"score":1,"creation_date":1589492816,"post_id":61194451,"comment_id":109325110,"body_markdown":"Were you ever able to figure this out?","body":"Were you ever able to figure this out?"}],"answers":[{"tags":[],"owner":{"account_id":13071481,"reputation":888,"user_id":9444909,"display_name":"Mark Taylor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586806719,"creation_date":1586806719,"answer_id":61195441,"question_id":61194451,"body_markdown":"`hostname` and `port` are not valid properties. Use `ibm.mq.connName` as the documentation and samples show.","title":"IBM MQ JMS application with Spring Boot. Getting exception:IBM MQ call failed &#39;2538&#39; (&#39;MQRC_HOST_NOT_AVAILABLE&#39;)","body":"<p><code>hostname</code> and <code>port</code> are not valid properties. Use <code>ibm.mq.connName</code> as the documentation and samples show.</p>\n"},{"tags":[],"owner":{"account_id":22153965,"reputation":1,"user_id":16402029,"display_name":"Anubhav Jana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625687479,"creation_date":1625687479,"answer_id":68292254,"question_id":61194451,"body_markdown":"You properties file should be in below format.\r\n\r\n    ibm.mq.queueManager=QM1\r\n    ibm.mq.channel=DEV.ADMIN.SVRCONN\r\n    ibm.mq.connName=localhost(1414)\r\n    ibm.mq.user=admin\r\n    ibm.mq.password=passw0rd\r\n\r\nhttps://developer.ibm.com/components/ibm-mq/tutorials/mq-jms-application-development-with-spring-boot/","title":"IBM MQ JMS application with Spring Boot. Getting exception:IBM MQ call failed &#39;2538&#39; (&#39;MQRC_HOST_NOT_AVAILABLE&#39;)","body":"<p>You properties file should be in below format.</p>\n<pre><code>ibm.mq.queueManager=QM1\nibm.mq.channel=DEV.ADMIN.SVRCONN\nibm.mq.connName=localhost(1414)\nibm.mq.user=admin\nibm.mq.password=passw0rd\n</code></pre>\n<p><a href=\"https://developer.ibm.com/components/ibm-mq/tutorials/mq-jms-application-development-with-spring-boot/\" rel=\"nofollow noreferrer\">https://developer.ibm.com/components/ibm-mq/tutorials/mq-jms-application-development-with-spring-boot/</a></p>\n"}],"owner":{"account_id":7246067,"reputation":783,"user_id":5527914,"accept_rate":75,"display_name":"Harleen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700701520,"creation_date":1586803237,"question_id":61194451,"body_markdown":"I tried to create Spring boot IBM MQ application with Spring JMS.\r\n\r\nMaven (`pom.xml`):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.1.4.RELEASE &lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;mqspring&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;mqspring&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;webSphereMQVersion&gt;7.5.0.1&lt;/webSphereMQVersion&gt;\r\n    \t\t&lt;springJMSVersion&gt;4.0.0.RELEASE&lt;/springJMSVersion&gt;\r\n    \t&lt;/properties&gt;\r\n\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.ibm.mq&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mq-jms-spring-boot-starter&lt;/artifactId&gt; \r\n    \t\t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/javax.jms/jms --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.jms&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jms&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t &lt;dependency&gt; \r\n                &lt;groupId&gt;com.ibm.mq&lt;/groupId&gt; \r\n                &lt;artifactId&gt;com.ibm.mq.allclient&lt;/artifactId&gt; \r\n                &lt;version&gt;9.0.5.0&lt;/version&gt; \r\n            &lt;/dependency&gt; \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;addResources&gt;true&lt;/addResources&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nJava:\r\n\r\n```Java\r\n@EnableJms\r\n@SpringBootApplication\r\npublic class MqspringApplication {\r\n\r\n\t@Autowired\r\n\tprivate JmsTemplate jmsTemplate;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(MqspringApplication.class, args);\r\n\t}\r\n\r\n}\r\n\r\n@PropertySource(ignoreResourceNotFound = true, value = &quot;classpath:application.properties&quot;)\r\n@Component\r\npublic class MessageSender\r\n{\r\n\t@Autowired\r\n\tprivate JmsTemplate jmsTemplate;\r\n\t\t\r\n\t@Value(&quot;${ibm.mq.queue}&quot;)\r\n\tprivate String destination;\r\n\r\n\tpublic void sendMessage() {\r\n\t\tjmsTemplate.send(destination, new MessageCreator() {\r\n\t\t\tpublic Message createMessage(Session session) throws JMSException {\r\n\t\t\t\treturn session.createTextMessage(&quot;ABC&quot;);\r\n\t\t\t}\r\n\t\t});  \t\t\r\n\t}    \t\r\n}\r\n\r\n@Component\r\n@PropertySource(ignoreResourceNotFound = true, value = &quot;classpath:application.properties&quot;)\r\npublic class MessageReceiver {\r\n\r\n@Autowired\r\nprivate JmsTemplate jmsTemplate;\r\n\r\n\t@JmsListener(destination = &quot;ibm.mq.queue&quot;)\r\n\tpublic String readMessage() throws JMSException {\r\n\t\tSystem.out.println(&quot;Recieve&quot;);\r\n\t\tString message = null;\r\n\t\tObject msg =  jmsTemplate.receiveAndConvert();\r\n\t\tSystem.out.println(&quot;Message:::: &quot;+msg.toString());\r\n\t\tif(msg instanceof TextMessage) {\r\n\t\t\tmessage = ((TextMessage) msg).getText();\r\n\t\t\tSystem.out.println(&quot;Message&quot; + message);\r\n\t\t}\r\n\t\t\r\n\t\treturn message;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nConfig (`application.properties`):\r\n\r\n    ibm.mq.queueManager=MQS1\r\n    ibm.mq.queue=IDSMQ.REQUEST.FROM.RTPMQ\r\n    ibm.mq.hostname=localhost\r\n    ibm.mq.port=1415\r\n\r\nTests:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringBootTest(classes  = MqspringApplication.class)\r\n    public class SimpleListenerTest {\r\n         \r\n        @Autowired\r\n        private MessageSender msgService;\r\n         \r\n        @Autowired\r\n        private MessageReceiver msgReceiver;\r\n         \r\n        @Test\r\n        public void sendSimpleMessageSender() throws JMSException {\r\n        \tmsgService.sendMessage();   \t\r\n        }\r\n        \r\n        @Test\r\n        public void sendSimpleMessageReceiver() throws JMSException {\r\n        \t msgReceiver.readMessage();       \t\r\n        }      \r\n    }\r\n\r\nWhen I execute the test cases I am unable to connect to the IBM MQ. Getting exception:\r\n\r\n    org.springframework.jms.IllegalStateException: JMSWMQ0018: Failed to connect to queue manager &#39;MQS1&#39; with connection mode &#39;Client&#39; and host name &#39;localhost(1414)&#39;.; nested exception is com.ibm.msg.client.jms.DetailedIllegalStateException: JMSWMQ0018: Failed to connect to queue manager &#39;MQS1&#39; with connection mode &#39;Client&#39; and host name &#39;localhost(1414)&#39;.\r\n    Check the queue manager is started and if running in client mode, check there is a listener running. Please see the linked exception for more information.; nested exception is com.ibm.mq.MQException: JMSCMQ0001: IBM MQ call failed with compcode &#39;2&#39; (&#39;MQCC_FAILED&#39;) reason &#39;2538&#39; (&#39;MQRC_HOST_NOT_AVAILABLE&#39;).\r\n    \tat org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:274)\r\n    \tat org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185)\r\n    \tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507)\r\n    \tat org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584)\r\n    \tat com.example.mqspring.MessageService.sendMessage(MessageService.java:42)\r\n    \tat com.example.mqspring.SimpleListenerTest.sendSimpleMessage(SimpleListenerTest.java:26)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n    \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\r\n    \tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n    \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\r\n    Caused by: com.ibm.msg.client.jms.DetailedIllegalStateException: JMSWMQ0018: Failed to connect to queue manager &#39;MQS1&#39; with connection mode &#39;Client&#39; and host name &#39;localhost(1414)&#39;.\r\n    Check the queue manager is started and if running in client mode, check there is a listener running. Please see the linked exception for more information.\r\n    \tat com.ibm.msg.client.wmq.common.internal.Reason.reasonToException(Reason.java:489)\r\n    \tat com.ibm.msg.client.wmq.common.internal.Reason.createException(Reason.java:215)\r\n    \tat com.ibm.msg.client.wmq.internal.WMQConnection.&lt;init&gt;(WMQConnection.java:424)\r\n    \tat com.ibm.msg.client.wmq.factories.WMQConnectionFactory.createV7ProviderConnection(WMQConnectionFactory.java:8475)\r\n    \tat com.ibm.msg.client.wmq.factories.WMQConnectionFactory.createProviderConnection(WMQConnectionFactory.java:7815)\r\n    \tat com.ibm.msg.client.jms.admin.JmsConnectionFactoryImpl._createConnection(JmsConnectionFactoryImpl.java:303)\r\n    \tat com.ibm.msg.client.jms.admin.JmsConnectionFactoryImpl.createConnection(JmsConnectionFactoryImpl.java:236)\r\n    \tat com.ibm.mq.jms.MQConnectionFactory.createCommonConnection(MQConnectionFactory.java:6016)\r\n    \tat com.ibm.mq.jms.MQConnectionFactory.createConnection(MQConnectionFactory.java:6041)\r\n    \tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196)\r\n    \tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494)\r\n    \t... 34 more\r\n    Caused by: com.ibm.mq.MQException: JMSCMQ0001: IBM MQ call failed with compcode &#39;2&#39; (&#39;MQCC_FAILED&#39;) reason &#39;2538&#39; (&#39;MQRC_HOST_NOT_AVAILABLE&#39;).\r\n    \tat com.ibm.msg.client.wmq.common.internal.Reason.createException(Reason.java:203)\r\n    \t... 43 more\r\n    Caused by: com.ibm.mq.jmqi.JmqiException: CC=2;RC=2538;AMQ9204: Connection to host &#39;localhost(1414)&#39; rejected. [1=com.ibm.mq.jmqi.JmqiException[CC=2;RC=2538;AMQ9213\r\n\r\nCan someone please help me to understand why I am getting above error.\r\nIf I am giving port 1415, Why its trying to connect to localhost(1414)?\r\n\r\nI have checked listener, LISTENER.TCP is running on port 1415. Why is not connecting to Queue Manager `MQS1`?\r\n\r\nI have Websphere MQ 7.5.0 version installed but dependency \r\n`com.ibm.mq.allclient` points to version 9.0.5.0. Does it create any problem? \r\n\r\n\r\n","title":"IBM MQ JMS application with Spring Boot. Getting exception:IBM MQ call failed &#39;2538&#39; (&#39;MQRC_HOST_NOT_AVAILABLE&#39;)","body":"<p>I tried to create Spring boot IBM MQ application with Spring JMS.</p>\n\n<p>Maven (<code>pom.xml</code>):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.4.RELEASE &lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;mqspring&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;mqspring&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;webSphereMQVersion&gt;7.5.0.1&lt;/webSphereMQVersion&gt;\n        &lt;springJMSVersion&gt;4.0.0.RELEASE&lt;/springJMSVersion&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.ibm.mq&lt;/groupId&gt;\n            &lt;artifactId&gt;mq-jms-spring-boot-starter&lt;/artifactId&gt; \n            &lt;version&gt;2.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.jms/jms --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.jms&lt;/groupId&gt;\n            &lt;artifactId&gt;jms&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n         &lt;dependency&gt; \n            &lt;groupId&gt;com.ibm.mq&lt;/groupId&gt; \n            &lt;artifactId&gt;com.ibm.mq.allclient&lt;/artifactId&gt; \n            &lt;version&gt;9.0.5.0&lt;/version&gt; \n        &lt;/dependency&gt; \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;addResources&gt;true&lt;/addResources&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>@EnableJms\n@SpringBootApplication\npublic class MqspringApplication {\n\n    @Autowired\n    private JmsTemplate jmsTemplate;\n\n    public static void main(String[] args) {\n        SpringApplication.run(MqspringApplication.class, args);\n    }\n\n}\n\n@PropertySource(ignoreResourceNotFound = true, value = \"classpath:application.properties\")\n@Component\npublic class MessageSender\n{\n    @Autowired\n    private JmsTemplate jmsTemplate;\n\n    @Value(\"${ibm.mq.queue}\")\n    private String destination;\n\n    public void sendMessage() {\n        jmsTemplate.send(destination, new MessageCreator() {\n            public Message createMessage(Session session) throws JMSException {\n                return session.createTextMessage(\"ABC\");\n            }\n        });         \n    }       \n}\n\n@Component\n@PropertySource(ignoreResourceNotFound = true, value = \"classpath:application.properties\")\npublic class MessageReceiver {\n\n@Autowired\nprivate JmsTemplate jmsTemplate;\n\n    @JmsListener(destination = \"ibm.mq.queue\")\n    public String readMessage() throws JMSException {\n        System.out.println(\"Recieve\");\n        String message = null;\n        Object msg =  jmsTemplate.receiveAndConvert();\n        System.out.println(\"Message:::: \"+msg.toString());\n        if(msg instanceof TextMessage) {\n            message = ((TextMessage) msg).getText();\n            System.out.println(\"Message\" + message);\n        }\n\n        return message;\n    }\n\n}\n</code></pre>\n\n<p>Config (<code>application.properties</code>):</p>\n\n<pre><code>ibm.mq.queueManager=MQS1\nibm.mq.queue=IDSMQ.REQUEST.FROM.RTPMQ\nibm.mq.hostname=localhost\nibm.mq.port=1415\n</code></pre>\n\n<p>Tests:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringBootTest(classes  = MqspringApplication.class)\npublic class SimpleListenerTest {\n\n    @Autowired\n    private MessageSender msgService;\n\n    @Autowired\n    private MessageReceiver msgReceiver;\n\n    @Test\n    public void sendSimpleMessageSender() throws JMSException {\n        msgService.sendMessage();       \n    }\n\n    @Test\n    public void sendSimpleMessageReceiver() throws JMSException {\n         msgReceiver.readMessage();         \n    }      \n}\n</code></pre>\n\n<p>When I execute the test cases I am unable to connect to the IBM MQ. Getting exception:</p>\n\n<pre><code>org.springframework.jms.IllegalStateException: JMSWMQ0018: Failed to connect to queue manager 'MQS1' with connection mode 'Client' and host name 'localhost(1414)'.; nested exception is com.ibm.msg.client.jms.DetailedIllegalStateException: JMSWMQ0018: Failed to connect to queue manager 'MQS1' with connection mode 'Client' and host name 'localhost(1414)'.\nCheck the queue manager is started and if running in client mode, check there is a listener running. Please see the linked exception for more information.; nested exception is com.ibm.mq.MQException: JMSCMQ0001: IBM MQ call failed with compcode '2' ('MQCC_FAILED') reason '2538' ('MQRC_HOST_NOT_AVAILABLE').\n    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:274)\n    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185)\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507)\n    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584)\n    at com.example.mqspring.MessageService.sendMessage(MessageService.java:42)\n    at com.example.mqspring.SimpleListenerTest.sendSimpleMessage(SimpleListenerTest.java:26)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)\n    at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\n    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\n    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\nCaused by: com.ibm.msg.client.jms.DetailedIllegalStateException: JMSWMQ0018: Failed to connect to queue manager 'MQS1' with connection mode 'Client' and host name 'localhost(1414)'.\nCheck the queue manager is started and if running in client mode, check there is a listener running. Please see the linked exception for more information.\n    at com.ibm.msg.client.wmq.common.internal.Reason.reasonToException(Reason.java:489)\n    at com.ibm.msg.client.wmq.common.internal.Reason.createException(Reason.java:215)\n    at com.ibm.msg.client.wmq.internal.WMQConnection.&lt;init&gt;(WMQConnection.java:424)\n    at com.ibm.msg.client.wmq.factories.WMQConnectionFactory.createV7ProviderConnection(WMQConnectionFactory.java:8475)\n    at com.ibm.msg.client.wmq.factories.WMQConnectionFactory.createProviderConnection(WMQConnectionFactory.java:7815)\n    at com.ibm.msg.client.jms.admin.JmsConnectionFactoryImpl._createConnection(JmsConnectionFactoryImpl.java:303)\n    at com.ibm.msg.client.jms.admin.JmsConnectionFactoryImpl.createConnection(JmsConnectionFactoryImpl.java:236)\n    at com.ibm.mq.jms.MQConnectionFactory.createCommonConnection(MQConnectionFactory.java:6016)\n    at com.ibm.mq.jms.MQConnectionFactory.createConnection(MQConnectionFactory.java:6041)\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196)\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494)\n    ... 34 more\nCaused by: com.ibm.mq.MQException: JMSCMQ0001: IBM MQ call failed with compcode '2' ('MQCC_FAILED') reason '2538' ('MQRC_HOST_NOT_AVAILABLE').\n    at com.ibm.msg.client.wmq.common.internal.Reason.createException(Reason.java:203)\n    ... 43 more\nCaused by: com.ibm.mq.jmqi.JmqiException: CC=2;RC=2538;AMQ9204: Connection to host 'localhost(1414)' rejected. [1=com.ibm.mq.jmqi.JmqiException[CC=2;RC=2538;AMQ9213\n</code></pre>\n\n<p>Can someone please help me to understand why I am getting above error.\nIf I am giving port 1415, Why its trying to connect to localhost(1414)?</p>\n\n<p>I have checked listener, LISTENER.TCP is running on port 1415. Why is not connecting to Queue Manager <code>MQS1</code>?</p>\n\n<p>I have Websphere MQ 7.5.0 version installed but dependency \n<code>com.ibm.mq.allclient</code> points to version 9.0.5.0. Does it create any problem? </p>\n"},{"tags":["java","filenotfoundexception"],"comments":[{"owner":{"account_id":376436,"reputation":5890,"user_id":1969893,"display_name":"Steinar"},"score":7,"creation_date":1381445959,"post_id":19307622,"comment_id":28595260,"body_markdown":"What is current directory? Try printing `new File(&quot;.&quot;)`","body":"What is current directory? Try printing <code>new File(&quot;.&quot;)</code>"},{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":5,"creation_date":1381445998,"post_id":19307622,"comment_id":28595271,"body_markdown":"Print the path of `new File(&quot;scores.dat&quot;)` and double-check to see if it exists in the expected directory.","body":"Print the path of <code>new File(&quot;scores.dat&quot;)</code> and double-check to see if it exists in the expected directory."},{"owner":{"account_id":2308957,"reputation":7288,"user_id":2027567,"accept_rate":91,"display_name":"scrblnrd3"},"score":0,"creation_date":1381446218,"post_id":19307622,"comment_id":28595338,"body_markdown":"@Steinar it is searching in the correct directory, and it is giving the correct absolute path, however, the file is still not found","body":"@Steinar it is searching in the correct directory, and it is giving the correct absolute path, however, the file is still not found"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1381446286,"post_id":19307622,"comment_id":28595359,"body_markdown":"Is this on a Unix machine? If so, please post the output of `ls -la` from the directory where you&#39;re running `java`.","body":"Is this on a Unix machine? If so, please post the output of <code>ls -la</code> from the directory where you&#39;re running <code>java</code>."},{"owner":{"account_id":376436,"reputation":5890,"user_id":1969893,"display_name":"Steinar"},"score":0,"creation_date":1381446514,"post_id":19307622,"comment_id":28595416,"body_markdown":"More stuff to try out: What does `new File(&quot;scores.dat&quot;).exists()` return? What does `new File(&quot;.&quot;).listFiles()` returns? Do you find your file in the list? If you pick that instance, does it work with the scanner?","body":"More stuff to try out: What does <code>new File(&quot;scores.dat&quot;).exists()</code> return? What does <code>new File(&quot;.&quot;).listFiles()</code> returns? Do you find your file in the list? If you pick that instance, does it work with the scanner?"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1381448238,"post_id":19307622,"comment_id":28595923,"body_markdown":"What is the text of the exception?","body":"What is the text of the exception?"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":6,"creation_date":1381456407,"post_id":19307622,"comment_id":28597708,"body_markdown":"It&#39;s almost certain that you&#39;re in the wrong directory.  Print `new File(&quot;scores.dat&quot;).getAbsolutePath()` and make sure the file&#39;s really in that location.","body":"It&#39;s almost certain that you&#39;re in the wrong directory.  Print <code>new File(&quot;scores.dat&quot;).getAbsolutePath()</code> and make sure the file&#39;s really in that location."},{"owner":{"account_id":13557110,"reputation":659,"user_id":9780149,"display_name":"Csa77"},"score":0,"creation_date":1567064073,"post_id":19307622,"comment_id":101852978,"body_markdown":"just as a side note, I was getting this error by calling `new File().getName()` instead of `new File().getAbsolutePath()`, even though `getName()` returned the correct path, it did not include `file:` at the beginning of the String.","body":"just as a side note, I was getting this error by calling <code>new File().getName()</code> instead of <code>new File().getAbsolutePath()</code>, even though <code>getName()</code> returned the correct path, it did not include <code>file:</code> at the beginning of the String."}],"answers":[{"tags":[],"owner":{"account_id":3403175,"reputation":22394,"user_id":2854908,"accept_rate":95,"display_name":"libik"},"down_vote_count":2,"up_vote_count":58,"is_accepted":false,"score":56,"last_activity_date":1564865478,"creation_date":1381446184,"answer_id":19307663,"question_id":19307622,"body_markdown":"The code itself is working correctly. The problem is, that the program working path is pointing to other place than you think.\r\n\r\nUse this line and see where the path is:\r\n\r\n    System.out.println(new File(&quot;.&quot;).getAbsoluteFile());","title":"Java says FileNotFoundException but file exists","body":"<p>The code itself is working correctly. The problem is, that the program working path is pointing to other place than you think.</p>\n\n<p>Use this line and see where the path is:</p>\n\n<pre><code>System.out.println(new File(\".\").getAbsoluteFile());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":397289,"reputation":17010,"user_id":761330,"accept_rate":97,"display_name":"Terry Li"},"down_vote_count":2,"up_vote_count":97,"is_accepted":true,"score":95,"last_activity_date":1632464121,"creation_date":1381457536,"answer_id":19309163,"question_id":19307622,"body_markdown":"There are a number situation where a `FileNotFoundException` may be thrown at runtime.\r\n\r\n1. The named file does not exist.  This could be for a number of reasons including:\r\n\r\n    - The pathname is simply wrong\r\n    - The pathname looks correct but is actually wrong because it contains non-printing characters (or homoglyphs) that you did not notice\r\n    - The pathname is relative, and it doesn&#39;t resolve correctly relative to  the *actual* current directory of the running application.  This typically happens because the application&#39;s current directory is not what you are expecting or assuming.\r\n    - The path to the file is is broken; e.g. a directory name of the path is incorrect, a symbolic link on the path is broken, or there is a permission problem with one of the path components.\r\n\r\n2. The named file is actually a directory.\r\n3. The named file cannot be opened for reading for some reason.\r\n\r\nThe good news that, the problem will *inevitably* be one of the above.  It is just a matter of working out which.  Here are some things that you can try:\r\n\r\n- Calling `file.exists()` will tell you if any file system object exists with the given name / pathname.\r\n- Calling `file.isDirectory()` will test if it is a directory.\r\n- Calling `file.canRead()` will test if it is a readable file.\r\n- This line will tell you what the current directory is:\r\n\r\n        System.out.println(new File(&quot;.&quot;).getAbsolutePath());\r\n\r\n- This line will print out the pathname in a way that makes it easier to spot things like unexpected leading or trailing whitespace:\r\n\r\n        System.out.println(&quot;The path is &#39;&quot; + path + &quot;&#39;&quot;);\r\n\r\n  Look for unexpected spaces, line breaks, etc in the output.\r\n\r\n----------------------------------\r\n\r\nIt turns out that your example code has a compilation error.\r\n\r\nI ran your code without taking care of the complaint from Netbeans, only to get the following exception message:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.RuntimeException: Uncompilable\r\n&gt; source code - unreported exception java.io.FileNotFoundException; must\r\n&gt; be caught or declared to be thrown\r\n\r\nIf you change your code to the following, it will fix *that* problem.\r\n\r\n    public static void main(String[] args) throws FileNotFoundException {    \r\n        File file = new File(&quot;scores.dat&quot;);\r\n        System.out.println(file.exists());\r\n        Scanner scan = new Scanner(file);\r\n    }\r\n\r\n*Explanation*: the `Scanner(File)` constructor is declared as throwing the `FileNotFoundException` exception.  (It happens the scanner it cannot open the file.)  Now `FileNotFoundException` is a *checked exception*.  That means that a method in which the exception *may be* thrown *must* either catch the exception or declare it in the `throws` clause.  The above fix takes the latter approach.\r\n&lt;!-- ten character edit limit --&gt;","title":"Java says FileNotFoundException but file exists","body":"<p>There are a number situation where a <code>FileNotFoundException</code> may be thrown at runtime.</p>\n<ol>\n<li><p>The named file does not exist.  This could be for a number of reasons including:</p>\n<ul>\n<li>The pathname is simply wrong</li>\n<li>The pathname looks correct but is actually wrong because it contains non-printing characters (or homoglyphs) that you did not notice</li>\n<li>The pathname is relative, and it doesn't resolve correctly relative to  the <em>actual</em> current directory of the running application.  This typically happens because the application's current directory is not what you are expecting or assuming.</li>\n<li>The path to the file is is broken; e.g. a directory name of the path is incorrect, a symbolic link on the path is broken, or there is a permission problem with one of the path components.</li>\n</ul>\n</li>\n<li><p>The named file is actually a directory.</p>\n</li>\n<li><p>The named file cannot be opened for reading for some reason.</p>\n</li>\n</ol>\n<p>The good news that, the problem will <em>inevitably</em> be one of the above.  It is just a matter of working out which.  Here are some things that you can try:</p>\n<ul>\n<li><p>Calling <code>file.exists()</code> will tell you if any file system object exists with the given name / pathname.</p>\n</li>\n<li><p>Calling <code>file.isDirectory()</code> will test if it is a directory.</p>\n</li>\n<li><p>Calling <code>file.canRead()</code> will test if it is a readable file.</p>\n</li>\n<li><p>This line will tell you what the current directory is:</p>\n<pre><code>  System.out.println(new File(&quot;.&quot;).getAbsolutePath());\n</code></pre>\n</li>\n<li><p>This line will print out the pathname in a way that makes it easier to spot things like unexpected leading or trailing whitespace:</p>\n<pre><code>  System.out.println(&quot;The path is '&quot; + path + &quot;'&quot;);\n</code></pre>\n<p>Look for unexpected spaces, line breaks, etc in the output.</p>\n</li>\n</ul>\n<hr />\n<p>It turns out that your example code has a compilation error.</p>\n<p>I ran your code without taking care of the complaint from Netbeans, only to get the following exception message:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.RuntimeException: Uncompilable\nsource code - unreported exception java.io.FileNotFoundException; must\nbe caught or declared to be thrown</p>\n</blockquote>\n<p>If you change your code to the following, it will fix <em>that</em> problem.</p>\n<pre><code>public static void main(String[] args) throws FileNotFoundException {    \n    File file = new File(&quot;scores.dat&quot;);\n    System.out.println(file.exists());\n    Scanner scan = new Scanner(file);\n}\n</code></pre>\n<p><em>Explanation</em>: the <code>Scanner(File)</code> constructor is declared as throwing the <code>FileNotFoundException</code> exception.  (It happens the scanner it cannot open the file.)  Now <code>FileNotFoundException</code> is a <em>checked exception</em>.  That means that a method in which the exception <em>may be</em> thrown <em>must</em> either catch the exception or declare it in the <code>throws</code> clause.  The above fix takes the latter approach.</p>\n\n"},{"tags":[],"owner":{"account_id":121785,"reputation":823,"user_id":315127,"accept_rate":60,"display_name":"petehern"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1700701342,"creation_date":1431051511,"answer_id":30114756,"question_id":19307622,"body_markdown":"It turned out that the file didn&#39;t exist, even though it looked like it did. The problem was that Windows 7 was configured to &quot;Hide file extensions for known file types.&quot; This means that if file appears to have the name &quot;data.txt&quot; its **actual** filename is &quot;data.txt.txt&quot;.","title":"Java says FileNotFoundException but file exists","body":"<p>It turned out that the file didn't exist, even though it looked like it did. The problem was that Windows 7 was configured to &quot;Hide file extensions for known file types.&quot; This means that if file appears to have the name &quot;data.txt&quot; its <strong>actual</strong> filename is &quot;data.txt.txt&quot;.</p>\n"},{"tags":[],"owner":{"account_id":2985164,"reputation":5188,"user_id":2534191,"accept_rate":25,"display_name":"Yuriy N."},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1564806628,"creation_date":1470902103,"answer_id":38890470,"question_id":19307622,"body_markdown":"I recently found interesting case that produces FileNotFoundExeption when file is obviously exists on the disk. \r\nIn my program I read file path from another text file and create File object: \r\n\r\n    //String path was read from file\r\n    System.out.println(path); //file with exactly same visible path exists on disk\r\n    File file = new File(path); \r\n    System.out.println(file.exists());  //false\r\n\tSystem.out.println(file.canRead());  //false\r\n    FileInputStream fis = new FileInputStream(file);  // FileNotFoundExeption \r\n\r\nThe cause of the problem was that the path contained invisible `\\r\\n` characters at the end.\r\n\r\nThe fix in my case was: \r\n\r\n    File file = new File(path.trim()); \r\n\r\nTo generalize a bit, the invisible / non-printing characters could have include space or tab characters, and possibly others, and they could have appeared at the beginning of the path, at the end, or embedded in the path.  Trim will work in some cases but not all.  There are a couple of things that you can help to spot this kind of problem:\r\n\r\n  1.  Output the pathname with quote characters around it; e.g.\r\n\r\n          System.out.println(&quot;Check me! &#39;&quot; + path + &quot;&#39;&quot;);\r\n\r\n      and carefully check the output for spaces and line breaks where they shouldn&#39;t be.\r\n\r\n  2.  Use a Java debugger to carefully examine the pathname string, character by character, looking for characters that shouldn&#39;t be there.  (Also check for homoglyph characters!)","title":"Java says FileNotFoundException but file exists","body":"<p>I recently found interesting case that produces FileNotFoundExeption when file is obviously exists on the disk. \nIn my program I read file path from another text file and create File object: </p>\n\n<pre><code>//String path was read from file\nSystem.out.println(path); //file with exactly same visible path exists on disk\nFile file = new File(path); \nSystem.out.println(file.exists());  //false\nSystem.out.println(file.canRead());  //false\nFileInputStream fis = new FileInputStream(file);  // FileNotFoundExeption \n</code></pre>\n\n<p>The cause of the problem was that the path contained invisible <code>\\r\\n</code> characters at the end.</p>\n\n<p>The fix in my case was: </p>\n\n<pre><code>File file = new File(path.trim()); \n</code></pre>\n\n<p>To generalize a bit, the invisible / non-printing characters could have include space or tab characters, and possibly others, and they could have appeared at the beginning of the path, at the end, or embedded in the path.  Trim will work in some cases but not all.  There are a couple of things that you can help to spot this kind of problem:</p>\n\n<ol>\n<li><p>Output the pathname with quote characters around it; e.g.</p>\n\n<pre><code>  System.out.println(\"Check me! '\" + path + \"'\");\n</code></pre>\n\n<p>and carefully check the output for spaces and line breaks where they shouldn't be.</p></li>\n<li><p>Use a Java debugger to carefully examine the pathname string, character by character, looking for characters that shouldn't be there.  (Also check for homoglyph characters!)</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3111293,"reputation":98,"user_id":2632964,"display_name":"Alok"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700701396,"creation_date":1495893549,"answer_id":44217735,"question_id":19307622,"body_markdown":"If you are reading the path through Scanner or through command line args, instead of copy pasting the path directly from Windows Explorer just **manually type in the path.**","title":"Java says FileNotFoundException but file exists","body":"<p>If you are reading the path through Scanner or through command line args, instead of copy pasting the path directly from Windows Explorer just <strong>manually type in the path.</strong></p>\n"},{"tags":[],"owner":{"account_id":7801561,"reputation":113,"user_id":5900817,"display_name":"morphytronx"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1499432604,"creation_date":1499432273,"answer_id":44971385,"question_id":19307622,"body_markdown":"Reading and writing from and to a file can be blocked by your OS depending on the file&#39;s permission attributes.\r\n\r\nIf you are trying to read from the file, then I recommend using File&#39;s setReadable method to set it to true, or, this code for instance:\r\n    \r\n    String arbitrary_path = &quot;C:/Users/Username/Blah.txt&quot;;\r\n    byte[] data_of_file;\r\n    File f = new File(arbitrary_path);\r\n    f.setReadable(true);\r\n    data_of_file = Files.readAllBytes(f);\r\n    f.setReadable(false); // do this if you want to prevent un-knowledgeable \r\n                          //programmers from accessing your file.\r\n\r\nIf you are trying to write to the file, then I recommend using File&#39;s setWritable method to set it to true, or, this code for instance:\r\n    \r\n    String arbitrary_path = &quot;C:/Users/Username/Blah.txt&quot;;\r\n    byte[] data_of_file = { (byte) 0x00, (byte) 0xFF, (byte) 0xEE };\r\n    File f = new File(arbitrary_path);\r\n    f.setWritable(true);\r\n    Files.write(f, byte_array);\r\n    f.setWritable(false); // do this if you want to prevent un-knowledgeable \r\n                          //programmers from changing your file (for security.)","title":"Java says FileNotFoundException but file exists","body":"<p>Reading and writing from and to a file can be blocked by your OS depending on the file's permission attributes.</p>\n\n<p>If you are trying to read from the file, then I recommend using File's setReadable method to set it to true, or, this code for instance:</p>\n\n<pre><code>String arbitrary_path = \"C:/Users/Username/Blah.txt\";\nbyte[] data_of_file;\nFile f = new File(arbitrary_path);\nf.setReadable(true);\ndata_of_file = Files.readAllBytes(f);\nf.setReadable(false); // do this if you want to prevent un-knowledgeable \n                      //programmers from accessing your file.\n</code></pre>\n\n<p>If you are trying to write to the file, then I recommend using File's setWritable method to set it to true, or, this code for instance:</p>\n\n<pre><code>String arbitrary_path = \"C:/Users/Username/Blah.txt\";\nbyte[] data_of_file = { (byte) 0x00, (byte) 0xFF, (byte) 0xEE };\nFile f = new File(arbitrary_path);\nf.setWritable(true);\nFiles.write(f, byte_array);\nf.setWritable(false); // do this if you want to prevent un-knowledgeable \n                      //programmers from changing your file (for security.)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14587641,"reputation":61,"user_id":10535882,"display_name":"Irina Larisa"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1700701514,"creation_date":1540119874,"answer_id":52914622,"question_id":19307622,"body_markdown":"Move the files out of src and into the main folder of the project.","title":"Java says FileNotFoundException but file exists","body":"<p>Move the files out of src and into the main folder of the project.</p>\n"},{"tags":[],"owner":{"account_id":6234234,"reputation":71,"user_id":4850015,"display_name":"lewiscool"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1557608328,"creation_date":1557593799,"answer_id":56092473,"question_id":19307622,"body_markdown":"I had this same error and solved it simply by adding the src directory that is found in Java project structure.\r\n\r\n   \r\n\r\n    String path = System.getProperty(&quot;user.dir&quot;) + &quot;\\\\src\\\\package_name\\\\file_name&quot;;\r\n    File file = new File(path);\r\n    Scanner scanner = new Scanner(file);\r\n\r\nNotice that System.getProperty(&quot;user.dir&quot;) and new File(&quot;.&quot;).getAbsolutePath() return your project root directory path, so you have to add the path to your subdirectories and packages\r\n","title":"Java says FileNotFoundException but file exists","body":"<p>I had this same error and solved it simply by adding the src directory that is found in Java project structure.</p>\n\n<pre><code>String path = System.getProperty(\"user.dir\") + \"\\\\src\\\\package_name\\\\file_name\";\nFile file = new File(path);\nScanner scanner = new Scanner(file);\n</code></pre>\n\n<p>Notice that System.getProperty(\"user.dir\") and new File(\".\").getAbsolutePath() return your project root directory path, so you have to add the path to your subdirectories and packages</p>\n"},{"tags":[],"owner":{"account_id":2914893,"reputation":3215,"user_id":2498327,"accept_rate":86,"display_name":"Aditya Vikas Devarapalli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578066010,"creation_date":1578066010,"answer_id":59581348,"question_id":19307622,"body_markdown":"You&#39;d obviously figure it out after a while but just posting this so that it might help someone. This could also happen when your file path contains any whitespace appended or prepended to it.\r\n","title":"Java says FileNotFoundException but file exists","body":"<p>You'd obviously figure it out after a while but just posting this so that it might help someone. This could also happen when your file path contains any whitespace appended or prepended to it.</p>\n"},{"tags":[],"owner":{"account_id":17812449,"reputation":1,"user_id":12936712,"display_name":"Lefin K.R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582270254,"creation_date":1582264561,"answer_id":60332896,"question_id":19307622,"body_markdown":"Use single  forward slash and always type the path manually. For example:                                                        \r\n\r\n    FileInputStream fi= new FileInputStream(&quot;D:/excelfiles/myxcel.xlsx&quot;);","title":"Java says FileNotFoundException but file exists","body":"<p>Use single  forward slash and always type the path manually. For example:                                                        </p>\n\n<pre><code>FileInputStream fi= new FileInputStream(\"D:/excelfiles/myxcel.xlsx\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10649496,"reputation":633,"user_id":8211365,"display_name":"tejasvi88"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615192273,"creation_date":1615192273,"answer_id":66526509,"question_id":19307622,"body_markdown":"What worked for me was catching the exception. Without it the compiler complains even if the file exists.\r\n\r\n```java\r\nInputStream file = new FileInputStream(&quot;filename&quot;);\r\n```\r\n\r\nchanged to\r\n\r\n```java\r\ntry{\r\n    InputStream file = new FileInputStream(&quot;filename&quot;);\r\n    System.out.println(file.available());\r\n}\r\ncatch (Exception e){\r\n    System.out.println(e);\r\n}\r\n```","title":"Java says FileNotFoundException but file exists","body":"<p>What worked for me was catching the exception. Without it the compiler complains even if the file exists.</p>\n<pre class=\"lang-java prettyprint-override\"><code>InputStream file = new FileInputStream(&quot;filename&quot;);\n</code></pre>\n<p>changed to</p>\n<pre class=\"lang-java prettyprint-override\"><code>try{\n    InputStream file = new FileInputStream(&quot;filename&quot;);\n    System.out.println(file.available());\n}\ncatch (Exception e){\n    System.out.println(e);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24516581,"reputation":1,"user_id":18430239,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650887992,"creation_date":1650887854,"answer_id":71999175,"question_id":19307622,"body_markdown":"This works for me. It also can read files such txt, csv and .in\r\n```\r\npublic class NewReader {\r\n\r\n    public void read() throws FileNotFoundException, URISyntaxException {\r\n        File file = new File(Objects.requireNonNull(NewReader.class.getResource(&quot;/test.txt&quot;)).toURI());\r\n        Scanner sc = new Scanner(file);\r\n\r\n        while (sc.hasNext()) {\r\n            String text = sc.next();\r\n            System.out.println(text);\r\n\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nthe file is located in resource folder generated by maven. If you have other folders nested in, just add it to the file name like &quot;examples/test.txt&quot;.","title":"Java says FileNotFoundException but file exists","body":"<p>This works for me. It also can read files such txt, csv and .in</p>\n<pre><code>public class NewReader {\n\n    public void read() throws FileNotFoundException, URISyntaxException {\n        File file = new File(Objects.requireNonNull(NewReader.class.getResource(&quot;/test.txt&quot;)).toURI());\n        Scanner sc = new Scanner(file);\n\n        while (sc.hasNext()) {\n            String text = sc.next();\n            System.out.println(text);\n\n        }\n    }\n}\n</code></pre>\n<p>the file is located in resource folder generated by maven. If you have other folders nested in, just add it to the file name like &quot;examples/test.txt&quot;.</p>\n"},{"tags":[],"owner":{"account_id":29915581,"reputation":1,"user_id":22925870,"display_name":"estelar9"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700120637,"creation_date":1700120637,"answer_id":77493010,"question_id":19307622,"body_markdown":"Kinda weird, I still don&#39;t understand why but it worked for me : **I just surrounded** my &#39;Scanner sc=new Scanner(new File(&quot;your/path&quot;));&#39; **in a try catch block** and while still in the try block I can access the file","title":"Java says FileNotFoundException but file exists","body":"<p>Kinda weird, I still don't understand why but it worked for me : <strong>I just surrounded</strong> my 'Scanner sc=new Scanner(new File(&quot;your/path&quot;));' <strong>in a try catch block</strong> and while still in the try block I can access the file</p>\n"},{"tags":[],"owner":{"account_id":24205685,"reputation":1,"user_id":18162939,"display_name":"MyouiJay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700696981,"creation_date":1700696981,"answer_id":77533664,"question_id":19307622,"body_markdown":"I moved the text file outside of the src folder and then it worked. I thought it was supposed to work in the src folder but apparently not.\r\n","title":"Java says FileNotFoundException but file exists","body":"<p>I moved the text file outside of the src folder and then it worked. I thought it was supposed to work in the src folder but apparently not.</p>\n"}],"owner":{"account_id":2308957,"reputation":7288,"user_id":2027567,"accept_rate":91,"display_name":"scrblnrd3"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":334733,"favorite_count":0,"down_vote_count":1,"up_vote_count":64,"accepted_answer_id":19309163,"answer_count":14,"score":63,"last_activity_date":1700701514,"creation_date":1381445905,"question_id":19307622,"body_markdown":"I have an assignment for my CS class where it says to read a file with several test scores and asks me to sum and average them. While summing and averaging is easy, I am having problems with the file reading. The instructor said to use this syntax\r\n\r\n    Scanner scores = new Scanner(new File(&quot;scores.dat&quot;));\r\n\r\nHowever, this throws a `FileNotFoundException`, but I have checked over and over again to see if the file exists in the current folder, and after that, I figured that it had to do something with the permissions. I changed the permissions for read and write for everyone, but it still did not work and it still keeps throwing the error. Does anyone have any idea why this may be occurring?\r\n\r\nEDIT: It was actually pointing to a directory up, however, I have fixed that problem. Now `file.exists()` returns `true`, but when I try to put it in the `Scanner`, it throws the `FileNotFoundException`\r\n\r\nHere is all my code\r\n\r\n    import java.util.Scanner;\r\n    import java.io.*;\r\n    public class readInt{\r\n            public static void main(String args[]){\r\n                    File file = new File(&quot;lines.txt&quot;);\r\n                    System.out.println(file.exists());\r\n                    Scanner scan = new Scanner(file);\r\n            }\r\n    }","title":"Java says FileNotFoundException but file exists","body":"<p>I have an assignment for my CS class where it says to read a file with several test scores and asks me to sum and average them. While summing and averaging is easy, I am having problems with the file reading. The instructor said to use this syntax</p>\n<pre><code>Scanner scores = new Scanner(new File(&quot;scores.dat&quot;));\n</code></pre>\n<p>However, this throws a <code>FileNotFoundException</code>, but I have checked over and over again to see if the file exists in the current folder, and after that, I figured that it had to do something with the permissions. I changed the permissions for read and write for everyone, but it still did not work and it still keeps throwing the error. Does anyone have any idea why this may be occurring?</p>\n<p>EDIT: It was actually pointing to a directory up, however, I have fixed that problem. Now <code>file.exists()</code> returns <code>true</code>, but when I try to put it in the <code>Scanner</code>, it throws the <code>FileNotFoundException</code></p>\n<p>Here is all my code</p>\n<pre><code>import java.util.Scanner;\nimport java.io.*;\npublic class readInt{\n        public static void main(String args[]){\n                File file = new File(&quot;lines.txt&quot;);\n                System.out.println(file.exists());\n                Scanner scan = new Scanner(file);\n        }\n}\n</code></pre>\n"},{"tags":["java","sql","sql-server"],"comments":[{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":4,"creation_date":1699492279,"post_id":77449845,"comment_id":136540140,"body_markdown":"Store your dates as UTC dates, and display them using the users locale? And convert from local user time to UTC before storing in the database.","body":"Store your dates as UTC dates, and display them using the users locale? And convert from local user time to UTC before storing in the database."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1699492330,"post_id":77449845,"comment_id":136540148,"body_markdown":"Use a [`java.time.ZonedDateTime`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZonedDateTime.html) on the Java side. Convert between UTC and the [time zone of the user](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZoneId.html) when communicating with the database. Or find a way to store the time zone in the database. Also, just in case, note that a _time zone_ is not the same thing as an _offset_.","body":"Use a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>java.time.ZonedDateTime</code></a> on the Java side. Convert between UTC and the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZoneId.html\" rel=\"nofollow noreferrer\">time zone of the user</a> when communicating with the database. Or find a way to store the time zone in the database. Also, just in case, note that a <i>time zone</i> is not the same thing as an <i>offset</i>."},{"owner":{"account_id":1692034,"reputation":3198,"user_id":1554195,"display_name":"tquadrat"},"score":2,"creation_date":1699492947,"post_id":77449845,"comment_id":136540205,"body_markdown":"Store the timezone with the date/time value! Converting the time to UTC is only the second best solution, because when you want to run something at nine o&#39;clock walltime, this should not change when DST is switched on or off. And as said alread by @Slaw, there is an important distinction between timezone (Europe/London), an offset (+00:00) and a zone time (GMT). You need to store the timezone!!!","body":"Store the timezone with the date/time value! Converting the time to UTC is only the second best solution, because when you want to run something at nine o&#39;clock walltime, this should not change when DST is switched on or off. And as said alread by @Slaw, there is an important distinction between timezone (Europe/London), an offset (+00:00) and a zone time (GMT). You need to store the timezone!!!"},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1699493117,"post_id":77449845,"comment_id":136540226,"body_markdown":"If your politicians were to change the rules of your time zone, such as adopting or dropping Daylight Saving Time (DST), would you want the time-of-day to change accordingly? Or would you want to stick with the same moment, the same point on the timeline regardless of what rules are changed by the politicians?","body":"If your politicians were to change the rules of your time zone, such as adopting or dropping Daylight Saving Time (DST), would you want the time-of-day to change accordingly? Or would you want to stick with the same moment, the same point on the timeline regardless of what rules are changed by the politicians?"},{"owner":{"account_id":198763,"reputation":2171,"user_id":443626,"accept_rate":70,"display_name":"redoc01"},"score":0,"creation_date":1699493528,"post_id":77449845,"comment_id":136540254,"body_markdown":"Thanks @DaleK and Slaw, tquadrat and basil bourque for the quick response. What would be the datatype in sql server 2019 that would need to select from","body":"Thanks @DaleK and Slaw, tquadrat and basil bourque for the quick response. What would be the datatype in sql server 2019 that would need to select from"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1699493658,"post_id":77449845,"comment_id":136540264,"body_markdown":"_&quot;So if I shedule a time between 1pm to 3pm in United Kingdom, then if I was to see this schedule in America, then as you know America is 7 hours infront and so Americas shedule time would be 7pm to 10pm&quot;_ - No, the offset is _behind_ (negative) and there are 4 timezones in the continental US, and the offset also depends on Daylight Saving time, which isn&#39;t uniformly observed.  A real mess.","body":"<i>&quot;So if I shedule a time between 1pm to 3pm in United Kingdom, then if I was to see this schedule in America, then as you know America is 7 hours infront and so Americas shedule time would be 7pm to 10pm&quot;</i> - No, the offset is <i>behind</i> (negative) and there are 4 timezones in the continental US, and the offset also depends on Daylight Saving time, which isn&#39;t uniformly observed.  A real mess."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1699493906,"post_id":77449845,"comment_id":136540290,"body_markdown":"Another wrinkle: Say I scheduled a meeting for 2023-11-03 09:30:00 GMT in London.  On the west coast of the US that falls into the DST change time, complicating the issue even more.  Handling dates/times/zones correctly is incredibly complex and prone to errors.  The only sane solution is to store all dates/time as UTC (zero offset) and convert to/from local for the user interface.","body":"Another wrinkle: Say I scheduled a meeting for 2023-11-03 09:30:00 GMT in London.  On the west coast of the US that falls into the DST change time, complicating the issue even more.  Handling dates/times/zones correctly is incredibly complex and prone to errors.  The only sane solution is to store all dates/time as UTC (zero offset) and convert to/from local for the user interface."},{"owner":{"account_id":198763,"reputation":2171,"user_id":443626,"accept_rate":70,"display_name":"redoc01"},"score":0,"creation_date":1699494111,"post_id":77449845,"comment_id":136540313,"body_markdown":"Would I need to write something so when a user selects the start and end date, I would need to manually set the correct time zones individually for every country to get the correct time zones","body":"Would I need to write something so when a user selects the start and end date, I would need to manually set the correct time zones individually for every country to get the correct time zones"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1699494153,"post_id":77449845,"comment_id":136540318,"body_markdown":"No, convert ONLY on input (from the user&#39;s locale to UTC) and on output (from UTC to the user&#39;s locale).  A user&#39;s local time can always be unambiguously converted to UTC, and a given UTC instant can always be converted to a local time in any timezone.","body":"No, convert ONLY on input (from the user&#39;s locale to UTC) and on output (from UTC to the user&#39;s locale).  A user&#39;s local time can always be unambiguously converted to UTC, and a given UTC instant can always be converted to a local time in any timezone."},{"owner":{"account_id":198763,"reputation":2171,"user_id":443626,"accept_rate":70,"display_name":"redoc01"},"score":0,"creation_date":1699494241,"post_id":77449845,"comment_id":136540328,"body_markdown":"What data type needs to be selected in sql server 2019, its not datetimeoffset as its been mentioned in this post. So what would be the datatype I select in sql server?","body":"What data type needs to be selected in sql server 2019, its not datetimeoffset as its been mentioned in this post. So what would be the datatype I select in sql server?"},{"owner":{"account_id":198763,"reputation":2171,"user_id":443626,"accept_rate":70,"display_name":"redoc01"},"score":0,"creation_date":1699494793,"post_id":77449845,"comment_id":136540381,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255887/discussion-between-redoc01-and-jim-garrison).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255887/discussion-between-redoc01-and-jim-garrison\">continue this discussion in chat</a>."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1699555059,"post_id":77449845,"comment_id":136550159,"body_markdown":"Voting to reopen because (a) The subject is HARD for developers to get right, even if the question was a bit unfocused, but more importantly (b) The answer from @BasilBourque is pretty much canonical for the topic and needs to be preserved.","body":"Voting to reopen because (a) The subject is HARD for developers to get right, even if the question was a bit unfocused, but more importantly (b) The answer from @BasilBourque is pretty much canonical for the topic and needs to be preserved."},{"owner":{"account_id":18740842,"reputation":3833,"user_id":13664137,"display_name":"moken"},"score":0,"creation_date":1699572792,"post_id":77449845,"comment_id":136552660,"body_markdown":"If this question is to be preserved then please fix the 2nd paragraph.","body":"If this question is to be preserved then please fix the 2nd paragraph."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1700700818,"creation_date":1699494521,"answer_id":77449976,"question_id":77449845,"body_markdown":"You have not specified if you want to track a specific point on the timeline or if you want to track a time-of-day that adjusts as needed if politicians change the rules of your time zone. The first case (like a rocket launch) is simpler, but I get the sense you meant the second case (like booking a medical/dental appointment). Let&#39;s cover both.\r\n\r\n## Fixed point in time\r\n\r\nTo schedule a rocket launch, the flight engineers study the weather predictions. Once they pick an opportune launch time, that point on the time line is fixed, unchanging. If politicians change the rules for the time zone, the launch does not move. The planned moment remains the same even though the wall clock time in the surrounding area may change from 15:33 to 14:33. The weather, and the rocket, don&#39;t care about the time-of-day, they care about a point on the timeline.\r\n\r\nIf you are tracking specific point on the timeline, use the standard SQL type `TIMESTAMP WITH TIME ZONE`. In [MS SQL Server][1], that would be the type [`datetimeoffset`][2]. In Java, use [`Instant`][3] in general, but for [JDBC][4] database calls, use [`OffsetDateTime`][5]. \r\n\r\n\r\n| Kind of data | Standard SQL | MS SQL Server | Java |\r\n| :---: |:---: | :---: | :---: |\r\n| Point on time line | `TIMESTAMP WITH TIME ZONE` | [`datetimeoffset`][2] | Generally use [`Instant`][3].&lt;br /&gt;In JDBC, use [`OffsetDateTime`][5]. |\r\n| Duration | `VARCHAR`   | [`varchar`][6] | [`Duration`][7] |\r\n\r\nSay our rocket launch flight director has determined a launch time of 3:33 PM on January 23rd, 2024 as seen with an offset of zero hours-minutes-seconds from the temporal meridian of UTC. In standard ISO 8601 text, that would be `2024-01-23T15:33:00Z`. The `Z` on the end indicates an offset of zero, and is pronounced “Zulu”.\r\n\r\nThe *java.time* classes use ISO 8601 formats by default when parsing/generating text.\r\n\r\n    Instant launchWindowStart = Instant.parse( &quot;2024-01-23T15:33:00Z&quot; ) ; \r\n\r\nAnd imagine that the launch window is one hour long. We use Duration class to represent that span of time unattached to the timeline.\r\n\r\n    Duration launchWindowSpan = Duration.ofHours( 1 ) ;\r\n\r\nWe can determine the end time:\r\n\r\n    Instant launchWindowEnd = launchWindowStart.plus( launchWindowSpan ) ;\r\n\r\nIn our database we could store either the start and the span, or the start and the end, or all three (though all three would violate [normalization][8]). For JDBC, adjust the `Instant` objects into `OffsetDateTime` as the SQL standard has no concept mapping to `Instant`. \r\n\r\n    OffsetDateTime odtLaunchWindowStart = launchWindowStart.atOffset( ZoneOffset.UTC ) ;\r\n    OffsetDateTime odtLaunchWindowEnd = launchWindowEnd.atOffset( ZoneOffset.UTC ) ;\r\n\r\n    myPreparedStatement.setObject( … , odtLaunchWindowStart ) ;\r\n    myPreparedStatement.setString( … , launchWindowSpan.toString() ) ;\r\n    myPreparedStatement.setObject( … , odtLaunchWindowEnd ) ;\r\n\r\nRetrieval.\r\n\r\n    Instant launchWindowStart = myResultSet.getObject( … , OffsetDateTime.class).toInstant() ;\r\n    Duration launchWindowSpan = Duration.parse( myResultSet.getString() ) ;\r\n    Instant launchWindowEnd = myResultSet.getObject( … , OffsetDateTime.class).toInstant() ;\r\n\r\n\r\n## Moving point in time\r\n\r\nFor appointments, you need to store the date &amp; time-of-day separately from the intended time zone. So two columns in your table. \r\n\r\nFor date &amp; time-of-day in MS SQL Server, use `datetime2` type. In Java, [`LocalDateTime`][9].\r\n\r\nFor the time zone, store the [`Continent/Region`][10] name of the zone such as `Europe/London`. In Java, [`ZoneId`][11].\r\n\r\nRecord appointments only with a start time, not a stop time. Instead of a stop time, store a *duration*. The stop time may not be the time-of-day you expect. For example, if an appointment starts at 1 PM but happens to occur during a &quot;spring-ahead&quot; clock cutover, the stop time might be 4 PM rather than the 3 PM you would otherwise expect so a 2-hour meeting could run 1-4 PM.\r\n\r\nNeither the SQL Standard nor MS SQL Server offers a data type for duration. So store as text in standard ISO 8601 format. For duration in the database, store as text in standard [ISO 8601][12] format of `PnYnMnDTnHnMnS` where `P` marks the beginning, and the `T` separates the years-months-days from the hours-minutes-seconds. For Java, use [`Duration`][7] object. A duration of two hours is `PT2H`. \r\n\r\n\r\n| Kind of data | Standard SQL | MS SQL Server | Java |\r\n| :---: |:---: | :---: | :---: |\r\n| Date + time-of-day | `TIMESTAMP WITHOUT TIME ZONE` | [`datetime2`][13] | [`LocalDateTime`][9] |\r\n| Time zone name | `VARCHAR`   | [`varchar`][6] | [`ZoneId`][11] |\r\n| Duration | `VARCHAR`   | [`varchar`][6] | [`Duration`][7] |\r\n\r\n\r\n&gt; shedule a time between 1pm to 3pm in United Kingdom\r\n\r\nAs an example, let&#39;s book a week out from today.\r\n\r\n    ZoneId zLondon = ZoneId.of( &quot;Europe/London&quot; ) ;\r\n    LocalDate today = LocalDate.now( zLondon ) ;\r\n    LocalDate apptDate = today.plusWeeks( 1 ) ;\r\n    LocalTime apptTime = LocalTime.of( 13 , 0 ) ;  // 1 PM.\r\n    LocalDateTime apptStart = LocalDateTime.of( apptDate , apptTime ) ;\r\n    Duration duration = Duration.ofHours( 2 ) ;\r\n\r\nWrite those to your `datetime2`, `VARCHAR`, and `VARCHAR` columns. \r\n\r\n```java\r\nmyPreparedStatement.setObject( … , apptStart ) ;\r\nmyPreparedStatement.setString( … , zLondon.toString() ) ;\r\nmyPreparedStatement.setString( … , duration.toString() ) ;\r\n```\r\n\r\nRetrieval.\r\n\r\n```java\r\nLocalDateTime apptStart = myResultSet.getObject( … , LocalDateTime.class ) ;\r\nZoneId zLondon = ZoneId.of( myResultSet.getString( … ) ) ;\r\nDuration duration = Duration.parse( myResultSet.getString( … ) ) ;\r\n```\r\n\r\n\r\nBe very clear on this crucial point: `LocalDateTime` &amp; `datetime2` do *not* represent a moment, are *not* a point on the timeline. They represent merely a date with a time-of-day. They purposely lack any concept of time zone or offset-from-UTC. So their values are inherently ambiguous. \r\n\r\nWhen it comes time to build a schedule, apply the time zone to the date-time. Very important: **Do *not* store this value**, use it only to build a schedule dynamically, temporarily, such as for presentation to the user.\r\n\r\n    ZonedDateTime zdtLondon = appt.atZone( zLondon ) ;\r\n\r\nNow we have a moment, a specific point on the timeline. \r\n\r\nYou can adjust to another time zone.\r\n\r\n```java\r\nZoneId zEdmonton = ZoneId.of( &quot;America/Edmonton&quot; ) ;\r\nZonedDateTime zdtEdmonton = zdtLondon.atZoneSameInstant( zEdmonton ) ;\r\n```\r\n\r\nBoth `zdtLondon` and `zdtEdmonton` represent the same simultaneous moment, the same point on the timeline. The one single moment is being viewed through two different lenses, the lens of the wall clock &amp; calendar used by people in England UK versus the lens of the wall clock and calendar used by the people of Alberta Canada. \r\n\r\n\r\nSpans of time are generally best handled using the Half-Open approach. In Half-Open, the beginning is *inclusive* while the ending is *exclusive*. So an appoint from 1 PM to 3 PM starts at the first moment of the hour 13, then runs up to, but does not include, the first moment of the hour 15 (or so, depending on political time-keeping anomalies mentioned above). Tip: In SQL, do *not* use `BETWEEN` in your Half-Open queries, as `BETWEEN` is Fully Closed (both start and end are inclusive). \r\n\r\nTo represent the whole span of time, the *java.time* framework does not define any such class. You could define your own. For example:\r\n\r\n    record SpanOfTimeZoned ( ZonedDateTime start , ZonedDateTime end ) {}\r\n\r\nOr more practical:\r\n\r\n```java\r\npublic record SpanOfTimeZoned( ZonedDateTime start , ZonedDateTime end ) {\r\n    public static SpanOfTimeZoned of ( ZonedDateTime start , Duration duration ) {\r\n        return new SpanOfTimeZoned ( start , start.plus ( duration ) );\r\n    }\r\n\r\n    public Duration duration ( ) {\r\n        return Duration.between ( this.start , this.end );\r\n    }\r\n}\r\n```\r\n\r\nUsage:\r\n\r\n```java\r\nSpanOfTimeZoned apptSpan = SpanOfTimeZoned.of( zdtEdmonton , duration ) ;\r\n```\r\n\r\nOr, you might find useful adding the [ThreeTen-Extra][14] library to your project. That library offers the [`Interval`][15] class, holding a pair of [`java.time.Instant`][3] objects. An `Instant` represents a moment as seen with an offset of zero hours-minutes-seconds from the temporal meridian of UTC. \r\n\r\n    Interval apptSpan = Interval.of( zdtEdmonton.toInstant() , duration ) ;\r\n\r\nNote that `org.threeten.extra.Interval` is always in UTC (an offset of zero), not a particular time zone. You can, of course, always apply a time zone to get a `ZonedDateTime`.\r\n\r\n    ZonedDateTime apptStartLondon = apptSpan.getStart().atZone( zLondon ) ;\r\n\r\nYou said:\r\n\r\n&gt; The clientside I will be using is java to display the start and end date for different time zones.\r\n\r\nIn your app, you need to collect from the user:\r\n\r\n - Date \r\n - Start time\r\n - Time zone\r\n - Duration (or calculate based on user providing an end-time)\r\n\r\nFrom that, you will produce in Java:\r\n\r\n - `LocalDateTime` object\r\n - `ZoneId` object\r\n - `Duration` object\r\n\r\nSounds like you want to convert from the user&#39;s time zone to your preferred time zone before storing in the database. Be aware that this conversion is risky. We can adjust from Edmonton time to London time, for example. But that adjustment must use the rules for both those zones as they exist at this moment. In the time between this moment and that appointment, if politicians in Alberta, or politicians in England, were to change their time zone rules, our stored appointment will appear to be wrong from the perspective of the person on the other side of the pond. This change by politicians may seem unlikely; history has proved otherwise. Politicians around the world have shown a penchant for twiddling with the time zone rules of their jurisdiction. \r\n\r\n```java\r\nLocalDateTime userLdt = LocalDateTime.of( … ) ;\r\nZoneId userZoneId = ZoneId.of( … ) ;\r\nDuration duration = Duration.of( … ) ;\r\n\r\nZonedDateTime userZdt = userLdt.atZone( userZoneId ) ;\r\nZonedDateTime zdtLondon = userZdt.atZoneSameInstant( zLondon ) ;\r\nLocalDateTime apptStart = zdtLondon.toLocalDateTime() ; \r\n```\r\n\r\nAt this point you can store `apptStart`, `zLondon`, and `duration` as discussed earlier in this Answer.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Microsoft_SQL_Server\r\n  [2]: https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-ver16\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html\r\n  [4]: https://en.wikipedia.org/wiki/Java_Database_Connectivity\r\n  [5]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/OffsetDateTime.html\r\n  [6]: https://learn.microsoft.com/en-us/sql/t-sql/data-types/char-and-varchar-transact-sql?view=sql-server-ver16#varchar---n--max--\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html\r\n  [8]: https://en.wikipedia.org/wiki/Database_normalization\r\n  [9]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDateTime.html\r\n  [10]: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\r\n  [11]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZoneId.html\r\n  [12]: https://en.wikipedia.org/wiki/ISO_8601#Durations\r\n  [13]: https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetime2-transact-sql?view=sql-server-ver16#datetime2-description\r\n  [14]: https://www.threeten.org/threeten-extra/\r\n  [15]: https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/Interval.html","title":"Schedule a time given but works with different time zones in SQL Server and using Java client","body":"<p>You have not specified if you want to track a specific point on the timeline or if you want to track a time-of-day that adjusts as needed if politicians change the rules of your time zone. The first case (like a rocket launch) is simpler, but I get the sense you meant the second case (like booking a medical/dental appointment). Let's cover both.</p>\n<h2>Fixed point in time</h2>\n<p>To schedule a rocket launch, the flight engineers study the weather predictions. Once they pick an opportune launch time, that point on the time line is fixed, unchanging. If politicians change the rules for the time zone, the launch does not move. The planned moment remains the same even though the wall clock time in the surrounding area may change from 15:33 to 14:33. The weather, and the rocket, don't care about the time-of-day, they care about a point on the timeline.</p>\n<p>If you are tracking specific point on the timeline, use the standard SQL type <code>TIMESTAMP WITH TIME ZONE</code>. In <a href=\"https://en.wikipedia.org/wiki/Microsoft_SQL_Server\" rel=\"nofollow noreferrer\">MS SQL Server</a>, that would be the type <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-ver16\" rel=\"nofollow noreferrer\"><code>datetimeoffset</code></a>. In Java, use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> in general, but for <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a> database calls, use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a>.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">Kind of data</th>\n<th style=\"text-align: center;\">Standard SQL</th>\n<th style=\"text-align: center;\">MS SQL Server</th>\n<th style=\"text-align: center;\">Java</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">Point on time line</td>\n<td style=\"text-align: center;\"><code>TIMESTAMP WITH TIME ZONE</code></td>\n<td style=\"text-align: center;\"><a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetimeoffset-transact-sql?view=sql-server-ver16\" rel=\"nofollow noreferrer\"><code>datetimeoffset</code></a></td>\n<td style=\"text-align: center;\">Generally use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a>.<br />In JDBC, use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"nofollow noreferrer\"><code>OffsetDateTime</code></a>.</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">Duration</td>\n<td style=\"text-align: center;\"><code>VARCHAR</code></td>\n<td style=\"text-align: center;\"><a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/char-and-varchar-transact-sql?view=sql-server-ver16#varchar---n--max--\" rel=\"nofollow noreferrer\"><code>varchar</code></a></td>\n<td style=\"text-align: center;\"><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Say our rocket launch flight director has determined a launch time of 3:33 PM on January 23rd, 2024 as seen with an offset of zero hours-minutes-seconds from the temporal meridian of UTC. In standard ISO 8601 text, that would be <code>2024-01-23T15:33:00Z</code>. The <code>Z</code> on the end indicates an offset of zero, and is pronounced “Zulu”.</p>\n<p>The <em>java.time</em> classes use ISO 8601 formats by default when parsing/generating text.</p>\n<pre><code>Instant launchWindowStart = Instant.parse( &quot;2024-01-23T15:33:00Z&quot; ) ; \n</code></pre>\n<p>And imagine that the launch window is one hour long. We use Duration class to represent that span of time unattached to the timeline.</p>\n<pre><code>Duration launchWindowSpan = Duration.ofHours( 1 ) ;\n</code></pre>\n<p>We can determine the end time:</p>\n<pre><code>Instant launchWindowEnd = launchWindowStart.plus( launchWindowSpan ) ;\n</code></pre>\n<p>In our database we could store either the start and the span, or the start and the end, or all three (though all three would violate <a href=\"https://en.wikipedia.org/wiki/Database_normalization\" rel=\"nofollow noreferrer\">normalization</a>). For JDBC, adjust the <code>Instant</code> objects into <code>OffsetDateTime</code> as the SQL standard has no concept mapping to <code>Instant</code>.</p>\n<pre><code>OffsetDateTime odtLaunchWindowStart = launchWindowStart.atOffset( ZoneOffset.UTC ) ;\nOffsetDateTime odtLaunchWindowEnd = launchWindowEnd.atOffset( ZoneOffset.UTC ) ;\n\nmyPreparedStatement.setObject( … , odtLaunchWindowStart ) ;\nmyPreparedStatement.setString( … , launchWindowSpan.toString() ) ;\nmyPreparedStatement.setObject( … , odtLaunchWindowEnd ) ;\n</code></pre>\n<p>Retrieval.</p>\n<pre><code>Instant launchWindowStart = myResultSet.getObject( … , OffsetDateTime.class).toInstant() ;\nDuration launchWindowSpan = Duration.parse( myResultSet.getString() ) ;\nInstant launchWindowEnd = myResultSet.getObject( … , OffsetDateTime.class).toInstant() ;\n</code></pre>\n<h2>Moving point in time</h2>\n<p>For appointments, you need to store the date &amp; time-of-day separately from the intended time zone. So two columns in your table.</p>\n<p>For date &amp; time-of-day in MS SQL Server, use <code>datetime2</code> type. In Java, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a>.</p>\n<p>For the time zone, store the <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\"><code>Continent/Region</code></a> name of the zone such as <code>Europe/London</code>. In Java, <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZoneId.html\" rel=\"nofollow noreferrer\"><code>ZoneId</code></a>.</p>\n<p>Record appointments only with a start time, not a stop time. Instead of a stop time, store a <em>duration</em>. The stop time may not be the time-of-day you expect. For example, if an appointment starts at 1 PM but happens to occur during a &quot;spring-ahead&quot; clock cutover, the stop time might be 4 PM rather than the 3 PM you would otherwise expect so a 2-hour meeting could run 1-4 PM.</p>\n<p>Neither the SQL Standard nor MS SQL Server offers a data type for duration. So store as text in standard ISO 8601 format. For duration in the database, store as text in standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow noreferrer\">ISO 8601</a> format of <code>PnYnMnDTnHnMnS</code> where <code>P</code> marks the beginning, and the <code>T</code> separates the years-months-days from the hours-minutes-seconds. For Java, use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a> object. A duration of two hours is <code>PT2H</code>.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">Kind of data</th>\n<th style=\"text-align: center;\">Standard SQL</th>\n<th style=\"text-align: center;\">MS SQL Server</th>\n<th style=\"text-align: center;\">Java</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">Date + time-of-day</td>\n<td style=\"text-align: center;\"><code>TIMESTAMP WITHOUT TIME ZONE</code></td>\n<td style=\"text-align: center;\"><a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/datetime2-transact-sql?view=sql-server-ver16#datetime2-description\" rel=\"nofollow noreferrer\"><code>datetime2</code></a></td>\n<td style=\"text-align: center;\"><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">Time zone name</td>\n<td style=\"text-align: center;\"><code>VARCHAR</code></td>\n<td style=\"text-align: center;\"><a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/char-and-varchar-transact-sql?view=sql-server-ver16#varchar---n--max--\" rel=\"nofollow noreferrer\"><code>varchar</code></a></td>\n<td style=\"text-align: center;\"><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/ZoneId.html\" rel=\"nofollow noreferrer\"><code>ZoneId</code></a></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">Duration</td>\n<td style=\"text-align: center;\"><code>VARCHAR</code></td>\n<td style=\"text-align: center;\"><a href=\"https://learn.microsoft.com/en-us/sql/t-sql/data-types/char-and-varchar-transact-sql?view=sql-server-ver16#varchar---n--max--\" rel=\"nofollow noreferrer\"><code>varchar</code></a></td>\n<td style=\"text-align: center;\"><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a></td>\n</tr>\n</tbody>\n</table>\n</div>\n<blockquote>\n<p>shedule a time between 1pm to 3pm in United Kingdom</p>\n</blockquote>\n<p>As an example, let's book a week out from today.</p>\n<pre><code>ZoneId zLondon = ZoneId.of( &quot;Europe/London&quot; ) ;\nLocalDate today = LocalDate.now( zLondon ) ;\nLocalDate apptDate = today.plusWeeks( 1 ) ;\nLocalTime apptTime = LocalTime.of( 13 , 0 ) ;  // 1 PM.\nLocalDateTime apptStart = LocalDateTime.of( apptDate , apptTime ) ;\nDuration duration = Duration.ofHours( 2 ) ;\n</code></pre>\n<p>Write those to your <code>datetime2</code>, <code>VARCHAR</code>, and <code>VARCHAR</code> columns.</p>\n<pre class=\"lang-java prettyprint-override\"><code>myPreparedStatement.setObject( … , apptStart ) ;\nmyPreparedStatement.setString( … , zLondon.toString() ) ;\nmyPreparedStatement.setString( … , duration.toString() ) ;\n</code></pre>\n<p>Retrieval.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime apptStart = myResultSet.getObject( … , LocalDateTime.class ) ;\nZoneId zLondon = ZoneId.of( myResultSet.getString( … ) ) ;\nDuration duration = Duration.parse( myResultSet.getString( … ) ) ;\n</code></pre>\n<p>Be very clear on this crucial point: <code>LocalDateTime</code> &amp; <code>datetime2</code> do <em>not</em> represent a moment, are <em>not</em> a point on the timeline. They represent merely a date with a time-of-day. They purposely lack any concept of time zone or offset-from-UTC. So their values are inherently ambiguous.</p>\n<p>When it comes time to build a schedule, apply the time zone to the date-time. Very important: <strong>Do <em>not</em> store this value</strong>, use it only to build a schedule dynamically, temporarily, such as for presentation to the user.</p>\n<pre><code>ZonedDateTime zdtLondon = appt.atZone( zLondon ) ;\n</code></pre>\n<p>Now we have a moment, a specific point on the timeline.</p>\n<p>You can adjust to another time zone.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ZoneId zEdmonton = ZoneId.of( &quot;America/Edmonton&quot; ) ;\nZonedDateTime zdtEdmonton = zdtLondon.atZoneSameInstant( zEdmonton ) ;\n</code></pre>\n<p>Both <code>zdtLondon</code> and <code>zdtEdmonton</code> represent the same simultaneous moment, the same point on the timeline. The one single moment is being viewed through two different lenses, the lens of the wall clock &amp; calendar used by people in England UK versus the lens of the wall clock and calendar used by the people of Alberta Canada.</p>\n<p>Spans of time are generally best handled using the Half-Open approach. In Half-Open, the beginning is <em>inclusive</em> while the ending is <em>exclusive</em>. So an appoint from 1 PM to 3 PM starts at the first moment of the hour 13, then runs up to, but does not include, the first moment of the hour 15 (or so, depending on political time-keeping anomalies mentioned above). Tip: In SQL, do <em>not</em> use <code>BETWEEN</code> in your Half-Open queries, as <code>BETWEEN</code> is Fully Closed (both start and end are inclusive).</p>\n<p>To represent the whole span of time, the <em>java.time</em> framework does not define any such class. You could define your own. For example:</p>\n<pre><code>record SpanOfTimeZoned ( ZonedDateTime start , ZonedDateTime end ) {}\n</code></pre>\n<p>Or more practical:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record SpanOfTimeZoned( ZonedDateTime start , ZonedDateTime end ) {\n    public static SpanOfTimeZoned of ( ZonedDateTime start , Duration duration ) {\n        return new SpanOfTimeZoned ( start , start.plus ( duration ) );\n    }\n\n    public Duration duration ( ) {\n        return Duration.between ( this.start , this.end );\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SpanOfTimeZoned apptSpan = SpanOfTimeZoned.of( zdtEdmonton , duration ) ;\n</code></pre>\n<p>Or, you might find useful adding the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\">ThreeTen-Extra</a> library to your project. That library offers the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/Interval.html\" rel=\"nofollow noreferrer\"><code>Interval</code></a> class, holding a pair of <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>java.time.Instant</code></a> objects. An <code>Instant</code> represents a moment as seen with an offset of zero hours-minutes-seconds from the temporal meridian of UTC.</p>\n<pre><code>Interval apptSpan = Interval.of( zdtEdmonton.toInstant() , duration ) ;\n</code></pre>\n<p>Note that <code>org.threeten.extra.Interval</code> is always in UTC (an offset of zero), not a particular time zone. You can, of course, always apply a time zone to get a <code>ZonedDateTime</code>.</p>\n<pre><code>ZonedDateTime apptStartLondon = apptSpan.getStart().atZone( zLondon ) ;\n</code></pre>\n<p>You said:</p>\n<blockquote>\n<p>The clientside I will be using is java to display the start and end date for different time zones.</p>\n</blockquote>\n<p>In your app, you need to collect from the user:</p>\n<ul>\n<li>Date</li>\n<li>Start time</li>\n<li>Time zone</li>\n<li>Duration (or calculate based on user providing an end-time)</li>\n</ul>\n<p>From that, you will produce in Java:</p>\n<ul>\n<li><code>LocalDateTime</code> object</li>\n<li><code>ZoneId</code> object</li>\n<li><code>Duration</code> object</li>\n</ul>\n<p>Sounds like you want to convert from the user's time zone to your preferred time zone before storing in the database. Be aware that this conversion is risky. We can adjust from Edmonton time to London time, for example. But that adjustment must use the rules for both those zones as they exist at this moment. In the time between this moment and that appointment, if politicians in Alberta, or politicians in England, were to change their time zone rules, our stored appointment will appear to be wrong from the perspective of the person on the other side of the pond. This change by politicians may seem unlikely; history has proved otherwise. Politicians around the world have shown a penchant for twiddling with the time zone rules of their jurisdiction.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime userLdt = LocalDateTime.of( … ) ;\nZoneId userZoneId = ZoneId.of( … ) ;\nDuration duration = Duration.of( … ) ;\n\nZonedDateTime userZdt = userLdt.atZone( userZoneId ) ;\nZonedDateTime zdtLondon = userZdt.atZoneSameInstant( zLondon ) ;\nLocalDateTime apptStart = zdtLondon.toLocalDateTime() ; \n</code></pre>\n<p>At this point you can store <code>apptStart</code>, <code>zLondon</code>, and <code>duration</code> as discussed earlier in this Answer.</p>\n"}],"owner":{"account_id":198763,"reputation":2171,"user_id":443626,"accept_rate":70,"display_name":"redoc01"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"accepted_answer_id":77449976,"answer_count":1,"score":-1,"last_activity_date":1700700818,"creation_date":1699492000,"question_id":77449845,"body_markdown":"I need to allow a system to schedule some time locally and present this time correctly in different time zones.\r\n\r\nSo if I schedule a time between 1pm to 3pm in United Kingdom, then if I was to see this schedule in America, then as you know America is 7 hours ahead and so Americas schedule time would be 7pm to 10pm\r\n\r\nI have used datetimeoffset in sql server before which allows UTC dates to work with different time zones.\r\n\r\nAnd I really need to use sql server for this solution.\r\n\r\nSo how would I go about this approach to get time differences when a user selects the start date and end date?\r\n\r\nThe client side I will be using is java to display the start and end date for different time zones.\r\n\r\nI have tried this in sql server but I used getutcdate. This was for another project to initialise when some date is stored initially wen a entry has been made. But like I said above I need users to select date between the start date and end date.\r\n\r\nJust to note the database that stores the date is 1 hour ahead as it&#39;s on a server in another country.","title":"Schedule a time given but works with different time zones in SQL Server and using Java client","body":"<p>I need to allow a system to schedule some time locally and present this time correctly in different time zones.</p>\n<p>So if I schedule a time between 1pm to 3pm in United Kingdom, then if I was to see this schedule in America, then as you know America is 7 hours ahead and so Americas schedule time would be 7pm to 10pm</p>\n<p>I have used datetimeoffset in sql server before which allows UTC dates to work with different time zones.</p>\n<p>And I really need to use sql server for this solution.</p>\n<p>So how would I go about this approach to get time differences when a user selects the start date and end date?</p>\n<p>The client side I will be using is java to display the start and end date for different time zones.</p>\n<p>I have tried this in sql server but I used getutcdate. This was for another project to initialise when some date is stored initially wen a entry has been made. But like I said above I need users to select date between the start date and end date.</p>\n<p>Just to note the database that stores the date is 1 hour ahead as it's on a server in another country.</p>\n"},{"tags":["java","spring","tomcat"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1700723835,"post_id":77533793,"comment_id":136689908,"body_markdown":"Spring boot 6 is for Tomcat 10. It uses JakartaEE not JavaEE. Remove the `javax.servlet-api` dependency and use the jakarta one (scope should be provided) and use the proper tomcat. Even better use Spring Boot instead of plain spring it will make your life a lot easier.","body":"Spring boot 6 is for Tomcat 10. It uses JakartaEE not JavaEE. Remove the <code>javax.servlet-api</code> dependency and use the jakarta one (scope should be provided) and use the proper tomcat. Even better use Spring Boot instead of plain spring it will make your life a lot easier."},{"owner":{"account_id":19829135,"reputation":11,"user_id":14524105,"display_name":"buchs"},"score":0,"creation_date":1700747344,"post_id":77533793,"comment_id":136694229,"body_markdown":"I switched to tomcat 10 and it finally worked. Thanks","body":"I switched to tomcat 10 and it finally worked. Thanks"}],"owner":{"account_id":19829135,"reputation":11,"user_id":14524105,"display_name":"buchs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700699902,"creation_date":1700699902,"question_id":77533793,"body_markdown":"I am trying to build a simple Restful service with Spring but without Spring Boot.\r\nI made config classes and then I tried to test controller but it is never triggered by request.\r\nI tried java servlets - everthing worked fine.\r\nSo maybe the problem is within my config or dependencies.. Cant handle it myself\r\nI am building project with Intellij \r\n\r\nconfig classes:\r\n```\r\npublic class DispatcherServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n    @Override\r\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n        return new Class[0];\r\n    }\r\n\r\n    @Override\r\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n        return new Class[]{SpringConfig.class};\r\n    }\r\n\r\n    @Override\r\n    protected String[] getServletMappings() {\r\n        return new String[]{&quot;/&quot;};\r\n    }\r\n```\r\n```\r\n@Configuration\r\n@EnableWebMvc\r\n@ComponentScan(basePackages =&quot;ru.spring.testRest&quot;)\r\npublic class SpringConfig   {\r\n    \r\n}\r\n\r\n```\r\n\r\ncontroller:\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/rest&quot;)\r\npublic class TestRest {\r\n\r\n    @GetMapping(&quot;/here&quot;)\r\n    public String test(){\r\n        System.out.println(&quot;TRIGGERED&quot;);\r\n        return &quot;test&quot;;\r\n    }\r\n}\r\n```\r\nDepndencies\r\n[![depndencies][1]][1]\r\n\r\nTomcat\r\n[![Tomcat][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/N5qPk.png\r\n  [2]: https://i.stack.imgur.com/uNcIl.png","title":"Tomcat can&#39;t see my Spring app when I run it","body":"<p>I am trying to build a simple Restful service with Spring but without Spring Boot.\nI made config classes and then I tried to test controller but it is never triggered by request.\nI tried java servlets - everthing worked fine.\nSo maybe the problem is within my config or dependencies.. Cant handle it myself\nI am building project with Intellij</p>\n<p>config classes:</p>\n<pre><code>public class DispatcherServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        return new Class[0];\n    }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class[]{SpringConfig.class};\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[]{&quot;/&quot;};\n    }\n</code></pre>\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages =&quot;ru.spring.testRest&quot;)\npublic class SpringConfig   {\n    \n}\n\n</code></pre>\n<p>controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/rest&quot;)\npublic class TestRest {\n\n    @GetMapping(&quot;/here&quot;)\n    public String test(){\n        System.out.println(&quot;TRIGGERED&quot;);\n        return &quot;test&quot;;\n    }\n}\n</code></pre>\n<p>Depndencies\n<a href=\"https://i.stack.imgur.com/N5qPk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N5qPk.png\" alt=\"depndencies\" /></a></p>\n<p>Tomcat\n<a href=\"https://i.stack.imgur.com/uNcIl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uNcIl.png\" alt=\"Tomcat\" /></a></p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","spring-cloud-stream-binder-kafka"],"owner":{"account_id":28357140,"reputation":11,"user_id":21687699,"display_name":"Olga Klassen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700699013,"creation_date":1681977701,"question_id":76061808,"body_markdown":"I have the following BiConsumer\r\n\r\n```\r\n\r\n@Bean\r\n    public BiConsumer&lt;KStream&lt;String, UserEvent&gt;, GlobalKTable&lt;Long, ShopEvent&gt;&gt; process() {\r\n        \r\n            return (userEvent, shopEvent) -&gt; {\r\n\r\n             userEvent\r\n                    .leftJoin(shopEvent, (key, value) -&gt; value.getShopId())\r\n                    .filter(filterApplier.isEventValied(userEvent))\r\n                    .foreach((eventId, userEvent) -&gt; {\r\n                        \r\n                         log.info(userEvent.toString())\r\n\r\n                    });\r\n\r\n        };\r\n    }\r\n```\r\n\r\nI would like to consume the messages in batches. I found the [following](https://cloud.spring.io/spring-cloud-static/spring-cloud-stream-binder-kafka/3.0.0.RC1/reference/html/spring-cloud-stream-binder-kafka.html#_consuming_batches) documentation from apache-kafka-binder which describes some properties like: \r\n\r\n```\r\nspring.cloud.stream.bindings.process-in-0.consumer.batch-mode: true\r\n\r\n```\r\n\r\nand \r\n\r\n```\r\nspring.cloud.binders.kstream-binder:\r\n          consumer-properties.max.poll.interval.ms: 1000\r\n          consumer-properties.max.poll.records: 1\r\n          consumer-properties.fetch.max.wait.ms: 1000\r\n          consumer-properties.fetch.min.bytes: 5000\r\n```\r\n\r\n\r\nAs described in [this](https://medium.com/@anupriyakumawat95/consume-messages-in-batch-using-spring-cloud-stream-kafka-binder-d82b0f4a9935) tutorial you can have something like this using apache-kafka-binder.\r\n\r\n```\r\n@Bean\r\n    public Consumer&lt;List&lt;String&gt;&gt; input() {\r\n        return list -&gt; {\r\n            System.out.println(list);\r\n            throw new RuntimeException(&quot;test&quot;);\r\n        };\r\n    }\r\n```\r\n\r\nBut is there any possibility to implement it the same way but with kafka-streams-binder?","title":"Consume Messages in Batches using KStreams","body":"<p>I have the following BiConsumer</p>\n<pre><code>\n@Bean\n    public BiConsumer&lt;KStream&lt;String, UserEvent&gt;, GlobalKTable&lt;Long, ShopEvent&gt;&gt; process() {\n        \n            return (userEvent, shopEvent) -&gt; {\n\n             userEvent\n                    .leftJoin(shopEvent, (key, value) -&gt; value.getShopId())\n                    .filter(filterApplier.isEventValied(userEvent))\n                    .foreach((eventId, userEvent) -&gt; {\n                        \n                         log.info(userEvent.toString())\n\n                    });\n\n        };\n    }\n</code></pre>\n<p>I would like to consume the messages in batches. I found the <a href=\"https://cloud.spring.io/spring-cloud-static/spring-cloud-stream-binder-kafka/3.0.0.RC1/reference/html/spring-cloud-stream-binder-kafka.html#_consuming_batches\" rel=\"nofollow noreferrer\">following</a> documentation from apache-kafka-binder which describes some properties like:</p>\n<pre><code>spring.cloud.stream.bindings.process-in-0.consumer.batch-mode: true\n\n</code></pre>\n<p>and</p>\n<pre><code>spring.cloud.binders.kstream-binder:\n          consumer-properties.max.poll.interval.ms: 1000\n          consumer-properties.max.poll.records: 1\n          consumer-properties.fetch.max.wait.ms: 1000\n          consumer-properties.fetch.min.bytes: 5000\n</code></pre>\n<p>As described in <a href=\"https://medium.com/@anupriyakumawat95/consume-messages-in-batch-using-spring-cloud-stream-kafka-binder-d82b0f4a9935\" rel=\"nofollow noreferrer\">this</a> tutorial you can have something like this using apache-kafka-binder.</p>\n<pre><code>@Bean\n    public Consumer&lt;List&lt;String&gt;&gt; input() {\n        return list -&gt; {\n            System.out.println(list);\n            throw new RuntimeException(&quot;test&quot;);\n        };\n    }\n</code></pre>\n<p>But is there any possibility to implement it the same way but with kafka-streams-binder?</p>\n"},{"tags":["java","apache-kafka","left-join","apache-kafka-streams","spring-cloud-stream-binder-kafka"],"answers":[{"tags":[],"owner":{"account_id":6384814,"reputation":60263,"user_id":4953079,"display_name":"Matthias J. Sax"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672188368,"creation_date":1672188368,"answer_id":74935307,"question_id":74864685,"body_markdown":"Seems you are using an older version of Kafka Streams, that faces the first issue about &quot;spurious left join results&quot;. It&#39;s fixed in Kafka 3.1 release (cf https://issues.apache.org/jira/browse/KAFKA-10847).\r\n\r\nCompare https://cwiki.apache.org/confluence/display/KAFKA/KIP-633%3A+Deprecate+24-hour+Default+Grace+Period+for+Windowed+Operations+in+Streams\r\n\r\nFor the second issue, yes, you should get an output -- if you use version 3.1, the only explanation for a missing output would be that your input streams &quot;stopped/pause&quot; and no new data arrives -- if there is no new data that join window won&#39;t close the the left-join result is &quot;stuck&quot; until time advances (based on record timestamps and thus required new input data).","title":"KStream-KStream leftjoin doesn&#39;t produce any value when the second matching value is not present","body":"<p>Seems you are using an older version of Kafka Streams, that faces the first issue about &quot;spurious left join results&quot;. It's fixed in Kafka 3.1 release (cf <a href=\"https://issues.apache.org/jira/browse/KAFKA-10847\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/KAFKA-10847</a>).</p>\n<p>Compare <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-633%3A+Deprecate+24-hour+Default+Grace+Period+for+Windowed+Operations+in+Streams\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/display/KAFKA/KIP-633%3A+Deprecate+24-hour+Default+Grace+Period+for+Windowed+Operations+in+Streams</a></p>\n<p>For the second issue, yes, you should get an output -- if you use version 3.1, the only explanation for a missing output would be that your input streams &quot;stopped/pause&quot; and no new data arrives -- if there is no new data that join window won't close the the left-join result is &quot;stuck&quot; until time advances (based on record timestamps and thus required new input data).</p>\n"}],"owner":{"account_id":27307850,"reputation":19,"user_id":20823518,"display_name":"Office Kafka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1700698930,"creation_date":1671546916,"question_id":74864685,"body_markdown":"We have theses POJOs:\r\n\r\n```\r\n@Data\r\n@NoArgsConstructure\r\n@AllArgsConstructure\r\nclass MyPost {\r\n    private String content;\r\n    private SeenInfo seenInfo;\r\n}\r\n\r\n\r\n@Data\r\n@NoArgsConstructure\r\n@AllArgsConstructure\r\nclass SeenInfo {\r\n    private Integer seenCount;\r\n    //other fields...\r\n}\r\n```\r\n\r\nand this left-join process in our application:\r\n\r\n```\r\n@Bean\r\npublic Function&lt;KStream&lt;String, MyPost&gt;, Function&lt;KStream&lt;String, SeenInfo&gt;, KStream&lt;String, MyPost&gt;&gt;&gt; joinProcess(Map&lt;String, String&gt; schemaConfig) {\r\n    return postStream -&gt;\r\n            seenInfoStream -&gt; {\r\n                SpecificAvroSerde&lt;MyPost&gt; postSerde = new SpecificAvroSerde&lt;&gt;();\r\n                SpecificAvroSerde&lt;SeenInfo&gt; seenInfoSerde = new SpecificAvroSerde&lt;&gt;();\r\n                postSerde.configure(schemaConfig, true);\r\n                seenInfoSerde.configure(schemaConfig, true);\r\n                return postStream.leftJoin(seenInfoStream,\r\n                        (p, s) -&gt; {\r\n                            p.setSeenInfo(s);\r\n                            return p;\r\n                        },\r\n                        JoinWindows.of(Duration.ofMinutes(5)),\r\n                        StreamJoined.with(Serdes.String(),\r\n                                postSerde,\r\n                                seenInfoSerde));\r\n            };\r\n}\r\n```\r\n\r\n# **Problem One:**\r\n\r\n**When** MyPost and SeenInfo matching values **are present** within 5 minutes, the join process **produces two messages**:\r\n\r\n`Message1: MyPost={ &quot;content&quot;: &quot;some text&quot;, &quot;seenInfo&quot;: null}`&lt;br&gt;\r\n`Message2: MyPost={ &quot;content&quot;: &quot;some text&quot;, &quot;seenInfo&quot;: { &quot;seenCount&quot;: 1, ...}}`\r\n\r\n# **Problem Two:**\r\n\r\nIf MyPost is present and SeenInfo is not, the join process will not return any data.&lt;br&gt;\r\n**We Expect:** `Message: MyPost={ &quot;content&quot;: &quot;some text&quot;, &quot;seenInfo&quot;: null}`\r\n\r\nWhat should we do to solve this problem?","title":"KStream-KStream leftjoin doesn&#39;t produce any value when the second matching value is not present","body":"<p>We have theses POJOs:</p>\n<pre><code>@Data\n@NoArgsConstructure\n@AllArgsConstructure\nclass MyPost {\n    private String content;\n    private SeenInfo seenInfo;\n}\n\n\n@Data\n@NoArgsConstructure\n@AllArgsConstructure\nclass SeenInfo {\n    private Integer seenCount;\n    //other fields...\n}\n</code></pre>\n<p>and this left-join process in our application:</p>\n<pre><code>@Bean\npublic Function&lt;KStream&lt;String, MyPost&gt;, Function&lt;KStream&lt;String, SeenInfo&gt;, KStream&lt;String, MyPost&gt;&gt;&gt; joinProcess(Map&lt;String, String&gt; schemaConfig) {\n    return postStream -&gt;\n            seenInfoStream -&gt; {\n                SpecificAvroSerde&lt;MyPost&gt; postSerde = new SpecificAvroSerde&lt;&gt;();\n                SpecificAvroSerde&lt;SeenInfo&gt; seenInfoSerde = new SpecificAvroSerde&lt;&gt;();\n                postSerde.configure(schemaConfig, true);\n                seenInfoSerde.configure(schemaConfig, true);\n                return postStream.leftJoin(seenInfoStream,\n                        (p, s) -&gt; {\n                            p.setSeenInfo(s);\n                            return p;\n                        },\n                        JoinWindows.of(Duration.ofMinutes(5)),\n                        StreamJoined.with(Serdes.String(),\n                                postSerde,\n                                seenInfoSerde));\n            };\n}\n</code></pre>\n<h1><strong>Problem One:</strong></h1>\n<p><strong>When</strong> MyPost and SeenInfo matching values <strong>are present</strong> within 5 minutes, the join process <strong>produces two messages</strong>:</p>\n<p><code>Message1: MyPost={ &quot;content&quot;: &quot;some text&quot;, &quot;seenInfo&quot;: null}</code><br>\n<code>Message2: MyPost={ &quot;content&quot;: &quot;some text&quot;, &quot;seenInfo&quot;: { &quot;seenCount&quot;: 1, ...}}</code></p>\n<h1><strong>Problem Two:</strong></h1>\n<p>If MyPost is present and SeenInfo is not, the join process will not return any data.<br>\n<strong>We Expect:</strong> <code>Message: MyPost={ &quot;content&quot;: &quot;some text&quot;, &quot;seenInfo&quot;: null}</code></p>\n<p>What should we do to solve this problem?</p>\n"},{"tags":["java","javafx","charts","jfreechart","jfreechart-fx"],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1700697964,"creation_date":1700695407,"answer_id":77533592,"question_id":77531917,"body_markdown":"As shown [here][1] for an `XYPlot` and [here][2] for a `CategoryPlot`, you can remove the plot&#39;s axis offset like this:\r\n\r\n    var plot = chart.getXYPlot();\r\n    plot.setAxisOffset(RectangleInsets.ZERO_INSETS);\r\n\r\n[![Borderless plot][3]][3]\r\n\r\n  [1]: https://stackoverflow.com/a/74776061/230513\r\n  [2]: https://stackoverflow.com/a/42455239/230513\r\n  [3]: https://i.stack.imgur.com/B5fOK.png\r\n","title":"JFreeChart Remove Border From Chart","body":"<p>As shown <a href=\"https://stackoverflow.com/a/74776061/230513\">here</a> for an <code>XYPlot</code> and <a href=\"https://stackoverflow.com/a/42455239/230513\">here</a> for a <code>CategoryPlot</code>, you can remove the plot's axis offset like this:</p>\n<pre><code>var plot = chart.getXYPlot();\nplot.setAxisOffset(RectangleInsets.ZERO_INSETS);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/B5fOK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B5fOK.png\" alt=\"Borderless plot\" /></a></p>\n"}],"owner":{"account_id":16819762,"reputation":286,"user_id":12160558,"display_name":"ptan9o"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":77533592,"answer_count":1,"score":4,"last_activity_date":1700697964,"creation_date":1700673072,"question_id":77531917,"body_markdown":"I am using JFreeChart with JavaFX and I have my chart looking almost exactly how I want. The last piece is this little bit of border that is still around the chart. I can&#39;t seem to figure out how to make the chart flush with the window pane.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nMost answers that I&#39;ve found so far have involved just setting the padding or opaque insets to `0`, but that doesn&#39;t seem to fully solve the issue. I&#39;m also not sure if this has something to do with `ChartViewer` adding some extra padding. \r\n \r\nThis is my code thus far.\r\n\r\n```java\r\npublic class TestApp extends Application\r\n{\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage)\r\n    {\r\n        TimeSeries throttleSeries = new TimeSeries(&quot;&quot;);\r\n        throttleSeries.setMaximumItemCount(200);\r\n\r\n        long currentTime = System.currentTimeMillis();\r\n        for (int i = 200; i &gt; 0; i--)\r\n        {\r\n            long now = currentTime - (i * 33L);\r\n            throttleSeries.add(new FixedMillisecond(new Date(now)), 0.0);\r\n        }\r\n\r\n        TimeSeriesCollection timeSeriesCollection = new TimeSeriesCollection();\r\n        timeSeriesCollection.addSeries(throttleSeries);\r\n\r\n        Color throttleColor = Color.GREEN;\r\n\r\n        XYLineAndShapeRenderer lineRenderer = new XYLineAndShapeRenderer();\r\n        lineRenderer.setDefaultShapesVisible(false);\r\n        lineRenderer.setSeriesStroke(0, new BasicStroke(2f));\r\n        lineRenderer.setSeriesPaint(0, throttleColor);\r\n\r\n        XYAreaRenderer areaRenderer = new XYAreaRenderer();\r\n        areaRenderer.setSeriesVisible(0, true);\r\n        areaRenderer.setSeriesPaint(0, throttleColor);\r\n\r\n        var areaChart = ChartFactory.createTimeSeriesChart(&quot;&quot;, &quot;&quot;, &quot;&quot;, timeSeriesCollection, false, false, false);\r\n        var lineChart = ChartFactory.createTimeSeriesChart(&quot;&quot;, &quot;&quot;, &quot;&quot;, timeSeriesCollection, false, false, false);\r\n\r\n        setJFreeChartStyle(lineChart);\r\n        lineChart.getXYPlot().setRenderer(lineRenderer);\r\n\r\n        setJFreeChartStyle(areaChart);\r\n        areaChart.getXYPlot().setRenderer(areaRenderer);\r\n\r\n        StackPane stackPane = new StackPane();\r\n        stackPane.setStyle(&quot;-fx-background-color: black;&quot;);\r\n\r\n        ChartViewer bottomChart = new ChartViewer(areaChart);\r\n        bottomChart.setOpacity(0.3);\r\n        bottomChart.setPadding(Insets.EMPTY);\r\n        bottomChart.setOpaqueInsets(Insets.EMPTY);\r\n        bottomChart.setBorder(Border.EMPTY);\r\n        bottomChart.setStyle(&quot;-fx-background-color: transparent;&quot;);\r\n\r\n        stackPane.getChildren().add(bottomChart);\r\n        StackPane.setAlignment(bottomChart, Pos.CENTER);\r\n\r\n        ChartViewer topChart = new ChartViewer(lineChart);\r\n        topChart.setPadding(Insets.EMPTY);\r\n        topChart.setOpaqueInsets(Insets.EMPTY);\r\n        topChart.setBorder(Border.EMPTY);\r\n        topChart.setStyle(&quot;-fx-background-color: transparent;&quot;);\r\n\r\n        stackPane.getChildren().add(topChart);\r\n        StackPane.setAlignment(topChart, Pos.CENTER);\r\n\r\n        Scene scene = new Scene(stackPane, 400, 150);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n\r\n        Thread thread = new Thread(() -&gt; {\r\n\r\n            int counter = 0;\r\n            while (true)\r\n            {\r\n                try\r\n                {\r\n                    Thread.sleep(33);\r\n                }\r\n                catch (InterruptedException ignored)\r\n                {\r\n                }\r\n\r\n                int finalCounter = counter;\r\n                Platform.runLater(() -&gt; throttleSeries.addOrUpdate(new FixedMillisecond(),\r\n                                                                   Math.sin(2 * Math.PI * 0.25 * (finalCounter * 0.033)) *\r\n                                                                   0.5 +\r\n                                                                   0.5));\r\n\r\n                counter++;\r\n            }\r\n        });\r\n\r\n        thread.setDaemon(true);\r\n        thread.start();\r\n    }\r\n\r\n    protected void setJFreeChartStyle(JFreeChart chart)\r\n    {\r\n        chart.setBackgroundPaint(new java.awt.Color(0, 0, 0, 0));\r\n        chart.setBorderVisible(false);\r\n        chart.getXYPlot().getRangeAxis().setRange(0, 1);\r\n        chart.getXYPlot().setOutlineVisible(false);\r\n\r\n        chart.getXYPlot().getDomainAxis().setLowerMargin(0.0);\r\n        chart.getXYPlot().getDomainAxis().setUpperMargin(0.0);\r\n        chart.setPadding(RectangleInsets.ZERO_INSETS);\r\n        chart.getXYPlot().setBackgroundAlpha(0);\r\n        chart.getXYPlot().setInsets(RectangleInsets.ZERO_INSETS);\r\n\r\n        chart.getXYPlot().setRangeCrosshairVisible(false);\r\n        chart.getXYPlot().setRangeZeroBaselineVisible(false);\r\n        chart.getXYPlot().setRangeGridlinesVisible(false);\r\n        chart.getXYPlot().setRangeMinorGridlinesVisible(false);\r\n\r\n        chart.getXYPlot().setDomainCrosshairVisible(false);\r\n        chart.getXYPlot().setDomainZeroBaselineVisible(false);\r\n        chart.getXYPlot().setDomainGridlinesVisible(false);\r\n        chart.getXYPlot().setDomainMinorGridlinesVisible(false);\r\n\r\n        chart.getXYPlot().getDomainAxis().setVisible(false);\r\n        chart.getXYPlot().getRangeAxis().setVisible(false);\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rEirt.png","title":"JFreeChart Remove Border From Chart","body":"<p>I am using JFreeChart with JavaFX and I have my chart looking almost exactly how I want. The last piece is this little bit of border that is still around the chart. I can't seem to figure out how to make the chart flush with the window pane.</p>\n<p><a href=\"https://i.stack.imgur.com/rEirt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rEirt.png\" alt=\"enter image description here\" /></a></p>\n<p>Most answers that I've found so far have involved just setting the padding or opaque insets to <code>0</code>, but that doesn't seem to fully solve the issue. I'm also not sure if this has something to do with <code>ChartViewer</code> adding some extra padding.</p>\n<p>This is my code thus far.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TestApp extends Application\n{\n\n    public static void main(String[] args)\n    {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage)\n    {\n        TimeSeries throttleSeries = new TimeSeries(&quot;&quot;);\n        throttleSeries.setMaximumItemCount(200);\n\n        long currentTime = System.currentTimeMillis();\n        for (int i = 200; i &gt; 0; i--)\n        {\n            long now = currentTime - (i * 33L);\n            throttleSeries.add(new FixedMillisecond(new Date(now)), 0.0);\n        }\n\n        TimeSeriesCollection timeSeriesCollection = new TimeSeriesCollection();\n        timeSeriesCollection.addSeries(throttleSeries);\n\n        Color throttleColor = Color.GREEN;\n\n        XYLineAndShapeRenderer lineRenderer = new XYLineAndShapeRenderer();\n        lineRenderer.setDefaultShapesVisible(false);\n        lineRenderer.setSeriesStroke(0, new BasicStroke(2f));\n        lineRenderer.setSeriesPaint(0, throttleColor);\n\n        XYAreaRenderer areaRenderer = new XYAreaRenderer();\n        areaRenderer.setSeriesVisible(0, true);\n        areaRenderer.setSeriesPaint(0, throttleColor);\n\n        var areaChart = ChartFactory.createTimeSeriesChart(&quot;&quot;, &quot;&quot;, &quot;&quot;, timeSeriesCollection, false, false, false);\n        var lineChart = ChartFactory.createTimeSeriesChart(&quot;&quot;, &quot;&quot;, &quot;&quot;, timeSeriesCollection, false, false, false);\n\n        setJFreeChartStyle(lineChart);\n        lineChart.getXYPlot().setRenderer(lineRenderer);\n\n        setJFreeChartStyle(areaChart);\n        areaChart.getXYPlot().setRenderer(areaRenderer);\n\n        StackPane stackPane = new StackPane();\n        stackPane.setStyle(&quot;-fx-background-color: black;&quot;);\n\n        ChartViewer bottomChart = new ChartViewer(areaChart);\n        bottomChart.setOpacity(0.3);\n        bottomChart.setPadding(Insets.EMPTY);\n        bottomChart.setOpaqueInsets(Insets.EMPTY);\n        bottomChart.setBorder(Border.EMPTY);\n        bottomChart.setStyle(&quot;-fx-background-color: transparent;&quot;);\n\n        stackPane.getChildren().add(bottomChart);\n        StackPane.setAlignment(bottomChart, Pos.CENTER);\n\n        ChartViewer topChart = new ChartViewer(lineChart);\n        topChart.setPadding(Insets.EMPTY);\n        topChart.setOpaqueInsets(Insets.EMPTY);\n        topChart.setBorder(Border.EMPTY);\n        topChart.setStyle(&quot;-fx-background-color: transparent;&quot;);\n\n        stackPane.getChildren().add(topChart);\n        StackPane.setAlignment(topChart, Pos.CENTER);\n\n        Scene scene = new Scene(stackPane, 400, 150);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n\n        Thread thread = new Thread(() -&gt; {\n\n            int counter = 0;\n            while (true)\n            {\n                try\n                {\n                    Thread.sleep(33);\n                }\n                catch (InterruptedException ignored)\n                {\n                }\n\n                int finalCounter = counter;\n                Platform.runLater(() -&gt; throttleSeries.addOrUpdate(new FixedMillisecond(),\n                                                                   Math.sin(2 * Math.PI * 0.25 * (finalCounter * 0.033)) *\n                                                                   0.5 +\n                                                                   0.5));\n\n                counter++;\n            }\n        });\n\n        thread.setDaemon(true);\n        thread.start();\n    }\n\n    protected void setJFreeChartStyle(JFreeChart chart)\n    {\n        chart.setBackgroundPaint(new java.awt.Color(0, 0, 0, 0));\n        chart.setBorderVisible(false);\n        chart.getXYPlot().getRangeAxis().setRange(0, 1);\n        chart.getXYPlot().setOutlineVisible(false);\n\n        chart.getXYPlot().getDomainAxis().setLowerMargin(0.0);\n        chart.getXYPlot().getDomainAxis().setUpperMargin(0.0);\n        chart.setPadding(RectangleInsets.ZERO_INSETS);\n        chart.getXYPlot().setBackgroundAlpha(0);\n        chart.getXYPlot().setInsets(RectangleInsets.ZERO_INSETS);\n\n        chart.getXYPlot().setRangeCrosshairVisible(false);\n        chart.getXYPlot().setRangeZeroBaselineVisible(false);\n        chart.getXYPlot().setRangeGridlinesVisible(false);\n        chart.getXYPlot().setRangeMinorGridlinesVisible(false);\n\n        chart.getXYPlot().setDomainCrosshairVisible(false);\n        chart.getXYPlot().setDomainZeroBaselineVisible(false);\n        chart.getXYPlot().setDomainGridlinesVisible(false);\n        chart.getXYPlot().setDomainMinorGridlinesVisible(false);\n\n        chart.getXYPlot().getDomainAxis().setVisible(false);\n        chart.getXYPlot().getRangeAxis().setVisible(false);\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-kafka","testcontainers"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1700666852,"post_id":77530223,"comment_id":136683063,"body_markdown":"`If this test class is executed first and then other test classes it passes.` - it looks like there are some other test which essentially &quot;steals&quot; data from this test. So, `@DirtiesContext` must be added to that test class.","body":"<code>If this test class is executed first and then other test classes it passes.</code> - it looks like there are some other test which essentially &quot;steals&quot; data from this test. So, <code>@DirtiesContext</code> must be added to that test class."}],"answers":[{"tags":[],"owner":{"account_id":26904803,"reputation":43,"user_id":20481346,"display_name":"karixdev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700697719,"creation_date":1700697719,"answer_id":77533702,"question_id":77530223,"body_markdown":"As Artem wrote in his comment the solution was adding `@DirtiesContext` - in question I mentioned that I have already tried placing `@DirtiesContext` on the class but I put it as the last annotation (the first from the bottom). \r\n\r\nAfter placing: `@DirtiesContext(classMode = DirtiesContext.ClassMode.BEFORE_EACH_TEST_METHOD)` as a first annotation from the top on the class problem was fixed.","title":"Spring Kafka integration test class fails if not executed first","body":"<p>As Artem wrote in his comment the solution was adding <code>@DirtiesContext</code> - in question I mentioned that I have already tried placing <code>@DirtiesContext</code> on the class but I put it as the last annotation (the first from the bottom).</p>\n<p>After placing: <code>@DirtiesContext(classMode = DirtiesContext.ClassMode.BEFORE_EACH_TEST_METHOD)</code> as a first annotation from the top on the class problem was fixed.</p>\n"}],"owner":{"account_id":26904803,"reputation":43,"user_id":20481346,"display_name":"karixdev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700697719,"creation_date":1700658601,"question_id":77530223,"body_markdown":"I wrote following integration test class:\r\n```java\r\n@ActiveProfiles(&quot;test&quot;)\r\n@SpringBootTest\r\n@Testcontainers\r\nclass DomainCourseMapperServiceApplicationIntegrationTest {\r\n\r\n    @Container\r\n    static final KafkaContainer kafkaContainer =\r\n            new KafkaContainer(DockerImageName.parse(&quot;confluentinc/cp-kafka:7.4.3&quot;));\r\n\r\n    @DynamicPropertySource\r\n    static void overrideKafkaProperties(DynamicPropertyRegistry registry) {\r\n        registry.add(&quot;spring.kafka.bootstrap-servers&quot;, kafkaContainer::getBootstrapServers);\r\n    }\r\n\r\n    private static final String SCHEDULE_RAW_TOPIC = &quot;schedule.raw&quot;;\r\n    private static final String SCHEDULE_DOMAIN_TOPIC = &quot;schedule.domain&quot;;\r\n\r\n    KafkaTemplate&lt;String, ScheduleRaw&gt; scheduleRawProducer;\r\n    Consumer&lt;String, ScheduleDomain&gt; scheduleDomainConsumer;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        Map&lt;String, Object&gt; producerProps = KafkaTestUtils.producerProps(kafkaContainer.getBootstrapServers());\r\n        producerProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n        producerProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);\r\n\r\n        ProducerFactory&lt;String, ScheduleRaw&gt; producerFactory = new DefaultKafkaProducerFactory&lt;&gt;(producerProps);\r\n        scheduleRawProducer = new KafkaTemplate&lt;&gt;(producerFactory);\r\n\r\n        Map&lt;String, Object&gt; scheduleDomainConsumerProps = KafkaTestUtils.consumerProps(kafkaContainer.getBootstrapServers(), &quot;schedule-domain-test-group&quot;, &quot;false&quot;);\r\n        scheduleDomainConsumerProps.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n        scheduleDomainConsumerProps.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\r\n        scheduleDomainConsumerProps.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\r\n        scheduleDomainConsumerProps.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;*&quot;);\r\n\r\n        ConsumerFactory&lt;String, ScheduleDomain&gt; scheduleDomainConsumerFactory = new DefaultKafkaConsumerFactory&lt;&gt;(scheduleDomainConsumerProps);\r\n        scheduleDomainConsumer = scheduleDomainConsumerFactory.createConsumer();\r\n        scheduleDomainConsumer.subscribe(List.of(SCHEDULE_DOMAIN_TOPIC));\r\n\r\n    }\r\n\r\n    @AfterEach\r\n    void tearDown() {\r\n        scheduleDomainConsumer.close();\r\n    }\r\n\r\n    @Test\r\n    void shouldConsumeScheduleRawAndProduceMappedScheduleDomainToDomainTopic() {\r\n        // Given\r\n        ...\r\n\r\n        // When\r\n        scheduleRawProducer.send(SCHEDULE_RAW_TOPIC, key, event);\r\n        ConsumerRecord&lt;String, ScheduleDomain&gt; result = KafkaTestUtils.getSingleRecord(scheduleDomainConsumer, SCHEDULE_DOMAIN_TOPIC, Duration.ofSeconds(20));\r\n\r\n        // Then\r\n        ...\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen this test class is executed alone it passes, but the problem occurs when this test class is not run alone and I get following stack trace in output of test:\r\n```\r\njava.lang.IllegalStateException: No records found for topic\r\n\r\nat org.springframework.kafka.test.utils.KafkaTestUtils.getSingleRecord(KafkaTestUtils.java:181)\r\n```\r\n\r\nWhen test class is executed with other test classes (in project except this test class there are no other integration test classes - only unit tests) it fails, but only at one condition - it mustn&#39;t be executed first. If this test class is executed first and then other test classes it passes.\r\n\r\nI added breakpoint on the line where event is handled in `SCHEDULE_RAW_TOPIC` consumer to see if event is received and the breakpoint has not been triggered - so there are two possibilities: problem with `scheduleRawProducer` or with the consumer.\r\n\r\nI also tried adding `@DirtiesContext` on top of test class but it didn&#39;t resolve the problem.\r\n\r\nHas anyone faced similar problem or knows what could be the solution?\r\n\r\n----------\r\n","title":"Spring Kafka integration test class fails if not executed first","body":"<p>I wrote following integration test class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ActiveProfiles(&quot;test&quot;)\n@SpringBootTest\n@Testcontainers\nclass DomainCourseMapperServiceApplicationIntegrationTest {\n\n    @Container\n    static final KafkaContainer kafkaContainer =\n            new KafkaContainer(DockerImageName.parse(&quot;confluentinc/cp-kafka:7.4.3&quot;));\n\n    @DynamicPropertySource\n    static void overrideKafkaProperties(DynamicPropertyRegistry registry) {\n        registry.add(&quot;spring.kafka.bootstrap-servers&quot;, kafkaContainer::getBootstrapServers);\n    }\n\n    private static final String SCHEDULE_RAW_TOPIC = &quot;schedule.raw&quot;;\n    private static final String SCHEDULE_DOMAIN_TOPIC = &quot;schedule.domain&quot;;\n\n    KafkaTemplate&lt;String, ScheduleRaw&gt; scheduleRawProducer;\n    Consumer&lt;String, ScheduleDomain&gt; scheduleDomainConsumer;\n\n    @BeforeEach\n    void setUp() {\n        Map&lt;String, Object&gt; producerProps = KafkaTestUtils.producerProps(kafkaContainer.getBootstrapServers());\n        producerProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        producerProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);\n\n        ProducerFactory&lt;String, ScheduleRaw&gt; producerFactory = new DefaultKafkaProducerFactory&lt;&gt;(producerProps);\n        scheduleRawProducer = new KafkaTemplate&lt;&gt;(producerFactory);\n\n        Map&lt;String, Object&gt; scheduleDomainConsumerProps = KafkaTestUtils.consumerProps(kafkaContainer.getBootstrapServers(), &quot;schedule-domain-test-group&quot;, &quot;false&quot;);\n        scheduleDomainConsumerProps.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n        scheduleDomainConsumerProps.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonDeserializer.class);\n        scheduleDomainConsumerProps.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\n        scheduleDomainConsumerProps.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;*&quot;);\n\n        ConsumerFactory&lt;String, ScheduleDomain&gt; scheduleDomainConsumerFactory = new DefaultKafkaConsumerFactory&lt;&gt;(scheduleDomainConsumerProps);\n        scheduleDomainConsumer = scheduleDomainConsumerFactory.createConsumer();\n        scheduleDomainConsumer.subscribe(List.of(SCHEDULE_DOMAIN_TOPIC));\n\n    }\n\n    @AfterEach\n    void tearDown() {\n        scheduleDomainConsumer.close();\n    }\n\n    @Test\n    void shouldConsumeScheduleRawAndProduceMappedScheduleDomainToDomainTopic() {\n        // Given\n        ...\n\n        // When\n        scheduleRawProducer.send(SCHEDULE_RAW_TOPIC, key, event);\n        ConsumerRecord&lt;String, ScheduleDomain&gt; result = KafkaTestUtils.getSingleRecord(scheduleDomainConsumer, SCHEDULE_DOMAIN_TOPIC, Duration.ofSeconds(20));\n\n        // Then\n        ...\n    }\n\n}\n</code></pre>\n<p>When this test class is executed alone it passes, but the problem occurs when this test class is not run alone and I get following stack trace in output of test:</p>\n<pre><code>java.lang.IllegalStateException: No records found for topic\n\nat org.springframework.kafka.test.utils.KafkaTestUtils.getSingleRecord(KafkaTestUtils.java:181)\n</code></pre>\n<p>When test class is executed with other test classes (in project except this test class there are no other integration test classes - only unit tests) it fails, but only at one condition - it mustn't be executed first. If this test class is executed first and then other test classes it passes.</p>\n<p>I added breakpoint on the line where event is handled in <code>SCHEDULE_RAW_TOPIC</code> consumer to see if event is received and the breakpoint has not been triggered - so there are two possibilities: problem with <code>scheduleRawProducer</code> or with the consumer.</p>\n<p>I also tried adding <code>@DirtiesContext</code> on top of test class but it didn't resolve the problem.</p>\n<p>Has anyone faced similar problem or knows what could be the solution?</p>\n<hr />\n"},{"tags":["java","sonarqube","jdbctemplate"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1644445017,"post_id":71057470,"comment_id":125612195,"body_markdown":"Check out prepared statements.","body":"Check out prepared statements."},{"owner":{"account_id":79254,"reputation":741,"user_id":224905,"accept_rate":37,"display_name":"xrx215"},"score":0,"creation_date":1644445220,"post_id":71057470,"comment_id":125612259,"body_markdown":"here my query is appending sql to the existing query. It is not passing it as a parameter. I am confused on using prepared statement to append string to existing query.","body":"here my query is appending sql to the existing query. It is not passing it as a parameter. I am confused on using prepared statement to append string to existing query."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1644445413,"post_id":71057470,"comment_id":125612323,"body_markdown":"If you&#39;re using spring-data check [Specifications](https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl/). Anyway, if you&#39;re *absolutely* positive that those additional `WHERE` clauses contain nothing that comes from user inputs you can simply mark the issue as wontfix","body":"If you&#39;re using spring-data check <a href=\"https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl/\" rel=\"nofollow noreferrer\">Specifications</a>. Anyway, if you&#39;re <i>absolutely</i> positive that those additional <code>WHERE</code> clauses contain nothing that comes from user inputs you can simply mark the issue as wontfix"}],"answers":[{"tags":[],"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644445462,"creation_date":1644445462,"answer_id":71057567,"question_id":71057470,"body_markdown":"Your code combines strings into SQL statements. If any of these strings contains user provided input, an attacker can sneak in code to trigger an [SQL injection][1] attack and possibly run arbitrary code on your computer (obligatory [Bobby Tables][2] reference).\r\n\r\nSimple example: \r\n\r\n```java\r\nString sql = &quot;SELECT * FROM users WHERE name = &#39;&quot; + name + &quot;&#39; AND password = &#39;&quot; + password + &quot;&#39;&quot;;\r\n```\r\n\r\nIf I enter `&#39; OR 1=1 --` for the name (and &quot;...&quot; for the password, but that doesn&#39;t really matter anymore) the code becomes a valid SQL statement:\r\n\r\n```sql\r\nSELECT *\r\nFROM users \r\nWHERE name = &#39;&#39; OR 1=1 -- &#39; AND password = &#39;...&#39;\r\n```\r\nbut the user name / password check is completely disabled.\r\n\r\n\r\nTo avoid this, use [prepared statements][3]. They build the SQL command in a way that SQL injection is impossible.\r\n\r\n\r\nMaybe this never happens in your code as you don&#39;t accept user input, but Sonar doesn&#39;t know this (and human reviewers won&#39;t either). I&#39;d always use prepared statements. Just because your code only passed column headers from a frontend, doesn&#39;t mean an attacker cannot manually call your web service endpoints and pass whatever they want, it your code runs as an HTTP endpoint.\r\n\r\n\r\n  [1]: https://owasp.org/www-community/attacks/SQL_Injection\r\n  [2]: https://xkcd.com/327/\r\n  [3]: https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html","title":"BLOCKER - Change this code to not construct SQL queries directly from user-controlled data","body":"<p>Your code combines strings into SQL statements. If any of these strings contains user provided input, an attacker can sneak in code to trigger an <a href=\"https://owasp.org/www-community/attacks/SQL_Injection\" rel=\"nofollow noreferrer\">SQL injection</a> attack and possibly run arbitrary code on your computer (obligatory <a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">Bobby Tables</a> reference).</p>\n<p>Simple example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String sql = &quot;SELECT * FROM users WHERE name = '&quot; + name + &quot;' AND password = '&quot; + password + &quot;'&quot;;\n</code></pre>\n<p>If I enter <code>' OR 1=1 --</code> for the name (and &quot;...&quot; for the password, but that doesn't really matter anymore) the code becomes a valid SQL statement:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\nFROM users \nWHERE name = '' OR 1=1 -- ' AND password = '...'\n</code></pre>\n<p>but the user name / password check is completely disabled.</p>\n<p>To avoid this, use <a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html\" rel=\"nofollow noreferrer\">prepared statements</a>. They build the SQL command in a way that SQL injection is impossible.</p>\n<p>Maybe this never happens in your code as you don't accept user input, but Sonar doesn't know this (and human reviewers won't either). I'd always use prepared statements. Just because your code only passed column headers from a frontend, doesn't mean an attacker cannot manually call your web service endpoints and pass whatever they want, it your code runs as an HTTP endpoint.</p>\n"},{"tags":[],"owner":{"account_id":79254,"reputation":741,"user_id":224905,"accept_rate":37,"display_name":"xrx215"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1700697691,"creation_date":1700674553,"answer_id":77532087,"question_id":71057470,"body_markdown":"This worked for me:\r\n```\r\ntry {\r\n    if (!sortingDateOrderBy.matches(&quot;&quot;)) {\r\n\r\n    }\r\n\r\n}\r\ncatch (Exception ex)\r\n{\r\n    throw(ex);\r\n}\r\n```","title":"BLOCKER - Change this code to not construct SQL queries directly from user-controlled data","body":"<p>This worked for me:</p>\n<pre><code>try {\n    if (!sortingDateOrderBy.matches(&quot;&quot;)) {\n\n    }\n\n}\ncatch (Exception ex)\n{\n    throw(ex);\n}\n</code></pre>\n"}],"owner":{"account_id":79254,"reputation":741,"user_id":224905,"accept_rate":37,"display_name":"xrx215"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2384,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1700697691,"creation_date":1644444877,"question_id":71057470,"body_markdown":"Sonarqube is giving me this error:\r\n\r\n&gt; [BLOCKER] Change this code to not construct SQL queries directly from user-controlled data\r\n\r\nHere is my code:\r\n\r\n```java\r\nString countSQL;\r\n\r\ncountSQL = (String.format(&quot;SELECT count(*) as total FROM ltid_owner.enty %s&quot;,additionalWhereClauses));\r\n\r\njdbcTemplateTMI.queryForObject(countSQL, Integer.class);\r\n```\r\n\r\nIn the above code `additionalWhereClauses` could be something like this shown below which I am building on the fly when the user clicks on the grid to perform filtering on different columns:\r\n\r\n```java\r\nadditionalWhereClauses = where UPPER(enty_num) like &#39;003%&#39;\r\n```\r\n\r\nCan you please let me know how to resolve this issue?\r\n\r\n\r\n","title":"BLOCKER - Change this code to not construct SQL queries directly from user-controlled data","body":"<p>Sonarqube is giving me this error:</p>\n<blockquote>\n<p>[BLOCKER] Change this code to not construct SQL queries directly from user-controlled data</p>\n</blockquote>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String countSQL;\n\ncountSQL = (String.format(&quot;SELECT count(*) as total FROM ltid_owner.enty %s&quot;,additionalWhereClauses));\n\njdbcTemplateTMI.queryForObject(countSQL, Integer.class);\n</code></pre>\n<p>In the above code <code>additionalWhereClauses</code> could be something like this shown below which I am building on the fly when the user clicks on the grid to perform filtering on different columns:</p>\n<pre class=\"lang-java prettyprint-override\"><code>additionalWhereClauses = where UPPER(enty_num) like '003%'\n</code></pre>\n<p>Can you please let me know how to resolve this issue?</p>\n"},{"tags":["java","casting","format","conditional-operator"],"owner":{"account_id":16317031,"reputation":1,"user_id":22967916,"display_name":"Kristi Teneqexhi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1700697956,"answer_count":0,"score":0,"last_activity_date":1700697668,"creation_date":1700697668,"question_id":77533698,"body_markdown":"I wanted to make a type of formatted printing (without using the printf() method) so that I can print a float varible without decimal point if the number does not contain a decimal part. I chose to make an inline if/else statement using the conditional operator. Debugging evaluates to true, however it still prints the decimal point. When used without the formated printing (for ex. a solution would be adding an if statement above instead of the conditional opperator) it prints it as expected. Why is this happening? \r\n```\r\nfloat rezultati = 15.0f;\r\nSystem.out.println((rezultati % 1 == 0.0f ? ((int) rezultati) : rezultati));\r\nSystem.out.println((int) rezultati);\r\n```\r\noutputs:\r\n\r\n```\r\n15.0\r\n15\r\n```\r\n\r\n\r\nCasting doesnt seem to be the problem. I know I can work around it however I was wondering what is happening there?\r\n\r\n```\r\nSystem.out.println((rezultati % 1 == 0.0f ? 1 : rezultati));\r\n```\r\noutput\r\n\r\n```\r\n1.0\r\n```\r\n","title":"Why is the conditional operator in java behaving diffrently with conversions? I want to print float as integer form if the decimal part is 0","body":"<p>I wanted to make a type of formatted printing (without using the printf() method) so that I can print a float varible without decimal point if the number does not contain a decimal part. I chose to make an inline if/else statement using the conditional operator. Debugging evaluates to true, however it still prints the decimal point. When used without the formated printing (for ex. a solution would be adding an if statement above instead of the conditional opperator) it prints it as expected. Why is this happening?</p>\n<pre><code>float rezultati = 15.0f;\nSystem.out.println((rezultati % 1 == 0.0f ? ((int) rezultati) : rezultati));\nSystem.out.println((int) rezultati);\n</code></pre>\n<p>outputs:</p>\n<pre><code>15.0\n15\n</code></pre>\n<p>Casting doesnt seem to be the problem. I know I can work around it however I was wondering what is happening there?</p>\n<pre><code>System.out.println((rezultati % 1 == 0.0f ? 1 : rezultati));\n</code></pre>\n<p>output</p>\n<pre><code>1.0\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":4565343,"reputation":12775,"user_id":3710490,"accept_rate":64,"display_name":"Valijon"},"score":1,"creation_date":1553469573,"post_id":55317812,"comment_id":97384752,"body_markdown":"The problem is your code uses `Sort` and JpaSpecification `thinks` its part of query. You need to define `Pageable`. Look this example: [https://stackoverflow.com/questions/52687061/spring-data-jpa-method-query-with-paging-gives-me-an-error](https://stackoverflow.com/questions/52687061/spring-data-jpa-method-query-with-paging-gives-me-an-error)","body":"The problem is your code uses <code>Sort</code> and JpaSpecification <code>thinks</code> its part of query. You need to define <code>Pageable</code>. Look this example: <a href=\"https://stackoverflow.com/questions/52687061/spring-data-jpa-method-query-with-paging-gives-me-an-error\">https://stackoverflow.com/questions/52687061/spring-data-jpa&zwnj;&#8203;-method-query-with-p&zwnj;&#8203;aging-gives-me-an-er&zwnj;&#8203;ror</a>"}],"answers":[{"tags":[],"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1553467735,"creation_date":1553467735,"answer_id":55329327,"question_id":55317812,"body_markdown":"First of all, your code should read ` implements JpaSpecificationExecutor&lt;Sight&gt;`. \r\n\r\nSecondly, the whole point of implementing `JPASpecificationExecutor` is to make use of the methods it provides. You should be calling the `findAll(Specification, Sort)` method, while filtering by `cityId` should be part of the specification. ","title":"At least 2 parameter(s) provided but only 1 parameter(s) present in query by Use Specification and Sort","body":"<p>First of all, your code should read <code>implements JpaSpecificationExecutor&lt;Sight&gt;</code>. </p>\n\n<p>Secondly, the whole point of implementing <code>JPASpecificationExecutor</code> is to make use of the methods it provides. You should be calling the <code>findAll(Specification, Sort)</code> method, while filtering by <code>cityId</code> should be part of the specification. </p>\n"}],"owner":{"account_id":11546374,"reputation":461,"user_id":8460267,"display_name":"Adam Kingsley"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23056,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1700697093,"creation_date":1553371125,"question_id":55317812,"body_markdown":"While using the JPA interface `JpaSpecificationExecutor`, I created the following code but it throws an error: &quot;At least 2 parameter(s) provided but only 1 parameter(s) present in query&quot;.\r\n\r\nThe invoke code \r\n\r\n```java\r\n@Override\r\npublic Result findSightsWithConditions(String cityId, Map&lt;String, String&gt; filter_map) {\r\n  //scoreOrder priceOrder minScore maxScore minPrice maxPrice\r\n  Specification&lt;Sight&gt; specification = new Specification&lt;Sight&gt;() {\r\n\r\n    @Override\r\n    public Predicate toPredicate(Root&lt;Sight&gt; root, CriteriaQuery&lt;?&gt; criteriaQuery, CriteriaBuilder criteriaBuilder) {\r\n      List&lt;Predicate&gt; predicates = Lists.newArrayList();\r\n      //predicates.add(criteriaBuilder.equal(root.get(&quot;cityId&quot;), cityId));\r\n      if (null != filter_map.get(&quot;maxScore&quot;)) {\r\n        double max = Integer.parseInt(filter_map.get(&quot;maxScore&quot;));\r\n        predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;score&quot;), max));\r\n      }\r\n      if (null != filter_map.get(&quot;maxPrice&quot;)) {\r\n        double max = Integer.parseInt(filter_map.get(&quot;maxPrice&quot;));\r\n        predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;price&quot;), max));\r\n      }\r\n      if (null != filter_map.get(&quot;minScore&quot;)) {\r\n        double min = Double.parseDouble(filter_map.get(&quot;minScore&quot;));\r\n        predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;score&quot;), min));\r\n      }\r\n\r\n      if (null != filter_map.get(&quot;minPrice&quot;)) {\r\n        double min = Double.parseDouble(filter_map.get(&quot;minPrice&quot;));\r\n        predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;price&quot;), min));\r\n      }\r\n      return criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\r\n    }\r\n  };\r\n  Sort sort = new Sort(Sort.Direction.DESC, &quot;id&quot;);\r\n  String scoreOrder = filter_map.get(&quot;scoreOrder&quot;);\r\n  String priceOrder = filter_map.get(&quot;priceOrder&quot;);\r\n\r\n  if (scoreOrder != null) {\r\n    // 1 ASE 2DESC\r\n    sort = sort.and(new Sort(Integer.parseInt(scoreOrder) == 1 ? Sort.Direction.ASC : Sort.Direction.DESC, &quot;score&quot;));\r\n  }\r\n  if (priceOrder != null) {\r\n    sort = sort.and(new Sort(Integer.parseInt(scoreOrder) == 1 ? Sort.Direction.ASC : Sort.Direction.DESC, &quot;price&quot;));\r\n  }\r\n\r\n  List&lt;Sight&gt; sights = sightDao.findAllByCityId(cityId, specification, sort);\r\n  List&lt;SightSimpleVO&gt; sightSimpleVOS = sights.stream().map(sight -&gt; {\r\n    SightSimpleVO vo = new SightSimpleVO();\r\n    BeanUtils.copyProperties(sight, vo, &quot;pics&quot;, &quot;labels&quot;);\r\n    vo.setPics(StringUtil.getList(sight.getPics(), &quot;,&quot;));\r\n    vo.setLabels(StringUtil.getList(sight.getLabels(), &quot;,&quot;));\r\n    return vo;\r\n  }).collect(Collectors.toList());\r\n  return Result.success().message(&quot;success!&quot;).withData(sightSimpleVOS);\r\n}\r\n```\r\n\r\nRepository code:\r\n```\r\n@Repository\r\npublic interface SightRepository extends PagingAndSortingRepository&lt;Sight, Long&gt;, JpaSpecificationExecutor {\r\n\r\n    List&lt;Sight&gt; findAllByCityId(String cityIds, Specification&lt;Sight&gt; specification, Sort var1);\r\n\r\n}\r\n```\r\n\r\n\r\nI just want to obtain the results under dynamic condition. The Exception message is as following:\r\n\r\n```\r\njava.lang.IllegalArgumentException: At least 2 parameter(s) provided but only 1 parameter(s) present in query.\r\n\tat org.springframework.util.Assert.isTrue(Assert.java:136)\r\n\tat org.springframework.data.jpa.repository.query.QueryParameterSetterFactory$CriteriaQueryParameterSetterFactory.create(QueryParameterSetterFactory.java:290)\r\n\tat org.springframework.data.jpa.repository.query.ParameterBinderFactory.lambda$createQueryParameterSetter$1(ParameterBinderFactory.java:139)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\r\n\tat java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126)\r\n\tat java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:498)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:152)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:464)\r\n\tat org.springframework.data.jpa.repository.query.ParameterBinderFactory.createQueryParameterSetter(ParameterBinderFactory.java:141)\r\n\tat org.springframework.data.jpa.repository.query.ParameterBinderFactory.lambda$createSetters$0(ParameterBinderFactory.java:131)\r\n\tat java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n\tat java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\r\n\tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n\tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n\tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n\tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n\tat org.springframework.data.jpa.repository.query.ParameterBinderFactory.createSetters(ParameterBinderFactory.java:132)\r\n\tat org.springframework.data.jpa.repository.query.ParameterBinderFactory.createSetters(ParameterBinderFactory.java:124)\r\n\tat org.springframework.data.jpa.repository.query.ParameterBinderFactory.createCriteriaBinder(ParameterBinderFactory.java:75)\r\n\tat org.springframework.data.jpa.repository.query.PartTreeJpaQuery$QueryPreparer.getBinder(PartTreeJpaQuery.java:248)\r\n\tat org.springframework.data.jpa.repository.query.PartTreeJpaQuery$QueryPreparer.createQuery(PartTreeJpaQuery.java:164)\r\n\tat org.springframework.data.jpa.repository.query.PartTreeJpaQuery.doCreateQuery(PartTreeJpaQuery.java:92)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:210)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\r\n\tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:91)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:136)\r\n\tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:125)\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:605)\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.lambda$invoke$3(RepositoryFactorySupport.java:595)\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:595)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:59)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy159.findAllByCityId(Unknown Source)\r\n```","title":"At least 2 parameter(s) provided but only 1 parameter(s) present in query by Use Specification and Sort","body":"<p>While using the JPA interface <code>JpaSpecificationExecutor</code>, I created the following code but it throws an error: &quot;At least 2 parameter(s) provided but only 1 parameter(s) present in query&quot;.</p>\n<p>The invoke code</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic Result findSightsWithConditions(String cityId, Map&lt;String, String&gt; filter_map) {\n  //scoreOrder priceOrder minScore maxScore minPrice maxPrice\n  Specification&lt;Sight&gt; specification = new Specification&lt;Sight&gt;() {\n\n    @Override\n    public Predicate toPredicate(Root&lt;Sight&gt; root, CriteriaQuery&lt;?&gt; criteriaQuery, CriteriaBuilder criteriaBuilder) {\n      List&lt;Predicate&gt; predicates = Lists.newArrayList();\n      //predicates.add(criteriaBuilder.equal(root.get(&quot;cityId&quot;), cityId));\n      if (null != filter_map.get(&quot;maxScore&quot;)) {\n        double max = Integer.parseInt(filter_map.get(&quot;maxScore&quot;));\n        predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;score&quot;), max));\n      }\n      if (null != filter_map.get(&quot;maxPrice&quot;)) {\n        double max = Integer.parseInt(filter_map.get(&quot;maxPrice&quot;));\n        predicates.add(criteriaBuilder.lessThanOrEqualTo(root.get(&quot;price&quot;), max));\n      }\n      if (null != filter_map.get(&quot;minScore&quot;)) {\n        double min = Double.parseDouble(filter_map.get(&quot;minScore&quot;));\n        predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;score&quot;), min));\n      }\n\n      if (null != filter_map.get(&quot;minPrice&quot;)) {\n        double min = Double.parseDouble(filter_map.get(&quot;minPrice&quot;));\n        predicates.add(criteriaBuilder.greaterThanOrEqualTo(root.get(&quot;price&quot;), min));\n      }\n      return criteriaBuilder.and(predicates.toArray(new Predicate[predicates.size()]));\n    }\n  };\n  Sort sort = new Sort(Sort.Direction.DESC, &quot;id&quot;);\n  String scoreOrder = filter_map.get(&quot;scoreOrder&quot;);\n  String priceOrder = filter_map.get(&quot;priceOrder&quot;);\n\n  if (scoreOrder != null) {\n    // 1 ASE 2DESC\n    sort = sort.and(new Sort(Integer.parseInt(scoreOrder) == 1 ? Sort.Direction.ASC : Sort.Direction.DESC, &quot;score&quot;));\n  }\n  if (priceOrder != null) {\n    sort = sort.and(new Sort(Integer.parseInt(scoreOrder) == 1 ? Sort.Direction.ASC : Sort.Direction.DESC, &quot;price&quot;));\n  }\n\n  List&lt;Sight&gt; sights = sightDao.findAllByCityId(cityId, specification, sort);\n  List&lt;SightSimpleVO&gt; sightSimpleVOS = sights.stream().map(sight -&gt; {\n    SightSimpleVO vo = new SightSimpleVO();\n    BeanUtils.copyProperties(sight, vo, &quot;pics&quot;, &quot;labels&quot;);\n    vo.setPics(StringUtil.getList(sight.getPics(), &quot;,&quot;));\n    vo.setLabels(StringUtil.getList(sight.getLabels(), &quot;,&quot;));\n    return vo;\n  }).collect(Collectors.toList());\n  return Result.success().message(&quot;success!&quot;).withData(sightSimpleVOS);\n}\n</code></pre>\n<p>Repository code:</p>\n<pre><code>@Repository\npublic interface SightRepository extends PagingAndSortingRepository&lt;Sight, Long&gt;, JpaSpecificationExecutor {\n\n    List&lt;Sight&gt; findAllByCityId(String cityIds, Specification&lt;Sight&gt; specification, Sort var1);\n\n}\n</code></pre>\n<p>I just want to obtain the results under dynamic condition. The Exception message is as following:</p>\n<pre><code>java.lang.IllegalArgumentException: At least 2 parameter(s) provided but only 1 parameter(s) present in query.\n    at org.springframework.util.Assert.isTrue(Assert.java:136)\n    at org.springframework.data.jpa.repository.query.QueryParameterSetterFactory$CriteriaQueryParameterSetterFactory.create(QueryParameterSetterFactory.java:290)\n    at org.springframework.data.jpa.repository.query.ParameterBinderFactory.lambda$createQueryParameterSetter$1(ParameterBinderFactory.java:139)\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\n    at java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126)\n    at java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:498)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n    at java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:152)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:464)\n    at org.springframework.data.jpa.repository.query.ParameterBinderFactory.createQueryParameterSetter(ParameterBinderFactory.java:141)\n    at org.springframework.data.jpa.repository.query.ParameterBinderFactory.lambda$createSetters$0(ParameterBinderFactory.java:131)\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n    at org.springframework.data.jpa.repository.query.ParameterBinderFactory.createSetters(ParameterBinderFactory.java:132)\n    at org.springframework.data.jpa.repository.query.ParameterBinderFactory.createSetters(ParameterBinderFactory.java:124)\n    at org.springframework.data.jpa.repository.query.ParameterBinderFactory.createCriteriaBinder(ParameterBinderFactory.java:75)\n    at org.springframework.data.jpa.repository.query.PartTreeJpaQuery$QueryPreparer.getBinder(PartTreeJpaQuery.java:248)\n    at org.springframework.data.jpa.repository.query.PartTreeJpaQuery$QueryPreparer.createQuery(PartTreeJpaQuery.java:164)\n    at org.springframework.data.jpa.repository.query.PartTreeJpaQuery.doCreateQuery(PartTreeJpaQuery.java:92)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:210)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:91)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:136)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:125)\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.doInvoke(RepositoryFactorySupport.java:605)\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.lambda$invoke$3(RepositoryFactorySupport.java:595)\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:595)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:59)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\n    at com.sun.proxy.$Proxy159.findAllByCityId(Unknown Source)\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1425784607,"post_id":28922040,"comment_id":46102386,"body_markdown":"How are you executing each command?  If that is separate class like &quot;Action&quot; or &quot;Command&quot; you could perform the check there.  Other than that not much you can do...as written in other answers.","body":"How are you executing each command?  If that is separate class like &quot;Action&quot; or &quot;Command&quot; you could perform the check there.  Other than that not much you can do...as written in other answers."},{"owner":{"account_id":2442207,"reputation":1167,"user_id":2130376,"accept_rate":100,"display_name":"yesennes"},"score":0,"creation_date":1425790335,"post_id":28922040,"comment_id":46103251,"body_markdown":"I am code autonomous for a FRC robot. Some of it is to set motors to a speed and wait, other bits are to set motor values until sensors give certain valuse.","body":"I am code autonomous for a FRC robot. Some of it is to set motors to a speed and wait, other bits are to set motor values until sensors give certain valuse."}],"answers":[{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1425778040,"creation_date":1425777709,"answer_id":28922069,"question_id":28922040,"body_markdown":"You can use wait / notify as a alternative to suspend / resume. Instead of stop you can set a flag, notify and throw an exception from notified thread","title":"Alternative to Thread.suspend() and .resume()","body":"<p>You can use wait / notify as a alternative to suspend / resume. Instead of stop you can set a flag, notify and throw an exception from notified thread</p>\n"},{"tags":[],"owner":{"account_id":971196,"reputation":24175,"user_id":993742,"display_name":"isnot2bad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1425778165,"creation_date":1425778165,"answer_id":28922121,"question_id":28922040,"body_markdown":"There is an excellent documentation about why `Thread.stop()`, `Thread.pause()` and `Thread.resume()` are deprecated:\r\n\r\n[Java Thread Primitive Deprecation][1]\r\n\r\nThere is also an alternative for `Thread.pause()` / `Thread.resume()` using `wait` and `notify` explained.\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html","title":"Alternative to Thread.suspend() and .resume()","body":"<p>There is an excellent documentation about why <code>Thread.stop()</code>, <code>Thread.pause()</code> and <code>Thread.resume()</code> are deprecated:</p>\n\n<p><a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html\" rel=\"nofollow\">Java Thread Primitive Deprecation</a></p>\n\n<p>There is also an alternative for <code>Thread.pause()</code> / <code>Thread.resume()</code> using <code>wait</code> and <code>notify</code> explained.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1425784677,"creation_date":1425778285,"answer_id":28922131,"question_id":28922040,"body_markdown":"&gt; I could check the boolean between every line of code, but I am hoping for a more elegant solution.  Is there a good way to do this?\r\n\r\nUnfortunately, no.\r\n\r\nTo replace pause / resume, what you really need is for one thread to &quot;pause&quot; another thread, without involving the code of the second thread.  \r\n\r\nThis is not possible to do safely in Java as currently spec&#39;d and implemented.  \r\n\r\nThe deprecated Thread methods are the only way for one thread to kill, stop / pause, resume another thread ... if the other thread is not actively cooperating.  They were deprecated because (in a nutshell) that kind of control *cannot* be implemented safely within any current generation mainstream JVM&lt;sup&gt;1&lt;/sup&gt;.  \r\n\r\nThe best you could do is wrap the pause / resume logic in a method that the second thread calls at appropriate points.  (This probably should use wait / notify ... or equivalent ... to deal with the resumption.  But wait/notify *per se* does not address your clear requirement for pause/resuming a non-cooperating thread.)\r\n\r\n--------------\r\n\r\n&lt;sup&gt;1 - You&#39;d need something like the Isolates API to do this. There have been attempts to implement it in research projects, but AFAIK Isolates has never been implemented in a production JVM.&lt;/sup&gt;","title":"Alternative to Thread.suspend() and .resume()","body":"<blockquote>\n  <p>I could check the boolean between every line of code, but I am hoping for a more elegant solution.  Is there a good way to do this?</p>\n</blockquote>\n\n<p>Unfortunately, no.</p>\n\n<p>To replace pause / resume, what you really need is for one thread to \"pause\" another thread, without involving the code of the second thread.  </p>\n\n<p>This is not possible to do safely in Java as currently spec'd and implemented.  </p>\n\n<p>The deprecated Thread methods are the only way for one thread to kill, stop / pause, resume another thread ... if the other thread is not actively cooperating.  They were deprecated because (in a nutshell) that kind of control <em>cannot</em> be implemented safely within any current generation mainstream JVM<sup>1</sup>.  </p>\n\n<p>The best you could do is wrap the pause / resume logic in a method that the second thread calls at appropriate points.  (This probably should use wait / notify ... or equivalent ... to deal with the resumption.  But wait/notify <em>per se</em> does not address your clear requirement for pause/resuming a non-cooperating thread.)</p>\n\n<hr>\n\n<p><sup>1 - You'd need something like the Isolates API to do this. There have been attempts to implement it in research projects, but AFAIK Isolates has never been implemented in a production JVM.</sup></p>\n"},{"tags":[],"owner":{"account_id":2159502,"reputation":2327,"user_id":1914005,"accept_rate":100,"display_name":"Vitruvie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1425791250,"creation_date":1425789872,"answer_id":28923180,"question_id":28922040,"body_markdown":"The correct way to handle interrupting a thread (in this case, to pause or stop it) is, naturally, with `Thread#interrupt()`. It is designed so that you can define safe points at which the thread can be interrupted, which for you is naturally the point between each task. So, to avoid having to manually check your variable between each task, and to be able to easily resume where you left off, you can store your tasks as a list of `Runnable`s, and remember your position in the list from when you left off, like this:\r\n\r\n    public class Foo {\r\n        public static void runTask(Runnable task) throws InterruptedException {\r\n            task.run();\r\n            if (Thread.interrupted()) throw new InterruptedException();\r\n        }\r\n        Runnable[] frobnicateTasks = new Runnable[] {\r\n            () -&gt; { System.out.println(&quot;task1&quot;); },\r\n            () -&gt; { Thread.currentThread().interrupt(); }, //Interrupt self only as example\r\n            () -&gt; { System.out.println(&quot;task2&quot;); }\r\n        };\r\n        public int frobnicate() {\r\n            return resumeFrobnicate(0);\r\n        }\r\n        public int resumeFrobnicate(int taskPos) {\r\n            try {\r\n                while (taskPos &lt; frobnicateTasks.length)\r\n                    runTask(frobnicateTasks[taskPos++]);\r\n            } catch (InterruptedException ex) {\r\n            }\r\n            if (taskPos == frobnicateTasks.length) {\r\n                return -1; //done\r\n            }\r\n            return taskPos;\r\n        }\r\n        public static void main(String[] args) {\r\n            Foo foo = new Foo();\r\n            int progress = foo.frobnicate();\r\n            while (progress != -1) {\r\n                System.out.println(&quot;Paused&quot;);\r\n                progress = foo.resumeFrobnicate(progress);\r\n            }\r\n            System.out.println(&quot;Done&quot;);\r\n        }\r\n    }\r\n    --&gt;\r\n    task1\r\n    Paused\r\n    task2\r\n    Done","title":"Alternative to Thread.suspend() and .resume()","body":"<p>The correct way to handle interrupting a thread (in this case, to pause or stop it) is, naturally, with <code>Thread#interrupt()</code>. It is designed so that you can define safe points at which the thread can be interrupted, which for you is naturally the point between each task. So, to avoid having to manually check your variable between each task, and to be able to easily resume where you left off, you can store your tasks as a list of <code>Runnable</code>s, and remember your position in the list from when you left off, like this:</p>\n\n<pre><code>public class Foo {\n    public static void runTask(Runnable task) throws InterruptedException {\n        task.run();\n        if (Thread.interrupted()) throw new InterruptedException();\n    }\n    Runnable[] frobnicateTasks = new Runnable[] {\n        () -&gt; { System.out.println(\"task1\"); },\n        () -&gt; { Thread.currentThread().interrupt(); }, //Interrupt self only as example\n        () -&gt; { System.out.println(\"task2\"); }\n    };\n    public int frobnicate() {\n        return resumeFrobnicate(0);\n    }\n    public int resumeFrobnicate(int taskPos) {\n        try {\n            while (taskPos &lt; frobnicateTasks.length)\n                runTask(frobnicateTasks[taskPos++]);\n        } catch (InterruptedException ex) {\n        }\n        if (taskPos == frobnicateTasks.length) {\n            return -1; //done\n        }\n        return taskPos;\n    }\n    public static void main(String[] args) {\n        Foo foo = new Foo();\n        int progress = foo.frobnicate();\n        while (progress != -1) {\n            System.out.println(\"Paused\");\n            progress = foo.resumeFrobnicate(progress);\n        }\n        System.out.println(\"Done\");\n    }\n}\n--&gt;\ntask1\nPaused\ntask2\nDone\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3612864,"reputation":2091,"user_id":3013473,"accept_rate":56,"display_name":"zafar142003"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1503928221,"creation_date":1503261065,"answer_id":45786529,"question_id":28922040,"body_markdown":"I have an idea how to do this using AspectJ. The solution I am outlining below will allow you to pause/resume another thread. This pause will only come into effect on the next method invocation from inside of your target method after you called the pause routine. This will *not* require boolean checks after every line of code of your target method. I am using wait/notify to do this.\r\n\r\nI am using Spring in the below example.\r\n\r\nFirst, wrap your target method in a Runnable. \r\n   \r\n\r\n       package com.app.inter.thread.communication.runnables;\r\n    \r\n    \r\n        public class TestRunnable implements Runnable{\r\n        \r\n        \tpublic void run() {\r\n        \t\tlong i=0;\r\n                //For explanatory purposes, I have used an infinite loop below\r\n                //and printed an increasing number\r\n\r\n        \t\twhile(!Thread.interrupted()){\r\n                    //someService.action1();\r\n                    //someService.action2();\r\n                    //....                    \r\n        \t\t\tif(i++%10000000==0)\r\n        \t\t\t\tSystem.out.println(&quot;Working &quot;+i);\r\n        \t\t}\r\n        \t\t\r\n        \t}\r\n        \r\n        }\r\n\r\nNext, you make an aspect which would be called conditionally on any method invocation inside your target method.\r\n\r\n    @Aspect\r\n    @Component\r\n    public class HandlerAspect {\r\n    \t\r\n    \tpublic static volatile boolean stop=false;\r\n     \tpublic static volatile String monitor=&quot;&quot;;\r\n    \t\r\n    \t\r\n    \t\r\n    \t@Pointcut(&quot;withincode(public void com.app.inter.thread.communication.runnables.TestRunnable.run()) &quot;\r\n    \t\t\t+ &quot;&amp;&amp; call(* *.*(*)) &quot;\r\n    \t\t\t+ &quot;&amp;&amp; if()&quot;)\r\n    \tpublic static boolean stopAspect(){\r\n    \t\treturn stop;\r\n    \t}\r\n    \t@Before(&quot;stopAspect()&quot;) \r\n        public void beforeAdvice(JoinPoint jp) {\r\n           try {\r\n        \t   System.out.println(&quot;Waiting&quot;);\r\n    \t   \r\n    \t       synchronized(monitor){\r\n    \t\t       monitor.wait();\r\n    \t       }\r\n    \t\t} catch (InterruptedException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n            stop=false;\r\n        }\r\n    }\r\n\r\nNow, whenever you want to pause your thread, just set the value of `stop` to true, and vice versa.\r\n\r\n    @Service\r\n    public class Driver {\r\n    \t@Autowired\r\n    \tprivate HandlerAspect aspect;\r\n    \t\r\n    \t@PostConstruct\r\n    \tpublic void init(){\r\n    \t\tScanner scanner = new Scanner(System.in);\r\n    \t\tint i=-1;\r\n    \t\tTestRunnable runnable = new TestRunnable();\r\n    \t\tThread thread= new Thread(runnable);\r\n    \t\tthread.start();\r\n    \t\taspect.monitor=&quot;MONITOR&quot;;\r\n            while((i=scanner.nextInt())!=0){\r\n    \t\t\tswitch(i){\r\n    \t\t\t\tcase 1:\t\r\n    \t\t\t\t\taspect.stop=true;\r\n    \t\t\t\t\tbreak;\t\t\r\n                    case 2:\r\n\t\t\t\t\t\r\n\t\t\t\t\t    aspect.stop=false;\t\t\t\t\t\r\n\t\t\t\t\t    synchronized(aspect.monitor){\r\n\t\t\t\t\t\t    aspect.monitor.notify();\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t    break;\t\r\n    \t\t\t}\r\n    \t\t}\r\n            // in case the main thread is stopped\r\n            // while the other thread is in wait state\r\n            synchronized(aspect.monitor){\r\n\t\t\t    aspect.monitor.notify();\r\n\t\t    }\r\n    \t\tthread.interrupt();\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nThe output is as follows:\r\n\r\n    ...\r\n    Working 400000001\r\n    1Working 410000001\r\n    Working 420000001\r\n    Working 430000001\r\n    Working 440000001\r\n    Working 450000001\r\n    Working 460000001\r\n    Working 470000001\r\n    Waiting\r\n    2\r\n    Working 480000001\r\n    Working 490000001\r\n    0\r\n\r\nWorking code is at https://github.com/zafar142007/InterThreadCommunication\r\n\r\n\r\n","title":"Alternative to Thread.suspend() and .resume()","body":"<p>I have an idea how to do this using AspectJ. The solution I am outlining below will allow you to pause/resume another thread. This pause will only come into effect on the next method invocation from inside of your target method after you called the pause routine. This will <em>not</em> require boolean checks after every line of code of your target method. I am using wait/notify to do this.</p>\n\n<p>I am using Spring in the below example.</p>\n\n<p>First, wrap your target method in a Runnable. </p>\n\n<pre><code>   package com.app.inter.thread.communication.runnables;\n\n\n    public class TestRunnable implements Runnable{\n\n        public void run() {\n            long i=0;\n            //For explanatory purposes, I have used an infinite loop below\n            //and printed an increasing number\n\n            while(!Thread.interrupted()){\n                //someService.action1();\n                //someService.action2();\n                //....                    \n                if(i++%10000000==0)\n                    System.out.println(\"Working \"+i);\n            }\n\n        }\n\n    }\n</code></pre>\n\n<p>Next, you make an aspect which would be called conditionally on any method invocation inside your target method.</p>\n\n<pre><code>@Aspect\n@Component\npublic class HandlerAspect {\n\n    public static volatile boolean stop=false;\n    public static volatile String monitor=\"\";\n\n\n\n    @Pointcut(\"withincode(public void com.app.inter.thread.communication.runnables.TestRunnable.run()) \"\n            + \"&amp;&amp; call(* *.*(*)) \"\n            + \"&amp;&amp; if()\")\n    public static boolean stopAspect(){\n        return stop;\n    }\n    @Before(\"stopAspect()\") \n    public void beforeAdvice(JoinPoint jp) {\n       try {\n           System.out.println(\"Waiting\");\n\n           synchronized(monitor){\n               monitor.wait();\n           }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        stop=false;\n    }\n}\n</code></pre>\n\n<p>Now, whenever you want to pause your thread, just set the value of <code>stop</code> to true, and vice versa.</p>\n\n<pre><code>@Service\npublic class Driver {\n    @Autowired\n    private HandlerAspect aspect;\n\n    @PostConstruct\n    public void init(){\n        Scanner scanner = new Scanner(System.in);\n        int i=-1;\n        TestRunnable runnable = new TestRunnable();\n        Thread thread= new Thread(runnable);\n        thread.start();\n        aspect.monitor=\"MONITOR\";\n        while((i=scanner.nextInt())!=0){\n            switch(i){\n                case 1: \n                    aspect.stop=true;\n                    break;      \n                case 2:\n\n                    aspect.stop=false;                  \n                    synchronized(aspect.monitor){\n                        aspect.monitor.notify();\n                    }\n                    break;  \n            }\n        }\n        // in case the main thread is stopped\n        // while the other thread is in wait state\n        synchronized(aspect.monitor){\n            aspect.monitor.notify();\n        }\n        thread.interrupt();\n\n    }\n}\n</code></pre>\n\n<p>The output is as follows:</p>\n\n<pre><code>...\nWorking 400000001\n1Working 410000001\nWorking 420000001\nWorking 430000001\nWorking 440000001\nWorking 450000001\nWorking 460000001\nWorking 470000001\nWaiting\n2\nWorking 480000001\nWorking 490000001\n0\n</code></pre>\n\n<p>Working code is at <a href=\"https://github.com/zafar142007/InterThreadCommunication\" rel=\"nofollow noreferrer\">https://github.com/zafar142007/InterThreadCommunication</a></p>\n"},{"tags":[],"owner":{"account_id":3292390,"reputation":21,"user_id":2770401,"display_name":"BatBold"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700696974,"creation_date":1573066437,"answer_id":58736796,"question_id":28922040,"body_markdown":"I don&#39;t know why no one mentioned semaphore here. You can every once in a while try acquire and release a semaphore in you main code. On the side work you can trigger semaphore acquire so to block the main code acquiring if you don&#39;t want the whole while loop with wait and notify going.\r\n\r\n","title":"Alternative to Thread.suspend() and .resume()","body":"<p>I don't know why no one mentioned semaphore here. You can every once in a while try acquire and release a semaphore in you main code. On the side work you can trigger semaphore acquire so to block the main code acquiring if you don't want the whole while loop with wait and notify going.</p>\n"},{"tags":[],"owner":{"account_id":2442207,"reputation":1167,"user_id":2130376,"accept_rate":100,"display_name":"yesennes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573073605,"creation_date":1573073605,"answer_id":58738318,"question_id":28922040,"body_markdown":"Somehow this thread still seems to be active, so I will pitch my answer, as 4 years of developing experience has given me more insight and hasn&#39;t quite clouded my memory of my problem.\r\n\r\nThe problem boiled down to the FRC library I was using trying to shoehorn me into use functions that were roughly like: `motor.drive(speed, time)` and would block execution for time length. In all but the most narrow cases, this is bad function to use, as so much of robotics code relies on combining sensor data and time passing to make decisions.\r\n\r\nWhat I should have done was call it with time being 0 or very small, or find some other function that would indefinitely drive the motor, and be sure to turn it off afterwards. Then run that function in a tight loop looking for the conditions that would make be go to the next command.\r\n\r\nI probably should have used a state machine to make the code more readable and easier to modify.","title":"Alternative to Thread.suspend() and .resume()","body":"<p>Somehow this thread still seems to be active, so I will pitch my answer, as 4 years of developing experience has given me more insight and hasn't quite clouded my memory of my problem.</p>\n\n<p>The problem boiled down to the FRC library I was using trying to shoehorn me into use functions that were roughly like: <code>motor.drive(speed, time)</code> and would block execution for time length. In all but the most narrow cases, this is bad function to use, as so much of robotics code relies on combining sensor data and time passing to make decisions.</p>\n\n<p>What I should have done was call it with time being 0 or very small, or find some other function that would indefinitely drive the motor, and be sure to turn it off afterwards. Then run that function in a tight loop looking for the conditions that would make be go to the next command.</p>\n\n<p>I probably should have used a state machine to make the code more readable and easier to modify.</p>\n"}],"owner":{"account_id":2442207,"reputation":1167,"user_id":2130376,"accept_rate":100,"display_name":"yesennes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16049,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":28923180,"answer_count":7,"score":11,"last_activity_date":1700696974,"creation_date":1425777488,"question_id":28922040,"body_markdown":"I have a large segment of code that is not a loop, just a list of commands that happens once but takes some time. I need it to either pause or terminate this at any point based on a changing boolean value. I could use a different thread to suspend, resume and stop this code, but those methods are deprecated, so I would like to avoid using them. I could check the boolean between every line of code, but I am hoping for a more elegant solution. Is there a good way to do this?","title":"Alternative to Thread.suspend() and .resume()","body":"<p>I have a large segment of code that is not a loop, just a list of commands that happens once but takes some time. I need it to either pause or terminate this at any point based on a changing boolean value. I could use a different thread to suspend, resume and stop this code, but those methods are deprecated, so I would like to avoid using them. I could check the boolean between every line of code, but I am hoping for a more elegant solution. Is there a good way to do this?</p>\n"},{"tags":["java","mockito"],"answers":[{"tags":[],"owner":{"account_id":29927871,"reputation":36,"user_id":22935490,"display_name":"NapoleonDynamite"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700696670,"creation_date":1700696670,"answer_id":77533653,"question_id":77533463,"body_markdown":"&quot;Can/Should I verify if a mock is called somewhere in the chain?&quot;\r\nI dont think so. At least not in the way your doing. Since you&#39;re unit testing the foo() method, you only want to test the logic of this method, you don&#39;t care about whats inside of bar(), you will mock bar() and make it return (in case its not void) whatever you want/need. So, you don&#39;t need to check what is inside of bar() and how its behaving.\r\n\r\n    @Mock\r\n    private HelperClass helperClass;\r\n    \r\n    @InjectMocks\r\n    private TestingClass testingClass;\r\n    \r\n    @Test\r\n    public void fooTest() {\r\n       testingClass.foo();\r\n    \r\n       // wont return anything in case the method is void ofc\r\n       when(helperClass.bar().thenReturn(something);\r\n    \r\n       // you could verify that the mocked method got called if you need to\r\n       verify(helperClass).bar();\r\n    }\r\n\r\nIf you want to post your real code maybe i can help in a better way, since an &quot;abstract&quot; example may not be the best way to explain.\r\n\r\n\r\n","title":"Can I mockito verify if I have a method that I test, what calls another method in the same class what calls another&#39;s class method?","body":"<p>&quot;Can/Should I verify if a mock is called somewhere in the chain?&quot;\nI dont think so. At least not in the way your doing. Since you're unit testing the foo() method, you only want to test the logic of this method, you don't care about whats inside of bar(), you will mock bar() and make it return (in case its not void) whatever you want/need. So, you don't need to check what is inside of bar() and how its behaving.</p>\n<pre><code>@Mock\nprivate HelperClass helperClass;\n\n@InjectMocks\nprivate TestingClass testingClass;\n\n@Test\npublic void fooTest() {\n   testingClass.foo();\n\n   // wont return anything in case the method is void ofc\n   when(helperClass.bar().thenReturn(something);\n\n   // you could verify that the mocked method got called if you need to\n   verify(helperClass).bar();\n}\n</code></pre>\n<p>If you want to post your real code maybe i can help in a better way, since an &quot;abstract&quot; example may not be the best way to explain.</p>\n"}],"owner":{"account_id":20833547,"reputation":1212,"user_id":15302273,"display_name":"stacktrace2234"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700696670,"creation_date":1700693002,"question_id":77533463,"body_markdown":"So I have a method (`foo()`) in class `TestingThis`\r\n\r\n```\r\npublic class TestingThis {\r\n    // injected another class\r\n    private HelperClass helperClass;\r\n\r\n    public void foo() {\r\n        bar();\r\n    }\r\n\r\n    public void bar() {\r\n        helperClass.call();\r\n    }\r\n}\r\n```\r\n\r\n\r\nThe test:\r\n\r\n```\r\n@Mock\r\nprivate HelperClass helperClass;\r\n\r\n@InjectMocks\r\nprivate TestingClass testingClass;\r\n\r\n@Test\r\npublic void fooTest() {\r\n   testingClass.foo();\r\n\r\n   // can I have something like this?\r\n   verify(helperClass).call();\r\n   verifyNoMoreInteractions(helperClass);\r\n}\r\n```\r\n\r\nCan/Should I verify if a mock is called somewhere in the chain?\r\n\r\nAt the moment it says &quot;Wanted but not invoked&quot;, what does not feel right...","title":"Can I mockito verify if I have a method that I test, what calls another method in the same class what calls another&#39;s class method?","body":"<p>So I have a method (<code>foo()</code>) in class <code>TestingThis</code></p>\n<pre><code>public class TestingThis {\n    // injected another class\n    private HelperClass helperClass;\n\n    public void foo() {\n        bar();\n    }\n\n    public void bar() {\n        helperClass.call();\n    }\n}\n</code></pre>\n<p>The test:</p>\n<pre><code>@Mock\nprivate HelperClass helperClass;\n\n@InjectMocks\nprivate TestingClass testingClass;\n\n@Test\npublic void fooTest() {\n   testingClass.foo();\n\n   // can I have something like this?\n   verify(helperClass).call();\n   verifyNoMoreInteractions(helperClass);\n}\n</code></pre>\n<p>Can/Should I verify if a mock is called somewhere in the chain?</p>\n<p>At the moment it says &quot;Wanted but not invoked&quot;, what does not feel right...</p>\n"},{"tags":["java","junit","mockito","apacheignite"],"owner":{"account_id":28884281,"reputation":1,"user_id":22123029,"display_name":"ruth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700696382,"creation_date":1700696382,"question_id":77533637,"body_markdown":"I have a class and a test class, I am trying to test the result of an ignite cache query in my class by adding a mockito test in my test class. I am having a hard time understanding what needs to be mocked and what query I have to create \r\n\r\n\r\n\r\n1) is the code portion I am trying to test, based on the data processed, I should be able to retrieve one record (id) being added to the cache. I would like to verify that the record was added successfully.\r\n\r\nquery is already defined \r\n\r\nthis code in the class is also part of a method in which return value is void\r\n\r\n1)\r\n\r\n    try (QueryCursor&lt;List&lt;?&gt;&gt; cursor = MyCache.query(query.setArgs(id, startOfDayMillis,      endOfDayMillis))) {\r\n        if (cursor != null) {\r\n             for (List&lt;?&gt; row : cursor) {\r\n                 if (row.get(0) instanceof SomeJavaObject) {\r\n                     cacheValue = (SomeJavaObject) row.get(0);\r\n                 }\r\n             }\r\n         }\r\n     }\r\n\r\n    if (cacheValue == null) {\r\n        Session key = new SessionKey(sessionId + &quot;_T7&quot;, id, sessionTime);\r\n        SessionObject v = new SessionObject(vin);\r\n        SomeJavaObject value = new SomeJavaObject(sessionId + &quot;_T7&quot;, v);\r\n        MyCache.put(key, value); //I am trying to retrieve these values \r\n    } \r\n\r\n    when(Gen2NodeUtility.getOrCreateIgniteInstanceByType(IGNITE_CLIENT)).thenReturn(ignite);\r\n    when(ignite.cache(SomeConstants.TableName)).thenReturn(MyCache);\r\n                   \r\n\r\n    SqlFieldsQuery sqlQuery = new SqlFieldsQuery(query);\r\n    List&lt;List&lt;?&gt;&gt; cacheQuery = MyCache.query(sqlQuery).getAll();\r\n    verify(resistT7Cache, times(1)).query(sqlQuery);\r\n\r\n","title":"how to mock an apache ignite query using mockito","body":"<p>I have a class and a test class, I am trying to test the result of an ignite cache query in my class by adding a mockito test in my test class. I am having a hard time understanding what needs to be mocked and what query I have to create</p>\n<ol>\n<li>is the code portion I am trying to test, based on the data processed, I should be able to retrieve one record (id) being added to the cache. I would like to verify that the record was added successfully.</li>\n</ol>\n<p>query is already defined</p>\n<p>this code in the class is also part of a method in which return value is void</p>\n<p>1)</p>\n<pre><code>try (QueryCursor&lt;List&lt;?&gt;&gt; cursor = MyCache.query(query.setArgs(id, startOfDayMillis,      endOfDayMillis))) {\n    if (cursor != null) {\n         for (List&lt;?&gt; row : cursor) {\n             if (row.get(0) instanceof SomeJavaObject) {\n                 cacheValue = (SomeJavaObject) row.get(0);\n             }\n         }\n     }\n }\n\nif (cacheValue == null) {\n    Session key = new SessionKey(sessionId + &quot;_T7&quot;, id, sessionTime);\n    SessionObject v = new SessionObject(vin);\n    SomeJavaObject value = new SomeJavaObject(sessionId + &quot;_T7&quot;, v);\n    MyCache.put(key, value); //I am trying to retrieve these values \n} \n\nwhen(Gen2NodeUtility.getOrCreateIgniteInstanceByType(IGNITE_CLIENT)).thenReturn(ignite);\nwhen(ignite.cache(SomeConstants.TableName)).thenReturn(MyCache);\n               \n\nSqlFieldsQuery sqlQuery = new SqlFieldsQuery(query);\nList&lt;List&lt;?&gt;&gt; cacheQuery = MyCache.query(sqlQuery).getAll();\nverify(resistT7Cache, times(1)).query(sqlQuery);\n</code></pre>\n"},{"tags":["java","appium","appium-android","appium-ios"],"answers":[{"tags":[],"owner":{"account_id":16661685,"reputation":743,"user_id":12041490,"display_name":"Vault23"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1585303854,"creation_date":1585128753,"answer_id":60846105,"question_id":60830757,"body_markdown":"These are the methods for your needs for iOS and Android:\r\n\r\n    private JavascriptExecutor js;\r\n    private HashMap&lt;String, String&gt; scrollObject = new HashMap&lt;&gt;();\r\n    \r\n    void iosScrollToAnElement(IOSElement el) {\r\n            scrollObject.put(&quot;direction&quot;, &quot;down&quot;);\r\n            scrollObject.put(&quot;element&quot;, el.getId());\r\n            js.executeScript(&quot;mobile: swipe&quot;, scrollObject);\r\n    }\r\n    \r\n    void androidScrollToAnElementByText(String text) {\r\n            try {\r\n                ((AndroidDriver)driver).findElementByAndroidUIAutomator(&quot;new UiScrollable(new UiSelector().scrollable(true).instance(0)).scrollIntoView(new UiSelector().text(\\&quot;&quot; + text + &quot;\\&quot;).instance(0))&quot;);\r\n            } catch (Exception e) {\r\n                throw new NoSuchElementException(&quot;No element&quot; + e);\r\n            }\r\n        }\r\n\r\nafter this you need to `click()` on your particular element that you are looking for. (there methods only for scrolling)","title":"Looking to ios and android scroll up and down till element found and then click","body":"<p>These are the methods for your needs for iOS and Android:</p>\n\n<pre><code>private JavascriptExecutor js;\nprivate HashMap&lt;String, String&gt; scrollObject = new HashMap&lt;&gt;();\n\nvoid iosScrollToAnElement(IOSElement el) {\n        scrollObject.put(\"direction\", \"down\");\n        scrollObject.put(\"element\", el.getId());\n        js.executeScript(\"mobile: swipe\", scrollObject);\n}\n\nvoid androidScrollToAnElementByText(String text) {\n        try {\n            ((AndroidDriver)driver).findElementByAndroidUIAutomator(\"new UiScrollable(new UiSelector().scrollable(true).instance(0)).scrollIntoView(new UiSelector().text(\\\"\" + text + \"\\\").instance(0))\");\n        } catch (Exception e) {\n            throw new NoSuchElementException(\"No element\" + e);\n        }\n    }\n</code></pre>\n\n<p>after this you need to <code>click()</code> on your particular element that you are looking for. (there methods only for scrolling)</p>\n"},{"tags":[],"owner":{"account_id":25509693,"reputation":9,"user_id":19301587,"display_name":"Ankur Mehta"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1654716839,"creation_date":1654716839,"answer_id":72551273,"question_id":60830757,"body_markdown":"[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nFV95.png\r\n\r\nplease try this ","title":"Looking to ios and android scroll up and down till element found and then click","body":"<p><a href=\"https://i.stack.imgur.com/nFV95.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>please try this</p>\n"}],"owner":{"account_id":8049186,"reputation":75,"user_id":6068366,"display_name":"Hari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5138,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":60846105,"answer_count":2,"score":0,"last_activity_date":1700695898,"creation_date":1585051678,"question_id":60830757,"body_markdown":"I tried lot of blogs and discussion about ios &amp; android scrolling in appium, java. but looks like most of method are deprecated or not working. pls helping.\r\nI am using appium 1.15.1, java, selenium.\r\n\r\nlooking for quick help.\r\n\r\nI am trying following code but it&#39;s scrolling twice and not even clicking.\r\n\r\nHi,\r\n\r\nI am on Mac and working with real device.\r\nI am using Appium 1.15.1, Selenium, Java with POM. \r\nI wrote following code for iOS swipe down.\r\n\r\nHi,\r\n \r\n\r\n    public void chkMenuOptioniOS1(String sName)\r\n        { \t\r\n    /* This is actual path which got from inspector\r\n    //XCUIElementTypeStaticText[@name=&quot;Account Information&quot;]\r\n    */\r\n        \tString targetCell = &quot;//XCUIElementTypeStaticText[contains(@name,&#39;&quot; + sName + &quot;&#39;)]&quot;;\r\n    \t\tMobileElement cellWithText = driver.findElement(By.xpath(targetCell));\r\n    \t\tHashMap&lt;String, String&gt; scrollObject = new HashMap&lt;String, String&gt;();\r\n    \t\tscrollObject.put(&quot;element&quot;, ((RemoteWebElement)cellWithText).getId());\r\n    \t\tscrollObject.put(&quot;direction&quot;, &quot;down&quot;);\r\n    \t\tscrollObject.put(&quot;predicateString&quot;, &quot;value == &#39;&quot; + sName + &quot;&#39;&quot;);\r\n    \t\tscrollObject.put(&quot;toVisible&quot;, &quot;true&quot;);\r\n    \t\tdriver.executeScript(&quot;mobile:scroll&quot;, scrollObject);\r\n    \t\ttry {\r\n        \t\tSystem.out.println(&quot;In Try Block &quot;+cellWithText.getText());\r\n        \t\tThread.sleep(10);\r\n        \t\tcellWithText.click();\r\n        \t} catch (InterruptedException e) {\r\n        \t\te.printStackTrace();\r\n        \t}\r\n        }\r\n\r\n1. It scrolling twice\r\n2. and it;s not clicking,\r\n\r\nAttaching DOM object screen capture.\r\n\r\nPlease help me[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XtfR9.png","title":"Looking to ios and android scroll up and down till element found and then click","body":"<p>I tried lot of blogs and discussion about ios &amp; android scrolling in appium, java. but looks like most of method are deprecated or not working. pls helping.\nI am using appium 1.15.1, java, selenium.</p>\n\n<p>looking for quick help.</p>\n\n<p>I am trying following code but it's scrolling twice and not even clicking.</p>\n\n<p>Hi,</p>\n\n<p>I am on Mac and working with real device.\nI am using Appium 1.15.1, Selenium, Java with POM. \nI wrote following code for iOS swipe down.</p>\n\n<p>Hi,</p>\n\n<pre><code>public void chkMenuOptioniOS1(String sName)\n    {   \n/* This is actual path which got from inspector\n//XCUIElementTypeStaticText[@name=\"Account Information\"]\n*/\n        String targetCell = \"//XCUIElementTypeStaticText[contains(@name,'\" + sName + \"')]\";\n        MobileElement cellWithText = driver.findElement(By.xpath(targetCell));\n        HashMap&lt;String, String&gt; scrollObject = new HashMap&lt;String, String&gt;();\n        scrollObject.put(\"element\", ((RemoteWebElement)cellWithText).getId());\n        scrollObject.put(\"direction\", \"down\");\n        scrollObject.put(\"predicateString\", \"value == '\" + sName + \"'\");\n        scrollObject.put(\"toVisible\", \"true\");\n        driver.executeScript(\"mobile:scroll\", scrollObject);\n        try {\n            System.out.println(\"In Try Block \"+cellWithText.getText());\n            Thread.sleep(10);\n            cellWithText.click();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n\n<ol>\n<li>It scrolling twice</li>\n<li>and it;s not clicking,</li>\n</ol>\n\n<p>Attaching DOM object screen capture.</p>\n\n<p>Please help me<a href=\"https://i.stack.imgur.com/XtfR9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XtfR9.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","rest"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1700674315,"post_id":77530741,"comment_id":136684633,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":29927871,"reputation":36,"user_id":22935490,"display_name":"NapoleonDynamite"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700695895,"creation_date":1700663540,"answer_id":77530814,"question_id":77530741,"body_markdown":"It seems that you need an API key in the form of a username and password, reference: [https://www.meteomatics.com/en/weather-api/how-to-get-weather-api-key/][1]\r\n\r\nIn this article they is a pretty good documentation on how to get a key and how to use it. I consider reading it first and then if you still have issues copy/paste them here.\r\n\r\n\r\n  [1]: https://www.meteomatics.com/en/weather-api/how-to-get-weather-api-key/","title":"MeteoMatics Weather API","body":"<p>It seems that you need an API key in the form of a username and password, reference: <a href=\"https://www.meteomatics.com/en/weather-api/how-to-get-weather-api-key/\" rel=\"nofollow noreferrer\">https://www.meteomatics.com/en/weather-api/how-to-get-weather-api-key/</a></p>\n<p>In this article they is a pretty good documentation on how to get a key and how to use it. I consider reading it first and then if you still have issues copy/paste them here.</p>\n"}],"owner":{"account_id":23252269,"reputation":1,"user_id":17339843,"display_name":"jfc9419"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1700695895,"creation_date":1700662947,"question_id":77530741,"body_markdown":"I&#39;m creating an app in Java using REST services to get the weather for a location based on LONG and LAT.\r\nI have successfully been able to retrieve this data, but when I&#39;m using MateoMatics weather API it requires username and password when passed.\r\n\r\nHow do I pass this in the link?\r\nThis is the output:\r\n \r\n&gt; MetroMatics API URl: https://api.meteomatics.com/2023-11-22/t_2m:C/53.2293545,-0.5404819/json  \r\nMeteomatics API Response: No username or password provided.\r\n\r\n\r\n\r\nThis is my current code:\r\n\r\n    try{\r\n            LocalDate date = LocalDate.now();\r\n            String meteoAPIURl = &quot;https://api.meteomatics.com/&quot;+date +&quot;/&quot;+&quot;t_2m:C&quot;+&quot;/&quot;+latitude +&quot;,&quot;+longitude+&quot;/&quot;+&quot;json&quot;;\r\n            HttpClient meteoMaticsClient = HttpClient.newHttpClient();\r\n            HttpRequest meteoMaticsRequest = HttpRequest.newBuilder().uri(URI.create(meteoAPIURl)).build();\r\n            \r\n            System.out.println(&quot;MetroMatics API URl: &quot;+meteoAPIURl);\r\n            \r\n            HttpResponse&lt;String&gt;meteoResponse = meteoMaticsClient.send(meteoMaticsRequest, HttpResponse.BodyHandlers.ofString());\r\n            String meteomaticsResponseBody = meteoResponse.body();\r\n            \r\n            System.out.println(&quot;Meteomatics API Response: &quot; + meteomaticsResponseBody);\r\n        }                  \r\n        catch(Exception e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n\r\n\r\n","title":"MeteoMatics Weather API","body":"<p>I'm creating an app in Java using REST services to get the weather for a location based on LONG and LAT.\nI have successfully been able to retrieve this data, but when I'm using MateoMatics weather API it requires username and password when passed.</p>\n<p>How do I pass this in the link?\nThis is the output:</p>\n<blockquote>\n<p>MetroMatics API URl: <a href=\"https://api.meteomatics.com/2023-11-22/t_2m:C/53.2293545,-0.5404819/json\" rel=\"nofollow noreferrer\">https://api.meteomatics.com/2023-11-22/t_2m:C/53.2293545,-0.5404819/json</a><br />\nMeteomatics API Response: No username or password provided.</p>\n</blockquote>\n<p>This is my current code:</p>\n<pre><code>try{\n        LocalDate date = LocalDate.now();\n        String meteoAPIURl = &quot;https://api.meteomatics.com/&quot;+date +&quot;/&quot;+&quot;t_2m:C&quot;+&quot;/&quot;+latitude +&quot;,&quot;+longitude+&quot;/&quot;+&quot;json&quot;;\n        HttpClient meteoMaticsClient = HttpClient.newHttpClient();\n        HttpRequest meteoMaticsRequest = HttpRequest.newBuilder().uri(URI.create(meteoAPIURl)).build();\n        \n        System.out.println(&quot;MetroMatics API URl: &quot;+meteoAPIURl);\n        \n        HttpResponse&lt;String&gt;meteoResponse = meteoMaticsClient.send(meteoMaticsRequest, HttpResponse.BodyHandlers.ofString());\n        String meteomaticsResponseBody = meteoResponse.body();\n        \n        System.out.println(&quot;Meteomatics API Response: &quot; + meteomaticsResponseBody);\n    }                  \n    catch(Exception e){\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":["java","jersey"],"answers":[{"tags":[],"owner":{"account_id":1014158,"reputation":2646,"user_id":1026104,"display_name":"jan.supol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699998226,"creation_date":1699998226,"answer_id":77484017,"question_id":77482635,"body_markdown":"&gt; Since the OUTBOUND_CONTENT_LENGTH_BUFFER setting is a server-wide setting\r\n\r\nThis is an Application-scoped setting. Each Application has its own set of settings and won&#39;t affect other Applications. That is if you are in the standard Application Server that supports one application per one war. \r\n\r\nYou might be on another environment that might even support multiple Applications per runtime (e.g. Helidon), but it is rare to use more than one Application in a single runtime instance.","title":"Jersey: StreamingOutput in a chunked fashion without setting OUTBOUND_CONTENT_LENGTH_BUFFER to 0?","body":"<blockquote>\n<p>Since the OUTBOUND_CONTENT_LENGTH_BUFFER setting is a server-wide setting</p>\n</blockquote>\n<p>This is an Application-scoped setting. Each Application has its own set of settings and won't affect other Applications. That is if you are in the standard Application Server that supports one application per one war.</p>\n<p>You might be on another environment that might even support multiple Applications per runtime (e.g. Helidon), but it is rare to use more than one Application in a single runtime instance.</p>\n"}],"owner":{"account_id":2856379,"reputation":364,"user_id":2452569,"display_name":"mpderbec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700695813,"creation_date":1699982748,"question_id":77482635,"body_markdown":"I am using Jersey to stream &quot;chunked&quot; output, and my client wishes to read and display partial results as they are streamed.\r\n\r\nHere is example code of what I am doing:\r\n\r\n\r\n```\r\n@Path(&quot;streaming&quot;)\r\npublic class StreamingResource {\r\n\r\n    @GET\r\n    @Produces(&quot;application/octet-stream&quot;)\r\n    public Response getStream() {\r\n        return Response.ok(new FeedReturnStreamingOutput()).build();\r\n    }\r\n\r\n    public static class FeedReturnStreamingOutput implements StreamingOutput {\r\n\r\n        @Override\r\n        public void write(OutputStream output)\r\n                throws IOException, WebApplicationException {\r\n            try {\r\n                for (int i = 0; i &lt; 10; i++) {\r\n                    output.write(String.format(&quot;Hello %d\\n&quot;, i).getBytes());\r\n                    output.flush();\r\n                    TimeUnit.MILLISECONDS.sleep(500);\r\n                }\r\n            } catch (InterruptedException e) {  throw new RuntimeException(e); }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAs described in https://stackoverflow.com/a/34358215/2452569, I have to add a configuration value to my server config like so, otherwise the content is not flushed as it is written:\r\n\r\n```\r\npublic class AppConfig extends ResourceConfig {\r\n    public AppConfig() {\r\n        ...\r\n        property(ServerProperties.OUTBOUND_CONTENT_LENGTH_BUFFER, 0);\r\n    }\r\n}\r\n```\r\n\r\nThis Jersey server is part of a large commercial application that, up until now, just didn&#39;t have any endpoints that required this kind of streaming.\r\n\r\nSince the `OUTBOUND_CONTENT_LENGTH_BUFFER` setting is an Application-wide setting, I&#39;m worried that setting it to zero will have negative ramifications in our customer base. I&#39;ve scoured the web to try to figure out what those could be, but I&#39;m having a hard time discerning anything concrete.\r\n\r\nSo, two questions:\r\n1. Is there any way (still using Jersey) to avoid setting this Application-wide config variable and still be able to stream from one endpoint? \r\n2. If there&#39;s no other way, can anyone describe the potential negative ramifications?","title":"Jersey: StreamingOutput in a chunked fashion without setting OUTBOUND_CONTENT_LENGTH_BUFFER to 0?","body":"<p>I am using Jersey to stream &quot;chunked&quot; output, and my client wishes to read and display partial results as they are streamed.</p>\n<p>Here is example code of what I am doing:</p>\n<pre><code>@Path(&quot;streaming&quot;)\npublic class StreamingResource {\n\n    @GET\n    @Produces(&quot;application/octet-stream&quot;)\n    public Response getStream() {\n        return Response.ok(new FeedReturnStreamingOutput()).build();\n    }\n\n    public static class FeedReturnStreamingOutput implements StreamingOutput {\n\n        @Override\n        public void write(OutputStream output)\n                throws IOException, WebApplicationException {\n            try {\n                for (int i = 0; i &lt; 10; i++) {\n                    output.write(String.format(&quot;Hello %d\\n&quot;, i).getBytes());\n                    output.flush();\n                    TimeUnit.MILLISECONDS.sleep(500);\n                }\n            } catch (InterruptedException e) {  throw new RuntimeException(e); }\n        }\n    }\n}\n</code></pre>\n<p>As described in <a href=\"https://stackoverflow.com/a/34358215/2452569\">https://stackoverflow.com/a/34358215/2452569</a>, I have to add a configuration value to my server config like so, otherwise the content is not flushed as it is written:</p>\n<pre><code>public class AppConfig extends ResourceConfig {\n    public AppConfig() {\n        ...\n        property(ServerProperties.OUTBOUND_CONTENT_LENGTH_BUFFER, 0);\n    }\n}\n</code></pre>\n<p>This Jersey server is part of a large commercial application that, up until now, just didn't have any endpoints that required this kind of streaming.</p>\n<p>Since the <code>OUTBOUND_CONTENT_LENGTH_BUFFER</code> setting is an Application-wide setting, I'm worried that setting it to zero will have negative ramifications in our customer base. I've scoured the web to try to figure out what those could be, but I'm having a hard time discerning anything concrete.</p>\n<p>So, two questions:</p>\n<ol>\n<li>Is there any way (still using Jersey) to avoid setting this Application-wide config variable and still be able to stream from one endpoint?</li>\n<li>If there's no other way, can anyone describe the potential negative ramifications?</li>\n</ol>\n"},{"tags":["java","spring","spring-cloud-config-server"],"owner":{"account_id":11509761,"reputation":1,"user_id":8434978,"display_name":"Guilherme Oliveira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700695274,"creation_date":1700695274,"question_id":77533575,"body_markdown":"I&#39;m facing an issue with communication between my Spring API application and the Spring Cloud Config Server, both running in Docker containers on the same network named &quot;guiteste.&quot; I&#39;m working on a local project and, for learning purposes, I&#39;m running each container individually (starting with the config server and then the Spring API). I&#39;m choosing not to use Docker Compose at this point, with the intention to set it up later.\r\n\r\nUpon starting my Spring API application, I&#39;m receiving the following error:\r\n\r\n`2023-11-22T22:50:12.283Z  INFO 1 --- [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Exception on Url - http://configserver:8000/config:org.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://configserver:8000/config/config-server/default&quot;: Connection refused. Will be trying the next url if available\r\n`\r\n\r\nBoth containers are on the same &quot;guiteste&quot; Docker network, and I&#39;m using the container name as the address for the config server.\r\n\r\nHere are the relevant configurations:\r\n\r\n# For the Spring API:\r\n\r\n\r\n```\r\nspring.profiles.active=default\r\nspring.application.name=config-server\r\nspring.config.import=optional:configserver:http://configserver:8000/config\r\nmanagement.endpoints.web.exposure.include=*\r\n```\r\n\r\n\r\n# For the Spring Cloud Config Server:\r\n\r\n\r\n```\r\nserver.port=8000\r\nspring.application.name=config-server\r\nspring.profiles.active=native\r\nspring.cloud.config.server.native.searchLocations=file:///C:/Users/IdeaProjects/config/\r\nspring.cloud.config.server.native.cache=false\r\n```\r\n\r\nBoth containers are on the same &quot;guiteste&quot; Docker network.\r\n\r\n# Versions:\r\n\r\nJava: 19\r\nSpring Boot: 3.1.4\r\n\r\n# Question:\r\n\r\nDoes anyone have any idea why I&#39;m receiving the &quot;Connection refused&quot; error? I&#39;m open to suggestions on how to resolve this issue and make my Spring API application communicate correctly with the Spring Cloud Config Server in Docker containers.\r\n\r\nI appreciate any help in advance!\r\n\r\nI&#39;ve confirmed that both containers are on the same Docker network, and I&#39;ve verified that the ports are correctly configured. However, I&#39;m still encountering the &quot;Connection refused&quot; error. I&#39;m seeking advice from the community to see if anyone has suggestions on what might be causing this issue or if someone has encountered a similar issue and how they resolved it.\r\n\r\nAppreciate any insights or guidance!","title":"Connection Issue between Spring API and Spring Cloud Config Server in Docker Containers on the Same Network","body":"<p>I'm facing an issue with communication between my Spring API application and the Spring Cloud Config Server, both running in Docker containers on the same network named &quot;guiteste.&quot; I'm working on a local project and, for learning purposes, I'm running each container individually (starting with the config server and then the Spring API). I'm choosing not to use Docker Compose at this point, with the intention to set it up later.</p>\n<p>Upon starting my Spring API application, I'm receiving the following error:</p>\n<p><code>2023-11-22T22:50:12.283Z  INFO 1 --- [           main] o.s.c.c.c.ConfigServerConfigDataLoader   : Exception on Url - http://configserver:8000/config:org.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://configserver:8000/config/config-server/default&quot;: Connection refused. Will be trying the next url if available </code></p>\n<p>Both containers are on the same &quot;guiteste&quot; Docker network, and I'm using the container name as the address for the config server.</p>\n<p>Here are the relevant configurations:</p>\n<h1>For the Spring API:</h1>\n<pre><code>spring.profiles.active=default\nspring.application.name=config-server\nspring.config.import=optional:configserver:http://configserver:8000/config\nmanagement.endpoints.web.exposure.include=*\n</code></pre>\n<h1>For the Spring Cloud Config Server:</h1>\n<pre><code>server.port=8000\nspring.application.name=config-server\nspring.profiles.active=native\nspring.cloud.config.server.native.searchLocations=file:///C:/Users/IdeaProjects/config/\nspring.cloud.config.server.native.cache=false\n</code></pre>\n<p>Both containers are on the same &quot;guiteste&quot; Docker network.</p>\n<h1>Versions:</h1>\n<p>Java: 19\nSpring Boot: 3.1.4</p>\n<h1>Question:</h1>\n<p>Does anyone have any idea why I'm receiving the &quot;Connection refused&quot; error? I'm open to suggestions on how to resolve this issue and make my Spring API application communicate correctly with the Spring Cloud Config Server in Docker containers.</p>\n<p>I appreciate any help in advance!</p>\n<p>I've confirmed that both containers are on the same Docker network, and I've verified that the ports are correctly configured. However, I'm still encountering the &quot;Connection refused&quot; error. I'm seeking advice from the community to see if anyone has suggestions on what might be causing this issue or if someone has encountered a similar issue and how they resolved it.</p>\n<p>Appreciate any insights or guidance!</p>\n"},{"tags":["java","ubuntu-20.04","cytoscape"],"answers":[{"tags":[],"owner":{"account_id":6157002,"reputation":1322,"user_id":4799667,"display_name":"Scooter Morris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700695218,"creation_date":1697080605,"answer_id":77277486,"question_id":77274425,"body_markdown":"There was a recent update to both Java 11 and Java 17 that broke OSGi.  Not sure if that&#39;s your problem, but I would suggest updating to Java 17 and Cytoscape 3.10.1, which has a workaround for the problem.\r\n","title":"cytoscape is stuck on iniziling OSGi","body":"<p>There was a recent update to both Java 11 and Java 17 that broke OSGi.  Not sure if that's your problem, but I would suggest updating to Java 17 and Cytoscape 3.10.1, which has a workaround for the problem.</p>\n"}],"owner":{"account_id":20400935,"reputation":5,"user_id":14966662,"display_name":"Mells"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77277486,"answer_count":1,"score":0,"last_activity_date":1700695218,"creation_date":1697037960,"question_id":77274425,"body_markdown":"i managed to install cytoscape 3.9.1 on ubuntu 20.04, but when i open it is permanently stuck on `inizializing OGSi container...`  window. i have java 11, path of java_home is set. everything is 64 bit...\r\n\r\nI tried the `disable-opencl.dummy` file in CytoscapeConfiguration folder and nothing changed. looking for solutions in the helpdesk group of cytoskape i tried also to delete the CytoscapeConfiguration file,but did not worked. i tried to change the PATH to $JAVA_HOME/bin in bashrc. nothing...Cytoscape is stuck there forever. i don&#39;t know what to do.","title":"cytoscape is stuck on iniziling OSGi","body":"<p>i managed to install cytoscape 3.9.1 on ubuntu 20.04, but when i open it is permanently stuck on <code>inizializing OGSi container...</code>  window. i have java 11, path of java_home is set. everything is 64 bit...</p>\n<p>I tried the <code>disable-opencl.dummy</code> file in CytoscapeConfiguration folder and nothing changed. looking for solutions in the helpdesk group of cytoskape i tried also to delete the CytoscapeConfiguration file,but did not worked. i tried to change the PATH to $JAVA_HOME/bin in bashrc. nothing...Cytoscape is stuck there forever. i don't know what to do.</p>\n"},{"tags":["java","swing","jframe","desktop","minimize"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1700695099,"post_id":77533559,"comment_id":136687595,"body_markdown":"There&#39;s probably no way to do this from within Java and you&#39;ll need to explore a native workflow via JNI/JNA","body":"There&#39;s probably no way to do this from within Java and you&#39;ll need to explore a native workflow via JNI/JNA"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1700778345,"post_id":77533559,"comment_id":136698667,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":20707831,"reputation":1,"user_id":15205237,"display_name":"Pillonix"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700694960,"creation_date":1700694960,"question_id":77533559,"body_markdown":"So I&#39;ve been trying to make an application that acts basically as an icon on the desktop, where it&#39;s never minimized and always stays in the back, similarly to the Keep On Top functionality of the Windows Clock where it&#39;s not changed when the Show Desktop button is pressed, except it&#39;s always sent to the back so it&#39;s on the desktop.\r\n\r\nI&#39;ve gotten many of these aspects down, except for whenever I press the Show Desktop button, everything, including my window, minimizes.\r\n\r\nI&#39;ve tried running a while loop to constantly set the window to a restored state.\r\n\r\nI&#39;ve also tried adding a `WindowStateListener` that checks if the window state has been changed, and if so, to restore it.\r\n\r\nNeither of these stopped the Show Desktop button from minimizing them.\r\nI tried combining these and lagged my computer out to the point of force shutdown.","title":"How do I go about making a JFrame unaffected by a press of the &quot;Show Desktop&quot; button on the taskbar","body":"<p>So I've been trying to make an application that acts basically as an icon on the desktop, where it's never minimized and always stays in the back, similarly to the Keep On Top functionality of the Windows Clock where it's not changed when the Show Desktop button is pressed, except it's always sent to the back so it's on the desktop.</p>\n<p>I've gotten many of these aspects down, except for whenever I press the Show Desktop button, everything, including my window, minimizes.</p>\n<p>I've tried running a while loop to constantly set the window to a restored state.</p>\n<p>I've also tried adding a <code>WindowStateListener</code> that checks if the window state has been changed, and if so, to restore it.</p>\n<p>Neither of these stopped the Show Desktop button from minimizing them.\nI tried combining these and lagged my computer out to the point of force shutdown.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":494704,"reputation":5171,"user_id":1225882,"accept_rate":100,"display_name":"anothernode"},"score":1,"creation_date":1534843839,"post_id":51945574,"comment_id":90840600,"body_markdown":"Looks to me like the best practice for this use case would be to use a [property file](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html).","body":"Looks to me like the best practice for this use case would be to use a <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html\" rel=\"nofollow noreferrer\">property file</a>."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1534843995,"post_id":51945574,"comment_id":90840697,"body_markdown":"I do not think that the class is not loaded.","body":"I do not think that the class is not loaded."},{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1534844096,"post_id":51945574,"comment_id":90840748,"body_markdown":"@Jens I debug the code and the constructor isn&#39;t called.","body":"@Jens I debug the code and the constructor isn&#39;t called."},{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1534844196,"post_id":51945574,"comment_id":90840804,"body_markdown":"@anothernode I&#39;d like to get values of some constants from the system environment variables.","body":"@anothernode I&#39;d like to get values of some constants from the system environment variables."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1534844224,"post_id":51945574,"comment_id":90840830,"body_markdown":"@ArianHosseinzadeh You have only static properties!! Why you expect a constructor call?","body":"@ArianHosseinzadeh You have only static properties!! Why you expect a constructor call?"},{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1534844271,"post_id":51945574,"comment_id":90840861,"body_markdown":"why the value for that static field is not instantiated then ?","body":"why the value for that static field is not instantiated then ?"},{"owner":{"account_id":5648618,"reputation":3627,"user_id":4469944,"accept_rate":50,"display_name":"S.K."},"score":0,"creation_date":1534844667,"post_id":51945574,"comment_id":90841089,"body_markdown":"Try reading some other system variable. May be your system variables are not updated and JWT_SECRET_KEY is not visible.","body":"Try reading some other system variable. May be your system variables are not updated and JWT_SECRET_KEY is not visible."},{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1534873426,"post_id":51945574,"comment_id":90858506,"body_markdown":"@S.K. I think the problem is that eclipse doesn&#39;t pickup the value from the environment value. I set the value in the terminal, and I can see the value in `printenv` and I run eclipse on the same terminal windows, but eclipse ignores the value.","body":"@S.K. I think the problem is that eclipse doesn&#39;t pickup the value from the environment value. I set the value in the terminal, and I can see the value in <code>printenv</code> and I run eclipse on the same terminal windows, but eclipse ignores the value."},{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1534873661,"post_id":51945574,"comment_id":90858615,"body_markdown":"I&#39;d like to mention that I restart eclipse and it recognizes other environment variables, but doesn&#39;t recognize the one I added.","body":"I&#39;d like to mention that I restart eclipse and it recognizes other environment variables, but doesn&#39;t recognize the one I added."},{"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"score":0,"creation_date":1534873940,"post_id":51945574,"comment_id":90858754,"body_markdown":"It might be related to this bug: https://bugs.eclipse.org/bugs/show_bug.cgi?id=490816","body":"It might be related to this bug: <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=490816\" rel=\"nofollow noreferrer\">bugs.eclipse.org/bugs/show_bug.cgi?id=490816</a>"},{"owner":{"account_id":5648618,"reputation":3627,"user_id":4469944,"accept_rate":50,"display_name":"S.K."},"score":0,"creation_date":1534908916,"post_id":51945574,"comment_id":90869314,"body_markdown":"You can add environment variables in eclipse run configuration for testing through eclipse.","body":"You can add environment variables in eclipse run configuration for testing through eclipse."},{"owner":{"account_id":39208,"reputation":251211,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1693043398,"post_id":51945574,"comment_id":135709875,"body_markdown":"`System.getenv` doesn&#39;t require any custom classes to be loaded or their constructor being called. It only reqiures the environment variable to be actually present in your process.","body":"<code>System.getenv</code> doesn&#39;t require any custom classes to be loaded or their constructor being called. It only reqiures the environment variable to be actually present in your process."}],"answers":[{"tags":[],"owner":{"account_id":2342901,"reputation":169,"user_id":2053813,"display_name":"Manjunath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534846363,"creation_date":1534846363,"answer_id":51946399,"question_id":51945574,"body_markdown":"You can make a class as bean set the initial values to it. So that you can access it across the application.","title":"Spring Boot: How to initialize a class of constant values","body":"<p>You can make a class as bean set the initial values to it. So that you can access it across the application.</p>\n"},{"tags":[],"owner":{"account_id":29970343,"reputation":1,"user_id":22967814,"display_name":"Hrutik S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700694763,"creation_date":1700694763,"answer_id":77533550,"question_id":51945574,"body_markdown":"Since all the constants are static, you can access them using the Class name.\r\nFor your case, to access JWT_SECRET you can write - SecurityConstants.JWT_SECRET","title":"Spring Boot: How to initialize a class of constant values","body":"<p>Since all the constants are static, you can access them using the Class name.\nFor your case, to access JWT_SECRET you can write - SecurityConstants.JWT_SECRET</p>\n"}],"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8917,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1700694763,"creation_date":1534843538,"question_id":51945574,"body_markdown":"I&#39;m putting constant values of spring boot my application in a final class:\r\n\r\n    public final class SecurityConstants {\r\n    \t/*\r\n    \t * Authentication will only be initiated for the requests with matching URLs\r\n    \t */\r\n    \tprotected final static String DEFAULT_FILTER_PROCESS_URL = &quot;/mypath/**&quot;;\r\n    \r\n    \tpublic static final String AUTHENTICATION_HEADER = &quot;Authorization&quot;;\r\n    \r\n    \tpublic static final String BEARER = &quot;Bearer&quot;;\r\n    \r\n    \tpublic static final String JWT_SECRET = System.getenv(&quot;JWT_SECRET_KEY&quot;);\r\n    \r\n    \tpublic static final long EXPIRATIONTIME = 864_000_000; // 10 days\r\n    \r\n    }\r\n\r\nThe problem is that when I access the `JWT_SECRET` value it&#39;s null, because the class is not loaded. I don&#39;t think it makes sense to annotate this class with `@Component`. I&#39;m wondering how I should load the class and initialize these constants.","title":"Spring Boot: How to initialize a class of constant values","body":"<p>I'm putting constant values of spring boot my application in a final class:</p>\n\n<pre><code>public final class SecurityConstants {\n    /*\n     * Authentication will only be initiated for the requests with matching URLs\n     */\n    protected final static String DEFAULT_FILTER_PROCESS_URL = \"/mypath/**\";\n\n    public static final String AUTHENTICATION_HEADER = \"Authorization\";\n\n    public static final String BEARER = \"Bearer\";\n\n    public static final String JWT_SECRET = System.getenv(\"JWT_SECRET_KEY\");\n\n    public static final long EXPIRATIONTIME = 864_000_000; // 10 days\n\n}\n</code></pre>\n\n<p>The problem is that when I access the <code>JWT_SECRET</code> value it's null, because the class is not loaded. I don't think it makes sense to annotate this class with <code>@Component</code>. I'm wondering how I should load the class and initialize these constants.</p>\n"},{"tags":["java","android","text","addition"],"owner":{"account_id":28989104,"reputation":1,"user_id":22205310,"display_name":"the emirate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1700694366,"creation_date":1700694366,"question_id":77533529,"body_markdown":"How do I create a specific login id to a specific text or to a specific line of text in android studio but after trying several I couldn&#39;t get it but I try some method like admin and user log in \r\n\r\nHave try several ways but won&#39;t work ","title":"How to create a specific login id to a specific text in android studio","body":"<p>How do I create a specific login id to a specific text or to a specific line of text in android studio but after trying several I couldn't get it but I try some method like admin and user log in</p>\n<p>Have try several ways but won't work</p>\n"},{"tags":["java","kotlin","kotlin-multiplatform","kotlin-native"],"comments":[{"owner":{"account_id":1132561,"reputation":3146,"user_id":1118307,"accept_rate":42,"display_name":"vpiTriumph"},"score":0,"creation_date":1700605215,"post_id":77526178,"comment_id":136674764,"body_markdown":"The linked provided explains how to call Java code from kotlin-jvm.  This is well understood and documented.  It&#39;s a simpler technical problem because, in this case, the Kotlin code is running off the JVM too.\n\nThe important part of my question is that it pertains to Kotlin native specifically.","body":"The linked provided explains how to call Java code from kotlin-jvm.  This is well understood and documented.  It&#39;s a simpler technical problem because, in this case, the Kotlin code is running off the JVM too.  The important part of my question is that it pertains to Kotlin native specifically."},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1700605248,"post_id":77526178,"comment_id":136674767,"body_markdown":"Ah sorry, I glossed over that.","body":"Ah sorry, I glossed over that."},{"owner":{"account_id":13722742,"reputation":16978,"user_id":10134209,"display_name":"gidds"},"score":0,"creation_date":1700690150,"post_id":77526178,"comment_id":136687018,"body_markdown":"JNI is for calling native code _from_ Java, not the other way around, so I can&#39;t see how it could help.  In the case of Kotlin/Native, there _is_ no JVM running, and so calling Java code will necessarily involve starting one — and I don&#39;t think Kotlin/Native has any special way of doing that (after all, it&#39;s intended to be platform-neutral!), so I suspect the only practical way is (as you say) to start it like you would any other program.","body":"JNI is for calling native code <i>from</i> Java, not the other way around, so I can&#39;t see how it could help.  In the case of Kotlin/Native, there <i>is</i> no JVM running, and so calling Java code will necessarily involve starting one — and I don&#39;t think Kotlin/Native has any special way of doing that (after all, it&#39;s intended to be platform-neutral!), so I suspect the only practical way is (as you say) to start it like you would any other program."}],"answers":[{"tags":[],"owner":{"account_id":9869929,"reputation":2134,"user_id":7309962,"display_name":"Evgeny K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700693761,"creation_date":1700693761,"answer_id":77533494,"question_id":77526178,"body_markdown":"The answer is yes, you can. But I would never recommend this. For MacOS and Android targets it will be better use JVM target for Kotlin instead of Kotlin/Native. Performance and developer experience will be much better this way.\r\n\r\nIf you really want to use Kotlin/Native you need first compile your java library using [Java AOT](https://openjdk.org/jeps/295) for every native target, and then use [Kotlin/Native cinterop](https://kotlinlang.org/docs/native-c-interop.html).\r\n\r\nJNI is completely opposite technology, it allows to use native libraries in JVM, not other way around.","title":"Call Java library from Kotlin Native","body":"<p>The answer is yes, you can. But I would never recommend this. For MacOS and Android targets it will be better use JVM target for Kotlin instead of Kotlin/Native. Performance and developer experience will be much better this way.</p>\n<p>If you really want to use Kotlin/Native you need first compile your java library using <a href=\"https://openjdk.org/jeps/295\" rel=\"nofollow noreferrer\">Java AOT</a> for every native target, and then use <a href=\"https://kotlinlang.org/docs/native-c-interop.html\" rel=\"nofollow noreferrer\">Kotlin/Native cinterop</a>.</p>\n<p>JNI is completely opposite technology, it allows to use native libraries in JVM, not other way around.</p>\n"}],"owner":{"account_id":1132561,"reputation":3146,"user_id":1118307,"accept_rate":42,"display_name":"vpiTriumph"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700693761,"creation_date":1700604118,"question_id":77526178,"body_markdown":"I am using Kotlin Native to create code that will run on two separate operating systems (MacOS and Android).  Both machines will have JVMs installed.\r\n\r\nI have a Java library that cannot be rewritten in Kotlin, as it relies on an open-souce third party Java dependency -- specifically [WireMock](https://github.com/wiremock) but I don&#39;t think that&#39;s relevant to answer the broader question.\r\n\r\nAre there options for Java interop beyond invoking a standalone JAR from the Native shell/terminal?  Is there something that can be achieved via the JNI to allow for programatic invocation of the JAR from Kotlin Native?","title":"Call Java library from Kotlin Native","body":"<p>I am using Kotlin Native to create code that will run on two separate operating systems (MacOS and Android).  Both machines will have JVMs installed.</p>\n<p>I have a Java library that cannot be rewritten in Kotlin, as it relies on an open-souce third party Java dependency -- specifically <a href=\"https://github.com/wiremock\" rel=\"nofollow noreferrer\">WireMock</a> but I don't think that's relevant to answer the broader question.</p>\n<p>Are there options for Java interop beyond invoking a standalone JAR from the Native shell/terminal?  Is there something that can be achieved via the JNI to allow for programatic invocation of the JAR from Kotlin Native?</p>\n"},{"tags":["java","android","mobile","android-tv","screensaver"],"comments":[{"owner":{"account_id":25285238,"reputation":405,"user_id":19112370,"display_name":"Harshali"},"score":0,"creation_date":1700721342,"post_id":77533451,"comment_id":136689643,"body_markdown":"lonut, Is it not working with specific android device or API level?","body":"lonut, Is it not working with specific android device or API level?"},{"owner":{"account_id":8341093,"reputation":43,"user_id":6266392,"display_name":"Duliba Ionut"},"score":0,"creation_date":1700751633,"post_id":77533451,"comment_id":136695026,"body_markdown":"@Harshali It&#39; not working for any android device","body":"@Harshali It&#39; not working for any android device"},{"owner":{"account_id":25285238,"reputation":405,"user_id":19112370,"display_name":"Harshali"},"score":1,"creation_date":1700793574,"post_id":77533451,"comment_id":136699707,"body_markdown":"Try with xml file, add `android:keepScreenOn=&quot;true&quot;` in your activity_main xml file.","body":"Try with xml file, add <code>android:keepScreenOn=&quot;true&quot;</code> in your activity_main xml file."},{"owner":{"account_id":8341093,"reputation":43,"user_id":6266392,"display_name":"Duliba Ionut"},"score":0,"creation_date":1700837102,"post_id":77533451,"comment_id":136705397,"body_markdown":"@Harshali I am also using a WebView, I guess I also need `mWebView = findViewById(R.id.webview);\n        mWebView.setKeepScreenOn(true);`","body":"@Harshali I am also using a WebView, I guess I also need <code>mWebView = findViewById(R.id.webview);         mWebView.setKeepScreenOn(true);</code>"},{"owner":{"account_id":25285238,"reputation":405,"user_id":19112370,"display_name":"Harshali"},"score":0,"creation_date":1700839923,"post_id":77533451,"comment_id":136705837,"body_markdown":"Does it works? set `setKeepScreenOn` to webView keep your screen on?","body":"Does it works? set <code>setKeepScreenOn</code> to webView keep your screen on?"}],"owner":{"account_id":8341093,"reputation":43,"user_id":6266392,"display_name":"Duliba Ionut"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700692819,"creation_date":1700692819,"question_id":77533451,"body_markdown":"I have a product that is a web app running on android wrapped app on TVs.\r\nOver time the app is timing out and going to screen saver.\r\n\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n   \r\n            setContentView(R.layout.activity_main);\r\n            startWebview();\r\n            Objects.requireNonNull(getSupportActionBar()).hide();\r\n            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\r\n    \r\n            generateUniqueIdentifier();\r\n    \r\n        }\r\n\r\nI have added             **getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);**\r\nbut screen saver still appears\r\n\r\nAlso in \r\n\r\n  \r\n\r\n      @Override\r\n        protected void onResume() {\r\n            super.onResume();\r\n            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\r\n    \r\n            if (mWebView != null) {\r\n                mWebView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE\r\n                        | View.SYSTEM_UI_FLAG_FULLSCREEN\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_STABLE\r\n                        | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY\r\n                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\r\n                        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);\r\n            }\r\n    \r\n        }\r\n\r\nIs there a way to stop the screen saver from going on?\r\n","title":"Prevent Screen Saver From Appearing on Android TV","body":"<p>I have a product that is a web app running on android wrapped app on TVs.\nOver time the app is timing out and going to screen saver.</p>\n<pre><code>    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        setContentView(R.layout.activity_main);\n        startWebview();\n        Objects.requireNonNull(getSupportActionBar()).hide();\n        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\n\n        generateUniqueIdentifier();\n\n    }\n</code></pre>\n<p>I have added             <strong>getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);</strong>\nbut screen saver still appears</p>\n<p>Also in</p>\n<pre><code>  @Override\n    protected void onResume() {\n        super.onResume();\n        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\n\n        if (mWebView != null) {\n            mWebView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE\n                    | View.SYSTEM_UI_FLAG_FULLSCREEN\n                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE\n                    | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY\n                    | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION\n                    | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION);\n        }\n\n    }\n</code></pre>\n<p>Is there a way to stop the screen saver from going on?</p>\n"},{"tags":["java","ant"],"answers":[{"tags":[],"owner":{"account_id":3312105,"reputation":17055,"user_id":2785358,"display_name":"Alcanzar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1416595186,"creation_date":1416595186,"answer_id":27068101,"question_id":27068064,"body_markdown":"Window/Show View/Ant, drag build.xml into that window, and you can double click on any of the tasks defined in your build.xml","title":"How to run `ant clean` from Eclipse","body":"<p>Window/Show View/Ant, drag build.xml into that window, and you can double click on any of the tasks defined in your build.xml</p>\n"},{"tags":[],"owner":{"account_id":5176790,"reputation":118,"user_id":4143637,"display_name":"Karpinski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507143473,"creation_date":1416595855,"answer_id":27068261,"question_id":27068064,"body_markdown":"Right click on the build.xml &gt; Run As &gt; Ant Build...\r\n\r\nOn Targets tab, check clean option.\r\n","title":"How to run `ant clean` from Eclipse","body":"<p>Right click on the build.xml > Run As > Ant Build...</p>\n\n<p>On Targets tab, check clean option.</p>\n"}],"owner":{"account_id":3100671,"reputation":2657,"user_id":2624866,"accept_rate":48,"display_name":"rickygrimes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1649,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":27068101,"answer_count":2,"score":0,"last_activity_date":1700692704,"creation_date":1416595059,"question_id":27068064,"body_markdown":"Like I can run an `ant build` by right-clicking on `build.xml`, and selecting Run as --&gt; Ant build, how do I do the same thing for `ant clean`?\r\n","title":"How to run `ant clean` from Eclipse","body":"<p>Like I can run an <code>ant build</code> by right-clicking on <code>build.xml</code>, and selecting Run as --&gt; Ant build, how do I do the same thing for <code>ant clean</code>?</p>\n"},{"tags":["java","exception"],"owner":{"account_id":3100671,"reputation":2657,"user_id":2624866,"accept_rate":48,"display_name":"rickygrimes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1700082183,"answer_count":0,"score":-1,"last_activity_date":1700692666,"creation_date":1700082026,"question_id":77490891,"body_markdown":"I am trying to understand how exception handling works in a nested try catch vs regular try/catch. While this may seem basic, I find it rather tricky to understand. See my inline questions in this code: \r\n\r\n        Scenario 1\r\n            try {\r\n        \t  try {\r\n        \t\t//do something\r\n        \t   }catch(Exception ex) {\r\n               \tthrow new IOException(&quot;IOException occured&quot;);\r\n        \t  }\r\n            } catch (Exception ex) {\r\n        \tif(ex instanceOf IOException) {\r\n        \t\t//do something - My assumption is the exception being thrown in inner catch is being caught here\r\n        \t}\r\n        }\r\n        \r\n        \r\n       Scenario 2\r\n        try {\r\n        \t//do something\r\n        \tthrow new IOException;\r\n        } catch(Exception ex) {\r\n        \tif(ex instanceOf IOException) {\r\n        \t\t//do something - will this get caught here?\r\n        \t}\r\n        \r\n        }\r\n        \r\n    Scenario 3\r\n        try {\r\n        \t//do something\r\n        } catch(IOException ex) {\r\n        \r\n          } catch(IOException ex) {\r\n        \tthrow ex; // will this get caught in the calling method&#39;s catch block?\r\n          }\r\n        \r\n        }\r\n\r\n    ","title":"Exception handling in Java in case of nested try catch vs regular try catch","body":"<p>I am trying to understand how exception handling works in a nested try catch vs regular try/catch. While this may seem basic, I find it rather tricky to understand. See my inline questions in this code:</p>\n<pre><code>    Scenario 1\n        try {\n          try {\n            //do something\n           }catch(Exception ex) {\n            throw new IOException(&quot;IOException occured&quot;);\n          }\n        } catch (Exception ex) {\n        if(ex instanceOf IOException) {\n            //do something - My assumption is the exception being thrown in inner catch is being caught here\n        }\n    }\n    \n    \n   Scenario 2\n    try {\n        //do something\n        throw new IOException;\n    } catch(Exception ex) {\n        if(ex instanceOf IOException) {\n            //do something - will this get caught here?\n        }\n    \n    }\n    \nScenario 3\n    try {\n        //do something\n    } catch(IOException ex) {\n    \n      } catch(IOException ex) {\n        throw ex; // will this get caught in the calling method's catch block?\n      }\n    \n    }\n</code></pre>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"comments":[{"owner":{"account_id":5494298,"reputation":698,"user_id":4365969,"accept_rate":100,"display_name":"0xtvarun"},"score":0,"creation_date":1513777083,"post_id":47907174,"comment_id":82781666,"body_markdown":"Data in Kafka pipelines are immutable","body":"Data in Kafka pipelines are immutable"}],"answers":[{"tags":[],"owner":{"account_id":6384814,"reputation":60263,"user_id":4953079,"display_name":"Matthias J. Sax"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700691602,"creation_date":1513823334,"answer_id":47917070,"question_id":47907174,"body_markdown":"If you configure a topic with `CreateTime` the timestamp store will be the timestamp provided by the producer.\r\n\r\nFor a plain `KafkaProducer` if you don&#39;t specify the timestamp explicitly, `KafkaProducer` uses `System.currentTimeMillis()` and sends the message to the broker.\r\n\r\nFor Kafka Streams, if you read input records with certain timestamps, there is dedicate timestamp inference logic to compute the timestamp for the result records. Thus, Kafka Streams set the timestamp explicitly when handing it to the internally used `KafkaProducer` and thus the producer does just use this timestamp and does not use current wall-clock-time. For stream processing, this is usually desired behavior.\r\n\r\nIf you have a simple pipeline that just copies data from one topic to another, the timestamp inference will use the input record timestamp as output record timestamp.\r\n\r\nThere are two thing you can do to get different semantics:\r\n\r\n 1. Configure `WallClockTimestampExtractor` for you Kafka Streams application. For this case, Kafka Stream will not use the embedded record timestamp but the current wall-clock time to derive the timestamp of the output record.\r\n 2. Configure your output topic with `AppendTime` instead of `CreateTime`. For this case, the broker always overwrites the record timestamp provided by the producer with current broker wall-clock time.","title":"input record timestamp and output record timestamp is same across both source and sink topics?","body":"<p>If you configure a topic with <code>CreateTime</code> the timestamp store will be the timestamp provided by the producer.</p>\n<p>For a plain <code>KafkaProducer</code> if you don't specify the timestamp explicitly, <code>KafkaProducer</code> uses <code>System.currentTimeMillis()</code> and sends the message to the broker.</p>\n<p>For Kafka Streams, if you read input records with certain timestamps, there is dedicate timestamp inference logic to compute the timestamp for the result records. Thus, Kafka Streams set the timestamp explicitly when handing it to the internally used <code>KafkaProducer</code> and thus the producer does just use this timestamp and does not use current wall-clock-time. For stream processing, this is usually desired behavior.</p>\n<p>If you have a simple pipeline that just copies data from one topic to another, the timestamp inference will use the input record timestamp as output record timestamp.</p>\n<p>There are two thing you can do to get different semantics:</p>\n<ol>\n<li>Configure <code>WallClockTimestampExtractor</code> for you Kafka Streams application. For this case, Kafka Stream will not use the embedded record timestamp but the current wall-clock time to derive the timestamp of the output record.</li>\n<li>Configure your output topic with <code>AppendTime</code> instead of <code>CreateTime</code>. For this case, the broker always overwrites the record timestamp provided by the producer with current broker wall-clock time.</li>\n</ol>\n"}],"owner":{"account_id":4295121,"reputation":21,"user_id":3510389,"display_name":"Prashanth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":666,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1700691602,"creation_date":1513776591,"question_id":47907174,"body_markdown":"I create kafka streaming application using Processor API.\r\n\r\nHere is how i create a topic to attach timestamp to all incoming messages\r\n&gt; kafka-topics.sh --create --zookeeper localhost:2181\r\n&gt; --replication-factor 1 --partitions 1 --topic topicName --config  message.timestamp.type=**CreateTime**\r\n\r\nThe workflow is processing the incoming messages from source topic and posting it to sink topic. For some strange reason, I have seen same timestamp coming in both source and sink topic messages. \r\nSay for ex, in source topic for a message create time is **T0** , that remains same in sink topic as well.\r\n\r\nWhat do i need to do to see the updated timestamp in the sink topic messages?","title":"input record timestamp and output record timestamp is same across both source and sink topics?","body":"<p>I create kafka streaming application using Processor API.</p>\n\n<p>Here is how i create a topic to attach timestamp to all incoming messages</p>\n\n<blockquote>\n  <p>kafka-topics.sh --create --zookeeper localhost:2181\n  --replication-factor 1 --partitions 1 --topic topicName --config  message.timestamp.type=<strong>CreateTime</strong></p>\n</blockquote>\n\n<p>The workflow is processing the incoming messages from source topic and posting it to sink topic. For some strange reason, I have seen same timestamp coming in both source and sink topic messages. \nSay for ex, in source topic for a message create time is <strong>T0</strong> , that remains same in sink topic as well.</p>\n\n<p>What do i need to do to see the updated timestamp in the sink topic messages?</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1700667698,"post_id":77531180,"comment_id":136683263,"body_markdown":"Perhaps the parent provides a builder that wraps the creation of a WebClient?  The builder   would handle the common required configuration internally, and exposes fluent methods for the app specific configuration.","body":"Perhaps the parent provides a builder that wraps the creation of a WebClient?  The builder   would handle the common required configuration internally, and exposes fluent methods for the app specific configuration."},{"owner":{"account_id":3878753,"reputation":312,"user_id":3211953,"accept_rate":25,"display_name":"Bar Hoshen"},"score":0,"creation_date":1700669094,"post_id":77531180,"comment_id":136683565,"body_markdown":"I imagined that this is a possible approach. Im not sure if its the best or right approach, but if so -  The question now is how do I make `WebClient.build()` return my new builder instead of the default one?  And another question that i didnt specify in my original question - would i still be able to apply custom configurations to a new WebClient if needed?","body":"I imagined that this is a possible approach. Im not sure if its the best or right approach, but if so -  The question now is how do I make <code>WebClient.build()</code> return my new builder instead of the default one?  And another question that i didnt specify in my original question - would i still be able to apply custom configurations to a new WebClient if needed?"}],"answers":[{"tags":[],"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700672234,"creation_date":1700671507,"answer_id":77531766,"question_id":77531180,"body_markdown":"Follow up from the comments:\r\n\r\nprovided by the parent - a builder that wraps the `WebClient` builder so common configuration can always be applied.\r\n\r\n    public class StandardWebClientBuilder {\r\n        private static final long CONNECT_TIMEOUT_MILLIS = 1000;\r\n        private String baseUrl;\r\n\r\n        public static StandardWebClientBuilder builder()  {\r\n            return new StandardWebClientBuilder();\r\n        }\r\n\r\n        // provide methods as needed so app can customize some, but not all, properties\r\n        public StandardWebClientBuilder baseUrl(String baseUrl) {\r\n            this.baseUrl = baseUrl;   \r\n            return this;\r\n        }\r\n\r\n        public WebClient build() {\r\n            var httpClient = HttpClient.create()\r\n\t\t        .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, CONNECT_TIMEOUT_MILLIS );\r\n\r\n             return WebClient.builder()\r\n\t\t         .clientConnector(new ReactorClientHttpConnector(httpClient))\r\n                 .baseUrl(baseUrl)\r\n\t\t         .build();\r\n         }\r\n    }\r\n\r\nand used by the app - there can be multiple instances, each with their own customization, but all using the standard properties defined by the parent.\r\n\r\n\r\n    @Bean(&quot;Service1Client&quot;)\r\n    public WebClient buildService1Client(@Value(&quot;service1.baseUrl&quot;) String baseUrl) {\r\n        return StandardWebClientBuilder.builder()\r\n           .baseUrl(baseUrl)\r\n           .build();\r\n    }\r\n\r\n    @Bean(&quot;Service2Client&quot;)\r\n    public WebClient buildService2Client(@Value(&quot;service2.baseUrl&quot;) String baseUrl) {\r\n        return StandardWebClientBuilder.builder()\r\n           .baseUrl(baseUrl)\r\n           .build();\r\n    }\r\n\r\nOther processes, such as code review or static code analysis, would have to ensure `StandardWebClientBuilder` was used by the app instead of directly using `WebClient.builder`.","title":"The best way to pre-configure all instances of WebClient globally?","body":"<p>Follow up from the comments:</p>\n<p>provided by the parent - a builder that wraps the <code>WebClient</code> builder so common configuration can always be applied.</p>\n<pre><code>public class StandardWebClientBuilder {\n    private static final long CONNECT_TIMEOUT_MILLIS = 1000;\n    private String baseUrl;\n\n    public static StandardWebClientBuilder builder()  {\n        return new StandardWebClientBuilder();\n    }\n\n    // provide methods as needed so app can customize some, but not all, properties\n    public StandardWebClientBuilder baseUrl(String baseUrl) {\n        this.baseUrl = baseUrl;   \n        return this;\n    }\n\n    public WebClient build() {\n        var httpClient = HttpClient.create()\n            .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, CONNECT_TIMEOUT_MILLIS );\n\n         return WebClient.builder()\n             .clientConnector(new ReactorClientHttpConnector(httpClient))\n             .baseUrl(baseUrl)\n             .build();\n     }\n}\n</code></pre>\n<p>and used by the app - there can be multiple instances, each with their own customization, but all using the standard properties defined by the parent.</p>\n<pre><code>@Bean(&quot;Service1Client&quot;)\npublic WebClient buildService1Client(@Value(&quot;service1.baseUrl&quot;) String baseUrl) {\n    return StandardWebClientBuilder.builder()\n       .baseUrl(baseUrl)\n       .build();\n}\n\n@Bean(&quot;Service2Client&quot;)\npublic WebClient buildService2Client(@Value(&quot;service2.baseUrl&quot;) String baseUrl) {\n    return StandardWebClientBuilder.builder()\n       .baseUrl(baseUrl)\n       .build();\n}\n</code></pre>\n<p>Other processes, such as code review or static code analysis, would have to ensure <code>StandardWebClientBuilder</code> was used by the app instead of directly using <code>WebClient.builder</code>.</p>\n"},{"tags":[],"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700690168,"creation_date":1700675443,"answer_id":77532173,"question_id":77531180,"body_markdown":"The [Spring Boot documentation](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#io.rest-client.webclient) recommends:\r\n\r\n&gt; Spring Boot creates and pre-configures a WebClient.Builder for you. It is strongly advised to inject it in your components and use it to create WebClient instances.\r\n\r\nThe Spring Boot documentation further describes how to [customize the WebClient.Builder](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#io.rest-client.webclient.customization):\r\n\r\n&gt; To make the scope of any customizations as narrow as possible, inject the auto-configured WebClient.Builder and then call its methods as required. WebClient.Builder instances are stateful: Any change on the builder is reflected in all clients subsequently created with it. If you want to create several clients with the same builder, you can also consider cloning the builder with `WebClient.Builder other = builder.clone();`.\r\n\r\n&gt; To make an application-wide, additive customization to all WebClient.Builder instances, you can declare [WebClientCustomizer](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/reactive/function/client/WebClientCustomizer.html) beans and change the WebClient.Builder locally at the point of injection.\r\n","title":"The best way to pre-configure all instances of WebClient globally?","body":"<p>The <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#io.rest-client.webclient\" rel=\"nofollow noreferrer\">Spring Boot documentation</a> recommends:</p>\n<blockquote>\n<p>Spring Boot creates and pre-configures a WebClient.Builder for you. It is strongly advised to inject it in your components and use it to create WebClient instances.</p>\n</blockquote>\n<p>The Spring Boot documentation further describes how to <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#io.rest-client.webclient.customization\" rel=\"nofollow noreferrer\">customize the WebClient.Builder</a>:</p>\n<blockquote>\n<p>To make the scope of any customizations as narrow as possible, inject the auto-configured WebClient.Builder and then call its methods as required. WebClient.Builder instances are stateful: Any change on the builder is reflected in all clients subsequently created with it. If you want to create several clients with the same builder, you can also consider cloning the builder with <code>WebClient.Builder other = builder.clone();</code>.</p>\n</blockquote>\n<blockquote>\n<p>To make an application-wide, additive customization to all WebClient.Builder instances, you can declare <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/web/reactive/function/client/WebClientCustomizer.html\" rel=\"nofollow noreferrer\">WebClientCustomizer</a> beans and change the WebClient.Builder locally at the point of injection.</p>\n</blockquote>\n"}],"owner":{"account_id":3878753,"reputation":312,"user_id":3211953,"accept_rate":25,"display_name":"Bar Hoshen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700690168,"creation_date":1700666510,"question_id":77531180,"body_markdown":"TL;DR - I am looking for the best way to provide all instances of WebClient in a single application some base configurations, like defining a timeout, by defining it in a single piece of code.\r\n\r\nI need to be able to manage the configuration of WebClient objects in multiple springboot projects. The goal is to make sure that these projects are following certain policies. \r\nFor example, all WebClient objects instantiated in each of these projects should have `CONNECT_TIMEOUT_MILLIS` set to 1000 miliseconds. Another example is manipulating the request header of each request made by a WebClient.\r\n\r\nI know that my examples can perhaps be solved in better ways (filters for header manipulation for example) but I chose these simple examples to learn about solutions that are related specifically to WebClient manipulation.\r\n\r\nI am creating a starter project that all of these projects would use as a parent. Through this project they will obtain their equivalent of `spring-boot-starter-webflux`.\r\n\r\nIf I would have used a RestTemplate, id simply define it as a bean in the starter dependency project and autowire it in each child project. The problem is that I do not want to have a single WebClient per project, but want to have the ability to build multiple WebClients per project that adhere to these pre-configured configurations, otherwise I would not be able to use the full potential of webflux.\r\n\r\nWhat would be the best way to solve this requirement without limiting myself to a single WebClient instance per application?\r\n","title":"The best way to pre-configure all instances of WebClient globally?","body":"<p>TL;DR - I am looking for the best way to provide all instances of WebClient in a single application some base configurations, like defining a timeout, by defining it in a single piece of code.</p>\n<p>I need to be able to manage the configuration of WebClient objects in multiple springboot projects. The goal is to make sure that these projects are following certain policies.\nFor example, all WebClient objects instantiated in each of these projects should have <code>CONNECT_TIMEOUT_MILLIS</code> set to 1000 miliseconds. Another example is manipulating the request header of each request made by a WebClient.</p>\n<p>I know that my examples can perhaps be solved in better ways (filters for header manipulation for example) but I chose these simple examples to learn about solutions that are related specifically to WebClient manipulation.</p>\n<p>I am creating a starter project that all of these projects would use as a parent. Through this project they will obtain their equivalent of <code>spring-boot-starter-webflux</code>.</p>\n<p>If I would have used a RestTemplate, id simply define it as a bean in the starter dependency project and autowire it in each child project. The problem is that I do not want to have a single WebClient per project, but want to have the ability to build multiple WebClients per project that adhere to these pre-configured configurations, otherwise I would not be able to use the full potential of webflux.</p>\n<p>What would be the best way to solve this requirement without limiting myself to a single WebClient instance per application?</p>\n"},{"tags":["java","expression","predicate","aerospike"],"answers":[{"tags":[],"owner":{"account_id":2163589,"reputation":5165,"user_id":1917187,"display_name":"pgupta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700690030,"creation_date":1700689678,"answer_id":77533256,"question_id":77529037,"body_markdown":"Looks like you asked the same question here: https://discuss.aerospike.com/t/replacement-for-predexp-on-a-list-bin-of-strings/10657/2 - I validated your Expression construct. (I had used `listValueExp` there, now referred below.)  You have added more color to your question here. So let me continue:\r\nFor a read query:  `query(QueryPolicy qPolicy, Statement stmt)` you will specify the Secondary Index filter (if you are using one) in the Statement object and the filter expression to be applied after records that match the SI using the QueryPolicy object.  e.g.\r\n\r\n`stmt.setFilter(Filter.range(&quot;age&quot;,20,60));` -- for SI\r\n\r\n`qPolicy.filterExp = listValueExp;`   -- for expression based subsequent filtering. Hope this clarifies.","title":"Replacement for PredExp on a list bin","body":"<p>Looks like you asked the same question here: <a href=\"https://discuss.aerospike.com/t/replacement-for-predexp-on-a-list-bin-of-strings/10657/2\" rel=\"nofollow noreferrer\">https://discuss.aerospike.com/t/replacement-for-predexp-on-a-list-bin-of-strings/10657/2</a> - I validated your Expression construct. (I had used <code>listValueExp</code> there, now referred below.)  You have added more color to your question here. So let me continue:\nFor a read query:  <code>query(QueryPolicy qPolicy, Statement stmt)</code> you will specify the Secondary Index filter (if you are using one) in the Statement object and the filter expression to be applied after records that match the SI using the QueryPolicy object.  e.g.</p>\n<p><code>stmt.setFilter(Filter.range(&quot;age&quot;,20,60));</code> -- for SI</p>\n<p><code>qPolicy.filterExp = listValueExp;</code>   -- for expression based subsequent filtering. Hope this clarifies.</p>\n"}],"owner":{"account_id":20336063,"reputation":1,"user_id":14916732,"display_name":"Avanish Ghosh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700690030,"creation_date":1700648166,"question_id":77529037,"body_markdown":"I have a bin of type List&lt;String&gt;. I want to query and get the records for which this bin has a value equal to variable &#39;val&#39;, lets say. Using PredExp this can be done using: \r\n``` \r\npredExps = Arrays.asList(\r\nPredExp.stringVar(&quot;v&quot;),\r\nPredExp.stringValue(String.valueOf(val)),\r\nPredExp.stringEqual(),\r\nPredExp.listBin(fieldName),\r\nPredExp.listIterateOr(&quot;v&quot;)); \r\n``` \r\nAfter PredExp has been deprecated 6.0.0 onwards, how can the same behaviour be replicated? I am using expressions for the same, but it&#39;s not working as expected. \r\n``` \r\nexp = Exp.build( \r\nListExp.getByValue( \r\nListReturnType.VALUE, Exp.val(String.valueOf(val)),\r\nExp.listBin(fieldName) ) ); \r\n```\r\n\r\nI used expression to replicate the issue, but I think I might have to use a filter inside of statement. I already have a filter getting passed in statement for the query. Can two filters be merged into one?","title":"Replacement for PredExp on a list bin","body":"<p>I have a bin of type List. I want to query and get the records for which this bin has a value equal to variable 'val', lets say. Using PredExp this can be done using:</p>\n<pre><code>predExps = Arrays.asList(\nPredExp.stringVar(&quot;v&quot;),\nPredExp.stringValue(String.valueOf(val)),\nPredExp.stringEqual(),\nPredExp.listBin(fieldName),\nPredExp.listIterateOr(&quot;v&quot;)); \n</code></pre>\n<p>After PredExp has been deprecated 6.0.0 onwards, how can the same behaviour be replicated? I am using expressions for the same, but it's not working as expected.</p>\n<pre><code>exp = Exp.build( \nListExp.getByValue( \nListReturnType.VALUE, Exp.val(String.valueOf(val)),\nExp.listBin(fieldName) ) ); \n</code></pre>\n<p>I used expression to replicate the issue, but I think I might have to use a filter inside of statement. I already have a filter getting passed in statement for the query. Can two filters be merged into one?</p>\n"},{"tags":["java","hikaricp"],"comments":[{"owner":{"account_id":5916600,"reputation":2324,"user_id":4655217,"display_name":"geobreze"},"score":0,"creation_date":1632312472,"post_id":69283032,"comment_id":122457010,"body_markdown":"What version of oracle jdbc are you using?","body":"What version of oracle jdbc are you using?"},{"owner":{"account_id":2806364,"reputation":405,"user_id":2413527,"accept_rate":38,"display_name":"orion_kid"},"score":0,"creation_date":1632314118,"post_id":69283032,"comment_id":122457759,"body_markdown":"&lt;groupId&gt;com.oracle&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n            &lt;version&gt;19.3&lt;/version&gt;","body":"&lt;groupId&gt;com.oracle&lt;/groupId&gt;             &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;             &lt;version&gt;19.3&lt;/version&gt;"},{"owner":{"account_id":5916600,"reputation":2324,"user_id":4655217,"display_name":"geobreze"},"score":0,"creation_date":1632314228,"post_id":69283032,"comment_id":122457813,"body_markdown":"Can you try using \n    &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n    &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n    &lt;version&gt;21.3.0.0&lt;/version&gt;","body":"Can you try using      &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;     &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;     &lt;version&gt;21.3.0.0&lt;/version&gt;"},{"owner":{"account_id":9847991,"reputation":56896,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1632315006,"post_id":69283032,"comment_id":122458176,"body_markdown":"show your configuration","body":"show your configuration"}],"answers":[{"tags":[],"owner":{"account_id":22883353,"reputation":46,"user_id":17024640,"display_name":"kdp008"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1632827338,"creation_date":1632827338,"answer_id":69360612,"question_id":69283032,"body_markdown":"I had the same issue but with Java 8 as well as Java 11. I tried passing this VM argument and it worked for me:\r\n\r\n-Doracle.jdbc.javaNetNio=false\r\n\r\nOr, we can also set it as properties if creating an OracleDataSource:\r\n\r\n    OracleDataSource oracleDataSource = new OracleDataSource();\r\n    oracleDataSource.setURL(jdbcUrl);\r\n    oracleDataSource.setDriverType(dbDriver);\r\n    Properties properties = new Properties();\r\n    //... other properties if needed\r\n    properties.setProperty(&quot;oracle.jdbc.javaNetNio&quot;, &quot;false&quot;);\r\n        \r\n    oracleDataSource.setConnectionProperties(properties);\r\n\r\nOr if creating a HikariDataSource, we can use it as:\r\n\r\n    HikariConfig poolConfig = new HikariConfig();\r\n    poolConfig.setJdbcUrl(jdbcUrl);\r\n    poolConfig.setDriverClassName(jdbcDriver);  \r\n    //...  other properties if needed\r\n    poolConfig.addDataSourceProperty(&quot;oracle.jdbc.javaNetNio&quot;, &quot;false&quot;);\r\n\r\n","title":"Getting a Hikari Pool Initialization error","body":"<p>I had the same issue but with Java 8 as well as Java 11. I tried passing this VM argument and it worked for me:</p>\n<p>-Doracle.jdbc.javaNetNio=false</p>\n<p>Or, we can also set it as properties if creating an OracleDataSource:</p>\n<pre><code>OracleDataSource oracleDataSource = new OracleDataSource();\noracleDataSource.setURL(jdbcUrl);\noracleDataSource.setDriverType(dbDriver);\nProperties properties = new Properties();\n//... other properties if needed\nproperties.setProperty(&quot;oracle.jdbc.javaNetNio&quot;, &quot;false&quot;);\n    \noracleDataSource.setConnectionProperties(properties);\n</code></pre>\n<p>Or if creating a HikariDataSource, we can use it as:</p>\n<pre><code>HikariConfig poolConfig = new HikariConfig();\npoolConfig.setJdbcUrl(jdbcUrl);\npoolConfig.setDriverClassName(jdbcDriver);  \n//...  other properties if needed\npoolConfig.addDataSourceProperty(&quot;oracle.jdbc.javaNetNio&quot;, &quot;false&quot;);\n</code></pre>\n"}],"owner":{"account_id":2806364,"reputation":405,"user_id":2413527,"accept_rate":38,"display_name":"orion_kid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5954,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69360612,"answer_count":1,"score":0,"last_activity_date":1700689433,"creation_date":1632309058,"question_id":69283032,"body_markdown":"Getting this on startup in my JRE 11. No-one else in the team seems to get it. It does resolve if I compile and run in JDK 8. \r\n\r\n    HikariPool-1 - Exception during pool initialization\r\n    \r\n    java.nio.BufferOverflowException: null\r\n    \tat java.base/java.nio.HeapByteBuffer.put(HeapByteBuffer.java:221)\r\n    \tat java.base/java.nio.ByteBuffer.put(ByteBuffer.java:978)\r\n    \tat oracle.net.ano.AnoCommNIO.d(Unknown Source\r\n\r\netc\r\n\r\n    2021-09-22 12:13:23.280  WARN [amp-optimizer-services,,] 29760 --- [-172.28.233.166] o.s.b.a.jdbc.DataSourceHealthIndicator   : DataSource health check failed\r\n    \r\n    com.zaxxer.hikari.pool.HikariPool$PoolInitializationException: Failed to initialize pool: null\r\n    \tat com.zaxxer.hikari.pool.HikariPool.throwPoolInitializationException(HikariPool.java:595)\r\n    \tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:581)\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115)","title":"Getting a Hikari Pool Initialization error","body":"<p>Getting this on startup in my JRE 11. No-one else in the team seems to get it. It does resolve if I compile and run in JDK 8.</p>\n<pre><code>HikariPool-1 - Exception during pool initialization\n\njava.nio.BufferOverflowException: null\n    at java.base/java.nio.HeapByteBuffer.put(HeapByteBuffer.java:221)\n    at java.base/java.nio.ByteBuffer.put(ByteBuffer.java:978)\n    at oracle.net.ano.AnoCommNIO.d(Unknown Source\n</code></pre>\n<p>etc</p>\n<pre><code>2021-09-22 12:13:23.280  WARN [amp-optimizer-services,,] 29760 --- [-172.28.233.166] o.s.b.a.jdbc.DataSourceHealthIndicator   : DataSource health check failed\n\ncom.zaxxer.hikari.pool.HikariPool$PoolInitializationException: Failed to initialize pool: null\n    at com.zaxxer.hikari.pool.HikariPool.throwPoolInitializationException(HikariPool.java:595)\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:581)\nat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:115)\n</code></pre>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":42065,"reputation":53627,"user_id":122428,"display_name":"jitter"},"down_vote_count":0,"up_vote_count":299,"is_accepted":false,"score":299,"last_activity_date":1559629611,"creation_date":1258898375,"answer_id":1778779,"question_id":1778744,"body_markdown":"This should work\r\n\r\n    import static org.mockito.ArgumentMatchers.any;\r\n    import static org.mockito.Mockito.verify;\r\n\r\n    verify(bar).DoStuff(any(Foo[].class));","title":"Using Mockito&#39;s generic &quot;any()&quot; method","body":"<p>This should work</p>\n\n<pre><code>import static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.verify;\n\nverify(bar).DoStuff(any(Foo[].class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"down_vote_count":0,"up_vote_count":149,"is_accepted":true,"score":149,"last_activity_date":1660900532,"creation_date":1434529199,"answer_id":30886011,"question_id":1778744,"body_markdown":"Since Java 8 you can use the argument-less `any` method and the type argument will get inferred by the compiler:\r\n\r\n    verify(bar).doStuff(any());\r\n\r\n---\r\n\r\n### Explanation\r\n\r\nThe new thing in Java 8 is that the [*target type*][1] of an expression will be used to infer type parameters of its sub-expressions. Before Java 8 only arguments to methods where used for type parameter inference (most of the time).\r\n\r\nIn this case the parameter type of `doStuff` will be the target type for `any()`, and the return value type of `any()` will get chosen to match that argument type.\r\n\r\nThis mechanism was added mainly to be able to compile lambda expressions, but it improves type inferences generally.\r\n\r\n---\r\n\r\n### Primitive types\r\n\r\nThis doesn&#39;t work with primitive types, unfortunately:\r\n\r\n    public interface IBar {\r\n        void doPrimitiveStuff(int i);\r\n    }\r\n\r\n    verify(bar).doPrimitiveStuff(any()); // Compiles but throws NullPointerException\r\n    verify(bar).doPrimitiveStuff(anyInt()); // This is what you have to do instead\r\n\r\nThe problem is that the compiler will infer `Integer` as the return value type of `any()`. Mockito will not be aware of this (due to type erasure) and return the default value for reference types, which is `null`. The runtime will try to unbox the null return value by calling the `intValue` method on it before passing it to `doStuff`, and the exception gets thrown.\r\n\r\n[1]: https://dev.java/learn/type-inference#target-types\r\n","title":"Using Mockito&#39;s generic &quot;any()&quot; method","body":"<p>Since Java 8 you can use the argument-less <code>any</code> method and the type argument will get inferred by the compiler:</p>\n<pre><code>verify(bar).doStuff(any());\n</code></pre>\n<hr />\n<h3>Explanation</h3>\n<p>The new thing in Java 8 is that the <a href=\"https://dev.java/learn/type-inference#target-types\" rel=\"noreferrer\"><em>target type</em></a> of an expression will be used to infer type parameters of its sub-expressions. Before Java 8 only arguments to methods where used for type parameter inference (most of the time).</p>\n<p>In this case the parameter type of <code>doStuff</code> will be the target type for <code>any()</code>, and the return value type of <code>any()</code> will get chosen to match that argument type.</p>\n<p>This mechanism was added mainly to be able to compile lambda expressions, but it improves type inferences generally.</p>\n<hr />\n<h3>Primitive types</h3>\n<p>This doesn't work with primitive types, unfortunately:</p>\n<pre><code>public interface IBar {\n    void doPrimitiveStuff(int i);\n}\n\nverify(bar).doPrimitiveStuff(any()); // Compiles but throws NullPointerException\nverify(bar).doPrimitiveStuff(anyInt()); // This is what you have to do instead\n</code></pre>\n<p>The problem is that the compiler will infer <code>Integer</code> as the return value type of <code>any()</code>. Mockito will not be aware of this (due to type erasure) and return the default value for reference types, which is <code>null</code>. The runtime will try to unbox the null return value by calling the <code>intValue</code> method on it before passing it to <code>doStuff</code>, and the exception gets thrown.</p>\n"},{"tags":[],"owner":{"account_id":193540,"reputation":587,"user_id":435336,"accept_rate":89,"display_name":"thilko"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1441022418,"creation_date":1441022418,"answer_id":32310756,"question_id":1778744,"body_markdown":"You can use `Mockito.isA()` for that:\r\n\r\n    import static org.mockito.Matchers.isA;\r\n    import static org.mockito.Mockito.verify;\r\n\r\n    verify(bar).doStuff(isA(Foo[].class));\r\n\r\nhttp://site.mockito.org/mockito/docs/current/org/mockito/Matchers.html#isA(java.lang.Class)","title":"Using Mockito&#39;s generic &quot;any()&quot; method","body":"<p>You can use <code>Mockito.isA()</code> for that:</p>\n\n<pre><code>import static org.mockito.Matchers.isA;\nimport static org.mockito.Mockito.verify;\n\nverify(bar).doStuff(isA(Foo[].class));\n</code></pre>\n\n<p><a href=\"http://site.mockito.org/mockito/docs/current/org/mockito/Matchers.html#isA(java.lang.Class)\" rel=\"noreferrer\">http://site.mockito.org/mockito/docs/current/org/mockito/Matchers.html#isA(java.lang.Class)</a></p>\n"},{"tags":[],"owner":{"account_id":2535057,"reputation":25845,"user_id":2202415,"display_name":"Maciej Kowalski"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1569484986,"creation_date":1487334715,"answer_id":42298070,"question_id":1778744,"body_markdown":"As I needed to use this feature for my latest project (at one point we updated from 1.10.19), just to keep the users (that are already using the **mockito-core version 2.1.0 or greater**) up to date, the static methods from the above answers should be taken from `ArgumentMatchers` class:\r\n\r\n    import static org.mockito.ArgumentMatchers.isA;\r\n    import static org.mockito.ArgumentMatchers.any;\r\n\r\nPlease keep this in mind if you are planning to keep your Mockito artefacts up to date as possibly starting from version 3, this class may no longer exist:\r\n\r\nAs per 2.1.0 and above, Javadoc of org.mockito.Matchers states:\r\n\r\n&gt; Use `org.mockito.ArgumentMatchers`. This class is now deprecated in order to\r\n&gt; avoid a name clash with Hamcrest  * &lt;code&gt;org.hamcrest.Matchers&lt;/code&gt;\r\n&gt; class. This class will likely be removed in version 3.0.\r\n\r\n\r\nI have written a little article on [mockito wildcards][1] if you&#39;re up for further reading.\r\n\r\n\r\n  [1]: https://www.sourceartists.com/blog/unit-testing/mockito-wildcards/3","title":"Using Mockito&#39;s generic &quot;any()&quot; method","body":"<p>As I needed to use this feature for my latest project (at one point we updated from 1.10.19), just to keep the users (that are already using the <strong>mockito-core version 2.1.0 or greater</strong>) up to date, the static methods from the above answers should be taken from <code>ArgumentMatchers</code> class:</p>\n\n<pre><code>import static org.mockito.ArgumentMatchers.isA;\nimport static org.mockito.ArgumentMatchers.any;\n</code></pre>\n\n<p>Please keep this in mind if you are planning to keep your Mockito artefacts up to date as possibly starting from version 3, this class may no longer exist:</p>\n\n<p>As per 2.1.0 and above, Javadoc of org.mockito.Matchers states:</p>\n\n<blockquote>\n  <p>Use <code>org.mockito.ArgumentMatchers</code>. This class is now deprecated in order to\n  avoid a name clash with Hamcrest  * <code>org.hamcrest.Matchers</code>\n  class. This class will likely be removed in version 3.0.</p>\n</blockquote>\n\n<p>I have written a little article on <a href=\"https://www.sourceartists.com/blog/unit-testing/mockito-wildcards/3\" rel=\"noreferrer\">mockito wildcards</a> if you're up for further reading.</p>\n"},{"tags":[],"owner":{"account_id":5383151,"reputation":59,"user_id":4287880,"display_name":"Andrea Falco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700689315,"creation_date":1700689315,"answer_id":77533232,"question_id":1778744,"body_markdown":"In the recent version of Mockito you could use any(Foo.class)","title":"Using Mockito&#39;s generic &quot;any()&quot; method","body":"<p>In the recent version of Mockito you could use any(Foo.class)</p>\n"}],"owner":{"account_id":6636,"reputation":224522,"user_id":11236,"accept_rate":76,"display_name":"ripper234"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":419250,"favorite_count":0,"down_vote_count":0,"up_vote_count":233,"accepted_answer_id":30886011,"answer_count":5,"score":233,"last_activity_date":1700689315,"creation_date":1258897800,"question_id":1778744,"body_markdown":"I have an interface with a method that expects an array of `Foo`:\r\n\r\n    public interface IBar {\r\n      void doStuff(Foo[] arr);\r\n    }\r\n\r\nI am mocking this interface using Mockito, and I&#39;d like to assert that `doStuff()` is called, but I don&#39;t want to validate what argument are passed - &quot;don&#39;t care&quot;.\r\n\r\nHow do I write the following code using `any()`, the generic method, instead of `anyObject()`?\r\n\r\n    IBar bar = mock(IBar.class);\r\n    ...\r\n    verify(bar).doStuff((Foo[]) anyObject());\r\n","title":"Using Mockito&#39;s generic &quot;any()&quot; method","body":"<p>I have an interface with a method that expects an array of <code>Foo</code>:</p>\n\n<pre><code>public interface IBar {\n  void doStuff(Foo[] arr);\n}\n</code></pre>\n\n<p>I am mocking this interface using Mockito, and I'd like to assert that <code>doStuff()</code> is called, but I don't want to validate what argument are passed - \"don't care\".</p>\n\n<p>How do I write the following code using <code>any()</code>, the generic method, instead of <code>anyObject()</code>?</p>\n\n<pre><code>IBar bar = mock(IBar.class);\n...\nverify(bar).doStuff((Foo[]) anyObject());\n</code></pre>\n"},{"tags":["java","spring-boot","unit-testing","spring-webflux","openapi"],"answers":[{"tags":[],"owner":{"account_id":12787588,"reputation":192,"user_id":9253292,"display_name":"Artsiom the Brave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700688829,"creation_date":1700688829,"answer_id":77533200,"question_id":64183696,"body_markdown":"UPD: sorry, I&#39;ve just noticed that you want to validate on client side. I don&#39;t have such use case and my answer is about server-side, but you can have a look.\r\n\r\n--- \r\nYou can try this library: https://github.com/cdimascio/openapi-spring-webflux-validator\r\n\r\nHere is brief example in kotlin\r\n\r\n```kotlin\r\nval validator = Validate.configure(\r\n    openApiSwaggerPath = &quot;http://your-swagger-addr&quot;,\r\n)\r\n\r\ndata class YourRequestBody(...)\r\n                                                   \r\nfun handle(request: ServerRequest) =\r\n    validator.request(request)\r\n        .withBody&lt;YourRequestBody&gt; { requestBody -&gt;\r\n            // process request...\r\n            // return Mono&lt;ServerResponse&gt;\r\n        }\r\n```\r\n\r\nIn my case I&#39;m serving swagger-ui from the same service using spring boot 3.1.5. I had to manually specify dependencies to resolve some conflicts. Here is my gradle configuration. \r\n\r\n```groovy\r\ndependencies {\r\n    //...\r\n    implementation(&#39;org.springdoc:springdoc-openapi-starter-webflux-ui:2.2.0&#39;)\r\n    // validator has not been updated since 2022. It uses atlassian validator from 2021, which is incompatible\r\n    // with new swagger-models from webflux-ui.\r\n    implementation(&#39;io.github.cdimascio:openapi-spring-webflux-validator:4.2.0&#39;)\r\n    // Manually setting version of atlassian validator works for now.\r\n    implementation(&quot;com.atlassian.oai:swagger-request-validator-core:2.39.0&quot;)\r\n    /...\r\n}\r\n\r\n```","title":"Spring WebFlux Validate OpenAPI Spec Against request","body":"<p>UPD: sorry, I've just noticed that you want to validate on client side. I don't have such use case and my answer is about server-side, but you can have a look.</p>\n<hr />\n<p>You can try this library: <a href=\"https://github.com/cdimascio/openapi-spring-webflux-validator\" rel=\"nofollow noreferrer\">https://github.com/cdimascio/openapi-spring-webflux-validator</a></p>\n<p>Here is brief example in kotlin</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val validator = Validate.configure(\n    openApiSwaggerPath = &quot;http://your-swagger-addr&quot;,\n)\n\ndata class YourRequestBody(...)\n                                                   \nfun handle(request: ServerRequest) =\n    validator.request(request)\n        .withBody&lt;YourRequestBody&gt; { requestBody -&gt;\n            // process request...\n            // return Mono&lt;ServerResponse&gt;\n        }\n</code></pre>\n<p>In my case I'm serving swagger-ui from the same service using spring boot 3.1.5. I had to manually specify dependencies to resolve some conflicts. Here is my gradle configuration.</p>\n<pre><code>dependencies {\n    //...\n    implementation('org.springdoc:springdoc-openapi-starter-webflux-ui:2.2.0')\n    // validator has not been updated since 2022. It uses atlassian validator from 2021, which is incompatible\n    // with new swagger-models from webflux-ui.\n    implementation('io.github.cdimascio:openapi-spring-webflux-validator:4.2.0')\n    // Manually setting version of atlassian validator works for now.\n    implementation(&quot;com.atlassian.oai:swagger-request-validator-core:2.39.0&quot;)\n    /...\n}\n\n</code></pre>\n"}],"owner":{"account_id":8545504,"reputation":195,"user_id":6404182,"accept_rate":25,"display_name":"Abhi Nandan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1700688829,"creation_date":1601724420,"question_id":64183696,"body_markdown":"I am trying to validate if OpenAPI specification matches the implementation in Spring Boot Reactive Microservice (*WebClient*). I bumped into this library [swagger-request-validator][1], however, it does not have any implementation for the WebClient (*the one provided as under web client uses Rest Template*). Is there any open-source library that can check API spec against implementation? I am trying to make a call to the service that will run against the actual implementation, and at the same time will validate if the request/response matches the OpenAPI specification.\r\n\r\n\r\n  [1]: https://bitbucket.org/atlassian/swagger-request-validator/src/master/","title":"Spring WebFlux Validate OpenAPI Spec Against request","body":"<p>I am trying to validate if OpenAPI specification matches the implementation in Spring Boot Reactive Microservice (<em>WebClient</em>). I bumped into this library <a href=\"https://bitbucket.org/atlassian/swagger-request-validator/src/master/\" rel=\"nofollow noreferrer\">swagger-request-validator</a>, however, it does not have any implementation for the WebClient (<em>the one provided as under web client uses Rest Template</em>). Is there any open-source library that can check API spec against implementation? I am trying to make a call to the service that will run against the actual implementation, and at the same time will validate if the request/response matches the OpenAPI specification.</p>\n"},{"tags":["java","architecture","backend"],"comments":[{"owner":{"account_id":21591205,"reputation":256,"user_id":15920786,"display_name":"easleyfixed"},"score":0,"creation_date":1700675764,"post_id":77532181,"comment_id":136684871,"body_markdown":"Too many edits, but for the record until a mod gets around to it, this is Java question.","body":"Too many edits, but for the record until a mod gets around to it, this is Java question."}],"answers":[{"tags":[],"owner":{"account_id":51881,"reputation":38016,"user_id":155020,"accept_rate":80,"display_name":"chubbsondubs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700688102,"creation_date":1700678948,"answer_id":77532453,"question_id":77532181,"body_markdown":"There&#39;s no wrong or right architecture to do this.  It just depends on your requirements and what your software is supposed to do.  Obviously from the 2 choices you described there are pros and cons to each model.  Here is what I see those being:\r\n\r\nPersist at Each Step Model:\r\n\r\n*Pros*\r\n\r\n - Strict control over the process for the server\r\n - If the user refreshes the page nothing is lost\r\n - The user can resume the flow at a later date\r\n - Enables easier troubleshooting user problems with flow.\r\n\r\n*Cons*\r\n\r\n - Could create a lot of trash or abandoned records in the DB, will require clean up of those situations\r\n - More work involved to persist each step\r\n - Changing the flow would mean more rework of the backend\r\n - too much control exerted by the server could create unnecessary coupling\r\n\r\nPersist At the End Model\r\n\r\n*Pros*\r\n\r\n - Minimal work to validate at each step\r\n - Only completed records are kept in the DB\r\n - Changes in the front end flow don&#39;t have to affect the backend (or maybe less of an effect)\r\n\r\n*Cons*\r\n\r\n - Front end will loose the flow if the user refreshes the page (local storage)\r\n - Won&#39;t be able to resume a flow some point later\r\n - Some other option to troubleshoot user flow issues.\r\n - Control of the overall process may be too loose\r\n\r\nHow the client fits into this is going to impact these two solutions.  Is this a SPA-style frontend or server side rendering.  So the answer to the question is going to depend on not just the technology involved on the server, but could have implications for the client as well.\r\n\r\nThe *pros* and *cons* of each solution can be mitigated with other solutions being introduced.  For example, a clean up procedure on the backend or staging tables to hold the users entries before they finish the wizard flow, use of local storage in the browser to temporarily hold onto flows that were abandoned by the user - no backend clean up needed, or Google analytics style tracking on the front end for troubleshooting UX issues.  To some degree each solution can be made palatable by introducing other solutions to dampen the *cons*.\r\n\r\nSo it sometimes comes down to which is going to involve more supporting solutions to make up for the issues.  If it&#39;s a lot of them then maybe the other way is better for you.  Maybe you can tolerate some *cons*, or other *pros* are more important to you.\r\n\r\nI would add though that storing the state in the server memory is something you want to avoid.  Keeping the server stateless should be the goal.  Of course if you kept the state in something like Redis or an external cache that would fine, but it&#39;s a more complex architecture.  But you definitely don&#39;t want it stored in server memory.  That is one design that is definitely inferior.\r\n\r\nHopefully this has given you some ideas of *pros* and *cons* of your own.","title":"What is the correct way to create multi-step forms on the server side?","body":"<p>There's no wrong or right architecture to do this.  It just depends on your requirements and what your software is supposed to do.  Obviously from the 2 choices you described there are pros and cons to each model.  Here is what I see those being:</p>\n<p>Persist at Each Step Model:</p>\n<p><em>Pros</em></p>\n<ul>\n<li>Strict control over the process for the server</li>\n<li>If the user refreshes the page nothing is lost</li>\n<li>The user can resume the flow at a later date</li>\n<li>Enables easier troubleshooting user problems with flow.</li>\n</ul>\n<p><em>Cons</em></p>\n<ul>\n<li>Could create a lot of trash or abandoned records in the DB, will require clean up of those situations</li>\n<li>More work involved to persist each step</li>\n<li>Changing the flow would mean more rework of the backend</li>\n<li>too much control exerted by the server could create unnecessary coupling</li>\n</ul>\n<p>Persist At the End Model</p>\n<p><em>Pros</em></p>\n<ul>\n<li>Minimal work to validate at each step</li>\n<li>Only completed records are kept in the DB</li>\n<li>Changes in the front end flow don't have to affect the backend (or maybe less of an effect)</li>\n</ul>\n<p><em>Cons</em></p>\n<ul>\n<li>Front end will loose the flow if the user refreshes the page (local storage)</li>\n<li>Won't be able to resume a flow some point later</li>\n<li>Some other option to troubleshoot user flow issues.</li>\n<li>Control of the overall process may be too loose</li>\n</ul>\n<p>How the client fits into this is going to impact these two solutions.  Is this a SPA-style frontend or server side rendering.  So the answer to the question is going to depend on not just the technology involved on the server, but could have implications for the client as well.</p>\n<p>The <em>pros</em> and <em>cons</em> of each solution can be mitigated with other solutions being introduced.  For example, a clean up procedure on the backend or staging tables to hold the users entries before they finish the wizard flow, use of local storage in the browser to temporarily hold onto flows that were abandoned by the user - no backend clean up needed, or Google analytics style tracking on the front end for troubleshooting UX issues.  To some degree each solution can be made palatable by introducing other solutions to dampen the <em>cons</em>.</p>\n<p>So it sometimes comes down to which is going to involve more supporting solutions to make up for the issues.  If it's a lot of them then maybe the other way is better for you.  Maybe you can tolerate some <em>cons</em>, or other <em>pros</em> are more important to you.</p>\n<p>I would add though that storing the state in the server memory is something you want to avoid.  Keeping the server stateless should be the goal.  Of course if you kept the state in something like Redis or an external cache that would fine, but it's a more complex architecture.  But you definitely don't want it stored in server memory.  That is one design that is definitely inferior.</p>\n<p>Hopefully this has given you some ideas of <em>pros</em> and <em>cons</em> of your own.</p>\n"}],"owner":{"account_id":24052324,"reputation":13,"user_id":18030640,"display_name":"Eugene Nail"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1700680713,"accepted_answer_id":77532453,"answer_count":1,"score":-2,"last_activity_date":1700688102,"creation_date":1700675604,"question_id":77532181,"body_markdown":"I have an Application entity that includes other entities. In pseudo code that is not specific to a particular programming language, it would be described like this:\r\n```\r\npublic class Application {\r\n\tpublic Client client = null;\r\n\tpublic Address address address = null;\r\n\tpublic House house house = null;\r\n\tpublic float price = 0;\r\n\tpublic boolean hasMortgage = false;\r\n}\r\n```\r\nThe validation of each entity is a separate step and is performed by the server, not the client\r\n\r\n**I see two options and want to know which one is used on real projects.**\r\n\r\na) Each individual step:\r\n\r\n\t1. User enters entity data\r\n\t2. On the server the entity is validated in the controller of this entity\r\n\t3. A record of the entity is created in the database\r\n\t4. The id of the created record is returned to the user\r\n\r\nWhen all steps are completed, the ApplicationController creates the Application entity, assigns the existing Address, House entities by their id and saves the Application entity record to the database.\r\n\r\nb) At each individual step:\r\n\r\n\t1. The user enters the entity data\r\n\t2. On the server, the entity is validated in the controller of this entity\r\n\t3. The user receives a response &quot;Yes, you can go to the next step&quot;.\r\n\r\nWhen all steps are passed, the ApplicationController creates the Application entity, creates the Address, House entities, assigns them to the Application entity, and only then saves records about all entities into the database.","title":"What is the correct way to create multi-step forms on the server side?","body":"<p>I have an Application entity that includes other entities. In pseudo code that is not specific to a particular programming language, it would be described like this:</p>\n<pre><code>public class Application {\n    public Client client = null;\n    public Address address address = null;\n    public House house house = null;\n    public float price = 0;\n    public boolean hasMortgage = false;\n}\n</code></pre>\n<p>The validation of each entity is a separate step and is performed by the server, not the client</p>\n<p><strong>I see two options and want to know which one is used on real projects.</strong></p>\n<p>a) Each individual step:</p>\n<pre><code>1. User enters entity data\n2. On the server the entity is validated in the controller of this entity\n3. A record of the entity is created in the database\n4. The id of the created record is returned to the user\n</code></pre>\n<p>When all steps are completed, the ApplicationController creates the Application entity, assigns the existing Address, House entities by their id and saves the Application entity record to the database.</p>\n<p>b) At each individual step:</p>\n<pre><code>1. The user enters the entity data\n2. On the server, the entity is validated in the controller of this entity\n3. The user receives a response &quot;Yes, you can go to the next step&quot;.\n</code></pre>\n<p>When all steps are passed, the ApplicationController creates the Application entity, creates the Address, House entities, assigns them to the Application entity, and only then saves records about all entities into the database.</p>\n"},{"tags":["java","spring-boot","maven","jboss","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1700640268,"post_id":77524845,"comment_id":136678117,"body_markdown":"Those are `WARN` tagged and there are multiple. So we can assume, that this is not a fatal error.","body":"Those are <code>WARN</code> tagged and there are multiple. So we can assume, that this is not a fatal error."},{"owner":{"account_id":4430906,"reputation":3990,"user_id":3608089,"display_name":"ollitietavainen"},"score":0,"creation_date":1700648141,"post_id":77524845,"comment_id":136679452,"body_markdown":"Does this answer your question? [JBoss EAP 7.0 java.lang.IllegalStateException: Unknown tag! pos=3 poolCount = 20 WARN](https://stackoverflow.com/questions/64790738/jboss-eap-7-0-java-lang-illegalstateexception-unknown-tag-pos-3-poolcount-20)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/64790738/jboss-eap-7-0-java-lang-illegalstateexception-unknown-tag-pos-3-poolcount-20\">JBoss EAP 7.0 java.lang.IllegalStateException: Unknown tag! pos=3 poolCount = 20 WARN</a>"},{"owner":{"account_id":29374007,"reputation":19,"user_id":22505996,"display_name":"BelaOxmyx"},"score":0,"creation_date":1700671480,"post_id":77524845,"comment_id":136684079,"body_markdown":"@cfrick  After the WARN messages come the ERROR messages, starting with:  11:07:49,137 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC000001: Failed to start service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springframework.http.server.reactive.ServletServerHttpResponse$ResponseAsyncListener&quot;.WeldInstantiator: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springframework.http.server.reactive.ServletServerHttpResponse$ResponseAsyncListener&quot;.WeldInstantiator: Failed to start service","body":"@cfrick  After the WARN messages come the ERROR messages, starting with:  11:07:49,137 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-3) MSC000001: Failed to start service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springfr&zwnj;&#8203;amework.http.server.&zwnj;&#8203;reactive.ServletServ&zwnj;&#8203;erHttpResponse$Respo&zwnj;&#8203;nseAsyncListener&quot;.We&zwnj;&#8203;ldInstantiator: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springfr&zwnj;&#8203;amework.http.server.&zwnj;&#8203;reactive.ServletServ&zwnj;&#8203;erHttpResponse$Respo&zwnj;&#8203;nseAsyncListener&quot;.We&zwnj;&#8203;ldInstantiator: Failed to start service"},{"owner":{"account_id":29374007,"reputation":19,"user_id":22505996,"display_name":"BelaOxmyx"},"score":0,"creation_date":1700671875,"post_id":77524845,"comment_id":136684164,"body_markdown":"@ollitietavainen I have a second JBoss instance setup with your fix.  I get these of errors on that instance:  11:10:15,847 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC000001: Failed to start service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener&quot;.WeldInstantiator: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener&quot;.WeldInstantiator: Failed to start service","body":"@ollitietavainen I have a second JBoss instance setup with your fix.  I get these of errors on that instance:  11:10:15,847 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC000001: Failed to start service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springfr&zwnj;&#8203;amework.http.server.&zwnj;&#8203;reactive.ServletServ&zwnj;&#8203;erHttpRequest$Reques&zwnj;&#8203;tAsyncListener&quot;.Weld&zwnj;&#8203;Instantiator: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springfr&zwnj;&#8203;amework.http.server.&zwnj;&#8203;reactive.ServletServ&zwnj;&#8203;erHttpRequest$Reques&zwnj;&#8203;tAsyncListener&quot;.Weld&zwnj;&#8203;Instantiator: Failed to start service"},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1700673948,"post_id":77524845,"comment_id":136684561,"body_markdown":"Please edit the question - comments are not suitable to improve it","body":"Please edit the question - comments are not suitable to improve it"},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1700681093,"post_id":77524845,"comment_id":136685738,"body_markdown":"Is this all? Not stacktrace?","body":"Is this all? Not stacktrace?"},{"owner":{"account_id":29374007,"reputation":19,"user_id":22505996,"display_name":"BelaOxmyx"},"score":0,"creation_date":1700687874,"post_id":77524845,"comment_id":136686717,"body_markdown":"I have just now uploaded both referenced stack traces, in their entirety, into the aforementioned repo.  See link above.","body":"I have just now uploaded both referenced stack traces, in their entirety, into the aforementioned repo.  See link above."},{"owner":{"account_id":4430906,"reputation":3990,"user_id":3608089,"display_name":"ollitietavainen"},"score":0,"creation_date":1700722325,"post_id":77524845,"comment_id":136689737,"body_markdown":"I&#39;d hope there would be some more log explaining the root cause of _why_ the service failed to start","body":"I&#39;d hope there would be some more log explaining the root cause of <i>why</i> the service failed to start"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1700826467,"post_id":77524845,"comment_id":136703599,"body_markdown":"Why are you using this outdated technology?","body":"Why are you using this outdated technology?"},{"owner":{"account_id":29374007,"reputation":19,"user_id":22505996,"display_name":"BelaOxmyx"},"score":0,"creation_date":1701093837,"post_id":77524845,"comment_id":136728604,"body_markdown":"@ollitietavainen, if you know a way I can expose more log output to get at the root cause, I&#39;m all ears.","body":"@ollitietavainen, if you know a way I can expose more log output to get at the root cause, I&#39;m all ears."},{"owner":{"account_id":29374007,"reputation":19,"user_id":22505996,"display_name":"BelaOxmyx"},"score":0,"creation_date":1701093894,"post_id":77524845,"comment_id":136728621,"body_markdown":"@SimonMartinelli, our client is the government, and our application is a relatively small tool that&#39;s part of a larger system maintained by another team, and as such we piggyback on their runtime environment.","body":"@SimonMartinelli, our client is the government, and our application is a relatively small tool that&#39;s part of a larger system maintained by another team, and as such we piggyback on their runtime environment."}],"owner":{"account_id":29374007,"reputation":19,"user_id":22505996,"display_name":"BelaOxmyx"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700688101,"creation_date":1700588107,"question_id":77524845,"body_markdown":"I&#39;m attempting without success to deploy a basic Spring Boot/Vaadin 14 Greeter application to JBoss 7.1 under Java 8.\r\n\r\nSteps to recreate.\r\n\r\nClone [this branch][1] of my GitHub repo locally.\r\n\r\nOptionally, skip next step to use my included war file.\r\n\r\nNavigate to vdn-hiya project’s folder, and type “mvn clean package -Pproduction” to build war file.\r\n\r\nObserve war file successfully built in project’s “target” folder.\r\n \r\nRun “standalone.bat” in JBoss bin folder to start Jboss EAP 7.1.\r\n \r\nOpen JBoss Admin Console.  Mine is at localhost:9990/console/App.html#home\r\n \r\nOpen Deployments tab\r\n \r\nClick “Add”\r\n \r\nClick “Next”\r\n \r\nClick “Choose File”\r\n \r\nSelect vdn-hiya.war file from project’s target folder, and click “Open”.\r\n \r\nClick “Next”\r\n \r\nLeave “Enable selected, and click “Finish”.\r\n \r\nObserve errors in deploy dialog, and in JBoss console output, which begin with several &quot;Unknown tag!&quot; errors.  Does any of this seem familiar?\r\n\r\nBelow is the first error I&#39;m seeing when deploying to my unaltered Jboss instance.  See both complete stack traces, including the one occurring in my JBoss instance altered as recommended in other Q&amp;A&#39;s in the [aforementioned repo][1].\r\n\r\n11:40:43,180 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC000001: Failed to start service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener&quot;.WeldInstantiator: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener&quot;.WeldInstantiator: Failed to start service\r\n        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1978)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:750)\r\n\r\n\r\n\r\n  [1]: https://github.com/NCIDevRonR/vaadin-issues/tree/deploy-to-jboss-71-fails","title":"Need Help Deploying Vaadin 14 app to JBoss EAP 7.1 on Java 8","body":"<p>I'm attempting without success to deploy a basic Spring Boot/Vaadin 14 Greeter application to JBoss 7.1 under Java 8.</p>\n<p>Steps to recreate.</p>\n<p>Clone <a href=\"https://github.com/NCIDevRonR/vaadin-issues/tree/deploy-to-jboss-71-fails\" rel=\"nofollow noreferrer\">this branch</a> of my GitHub repo locally.</p>\n<p>Optionally, skip next step to use my included war file.</p>\n<p>Navigate to vdn-hiya project’s folder, and type “mvn clean package -Pproduction” to build war file.</p>\n<p>Observe war file successfully built in project’s “target” folder.</p>\n<p>Run “standalone.bat” in JBoss bin folder to start Jboss EAP 7.1.</p>\n<p>Open JBoss Admin Console.  Mine is at localhost:9990/console/App.html#home</p>\n<p>Open Deployments tab</p>\n<p>Click “Add”</p>\n<p>Click “Next”</p>\n<p>Click “Choose File”</p>\n<p>Select vdn-hiya.war file from project’s target folder, and click “Open”.</p>\n<p>Click “Next”</p>\n<p>Leave “Enable selected, and click “Finish”.</p>\n<p>Observe errors in deploy dialog, and in JBoss console output, which begin with several &quot;Unknown tag!&quot; errors.  Does any of this seem familiar?</p>\n<p>Below is the first error I'm seeing when deploying to my unaltered Jboss instance.  See both complete stack traces, including the one occurring in my JBoss instance altered as recommended in other Q&amp;A's in the <a href=\"https://github.com/NCIDevRonR/vaadin-issues/tree/deploy-to-jboss-71-fails\" rel=\"nofollow noreferrer\">aforementioned repo</a>.</p>\n<p>11:40:43,180 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC000001: Failed to start service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener&quot;.WeldInstantiator: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;vdn-hiya.war&quot;.component.&quot;org.springframework.http.server.reactive.ServletServerHttpRequest$RequestAsyncListener&quot;.WeldInstantiator: Failed to start service\nat org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1978)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:750)</p>\n"},{"tags":["java","maven","graphql-java","graphql-java-generator"],"comments":[{"owner":{"account_id":6378382,"reputation":2978,"user_id":4948640,"accept_rate":58,"display_name":"suraj bahl"},"score":0,"creation_date":1698857775,"post_id":77391151,"comment_id":136458991,"body_markdown":"https://stackoverflow.com/users/5056068/etienne-sf","body":"<a href=\"https://stackoverflow.com/users/5056068/etienne-sf\">stackoverflow.com/users/5056068/etienne-sf</a>"}],"answers":[{"tags":[],"owner":{"account_id":6536916,"reputation":166,"user_id":5056068,"display_name":"etienne-sf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700687511,"creation_date":1700687511,"answer_id":77533119,"question_id":77391151,"body_markdown":"The issue is due to `&lt;type&gt;pom&lt;/type&gt;`\r\n\r\nThis is due to an error in the doc: this changed in an early version of the plugin, but this change has not be reported into the doc. \r\n\r\nThe ` graphql-java-server-runtime` dependency should be written this way:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n         &lt;groupId&gt;com.graphql-java-generator&lt;/groupId&gt;\r\n            &lt;artifactId&gt;graphql-java-server-runtime&lt;/artifactId&gt;\r\n            &lt;version&gt;${graphql-maven-plugin.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n``` \r\n\r\nThe doc is now corrected.\r\n\r\nEtienne","title":"GraphQL maven plugin java generator giving compile time error","body":"<p>The issue is due to <code>&lt;type&gt;pom&lt;/type&gt;</code></p>\n<p>This is due to an error in the doc: this changed in an early version of the plugin, but this change has not be reported into the doc.</p>\n<p>The <code> graphql-java-server-runtime</code> dependency should be written this way:</p>\n<pre><code>        &lt;dependency&gt;\n         &lt;groupId&gt;com.graphql-java-generator&lt;/groupId&gt;\n            &lt;artifactId&gt;graphql-java-server-runtime&lt;/artifactId&gt;\n            &lt;version&gt;${graphql-maven-plugin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The doc is now corrected.</p>\n<p>Etienne</p>\n"}],"owner":{"account_id":6378382,"reputation":2978,"user_id":4948640,"accept_rate":58,"display_name":"suraj bahl"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77533119,"answer_count":1,"score":1,"last_activity_date":1700687511,"creation_date":1698691430,"question_id":77391151,"body_markdown":"Trying to generate server side code from graphQL schema using following plugin but generated code is having a compile time error &quot;**package com.graphql_java_generator.server.util does not exist**&quot;. There is no jar added with this package.\r\n\r\nhttps://github.com/graphql-java-generator/GraphQL-Forum-Maven-Tutorial-server\r\n\r\nHere is my POM.xml created as per above tutorial\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.1.5&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;GraphqlCodeGen&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;GraphqlCodeGen&lt;/name&gt;\r\n    \t&lt;description&gt;GraphqlCodeGen&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t\t&lt;graphql-maven-plugin.version&gt;2.3.1&lt;/graphql-maven-plugin.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-graphql&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.graphql-java-generator&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;graphql-java-server-runtime&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${graphql-maven-plugin.version}&lt;/version&gt;\r\n    \t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.graphql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-graphql-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.graphql-java-generator&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;graphql-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${graphql-maven-plugin.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;generateServerCode&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;!-- Let&#39;s configure the GraphQL Gradle Plugin: --&gt;\r\n    \t\t\t\t\t&lt;!-- All available parameters are described here: --&gt;\r\n    \t\t\t\t\t&lt;!-- https://graphql-maven-plugin-project.graphql-java-generator.com/graphql-maven-plugin/generateServerCode-mojo.html --&gt;\r\n    \t\t\t\t\t&lt;packageName&gt;org.forum.server.graphql&lt;/packageName&gt;\r\n    \t\t\t\t\t&lt;scanBasePackages&gt;org.forum.server.impl, org.forum.server.jpa&lt;/scanBasePackages&gt;\r\n    \t\t\t\t\t&lt;customScalars&gt;\r\n    \t\t\t\t\t\t&lt;customScalar&gt;\r\n    \t\t\t\t\t\t\t&lt;graphQLTypeName&gt;Date&lt;/graphQLTypeName&gt;\r\n    \t\t\t\t\t\t\t&lt;javaType&gt;java.util.Date&lt;/javaType&gt;\r\n    \t\t\t\t\t\t\t&lt;graphQLScalarTypeStaticField&gt;com.graphql_java_generator.customscalars.GraphQLScalarTypeDate.Date\r\n    \t\t\t\t\t\t\t&lt;/graphQLScalarTypeStaticField&gt;\r\n    \t\t\t\t\t\t&lt;/customScalar&gt;\r\n    \t\t\t\t\t&lt;/customScalars&gt;\r\n    \t\t\t\t\t&lt;!-- The parameters below change the 1.x default behavior. They are set to respect the behavior of the future 2.x versions --&gt;\r\n    \t\t\t\t\t&lt;copyRuntimeSources&gt;false&lt;/copyRuntimeSources&gt;\r\n    \t\t\t\t\t&lt;generateBatchLoaderEnvironment&gt;true&lt;/generateBatchLoaderEnvironment&gt;\r\n    \t\t\t\t\t&lt;separateUtilityClasses&gt;true&lt;/separateUtilityClasses&gt;\r\n    \t\t\t\t\t&lt;skipGenerationIfSchemaHasNotChanged&gt;true&lt;/skipGenerationIfSchemaHasNotChanged&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nhttps://stackoverflow.com/users/5056068/etienne-sf tagging you for your kind attention","title":"GraphQL maven plugin java generator giving compile time error","body":"<p>Trying to generate server side code from graphQL schema using following plugin but generated code is having a compile time error &quot;<strong>package com.graphql_java_generator.server.util does not exist</strong>&quot;. There is no jar added with this package.</p>\n<p><a href=\"https://github.com/graphql-java-generator/GraphQL-Forum-Maven-Tutorial-server\" rel=\"nofollow noreferrer\">https://github.com/graphql-java-generator/GraphQL-Forum-Maven-Tutorial-server</a></p>\n<p>Here is my POM.xml created as per above tutorial</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;GraphqlCodeGen&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;GraphqlCodeGen&lt;/name&gt;\n    &lt;description&gt;GraphqlCodeGen&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;graphql-maven-plugin.version&gt;2.3.1&lt;/graphql-maven-plugin.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-graphql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.graphql-java-generator&lt;/groupId&gt;\n            &lt;artifactId&gt;graphql-java-server-runtime&lt;/artifactId&gt;\n            &lt;version&gt;${graphql-maven-plugin.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.graphql&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-graphql-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.graphql-java-generator&lt;/groupId&gt;\n                &lt;artifactId&gt;graphql-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${graphql-maven-plugin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generateServerCode&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;!-- Let's configure the GraphQL Gradle Plugin: --&gt;\n                    &lt;!-- All available parameters are described here: --&gt;\n                    &lt;!-- https://graphql-maven-plugin-project.graphql-java-generator.com/graphql-maven-plugin/generateServerCode-mojo.html --&gt;\n                    &lt;packageName&gt;org.forum.server.graphql&lt;/packageName&gt;\n                    &lt;scanBasePackages&gt;org.forum.server.impl, org.forum.server.jpa&lt;/scanBasePackages&gt;\n                    &lt;customScalars&gt;\n                        &lt;customScalar&gt;\n                            &lt;graphQLTypeName&gt;Date&lt;/graphQLTypeName&gt;\n                            &lt;javaType&gt;java.util.Date&lt;/javaType&gt;\n                            &lt;graphQLScalarTypeStaticField&gt;com.graphql_java_generator.customscalars.GraphQLScalarTypeDate.Date\n                            &lt;/graphQLScalarTypeStaticField&gt;\n                        &lt;/customScalar&gt;\n                    &lt;/customScalars&gt;\n                    &lt;!-- The parameters below change the 1.x default behavior. They are set to respect the behavior of the future 2.x versions --&gt;\n                    &lt;copyRuntimeSources&gt;false&lt;/copyRuntimeSources&gt;\n                    &lt;generateBatchLoaderEnvironment&gt;true&lt;/generateBatchLoaderEnvironment&gt;\n                    &lt;separateUtilityClasses&gt;true&lt;/separateUtilityClasses&gt;\n                    &lt;skipGenerationIfSchemaHasNotChanged&gt;true&lt;/skipGenerationIfSchemaHasNotChanged&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><a href=\"https://stackoverflow.com/users/5056068/etienne-sf\">https://stackoverflow.com/users/5056068/etienne-sf</a> tagging you for your kind attention</p>\n"},{"tags":["java","lambda"],"comments":[{"owner":{"account_id":2254750,"reputation":11,"user_id":1986168,"display_name":"Avinash"},"score":0,"creation_date":1699675655,"post_id":77436436,"comment_id":136564855,"body_markdown":"any response on this would be highly appreciated.","body":"any response on this would be highly appreciated."},{"owner":{"account_id":31622,"reputation":120341,"user_id":86989,"display_name":"newacct"},"score":0,"creation_date":1700689107,"post_id":77436436,"comment_id":136686886,"body_markdown":"It works for me","body":"It works for me"}],"owner":{"account_id":2254750,"reputation":11,"user_id":1986168,"display_name":"Avinash"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700687194,"creation_date":1699343949,"question_id":77436436,"body_markdown":"I am trying some lambda code snippets to learn. When I pass method reference the code works fine , but as soon as I pass lambda equivalent it throws error.  \r\n\r\nI tried to sort a list using comparing of Comparator class passing lambda which throws error. The same code works fine when i pass method reference. \r\nTransation::getValue works fine but transaction-&gt; transaction.getValue() doesn&#39;t work.\r\n\r\n    public class Trader {\r\n        private final String name;\r\n        private final String city;\r\n    \r\n        public Trader(String n, String c) {\r\n            this.name = n;\r\n            this.city = c;\r\n        }\r\n    \r\n        public String getName() {\r\n            return this.name;\r\n        }\r\n    \r\n        public String getCity() {\r\n            return this.city;\r\n        }\r\n    \r\n        public String toString() {\r\n            return &quot;Trader:&quot; + this.name + &quot; in &quot; + this.city;\r\n        }\r\n    }\r\n\r\n    public class Transaction {\r\n    \r\n        private final Trader trader;\r\n        private final int year;\r\n        private final int value;\r\n    \r\n        public Transaction(Trader trader, int year, int value) {\r\n            this.trader = trader;\r\n            this.year = year;\r\n            this.value = value;\r\n        }\r\n    \r\n        public Trader getTrader() {\r\n            return this.trader;\r\n        }\r\n    \r\n        public int getYear() {\r\n            return this.year;\r\n        }\r\n    \r\n        public int getValue() {\r\n            return this.value;\r\n        }\r\n    \r\n        public String toString() {\r\n            return &quot;{&quot; + this.trader + &quot;, &quot; + &quot;year: &quot; + this.year + &quot;, &quot; + &quot;value:&quot; + this.value + &quot;}&quot;;\r\n        }\r\n    }\r\n\r\n    import java.util.Arrays;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class TraderRunner {\r\n    \r\n        public static void main(String[] args) {\r\n            Trader raoul = new Trader(&quot;Raoul&quot;, &quot;Cambridge&quot;);\r\n            Trader mario = new Trader(&quot;Mario&quot;,&quot;Milan&quot;);\r\n            Trader alan = new Trader(&quot;Alan&quot;,&quot;Cambridge&quot;);\r\n            Trader brian = new Trader(&quot;Brian&quot;,&quot;Cambridge&quot;);\r\n    \r\n            List&lt;Transaction&gt; transactions = Arrays.asList(\r\n                    new Transaction(brian, 2011, 300),\r\n                    new Transaction(raoul, 2012, 1000),\r\n                    new Transaction(raoul, 2011, 400),\r\n                    new Transaction(mario, 2012, 710),\r\n                    new Transaction(mario, 2012, 700),\r\n                    new Transaction(alan, 2012, 950)\r\n                    );\r\n    \r\n            List&lt;Transaction&gt; list = transactions.stream()\r\n                    .filter(a -&gt; a.getYear()== 2012).\r\n                    sorted(Comparator.comparing(Transaction::getValue)).\r\n                    collect(Collectors.toList());\r\n            System.out.println(list);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"Lambda Equivalent of Method reference throws error","body":"<p>I am trying some lambda code snippets to learn. When I pass method reference the code works fine , but as soon as I pass lambda equivalent it throws error.</p>\n<p>I tried to sort a list using comparing of Comparator class passing lambda which throws error. The same code works fine when i pass method reference.\nTransation::getValue works fine but transaction-&gt; transaction.getValue() doesn't work.</p>\n<pre><code>public class Trader {\n    private final String name;\n    private final String city;\n\n    public Trader(String n, String c) {\n        this.name = n;\n        this.city = c;\n    }\n\n    public String getName() {\n        return this.name;\n    }\n\n    public String getCity() {\n        return this.city;\n    }\n\n    public String toString() {\n        return &quot;Trader:&quot; + this.name + &quot; in &quot; + this.city;\n    }\n}\n\npublic class Transaction {\n\n    private final Trader trader;\n    private final int year;\n    private final int value;\n\n    public Transaction(Trader trader, int year, int value) {\n        this.trader = trader;\n        this.year = year;\n        this.value = value;\n    }\n\n    public Trader getTrader() {\n        return this.trader;\n    }\n\n    public int getYear() {\n        return this.year;\n    }\n\n    public int getValue() {\n        return this.value;\n    }\n\n    public String toString() {\n        return &quot;{&quot; + this.trader + &quot;, &quot; + &quot;year: &quot; + this.year + &quot;, &quot; + &quot;value:&quot; + this.value + &quot;}&quot;;\n    }\n}\n\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class TraderRunner {\n\n    public static void main(String[] args) {\n        Trader raoul = new Trader(&quot;Raoul&quot;, &quot;Cambridge&quot;);\n        Trader mario = new Trader(&quot;Mario&quot;,&quot;Milan&quot;);\n        Trader alan = new Trader(&quot;Alan&quot;,&quot;Cambridge&quot;);\n        Trader brian = new Trader(&quot;Brian&quot;,&quot;Cambridge&quot;);\n\n        List&lt;Transaction&gt; transactions = Arrays.asList(\n                new Transaction(brian, 2011, 300),\n                new Transaction(raoul, 2012, 1000),\n                new Transaction(raoul, 2011, 400),\n                new Transaction(mario, 2012, 710),\n                new Transaction(mario, 2012, 700),\n                new Transaction(alan, 2012, 950)\n                );\n\n        List&lt;Transaction&gt; list = transactions.stream()\n                .filter(a -&gt; a.getYear()== 2012).\n                sorted(Comparator.comparing(Transaction::getValue)).\n                collect(Collectors.toList());\n        System.out.println(list);\n    }\n}\n</code></pre>\n"},{"tags":["java","git","jenkins","jenkins-plugins","ubuntu-16.04"],"answers":[{"tags":[],"owner":{"account_id":4867485,"reputation":443,"user_id":3925204,"accept_rate":20,"display_name":"zwelz"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1522089962,"creation_date":1522089320,"answer_id":49498369,"question_id":48342338,"body_markdown":"Looks like you may have an issue with using secret credentials on a virtual slave. \r\n\r\nFrom [Here][1]:\r\n\r\n&gt; ... best path forward is to create a git client authentication token class which uses AuthenticationTokens.convert() to map specific credentials (username/password or ssh private key) to the git client, then that git client authentication token would be sent over the wire from the master to the agent, rather than sending the Secret over the wire.\r\n\r\nMaybe try using a [credential plugin][2]? \r\n\r\n*&lt;sub&gt;&lt;sub&gt;Also might I suggest removing your email from the snippet&lt;/sub&gt;&lt;/sub&gt;*\r\n\r\n  [1]: https://issues.jenkins-ci.org/browse/JENKINS-48200\r\n  [2]: https://github.com/jenkinsci/credentials-binding-plugin","title":"jenkins master connection fails with java.nio.channels.ClosedChannelException","body":"<p>Looks like you may have an issue with using secret credentials on a virtual slave. </p>\n\n<p>From <a href=\"https://issues.jenkins-ci.org/browse/JENKINS-48200\" rel=\"nofollow noreferrer\">Here</a>:</p>\n\n<blockquote>\n  <p>... best path forward is to create a git client authentication token class which uses AuthenticationTokens.convert() to map specific credentials (username/password or ssh private key) to the git client, then that git client authentication token would be sent over the wire from the master to the agent, rather than sending the Secret over the wire.</p>\n</blockquote>\n\n<p>Maybe try using a <a href=\"https://github.com/jenkinsci/credentials-binding-plugin\" rel=\"nofollow noreferrer\">credential plugin</a>? </p>\n\n<p><em><sub><sub>Also might I suggest removing your email from the snippet</sub></sub></em></p>\n"},{"tags":[],"owner":{"account_id":1176281,"reputation":2258,"user_id":1152240,"accept_rate":89,"display_name":"Arcadien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537257529,"creation_date":1537257529,"answer_id":52381680,"question_id":48342338,"body_markdown":"It may be due to a memory error, as stated in [this bug][1]\r\n\r\n\r\n  [1]: https://issues.jenkins-ci.org/browse/JENKINS-50132","title":"jenkins master connection fails with java.nio.channels.ClosedChannelException","body":"<p>It may be due to a memory error, as stated in <a href=\"https://issues.jenkins-ci.org/browse/JENKINS-50132\" rel=\"nofollow noreferrer\">this bug</a></p>\n"}],"owner":{"account_id":10570152,"reputation":51,"user_id":7787223,"display_name":"Mosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8621,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1700686905,"creation_date":1516368888,"question_id":48342338,"body_markdown":"I have a Job which runs every hours, from a Master(Jenkins on Ubuntu) to Windows 10 machine as slave, 30-40 % of the time job just fails with following error. I need some help where to start looking or what is a possible solution for this.\r\n\r\nBoth Master and Slave have same Java version &quot;1.8.0_151&quot;\r\n\r\n       FATAL: java.nio.channels.ClosedChannelException\r\n       java.nio.channels.ClosedChannelException\r\n       Also:   hudson.remoting.Channel$CallSiteStackTrace: Remote call to JNLP4-connect connection from p578c1cb8.dip0.t-ipconnect.de/67.110.18.114:55940\r\n        at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1693)\r\n    \t\tat hudson.remoting.Request.call(Request.java:192)\r\n    \t\tat hudson.remoting.Channel.call(Channel.java:907)\r\n    \t\tat hudson.FilePath.act(FilePath.java:986)\r\n    \t\tat hudson.FilePath.act(FilePath.java:975)\r\n    \t\tat hudson.FilePath.mkdirs(FilePath.java:1158)\r\n    \t\tat hudson.model.AbstractProject.checkout(AbstractProject.java:1200)\r\n    \t\tat hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:574)\r\n    \t\tat jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:86)\r\n    \t\tat hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:499)\r\n    \t\tat hudson.model.Run.execute(Run.java:1724)\r\n    \t\tat hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)\r\n    \t\tat hudson.model.ResourceController.execute(ResourceController.java:97)\r\n    \t\tat hudson.model.Executor.run(Executor.java:421)\r\n    Caused: hudson.remoting.RequestAbortedException\r\n    \tat hudson.remoting.Request.abort(Request.java:329)\r\n    \tat hudson.remoting.Channel.terminate(Channel.java:992)\r\n    \tat org.jenkinsci.remoting.protocol.impl.ChannelApplicationLayer.onReadClosed(ChannelApplicationLayer.java:208)\r\n    \tat org.jenkinsci.remoting.protocol.ApplicationLayer.onRecvClosed(ApplicationLayer.java:222)\r\n    \tat org.jenkinsci.remoting.protocol.ProtocolStack$Ptr.onRecvClosed(ProtocolStack.java:832)\r\n    \tat org.jenkinsci.remoting.protocol.FilterLayer.onRecvClosed(FilterLayer.java:287)\r\n    \tat org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.onRecvClosed(SSLEngineFilterLayer.java:181)\r\n    \tat org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.switchToNoSecure(SSLEngineFilterLayer.java:283)\r\n    \tat org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.processWrite(SSLEngineFilterLayer.java:503)\r\n    \tat org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.processQueuedWrites(SSLEngineFilterLayer.java:248)\r\n    \tat org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.doSend(SSLEngineFilterLayer.java:200)\r\n    \tat org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.doCloseSend(SSLEngineFilterLayer.java:213)\r\n    \tat org.jenkinsci.remoting.protocol.ProtocolStack$Ptr.doCloseSend(ProtocolStack.java:800)\r\n    \tat org.jenkinsci.remoting.protocol.ApplicationLayer.doCloseWrite(ApplicationLayer.java:173)\r\n    \tat org.jenkinsci.remoting.protocol.impl.ChannelApplicationLayer$ByteBufferCommandTransport.closeWrite(ChannelApplicationLayer.java:311)\r\n    \tat hudson.remoting.Channel.close(Channel.java:1405)\r\n    \tat hudson.remoting.Channel.close(Channel.java:1358)\r\n    \tat hudson.slaves.SlaveComputer.closeChannel(SlaveComputer.java:737)\r\n    \tat hudson.slaves.SlaveComputer.access$800(SlaveComputer.java:96)\r\n    \tat hudson.slaves.SlaveComputer$3.run(SlaveComputer.java:655)\r\n    \tat jenkins.util.ContextResettingExecutorService$1.run(ContextResettingExecutorService.java:28)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    ERROR: Step ‘Publish Robot Framework test results’ failed: no workspace for T_REG #117\r\n    ERROR: Step ‘E-mail Notification’ failed: no workspace for T_REG #117\r\n    Email was triggered for: Failure - Any\r\n    Sending email for trigger: Failure - Any\r\n    ERROR: Error: No workspace found!\r\n    Sending email to: tw.aa@gmail.com\r\n    Finished: FAILURE","title":"jenkins master connection fails with java.nio.channels.ClosedChannelException","body":"<p>I have a Job which runs every hours, from a Master(Jenkins on Ubuntu) to Windows 10 machine as slave, 30-40 % of the time job just fails with following error. I need some help where to start looking or what is a possible solution for this.</p>\n<p>Both Master and Slave have same Java version &quot;1.8.0_151&quot;</p>\n<pre><code>   FATAL: java.nio.channels.ClosedChannelException\n   java.nio.channels.ClosedChannelException\n   Also:   hudson.remoting.Channel$CallSiteStackTrace: Remote call to JNLP4-connect connection from p578c1cb8.dip0.t-ipconnect.de/67.110.18.114:55940\n    at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1693)\n        at hudson.remoting.Request.call(Request.java:192)\n        at hudson.remoting.Channel.call(Channel.java:907)\n        at hudson.FilePath.act(FilePath.java:986)\n        at hudson.FilePath.act(FilePath.java:975)\n        at hudson.FilePath.mkdirs(FilePath.java:1158)\n        at hudson.model.AbstractProject.checkout(AbstractProject.java:1200)\n        at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:574)\n        at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:86)\n        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:499)\n        at hudson.model.Run.execute(Run.java:1724)\n        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)\n        at hudson.model.ResourceController.execute(ResourceController.java:97)\n        at hudson.model.Executor.run(Executor.java:421)\nCaused: hudson.remoting.RequestAbortedException\n    at hudson.remoting.Request.abort(Request.java:329)\n    at hudson.remoting.Channel.terminate(Channel.java:992)\n    at org.jenkinsci.remoting.protocol.impl.ChannelApplicationLayer.onReadClosed(ChannelApplicationLayer.java:208)\n    at org.jenkinsci.remoting.protocol.ApplicationLayer.onRecvClosed(ApplicationLayer.java:222)\n    at org.jenkinsci.remoting.protocol.ProtocolStack$Ptr.onRecvClosed(ProtocolStack.java:832)\n    at org.jenkinsci.remoting.protocol.FilterLayer.onRecvClosed(FilterLayer.java:287)\n    at org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.onRecvClosed(SSLEngineFilterLayer.java:181)\n    at org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.switchToNoSecure(SSLEngineFilterLayer.java:283)\n    at org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.processWrite(SSLEngineFilterLayer.java:503)\n    at org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.processQueuedWrites(SSLEngineFilterLayer.java:248)\n    at org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.doSend(SSLEngineFilterLayer.java:200)\n    at org.jenkinsci.remoting.protocol.impl.SSLEngineFilterLayer.doCloseSend(SSLEngineFilterLayer.java:213)\n    at org.jenkinsci.remoting.protocol.ProtocolStack$Ptr.doCloseSend(ProtocolStack.java:800)\n    at org.jenkinsci.remoting.protocol.ApplicationLayer.doCloseWrite(ApplicationLayer.java:173)\n    at org.jenkinsci.remoting.protocol.impl.ChannelApplicationLayer$ByteBufferCommandTransport.closeWrite(ChannelApplicationLayer.java:311)\n    at hudson.remoting.Channel.close(Channel.java:1405)\n    at hudson.remoting.Channel.close(Channel.java:1358)\n    at hudson.slaves.SlaveComputer.closeChannel(SlaveComputer.java:737)\n    at hudson.slaves.SlaveComputer.access$800(SlaveComputer.java:96)\n    at hudson.slaves.SlaveComputer$3.run(SlaveComputer.java:655)\n    at jenkins.util.ContextResettingExecutorService$1.run(ContextResettingExecutorService.java:28)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\nERROR: Step ‘Publish Robot Framework test results’ failed: no workspace for T_REG #117\nERROR: Step ‘E-mail Notification’ failed: no workspace for T_REG #117\nEmail was triggered for: Failure - Any\nSending email for trigger: Failure - Any\nERROR: Error: No workspace found!\nSending email to: tw.aa@gmail.com\nFinished: FAILURE\n</code></pre>\n"},{"tags":["java","reactjs","spring","spring-boot","spring-websocket"],"owner":{"account_id":29969718,"reputation":1,"user_id":22967377,"display_name":"Ds Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700686486,"creation_date":1700686486,"question_id":77533048,"body_markdown":"Iam using ReactJs as frontend and Spring Boot as backend\r\nusing stomp and sockJs\r\nevery time i connect to the socket cors policy is displayed\r\n\r\nthe error is the following :  \r\nAccess to XMLHttpRequest at &#39;&lt;http://localhost:5433/ws/info?t=1700638752589&gt;&#39; from origin &#39;&lt;http://localhost:3000&gt;&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.\r\n\r\nreact js frontend code :\r\n\r\n```\r\nimport React, { useState } from &#39;react&#39;\r\nimport SockJS from &#39;sockjs-client&#39;\r\nimport { over } from &#39;stompjs&#39;;\r\nimport Stomp from &#39;stompjs&#39;;\r\n\r\n\r\nvar myStompClient = null ;\r\n\r\nconst ChatRoom = () =&gt; {\r\n    //message details,connection details ..\r\n    const [userData,setUserDate] = useState({\r\n        username : &quot;&quot; ,\r\n        recievername: &quot;&quot; ,\r\n        connected : false,\r\n        message: &quot;&quot; \r\n    })\r\n\r\n    //hold all public chats\r\n    const [publicChats,setPublicChats] = useState([]);\r\n\r\n    //to set a private message the simplest way is to make a map the username as akey and then this userkey will hold list of messages \r\n    const[privateChats,setPrivateChats] = useState(new Map);\r\n\r\n    //this will hold wehter a chatroom or particular user\r\n    const[tab,setTab] = useState(&quot;CHATROOM&quot;)\r\n\r\n    const handleUserName = (event) =&gt;{\r\n        const {value} = event.target;\r\n        setUserDate({...userData,&quot;username&quot; : value})\r\n\r\n    }\r\n\r\n    const registerUser = () =&gt;{\r\n        // subscribe to all the channel and connect to the websocket\r\n       \r\n        let mySock  = new SockJS(&#39;http://localhost:5433/ws&#39;);;\r\n        \r\n        myStompClient = Stomp.over(mySock);\r\n\r\n\r\n        \r\n        console.log(myStompClient);\r\n        \r\n        myStompClient.connect({},onConnected,onError);\r\n\r\n\r\n    }\r\n\r\n    const onConnected = () =&gt;{\r\n        console.log(&quot;enter connected function&quot;)\r\n        setUserDate({...userData,&quot;connected&quot;:true});\r\n        myStompClient.subscribe(&#39;/chatroom/public&#39; , onPublicMessageRecieved); //3rd is for the callback function\r\n        myStompClient.subscribe(&#39;/user/&#39; +userData.username+&#39;/private&#39;,onPrivateMessage);\r\n        userJoin();\r\n    }\r\n\r\nconst userJoin =() =&gt; {\r\n    let chatMessage = {\r\nsenderName : userData.username,\r\nstatus:&#39;JOIN&#39;\r\n\r\n    };\r\n    myStompClient.send(&#39;/app/message&#39;,{},JSON.stringify(chatMessage));\r\n\r\n}\r\n\r\n\r\n    const  onPublicMessageRecieved = (payload) =&gt;{\r\nlet payloadData = JSON.parse(payload.body);\r\nswitch(payloadData.status){\r\n    case &quot;JOIN&quot;:\r\n\r\n    if(!privateChats.get(payloadData.senderName)){\r\n        privateChats.set(payloadData.senderName , []);\r\n        setPrivateChats(new Map(privateChats));\r\n    }\r\n\r\n        break;\r\n    case &quot;MESSAGE&quot;: publicChats.push(payloadData);\r\n    setPublicChats([...publicChats]);\r\n        break;\r\n}\r\n\r\n    }\r\n\r\n\r\n    const onError = (error) =&gt;{\r\n        console.log(&quot;failed&quot;);\r\n        console.log(error);\r\n    }\r\n\r\n\r\n\r\n    const onPrivateMessage = (payload) =&gt;{\r\n        let payloadData = JSON.parse(payload.body);\r\n        if(privateChats.get(payloadData.senderName)){\r\n            privateChats.get(payloadData.senderName).push(payloadData);\r\n            setPrivateChats(new Map(privateChats));\r\n        }else{\r\n            let list = [] ;\r\n            list.push(payloadData);\r\n            privateChats.set(payloadData.senderName,list);\r\n            setPrivateChats(new Map(privateChats));\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    //functions for buttons\r\n    const handleValue = (event) =&gt;{\r\n        const {value,name} = event.target;\r\n        setUserDate({...userData,[name] : value});\r\n\r\n    }\r\n\r\n\r\n    const sendPublicMessage = () =&gt;{\r\n        if(myStompClient){\r\n            let chatMessage = {\r\nsenderName:userData.username,\r\nmessage:userData.message,\r\nstatus : &#39;Message&#39;\r\n\r\n            };\r\n            myStompClient.send(&#39;/app/message&#39;,{},JSON.stringify(chatMessage));\r\n            setUserDate({...userData,&quot;message&quot;: &quot;&quot;});\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    const sendPrivateMessage = () =&gt;{\r\n        if(myStompClient){\r\n            let chatMessage = {\r\nsenderName:userData.username,\r\nrecievername : tab,\r\nmessage:userData.message,\r\nstatus : &#39;Message&#39;\r\n\r\n            };\r\nif(userData.username !== tab){\r\n    privateChats.get(tab).push(chatMessage);\r\n    setPrivateChats(new Map(privateChats));\r\n} \r\n\r\n            myStompClient.send(&#39;/app/private-message&#39;,{},JSON.stringify(chatMessage));\r\n            setUserDate({...userData,&quot;message&quot;: &quot;&quot;});\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    &lt;div className=&#39;container&#39;&gt;\r\n        {/* if connected then show the chat else */}\r\n        {userData.connected?\r\n        &lt;div className=&#39;chat-box&#39;&gt;\r\n            &lt;div className=&#39;member-list&#39;&gt;\r\n                &lt;ul&gt;\r\n                    &lt;li onClick={()=&gt;{setTab(&quot;CHATROOM&quot;)} }className={`member ${tab===&quot;CHATROOM&quot; &amp;&amp; &quot;ACTIVE&quot;}`} &gt;Chatroom&lt;/li&gt;\r\n                    {[...privateChats.keys()].map(\r\n                    (name,index) =&gt; (\r\n                        &lt;li onClick={()=&gt;{setTab(name)}} className={`member ${tab===name &amp;&amp; &quot;ACTIVE&quot;}`}&gt;{name}&lt;/li&gt;\r\n\r\n                    ))}\r\n                &lt;/ul&gt;\r\n   {tab === &quot;chatroom&quot; &amp;&amp;  &lt;div className=&#39;chatContent&#39;&gt;  \r\n\r\n   &lt;ul className=&#39;chat-messages&#39;&gt;\r\n                        {publicChats.map((chat,index) =&gt;(\r\n                            &lt;li className=&#39;message&#39; key={index}&gt;\r\n                                    {chat.senderName !== userData.username &amp;&amp; &lt;div className=&#39;avatar&#39;&gt;{chat.senderName}&lt;/div&gt;}\r\n                                    &lt;div className=&#39;message-data&#39;&gt;{chat.message}&lt;/div&gt;\r\n                                    {chat.senderName === userData.username &amp;&amp; &lt;div className=&#39;avatar self&#39;&gt;{chat.senderName}&lt;/div&gt;}\r\n                                 &lt;/li&gt;\r\n\r\n                        ))} \r\n\r\n&lt;/ul&gt;     \r\n\r\n\r\n&lt;div className=&#39;send-message&#39;&gt;\r\n    &lt;input type=&#39;text&#39; className=&#39;input-message&#39; name=&#39;message&#39; placeholder=&#39;enter public message&#39; value={userData.message} onChange={handleValue}&gt;&lt;/input&gt;\r\n    &lt;button type=&#39;button&#39; className=&#39;send button&#39; onClick={sendPublicMessage}&gt;send&lt;/button&gt;\r\n\r\n&lt;/div&gt;\r\n                        \r\n     &lt;/div&gt;}\r\n\r\n                            {/* if it is not a chatroom */}\r\n                            \r\n     {tab !== &quot;chatroom&quot; &amp;&amp;  &lt;div className=&#39;chatContent&#39;&gt;  \r\n     &lt;ul className=&#39;chat-messages&#39;&gt;\r\n                        {[...privateChats.get(tab)].map((chat,index) =&gt;(\r\n                            &lt;li className=&#39;message&#39; key={index}&gt;\r\n                                    {chat.senderName !== userData.username &amp;&amp; &lt;div className=&#39;avatar&#39;&gt;{chat.senderName}&lt;/div&gt;}\r\n                                    &lt;div className=&#39;message-data&#39;&gt;{chat.message}&lt;/div&gt;\r\n                                    {chat.senderName === userData.username &amp;&amp; &lt;div className=&#39;avatar self&#39;&gt;{chat.senderName}&lt;/div&gt;}\r\n                                 &lt;/li&gt;\r\n\r\n                        ))} \r\n\r\n                        &lt;/ul&gt;\r\n\r\n                        &lt;div className=&#39;send-message&#39;&gt;\r\n    &lt;input type=&#39;text&#39; className=&#39;input-message&#39; name=&#39;message&#39; placeholder={`enter private message for ${tab}`} value={userData.message} onChange={handleValue}&gt;&lt;/input&gt;\r\n    &lt;button type=&#39;button&#39; className=&#39;send button&#39; onClick={sendPrivateMessage}&gt;send&lt;/button&gt;\r\n\r\n&lt;/div&gt;\r\n                      \r\n                        \r\n     &lt;/div&gt;}\r\n\r\n\r\n\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;    \r\n        :\r\n        &lt;div className=&#39;register&#39;&gt;\r\n            &lt;input  id=&#39;username&#39; name=&#39;username&#39; placeholder=&#39;enter the user name&#39; value={userData.username} onChange={handleValue}/&gt;\r\n            &lt;button type=&#39;button&#39; onClick={registerUser}&gt;connect&lt;/button&gt;\r\n        &lt;/div&gt;\r\n    \r\n    }\r\n\r\n    &lt;/div&gt;\r\n  )\r\n}\r\n\r\nexport default ChatRoom\r\n```\r\n\r\nbackend spring boot websocket code: \r\n\r\n```\r\npackage Configurations;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.messaging.simp.config.MessageBrokerRegistry;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\nimport org.springframework.web.socket.config.annotation.EnableWebSocket;\r\nimport org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;\r\nimport org.springframework.web.socket.config.annotation.StompEndpointRegistry;\r\nimport org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;\r\n\r\n\r\n\r\n@CrossOrigin(origins = &quot;*&quot;)\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class webSocketConfig implements WebSocketMessageBrokerConfigurer{\r\n\r\n\t\r\n\t\r\n\r\n\t@Override\r\n\tpublic  void registerStompEndpoints(StompEndpointRegistry registry) {\r\n\t\t \r\n\t\tregistry.addEndpoint(&quot;/ws&quot;).setAllowedOriginPatterns(&quot;*&quot;).setAllowedOrigins(&quot;http://localhost:3000&quot;).withSockJS(); //registers an endpoint ws and allows connections from any origin\r\n\t\t//The withSockJS() method enables SockJS fallback options for browsers that do not support WebSocket directly.\r\n\t\t//Clients will connect to the WebSocket server using this endpoint.\r\n\t\tSystem.out.println(&quot;entered the function1&quot;);\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t//register stomp endpoints\r\n\t\r\n\t\r\n\t//configure message broker\r\n\t//responsible for routing messages from one client to another.\r\n\t\r\n\t@Override\r\n\tpublic  void configureMessageBroker(MessageBrokerRegistry registry) {\r\n\t\t//prefix in which the user is sending the data to the server\r\n\t\tregistry.setApplicationDestinationPrefixes(&quot;/app&quot;); //messages sent from the client to the server should start with &quot;/app&quot;.// this method defines the prefix that clients should use when sending messages to the server.\r\n\t\tregistry.enableSimpleBroker(&quot;/chatroom&quot;,&quot;/user&quot;);//These prefixes represent the different topics or channels to which the server can send messages. //Messages sent to destinations starting with &quot;/chatroom&quot; will be sent to subscribers, and messages sent to destinations starting with &quot;/user&quot; will be routed to specific users.\r\n\t\tregistry.setUserDestinationPrefix(&quot;/user&quot;);//Messages sent to destinations starting with &quot;/user&quot; will be directed to individual users\r\n\t\t//This is the destination prefix for user-specific destinations. When the server sends a message to a destination that starts with &quot;/user&quot;, it indicates that the message is intended for an individual user.\r\n\t\t\r\n\t\r\n\t}\r\n\t\r\n\r\n\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n}\r\n```\r\n\r\nspring boot controller : \r\n\r\n```\r\npackage Controller;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.messaging.handler.annotation.MessageMapping;\r\nimport org.springframework.messaging.handler.annotation.Payload;\r\nimport org.springframework.messaging.handler.annotation.SendTo;\r\nimport org.springframework.messaging.simp.SimpMessagingTemplate;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport Model.MessageModel;\r\n\r\n\r\n\r\n@RestController\r\npublic class ChatRoomController {\r\n//create method which recieves the data to chatroom and sends the message to the chatRoom topic\r\n\r\n\t\r\n\t//we can create a dynamic topics with this\r\n\t@Autowired\r\n\tprivate SimpMessagingTemplate simpMessagingTemp;\r\n\t//his template simplifies sending messages to WebSocket destinations.\r\n\t\r\n\t\r\n\t//messages sent to the &quot;/app/message&quot; destination will be handled by the receivePublicMessage method.\r\n\t\r\n\t@MessageMapping(&quot;/message&quot;) //user must use /app/message since we declare //app to make user comunicate with server\r\n\t@SendTo(&quot;/chatroom/public&quot;) //using the chatroom topic i declared\r\n\t//This annotation specifies that the return value of the below mehtod  should be sent to the &quot;/chatroom/public\r\n\tprivate MessageModel recievePublicMessage(@Payload MessageModel messageModel) { //@Payload annotation indicates that the method parameter should be extracted from the payload of the message.\r\n\t\treturn messageModel;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\t@MessageMapping(&quot;/private-message&quot;)  //   /app/private-message\r\n\tprivate MessageModel recievePrivateMessage(@Payload MessageModel messageModel) {\r\n\t\t\r\n\t\t\r\n\t\t//to send to diffrenet topic\r\n\t\tsimpMessagingTemp.convertAndSendToUser(messageModel.getRecieverName() , &quot;/private&quot;, messageModel); //to /user/david/private\r\n\t\t// the first argument is the username of the receiver, the second argument is the destination (in this case, &quot;/private&quot;), and the third argument is the message to be sent.\r\n\t\t\r\n\t\treturn messageModel;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n//\tprocessing public and private messages. \r\n//\tPublic messages are broadcasted to the &quot;/chatroom/public&quot; topic, \r\n//\tand private messages are sent directly to the specified user using the &quot;/private&quot; topic. \r\n}\r\n```","title":"CORS POLICY Accesing springboot websocket from reactjs sockjs-clien","body":"<p>Iam using ReactJs as frontend and Spring Boot as backend\nusing stomp and sockJs\nevery time i connect to the socket cors policy is displayed</p>\n<p>the error is the following :<br />\nAccess to XMLHttpRequest at '<a href=\"http://localhost:5433/ws/info?t=1700638752589\" rel=\"nofollow noreferrer\">http://localhost:5433/ws/info?t=1700638752589</a>' from origin '<a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a>' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.</p>\n<p>react js frontend code :</p>\n<pre><code>import React, { useState } from 'react'\nimport SockJS from 'sockjs-client'\nimport { over } from 'stompjs';\nimport Stomp from 'stompjs';\n\n\nvar myStompClient = null ;\n\nconst ChatRoom = () =&gt; {\n    //message details,connection details ..\n    const [userData,setUserDate] = useState({\n        username : &quot;&quot; ,\n        recievername: &quot;&quot; ,\n        connected : false,\n        message: &quot;&quot; \n    })\n\n    //hold all public chats\n    const [publicChats,setPublicChats] = useState([]);\n\n    //to set a private message the simplest way is to make a map the username as akey and then this userkey will hold list of messages \n    const[privateChats,setPrivateChats] = useState(new Map);\n\n    //this will hold wehter a chatroom or particular user\n    const[tab,setTab] = useState(&quot;CHATROOM&quot;)\n\n    const handleUserName = (event) =&gt;{\n        const {value} = event.target;\n        setUserDate({...userData,&quot;username&quot; : value})\n\n    }\n\n    const registerUser = () =&gt;{\n        // subscribe to all the channel and connect to the websocket\n       \n        let mySock  = new SockJS('http://localhost:5433/ws');;\n        \n        myStompClient = Stomp.over(mySock);\n\n\n        \n        console.log(myStompClient);\n        \n        myStompClient.connect({},onConnected,onError);\n\n\n    }\n\n    const onConnected = () =&gt;{\n        console.log(&quot;enter connected function&quot;)\n        setUserDate({...userData,&quot;connected&quot;:true});\n        myStompClient.subscribe('/chatroom/public' , onPublicMessageRecieved); //3rd is for the callback function\n        myStompClient.subscribe('/user/' +userData.username+'/private',onPrivateMessage);\n        userJoin();\n    }\n\nconst userJoin =() =&gt; {\n    let chatMessage = {\nsenderName : userData.username,\nstatus:'JOIN'\n\n    };\n    myStompClient.send('/app/message',{},JSON.stringify(chatMessage));\n\n}\n\n\n    const  onPublicMessageRecieved = (payload) =&gt;{\nlet payloadData = JSON.parse(payload.body);\nswitch(payloadData.status){\n    case &quot;JOIN&quot;:\n\n    if(!privateChats.get(payloadData.senderName)){\n        privateChats.set(payloadData.senderName , []);\n        setPrivateChats(new Map(privateChats));\n    }\n\n        break;\n    case &quot;MESSAGE&quot;: publicChats.push(payloadData);\n    setPublicChats([...publicChats]);\n        break;\n}\n\n    }\n\n\n    const onError = (error) =&gt;{\n        console.log(&quot;failed&quot;);\n        console.log(error);\n    }\n\n\n\n    const onPrivateMessage = (payload) =&gt;{\n        let payloadData = JSON.parse(payload.body);\n        if(privateChats.get(payloadData.senderName)){\n            privateChats.get(payloadData.senderName).push(payloadData);\n            setPrivateChats(new Map(privateChats));\n        }else{\n            let list = [] ;\n            list.push(payloadData);\n            privateChats.set(payloadData.senderName,list);\n            setPrivateChats(new Map(privateChats));\n\n        }\n\n\n    }\n\n\n    //functions for buttons\n    const handleValue = (event) =&gt;{\n        const {value,name} = event.target;\n        setUserDate({...userData,[name] : value});\n\n    }\n\n\n    const sendPublicMessage = () =&gt;{\n        if(myStompClient){\n            let chatMessage = {\nsenderName:userData.username,\nmessage:userData.message,\nstatus : 'Message'\n\n            };\n            myStompClient.send('/app/message',{},JSON.stringify(chatMessage));\n            setUserDate({...userData,&quot;message&quot;: &quot;&quot;});\n        }\n\n    }\n\n\n\n    const sendPrivateMessage = () =&gt;{\n        if(myStompClient){\n            let chatMessage = {\nsenderName:userData.username,\nrecievername : tab,\nmessage:userData.message,\nstatus : 'Message'\n\n            };\nif(userData.username !== tab){\n    privateChats.get(tab).push(chatMessage);\n    setPrivateChats(new Map(privateChats));\n} \n\n            myStompClient.send('/app/private-message',{},JSON.stringify(chatMessage));\n            setUserDate({...userData,&quot;message&quot;: &quot;&quot;});\n        }\n\n    }\n\n\n\n\n\n\n\n\n  return (\n    &lt;div className='container'&gt;\n        {/* if connected then show the chat else */}\n        {userData.connected?\n        &lt;div className='chat-box'&gt;\n            &lt;div className='member-list'&gt;\n                &lt;ul&gt;\n                    &lt;li onClick={()=&gt;{setTab(&quot;CHATROOM&quot;)} }className={`member ${tab===&quot;CHATROOM&quot; &amp;&amp; &quot;ACTIVE&quot;}`} &gt;Chatroom&lt;/li&gt;\n                    {[...privateChats.keys()].map(\n                    (name,index) =&gt; (\n                        &lt;li onClick={()=&gt;{setTab(name)}} className={`member ${tab===name &amp;&amp; &quot;ACTIVE&quot;}`}&gt;{name}&lt;/li&gt;\n\n                    ))}\n                &lt;/ul&gt;\n   {tab === &quot;chatroom&quot; &amp;&amp;  &lt;div className='chatContent'&gt;  \n\n   &lt;ul className='chat-messages'&gt;\n                        {publicChats.map((chat,index) =&gt;(\n                            &lt;li className='message' key={index}&gt;\n                                    {chat.senderName !== userData.username &amp;&amp; &lt;div className='avatar'&gt;{chat.senderName}&lt;/div&gt;}\n                                    &lt;div className='message-data'&gt;{chat.message}&lt;/div&gt;\n                                    {chat.senderName === userData.username &amp;&amp; &lt;div className='avatar self'&gt;{chat.senderName}&lt;/div&gt;}\n                                 &lt;/li&gt;\n\n                        ))} \n\n&lt;/ul&gt;     \n\n\n&lt;div className='send-message'&gt;\n    &lt;input type='text' className='input-message' name='message' placeholder='enter public message' value={userData.message} onChange={handleValue}&gt;&lt;/input&gt;\n    &lt;button type='button' className='send button' onClick={sendPublicMessage}&gt;send&lt;/button&gt;\n\n&lt;/div&gt;\n                        \n     &lt;/div&gt;}\n\n                            {/* if it is not a chatroom */}\n                            \n     {tab !== &quot;chatroom&quot; &amp;&amp;  &lt;div className='chatContent'&gt;  \n     &lt;ul className='chat-messages'&gt;\n                        {[...privateChats.get(tab)].map((chat,index) =&gt;(\n                            &lt;li className='message' key={index}&gt;\n                                    {chat.senderName !== userData.username &amp;&amp; &lt;div className='avatar'&gt;{chat.senderName}&lt;/div&gt;}\n                                    &lt;div className='message-data'&gt;{chat.message}&lt;/div&gt;\n                                    {chat.senderName === userData.username &amp;&amp; &lt;div className='avatar self'&gt;{chat.senderName}&lt;/div&gt;}\n                                 &lt;/li&gt;\n\n                        ))} \n\n                        &lt;/ul&gt;\n\n                        &lt;div className='send-message'&gt;\n    &lt;input type='text' className='input-message' name='message' placeholder={`enter private message for ${tab}`} value={userData.message} onChange={handleValue}&gt;&lt;/input&gt;\n    &lt;button type='button' className='send button' onClick={sendPrivateMessage}&gt;send&lt;/button&gt;\n\n&lt;/div&gt;\n                      \n                        \n     &lt;/div&gt;}\n\n\n\n            &lt;/div&gt;\n        &lt;/div&gt;    \n        :\n        &lt;div className='register'&gt;\n            &lt;input  id='username' name='username' placeholder='enter the user name' value={userData.username} onChange={handleValue}/&gt;\n            &lt;button type='button' onClick={registerUser}&gt;connect&lt;/button&gt;\n        &lt;/div&gt;\n    \n    }\n\n    &lt;/div&gt;\n  )\n}\n\nexport default ChatRoom\n</code></pre>\n<p>backend spring boot websocket code:</p>\n<pre><code>package Configurations;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.messaging.simp.config.MessageBrokerRegistry;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\nimport org.springframework.web.socket.config.annotation.EnableWebSocket;\nimport org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;\nimport org.springframework.web.socket.config.annotation.StompEndpointRegistry;\nimport org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;\n\n\n\n@CrossOrigin(origins = &quot;*&quot;)\n@Configuration\n@EnableWebSocketMessageBroker\npublic class webSocketConfig implements WebSocketMessageBrokerConfigurer{\n\n    \n    \n\n    @Override\n    public  void registerStompEndpoints(StompEndpointRegistry registry) {\n         \n        registry.addEndpoint(&quot;/ws&quot;).setAllowedOriginPatterns(&quot;*&quot;).setAllowedOrigins(&quot;http://localhost:3000&quot;).withSockJS(); //registers an endpoint ws and allows connections from any origin\n        //The withSockJS() method enables SockJS fallback options for browsers that do not support WebSocket directly.\n        //Clients will connect to the WebSocket server using this endpoint.\n        System.out.println(&quot;entered the function1&quot;);\n    }\n    \n    \n    \n    \n    \n    //register stomp endpoints\n    \n    \n    //configure message broker\n    //responsible for routing messages from one client to another.\n    \n    @Override\n    public  void configureMessageBroker(MessageBrokerRegistry registry) {\n        //prefix in which the user is sending the data to the server\n        registry.setApplicationDestinationPrefixes(&quot;/app&quot;); //messages sent from the client to the server should start with &quot;/app&quot;.// this method defines the prefix that clients should use when sending messages to the server.\n        registry.enableSimpleBroker(&quot;/chatroom&quot;,&quot;/user&quot;);//These prefixes represent the different topics or channels to which the server can send messages. //Messages sent to destinations starting with &quot;/chatroom&quot; will be sent to subscribers, and messages sent to destinations starting with &quot;/user&quot; will be routed to specific users.\n        registry.setUserDestinationPrefix(&quot;/user&quot;);//Messages sent to destinations starting with &quot;/user&quot; will be directed to individual users\n        //This is the destination prefix for user-specific destinations. When the server sends a message to a destination that starts with &quot;/user&quot;, it indicates that the message is intended for an individual user.\n        \n    \n    }\n    \n\n\n    \n    \n    \n    \n    \n    \n    \n}\n</code></pre>\n<p>spring boot controller :</p>\n<pre><code>package Controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.messaging.handler.annotation.MessageMapping;\nimport org.springframework.messaging.handler.annotation.Payload;\nimport org.springframework.messaging.handler.annotation.SendTo;\nimport org.springframework.messaging.simp.SimpMessagingTemplate;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport Model.MessageModel;\n\n\n\n@RestController\npublic class ChatRoomController {\n//create method which recieves the data to chatroom and sends the message to the chatRoom topic\n\n    \n    //we can create a dynamic topics with this\n    @Autowired\n    private SimpMessagingTemplate simpMessagingTemp;\n    //his template simplifies sending messages to WebSocket destinations.\n    \n    \n    //messages sent to the &quot;/app/message&quot; destination will be handled by the receivePublicMessage method.\n    \n    @MessageMapping(&quot;/message&quot;) //user must use /app/message since we declare //app to make user comunicate with server\n    @SendTo(&quot;/chatroom/public&quot;) //using the chatroom topic i declared\n    //This annotation specifies that the return value of the below mehtod  should be sent to the &quot;/chatroom/public\n    private MessageModel recievePublicMessage(@Payload MessageModel messageModel) { //@Payload annotation indicates that the method parameter should be extracted from the payload of the message.\n        return messageModel;\n        \n    }\n    \n    \n    @MessageMapping(&quot;/private-message&quot;)  //   /app/private-message\n    private MessageModel recievePrivateMessage(@Payload MessageModel messageModel) {\n        \n        \n        //to send to diffrenet topic\n        simpMessagingTemp.convertAndSendToUser(messageModel.getRecieverName() , &quot;/private&quot;, messageModel); //to /user/david/private\n        // the first argument is the username of the receiver, the second argument is the destination (in this case, &quot;/private&quot;), and the third argument is the message to be sent.\n        \n        return messageModel;\n        \n    }\n    \n    \n//  processing public and private messages. \n//  Public messages are broadcasted to the &quot;/chatroom/public&quot; topic, \n//  and private messages are sent directly to the specified user using the &quot;/private&quot; topic. \n}\n</code></pre>\n"},{"tags":["java","maven","maven-3","artifactory"],"comments":[{"owner":{"account_id":8490813,"reputation":3810,"user_id":6367213,"display_name":"Janez Kuhar"},"score":1,"creation_date":1700687267,"post_id":77532955,"comment_id":136686625,"body_markdown":"Looks like a bug. Only happens with Maven versions earlier than 4.x when scope type is `import`.","body":"Looks like a bug. Only happens with Maven versions earlier than 4.x when scope type is <code>import</code>."},{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1700762883,"post_id":77532955,"comment_id":136696911,"body_markdown":"The usage spring-boot-starter-parent as a scope import is not really correct better `spring-boot-dependencies` instead... apart from that spring boot version 2.X is end of support (https://spring.io/projects/spring-boot#support) and most important dependencyManagement does NOT support version ranges (for Maven 4 yes) but not for Maven 3.X apart from the general bad idea to use version ranges...","body":"The usage spring-boot-starter-parent as a scope import is not really correct better <code>spring-boot-dependencies</code> instead... apart from that spring boot version 2.X is end of support (<a href=\"https://spring.io/projects/spring-boot#support\" rel=\"nofollow noreferrer\">spring.io/projects/spring-boot#support</a>) and most important dependencyManagement does NOT support version ranges (for Maven 4 yes) but not for Maven 3.X apart from the general bad idea to use version ranges..."},{"owner":{"account_id":71353,"reputation":16394,"user_id":206466,"accept_rate":70,"display_name":"xenoterracide"},"score":0,"creation_date":1701096064,"post_id":77532955,"comment_id":136729109,"body_markdown":"@khmarbaise cute that you think I have some control over which version of spring boot we&#39;re on... thanks for the correction though. I missed the memo on `-dependencies` I guess.","body":"@khmarbaise cute that you think I have some control over which version of spring boot we&#39;re on... thanks for the correction though. I missed the memo on <code>-dependencies</code> I guess."},{"owner":{"account_id":71353,"reputation":16394,"user_id":206466,"accept_rate":70,"display_name":"xenoterracide"},"score":0,"creation_date":1701102460,"post_id":77532955,"comment_id":136730582,"body_markdown":"I closed as duplicate, but in case anyone needs a fix for gradle publishing https://docs.gradle.org/current/userguide/publishing_maven.html#publishing_maven:resolved_dependencies","body":"I closed as duplicate, but in case anyone needs a fix for gradle publishing <a href=\"https://docs.gradle.org/current/userguide/publishing_maven.html#publishing_maven:resolved_dependencies\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a>"}],"owner":{"account_id":71353,"reputation":16394,"user_id":206466,"accept_rate":70,"display_name":"xenoterracide"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1701094256,"answer_count":0,"score":0,"last_activity_date":1700685559,"creation_date":1700685559,"question_id":77532955,"body_markdown":"So in our enterprise deployment that of course hosts/proxies everything via Artifactory and any complications that come with that.\r\n\r\nWe&#39;re creating a library that publishes a pom with this.\r\n\r\n```xml\r\n  &lt;dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;[2.5,3)&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n```\r\n\r\nthis is actually generated by Gradle but looks correct to me. Gradle has no problem finding this dependency (there are definitely versions available) for the build.\r\n\r\nMaven generates the following error. It has problems finding the dynamic version using its own syntax... \r\n\r\n```\r\nThe following artifacts could not be resolved: org.springframework.boot:spring-boot-starter-parent:pom:[2.5,3) (absent): Could not find artifact org.springframework.boot:spring-boot-starter-parent:pom:[2.5,3) in artcentral\r\n```\r\n\r\n```\r\nApache Maven 3.9.5 (57804ffe001d7215b5e7bcb531cf83df38f93546)\r\n```\r\n\r\n","title":"Dynamic version in library not resolving with maven","body":"<p>So in our enterprise deployment that of course hosts/proxies everything via Artifactory and any complications that come with that.</p>\n<p>We're creating a library that publishes a pom with this.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;[2.5,3)&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n      &lt;/dependency&gt;\n</code></pre>\n<p>this is actually generated by Gradle but looks correct to me. Gradle has no problem finding this dependency (there are definitely versions available) for the build.</p>\n<p>Maven generates the following error. It has problems finding the dynamic version using its own syntax...</p>\n<pre><code>The following artifacts could not be resolved: org.springframework.boot:spring-boot-starter-parent:pom:[2.5,3) (absent): Could not find artifact org.springframework.boot:spring-boot-starter-parent:pom:[2.5,3) in artcentral\n</code></pre>\n<pre><code>Apache Maven 3.9.5 (57804ffe001d7215b5e7bcb531cf83df38f93546)\n</code></pre>\n"},{"tags":["java","android","android-layout","android-constraintlayout"],"answers":[{"tags":[],"owner":{"account_id":4814419,"reputation":1681,"user_id":3886934,"accept_rate":57,"display_name":"rerashhh"},"down_vote_count":0,"up_vote_count":153,"is_accepted":true,"score":153,"last_activity_date":1683571128,"creation_date":1478780137,"answer_id":40527407,"question_id":40275152,"body_markdown":"I think you should clone the layout after adding your ImageView.\r\n```java\r\nConstraintLayout layout = (ConstraintLayout)findViewById(R.id.mainConstraint);\r\nConstraintSet set = new ConstraintSet();\r\n\r\nImageView view = new ImageView(this);\r\nview.setId(View.generateViewId());  // cannot set id after add\r\nlayout.addView(view,0);\r\nset.clone(layout);\r\nset.connect(view.getId(), ConstraintSet.TOP, layout.getId(), ConstraintSet.TOP, 60);\r\nset.applyTo(layout); // apply to layout","title":"How to programmatically add views and constraints to a ConstraintLayout?","body":"<p>I think you should clone the layout after adding your ImageView.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ConstraintLayout layout = (ConstraintLayout)findViewById(R.id.mainConstraint);\nConstraintSet set = new ConstraintSet();\n\nImageView view = new ImageView(this);\nview.setId(View.generateViewId());  // cannot set id after add\nlayout.addView(view,0);\nset.clone(layout);\nset.connect(view.getId(), ConstraintSet.TOP, layout.getId(), ConstraintSet.TOP, 60);\nset.applyTo(layout); // apply to layout\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6441578,"reputation":1389,"user_id":4991437,"display_name":"Phillip Kigenyi"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1627561718,"creation_date":1627561718,"answer_id":68575944,"question_id":40275152,"body_markdown":"Merging this https://stackoverflow.com/q/6369062/4991437 with https://stackoverflow.com/a/40527407/4991437 \r\n\r\nI have discovered an &#39;easier&#39; solution. This works best for adding multiple consistent views that uses **Viewbinding** and **ViewModel**\r\n\r\n 1. Create the *fragment_home.xml*\r\n 2. Add a LinearLayout to the bottom of *fragment_home.xml*\r\n 3. Create an *dynamic_view.xml* that you will inflate\r\n 4. Get elements from ViewModel/Array or whatever source of data available\r\n 5. Inflate and add elements\r\n\r\nIn this case I am creating a textview(title) with a recyclerview[there are libs for this, however, I found more control doing this]\r\n\r\nStep 1,2\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.core.widget.NestedScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.ui.hometab.HomeFragment&quot;&gt;\r\n    \r\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=&quot;@+id/constraint_parent&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n            &lt;!-- otherviews here --&gt;\r\n    \r\n            &lt;LinearLayout\r\n                android:id=&quot;@+id/dynamic_linear_layout&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginTop=&quot;@dimen/margin_large&quot;\r\n                android:orientation=&quot;vertical&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toBottomOf=&quot;@+id/curated_recycler&quot; /&gt;\r\n    \r\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    &lt;/androidx.core.widget.NestedScrollView&gt;\r\n\r\nStep 3\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:id=&quot;@+id/dynamic_constraint&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n    \r\n        &lt;androidx.constraintlayout.widget.Guideline\r\n            android:id=&quot;@+id/guideline&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            app:layout_constraintGuide_begin=&quot;@dimen/margin_large&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n    \r\n        &lt;View\r\n            android:id=&quot;@+id/title_view&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;40dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/shop_name&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/diary&quot;\r\n            android:textAppearance=&quot;@style/TextAppearance.AppCompat.Medium&quot;\r\n            android:textColor=&quot;@android:color/black&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/title_view&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@id/guideline&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;@+id/title_view&quot; /&gt;\r\n    \r\n        &lt;androidx.recyclerview.widget.RecyclerView\r\n            android:id=&quot;@+id/shop_recycler&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:clipToPadding=&quot;false&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@id/guideline&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/title_view&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    \r\nStep 4,5\r\n\r\n        binding = FragmentHomeBinding.inflate(getLayoutInflater());\r\n\r\n        ShopViewModel shopViewModel = new ViewModelProvider(this).get(ShopViewModel.class);\r\n        shopViewModel.getAllShops(false).observe(getViewLifecycleOwner(), shopEntities -&gt; {\r\n            List&lt;ConstraintLayout&gt; shopConstraints = new ArrayList&lt;&gt;();\r\n\r\n            for (ShopEntity shopEntity : shopEntities) {\r\n                // get an instance of the dynamic_view.xml\r\n                DynamicViewBinding dynamicViewBinding = DynamicViewBinding.inflate(getLayoutInflater());\r\n                // add text view content\r\n                dynamicViewBinding.shopName.setText(shopEntity.getName());\r\n                // initialize the recycler layout adapter\r\n                dynamicViewBinding.shopRecycler.setLayoutManager(new ProductCardLayoutManager(getContext(), 1,\r\n                        GridLayoutManager.HORIZONTAL, false, 80));\r\n\r\n                // get all products and add them to recycler view\r\n                productViewModel.getAllProductsByShop(shopEntity.getShopId(), 10).observe(getViewLifecycleOwner(), productEntities -&gt;\r\n                        dynamicViewBinding.shopRecycler.setAdapter(new ProductAdapter(getActivity(), productEntities)));\r\n\r\n                // attach dynamic view to list of dynamic constraint layouts\r\n                shopConstraints.add(dynamicViewBinding.getRoot());\r\n            }\r\n\r\n            // remove all previous views from the linear layout\r\n            binding.dynamicLinearLayout.removeAllViews();\r\n\r\n            // add the new views\r\n            for (ConstraintLayout shopConstraint : shopConstraints) {\r\n                binding.dynamicLinearLayout.addView(shopConstraint);\r\n            }\r\n        });","title":"How to programmatically add views and constraints to a ConstraintLayout?","body":"<p>Merging this <a href=\"https://stackoverflow.com/q/6369062/4991437\">How do I add elements dynamically to a view created with XML</a> with <a href=\"https://stackoverflow.com/a/40527407/4991437\">https://stackoverflow.com/a/40527407/4991437</a></p>\n<p>I have discovered an 'easier' solution. This works best for adding multiple consistent views that uses <strong>Viewbinding</strong> and <strong>ViewModel</strong></p>\n<ol>\n<li>Create the <em>fragment_home.xml</em></li>\n<li>Add a LinearLayout to the bottom of <em>fragment_home.xml</em></li>\n<li>Create an <em>dynamic_view.xml</em> that you will inflate</li>\n<li>Get elements from ViewModel/Array or whatever source of data available</li>\n<li>Inflate and add elements</li>\n</ol>\n<p>In this case I am creating a textview(title) with a recyclerview[there are libs for this, however, I found more control doing this]</p>\n<p>Step 1,2</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.core.widget.NestedScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.ui.hometab.HomeFragment&quot;&gt;\n\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:id=&quot;@+id/constraint_parent&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n        &lt;!-- otherviews here --&gt;\n\n        &lt;LinearLayout\n            android:id=&quot;@+id/dynamic_linear_layout&quot;\n            android:layout_width=&quot;0dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginTop=&quot;@dimen/margin_large&quot;\n            android:orientation=&quot;vertical&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:layout_constraintTop_toBottomOf=&quot;@+id/curated_recycler&quot; /&gt;\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;/androidx.core.widget.NestedScrollView&gt;\n</code></pre>\n<p>Step 3</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:id=&quot;@+id/dynamic_constraint&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n\n    &lt;androidx.constraintlayout.widget.Guideline\n        android:id=&quot;@+id/guideline&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;vertical&quot;\n        app:layout_constraintGuide_begin=&quot;@dimen/margin_large&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n\n    &lt;View\n        android:id=&quot;@+id/title_view&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;40dp&quot;\n        android:layout_gravity=&quot;center&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n    &lt;TextView\n        android:id=&quot;@+id/shop_name&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;@string/diary&quot;\n        android:textAppearance=&quot;@style/TextAppearance.AppCompat.Medium&quot;\n        android:textColor=&quot;@android:color/black&quot;\n        android:textStyle=&quot;bold&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;@+id/title_view&quot;\n        app:layout_constraintStart_toStartOf=&quot;@id/guideline&quot;\n        app:layout_constraintTop_toTopOf=&quot;@+id/title_view&quot; /&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/shop_recycler&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:clipToPadding=&quot;false&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;@id/guideline&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/title_view&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Step 4,5</p>\n<pre><code>    binding = FragmentHomeBinding.inflate(getLayoutInflater());\n\n    ShopViewModel shopViewModel = new ViewModelProvider(this).get(ShopViewModel.class);\n    shopViewModel.getAllShops(false).observe(getViewLifecycleOwner(), shopEntities -&gt; {\n        List&lt;ConstraintLayout&gt; shopConstraints = new ArrayList&lt;&gt;();\n\n        for (ShopEntity shopEntity : shopEntities) {\n            // get an instance of the dynamic_view.xml\n            DynamicViewBinding dynamicViewBinding = DynamicViewBinding.inflate(getLayoutInflater());\n            // add text view content\n            dynamicViewBinding.shopName.setText(shopEntity.getName());\n            // initialize the recycler layout adapter\n            dynamicViewBinding.shopRecycler.setLayoutManager(new ProductCardLayoutManager(getContext(), 1,\n                    GridLayoutManager.HORIZONTAL, false, 80));\n\n            // get all products and add them to recycler view\n            productViewModel.getAllProductsByShop(shopEntity.getShopId(), 10).observe(getViewLifecycleOwner(), productEntities -&gt;\n                    dynamicViewBinding.shopRecycler.setAdapter(new ProductAdapter(getActivity(), productEntities)));\n\n            // attach dynamic view to list of dynamic constraint layouts\n            shopConstraints.add(dynamicViewBinding.getRoot());\n        }\n\n        // remove all previous views from the linear layout\n        binding.dynamicLinearLayout.removeAllViews();\n\n        // add the new views\n        for (ConstraintLayout shopConstraint : shopConstraints) {\n            binding.dynamicLinearLayout.addView(shopConstraint);\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15006653,"reputation":310,"user_id":13166930,"display_name":"miredirex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675927180,"creation_date":1675927180,"answer_id":75395379,"question_id":40275152,"body_markdown":"### MotionLayout Solution\r\nMotionLayout is trickier as it requires special handling due to it having multiple ConstraintSets. If you use the solution intended for ConstraintLayout, for some reason it will position your views somewhere in the bottom right. The correct way to add view in MotionLayout is to use `updateState` instead of `applyTo`:\r\n```kotlin\r\n/* ...up until this point the steps are the same: create constraint set,\r\nset view&#39;s id, clone, connect, etc. */\r\n\r\nlayout.updateState(R.id.start, set)\r\n```\r\n\r\nIn order to make your view visible in other defined ConstraintSets (in this case the `end` ConstraintSet, aka `R.id.end`), use the dedicated `cloneConstraintSet` method and set the view&#39;s size:\r\n\r\n```kotlin\r\n// Clone the constraint set using MotionLayout&#39;s `cloneConstraintSet`\r\nval setEnd = layout.cloneConstraintSet(R.id.end)\r\n// Set the view&#39;s width and height\r\nsetEnd.constrainWidth(view.id, ConstraintLayout.LayoutParams.WRAP_CONTENT)\r\nsetEnd.constrainHeight(view.id, ConstraintLayout.LayoutParams.WRAP_CONTENT)\r\n// Update state\r\nlayout.updateState(R.id.end, setEnd)\r\n```","title":"How to programmatically add views and constraints to a ConstraintLayout?","body":"<h3>MotionLayout Solution</h3>\n<p>MotionLayout is trickier as it requires special handling due to it having multiple ConstraintSets. If you use the solution intended for ConstraintLayout, for some reason it will position your views somewhere in the bottom right. The correct way to add view in MotionLayout is to use <code>updateState</code> instead of <code>applyTo</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>/* ...up until this point the steps are the same: create constraint set,\nset view's id, clone, connect, etc. */\n\nlayout.updateState(R.id.start, set)\n</code></pre>\n<p>In order to make your view visible in other defined ConstraintSets (in this case the <code>end</code> ConstraintSet, aka <code>R.id.end</code>), use the dedicated <code>cloneConstraintSet</code> method and set the view's size:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Clone the constraint set using MotionLayout's `cloneConstraintSet`\nval setEnd = layout.cloneConstraintSet(R.id.end)\n// Set the view's width and height\nsetEnd.constrainWidth(view.id, ConstraintLayout.LayoutParams.WRAP_CONTENT)\nsetEnd.constrainHeight(view.id, ConstraintLayout.LayoutParams.WRAP_CONTENT)\n// Update state\nlayout.updateState(R.id.end, setEnd)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":171431,"reputation":6427,"user_id":398844,"display_name":"Torben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700684538,"creation_date":1700684538,"answer_id":77532885,"question_id":40275152,"body_markdown":"Adding constraints to a programmatically generated view is also possible without creating a new constraint set, but simply by just setting the layout parameters of the view. Here is an example in Kotlin and Java:\r\n\r\n```kotlin\r\nval view = ImageView(this)\r\nview.layoutParams = ConstraintLayout.LayoutParams(\r\n    ConstraintLayout.LayoutParams.WRAP_CONTENT,\r\n    ConstraintLayout.LayoutParams.WRAP_CONTENT\r\n).apply {\r\n    topToTop = R.id.mainConstraint\r\n    topMargin = 60\r\n}\r\n\r\nval layout = findViewById&lt;ConstraintLayout&gt;(R.id.mainConstraint)\r\nlayout.addView(view)\r\n```\r\n```\r\nConstraintLayout.LayoutParams layoutParams = new ConstraintLayout.LayoutParams(\r\n    ConstraintLayout.LayoutParams.WRAP_CONTENT,\r\n    ConstraintLayout.LayoutParams.WRAP_CONTENT\r\n);\r\nlayoutParams.topToTop = R.id.mainConstraint;\r\nlayoutParams.topMargin = 60;\r\n\r\nImageView view = new ImageView(this);\r\nview.setLayoutParams(layoutParams);\r\n\r\nConstraintLayout layout = findViewById(R.id.mainConstraint);\r\nlayout.addView(view);\r\n```\r\n\r\nIt is also easy to modify the layout parameters after a view has already been added to a layout. Again an example in Kotlin and Java:\r\n\r\n```kotlin\r\nview.layoutParams = (tv.layoutParams as ConstraintLayout.LayoutParams).apply {\r\n    topMargin = 120\r\n}\r\n```\r\n```\r\nConstraintLayout.LayoutParams layoutParams = (ConstraintLayout.LayoutParams) view.getLayoutParams();\r\nlayoutParams.topMargin = 120;\r\nview.setLayoutParams(layoutParams);\r\n```\r\n\r\nJust don&#39;t forget to re-assign the modified layout parameters to the view. Otherwise the changes won&#39;t be applied.","title":"How to programmatically add views and constraints to a ConstraintLayout?","body":"<p>Adding constraints to a programmatically generated view is also possible without creating a new constraint set, but simply by just setting the layout parameters of the view. Here is an example in Kotlin and Java:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val view = ImageView(this)\nview.layoutParams = ConstraintLayout.LayoutParams(\n    ConstraintLayout.LayoutParams.WRAP_CONTENT,\n    ConstraintLayout.LayoutParams.WRAP_CONTENT\n).apply {\n    topToTop = R.id.mainConstraint\n    topMargin = 60\n}\n\nval layout = findViewById&lt;ConstraintLayout&gt;(R.id.mainConstraint)\nlayout.addView(view)\n</code></pre>\n<pre><code>ConstraintLayout.LayoutParams layoutParams = new ConstraintLayout.LayoutParams(\n    ConstraintLayout.LayoutParams.WRAP_CONTENT,\n    ConstraintLayout.LayoutParams.WRAP_CONTENT\n);\nlayoutParams.topToTop = R.id.mainConstraint;\nlayoutParams.topMargin = 60;\n\nImageView view = new ImageView(this);\nview.setLayoutParams(layoutParams);\n\nConstraintLayout layout = findViewById(R.id.mainConstraint);\nlayout.addView(view);\n</code></pre>\n<p>It is also easy to modify the layout parameters after a view has already been added to a layout. Again an example in Kotlin and Java:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>view.layoutParams = (tv.layoutParams as ConstraintLayout.LayoutParams).apply {\n    topMargin = 120\n}\n</code></pre>\n<pre><code>ConstraintLayout.LayoutParams layoutParams = (ConstraintLayout.LayoutParams) view.getLayoutParams();\nlayoutParams.topMargin = 120;\nview.setLayoutParams(layoutParams);\n</code></pre>\n<p>Just don't forget to re-assign the modified layout parameters to the view. Otherwise the changes won't be applied.</p>\n"}],"owner":{"account_id":5339493,"reputation":7038,"user_id":4257162,"accept_rate":80,"display_name":"LeoColman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72825,"favorite_count":0,"down_vote_count":0,"up_vote_count":94,"accepted_answer_id":40527407,"answer_count":4,"score":94,"last_activity_date":1700684538,"creation_date":1477535372,"question_id":40275152,"body_markdown":"I&#39;m having a problem to programmatically add views to a `ConstraintLayout`, and set up all the constraints required for the layout to work.  \r\n\r\nWhat I have at the moment doesn&#39;t work:\r\n\r\n    ConstraintLayout layout = (ConstraintLayout) findViewById(R.id.mainConstraint);\r\n    ConstraintSet set = new ConstraintSet();\r\n    set.clone(layout);\r\n\r\n    ImageView view = new ImageView(this);\r\n    layout.addView(view,0);\r\n    set.connect(view.getId(), ConstraintSet.TOP, layout.getId(), ConstraintSet.TOP, 60);\r\n    set.applyTo(layout);\r\n\r\nThe `ImageView` doesn&#39;t even appear on the layout. When adding to a `RelativeLayout`, it works like a charm.\r\n\r\nWhat can I do to create the constraints I need, so that my layout work again?","title":"How to programmatically add views and constraints to a ConstraintLayout?","body":"<p>I'm having a problem to programmatically add views to a <code>ConstraintLayout</code>, and set up all the constraints required for the layout to work.  </p>\n\n<p>What I have at the moment doesn't work:</p>\n\n<pre><code>ConstraintLayout layout = (ConstraintLayout) findViewById(R.id.mainConstraint);\nConstraintSet set = new ConstraintSet();\nset.clone(layout);\n\nImageView view = new ImageView(this);\nlayout.addView(view,0);\nset.connect(view.getId(), ConstraintSet.TOP, layout.getId(), ConstraintSet.TOP, 60);\nset.applyTo(layout);\n</code></pre>\n\n<p>The <code>ImageView</code> doesn't even appear on the layout. When adding to a <code>RelativeLayout</code>, it works like a charm.</p>\n\n<p>What can I do to create the constraints I need, so that my layout work again?</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":3607248,"reputation":71,"user_id":3009150,"display_name":"Arun Duraisamy"},"score":0,"creation_date":1700664806,"post_id":77529917,"comment_id":136682603,"body_markdown":"Add fetch type to lazy `@ManyToOne(fetch=FetchType.LAZY)\n@JoinColumnsOrFormulas({\n @JoinColumnOrFormula(column=@JoinColumn(name=&quot;custId&quot;, referencedColumnName =&quot;id&quot;) ),\n @JoinColumnOrFormula(formula = @JoinFormula(value=&quot;1&quot;,referencedColumnName = &quot;active&quot;))\n})\nCustomer customer;\n`","body":"Add fetch type to lazy <code>@ManyToOne(fetch=FetchType.LAZY) @JoinColumnsOrFormulas({  @JoinColumnOrFormula(column=@JoinColumn(name=&quot;custId&quot;, referencedColumnName =&quot;id&quot;) ),  @JoinColumnOrFormula(formula = @JoinFormula(value=&quot;1&quot;,referencedColumnName = &quot;active&quot;)) }) Customer customer; </code>"},{"owner":{"account_id":8286703,"reputation":1,"user_id":6231516,"display_name":"Alexander Tsukanov"},"score":0,"creation_date":1700666038,"post_id":77529917,"comment_id":136682881,"body_markdown":"@ArunDuraisamy this approach won&#39;t work in the current context.","body":"@ArunDuraisamy this approach won&#39;t work in the current context."},{"owner":{"account_id":3607248,"reputation":71,"user_id":3009150,"display_name":"Arun Duraisamy"},"score":0,"creation_date":1700670299,"post_id":77529917,"comment_id":136683792,"body_markdown":"can you elaborate your question more.","body":"can you elaborate your question more."},{"owner":{"account_id":8286703,"reputation":1,"user_id":6231516,"display_name":"Alexander Tsukanov"},"score":0,"creation_date":1700810556,"post_id":77529917,"comment_id":136701025,"body_markdown":"@ArunDuraisamy &gt;&gt; Please to clarify what exactly clarification do you need to help me to resolve this question. The problem is straightforward. I have an entity and this entity has a relationship to a foreign entity. I need somehow to be able to search by foreign entity attributes. But as a result, return this entity with lazy fields. (Not fetch all foreign entity attributes. )","body":"@ArunDuraisamy &gt;&gt; Please to clarify what exactly clarification do you need to help me to resolve this question. The problem is straightforward. I have an entity and this entity has a relationship to a foreign entity. I need somehow to be able to search by foreign entity attributes. But as a result, return this entity with lazy fields. (Not fetch all foreign entity attributes. )"},{"owner":{"account_id":3607248,"reputation":71,"user_id":3009150,"display_name":"Arun Duraisamy"},"score":0,"creation_date":1700985907,"post_id":77529917,"comment_id":136717331,"body_markdown":"Once we query with foreign entity fields, objects will be loaded even though we mapped relation as FetchType.Lazy. \n1. Either think on Mapping a Hibernate Query to a Custom Class so that only required fields can return \n2. try with Entity Graph feature","body":"Once we query with foreign entity fields, objects will be loaded even though we mapped relation as FetchType.Lazy.  1. Either think on Mapping a Hibernate Query to a Custom Class so that only required fields can return  2. try with Entity Graph feature"}],"answers":[{"tags":[],"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700683038,"creation_date":1700683038,"answer_id":77532776,"question_id":77529917,"body_markdown":"If you only want to get the ID, you should not use class B type in the entity, since this tells Hibernate to always fetch the entity when you do getName();\r\n\r\n    @Entity\r\n    class A {\r\n        private String name;\r\n    }\r\n\r\nis this not working?\r\n","title":"Combine LAZY load and @JoinColumnOrFormula","body":"<p>If you only want to get the ID, you should not use class B type in the entity, since this tells Hibernate to always fetch the entity when you do getName();</p>\n<pre><code>@Entity\nclass A {\n    private String name;\n}\n</code></pre>\n<p>is this not working?</p>\n"}],"owner":{"account_id":8286703,"reputation":1,"user_id":6231516,"display_name":"Alexander Tsukanov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700683038,"creation_date":1700655817,"question_id":77529917,"body_markdown":"folks!\r\nI have entity A and this entity has a relationship @ManyToOne wit entity B. Mapping goes as follows:\r\n```java  \r\n@Entity\r\nclass A {\r\n@ManyToOne\r\n    @JoinColumnOrFormula(formula = @JoinFormula(value = &quot;&#39;SOME_VALUE&#39;&quot;, referencedColumnName = &quot;type&quot;))\r\n    @JoinColumnOrFormula(column = @JoinColumn(name = &quot;name::varchar&quot;, referencedColumnName = &quot;code&quot;, nullable = false))\r\n    private B name;\r\n}\r\n```\r\n\r\nIt seems like Hibernate loads this entity every time. Is there a way to only fetch only its id?","title":"Combine LAZY load and @JoinColumnOrFormula","body":"<p>folks!\nI have entity A and this entity has a relationship @ManyToOne wit entity B. Mapping goes as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\nclass A {\n@ManyToOne\n    @JoinColumnOrFormula(formula = @JoinFormula(value = &quot;'SOME_VALUE'&quot;, referencedColumnName = &quot;type&quot;))\n    @JoinColumnOrFormula(column = @JoinColumn(name = &quot;name::varchar&quot;, referencedColumnName = &quot;code&quot;, nullable = false))\n    private B name;\n}\n</code></pre>\n<p>It seems like Hibernate loads this entity every time. Is there a way to only fetch only its id?</p>\n"},{"tags":["java","spring","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700682811,"creation_date":1700682811,"answer_id":77532759,"question_id":77531306,"body_markdown":"Since you are constructing the Containers yourself, you have access to the Consumers. What if you create a ConsumerService, which holds an internal list of all the consumers used, and you add a shutdown hook to that?\r\n\r\n    @Service\r\n    public class ConsumerService {\r\n    \r\n        private final List&lt;KafkaConsumer&gt; consumers = new ArrayList&lt;KafkaConsumer&gt;();\r\n    \r\n        public KafkaConsumer&lt;String, String&gt; requestConsumer(){\r\n            var consumer = createConsumer();\r\n            consumers.add(consumer);\r\n            return consumer;   \r\n        }\r\n    \r\n        @PreDestroy\r\n        public void destroy() {\r\n            //here do the clean, like for example not ACK the messages, so another consumer can pick them up?\r\n        }\r\n    \r\n    }","title":"Graceful Shutdown Spring Kafka","body":"<p>Since you are constructing the Containers yourself, you have access to the Consumers. What if you create a ConsumerService, which holds an internal list of all the consumers used, and you add a shutdown hook to that?</p>\n<pre><code>@Service\npublic class ConsumerService {\n\n    private final List&lt;KafkaConsumer&gt; consumers = new ArrayList&lt;KafkaConsumer&gt;();\n\n    public KafkaConsumer&lt;String, String&gt; requestConsumer(){\n        var consumer = createConsumer();\n        consumers.add(consumer);\n        return consumer;   \n    }\n\n    @PreDestroy\n    public void destroy() {\n        //here do the clean, like for example not ACK the messages, so another consumer can pick them up?\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":14190617,"reputation":115,"user_id":10251393,"display_name":"Prashant Prakash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700682811,"creation_date":1700667725,"question_id":77531306,"body_markdown":"I am writing consumer for a few kafka topics using spring framework and spring Kafka. I have to use spring-kafka 1.3 due to some reason. I have done manual configuration to read all topics, create listener, wrap it in container, then start all of them. I am using batch message listener with manual acknowledgement.\r\n\r\nI want the application to stop gracefully on shutdown. I was thinking of putting the consumer to pause, processing all the leftover payload that was fetched, then stop the container. When all containers are stopped, I would have stopped and exit the application. But, older version doesn&#39;t have pause method to container, or any way to access the Consumer&lt;K, V&gt; object. Is there any way to achieve this without updating to newer version?\r\n\r\nThe stop method waits on container to process the payload for a defined timeout value, then stops it, which might cause payload being dropped, or processed twice.","title":"Graceful Shutdown Spring Kafka","body":"<p>I am writing consumer for a few kafka topics using spring framework and spring Kafka. I have to use spring-kafka 1.3 due to some reason. I have done manual configuration to read all topics, create listener, wrap it in container, then start all of them. I am using batch message listener with manual acknowledgement.</p>\n<p>I want the application to stop gracefully on shutdown. I was thinking of putting the consumer to pause, processing all the leftover payload that was fetched, then stop the container. When all containers are stopped, I would have stopped and exit the application. But, older version doesn't have pause method to container, or any way to access the Consumer&lt;K, V&gt; object. Is there any way to achieve this without updating to newer version?</p>\n<p>The stop method waits on container to process the payload for a defined timeout value, then stops it, which might cause payload being dropped, or processed twice.</p>\n"},{"tags":["java","mapstruct"],"owner":{"account_id":7980951,"reputation":2003,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700682768,"creation_date":1700682164,"question_id":77532705,"body_markdown":"Is there any possibility to ignore some field, eg `@Mapping(ignore = true, target = &quot;dontWantToLazyFetchFromDbSometimes&quot;)`? I have mapper where sometimes the common object has list of objects and that list is sometimes unnecessary. I want to prevent unnecessary fetching data from db when someone forget to add `ignore` when adding some new mapping method:\r\n\r\n```\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface ModelMapper {\r\n\r\n    @Mapping(target = &quot;aaa&quot;, source = &quot;bbb&quot;)\r\n    @Mapping(ignore = true, target = &quot;ccc&quot;)\r\n    ResultObject mapToResultObject(Window window);\r\n\r\n    @Mapping(target = &quot;aaa&quot;, source = &quot;bbb&quot;)\r\n    @Mapping(target= &quot;ccc&quot;, source= &quot;ccc&quot;)\r\n    ResultObject mapToResultObject(Window window);\r\n```","title":"Mapstruct - ignore field for the whole mapper","body":"<p>Is there any possibility to ignore some field, eg <code>@Mapping(ignore = true, target = &quot;dontWantToLazyFetchFromDbSometimes&quot;)</code>? I have mapper where sometimes the common object has list of objects and that list is sometimes unnecessary. I want to prevent unnecessary fetching data from db when someone forget to add <code>ignore</code> when adding some new mapping method:</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;)\npublic interface ModelMapper {\n\n    @Mapping(target = &quot;aaa&quot;, source = &quot;bbb&quot;)\n    @Mapping(ignore = true, target = &quot;ccc&quot;)\n    ResultObject mapToResultObject(Window window);\n\n    @Mapping(target = &quot;aaa&quot;, source = &quot;bbb&quot;)\n    @Mapping(target= &quot;ccc&quot;, source= &quot;ccc&quot;)\n    ResultObject mapToResultObject(Window window);\n</code></pre>\n"},{"tags":["java","docker"],"answers":[{"tags":[],"owner":{"account_id":15262961,"reputation":218,"user_id":11012448,"display_name":"ionenorch"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1560871165,"creation_date":1549286568,"answer_id":54517077,"question_id":54516988,"body_markdown":"Yes. The container will start without `-XX:+UseContainerSupport`.\r\n\r\n`-XX:+UseContainerSupport` is used to allocate a larger fraction of memory.\r\n\r\nTo prevent the JVM adjusting the maximum heap size when running in a container, set  `-XX:-UseContainerSupport`.\r\n\r\nIn addition to that, https://www.eclipse.org/openj9/docs/xxusecontainersupport/ might be helpful.","title":"What does UseContainerSupport VM parameter do?","body":"<p>Yes. The container will start without <code>-XX:+UseContainerSupport</code>.</p>\n\n<p><code>-XX:+UseContainerSupport</code> is used to allocate a larger fraction of memory.</p>\n\n<p>To prevent the JVM adjusting the maximum heap size when running in a container, set  <code>-XX:-UseContainerSupport</code>.</p>\n\n<p>In addition to that, <a href=\"https://www.eclipse.org/openj9/docs/xxusecontainersupport/\" rel=\"noreferrer\">https://www.eclipse.org/openj9/docs/xxusecontainersupport/</a> might be helpful.</p>\n"},{"tags":[],"owner":{"account_id":2363312,"reputation":912,"user_id":2069549,"display_name":"Thiago"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1700682582,"creation_date":1565852010,"answer_id":57505850,"question_id":54516988,"body_markdown":"Starting from Java 10, this parameter (which is enabled by default) is used to make the JVM take the **container** memory limits into account when allocating the heap size, not the host machine configuration.\r\n\r\nThis option was backported to Java 8:\r\nhttps://www.oracle.com/technetwork/java/javase/8u191-relnotes-5032181.html\r\n\r\nExamples:\r\n\r\nIf you run:\r\n\r\n    docker run **-m 1gb** openjdk:8u131 java -XshowSettings:vm -version\r\n\r\nThe result is going to be (on my machine Ubuntu with 8gb)\r\n    \r\n    Max. Heap Size (Estimated): 1.68G\r\n\r\nI set a memory limit for the container but it ignored and used the host config (it uses by default total memory/4)\r\n\r\nNow if I run the version that has the new feature (link above) you can see that the container memory limite was taken into account:\r\n\r\n    docker run **-m 1g** openjdk:8u191-jre-alpine java -XshowSettings:vm -version\r\n\r\nResult (total memory / 4):\r\n\r\n    Max. Heap Size (Estimated): 247.50M\r\n\r\nAt the time I&#39;m writing this the LATEST version of the openjdk:8 image is 222 so you can use this version. That has the feature included.\r\n\r\nFor more information:\r\n\r\nExplains this flag use in Java 10: https://medium.com/adorsys/jvm-memory-settings-in-a-container-environment-64b0840e1d9e\r\n\r\nUsing this flag with Java 8: https://blog.softwaremill.com/docker-support-in-new-java-8-finally-fd595df0ca54 \r\n","title":"What does UseContainerSupport VM parameter do?","body":"<p>Starting from Java 10, this parameter (which is enabled by default) is used to make the JVM take the <strong>container</strong> memory limits into account when allocating the heap size, not the host machine configuration.</p>\n<p>This option was backported to Java 8:\n<a href=\"https://www.oracle.com/technetwork/java/javase/8u191-relnotes-5032181.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/technetwork/java/javase/8u191-relnotes-5032181.html</a></p>\n<p>Examples:</p>\n<p>If you run:</p>\n<pre><code>docker run **-m 1gb** openjdk:8u131 java -XshowSettings:vm -version\n</code></pre>\n<p>The result is going to be (on my machine Ubuntu with 8gb)</p>\n<pre><code>Max. Heap Size (Estimated): 1.68G\n</code></pre>\n<p>I set a memory limit for the container but it ignored and used the host config (it uses by default total memory/4)</p>\n<p>Now if I run the version that has the new feature (link above) you can see that the container memory limite was taken into account:</p>\n<pre><code>docker run **-m 1g** openjdk:8u191-jre-alpine java -XshowSettings:vm -version\n</code></pre>\n<p>Result (total memory / 4):</p>\n<pre><code>Max. Heap Size (Estimated): 247.50M\n</code></pre>\n<p>At the time I'm writing this the LATEST version of the openjdk:8 image is 222 so you can use this version. That has the feature included.</p>\n<p>For more information:</p>\n<p>Explains this flag use in Java 10: <a href=\"https://medium.com/adorsys/jvm-memory-settings-in-a-container-environment-64b0840e1d9e\" rel=\"nofollow noreferrer\">https://medium.com/adorsys/jvm-memory-settings-in-a-container-environment-64b0840e1d9e</a></p>\n<p>Using this flag with Java 8: <a href=\"https://blog.softwaremill.com/docker-support-in-new-java-8-finally-fd595df0ca54\" rel=\"nofollow noreferrer\">https://blog.softwaremill.com/docker-support-in-new-java-8-finally-fd595df0ca54</a></p>\n"}],"owner":{"account_id":2063259,"reputation":12395,"user_id":1839360,"display_name":"Yan Khonski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36959,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":54517077,"answer_count":2,"score":29,"last_activity_date":1700682582,"creation_date":1549286218,"question_id":54516988,"body_markdown":"What does this option do in docker file?\r\n\r\n    ENTRYPOINT java -XX:+UseContainerSupport $JAVA_OPTIONS -jar /myapp.jar\r\n\r\nWill the docker container start without this parameter?\r\nI checked [one article][1] which says \r\n\r\n&gt; enable memory support\r\n\r\nbut it is still not clear to me.\r\n\r\n  [1]: http://www.batey.info/docker-jvm-k8s.html","title":"What does UseContainerSupport VM parameter do?","body":"<p>What does this option do in docker file?</p>\n\n<pre><code>ENTRYPOINT java -XX:+UseContainerSupport $JAVA_OPTIONS -jar /myapp.jar\n</code></pre>\n\n<p>Will the docker container start without this parameter?\nI checked <a href=\"http://www.batey.info/docker-jvm-k8s.html\" rel=\"noreferrer\">one article</a> which says </p>\n\n<blockquote>\n  <p>enable memory support</p>\n</blockquote>\n\n<p>but it is still not clear to me.</p>\n"},{"tags":["java","alfresco","hazelcast"],"comments":[{"owner":{"account_id":5639587,"reputation":412,"user_id":4463900,"display_name":"Or&#231;un &#199;olak"},"score":1,"creation_date":1698992797,"post_id":77410858,"comment_id":136477275,"body_markdown":"From the logs we can see that Alfresco cluster is trying to access Hazelcast cluster but for some reason the operation times out. Check if the network connection is up, Hazelcast cluster is up. Also check CPU, JVM logs etc. The problem is the communication between Alfresco and HZ","body":"From the logs we can see that Alfresco cluster is trying to access Hazelcast cluster but for some reason the operation times out. Check if the network connection is up, Hazelcast cluster is up. Also check CPU, JVM logs etc. The problem is the communication between Alfresco and HZ"}],"answers":[{"tags":[],"owner":{"account_id":2138996,"reputation":2563,"user_id":1898538,"display_name":"Heiko Robert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699010112,"creation_date":1699010112,"answer_id":77416223,"question_id":77410858,"body_markdown":"As mentioned by Or&#231;un &#199;olak in the comments, the exception comes from a timeout of your hazelcast cache cluster, but this is probably not the actual problem, just the symptom. I would guess that on your DB server and/or on the Alfresco jdbc connection pool the maximum number of connections has run out. However, this should be in the log on one of the cluster nodes.\r\n\r\nTry to analyze the database server if the problem occurs again.\r\n","title":"Alfresco errors","body":"<p>As mentioned by Orçun Çolak in the comments, the exception comes from a timeout of your hazelcast cache cluster, but this is probably not the actual problem, just the symptom. I would guess that on your DB server and/or on the Alfresco jdbc connection pool the maximum number of connections has run out. However, this should be in the log on one of the cluster nodes.</p>\n<p>Try to analyze the database server if the problem occurs again.</p>\n"}],"owner":{"account_id":29811865,"reputation":1,"user_id":22847117,"display_name":"Stefan Milenkov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700682473,"creation_date":1698938689,"question_id":77410858,"body_markdown":"Can someone help me with the following errors:\r\n\r\n```none\r\n3:02:19,562 ERROR [org.springframework.extensions.webscripts.AbstractRuntime] Exception from executeScript - redirecting to status template error: 10021817710 Wrapped Exception (with status template): [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\r\norg.springframework.extensions.webscripts.WebScriptException: 10021817710 Wrapped Exception (with status template): [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\r\n\tat org.springframework.extensions.webscripts.AbstractWebScript.createStatusException(AbstractWebScript.java:1067)\r\n\tat org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:171)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer$3.execute(RepositoryContainer.java:422)\r\n\tat org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:450)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:491)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:529)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:341)\r\n\tat org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:378)\r\n\tat org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209)\r\n\tat org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:132)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:61)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1023)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\r\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1852)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: com.hazelcast.core.OperationTimeoutException: [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\r\n\tat com.hazelcast.impl.BaseManager$ResponseQueueCall.waitAndGetResult(BaseManager.java:619)\r\n\tat com.hazelcast.impl.BaseManager$ResponseQueueCall.getRedoAwareResult(BaseManager.java:641)\r\n\tat com.hazelcast.impl.BaseManager$ResponseQueueCall.getResult(BaseManager.java:636)\r\n\tat com.hazelcast.impl.BaseManager$RequestBasedCall.getResultAsObject(BaseManager.java:464)\r\n\tat com.hazelcast.impl.BaseManager$ResponseQueueCall.getResultAsObject(BaseManager.java:555)\r\n\tat com.hazelcast.impl.BaseManager$RequestBasedCall.getResultAsObject(BaseManager.java:460)\r\n\tat com.hazelcast.impl.BaseManager$ResponseQueueCall.getResultAsObject(BaseManager.java:555)\r\n\tat com.hazelcast.impl.BaseManager$RequestBasedCall.objectCall(BaseManager.java:502)\r\n\tat com.hazelcast.impl.BaseManager$ResponseQueueCall.objectCall(BaseManager.java:555)\r\n\tat com.hazelcast.impl.BaseManager$RequestBasedCall.objectCall(BaseManager.java:508)\r\n\tat com.hazelcast.impl.BaseManager$ResponseQueueCall.objectCall(BaseManager.java:555)\r\n\tat com.hazelcast.impl.ConcurrentMapManager$MGet.get(ConcurrentMapManager.java:1124)\r\n\tat com.hazelcast.impl.MProxyImpl$MProxyReal.get(MProxyImpl.java:781)\r\n\tat com.hazelcast.impl.MProxyImpl.get(MProxyImpl.java:114)\r\n\tat org.alfresco.repo.lock.mem.AbstractLockStore.get(AbstractLockStore.java:61)\r\n\tat org.alfresco.enterprise.repo.cluster.lock.HazelcastLockStore.get(HazelcastLockStore.java:60)\r\n\tat sun.reflect.GeneratedMethodAccessor332.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.alfresco.enterprise.repo.cluster.core.ClusteredObjectProxyFactory$AbstractClusteredObjectProxyInvoker.invoke(ClusteredObjectProxyFactory.java:275)\r\n\tat com.sun.proxy.$Proxy9.get(Unknown Source)\r\n\tat org.alfresco.repo.lock.mem.LockableAspectInterceptor.invoke(LockableAspectInterceptor.java:90)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\r\n\tat com.sun.proxy.$Proxy10.hasAspect(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor261.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n\tat org.alfresco.repo.tenant.MultiTNodeServiceInterceptor.invoke(MultiTNodeServiceInterceptor.java:104)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\r\n\tat com.sun.proxy.$Proxy10.hasAspect(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor261.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.alfresco.repo.service.StoreRedirectorProxyFactory$RedirectorInvocationHandler.invoke(StoreRedirectorProxyFactory.java:215)\r\n\tat com.sun.proxy.$Proxy28.hasAspect(Unknown Source)\r\n\tat org.alfresco.repo.node.MLPropertyInterceptor.getPivotNodeRef(MLPropertyInterceptor.java:324)\r\n\tat org.alfresco.repo.node.MLPropertyInterceptor.invoke(MLPropertyInterceptor.java:163)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\tat org.alfresco.enterprise.repo.sync.SyncPropertyInterceptor.invoke(SyncPropertyInterceptor.java:150)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\tat org.alfresco.repo.node.NodeRefPropertyMethodInterceptor.invoke(NodeRefPropertyMethodInterceptor.java:198)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\r\n\tat com.sun.proxy.$Proxy10.getProperty(Unknown Source)\r\n\tat sun.reflect.GeneratedMethodAccessor260.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)\r\n\tat com.sun.proxy.$Proxy10.getProperty(Unknown Source)\r\n\tat org.alfresco.repo.security.person.PersonServiceImpl.getPersonOrNullImpl(PersonServiceImpl.java:552)\r\n\tat org.alfresco.repo.security.person.PersonServiceImpl.personExists(PersonServiceImpl.java:516)\r\n\tat org.alfresco.repo.model.Repository.getFullyAuthenticatedPerson(Repository.java:271)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer.addRepoParameters(RepositoryContainer.java:234)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer.getScriptParameters(RepositoryContainer.java:190)\r\n\tat org.springframework.extensions.webscripts.AbstractWebScript.createScriptParameters(AbstractWebScript.java:669)\r\n\tat org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:81)\r\n\t... 27 more\r\n13:02:19,656 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can&#39;t get value from cluster for cache HazelcastSimpleCache[cacheName=cache.aclSharedCache], key=AclEntity[ ID=718467, version=2538900, aclId=c51ff8f7-b2de-4891-a40d-85a57e66a09e, isLatest=true, aclVersion=1, inherits=true, inheritsFrom=718466, type=2, inheritedAcl=718467, isVersioned=false, requiresVersion=false, aclChangeSet=68236281]\r\n13:02:19,765 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can&#39;t get value from cluster for cache HazelcastSimpleCache[cacheName=cache.ticketsCache], key=77b86475f7d72a489685c1b27ed4d908c9e8121c\r\n13:02:19,765 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can&#39;t get value from cluster for cache HazelcastSimpleCache[cacheName=cache.ticketsCache], key=905318b647d82d3b29ec6c41e0f926a3ffc9bba7\r\n13:02:20,124 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can&#39;t get value from cluster for cache HazelcastSimpleCache[cacheName=cache.ticketsCache], key=662ceb1110e795ae1ca2a3af0c8380bfdc67c495\r\n13:02:20,312 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can&#39;t get value from cluster for cache HazelcastSimpleCache[cacheName=cache.ticketsCache], key=cb0b43102deb2f15b71625c047d548998677c8dc\r\n13:02:20,624 ERROR [org.springframework.extensions.webscripts.AbstractRuntime] Exception from executeScript - redirecting to status template error: 10021817712 Wrapped Exception (with status template): [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\r\norg.springframework.extensions.webscripts.WebScriptException: 10021817712 Wrapped Exception (with status template): [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\r\n\tat org.springframework.extensions.webscripts.AbstractWebScript.createStatusException(AbstractWebScript.java:1067)\r\n\tat org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:171)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer$3.execute(RepositoryContainer.java:422)\r\n\tat org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:450)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:491)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:529)\r\n\tat org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:341)\r\n\tat org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:378)\r\n\tat org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209)\r\n\tat org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:132)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:61)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1023)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\r\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1852)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\nCaused by: com.hazelcast.core.OperationTimeoutException: [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\r\n```\r\n\r\nWhat could cause them? The application which is using Alfresco Tomcat just hangs when this (and a lot more) is logged in the Alfresco log. I am not very familiar with the technology, but if any information is needed I can try to provide it \r\n\r\nOnly restart of the SQL services on the DB server and/or (because it is not always the same) restart of the Alfresco service on the Application server resolves the issue, but for a few days only, then the application hangs with the above error.","title":"Alfresco errors","body":"<p>Can someone help me with the following errors:</p>\n<pre class=\"lang-none prettyprint-override\"><code>3:02:19,562 ERROR [org.springframework.extensions.webscripts.AbstractRuntime] Exception from executeScript - redirecting to status template error: 10021817710 Wrapped Exception (with status template): [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\norg.springframework.extensions.webscripts.WebScriptException: 10021817710 Wrapped Exception (with status template): [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\n    at org.springframework.extensions.webscripts.AbstractWebScript.createStatusException(AbstractWebScript.java:1067)\n    at org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:171)\n    at org.alfresco.repo.web.scripts.RepositoryContainer$3.execute(RepositoryContainer.java:422)\n    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:450)\n    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:491)\n    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:529)\n    at org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:341)\n    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:378)\n    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209)\n    at org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:132)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:61)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1023)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\n    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1852)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: com.hazelcast.core.OperationTimeoutException: [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\n    at com.hazelcast.impl.BaseManager$ResponseQueueCall.waitAndGetResult(BaseManager.java:619)\n    at com.hazelcast.impl.BaseManager$ResponseQueueCall.getRedoAwareResult(BaseManager.java:641)\n    at com.hazelcast.impl.BaseManager$ResponseQueueCall.getResult(BaseManager.java:636)\n    at com.hazelcast.impl.BaseManager$RequestBasedCall.getResultAsObject(BaseManager.java:464)\n    at com.hazelcast.impl.BaseManager$ResponseQueueCall.getResultAsObject(BaseManager.java:555)\n    at com.hazelcast.impl.BaseManager$RequestBasedCall.getResultAsObject(BaseManager.java:460)\n    at com.hazelcast.impl.BaseManager$ResponseQueueCall.getResultAsObject(BaseManager.java:555)\n    at com.hazelcast.impl.BaseManager$RequestBasedCall.objectCall(BaseManager.java:502)\n    at com.hazelcast.impl.BaseManager$ResponseQueueCall.objectCall(BaseManager.java:555)\n    at com.hazelcast.impl.BaseManager$RequestBasedCall.objectCall(BaseManager.java:508)\n    at com.hazelcast.impl.BaseManager$ResponseQueueCall.objectCall(BaseManager.java:555)\n    at com.hazelcast.impl.ConcurrentMapManager$MGet.get(ConcurrentMapManager.java:1124)\n    at com.hazelcast.impl.MProxyImpl$MProxyReal.get(MProxyImpl.java:781)\n    at com.hazelcast.impl.MProxyImpl.get(MProxyImpl.java:114)\n    at org.alfresco.repo.lock.mem.AbstractLockStore.get(AbstractLockStore.java:61)\n    at org.alfresco.enterprise.repo.cluster.lock.HazelcastLockStore.get(HazelcastLockStore.java:60)\n    at sun.reflect.GeneratedMethodAccessor332.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.alfresco.enterprise.repo.cluster.core.ClusteredObjectProxyFactory$AbstractClusteredObjectProxyInvoker.invoke(ClusteredObjectProxyFactory.java:275)\n    at com.sun.proxy.$Proxy9.get(Unknown Source)\n    at org.alfresco.repo.lock.mem.LockableAspectInterceptor.invoke(LockableAspectInterceptor.java:90)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n    at com.sun.proxy.$Proxy10.hasAspect(Unknown Source)\n    at sun.reflect.GeneratedMethodAccessor261.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    at org.alfresco.repo.tenant.MultiTNodeServiceInterceptor.invoke(MultiTNodeServiceInterceptor.java:104)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n    at com.sun.proxy.$Proxy10.hasAspect(Unknown Source)\n    at sun.reflect.GeneratedMethodAccessor261.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.alfresco.repo.service.StoreRedirectorProxyFactory$RedirectorInvocationHandler.invoke(StoreRedirectorProxyFactory.java:215)\n    at com.sun.proxy.$Proxy28.hasAspect(Unknown Source)\n    at org.alfresco.repo.node.MLPropertyInterceptor.getPivotNodeRef(MLPropertyInterceptor.java:324)\n    at org.alfresco.repo.node.MLPropertyInterceptor.invoke(MLPropertyInterceptor.java:163)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.alfresco.enterprise.repo.sync.SyncPropertyInterceptor.invoke(SyncPropertyInterceptor.java:150)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.alfresco.repo.node.NodeRefPropertyMethodInterceptor.invoke(NodeRefPropertyMethodInterceptor.java:198)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n    at com.sun.proxy.$Proxy10.getProperty(Unknown Source)\n    at sun.reflect.GeneratedMethodAccessor260.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)\n    at com.sun.proxy.$Proxy10.getProperty(Unknown Source)\n    at org.alfresco.repo.security.person.PersonServiceImpl.getPersonOrNullImpl(PersonServiceImpl.java:552)\n    at org.alfresco.repo.security.person.PersonServiceImpl.personExists(PersonServiceImpl.java:516)\n    at org.alfresco.repo.model.Repository.getFullyAuthenticatedPerson(Repository.java:271)\n    at org.alfresco.repo.web.scripts.RepositoryContainer.addRepoParameters(RepositoryContainer.java:234)\n    at org.alfresco.repo.web.scripts.RepositoryContainer.getScriptParameters(RepositoryContainer.java:190)\n    at org.springframework.extensions.webscripts.AbstractWebScript.createScriptParameters(AbstractWebScript.java:669)\n    at org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:81)\n    ... 27 more\n13:02:19,656 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can't get value from cluster for cache HazelcastSimpleCache[cacheName=cache.aclSharedCache], key=AclEntity[ ID=718467, version=2538900, aclId=c51ff8f7-b2de-4891-a40d-85a57e66a09e, isLatest=true, aclVersion=1, inherits=true, inheritsFrom=718466, type=2, inheritedAcl=718467, isVersioned=false, requiresVersion=false, aclChangeSet=68236281]\n13:02:19,765 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can't get value from cluster for cache HazelcastSimpleCache[cacheName=cache.ticketsCache], key=77b86475f7d72a489685c1b27ed4d908c9e8121c\n13:02:19,765 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can't get value from cluster for cache HazelcastSimpleCache[cacheName=cache.ticketsCache], key=905318b647d82d3b29ec6c41e0f926a3ffc9bba7\n13:02:20,124 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can't get value from cluster for cache HazelcastSimpleCache[cacheName=cache.ticketsCache], key=662ceb1110e795ae1ca2a3af0c8380bfdc67c495\n13:02:20,312 WARN  [org.alfresco.enterprise.repo.cluster.cache.HazelcastSimpleCache] Can't get value from cluster for cache HazelcastSimpleCache[cacheName=cache.ticketsCache], key=cb0b43102deb2f15b71625c047d548998677c8dc\n13:02:20,624 ERROR [org.springframework.extensions.webscripts.AbstractRuntime] Exception from executeScript - redirecting to status template error: 10021817712 Wrapped Exception (with status template): [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\norg.springframework.extensions.webscripts.WebScriptException: 10021817712 Wrapped Exception (with status template): [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\n    at org.springframework.extensions.webscripts.AbstractWebScript.createStatusException(AbstractWebScript.java:1067)\n    at org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:171)\n    at org.alfresco.repo.web.scripts.RepositoryContainer$3.execute(RepositoryContainer.java:422)\n    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:450)\n    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:491)\n    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:529)\n    at org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:341)\n    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:378)\n    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209)\n    at org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:132)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:61)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1023)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\n    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1852)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: com.hazelcast.core.OperationTimeoutException: [CONCURRENT_MAP_GET] Operation Timeout (with no response!): 20000\n</code></pre>\n<p>What could cause them? The application which is using Alfresco Tomcat just hangs when this (and a lot more) is logged in the Alfresco log. I am not very familiar with the technology, but if any information is needed I can try to provide it</p>\n<p>Only restart of the SQL services on the DB server and/or (because it is not always the same) restart of the Alfresco service on the Application server resolves the issue, but for a few days only, then the application hangs with the above error.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700593138,"creation_date":1700592835,"answer_id":77525305,"question_id":77524801,"body_markdown":"You cant start an activity from background, but you dont need activity for your connectivity monitor. Depending on what you do in its callback, you can either start a foreground service to show some info in notifications - and make notification open activity if clicked (thats polite to user), or maybe allow work in background (thats less polite) - but you will risk android killing your app - foreground service will allow to keep your app alive. \r\n\r\nAlso your user will have to manually start your app at least once to make ACTION_BOOT_COMPLETED work.\r\n\r\nTo make it even harder, various manufacturers optimize their devices, preventing such background app like yours from eating resources. You must be prepared for that. See this page: https://dontkillmyapp.com/. I remember having lots of problems on xiaomi, I needed to show user information dialog with information on how to make changes in the device UI to allow for device to work in background in she/he want to.","title":"how to make Default Network detection working after reboot","body":"<p>You cant start an activity from background, but you dont need activity for your connectivity monitor. Depending on what you do in its callback, you can either start a foreground service to show some info in notifications - and make notification open activity if clicked (thats polite to user), or maybe allow work in background (thats less polite) - but you will risk android killing your app - foreground service will allow to keep your app alive.</p>\n<p>Also your user will have to manually start your app at least once to make ACTION_BOOT_COMPLETED work.</p>\n<p>To make it even harder, various manufacturers optimize their devices, preventing such background app like yours from eating resources. You must be prepared for that. See this page: <a href=\"https://dontkillmyapp.com/\" rel=\"nofollow noreferrer\">https://dontkillmyapp.com/</a>. I remember having lots of problems on xiaomi, I needed to show user information dialog with information on how to make changes in the device UI to allow for device to work in background in she/he want to.</p>\n"}],"owner":{"account_id":14033656,"reputation":105,"user_id":13463349,"display_name":"Chris972"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700682140,"creation_date":1700587740,"question_id":77524801,"body_markdown":"Go directly to **EDIT** part.\r\n\r\nMy app have to detect default network changes and make a HTTP request then (if connected, of course).\r\nAll works well, but, when the phone reboots, network change isn&#39;t detected anymore.\r\n\r\nI added BroadcastReceiver which is launched at reboot, but I don&#39;t understand what I have to do with. Have I to create registerDefaultNetworkCallback again?\r\nHave I to outsource the detection part to use it from MainActivity AND from BraodcastReceiver? If yes, how can I do that please?\r\n\r\nMy sample code is:\r\n```\r\npublic class MainActivity extends Activity {\r\n\t@Override\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\tsuper.onCreate(savedInstanceState);\r\n\t\tConnectivityManager connectivityManager = getSystemService(ConnectivityManager.class);\r\n\t\tconnectivityManager.registerDefaultNetworkCallback(new ConnectivityManager.NetworkCallback() {\r\n\t\t\t@Override\r\n\t\t\tpublic void onAvailable(@NonNull Network network) {\r\n\t\t\t\t// my HTTP request in background, works fine\r\n\t\t\t\t// parameter needed : Activity (MainActivity.this here)\r\n\t\t\t\t// for background task\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\npublic class MyBroadcastReceiver extends BroadcastReceiver {\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        if (Intent.ACTION_BOOT_COMPLETED.equals(intent.getAction())) {\r\n\t\t// what should I do here?\r\n\t\t// how to access to Activity, needed for BackgroundTask\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI suppose that the BroadcastReceiver is mandatory to detect the reboot and restart the network change detection. And my problem is that I don&#39;t know how to do a BackgroundTask with it since I don&#39;t have an Activity. But if I&#39;m completely wrong and my app&#39;s network change detection can very well continue on reboot in another way, that&#39;s obviously ideal.\r\n\r\n**EDIT:**\r\n\r\nI&#39;m going to ask my question differently, so as not to influence the answers with my way of doing things:\r\n\r\nFor my personnal use only, I want to create an app that do a HTTP request each time my IP change (default network change is sufficient) EVEN after reboot.\r\nThe user (me) starts the app ONCE only and doesn&#39;t need to restart it (in any way), even after reboot, and the IP change detection continues to work ALWAYS.\r\n\r\nIt that possible one way or another? And if yes, how please?","title":"how to make Default Network detection working after reboot","body":"<p>Go directly to <strong>EDIT</strong> part.</p>\n<p>My app have to detect default network changes and make a HTTP request then (if connected, of course).\nAll works well, but, when the phone reboots, network change isn't detected anymore.</p>\n<p>I added BroadcastReceiver which is launched at reboot, but I don't understand what I have to do with. Have I to create registerDefaultNetworkCallback again?\nHave I to outsource the detection part to use it from MainActivity AND from BraodcastReceiver? If yes, how can I do that please?</p>\n<p>My sample code is:</p>\n<pre><code>public class MainActivity extends Activity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        ConnectivityManager connectivityManager = getSystemService(ConnectivityManager.class);\n        connectivityManager.registerDefaultNetworkCallback(new ConnectivityManager.NetworkCallback() {\n            @Override\n            public void onAvailable(@NonNull Network network) {\n                // my HTTP request in background, works fine\n                // parameter needed : Activity (MainActivity.this here)\n                // for background task\n            }\n        });\n    }\n}\n\npublic class MyBroadcastReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (Intent.ACTION_BOOT_COMPLETED.equals(intent.getAction())) {\n        // what should I do here?\n        // how to access to Activity, needed for BackgroundTask\n        }\n    }\n}\n</code></pre>\n<p>I suppose that the BroadcastReceiver is mandatory to detect the reboot and restart the network change detection. And my problem is that I don't know how to do a BackgroundTask with it since I don't have an Activity. But if I'm completely wrong and my app's network change detection can very well continue on reboot in another way, that's obviously ideal.</p>\n<p><strong>EDIT:</strong></p>\n<p>I'm going to ask my question differently, so as not to influence the answers with my way of doing things:</p>\n<p>For my personnal use only, I want to create an app that do a HTTP request each time my IP change (default network change is sufficient) EVEN after reboot.\nThe user (me) starts the app ONCE only and doesn't need to restart it (in any way), even after reboot, and the IP change detection continues to work ALWAYS.</p>\n<p>It that possible one way or another? And if yes, how please?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":7236687,"reputation":1753,"user_id":5521670,"display_name":"Šimon Koc&#250;rek"},"score":0,"creation_date":1700681863,"post_id":77532655,"comment_id":136685834,"body_markdown":"Does this https://stackoverflow.com/a/38111311/5521670 and this https://levelup.gitconnected.com/parsing-json-arrays-as-objects-with-jackson-c2620e7cc439 answer your question?","body":"Does this <a href=\"https://stackoverflow.com/a/38111311/5521670\">stackoverflow.com/a/38111311/5521670</a> and this <a href=\"https://levelup.gitconnected.com/parsing-json-arrays-as-objects-with-jackson-c2620e7cc439\" rel=\"nofollow noreferrer\">levelup.gitconnected.com/&hellip;</a> answer your question?"},{"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"score":0,"creation_date":1700682049,"post_id":77532655,"comment_id":136685855,"body_markdown":"the JsonpropertyOrder seems to be worth checking out indeed, however I dont see sense in use the Shapy of Array because the entity has also an api endpoint that only returns a single object instead of an array containing multiple. Can&#39;t I just leave away the Shape.Array and inside the objectmapper readvalue pass the .class with a [] prefix?","body":"the JsonpropertyOrder seems to be worth checking out indeed, however I dont see sense in use the Shapy of Array because the entity has also an api endpoint that only returns a single object instead of an array containing multiple. Can&#39;t I just leave away the Shape.Array and inside the objectmapper readvalue pass the .class with a [] prefix?"}],"answers":[{"tags":[],"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700682036,"creation_date":1700682036,"answer_id":77532687,"question_id":77532655,"body_markdown":"You can write a custom dto, which has a JsonCreator to store the &quot;state&quot; internally and then you add alot of getters to extract each thing:\r\n\r\n    public class TestDto {\r\n    \r\n        private String[] data;\r\n    \r\n        @JsonCreator\r\n        public TestDto(String[] data){\r\n            this.data = data;\r\n        }\r\n    \r\n        public String getName(){\r\n            return data[0];\r\n        }\r\n    \r\n        public String getAddress(){\r\n            return data[1];\r\n        }\r\n        \r\n        //etc\r\n    \r\n    }\r\n\r\nEDIT: if you convert it to a `List&lt;TestDto&gt;`, you can extract everything\r\n\r\n    ","title":"Spring Boot Jackson map JSON response from 3rd party API to custom Object","body":"<p>You can write a custom dto, which has a JsonCreator to store the &quot;state&quot; internally and then you add alot of getters to extract each thing:</p>\n<pre><code>public class TestDto {\n\n    private String[] data;\n\n    @JsonCreator\n    public TestDto(String[] data){\n        this.data = data;\n    }\n\n    public String getName(){\n        return data[0];\n    }\n\n    public String getAddress(){\n        return data[1];\n    }\n    \n    //etc\n\n}\n</code></pre>\n<p>EDIT: if you convert it to a <code>List&lt;TestDto&gt;</code>, you can extract everything</p>\n"},{"tags":[],"owner":{"account_id":7236687,"reputation":1753,"user_id":5521670,"display_name":"Šimon Koc&#250;rek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700682135,"creation_date":1700682135,"answer_id":77532699,"question_id":77532655,"body_markdown":"You want to use:\r\n```java\r\n@JsonFormat(shape = JsonFormat.Shape.ARRAY)\r\n@JsonPropertyOrder({ &quot;foo&quot;, &quot;bar&quot; })\r\npublic class FooBar {\r\n  public String foo;\r\n  public String bar;\r\n}\r\n```\r\n\r\nExample here:\r\n\r\n - https://stackoverflow.com/a/38111311/5521670\r\n - https://levelup.gitconnected.com/parsing-json-arrays-as-objects-with-jackson-c2620e7cc439","title":"Spring Boot Jackson map JSON response from 3rd party API to custom Object","body":"<p>You want to use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonFormat(shape = JsonFormat.Shape.ARRAY)\n@JsonPropertyOrder({ &quot;foo&quot;, &quot;bar&quot; })\npublic class FooBar {\n  public String foo;\n  public String bar;\n}\n</code></pre>\n<p>Example here:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/38111311/5521670\">https://stackoverflow.com/a/38111311/5521670</a></li>\n<li><a href=\"https://levelup.gitconnected.com/parsing-json-arrays-as-objects-with-jackson-c2620e7cc439\" rel=\"nofollow noreferrer\">https://levelup.gitconnected.com/parsing-json-arrays-as-objects-with-jackson-c2620e7cc439</a></li>\n</ul>\n"}],"owner":{"account_id":15326941,"reputation":685,"user_id":11057811,"display_name":"BitQueen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77532699,"answer_count":2,"score":0,"last_activity_date":1700682135,"creation_date":1700681627,"question_id":77532655,"body_markdown":"I want to create a Java class out of a json response I get from a third party API which I have already managed to to with using the ObjectMapper. However, in this specific case, the JSON response has no keys so I dont know how I can map this into an Object, basically how should I use @JsonProperty annotation if the json response looks like this\r\n\r\n    [\r\n    [\r\n    1499040000000,      // Kline open time\r\n    &quot;0.01634790&quot;,       // Open price\r\n    &quot;0.80000000&quot;,       // High price\r\n    &quot;0.01575800&quot;,       // Low price\r\n    &quot;0.01577100&quot;,       // Close price\r\n    &quot;148976.11427815&quot;,  // Volume\r\n    1499644799999,      // Kline Close time\r\n    &quot;2434.19055334&quot;,    // Quote asset volume\r\n    308,                // Number of trades\r\n    &quot;1756.87402397&quot;,    // Taker buy base asset volume\r\n    &quot;28.46694368&quot;,      // Taker buy quote asset volume\r\n    &quot;0&quot;                 // Unused field, ignore.\r\n    ]\r\n    ]","title":"Spring Boot Jackson map JSON response from 3rd party API to custom Object","body":"<p>I want to create a Java class out of a json response I get from a third party API which I have already managed to to with using the ObjectMapper. However, in this specific case, the JSON response has no keys so I dont know how I can map this into an Object, basically how should I use @JsonProperty annotation if the json response looks like this</p>\n<pre><code>[\n[\n1499040000000,      // Kline open time\n&quot;0.01634790&quot;,       // Open price\n&quot;0.80000000&quot;,       // High price\n&quot;0.01575800&quot;,       // Low price\n&quot;0.01577100&quot;,       // Close price\n&quot;148976.11427815&quot;,  // Volume\n1499644799999,      // Kline Close time\n&quot;2434.19055334&quot;,    // Quote asset volume\n308,                // Number of trades\n&quot;1756.87402397&quot;,    // Taker buy base asset volume\n&quot;28.46694368&quot;,      // Taker buy quote asset volume\n&quot;0&quot;                 // Unused field, ignore.\n]\n]\n</code></pre>\n"},{"tags":["java","spring-boot","jpa"],"answers":[{"tags":[],"owner":{"account_id":8783864,"reputation":108,"user_id":6566626,"display_name":"Aleksander Orchowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700682113,"creation_date":1700682113,"answer_id":77532695,"question_id":77532489,"body_markdown":"Last time i made many-2-many in java was about 5 years ago as I&#39;m avoiding such things but as far as I remember you need to define an intermediate table\r\n\r\nyou called `&quot;workflow_tasks_workflow_tasks_settings&quot;`\r\n\r\n```\r\n@Entity\r\n@IdClass(WorkflowTasksSettingsMappingIds.class) // nice to add some id on these two i believe\r\n@Table(name = &quot;workflow_tasks_workflow_tasks_settings&quot;)\r\npublic class WorkflowTasksWorkflowTasksSettings {\r\n\r\n    @NotNull\r\n    @Column(name = &quot;workflow_task_id&quot;)\r\n    private String workflowTasksId;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;setting_id&quot;)\r\n    private String settingId;\r\n\r\n  \r\n    @Id\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;workflow_task_id&quot;, insertable = false, updatable = false)\r\n    private WorkflowTaskEntity taask;\r\n\r\n    @Id\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;setting_id&quot;, insertable = false, updatable = false)\r\n    private WorkflowTaskSettingEntity setting;\r\n\r\n// getters setters\r\n\r\n}\r\n```\r\n\r\nand ID\r\n\r\n```\r\n@Embeddable\r\npublic class ArticleOwnerId implements Serializable {\r\n\r\n    @Column(name = &quot;workflow_task_id&quot;)\r\n    private String workflowTaskId;\r\n\r\n    @Column(name = &quot;setting_id&quot;)\r\n    private String settingId;\r\n\r\n  //getters setters\r\n}\r\n\r\n```\r\n\r\nthat&#39;s my guess","title":"Many to Many persistence JPA","body":"<p>Last time i made many-2-many in java was about 5 years ago as I'm avoiding such things but as far as I remember you need to define an intermediate table</p>\n<p>you called <code>&quot;workflow_tasks_workflow_tasks_settings&quot;</code></p>\n<pre><code>@Entity\n@IdClass(WorkflowTasksSettingsMappingIds.class) // nice to add some id on these two i believe\n@Table(name = &quot;workflow_tasks_workflow_tasks_settings&quot;)\npublic class WorkflowTasksWorkflowTasksSettings {\n\n    @NotNull\n    @Column(name = &quot;workflow_task_id&quot;)\n    private String workflowTasksId;\n\n    @NotNull\n    @Column(name = &quot;setting_id&quot;)\n    private String settingId;\n\n  \n    @Id\n    @ManyToOne\n    @JoinColumn(name = &quot;workflow_task_id&quot;, insertable = false, updatable = false)\n    private WorkflowTaskEntity taask;\n\n    @Id\n    @ManyToOne\n    @JoinColumn(name = &quot;setting_id&quot;, insertable = false, updatable = false)\n    private WorkflowTaskSettingEntity setting;\n\n// getters setters\n\n}\n</code></pre>\n<p>and ID</p>\n<pre><code>@Embeddable\npublic class ArticleOwnerId implements Serializable {\n\n    @Column(name = &quot;workflow_task_id&quot;)\n    private String workflowTaskId;\n\n    @Column(name = &quot;setting_id&quot;)\n    private String settingId;\n\n  //getters setters\n}\n\n</code></pre>\n<p>that's my guess</p>\n"}],"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700682113,"creation_date":1700679293,"question_id":77532489,"body_markdown":"I&#39;m trying to persist entities using JPA. \r\nI have 2 entities with many to many relationship and I want to be able to do all crud operation on both sides. \r\n\r\n**Here is a sample of my tables:** \r\n\r\n    @Entity\r\n    @Table(name = &quot;workflow_tasks&quot;)\r\n    @Getter @Setter\r\n    @AllArgsConstructor @NoArgsConstructor\r\n    public class WorkflowTaskEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column(length = 30)\r\n        private String workflowTaskId;\r\n    \r\n        @Column(unique = true)\r\n        private String name;\r\n\r\n        @ManyToMany(\r\n            cascade = CascadeType.ALL,\r\n            fetch = FetchType.EAGER\r\n        )\r\n        @JoinTable(\r\n            name=&quot;workflow_tasks_workflow_tasks_settings&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;workflow_task_id&quot;, referencedColumnName = &quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;setting_id&quot;, referencedColumnName = &quot;id&quot;)\r\n        )\r\n        private Set&lt;WorkflowTaskSettingEntity&gt; settings;\r\n    ...\r\n    }\r\n\r\n**On the other side:** \r\n\r\n    @Entity\r\n    @Table(name = &quot;workflow_task_settings&quot;)\r\n    @Getter @Setter\r\n    @AllArgsConstructor @NoArgsConstructor\r\n    public class WorkflowTaskSettingEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column(length = 30)\r\n        private String workflowTaskSettingId;\r\n\r\n        @Column(unique = true)\r\n        private String name;\r\n    \r\n        @ManyToMany(\r\n                cascade = CascadeType.ALL,\r\n                mappedBy = &quot;settings&quot;,\r\n                fetch = FetchType.EAGER\r\n        )\r\n        private Set&lt;WorkflowTaskEntity&gt; workflowTasks;\r\n    }\r\n\r\nHere is a repository interface implemented: \r\n\r\n    public interface WorkflowTaskSettingRepository\r\n            extends CrudRepository&lt;WorkflowTaskSettingEntity, Long&gt; {\r\n        Page&lt;WorkflowTaskSettingEntity&gt; findAll(Pageable pageRequest);\r\n        List&lt;WorkflowTaskSettingEntity&gt; findAll();\r\n        WorkflowTaskSettingEntity findByWorkflowTaskSettingId(String workflowTaskSettingId);\r\n    \r\n        WorkflowTaskSettingEntity findByValue(String name);\r\n    \r\n        @Modifying\r\n        @Transactional\r\n        @Query(value = &quot;DELETE FROM WorkflowTaskSettingEntity c WHERE c.id = :id&quot;)\r\n        void deleteById(@Param(&quot;id&quot;) Long id);\r\n    }\r\n\r\n**Here is the different cases I have to handle:** \r\n- Create WorkflowTaskSettingEntity and WorkflowTaskEntity objects in one shot\r\n- Create WorkflowTaskSettingEntity and link it to several WorkflowTaskEntity objects\r\n- Create WorkflowTaskSettingEntity and link it to several WorkflowTaskEntity\r\n- Delete a relation between both tables\r\n- Delete WorkflowTaskSettingEntity and relations \r\n- Delete WorkflowTaskEntity and relations\r\n\r\n**My first issue when i create an entry is that i don&#39;t persist all relations:**\r\n\r\nI created first : \r\n  - 4 entries of WorkflowTaskEntity \r\n  - I try to persist 10 WorkflowTaskSettingEntity objects linked to the 4 entries I created\r\n  - The first WorkflowTaskSettingEntity is correctly persisted\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**When persisting the second object it becomes weird:** \r\nIn theory I should have: \r\n\r\n    1-1, 1-2, 1-3, 1-4, 2-1, 2-2, 2-3, 2-4 ...\r\n\r\nand so on... but the result is the following.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**My second issue concerns performance and code length :**\r\nI log my SQL queries and note that there are too many SQL queries for a basic select and insert. I also wonder why I have issues with detached entities and do have to persist a single object twice... It seems that my entities mapping is not as it should be.\r\n\r\n**For creation I have the following code:** \r\n\r\n    @Override\r\n    public WorkflowTaskSettingDto create(WorkflowTaskSettingDto workflowTaskSettingDto) {\r\n        Set&lt;WorkflowTaskDto&gt; workflowTaskDtos = workflowTaskSettingDto.getWorkflowTasks();\r\n        WorkflowTaskSettingEntity workflowTaskSettingEntity = modelMapper.map(\r\n                workflowTaskSettingDto, WorkflowTaskSettingEntity.class);\r\n\r\n        workflowTaskSettingEntity.setWorkflowTasks(null);\r\n        workflowTaskSettingEntity = repository.save(workflowTaskSettingEntity);\r\n        Set&lt;WorkflowTaskEntity&gt; workflowTaskEntities = getWorkflowTasks(workflowTaskDtos);\r\n        workflowTaskSettingEntity.addWorkflowTasks(workflowTaskEntities);\r\n        workflowTaskSettingEntity = repository.save(workflowTaskSettingEntity);\r\n\r\n        return modelMapper.map(workflowTaskSettingEntity, WorkflowTaskSettingDto.class);\r\n    }\r\n\r\n    private Set&lt;WorkflowTaskEntity&gt; getWorkflowTasks(Set&lt;WorkflowTaskDto&gt; workflowTaskDtos) {\r\n        Set&lt;WorkflowTaskEntity&gt; workflowTaskEntities = new HashSet&lt;&gt;();\r\n        workflowTaskDtos.forEach(workflowTaskDto -&gt; {\r\n            WorkflowTaskEntity workflowTaskEntity =\r\n                    appService.workflowTaskService().getById(workflowTaskDto.getWorkflowTaskId());\r\n            if (workflowTaskEntity == null) {\r\n                WorkflowTaskDto create = appService.workflowTaskService().create(workflowTaskDto);\r\n                workflowTaskEntity = appService.workflowTaskService().getById(create.getWorkflowTaskId());\r\n            }\r\n            workflowTaskEntity.setSettings(workflowTaskEntity.getSettings());\r\n            workflowTaskEntities.add(workflowTaskEntity);\r\n        });\r\n        return workflowTaskEntities;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5Xuya.png\r\n  [2]: https://i.stack.imgur.com/ghrRG.png","title":"Many to Many persistence JPA","body":"<p>I'm trying to persist entities using JPA.\nI have 2 entities with many to many relationship and I want to be able to do all crud operation on both sides.</p>\n<p><strong>Here is a sample of my tables:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;workflow_tasks&quot;)\n@Getter @Setter\n@AllArgsConstructor @NoArgsConstructor\npublic class WorkflowTaskEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(length = 30)\n    private String workflowTaskId;\n\n    @Column(unique = true)\n    private String name;\n\n    @ManyToMany(\n        cascade = CascadeType.ALL,\n        fetch = FetchType.EAGER\n    )\n    @JoinTable(\n        name=&quot;workflow_tasks_workflow_tasks_settings&quot;,\n        joinColumns = @JoinColumn(name = &quot;workflow_task_id&quot;, referencedColumnName = &quot;id&quot;),\n        inverseJoinColumns = @JoinColumn(name = &quot;setting_id&quot;, referencedColumnName = &quot;id&quot;)\n    )\n    private Set&lt;WorkflowTaskSettingEntity&gt; settings;\n...\n}\n</code></pre>\n<p><strong>On the other side:</strong></p>\n<pre><code>@Entity\n@Table(name = &quot;workflow_task_settings&quot;)\n@Getter @Setter\n@AllArgsConstructor @NoArgsConstructor\npublic class WorkflowTaskSettingEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(length = 30)\n    private String workflowTaskSettingId;\n\n    @Column(unique = true)\n    private String name;\n\n    @ManyToMany(\n            cascade = CascadeType.ALL,\n            mappedBy = &quot;settings&quot;,\n            fetch = FetchType.EAGER\n    )\n    private Set&lt;WorkflowTaskEntity&gt; workflowTasks;\n}\n</code></pre>\n<p>Here is a repository interface implemented:</p>\n<pre><code>public interface WorkflowTaskSettingRepository\n        extends CrudRepository&lt;WorkflowTaskSettingEntity, Long&gt; {\n    Page&lt;WorkflowTaskSettingEntity&gt; findAll(Pageable pageRequest);\n    List&lt;WorkflowTaskSettingEntity&gt; findAll();\n    WorkflowTaskSettingEntity findByWorkflowTaskSettingId(String workflowTaskSettingId);\n\n    WorkflowTaskSettingEntity findByValue(String name);\n\n    @Modifying\n    @Transactional\n    @Query(value = &quot;DELETE FROM WorkflowTaskSettingEntity c WHERE c.id = :id&quot;)\n    void deleteById(@Param(&quot;id&quot;) Long id);\n}\n</code></pre>\n<p><strong>Here is the different cases I have to handle:</strong></p>\n<ul>\n<li>Create WorkflowTaskSettingEntity and WorkflowTaskEntity objects in one shot</li>\n<li>Create WorkflowTaskSettingEntity and link it to several WorkflowTaskEntity objects</li>\n<li>Create WorkflowTaskSettingEntity and link it to several WorkflowTaskEntity</li>\n<li>Delete a relation between both tables</li>\n<li>Delete WorkflowTaskSettingEntity and relations</li>\n<li>Delete WorkflowTaskEntity and relations</li>\n</ul>\n<p><strong>My first issue when i create an entry is that i don't persist all relations:</strong></p>\n<p>I created first :</p>\n<ul>\n<li>4 entries of WorkflowTaskEntity</li>\n<li>I try to persist 10 WorkflowTaskSettingEntity objects linked to the 4 entries I created</li>\n<li>The first WorkflowTaskSettingEntity is correctly persisted</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/5Xuya.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Xuya.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>When persisting the second object it becomes weird:</strong>\nIn theory I should have:</p>\n<pre><code>1-1, 1-2, 1-3, 1-4, 2-1, 2-2, 2-3, 2-4 ...\n</code></pre>\n<p>and so on... but the result is the following.</p>\n<p><a href=\"https://i.stack.imgur.com/ghrRG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ghrRG.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>My second issue concerns performance and code length :</strong>\nI log my SQL queries and note that there are too many SQL queries for a basic select and insert. I also wonder why I have issues with detached entities and do have to persist a single object twice... It seems that my entities mapping is not as it should be.</p>\n<p><strong>For creation I have the following code:</strong></p>\n<pre><code>@Override\npublic WorkflowTaskSettingDto create(WorkflowTaskSettingDto workflowTaskSettingDto) {\n    Set&lt;WorkflowTaskDto&gt; workflowTaskDtos = workflowTaskSettingDto.getWorkflowTasks();\n    WorkflowTaskSettingEntity workflowTaskSettingEntity = modelMapper.map(\n            workflowTaskSettingDto, WorkflowTaskSettingEntity.class);\n\n    workflowTaskSettingEntity.setWorkflowTasks(null);\n    workflowTaskSettingEntity = repository.save(workflowTaskSettingEntity);\n    Set&lt;WorkflowTaskEntity&gt; workflowTaskEntities = getWorkflowTasks(workflowTaskDtos);\n    workflowTaskSettingEntity.addWorkflowTasks(workflowTaskEntities);\n    workflowTaskSettingEntity = repository.save(workflowTaskSettingEntity);\n\n    return modelMapper.map(workflowTaskSettingEntity, WorkflowTaskSettingDto.class);\n}\n\nprivate Set&lt;WorkflowTaskEntity&gt; getWorkflowTasks(Set&lt;WorkflowTaskDto&gt; workflowTaskDtos) {\n    Set&lt;WorkflowTaskEntity&gt; workflowTaskEntities = new HashSet&lt;&gt;();\n    workflowTaskDtos.forEach(workflowTaskDto -&gt; {\n        WorkflowTaskEntity workflowTaskEntity =\n                appService.workflowTaskService().getById(workflowTaskDto.getWorkflowTaskId());\n        if (workflowTaskEntity == null) {\n            WorkflowTaskDto create = appService.workflowTaskService().create(workflowTaskDto);\n            workflowTaskEntity = appService.workflowTaskService().getById(create.getWorkflowTaskId());\n        }\n        workflowTaskEntity.setSettings(workflowTaskEntity.getSettings());\n        workflowTaskEntities.add(workflowTaskEntity);\n    });\n    return workflowTaskEntities;\n}\n</code></pre>\n"},{"tags":["java","macos","jpackage"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1644876203,"post_id":71117698,"comment_id":125716968,"body_markdown":"For drag and drop, you don’t use file associations.  File associations are for the default desktop operation (such as double-clicking) on a file.","body":"For drag and drop, you don’t use file associations.  File associations are for the default desktop operation (such as double-clicking) on a file."},{"owner":{"account_id":95716,"reputation":6589,"user_id":260516,"accept_rate":63,"display_name":"Jesse Barnum"},"score":0,"creation_date":1644877472,"post_id":71117698,"comment_id":125717299,"body_markdown":"OK, how can I get it so that any file can be dragged to my application?","body":"OK, how can I get it so that any file can be dragged to my application?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1644878435,"post_id":71117698,"comment_id":125717557,"body_markdown":"I may have misunderstood.  When you say “dropped onto my application,” do you mean dropped into the application’s window, or dropped into the application’s desktop icon?","body":"I may have misunderstood.  When you say “dropped onto my application,” do you mean dropped into the application’s window, or dropped into the application’s desktop icon?"},{"owner":{"account_id":95716,"reputation":6589,"user_id":260516,"accept_rate":63,"display_name":"Jesse Barnum"},"score":0,"creation_date":1644878512,"post_id":71117698,"comment_id":125717580,"body_markdown":"Application desktop icon. I am trying to create a Java file uploader utility, which allows you to drag the icon of any file(s) or directory(ies) to its icon in the dock.","body":"Application desktop icon. I am trying to create a Java file uploader utility, which allows you to drag the icon of any file(s) or directory(ies) to its icon in the dock."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1644879579,"post_id":71117698,"comment_id":125717841,"body_markdown":"That’s a tricky one.  I thought I had read that wildcard MIME types could be in the file association properties files, but now I can’t find any documentation confirming that.","body":"That’s a tricky one.  I thought I had read that wildcard MIME types could be in the file association properties files, but now I can’t find any documentation confirming that."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700682098,"creation_date":1700682098,"answer_id":77532692,"question_id":71117698,"body_markdown":"The &#39;post processing&#39; seems to be a good way, yet you want to get rid of it.\r\nI guess it is happening post installation, which means you still need to process data after the installer has run.\r\n\r\nThere is one other possibility: Override JPackage resources.\r\nIf you want to know about [resources used][1], the documentation lists them and they include Info.plist for the Apple Mac.\r\n\r\nNow you&#39;d have to extract the given Info.plist, place it with whatever additions you want to have in a &#39;resources&#39; directory and specify that on the JPackage command line.\r\n\r\nSee also [Overriding JPackage Resources][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/19/jpackage/override-jpackage-resources.html#GUID-405708DC-0243-49FC-84D9-B2A7F0A011A9\r\n  [2]: https://docs.oracle.com/en/java/javase/19/jpackage/override-jpackage-resources.html#GUID-1B718F8B-B68D-4D46-B1DB-003D7729AAB6","title":"How can I package a Java application for Mac so that it can accept any file dropped on it?","body":"<p>The 'post processing' seems to be a good way, yet you want to get rid of it.\nI guess it is happening post installation, which means you still need to process data after the installer has run.</p>\n<p>There is one other possibility: Override JPackage resources.\nIf you want to know about <a href=\"https://docs.oracle.com/en/java/javase/19/jpackage/override-jpackage-resources.html#GUID-405708DC-0243-49FC-84D9-B2A7F0A011A9\" rel=\"nofollow noreferrer\">resources used</a>, the documentation lists them and they include Info.plist for the Apple Mac.</p>\n<p>Now you'd have to extract the given Info.plist, place it with whatever additions you want to have in a 'resources' directory and specify that on the JPackage command line.</p>\n<p>See also <a href=\"https://docs.oracle.com/en/java/javase/19/jpackage/override-jpackage-resources.html#GUID-1B718F8B-B68D-4D46-B1DB-003D7729AAB6\" rel=\"nofollow noreferrer\">Overriding JPackage Resources</a>.</p>\n"}],"owner":{"account_id":95716,"reputation":6589,"user_id":260516,"accept_rate":63,"display_name":"Jesse Barnum"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1700682098,"creation_date":1644869335,"question_id":71117698,"body_markdown":"I&#39;m creating a file upload utility in Java, and packaging it as a Mac OS X Application. I&#39;m using Java 17 and jpackage to create my application. Everything is working, except I can&#39;t figure out how to use --associate-file with a wildcard so that any file, including directories, can be dropped onto my application. I need this so that my application can upload the file(s) or directories to the cloud.\r\n\r\n[UPDATE]\r\n\r\nI ended up fixing the problem by parsing the generated Info.plist, removing the jpackage-generated array associated with the CFBundleDocumentTypes, and replacing it with my own array. This seems very kludgey, and I would welcome any answers that explain how to do it using jpackage without post-processing.\r\n\r\nThe fixed version looks like this:\r\n\r\n      &lt;key&gt;CFBundleDocumentTypes&lt;/key&gt;\r\n      &lt;array&gt;&lt;dict&gt;&lt;key&gt;CFBundleTypeExtensions&lt;/key&gt;&lt;array&gt;&lt;string&gt;*&lt;/string&gt;&lt;/array&gt;&lt;key&gt;CFBundleTypeRole&lt;/key&gt;&lt;string&gt;Editor&lt;/string&gt;&lt;/dict&gt;&lt;/array&gt;\r\n\r\nReference documentation on the CFBundleDocumentTypes can be found at https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-101685-TPXREF107","title":"How can I package a Java application for Mac so that it can accept any file dropped on it?","body":"<p>I'm creating a file upload utility in Java, and packaging it as a Mac OS X Application. I'm using Java 17 and jpackage to create my application. Everything is working, except I can't figure out how to use --associate-file with a wildcard so that any file, including directories, can be dropped onto my application. I need this so that my application can upload the file(s) or directories to the cloud.</p>\n<p>[UPDATE]</p>\n<p>I ended up fixing the problem by parsing the generated Info.plist, removing the jpackage-generated array associated with the CFBundleDocumentTypes, and replacing it with my own array. This seems very kludgey, and I would welcome any answers that explain how to do it using jpackage without post-processing.</p>\n<p>The fixed version looks like this:</p>\n<pre><code>  &lt;key&gt;CFBundleDocumentTypes&lt;/key&gt;\n  &lt;array&gt;&lt;dict&gt;&lt;key&gt;CFBundleTypeExtensions&lt;/key&gt;&lt;array&gt;&lt;string&gt;*&lt;/string&gt;&lt;/array&gt;&lt;key&gt;CFBundleTypeRole&lt;/key&gt;&lt;string&gt;Editor&lt;/string&gt;&lt;/dict&gt;&lt;/array&gt;\n</code></pre>\n<p>Reference documentation on the CFBundleDocumentTypes can be found at <a href=\"https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-101685-TPXREF107\" rel=\"nofollow noreferrer\">https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-101685-TPXREF107</a></p>\n"},{"tags":["java","sql","postgresql"],"owner":{"account_id":22180376,"reputation":1,"user_id":16424190,"display_name":"dadesyatnikov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700681616,"creation_date":1700681616,"question_id":77532652,"body_markdown":"There is a function that accepts a string array as input. The function calls a stored procedure that filters data by column based on the string array from the function and returns the cursor.\r\nHow to pass an array of strings to a function call correctly?\r\n\r\nNow it looks like this\r\n\r\n```\r\ncreate function pricing.report_avg_price_ref(arr_string text[]) returns refcursor\r\n       language plpgsql\r\nas\r\n$$\r\nDECLARE\r\nret_cursor refcursor;\r\nbegin\r\nopen ret_cursor for\r\nselect rap.id,\r\n       rap.region_name,\r\n       rap.fc_code,\r\n       rap.fc_name,\r\n       rap.ph3_code,\r\n       rap.ph3_name,\r\n       rap.ph4_code,\r\n       rap.ph4_name,\r\n       rap.product_plu,\r\n       rap.product_name,\r\n       rap.price_value\r\nfrom pricing.report_avg_price rap\r\nwhere rap.region_name = any (arr_string);\r\nreturn ret_cursor;\r\nend;\r\n$$\r\n```\r\n\r\nSo it is called\r\n```\r\nList&lt;String&gt; regionNames = List.of(&#39;London&#39;, &#39;Paris&#39;);\r\nQuery&lt;ReportAveragePrice&gt; query = statelessSession.createNamedQuery(REPORT_REF_QUERY_NAME, ReportAveragePrice.class);\r\nquery.setParameter(1,  regionNames);\r\n```\r\n\r\n   Description in entity\r\n```\r\n    @NamedNativeQuery(\r\n        name = ReportAveragePrice.REPORT_REF_QUERY_NAME,\r\n        query = &quot;{ ? = call pricing.report_avg_price_ref(?) }&quot;,\r\n        callable = true,\r\n        cacheMode = CacheModeType.IGNORE,\r\n        resultClass = ReportAveragePrice.class\r\n    )\r\n```\r\n\r\nThis is how the call works if the function and procedure looks like :\r\n\r\n```\r\ncreate function pricing.report_avg_price_ref() returns refcursor\r\n       language plpgsql\r\nas\r\n$$\r\nDECLARE\r\nret_cursor refcursor;\r\nbegin\r\nopen ret_cursor for\r\nselect rap.id,\r\n       rap.region_name,\r\n       rap.fc_code,\r\n       rap.fc_name,\r\n       rap.ph3_code,\r\n       rap.ph3_name,\r\n       rap.ph4_code,\r\n       rap.ph4_name,\r\n       rap.product_plu,\r\n       rap.product_name,\r\n       rap.price_value\r\nfrom pricing.report_avg_price rap\r\nwhere rap.region_name = any array ([&#39;London&#39;]);\r\nreturn ret_cursor;\r\nend;\r\n$$\r\n```\r\n\r\nThen all entries are output, where region_name = &#39;London&#39;\r\n\r\nNo how to call the list of translations&lt;Line&gt; = List.of(&#39;London&#39;, &#39;Paris&#39;)?","title":"calling a function with passing parameters to a function, and from a function to a procedure","body":"<p>There is a function that accepts a string array as input. The function calls a stored procedure that filters data by column based on the string array from the function and returns the cursor.\nHow to pass an array of strings to a function call correctly?</p>\n<p>Now it looks like this</p>\n<pre><code>create function pricing.report_avg_price_ref(arr_string text[]) returns refcursor\n       language plpgsql\nas\n$$\nDECLARE\nret_cursor refcursor;\nbegin\nopen ret_cursor for\nselect rap.id,\n       rap.region_name,\n       rap.fc_code,\n       rap.fc_name,\n       rap.ph3_code,\n       rap.ph3_name,\n       rap.ph4_code,\n       rap.ph4_name,\n       rap.product_plu,\n       rap.product_name,\n       rap.price_value\nfrom pricing.report_avg_price rap\nwhere rap.region_name = any (arr_string);\nreturn ret_cursor;\nend;\n$$\n</code></pre>\n<p>So it is called</p>\n<pre><code>List&lt;String&gt; regionNames = List.of('London', 'Paris');\nQuery&lt;ReportAveragePrice&gt; query = statelessSession.createNamedQuery(REPORT_REF_QUERY_NAME, ReportAveragePrice.class);\nquery.setParameter(1,  regionNames);\n</code></pre>\n<p>Description in entity</p>\n<pre><code>    @NamedNativeQuery(\n        name = ReportAveragePrice.REPORT_REF_QUERY_NAME,\n        query = &quot;{ ? = call pricing.report_avg_price_ref(?) }&quot;,\n        callable = true,\n        cacheMode = CacheModeType.IGNORE,\n        resultClass = ReportAveragePrice.class\n    )\n</code></pre>\n<p>This is how the call works if the function and procedure looks like :</p>\n<pre><code>create function pricing.report_avg_price_ref() returns refcursor\n       language plpgsql\nas\n$$\nDECLARE\nret_cursor refcursor;\nbegin\nopen ret_cursor for\nselect rap.id,\n       rap.region_name,\n       rap.fc_code,\n       rap.fc_name,\n       rap.ph3_code,\n       rap.ph3_name,\n       rap.ph4_code,\n       rap.ph4_name,\n       rap.product_plu,\n       rap.product_name,\n       rap.price_value\nfrom pricing.report_avg_price rap\nwhere rap.region_name = any array (['London']);\nreturn ret_cursor;\nend;\n$$\n</code></pre>\n<p>Then all entries are output, where region_name = 'London'</p>\n<p>No how to call the list of translations = List.of('London', 'Paris')?</p>\n"},{"tags":["java","testing"],"comments":[{"owner":{"account_id":11104856,"reputation":1527,"user_id":8152324,"display_name":"ndc85430"},"score":0,"creation_date":1700931413,"post_id":77532646,"comment_id":136713549,"body_markdown":"I don&#39;t really understand what you&#39;re trying to do. What do you mean by &quot;I want external class TestFunctionsClass so it holds functionality of tests.&quot;? What kind of functionality? I&#39;m not familiar with TestNG, but the [documentation](https://testng.org/doc/index.html) suggests you don&#39;t need to extend another class.","body":"I don&#39;t really understand what you&#39;re trying to do. What do you mean by &quot;I want external class TestFunctionsClass so it holds functionality of tests.&quot;? What kind of functionality? I&#39;m not familiar with TestNG, but the <a href=\"https://testng.org/doc/index.html\" rel=\"nofollow noreferrer\">documentation</a> suggests you don&#39;t need to extend another class."},{"owner":{"account_id":11104856,"reputation":1527,"user_id":8152324,"display_name":"ndc85430"},"score":0,"creation_date":1700931560,"post_id":77532646,"comment_id":136713569,"body_markdown":"Further, your example isn&#39;t valid Java code. Please provide a minimal, reproducible example that demonstrates the problem, as per https://stackoverflow.com/help/minimal-reproducible-example.","body":"Further, your example isn&#39;t valid Java code. Please provide a minimal, reproducible example that demonstrates the problem, as per <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>."}],"owner":{"account_id":24801056,"reputation":145,"user_id":18683435,"display_name":"Masofke"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700681508,"creation_date":1700681508,"question_id":77532646,"body_markdown":"I use TestNG framework, but I will provide my problem without that framework so everyone can understand.\r\n\r\nLet&#39;s say I have BaseClass that inits WebDriver and has it as public var.\r\nMy TestClass must extend BaseClass (As it is a must in TestNG framework)\r\nBut for easier development I want external class TestFunctionsClass so it holds functionality of tests. Also my TestFunctionsClass extends ElementActions class that has it&#39;s specific elements.\r\n\r\nSo current approach is to initialize TestFunctionsClass inside TestClass and push WebDriver through parameters, and inside TestFunctionsClass use super instance to give WebDriver to a parent class (ElementActions). \r\n\r\nSo the problem is if my BaseClass would contain many inits like Logger, Driver, etc... It would be a mess to keep everything pushing through parameters to instances. So is there a better appraoch to this?\r\n\r\nHere&#39;s code example, and if there could be a better approach to reduce code without instances in each parent classes from TestFunctions class:\r\n\r\n    public Class Base {\r\n      WebDriver driver;\r\n\r\n      // beforeTest\r\n      void public setUp() {\r\n          driver = init...\r\n      }\r\n    }\r\n\r\n    public Class Test extends Base {\r\n      public void runTest() {\r\n          TestFunctions testFunctions = new TestFunctions(driver);\r\n      }\r\n    }\r\n\r\n    public Class TestFunctions extends Actions {\r\n      WebDriver driver;\r\n    \r\n      public TestFunctions(WebDriver driver) {\r\n          super(driver);\r\n        \r\n          this.driver = driver;\r\n      }\r\n    }\r\n\r\n    \r\n    public Class Actions {\r\n        WebDriver driver;\r\n\r\n        public Actions(WebDriver driver) {\r\n            this.driver = driver;\r\n        }\r\n\r\n        public click() {\r\n            // driver accessable here\r\n        }\r\n      }","title":"How to approach Java testing manner structure","body":"<p>I use TestNG framework, but I will provide my problem without that framework so everyone can understand.</p>\n<p>Let's say I have BaseClass that inits WebDriver and has it as public var.\nMy TestClass must extend BaseClass (As it is a must in TestNG framework)\nBut for easier development I want external class TestFunctionsClass so it holds functionality of tests. Also my TestFunctionsClass extends ElementActions class that has it's specific elements.</p>\n<p>So current approach is to initialize TestFunctionsClass inside TestClass and push WebDriver through parameters, and inside TestFunctionsClass use super instance to give WebDriver to a parent class (ElementActions).</p>\n<p>So the problem is if my BaseClass would contain many inits like Logger, Driver, etc... It would be a mess to keep everything pushing through parameters to instances. So is there a better appraoch to this?</p>\n<p>Here's code example, and if there could be a better approach to reduce code without instances in each parent classes from TestFunctions class:</p>\n<pre><code>public Class Base {\n  WebDriver driver;\n\n  // beforeTest\n  void public setUp() {\n      driver = init...\n  }\n}\n\npublic Class Test extends Base {\n  public void runTest() {\n      TestFunctions testFunctions = new TestFunctions(driver);\n  }\n}\n\npublic Class TestFunctions extends Actions {\n  WebDriver driver;\n\n  public TestFunctions(WebDriver driver) {\n      super(driver);\n    \n      this.driver = driver;\n  }\n}\n\n\npublic Class Actions {\n    WebDriver driver;\n\n    public Actions(WebDriver driver) {\n        this.driver = driver;\n    }\n\n    public click() {\n        // driver accessable here\n    }\n  }\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":1,"creation_date":1700667723,"post_id":77531255,"comment_id":136683270,"body_markdown":"You need to start at start angle and iterate on the angle until you get to end angle. At each angle you can use x + sin(currentAngle) * radius, y + cos(currentAngle) * radius to get your points.","body":"You need to start at start angle and iterate on the angle until you get to end angle. At each angle you can use x + sin(currentAngle) * radius, y + cos(currentAngle) * radius to get your points."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1700681596,"post_id":77531255,"comment_id":136685791,"body_markdown":"@ControlAltDel Calling sin and cos at every point is decidedly **not** the Bresenham algorithm.","body":"@ControlAltDel Calling sin and cos at every point is decidedly <b>not</b> the Bresenham algorithm."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1700682613,"post_id":77531255,"comment_id":136685928,"body_markdown":"https://en.wikipedia.org/wiki/Midpoint_circle_algorithm it&#39;s really odd that you would change the radius. Also, you&#39;ll probably need to limit the angle range somehow, then check if your pixels are between the limits based on some conditions.","body":"<a href=\"https://en.wikipedia.org/wiki/Midpoint_circle_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Midpoint_circle_algorithm</a> it&#39;s really odd that you would change the radius. Also, you&#39;ll probably need to limit the angle range somehow, then check if your pixels are between the limits based on some conditions."}],"owner":{"account_id":24341560,"reputation":1,"user_id":20575958,"display_name":"Gug1n16"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1700681497,"creation_date":1700667168,"question_id":77531255,"body_markdown":"I have a method for drawing a circle using the Bresenham algorithm. How do I redo it so that it draws the arc of a circle from startAngle to endAngle?\r\n\r\n    public static void drawCircleArc(\r\n                final GraphicsContext graphicsContext,\r\n                final int xc, final int yc,\r\n                int radius,\r\n                final int startAngle, final int endAngle) {\r\n            final PixelWriter pixelWriter = graphicsContext.getPixelWriter();\r\n            int error = 2 - 2 * radius;\r\n            int x = -radius;\r\n            int y = 0;\r\n            do {\r\n                pixelWriter.setColor(xc - x, yc + y, Color.BLACK);\r\n                pixelWriter.setColor(xc + x, yc - y, Color.BLACK);\r\n                pixelWriter.setColor(xc - x, yc - y, Color.BLACK);\r\n                pixelWriter.setColor(xc + x, yc + y, Color.BLACK);\r\n    \r\n                radius = error;\r\n    \r\n                if (radius &lt;= y) {\r\n                    y++;\r\n                    error = error + y * 2 + 1;\r\n    \r\n                }\r\n                if (radius &gt; x || error &gt; y) {\r\n                    x++;\r\n                    error = error + x * 2 + 1;\r\n                }\r\n    \r\n            } while (x &lt; 0);\r\n    \r\n        }\r\n\r\n\r\nI tried to make a check that the pixel is between the startAngle and the endAngle when drawing, but it didn&#39;t work.","title":"Method for drawing the arc of a circle by the Bresenham algorithm","body":"<p>I have a method for drawing a circle using the Bresenham algorithm. How do I redo it so that it draws the arc of a circle from startAngle to endAngle?</p>\n<pre><code>public static void drawCircleArc(\n            final GraphicsContext graphicsContext,\n            final int xc, final int yc,\n            int radius,\n            final int startAngle, final int endAngle) {\n        final PixelWriter pixelWriter = graphicsContext.getPixelWriter();\n        int error = 2 - 2 * radius;\n        int x = -radius;\n        int y = 0;\n        do {\n            pixelWriter.setColor(xc - x, yc + y, Color.BLACK);\n            pixelWriter.setColor(xc + x, yc - y, Color.BLACK);\n            pixelWriter.setColor(xc - x, yc - y, Color.BLACK);\n            pixelWriter.setColor(xc + x, yc + y, Color.BLACK);\n\n            radius = error;\n\n            if (radius &lt;= y) {\n                y++;\n                error = error + y * 2 + 1;\n\n            }\n            if (radius &gt; x || error &gt; y) {\n                x++;\n                error = error + x * 2 + 1;\n            }\n\n        } while (x &lt; 0);\n\n    }\n</code></pre>\n<p>I tried to make a check that the pixel is between the startAngle and the endAngle when drawing, but it didn't work.</p>\n"},{"tags":["java","optimization","jakarta-ee","lucene","solr"],"answers":[{"tags":[],"owner":{"account_id":324312,"reputation":13274,"user_id":644817,"accept_rate":87,"display_name":"The Bndr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1312540676,"creation_date":1312540676,"answer_id":6954986,"question_id":6954358,"body_markdown":"There are different ways to optimize an index.\r\nYou could trigger one of the solr basic scripts:\r\n[http://wiki.apache.org/solr/SolrOperationsTools#optimize][1]\r\n\r\nYou also could set `optimize=true` at an (full) import or while adding new data.\r\n...or simply trigger an commit with `optimize=true`\r\n\r\nMaybe also this could be interesting for your needs:\r\n[http://wiki.apache.org/solr/UpdateXmlMessages#A.22commit.22_and_.22optimize.22][2]\r\n\r\n\r\n  [1]: http://wiki.apache.org/solr/SolrOperationsTools#optimize\r\n  [2]: http://wiki.apache.org/solr/UpdateXmlMessages#A.22commit.22_and_.22optimize.22","title":"How to optimize solr index","body":"<p>There are different ways to optimize an index.\nYou could trigger one of the solr basic scripts:\n<a href=\"http://wiki.apache.org/solr/SolrOperationsTools#optimize\" rel=\"nofollow\">http://wiki.apache.org/solr/SolrOperationsTools#optimize</a></p>\n\n<p>You also could set <code>optimize=true</code> at an (full) import or while adding new data.\n...or simply trigger an commit with <code>optimize=true</code></p>\n\n<p>Maybe also this could be interesting for your needs:\n<a href=\"http://wiki.apache.org/solr/UpdateXmlMessages#A.22commit.22_and_.22optimize.22\" rel=\"nofollow\">http://wiki.apache.org/solr/UpdateXmlMessages#A.22commit.22_and_.22optimize.22</a></p>\n"},{"tags":[],"owner":{"account_id":370836,"reputation":2492,"user_id":719031,"accept_rate":95,"display_name":"Dorin"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1312892394,"creation_date":1312892394,"answer_id":6996108,"question_id":6954358,"body_markdown":"For testing how much a change you do optimize the indexing, just write a custom indexer and add random generated content. Add a big number of documents (500.000 or 1.000.000) and measure the time it takes.\r\n\r\nFollowing the articles shared above I made to myself a custom indexer and I mananged to optimize the time it took to index documents by 80%.","title":"How to optimize solr index","body":"<p>For testing how much a change you do optimize the indexing, just write a custom indexer and add random generated content. Add a big number of documents (500.000 or 1.000.000) and measure the time it takes.</p>\n\n<p>Following the articles shared above I made to myself a custom indexer and I mananged to optimize the time it took to index documents by 80%.</p>\n"},{"tags":[],"owner":{"account_id":151684,"reputation":2702,"user_id":365712,"accept_rate":57,"display_name":"spier"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1347020954,"creation_date":1347020954,"answer_id":12318128,"question_id":6954358,"body_markdown":"I find this to be the easiest way to optimize a Solr index. In my context &quot;optimize&quot; means to merge all index segments.\r\n\r\n    curl http://localhost:8983/solr/&lt;core_name&gt;/update -F stream.body=&#39; &lt;optimize /&gt;&#39;","title":"How to optimize solr index","body":"<p>I find this to be the easiest way to optimize a Solr index. In my context \"optimize\" means to merge all index segments.</p>\n\n<pre><code>curl http://localhost:8983/solr/&lt;core_name&gt;/update -F stream.body=' &lt;optimize /&gt;'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5920025,"reputation":564,"user_id":4657757,"display_name":"Rameez"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1450846980,"creation_date":1450165886,"answer_id":34283673,"question_id":6954358,"body_markdown":"Check the size of respective core before you start.\r\n\r\nOpen Terminal 1:\r\n\r\n    watch -n 10 &quot;du -sh /path to core/data/*&quot;\r\n\r\nOpen Terminal 2 and Execute:\r\n\r\n    curl http://hostname:8980/solr/&lt;core&gt;/update?optimize=true\r\n\r\nInstead of &quot;core&quot;, update your respective name of the core.\r\n\r\nYou could see the size of the core will increase gradually about double the size of your indexed data and will reduce suddenly. This will take time depends on your solr data.\r\n\r\nFor instance, 50G indexed data spikes nearly 90G and downs to optimized 25G data. And normally it will take 30-45min for this amount of data.\r\n\r\n[Why doesn&#39;t my index directory get smaller (immediately) when i delete documents? force a merge? optimize?][1]\r\n\r\n\r\n  [1]: http://wiki.apache.org/solr/FAQ#How_can_I_delete_all_documents_from_my_index.3F","title":"How to optimize solr index","body":"<p>Check the size of respective core before you start.</p>\n\n<p>Open Terminal 1:</p>\n\n<pre><code>watch -n 10 \"du -sh /path to core/data/*\"\n</code></pre>\n\n<p>Open Terminal 2 and Execute:</p>\n\n<pre><code>curl http://hostname:8980/solr/&lt;core&gt;/update?optimize=true\n</code></pre>\n\n<p>Instead of \"core\", update your respective name of the core.</p>\n\n<p>You could see the size of the core will increase gradually about double the size of your indexed data and will reduce suddenly. This will take time depends on your solr data.</p>\n\n<p>For instance, 50G indexed data spikes nearly 90G and downs to optimized 25G data. And normally it will take 30-45min for this amount of data.</p>\n\n<p><a href=\"http://wiki.apache.org/solr/FAQ#How_can_I_delete_all_documents_from_my_index.3F\" rel=\"noreferrer\">Why doesn't my index directory get smaller (immediately) when i delete documents? force a merge? optimize?</a></p>\n"},{"tags":[],"owner":{"account_id":654699,"reputation":8875,"user_id":1093248,"display_name":"Sumoanand"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1478717324,"creation_date":1478717324,"answer_id":40513967,"question_id":6954358,"body_markdown":"You need to pass `optimize=true` to update solr request to optimize the solr.\r\n\r\n&gt; http://[HostName]:[port]/solr/update?optimize=true","title":"How to optimize solr index","body":"<p>You need to pass <code>optimize=true</code> to update solr request to optimize the solr.</p>\n\n<blockquote>\n  <p><a href=\"http://[HostName]:[port]/solr/update?optimize=true\" rel=\"noreferrer\">http://[HostName]:[port]/solr/update?optimize=true</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2368449,"reputation":216,"user_id":2073658,"display_name":"Rafal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585163173,"creation_date":1585163173,"answer_id":60855730,"question_id":6954358,"body_markdown":"When it comes to optimization of Solr core/shard data it is as easy as running a command like this:\r\n\r\n    curl http://hostname:8980/solr/&lt;COLLECTION_NAME&gt;/update?optimize=true&#39;\r\n\r\nBut be aware that this doesn&#39;t come for free - if you have a lot of data you may end up with quite a lot of I/O on Solr nodes and the process itself taking a lot of time. In most cases, you want to start with tuning the merge process, not force merging the index itself. \r\n\r\nI did a talk on that topic during Lucene/Solr revolution - if you would like to have a look at the slides and the video here is a link: https://sematext.com/blog/solr-optimize-is-not-bad-for-you-lucene-solr-revolution/","title":"How to optimize solr index","body":"<p>When it comes to optimization of Solr core/shard data it is as easy as running a command like this:</p>\n\n<pre><code>curl http://hostname:8980/solr/&lt;COLLECTION_NAME&gt;/update?optimize=true'\n</code></pre>\n\n<p>But be aware that this doesn't come for free - if you have a lot of data you may end up with quite a lot of I/O on Solr nodes and the process itself taking a lot of time. In most cases, you want to start with tuning the merge process, not force merging the index itself. </p>\n\n<p>I did a talk on that topic during Lucene/Solr revolution - if you would like to have a look at the slides and the video here is a link: <a href=\"https://sematext.com/blog/solr-optimize-is-not-bad-for-you-lucene-solr-revolution/\" rel=\"nofollow noreferrer\">https://sematext.com/blog/solr-optimize-is-not-bad-for-you-lucene-solr-revolution/</a></p>\n"},{"tags":[],"owner":{"account_id":21108462,"reputation":21,"user_id":15516965,"display_name":"Shailesh Jain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1617143822,"creation_date":1617133097,"answer_id":66877435,"question_id":6954358,"body_markdown":"By Optimise considering it to be forceMerge. The Optimize operation re-organizes all the Segments in a Core (or per shard) and merged them to 1 single Segment (default is 1 segment)\r\n\r\nTo optimise: You could specify MergePolicy in solrconfig.xml, so that Solr will merge segments by himself. To manually trigger the optimise http://hostname:port/solr/&lt;COLLECTION_NAME&gt;/update?optimize=true&amp;maxSegments=1&#39;\r\n\r\n\r\nTo answer you next question - how to verify if optimise is done or not ? You can check the Core/Shard Overview tab in the Solr UI which will denote the count of segment. You can also verify the size of segments in the /data/index folder before and after the optimise.\r\n\r\n[![segment count in the statistics of Solr overview][1]][1]\r\n\r\n\r\nOptimize/forceMerge are better behaved, but still expensive operations.\r\n\r\nhttps://wiki.apache.org/solr/SolrPerformanceFactors#Optimization_Considerations:\r\n\r\n“Optimizing is very expensive, and if the index is constantly changing, the slight performance boost will not last long.”\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UfbZp.png","title":"How to optimize solr index","body":"<p>By Optimise considering it to be forceMerge. The Optimize operation re-organizes all the Segments in a Core (or per shard) and merged them to 1 single Segment (default is 1 segment)</p>\n<p>To optimise: You could specify MergePolicy in solrconfig.xml, so that Solr will merge segments by himself. To manually trigger the optimise http://hostname:port/solr/&lt;COLLECTION_NAME&gt;/update?optimize=true&amp;maxSegments=1'</p>\n<p>To answer you next question - how to verify if optimise is done or not ? You can check the Core/Shard Overview tab in the Solr UI which will denote the count of segment. You can also verify the size of segments in the /data/index folder before and after the optimise.</p>\n<p><a href=\"https://i.stack.imgur.com/UfbZp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UfbZp.png\" alt=\"segment count in the statistics of Solr overview\" /></a></p>\n<p>Optimize/forceMerge are better behaved, but still expensive operations.</p>\n<p><a href=\"https://wiki.apache.org/solr/SolrPerformanceFactors#Optimization_Considerations\" rel=\"nofollow noreferrer\">https://wiki.apache.org/solr/SolrPerformanceFactors#Optimization_Considerations</a>:</p>\n<p>“Optimizing is very expensive, and if the index is constantly changing, the slight performance boost will not last long.”</p>\n"},{"tags":[],"owner":{"account_id":593875,"reputation":20373,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700680644,"creation_date":1700680644,"answer_id":77532585,"question_id":6954358,"body_markdown":"If you have access to the Solr web-based UI, this can be done there by navigating to the core you want to optimize, then:\r\n\r\n1. Open the &quot;Documents&quot; page/menu/whatever\r\n1. Set the `Request-Handler` to `/update` (which is the default) and the document type to `XML` (this may be possible with JSON, but...)\r\n1. Enter `&lt;optimize/&gt;` into the &quot;Document(s)&quot; text area\r\n1. Submit the document\r\n\r\nThis will kick-off the optimization process.","title":"How to optimize solr index","body":"<p>If you have access to the Solr web-based UI, this can be done there by navigating to the core you want to optimize, then:</p>\n<ol>\n<li>Open the &quot;Documents&quot; page/menu/whatever</li>\n<li>Set the <code>Request-Handler</code> to <code>/update</code> (which is the default) and the document type to <code>XML</code> (this may be possible with JSON, but...)</li>\n<li>Enter <code>&lt;optimize/&gt;</code> into the &quot;Document(s)&quot; text area</li>\n<li>Submit the document</li>\n</ol>\n<p>This will kick-off the optimization process.</p>\n"}],"owner":{"display_name":"user800854"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43265,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"answer_count":8,"score":14,"last_activity_date":1700680644,"creation_date":1312537400,"question_id":6954358,"body_markdown":"How to optimize solr index. \r\nI want to optimize my solr indexing for i try to change in solrconfig.xml it getting indexed but i want to how to verify that they are optimized and with which thing are involve in index optimization.","title":"How to optimize solr index","body":"<p>How to optimize solr index. \nI want to optimize my solr indexing for i try to change in solrconfig.xml it getting indexed but i want to how to verify that they are optimized and with which thing are involve in index optimization.</p>\n"},{"tags":["java","jvisualvm"],"comments":[{"owner":{"account_id":78982,"reputation":58999,"user_id":224346,"display_name":"Anon."},"score":1,"creation_date":1296161328,"post_id":4821664,"comment_id":5347768,"body_markdown":"I would guess that an allocated object that is not live is just one that hasn&#39;t been GCed yet.","body":"I would guess that an allocated object that is not live is just one that hasn&#39;t been GCed yet."},{"owner":{"account_id":629632,"reputation":7445,"user_id":386593,"accept_rate":91,"display_name":"Anonym"},"score":1,"creation_date":1296161717,"post_id":4821664,"comment_id":5347858,"body_markdown":"That&#39;s my guess too, but I&#39;d like to have some definite facts :-)","body":"That&#39;s my guess too, but I&#39;d like to have some definite facts :-)"}],"answers":[{"tags":[],"owner":{"account_id":33206,"reputation":10107,"user_id":92764,"accept_rate":84,"display_name":"Luciano Fiandesio"},"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1417600027,"creation_date":1296480457,"answer_id":4851365,"question_id":4821664,"body_markdown":" - Allocated objects are all objects that have been created since application start (or reset)\r\n - Live objects are reachable objects that are being actively used by your program (likely still in the Young Generation)","title":"What is the difference between live objects and allocated objects in VisualVM?","body":"<ul>\n<li>Allocated objects are all objects that have been created since application start (or reset)</li>\n<li>Live objects are reachable objects that are being actively used by your program (likely still in the Young Generation)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1314547751,"creation_date":1314547751,"answer_id":7222074,"question_id":4821664,"body_markdown":"The number of allocated objects is not the number of objects not yet reclaimed by the garbage collector. Rather, it is the number of objects created since application start, or since a reset of the &quot;Collected Results Buffer&quot; in VisualVM (there is a button in the memory profiler view to reset the collected results buffer).\r\n\r\nThe live objects are those objects that haven&#39;t been reclaimed by the garbage collector; this may include objects that are unreachable, and will definitely include objects that are still in use by the application.","title":"What is the difference between live objects and allocated objects in VisualVM?","body":"<p>The number of allocated objects is not the number of objects not yet reclaimed by the garbage collector. Rather, it is the number of objects created since application start, or since a reset of the \"Collected Results Buffer\" in VisualVM (there is a button in the memory profiler view to reset the collected results buffer).</p>\n\n<p>The live objects are those objects that haven't been reclaimed by the garbage collector; this may include objects that are unreachable, and will definitely include objects that are still in use by the application.</p>\n"}],"owner":{"account_id":629632,"reputation":7445,"user_id":386593,"accept_rate":91,"display_name":"Anonym"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6227,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":4851365,"answer_count":2,"score":20,"last_activity_date":1700680390,"creation_date":1296161188,"question_id":4821664,"body_markdown":"As seen in the screenshot here, 0 live objects, 9 allocated objects.\r\n\r\nWhat&#39;s the difference between a live and an allocated object?\r\n\r\n![jvisualvm screenshot][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/SaZQS.png","title":"What is the difference between live objects and allocated objects in VisualVM?","body":"<p>As seen in the screenshot here, 0 live objects, 9 allocated objects.</p>\n<p>What's the difference between a live and an allocated object?</p>\n<p><img src=\"https://i.stack.imgur.com/SaZQS.png\" alt=\"jvisualvm screenshot\" /></p>\n"},{"tags":["java","wcf",".net-core","soap","wsdl"],"comments":[{"owner":{"account_id":4617916,"reputation":107652,"user_id":3744182,"display_name":"dbc"},"score":0,"creation_date":1700670025,"post_id":77531515,"comment_id":136683732,"body_markdown":"`XmlSerializer` doesn&#39;t support custom formats for primitives like `decimal`, `double`, `DateTime` and so on.  The standard workaround is to mark the real property with `[XmlIgnore]` and use a surrogate `string` valued property.  See e.g. [this answer](https://stackoverflow.com/a/17438468) to [XML deserialization crashes on decimal parse due to formatting](https://stackoverflow.com/q/17437946) as well as [Can you specify format for XmlSerialization of a datetime?](https://stackoverflow.com/q/1118833).  Be sure to parse and format the string using `CultureInfo.InvariantCulture`.","body":"<code>XmlSerializer</code> doesn&#39;t support custom formats for primitives like <code>decimal</code>, <code>double</code>, <code>DateTime</code> and so on.  The standard workaround is to mark the real property with <code>[XmlIgnore]</code> and use a surrogate <code>string</code> valued property.  See e.g. <a href=\"https://stackoverflow.com/a/17438468\">this answer</a> to <a href=\"https://stackoverflow.com/q/17437946\">XML deserialization crashes on decimal parse due to formatting</a> as well as <a href=\"https://stackoverflow.com/q/1118833\">Can you specify format for XmlSerialization of a datetime?</a>.  Be sure to parse and format the string using <code>CultureInfo.InvariantCulture</code>."},{"owner":{"account_id":689,"reputation":151114,"user_id":905,"accept_rate":75,"display_name":"Keith"},"score":0,"creation_date":1700671046,"post_id":77531515,"comment_id":136683983,"body_markdown":"@dbc thanks but this is autogenerated code - line 8478 out of 31338. Adding `[XmlIgnore]` and a `string` surrogate gets around losing data for `double` to `decimal` conversion, but the real pain is manually editing a huge autogenerated file every time the WSDL changes.","body":"@dbc thanks but this is autogenerated code - line 8478 out of 31338. Adding <code>[XmlIgnore]</code> and a <code>string</code> surrogate gets around losing data for <code>double</code> to <code>decimal</code> conversion, but the real pain is manually editing a huge autogenerated file every time the WSDL changes."},{"owner":{"account_id":4617916,"reputation":107652,"user_id":3744182,"display_name":"dbc"},"score":0,"creation_date":1700672184,"post_id":77531515,"comment_id":136684237,"body_markdown":"Then you may need to consider creating a customized `XmlCodeExporter`.  See e.g. [XmlCodeExporter and nullable types](https://stackoverflow.com/q/42295155/3744182).  Or maybe you could sanitize the XML before deserializing by using an XSLT transform or something similar.","body":"Then you may need to consider creating a customized <code>XmlCodeExporter</code>.  See e.g. <a href=\"https://stackoverflow.com/q/42295155/3744182\">XmlCodeExporter and nullable types</a>.  Or maybe you could sanitize the XML before deserializing by using an XSLT transform or something similar."},{"owner":{"account_id":689,"reputation":151114,"user_id":905,"accept_rate":75,"display_name":"Keith"},"score":0,"creation_date":1700672732,"post_id":77531515,"comment_id":136684340,"body_markdown":"@dbc we&#39;re on .NET 8, I&#39;m not sure that we could even consider a library so old that it doesn&#39;t even support nullables (added in .NET Framework 2 around 20 years ago) even if this is SOAP. Inline XSLT would be a significant performance bottleneck as well as a lot of work to implement, but I&#39;m not even sure how they could be applied without some kind of proxy between WCF and the SOAP service?","body":"@dbc we&#39;re on .NET 8, I&#39;m not sure that we could even consider a library so old that it doesn&#39;t even support nullables (added in .NET Framework 2 around 20 years ago) even if this is SOAP. Inline XSLT would be a significant performance bottleneck as well as a lot of work to implement, but I&#39;m not even sure how they could be applied without some kind of proxy between WCF and the SOAP service?"},{"owner":{"account_id":4617916,"reputation":107652,"user_id":3744182,"display_name":"dbc"},"score":0,"creation_date":1700677576,"post_id":77531515,"comment_id":136685163,"body_markdown":"`XmlCodeExporter` supports nullable types, just not the way that querent wanted.  Anyway, WCF is very old technology.  `XmlSerializer` dates from .NET 2 and `DataContractSerializer` dates from .NET 3.  How are you using WCF in .NET 8?  Are you using CoreWCF?","body":"<code>XmlCodeExporter</code> supports nullable types, just not the way that querent wanted.  Anyway, WCF is very old technology.  <code>XmlSerializer</code> dates from .NET 2 and <code>DataContractSerializer</code> dates from .NET 3.  How are you using WCF in .NET 8?  Are you using CoreWCF?"},{"owner":{"account_id":25794941,"reputation":206,"user_id":19538299,"display_name":"QI You"},"score":0,"creation_date":1701250944,"post_id":77531515,"comment_id":136751312,"body_markdown":"Since the code is automatically generated from the WSDL document (it should be via svcutil.exe). I also think you can refer to the documentation for CoreWCF.","body":"Since the code is automatically generated from the WSDL document (it should be via svcutil.exe). I also think you can refer to the documentation for CoreWCF."}],"owner":{"account_id":689,"reputation":151114,"user_id":905,"accept_rate":75,"display_name":"Keith"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700680145,"creation_date":1700669450,"question_id":77531515,"body_markdown":"We have a .NET 8 project (though this was also an issue in .NET 7 and .NET Framework 4.8).\r\n\r\nWe have a vendor SOAP service - they give us a WSDL and we auto-generate a WCF client in Visual Studio.\r\n\r\nThis WSDL is _very_ large, and results in many thousands of lines of C# autogenerated code.\r\n\r\nWe have a problem with one field that causes serialisation errors.\r\n\r\nIn the WSDL this is defined as:\r\n\r\n```xml\r\n&lt;xs:element minOccurs=&quot;0&quot; name=&quot;spend&quot; nillable=&quot;true&quot; type=&quot;xs:decimal&quot;/&gt;\r\n```\r\n\r\nSo in the C# generated code this is a `System.Decimal`/`decimal`.\r\n\r\n```C#\r\n[System.Xml.Serialization.XmlElementAttribute(IsNullable=true, Order=17)]\r\npublic System.Nullable&lt;decimal&gt; spend { ...\r\n```\r\n\r\nHowever, in the SOAP API response we get:\r\n\r\n```xml\r\n&lt;ns:spend&gt;0E-10&lt;/ns:spend&gt;\r\n```\r\n\r\nThis is floating point e-notation, valid for a IEEE754-1985 floating point number, but specifically [not valid for a `decimal`](https://www.w3.org/TR/xmlschema-2/#decimal) - .NET crashes when parsing it.\r\n\r\nIn case this was a bug in .NET&#39;s SOAP implementation we also tested it with https://www.soapui.org, with the same result.\r\n\r\nI _think_ this is the correct behaviour - `0E-10` can become a valid `decimal`, but `12345E-10` would lose data and you don&#39;t want that to happen silently.\r\n\r\nWe know this vendor uses Java, and this appears to be a bug in Java&#39;s `BigDecimal` type. It&#39;s been an issue with SOAP implementations like [JAXB for a long time](https://github.com/javaee/jaxb-v2/issues/386). By default Java&#39;s `BigDecimal.toString()` outputs e-notation. Apparently this [isn&#39;t to hard to fix](https://stackoverflow.com/questions/15834879/format-bigdecimal-without-scientific-notation-with-full-precision) but let&#39;s assume this vendor isn&#39;t going to do that.\r\n\r\nWe _could_ work around this by overriding the type in the generated code:\r\n\r\n```c#\r\npublic System.Nullable&lt;double&gt; spend { \r\n```\r\n\r\nBut then we potentially have inaccuracies (this field holds a cash value) and need to make this change again every time the vendor updates their WSDL (about once every 3 months) and this becomes a nasty bit of technical debt.\r\n\r\nIs there a way in WCF or using Microsoft&#39;s SOAP tools to add a string-parser for this specific field? Or any `decimal` property from this provider? \r\n\r\nHas anyone else worked around this? Java has had this bug for 20 years, there must be other .NET SOAP clients of Java services that had to handle it?","title":"Work around Java BigDecimal outputting e-notation in .NET WCF SOAP client","body":"<p>We have a .NET 8 project (though this was also an issue in .NET 7 and .NET Framework 4.8).</p>\n<p>We have a vendor SOAP service - they give us a WSDL and we auto-generate a WCF client in Visual Studio.</p>\n<p>This WSDL is <em>very</em> large, and results in many thousands of lines of C# autogenerated code.</p>\n<p>We have a problem with one field that causes serialisation errors.</p>\n<p>In the WSDL this is defined as:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xs:element minOccurs=&quot;0&quot; name=&quot;spend&quot; nillable=&quot;true&quot; type=&quot;xs:decimal&quot;/&gt;\n</code></pre>\n<p>So in the C# generated code this is a <code>System.Decimal</code>/<code>decimal</code>.</p>\n<pre><code>[System.Xml.Serialization.XmlElementAttribute(IsNullable=true, Order=17)]\npublic System.Nullable&lt;decimal&gt; spend { ...\n</code></pre>\n<p>However, in the SOAP API response we get:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ns:spend&gt;0E-10&lt;/ns:spend&gt;\n</code></pre>\n<p>This is floating point e-notation, valid for a IEEE754-1985 floating point number, but specifically <a href=\"https://www.w3.org/TR/xmlschema-2/#decimal\" rel=\"nofollow noreferrer\">not valid for a <code>decimal</code></a> - .NET crashes when parsing it.</p>\n<p>In case this was a bug in .NET's SOAP implementation we also tested it with <a href=\"https://www.soapui.org\" rel=\"nofollow noreferrer\">https://www.soapui.org</a>, with the same result.</p>\n<p>I <em>think</em> this is the correct behaviour - <code>0E-10</code> can become a valid <code>decimal</code>, but <code>12345E-10</code> would lose data and you don't want that to happen silently.</p>\n<p>We know this vendor uses Java, and this appears to be a bug in Java's <code>BigDecimal</code> type. It's been an issue with SOAP implementations like <a href=\"https://github.com/javaee/jaxb-v2/issues/386\" rel=\"nofollow noreferrer\">JAXB for a long time</a>. By default Java's <code>BigDecimal.toString()</code> outputs e-notation. Apparently this <a href=\"https://stackoverflow.com/questions/15834879/format-bigdecimal-without-scientific-notation-with-full-precision\">isn't to hard to fix</a> but let's assume this vendor isn't going to do that.</p>\n<p>We <em>could</em> work around this by overriding the type in the generated code:</p>\n<pre class=\"lang-cs prettyprint-override\"><code>public System.Nullable&lt;double&gt; spend { \n</code></pre>\n<p>But then we potentially have inaccuracies (this field holds a cash value) and need to make this change again every time the vendor updates their WSDL (about once every 3 months) and this becomes a nasty bit of technical debt.</p>\n<p>Is there a way in WCF or using Microsoft's SOAP tools to add a string-parser for this specific field? Or any <code>decimal</code> property from this provider?</p>\n<p>Has anyone else worked around this? Java has had this bug for 20 years, there must be other .NET SOAP clients of Java services that had to handle it?</p>\n"},{"tags":["java","cadence"],"owner":{"account_id":29969000,"reputation":1,"user_id":22966863,"display_name":"Mohammed Samir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1700679600,"creation_date":1700679202,"question_id":77532479,"body_markdown":"I&#39;m trying to create a workflow using uber cadence, and using OpenTelemetry to capture the traces, when trying to create a http request from cadence activity, the trace_id and span_id printed as nulls in logs.\r\n\r\ntrying to propagate OpenTelemetry context to cadence workflow","title":"Propagate OpenTelemetry context to uber cadence workflow","body":"<p>I'm trying to create a workflow using uber cadence, and using OpenTelemetry to capture the traces, when trying to create a http request from cadence activity, the trace_id and span_id printed as nulls in logs.</p>\n<p>trying to propagate OpenTelemetry context to cadence workflow</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":19386421,"reputation":37,"user_id":14176037,"display_name":"Rithik Tank"},"score":0,"creation_date":1700655828,"post_id":77529655,"comment_id":136680872,"body_markdown":"I&#39;m afraid not. My email and password still won&#39;t write to the textfile","body":"I&#39;m afraid not. My email and password still won&#39;t write to the textfile"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1700664996,"post_id":77529655,"comment_id":136682646,"body_markdown":"Sorry, that wouldn&#39;t have caused the problem anyway (I was wrong to suggest that as the cause, so I deleted my comment and retracted my close vote).","body":"Sorry, that wouldn&#39;t have caused the problem anyway (I was wrong to suggest that as the cause, so I deleted my comment and retracted my close vote)."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1700665128,"post_id":77529655,"comment_id":136682679,"body_markdown":"Maybe you should check if an exception was thrown. You catch the exception and print the exception message to standard error. Where is that appearing if you&#39;re running on Android? It&#39;s usually a bad idea, in most cases, to have an exception handler that just prints a stack trace. Just remove the catch, and let your exception propagate to its callers. You&#39;ll probably see an error message more easily like that.","body":"Maybe you should check if an exception was thrown. You catch the exception and print the exception message to standard error. Where is that appearing if you&#39;re running on Android? It&#39;s usually a bad idea, in most cases, to have an exception handler that just prints a stack trace. Just remove the catch, and let your exception propagate to its callers. You&#39;ll probably see an error message more easily like that."},{"owner":{"account_id":19386421,"reputation":37,"user_id":14176037,"display_name":"Rithik Tank"},"score":0,"creation_date":1700706329,"post_id":77529655,"comment_id":136688463,"body_markdown":"I tried that but now my application stops responding. Furthermore, it does not print an error message. I&#39;m unsure how to navigate android studio and determine where the error occurs and how to go about resolving it.","body":"I tried that but now my application stops responding. Furthermore, it does not print an error message. I&#39;m unsure how to navigate android studio and determine where the error occurs and how to go about resolving it."}],"answers":[{"tags":[],"owner":{"account_id":23459219,"reputation":34,"user_id":17514282,"display_name":"Arsham"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700679569,"creation_date":1700679569,"answer_id":77532509,"question_id":77529655,"body_markdown":"Try using &quot;equals()&quot; function instead of &quot;==&quot; to compare the content of two String.\r\n\r\nDo this:\r\n\r\n    if (email.equals(&quot;tutor@email.com&quot;) &amp;&amp; password.equals(&quot;tutor123&quot;)) {\r\n                //Line of Issue\r\n                fileHandler.write(email, password, true)\r\n                // -----------\r\n                setContentView(R.layout.tutormenu)\r\n            } else if (email.equals(&quot;student@email.com&quot;) &amp;&amp; password.equals(&quot;student123&quot;))\r\n                setContentView(R.layout.studentmenu)\r\n        }\r\n\r\nThe main difference is that, equals checks the content of two Strings if they have the same contents. But == checks the location of two Strings in memory.","title":"First time trying to use Android and my fileHandler class won&#39;t write the email and password to the textfile &quot;app/accounts.txt&quot;","body":"<p>Try using &quot;equals()&quot; function instead of &quot;==&quot; to compare the content of two String.</p>\n<p>Do this:</p>\n<pre><code>if (email.equals(&quot;tutor@email.com&quot;) &amp;&amp; password.equals(&quot;tutor123&quot;)) {\n            //Line of Issue\n            fileHandler.write(email, password, true)\n            // -----------\n            setContentView(R.layout.tutormenu)\n        } else if (email.equals(&quot;student@email.com&quot;) &amp;&amp; password.equals(&quot;student123&quot;))\n            setContentView(R.layout.studentmenu)\n    }\n</code></pre>\n<p>The main difference is that, equals checks the content of two Strings if they have the same contents. But == checks the location of two Strings in memory.</p>\n"}],"owner":{"account_id":19386421,"reputation":37,"user_id":14176037,"display_name":"Rithik Tank"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700679569,"creation_date":1700653505,"question_id":77529655,"body_markdown":"My FileHandler class does not work in my application but works when I try and run it with coverage in another java file.\r\n\r\n```java\r\npublic class FileHandler {\r\n\r\n    public Scanner fileReader;\r\n    public PrintWriter printWriter;\r\n\r\n    public void write(String email, String password, boolean tutor) {\r\n        try {\r\n            String filePath = &quot;app/accounts.txt&quot;;\r\n            FileWriter fileWriter = new FileWriter(filePath, true);\r\n\r\n            PrintWriter printWriter = new PrintWriter(fileWriter);\r\n            String message = email + &quot;,&quot; + password + &quot;,&quot; + tutor;\r\n            printWriter.println(message);\r\n            printWriter.close();\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n```\r\n```kotlin\r\nclass LoginSignUp : AppCompatActivity() {\r\n\r\n    lateinit var logInButton: Button\r\n    lateinit var signUpButton : Button\r\n    lateinit var emailField: EditText\r\n    lateinit var passwordField : EditText\r\n    lateinit var email : String\r\n    lateinit var password : String\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.loginsignup)\r\n    \r\n        logInButton = findViewById(R.id.login)\r\n        signUpButton = findViewById(R.id.SignUpButton)\r\n        passwordField = findViewById(R.id.EnterPasswordField)\r\n        emailField = findViewById(R.id.EmailAddressField)\r\n    \r\n        logInButton.setOnClickListener {\r\n            email = emailField.getText().toString()\r\n            password = passwordField.getText().toString()\r\n    \r\n            val fileHandler = FileHandler()\r\n            if (email == &quot;tutor@email.com&quot; &amp;&amp; password == &quot;tutor123&quot;) {\r\n                //Line of Issue\r\n                fileHandler.write(email, password, true)\r\n                // -----------\r\n                setContentView(R.layout.tutormenu)\r\n            } else if (email == &quot;student@email.com&quot; &amp;&amp; password == &quot;student123&quot;)\r\n                setContentView(R.layout.studentmenu)\r\n        }\r\n    \r\n        signUpButton.setOnClickListener {\r\n            email = emailField.text.toString()\r\n            password = passwordField.text.toString()\r\n        }\r\n    }\r\n\r\n```\r\n\r\nI&#39;m sure that the loginButton handler works how it is supposed to and have been able to isolate the issue of my code to the fileHandler implementation. Now, I&#39;m not sure how to go about  execution of the fileHandler wherein if the email and password match the specified text they will be written to a file. I thought writing this line of code in my manifest would resolve it but it didn&#39;t.\r\n\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n```\r\n\r\n","title":"First time trying to use Android and my fileHandler class won&#39;t write the email and password to the textfile &quot;app/accounts.txt&quot;","body":"<p>My FileHandler class does not work in my application but works when I try and run it with coverage in another java file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FileHandler {\n\n    public Scanner fileReader;\n    public PrintWriter printWriter;\n\n    public void write(String email, String password, boolean tutor) {\n        try {\n            String filePath = &quot;app/accounts.txt&quot;;\n            FileWriter fileWriter = new FileWriter(filePath, true);\n\n            PrintWriter printWriter = new PrintWriter(fileWriter);\n            String message = email + &quot;,&quot; + password + &quot;,&quot; + tutor;\n            printWriter.println(message);\n            printWriter.close();\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class LoginSignUp : AppCompatActivity() {\n\n    lateinit var logInButton: Button\n    lateinit var signUpButton : Button\n    lateinit var emailField: EditText\n    lateinit var passwordField : EditText\n    lateinit var email : String\n    lateinit var password : String\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.loginsignup)\n    \n        logInButton = findViewById(R.id.login)\n        signUpButton = findViewById(R.id.SignUpButton)\n        passwordField = findViewById(R.id.EnterPasswordField)\n        emailField = findViewById(R.id.EmailAddressField)\n    \n        logInButton.setOnClickListener {\n            email = emailField.getText().toString()\n            password = passwordField.getText().toString()\n    \n            val fileHandler = FileHandler()\n            if (email == &quot;tutor@email.com&quot; &amp;&amp; password == &quot;tutor123&quot;) {\n                //Line of Issue\n                fileHandler.write(email, password, true)\n                // -----------\n                setContentView(R.layout.tutormenu)\n            } else if (email == &quot;student@email.com&quot; &amp;&amp; password == &quot;student123&quot;)\n                setContentView(R.layout.studentmenu)\n        }\n    \n        signUpButton.setOnClickListener {\n            email = emailField.text.toString()\n            password = passwordField.text.toString()\n        }\n    }\n\n</code></pre>\n<p>I'm sure that the loginButton handler works how it is supposed to and have been able to isolate the issue of my code to the fileHandler implementation. Now, I'm not sure how to go about  execution of the fileHandler wherein if the email and password match the specified text they will be written to a file. I thought writing this line of code in my manifest would resolve it but it didn't.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n"},{"tags":["java","jfreechart"],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1700679566,"creation_date":1327300824,"answer_id":8968033,"question_id":8967923,"body_markdown":"Because [`ChartFactory.createWaterfallChart()`][1] instantiates a `CategoryAxis`, simply set the relevant margins:\r\n\r\n    CategoryAxis domainAxis = plot.getDomainAxis();\r\n    domainAxis.setLowerMargin(0);\r\n    domainAxis.setUpperMargin(0);\r\n\r\nAddendum: Note that negative values make the margin smaller, as illustrated [here][2].\r\n\r\n    domainAxis.setLowerMargin(-0.05);\r\n    domainAxis.setUpperMargin(-0.05);\r\n\r\n  [1]: https://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartFactory.html#createWaterfallChart-java.lang.String-java.lang.String-java.lang.String-org.jfree.data.category.CategoryDataset-org.jfree.chart.plot.PlotOrientation-boolean-boolean-boolean-\r\n  [2]: https://github.com/jfree/jfreechart/issues/388","title":"jfreechart - remove spaces in chart","body":"<p>Because <a href=\"https://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartFactory.html#createWaterfallChart-java.lang.String-java.lang.String-java.lang.String-org.jfree.data.category.CategoryDataset-org.jfree.chart.plot.PlotOrientation-boolean-boolean-boolean-\" rel=\"nofollow noreferrer\"><code>ChartFactory.createWaterfallChart()</code></a> instantiates a <code>CategoryAxis</code>, simply set the relevant margins:</p>\n<pre><code>CategoryAxis domainAxis = plot.getDomainAxis();\ndomainAxis.setLowerMargin(0);\ndomainAxis.setUpperMargin(0);\n</code></pre>\n<p>Addendum: Note that negative values make the margin smaller, as illustrated <a href=\"https://github.com/jfree/jfreechart/issues/388\" rel=\"nofollow noreferrer\">here</a>.</p>\n<pre><code>domainAxis.setLowerMargin(-0.05);\ndomainAxis.setUpperMargin(-0.05);\n</code></pre>\n"}],"owner":{"account_id":188971,"reputation":3864,"user_id":428013,"accept_rate":85,"display_name":"Steven"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2231,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":8968033,"answer_count":1,"score":4,"last_activity_date":1700679566,"creation_date":1327300003,"question_id":8967923,"body_markdown":"I am using `JFreeChart`, and I want to remove the left and right spaces in my waterfall chart.\r\n\r\nHere is what my chart looks like right now with the red squiggles to demonstrate the space I want to remove.\r\n\r\n![WaterfallChart][1]\r\n\r\nAny idea how to remove these spaces?\r\n\r\n[1]: http://i.stack.imgur.com/Leoom.png","title":"jfreechart - remove spaces in chart","body":"<p>I am using <code>JFreeChart</code>, and I want to remove the left and right spaces in my waterfall chart.</p>\n\n<p>Here is what my chart looks like right now with the red squiggles to demonstrate the space I want to remove.</p>\n\n<p><img src=\"https://i.stack.imgur.com/Leoom.png\" alt=\"WaterfallChart\"></p>\n\n<p>Any idea how to remove these spaces?</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1700652485,"post_id":77529512,"comment_id":136680306,"body_markdown":"afaik Maven doesn&#39;t self-update. You need to get the version you need","body":"afaik Maven doesn&#39;t self-update. You need to get the version you need"},{"owner":{"account_id":23104779,"reputation":11,"user_id":17213602,"display_name":"Suniti"},"score":0,"creation_date":1700652622,"post_id":77529512,"comment_id":136680337,"body_markdown":"Yes, it does not. So this project that I am working on is using an outdated version of Maven and thus I want to update it in a Pull Request. Looking a solution for that.","body":"Yes, it does not. So this project that I am working on is using an outdated version of Maven and thus I want to update it in a Pull Request. Looking a solution for that."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1700652809,"post_id":77529512,"comment_id":136680367,"body_markdown":"As I said, you need to get (download or otherwise) and use the version you need https://maven.apache.org/download.cgi?.","body":"As I said, you need to get (download or otherwise) and use the version you need <a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">maven.apache.org/download.cgi</a>?."},{"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1700652864,"post_id":77529512,"comment_id":136680384,"body_markdown":"What do you mean by PR.  Pull request?  Please use the full word so that we know what you are saying.","body":"What do you mean by PR.  Pull request?  Please use the full word so that we know what you are saying."},{"owner":{"account_id":23104779,"reputation":11,"user_id":17213602,"display_name":"Suniti"},"score":0,"creation_date":1700652890,"post_id":77529512,"comment_id":136680386,"body_markdown":"This way the version will be updated in my locals only, I want to change it for all other users as well.","body":"This way the version will be updated in my locals only, I want to change it for all other users as well."},{"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1700653086,"post_id":77529512,"comment_id":136680417,"body_markdown":"If you mean &quot;pull request&quot; ... what you want to do cannot be done.  No matter how many times you say that you need it.  The &quot;other users&quot; will need to update their installation of Maven too.","body":"If you mean &quot;pull request&quot; ... what you want to do cannot be done.  No matter how many times you say that you need it.  The &quot;other users&quot; will need to update their installation of Maven too."},{"owner":{"account_id":23104779,"reputation":11,"user_id":17213602,"display_name":"Suniti"},"score":0,"creation_date":1700653231,"post_id":77529512,"comment_id":136680436,"body_markdown":"Does that mean if once we have used a certain maven version for a project (in this case a remote repository), we will have to stick to that version forever and if we want to change the version we can only do it individually by installing the required version?","body":"Does that mean if once we have used a certain maven version for a project (in this case a remote repository), we will have to stick to that version forever and if we want to change the version we can only do it individually by installing the required version?"},{"owner":{"account_id":23104779,"reputation":11,"user_id":17213602,"display_name":"Suniti"},"score":0,"creation_date":1700653501,"post_id":77529512,"comment_id":136680490,"body_markdown":"Reframing the question - How can we update the CI to have a new version of Maven?","body":"Reframing the question - How can we update the CI to have a new version of Maven?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1700657063,"post_id":77529512,"comment_id":136681057,"body_markdown":"Do you use maven wrapper (mvnw) or a pre-installed maven on the CI? Which CI do you use? (please add the answers directly to your question, as they are relevant for an answer).","body":"Do you use maven wrapper (mvnw) or a pre-installed maven on the CI? Which CI do you use? (please add the answers directly to your question, as they are relevant for an answer)."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700656042,"creation_date":1700653474,"answer_id":77529647,"question_id":77529512,"body_markdown":"What you want to do cannot be done.  Maven cannot update itself.  You ... and the other people building your project ... will need to update the version of Maven in the normal way:\r\n\r\n  - If you / they are running builds on workstations, etc, use the platform&#39;s package installer or whatever to update Maven,\r\n\r\n  - If you are doing builds on a CI system, you may need to update the installed Maven on the CI server.  Ask the admin to do it.\r\n\r\n  - If you are publishing your project, put the required Maven version into the project&#39;s build instructions / README file.\r\n\r\n-------------------------\r\n\r\n\r\n&gt; Does that mean if once we have used a certain maven version for a project (in this case a remote repository), we will have to stick to that version forever \r\n\r\nNo ...\r\n\r\n&gt; and if we want to change the version we can only do it individually by installing the required version? \r\n\r\nYes.  Or on the CI server if that is what you are using.\r\n\r\nYou should avoid specifying a tight Maven version constraint in your POM file.  Use version ranges (see the [documentation][1]) ... or no version constraint at all.  (Typically, Maven builds are largely insensitive to the Maven version that is used.)\r\n\r\n-----------------------\r\n\r\n\r\n&gt; How can we update the CI to have a new version of Maven?\r\n\r\nRead the CI system documentation.  That will explain what you need to do.  Or talk to the person who manages it for you.\r\n\r\n\r\n  [1]: https://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html","title":"Update Maven Version","body":"<p>What you want to do cannot be done.  Maven cannot update itself.  You ... and the other people building your project ... will need to update the version of Maven in the normal way:</p>\n<ul>\n<li><p>If you / they are running builds on workstations, etc, use the platform's package installer or whatever to update Maven,</p>\n</li>\n<li><p>If you are doing builds on a CI system, you may need to update the installed Maven on the CI server.  Ask the admin to do it.</p>\n</li>\n<li><p>If you are publishing your project, put the required Maven version into the project's build instructions / README file.</p>\n</li>\n</ul>\n<hr />\n<blockquote>\n<p>Does that mean if once we have used a certain maven version for a project (in this case a remote repository), we will have to stick to that version forever</p>\n</blockquote>\n<p>No ...</p>\n<blockquote>\n<p>and if we want to change the version we can only do it individually by installing the required version?</p>\n</blockquote>\n<p>Yes.  Or on the CI server if that is what you are using.</p>\n<p>You should avoid specifying a tight Maven version constraint in your POM file.  Use version ranges (see the <a href=\"https://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html\" rel=\"nofollow noreferrer\">documentation</a>) ... or no version constraint at all.  (Typically, Maven builds are largely insensitive to the Maven version that is used.)</p>\n<hr />\n<blockquote>\n<p>How can we update the CI to have a new version of Maven?</p>\n</blockquote>\n<p>Read the CI system documentation.  That will explain what you need to do.  Or talk to the person who manages it for you.</p>\n"}],"owner":{"account_id":23104779,"reputation":11,"user_id":17213602,"display_name":"Suniti"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77529647,"answer_count":1,"score":0,"last_activity_date":1700678876,"creation_date":1700652122,"question_id":77529512,"body_markdown":"How can we update the version of maven in a java project. \r\n\r\nI have tried changing the version in pom.xml file but that is leading to build failures when PR is raised. What other things can be done to change the version?\r\n\r\nI want to change this and update the version to 3.8.8\r\n\r\n```\r\n&lt;requireMavenVersion&gt;\r\n   &lt;version&gt;3.3.9&lt;/version&gt;\r\n&lt;/requireMavenVersion&gt;\r\n```","title":"Update Maven Version","body":"<p>How can we update the version of maven in a java project.</p>\n<p>I have tried changing the version in pom.xml file but that is leading to build failures when PR is raised. What other things can be done to change the version?</p>\n<p>I want to change this and update the version to 3.8.8</p>\n<pre><code>&lt;requireMavenVersion&gt;\n   &lt;version&gt;3.3.9&lt;/version&gt;\n&lt;/requireMavenVersion&gt;\n</code></pre>\n"},{"tags":["java","jenkins"],"answers":[{"tags":[],"owner":{"account_id":10725450,"reputation":85,"user_id":7893102,"display_name":"Coolcodehere"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700678569,"creation_date":1700597658,"answer_id":77525703,"question_id":77525341,"body_markdown":"It doesn&#39;t seem like this was documented anywhere but the fields need to have getters for the form to be populated with previous results.\r\n\r\nExamples:\r\n\r\nhttps://github.com/jenkinsci/git-plugin/blob/8293c49a5a053bdad6b2212728ba72e127f88a82/src/main/java/jenkins/plugins/git/GitStep.java#L65\r\n\r\n\r\nhttps://github.com/jenkinsci/git-plugin/blob/master/src/main/resources/jenkins/plugins/git/GitStep/config.jelly","title":"Jenkins Plugin config.jelly get previous input values in config","body":"<p>It doesn't seem like this was documented anywhere but the fields need to have getters for the form to be populated with previous results.</p>\n<p>Examples:</p>\n<p><a href=\"https://github.com/jenkinsci/git-plugin/blob/8293c49a5a053bdad6b2212728ba72e127f88a82/src/main/java/jenkins/plugins/git/GitStep.java#L65\" rel=\"nofollow noreferrer\">https://github.com/jenkinsci/git-plugin/blob/8293c49a5a053bdad6b2212728ba72e127f88a82/src/main/java/jenkins/plugins/git/GitStep.java#L65</a></p>\n<p><a href=\"https://github.com/jenkinsci/git-plugin/blob/master/src/main/resources/jenkins/plugins/git/GitStep/config.jelly\" rel=\"nofollow noreferrer\">https://github.com/jenkinsci/git-plugin/blob/master/src/main/resources/jenkins/plugins/git/GitStep/config.jelly</a></p>\n"}],"owner":{"account_id":10725450,"reputation":85,"user_id":7893102,"display_name":"Coolcodehere"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700678569,"creation_date":1700593268,"question_id":77525341,"body_markdown":"I&#39;m creating a Jenkins plugin and I&#39;m trying to get the form to be automatically filled with previous config values. \r\n\r\nThis is similar to a field I currently have:\r\n```\r\n&lt;strong class=&quot;required-field&quot;&gt;Test&lt;/strong&gt;\r\n&lt;f:entry field=&quot;test&quot;&gt;\r\n    &lt;f:textbox placeholder=&quot;test input&quot;/&gt;\r\n&lt;/f:entry&gt;\r\n```\r\n\r\nI&#39;m trying to do something similar to this but inside a config.jelly file: https://stackoverflow.com/questions/18513130/how-to-remember-parameter-values-used-on-last-build-in-jenkins-hudson\r\n\r\nAny help would be appreciated.","title":"Jenkins Plugin config.jelly get previous input values in config","body":"<p>I'm creating a Jenkins plugin and I'm trying to get the form to be automatically filled with previous config values.</p>\n<p>This is similar to a field I currently have:</p>\n<pre><code>&lt;strong class=&quot;required-field&quot;&gt;Test&lt;/strong&gt;\n&lt;f:entry field=&quot;test&quot;&gt;\n    &lt;f:textbox placeholder=&quot;test input&quot;/&gt;\n&lt;/f:entry&gt;\n</code></pre>\n<p>I'm trying to do something similar to this but inside a config.jelly file: <a href=\"https://stackoverflow.com/questions/18513130/how-to-remember-parameter-values-used-on-last-build-in-jenkins-hudson\">How to remember parameter values used on last build in Jenkins/Hudson</a></p>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","spring-boot","junit","spring-security","spring-cloud"],"comments":[{"owner":{"account_id":197590,"reputation":83537,"user_id":441757,"accept_rate":100,"display_name":"sideshowbarker"},"score":0,"creation_date":1670146223,"post_id":74633891,"comment_id":131801877,"body_markdown":"Comments are not for extended discussion; this conversation has been [moved to chat](https://chat.stackoverflow.com/rooms/250132/discussion-on-question-by-s-n-spring-boot-microservices-servicetest-and-contro).","body":"Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/250132/discussion-on-question-by-s-n-spring-boot-microservices-servicetest-and-contro\">moved to chat</a>."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670175678,"post_id":74633891,"comment_id":131809191,"body_markdown":"@xerx593 How can I define CustomDetailService in order service as I defined in auth service. I also did the same process for other service. How can I do that? I found this link as https://github.com/spring-projects/spring-framework/issues/29215#issuecomment-1263802532","body":"@xerx593 How can I define CustomDetailService in order service as I defined in auth service. I also did the same process for other service. How can I do that? I found this link as <a href=\"https://github.com/spring-projects/spring-framework/issues/29215#issuecomment-1263802532\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/issues/&hellip;</a>"},{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1670261527,"post_id":74633891,"comment_id":131830482,"body_markdown":"Why there are so many steps to run the tests? I&#39;d expect the test to be self-contained and maybe just require docker to be running. I&#39;d suggest you to simplify your test implementation and maybe provide a minimal, reproducible sample.","body":"Why there are so many steps to run the tests? I&#39;d expect the test to be self-contained and maybe just require docker to be running. I&#39;d suggest you to simplify your test implementation and maybe provide a minimal, reproducible sample."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670271145,"post_id":74633891,"comment_id":131833406,"body_markdown":"@MarcusHertdaCoregio I defined zipkin and redis in api gateway and all these are running on docker. I think there is a problem in security config part in order service. I hope you can help me.","body":"@MarcusHertdaCoregio I defined zipkin and redis in api gateway and all these are running on docker. I think there is a problem in security config part in order service. I hope you can help me."},{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1670282897,"post_id":74633891,"comment_id":131836256,"body_markdown":"I think you should isolate your order service in order to figure out the problem. I doubt that zipkin, redis and API gateway had something to do with that. If it is possible, mock those external services in the test scenario.","body":"I think you should isolate your order service in order to figure out the problem. I doubt that zipkin, redis and API gateway had something to do with that. If it is possible, mock those external services in the test scenario."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670283767,"post_id":74633891,"comment_id":131836411,"body_markdown":"@MarcusHertdaCoregio There is no problem in zipkin and redis part in api gateway. My problem is related with Spring security in order service. I think there can be authentication manager problem in security config in order service. As I still couldn&#39;t fix it, I asked it to you.","body":"@MarcusHertdaCoregio There is no problem in zipkin and redis part in api gateway. My problem is related with Spring security in order service. I think there can be authentication manager problem in security config in order service. As I still couldn&#39;t fix it, I asked it to you."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670372834,"post_id":74633891,"comment_id":131860810,"body_markdown":"@DaShaun As I couldn&#39;t fix it, I think you can help me fix my issue which I&#39;ven&#39;t fixed for nearly one week.","body":"@DaShaun As I couldn&#39;t fix it, I think you can help me fix my issue which I&#39;ven&#39;t fixed for nearly one week."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670448389,"post_id":74633891,"comment_id":131881247,"body_markdown":"@MarcusHertdaCoregio I still couldn&#39;t fix the the issue. Is it possible to help me?","body":"@MarcusHertdaCoregio I still couldn&#39;t fix the the issue. Is it possible to help me?"},{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1670449529,"post_id":74633891,"comment_id":131881537,"body_markdown":"Can you please see this answer and check if it makes sense for you? https://stackoverflow.com/questions/74694980/authenticationmanager-authenticate-throws-java-lang-stackoverflowerror-null-w/74706573#74706573","body":"Can you please see this answer and check if it makes sense for you? <a href=\"https://stackoverflow.com/questions/74694980/authenticationmanager-authenticate-throws-java-lang-stackoverflowerror-null-w/74706573#74706573\" title=\"authenticationmanager authenticate throws java lang stackoverflowerror null w\">stackoverflow.com/questions/74694980/&hellip;</a>"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670450138,"post_id":74633891,"comment_id":131881679,"body_markdown":"@MarcusHertdaCoregio I edited my post. Can you look through it if you don&#39;t mind?","body":"@MarcusHertdaCoregio I edited my post. Can you look through it if you don&#39;t mind?"},{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1670450988,"post_id":74633891,"comment_id":131881867,"body_markdown":"It seems to me that you didn’t read my answer on that question with attention. If you are not using AuthenticationProvider you should probably use the UseDetailsService to create a DaoAuthenticationProvider","body":"It seems to me that you didn’t read my answer on that question with attention. If you are not using AuthenticationProvider you should probably use the UseDetailsService to create a DaoAuthenticationProvider"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670451190,"post_id":74633891,"comment_id":131881906,"body_markdown":"@MarcusHertdaCoregio I already defined UseDetailsService in auth service. My issue is in order service as it is a spring cloud example. How can I define UseDetailsService  in order service?","body":"@MarcusHertdaCoregio I already defined UseDetailsService in auth service. My issue is in order service as it is a spring cloud example. How can I define UseDetailsService  in order service?"},{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1670471249,"post_id":74633891,"comment_id":131884961,"body_markdown":"If your order service is a resource server it shouldn’t have any kind of authentication mechanism, just a validation of the token (I’m assuming you are using JWT). In summary, you should not need an AuthenticationManager at all","body":"If your order service is a resource server it shouldn’t have any kind of authentication mechanism, just a validation of the token (I’m assuming you are using JWT). In summary, you should not need an AuthenticationManager at all"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670499778,"post_id":74633891,"comment_id":131891863,"body_markdown":"@MarcusHertdaCoregio I use JWT in order service. What should I do SecurityConfig as I use preAuthorized annotation in ordercontroller?","body":"@MarcusHertdaCoregio I use JWT in order service. What should I do SecurityConfig as I use preAuthorized annotation in ordercontroller?"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670533277,"post_id":74633891,"comment_id":131902841,"body_markdown":"@MarcusHertdaCoregio Is it possible to share the response if you don&#39;t mind?","body":"@MarcusHertdaCoregio Is it possible to share the response if you don&#39;t mind?"},{"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1670593790,"post_id":74633891,"comment_id":131915924,"body_markdown":"I do not know the answer to your question, it is your requirement. I’d say that you should validate the token, retrieve whatever user information is in there (username, authorities) and set it into the SecurityContextHolder","body":"I do not know the answer to your question, it is your requirement. I’d say that you should validate the token, retrieve whatever user information is in there (username, authorities) and set it into the SecurityContextHolder"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670593859,"post_id":74633891,"comment_id":131915946,"body_markdown":"@MarcusHertdaCoregio I removed authenticationManager from security config.","body":"@MarcusHertdaCoregio I removed authenticationManager from security config."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670593917,"post_id":74633891,"comment_id":131915972,"body_markdown":"@MarcusHertdaCoregio Can you look through my another issue not calling another service ? Here is the link : https://stackoverflow.com/questions/74737014/spring-boot-microservice-junit-controller-test-cannot-call-another-service-m","body":"@MarcusHertdaCoregio Can you look through my another issue not calling another service ? Here is the link : <a href=\"https://stackoverflow.com/questions/74737014/spring-boot-microservice-junit-controller-test-cannot-call-another-service-m\" title=\"spring boot microservice junit controller test cannot call another service m\">stackoverflow.com/questions/74737014/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":968934,"reputation":608,"user_id":991862,"accept_rate":40,"display_name":"Stephan Windm&#252;ller"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672927840,"creation_date":1672916518,"answer_id":75017429,"question_id":74633891,"body_markdown":"The error is most likely caused by declaring the AuthenticationManager as a `@Bean`. Try this in your test class:\r\n\r\n```\r\n@MockBean\r\nprivate AuthenticationManager _authenticationManager;\r\n```\r\n\r\nThat said, the Spring Security team does not recommend exposing the AuthenticationManager in this way, see the comment in Spring issue [#29215][1]\r\n\r\n\r\n[1]: https://github.com/spring-projects/spring-framework/issues/29215#issuecomment-1263802532","title":"Spring Boot Microservices - Spring Security - ServiceTest and ControllerTest for JUnit throwing java.lang.StackOverflowError","body":"<p>The error is most likely caused by declaring the AuthenticationManager as a <code>@Bean</code>. Try this in your test class:</p>\n<pre><code>@MockBean\nprivate AuthenticationManager _authenticationManager;\n</code></pre>\n<p>That said, the Spring Security team does not recommend exposing the AuthenticationManager in this way, see the comment in Spring issue <a href=\"https://github.com/spring-projects/spring-framework/issues/29215#issuecomment-1263802532\" rel=\"nofollow noreferrer\">#29215</a></p>\n"},{"tags":[],"owner":{"account_id":29923834,"reputation":1,"user_id":22932333,"display_name":"Mat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700678257,"creation_date":1700678257,"answer_id":77532403,"question_id":74633891,"body_markdown":"I would recommand you instead of relying on Spring to autowire the List&lt;AuthenticationProvider&gt;, explicitly define your authentication providers as beans in your configuration.\r\n\r\nlike:\r\n\r\n```\r\n@Bean\r\npublic AuthenticationProvider myAuthenticationProvider() {\r\n    return new MyAuthenticationProvider();\r\n}\r\n\r\n@Bean\r\npublic AuthenticationManager authenticationManager(AuthenticationProvider myAuthenticationProvider) {\r\n    return new ProviderManager(Collections.singletonList(myAuthenticationProvider));\r\n}\r\n```","title":"Spring Boot Microservices - Spring Security - ServiceTest and ControllerTest for JUnit throwing java.lang.StackOverflowError","body":"<p>I would recommand you instead of relying on Spring to autowire the List, explicitly define your authentication providers as beans in your configuration.</p>\n<p>like:</p>\n<pre><code>@Bean\npublic AuthenticationProvider myAuthenticationProvider() {\n    return new MyAuthenticationProvider();\n}\n\n@Bean\npublic AuthenticationManager authenticationManager(AuthenticationProvider myAuthenticationProvider) {\n    return new ProviderManager(Collections.singletonList(myAuthenticationProvider));\n}\n</code></pre>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1084,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1700678257,"creation_date":1669840690,"question_id":74633891,"body_markdown":"I have a problem in running any test method in service test and controller test in one of the spring boot microservices (order service).\r\n\r\nAfter I completed service and controller , I tried to write their test methods but I have a problem in there.\r\n\r\nHow can I fix it?\r\n\r\nHere is the security config of order service?\r\n\r\n    @Configuration\r\n    @EnableWebSecurity(debug = true)\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    @RequiredArgsConstructor\r\n    public class SecurityConfig {\r\n        //\r\n        private final JwtAuthenticationEntryPoint authenticationEntryPoint;\r\n        private final JWTAccessDeniedHandler accessDeniedHandler;\r\n        private final JwtAuthenticationFilter jwtAuthenticationFilter;\r\n    \r\n    \r\n        @Bean(BeanIds.AUTHENTICATION_MANAGER)\r\n        public AuthenticationManager authenticationManager(final AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n            return authenticationConfiguration.getAuthenticationManager();\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            return http\r\n                    .csrf().disable()\r\n                    .authorizeRequests()\r\n                    .antMatchers(HttpMethod.POST, &quot;/order/**&quot;).hasRole(&quot;USER&quot;)\r\n                    .antMatchers(HttpMethod.GET, &quot;/order/**&quot;).hasRole(&quot;USER&quot;)\r\n                    .and()\r\n                    .authorizeRequests().anyRequest().authenticated()\r\n                    .and()\r\n                    .formLogin().disable()\r\n                    .httpBasic().disable()\r\n                    .exceptionHandling()\r\n                    .authenticationEntryPoint(authenticationEntryPoint)\r\n                    .accessDeniedHandler(accessDeniedHandler)\r\n                    .and()\r\n                    .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)\r\n                    .build();\r\n        }\r\n    \r\n        @Bean\r\n        public WebSecurityCustomizer webSecurityCustomizer() {\r\n            return (web)\r\n                    -&gt; web.ignoring().antMatchers(&quot;/authenticate/signup&quot;, &quot;/authenticate/login&quot;, &quot;/authenticate/refreshtoken&quot;);\r\n        }\r\n    \r\n    }\r\n\r\nHere is one of the test method of OrderServiceTest shown below\r\n\r\n    @DisplayName(&quot;Get Order - Success Scenario&quot;)\r\n    @Test\r\n    void test_When_Order_Success() {\r\n        \r\n        //Mocking\r\n        Order order = getMockOrder();\r\n        when(orderRepository.findById(anyLong()))\r\n                    .thenReturn(Optional.of(order));\r\n        \r\n        when(restTemplate.getForObject(\r\n                    &quot;http://PRODUCT-SERVICE/product/&quot; + order.getProductId(),\r\n                    ProductResponse.class\r\n        )).thenReturn(getMockProductResponse());\r\n        \r\n        when(restTemplate.getForObject(\r\n                    &quot;http://PAYMENT-SERVICE/payment/order/&quot; + order.getId(),\r\n                    PaymentResponse.class\r\n        )).thenReturn(getMockPaymentResponse());\r\n        \r\n        //Actual\r\n        OrderResponse orderResponse = orderService.getOrderDetails(1);\r\n        \r\n        //Verification\r\n        verify(orderRepository, times(1)).findById(anyLong());\r\n        verify(restTemplate, times(1)).getForObject(\r\n                    &quot;http://PRODUCT-SERVICE/product/&quot; + order.getProductId(),\r\n                    ProductResponse.class);\r\n        verify(restTemplate, times(1)).getForObject(\r\n                    &quot;http://PAYMENT-SERVICE/payment/order/&quot; + order.getId(),\r\n                    PaymentResponse.class);\r\n        \r\n        //Assert\r\n        assertNotNull(orderResponse);\r\n        assertEquals(order.getId(), orderResponse.getOrderId());\r\n    }\r\n\r\nHere is one of the test method of OrderControllerTest shown below.\r\n\r\n    @Test\r\n    @DisplayName(&quot;Place Order -- Success Scenario&quot;)\r\n    @WithMockUser(username = &quot;User&quot;, authorities = { &quot;ROLE_USER&quot; })\r\n    void test_When_placeOrder_DoPayment_Success() throws Exception {\r\n\r\n        OrderRequest orderRequest = getMockOrderRequest();\r\n        String jwt = getJWTTokenForRoleUser();\r\n\r\n        MvcResult mvcResult\r\n                = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/order/placeorder&quot;)\r\n                        .contentType(MediaType.APPLICATION_JSON_VALUE)\r\n                        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\r\n                        .content(objectMapper.writeValueAsString(orderRequest)))\r\n                .andExpect(MockMvcResultMatchers.status().isOk())\r\n                .andReturn();\r\n\r\n        String orderId = mvcResult.getResponse().getContentAsString();\r\n\r\n        Optional&lt;Order&gt; order = orderRepository.findById(Long.valueOf(orderId));\r\n        assertTrue(order.isPresent());\r\n\r\n        Order o = order.get();\r\n        assertEquals(Long.parseLong(orderId), o.getId());\r\n        assertEquals(&quot;PLACED&quot;, o.getOrderStatus());\r\n        assertEquals(orderRequest.getTotalAmount(), o.getAmount());\r\n        assertEquals(orderRequest.getQuantity(), o.getQuantity());\r\n    }\r\n\r\nHere is the error when I run any method of service test and controller shown below.\r\n\r\n    java.lang.StackOverflowError\r\n    \tat java.base/java.lang.Throwable.getOurStackTrace(Throwable.java:861)\r\n    \tat java.base/java.lang.Throwable.getStackTrace(Throwable.java:853)\r\n    \tat ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:79)\r\n        ...\r\n        ...\r\n\r\n**To run the app,**\r\n\r\n1 ) Run Service Registery (Eureka Server)\r\n\r\n2 ) Run config server\r\n\r\n3 ) Run zipkin and redis through these commands shown below on docker\r\n\r\n      docker run -d -p 9411:9411 openzipkin/zipkin\r\n      docker run -d --name redis -p 6379:6379 redis\r\n\r\n4 ) Run api gateway\r\n\r\n5 ) Run other services\r\n\r\nHere is the repo : [Link][1]\r\n\r\nHere is the **result of the service test** screenshot : [Link][2]\r\n\r\nHere is the **result of the controller test** screenshot : [Link][3]\r\n\r\n  [1]: https://github.com/Rapter1990/microservicecoursedailybuffer\r\n  [2]: https://ibb.co/FwmdLLS\r\n  [3]: https://ibb.co/MZwD22Q\r\n\r\nEdited\r\n\r\nReplace \r\n\r\n    @Bean(BeanIds.AUTHENTICATION_MANAGER)\r\n    public AuthenticationManager authenticationManager(final AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n            return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\nwith\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(List&lt;AuthenticationProvider&gt; myAuthenticationProviders) {\r\n            return new ProviderManager(myAuthenticationProviders);\r\n    }\r\n\r\n\r\nin secuity config of order service.\r\n\r\n\r\nHere is the error message shown below.\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;authenticationManager&#39; defined in class path resource [com/microservice/orderservice/config/SecurityConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.authentication.AuthenticationManager]: Factory method &#39;authenticationManager&#39; threw exception; nested exception is java.lang.IllegalArgumentException: A parent AuthenticationManager or a list of AuthenticationProviders is required\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\r\n    \tat com.microservice.orderservice.OrderServiceApplication.main(OrderServiceApplication.java:15) ~[classes/:na]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.authentication.AuthenticationManager]: Factory method &#39;authenticationManager&#39; threw exception; nested exception is java.lang.IllegalArgumentException: A parent AuthenticationManager or a list of AuthenticationProviders is required\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \t... 19 common frames omitted\r\n    Caused by: java.lang.IllegalArgumentException: A parent AuthenticationManager or a list of AuthenticationProviders is required\r\n    \tat org.springframework.util.Assert.isTrue(Assert.java:121) ~[spring-core-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.security.authentication.ProviderManager.checkState(ProviderManager.java:138) ~[spring-security-core-5.7.3.jar:5.7.3]\r\n    \tat org.springframework.security.authentication.ProviderManager.&lt;init&gt;(ProviderManager.java:129) ~[spring-security-core-5.7.3.jar:5.7.3]\r\n    \tat org.springframework.security.authentication.ProviderManager.&lt;init&gt;(ProviderManager.java:117) ~[spring-security-core-5.7.3.jar:5.7.3]\r\n    \tat com.microservice.orderservice.config.SecurityConfig.authenticationManager(SecurityConfig.java:42) ~[classes/:na]\r\n    \tat com.microservice.orderservice.config.SecurityConfig$$EnhancerBySpringCGLIB$$83744c5.CGLIB$authenticationManager$0(&lt;generated&gt;) ~[classes/:na]\r\n    \tat com.microservice.orderservice.config.SecurityConfig$$EnhancerBySpringCGLIB$$83744c5$$FastClassBySpringCGLIB$$8d59030c.invoke(&lt;generated&gt;) ~[classes/:na]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.3.22.jar:5.3.22]\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.3.22.jar:5.3.22]\r\n    \tat com.microservice.orderservice.config.SecurityConfig$$EnhancerBySpringCGLIB$$83744c5.authenticationManager(&lt;generated&gt;) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.22.jar:5.3.22]\r\n    \t... 20 common frames omitted\r\n\r\n","title":"Spring Boot Microservices - Spring Security - ServiceTest and ControllerTest for JUnit throwing java.lang.StackOverflowError","body":"<p>I have a problem in running any test method in service test and controller test in one of the spring boot microservices (order service).</p>\n<p>After I completed service and controller , I tried to write their test methods but I have a problem in there.</p>\n<p>How can I fix it?</p>\n<p>Here is the security config of order service?</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\n@EnableGlobalMethodSecurity(prePostEnabled = true)\n@RequiredArgsConstructor\npublic class SecurityConfig {\n    //\n    private final JwtAuthenticationEntryPoint authenticationEntryPoint;\n    private final JWTAccessDeniedHandler accessDeniedHandler;\n    private final JwtAuthenticationFilter jwtAuthenticationFilter;\n\n\n    @Bean(BeanIds.AUTHENTICATION_MANAGER)\n    public AuthenticationManager authenticationManager(final AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n                .csrf().disable()\n                .authorizeRequests()\n                .antMatchers(HttpMethod.POST, &quot;/order/**&quot;).hasRole(&quot;USER&quot;)\n                .antMatchers(HttpMethod.GET, &quot;/order/**&quot;).hasRole(&quot;USER&quot;)\n                .and()\n                .authorizeRequests().anyRequest().authenticated()\n                .and()\n                .formLogin().disable()\n                .httpBasic().disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(authenticationEntryPoint)\n                .accessDeniedHandler(accessDeniedHandler)\n                .and()\n                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)\n                .build();\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web)\n                -&gt; web.ignoring().antMatchers(&quot;/authenticate/signup&quot;, &quot;/authenticate/login&quot;, &quot;/authenticate/refreshtoken&quot;);\n    }\n\n}\n</code></pre>\n<p>Here is one of the test method of OrderServiceTest shown below</p>\n<pre><code>@DisplayName(&quot;Get Order - Success Scenario&quot;)\n@Test\nvoid test_When_Order_Success() {\n    \n    //Mocking\n    Order order = getMockOrder();\n    when(orderRepository.findById(anyLong()))\n                .thenReturn(Optional.of(order));\n    \n    when(restTemplate.getForObject(\n                &quot;http://PRODUCT-SERVICE/product/&quot; + order.getProductId(),\n                ProductResponse.class\n    )).thenReturn(getMockProductResponse());\n    \n    when(restTemplate.getForObject(\n                &quot;http://PAYMENT-SERVICE/payment/order/&quot; + order.getId(),\n                PaymentResponse.class\n    )).thenReturn(getMockPaymentResponse());\n    \n    //Actual\n    OrderResponse orderResponse = orderService.getOrderDetails(1);\n    \n    //Verification\n    verify(orderRepository, times(1)).findById(anyLong());\n    verify(restTemplate, times(1)).getForObject(\n                &quot;http://PRODUCT-SERVICE/product/&quot; + order.getProductId(),\n                ProductResponse.class);\n    verify(restTemplate, times(1)).getForObject(\n                &quot;http://PAYMENT-SERVICE/payment/order/&quot; + order.getId(),\n                PaymentResponse.class);\n    \n    //Assert\n    assertNotNull(orderResponse);\n    assertEquals(order.getId(), orderResponse.getOrderId());\n}\n</code></pre>\n<p>Here is one of the test method of OrderControllerTest shown below.</p>\n<pre><code>@Test\n@DisplayName(&quot;Place Order -- Success Scenario&quot;)\n@WithMockUser(username = &quot;User&quot;, authorities = { &quot;ROLE_USER&quot; })\nvoid test_When_placeOrder_DoPayment_Success() throws Exception {\n\n    OrderRequest orderRequest = getMockOrderRequest();\n    String jwt = getJWTTokenForRoleUser();\n\n    MvcResult mvcResult\n            = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/order/placeorder&quot;)\n                    .contentType(MediaType.APPLICATION_JSON_VALUE)\n                    .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\n                    .content(objectMapper.writeValueAsString(orderRequest)))\n            .andExpect(MockMvcResultMatchers.status().isOk())\n            .andReturn();\n\n    String orderId = mvcResult.getResponse().getContentAsString();\n\n    Optional&lt;Order&gt; order = orderRepository.findById(Long.valueOf(orderId));\n    assertTrue(order.isPresent());\n\n    Order o = order.get();\n    assertEquals(Long.parseLong(orderId), o.getId());\n    assertEquals(&quot;PLACED&quot;, o.getOrderStatus());\n    assertEquals(orderRequest.getTotalAmount(), o.getAmount());\n    assertEquals(orderRequest.getQuantity(), o.getQuantity());\n}\n</code></pre>\n<p>Here is the error when I run any method of service test and controller shown below.</p>\n<pre><code>java.lang.StackOverflowError\n    at java.base/java.lang.Throwable.getOurStackTrace(Throwable.java:861)\n    at java.base/java.lang.Throwable.getStackTrace(Throwable.java:853)\n    at ch.qos.logback.classic.spi.ThrowableProxy.&lt;init&gt;(ThrowableProxy.java:79)\n    ...\n    ...\n</code></pre>\n<p><strong>To run the app,</strong></p>\n<p>1 ) Run Service Registery (Eureka Server)</p>\n<p>2 ) Run config server</p>\n<p>3 ) Run zipkin and redis through these commands shown below on docker</p>\n<pre><code>  docker run -d -p 9411:9411 openzipkin/zipkin\n  docker run -d --name redis -p 6379:6379 redis\n</code></pre>\n<p>4 ) Run api gateway</p>\n<p>5 ) Run other services</p>\n<p>Here is the repo : <a href=\"https://github.com/Rapter1990/microservicecoursedailybuffer\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Here is the <strong>result of the service test</strong> screenshot : <a href=\"https://ibb.co/FwmdLLS\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Here is the <strong>result of the controller test</strong> screenshot : <a href=\"https://ibb.co/MZwD22Q\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Edited</p>\n<p>Replace</p>\n<pre><code>@Bean(BeanIds.AUTHENTICATION_MANAGER)\npublic AuthenticationManager authenticationManager(final AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n}\n</code></pre>\n<p>with</p>\n<pre><code>@Bean\npublic AuthenticationManager authenticationManager(List&lt;AuthenticationProvider&gt; myAuthenticationProviders) {\n        return new ProviderManager(myAuthenticationProviders);\n}\n</code></pre>\n<p>in secuity config of order service.</p>\n<p>Here is the error message shown below.</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'authenticationManager' defined in class path resource [com/microservice/orderservice/config/SecurityConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.authentication.AuthenticationManager]: Factory method 'authenticationManager' threw exception; nested exception is java.lang.IllegalArgumentException: A parent AuthenticationManager or a list of AuthenticationProviders is required\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.22.jar:5.3.22]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.3.jar:2.7.3]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.3.jar:2.7.3]\n    at com.microservice.orderservice.OrderServiceApplication.main(OrderServiceApplication.java:15) ~[classes/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.authentication.AuthenticationManager]: Factory method 'authenticationManager' threw exception; nested exception is java.lang.IllegalArgumentException: A parent AuthenticationManager or a list of AuthenticationProviders is required\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.22.jar:5.3.22]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.22.jar:5.3.22]\n    ... 19 common frames omitted\nCaused by: java.lang.IllegalArgumentException: A parent AuthenticationManager or a list of AuthenticationProviders is required\n    at org.springframework.util.Assert.isTrue(Assert.java:121) ~[spring-core-5.3.22.jar:5.3.22]\n    at org.springframework.security.authentication.ProviderManager.checkState(ProviderManager.java:138) ~[spring-security-core-5.7.3.jar:5.7.3]\n    at org.springframework.security.authentication.ProviderManager.&lt;init&gt;(ProviderManager.java:129) ~[spring-security-core-5.7.3.jar:5.7.3]\n    at org.springframework.security.authentication.ProviderManager.&lt;init&gt;(ProviderManager.java:117) ~[spring-security-core-5.7.3.jar:5.7.3]\n    at com.microservice.orderservice.config.SecurityConfig.authenticationManager(SecurityConfig.java:42) ~[classes/:na]\n    at com.microservice.orderservice.config.SecurityConfig$$EnhancerBySpringCGLIB$$83744c5.CGLIB$authenticationManager$0(&lt;generated&gt;) ~[classes/:na]\n    at com.microservice.orderservice.config.SecurityConfig$$EnhancerBySpringCGLIB$$83744c5$$FastClassBySpringCGLIB$$8d59030c.invoke(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.3.22.jar:5.3.22]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.3.22.jar:5.3.22]\n    at com.microservice.orderservice.config.SecurityConfig$$EnhancerBySpringCGLIB$$83744c5.authenticationManager(&lt;generated&gt;) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.22.jar:5.3.22]\n    ... 20 common frames omitted\n</code></pre>\n"},{"tags":["java","android","gradle","onesignal"],"answers":[{"tags":[],"owner":{"account_id":29004116,"reputation":337,"user_id":22217083,"display_name":"Sarah"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691340878,"creation_date":1691340878,"answer_id":76846898,"question_id":76846824,"body_markdown":"Check Dependencies and Versions.\r\nMake sure you have the correct version of the OneSignal plugin and other related dependencies in your project&#39;s build.gradle files. Please verify that the plugin version matches your project&#39;s requirements.\r\n\r\nOr, Update the Plugin.\r\nIf you&#39;re using an older version of the OneSignal plugin, try updating it to the latest version. Check the OneSignal documentation or GitHub repository for the latest version and instructions on how to update.","title":"Failed to apply plugin &#39;com.onesignal.androidsdk.onesignal-gradle-plugin&#39;","body":"<p>Check Dependencies and Versions.\nMake sure you have the correct version of the OneSignal plugin and other related dependencies in your project's build.gradle files. Please verify that the plugin version matches your project's requirements.</p>\n<p>Or, Update the Plugin.\nIf you're using an older version of the OneSignal plugin, try updating it to the latest version. Check the OneSignal documentation or GitHub repository for the latest version and instructions on how to update.</p>\n"},{"tags":[],"owner":{"account_id":13300760,"reputation":51,"user_id":9602343,"display_name":"Rander Leal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700677994,"creation_date":1700677994,"answer_id":77532377,"question_id":76846824,"body_markdown":"This happened to me when i update my android studio to giraffe,\r\nI just changed my dependencies from :\r\n\r\n   ` classpath &#39;com.android.tools.build:gradle:3.6.2&#39;` \r\n\r\n ` classpath &quot;gradle.plugin.com.onesignal:onesignal-gradle-plugin:0.12.6&quot;`     \r\n\r\nTo:\r\n\r\n ` classpath &#39;com.android.tools.build:gradle:7.0.0&#39; `\r\n\r\n` classpath &quot;gradle.plugin.com.onesignal:onesignal-gradle-plugin:0.13.4&quot; `\r\n\r\nLook here :\r\nhttps://github.com/OneSignal/OneSignal-Android-SDK/issues/1399#issuecomment-889816863","title":"Failed to apply plugin &#39;com.onesignal.androidsdk.onesignal-gradle-plugin&#39;","body":"<p>This happened to me when i update my android studio to giraffe,\nI just changed my dependencies from :</p>\n<p><code> classpath 'com.android.tools.build:gradle:3.6.2'</code></p>\n<p><code> classpath &quot;gradle.plugin.com.onesignal:onesignal-gradle-plugin:0.12.6&quot;</code></p>\n<p>To:</p>\n<p><code>classpath 'com.android.tools.build:gradle:7.0.0'</code></p>\n<p><code>classpath &quot;gradle.plugin.com.onesignal:onesignal-gradle-plugin:0.13.4&quot;</code></p>\n<p>Look here :\n<a href=\"https://github.com/OneSignal/OneSignal-Android-SDK/issues/1399#issuecomment-889816863\" rel=\"nofollow noreferrer\">https://github.com/OneSignal/OneSignal-Android-SDK/issues/1399#issuecomment-889816863</a></p>\n"}],"owner":{"account_id":17900577,"reputation":11,"user_id":13004914,"display_name":"Alhassan Abubakar Sadiq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":429,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700677994,"creation_date":1691339658,"question_id":76846824,"body_markdown":"i face this error when i try to open my project om android studio\r\n\r\nA problem occurred evaluating project &#39;:app&#39;.\r\n&gt; Failed to apply plugin &#39;com.onesignal.androidsdk.onesignal-gradle-plugin&#39;.\r\n   &gt; Could not create plugin of type &#39;GradleProjectPlugin&#39;.\r\n      &gt; Could not initialize class com.onesignal.androidsdk.GradleProjectPlugin\r\n\r\ni try: invalid cache ","title":"Failed to apply plugin &#39;com.onesignal.androidsdk.onesignal-gradle-plugin&#39;","body":"<p>i face this error when i try to open my project om android studio</p>\n<p>A problem occurred evaluating project ':app'.</p>\n<blockquote>\n<p>Failed to apply plugin 'com.onesignal.androidsdk.onesignal-gradle-plugin'.\nCould not create plugin of type 'GradleProjectPlugin'.\n&gt; Could not initialize class com.onesignal.androidsdk.GradleProjectPlugin</p>\n</blockquote>\n<p>i try: invalid cache</p>\n"},{"tags":["java","spring","spring-boot","jackson"],"comments":[{"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1699900352,"post_id":77475676,"comment_id":136586336,"body_markdown":"It is not clear what happens. You say &quot;the exception is caught but the custom error is not thrown&quot;, and the title is &quot;Jackson Not Throwing Custom Exception&quot;, but are you really sure **this** is what really happens? Put some print into the exception constructor, or use the debugger. I suspect that the exception **is** *thrown*, but not caught by the error handler. Please verify it. And btw what is a &quot;requisition&quot;? Do you mean a request? :)","body":"It is not clear what happens. You say &quot;the exception is caught but the custom error is not thrown&quot;, and the title is &quot;Jackson Not Throwing Custom Exception&quot;, but are you really sure <b>this</b> is what really happens? Put some print into the exception constructor, or use the debugger. I suspect that the exception <b>is</b> <i>thrown</i>, but not caught by the error handler. Please verify it. And btw what is a &quot;requisition&quot;? Do you mean a request? :)"},{"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1699900696,"post_id":77475676,"comment_id":136586379,"body_markdown":"I have a quick theory, that you should use `@RestControllerAdvice` (https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestControllerAdvice.html) and not just `@ControllerAdvice`. What is the Raw response? Is it some html code?","body":"I have a quick theory, that you should use <code>@RestControllerAdvice</code> (<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestControllerAdvice.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/or&zwnj;&#8203;g/&hellip;</a>) and not just <code>@ControllerAdvice</code>. What is the Raw response? Is it some html code?"}],"answers":[{"tags":[],"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699900983,"creation_date":1699900983,"answer_id":77476144,"question_id":77475676,"body_markdown":"Try using [`@RestControllerAdvice`][1] instead of `@ControllerAdvice`.\r\n\r\nI believe that your code actually *does* throw the `InvalidDateFormatException`, but it is not handled later as you expect.\r\n\r\nThe title of your question probably should not be &quot;Jackson Not Throwing Custom Exception&quot;, but &quot;Rest Controller doesn&#39;t return error as JSON&quot; or similar.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestControllerAdvice.html","title":"Jackson Not Throwing Custom Exception","body":"<p>Try using <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestControllerAdvice.html\" rel=\"nofollow noreferrer\"><code>@RestControllerAdvice</code></a> instead of <code>@ControllerAdvice</code>.</p>\n<p>I believe that your code actually <em>does</em> throw the <code>InvalidDateFormatException</code>, but it is not handled later as you expect.</p>\n<p>The title of your question probably should not be &quot;Jackson Not Throwing Custom Exception&quot;, but &quot;Rest Controller doesn't return error as JSON&quot; or similar.</p>\n"},{"tags":[],"owner":{"account_id":16036243,"reputation":154,"user_id":11573887,"display_name":"Henry Xiloj Herrera"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700599510,"creation_date":1700599510,"answer_id":77525837,"question_id":77475676,"body_markdown":"Just I make few changes I hope to help you. \r\n\r\nI created JacksonConfig, you can check I haved called your class here (**LocalDateDeserializer()**)\r\n\r\n   \r\n\r\n     import com.fasterxml.jackson.databind.ObjectMapper;\r\n        import com.fasterxml.jackson.databind.module.SimpleModule;\r\n        import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;\r\n        import com.henry.stackoverflowdemo.exception.LocalDateDeserializer;\r\n        import org.springframework.context.annotation.Bean;\r\n        import org.springframework.context.annotation.Configuration;\r\n    \r\n        import java.time.LocalDate;\r\n    \r\n        @Configuration\r\n        public class JacksonConfig {\r\n    \r\n        @Bean\r\n        public ObjectMapper objectMapper() {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n         \r\n            objectMapper.registerModule(new JavaTimeModule());\r\n    \r\n           \r\n            SimpleModule simpleModule = new SimpleModule();\r\n            simpleModule.addDeserializer(LocalDate.class, new LocalDateDeserializer());\r\n            objectMapper.registerModule(simpleModule);\r\n    \r\n            return objectMapper;\r\n        } }\r\n\r\nSo make public your constructor instead of protected\r\n\r\n  \r\n\r\n    public LocalDateDeserializer() {\r\n            super(LocalDate.class);\r\n        }\r\n\r\na few changes in ApplicationExceptionHandler class:\r\n\r\n    @ControllerAdvice\r\n    public class ApplicationExceptionHandler {\r\n    \r\n        @ExceptionHandler({ InvalidDateFormatException.class })\r\n        @ResponseStatus(value = HttpStatus.BAD_REQUEST)\r\n        @ResponseBody\r\n        public ResponseEntity&lt;Object&gt; handleInvalidDateFormatException(InvalidDateFormatException ex) {\r\n            return new ResponseEntity&lt;&gt;(ex.getMessage(), createHeader(), HttpStatus.BAD_REQUEST);\r\n        }\r\n        \r\n        private HttpHeaders createHeader() {\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.add(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\r\n            return headers;\r\n        }\r\n    }\r\n\r\nRemove **@JsonDeserialize**\r\n\r\n    @NotNull\r\n        @Schema(description = &quot;BIRTH DATE&quot;, example = &quot;1992-02-15&quot;)\r\n        private LocalDate birthDate;\r\n\r\nI suppose you work with POST request in this case should be work.\r\n\r\n","title":"Jackson Not Throwing Custom Exception","body":"<p>Just I make few changes I hope to help you.</p>\n<p>I created JacksonConfig, you can check I haved called your class here (<strong>LocalDateDeserializer()</strong>)</p>\n<pre><code> import com.fasterxml.jackson.databind.ObjectMapper;\n    import com.fasterxml.jackson.databind.module.SimpleModule;\n    import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;\n    import com.henry.stackoverflowdemo.exception.LocalDateDeserializer;\n    import org.springframework.context.annotation.Bean;\n    import org.springframework.context.annotation.Configuration;\n\n    import java.time.LocalDate;\n\n    @Configuration\n    public class JacksonConfig {\n\n    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper objectMapper = new ObjectMapper();\n\n     \n        objectMapper.registerModule(new JavaTimeModule());\n\n       \n        SimpleModule simpleModule = new SimpleModule();\n        simpleModule.addDeserializer(LocalDate.class, new LocalDateDeserializer());\n        objectMapper.registerModule(simpleModule);\n\n        return objectMapper;\n    } }\n</code></pre>\n<p>So make public your constructor instead of protected</p>\n<pre><code>public LocalDateDeserializer() {\n        super(LocalDate.class);\n    }\n</code></pre>\n<p>a few changes in ApplicationExceptionHandler class:</p>\n<pre><code>@ControllerAdvice\npublic class ApplicationExceptionHandler {\n\n    @ExceptionHandler({ InvalidDateFormatException.class })\n    @ResponseStatus(value = HttpStatus.BAD_REQUEST)\n    @ResponseBody\n    public ResponseEntity&lt;Object&gt; handleInvalidDateFormatException(InvalidDateFormatException ex) {\n        return new ResponseEntity&lt;&gt;(ex.getMessage(), createHeader(), HttpStatus.BAD_REQUEST);\n    }\n    \n    private HttpHeaders createHeader() {\n        HttpHeaders headers = new HttpHeaders();\n        headers.add(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);\n        return headers;\n    }\n}\n</code></pre>\n<p>Remove <strong>@JsonDeserialize</strong></p>\n<pre><code>@NotNull\n    @Schema(description = &quot;BIRTH DATE&quot;, example = &quot;1992-02-15&quot;)\n    private LocalDate birthDate;\n</code></pre>\n<p>I suppose you work with POST request in this case should be work.</p>\n"},{"tags":[],"owner":{"account_id":22762575,"reputation":25,"user_id":16921153,"display_name":"Jossany Moura"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700677457,"creation_date":1700677457,"answer_id":77532334,"question_id":77475676,"body_markdown":"What actually solved my problem was to add the following config in bootstrap.yml:\r\n\r\n  \r\n\r\n    jackson:\r\n        deserialization:\r\n          wrap-exceptions: false","title":"Jackson Not Throwing Custom Exception","body":"<p>What actually solved my problem was to add the following config in bootstrap.yml:</p>\n<pre><code>jackson:\n    deserialization:\n      wrap-exceptions: false\n</code></pre>\n"}],"owner":{"account_id":22762575,"reputation":25,"user_id":16921153,"display_name":"Jossany Moura"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77532334,"answer_count":3,"score":0,"last_activity_date":1700677457,"creation_date":1699895872,"question_id":77475676,"body_markdown":"I have the following field in my requisition\r\n```\r\n@NotNull\r\n    @JsonDeserialize(using = LocalDateDeserializer.class)\r\n    @Schema(description = &quot;BIRTH DATE&quot;, example = &quot;1992-02-15&quot;)\r\n    private LocalDate birthDate;\r\n```\r\n\r\nSo I set up the following jackson deserializer:\r\n```\r\npublic class LocalDateDeserializer extends StdDeserializer&lt;LocalDate&gt; {\r\n\r\n    private static final DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\r\n\r\n    protected LocalDateDeserializer() {\r\n        super(LocalDate.class);\r\n    }\r\n\r\n    @Override\r\n    public LocalDate deserialize(\r\n            final JsonParser jsonParser,\r\n            final DeserializationContext deserializationContext)\r\n            throws IOException {\r\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\r\n        String date = node.asText();\r\n\r\n        try {\r\n            return LocalDate.parse(date, DATE_TIME_FORMATTER);\r\n        } catch (Exception e) {\r\n            throw new InvalidDateFormatException(&quot;Invalid format&quot; + date);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is my custom exception class:\r\n```\r\npublic class InvalidDateFormatException extends RuntimeException {\r\n    public InvalidDateFormatException(final String message) {\r\n        super(message);\r\n    }\r\n}\r\n```\r\n\r\nThis is my ApplicationExceptionHandler class:\r\n```\r\n@ControllerAdvice\r\npublic class ApplicationExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n    public static final String MISSING_HEADER_MESSAGE = &quot;{0} header must be informed&quot;;\r\n\r\n    @ExceptionHandler(InvalidDateFormatException.class)\r\n    public ResponseEntity&lt;String&gt; handleInvalidDateFormatException(InvalidDateFormatException ex) {\r\n        // Customize the response based on your needs\r\n        return new ResponseEntity&lt;&gt;(ex.getMessage(), HttpStatus.BAD_REQUEST);\r\n    }\r\n```\r\n\r\n**When I send the requisition with a birthDate wrong formatted the code enters in the deserializer, the exception is caught but the custom error is not thrown.** I just got a generic 400 like the image below:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/whAaS.png\r\n\r\nI don&#39;t have any more clues about how to solve this problem.","title":"Jackson Not Throwing Custom Exception","body":"<p>I have the following field in my requisition</p>\n<pre><code>@NotNull\n    @JsonDeserialize(using = LocalDateDeserializer.class)\n    @Schema(description = &quot;BIRTH DATE&quot;, example = &quot;1992-02-15&quot;)\n    private LocalDate birthDate;\n</code></pre>\n<p>So I set up the following jackson deserializer:</p>\n<pre><code>public class LocalDateDeserializer extends StdDeserializer&lt;LocalDate&gt; {\n\n    private static final DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\n\n    protected LocalDateDeserializer() {\n        super(LocalDate.class);\n    }\n\n    @Override\n    public LocalDate deserialize(\n            final JsonParser jsonParser,\n            final DeserializationContext deserializationContext)\n            throws IOException {\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\n        String date = node.asText();\n\n        try {\n            return LocalDate.parse(date, DATE_TIME_FORMATTER);\n        } catch (Exception e) {\n            throw new InvalidDateFormatException(&quot;Invalid format&quot; + date);\n        }\n    }\n}\n</code></pre>\n<p>This is my custom exception class:</p>\n<pre><code>public class InvalidDateFormatException extends RuntimeException {\n    public InvalidDateFormatException(final String message) {\n        super(message);\n    }\n}\n</code></pre>\n<p>This is my ApplicationExceptionHandler class:</p>\n<pre><code>@ControllerAdvice\npublic class ApplicationExceptionHandler extends ResponseEntityExceptionHandler {\n\n    public static final String MISSING_HEADER_MESSAGE = &quot;{0} header must be informed&quot;;\n\n    @ExceptionHandler(InvalidDateFormatException.class)\n    public ResponseEntity&lt;String&gt; handleInvalidDateFormatException(InvalidDateFormatException ex) {\n        // Customize the response based on your needs\n        return new ResponseEntity&lt;&gt;(ex.getMessage(), HttpStatus.BAD_REQUEST);\n    }\n</code></pre>\n<p><strong>When I send the requisition with a birthDate wrong formatted the code enters in the deserializer, the exception is caught but the custom error is not thrown.</strong> I just got a generic 400 like the image below:\n<a href=\"https://i.stack.imgur.com/whAaS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/whAaS.png\" alt=\"enter image description here\" /></a></p>\n<p>I don't have any more clues about how to solve this problem.</p>\n"},{"tags":["java","wix","licensing","java-17","jpackage"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700676945,"creation_date":1700676945,"answer_id":77532291,"question_id":77531677,"body_markdown":"Taken from https://wixtoolset.org/docs/about/#license:\r\n\r\n*The WiX toolset is released under the Microsoft Reciprocal License (MS-RL). A reciprocal license is used to ensure that others who build on the effort of the WiX community give back to the WiX community. Specifically the license requires that fixes and improvements to the WiX toolset must be published using the same license.\r\nSometimes the reciprocal license is incorrectly interpreted to also apply to bundles, packages, and custom actions built using the WiX toolset. The Outercurve Foundation has previously provided this statement below to clarify which now the .NET Foundation reaffirms:\r\n    The WiX toolset (WiX) is licensed under the Microsoft Reciprocal License (MS-RL). The MS-RL governs the distribution of the software licensed under it, as well as derivative works, and incorporates the definition of a derivative work provided in U.S. copyright law. **OuterCurve Foundation (and the .NET Foundation) does not view the installer packages generated by WiX as falling within the definition of a derivative work, merely because they are produced using WiX. Thus, the installer packages generated by WiX will normally fall outside the scope of the MS-RL, and any of your source code, binaries, libraries, routines or other software components that are incorporated in installer packages generated by WiX can be governed by other licensing terms.**\r\nThe full text of the MS-RL license is reproduced below. It can also be found in the LICENSE.TXT file included with the source code.*\r\n\r\nI am no lawyer, but the text marked up bold would tell me I should not worry about my creative work that uses WIX. Only if I modify/improve WIX itself the same license has to be applied.","title":"JPackage, WIX and license","body":"<p>Taken from <a href=\"https://wixtoolset.org/docs/about/#license\" rel=\"nofollow noreferrer\">https://wixtoolset.org/docs/about/#license</a>:</p>\n<p><em>The WiX toolset is released under the Microsoft Reciprocal License (MS-RL). A reciprocal license is used to ensure that others who build on the effort of the WiX community give back to the WiX community. Specifically the license requires that fixes and improvements to the WiX toolset must be published using the same license.\nSometimes the reciprocal license is incorrectly interpreted to also apply to bundles, packages, and custom actions built using the WiX toolset. The Outercurve Foundation has previously provided this statement below to clarify which now the .NET Foundation reaffirms:\nThe WiX toolset (WiX) is licensed under the Microsoft Reciprocal License (MS-RL). The MS-RL governs the distribution of the software licensed under it, as well as derivative works, and incorporates the definition of a derivative work provided in U.S. copyright law. <strong>OuterCurve Foundation (and the .NET Foundation) does not view the installer packages generated by WiX as falling within the definition of a derivative work, merely because they are produced using WiX. Thus, the installer packages generated by WiX will normally fall outside the scope of the MS-RL, and any of your source code, binaries, libraries, routines or other software components that are incorporated in installer packages generated by WiX can be governed by other licensing terms.</strong>\nThe full text of the MS-RL license is reproduced below. It can also be found in the LICENSE.TXT file included with the source code.</em></p>\n<p>I am no lawyer, but the text marked up bold would tell me I should not worry about my creative work that uses WIX. Only if I modify/improve WIX itself the same license has to be applied.</p>\n"}],"owner":{"account_id":2361245,"reputation":631,"user_id":2067886,"display_name":"Ganesh Shenoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77532291,"answer_count":1,"score":0,"last_activity_date":1700676945,"creation_date":1700670791,"question_id":77531677,"body_markdown":"We have JavaFx project and we want to create an installer for the application in Windows. Hence we are using JDK 17 - JPackage with WIX 3.x for creating the installer. But we note that the license for WIX is Microsoft Reciprocal license. \r\n\r\n&gt; https://www.tldrlegal.com/license/microsoft-reciprocal-license-ms-rl\r\n\r\nAs we understand using the JPackage with WIX do not modify or distribute any WIX content as per the licensing terms. Note that we are not well versed with Windows OS / programming world, hence not sure WIX SDK or any other such features does have any implications in regard to MS RL. Hence we are only looking from Java / JDK 17 / JPacakge perspective and wanted to confirm if Jpackage + WIX is fine, any pointers are highly appreciated.","title":"JPackage, WIX and license","body":"<p>We have JavaFx project and we want to create an installer for the application in Windows. Hence we are using JDK 17 - JPackage with WIX 3.x for creating the installer. But we note that the license for WIX is Microsoft Reciprocal license.</p>\n<blockquote>\n<p><a href=\"https://www.tldrlegal.com/license/microsoft-reciprocal-license-ms-rl\" rel=\"nofollow noreferrer\">https://www.tldrlegal.com/license/microsoft-reciprocal-license-ms-rl</a></p>\n</blockquote>\n<p>As we understand using the JPackage with WIX do not modify or distribute any WIX content as per the licensing terms. Note that we are not well versed with Windows OS / programming world, hence not sure WIX SDK or any other such features does have any implications in regard to MS RL. Hence we are only looking from Java / JDK 17 / JPacakge perspective and wanted to confirm if Jpackage + WIX is fine, any pointers are highly appreciated.</p>\n"},{"tags":["java","arraylist","lambda","java-stream"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":1,"creation_date":1595961991,"post_id":63140834,"comment_id":111654079,"body_markdown":"Don&#39;t you already know the element to delete? Why do you want to return it?","body":"Don&#39;t you already know the element to delete? Why do you want to return it?"},{"owner":{"account_id":6327762,"reputation":111,"user_id":10889738,"display_name":"liviubiur"},"score":0,"creation_date":1595962237,"post_id":63140834,"comment_id":111654190,"body_markdown":"I know the id of it.","body":"I know the id of it."},{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1595962248,"post_id":63140834,"comment_id":111654195,"body_markdown":"Would you mind posting what you have tried so far?","body":"Would you mind posting what you have tried so far?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":1,"creation_date":1595962642,"post_id":63140834,"comment_id":111654367,"body_markdown":"If there isn&#39;t a list method that does exactly what you want, you can still iterate through your list and check each element explicitly.","body":"If there isn&#39;t a list method that does exactly what you want, you can still iterate through your list and check each element explicitly."},{"owner":{"account_id":6327762,"reputation":111,"user_id":10889738,"display_name":"liviubiur"},"score":0,"creation_date":1595962756,"post_id":63140834,"comment_id":111654421,"body_markdown":"@hev1 I edited the post.","body":"@hev1 I edited the post."},{"owner":{"account_id":4525304,"reputation":651,"user_id":3677320,"accept_rate":90,"display_name":"ajc2000"},"score":0,"creation_date":1595962902,"post_id":63140834,"comment_id":111654476,"body_markdown":"If you want the value removed from the list, `remove(int index)` in `List` should be helpful; this returns the removed value rather than a boolean.","body":"If you want the value removed from the list, <code>remove(int index)</code> in <code>List</code> should be helpful; this returns the removed value rather than a boolean."}],"answers":[{"tags":[],"owner":{"account_id":6231207,"reputation":342,"user_id":4847944,"display_name":"Ketan Vekariya"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1595962040,"creation_date":1595962040,"answer_id":63140882,"question_id":63140834,"body_markdown":"Just use ArrayList.contains(desiredElement). For example, if you&#39;re looking for the conta1 account from your example, you could use something like:\r\n\r\n\r\nEdit: Note that in order for this to work, you will need to properly override the equals() and hashCode() methods. If you are using Eclipse IDE, then you can have these methods generated by first opening the source file for your CurrentAccount object and the selecting Source &gt; Generate hashCode() and equals()...","title":"Remove an item from a list and return the item","body":"<p>Just use ArrayList.contains(desiredElement). For example, if you're looking for the conta1 account from your example, you could use something like:</p>\n<p>Edit: Note that in order for this to work, you will need to properly override the equals() and hashCode() methods. If you are using Eclipse IDE, then you can have these methods generated by first opening the source file for your CurrentAccount object and the selecting Source &gt; Generate hashCode() and equals()...</p>\n"},{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1595962967,"creation_date":1595962967,"answer_id":63141104,"question_id":63140834,"body_markdown":"If you want to find an element by a certain predicate, remove it and return it, you can have a method like this:\r\n\r\n    public static &lt;E&gt; E findRemoveAndReturn(List&lt;E&gt; items, Predicate&lt;? super E&gt; predicate) {\r\n        Iterator&lt;E&gt; iter = items.iterator();\r\n        while (iter.hasNext()) {\r\n            E item = iter.next();\r\n            if (predicate.test(item)) {\r\n                iter.remove();\r\n                return item;\r\n            }\r\n        }\r\n        return null; // or throw an exception\r\n    }\r\n","title":"Remove an item from a list and return the item","body":"<p>If you want to find an element by a certain predicate, remove it and return it, you can have a method like this:</p>\n<pre><code>public static &lt;E&gt; E findRemoveAndReturn(List&lt;E&gt; items, Predicate&lt;? super E&gt; predicate) {\n    Iterator&lt;E&gt; iter = items.iterator();\n    while (iter.hasNext()) {\n        E item = iter.next();\n        if (predicate.test(item)) {\n            iter.remove();\n            return item;\n        }\n    }\n    return null; // or throw an exception\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595962980,"creation_date":1595962980,"answer_id":63141108,"question_id":63140834,"body_markdown":"You can do this in two steps. First, iterate(or stream) the list and filter the elements that satisfy your condition. Then remove them all from the list.\r\n\r\n    List&lt;String&gt; elementsToBeRemoved = tests.stream()\r\n            .filter(test -&gt; test.getId().equals(id))\r\n            .collect(Collectors.toList());\r\n    tests.removeAll(elementsToBeRemoved);\r\n        \r\nIf you want to remove the first matching element or when you know for sure only one will match, you can do lile,\r\n\r\n    Optional&lt;String&gt; elementToBeRemoved = tests.stream()\r\n            .filter(test -&gt; test.getId().equals(id))\r\n            .findFirst();\r\n    elementToBeRemoved.ifPresent(tests::remove);","title":"Remove an item from a list and return the item","body":"<p>You can do this in two steps. First, iterate(or stream) the list and filter the elements that satisfy your condition. Then remove them all from the list.</p>\n<pre><code>List&lt;String&gt; elementsToBeRemoved = tests.stream()\n        .filter(test -&gt; test.getId().equals(id))\n        .collect(Collectors.toList());\ntests.removeAll(elementsToBeRemoved);\n    \n</code></pre>\n<p>If you want to remove the first matching element or when you know for sure only one will match, you can do lile,</p>\n<pre><code>Optional&lt;String&gt; elementToBeRemoved = tests.stream()\n        .filter(test -&gt; test.getId().equals(id))\n        .findFirst();\nelementToBeRemoved.ifPresent(tests::remove);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9250310,"reputation":171,"user_id":6871028,"display_name":"Albert Gevorgyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700676937,"creation_date":1700676937,"answer_id":77532290,"question_id":63140834,"body_markdown":"Call collect(partitioningBy()) with the predicate that you would use in removeIf. The elements under true match the predicate, so you can return them. Those under false should replace the input collection. ","title":"Remove an item from a list and return the item","body":"<p>Call collect(partitioningBy()) with the predicate that you would use in removeIf. The elements under true match the predicate, so you can return them. Those under false should replace the input collection.</p>\n"}],"owner":{"account_id":6327762,"reputation":111,"user_id":10889738,"display_name":"liviubiur"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2288,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1700676937,"creation_date":1595961866,"question_id":63140834,"body_markdown":"I have an `ArrayList` and I want to check if an element exist in the list and if it exist I want to remove it and return it. \r\n\r\nI tried to use `removeIf` but it returns a `boolean` value.\r\n\r\nHow can I do that? \r\n\r\nThanks!\r\n\r\nLE\r\n\r\nI have a list of objects Test: \r\n\r\n`private static List&lt;Test&gt; tests = new ArrayList&lt;&gt;();`\r\n\r\nI have the method `public Test deleteById(long id) {}`. \r\n\r\nWhat I want is to check if `tests` contains a test with `id` and if that is true I want to remove the object and return it.","title":"Remove an item from a list and return the item","body":"<p>I have an <code>ArrayList</code> and I want to check if an element exist in the list and if it exist I want to remove it and return it.</p>\n<p>I tried to use <code>removeIf</code> but it returns a <code>boolean</code> value.</p>\n<p>How can I do that?</p>\n<p>Thanks!</p>\n<p>LE</p>\n<p>I have a list of objects Test:</p>\n<p><code>private static List&lt;Test&gt; tests = new ArrayList&lt;&gt;();</code></p>\n<p>I have the method <code>public Test deleteById(long id) {}</code>.</p>\n<p>What I want is to check if <code>tests</code> contains a test with <code>id</code> and if that is true I want to remove the object and return it.</p>\n"},{"tags":["java","hibernate","jpa","one-to-many"],"answers":[{"tags":[],"owner":{"account_id":58340,"reputation":208,"user_id":174666,"display_name":"Richard Perfect"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1258943409,"creation_date":1258943409,"answer_id":1780826,"question_id":1780299,"body_markdown":"Found the answer, - it was around getting the right combinations of nullable and insertable. Also had to make the &quot;child index&quot; at Integer so that it could be nullable, and there&#39;s also an &quot;optional&quot; flag in the following as well.\r\n\r\n    public class PolicyRoot extends BordereauxBaseDomainModel {\r\n    \r\n         private List&lt;Policy&gt; policyList = new ArrayList&lt;Policy&gt;();\r\n    \r\n        @OneToMany(cascade=CascadeType.ALL)\r\n        @IndexColumn(name=&quot;policy_sequence&quot;, nullable=false, base=0)\r\n        @JoinColumn(name=&quot;policy_root_oid&quot;, nullable=false)\r\n        public List&lt;Policy&gt; getPolicyList() {\r\n            return policyList;\r\n        }\r\n    \r\n        public void setPolicyList(List&lt;Policy&gt; policyList) {\r\n            this.policyList = policyList;\r\n        }\r\n    }\r\n    \r\n    \r\n    public class Policy extends BordereauxBaseDomainModel {\r\n    \r\n        /** The position of this policy record within the list of policy&#39;s belong to the parent PolicyRoot    */\r\n        private Integer policySequence;\r\n        \r\n        /** Birectional pointer to parent */\r\n        private PolicyRoot policyRoot;\r\n    \r\n    \t@Column(name=&quot;policy_sequence&quot;, insertable=false, updatable=false)\r\n        public Integer getPolicySequence() {\r\n            return policySequence;\r\n        }\r\n    \r\n        public void setPolicySequence(Integer policySequence) {\r\n            this.policySequence = policySequence;\r\n        }\r\n        \r\n        @ManyToOne(optional=false)\r\n    \t@JoinColumn(name=&quot;policy_root_oid&quot;, insertable=false, updatable=false, nullable=false)\r\n        public PolicyRoot getPolicyRoot() {\r\n    \t\treturn policyRoot;\r\n    \t}\r\n    \r\n    \tpublic void setPolicyRoot(PolicyRoot policyRoot) {\r\n    \t\tthis.policyRoot = policyRoot;\r\n    \t}\r\n    }\r\n\r\n\r\nFound the answers on the following page after searching Google for a while.\r\n\r\nhttp://opensource.atlassian.com/projects/hibernate/browse/HHH-4390\r\n","title":"How to get Hibernate JPA to manage list index automagically?","body":"<p>Found the answer, - it was around getting the right combinations of nullable and insertable. Also had to make the \"child index\" at Integer so that it could be nullable, and there's also an \"optional\" flag in the following as well.</p>\n\n<pre><code>public class PolicyRoot extends BordereauxBaseDomainModel {\n\n     private List&lt;Policy&gt; policyList = new ArrayList&lt;Policy&gt;();\n\n    @OneToMany(cascade=CascadeType.ALL)\n    @IndexColumn(name=\"policy_sequence\", nullable=false, base=0)\n    @JoinColumn(name=\"policy_root_oid\", nullable=false)\n    public List&lt;Policy&gt; getPolicyList() {\n        return policyList;\n    }\n\n    public void setPolicyList(List&lt;Policy&gt; policyList) {\n        this.policyList = policyList;\n    }\n}\n\n\npublic class Policy extends BordereauxBaseDomainModel {\n\n    /** The position of this policy record within the list of policy's belong to the parent PolicyRoot    */\n    private Integer policySequence;\n\n    /** Birectional pointer to parent */\n    private PolicyRoot policyRoot;\n\n    @Column(name=\"policy_sequence\", insertable=false, updatable=false)\n    public Integer getPolicySequence() {\n        return policySequence;\n    }\n\n    public void setPolicySequence(Integer policySequence) {\n        this.policySequence = policySequence;\n    }\n\n    @ManyToOne(optional=false)\n    @JoinColumn(name=\"policy_root_oid\", insertable=false, updatable=false, nullable=false)\n    public PolicyRoot getPolicyRoot() {\n        return policyRoot;\n    }\n\n    public void setPolicyRoot(PolicyRoot policyRoot) {\n        this.policyRoot = policyRoot;\n    }\n}\n</code></pre>\n\n<p>Found the answers on the following page after searching Google for a while.</p>\n\n<p><a href=\"http://opensource.atlassian.com/projects/hibernate/browse/HHH-4390\" rel=\"nofollow noreferrer\">http://opensource.atlassian.com/projects/hibernate/browse/HHH-4390</a></p>\n"},{"tags":[],"owner":{"account_id":954960,"reputation":13272,"user_id":980442,"accept_rate":25,"display_name":"Daniel De Le&#243;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1347999138,"creation_date":1347999138,"answer_id":12484258,"question_id":1780299,"body_markdown":"Do something like this:\r\n\r\n\r\n    @Entity\r\n    class Parent {\r\n\r\n        @OneToMany\r\n        @IndexColumn(name = &quot;index_column&quot;)\r\n        List&lt;Child&gt; children;\r\n    }\r\n\r\n    @Entity\r\n    class Child {\r\n\r\n        @ManyToOne\r\n        Parent parent;\r\n        @Column(name = &quot;index_column&quot;)\r\n        Integer index;\r\n\r\n        @PrePersist\r\n        @PreUpdate\r\n        private void prepareIndex() {\r\n            if (parent != null) {\r\n                index = parent.children.indexOf(this);\r\n            }\r\n        }\r\n    }\r\n","title":"How to get Hibernate JPA to manage list index automagically?","body":"<p>Do something like this:</p>\n\n<pre><code>@Entity\nclass Parent {\n\n    @OneToMany\n    @IndexColumn(name = \"index_column\")\n    List&lt;Child&gt; children;\n}\n\n@Entity\nclass Child {\n\n    @ManyToOne\n    Parent parent;\n    @Column(name = \"index_column\")\n    Integer index;\n\n    @PrePersist\n    @PreUpdate\n    private void prepareIndex() {\n        if (parent != null) {\n            index = parent.children.indexOf(this);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700676908,"creation_date":1662971793,"answer_id":73686536,"question_id":1780299,"body_markdown":"I&#39;m going to post this answer since I recently had the same issue and this question, although outdated, keeps coming up in the researches.\r\n\r\nThe [@IndexColumn][1] annotation was deprecated a long time ago. In fact, it is actually recommended to use the [@OrderColumn][2] annotation instead. This second annotation not only simplifies the syntax without having to specify the `base` attribute, but it also avoids declaring an extra field in the detail class (the `policySequence` field within the `Policy` class in this case). This is because, with the `@OrderColumn` annotation, Hibernate automatically understands to declare a field in the `Policy` table, name it with the annotation&#39;s attribute `name` and initialize it with the index that the object covers within the List.\r\n\r\nHere is the updated version of the previous snippet:\r\n\r\n```\r\n@Table(name = &quot;Policy_Root&quot;)\r\npublic class PolicyRoot extends BaseDomainModel {\r\n\r\n    private List&lt;Policy&gt; policyList = new ArrayList&lt;Policy&gt;();\r\n\r\n    @OneToMany(targetEntity = Policy.class, mappedBy = &quot;policyRoot&quot;, cascade = CascadeType.ALL)\r\n    @OrderColumn(name = &quot;policy_sequence&quot;, nullable = false)\r\n    public List&lt;Policy&gt; getPolicyList() {\r\n        return policyList;\r\n    }\r\n\r\n    public void setPolicyList(List&lt;Policy&gt; policyList) {\r\n        this.policyList = policyList;\r\n    }\r\n\r\n    public void addPolicy(Policy policy) {\r\n        policyList.add(policy);\r\n        policy.setPolicyRoot(this);\r\n    }\r\n\r\n    public void addPolicy(int sequence, Policy policy) {\r\n        policyList.add(sequence, policy);\r\n        policy.setPolicyRoot(this);\r\n    }\r\n}\r\n\r\n@Entity()\r\n@Table(name = &quot;Policy&quot;)\r\npublic class Policy extends BaseDomainModel {\r\n\r\n    //No need to declare the policySequence field\r\n\r\n    /** Birectional pointer to parent */\r\n    private PolicyRoot policyRoot;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name=&quot;policy_root_oid&quot;, nullable=false)\r\n    public PolicyRoot getPolicyRoot() {\r\n        return policyRoot;\r\n    }\r\n\r\n    public void setPolicyRoot(PolicyRoot policyRoot) {\r\n        this.policyRoot = policyRoot;\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.4/javadocs/org/hibernate/annotations/IndexColumn.html\r\n  [2]: https://docs.jboss.org/hibernate/jpa/2.1/api/javax/persistence/OrderColumn.html","title":"How to get Hibernate JPA to manage list index automagically?","body":"<p>I'm going to post this answer since I recently had the same issue and this question, although outdated, keeps coming up in the researches.</p>\n<p>The <a href=\"https://docs.jboss.org/hibernate/orm/5.4/javadocs/org/hibernate/annotations/IndexColumn.html\" rel=\"nofollow noreferrer\">@IndexColumn</a> annotation was deprecated a long time ago. In fact, it is actually recommended to use the <a href=\"https://docs.jboss.org/hibernate/jpa/2.1/api/javax/persistence/OrderColumn.html\" rel=\"nofollow noreferrer\">@OrderColumn</a> annotation instead. This second annotation not only simplifies the syntax without having to specify the <code>base</code> attribute, but it also avoids declaring an extra field in the detail class (the <code>policySequence</code> field within the <code>Policy</code> class in this case). This is because, with the <code>@OrderColumn</code> annotation, Hibernate automatically understands to declare a field in the <code>Policy</code> table, name it with the annotation's attribute <code>name</code> and initialize it with the index that the object covers within the List.</p>\n<p>Here is the updated version of the previous snippet:</p>\n<pre><code>@Table(name = &quot;Policy_Root&quot;)\npublic class PolicyRoot extends BaseDomainModel {\n\n    private List&lt;Policy&gt; policyList = new ArrayList&lt;Policy&gt;();\n\n    @OneToMany(targetEntity = Policy.class, mappedBy = &quot;policyRoot&quot;, cascade = CascadeType.ALL)\n    @OrderColumn(name = &quot;policy_sequence&quot;, nullable = false)\n    public List&lt;Policy&gt; getPolicyList() {\n        return policyList;\n    }\n\n    public void setPolicyList(List&lt;Policy&gt; policyList) {\n        this.policyList = policyList;\n    }\n\n    public void addPolicy(Policy policy) {\n        policyList.add(policy);\n        policy.setPolicyRoot(this);\n    }\n\n    public void addPolicy(int sequence, Policy policy) {\n        policyList.add(sequence, policy);\n        policy.setPolicyRoot(this);\n    }\n}\n\n@Entity()\n@Table(name = &quot;Policy&quot;)\npublic class Policy extends BaseDomainModel {\n\n    //No need to declare the policySequence field\n\n    /** Birectional pointer to parent */\n    private PolicyRoot policyRoot;\n\n    @ManyToOne\n    @JoinColumn(name=&quot;policy_root_oid&quot;, nullable=false)\n    public PolicyRoot getPolicyRoot() {\n        return policyRoot;\n    }\n\n    public void setPolicyRoot(PolicyRoot policyRoot) {\n        this.policyRoot = policyRoot;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":58340,"reputation":208,"user_id":174666,"display_name":"Richard Perfect"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8707,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1700676908,"creation_date":1258929808,"question_id":1780299,"body_markdown":"How do I setup a basic OneToMany relationship using a List and get Hibernate JPA to manage the sequence index number of the list automagically? Can this be done?\r\n\r\nThis is my test case (more or less);\r\n\r\n    @Table(name=&quot;Policy_Root&quot;)\r\n    public class PolicyRoot extends BaseDomainModel {\r\n    \r\n        private List&lt;Policy&gt; policyList = new ArrayList&lt;Policy&gt;();\r\n    \r\n        @OneToMany(targetEntity=Policy.class, mappedBy=&quot;policyRoot&quot;, cascade=CascadeType.ALL)\r\n        @IndexColumn(name=&quot;policy_sequence&quot;, base=0, nullable=false)\r\n        public List&lt;Policy&gt; getPolicyList() {\r\n            return policyList;\r\n        }\r\n    \r\n        public void setPolicyList(List&lt;Policy&gt; policyList) {\r\n            this.policyList = policyList;\r\n        }\r\n        \r\n        public void addPolicy(Policy policy) {\r\n        \tpolicyList.add(policy);\r\n        \tpolicy.setPolicyRoot(this);\r\n        }\r\n        \r\n        public void addPolicy(int sequence, Policy policy) {\r\n        \tpolicyList.add(sequence, policy);\r\n        \tpolicy.setPolicyRoot(this);\r\n        }\r\n    }\r\n    \r\n    @Entity()\r\n    @Table(name=&quot;Policy&quot;)\r\n    public class Policy extends BaseDomainModel {\r\n    \r\n        /** The position of this policy record within the list of policy&#39;s belong to the parent PolicyRoot    */\r\n        private int policySequence;\r\n        \r\n        /** Birectional pointer to parent */\r\n        private PolicyRoot policyRoot;\r\n    \r\n    \t@Column(name=&quot;policy_sequence&quot;)\r\n        public int getPolicySequence() {\r\n            return policySequence;\r\n        }\r\n    \r\n        public void setPolicySequence(int policySequence) {\r\n            this.policySequence = policySequence;\r\n        }\r\n        \r\n        @ManyToOne\r\n    \t@JoinColumn(name=&quot;policy_root_oid&quot;, nullable=false)\r\n        public PolicyRoot getPolicyRoot() {\r\n    \t\treturn policyRoot;\r\n    \t}\r\n    \r\n    \tpublic void setPolicyRoot(PolicyRoot policyRoot) {\r\n    \t\tthis.policyRoot = policyRoot;\r\n    \t}\r\n    }\r\n    \r\n    \r\n    \t@Test\r\n    \tpublic void testCreation() {\r\n    \t\tPolicy policy1 = new Policy();\r\n    \t\tPolicy policy2 = new Policy();\r\n    \t\t\r\n    \t\t// Uncomment the following and the test case works - but I don&#39;t want to manage the sequence numbers\r\n    \t\t//policy2.setPolicySequence(1);\r\n    \t\t\r\n    \t\tPolicyRoot policyRoot = new PolicyRoot();\r\n    \t\tpolicyRoot.addPolicy(policy1);\r\n    \t\tpolicyRoot.addPolicy(policy2);\r\n    \t\t\r\n    \t\tServiceImplFacade.getPersistenceFacade().persistSingleItem(policyRoot);\r\n    \t\tLong oid = policyRoot.getOid();\r\n    \t\tPolicyRoot policyRootFromDB = ServiceImplFacade.getPersistenceFacade().getEntityManager().find(PolicyRoot.class, oid);\r\n    \t\t\r\n    \t\tassertEquals(2, policyRootFromDB.getPolicyList().size());\r\n    \t}\r\n\r\n\r\nIf I uncomment the policy2.setPolicySequence(1); line then the test case passes, but I don&#39;t think I need to do this. I want Hibernate to do this for me. My understanding is that it can, but if it can&#39;t then knowing that it can&#39;t would be a good answer as well.\r\n\r\nI&#39;ve tried various combinations of setting nullable, insertable and updateable but I may have missed one.\r\n\r\nIs this possible? - If so how?\r\n\r\n\r\n\r\n\r\n","title":"How to get Hibernate JPA to manage list index automagically?","body":"<p>How do I setup a basic OneToMany relationship using a List and get Hibernate JPA to manage the sequence index number of the list automagically? Can this be done?</p>\n\n<p>This is my test case (more or less);</p>\n\n<pre><code>@Table(name=\"Policy_Root\")\npublic class PolicyRoot extends BaseDomainModel {\n\n    private List&lt;Policy&gt; policyList = new ArrayList&lt;Policy&gt;();\n\n    @OneToMany(targetEntity=Policy.class, mappedBy=\"policyRoot\", cascade=CascadeType.ALL)\n    @IndexColumn(name=\"policy_sequence\", base=0, nullable=false)\n    public List&lt;Policy&gt; getPolicyList() {\n        return policyList;\n    }\n\n    public void setPolicyList(List&lt;Policy&gt; policyList) {\n        this.policyList = policyList;\n    }\n\n    public void addPolicy(Policy policy) {\n        policyList.add(policy);\n        policy.setPolicyRoot(this);\n    }\n\n    public void addPolicy(int sequence, Policy policy) {\n        policyList.add(sequence, policy);\n        policy.setPolicyRoot(this);\n    }\n}\n\n@Entity()\n@Table(name=\"Policy\")\npublic class Policy extends BaseDomainModel {\n\n    /** The position of this policy record within the list of policy's belong to the parent PolicyRoot    */\n    private int policySequence;\n\n    /** Birectional pointer to parent */\n    private PolicyRoot policyRoot;\n\n    @Column(name=\"policy_sequence\")\n    public int getPolicySequence() {\n        return policySequence;\n    }\n\n    public void setPolicySequence(int policySequence) {\n        this.policySequence = policySequence;\n    }\n\n    @ManyToOne\n    @JoinColumn(name=\"policy_root_oid\", nullable=false)\n    public PolicyRoot getPolicyRoot() {\n        return policyRoot;\n    }\n\n    public void setPolicyRoot(PolicyRoot policyRoot) {\n        this.policyRoot = policyRoot;\n    }\n}\n\n\n    @Test\n    public void testCreation() {\n        Policy policy1 = new Policy();\n        Policy policy2 = new Policy();\n\n        // Uncomment the following and the test case works - but I don't want to manage the sequence numbers\n        //policy2.setPolicySequence(1);\n\n        PolicyRoot policyRoot = new PolicyRoot();\n        policyRoot.addPolicy(policy1);\n        policyRoot.addPolicy(policy2);\n\n        ServiceImplFacade.getPersistenceFacade().persistSingleItem(policyRoot);\n        Long oid = policyRoot.getOid();\n        PolicyRoot policyRootFromDB = ServiceImplFacade.getPersistenceFacade().getEntityManager().find(PolicyRoot.class, oid);\n\n        assertEquals(2, policyRootFromDB.getPolicyList().size());\n    }\n</code></pre>\n\n<p>If I uncomment the policy2.setPolicySequence(1); line then the test case passes, but I don't think I need to do this. I want Hibernate to do this for me. My understanding is that it can, but if it can't then knowing that it can't would be a good answer as well.</p>\n\n<p>I've tried various combinations of setting nullable, insertable and updateable but I may have missed one.</p>\n\n<p>Is this possible? - If so how?</p>\n"},{"tags":["java","unit-testing","junit","mockito","junit5"],"comments":[{"owner":{"account_id":465573,"reputation":192684,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1700672856,"post_id":77531510,"comment_id":136684371,"body_markdown":"What language are you actually using?  What do you mean by reified?  You&#39;re using bits of Kotlin syntax, and I&#39;m not certain what version of Mockito in Java actually has a function called `mock()` with no arguments, because [this Javadoc](https://site.mockito.org/javadoc/current/org/mockito/Mockito.html) doesn&#39;t have such a method.","body":"What language are you actually using?  What do you mean by reified?  You&#39;re using bits of Kotlin syntax, and I&#39;m not certain what version of Mockito in Java actually has a function called <code>mock()</code> with no arguments, because <a href=\"https://site.mockito.org/javadoc/current/org/mockito/Mockito.html\" rel=\"nofollow noreferrer\">this Javadoc</a> doesn&#39;t have such a method."},{"owner":{"account_id":19235116,"reputation":638,"user_id":14056227,"display_name":"Gabriel Andrade"},"score":0,"creation_date":1700674681,"post_id":77531510,"comment_id":136684702,"body_markdown":"@LouisWasserman I&#39;m using Java. It&#39;s how Mockito&#39;s docs refer to the trick used to type infer ```mock()``` without specifing the class. Sorry if I confused the question somehow during my explanation, I&#39;ll make sure to clarify further if necessary. However, ever since version 4.9 of mockito-core it does have a ```mock()``` method with no arguments: [https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#mock(T...)](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#mock(T...))","body":"@LouisWasserman I&#39;m using Java. It&#39;s how Mockito&#39;s docs refer to the trick used to type infer <code>mock()</code> without specifing the class. Sorry if I confused the question somehow during my explanation, I&#39;ll make sure to clarify further if necessary. However, ever since version 4.9 of mockito-core it does have a <code>mock()</code> method with no arguments: <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#mock(T...)\" rel=\"nofollow noreferrer\">https://javadoc.io/doc/org.mockito/mockito-core/latest/org/m&zwnj;&#8203;ockito/Mockito.html#&zwnj;&#8203;mock(T...)</a>"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192684,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700675705,"creation_date":1700675262,"answer_id":77532157,"question_id":77531510,"body_markdown":"The &quot;trick&quot; being used to reify generics does not work transitively: you cannot _yourself_ use generics and expect the trick to work.\r\n\r\n```\r\npublic static &lt;T extends ParentClass&gt; void withMockedConstruction(\r\n      Execution&lt;T&gt; execution) {\r\n    T mock = mock();\r\n```\r\n\r\nAt runtime, `T` is erased to `ParentClass`, and therefore `mock()` will reify `ParentClass`, not `T`.  (I suppose the implication is that this is a specific case where `@SafeVarargs` is actually wrong.)\r\n\r\nYou could _perhaps_ identify the parameter type of the lambda, potentially with a custom functional interface with a default method adopting a trick like [this one](https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/reflect/TypeToken.html#%3Cinit%3E(java.lang.Class)), but at that point you&#39;re not saving much of anything compared to simply passing the `Class`, since you must always specify the lambda argument type using parentheses.","title":"Mockito&#39;s reified mock method typing the mock as the superclass instead of generic type","body":"<p>The &quot;trick&quot; being used to reify generics does not work transitively: you cannot <em>yourself</em> use generics and expect the trick to work.</p>\n<pre><code>public static &lt;T extends ParentClass&gt; void withMockedConstruction(\n      Execution&lt;T&gt; execution) {\n    T mock = mock();\n</code></pre>\n<p>At runtime, <code>T</code> is erased to <code>ParentClass</code>, and therefore <code>mock()</code> will reify <code>ParentClass</code>, not <code>T</code>.  (I suppose the implication is that this is a specific case where <code>@SafeVarargs</code> is actually wrong.)</p>\n<p>You could <em>perhaps</em> identify the parameter type of the lambda, potentially with a custom functional interface with a default method adopting a trick like <a href=\"https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/reflect/TypeToken.html#%3Cinit%3E(java.lang.Class)\" rel=\"nofollow noreferrer\">this one</a>, but at that point you're not saving much of anything compared to simply passing the <code>Class</code>, since you must always specify the lambda argument type using parentheses.</p>\n"}],"owner":{"account_id":19235116,"reputation":638,"user_id":14056227,"display_name":"Gabriel Andrade"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77532157,"answer_count":1,"score":0,"last_activity_date":1700675705,"creation_date":1700669428,"question_id":77531510,"body_markdown":"I want to provide a simpler interface (utility method) to mock a construction of a class we often need mocked in many tests because it&#39;s constructed by a third party library. This class is generic typed and has a method that return it&#39;s generics (```ClassIWantMockedConstructor&lt;T&gt; { whatever(): T }```). The utility method is something like this:\r\n\r\n```java\r\npublic interface Execution&lt;T extends ParentClass&gt; {\r\n    void execute(T mock) throws Exception;\r\n}\r\n    \r\npublic static &lt;T extends ParentClass&gt; void withMockedConstruction(Execution&lt;T&gt; execution) {\r\n    T mock = mock();\r\n    try (@SuppressWarnings(&quot;unused&quot;) MockedConstruction&lt;?&gt; construction = mockConstruction(\r\n            ClassIWantMockedConstructor.class,\r\n            (mocked, ctx) -&gt; when(mocked.whatever()).thenReturn(mock)\r\n    )) {\r\n        execution.execute(mock);\r\n    } catch (Throwable t) {\r\n        throw new RuntimeException(&quot;Unexpected error during tests, please check the tests&quot;, t);\r\n    }\r\n}\r\n```\r\n\r\nHowever, if I use ```withMockedConstruction``` passing an lambda typed with a child class of ParentClass, then ```T``` is still typed as ```ParentClass```. Which will cause a ```ClassCastException``` later down the line. Example:\r\n```java\r\n// When called like this\r\nwithMockedConstruction((ChildClass mockService) -&gt; { ... });\r\n\r\n// Then debugging\r\npublic static &lt;T extends ParentClass&gt; void withMockedConstruction(Execution&lt;T&gt; execution) {\r\n    T mock = mock(); // mock = Mock for ParentClass, T reified as ParentClass\r\n    ...\r\n        execution.execute(mock); // throws ClassCastException\r\n}\r\n```\r\n\r\nThe only way I could overcome this was by specifying manually a class for the mock, thus changing the signature to require the class as following:\r\n```java\r\n// Change signature to this:\r\npublic static &lt;T extends ParentClass&gt; void withMockedConstruction(Class&lt;T&gt; clazz, Execution&lt;T&gt; execution) {\r\n    T mock = mock(clazz); // mock = Mock for ChildClass normally\r\n    ...\r\n}\r\n\r\n// Calling like this, works as intended\r\nwithMockedConstruction(ChildClass.class, mockService -&gt; { ... });\r\n```\r\n\r\nIs there any way to achieved this result by using only refied?\r\nCan I force it somehow to check the refied type of a lambda function any way?\r\nIs using the class the best solution in this scenario?","title":"Mockito&#39;s reified mock method typing the mock as the superclass instead of generic type","body":"<p>I want to provide a simpler interface (utility method) to mock a construction of a class we often need mocked in many tests because it's constructed by a third party library. This class is generic typed and has a method that return it's generics (<code>ClassIWantMockedConstructor&lt;T&gt; { whatever(): T }</code>). The utility method is something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Execution&lt;T extends ParentClass&gt; {\n    void execute(T mock) throws Exception;\n}\n    \npublic static &lt;T extends ParentClass&gt; void withMockedConstruction(Execution&lt;T&gt; execution) {\n    T mock = mock();\n    try (@SuppressWarnings(&quot;unused&quot;) MockedConstruction&lt;?&gt; construction = mockConstruction(\n            ClassIWantMockedConstructor.class,\n            (mocked, ctx) -&gt; when(mocked.whatever()).thenReturn(mock)\n    )) {\n        execution.execute(mock);\n    } catch (Throwable t) {\n        throw new RuntimeException(&quot;Unexpected error during tests, please check the tests&quot;, t);\n    }\n}\n</code></pre>\n<p>However, if I use <code>withMockedConstruction</code> passing an lambda typed with a child class of ParentClass, then <code>T</code> is still typed as <code>ParentClass</code>. Which will cause a <code>ClassCastException</code> later down the line. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// When called like this\nwithMockedConstruction((ChildClass mockService) -&gt; { ... });\n\n// Then debugging\npublic static &lt;T extends ParentClass&gt; void withMockedConstruction(Execution&lt;T&gt; execution) {\n    T mock = mock(); // mock = Mock for ParentClass, T reified as ParentClass\n    ...\n        execution.execute(mock); // throws ClassCastException\n}\n</code></pre>\n<p>The only way I could overcome this was by specifying manually a class for the mock, thus changing the signature to require the class as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Change signature to this:\npublic static &lt;T extends ParentClass&gt; void withMockedConstruction(Class&lt;T&gt; clazz, Execution&lt;T&gt; execution) {\n    T mock = mock(clazz); // mock = Mock for ChildClass normally\n    ...\n}\n\n// Calling like this, works as intended\nwithMockedConstruction(ChildClass.class, mockService -&gt; { ... });\n</code></pre>\n<p>Is there any way to achieved this result by using only refied?\nCan I force it somehow to check the refied type of a lambda function any way?\nIs using the class the best solution in this scenario?</p>\n"},{"tags":["java","serial-port","scale","hardware","point-of-sale"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1700586704,"post_id":77523413,"comment_id":136671883,"body_markdown":"Why would you omit the make and model of the hardware from this question? You should, btw, *never* put application code, *particularly* IO code, into the ctor of your class","body":"Why would you omit the make and model of the hardware from this question? You should, btw, <i>never</i> put application code, <i>particularly</i> IO code, into the ctor of your class"},{"owner":{"account_id":28347380,"reputation":1,"user_id":21679354,"display_name":"Trung Kien Nguyen"},"score":0,"creation_date":1700597686,"post_id":77523413,"comment_id":136673743,"body_markdown":"Thank you for your advice. I have updated my question with the make and model of the electronic scale. Regarding the placement of the I/O code in the constructor, I understand your concern. This setup is currently just for my initial testing purposes to see if the electronic scale responds at all. I plan to refactor the code for better structure and error handling once I confirm the basic communication.","body":"Thank you for your advice. I have updated my question with the make and model of the electronic scale. Regarding the placement of the I/O code in the constructor, I understand your concern. This setup is currently just for my initial testing purposes to see if the electronic scale responds at all. I plan to refactor the code for better structure and error handling once I confirm the basic communication."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1700602038,"post_id":77523413,"comment_id":136674407,"body_markdown":"You probably need to consult the manual to find out what any communication protocols it has and how they work","body":"You probably need to consult the manual to find out what any communication protocols it has and how they work"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1700676842,"post_id":77523413,"comment_id":136685044,"body_markdown":"*Specifically, when I pressed the &#39;s&#39; and &#39;w&#39; keys on the PuTTY terminal* And how did you come to this information? There&#39;s very little point in guessing the protocol but the expected input might need to be terminated by some kind of line separator, in which case, you&#39;d be advised to open a `PrintWriter` on the `OutputStream`","body":"<i>Specifically, when I pressed the &#39;s&#39; and &#39;w&#39; keys on the PuTTY terminal</i> And how did you come to this information? There&#39;s very little point in guessing the protocol but the expected input might need to be terminated by some kind of line separator, in which case, you&#39;d be advised to open a <code>PrintWriter</code> on the <code>OutputStream</code>"}],"owner":{"account_id":28347380,"reputation":1,"user_id":21679354,"display_name":"Trung Kien Nguyen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700674868,"creation_date":1700575272,"question_id":77523413,"body_markdown":"I am working on a project where I need to connect an electronic scale (T-Scale QTP 15MR) to my computer using a RS232-to-USB converter and read data from it using Java. I am certain about the COM port and the baud rate settings being correct. I have successfully opened the port using `serialPort.openPort();`. However, I&#39;m not receiving any data from the scale. I&#39;m wondering if I need to send any specific commands to the scale to initiate data transmission. Below is the code snippet I&#39;m using:\r\n\r\n```\r\npublic class Scale {\r\n\r\n    SerialPort serialPort;\r\n    String dataBuffer;\r\n\r\n    public Scale(String portName, int baudRate) {\r\n        try {\r\n            serialPort = SerialPort.getCommPort(portName);\r\n            serialPort.setBaudRate(baudRate);\r\n            serialPort.setNumDataBits(8);\r\n            serialPort.setNumStopBits(SerialPort.ONE_STOP_BIT);\r\n            serialPort.setParity(SerialPort.NO_PARITY);\r\n\r\n            serialPort.openPort();\r\n\r\n            if (serialPort.isOpen()) {\r\n                System.out.println(&quot;Port is opened&quot;);\r\n\r\n                serialPort.addDataListener(new SerialPortDataListener() {\r\n                    @Override\r\n                    public int getListeningEvents() {\r\n                        return SerialPort.LISTENING_EVENT_DATA_RECEIVED;\r\n                    }\r\n\r\n                    @Override\r\n                    public void serialEvent(SerialPortEvent serialPortEvent) {\r\n                        byte[] newData = serialPortEvent.getReceivedData();\r\n                        for (byte newDatum : newData) {\r\n                            dataBuffer += (char) newDatum;\r\n                            System.out.println(dataBuffer);\r\n                        }\r\n                    }\r\n                });\r\n            } else System.out.println(&quot;Port Open Failure&quot;);\r\n        } catch (Exception b) {\r\n            b.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThen I call\r\n`new Scale(&quot;COM4&quot;, 9600);`\r\n\r\nMy questions are:\r\n\r\n1. Do electronic scales typically require specific commands to start sending data?\r\n2. Is there anything obviously missing or incorrect in my implementation that could be preventing data reception?\r\nAny insights or suggestions would be greatly appreciated.\r\n\r\nThank you!\r\n\r\nI attempted to connect an electronic scale to my computer using a RS232 to USB converter. Using the jSerialComm library in Java, I established a connection with the correct COM port and configured the baud rate. I expected that upon opening the port and setting up a DataListener, I would receive data from the scale through this Serial connection. However, even though the port opened successfully without any errors, I am not receiving any data from the scale. I am uncertain if I need to send a specific command to initiate the data transmission from the scale. I am seeking assistance from the community to better understand this issue and find a resolution.\r\n\r\n\r\nUPDATE\r\n\r\n&quot;I&#39;ve made further progress by using PuTTY to send data to the scale, and I successfully received responses. Specifically, when I pressed the &#39;s&#39; and &#39;w&#39; keys on the PuTTY terminal, the scale returned the expected results, as shown in the attached image. This indicates that the scale does respond to specific commands.\r\n[enter image description here][1]\r\nHowever, when I try to replicate this in my Java application using the following code:\r\n\r\n    private void sendSignal(String s) {\r\n        OutputStream os = serialPort.getOutputStream();\r\n        try {\r\n            os.write(s.getBytes());\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\nAnd then calling `this.sendSignal(&quot;sw&quot;)`. I receive a null response instead of the expected data from the scale. It seems like there is a discrepancy in how the data is being sent or processed between PuTTY and my application. I would appreciate any insights or suggestions on how to troubleshoot this issue and successfully send commands from my Java application, similar to how it works in PuTTY.&quot;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9JJBn.png","title":"Java RS232 to USB Connection: No Data Received from Electronic Scale","body":"<p>I am working on a project where I need to connect an electronic scale (T-Scale QTP 15MR) to my computer using a RS232-to-USB converter and read data from it using Java. I am certain about the COM port and the baud rate settings being correct. I have successfully opened the port using <code>serialPort.openPort();</code>. However, I'm not receiving any data from the scale. I'm wondering if I need to send any specific commands to the scale to initiate data transmission. Below is the code snippet I'm using:</p>\n<pre><code>public class Scale {\n\n    SerialPort serialPort;\n    String dataBuffer;\n\n    public Scale(String portName, int baudRate) {\n        try {\n            serialPort = SerialPort.getCommPort(portName);\n            serialPort.setBaudRate(baudRate);\n            serialPort.setNumDataBits(8);\n            serialPort.setNumStopBits(SerialPort.ONE_STOP_BIT);\n            serialPort.setParity(SerialPort.NO_PARITY);\n\n            serialPort.openPort();\n\n            if (serialPort.isOpen()) {\n                System.out.println(&quot;Port is opened&quot;);\n\n                serialPort.addDataListener(new SerialPortDataListener() {\n                    @Override\n                    public int getListeningEvents() {\n                        return SerialPort.LISTENING_EVENT_DATA_RECEIVED;\n                    }\n\n                    @Override\n                    public void serialEvent(SerialPortEvent serialPortEvent) {\n                        byte[] newData = serialPortEvent.getReceivedData();\n                        for (byte newDatum : newData) {\n                            dataBuffer += (char) newDatum;\n                            System.out.println(dataBuffer);\n                        }\n                    }\n                });\n            } else System.out.println(&quot;Port Open Failure&quot;);\n        } catch (Exception b) {\n            b.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Then I call\n<code>new Scale(&quot;COM4&quot;, 9600);</code></p>\n<p>My questions are:</p>\n<ol>\n<li>Do electronic scales typically require specific commands to start sending data?</li>\n<li>Is there anything obviously missing or incorrect in my implementation that could be preventing data reception?\nAny insights or suggestions would be greatly appreciated.</li>\n</ol>\n<p>Thank you!</p>\n<p>I attempted to connect an electronic scale to my computer using a RS232 to USB converter. Using the jSerialComm library in Java, I established a connection with the correct COM port and configured the baud rate. I expected that upon opening the port and setting up a DataListener, I would receive data from the scale through this Serial connection. However, even though the port opened successfully without any errors, I am not receiving any data from the scale. I am uncertain if I need to send a specific command to initiate the data transmission from the scale. I am seeking assistance from the community to better understand this issue and find a resolution.</p>\n<p>UPDATE</p>\n<p>&quot;I've made further progress by using PuTTY to send data to the scale, and I successfully received responses. Specifically, when I pressed the 's' and 'w' keys on the PuTTY terminal, the scale returned the expected results, as shown in the attached image. This indicates that the scale does respond to specific commands.\n<a href=\"https://i.stack.imgur.com/9JJBn.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nHowever, when I try to replicate this in my Java application using the following code:</p>\n<pre><code>private void sendSignal(String s) {\n    OutputStream os = serialPort.getOutputStream();\n    try {\n        os.write(s.getBytes());\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>And then calling <code>this.sendSignal(&quot;sw&quot;)</code>. I receive a null response instead of the expected data from the scale. It seems like there is a discrepancy in how the data is being sent or processed between PuTTY and my application. I would appreciate any insights or suggestions on how to troubleshoot this issue and successfully send commands from my Java application, similar to how it works in PuTTY.&quot;</p>\n"},{"tags":["java","json","mongodb","updates","localdate"],"answers":[{"tags":[],"owner":{"account_id":12047607,"reputation":370,"user_id":9744390,"display_name":"Devesh Lohumi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700674767,"creation_date":1700674767,"answer_id":77532108,"question_id":77532023,"body_markdown":"Try using\r\n```\r\nCourse_details.$.Status\r\n```\r\n\r\nAlso maybe worthwhile changing from `MongoException` to `Exception` to catch any other exceptions that may be thrown, or catch others in another catch block. ","title":"updating a field in MongoDb using Java Sync driver","body":"<p>Try using</p>\n<pre><code>Course_details.$.Status\n</code></pre>\n<p>Also maybe worthwhile changing from <code>MongoException</code> to <code>Exception</code> to catch any other exceptions that may be thrown, or catch others in another catch block.</p>\n"}],"owner":{"account_id":12698288,"reputation":1,"user_id":9225997,"display_name":"Jean pierre Atanas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700674767,"creation_date":1700673926,"question_id":77532023,"body_markdown":"I have tried to update a field in the MongoDB database namely the &quot;Status&quot; field (of type integer) only between two dates FromDate and ToDate. \r\n\r\nno errors or warnings were obtained, however, the update is not reflected in the database.\r\n\r\n[The form containing the data to be updated ...](https://i.stack.imgur.com/Hi5WL.png)\r\n\r\n```\r\nJson File [{\r\n  &quot;_id&quot;: {\r\n    &quot;$oid&quot;: &quot;6523d6f1af7d835017c39fcf&quot;\r\n  },\r\n  &quot;StudentName&quot;: &quot;John Doe&quot;,\r\n  &quot;TutoringCourse&quot;: &quot;Excel&quot;,\r\n  &quot;Course_details&quot;: [\r\n    {\r\n      &quot;DateOfClass&quot;: &quot;2023-03-21T00:00:00.000+00:00&quot;,\r\n      &quot;SessionStart&quot;: &quot;16:00&quot;,\r\n      &quot;SessionEnd&quot;: &quot;18:00&quot;,\r\n      &quot;HourlyWage&quot;: 12.5,\r\n      &quot;Duration&quot;: 2,\r\n      &quot;Cost&quot;: 25,\r\n      &quot;Status&quot;: 1,\r\n      &quot;Notes&quot;: &quot;&quot;\r\n    },\r\n    {\r\n      &quot;DateOfClass&quot;: &quot;2023-03-31T00:00:00.000+00:00&quot;,\r\n      &quot;SessionStart&quot;: &quot;15:00&quot;,\r\n      &quot;SessionEnd&quot;: &quot;17:00&quot;,\r\n      &quot;HourlyWage&quot;: 12.5,\r\n      &quot;Duration&quot;: 2,\r\n      &quot;Cost&quot;: 25,\r\n      &quot;Status&quot;: 1,\r\n      &quot;Notes&quot;: &quot;&quot;\r\n    },..]\r\n}...]\r\n\r\nJava code:\r\n\tpublic void UpdateOneCourseDetailsPerIntervalOfDate() {\r\n\r\n\tList &lt;Bson&gt; updateOperation = new ArrayList&lt;Bson&gt;() ;\r\n\tBson update4,update5,update6,update7,update8,update9,update10;\r\n//t[2] editbox with FromDate , t[3] editbox with ToDate\r\n\tLocalDate FromDate = LocalDate.parse(t[2].getText());\r\n\tLocalDate ToDate = LocalDate.parse(t[3].getText());\r\n\t//nameList contains students names\r\n\tif(nameList.contains(t[0].getText()) &amp;&amp; !t[0].getText().isEmpty()) {\r\n\t\tIterator&lt;String&gt; iterator = SelectedFieldsItems.iterator();\r\n\t\twhile (iterator.hasNext())\r\n\t\t{\r\n\t\t\tString tmp = iterator.next();\r\n\t\t\tif(tmp instanceof String &amp;&amp; tmp != &quot;&quot;) {\r\n\t\t\t\r\n\t\t\tif(tmp == &quot;SessionStart&quot;) {\r\n\t\t\t\tupdate4 = Updates.set(&quot;Course_details.$[].SessionStart&quot;, t[4].getText());\r\n\t\t\t\tupdateOperation.add(update4);\r\n\t\t\t}\r\n\t\t\tif(tmp == &quot;SessionEnd&quot;) {\r\n\t\t\t\tupdate5 = Updates.set(&quot;Course_details.$[].SessionEnd&quot;, t[5].getText());\r\n\t\t\t\tupdateOperation.add(update5);\r\n\t\t\t}\r\n\t\t\tif(tmp == &quot;HourlyWage&quot;) {\r\n\t\t\t\tupdate6 = Updates.set(&quot;Course_details.$[].HourlyWage&quot;, t[6].getText());\r\n\t\t\t\tupdateOperation.add(update6);\r\n\t\t\t}\r\n\t\t\tif(tmp == &quot;Duration&quot;) {\r\n\t\t\t\tupdate7 = Updates.set(&quot;Course_details.$[].Duration&quot;, t[7].getText());\r\n\t\t\t\tupdateOperation.add(update7);\r\n\t\t\t}\r\n\t\t\tif(tmp == &quot;Cost&quot;) {\r\n\t\t\t\tupdate8 = Updates.set(&quot;Course_details.$[].Cost&quot;, t[8].getText());\r\n\t\t\t\tupdateOperation.add(update8);\r\n\t\t\t}\r\n\t\t\tif(tmp == &quot;Status&quot;) {\r\n\t\t\t\tupdate9 = Updates.set(&quot;Course_details.$[].Status&quot;, t[9].getText());\r\n\t\t\t\tupdateOperation.add(update9);\r\n\t\t\t\t}\r\n\t\t\tif(tmp == &quot;Notes&quot;) {\r\n\t\t\t\tupdate10 = Updates.set(&quot;Course_details.$[].Notes&quot;, t10.getText());\r\n\t\t\t\tupdateOperation.add(update10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tJOptionPane.showMessageDialog(this,&quot;No fields are selected...&quot; ,&quot;Update failed operation&quot;,JOptionPane.INFORMATION_MESSAGE);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t}//while loop\r\n\t\t\r\n\t   try{\r\n    \t\tDBConnection db = new DBConnection();\r\n    \t\tBson query = Filters.and(Filters.eq(&quot;StudentName&quot;, t[0].getText()),Filters.lte(&quot;Course_details.$[].DateOfClass&quot;, ToDate),\r\n\t\t\t\t\tFilters.gte(&quot;Course_details.$[].DateOfClass&quot;,FromDate));\r\n\r\n    \t\tUpdateResult r = db.getCollection().updateMany(query, Updates.combine(updateOperation));\r\n    \t\tstatusBar.setMessage(&quot;fields updated - count: &quot; + r.getMatchedCount());\r\n\t\t\t}\r\n        catch (MongoException me) {\r\n        \tstatusBar.setMessage(&quot;Unable to update fields: &quot; + me);\r\n        \t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tstatusBar.setMessage(&quot;Student is not in database!&quot;);\r\n\t\t\tJOptionPane.showMessageDialog(this,&quot;Student is not in database! please Check student name...&quot; ,&quot;Not in Database&quot;,JOptionPane.INFORMATION_MESSAGE);\r\n\t\t}\r\n\t\t\t\r\n}\r\n```\r\n\r\nThe date field in MongoDb is : \r\n\r\n[collection image in mongoDB](https://i.stack.imgur.com/OQZgI.png)","title":"updating a field in MongoDb using Java Sync driver","body":"<p>I have tried to update a field in the MongoDB database namely the &quot;Status&quot; field (of type integer) only between two dates FromDate and ToDate.</p>\n<p>no errors or warnings were obtained, however, the update is not reflected in the database.</p>\n<p><a href=\"https://i.stack.imgur.com/Hi5WL.png\" rel=\"nofollow noreferrer\">The form containing the data to be updated ...</a></p>\n<pre><code>Json File [{\n  &quot;_id&quot;: {\n    &quot;$oid&quot;: &quot;6523d6f1af7d835017c39fcf&quot;\n  },\n  &quot;StudentName&quot;: &quot;John Doe&quot;,\n  &quot;TutoringCourse&quot;: &quot;Excel&quot;,\n  &quot;Course_details&quot;: [\n    {\n      &quot;DateOfClass&quot;: &quot;2023-03-21T00:00:00.000+00:00&quot;,\n      &quot;SessionStart&quot;: &quot;16:00&quot;,\n      &quot;SessionEnd&quot;: &quot;18:00&quot;,\n      &quot;HourlyWage&quot;: 12.5,\n      &quot;Duration&quot;: 2,\n      &quot;Cost&quot;: 25,\n      &quot;Status&quot;: 1,\n      &quot;Notes&quot;: &quot;&quot;\n    },\n    {\n      &quot;DateOfClass&quot;: &quot;2023-03-31T00:00:00.000+00:00&quot;,\n      &quot;SessionStart&quot;: &quot;15:00&quot;,\n      &quot;SessionEnd&quot;: &quot;17:00&quot;,\n      &quot;HourlyWage&quot;: 12.5,\n      &quot;Duration&quot;: 2,\n      &quot;Cost&quot;: 25,\n      &quot;Status&quot;: 1,\n      &quot;Notes&quot;: &quot;&quot;\n    },..]\n}...]\n\nJava code:\n    public void UpdateOneCourseDetailsPerIntervalOfDate() {\n\n    List &lt;Bson&gt; updateOperation = new ArrayList&lt;Bson&gt;() ;\n    Bson update4,update5,update6,update7,update8,update9,update10;\n//t[2] editbox with FromDate , t[3] editbox with ToDate\n    LocalDate FromDate = LocalDate.parse(t[2].getText());\n    LocalDate ToDate = LocalDate.parse(t[3].getText());\n    //nameList contains students names\n    if(nameList.contains(t[0].getText()) &amp;&amp; !t[0].getText().isEmpty()) {\n        Iterator&lt;String&gt; iterator = SelectedFieldsItems.iterator();\n        while (iterator.hasNext())\n        {\n            String tmp = iterator.next();\n            if(tmp instanceof String &amp;&amp; tmp != &quot;&quot;) {\n            \n            if(tmp == &quot;SessionStart&quot;) {\n                update4 = Updates.set(&quot;Course_details.$[].SessionStart&quot;, t[4].getText());\n                updateOperation.add(update4);\n            }\n            if(tmp == &quot;SessionEnd&quot;) {\n                update5 = Updates.set(&quot;Course_details.$[].SessionEnd&quot;, t[5].getText());\n                updateOperation.add(update5);\n            }\n            if(tmp == &quot;HourlyWage&quot;) {\n                update6 = Updates.set(&quot;Course_details.$[].HourlyWage&quot;, t[6].getText());\n                updateOperation.add(update6);\n            }\n            if(tmp == &quot;Duration&quot;) {\n                update7 = Updates.set(&quot;Course_details.$[].Duration&quot;, t[7].getText());\n                updateOperation.add(update7);\n            }\n            if(tmp == &quot;Cost&quot;) {\n                update8 = Updates.set(&quot;Course_details.$[].Cost&quot;, t[8].getText());\n                updateOperation.add(update8);\n            }\n            if(tmp == &quot;Status&quot;) {\n                update9 = Updates.set(&quot;Course_details.$[].Status&quot;, t[9].getText());\n                updateOperation.add(update9);\n                }\n            if(tmp == &quot;Notes&quot;) {\n                update10 = Updates.set(&quot;Course_details.$[].Notes&quot;, t10.getText());\n                updateOperation.add(update10);\n                }\n            }\n            else\n            {\n                JOptionPane.showMessageDialog(this,&quot;No fields are selected...&quot; ,&quot;Update failed operation&quot;,JOptionPane.INFORMATION_MESSAGE);\n                return;\n            }\n    \n        }//while loop\n        \n       try{\n            DBConnection db = new DBConnection();\n            Bson query = Filters.and(Filters.eq(&quot;StudentName&quot;, t[0].getText()),Filters.lte(&quot;Course_details.$[].DateOfClass&quot;, ToDate),\n                    Filters.gte(&quot;Course_details.$[].DateOfClass&quot;,FromDate));\n\n            UpdateResult r = db.getCollection().updateMany(query, Updates.combine(updateOperation));\n            statusBar.setMessage(&quot;fields updated - count: &quot; + r.getMatchedCount());\n            }\n        catch (MongoException me) {\n            statusBar.setMessage(&quot;Unable to update fields: &quot; + me);\n            }\n        }\n        else\n        {\n            statusBar.setMessage(&quot;Student is not in database!&quot;);\n            JOptionPane.showMessageDialog(this,&quot;Student is not in database! please Check student name...&quot; ,&quot;Not in Database&quot;,JOptionPane.INFORMATION_MESSAGE);\n        }\n            \n}\n</code></pre>\n<p>The date field in MongoDb is :</p>\n<p><a href=\"https://i.stack.imgur.com/OQZgI.png\" rel=\"nofollow noreferrer\">collection image in mongoDB</a></p>\n"},{"tags":["java","spring-webflux","spring-boot-actuator"],"owner":{"account_id":23688461,"reputation":1,"user_id":17713087,"display_name":"user17713087"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700674509,"creation_date":1700674509,"question_id":77532079,"body_markdown":"this is the error:\r\n\r\n```\r\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1271)\r\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:494)     \r\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:349)         \r\n```\r\n\r\ngradle:\r\n\r\n```\r\nplugins {\r\n    id &quot;io.mateo.cxf-codegen&quot; version &quot;1.0.1&quot;\r\n}\r\n\r\next {\r\n    jacksonXmlVersion = &#39;2.13.3&#39;\r\n    resilience4jVersion = &#39;1.7.1&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation project(&#39;:domain-model&#39;)\r\n    implementation project.ext.webflux\r\n    implementation project.ext.mapstruct\r\n    annotationProcessor project.ext.mapstructprocessor\r\n    implementation(&quot;javax.xml.ws:jaxws-api:2.3.1&quot;)\r\n    implementation(&#39;javax.jws:javax.jws-api:1.1&#39;)\r\n    implementation(&quot;com.sun.xml.messaging.saaj:saaj-impl:2.0.1&quot;)\r\n    implementation(&quot;javax.xml.bind:jaxb-api:2.3.0&quot;)\r\n\r\n    implementation (&#39;org.springframework.boot:spring-boot-starter-aop:2.7.8&#39;)\r\n    implementation (&quot;io.github.resilience4j:resilience4j-spring-boot2:${resilience4jVersion}&quot;)\r\n    implementation (&quot;io.github.resilience4j:resilience4j-reactor:${resilience4jVersion}&quot;)\r\n    implementation (&#39;org.springframework.boot:spring-boot-starter-actuator:2.7.8&#39;)\r\n\r\n    implementation(&quot;com.sun.activation:javax.activation:1.2.0&quot;)\r\n    implementation(&quot;org.glassfish.jaxb:jaxb-runtime:2.3.3&quot;)\r\n    implementation(&quot;com.fasterxml.jackson.dataformat:jackson-dataformat-xml:${jacksonXmlVersion}&quot;)\r\n    implementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:${jacksonXmlVersion}&quot;)\r\n    cxfCodegen (&quot;jakarta.xml.ws:jakarta.xml.ws-api:2.3.3&quot;)\r\n    cxfCodegen (&quot;jakarta.annotation:jakarta.annotation-api:1.3.5&quot;)\r\n}\r\n```\r\n\r\nIt is a project based on a hexagonal architecture, mainly oriented to webflux\r\n\r\nThe project is autoconfigured, how can I make it so that it only uses the actuator reactive beans?","title":"reactive.result.method.annotation.RequestMappingHandlerMapping available: expected single matching bean but found 2: ,controllerEndpointHandlerMapping","body":"<p>this is the error:</p>\n<pre><code>at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1271)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:494)     \nat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:349)         \n</code></pre>\n<p>gradle:</p>\n<pre><code>plugins {\n    id &quot;io.mateo.cxf-codegen&quot; version &quot;1.0.1&quot;\n}\n\next {\n    jacksonXmlVersion = '2.13.3'\n    resilience4jVersion = '1.7.1'\n}\n\ndependencies {\n    implementation project(':domain-model')\n    implementation project.ext.webflux\n    implementation project.ext.mapstruct\n    annotationProcessor project.ext.mapstructprocessor\n    implementation(&quot;javax.xml.ws:jaxws-api:2.3.1&quot;)\n    implementation('javax.jws:javax.jws-api:1.1')\n    implementation(&quot;com.sun.xml.messaging.saaj:saaj-impl:2.0.1&quot;)\n    implementation(&quot;javax.xml.bind:jaxb-api:2.3.0&quot;)\n\n    implementation ('org.springframework.boot:spring-boot-starter-aop:2.7.8')\n    implementation (&quot;io.github.resilience4j:resilience4j-spring-boot2:${resilience4jVersion}&quot;)\n    implementation (&quot;io.github.resilience4j:resilience4j-reactor:${resilience4jVersion}&quot;)\n    implementation ('org.springframework.boot:spring-boot-starter-actuator:2.7.8')\n\n    implementation(&quot;com.sun.activation:javax.activation:1.2.0&quot;)\n    implementation(&quot;org.glassfish.jaxb:jaxb-runtime:2.3.3&quot;)\n    implementation(&quot;com.fasterxml.jackson.dataformat:jackson-dataformat-xml:${jacksonXmlVersion}&quot;)\n    implementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:${jacksonXmlVersion}&quot;)\n    cxfCodegen (&quot;jakarta.xml.ws:jakarta.xml.ws-api:2.3.3&quot;)\n    cxfCodegen (&quot;jakarta.annotation:jakarta.annotation-api:1.3.5&quot;)\n}\n</code></pre>\n<p>It is a project based on a hexagonal architecture, mainly oriented to webflux</p>\n<p>The project is autoconfigured, how can I make it so that it only uses the actuator reactive beans?</p>\n"},{"tags":["java","file-io"],"comments":[{"owner":{"account_id":960307,"reputation":107851,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1427277347,"post_id":29252341,"comment_id":46708442,"body_markdown":"Evidently host platform API used (because of the atomicity).","body":"Evidently host platform API used (because of the atomicity)."},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":2,"creation_date":1427277802,"post_id":29252341,"comment_id":46708735,"body_markdown":"In 2015 you don&#39;t want to use that anyway; use java.nio.file and `Files.createFile()`. At least it will throw a meaningful exception if it fails, unlike `File`&#39;s `.createNewFile()`.","body":"In 2015 you don&#39;t want to use that anyway; use java.nio.file and <code>Files.createFile()</code>. At least it will throw a meaningful exception if it fails, unlike <code>File</code>&#39;s <code>.createNewFile()</code>."}],"answers":[{"tags":[],"owner":{"account_id":3892970,"reputation":11166,"user_id":3222695,"display_name":"nikis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1427284188,"creation_date":1427277904,"answer_id":29252633,"question_id":29252341,"body_markdown":"You can take a look at the `OpenJDK` repository. What you are looking for is [this][1]. By looking into it, you can find, that this method calls `FileSystem.createFileExclusively(java.lang.String)`, where `FileSystem` is an abstract class and the concrete instance is obtained via `FileSystem.getFileSystem()` which is native method, specific for different platforms.\r\n\r\n**EDIT** Example for Win32 File System is [here][2] \r\n\r\n\r\n  [1]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/File.java#File.createNewFile%28%29\r\n  [2]: http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/c228a234a3f3/src/windows/native/java/io/Win32FileSystem_md.c#l263","title":"How does createNewFile() work internally?","body":"<p>You can take a look at the <code>OpenJDK</code> repository. What you are looking for is <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/io/File.java#File.createNewFile%28%29\" rel=\"nofollow\">this</a>. By looking into it, you can find, that this method calls <code>FileSystem.createFileExclusively(java.lang.String)</code>, where <code>FileSystem</code> is an abstract class and the concrete instance is obtained via <code>FileSystem.getFileSystem()</code> which is native method, specific for different platforms.</p>\n\n<p><strong>EDIT</strong> Example for Win32 File System is <a href=\"http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/c228a234a3f3/src/windows/native/java/io/Win32FileSystem_md.c#l263\" rel=\"nofollow\">here</a> </p>\n"}],"owner":{"account_id":5877017,"reputation":2197,"user_id":4627565,"accept_rate":100,"display_name":"Bionix1441"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":29252633,"answer_count":1,"score":0,"last_activity_date":1700674209,"creation_date":1427277113,"question_id":29252341,"body_markdown":"createNewFile():\r\n\r\n&gt; Atomically creates a new, empty file named by this abstract pathname\r\n&gt; if and only if a file with this name does not yet exist. The check for\r\n&gt; the existence of the file and the creation of the file if it does not\r\n&gt; exist are a single operation that is atomic with respect to all other\r\n&gt; filesystem activities that might affect the file.\r\n\r\nHow does it know if a file can be created or not? Does it depend on the host platform?","title":"How does createNewFile() work internally?","body":"<p>createNewFile():</p>\n<blockquote>\n<p>Atomically creates a new, empty file named by this abstract pathname\nif and only if a file with this name does not yet exist. The check for\nthe existence of the file and the creation of the file if it does not\nexist are a single operation that is atomic with respect to all other\nfilesystem activities that might affect the file.</p>\n</blockquote>\n<p>How does it know if a file can be created or not? Does it depend on the host platform?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":13817170,"reputation":1662,"user_id":9973516,"display_name":"Ada"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1700664812,"creation_date":1700659467,"answer_id":77530312,"question_id":77530277,"body_markdown":"You can do it like this:\r\n```java\r\ndouble number = 1.15;\r\n\r\nint percentage = (int) Math.round((number - 1) * 100);\r\n\r\nSystem.out.println(percentage + &quot;%&quot;); // Output: 15%\r\n```\r\nTo convert a decimal numbers to its percentage representation as a percentage of 1 you need to subtract 1 first.","title":"Convert double into percentage","body":"<p>You can do it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>double number = 1.15;\n\nint percentage = (int) Math.round((number - 1) * 100);\n\nSystem.out.println(percentage + &quot;%&quot;); // Output: 15%\n</code></pre>\n<p>To convert a decimal numbers to its percentage representation as a percentage of 1 you need to subtract 1 first.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700671856,"creation_date":1700670927,"answer_id":77531698,"question_id":77530277,"body_markdown":"&gt; _&quot;... How can i convert example 1.07 into 7%, 1.50 into 50%, 2.25 into 125% e.t.c. ...&quot;_\r\n\r\nThis appears to be _a &amp;minus; 1_, where _a_ is the value.\r\n\r\nHere is an example.\r\n\r\n```java\r\ndouble[] a = { 1.07, 1.50, 2.25 };\r\nfor (int i = 0, n = a.length; i &lt; n; i++)\r\n    a[i] = (a[i] - 1) * 100;\r\n```\r\n\r\nTo print the value, use the _[Formatter](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html)_ class.\r\n\r\n```java\r\nSystem.out.printf(&quot;%.0f%%&quot;, Math.floor(a[2]));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n125%\r\n```\r\n\r\nAlternately, use the _[NumberFormat](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/text/NumberFormat.html)_ class.\\\r\nNote, this will multiply the value by _100_.\r\n\r\n```java\r\ndouble[] a = { 1.07, 1.50, 2.25 };\r\nNumberFormat f = NumberFormat.getPercentInstance();\r\nf.setRoundingMode(RoundingMode.FLOOR);\r\nf.setMaximumFractionDigits(0);\r\n```\r\n\r\n```java\r\nSystem.out.println(f.format(a[2] - 1));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n125%\r\n```","title":"Convert double into percentage","body":"<blockquote>\n<p><em>&quot;... How can i convert example 1.07 into 7%, 1.50 into 50%, 2.25 into 125% e.t.c. ...&quot;</em></p>\n</blockquote>\n<p>This appears to be <em>a − 1</em>, where <em>a</em> is the value.</p>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] a = { 1.07, 1.50, 2.25 };\nfor (int i = 0, n = a.length; i &lt; n; i++)\n    a[i] = (a[i] - 1) * 100;\n</code></pre>\n<p>To print the value, use the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\">Formatter</a></em> class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.printf(&quot;%.0f%%&quot;, Math.floor(a[2]));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>125%\n</code></pre>\n<p>Alternately, use the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/text/NumberFormat.html\" rel=\"nofollow noreferrer\">NumberFormat</a></em> class.<br />\nNote, this will multiply the value by <em>100</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] a = { 1.07, 1.50, 2.25 };\nNumberFormat f = NumberFormat.getPercentInstance();\nf.setRoundingMode(RoundingMode.FLOOR);\nf.setMaximumFractionDigits(0);\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(f.format(a[2] - 1));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>125%\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700674112,"creation_date":1700673106,"answer_id":77531923,"question_id":77530277,"body_markdown":"Do not use `NumberFormat.getInstance()` for this.  The correct method for it is [NumberFormat.getPercentInstance](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/text/NumberFormat.html#getPercentInstance()).\r\n\r\nExample code:\r\n\r\n    private final NumberFormat PERCENTAGE_FORMAT = NumberFormat.getPercentInstance();\r\n\r\n    public void run() {\r\n        double value = 1.07;\r\n        String percentage = PERCENTAGE_FORMAT.format(value - 1);\r\n        System.out.println(percentage);\r\n    }\r\n\r\nNo need to append a `%` character.  And as a bonus, it will work in all languages without any additional effort on your part.\r\n\r\nNote:  NumberFormat is not thread-safe, so using a shared static instance is not advisable. Even a non-static field may be a problem, if a single instance of your class is used by multiple threads;  creating the NumberFormat inside the method would address this.\r\n","title":"Convert double into percentage","body":"<p>Do not use <code>NumberFormat.getInstance()</code> for this.  The correct method for it is <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/text/NumberFormat.html#getPercentInstance()\" rel=\"nofollow noreferrer\">NumberFormat.getPercentInstance</a>.</p>\n<p>Example code:</p>\n<pre><code>private final NumberFormat PERCENTAGE_FORMAT = NumberFormat.getPercentInstance();\n\npublic void run() {\n    double value = 1.07;\n    String percentage = PERCENTAGE_FORMAT.format(value - 1);\n    System.out.println(percentage);\n}\n</code></pre>\n<p>No need to append a <code>%</code> character.  And as a bonus, it will work in all languages without any additional effort on your part.</p>\n<p>Note:  NumberFormat is not thread-safe, so using a shared static instance is not advisable. Even a non-static field may be a problem, if a single instance of your class is used by multiple threads;  creating the NumberFormat inside the method would address this.</p>\n"}],"owner":{"account_id":29509417,"reputation":41,"user_id":22614791,"display_name":"edith finch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77530312,"answer_count":3,"score":0,"last_activity_date":1700674112,"creation_date":1700659173,"question_id":77530277,"body_markdown":"How can i convert example 1.07 into 7%, 1.50 into 50%, 2.25 into 125% e.t.c.\r\n\r\nMy code so far and it&#39;s not working:\r\n\r\n    private static final NumberFormat PERCENTAGE_FORMAT = NumberFormat.getInstance();\r\n    PERCENTAGE_FORMAT.setMaximumFractionDigits(0);\r\n    PERCENTAGE_FORMAT.format(1.07, &quot;%&quot;)","title":"Convert double into percentage","body":"<p>How can i convert example 1.07 into 7%, 1.50 into 50%, 2.25 into 125% e.t.c.</p>\n<p>My code so far and it's not working:</p>\n<pre><code>private static final NumberFormat PERCENTAGE_FORMAT = NumberFormat.getInstance();\nPERCENTAGE_FORMAT.setMaximumFractionDigits(0);\nPERCENTAGE_FORMAT.format(1.07, &quot;%&quot;)\n</code></pre>\n"},{"tags":["java","html","templates","freemarker"],"answers":[{"tags":[],"owner":{"account_id":27675716,"reputation":61,"user_id":21125580,"display_name":"Meet Mendapara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700673587,"creation_date":1700673587,"answer_id":77531990,"question_id":77531762,"body_markdown":" The &#39;+&#39; operator in FreeMarker is used to concatenate strings. Your syntax is a little strange, though. This is how to concatenate strings in FreeMarker the right way:\r\n\r\n    &lt;@spring.messageText &quot;resource.bundle.key&quot; + dataModel.value, &quot;undefined&quot;/&gt;\r\nIn this example, the value of ${dataModel.value} is concatenated with the constant string &quot;resource.bundle.key&quot;. ${} around dataModel.value inside the string is not required.\r\n\r\nYou can use brackets to ensure that there are no problems with the concatenation:\r\n\r\n    &lt;@spring.messageText (&quot;resource.bundle.key&quot; + dataModel.value), &quot;undefined&quot;/&gt;\r\nThis clearly states the order of operations.\r\n\r\nThe spring.messageText macro receives the concatenated string that results in both scenarios. Verify that the key created by concatenating &quot;resource.bundle.key&quot; with the value of dataModel.value is present in your resource bundle.\r\n\r\n","title":"How to concatene 2 strings in Freemarker template","body":"<p>The '+' operator in FreeMarker is used to concatenate strings. Your syntax is a little strange, though. This is how to concatenate strings in FreeMarker the right way:</p>\n<pre><code>&lt;@spring.messageText &quot;resource.bundle.key&quot; + dataModel.value, &quot;undefined&quot;/&gt;\n</code></pre>\n<p>In this example, the value of ${dataModel.value} is concatenated with the constant string &quot;resource.bundle.key&quot;. ${} around dataModel.value inside the string is not required.</p>\n<p>You can use brackets to ensure that there are no problems with the concatenation:</p>\n<pre><code>&lt;@spring.messageText (&quot;resource.bundle.key&quot; + dataModel.value), &quot;undefined&quot;/&gt;\n</code></pre>\n<p>This clearly states the order of operations.</p>\n<p>The spring.messageText macro receives the concatenated string that results in both scenarios. Verify that the key created by concatenating &quot;resource.bundle.key&quot; with the value of dataModel.value is present in your resource bundle.</p>\n"}],"owner":{"account_id":3346587,"reputation":674,"user_id":2811635,"accept_rate":62,"display_name":"Ousmane MBINTE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77531990,"answer_count":1,"score":0,"last_activity_date":1700673587,"creation_date":1700671480,"question_id":77531762,"body_markdown":"I try to concatane 2 strings in my Freemarker template. The first one it&#39;s a constant and the second one come from the data model and I use the concatened string to get a label in the resource bundle. I try several combinaisons but they&#39;re worked \r\n\r\n    &lt;@spring.messageText &quot;resource.bundle.key&quot; + ${dataModel.value}, &quot;undefined&quot;/&gt;\r\n    &lt;@spring.messageText ${&quot;resource.bundle.key&quot; + ${dataModel.value}}, &quot;undefined&quot;/&gt;\r\n\r\nthx","title":"How to concatene 2 strings in Freemarker template","body":"<p>I try to concatane 2 strings in my Freemarker template. The first one it's a constant and the second one come from the data model and I use the concatened string to get a label in the resource bundle. I try several combinaisons but they're worked</p>\n<pre><code>&lt;@spring.messageText &quot;resource.bundle.key&quot; + ${dataModel.value}, &quot;undefined&quot;/&gt;\n&lt;@spring.messageText ${&quot;resource.bundle.key&quot; + ${dataModel.value}}, &quot;undefined&quot;/&gt;\n</code></pre>\n<p>thx</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163837,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1466693025,"creation_date":1466693025,"answer_id":37994899,"question_id":37994639,"body_markdown":"The stack trace seems pretty clearly to point to the anonymous inner class instantiated for variable `mOnClickListener`.  This is the first inner class, in source order, appearing in class `TorrentPlayerFragment` (as indicated by the stack trace), and it contains an invocation of the method reported as throwing the NPE: `android.os.Bundle.getString(java.lang.String)`.  Specifically,\r\n\r\n                Bundle args = getArguments();\r\n                mStreamUrl  = args.getString(&quot;url&quot;);\r\n\r\nIt seems pretty likely that `getArguments()` is returning `null` in the affected environment.  This seems related to https://stackoverflow.com/questions/16561817/android-fragment-getarguments-returns-null, but I cannot be confident that the circumstances or solutions are the same.","title":"java.lang.NullPointerException error only from Galaxy samsung","body":"<p>The stack trace seems pretty clearly to point to the anonymous inner class instantiated for variable <code>mOnClickListener</code>.  This is the first inner class, in source order, appearing in class <code>TorrentPlayerFragment</code> (as indicated by the stack trace), and it contains an invocation of the method reported as throwing the NPE: <code>android.os.Bundle.getString(java.lang.String)</code>.  Specifically,</p>\n\n<pre><code>            Bundle args = getArguments();\n            mStreamUrl  = args.getString(\"url\");\n</code></pre>\n\n<p>It seems pretty likely that <code>getArguments()</code> is returning <code>null</code> in the affected environment.  This seems related to <a href=\"https://stackoverflow.com/questions/16561817/android-fragment-getarguments-returns-null\">Android Fragment getArguments() returns null</a>, but I cannot be confident that the circumstances or solutions are the same.</p>\n"}],"owner":{"account_id":7675884,"reputation":221,"user_id":5816787,"accept_rate":60,"display_name":"Diaconu Liviu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4747,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":37994899,"answer_count":1,"score":1,"last_activity_date":1700673306,"creation_date":1466692367,"question_id":37994639,"body_markdown":"I received some reports of this error, but I have test equipment and everything goes right. Strange is that all error reports are sent from mobile samsung.\r\nAny idea what could be if I can not resolve it?\r\nerror code:\r\n   \r\n\r\n    &#218;ltimo informe\r\n    18 de jun. 4:57\r\n    Informes de esta semana\r\n    1\r\n    Informes totales\r\n    1\r\n    Versi&#243;n de la aplicaci&#243;n\r\n     \r\n    25\r\n    1\r\n    Versi&#243;n de Android\r\n     \r\n    Android 5.1\r\n    1\r\n    Dispositivo\r\n    Galaxy S6 Edge+ (zenlte) 1\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.String android.os.Bundle.getString(java.lang.String)&#39; on a null object reference\r\n    \tat ro.vrt.videoplayerstreaming.TorrentPlayerFragment$1.onClick(TorrentPlayerFragment.java:107)\r\n    \tat android.view.View.performClick(View.java:5254)\r\n    \tat android.widget.TextView.performClick(TextView.java:10557)\r\n    \tat android.view.View$PerformClick.run(View.java:21203)\r\n    \tat android.os.Handler.handleCallback(Handler.java:739)\r\n    \tat android.os.Handler.dispatchMessage(Handler.java:95)\r\n    \tat android.os.Looper.loop(Looper.java:145)\r\n    \tat android.app.ActivityThread.main(ActivityThread.java:6897)\r\n    \tat java.lang.reflect.Method.invoke(Native Method)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:372)\r\n    \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1404)\r\n    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1199)\r\n\r\n\r\n\r\nJava:\r\n\r\n        @SuppressLint(&quot;SetTextI18n&quot;)\r\n    public class TorrentPlayerFragment  extends Fragment  implements TorrentListener {\r\n    \r\n    \r\n        private Button button2;\r\n        private Button button;\r\n        private ProgressBar progressBar;\r\n        private TorrentStream torrentStream;\r\n    \r\n        String mStreamUrl;\r\n    \r\n        @Nullable\r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n            View v = inflater.inflate(R.layout.activity_torrent_player_fragment, container, false);\r\n    \r\n    \r\n            mStreamUrl = ((EditText) v.findViewById(R.id.bTorrentUrl)).getText().toString();\r\n    \r\n            String action = getActivity().getIntent().getAction();\r\n            Uri data = getActivity().getIntent().getData();\r\n            if (action != null &amp;&amp; action.equals(Intent.ACTION_VIEW) &amp;&amp; data != null) {\r\n                try {\r\n                    mStreamUrl = URLDecoder.decode(data.toString(), &quot;utf-8&quot;);\r\n                } catch (UnsupportedEncodingException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n    \r\n            TorrentOptions torrentOptions = new TorrentOptions.Builder()\r\n                    .saveLocation(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS))\r\n                    .removeFilesAfterStop(true)\r\n                    .build();\r\n    \r\n            torrentStream = TorrentStream.init(torrentOptions);\r\n            torrentStream.addListener(this);\r\n    \r\n            button2 = (Button) v.findViewById(R.id.button2);\r\n            button2.setVisibility(View.GONE);\r\n    \r\n            button = (Button) v.findViewById(R.id.button);\r\n            button.setOnClickListener(mOnClickListener);\r\n            progressBar = (ProgressBar) v.findViewById(R.id.progress);\r\n    \r\n            progressBar.setMax(100);\r\n    \r\n    \r\n    \r\n            return v;\r\n    \r\n    \r\n        }\r\n        @Override\r\n        public void onResume() {\r\n            super.onResume();\r\n        }\r\n    \r\n        View.OnClickListener mOnClickListener = new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                progressBar.setProgress(0);\r\n                if(torrentStream.isStreaming()) {\r\n                    torrentStream.stopStream();\r\n                    button.setText(&quot;Start stream&quot;);\r\n                    button2.setVisibility(View.GONE);\r\n                    return;\r\n                }\r\n                Bundle args = getArguments();\r\n                mStreamUrl  = args.getString(&quot;url&quot;);\r\n                torrentStream.startStream(mStreamUrl);\r\n                button2.setVisibility(View.GONE);\r\n                button.setText(&quot;Stop stream&quot;);\r\n            }\r\n        };\r\n    \r\n    \r\n    \r\n        @Override\r\n        public void onStreamPrepared(Torrent torrent) {\r\n            Log.d(&quot;Torrent&quot;, &quot;OnStreamPrepared&quot;);\r\n            torrent.startDownload();\r\n        }\r\n    \r\n        @Override\r\n        public void onStreamStarted(Torrent torrent) {\r\n            Log.d(&quot;Torrent&quot;, &quot;onStreamStarted&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onStreamError(Torrent torrent, Exception e) {\r\n            Log.e(&quot;Torrent&quot;, &quot;onStreamError&quot;, e);\r\n            button.setText(&quot;Start stream&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onStreamReady(Torrent torrent) {\r\n            progressBar.setProgress(100);\r\n            Log.d(&quot;Torrent&quot;, &quot;onStreamReady: &quot; + torrent.getVideoFile());\r\n    \r\n    \r\n            final String UrlFinalTorrent = torrent.getVideoFile().toString();\r\n    \r\n            button2.setVisibility(View.VISIBLE);\r\n    \r\n            button2.setOnClickListener(new View.OnClickListener() {\r\n                public void onClick(View v) {\r\n                    Intent intent = new Intent(getActivity(), MainActivity.class);\r\n                    intent.putExtra(&quot;url&quot;, UrlFinalTorrent);\r\n                    startActivity(intent);\r\n                }\r\n            });\r\n    \r\n    \r\n        }\r\n        @Override\r\n        public void onStreamProgress(Torrent torrent, StreamStatus status) {\r\n            if(status.bufferProgress &lt;= 100 &amp;&amp; progressBar.getProgress() &lt; 100 &amp;&amp; progressBar.getProgress() != status.bufferProgress) {\r\n                Log.d(&quot;Torrent&quot;, &quot;Progress: &quot; + status.bufferProgress);\r\n                progressBar.setProgress(status.bufferProgress);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onStreamStopped() {\r\n            Log.d(&quot;Torrent&quot;, &quot;onStreamStopped&quot;);\r\n        }\r\n    }\r\n\r\nI think the problem comes from here:\r\n\r\n            final String UrlFinalTorrent = torrent.getVideoFile().toString();\r\n\r\n        button2.setVisibility(View.VISIBLE);\r\n\r\n        button2.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getActivity(), MainActivity.class);\r\n                intent.putExtra(&quot;url&quot;, UrlFinalTorrent);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n\r\nbut as I said I tried everything on android devices and on the emulator and things are working. But this error appears on Samsung devices.\r\nThank you.\r\n\r\n","title":"java.lang.NullPointerException error only from Galaxy samsung","body":"<p>I received some reports of this error, but I have test equipment and everything goes right. Strange is that all error reports are sent from mobile samsung.\nAny idea what could be if I can not resolve it?\nerror code:</p>\n\n<pre><code>Último informe\n18 de jun. 4:57\nInformes de esta semana\n1\nInformes totales\n1\nVersión de la aplicación\n\n25\n1\nVersión de Android\n\nAndroid 5.1\n1\nDispositivo\nGalaxy S6 Edge+ (zenlte) 1\njava.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String android.os.Bundle.getString(java.lang.String)' on a null object reference\n    at ro.vrt.videoplayerstreaming.TorrentPlayerFragment$1.onClick(TorrentPlayerFragment.java:107)\n    at android.view.View.performClick(View.java:5254)\n    at android.widget.TextView.performClick(TextView.java:10557)\n    at android.view.View$PerformClick.run(View.java:21203)\n    at android.os.Handler.handleCallback(Handler.java:739)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:145)\n    at android.app.ActivityThread.main(ActivityThread.java:6897)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:372)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1404)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1199)\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>    @SuppressLint(\"SetTextI18n\")\npublic class TorrentPlayerFragment  extends Fragment  implements TorrentListener {\n\n\n    private Button button2;\n    private Button button;\n    private ProgressBar progressBar;\n    private TorrentStream torrentStream;\n\n    String mStreamUrl;\n\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View v = inflater.inflate(R.layout.activity_torrent_player_fragment, container, false);\n\n\n        mStreamUrl = ((EditText) v.findViewById(R.id.bTorrentUrl)).getText().toString();\n\n        String action = getActivity().getIntent().getAction();\n        Uri data = getActivity().getIntent().getData();\n        if (action != null &amp;&amp; action.equals(Intent.ACTION_VIEW) &amp;&amp; data != null) {\n            try {\n                mStreamUrl = URLDecoder.decode(data.toString(), \"utf-8\");\n            } catch (UnsupportedEncodingException e) {\n                e.printStackTrace();\n            }\n        }\n\n        TorrentOptions torrentOptions = new TorrentOptions.Builder()\n                .saveLocation(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS))\n                .removeFilesAfterStop(true)\n                .build();\n\n        torrentStream = TorrentStream.init(torrentOptions);\n        torrentStream.addListener(this);\n\n        button2 = (Button) v.findViewById(R.id.button2);\n        button2.setVisibility(View.GONE);\n\n        button = (Button) v.findViewById(R.id.button);\n        button.setOnClickListener(mOnClickListener);\n        progressBar = (ProgressBar) v.findViewById(R.id.progress);\n\n        progressBar.setMax(100);\n\n\n\n        return v;\n\n\n    }\n    @Override\n    public void onResume() {\n        super.onResume();\n    }\n\n    View.OnClickListener mOnClickListener = new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            progressBar.setProgress(0);\n            if(torrentStream.isStreaming()) {\n                torrentStream.stopStream();\n                button.setText(\"Start stream\");\n                button2.setVisibility(View.GONE);\n                return;\n            }\n            Bundle args = getArguments();\n            mStreamUrl  = args.getString(\"url\");\n            torrentStream.startStream(mStreamUrl);\n            button2.setVisibility(View.GONE);\n            button.setText(\"Stop stream\");\n        }\n    };\n\n\n\n    @Override\n    public void onStreamPrepared(Torrent torrent) {\n        Log.d(\"Torrent\", \"OnStreamPrepared\");\n        torrent.startDownload();\n    }\n\n    @Override\n    public void onStreamStarted(Torrent torrent) {\n        Log.d(\"Torrent\", \"onStreamStarted\");\n    }\n\n    @Override\n    public void onStreamError(Torrent torrent, Exception e) {\n        Log.e(\"Torrent\", \"onStreamError\", e);\n        button.setText(\"Start stream\");\n    }\n\n    @Override\n    public void onStreamReady(Torrent torrent) {\n        progressBar.setProgress(100);\n        Log.d(\"Torrent\", \"onStreamReady: \" + torrent.getVideoFile());\n\n\n        final String UrlFinalTorrent = torrent.getVideoFile().toString();\n\n        button2.setVisibility(View.VISIBLE);\n\n        button2.setOnClickListener(new View.OnClickListener() {\n            public void onClick(View v) {\n                Intent intent = new Intent(getActivity(), MainActivity.class);\n                intent.putExtra(\"url\", UrlFinalTorrent);\n                startActivity(intent);\n            }\n        });\n\n\n    }\n    @Override\n    public void onStreamProgress(Torrent torrent, StreamStatus status) {\n        if(status.bufferProgress &lt;= 100 &amp;&amp; progressBar.getProgress() &lt; 100 &amp;&amp; progressBar.getProgress() != status.bufferProgress) {\n            Log.d(\"Torrent\", \"Progress: \" + status.bufferProgress);\n            progressBar.setProgress(status.bufferProgress);\n        }\n    }\n\n    @Override\n    public void onStreamStopped() {\n        Log.d(\"Torrent\", \"onStreamStopped\");\n    }\n}\n</code></pre>\n\n<p>I think the problem comes from here:</p>\n\n<pre><code>        final String UrlFinalTorrent = torrent.getVideoFile().toString();\n\n    button2.setVisibility(View.VISIBLE);\n\n    button2.setOnClickListener(new View.OnClickListener() {\n        public void onClick(View v) {\n            Intent intent = new Intent(getActivity(), MainActivity.class);\n            intent.putExtra(\"url\", UrlFinalTorrent);\n            startActivity(intent);\n        }\n    });\n</code></pre>\n\n<p>but as I said I tried everything on android devices and on the emulator and things are working. But this error appears on Samsung devices.\nThank you.</p>\n"},{"tags":["java","generics","casting"],"comments":[{"owner":{"account_id":6651855,"reputation":224820,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1699924412,"post_id":77477609,"comment_id":136589366,"body_markdown":"They are not the same. In one case you are casting to `UnaryOperator&lt;T&gt;`, and in the other case you are casting to `UnaryOperator&lt;String&gt;`.  A &quot;why&quot; question like this isn&#39;t really answerable, because for every explanation I give, you can keep asking &quot;why is *that* the case?&quot; and we will be here forever. Can you describe what kind of answer you are looking for, and also show what you already know, so that we have some common ground?","body":"They are not the same. In one case you are casting to <code>UnaryOperator&lt;T&gt;</code>, and in the other case you are casting to <code>UnaryOperator&lt;String&gt;</code>.  A &quot;why&quot; question like this isn&#39;t really answerable, because for every explanation I give, you can keep asking &quot;why is <i>that</i> the case?&quot; and we will be here forever. Can you describe what kind of answer you are looking for, and also show what you already know, so that we have some common ground?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1699925452,"post_id":77477609,"comment_id":136589449,"body_markdown":"Of course, no one should do this in practice anyway.  The compiler warns that such code is unsafe for a reason.  Most typed generic casts are unsafe.  There is always a better way.","body":"Of course, no one should do this in practice anyway.  The compiler warns that such code is unsafe for a reason.  Most typed generic casts are unsafe.  There is always a better way."}],"answers":[{"tags":[],"owner":{"account_id":16217924,"reputation":23,"user_id":11710253,"display_name":"KevinJDK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699924816,"creation_date":1699924816,"answer_id":77477693,"question_id":77477609,"body_markdown":"I think in the second code snip it doesn&#39;t compile because the cast to `UnaryOperator&lt;String&gt;` would be unsafe and is not allowed to compile because of this. The `identityFunction()` is safe because it uses type erasure allowing it to work with generic types. The cast `(UnaryOperator&lt;T&gt;) IDENTITY_FN` is safe because of type erasure. At runtime, the Java type system erases the type variable T and replaces it with its bound or Object if it&#39;s unbounded. So at runtime, `UnaryOperator&lt;T&gt;` just becomes `UnaryOperator`, and `IDENTITY_FN` can be safely cast to this raw type.\r\n\r\nWhen you assign the result of `identityFunction()` to a variable of a specific type like `UnaryOperator&lt;String&gt;`, the Java compiler checks that the types are compatible. ","title":"Java : casting and generics","body":"<p>I think in the second code snip it doesn't compile because the cast to <code>UnaryOperator&lt;String&gt;</code> would be unsafe and is not allowed to compile because of this. The <code>identityFunction()</code> is safe because it uses type erasure allowing it to work with generic types. The cast <code>(UnaryOperator&lt;T&gt;) IDENTITY_FN</code> is safe because of type erasure. At runtime, the Java type system erases the type variable T and replaces it with its bound or Object if it's unbounded. So at runtime, <code>UnaryOperator&lt;T&gt;</code> just becomes <code>UnaryOperator</code>, and <code>IDENTITY_FN</code> can be safely cast to this raw type.</p>\n<p>When you assign the result of <code>identityFunction()</code> to a variable of a specific type like <code>UnaryOperator&lt;String&gt;</code>, the Java compiler checks that the types are compatible.</p>\n"},{"tags":[],"owner":{"account_id":31622,"reputation":120341,"user_id":86989,"display_name":"newacct"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700673261,"creation_date":1700673261,"answer_id":77531942,"question_id":77477609,"body_markdown":"The cast of the expression `IDENTITY_FN` (which has type `UnaryOperator&lt;Object&gt;`) to type `UnaryOperator&lt;String&gt;` is disallowed at compile time because it is provably impossible for something to be both a `UnaryOperator&lt;Object&gt;` and a `UnaryOperator&lt;String&gt;` at the same time (i.e. there cannot be any type that is a subtype of both). Generic type arguments are invariant, so although `String` is a subtype of `Object`, `UnaryOperator&lt;String&gt;` is not a subtype of `UnaryOperator&lt;Object&gt;`, nor vice versa. And if an implementing class inherits from `UnaryOperator` twice, it is not allowed to inherit it with different type arguments in the two inheritances.\r\n\r\nOn the other hand, the cast of `IDENTITY_FN` (which has type `UnaryOperator&lt;Object&gt;`) to type `UnaryOperator&lt;T&gt;` is *not* disallowed at compile time, because it is possible for something to be a `UnaryOperator&lt;Object&gt;` and a `UnaryOperator&lt;T&gt;` at the same time -- namely, if `T` were `Object`, then `UnaryOperator&lt;Object&gt;` would be a subtype of both. Although it&#39;s also possible for this cast to be incorrect (i.e. when `T` is anything other than `Object`), since there is at least one case where it could be valid, the compiler cannot disallow it.","title":"Java : casting and generics","body":"<p>The cast of the expression <code>IDENTITY_FN</code> (which has type <code>UnaryOperator&lt;Object&gt;</code>) to type <code>UnaryOperator&lt;String&gt;</code> is disallowed at compile time because it is provably impossible for something to be both a <code>UnaryOperator&lt;Object&gt;</code> and a <code>UnaryOperator&lt;String&gt;</code> at the same time (i.e. there cannot be any type that is a subtype of both). Generic type arguments are invariant, so although <code>String</code> is a subtype of <code>Object</code>, <code>UnaryOperator&lt;String&gt;</code> is not a subtype of <code>UnaryOperator&lt;Object&gt;</code>, nor vice versa. And if an implementing class inherits from <code>UnaryOperator</code> twice, it is not allowed to inherit it with different type arguments in the two inheritances.</p>\n<p>On the other hand, the cast of <code>IDENTITY_FN</code> (which has type <code>UnaryOperator&lt;Object&gt;</code>) to type <code>UnaryOperator&lt;T&gt;</code> is <em>not</em> disallowed at compile time, because it is possible for something to be a <code>UnaryOperator&lt;Object&gt;</code> and a <code>UnaryOperator&lt;T&gt;</code> at the same time -- namely, if <code>T</code> were <code>Object</code>, then <code>UnaryOperator&lt;Object&gt;</code> would be a subtype of both. Although it's also possible for this cast to be incorrect (i.e. when <code>T</code> is anything other than <code>Object</code>), since there is at least one case where it could be valid, the compiler cannot disallow it.</p>\n"}],"owner":{"account_id":11210679,"reputation":1241,"user_id":8224838,"display_name":"AntonBoarf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77531942,"answer_count":2,"score":1,"last_activity_date":1700673261,"creation_date":1699922761,"question_id":77477609,"body_markdown":"I have some understanding issue with generics\r\n\r\nI have this variable : `private static final UnaryOperator&lt;Object&gt; IDENTITY_FN = t -&gt; t;`\r\n\r\nI don&#39;t understand why this code compiles :\r\n\r\n    public static &lt;T&gt; UnaryOperator&lt;T&gt; identityFunction() {\r\n            return (UnaryOperator&lt;T&gt;) IDENTITY_FN;\r\n        }\r\n    \r\n    UnaryOperator&lt;String&gt; fn = identityFunction();\r\n\r\nBut... this code doesn&#39;t compile :\r\n\r\n    UnaryOperator&lt;String&gt; fn = (UnaryOperator&lt;String&gt;) IDENTITY_FN;\r\n\r\nIt looks basically the same for me","title":"Java : casting and generics","body":"<p>I have some understanding issue with generics</p>\n<p>I have this variable : <code>private static final UnaryOperator&lt;Object&gt; IDENTITY_FN = t -&gt; t;</code></p>\n<p>I don't understand why this code compiles :</p>\n<pre><code>public static &lt;T&gt; UnaryOperator&lt;T&gt; identityFunction() {\n        return (UnaryOperator&lt;T&gt;) IDENTITY_FN;\n    }\n\nUnaryOperator&lt;String&gt; fn = identityFunction();\n</code></pre>\n<p>But... this code doesn't compile :</p>\n<pre><code>UnaryOperator&lt;String&gt; fn = (UnaryOperator&lt;String&gt;) IDENTITY_FN;\n</code></pre>\n<p>It looks basically the same for me</p>\n"},{"tags":["java","class","methods","naming"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":3,"creation_date":1700671353,"post_id":77531696,"comment_id":136684055,"body_markdown":"Does this answer your question? [Purpose of a constructor in Java?](https://stackoverflow.com/questions/19941825/purpose-of-a-constructor-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/19941825/purpose-of-a-constructor-in-java\">Purpose of a constructor in Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299828,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1700671835,"creation_date":1700671038,"answer_id":77531706,"question_id":77531696,"body_markdown":"`Animal` in this case isn&#39;t technically a method - it&#39;s a [constructor](https://en.wikipedia.org/wiki/Constructor_(object-oriented_programming)) - a special function that&#39;s called when you construct an instance using the `new` operator.\r\n\r\nYou can recognize it by the fact it shares the name of the class and has no return type.\r\n\r\nHaving said that, you definitely **can** have a method with the same name as the class the contains it. It&#39;s a bad practice because it may confuse people reading the code to think it&#39;s a constructor, but it&#39;s 100% possible.","title":"Why are the class and method names the same?","body":"<p><code>Animal</code> in this case isn't technically a method - it's a <a href=\"https://en.wikipedia.org/wiki/Constructor_(object-oriented_programming)\" rel=\"nofollow noreferrer\">constructor</a> - a special function that's called when you construct an instance using the <code>new</code> operator.</p>\n<p>You can recognize it by the fact it shares the name of the class and has no return type.</p>\n<p>Having said that, you definitely <strong>can</strong> have a method with the same name as the class the contains it. It's a bad practice because it may confuse people reading the code to think it's a constructor, but it's 100% possible.</p>\n"},{"tags":[],"owner":{"account_id":12628242,"reputation":233,"user_id":9180837,"display_name":"Sayed Sajad Hosseini"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700671248,"creation_date":1700671248,"answer_id":77531733,"question_id":77531696,"body_markdown":" We can have a method name same as a class name in Java but it is not a good practice to do so. but in here the **Animal** is not just a normal method it is a constructor.","title":"Why are the class and method names the same?","body":"<p>We can have a method name same as a class name in Java but it is not a good practice to do so. but in here the <strong>Animal</strong> is not just a normal method it is a constructor.</p>\n"},{"tags":[],"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700672744,"creation_date":1700672744,"answer_id":77531890,"question_id":77531696,"body_markdown":"[Constructors](https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.8) are special kind constructs in Java. They are not methods, they are nor members, but a special constructs that are used to initialize instances of the surrounding class.\r\n\r\nYou can identify constructor with the following parts:\r\n- It has no return type;\r\n- It may declare parameters, but may also be without any of them (this is called default, a.k.a. no-args constructor);\r\n- Constructor name **must** be exactly as same as its surrounding class name;\r\n- Constructors, in most of cases, are used to initialize member variables (fields) with `this.` prefix.\r\n\r\nFew notes about constructors (from the JLS):\r\n- Constructor declarations are not members. They are never inherited and therefore are not subject to hiding or overriding;\r\n- Constructors are invoked by class instance creation expressions. E.g. if the class is `class Person`, its instance creation expression with default constructor will be `new Person();`.\r\n\r\nFor example:\r\n```java\r\npublic class Person {\r\n\r\n    private int age;\r\n    private String name;\r\n\r\n    // This is a default / no-args constructor\r\n    public Person() {\r\n    }\r\n\r\n    // This is a constructor with two parameters\r\n    public Person(int age, String name) {\r\n        this.age = age;\r\n        this.name = name;\r\n    }\r\n}\r\n\r\npublic class Main {\r\n    \r\n    public static void main(String[] args) {\r\n        Person p1 = new Person();\r\n        Person p2 = new Person(15, &quot;John&quot;);\r\n    }\r\n\r\n}\r\n```","title":"Why are the class and method names the same?","body":"<p><a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.8\" rel=\"nofollow noreferrer\">Constructors</a> are special kind constructs in Java. They are not methods, they are nor members, but a special constructs that are used to initialize instances of the surrounding class.</p>\n<p>You can identify constructor with the following parts:</p>\n<ul>\n<li>It has no return type;</li>\n<li>It may declare parameters, but may also be without any of them (this is called default, a.k.a. no-args constructor);</li>\n<li>Constructor name <strong>must</strong> be exactly as same as its surrounding class name;</li>\n<li>Constructors, in most of cases, are used to initialize member variables (fields) with <code>this.</code> prefix.</li>\n</ul>\n<p>Few notes about constructors (from the JLS):</p>\n<ul>\n<li>Constructor declarations are not members. They are never inherited and therefore are not subject to hiding or overriding;</li>\n<li>Constructors are invoked by class instance creation expressions. E.g. if the class is <code>class Person</code>, its instance creation expression with default constructor will be <code>new Person();</code>.</li>\n</ul>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person {\n\n    private int age;\n    private String name;\n\n    // This is a default / no-args constructor\n    public Person() {\n    }\n\n    // This is a constructor with two parameters\n    public Person(int age, String name) {\n        this.age = age;\n        this.name = name;\n    }\n}\n\npublic class Main {\n    \n    public static void main(String[] args) {\n        Person p1 = new Person();\n        Person p2 = new Person(15, &quot;John&quot;);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":29834355,"reputation":11,"user_id":22864070,"display_name":"amir"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1700673187,"accepted_answer_id":77531706,"answer_count":3,"score":0,"last_activity_date":1700672744,"creation_date":1700670914,"question_id":77531696,"body_markdown":"I have just started learning Java. today, during training, I saw some code that had the same method and class name. I wanted to know how such a thing is possible? does the (public Animal) part work as a method here? \r\n\r\n```java\r\npublic class Animal {\r\n    public Animal() {\r\n        System.out.println(“I am an Animal”);\r\n    }\r\n}\r\n```\r\nIn fact, I never expected that the name of the Class and the Method are the same.","title":"Why are the class and method names the same?","body":"<p>I have just started learning Java. today, during training, I saw some code that had the same method and class name. I wanted to know how such a thing is possible? does the (public Animal) part work as a method here?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Animal {\n    public Animal() {\n        System.out.println(“I am an Animal”);\n    }\n}\n</code></pre>\n<p>In fact, I never expected that the name of the Class and the Method are the same.</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":14572332,"reputation":360,"user_id":10525284,"display_name":"HuserB1989"},"score":0,"creation_date":1589288609,"post_id":61752020,"comment_id":109228654,"body_markdown":"Hello Mats. Did you try to hit ‘mvn clean install’ before/after reimporting the dependency?","body":"Hello Mats. Did you try to hit ‘mvn clean install’ before/after reimporting the dependency?"},{"owner":{"account_id":9620777,"reputation":233,"user_id":7142109,"display_name":"Mats"},"score":0,"creation_date":1589288755,"post_id":61752020,"comment_id":109228738,"body_markdown":"@HuserB1989 yes is did","body":"@HuserB1989 yes is did"},{"owner":{"account_id":4949717,"reputation":1119,"user_id":3984101,"accept_rate":60,"display_name":"Nipun Thathsara"},"score":1,"creation_date":1589299159,"post_id":61752020,"comment_id":109235644,"body_markdown":"Regarding your command line attempt, check what&#39;s the JDK that maven is referring to by `mvn -version`. Because that might be different from what&#39;s running in the IDE. Also, shall we pass `-e` to check if we can get a detailed stack trace of the failure.","body":"Regarding your command line attempt, check what&#39;s the JDK that maven is referring to by <code>mvn -version</code>. Because that might be different from what&#39;s running in the IDE. Also, shall we pass <code>-e</code> to check if we can get a detailed stack trace of the failure."},{"owner":{"account_id":9620777,"reputation":233,"user_id":7142109,"display_name":"Mats"},"score":0,"creation_date":1589299821,"post_id":61752020,"comment_id":109236062,"body_markdown":"@NipunThathsara When I ran `mvn -version` I got `jre1.8`. That is obviously wrong, but how do I change it?","body":"@NipunThathsara When I ran <code>mvn -version</code> I got <code>jre1.8</code>. That is obviously wrong, but how do I change it?"},{"owner":{"account_id":4949717,"reputation":1119,"user_id":3984101,"accept_rate":60,"display_name":"Nipun Thathsara"},"score":1,"creation_date":1589300087,"post_id":61752020,"comment_id":109236219,"body_markdown":"@Mats, try changing the `JAVA_HOME` and test in a new terminal. (Or source the respective profile for the changes to make effect)","body":"@Mats, try changing the <code>JAVA_HOME</code> and test in a new terminal. (Or source the respective profile for the changes to make effect)"},{"owner":{"account_id":9620777,"reputation":233,"user_id":7142109,"display_name":"Mats"},"score":0,"creation_date":1589301650,"post_id":61752020,"comment_id":109237162,"body_markdown":"@NipunThathsara Thank you! That worked. I managed to get the `mvn -version` to `13.0.2`. Now the compile works and I can run the application from the command line. However, I still have the same error when trying to run from IntelliJ.","body":"@NipunThathsara Thank you! That worked. I managed to get the <code>mvn -version</code> to <code>13.0.2</code>. Now the compile works and I can run the application from the command line. However, I still have the same error when trying to run from IntelliJ."},{"owner":{"account_id":4949717,"reputation":1119,"user_id":3984101,"accept_rate":60,"display_name":"Nipun Thathsara"},"score":0,"creation_date":1589301877,"post_id":61752020,"comment_id":109237290,"body_markdown":"@Mats, Can you please attach the build log to see the detailed failure?","body":"@Mats, Can you please attach the build log to see the detailed failure?"},{"owner":{"account_id":9620777,"reputation":233,"user_id":7142109,"display_name":"Mats"},"score":0,"creation_date":1589302634,"post_id":61752020,"comment_id":109237747,"body_markdown":"@NipunThathsara I added the build log as well as the run configuration I have set up to the bottom of the main  post","body":"@NipunThathsara I added the build log as well as the run configuration I have set up to the bottom of the main  post"},{"owner":{"account_id":4949717,"reputation":1119,"user_id":3984101,"accept_rate":60,"display_name":"Nipun Thathsara"},"score":0,"creation_date":1589303267,"post_id":61752020,"comment_id":109238087,"body_markdown":"issue seems to be `Unrecognized option: --module-path` and you can try the answer provided here. https://stackoverflow.com/questions/55855335/javafx-and-maven-in-intellij-java-home-set-but-unrecognized-option-module-pa   Give it a try.","body":"issue seems to be <code>Unrecognized option: --module-path</code> and you can try the answer provided here. <a href=\"https://stackoverflow.com/questions/55855335/javafx-and-maven-in-intellij-java-home-set-but-unrecognized-option-module-pa\" title=\"javafx and maven in intellij java home set but unrecognized option module pa\">stackoverflow.com/questions/55855335/&hellip;</a>   Give it a try."},{"owner":{"account_id":9620777,"reputation":233,"user_id":7142109,"display_name":"Mats"},"score":0,"creation_date":1589305596,"post_id":61752020,"comment_id":109239343,"body_markdown":"@NipunThathsara\nIf I understand correctly, I am already doing the things described as the solution you gave. But it put me on the right track, and I found the solution. \nThe solution was to add this line to my `javafx-maven-plugin` inside the `&lt;configuration&gt; ` tags:\n`&lt;executable&gt;C:\\Program Files\\Java\\jdk-13.0.2\\bin\\java&lt;/executable&gt;`","body":"@NipunThathsara If I understand correctly, I am already doing the things described as the solution you gave. But it put me on the right track, and I found the solution.  The solution was to add this line to my <code>javafx-maven-plugin</code> inside the <code>&lt;configuration&gt; </code> tags: <code>&lt;executable&gt;C:\\Program Files\\Java\\jdk-13.0.2\\bin\\java&lt;&#47;executable&gt;</code>"}],"answers":[{"tags":[],"owner":{"account_id":9620777,"reputation":233,"user_id":7142109,"display_name":"Mats"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1589306318,"creation_date":1589306318,"answer_id":61758740,"question_id":61752020,"body_markdown":" After much back and forth, I found the solution [here][1]:\r\n\r\nUnder the last step of `JavaFx with IntelliJ &gt; Non modular with Maven` it states:\r\n\r\n - **Note:** In case JAVA_HOME is not set to 14, running from the Maven\r\n   Projects window might fail. To avoid it, you can add the correct java\r\n   command to the javafx-maven-plugin:\r\n   `&lt;configuration&gt;&lt;executable&gt;/path/to/jdk-12/bin/java&lt;/executable&gt;&lt;/configuration&gt;`.\r\n\r\nAs my JAVA_HOME is set to 13.0.2, this solution applies to me.\r\n\r\n  [1]: https://openjfx.io/openjfx-docs/#maven","title":"Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.1:run (default-cli) after removing dependency","body":"<p>After much back and forth, I found the solution <a href=\"https://openjfx.io/openjfx-docs/#maven\" rel=\"noreferrer\">here</a>:</p>\n\n<p>Under the last step of <code>JavaFx with IntelliJ &gt; Non modular with Maven</code> it states:</p>\n\n<ul>\n<li><strong>Note:</strong> In case JAVA_HOME is not set to 14, running from the Maven\nProjects window might fail. To avoid it, you can add the correct java\ncommand to the javafx-maven-plugin:\n<code>&lt;configuration&gt;&lt;executable&gt;/path/to/jdk-12/bin/java&lt;/executable&gt;&lt;/configuration&gt;</code>.</li>\n</ul>\n\n<p>As my JAVA_HOME is set to 13.0.2, this solution applies to me.</p>\n"},{"tags":[],"owner":{"account_id":15473463,"reputation":29,"user_id":11162782,"display_name":"Oliver Emanuel S Netto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662262788,"creation_date":1662262788,"answer_id":73596642,"question_id":61752020,"body_markdown":"In my case, I needed to configure it like this:\r\n```\r\n                &lt;configuration&gt;\r\n                    &lt;jlinkExecutable&gt;/home/myuser/java/jdk-11/bin/jlink&lt;/jlinkExecutable&gt;\r\n                &lt;/configuration&gt;\r\n```\r\n\r\nmy complete pom file looked like this:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;testes-diversos-javafx&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;testes-diversos-javafx&lt;/name&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;junit.version&gt;5.8.2&lt;/junit.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n            &lt;version&gt;17.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n            &lt;version&gt;17.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-web&lt;/artifactId&gt;\r\n            &lt;version&gt;17.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.controlsfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;controlsfx&lt;/artifactId&gt;\r\n            &lt;version&gt;11.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.dlsc.formsfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;formsfx-core&lt;/artifactId&gt;\r\n            &lt;version&gt;11.3.2&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;*&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ikonli-javafx&lt;/artifactId&gt;\r\n            &lt;version&gt;12.3.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.kordamp.bootstrapfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bootstrapfx-core&lt;/artifactId&gt;\r\n            &lt;version&gt;0.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;eu.hansolo&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tilesfx&lt;/artifactId&gt;\r\n            &lt;version&gt;11.48&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;*&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.10.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.0.8&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;jlinkExecutable&gt;/home/myuser/java/jdk-11/bin/jlink&lt;/jlinkExecutable&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-cli&lt;/id&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;mainClass&gt;\r\n                                com.example.testesdiversosjavafx/com.example.testesdiversosjavafx.HelloApplication\r\n                            &lt;/mainClass&gt;\r\n                            &lt;launcher&gt;app&lt;/launcher&gt;\r\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\r\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\r\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n","title":"Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.1:run (default-cli) after removing dependency","body":"<p>In my case, I needed to configure it like this:</p>\n<pre><code>                &lt;configuration&gt;\n                    &lt;jlinkExecutable&gt;/home/myuser/java/jdk-11/bin/jlink&lt;/jlinkExecutable&gt;\n                &lt;/configuration&gt;\n</code></pre>\n<p>my complete pom file looked like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;testes-diversos-javafx&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;testes-diversos-javafx&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;junit.version&gt;5.8.2&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;17.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;17.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-web&lt;/artifactId&gt;\n            &lt;version&gt;17.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.controlsfx&lt;/groupId&gt;\n            &lt;artifactId&gt;controlsfx&lt;/artifactId&gt;\n            &lt;version&gt;11.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.dlsc.formsfx&lt;/groupId&gt;\n            &lt;artifactId&gt;formsfx-core&lt;/artifactId&gt;\n            &lt;version&gt;11.3.2&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                    &lt;artifactId&gt;*&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.kordamp.ikonli&lt;/groupId&gt;\n            &lt;artifactId&gt;ikonli-javafx&lt;/artifactId&gt;\n            &lt;version&gt;12.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.kordamp.bootstrapfx&lt;/groupId&gt;\n            &lt;artifactId&gt;bootstrapfx-core&lt;/artifactId&gt;\n            &lt;version&gt;0.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;eu.hansolo&lt;/groupId&gt;\n            &lt;artifactId&gt;tilesfx&lt;/artifactId&gt;\n            &lt;version&gt;11.48&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                    &lt;artifactId&gt;*&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;jlinkExecutable&gt;/home/myuser/java/jdk-11/bin/jlink&lt;/jlinkExecutable&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;\n                                com.example.testesdiversosjavafx/com.example.testesdiversosjavafx.HelloApplication\n                            &lt;/mainClass&gt;\n                            &lt;launcher&gt;app&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5238279,"reputation":323,"user_id":4186189,"display_name":"Daniel Maldonado"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700672613,"creation_date":1700672613,"answer_id":77531875,"question_id":61752020,"body_markdown":"Check the JAVA_HOME and MAVEN_HOME in your environment before playing around with the configuration.  Also the $PATH value.  I had both of mine set to the wrong paths and ran into all kinds of issues including this one.  I would think the IDE (IntelliJ) would isolate the project by using a configuration specifically for the project but it did not.  As soon as I set those to valid values and restarted IntelliJ most of the issues on my project/system went away.","title":"Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.1:run (default-cli) after removing dependency","body":"<p>Check the JAVA_HOME and MAVEN_HOME in your environment before playing around with the configuration.  Also the $PATH value.  I had both of mine set to the wrong paths and ran into all kinds of issues including this one.  I would think the IDE (IntelliJ) would isolate the project by using a configuration specifically for the project but it did not.  As soon as I set those to valid values and restarted IntelliJ most of the issues on my project/system went away.</p>\n"}],"owner":{"account_id":9620777,"reputation":233,"user_id":7142109,"display_name":"Mats"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15549,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":61758740,"answer_count":3,"score":3,"last_activity_date":1700672613,"creation_date":1589287377,"question_id":61752020,"body_markdown":"I have a JavaFX Maven project that suddenly threw an error after removing a dependency. The dependency was added only a couple minutes prior and is not and was not used or referenced by any code in the project. No other files than the `pom` file have been touched since adding the dependency. I did update/reimport the `pom` file.\r\n\r\nThe code worked as expected before and while dependency was added, only stopped when removing the dependency.\r\n\r\n**The error is as follows:**\r\n\r\n    Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.1:run (default-cli) on project computer: Error: Command execution failed. Process exited with an error: 1 (Exit value: 1)\r\n    org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n\r\n**Here is my pom file with the dependency I removed:**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;computer&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;14&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n                &lt;version&gt;14&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- This is the dependency I removed\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\r\n                &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n                &lt;version&gt;4.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            --&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;release&gt;11&lt;/release&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;0.0.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;mainClass&gt;org.computer.App&lt;/mainClass&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n**Edit:**\r\nFor additional information:\r\nwhen reimporting the dependency, it is still not working.\r\n\r\n**Edit 2:**\r\nI tried running from the command prompt instead. Now I get this error:\r\n\r\n    No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?\r\n\r\nI have the java 13.0.2 jdk installed, and it worked properly before.\r\n\r\n**Edit 3:**\r\n\r\nI have now tried to reinstall Intellij, the java 13.0.2 JDK, Maven, and set up fresh environment variables. Nothing works. Even brand new JavaFX Maven projects won&#39;t work now.\r\n\r\n**This is the run configuration in IntelliJ:**\r\n\r\n    clean:clean javafx:compile javafx:run -f pom.xml -f pom.xml -f pom.xml\r\n\r\n**Build Log when running in intelliJ:**\r\n\r\n    &quot;C:\\Program Files\\Java\\jdk-13.0.2\\bin\\java.exe&quot; -Dmaven.multiModuleProjectDirectory=C:\\Users\\mats\\Documents\\intellij-projects\\computer &quot;-Dmaven.home=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven3&quot; &quot;-Dclassworlds.conf=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven3\\bin\\m2.conf&quot; &quot;-Dmaven.ext.class.path=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven-event-listener.jar&quot; &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\lib\\idea_rt.jar=50370:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\bin&quot; -Dfile.encoding=UTF-8 -classpath &quot;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds-2.6.0.jar;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds.license&quot; org.codehaus.classworlds.Launcher -Didea.version2020.1.1 clean:clean javafx:compile javafx:run -f pom.xml -f pom.xml\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] ------------------------&lt; org.example:computer &gt;------------------------\r\n    [INFO] Building computer 1.0-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:2.5:clean (default-cli) @ computer ---\r\n    [INFO] Deleting C:\\Users\\mats\\Documents\\intellij-projects\\computer\\target\r\n    [INFO] \r\n    [INFO] --- javafx-maven-plugin:0.0.1:compile (default-cli) @ computer ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] Copying 2 resources\r\n    [INFO] Changes detected - recompiling the module!\r\n    [INFO] Compiling 14 source files to C:\\Users\\mats\\Documents\\intellij-projects\\computer\\target\\classes\r\n    [INFO] /C:/Users/mats/Documents/intellij-projects/computer/src/main/java/org/computer/io/WriteToCSV.java: C:\\Users\\mats\\Documents\\intellij-projects\\computer\\src\\main\\java\\org\\computer\\io\\WriteToCSV.java uses unchecked or unsafe operations.\r\n    [INFO] /C:/Users/mats/Documents/intellij-projects/computer/src/main/java/org/computer/io/WriteToCSV.java: Recompile with -Xlint:unchecked for details.\r\n    [INFO] \r\n    [INFO] --- javafx-maven-plugin:0.0.1:run (default-cli) @ computer ---\r\n    Error: Could not create the Java Virtual Machine.\r\n    Error: A fatal exception has occurred. Program will exit.\r\n    Unrecognized option: --module-path\r\n    [ERROR] Command execution failed.\r\n    org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n        at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\r\n        at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\r\n        at org.openjfx.JavaFXRunMojo.executeCommandLine (JavaFXRunMojo.java:525)\r\n        at org.openjfx.JavaFXRunMojo.executeCommandLine (JavaFXRunMojo.java:487)\r\n        at org.openjfx.JavaFXRunMojo.execute (JavaFXRunMojo.java:168)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:567)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n        at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n    \tat org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:404)\r\n    \tat org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:166)\r\n    \tat org.openjfx.JavaFXRunMojo.executeCommandLine(JavaFXRunMojo.java:525)\r\n    \tat org.openjfx.JavaFXRunMojo.executeCommandLine(JavaFXRunMojo.java:487)\r\n    \tat org.openjfx.JavaFXRunMojo.execute(JavaFXRunMojo.java:168)\r\n    \tat org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:210)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:156)\r\n    \tat org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:148)\r\n    \tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\r\n    \tat org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\r\n    \tat org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\r\n    \tat org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\r\n    \tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:305)\r\n    \tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\r\n    \tat org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\r\n    \tat org.apache.maven.cli.MavenCli.execute(MavenCli.java:957)\r\n    \tat org.apache.maven.cli.MavenCli.doMain(MavenCli.java:289)\r\n    \tat org.apache.maven.cli.MavenCli.main(MavenCli.java:193)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\r\n    \tat org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\r\n    \tat org.codehaus.classworlds.Launcher.main(Launcher.java:47)\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  5.314 s\r\n    [INFO] Finished at: 2020-05-12T18:47:29+02:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.1:run (default-cli) on project computer: Error: Command execution failed. Process exited with an error: 1 (Exit value: 1) -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n","title":"Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.1:run (default-cli) after removing dependency","body":"<p>I have a JavaFX Maven project that suddenly threw an error after removing a dependency. The dependency was added only a couple minutes prior and is not and was not used or referenced by any code in the project. No other files than the <code>pom</code> file have been touched since adding the dependency. I did update/reimport the <code>pom</code> file.</p>\n\n<p>The code worked as expected before and while dependency was added, only stopped when removing the dependency.</p>\n\n<p><strong>The error is as follows:</strong></p>\n\n<pre><code>Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.1:run (default-cli) on project computer: Error: Command execution failed. Process exited with an error: 1 (Exit value: 1)\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n</code></pre>\n\n<p><strong>Here is my pom file with the dependency I removed:</strong></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;computer&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;14&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;14&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- This is the dependency I removed\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n            &lt;version&gt;4.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        --&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;org.computer.App&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p><strong>Edit:</strong>\nFor additional information:\nwhen reimporting the dependency, it is still not working.</p>\n\n<p><strong>Edit 2:</strong>\nI tried running from the command prompt instead. Now I get this error:</p>\n\n<pre><code>No compiler is provided in this environment. Perhaps you are running on a JRE rather than a JDK?\n</code></pre>\n\n<p>I have the java 13.0.2 jdk installed, and it worked properly before.</p>\n\n<p><strong>Edit 3:</strong></p>\n\n<p>I have now tried to reinstall Intellij, the java 13.0.2 JDK, Maven, and set up fresh environment variables. Nothing works. Even brand new JavaFX Maven projects won't work now.</p>\n\n<p><strong>This is the run configuration in IntelliJ:</strong></p>\n\n<pre><code>clean:clean javafx:compile javafx:run -f pom.xml -f pom.xml -f pom.xml\n</code></pre>\n\n<p><strong>Build Log when running in intelliJ:</strong></p>\n\n<pre><code>\"C:\\Program Files\\Java\\jdk-13.0.2\\bin\\java.exe\" -Dmaven.multiModuleProjectDirectory=C:\\Users\\mats\\Documents\\intellij-projects\\computer \"-Dmaven.home=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven3\" \"-Dclassworlds.conf=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven3\\bin\\m2.conf\" \"-Dmaven.ext.class.path=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven-event-listener.jar\" \"-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\lib\\idea_rt.jar=50370:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\bin\" -Dfile.encoding=UTF-8 -classpath \"C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds-2.6.0.jar;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2019.2\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds.license\" org.codehaus.classworlds.Launcher -Didea.version2020.1.1 clean:clean javafx:compile javafx:run -f pom.xml -f pom.xml\n[INFO] Scanning for projects...\n[INFO] \n[INFO] ------------------------&lt; org.example:computer &gt;------------------------\n[INFO] Building computer 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:2.5:clean (default-cli) @ computer ---\n[INFO] Deleting C:\\Users\\mats\\Documents\\intellij-projects\\computer\\target\n[INFO] \n[INFO] --- javafx-maven-plugin:0.0.1:compile (default-cli) @ computer ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 2 resources\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 14 source files to C:\\Users\\mats\\Documents\\intellij-projects\\computer\\target\\classes\n[INFO] /C:/Users/mats/Documents/intellij-projects/computer/src/main/java/org/computer/io/WriteToCSV.java: C:\\Users\\mats\\Documents\\intellij-projects\\computer\\src\\main\\java\\org\\computer\\io\\WriteToCSV.java uses unchecked or unsafe operations.\n[INFO] /C:/Users/mats/Documents/intellij-projects/computer/src/main/java/org/computer/io/WriteToCSV.java: Recompile with -Xlint:unchecked for details.\n[INFO] \n[INFO] --- javafx-maven-plugin:0.0.1:run (default-cli) @ computer ---\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\nUnrecognized option: --module-path\n[ERROR] Command execution failed.\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\n    at org.openjfx.JavaFXRunMojo.executeCommandLine (JavaFXRunMojo.java:525)\n    at org.openjfx.JavaFXRunMojo.executeCommandLine (JavaFXRunMojo.java:487)\n    at org.openjfx.JavaFXRunMojo.execute (JavaFXRunMojo.java:168)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:567)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n    at org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:404)\n    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:166)\n    at org.openjfx.JavaFXRunMojo.executeCommandLine(JavaFXRunMojo.java:525)\n    at org.openjfx.JavaFXRunMojo.executeCommandLine(JavaFXRunMojo.java:487)\n    at org.openjfx.JavaFXRunMojo.execute(JavaFXRunMojo.java:168)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main(MavenCli.java:193)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main(Launcher.java:47)\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  5.314 s\n[INFO] Finished at: 2020-05-12T18:47:29+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.openjfx:javafx-maven-plugin:0.0.1:run (default-cli) on project computer: Error: Command execution failed. Process exited with an error: 1 (Exit value: 1) -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n"},{"tags":["java","jsp","struts2","ognl","struts-tags"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1636724535,"post_id":69931725,"comment_id":123639581,"body_markdown":"Yes, it is possible. Accessing session variables is covered in the [Struts 2 Tags documentation tree](https://struts.apache.org/tag-developers/) in multiple places, but it might be best to take a quick step back and review the [OGNL overview](https://struts.apache.org/tag-developers/ognl).","body":"Yes, it is possible. Accessing session variables is covered in the <a href=\"https://struts.apache.org/tag-developers/\" rel=\"nofollow noreferrer\">Struts 2 Tags documentation tree</a> in multiple places, but it might be best to take a quick step back and review the <a href=\"https://struts.apache.org/tag-developers/ognl\" rel=\"nofollow noreferrer\">OGNL overview</a>."}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636725511,"creation_date":1636725511,"answer_id":69944065,"question_id":69931725,"body_markdown":"Struts2 tags cannot work without associated filer. If you use Struts tags in JSP make sure you read first about [tags][2].\r\n\r\nThe session map can be injected into the action if it is `SessionAware`.\r\n\r\n&gt;If you want to put some object like an `user` to the session you can use authentication interceptor like  [this][1]. \r\n&gt;\r\n&gt;It checks if an `user` in session and let the action invoke, otherwise it returns a `login` result. \r\n&gt;\r\n&gt;The user might want to login several times under different accounts, so you should not restrict him/her from doing it. \r\n\r\nIn the JSP you could check the `user` in session with the [`&lt;s:if&gt;` tag][3] using a `#session` context variable.\r\n\r\n&lt;!-- language: lang-xhtml --&gt;\r\n\r\n    &lt;s:if test=&quot;#session.user == null&quot;&gt;\r\n     &lt;s:a action=&quot;login&quot;&gt;Login&lt;/s:a&gt;\r\n    &lt;/s:if&gt;\r\n    &lt;s:else&gt;\r\n      &lt;s:a action=&quot;logout&quot;&gt;Logout&lt;/s:a&gt;\r\n    &lt;/s:else&gt;   \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/16256030/573032\r\n  [2]: https://struts.apache.org/tag-developers\r\n  [3]: https://struts.apache.org/tag-developers/if-tag.html","title":"Using &lt;s:if&gt; tag to check if the user is in session in Struts 2","body":"<p>Struts2 tags cannot work without associated filer. If you use Struts tags in JSP make sure you read first about <a href=\"https://struts.apache.org/tag-developers\" rel=\"nofollow noreferrer\">tags</a>.</p>\n<p>The session map can be injected into the action if it is <code>SessionAware</code>.</p>\n<blockquote>\n<p>If you want to put some object like an <code>user</code> to the session you can use authentication interceptor like  <a href=\"https://stackoverflow.com/a/16256030/573032\">this</a>.</p>\n<p>It checks if an <code>user</code> in session and let the action invoke, otherwise it returns a <code>login</code> result.</p>\n<p>The user might want to login several times under different accounts, so you should not restrict him/her from doing it.</p>\n</blockquote>\n<p>In the JSP you could check the <code>user</code> in session with the <a href=\"https://struts.apache.org/tag-developers/if-tag.html\" rel=\"nofollow noreferrer\"><code>&lt;s:if&gt;</code> tag</a> using a <code>#session</code> context variable.</p>\n<pre class=\"lang-xhtml prettyprint-override\"><code>&lt;s:if test=&quot;#session.user == null&quot;&gt;\n &lt;s:a action=&quot;login&quot;&gt;Login&lt;/s:a&gt;\n&lt;/s:if&gt;\n&lt;s:else&gt;\n  &lt;s:a action=&quot;logout&quot;&gt;Logout&lt;/s:a&gt;\n&lt;/s:else&gt;   \n</code></pre>\n"}],"owner":{"account_id":23270622,"reputation":3,"user_id":17355524,"display_name":"Jdvlp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":499,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700672596,"creation_date":1636648079,"question_id":69931725,"body_markdown":"I&#39;d like to know if it&#39;s possible to check with the `&lt;s:if&gt;` tag of Struts 2 if the user is in session.\r\n\r\nIf the user is in session, I need it to be shown `Logout` otherwise `Login`.\r\n\r\nI use the interface `SessionAware` for login action and this class `User`.\r\n\r\n\r\n    package it.pwm.wynd.pojo.user;\r\n    \r\n    \r\n    public class User implements java.io.Serializable {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \tprivate Integer idUser;\r\n    \tprivate String name;\r\n    \tprivate String username;\r\n    \tprivate String password;\r\n    \tprivate String email;\r\n    \r\n    \tpublic User() {\r\n    \t}\r\n    \r\n    \tpublic User(String name, String username, String password, String email) {\r\n    \t\tthis.name = name;\r\n    \t\tthis.username = username;\r\n    \t\tthis.password = password;\r\n    \t\tthis.email = email;\r\n    \t}\r\n    \r\n    \tpublic Integer getIdUser() {\r\n    \t\treturn this.idUser;\r\n    \t}\r\n    \r\n    \tpublic void setIdUser(Integer idUser) {\r\n    \t\tthis.idUser = idUser;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn this.name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic String getUsername() {\r\n    \t\treturn this.username;\r\n    \t}\r\n    \r\n    \tpublic void setUsername(String username) {\r\n    \t\tthis.username = username;\r\n    \t}\r\n    \r\n    \tpublic String getPassword() {\r\n    \t\treturn this.password;\r\n    \t}\r\n    \r\n    \tpublic void setPassword(String password) {\r\n    \t\tthis.password = password;\r\n    \t}\r\n    \r\n    \tpublic String getEmail() {\r\n    \t\treturn this.email;\r\n    \t}\r\n    \r\n    \tpublic void setEmail(String email) {\r\n    \t\tthis.email = email;\r\n    \t}\r\n    \r\n    \r\n    }\r\n\r\n","title":"Using &lt;s:if&gt; tag to check if the user is in session in Struts 2","body":"<p>I'd like to know if it's possible to check with the <code>&lt;s:if&gt;</code> tag of Struts 2 if the user is in session.</p>\n<p>If the user is in session, I need it to be shown <code>Logout</code> otherwise <code>Login</code>.</p>\n<p>I use the interface <code>SessionAware</code> for login action and this class <code>User</code>.</p>\n<pre><code>package it.pwm.wynd.pojo.user;\n\n\npublic class User implements java.io.Serializable {\n\n    private static final long serialVersionUID = 1L;\n    private Integer idUser;\n    private String name;\n    private String username;\n    private String password;\n    private String email;\n\n    public User() {\n    }\n\n    public User(String name, String username, String password, String email) {\n        this.name = name;\n        this.username = username;\n        this.password = password;\n        this.email = email;\n    }\n\n    public Integer getIdUser() {\n        return this.idUser;\n    }\n\n    public void setIdUser(Integer idUser) {\n        this.idUser = idUser;\n    }\n\n    public String getName() {\n        return this.name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getUsername() {\n        return this.username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPassword() {\n        return this.password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getEmail() {\n        return this.email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","checker-framework"],"answers":[{"tags":[],"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700672559,"creation_date":1700672559,"answer_id":77531868,"question_id":77525744,"body_markdown":"&gt; It is not my code hence I cannot add the @Nullable annotation to it\r\n\r\nYou can write annotations for third-party libraries in a [stub file](https://checkerframework.org/manual/#stub).  The [Checker Framework manual](https://checkerframework.org/manual/#annotating-libraries) says:\r\n\r\n&quot;Write annotations in a “stub file”, if you do not have access to the source code.&quot;\r\n\r\n&gt; Is there a way to apply the Nullness Checker only to my own package?\r\n\r\nYou can use the `-AskipUses` command-line argument.  The [Checker Framework manual](https://checkerframework.org/manual/#askipuses) says:\r\n\r\n&quot;Set the `-AskipUses` command-line option to a regular expression that matches fully-qualified class names (not file names) for which warnings and errors should be suppressed. Or, set the `-AonlyUses` command-line option to a regular expression that matches fully-qualified class names (not file names) for which warnings and errors should be emitted; warnings about uses of all other classes will be suppressed.&quot;\r\n\r\nThe Checker Framework also supports [`-AskipDefs` and `-AonlyDefs`](https://checkerframework.org/manual/#askipdefs).\r\n","title":"How to exclude 3rd party classes when using the NullnessChecker from the checker framework?","body":"<blockquote>\n<p>It is not my code hence I cannot add the @Nullable annotation to it</p>\n</blockquote>\n<p>You can write annotations for third-party libraries in a <a href=\"https://checkerframework.org/manual/#stub\" rel=\"nofollow noreferrer\">stub file</a>.  The <a href=\"https://checkerframework.org/manual/#annotating-libraries\" rel=\"nofollow noreferrer\">Checker Framework manual</a> says:</p>\n<p>&quot;Write annotations in a “stub file”, if you do not have access to the source code.&quot;</p>\n<blockquote>\n<p>Is there a way to apply the Nullness Checker only to my own package?</p>\n</blockquote>\n<p>You can use the <code>-AskipUses</code> command-line argument.  The <a href=\"https://checkerframework.org/manual/#askipuses\" rel=\"nofollow noreferrer\">Checker Framework manual</a> says:</p>\n<p>&quot;Set the <code>-AskipUses</code> command-line option to a regular expression that matches fully-qualified class names (not file names) for which warnings and errors should be suppressed. Or, set the <code>-AonlyUses</code> command-line option to a regular expression that matches fully-qualified class names (not file names) for which warnings and errors should be emitted; warnings about uses of all other classes will be suppressed.&quot;</p>\n<p>The Checker Framework also supports <a href=\"https://checkerframework.org/manual/#askipdefs\" rel=\"nofollow noreferrer\"><code>-AskipDefs</code> and <code>-AonlyDefs</code></a>.</p>\n"}],"owner":{"account_id":968335,"reputation":1099,"user_id":991368,"accept_rate":75,"display_name":"cp5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77531868,"answer_count":1,"score":1,"last_activity_date":1700672559,"creation_date":1700598417,"question_id":77525744,"body_markdown":"I am trying to use the `NullnessChecker` from the checker framework. I have a java project building it with gradle and kotlin.\r\n\r\nThe idea is to have as little boiler plate coding as I can therefore having everything by default as nonnull and then override where nulls are required (for parameters, return arguments and instance variables).\r\n\r\nI have the following config in my `build.gradle.kts` file:\r\n\r\n    import org.checkerframework.gradle.plugin.CheckerFrameworkExtension\r\n\r\n    plugins {\r\n        id(&quot;java&quot;)\r\n        id(&quot;org.checkerframework&quot;) version &quot;0.6.35&quot;\r\n    }\r\n    \r\n    configure&lt;CheckerFrameworkExtension&gt; {\r\n        excludeTests = false\r\n        checkers = listOf(&quot;org.checkerframework.checker.nullness.NullnessChecker&quot;)\r\n    }\r\n\r\nThis works well and if I pass a null as a parameter the build fails and where needed I can add the @Nullable annotation to skipp the check.\r\n\r\nI however have calls to 3rd party classes like:\r\n\r\n    // Where I pass a null argument as the 2nd parameter\r\n    javax.xml.transform.TransformerFactory.newInstance(&quot;...&quot;, null); \r\n\r\nIt is not my code hence I cannot add the @Nullable annotation to it and the checkerframework fails indicating that I cannot pass a null here.\r\n\r\nIs there a way to get around this or apply the`NullnessChecker` only to my own package? ","title":"How to exclude 3rd party classes when using the NullnessChecker from the checker framework?","body":"<p>I am trying to use the <code>NullnessChecker</code> from the checker framework. I have a java project building it with gradle and kotlin.</p>\n<p>The idea is to have as little boiler plate coding as I can therefore having everything by default as nonnull and then override where nulls are required (for parameters, return arguments and instance variables).</p>\n<p>I have the following config in my <code>build.gradle.kts</code> file:</p>\n<pre><code>import org.checkerframework.gradle.plugin.CheckerFrameworkExtension\n\nplugins {\n    id(&quot;java&quot;)\n    id(&quot;org.checkerframework&quot;) version &quot;0.6.35&quot;\n}\n\nconfigure&lt;CheckerFrameworkExtension&gt; {\n    excludeTests = false\n    checkers = listOf(&quot;org.checkerframework.checker.nullness.NullnessChecker&quot;)\n}\n</code></pre>\n<p>This works well and if I pass a null as a parameter the build fails and where needed I can add the @Nullable annotation to skipp the check.</p>\n<p>I however have calls to 3rd party classes like:</p>\n<pre><code>// Where I pass a null argument as the 2nd parameter\njavax.xml.transform.TransformerFactory.newInstance(&quot;...&quot;, null); \n</code></pre>\n<p>It is not my code hence I cannot add the @Nullable annotation to it and the checkerframework fails indicating that I cannot pass a null here.</p>\n<p>Is there a way to get around this or apply the<code>NullnessChecker</code> only to my own package?</p>\n"},{"tags":["java","spring","security","spring-security","struts2"],"answers":[{"tags":[],"owner":{"account_id":1732446,"reputation":10581,"user_id":1585767,"accept_rate":85,"display_name":"Andres"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495199393,"creation_date":1495199393,"answer_id":44071010,"question_id":44070914,"body_markdown":"You should configure both apps to use Single Sign On.\r\n\r\nHere&#39;s a tutorial for Websphere.\r\n\r\nhttp://www.redbooks.ibm.com/redpapers/pdfs/redp4192.pdf","title":"Secure method of passing sign-in information from a Struts Action to a different app","body":"<p>You should configure both apps to use Single Sign On.</p>\n\n<p>Here's a tutorial for Websphere.</p>\n\n<p><a href=\"http://www.redbooks.ibm.com/redpapers/pdfs/redp4192.pdf\" rel=\"nofollow noreferrer\">http://www.redbooks.ibm.com/redpapers/pdfs/redp4192.pdf</a></p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495263352,"creation_date":1495263352,"answer_id":44082891,"question_id":44070914,"body_markdown":"If you pass sign in information via https it&#39;s secure way. Don&#39;t pass it in url however. Use http post method to submit this information to the application. But because you use a web service to register/authenticate a user then you need invoke this web service from you application using http client, etc. If you invoke the service from the client you application never know if the user is registered/authenticated.\r\n\r\nRecommended to use some security framework i.e. Spring Security which allows to use different methods for authentication/registration/authorization. It requires integration struts2 with spring via [spring plugin][1].\r\n\r\nFor the rest see [How to integrate Spring Security and Struts2][2]. Or read the book [Spring Security 3.x Cookbook by Anjana Mankale][3].\r\n\r\n\r\n  [1]: https://struts.apache.org/docs/spring-plugin.html\r\n  [2]: https://stackoverflow.com/q/14333999/573032\r\n  [3]: https://www.packtpub.com/mapt/book/application_development/9781782167525/2/ch02lvl1sec19/Integrating+Struts+2+with+Spring+Security","title":"Secure method of passing sign-in information from a Struts Action to a different app","body":"<p>If you pass sign in information via https it's secure way. Don't pass it in url however. Use http post method to submit this information to the application. But because you use a web service to register/authenticate a user then you need invoke this web service from you application using http client, etc. If you invoke the service from the client you application never know if the user is registered/authenticated.</p>\n\n<p>Recommended to use some security framework i.e. Spring Security which allows to use different methods for authentication/registration/authorization. It requires integration struts2 with spring via <a href=\"https://struts.apache.org/docs/spring-plugin.html\" rel=\"nofollow noreferrer\">spring plugin</a>.</p>\n\n<p>For the rest see <a href=\"https://stackoverflow.com/q/14333999/573032\">How to integrate Spring Security and Struts2</a>. Or read the book <a href=\"https://www.packtpub.com/mapt/book/application_development/9781782167525/2/ch02lvl1sec19/Integrating+Struts+2+with+Spring+Security\" rel=\"nofollow noreferrer\">Spring Security 3.x Cookbook by Anjana Mankale</a>.</p>\n"}],"owner":{"account_id":4579313,"reputation":913,"user_id":3716870,"accept_rate":67,"display_name":"ponder275"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700672551,"creation_date":1495199105,"question_id":44070914,"body_markdown":"I&#39;ve an app which allows users to sign in and then passes their sign in information to the app of their choice.  All the apps are written in Java and use Struts 2 and run on Websphere. What is the most secure way to pass in the sign in information?  I can pass it in the URL using HTTPS but that still leaves the information available in the browser history.   \r\n\r\n**EDIT:**\r\n\r\nThe sign-in app actually calls a web service which registers the user which collects their personal information, verifies their identity and passes the information back to the sign-in app.  The web service stores all of the registration information.  I would like to pass all of the registration information to the app so the user does not have to reenter it and to insure the information stored by the web service is identical to the information stored in the app.","title":"Secure method of passing sign-in information from a Struts Action to a different app","body":"<p>I've an app which allows users to sign in and then passes their sign in information to the app of their choice.  All the apps are written in Java and use Struts 2 and run on Websphere. What is the most secure way to pass in the sign in information?  I can pass it in the URL using HTTPS but that still leaves the information available in the browser history.</p>\n<p><strong>EDIT:</strong></p>\n<p>The sign-in app actually calls a web service which registers the user which collects their personal information, verifies their identity and passes the information back to the sign-in app.  The web service stores all of the registration information.  I would like to pass all of the registration information to the app so the user does not have to reenter it and to insure the information stored by the web service is identical to the information stored in the app.</p>\n"},{"tags":["java","authentication","session","struts2","httpsession"],"comments":[{"owner":{"account_id":2436173,"reputation":5566,"user_id":2126023,"accept_rate":85,"display_name":"Saif Asif"},"score":0,"creation_date":1387267128,"post_id":20628621,"comment_id":30875449,"body_markdown":"How exactly are you maintaining sessions ?","body":"How exactly are you maintaining sessions ?"}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616274758,"creation_date":1387270321,"answer_id":20629671,"question_id":20628621,"body_markdown":"The session is already managed in Struts2. \r\n\r\nIf you want to put some object like an user to the session you can use authentication interceptor like  [this][1]. \r\n\r\nIt checks if an user in session and let the action invoke, otherwise it returns a `login` result. \r\n\r\nThe user might want to login several times under different accounts, so you should not restrict him/her from doing it. \r\n\r\nIn the JSP you could check the user in session with the `if` tag using a `#session` context variable.\r\n\r\n    &lt;s:if test=&quot;#session.user == null&quot;&gt;\r\n     &lt;s:a action=&quot;login&quot;&gt;&lt;s:text name=&quot;label.enter&quot;/&gt;&lt;/s:a&gt;\r\n    &lt;/s:if&gt;\r\n    &lt;s:else&gt;\r\n      &lt;s:a action=&quot;logout&quot;&gt;&lt;s:text name=&quot;label.exit&quot;/&gt;&lt;/s:a&gt;\r\n    &lt;/s:else&gt;   \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/16256030/573032","title":"How to check if user is logged in with Struts 2","body":"<p>The session is already managed in Struts2.</p>\n<p>If you want to put some object like an user to the session you can use authentication interceptor like  <a href=\"https://stackoverflow.com/a/16256030/573032\">this</a>.</p>\n<p>It checks if an user in session and let the action invoke, otherwise it returns a <code>login</code> result.</p>\n<p>The user might want to login several times under different accounts, so you should not restrict him/her from doing it.</p>\n<p>In the JSP you could check the user in session with the <code>if</code> tag using a <code>#session</code> context variable.</p>\n<pre><code>&lt;s:if test=&quot;#session.user == null&quot;&gt;\n &lt;s:a action=&quot;login&quot;&gt;&lt;s:text name=&quot;label.enter&quot;/&gt;&lt;/s:a&gt;\n&lt;/s:if&gt;\n&lt;s:else&gt;\n  &lt;s:a action=&quot;logout&quot;&gt;&lt;s:text name=&quot;label.exit&quot;/&gt;&lt;/s:a&gt;\n&lt;/s:else&gt;   \n</code></pre>\n"}],"owner":{"account_id":3740269,"reputation":187,"user_id":3110178,"accept_rate":0,"display_name":"Praful Jha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700672513,"creation_date":1387266307,"question_id":20628621,"body_markdown":"I&#39;m not able to manage a session with Struts2 . \r\n\r\nIf I login successfully and if I click the URL of login again, it again asks for login. \r\n\r\nI want it to be *logged in* untill timeout doesn&#39;t happens.","title":"How to check if user is logged in with Struts 2","body":"<p>I'm not able to manage a session with Struts2 .</p>\n<p>If I login successfully and if I click the URL of login again, it again asks for login.</p>\n<p>I want it to be <em>logged in</em> untill timeout doesn't happens.</p>\n"},{"tags":["java","spring-boot","keycloak"],"answers":[{"tags":[],"owner":{"account_id":14829651,"reputation":115,"user_id":10709485,"display_name":"wazowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700672421,"creation_date":1700672421,"answer_id":77531852,"question_id":77504428,"body_markdown":"The problem was that in createRealm(...) the users are saved differently (Keycloak&#39;s admin API). However, my main issue was that the client has a `clientId` property as well as an `id` property. The Keycloak UI shows that the clientId is whatever you set it to be, for example `whatever-app` and the `id` was a random UUID generated by keycloak.\r\n\r\nThe fix to the problem : \r\n\r\n        ClientRepresentation clientRepresentation = new ClientRepresentation();\r\n        // Note : Keycloak clients have both a clientId and an id property. In this service clientId = id.\r\n        // The clientId is a given property from application.yml while id is a UUID generated by Keycloak\r\n        // In some API calls to Keycloak, it used the ID instead of the clientID i.e: realmResource.clients().get(ID)\r\n        // Hence it is crucial to set both to the same value (CLIENT_ID) to avoid complexity\r\n        clientRepresentation.setId(CLIENT_ID);\r\n        clientRepresentation.setClientId(CLIENT_ID);\r\n\r\nMake sure to `clientRepresentation.setId(CLIENT_ID);` or in your case to use the id instead of clientId for operations like \r\n\r\n    RoleRepresentation clientRole = realmResource.clients().get(CLIENT_ID).roles().get(role).toRepresentation();","title":"Keycloak not adding client role on user creation","body":"<p>The problem was that in createRealm(...) the users are saved differently (Keycloak's admin API). However, my main issue was that the client has a <code>clientId</code> property as well as an <code>id</code> property. The Keycloak UI shows that the clientId is whatever you set it to be, for example <code>whatever-app</code> and the <code>id</code> was a random UUID generated by keycloak.</p>\n<p>The fix to the problem :</p>\n<pre><code>    ClientRepresentation clientRepresentation = new ClientRepresentation();\n    // Note : Keycloak clients have both a clientId and an id property. In this service clientId = id.\n    // The clientId is a given property from application.yml while id is a UUID generated by Keycloak\n    // In some API calls to Keycloak, it used the ID instead of the clientID i.e: realmResource.clients().get(ID)\n    // Hence it is crucial to set both to the same value (CLIENT_ID) to avoid complexity\n    clientRepresentation.setId(CLIENT_ID);\n    clientRepresentation.setClientId(CLIENT_ID);\n</code></pre>\n<p>Make sure to <code>clientRepresentation.setId(CLIENT_ID);</code> or in your case to use the id instead of clientId for operations like</p>\n<pre><code>RoleRepresentation clientRole = realmResource.clients().get(CLIENT_ID).roles().get(role).toRepresentation();\n</code></pre>\n"}],"owner":{"account_id":14829651,"reputation":115,"user_id":10709485,"display_name":"wazowski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77531852,"answer_count":1,"score":0,"last_activity_date":1700672421,"creation_date":1700252368,"question_id":77504428,"body_markdown":"Versions : Keycloak 22.04, Spring-Boot 3 + Spring Security\r\n\r\nI have a spring-boot service connected to an existing mongodb with a users collection. I made a KeycloakInitializerRunner that initializes keycloak with the current users in the mongodb collection. So far everything works great. I have mapped users to their client roles and groups (which I call affiliation). In the Keycloak UI I see everything setup perfectly.\r\n\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    @Component\r\n    public class KeycloakInitializerRunner implements CommandLineRunner {\r\n\r\n    private final KeycloakService keycloakService;\r\n\r\n    @Override\r\n    public void run(String... args) {\r\n        log.info(&quot;Initializing &#39;{}&#39; realm in Keycloak ...&quot;, keycloakService.getRealmName());\r\n\r\n        keycloakService.initializeKeycloak();\r\n\r\n        log.info(&quot;&#39;{}&#39; initialization completed successfully!&quot;, keycloakService.getRealmName());\r\n        }\r\n    }\r\n\r\nIn my KeycloakService, I have logic that reads a user from the userRepository and maps it to create a UserRepresentation. The same logic that the KeycloakInitializerRunner uses is shared with a UserController where I am trying to /user/createUser. When I send a request to create a new user with exactly the same logic, this time, everything works well except it does not add the appropriate client roles I have defined in the request.\r\n\r\nI will put relevant code from my KeycloakService here:\r\n\r\n    public void initializeKeycloak() {\r\n        // Initialization logic\r\n        Optional&lt;RealmRepresentation&gt; representationOptional = keycloakAdmin.realms()\r\n                .findAll()\r\n                .stream()\r\n                .filter(r -&gt; r.getRealm().equals(REALM_NAME))\r\n                .findAny();\r\n\r\n        if (representationOptional.isPresent()) {\r\n            log.info(&quot;Removing already pre-configured &#39;{}&#39; realm&quot;, REALM_NAME);\r\n            keycloakAdmin.realm(REALM_NAME).remove();\r\n        }\r\n\r\n        RealmRepresentation realmRepresentation = createRealmRepresentation();\r\n\r\n        Set&lt;String&gt; affiliations = userRepository.findAllAsStream()\r\n                .map(User::getAffiliation)\r\n                .filter(affiliation -&gt; affiliation != null &amp;&amp; affiliation.getName() != null)\r\n                .map(CcgAffiliation::getName)\r\n                .collect(Collectors.toSet());\r\n\r\n        List&lt;GroupRepresentation&gt; groupRepresentations = createGroupRepresentations(affiliations);\r\n\r\n        List&lt;UserRepresentation&gt; userRepresentations = createUserRepresentations(groupRepresentations);\r\n\r\n        createRealm(realmRepresentation, groupRepresentations, userRepresentations);\r\n\r\n        testKeycloakIntegration();\r\n    }\r\n\r\n    private List&lt;UserRepresentation&gt; createUserRepresentations(List&lt;GroupRepresentation&gt; groupRepresentations) {\r\n        return userRepository.findAllAsStream()\r\n                .map(user -&gt; {\r\n                    UserRepresentation userRepresentation = createUserRepresentation(user);\r\n\r\n                    addUserToGroups(user, userRepresentation, groupRepresentations);\r\n\r\n                    return userRepresentation;\r\n                })\r\n                .toList();\r\n    }\r\n    \r\n    private UserRepresentation createUserRepresentation(User user) {\r\n        CredentialRepresentation credentialRepresentation = new CredentialRepresentation();\r\n        credentialRepresentation.setType(CredentialRepresentation.PASSWORD);\r\n        credentialRepresentation.setValue(&quot;admin&quot;);\r\n\r\n        UserRepresentation userRepresentation = new UserRepresentation();\r\n        userRepresentation.setUsername(user.getUsername());\r\n        userRepresentation.setEmail(user.getEmail());\r\n        userRepresentation.setLastName(user.getLastName());\r\n        userRepresentation.setFirstName(user.getFirstName());\r\n        userRepresentation.setEnabled(true);\r\n        userRepresentation.setCredentials(List.of(credentialRepresentation));\r\n        userRepresentation.setClientRoles(getClientRoles(CLIENT_ID, user)); // FIXME: WHY DOES NOT WORK ON /USER/CREATEUSER ???\r\n        userRepresentation.setEmailVerified(true);\r\n        userRepresentation.setCreatedTimestamp(Instant.now().toEpochMilli());\r\n\r\n        return userRepresentation;\r\n    }\r\n\r\nUserController\r\n\r\n    @PostMapping(value = &quot;/user/registerUser&quot;, consumes = &quot;multipart/form-data&quot;, produces = &quot;application/json&quot;)\r\n    public ResponseEntity&lt;Void&gt; registerUser(\r\n            @RequestParam(&quot;user&quot;) String userTemp,\r\n            @RequestParam(value = &quot;file&quot;, required = false) MultipartFile file\r\n            ) {\r\n        try {\r\n            User user = StaticObjectMapper.toObject(userTemp, User.class);\r\n            \r\n            // deleted irrelevant code\r\n\r\n            userRepository.save(user);\r\n\r\n            // Create user in Keycloak\r\n            keycloakService.createKeycloakUser(user);\r\n\r\n            return ResponseEntity.ok().build();\r\n        } catch (Exception e) {\r\n            LOGGER.error(e.getMessage());\r\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).build();\r\n        }\r\n    }\r\n\r\nI know best practice is to have a single entity managing my users, but this is a proof of concept that is almost working for my use case. The issue here is Keycloak not acting the same when createKeycloakUser is called. Any help is welcome.\r\n","title":"Keycloak not adding client role on user creation","body":"<p>Versions : Keycloak 22.04, Spring-Boot 3 + Spring Security</p>\n<p>I have a spring-boot service connected to an existing mongodb with a users collection. I made a KeycloakInitializerRunner that initializes keycloak with the current users in the mongodb collection. So far everything works great. I have mapped users to their client roles and groups (which I call affiliation). In the Keycloak UI I see everything setup perfectly.</p>\n<pre><code>@Slf4j\n@RequiredArgsConstructor\n@Component\npublic class KeycloakInitializerRunner implements CommandLineRunner {\n\nprivate final KeycloakService keycloakService;\n\n@Override\npublic void run(String... args) {\n    log.info(&quot;Initializing '{}' realm in Keycloak ...&quot;, keycloakService.getRealmName());\n\n    keycloakService.initializeKeycloak();\n\n    log.info(&quot;'{}' initialization completed successfully!&quot;, keycloakService.getRealmName());\n    }\n}\n</code></pre>\n<p>In my KeycloakService, I have logic that reads a user from the userRepository and maps it to create a UserRepresentation. The same logic that the KeycloakInitializerRunner uses is shared with a UserController where I am trying to /user/createUser. When I send a request to create a new user with exactly the same logic, this time, everything works well except it does not add the appropriate client roles I have defined in the request.</p>\n<p>I will put relevant code from my KeycloakService here:</p>\n<pre><code>public void initializeKeycloak() {\n    // Initialization logic\n    Optional&lt;RealmRepresentation&gt; representationOptional = keycloakAdmin.realms()\n            .findAll()\n            .stream()\n            .filter(r -&gt; r.getRealm().equals(REALM_NAME))\n            .findAny();\n\n    if (representationOptional.isPresent()) {\n        log.info(&quot;Removing already pre-configured '{}' realm&quot;, REALM_NAME);\n        keycloakAdmin.realm(REALM_NAME).remove();\n    }\n\n    RealmRepresentation realmRepresentation = createRealmRepresentation();\n\n    Set&lt;String&gt; affiliations = userRepository.findAllAsStream()\n            .map(User::getAffiliation)\n            .filter(affiliation -&gt; affiliation != null &amp;&amp; affiliation.getName() != null)\n            .map(CcgAffiliation::getName)\n            .collect(Collectors.toSet());\n\n    List&lt;GroupRepresentation&gt; groupRepresentations = createGroupRepresentations(affiliations);\n\n    List&lt;UserRepresentation&gt; userRepresentations = createUserRepresentations(groupRepresentations);\n\n    createRealm(realmRepresentation, groupRepresentations, userRepresentations);\n\n    testKeycloakIntegration();\n}\n\nprivate List&lt;UserRepresentation&gt; createUserRepresentations(List&lt;GroupRepresentation&gt; groupRepresentations) {\n    return userRepository.findAllAsStream()\n            .map(user -&gt; {\n                UserRepresentation userRepresentation = createUserRepresentation(user);\n\n                addUserToGroups(user, userRepresentation, groupRepresentations);\n\n                return userRepresentation;\n            })\n            .toList();\n}\n\nprivate UserRepresentation createUserRepresentation(User user) {\n    CredentialRepresentation credentialRepresentation = new CredentialRepresentation();\n    credentialRepresentation.setType(CredentialRepresentation.PASSWORD);\n    credentialRepresentation.setValue(&quot;admin&quot;);\n\n    UserRepresentation userRepresentation = new UserRepresentation();\n    userRepresentation.setUsername(user.getUsername());\n    userRepresentation.setEmail(user.getEmail());\n    userRepresentation.setLastName(user.getLastName());\n    userRepresentation.setFirstName(user.getFirstName());\n    userRepresentation.setEnabled(true);\n    userRepresentation.setCredentials(List.of(credentialRepresentation));\n    userRepresentation.setClientRoles(getClientRoles(CLIENT_ID, user)); // FIXME: WHY DOES NOT WORK ON /USER/CREATEUSER ???\n    userRepresentation.setEmailVerified(true);\n    userRepresentation.setCreatedTimestamp(Instant.now().toEpochMilli());\n\n    return userRepresentation;\n}\n</code></pre>\n<p>UserController</p>\n<pre><code>@PostMapping(value = &quot;/user/registerUser&quot;, consumes = &quot;multipart/form-data&quot;, produces = &quot;application/json&quot;)\npublic ResponseEntity&lt;Void&gt; registerUser(\n        @RequestParam(&quot;user&quot;) String userTemp,\n        @RequestParam(value = &quot;file&quot;, required = false) MultipartFile file\n        ) {\n    try {\n        User user = StaticObjectMapper.toObject(userTemp, User.class);\n        \n        // deleted irrelevant code\n\n        userRepository.save(user);\n\n        // Create user in Keycloak\n        keycloakService.createKeycloakUser(user);\n\n        return ResponseEntity.ok().build();\n    } catch (Exception e) {\n        LOGGER.error(e.getMessage());\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).build();\n    }\n}\n</code></pre>\n<p>I know best practice is to have a single entity managing my users, but this is a proof of concept that is almost working for my use case. The issue here is Keycloak not acting the same when createKeycloakUser is called. Any help is welcome.</p>\n"},{"tags":["java","jsp","validation","struts2","struts"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":1,"creation_date":1359142600,"post_id":14529016,"comment_id":20259974,"body_markdown":"Are you using Struts 1 or 2?","body":"Are you using Struts 1 or 2?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1359146980,"post_id":14529016,"comment_id":20261879,"body_markdown":"Also see [How to post error messages to the HTML from Struts2 outside of Action class](http://stackoverflow.com/questions/13554962/how-to-post-error-messages-to-the-html-from-struts2-outside-of-action-class)","body":"Also see <a href=\"http://stackoverflow.com/questions/13554962/how-to-post-error-messages-to-the-html-from-struts2-outside-of-action-class\">How to post error messages to the HTML from Struts2 outside of Action class</a>"}],"answers":[{"tags":[],"owner":{"account_id":238645,"reputation":7389,"user_id":507675,"accept_rate":74,"display_name":"chad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359146645,"creation_date":1359146645,"answer_id":14530073,"question_id":14529016,"body_markdown":"I would say you definitely don&#39;t want the login logic in the validate method; that&#39;s for validating data. \r\n\r\nI would suggest that if your login fails, just expose a data property on the action like:\r\n\r\n    execute () {\r\n    \r\n       boolean authenticated = login( getUsername(), getPassword() );\r\n       setLoginValid( authenticated );\r\n       \r\n       if ( authenticated ) \r\n          result = SUCCESS;\r\n       else \r\n          result = FAILURE;\r\n    \r\n       return result;\r\n    \r\n    }\r\n\r\nAnd then in your login.jsp, simply wrap a message about bad credentials in the struts if tag, with a test on the loginValid property.\r\n","title":"How to know from which class a request has been received","body":"<p>I would say you definitely don't want the login logic in the validate method; that's for validating data. </p>\n\n<p>I would suggest that if your login fails, just expose a data property on the action like:</p>\n\n<pre><code>execute () {\n\n   boolean authenticated = login( getUsername(), getPassword() );\n   setLoginValid( authenticated );\n\n   if ( authenticated ) \n      result = SUCCESS;\n   else \n      result = FAILURE;\n\n   return result;\n\n}\n</code></pre>\n\n<p>And then in your login.jsp, simply wrap a message about bad credentials in the struts if tag, with a test on the loginValid property.</p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622284785,"creation_date":1359149851,"answer_id":14530788,"question_id":14529016,"body_markdown":"The purpose of the validation framework is to check field values to be valid to prevent unexpected errors while executing the action. \r\n\r\nIt is a good practice to separate the validation logic from the business logic. Authentication has nothing to do with validation logic. It is a separate process provided by security mechanisms. Of course you can create the action or interceptor that performs authentication, and as with any action you can configure it for validation.\r\n\r\nIn Struts2 it&#39;s even more simplified by applying a [`validation` interceptor][1] is a part of the job for processing request. In more sophisticated scenarios authentication becomes a part of the business logic, but the method to validate the input fields renames the same. If your action is only do is authenticating then you may not require the validation to process authentication. \r\n\r\nTo your second question: all you need is to `addActionError(getText(&quot;error.key&quot;))` to invalidate the action. Then return to the result where `&lt;s:actionerror&gt;` to display the message.   \r\n\r\nWhat is more important the validation logic remains the same if you decide to move it to the action. In this case the only thing you have to do is to remove the validation stack. The only reason of such *validation* is to return the result that is different than `&quot;input&quot;`.\r\n\r\n  [1]: https://struts.apache.org/core-developers/validation-interceptor.html\r\n","title":"How to know from which class a request has been received","body":"<p>The purpose of the validation framework is to check field values to be valid to prevent unexpected errors while executing the action.</p>\n<p>It is a good practice to separate the validation logic from the business logic. Authentication has nothing to do with validation logic. It is a separate process provided by security mechanisms. Of course you can create the action or interceptor that performs authentication, and as with any action you can configure it for validation.</p>\n<p>In Struts2 it's even more simplified by applying a <a href=\"https://struts.apache.org/core-developers/validation-interceptor.html\" rel=\"nofollow noreferrer\"><code>validation</code> interceptor</a> is a part of the job for processing request. In more sophisticated scenarios authentication becomes a part of the business logic, but the method to validate the input fields renames the same. If your action is only do is authenticating then you may not require the validation to process authentication.</p>\n<p>To your second question: all you need is to <code>addActionError(getText(&quot;error.key&quot;))</code> to invalidate the action. Then return to the result where <code>&lt;s:actionerror&gt;</code> to display the message.</p>\n<p>What is more important the validation logic remains the same if you decide to move it to the action. In this case the only thing you have to do is to remove the validation stack. The only reason of such <em>validation</em> is to return the result that is different than <code>&quot;input&quot;</code>.</p>\n"},{"tags":[],"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1359172215,"creation_date":1359153354,"answer_id":14531438,"question_id":14529016,"body_markdown":"Authentication belongs in the action, not in validation, IMO.\r\n\r\nI *might* consider using XML or annotation validations for the fields themselves and put the login attempt in `validate()`, but the code is small, and I&#39;d be pretty comfortable with it either way.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public String execute() {\r\n        if (userService.loginValid(username, password) {\r\n            return SUCCESS;\r\n        }\r\n\r\n        addActionError(getText(&quot;login.failure&quot;));\r\n        return FAILURE;\r\n    }\r\n\r\nI would use the framework&#39;s support for action-level error messages rather than using a flag (and I wouldn&#39;t *duplicate* that flag with a local if I did), and I strongly recommend using something you can inject to do the actual logging in to make testing easier.\r\n\r\nUsing the `validate()` approach makes things pretty tight:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public void validate() {\r\n        if (!userService.loginValid(username, password)) {\r\n            addActionError(getText(&quot;login.failure&quot;));\r\n        }\r\n    }\r\n\r\nAssuming you define reasonable &quot;input&quot; and &quot;success&quot; results that might be all you need. If developers looking at the code are familiar with the framework the `validate()` version is relatively clear.\r\n\r\nIf you&#39;re not interested in using XML or annotation validations, you can do that manually as well. That *definitely* belongs in `validate()`, and for common utility methods like this, static imports make the code still relatively concise:\r\n\r\n    public void validate() {\r\n        boolean tryLogin = true;\r\n\r\n        if (isBlank(username)) {\r\n            addFieldError(&quot;username&quot;, getText(&quot;login.username.required&quot;));\r\n            tryLogin = false;\r\n        }\r\n\r\n        if (isBlank(password)) {\r\n            addFieldError(&quot;password&quot;, getText(&quot;login.password.required&quot;));\r\n            tryLogin = false;\r\n        }\r\n\r\n        if (tryLogin &amp;&amp; !userService.loginValid(username, password)) {\r\n            addActionError(getText(&quot;login.failure&quot;));\r\n        }\r\n    }\r\n\r\n(I added the `tryLogin` flag to avoid seeing the error message for a login that will obviously fail, although this could be handled in other ways as well. Post-login processing elided.)","title":"How to know from which class a request has been received","body":"<p>Authentication belongs in the action, not in validation, IMO.</p>\n\n<p>I <em>might</em> consider using XML or annotation validations for the fields themselves and put the login attempt in <code>validate()</code>, but the code is small, and I'd be pretty comfortable with it either way.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public String execute() {\n    if (userService.loginValid(username, password) {\n        return SUCCESS;\n    }\n\n    addActionError(getText(\"login.failure\"));\n    return FAILURE;\n}\n</code></pre>\n\n<p>I would use the framework's support for action-level error messages rather than using a flag (and I wouldn't <em>duplicate</em> that flag with a local if I did), and I strongly recommend using something you can inject to do the actual logging in to make testing easier.</p>\n\n<p>Using the <code>validate()</code> approach makes things pretty tight:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public void validate() {\n    if (!userService.loginValid(username, password)) {\n        addActionError(getText(\"login.failure\"));\n    }\n}\n</code></pre>\n\n<p>Assuming you define reasonable \"input\" and \"success\" results that might be all you need. If developers looking at the code are familiar with the framework the <code>validate()</code> version is relatively clear.</p>\n\n<p>If you're not interested in using XML or annotation validations, you can do that manually as well. That <em>definitely</em> belongs in <code>validate()</code>, and for common utility methods like this, static imports make the code still relatively concise:</p>\n\n<pre><code>public void validate() {\n    boolean tryLogin = true;\n\n    if (isBlank(username)) {\n        addFieldError(\"username\", getText(\"login.username.required\"));\n        tryLogin = false;\n    }\n\n    if (isBlank(password)) {\n        addFieldError(\"password\", getText(\"login.password.required\"));\n        tryLogin = false;\n    }\n\n    if (tryLogin &amp;&amp; !userService.loginValid(username, password)) {\n        addActionError(getText(\"login.failure\"));\n    }\n}\n</code></pre>\n\n<p>(I added the <code>tryLogin</code> flag to avoid seeing the error message for a login that will obviously fail, although this could be handled in other ways as well. Post-login processing elided.)</p>\n"}],"owner":{"account_id":948533,"reputation":2812,"user_id":975234,"accept_rate":75,"display_name":"Rebooting"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":14531438,"answer_count":3,"score":0,"last_activity_date":1700672366,"creation_date":1359142160,"question_id":14529016,"body_markdown":"I have a `login.jsp` page in my application. I&#39;m using Struts 2 and a simple `validate()` method to validate my form. I have two questions:\r\n\r\n1. `validate()` method in my form bean class validates the form. I.e checks for empty fields etc. If I need to check my username and password combination should I do this inside `validate()` or in my action class? \r\n\r\n2. If I am doing the same in my `Action` class, correct combination leads to success page. I want the incorrect combination to lead to my JSP page along with the error message: &quot;Incorrect combination&quot;. How can I check in my JSP page that the request has come from action class so that it can print the error message &quot;Incorrect combination&quot;?","title":"How to know from which class a request has been received","body":"<p>I have a <code>login.jsp</code> page in my application. I'm using Struts 2 and a simple <code>validate()</code> method to validate my form. I have two questions:</p>\n<ol>\n<li><p><code>validate()</code> method in my form bean class validates the form. I.e checks for empty fields etc. If I need to check my username and password combination should I do this inside <code>validate()</code> or in my action class?</p>\n</li>\n<li><p>If I am doing the same in my <code>Action</code> class, correct combination leads to success page. I want the incorrect combination to lead to my JSP page along with the error message: &quot;Incorrect combination&quot;. How can I check in my JSP page that the request has come from action class so that it can print the error message &quot;Incorrect combination&quot;?</p>\n</li>\n</ol>\n"},{"tags":["java","maven","jaxb"],"comments":[{"owner":{"account_id":29874264,"reputation":463,"user_id":22894892,"display_name":"Laurent Schoelens"},"score":0,"creation_date":1700670720,"post_id":77530239,"comment_id":136683901,"body_markdown":"Hello there, I&#39;m looking at your problem. If there&#39;s an issue, I&#39;ll log it in github and provide a PR to fix it if possible to fix it. We are planning a 4.0.1 release soon","body":"Hello there, I&#39;m looking at your problem. If there&#39;s an issue, I&#39;ll log it in github and provide a PR to fix it if possible to fix it. We are planning a 4.0.1 release soon"}],"answers":[{"tags":[],"owner":{"account_id":1010706,"reputation":1264,"user_id":1023341,"display_name":"gkephorus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700658758,"creation_date":1700658758,"answer_id":77530240,"question_id":77530239,"body_markdown":"This is due to the fact that the plugin only honors the first ```namespace:prefix``` from the bindings.\r\n\r\nIn my particular case I could get by by finding all the targetNamespaces of each schema file and only mentioning this in the bindings like this:\r\n\r\n    &lt;!-- OrderService --&gt;\r\n    &lt;bindings schemaLocation=&quot;OrderService-v1.1.xsd&quot;&gt;\r\n        &lt;bindings&gt;\r\n            &lt;namespace:prefix name=&quot;&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_2&quot; /&gt;\r\n        &lt;/bindings&gt;\r\n    &lt;/bindings&gt;\r\n    &lt;!-- Partner --&gt;\r\n    &lt;bindings schemaLocation=&quot;Partner-v1.0.xsd&quot;&gt;\r\n        &lt;bindings&gt;\r\n            &lt;namespace:prefix name=&quot;v1p0&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_0&quot; /&gt;\r\n        &lt;/bindings&gt;\r\n    &lt;/bindings&gt;\r\n\r\nand so on.\r\n\r\nConsequence is also that the attribute namespaceURI is totally useless in the bindings-file.\r\n\r\nAll demonstrated in ```master```-branch of github repo [proof-jaxb-namespace-prefix-plugin][1]\r\n\r\n\r\n  [1]: https://github.com/gkfirst8/proof-jaxb-namespace-prefix-plugin","title":"Why can&#39;t I use multiple namespace:prefix for one package-info.java via urn:jaxb.jvnet.org:plugin:namespace-prefix Maven plugin","body":"<p>This is due to the fact that the plugin only honors the first <code>namespace:prefix</code> from the bindings.</p>\n<p>In my particular case I could get by by finding all the targetNamespaces of each schema file and only mentioning this in the bindings like this:</p>\n<pre><code>&lt;!-- OrderService --&gt;\n&lt;bindings schemaLocation=&quot;OrderService-v1.1.xsd&quot;&gt;\n    &lt;bindings&gt;\n        &lt;namespace:prefix name=&quot;&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_2&quot; /&gt;\n    &lt;/bindings&gt;\n&lt;/bindings&gt;\n&lt;!-- Partner --&gt;\n&lt;bindings schemaLocation=&quot;Partner-v1.0.xsd&quot;&gt;\n    &lt;bindings&gt;\n        &lt;namespace:prefix name=&quot;v1p0&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_0&quot; /&gt;\n    &lt;/bindings&gt;\n&lt;/bindings&gt;\n</code></pre>\n<p>and so on.</p>\n<p>Consequence is also that the attribute namespaceURI is totally useless in the bindings-file.</p>\n<p>All demonstrated in <code>master</code>-branch of github repo <a href=\"https://github.com/gkfirst8/proof-jaxb-namespace-prefix-plugin\" rel=\"nofollow noreferrer\">proof-jaxb-namespace-prefix-plugin</a></p>\n"},{"tags":[],"owner":{"account_id":29874264,"reputation":463,"user_id":22894892,"display_name":"Laurent Schoelens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700672310,"creation_date":1700672310,"answer_id":77531841,"question_id":77530239,"body_markdown":"By quickly modifying the plugin behaviour, I get this generated :\r\n\r\n```java\r\n@jakarta.xml.bind.annotation.XmlSchema(namespace = &quot;http://types.theberlinbakery.com/v1_1&quot;, elementFormDefault = jakarta.xml.bind.annotation.XmlNsForm.QUALIFIED, xmlns = {\r\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_2&quot;, prefix = &quot;&quot;),\r\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://schemas.xmlsoap.org/soap/envelope/&quot;, prefix = &quot;soapenv&quot;),\r\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_0&quot;, prefix = &quot;v1p0&quot;)\r\n})\r\npackage com.intershop.iom.typesv1_1;\r\n```\r\n\r\nIs it what you&#39;re expecting ?\r\n\r\nAlso seeing the [wiki page][1], the example is not expecting to read any namespaceURI : the goal is to define a prefix for the current namespace.\r\n\r\n\r\n  [1]: https://github.com/highsource/jaxb-tools/wiki/JAXB2-Namespace-Prefix-Plugin","title":"Why can&#39;t I use multiple namespace:prefix for one package-info.java via urn:jaxb.jvnet.org:plugin:namespace-prefix Maven plugin","body":"<p>By quickly modifying the plugin behaviour, I get this generated :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@jakarta.xml.bind.annotation.XmlSchema(namespace = &quot;http://types.theberlinbakery.com/v1_1&quot;, elementFormDefault = jakarta.xml.bind.annotation.XmlNsForm.QUALIFIED, xmlns = {\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_2&quot;, prefix = &quot;&quot;),\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://schemas.xmlsoap.org/soap/envelope/&quot;, prefix = &quot;soapenv&quot;),\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_0&quot;, prefix = &quot;v1p0&quot;)\n})\npackage com.intershop.iom.typesv1_1;\n</code></pre>\n<p>Is it what you're expecting ?</p>\n<p>Also seeing the <a href=\"https://github.com/highsource/jaxb-tools/wiki/JAXB2-Namespace-Prefix-Plugin\" rel=\"nofollow noreferrer\">wiki page</a>, the example is not expecting to read any namespaceURI : the goal is to define a prefix for the current namespace.</p>\n"}],"owner":{"account_id":1010706,"reputation":1264,"user_id":1023341,"display_name":"gkephorus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700672310,"creation_date":1700658758,"question_id":77530239,"body_markdown":"When I use these bindings:\r\n\r\n    &lt;bindings schemaLocation=&quot;OrderStateService-v1.0.xsd&quot;&gt;\r\n        &lt;bindings&gt;\r\n            &lt;namespace:prefix name=&quot;&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_2&quot; /&gt;\r\n            &lt;namespace:prefix name=&quot;soapenv&quot; namespaceURI=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; /&gt;\r\n            &lt;namespace:prefix name=&quot;v1p0&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_0&quot; /&gt;\r\n            &lt;namespace:prefix name=&quot;v1p1&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_1&quot; /&gt;\r\n        &lt;/bindings&gt;\r\n    &lt;/bindings&gt;\r\n\r\nwhile using the [namespace-prefix plugin in Maven][1].\r\n\r\nI notice I only get the first one in this list applied in my package-info.java:\r\n\r\n    @jakarta.xml.bind.annotation.XmlSchema(namespace = &quot;http://types.theberlinbakery.com/v1_2&quot;, elementFormDefault = jakarta.xml.bind.annotation.XmlNsForm.QUALIFIED, xmlns = {\r\n        @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_2&quot;, prefix = &quot;&quot;)\r\n    })\r\n    package com.intershop.iom.typesv1_2;\r\n\r\nWhere I would expect all of them being applied:\r\n\r\n    @jakarta.xml.bind.annotation.XmlSchema(namespace = &quot;http://types.theberlinbakery.com/v1_2&quot;, elementFormDefault = jakarta.xml.bind.annotation.XmlNsForm.QUALIFIED, xmlns = {\r\n        @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_2&quot;, prefix = &quot;&quot;)\r\n        @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://schemas.xmlsoap.org/soap/envelope/&quot;, prefix = &quot;soapenv&quot;)\r\n        @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_0&quot;, prefix = &quot;v1p0&quot;)\r\n        @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_1&quot;, prefix = &quot;v1p1&quot;)\r\n    })\r\n    package com.intershop.iom.typesv1_2;\r\n\r\nAll demonstrated in branch ```that-which-does-not-work``` on github repo: [proof-jaxb-namespace-prefix-plugin][2]\r\n\r\nHow come?\r\n\r\n\r\n  [1]: https://github.com/highsource/jaxb-tools/wiki/JAXB2-Namespace-Prefix-Plugin\r\n  [2]: https://github.com/gkfirst8/proof-jaxb-namespace-prefix-plugin","title":"Why can&#39;t I use multiple namespace:prefix for one package-info.java via urn:jaxb.jvnet.org:plugin:namespace-prefix Maven plugin","body":"<p>When I use these bindings:</p>\n<pre><code>&lt;bindings schemaLocation=&quot;OrderStateService-v1.0.xsd&quot;&gt;\n    &lt;bindings&gt;\n        &lt;namespace:prefix name=&quot;&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_2&quot; /&gt;\n        &lt;namespace:prefix name=&quot;soapenv&quot; namespaceURI=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; /&gt;\n        &lt;namespace:prefix name=&quot;v1p0&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_0&quot; /&gt;\n        &lt;namespace:prefix name=&quot;v1p1&quot; namespaceURI=&quot;http://types.theberlinbakery.com/v1_1&quot; /&gt;\n    &lt;/bindings&gt;\n&lt;/bindings&gt;\n</code></pre>\n<p>while using the <a href=\"https://github.com/highsource/jaxb-tools/wiki/JAXB2-Namespace-Prefix-Plugin\" rel=\"nofollow noreferrer\">namespace-prefix plugin in Maven</a>.</p>\n<p>I notice I only get the first one in this list applied in my package-info.java:</p>\n<pre><code>@jakarta.xml.bind.annotation.XmlSchema(namespace = &quot;http://types.theberlinbakery.com/v1_2&quot;, elementFormDefault = jakarta.xml.bind.annotation.XmlNsForm.QUALIFIED, xmlns = {\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_2&quot;, prefix = &quot;&quot;)\n})\npackage com.intershop.iom.typesv1_2;\n</code></pre>\n<p>Where I would expect all of them being applied:</p>\n<pre><code>@jakarta.xml.bind.annotation.XmlSchema(namespace = &quot;http://types.theberlinbakery.com/v1_2&quot;, elementFormDefault = jakarta.xml.bind.annotation.XmlNsForm.QUALIFIED, xmlns = {\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_2&quot;, prefix = &quot;&quot;)\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://schemas.xmlsoap.org/soap/envelope/&quot;, prefix = &quot;soapenv&quot;)\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_0&quot;, prefix = &quot;v1p0&quot;)\n    @jakarta.xml.bind.annotation.XmlNs(namespaceURI = &quot;http://types.theberlinbakery.com/v1_1&quot;, prefix = &quot;v1p1&quot;)\n})\npackage com.intershop.iom.typesv1_2;\n</code></pre>\n<p>All demonstrated in branch <code>that-which-does-not-work</code> on github repo: <a href=\"https://github.com/gkfirst8/proof-jaxb-namespace-prefix-plugin\" rel=\"nofollow noreferrer\">proof-jaxb-namespace-prefix-plugin</a></p>\n<p>How come?</p>\n"},{"tags":["java","spring","spring-boot","mocking","integration-testing"],"comments":[{"owner":{"account_id":4200044,"reputation":3510,"user_id":3440376,"display_name":"tan9"},"score":0,"creation_date":1487043115,"post_id":40563409,"comment_id":71595841,"body_markdown":"You can inject mock and call initialization code by hand as described in this answer: http://stackoverflow.com/a/31587946/3440376","body":"You can inject mock and call initialization code by hand as described in this answer: <a href=\"http://stackoverflow.com/a/31587946/3440376\">stackoverflow.com/a/31587946/3440376</a>"},{"owner":{"account_id":139814,"reputation":16844,"user_id":345648,"accept_rate":48,"display_name":"Alexander Taylor"},"score":0,"creation_date":1647048237,"post_id":40563409,"comment_id":126282540,"body_markdown":"Thanks for the workaround. Using `Answers.CALLS_REAL_METHODS` I was able provide a fake implementation in a subclass taking effect before the set up of other beans, and avoid use of `@Primary`.","body":"Thanks for the workaround. Using <code>Answers.CALLS_REAL_METHODS</code> I was able provide a fake implementation in a subclass taking effect before the set up of other beans, and avoid use of <code>@Primary</code>."},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1700672245,"post_id":40563409,"comment_id":136684256,"body_markdown":"I&#39;ve added your edit as a standalone answer, as that&#39;s basically what it is: https://stackoverflow.com/a/77531830/1108305","body":"I&#39;ve added your edit as a standalone answer, as that&#39;s basically what it is: <a href=\"https://stackoverflow.com/a/77531830/1108305\">stackoverflow.com/a/77531830/1108305</a>"}],"answers":[{"tags":[],"owner":{"account_id":6502278,"reputation":1449,"user_id":5032575,"display_name":"Ahmed Sayed"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1555086190,"creation_date":1555086190,"answer_id":55655914,"question_id":40563409,"body_markdown":"I think that it&#39;s due to the way you autowire your dependencies. Take a look at [this][1] (specially the part about &#39;Fix #1: Solve your design and make your dependencies visible&#39;). That way you can also avoid using the `@PostConstruct` and just use the constructor instead.\r\n\r\n\r\n  [1]: https://tedvinke.wordpress.com/2014/02/13/mockito-why-you-should-not-use-injectmocks-annotation-to-autowire-fields/","title":"Configure @MockBean component before application start","body":"<p>I think that it's due to the way you autowire your dependencies. Take a look at <a href=\"https://tedvinke.wordpress.com/2014/02/13/mockito-why-you-should-not-use-injectmocks-annotation-to-autowire-fields/\" rel=\"nofollow noreferrer\">this</a> (specially the part about 'Fix #1: Solve your design and make your dependencies visible'). That way you can also avoid using the <code>@PostConstruct</code> and just use the constructor instead.</p>\n"},{"tags":[],"owner":{"account_id":3953719,"reputation":1153,"user_id":3263041,"display_name":"Florian Lopes"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1564563451,"creation_date":1564563451,"answer_id":57286893,"question_id":40563409,"body_markdown":"Spring&#39;s initialization is triggered before `@Before` Mockito&#39;s annotation so the mock is not initialized at the time the `@PostConstruct` annotated method is executed.\r\n\r\nTry to &#39;delay&#39; your system detection using `@Lazy` annotation on the `SystemTypeDetector` component. Use your `SystemTypeDetector` where you need it, keep in mind that you cannot trigger this detection in a `@PostConstruct` or equivalent hook.","title":"Configure @MockBean component before application start","body":"<p>Spring's initialization is triggered before <code>@Before</code> Mockito's annotation so the mock is not initialized at the time the <code>@PostConstruct</code> annotated method is executed.</p>\n\n<p>Try to 'delay' your system detection using <code>@Lazy</code> annotation on the <code>SystemTypeDetector</code> component. Use your <code>SystemTypeDetector</code> where you need it, keep in mind that you cannot trigger this detection in a <code>@PostConstruct</code> or equivalent hook.</p>\n"},{"tags":[],"owner":{"account_id":7016676,"reputation":163,"user_id":5377759,"display_name":"Niki.Max"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1564746273,"creation_date":1564741071,"answer_id":57324469,"question_id":40563409,"body_markdown":"What U are using, is good for a unit tests: \r\n\r\n    org.mockito.Mockito#when()\r\n\r\nTry to use the following methods for mocking spring beans when the context is spined-up:\r\n\r\n    org.mockito.BDDMockito#given()\r\nIf u are using @SpyBean, then u should use another syntax:\r\n\r\n    willReturn(Arrays.asList(val1, val2))\r\n            .given(service).getEntities(any());\r\n\r\n ","title":"Configure @MockBean component before application start","body":"<p>What U are using, is good for a unit tests: </p>\n\n<pre><code>org.mockito.Mockito#when()\n</code></pre>\n\n<p>Try to use the following methods for mocking spring beans when the context is spined-up:</p>\n\n<pre><code>org.mockito.BDDMockito#given()\n</code></pre>\n\n<p>If u are using @SpyBean, then u should use another syntax:</p>\n\n<pre><code>willReturn(Arrays.asList(val1, val2))\n        .given(service).getEntities(any());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1186616,"reputation":12512,"user_id":1160445,"display_name":"Maciej Walkowiak"},"down_vote_count":0,"up_vote_count":58,"is_accepted":false,"score":58,"last_activity_date":1571814577,"creation_date":1571814577,"answer_id":58517289,"question_id":40563409,"body_markdown":"In this case you need to configure mocks in a way we used to do it before `@MockBean` was introduced - by specifying manually a `@Primary` bean that will replace the original one in the context.\r\n\r\n```java\r\n@SpringBootTest\r\nclass DemoApplicationTests {\r\n\r\n\t@TestConfiguration\r\n\tpublic static class TestConfig {\r\n\r\n\t\t@Bean\r\n\t\t@Primary\r\n\t\tpublic SystemTypeDetector mockSystemTypeDetector() {\r\n\t\t\tSystemTypeDetector std = mock(SystemTypeDetector.class);\r\n\t\t\twhen(std.getSystemType()).thenReturn(TYPE_C);\r\n\t\t\treturn std;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t@Autowired\r\n\tprivate SystemTypeDetector systemTypeDetector;\r\n\r\n\t@Test\r\n\tvoid contextLoads() {\r\n\t\tassertThat(systemTypeDetector.getSystemType()).isEqualTo(TYPE_C);\r\n\t}\r\n}\r\n```\r\n\r\nSince `@TestConfiguration` class is a static inner class it will be picked automatically only by this test. Complete mock behaviour that you would put into `@Before` has to be moved to method that initialises a bean.","title":"Configure @MockBean component before application start","body":"<p>In this case you need to configure mocks in a way we used to do it before <code>@MockBean</code> was introduced - by specifying manually a <code>@Primary</code> bean that will replace the original one in the context.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\nclass DemoApplicationTests {\n\n    @TestConfiguration\n    public static class TestConfig {\n\n        @Bean\n        @Primary\n        public SystemTypeDetector mockSystemTypeDetector() {\n            SystemTypeDetector std = mock(SystemTypeDetector.class);\n            when(std.getSystemType()).thenReturn(TYPE_C);\n            return std;\n        }\n\n    }\n\n    @Autowired\n    private SystemTypeDetector systemTypeDetector;\n\n    @Test\n    void contextLoads() {\n        assertThat(systemTypeDetector.getSystemType()).isEqualTo(TYPE_C);\n    }\n}\n</code></pre>\n\n<p>Since <code>@TestConfiguration</code> class is a static inner class it will be picked automatically only by this test. Complete mock behaviour that you would put into <code>@Before</code> has to be moved to method that initialises a bean.</p>\n"},{"tags":[],"owner":{"account_id":19476520,"reputation":101,"user_id":14247812,"display_name":"wk."},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1599660138,"creation_date":1599660138,"answer_id":63813340,"question_id":40563409,"body_markdown":"You can use the following trick:\r\n\r\n    @Configuration\r\n    public class Config {\r\n\r\n        @Bean\r\n        public BeanA beanA() {\r\n            return new BeanA();\r\n        }\r\n\r\n        @Bean\r\n        public BeanB beanB() {\r\n            return new BeanB(beanA());\r\n        }\r\n    }\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @ContextConfiguration(classes = {TestConfig.class, Config.class})\r\n    public class ConfigTest {\r\n\r\n        @Configuration\r\n        static class TestConfig {\r\n\r\n            @MockBean\r\n            BeanA beanA;\r\n\r\n            @PostConstruct\r\n            void setUp() {\r\n                when(beanA.someMethod()).thenReturn(...);\r\n            }\r\n        }\r\n    }\r\n\r\nAt least it&#39;s working for `spring-boot-2.1.9.RELEASE`","title":"Configure @MockBean component before application start","body":"<p>You can use the following trick:</p>\n<pre><code>@Configuration\npublic class Config {\n\n    @Bean\n    public BeanA beanA() {\n        return new BeanA();\n    }\n\n    @Bean\n    public BeanB beanB() {\n        return new BeanB(beanA());\n    }\n}\n\n@RunWith(SpringRunner.class)\n@ContextConfiguration(classes = {TestConfig.class, Config.class})\npublic class ConfigTest {\n\n    @Configuration\n    static class TestConfig {\n\n        @MockBean\n        BeanA beanA;\n\n        @PostConstruct\n        void setUp() {\n            when(beanA.someMethod()).thenReturn(...);\n        }\n    }\n}\n</code></pre>\n<p>At least it's working for <code>spring-boot-2.1.9.RELEASE</code></p>\n"},{"tags":[],"owner":{"account_id":1096470,"reputation":26056,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1621510559,"creation_date":1621510215,"answer_id":67619484,"question_id":40563409,"body_markdown":"I was able to fix it like this\r\n```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(classes = MyWebApplication.class, webEnvironment = RANDOM_PORT)\r\npublic class IntegrationTestNrOne {\r\n    // this inner class must be static!\r\n    @TestConfiguration\r\n    public static class EarlyConfiguration {\r\n       @MockBean \r\n       private SystemTypeDetector systemTypeDetectorMock;\r\n\r\n       @PostConstruct \r\n       public void initMock(){\r\n          Mockito.when(systemTypeDetectorMock.getSystemType()).thenReturn(TYPE_C);\r\n       }\r\n    }\r\n\r\n    // here we can inject the bean created by EarlyConfiguration\r\n    @Autowired \r\n    private SystemTypeDetector systemTypeDetectorMock;\r\n\r\n    @Autowired\r\n    private SomeOtherComponent someOtherComponent;\r\n\r\n    @Test \r\n    public void testNrOne(){\r\n       someOtherComponent.doStuff();\r\n    }\r\n}\r\n```\r\n","title":"Configure @MockBean component before application start","body":"<p>I was able to fix it like this</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = MyWebApplication.class, webEnvironment = RANDOM_PORT)\npublic class IntegrationTestNrOne {\n    // this inner class must be static!\n    @TestConfiguration\n    public static class EarlyConfiguration {\n       @MockBean \n       private SystemTypeDetector systemTypeDetectorMock;\n\n       @PostConstruct \n       public void initMock(){\n          Mockito.when(systemTypeDetectorMock.getSystemType()).thenReturn(TYPE_C);\n       }\n    }\n\n    // here we can inject the bean created by EarlyConfiguration\n    @Autowired \n    private SystemTypeDetector systemTypeDetectorMock;\n\n    @Autowired\n    private SomeOtherComponent someOtherComponent;\n\n    @Test \n    public void testNrOne(){\n       someOtherComponent.doStuff();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700672195,"creation_date":1700672195,"answer_id":77531830,"question_id":40563409,"body_markdown":"For your specific case (as you mentioned in an edit to your answer), as a workaround you can use `@MockBean(answer = CALLS_REAL_METHODS)`.  This will use the actual method implementation at startup.  Then within tests that need to mock out the value, you can specify mocks as normal.","title":"Configure @MockBean component before application start","body":"<p>For your specific case (as you mentioned in an edit to your answer), as a workaround you can use <code>@MockBean(answer = CALLS_REAL_METHODS)</code>.  This will use the actual method implementation at startup.  Then within tests that need to mock out the value, you can specify mocks as normal.</p>\n"}],"owner":{"account_id":1376453,"reputation":4124,"user_id":1310372,"accept_rate":41,"display_name":"Marcel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47627,"favorite_count":0,"down_vote_count":0,"up_vote_count":52,"answer_count":7,"score":52,"last_activity_date":1700672195,"creation_date":1478957807,"question_id":40563409,"body_markdown":"I have a Spring Boot 1.4.2 application. Some code that is used during startup looks like this:\r\n\r\n    @Component \r\n    class SystemTypeDetector{\r\n        public enum SystemType{ TYPE_A, TYPE_B, TYPE_C }\r\n        public SystemType getSystemType(){ return ... }\r\n    }\r\n\r\n    @Component \r\n    public class SomeOtherComponent{\r\n        @Autowired \r\n        private SystemTypeDetector systemTypeDetector;\r\n        @PostConstruct \r\n        public void startup(){\r\n            switch(systemTypeDetector.getSystemType()){   // &lt;-- NPE here in test\r\n            case TYPE_A: ...\r\n            case TYPE_B: ...\r\n            case TYPE_C: ...\r\n            }\r\n        }\r\n    }\r\n\r\nThere is a component that determines the system type. This component is used during startup from other components. In production, everything works fine.\r\n\r\nNow I want to add some integration tests using Spring 1.4&#39;s `@MockBean`.\r\n\r\nThe test looks like this:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(classes = MyWebApplication.class, webEnvironment = RANDOM_PORT)\r\n    public class IntegrationTestNrOne {\r\n        @MockBean \r\n        private SystemTypeDetector systemTypeDetectorMock;\r\n\r\n        @Before \r\n        public void initMock(){\r\n           Mockito.when(systemTypeDetectorMock.getSystemType()).thenReturn(TYPE_C);\r\n        }\r\n\r\n        @Test \r\n        public void testNrOne(){\r\n          // ...\r\n        }\r\n    }\r\n\r\nBasically, the mocking works fine. My systemTypeDetectorMock is used and if I call &lt;code&gt;getSystemType&lt;/code&gt; -&gt; &lt;code&gt;TYPE_C&lt;/code&gt; is returned.\r\n\r\n**The problem** is that the application doesn&#39;t start. Currently springs working order seems to be:\r\n\r\n1. create all Mocks (without configuration all methods return null)\r\n2. start the application\r\n3. call `@Before`-methods (where the mocks would be configured)\r\n4. start test\r\n\r\nMy problem is that the application starts with an uninitialized mock. So the call to &lt;code&gt;getSystemType()&lt;/code&gt; returns null.\r\n\r\nMy question is: How can I configure the mocks *before* application startup?\r\n\r\n**EDIT:** \r\nIf somebody has the same problem, one *workaround* is to use &lt;code&gt;@MockBean(answer = CALLS_REAL_METHODS)&lt;/code&gt;. This calls the real component and in my case, the system starts up. After startup, I can change the mock behavior.","title":"Configure @MockBean component before application start","body":"<p>I have a Spring Boot 1.4.2 application. Some code that is used during startup looks like this:</p>\n<pre><code>@Component \nclass SystemTypeDetector{\n    public enum SystemType{ TYPE_A, TYPE_B, TYPE_C }\n    public SystemType getSystemType(){ return ... }\n}\n\n@Component \npublic class SomeOtherComponent{\n    @Autowired \n    private SystemTypeDetector systemTypeDetector;\n    @PostConstruct \n    public void startup(){\n        switch(systemTypeDetector.getSystemType()){   // &lt;-- NPE here in test\n        case TYPE_A: ...\n        case TYPE_B: ...\n        case TYPE_C: ...\n        }\n    }\n}\n</code></pre>\n<p>There is a component that determines the system type. This component is used during startup from other components. In production, everything works fine.</p>\n<p>Now I want to add some integration tests using Spring 1.4's <code>@MockBean</code>.</p>\n<p>The test looks like this:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = MyWebApplication.class, webEnvironment = RANDOM_PORT)\npublic class IntegrationTestNrOne {\n    @MockBean \n    private SystemTypeDetector systemTypeDetectorMock;\n\n    @Before \n    public void initMock(){\n       Mockito.when(systemTypeDetectorMock.getSystemType()).thenReturn(TYPE_C);\n    }\n\n    @Test \n    public void testNrOne(){\n      // ...\n    }\n}\n</code></pre>\n<p>Basically, the mocking works fine. My systemTypeDetectorMock is used and if I call <code>getSystemType</code> -&gt; <code>TYPE_C</code> is returned.</p>\n<p><strong>The problem</strong> is that the application doesn't start. Currently springs working order seems to be:</p>\n<ol>\n<li>create all Mocks (without configuration all methods return null)</li>\n<li>start the application</li>\n<li>call <code>@Before</code>-methods (where the mocks would be configured)</li>\n<li>start test</li>\n</ol>\n<p>My problem is that the application starts with an uninitialized mock. So the call to <code>getSystemType()</code> returns null.</p>\n<p>My question is: How can I configure the mocks <em>before</em> application startup?</p>\n<p><strong>EDIT:</strong>\nIf somebody has the same problem, one <em>workaround</em> is to use <code>@MockBean(answer = CALLS_REAL_METHODS)</code>. This calls the real component and in my case, the system starts up. After startup, I can change the mock behavior.</p>\n"},{"tags":["java","spring","freemarker"],"comments":[{"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"score":0,"creation_date":1700553501,"post_id":77517473,"comment_id":136665619,"body_markdown":"You are configuring FreeMarker independently of Spring, so it has no chance to add its own things to the model. You have to use the template support of Spring.","body":"You are configuring FreeMarker independently of Spring, so it has no chance to add its own things to the model. You have to use the template support of Spring."},{"owner":{"account_id":3346587,"reputation":674,"user_id":2811635,"accept_rate":62,"display_name":"Ousmane MBINTE"},"score":0,"creation_date":1700663353,"post_id":77517473,"comment_id":136682294,"body_markdown":"Hello, I changed my implementation to use Spring and even in the ViewResolver I set the  viewResolver.setExposeSpringMacroHelpers(true); I always get the same error.","body":"Hello, I changed my implementation to use Spring and even in the ViewResolver I set the  viewResolver.setExposeSpringMacroHelpers(true); I always get the same error."},{"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"score":0,"creation_date":1700682897,"post_id":77517473,"comment_id":136685990,"body_markdown":"You aren&#39;t using the `Configuration` that Spring created above. But, even if you do, if it&#39;s not a Web MVC view, it won&#39;t work. `springMacroRequestContext` is added to the model in `org.springframework.web.servlet.view.freemarker.FreeMarkerView`, which is used by Spring when you return the template name in a Spring Web controller. Even if you create the `springMacroRequestContext` yourself, it&#39;s a `org.springframework.web.servlet.support.RequestContext` that needs a `HttpServletRequest`.","body":"You aren&#39;t using the <code>Configuration</code> that Spring created above. But, even if you do, if it&#39;s not a Web MVC view, it won&#39;t work. <code>springMacroRequestContext</code> is added to the model in <code>org.springframework.web.servlet.view.freemarker.FreeMarkerVi&zwnj;&#8203;ew</code>, which is used by Spring when you return the template name in a Spring Web controller. Even if you create the <code>springMacroRequestContext</code> yourself, it&#39;s a <code>org.springframework.web.servlet.support.RequestContext</code> that needs a <code>HttpServletRequest</code>."}],"owner":{"account_id":3346587,"reputation":674,"user_id":2811635,"accept_rate":62,"display_name":"Ousmane MBINTE"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700671648,"creation_date":1700497449,"question_id":77517473,"body_markdown":"When I try to display label from resource bundle in HTML Freemarker template using Spring MVC I get a null error on the springMacroRequestContext. I use the spring.ftl macros to have some commons util methods, and I define a ViewResolver with the setExposeSpringMacroHelpers at true to expose the RequestContext in macros.\r\n\r\nConfiguration :\r\n\r\n    package com.omb;\r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    import org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer;\r\n    import org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver;\r\n    \r\n    import java.util.Properties;\r\n    \r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class FreeMarkerConfiguration implements WebMvcConfigurer {\r\n    \r\n        @Bean\r\n        public FreeMarkerViewResolver viewResolver() {\r\n            FreeMarkerViewResolver viewResolver = new FreeMarkerViewResolver();\r\n            viewResolver.setExposeSpringMacroHelpers(true);\r\n            viewResolver.setExposeRequestAttributes(true);\r\n            viewResolver.setPrefix(&quot;&quot;);\r\n            viewResolver.setSuffix(&quot;.ftl&quot;);\r\n            viewResolver.setContentType(&quot;text/html;charset=UTF-8&quot;);\r\n            return viewResolver;\r\n        }\r\n    \r\n        @Bean\r\n        public FreeMarkerConfigurer freemarkerConfig() {\r\n            FreeMarkerConfigurer configurer = new FreeMarkerConfigurer();\r\n            configurer.setDefaultEncoding(&quot;UTF-8&quot;);\r\n            configurer.setTemplateLoaderPath(&quot;/WEB-INF/views/ftl/&quot;);\r\n    \r\n            Properties settings = new Properties();\r\n            settings.setProperty(&quot;auto_import&quot;, &quot;/spring.ftl as spring&quot;);\r\n            settings.setProperty(&quot;incompatible_improvements&quot;, &quot;2.3.32&quot;);\r\n            settings.setProperty(&quot;template_exception_handler&quot;, &quot;rethrow&quot;);\r\n            configurer.setFreemarkerSettings(settings);\r\n            return configurer;\r\n        }\r\n    }\r\n\r\n\r\nInject the configuration in my generator service :\r\n\r\n    @Autowired\r\n    private FreeMarkerConfiguration freeMarkerConfiguration;\r\n\r\nAnd call it like this : \r\n\r\n    public static byte[] generateDoc(String templateName, String templateDocument, Map&lt;String, Object&gt; objects, Map&lt;String, Object&gt; params, FreeMarkerConfiguration configuration) throws IOException, TemplateException {\r\n            ConverterProperties converterProperties = getConverterProperties();\r\n    \r\n            Template template = new Template(templateName, new StringReader(templateDocument),  configuration.freemarkerConfig().createConfiguration());\r\n    \r\n            try (ByteArrayOutputStream out = new ByteArrayOutputStream()) {\r\n                Writer writer = new OutputStreamWriter(out);\r\n    \r\n                Environment env = template.createProcessingEnvironment(objects, writer);\r\n                populateEnvironnment(env);\r\n                env.process();\r\n    \r\n                ByteArrayOutputStream fos = new ByteArrayOutputStream();\r\n                PdfDocument output = new PdfDocument(new PdfWriter(fos));\r\n                output.setDefaultPageSize((PageSize) ownParams.get(PAGE_SIZE));\r\n    \r\n                try (ByteArrayInputStream in = new ByteArrayInputStream(out.toByteArray())) {\r\n                    HtmlConverter.convertToPdf(in, output, converterProperties);\r\n                }\r\n                return fos.toByteArray();\r\n            }\r\n        }\r\n\r\nHTML template :\r\n\r\n    &lt;#import &quot;/spring.ftl&quot; as spring/&gt;\r\n    \r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    \r\n    &lt;body&gt;\r\n    &lt;@spring.messageText &quot;resource.bundle.key&quot;/&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n\r\nError :\r\n\r\n    The following has evaluated to null or missing:\r\n    ==&gt; springMacroRequestContext  [in template &quot;spring.ftl&quot; at line 28, column 24]\r\n    \r\n    ----\r\n    Tip: If the failing expression is known to legally refer to something that&#39;s sometimes null or missing, either specify a default value like myOptionalVar!myDefault, or use &lt;#if myOptionalVar??&gt;when-present&lt;#else&gt;when-missing&lt;/#if&gt;. (These only cover the last step of the expression; to cover the whole expression, use parenthesis: (myOptionalVar.foo)!myDefault, (myOptionalVar.foo)??\r\n    ----\r\n    \r\n    ----\r\n    FTL stack trace (&quot;~&quot; means nesting-related):\r\n    \t- Failed at: ${springMacroRequestContext.getMessag...  [in template &quot;spring.ftl&quot; in macro &quot;message&quot; at line 28, column 22]\r\n    \t- Reached through: @spring.message &quot;sale.enum.TravelPass...  [in template &quot;MY_TEMPLATE&quot; at line 7, column 9]\r\n    ----\r\n    FreeMarker template error:\r\n    The following has evaluated to null or missing:\r\n    ==&gt; springMacroRequestContext  [in template &quot;spring.ftl&quot; at line 28, column 24]\r\n    \r\n    ----\r\n    Tip: If the failing expression is known to legally refer to something that&#39;s sometimes null or missing, either specify a default value like myOptionalVar!myDefault, or use &lt;#if myOptionalVar??&gt;when-present&lt;#else&gt;when-missing&lt;/#if&gt;. (These only cover the last step of the expression; to cover the whole expression, use parenthesis: (myOptionalVar.foo)!myDefault, (myOptionalVar.foo)??\r\n    ----\r\n    \r\n    ----\r\n    FTL stack trace (&quot;~&quot; means nesting-related):\r\n    \t- Failed at: ${springMacroRequestContext.getMessag...  [in template &quot;spring.ftl&quot; in macro &quot;message&quot; at line 28, column 22]\r\n    \t- Reached through: @spring.message &quot;resource.bundle.key...  [in template &quot;MY_TEMPLATE&quot; at line 53, column 9]\r\n    ----\r\n    \r\n    Java stack trace (for programmers):\r\n    ----\r\n    freemarker.core.InvalidReferenceException: [... Exception message was already printed; see it above ...]\r\n    \tat freemarker.core.InvalidReferenceException.getInstance(InvalidReferenceException.java:134)\r\n    \tat freemarker.core.UnexpectedTypeException.newDescriptionBuilder(UnexpectedTypeException.java:85)\r\n    \tat freemarker.core.UnexpectedTypeException.&lt;init&gt;(UnexpectedTypeException.java:48)\r\n    \tat freemarker.core.NonHashException.&lt;init&gt;(NonHashException.java:49)\r\n    \tat freemarker.core.Dot._eval(Dot.java:48)\r\n\r\n\r\nI found a woraround solution using the add of RequestContext in the data model map but it&#39;s not very clean solution \r\n\r\n    HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest();\r\n    map.put(&quot;springMacroRequestContext&quot;, new RequestContext(request, null, null, null));","title":"Freemarker get null during evaluation of spring message in the spring.ftl springMacroRequestContext function","body":"<p>When I try to display label from resource bundle in HTML Freemarker template using Spring MVC I get a null error on the springMacroRequestContext. I use the spring.ftl macros to have some commons util methods, and I define a ViewResolver with the setExposeSpringMacroHelpers at true to expose the RequestContext in macros.</p>\n<p>Configuration :</p>\n<pre><code>package com.omb;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\nimport org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer;\nimport org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver;\n\nimport java.util.Properties;\n\n@Configuration\n@EnableWebMvc\npublic class FreeMarkerConfiguration implements WebMvcConfigurer {\n\n    @Bean\n    public FreeMarkerViewResolver viewResolver() {\n        FreeMarkerViewResolver viewResolver = new FreeMarkerViewResolver();\n        viewResolver.setExposeSpringMacroHelpers(true);\n        viewResolver.setExposeRequestAttributes(true);\n        viewResolver.setPrefix(&quot;&quot;);\n        viewResolver.setSuffix(&quot;.ftl&quot;);\n        viewResolver.setContentType(&quot;text/html;charset=UTF-8&quot;);\n        return viewResolver;\n    }\n\n    @Bean\n    public FreeMarkerConfigurer freemarkerConfig() {\n        FreeMarkerConfigurer configurer = new FreeMarkerConfigurer();\n        configurer.setDefaultEncoding(&quot;UTF-8&quot;);\n        configurer.setTemplateLoaderPath(&quot;/WEB-INF/views/ftl/&quot;);\n\n        Properties settings = new Properties();\n        settings.setProperty(&quot;auto_import&quot;, &quot;/spring.ftl as spring&quot;);\n        settings.setProperty(&quot;incompatible_improvements&quot;, &quot;2.3.32&quot;);\n        settings.setProperty(&quot;template_exception_handler&quot;, &quot;rethrow&quot;);\n        configurer.setFreemarkerSettings(settings);\n        return configurer;\n    }\n}\n</code></pre>\n<p>Inject the configuration in my generator service :</p>\n<pre><code>@Autowired\nprivate FreeMarkerConfiguration freeMarkerConfiguration;\n</code></pre>\n<p>And call it like this :</p>\n<pre><code>public static byte[] generateDoc(String templateName, String templateDocument, Map&lt;String, Object&gt; objects, Map&lt;String, Object&gt; params, FreeMarkerConfiguration configuration) throws IOException, TemplateException {\n        ConverterProperties converterProperties = getConverterProperties();\n\n        Template template = new Template(templateName, new StringReader(templateDocument),  configuration.freemarkerConfig().createConfiguration());\n\n        try (ByteArrayOutputStream out = new ByteArrayOutputStream()) {\n            Writer writer = new OutputStreamWriter(out);\n\n            Environment env = template.createProcessingEnvironment(objects, writer);\n            populateEnvironnment(env);\n            env.process();\n\n            ByteArrayOutputStream fos = new ByteArrayOutputStream();\n            PdfDocument output = new PdfDocument(new PdfWriter(fos));\n            output.setDefaultPageSize((PageSize) ownParams.get(PAGE_SIZE));\n\n            try (ByteArrayInputStream in = new ByteArrayInputStream(out.toByteArray())) {\n                HtmlConverter.convertToPdf(in, output, converterProperties);\n            }\n            return fos.toByteArray();\n        }\n    }\n</code></pre>\n<p>HTML template :</p>\n<pre><code>&lt;#import &quot;/spring.ftl&quot; as spring/&gt;\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n&lt;body&gt;\n&lt;@spring.messageText &quot;resource.bundle.key&quot;/&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Error :</p>\n<pre><code>The following has evaluated to null or missing:\n==&gt; springMacroRequestContext  [in template &quot;spring.ftl&quot; at line 28, column 24]\n\n----\nTip: If the failing expression is known to legally refer to something that's sometimes null or missing, either specify a default value like myOptionalVar!myDefault, or use &lt;#if myOptionalVar??&gt;when-present&lt;#else&gt;when-missing&lt;/#if&gt;. (These only cover the last step of the expression; to cover the whole expression, use parenthesis: (myOptionalVar.foo)!myDefault, (myOptionalVar.foo)??\n----\n\n----\nFTL stack trace (&quot;~&quot; means nesting-related):\n    - Failed at: ${springMacroRequestContext.getMessag...  [in template &quot;spring.ftl&quot; in macro &quot;message&quot; at line 28, column 22]\n    - Reached through: @spring.message &quot;sale.enum.TravelPass...  [in template &quot;MY_TEMPLATE&quot; at line 7, column 9]\n----\nFreeMarker template error:\nThe following has evaluated to null or missing:\n==&gt; springMacroRequestContext  [in template &quot;spring.ftl&quot; at line 28, column 24]\n\n----\nTip: If the failing expression is known to legally refer to something that's sometimes null or missing, either specify a default value like myOptionalVar!myDefault, or use &lt;#if myOptionalVar??&gt;when-present&lt;#else&gt;when-missing&lt;/#if&gt;. (These only cover the last step of the expression; to cover the whole expression, use parenthesis: (myOptionalVar.foo)!myDefault, (myOptionalVar.foo)??\n----\n\n----\nFTL stack trace (&quot;~&quot; means nesting-related):\n    - Failed at: ${springMacroRequestContext.getMessag...  [in template &quot;spring.ftl&quot; in macro &quot;message&quot; at line 28, column 22]\n    - Reached through: @spring.message &quot;resource.bundle.key...  [in template &quot;MY_TEMPLATE&quot; at line 53, column 9]\n----\n\nJava stack trace (for programmers):\n----\nfreemarker.core.InvalidReferenceException: [... Exception message was already printed; see it above ...]\n    at freemarker.core.InvalidReferenceException.getInstance(InvalidReferenceException.java:134)\n    at freemarker.core.UnexpectedTypeException.newDescriptionBuilder(UnexpectedTypeException.java:85)\n    at freemarker.core.UnexpectedTypeException.&lt;init&gt;(UnexpectedTypeException.java:48)\n    at freemarker.core.NonHashException.&lt;init&gt;(NonHashException.java:49)\n    at freemarker.core.Dot._eval(Dot.java:48)\n</code></pre>\n<p>I found a woraround solution using the add of RequestContext in the data model map but it's not very clean solution</p>\n<pre><code>HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest();\nmap.put(&quot;springMacroRequestContext&quot;, new RequestContext(request, null, null, null));\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1498737489,"post_id":44824382,"comment_id":76628807,"body_markdown":"That will only work if Spring Boot is allowed to configure security, if you are messing around with Security yourself, that property won&#39;t do anything. Also make sure you are on a version of Spring Boot that supports that property.","body":"That will only work if Spring Boot is allowed to configure security, if you are messing around with Security yourself, that property won&#39;t do anything. Also make sure you are on a version of Spring Boot that supports that property."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1498737691,"post_id":44824382,"comment_id":76628973,"body_markdown":"I&#39;m on newest `-1.5.4` and I only added the `configure()` method to disable the csrf. If I remove that method completely, the property is still not taken into account. The only custom security config is with `configure(AuthenticationManagerBuilder auth)` that I use to set `BCryptPasswordEncoder`. But that should not impact the csrf.","body":"I&#39;m on newest <code>-1.5.4</code> and I only added the <code>configure()</code> method to disable the csrf. If I remove that method completely, the property is still not taken into account. The only custom security config is with <code>configure(AuthenticationManagerBuilder auth)</code> that I use to set <code>BCryptPasswordEncoder</code>. But that should not impact the csrf."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1498737783,"post_id":44824382,"comment_id":76629034,"body_markdown":"That depends, if you have `@EnableWebMvc` on it that will disable auto configuration.","body":"That depends, if you have <code>@EnableWebMvc</code> on it that will disable auto configuration."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1498737959,"post_id":44824382,"comment_id":76629166,"body_markdown":"`@SpringBootApplication` is my only annotation. And I&#39;m extending `WebSecurityConfigurerAdapter`. Maybe that&#39;s the cause?","body":"<code>@SpringBootApplication</code> is my only annotation. And I&#39;m extending <code>WebSecurityConfigurerAdapter</code>. Maybe that&#39;s the cause?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1498738761,"post_id":44824382,"comment_id":76629840,"body_markdown":"Are you using Spring Boot? As that isn&#39;t really clear from your question...","body":"Are you using Spring Boot? As that isn&#39;t really clear from your question..."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1498743318,"post_id":44824382,"comment_id":76633523,"body_markdown":"Yes, added spring-boot to tags.","body":"Yes, added spring-boot to tags."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1498744028,"post_id":44824382,"comment_id":76634073,"body_markdown":"Did you enable basic authentication (which is the default) or did you disable that... Also the default is to disable csrf protection so you must have some additional security configuration (properties or classes) that disables the default setup.","body":"Did you enable basic authentication (which is the default) or did you disable that... Also the default is to disable csrf protection so you must have some additional security configuration (properties or classes) that disables the default setup."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1498744234,"post_id":44824382,"comment_id":76634250,"body_markdown":"I have `security.basic.enabled=true` and using maven `spring-boot-starter-security`.","body":"I have <code>security.basic.enabled=true</code> and using maven <code>spring-boot-starter-security</code>."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1498744497,"post_id":44824382,"comment_id":76634496,"body_markdown":"Then I&#39;m out of ideas. There is too little information too help you. imho you have something in the code that disables the default configuration (could be something you have or additional dependencies) however with the little information in the question that is hard to tell.","body":"Then I&#39;m out of ideas. There is too little information too help you. imho you have something in the code that disables the default configuration (could be something you have or additional dependencies) however with the little information in the question that is hard to tell."}],"answers":[{"tags":[],"owner":{"account_id":3906953,"reputation":11639,"user_id":3233398,"accept_rate":9,"display_name":"EliuX"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1700671605,"creation_date":1501280120,"answer_id":45383128,"question_id":44824382,"body_markdown":"As the `WebSecurityConfigurerAdapter` uses an imperative approach you can inject the value of the `security.enable-csrf` variable and disable CSRF  when it be false. You are right, I think this should work out of the box.\r\n\r\n    @Configuration\r\n    public class AuthConfig extends WebSecurityConfigurerAdapter {\r\n        @Autowired\r\n        private UserDetailsService userDetailsService;\r\n\r\n        @Value(&quot;${security.enable-csrf}&quot;)\r\n        private boolean csrfEnabled;\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.userDetailsService(userDetailsService).passwordEncoder(new BCryptPasswordEncoder());\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n           super.configure(http);\r\n\r\n           if(!csrfEnabled)\r\n           {\r\n             http.csrf().disable();\r\n           }\r\n        }\r\n    }\r\n\r\nWhat I did was to set that variable to false in my application.yml for when I had a *dev* spring profile active, although you could create a profile called *nosecurity* for such purposes too. It eases this process a lot:\r\n\r\n--- application.yml ---\r\n\r\n    # Production configuration\r\n    server:\r\n      port: ${server.web.port}\r\n    admin.email: ${admin.email}\r\n    #etc\r\n    ---\r\n    spring:\r\n      profiles: dev\r\n    \r\n    security.enable-csrf: false\r\n    \r\n    #other Development configurations\r\n\r\nI hope it suits your needs\r\n\r\nUpdate on Dec 17th of 2017\r\n----------------------------\r\n\r\nBased on a [comment of a Spring Boot member][1] this issue is fixed on new versions of Spring: I had it on version `1.5.2.RELEASE` but it seems that in version [1.5.9.RELEASE][2] (the latest stable one to the date before version 2) its already fixed and by default **csrf** is disabled and it can be enabled with `security.enable_csrf: true`. Therefore a possible solution could be just upgrading to version `1.5.9.RELEASE`, before making a major one to version 2 where the architecture might be quite more different. \r\n\r\n\r\nUpdate on Jun 02nd of 2023\r\n----------------------------\r\nThe method `http.csrf` requires now a customizer of type `Customizer&lt;CsrfConfigurer&lt;HttpSecurity&gt;&gt;` to configure csrf.\r\nTherefore, instead of:\r\n\r\n```\r\nhttp.csrf().disable();\r\n```\r\n\r\nyou should use\r\n\r\n```\r\nhttp.csrf(AbstractHttpConfigurer::disable);\r\n```\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/11170#issuecomment-350805732\r\n  [2]: https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-dependencies/1.5.9.RELEASE","title":"How to disable csrf in Spring using application.properties?","body":"<p>As the <code>WebSecurityConfigurerAdapter</code> uses an imperative approach you can inject the value of the <code>security.enable-csrf</code> variable and disable CSRF  when it be false. You are right, I think this should work out of the box.</p>\n<pre><code>@Configuration\npublic class AuthConfig extends WebSecurityConfigurerAdapter {\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Value(&quot;${security.enable-csrf}&quot;)\n    private boolean csrfEnabled;\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).passwordEncoder(new BCryptPasswordEncoder());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n       super.configure(http);\n\n       if(!csrfEnabled)\n       {\n         http.csrf().disable();\n       }\n    }\n}\n</code></pre>\n<p>What I did was to set that variable to false in my application.yml for when I had a <em>dev</em> spring profile active, although you could create a profile called <em>nosecurity</em> for such purposes too. It eases this process a lot:</p>\n<p>--- application.yml ---</p>\n<pre><code># Production configuration\nserver:\n  port: ${server.web.port}\nadmin.email: ${admin.email}\n#etc\n---\nspring:\n  profiles: dev\n\nsecurity.enable-csrf: false\n\n#other Development configurations\n</code></pre>\n<p>I hope it suits your needs</p>\n<h2>Update on Dec 17th of 2017</h2>\n<p>Based on a <a href=\"https://github.com/spring-projects/spring-boot/issues/11170#issuecomment-350805732\" rel=\"nofollow noreferrer\">comment of a Spring Boot member</a> this issue is fixed on new versions of Spring: I had it on version <code>1.5.2.RELEASE</code> but it seems that in version <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-dependencies/1.5.9.RELEASE\" rel=\"nofollow noreferrer\">1.5.9.RELEASE</a> (the latest stable one to the date before version 2) its already fixed and by default <strong>csrf</strong> is disabled and it can be enabled with <code>security.enable_csrf: true</code>. Therefore a possible solution could be just upgrading to version <code>1.5.9.RELEASE</code>, before making a major one to version 2 where the architecture might be quite more different.</p>\n<h2>Update on Jun 02nd of 2023</h2>\n<p>The method <code>http.csrf</code> requires now a customizer of type <code>Customizer&lt;CsrfConfigurer&lt;HttpSecurity&gt;&gt;</code> to configure csrf.\nTherefore, instead of:</p>\n<pre><code>http.csrf().disable();\n</code></pre>\n<p>you should use</p>\n<pre><code>http.csrf(AbstractHttpConfigurer::disable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9130923,"reputation":2029,"user_id":6792588,"display_name":"Naor Bar"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1513003945,"creation_date":1512553528,"answer_id":47671182,"question_id":44824382,"body_markdown":"**An update:**\r\n\r\nLooks like there is an issue with disabling CSRF using application.properties on spring-boot 1.x (and thanks to Eliux for openning this [case][1]).\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/11170\r\n\r\nSo my solution for **spring-boot 1.5.7** with an embedded tomcat is disabling CSRF via **SecurityConfig** class (note that this way I keep the tomcat ootb basic authentication):\r\n\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n\t    @Override\r\n\t    protected void configure(HttpSecurity http) throws Exception {\r\n\t\t    // Note: \r\n\t\t    // Use this to enable the tomcat basic authentication (tomcat popup rather than spring login page)\r\n\t\t    // Note that the CSRf token is disabled for all requests (change it as you wish...)\r\n\t\t    http.csrf().disable().authorizeRequests().anyRequest().authenticated().and().httpBasic();\r\n\t    }\r\n\t\r\n\t    @Autowired\r\n\t    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n            // Add here any custom code you need in order to get the credentials from the user...  \r\n  \t        auth.inMemoryAuthentication()\r\n        \t    .withUser(&quot;myUserName&quot;)\r\n        \t    .password(&quot;myPassword&quot;)\r\n        \t    .roles(&quot;USER&quot;);\r\n\t    }\r\n    } ","title":"How to disable csrf in Spring using application.properties?","body":"<p><strong>An update:</strong></p>\n\n<p>Looks like there is an issue with disabling CSRF using application.properties on spring-boot 1.x (and thanks to Eliux for openning this <a href=\"https://github.com/spring-projects/spring-boot/issues/11170\" rel=\"noreferrer\">case</a>).</p>\n\n<p>So my solution for <strong>spring-boot 1.5.7</strong> with an embedded tomcat is disabling CSRF via <strong>SecurityConfig</strong> class (note that this way I keep the tomcat ootb basic authentication):</p>\n\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        // Note: \n        // Use this to enable the tomcat basic authentication (tomcat popup rather than spring login page)\n        // Note that the CSRf token is disabled for all requests (change it as you wish...)\n        http.csrf().disable().authorizeRequests().anyRequest().authenticated().and().httpBasic();\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        // Add here any custom code you need in order to get the credentials from the user...  \n        auth.inMemoryAuthentication()\n            .withUser(\"myUserName\")\n            .password(\"myPassword\")\n            .roles(\"USER\");\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5216633,"reputation":199,"user_id":4171374,"display_name":"Larry Ricker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651933634,"creation_date":1651933634,"answer_id":72153430,"question_id":44824382,"body_markdown":"Was able to disable it with the following line in the spring-security.xml file:\r\n\r\n\r\n&lt;security:csrf disabled=&quot;true&quot;/&gt;","title":"How to disable csrf in Spring using application.properties?","body":"<p>Was able to disable it with the following line in the spring-security.xml file:</p>\n<p>&lt;security:csrf disabled=&quot;true&quot;/&gt;</p>\n"},{"tags":[],"owner":{"account_id":2026230,"reputation":103,"user_id":1811136,"display_name":"Emmy Steven"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1686052853,"creation_date":1686052853,"answer_id":76414424,"question_id":44824382,"body_markdown":"For Spring Boot 3.1.0 (spring-boot-starter-web) use the code snippet below\r\n\r\n```\r\nhttp.csrf(AbstractHttpConfigurer::disable);\r\n```\r\n&lt;br&gt;\r\n\r\nFor Spring Boot 3.1.0 (spring-boot-starter-webflux) use the code snippet below\r\n```\r\nhttp.csrf(ServerHttpSecurity.CsrfSpec::disable);\r\n```\r\n","title":"How to disable csrf in Spring using application.properties?","body":"<p>For Spring Boot 3.1.0 (spring-boot-starter-web) use the code snippet below</p>\n<pre><code>http.csrf(AbstractHttpConfigurer::disable);\n</code></pre>\n<br>\n<p>For Spring Boot 3.1.0 (spring-boot-starter-webflux) use the code snippet below</p>\n<pre><code>http.csrf(ServerHttpSecurity.CsrfSpec::disable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24070332,"reputation":41,"user_id":18046340,"display_name":"Mars"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1693819412,"creation_date":1693819412,"answer_id":77036527,"question_id":44824382,"body_markdown":"For Spring Boot 3. It helped me:\r\n\r\n```\r\nhttp.csrf(csrf -&gt; csrf.disable());\r\n```","title":"How to disable csrf in Spring using application.properties?","body":"<p>For Spring Boot 3. It helped me:</p>\n<pre><code>http.csrf(csrf -&gt; csrf.disable());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29683999,"reputation":21,"user_id":22750045,"display_name":"Pavel Azarenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697551643,"creation_date":1697464323,"answer_id":77302556,"question_id":44824382,"body_markdown":"I guess:\r\nspring-security 6.1.4\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                // ...\r\n                .csrf((csrf) -&gt; csrf\r\n                    .ignoringRequestMatchers(&quot;/api/*&quot;)\r\n                );\r\n            return http.build();\r\n        }\r\n    }\r\n\r\n\r\nOr\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n    \r\n    \t@Bean\r\n    \tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    \t\thttp\r\n    \t\t\t// ...\r\n    \t\t\t.csrf((csrf) -&gt; csrf.disable());\r\n    \t\treturn http.build();\r\n    \t}\r\n    }\r\n\r\n\r\nSee: [*Disable CSRF Protection*][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/exploits/csrf.html#disable-csrf","title":"How to disable csrf in Spring using application.properties?","body":"<p>I guess:\nspring-security 6.1.4</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            // ...\n            .csrf((csrf) -&gt; csrf\n                .ignoringRequestMatchers(&quot;/api/*&quot;)\n            );\n        return http.build();\n    }\n}\n</code></pre>\n<p>Or</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            // ...\n            .csrf((csrf) -&gt; csrf.disable());\n        return http.build();\n    }\n}\n</code></pre>\n<p>See: <a href=\"https://docs.spring.io/spring-security/reference/servlet/exploits/csrf.html#disable-csrf\" rel=\"nofollow noreferrer\"><em>Disable CSRF Protection</em></a></p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88346,"favorite_count":0,"down_vote_count":1,"up_vote_count":32,"accepted_answer_id":45383128,"answer_count":6,"score":31,"last_activity_date":1700671605,"creation_date":1498737099,"question_id":44824382,"body_markdown":"The following property exists:\r\n\r\n`security.enable-csrf=false`\r\n\r\nBUT csrf protection is still on if I add the property to `application.properties`.\r\n\r\nWhat works is to disable it programatically.\r\n\r\nBut I&#39;d prefer properties configuration. Why could it not be working?\r\n\r\n    @Configuration\r\n    public class AuthConfig extends WebSecurityConfigurerAdapter {\r\n    \t@Autowired\r\n    \tprivate UserDetailsService userDetailsService;\r\n    \r\n    \t@Override\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t\tauth.userDetailsService(userDetailsService).passwordEncoder(new BCryptPasswordEncoder());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\tsuper.configure(http);\r\n    \t\thttp.csrf().disable();\r\n    \r\n    \t}\r\n    }","title":"How to disable csrf in Spring using application.properties?","body":"<p>The following property exists:</p>\n\n<p><code>security.enable-csrf=false</code></p>\n\n<p>BUT csrf protection is still on if I add the property to <code>application.properties</code>.</p>\n\n<p>What works is to disable it programatically.</p>\n\n<p>But I'd prefer properties configuration. Why could it not be working?</p>\n\n<pre><code>@Configuration\npublic class AuthConfig extends WebSecurityConfigurerAdapter {\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).passwordEncoder(new BCryptPasswordEncoder());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        super.configure(http);\n        http.csrf().disable();\n\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","tcp"],"owner":{"account_id":28945377,"reputation":11,"user_id":22171067,"display_name":"Yohan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700671412,"creation_date":1700671412,"question_id":77531751,"body_markdown":"&gt; Upon selecting &#39;Register&#39; in the terminal when running the client code, the system only displays &quot;Registering with the system...&quot; without allowing any input for the registration details.\r\n&gt;\r\n&gt;   \r\n&gt; I attempted to implement a client-server application for an online banking system. When I ran the client and chose the &#39;Register&#39; option, I expected to be prompted to input registration details like name, email, password, etc., but instead, the terminal just displayed &quot;Registering with the system...&quot; without allowing me to input any details.\r\n\r\n&gt;   \r\n&gt; Client side\r\n\r\n```\r\nimport java.io.*;\r\nimport java.net.Socket;\r\nimport java.util.Scanner;\r\n\r\npublic class Client {\r\n    public static void main(String[] args) {\r\n        try (Scanner input = new Scanner(System.in)) {\r\n            Socket clientSocket;\r\n            PrintWriter out;\r\n            BufferedReader in;\r\n            String message;\r\n            String option;\r\n\r\n            clientSocket = new Socket(&quot;127.0.0.1&quot;, 8080);\r\n            out = new PrintWriter(clientSocket.getOutputStream(), true);\r\n            in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n\r\n            while (true) {\r\n                message = in.readLine();\r\n                System.out.println(message);\r\n\r\n                option = input.nextLine();\r\n                out.println(option);\r\n\r\n                if (option.equals(&quot;1&quot;)) {\r\n                    registerUser(input, out, in);\r\n                    break;\r\n                } else if (option.equals(&quot;2&quot;)) {\r\n                    // Implement login functionality here\r\n                    break;\r\n                } else if (option.equals(&quot;9&quot;)) {\r\n                    System.out.println(&quot;Goodbye!&quot;);\r\n                    break;\r\n                } else {\r\n                    System.out.println(&quot;Invalid option selected.&quot;);\r\n                }\r\n            }\r\n\r\n            clientSocket.close(); // Close the connection after finishing the conversation\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static void registerUser(Scanner input, PrintWriter out, BufferedReader in) {\r\n        try {\r\n            sendMessage(out, &quot;Enter name:&quot;);\r\n            String name = input.nextLine();\r\n            out.println(name);\r\n\r\n            sendMessage(out, &quot;Enter PPS number:&quot;);\r\n            String ppsNumber = input.nextLine();\r\n            out.println(ppsNumber);\r\n\r\n            sendMessage(out, &quot;Enter email:&quot;);\r\n            String email = input.nextLine();\r\n            out.println(email);\r\n\r\n            sendMessage(out, &quot;Enter password:&quot;);\r\n            String password = input.nextLine();\r\n            out.println(password);\r\n\r\n            sendMessage(out, &quot;Enter address:&quot;);\r\n            String address = input.nextLine();\r\n            out.println(address);\r\n\r\n            // Server will handle the registration logic and respond with registration status\r\n            String registrationStatus = in.readLine();\r\n            System.out.println(registrationStatus);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static void sendMessage(PrintWriter out, String msg) {\r\n        out.println(msg);\r\n    }\r\n}\r\n```\r\n\r\n&gt; Server Side\r\n\r\n```\r\nimport java.io.*;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\nimport java.util.ArrayList;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\n\r\npublic class TCPServer {\r\n    private ServerSocket serverSocket;\r\n    private ConcurrentHashMap&lt;String, BankUser&gt; users;\r\n    private ArrayList&lt;Transaction&gt; transactions;\r\n    private BufferedReader in;\r\n    private PrintWriter out;\r\n\r\n    public TCPServer(int port) {\r\n        try {\r\n            serverSocket = new ServerSocket(port);\r\n            users = new ConcurrentHashMap&lt;&gt;();\r\n            transactions = new ArrayList&lt;&gt;();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void startServer() {\r\n        System.out.println(&quot;Server started. Waiting for connections...&quot;);\r\n        try {\r\n            while (true) {\r\n                Socket clientSocket = serverSocket.accept();\r\n                out = new PrintWriter(clientSocket.getOutputStream(), true);\r\n                in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n                handleBankingOperations(clientSocket);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        int portNumber = 8080;\r\n        TCPServer server = new TCPServer(portNumber);\r\n        server.startServer();\r\n    }\r\n\r\n    public void handleBankingOperations(Socket clientSocket) {\r\n        try {\r\n            boolean isAuthenticated = false;\r\nBankUser loggedInUser = null;\r\n\r\nwhile (true) {\r\n    sendMessage(&quot;Please enter 1 to Register with the system\\nPlease enter 2 to Log in to the online banking system\\nPlease enter 9 to Quit&quot;);\r\n    String userInput = in.readLine();\r\n\r\n    if (userInput.equals(&quot;1&quot;)) {\r\n        registerUser();\r\n    } else if (userInput.equals(&quot;2&quot;)) {\r\n        sendMessage(&quot;Enter email:&quot;);\r\n        String email = in.readLine();\r\n        sendMessage(&quot;Enter password:&quot;);\r\n        String password = in.readLine();\r\n\r\n        loggedInUser = loginUser(email, password);\r\n        if (loggedInUser != null) {\r\n            isAuthenticated = true;\r\n            sendMessage(&quot;Login successful!&quot;);\r\n        } else {\r\n            sendMessage(&quot;Login failed. Please try again.&quot;);\r\n        }\r\n    } else if (userInput.equals(&quot;9&quot;)) {\r\n        sendMessage(&quot;Goodbye!&quot;);\r\n        break;\r\n    } else {\r\n        sendMessage(&quot;Invalid option. Please try again.&quot;);\r\n    }\r\n\r\n    if (isAuthenticated) {\r\n        break; // Break from the initial loop after successful authentication\r\n    }\r\n}\r\n\r\n// Ensure authentication was successful before proceeding\r\nif (isAuthenticated) {\r\n    while (true) {\r\n        sendMessage(&quot;Please enter 1 to Register with the system\\nPlease enter 2 to Log in to the online banking system\\nPlease enter 9 to Quit&quot;);\r\n        String userInput = in.readLine();\r\n        System.out.println(&quot;Received user input: &quot; + userInput);\r\n\r\n        if (userInput.equals(&quot;1&quot;)) {\r\n            System.out.println(&quot;User selected option 1: Register&quot;);\r\n            registerUser();\r\n        } else if (userInput.equals(&quot;2&quot;)) {\r\n            System.out.println(&quot;User selected option 2: Login&quot;);\r\n            // ... (existing code remains unchanged)\r\n        } else if (userInput.equals(&quot;9&quot;)) {\r\n            sendMessage(&quot;Goodbye!&quot;);\r\n            System.out.println(&quot;User selected option 9: Quit&quot;);\r\n            break;\r\n        } else {\r\n            sendMessage(&quot;Invalid option. Please try again.&quot;);\r\n            System.out.println(&quot;Invalid option: &quot; + userInput);\r\n        }\r\n    }\r\n}\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            try {\r\n                in.close();\r\n                out.close();\r\n                clientSocket.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void registerUser() {\r\n        try {\r\n            sendMessage(&quot;Enter name:&quot;);\r\n            String name = in.readLine();\r\n\r\n            sendMessage(&quot;Enter PPS number:&quot;);\r\n            String ppsNumber = in.readLine();\r\n\r\n            sendMessage(&quot;Enter email:&quot;);\r\n            String email = in.readLine();\r\n\r\n            sendMessage(&quot;Enter password:&quot;);\r\n            String password = in.readLine();\r\n\r\n            sendMessage(&quot;Enter address:&quot;);\r\n            String address = in.readLine();\r\n\r\n            double initialBalance = 0.0;\r\n\r\n            BankUser newUser = new BankUser(name, ppsNumber, email, password, address, initialBalance);\r\n            users.putIfAbsent(email, newUser);\r\n\r\n            sendMessage(&quot;User registered successfully!&quot;);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private BankUser loginUser(String email, String password) {\r\n        BankUser user = users.get(email);\r\n        if (user != null &amp;&amp; user.getPassword().equals(password)) {\r\n            return user;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private void lodgeMoney(BankUser user) {\r\n        try {\r\n            sendMessage(&quot;Enter amount to lodge:&quot;);\r\n            double amount = Double.parseDouble(in.readLine());\r\n\r\n            user.deposit(amount);\r\n\r\n            Transaction transaction = new Transaction(user, &quot;Lodged money&quot;, amount);\r\n            transactions.add(transaction);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void retrieveAllUsers() {\r\n        // Logic to retrieve and display all registered users\r\n    }\r\n\r\n    private void transferMoney(BankUser sender) {\r\n        try {\r\n            sendMessage(&quot;Enter recipient&#39;s email:&quot;);\r\n            String recipientEmail = in.readLine();\r\n            BankUser recipient = users.get(recipientEmail);\r\n\r\n            if (recipient != null) {\r\n                sendMessage(&quot;Enter amount to transfer:&quot;);\r\n                double amount = Double.parseDouble(in.readLine());\r\n\r\n                if (sender.getBalance() &gt;= amount) {\r\n                    sender.withdraw(amount);\r\n                    recipient.deposit(amount);\r\n\r\n                    Transaction transaction = new Transaction(sender, recipient, &quot;Transferred money&quot;, amount);\r\n                    transactions.add(transaction);\r\n                } else {\r\n                    sendMessage(&quot;Insufficient funds for transfer.&quot;);\r\n                }\r\n            } else {\r\n                sendMessage(&quot;Recipient not found.&quot;);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void viewAllTransactions() {\r\n        // Logic to view all transactions\r\n    }\r\n\r\n    private void updateUserPassword(BankUser user) {\r\n        try {\r\n            sendMessage(&quot;Enter new password:&quot;);\r\n            String newPassword = in.readLine();\r\n\r\n            user.setPassword(newPassword);\r\n\r\n            sendMessage(&quot;Password updated successfully!&quot;);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void sendMessage(String msg) {\r\n        out.println(msg);\r\n    }\r\n}\r\n```","title":"Client-side Issue: Unable to Input Registration Details After Choosing &#39;Register&#39; Option in Terminal","body":"<blockquote>\n<p>Upon selecting 'Register' in the terminal when running the client code, the system only displays &quot;Registering with the system...&quot; without allowing any input for the registration details.</p>\n<p>I attempted to implement a client-server application for an online banking system. When I ran the client and chose the 'Register' option, I expected to be prompted to input registration details like name, email, password, etc., but instead, the terminal just displayed &quot;Registering with the system...&quot; without allowing me to input any details.</p>\n</blockquote>\n<blockquote>\n<p>Client side</p>\n</blockquote>\n<pre><code>import java.io.*;\nimport java.net.Socket;\nimport java.util.Scanner;\n\npublic class Client {\n    public static void main(String[] args) {\n        try (Scanner input = new Scanner(System.in)) {\n            Socket clientSocket;\n            PrintWriter out;\n            BufferedReader in;\n            String message;\n            String option;\n\n            clientSocket = new Socket(&quot;127.0.0.1&quot;, 8080);\n            out = new PrintWriter(clientSocket.getOutputStream(), true);\n            in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n\n            while (true) {\n                message = in.readLine();\n                System.out.println(message);\n\n                option = input.nextLine();\n                out.println(option);\n\n                if (option.equals(&quot;1&quot;)) {\n                    registerUser(input, out, in);\n                    break;\n                } else if (option.equals(&quot;2&quot;)) {\n                    // Implement login functionality here\n                    break;\n                } else if (option.equals(&quot;9&quot;)) {\n                    System.out.println(&quot;Goodbye!&quot;);\n                    break;\n                } else {\n                    System.out.println(&quot;Invalid option selected.&quot;);\n                }\n            }\n\n            clientSocket.close(); // Close the connection after finishing the conversation\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static void registerUser(Scanner input, PrintWriter out, BufferedReader in) {\n        try {\n            sendMessage(out, &quot;Enter name:&quot;);\n            String name = input.nextLine();\n            out.println(name);\n\n            sendMessage(out, &quot;Enter PPS number:&quot;);\n            String ppsNumber = input.nextLine();\n            out.println(ppsNumber);\n\n            sendMessage(out, &quot;Enter email:&quot;);\n            String email = input.nextLine();\n            out.println(email);\n\n            sendMessage(out, &quot;Enter password:&quot;);\n            String password = input.nextLine();\n            out.println(password);\n\n            sendMessage(out, &quot;Enter address:&quot;);\n            String address = input.nextLine();\n            out.println(address);\n\n            // Server will handle the registration logic and respond with registration status\n            String registrationStatus = in.readLine();\n            System.out.println(registrationStatus);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static void sendMessage(PrintWriter out, String msg) {\n        out.println(msg);\n    }\n}\n</code></pre>\n<blockquote>\n<p>Server Side</p>\n</blockquote>\n<pre><code>import java.io.*;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.concurrent.ConcurrentHashMap;\n\npublic class TCPServer {\n    private ServerSocket serverSocket;\n    private ConcurrentHashMap&lt;String, BankUser&gt; users;\n    private ArrayList&lt;Transaction&gt; transactions;\n    private BufferedReader in;\n    private PrintWriter out;\n\n    public TCPServer(int port) {\n        try {\n            serverSocket = new ServerSocket(port);\n            users = new ConcurrentHashMap&lt;&gt;();\n            transactions = new ArrayList&lt;&gt;();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public void startServer() {\n        System.out.println(&quot;Server started. Waiting for connections...&quot;);\n        try {\n            while (true) {\n                Socket clientSocket = serverSocket.accept();\n                out = new PrintWriter(clientSocket.getOutputStream(), true);\n                in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n                handleBankingOperations(clientSocket);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args) {\n        int portNumber = 8080;\n        TCPServer server = new TCPServer(portNumber);\n        server.startServer();\n    }\n\n    public void handleBankingOperations(Socket clientSocket) {\n        try {\n            boolean isAuthenticated = false;\nBankUser loggedInUser = null;\n\nwhile (true) {\n    sendMessage(&quot;Please enter 1 to Register with the system\\nPlease enter 2 to Log in to the online banking system\\nPlease enter 9 to Quit&quot;);\n    String userInput = in.readLine();\n\n    if (userInput.equals(&quot;1&quot;)) {\n        registerUser();\n    } else if (userInput.equals(&quot;2&quot;)) {\n        sendMessage(&quot;Enter email:&quot;);\n        String email = in.readLine();\n        sendMessage(&quot;Enter password:&quot;);\n        String password = in.readLine();\n\n        loggedInUser = loginUser(email, password);\n        if (loggedInUser != null) {\n            isAuthenticated = true;\n            sendMessage(&quot;Login successful!&quot;);\n        } else {\n            sendMessage(&quot;Login failed. Please try again.&quot;);\n        }\n    } else if (userInput.equals(&quot;9&quot;)) {\n        sendMessage(&quot;Goodbye!&quot;);\n        break;\n    } else {\n        sendMessage(&quot;Invalid option. Please try again.&quot;);\n    }\n\n    if (isAuthenticated) {\n        break; // Break from the initial loop after successful authentication\n    }\n}\n\n// Ensure authentication was successful before proceeding\nif (isAuthenticated) {\n    while (true) {\n        sendMessage(&quot;Please enter 1 to Register with the system\\nPlease enter 2 to Log in to the online banking system\\nPlease enter 9 to Quit&quot;);\n        String userInput = in.readLine();\n        System.out.println(&quot;Received user input: &quot; + userInput);\n\n        if (userInput.equals(&quot;1&quot;)) {\n            System.out.println(&quot;User selected option 1: Register&quot;);\n            registerUser();\n        } else if (userInput.equals(&quot;2&quot;)) {\n            System.out.println(&quot;User selected option 2: Login&quot;);\n            // ... (existing code remains unchanged)\n        } else if (userInput.equals(&quot;9&quot;)) {\n            sendMessage(&quot;Goodbye!&quot;);\n            System.out.println(&quot;User selected option 9: Quit&quot;);\n            break;\n        } else {\n            sendMessage(&quot;Invalid option. Please try again.&quot;);\n            System.out.println(&quot;Invalid option: &quot; + userInput);\n        }\n    }\n}\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                in.close();\n                out.close();\n                clientSocket.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    private void registerUser() {\n        try {\n            sendMessage(&quot;Enter name:&quot;);\n            String name = in.readLine();\n\n            sendMessage(&quot;Enter PPS number:&quot;);\n            String ppsNumber = in.readLine();\n\n            sendMessage(&quot;Enter email:&quot;);\n            String email = in.readLine();\n\n            sendMessage(&quot;Enter password:&quot;);\n            String password = in.readLine();\n\n            sendMessage(&quot;Enter address:&quot;);\n            String address = in.readLine();\n\n            double initialBalance = 0.0;\n\n            BankUser newUser = new BankUser(name, ppsNumber, email, password, address, initialBalance);\n            users.putIfAbsent(email, newUser);\n\n            sendMessage(&quot;User registered successfully!&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private BankUser loginUser(String email, String password) {\n        BankUser user = users.get(email);\n        if (user != null &amp;&amp; user.getPassword().equals(password)) {\n            return user;\n        }\n        return null;\n    }\n\n    private void lodgeMoney(BankUser user) {\n        try {\n            sendMessage(&quot;Enter amount to lodge:&quot;);\n            double amount = Double.parseDouble(in.readLine());\n\n            user.deposit(amount);\n\n            Transaction transaction = new Transaction(user, &quot;Lodged money&quot;, amount);\n            transactions.add(transaction);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void retrieveAllUsers() {\n        // Logic to retrieve and display all registered users\n    }\n\n    private void transferMoney(BankUser sender) {\n        try {\n            sendMessage(&quot;Enter recipient's email:&quot;);\n            String recipientEmail = in.readLine();\n            BankUser recipient = users.get(recipientEmail);\n\n            if (recipient != null) {\n                sendMessage(&quot;Enter amount to transfer:&quot;);\n                double amount = Double.parseDouble(in.readLine());\n\n                if (sender.getBalance() &gt;= amount) {\n                    sender.withdraw(amount);\n                    recipient.deposit(amount);\n\n                    Transaction transaction = new Transaction(sender, recipient, &quot;Transferred money&quot;, amount);\n                    transactions.add(transaction);\n                } else {\n                    sendMessage(&quot;Insufficient funds for transfer.&quot;);\n                }\n            } else {\n                sendMessage(&quot;Recipient not found.&quot;);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void viewAllTransactions() {\n        // Logic to view all transactions\n    }\n\n    private void updateUserPassword(BankUser user) {\n        try {\n            sendMessage(&quot;Enter new password:&quot;);\n            String newPassword = in.readLine();\n\n            user.setPassword(newPassword);\n\n            sendMessage(&quot;Password updated successfully!&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void sendMessage(String msg) {\n        out.println(msg);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110989,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":1,"up_vote_count":68,"is_accepted":true,"score":67,"last_activity_date":1688753427,"creation_date":1452409771,"answer_id":34702982,"question_id":34702252,"body_markdown":"No, I don&#39;t think it&#39;s OK.\r\n\r\nWhile a `List` is guaranteed to be an `Iterable` an `Iterable` may not be a `List`. This means that if you do cast an `Iterable` to a `List` it may fail at runtime. Even if it works, there&#39;s no guarantee that it will continue to work in the future as it could change in new versions of Spring Data JPA without breaking the interface&#39;s contract.\r\n\r\nInstead of using a cast, you should declare your own query methods that return `List`.\r\n\r\nAlternatively you may use `Streamable.of(iterable).toList()` for doing the conversion. [This answer][1] also contains some background why `Iterable` was chosen as the return type for these methods.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/67413334/66686","title":"Spring-Data JPA CrudRepository returns Iterable, is it OK to cast this to List?","body":"<p>No, I don't think it's OK.</p>\n<p>While a <code>List</code> is guaranteed to be an <code>Iterable</code> an <code>Iterable</code> may not be a <code>List</code>. This means that if you do cast an <code>Iterable</code> to a <code>List</code> it may fail at runtime. Even if it works, there's no guarantee that it will continue to work in the future as it could change in new versions of Spring Data JPA without breaking the interface's contract.</p>\n<p>Instead of using a cast, you should declare your own query methods that return <code>List</code>.</p>\n<p>Alternatively you may use <code>Streamable.of(iterable).toList()</code> for doing the conversion. <a href=\"https://stackoverflow.com/a/67413334/66686\">This answer</a> also contains some background why <code>Iterable</code> was chosen as the return type for these methods.</p>\n"},{"tags":[],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"down_vote_count":1,"up_vote_count":137,"is_accepted":false,"score":136,"last_activity_date":1452419248,"creation_date":1452419248,"answer_id":34704058,"question_id":34702252,"body_markdown":"You mentioned `[spring-data-jpa]` so i guess you use JPA. In this case use [`JpaRepository`][1] instead of `CrudRepository` where the methods return `List`&#39;s like you want it.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html","title":"Spring-Data JPA CrudRepository returns Iterable, is it OK to cast this to List?","body":"<p>You mentioned <code>[spring-data-jpa]</code> so i guess you use JPA. In this case use <a href=\"http://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\"><code>JpaRepository</code></a> instead of <code>CrudRepository</code> where the methods return <code>List</code>'s like you want it.</p>\n"},{"tags":[],"owner":{"account_id":12295410,"reputation":621,"user_id":8971198,"display_name":"Biga"},"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1530046878,"creation_date":1530046878,"answer_id":51051312,"question_id":34702252,"body_markdown":"Your interface can still extends the *CrudRepository*, you can just add a new method findAll returning a list. Like example below:\r\n\r\n    @Repository\r\n    public interface DataRepository extends CrudRepository&lt;Data, Long&gt; {\r\n\r\n        @Override\r\n        List&lt;Data&gt; findAll();\r\n\r\n    }\r\n\r\nIf you have an &quot;abstract&quot; repository to be extended by all your repositories, you can add this method too, so it will has effect to all your repositories. Like example below:\r\n\r\n\r\n    @NoRepositoryBean\r\n    public interface GenericRepository&lt;T&gt; extends CrudRepository&lt;T, Long&gt; {\r\n\r\n        @Override\r\n        List&lt;T&gt; findAll();\r\n\r\n    }\r\n\r\n","title":"Spring-Data JPA CrudRepository returns Iterable, is it OK to cast this to List?","body":"<p>Your interface can still extends the <em>CrudRepository</em>, you can just add a new method findAll returning a list. Like example below:</p>\n\n<pre><code>@Repository\npublic interface DataRepository extends CrudRepository&lt;Data, Long&gt; {\n\n    @Override\n    List&lt;Data&gt; findAll();\n\n}\n</code></pre>\n\n<p>If you have an \"abstract\" repository to be extended by all your repositories, you can add this method too, so it will has effect to all your repositories. Like example below:</p>\n\n<pre><code>@NoRepositoryBean\npublic interface GenericRepository&lt;T&gt; extends CrudRepository&lt;T, Long&gt; {\n\n    @Override\n    List&lt;T&gt; findAll();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":255080,"reputation":15519,"user_id":534877,"accept_rate":65,"display_name":"Robert Niestroj"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1645523944,"creation_date":1645523944,"answer_id":71219216,"question_id":34702252,"body_markdown":"Starting from Spring Data 3 there is another option: `ListCrudRepository`. \r\n\r\nThis blog post covers why `CrudRepository` chose `Iterable` instead of `List`. \r\n\r\nhttps://spring.io/blog/2022/02/22/announcing-listcrudrepository-friends-for-spring-data-3-0","title":"Spring-Data JPA CrudRepository returns Iterable, is it OK to cast this to List?","body":"<p>Starting from Spring Data 3 there is another option: <code>ListCrudRepository</code>.</p>\n<p>This blog post covers why <code>CrudRepository</code> chose <code>Iterable</code> instead of <code>List</code>.</p>\n<p><a href=\"https://spring.io/blog/2022/02/22/announcing-listcrudrepository-friends-for-spring-data-3-0\" rel=\"noreferrer\">https://spring.io/blog/2022/02/22/announcing-listcrudrepository-friends-for-spring-data-3-0</a></p>\n"},{"tags":[],"owner":{"account_id":3581078,"reputation":374,"user_id":2989287,"display_name":"Wheelchair Geek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658674401,"creation_date":1658674401,"answer_id":73099457,"question_id":34702252,"body_markdown":"Hi I know I am late to the party here but if you want to convert an Iterable to a Collection you can do it this way. \r\n\r\n    private &lt;T&gt; Collection&lt;T&gt; map(final Iterable&lt;T&gt; iterable) {\r\n    \t\treturn StreamSupport.stream(iterable.spliterator(), false)\r\n    \t\t\t\t\t\t\t.collect(Collectors.toCollection(HashSet::new));\r\n    \t}\r\nAfter that, du can get a List by .stream().toList(); on the Collection. Hope it helps ","title":"Spring-Data JPA CrudRepository returns Iterable, is it OK to cast this to List?","body":"<p>Hi I know I am late to the party here but if you want to convert an Iterable to a Collection you can do it this way.</p>\n<pre><code>private &lt;T&gt; Collection&lt;T&gt; map(final Iterable&lt;T&gt; iterable) {\n        return StreamSupport.stream(iterable.spliterator(), false)\n                            .collect(Collectors.toCollection(HashSet::new));\n    }\n</code></pre>\n<p>After that, du can get a List by .stream().toList(); on the Collection. Hope it helps</p>\n"},{"tags":[],"owner":{"account_id":20858204,"reputation":81,"user_id":17176420,"display_name":"Christian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661847085,"creation_date":1661847085,"answer_id":73539117,"question_id":34702252,"body_markdown":"Simply, you can make your repository to extend JpaRepository not CrudRepository. This will work perfectly. Here findAll returns a List not an Iterable.","title":"Spring-Data JPA CrudRepository returns Iterable, is it OK to cast this to List?","body":"<p>Simply, you can make your repository to extend JpaRepository not CrudRepository. This will work perfectly. Here findAll returns a List not an Iterable.</p>\n"},{"tags":[],"owner":{"account_id":1323279,"reputation":787,"user_id":1268630,"accept_rate":42,"display_name":"ErEcTuS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700671365,"creation_date":1700671365,"answer_id":77531744,"question_id":34702252,"body_markdown":"I don&#39;t know if this can help anyone in the future, but in your @Repository inteface, you could extend *ListCrudRepository* instead of *CrudRepository*\r\n\r\n    public interface StudentRepository extends ListCrudRepository&lt;student, Integer&gt; {\r\n    }\r\n\r\nThen in your controller you can just get a List:\r\n\r\n        @GetMapping(&quot;&quot;)\r\n        List&lt;student&gt; findAll() {\r\n            return studentRepository.findAll();\r\n        }","title":"Spring-Data JPA CrudRepository returns Iterable, is it OK to cast this to List?","body":"<p>I don't know if this can help anyone in the future, but in your @Repository inteface, you could extend <em>ListCrudRepository</em> instead of <em>CrudRepository</em></p>\n<pre><code>public interface StudentRepository extends ListCrudRepository&lt;student, Integer&gt; {\n}\n</code></pre>\n<p>Then in your controller you can just get a List:</p>\n<pre><code>    @GetMapping(&quot;&quot;)\n    List&lt;student&gt; findAll() {\n        return studentRepository.findAll();\n    }\n</code></pre>\n"}],"owner":{"account_id":5439978,"reputation":1863,"user_id":4328316,"accept_rate":67,"display_name":"james_s_tayler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79533,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"accepted_answer_id":34702982,"answer_count":7,"score":55,"last_activity_date":1700671365,"creation_date":1452402091,"question_id":34702252,"body_markdown":"I&#39;m writing a code-gen tool to generate backend wiring code for Spring Boot applications using Spring Data JPA and it&#39;s mildly annoying me that the methods in the `CrudRepository` return `Iterable` rather than `List`, as `Iterable` doesn&#39;t provide quite enough functionality, but `List` does, so I&#39;m looking for the best way to convert the `Iterable` into a `List`.\r\n\r\nI saw [this post](https://stackoverflow.com/questions/6416706/easy-way-to-change-iterable-into-collection) on changing an `Iterable` to a `Collection` and I was wondering, rather than using a library like Guava or implementing my own function to do the conversion, why not just cast it to `List`? Is there something wrong with doing that that I don&#39;t know about?\r\n\r\n**Edit**:\r\nI ask because since it&#39;s a code-gen tool it&#39;s not reasonable to make it generate code that introduces dependencies on 3rd party libraries, and writing my own function to do the conversion also isn&#39;t really reasonable because it would have to live somewhere and I&#39;d rather not have that in the generated code. A simple cast will work, if a little ugly, but just wondered if there&#39;s something I&#39;m missing?","title":"Spring-Data JPA CrudRepository returns Iterable, is it OK to cast this to List?","body":"<p>I'm writing a code-gen tool to generate backend wiring code for Spring Boot applications using Spring Data JPA and it's mildly annoying me that the methods in the <code>CrudRepository</code> return <code>Iterable</code> rather than <code>List</code>, as <code>Iterable</code> doesn't provide quite enough functionality, but <code>List</code> does, so I'm looking for the best way to convert the <code>Iterable</code> into a <code>List</code>.</p>\n<p>I saw <a href=\"https://stackoverflow.com/questions/6416706/easy-way-to-change-iterable-into-collection\">this post</a> on changing an <code>Iterable</code> to a <code>Collection</code> and I was wondering, rather than using a library like Guava or implementing my own function to do the conversion, why not just cast it to <code>List</code>? Is there something wrong with doing that that I don't know about?</p>\n<p><strong>Edit</strong>:\nI ask because since it's a code-gen tool it's not reasonable to make it generate code that introduces dependencies on 3rd party libraries, and writing my own function to do the conversion also isn't really reasonable because it would have to live somewhere and I'd rather not have that in the generated code. A simple cast will work, if a little ugly, but just wondered if there's something I'm missing?</p>\n"},{"tags":["java","migration","pdf-generation","pdf-reactor"],"owner":{"account_id":1533946,"reputation":944,"user_id":1430463,"accept_rate":80,"display_name":"Valeriane"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700670918,"creation_date":1700670549,"question_id":77531652,"body_markdown":"In my project I&#39;m using pdfreactor for generating PDF from HTML file.\r\n\r\nI migrated my project pdfreactor from java 8 -&gt; 17\r\n\r\nEverything is ok, except, code js (into my .html) doesnot executes.\r\n(My script js add class attributes to any tag)\r\n\r\nIs this security problem?\r\n\r\nI enable JS in my config by :\r\n\r\n    setJavaScriptSettings(new Configuration.JavaScriptSettings().setEnabled(true));\r\n\r\nbut It does not works\r\n","title":"Javascript not executed by pdfreactor","body":"<p>In my project I'm using pdfreactor for generating PDF from HTML file.</p>\n<p>I migrated my project pdfreactor from java 8 -&gt; 17</p>\n<p>Everything is ok, except, code js (into my .html) doesnot executes.\n(My script js add class attributes to any tag)</p>\n<p>Is this security problem?</p>\n<p>I enable JS in my config by :</p>\n<pre><code>setJavaScriptSettings(new Configuration.JavaScriptSettings().setEnabled(true));\n</code></pre>\n<p>but It does not works</p>\n"},{"tags":["java","spring-boot","hibernate","kotlin","oracle11g"],"answers":[{"tags":[],"owner":{"account_id":1635690,"reputation":150022,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700641489,"creation_date":1700640676,"answer_id":77528262,"question_id":77527739,"body_markdown":"You define the query using:\r\n\r\n```lang-java\r\n@Query(\r\n  nativeQuery = true,\r\n  value = &quot;SELECT PALT_I &quot; +\r\n          &quot;FROM RSV_PALT &quot; +\r\n          &quot;WHERE (:whereClause) AND STAT_C NOT IN (&#39;PL&#39;, &#39;CN&#39;) &quot; +\r\n          &quot;ORDER BY PALT_I &quot;\r\n)\r\nfun getContainers(\r\n  @Param(&quot;whereClause&quot;) whereClause: String\r\n): List&lt;TableName&gt;\r\n```\r\n\r\nThe bind variable `:whereClause` is a placeholder for a single scalar value which is passed directly to the database and is not used to build the query as part of a template string.\r\n\r\nTherefore, when the database evaluates the string it is the equivalent of evaluating:\r\n\r\n```lang-sql\r\nSELECT PALT_I\r\nFROM   RSV_PALT\r\nWHERE  (&#39;some text&#39;)\r\nAND    STAT_C NOT IN (&#39;PL&#39;, &#39;CN&#39;)\r\nORDER BY PALT_I\r\n```\r\n\r\nand `WHERE (&#39;some text&#39;)` is an invalid SQL expression as it is missing a relational operator because the database is expecting `WHERE (&#39;some text&#39; = &#39;some other text&#39;)`.\r\n\r\nTo fix it you need to generate the dynamic query text as part of the string and use bind variables to pass only values into the query and not trying to add the dynamic part of the query using bind variables.\r\n\r\nSomething like:\r\n\r\n```lang-java\r\n@Query(\r\n  nativeQuery = true,\r\n  value = &quot;SELECT PALT_I &quot; +\r\n          &quot;FROM   RSV_PALT &quot; +\r\n          &quot;WHERE  (DEPT_I = :departmentId OR :departmentId IS NULL) &quot; +\r\n          &quot;AND    (CLASS_I = :classId OR :classId IS NULL) &quot; +\r\n          &quot;AND    (ITEM_I = :itemId OR :itemId IS NULL) &quot;+\r\n          &quot;AND    STAT_C NOT IN (&#39;PL&#39;, &#39;CN&#39;) &quot; +\r\n          &quot;ORDER BY PALT_I &quot;\r\n)\r\n```\r\n\r\nand then always pass `departmentId`, `classId` and `itemId` into the query but pass `NULL` values when you do not want to filter on them.","title":"where clause queryString giving SQL Error: 920, SQLState: 42000 in Oracle DB","body":"<p>You define the query using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(\n  nativeQuery = true,\n  value = &quot;SELECT PALT_I &quot; +\n          &quot;FROM RSV_PALT &quot; +\n          &quot;WHERE (:whereClause) AND STAT_C NOT IN ('PL', 'CN') &quot; +\n          &quot;ORDER BY PALT_I &quot;\n)\nfun getContainers(\n  @Param(&quot;whereClause&quot;) whereClause: String\n): List&lt;TableName&gt;\n</code></pre>\n<p>The bind variable <code>:whereClause</code> is a placeholder for a single scalar value which is passed directly to the database and is not used to build the query as part of a template string.</p>\n<p>Therefore, when the database evaluates the string it is the equivalent of evaluating:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT PALT_I\nFROM   RSV_PALT\nWHERE  ('some text')\nAND    STAT_C NOT IN ('PL', 'CN')\nORDER BY PALT_I\n</code></pre>\n<p>and <code>WHERE ('some text')</code> is an invalid SQL expression as it is missing a relational operator because the database is expecting <code>WHERE ('some text' = 'some other text')</code>.</p>\n<p>To fix it you need to generate the dynamic query text as part of the string and use bind variables to pass only values into the query and not trying to add the dynamic part of the query using bind variables.</p>\n<p>Something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(\n  nativeQuery = true,\n  value = &quot;SELECT PALT_I &quot; +\n          &quot;FROM   RSV_PALT &quot; +\n          &quot;WHERE  (DEPT_I = :departmentId OR :departmentId IS NULL) &quot; +\n          &quot;AND    (CLASS_I = :classId OR :classId IS NULL) &quot; +\n          &quot;AND    (ITEM_I = :itemId OR :itemId IS NULL) &quot;+\n          &quot;AND    STAT_C NOT IN ('PL', 'CN') &quot; +\n          &quot;ORDER BY PALT_I &quot;\n)\n</code></pre>\n<p>and then always pass <code>departmentId</code>, <code>classId</code> and <code>itemId</code> into the query but pass <code>NULL</code> values when you do not want to filter on them.</p>\n"},{"tags":[],"owner":{"account_id":3449513,"reputation":243,"user_id":3534759,"accept_rate":75,"display_name":"user3534759"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700670527,"creation_date":1700670527,"answer_id":77531651,"question_id":77527739,"body_markdown":"I found out a way to do it.\r\n\r\n    @Repository\r\n    open class RepositoryClass @Autowired constructor(\r\n    private val entityManager: EntityManager) {\r\n\r\n    open fun getContainers(whereClause: String): List&lt;yourClass&gt; {\r\n        val nativeQuery = &quot;&quot;&quot;\r\n            SELECT PALT_I\r\n            FROM tableName\r\n            WHERE STAT_C NOT IN (&#39;A&#39;, &#39;B&#39;)\r\n            AND $whereClause\r\n            ORDER BY PALT_I\r\n        &quot;&quot;&quot;.trimIndent()\r\n\r\n        return entityManager.createNativeQuery(nativeQuery, yourClass::class.java).resultList as List&lt;yourClass&gt;\r\n    }\r\n}","title":"where clause queryString giving SQL Error: 920, SQLState: 42000 in Oracle DB","body":"<p>I found out a way to do it.</p>\n<pre><code>@Repository\nopen class RepositoryClass @Autowired constructor(\nprivate val entityManager: EntityManager) {\n\nopen fun getContainers(whereClause: String): List&lt;yourClass&gt; {\n    val nativeQuery = &quot;&quot;&quot;\n        SELECT PALT_I\n        FROM tableName\n        WHERE STAT_C NOT IN ('A', 'B')\n        AND $whereClause\n        ORDER BY PALT_I\n    &quot;&quot;&quot;.trimIndent()\n\n    return entityManager.createNativeQuery(nativeQuery, yourClass::class.java).resultList as List&lt;yourClass&gt;\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":3449513,"reputation":243,"user_id":3534759,"accept_rate":75,"display_name":"user3534759"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77528262,"answer_count":2,"score":1,"last_activity_date":1700670728,"creation_date":1700634695,"question_id":77527739,"body_markdown":"I have below code trying to fetch some data from Oracle DB tableName based on post request sent. \r\n\r\nI form query queryString using all post request inputs by appending over a loop, then send this queryString as whereClause parameter to Query in repository class.\r\n   \r\n    POST REQUEST:\r\n   \r\n    {\r\n      &quot;list&quot;: [&quot;002-02-0284&quot;,&quot;029-00-0100&quot;]\r\n    }\r\n\r\n    @PostMapping(“/fetch”)\r\n    fun sync(@RequestBody @Valid DataRequest: request): ResponseEntity&lt;SyncResponse&gt; {\r\n\r\n       val list = request.list\r\n\r\n       return ResponseEntity(service.getContainers(list), HttpStatus.ACCEPTED)\r\n    }\r\n\r\n\r\n      fun getContainers(list: List&lt;String&gt;){\r\n\r\n      val conditions = mutableListOf&lt;String&gt;()\r\n\r\n      for (item in list) {\r\n        val values = extractValues(item)\r\n        val departmentId = values[0]\r\n        val classId = values[1]\r\n        val itemId = values[2]\r\n        conditions.add(&quot;(DEPT_I = :departmentId AND CLASS_I = :classId AND ITEM_I = :itemId)&quot;)\r\n      }\r\n\r\n       val whereClause = conditions.joinToString(&quot; OR &quot;)\r\n\r\n       println(&quot;--&lt; whereClause --&gt; $whereClause&quot;)\r\n\r\n       val responseList = service.getContainers(whereClause)\r\n     }\r\n\r\n      fun extractValues(item: String): Array&lt;Int&gt; {\r\n         return item.split(&quot;-&quot;).map { it.toInt() }.toTypedArray()\r\n      }\r\n\r\n      fun getContainers(whereClause: String): List&lt;yourClass&gt; {\r\n        return repository.getContainers(queryString)\r\n      }\r\n\r\n    @Query(\r\n    nativeQuery = true,\r\n    value = &quot;SELECT PALT_I &quot; +\r\n        &quot;FROM tableName &quot; +\r\n        &quot;WHERE (:whereClause) AND STAT_C NOT IN (&#39;PL&#39;, &#39;CN&#39;) &quot; +\r\n        &quot;ORDER BY PALT_I &quot;\r\n      )\r\n      fun getContainers(\r\n      @param(&quot;whereClause&quot;) whereClause: String): List&lt;tableName&gt;\r\n\r\n\r\nI am seeing error as below\r\n\r\nHibernate: SELECT PALT_I, SIZE_C, AREA_C, DEPT_I, CLASS_I, ITEM_I, AISLE_I, BIN_I, LVL_I, PALT_UNIT_Q, AVAIL_PALT_UNIT_Q, PALT_PEND_POST_Q,PALT_PEND_PULL_Q, PALT_PEND_PTWY_Q, PULL_PALT_UNIT_Q, VCP_Q, SSP_Q, PALT_Q, CTN_PER_PALT_Q, EXPIRE_D, LOT_I, HOLD_STAT_C, STAT_C, MODF_USER_ID, MODF_PGM_N, MODF_TS FROM RSV_PALT WHERE (?) AND STAT_C NOT IN (&#39;PL&#39;, &#39;CN&#39;) ORDER BY PALT_I\r\n\r\nHibernate: select inventoryi0_.container_id as container_id1_6_0_, inventoryi0_.update_timestamp as update_timestamp2_6_0_ from inventory_in_progress inventoryi0_ where inventoryi0_.container_id=?\r\nHibernate: select inventoryi0_.container_id as container_id1_6_0_, inventoryi0_.update_timestamp as update_timestamp2_6_0_ from inventory_in_progress inventoryi0_ where inventoryi0_.container_id=?\r\n\r\n[WARN] 2023-11-22 11:25:42,993 http-nio-8080-exec-1 org.hibernate.engine.jdbc.spi.SqlExceptionHelper - {X-API-ID=3283db6f-ef50-4d04-be5b-45ed5751432d, X-CORRELATION-ID=3283db6f-ef50-4d04-be5b-45ed5751432d, team=Ole} - **SQL Error: 920, SQLState: 42000**\r\n\r\n[ERROR] 2023-11-22 11:25:42,994 http-nio-8080-exec-1 org.hibernate.engine.jdbc.spi.SqlExceptionHelper - {X-API-ID=3283db6f-ef50-4d04-be5b-45ed5751432d, X-CORRELATION-ID=3283db6f-ef50-4d04-be5b-45ed5751432d, team=Ole} - **ORA-00920: invalid relational operator**\r\n\r\nany help is greatly appreciated. Thank you.","title":"where clause queryString giving SQL Error: 920, SQLState: 42000 in Oracle DB","body":"<p>I have below code trying to fetch some data from Oracle DB tableName based on post request sent.</p>\n<p>I form query queryString using all post request inputs by appending over a loop, then send this queryString as whereClause parameter to Query in repository class.</p>\n<pre><code>POST REQUEST:\n\n{\n  &quot;list&quot;: [&quot;002-02-0284&quot;,&quot;029-00-0100&quot;]\n}\n\n@PostMapping(“/fetch”)\nfun sync(@RequestBody @Valid DataRequest: request): ResponseEntity&lt;SyncResponse&gt; {\n\n   val list = request.list\n\n   return ResponseEntity(service.getContainers(list), HttpStatus.ACCEPTED)\n}\n\n\n  fun getContainers(list: List&lt;String&gt;){\n\n  val conditions = mutableListOf&lt;String&gt;()\n\n  for (item in list) {\n    val values = extractValues(item)\n    val departmentId = values[0]\n    val classId = values[1]\n    val itemId = values[2]\n    conditions.add(&quot;(DEPT_I = :departmentId AND CLASS_I = :classId AND ITEM_I = :itemId)&quot;)\n  }\n\n   val whereClause = conditions.joinToString(&quot; OR &quot;)\n\n   println(&quot;--&lt; whereClause --&gt; $whereClause&quot;)\n\n   val responseList = service.getContainers(whereClause)\n }\n\n  fun extractValues(item: String): Array&lt;Int&gt; {\n     return item.split(&quot;-&quot;).map { it.toInt() }.toTypedArray()\n  }\n\n  fun getContainers(whereClause: String): List&lt;yourClass&gt; {\n    return repository.getContainers(queryString)\n  }\n\n@Query(\nnativeQuery = true,\nvalue = &quot;SELECT PALT_I &quot; +\n    &quot;FROM tableName &quot; +\n    &quot;WHERE (:whereClause) AND STAT_C NOT IN ('PL', 'CN') &quot; +\n    &quot;ORDER BY PALT_I &quot;\n  )\n  fun getContainers(\n  @param(&quot;whereClause&quot;) whereClause: String): List&lt;tableName&gt;\n</code></pre>\n<p>I am seeing error as below</p>\n<p>Hibernate: SELECT PALT_I, SIZE_C, AREA_C, DEPT_I, CLASS_I, ITEM_I, AISLE_I, BIN_I, LVL_I, PALT_UNIT_Q, AVAIL_PALT_UNIT_Q, PALT_PEND_POST_Q,PALT_PEND_PULL_Q, PALT_PEND_PTWY_Q, PULL_PALT_UNIT_Q, VCP_Q, SSP_Q, PALT_Q, CTN_PER_PALT_Q, EXPIRE_D, LOT_I, HOLD_STAT_C, STAT_C, MODF_USER_ID, MODF_PGM_N, MODF_TS FROM RSV_PALT WHERE (?) AND STAT_C NOT IN ('PL', 'CN') ORDER BY PALT_I</p>\n<p>Hibernate: select inventoryi0_.container_id as container_id1_6_0_, inventoryi0_.update_timestamp as update_timestamp2_6_0_ from inventory_in_progress inventoryi0_ where inventoryi0_.container_id=?\nHibernate: select inventoryi0_.container_id as container_id1_6_0_, inventoryi0_.update_timestamp as update_timestamp2_6_0_ from inventory_in_progress inventoryi0_ where inventoryi0_.container_id=?</p>\n<p>[WARN] 2023-11-22 11:25:42,993 http-nio-8080-exec-1 org.hibernate.engine.jdbc.spi.SqlExceptionHelper - {X-API-ID=3283db6f-ef50-4d04-be5b-45ed5751432d, X-CORRELATION-ID=3283db6f-ef50-4d04-be5b-45ed5751432d, team=Ole} - <strong>SQL Error: 920, SQLState: 42000</strong></p>\n<p>[ERROR] 2023-11-22 11:25:42,994 http-nio-8080-exec-1 org.hibernate.engine.jdbc.spi.SqlExceptionHelper - {X-API-ID=3283db6f-ef50-4d04-be5b-45ed5751432d, X-CORRELATION-ID=3283db6f-ef50-4d04-be5b-45ed5751432d, team=Ole} - <strong>ORA-00920: invalid relational operator</strong></p>\n<p>any help is greatly appreciated. Thank you.</p>\n"},{"tags":["java","encoding","xss","owasp","antixsslibrary"],"owner":{"account_id":6075630,"reputation":1,"user_id":7430759,"display_name":"Sangram G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700670457,"creation_date":1700647920,"question_id":77529012,"body_markdown":"How can I handle situations where the encoded value from the XSS filter implemented with org.owasp.encoder.Encode.forHtml(UserInput), needs to be decoded for specific use cases such as  populating HTML displays, displaying alert boxes, or filling text areas where single quotes and special characters.\r\n\r\nHow can I ensure that the encoded values from the XSS filter, which uses org.owasp.encoder.Encode.forHtml(UserInput), produce the expected output without encoding for various use cases across multiple screens, without having to manually include a decoding function on each page?\r\n\r\n\r\nWhat will be the correct way?\r\n\r\nI have tried with decoding functions for the particular variable value   using in java class or scriptlet\r\n  userinput= StringEscapeUtils.unescapeHtml4(unserinput);\r\n\r\nand in Javascript\r\n\r\n\t\tlet text = document.Form.textArea.value;\r\n\t\tlet textarea = document.createElement(&#39;textarea&#39;);\r\n\t\ttext = text.replace(/&amp;amp;#39;/g, String.fromCharCode(39)); // single quote\r\n\t \ttext = text.replace(/&amp;amp;#34;/g, String.fromCharCode(34)); // double quote\r\n\t        text = text.replace(/&amp;amp;gt;/g, String.fromCharCode(62)); // greater than\r\n\t        text = text.replace(/&amp;lt;/g, String.fromCharCode(60)); // less than\r\n\t        text = text.replace(/&amp;amp;/g, &#39;&amp;&#39;); // less than\r\n\t        textarea.innerHTML = text;\r\n\t\tdocument.Form.textArea.value=textarea.value;\r\n\r\n\r\nBut it is not possible to write at multiple pages or multiple places at frontend side since my application is vast and having more than 100 pages.\r\n\r\n\r\nSo what could be the possible ways?\r\n\t\t\r\n","title":"XSS Filter encoding and decoding","body":"<p>How can I handle situations where the encoded value from the XSS filter implemented with org.owasp.encoder.Encode.forHtml(UserInput), needs to be decoded for specific use cases such as  populating HTML displays, displaying alert boxes, or filling text areas where single quotes and special characters.</p>\n<p>How can I ensure that the encoded values from the XSS filter, which uses org.owasp.encoder.Encode.forHtml(UserInput), produce the expected output without encoding for various use cases across multiple screens, without having to manually include a decoding function on each page?</p>\n<p>What will be the correct way?</p>\n<p>I have tried with decoding functions for the particular variable value   using in java class or scriptlet\nuserinput= StringEscapeUtils.unescapeHtml4(unserinput);</p>\n<p>and in Javascript</p>\n<pre><code>    let text = document.Form.textArea.value;\n    let textarea = document.createElement('textarea');\n    text = text.replace(/&amp;amp;#39;/g, String.fromCharCode(39)); // single quote\n    text = text.replace(/&amp;amp;#34;/g, String.fromCharCode(34)); // double quote\n        text = text.replace(/&amp;amp;gt;/g, String.fromCharCode(62)); // greater than\n        text = text.replace(/&amp;lt;/g, String.fromCharCode(60)); // less than\n        text = text.replace(/&amp;amp;/g, '&amp;'); // less than\n        textarea.innerHTML = text;\n    document.Form.textArea.value=textarea.value;\n</code></pre>\n<p>But it is not possible to write at multiple pages or multiple places at frontend side since my application is vast and having more than 100 pages.</p>\n<p>So what could be the possible ways?</p>\n"},{"tags":["java","docker","datastax"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1683951391,"post_id":76241041,"comment_id":134448940,"body_markdown":"You need to get the logs from the container which failed to start, and see what the problem is. Does that version work if you start it yourself, in docker?","body":"You need to get the logs from the container which failed to start, and see what the problem is. Does that version work if you start it yourself, in docker?"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1683951928,"post_id":76241041,"comment_id":134448979,"body_markdown":"I believe you need to add `.withEnv(&quot;DS_LICENSE&quot;, &quot;accept&quot;)` to container build chain","body":"I believe you need to add <code>.withEnv(&quot;DS_LICENSE&quot;, &quot;accept&quot;)</code> to container build chain"},{"owner":{"account_id":24256934,"reputation":47,"user_id":18207142,"display_name":"Cris Manrique"},"score":0,"creation_date":1684030155,"post_id":76241041,"comment_id":134456385,"body_markdown":"@AndreyB.Panfilov That worked! How did you know? I didn&#39;t see any documentation for this anywhere ;(","body":"@AndreyB.Panfilov That worked! How did you know? I didn&#39;t see any documentation for this anywhere ;("},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1684030301,"post_id":76241041,"comment_id":134456394,"body_markdown":"that is mentioned in https://hub.docker.com/r/datastax/dse-server. `DS_LICENSE`: **Required**. Set to accept to acknowledge that you agree with the terms of the DataStax license. To show the license, set the variable `DS_LICENSE` to the value `accept`. **The image only starts if the variable set to accept**.","body":"that is mentioned in <a href=\"https://hub.docker.com/r/datastax/dse-server\" rel=\"nofollow noreferrer\">hub.docker.com/r/datastax/dse-server</a>. <code>DS_LICENSE</code>: <b>Required</b>. Set to accept to acknowledge that you agree with the terms of the DataStax license. To show the license, set the variable <code>DS_LICENSE</code> to the value <code>accept</code>. <b>The image only starts if the variable set to accept</b>."}],"answers":[{"tags":[],"owner":{"account_id":18073120,"reputation":1,"user_id":22966215,"display_name":"Maksym Pedych"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700670431,"creation_date":1700670213,"answer_id":77531622,"question_id":76241041,"body_markdown":"According to the [documentation][1], `DS_LICENSE=accept` environment variable has to be presented. \r\n\r\n&gt; Examples Create a DSE database container:\r\n&gt; `docker run -e DS_LICENSE=accept --name my-dse -d datastax/dse-server:&lt;version tag&gt;`\r\n\r\nTry the following approach:\r\n\r\n    DockerImageName myImage = DockerImageName.parse(&quot;artifactory.aexp.com/dockerproxy/datastax/dse-server:5.1.10&quot;)\r\n            .asCompatibleSubstituteFor(&quot;cassandra&quot;);\r\n\r\n    CassandraContainer cassandraContainer = new CassandraContainer&lt;&gt;(myImage)\r\n            .withEnv(&quot;DS_LICENSE&quot;, &quot;accept&quot;);\r\n\r\n    cassandraContainer.start();\r\n\r\n\r\n  [1]: https://hub.docker.com/r/datastax/dse-server","title":"How to set up test container with datastax enterprise cassandra?","body":"<p>According to the <a href=\"https://hub.docker.com/r/datastax/dse-server\" rel=\"nofollow noreferrer\">documentation</a>, <code>DS_LICENSE=accept</code> environment variable has to be presented.</p>\n<blockquote>\n<p>Examples Create a DSE database container:\n<code>docker run -e DS_LICENSE=accept --name my-dse -d datastax/dse-server:&lt;version tag&gt;</code></p>\n</blockquote>\n<p>Try the following approach:</p>\n<pre><code>DockerImageName myImage = DockerImageName.parse(&quot;artifactory.aexp.com/dockerproxy/datastax/dse-server:5.1.10&quot;)\n        .asCompatibleSubstituteFor(&quot;cassandra&quot;);\n\nCassandraContainer cassandraContainer = new CassandraContainer&lt;&gt;(myImage)\n        .withEnv(&quot;DS_LICENSE&quot;, &quot;accept&quot;);\n\ncassandraContainer.start();\n</code></pre>\n"}],"owner":{"account_id":24256934,"reputation":47,"user_id":18207142,"display_name":"Cris Manrique"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700670431,"creation_date":1683951214,"question_id":76241041,"body_markdown":"I can set up test containers with a regular version of cassandra, but trying to use a DSE version throws this error\r\n\r\n```org.testcontainers.shaded.org.awaitility.core.ConditionTimeoutException: org.testcontainers.containers.GenericContainer expected the predicate to return &lt;true&gt; but it returned &lt;false&gt; for input of &lt;InspectContainerResponse(```\r\n\r\n\r\nThis is my current set up that is failing\r\n```\r\n\r\n@TestConfiguration\r\nclass TestContainer {\r\n  private static final String ROC_KEYSPACE = &quot;cksdgmdp1&quot;;\r\n  private static CassandraContainer cassandraRocContainer;\r\n  private static final String DSE_IMAGE_VERSION =\r\n          &quot;artifactory.aexp.com/dockerproxy/datastax/dse-server:5.1.10&quot;;\r\n  @BeforeAll\r\n  static void setupCassandraConnectionProperties() {\r\n    System.setProperty(&quot;spring.profiles.active&quot;, &quot;e0&quot;);\r\n    System.setProperty(&quot;spring.profiles.env&quot;, &quot;e0&quot;);\r\n  }\r\n\r\n  @Bean(&quot;cassandraRocSession&quot;)\r\n  public CassandraSession getCassandraRocSession() {\r\n    DockerImageName myImage =\r\n        DockerImageName.parse(DSE_IMAGE_VERSION)\r\n            .asCompatibleSubstituteFor(&quot;cassandra&quot;);\r\n\r\n    cassandraRocContainer =\r\n        (CassandraContainer)\r\n            new CassandraContainer(myImage)\r\n                .withInitScript(getCqlScript(ROC_KEYSPACE))\r\n                .withExposedPorts(9042);\r\n    // start container\r\n    cassandraRocContainer.start();\r\n    // create cluster object from container\r\n    Cluster cluster =\r\n        Cluster.builder()\r\n            .addContactPoint(cassandraRocContainer.getHost())\r\n            .withPort(cassandraRocContainer.getMappedPort(9042))\r\n            .withCredentials(&quot;&quot;, &quot;&quot;)\r\n            .build();\r\n\r\n    // create session from newly created keyspace\r\n    Session session = cluster.connect(ROC_KEYSPACE);\r\n    return new CassandraSession(session, ROC_KEYSPACE);\r\n  }\r\n\r\n  public String getCqlScript(String keyspace) {\r\n    return String.format(&quot;%s.cql&quot;, keyspace);\r\n  }\r\n\r\n  @AfterAll\r\n  static void shutdown() {\r\n    cassandraRocContainer.close();\r\n  }\r\n}\r\n```\r\n\r\nIf i change that ```DSE_IMAGE_VERSION``` to ```cassandra:3.11.4``` then it works fine but I need to use a DSE version. I&#39;m not sure what to try to be honest, I am pretty new with both DSE and containers. \r\n","title":"How to set up test container with datastax enterprise cassandra?","body":"<p>I can set up test containers with a regular version of cassandra, but trying to use a DSE version throws this error</p>\n<p><code>org.testcontainers.shaded.org.awaitility.core.ConditionTimeoutException: org.testcontainers.containers.GenericContainer expected the predicate to return &lt;true&gt; but it returned &lt;false&gt; for input of &lt;InspectContainerResponse(</code></p>\n<p>This is my current set up that is failing</p>\n<pre><code>\n@TestConfiguration\nclass TestContainer {\n  private static final String ROC_KEYSPACE = &quot;cksdgmdp1&quot;;\n  private static CassandraContainer cassandraRocContainer;\n  private static final String DSE_IMAGE_VERSION =\n          &quot;artifactory.aexp.com/dockerproxy/datastax/dse-server:5.1.10&quot;;\n  @BeforeAll\n  static void setupCassandraConnectionProperties() {\n    System.setProperty(&quot;spring.profiles.active&quot;, &quot;e0&quot;);\n    System.setProperty(&quot;spring.profiles.env&quot;, &quot;e0&quot;);\n  }\n\n  @Bean(&quot;cassandraRocSession&quot;)\n  public CassandraSession getCassandraRocSession() {\n    DockerImageName myImage =\n        DockerImageName.parse(DSE_IMAGE_VERSION)\n            .asCompatibleSubstituteFor(&quot;cassandra&quot;);\n\n    cassandraRocContainer =\n        (CassandraContainer)\n            new CassandraContainer(myImage)\n                .withInitScript(getCqlScript(ROC_KEYSPACE))\n                .withExposedPorts(9042);\n    // start container\n    cassandraRocContainer.start();\n    // create cluster object from container\n    Cluster cluster =\n        Cluster.builder()\n            .addContactPoint(cassandraRocContainer.getHost())\n            .withPort(cassandraRocContainer.getMappedPort(9042))\n            .withCredentials(&quot;&quot;, &quot;&quot;)\n            .build();\n\n    // create session from newly created keyspace\n    Session session = cluster.connect(ROC_KEYSPACE);\n    return new CassandraSession(session, ROC_KEYSPACE);\n  }\n\n  public String getCqlScript(String keyspace) {\n    return String.format(&quot;%s.cql&quot;, keyspace);\n  }\n\n  @AfterAll\n  static void shutdown() {\n    cassandraRocContainer.close();\n  }\n}\n</code></pre>\n<p>If i change that <code>DSE_IMAGE_VERSION</code> to <code>cassandra:3.11.4</code> then it works fine but I need to use a DSE version. I'm not sure what to try to be honest, I am pretty new with both DSE and containers.</p>\n"},{"tags":["java","spring-boot","mockito","junit5"],"comments":[{"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"score":0,"creation_date":1700668528,"post_id":77531150,"comment_id":136683461,"body_markdown":"Depending on the profile you are using for tests different application.yml might be loaded that does contain a different list. Did you set a debug breakpoint in the line of your first if condition to check what the stringList actually contains?","body":"Depending on the profile you are using for tests different application.yml might be loaded that does contain a different list. Did you set a debug breakpoint in the line of your first if condition to check what the stringList actually contains?"},{"owner":{"account_id":10490611,"reputation":295,"user_id":10703088,"display_name":"Dan"},"score":0,"creation_date":1700668820,"post_id":77531150,"comment_id":136683509,"body_markdown":"I do have 2 different file properties, but I only load one of the two, which is the only one to contain ```custom.properties.list```. I did, and the list contains ```&quot;${custom.properties.list}&quot;``` as the only value in my list, which matches none of the values I set in my properties file","body":"I do have 2 different file properties, but I only load one of the two, which is the only one to contain <code>custom.properties.list</code>. I did, and the list contains <code>&quot;${custom.properties.list}&quot;</code> as the only value in my list, which matches none of the values I set in my properties file"}],"answers":[{"tags":[],"owner":{"account_id":10490611,"reputation":295,"user_id":10703088,"display_name":"Dan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700669934,"creation_date":1700669543,"answer_id":77531526,"question_id":77531150,"body_markdown":"All I had to do was creating a test.properties in my test file (making sure the path is the same that the one in the /src/main directory), and marking my test class with the following annotation ```@TestPropertySource(locations = &quot;classpath:test.properties&quot;)```. \r\nThis annotation means that the ```test.properties``` will override properties file that are in the main directory. Problem solved, all my test are successful.  ","title":"Junit 5 : Testing if condition involving private property in controller","body":"<p>All I had to do was creating a test.properties in my test file (making sure the path is the same that the one in the /src/main directory), and marking my test class with the following annotation <code>@TestPropertySource(locations = &quot;classpath:test.properties&quot;)</code>.\nThis annotation means that the <code>test.properties</code> will override properties file that are in the main directory. Problem solved, all my test are successful.</p>\n"}],"owner":{"account_id":10490611,"reputation":295,"user_id":10703088,"display_name":"Dan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1700669934,"creation_date":1700666219,"question_id":77531150,"body_markdown":"I&#39;m trying to write a Junit test for the following controller:\r\n\r\n\r\n```java\r\n@Value(&quot;${custom.properties.list}&quot;)\r\nprivate List&lt;String&gt; stringList;\r\n\r\nfinal DataService dataService;\r\n\r\n    @PostMapping(&quot;/&quot;)\r\n\tpublic ResponseEntity&lt;?&gt; createValue(\r\n\t\t\t@Valid @RequestBody final ObjectDto dto,\r\n\t\t\t@RequestHeader(value = &quot;headerField&quot;) final String headerValue) {\r\n\r\n\t\tif (this.stringList.stream().noneMatch(headerValue::startsWith)) {\r\n\t\t\treturn ResponseEntity.status(HttpStatus.FORBIDDEN).body(&quot;error 403&quot;);\r\n\t\t}\r\n\r\n\t\tLong idResult = this.dataService.create(dto, headerValue);\r\n\r\n\t\tif (Objects.equals(idResult, -1L)) {\r\n\t\t\treturn ResponseEntity.status(HttpStatus.204).body(&quot;error 204&quot;);\r\n\t\t}\r\n\r\n\t\treturn new ResponseEntity&lt;&gt;(idResult, HttpStatus.CREATED);\r\n\t}\r\n\r\n```\r\n\r\nlet&#39;s say that ```stringList``` contains values ```&quot;ABC&quot;, &quot;EFG&quot;, &quot;HIJ&quot;```.\r\nI&#39;m testing that ```headerValue``` starts with one of the values from the list to either return a code 201 or 204.\r\n\r\nMy Junit test is the following:\r\n\r\n```java\r\n    @Test\r\n    void testCreateValue_1() throws Exception {\r\n\r\n        String requestBody = new String(Files.readAllBytes(Paths.get(&quot;src/test/resources/post/postRequest_1.json&quot;)));\r\n\r\n        MyObjectData data = mapper.readValue(requestBody, MyObjectData.class);\r\n\r\n        Mockito.when(dataService.create(data, &quot;ABC&quot;)).thenReturn(1L);\r\n\r\n        mvc.perform(post(&quot;/&quot;)\r\n                        .header(&quot;Nom-Application&quot;, &quot;ABC&quot;)\r\n                        .content(requestBody)\r\n                        .contentType(MediaType.APPLICATION_JSON))\r\n                .andDo(print())\r\n                .andExpect(MockMvcResultMatchers.status().isCreated());\r\n    }\r\n```\r\n\r\nI am not sure why as I&#39;m quite new to Junit testing, but running my test fails returns a code 403.\r\nI&#39;ve tried to create the list in my controller test class like I did it my controller class, but it doesn&#39;t work. \r\n\r\nWhat should I do for my test to pass and return a code 201 ? \r\n\r\nEDIT: Or maybe is has to do with getting my stringList from a properties file ?\r\n\r\nEDIT 2 : I realised that the only value in ```stringList``` when I launch my test is ```&quot;${custom.properties.list}&quot;```, so the answer to my previous edit is &quot;yes&quot;. Is there any way I can update that value in my test class ?","title":"Junit 5 : Testing if condition involving private property in controller","body":"<p>I'm trying to write a Junit test for the following controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value(&quot;${custom.properties.list}&quot;)\nprivate List&lt;String&gt; stringList;\n\nfinal DataService dataService;\n\n    @PostMapping(&quot;/&quot;)\n    public ResponseEntity&lt;?&gt; createValue(\n            @Valid @RequestBody final ObjectDto dto,\n            @RequestHeader(value = &quot;headerField&quot;) final String headerValue) {\n\n        if (this.stringList.stream().noneMatch(headerValue::startsWith)) {\n            return ResponseEntity.status(HttpStatus.FORBIDDEN).body(&quot;error 403&quot;);\n        }\n\n        Long idResult = this.dataService.create(dto, headerValue);\n\n        if (Objects.equals(idResult, -1L)) {\n            return ResponseEntity.status(HttpStatus.204).body(&quot;error 204&quot;);\n        }\n\n        return new ResponseEntity&lt;&gt;(idResult, HttpStatus.CREATED);\n    }\n\n</code></pre>\n<p>let's say that <code>stringList</code> contains values <code>&quot;ABC&quot;, &quot;EFG&quot;, &quot;HIJ&quot;</code>.\nI'm testing that <code>headerValue</code> starts with one of the values from the list to either return a code 201 or 204.</p>\n<p>My Junit test is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    void testCreateValue_1() throws Exception {\n\n        String requestBody = new String(Files.readAllBytes(Paths.get(&quot;src/test/resources/post/postRequest_1.json&quot;)));\n\n        MyObjectData data = mapper.readValue(requestBody, MyObjectData.class);\n\n        Mockito.when(dataService.create(data, &quot;ABC&quot;)).thenReturn(1L);\n\n        mvc.perform(post(&quot;/&quot;)\n                        .header(&quot;Nom-Application&quot;, &quot;ABC&quot;)\n                        .content(requestBody)\n                        .contentType(MediaType.APPLICATION_JSON))\n                .andDo(print())\n                .andExpect(MockMvcResultMatchers.status().isCreated());\n    }\n</code></pre>\n<p>I am not sure why as I'm quite new to Junit testing, but running my test fails returns a code 403.\nI've tried to create the list in my controller test class like I did it my controller class, but it doesn't work.</p>\n<p>What should I do for my test to pass and return a code 201 ?</p>\n<p>EDIT: Or maybe is has to do with getting my stringList from a properties file ?</p>\n<p>EDIT 2 : I realised that the only value in <code>stringList</code> when I launch my test is <code>&quot;${custom.properties.list}&quot;</code>, so the answer to my previous edit is &quot;yes&quot;. Is there any way I can update that value in my test class ?</p>\n"},{"tags":["java","stock","maximum-profit-problem"],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700669344,"creation_date":1700669344,"answer_id":77531502,"question_id":77530358,"body_markdown":"You&#39;re looking for local minimums and maximums.  I&#39;m not going to write the code, but here&#39;s an outline of one algorithm.\r\n\r\n    Save the first price\r\n    Iterate through the array starting with the second element\r\n        Is the current price less than the previous price\r\n            Have you already bought stock\r\n                Sell at the previous price\r\n            else\r\n                Save the current price\r\n        else\r\n            Have you already bought stock\r\n                continue\r\n            else\r\n                Buy with the saved price.","title":"Maximize profit from buying and selling stocks with multiple transactions","body":"<p>You're looking for local minimums and maximums.  I'm not going to write the code, but here's an outline of one algorithm.</p>\n<pre><code>Save the first price\nIterate through the array starting with the second element\n    Is the current price less than the previous price\n        Have you already bought stock\n            Sell at the previous price\n        else\n            Save the current price\n    else\n        Have you already bought stock\n            continue\n        else\n            Buy with the saved price.\n</code></pre>\n"}],"owner":{"account_id":27640003,"reputation":21,"user_id":21097123,"display_name":"Sri Murugan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1700669344,"creation_date":1700659852,"question_id":77530358,"body_markdown":"I am working on a problem where I need to maximize profit from buying and selling stocks with multiple transactions. The task is to find and return the maximum profit achievable given an integer array `prices`, where `prices[i]` is the price of a stock on the `ith` day.\r\n\r\nExamples:\r\n\r\nExample 1:\r\n\r\n```\r\nInput: prices = [7,1,5,3,6,4]\r\nOutput: 7\r\nExplanation: Buy on day 2 (price = 1) and sell on day 3 (price = 5), profit = 5-1 = 4. Then buy on day 4 (price = 3) and sell on day 5 (price = 6), profit = 6-3 = 3. Total profit is 4 + 3 = 7.\r\n\r\n```\r\nExample 2:\r\n\r\n```\r\nInput: prices = [1,2,3,4,5]\r\nOutput: 4\r\nExplanation: Buy on day 1 (price = 1) and sell on day 5 (price = 5), profit = 5-1 = 4. Total profit is 4.\r\n```\r\n\r\nExample 3:\r\n\r\n```\r\nInput: prices = [7,6,4,3,1]\r\nOutput: 0\r\nExplanation: There is no way to make a positive profit, so we never buy the stock to achieve the maximum profit of 0.\r\n```\r\n\r\nConstraints:\r\n\r\n```\r\n1 &lt;= prices.length &lt;= 3 * 10^4\r\n0 &lt;= prices[i] &lt;= 10^4\r\n```\r\n\r\nI have implemented a solution in Java, but it&#39;s not giving the correct output for all cases. Here&#39;s the current implementation:\r\n\r\n```\r\nclass Solution {\r\n    public int maxProfit(int[] prices) {\r\n        int overall_profit = 0;\r\n        boolean isBought = false;\r\n        int track = 0;\r\n        for(int i = 0; i &lt; prices.length - 1; i++){\r\n            int profit = 0;\r\n            if(prices[i+1] &gt; prices[i]){\r\n                profit += prices[i+1] - prices[i];\r\n                if(!isBought){\r\n                    isBought = true;\r\n                    track = i;\r\n                }\r\n                i++;\r\n            }\r\n            if(profit &gt; overall_profit){\r\n                overall_profit = profit;\r\n            }\r\n            if(isBought){\r\n                isBought = false;\r\n                i = track;\r\n            }\r\n        }\r\n        return overall_profit;\r\n    }\r\n}\r\n```\r\n\r\nI would appreciate any insights or suggestions on how to improve the current implementation to correctly solve the problem. Thank you!","title":"Maximize profit from buying and selling stocks with multiple transactions","body":"<p>I am working on a problem where I need to maximize profit from buying and selling stocks with multiple transactions. The task is to find and return the maximum profit achievable given an integer array <code>prices</code>, where <code>prices[i]</code> is the price of a stock on the <code>ith</code> day.</p>\n<p>Examples:</p>\n<p>Example 1:</p>\n<pre><code>Input: prices = [7,1,5,3,6,4]\nOutput: 7\nExplanation: Buy on day 2 (price = 1) and sell on day 3 (price = 5), profit = 5-1 = 4. Then buy on day 4 (price = 3) and sell on day 5 (price = 6), profit = 6-3 = 3. Total profit is 4 + 3 = 7.\n\n</code></pre>\n<p>Example 2:</p>\n<pre><code>Input: prices = [1,2,3,4,5]\nOutput: 4\nExplanation: Buy on day 1 (price = 1) and sell on day 5 (price = 5), profit = 5-1 = 4. Total profit is 4.\n</code></pre>\n<p>Example 3:</p>\n<pre><code>Input: prices = [7,6,4,3,1]\nOutput: 0\nExplanation: There is no way to make a positive profit, so we never buy the stock to achieve the maximum profit of 0.\n</code></pre>\n<p>Constraints:</p>\n<pre><code>1 &lt;= prices.length &lt;= 3 * 10^4\n0 &lt;= prices[i] &lt;= 10^4\n</code></pre>\n<p>I have implemented a solution in Java, but it's not giving the correct output for all cases. Here's the current implementation:</p>\n<pre><code>class Solution {\n    public int maxProfit(int[] prices) {\n        int overall_profit = 0;\n        boolean isBought = false;\n        int track = 0;\n        for(int i = 0; i &lt; prices.length - 1; i++){\n            int profit = 0;\n            if(prices[i+1] &gt; prices[i]){\n                profit += prices[i+1] - prices[i];\n                if(!isBought){\n                    isBought = true;\n                    track = i;\n                }\n                i++;\n            }\n            if(profit &gt; overall_profit){\n                overall_profit = profit;\n            }\n            if(isBought){\n                isBought = false;\n                i = track;\n            }\n        }\n        return overall_profit;\n    }\n}\n</code></pre>\n<p>I would appreciate any insights or suggestions on how to improve the current implementation to correctly solve the problem. Thank you!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9817,"page":41,"page_size":100}
