{"items":[{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":3,"creation_date":1695832813,"post_id":77188516,"comment_id":136077819,"body_markdown":"It is the same problem as here: https://stackoverflow.com/questions/77131316/create-a-chart-in-a-powerpoint-using-apache-poi-and-java-from-scratch/77135432#77135432. Same solution:  `if (bottomAxis.hasNumberFormat()) bottomAxis.setNumberFormat(&quot;@&quot;);`","body":"It is the same problem as here: <a href=\"https://stackoverflow.com/questions/77131316/create-a-chart-in-a-powerpoint-using-apache-poi-and-java-from-scratch/77135432#77135432\" title=\"create a chart in a powerpoint using apache poi and java from scratch\">stackoverflow.com/questions/77131316/&hellip;</a>. Same solution:  <code>if (bottomAxis.hasNumberFormat()) bottomAxis.setNumberFormat(&quot;@&quot;);</code>"},{"owner":{"account_id":408459,"reputation":302,"user_id":779133,"display_name":"sak"},"score":0,"creation_date":1695836274,"post_id":77188516,"comment_id":136078405,"body_markdown":"Thanks. It solved the problem. I have upvoted the answer in the post. \nHow did you identify the root cause. Is there a way to check what the issue is when the workbook is being opened ? Any pointers to me to go over to learn more and troubleshoot better next time ?","body":"Thanks. It solved the problem. I have upvoted the answer in the post.  How did you identify the root cause. Is there a way to check what the issue is when the workbook is being opened ? Any pointers to me to go over to learn more and troubleshoot better next time ?"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1695836767,"post_id":77188516,"comment_id":136078493,"body_markdown":"All Office Open XML files, such as `*.xlsx` and `*.pptx` are simply ZIP archives. So one can unzip them and have a look into. I looked into the `ppt/charts/chart1.xml` and found the `&lt;c:numFmt sourceLinked=&quot;true&quot; formatCode=&quot;&quot;/&gt;` in axis XML. And I know that an empty string format code is not correct.","body":"All Office Open XML files, such as <code>*.xlsx</code> and <code>*.pptx</code> are simply ZIP archives. So one can unzip them and have a look into. I looked into the <code>ppt&#47;charts&#47;chart1.xml</code> and found the <code>&lt;c:numFmt sourceLinked=&quot;true&quot; formatCode=&quot;&quot;&#47;&gt;</code> in axis XML. And I know that an empty string format code is not correct."}],"owner":{"account_id":408459,"reputation":302,"user_id":779133,"display_name":"sak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695825508,"creation_date":1695825508,"question_id":77188516,"body_markdown":"I am trying to generate a workbook with Bar chart using example provided in the POI Examples - https://svn.apache.org/repos/asf/poi/trunk/poi-examples/src/main/java/org/apache/poi/examples/xssf/usermodel/BarChart.java\r\n\r\nI am able to open the generated workbook and view the chart without any issues with previous version of Excel, but not with latest version of Excel (2309) on both Windows (2309 Build 16827.20080) and Mac (16.77.1 - 23091703).\r\n\r\nWith the latest version of Excel, on trying to open the workbook, I get an error message &quot;We found a problem with some content in &lt;file_name&gt;. Do you want us to try to recover as much as we can? If you trust the source of this workbook, click Yes.&quot;\r\nOn clicking Yes, the workbook opens, without the Chart.\r\n\r\nI am using Office 365. I can confirm with the previous Excel version 2308, the workbook is opening fine. \r\n\r\nI tried upgrading to the latest version of POI v5.2.3, but same issue is observed, the generated workbook is opening on previous version but not on latest version of Excel. \r\n\r\nI tried to build same Bar chart manually and compare the xml between the generated and manual workbook (after unzipping the xlsx), but couldn&#39;t figure out much. \r\n\r\nHas anyone else faced this issue? Any pointers to trouble shoot the issue are welcome.","title":"Getting error while opening workbook with Bar chart generated with Apache POI in latest version of Excel","body":"<p>I am trying to generate a workbook with Bar chart using example provided in the POI Examples - <a href=\"https://svn.apache.org/repos/asf/poi/trunk/poi-examples/src/main/java/org/apache/poi/examples/xssf/usermodel/BarChart.java\" rel=\"nofollow noreferrer\">https://svn.apache.org/repos/asf/poi/trunk/poi-examples/src/main/java/org/apache/poi/examples/xssf/usermodel/BarChart.java</a></p>\n<p>I am able to open the generated workbook and view the chart without any issues with previous version of Excel, but not with latest version of Excel (2309) on both Windows (2309 Build 16827.20080) and Mac (16.77.1 - 23091703).</p>\n<p>With the latest version of Excel, on trying to open the workbook, I get an error message &quot;We found a problem with some content in &lt;file_name&gt;. Do you want us to try to recover as much as we can? If you trust the source of this workbook, click Yes.&quot;\nOn clicking Yes, the workbook opens, without the Chart.</p>\n<p>I am using Office 365. I can confirm with the previous Excel version 2308, the workbook is opening fine.</p>\n<p>I tried upgrading to the latest version of POI v5.2.3, but same issue is observed, the generated workbook is opening on previous version but not on latest version of Excel.</p>\n<p>I tried to build same Bar chart manually and compare the xml between the generated and manual workbook (after unzipping the xlsx), but couldn't figure out much.</p>\n<p>Has anyone else faced this issue? Any pointers to trouble shoot the issue are welcome.</p>\n"},{"tags":["java","c++","multithreading","synchronization"],"comments":[{"owner":{"account_id":237126,"reputation":604212,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":4,"creation_date":1301038891,"post_id":5429653,"comment_id":6146692,"body_markdown":"C++ says nothing about threads. You&#39;ll need to rely on library support.","body":"C++ says nothing about threads. You&#39;ll need to rely on library support."},{"owner":{"account_id":181638,"reputation":355835,"user_id":415784,"accept_rate":79,"display_name":"Nawaz"},"score":0,"creation_date":1544677000,"post_id":5429653,"comment_id":94362947,"body_markdown":"@DavidHeffernan: Since C++11, it does!","body":"@DavidHeffernan: Since C++11, it does!"},{"owner":{"account_id":237126,"reputation":604212,"user_id":505088,"accept_rate":91,"display_name":"David Heffernan"},"score":1,"creation_date":1544682655,"post_id":5429653,"comment_id":94364631,"body_markdown":"@Nawaz yes, have you seen the date on this post?","body":"@Nawaz yes, have you seen the date on this post?"},{"owner":{"account_id":181638,"reputation":355835,"user_id":415784,"accept_rate":79,"display_name":"Nawaz"},"score":4,"creation_date":1544696616,"post_id":5429653,"comment_id":94371277,"body_markdown":"@DavidHeffernan: Yes, I saw *Mar 25 **11*** :P","body":"@DavidHeffernan: Yes, I saw <i>Mar 25 <b>11</i></b> :P"}],"answers":[{"tags":[],"owner":{"account_id":53576,"reputation":75610,"user_id":160206,"accept_rate":80,"display_name":"Bj&#246;rn Pollex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1301038188,"creation_date":1301038188,"answer_id":5429694,"question_id":5429653,"body_markdown":"C++ does not have built-in threading or synchronization (yet), you have to use libraries for that. [`Boost.Thread`][1] is a good portable library that is designed to be compatible with the [proposed threading facilities in C++0x][2].\r\n\r\n\r\n  [1]: http://www.boost.org/doc/libs/1_46_1/doc/html/thread.html\r\n  [2]: http://en.wikipedia.org/wiki/C++0x#Threading_facilities","title":"What feature corresponds to &#39;synchronized&#39; in Java?","body":"<p>C++ does not have built-in threading or synchronization (yet), you have to use libraries for that. <a href=\"http://www.boost.org/doc/libs/1_46_1/doc/html/thread.html\" rel=\"nofollow\"><code>Boost.Thread</code></a> is a good portable library that is designed to be compatible with the <a href=\"http://en.wikipedia.org/wiki/C++0x#Threading_facilities\" rel=\"nofollow\">proposed threading facilities in C++0x</a>.</p>\n"},{"tags":[],"owner":{"account_id":103497,"reputation":71140,"user_id":277176,"accept_rate":78,"display_name":"Yakov Galka"},"down_vote_count":0,"up_vote_count":53,"is_accepted":true,"score":53,"last_activity_date":1595530636,"creation_date":1301038193,"answer_id":5429695,"question_id":5429653,"body_markdown":"Use the following in C++:\r\n\r\n    #include &lt;mutex&gt;\r\n\r\n    std::mutex _mutex;\r\n\r\n    void f()\r\n    {\r\n         std::unique_lock&lt;std::mutex&gt; lock(_mutex);\r\n         // access your resource here.\r\n    }\r\n","title":"What feature corresponds to &#39;synchronized&#39; in Java?","body":"<p>Use the following in C++:</p>\n<pre><code>#include &lt;mutex&gt;\n\nstd::mutex _mutex;\n\nvoid f()\n{\n     std::unique_lock&lt;std::mutex&gt; lock(_mutex);\n     // access your resource here.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":181638,"reputation":355835,"user_id":415784,"accept_rate":79,"display_name":"Nawaz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1301040439,"creation_date":1301038195,"answer_id":5429696,"question_id":5429653,"body_markdown":"There is no keyword in C++03 equivalent to `synchronized` in Java . But you can use Mutex to guarantee safety of thread. ","title":"What feature corresponds to &#39;synchronized&#39; in Java?","body":"<p>There is no keyword in C++03 equivalent to <code>synchronized</code> in Java . But you can use Mutex to guarantee safety of thread. </p>\n"},{"tags":[],"owner":{"account_id":10726647,"reputation":4413,"user_id":7893951,"accept_rate":100,"display_name":"Akira"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1499776754,"creation_date":1494424807,"answer_id":43894724,"question_id":5429653,"body_markdown":"Despite this question has been already answered, by the idea of [this][1] article I made my version of `synchronized` keyword using just standard library (C++11) objects:\r\n\r\n    #include &lt;mutex&gt;\r\n    #define synchronized(m) \\\r\n        for(std::unique_lock&lt;std::recursive_mutex&gt; lk(m); lk; lk.unlock())\r\n\r\nYou can test it like:\r\n\r\n    #include &lt;iostream&gt;\r\n    #include &lt;iomanip&gt;\r\n    #include &lt;mutex&gt;\r\n    #include &lt;thread&gt;\r\n    #include &lt;vector&gt;\r\n\r\n    #define synchronized(m) \\\r\n        for(std::unique_lock&lt;std::recursive_mutex&gt; lk(m); lk; lk.unlock())\r\n\r\n    class Test {\r\n        std::recursive_mutex m_mutex;\r\n    public:\r\n        void sayHello(int n) {\r\n            synchronized(m_mutex) {\r\n                std::cout &lt;&lt; &quot;Hello! My number is: &quot;;\r\n                std::cout &lt;&lt; std::setw(2) &lt;&lt; n &lt;&lt; std::endl;\r\n            }\r\n        }    \r\n    };\r\n\r\n    int main() {\r\n        Test test;\r\n        std::vector&lt;std::thread&gt; threads;\r\n        std::cout &lt;&lt; &quot;Test started...&quot; &lt;&lt; std::endl;\r\n        \r\n        for(int i = 0; i &lt; 10; ++i)\r\n            threads.push_back(std::thread([i, &amp;test]() {\r\n                for(int j = 0; j &lt; 10; ++j) {\r\n                    test.sayHello((i * 10) + j);\r\n                    std::this_thread::sleep_for(std::chrono::milliseconds(100));\r\n                }\r\n            }));    \r\n        for(auto&amp; t : threads) t.join(); \r\n        \r\n        std::cout &lt;&lt; &quot;Test finished!&quot; &lt;&lt; std::endl;\r\n        return 0;\r\n    }\r\n\r\nThis is just an approximation of `synchonized` keyword of Java but it works. Without it the `sayHello` method of the previous example can be implemented as the [accepted answer][2] says:\r\n\r\n    void sayHello(unsigned int n) {\r\n        std::unique_lock&lt;std::recursive_mutex&gt; lk(m_mutex);\r\n    \r\n        std::cout &lt;&lt; &quot;Hello! My number is: &quot;;\r\n        std::cout &lt;&lt; std::setw(2) &lt;&lt; n &lt;&lt; std::endl;\r\n    }\r\n\r\n\r\n  [1]: https://www.codeproject.com/Articles/12362/A-quot-synchronized-quot-statement-for-C-like-in-J\r\n  [2]: https://stackoverflow.com/a/5429695/7893951","title":"What feature corresponds to &#39;synchronized&#39; in Java?","body":"<p>Despite this question has been already answered, by the idea of <a href=\"https://www.codeproject.com/Articles/12362/A-quot-synchronized-quot-statement-for-C-like-in-J\" rel=\"noreferrer\">this</a> article I made my version of <code>synchronized</code> keyword using just standard library (C++11) objects:</p>\n\n<pre><code>#include &lt;mutex&gt;\n#define synchronized(m) \\\n    for(std::unique_lock&lt;std::recursive_mutex&gt; lk(m); lk; lk.unlock())\n</code></pre>\n\n<p>You can test it like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n\n#define synchronized(m) \\\n    for(std::unique_lock&lt;std::recursive_mutex&gt; lk(m); lk; lk.unlock())\n\nclass Test {\n    std::recursive_mutex m_mutex;\npublic:\n    void sayHello(int n) {\n        synchronized(m_mutex) {\n            std::cout &lt;&lt; \"Hello! My number is: \";\n            std::cout &lt;&lt; std::setw(2) &lt;&lt; n &lt;&lt; std::endl;\n        }\n    }    \n};\n\nint main() {\n    Test test;\n    std::vector&lt;std::thread&gt; threads;\n    std::cout &lt;&lt; \"Test started...\" &lt;&lt; std::endl;\n\n    for(int i = 0; i &lt; 10; ++i)\n        threads.push_back(std::thread([i, &amp;test]() {\n            for(int j = 0; j &lt; 10; ++j) {\n                test.sayHello((i * 10) + j);\n                std::this_thread::sleep_for(std::chrono::milliseconds(100));\n            }\n        }));    \n    for(auto&amp; t : threads) t.join(); \n\n    std::cout &lt;&lt; \"Test finished!\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>This is just an approximation of <code>synchonized</code> keyword of Java but it works. Without it the <code>sayHello</code> method of the previous example can be implemented as the <a href=\"https://stackoverflow.com/a/5429695/7893951\">accepted answer</a> says:</p>\n\n<pre><code>void sayHello(unsigned int n) {\n    std::unique_lock&lt;std::recursive_mutex&gt; lk(m_mutex);\n\n    std::cout &lt;&lt; \"Hello! My number is: \";\n    std::cout &lt;&lt; std::setw(2) &lt;&lt; n &lt;&lt; std::endl;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9746596,"reputation":109,"user_id":7226367,"display_name":"Jerry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695824879,"creation_date":1695395909,"answer_id":77158894,"question_id":5429653,"body_markdown":"In C++, I&#39;ve implemented a macro that lets you simply do the following in order to synchronize access to a function or method:\r\n\r\n    // Define a function we want to synchronize.\r\n    void synchronizedFunction()\r\n    {\r\n    \t// Synchronize this function.\r\n        synchronized;\r\n\r\n        // We are now synchronized.\r\n    }\r\n\r\nHere&#39;s how the macro is defined:\r\n\r\n    // Under the hood, we use a mutex to synchronize.\r\n    #include &lt;mutex&gt;\r\n    \r\n    // Create a synchronized keyword.\r\n    #define CONCAT_INNER(a, b) a##b\r\n    #define CONCAT(a, b) CONCAT_INNER(a, b)\r\n    #define UNIQUE_NAME(base) CONCAT(base, __LINE__)\r\n    #define synchronized static std::mutex UNIQUE_NAME(syncMutex); std::unique_lock&lt;std::mutex&gt; syncLock(UNIQUE_NAME(syncMutex))\r\n\r\nThis works for me with all three popular compilers { Windows, Clang, GCC }.  This macro creates a unique static mutex variable for the function, and immediately locks it within the scope of that function.  It could also be used within any scope, not just a function scope.\r\n\r\nYou can try this test program to prove that it works:\r\n\r\n    // Under the hood, we use a mutex to synchronize.\r\n    #include &lt;mutex&gt;\r\n    \r\n    // Create a synchronized keyword.\r\n    #define CONCAT_INNER(a, b) a##b\r\n    #define CONCAT(a, b) CONCAT_INNER(a, b)\r\n    #define UNIQUE_NAME(base) CONCAT(base, __LINE__)\r\n    #define synchronized static std::mutex UNIQUE_NAME(syncMutex); std::unique_lock&lt;std::mutex&gt; syncLock(UNIQUE_NAME(syncMutex))\r\n    \r\n    // For our test program below.\r\n    #include &lt;iostream&gt;\r\n    #include &lt;thread&gt;\r\n    \r\n    // Define a function we want to synchronize.\r\n    void synchronizedFunction()\r\n    {\r\n    \t// Synchronize this function.\r\n        synchronized;\r\n    \r\n        // Print something, then sleep for 1 second, then print something else.\r\n        // If we&#39;re synchronized, these two messages will appear back-to-back.\r\n        // If we&#39;re not synchronized, these messages display in an uncontrolled fashion.\r\n        std::cout &lt;&lt; &quot;Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; is entering.&quot; &lt;&lt; std::endl;\r\n        std::this_thread::sleep_for(std::chrono::seconds(1));\r\n        std::cout &lt;&lt; &quot;Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; is exiting.&quot; &lt;&lt; std::endl;\r\n    }\r\n    \r\n    // A simple test program that will access our synchronized function from 2 asynchronous threads.\r\n    int main()\r\n    {\r\n        // Construct a new thread and have it call our synchronized function.\r\n        std::thread newThread(synchronizedFunction);\r\n    \r\n        // In our main thread, also call our synchronized function.\r\n        synchronizedFunction();\r\n        \r\n        // Join both threads before exiting.\r\n        newThread.join();\r\n        \r\n        // Exit.\r\n        return 0;\r\n    }\r\n\r\nWhen you run this program, you get the following output -- demonstrating that access to the function is serialized for each accessing thread.  You will notice the one-second delay from when the function is entered and when the function has exited (both times).  Because the function is now serialized, the test program will take approximately 2 seconds for this function to complete:\r\n\r\n    Thread 140737353824064 is entering.\r\n    Thread 140737353824064 is exiting.\r\n    Thread 140737257031424 is entering.\r\n    Thread 140737257031424 is exiting.\r\n\r\nIf you comment out the &quot;synchronized;&quot; statement, then you&#39;ll see that both threads enter the function almost simultaneously, producing something similar to the following output, or you may see text that stomps on top of itself.  Because we are no longer synchronized, the test program will take approximately 1 second to complete instead of 2 seconds:\r\n\r\n    Thread 140737257031424 is entering.\r\n    Thread 140737353824064 is entering.\r\n    Thread 140737257031424 is exiting.\r\n    Thread 140737353824064 is exiting.\r\n\r\n\r\n","title":"What feature corresponds to &#39;synchronized&#39; in Java?","body":"<p>In C++, I've implemented a macro that lets you simply do the following in order to synchronize access to a function or method:</p>\n<pre><code>// Define a function we want to synchronize.\nvoid synchronizedFunction()\n{\n    // Synchronize this function.\n    synchronized;\n\n    // We are now synchronized.\n}\n</code></pre>\n<p>Here's how the macro is defined:</p>\n<pre><code>// Under the hood, we use a mutex to synchronize.\n#include &lt;mutex&gt;\n\n// Create a synchronized keyword.\n#define CONCAT_INNER(a, b) a##b\n#define CONCAT(a, b) CONCAT_INNER(a, b)\n#define UNIQUE_NAME(base) CONCAT(base, __LINE__)\n#define synchronized static std::mutex UNIQUE_NAME(syncMutex); std::unique_lock&lt;std::mutex&gt; syncLock(UNIQUE_NAME(syncMutex))\n</code></pre>\n<p>This works for me with all three popular compilers { Windows, Clang, GCC }.  This macro creates a unique static mutex variable for the function, and immediately locks it within the scope of that function.  It could also be used within any scope, not just a function scope.</p>\n<p>You can try this test program to prove that it works:</p>\n<pre><code>// Under the hood, we use a mutex to synchronize.\n#include &lt;mutex&gt;\n\n// Create a synchronized keyword.\n#define CONCAT_INNER(a, b) a##b\n#define CONCAT(a, b) CONCAT_INNER(a, b)\n#define UNIQUE_NAME(base) CONCAT(base, __LINE__)\n#define synchronized static std::mutex UNIQUE_NAME(syncMutex); std::unique_lock&lt;std::mutex&gt; syncLock(UNIQUE_NAME(syncMutex))\n\n// For our test program below.\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\n// Define a function we want to synchronize.\nvoid synchronizedFunction()\n{\n    // Synchronize this function.\n    synchronized;\n\n    // Print something, then sleep for 1 second, then print something else.\n    // If we're synchronized, these two messages will appear back-to-back.\n    // If we're not synchronized, these messages display in an uncontrolled fashion.\n    std::cout &lt;&lt; &quot;Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; is entering.&quot; &lt;&lt; std::endl;\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    std::cout &lt;&lt; &quot;Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; is exiting.&quot; &lt;&lt; std::endl;\n}\n\n// A simple test program that will access our synchronized function from 2 asynchronous threads.\nint main()\n{\n    // Construct a new thread and have it call our synchronized function.\n    std::thread newThread(synchronizedFunction);\n\n    // In our main thread, also call our synchronized function.\n    synchronizedFunction();\n    \n    // Join both threads before exiting.\n    newThread.join();\n    \n    // Exit.\n    return 0;\n}\n</code></pre>\n<p>When you run this program, you get the following output -- demonstrating that access to the function is serialized for each accessing thread.  You will notice the one-second delay from when the function is entered and when the function has exited (both times).  Because the function is now serialized, the test program will take approximately 2 seconds for this function to complete:</p>\n<pre><code>Thread 140737353824064 is entering.\nThread 140737353824064 is exiting.\nThread 140737257031424 is entering.\nThread 140737257031424 is exiting.\n</code></pre>\n<p>If you comment out the &quot;synchronized;&quot; statement, then you'll see that both threads enter the function almost simultaneously, producing something similar to the following output, or you may see text that stomps on top of itself.  Because we are no longer synchronized, the test program will take approximately 1 second to complete instead of 2 seconds:</p>\n<pre><code>Thread 140737257031424 is entering.\nThread 140737353824064 is entering.\nThread 140737257031424 is exiting.\nThread 140737353824064 is exiting.\n</code></pre>\n"}],"owner":{"account_id":298177,"reputation":2727,"user_id":604065,"accept_rate":97,"display_name":"Don Lun"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26722,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":5429695,"answer_count":5,"score":50,"last_activity_date":1695824879,"creation_date":1301037911,"question_id":5429653,"body_markdown":"`synchronized` in Java can guarantee thread-safety when accessing a shared object.\r\nWhat about C++?\r\n","title":"What feature corresponds to &#39;synchronized&#39; in Java?","body":"<p><code>synchronized</code> in Java can guarantee thread-safety when accessing a shared object.\nWhat about C++?</p>\n"},{"tags":["java","junit","mockito","powermock","mockstatic"],"comments":[{"owner":{"account_id":18158610,"reputation":311,"user_id":13210306,"display_name":"Vitor Cavalcanti"},"score":0,"creation_date":1619663423,"post_id":67299161,"comment_id":118975218,"body_markdown":"Check this link and see if it helps you: https://frontbackend.com/java/how-to-mock-static-methods-with-mockito","body":"Check this link and see if it helps you: <a href=\"https://frontbackend.com/java/how-to-mock-static-methods-with-mockito\" rel=\"nofollow noreferrer\">frontbackend.com/java/how-to-mock-static-methods-with-mockit&zwnj;&#8203;o</a>"},{"owner":{"account_id":8759373,"reputation":281,"user_id":6549765,"display_name":"Arun Senthoor Pandian"},"score":0,"creation_date":1619678359,"post_id":67299161,"comment_id":118978353,"body_markdown":"Hi Vitor, It uses junit 4, I need something with junit 5.","body":"Hi Vitor, It uses junit 4, I need something with junit 5."},{"owner":{"account_id":18158610,"reputation":311,"user_id":13210306,"display_name":"Vitor Cavalcanti"},"score":2,"creation_date":1619700656,"post_id":67299161,"comment_id":118988139,"body_markdown":"My opinion here ... first of all, get rid of the powermock dependency. Then use mockito-inline and JUnit 5 (junit-jupiter) and you will make things work well.","body":"My opinion here ... first of all, get rid of the powermock dependency. Then use mockito-inline and JUnit 5 (junit-jupiter) and you will make things work well."},{"owner":{"account_id":18158610,"reputation":311,"user_id":13210306,"display_name":"Vitor Cavalcanti"},"score":0,"creation_date":1619700803,"post_id":67299161,"comment_id":118988214,"body_markdown":"Can you edit your questions by adding your `pom.xml` and the test class? I&#39;ll help you with it.","body":"Can you edit your questions by adding your <code>pom.xml</code> and the test class? I&#39;ll help you with it."},{"owner":{"account_id":8759373,"reputation":281,"user_id":6549765,"display_name":"Arun Senthoor Pandian"},"score":0,"creation_date":1619765676,"post_id":67299161,"comment_id":119008447,"body_markdown":"Hi Vitor, Thanks for your time, till mockito-core comes with the ability to mock static and final classes we have decided to run them with Junit 4 itself. I see they are experimenting mockito-inline with the features, once they are satisficed they should be releasing one with mockito-core. That should solve our problem.","body":"Hi Vitor, Thanks for your time, till mockito-core comes with the ability to mock static and final classes we have decided to run them with Junit 4 itself. I see they are experimenting mockito-inline with the features, once they are satisficed they should be releasing one with mockito-core. That should solve our problem."}],"answers":[{"tags":[],"owner":{"account_id":4096707,"reputation":1439,"user_id":3363254,"accept_rate":50,"display_name":"Eranda"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1626107365,"creation_date":1626107365,"answer_id":68350864,"question_id":67299161,"body_markdown":"You have to add ***/mockito-extensions/org.mockito.plugins.MockMaker*** file to the class path containing the value ***mock-maker-inline***.\r\nEasiest way to do that is put it in the src/test/resources directory.\r\n\r\nFor more details check the Mockito documentation. \r\n\r\nhttps://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#Mocking_Final\r\n","title":"Mock static method in JUnit 5 using Mockito","body":"<p>You have to add <em><strong>/mockito-extensions/org.mockito.plugins.MockMaker</strong></em> file to the class path containing the value <em><strong>mock-maker-inline</strong></em>.\nEasiest way to do that is put it in the src/test/resources directory.</p>\n<p>For more details check the Mockito documentation.</p>\n<p><a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#Mocking_Final\" rel=\"noreferrer\">https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#Mocking_Final</a></p>\n"},{"tags":[],"owner":{"account_id":4933689,"reputation":577,"user_id":3972599,"display_name":"Amgad Hanafy"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1629490358,"creation_date":1629490358,"answer_id":68867618,"question_id":67299161,"body_markdown":"You need to use `mockito-inline` version `3.4.0` or higher and remove `mockito-core` from your dependencies (`mockito-inline` depends on `mockito-core` so it will be retrieved automatically).\r\n\r\nThat way, you will be using mockito static mocking correctly, but it wouldn&#39;t solve the exception that you posted. \r\n\r\nTo fix it, you need to remove all dependencies of `powermock` as it conflicts with `mockito` and causes this error\r\n```\r\nThe used MockMaker PowerMockMaker does not support the creation of static mocks\r\n``` ","title":"Mock static method in JUnit 5 using Mockito","body":"<p>You need to use <code>mockito-inline</code> version <code>3.4.0</code> or higher and remove <code>mockito-core</code> from your dependencies (<code>mockito-inline</code> depends on <code>mockito-core</code> so it will be retrieved automatically).</p>\n<p>That way, you will be using mockito static mocking correctly, but it wouldn't solve the exception that you posted.</p>\n<p>To fix it, you need to remove all dependencies of <code>powermock</code> as it conflicts with <code>mockito</code> and causes this error</p>\n<pre><code>The used MockMaker PowerMockMaker does not support the creation of static mocks\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1657892799,"creation_date":1657892799,"answer_id":72995019,"question_id":67299161,"body_markdown":"In my case we were using spring boot and below dependency for spring-boot-starter-test and mockito-core was coming internally with spring-boot-starter-test\r\n\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\r\n\r\nuse gradle dependencies to find this\r\n\r\n    +--- org.springframework.boot:spring-boot-starter-test -&gt; 2.6.6\r\n    |    +--- org.springframework.boot:spring-boot-starter:2.6.6 (*)\r\n    |    +--- org.springframework.boot:spring-boot-test:2.6.6\r\n    |    |    \\--- org.springframework.boot:spring-boot:2.6.6 (*)\r\n    |    +--- org.springframework.boot:spring-boot-test-autoconfigure:2.6.6\r\n    |    |    +--- org.springframework.boot:spring-boot:2.6.6 (*)\r\n    |    |    +--- org.springframework.boot:spring-boot-test:2.6.6 (*)\r\n    |    |    \\--- org.springframework.boot:spring-boot-autoconfigure:2.6.6 (*)\r\n    |    +--- com.jayway.jsonpath:json-path:2.6.0\r\n    |    |    +--- net.minidev:json-smart:2.4.7 -&gt; 2.4.8\r\n    |    |    |    \\--- net.minidev:accessors-smart:2.4.8\r\n    |    |    |         \\--- org.ow2.asm:asm:9.1 -&gt; 9.3\r\n    |    |    \\--- org.slf4j:slf4j-api:1.7.30 -&gt; 1.7.36\r\n    |    +--- jakarta.xml.bind:jakarta.xml.bind-api:2.3.3\r\n    |    |    \\--- jakarta.activation:jakarta.activation-api:1.2.2\r\n    |    +--- org.assertj:assertj-core:3.21.0\r\n    |    +--- org.hamcrest:hamcrest:2.2\r\n    |    +--- org.junit.jupiter:junit-jupiter:5.8.2\r\n    |    |    +--- org.junit:junit-bom:5.8.2\r\n    |    |    |    +--- org.junit.jupiter:junit-jupiter:5.8.2 (c)\r\n    |    |    |    +--- org.junit.jupiter:junit-jupiter-api:5.8.2 (c)\r\n    |    |    |    +--- org.junit.jupiter:junit-jupiter-params:5.8.2 (c)\r\n    |    |    |    \\--- org.junit.platform:junit-platform-commons:1.8.2 (c)\r\n    |    |    +--- org.junit.jupiter:junit-jupiter-api:5.8.2\r\n    |    |    |    +--- org.junit:junit-bom:5.8.2 (*)\r\n    |    |    |    +--- org.opentest4j:opentest4j:1.2.0\r\n    |    |    |    +--- org.junit.platform:junit-platform-commons:1.8.2\r\n    |    |    |    |    +--- org.junit:junit-bom:5.8.2 (*)\r\n    |    |    |    |    \\--- org.apiguardian:apiguardian-api:1.1.2\r\n    |    |    |    \\--- org.apiguardian:apiguardian-api:1.1.2\r\n    |    |    \\--- org.junit.jupiter:junit-jupiter-params:5.8.2\r\n    |    |         +--- org.junit:junit-bom:5.8.2 (*)\r\n    |    |         +--- org.junit.jupiter:junit-jupiter-api:5.8.2 (*)\r\n    |    |         \\--- org.apiguardian:apiguardian-api:1.1.2\r\n    |    +--- org.mockito:mockito-core:4.0.0\r\n    |    |    +--- net.bytebuddy:byte-buddy:1.11.19 -&gt; 1.11.22\r\n    |    |    \\--- net.bytebuddy:byte-buddy-agent:1.11.19 -&gt; 1.11.22\r\n    |    +--- org.mockito:mockito-junit-jupiter:4.0.0\r\n    |    |    \\--- org.mockito:mockito-core:4.0.0 (*)\r\n\r\n\r\nSo, 2 steps to solve this issue.\r\n\r\n Exclude the mockito-core from spring-boot-starter-test\r\n\r\n    testImplementation (&#39;org.springframework.boot:spring-boot-starter-test&#39;) \r\n     {\r\n       exclude group: &#39;org.mockito&#39;, module :&#39;mockito-core&#39;\r\n     }\r\nAnd now include the mockito-inline\r\n\r\n    testImplementation &#39;org.mockito:mockito-inline:4.6.1&#39;\r\n\r\nThis will solve the issue.","title":"Mock static method in JUnit 5 using Mockito","body":"<p>In my case we were using spring boot and below dependency for spring-boot-starter-test and mockito-core was coming internally with spring-boot-starter-test</p>\n<pre><code>testImplementation 'org.springframework.boot:spring-boot-starter-test'\n</code></pre>\n<p>use gradle dependencies to find this</p>\n<pre><code>+--- org.springframework.boot:spring-boot-starter-test -&gt; 2.6.6\n|    +--- org.springframework.boot:spring-boot-starter:2.6.6 (*)\n|    +--- org.springframework.boot:spring-boot-test:2.6.6\n|    |    \\--- org.springframework.boot:spring-boot:2.6.6 (*)\n|    +--- org.springframework.boot:spring-boot-test-autoconfigure:2.6.6\n|    |    +--- org.springframework.boot:spring-boot:2.6.6 (*)\n|    |    +--- org.springframework.boot:spring-boot-test:2.6.6 (*)\n|    |    \\--- org.springframework.boot:spring-boot-autoconfigure:2.6.6 (*)\n|    +--- com.jayway.jsonpath:json-path:2.6.0\n|    |    +--- net.minidev:json-smart:2.4.7 -&gt; 2.4.8\n|    |    |    \\--- net.minidev:accessors-smart:2.4.8\n|    |    |         \\--- org.ow2.asm:asm:9.1 -&gt; 9.3\n|    |    \\--- org.slf4j:slf4j-api:1.7.30 -&gt; 1.7.36\n|    +--- jakarta.xml.bind:jakarta.xml.bind-api:2.3.3\n|    |    \\--- jakarta.activation:jakarta.activation-api:1.2.2\n|    +--- org.assertj:assertj-core:3.21.0\n|    +--- org.hamcrest:hamcrest:2.2\n|    +--- org.junit.jupiter:junit-jupiter:5.8.2\n|    |    +--- org.junit:junit-bom:5.8.2\n|    |    |    +--- org.junit.jupiter:junit-jupiter:5.8.2 (c)\n|    |    |    +--- org.junit.jupiter:junit-jupiter-api:5.8.2 (c)\n|    |    |    +--- org.junit.jupiter:junit-jupiter-params:5.8.2 (c)\n|    |    |    \\--- org.junit.platform:junit-platform-commons:1.8.2 (c)\n|    |    +--- org.junit.jupiter:junit-jupiter-api:5.8.2\n|    |    |    +--- org.junit:junit-bom:5.8.2 (*)\n|    |    |    +--- org.opentest4j:opentest4j:1.2.0\n|    |    |    +--- org.junit.platform:junit-platform-commons:1.8.2\n|    |    |    |    +--- org.junit:junit-bom:5.8.2 (*)\n|    |    |    |    \\--- org.apiguardian:apiguardian-api:1.1.2\n|    |    |    \\--- org.apiguardian:apiguardian-api:1.1.2\n|    |    \\--- org.junit.jupiter:junit-jupiter-params:5.8.2\n|    |         +--- org.junit:junit-bom:5.8.2 (*)\n|    |         +--- org.junit.jupiter:junit-jupiter-api:5.8.2 (*)\n|    |         \\--- org.apiguardian:apiguardian-api:1.1.2\n|    +--- org.mockito:mockito-core:4.0.0\n|    |    +--- net.bytebuddy:byte-buddy:1.11.19 -&gt; 1.11.22\n|    |    \\--- net.bytebuddy:byte-buddy-agent:1.11.19 -&gt; 1.11.22\n|    +--- org.mockito:mockito-junit-jupiter:4.0.0\n|    |    \\--- org.mockito:mockito-core:4.0.0 (*)\n</code></pre>\n<p>So, 2 steps to solve this issue.</p>\n<p>Exclude the mockito-core from spring-boot-starter-test</p>\n<pre><code>testImplementation ('org.springframework.boot:spring-boot-starter-test') \n {\n   exclude group: 'org.mockito', module :'mockito-core'\n }\n</code></pre>\n<p>And now include the mockito-inline</p>\n<pre><code>testImplementation 'org.mockito:mockito-inline:4.6.1'\n</code></pre>\n<p>This will solve the issue.</p>\n"},{"tags":[],"owner":{"account_id":3124728,"reputation":1564,"user_id":2643815,"display_name":"Smart Coder"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1660842036,"creation_date":1660842036,"answer_id":73406891,"question_id":67299161,"body_markdown":"Add the following per https://www.baeldung.com/mockito-mock-static-methods: \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"Mock static method in JUnit 5 using Mockito","body":"<p>Add the following per <a href=\"https://www.baeldung.com/mockito-mock-static-methods\" rel=\"noreferrer\">https://www.baeldung.com/mockito-mock-static-methods</a>:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n    &lt;version&gt;3.8.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14987428,"reputation":61,"user_id":10819607,"display_name":"Sachin Nagode"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1663244102,"creation_date":1663244102,"answer_id":73730962,"question_id":67299161,"body_markdown":"I have some resolutions steps for same.\r\n\r\nPlease replace you dependency with below .\r\n\r\n         \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.5.1&lt;/version&gt;\r\n                    &lt;scope&gt;test&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nif use 4.5.1 or latest your code will work\r\n\r\nAlso use your try with resource to mock static method\r\n\r\n    try (MockedStatic&lt;WelcomeUtil&gt; theMock = Mockito.mockStatic(WelcomeUtil.class)) {\r\n                theMock.when(() -&gt; WelcomeUtil.generateWelcome(&quot;John&quot;))\r\n                       .thenReturn(&quot;Guten Tag John&quot;);\r\n    \r\n                assertEquals(&quot;Guten Tag John&quot;, WelcomeUtil.generateWelcome(&quot;John&quot;));\r\n            }","title":"Mock static method in JUnit 5 using Mockito","body":"<p>I have some resolutions steps for same.</p>\n<p>Please replace you dependency with below .</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependency&gt;\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n                &lt;version&gt;4.5.1&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>if use 4.5.1 or latest your code will work</p>\n<p>Also use your try with resource to mock static method</p>\n<pre><code>try (MockedStatic&lt;WelcomeUtil&gt; theMock = Mockito.mockStatic(WelcomeUtil.class)) {\n            theMock.when(() -&gt; WelcomeUtil.generateWelcome(&quot;John&quot;))\n                   .thenReturn(&quot;Guten Tag John&quot;);\n\n            assertEquals(&quot;Guten Tag John&quot;, WelcomeUtil.generateWelcome(&quot;John&quot;));\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13414510,"reputation":43,"user_id":9679591,"display_name":"Brahim BEN ADDI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695824507,"creation_date":1695824507,"answer_id":77188368,"question_id":67299161,"body_markdown":"I have faced this issue while trying to use Mockito5 with **JDK8**, the thing is that &quot;**Instrumentation API**&quot; is not supported by **JDK8**(this is what allows you to mock static classes on runtime) , which is included in **JDK9** and later.\r\n\r\n**Instrumentation API** allows you to alter existing byte-code that is loaded in a JVM.\r\n\r\nSolution 1 :\r\nHere is the work around I did to overcome this issue :\r\n\r\n    dependencies{\r\n    ....\r\n        testImplementation group: &#39;org.mockito&#39;, name: &#39;mockito-inline&#39;, version: &#39;4.8.0&#39;\r\n    \r\n        implementation group: &#39;net.bytebuddy&#39;, name: &#39;byte-buddy-agent&#39;, version: &#39;1.12.14&#39;\r\n    }\r\n    \r\n    configurations {\r\n        byteBuddyAgent\r\n        compile.extendsFrom byteBuddyAgent\r\n    }\r\n    \r\n    test {\r\n    \r\n        // Add the Byte Buddy agent to the JVM arguments during testing, which will be retrieved by the inline-mockito during runtime.\r\n        doFirst {\r\n            // Get the list of dependencies.\r\n            List&lt;File&gt; dependencies = configurations.compileClasspath.files.toList()\r\n    \r\n            // Find the jar file for the `byte-buddy-agent` dependency.\r\n            File byteBuddyAgent = dependencies.find { file -&gt; file.path.contains(&#39;byte-buddy-agent&#39;) }\r\n    \r\n            if (byteBuddyAgent != null) {\r\n                // Get the path to the jar file.\r\n                 jarPath = byteBuddyAgent.absolutePath\r\n                 jvmArgs &#39;-javaagent:&#39; + jarPath\r\n            } else {\r\n                // Handle the case when the desired JAR file is not found.\r\n                println &quot;The &#39;byte-buddy-agent&#39; jar file was not found in the dependencies.&quot;\r\n            }\r\n        }\r\n    \r\n        finalizedBy jacocoTestReport // report is always generated after tests run\r\n    }\r\n\r\nSolution 2 :\r\nUsing **PowerMockito** wans&#39;t practicle for me beacause I need to run **jacococ** reports to see the code coverage and jacoco doesn&#39;t like **PowerMockito** for some reason.\r\n\r\n\r\n","title":"Mock static method in JUnit 5 using Mockito","body":"<p>I have faced this issue while trying to use Mockito5 with <strong>JDK8</strong>, the thing is that &quot;<strong>Instrumentation API</strong>&quot; is not supported by <strong>JDK8</strong>(this is what allows you to mock static classes on runtime) , which is included in <strong>JDK9</strong> and later.</p>\n<p><strong>Instrumentation API</strong> allows you to alter existing byte-code that is loaded in a JVM.</p>\n<p>Solution 1 :\nHere is the work around I did to overcome this issue :</p>\n<pre><code>dependencies{\n....\n    testImplementation group: 'org.mockito', name: 'mockito-inline', version: '4.8.0'\n\n    implementation group: 'net.bytebuddy', name: 'byte-buddy-agent', version: '1.12.14'\n}\n\nconfigurations {\n    byteBuddyAgent\n    compile.extendsFrom byteBuddyAgent\n}\n\ntest {\n\n    // Add the Byte Buddy agent to the JVM arguments during testing, which will be retrieved by the inline-mockito during runtime.\n    doFirst {\n        // Get the list of dependencies.\n        List&lt;File&gt; dependencies = configurations.compileClasspath.files.toList()\n\n        // Find the jar file for the `byte-buddy-agent` dependency.\n        File byteBuddyAgent = dependencies.find { file -&gt; file.path.contains('byte-buddy-agent') }\n\n        if (byteBuddyAgent != null) {\n            // Get the path to the jar file.\n             jarPath = byteBuddyAgent.absolutePath\n             jvmArgs '-javaagent:' + jarPath\n        } else {\n            // Handle the case when the desired JAR file is not found.\n            println &quot;The 'byte-buddy-agent' jar file was not found in the dependencies.&quot;\n        }\n    }\n\n    finalizedBy jacocoTestReport // report is always generated after tests run\n}\n</code></pre>\n<p>Solution 2 :\nUsing <strong>PowerMockito</strong> wans't practicle for me beacause I need to run <strong>jacococ</strong> reports to see the code coverage and jacoco doesn't like <strong>PowerMockito</strong> for some reason.</p>\n"}],"owner":{"account_id":8759373,"reputation":281,"user_id":6549765,"display_name":"Arun Senthoor Pandian"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72037,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"answer_count":6,"score":28,"last_activity_date":1695824507,"creation_date":1619608456,"question_id":67299161,"body_markdown":"I am trying to mock static classes(org.apache.commons.beanutils.Beanutils) for Junit 5 test cases. I came across `mockito-inline` dependency helps with mocking static classes. \r\nI tried to use the `mockito-inline` in the project for some strange reason it give me compilation error in the absence of `mockito-core` library. \r\n\r\nWith `mockito-core` am getting below:\r\n\r\n```\r\norg.mockito.exceptions.base.MockitoException: \r\nThe used MockMaker PowerMockMaker does not support the creation of static mocks\r\n\r\nMockito&#39;s inline mock maker supports static mocks based on the Instrumentation API.\r\nYou can simply enable this mock mode, by placing the &#39;mockito-inline&#39; artifact where you are currently using &#39;mockito-core&#39;.\r\nNote that Mockito&#39;s inline mock maker is not supported on Android.\r\n\tat com.xx.xx.xx.AvroCopyPropertiesInvocationTargetExceptionScenario(CreditOfferServiceTest.java:1197)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:125)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:132)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:124)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:74)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:104)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:62)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:43)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:35)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:202)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:198)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:137)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n```\r\n\r\nWithout the core - compilation issue. Please find the test dependency breakdown without `mockito-core`:\r\n\r\n```\r\n[INFO] +- org.powermock:powermock-api-mockito2:jar:2.0.9:test\r\n[INFO] |  \\- org.powermock:powermock-api-support:jar:2.0.9:test\r\n[INFO] |     +- org.powermock:powermock-reflect:jar:2.0.9:test\r\n[INFO] |     \\- org.powermock:powermock-core:jar:2.0.9:test\r\n[INFO] +- org.mockito:mockito-inline:jar:3.6.28:test\r\n[INFO] |  \\- org.mockito:mockito-core:jar:3.1.0:test\r\n[INFO] |     +- net.bytebuddy:byte-buddy:jar:1.10.10:test\r\n[INFO] |     +- net.bytebuddy:byte-buddy-agent:jar:1.10.10:test\r\n[INFO] |     \\- org.objenesis:objenesis:jar:2.6:test\r\n[INFO] +- org.mockito:mockito-junit-jupiter:jar:3.6.0:test\r\n[INFO] |  \\- org.junit.jupiter:junit-jupiter-api:jar:5.5.2:test\r\n[INFO] |     +- org.opentest4j:opentest4j:jar:1.2.0:test\r\n[INFO] |     \\- org.junit.platform:junit-platform-commons:jar:1.5.2\r\n\r\n```\r\n\r\n","title":"Mock static method in JUnit 5 using Mockito","body":"<p>I am trying to mock static classes(org.apache.commons.beanutils.Beanutils) for Junit 5 test cases. I came across <code>mockito-inline</code> dependency helps with mocking static classes.\nI tried to use the <code>mockito-inline</code> in the project for some strange reason it give me compilation error in the absence of <code>mockito-core</code> library.</p>\n<p>With <code>mockito-core</code> am getting below:</p>\n<pre><code>org.mockito.exceptions.base.MockitoException: \nThe used MockMaker PowerMockMaker does not support the creation of static mocks\n\nMockito's inline mock maker supports static mocks based on the Instrumentation API.\nYou can simply enable this mock mode, by placing the 'mockito-inline' artifact where you are currently using 'mockito-core'.\nNote that Mockito's inline mock maker is not supported on Android.\n    at com.xx.xx.xx.AvroCopyPropertiesInvocationTargetExceptionScenario(CreditOfferServiceTest.java:1197)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:125)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:132)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:124)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:74)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:104)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:62)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:43)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:35)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:202)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:198)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:137)\n    at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n<p>Without the core - compilation issue. Please find the test dependency breakdown without <code>mockito-core</code>:</p>\n<pre><code>[INFO] +- org.powermock:powermock-api-mockito2:jar:2.0.9:test\n[INFO] |  \\- org.powermock:powermock-api-support:jar:2.0.9:test\n[INFO] |     +- org.powermock:powermock-reflect:jar:2.0.9:test\n[INFO] |     \\- org.powermock:powermock-core:jar:2.0.9:test\n[INFO] +- org.mockito:mockito-inline:jar:3.6.28:test\n[INFO] |  \\- org.mockito:mockito-core:jar:3.1.0:test\n[INFO] |     +- net.bytebuddy:byte-buddy:jar:1.10.10:test\n[INFO] |     +- net.bytebuddy:byte-buddy-agent:jar:1.10.10:test\n[INFO] |     \\- org.objenesis:objenesis:jar:2.6:test\n[INFO] +- org.mockito:mockito-junit-jupiter:jar:3.6.0:test\n[INFO] |  \\- org.junit.jupiter:junit-jupiter-api:jar:5.5.2:test\n[INFO] |     +- org.opentest4j:opentest4j:jar:1.2.0:test\n[INFO] |     \\- org.junit.platform:junit-platform-commons:jar:1.5.2\n\n</code></pre>\n"},{"tags":["java","list","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1695494157,"post_id":77162562,"comment_id":136033100,"body_markdown":"You have two fields trying to control the value put in the &quot;seqNo&quot; column. If you want to manually control the column, you should be using @OrderBy on the OneToMany so that it uses those values - it is then up to you to set them in the Product","body":"You have two fields trying to control the value put in the &quot;seqNo&quot; column. If you want to manually control the column, you should be using @OrderBy on the OneToMany so that it uses those values - it is then up to you to set them in the Product"}],"answers":[{"tags":[],"owner":{"account_id":8532,"reputation":13097,"user_id":15452,"accept_rate":57,"display_name":"Vihung"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695824207,"creation_date":1695824207,"answer_id":77188318,"question_id":77162562,"body_markdown":"Taking my cue from @Chris (https://stackoverflow.com/users/496099/chris), I made sure that my `seqNo` values were always reconciled before saving, with\r\n\r\n```\r\npublic void reconcileSequenceNumbers() {\r\n        products.stream().forEach(p -&gt; {\r\n            int oldSeqNo = p.getSeqNo();\r\n            int newSeqNo = products.indexOf(p);\r\n\r\n            if (newSeqNo != oldSeqNo) {\r\n                p.setSeqNo(newSeqNo);\r\n            }\r\n        });\r\n    }\r\n```","title":"How do I prevent Lists returned from a JPA Repository having null values","body":"<p>Taking my cue from @Chris (<a href=\"https://stackoverflow.com/users/496099/chris\">https://stackoverflow.com/users/496099/chris</a>), I made sure that my <code>seqNo</code> values were always reconciled before saving, with</p>\n<pre><code>public void reconcileSequenceNumbers() {\n        products.stream().forEach(p -&gt; {\n            int oldSeqNo = p.getSeqNo();\n            int newSeqNo = products.indexOf(p);\n\n            if (newSeqNo != oldSeqNo) {\n                p.setSeqNo(newSeqNo);\n            }\n        });\n    }\n</code></pre>\n"}],"owner":{"account_id":8532,"reputation":13097,"user_id":15452,"accept_rate":57,"display_name":"Vihung"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77188318,"answer_count":1,"score":2,"last_activity_date":1695824207,"creation_date":1695464109,"question_id":77162562,"body_markdown":"I have parent-child object model where `Category` has a list of `Product`s. This is biderectional, the `Product` has a `parentCategory` property.\r\n\r\nThis is modelled as a `OneToMany` and `ManyToOne` JPA Mapping.\r\n\r\n```\r\n@Data\r\n@Entity\r\npublic class Category {\r\n    @Id private String id;\r\n\r\n    private String displayName;\r\n\r\n    @OneToMany(\r\n            mappedBy = &quot;parentCategory&quot;,\r\n            cascade = CascadeType.ALL,\r\n            orphanRemoval = true\r\n    )\r\n    @OrderColumn(name = &quot;seqNo&quot;)\r\n    private List&lt;Product&gt; products;\r\n}\r\n```\r\nand\r\n```\r\n@Data\r\n@Entity\r\npublic class Product {\r\n    @Id\r\n    private String id;\r\n\r\n    private String displayName;\r\n    \r\n    @ToString.Exclude\r\n    @JsonIgnore\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private Category parentCategory;\r\n\r\n    @JsonIgnore\r\n    private int seqNo;\r\n}\r\n```\r\nBecause the order of products is important, and I want the user to manually reorder them, I have added a `seqNo` property/column and have specified the `@OrderColumn`.\r\n\r\nWhen moving products up or down, I do\r\n```\r\nCollections.swap(products, index, index + 1);\r\n\r\n```\r\nor \r\n```\r\nCollections.swap(products, index, index - 1);\r\n\r\n``` \r\nas required, and then `repository.save(category)`\r\n\r\nThe `Product` List gats saved with `seqNo` in the correct order, but often (but not always) there are gaps in the sequence, giving rise to `null` elements in the list.\r\n\r\nLikewise, when assigning a new `Category` to a `Product`, I do\r\n```\r\noldParentCategory.getProducts().remove(product);\r\nnewParentCategory.addProduct(product); // this sets parentCategory on Product as well as adds Product to Category&#39;s products List\r\ncategoryRepository.saveAll(Arrays.asList(new Category[]{oldParentCategory, newParentCategory}));\r\n```\r\nThis also leaves a gap in the old `Category`&#39;s sequence numbers.\r\n\r\nWhat am I doing wrong? and how do I fix it?\r\n\r\n(**P.S.**: My JPA implementation is Hibernate [via Spring Boot]. My database is file-based H2 with a pretty basic setup [in development], if that&#39;s relevant)\r\n","title":"How do I prevent Lists returned from a JPA Repository having null values","body":"<p>I have parent-child object model where <code>Category</code> has a list of <code>Product</code>s. This is biderectional, the <code>Product</code> has a <code>parentCategory</code> property.</p>\n<p>This is modelled as a <code>OneToMany</code> and <code>ManyToOne</code> JPA Mapping.</p>\n<pre><code>@Data\n@Entity\npublic class Category {\n    @Id private String id;\n\n    private String displayName;\n\n    @OneToMany(\n            mappedBy = &quot;parentCategory&quot;,\n            cascade = CascadeType.ALL,\n            orphanRemoval = true\n    )\n    @OrderColumn(name = &quot;seqNo&quot;)\n    private List&lt;Product&gt; products;\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Data\n@Entity\npublic class Product {\n    @Id\n    private String id;\n\n    private String displayName;\n    \n    @ToString.Exclude\n    @JsonIgnore\n    @ManyToOne(fetch = FetchType.LAZY)\n    private Category parentCategory;\n\n    @JsonIgnore\n    private int seqNo;\n}\n</code></pre>\n<p>Because the order of products is important, and I want the user to manually reorder them, I have added a <code>seqNo</code> property/column and have specified the <code>@OrderColumn</code>.</p>\n<p>When moving products up or down, I do</p>\n<pre><code>Collections.swap(products, index, index + 1);\n\n</code></pre>\n<p>or</p>\n<pre><code>Collections.swap(products, index, index - 1);\n\n</code></pre>\n<p>as required, and then <code>repository.save(category)</code></p>\n<p>The <code>Product</code> List gats saved with <code>seqNo</code> in the correct order, but often (but not always) there are gaps in the sequence, giving rise to <code>null</code> elements in the list.</p>\n<p>Likewise, when assigning a new <code>Category</code> to a <code>Product</code>, I do</p>\n<pre><code>oldParentCategory.getProducts().remove(product);\nnewParentCategory.addProduct(product); // this sets parentCategory on Product as well as adds Product to Category's products List\ncategoryRepository.saveAll(Arrays.asList(new Category[]{oldParentCategory, newParentCategory}));\n</code></pre>\n<p>This also leaves a gap in the old <code>Category</code>'s sequence numbers.</p>\n<p>What am I doing wrong? and how do I fix it?</p>\n<p>(<strong>P.S.</strong>: My JPA implementation is Hibernate [via Spring Boot]. My database is file-based H2 with a pretty basic setup [in development], if that's relevant)</p>\n"},{"tags":["java","spring-boot","unit-testing","jpa","mocking"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1695741592,"post_id":77181085,"comment_id":136063572,"body_markdown":"How and where is `messagesService` created? I would expect to see it declared as a field in the test with an `@InjectMocks` annotation, but instead I don&#39;t see it declared in this code at all?","body":"How and where is <code>messagesService</code> created? I would expect to see it declared as a field in the test with an <code>@InjectMocks</code> annotation, but instead I don&#39;t see it declared in this code at all?"},{"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"score":0,"creation_date":1695741987,"post_id":77181085,"comment_id":136063670,"body_markdown":"@DavidConrad It isn&#39;t really relevant to this example since the test is erroring out before it ever gets to the service call. I will update the example to include the service injection for the sake of clarity however.","body":"@DavidConrad It isn&#39;t really relevant to this example since the test is erroring out before it ever gets to the service call. I will update the example to include the service injection for the sake of clarity however."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1695743865,"post_id":77181085,"comment_id":136064085,"body_markdown":"Injecting it with `@Autowired` means you&#39;ll get one created by Spring with all the normal dependencies, not any mock dependencies.","body":"Injecting it with <code>@Autowired</code> means you&#39;ll get one created by Spring with all the normal dependencies, not any mock dependencies."},{"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"score":0,"creation_date":1695746553,"post_id":77181085,"comment_id":136064593,"body_markdown":"@DavidConrad Right. The MessagesService isn&#39;t the problem here. It is the DateTimeProvider that I need to mock.","body":"@DavidConrad Right. The MessagesService isn&#39;t the problem here. It is the DateTimeProvider that I need to mock."}],"answers":[{"tags":[],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695824163,"creation_date":1695824163,"answer_id":77188312,"question_id":77181085,"body_markdown":"I finally managed to figure out the problem. I was using hibernate @CreationTimestamp in my entity class to annotate the createdDate field. All the examples I have been looking at use JPA @CreatedDate instead. I found a more complete example here: https://mkyong.com/spring-boot/mocking-spring-data-datetimeprovider/ that gave me enough information to get things working.\r\n\r\nThat said, I&#39;m still curious if anyone knows if a good solution to this problem for the hibernate specific annotations. I will leave the question open for now. ","title":"Creating a DateTimeProvider bean for mocking","body":"<p>I finally managed to figure out the problem. I was using hibernate @CreationTimestamp in my entity class to annotate the createdDate field. All the examples I have been looking at use JPA @CreatedDate instead. I found a more complete example here: <a href=\"https://mkyong.com/spring-boot/mocking-spring-data-datetimeprovider/\" rel=\"nofollow noreferrer\">https://mkyong.com/spring-boot/mocking-spring-data-datetimeprovider/</a> that gave me enough information to get things working.</p>\n<p>That said, I'm still curious if anyone knows if a good solution to this problem for the hibernate specific annotations. I will leave the question open for now.</p>\n"}],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695824163,"creation_date":1695739639,"question_id":77181085,"body_markdown":"I need to write some tests for a JPA service that is creating/updating an entity. In order to properly test the &#39;createDate&#39; field, I need to mock the DateTimeProvider that JPA is using so that I can test against a fixed date. I found a partial answer here: https://stackoverflow.com/a/63530418/1860222 but they don&#39;t provide any details on HOW to define the testDateTimeProvider bean. I found another post that looked close to what I needed (https://stackoverflow.com/questions/67991672/java-spring-boot-mockito-mockbean-annotation-work-strange), but so far I have not been able to get that working either.\r\n\r\nI created a Service class like this:\r\n\r\n    @Service(&quot;testDateTimeProvider&quot;)\r\n    public class TestDateTimeProvider implements DateTimeProvider {\r\n        \r\n        public TestDateTimeProvider() {\r\n        }\r\n    \r\n        /**\r\n         * Returns the current time to be used as modification or creation date.\r\n         *\r\n         * @return\r\n         */\r\n        @Override\r\n        public Optional&lt;TemporalAccessor&gt; getNow() {\r\n            return Optional.of(LocalDateTime.now(Clock.fixed(Instant.parse(&quot;2023-09-22T17:00:00.00Z&quot;), ZoneId.of(&quot;UTC&quot;))));\r\n        }\r\n    }\r\n\r\nIn my tests I have a class like:\r\n\r\n    @SpringJUnitConfig\r\n    @ContextConfiguration\r\n    @TestExecutionListeners({ DependencyInjectionTestExecutionListener.class,\r\n            DbUnitTestExecutionListener.class })\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n    @DatabaseSetup(&quot;data.xml&quot;)\r\n    @DatabaseTearDown(&quot;data.xml&quot;)\r\n    @Import({TestDateTimeProvider.class})\r\n    @EnableJpaAuditing(dateTimeProviderRef = &quot;testDateTimeProvider&quot;)\r\n    public class MessageServiceTest {\r\n        @Autowired\r\n        private Clock clock;\r\n        \r\n        @Autowired\r\n        MessagesService messagesService;\r\n\r\n        @MockBean\r\n        private DateTimeProvider dateTimeProvider;\r\n    \r\n        @Test\r\n        public void testSaveNewMessage()\r\n        {\r\n            LocalDateTime expectedCreate = LocalDateTime.now(clock);\r\n            Mockito.when( dateTimeProvider.getNow()).thenReturn(Optional.of(expectedCreate));\r\n            Message actual = messagesService.saveMessage(&quot;abc&quot;, 123);\r\n            assertNotNull(actual);\r\n            assertThat(actual.getCreateDate()).isEqualToIgnoringNanos(expectedCreate);\r\n        }\r\n    }\r\n\r\nIf I run that test, it will fail while setting up the mock. Stepping through the code, I can see that &#39;dateTimeProvider&#39; never gets injected, so a null pointer exception will be thrown when calling &#39;dateTimeProvider.now&#39;. \r\n\r\nI&#39;m a bit new to spring so I&#39;m not quite sure what I&#39;m doing wrong here. Why is my MockBean not getting injected? Is this even the correct approach for mocking creation timestamps?","title":"Creating a DateTimeProvider bean for mocking","body":"<p>I need to write some tests for a JPA service that is creating/updating an entity. In order to properly test the 'createDate' field, I need to mock the DateTimeProvider that JPA is using so that I can test against a fixed date. I found a partial answer here: <a href=\"https://stackoverflow.com/a/63530418/1860222\">https://stackoverflow.com/a/63530418/1860222</a> but they don't provide any details on HOW to define the testDateTimeProvider bean. I found another post that looked close to what I needed (<a href=\"https://stackoverflow.com/questions/67991672/java-spring-boot-mockito-mockbean-annotation-work-strange\">Java/Spring-boot/Mockito @MockBean annotation work strange</a>), but so far I have not been able to get that working either.</p>\n<p>I created a Service class like this:</p>\n<pre><code>@Service(&quot;testDateTimeProvider&quot;)\npublic class TestDateTimeProvider implements DateTimeProvider {\n    \n    public TestDateTimeProvider() {\n    }\n\n    /**\n     * Returns the current time to be used as modification or creation date.\n     *\n     * @return\n     */\n    @Override\n    public Optional&lt;TemporalAccessor&gt; getNow() {\n        return Optional.of(LocalDateTime.now(Clock.fixed(Instant.parse(&quot;2023-09-22T17:00:00.00Z&quot;), ZoneId.of(&quot;UTC&quot;))));\n    }\n}\n</code></pre>\n<p>In my tests I have a class like:</p>\n<pre><code>@SpringJUnitConfig\n@ContextConfiguration\n@TestExecutionListeners({ DependencyInjectionTestExecutionListener.class,\n        DbUnitTestExecutionListener.class })\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@DatabaseSetup(&quot;data.xml&quot;)\n@DatabaseTearDown(&quot;data.xml&quot;)\n@Import({TestDateTimeProvider.class})\n@EnableJpaAuditing(dateTimeProviderRef = &quot;testDateTimeProvider&quot;)\npublic class MessageServiceTest {\n    @Autowired\n    private Clock clock;\n    \n    @Autowired\n    MessagesService messagesService;\n\n    @MockBean\n    private DateTimeProvider dateTimeProvider;\n\n    @Test\n    public void testSaveNewMessage()\n    {\n        LocalDateTime expectedCreate = LocalDateTime.now(clock);\n        Mockito.when( dateTimeProvider.getNow()).thenReturn(Optional.of(expectedCreate));\n        Message actual = messagesService.saveMessage(&quot;abc&quot;, 123);\n        assertNotNull(actual);\n        assertThat(actual.getCreateDate()).isEqualToIgnoringNanos(expectedCreate);\n    }\n}\n</code></pre>\n<p>If I run that test, it will fail while setting up the mock. Stepping through the code, I can see that 'dateTimeProvider' never gets injected, so a null pointer exception will be thrown when calling 'dateTimeProvider.now'.</p>\n<p>I'm a bit new to spring so I'm not quite sure what I'm doing wrong here. Why is my MockBean not getting injected? Is this even the correct approach for mocking creation timestamps?</p>\n"},{"tags":["java","hibernate","jdbc","quarkus","agroal"],"answers":[{"tags":[],"owner":{"account_id":7543347,"reputation":1,"user_id":5727245,"display_name":"Barreiro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695041835,"creation_date":1695041835,"answer_id":77127415,"question_id":77116105,"body_markdown":"The JDBC extension for the official driver sets an `ExceptionSorter` to flush those connections faster. That mechanism could be use in an extension for the custom `JTDS` driver\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n        &lt;artifactId&gt;quarkus-jdbc-mssql&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nOtherwise, you can reduce the background validation interval. \r\n\r\nPlease note that there is no way to ensure 100% reliability in these scenarios, as a connection can pass validation and still fail right after that.","title":"How to turn connection pool fault-tolerant in Quarkus?","body":"<p>The JDBC extension for the official driver sets an <code>ExceptionSorter</code> to flush those connections faster. That mechanism could be use in an extension for the custom <code>JTDS</code> driver</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n    &lt;artifactId&gt;quarkus-jdbc-mssql&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Otherwise, you can reduce the background validation interval.</p>\n<p>Please note that there is no way to ensure 100% reliability in these scenarios, as a connection can pass validation and still fail right after that.</p>\n"},{"tags":[],"owner":{"account_id":3568344,"reputation":645,"user_id":2979325,"display_name":"Serkan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695824063,"creation_date":1695824063,"answer_id":77188301,"question_id":77116105,"body_markdown":"I have the following settings in production and it works when our db cluster fails sometimes:\r\n\r\n```\r\nquarkus.datasource.jdbc.max-lifetime=5M\r\nquarkus.datasource.jdbc.idle-removal-interval=3M\r\nquarkus.datasource.jdbc.validation-query-sql=select 1\r\n```\r\n\r\nYou can also test it by yourself, by starting the application and the db via docker, then kill the db and restart the db and see if your application still works.","title":"How to turn connection pool fault-tolerant in Quarkus?","body":"<p>I have the following settings in production and it works when our db cluster fails sometimes:</p>\n<pre><code>quarkus.datasource.jdbc.max-lifetime=5M\nquarkus.datasource.jdbc.idle-removal-interval=3M\nquarkus.datasource.jdbc.validation-query-sql=select 1\n</code></pre>\n<p>You can also test it by yourself, by starting the application and the db via docker, then kill the db and restart the db and see if your application still works.</p>\n"}],"owner":{"account_id":13830375,"reputation":118,"user_id":9983440,"display_name":"Renato Silva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695824063,"creation_date":1694830036,"question_id":77116105,"body_markdown":"I&#39;m working on a **quarkus** (2.16.5) application with MSSqlserver and **Jtds** driver.\r\n\r\nUnfortunately, although I&#39;ve configured *validation-query* and *background-validation* properties, I&#39;m still getting connections in invalid state when network goes down and recovered few moments later.\r\n\r\nIn order to improve the reliability, **There is a way (config) to prevent quarkus application from using invalid connections and remove them from the pool?**\r\n\r\nError\r\n```\r\nCaused by: java.sql.SQLException: Invalid state, the Connection object is closed.\r\n\tat net.sourceforge.jtds.jdbc.JtdsConnection.checkOpen(JtdsConnection.java:1744)\r\n\tat net.sourceforge.jtds.jdbc.JtdsConnection.prepareStatement(JtdsConnection.java:2448)\r\n\tat io.agroal.pool.wrapper.ConnectionWrapper.prepareStatement(ConnectionWrapper.java:658)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:149)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:176)\r\n```\r\n\r\n\r\nDataSource configuration:\r\n```\r\nquarkus.datasource.jdbc.min-size=5\r\nquarkus.datasource.jdbc.max-size=20\r\nquarkus.datasource.jdbc.initial-size=5\r\nquarkus.datasource.jdbc.acquisition-timeout=10\r\nquarkus.datasource.jdbc.background-validation-interval=5\r\nquarkus.datasource.jdbc.validation-query-sql=SELECT 1\r\nquarkus.transaction-manager.default-transaction-timeout=600\r\n\r\nquarkus.datasource.db-kind=other \r\nquarkus.datasource.username=sa\r\nquarkus.datasource.password=123456\r\nquarkus.datasource.jdbc.url=jdbc:jtds:sqlserver://sqlserver-local/MYDB;\r\nquarkus.datasource.jdbc.driver=net.sourceforge.jtds.jdbc.Driver\r\nquarkus.hibernate-orm.dialect=org.hibernate.dialect.SQLServerDialect\r\n```\r\n\r\nPOM&#39;s dependencies\r\n```\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-resteasy-reactive-jsonb&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-arc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-resteasy-reactive&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-elytron-security-ldap&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-hibernate-orm&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-narayana-jta&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jtds&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n","title":"How to turn connection pool fault-tolerant in Quarkus?","body":"<p>I'm working on a <strong>quarkus</strong> (2.16.5) application with MSSqlserver and <strong>Jtds</strong> driver.</p>\n<p>Unfortunately, although I've configured <em>validation-query</em> and <em>background-validation</em> properties, I'm still getting connections in invalid state when network goes down and recovered few moments later.</p>\n<p>In order to improve the reliability, <strong>There is a way (config) to prevent quarkus application from using invalid connections and remove them from the pool?</strong></p>\n<p>Error</p>\n<pre><code>Caused by: java.sql.SQLException: Invalid state, the Connection object is closed.\n    at net.sourceforge.jtds.jdbc.JtdsConnection.checkOpen(JtdsConnection.java:1744)\n    at net.sourceforge.jtds.jdbc.JtdsConnection.prepareStatement(JtdsConnection.java:2448)\n    at io.agroal.pool.wrapper.ConnectionWrapper.prepareStatement(ConnectionWrapper.java:658)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:149)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:176)\n</code></pre>\n<p>DataSource configuration:</p>\n<pre><code>quarkus.datasource.jdbc.min-size=5\nquarkus.datasource.jdbc.max-size=20\nquarkus.datasource.jdbc.initial-size=5\nquarkus.datasource.jdbc.acquisition-timeout=10\nquarkus.datasource.jdbc.background-validation-interval=5\nquarkus.datasource.jdbc.validation-query-sql=SELECT 1\nquarkus.transaction-manager.default-transaction-timeout=600\n\nquarkus.datasource.db-kind=other \nquarkus.datasource.username=sa\nquarkus.datasource.password=123456\nquarkus.datasource.jdbc.url=jdbc:jtds:sqlserver://sqlserver-local/MYDB;\nquarkus.datasource.jdbc.driver=net.sourceforge.jtds.jdbc.Driver\nquarkus.hibernate-orm.dialect=org.hibernate.dialect.SQLServerDialect\n</code></pre>\n<p>POM's dependencies</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-resteasy-reactive-jsonb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-arc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-resteasy-reactive&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-elytron-security-ldap&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-hibernate-orm&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n            &lt;artifactId&gt;quarkus-narayana-jta&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sourceforge.jtds&lt;/groupId&gt;\n            &lt;artifactId&gt;jtds&lt;/artifactId&gt;\n            &lt;version&gt;1.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1695818082,"post_id":77187517,"comment_id":136074515,"body_markdown":"@OleV.V. at least one :)","body":"@OleV.V. at least one :)"},{"owner":{"account_id":6397988,"reputation":7696,"user_id":4961700,"accept_rate":50,"display_name":"Solar Mike"},"score":1,"creation_date":1695818163,"post_id":77187517,"comment_id":136074536,"body_markdown":"You need an OR condition, not an AND condition.","body":"You need an OR condition, not an AND condition."},{"owner":{"account_id":2201062,"reputation":391,"user_id":1945451,"accept_rate":85,"display_name":"ESipalis"},"score":0,"creation_date":1695818336,"post_id":77187517,"comment_id":136074570,"body_markdown":"I have no experience with Spring, so this is a long shot, but have you tried specifying the annotation multiple times?@ConditionalOnBean({BeanA.class}) @ConditionalOnBean({BeanB.class})","body":"I have no experience with Spring, so this is a long shot, but have you tried specifying the annotation multiple times?@ConditionalOnBean({BeanA.class}) @ConditionalOnBean({BeanB.class})"},{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1695818410,"post_id":77187517,"comment_id":136074587,"body_markdown":"@SolarMike not sure what you mean. Did I specify somewhere explicitly the &#39;AND&#39; condition?","body":"@SolarMike not sure what you mean. Did I specify somewhere explicitly the &#39;AND&#39; condition?"},{"owner":{"account_id":7414275,"reputation":14648,"user_id":5640649,"accept_rate":91,"display_name":"lealceldeiro"},"score":1,"creation_date":1695818437,"post_id":77187517,"comment_id":136074593,"body_markdown":"You may need a custom annotation. An example here https://www.baeldung.com/spring-conditional-annotations#defining-custom-conditions","body":"You may need a custom annotation. An example here <a href=\"https://www.baeldung.com/spring-conditional-annotations#defining-custom-conditions\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>"},{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1695818451,"post_id":77187517,"comment_id":136074596,"body_markdown":"@ESipalis Yes. That would not compile as `@ConditionalOnBean` is not a repeatable annotation.","body":"@ESipalis Yes. That would not compile as <code>@ConditionalOnBean</code> is not a repeatable annotation."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":2,"creation_date":1695818702,"post_id":77187517,"comment_id":136074653,"body_markdown":"You can probably use https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/condition/AnyNestedCondition.html","body":"You can probably use <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/condition/AnyNestedCondition.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/api/org/springframew&zwnj;&#8203;ork/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695824036,"creation_date":1695819847,"answer_id":77187786,"question_id":77187517,"body_markdown":"As per suggestions of [@lealceldeiro][1], [@Rob Spoor][2] and [@Solar Mike][3] in the comments to the post, custom annotation based on OR (not AND) conditions was the correct solution.\r\n\r\nMy solution is this class that extends `AnyNestedCondition`:\r\n```\r\npublic class ConditionalOnMyTerms extends AnyNestedCondition {\r\n\r\n    ConditionalOnMyTerms() {\r\n        super(ConfigurationPhase.REGISTER_BEAN);\r\n    }\r\n\r\n    @ConditionalOnBean(com.example.BeanA.class)\r\n    static class BeanA {}\r\n\r\n    @ConditionalOnBean(com.example.BeanB.class)\r\n    static class BeanB {}\r\n\r\n    @Profile(&quot;foo&quot;)\r\n    static class fooProfile {}\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/5640649/lealceldeiro\r\n  [2]: https://stackoverflow.com/users/1180351/rob-spoor\r\n  [3]: https://stackoverflow.com/users/4961700/solar-mike","title":"Conditional statements: one of requirements must be met, not all","body":"<p>As per suggestions of <a href=\"https://stackoverflow.com/users/5640649/lealceldeiro\">@lealceldeiro</a>, <a href=\"https://stackoverflow.com/users/1180351/rob-spoor\">@Rob Spoor</a> and <a href=\"https://stackoverflow.com/users/4961700/solar-mike\">@Solar Mike</a> in the comments to the post, custom annotation based on OR (not AND) conditions was the correct solution.</p>\n<p>My solution is this class that extends <code>AnyNestedCondition</code>:</p>\n<pre><code>public class ConditionalOnMyTerms extends AnyNestedCondition {\n\n    ConditionalOnMyTerms() {\n        super(ConfigurationPhase.REGISTER_BEAN);\n    }\n\n    @ConditionalOnBean(com.example.BeanA.class)\n    static class BeanA {}\n\n    @ConditionalOnBean(com.example.BeanB.class)\n    static class BeanB {}\n\n    @Profile(&quot;foo&quot;)\n    static class fooProfile {}\n}\n</code></pre>\n"}],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695824036,"creation_date":1695817717,"question_id":77187517,"body_markdown":"I have a class which is also a Spring component.\r\n```\r\n@Component\r\npublic class ComponentClass {\r\n    // code\r\n}\r\n```\r\nI want it to be created only on some conditions. For example, &lt;b&gt;at least ONE&lt;/b&gt; of these conditions must be met:\r\n* `BeanA` must exist\r\n* `BeanB` must exist\r\n* profile `foo` must be set\r\n\r\nFor example, `@ConditionalOnBean({BeanA.class, BeanB.class})` does not do what I want as it means both of these beans must exist.","title":"Conditional statements: one of requirements must be met, not all","body":"<p>I have a class which is also a Spring component.</p>\n<pre><code>@Component\npublic class ComponentClass {\n    // code\n}\n</code></pre>\n<p>I want it to be created only on some conditions. For example, <b>at least ONE</b> of these conditions must be met:</p>\n<ul>\n<li><code>BeanA</code> must exist</li>\n<li><code>BeanB</code> must exist</li>\n<li>profile <code>foo</code> must be set</li>\n</ul>\n<p>For example, <code>@ConditionalOnBean({BeanA.class, BeanB.class})</code> does not do what I want as it means both of these beans must exist.</p>\n"},{"tags":["java","spring","intellij-idea"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695737740,"post_id":77180752,"comment_id":136062631,"body_markdown":"Not unless you write a plugin/extension for Intellij.","body":"Not unless you write a plugin/extension for Intellij."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1695742161,"post_id":77180752,"comment_id":136063708,"body_markdown":"@M.Deinum but how does IntelliJ know that `@Autowired` fields are initialized? I need something similar, I guess","body":"@M.Deinum but how does IntelliJ know that <code>@Autowired</code> fields are initialized? I need something similar, I guess"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695749181,"post_id":77180752,"comment_id":136065060,"body_markdown":"That is due to the dedicated Spring Plugins which are programmed just for that cause, much like the CDI plugin is for CDI annotations.","body":"That is due to the dedicated Spring Plugins which are programmed just for that cause, much like the CDI plugin is for CDI annotations."}],"answers":[{"tags":[],"owner":{"account_id":3169,"reputation":24369,"user_id":4510,"display_name":"Bas Leijdekkers"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695823683,"creation_date":1695767892,"answer_id":77183793,"question_id":77180752,"body_markdown":"Type &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Enter&lt;/kbd&gt; on the warning and select `Assume field annotated by @Wisdom as implicitly written` in the intention list that appears. Now any field annotated by `@Wisdom` will no longer be reported as not assigned. \r\n\r\nThis will add the annotation to the &quot;Unused declaration&quot; inspection&#39;s settings. You can remove it again, by going the settings of this inspection, selecting the Entry Points tab, and clicking the Annotations button. The annotation name will be in the bottom list of the dialog that appears.\r\n\r\n![inspection settings visual guide][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VIyjd.jpg","title":"Making IntelliJ aware of my custom field injection mechanism","body":"<p>Type <kbd>Alt</kbd>+<kbd>Enter</kbd> on the warning and select <code>Assume field annotated by @Wisdom as implicitly written</code> in the intention list that appears. Now any field annotated by <code>@Wisdom</code> will no longer be reported as not assigned.</p>\n<p>This will add the annotation to the &quot;Unused declaration&quot; inspection's settings. You can remove it again, by going the settings of this inspection, selecting the Entry Points tab, and clicking the Annotations button. The annotation name will be in the bottom list of the dialog that appears.</p>\n<p><img src=\"https://i.stack.imgur.com/VIyjd.jpg\" alt=\"inspection settings visual guide\" /></p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77183793,"answer_count":1,"score":0,"last_activity_date":1695823683,"creation_date":1695736940,"question_id":77180752,"body_markdown":"I wrote a simple `BeanPostProcessor` to get more familiar with how Spring works\r\n```java\r\npackage org.example.demos.beanPostProcessor;\r\n\r\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\r\n\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        var context = new AnnotationConfigApplicationContext(Config.class);\r\n        Sage sage = context.getBean(&quot;sage&quot;, Sage.class);\r\n        sage.sayWisdom();\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example.demos.beanPostProcessor;\r\n\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\n@ComponentScan\r\npublic class Config {\r\n}\r\n```\r\n```java\r\npackage org.example.demos.beanPostProcessor;\r\n\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class Sage {\r\n    @Wisdom\r\n    private String wisdom; // &quot;never assigned&quot;\r\n\r\n    public void sayWisdom() {\r\n        String processedWisdom = process(wisdom);\r\n        System.out.println(processedWisdom);\r\n    }\r\n\r\n    private String process(String wisdom) {\r\n        String intro = getIntro();\r\n        String wiserWisdom = makeItSoundWiser(wisdom);\r\n        return intro + &quot; &quot; + wiserWisdom;\r\n    }\r\n\r\n    private String getIntro() {\r\n        return &quot;Sage says:&quot;;\r\n    }\r\n\r\n    private String makeItSoundWiser(String wisdom) {\r\n        return wisdom.replaceAll(&quot;\\\\.(?=\\\\s|$)|(?&lt;!\\\\.)(?=$)&quot;, &quot;...&quot;);\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example.demos.beanPostProcessor;\r\n\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class SimpleWisdomProvider implements WisdomProvider {\r\n    private final String[] wisdoms = {\r\n            &quot;Tomorrow is often the busiest day of the week.&quot;,\r\n            &quot;I have always wanted to be somebody, but I see now I should have been more specific.&quot;,\r\n            &quot;Knowledge is like underwear. It is useful to have it, but not necessary to show it off.&quot;,\r\n            &quot;Go to Heaven for the climate, Hell for the company.&quot;,\r\n            &quot;Going to church doesn’t make you a Christian any more than going to a garage makes you an automobile.&quot;\r\n    };\r\n\r\n    @Override\r\n    public String getWisdom() {\r\n        int randomIndex = ThreadLocalRandom.current().nextInt(wisdoms.length);\r\n        return wisdoms[randomIndex];\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example.demos.beanPostProcessor;\r\n\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.FIELD)\r\npublic @interface Wisdom {\r\n}\r\n```\r\n```java\r\npackage org.example.demos.beanPostProcessor;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.beans.BeansException;\r\nimport org.springframework.beans.factory.config.BeanPostProcessor;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.util.ReflectionUtils;\r\n\r\nimport java.lang.reflect.Field;\r\nimport java.util.Objects;\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class WisdomBeanPostProcessor implements BeanPostProcessor {\r\n    private final WisdomProvider wisdomProvider;\r\n    @Override\r\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\r\n        Field[] fields = bean.getClass().getDeclaredFields();\r\n        for (Field field : fields) {\r\n            Wisdom wisdom = field.getAnnotation(Wisdom.class);\r\n            if (Objects.nonNull(wisdom)) {\r\n                field.setAccessible(true);\r\n                ReflectionUtils.setField(field, bean, wisdomProvider.getWisdom());\r\n                break;\r\n            }\r\n        }\r\n        return bean;\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example.demos.beanPostProcessor;\r\n\r\npublic interface WisdomProvider {\r\n    String getWisdom();\r\n}\r\n```\r\nIt works, but I wonder whether I can make IntelliJ aware of my initialization mechanism so that I don&#39;t get a warning\r\n\r\n&gt; Private field &#39;wisdom&#39; is never assigned \r\n\r\nSlapping `@SuppressWarnings` onto my `wisdom` field is ugly. I tried hiding it within the `@Wisdom` annotation, but it&#39;s apparently not really transitive so the warning is still present. Of course, I don&#39;t want to disable the warning altogether\r\n\r\nWhat are my options?","title":"Making IntelliJ aware of my custom field injection mechanism","body":"<p>I wrote a simple <code>BeanPostProcessor</code> to get more familiar with how Spring works</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.demos.beanPostProcessor;\n\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\n\npublic class App {\n    public static void main(String[] args) {\n        var context = new AnnotationConfigApplicationContext(Config.class);\n        Sage sage = context.getBean(&quot;sage&quot;, Sage.class);\n        sage.sayWisdom();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.demos.beanPostProcessor;\n\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ComponentScan\npublic class Config {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.demos.beanPostProcessor;\n\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class Sage {\n    @Wisdom\n    private String wisdom; // &quot;never assigned&quot;\n\n    public void sayWisdom() {\n        String processedWisdom = process(wisdom);\n        System.out.println(processedWisdom);\n    }\n\n    private String process(String wisdom) {\n        String intro = getIntro();\n        String wiserWisdom = makeItSoundWiser(wisdom);\n        return intro + &quot; &quot; + wiserWisdom;\n    }\n\n    private String getIntro() {\n        return &quot;Sage says:&quot;;\n    }\n\n    private String makeItSoundWiser(String wisdom) {\n        return wisdom.replaceAll(&quot;\\\\.(?=\\\\s|$)|(?&lt;!\\\\.)(?=$)&quot;, &quot;...&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.demos.beanPostProcessor;\n\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class SimpleWisdomProvider implements WisdomProvider {\n    private final String[] wisdoms = {\n            &quot;Tomorrow is often the busiest day of the week.&quot;,\n            &quot;I have always wanted to be somebody, but I see now I should have been more specific.&quot;,\n            &quot;Knowledge is like underwear. It is useful to have it, but not necessary to show it off.&quot;,\n            &quot;Go to Heaven for the climate, Hell for the company.&quot;,\n            &quot;Going to church doesn’t make you a Christian any more than going to a garage makes you an automobile.&quot;\n    };\n\n    @Override\n    public String getWisdom() {\n        int randomIndex = ThreadLocalRandom.current().nextInt(wisdoms.length);\n        return wisdoms[randomIndex];\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.demos.beanPostProcessor;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface Wisdom {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.demos.beanPostProcessor;\n\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.config.BeanPostProcessor;\nimport org.springframework.stereotype.Component;\nimport org.springframework.util.ReflectionUtils;\n\nimport java.lang.reflect.Field;\nimport java.util.Objects;\n\n@Component\n@RequiredArgsConstructor\npublic class WisdomBeanPostProcessor implements BeanPostProcessor {\n    private final WisdomProvider wisdomProvider;\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        Field[] fields = bean.getClass().getDeclaredFields();\n        for (Field field : fields) {\n            Wisdom wisdom = field.getAnnotation(Wisdom.class);\n            if (Objects.nonNull(wisdom)) {\n                field.setAccessible(true);\n                ReflectionUtils.setField(field, bean, wisdomProvider.getWisdom());\n                break;\n            }\n        }\n        return bean;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.demos.beanPostProcessor;\n\npublic interface WisdomProvider {\n    String getWisdom();\n}\n</code></pre>\n<p>It works, but I wonder whether I can make IntelliJ aware of my initialization mechanism so that I don't get a warning</p>\n<blockquote>\n<p>Private field 'wisdom' is never assigned</p>\n</blockquote>\n<p>Slapping <code>@SuppressWarnings</code> onto my <code>wisdom</code> field is ugly. I tried hiding it within the <code>@Wisdom</code> annotation, but it's apparently not really transitive so the warning is still present. Of course, I don't want to disable the warning altogether</p>\n<p>What are my options?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":1,"creation_date":1680035265,"post_id":75858723,"comment_id":133827677,"body_markdown":"Does this answer your question? [Spring Boot 3 with Spring Security Intercepts exceptions I don&#39;t want it to](https://stackoverflow.com/questions/75271958/spring-boot-3-with-spring-security-intercepts-exceptions-i-dont-want-it-to)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75271958/spring-boot-3-with-spring-security-intercepts-exceptions-i-dont-want-it-to\">Spring Boot 3 with Spring Security Intercepts exceptions I don&#39;t want it to</a>"}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1679939079,"creation_date":1679939079,"answer_id":75858811,"question_id":75858723,"body_markdown":"You need to allow all requests to the `/error` path.\r\n\r\n```java\r\n.requestMatchers(&quot;/error&quot;).permitAll()\r\n```","title":"Spring Security — &#39;Full authentication is required to access this resource&#39; for a non-existing endpoint","body":"<p>You need to allow all requests to the <code>/error</code> path.</p>\n<pre class=\"lang-java prettyprint-override\"><code>.requestMatchers(&quot;/error&quot;).permitAll()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2078190,"reputation":1221,"user_id":1850930,"display_name":"jfajunior"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695823574,"creation_date":1695823574,"answer_id":77188236,"question_id":75858723,"body_markdown":"Unmitigated answer worked just fine for me! But just to complement, we can also use the dispatcher, because: \r\n\r\n&gt; The AuthorizationFilter runs not just on every request, but on every dispatch. This means that the REQUEST dispatch needs authorization, but also FORWARDs, ERRORs, and INCLUDEs.\r\n\r\nSo this worked as well: \r\n\r\n    .dispatcherTypeMatchers(DispatcherType.FORWARD, DispatcherType.ERROR).permitAll()","title":"Spring Security — &#39;Full authentication is required to access this resource&#39; for a non-existing endpoint","body":"<p>Unmitigated answer worked just fine for me! But just to complement, we can also use the dispatcher, because:</p>\n<blockquote>\n<p>The AuthorizationFilter runs not just on every request, but on every dispatch. This means that the REQUEST dispatch needs authorization, but also FORWARDs, ERRORs, and INCLUDEs.</p>\n</blockquote>\n<p>So this worked as well:</p>\n<pre><code>.dispatcherTypeMatchers(DispatcherType.FORWARD, DispatcherType.ERROR).permitAll()\n</code></pre>\n"}],"owner":{"account_id":28089774,"reputation":41,"user_id":21459549,"display_name":"Ilya Avkhimenya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":482,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":75858811,"answer_count":2,"score":2,"last_activity_date":1695823574,"creation_date":1679938402,"question_id":75858723,"body_markdown":"AuthenticationEntryPoint triggers even if authorization is successfully passed, when I try to go to an endpoint that does not exist. How do I make it go to a 404 page?\r\n\r\n\r\n\r\nThis is my Spring Security configuration\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .cors().and()\r\n                .csrf().disable()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(customAuthenticationEntryPoint()).and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\r\n                .anyRequest().authenticated().and()\r\n                .addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .build();\r\n    }","title":"Spring Security — &#39;Full authentication is required to access this resource&#39; for a non-existing endpoint","body":"<p>AuthenticationEntryPoint triggers even if authorization is successfully passed, when I try to go to an endpoint that does not exist. How do I make it go to a 404 page?</p>\n<p>This is my Spring Security configuration</p>\n<pre><code>@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    return http\n            .cors().and()\n            .csrf().disable()\n            .exceptionHandling()\n            .authenticationEntryPoint(customAuthenticationEntryPoint()).and()\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeHttpRequests()\n            .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\n            .anyRequest().authenticated().and()\n            .addFilterBefore(jwtTokenFilter, UsernamePasswordAuthenticationFilter.class)\n            .build();\n}\n</code></pre>\n"},{"tags":["java","reflection","interface"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695981846,"post_id":77188129,"comment_id":136098568,"body_markdown":"Method annotations are not inherited. There is no difference between interface methods and “regular methods” in this regard. `getDeclaringClass()` returns the class declaring the very member represented by the `Method` instance. So `method.getDeclaringClass().getMethod(method.getName(), method.getParameterTypes())` returns the same method again. You’d have to replace `method.getDeclaringClass()` by the actual interface whose `default` method you want to access. The explanation at the linked bug report is incomprehensible. What do they mean with “individual implemented methods”?","body":"Method annotations are not inherited. There is no difference between interface methods and “regular methods” in this regard. <code>getDeclaringClass()</code> returns the class declaring the very member represented by the <code>Method</code> instance. So <code>method.getDeclaringClass().getMethod(method.getName(), method.getParameterTypes())</code> returns the same method again. You’d have to replace <code>method.getDeclaringClass()</code> by the actual interface whose <code>default</code> method you want to access. The explanation at the linked bug report is incomprehensible. What do they mean with “individual implemented methods”?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695984539,"post_id":77188129,"comment_id":136099010,"body_markdown":"It would have been helpful to include your actual example in the question. Now that I’ve seen that you did not override the default method and there’s no need for a bridge method either, I don’t understand what TestNG does to not see the annotation. As said, the explanation is incomprehensible. [Self contained example](https://ideone.com/ahOtEz). As you can see, you can ask Reflection for either, declared methods, which excludes non overridden default methods in general, or for all public methods, which includes inherited methods, of course, including their annotations.","body":"It would have been helpful to include your actual example in the question. Now that I’ve seen that you did not override the default method and there’s no need for a bridge method either, I don’t understand what TestNG does to not see the annotation. As said, the explanation is incomprehensible. <a href=\"https://ideone.com/ahOtEz\" rel=\"nofollow noreferrer\">Self contained example</a>. As you can see, you can ask Reflection for either, declared methods, which excludes non overridden default methods in general, or for all public methods, which includes inherited methods, of course, including their annotations."}],"owner":{"account_id":67765,"reputation":5435,"user_id":198108,"accept_rate":79,"display_name":"javydreamercsw"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695822956,"creation_date":1695822606,"question_id":77188129,"body_markdown":"I thought it would behave the same as with regular methods but I can&#39;t seem to find a way. For context, I have an interface that defines some default method implementations including parameters that are extended by some TestNG classes. If those classes are annotated at the class level with the `@Test` annotation it tries to execute those methods and fails when it tries to inject values. Seems like this is by design based on the responses I got [here](https://github.com/testng-team/testng/issues/2983).\r\n\r\nI was attempting the solution provided on that issue but I&#39;m having no luck.\r\n\r\n\r\n```\r\n@Override\r\n  @SneakyThrows\r\n  public List&lt;IMethodInstance&gt; intercept(List&lt;IMethodInstance&gt; methods, ITestContext context) {\r\n    // See: https://github.com/testng-team/testng/issues/2983\r\n    return methods.stream()\r\n        .filter(\r\n            it -&gt; {\r\n              Method method = it.getMethod().getConstructorOrMethod().getMethod();\r\n              return !method.isAnnotationPresent(Ignore.class) &amp;&amp; !method.isDefault();\r\n            })\r\n        .collect(Collectors.toList());\r\n  }\r\n```\r\nAfter annotating the Interface with the `@Ignore` annotation the ethods were not skipped. During debugging it was obvious it was getting empty array of annotations for the method.\r\n\r\n\r\nI tried adding code as follows trying to get to the declaring class (the interface) and trying there without luck.\r\n\r\n```\r\n        List&lt;IMethodInstance&gt; newMethods= new ArrayList&lt;&gt;();\r\n        for(IMethodInstance it:methods){\r\n          Method method = it.getMethod()\r\n              .getConstructorOrMethod()\r\n              .getMethod();\r\n          Method parentMethod = method.getDeclaringClass().getMethod(method.getName(),\r\n     method.getParameterTypes());\r\n          if(!parentMethod.isAnnotationPresent(Ignore.class)){\r\n            newMethods.add(it);\r\n          }else{\r\n            log.info(String.format(&quot;Skipping method %s due to @Ignore annotation!&quot;,\r\n     it.getMethod().getMethodName()));\r\n          }\r\n        }\r\n        return newMethods;\r\n```\r\n`AnnotationUtils.findAnnotation(method, Ignore.class)` returns null even when the JavaDocs claim it includes interfaces.","title":"How to get annotations of an Interface default method with reflection","body":"<p>I thought it would behave the same as with regular methods but I can't seem to find a way. For context, I have an interface that defines some default method implementations including parameters that are extended by some TestNG classes. If those classes are annotated at the class level with the <code>@Test</code> annotation it tries to execute those methods and fails when it tries to inject values. Seems like this is by design based on the responses I got <a href=\"https://github.com/testng-team/testng/issues/2983\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>I was attempting the solution provided on that issue but I'm having no luck.</p>\n<pre><code>@Override\n  @SneakyThrows\n  public List&lt;IMethodInstance&gt; intercept(List&lt;IMethodInstance&gt; methods, ITestContext context) {\n    // See: https://github.com/testng-team/testng/issues/2983\n    return methods.stream()\n        .filter(\n            it -&gt; {\n              Method method = it.getMethod().getConstructorOrMethod().getMethod();\n              return !method.isAnnotationPresent(Ignore.class) &amp;&amp; !method.isDefault();\n            })\n        .collect(Collectors.toList());\n  }\n</code></pre>\n<p>After annotating the Interface with the <code>@Ignore</code> annotation the ethods were not skipped. During debugging it was obvious it was getting empty array of annotations for the method.</p>\n<p>I tried adding code as follows trying to get to the declaring class (the interface) and trying there without luck.</p>\n<pre><code>        List&lt;IMethodInstance&gt; newMethods= new ArrayList&lt;&gt;();\n        for(IMethodInstance it:methods){\n          Method method = it.getMethod()\n              .getConstructorOrMethod()\n              .getMethod();\n          Method parentMethod = method.getDeclaringClass().getMethod(method.getName(),\n     method.getParameterTypes());\n          if(!parentMethod.isAnnotationPresent(Ignore.class)){\n            newMethods.add(it);\n          }else{\n            log.info(String.format(&quot;Skipping method %s due to @Ignore annotation!&quot;,\n     it.getMethod().getMethodName()));\n          }\n        }\n        return newMethods;\n</code></pre>\n<p><code>AnnotationUtils.findAnnotation(method, Ignore.class)</code> returns null even when the JavaDocs claim it includes interfaces.</p>\n"},{"tags":["java","log4j","keycloak","google-cloud-logging"],"owner":{"account_id":21029532,"reputation":11,"user_id":15454230,"display_name":"MrP4sten"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695822788,"creation_date":1695760026,"question_id":77183206,"body_markdown":"## Context\r\n\r\nHi everyone, I&#39;m trying to set logs from Keycloak server to Google Cloud Logging. I&#39;ve already read the follow documentation:\r\n\r\n- [*google-cloud-logging overview*][1]\r\n- [*Setting Up Cloud Logging for Java*][2]\r\n\r\nBut I don&#39;t understand how can I do this to Keycloak.\r\n\r\nI&#39;m using the follow documentation [*Keycloak on Quarkus*][3] and I think that Keycloak is using Log4j based on the follow [`pom.xml`][4]. \r\n\r\n\r\n\r\n### Expected result\r\nI can see logs from Keycloak 21.0.2 on Google Cloud Logging\r\n\r\n\r\n  [1]: https://cloud.google.com/java/docs/reference/google-cloud-logging/latest/overview\r\n  [2]: https://cloud.google.com/logging/docs/setup/java\r\n  [3]: https://github.com/keycloak/keycloak/blob/21.0.2/quarkus/README.md\r\n  [4]: https://github.com/keycloak/keycloak/blob/21.0.2/quarkus/runtime/pom.xml","title":"Integration between Keycloak and Google Cloud Logging","body":"<h2>Context</h2>\n<p>Hi everyone, I'm trying to set logs from Keycloak server to Google Cloud Logging. I've already read the follow documentation:</p>\n<ul>\n<li><a href=\"https://cloud.google.com/java/docs/reference/google-cloud-logging/latest/overview\" rel=\"nofollow noreferrer\"><em>google-cloud-logging overview</em></a></li>\n<li><a href=\"https://cloud.google.com/logging/docs/setup/java\" rel=\"nofollow noreferrer\"><em>Setting Up Cloud Logging for Java</em></a></li>\n</ul>\n<p>But I don't understand how can I do this to Keycloak.</p>\n<p>I'm using the follow documentation <a href=\"https://github.com/keycloak/keycloak/blob/21.0.2/quarkus/README.md\" rel=\"nofollow noreferrer\"><em>Keycloak on Quarkus</em></a> and I think that Keycloak is using Log4j based on the follow <a href=\"https://github.com/keycloak/keycloak/blob/21.0.2/quarkus/runtime/pom.xml\" rel=\"nofollow noreferrer\"><code>pom.xml</code></a>.</p>\n<h3>Expected result</h3>\n<p>I can see logs from Keycloak 21.0.2 on Google Cloud Logging</p>\n"},{"tags":["java","parallel-processing","fork-join"],"comments":[{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":6,"creation_date":1695816376,"post_id":77187185,"comment_id":136074186,"body_markdown":"This is not an apples-to-apples comparison. If you wanted to create a fair race, you would also have the sequential solution use the RecursiveSumTask, but make it do it sequentially. RecursiveSumTask adds a ***LOT*** of overhead.","body":"This is not an apples-to-apples comparison. If you wanted to create a fair race, you would also have the sequential solution use the RecursiveSumTask, but make it do it sequentially. RecursiveSumTask adds a <b><i>LOT</i></b> of overhead."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":3,"creation_date":1695818196,"post_id":77187185,"comment_id":136074540,"body_markdown":"Plus you have no warmups and use parallel case with an unreasonably small THRESHOLD and called it twice via `invoke` and `submit`","body":"Plus you have no warmups and use parallel case with an unreasonably small THRESHOLD and called it twice via <code>invoke</code> and <code>submit</code>"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":4,"creation_date":1695818221,"post_id":77187185,"comment_id":136074546,"body_markdown":"if I understand the code correctly, it is creating about 20_000 instances of `RecursiveSumTask` (10_000  *leaf* ones, and 9_999 *parent* ones) - all that tasks must be created, managed and swapped in and out of the 12 cores.... Having 12 cores, I would *expect* some algorithm that creates about 12 tasks (and kind of in a *linear* way, not similar to a binary tree - reminds me of the naive recursive Fibonacci code)","body":"if I understand the code correctly, it is creating about 20_000 instances of <code>RecursiveSumTask</code> (10_000  <i>leaf</i> ones, and 9_999 <i>parent</i> ones) - all that tasks must be created, managed and swapped in and out of the 12 cores.... Having 12 cores, I would <i>expect</i> some algorithm that creates about 12 tasks (and kind of in a <i>linear</i> way, not similar to a binary tree - reminds me of the naive recursive Fibonacci code)"},{"owner":{"account_id":25666695,"reputation":49,"user_id":19431524,"display_name":"Mark Eccles"},"score":0,"creation_date":1695822115,"post_id":77187185,"comment_id":136075451,"body_markdown":"@davidalayachew thanks for explaining. I made the problem an order of magnitude harder and used the RecursiveSumTask with different # of cores with different thresholds.","body":"@davidalayachew thanks for explaining. I made the problem an order of magnitude harder and used the RecursiveSumTask with different # of cores with different thresholds."},{"owner":{"account_id":25666695,"reputation":49,"user_id":19431524,"display_name":"Mark Eccles"},"score":0,"creation_date":1695822402,"post_id":77187185,"comment_id":136075519,"body_markdown":"@user85421 whoops, yeah, `execute` then `invoke` was queuing the task twice. Also, good point about it being binary! Indeed this is not optimal. `createSubtasks` could be changed to create &gt; 2 child tasks, thus removing the overhead.","body":"@user85421 whoops, yeah, <code>execute</code> then <code>invoke</code> was queuing the task twice. Also, good point about it being binary! Indeed this is not optimal. <code>createSubtasks</code> could be changed to create &gt; 2 child tasks, thus removing the overhead."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1695828423,"post_id":77187185,"comment_id":136076923,"body_markdown":"The measurement technique here is extremely suspect.  Simply subtracting System.currentTimeMillis produces lies.","body":"The measurement technique here is extremely suspect.  Simply subtracting System.currentTimeMillis produces lies."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1695831949,"post_id":77187185,"comment_id":136077661,"body_markdown":"@MarkEccles, I get about _500 ms_ for a _fork and join_, and about _20 ms_ for _non-threaded_.  I would imagine it&#39;s because of all the objects it creates.  This is most likely useful for specific applications.","body":"@MarkEccles, I get about <i>500 ms</i> for a <i>fork and join</i>, and about <i>20 ms</i> for <i>non-threaded</i>.  I would imagine it&#39;s because of all the objects it creates.  This is most likely useful for specific applications."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695832790,"post_id":77187185,"comment_id":136077814,"body_markdown":"Use `System.nanoTime()` for benchmarking, not `System.currentTimeMillis()`.","body":"Use <code>System.nanoTime()</code> for benchmarking, not <code>System.currentTimeMillis()</code>."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695832885,"post_id":77187185,"comment_id":136077830,"body_markdown":"[JMH](https://openjdk.org/jeps/230)","body":"<a href=\"https://openjdk.org/jeps/230\" rel=\"nofollow noreferrer\">JMH</a>"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695822709,"creation_date":1695822326,"answer_id":77188085,"question_id":77187185,"body_markdown":"Try this. According to documentation\r\n- both sorting methods use the Dual Pivot QuickSort algorithm\r\n- parallel sort uses ForkJoin\r\n- each test uses an array of a fixed `size` and runs each sorting algorithm `n` times and averages them out.\r\n- using something like JMH would yield more accurate results.\r\n- I am running a 4 core Intel i7 processor on Windows 10.\r\n```\r\n Random r = new Random();\r\n int size = 100_000_000;\r\n int[] array = r.ints(size, 1, 1000).toArray();\r\n System.out.println(&quot;Starting&quot;);\r\n int n = 10;\r\n {\r\n     double avgTime = 0;\r\n     for (int i = 0; i &lt; n; i++) {\r\n         long start = System.nanoTime();\r\n         int[] par = array.clone();\r\n         Arrays.parallelSort(par);\r\n         avgTime += (System.nanoTime() - start) / 1e9;\r\n     }\r\n     System.out.println(&quot;Parallel Sort = &quot; + avgTime / n);\r\n\r\n }\r\n\r\n {\r\n     double avgTime = 0;\r\n     for (int i = 0; i &lt; n; i++) {\r\n         long start = System.nanoTime();\r\n         int[] seq = array.clone();\r\n         Arrays.sort(seq);\r\n         avgTime += (System.nanoTime() - start) / 1e9;\r\n     }\r\n     System.out.println(&quot;Sequential Sort = &quot; + avgTime / n);\r\n }\r\n```\r\nprints something like\r\n```\r\nStarting\r\nParallel Sort = 3.00119538\r\nSequential Sort = 5.3311432000000005\r\n","title":"Unable to demonstrate performance gains of parallelism in Java using ForkJoin framework","body":"<p>Try this. According to documentation</p>\n<ul>\n<li>both sorting methods use the Dual Pivot QuickSort algorithm</li>\n<li>parallel sort uses ForkJoin</li>\n<li>each test uses an array of a fixed <code>size</code> and runs each sorting algorithm <code>n</code> times and averages them out.</li>\n<li>using something like JMH would yield more accurate results.</li>\n<li>I am running a 4 core Intel i7 processor on Windows 10.</li>\n</ul>\n<pre><code> Random r = new Random();\n int size = 100_000_000;\n int[] array = r.ints(size, 1, 1000).toArray();\n System.out.println(&quot;Starting&quot;);\n int n = 10;\n {\n     double avgTime = 0;\n     for (int i = 0; i &lt; n; i++) {\n         long start = System.nanoTime();\n         int[] par = array.clone();\n         Arrays.parallelSort(par);\n         avgTime += (System.nanoTime() - start) / 1e9;\n     }\n     System.out.println(&quot;Parallel Sort = &quot; + avgTime / n);\n\n }\n\n {\n     double avgTime = 0;\n     for (int i = 0; i &lt; n; i++) {\n         long start = System.nanoTime();\n         int[] seq = array.clone();\n         Arrays.sort(seq);\n         avgTime += (System.nanoTime() - start) / 1e9;\n     }\n     System.out.println(&quot;Sequential Sort = &quot; + avgTime / n);\n }\n</code></pre>\n<p>prints something like</p>\n<pre><code>Starting\nParallel Sort = 3.00119538\nSequential Sort = 5.3311432000000005\n</code></pre>\n"}],"owner":{"account_id":25666695,"reputation":49,"user_id":19431524,"display_name":"Mark Eccles"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695822709,"creation_date":1695814898,"question_id":77187185,"body_markdown":"I have a simple test program. It sums the values in an array of 10m entries using a sequential approach and a parallel approach. \r\n\r\nRunning on a chromebook, with 12 cores.\r\n\r\n```\r\nimport java.util.Random;\r\nimport java.util.concurrent.*;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws Exception {\r\n        int[] input = generateInput(10_000_000);\r\n        par(input);\r\n        seq(input);\r\n    }\r\n\r\n    private static void seq(int[] input) {\r\n        long startTime = System.currentTimeMillis();\r\n\r\n        int result = 0;\r\n        for (int num : input) {\r\n            result += num;\r\n        }\r\n        \r\n        System.out.println(&quot;Result: &quot; + result);\r\n        System.out.println(&quot;Sequential time: &quot; + Long.toString(System.currentTimeMillis() - startTime));\r\n    }\r\n\r\n    private static void par(int[] input) {\r\n\r\n        int cores = Runtime.getRuntime().availableProcessors();\r\n        System.out.println(&quot;Number of cores on this machine: &quot; + Integer.toString(cores));\r\n        \r\n        System.setProperty(&quot;java.util.concurrent.ForkJoinPool.common.parallelism&quot;, &quot;12&quot;);\r\n        ForkJoinPool forkJoinPool = new ForkJoinPool(12);\r\n\r\n        long startTime = System.currentTimeMillis();\r\n        RecursiveSumTask task = new RecursiveSumTask(input, 0, input.length);\r\n        forkJoinPool.execute(task);\r\n        forkJoinPool.invoke(task);\r\n\r\n        System.out.println(&quot;Result: &quot; + task.getResult());\r\n        System.out.println(&quot;Parallel time: &quot; + Long.toString(System.currentTimeMillis() - startTime));\r\n\r\n    }\r\n\r\n    public static int[] generateInput(int size) {\r\n        Random random = new Random();\r\n        int[] array = new int[size];\r\n        for (int i = 0; i &lt; size; i++) {\r\n            array[i] = random.nextInt(5);\r\n        }\r\n        return array;\r\n    }\r\n    \r\n}\r\n\r\n```\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.*;\r\n\r\npublic class RecursiveSumTask extends RecursiveAction {\r\n\r\n    private int[] input;\r\n    private int start;\r\n    private int end;\r\n    private static final int THRESHOLD = 1000;\r\n    private int result;\r\n\r\n    public RecursiveSumTask(int[] input, int start, int end) {\r\n        this.input = input;\r\n        this.start = start;\r\n        this.end = end;\r\n    }\r\n\r\n    @Override\r\n    protected void compute() {\r\n        if ((this.end - this.start) / 2 &gt; THRESHOLD) {\r\n            List&lt;RecursiveSumTask&gt; subTasks = createSubtasks();\r\n            ForkJoinTask.invokeAll(subTasks);\r\n            subTasks.forEach((n) -&gt; this.result += n.getResult());\r\n        } else {\r\n           process();\r\n        }\r\n    }\r\n\r\n    private List&lt;RecursiveSumTask&gt; createSubtasks() {\r\n        List&lt;RecursiveSumTask&gt; subtasks = new ArrayList&lt;RecursiveSumTask&gt;();\r\n        int mid = (end + start) / 2;\r\n        subtasks.add(new RecursiveSumTask(input, this.start, mid));\r\n        subtasks.add(new RecursiveSumTask(input, mid, this.end));\r\n\r\n        return subtasks;\r\n    }\r\n\r\n    private void process() {\r\n     for (int i = start; i &lt; end; i++) {\r\n        this.result += input[i];\r\n     }\r\n    }\r\n\r\n    public int getResult() {\r\n        return this.result;\r\n    }\r\n}\r\n```\r\n\r\nTypical output is:\r\n\r\nNumber of cores on this machine: 12\r\nResult: 20003614\r\nParallel time: 76\r\nResult: 20003614\r\nSequential time: 25\r\n\r\nThis is surprising. The parallel implementation is taking longer! (also the results sometimes vary, but that is probably an integer overflow)","title":"Unable to demonstrate performance gains of parallelism in Java using ForkJoin framework","body":"<p>I have a simple test program. It sums the values in an array of 10m entries using a sequential approach and a parallel approach.</p>\n<p>Running on a chromebook, with 12 cores.</p>\n<pre><code>import java.util.Random;\nimport java.util.concurrent.*;\n\npublic class App {\n    public static void main(String[] args) throws Exception {\n        int[] input = generateInput(10_000_000);\n        par(input);\n        seq(input);\n    }\n\n    private static void seq(int[] input) {\n        long startTime = System.currentTimeMillis();\n\n        int result = 0;\n        for (int num : input) {\n            result += num;\n        }\n        \n        System.out.println(&quot;Result: &quot; + result);\n        System.out.println(&quot;Sequential time: &quot; + Long.toString(System.currentTimeMillis() - startTime));\n    }\n\n    private static void par(int[] input) {\n\n        int cores = Runtime.getRuntime().availableProcessors();\n        System.out.println(&quot;Number of cores on this machine: &quot; + Integer.toString(cores));\n        \n        System.setProperty(&quot;java.util.concurrent.ForkJoinPool.common.parallelism&quot;, &quot;12&quot;);\n        ForkJoinPool forkJoinPool = new ForkJoinPool(12);\n\n        long startTime = System.currentTimeMillis();\n        RecursiveSumTask task = new RecursiveSumTask(input, 0, input.length);\n        forkJoinPool.execute(task);\n        forkJoinPool.invoke(task);\n\n        System.out.println(&quot;Result: &quot; + task.getResult());\n        System.out.println(&quot;Parallel time: &quot; + Long.toString(System.currentTimeMillis() - startTime));\n\n    }\n\n    public static int[] generateInput(int size) {\n        Random random = new Random();\n        int[] array = new int[size];\n        for (int i = 0; i &lt; size; i++) {\n            array[i] = random.nextInt(5);\n        }\n        return array;\n    }\n    \n}\n\n</code></pre>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.*;\n\npublic class RecursiveSumTask extends RecursiveAction {\n\n    private int[] input;\n    private int start;\n    private int end;\n    private static final int THRESHOLD = 1000;\n    private int result;\n\n    public RecursiveSumTask(int[] input, int start, int end) {\n        this.input = input;\n        this.start = start;\n        this.end = end;\n    }\n\n    @Override\n    protected void compute() {\n        if ((this.end - this.start) / 2 &gt; THRESHOLD) {\n            List&lt;RecursiveSumTask&gt; subTasks = createSubtasks();\n            ForkJoinTask.invokeAll(subTasks);\n            subTasks.forEach((n) -&gt; this.result += n.getResult());\n        } else {\n           process();\n        }\n    }\n\n    private List&lt;RecursiveSumTask&gt; createSubtasks() {\n        List&lt;RecursiveSumTask&gt; subtasks = new ArrayList&lt;RecursiveSumTask&gt;();\n        int mid = (end + start) / 2;\n        subtasks.add(new RecursiveSumTask(input, this.start, mid));\n        subtasks.add(new RecursiveSumTask(input, mid, this.end));\n\n        return subtasks;\n    }\n\n    private void process() {\n     for (int i = start; i &lt; end; i++) {\n        this.result += input[i];\n     }\n    }\n\n    public int getResult() {\n        return this.result;\n    }\n}\n</code></pre>\n<p>Typical output is:</p>\n<p>Number of cores on this machine: 12\nResult: 20003614\nParallel time: 76\nResult: 20003614\nSequential time: 25</p>\n<p>This is surprising. The parallel implementation is taking longer! (also the results sometimes vary, but that is probably an integer overflow)</p>\n"},{"tags":["java","liquibase"],"answers":[{"tags":[],"owner":{"account_id":319876,"reputation":2944,"user_id":637858,"accept_rate":86,"display_name":"Rajesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1331110168,"creation_date":1331110168,"answer_id":9598281,"question_id":9592153,"body_markdown":"Anyway Its working now..here is the updated code..I am loving liquibase now\r\n\r\n\t\r\n\r\n    Database database=CommandLineUtils.createDatabaseObject(OracleDriver.class.getClassLoader(), &quot;jdbc:oracle:thin:@xxx.xx.xxx.xx:1521:XE&quot;, &quot;archive_dbs&quot;, &quot;123&quot;, &quot;oracle.jdbc.driver.OracleDriver&quot;, &quot;archive_dbs&quot;, null, null);\r\n    \t//CommandLineUtils.doGenerateChangeLog(&quot;test.xml&quot;, database, &quot;archive_dbs&quot;, null, null, null, null);uncomment to generate changelog\r\n        Database database2=CommandLineUtils.createDatabaseObject(OracleDriver.class.getClassLoader(), &quot;jdbc:oracle:thin:@yy.yy.yy.yy:1521:XE&quot;, &quot;archive_dbs&quot;, &quot;123&quot;, &quot;oracle.jdbc.driver.OracleDriver&quot;, &quot;archive_dbs&quot;, null, null);\r\n       /* CommandLineUtils.doDiffToChangeLog(&quot;chageLog.xml&quot;, database2, database);//This can generate changeLog for diff\r\n    \t\tResourceAccessor resource=new FileSystemResourceAccessor();\r\n    \t\tFile sql=new File(&quot;SQLscript.sql&quot;);\r\n    \t\tFileWriter writer=new FileWriter(sql);\r\n    \t\tLiquibase base=new Liquibase(&quot;chageLog.xml&quot;,resource,database);\r\n    \t\tbase.update(&quot;Update&quot;,writer);//store diff sql to file,but donot execute it\r\n    \t\tbase.update(&quot;Update&quot;);//execute diff sql*/\r\n    \t\t//CommandLineUtils.doDiff(database2, database);//show diff in console\r\n       /* DatabaseSnapshot dbsnap1=new DatabaseSnapshot(database,&quot;archive_dbs&quot;);\r\n        DatabaseSnapshot dbsnap2=new DatabaseSnapshot(database2,&quot;archive_dbs&quot;);*/\r\n        Diff res=new Diff(database2,database);\r\n        DiffResult result=res.compare();\r\n        if(result.differencesFound()){\r\n        \tSystem.out.println(&quot;Different&quot;);\r\n        }else{\r\n        \tSystem.out.println(&quot;Equal&quot;);\r\n        }\r\n        ByteArrayOutputStream baos=new ByteArrayOutputStream();\r\n        PrintStream stream=new PrintStream(baos);\r\n        result.printResult(stream);\r\n        System.out.println(baos.toString());//show diff report\r\n    \tSystem.out.println(&quot;Done&quot;);","title":"How to diff two new schema in liquibase using java?","body":"<p>Anyway Its working now..here is the updated code..I am loving liquibase now</p>\n\n<pre><code>Database database=CommandLineUtils.createDatabaseObject(OracleDriver.class.getClassLoader(), \"jdbc:oracle:thin:@xxx.xx.xxx.xx:1521:XE\", \"archive_dbs\", \"123\", \"oracle.jdbc.driver.OracleDriver\", \"archive_dbs\", null, null);\n    //CommandLineUtils.doGenerateChangeLog(\"test.xml\", database, \"archive_dbs\", null, null, null, null);uncomment to generate changelog\n    Database database2=CommandLineUtils.createDatabaseObject(OracleDriver.class.getClassLoader(), \"jdbc:oracle:thin:@yy.yy.yy.yy:1521:XE\", \"archive_dbs\", \"123\", \"oracle.jdbc.driver.OracleDriver\", \"archive_dbs\", null, null);\n   /* CommandLineUtils.doDiffToChangeLog(\"chageLog.xml\", database2, database);//This can generate changeLog for diff\n        ResourceAccessor resource=new FileSystemResourceAccessor();\n        File sql=new File(\"SQLscript.sql\");\n        FileWriter writer=new FileWriter(sql);\n        Liquibase base=new Liquibase(\"chageLog.xml\",resource,database);\n        base.update(\"Update\",writer);//store diff sql to file,but donot execute it\n        base.update(\"Update\");//execute diff sql*/\n        //CommandLineUtils.doDiff(database2, database);//show diff in console\n   /* DatabaseSnapshot dbsnap1=new DatabaseSnapshot(database,\"archive_dbs\");\n    DatabaseSnapshot dbsnap2=new DatabaseSnapshot(database2,\"archive_dbs\");*/\n    Diff res=new Diff(database2,database);\n    DiffResult result=res.compare();\n    if(result.differencesFound()){\n        System.out.println(\"Different\");\n    }else{\n        System.out.println(\"Equal\");\n    }\n    ByteArrayOutputStream baos=new ByteArrayOutputStream();\n    PrintStream stream=new PrintStream(baos);\n    result.printResult(stream);\n    System.out.println(baos.toString());//show diff report\n    System.out.println(\"Done\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23949,"reputation":63044,"user_id":60518,"accept_rate":59,"display_name":"Tim B&#252;the"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1414154462,"creation_date":1414154462,"answer_id":26548088,"question_id":9592153,"body_markdown":"Here&#39;s an example that works with version 3.2.2:\r\n\r\n\r\n    void diff(Connection referenceConnection, Connection targetConnection) throws LiquibaseException, IOException, ParserConfigurationException {\r\n\r\n        Liquibase liquibase = null;\r\n\r\n        try {\r\n\r\n            Database referenceDatabase = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(referenceConnection));\r\n            Database targetDatabase = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(targetConnection));\r\n\r\n            liquibase = new Liquibase(&quot;&quot;, new FileSystemResourceAccessor(), referenceDatabase);\r\n            DiffResult diffResult = liquibase.diff(referenceDatabase, targetDatabase, new CompareControl());\r\n            new DiffToChangeLog(diffResult, new DiffOutputControl()).print(System.out);\r\n\r\n        } finally {\r\n            if (liquibase != null) {\r\n                liquibase.forceReleaseLocks();\r\n            }\r\n        }\r\n    }","title":"How to diff two new schema in liquibase using java?","body":"<p>Here's an example that works with version 3.2.2:</p>\n\n<pre><code>void diff(Connection referenceConnection, Connection targetConnection) throws LiquibaseException, IOException, ParserConfigurationException {\n\n    Liquibase liquibase = null;\n\n    try {\n\n        Database referenceDatabase = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(referenceConnection));\n        Database targetDatabase = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(new JdbcConnection(targetConnection));\n\n        liquibase = new Liquibase(\"\", new FileSystemResourceAccessor(), referenceDatabase);\n        DiffResult diffResult = liquibase.diff(referenceDatabase, targetDatabase, new CompareControl());\n        new DiffToChangeLog(diffResult, new DiffOutputControl()).print(System.out);\n\n    } finally {\n        if (liquibase != null) {\n            liquibase.forceReleaseLocks();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":61892,"reputation":5204,"user_id":184201,"accept_rate":78,"display_name":"Ahmed Ashour"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695822582,"creation_date":1695822582,"answer_id":77188125,"question_id":9592153,"body_markdown":"With version 4:\r\n\r\n```java\r\ntry (var targetConnection = DriverManager.getConnection(&quot;jdbc:some url&quot;);\r\n     var referenceConnection = DriverManager.getConnection(&quot;jdbc:another url&quot;)) {\r\n  var referenceDatabase = getDatabase(referenceConnection);\r\n  var targetDatabase = getDatabase(targetConnection);\r\n\r\n  new CommandScope(DiffChangelogCommandStep.COMMAND_NAME)\r\n      .addArgumentValue(UpdateCommandStep.CHANGELOG_FILE_ARG, &quot;db/root.yaml&quot;)\r\n      .addArgumentValue(DiffChangelogCommandStep.CHANGELOG_FILE_ARG, &quot;diff.yaml&quot;)\r\n      .addArgumentValue(ReferenceDbUrlConnectionCommandStep.REFERENCE_DATABASE_ARG, referenceDatabase)\r\n      .addArgumentValue(DbUrlConnectionCommandStep.DATABASE_ARG, targetDatabase)\r\n      .execute();\r\n}\r\n\r\nprivate static Database getDatabase(Connection connection) throws DatabaseException {\r\n  var jdbcConnection = new JdbcConnection(connection);\r\n  return DatabaseFactory.getInstance().findCorrectDatabaseImplementation(jdbcConnection);\r\n}\r\n```","title":"How to diff two new schema in liquibase using java?","body":"<p>With version 4:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (var targetConnection = DriverManager.getConnection(&quot;jdbc:some url&quot;);\n     var referenceConnection = DriverManager.getConnection(&quot;jdbc:another url&quot;)) {\n  var referenceDatabase = getDatabase(referenceConnection);\n  var targetDatabase = getDatabase(targetConnection);\n\n  new CommandScope(DiffChangelogCommandStep.COMMAND_NAME)\n      .addArgumentValue(UpdateCommandStep.CHANGELOG_FILE_ARG, &quot;db/root.yaml&quot;)\n      .addArgumentValue(DiffChangelogCommandStep.CHANGELOG_FILE_ARG, &quot;diff.yaml&quot;)\n      .addArgumentValue(ReferenceDbUrlConnectionCommandStep.REFERENCE_DATABASE_ARG, referenceDatabase)\n      .addArgumentValue(DbUrlConnectionCommandStep.DATABASE_ARG, targetDatabase)\n      .execute();\n}\n\nprivate static Database getDatabase(Connection connection) throws DatabaseException {\n  var jdbcConnection = new JdbcConnection(connection);\n  return DatabaseFactory.getInstance().findCorrectDatabaseImplementation(jdbcConnection);\n}\n</code></pre>\n"}],"owner":{"account_id":319876,"reputation":2944,"user_id":637858,"accept_rate":86,"display_name":"Rajesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4931,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":9598281,"answer_count":3,"score":3,"last_activity_date":1695822582,"creation_date":1331068992,"question_id":9592153,"body_markdown":"My requirement is I want to diff two database then I want to generate a diff sql.Note I want to do it through java only. I am new to Liquibase.I have found a java api called CommandLineUtils using which I am able to generate changeLog of a new database. When I am executing method doDiffToChangeLog then my changeLog xml is empty. Can you please tell me where I am doing wrong.\r\n\r\nhere is my java code\r\n\r\n    Database database=liqui.createDatabaseObject(OracleDriver.class.getClassLoader(), &quot;jdbc:oracle:thin:@localhost:1521:XE&quot;, &quot;archive_pmd&quot;, &quot;archive_pmd&quot;, &quot;oracle.jdbc.driver.OracleDriver&quot;, &quot;archive_pmd&quot;, null, null);\r\n           liqui.doGenerateChangeLog(&quot;test.xml&quot;, database, &quot;archive_pmd&quot;, null, null, null, null);\r\n           Database database2=liqui.createDatabaseObject(OracleDriver.class.getClassLoader(), &quot;jdbc:oracle:thin:@localhost:1521:XE&quot;, &quot;archive_dbs&quot;, &quot;archive_dbs&quot;, &quot;oracle.jdbc.driver.OracleDriver&quot;, &quot;archive_pmd&quot;, null, null);\r\n           liqui.doDiffToChangeLog(&quot;chageLog.xml&quot;, database2, database);\r\n          \r\n\r\nhere is my generated test.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-1&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD00_SEQUENCE&quot;&gt;\r\n                &lt;column name=&quot;PMD00_ID&quot; type=&quot;NUMBER&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;TABLE_IDENTIFIER&quot; type=&quot;VARCHAR2(50 BYTE)&quot;/&gt;\r\n                &lt;column defaultValueNumeric=&quot;0&quot; name=&quot;CURRENT_VALUE&quot; type=&quot;NUMBER&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;LAST_ACCESSED_TS&quot; type=&quot;DATE&quot;/&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-2&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD01_META_DATA&quot;&gt;\r\n                &lt;column name=&quot;PMD01_ID&quot; type=&quot;NUMBER&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;CATEGORY&quot; type=&quot;VARCHAR2(30 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;NAME&quot; type=&quot;VARCHAR2(50 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;CODE&quot; type=&quot;VARCHAR2(100 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;STATUS&quot; type=&quot;VARCHAR2(1 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;PMD01_METADATAVER&quot; type=&quot;NUMBER(4,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DMLASTUPDATEDATE&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-3&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD13_DB_APPLICATION&quot;&gt;\r\n                &lt;column name=&quot;ID&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;APPLICATIONNAME&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;ENVIRONMENT&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SERVERIP&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;USERID&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;PASSWORD&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DBTYPE&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DMLASTUPDATE&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SERVERPORT&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SERVICE&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-4&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD14_DB_VERSION&quot;&gt;\r\n                &lt;column name=&quot;ID&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;MAJORVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;MINORVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;PATCHVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DATEEXECUTED&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DML_SCRIPT&quot; type=&quot;BLOB&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;STATUS&quot; type=&quot;VARCHAR2(20 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;REQUESTOR&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DMLASTUPDATE&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DML_SCRIPTNAME&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DB_APPLICATION_FK&quot; type=&quot;NUMBER&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-5&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD15_DBCOMMIT_LOG&quot;&gt;\r\n                &lt;column name=&quot;ID&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;MAJORVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;MINORVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;PATCHVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DATEEXECUTED&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SCRIPT&quot; type=&quot;BLOB&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;EXECUTIONSTATUS&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;REQUESTOR&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;LOGREPORT&quot; type=&quot;BLOB&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DMLASTUPDATE&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DBAPPLICATIONFK&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;LOGREPORTNAME&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SCRIPTNAME&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-6&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004087&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD00_SEQUENCE&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;PMD00_ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-7&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004084&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD01_META_DATA&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;PMD01_ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-8&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004050&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD13_DB_APPLICATION&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-9&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004062&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD14_DB_VERSION&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066786490-10&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004076&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD15_DBCOMMIT_LOG&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-1&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD00_SEQUENCE&quot;&gt;\r\n                &lt;column name=&quot;PMD00_ID&quot; type=&quot;NUMBER&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;TABLE_IDENTIFIER&quot; type=&quot;VARCHAR2(50 BYTE)&quot;/&gt;\r\n                &lt;column defaultValueNumeric=&quot;0&quot; name=&quot;CURRENT_VALUE&quot; type=&quot;NUMBER&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;LAST_ACCESSED_TS&quot; type=&quot;DATE&quot;/&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-2&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD01_META_DATA&quot;&gt;\r\n                &lt;column name=&quot;PMD01_ID&quot; type=&quot;NUMBER&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;CATEGORY&quot; type=&quot;VARCHAR2(30 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;NAME&quot; type=&quot;VARCHAR2(50 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;CODE&quot; type=&quot;VARCHAR2(100 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;STATUS&quot; type=&quot;VARCHAR2(1 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;PMD01_METADATAVER&quot; type=&quot;NUMBER(4,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DMLASTUPDATEDATE&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-3&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD13_DB_APPLICATION&quot;&gt;\r\n                &lt;column name=&quot;ID&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;APPLICATIONNAME&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;ENVIRONMENT&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SERVERIP&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;USERID&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;PASSWORD&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DBTYPE&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DMLASTUPDATE&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SERVERPORT&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SERVICE&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-4&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD14_DB_VERSION&quot;&gt;\r\n                &lt;column name=&quot;ID&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;MAJORVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;MINORVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;PATCHVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DATEEXECUTED&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DML_SCRIPT&quot; type=&quot;BLOB&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;STATUS&quot; type=&quot;VARCHAR2(20 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;REQUESTOR&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DMLASTUPDATE&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DML_SCRIPTNAME&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DB_APPLICATION_FK&quot; type=&quot;NUMBER&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-5&quot;&gt;\r\n            &lt;createTable schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD15_DBCOMMIT_LOG&quot;&gt;\r\n                &lt;column name=&quot;ID&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;MAJORVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;MINORVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;PATCHVERSION&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DATEEXECUTED&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SCRIPT&quot; type=&quot;BLOB&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;EXECUTIONSTATUS&quot; type=&quot;VARCHAR2(200 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;REQUESTOR&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;LOGREPORT&quot; type=&quot;BLOB&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DMLASTUPDATE&quot; type=&quot;DATE&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;DBAPPLICATIONFK&quot; type=&quot;NUMBER(17,0)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;LOGREPORTNAME&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n                &lt;column name=&quot;SCRIPTNAME&quot; type=&quot;VARCHAR2(400 BYTE)&quot;&gt;\r\n                    &lt;constraints nullable=&quot;false&quot;/&gt;\r\n                &lt;/column&gt;\r\n            &lt;/createTable&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-6&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004087&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD00_SEQUENCE&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;PMD00_ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-7&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004084&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD01_META_DATA&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;PMD01_ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-8&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004050&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD13_DB_APPLICATION&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-9&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004062&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD14_DB_VERSION&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n        &lt;changeSet author=&quot;DELL (generated)&quot; id=&quot;1331066972401-10&quot;&gt;\r\n            &lt;createIndex indexName=&quot;SYS_C004076&quot; schemaName=&quot;archive_pmd&quot; tableName=&quot;PMD15_DBCOMMIT_LOG&quot; tablespace=&quot;SYSTEM&quot; unique=&quot;true&quot;&gt;\r\n                &lt;column name=&quot;ID&quot;/&gt;\r\n            &lt;/createIndex&gt;\r\n        &lt;/changeSet&gt;\r\n    &lt;/databaseChangeLog&gt;\r\n\r\n===\r\nhere is my changeLog.xml(diff one)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd&quot;/&gt;\r\n\r\nNote archive_dbs does not contain any table.Why liquibase didint showed that table in archive_pmd is missing in archive_dbs?\r\n\r\n\r\n","title":"How to diff two new schema in liquibase using java?","body":"<p>My requirement is I want to diff two database then I want to generate a diff sql.Note I want to do it through java only. I am new to Liquibase.I have found a java api called CommandLineUtils using which I am able to generate changeLog of a new database. When I am executing method doDiffToChangeLog then my changeLog xml is empty. Can you please tell me where I am doing wrong.</p>\n\n<p>here is my java code</p>\n\n<pre><code>Database database=liqui.createDatabaseObject(OracleDriver.class.getClassLoader(), \"jdbc:oracle:thin:@localhost:1521:XE\", \"archive_pmd\", \"archive_pmd\", \"oracle.jdbc.driver.OracleDriver\", \"archive_pmd\", null, null);\n       liqui.doGenerateChangeLog(\"test.xml\", database, \"archive_pmd\", null, null, null, null);\n       Database database2=liqui.createDatabaseObject(OracleDriver.class.getClassLoader(), \"jdbc:oracle:thin:@localhost:1521:XE\", \"archive_dbs\", \"archive_dbs\", \"oracle.jdbc.driver.OracleDriver\", \"archive_pmd\", null, null);\n       liqui.doDiffToChangeLog(\"chageLog.xml\", database2, database);\n</code></pre>\n\n<p>here is my generated test.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd\"&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-1\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD00_SEQUENCE\"&gt;\n            &lt;column name=\"PMD00_ID\" type=\"NUMBER\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"TABLE_IDENTIFIER\" type=\"VARCHAR2(50 BYTE)\"/&gt;\n            &lt;column defaultValueNumeric=\"0\" name=\"CURRENT_VALUE\" type=\"NUMBER\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"LAST_ACCESSED_TS\" type=\"DATE\"/&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-2\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD01_META_DATA\"&gt;\n            &lt;column name=\"PMD01_ID\" type=\"NUMBER\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"CATEGORY\" type=\"VARCHAR2(30 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"NAME\" type=\"VARCHAR2(50 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"CODE\" type=\"VARCHAR2(100 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"STATUS\" type=\"VARCHAR2(1 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"PMD01_METADATAVER\" type=\"NUMBER(4,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DMLASTUPDATEDATE\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-3\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD13_DB_APPLICATION\"&gt;\n            &lt;column name=\"ID\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"APPLICATIONNAME\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"ENVIRONMENT\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SERVERIP\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"USERID\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"PASSWORD\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DBTYPE\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DMLASTUPDATE\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SERVERPORT\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SERVICE\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-4\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD14_DB_VERSION\"&gt;\n            &lt;column name=\"ID\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"MAJORVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"MINORVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"PATCHVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DATEEXECUTED\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DML_SCRIPT\" type=\"BLOB\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"STATUS\" type=\"VARCHAR2(20 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"REQUESTOR\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DMLASTUPDATE\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DML_SCRIPTNAME\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DB_APPLICATION_FK\" type=\"NUMBER\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-5\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD15_DBCOMMIT_LOG\"&gt;\n            &lt;column name=\"ID\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"MAJORVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"MINORVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"PATCHVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DATEEXECUTED\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SCRIPT\" type=\"BLOB\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"EXECUTIONSTATUS\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"REQUESTOR\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"LOGREPORT\" type=\"BLOB\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DMLASTUPDATE\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DBAPPLICATIONFK\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"LOGREPORTNAME\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SCRIPTNAME\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-6\"&gt;\n        &lt;createIndex indexName=\"SYS_C004087\" schemaName=\"archive_pmd\" tableName=\"PMD00_SEQUENCE\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"PMD00_ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-7\"&gt;\n        &lt;createIndex indexName=\"SYS_C004084\" schemaName=\"archive_pmd\" tableName=\"PMD01_META_DATA\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"PMD01_ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-8\"&gt;\n        &lt;createIndex indexName=\"SYS_C004050\" schemaName=\"archive_pmd\" tableName=\"PMD13_DB_APPLICATION\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-9\"&gt;\n        &lt;createIndex indexName=\"SYS_C004062\" schemaName=\"archive_pmd\" tableName=\"PMD14_DB_VERSION\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066786490-10\"&gt;\n        &lt;createIndex indexName=\"SYS_C004076\" schemaName=\"archive_pmd\" tableName=\"PMD15_DBCOMMIT_LOG\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-1\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD00_SEQUENCE\"&gt;\n            &lt;column name=\"PMD00_ID\" type=\"NUMBER\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"TABLE_IDENTIFIER\" type=\"VARCHAR2(50 BYTE)\"/&gt;\n            &lt;column defaultValueNumeric=\"0\" name=\"CURRENT_VALUE\" type=\"NUMBER\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"LAST_ACCESSED_TS\" type=\"DATE\"/&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-2\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD01_META_DATA\"&gt;\n            &lt;column name=\"PMD01_ID\" type=\"NUMBER\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"CATEGORY\" type=\"VARCHAR2(30 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"NAME\" type=\"VARCHAR2(50 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"CODE\" type=\"VARCHAR2(100 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"STATUS\" type=\"VARCHAR2(1 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"PMD01_METADATAVER\" type=\"NUMBER(4,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DMLASTUPDATEDATE\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-3\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD13_DB_APPLICATION\"&gt;\n            &lt;column name=\"ID\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"APPLICATIONNAME\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"ENVIRONMENT\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SERVERIP\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"USERID\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"PASSWORD\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DBTYPE\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DMLASTUPDATE\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SERVERPORT\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SERVICE\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-4\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD14_DB_VERSION\"&gt;\n            &lt;column name=\"ID\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"MAJORVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"MINORVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"PATCHVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DATEEXECUTED\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DML_SCRIPT\" type=\"BLOB\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"STATUS\" type=\"VARCHAR2(20 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"REQUESTOR\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DMLASTUPDATE\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DML_SCRIPTNAME\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DB_APPLICATION_FK\" type=\"NUMBER\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-5\"&gt;\n        &lt;createTable schemaName=\"archive_pmd\" tableName=\"PMD15_DBCOMMIT_LOG\"&gt;\n            &lt;column name=\"ID\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"MAJORVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"MINORVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"PATCHVERSION\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DATEEXECUTED\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SCRIPT\" type=\"BLOB\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"EXECUTIONSTATUS\" type=\"VARCHAR2(200 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"REQUESTOR\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"LOGREPORT\" type=\"BLOB\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DMLASTUPDATE\" type=\"DATE\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"DBAPPLICATIONFK\" type=\"NUMBER(17,0)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"LOGREPORTNAME\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n            &lt;column name=\"SCRIPTNAME\" type=\"VARCHAR2(400 BYTE)\"&gt;\n                &lt;constraints nullable=\"false\"/&gt;\n            &lt;/column&gt;\n        &lt;/createTable&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-6\"&gt;\n        &lt;createIndex indexName=\"SYS_C004087\" schemaName=\"archive_pmd\" tableName=\"PMD00_SEQUENCE\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"PMD00_ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-7\"&gt;\n        &lt;createIndex indexName=\"SYS_C004084\" schemaName=\"archive_pmd\" tableName=\"PMD01_META_DATA\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"PMD01_ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-8\"&gt;\n        &lt;createIndex indexName=\"SYS_C004050\" schemaName=\"archive_pmd\" tableName=\"PMD13_DB_APPLICATION\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-9\"&gt;\n        &lt;createIndex indexName=\"SYS_C004062\" schemaName=\"archive_pmd\" tableName=\"PMD14_DB_VERSION\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n    &lt;changeSet author=\"DELL (generated)\" id=\"1331066972401-10\"&gt;\n        &lt;createIndex indexName=\"SYS_C004076\" schemaName=\"archive_pmd\" tableName=\"PMD15_DBCOMMIT_LOG\" tablespace=\"SYSTEM\" unique=\"true\"&gt;\n            &lt;column name=\"ID\"/&gt;\n        &lt;/createIndex&gt;\n    &lt;/changeSet&gt;\n&lt;/databaseChangeLog&gt;\n</code></pre>\n\n<p>===\nhere is my changeLog.xml(diff one)</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd\"/&gt;\n</code></pre>\n\n<p>Note archive_dbs does not contain any table.Why liquibase didint showed that table in archive_pmd is missing in archive_dbs?</p>\n"},{"tags":["java","android","video","android-video-player","avi"],"answers":[{"tags":[],"owner":{"account_id":3637505,"reputation":86,"user_id":3032524,"display_name":"user3032524"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445513088,"creation_date":1445513088,"answer_id":33279875,"question_id":33279587,"body_markdown":"I don&#39;t know your intentions. But in your place, I would use a library for that. For examlpe [jVLC ][1].\r\n\r\nThe problem is that AVI is just a container for sound and video data, that can be encoded by any codecs. The sound can be mp3, ogg, or whatever and the video can be mpeg, divx, xvid of several versions.\r\n\r\nYou can not count on that the all AVIs will contain the same sound/video formats. That is why some of your AVIs can not be played by you current program. \r\n\r\n  [1]: https://github.com/caprica/vlcj","title":"Need get correct AVI Player class to play all AVI video files inside android application","body":"<p>I don't know your intentions. But in your place, I would use a library for that. For examlpe <a href=\"https://github.com/caprica/vlcj\" rel=\"nofollow\">jVLC </a>.</p>\n\n<p>The problem is that AVI is just a container for sound and video data, that can be encoded by any codecs. The sound can be mp3, ogg, or whatever and the video can be mpeg, divx, xvid of several versions.</p>\n\n<p>You can not count on that the all AVIs will contain the same sound/video formats. That is why some of your AVIs can not be played by you current program. </p>\n"},{"tags":[],"owner":{"account_id":14067737,"reputation":74,"user_id":10180900,"display_name":"John B Gilbert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695822552,"creation_date":1695822552,"answer_id":77188120,"question_id":33279587,"body_markdown":"I was pretty happy with Exoplayer, it was simple and it was quick,  and I could use it on any page in my app, its recently deprecated and been taken over by android, is now called Media3.Exoplayer, Android have taken it over and the lines of code now go on and on, try it if you like.\r\n\r\nhttps://medium.com/@rawatsumit115/play-videos-by-using-jetpack-media3-exoplayer-in-android-kotlin-c736136de580","title":"Need get correct AVI Player class to play all AVI video files inside android application","body":"<p>I was pretty happy with Exoplayer, it was simple and it was quick,  and I could use it on any page in my app, its recently deprecated and been taken over by android, is now called Media3.Exoplayer, Android have taken it over and the lines of code now go on and on, try it if you like.</p>\n<p><a href=\"https://medium.com/@rawatsumit115/play-videos-by-using-jetpack-media3-exoplayer-in-android-kotlin-c736136de580\" rel=\"nofollow noreferrer\">https://medium.com/@rawatsumit115/play-videos-by-using-jetpack-media3-exoplayer-in-android-kotlin-c736136de580</a></p>\n"}],"owner":{"account_id":2970196,"reputation":7818,"user_id":2522405,"accept_rate":79,"display_name":"Huy Tower"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1628,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77188120,"answer_count":2,"score":0,"last_activity_date":1695822552,"creation_date":1445512171,"question_id":33279587,"body_markdown":"I try to get correct AVI video player to play AVI file since my current AVI Player class looks like not work really good anymore.\r\n\r\nSome AVI files can play correctly, but the others can not.\r\n\r\nPeople who know which AVI Video player class play all avi files exactly,\r\n\r\nPlease help me,\r\n\r\nThank you,\r\n\r\np/s : \r\n\r\nI don&#39;t want intent to 3rd application to play AVI file.\r\n\r\nBelow codes is current I used to play AVI files:\r\n\r\n**AVI Player.java**\r\n    package runnable;\r\n\r\n    import java.io.BufferedInputStream;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.util.ArrayList;\r\n\r\n    import iterface.IVideoSink;\r\n\r\n    public class VideoPlayer implements Runnable {\r\n    private final int FPS = 24;\r\n    /**\r\n     * String section\r\n     */\r\n    private boolean IS_ALIVE = true;\r\n    private long LAST_FRAME_TIME;\r\n    /**\r\n     * Data section\r\n     */\r\n    private ArrayList&lt;IVideoSink&gt; mAlVideoSinks;\r\n    /**\r\n     * Others section\r\n     */\r\n    private BufferedInputStream mBufferedInputStream;\r\n\r\n    public VideoPlayer(String filename) {\r\n        mAlVideoSinks = new ArrayList&lt;IVideoSink&gt;();\r\n\r\n        try {\r\n            mBufferedInputStream = new BufferedInputStream(new FileInputStream(filename));\r\n        } catch (FileNotFoundException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public void addVideoSink(IVideoSink videoSink) {\r\n        synchronized (mAlVideoSinks) {\r\n            mAlVideoSinks.add(videoSink);\r\n        }\r\n    }\r\n\r\n    public void removeVideoSink(IVideoSink videoSink) {\r\n        synchronized (mAlVideoSinks) {\r\n            if (mAlVideoSinks.contains(videoSink))\r\n                mAlVideoSinks.remove(videoSink);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        int count = 0;\r\n\r\n        while (IS_ALIVE) {\r\n            if (LAST_FRAME_TIME == 0) {\r\n                LAST_FRAME_TIME = System.currentTimeMillis();\r\n            }\r\n\r\n            try {\r\n                long currentTime = System.currentTimeMillis();\r\n                if (currentTime - LAST_FRAME_TIME &lt; 1000 / FPS) {\r\n                    Thread.sleep(1000 / FPS - (currentTime - LAST_FRAME_TIME));\r\n                }\r\n                LAST_FRAME_TIME = System.currentTimeMillis();\r\n\r\n                int b0 = mBufferedInputStream.read();\r\n                if (b0 == -1) break;\r\n                int b1 = mBufferedInputStream.read();\r\n                int b2 = mBufferedInputStream.read();\r\n                int b3 = mBufferedInputStream.read();\r\n\r\n                count = b0 + (b1 &lt;&lt; 8) + (b2 &lt;&lt; 16) + (b3 &lt;&lt; 24);\r\n                byte[] buffer = new byte[count];\r\n                int readCount = mBufferedInputStream.read(buffer, 0, count);\r\n                for (IVideoSink videoSink : mAlVideoSinks) {\r\n                    videoSink.onFrame(buffer, null);\r\n                }\r\n\r\n            } catch (Exception e) {\r\n                // TODO Auto-generated catch block\r\n                e.printStackTrace();\r\n            }\r\n\r\n        }\r\n\r\n        try {\r\n            mBufferedInputStream.close();\r\n        } catch (IOException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        }\r\n\r\n        for (IVideoSink videoSink : mAlVideoSinks) {\r\n            videoSink.onVideoEnd();\r\n        }\r\n\r\n    }\r\n\r\n    public void stop() {\r\n        IS_ALIVE = false;\r\n    }\r\n\r\n    }\r\n\r\n**PCM Player.java**\r\n\r\n    package runnable;\r\n\r\n    import android.media.AudioFormat;\r\n    import android.media.AudioManager;\r\n    import android.media.AudioTrack;\r\n\r\n    import java.util.ArrayList;\r\n\r\n    public class PCMPlayer implements Runnable {\r\n    /**\r\n     * String section\r\n     */\r\n    private boolean IS_ALIVE = true;\r\n    /**\r\n     * Data section\r\n     */\r\n    private ArrayList&lt;byte[]&gt; mAlBuffers = new ArrayList&lt;byte[]&gt;();\r\n    /**\r\n     * Other section\r\n     */\r\n    private AudioTrack mAudioTrack;\r\n\r\n    public PCMPlayer() {\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        int bufSize = AudioTrack.getMinBufferSize(8000,\r\n                AudioFormat.CHANNEL_CONFIGURATION_MONO,\r\n                AudioFormat.ENCODING_PCM_16BIT);\r\n        mAudioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,\r\n                8000,\r\n                AudioFormat.CHANNEL_CONFIGURATION_MONO,\r\n                AudioFormat.ENCODING_PCM_16BIT,\r\n                bufSize,\r\n                AudioTrack.MODE_STREAM);\r\n        mAudioTrack.play();\r\n\r\n        while (IS_ALIVE) {\r\n            byte[] buffer = null;\r\n            boolean dataFlag = true;\r\n\r\n            while (dataFlag) {\r\n                synchronized (mAlBuffers) {\r\n                    if (mAlBuffers.size() &gt; 0) {\r\n                        buffer = mAlBuffers.remove(0);\r\n                    } else {\r\n                        dataFlag = false;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                mAudioTrack.write(buffer, 0, buffer.length);\r\n            }\r\n\r\n            try {\r\n                Thread.sleep(10);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        mAudioTrack.stop();\r\n        mAudioTrack.release();\r\n    }\r\n\r\n    public void writePCM(byte[] pcm) {\r\n        synchronized (mAlBuffers) {\r\n            byte[] buffer = new byte[pcm.length];\r\n            System.arraycopy(pcm, 0, buffer, 0, buffer.length);\r\n            mAlBuffers.add(buffer);\r\n        }\r\n    }\r\n\r\n    public void stop() {\r\n        IS_ALIVE = false;\r\n    }\r\n    }\r\n","title":"Need get correct AVI Player class to play all AVI video files inside android application","body":"<p>I try to get correct AVI video player to play AVI file since my current AVI Player class looks like not work really good anymore.</p>\n\n<p>Some AVI files can play correctly, but the others can not.</p>\n\n<p>People who know which AVI Video player class play all avi files exactly,</p>\n\n<p>Please help me,</p>\n\n<p>Thank you,</p>\n\n<p>p/s : </p>\n\n<p>I don't want intent to 3rd application to play AVI file.</p>\n\n<p>Below codes is current I used to play AVI files:</p>\n\n<p><strong>AVI Player.java</strong>\n    package runnable;</p>\n\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.util.ArrayList;\n\nimport iterface.IVideoSink;\n\npublic class VideoPlayer implements Runnable {\nprivate final int FPS = 24;\n/**\n * String section\n */\nprivate boolean IS_ALIVE = true;\nprivate long LAST_FRAME_TIME;\n/**\n * Data section\n */\nprivate ArrayList&lt;IVideoSink&gt; mAlVideoSinks;\n/**\n * Others section\n */\nprivate BufferedInputStream mBufferedInputStream;\n\npublic VideoPlayer(String filename) {\n    mAlVideoSinks = new ArrayList&lt;IVideoSink&gt;();\n\n    try {\n        mBufferedInputStream = new BufferedInputStream(new FileInputStream(filename));\n    } catch (FileNotFoundException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n\n}\n\npublic void addVideoSink(IVideoSink videoSink) {\n    synchronized (mAlVideoSinks) {\n        mAlVideoSinks.add(videoSink);\n    }\n}\n\npublic void removeVideoSink(IVideoSink videoSink) {\n    synchronized (mAlVideoSinks) {\n        if (mAlVideoSinks.contains(videoSink))\n            mAlVideoSinks.remove(videoSink);\n    }\n}\n\n@Override\npublic void run() {\n    int count = 0;\n\n    while (IS_ALIVE) {\n        if (LAST_FRAME_TIME == 0) {\n            LAST_FRAME_TIME = System.currentTimeMillis();\n        }\n\n        try {\n            long currentTime = System.currentTimeMillis();\n            if (currentTime - LAST_FRAME_TIME &lt; 1000 / FPS) {\n                Thread.sleep(1000 / FPS - (currentTime - LAST_FRAME_TIME));\n            }\n            LAST_FRAME_TIME = System.currentTimeMillis();\n\n            int b0 = mBufferedInputStream.read();\n            if (b0 == -1) break;\n            int b1 = mBufferedInputStream.read();\n            int b2 = mBufferedInputStream.read();\n            int b3 = mBufferedInputStream.read();\n\n            count = b0 + (b1 &lt;&lt; 8) + (b2 &lt;&lt; 16) + (b3 &lt;&lt; 24);\n            byte[] buffer = new byte[count];\n            int readCount = mBufferedInputStream.read(buffer, 0, count);\n            for (IVideoSink videoSink : mAlVideoSinks) {\n                videoSink.onFrame(buffer, null);\n            }\n\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n\n    }\n\n    try {\n        mBufferedInputStream.close();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n    for (IVideoSink videoSink : mAlVideoSinks) {\n        videoSink.onVideoEnd();\n    }\n\n}\n\npublic void stop() {\n    IS_ALIVE = false;\n}\n\n}\n</code></pre>\n\n<p><strong>PCM Player.java</strong></p>\n\n<pre><code>package runnable;\n\nimport android.media.AudioFormat;\nimport android.media.AudioManager;\nimport android.media.AudioTrack;\n\nimport java.util.ArrayList;\n\npublic class PCMPlayer implements Runnable {\n/**\n * String section\n */\nprivate boolean IS_ALIVE = true;\n/**\n * Data section\n */\nprivate ArrayList&lt;byte[]&gt; mAlBuffers = new ArrayList&lt;byte[]&gt;();\n/**\n * Other section\n */\nprivate AudioTrack mAudioTrack;\n\npublic PCMPlayer() {\n}\n\n@Override\npublic void run() {\n    int bufSize = AudioTrack.getMinBufferSize(8000,\n            AudioFormat.CHANNEL_CONFIGURATION_MONO,\n            AudioFormat.ENCODING_PCM_16BIT);\n    mAudioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,\n            8000,\n            AudioFormat.CHANNEL_CONFIGURATION_MONO,\n            AudioFormat.ENCODING_PCM_16BIT,\n            bufSize,\n            AudioTrack.MODE_STREAM);\n    mAudioTrack.play();\n\n    while (IS_ALIVE) {\n        byte[] buffer = null;\n        boolean dataFlag = true;\n\n        while (dataFlag) {\n            synchronized (mAlBuffers) {\n                if (mAlBuffers.size() &gt; 0) {\n                    buffer = mAlBuffers.remove(0);\n                } else {\n                    dataFlag = false;\n                    break;\n                }\n            }\n\n            mAudioTrack.write(buffer, 0, buffer.length);\n        }\n\n        try {\n            Thread.sleep(10);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    mAudioTrack.stop();\n    mAudioTrack.release();\n}\n\npublic void writePCM(byte[] pcm) {\n    synchronized (mAlBuffers) {\n        byte[] buffer = new byte[pcm.length];\n        System.arraycopy(pcm, 0, buffer, 0, buffer.length);\n        mAlBuffers.add(buffer);\n    }\n}\n\npublic void stop() {\n    IS_ALIVE = false;\n}\n}\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1685326190,"creation_date":1685326190,"answer_id":76354307,"question_id":76137919,"body_markdown":"Just use If-else or If-else-if , nothing work, just don&#39;t use switch.","title":"Android Studio Menu Error &quot;Constant expression required&quot;","body":"<p>Just use If-else or If-else-if , nothing work, just don't use switch.</p>\n"},{"tags":[],"owner":{"account_id":19866558,"reputation":1,"user_id":14553686,"display_name":"Daniel Kavale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695822333,"creation_date":1695822333,"answer_id":77188088,"question_id":76137919,"body_markdown":"    @Override\r\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {    \r\n        int id = item.getItemId();\r\n        if (id == R.id.itLogout){\r\n            Toast.makeText(this,&quot;You clicked Logout&quot;,Toast.LENGTH_LONG).show();\r\n         }\r\n         else if (id == R.id.itAbout) {\r\n                Toast.makeText(this,&quot;You clicked About&quot;,Toast.LENGTH_LONG).show();\r\n            \r\n         }\r\n         return true;\r\n       }\r\n    }","title":"Android Studio Menu Error &quot;Constant expression required&quot;","body":"<pre><code>@Override\npublic boolean onOptionsItemSelected(@NonNull MenuItem item) {    \n    int id = item.getItemId();\n    if (id == R.id.itLogout){\n        Toast.makeText(this,&quot;You clicked Logout&quot;,Toast.LENGTH_LONG).show();\n     }\n     else if (id == R.id.itAbout) {\n            Toast.makeText(this,&quot;You clicked About&quot;,Toast.LENGTH_LONG).show();\n        \n     }\n     return true;\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":14993972,"reputation":11,"user_id":10824046,"display_name":"Tommy Miyar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2830,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695822333,"creation_date":1682794746,"question_id":76137919,"body_markdown":"I was trying to add a menu to my Android Studio layout, and it gave me the error &quot;Constant expression required&quot;.\r\nWhy is it happening?\r\nThis is my HomepageActivity code:\r\n\r\n    package com.example.myqueenbapp;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import com.example.myqueenbapp.R;\r\n    \r\n    import android.annotation.SuppressLint;\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.Menu;\r\n    import android.view.MenuInflater;\r\n    import android.view.MenuItem;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    import android.widget.Toolbar;\r\n    \r\n    import com.google.firebase.auth.FirebaseAuth;\r\n    \r\n    public class HomepageActivity extends AppCompatActivity implements View.OnClickListener {\r\n        Button btLogout;\r\n        TextView tvName;\r\n        MenuItem itLogout, itAbout, itProfile;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState)\r\n        {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_homepage);\r\n            btLogout=findViewById(R.id.btLogout);\r\n            tvName=findViewById(R.id.tvName);\r\n            btLogout.setOnClickListener(this);\r\n        }\r\n    \r\n        @Override\r\n        public boolean onCreateOptionsMenu(Menu menu)\r\n        {\r\n            getMenuInflater().inflate(R.menu.menu_homepage, menu);\r\n            return true;\r\n        }\r\n    \r\n        @SuppressLint(&quot;NonConstantResourceId&quot;)\r\n        @Override\r\n        public boolean onOptionsItemSelected(@NonNull MenuItem item)\r\n        {\r\n            switch(item.getItemId())\r\n            {\r\n                case R.id.itLogout:\r\n                    Toast.makeText(HomepageActivity.this, &quot;this page is yet to be here&quot;, Toast.LENGTH_LONG).show();\r\n                    return true;\r\n                case R.id.itAbout:\r\n                    Toast.makeText(HomepageActivity.this, &quot;This page doesn&#39;t exist yet&quot;, Toast.LENGTH_LONG).show();\r\n                    return true;\r\n                case R.id.itProfile:\r\n                    Toast.makeText(HomepageActivity.this, &quot;this page doesn&#39;t exist yet&quot;, Toast.LENGTH_LONG).show();\r\n                    return true;\r\n                default:\r\n                    return super.onOptionsItemSelected(item);\r\n            }\r\n    \r\n            return super.onOptionsItemSelected(item);\r\n        }\r\n    \r\n        @Override\r\n        public void onClick(View v)\r\n        {\r\n            if(v==btLogout)\r\n            {\r\n                FirebaseAuth.getInstance().signOut();\r\n                Intent moveToStart = new Intent (HomepageActivity.this, MainActivity.class);\r\n                startActivity(moveToStart);\r\n            }\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nThis is my activity_homepage XML file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:background=&quot;@color/queenbpink&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:weightSum=&quot;12&quot;\r\n        tools:context=&quot;.HomepageActivity&quot;&gt;\r\n    \r\n    \r\n        &lt;ImageView\r\n            android:id=&quot;@+id/ivLogo&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;200sp&quot;\r\n            android:layout_weight=&quot;0&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            tools:srcCompat=&quot;@drawable/queenb_logo_dark_on_pink&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/tvWelcome&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;0&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:textSize=&quot;26sp&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:text=&quot;ברוכה הבאה,&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/tvName&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:layout_weight=&quot;0&quot;\r\n            android:text=&quot;&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:textSize=&quot;26sp&quot;\r\n            android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/tvEmpty&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:text=&quot;&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:textSize=&quot;26sp&quot;\r\n            android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/btForms&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;0.5&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:textSize=&quot;22sp&quot;\r\n            android:textColor=&quot;@color/queenbpink&quot;\r\n            android:backgroundTint=&quot;@color/queenbgrey&quot;\r\n            android:text=&quot;טפסים שימושיים&quot; /&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/btCalendar&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;0.5&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:textSize=&quot;22sp&quot;\r\n            android:textColor=&quot;@color/queenbpink&quot;\r\n            android:backgroundTint=&quot;@color/queenbgrey&quot;\r\n            android:text=&quot;יומן פעילויות&quot; /&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/btGallery&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;0.5&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:textSize=&quot;22sp&quot;\r\n            android:textColor=&quot;@color/queenbpink&quot;\r\n            android:backgroundTint=&quot;@color/queenbgrey&quot;\r\n            android:text=&quot;גלריית תמונות&quot; /&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/btForum&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;0.5&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:textSize=&quot;22sp&quot;\r\n            android:textColor=&quot;@color/queenbpink&quot;\r\n            android:backgroundTint=&quot;@color/queenbgrey&quot;\r\n            android:text=&quot;פורום&quot; /&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/btLogout&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;0.5&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            android:textSize=&quot;22sp&quot;\r\n            android:textColor=&quot;@color/queenbpink&quot;\r\n            android:backgroundTint=&quot;@color/queenbgrey&quot;\r\n            android:text=&quot;התנתקות&quot; /&gt;\r\n    \r\n    \r\n    \r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nand this is my menu XML file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/itProfile&quot;\r\n            android:title=&quot;הפרופיל שלי&quot;\r\n            app:showAsAction=&quot;never&quot;\r\n            android:visible=&quot;true&quot;/&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/itAbout&quot;\r\n            android:title=&quot;על העמותה&quot;\r\n            app:showAsAction=&quot;never&quot;\r\n            android:visible=&quot;true&quot;/&gt;\r\n        &lt;item\r\n            android:id=&quot;@+id/itLogout&quot;\r\n            android:title=&quot;התנתקות&quot;\r\n            app:showAsAction=&quot;never&quot;\r\n            android:visible=&quot;true&quot;\r\n            /&gt;\r\n    &lt;/menu&gt;\r\n\r\nThanks in advance!\r\nthe error is given for the three rows in the HomepageActivity where it says &quot; case R.id.it...&quot;.\r\n","title":"Android Studio Menu Error &quot;Constant expression required&quot;","body":"<p>I was trying to add a menu to my Android Studio layout, and it gave me the error &quot;Constant expression required&quot;.\nWhy is it happening?\nThis is my HomepageActivity code:</p>\n<pre><code>package com.example.myqueenbapp;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport com.example.myqueenbapp.R;\n\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.Menu;\nimport android.view.MenuInflater;\nimport android.view.MenuItem;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport android.widget.Toast;\nimport android.widget.Toolbar;\n\nimport com.google.firebase.auth.FirebaseAuth;\n\npublic class HomepageActivity extends AppCompatActivity implements View.OnClickListener {\n    Button btLogout;\n    TextView tvName;\n    MenuItem itLogout, itAbout, itProfile;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_homepage);\n        btLogout=findViewById(R.id.btLogout);\n        tvName=findViewById(R.id.tvName);\n        btLogout.setOnClickListener(this);\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu)\n    {\n        getMenuInflater().inflate(R.menu.menu_homepage, menu);\n        return true;\n    }\n\n    @SuppressLint(&quot;NonConstantResourceId&quot;)\n    @Override\n    public boolean onOptionsItemSelected(@NonNull MenuItem item)\n    {\n        switch(item.getItemId())\n        {\n            case R.id.itLogout:\n                Toast.makeText(HomepageActivity.this, &quot;this page is yet to be here&quot;, Toast.LENGTH_LONG).show();\n                return true;\n            case R.id.itAbout:\n                Toast.makeText(HomepageActivity.this, &quot;This page doesn't exist yet&quot;, Toast.LENGTH_LONG).show();\n                return true;\n            case R.id.itProfile:\n                Toast.makeText(HomepageActivity.this, &quot;this page doesn't exist yet&quot;, Toast.LENGTH_LONG).show();\n                return true;\n            default:\n                return super.onOptionsItemSelected(item);\n        }\n\n        return super.onOptionsItemSelected(item);\n    }\n\n    @Override\n    public void onClick(View v)\n    {\n        if(v==btLogout)\n        {\n            FirebaseAuth.getInstance().signOut();\n            Intent moveToStart = new Intent (HomepageActivity.this, MainActivity.class);\n            startActivity(moveToStart);\n        }\n    }\n\n\n}\n</code></pre>\n<p>This is my activity_homepage XML file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:background=&quot;@color/queenbpink&quot;\n    android:orientation=&quot;vertical&quot;\n    android:weightSum=&quot;12&quot;\n    tools:context=&quot;.HomepageActivity&quot;&gt;\n\n\n    &lt;ImageView\n        android:id=&quot;@+id/ivLogo&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;200sp&quot;\n        android:layout_weight=&quot;0&quot;\n        android:layout_gravity=&quot;center&quot;\n        tools:srcCompat=&quot;@drawable/queenb_logo_dark_on_pink&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/tvWelcome&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_weight=&quot;0&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:textStyle=&quot;bold&quot;\n        android:textSize=&quot;26sp&quot;\n        android:textAlignment=&quot;center&quot;\n        android:text=&quot;ברוכה הבאה,&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/tvName&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:layout_weight=&quot;0&quot;\n        android:text=&quot;&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textSize=&quot;26sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/tvEmpty&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:layout_weight=&quot;1&quot;\n        android:text=&quot;&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textSize=&quot;26sp&quot;\n        android:textStyle=&quot;bold&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/btForms&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_weight=&quot;0.5&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:textStyle=&quot;bold&quot;\n        android:textSize=&quot;22sp&quot;\n        android:textColor=&quot;@color/queenbpink&quot;\n        android:backgroundTint=&quot;@color/queenbgrey&quot;\n        android:text=&quot;טפסים שימושיים&quot; /&gt;\n    &lt;Button\n        android:id=&quot;@+id/btCalendar&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_weight=&quot;0.5&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:textStyle=&quot;bold&quot;\n        android:textSize=&quot;22sp&quot;\n        android:textColor=&quot;@color/queenbpink&quot;\n        android:backgroundTint=&quot;@color/queenbgrey&quot;\n        android:text=&quot;יומן פעילויות&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/btGallery&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_weight=&quot;0.5&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:textStyle=&quot;bold&quot;\n        android:textSize=&quot;22sp&quot;\n        android:textColor=&quot;@color/queenbpink&quot;\n        android:backgroundTint=&quot;@color/queenbgrey&quot;\n        android:text=&quot;גלריית תמונות&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/btForum&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_weight=&quot;0.5&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:textStyle=&quot;bold&quot;\n        android:textSize=&quot;22sp&quot;\n        android:textColor=&quot;@color/queenbpink&quot;\n        android:backgroundTint=&quot;@color/queenbgrey&quot;\n        android:text=&quot;פורום&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/btLogout&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_weight=&quot;0.5&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:textStyle=&quot;bold&quot;\n        android:textSize=&quot;22sp&quot;\n        android:textColor=&quot;@color/queenbpink&quot;\n        android:backgroundTint=&quot;@color/queenbgrey&quot;\n        android:text=&quot;התנתקות&quot; /&gt;\n\n\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>and this is my menu XML file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n    &lt;item\n        android:id=&quot;@+id/itProfile&quot;\n        android:title=&quot;הפרופיל שלי&quot;\n        app:showAsAction=&quot;never&quot;\n        android:visible=&quot;true&quot;/&gt;\n    &lt;item\n        android:id=&quot;@+id/itAbout&quot;\n        android:title=&quot;על העמותה&quot;\n        app:showAsAction=&quot;never&quot;\n        android:visible=&quot;true&quot;/&gt;\n    &lt;item\n        android:id=&quot;@+id/itLogout&quot;\n        android:title=&quot;התנתקות&quot;\n        app:showAsAction=&quot;never&quot;\n        android:visible=&quot;true&quot;\n        /&gt;\n&lt;/menu&gt;\n</code></pre>\n<p>Thanks in advance!\nthe error is given for the three rows in the HomepageActivity where it says &quot; case R.id.it...&quot;.</p>\n"},{"tags":["java","websocket","server"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695825134,"post_id":77188062,"comment_id":136076206,"body_markdown":"Maybe something like [this](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#relativize(java.nio.file.Path))","body":"Maybe something like <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Path.html#relativize(java.nio.file.Path)\" rel=\"nofollow noreferrer\">this</a>"},{"owner":{"account_id":19172440,"reputation":13,"user_id":14005892,"display_name":"KotekBehemotek"},"score":0,"creation_date":1695826004,"post_id":77188062,"comment_id":136076401,"body_markdown":"Oh so there&#39;s no way of indication where requests starts in relation with server files?","body":"Oh so there&#39;s no way of indication where requests starts in relation with server files?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695826540,"post_id":77188062,"comment_id":136076523,"body_markdown":"The request contains a path which is relative to the context","body":"The request contains a path which is relative to the context"},{"owner":{"account_id":19172440,"reputation":13,"user_id":14005892,"display_name":"KotekBehemotek"},"score":0,"creation_date":1695828332,"post_id":77188062,"comment_id":136076905,"body_markdown":"Ok I think I just got the idea. Thank You very much for responding ^^","body":"Ok I think I just got the idea. Thank You very much for responding ^^"}],"owner":{"account_id":19172440,"reputation":13,"user_id":14005892,"display_name":"KotekBehemotek"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695822127,"creation_date":1695822127,"question_id":77188062,"body_markdown":"For the first time I&#39;m creating a socket based Java server.\r\nI faced a problem where I need to translate request targets to actual paths I expect to be accessed by client.\r\nI would like to set the webroot once and don&#39;t need to interpret request targets.\r\n\r\nIt is a kind of question where it&#39;s difficult to provide an appropriate piece of code but here&#39;s what server thread looks like:\r\n\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\n\r\npublic class ServerThread extends Thread {\r\n\r\n    private final ServerSocket serverSocket;\r\n\r\n    public ServerThread(int port) throws IOException {\r\n        this.serverSocket = new ServerSocket(port);\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        System.out.println(&quot;Server started&quot;);\r\n\r\n        try {\r\n            while (serverSocket.isBound() &amp;&amp; !serverSocket.isClosed()) {\r\n                Socket socket = serverSocket.accept();\r\n                ConnectionThread connectionThread = new ConnectionThread(socket);\r\n                connectionThread.start();\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (serverSocket != null) {\r\n                try {\r\n                    serverSocket.close();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n","title":"How to set webroot in Java Socket server","body":"<p>For the first time I'm creating a socket based Java server.\nI faced a problem where I need to translate request targets to actual paths I expect to be accessed by client.\nI would like to set the webroot once and don't need to interpret request targets.</p>\n<p>It is a kind of question where it's difficult to provide an appropriate piece of code but here's what server thread looks like:</p>\n<pre><code>import java.io.IOException;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class ServerThread extends Thread {\n\n    private final ServerSocket serverSocket;\n\n    public ServerThread(int port) throws IOException {\n        this.serverSocket = new ServerSocket(port);\n    }\n\n    @Override\n    public void run() {\n        System.out.println(&quot;Server started&quot;);\n\n        try {\n            while (serverSocket.isBound() &amp;&amp; !serverSocket.isClosed()) {\n                Socket socket = serverSocket.accept();\n                ConnectionThread connectionThread = new ConnectionThread(socket);\n                connectionThread.start();\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            if (serverSocket != null) {\n                try {\n                    serverSocket.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1385931,"reputation":461,"user_id":1317993,"display_name":"Luke Duncan"},"score":1,"creation_date":1637378938,"post_id":70043011,"comment_id":123817460,"body_markdown":"It&#39;s likely to give you a bit more information. Share your stacktrace. Check your Java compilation options, Kotlin compilation options and which JVM you are using.","body":"It&#39;s likely to give you a bit more information. Share your stacktrace. Check your Java compilation options, Kotlin compilation options and which JVM you are using."},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":2,"creation_date":1637379330,"post_id":70043011,"comment_id":123817508,"body_markdown":"did you try to name a class or variable `class`?","body":"did you try to name a class or variable <code>class</code>?"},{"owner":{"account_id":10280421,"reputation":87,"user_id":7585800,"display_name":"ndsmith"},"score":0,"creation_date":1637379884,"post_id":70043011,"comment_id":123817565,"body_markdown":"@LukeDuncan Where would I find the stacktrace? It shows the build view with the Build Output tab and all that it says is &quot;Cause: not a valid name: class&quot;","body":"@LukeDuncan Where would I find the stacktrace? It shows the build view with the Build Output tab and all that it says is &quot;Cause: not a valid name: class&quot;"},{"owner":{"account_id":10280421,"reputation":87,"user_id":7585800,"display_name":"ndsmith"},"score":0,"creation_date":1637380407,"post_id":70043011,"comment_id":123817616,"body_markdown":"@TylerV I am not finding anything that is named class that shouldn&#39;t be","body":"@TylerV I am not finding anything that is named class that shouldn&#39;t be"},{"owner":{"account_id":1385931,"reputation":461,"user_id":1317993,"display_name":"Luke Duncan"},"score":0,"creation_date":1637380529,"post_id":70043011,"comment_id":123817637,"body_markdown":"@ndsmith try running `./gradlew assemble --debug` from your terminal.","body":"@ndsmith try running <code>.&#47;gradlew assemble --debug</code> from your terminal."},{"owner":{"account_id":10280421,"reputation":87,"user_id":7585800,"display_name":"ndsmith"},"score":0,"creation_date":1637381478,"post_id":70043011,"comment_id":123817739,"body_markdown":"@LukeDuncan added the stacktrace","body":"@LukeDuncan added the stacktrace"},{"owner":{"account_id":1385931,"reputation":461,"user_id":1317993,"display_name":"Luke Duncan"},"score":1,"creation_date":1637384368,"post_id":70043011,"comment_id":123818003,"body_markdown":"Check your XML files. Looks like you have the Android XML namespace twice in one of them, probably a layout file.\n\n```\nCaused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[11,327]\n    Message: http://www.w3.org/TR/1999/REC-xml-names-19990114#AttributeNSNotUnique?androidx.constraintlayout.widget.ConstraintLayout&amp;layout_width&amp;http://sch\n    emas.android.com/apk/res/android\n```","body":"Check your XML files. Looks like you have the Android XML namespace twice in one of them, probably a layout file.  ``` Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[11,327]     Message: <a href=\"http://www.w3.org/TR/1999/REC-xml-names-19990114#AttributeNSNotUnique?androidx.constraintlayout.widget.ConstraintLayout&amp;layout_width&amp;http://sch\" rel=\"nofollow noreferrer\">w3.org/TR/1999/&hellip;</a>     emas.android.com/apk/res/android ```"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":1,"creation_date":1637384391,"post_id":70043011,"comment_id":123818006,"body_markdown":"Looks like it&#39;s from the XML. Look at the bottom. `Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[11,327]\n    Message: http://www.w3.org/TR/1999/REC-xml-names-19990114#AttributeNSNotUnique?androidx.constraintlayout.widget.ConstraintLayout&amp;layout_width`","body":"Looks like it&#39;s from the XML. Look at the bottom. <code>Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[11,327]     Message: http:&#47;&#47;www.w3.org&#47;TR&#47;1999&#47;REC-xml-names-19990114#AttributeNS&zwnj;&#8203;NotUnique?androidx.c&zwnj;&#8203;onstraintlayout.widg&zwnj;&#8203;et.ConstraintLayout&amp;&zwnj;&#8203;layout_width</code>"}],"answers":[{"tags":[],"owner":{"account_id":14509264,"reputation":41,"user_id":10480169,"display_name":"rachad"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1643356794,"creation_date":1643356794,"answer_id":70890476,"question_id":70043011,"body_markdown":"I had the same problem with a different word than &#39;class&#39; mine was &#39;1kg&#39;. The problem was that I used &#39;_1kg&#39; as an id in XML so make sure you didn&#39;t use &#39;class&#39; in your XML at all. (as id or even for extract string resource) ","title":"Android Studio says &quot;Cause: not a valid name: class&quot;","body":"<p>I had the same problem with a different word than 'class' mine was '1kg'. The problem was that I used '_1kg' as an id in XML so make sure you didn't use 'class' in your XML at all. (as id or even for extract string resource)</p>\n"},{"tags":[],"owner":{"account_id":28614715,"reputation":31,"user_id":21908983,"display_name":"Khusinov Shakhriyor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695821745,"creation_date":1695821745,"answer_id":77188011,"question_id":70043011,"body_markdown":"this error happened to me, and I solved it in an easy way. \r\n\r\nIn one XML file, I set an id in the Kiril alphabet like кр\r\n\r\nafter changing this ID, this problem was solved. \r\nSo check your XML file and ids and ensure every ID and name is in the Latin alphabet.","title":"Android Studio says &quot;Cause: not a valid name: class&quot;","body":"<p>this error happened to me, and I solved it in an easy way.</p>\n<p>In one XML file, I set an id in the Kiril alphabet like кр</p>\n<p>after changing this ID, this problem was solved.\nSo check your XML file and ids and ensure every ID and name is in the Latin alphabet.</p>\n"}],"owner":{"account_id":10280421,"reputation":87,"user_id":7585800,"display_name":"ndsmith"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1228,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695821745,"creation_date":1637378696,"question_id":70043011,"body_markdown":"When trying to build my Android app, I get an error that says `&quot;Cause: not a valid name: class&quot;`. It doesn&#39;t give me any other information at all.\r\n\r\nStacktrace: https://pastebin.com/4guRqdLu","title":"Android Studio says &quot;Cause: not a valid name: class&quot;","body":"<p>When trying to build my Android app, I get an error that says <code>&quot;Cause: not a valid name: class&quot;</code>. It doesn't give me any other information at all.</p>\n<p>Stacktrace: <a href=\"https://pastebin.com/4guRqdLu\" rel=\"nofollow noreferrer\">https://pastebin.com/4guRqdLu</a></p>\n"},{"tags":["java","android","kotlin","nfc","hce"],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695821380,"creation_date":1695821380,"answer_id":77187967,"question_id":77187707,"body_markdown":"[Android HCE][1] can emulate a specific type of NFC Tag, a NFC Type 4A (it cannot emulate the other 4 main NFC standard types, or propitiatory types like Mifare Classic)\r\n\r\nThis type of Tag is very flexible in how it responds to a reader, but because of the flexibility the Tag response needs to be matched to what the NFC reader is expecting, if you are programming the NFC reader then this should not be a problem.\r\n\r\nAs a more specific example [here][2] is a fully working example of HCE on Android that responds as a Type 4A Tag with a Standard Ndef data format message (This can be read automatically by most phones, but most USB readers can only read this if they are programmed to).\r\n\r\nAs the question is very vague, it is difficult to give more direction other than study details about Type 4 Tags and the working example of HCE.\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/connectivity/nfc/hce\r\n  [2]: https://github.com/underwindfall/NFCAndroid","title":"What to use to do NFC tag emulation in Android app","body":"<p><a href=\"https://developer.android.com/guide/topics/connectivity/nfc/hce\" rel=\"nofollow noreferrer\">Android HCE</a> can emulate a specific type of NFC Tag, a NFC Type 4A (it cannot emulate the other 4 main NFC standard types, or propitiatory types like Mifare Classic)</p>\n<p>This type of Tag is very flexible in how it responds to a reader, but because of the flexibility the Tag response needs to be matched to what the NFC reader is expecting, if you are programming the NFC reader then this should not be a problem.</p>\n<p>As a more specific example <a href=\"https://github.com/underwindfall/NFCAndroid\" rel=\"nofollow noreferrer\">here</a> is a fully working example of HCE on Android that responds as a Type 4A Tag with a Standard Ndef data format message (This can be read automatically by most phones, but most USB readers can only read this if they are programmed to).</p>\n<p>As the question is very vague, it is difficult to give more direction other than study details about Type 4 Tags and the working example of HCE.</p>\n"}],"owner":{"account_id":29547355,"reputation":1,"user_id":22644794,"display_name":"Programmer Android"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695821380,"creation_date":1695819244,"question_id":77187707,"body_markdown":"Is there an opportunity to emulate the NFC tag through an android application? So that it is exactly the tag that is read by another device without a third-party application. That is, it is not the implementation of data reception and transmission that is needed, but an imitation, for example, NFC cards that can be used as a key to some command on a smartphone (for example, a wifi connection). \r\n\r\nHCE is not sure what is suitable in this case, but I may be wrong. \r\n\r\nIf it is possible, please tell me what and how to use it?\r\n\r\nP2P data transmission via NFC is not suitable because it requires a receiver application","title":"What to use to do NFC tag emulation in Android app","body":"<p>Is there an opportunity to emulate the NFC tag through an android application? So that it is exactly the tag that is read by another device without a third-party application. That is, it is not the implementation of data reception and transmission that is needed, but an imitation, for example, NFC cards that can be used as a key to some command on a smartphone (for example, a wifi connection).</p>\n<p>HCE is not sure what is suitable in this case, but I may be wrong.</p>\n<p>If it is possible, please tell me what and how to use it?</p>\n<p>P2P data transmission via NFC is not suitable because it requires a receiver application</p>\n"},{"tags":["java","logging","log4j","slf4j","lombok"],"answers":[{"tags":[],"owner":{"account_id":1032025,"reputation":2197,"user_id":6591962,"display_name":"Andrei Kovrov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638932245,"creation_date":1638932245,"answer_id":70269375,"question_id":70267879,"body_markdown":"It&#39;s enough to put just a single `logback.xml` to your classpath (e.g. `/src/main/resources`). [It&#39;s a doc page](http://logback.qos.ch/manual/configuration.html#auto_configuration) about how Logback lookups the configuration file. But for some libraries, you have to use [bridges](http://www.slf4j.org/legacy.html#log4j-over-slf4j) to redirect &quot;old&quot; loggers to Logback.\r\n\r\nRelated questions: [common-logging](https://stackoverflow.com/questions/10117788/how-do-i-set-up-commons-logging-to-use-logback), [JUL](https://stackoverflow.com/questions/6020545/send-redirect-route-java-util-logging-logger-jul-to-logback-using-slf4j)","title":"can&#39;t we configure logs when using lombok?","body":"<p>It's enough to put just a single <code>logback.xml</code> to your classpath (e.g. <code>/src/main/resources</code>). <a href=\"http://logback.qos.ch/manual/configuration.html#auto_configuration\" rel=\"nofollow noreferrer\">It's a doc page</a> about how Logback lookups the configuration file. But for some libraries, you have to use <a href=\"http://www.slf4j.org/legacy.html#log4j-over-slf4j\" rel=\"nofollow noreferrer\">bridges</a> to redirect &quot;old&quot; loggers to Logback.</p>\n<p>Related questions: <a href=\"https://stackoverflow.com/questions/10117788/how-do-i-set-up-commons-logging-to-use-logback\">common-logging</a>, <a href=\"https://stackoverflow.com/questions/6020545/send-redirect-route-java-util-logging-logger-jul-to-logback-using-slf4j\">JUL</a></p>\n"},{"tags":[],"owner":{"account_id":1212752,"reputation":746,"user_id":1180993,"display_name":"White_King"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639005951,"creation_date":1639005951,"answer_id":70282949,"question_id":70267879,"body_markdown":"This is not a direct answer but it is a solution to the main question.\r\nInstead of using `logback-classic` dependency we can switch to a `log4j-slf4j-impl` implementation of `slf4j` and use the `log4j2.properties` file to configure levels and *Format/Layout Pattern* as shown in the [sample repository][1] to obtain this kind of logs:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://github.com/white-sdev/lombok-logging\r\n  [2]: https://i.stack.imgur.com/awK9J.png","title":"can&#39;t we configure logs when using lombok?","body":"<p>This is not a direct answer but it is a solution to the main question.\nInstead of using <code>logback-classic</code> dependency we can switch to a <code>log4j-slf4j-impl</code> implementation of <code>slf4j</code> and use the <code>log4j2.properties</code> file to configure levels and <em>Format/Layout Pattern</em> as shown in the <a href=\"https://github.com/white-sdev/lombok-logging\" rel=\"nofollow noreferrer\">sample repository</a> to obtain this kind of logs:</p>\n<p><a href=\"https://i.stack.imgur.com/awK9J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/awK9J.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":10026387,"reputation":183,"user_id":7414461,"display_name":"vvauban"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695821184,"creation_date":1695821184,"answer_id":77187941,"question_id":70267879,"body_markdown":"Use the application properties:\r\n\r\n    logging:\r\n      pattern:\r\n        console: &#39;%date{dd/MM/yyyy HH:mm:ss} %-5level [%thread] %logger {%X} %msg%n&#39;\r\n        file: &#39;%date{dd/MM/yyyy HH:mm:ss} %-5level [%thread] %logger {%X} %msg%n&#39;\r\n      level:\r\n        root: warn\r\n\r\n&#128279; https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-logging.html","title":"can&#39;t we configure logs when using lombok?","body":"<p>Use the application properties:</p>\n<pre><code>logging:\n  pattern:\n    console: '%date{dd/MM/yyyy HH:mm:ss} %-5level [%thread] %logger {%X} %msg%n'\n    file: '%date{dd/MM/yyyy HH:mm:ss} %-5level [%thread] %logger {%X} %msg%n'\n  level:\n    root: warn\n</code></pre>\n<p>🔗 <a href=\"https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-logging.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-logging.html</a></p>\n"}],"owner":{"account_id":1212752,"reputation":746,"user_id":1180993,"display_name":"White_King"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2027,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1695821184,"creation_date":1638917299,"question_id":70267879,"body_markdown":"I have a clean maven project and using lombok with this dependencies in my pom:\r\n\r\n&gt; **Edit**: [here is a sample project][1] with the configurations I&#39;m listing so you can take a look at it.\r\n\r\n```XML\r\n        &lt;!--region Lombok Configuration --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n            &lt;version&gt;1.8.0-beta2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.12&lt;/version&gt;\r\n            &lt;type&gt;jar&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- endregion --&gt;\r\n```\r\nAnd 4 duplicated files placed in `/src` and `/src/main/resources` each:\r\n1) **slf4j.properties**=\r\n2) **log4j.properties**:\r\n```properties\r\nlog4j.rootLogger=ERROR,stdout\r\nlog4j.logger.com.myorg=ERROR\r\nlog4j.logger.com.myorg.internal.myproj=ERROR\r\n\r\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\r\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\r\nlog4j.appender.stdout.layout.ConversionPattern=%m%n\r\n```\r\n\r\n3) **simplelogger.properties**\r\n```\r\norg.slf4j.simpleLogger.defaultLogLevel=ERROR\r\n```\r\n\r\n4) **logback.xml**\r\n```XML\r\n&lt;configuration&gt;\r\n\r\n&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n    &lt;!-- encoders are assigned the type\r\n         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;\r\n    &lt;encoder&gt;\r\n        &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\r\n    &lt;/encoder&gt;\r\n&lt;/appender&gt;\r\n\r\n&lt;root level=&quot;error&quot;&gt;\r\n    &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n&lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nI put all the logs in `ERROR` level so I will be able to just verify that the configuration files are being read, but when printing a single log for EVERY level, the console keeps printing the default level (**`INFO`**, `WARN` and `ERROR`)\r\n\r\nI assume that the no configuration file is being read/detected.\r\n\r\n**Which configuration file should I be using, and where should I place it for it to identify it?**\r\nOr maybe I&#39;m confused and we are not able to configure logs with this configuration and I should be looking into another implementation of lombok? I&#39;m kind of lost in here.\r\n\r\n\r\n  [1]: https://github.com/white-sdev/lombok-logging","title":"can&#39;t we configure logs when using lombok?","body":"<p>I have a clean maven project and using lombok with this dependencies in my pom:</p>\n<blockquote>\n<p><strong>Edit</strong>: <a href=\"https://github.com/white-sdev/lombok-logging\" rel=\"nofollow noreferrer\">here is a sample project</a> with the configurations I'm listing so you can take a look at it.</p>\n</blockquote>\n<pre><code>        &lt;!--region Lombok Configuration --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n            &lt;version&gt;1.8.0-beta2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;version&gt;1.1.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.12&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;!-- endregion --&gt;\n</code></pre>\n<p>And 4 duplicated files placed in <code>/src</code> and <code>/src/main/resources</code> each:</p>\n<ol>\n<li><strong>slf4j.properties</strong>=</li>\n<li><strong>log4j.properties</strong>:</li>\n</ol>\n<pre><code>log4j.rootLogger=ERROR,stdout\nlog4j.logger.com.myorg=ERROR\nlog4j.logger.com.myorg.internal.myproj=ERROR\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern=%m%n\n</code></pre>\n<ol start=\"3\">\n<li><strong>simplelogger.properties</strong></li>\n</ol>\n<pre><code>org.slf4j.simpleLogger.defaultLogLevel=ERROR\n</code></pre>\n<ol start=\"4\">\n<li><strong>logback.xml</strong></li>\n</ol>\n<pre><code>&lt;configuration&gt;\n\n&lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;!-- encoders are assigned the type\n         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --&gt;\n    &lt;encoder&gt;\n        &lt;pattern&gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n\n&lt;root level=&quot;error&quot;&gt;\n    &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n&lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>I put all the logs in <code>ERROR</code> level so I will be able to just verify that the configuration files are being read, but when printing a single log for EVERY level, the console keeps printing the default level (<strong><code>INFO</code></strong>, <code>WARN</code> and <code>ERROR</code>)</p>\n<p>I assume that the no configuration file is being read/detected.</p>\n<p><strong>Which configuration file should I be using, and where should I place it for it to identify it?</strong>\nOr maybe I'm confused and we are not able to configure logs with this configuration and I should be looking into another implementation of lombok? I'm kind of lost in here.</p>\n"},{"tags":["java","android","variables"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":1,"creation_date":1695817413,"post_id":77187418,"comment_id":136074372,"body_markdown":"If the activity is recreated (e.g. rotating the screen), you will lose all the values because it&#39;s a new object instance. This is why you should separate your logic and your UI (look for MVVM or other clean patterns).","body":"If the activity is recreated (e.g. rotating the screen), you will lose all the values because it&#39;s a new object instance. This is why you should separate your logic and your UI (look for MVVM or other clean patterns)."},{"owner":{"account_id":29547097,"reputation":1,"user_id":22644590,"display_name":"Sebastian Ned"},"score":0,"creation_date":1695822359,"post_id":77187418,"comment_id":136075513,"body_markdown":"So it is always better to use clean patterns? in any circumstances I mean ?","body":"So it is always better to use clean patterns? in any circumstances I mean ?"}],"answers":[{"tags":[],"owner":{"account_id":20619661,"reputation":103,"user_id":15136978,"display_name":"Shaurya Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695820146,"creation_date":1695820146,"answer_id":77187821,"question_id":77187418,"body_markdown":"The main reason behind this is the lifecycle of the **`Activity`** in **`Andorid`**.\r\nWhen the user interacts with your app, **`Android`** can recreate **`activities`** in response to various events. When an **`activity`** is recreated, its state may not be preserved and all member variables are reset to their default values unless you explicitly save and restore it.\r\n\r\nIn your code, you have declared the **`enteredText`** variable as a **`class`** field, but you&#39;re not saving and restoring its state when the activity is recreated. When your **`Activity`** is recreated after you set the value of **`enteredText`**, but before you use it in **`scanResults()`**, then **`enteredText`** would be reset to its default value (null here).\r\n\r\nYou should save your **`enteredText`** variable in the **`savedInstanceState`** Bundle in the **`onSaveInstanceState()`** method, and then restore it in either **`onCreate()`** or **`onRestoreInstanceState()`**.\r\n\r\n\r\n    public String enteredText=&quot;&quot;;\r\n    Button bts_scan, helpButton, nextPage;\r\n    EditText editText;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        bts_scan = findViewById(R.id.scanning);\r\n        helpButton = findViewById(R.id.helpButton);\r\n        nextPage = findViewById(R.id.button2);\r\n\r\n        if (savedInstanceState != null) {\r\n            enteredText = savedInstanceState.getString(&quot;EnteredText&quot;);\r\n        }\r\n\r\n        bts_scan.setOnClickListener(v-&gt;{\r\n            openPopupDialog();\r\n        });\r\n        helpButton.setOnClickListener(v -&gt; {\r\n            contactMail();\r\n        });\r\n        nextPage.setOnClickListener(v -&gt; {\r\n            next();\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onSaveInstanceState(Bundle savedInstanceState) {\r\n        super.onSaveInstanceState(savedInstanceState);\r\n        savedInstanceState.putString(&quot;EnteredText&quot;, enteredText);\r\n    }\r\n\r\n    private void openPopupDialog() {\r\n        Dialog popupDialog = new Dialog(this);\r\n        popupDialog.setContentView(R.layout.popup);\r\n        Button popupButton = popupDialog.findViewById(R.id.popupButton);\r\n        editText = popupDialog.findViewById(R.id.edit_the_text_of_scan);\r\n\r\n        popupButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                enteredText = editText.getText().toString();\r\n                if (enteredText.isEmpty()) {\r\n                    Log.e(&quot;PopupDialog&quot;, &quot;Entered text is empty.&quot;);\r\n                } else {\r\n                    Log.d(&quot;PopupDialog&quot;, &quot;Entered text: &quot; + enteredText);\r\n                    scanCode();\r\n                }\r\n                popupDialog.dismiss();\r\n            }\r\n        });\r\n\r\n        popupDialog.show();\r\n    }\r\n\r\n    ActivityResultLauncher&lt;ScanOptions&gt; barLauncher=registerForActivityResult(new ScanContract(),result -&gt; {\r\n        if(result.getContents() !=null)\r\n        {\r\n\r\n            String scan_results = null;\r\n            try {\r\n                scan_results = scanResults(result.getContents(),enteredText);\r\n            } catch (IOException exception) {\r\n                throw new RuntimeException(exception);\r\n            }\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(page1ScanQRCode.this);\r\n            builder.setTitle(&quot;Results&quot;);\r\n            builder.setMessage(scan_results);\r\n            builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener()\r\n                    {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialogInterface, int i)\r\n                        {\r\n                            dialogInterface.dismiss();\r\n                        }\r\n                    }\r\n\r\n            ).show();\r\n        }\r\n        else{\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(page1ScanQRCode.this);\r\n            builder.setMessage(&quot;I can&#39;t read that output!!&quot;);\r\n            builder.show();\r\n        }\r\n    });\r\n    private void scanCode() {\r\n      ScanOptions options = new ScanOptions();\r\n      options.setPrompt(&quot;Volume up to flash on&quot;);\r\n      options.setBeepEnabled(true);\r\n      options.setOrientationLocked(true);\r\n      options.setCaptureActivity(CaptureAct.class);\r\n      barLauncher.launch(options);\r\n    }\r\n\r\n  \r\n","title":"Android using java, variable life cycle","body":"<p>The main reason behind this is the lifecycle of the <strong><code>Activity</code></strong> in <strong><code>Andorid</code></strong>.\nWhen the user interacts with your app, <strong><code>Android</code></strong> can recreate <strong><code>activities</code></strong> in response to various events. When an <strong><code>activity</code></strong> is recreated, its state may not be preserved and all member variables are reset to their default values unless you explicitly save and restore it.</p>\n<p>In your code, you have declared the <strong><code>enteredText</code></strong> variable as a <strong><code>class</code></strong> field, but you're not saving and restoring its state when the activity is recreated. When your <strong><code>Activity</code></strong> is recreated after you set the value of <strong><code>enteredText</code></strong>, but before you use it in <strong><code>scanResults()</code></strong>, then <strong><code>enteredText</code></strong> would be reset to its default value (null here).</p>\n<p>You should save your <strong><code>enteredText</code></strong> variable in the <strong><code>savedInstanceState</code></strong> Bundle in the <strong><code>onSaveInstanceState()</code></strong> method, and then restore it in either <strong><code>onCreate()</code></strong> or <strong><code>onRestoreInstanceState()</code></strong>.</p>\n<pre><code>public String enteredText=&quot;&quot;;\nButton bts_scan, helpButton, nextPage;\nEditText editText;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    bts_scan = findViewById(R.id.scanning);\n    helpButton = findViewById(R.id.helpButton);\n    nextPage = findViewById(R.id.button2);\n\n    if (savedInstanceState != null) {\n        enteredText = savedInstanceState.getString(&quot;EnteredText&quot;);\n    }\n\n    bts_scan.setOnClickListener(v-&gt;{\n        openPopupDialog();\n    });\n    helpButton.setOnClickListener(v -&gt; {\n        contactMail();\n    });\n    nextPage.setOnClickListener(v -&gt; {\n        next();\n    });\n}\n\n@Override\npublic void onSaveInstanceState(Bundle savedInstanceState) {\n    super.onSaveInstanceState(savedInstanceState);\n    savedInstanceState.putString(&quot;EnteredText&quot;, enteredText);\n}\n\nprivate void openPopupDialog() {\n    Dialog popupDialog = new Dialog(this);\n    popupDialog.setContentView(R.layout.popup);\n    Button popupButton = popupDialog.findViewById(R.id.popupButton);\n    editText = popupDialog.findViewById(R.id.edit_the_text_of_scan);\n\n    popupButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            enteredText = editText.getText().toString();\n            if (enteredText.isEmpty()) {\n                Log.e(&quot;PopupDialog&quot;, &quot;Entered text is empty.&quot;);\n            } else {\n                Log.d(&quot;PopupDialog&quot;, &quot;Entered text: &quot; + enteredText);\n                scanCode();\n            }\n            popupDialog.dismiss();\n        }\n    });\n\n    popupDialog.show();\n}\n\nActivityResultLauncher&lt;ScanOptions&gt; barLauncher=registerForActivityResult(new ScanContract(),result -&gt; {\n    if(result.getContents() !=null)\n    {\n\n        String scan_results = null;\n        try {\n            scan_results = scanResults(result.getContents(),enteredText);\n        } catch (IOException exception) {\n            throw new RuntimeException(exception);\n        }\n        AlertDialog.Builder builder = new AlertDialog.Builder(page1ScanQRCode.this);\n        builder.setTitle(&quot;Results&quot;);\n        builder.setMessage(scan_results);\n        builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener()\n                {\n                    @Override\n                    public void onClick(DialogInterface dialogInterface, int i)\n                    {\n                        dialogInterface.dismiss();\n                    }\n                }\n\n        ).show();\n    }\n    else{\n        AlertDialog.Builder builder = new AlertDialog.Builder(page1ScanQRCode.this);\n        builder.setMessage(&quot;I can't read that output!!&quot;);\n        builder.show();\n    }\n});\nprivate void scanCode() {\n  ScanOptions options = new ScanOptions();\n  options.setPrompt(&quot;Volume up to flash on&quot;);\n  options.setBeepEnabled(true);\n  options.setOrientationLocked(true);\n  options.setCaptureActivity(CaptureAct.class);\n  barLauncher.launch(options);\n}\n</code></pre>\n"}],"owner":{"account_id":29547097,"reputation":1,"user_id":22644590,"display_name":"Sebastian Ned"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695820716,"creation_date":1695816928,"question_id":77187418,"body_markdown":"I  am stuck at a bug,  I have this code:\r\n\r\n\r\n```\r\n  public String enteredText=&quot;&quot;;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        bts_scan = findViewById(R.id.scanning);\r\n        helpButton = findViewById(R.id.helpButton);\r\n        nextPage = findViewById(R.id.button2);\r\n\r\n        bts_scan.setOnClickListener(v-&gt;{\r\n            openPopupDialog();\r\n        });\r\n        helpButton.setOnClickListener(v -&gt; {\r\n            contactMail();\r\n\r\n        });\r\n        nextPage.setOnClickListener(v -&gt; {\r\n            next();\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void openPopupDialog() {\r\n        Dialog popupDialog = new Dialog(this);\r\n        popupDialog.setContentView(R.layout.popup);\r\n        Button popupButton = popupDialog.findViewById(R.id.popupButton);\r\n        editText = popupDialog.findViewById(R.id.edit_the_text_of_scan);\r\n\r\n        popupButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                enteredText = editText.getText().toString();\r\n                if (enteredText.isEmpty()) {\r\n                    Log.e(&quot;PopupDialog&quot;, &quot;Entered text is empty.&quot;);\r\n                } else {\r\n                    Log.d(&quot;PopupDialog&quot;, &quot;Entered text: &quot; + enteredText);\r\n                    scanCode();\r\n                }\r\n                popupDialog.dismiss();\r\n            }\r\n        });\r\n\r\n        popupDialog.show();\r\n    }\r\n\r\n    ActivityResultLauncher&lt;ScanOptions&gt; barLauncher=registerForActivityResult(new ScanContract(),result -&gt; {\r\n        if(result.getContents() !=null)\r\n        {\r\n\r\n            String scan_results = null;\r\n            try {\r\n                scan_results = scanResults(result.getContents(),enteredText);\r\n            } catch (IOException exception) {\r\n                throw new RuntimeException(exception);\r\n            }\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(page1ScanQRCode.this);\r\n            builder.setTitle(&quot;Results&quot;);\r\n            builder.setMessage(scan_results);\r\n            builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener()\r\n                    {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialogInterface, int i)\r\n                        {\r\n                            dialogInterface.dismiss();\r\n                        }\r\n                    }\r\n\r\n            ).show();\r\n        }\r\n        else{\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(page1ScanQRCode.this);\r\n            builder.setMessage(&quot;I can&#39;t read that output!!&quot;);\r\n            builder.show();\r\n        }\r\n    });\r\n\r\n  private void scanCode() {\r\n        ScanOptions options = new ScanOptions();\r\n        options.setPrompt(&quot;Volume up to flash on&quot;);\r\n        options.setBeepEnabled(true);\r\n        options.setOrientationLocked(true);\r\n        options.setCaptureActivity(CaptureAct.class);\r\n        barLauncher.launch(options);\r\n    }\r\n```\r\nThe life cycle of my enteredText variable does not last sometimes. Let&#39;s say I put as an input on my mobile app &quot;X32E2&quot;  sometimes after pressing the button to scan, my variable gets on null and not retrieving the X32E2 to my scanResults() method, Why? and how can I fix this.\r\n\r\n\r\nI expected my variable to keep the Value till the end. Sometimes it works, but other times the variable value is null","title":"Android using java, variable life cycle","body":"<p>I  am stuck at a bug,  I have this code:</p>\n<pre><code>  public String enteredText=&quot;&quot;;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        bts_scan = findViewById(R.id.scanning);\n        helpButton = findViewById(R.id.helpButton);\n        nextPage = findViewById(R.id.button2);\n\n        bts_scan.setOnClickListener(v-&gt;{\n            openPopupDialog();\n        });\n        helpButton.setOnClickListener(v -&gt; {\n            contactMail();\n\n        });\n        nextPage.setOnClickListener(v -&gt; {\n            next();\n        });\n\n\n    }\n\n    private void openPopupDialog() {\n        Dialog popupDialog = new Dialog(this);\n        popupDialog.setContentView(R.layout.popup);\n        Button popupButton = popupDialog.findViewById(R.id.popupButton);\n        editText = popupDialog.findViewById(R.id.edit_the_text_of_scan);\n\n        popupButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                enteredText = editText.getText().toString();\n                if (enteredText.isEmpty()) {\n                    Log.e(&quot;PopupDialog&quot;, &quot;Entered text is empty.&quot;);\n                } else {\n                    Log.d(&quot;PopupDialog&quot;, &quot;Entered text: &quot; + enteredText);\n                    scanCode();\n                }\n                popupDialog.dismiss();\n            }\n        });\n\n        popupDialog.show();\n    }\n\n    ActivityResultLauncher&lt;ScanOptions&gt; barLauncher=registerForActivityResult(new ScanContract(),result -&gt; {\n        if(result.getContents() !=null)\n        {\n\n            String scan_results = null;\n            try {\n                scan_results = scanResults(result.getContents(),enteredText);\n            } catch (IOException exception) {\n                throw new RuntimeException(exception);\n            }\n            AlertDialog.Builder builder = new AlertDialog.Builder(page1ScanQRCode.this);\n            builder.setTitle(&quot;Results&quot;);\n            builder.setMessage(scan_results);\n            builder.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener()\n                    {\n                        @Override\n                        public void onClick(DialogInterface dialogInterface, int i)\n                        {\n                            dialogInterface.dismiss();\n                        }\n                    }\n\n            ).show();\n        }\n        else{\n            AlertDialog.Builder builder = new AlertDialog.Builder(page1ScanQRCode.this);\n            builder.setMessage(&quot;I can't read that output!!&quot;);\n            builder.show();\n        }\n    });\n\n  private void scanCode() {\n        ScanOptions options = new ScanOptions();\n        options.setPrompt(&quot;Volume up to flash on&quot;);\n        options.setBeepEnabled(true);\n        options.setOrientationLocked(true);\n        options.setCaptureActivity(CaptureAct.class);\n        barLauncher.launch(options);\n    }\n</code></pre>\n<p>The life cycle of my enteredText variable does not last sometimes. Let's say I put as an input on my mobile app &quot;X32E2&quot;  sometimes after pressing the button to scan, my variable gets on null and not retrieving the X32E2 to my scanResults() method, Why? and how can I fix this.</p>\n<p>I expected my variable to keep the Value till the end. Sometimes it works, but other times the variable value is null</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695501027,"creation_date":1695494601,"answer_id":77164457,"question_id":77164211,"body_markdown":"You can utilize a _regular expression pattern_ to identify matching text.\r\n\r\nThe RFC for _URL_ defines a syntax in _[ABNF](https://en.wikipedia.org/wiki/Augmented_Backus%E2%80%93Naur_form)_ which can be translated to a _regex pattern_.\\\r\n_[RFC 1738 &amp;ndash; Uniform Resource Locators (URL) &amp;ndash; BNF for specific URL schemes](https://datatracker.ietf.org/doc/html/rfc1738#autoid-33)_\r\n\r\n```none\r\nhostname       = *[ domainlabel &quot;.&quot; ] toplabel\r\ndomainlabel    = alphadigit | alphadigit *[ alphadigit | &quot;-&quot; ] alphadigit\r\ntoplabel       = alpha | alpha *[ alphadigit | &quot;-&quot; ] alphadigit\r\n```\r\n\r\n```none\r\n(?:https?://)?(?i)(?:(?:[a-z\\d]+|[a-z\\d][a-z\\d-]*[a-z\\d])\\.)+(?:[a-z]+|[a-z][a-z\\d-]*[a-z\\d])\r\n```\r\n\r\nAnd, the _[Pattern](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html)_ and _[Matcher](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html)_ classes can be used to apply the _pattern_.\r\n\r\n```java\r\nStringBuilder s = new StringBuilder();\r\ns.append(&quot;Hi. This is Brent and this is my website: www.mywebsite.com.&quot;);\r\nPattern p = Pattern.compile(&quot;(?:https?://)?(?i)(?:(?:[a-z\\\\d]+|[a-z\\\\d][a-z\\\\d-]*[a-z\\\\d])\\\\.)+(?:[a-z]+|[a-z][a-z\\\\d-]*[a-z\\\\d])&quot;);\r\nMatcher m = p.matcher(s);\r\nwhile (m.find())\r\n    s.replace(m.start(), m.end(), &quot;&lt;a href=\\&quot;%s\\&quot;&gt;%1$s&lt;/a&gt;&quot;.formatted(m.group()));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nHi. This is Brent and this is my website: &lt;a href=&quot;www.mywebsite.com&quot;&gt;www.mywebsite.com&lt;/a&gt;.\r\n```","title":"How to parse web address into clickable link","body":"<p>You can utilize a <em>regular expression pattern</em> to identify matching text.</p>\n<p>The RFC for <em>URL</em> defines a syntax in <em><a href=\"https://en.wikipedia.org/wiki/Augmented_Backus%E2%80%93Naur_form\" rel=\"nofollow noreferrer\">ABNF</a></em> which can be translated to a <em>regex pattern</em>.<br />\n<em><a href=\"https://datatracker.ietf.org/doc/html/rfc1738#autoid-33\" rel=\"nofollow noreferrer\">RFC 1738 – Uniform Resource Locators (URL) – BNF for specific URL schemes</a></em></p>\n<pre class=\"lang-none prettyprint-override\"><code>hostname       = *[ domainlabel &quot;.&quot; ] toplabel\ndomainlabel    = alphadigit | alphadigit *[ alphadigit | &quot;-&quot; ] alphadigit\ntoplabel       = alpha | alpha *[ alphadigit | &quot;-&quot; ] alphadigit\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>(?:https?://)?(?i)(?:(?:[a-z\\d]+|[a-z\\d][a-z\\d-]*[a-z\\d])\\.)+(?:[a-z]+|[a-z][a-z\\d-]*[a-z\\d])\n</code></pre>\n<p>And, the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">Pattern</a></em> and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html\" rel=\"nofollow noreferrer\">Matcher</a></em> classes can be used to apply the <em>pattern</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder s = new StringBuilder();\ns.append(&quot;Hi. This is Brent and this is my website: www.mywebsite.com.&quot;);\nPattern p = Pattern.compile(&quot;(?:https?://)?(?i)(?:(?:[a-z\\\\d]+|[a-z\\\\d][a-z\\\\d-]*[a-z\\\\d])\\\\.)+(?:[a-z]+|[a-z][a-z\\\\d-]*[a-z\\\\d])&quot;);\nMatcher m = p.matcher(s);\nwhile (m.find())\n    s.replace(m.start(), m.end(), &quot;&lt;a href=\\&quot;%s\\&quot;&gt;%1$s&lt;/a&gt;&quot;.formatted(m.group()));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>Hi. This is Brent and this is my website: &lt;a href=&quot;www.mywebsite.com&quot;&gt;www.mywebsite.com&lt;/a&gt;.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22263905,"reputation":1,"user_id":16494977,"display_name":"Dmitry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695546592,"creation_date":1695546592,"answer_id":77166398,"question_id":77164211,"body_markdown":"if you want to highlight links\r\n\r\n    val WEB_LINK_REGEX_STRING = PatternsCompat.WEB_URL.toString()\r\n\r\n    fun TextView.highlightLinks() {\r\n        Linkify.addLinks(this, Pattern.compile(WEB_LINK_REGEX_STRING), null)\r\n    }\r\n\r\nand then\r\n\r\n    tv_bio.setText(text)\r\n    tv_bio.highlightLinks()","title":"How to parse web address into clickable link","body":"<p>if you want to highlight links</p>\n<pre><code>val WEB_LINK_REGEX_STRING = PatternsCompat.WEB_URL.toString()\n\nfun TextView.highlightLinks() {\n    Linkify.addLinks(this, Pattern.compile(WEB_LINK_REGEX_STRING), null)\n}\n</code></pre>\n<p>and then</p>\n<pre><code>tv_bio.setText(text)\ntv_bio.highlightLinks()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29517797,"reputation":1,"user_id":22621358,"display_name":"Brent Doucette"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695820704,"creation_date":1695820704,"answer_id":77187892,"question_id":77164211,"body_markdown":"I found that using autolink=&quot;web&quot; did the trick. \r\n\r\n            &lt;TextView\r\n            android:id=&quot;@+id/tv_public_profile_bio&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:minHeight=&quot;60dp&quot;\r\n            android:layout_marginTop=&quot;20dp&quot;\r\n            android:layout_marginBottom=&quot;20dp&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:autoLink=&quot;web&quot;\r\n            android:justificationMode=&quot;inter_word&quot;\r\n             /&gt;\r\n\r\nIt parses web links with: http://, https://, www, or no www.\r\n\r\nThanks","title":"How to parse web address into clickable link","body":"<p>I found that using autolink=&quot;web&quot; did the trick.</p>\n<pre><code>        &lt;TextView\n        android:id=&quot;@+id/tv_public_profile_bio&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:minHeight=&quot;60dp&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:layout_marginBottom=&quot;20dp&quot;\n        android:textAlignment=&quot;center&quot;\n        android:textSize=&quot;18sp&quot;\n        android:autoLink=&quot;web&quot;\n        android:justificationMode=&quot;inter_word&quot;\n         /&gt;\n</code></pre>\n<p>It parses web links with: http://, https://, www, or no www.</p>\n<p>Thanks</p>\n"}],"owner":{"account_id":29517797,"reputation":1,"user_id":22621358,"display_name":"Brent Doucette"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77187892,"answer_count":3,"score":0,"last_activity_date":1695820704,"creation_date":1695490251,"question_id":77164211,"body_markdown":"I&#39;m looking for a way to take the text from a TextInputEditText and if there are any links in it amongst the text, parse the links into clickable links?\r\n\r\nExample text: &quot;Hi. This is Brent and this is my website: www.mywebsite.com.&quot;\r\nI only want &quot;www.mywebsite.com&quot; a clickable link. Now, some users would put the http://\r\nin front too.  That should also be linked if present. \r\n\r\nI&#39;ve tried using:\r\n`tv_bio.setText(Html.fromHtml(Globals.PublicProfileUserData.getBio(),Html.FROM_HTML_MODE_LEGACY));`\r\n\r\nHowever, it only parses links if used within an HREF HTML tag. \r\nAny help would be appreciated. Thanks\r\n\r\n","title":"How to parse web address into clickable link","body":"<p>I'm looking for a way to take the text from a TextInputEditText and if there are any links in it amongst the text, parse the links into clickable links?</p>\n<p>Example text: &quot;Hi. This is Brent and this is my website: www.mywebsite.com.&quot;\nI only want &quot;www.mywebsite.com&quot; a clickable link. Now, some users would put the http://\nin front too.  That should also be linked if present.</p>\n<p>I've tried using:\n<code>tv_bio.setText(Html.fromHtml(Globals.PublicProfileUserData.getBio(),Html.FROM_HTML_MODE_LEGACY));</code></p>\n<p>However, it only parses links if used within an HREF HTML tag.\nAny help would be appreciated. Thanks</p>\n"},{"tags":["java","jlabel"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1695819562,"post_id":77187733,"comment_id":136074857,"body_markdown":"a JLabel isn&#39;t on the &quot;monitor&quot;, it&#39;s on a JFrame (or similar) which is on the monitor. You can position it in the center of that JFrame, but hat doesn&#39;t mean it&#39;s in the center of the monitor","body":"a JLabel isn&#39;t on the &quot;monitor&quot;, it&#39;s on a JFrame (or similar) which is on the monitor. You can position it in the center of that JFrame, but hat doesn&#39;t mean it&#39;s in the center of the monitor"},{"owner":{"account_id":29547367,"reputation":3,"user_id":22644803,"display_name":"Faizy"},"score":0,"creation_date":1695819828,"post_id":77187733,"comment_id":136074919,"body_markdown":"so are you saying that i have to put the jlabel on the jpanel then center it using .setLocationRelativeTo(null).","body":"so are you saying that i have to put the jlabel on the jpanel then center it using .setLocationRelativeTo(null)."},{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1695819890,"post_id":77187733,"comment_id":136074936,"body_markdown":"No, you use a layout manager.","body":"No, you use a layout manager."},{"owner":{"account_id":29547367,"reputation":3,"user_id":22644803,"display_name":"Faizy"},"score":0,"creation_date":1695820339,"post_id":77187733,"comment_id":136075045,"body_markdown":"thank you very much @Mr. Polywhirl.","body":"thank you very much @Mr. Polywhirl."}],"answers":[{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695820486,"creation_date":1695820486,"answer_id":77187868,"question_id":77187733,"body_markdown":"If you want to center the application window frame, use `setLocationRelativeTo`. If you want to center a label within a `JPanel`, you can use a layout manager for the panel and center the label using `horizontalAlignment`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport java.awt.*;\r\nimport javax.swing.*;\r\n\r\npublic class CenterLabelApp implements Runnable {\r\n    private JPanel mainPanel;\r\n\r\n    protected CenterLabelApp() {\r\n        this.mainPanel = new JPanel();\r\n\r\n        setup();\r\n    }\r\n\r\n    private void setup() {\r\n        // Panel\r\n        this.mainPanel.setLayout(new BorderLayout());\r\n        this.mainPanel.setPreferredSize(new Dimension(400, 300));\r\n\r\n        // Label\r\n        JLabel label = new JLabel(&quot;Hello, World!&quot;);\r\n        label.setHorizontalAlignment(SwingConstants.CENTER); // Center the label horizontally\r\n        this.mainPanel.add(label, BorderLayout.CENTER); // Center the label vertically\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        JFrame frame = new JFrame(&quot;Center Label App&quot;);\r\n        frame.setContentPane(this.mainPanel);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.pack();\r\n        frame.setLocationRelativeTo(null); // Center the window\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(new CenterLabelApp());\r\n    }\r\n}\r\n```\r\n\r\nYou could also use the second param of the `JLabel` constructor to set alignment:\r\n\r\n```java\r\n// Center the label horizontally\r\nJLabel label = new JLabel(&quot;Hello, World!&quot;, SwingConstants.CENTER);\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/ijf4o.png","title":"How to make JLabel in java display in the centre of the monitor","body":"<p>If you want to center the application window frame, use <code>setLocationRelativeTo</code>. If you want to center a label within a <code>JPanel</code>, you can use a layout manager for the panel and center the label using <code>horizontalAlignment</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/ijf4o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ijf4o.png\" alt=\"enter image description here\" /></a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport java.awt.*;\nimport javax.swing.*;\n\npublic class CenterLabelApp implements Runnable {\n    private JPanel mainPanel;\n\n    protected CenterLabelApp() {\n        this.mainPanel = new JPanel();\n\n        setup();\n    }\n\n    private void setup() {\n        // Panel\n        this.mainPanel.setLayout(new BorderLayout());\n        this.mainPanel.setPreferredSize(new Dimension(400, 300));\n\n        // Label\n        JLabel label = new JLabel(&quot;Hello, World!&quot;);\n        label.setHorizontalAlignment(SwingConstants.CENTER); // Center the label horizontally\n        this.mainPanel.add(label, BorderLayout.CENTER); // Center the label vertically\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Center Label App&quot;);\n        frame.setContentPane(this.mainPanel);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationRelativeTo(null); // Center the window\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new CenterLabelApp());\n    }\n}\n</code></pre>\n<p>You could also use the second param of the <code>JLabel</code> constructor to set alignment:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Center the label horizontally\nJLabel label = new JLabel(&quot;Hello, World!&quot;, SwingConstants.CENTER);\n</code></pre>\n"}],"owner":{"account_id":29547367,"reputation":3,"user_id":22644803,"display_name":"Faizy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77187868,"answer_count":1,"score":0,"last_activity_date":1695820486,"creation_date":1695819465,"question_id":77187733,"body_markdown":"\r\n\r\n\r\nI tired even the .setLocationRelativeTo(null) but i guess it only works with JFrame. i looked up everywhere but no information of google. I also tried scrolling through the methods but here are too many. Please help me. I also tried typing .set then scrolling to look at the methods.","title":"How to make JLabel in java display in the centre of the monitor","body":"<p>I tired even the .setLocationRelativeTo(null) but i guess it only works with JFrame. i looked up everywhere but no information of google. I also tried scrolling through the methods but here are too many. Please help me. I also tried typing .set then scrolling to look at the methods.</p>\n"},{"tags":["java","weblogic","aop","jndi","ejb-3.0"],"owner":{"account_id":930576,"reputation":1615,"user_id":960525,"accept_rate":78,"display_name":"Jalal Sordo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695820401,"creation_date":1695819590,"question_id":77187751,"body_markdown":"I&#39;m encountering an error when invoking a method on an EJB named &quot;IndexingFacade&quot; in a WebLogic 12c environment. During remote debugging, I can confirm that the correct EJB is being loaded. However, when attempting to invoke any methods on this EJB, I encounter the following error:\r\n\r\n    javax.ejb.EJBException: EJB Exception: : \r\n    com.bea.core.repackaged.springframework.aop.AopInvocationException: AOP configuration seems to \r\n    be invalid: tried calling method [public abstract void e.e.e.a.c.IndexingFacade_ksqrhc_Intf.reindexWithNumber(java.lang.String)] on target [e.e.e.a.c.IndexingFacade_ksqrhc_Impl@bb637bb]; nested exception is java.lang.IllegalArgumentException: object is not an instance of declaring class\r\n\r\nThe application is structured as an EAR file containing a WAR application and an EJB 3.0 module, all deployed in WebLogic 12c.\r\n\r\nThe EJB is looked up using the @EJB annotation with the beanName attribute set to &quot;IndexingFacade&quot;. Here&#39;s how it&#39;s defined:\r\n\r\n\r\n    @EJB(beanName = &quot;IndexingFacade&quot;)\r\n    private IndexingFacade facade;\r\n\r\n--------------\r\n\r\n    @Local\r\n    public interface IndexingFacade {\r\n        // Method signatures\r\n    }\r\n\r\n--------------\r\n    @Stateless(name=&quot;IndexingFacade&quot;, mappedName=&quot;ejb/IndexingFacade&quot;)\r\n    public class IndexingFacadeImpl implements IndexingFacade {\r\n        // Implementation\r\n    }\r\n\r\n\r\nEven though the EJB resides within the same application and is called from within the application, it throws the AOP error mentioned above.\r\n\r\nI have attempted to change the mappedName attribute, but it did not resolve the issue. Strangely, this setup works on another WebLogic instance, leading me to suspect a potential AOP configuration discrepancy specific to this WebLogic instance.\r\n\r\nCould this issue be related to WebLogic AOP configuration, and are there specific configurations that need to be adjusted to resolve this problem, considering it works on another WebLogic instance? Any insights or guidance would be highly appreciated.\r\n\r\n","title":"Error invoking methods on EJB in WebLogic 12c: AOP configuration issue","body":"<p>I'm encountering an error when invoking a method on an EJB named &quot;IndexingFacade&quot; in a WebLogic 12c environment. During remote debugging, I can confirm that the correct EJB is being loaded. However, when attempting to invoke any methods on this EJB, I encounter the following error:</p>\n<pre><code>javax.ejb.EJBException: EJB Exception: : \ncom.bea.core.repackaged.springframework.aop.AopInvocationException: AOP configuration seems to \nbe invalid: tried calling method [public abstract void e.e.e.a.c.IndexingFacade_ksqrhc_Intf.reindexWithNumber(java.lang.String)] on target [e.e.e.a.c.IndexingFacade_ksqrhc_Impl@bb637bb]; nested exception is java.lang.IllegalArgumentException: object is not an instance of declaring class\n</code></pre>\n<p>The application is structured as an EAR file containing a WAR application and an EJB 3.0 module, all deployed in WebLogic 12c.</p>\n<p>The EJB is looked up using the @EJB annotation with the beanName attribute set to &quot;IndexingFacade&quot;. Here's how it's defined:</p>\n<pre><code>@EJB(beanName = &quot;IndexingFacade&quot;)\nprivate IndexingFacade facade;\n</code></pre>\n<hr />\n<pre><code>@Local\npublic interface IndexingFacade {\n    // Method signatures\n}\n</code></pre>\n<hr />\n<pre><code>@Stateless(name=&quot;IndexingFacade&quot;, mappedName=&quot;ejb/IndexingFacade&quot;)\npublic class IndexingFacadeImpl implements IndexingFacade {\n    // Implementation\n}\n</code></pre>\n<p>Even though the EJB resides within the same application and is called from within the application, it throws the AOP error mentioned above.</p>\n<p>I have attempted to change the mappedName attribute, but it did not resolve the issue. Strangely, this setup works on another WebLogic instance, leading me to suspect a potential AOP configuration discrepancy specific to this WebLogic instance.</p>\n<p>Could this issue be related to WebLogic AOP configuration, and are there specific configurations that need to be adjusted to resolve this problem, considering it works on another WebLogic instance? Any insights or guidance would be highly appreciated.</p>\n"},{"tags":["sdk","java"],"comments":[{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1664589730,"post_id":10858193,"comment_id":130512733,"body_markdown":"Similar: [*Whether Java SE is the same as JDK?*](https://stackoverflow.com/q/73902305/642706)","body":"Similar: <a href=\"https://stackoverflow.com/q/73902305/642706\"><i>Whether Java SE is the same as JDK?</i></a>"}],"answers":[{"tags":[],"owner":{"account_id":1517434,"reputation":392,"user_id":1418103,"accept_rate":100,"display_name":"Andr&#233; Leria"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1338591699,"creation_date":1338590997,"answer_id":10858269,"question_id":10858193,"body_markdown":"Answer 1: SE stands for Standard Edition. It is mostly like for every JRE nowadays to be in Standard Edition, so you can take Java 7 and Java SE 7 as the same thing.\r\n\r\nAnswer 2: JDK stands for Java Development Toolkit. Java SE is the technology, and JDK is the set of tools for developing in that technology.\r\n\r\nAnswer 3: Technically yes. Actually, you&#39;re most likely to see &quot;JDK 1.6&quot; alongside &quot;Java 6&quot;, &quot;JDK 1.7&quot; alongside &quot;Java 7&quot; and so on.\r\n\r\nAnswer 4: Same as 3, I guess.\r\n\r\nAnswer 5: Java&#39;s Software Development Kit equals Java&#39;s Development Kit, so yes.\r\n\r\nThis diagram might help:\r\n\r\nhttp://www.oracle.com/technetwork/java/javase/tech/index.html","title":"Java JDK, SDK, SE?","body":"<p>Answer 1: SE stands for Standard Edition. It is mostly like for every JRE nowadays to be in Standard Edition, so you can take Java 7 and Java SE 7 as the same thing.</p>\n\n<p>Answer 2: JDK stands for Java Development Toolkit. Java SE is the technology, and JDK is the set of tools for developing in that technology.</p>\n\n<p>Answer 3: Technically yes. Actually, you're most likely to see \"JDK 1.6\" alongside \"Java 6\", \"JDK 1.7\" alongside \"Java 7\" and so on.</p>\n\n<p>Answer 4: Same as 3, I guess.</p>\n\n<p>Answer 5: Java's Software Development Kit equals Java's Development Kit, so yes.</p>\n\n<p>This diagram might help:</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/tech/index.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/tech/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":1249300,"reputation":5305,"user_id":1210060,"accept_rate":96,"display_name":"Mario Corchero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1338591756,"creation_date":1338591366,"answer_id":10858321,"question_id":10858193,"body_markdown":"SE = standard edition, standard version of java, often named just java X. The other version is EE, more oriented to components. \r\n\r\nJDK = java development kit, this is a subset of the sdk that is what you use to develop java app, is a framework.\r\n\r\nThe version number has  1.7 is named java 7. And you can get both SE version or SDK of this version.\r\n \r\nAnyway you can find the whole information at Wikipedia ","title":"Java JDK, SDK, SE?","body":"<p>SE = standard edition, standard version of java, often named just java X. The other version is EE, more oriented to components. </p>\n\n<p>JDK = java development kit, this is a subset of the sdk that is what you use to develop java app, is a framework.</p>\n\n<p>The version number has  1.7 is named java 7. And you can get both SE version or SDK of this version.</p>\n\n<p>Anyway you can find the whole information at Wikipedia </p>\n"},{"tags":[],"owner":{"account_id":466330,"reputation":13849,"user_id":871012,"accept_rate":74,"display_name":"quux00"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1392130880,"creation_date":1338591580,"answer_id":10858348,"question_id":10858193,"body_markdown":"&gt; Is Java 7 just Java SE 7? and Java 6 is Java SE 6?\r\n\r\nYes.\r\n\r\nThere are a couple of Java &quot;editions&quot;, namely Java SE, the &quot;Standard Edition&quot;, Java EE, the &quot;Enterprise Edition&quot; and Java ME, the &quot;micro edition&quot;.\r\n\r\n&quot;Java N&quot; where N is some number refers to the SE.  There are separate edition numbers for Java EE which is up to version 6 now.  Java ME has its own versions as well - it is currently at version 3.  Java ME is intended for mobile and small devices.  \r\n\r\nJava EE is a set of libraries and interfaces, such as EJB, JMS, JNDI, Servlets/JSPs that are built on top of the Java SE.\r\n\r\n&gt; Is Java SE 7 also Java JDK 7? and also what is the JDK?\r\n\r\nJDK = Java Development Kit.  When you download Java you can either get the JRE (Java Runtime Environment) which only lets you run already compiled Java applications or you can get the JDK which allows you to compile and run Java apps.  Java SE 7 refers to both the JDK and the JRE.\r\n\r\n&gt; Does this mean that the java JDK is the same as the java number (Java SE 7)?\r\n\r\nYes.\r\n\r\n&gt; what is java 1.5 and 1.6? and how does that correspond to the java number (Java SE...)?\r\n\r\nSun&#39;s numbering for Java changed midstream and is a bit confusing.  They went from 1.0 to 1.1 then 1.2.  Then they decided to call 1.2 &quot;Java 2&quot; and that label lasted until Java 1.4. Then Java 5 was called both 1.5 and 5.0 and that has continued - Java 7 is also Java 1.7, Java 6 is also Java 1.6, etc.\r\n\r\n&gt; Is Java&#39;s SDK the same as the JDK?\r\n\r\nYes.","title":"Java JDK, SDK, SE?","body":"<blockquote>\n  <p>Is Java 7 just Java SE 7? and Java 6 is Java SE 6?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>There are a couple of Java \"editions\", namely Java SE, the \"Standard Edition\", Java EE, the \"Enterprise Edition\" and Java ME, the \"micro edition\".</p>\n\n<p>\"Java N\" where N is some number refers to the SE.  There are separate edition numbers for Java EE which is up to version 6 now.  Java ME has its own versions as well - it is currently at version 3.  Java ME is intended for mobile and small devices.  </p>\n\n<p>Java EE is a set of libraries and interfaces, such as EJB, JMS, JNDI, Servlets/JSPs that are built on top of the Java SE.</p>\n\n<blockquote>\n  <p>Is Java SE 7 also Java JDK 7? and also what is the JDK?</p>\n</blockquote>\n\n<p>JDK = Java Development Kit.  When you download Java you can either get the JRE (Java Runtime Environment) which only lets you run already compiled Java applications or you can get the JDK which allows you to compile and run Java apps.  Java SE 7 refers to both the JDK and the JRE.</p>\n\n<blockquote>\n  <p>Does this mean that the java JDK is the same as the java number (Java SE 7)?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>what is java 1.5 and 1.6? and how does that correspond to the java number (Java SE...)?</p>\n</blockquote>\n\n<p>Sun's numbering for Java changed midstream and is a bit confusing.  They went from 1.0 to 1.1 then 1.2.  Then they decided to call 1.2 \"Java 2\" and that label lasted until Java 1.4. Then Java 5 was called both 1.5 and 5.0 and that has continued - Java 7 is also Java 1.7, Java 6 is also Java 1.6, etc.</p>\n\n<blockquote>\n  <p>Is Java's SDK the same as the JDK?</p>\n</blockquote>\n\n<p>Yes.</p>\n"},{"tags":[],"owner":{"account_id":234634,"reputation":11522,"user_id":500916,"accept_rate":57,"display_name":"Simone Gianni"},"down_vote_count":0,"up_vote_count":100,"is_accepted":true,"score":100,"last_activity_date":1609619677,"creation_date":1338591629,"answer_id":10858354,"question_id":10858193,"body_markdown":"Yes, it can be confusing.\r\n\r\nYou didn&#39;t ask for it, but I&#39;ll start from here. The JVM is the Java Virtual Machine. It is a program that can read compiled Java code (the .class files, and the .jar files that are simply .zip files containing a bunch of .class files packaged together) and execute it. There are many JVMs, for example you need a JVM for Windows, one for Linux, one for OSX etc. but there are also many alternative JVMs, JVMs for embedded device etc. (many will disagree and say that the JVM is only one, and it&#39;s a specification. However, commonly a sysadmin will say &quot;the JVM&quot; to indicate the actual binary running on the server).\r\n\r\nYou didn&#39;t ask for the following either. The JRE is the Java Runtime Environment. It includes everything needed to *run* a Java application, that is the JVM itself, the standard library and a bunch of other files. The standard library is itself very important, because it contains a lot of useful things you&#39;ll use when developing Java applications. It contains all the stuff in java.* packages and some private stuff in com.sun, com.oracle packages.\r\n\r\nDifferent versions of Java (1.0, 1.1, etc. all the way to 1.7, also known as Java 7) usually contain improvements to both the JVM and the standard library, so the two usually need to run together, and are packaged together in the JRE.\r\n\r\nIf you are running any Java program on your computer, you have a JRE installed.\r\n\r\nThe JDK is the Java Development Kit. It contains the JRE as well as a lot of other useful stuff for *developing* Java applications. That includes the compiler obviously (which is also contained in the JRE for some good reason, but you can ignore this fact now), the JAR utility to create .jar files, many tools for &quot;decompiling&quot; class files, inspect .jar files, repackage them, etc.  \r\n\r\nIt also usually contains documentation for the standard library and also all the sources of the standard library, because they are useful for developers to read and inspect. If you want to seriously develop Java applications, you need the JDK.\r\n\r\nWhen talking about JavaSE, JavaEE, JavaME etc. those are so called &quot;editions&quot;. Basically, since the Java ecosystem is huge, Sun decided to offer Java in different editions:\r\n\r\n- JavaSE: is the standard edition, it is usually a good fit for client side software, normal applications, etc.\r\n- JavaME: is the mobile edition, it is what small games on old phones was made with, but it&#39;s basically a &quot;smaller&quot; version of Java suitable for very low capacity processors.\r\n- JavaEE: is the &quot;enterprise edition&quot;. It is used to develop server side stuff, so it includes a lot of libraries used on server side.\r\n\r\nRegarding numbering, they messed it up quite a bit. Actually, after Java 1.4 they created the JCP, to involve the community in the development of Java itself, and starting from Java 1.5 it is officially named &quot;Java 5&quot;, despite most in the industry calling it 1.5. Also, Java 1.2 was Java 2, but everyone I know who was not [working in Sun at that time always called it 1.2](http://en.wikipedia.org/wiki/Java_version_history).","title":"Java JDK, SDK, SE?","body":"<p>Yes, it can be confusing.</p>\n<p>You didn't ask for it, but I'll start from here. The JVM is the Java Virtual Machine. It is a program that can read compiled Java code (the .class files, and the .jar files that are simply .zip files containing a bunch of .class files packaged together) and execute it. There are many JVMs, for example you need a JVM for Windows, one for Linux, one for OSX etc. but there are also many alternative JVMs, JVMs for embedded device etc. (many will disagree and say that the JVM is only one, and it's a specification. However, commonly a sysadmin will say &quot;the JVM&quot; to indicate the actual binary running on the server).</p>\n<p>You didn't ask for the following either. The JRE is the Java Runtime Environment. It includes everything needed to <em>run</em> a Java application, that is the JVM itself, the standard library and a bunch of other files. The standard library is itself very important, because it contains a lot of useful things you'll use when developing Java applications. It contains all the stuff in java.* packages and some private stuff in com.sun, com.oracle packages.</p>\n<p>Different versions of Java (1.0, 1.1, etc. all the way to 1.7, also known as Java 7) usually contain improvements to both the JVM and the standard library, so the two usually need to run together, and are packaged together in the JRE.</p>\n<p>If you are running any Java program on your computer, you have a JRE installed.</p>\n<p>The JDK is the Java Development Kit. It contains the JRE as well as a lot of other useful stuff for <em>developing</em> Java applications. That includes the compiler obviously (which is also contained in the JRE for some good reason, but you can ignore this fact now), the JAR utility to create .jar files, many tools for &quot;decompiling&quot; class files, inspect .jar files, repackage them, etc.</p>\n<p>It also usually contains documentation for the standard library and also all the sources of the standard library, because they are useful for developers to read and inspect. If you want to seriously develop Java applications, you need the JDK.</p>\n<p>When talking about JavaSE, JavaEE, JavaME etc. those are so called &quot;editions&quot;. Basically, since the Java ecosystem is huge, Sun decided to offer Java in different editions:</p>\n<ul>\n<li>JavaSE: is the standard edition, it is usually a good fit for client side software, normal applications, etc.</li>\n<li>JavaME: is the mobile edition, it is what small games on old phones was made with, but it's basically a &quot;smaller&quot; version of Java suitable for very low capacity processors.</li>\n<li>JavaEE: is the &quot;enterprise edition&quot;. It is used to develop server side stuff, so it includes a lot of libraries used on server side.</li>\n</ul>\n<p>Regarding numbering, they messed it up quite a bit. Actually, after Java 1.4 they created the JCP, to involve the community in the development of Java itself, and starting from Java 1.5 it is officially named &quot;Java 5&quot;, despite most in the industry calling it 1.5. Also, Java 1.2 was Java 2, but everyone I know who was not <a href=\"http://en.wikipedia.org/wiki/Java_version_history\" rel=\"noreferrer\">working in Sun at that time always called it 1.2</a>.</p>\n"},{"tags":[],"owner":{"account_id":23195966,"reputation":1,"user_id":17291602,"display_name":"ibrahim Bayburtlu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695820355,"creation_date":1695820355,"answer_id":77187853,"question_id":10858193,"body_markdown":"It stands for JDK (Java Development Kit). JDK is a software package that enables software development using the Java programming language and provides the tools needed to develop, compile and run Java applications.\r\n\r\nIt stands for JRE (Java Runtime Environment). JRE is a basic component that enables Java applications and applets to run smoothly on users&#39; computers.\r\n\r\nIt stands for JVM(Java Virtual Machine). JVM takes the source code of Java programs and converts that code into an executable form. Java source code is first compiled and code in an intermediate language called bytecode is produced. The JVM takes this bytecode, interprets it, and translates it into machine code understandable by the physical processor.\r\n\r\nThen, in summary, we can think of it as follows:\r\n\r\nJRE=JVM + Java Libraries\r\n\r\nJDK=JRE + Compiler + debugger","title":"Java JDK, SDK, SE?","body":"<p>It stands for JDK (Java Development Kit). JDK is a software package that enables software development using the Java programming language and provides the tools needed to develop, compile and run Java applications.</p>\n<p>It stands for JRE (Java Runtime Environment). JRE is a basic component that enables Java applications and applets to run smoothly on users' computers.</p>\n<p>It stands for JVM(Java Virtual Machine). JVM takes the source code of Java programs and converts that code into an executable form. Java source code is first compiled and code in an intermediate language called bytecode is produced. The JVM takes this bytecode, interprets it, and translates it into machine code understandable by the physical processor.</p>\n<p>Then, in summary, we can think of it as follows:</p>\n<p>JRE=JVM + Java Libraries</p>\n<p>JDK=JRE + Compiler + debugger</p>\n"}],"owner":{"account_id":1535383,"reputation":773,"user_id":1431585,"accept_rate":50,"display_name":"Jack Trowbridge"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46276,"favorite_count":0,"down_vote_count":1,"up_vote_count":69,"accepted_answer_id":10858354,"answer_count":5,"score":68,"last_activity_date":1695820355,"creation_date":1338590430,"question_id":10858193,"body_markdown":"If you could answer these questions or help me out a little with clarity, it will be greatly appreciated:\r\n\r\n\r\n----------\r\n\r\n - Is Java 7 just Java SE 7? and Java 6 is Java SE 6? \r\n - \r\nIs Java SE 7 also Java JDK 7? and also what is the JDK?\r\n - Does this mean that the Java JDK is the same as the java number (Java SE 7)?\r\n - what is java 1.5 and 1.6? and how does that correspond to the java number (Java SE...)?\r\n - Is Java&#39;s SDK the same as the JDK?\r\n","title":"Java JDK, SDK, SE?","body":"<p>If you could answer these questions or help me out a little with clarity, it will be greatly appreciated:</p>\n\n<hr>\n\n<ul>\n<li>Is Java 7 just Java SE 7? and Java 6 is Java SE 6? </li>\n<li>Is Java SE 7 also Java JDK 7? and also what is the JDK?</li>\n<li>Does this mean that the Java JDK is the same as the java number (Java SE 7)?</li>\n<li>what is java 1.5 and 1.6? and how does that correspond to the java number (Java SE...)?</li>\n<li>Is Java's SDK the same as the JDK?</li>\n</ul>\n"},{"tags":["java","error-handling","qr-code","reader"],"owner":{"account_id":26468897,"reputation":15,"user_id":20109764,"display_name":"takis Paras"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695819795,"creation_date":1695819795,"question_id":77187777,"body_markdown":"I have the following code:\r\n\r\nReceiveQRFragment.java:\r\n\r\n    package de.androidcrypto.nfchcendefemulator;\r\n    \r\n    import static android.content.Context.VIBRATOR_SERVICE;\r\n    import android.Manifest;\r\n    import android.content.pm.PackageManager;\r\n    import android.os.Bundle;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.Button;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.core.app.ActivityCompat;\r\n    import androidx.core.content.ContextCompat;\r\n    import androidx.fragment.app.Fragment;\r\n    import com.google.zxing.*;\r\n    import com.journeyapps.barcodescanner.CaptureManager;\r\n    import com.journeyapps.barcodescanner.DecoratedBarcodeView;\r\n    import com.google.zxing.BinaryBitmap;\r\n    import com.google.zxing.MultiFormatReader;\r\n    import com.google.zxing.Result;\r\n    import com.google.zxing.client.android.Intents;\r\n    import com.google.zxing.common.HybridBinarizer;\r\n    import com.google.zxing.qrcode.QRCodeReader;\r\n    \r\n    public class ReceiveQRFragment extends Fragment {\r\n    \r\n        private static final int CAMERA_PERMISSION_REQUEST_CODE = 100;\r\n        private CaptureManager captureManager;\r\n        private TextView scanResultTextView;\r\n    \r\n        @Nullable\r\n        @Override\r\n        public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n            View rootView = inflater.inflate(R.layout.fragment_receive_qr, container, false);\r\n            // Initialize UI elements and event handlers here if needed.\r\n            scanResultTextView = rootView.findViewById(R.id.scanResultTextView);\r\n            return rootView;\r\n        }\r\n    \r\n        @Override\r\n        public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n            super.onViewCreated(view, savedInstanceState);\r\n    \r\n            // Check for camera permission and request it if necessary.\r\n            if (ContextCompat.checkSelfPermission(requireContext(), Manifest.permission.CAMERA)\r\n                    != PackageManager.PERMISSION_GRANTED) {\r\n                // Permission is not granted, request it.\r\n                ActivityCompat.requestPermissions(requireActivity(), new String[]{Manifest.permission.CAMERA},\r\n                        CAMERA_PERMISSION_REQUEST_CODE);\r\n            }\r\n    \r\n            // Initialize the CaptureManager\r\n            captureManager = new CaptureManager(getActivity(), (DecoratedBarcodeView) view.findViewById(R.id.zxing_barcode_scanner));\r\n            captureManager.initializeFromIntent(getActivity().getIntent(), savedInstanceState);\r\n            captureManager.decode();\r\n            \r\n        }\r\n    \r\n        @Override\r\n        public void onResume() {\r\n            super.onResume();\r\n            captureManager.onResume();\r\n        }\r\n    \r\n        @Override\r\n        public void onPause() {\r\n            super.onPause();\r\n            captureManager.onPause();\r\n        }\r\n    \r\n        @Override\r\n        public void onDestroy() {\r\n            super.onDestroy();\r\n            captureManager.onDestroy();\r\n        }\r\n    \r\n        @Override\r\n        public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n            if (requestCode == CAMERA_PERMISSION_REQUEST_CODE) {\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    // Camera permission granted, start QR code scanner.\r\n                    captureManager.onResume();\r\n                } else {\r\n                    // Camera permission denied, show a message.\r\n                    Toast.makeText(requireContext(), &quot;Camera permission is required to scan QR codes.&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        }\r\n    \r\n        // Add this method to handle the QR code scan result\r\n        private void handleQRCodeScanResult(String result) {\r\n            if (result != null) {\r\n                // QR code scanned successfully, display the result.\r\n                displaySuccessMessage(result);\r\n            } else {\r\n                // QR code not found or other scanning error.\r\n                Toast.makeText(requireContext(), &quot;QR code not found.&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    \r\n        // Add this method to display a success message\r\n        private void displaySuccessMessage(String message) {\r\n            scanResultTextView.setText(message);\r\n            scanResultTextView.setVisibility(View.VISIBLE);\r\n        }\r\n    }\r\n\r\nand the following fragment:\r\n\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;!-- DecoratedBarcodeView for displaying the camera preview and scanning QR codes --&gt;\r\n        &lt;com.journeyapps.barcodescanner.DecoratedBarcodeView\r\n            android:id=&quot;@+id/zxing_barcode_scanner&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot; /&gt;\r\n    \r\n        &lt;!-- Button to trigger the QR code scanning --&gt;\r\n        &lt;Button\r\n            android:id=&quot;@+id/btnScanQR&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_centerInParent=&quot;true&quot;\r\n            android:text=&quot;Scan QR Code&quot; /&gt;\r\n    \r\n        &lt;!-- TextView to display the success message --&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/scanResultTextView&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_below=&quot;@id/btnScanQR&quot;\r\n            android:visibility=&quot;gone&quot; \r\n            android:text=&quot;Scan completed successfully&quot;\r\n            android:textColor=&quot;#00FF00&quot; \r\n            android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\nthat when I open my app, it shows to allow the camera and when I do it, it opens the camera to scan a QR code. However when I try to scan a QR code and find one , my phone makes a beeping sound and the whole app is closing. Any idea why is this happening?\r\n\r\n","title":"Error scanning QR and get Info from It using Java","body":"<p>I have the following code:</p>\n<p>ReceiveQRFragment.java:</p>\n<pre><code>package de.androidcrypto.nfchcendefemulator;\n\nimport static android.content.Context.VIBRATOR_SERVICE;\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport android.widget.Toast;\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\nimport androidx.fragment.app.Fragment;\nimport com.google.zxing.*;\nimport com.journeyapps.barcodescanner.CaptureManager;\nimport com.journeyapps.barcodescanner.DecoratedBarcodeView;\nimport com.google.zxing.BinaryBitmap;\nimport com.google.zxing.MultiFormatReader;\nimport com.google.zxing.Result;\nimport com.google.zxing.client.android.Intents;\nimport com.google.zxing.common.HybridBinarizer;\nimport com.google.zxing.qrcode.QRCodeReader;\n\npublic class ReceiveQRFragment extends Fragment {\n\n    private static final int CAMERA_PERMISSION_REQUEST_CODE = 100;\n    private CaptureManager captureManager;\n    private TextView scanResultTextView;\n\n    @Nullable\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        View rootView = inflater.inflate(R.layout.fragment_receive_qr, container, false);\n        // Initialize UI elements and event handlers here if needed.\n        scanResultTextView = rootView.findViewById(R.id.scanResultTextView);\n        return rootView;\n    }\n\n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        // Check for camera permission and request it if necessary.\n        if (ContextCompat.checkSelfPermission(requireContext(), Manifest.permission.CAMERA)\n                != PackageManager.PERMISSION_GRANTED) {\n            // Permission is not granted, request it.\n            ActivityCompat.requestPermissions(requireActivity(), new String[]{Manifest.permission.CAMERA},\n                    CAMERA_PERMISSION_REQUEST_CODE);\n        }\n\n        // Initialize the CaptureManager\n        captureManager = new CaptureManager(getActivity(), (DecoratedBarcodeView) view.findViewById(R.id.zxing_barcode_scanner));\n        captureManager.initializeFromIntent(getActivity().getIntent(), savedInstanceState);\n        captureManager.decode();\n        \n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n        captureManager.onResume();\n    }\n\n    @Override\n    public void onPause() {\n        super.onPause();\n        captureManager.onPause();\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        captureManager.onDestroy();\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        if (requestCode == CAMERA_PERMISSION_REQUEST_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                // Camera permission granted, start QR code scanner.\n                captureManager.onResume();\n            } else {\n                // Camera permission denied, show a message.\n                Toast.makeText(requireContext(), &quot;Camera permission is required to scan QR codes.&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    }\n\n    // Add this method to handle the QR code scan result\n    private void handleQRCodeScanResult(String result) {\n        if (result != null) {\n            // QR code scanned successfully, display the result.\n            displaySuccessMessage(result);\n        } else {\n            // QR code not found or other scanning error.\n            Toast.makeText(requireContext(), &quot;QR code not found.&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    // Add this method to display a success message\n    private void displaySuccessMessage(String message) {\n        scanResultTextView.setText(message);\n        scanResultTextView.setVisibility(View.VISIBLE);\n    }\n}\n</code></pre>\n<p>and the following fragment:</p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;!-- DecoratedBarcodeView for displaying the camera preview and scanning QR codes --&gt;\n    &lt;com.journeyapps.barcodescanner.DecoratedBarcodeView\n        android:id=&quot;@+id/zxing_barcode_scanner&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot; /&gt;\n\n    &lt;!-- Button to trigger the QR code scanning --&gt;\n    &lt;Button\n        android:id=&quot;@+id/btnScanQR&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_centerInParent=&quot;true&quot;\n        android:text=&quot;Scan QR Code&quot; /&gt;\n\n    &lt;!-- TextView to display the success message --&gt;\n    &lt;TextView\n        android:id=&quot;@+id/scanResultTextView&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_below=&quot;@id/btnScanQR&quot;\n        android:visibility=&quot;gone&quot; \n        android:text=&quot;Scan completed successfully&quot;\n        android:textColor=&quot;#00FF00&quot; \n        android:textStyle=&quot;bold&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>that when I open my app, it shows to allow the camera and when I do it, it opens the camera to scan a QR code. However when I try to scan a QR code and find one , my phone makes a beeping sound and the whole app is closing. Any idea why is this happening?</p>\n"},{"tags":["java","spring","spring-boot","google-maps","geolocation"],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695816705,"creation_date":1695816705,"answer_id":77187388,"question_id":77186694,"body_markdown":"For a real application in production, you should solve the problem with the API key. But if you are just testing and playing around, there are some free services where you don&#39;t need an API key. Try for example [Free Geocoding API][1]. \r\n\r\nYou can use the following example code as a starting point:\r\n\r\n    import java.io.IOException;\r\n    import java.net.URI;\r\n    import java.net.http.HttpClient;\r\n    import java.net.http.HttpRequest;\r\n    import java.net.http.HttpResponse;\r\n    import java.net.http.HttpResponse.BodyHandlers;\r\n    import java.time.Duration;\r\n    \r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    \r\n    public class Example {\r\n    \r\n        private static final String GEOCODING_RESOURCE = &quot;https://geocode.maps.co/reverse&quot;;\r\n    \r\n        public static void main(String[] args) throws IOException, InterruptedException {\r\n    \r\n            ObjectMapper mapper = new ObjectMapper();\r\n    \r\n            String response = reverseGeocode(&quot;40.7558017&quot;, &quot;-73.9787414&quot;);\r\n            JsonNode responseJsonNode = mapper.readTree(response);\r\n    \r\n            JsonNode address = responseJsonNode.get(&quot;address&quot;);\r\n            String city = address.get(&quot;city&quot;).asText();\r\n            String country = address.get(&quot;country&quot;).asText();\r\n            System.out.println(&quot;Reverse geocoding returned: &quot; + city + &quot;, &quot; + country);\r\n        }\r\n    \r\n        public static String reverseGeocode(String lat, String lon) throws IOException, InterruptedException {\r\n    \r\n            HttpClient httpClient = HttpClient.newHttpClient();\r\n            String requestUri = GEOCODING_RESOURCE + &quot;?lat=&quot; + lat + &quot;&amp;lon=&quot; + lon;\r\n            HttpRequest geocodingRequest = HttpRequest.newBuilder()\r\n                                                      .GET()\r\n                                                      .uri(URI.create(requestUri))\r\n                                                      .timeout(Duration.ofMillis(2000)).build();\r\n    \r\n            HttpResponse geocodingResponse = httpClient.send(geocodingRequest, BodyHandlers.ofString());\r\n    \r\n            return geocodingResponse.body().toString();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://geocode.maps.co/","title":"Is exist simply way to get city and country name from coordinates(Latitude, Longitude)? Is it possible to do it without Google Maps API?","body":"<p>For a real application in production, you should solve the problem with the API key. But if you are just testing and playing around, there are some free services where you don't need an API key. Try for example <a href=\"https://geocode.maps.co/\" rel=\"nofollow noreferrer\">Free Geocoding API</a>.</p>\n<p>You can use the following example code as a starting point:</p>\n<pre><code>import java.io.IOException;\nimport java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\nimport java.net.http.HttpResponse.BodyHandlers;\nimport java.time.Duration;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class Example {\n\n    private static final String GEOCODING_RESOURCE = &quot;https://geocode.maps.co/reverse&quot;;\n\n    public static void main(String[] args) throws IOException, InterruptedException {\n\n        ObjectMapper mapper = new ObjectMapper();\n\n        String response = reverseGeocode(&quot;40.7558017&quot;, &quot;-73.9787414&quot;);\n        JsonNode responseJsonNode = mapper.readTree(response);\n\n        JsonNode address = responseJsonNode.get(&quot;address&quot;);\n        String city = address.get(&quot;city&quot;).asText();\n        String country = address.get(&quot;country&quot;).asText();\n        System.out.println(&quot;Reverse geocoding returned: &quot; + city + &quot;, &quot; + country);\n    }\n\n    public static String reverseGeocode(String lat, String lon) throws IOException, InterruptedException {\n\n        HttpClient httpClient = HttpClient.newHttpClient();\n        String requestUri = GEOCODING_RESOURCE + &quot;?lat=&quot; + lat + &quot;&amp;lon=&quot; + lon;\n        HttpRequest geocodingRequest = HttpRequest.newBuilder()\n                                                  .GET()\n                                                  .uri(URI.create(requestUri))\n                                                  .timeout(Duration.ofMillis(2000)).build();\n\n        HttpResponse geocodingResponse = httpClient.send(geocodingRequest, BodyHandlers.ofString());\n\n        return geocodingResponse.body().toString();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29546291,"reputation":1,"user_id":22643938,"display_name":"Yuliia Liapkalo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77187388,"answer_count":1,"score":-1,"last_activity_date":1695819673,"creation_date":1695810986,"question_id":77186694,"body_markdown":"I write spring boot telegram bot. Now i have longitude and latitude of user, and want to get city and county name by its. \r\n\r\nTrying get it by Google Maps API, and from examples from here, but I also haven&#39;t clientId and my key is not valid for some reason.","title":"Is exist simply way to get city and country name from coordinates(Latitude, Longitude)? Is it possible to do it without Google Maps API?","body":"<p>I write spring boot telegram bot. Now i have longitude and latitude of user, and want to get city and county name by its.</p>\n<p>Trying get it by Google Maps API, and from examples from here, but I also haven't clientId and my key is not valid for some reason.</p>\n"},{"tags":["java","eclipse","deadlock","reentrantreadwritelock"],"comments":[{"owner":{"account_id":2498626,"reputation":2734,"user_id":2174382,"display_name":"guleryuz"},"score":0,"creation_date":1454762070,"post_id":35240480,"comment_id":58196009,"body_markdown":"firstly, release pause in eclipse, then with jvisualvm attach to process and generate a thread dump. in thread dump you can see locks and analyze lock owners (I think)","body":"firstly, release pause in eclipse, then with jvisualvm attach to process and generate a thread dump. in thread dump you can see locks and analyze lock owners (I think)"},{"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"score":0,"creation_date":1454767048,"post_id":35240480,"comment_id":58197553,"body_markdown":"I&#39;ve already tried jstack to make me a threaddump. But I can only find threads waiting for the lock but none holding it.","body":"I&#39;ve already tried jstack to make me a threaddump. But I can only find threads waiting for the lock but none holding it."}],"answers":[{"tags":[],"owner":{"account_id":8397613,"reputation":36,"user_id":18175140,"display_name":"Taylor Smock"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695819662,"creation_date":1695819662,"answer_id":77187765,"question_id":35240480,"body_markdown":"The problem here is that we need to get the application to hit a &quot;normal&quot; breakpoint.\r\n\r\nThere are a few different ways to do this. In all cases, the new breakpoint should pause the entire program (IntelliJ can do this, and I would assume Eclipse can as well).\r\n\r\n* `Object#wait` (method entry breakpoint on `public final native void wait (long timeout)`)\r\n* `Unsafe#;park` (method entry breakpoint on `public native void park(boolean isAbsolute, long time)`)\r\n* If you have a thread that is constantly performing work (e.g. getting remote data), add a breakpoint in that code\r\n\r\nOnce that has occurred, you can (in IntelliJ IDEA, and presumably Eclipse) switch threads to the threads of interest and debug from there.\r\n\r\nIn IntelliJ IDEA, I was able to do the following:\r\n```java\r\nfinal Thread ownerThread = ((ReentrantReadWriteLock.WriteLock) lock.writeLock()).sync.getExclusiveOwnerThread();\r\n```","title":"Debugging ReentrantReadWriteLock Deadlock in Eclipse","body":"<p>The problem here is that we need to get the application to hit a &quot;normal&quot; breakpoint.</p>\n<p>There are a few different ways to do this. In all cases, the new breakpoint should pause the entire program (IntelliJ can do this, and I would assume Eclipse can as well).</p>\n<ul>\n<li><code>Object#wait</code> (method entry breakpoint on <code>public final native void wait (long timeout)</code>)</li>\n<li><code>Unsafe#;park</code> (method entry breakpoint on <code>public native void park(boolean isAbsolute, long time)</code>)</li>\n<li>If you have a thread that is constantly performing work (e.g. getting remote data), add a breakpoint in that code</li>\n</ul>\n<p>Once that has occurred, you can (in IntelliJ IDEA, and presumably Eclipse) switch threads to the threads of interest and debug from there.</p>\n<p>In IntelliJ IDEA, I was able to do the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Thread ownerThread = ((ReentrantReadWriteLock.WriteLock) lock.writeLock()).sync.getExclusiveOwnerThread();\n</code></pre>\n"}],"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695819662,"creation_date":1454758173,"question_id":35240480,"body_markdown":"I&#39;ve got an Application which occasionally deadlocks (say once a month).\r\n\r\nRight now I managed for the first time to reproduce this condition while running in eclipse debugger.\r\n\r\nIt seems as if all threads are waiting for the WriteLock to get released.\r\n\r\nWhat I need is a way to find out which one (of the 200) Threads is holding the lock.\r\n\r\nBut pausing the threads in eclipse and inspecting has yielded no results because eclipse tells me it can&#39;t access the variables I want to view because the thread was manually suspended.\r\n\r\nI don&#39;t want to restart the application because I don&#39;t know if I can manage to get into this deadlock a second time.\r\n\r\nSo what to do to find the lock holder?\r\n\r\nEDIT: I&#39;ve already tried jstack to make me a thread dump. But I can only find threads waiting for the lock but none holding it.","title":"Debugging ReentrantReadWriteLock Deadlock in Eclipse","body":"<p>I've got an Application which occasionally deadlocks (say once a month).</p>\n\n<p>Right now I managed for the first time to reproduce this condition while running in eclipse debugger.</p>\n\n<p>It seems as if all threads are waiting for the WriteLock to get released.</p>\n\n<p>What I need is a way to find out which one (of the 200) Threads is holding the lock.</p>\n\n<p>But pausing the threads in eclipse and inspecting has yielded no results because eclipse tells me it can't access the variables I want to view because the thread was manually suspended.</p>\n\n<p>I don't want to restart the application because I don't know if I can manage to get into this deadlock a second time.</p>\n\n<p>So what to do to find the lock holder?</p>\n\n<p>EDIT: I've already tried jstack to make me a thread dump. But I can only find threads waiting for the lock but none holding it.</p>\n"},{"tags":["java","dns","quarkus","inetaddress"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1695658151,"post_id":77174102,"comment_id":136050829,"body_markdown":"What is meant by &#39;My java app is running native&#39;?","body":"What is meant by &#39;My java app is running native&#39;?"}],"answers":[{"tags":[],"owner":{"account_id":3580881,"reputation":5050,"user_id":2989136,"accept_rate":79,"display_name":"Herr Derb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695819110,"creation_date":1695819110,"answer_id":77187695,"question_id":77174102,"body_markdown":"After wasting some time I discovered that quarkus has disabled name resolving by default due to security reasons.\r\nSetting `quarkus.naming.enable-jndi=true` resolves the problem and the lookup works as expected using `InetAddress`.\r\n\r\nSee -&gt; Disabling JNDI by default https://groups.google.com/g/quarkus-dev/c/bp1wVF1yLXE","title":"DNS lookup of external address in Quarkus application returns loopback address","body":"<p>After wasting some time I discovered that quarkus has disabled name resolving by default due to security reasons.\nSetting <code>quarkus.naming.enable-jndi=true</code> resolves the problem and the lookup works as expected using <code>InetAddress</code>.</p>\n<p>See -&gt; Disabling JNDI by default <a href=\"https://groups.google.com/g/quarkus-dev/c/bp1wVF1yLXE\" rel=\"nofollow noreferrer\">https://groups.google.com/g/quarkus-dev/c/bp1wVF1yLXE</a></p>\n"}],"owner":{"account_id":3580881,"reputation":5050,"user_id":2989136,"accept_rate":79,"display_name":"Herr Derb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77187695,"answer_count":1,"score":0,"last_activity_date":1695819110,"creation_date":1695656947,"question_id":77174102,"body_markdown":"I want to loopup the ip addresses of a headless kubernetes service to access each pod.\r\nWhen testing it on the very pod with `getent hosts my-headless-service` it returns the 2 expected ips.\r\nWhen I call `InetAddress.getAllByName(&quot;my-headless-service&quot;)` in my Quarkus application that runs on the same pod, I get the loopback address`[localhost/127.0.0.1]`\r\n\r\nAre there any pit falls which I am not aware of when resolving a host name with Java?\r\n\r\n","title":"DNS lookup of external address in Quarkus application returns loopback address","body":"<p>I want to loopup the ip addresses of a headless kubernetes service to access each pod.\nWhen testing it on the very pod with <code>getent hosts my-headless-service</code> it returns the 2 expected ips.\nWhen I call <code>InetAddress.getAllByName(&quot;my-headless-service&quot;)</code> in my Quarkus application that runs on the same pod, I get the loopback address<code>[localhost/127.0.0.1]</code></p>\n<p>Are there any pit falls which I am not aware of when resolving a host name with Java?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":4,"creation_date":1695605734,"post_id":77169492,"comment_id":136042268,"body_markdown":"What is the value of `(int)Math.pow(2,31)`? Find out the answer, and you will see why your code is not correct.","body":"What is the value of <code>(int)Math.pow(2,31)</code>? Find out the answer, and you will see why your code is not correct."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1695612391,"post_id":77169492,"comment_id":136042824,"body_markdown":"You could just read the input as a string and attempt `Integer.parseInt(input);` and if it doesn&#39;t explode, print `int`. Same for `Long`, `Short` and `Byte`. Also, what about `Double` and `Float` which are capable of accurately holding integer values up to a certain size (you can do your own research - see [IEEE 754](https://en.wikipedia.org/wiki/IEEE_754).","body":"You could just read the input as a string and attempt <code>Integer.parseInt(input);</code> and if it doesn&#39;t explode, print <code>int</code>. Same for <code>Long</code>, <code>Short</code> and <code>Byte</code>. Also, what about <code>Double</code> and <code>Float</code> which are capable of accurately holding integer values up to a certain size (you can do your own research - see <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754</a>."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695606857,"creation_date":1695606857,"answer_id":77169545,"question_id":77169492,"body_markdown":"You have multiple problems here.\r\n\r\n1. If you read a `long`, how can your &#39;it does not fit in anything&#39; _ever_ trigger? The input is `213333333333333333333333333333333333`, you read it as a long, which instantly fails and throws an exception. Fixing this isn&#39;t easy - basically requires a total rewrite. You can&#39;t _have_ your input as a number (as there&#39;s nothing larger than a long). It must be a string, and thus, to check if &#39;it fits&#39;, you can&#39;t do `&gt;=-128`, you have to try to parse whatever string you have _into_ a byte and see if it works.\r\n\r\n2. `Math.pow` is for `double` (i.e., inaccurate) math and doesn&#39;t do the job correctly. If you want &#39;the smallest int&#39;, that&#39;d be `Integer.MIN_VALUE`, and `Integer.MAX_VALUE`, not `Math.pow(2,31)`, which isn&#39;t actually what you want. Because complicated - doubles are inaccurate is the oversimplified reason, and `Math.pow` does double math.\r\n\r\nMostly point 2 is irrelevant, because point 1 says this entire approach cannot possibly work in the first place.\r\n\r\nThis question is somewhat more difficult than a first glance might indicate. Hint: You want `.next()` (not `.nextLong()`), and you want to know how to catch exceptions, and you want to _try_ to parse that string using e.g. `Byte.parseByte`, `Long.parseLong`, and so on. If it works, print that data type. If it fails (an exception occurs, which you&#39;d have to catch), don&#39;t print it. It&#39;ll look nothing like what you wrote so far. Not your fault - this approach is fine until you get to the icky problem that you&#39;re supposed to be capable of reading numbers that are so large they don&#39;t even fit in a long.\r\n","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<p>You have multiple problems here.</p>\n<ol>\n<li><p>If you read a <code>long</code>, how can your 'it does not fit in anything' <em>ever</em> trigger? The input is <code>213333333333333333333333333333333333</code>, you read it as a long, which instantly fails and throws an exception. Fixing this isn't easy - basically requires a total rewrite. You can't <em>have</em> your input as a number (as there's nothing larger than a long). It must be a string, and thus, to check if 'it fits', you can't do <code>&gt;=-128</code>, you have to try to parse whatever string you have <em>into</em> a byte and see if it works.</p>\n</li>\n<li><p><code>Math.pow</code> is for <code>double</code> (i.e., inaccurate) math and doesn't do the job correctly. If you want 'the smallest int', that'd be <code>Integer.MIN_VALUE</code>, and <code>Integer.MAX_VALUE</code>, not <code>Math.pow(2,31)</code>, which isn't actually what you want. Because complicated - doubles are inaccurate is the oversimplified reason, and <code>Math.pow</code> does double math.</p>\n</li>\n</ol>\n<p>Mostly point 2 is irrelevant, because point 1 says this entire approach cannot possibly work in the first place.</p>\n<p>This question is somewhat more difficult than a first glance might indicate. Hint: You want <code>.next()</code> (not <code>.nextLong()</code>), and you want to know how to catch exceptions, and you want to <em>try</em> to parse that string using e.g. <code>Byte.parseByte</code>, <code>Long.parseLong</code>, and so on. If it works, print that data type. If it fails (an exception occurs, which you'd have to catch), don't print it. It'll look nothing like what you wrote so far. Not your fault - this approach is fine until you get to the icky problem that you're supposed to be capable of reading numbers that are so large they don't even fit in a long.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1695762520,"creation_date":1695608340,"answer_id":77169608,"question_id":77169492,"body_markdown":"Use the _[BigInteger](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigInteger.html)_ class to evaluate the numbers.\r\n\r\nAdditionally, utilize a _static data-structure_ to provide range values for each _primitive data-type_.\r\n\r\n```java\r\nimport static java.lang.String.valueOf;\r\n\r\nimport java.math.BigInteger;\r\nimport java.util.ArrayList;\r\nimport java.util.LinkedHashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class Util {\r\n    static List&lt;Class&lt;?&gt;&gt; fit(BigInteger i) {\r\n        List&lt;Class&lt;?&gt;&gt; l = new ArrayList&lt;&gt;();\r\n        for (Map.Entry&lt;Class&lt;?&gt;, Range&gt; e : Range.map.entrySet())\r\n            if (e.getValue().withinBounds(i)) l.add(e.getKey());\r\n        return l;\r\n    }\r\n\r\n    static class Range {\r\n        static Map&lt;Class&lt;?&gt;, Range&gt; map = new LinkedHashMap&lt;&gt;() {{\r\n            put(byte.class, Range.of(byte.class));\r\n            put(short.class, Range.of(short.class));\r\n            put(char.class, Range.of(char.class));\r\n            put(int.class, Range.of(int.class));\r\n            put(long.class, Range.of(long.class));\r\n        }};\r\n        BigInteger minimum, maximum;\r\n\r\n        private Range(BigInteger minimum, BigInteger maximum) {\r\n            this.minimum = minimum;\r\n            this.maximum = maximum;\r\n        }\r\n\r\n        boolean withinBounds(BigInteger x) {\r\n            return x.compareTo(minimum) &gt;= 0 &amp;&amp; x.compareTo(maximum) &lt;= 0;\r\n        }\r\n\r\n        static Range of(Class&lt;?&gt; c) {\r\n            return new Range(min(c), max(c));\r\n        }\r\n\r\n        private static BigInteger min(Class&lt;?&gt; c) {\r\n            String s = null;\r\n            if (c == byte.class) s = valueOf(Byte.MIN_VALUE);\r\n            else if (c == short.class) s = valueOf(Short.MIN_VALUE);\r\n            else if (c == char.class) s = valueOf((int) Character.MIN_VALUE);\r\n            else if (c == int.class) s = valueOf(Integer.MIN_VALUE);\r\n            else if (c == long.class) s = valueOf(Long.MIN_VALUE);\r\n            return s != null ? new BigInteger(s) : null;\r\n        }\r\n\r\n        private static BigInteger max(Class&lt;?&gt; c) {\r\n            String s = null;\r\n            if (c == byte.class) s = valueOf(Byte.MAX_VALUE);\r\n            else if (c == short.class) s = valueOf(Short.MAX_VALUE);\r\n            else if (c == char.class) s = valueOf((int) Character.MAX_VALUE);\r\n            else if (c == int.class) s = valueOf(Integer.MAX_VALUE);\r\n            else if (c == long.class) s = valueOf(Long.MAX_VALUE);\r\n            return s != null ? new BigInteger(s) : null;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere is an example usage.\r\n\r\n```java\r\nString s = &quot;5 -150 150000 1500000000 213333333333333333333333333333333333 -100000000000000&quot;;\r\nScanner sc = new Scanner(s);\r\nBigInteger x;\r\nwhile (sc.hasNextBigInteger())\r\n    System.out.printf(&quot;%s%n%s%n%n&quot;, x = sc.nextBigInteger(), Util.fit(x));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n5\r\n[byte, short, char, int, long]\r\n\r\n-150\r\n[short, int, long]\r\n\r\n150000\r\n[int, long]\r\n\r\n1500000000\r\n[int, long]\r\n\r\n213333333333333333333333333333333333\r\n[]\r\n\r\n-100000000000000\r\n[long]\r\n```","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\">BigInteger</a></em> class to evaluate the numbers.</p>\n<p>Additionally, utilize a <em>static data-structure</em> to provide range values for each <em>primitive data-type</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.lang.String.valueOf;\n\nimport java.math.BigInteger;\nimport java.util.ArrayList;\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class Util {\n    static List&lt;Class&lt;?&gt;&gt; fit(BigInteger i) {\n        List&lt;Class&lt;?&gt;&gt; l = new ArrayList&lt;&gt;();\n        for (Map.Entry&lt;Class&lt;?&gt;, Range&gt; e : Range.map.entrySet())\n            if (e.getValue().withinBounds(i)) l.add(e.getKey());\n        return l;\n    }\n\n    static class Range {\n        static Map&lt;Class&lt;?&gt;, Range&gt; map = new LinkedHashMap&lt;&gt;() {{\n            put(byte.class, Range.of(byte.class));\n            put(short.class, Range.of(short.class));\n            put(char.class, Range.of(char.class));\n            put(int.class, Range.of(int.class));\n            put(long.class, Range.of(long.class));\n        }};\n        BigInteger minimum, maximum;\n\n        private Range(BigInteger minimum, BigInteger maximum) {\n            this.minimum = minimum;\n            this.maximum = maximum;\n        }\n\n        boolean withinBounds(BigInteger x) {\n            return x.compareTo(minimum) &gt;= 0 &amp;&amp; x.compareTo(maximum) &lt;= 0;\n        }\n\n        static Range of(Class&lt;?&gt; c) {\n            return new Range(min(c), max(c));\n        }\n\n        private static BigInteger min(Class&lt;?&gt; c) {\n            String s = null;\n            if (c == byte.class) s = valueOf(Byte.MIN_VALUE);\n            else if (c == short.class) s = valueOf(Short.MIN_VALUE);\n            else if (c == char.class) s = valueOf((int) Character.MIN_VALUE);\n            else if (c == int.class) s = valueOf(Integer.MIN_VALUE);\n            else if (c == long.class) s = valueOf(Long.MIN_VALUE);\n            return s != null ? new BigInteger(s) : null;\n        }\n\n        private static BigInteger max(Class&lt;?&gt; c) {\n            String s = null;\n            if (c == byte.class) s = valueOf(Byte.MAX_VALUE);\n            else if (c == short.class) s = valueOf(Short.MAX_VALUE);\n            else if (c == char.class) s = valueOf((int) Character.MAX_VALUE);\n            else if (c == int.class) s = valueOf(Integer.MAX_VALUE);\n            else if (c == long.class) s = valueOf(Long.MAX_VALUE);\n            return s != null ? new BigInteger(s) : null;\n        }\n    }\n}\n</code></pre>\n<p>Here is an example usage.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s = &quot;5 -150 150000 1500000000 213333333333333333333333333333333333 -100000000000000&quot;;\nScanner sc = new Scanner(s);\nBigInteger x;\nwhile (sc.hasNextBigInteger())\n    System.out.printf(&quot;%s%n%s%n%n&quot;, x = sc.nextBigInteger(), Util.fit(x));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>5\n[byte, short, char, int, long]\n\n-150\n[short, int, long]\n\n150000\n[int, long]\n\n1500000000\n[int, long]\n\n213333333333333333333333333333333333\n[]\n\n-100000000000000\n[long]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695612844,"creation_date":1695612844,"answer_id":77169789,"question_id":77169492,"body_markdown":"Let the JDK do the heavy lifting by having Java&#39;s `Number` classes attempt to parse the input:\r\n\r\n```\r\nString x = sc.nextLine();\r\nSystem.out.println(x + &quot; can be fitted in:&quot;);\r\nif (canFit(x, Byte::parseByte)) System.out.println(&quot;* byte&quot;);\r\nif (canFit(x, Short::parseShort)) System.out.println(&quot;* short&quot;);\r\nif (canFit(x, Integer::parseInt)) System.out.println(&quot;* int&quot;);\r\nif (canFit(x, Long::parseLong)) System.out.println(&quot;* long&quot;);\r\nif (!canFit(x, Byte::parseByte) &amp;&amp;\r\n    !canFit(x, Short::parseShort) &amp;&amp;\r\n    !canFit(x, Integer::parseInt) &amp;&amp;\r\n    !canFit(x, Long::parseLong)) System.out.println(&quot;can&#39;t be fitted anywhere.&quot;);\r\n```\r\n\r\nand define this method:\r\n\r\n```\r\nstatic boolean canFit(String input, Consumer&lt;String&gt; parser) {\r\n    try {\r\n        parser.accept(input);\r\n        return true;\r\n    } catch (NumberFormatException e) {\r\n        return false;\r\n    }\r\n}\r\n```\r\n","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<p>Let the JDK do the heavy lifting by having Java's <code>Number</code> classes attempt to parse the input:</p>\n<pre><code>String x = sc.nextLine();\nSystem.out.println(x + &quot; can be fitted in:&quot;);\nif (canFit(x, Byte::parseByte)) System.out.println(&quot;* byte&quot;);\nif (canFit(x, Short::parseShort)) System.out.println(&quot;* short&quot;);\nif (canFit(x, Integer::parseInt)) System.out.println(&quot;* int&quot;);\nif (canFit(x, Long::parseLong)) System.out.println(&quot;* long&quot;);\nif (!canFit(x, Byte::parseByte) &amp;&amp;\n    !canFit(x, Short::parseShort) &amp;&amp;\n    !canFit(x, Integer::parseInt) &amp;&amp;\n    !canFit(x, Long::parseLong)) System.out.println(&quot;can't be fitted anywhere.&quot;);\n</code></pre>\n<p>and define this method:</p>\n<pre><code>static boolean canFit(String input, Consumer&lt;String&gt; parser) {\n    try {\n        parser.accept(input);\n        return true;\n    } catch (NumberFormatException e) {\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29523975,"reputation":7,"user_id":22626089,"display_name":"Kavish singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695660651,"creation_date":1695656953,"answer_id":77174103,"question_id":77169492,"body_markdown":"    import java.util.*;\r\n    import java.io.*;\r\n     \r\n    class Solution{\r\n        public static void main(String []argh){\r\n            \r\n            Scanner sc = new Scanner(System.in);\r\n            int t=sc.nextInt();\r\n    \r\n            for(int i=0;i&lt;t;i++)\r\n            { \r\n               try{\r\n                  long x= sc.nextLong();\r\n                    System.out.println(x+&quot; can be fitted in:&quot;);\r\n    \r\n                    if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\r\n    \r\n                    if(x&gt;=-32768 &amp;&amp; x&lt;=32767)System.out.println(&quot;* short&quot;);\r\n    \r\n                    if(x&gt;=-Integer.MIN_VALUE&amp;&amp; x&lt;= \r\n                           Integer.MAX_VALUE)System.out.println(&quot;* int&quot;);\r\n    \r\n                    if(x&gt;=-Long.MIN_VALUE&amp;&amp; x&lt;= \r\n                           Long.MAX_VALUE)System.out.println(&quot;* long&quot;);\r\n    \r\n                }\r\n                catch(Exception e){\r\n                    System.out.println(sc.next()+&quot; can&#39;t be fitted anywhere.&quot;);\r\n                }    \r\n            }           \r\n        }\r\n    }\r\n\r\nThanku all of you for helping me , your answers teaches me a lot of new things.Thanku for all of your favour to me ,now i got the code that satisfies my conditions ,all of you have also given me a code for same output that code is also right but i want to show you my answer,\r\n","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<pre><code>import java.util.*;\nimport java.io.*;\n \nclass Solution{\n    public static void main(String []argh){\n        \n        Scanner sc = new Scanner(System.in);\n        int t=sc.nextInt();\n\n        for(int i=0;i&lt;t;i++)\n        { \n           try{\n              long x= sc.nextLong();\n                System.out.println(x+&quot; can be fitted in:&quot;);\n\n                if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\n\n                if(x&gt;=-32768 &amp;&amp; x&lt;=32767)System.out.println(&quot;* short&quot;);\n\n                if(x&gt;=-Integer.MIN_VALUE&amp;&amp; x&lt;= \n                       Integer.MAX_VALUE)System.out.println(&quot;* int&quot;);\n\n                if(x&gt;=-Long.MIN_VALUE&amp;&amp; x&lt;= \n                       Long.MAX_VALUE)System.out.println(&quot;* long&quot;);\n\n            }\n            catch(Exception e){\n                System.out.println(sc.next()+&quot; can't be fitted anywhere.&quot;);\n            }    \n        }           \n    }\n}\n</code></pre>\n<p>Thanku all of you for helping me , your answers teaches me a lot of new things.Thanku for all of your favour to me ,now i got the code that satisfies my conditions ,all of you have also given me a code for same output that code is also right but i want to show you my answer,</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695819065,"creation_date":1695819065,"answer_id":77187687,"question_id":77169492,"body_markdown":"You are making your life unnecessarily hard. You are already using a `Scanner` which can perform all the necessary checks for you. You just have to ask:\r\n\r\n```java\r\nint t = sc.nextInt();\r\nfor(int i = 0; i &lt; t; i++) {\r\n\r\n    boolean fitsByte = sc.hasNextByte(), fitsShort = sc.hasNextShort(),\r\n        fitsInt = sc.hasNextInt(), fitsLong = sc.hasNextLong();\r\n\r\n    System.out.print(sc.next());\r\n\r\n    if(!fitsLong) System.out.println(&quot; can&#39;t be fitted anywhere.&quot;);\r\n    else {\r\n        System.out.println(&quot; can be fitted in:&quot;);\r\n        if(fitsByte) System.out.println(&quot;* byte&quot;);\r\n        if(fitsShort) System.out.println(&quot;* short&quot;);\r\n        if(fitsInt) System.out.println(&quot;* int&quot;);\r\n        System.out.println(&quot;* long&quot;);\r\n    }\r\n}\r\n```\r\n\r\nJust keep in mind that you have to call `hasNext…()` before `next()`, to query the properties of the next element.\r\n\r\nNote, how easy it is to expand to other types:\r\n\r\n```java\r\nint t = sc.nextInt();\r\nfor(int i = 0; i &lt; t; i++) {\r\n\r\n    boolean fitsByte = sc.hasNextByte(), fitsShort = sc.hasNextShort(),\r\n        fitsInt = sc.hasNextInt(), fitsLong = sc.hasNextLong(),\r\n        fitsBig = sc.hasNextBigInteger();\r\n\r\n    System.out.print(sc.next());\r\n\r\n    if(!fitsBig) System.out.println(&quot; can&#39;t be fitted anywhere.&quot;);\r\n    else {\r\n        System.out.println(&quot; can be fitted in:&quot;);\r\n        if(fitsByte) System.out.println(&quot;* byte&quot;);\r\n        if(fitsShort) System.out.println(&quot;* short&quot;);\r\n        if(fitsInt) System.out.println(&quot;* int&quot;);\r\n        if(fitsLong) System.out.println(&quot;* long&quot;);\r\n        System.out.println(&quot;* BigInteger&quot;);\r\n    }\r\n}\r\n```\r\n(An input would not fit into a `BigInteger` if it has a fraction or isn’t a number at all)\r\n","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<p>You are making your life unnecessarily hard. You are already using a <code>Scanner</code> which can perform all the necessary checks for you. You just have to ask:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int t = sc.nextInt();\nfor(int i = 0; i &lt; t; i++) {\n\n    boolean fitsByte = sc.hasNextByte(), fitsShort = sc.hasNextShort(),\n        fitsInt = sc.hasNextInt(), fitsLong = sc.hasNextLong();\n\n    System.out.print(sc.next());\n\n    if(!fitsLong) System.out.println(&quot; can't be fitted anywhere.&quot;);\n    else {\n        System.out.println(&quot; can be fitted in:&quot;);\n        if(fitsByte) System.out.println(&quot;* byte&quot;);\n        if(fitsShort) System.out.println(&quot;* short&quot;);\n        if(fitsInt) System.out.println(&quot;* int&quot;);\n        System.out.println(&quot;* long&quot;);\n    }\n}\n</code></pre>\n<p>Just keep in mind that you have to call <code>hasNext…()</code> before <code>next()</code>, to query the properties of the next element.</p>\n<p>Note, how easy it is to expand to other types:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int t = sc.nextInt();\nfor(int i = 0; i &lt; t; i++) {\n\n    boolean fitsByte = sc.hasNextByte(), fitsShort = sc.hasNextShort(),\n        fitsInt = sc.hasNextInt(), fitsLong = sc.hasNextLong(),\n        fitsBig = sc.hasNextBigInteger();\n\n    System.out.print(sc.next());\n\n    if(!fitsBig) System.out.println(&quot; can't be fitted anywhere.&quot;);\n    else {\n        System.out.println(&quot; can be fitted in:&quot;);\n        if(fitsByte) System.out.println(&quot;* byte&quot;);\n        if(fitsShort) System.out.println(&quot;* short&quot;);\n        if(fitsInt) System.out.println(&quot;* int&quot;);\n        if(fitsLong) System.out.println(&quot;* long&quot;);\n        System.out.println(&quot;* BigInteger&quot;);\n    }\n}\n</code></pre>\n<p>(An input would not fit into a <code>BigInteger</code> if it has a fraction or isn’t a number at all)</p>\n"}],"owner":{"account_id":29523975,"reputation":7,"user_id":22626089,"display_name":"Kavish singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":5,"score":-1,"last_activity_date":1695819065,"creation_date":1695605106,"question_id":77169492,"body_markdown":"&gt; Given an input integer, you must determine which primitive data types are capable of properly storing that input.\r\n&gt; \r\n&gt; Input Format\r\n&gt; \r\n&gt; The first line contains an integer, , denoting the number of test cases.\r\n&gt; Each test case, , is comprised of a single line with an integer, , which can be arbitrarily large or small.\r\n&gt; \r\n&gt; Output Format\r\n&gt; \r\n&gt; For each input variable  and appropriate primitive , you must determine if the given primitives are capable of storing it. If yes, then print:\r\n&gt; ```none\r\n&gt;! n can be fitted in:\r\n&gt;! dataType\r\n&gt; ```\r\n&gt; If there is more than one appropriate data type, print each one on its own line and order them by size (i.e.:byte&lt;short&lt;int&lt;long).\r\n&gt; If the number cannot be stored in one of the four aforementioned primitives, print the line:\r\n&gt; ```none\r\n&gt;! n can&#39;t be fitted anywhere.\r\n&gt; ```\r\n&gt; Sample Input\r\n&gt; ```none\r\n&gt; 5\r\n&gt; -150\r\n&gt; 150000\r\n&gt; 1500000000\r\n&gt; 213333333333333333333333333333333333\r\n&gt; -100000000000000\r\n&gt; ```\r\n&gt; Sample Output\r\n&gt; ```none\r\n&gt; -150 can be fitted in:\r\n&gt; * short\r\n&gt; * int\r\n&gt; * long\r\n&gt; 150000 can be fitted in:\r\n&gt; * int\r\n&gt; * long\r\n&gt; 1500000000 can be fitted in:\r\n&gt; * int\r\n&gt; * long\r\n&gt; 213333333333333333333333333333333333 can&#39;t be fitted anywhere.\r\n&gt; -100000000000000 can be fitted in:\r\n&gt; * long   \r\n&gt; ```\r\n\r\nThis is the code I wrote.\r\n i also tried Long.MIN_VALUE and MAX_VALUE , in all these some cases are passed but this codes didnt pass all the cases ,i also tried big integer,But didnt work.\r\n\r\n```\r\nimport java.util.*;\r\nimport java.io.*;\r\n \r\n\r\nclass Solution{\r\n    public static void main(String []argh){\r\n        \r\n        Scanner sc = new Scanner(System.in);\r\n        int t=sc.nextInt();\r\n\r\n        for(int i=0;i&lt;t;i++)\r\n        { \r\n         try{\r\n                long x = sc.nextLong();\r\n                System.out.println(x+&quot; can be fitted in:&quot;);\r\n                if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\r\n                if(x&gt;=-32768 &amp;&amp; x&lt;=32767)System.out.println(&quot;* short&quot;);\r\n                if(x&gt;=-(int)Math.pow(2,31)&amp;&amp; x&lt;=(int)Math.pow(2,31))System.out.println(&quot;* int&quot;);\r\n                if(x&gt;=-(long)Math.pow(2,63)&amp;&amp; x&lt;=(long)Math.pow(2,63))System.out.println(&quot;* long&quot;);\r\n            }\r\n            else\r\n            {\r\n                System.out.println(sc.next()+&quot; can&#39;t be fitted anywhere.&quot;);\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n```","title":"We&#39;ll work with the primitives used to hold integer values (byte, short, int, and long):","body":"<blockquote>\n<p>Given an input integer, you must determine which primitive data types are capable of properly storing that input.</p>\n<p>Input Format</p>\n<p>The first line contains an integer, , denoting the number of test cases.\nEach test case, , is comprised of a single line with an integer, , which can be arbitrarily large or small.</p>\n<p>Output Format</p>\n<p>For each input variable  and appropriate primitive , you must determine if the given primitives are capable of storing it. If yes, then print:</p>\n<pre class=\"lang-none prettyprint-override\"><code>! n can be fitted in:\n! dataType\n</code></pre>\n<p>If there is more than one appropriate data type, print each one on its own line and order them by size (i.e.:byte&lt;short&lt;int&lt;long).\nIf the number cannot be stored in one of the four aforementioned primitives, print the line:</p>\n<pre class=\"lang-none prettyprint-override\"><code>! n can't be fitted anywhere.\n</code></pre>\n<p>Sample Input</p>\n<pre class=\"lang-none prettyprint-override\"><code>5\n-150\n150000\n1500000000\n213333333333333333333333333333333333\n-100000000000000\n</code></pre>\n<p>Sample Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>-150 can be fitted in:\n* short\n* int\n* long\n150000 can be fitted in:\n* int\n* long\n1500000000 can be fitted in:\n* int\n* long\n213333333333333333333333333333333333 can't be fitted anywhere.\n-100000000000000 can be fitted in:\n* long   \n</code></pre>\n</blockquote>\n<p>This is the code I wrote.\ni also tried Long.MIN_VALUE and MAX_VALUE , in all these some cases are passed but this codes didnt pass all the cases ,i also tried big integer,But didnt work.</p>\n<pre><code>import java.util.*;\nimport java.io.*;\n \n\nclass Solution{\n    public static void main(String []argh){\n        \n        Scanner sc = new Scanner(System.in);\n        int t=sc.nextInt();\n\n        for(int i=0;i&lt;t;i++)\n        { \n         try{\n                long x = sc.nextLong();\n                System.out.println(x+&quot; can be fitted in:&quot;);\n                if(x&gt;=-128 &amp;&amp; x&lt;=127)System.out.println(&quot;* byte&quot;);\n                if(x&gt;=-32768 &amp;&amp; x&lt;=32767)System.out.println(&quot;* short&quot;);\n                if(x&gt;=-(int)Math.pow(2,31)&amp;&amp; x&lt;=(int)Math.pow(2,31))System.out.println(&quot;* int&quot;);\n                if(x&gt;=-(long)Math.pow(2,63)&amp;&amp; x&lt;=(long)Math.pow(2,63))System.out.println(&quot;* long&quot;);\n            }\n            else\n            {\n                System.out.println(sc.next()+&quot; can't be fitted anywhere.&quot;);\n            }\n\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","user-input"],"comments":[{"owner":{"account_id":221272,"reputation":6281,"user_id":479156,"accept_rate":92,"display_name":"Ivar"},"score":0,"creation_date":1695819477,"post_id":77187680,"comment_id":136074836,"body_markdown":"Also, simply replacing `next()` with `nextLine()` will cause different issues. See [Scanner is skipping nextLine() after using next() or nextFoo()?](https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo)","body":"Also, simply replacing <code>next()</code> with <code>nextLine()</code> will cause different issues. See <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"},{"owner":{"account_id":28773110,"reputation":1,"user_id":22036422,"display_name":"ollie"},"score":0,"creation_date":1695819704,"post_id":77187680,"comment_id":136074896,"body_markdown":"It does! Thanks a lot.","body":"It does! Thanks a lot."}],"owner":{"account_id":28773110,"reputation":1,"user_id":22036422,"display_name":"ollie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695819770,"answer_count":0,"score":0,"last_activity_date":1695819008,"creation_date":1695819008,"question_id":77187680,"body_markdown":"I&#39;m currently developing a project where, at several points, the user will receive question prompts that must be answered through a keyboard input, each answer being atributed to a variable in order to call for the appropriate next step. The first part has three questions, and the variables associated with them are String - Int - String types. Afterwards, the program displays the informations via a print function. However, upon testing the first round of prompts to be asked, I noted three things:\r\n\r\n1. Upon inputing a two worded name as the answer for the first input prompt, the console stops running the code altogether, with the next prompt displaying the following error message:\r\nException in thread &quot;main&quot; java.util.InputMismatchException at java.base/java.util.Scanner.throwFor(Scanner.java:943) at java.base/java.util.Scanner.next(Scanner.java:1598) at java.base/java.util.Scanner.nextInt(Scanner.java:2263) at java.base/java.util.Scanner.nextInt(Scanner.java:2217) at geradorfichasrpg/geradorfichasrpg.FichaPC.ID_PC(FichaPC.java:23) at geradorfichasrpg/geradorfichasrpg.FichaPC.main(FichaPC.java:11)\r\n\r\n2. A single word works just fine and the console continues running the code as expected;\r\n\r\n3. The last input does accept a two worded answer, but only the first word is displayed and the console stops running the code (but with no error message this time).\r\n\r\nWhat&#39;s wrong? The code is right bellow.\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class FichaPC {\r\n\tpublic static final Scanner keyboard = new Scanner(System.in);\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(&quot;= Character Sheet Generator (D&amp;D 5th Edition) =&quot;);\r\n\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\r\n\t\tID_PC();\r\n\t\t}\r\n\r\n\t\r\n\tpublic static void ID_PC() {\r\n\t\tString name = &quot;&quot;;\r\n\t\tint age = 0;\r\n\t\tString align = &quot;&quot;;\r\n\t\t\r\n\t\tSystem.out.print(&quot;Name: &quot;);\r\n\t\tname = keyboard.next();\r\n\t\tSystem.out.print(&quot;Age: &quot;);\r\n\t\tage = keyboard.nextInt();\r\n\t\tSystem.out.print(&quot;Alignment: &quot;);\r\n\t\talign = keyboard.next();\r\n\t\t\r\n\t\tSystem.out.print(&quot;Name: &quot;);\r\n\t\tSystem.out.println(name);\r\n\t\tSystem.out.print(&quot;Age: &quot;);\r\n\t\tSystem.out.println(age);\r\n\t\tSystem.out.print(&quot;Align: &quot;);\r\n\t\tSystem.out.println(align);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nThanks in advance!","title":"Java Input Issue","body":"<p>I'm currently developing a project where, at several points, the user will receive question prompts that must be answered through a keyboard input, each answer being atributed to a variable in order to call for the appropriate next step. The first part has three questions, and the variables associated with them are String - Int - String types. Afterwards, the program displays the informations via a print function. However, upon testing the first round of prompts to be asked, I noted three things:</p>\n<ol>\n<li><p>Upon inputing a two worded name as the answer for the first input prompt, the console stops running the code altogether, with the next prompt displaying the following error message:\nException in thread &quot;main&quot; java.util.InputMismatchException at java.base/java.util.Scanner.throwFor(Scanner.java:943) at java.base/java.util.Scanner.next(Scanner.java:1598) at java.base/java.util.Scanner.nextInt(Scanner.java:2263) at java.base/java.util.Scanner.nextInt(Scanner.java:2217) at geradorfichasrpg/geradorfichasrpg.FichaPC.ID_PC(FichaPC.java:23) at geradorfichasrpg/geradorfichasrpg.FichaPC.main(FichaPC.java:11)</p>\n</li>\n<li><p>A single word works just fine and the console continues running the code as expected;</p>\n</li>\n<li><p>The last input does accept a two worded answer, but only the first word is displayed and the console stops running the code (but with no error message this time).</p>\n</li>\n</ol>\n<p>What's wrong? The code is right bellow.</p>\n<pre><code>import java.util.Scanner;\n\npublic class FichaPC {\n    public static final Scanner keyboard = new Scanner(System.in);\n\n    public static void main(String[] args) {\n        System.out.println(&quot;= Character Sheet Generator (D&amp;D 5th Edition) =&quot;);\n        System.out.println(&quot;&quot;);\n        \n        ID_PC();\n        }\n\n    \n    public static void ID_PC() {\n        String name = &quot;&quot;;\n        int age = 0;\n        String align = &quot;&quot;;\n        \n        System.out.print(&quot;Name: &quot;);\n        name = keyboard.next();\n        System.out.print(&quot;Age: &quot;);\n        age = keyboard.nextInt();\n        System.out.print(&quot;Alignment: &quot;);\n        align = keyboard.next();\n        \n        System.out.print(&quot;Name: &quot;);\n        System.out.println(name);\n        System.out.print(&quot;Age: &quot;);\n        System.out.println(age);\n        System.out.print(&quot;Align: &quot;);\n        System.out.println(align);\n    }\n\n}\n</code></pre>\n<p>Thanks in advance!</p>\n"},{"tags":["java","html","pdf","pdfbox","apache-tika"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1590502542,"post_id":62023993,"comment_id":109699492,"body_markdown":"What happens if you use the PDFBox ExtractText command line tool with the &quot;-html&quot; option? This should bring more, although not all you asked for.","body":"What happens if you use the PDFBox ExtractText command line tool with the &quot;-html&quot; option? This should bring more, although not all you asked for."},{"owner":{"account_id":16960720,"reputation":65,"user_id":12267939,"display_name":"punithan antony"},"score":0,"creation_date":1590502846,"post_id":62023993,"comment_id":109699696,"body_markdown":"@TilmanHausherr yes i already tried that but am getting same html divs without styles","body":"@TilmanHausherr yes i already tried that but am getting same html divs without styles"}],"answers":[{"tags":[],"owner":{"account_id":1432392,"reputation":1040,"user_id":1354517,"accept_rate":85,"display_name":"Gautam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695818519,"creation_date":1695818519,"answer_id":77187622,"question_id":62023993,"body_markdown":"You can use Pdf2Dom library. Unfortunately the repo is not maintained / updated any further but the latest release available works very well. It works with pdfbox. \r\n\r\nYou can convert Pdf to Dom using code snippet like \r\n\r\n```\r\n\r\n    public static Document parseWithPdfDomTree(InputStream is, int start, int end) throws Exception\r\n    {\r\n        PDDocument pdf = PDDocument.load(is);\r\n        PDFDomTree parser = new PDFDomTree();\r\n        parser.setStartPage(start);\r\n        parser.setEndPage(end);\r\n\r\n        Writer output = new StringWriter();\r\n        parser.writeText(pdf, output);\r\n        pdf.close();\r\n        String htmlOutput = output.toString();\r\n\r\n        return Jsoup.parse(htmlOutput);\r\n    }\r\n```\r\n\r\n[Pdf2Dom][1]\r\n\r\n\r\n  [1]: https://github.com/radkovo/Pdf2Dom","title":"How to convert PDF files into HTML with styles using APACHE TIKA","body":"<p>You can use Pdf2Dom library. Unfortunately the repo is not maintained / updated any further but the latest release available works very well. It works with pdfbox.</p>\n<p>You can convert Pdf to Dom using code snippet like</p>\n<pre><code>\n    public static Document parseWithPdfDomTree(InputStream is, int start, int end) throws Exception\n    {\n        PDDocument pdf = PDDocument.load(is);\n        PDFDomTree parser = new PDFDomTree();\n        parser.setStartPage(start);\n        parser.setEndPage(end);\n\n        Writer output = new StringWriter();\n        parser.writeText(pdf, output);\n        pdf.close();\n        String htmlOutput = output.toString();\n\n        return Jsoup.parse(htmlOutput);\n    }\n</code></pre>\n<p><a href=\"https://github.com/radkovo/Pdf2Dom\" rel=\"nofollow noreferrer\">Pdf2Dom</a></p>\n"}],"owner":{"account_id":16960720,"reputation":65,"user_id":12267939,"display_name":"punithan antony"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695818519,"creation_date":1590501983,"question_id":62023993,"body_markdown":"am using apache tika to convert PDF files to HTML, i need to extract html with styles like bold, italics, top, left, height, width and font family of the element, But i used to get only raw html tags which contains tags without styles,\r\n```\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport javax.xml.transform.OutputKeys;\r\nimport javax.xml.transform.TransformerConfigurationException;\r\nimport javax.xml.transform.sax.SAXTransformerFactory;\r\nimport javax.xml.transform.sax.TransformerHandler;\r\nimport javax.xml.transform.stream.StreamResult;\r\nimport org.apache.tika.exception.TikaException;\r\nimport org.apache.tika.metadata.Metadata;\r\nimport org.apache.tika.parser.AutoDetectParser;\r\nimport org.apache.tika.sax.ExpandedTitleContentHandler;\r\nimport org.xml.sax.SAXException;\r\nimport com.google.common.io.Files;\r\n\r\npublic class Test4 {\r\n\r\n    public static void main(String[] args) throws IOException, TransformerConfigurationException, SAXException, TikaException {\r\n        byte[] file = Files.toByteArray(new File(&quot;src/main/java/test/test.pdf&quot;));\r\n        AutoDetectParser tikaParser = new AutoDetectParser();\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        SAXTransformerFactory factory = (SAXTransformerFactory) SAXTransformerFactory.newInstance();\r\n        TransformerHandler handler = factory.newTransformerHandler();\r\n        handler.getTransformer().setOutputProperty(OutputKeys.METHOD, &quot;html&quot;);\r\n        handler.getTransformer().setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n        handler.getTransformer().setOutputProperty(OutputKeys.ENCODING, &quot;UTF-8&quot;);\r\n        handler.setResult(new StreamResult(out));\r\n        ExpandedTitleContentHandler handler1 = new ExpandedTitleContentHandler(handler);\r\n        tikaParser.parse(new ByteArrayInputStream(file), handler1, new Metadata());\r\n        System.out.println(new String(out.toByteArray(), &quot;UTF-8&quot;));\r\n\r\n    }\r\n\r\n}\r\n```\r\nIn output am getting only HTML like as follows,\r\n```\r\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;\r\n&lt;head&gt;\r\n&lt;meta name=&quot;date&quot; content=&quot;2017-01-10T12:56:54Z&quot;/&gt;\r\n&lt;meta name=&quot;pdf:PDFVersion&quot; content=&quot;1.5&quot;/&gt;\r\n&lt;meta name=&quot;pdf:docinfo:title&quot; content=&quot;GROUP HEALTH INSURANCE&quot;/&gt;\r\n&lt;meta name=&quot;pdf:docinfo:created&quot; content=&quot;2016-09-01T05:45:44Z&quot;/&gt;\r\n\r\n&lt;!-- some meta&#39;s here  --&gt;\r\n&lt;title&gt;GROUP HEALTH INSURANCE&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;div class=&quot;page&quot;&gt;\r\n&lt;p/&gt;\r\n&lt;p&gt; Group Personal Accident Policy for Optional Travel Insurance for E-ticket &lt;/p&gt;\r\n&lt;p&gt;Sample Registration Number:102 \r\n\r\n&lt;/p&gt;\r\n&lt;p&gt;Annexure 1 \r\n\r\n&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nHow can i extract content as HTML from PDF with its own styles, please command your answer, thanks in advance.","title":"How to convert PDF files into HTML with styles using APACHE TIKA","body":"<p>am using apache tika to convert PDF files to HTML, i need to extract html with styles like bold, italics, top, left, height, width and font family of the element, But i used to get only raw html tags which contains tags without styles,</p>\n\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.File;\nimport java.io.IOException;\nimport javax.xml.transform.OutputKeys;\nimport javax.xml.transform.TransformerConfigurationException;\nimport javax.xml.transform.sax.SAXTransformerFactory;\nimport javax.xml.transform.sax.TransformerHandler;\nimport javax.xml.transform.stream.StreamResult;\nimport org.apache.tika.exception.TikaException;\nimport org.apache.tika.metadata.Metadata;\nimport org.apache.tika.parser.AutoDetectParser;\nimport org.apache.tika.sax.ExpandedTitleContentHandler;\nimport org.xml.sax.SAXException;\nimport com.google.common.io.Files;\n\npublic class Test4 {\n\n    public static void main(String[] args) throws IOException, TransformerConfigurationException, SAXException, TikaException {\n        byte[] file = Files.toByteArray(new File(\"src/main/java/test/test.pdf\"));\n        AutoDetectParser tikaParser = new AutoDetectParser();\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        SAXTransformerFactory factory = (SAXTransformerFactory) SAXTransformerFactory.newInstance();\n        TransformerHandler handler = factory.newTransformerHandler();\n        handler.getTransformer().setOutputProperty(OutputKeys.METHOD, \"html\");\n        handler.getTransformer().setOutputProperty(OutputKeys.INDENT, \"yes\");\n        handler.getTransformer().setOutputProperty(OutputKeys.ENCODING, \"UTF-8\");\n        handler.setResult(new StreamResult(out));\n        ExpandedTitleContentHandler handler1 = new ExpandedTitleContentHandler(handler);\n        tikaParser.parse(new ByteArrayInputStream(file), handler1, new Metadata());\n        System.out.println(new String(out.toByteArray(), \"UTF-8\"));\n\n    }\n\n}\n</code></pre>\n\n<p>In output am getting only HTML like as follows,</p>\n\n<pre><code>&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta name=\"date\" content=\"2017-01-10T12:56:54Z\"/&gt;\n&lt;meta name=\"pdf:PDFVersion\" content=\"1.5\"/&gt;\n&lt;meta name=\"pdf:docinfo:title\" content=\"GROUP HEALTH INSURANCE\"/&gt;\n&lt;meta name=\"pdf:docinfo:created\" content=\"2016-09-01T05:45:44Z\"/&gt;\n\n&lt;!-- some meta's here  --&gt;\n&lt;title&gt;GROUP HEALTH INSURANCE&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"page\"&gt;\n&lt;p/&gt;\n&lt;p&gt; Group Personal Accident Policy for Optional Travel Insurance for E-ticket &lt;/p&gt;\n&lt;p&gt;Sample Registration Number:102 \n\n&lt;/p&gt;\n&lt;p&gt;Annexure 1 \n\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>How can i extract content as HTML from PDF with its own styles, please command your answer, thanks in advance.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1592912661,"creation_date":1468505913,"answer_id":38376683,"question_id":38376584,"body_markdown":"Short answer, no. \r\n\r\nThis is as per [API][1] in latest Java 8 at the time of writing. \r\n\r\nHowever, one of the overloaded `StringBuffer` constructors takes a `CharSequence` as parameter, and `StringBuilder` (just like `StringBuffer`) IS-A `CharSequence`. \r\n\r\nFor instance:\r\n\r\n    matcher.appendReplacement(\r\n        new StringBuffer(yourOriginalStringBuilder), &quot;yourReplacement&quot;\r\n    );\r\n\r\n**Edit**\r\n\r\nSince Java 9, an overload is available, which takes a `StringBuilder` instead - see API [here][2]. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuffer-java.lang.String-\r\n  [2]: https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String-","title":"Java Matcher.appendReplacement() and Matcher.appendTail() for StringBuilder?","body":"<p>Short answer, no.</p>\n<p>This is as per <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuffer-java.lang.String-\" rel=\"nofollow noreferrer\">API</a> in latest Java 8 at the time of writing.</p>\n<p>However, one of the overloaded <code>StringBuffer</code> constructors takes a <code>CharSequence</code> as parameter, and <code>StringBuilder</code> (just like <code>StringBuffer</code>) IS-A <code>CharSequence</code>.</p>\n<p>For instance:</p>\n<pre><code>matcher.appendReplacement(\n    new StringBuffer(yourOriginalStringBuilder), &quot;yourReplacement&quot;\n);\n</code></pre>\n<p><strong>Edit</strong></p>\n<p>Since Java 9, an overload is available, which takes a <code>StringBuilder</code> instead - see API <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String-\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":92774,"reputation":153,"user_id":254094,"display_name":"mmm444"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1485366932,"creation_date":1485366932,"answer_id":41858380,"question_id":38376584,"body_markdown":"Short answer, not yet. Not until Java 9. In Java 9 there are `Matcher.appendReplacement(StringBuilder,String)` and `Matcher.appendTail(StringBuilder)` methods added to the [API][1].\r\n\r\nUntil then if you don&#39;t need group substitutions in replacement string then I still find this solution &#39;easy&#39;:\r\n\r\n    Matcher m = PATTERN.matcher(s);\r\n    StringBuilder sb = new StringBuilder();\r\n    int pos = 0;\r\n    while(m.find()) {\r\n    \tsb.append(s, pos, m.start());\r\n    \tpos = m.end();\r\n    \tsb.append(&quot;replacement&quot;)\r\n    }\r\n    sb.append(s, pos, s.length());\r\n\r\nAnd even if you need group subtitutions then it gets just &#39;moderately&#39; difficult:\r\n\r\n    Matcher m = PATTERN.matcher(s);\r\n    StringBuilder sb = new StringBuilder();\r\n    int pos = 0;\r\n    while(m.find()) {\r\n    \tsb.append(s, pos, m.start());\r\n    \tpos = m.end();\r\n    \tif (m.start(1) &gt;= 0) {                  // check if group 1 matched\r\n    \t\tsb.append(s, m.start(1), m.end(1)); // replace with group 1\r\n    \t}\r\n    }\r\n    sb.append(s, pos, s.length());\r\n\r\n\r\n  [1]: http://download.java.net/java/jdk9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String- &quot;API&quot;","title":"Java Matcher.appendReplacement() and Matcher.appendTail() for StringBuilder?","body":"<p>Short answer, not yet. Not until Java 9. In Java 9 there are <code>Matcher.appendReplacement(StringBuilder,String)</code> and <code>Matcher.appendTail(StringBuilder)</code> methods added to the <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/regex/Matcher.html#appendReplacement-java.lang.StringBuilder-java.lang.String-\" rel=\"noreferrer\" title=\"API\">API</a>.</p>\n\n<p>Until then if you don't need group substitutions in replacement string then I still find this solution 'easy':</p>\n\n<pre><code>Matcher m = PATTERN.matcher(s);\nStringBuilder sb = new StringBuilder();\nint pos = 0;\nwhile(m.find()) {\n    sb.append(s, pos, m.start());\n    pos = m.end();\n    sb.append(\"replacement\")\n}\nsb.append(s, pos, s.length());\n</code></pre>\n\n<p>And even if you need group subtitutions then it gets just 'moderately' difficult:</p>\n\n<pre><code>Matcher m = PATTERN.matcher(s);\nStringBuilder sb = new StringBuilder();\nint pos = 0;\nwhile(m.find()) {\n    sb.append(s, pos, m.start());\n    pos = m.end();\n    if (m.start(1) &gt;= 0) {                  // check if group 1 matched\n        sb.append(s, m.start(1), m.end(1)); // replace with group 1\n    }\n}\nsb.append(s, pos, s.length());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263115,"reputation":16950,"user_id":548473,"display_name":"Grigory Kislin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695818131,"creation_date":1695818131,"answer_id":77187572,"question_id":38376584,"body_markdown":"So, for readers: full code for JDK 9 and multiple replacement (e.g.\r\n&quot;Hello ${name}, check ${email}&quot;):\r\n\r\n    private static final Pattern PLACEHOLDER_PATTERN = Pattern.compile(&quot;\\\\$\\\\{(\\\\w+)}&quot;);\r\n\r\n    Matcher matcher = PLACEHOLDER_PATTERN.matcher(value)\r\n    if(matcher.find()){\r\n        StringBuilder sb = new StringBuilder();\r\n        while (p.matcher.find()) {\r\n           String key = p.matcher.group(1);\r\n           Object obj = getObject(key, map);\r\n           p.matcher.appendReplacement(sb, obj.toString());\r\n        }\r\n        p.matcher.appendTail(sb);\r\n        return sb.toString;\r\n    }","title":"Java Matcher.appendReplacement() and Matcher.appendTail() for StringBuilder?","body":"<p>So, for readers: full code for JDK 9 and multiple replacement (e.g.\n&quot;Hello ${name}, check ${email}&quot;):</p>\n<pre><code>private static final Pattern PLACEHOLDER_PATTERN = Pattern.compile(&quot;\\\\$\\\\{(\\\\w+)}&quot;);\n\nMatcher matcher = PLACEHOLDER_PATTERN.matcher(value)\nif(matcher.find()){\n    StringBuilder sb = new StringBuilder();\n    while (p.matcher.find()) {\n       String key = p.matcher.group(1);\n       Object obj = getObject(key, map);\n       p.matcher.appendReplacement(sb, obj.toString());\n    }\n    p.matcher.appendTail(sb);\n    return sb.toString;\n}\n</code></pre>\n"}],"owner":{"account_id":2643288,"reputation":551,"user_id":2286515,"accept_rate":29,"display_name":"James"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4228,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1695818131,"creation_date":1468505602,"question_id":38376584,"body_markdown":"Is there an alternative to Matcher.appendReplacement() and Matcher.appendTail() which takes StringBuilder instead of StringBuffer ?\r\n\r\nIs there an &#39;easy&#39; way to &#39;convert&#39; Java code which calls Matcher with a StringBuffer to use StringBuilder instead?\r\n\r\nThanks,\r\nJames","title":"Java Matcher.appendReplacement() and Matcher.appendTail() for StringBuilder?","body":"<p>Is there an alternative to Matcher.appendReplacement() and Matcher.appendTail() which takes StringBuilder instead of StringBuffer ?</p>\n\n<p>Is there an 'easy' way to 'convert' Java code which calls Matcher with a StringBuffer to use StringBuilder instead?</p>\n\n<p>Thanks,\nJames</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1695791393,"post_id":77180315,"comment_id":136069811,"body_markdown":"Can you share URL? Or page source code at least. If you get any exception, post your output as well.","body":"Can you share URL? Or page source code at least. If you get any exception, post your output as well."},{"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"score":0,"creation_date":1695806459,"post_id":77180315,"comment_id":136072222,"body_markdown":"the page is long I can&#39;t post it here.URL require login and hence I can&#39;t share it","body":"the page is long I can&#39;t post it here.URL require login and hence I can&#39;t share it"},{"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"score":0,"creation_date":1695814550,"post_id":77180315,"comment_id":136073821,"body_markdown":"@pbburgr there is no exception","body":"@pbburgr there is no exception"}],"answers":[{"tags":[],"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695817702,"creation_date":1695817702,"answer_id":77187515,"question_id":77180315,"body_markdown":"After lot of trial and error now I could solve this issue.Eventhough I didn&#39;t understand the logic behind this, posting the answer here might be useful for somebody else.\r\n\r\nJavascriptExecutor js = (JavascriptExecutor) driver;\r\n            driver.findElement(By.tagName(&quot;body&quot;)).sendKeys(Keys.END);\r\n\r\nthis code didn&#39;t work for me ,but I was trying with a while loop based on page height and above code ,manually clicked on the screen and I could. see that the screen scrolling down.So I just added a code to click on one of the element in the page prior to executing the above code and it works.Felt strange but it is working now.","title":"Scrolling at the end of a page in selenium java automated testing on Mac OS","body":"<p>After lot of trial and error now I could solve this issue.Eventhough I didn't understand the logic behind this, posting the answer here might be useful for somebody else.</p>\n<p>JavascriptExecutor js = (JavascriptExecutor) driver;\ndriver.findElement(By.tagName(&quot;body&quot;)).sendKeys(Keys.END);</p>\n<p>this code didn't work for me ,but I was trying with a while loop based on page height and above code ,manually clicked on the screen and I could. see that the screen scrolling down.So I just added a code to click on one of the element in the page prior to executing the above code and it works.Felt strange but it is working now.</p>\n"}],"owner":{"account_id":29197708,"reputation":47,"user_id":22368447,"display_name":"Rajeesha R"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695821432,"answer_count":1,"score":0,"last_activity_date":1695817702,"creation_date":1695733695,"question_id":77180315,"body_markdown":"I tried both the code below to go at the end of a page but it is not scrolling down.Is it anything to do with chrome browser on Mac?\r\n\r\n```\r\nJavascriptExecutor js = (JavascriptExecutor) driver; js.executeScript(&quot;window.scrollBy(0,713)&quot;, &quot;&quot;); Thread.sleep(1000); Long height=(Long) js.executeScript(&quot;return document.body.scrollHeight&quot;);\r\n\r\n      driver.findElement(By.tagName(&quot;body&quot;)).sendKeys(Keys.END);\r\n```","title":"Scrolling at the end of a page in selenium java automated testing on Mac OS","body":"<p>I tried both the code below to go at the end of a page but it is not scrolling down.Is it anything to do with chrome browser on Mac?</p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) driver; js.executeScript(&quot;window.scrollBy(0,713)&quot;, &quot;&quot;); Thread.sleep(1000); Long height=(Long) js.executeScript(&quot;return document.body.scrollHeight&quot;);\n\n      driver.findElement(By.tagName(&quot;body&quot;)).sendKeys(Keys.END);\n</code></pre>\n"},{"tags":["javascript","java","android","kotlin"],"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695817536,"creation_date":1695817536,"question_id":77187494,"body_markdown":"I have webview app where i load a website , this website has a registration form where i need to set values into those fields of form , i have written code which does that and data is being populated into fields , but the issue is that on website when i click submit button , it says enter your values ( firstName , lastName and so on ) , i could not really find why , i would appreciate some help on this topic , Thank you \r\n\r\n * Code \r\n\r\n```\r\n        /// setting up webview \r\n  \r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.getSettings().setDomStorageEnabled(true);\r\n        webView.setWebViewClient(new MyWebViewClient());\r\n        webView.setWebChromeClient(new MyWebChromeClient());\r\n        webView.loadUrl(&quot;https://xxxx/services/card- \r\n         reader/xxxxxxx&quot;);\r\n\r\n\r\n  // INJECTING DATA\r\n private void fillFormFields() {\r\n\r\n       String firstNameScript = &quot;document.getElementsByName(&#39;firstname&#39;)[0].value = &#39;&quot; + stringArray[2] + &quot;&#39;;&quot;;\r\n\r\n       String lastNameScript = &quot;document.getElementsByName(&#39;lastname&#39;)[0].value = &#39;&quot; + stringArray[4] + &quot;&#39;;&quot;;\r\n\r\n        String personalIdScript = &quot;document.getElementsByName(&#39;personalId&#39;)[0].value = &#39;&quot; + stringArray[0] + &quot;&#39;;&quot;;\r\n\r\n        String birthDateScript = &quot;document.getElementsByName(&#39;birthDate&#39;)[0].value = &#39;&quot; + getGregorianDate(stringArray[18]) + &quot;&#39;;&quot;;\r\n\r\n        String addressScript = &quot;document.getElementsByName(&#39;address&#39;)[0].value = &#39;&quot; + stringArray[9] + &quot; &quot; + stringArray[10] + &quot;&#39;;&quot;;\r\n\r\n\r\n        webView.evaluateJavascript(&quot;javascript:(function(){&quot; +\r\n                firstNameScript +\r\n                lastNameScript +\r\n                personalIdScript +\r\n                birthDateScript +\r\n                addressScript +\r\n                &quot;})()&quot;,null);\r\n\r\n    }\r\n\r\n```\r\n ","title":"Injecting values into form of website in android webview","body":"<p>I have webview app where i load a website , this website has a registration form where i need to set values into those fields of form , i have written code which does that and data is being populated into fields , but the issue is that on website when i click submit button , it says enter your values ( firstName , lastName and so on ) , i could not really find why , i would appreciate some help on this topic , Thank you</p>\n<ul>\n<li>Code</li>\n</ul>\n<pre><code>        /// setting up webview \n  \n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.getSettings().setDomStorageEnabled(true);\n        webView.setWebViewClient(new MyWebViewClient());\n        webView.setWebChromeClient(new MyWebChromeClient());\n        webView.loadUrl(&quot;https://xxxx/services/card- \n         reader/xxxxxxx&quot;);\n\n\n  // INJECTING DATA\n private void fillFormFields() {\n\n       String firstNameScript = &quot;document.getElementsByName('firstname')[0].value = '&quot; + stringArray[2] + &quot;';&quot;;\n\n       String lastNameScript = &quot;document.getElementsByName('lastname')[0].value = '&quot; + stringArray[4] + &quot;';&quot;;\n\n        String personalIdScript = &quot;document.getElementsByName('personalId')[0].value = '&quot; + stringArray[0] + &quot;';&quot;;\n\n        String birthDateScript = &quot;document.getElementsByName('birthDate')[0].value = '&quot; + getGregorianDate(stringArray[18]) + &quot;';&quot;;\n\n        String addressScript = &quot;document.getElementsByName('address')[0].value = '&quot; + stringArray[9] + &quot; &quot; + stringArray[10] + &quot;';&quot;;\n\n\n        webView.evaluateJavascript(&quot;javascript:(function(){&quot; +\n                firstNameScript +\n                lastNameScript +\n                personalIdScript +\n                birthDateScript +\n                addressScript +\n                &quot;})()&quot;,null);\n\n    }\n\n</code></pre>\n"},{"tags":["java","typescript","kotlin","encryption","cryptography"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695723050,"post_id":77178948,"comment_id":136059462,"body_markdown":"Where is the salt applied in the Kotlin code? The use of a fast digest without salt might be an invitation for many hackers.","body":"Where is the salt applied in the Kotlin code? The use of a fast digest without salt might be an invitation for many hackers."},{"owner":{"account_id":19707288,"reputation":75,"user_id":14428656,"display_name":"Aj James"},"score":0,"creation_date":1695723831,"post_id":77178948,"comment_id":136059613,"body_markdown":"That&#39;s also my question but my friend said that it is hard coded. Is there a way to decrypt that?","body":"That&#39;s also my question but my friend said that it is hard coded. Is there a way to decrypt that?"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695724762,"post_id":77178948,"comment_id":136059773,"body_markdown":"Post complete test data: non-productive key, plaintext and ciphertext. Currently the plaintext is missing.","body":"Post complete test data: non-productive key, plaintext and ciphertext. Currently the plaintext is missing."},{"owner":{"account_id":19707288,"reputation":75,"user_id":14428656,"display_name":"Aj James"},"score":0,"creation_date":1695725880,"post_id":77178948,"comment_id":136060015,"body_markdown":"The plaintext is `8d818916-2cd3-4d72-aa7a-5c73783ba16a` which is the expected output of the decryption.","body":"The plaintext is <code>8d818916-2cd3-4d72-aa7a-5c73783ba16a</code> which is the expected output of the decryption."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1695727704,"post_id":77178948,"comment_id":136060385,"body_markdown":"This data is not consistent. The first 12 bytes of the encrypted data are the nonce. If you use this nonce to encrypt the posted plaintext with the posted key, you get a different ciphertext than the one you posted. Post consistent (non-productive) test data, i.e. plaintext, key and ciphertext, which results from encrypting this plaintext with this key!","body":"This data is not consistent. The first 12 bytes of the encrypted data are the nonce. If you use this nonce to encrypt the posted plaintext with the posted key, you get a different ciphertext than the one you posted. Post consistent (non-productive) test data, i.e. plaintext, key and ciphertext, which results from encrypting this plaintext with this key!"},{"owner":{"account_id":19707288,"reputation":75,"user_id":14428656,"display_name":"Aj James"},"score":0,"creation_date":1695729204,"post_id":77178948,"comment_id":136060669,"body_markdown":"What does the first 12 bytes used as the Initialization Vector (IV)? Can&#39;t it be extracted and use as IV for decryption and the remaining bytes are the encrypted plaintext?","body":"What does the first 12 bytes used as the Initialization Vector (IV)? Can&#39;t it be extracted and use as IV for decryption and the remaining bytes are the encrypted plaintext?"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695735504,"post_id":77178948,"comment_id":136062093,"body_markdown":"Still waiting for test data that can be reproduced with the Kotlin code.","body":"Still waiting for test data that can be reproduced with the Kotlin code."},{"owner":{"account_id":1809323,"reputation":11348,"user_id":1645712,"accept_rate":73,"display_name":"gusto2"},"score":0,"creation_date":1695757072,"post_id":77178948,"comment_id":136066420,"body_markdown":"based on following post\nhttps://stackoverflow.com/questions/54505465/sha256-digest-signature-with-node-forge.md.sha256 is creating a string, it needs to be a Buffer","body":"based on following post <a href=\"https://stackoverflow.com/questions/54505465/sha256-digest-signature-with-node-forge.md.sha256\" title=\"sha256 digest signature with node forge.md.sha256\">stackoverflow.com/questions/54505465/&hellip;</a> is creating a string, it needs to be a Buffer"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1695763121,"post_id":77178948,"comment_id":136067381,"body_markdown":"Regarding the JS code: Apply only one library and not different ones, this shortens the code and avoids unnecessary conversions (and a number of conversion bugs). Also, the key size is wrong.","body":"Regarding the JS code: Apply only one library and not different ones, this shortens the code and avoids unnecessary conversions (and a number of conversion bugs). Also, the key size is wrong."}],"answers":[{"tags":[],"owner":{"account_id":27650244,"reputation":207,"user_id":21105343,"display_name":"NotARobot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695817373,"creation_date":1695817373,"answer_id":77187477,"question_id":77178948,"body_markdown":"Well, it&#39;s not that hard to post consistent test data that can be used to test the JavaScript code. With the following passphrase and plaintext:\r\n\r\n```kotlin\r\nval secretKey = &quot;MYAPP11948-Sep022023145358&quot;\r\nval plaintext = &quot;8d818916-2cd3-4d72-aa7a-5c73783ba16a&quot;;\r\n```\r\n\r\nand the nonce from the ciphertext you posted:\r\n\r\n```kotlin\r\nval IV = Base64.decode(&quot;a4b67Rufd5nODsjg&quot;, Base64.NO_WRAP) // 0x6b86faed1b9f7799ce0ec8e0, 12 bytes\r\n```\r\n\r\nthe shared Kotlin code produces the following Base64 encoded ciphertext:\r\n\r\n```none\r\na4b67Rufd5nODsjgDxCP59gxvmy1RfXoLs+A9hLe/6IsAA1OcvtPil0YGFqo2zvYWtZX+xq3B9vNDbVotLZuqw==\r\n```\r\n\r\nAs already described in the comments, the hashing can be done with WebCrypto, so that the *forge* library is not needed. Also, as in the Kotlin code, a 32 bytes key must be applied (i.e. AES-256). This changes your code to:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    (async () =&gt; {\r\n    async function decryptPass() {\r\n        \r\n        let secretKey = &quot;MYAPP11948-Sep022023145358&quot;\r\n        const encryted = &#39;a4b67Rufd5nODsjgDxCP59gxvmy1RfXoLs+A9hLe/6IsAA1OcvtPil0YGFqo2zvYWtZX+xq3B9vNDbVotLZuqw==&#39;\r\n        const secretKeyBytes = await generateKey(secretKey);\r\n\r\n        const keyBuffer = await window.crypto.subtle.importKey(\r\n            &#39;raw&#39;,\r\n            secretKeyBytes, {\r\n                name: &#39;AES-GCM&#39;,\r\n                length: 256\t// Fix key size\r\n            },\r\n            false,\r\n            [&#39;decrypt&#39;]\r\n        )\r\n\r\n        const encryptedString = atob(encryted)\r\n\r\n        const byteArray = new Uint8Array(encryptedString.length);\r\n\r\n        for (let i = 0; i &lt; encryptedString.length; i++) {\r\n            byteArray[i] = encryptedString.charCodeAt(i);\r\n        }\r\n\r\n        const ivBytes = byteArray.slice(0, 12);\r\n        const encryptedBytes = byteArray.slice(12);\r\n\r\n        const cleartext = await crypto.subtle.decrypt({\r\n            name: &#39;AES-GCM&#39;,\r\n            &quot;iv&quot;: ivBytes,\r\n        }, keyBuffer, encryptedBytes);\r\n\r\n        console.log(new TextDecoder().decode(cleartext)) // Expected output: 8d818916-2cd3-4d72-aa7a-5c73783ba16a\r\n    }\r\n\r\n    async function generateKey(key) {\r\n        return await window.crypto.subtle.digest(&quot;SHA-256&quot;, new TextEncoder().encode(key)); // apply digest() from WebCrypto\r\n    }\r\n      \r\n    await decryptPass();\r\n    })();\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nthat, with these changes, successfully decrypts the ciphertext generated by the Kotlin code.","title":"Encrypt in Kotlin, How do I decrypt this using crypto in Angular app?","body":"<p>Well, it's not that hard to post consistent test data that can be used to test the JavaScript code. With the following passphrase and plaintext:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val secretKey = &quot;MYAPP11948-Sep022023145358&quot;\nval plaintext = &quot;8d818916-2cd3-4d72-aa7a-5c73783ba16a&quot;;\n</code></pre>\n<p>and the nonce from the ciphertext you posted:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val IV = Base64.decode(&quot;a4b67Rufd5nODsjg&quot;, Base64.NO_WRAP) // 0x6b86faed1b9f7799ce0ec8e0, 12 bytes\n</code></pre>\n<p>the shared Kotlin code produces the following Base64 encoded ciphertext:</p>\n<pre class=\"lang-none prettyprint-override\"><code>a4b67Rufd5nODsjgDxCP59gxvmy1RfXoLs+A9hLe/6IsAA1OcvtPil0YGFqo2zvYWtZX+xq3B9vNDbVotLZuqw==\n</code></pre>\n<p>As already described in the comments, the hashing can be done with WebCrypto, so that the <em>forge</em> library is not needed. Also, as in the Kotlin code, a 32 bytes key must be applied (i.e. AES-256). This changes your code to:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>(async () =&gt; {\nasync function decryptPass() {\n    \n    let secretKey = \"MYAPP11948-Sep022023145358\"\n    const encryted = 'a4b67Rufd5nODsjgDxCP59gxvmy1RfXoLs+A9hLe/6IsAA1OcvtPil0YGFqo2zvYWtZX+xq3B9vNDbVotLZuqw=='\n    const secretKeyBytes = await generateKey(secretKey);\n\n    const keyBuffer = await window.crypto.subtle.importKey(\n        'raw',\n        secretKeyBytes, {\n            name: 'AES-GCM',\n            length: 256 // Fix key size\n        },\n        false,\n        ['decrypt']\n    )\n\n    const encryptedString = atob(encryted)\n\n    const byteArray = new Uint8Array(encryptedString.length);\n\n    for (let i = 0; i &lt; encryptedString.length; i++) {\n        byteArray[i] = encryptedString.charCodeAt(i);\n    }\n\n    const ivBytes = byteArray.slice(0, 12);\n    const encryptedBytes = byteArray.slice(12);\n\n    const cleartext = await crypto.subtle.decrypt({\n        name: 'AES-GCM',\n        \"iv\": ivBytes,\n    }, keyBuffer, encryptedBytes);\n\n    console.log(new TextDecoder().decode(cleartext)) // Expected output: 8d818916-2cd3-4d72-aa7a-5c73783ba16a\n}\n\nasync function generateKey(key) {\n    return await window.crypto.subtle.digest(\"SHA-256\", new TextEncoder().encode(key)); // apply digest() from WebCrypto\n}\n  \nawait decryptPass();\n})();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>that, with these changes, successfully decrypts the ciphertext generated by the Kotlin code.</p>\n"}],"owner":{"account_id":19707288,"reputation":75,"user_id":14428656,"display_name":"Aj James"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1695817373,"creation_date":1695722495,"question_id":77178948,"body_markdown":"I am new at encrypting &amp; decrpyting aspect of coding. I am trying to decrypt the string outputted from Kotlin using crypto (AES-GCM) on my Angular app (Typescript). But the outputted string is wrong. Can anyone help me fix this?\r\n\r\nHere&#39;s how the string encrypted.\r\n\r\n**Kotlin:**\r\n```\r\nimport android.util.Base64\r\nimport java.io.IOException\r\nimport java.security.*\r\nimport java.security.spec.AlgorithmParameterSpec\r\nimport javax.crypto.BadPaddingException\r\nimport javax.crypto.Cipher\r\nimport javax.crypto.IllegalBlockSizeException\r\nimport javax.crypto.NoSuchPaddingException\r\nimport javax.crypto.spec.GCMParameterSpec\r\nimport javax.crypto.spec.IvParameterSpec\r\nimport javax.crypto.spec.SecretKeySpec\r\n\r\nclass EncryptionUtils {\r\n    companion object {\r\n        private const val CHARACTER_ENCODING = &quot;UTF-8&quot;\r\n        private const val CIPHER_TRANSFORMATION = &quot;AES/GCM/NoPadding&quot;\r\n        private const val AES_ENCRYPTION_ALGORITHM = &quot;AES&quot;\r\n        private const val GCM_NONCE_LENGTH = 12\r\n        private const val GCM_TAG_LENGTH = 128\r\n\r\n        fun encrypt(plain: String, key: String): String {\r\n            val encryptedBytes = encrypt(plain.toByteArray(Charsets.UTF_8), key)\r\n            return Base64.encodeToString(encryptedBytes, Base64.DEFAULT)\r\n        }\r\n\r\n        fun encrypt(message: ByteArray, key: String): ByteArray {\r\n            val keyBytes = generateKey(key)\r\n            val ivBytes = generateRandomIV(GCM_NONCE_LENGTH)\r\n\r\n            val cipher = Cipher.getInstance(CIPHER_TRANSFORMATION)\r\n            val secretKey = SecretKeySpec(keyBytes, AES_ENCRYPTION_ALGORITHM)\r\n            val gcmParameterSpec = GCMParameterSpec(GCM_TAG_LENGTH, ivBytes)\r\n\r\n            cipher.init(Cipher.ENCRYPT_MODE, secretKey, gcmParameterSpec)\r\n            val encrypted = cipher.doFinal(message)\r\n\r\n            val result = ByteArray(ivBytes.size + encrypted.size)\r\n            System.arraycopy(ivBytes, 0, result, 0, ivBytes.size)\r\n            System.arraycopy(encrypted, 0, result, ivBytes.size, encrypted.size)\r\n\r\n            return result\r\n        }\r\n\r\n        private fun generateKey(key: String): ByteArray {\r\n            val keyBytes = key.toByteArray(Charsets.UTF_8)\r\n            val md = MessageDigest.getInstance(&quot;SHA-256&quot;)\r\n            md.update(keyBytes)\r\n            return md.digest()\r\n        }\r\n\r\n        private fun generateRandomIV(length: Int): ByteArray {\r\n            val ivBytes = ByteArray(length)\r\n            val random = SecureRandom()\r\n            random.nextBytes(ivBytes)\r\n            return ivBytes\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```\r\nprivate suspend fun sendErrorReportPostRequest(token: String, errorReport: ErrorReport): Boolean = withContext(Dispatchers.IO) {\r\n        return@withContext try {\r\n            val encryption = EncryptionUtils.Companion\r\n            val key = &quot;MYAPP${errorReport.file.nameWithoutExtension}&quot;\r\n            val api = ApiUploadDatabasePostRequest(\r\n                s3Link = errorReport.file.name,\r\n                password = encryption.encrypt(&quot;some-password&quot;  ?: &quot;&quot;, key),\r\n            )\r\n            result.isSuccess\r\n        } catch (e: IOException) {\r\n            Timber.e(e)\r\n            false\r\n        }\r\n    }\r\n```\r\nSample output data from Kotlin:\r\n```\r\nsalt = &quot;MYAPP&quot;\r\nsecretKey = &quot;MYAPP11948-Sep022023145358&quot;\r\nencryted = &#39;a4b67Rufd5nODsjgdWllLlgxVJQewy+nLNZxlDM57JxA7NJvwv5Sfb26qYtkYY0JZF3iNaMuN6RBFANEXHE44w==&#39;\r\n```\r\nHere&#39;s how I try to decrypt:\r\n\r\n**Angular App (Typescript):**\r\n```\r\nasync decryptPass() {\r\n    \r\n    let secretKey = &quot;MYAPP11948-Sep022023145358&quot;\r\n    const encryted = &#39;a4b67Rufd5nODsjgdWllLlgxVJQewy+nLNZxlDM57JxA7NJvwv5Sfb26qYtkYY0JZF3iNaMuN6RBFANEXHE44w==&#39;\r\n    const secretKeyBytes = this.generateKey(secretKey);\r\n\r\n    const keyBuffer = await window.crypto.subtle.importKey(\r\n      &#39;raw&#39;,\r\n      secretKeyBytes, {\r\n        name: &#39;AES-GCM&#39;,\r\n        length: 128\r\n      },\r\n      false,\r\n      [&#39;decrypt&#39;]\r\n    )\r\n\r\n    const encryptedString = atob(encryted)\r\n\r\n    const byteArray = new Uint8Array(encryptedString.length);\r\n\r\n    for (let i = 0; i &lt; encryptedString.length; i++) {\r\n      byteArray[i] = encryptedString.charCodeAt(i);\r\n    }\r\n\r\n    const ivBytes = byteArray.slice(0, 12);\r\n    const encryptedBytes = byteArray.slice(12);\r\n\r\n    const cleartext = await crypto.subtle.decrypt({\r\n        name: &#39;AES-GCM&#39;,\r\n        &quot;iv&quot;: ivBytes,\r\n    }, keyBuffer, encryptedBytes);\r\n\r\n    console.log(new TextDecoder().decode(cleartext))\r\n    // Expected output: 8d818916-2cd3-4d72-aa7a-5c73783ba16a\r\n  }\r\n\r\ngenerateKey(key: string) {\r\n    const textEncoder = new TextEncoder();\r\n    const byteArray = textEncoder.encode(key);\r\n    \r\n    let md = forge.md.sha256.create();\r\n    md.update(byteArray);\r\n    \r\n    return md.digest()\r\n  }\r\n```\r\nThis shows an error ```TypeError: Key data must be a BufferSource for non-JWK formats```. Can somebody help and enlighten me about this decrypting? Thank you in advance!","title":"Encrypt in Kotlin, How do I decrypt this using crypto in Angular app?","body":"<p>I am new at encrypting &amp; decrpyting aspect of coding. I am trying to decrypt the string outputted from Kotlin using crypto (AES-GCM) on my Angular app (Typescript). But the outputted string is wrong. Can anyone help me fix this?</p>\n<p>Here's how the string encrypted.</p>\n<p><strong>Kotlin:</strong></p>\n<pre><code>import android.util.Base64\nimport java.io.IOException\nimport java.security.*\nimport java.security.spec.AlgorithmParameterSpec\nimport javax.crypto.BadPaddingException\nimport javax.crypto.Cipher\nimport javax.crypto.IllegalBlockSizeException\nimport javax.crypto.NoSuchPaddingException\nimport javax.crypto.spec.GCMParameterSpec\nimport javax.crypto.spec.IvParameterSpec\nimport javax.crypto.spec.SecretKeySpec\n\nclass EncryptionUtils {\n    companion object {\n        private const val CHARACTER_ENCODING = &quot;UTF-8&quot;\n        private const val CIPHER_TRANSFORMATION = &quot;AES/GCM/NoPadding&quot;\n        private const val AES_ENCRYPTION_ALGORITHM = &quot;AES&quot;\n        private const val GCM_NONCE_LENGTH = 12\n        private const val GCM_TAG_LENGTH = 128\n\n        fun encrypt(plain: String, key: String): String {\n            val encryptedBytes = encrypt(plain.toByteArray(Charsets.UTF_8), key)\n            return Base64.encodeToString(encryptedBytes, Base64.DEFAULT)\n        }\n\n        fun encrypt(message: ByteArray, key: String): ByteArray {\n            val keyBytes = generateKey(key)\n            val ivBytes = generateRandomIV(GCM_NONCE_LENGTH)\n\n            val cipher = Cipher.getInstance(CIPHER_TRANSFORMATION)\n            val secretKey = SecretKeySpec(keyBytes, AES_ENCRYPTION_ALGORITHM)\n            val gcmParameterSpec = GCMParameterSpec(GCM_TAG_LENGTH, ivBytes)\n\n            cipher.init(Cipher.ENCRYPT_MODE, secretKey, gcmParameterSpec)\n            val encrypted = cipher.doFinal(message)\n\n            val result = ByteArray(ivBytes.size + encrypted.size)\n            System.arraycopy(ivBytes, 0, result, 0, ivBytes.size)\n            System.arraycopy(encrypted, 0, result, ivBytes.size, encrypted.size)\n\n            return result\n        }\n\n        private fun generateKey(key: String): ByteArray {\n            val keyBytes = key.toByteArray(Charsets.UTF_8)\n            val md = MessageDigest.getInstance(&quot;SHA-256&quot;)\n            md.update(keyBytes)\n            return md.digest()\n        }\n\n        private fun generateRandomIV(length: Int): ByteArray {\n            val ivBytes = ByteArray(length)\n            val random = SecureRandom()\n            random.nextBytes(ivBytes)\n            return ivBytes\n        }\n    }\n}\n</code></pre>\n<pre><code>private suspend fun sendErrorReportPostRequest(token: String, errorReport: ErrorReport): Boolean = withContext(Dispatchers.IO) {\n        return@withContext try {\n            val encryption = EncryptionUtils.Companion\n            val key = &quot;MYAPP${errorReport.file.nameWithoutExtension}&quot;\n            val api = ApiUploadDatabasePostRequest(\n                s3Link = errorReport.file.name,\n                password = encryption.encrypt(&quot;some-password&quot;  ?: &quot;&quot;, key),\n            )\n            result.isSuccess\n        } catch (e: IOException) {\n            Timber.e(e)\n            false\n        }\n    }\n</code></pre>\n<p>Sample output data from Kotlin:</p>\n<pre><code>salt = &quot;MYAPP&quot;\nsecretKey = &quot;MYAPP11948-Sep022023145358&quot;\nencryted = 'a4b67Rufd5nODsjgdWllLlgxVJQewy+nLNZxlDM57JxA7NJvwv5Sfb26qYtkYY0JZF3iNaMuN6RBFANEXHE44w=='\n</code></pre>\n<p>Here's how I try to decrypt:</p>\n<p><strong>Angular App (Typescript):</strong></p>\n<pre><code>async decryptPass() {\n    \n    let secretKey = &quot;MYAPP11948-Sep022023145358&quot;\n    const encryted = 'a4b67Rufd5nODsjgdWllLlgxVJQewy+nLNZxlDM57JxA7NJvwv5Sfb26qYtkYY0JZF3iNaMuN6RBFANEXHE44w=='\n    const secretKeyBytes = this.generateKey(secretKey);\n\n    const keyBuffer = await window.crypto.subtle.importKey(\n      'raw',\n      secretKeyBytes, {\n        name: 'AES-GCM',\n        length: 128\n      },\n      false,\n      ['decrypt']\n    )\n\n    const encryptedString = atob(encryted)\n\n    const byteArray = new Uint8Array(encryptedString.length);\n\n    for (let i = 0; i &lt; encryptedString.length; i++) {\n      byteArray[i] = encryptedString.charCodeAt(i);\n    }\n\n    const ivBytes = byteArray.slice(0, 12);\n    const encryptedBytes = byteArray.slice(12);\n\n    const cleartext = await crypto.subtle.decrypt({\n        name: 'AES-GCM',\n        &quot;iv&quot;: ivBytes,\n    }, keyBuffer, encryptedBytes);\n\n    console.log(new TextDecoder().decode(cleartext))\n    // Expected output: 8d818916-2cd3-4d72-aa7a-5c73783ba16a\n  }\n\ngenerateKey(key: string) {\n    const textEncoder = new TextEncoder();\n    const byteArray = textEncoder.encode(key);\n    \n    let md = forge.md.sha256.create();\n    md.update(byteArray);\n    \n    return md.digest()\n  }\n</code></pre>\n<p>This shows an error <code>TypeError: Key data must be a BufferSource for non-JWK formats</code>. Can somebody help and enlighten me about this decrypting? Thank you in advance!</p>\n"},{"tags":["java","runtime","classpath","compile-time"],"answers":[{"tags":[],"owner":{"account_id":19061,"reputation":185736,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1290640358,"creation_date":1290628882,"answer_id":4270985,"question_id":4270950,"body_markdown":"The compiler needs the right classpath in order to compile calls to a library (compile time dependencies)\r\n\r\nThe JVM needs the right classpath in order to load the classes in the library you are calling (runtime dependencies).\r\n\r\nThey may be different in a couple of ways:\r\n\r\n1) if your class C1 calls library class L1, and L1 calls library class L2, then C1 has a runtime dependency on L1 and L2, but only a compile time dependency on L1.\r\n\r\n2) if your class C1 dynamically instantiates an interface I1 using Class.forName() or some other mechanism, and the implementing class for interface I1 is class L1, then C1 has a runtime dependency on I1 and L1, but only a compile time dependency on I1.\r\n\r\nOther &quot;indirect&quot; dependencies which are the same for compile-time and run-time:\r\n\r\n3) your class C1 extends library class L1, and L1 implements interface I1 and extends library class L2: C1 has a compile-time dependency on L1, L2, and I1.\r\n\r\n4) your class C1 has a method `foo(I1 i1)` and a method `bar(L1 l1)` where I1 is an interface and L1 is a class that takes a parameter which is interface I1: C1 has a compile-time dependency on I1 and L1.\r\n\r\n**Basically, to do anything interesting, your class needs to interface with other classes and interfaces in the classpath. The class/interface graph formed by that set of library *interfaces* yields the compile-time dependency chain. The library *implementations* yield the run-time dependency chain.** Note that the run-time dependency chain is run-time dependent or fail-slow: if the implementation of L1 sometimes depends on instantiating an object of class L2, and that class only gets instantiated in one particular scenario, then there&#39;s no dependency except in that scenario.\r\n","title":"Compile time vs Run time Dependency - Java","body":"<p>The compiler needs the right classpath in order to compile calls to a library (compile time dependencies)</p>\n\n<p>The JVM needs the right classpath in order to load the classes in the library you are calling (runtime dependencies).</p>\n\n<p>They may be different in a couple of ways:</p>\n\n<p>1) if your class C1 calls library class L1, and L1 calls library class L2, then C1 has a runtime dependency on L1 and L2, but only a compile time dependency on L1.</p>\n\n<p>2) if your class C1 dynamically instantiates an interface I1 using Class.forName() or some other mechanism, and the implementing class for interface I1 is class L1, then C1 has a runtime dependency on I1 and L1, but only a compile time dependency on I1.</p>\n\n<p>Other \"indirect\" dependencies which are the same for compile-time and run-time:</p>\n\n<p>3) your class C1 extends library class L1, and L1 implements interface I1 and extends library class L2: C1 has a compile-time dependency on L1, L2, and I1.</p>\n\n<p>4) your class C1 has a method <code>foo(I1 i1)</code> and a method <code>bar(L1 l1)</code> where I1 is an interface and L1 is a class that takes a parameter which is interface I1: C1 has a compile-time dependency on I1 and L1.</p>\n\n<p><strong>Basically, to do anything interesting, your class needs to interface with other classes and interfaces in the classpath. The class/interface graph formed by that set of library <em>interfaces</em> yields the compile-time dependency chain. The library <em>implementations</em> yield the run-time dependency chain.</strong> Note that the run-time dependency chain is run-time dependent or fail-slow: if the implementation of L1 sometimes depends on instantiating an object of class L2, and that class only gets instantiated in one particular scenario, then there's no dependency except in that scenario.</p>\n"},{"tags":[],"owner":{"account_id":208094,"reputation":6180,"user_id":458368,"accept_rate":64,"display_name":"JOTN"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1290628926,"creation_date":1290628926,"answer_id":4270989,"question_id":4270950,"body_markdown":"Java doesn&#39;t actually link anything at compile time.  It only verifies the syntax using the matching classes it finds in the CLASSPATH.  It&#39;s not until runtime that everything gets put together and executed based on the CLASSPATH at that time.","title":"Compile time vs Run time Dependency - Java","body":"<p>Java doesn't actually link anything at compile time.  It only verifies the syntax using the matching classes it finds in the CLASSPATH.  It's not until runtime that everything gets put together and executed based on the CLASSPATH at that time.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1290629004,"creation_date":1290629004,"answer_id":4270997,"question_id":4270950,"body_markdown":"Compiletime dependencies are only the dependencies (other classes) which you use *directly* in the class you&#39;re compiling. Runtime dependencies covers both the direct and indirect dependencies of the class you&#39;re running. Thus, runtime dependencies includes dependencies of dependencies and any reflection dependencies like classnames which you have in a `String`, but are used in `Class#forName()`.","title":"Compile time vs Run time Dependency - Java","body":"<p>Compiletime dependencies are only the dependencies (other classes) which you use <em>directly</em> in the class you're compiling. Runtime dependencies covers both the direct and indirect dependencies of the class you're running. Thus, runtime dependencies includes dependencies of dependencies and any reflection dependencies like classnames which you have in a <code>String</code>, but are used in <code>Class#forName()</code>.</p>\n"},{"tags":[],"owner":{"account_id":195025,"reputation":13170,"user_id":437679,"accept_rate":63,"display_name":"Martin Algesten"},"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1434398878,"creation_date":1290629088,"answer_id":4271013,"question_id":4270950,"body_markdown":"An easy example is to look at an api like the servlet api. To make your servlets compile, you need the servlet-api.jar, but at runtime the servlet container provides a servlet api implementation so you do not need to add servlet-api.jar to your runtime class path.\r\n","title":"Compile time vs Run time Dependency - Java","body":"<p>An easy example is to look at an api like the servlet api. To make your servlets compile, you need the servlet-api.jar, but at runtime the servlet container provides a servlet api implementation so you do not need to add servlet-api.jar to your runtime class path.</p>\n"},{"tags":[],"owner":{"account_id":43980,"reputation":22154,"user_id":128812,"display_name":"gpeche"},"down_vote_count":0,"up_vote_count":108,"is_accepted":false,"score":108,"last_activity_date":1368729363,"creation_date":1290640540,"answer_id":4272424,"question_id":4270950,"body_markdown":"* **Compile-time dependency**: You need the dependency in your `CLASSPATH` to compile your artifact. They are produced because you have some kind of &quot;reference&quot; to the dependency hardcoded in your code, such as calling `new` for some class, extending or implementing something (either directly or indirectly), or a method call using the direct `reference.method()` notation.\r\n\r\n* **Run-time dependency**: You need the dependency in your `CLASSPATH` to run your artifact. They are produced because you execute code that accesses the dependency (either in a hardcoded way or via reflection or whatever).\r\n\r\nAlthough compile-time dependency usually implies run-time dependency, you can have a compile-time only dependency. This is based on the fact that Java only links class dependencies on first access to that class, so if you never access a particular class at run-time because a code path is never traversed, Java will ignore both the class and its dependencies.\r\n\r\nExample of this\r\n\r\nIn C.java (generates C.class):\r\n\r\n    package dependencies;\r\n    public class C { }\r\n\r\nIn A.java (generates A.class):\r\n\r\n    package dependencies;\r\n    public class A {\r\n        public static class B {\r\n            public String toString() {\r\n                C c = new C();\r\n                return c.toString();\r\n            }\r\n        }\r\n        public static void main(String[] args) {\r\n            if (args.length &gt; 0) {\r\n                B b = new B();\r\n                System.out.println(b.toString());\r\n            }\r\n        }\r\n    }\r\n\r\nIn this case, `A` has a compile-time dependency on `C` through `B`, but it will only have a run-time dependency on C if you pass some parameters when executing `java dependencies.A`, as the JVM will only try to solve `B`&#39;s dependency on `C` when it gets to execute `B b = new B()`. This feature allows you to provide at runtime only the dependencies of the classes that you use in your code paths, and ignore the dependencies of the rest of the classes in the artifact.","title":"Compile time vs Run time Dependency - Java","body":"<ul>\n<li><p><strong>Compile-time dependency</strong>: You need the dependency in your <code>CLASSPATH</code> to compile your artifact. They are produced because you have some kind of \"reference\" to the dependency hardcoded in your code, such as calling <code>new</code> for some class, extending or implementing something (either directly or indirectly), or a method call using the direct <code>reference.method()</code> notation.</p></li>\n<li><p><strong>Run-time dependency</strong>: You need the dependency in your <code>CLASSPATH</code> to run your artifact. They are produced because you execute code that accesses the dependency (either in a hardcoded way or via reflection or whatever).</p></li>\n</ul>\n\n<p>Although compile-time dependency usually implies run-time dependency, you can have a compile-time only dependency. This is based on the fact that Java only links class dependencies on first access to that class, so if you never access a particular class at run-time because a code path is never traversed, Java will ignore both the class and its dependencies.</p>\n\n<p>Example of this</p>\n\n<p>In C.java (generates C.class):</p>\n\n<pre><code>package dependencies;\npublic class C { }\n</code></pre>\n\n<p>In A.java (generates A.class):</p>\n\n<pre><code>package dependencies;\npublic class A {\n    public static class B {\n        public String toString() {\n            C c = new C();\n            return c.toString();\n        }\n    }\n    public static void main(String[] args) {\n        if (args.length &gt; 0) {\n            B b = new B();\n            System.out.println(b.toString());\n        }\n    }\n}\n</code></pre>\n\n<p>In this case, <code>A</code> has a compile-time dependency on <code>C</code> through <code>B</code>, but it will only have a run-time dependency on C if you pass some parameters when executing <code>java dependencies.A</code>, as the JVM will only try to solve <code>B</code>'s dependency on <code>C</code> when it gets to execute <code>B b = new B()</code>. This feature allows you to provide at runtime only the dependencies of the classes that you use in your code paths, and ignore the dependencies of the rest of the classes in the artifact.</p>\n"},{"tags":[],"owner":{"account_id":1479215,"reputation":2511,"user_id":1388943,"accept_rate":48,"display_name":"stdout"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1454400491,"creation_date":1454329028,"answer_id":35130324,"question_id":4270950,"body_markdown":"For Java, compile time dependency is your source code&#39;s dependency. For instance, if class A calls a method from class B, then A is dependent to B at the compile time since A has to know about B (type of B) to be compiled. The trick here should be this: Compiled code is not a complete and executable code yet. It includes replaceable addresses (symbols, metadata) for the sources which are not yet compiled or existing in external jars. During linking, those addresses must be replaced by actual adresses in the memory. To do it properly, correct symbols/adresses should be created. And this can be done with the type of the class (B). I believe that&#39;s the main dependency at the compile time.\r\n\r\nRuntime dependency is more related with the actual flow-of-control. It involes actual memory addresses. It&#39;s a dependency that you have when your program is running. You need class B details here like implementations, not only the type info. If the class not exists, then you will get RuntimeException and JVM will exit.\r\n\r\n\r\nBoth dependencies, generally and shouldn&#39;t, flow the same direction. This is a matter of OO design though.\r\n\r\n\r\nIn C++, compilation is a bit different (not just-in-time) but it has a linker too. So the process might be thought similar to Java I guess.","title":"Compile time vs Run time Dependency - Java","body":"<p>For Java, compile time dependency is your source code's dependency. For instance, if class A calls a method from class B, then A is dependent to B at the compile time since A has to know about B (type of B) to be compiled. The trick here should be this: Compiled code is not a complete and executable code yet. It includes replaceable addresses (symbols, metadata) for the sources which are not yet compiled or existing in external jars. During linking, those addresses must be replaced by actual adresses in the memory. To do it properly, correct symbols/adresses should be created. And this can be done with the type of the class (B). I believe that's the main dependency at the compile time.</p>\n\n<p>Runtime dependency is more related with the actual flow-of-control. It involes actual memory addresses. It's a dependency that you have when your program is running. You need class B details here like implementations, not only the type info. If the class not exists, then you will get RuntimeException and JVM will exit.</p>\n\n<p>Both dependencies, generally and shouldn't, flow the same direction. This is a matter of OO design though.</p>\n\n<p>In C++, compilation is a bit different (not just-in-time) but it has a linker too. So the process might be thought similar to Java I guess.</p>\n"},{"tags":[],"owner":{"account_id":4682052,"reputation":1016,"user_id":3790512,"accept_rate":64,"display_name":"ThCollignon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633358156,"creation_date":1633358156,"answer_id":69437830,"question_id":4270950,"body_markdown":"From @Jason S answer I derive mine with other words, in case it helps:\r\n\r\nA **runtime dependency** of an app is actually a dependency (let&#39;s call it L2) of a compile-time dependency (L1) of this app. It may not be declared as a dependency if it won&#39;t be used by the app. \r\n\r\n - If L2 happens to be used by the app (through L1) while not declared as a dependency, there will be a NoClassDefFoundError. \r\n\r\n - If L2 is declared as a compile-time dependency of the app, and not used at runtime, it uselessly makes the jar larger and compile-time longer than needed.\r\n\r\nDeclaring L2 as a runtime dependency allows the JVM to lazy-load it, only when needed.","title":"Compile time vs Run time Dependency - Java","body":"<p>From @Jason S answer I derive mine with other words, in case it helps:</p>\n<p>A <strong>runtime dependency</strong> of an app is actually a dependency (let's call it L2) of a compile-time dependency (L1) of this app. It may not be declared as a dependency if it won't be used by the app.</p>\n<ul>\n<li><p>If L2 happens to be used by the app (through L1) while not declared as a dependency, there will be a NoClassDefFoundError.</p>\n</li>\n<li><p>If L2 is declared as a compile-time dependency of the app, and not used at runtime, it uselessly makes the jar larger and compile-time longer than needed.</p>\n</li>\n</ul>\n<p>Declaring L2 as a runtime dependency allows the JVM to lazy-load it, only when needed.</p>\n"},{"tags":[],"owner":{"account_id":23195966,"reputation":1,"user_id":17291602,"display_name":"ibrahim Bayburtlu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695816872,"creation_date":1695816872,"answer_id":77187412,"question_id":4270950,"body_markdown":"**Compile Time**\r\n\r\nCompile time is the stage where the Java source code is compiled. In this phase, Java source code is written and then compiled by a Java compiler (javac). During compilation, your code is checked and the presence of errors is detected. If your code has compilation errors, the compiler will notify you of the errors and you will need to fix these errors before running your code.\r\n\r\nErrors during compilation can help you better understand your code. Because these errors indicate misused variables, missing or extra parentheses, incorrect type conversions, and other potential coding errors. This makes your code better documented and easier to edit.\r\n\r\nCompile time is also the stage where your code is translated into byte code. Bytecode is assembled into a format that can be executed by the Java Virtual Machine (JVM). Once the compilation process is complete, your code is ready to run.\r\n\r\nThis stage, in a way, is an indication that Java is a compiled language, because what is done at this stage is the process of converting the code into byte code.\r\n\r\n**Run Time**\r\n\r\nRun time refers to the moment when your Java program runs. When you run your Java programs, your code is executed by the JVM. At this stage, your code is implemented and results are produced.\r\n\r\nIt is also possible for errors to occur during run time. However, these types of errors are different from errors in compile time. Compile time errors are detected during the compilation of your code, while run time errors occur only when your program is executed. Run time errors may occur due to incorrect user input or exceeding memory limits.\r\n\r\nDuring the run time phase, our byte codes are run. Our run codes are an indication that Java is an interpreted language. In interpreted languages, the code is read line by line or according to special expressions, and there is no need to compile it beforehand.\r\n\r\nJava is a programming language that is both compiled and interpreted.","title":"Compile time vs Run time Dependency - Java","body":"<p><strong>Compile Time</strong></p>\n<p>Compile time is the stage where the Java source code is compiled. In this phase, Java source code is written and then compiled by a Java compiler (javac). During compilation, your code is checked and the presence of errors is detected. If your code has compilation errors, the compiler will notify you of the errors and you will need to fix these errors before running your code.</p>\n<p>Errors during compilation can help you better understand your code. Because these errors indicate misused variables, missing or extra parentheses, incorrect type conversions, and other potential coding errors. This makes your code better documented and easier to edit.</p>\n<p>Compile time is also the stage where your code is translated into byte code. Bytecode is assembled into a format that can be executed by the Java Virtual Machine (JVM). Once the compilation process is complete, your code is ready to run.</p>\n<p>This stage, in a way, is an indication that Java is a compiled language, because what is done at this stage is the process of converting the code into byte code.</p>\n<p><strong>Run Time</strong></p>\n<p>Run time refers to the moment when your Java program runs. When you run your Java programs, your code is executed by the JVM. At this stage, your code is implemented and results are produced.</p>\n<p>It is also possible for errors to occur during run time. However, these types of errors are different from errors in compile time. Compile time errors are detected during the compilation of your code, while run time errors occur only when your program is executed. Run time errors may occur due to incorrect user input or exceeding memory limits.</p>\n<p>During the run time phase, our byte codes are run. Our run codes are an indication that Java is an interpreted language. In interpreted languages, the code is read line by line or according to special expressions, and there is no need to compile it beforehand.</p>\n<p>Java is a programming language that is both compiled and interpreted.</p>\n"}],"owner":{"account_id":213837,"reputation":2939,"user_id":467444,"accept_rate":27,"display_name":"Kunal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77832,"favorite_count":0,"down_vote_count":0,"up_vote_count":126,"answer_count":8,"score":126,"last_activity_date":1695816872,"creation_date":1290628634,"question_id":4270950,"body_markdown":"What is the difference between compile time and run time dependencies in Java?\r\nIt is related to class path, but how do they differ?","title":"Compile time vs Run time Dependency - Java","body":"<p>What is the difference between compile time and run time dependencies in Java?\nIt is related to class path, but how do they differ?</p>\n"},{"tags":["java","android","viewmodel","viewmodelproviders"],"comments":[{"owner":{"account_id":3366602,"reputation":611,"user_id":2827025,"display_name":"anemomylos"},"score":1,"creation_date":1695213781,"post_id":77142336,"comment_id":135993906,"body_markdown":"Usually such problems can be attributed to obfuscation of the code by `proguard`. From the code you shared, it&#39;s not clear why proguard can&#39;t handle the class name change correctly. Are you sure you are not using somewhere in the code the class name as a string instead of `MyClass.class`? In any case, just edit the `proguard-rules.pro` file to add the class you want to keep, for example, `-keep class my.package.MyClass`.","body":"Usually such problems can be attributed to obfuscation of the code by <code>proguard</code>. From the code you shared, it&#39;s not clear why proguard can&#39;t handle the class name change correctly. Are you sure you are not using somewhere in the code the class name as a string instead of <code>MyClass.class</code>? In any case, just edit the <code>proguard-rules.pro</code> file to add the class you want to keep, for example, <code>-keep class my.package.MyClass</code>."},{"owner":{"account_id":8927381,"reputation":173,"user_id":6661228,"display_name":"Thiago Souza"},"score":0,"creation_date":1695225820,"post_id":77142336,"comment_id":135997029,"body_markdown":"@anemomylos I&#39;ve added all my viewmodel classes to proguard with the &quot;-keep class&quot; but the error continues, and I dont use my class name as a string, i&#39;ve checked everywhere.\nFor now I can have the proguard disabled at least","body":"@anemomylos I&#39;ve added all my viewmodel classes to proguard with the &quot;-keep class&quot; but the error continues, and I dont use my class name as a string, i&#39;ve checked everywhere. For now I can have the proguard disabled at least"},{"owner":{"account_id":3366602,"reputation":611,"user_id":2827025,"display_name":"anemomylos"},"score":0,"creation_date":1695226484,"post_id":77142336,"comment_id":135997168,"body_markdown":"You could get a better answer by adding the code of the activity and the factory.","body":"You could get a better answer by adding the code of the activity and the factory."},{"owner":{"account_id":8927381,"reputation":173,"user_id":6661228,"display_name":"Thiago Souza"},"score":0,"creation_date":1695229888,"post_id":77142336,"comment_id":135997831,"body_markdown":"Files added to the answer","body":"Files added to the answer"}],"answers":[{"tags":[],"owner":{"account_id":26529686,"reputation":26,"user_id":20162083,"display_name":"Adel El-Hawary"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695816814,"creation_date":1695816794,"answer_id":77187398,"question_id":77142336,"body_markdown":"if you recently upgraded your AGP to 8.+\r\n\r\njust add this line to your gradle.properties file\r\n\r\n    android.enableR8.fullMode=false\r\n\r\n","title":"ViewModelProvider java.lang.ClassCastException when changing from debug to release variant","body":"<p>if you recently upgraded your AGP to 8.+</p>\n<p>just add this line to your gradle.properties file</p>\n<pre><code>android.enableR8.fullMode=false\n</code></pre>\n"}],"owner":{"account_id":8927381,"reputation":173,"user_id":6661228,"display_name":"Thiago Souza"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77187398,"answer_count":1,"score":0,"last_activity_date":1695816814,"creation_date":1695212195,"question_id":77142336,"body_markdown":"I&#39;m trying to build a application from my company but when I change the build variant to release (the variant only changes the project configuration files, like endpoints and credentials), I get this error:\r\n\r\n```\r\nFATAL EXCEPTION: main\r\nProcess: com.timo.ecocloud.paciente, PID: 15435\r\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.timo.ecocloud.paciente/com.timo.ecocloudpaciente.ui.login.LoginActivity}: java.lang.ClassCastException\r\n\tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3635)\r\n\tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)\r\n\tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\r\n\tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n\tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n\tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)\r\n\tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n\tat android.os.Looper.loopOnce(Looper.java:201)\r\n\tat android.os.Looper.loop(Looper.java:288)\r\n\tat android.app.ActivityThread.main(ActivityThread.java:7839)\r\n\tat java.lang.reflect.Method.invoke(Native Method)\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\r\nCaused by: java.lang.ClassCastException\r\n\tat android.support.v4.media.session.b.a(SourceFile:1)\r\n\tat j1.a.&lt;init&gt;(SourceFile:1)\r\n\tat com.timo.ecocloudpaciente.ui.login.f.a(SourceFile:1)\r\n\tat androidx.lifecycle.s.b(SourceFile:1)\r\n\tat androidx.lifecycle.s.a(SourceFile:1)\r\n\tat com.timo.ecocloudpaciente.ui.login.LoginActivity.onCreate(Unknown Source:68)\r\n\tat android.app.Activity.performCreate(Activity.java:8051)\r\n\tat android.app.Activity.performCreate(Activity.java:8031)\r\n\tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1329)\r\n\tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3608)\r\n\tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)&#160;\r\n\tat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)&#160;\r\n\tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n\tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n\tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)&#160;\r\n\tat android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n\tat android.os.Looper.loopOnce(Looper.java:201)&#160;\r\n\tat android.os.Looper.loop(Looper.java:288)&#160;\r\n\tat android.app.ActivityThread.main(ActivityThread.java:7839)&#160;\r\n\tat java.lang.reflect.Method.invoke(Native Method)&#160;\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)&#160;   \r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\r\n```\r\n\r\nThe piece of code which generates the error is this:\r\n```\r\nloginViewModel = ViewModelProviders.of(this, new LoginViewModelFactory())\r\n                .get(LoginViewModel.class);\r\n```\r\n\r\nI&#39;ve tried updating everything, even using the more updated version:\r\n```\r\nnew ViewModelProvider(this, new LoginViewModelFactory()).get(LoginViewModel.class);\r\n```\r\nBut nothing has worked so far, did anyone know how to solve this?\r\n\r\nEdit: viewmodel, viewmodelfactory codes below:\r\nIn the activity (the code that generates the error)\r\n```\r\nloginViewModel = ViewModelProviders.of(this, new LoginViewModelFactory())\r\n                .get(LoginViewModel.class);\r\n```\r\n\r\nLoginViewModel.java:\r\n```\r\npackage com.timo.ecocloudpaciente.ui.login;\r\n\r\nimport android.app.Activity;\r\nimport android.util.Log;\r\nimport android.util.Patterns;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.timo.ecocloudpaciente.data.LoginRepository;\r\nimport com.timo.ecocloudpaciente.R;\r\nimport com.timo.ecocloudpaciente.model.DefaultResponse;\r\nimport com.timo.ecocloudpaciente.model.DefaultResponseResult;\r\nimport com.timo.ecocloudpaciente.model.User;\r\n\r\npublic class LoginViewModel extends ViewModel {\r\n\r\n    private MutableLiveData&lt;LoginFormState&gt; loginFormState = new MutableLiveData&lt;&gt;();\r\n    private MutableLiveData&lt;RecoverFormState&gt; recoverFormState = new MutableLiveData&lt;&gt;();\r\n\r\n    private MutableLiveData&lt;LoginResult&gt; loginResult = new MutableLiveData&lt;&gt;();\r\n    private MutableLiveData&lt;DefaultResponseResult&gt; defaultResult = new MutableLiveData&lt;&gt;();\r\n    private LoginRepository loginRepository;\r\n\r\n    LoginViewModel(LoginRepository loginRepository) {\r\n        this.loginRepository = loginRepository;\r\n    }\r\n\r\n\r\n    /**\r\n     * Login\r\n     */\r\n\r\n    LiveData&lt;LoginFormState&gt; getLoginFormState() {\r\n        return loginFormState;\r\n    }\r\n\r\n    LiveData&lt;LoginResult&gt; getLoginResult() {\r\n        return loginResult;\r\n    }\r\n\r\n    public void login(String username, String password) {\r\n        // can be launched in a separate asynchronous job\r\n        loginRepository.login(username, password, this);\r\n    }\r\n\r\n    public void loginDataChanged(String username, String password) {\r\n        if (!isUserNameValid(username)) {\r\n            loginFormState.setValue(new LoginFormState(R.string.login_invalid_username, null));\r\n        } else if (!isPasswordValid(password)) {\r\n            loginFormState.setValue(new LoginFormState(null, R.string.login_invalid_password));\r\n        } else {\r\n            loginFormState.setValue(new LoginFormState(true));\r\n        }\r\n    }\r\n\r\n    // A placeholder username validation check\r\n    private boolean isUserNameValid(String username) {\r\n        return username != null &amp;&amp; !username.equals(&quot;&quot;);\r\n    }\r\n\r\n    // A placeholder password validation check\r\n    private boolean isPasswordValid(String password) {\r\n        return password != null &amp;&amp; password.trim().length() == 6;\r\n    }\r\n\r\n    /**\r\n     * Used for callback\r\n     */\r\n    public void onSuccess(User user) {\r\n        loginResult.setValue(new LoginResult(user));\r\n    }\r\n\r\n    public void onError(String message) {\r\n        loginResult.setValue(new LoginResult(message));\r\n    }\r\n\r\n    /**\r\n     * Recover password\r\n     */\r\n    LiveData&lt;RecoverFormState&gt; getRecoverFormState() {\r\n        return recoverFormState;\r\n    }\r\n\r\n    public void recoverDataChanged(String useremail) {\r\n\r\n        if (!isEmailValid(useremail)) {\r\n            recoverFormState.setValue(new RecoverFormState(R.string.recover_invalid_email));\r\n        }else {\r\n            recoverFormState.setValue(new RecoverFormState(true));\r\n        }\r\n    }\r\n\r\n    LiveData&lt;DefaultResponseResult&gt; getDefaultResult() {\r\n        return defaultResult;\r\n    }\r\n\r\n    public void recoverPwd(Activity activity, LoginViewModel loginViewModel, String email){\r\n        loginRepository.recoverPwd(activity, loginViewModel,  email);\r\n    }\r\n\r\n    private boolean isEmailValid(String email){\r\n        if (email == null || email.trim().isEmpty())\r\n           return false;\r\n\r\n        if (email.contains(&quot;@&quot;))\r\n            return Patterns.EMAIL_ADDRESS.matcher(email).matches();\r\n        else\r\n            return false;\r\n    }\r\n\r\n\r\n    /**\r\n     * Used for callback\r\n     */\r\n    public void defaultReturnOnSuccess(DefaultResponse defaultResponse) {\r\n        defaultResult.setValue(new DefaultResponseResult(defaultResponse, &quot;&quot;));\r\n    }\r\n\r\n    public void defaultReturnOnError(String message) {\r\n        defaultResult.setValue(new DefaultResponseResult(message));\r\n    }\r\n}\r\n```\r\n\r\nLoginViewModelFactory.java\r\n```\r\npackage com.timo.ecocloudpaciente.ui.login;\r\nimport androidx.lifecycle.ViewModel;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.annotation.NonNull;\r\n\r\nimport com.timo.ecocloudpaciente.data.LoginDataSource;\r\nimport com.timo.ecocloudpaciente.data.LoginRepository;\r\npublic class LoginViewModelFactory implements ViewModelProvider.Factory {\r\n    @NonNull\r\n    @Override\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {\r\n        if (modelClass.isAssignableFrom(LoginViewModel.class)) {\r\n            return (T) new LoginViewModel(LoginRepository.getInstance(new LoginDataSource()));\r\n        } else {\r\n            throw new IllegalArgumentException(&quot;Unknown ViewModel class&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"ViewModelProvider java.lang.ClassCastException when changing from debug to release variant","body":"<p>I'm trying to build a application from my company but when I change the build variant to release (the variant only changes the project configuration files, like endpoints and credentials), I get this error:</p>\n<pre><code>FATAL EXCEPTION: main\nProcess: com.timo.ecocloud.paciente, PID: 15435\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.timo.ecocloud.paciente/com.timo.ecocloudpaciente.ui.login.LoginActivity}: java.lang.ClassCastException\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3635)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)\n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loopOnce(Looper.java:201)\n    at android.os.Looper.loop(Looper.java:288)\n    at android.app.ActivityThread.main(ActivityThread.java:7839)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\nCaused by: java.lang.ClassCastException\n    at android.support.v4.media.session.b.a(SourceFile:1)\n    at j1.a.&lt;init&gt;(SourceFile:1)\n    at com.timo.ecocloudpaciente.ui.login.f.a(SourceFile:1)\n    at androidx.lifecycle.s.b(SourceFile:1)\n    at androidx.lifecycle.s.a(SourceFile:1)\n    at com.timo.ecocloudpaciente.ui.login.LoginActivity.onCreate(Unknown Source:68)\n    at android.app.Activity.performCreate(Activity.java:8051)\n    at android.app.Activity.performCreate(Activity.java:8031)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1329)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3608)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792) \n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103) \n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210) \n    at android.os.Handler.dispatchMessage(Handler.java:106) \n    at android.os.Looper.loopOnce(Looper.java:201) \n    at android.os.Looper.loop(Looper.java:288) \n    at android.app.ActivityThread.main(ActivityThread.java:7839) \n    at java.lang.reflect.Method.invoke(Native Method) \n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)    \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\n</code></pre>\n<p>The piece of code which generates the error is this:</p>\n<pre><code>loginViewModel = ViewModelProviders.of(this, new LoginViewModelFactory())\n                .get(LoginViewModel.class);\n</code></pre>\n<p>I've tried updating everything, even using the more updated version:</p>\n<pre><code>new ViewModelProvider(this, new LoginViewModelFactory()).get(LoginViewModel.class);\n</code></pre>\n<p>But nothing has worked so far, did anyone know how to solve this?</p>\n<p>Edit: viewmodel, viewmodelfactory codes below:\nIn the activity (the code that generates the error)</p>\n<pre><code>loginViewModel = ViewModelProviders.of(this, new LoginViewModelFactory())\n                .get(LoginViewModel.class);\n</code></pre>\n<p>LoginViewModel.java:</p>\n<pre><code>package com.timo.ecocloudpaciente.ui.login;\n\nimport android.app.Activity;\nimport android.util.Log;\nimport android.util.Patterns;\n\nimport androidx.lifecycle.LiveData;\nimport androidx.lifecycle.MutableLiveData;\nimport androidx.lifecycle.ViewModel;\n\nimport com.timo.ecocloudpaciente.data.LoginRepository;\nimport com.timo.ecocloudpaciente.R;\nimport com.timo.ecocloudpaciente.model.DefaultResponse;\nimport com.timo.ecocloudpaciente.model.DefaultResponseResult;\nimport com.timo.ecocloudpaciente.model.User;\n\npublic class LoginViewModel extends ViewModel {\n\n    private MutableLiveData&lt;LoginFormState&gt; loginFormState = new MutableLiveData&lt;&gt;();\n    private MutableLiveData&lt;RecoverFormState&gt; recoverFormState = new MutableLiveData&lt;&gt;();\n\n    private MutableLiveData&lt;LoginResult&gt; loginResult = new MutableLiveData&lt;&gt;();\n    private MutableLiveData&lt;DefaultResponseResult&gt; defaultResult = new MutableLiveData&lt;&gt;();\n    private LoginRepository loginRepository;\n\n    LoginViewModel(LoginRepository loginRepository) {\n        this.loginRepository = loginRepository;\n    }\n\n\n    /**\n     * Login\n     */\n\n    LiveData&lt;LoginFormState&gt; getLoginFormState() {\n        return loginFormState;\n    }\n\n    LiveData&lt;LoginResult&gt; getLoginResult() {\n        return loginResult;\n    }\n\n    public void login(String username, String password) {\n        // can be launched in a separate asynchronous job\n        loginRepository.login(username, password, this);\n    }\n\n    public void loginDataChanged(String username, String password) {\n        if (!isUserNameValid(username)) {\n            loginFormState.setValue(new LoginFormState(R.string.login_invalid_username, null));\n        } else if (!isPasswordValid(password)) {\n            loginFormState.setValue(new LoginFormState(null, R.string.login_invalid_password));\n        } else {\n            loginFormState.setValue(new LoginFormState(true));\n        }\n    }\n\n    // A placeholder username validation check\n    private boolean isUserNameValid(String username) {\n        return username != null &amp;&amp; !username.equals(&quot;&quot;);\n    }\n\n    // A placeholder password validation check\n    private boolean isPasswordValid(String password) {\n        return password != null &amp;&amp; password.trim().length() == 6;\n    }\n\n    /**\n     * Used for callback\n     */\n    public void onSuccess(User user) {\n        loginResult.setValue(new LoginResult(user));\n    }\n\n    public void onError(String message) {\n        loginResult.setValue(new LoginResult(message));\n    }\n\n    /**\n     * Recover password\n     */\n    LiveData&lt;RecoverFormState&gt; getRecoverFormState() {\n        return recoverFormState;\n    }\n\n    public void recoverDataChanged(String useremail) {\n\n        if (!isEmailValid(useremail)) {\n            recoverFormState.setValue(new RecoverFormState(R.string.recover_invalid_email));\n        }else {\n            recoverFormState.setValue(new RecoverFormState(true));\n        }\n    }\n\n    LiveData&lt;DefaultResponseResult&gt; getDefaultResult() {\n        return defaultResult;\n    }\n\n    public void recoverPwd(Activity activity, LoginViewModel loginViewModel, String email){\n        loginRepository.recoverPwd(activity, loginViewModel,  email);\n    }\n\n    private boolean isEmailValid(String email){\n        if (email == null || email.trim().isEmpty())\n           return false;\n\n        if (email.contains(&quot;@&quot;))\n            return Patterns.EMAIL_ADDRESS.matcher(email).matches();\n        else\n            return false;\n    }\n\n\n    /**\n     * Used for callback\n     */\n    public void defaultReturnOnSuccess(DefaultResponse defaultResponse) {\n        defaultResult.setValue(new DefaultResponseResult(defaultResponse, &quot;&quot;));\n    }\n\n    public void defaultReturnOnError(String message) {\n        defaultResult.setValue(new DefaultResponseResult(message));\n    }\n}\n</code></pre>\n<p>LoginViewModelFactory.java</p>\n<pre><code>package com.timo.ecocloudpaciente.ui.login;\nimport androidx.lifecycle.ViewModel;\nimport androidx.lifecycle.ViewModelProvider;\nimport androidx.annotation.NonNull;\n\nimport com.timo.ecocloudpaciente.data.LoginDataSource;\nimport com.timo.ecocloudpaciente.data.LoginRepository;\npublic class LoginViewModelFactory implements ViewModelProvider.Factory {\n    @NonNull\n    @Override\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {\n        if (modelClass.isAssignableFrom(LoginViewModel.class)) {\n            return (T) new LoginViewModel(LoginRepository.getInstance(new LoginDataSource()));\n        } else {\n            throw new IllegalArgumentException(&quot;Unknown ViewModel class&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3146547,"reputation":508,"user_id":2660928,"accept_rate":82,"display_name":"Marco"},"score":2,"creation_date":1405412487,"post_id":24753177,"comment_id":38404411,"body_markdown":"You could use String.split(&quot;.&quot;)","body":"You could use String.split(&quot;.&quot;)"},{"owner":{"account_id":1640947,"reputation":28880,"user_id":1513384,"accept_rate":96,"display_name":"ntalbs"},"score":0,"creation_date":1405412572,"post_id":24753177,"comment_id":38404452,"body_markdown":"What do you expect when the given number is `1.1`, `1.01`, `1.001`, etc?","body":"What do you expect when the given number is <code>1.1</code>, <code>1.01</code>, <code>1.001</code>, etc?"},{"owner":{"account_id":1417953,"reputation":45783,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"score":3,"creation_date":1405412651,"post_id":24753177,"comment_id":38404502,"body_markdown":"@Marco: You mean `String.split(&quot;\\\\.&quot;)`","body":"@Marco: You mean <code>String.split(&quot;\\\\.&quot;)</code>"},{"owner":{"account_id":2179398,"reputation":2049,"user_id":1929230,"accept_rate":91,"display_name":"Johnny Chen"},"score":0,"creation_date":1405412706,"post_id":24753177,"comment_id":38404538,"body_markdown":"@ntalbs there&#39;s no such numbers in my case .Just 0.x or 1.x or 0.xx or 1.xx and  xx &gt; 10","body":"@ntalbs there&#39;s no such numbers in my case .Just 0.x or 1.x or 0.xx or 1.xx and  xx &gt; 10"},{"owner":{"account_id":3146547,"reputation":508,"user_id":2660928,"accept_rate":82,"display_name":"Marco"},"score":0,"creation_date":1405413048,"post_id":24753177,"comment_id":38404753,"body_markdown":"@Keppil: You&#39;re right!","body":"@Keppil: You&#39;re right!"}],"answers":[{"tags":[],"owner":{"account_id":1417953,"reputation":45783,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1405412538,"creation_date":1405412538,"answer_id":24753258,"question_id":24753177,"body_markdown":"To get the decimal part as an `int` is not really following any standards, so you are stuck with your special solution for that. Getting the value before the decimal point can be simplified to a simple cast though:  \r\n\r\n    double d = 1.9;\r\n    int a, b;\r\n    String dString = Double.toString(d);\r\n    String bString = dString.substring(2);\r\n    a = (int) d;\r\n    b = Integer.parseInt(bString);\r\n\r\nNote that the `substring()` and `parseInt()` fails if the number is 10 or bigger though. You might want to change the `substring()` call to something like:  \r\n\r\n    String bString = dString.split(&quot;\\\\.&quot;)[1];\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>To get the decimal part as an <code>int</code> is not really following any standards, so you are stuck with your special solution for that. Getting the value before the decimal point can be simplified to a simple cast though:  </p>\n\n<pre><code>double d = 1.9;\nint a, b;\nString dString = Double.toString(d);\nString bString = dString.substring(2);\na = (int) d;\nb = Integer.parseInt(bString);\n</code></pre>\n\n<p>Note that the <code>substring()</code> and <code>parseInt()</code> fails if the number is 10 or bigger though. You might want to change the <code>substring()</code> call to something like:  </p>\n\n<pre><code>String bString = dString.split(\"\\\\.\")[1];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2242865,"reputation":709,"user_id":1976942,"accept_rate":39,"display_name":"tudoricc"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1405412699,"creation_date":1405412699,"answer_id":24753306,"question_id":24753177,"body_markdown":"I tried a split on &quot;.&quot; and then just parse the string for integers. \r\n  \r\n            String a=&quot;&quot;;\r\n            double x = 2.4;\r\n            a=x+&quot;&quot;;\r\n           \tString [] v =a.split(&quot;\\\\.&quot;);\r\n        \tint before = Integer.parseInt(v[0]);\r\n        \tint after = Integer.parseInt(v[1]);","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>I tried a split on \".\" and then just parse the string for integers. </p>\n\n<pre><code>        String a=\"\";\n        double x = 2.4;\n        a=x+\"\";\n        String [] v =a.split(\"\\\\.\");\n        int before = Integer.parseInt(v[0]);\n        int after = Integer.parseInt(v[1]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":347665,"reputation":4574,"user_id":681929,"accept_rate":58,"display_name":"nobalG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1405413184,"creation_date":1405412749,"answer_id":24753320,"question_id":24753177,"body_markdown":"    double num=12.5;\r\n    String str=Double.toString(num);\r\n    String strarray[]=str.split(&quot;\\\\.&quot;);\r\nNow `strarray[0]` will be holding 12, and `strarray[1]` will be having 5.You can convert them into  integers by writing following code:\r\n\r\n    int num1=Integer.parseInt(strarray[0]);\r\n    int num2=Integer.parseInt(strarray[1]);\r\n\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<pre><code>double num=12.5;\nString str=Double.toString(num);\nString strarray[]=str.split(\"\\\\.\");\n</code></pre>\n\n<p>Now <code>strarray[0]</code> will be holding 12, and <code>strarray[1]</code> will be having 5.You can convert them into  integers by writing following code:</p>\n\n<pre><code>int num1=Integer.parseInt(strarray[0]);\nint num2=Integer.parseInt(strarray[1]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2102673,"reputation":35121,"user_id":1869846,"accept_rate":56,"display_name":"Ruchira Gayan Ranaweera"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1405415233,"creation_date":1405412792,"answer_id":24753336,"question_id":24753177,"body_markdown":"You can try this way too\r\n\r\n        double val=1.9;\r\n        String[] arr=String.valueOf(val).split(&quot;\\\\.&quot;);\r\n        int[] intArr=new int[2];\r\n        intArr[0]=Integer.parseInt(arr[0]); // 1\r\n        intArr[1]=Integer.parseInt(arr[1]); // 9\r\n\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>You can try this way too</p>\n\n<pre><code>    double val=1.9;\n    String[] arr=String.valueOf(val).split(\"\\\\.\");\n    int[] intArr=new int[2];\n    intArr[0]=Integer.parseInt(arr[0]); // 1\n    intArr[1]=Integer.parseInt(arr[1]); // 9\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2806546,"reputation":375,"user_id":2413676,"accept_rate":100,"display_name":"JamesA"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1405412896,"creation_date":1405412896,"answer_id":24753370,"question_id":24753177,"body_markdown":"You could treat the double like a string, and split it on the decimal place.\r\n\r\n\t\t double d = 13454.92345;\r\n\t\t String bob = Double.toString(d);\r\n\t\t String[] convert = bob.split(&quot;\\\\.&quot;);\r\n\r\n\t\t int a = Integer.parseInt(convert[0]);\r\n\t\t int b = Integer.parseInt(convert[1]);\r\n\t\t \r\n\t\t System.out.println(a); // 13454\r\n\t\t System.out.println(b); // 92345","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>You could treat the double like a string, and split it on the decimal place.</p>\n\n<pre><code>     double d = 13454.92345;\n     String bob = Double.toString(d);\n     String[] convert = bob.split(\"\\\\.\");\n\n     int a = Integer.parseInt(convert[0]);\n     int b = Integer.parseInt(convert[1]);\n\n     System.out.println(a); // 13454\n     System.out.println(b); // 92345\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1405413609,"creation_date":1405413063,"answer_id":24753412,"question_id":24753177,"body_markdown":"Here&#39;s a two line version:\r\n\r\n    int a = (int)d;\r\n    int b = Integer.parseInt((d + &quot;&quot;).split(&quot;\\\\.&quot;, 2)[1]).replaceAll(&quot;^$&quot;, &quot;0&quot;));\r\n\r\nThe first part is easy - just cast to `int`, which automatically chops off any decimal part of the number.\r\n\r\nThe second part is easiest with a Strimg approach - split the string version on a dot and use the second part. Note the addition of `&quot;&quot;` which generates a string, and the handling of the edge case of there being no decimal part, where `3` as a double prints as `3.` - if the result is a blank (guaranteed by the second parameter to split) which is then converted to a zero.","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>Here's a two line version:</p>\n\n<pre><code>int a = (int)d;\nint b = Integer.parseInt((d + \"\").split(\"\\\\.\", 2)[1]).replaceAll(\"^$\", \"0\"));\n</code></pre>\n\n<p>The first part is easy - just cast to <code>int</code>, which automatically chops off any decimal part of the number.</p>\n\n<p>The second part is easiest with a Strimg approach - split the string version on a dot and use the second part. Note the addition of <code>\"\"</code> which generates a string, and the handling of the edge case of there being no decimal part, where <code>3</code> as a double prints as <code>3.</code> - if the result is a blank (guaranteed by the second parameter to split) which is then converted to a zero.</p>\n"},{"tags":[],"owner":{"account_id":4618313,"reputation":2530,"user_id":3744059,"accept_rate":35,"display_name":"bumbumpaw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1405416597,"creation_date":1405413235,"answer_id":24753449,"question_id":24753177,"body_markdown":"      double d = 1.9;\r\n      String str = Double.toString(d);\r\n      String strArray[] = str.split(&quot;\\\\.&quot;);\r\n        \r\n      int a = Integer.parseInt(strArray[0]);\r\n      int b = Integer.parseInt(strArray[1]);\r\n      System.out.print(a + &quot; - &quot; + b);\r\n\r\n\r\nTry this. This will work.\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<pre><code>  double d = 1.9;\n  String str = Double.toString(d);\n  String strArray[] = str.split(\"\\\\.\");\n\n  int a = Integer.parseInt(strArray[0]);\n  int b = Integer.parseInt(strArray[1]);\n  System.out.print(a + \" - \" + b);\n</code></pre>\n\n<p>Try this. This will work.</p>\n"},{"tags":[],"owner":{"account_id":2788370,"reputation":1540,"user_id":2399168,"display_name":"Patrik Oldsberg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405414875,"creation_date":1405414537,"answer_id":24753865,"question_id":24753177,"body_markdown":"This solution should work for almost any length of the fractional part and doesn&#39;t use strings.\r\nFor example the accepted answer doesn&#39;t work for 0.16\r\n\r\n    double d = 123.456\r\n\r\n    long a = (long) d;\r\n    double f = d - a;\r\n\r\n    while (Math.abs((long) f - f) &gt; 0.000001) f *= 10;\r\n\r\n    long b = (long) f;\r\n\r\n    // a = 123\r\n    // b = 345","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>This solution should work for almost any length of the fractional part and doesn't use strings.\nFor example the accepted answer doesn't work for 0.16</p>\n\n<pre><code>double d = 123.456\n\nlong a = (long) d;\ndouble f = d - a;\n\nwhile (Math.abs((long) f - f) &gt; 0.000001) f *= 10;\n\nlong b = (long) f;\n\n// a = 123\n// b = 345\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11934289,"reputation":197,"user_id":8733338,"display_name":"Richard Mu&#241;oz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509037450,"creation_date":1509037450,"answer_id":46959989,"question_id":24753177,"body_markdown":"Here is another approach:\r\n\r\n    double d=1.9;\r\n    int a;\r\n    int b;\r\n\r\n    a = (int) d/10;\r\n    b = (int) d%10;\r\n\r\n    System.out.print(&quot;a&quot;);\r\n    System.out.print(&quot;b&quot;);","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>Here is another approach:</p>\n\n<pre><code>double d=1.9;\nint a;\nint b;\n\na = (int) d/10;\nb = (int) d%10;\n\nSystem.out.print(\"a\");\nSystem.out.print(\"b\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15743573,"reputation":1,"user_id":11360225,"display_name":"Loyola"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555270799,"creation_date":1555270447,"answer_id":55679266,"question_id":24753177,"body_markdown":"        double dub=1234.5678987;//Variable to be manipulated\r\n\t\tlong lon=0; //To store before decimal point.\t\r\n\t\tshort sh=0;//To store after decimal point.\t\r\n\t\tint deci=10000; //to 4 decimal places\t\r\n\t\tlon=(int)dub;// get the integer part of the number stored in long\t\r\n        sh=(short)((dub-(double)lon)*deci);//deci to required decimal places.\r\n        System.out.println(&quot;&quot;+lon+&quot;.&quot;+sh);\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<pre><code>    double dub=1234.5678987;//Variable to be manipulated\n    long lon=0; //To store before decimal point.    \n    short sh=0;//To store after decimal point.  \n    int deci=10000; //to 4 decimal places   \n    lon=(int)dub;// get the integer part of the number stored in long   \n    sh=(short)((dub-(double)lon)*deci);//deci to required decimal places.\n    System.out.println(\"\"+lon+\".\"+sh);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29517307,"reputation":1,"user_id":22620980,"display_name":"bobo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695816805,"creation_date":1695816805,"answer_id":77187401,"question_id":24753177,"body_markdown":"I have restructured the [answer code provided by @Ruchira Gayan Ranaweera][1] into a Java method that you can easily incorporate into your development:\r\n\r\n    public class Post24753336 {\r\n        public static int[] splitDoubleByDot(double val) {\r\n            String[] arr=String.valueOf(val).split(&quot;\\\\.&quot;);\r\n            int[] intArr=new int[2];\r\n            intArr[0]=Integer.parseInt(arr[0]);\r\n            intArr[1]=Integer.parseInt(arr[1]);\r\n            return intArr;\r\n        }\r\n    }\r\n\r\n[1]: https://stackoverflow.com/a/24753336\r\n\r\n","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>I have restructured the <a href=\"https://stackoverflow.com/a/24753336\">answer code provided by @Ruchira Gayan Ranaweera</a> into a Java method that you can easily incorporate into your development:</p>\n<pre><code>public class Post24753336 {\n    public static int[] splitDoubleByDot(double val) {\n        String[] arr=String.valueOf(val).split(&quot;\\\\.&quot;);\n        int[] intArr=new int[2];\n        intArr[0]=Integer.parseInt(arr[0]);\n        intArr[1]=Integer.parseInt(arr[1]);\n        return intArr;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2179398,"reputation":2049,"user_id":1929230,"accept_rate":91,"display_name":"Johnny Chen"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41905,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":24753336,"answer_count":11,"score":4,"last_activity_date":1695816805,"creation_date":1405412293,"question_id":24753177,"body_markdown":"Trying to split a double number into two decimal parts by dot. Like  this: 1.9 into 1 and 9; 0.16 into  0 and 16;\r\n\r\nHere&#39;s what I do, but seems a little redundant, what&#39;s the best way to do this?\r\n\r\nThe origin number will always be like Just 0.x or 1.x or 0.xx or 1.xx and xx &gt; 10 \r\n\r\n        double d = 1.9;\r\n        int a, b;\r\n        String dString = Double.toString(d);\r\n        String aString = dString.substring(0, 1);\r\n\r\n        String bString = dString.substring(2);\r\n        a = Integer.parseInt(aString);\r\n        b = Integer.parseInt(bString);\r\n\r\n\r\nMy way of doing this seems using to much String conversion,which I don&#39;t think is very efficient. ","title":"How to split a double number by dot into two decimal numbers in Java?","body":"<p>Trying to split a double number into two decimal parts by dot. Like  this: 1.9 into 1 and 9; 0.16 into  0 and 16;</p>\n\n<p>Here's what I do, but seems a little redundant, what's the best way to do this?</p>\n\n<p>The origin number will always be like Just 0.x or 1.x or 0.xx or 1.xx and xx > 10 </p>\n\n<pre><code>    double d = 1.9;\n    int a, b;\n    String dString = Double.toString(d);\n    String aString = dString.substring(0, 1);\n\n    String bString = dString.substring(2);\n    a = Integer.parseInt(aString);\n    b = Integer.parseInt(bString);\n</code></pre>\n\n<p>My way of doing this seems using to much String conversion,which I don't think is very efficient. </p>\n"},{"tags":["java","android","database","rx-java","android-room"],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695816614,"creation_date":1695816614,"answer_id":77187381,"question_id":77187221,"body_markdown":"The problem is in your `InspectionAndItemsDB` class, in the `@Relation` annotation, you should change it to:\r\n\r\n```java\r\npublic class InspectionAndItemsDB {\r\n    @Embedded\r\n    public VehicleInspectionDB inspection;\r\n    \r\n    @Relation(\r\n        parentColumn = &quot;inspectionDBId&quot;,  // Primary key (parent entity)\r\n        entityColumn = &quot;inspectionDBId&quot;   // Foreign key (child entity)\r\n    )\r\n    public List&lt;VehicleInspectionItemDB&gt; items;\r\n}\r\n```\r\n\r\nThe value of `entityColumn` will be matched against the value defined in `parentColumn()`, so you should consider this. See: [*Relation Docs*][1]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/arch/persistence/room/Relation#entitycolumn","title":"Room request, one to many relathionship","body":"<p>The problem is in your <code>InspectionAndItemsDB</code> class, in the <code>@Relation</code> annotation, you should change it to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class InspectionAndItemsDB {\n    @Embedded\n    public VehicleInspectionDB inspection;\n    \n    @Relation(\n        parentColumn = &quot;inspectionDBId&quot;,  // Primary key (parent entity)\n        entityColumn = &quot;inspectionDBId&quot;   // Foreign key (child entity)\n    )\n    public List&lt;VehicleInspectionItemDB&gt; items;\n}\n</code></pre>\n<p>The value of <code>entityColumn</code> will be matched against the value defined in <code>parentColumn()</code>, so you should consider this. See: <a href=\"https://developer.android.com/reference/android/arch/persistence/room/Relation#entitycolumn\" rel=\"nofollow noreferrer\"><em>Relation Docs</em></a></p>\n"}],"owner":{"account_id":11159969,"reputation":393,"user_id":8914395,"display_name":"Olegario L&#243;pez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77187381,"answer_count":1,"score":0,"last_activity_date":1695816614,"creation_date":1695815308,"question_id":77187221,"body_markdown":"\r\n \r\n\r\nGiven\r\n=====\r\n\r\nI have two classes, &#39;**inspection**&#39; and &#39;**items**,&#39; which have a one-to-many relationship, meaning one inspection can have many items, and each item is associated with a single inspection.&quot;\r\n\r\nand I&#39;m storing them as tables in a ROOM local database, they look like this:\r\n\r\n\r\n \r\n\r\nInspection\r\n----------\r\n\r\n \r\n\r\n    @Entity(tableName = &quot;vehicle_inspection&quot;)\r\n    public class VehicleInspectionDB {\r\n    \r\n    @PrimaryKey(autoGenerate = true)\r\n    private long inspectionDBId;\r\n    ...\r\n    ....\r\n\r\n## Item ##\r\n\r\n    @Entity(tableName = &quot;inspection_item&quot;)\r\n    public class VehicleInspectionItemDB {\r\n\r\n\r\n    @PrimaryKey(autoGenerate = true)\r\n    private long itemDBId;\r\n    private long inspectionDBId;\r\n    ...\r\n    ....\r\n\r\n\r\nI created this class in order to retrieve the inspections and the items associated:\r\n## Inspection with items class ##\r\n\r\n    public class InspectionAndItemsDB {\r\n    @Embedded\r\n    public VehicleInspectionDB inspection;\r\n    @Relation(\r\n    parentColumn = &quot;inspectionDBId&quot;,\r\n    entityColumn = &quot;itemDBId&quot;\r\n    )\r\n    public List&lt;VehicleInspectionItemDB&gt; items;\r\n    }\r\n\r\n\r\nand this Dao method:\r\n   \r\n\r\n## DAO method ##\r\n\r\n\r\n    @Transaction\r\n    @Query(&quot;SELECT * FROM vehicle_inspection&quot;)\r\n    Flowable&lt;List&lt;InspectionAndItemsDB&gt;&gt; getInspectionAndItems();\r\n\r\n \r\n\r\nThe problem\r\n===========\r\n\r\n \r\nwhen I use that method above get inspection and items\r\nI&#39;m receiving only one child per parent it is only one item in the list per inspection instead of a list containing all the items associated with that inspection.\r\n\r\nWhat&#39;s the issue? I&#39;ve followed this tutorial by a google member:\r\nhttps://medium.com/androiddevelopers/database-relations-with-room-544ab95e4542\r\n\r\nThanks!\r\n\r\n\r\n\r\n","title":"Room request, one to many relathionship","body":"<h1>Given</h1>\n<p>I have two classes, '<strong>inspection</strong>' and '<strong>items</strong>,' which have a one-to-many relationship, meaning one inspection can have many items, and each item is associated with a single inspection.&quot;</p>\n<p>and I'm storing them as tables in a ROOM local database, they look like this:</p>\n<h2>Inspection</h2>\n<pre><code>@Entity(tableName = &quot;vehicle_inspection&quot;)\npublic class VehicleInspectionDB {\n\n@PrimaryKey(autoGenerate = true)\nprivate long inspectionDBId;\n...\n....\n</code></pre>\n<h2>Item</h2>\n<pre><code>@Entity(tableName = &quot;inspection_item&quot;)\npublic class VehicleInspectionItemDB {\n\n\n@PrimaryKey(autoGenerate = true)\nprivate long itemDBId;\nprivate long inspectionDBId;\n...\n....\n</code></pre>\n<p>I created this class in order to retrieve the inspections and the items associated:</p>\n<h2>Inspection with items class</h2>\n<pre><code>public class InspectionAndItemsDB {\n@Embedded\npublic VehicleInspectionDB inspection;\n@Relation(\nparentColumn = &quot;inspectionDBId&quot;,\nentityColumn = &quot;itemDBId&quot;\n)\npublic List&lt;VehicleInspectionItemDB&gt; items;\n}\n</code></pre>\n<p>and this Dao method:</p>\n<h2>DAO method</h2>\n<pre><code>@Transaction\n@Query(&quot;SELECT * FROM vehicle_inspection&quot;)\nFlowable&lt;List&lt;InspectionAndItemsDB&gt;&gt; getInspectionAndItems();\n</code></pre>\n<h1>The problem</h1>\n<p>when I use that method above get inspection and items\nI'm receiving only one child per parent it is only one item in the list per inspection instead of a list containing all the items associated with that inspection.</p>\n<p>What's the issue? I've followed this tutorial by a google member:\n<a href=\"https://medium.com/androiddevelopers/database-relations-with-room-544ab95e4542\" rel=\"nofollow noreferrer\">https://medium.com/androiddevelopers/database-relations-with-room-544ab95e4542</a></p>\n<p>Thanks!</p>\n"},{"tags":["java","groovy"],"answers":[{"tags":[],"owner":{"account_id":4358,"reputation":168410,"user_id":6509,"display_name":"tim_yates"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695816535,"creation_date":1695816535,"answer_id":77187373,"question_id":77187181,"body_markdown":"You shouldn&#39;t be using `GStringImpl` to get the strings and then join them together yourself...\r\n\r\nJust convert the result to a string:\r\n\r\n```\r\nfinal String scriptStr = &quot;return \\&quot;Hello, $name!\\&quot;;&quot;;\r\nfinal GroovyShell gs = new GroovyShell();\r\nfinal Script script = gs.parse(new StringReader(scriptStr));\r\n\r\nfinal Binding binding = new Binding();\r\nbinding.setProperty(&quot;name&quot;, &quot;world&quot;);\r\nscript.setBinding(binding);\r\n\r\nString result = script.run().toString();\r\n\r\nif (!&quot;Hello, world!&quot;.equals(result)) {\r\n    throw new IllegalStateException(&quot;Unexpected result: &quot; + result);\r\n}\r\nSystem.out.println(&quot;Okay.&quot;);\r\n```","title":"Using variables in an embedded Groovy Script","body":"<p>You shouldn't be using <code>GStringImpl</code> to get the strings and then join them together yourself...</p>\n<p>Just convert the result to a string:</p>\n<pre><code>final String scriptStr = &quot;return \\&quot;Hello, $name!\\&quot;;&quot;;\nfinal GroovyShell gs = new GroovyShell();\nfinal Script script = gs.parse(new StringReader(scriptStr));\n\nfinal Binding binding = new Binding();\nbinding.setProperty(&quot;name&quot;, &quot;world&quot;);\nscript.setBinding(binding);\n\nString result = script.run().toString();\n\nif (!&quot;Hello, world!&quot;.equals(result)) {\n    throw new IllegalStateException(&quot;Unexpected result: &quot; + result);\n}\nSystem.out.println(&quot;Okay.&quot;);\n</code></pre>\n"}],"owner":{"account_id":1976336,"reputation":883,"user_id":1774051,"accept_rate":40,"display_name":"user1774051"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695816535,"creation_date":1695814883,"question_id":77187181,"body_markdown":"What is wrong with the following code? I&#39;d\r\nexpect it to write out the word &quot;Okay&quot;. Instead, it throws the\r\nexception &quot;Unexpected result: Hello, !&quot;\r\n\r\n```\r\nfinal String scriptStr = &quot;return \\&quot;Hello, $name!\\&quot;;&quot;;\r\nfinal GroovyShell gs = new GroovyShell();\r\nfinal Script script = gs.parse(new StringReader(scriptStr));\r\n\r\nfinal Binding binding = new Binding();\r\nbinding.setProperty(&quot;name&quot;, &quot;world&quot;);\r\nscript.setBinding(binding);\r\n\r\nfinal GStringImpl gsi = (GStringImpl) script.run();\r\nfinal String[] gsArray = gsi.getStrings();\r\nfinal String result;\r\n\r\nif (gsArray == null || gsArray.length == 0) {\r\n    result = null;\r\n} else {\r\n    result = String.join(&quot;&quot;, gsArray);\r\n}\r\n\r\nif (!&quot;Hello, world!&quot;.equals(result)) {\r\n    throw new IllegalStateException(&quot;Unexpected result: &quot; + result);\r\n}\r\nSystem.out.println(&quot;Okay.&quot;);\r\n```\r\n","title":"Using variables in an embedded Groovy Script","body":"<p>What is wrong with the following code? I'd\nexpect it to write out the word &quot;Okay&quot;. Instead, it throws the\nexception &quot;Unexpected result: Hello, !&quot;</p>\n<pre><code>final String scriptStr = &quot;return \\&quot;Hello, $name!\\&quot;;&quot;;\nfinal GroovyShell gs = new GroovyShell();\nfinal Script script = gs.parse(new StringReader(scriptStr));\n\nfinal Binding binding = new Binding();\nbinding.setProperty(&quot;name&quot;, &quot;world&quot;);\nscript.setBinding(binding);\n\nfinal GStringImpl gsi = (GStringImpl) script.run();\nfinal String[] gsArray = gsi.getStrings();\nfinal String result;\n\nif (gsArray == null || gsArray.length == 0) {\n    result = null;\n} else {\n    result = String.join(&quot;&quot;, gsArray);\n}\n\nif (!&quot;Hello, world!&quot;.equals(result)) {\n    throw new IllegalStateException(&quot;Unexpected result: &quot; + result);\n}\nSystem.out.println(&quot;Okay.&quot;);\n</code></pre>\n"},{"tags":["java","javafx","fxml"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":4,"creation_date":1695768517,"post_id":77183796,"comment_id":136067956,"body_markdown":"It is not the event that is null, it is the field you have named `ResponseField` (which occurs because you defined the field as static - see the duplicate).  Additionally, please follow [naming conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html), lest you confuse readers and yourself.  Also, always provide [full stack traces](https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors).","body":"It is not the event that is null, it is the field you have named <code>ResponseField</code> (which occurs because you defined the field as static - see the duplicate).  Additionally, please follow <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">naming conventions</a>, lest you confuse readers and yourself.  Also, always provide <a href=\"https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\">full stack traces</a>."}],"owner":{"account_id":29524698,"reputation":1,"user_id":22626651,"display_name":"FL_Programmer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695768352,"answer_count":0,"score":0,"last_activity_date":1695816441,"creation_date":1695767938,"question_id":77183796,"body_markdown":"```\r\n@FXML private static TextField ResponseField;\r\n```\r\nThis is the function the &quot;ResponseField&quot; element is calling\r\n\r\n```\r\npublic void GoToResultScreen() throws Exception {\r\n        if (Character.toUpperCase(ResponseField.getText().charAt(0)) == &#39;N&#39;) {\r\n            Parent root = FXMLLoader.load(getClass().getResource(&quot;WinOrLoseScreen.fxml&quot;));\r\n            Scene scene = new Scene(root);\r\n            Stage stage = (Stage) GuideLabel.getScene().getWindow();\r\n\r\n            stage.setTitle(&quot;Hacking Terminal&quot;);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        } else if (Character.toUpperCase(ResponseField.getText().charAt(0)) == &#39;Y&#39;) {\r\n            NewCard();\r\n            TotalLabel.setText(&quot;Your total is now &quot;+UserTotal);\r\n        } else {\r\n            GuideLabel.setText(&quot;Type Y or N&quot;);\r\n        }\r\n    }\r\n```\r\n\r\n```\r\n\r\n&lt;?import javafx.scene.control.*?&gt;\r\n&lt;?import javafx.scene.layout.*?&gt;\r\n&lt;?import javafx.scene.text.*?&gt;\r\n\r\n&lt;AnchorPane prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; stylesheets=&quot;@style.css&quot; xmlns=&quot;http://javafx.com/javafx/17.0.2-ea&quot;\r\n            xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;game.blackjack.GameController&quot;&gt;\r\n   &lt;children&gt;\r\n      &lt;TextField fx:id=&quot;ResponseField&quot; layoutX=&quot;60.0&quot; layoutY=&quot;95.0&quot; prefHeight=&quot;178.0&quot; prefWidth=&quot;211.0&quot; textAlignment=&quot;CENTER&quot;&gt;\r\n         &lt;font&gt;\r\n            &lt;Font name=&quot;Fira Code Light&quot; size=&quot;64.0&quot; /&gt;\r\n         &lt;/font&gt;\r\n      &lt;/Label&gt;\r\n      &lt;Label fx:id=&quot;TotalLabel1&quot; layoutX=&quot;330.0&quot; layoutY=&quot;140.0&quot; prefHeight=&quot;81.0&quot; prefWidth=&quot;211.0&quot; textAlignment=&quot;CENTER&quot;&gt;\r\n         &lt;font&gt;\r\n            &lt;Font name=&quot;Fira Code Light&quot; size=&quot;64.0&quot; /&gt;\r\n         &lt;/font&gt;\r\n      &lt;/Label&gt;\r\n   &lt;/children&gt;\r\n&lt;/AnchorPane&gt;\r\n```\r\nNote: TextField elemnt with `fx:id=&quot;ResponseField&quot;`\r\nWhen I run it, I get an error because ResponseField is null\r\nMy Application class is \r\n\r\n```\r\npackage game.blackjack;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\npublic class App extends Application {\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        Parent root = FXMLLoader.load(getClass().getResource(&quot;Screen.fxml&quot;));\r\n        Scene scene = new Scene(root);\r\n        stage.setTitle(&quot;Hacking Terminal&quot;);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n}\r\n```\r\n\r\n\r\nI ran it, and I got \r\n\r\n```\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.TextField.getText()&quot; because &quot;game.blackjack.GameController.ResponseField&quot; is null\r\n```\r\n\r\nI have tried checking I spelled everything right and if It is the right fxml file and controller, but it is still null.","title":"Why is the FXML event I&#39;m using in my controller null?","body":"<pre><code>@FXML private static TextField ResponseField;\n</code></pre>\n<p>This is the function the &quot;ResponseField&quot; element is calling</p>\n<pre><code>public void GoToResultScreen() throws Exception {\n        if (Character.toUpperCase(ResponseField.getText().charAt(0)) == 'N') {\n            Parent root = FXMLLoader.load(getClass().getResource(&quot;WinOrLoseScreen.fxml&quot;));\n            Scene scene = new Scene(root);\n            Stage stage = (Stage) GuideLabel.getScene().getWindow();\n\n            stage.setTitle(&quot;Hacking Terminal&quot;);\n            stage.setScene(scene);\n            stage.show();\n        } else if (Character.toUpperCase(ResponseField.getText().charAt(0)) == 'Y') {\n            NewCard();\n            TotalLabel.setText(&quot;Your total is now &quot;+UserTotal);\n        } else {\n            GuideLabel.setText(&quot;Type Y or N&quot;);\n        }\n    }\n</code></pre>\n<pre><code>\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import javafx.scene.text.*?&gt;\n\n&lt;AnchorPane prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot; stylesheets=&quot;@style.css&quot; xmlns=&quot;http://javafx.com/javafx/17.0.2-ea&quot;\n            xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;game.blackjack.GameController&quot;&gt;\n   &lt;children&gt;\n      &lt;TextField fx:id=&quot;ResponseField&quot; layoutX=&quot;60.0&quot; layoutY=&quot;95.0&quot; prefHeight=&quot;178.0&quot; prefWidth=&quot;211.0&quot; textAlignment=&quot;CENTER&quot;&gt;\n         &lt;font&gt;\n            &lt;Font name=&quot;Fira Code Light&quot; size=&quot;64.0&quot; /&gt;\n         &lt;/font&gt;\n      &lt;/Label&gt;\n      &lt;Label fx:id=&quot;TotalLabel1&quot; layoutX=&quot;330.0&quot; layoutY=&quot;140.0&quot; prefHeight=&quot;81.0&quot; prefWidth=&quot;211.0&quot; textAlignment=&quot;CENTER&quot;&gt;\n         &lt;font&gt;\n            &lt;Font name=&quot;Fira Code Light&quot; size=&quot;64.0&quot; /&gt;\n         &lt;/font&gt;\n      &lt;/Label&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>Note: TextField elemnt with <code>fx:id=&quot;ResponseField&quot;</code>\nWhen I run it, I get an error because ResponseField is null\nMy Application class is</p>\n<pre><code>package game.blackjack;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\npublic class App extends Application {\n    @Override\n    public void start(Stage stage) throws IOException {\n        Parent root = FXMLLoader.load(getClass().getResource(&quot;Screen.fxml&quot;));\n        Scene scene = new Scene(root);\n        stage.setTitle(&quot;Hacking Terminal&quot;);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>I ran it, and I got</p>\n<pre><code>Caused by: java.lang.NullPointerException: Cannot invoke &quot;javafx.scene.control.TextField.getText()&quot; because &quot;game.blackjack.GameController.ResponseField&quot; is null\n</code></pre>\n<p>I have tried checking I spelled everything right and if It is the right fxml file and controller, but it is still null.</p>\n"},{"tags":["java","reflection","static","private","final"],"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":4,"creation_date":1279732076,"post_id":3301635,"comment_id":3420423,"body_markdown":"Such a bad idea.  I&#39;d try to get the source and recompile (or even decompile/recompile) instead.","body":"Such a bad idea.  I&#39;d try to get the source and recompile (or even decompile/recompile) instead."},{"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"score":0,"creation_date":1279740559,"post_id":3301635,"comment_id":3421890,"body_markdown":"System.out is a public static final field, but it can be changed too.","body":"System.out is a public static final field, but it can be changed too."},{"owner":{"account_id":3282,"reputation":146286,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":21,"creation_date":1279740752,"post_id":3301635,"comment_id":3421922,"body_markdown":"@irreputable `System.out/in/err` are so &quot;special&quot; that the Java Memory Model has to make special mention of them. They are not examples which should be followed.","body":"@irreputable <code>System.out&#47;in&#47;err</code> are so &quot;special&quot; that the Java Memory Model has to make special mention of them. They are not examples which should be followed."},{"owner":{"account_id":171067,"reputation":6573,"user_id":398237,"accept_rate":82,"display_name":"fixitagain"},"score":8,"creation_date":1279873896,"post_id":3301635,"comment_id":3437598,"body_markdown":"well my point ws to find a hack in the between to have my app working until the lib responsible make the change at the next release so i don&#39;t need to hack anymore...","body":"well my point ws to find a hack in the between to have my app working until the lib responsible make the change at the next release so i don&#39;t need to hack anymore..."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":6,"creation_date":1581029941,"post_id":3301635,"comment_id":106303647,"body_markdown":"@Bill K from ten years ago:  It would be GREAT to recompile it but it&#39;s on a deployed system and I just need to patch it until we can update the deployed app!","body":"@Bill K from ten years ago:  It would be GREAT to recompile it but it&#39;s on a deployed system and I just need to patch it until we can update the deployed app!"},{"owner":{"account_id":192003,"reputation":30422,"user_id":432903,"accept_rate":64,"display_name":"prayagupa"},"score":0,"creation_date":1665167993,"post_id":3301635,"comment_id":130644694,"body_markdown":"For Java 17 [Get declared fields of java.lang.reflect.Fields in jdk12](https://stackoverflow.com/a/71465198/432903)","body":"For Java 17 <a href=\"https://stackoverflow.com/a/71465198/432903\">Get declared fields of java.lang.reflect.Fields in jdk12</a>"}],"answers":[{"tags":[],"owner":{"account_id":29404,"reputation":45520,"user_id":79439,"accept_rate":62,"display_name":"thecoop"},"down_vote_count":15,"up_vote_count":9,"is_accepted":false,"score":-6,"last_activity_date":1279730335,"creation_date":1279730335,"answer_id":3301664,"question_id":3301635,"body_markdown":"The whole point of a `final` field is that it cannot be reassigned once set. The JVM uses this guarentee to maintain consistency in various places (eg inner classes referencing outer variables). So no. Being able to do so would break the JVM!\r\n\r\nThe solution is not to declare it `final` in the first place.","title":"Change private static final field using Java reflection","body":"<p>The whole point of a <code>final</code> field is that it cannot be reassigned once set. The JVM uses this guarentee to maintain consistency in various places (eg inner classes referencing outer variables). So no. Being able to do so would break the JVM!</p>\n\n<p>The solution is not to declare it <code>final</code> in the first place.</p>\n"},{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":4,"up_vote_count":1017,"is_accepted":true,"score":1013,"last_activity_date":1530858477,"creation_date":1279730771,"answer_id":3301720,"question_id":3301635,"body_markdown":"Assuming no `SecurityManager` is preventing you from doing this, you can use `setAccessible` to get around `private` and resetting the modifier to get rid of `final`, and actually modify a `private static final` field.\n\nHere&#39;s an example:\n\n    import java.lang.reflect.*;\n    \n    public class EverythingIsTrue {\n       static void setFinalStatic(Field field, Object newValue) throws Exception {\n          field.setAccessible(true);\n    \n          Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\n          modifiersField.setAccessible(true);\n          modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n    \n          field.set(null, newValue);\n       }\n       public static void main(String args[]) throws Exception {      \n          setFinalStatic(Boolean.class.getField(&quot;FALSE&quot;), true);\n    \n          System.out.format(&quot;Everything is %s&quot;, false); // &quot;Everything is true&quot;\n       }\n    }\n\nAssuming no `SecurityException` is thrown, the above code prints `&quot;Everything is true&quot;`.\n\nWhat&#39;s actually done here is as follows:\n\n* The primitive `boolean` values `true` and `false` in `main` are autoboxed to reference type `Boolean` &quot;constants&quot; `Boolean.TRUE` and `Boolean.FALSE`\n* Reflection is used to change the [`public static final Boolean.FALSE`](http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/lang/Boolean.html#FALSE) to refer to the `Boolean` referred to by `Boolean.TRUE`\n* As a result, subsequently whenever a `false` is autoboxed to `Boolean.FALSE`, it refers to the same `Boolean` as the one refered to by `Boolean.TRUE`\n* Everything that was `&quot;false&quot;` now is `&quot;true&quot;`\n\n### Related questions\n\n* [Using reflection to change `static final File.separatorChar` for unit testing](https://stackoverflow.com/questions/2474017/using-reflection-to-change-static-final-file-separatorchar-for-unit-testing/2474242#2474242)\n* [How to limit setAccessible to only “legitimate” uses?](https://stackoverflow.com/questions/2481862/how-to-limit-setaccessible-to-only-legitimate-uses)\n  * Has examples of messing with `Integer`&#39;s cache, mutating a `String`, etc\n\n---\n\n### Caveats\n\nExtreme care should be taken whenever you do something like this. It may not work because a `SecurityManager` may be present, but even if it doesn&#39;t, depending on usage pattern, it may or may not work.\n\n&gt; [JLS 17.5.3 Subsequent Modification of Final Fields](http://java.sun.com/docs/books/jls/third_edition/html/memory.html#17.5.3)\n&gt;\n&gt; In some cases, such as deserialization, the system will need to change the `final` fields of an object after construction. `final` fields can be changed via reflection and other implementation dependent means. The only pattern in which this has reasonable semantics is one in which an object is constructed and then the `final` fields of the object are updated. The object should not be made visible to other threads, nor should the `final` fields be read, until all updates to the `final` fields of the object are complete. Freezes of a `final` field occur both at the end of the constructor in which the `final` field is set, and immediately after each modification of a `final` field via reflection or other special mechanism.\n&gt;\n&gt; Even then, there are a number of complications. If a `final` field is initialized to a compile-time constant in the field declaration, changes to the `final` field may not be observed, since uses of that `final` field are replaced at compile time with the compile-time constant.\n&gt;\n&gt; Another problem is that the specification allows aggressive optimization of `final` fields. Within a thread, it is permissible to reorder reads of a `final` field with those modifications of a final field that do not take place in the constructor.\n\n### See also\n\n* [JLS 15.28 Constant Expression](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)\n   * It&#39;s unlikely that this technique works with a primitive `private static final boolean`, because it&#39;s inlineable as a compile-time constant and thus the &quot;new&quot; value may not be observable\n\n---\n\n### Appendix: On the bitwise manipulation\n\nEssentially,\n\n    field.getModifiers() &amp; ~Modifier.FINAL\n\nturns off the bit corresponding to `Modifier.FINAL` from `field.getModifiers()`. `&amp;` is the bitwise-and, and `~` is the bitwise-complement.\n\n### See also\n\n* [Wikipedia/Bitwise operation](http://en.wikipedia.org/wiki/Bitwise_operations)\n\n---\n\n### Remember Constant Expressions\n\nStill not being able to solve this?, have fallen onto depression like I did for it? Does your code looks like this?\n\n    public class A {\n        private final String myVar = &quot;Some Value&quot;;\n    }\n\nReading the comments on this answer, specially the one by @Pshemo, it reminded me that [Constant Expressions](https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28) are handled different so it will be **impossible** to modify it. Hence you will need to change your code to look like this:\n\n    public class A {\n        private final String myVar;\n\n        private A() {\n            myVar = &quot;Some Value&quot;;\n        }\n    }\n\n*if you are not the owner of the class... I feel you!*\n\nFor more details about why this behavior [read this](https://stackoverflow.com/questions/17506329/java-final-field-compile-time-constant-expression)?","title":"Change private static final field using Java reflection","body":"<p>Assuming no <code>SecurityManager</code> is preventing you from doing this, you can use <code>setAccessible</code> to get around <code>private</code> and resetting the modifier to get rid of <code>final</code>, and actually modify a <code>private static final</code> field.</p>\n<p>Here's an example:</p>\n<pre><code>import java.lang.reflect.*;\n\npublic class EverythingIsTrue {\n   static void setFinalStatic(Field field, Object newValue) throws Exception {\n      field.setAccessible(true);\n\n      Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\n      modifiersField.setAccessible(true);\n      modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n\n      field.set(null, newValue);\n   }\n   public static void main(String args[]) throws Exception {      \n      setFinalStatic(Boolean.class.getField(&quot;FALSE&quot;), true);\n\n      System.out.format(&quot;Everything is %s&quot;, false); // &quot;Everything is true&quot;\n   }\n}\n</code></pre>\n<p>Assuming no <code>SecurityException</code> is thrown, the above code prints <code>&quot;Everything is true&quot;</code>.</p>\n<p>What's actually done here is as follows:</p>\n<ul>\n<li>The primitive <code>boolean</code> values <code>true</code> and <code>false</code> in <code>main</code> are autoboxed to reference type <code>Boolean</code> &quot;constants&quot; <code>Boolean.TRUE</code> and <code>Boolean.FALSE</code></li>\n<li>Reflection is used to change the <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/lang/Boolean.html#FALSE\" rel=\"noreferrer\"><code>public static final Boolean.FALSE</code></a> to refer to the <code>Boolean</code> referred to by <code>Boolean.TRUE</code></li>\n<li>As a result, subsequently whenever a <code>false</code> is autoboxed to <code>Boolean.FALSE</code>, it refers to the same <code>Boolean</code> as the one refered to by <code>Boolean.TRUE</code></li>\n<li>Everything that was <code>&quot;false&quot;</code> now is <code>&quot;true&quot;</code></li>\n</ul>\n<h3>Related questions</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2474017/using-reflection-to-change-static-final-file-separatorchar-for-unit-testing/2474242#2474242\">Using reflection to change <code>static final File.separatorChar</code> for unit testing</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2481862/how-to-limit-setaccessible-to-only-legitimate-uses\">How to limit setAccessible to only “legitimate” uses?</a>\n<ul>\n<li>Has examples of messing with <code>Integer</code>'s cache, mutating a <code>String</code>, etc</li>\n</ul>\n</li>\n</ul>\n<hr />\n<h3>Caveats</h3>\n<p>Extreme care should be taken whenever you do something like this. It may not work because a <code>SecurityManager</code> may be present, but even if it doesn't, depending on usage pattern, it may or may not work.</p>\n<blockquote>\n<p><a href=\"http://java.sun.com/docs/books/jls/third_edition/html/memory.html#17.5.3\" rel=\"noreferrer\">JLS 17.5.3 Subsequent Modification of Final Fields</a></p>\n<p>In some cases, such as deserialization, the system will need to change the <code>final</code> fields of an object after construction. <code>final</code> fields can be changed via reflection and other implementation dependent means. The only pattern in which this has reasonable semantics is one in which an object is constructed and then the <code>final</code> fields of the object are updated. The object should not be made visible to other threads, nor should the <code>final</code> fields be read, until all updates to the <code>final</code> fields of the object are complete. Freezes of a <code>final</code> field occur both at the end of the constructor in which the <code>final</code> field is set, and immediately after each modification of a <code>final</code> field via reflection or other special mechanism.</p>\n<p>Even then, there are a number of complications. If a <code>final</code> field is initialized to a compile-time constant in the field declaration, changes to the <code>final</code> field may not be observed, since uses of that <code>final</code> field are replaced at compile time with the compile-time constant.</p>\n<p>Another problem is that the specification allows aggressive optimization of <code>final</code> fields. Within a thread, it is permissible to reorder reads of a <code>final</code> field with those modifications of a final field that do not take place in the constructor.</p>\n</blockquote>\n<h3>See also</h3>\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28\" rel=\"noreferrer\">JLS 15.28 Constant Expression</a>\n<ul>\n<li>It's unlikely that this technique works with a primitive <code>private static final boolean</code>, because it's inlineable as a compile-time constant and thus the &quot;new&quot; value may not be observable</li>\n</ul>\n</li>\n</ul>\n<hr />\n<h3>Appendix: On the bitwise manipulation</h3>\n<p>Essentially,</p>\n<pre><code>field.getModifiers() &amp; ~Modifier.FINAL\n</code></pre>\n<p>turns off the bit corresponding to <code>Modifier.FINAL</code> from <code>field.getModifiers()</code>. <code>&amp;</code> is the bitwise-and, and <code>~</code> is the bitwise-complement.</p>\n<h3>See also</h3>\n<ul>\n<li><a href=\"http://en.wikipedia.org/wiki/Bitwise_operations\" rel=\"noreferrer\">Wikipedia/Bitwise operation</a></li>\n</ul>\n<hr />\n<h3>Remember Constant Expressions</h3>\n<p>Still not being able to solve this?, have fallen onto depression like I did for it? Does your code looks like this?</p>\n<pre><code>public class A {\n    private final String myVar = &quot;Some Value&quot;;\n}\n</code></pre>\n<p>Reading the comments on this answer, specially the one by @Pshemo, it reminded me that <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28\" rel=\"noreferrer\">Constant Expressions</a> are handled different so it will be <strong>impossible</strong> to modify it. Hence you will need to change your code to look like this:</p>\n<pre><code>public class A {\n    private final String myVar;\n\n    private A() {\n        myVar = &quot;Some Value&quot;;\n    }\n}\n</code></pre>\n<p><em>if you are not the owner of the class... I feel you!</em></p>\n<p>For more details about why this behavior <a href=\"https://stackoverflow.com/questions/17506329/java-final-field-compile-time-constant-expression\">read this</a>?</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":2,"up_vote_count":69,"is_accepted":false,"score":67,"last_activity_date":1528219928,"creation_date":1279731470,"answer_id":3301818,"question_id":3301635,"body_markdown":"If the value assigned to a `static final boolean` field is known at compile-time, it is a *constant.* Fields of primitive or \r\n`String` type can be compile-time constants. A constant will be inlined in any code that references the field. Since the field is not actually read at runtime, changing it then will have no effect.\r\n\r\nThe [Java language specification][1] says this:\r\n\r\n&gt; If a field is a constant variable\r\n&gt; (&#167;4.12.4), then deleting the keyword\r\n&gt; final or changing its value will not\r\n&gt; break compatibility with pre-existing\r\n&gt; binaries by causing them not to run,\r\n&gt; but **they will not see any new value\r\n&gt; for the usage of the field unless they\r\n&gt; are recompiled.** This is true even if\r\n&gt; the usage itself is not a compile-time\r\n&gt; constant expression (&#167;15.28)\r\n\r\nHere&#39;s an example:\r\n\r\n    class Flag {\r\n      static final boolean FLAG = true;\r\n    }\r\n    \r\n    class Checker {\r\n      public static void main(String... argv) {\r\n        System.out.println(Flag.FLAG);\r\n      }\r\n    }\r\n\r\nIf you decompile `Checker`, you&#39;ll see that instead of referencing `Flag.FLAG`, the code simply pushes a value of 1 (`true`) onto the stack (instruction #3).\r\n\r\n    0:   getstatic       #2; //Field java/lang/System.out:Ljava/io/PrintStream;\r\n    3:   iconst_1\r\n    4:   invokevirtual   #3; //Method java/io/PrintStream.println:(Z)V\r\n    7:   return\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se10/html/jls-13.html#jls-13.4.9\r\n","title":"Change private static final field using Java reflection","body":"<p>If the value assigned to a <code>static final boolean</code> field is known at compile-time, it is a <em>constant.</em> Fields of primitive or \n<code>String</code> type can be compile-time constants. A constant will be inlined in any code that references the field. Since the field is not actually read at runtime, changing it then will have no effect.</p>\n\n<p>The <a href=\"https://docs.oracle.com/javase/specs/jls/se10/html/jls-13.html#jls-13.4.9\" rel=\"noreferrer\">Java language specification</a> says this:</p>\n\n<blockquote>\n  <p>If a field is a constant variable\n  (§4.12.4), then deleting the keyword\n  final or changing its value will not\n  break compatibility with pre-existing\n  binaries by causing them not to run,\n  but <strong>they will not see any new value\n  for the usage of the field unless they\n  are recompiled.</strong> This is true even if\n  the usage itself is not a compile-time\n  constant expression (§15.28)</p>\n</blockquote>\n\n<p>Here's an example:</p>\n\n<pre><code>class Flag {\n  static final boolean FLAG = true;\n}\n\nclass Checker {\n  public static void main(String... argv) {\n    System.out.println(Flag.FLAG);\n  }\n}\n</code></pre>\n\n<p>If you decompile <code>Checker</code>, you'll see that instead of referencing <code>Flag.FLAG</code>, the code simply pushes a value of 1 (<code>true</code>) onto the stack (instruction #3).</p>\n\n<pre><code>0:   getstatic       #2; //Field java/lang/System.out:Ljava/io/PrintStream;\n3:   iconst_1\n4:   invokevirtual   #3; //Method java/io/PrintStream.println:(Z)V\n7:   return\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2067941,"reputation":201,"user_id":1843087,"display_name":"Stephan Markwalder"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1353525678,"creation_date":1353525678,"answer_id":13500539,"question_id":3301635,"body_markdown":"A little curiosity from the Java Language Specification, chapter 17, section 17.5.4 &quot;Write-protected Fields&quot;:\r\n\r\n&gt; Normally, a field that is final and static may not be modified.\r\n&gt; However, System.in, System.out, and System.err are static final fields\r\n&gt; that, for legacy reasons, must be allowed to be changed by the methods\r\n&gt; System.setIn, System.setOut, and System.setErr. We refer to these\r\n&gt; fields as being write-protected to distinguish them from ordinary\r\n&gt; final fields.\r\n\r\nSource: http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5.4","title":"Change private static final field using Java reflection","body":"<p>A little curiosity from the Java Language Specification, chapter 17, section 17.5.4 \"Write-protected Fields\":</p>\n\n<blockquote>\n  <p>Normally, a field that is final and static may not be modified.\n  However, System.in, System.out, and System.err are static final fields\n  that, for legacy reasons, must be allowed to be changed by the methods\n  System.setIn, System.setOut, and System.setErr. We refer to these\n  fields as being write-protected to distinguish them from ordinary\n  final fields.</p>\n</blockquote>\n\n<p>Source: <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5.4\">http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5.4</a></p>\n"},{"tags":[],"owner":{"account_id":214894,"reputation":9047,"user_id":469153,"accept_rate":71,"display_name":"iirekm"},"down_vote_count":4,"up_vote_count":14,"is_accepted":false,"score":10,"last_activity_date":1540144076,"creation_date":1436273245,"answer_id":31268945,"question_id":3301635,"body_markdown":"I also integrated it with [joor library][1]\r\n\r\nJust use \r\n\r\n          Reflect.on(yourObject).set(&quot;finalFieldName&quot;, finalFieldValue);\r\n\r\nAlso I fixed an issue with `override` which the previous solutions seem to miss.\r\nHowever use this very carefully, only when there&#39;s no other good solution.\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOR","title":"Change private static final field using Java reflection","body":"<p>I also integrated it with <a href=\"https://github.com/jOOQ/jOOR\" rel=\"noreferrer\">joor library</a></p>\n\n<p>Just use </p>\n\n<pre><code>      Reflect.on(yourObject).set(\"finalFieldName\", finalFieldValue);\n</code></pre>\n\n<p>Also I fixed an issue with <code>override</code> which the previous solutions seem to miss.\nHowever use this very carefully, only when there's no other good solution.</p>\n"},{"tags":[],"owner":{"account_id":6293679,"reputation":441,"user_id":5971147,"display_name":"hasskell"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1457083287,"creation_date":1457083287,"answer_id":35792194,"question_id":3301635,"body_markdown":"Just saw that question on one of the interview question, if possible to change final variable with reflection or in runtime. \r\nGot really interested, so that what I became with:\r\n\r\n     /**\r\n     * @author Dmitrijs Lobanovskis\r\n     * @since 03/03/2016.\r\n     */\r\n    public class SomeClass {\r\n    \r\n        private final String str;\r\n    \r\n        SomeClass(){\r\n            this.str = &quot;This is the string that never changes!&quot;;\r\n        }\r\n    \r\n        public String getStr() {\r\n            return str;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Class name: &quot; + getClass() + &quot; Value: &quot; + getStr();\r\n        }\r\n    }\r\n\r\nSome simple class with final String variable. So in the main class \r\nimport java.lang.reflect.Field;\r\n\r\n\r\n    /**\r\n     * @author Dmitrijs Lobanovskis\r\n     * @since 03/03/2016.\r\n     */\r\n    public class Main {\r\n    \r\n    \r\n        public static void main(String[] args) throws Exception{\r\n    \r\n            SomeClass someClass = new SomeClass();\r\n            System.out.println(someClass);\r\n    \r\n            Field field = someClass.getClass().getDeclaredField(&quot;str&quot;);\r\n            field.setAccessible(true);\r\n   \r\n            field.set(someClass, &quot;There you are&quot;);\r\n    \r\n            System.out.println(someClass);\r\n        }\r\n    }\r\nThe output will be as follows:\r\n\r\n    Class name: class SomeClass Value: This is the string that never changes!\r\n    Class name: class SomeClass Value: There you are\r\n    \r\n    Process finished with exit code 0\r\n\r\nAccording to documentation \r\nhttps://docs.oracle.com/javase/tutorial/reflect/member/fieldValues.html","title":"Change private static final field using Java reflection","body":"<p>Just saw that question on one of the interview question, if possible to change final variable with reflection or in runtime. \nGot really interested, so that what I became with:</p>\n\n<pre><code> /**\n * @author Dmitrijs Lobanovskis\n * @since 03/03/2016.\n */\npublic class SomeClass {\n\n    private final String str;\n\n    SomeClass(){\n        this.str = \"This is the string that never changes!\";\n    }\n\n    public String getStr() {\n        return str;\n    }\n\n    @Override\n    public String toString() {\n        return \"Class name: \" + getClass() + \" Value: \" + getStr();\n    }\n}\n</code></pre>\n\n<p>Some simple class with final String variable. So in the main class \nimport java.lang.reflect.Field;</p>\n\n<pre><code>/**\n * @author Dmitrijs Lobanovskis\n * @since 03/03/2016.\n */\npublic class Main {\n\n\n    public static void main(String[] args) throws Exception{\n\n        SomeClass someClass = new SomeClass();\n        System.out.println(someClass);\n\n        Field field = someClass.getClass().getDeclaredField(\"str\");\n        field.setAccessible(true);\n\n        field.set(someClass, \"There you are\");\n\n        System.out.println(someClass);\n    }\n}\n</code></pre>\n\n<p>The output will be as follows:</p>\n\n<pre><code>Class name: class SomeClass Value: This is the string that never changes!\nClass name: class SomeClass Value: There you are\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>According to documentation \n<a href=\"https://docs.oracle.com/javase/tutorial/reflect/member/fieldValues.html\" rel=\"nofollow\">https://docs.oracle.com/javase/tutorial/reflect/member/fieldValues.html</a></p>\n"},{"tags":[],"owner":{"account_id":3000840,"reputation":3290,"user_id":2546381,"accept_rate":75,"display_name":"VanagaS"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1490422003,"creation_date":1490422003,"answer_id":43013144,"question_id":3301635,"body_markdown":"In case of presence of a Security Manager, one can make use of `AccessController.doPrivileged` \r\n\r\nTaking the same example from accepted answer above:\r\n\r\n    import java.lang.reflect.*;\r\n\r\n    public class EverythingIsTrue {\r\n        static void setFinalStatic(Field field, Object newValue) throws Exception {\r\n            field.setAccessible(true);\r\n            Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\n\r\n            // wrapping setAccessible \r\n            AccessController.doPrivileged(new PrivilegedAction() {\r\n                @Override\r\n                public Object run() {\r\n                    modifiersField.setAccessible(true);\r\n                    return null;\r\n                }\r\n            });\r\n\r\n            modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n            field.set(null, newValue);\r\n        }\r\n\r\n        public static void main(String args[]) throws Exception {      \r\n          setFinalStatic(Boolean.class.getField(&quot;FALSE&quot;), true);\r\n          System.out.format(&quot;Everything is %s&quot;, false); // &quot;Everything is true&quot;\r\n        }\r\n    }\r\n\r\nIn lambda expression, `AccessController.doPrivileged`, can be simplified to:\r\n\r\n    AccessController.doPrivileged((PrivilegedAction) () -&gt; {\r\n        modifiersField.setAccessible(true);\r\n        return null;\r\n    });","title":"Change private static final field using Java reflection","body":"<p>In case of presence of a Security Manager, one can make use of <code>AccessController.doPrivileged</code> </p>\n\n<p>Taking the same example from accepted answer above:</p>\n\n<pre><code>import java.lang.reflect.*;\n\npublic class EverythingIsTrue {\n    static void setFinalStatic(Field field, Object newValue) throws Exception {\n        field.setAccessible(true);\n        Field modifiersField = Field.class.getDeclaredField(\"modifiers\");\n\n        // wrapping setAccessible \n        AccessController.doPrivileged(new PrivilegedAction() {\n            @Override\n            public Object run() {\n                modifiersField.setAccessible(true);\n                return null;\n            }\n        });\n\n        modifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n        field.set(null, newValue);\n    }\n\n    public static void main(String args[]) throws Exception {      \n      setFinalStatic(Boolean.class.getField(\"FALSE\"), true);\n      System.out.format(\"Everything is %s\", false); // \"Everything is true\"\n    }\n}\n</code></pre>\n\n<p>In lambda expression, <code>AccessController.doPrivileged</code>, can be simplified to:</p>\n\n<pre><code>AccessController.doPrivileged((PrivilegedAction) () -&gt; {\n    modifiersField.setAccessible(true);\n    return null;\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":329814,"reputation":11000,"user_id":653539,"accept_rate":50,"display_name":"Tom&#225;š Z&#225;lusk&#253;"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1494420319,"creation_date":1494420319,"answer_id":43892915,"question_id":3301635,"body_markdown":"The accepted answer worked for me until deployed on JDK 1.8u91.\r\nThen I realized it failed at `field.set(null, newValue);` line when I had read the value via reflection before calling of `setFinalStatic` method.\r\n\r\nProbably the read caused somehow different setup of Java reflection internals (namely `sun.reflect.UnsafeQualifiedStaticObjectFieldAccessorImpl` in failing case instead of `sun.reflect.UnsafeStaticObjectFieldAccessorImpl` in success case) but I didn&#39;t elaborate it further.\r\n\r\nSince I needed to temporarily set new value based on old value and later set old value back, I changed signature little bit to provide computation function externally and also return old value:\r\n\r\n    public static &lt;T&gt; T assignFinalField(Object object, Class&lt;?&gt; clazz, String fieldName, UnaryOperator&lt;T&gt; newValueFunction) {\r\n        Field f = null, ff = null;\r\n        try {\r\n            f = clazz.getDeclaredField(fieldName);\r\n            final int oldM = f.getModifiers();\r\n            final int newM = oldM &amp; ~Modifier.FINAL;\r\n            ff = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\n            ff.setAccessible(true);\r\n            ff.setInt(f,newM);\r\n            f.setAccessible(true);\r\n\r\n            T result = (T)f.get(object);\r\n            T newValue = newValueFunction.apply(result);\r\n\r\n            f.set(object,newValue);\r\n            ff.setInt(f,oldM);\r\n\r\n            return result;\r\n        } ...\r\n\r\nHowever for general case this would not be sufficient.","title":"Change private static final field using Java reflection","body":"<p>The accepted answer worked for me until deployed on JDK 1.8u91.\nThen I realized it failed at <code>field.set(null, newValue);</code> line when I had read the value via reflection before calling of <code>setFinalStatic</code> method.</p>\n\n<p>Probably the read caused somehow different setup of Java reflection internals (namely <code>sun.reflect.UnsafeQualifiedStaticObjectFieldAccessorImpl</code> in failing case instead of <code>sun.reflect.UnsafeStaticObjectFieldAccessorImpl</code> in success case) but I didn't elaborate it further.</p>\n\n<p>Since I needed to temporarily set new value based on old value and later set old value back, I changed signature little bit to provide computation function externally and also return old value:</p>\n\n<pre><code>public static &lt;T&gt; T assignFinalField(Object object, Class&lt;?&gt; clazz, String fieldName, UnaryOperator&lt;T&gt; newValueFunction) {\n    Field f = null, ff = null;\n    try {\n        f = clazz.getDeclaredField(fieldName);\n        final int oldM = f.getModifiers();\n        final int newM = oldM &amp; ~Modifier.FINAL;\n        ff = Field.class.getDeclaredField(\"modifiers\");\n        ff.setAccessible(true);\n        ff.setInt(f,newM);\n        f.setAccessible(true);\n\n        T result = (T)f.get(object);\n        T newValue = newValueFunction.apply(result);\n\n        f.set(object,newValue);\n        ff.setInt(f,oldM);\n\n        return result;\n    } ...\n</code></pre>\n\n<p>However for general case this would not be sufficient.</p>\n"},{"tags":[],"owner":{"account_id":3549643,"reputation":2077,"user_id":2964811,"display_name":"nndru"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1496831559,"creation_date":1496831559,"answer_id":44410184,"question_id":3301635,"body_markdown":"Along with top ranked answer you may use a bit simpliest approach. Apache commons `FieldUtils` class already has particular method that can do the stuff. Please, take a look at `FieldUtils.removeFinalModifier` method. You should specify target field instance and accessibility forcing flag (if you play with non-public fields). More info you can find [here][1].\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/reflect/FieldUtils.html","title":"Change private static final field using Java reflection","body":"<p>Along with top ranked answer you may use a bit simpliest approach. Apache commons <code>FieldUtils</code> class already has particular method that can do the stuff. Please, take a look at <code>FieldUtils.removeFinalModifier</code> method. You should specify target field instance and accessibility forcing flag (if you play with non-public fields). More info you can find <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/reflect/FieldUtils.html\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1548261281,"creation_date":1548261281,"answer_id":54331765,"question_id":3301635,"body_markdown":"If your field is simply private you can do this:\r\n\r\n    MyClass myClass= new MyClass();\r\n    Field aField= myClass.getClass().getDeclaredField(&quot;someField&quot;);\r\n    aField.setAccessible(true);\r\n    aField.set(myClass, &quot;newValueForAString&quot;);\r\n\r\nand throw/handle NoSuchFieldException","title":"Change private static final field using Java reflection","body":"<p>If your field is simply private you can do this:</p>\n\n<pre><code>MyClass myClass= new MyClass();\nField aField= myClass.getClass().getDeclaredField(\"someField\");\naField.setAccessible(true);\naField.set(myClass, \"newValueForAString\");\n</code></pre>\n\n<p>and throw/handle NoSuchFieldException</p>\n"},{"tags":[],"owner":{"account_id":12321033,"reputation":8782,"user_id":8990329,"accept_rate":70,"display_name":"Some Name"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1610532069,"creation_date":1566162179,"answer_id":57548348,"question_id":3301635,"body_markdown":"Even in spite of being `final` a field can be modified outside of static initializer and (at least JVM HotSpot) will execute the bytecode perfectly fine. \r\n\r\nThe problem is that Java compiler does not allow this, but this can be easily bypassed using `objectweb.asm`. Here is p̶e̶r̶f̶e̶c̶t̶l̶y̶ ̶v̶a̶l̶i̶d̶ ̶c̶l̶a̶s̶s̶f̶i̶l̶e̶ *an invalid classfile from the JVMS specification standpoint*, but it passes bytecode verification and then is successfully loaded and initialized under JVM HotSpot OpenJDK12:\r\n\r\n    ClassWriter cw = new ClassWriter(0);\r\n    cw.visit(Opcodes.V1_8, Opcodes.ACC_PUBLIC, &quot;Cl&quot;, null, &quot;java/lang/Object&quot;, null);\r\n    {\r\n        FieldVisitor fv = cw.visitField(Opcodes.ACC_PRIVATE | Opcodes.ACC_STATIC | Opcodes.ACC_FINAL, &quot;fld&quot;, &quot;I&quot;, null, null);\r\n        fv.visitEnd();\r\n    }\r\n    {\r\n        // public void setFinalField1() { //... }\r\n        MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC, &quot;setFinalField1&quot;, &quot;()V&quot;, null, null);\r\n        mv.visitMaxs(2, 1);\r\n        mv.visitInsn(Opcodes.ICONST_5);\r\n        mv.visitFieldInsn(Opcodes.PUTSTATIC, &quot;Cl&quot;, &quot;fld&quot;, &quot;I&quot;);\r\n        mv.visitInsn(Opcodes.RETURN);\r\n        mv.visitEnd();\r\n    }\r\n    {\r\n        // public void setFinalField2() { //... }\r\n        MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC, &quot;setFinalField2&quot;, &quot;()V&quot;, null, null);\r\n        mv.visitMaxs(2, 1);\r\n        mv.visitInsn(Opcodes.ICONST_2);\r\n        mv.visitFieldInsn(Opcodes.PUTSTATIC, &quot;Cl&quot;, &quot;fld&quot;, &quot;I&quot;);\r\n        mv.visitInsn(Opcodes.RETURN);\r\n        mv.visitEnd();\r\n    }\r\n    cw.visitEnd();\r\n\r\nIn Java, the class looks roughly speaking as follows:\r\n\r\n    public class Cl{\r\n        private static final int fld;\r\n    \r\n        public static void setFinalField1(){\r\n            fld = 5;\r\n        }\r\n    \r\n        public static void setFinalField2(){\r\n            fld = 2;\r\n        }\r\n    }\r\n\r\nwhich cannot be compiled with `javac`, but can be loaded and executed by JVM.\r\n\r\nJVM HotSpot has special treatment of such classes in the sense that it prevents such &quot;constants&quot; from participating in constant folding. This check is done on the [bytecode rewriting phase of class initialization][1]:\r\n\r\n    // Check if any final field of the class given as parameter is modified\r\n    // outside of initializer methods of the class. Fields that are modified\r\n    // are marked with a flag. For marked fields, the compilers do not perform\r\n    // constant folding (as the field can be changed after initialization).\r\n    //\r\n    // The check is performed after verification and only if verification has\r\n    // succeeded. Therefore, the class is guaranteed to be well-formed.\r\n    InstanceKlass* klass = method-&gt;method_holder();\r\n    u2 bc_index = Bytes::get_Java_u2(bcp + prefix_length + 1);\r\n    constantPoolHandle cp(method-&gt;constants());\r\n    Symbol* ref_class_name = cp-&gt;klass_name_at(cp-&gt;klass_ref_index_at(bc_index));\r\n    if (klass-&gt;name() == ref_class_name) {\r\n       Symbol* field_name = cp-&gt;name_ref_at(bc_index);\r\n       Symbol* field_sig = cp-&gt;signature_ref_at(bc_index);\r\n\r\n       fieldDescriptor fd;\r\n       if (klass-&gt;find_field(field_name, field_sig, &amp;fd) != NULL) {\r\n          if (fd.access_flags().is_final()) {\r\n             if (fd.access_flags().is_static()) {\r\n                if (!method-&gt;is_static_initializer()) {\r\n                   fd.set_has_initialized_final_update(true);\r\n                }\r\n              } else {\r\n                if (!method-&gt;is_object_initializer()) {\r\n                  fd.set_has_initialized_final_update(true);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n    }\r\n\r\nThe only restriction that JVM HotSpot checks is that the `final` field should not be modified outside of the class that the `final` field is declared at. \r\n\r\n\r\n  [1]: https://hg.openjdk.java.net/jdk/jdk12/file/06222165c35f/src/hotspot/share/interpreter/rewriter.cpp#l435","title":"Change private static final field using Java reflection","body":"<p>Even in spite of being <code>final</code> a field can be modified outside of static initializer and (at least JVM HotSpot) will execute the bytecode perfectly fine.</p>\n<p>The problem is that Java compiler does not allow this, but this can be easily bypassed using <code>objectweb.asm</code>. Here is p̶e̶r̶f̶e̶c̶t̶l̶y̶ ̶v̶a̶l̶i̶d̶ ̶c̶l̶a̶s̶s̶f̶i̶l̶e̶ <em>an invalid classfile from the JVMS specification standpoint</em>, but it passes bytecode verification and then is successfully loaded and initialized under JVM HotSpot OpenJDK12:</p>\n<pre><code>ClassWriter cw = new ClassWriter(0);\ncw.visit(Opcodes.V1_8, Opcodes.ACC_PUBLIC, &quot;Cl&quot;, null, &quot;java/lang/Object&quot;, null);\n{\n    FieldVisitor fv = cw.visitField(Opcodes.ACC_PRIVATE | Opcodes.ACC_STATIC | Opcodes.ACC_FINAL, &quot;fld&quot;, &quot;I&quot;, null, null);\n    fv.visitEnd();\n}\n{\n    // public void setFinalField1() { //... }\n    MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC, &quot;setFinalField1&quot;, &quot;()V&quot;, null, null);\n    mv.visitMaxs(2, 1);\n    mv.visitInsn(Opcodes.ICONST_5);\n    mv.visitFieldInsn(Opcodes.PUTSTATIC, &quot;Cl&quot;, &quot;fld&quot;, &quot;I&quot;);\n    mv.visitInsn(Opcodes.RETURN);\n    mv.visitEnd();\n}\n{\n    // public void setFinalField2() { //... }\n    MethodVisitor mv = cw.visitMethod(Opcodes.ACC_PUBLIC | Opcodes.ACC_STATIC, &quot;setFinalField2&quot;, &quot;()V&quot;, null, null);\n    mv.visitMaxs(2, 1);\n    mv.visitInsn(Opcodes.ICONST_2);\n    mv.visitFieldInsn(Opcodes.PUTSTATIC, &quot;Cl&quot;, &quot;fld&quot;, &quot;I&quot;);\n    mv.visitInsn(Opcodes.RETURN);\n    mv.visitEnd();\n}\ncw.visitEnd();\n</code></pre>\n<p>In Java, the class looks roughly speaking as follows:</p>\n<pre><code>public class Cl{\n    private static final int fld;\n\n    public static void setFinalField1(){\n        fld = 5;\n    }\n\n    public static void setFinalField2(){\n        fld = 2;\n    }\n}\n</code></pre>\n<p>which cannot be compiled with <code>javac</code>, but can be loaded and executed by JVM.</p>\n<p>JVM HotSpot has special treatment of such classes in the sense that it prevents such &quot;constants&quot; from participating in constant folding. This check is done on the <a href=\"https://hg.openjdk.java.net/jdk/jdk12/file/06222165c35f/src/hotspot/share/interpreter/rewriter.cpp#l435\" rel=\"nofollow noreferrer\">bytecode rewriting phase of class initialization</a>:</p>\n<pre><code>// Check if any final field of the class given as parameter is modified\n// outside of initializer methods of the class. Fields that are modified\n// are marked with a flag. For marked fields, the compilers do not perform\n// constant folding (as the field can be changed after initialization).\n//\n// The check is performed after verification and only if verification has\n// succeeded. Therefore, the class is guaranteed to be well-formed.\nInstanceKlass* klass = method-&gt;method_holder();\nu2 bc_index = Bytes::get_Java_u2(bcp + prefix_length + 1);\nconstantPoolHandle cp(method-&gt;constants());\nSymbol* ref_class_name = cp-&gt;klass_name_at(cp-&gt;klass_ref_index_at(bc_index));\nif (klass-&gt;name() == ref_class_name) {\n   Symbol* field_name = cp-&gt;name_ref_at(bc_index);\n   Symbol* field_sig = cp-&gt;signature_ref_at(bc_index);\n\n   fieldDescriptor fd;\n   if (klass-&gt;find_field(field_name, field_sig, &amp;fd) != NULL) {\n      if (fd.access_flags().is_final()) {\n         if (fd.access_flags().is_static()) {\n            if (!method-&gt;is_static_initializer()) {\n               fd.set_has_initialized_final_update(true);\n            }\n          } else {\n            if (!method-&gt;is_object_initializer()) {\n              fd.set_has_initialized_final_update(true);\n            }\n          }\n        }\n      }\n    }\n}\n</code></pre>\n<p>The only restriction that JVM HotSpot checks is that the <code>final</code> field should not be modified outside of the class that the <code>final</code> field is declared at.</p>\n"},{"tags":[],"owner":{"account_id":651332,"reputation":2477,"user_id":453052,"display_name":"d4vidi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1602788512,"creation_date":1602788512,"answer_id":64378131,"question_id":3301635,"body_markdown":"Many of the answers here are useful, but I&#39;ve found none of them to work on `Android`, in particular. I&#39;m even a pretty hefty user of `Reflect` by _joor_, and neither it nor _apache_&#39;s `FieldUtils` - both mentioned here in some of the answers, do the trick.\r\n\r\n## Problem with Android\r\n\r\nThe fundamental reason why this is so is because on Android there&#39;s no `modifiers` field in the `Field` class, which renders any suggestion involving this code (as in the marked answer), useless:\r\n\r\n```java\r\nField modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\nmodifiersField.setAccessible(true);\r\nmodifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n```\r\n\r\nIn fact, to quote from `FieldUtils.removeFinalModifier()`:\r\n\r\n```java\r\n// Do all JREs implement Field with a private ivar called &quot;modifiers&quot;?\r\nfinal Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\r\n```\r\n\r\nSo, the answer is no...\r\n\r\n## Solution\r\n\r\nPretty easy - instead of `modifiers`, the field name is `accessFlags`. This does the trick:\r\n\r\n```java\r\nField accessFlagsField = Field.class.getDeclaredField(&quot;accessFlags&quot;);\r\naccessFlagsField.setAccessible(true);\r\naccessFlagsField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n```\r\n\r\n&gt;Side-note #1: this can work regardless of whether the field is static in the class, or not.\r\n\r\n&gt;Side-note #2: Seeing that the field itself could be private, it&#39;s recommended to also enable access over the field itself, using `field.setAccessible(true)` (in addition to `accessFlagsField.setAccessible(true)`.","title":"Change private static final field using Java reflection","body":"<p>Many of the answers here are useful, but I've found none of them to work on <code>Android</code>, in particular. I'm even a pretty hefty user of <code>Reflect</code> by <em>joor</em>, and neither it nor <em>apache</em>'s <code>FieldUtils</code> - both mentioned here in some of the answers, do the trick.</p>\n<h2>Problem with Android</h2>\n<p>The fundamental reason why this is so is because on Android there's no <code>modifiers</code> field in the <code>Field</code> class, which renders any suggestion involving this code (as in the marked answer), useless:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\nmodifiersField.setAccessible(true);\nmodifiersField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n</code></pre>\n<p>In fact, to quote from <code>FieldUtils.removeFinalModifier()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Do all JREs implement Field with a private ivar called &quot;modifiers&quot;?\nfinal Field modifiersField = Field.class.getDeclaredField(&quot;modifiers&quot;);\n</code></pre>\n<p>So, the answer is no...</p>\n<h2>Solution</h2>\n<p>Pretty easy - instead of <code>modifiers</code>, the field name is <code>accessFlags</code>. This does the trick:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Field accessFlagsField = Field.class.getDeclaredField(&quot;accessFlags&quot;);\naccessFlagsField.setAccessible(true);\naccessFlagsField.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n</code></pre>\n<blockquote>\n<p>Side-note #1: this can work regardless of whether the field is static in the class, or not.</p>\n</blockquote>\n<blockquote>\n<p>Side-note #2: Seeing that the field itself could be private, it's recommended to also enable access over the field itself, using <code>field.setAccessible(true)</code> (in addition to <code>accessFlagsField.setAccessible(true)</code>.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1632833656,"creation_date":1632833656,"answer_id":69362143,"question_id":3301635,"body_markdown":"Since Java 12 onwards, the answers given will not work.\r\n\r\nHere is an example on how to modify a `private static final` field since *Java 12* (based on [this answer][1]).\r\n\r\n      private Object modifyField(Object newFieldValue, String fieldName, Object classInstance) throws NoSuchFieldException, IllegalAccessException {\r\n        Field field = classInstance.getClass().getDeclaredField(fieldName);\r\n        VarHandle MODIFIERS;\r\n    \r\n        field.setAccessible(true);\r\n    \r\n        var lookup = MethodHandles.privateLookupIn(Field.class, MethodHandles.lookup());\r\n        MODIFIERS = lookup.findVarHandle(Field.class, &quot;modifiers&quot;, int.class);\r\n        int mods = field.getModifiers();\r\n    \r\n        if (Modifier.isFinal(mods)) {\r\n          MODIFIERS.set(field, mods &amp; ~Modifier.FINAL);\r\n        }\r\n    \r\n        Object previousValue = field.get(classInstance);\r\n        field.set(null, newFieldValue);\r\n    \r\n        return previousValue;\r\n      }\r\n\r\nSee [this thread][1] for more details.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/56039341/get-declared-fields-of-java-lang-reflect-fields-in-jdk12/56043252#56043252","title":"Change private static final field using Java reflection","body":"<p>Since Java 12 onwards, the answers given will not work.</p>\n<p>Here is an example on how to modify a <code>private static final</code> field since <em>Java 12</em> (based on <a href=\"https://stackoverflow.com/questions/56039341/get-declared-fields-of-java-lang-reflect-fields-in-jdk12/56043252#56043252\">this answer</a>).</p>\n<pre><code>  private Object modifyField(Object newFieldValue, String fieldName, Object classInstance) throws NoSuchFieldException, IllegalAccessException {\n    Field field = classInstance.getClass().getDeclaredField(fieldName);\n    VarHandle MODIFIERS;\n\n    field.setAccessible(true);\n\n    var lookup = MethodHandles.privateLookupIn(Field.class, MethodHandles.lookup());\n    MODIFIERS = lookup.findVarHandle(Field.class, &quot;modifiers&quot;, int.class);\n    int mods = field.getModifiers();\n\n    if (Modifier.isFinal(mods)) {\n      MODIFIERS.set(field, mods &amp; ~Modifier.FINAL);\n    }\n\n    Object previousValue = field.get(classInstance);\n    field.set(null, newFieldValue);\n\n    return previousValue;\n  }\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/questions/56039341/get-declared-fields-of-java-lang-reflect-fields-in-jdk12/56043252#56043252\">this thread</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1638266197,"creation_date":1638266197,"answer_id":70167376,"question_id":3301635,"body_markdown":"With JDK 18 this won&#39;t be possible anymore due to the reimplementation of the core reflection over `invokedynamic` and `MethodHandle`s as part of [JEP-416][1] ([PR][2]).\r\n\r\nQuote of [Mandy Chung][3] – who is the main author of this incredible work – in the [following comment][4]. Emphasis are mine.\r\n\r\n&gt; If the underlying field is final, a `Field` object has write access **if and only if**\r\n&gt;\r\n&gt; * `setAccessible(true)` has succeeded for this `Field` object;\r\n&gt; * the field is non-static; and\r\n&gt; * the field&#39;s declaring class is not a hidden class; and\r\n&gt; * the field&#39;s declaring class is not a record class.\r\n\r\n\r\n  [1]: https://openjdk.java.net/jeps/416\r\n  [2]: https://github.com/openjdk/jdk/pull/5027\r\n  [3]: https://github.com/mlchung\r\n  [4]: https://github.com/openjdk/jdk/pull/5027#issuecomment-969672078","title":"Change private static final field using Java reflection","body":"<p>With JDK 18 this won't be possible anymore due to the reimplementation of the core reflection over <code>invokedynamic</code> and <code>MethodHandle</code>s as part of <a href=\"https://openjdk.java.net/jeps/416\" rel=\"nofollow noreferrer\">JEP-416</a> (<a href=\"https://github.com/openjdk/jdk/pull/5027\" rel=\"nofollow noreferrer\">PR</a>).</p>\n<p>Quote of <a href=\"https://github.com/mlchung\" rel=\"nofollow noreferrer\">Mandy Chung</a> – who is the main author of this incredible work – in the <a href=\"https://github.com/openjdk/jdk/pull/5027#issuecomment-969672078\" rel=\"nofollow noreferrer\">following comment</a>. Emphasis are mine.</p>\n<blockquote>\n<p>If the underlying field is final, a <code>Field</code> object has write access <strong>if and only if</strong></p>\n<ul>\n<li><code>setAccessible(true)</code> has succeeded for this <code>Field</code> object;</li>\n<li>the field is non-static; and</li>\n<li>the field's declaring class is not a hidden class; and</li>\n<li>the field's declaring class is not a record class.</li>\n</ul>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9148036,"reputation":11,"user_id":6803479,"display_name":"Andrei Marchanka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695816336,"creation_date":1695812586,"answer_id":77186891,"question_id":3301635,"body_markdown":"To make this worked with JDK 21 you can use option `-Djdk.reflect.useDirectMethodHandle=false`\r\n\r\nMake accessable for JDK 11 - 17\r\n\r\n        public static void setFieldAccessible(Field field) throws Exception {\r\n        field.setAccessible(true);\r\n        Method getDeclaredFields0 = Class.class.getDeclaredMethod(&quot;getDeclaredFields0&quot;, boolean.class);\r\n        getDeclaredFields0.setAccessible(true);\r\n        Field[] fields = (Field[]) getDeclaredFields0.invoke(Field.class, false);\r\n        for (Field each : fields) {\r\n            if (&quot;modifiers&quot;.equals(each.getName())) {\r\n                each.setAccessible(true);\r\n                each.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\r\n                break;\r\n            }\r\n        }\r\n    }","title":"Change private static final field using Java reflection","body":"<p>To make this worked with JDK 21 you can use option <code>-Djdk.reflect.useDirectMethodHandle=false</code></p>\n<p>Make accessable for JDK 11 - 17</p>\n<pre><code>    public static void setFieldAccessible(Field field) throws Exception {\n    field.setAccessible(true);\n    Method getDeclaredFields0 = Class.class.getDeclaredMethod(&quot;getDeclaredFields0&quot;, boolean.class);\n    getDeclaredFields0.setAccessible(true);\n    Field[] fields = (Field[]) getDeclaredFields0.invoke(Field.class, false);\n    for (Field each : fields) {\n        if (&quot;modifiers&quot;.equals(each.getName())) {\n            each.setAccessible(true);\n            each.setInt(field, field.getModifiers() &amp; ~Modifier.FINAL);\n            break;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":171067,"reputation":6573,"user_id":398237,"accept_rate":82,"display_name":"fixitagain"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361205,"favorite_count":0,"down_vote_count":1,"up_vote_count":568,"accepted_answer_id":3301720,"answer_count":15,"score":567,"last_activity_date":1695816336,"creation_date":1279730148,"question_id":3301635,"body_markdown":"I have a class with a `private static final` field that, unfortunately, I need to change it at run-time.\r\n\r\nUsing reflection I get this error: `java.lang.IllegalAccessException: Can not set static final boolean field`\r\n\r\nIs there any way to change the value?\r\n\r\n    Field hack = WarpTransform2D.class.getDeclaredField(&quot;USE_HACK&quot;);\r\n    hack.setAccessible(true);\r\n    hack.set(null, true);","title":"Change private static final field using Java reflection","body":"<p>I have a class with a <code>private static final</code> field that, unfortunately, I need to change it at run-time.</p>\n\n<p>Using reflection I get this error: <code>java.lang.IllegalAccessException: Can not set static final boolean field</code></p>\n\n<p>Is there any way to change the value?</p>\n\n<pre><code>Field hack = WarpTransform2D.class.getDeclaredField(\"USE_HACK\");\nhack.setAccessible(true);\nhack.set(null, true);\n</code></pre>\n"},{"tags":["java","encoding","intellij-idea","javac"],"comments":[{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1315591539,"post_id":7365612,"comment_id":8888965,"body_markdown":"I have no idea about IDEA, but why do you need a mixed-encoding source tree? Wouldn&#39;t converting all the files to UTF-8 make the life easier?","body":"I have no idea about IDEA, but why do you need a mixed-encoding source tree? Wouldn&#39;t converting all the files to UTF-8 make the life easier?"},{"owner":{"account_id":13566,"reputation":48835,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"score":0,"creation_date":1315862741,"post_id":7365612,"comment_id":8930897,"body_markdown":"The files in question have to do with regex matching in foreign-language data with known encodings. It&#39;s easier and less error-prone to write the regex in the encoding you&#39;re matching against... or so I assume. (I&#39;m new to this code base.)","body":"The files in question have to do with regex matching in foreign-language data with known encodings. It&#39;s easier and less error-prone to write the regex in the encoding you&#39;re matching against... or so I assume. (I&#39;m new to this code base.)"},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":1,"creation_date":1315863077,"post_id":7365612,"comment_id":8930976,"body_markdown":"When the strings are in memory, they are UTF-16 anyway, independent of the encoding the files were in (assuming you compiled them right). So while I can see why these files were created in these encodings, there is nothing speaking against converting them now. (Of course, you can also try to get the IDEA bug fixed.)","body":"When the strings are in memory, they are UTF-16 anyway, independent of the encoding the files were in (assuming you compiled them right). So while I can see why these files were created in these encodings, there is nothing speaking against converting them now. (Of course, you can also try to get the IDEA bug fixed.)"}],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1315593710,"creation_date":1315593710,"answer_id":7366063,"question_id":7365612,"body_markdown":"Looks like a [known bug][1].\r\n\r\n\r\n  [1]: http://youtrack.jetbrains.net/issue/IDEA-72193","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>Looks like a <a href=\"http://youtrack.jetbrains.net/issue/IDEA-72193\" rel=\"nofollow\">known bug</a>.</p>\n"},{"tags":[],"owner":{"account_id":1361548,"reputation":1773,"user_id":1298815,"display_name":"obe6"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1349595674,"creation_date":1349595674,"answer_id":12767015,"question_id":7365612,"body_markdown":"I solved this issue adding this property in IntelliJ option panel *Compiler/Java Compiler* : \r\n\r\n*Additional command line parameters* : `-encoding ISO-8859-1`\r\n\r\n","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>I solved this issue adding this property in IntelliJ option panel <em>Compiler/Java Compiler</em> : </p>\n\n<p><em>Additional command line parameters</em> : <code>-encoding ISO-8859-1</code></p>\n"},{"tags":[],"owner":{"account_id":397001,"reputation":8330,"user_id":760893,"accept_rate":90,"display_name":"Sonhja"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1628667518,"creation_date":1390300584,"answer_id":21255621,"question_id":7365612,"body_markdown":"If you are using Intellij, the fastest way for me was:\r\n\r\n`File -&gt; File Properties-&gt; File encoding`\r\n\r\nand choose the one you want, in this case `ISO-8859-1`.","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>If you are using Intellij, the fastest way for me was:</p>\n<p><code>File -&gt; File Properties-&gt; File encoding</code></p>\n<p>and choose the one you want, in this case <code>ISO-8859-1</code>.</p>\n"},{"tags":[],"owner":{"account_id":11871812,"reputation":41,"user_id":8687799,"display_name":"chc"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1571809646,"creation_date":1506583252,"answer_id":46463214,"question_id":7365612,"body_markdown":"I have UTF-8 encoding in encoding.xml as follows, but still not working. keeps getting error &quot;Error: java: error: unmappable character (0xFE) for encoding UTF-8&quot;\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project version=&quot;4&quot;&gt;\r\n  &lt;component name=&quot;Encoding&quot; defaultCharsetForPropertiesFiles=&quot;UTF-8&quot;&gt;\r\n    &lt;file url=&quot;file://$PROJECT_DIR$&quot; charset=&quot;UTF-8&quot; /&gt;\r\n    &lt;file url=&quot;PROJECT&quot; charset=&quot;UTF-8&quot; /&gt;\r\n  &lt;/component&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>I have UTF-8 encoding in encoding.xml as follows, but still not working. keeps getting error \"Error: java: error: unmappable character (0xFE) for encoding UTF-8\"</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project version=\"4\"&gt;\n  &lt;component name=\"Encoding\" defaultCharsetForPropertiesFiles=\"UTF-8\"&gt;\n    &lt;file url=\"file://$PROJECT_DIR$\" charset=\"UTF-8\" /&gt;\n    &lt;file url=\"PROJECT\" charset=\"UTF-8\" /&gt;\n  &lt;/component&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12726107,"reputation":36,"user_id":9244597,"display_name":"Stabak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615204149,"creation_date":1615204149,"answer_id":66529331,"question_id":7365612,"body_markdown":"Solution tested in IntelliJ 2019.3\r\n\r\nOpen the troublesome file. Go to File -&gt; File Encoding. (*You also have a quick option at the bottom right*) Select the encoding you want. In my case it was UTF-8. Click on Convert when it prompts you if you want to convert the file in new encoding and overwrite the contents.\r\n\r\nTry to compile. You should be able to compile fine.","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>Solution tested in IntelliJ 2019.3</p>\n<p>Open the troublesome file. Go to File -&gt; File Encoding. (<em>You also have a quick option at the bottom right</em>) Select the encoding you want. In my case it was UTF-8. Click on Convert when it prompts you if you want to convert the file in new encoding and overwrite the contents.</p>\n<p>Try to compile. You should be able to compile fine.</p>\n"},{"tags":[],"owner":{"account_id":5529969,"reputation":301,"user_id":4390278,"display_name":"iDevSpread"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695816327,"creation_date":1695816327,"answer_id":77187356,"question_id":7365612,"body_markdown":"Change &quot;Javac&quot; to &quot;Eclipse&quot; in Java Compiler\r\n\r\nI met the same error message, and tried the methods above that did not work well for me. \r\n\r\nBut I change the setting in Compiler. In the panel &quot;Use compiler&quot;, click and choose Eclipse. \r\n\r\nDone.","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>Change &quot;Javac&quot; to &quot;Eclipse&quot; in Java Compiler</p>\n<p>I met the same error message, and tried the methods above that did not work well for me.</p>\n<p>But I change the setting in Compiler. In the panel &quot;Use compiler&quot;, click and choose Eclipse.</p>\n<p>Done.</p>\n"}],"owner":{"account_id":13566,"reputation":48835,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43021,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":6,"score":21,"last_activity_date":1695816327,"creation_date":1315591277,"question_id":7365612,"body_markdown":"I have a mixed-encoding source tree and I&#39;m getting the warning above for some of my source files. I managed to sucessfully set the encoding for those files to ISO 8859-1 and, after invalidating IDEA&#39;s caches, they now display correctly in the editor. However, when I compile, I still get the error message.\r\n\r\nProduction builds use ant and it&#39;s not an issue there, but it means I can&#39;t &quot;make&quot; in the IDE. Is there a way to get IDEA to compile these correctly, or failing that, drop the error down to a warning?","title":"Intellij IDEA: &quot;unmappable character for encoding UTF-8&quot; compiling ISO-8859-1 files","body":"<p>I have a mixed-encoding source tree and I'm getting the warning above for some of my source files. I managed to sucessfully set the encoding for those files to ISO 8859-1 and, after invalidating IDEA's caches, they now display correctly in the editor. However, when I compile, I still get the error message.</p>\n\n<p>Production builds use ant and it's not an issue there, but it means I can't \"make\" in the IDE. Is there a way to get IDEA to compile these correctly, or failing that, drop the error down to a warning?</p>\n"},{"tags":["java","mybatis"],"answers":[{"tags":[],"owner":{"account_id":6087813,"reputation":15135,"user_id":4751165,"accept_rate":96,"display_name":"Pau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476102008,"creation_date":1476102008,"answer_id":39958167,"question_id":39957637,"body_markdown":"You need to specify the `ResultType` adding the annotation `@ResultType` and the value type you expect (`java.lang.String`).\r\n\r\n    @Select(getAll)\r\n    @ResultType(&quot;java.lang.String&quot;)\r\n    List&lt;String&gt; getAll();\r\n\r\n","title":"MyBatis mapping result to List&lt;String&gt; in MyBatisRepository and annotations","body":"<p>You need to specify the <code>ResultType</code> adding the annotation <code>@ResultType</code> and the value type you expect (<code>java.lang.String</code>).</p>\n\n<pre><code>@Select(getAll)\n@ResultType(\"java.lang.String\")\nList&lt;String&gt; getAll();\n</code></pre>\n"}],"owner":{"account_id":7385237,"reputation":2762,"user_id":5620472,"accept_rate":23,"display_name":"user5620472"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695816265,"creation_date":1476100310,"question_id":39957637,"body_markdown":"I have a select &quot;Select * FROM HZ....&quot; and it returns just one column (String)\r\n\r\n    NAME\r\n    name1\r\n    name2\r\n    name3\r\n    ....\r\n\r\nI need to map this result to a List&lt;String&gt;\r\n\r\nI&#39;ve tried using a `Model` class with a String properties like next:\r\n\r\n    public interface ModelReport {\r\n       String getAll = &quot;Selct * FROM HZ....&quot;;\r\n\r\n       @Select(getAll)\r\n       @Results(value = {\r\n            @Result(property = &quot;NAME&quot;, column = &quot;NAME&quot;),\r\n       })\r\n       List&lt;Model&gt;getAll();\r\n    }\r\n\r\n\r\n    class Model{\r\n      String NAME;\r\n    }\r\n\r\nBut I do not want create model without a class just with a List of Strings. How can I do it?\r\n\r\nI&#39;ve tried the next, but it doesn&#39;t work.\r\n\r\n    @Select(getAll)\r\n    List&lt;String&gt; getAll();\r\n","title":"MyBatis mapping result to List&lt;String&gt; in MyBatisRepository and annotations","body":"<p>I have a select \"Select * FROM HZ....\" and it returns just one column (String)</p>\n\n<pre><code>NAME\nname1\nname2\nname3\n....\n</code></pre>\n\n<p>I need to map this result to a List</p>\n\n<p>I've tried using a <code>Model</code> class with a String properties like next:</p>\n\n<pre><code>public interface ModelReport {\n   String getAll = \"Selct * FROM HZ....\";\n\n   @Select(getAll)\n   @Results(value = {\n        @Result(property = \"NAME\", column = \"NAME\"),\n   })\n   List&lt;Model&gt;getAll();\n}\n\n\nclass Model{\n  String NAME;\n}\n</code></pre>\n\n<p>But I do not want create model without a class just with a List of Strings. How can I do it?</p>\n\n<p>I've tried the next, but it doesn't work.</p>\n\n<pre><code>@Select(getAll)\nList&lt;String&gt; getAll();\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"score":1,"creation_date":1517308548,"post_id":48518841,"comment_id":84033155,"body_markdown":"Possible duplicate of [Determine size of HTTP Response?](https://stackoverflow.com/questions/5435351/determine-size-of-http-response)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/5435351/determine-size-of-http-response\">Determine size of HTTP Response?</a>"}],"answers":[{"tags":[],"owner":{"account_id":11024424,"reputation":81,"user_id":8097748,"display_name":"Maksim Petrusevich"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517308071,"creation_date":1517308071,"answer_id":48519164,"question_id":48518841,"body_markdown":"I think you can get content size from response headers. It&#39;s will seems something like that:\r\n\r\n    response.getHeader(&quot;Content-Length&quot;);\r\nFor reference:\r\n\r\nhttps://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#getHeader(java.lang.String)\r\n\r\nhttps://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html (Section - 14.13 Content-Length)","title":"get the size of the response content","body":"<p>I think you can get content size from response headers. It's will seems something like that:</p>\n\n<pre><code>response.getHeader(\"Content-Length\");\n</code></pre>\n\n<p>For reference:</p>\n\n<p><a href=\"https://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#getHeader(java.lang.String)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#getHeader(java.lang.String)</a></p>\n\n<p><a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\" rel=\"nofollow noreferrer\">https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html</a> (Section - 14.13 Content-Length)</p>\n"}],"owner":{"account_id":5915010,"reputation":127,"user_id":4654109,"display_name":"Jonathan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3751,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695814980,"creation_date":1517307158,"question_id":48518841,"body_markdown":"I&#39;m using an interceptor that will intercept before and after the request. The purpose of this is to get the size of the content sent and returned, however, I do not know of a way to get the answer, it seems that the **response** does not have a method to get it.\r\n\r\n    @Component\r\n    public class DataUsageInterceptor extends HandlerInterceptorAdapter {\r\n\r\n        private static final Logger LOG = LoggerFactory.getLogger(CheckController.class);\r\n\r\n        @Override\r\n        public boolean preHandle(\r\n                HttpServletRequest request,\r\n                HttpServletResponse response,\r\n                Object handler\r\n        ) throws Exception {\r\n\r\n            System.out.println(&quot;---- &quot; + request.getContentLength() + &quot;----------&quot;);\r\n\r\n            return super.preHandle(request, response, handler);\r\n        }\r\n\r\n        @Override\r\n        public void afterCompletion(\r\n                HttpServletRequest request,\r\n                HttpServletResponse response,\r\n                Object handler, Exception ex\r\n        ) throws Exception {\r\n\r\n            System.out.println(&quot;---------- get length here ----------------&quot;);\r\n\r\n        }\r\n    }","title":"get the size of the response content","body":"<p>I'm using an interceptor that will intercept before and after the request. The purpose of this is to get the size of the content sent and returned, however, I do not know of a way to get the answer, it seems that the <strong>response</strong> does not have a method to get it.</p>\n\n<pre><code>@Component\npublic class DataUsageInterceptor extends HandlerInterceptorAdapter {\n\n    private static final Logger LOG = LoggerFactory.getLogger(CheckController.class);\n\n    @Override\n    public boolean preHandle(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            Object handler\n    ) throws Exception {\n\n        System.out.println(\"---- \" + request.getContentLength() + \"----------\");\n\n        return super.preHandle(request, response, handler);\n    }\n\n    @Override\n    public void afterCompletion(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            Object handler, Exception ex\n    ) throws Exception {\n\n        System.out.println(\"---------- get length here ----------------\");\n\n    }\n}\n</code></pre>\n"},{"tags":["java","io","httpresponse"],"answers":[{"tags":[],"owner":{"account_id":47744,"reputation":5200,"user_id":141522,"accept_rate":94,"display_name":"David Weiser"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1301071468,"creation_date":1301071468,"answer_id":5435455,"question_id":5435351,"body_markdown":"[This](http://www.coderanch.com/t/364514/Servlets/java/calculate-size-output-HttpServletResponse) seems to be what you&#39;re looking for:\r\n\r\n    DataOutputStream dos = new DataOutputStream(response.getOutputStream());\r\n    ...\r\n    int len = dos.size();","title":"Determine size of HTTP Response?","body":"<p><a href=\"http://www.coderanch.com/t/364514/Servlets/java/calculate-size-output-HttpServletResponse\" rel=\"nofollow\">This</a> seems to be what you're looking for:</p>\n\n<pre><code>DataOutputStream dos = new DataOutputStream(response.getOutputStream());\n...\nint len = dos.size();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":251084,"reputation":6048,"user_id":528211,"accept_rate":91,"display_name":"Rafael Colucci"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1301071898,"creation_date":1301071898,"answer_id":5435555,"question_id":5435351,"body_markdown":"If you have access to the response header, you can read the `Content-Length`. \r\n\r\nHere is a example of a response header:\r\n\r\n    (Status-Line):HTTP/1.1 200 OK\r\n    Connection:Keep-Alive\r\n    Date:Fri, 25 Mar 2011 16:26:56 GMT\r\n    Content-Length:728\r\n\r\nCheck this out: [Header Field Definitions][1]\r\n\r\n\r\n  [1]: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html","title":"Determine size of HTTP Response?","body":"<p>If you have access to the response header, you can read the <code>Content-Length</code>. </p>\n\n<p>Here is a example of a response header:</p>\n\n<pre><code>(Status-Line):HTTP/1.1 200 OK\nConnection:Keep-Alive\nDate:Fri, 25 Mar 2011 16:26:56 GMT\nContent-Length:728\n</code></pre>\n\n<p>Check this out: <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html\" rel=\"noreferrer\">Header Field Definitions</a></p>\n"},{"tags":[],"owner":{"account_id":193947,"reputation":1538,"user_id":435978,"accept_rate":88,"display_name":"BigMac66"},"down_vote_count":3,"up_vote_count":3,"is_accepted":true,"score":0,"last_activity_date":1301340360,"creation_date":1301340360,"answer_id":5463984,"question_id":5435351,"body_markdown":"I eventually found a way to get what I wanted:\r\n\r\n    URLConnection con = servletURL.openConnection();\r\n    BufferedInputStream bif = new BufferedInputStream(con.getInputStream());\r\n    ObjectInputStream input = new ObjectInputStream(bif);\r\n    int avail = bif.available();\r\n    \r\n    System.out.println(&quot;Response content size = &quot; + avail);\r\n\r\nThis allowed me to see the response size on the client.  I still would like to know what it is on the server side before it is sent but this was the next best thing.","title":"Determine size of HTTP Response?","body":"<p>I eventually found a way to get what I wanted:</p>\n\n<pre><code>URLConnection con = servletURL.openConnection();\nBufferedInputStream bif = new BufferedInputStream(con.getInputStream());\nObjectInputStream input = new ObjectInputStream(bif);\nint avail = bif.available();\n\nSystem.out.println(\"Response content size = \" + avail);\n</code></pre>\n\n<p>This allowed me to see the response size on the client.  I still would like to know what it is on the server side before it is sent but this was the next best thing.</p>\n"},{"tags":[],"owner":{"account_id":211872,"reputation":7501,"user_id":464306,"accept_rate":92,"display_name":"gdejohn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360729294,"creation_date":1360729294,"answer_id":14846343,"question_id":5435351,"body_markdown":"Assuming the use of `ObjectOutputStream`, build it around a `java.io.ByteArrayOutputStream`:\r\n\r\n    ByteArrayOutputStream contentBytes = new ByteArrayOutputStream();\r\n    \r\n    ObjectOutputStream objectOut = new ObjectOutputStream(contentBytes);\r\n    \r\n    objectOut.writeObject(content);\r\n    \r\n    int contentLength = contentBytes.size();\r\n\r\nAnd then you can send the content with\r\n\r\n    contentBytes.writeTo(connection.getOutputStream());\r\n\r\nwhere `connection` is whatever you&#39;re getting your `OutputStream` from.\r\n\r\nBetter late than never, right?","title":"Determine size of HTTP Response?","body":"<p>Assuming the use of <code>ObjectOutputStream</code>, build it around a <code>java.io.ByteArrayOutputStream</code>:</p>\n\n<pre><code>ByteArrayOutputStream contentBytes = new ByteArrayOutputStream();\n\nObjectOutputStream objectOut = new ObjectOutputStream(contentBytes);\n\nobjectOut.writeObject(content);\n\nint contentLength = contentBytes.size();\n</code></pre>\n\n<p>And then you can send the content with</p>\n\n<pre><code>contentBytes.writeTo(connection.getOutputStream());\n</code></pre>\n\n<p>where <code>connection</code> is whatever you're getting your <code>OutputStream</code> from.</p>\n\n<p>Better late than never, right?</p>\n"},{"tags":[],"owner":{"account_id":295514,"reputation":2157,"user_id":599971,"accept_rate":55,"display_name":"ejaenv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695814819,"creation_date":1695814819,"answer_id":77187176,"question_id":5435351,"body_markdown":"if you use Catalina, this worked for me:\r\n\r\n    import org.apache.catalina.connector.ResponseFacade\r\n    ...\r\n    long len=((ResponseFacade) response).getContentWritten();\r\n\r\n","title":"Determine size of HTTP Response?","body":"<p>if you use Catalina, this worked for me:</p>\n<pre><code>import org.apache.catalina.connector.ResponseFacade\n...\nlong len=((ResponseFacade) response).getContentWritten();\n</code></pre>\n"}],"owner":{"account_id":193947,"reputation":1538,"user_id":435978,"accept_rate":88,"display_name":"BigMac66"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52865,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":5463984,"answer_count":5,"score":9,"last_activity_date":1695814819,"creation_date":1301070922,"question_id":5435351,"body_markdown":"Is there a way to determine the size of the `HTTPServletResponse` content?  I read this [get-size-of-http-response-in-java][1] question but sadly where I work I do not have access to CommonsIO :(\r\n\r\nThe response content consists of a single complex object so I have considered writing it out to a temp file and then checking that file.  This is not something I want to be doing as a diagnostic while the application is running in production though so want to avoid it if at all possible.\r\n\r\nPS I read erickson&#39;s answer but it mentioned input streams I want to know the size of the object being written out...  Would be really nice if the `writeObject()` method returned a number representing bytes written instead of `void`...\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1674129/get-size-of-http-response-in-java","title":"Determine size of HTTP Response?","body":"<p>Is there a way to determine the size of the <code>HTTPServletResponse</code> content?  I read this <a href=\"https://stackoverflow.com/questions/1674129/get-size-of-http-response-in-java\">get-size-of-http-response-in-java</a> question but sadly where I work I do not have access to CommonsIO :(</p>\n\n<p>The response content consists of a single complex object so I have considered writing it out to a temp file and then checking that file.  This is not something I want to be doing as a diagnostic while the application is running in production though so want to avoid it if at all possible.</p>\n\n<p>PS I read erickson's answer but it mentioned input streams I want to know the size of the object being written out...  Would be really nice if the <code>writeObject()</code> method returned a number representing bytes written instead of <code>void</code>...</p>\n"},{"tags":["java","cassandra","cql"],"comments":[{"owner":{"account_id":10364565,"reputation":4778,"user_id":7644018,"display_name":"Paul T."},"score":0,"creation_date":1695817435,"post_id":77187172,"comment_id":136074377,"body_markdown":"Possibly run a query of a few (or several, if necessary) comma separated tables in the from clause withOUT any join conditions or a where clause. The idea is that if the tables have enough rows, the cross product of the running query will exceed the timeout. I&#39;m not familiar with Cassandra, but some other DBs have a sleep() that can be used in a similar way as the thread sleep.","body":"Possibly run a query of a few (or several, if necessary) comma separated tables in the from clause withOUT any join conditions or a where clause. The idea is that if the tables have enough rows, the cross product of the running query will exceed the timeout. I&#39;m not familiar with Cassandra, but some other DBs have a sleep() that can be used in a similar way as the thread sleep."},{"owner":{"account_id":21922749,"reputation":21,"user_id":16205781,"display_name":"dtekunov"},"score":0,"creation_date":1695896027,"post_id":77187172,"comment_id":136086185,"body_markdown":"@PaulT. as far as I understand, there is no sleep() function alternative in Cassandra","body":"@PaulT. as far as I understand, there is no sleep() function alternative in Cassandra"},{"owner":{"account_id":38661,"reputation":26799,"user_id":111124,"accept_rate":83,"display_name":"Andrew"},"score":0,"creation_date":1695921199,"post_id":77187172,"comment_id":136091578,"body_markdown":"Select count(*) on a large enough table.","body":"Select count(*) on a large enough table."}],"owner":{"account_id":21922749,"reputation":21,"user_id":16205781,"display_name":"dtekunov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695814752,"creation_date":1695814752,"question_id":77187172,"body_markdown":"I am writing an integration test for a part of my application and I want to test that my custom `readTimeoutMillis` property is set and works as expected.\r\n\r\n\r\nIn order to do so, I want to simulate a heavy query, which takes more time than `readTimeoutMillis`, but I don&#39;t want to use external tools like scassandra or cassandra-stress.\r\n\r\nIn Java, I would use something like `Thread.sleep(N)` to simulate such behaviour, but I cannot find a way to do this with just CQL.","title":"How to simulate a &#39;heavy&#39; query in Cassandra?","body":"<p>I am writing an integration test for a part of my application and I want to test that my custom <code>readTimeoutMillis</code> property is set and works as expected.</p>\n<p>In order to do so, I want to simulate a heavy query, which takes more time than <code>readTimeoutMillis</code>, but I don't want to use external tools like scassandra or cassandra-stress.</p>\n<p>In Java, I would use something like <code>Thread.sleep(N)</code> to simulate such behaviour, but I cannot find a way to do this with just CQL.</p>\n"},{"tags":["java","intellij-idea","intellij-plugin"],"answers":[{"tags":[],"owner":{"account_id":7051471,"reputation":703,"user_id":5400374,"display_name":"Samir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695814597,"creation_date":1695709251,"answer_id":77177430,"question_id":77122295,"body_markdown":"From the information you provided and the pastebin links, let&#39;s try to diagnose the issues.\r\n\r\n1. **&quot;Nothing to Show&quot; Issue**:\r\n   The &quot;Nothing to Show&quot; issue typically arises when your custom `ModuleWizardStep` is not being initialized properly or returned correctly in your `ModuleBuilder`.\r\n\r\n2. **Duplicate Wizard Step**:\r\n   When you say &quot;a duplicate shows up&quot; after clicking &quot;Next&quot;, it typically means that your `ModuleBuilder` is returning multiple instances of your custom `ModuleWizardStep`.\r\n\r\nLet&#39;s tackle the problems:\r\n\r\n#### 1. Address the &quot;Nothing to Show&quot; Issue:\r\nEnsure that your `DemoModuleBuilder`&#39;s `getModuleType()` method is returning the correct `ModuleType`. The instance you return from `getModuleType()` should match the instance that is registered in your `plugin.xml`.\r\n\r\nIn `DemoModuleBuilder.java`:\r\n\r\n```java\r\n@Override\r\npublic ModuleType&lt;?&gt; getModuleType() {\r\n    return DemoModuleType.getInstance();\r\n}\r\n```\r\n\r\nAnd in `DemoModuleType.java`, ensure your `DemoModuleType` singleton is properly initialized:\r\n\r\n```java\r\npublic static DemoModuleType getInstance() {\r\n    return (DemoModuleType) ModuleTypeManager.getInstance().findByID(ID);\r\n}\r\n```\r\n\r\n#### 2. Address the Duplicate Wizard Step Issue:\r\n\r\nEnsure that you&#39;re only returning one instance of your `ModuleWizardStep` in the `getCustomOptionsStep()` of your `DemoModuleBuilder`. Any other methods that can return a `ModuleWizardStep` should also be checked to ensure they&#39;re not inadvertently adding additional steps.\r\n\r\nIn `DemoModuleBuilder.java`:\r\n\r\n```java\r\n@Override\r\npublic ModuleWizardStep[] getCustomOptionsStep(WizardContext context, Disposable parentDisposable) {\r\n    return new ModuleWizardStep[]{\r\n        new DemoModuleWizardStep()\r\n    };\r\n}\r\n```\r\n\r\nMake sure that if you override other methods like `createWizardSteps()`, they are not inadvertently adding extra steps.","title":"IntelliJ plugin not showing data on the main Project creation Wizard, instead I need to click next. What can cause this?","body":"<p>From the information you provided and the pastebin links, let's try to diagnose the issues.</p>\n<ol>\n<li><p><strong>&quot;Nothing to Show&quot; Issue</strong>:\nThe &quot;Nothing to Show&quot; issue typically arises when your custom <code>ModuleWizardStep</code> is not being initialized properly or returned correctly in your <code>ModuleBuilder</code>.</p>\n</li>\n<li><p><strong>Duplicate Wizard Step</strong>:\nWhen you say &quot;a duplicate shows up&quot; after clicking &quot;Next&quot;, it typically means that your <code>ModuleBuilder</code> is returning multiple instances of your custom <code>ModuleWizardStep</code>.</p>\n</li>\n</ol>\n<p>Let's tackle the problems:</p>\n<h4>1. Address the &quot;Nothing to Show&quot; Issue:</h4>\n<p>Ensure that your <code>DemoModuleBuilder</code>'s <code>getModuleType()</code> method is returning the correct <code>ModuleType</code>. The instance you return from <code>getModuleType()</code> should match the instance that is registered in your <code>plugin.xml</code>.</p>\n<p>In <code>DemoModuleBuilder.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic ModuleType&lt;?&gt; getModuleType() {\n    return DemoModuleType.getInstance();\n}\n</code></pre>\n<p>And in <code>DemoModuleType.java</code>, ensure your <code>DemoModuleType</code> singleton is properly initialized:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static DemoModuleType getInstance() {\n    return (DemoModuleType) ModuleTypeManager.getInstance().findByID(ID);\n}\n</code></pre>\n<h4>2. Address the Duplicate Wizard Step Issue:</h4>\n<p>Ensure that you're only returning one instance of your <code>ModuleWizardStep</code> in the <code>getCustomOptionsStep()</code> of your <code>DemoModuleBuilder</code>. Any other methods that can return a <code>ModuleWizardStep</code> should also be checked to ensure they're not inadvertently adding additional steps.</p>\n<p>In <code>DemoModuleBuilder.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic ModuleWizardStep[] getCustomOptionsStep(WizardContext context, Disposable parentDisposable) {\n    return new ModuleWizardStep[]{\n        new DemoModuleWizardStep()\n    };\n}\n</code></pre>\n<p>Make sure that if you override other methods like <code>createWizardSteps()</code>, they are not inadvertently adding extra steps.</p>\n"}],"owner":{"account_id":21268771,"reputation":75,"user_id":15648623,"display_name":"elpideus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695814597,"creation_date":1694961628,"question_id":77122295,"body_markdown":"I am making a plugin for Intellij Idea and I am encountering a problem in the project creation phase.\r\n\r\nWhen I click on my plugin in the Project Creation Wizard &quot;Additional Libraries and Frameworks:&quot; with a big square with &quot;Nothing to show&quot; in the center shows up.\r\nI have to click on the &quot;Next&quot; button in order for my settings to show up. \r\nI do not understand what is causing this. Below my plugin.xml if you need it.\r\n\r\n```xml\r\n&lt;!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. --&gt;\r\n&lt;!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html --&gt;\r\n\r\n&lt;idea-plugin&gt;\r\n\r\n  &lt;!-- Unique id for this plugin. Must stay constant for the life of the plugin. --&gt;\r\n  &lt;id&gt;org.intellij.sdk.project.wizard&lt;/id&gt;\r\n\r\n  &lt;!-- Text to display as name on Settings | Plugin page --&gt;\r\n  &lt;name&gt;SDK: Project Wizard Demo&lt;/name&gt;\r\n\r\n  &lt;!-- Product and plugin compatibility requirements --&gt;\r\n  &lt;depends&gt;com.intellij.modules.platform&lt;/depends&gt;\r\n\r\n  &lt;!-- Text to display as description on Settings | Plugin page --&gt;\r\n  &lt;description&gt;\r\n    &lt;![CDATA[\r\n      Demonstrates working with the Project Wizard.\r\n    ]]&gt;\r\n  &lt;/description&gt;\r\n  &lt;change-notes&gt;\r\n    &lt;![CDATA[\r\n      &lt;ul&gt;\r\n        &lt;li&gt;&lt;b&gt;2.0.0&lt;/b&gt; Convert to Gradle-based plugin&lt;/li&gt;\r\n        &lt;li&gt;&lt;b&gt;1.0.0&lt;/b&gt; Release 2018.3 and earlier.&lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    ]]&gt;\r\n  &lt;/change-notes&gt;\r\n\r\n  &lt;!-- Text to display as company information on Settings | Plugin page --&gt;\r\n  &lt;vendor url=&quot;https://plugins.jetbrains.com&quot;&gt;IntelliJ Platform SDK&lt;/vendor&gt;\r\n\r\n  &lt;extensions defaultExtensionNs=&quot;com.intellij&quot;&gt;\r\n    &lt;moduleType\r\n            id=&quot;DEMO_MODULE_TYPE&quot;\r\n            implementationClass=&quot;org.intellij.sdk.project.wizard.DemoModuleType&quot;/&gt;\r\n  &lt;/extensions&gt;\r\n\r\n&lt;/idea-plugin&gt;\r\n```\r\n\r\nUPDATE:\r\n\r\nI managed to make the &quot;Additional Libraries and Frameworks:&quot; section be replaced my my plugin&#39;s Wizard Step. However now, when I press &quot;Next&quot;, a duplicate shows up.\r\n\r\nUPDATE 2:\r\nHere are the Pastebin links to my code:\r\n\r\n    DemoModuleWizardStep.java: https://pastebin.com/tHSw0bbS\r\n    DemoModuleType.java: https://pastebin.com/QBh5LkDg\r\n    DemoModuleBuilder.java: https://pastebin.com/BBhCMPNd\r\n\r\nAlso, I am editing the IntelliJ IDEA&#39;s code found here: \r\nhttps://github.com/JetBrains/intellij-sdk-code-samples/tree/main/project_wizard\r\n\r\n\r\n  [1]: https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/project_wizard","title":"IntelliJ plugin not showing data on the main Project creation Wizard, instead I need to click next. What can cause this?","body":"<p>I am making a plugin for Intellij Idea and I am encountering a problem in the project creation phase.</p>\n<p>When I click on my plugin in the Project Creation Wizard &quot;Additional Libraries and Frameworks:&quot; with a big square with &quot;Nothing to show&quot; in the center shows up.\nI have to click on the &quot;Next&quot; button in order for my settings to show up.\nI do not understand what is causing this. Below my plugin.xml if you need it.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Copyright 2000-2023 JetBrains s.r.o. and other contributors. Use of this source code is governed by the Apache 2.0 license that can be found in the LICENSE file. --&gt;\n&lt;!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html --&gt;\n\n&lt;idea-plugin&gt;\n\n  &lt;!-- Unique id for this plugin. Must stay constant for the life of the plugin. --&gt;\n  &lt;id&gt;org.intellij.sdk.project.wizard&lt;/id&gt;\n\n  &lt;!-- Text to display as name on Settings | Plugin page --&gt;\n  &lt;name&gt;SDK: Project Wizard Demo&lt;/name&gt;\n\n  &lt;!-- Product and plugin compatibility requirements --&gt;\n  &lt;depends&gt;com.intellij.modules.platform&lt;/depends&gt;\n\n  &lt;!-- Text to display as description on Settings | Plugin page --&gt;\n  &lt;description&gt;\n    &lt;![CDATA[\n      Demonstrates working with the Project Wizard.\n    ]]&gt;\n  &lt;/description&gt;\n  &lt;change-notes&gt;\n    &lt;![CDATA[\n      &lt;ul&gt;\n        &lt;li&gt;&lt;b&gt;2.0.0&lt;/b&gt; Convert to Gradle-based plugin&lt;/li&gt;\n        &lt;li&gt;&lt;b&gt;1.0.0&lt;/b&gt; Release 2018.3 and earlier.&lt;/li&gt;\n      &lt;/ul&gt;\n    ]]&gt;\n  &lt;/change-notes&gt;\n\n  &lt;!-- Text to display as company information on Settings | Plugin page --&gt;\n  &lt;vendor url=&quot;https://plugins.jetbrains.com&quot;&gt;IntelliJ Platform SDK&lt;/vendor&gt;\n\n  &lt;extensions defaultExtensionNs=&quot;com.intellij&quot;&gt;\n    &lt;moduleType\n            id=&quot;DEMO_MODULE_TYPE&quot;\n            implementationClass=&quot;org.intellij.sdk.project.wizard.DemoModuleType&quot;/&gt;\n  &lt;/extensions&gt;\n\n&lt;/idea-plugin&gt;\n</code></pre>\n<p>UPDATE:</p>\n<p>I managed to make the &quot;Additional Libraries and Frameworks:&quot; section be replaced my my plugin's Wizard Step. However now, when I press &quot;Next&quot;, a duplicate shows up.</p>\n<p>UPDATE 2:\nHere are the Pastebin links to my code:</p>\n<pre><code>DemoModuleWizardStep.java: https://pastebin.com/tHSw0bbS\nDemoModuleType.java: https://pastebin.com/QBh5LkDg\nDemoModuleBuilder.java: https://pastebin.com/BBhCMPNd\n</code></pre>\n<p>Also, I am editing the IntelliJ IDEA's code found here:\n<a href=\"https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/project_wizard\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-sdk-code-samples/tree/main/project_wizard</a></p>\n"},{"tags":["java","quarkus"],"answers":[{"tags":[],"owner":{"account_id":11222708,"reputation":589,"user_id":8233361,"display_name":"Claudio Weiler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670343352,"creation_date":1670343352,"answer_id":74705764,"question_id":74705495,"body_markdown":"There is no such type of `Scheduled` tasks.\r\n\r\n---\r\n\r\nThis design is awkward. Imagine you have 1.000 users, you will have 1.000 tasks, more users, more tasks and threads. Threads are a limited resource, so you will have problems.\r\n\r\nWhat to do? Just create one common tasks, started with application (startup), and do what you need on your active users.","title":"How to make scheduled periodic task started by event in java (quarkus)?","body":"<p>There is no such type of <code>Scheduled</code> tasks.</p>\n<hr />\n<p>This design is awkward. Imagine you have 1.000 users, you will have 1.000 tasks, more users, more tasks and threads. Threads are a limited resource, so you will have problems.</p>\n<p>What to do? Just create one common tasks, started with application (startup), and do what you need on your active users.</p>\n"},{"tags":[],"owner":{"account_id":29491235,"reputation":13,"user_id":22600216,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695813869,"creation_date":1695813869,"answer_id":77187056,"question_id":74705495,"body_markdown":"You can create a Scheduled Task with a start / stop parameter.\r\n\r\n    @Scheduled(every = maxLifetimeBearerToken + &quot;s&quot;, skipExecutionIf = TestPredicate.class)\r\n\r\nHere I created one for Bearer Token Check. If a bearer Toke is already generated, the @Scheduled skipExecutionIf will be false and the scheduler will be run. If the condition is true, it will skip. \r\n\r\nSo you have to set in your Methods to true and false. If user is deleted set          `myPredicate.setSkip(true);`\r\n\r\nOn create user set\r\n\r\n    myPredicate.setSkip(false);\r\n\r\n    @Singleton\r\n    public class TestPredicate implements Scheduled.SkipPredicate {\r\n        private boolean skip = true;\r\n        public boolean isSkip() {\r\n            return skip;\r\n        }\r\n        public void setSkip(boolean skip) {\r\n            this.skip = skip;\r\n        }\r\n        @Override\r\n        public boolean test(ScheduledExecution execution) {\r\n            return skip;\r\n        }\r\n    }\r\n\r\nAnd \r\n\r\n    @Scheduled(cron =&quot;yourCronTrigger&quot;, skipExecutionIf = TestPredicate.class)\r\n    Yourmethod(){......}\r\n\r\n\r\nSorry for my bad english.","title":"How to make scheduled periodic task started by event in java (quarkus)?","body":"<p>You can create a Scheduled Task with a start / stop parameter.</p>\n<pre><code>@Scheduled(every = maxLifetimeBearerToken + &quot;s&quot;, skipExecutionIf = TestPredicate.class)\n</code></pre>\n<p>Here I created one for Bearer Token Check. If a bearer Toke is already generated, the @Scheduled skipExecutionIf will be false and the scheduler will be run. If the condition is true, it will skip.</p>\n<p>So you have to set in your Methods to true and false. If user is deleted set          <code>myPredicate.setSkip(true);</code></p>\n<p>On create user set</p>\n<pre><code>myPredicate.setSkip(false);\n\n@Singleton\npublic class TestPredicate implements Scheduled.SkipPredicate {\n    private boolean skip = true;\n    public boolean isSkip() {\n        return skip;\n    }\n    public void setSkip(boolean skip) {\n        this.skip = skip;\n    }\n    @Override\n    public boolean test(ScheduledExecution execution) {\n        return skip;\n    }\n}\n</code></pre>\n<p>And</p>\n<pre><code>@Scheduled(cron =&quot;yourCronTrigger&quot;, skipExecutionIf = TestPredicate.class)\nYourmethod(){......}\n</code></pre>\n<p>Sorry for my bad english.</p>\n"}],"owner":{"account_id":27166750,"reputation":11,"user_id":20704160,"display_name":"seeusoon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695813869,"creation_date":1670342311,"question_id":74705495,"body_markdown":"I have the method A creating for example a new user in DB and returning user&#39;s id\r\nAnd after new user creation periodic task tracking his status must be started, after user&#39;s deletion this task must be stopped\r\nWhat java and quarkus tools can schedule periodic tasks by event and take user&#39;s id as a parameter?\r\n\r\nI have tried using ScheduledExecutorService and @Scheduled quarkus annotation \r\nCould not find the way to make @Scheduled take parameters","title":"How to make scheduled periodic task started by event in java (quarkus)?","body":"<p>I have the method A creating for example a new user in DB and returning user's id\nAnd after new user creation periodic task tracking his status must be started, after user's deletion this task must be stopped\nWhat java and quarkus tools can schedule periodic tasks by event and take user's id as a parameter?</p>\n<p>I have tried using ScheduledExecutorService and @Scheduled quarkus annotation\nCould not find the way to make @Scheduled take parameters</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":1,"creation_date":1695972690,"post_id":77187046,"comment_id":136097084,"body_markdown":"witch version of hibernate are you using ? try to replace all imports from `javax.` to `jakarta.` Also add `@Table(name = &quot;user_entity&quot;)` on `class User`.","body":"witch version of hibernate are you using ? try to replace all imports from <code>javax.</code> to <code>jakarta.</code> Also add <code>@Table(name = &quot;user_entity&quot;)</code> on <code>class User</code>."}],"owner":{"account_id":6514072,"reputation":469,"user_id":5040460,"accept_rate":50,"display_name":"Sunny Kasera"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695813776,"creation_date":1695813776,"question_id":77187046,"body_markdown":"I am trying to build a small application using Hibernate in Java. \r\nI have prepared this code with one of the tutorials available on the internet. But it seems that is the old one.\r\nBut somehow I got stuck at this point. And not moving anywhere unless the issue is fixed. Small help will be precious.\r\n\r\nhibernate.cfg.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC\r\n            &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n            &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-configuration&gt;\r\n        &lt;session-factory&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n            &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\r\n            &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/test&lt;/property&gt;\r\n            &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;\r\n            &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n            &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n            &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n            &lt;property name=&quot;hibernate.archive.autodetection&quot;&gt;class, hbm&lt;/property&gt;\r\n    \r\n            &lt;mapping class=&quot;com.test.User&quot; /&gt;\r\n        &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\nUser.java\r\n\r\n    package com.test;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    \r\n    \r\n    @Entity\r\n    public class User {\r\n      @Id\r\n      private int id;\r\n      private String name;\r\n    \r\n      public User(int id, String name){\r\n        super();\r\n        this.id = id;\r\n        this.name = name;\r\n      }\r\n    \r\n      public int getId() {\r\n        return id;\r\n      }\r\n    \r\n      public void setId(int id) {\r\n        this.id = id;\r\n      }\r\n    \r\n      public String getName() {\r\n        return name;\r\n      }\r\n    \r\n      public void setName(String name) {\r\n        this.name = name;\r\n      }\r\n    \r\n    }\r\n\r\nApp.java\r\n\r\n    package com.test;\r\n    \r\n    import org.hibernate.Session;\r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.Transaction;\r\n    import org.hibernate.cfg.Configuration;\r\n    \r\n    \r\n    public class App {\r\n      public static void main(String[] args) {\r\n    \r\n        System.out.println(&quot;Project Started...&quot;);\r\n    \r\n        try\r\n        {\r\n          Configuration con = new Configuration();\r\n    \r\n          con.configure().addAnnotatedClass(User.class);\r\n    \r\n          SessionFactory sf = con.buildSessionFactory();\r\n    \r\n          Session session = sf.openSession();\r\n    \r\n          Transaction tx = session.beginTransaction();\r\n    \r\n          User u1 = new User(1, &quot;Sunny&quot;);\r\n    \r\n          session.persist(u1);\r\n    \r\n          tx.commit();\r\n    \r\n          session.close();\r\n    \r\n    \r\n    \r\n        }\r\n        catch (Exception e)\r\n        {\r\n          System.out.println(e.getMessage());\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nError is here\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mPFhX.png","title":"Unable to locate persister (UnknownEntityException)","body":"<p>I am trying to build a small application using Hibernate in Java.\nI have prepared this code with one of the tutorials available on the internet. But it seems that is the old one.\nBut somehow I got stuck at this point. And not moving anywhere unless the issue is fixed. Small help will be precious.</p>\n<p>hibernate.cfg.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost:3306/test&lt;/property&gt;\n        &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;\n        &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n        &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\n        &lt;property name=&quot;hibernate.archive.autodetection&quot;&gt;class, hbm&lt;/property&gt;\n\n        &lt;mapping class=&quot;com.test.User&quot; /&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>User.java</p>\n<pre><code>package com.test;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n\n@Entity\npublic class User {\n  @Id\n  private int id;\n  private String name;\n\n  public User(int id, String name){\n    super();\n    this.id = id;\n    this.name = name;\n  }\n\n  public int getId() {\n    return id;\n  }\n\n  public void setId(int id) {\n    this.id = id;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n}\n</code></pre>\n<p>App.java</p>\n<pre><code>package com.test;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\n\n\npublic class App {\n  public static void main(String[] args) {\n\n    System.out.println(&quot;Project Started...&quot;);\n\n    try\n    {\n      Configuration con = new Configuration();\n\n      con.configure().addAnnotatedClass(User.class);\n\n      SessionFactory sf = con.buildSessionFactory();\n\n      Session session = sf.openSession();\n\n      Transaction tx = session.beginTransaction();\n\n      User u1 = new User(1, &quot;Sunny&quot;);\n\n      session.persist(u1);\n\n      tx.commit();\n\n      session.close();\n\n\n\n    }\n    catch (Exception e)\n    {\n      System.out.println(e.getMessage());\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<p>Error is here</p>\n<p><a href=\"https://i.stack.imgur.com/mPFhX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mPFhX.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jpa","spring-data-jpa","named-query"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695844206,"post_id":77186841,"comment_id":136079763,"body_markdown":"I might be wrong, but I thought the Query annotation would only support issuing a single statement - this file you are showing is multiple statements. IMO You are better off writing a method implementation that reads your file and issues each as a separate query/statement, or putting something like that in the DB as a stored procedure","body":"I might be wrong, but I thought the Query annotation would only support issuing a single statement - this file you are showing is multiple statements. IMO You are better off writing a method implementation that reads your file and issues each as a separate query/statement, or putting something like that in the DB as a stored procedure"},{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1695882423,"post_id":77186841,"comment_id":136083626,"body_markdown":"@Chris You are correct. I ended up implementing it via stored procedures.","body":"@Chris You are correct. I ended up implementing it via stored procedures."}],"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695813585,"creation_date":1695812222,"question_id":77186841,"body_markdown":"I have a requirement to delete an entity, let&#39;s say, `main_entity` and this entity has many dependent entities. So, I need to perform deletion in this manner:\r\n\r\n    delete from dependent_entity_1 where main_entity_id IN :entity_ids;\r\n    delete from dependent_entity_2 where main_entity_id IN :entity_ids;\r\n    delete from dependent_entity_3 where main_entity_id IN :entity_ids;\r\n    delete from dependent_entity_4 where main_entity_id IN :entity_ids;\r\n    delete from main_entity where id IN ::entity_ids;\r\n\r\nSince, there are a lot of dependent entities, I want to put the deletion query in a separate file instead of hard-coding inside the repository class.\r\n\r\nI tried using named query as mentioned here: https://stackoverflow.com/questions/44937306/how-to-refer-long-query-written-in-external-file-in-spring-data-jpa-query\r\n\r\nThe properties file look like this:\r\n\r\n    MainEntity.deleteEntities=delete from dependent_entity_1 where main_entity_id IN :entity_id;\\\r\n    delete from dependent_entity_2 where main_entity_id IN :entity_id;\\\r\n    delete from dependent_entity_3 where main_entity_id IN :entity_id;\\\r\n    delete from dependent_entity_4 where main_entity_id IN :entity_id;\\\r\n    delete from main_entity where id IN ::entity_id;\\\r\n\r\nIt is working for a single query but for multiple queries it is giving an exception: `Named parameter not bound :entity_ids;`\r\n\r\nSo, it might not support executing multiple queries.\r\n\r\nIs there any way to do this or am I doing anything incorrectly here?\r\n\r\n","title":"In Spring data jpa, how to use external sql file having multiple queries in @Query annotation","body":"<p>I have a requirement to delete an entity, let's say, <code>main_entity</code> and this entity has many dependent entities. So, I need to perform deletion in this manner:</p>\n<pre><code>delete from dependent_entity_1 where main_entity_id IN :entity_ids;\ndelete from dependent_entity_2 where main_entity_id IN :entity_ids;\ndelete from dependent_entity_3 where main_entity_id IN :entity_ids;\ndelete from dependent_entity_4 where main_entity_id IN :entity_ids;\ndelete from main_entity where id IN ::entity_ids;\n</code></pre>\n<p>Since, there are a lot of dependent entities, I want to put the deletion query in a separate file instead of hard-coding inside the repository class.</p>\n<p>I tried using named query as mentioned here: <a href=\"https://stackoverflow.com/questions/44937306/how-to-refer-long-query-written-in-external-file-in-spring-data-jpa-query\">How to refer long query, written in external file, in Spring data jpa @Query</a></p>\n<p>The properties file look like this:</p>\n<pre><code>MainEntity.deleteEntities=delete from dependent_entity_1 where main_entity_id IN :entity_id;\\\ndelete from dependent_entity_2 where main_entity_id IN :entity_id;\\\ndelete from dependent_entity_3 where main_entity_id IN :entity_id;\\\ndelete from dependent_entity_4 where main_entity_id IN :entity_id;\\\ndelete from main_entity where id IN ::entity_id;\\\n</code></pre>\n<p>It is working for a single query but for multiple queries it is giving an exception: <code>Named parameter not bound :entity_ids;</code></p>\n<p>So, it might not support executing multiple queries.</p>\n<p>Is there any way to do this or am I doing anything incorrectly here?</p>\n"},{"tags":["java","jparsec"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1695763687,"post_id":77183473,"comment_id":136067475,"body_markdown":"I never used jparsec, but in ANTLR the tokenizer delivers the source location of the token so the parser can make use of that information to understand. The problem would not be to use a custom lexer here. Have you tried using https://github.com/jparsec/jparsec/blob/master/jparsec/src/main/java/org/jparsec/Token.java#L48?","body":"I never used jparsec, but in ANTLR the tokenizer delivers the source location of the token so the parser can make use of that information to understand. The problem would not be to use a custom lexer here. Have you tried using <a href=\"https://github.com/jparsec/jparsec/blob/master/jparsec/src/main/java/org/jparsec/Token.java#L48\" rel=\"nofollow noreferrer\">github.com/jparsec/jparsec/blob/master/jparsec/src/main/java&zwnj;&#8203;/&hellip;</a>?"}],"owner":{"account_id":17032226,"reputation":1,"user_id":12322137,"display_name":"niosega"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695813340,"creation_date":1695763069,"question_id":77183473,"body_markdown":"I am writing a parser for a language that has very complex lexer rules. For example, the lexer decision depends on the column at which a token appears. I wanted to use `jparsec`, but I can&#39;t use its internal tokenizer mechanism. Thus, I need to use my own tokenizer, that generates `jparsec` token.\r\n\r\nUnfortunately, I can&#39;t find how to write code to &#39;give&#39; these tokens to `jparsec` to do only the parsing phase.\r\n\r\nThere is already a Stack Overflow question related to this subject, but the provided solution was to use `jparsec` tokenizer mechanism and I really can&#39;t.\r\n\r\nI tried different approach, like using the `from` method of the Parser class. But without success. Does anybody know how to use `jparsec` only for the parsing phase and not the lexing one?","title":"Use custom lexer with jparsec","body":"<p>I am writing a parser for a language that has very complex lexer rules. For example, the lexer decision depends on the column at which a token appears. I wanted to use <code>jparsec</code>, but I can't use its internal tokenizer mechanism. Thus, I need to use my own tokenizer, that generates <code>jparsec</code> token.</p>\n<p>Unfortunately, I can't find how to write code to 'give' these tokens to <code>jparsec</code> to do only the parsing phase.</p>\n<p>There is already a Stack Overflow question related to this subject, but the provided solution was to use <code>jparsec</code> tokenizer mechanism and I really can't.</p>\n<p>I tried different approach, like using the <code>from</code> method of the Parser class. But without success. Does anybody know how to use <code>jparsec</code> only for the parsing phase and not the lexing one?</p>\n"},{"tags":["java","linux","ubuntu","intellij-idea","sudo"],"comments":[{"owner":{"account_id":3739854,"reputation":1191,"user_id":3109834,"accept_rate":60,"display_name":"lhoworko"},"score":7,"creation_date":1431111559,"post_id":30130934,"comment_id":48372007,"body_markdown":"Intellij is on the Ubuntu Software Center. Would be a lot easier to install for a beginner.","body":"Intellij is on the Ubuntu Software Center. Would be a lot easier to install for a beginner."},{"owner":{"account_id":1911219,"reputation":5572,"user_id":1940850,"display_name":"karel"},"score":0,"creation_date":1439734639,"post_id":30130934,"comment_id":51972956,"body_markdown":"It would be easier to install from the Ubuntu Software Center and IntelliJ installed that way works very well in Ubuntu. It should be noted that IntelliJ IDEA is only available in the default repositories of currently supported versions of Ubuntu for Ubuntu 12.04 and Ubuntu 14.04.","body":"It would be easier to install from the Ubuntu Software Center and IntelliJ installed that way works very well in Ubuntu. It should be noted that IntelliJ IDEA is only available in the default repositories of currently supported versions of Ubuntu for Ubuntu 12.04 and Ubuntu 14.04."},{"owner":{"account_id":4718545,"reputation":3600,"user_id":3817111,"accept_rate":15,"display_name":"Menasheh"},"score":0,"creation_date":1519051332,"post_id":30130934,"comment_id":84740471,"body_markdown":"Since it&#39;s only available on the software center through third parties and not Jetbrains itself (and therefore not necessarily updated for new versions of jetbrains software or of ubuntu), it&#39;s better to do it the official way, using the toolbox app. See [my answer](https://stackoverflow.com/a/41863492/3817111), which has much fewer steps than the accepted one, and is more user friendly.","body":"Since it&#39;s only available on the software center through third parties and not Jetbrains itself (and therefore not necessarily updated for new versions of jetbrains software or of ubuntu), it&#39;s better to do it the official way, using the toolbox app. See <a href=\"https://stackoverflow.com/a/41863492/3817111\">my answer</a>, which has much fewer steps than the accepted one, and is more user friendly."},{"owner":{"account_id":9413340,"reputation":101,"user_id":7001739,"display_name":"Anita W"},"score":0,"creation_date":1606389874,"post_id":30130934,"comment_id":114952380,"body_markdown":"&gt; &quot;it&#39;s only available on the software center through third parties&quot; - when I look in the software center it says the developer is &#39;jetbrains&#39; with a green tick, which implies it&#39;s from Jetbrains, no?","body":"&gt; &quot;it&#39;s only available on the software center through third parties&quot; - when I look in the software center it says the developer is &#39;jetbrains&#39; with a green tick, which implies it&#39;s from Jetbrains, no?"},{"owner":{"account_id":5846606,"reputation":313,"user_id":7009806,"display_name":"Olivier"},"score":0,"creation_date":1668337534,"post_id":30130934,"comment_id":131376223,"body_markdown":"I know the question was posted before distribution 16.04 (with snapd) was released, but this answer may be worthwhile for anybody reading it from now on:\nJust have a look at [the official website](https://www.jetbrains.com/idea/download/#section=linux) with the explicit command lines to type in a terminal.","body":"I know the question was posted before distribution 16.04 (with snapd) was released, but this answer may be worthwhile for anybody reading it from now on: Just have a look at <a href=\"https://www.jetbrains.com/idea/download/#section=linux\" rel=\"nofollow noreferrer\">the official website</a> with the explicit command lines to type in a terminal."}],"answers":[{"tags":[],"owner":{"account_id":2009443,"reputation":3774,"user_id":1798304,"accept_rate":92,"display_name":"MalaKa"},"down_vote_count":1,"up_vote_count":118,"is_accepted":true,"score":117,"last_activity_date":1526975880,"creation_date":1431112310,"answer_id":30131216,"question_id":30130934,"body_markdown":"**Note:** This answer covers the installation of IntelliJ IDEA. For an extended script, that covers more JetBrains IDEs, as well as help for font rendering issues, please see [this link][1] provided by brendan.  \r\nFurthermore, a manual Desktop Entry creation is optional, as newer versions of IntelliJ offer to create it on first startup.\r\n\r\n---\r\n\r\nI have my intellij int /opt folder. So what I do is: \r\n\r\n * Download Intellij\r\n * Extract intellij to /opt-folder: `sudo tar -xvf &lt;intellij.tar&gt; -C /opt/` (the -C option extracts the tar to the folder /opt/)\r\n * Create a Desktop Entry File called idea.desktop (see example file below) and store it anywhere you want (let&#39;s assume in your home directory)\r\n * Move the idea.desktop from your home directory to /usr/share/applications: `sudo mv ~/idea.desktop /usr/share/applications/`\r\n\r\nNow (in a lot) Ubuntu versions you can start the application after the GUI is restarted. If you don&#39;t know how to do that, you can restart your PC.. \r\n\r\nidea.desktop (this is for community edition version 14.1.2, you have to change the paths in Exec= and Icon= lines if the path is different for you):\r\n\r\n    [Desktop Entry]                                                                 \r\n    Encoding=UTF-8\r\n    Name=IntelliJ IDEA\r\n    Comment=IntelliJ IDEA\r\n    Exec=/opt/ideaIC-14.1.2/bin/idea.sh\r\n    Icon=/opt/ideaIC-14.1.2/bin/idea.png\r\n    Terminal=false\r\n    StartupNotify=true\r\n    Type=Application\r\n\r\n\r\n----------------\r\n**Edit**  \r\nI also found a shell script that does this for you, [here][1]. The given script in the link installs Oracle Java 7 for you and gives you the choice between Community and Ultimate Edition. It then automatically downloads the newest version for you, extracts it and creates a desktop entry.  \r\nI have modified the scripts to fulfill my needs. It does not install java 8 and it does not ask you for the version you want to install (but the version is kept in a variable to easily change that). You can also update Intellij with it. But then you have to (so far) manually remove the old folder! This is what i got: \r\n\r\n**Edit2**  \r\nHere is the new version of the script. As mentioned in the comments, breandan has updated the script to be more stable (the jetbrains website changed its behavior). Thanks for the update, breandan. \r\n\r\n    #!/bin/sh\r\n\r\n    echo &quot;Installing IntelliJ IDEA...&quot;\r\n    \r\n    # We need root to install\r\n    [ $(id -u) != &quot;0&quot; ] &amp;&amp; exec sudo &quot;$0&quot; &quot;$@&quot;\r\n    \r\n    # Attempt to install a JDK\r\n    # apt-get install openjdk-8-jdk\r\n    # add-apt-repository ppa:webupd8team/java &amp;&amp; apt-get update &amp;&amp; apt-get install oracle-java8-installer\r\n    \r\n    # Prompt for edition\r\n    #while true; do\r\n    #    read -p &quot;Enter &#39;U&#39; for Ultimate or &#39;C&#39; for Community: &quot; ed \r\n    #    case $ed in\r\n    #        [Uu]* ) ed=U; break;;\r\n    #        [Cc]* ) ed=C; break;;\r\n    #    esac\r\n    #done\r\n    ed=C\r\n    \r\n    # Fetch the most recent version\r\n    VERSION=$(wget &quot;https://www.jetbrains.com/intellij-repository/releases&quot; -qO- | grep -P -o -m 1 &quot;(?&lt;=https://www.jetbrains.com/intellij-repository/releases/com/jetbrains/intellij/idea/BUILD/)[^/]+(?=/)&quot;)\r\n    \r\n    # Prepend base URL for download\r\n    URL=&quot;https://download.jetbrains.com/idea/ideaI$ed-$VERSION.tar.gz&quot;\r\n    \r\n    echo $URL\r\n    \r\n    # Truncate filename\r\n    FILE=$(basename ${URL})\r\n    \r\n    # Set download directory\r\n    DEST=~/Downloads/$FILE\r\n    \r\n    echo &quot;Downloading idea-I$ed-$VERSION to $DEST...&quot;\r\n    \r\n    # Download binary\r\n    wget -cO ${DEST} ${URL} --read-timeout=5 --tries=0\r\n    \r\n    echo &quot;Download complete!&quot;\r\n    \r\n    # Set directory name\r\n    DIR=&quot;/opt/idea-I$ed-$VERSION&quot;\r\n    \r\n    echo &quot;Installing to $DIR&quot;\r\n    \r\n    # Untar file\r\n    if mkdir ${DIR}; then\r\n        tar -xzf ${DEST} -C ${DIR} --strip-components=1\r\n    fi\r\n    \r\n    # Grab executable folder\r\n    BIN=&quot;$DIR/bin&quot;\r\n    \r\n    # Add permissions to install directory\r\n    chmod -R +rwx ${DIR}\r\n    \r\n    # Set desktop shortcut path\r\n    DESK=/usr/share/applications/IDEA.desktop\r\n    \r\n    # Add desktop shortcut\r\n    echo -e &quot;[Desktop Entry]\\nEncoding=UTF-8\\nName=IntelliJ IDEA\\nComment=IntelliJ IDEA\\nExec=${BIN}/idea.sh\\nIcon=${BIN}/idea.png\\nTerminal=false\\nStartupNotify=true\\nType=Application&quot; -e &gt; ${DESK}\r\n    \r\n    # Create symlink entry\r\n    ln -s ${BIN}/idea.sh /usr/local/bin/idea\r\n    \r\n    echo &quot;Done.&quot;  \r\n\r\n------------------\r\n**Old Version** \r\n    \r\n    #!/bin/sh                                                                                                                                   \r\n    \r\n    echo &quot;Installing IntelliJ IDEA...&quot;\r\n    \r\n    # We need root to install\r\n    [ $(id -u) != &quot;0&quot; ] &amp;&amp; exec sudo &quot;$0&quot; &quot;$@&quot;\r\n    \r\n    # define version (ultimate. change to &#39;C&#39; for Community)\r\n    ed=&#39;U&#39;\r\n    \r\n    # Fetch the most recent community edition URL\r\n    URL=$(wget &quot;https://www.jetbrains.com/idea/download/download_thanks.jsp?edition=I${ed}&amp;os=linux&quot; -qO- | grep -o -m 1 &quot;https://download.jetbrains.com/idea/.*gz&quot;)\r\n    \r\n    echo &quot;URL: ${URL}&quot;\r\n    echo &quot;basename(url): $(basename ${URL})&quot;\r\n    \r\n    # Truncate filename\r\n    FILE=$(basename ${URL})\r\n    \r\n    echo &quot;File: ${FILE}&quot;\r\n    \r\n    # Download binary\r\n    wget -cO /tmp/${FILE} ${URL} --read-timeout=5 --tries=0\r\n    \r\n    # Set directory name\r\n    DIR=&quot;${FILE%\\.tar\\.gz}&quot;\r\n    \r\n    # Untar file\r\n    if mkdir /opt/${DIR}; then\r\n        tar -xvzf /tmp/${FILE} -C /opt/${DIR} --strip-components=1\r\n    fi\r\n    \r\n    # Grab executable folder\r\n    BIN=&quot;/opt/$DIR/bin&quot;\r\n    \r\n    # Add permissions to install directory\r\n    chmod 755 ${BIN}/idea.sh\r\n    \r\n    # Set desktop shortcut path\r\n    DESK=/usr/share/applications/IDEA.desktop\r\n    \r\n    # Add desktop shortcut                     \r\n    echo -e &quot;[Desktop Entry]\\nEncoding=UTF-8\\nName=IntelliJ IDEA\\nComment=IntelliJ IDEA\\nExec=${BIN}/idea.sh\\nIcon=${BIN}/idea.png\\nTerminal=false\\nStartupNotify=true\\nType=Application&quot; &gt; ${DESK}\r\n    \r\n    echo &quot;Done.&quot;    \r\n\r\n\r\n  [1]: http://breandan.net/2014/08/18/shell-script/","title":"How to install Intellij IDEA on Ubuntu?","body":"<p><strong>Note:</strong> This answer covers the installation of IntelliJ IDEA. For an extended script, that covers more JetBrains IDEs, as well as help for font rendering issues, please see <a href=\"http://breandan.net/2014/08/18/shell-script/\" rel=\"noreferrer\">this link</a> provided by brendan.<br>\nFurthermore, a manual Desktop Entry creation is optional, as newer versions of IntelliJ offer to create it on first startup.</p>\n\n<hr>\n\n<p>I have my intellij int /opt folder. So what I do is: </p>\n\n<ul>\n<li>Download Intellij</li>\n<li>Extract intellij to /opt-folder: <code>sudo tar -xvf &lt;intellij.tar&gt; -C /opt/</code> (the -C option extracts the tar to the folder /opt/)</li>\n<li>Create a Desktop Entry File called idea.desktop (see example file below) and store it anywhere you want (let's assume in your home directory)</li>\n<li>Move the idea.desktop from your home directory to /usr/share/applications: <code>sudo mv ~/idea.desktop /usr/share/applications/</code></li>\n</ul>\n\n<p>Now (in a lot) Ubuntu versions you can start the application after the GUI is restarted. If you don't know how to do that, you can restart your PC.. </p>\n\n<p>idea.desktop (this is for community edition version 14.1.2, you have to change the paths in Exec= and Icon= lines if the path is different for you):</p>\n\n<pre><code>[Desktop Entry]                                                                 \nEncoding=UTF-8\nName=IntelliJ IDEA\nComment=IntelliJ IDEA\nExec=/opt/ideaIC-14.1.2/bin/idea.sh\nIcon=/opt/ideaIC-14.1.2/bin/idea.png\nTerminal=false\nStartupNotify=true\nType=Application\n</code></pre>\n\n<hr>\n\n<p><strong>Edit</strong><br>\nI also found a shell script that does this for you, <a href=\"http://breandan.net/2014/08/18/shell-script/\" rel=\"noreferrer\">here</a>. The given script in the link installs Oracle Java 7 for you and gives you the choice between Community and Ultimate Edition. It then automatically downloads the newest version for you, extracts it and creates a desktop entry.<br>\nI have modified the scripts to fulfill my needs. It does not install java 8 and it does not ask you for the version you want to install (but the version is kept in a variable to easily change that). You can also update Intellij with it. But then you have to (so far) manually remove the old folder! This is what i got: </p>\n\n<p><strong>Edit2</strong><br>\nHere is the new version of the script. As mentioned in the comments, breandan has updated the script to be more stable (the jetbrains website changed its behavior). Thanks for the update, breandan. </p>\n\n<pre><code>#!/bin/sh\n\necho \"Installing IntelliJ IDEA...\"\n\n# We need root to install\n[ $(id -u) != \"0\" ] &amp;&amp; exec sudo \"$0\" \"$@\"\n\n# Attempt to install a JDK\n# apt-get install openjdk-8-jdk\n# add-apt-repository ppa:webupd8team/java &amp;&amp; apt-get update &amp;&amp; apt-get install oracle-java8-installer\n\n# Prompt for edition\n#while true; do\n#    read -p \"Enter 'U' for Ultimate or 'C' for Community: \" ed \n#    case $ed in\n#        [Uu]* ) ed=U; break;;\n#        [Cc]* ) ed=C; break;;\n#    esac\n#done\ned=C\n\n# Fetch the most recent version\nVERSION=$(wget \"https://www.jetbrains.com/intellij-repository/releases\" -qO- | grep -P -o -m 1 \"(?&lt;=https://www.jetbrains.com/intellij-repository/releases/com/jetbrains/intellij/idea/BUILD/)[^/]+(?=/)\")\n\n# Prepend base URL for download\nURL=\"https://download.jetbrains.com/idea/ideaI$ed-$VERSION.tar.gz\"\n\necho $URL\n\n# Truncate filename\nFILE=$(basename ${URL})\n\n# Set download directory\nDEST=~/Downloads/$FILE\n\necho \"Downloading idea-I$ed-$VERSION to $DEST...\"\n\n# Download binary\nwget -cO ${DEST} ${URL} --read-timeout=5 --tries=0\n\necho \"Download complete!\"\n\n# Set directory name\nDIR=\"/opt/idea-I$ed-$VERSION\"\n\necho \"Installing to $DIR\"\n\n# Untar file\nif mkdir ${DIR}; then\n    tar -xzf ${DEST} -C ${DIR} --strip-components=1\nfi\n\n# Grab executable folder\nBIN=\"$DIR/bin\"\n\n# Add permissions to install directory\nchmod -R +rwx ${DIR}\n\n# Set desktop shortcut path\nDESK=/usr/share/applications/IDEA.desktop\n\n# Add desktop shortcut\necho -e \"[Desktop Entry]\\nEncoding=UTF-8\\nName=IntelliJ IDEA\\nComment=IntelliJ IDEA\\nExec=${BIN}/idea.sh\\nIcon=${BIN}/idea.png\\nTerminal=false\\nStartupNotify=true\\nType=Application\" -e &gt; ${DESK}\n\n# Create symlink entry\nln -s ${BIN}/idea.sh /usr/local/bin/idea\n\necho \"Done.\"  \n</code></pre>\n\n<hr>\n\n<p><strong>Old Version</strong> </p>\n\n<pre><code>#!/bin/sh                                                                                                                                   \n\necho \"Installing IntelliJ IDEA...\"\n\n# We need root to install\n[ $(id -u) != \"0\" ] &amp;&amp; exec sudo \"$0\" \"$@\"\n\n# define version (ultimate. change to 'C' for Community)\ned='U'\n\n# Fetch the most recent community edition URL\nURL=$(wget \"https://www.jetbrains.com/idea/download/download_thanks.jsp?edition=I${ed}&amp;os=linux\" -qO- | grep -o -m 1 \"https://download.jetbrains.com/idea/.*gz\")\n\necho \"URL: ${URL}\"\necho \"basename(url): $(basename ${URL})\"\n\n# Truncate filename\nFILE=$(basename ${URL})\n\necho \"File: ${FILE}\"\n\n# Download binary\nwget -cO /tmp/${FILE} ${URL} --read-timeout=5 --tries=0\n\n# Set directory name\nDIR=\"${FILE%\\.tar\\.gz}\"\n\n# Untar file\nif mkdir /opt/${DIR}; then\n    tar -xvzf /tmp/${FILE} -C /opt/${DIR} --strip-components=1\nfi\n\n# Grab executable folder\nBIN=\"/opt/$DIR/bin\"\n\n# Add permissions to install directory\nchmod 755 ${BIN}/idea.sh\n\n# Set desktop shortcut path\nDESK=/usr/share/applications/IDEA.desktop\n\n# Add desktop shortcut                     \necho -e \"[Desktop Entry]\\nEncoding=UTF-8\\nName=IntelliJ IDEA\\nComment=IntelliJ IDEA\\nExec=${BIN}/idea.sh\\nIcon=${BIN}/idea.png\\nTerminal=false\\nStartupNotify=true\\nType=Application\" &gt; ${DESK}\n\necho \"Done.\"    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3186080,"reputation":573,"user_id":4085683,"display_name":"Marcel Kapfer"},"down_vote_count":0,"up_vote_count":47,"is_accepted":false,"score":47,"last_activity_date":1506690056,"creation_date":1460049446,"answer_id":36483055,"question_id":30130934,"body_markdown":"You can also try my ubuntu repository: https://launchpad.net/~mmk2410/+archive/ubuntu/intellij-idea\r\n\r\nTo use it just run the following commands:\r\n\r\n    sudo apt-add-repository ppa:mmk2410/intellij-idea\r\n    sudo apt-get update\r\n\r\nThe community edition can then installed with\r\n\r\n    sudo apt-get install intellij-idea-community\r\n\r\nand the ultimate edition with\r\n\r\n    sudo apt-get install intellij-idea-ultimate","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>You can also try my ubuntu repository: <a href=\"https://launchpad.net/~mmk2410/+archive/ubuntu/intellij-idea\" rel=\"noreferrer\">https://launchpad.net/~mmk2410/+archive/ubuntu/intellij-idea</a></p>\n\n<p>To use it just run the following commands:</p>\n\n<pre><code>sudo apt-add-repository ppa:mmk2410/intellij-idea\nsudo apt-get update\n</code></pre>\n\n<p>The community edition can then installed with</p>\n\n<pre><code>sudo apt-get install intellij-idea-community\n</code></pre>\n\n<p>and the ultimate edition with</p>\n\n<pre><code>sudo apt-get install intellij-idea-ultimate\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5298128,"reputation":188,"user_id":5010725,"display_name":"S&#233;bastien Allamand"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1472560487,"creation_date":1472560487,"answer_id":39227670,"question_id":30130934,"body_markdown":"In a simple manner you can also try to just run a pre-packaged docker with intellij, I found the good job of @dlsniper : https://hub.docker.com/r/dlsniper/docker-intellij/\r\n\r\nyou just need to have docker installed and to run :\r\n\r\n    docker run -tdi \\\r\n           --net=&quot;host&quot; \\\r\n           --privileged=true \\\r\n           -e DISPLAY=${DISPLAY} \\\r\n           -v /tmp/.X11-unix:/tmp/.X11-unix \\\r\n           -v ${HOME}/.IdeaIC2016.1_docker:/home/developer/.IdeaIC2016.1 \\\r\n           -v ${GOPATH}:/home/developer/go \\\r\n           dlsniper/docker-intellij","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>In a simple manner you can also try to just run a pre-packaged docker with intellij, I found the good job of @dlsniper : <a href=\"https://hub.docker.com/r/dlsniper/docker-intellij/\" rel=\"nofollow\">https://hub.docker.com/r/dlsniper/docker-intellij/</a></p>\n\n<p>you just need to have docker installed and to run :</p>\n\n<pre><code>docker run -tdi \\\n       --net=\"host\" \\\n       --privileged=true \\\n       -e DISPLAY=${DISPLAY} \\\n       -v /tmp/.X11-unix:/tmp/.X11-unix \\\n       -v ${HOME}/.IdeaIC2016.1_docker:/home/developer/.IdeaIC2016.1 \\\n       -v ${GOPATH}:/home/developer/go \\\n       dlsniper/docker-intellij\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7010328,"reputation":397,"user_id":5373457,"display_name":"Дмитрий Кулешов"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1541848862,"creation_date":1474969082,"answer_id":39721221,"question_id":30130934,"body_markdown":"Since Ubuntu 18.04 installing Intellij IDEA is easy! You just need to search &quot;IDEA&quot; in Software Center. Also you&#39;re able to choose a branch to install (I use EAP).\r\n[![enter image description here][1]][1]\r\n\r\nFor earlier versions:\r\n\r\nAccording to [this (*snap*)][2] and [this (*umake*)][3] articles the most comfortable ways are: \r\n\r\n - to use snap-packages (since versions IDEA&#160;2017.3 &amp; Ubuntu&#160;14.04):\r\n 1. [install snapd system][4]. Since Ubuntu&#160;16.04 you already have it.\r\n\r\n 2. [install IDEA snap-package][3] or [even EAP build][5]\r\n\r\n - to use ubuntu-make\r\n(for Ubuntu versions earlier than 16.04 use `apt-get` command instead `apt`): \r\n 1. Add PPA ubuntu-desktop/ubuntu-make (if you install ubuntu-make from standard repo you&#39;ll see only a few IDE&#39;s):\r\n\r\n            $ sudo add-apt-repository ppa:ubuntu-desktop/ubuntu-make\r\n\r\n 2. Install ubuntu-make:\r\n\r\n            $ sudo apt update\r\n            $ sudo apt install ubuntu-make\r\n\r\n 2. install preffered ide (IDEA, for this question):\r\n\r\n            $ umake ide idea\r\nor even ultimate version if you need:\r\n\r\n            $ umake ide idea-ultimate\r\n\r\n 3. I upgrade Intellij IDEA via reinstalling it:\r\n\r\n       &lt;strike&gt;$ umake -r ide idea-ultimate&lt;/strike&gt;\r\n \r\n            $ umake ide idea-ultimate\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/x9UxI.png\r\n  [2]: https://itsfoss.com/install-intellij-ubuntu-linux/\r\n  [3]: https://snapcraft.io/intellij-idea-ultimate/\r\n  [4]: https://docs.snapcraft.io/core/install-ubuntu\r\n  [5]: https://blog.jetbrains.com/idea/2017/11/install-intellij-idea-with-snaps/","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>Since Ubuntu 18.04 installing Intellij IDEA is easy! You just need to search \"IDEA\" in Software Center. Also you're able to choose a branch to install (I use EAP).\n<a href=\"https://i.stack.imgur.com/x9UxI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/x9UxI.png\" alt=\"enter image description here\"></a></p>\n\n<p>For earlier versions:</p>\n\n<p>According to <a href=\"https://itsfoss.com/install-intellij-ubuntu-linux/\" rel=\"noreferrer\">this (<em>snap</em>)</a> and <a href=\"https://snapcraft.io/intellij-idea-ultimate/\" rel=\"noreferrer\">this (<em>umake</em>)</a> articles the most comfortable ways are: </p>\n\n<ul>\n<li><p>to use snap-packages (since versions IDEA 2017.3 &amp; Ubuntu 14.04):</p>\n\n<ol>\n<li><p><a href=\"https://docs.snapcraft.io/core/install-ubuntu\" rel=\"noreferrer\">install snapd system</a>. Since Ubuntu 16.04 you already have it.</p></li>\n<li><p><a href=\"https://snapcraft.io/intellij-idea-ultimate/\" rel=\"noreferrer\">install IDEA snap-package</a> or <a href=\"https://blog.jetbrains.com/idea/2017/11/install-intellij-idea-with-snaps/\" rel=\"noreferrer\">even EAP build</a></p></li>\n</ol></li>\n<li><p>to use ubuntu-make\n(for Ubuntu versions earlier than 16.04 use <code>apt-get</code> command instead <code>apt</code>): </p>\n\n<ol>\n<li><p>Add PPA ubuntu-desktop/ubuntu-make (if you install ubuntu-make from standard repo you'll see only a few IDE's):</p>\n\n<pre><code>$ sudo add-apt-repository ppa:ubuntu-desktop/ubuntu-make\n</code></pre></li>\n<li><p>Install ubuntu-make:</p>\n\n<pre><code>$ sudo apt update\n$ sudo apt install ubuntu-make\n</code></pre></li>\n<li><p>install preffered ide (IDEA, for this question):</p>\n\n<pre><code>$ umake ide idea\n</code></pre>\n\n<p>or even ultimate version if you need:</p>\n\n<pre><code>$ umake ide idea-ultimate\n</code></pre></li>\n<li><p>I upgrade Intellij IDEA via reinstalling it:</p>\n\n<p><strike>$ umake -r ide idea-ultimate</strike></p>\n\n<pre><code>$ umake ide idea-ultimate\n</code></pre></li>\n</ol></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2761230,"reputation":484,"user_id":2378095,"accept_rate":50,"display_name":"Nicola Beghin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1475142150,"creation_date":1475142150,"answer_id":39766839,"question_id":30130934,"body_markdown":"Recent IntelliJ versions allows automatic creation of desktop entry. See [this gist][1]\r\n\r\n 1. Launch from commandline. If launching for the first time, setup will ask about creating a desktop launcher icon; say yes. Or else after launching (ie. from the commandline) any time, use the IDEA menu Configure &gt; Create Desktop Entry . That should create /usr/share/applications/intellij-idea-community.desktop\r\n 2. Trigger the Ubuntu desktop search (ie. Windows key), find the Intellij IDEA you used to create the desktop entry.\r\n 3. Drag the icon it&#39;s showing into the Ubuntu Launcher.\r\n\r\n  [1]: https://gist.github.com/rob-murray/6828864#gistcomment-1876315","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>Recent IntelliJ versions allows automatic creation of desktop entry. See <a href=\"https://gist.github.com/rob-murray/6828864#gistcomment-1876315\" rel=\"nofollow\">this gist</a></p>\n\n<ol>\n<li>Launch from commandline. If launching for the first time, setup will ask about creating a desktop launcher icon; say yes. Or else after launching (ie. from the commandline) any time, use the IDEA menu Configure > Create Desktop Entry . That should create /usr/share/applications/intellij-idea-community.desktop</li>\n<li>Trigger the Ubuntu desktop search (ie. Windows key), find the Intellij IDEA you used to create the desktop entry.</li>\n<li>Drag the icon it's showing into the Ubuntu Launcher.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4710133,"reputation":21,"user_id":3958623,"display_name":"Sunny Mok"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481595802,"creation_date":1481595802,"answer_id":41112814,"question_id":30130934,"body_markdown":"I find and follow this youtube:\r\n\r\nhttps://www.youtube.com/watch?v=PbW-doAiAvI\r\n\r\nBasically, download the tar.gz package, extract into /opt/, and then run the &quot;idea.sh&quot; under bin folder (i.e. /opt/idea-IC-163.7743.44/bin/idea.sh)\r\n\r\nEnjoy","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>I find and follow this youtube:</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=PbW-doAiAvI\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=PbW-doAiAvI</a></p>\n\n<p>Basically, download the tar.gz package, extract into /opt/, and then run the \"idea.sh\" under bin folder (i.e. /opt/idea-IC-163.7743.44/bin/idea.sh)</p>\n\n<p>Enjoy</p>\n"},{"tags":[],"owner":{"account_id":4718545,"reputation":3600,"user_id":3817111,"accept_rate":15,"display_name":"Menasheh"},"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1485386413,"creation_date":1485386413,"answer_id":41863492,"question_id":30130934,"body_markdown":"JetBrains has a new application called the Toolbox App which quickly and easily installs any JetBrains software you want, assuming you have the license.  It also manages your login once to apply across all JetBrains software, a very useful feature.\r\n\r\nTo use it, download the tar.gz file [here][1], then extract it and run the included executable `jetbrains-toolbox.`  Then sign in, and press install next to IntelliJ IDEA:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n If you want to move the executable to `/usr/bin/` feel free, however it works fine out of the box wherever you extract it to.\r\n\r\nThis will also make the appropriate desktop entries upon install.\r\n\r\n  [1]: https://www.jetbrains.com/toolbox/download/download-thanks.html?platform=linux\r\n  [2]: https://i.stack.imgur.com/V9BDI.png","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>JetBrains has a new application called the Toolbox App which quickly and easily installs any JetBrains software you want, assuming you have the license.  It also manages your login once to apply across all JetBrains software, a very useful feature.</p>\n\n<p>To use it, download the tar.gz file <a href=\"https://www.jetbrains.com/toolbox/download/download-thanks.html?platform=linux\" rel=\"noreferrer\">here</a>, then extract it and run the included executable <code>jetbrains-toolbox.</code>  Then sign in, and press install next to IntelliJ IDEA:</p>\n\n<p><a href=\"https://i.stack.imgur.com/V9BDI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/V9BDI.png\" alt=\"enter image description here\"></a></p>\n\n<p>If you want to move the executable to <code>/usr/bin/</code> feel free, however it works fine out of the box wherever you extract it to.</p>\n\n<p>This will also make the appropriate desktop entries upon install.</p>\n"},{"tags":[],"owner":{"account_id":1569152,"reputation":4371,"user_id":1457258,"accept_rate":86,"display_name":"Marcin Zukowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503087159,"creation_date":1503087159,"answer_id":45764409,"question_id":30130934,"body_markdown":"I needed to install various JetBrains tools on a number of machines from CLI, so I wrote a tiny tool to help with that. It also uses cleaner APIs from JB making it hopefully more stable, and works for various JB tools.\r\n\r\nFeel free to try it: https://github.com/MarcinZukowski/jetbrains-installer\r\n","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>I needed to install various JetBrains tools on a number of machines from CLI, so I wrote a tiny tool to help with that. It also uses cleaner APIs from JB making it hopefully more stable, and works for various JB tools.</p>\n\n<p>Feel free to try it: <a href=\"https://github.com/MarcinZukowski/jetbrains-installer\" rel=\"nofollow noreferrer\">https://github.com/MarcinZukowski/jetbrains-installer</a></p>\n"},{"tags":[],"owner":{"account_id":7377849,"reputation":7531,"user_id":5695374,"display_name":"Tshilidzi Mudau"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1508021802,"creation_date":1508020058,"answer_id":46749932,"question_id":30130934,"body_markdown":"TL;DR: \r\n\r\n 1. Download IntelliJ IDEA from [here][1].\r\n 2. `cd Downloads`\r\n 3. extract the downloaded file: `sudo tar xf ideaIC-2017.2.5.tar.gz -C /opt/`\r\n 4. Switch to the bin directory: `cd /opt/idea-IC-172.4343.14/bin` \r\n 5. Run `idea.sh` from the bin subdirectory. \r\n\r\n  [1]: https://www.jetbrains.com/help/idea/installing-and-launching.html","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>TL;DR: </p>\n\n<ol>\n<li>Download IntelliJ IDEA from <a href=\"https://www.jetbrains.com/help/idea/installing-and-launching.html\" rel=\"noreferrer\">here</a>.</li>\n<li><code>cd Downloads</code></li>\n<li>extract the downloaded file: <code>sudo tar xf ideaIC-2017.2.5.tar.gz -C /opt/</code></li>\n<li>Switch to the bin directory: <code>cd /opt/idea-IC-172.4343.14/bin</code> </li>\n<li>Run <code>idea.sh</code> from the bin subdirectory. </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3024120,"reputation":3293,"user_id":2564509,"display_name":"djm.im"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1541385928,"creation_date":1523648608,"answer_id":49824095,"question_id":30130934,"body_markdown":"Since Ubuntu 16.04 includes `snapd` by default.  \r\nSo, the easiest way to install the stable version is\r\n\r\n* IntelliJ IDEA Community:  \r\n `$ sudo snap install intellij-idea-community --classic`\r\n* IntelliJ IDEA Ultimate:  \r\n `$ sudo snap install intellij-idea-ultimate --classic`\r\n\r\nFor the latest version use channel `--edge`  \r\n`$ sudo snap install intellij-idea-community --classic --edge`\r\n\r\nHere is the list of all channels https://snapcraft.io/intellij-idea-ultimate (drop down &#39;All versions&#39;).\r\n\r\n### options\r\n\r\n`--classic`\r\n&gt; The --classic option is required because the IntelliJ IDEA snap requires full access to the system, like a traditionally packaged application.  \r\n[https://www.jetbrains.com/help/idea/install-and-set-up-product.html#install-on-linux-with-snaps]\r\n\r\n`--edge`\r\n&gt;--edge Install from the edge channel\r\n[http://manpages.ubuntu.com/manpages/bionic/man1/snap.1.html]\r\n\r\nNote: Snap, also work a few major distributions: Arch, Debian, Fedora, openSUSE, Linux Mint,... ","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>Since Ubuntu 16.04 includes <code>snapd</code> by default.<br>\nSo, the easiest way to install the stable version is</p>\n\n<ul>\n<li>IntelliJ IDEA Community:<br>\n<code>$ sudo snap install intellij-idea-community --classic</code></li>\n<li>IntelliJ IDEA Ultimate:<br>\n<code>$ sudo snap install intellij-idea-ultimate --classic</code></li>\n</ul>\n\n<p>For the latest version use channel <code>--edge</code><br>\n<code>$ sudo snap install intellij-idea-community --classic --edge</code></p>\n\n<p>Here is the list of all channels <a href=\"https://snapcraft.io/intellij-idea-ultimate\" rel=\"noreferrer\">https://snapcraft.io/intellij-idea-ultimate</a> (drop down 'All versions').</p>\n\n<h3>options</h3>\n\n<p><code>--classic</code></p>\n\n<blockquote>\n  <p>The --classic option is required because the IntelliJ IDEA snap requires full access to the system, like a traditionally packaged application.<br>\n  [<a href=\"https://www.jetbrains.com/help/idea/install-and-set-up-product.html#install-on-linux-with-snaps]\" rel=\"noreferrer\">https://www.jetbrains.com/help/idea/install-and-set-up-product.html#install-on-linux-with-snaps]</a></p>\n</blockquote>\n\n<p><code>--edge</code></p>\n\n<blockquote>\n  <p>--edge Install from the edge channel\n  [<a href=\"http://manpages.ubuntu.com/manpages/bionic/man1/snap.1.html]\" rel=\"noreferrer\">http://manpages.ubuntu.com/manpages/bionic/man1/snap.1.html]</a></p>\n</blockquote>\n\n<p>Note: Snap, also work a few major distributions: Arch, Debian, Fedora, openSUSE, Linux Mint,... </p>\n"},{"tags":[],"owner":{"account_id":13094136,"reputation":744,"user_id":9460546,"display_name":"Pawan Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695813149,"creation_date":1559195782,"answer_id":56372422,"question_id":30130934,"body_markdown":"try simple way to install intellij idea \r\n\r\nInstall IntelliJ on Ubuntu using Ubuntu Make \r\n\r\nYou need to install Ubuntu Make first. If you are using Ubuntu 16.04, 18.04 or a higher version, you can install Ubuntu Make using the command below:\r\n\r\n    sudo apt install ubuntu-make\r\n\r\nOnce you have Ubuntu Make installed, you can use the command below to install IntelliJ IDEA Community edition:\r\n\r\n    umake ide idea\r\n\r\nTo install the IntelliJ IDEA Ultimate edition, use the command below:\r\n\r\n    umake ide idea-ultimate\r\n\r\n\r\nTo remove IntelliJ IDEA installed via Ubuntu Make, use the command below for your respective versions:\r\n\r\n    umake -r ide idea\r\n\r\n    umake -r ide idea-ultimate\r\n\r\nyou may visit for more option.\r\n\r\nhttps://itsfoss.com/install-intellij-ubuntu-linux/","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>try simple way to install intellij idea</p>\n<p>Install IntelliJ on Ubuntu using Ubuntu Make</p>\n<p>You need to install Ubuntu Make first. If you are using Ubuntu 16.04, 18.04 or a higher version, you can install Ubuntu Make using the command below:</p>\n<pre><code>sudo apt install ubuntu-make\n</code></pre>\n<p>Once you have Ubuntu Make installed, you can use the command below to install IntelliJ IDEA Community edition:</p>\n<pre><code>umake ide idea\n</code></pre>\n<p>To install the IntelliJ IDEA Ultimate edition, use the command below:</p>\n<pre><code>umake ide idea-ultimate\n</code></pre>\n<p>To remove IntelliJ IDEA installed via Ubuntu Make, use the command below for your respective versions:</p>\n<pre><code>umake -r ide idea\n\numake -r ide idea-ultimate\n</code></pre>\n<p>you may visit for more option.</p>\n<p><a href=\"https://itsfoss.com/install-intellij-ubuntu-linux/\" rel=\"nofollow noreferrer\">https://itsfoss.com/install-intellij-ubuntu-linux/</a></p>\n"},{"tags":[],"owner":{"account_id":2093262,"reputation":9483,"user_id":1862590,"display_name":"Sathiamoorthy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1608573559,"creation_date":1608573198,"answer_id":65397655,"question_id":30130934,"body_markdown":"**Standalone installation**\r\n\r\n1. Download the [tarball.tar.gz][1].\r\n\r\n2. Extract the tarball to a directory that supports file execution.\r\n\r\n*For example*, to extract it to the recommended `/opt` directory, run the following command:\r\n\r\n    sudo tar -xzf ideaIC-2020.3.tar.gz -C /opt\r\n\r\n3. Go to /opt folder and open intellij folder\r\n\r\n4. Go to /bin folder and execute the command `sh idea.sh`\r\n\r\n\r\nNow the application opened and create the desktop shortcut if you need\r\n\r\n\r\n  [1]: https://www.jetbrains.com/idea/download/\r\n","title":"How to install Intellij IDEA on Ubuntu?","body":"<p><strong>Standalone installation</strong></p>\n<ol>\n<li><p>Download the <a href=\"https://www.jetbrains.com/idea/download/\" rel=\"nofollow noreferrer\">tarball.tar.gz</a>.</p>\n</li>\n<li><p>Extract the tarball to a directory that supports file execution.</p>\n</li>\n</ol>\n<p><em>For example</em>, to extract it to the recommended <code>/opt</code> directory, run the following command:</p>\n<pre><code>sudo tar -xzf ideaIC-2020.3.tar.gz -C /opt\n</code></pre>\n<ol start=\"3\">\n<li><p>Go to /opt folder and open intellij folder</p>\n</li>\n<li><p>Go to /bin folder and execute the command <code>sh idea.sh</code></p>\n</li>\n</ol>\n<p>Now the application opened and create the desktop shortcut if you need</p>\n"}],"owner":{"account_id":5184382,"reputation":1009,"user_id":4149162,"accept_rate":78,"display_name":"Emil &#216;g&#229;rd"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":194313,"favorite_count":0,"down_vote_count":0,"up_vote_count":78,"accepted_answer_id":30131216,"answer_count":12,"score":78,"last_activity_date":1695813149,"creation_date":1431111295,"question_id":30130934,"body_markdown":"I&#39;m new to Ubuntu and Linux in general. I want to code in Java on my computer, but I&#39;m having problems installing [IntelliJ IDEA][1] on Ubuntu. I have downloaded and extracted the file and for some reason renamed the folder to idea. I tried moving the folder to `/usr/share/applications` or something but I didn&#39;t have permission. I used `sudo -i` in terminal to gain permission but didn&#39;t manage to get out of root folder. Can anyone help me with a step by step way to move the folder, create a shortcut in the search bar or whatever it&#39;s called and install it properly?\r\n\r\n  [1]: https://www.jetbrains.com/idea/download/#section=windows","title":"How to install Intellij IDEA on Ubuntu?","body":"<p>I'm new to Ubuntu and Linux in general. I want to code in Java on my computer, but I'm having problems installing <a href=\"https://www.jetbrains.com/idea/download/#section=windows\" rel=\"noreferrer\">IntelliJ IDEA</a> on Ubuntu. I have downloaded and extracted the file and for some reason renamed the folder to idea. I tried moving the folder to <code>/usr/share/applications</code> or something but I didn't have permission. I used <code>sudo -i</code> in terminal to gain permission but didn't manage to get out of root folder. Can anyone help me with a step by step way to move the folder, create a shortcut in the search bar or whatever it's called and install it properly?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":5,"creation_date":1695772664,"post_id":77183999,"comment_id":136068302,"body_markdown":"A Jar is just a zip file - you could make use of the available zip functionality in the JDK to pull out the elements you want.  Alternatively, as part of your build process you could built a manifest of the files contained with those directories and then at runtime use `Class#getResource` or `Class#getResourceAsStream` to get a direct reference ... but this begins to raise questions over why?","body":"A Jar is just a zip file - you could make use of the available zip functionality in the JDK to pull out the elements you want.  Alternatively, as part of your build process you could built a manifest of the files contained with those directories and then at runtime use <code>Class#getResource</code> or <code>Class#getResourceAsStream</code> to get a direct reference ... but this begins to raise questions over why?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1695774436,"post_id":77183999,"comment_id":136068432,"body_markdown":"Why? If what&#39;s in there is read-only, just access it as resources.","body":"Why? If what&#39;s in there is read-only, just access it as resources."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1695774692,"post_id":77183999,"comment_id":136068453,"body_markdown":"As others have said: Why do you want to do this?","body":"As others have said: Why do you want to do this?"},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695779745,"post_id":77183999,"comment_id":136068885,"body_markdown":"If you can _guarantee_ your app is definitely delivered as a jar this is possible. If you can&#39;t guarantee that - the classloader mechanism __has no &#39;list&#39; primitive__, so you&#39;d have to, during build, run `ls build &gt;build/file-list.txt` so that you can ask for that file list so you have a listing.","body":"If you can <i>guarantee</i> your app is definitely delivered as a jar this is possible. If you can&#39;t guarantee that - the classloader mechanism <b>has no &#39;list&#39; primitive</b>, so you&#39;d have to, during build, run <code>ls build &gt;build&#47;file-list.txt</code> so that you can ask for that file list so you have a listing."},{"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"score":0,"creation_date":1695822659,"post_id":77183999,"comment_id":136075596,"body_markdown":"Thanks everyone - I gave the reason &#39;why&#39; I want to do this as comments to @rzwitserloot&#39;s suggested answer.  I was hoping the answer suggested a way to somehow recursively descend the package structure starting with Myclass.class.getResourceAsStream(&quot;/com/comopany/help&quot;)","body":"Thanks everyone - I gave the reason &#39;why&#39; I want to do this as comments to @rzwitserloot&#39;s suggested answer.  I was hoping the answer suggested a way to somehow recursively descend the package structure starting with Myclass.class.getResourceAsStream(&quot;/com/comopany/help&quot;)"},{"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"score":0,"creation_date":1695925192,"post_id":77183999,"comment_id":136092214,"body_markdown":"I think I will take @rzwitserloot&#39;s suggestion of creating the list of files during the build process and then simply iterating over those files using Class.class.getResourceAsStream() to write those files the fs.  I actually also came across an even better solution - the ClassGraph library (see GitHub) - it actually has exactly what i need using just a few lines of code, but I&#39;m doing this to reduce my jar&#39;s size - once I add in ClassGraph and all its dependencies, my savings of eliminating that duplicate help.zip in my jar is almost negated by including those jars :-(","body":"I think I will take @rzwitserloot&#39;s suggestion of creating the list of files during the build process and then simply iterating over those files using Class.class.getResourceAsStream() to write those files the fs.  I actually also came across an even better solution - the ClassGraph library (see GitHub) - it actually has exactly what i need using just a few lines of code, but I&#39;m doing this to reduce my jar&#39;s size - once I add in ClassGraph and all its dependencies, my savings of eliminating that duplicate help.zip in my jar is almost negated by including those jars :-("}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695780318,"creation_date":1695780318,"answer_id":77184308,"question_id":77183999,"body_markdown":"Given a file name (such as `com/company/pkg1/foo.class`), you can just stick a slash in front and call `AnyClassInThere.class.getResourceAsStream()` to read it. This means, __if__ you have a list of files you want to copy, you can write something like:\r\n\r\n```\r\nPath target = Path.of(&quot;/Users/wolfman/test-copy&quot;);\r\nfor (String fileName : list) {\r\n  // fileName is something like &quot;com/company/pkg1/Foo.class\r\n  try (var in = ClassThisIsIn.class.getResourceAsStream(&quot;/&quot; + fileName)) {\r\n  Path tgt = target.resolve(fileName);\r\n  Files.createDirectories(tgt.getParent());\r\n  try (var out = Files.newOutputStream(tgt)) {\r\n    in.transferTo(out);\r\n  }\r\n}\r\n```\r\n\r\nThat works regardless of how you ship your app (it doesn&#39;t _have to be_ in a jar file). That just leaves figuring out how to get that list of files.\r\n\r\nThe classloader system we use here (`.getResourceAsStream`) simply _does not support_ the concept of &#39;list files&#39;. Hence, what you want using just this, isn&#39;t directly possible. There are 2 ways to solve the problem:\r\n\r\n## fix it in the build\r\n\r\nDuring build time, &#39;list files&#39; __is__ available. Generally build systems such as maven, gradle, or ant, make a dir such as `build`, pile every file that is about to be put in your jar in there, and then turns that into a jar. If, in between, you can manage to run something like `ls build |grep com/company &gt;build/list-of-files.txt`, then to _get_ that file list, you simply read `ClassThisIsIn.class.getResource(&quot;/list-of-files.txt&quot;)` line by line and voila, there&#39;s your list of files.\r\n\r\nEvery build system can do this, but exactly how depends rather a lot on what you have.\r\n\r\n## Assume it&#39;s a jar\r\n\r\nIf you __know__ your app is distributed as a jar, you can do this:\r\n\r\n```\r\nString url = ClassThisIsIn.class.getResource(&quot;ClassThisIsIn.class&quot;).toString();\r\n```\r\n\r\nNow url will be something like `jar:file:///Users/wolfman/workspace/coolproject/dist/myapp.jar!com/company/base/ClassThisIsIn.class`.\r\n\r\nTake a hatchet to that string - use `substring` and the like to extract `/Users/wolfman/workspace/coolproject/dist/myapp.jar`. It&#39;s everything after `file:`, before the first `!`, and strip any excess slashes up front.\r\n\r\nThen just open that as a `JarFile` or `ZipFile` (jars are zips), and __that__ has a &#39;list&#39; primitive. You can read from there (use `transferTo` as above directly from your JarFile object, bypassing `getResourceAsStream` as in the snippet at the top of this answer), or only use it to create a list of files.\r\n\r\nI wouldn&#39;t recommend this course of action. Your app now breaks if its distributed in any way other than &#39;as a jar file&#39;. It&#39;ll hamper testing and reduce your productivity when working on it (as it MUST be built into a jar to properly function, you can&#39;t debug it inline anymore, or at least, not this bit).\r\n\r\n## Closing notes\r\n\r\nIt&#39;s slightly odd to &#39;want&#39; this. If it&#39;s files that are otherwise unrelated to the running of your app, just stick a zip in a zip and open that (so that you don&#39;t have to find a way to &#39;list&#39;). If you want to copy your classes and such - why? If it&#39;s some sort of &#39;install on local disk&#39;, maybe just copy the entire jar, or at the very least, make one and stream your files straight into it, save the user some disk space.\r\n","title":"How do I copy part of the Java application package structure to a directory on the file system?","body":"<p>Given a file name (such as <code>com/company/pkg1/foo.class</code>), you can just stick a slash in front and call <code>AnyClassInThere.class.getResourceAsStream()</code> to read it. This means, <strong>if</strong> you have a list of files you want to copy, you can write something like:</p>\n<pre><code>Path target = Path.of(&quot;/Users/wolfman/test-copy&quot;);\nfor (String fileName : list) {\n  // fileName is something like &quot;com/company/pkg1/Foo.class\n  try (var in = ClassThisIsIn.class.getResourceAsStream(&quot;/&quot; + fileName)) {\n  Path tgt = target.resolve(fileName);\n  Files.createDirectories(tgt.getParent());\n  try (var out = Files.newOutputStream(tgt)) {\n    in.transferTo(out);\n  }\n}\n</code></pre>\n<p>That works regardless of how you ship your app (it doesn't <em>have to be</em> in a jar file). That just leaves figuring out how to get that list of files.</p>\n<p>The classloader system we use here (<code>.getResourceAsStream</code>) simply <em>does not support</em> the concept of 'list files'. Hence, what you want using just this, isn't directly possible. There are 2 ways to solve the problem:</p>\n<h2>fix it in the build</h2>\n<p>During build time, 'list files' <strong>is</strong> available. Generally build systems such as maven, gradle, or ant, make a dir such as <code>build</code>, pile every file that is about to be put in your jar in there, and then turns that into a jar. If, in between, you can manage to run something like <code>ls build |grep com/company &gt;build/list-of-files.txt</code>, then to <em>get</em> that file list, you simply read <code>ClassThisIsIn.class.getResource(&quot;/list-of-files.txt&quot;)</code> line by line and voila, there's your list of files.</p>\n<p>Every build system can do this, but exactly how depends rather a lot on what you have.</p>\n<h2>Assume it's a jar</h2>\n<p>If you <strong>know</strong> your app is distributed as a jar, you can do this:</p>\n<pre><code>String url = ClassThisIsIn.class.getResource(&quot;ClassThisIsIn.class&quot;).toString();\n</code></pre>\n<p>Now url will be something like <code>jar:file:///Users/wolfman/workspace/coolproject/dist/myapp.jar!com/company/base/ClassThisIsIn.class</code>.</p>\n<p>Take a hatchet to that string - use <code>substring</code> and the like to extract <code>/Users/wolfman/workspace/coolproject/dist/myapp.jar</code>. It's everything after <code>file:</code>, before the first <code>!</code>, and strip any excess slashes up front.</p>\n<p>Then just open that as a <code>JarFile</code> or <code>ZipFile</code> (jars are zips), and <strong>that</strong> has a 'list' primitive. You can read from there (use <code>transferTo</code> as above directly from your JarFile object, bypassing <code>getResourceAsStream</code> as in the snippet at the top of this answer), or only use it to create a list of files.</p>\n<p>I wouldn't recommend this course of action. Your app now breaks if its distributed in any way other than 'as a jar file'. It'll hamper testing and reduce your productivity when working on it (as it MUST be built into a jar to properly function, you can't debug it inline anymore, or at least, not this bit).</p>\n<h2>Closing notes</h2>\n<p>It's slightly odd to 'want' this. If it's files that are otherwise unrelated to the running of your app, just stick a zip in a zip and open that (so that you don't have to find a way to 'list'). If you want to copy your classes and such - why? If it's some sort of 'install on local disk', maybe just copy the entire jar, or at the very least, make one and stream your files straight into it, save the user some disk space.</p>\n"}],"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77184308,"answer_count":1,"score":1,"last_activity_date":1695813116,"creation_date":1695772508,"question_id":77183999,"body_markdown":"My Java app, packaged as a JAR file - app.jar - has the following package structure:\r\n\r\n    com\r\n       company\r\n          pkg1\r\n          pkg2\r\n          help\r\n             dir1\r\n                file1\r\n                ...\r\n             dir2\r\n                subdir1\r\n                   files\r\n                   ...\r\n    \r\n          pkg3\r\n          ...\r\n\r\nFrom within my application, I&#39;d like to copy everything under com/company/help/ to a directory on the local file system.  What is the best way to do this in java, preferably without resorting to third-party Java libraries?\r\n","title":"How do I copy part of the Java application package structure to a directory on the file system?","body":"<p>My Java app, packaged as a JAR file - app.jar - has the following package structure:</p>\n<pre><code>com\n   company\n      pkg1\n      pkg2\n      help\n         dir1\n            file1\n            ...\n         dir2\n            subdir1\n               files\n               ...\n\n      pkg3\n      ...\n</code></pre>\n<p>From within my application, I'd like to copy everything under com/company/help/ to a directory on the local file system.  What is the best way to do this in java, preferably without resorting to third-party Java libraries?</p>\n"},{"tags":["java","eclipse","war"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1695781601,"post_id":77184322,"comment_id":136069047,"body_markdown":"May be you ar missing the [web tools platform](https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.wst.webtools.doc.user%2Ftopics%2Ftwcrewar.html) plugin","body":"May be you ar missing the <a href=\"https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.wst.webtools.doc.user%2Ftopics%2Ftwcrewar.html\" rel=\"nofollow noreferrer\">web tools platform</a> plugin"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1695906728,"post_id":77184322,"comment_id":136088344,"body_markdown":"Do you have any web tools installed? Is this even a web app project?","body":"Do you have any web tools installed? Is this even a web app project?"}],"answers":[{"tags":[],"owner":{"account_id":6841915,"reputation":31,"user_id":5262018,"display_name":"julianhs"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695782068,"creation_date":1695782068,"answer_id":77184380,"question_id":77184322,"body_markdown":"Please make sure your Java application contains the correct file structure so the JDK can generate a WAR file.  It should contains the WEB-INF folder\r\n\r\n[![Structure of a Web App in Java][1]][1] \r\n(Screenshot obtained from https://courses.ischool.berkeley.edu/i290-8/s04/lectures/10/tomcat-cocoon/slide12.html\r\n\r\nAlso, please check if you setup accordingly the Java Development Kit (JDK) in Eclipse instead of the JRE.\r\n\r\nJust to make sure this issue it is not occurring because some misconfiguration with Eclipse, you can also try to generate the war file:\r\n\r\n1. Open cmd or any console you are using.\r\n2. Go inside the project directory of your project (outside the WEB-INF)\r\n3. Run the below command: \r\n\r\n  \r\n&gt;  jar -cvf appname.war *\r\n\r\nwhere -c is used to create file, -v to generate the verbose output and -f to specify the file name.\r\n\r\n  [1]: https://i.stack.imgur.com/1A3zP.png","title":"Why there is no WAR file under my Java project upon export?","body":"<p>Please make sure your Java application contains the correct file structure so the JDK can generate a WAR file.  It should contains the WEB-INF folder</p>\n<p><a href=\"https://i.stack.imgur.com/1A3zP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1A3zP.png\" alt=\"Structure of a Web App in Java\" /></a>\n(Screenshot obtained from <a href=\"https://courses.ischool.berkeley.edu/i290-8/s04/lectures/10/tomcat-cocoon/slide12.html\" rel=\"nofollow noreferrer\">https://courses.ischool.berkeley.edu/i290-8/s04/lectures/10/tomcat-cocoon/slide12.html</a></p>\n<p>Also, please check if you setup accordingly the Java Development Kit (JDK) in Eclipse instead of the JRE.</p>\n<p>Just to make sure this issue it is not occurring because some misconfiguration with Eclipse, you can also try to generate the war file:</p>\n<ol>\n<li>Open cmd or any console you are using.</li>\n<li>Go inside the project directory of your project (outside the WEB-INF)</li>\n<li>Run the below command:</li>\n</ol>\n<blockquote>\n<p>jar -cvf appname.war *</p>\n</blockquote>\n<p>where -c is used to create file, -v to generate the verbose output and -f to specify the file name.</p>\n"}],"owner":{"account_id":20769469,"reputation":3,"user_id":15252530,"display_name":"Euphoria"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695812563,"creation_date":1695780866,"question_id":77184322,"body_markdown":"I am trying to build my project using the WAR in Java, but it is not visible upon exporting, I can&#39;t find the same problem as mine. Does anyone encountered this issue and how did you resolved?\r\n\r\nPlease see image below\r\n[][1]\r\n\r\n\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pMsMe.png\r\n  [2]: https://i.stack.imgur.com/piNux.png","title":"Why there is no WAR file under my Java project upon export?","body":"<p>I am trying to build my project using the WAR in Java, but it is not visible upon exporting, I can't find the same problem as mine. Does anyone encountered this issue and how did you resolved?</p>\n<p>Please see image below\n<a href=\"https://i.stack.imgur.com/pMsMe.png\" rel=\"nofollow noreferrer\"></a></p>\n<p><a href=\"https://i.stack.imgur.com/piNux.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring-boot","rest","testing"],"comments":[{"owner":{"account_id":7547772,"reputation":8583,"user_id":5730279,"display_name":"hc_dev"},"score":0,"creation_date":1695671162,"post_id":77174068,"comment_id":136053009,"body_markdown":"Can you show the definition of the method `requestTo` or where you pass the request body. A complete [example] would help us to help you.","body":"Can you show the definition of the method <code>requestTo</code> or where you pass the request body. A complete <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help us to help you."},{"owner":{"account_id":29531006,"reputation":3,"user_id":22631626,"display_name":"Sophie Brown"},"score":0,"creation_date":1695811118,"post_id":77174068,"comment_id":136073144,"body_markdown":"@hc_dev I&#39;ve updated my code to show the full class - but it&#39;s all spring stuff, ```requestTo``` is a static method in ```MockRestRequestMatchers```, and my request body is the string being passed into ```HttpEntity```.","body":"@hc_dev I&#39;ve updated my code to show the full class - but it&#39;s all spring stuff, <code>requestTo</code> is a static method in <code>MockRestRequestMatchers</code>, and my request body is the string being passed into <code>HttpEntity</code>."}],"answers":[{"tags":[],"owner":{"account_id":3581540,"reputation":987,"user_id":2989643,"display_name":"Shayan Ahmad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695812562,"creation_date":1695812562,"answer_id":77186884,"question_id":77174068,"body_markdown":"Generally, it&#39;s not a good idea to use `@RequestBody` with `GET` call. A better API design should make the API `POST` instead of `GET`. \r\n\r\nWith RestTemplate I am quite sure it does not support `GET` with `RequestBody` out of the box. For such scenarios you may be able to achieve it but by doing [this painful method](https://thegeekyasian.com/http-get-request-with-a-request-body-using-resttemplate/).\r\n","title":"&quot;Required request body is missing&quot; error in integration tests when body is present","body":"<p>Generally, it's not a good idea to use <code>@RequestBody</code> with <code>GET</code> call. A better API design should make the API <code>POST</code> instead of <code>GET</code>.</p>\n<p>With RestTemplate I am quite sure it does not support <code>GET</code> with <code>RequestBody</code> out of the box. For such scenarios you may be able to achieve it but by doing <a href=\"https://thegeekyasian.com/http-get-request-with-a-request-body-using-resttemplate/\" rel=\"nofollow noreferrer\">this painful method</a>.</p>\n"}],"owner":{"account_id":29531006,"reputation":3,"user_id":22631626,"display_name":"Sophie Brown"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77186884,"answer_count":1,"score":0,"last_activity_date":1695812562,"creation_date":1695656600,"question_id":77174068,"body_markdown":"I&#39;m writing a Spring Boot application that hits two third-party APIs and returns a CSV file based on the results. My application takes a `@RequestBody` parameter which is a `List&lt;String&gt;` which is used in the third party calls.\r\n\r\nI&#39;m trying to integration test this application using a `TestRestTemplate`, and I&#39;m getting a `HttpMessageNotReadableException: Required request body is missing` error, when I&#39;m definitely passing a body into the `HttpEntity` that is my request object.\r\n\r\nPassing in an identical body into postman, or into a controller test using MockMvc, works just fine, but I want to automatically test the whole application end-to-end.\r\n\r\nIf there is something wrong with what I&#39;m passing down, I&#39;d expect it to be giving me a JSON parsing error, not a missing body error. I&#39;ve tried changing the type of what I&#39;m passing down, and setting content-type to be text/plain - neither of these have caused the error to change or disappear.\r\n\r\nMy test code: \r\n\r\n```\r\npackage uk.co.heywood.sonarconverter.integration;\r\n\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.header;\r\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.method;\r\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.requestTo;\r\nimport static org.springframework.test.web.client.response.MockRestResponseCreators.withStatus;\r\n\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.boot.test.web.client.TestRestTemplate;\r\nimport org.springframework.http.HttpEntity;\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.HttpMethod;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.test.context.TestPropertySource;\r\nimport org.springframework.test.web.client.ExpectedCount;\r\nimport org.springframework.test.web.client.MockRestServiceServer;\r\nimport org.springframework.web.client.RestTemplate;\r\n\r\nimport uk.co.heywood.sonarconverter.Application;\r\nimport uk.co.heywood.sonarconverter.utils.TestUtils;\r\n\r\n@SpringBootTest(classes = Application.class, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@TestPropertySource(properties = {&quot;sonar.qubeToken=aFakeQubeToken&quot;, &quot;sonar.cloudToken=aFakeCloudToken&quot;})\r\nclass SonarConverterIntegrationTest\r\n{\r\n    \r\n    private static final String URL = &quot;/api/sonar/diff&quot;;\r\n    private static final String SONARQUBE_URL = &quot;https://sonarqube.services.mywork.co.uk/api/issues/search?projects=myproject&amp;componentKeys=myComponentKeys&amp;statuses=OPEN&amp;ps=500&amp;p=1&quot;;\r\n    private static final String SONARCLOUD_URL = &quot;https://sonarcloud.io/api/issues/search?projects=myCloudProject&amp;statuses=OPEN&amp;ps=500&amp;p=1&quot;;\r\n    \r\n    private static final String SONARQUBE_RESPONSE = TestUtils.fromFile( &quot;integration/sonarqube-response.json&quot; );\r\n    private static final String SONARCLOUD_RESPONSE = TestUtils.fromFile( &quot;integration/sonarcloud-response.json&quot; );\r\n    private static final String EXPECTED_RESULT = TestUtils.fromFile( &quot;integration/result.csv&quot; );\r\n    \r\n    @Autowired\r\n    private TestRestTemplate testRestTemplate;\r\n    \r\n    @Autowired\r\n    private RestTemplate restTemplate;\r\n    private MockRestServiceServer mockRestServiceServer;\r\n    \r\n    @BeforeEach\r\n    void setUp() {\r\n        mockRestServiceServer = MockRestServiceServer.createServer( restTemplate );\r\n    }\r\n    \r\n    @Test\r\n    void canCreateCsv() {\r\n        \r\n        mockRestServiceServer.expect( ExpectedCount.once(),\r\n                        requestTo(SONARQUBE_URL))\r\n                .andExpect( method(HttpMethod.GET) )\r\n                .andExpect( header( HttpHeaders.AUTHORIZATION, &quot;Bearer aFakeQubeToken&quot; ) )\r\n                .andRespond( withStatus( HttpStatus.OK )\r\n                        .contentType( MediaType.APPLICATION_JSON )\r\n                        .body( SONARQUBE_RESPONSE ));\r\n        mockRestServiceServer.expect( ExpectedCount.once(),\r\n                        requestTo(SONARCLOUD_URL))\r\n                .andExpect( method(HttpMethod.GET) )\r\n                .andExpect( header( HttpHeaders.AUTHORIZATION, &quot;Bearer aFakeCloudToken&quot; ) )\r\n                .andRespond( withStatus( HttpStatus.OK )\r\n                        .contentType( MediaType.APPLICATION_JSON )\r\n                        .body( SONARCLOUD_RESPONSE ));\r\n        \r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.add( HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE );\r\n        HttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;( &quot;&quot;&quot;\r\n                [\r\n                    &quot;aParameter&quot;, &quot;anotherParameter&quot;\r\n                ]&quot;&quot;&quot;, headers );\r\n        ResponseEntity&lt;String&gt; response = testRestTemplate.exchange(\r\n                URL,\r\n                HttpMethod.GET,\r\n                request,\r\n                String.class\r\n        );\r\n        assertThat(response.getStatusCode()).isEqualTo( HttpStatus.OK );\r\n        assertThat(response.getBody()).isEqualTo( EXPECTED_RESULT );\r\n    }\r\n}\r\n\r\n```","title":"&quot;Required request body is missing&quot; error in integration tests when body is present","body":"<p>I'm writing a Spring Boot application that hits two third-party APIs and returns a CSV file based on the results. My application takes a <code>@RequestBody</code> parameter which is a <code>List&lt;String&gt;</code> which is used in the third party calls.</p>\n<p>I'm trying to integration test this application using a <code>TestRestTemplate</code>, and I'm getting a <code>HttpMessageNotReadableException: Required request body is missing</code> error, when I'm definitely passing a body into the <code>HttpEntity</code> that is my request object.</p>\n<p>Passing in an identical body into postman, or into a controller test using MockMvc, works just fine, but I want to automatically test the whole application end-to-end.</p>\n<p>If there is something wrong with what I'm passing down, I'd expect it to be giving me a JSON parsing error, not a missing body error. I've tried changing the type of what I'm passing down, and setting content-type to be text/plain - neither of these have caused the error to change or disappear.</p>\n<p>My test code:</p>\n<pre><code>package uk.co.heywood.sonarconverter.integration;\n\nimport static org.assertj.core.api.Assertions.assertThat;\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.header;\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.method;\nimport static org.springframework.test.web.client.match.MockRestRequestMatchers.requestTo;\nimport static org.springframework.test.web.client.response.MockRestResponseCreators.withStatus;\n\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.web.client.TestRestTemplate;\nimport org.springframework.http.HttpEntity;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.test.context.TestPropertySource;\nimport org.springframework.test.web.client.ExpectedCount;\nimport org.springframework.test.web.client.MockRestServiceServer;\nimport org.springframework.web.client.RestTemplate;\n\nimport uk.co.heywood.sonarconverter.Application;\nimport uk.co.heywood.sonarconverter.utils.TestUtils;\n\n@SpringBootTest(classes = Application.class, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@TestPropertySource(properties = {&quot;sonar.qubeToken=aFakeQubeToken&quot;, &quot;sonar.cloudToken=aFakeCloudToken&quot;})\nclass SonarConverterIntegrationTest\n{\n    \n    private static final String URL = &quot;/api/sonar/diff&quot;;\n    private static final String SONARQUBE_URL = &quot;https://sonarqube.services.mywork.co.uk/api/issues/search?projects=myproject&amp;componentKeys=myComponentKeys&amp;statuses=OPEN&amp;ps=500&amp;p=1&quot;;\n    private static final String SONARCLOUD_URL = &quot;https://sonarcloud.io/api/issues/search?projects=myCloudProject&amp;statuses=OPEN&amp;ps=500&amp;p=1&quot;;\n    \n    private static final String SONARQUBE_RESPONSE = TestUtils.fromFile( &quot;integration/sonarqube-response.json&quot; );\n    private static final String SONARCLOUD_RESPONSE = TestUtils.fromFile( &quot;integration/sonarcloud-response.json&quot; );\n    private static final String EXPECTED_RESULT = TestUtils.fromFile( &quot;integration/result.csv&quot; );\n    \n    @Autowired\n    private TestRestTemplate testRestTemplate;\n    \n    @Autowired\n    private RestTemplate restTemplate;\n    private MockRestServiceServer mockRestServiceServer;\n    \n    @BeforeEach\n    void setUp() {\n        mockRestServiceServer = MockRestServiceServer.createServer( restTemplate );\n    }\n    \n    @Test\n    void canCreateCsv() {\n        \n        mockRestServiceServer.expect( ExpectedCount.once(),\n                        requestTo(SONARQUBE_URL))\n                .andExpect( method(HttpMethod.GET) )\n                .andExpect( header( HttpHeaders.AUTHORIZATION, &quot;Bearer aFakeQubeToken&quot; ) )\n                .andRespond( withStatus( HttpStatus.OK )\n                        .contentType( MediaType.APPLICATION_JSON )\n                        .body( SONARQUBE_RESPONSE ));\n        mockRestServiceServer.expect( ExpectedCount.once(),\n                        requestTo(SONARCLOUD_URL))\n                .andExpect( method(HttpMethod.GET) )\n                .andExpect( header( HttpHeaders.AUTHORIZATION, &quot;Bearer aFakeCloudToken&quot; ) )\n                .andRespond( withStatus( HttpStatus.OK )\n                        .contentType( MediaType.APPLICATION_JSON )\n                        .body( SONARCLOUD_RESPONSE ));\n        \n        HttpHeaders headers = new HttpHeaders();\n        headers.add( HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE );\n        HttpEntity&lt;String&gt; request = new HttpEntity&lt;&gt;( &quot;&quot;&quot;\n                [\n                    &quot;aParameter&quot;, &quot;anotherParameter&quot;\n                ]&quot;&quot;&quot;, headers );\n        ResponseEntity&lt;String&gt; response = testRestTemplate.exchange(\n                URL,\n                HttpMethod.GET,\n                request,\n                String.class\n        );\n        assertThat(response.getStatusCode()).isEqualTo( HttpStatus.OK );\n        assertThat(response.getBody()).isEqualTo( EXPECTED_RESULT );\n    }\n}\n\n</code></pre>\n"},{"tags":["java","apache-poi","xssfworkbook"],"comments":[{"owner":{"account_id":7259207,"reputation":92,"user_id":5536648,"display_name":"A R K"},"score":2,"creation_date":1695810995,"post_id":77186361,"comment_id":136073124,"body_markdown":"Have you tried disabling the logging as per the FAQ on POI https://poi.apache.org/help/faq.html#faq-N10109","body":"Have you tried disabling the logging as per the FAQ on POI <a href=\"https://poi.apache.org/help/faq.html#faq-N10109\" rel=\"nofollow noreferrer\">poi.apache.org/help/faq.html#faq-N10109</a>"},{"owner":{"account_id":29545976,"reputation":1,"user_id":22643683,"display_name":"Anas Mansuri"},"score":0,"creation_date":1695818714,"post_id":77186361,"comment_id":136074656,"body_markdown":"Hi @ARK, even after disabling the logging option the result is same.","body":"Hi @ARK, even after disabling the logging option the result is same."},{"owner":{"account_id":7259207,"reputation":92,"user_id":5536648,"display_name":"A R K"},"score":1,"creation_date":1695820853,"post_id":77186361,"comment_id":136075160,"body_markdown":"Is it possible to try the constructor that takes the file instead of the input stream? as per this post https://poi.apache.org/components/spreadsheet/quick-guide.html#FileInputStream","body":"Is it possible to try the constructor that takes the file instead of the input stream? as per this post <a href=\"https://poi.apache.org/components/spreadsheet/quick-guide.html#FileInputStream\" rel=\"nofollow noreferrer\">poi.apache.org/components/spreadsheet/&hellip;</a>"},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1695828664,"post_id":77186361,"comment_id":136076981,"body_markdown":"Are you loading the excel data from a database blob?","body":"Are you loading the excel data from a database blob?"},{"owner":{"account_id":29545976,"reputation":1,"user_id":22643683,"display_name":"Anas Mansuri"},"score":0,"creation_date":1695880587,"post_id":77186361,"comment_id":136083368,"body_markdown":"Yes I&#39;m loading blob data from the DB, I print the blob length as well just above this statement, it&#39;s able to print very quickly.","body":"Yes I&#39;m loading blob data from the DB, I print the blob length as well just above this statement, it&#39;s able to print very quickly."}],"owner":{"account_id":29545976,"reputation":1,"user_id":22643683,"display_name":"Anas Mansuri"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695812167,"creation_date":1695808147,"question_id":77186361,"body_markdown":"When I&#39;m trying to read Excel file using Apache PO XSSFWorkbook, below line is taking more than 20 minutes for loading a 4 MB Excel file.\r\n\r\n```\r\nXSSFWorkbook workbook = new XSSFWorkbook(blob.getBinaryStream()); \r\n```\r\n\r\nI tried with workbook.create() streaming method as well, but result is the same. Kindly suggest and advise on below issue  \r\n\r\nI tried all the possible approaches of Excel file read like SXSSFWorkbook, Workbook, XSSFReader), but not getting fruitful results. My expectation is program should read file as fast as possible.","title":"XSSFWorkbook is taking too much time to load excel file using InputStream","body":"<p>When I'm trying to read Excel file using Apache PO XSSFWorkbook, below line is taking more than 20 minutes for loading a 4 MB Excel file.</p>\n<pre><code>XSSFWorkbook workbook = new XSSFWorkbook(blob.getBinaryStream()); \n</code></pre>\n<p>I tried with workbook.create() streaming method as well, but result is the same. Kindly suggest and advise on below issue</p>\n<p>I tried all the possible approaches of Excel file read like SXSSFWorkbook, Workbook, XSSFReader), but not getting fruitful results. My expectation is program should read file as fast as possible.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":18585758,"reputation":21,"user_id":13544185,"display_name":"Alexander Feinstein"},"score":1,"creation_date":1589544453,"post_id":61806301,"comment_id":109343153,"body_markdown":"To anyone who is curious, I ended up not using JavaFX&#39;s ImageCursor class and instead implemented this functionality using an ImageView that follows the cursor.","body":"To anyone who is curious, I ended up not using JavaFX&#39;s ImageCursor class and instead implemented this functionality using an ImageView that follows the cursor."}],"owner":{"account_id":18585758,"reputation":21,"user_id":13544185,"display_name":"Alexander Feinstein"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1682855199,"answer_count":0,"score":2,"last_activity_date":1695812018,"creation_date":1589486178,"question_id":61806301,"body_markdown":"I am creating a JavaFX application that is using an ImageCursor. After some time, the cursor stops displaying the image and instead displays this:\r\n\r\n\r\n![Sample][1]  \r\n(The &quot;corrupted&quot; cursor (notice the green lines, the yellow is the background of the app))\r\n\r\n  [1]: https://i.stack.imgur.com/C9OoL.png\r\n\r\nWhy does this happen with the JavaFX ImageCursor class, and how do you prevent this?\r\n\r\nNOTE: this only seems to happen when I click off the app and click back in.","title":"JavaFX ImageCursor becoming corrupted and not displaying correctly","body":"<p>I am creating a JavaFX application that is using an ImageCursor. After some time, the cursor stops displaying the image and instead displays this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/C9OoL.png\" alt=\"Sample\"><br>\n(The \"corrupted\" cursor (notice the green lines, the yellow is the background of the app))</p>\n\n<p>Why does this happen with the JavaFX ImageCursor class, and how do you prevent this?</p>\n\n<p>NOTE: this only seems to happen when I click off the app and click back in.</p>\n"},{"tags":["java","android","xml","android-studio","android-databinding"],"answers":[{"tags":[],"owner":{"account_id":16923232,"reputation":1,"user_id":12239518,"display_name":"iLikeDarknetDiaries"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695811846,"creation_date":1695811846,"answer_id":77186794,"question_id":62491198,"body_markdown":"I just had the same problem. Adding this below buildTypes solved the issue for me:\r\n\r\n    buildFeatures {\r\n        viewBinding true\r\n    }","title":"error: package android.databinding does not exist","body":"<p>I just had the same problem. Adding this below buildTypes solved the issue for me:</p>\n<pre><code>buildFeatures {\n    viewBinding true\n}\n</code></pre>\n"}],"owner":{"account_id":18893241,"reputation":11,"user_id":13783023,"display_name":"Gianna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":474,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695811846,"creation_date":1592684318,"question_id":62491198,"body_markdown":"I am building my first Android app. I am following this tutorial for making a calculator application by Android Authority here: https://www.androidauthority.com/build-a-calculator-app-721910\r\n\r\nI have the latest version of Android Studio installed and Gradle is up to date as well. I have been searching for a solution to this problem since days now. I have referred to many StackOverflow answers and have looked into my own code as well. I don&#39;t get any error using Sync Project with Gradle files. The error pops up only when I build the APK. Here is the error I am getting:\r\n\r\n    error: package android.databinding does not exist\r\n    error: package android.support.v7.app does not exist\r\n    error: package com.sample.foo.samplecalculator.databinding does not exist\r\n    error: cannot find symbol AppCompactActivity\r\n    cannot find symbol ActivityMainBinding\r\n\r\n\r\nThis is my MainActivity.java file:\r\n\r\n    package com.example.calculator;\r\n    \r\n    import android.databinding.DataBindingUtil;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    \r\n    import com.sample.foo.samplecalculator.databinding.ActivityMainBinding;\r\n    \r\n    import java.text.DecimalFormat;\r\n    \r\n    public class MainActivity extends AppCompactActivity {\r\n    \r\n        private ActivityMainBinding binding;\r\n    \r\n        private static final char ADDITION = &#39;+&#39;;\r\n        private static final char SUBTRACTION = &#39;-&#39;;\r\n        private static final char MULTIPLICATION = &#39;*&#39;;\r\n        private static final char DIVISION = &#39;/&#39;;\r\n    \r\n        private char CURRENT_ACTION;\r\n    \r\n        private double valueOne = Double.NaN;\r\n        private double valueTwo;\r\n    \r\n        private DecimalFormat decimalFormat;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            decimalFormat = new DecimalFormat(&quot;#.##########&quot;);\r\n    \r\n            binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\r\n    \r\n            binding.buttonDot.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;.&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonZero.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;0&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonOne.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;1&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonTwo.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;2&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonThree.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;3&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonFour.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;4&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonFive.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;5&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonSix.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;6&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonSeven.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;7&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonEight.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;8&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonNine.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    binding.editText.setText(binding.editText.getText() + &quot;9&quot;);\r\n                }\r\n            });\r\n    \r\n            binding.buttonAdd.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    CURRENT_ACTION = ADDITION;\r\n                    binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;+&quot;);\r\n                    binding.editText.setText(null);\r\n                }\r\n            });\r\n    \r\n            binding.buttonSubtract.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    CURRENT_ACTION = SUBTRACTION;\r\n                    binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;-&quot;);\r\n                    binding.editText.setText(null);\r\n                }\r\n            });\r\n    \r\n            binding.buttonMultiply.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    CURRENT_ACTION = MULTIPLICATION;\r\n                    binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;*&quot;);\r\n                    binding.editText.setText(null);\r\n                }\r\n            });\r\n    \r\n            binding.buttonDivide.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    CURRENT_ACTION = DIVISION;\r\n                    binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;/&quot;);\r\n                    binding.editText.setText(null);\r\n                }\r\n            });\r\n    \r\n            binding.buttonEqual.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    computeCalculation();\r\n                    binding.infoTextView.setText(binding.infoTextView.getText().toString() +\r\n                            decimalFormat.format(valueTwo) + &quot; = &quot; + decimalFormat.format(valueOne));\r\n                    valueOne = Double.NaN;\r\n                    CURRENT_ACTION = &#39;0&#39;;\r\n                }\r\n            });\r\n    \r\n            binding.buttonClear.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if(binding.editText.getText().length() &gt; 0) {\r\n                        CharSequence currentText = binding.editText.getText();\r\n                        binding.editText.setText(currentText.subSequence(0, currentText.length()-1));\r\n                    }\r\n                    else {\r\n                        valueOne = Double.NaN;\r\n                        valueTwo = Double.NaN;\r\n                        binding.editText.setText(&quot;&quot;);\r\n                        binding.infoTextView.setText(&quot;&quot;);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void computeCalculation() {\r\n            if(!Double.isNaN(valueOne)) {\r\n                valueTwo = Double.parseDouble(binding.editText.getText().toString());\r\n                binding.editText.setText(null);\r\n    \r\n                if(CURRENT_ACTION == ADDITION)\r\n                    valueOne = this.valueOne + valueTwo;\r\n                else if(CURRENT_ACTION == SUBTRACTION)\r\n                    valueOne = this.valueOne - valueTwo;\r\n                else if(CURRENT_ACTION == MULTIPLICATION)\r\n                    valueOne = this.valueOne * valueTwo;\r\n                else if(CURRENT_ACTION == DIVISION)\r\n                    valueOne = this.valueOne / valueTwo;\r\n            }\r\n            else {\r\n                try {\r\n                    valueOne = Double.parseDouble(binding.editText.getText().toString());\r\n                }\r\n                catch (Exception e){}\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nHere is the code to my activity_main.xml file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layout&gt;\r\n    \r\n        &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            android:id=&quot;@+id/activity_main&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\r\n            android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n            tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/infoTextView&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginBottom=&quot;30dp&quot;\r\n                android:textSize=&quot;30sp&quot; /&gt;\r\n    \r\n            &lt;EditText\r\n                android:id=&quot;@+id/editText&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/infoTextView&quot;\r\n                android:enabled=&quot;false&quot;\r\n                android:gravity=&quot;bottom&quot;\r\n                android:lines=&quot;2&quot;\r\n                android:maxLines=&quot;2&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonSeven&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/editText&quot;\r\n                android:text=&quot;7&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonEight&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/editText&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonSeven&quot;\r\n                android:text=&quot;8&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonNine&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/editText&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonEight&quot;\r\n                android:text=&quot;9&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonFour&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/buttonSeven&quot;\r\n                android:text=&quot;4&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonFive&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonEight&quot;\r\n                android:layout_below=&quot;@id/buttonEight&quot;\r\n                android:text=&quot;5&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonSix&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonNine&quot;\r\n                android:layout_below=&quot;@id/buttonNine&quot;\r\n                android:text=&quot;6&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonOne&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/buttonFour&quot;\r\n                android:text=&quot;1&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonTwo&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonEight&quot;\r\n                android:layout_below=&quot;@id/buttonFive&quot;\r\n                android:text=&quot;2&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonThree&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonNine&quot;\r\n                android:layout_below=&quot;@id/buttonSix&quot;\r\n                android:text=&quot;3&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonDot&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_below=&quot;@id/buttonOne&quot;\r\n                android:text=&quot;.&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonZero&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonEight&quot;\r\n                android:layout_below=&quot;@id/buttonTwo&quot;\r\n                android:text=&quot;0&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonEqual&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonNine&quot;\r\n                android:layout_below=&quot;@id/buttonThree&quot;\r\n                android:text=&quot;=&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonDivide&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignTop=&quot;@id/buttonNine&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonNine&quot;\r\n                android:text=&quot;/&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonMultiply&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignTop=&quot;@id/buttonSix&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonSix&quot;\r\n                android:text=&quot;*&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonSubtract&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignTop=&quot;@id/buttonThree&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonThree&quot;\r\n                android:text=&quot;-&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonAdd&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignTop=&quot;@id/buttonEqual&quot;\r\n                android:layout_toRightOf=&quot;@id/buttonEqual&quot;\r\n                android:text=&quot;+&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/buttonClear&quot;\r\n                style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignRight=&quot;@id/buttonAdd&quot;\r\n                android:layout_below=&quot;@id/buttonAdd&quot;\r\n                android:layout_marginTop=&quot;@dimen/activity_vertical_margin&quot;\r\n                android:text=&quot;C&quot;\r\n                android:textSize=&quot;20sp&quot; /&gt;\r\n        &lt;/RelativeLayout&gt;\r\n    &lt;/layout&gt;\r\n\r\nThe build.gradle(app) is as follows:\r\n\r\n        apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 29\r\n        buildToolsVersion &quot;29.0.3&quot;\r\n        dataBinding.enabled = true\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.example.calculator&quot;\r\n            minSdkVersion 16\r\n            targetSdkVersion 29\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n    \r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    \r\n        implementation &#39;androidx.appcompat:appcompat:1.1.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:1.1.3&#39;\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.1&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.2.0&#39;\r\n    }","title":"error: package android.databinding does not exist","body":"<p>I am building my first Android app. I am following this tutorial for making a calculator application by Android Authority here: <a href=\"https://www.androidauthority.com/build-a-calculator-app-721910\" rel=\"nofollow noreferrer\">https://www.androidauthority.com/build-a-calculator-app-721910</a></p>\n<p>I have the latest version of Android Studio installed and Gradle is up to date as well. I have been searching for a solution to this problem since days now. I have referred to many StackOverflow answers and have looked into my own code as well. I don't get any error using Sync Project with Gradle files. The error pops up only when I build the APK. Here is the error I am getting:</p>\n<pre><code>error: package android.databinding does not exist\nerror: package android.support.v7.app does not exist\nerror: package com.sample.foo.samplecalculator.databinding does not exist\nerror: cannot find symbol AppCompactActivity\ncannot find symbol ActivityMainBinding\n</code></pre>\n<p>This is my MainActivity.java file:</p>\n<pre><code>package com.example.calculator;\n\nimport android.databinding.DataBindingUtil;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.view.View;\n\nimport com.sample.foo.samplecalculator.databinding.ActivityMainBinding;\n\nimport java.text.DecimalFormat;\n\npublic class MainActivity extends AppCompactActivity {\n\n    private ActivityMainBinding binding;\n\n    private static final char ADDITION = '+';\n    private static final char SUBTRACTION = '-';\n    private static final char MULTIPLICATION = '*';\n    private static final char DIVISION = '/';\n\n    private char CURRENT_ACTION;\n\n    private double valueOne = Double.NaN;\n    private double valueTwo;\n\n    private DecimalFormat decimalFormat;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        decimalFormat = new DecimalFormat(&quot;#.##########&quot;);\n\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\n\n        binding.buttonDot.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;.&quot;);\n            }\n        });\n\n        binding.buttonZero.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;0&quot;);\n            }\n        });\n\n        binding.buttonOne.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;1&quot;);\n            }\n        });\n\n        binding.buttonTwo.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;2&quot;);\n            }\n        });\n\n        binding.buttonThree.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;3&quot;);\n            }\n        });\n\n        binding.buttonFour.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;4&quot;);\n            }\n        });\n\n        binding.buttonFive.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;5&quot;);\n            }\n        });\n\n        binding.buttonSix.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;6&quot;);\n            }\n        });\n\n        binding.buttonSeven.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;7&quot;);\n            }\n        });\n\n        binding.buttonEight.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;8&quot;);\n            }\n        });\n\n        binding.buttonNine.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                binding.editText.setText(binding.editText.getText() + &quot;9&quot;);\n            }\n        });\n\n        binding.buttonAdd.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                CURRENT_ACTION = ADDITION;\n                binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;+&quot;);\n                binding.editText.setText(null);\n            }\n        });\n\n        binding.buttonSubtract.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                CURRENT_ACTION = SUBTRACTION;\n                binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;-&quot;);\n                binding.editText.setText(null);\n            }\n        });\n\n        binding.buttonMultiply.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                CURRENT_ACTION = MULTIPLICATION;\n                binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;*&quot;);\n                binding.editText.setText(null);\n            }\n        });\n\n        binding.buttonDivide.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                CURRENT_ACTION = DIVISION;\n                binding.infoTextView.setText(decimalFormat.format(valueOne) + &quot;/&quot;);\n                binding.editText.setText(null);\n            }\n        });\n\n        binding.buttonEqual.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                computeCalculation();\n                binding.infoTextView.setText(binding.infoTextView.getText().toString() +\n                        decimalFormat.format(valueTwo) + &quot; = &quot; + decimalFormat.format(valueOne));\n                valueOne = Double.NaN;\n                CURRENT_ACTION = '0';\n            }\n        });\n\n        binding.buttonClear.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if(binding.editText.getText().length() &gt; 0) {\n                    CharSequence currentText = binding.editText.getText();\n                    binding.editText.setText(currentText.subSequence(0, currentText.length()-1));\n                }\n                else {\n                    valueOne = Double.NaN;\n                    valueTwo = Double.NaN;\n                    binding.editText.setText(&quot;&quot;);\n                    binding.infoTextView.setText(&quot;&quot;);\n                }\n            }\n        });\n    }\n\n    private void computeCalculation() {\n        if(!Double.isNaN(valueOne)) {\n            valueTwo = Double.parseDouble(binding.editText.getText().toString());\n            binding.editText.setText(null);\n\n            if(CURRENT_ACTION == ADDITION)\n                valueOne = this.valueOne + valueTwo;\n            else if(CURRENT_ACTION == SUBTRACTION)\n                valueOne = this.valueOne - valueTwo;\n            else if(CURRENT_ACTION == MULTIPLICATION)\n                valueOne = this.valueOne * valueTwo;\n            else if(CURRENT_ACTION == DIVISION)\n                valueOne = this.valueOne / valueTwo;\n        }\n        else {\n            try {\n                valueOne = Double.parseDouble(binding.editText.getText().toString());\n            }\n            catch (Exception e){}\n        }\n    }\n}\n</code></pre>\n<p>Here is the code to my activity_main.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout&gt;\n\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        android:id=&quot;@+id/activity_main&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\n        android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\n        tools:context=&quot;.MainActivity&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/infoTextView&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginBottom=&quot;30dp&quot;\n            android:textSize=&quot;30sp&quot; /&gt;\n\n        &lt;EditText\n            android:id=&quot;@+id/editText&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/infoTextView&quot;\n            android:enabled=&quot;false&quot;\n            android:gravity=&quot;bottom&quot;\n            android:lines=&quot;2&quot;\n            android:maxLines=&quot;2&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonSeven&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/editText&quot;\n            android:text=&quot;7&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonEight&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/editText&quot;\n            android:layout_toRightOf=&quot;@id/buttonSeven&quot;\n            android:text=&quot;8&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonNine&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/editText&quot;\n            android:layout_toRightOf=&quot;@id/buttonEight&quot;\n            android:text=&quot;9&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonFour&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/buttonSeven&quot;\n            android:text=&quot;4&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonFive&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonEight&quot;\n            android:layout_below=&quot;@id/buttonEight&quot;\n            android:text=&quot;5&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonSix&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonNine&quot;\n            android:layout_below=&quot;@id/buttonNine&quot;\n            android:text=&quot;6&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonOne&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/buttonFour&quot;\n            android:text=&quot;1&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonTwo&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonEight&quot;\n            android:layout_below=&quot;@id/buttonFive&quot;\n            android:text=&quot;2&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonThree&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonNine&quot;\n            android:layout_below=&quot;@id/buttonSix&quot;\n            android:text=&quot;3&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonDot&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_below=&quot;@id/buttonOne&quot;\n            android:text=&quot;.&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonZero&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonEight&quot;\n            android:layout_below=&quot;@id/buttonTwo&quot;\n            android:text=&quot;0&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonEqual&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonNine&quot;\n            android:layout_below=&quot;@id/buttonThree&quot;\n            android:text=&quot;=&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonDivide&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignTop=&quot;@id/buttonNine&quot;\n            android:layout_toRightOf=&quot;@id/buttonNine&quot;\n            android:text=&quot;/&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonMultiply&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignTop=&quot;@id/buttonSix&quot;\n            android:layout_toRightOf=&quot;@id/buttonSix&quot;\n            android:text=&quot;*&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonSubtract&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignTop=&quot;@id/buttonThree&quot;\n            android:layout_toRightOf=&quot;@id/buttonThree&quot;\n            android:text=&quot;-&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonAdd&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignTop=&quot;@id/buttonEqual&quot;\n            android:layout_toRightOf=&quot;@id/buttonEqual&quot;\n            android:text=&quot;+&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/buttonClear&quot;\n            style=&quot;@style/Widget.AppCompat.Button.Borderless&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignRight=&quot;@id/buttonAdd&quot;\n            android:layout_below=&quot;@id/buttonAdd&quot;\n            android:layout_marginTop=&quot;@dimen/activity_vertical_margin&quot;\n            android:text=&quot;C&quot;\n            android:textSize=&quot;20sp&quot; /&gt;\n    &lt;/RelativeLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n<p>The build.gradle(app) is as follows:</p>\n<pre><code>    apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 29\n    buildToolsVersion &quot;29.0.3&quot;\n    dataBinding.enabled = true\n\n    defaultConfig {\n        applicationId &quot;com.example.calculator&quot;\n        minSdkVersion 16\n        targetSdkVersion 29\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n\n    implementation 'androidx.appcompat:appcompat:1.1.0'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n}\n</code></pre>\n"},{"tags":["java","spring-boot","http","cors"],"comments":[{"owner":{"account_id":20196841,"reputation":2309,"user_id":14813577,"display_name":"kennarddh"},"score":0,"creation_date":1695799625,"post_id":77185207,"comment_id":136070905,"body_markdown":"what is this has to do with [tag:cors]?","body":"what is this has to do with <a href=\"https://stackoverflow.com/questions/tagged/cors\">cors</a>?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695803138,"post_id":77185207,"comment_id":136071539,"body_markdown":"Can you please share a [mcve] so we can test it ourselves?","body":"Can you please share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can test it ourselves?"},{"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"score":0,"creation_date":1695807963,"post_id":77185207,"comment_id":136072542,"body_markdown":"@dan1st I think not because the application is running on a server that can only be accessed via vpn","body":"@dan1st I think not because the application is running on a server that can only be accessed via vpn"},{"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"score":0,"creation_date":1695808102,"post_id":77185207,"comment_id":136072568,"body_markdown":"The strangest thing is making a request over https everything works, but if you try to make a request over http, you will get a 405 error","body":"The strangest thing is making a request over https everything works, but if you try to make a request over http, you will get a 405 error"},{"owner":{"account_id":10770525,"reputation":526,"user_id":7924110,"display_name":"Kenany"},"score":0,"creation_date":1695809868,"post_id":77185207,"comment_id":136072920,"body_markdown":"Did you define a context path? If not, you should do It. Then your uri will become &quot;http://[server-domain]/[context-path]/api/quizz&quot;\nFollow this tutorial to define the context path:  https://www.baeldung.com/spring-boot-context-path","body":"Did you define a context path? If not, you should do It. Then your uri will become &quot;http://[server-domain]/[context-path]/api/quizz&quot; Follow this tutorial to define the context path:  <a href=\"https://www.baeldung.com/spring-boot-context-path\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-context-path</a>"}],"answers":[{"tags":[],"owner":{"account_id":16318929,"reputation":57,"user_id":11785247,"display_name":"vahid asghari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695810449,"creation_date":1695810449,"answer_id":77186632,"question_id":77185207,"body_markdown":"You can Use Bean, I Hope Working That For You\r\n\r\n    @Bean\r\n\tpublic WebMvcConfigurer corsConfigurer() {\r\n\t\treturn new WebMvcConfigurer() {\r\n\t\t\t@Override\r\n\t\t\tpublic void addCorsMappings(CorsRegistry registry) {\r\n\t\t\t\tregistry.addMapping(&quot;/greeting-javaconfig&quot;).allowedOrigins(&quot;http://localhost:8080&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t}","title":"Can&#39;t make a POST request to the Spring Boot server","body":"<p>You can Use Bean, I Hope Working That For You</p>\n<pre><code>@Bean\npublic WebMvcConfigurer corsConfigurer() {\n    return new WebMvcConfigurer() {\n        @Override\n        public void addCorsMappings(CorsRegistry registry) {\n            registry.addMapping(&quot;/greeting-javaconfig&quot;).allowedOrigins(&quot;http://localhost:8080&quot;);\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695811632,"creation_date":1695811549,"answer_id":77186756,"question_id":77185207,"body_markdown":"I added such a configuration class, it didn&#39;t help \r\n\r\n    @Configuration\r\n    public class CorsConfig implements WebMvcConfigurer {\r\n    \r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;)\r\n                    .allowedOrigins(&quot;*&quot;)\r\n                    .allowedMethods(&quot;*&quot;)\r\n                    .allowedHeaders(&quot;*&quot;);\r\n        }\r\n    }","title":"Can&#39;t make a POST request to the Spring Boot server","body":"<p>I added such a configuration class, it didn't help</p>\n<pre><code>@Configuration\npublic class CorsConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;)\n                .allowedMethods(&quot;*&quot;)\n                .allowedHeaders(&quot;*&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29369550,"reputation":79,"user_id":22502444,"display_name":"KripDo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695811632,"creation_date":1695797522,"question_id":77185207,"body_markdown":"I&#39;m making a Spring Boot application that has a controller. The application is running on a domain, when I try to make a POST request via a link via http, I get a 405 error, but when making a request via https everything works, the strangest thing is that it doesn&#39;t matter for the GET method http or https, it works in both cases. Below is the code of the controller and an example of requests.\r\n\r\n```\r\n@Slf4j\r\n@RestController\r\n@CrossOrigin(&quot;*&quot;)\r\n@Tag(name = &quot;Quiz&quot;)\r\n@RequiredArgsConstructor\r\n@RequestMapping(&quot;/api/quiz&quot;)\r\npublic class QuizController {\r\n\r\n    private final QuizService quizService;\r\n\r\n    @Operation(\r\n            description = &quot;Creating quiz&quot;,\r\n            summary = &quot;Creating new quiz by dto and sending message to users&quot;,\r\n            responses = {\r\n                    @ApiResponse(description = &quot;Success&quot;, responseCode = &quot;201&quot;),\r\n                    @ApiResponse(description = &quot;Quiz with this name already exists&quot;, responseCode = &quot;400&quot;)})\r\n    @PostMapping\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public void createQuiz(@RequestBody QuizDataDTO quizDataDTO) {\r\n        quizService.createQuiz(quizDataDTO);\r\n        quizService.spreadQuiz(quizDataDTO.getTelegramUsersIds());\r\n        log.info(&quot;Create quiz with name {}&quot;, quizDataDTO.getQuizDTO().getQuizName());\r\n    }\r\n\r\n    @Operation(description = &quot;Get links&quot;,\r\n            summary = &quot;Getting all links from google sheets lists&quot;,\r\n            responses = @ApiResponse(description = &quot;Success&quot;, responseCode = &quot;200&quot;))\r\n    @GetMapping(&quot;/links&quot;)\r\n    @ResponseStatus(HttpStatus.OK)\r\n    public List&lt;QuizDetailsDTO&gt; getAllQuizs() {\r\n        log.info(&quot;Return all quiz&quot;);\r\n        return quizService.getAllQuizs();\r\n    }\r\n}\r\n```\r\n[Use POST to http](https://i.stack.imgur.com/0iCbH.png)\r\n\r\nI tried to configure CORS in configuration file. It doen&#39;t works","title":"Can&#39;t make a POST request to the Spring Boot server","body":"<p>I'm making a Spring Boot application that has a controller. The application is running on a domain, when I try to make a POST request via a link via http, I get a 405 error, but when making a request via https everything works, the strangest thing is that it doesn't matter for the GET method http or https, it works in both cases. Below is the code of the controller and an example of requests.</p>\n<pre><code>@Slf4j\n@RestController\n@CrossOrigin(&quot;*&quot;)\n@Tag(name = &quot;Quiz&quot;)\n@RequiredArgsConstructor\n@RequestMapping(&quot;/api/quiz&quot;)\npublic class QuizController {\n\n    private final QuizService quizService;\n\n    @Operation(\n            description = &quot;Creating quiz&quot;,\n            summary = &quot;Creating new quiz by dto and sending message to users&quot;,\n            responses = {\n                    @ApiResponse(description = &quot;Success&quot;, responseCode = &quot;201&quot;),\n                    @ApiResponse(description = &quot;Quiz with this name already exists&quot;, responseCode = &quot;400&quot;)})\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public void createQuiz(@RequestBody QuizDataDTO quizDataDTO) {\n        quizService.createQuiz(quizDataDTO);\n        quizService.spreadQuiz(quizDataDTO.getTelegramUsersIds());\n        log.info(&quot;Create quiz with name {}&quot;, quizDataDTO.getQuizDTO().getQuizName());\n    }\n\n    @Operation(description = &quot;Get links&quot;,\n            summary = &quot;Getting all links from google sheets lists&quot;,\n            responses = @ApiResponse(description = &quot;Success&quot;, responseCode = &quot;200&quot;))\n    @GetMapping(&quot;/links&quot;)\n    @ResponseStatus(HttpStatus.OK)\n    public List&lt;QuizDetailsDTO&gt; getAllQuizs() {\n        log.info(&quot;Return all quiz&quot;);\n        return quizService.getAllQuizs();\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/0iCbH.png\" rel=\"nofollow noreferrer\">Use POST to http</a></p>\n<p>I tried to configure CORS in configuration file. It doen't works</p>\n"},{"tags":["java","sql","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1695843984,"post_id":77183779,"comment_id":136079717,"body_markdown":"This type of requirement is not fit for a statically defined query string - you need to define the query on the fly based on the given parameters. JPA has criteria api for this purpose, so you can then determine if jobTypes was defined and needs to be added to the query or just ignored and skipped without burdening your database with null checks. Spring has JPA Specifications built around it - see https://www.baeldung.com/spring-data-criteria-queries","body":"This type of requirement is not fit for a statically defined query string - you need to define the query on the fly based on the given parameters. JPA has criteria api for this purpose, so you can then determine if jobTypes was defined and needs to be added to the query or just ignored and skipped without burdening your database with null checks. Spring has JPA Specifications built around it - see <a href=\"https://www.baeldung.com/spring-data-criteria-queries\" rel=\"nofollow noreferrer\">baeldung.com/spring-data-criteria-queries</a>"}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695811327,"creation_date":1695804854,"answer_id":77185958,"question_id":77183779,"body_markdown":"Usually when we know that the parameter or list of parameters can be optional aka null the `@Query` should know it:\r\n\r\nCan you try next one query and tell me if it is going to fix the problem:\r\n\r\n      @Query(&quot;&quot;&quot;\r\n            select c from Company c\r\n            where ((:jobTypes) is null or (EXISTS (select 1 from CompanyJobType cjt JOIN JobType jt on cjt.jobType = jt where jt.name in :jobTypes and cjt.company = c)))\r\n            AND ((:industries) is null or (EXISTS (select 1 from CompanyIndustry ci JOIN Industry i on ci.industry = i where i.name in :industries and ci.company = c)))\r\n            AND ((:search) is null or (c.name like %:search% or c.shortDescription like %:search%))\r\n            AND ((:isStartup) is null or (c.isStartup = :isStartup OR :isStartup = false))\r\n            AND c.talentpoolOpen = true\r\n            &quot;&quot;&quot;)\r\n      Page&lt;Company&gt; find(List&lt;String&gt; jobTypes, List&lt;String&gt; industries, String search, boolean isStartup, Pageable pageable);","title":"Null condition in Jpa @Query","body":"<p>Usually when we know that the parameter or list of parameters can be optional aka null the <code>@Query</code> should know it:</p>\n<p>Can you try next one query and tell me if it is going to fix the problem:</p>\n<pre><code>  @Query(&quot;&quot;&quot;\n        select c from Company c\n        where ((:jobTypes) is null or (EXISTS (select 1 from CompanyJobType cjt JOIN JobType jt on cjt.jobType = jt where jt.name in :jobTypes and cjt.company = c)))\n        AND ((:industries) is null or (EXISTS (select 1 from CompanyIndustry ci JOIN Industry i on ci.industry = i where i.name in :industries and ci.company = c)))\n        AND ((:search) is null or (c.name like %:search% or c.shortDescription like %:search%))\n        AND ((:isStartup) is null or (c.isStartup = :isStartup OR :isStartup = false))\n        AND c.talentpoolOpen = true\n        &quot;&quot;&quot;)\n  Page&lt;Company&gt; find(List&lt;String&gt; jobTypes, List&lt;String&gt; industries, String search, boolean isStartup, Pageable pageable);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695805726,"creation_date":1695805726,"answer_id":77186067,"question_id":77183779,"body_markdown":"For this kind of problem, I usually opt for `COALESCE` jpa function (which maps any null value to a constant string), allowing to avoid the tricky &quot;OR&quot; part.\r\n\r\nFor instance:\r\n\r\n`WHERE CompanyJobType like COALESCE(:JobType, &#39;%&#39;) `\r\n\r\nWhen the JobType param is null, the where clause will be always true (ie CompanyJobType like &#39;%&#39;\r\n\r\nSimple but effective :-)","title":"Null condition in Jpa @Query","body":"<p>For this kind of problem, I usually opt for <code>COALESCE</code> jpa function (which maps any null value to a constant string), allowing to avoid the tricky &quot;OR&quot; part.</p>\n<p>For instance:</p>\n<p><code>WHERE CompanyJobType like COALESCE(:JobType, '%') </code></p>\n<p>When the JobType param is null, the where clause will be always true (ie CompanyJobType like '%'</p>\n<p>Simple but effective :-)</p>\n"}],"owner":{"account_id":7367586,"reputation":147,"user_id":5608881,"accept_rate":80,"display_name":"Apatus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77185958,"answer_count":2,"score":0,"last_activity_date":1695811327,"creation_date":1695767755,"question_id":77183779,"body_markdown":"I have a query in JPA, but all parameters should be optional. I tried many different ways, but none were successful because they threw some error.\r\n\r\nIf for example the given list of job Types is empty it should evaluate this condition as true. Currently no companies would be queried. \r\n\r\n    @Query(&quot;&quot;&quot;\r\n            select c from Company c\r\n            where ((EXISTS (select 1 from CompanyJobType cjt JOIN JobType jt on cjt.jobType = jt where jt.name in :jobTypes and cjt.company = c)))\r\n            AND ((EXISTS (select 1 from CompanyIndustry ci JOIN Industry i on ci.industry = i where i.name in :industries and ci.company = c)))\r\n            AND (c.name like %:search% or c.shortDescription like %:search%)\r\n            AND (c.isStartup = :isStartup OR :isStartup = false)\r\n            AND c.talentpoolOpen = true\r\n            &quot;&quot;&quot;)\r\n    Page&lt;Company&gt; find(List&lt;String&gt; jobTypes, List&lt;String&gt; industries, String search, boolean isStartup, Pageable pageable);\r\n\r\nIf you have any other approach how to get this to work, I&#39;m happy to adapt every part.\r\n","title":"Null condition in Jpa @Query","body":"<p>I have a query in JPA, but all parameters should be optional. I tried many different ways, but none were successful because they threw some error.</p>\n<p>If for example the given list of job Types is empty it should evaluate this condition as true. Currently no companies would be queried.</p>\n<pre><code>@Query(&quot;&quot;&quot;\n        select c from Company c\n        where ((EXISTS (select 1 from CompanyJobType cjt JOIN JobType jt on cjt.jobType = jt where jt.name in :jobTypes and cjt.company = c)))\n        AND ((EXISTS (select 1 from CompanyIndustry ci JOIN Industry i on ci.industry = i where i.name in :industries and ci.company = c)))\n        AND (c.name like %:search% or c.shortDescription like %:search%)\n        AND (c.isStartup = :isStartup OR :isStartup = false)\n        AND c.talentpoolOpen = true\n        &quot;&quot;&quot;)\nPage&lt;Company&gt; find(List&lt;String&gt; jobTypes, List&lt;String&gt; industries, String search, boolean isStartup, Pageable pageable);\n</code></pre>\n<p>If you have any other approach how to get this to work, I'm happy to adapt every part.</p>\n"},{"tags":["java","calendar","dayofweek"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":40,"is_accepted":true,"score":40,"last_activity_date":1264077646,"creation_date":1264077646,"answer_id":2109186,"question_id":2109145,"body_markdown":"Those fields does not return the values. Those are **constants** which identifies the fields in the `Calendar` object which you can get/set/add. To achieve what you want, you first need to get a `Calendar`, clear it and set the known values. It will automatically set the date to first day of that week.\r\n\r\n    // We know week number and year.\r\n    int week = 3;\r\n    int year = 2010;\r\n    \r\n    // Get calendar, clear it and set week number and year.\r\n    Calendar calendar = Calendar.getInstance();\r\n    calendar.clear();\r\n    calendar.set(Calendar.WEEK_OF_YEAR, week);\r\n    calendar.set(Calendar.YEAR, year);\r\n    \r\n    // Now get the first day of week.\r\n    Date date = calendar.getTime();\r\n\r\nPlease learn to *read* the [javadocs][1] to learn how to use classes/methods/fields and do not try to poke random in your IDE ;)\r\n\r\nThat said, the `java.util.Date` and `java.util.Calendar` are [epic failures][2]. If you can, consider switching to [Joda Time][3].\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Calendar.html\r\n  [2]: https://stackoverflow.com/questions/1697215/what-is-your-favourite-java-api-annoyance\r\n  [3]: http://joda-time.sourceforge.net/","title":"How to get first day of a given week number in Java","body":"<p>Those fields does not return the values. Those are <strong>constants</strong> which identifies the fields in the <code>Calendar</code> object which you can get/set/add. To achieve what you want, you first need to get a <code>Calendar</code>, clear it and set the known values. It will automatically set the date to first day of that week.</p>\n\n<pre><code>// We know week number and year.\nint week = 3;\nint year = 2010;\n\n// Get calendar, clear it and set week number and year.\nCalendar calendar = Calendar.getInstance();\ncalendar.clear();\ncalendar.set(Calendar.WEEK_OF_YEAR, week);\ncalendar.set(Calendar.YEAR, year);\n\n// Now get the first day of week.\nDate date = calendar.getTime();\n</code></pre>\n\n<p>Please learn to <em>read</em> the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Calendar.html\" rel=\"nofollow noreferrer\">javadocs</a> to learn how to use classes/methods/fields and do not try to poke random in your IDE ;)</p>\n\n<p>That said, the <code>java.util.Date</code> and <code>java.util.Calendar</code> are <a href=\"https://stackoverflow.com/questions/1697215/what-is-your-favourite-java-api-annoyance\">epic failures</a>. If you can, consider switching to <a href=\"http://joda-time.sourceforge.net/\" rel=\"nofollow noreferrer\">Joda Time</a>.</p>\n"},{"tags":[],"owner":{"display_name":"user253984"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1264077710,"creation_date":1264077710,"answer_id":2109196,"question_id":2109145,"body_markdown":"I haven&#39;t done much Date stuff in java but a solution might be:\r\n\r\n    cal.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR) - cal.get(Calendar.DAY_OF_WEEK));\r\n\r\nLogic:\r\n\r\nGet the day of the week and substract it from the current date (might need -1, depending on wether you need monday to be first day of the week or sunday)","title":"How to get first day of a given week number in Java","body":"<p>I haven't done much Date stuff in java but a solution might be:</p>\n\n<pre><code>cal.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR) - cal.get(Calendar.DAY_OF_WEEK));\n</code></pre>\n\n<p>Logic:</p>\n\n<p>Get the day of the week and substract it from the current date (might need -1, depending on wether you need monday to be first day of the week or sunday)</p>\n"},{"tags":[],"owner":{"account_id":91406,"reputation":943,"user_id":250978,"display_name":"SOA Nerd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454932937,"creation_date":1264079219,"answer_id":2109358,"question_id":2109145,"body_markdown":"Here&#39;s some quick and dirty code to do this.  This code creates a calendar object with the date of the current day, calculates the current day of the week, and subtracts the day of the week so you&#39;re on the first one (Sunday).  Although I&#39;m using DAY_OF_YEAR it goes across years fine (on 1/2/10 it&#39;ll return 12/27/09 which is right).\r\n\r\n    import java.text.Format;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    \r\n    \r\n    public class DOW {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tDOW dow = new DOW();\r\n    \t\tdow.doIt();\r\n    \t\tSystem.exit(0);\r\n    \t}\r\n    \r\n    \tprivate void doIt() {\r\n    \t\tDate curr = new Date(); \r\n    \t\tCalendar cal = Calendar.getInstance(); \r\n    \t\tcal.setTime(curr); \r\n    \t\tint currentDOW = cal.get(Calendar.DAY_OF_WEEK);\r\n    \t\tcal.add(Calendar.DAY_OF_YEAR, (currentDOW * -1)+1);\r\n    \t\t\r\n    \t\tFormat formatter = new SimpleDateFormat(&quot;MM/dd/yy&quot;);\r\n    \t\tSystem.out.println(&quot;First day of week=&quot;+formatter.format(cal.getTime()));\r\n    \t}\r\n    }","title":"How to get first day of a given week number in Java","body":"<p>Here's some quick and dirty code to do this.  This code creates a calendar object with the date of the current day, calculates the current day of the week, and subtracts the day of the week so you're on the first one (Sunday).  Although I'm using DAY_OF_YEAR it goes across years fine (on 1/2/10 it'll return 12/27/09 which is right).</p>\n\n<pre><code>import java.text.Format;\nimport java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Date;\n\n\npublic class DOW {\n\n    public static void main(String[] args) {\n        DOW dow = new DOW();\n        dow.doIt();\n        System.exit(0);\n    }\n\n    private void doIt() {\n        Date curr = new Date(); \n        Calendar cal = Calendar.getInstance(); \n        cal.setTime(curr); \n        int currentDOW = cal.get(Calendar.DAY_OF_WEEK);\n        cal.add(Calendar.DAY_OF_YEAR, (currentDOW * -1)+1);\n\n        Format formatter = new SimpleDateFormat(\"MM/dd/yy\");\n        System.out.println(\"First day of week=\"+formatter.format(cal.getTime()));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":301920,"reputation":2739,"user_id":609973,"display_name":"MarianP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1293623598,"creation_date":1293623598,"answer_id":4553851,"question_id":2109145,"body_markdown":"Be cautious with those, `calendar.get(Calendar.WEEK_OF_YEAR)` returns 1 if it is end of December and already a week that ends in the next year.\r\n\r\nUsing\r\n\r\n    //            cal2.set(Calendar.WEEK_OF_YEAR, cal.get(Calendar.WEEK_OF_YEAR));\r\n    //            cal2.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);\r\n\r\nsets the cal2 date to e.g. end of 2009 on 29/12/2010 !!\r\n\r\nI used this:\r\n\r\n    cal2.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR)); //to round at the start of day\r\n    cal2.set(Calendar.YEAR, cal.get(Calendar.YEAR));\r\n    cal2.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY); //to round at the start of week\r\n\r\nI also make sure that weeks in my calendars, no matter what locale they are in, are starting on Mondays:\r\n\r\n    cal.setFirstDayOfWeek(Calendar.MONDAY);\r\n    cal2.setFirstDayOfWeek(Calendar.MONDAY);","title":"How to get first day of a given week number in Java","body":"<p>Be cautious with those, <code>calendar.get(Calendar.WEEK_OF_YEAR)</code> returns 1 if it is end of December and already a week that ends in the next year.</p>\n\n<p>Using</p>\n\n<pre><code>//            cal2.set(Calendar.WEEK_OF_YEAR, cal.get(Calendar.WEEK_OF_YEAR));\n//            cal2.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);\n</code></pre>\n\n<p>sets the cal2 date to e.g. end of 2009 on 29/12/2010 !!</p>\n\n<p>I used this:</p>\n\n<pre><code>cal2.set(Calendar.DAY_OF_YEAR, cal.get(Calendar.DAY_OF_YEAR)); //to round at the start of day\ncal2.set(Calendar.YEAR, cal.get(Calendar.YEAR));\ncal2.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY); //to round at the start of week\n</code></pre>\n\n<p>I also make sure that weeks in my calendars, no matter what locale they are in, are starting on Mondays:</p>\n\n<pre><code>cal.setFirstDayOfWeek(Calendar.MONDAY);\ncal2.setFirstDayOfWeek(Calendar.MONDAY);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1285125,"reputation":41,"user_id":1238369,"display_name":"Vojta"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1343058617,"creation_date":1330447679,"answer_id":9486121,"question_id":2109145,"body_markdown":"Try this:\r\n\r\n    public static Calendar setWeekStart(Calendar calendar) {\r\n      while (calendar.get(Calendar.DAY_OF_WEEK) != Calendar.MONDAY) {\r\n        calendar.add(Calendar.DATE, -1);\r\n      }\r\n      setDayStart(calendar); // method which sets H:M:S:ms to 0\r\n      return calendar;\r\n    }","title":"How to get first day of a given week number in Java","body":"<p>Try this:</p>\n\n<pre><code>public static Calendar setWeekStart(Calendar calendar) {\n  while (calendar.get(Calendar.DAY_OF_WEEK) != Calendar.MONDAY) {\n    calendar.add(Calendar.DATE, -1);\n  }\n  setDayStart(calendar); // method which sets H:M:S:ms to 0\n  return calendar;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":342232,"reputation":8477,"user_id":673282,"accept_rate":79,"display_name":"chim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1347460524,"creation_date":1347460524,"answer_id":12390609,"question_id":2109145,"body_markdown":"Yet another way...\r\n\r\n        GregorianCalendar cal = new GregorianCalendar();\r\n        cal.clearTime();\r\n        Integer correction = 1-cal.get(GregorianCalendar.DAY_OF_WEEK)\r\n        cal.add(Calendar.DATE, correction);\r\n\r\ncal is now the first day of the week\r\n\r\n`1-cal.get(GregorianCalendar.DAY_OF_WEEK)`\r\n\r\nevaluates to 1-1 for Sunday (first day of week in my Locale) and 1-2 for Monday, so this will give you the correction needed to rewind the clock back to Sunday\r\n","title":"How to get first day of a given week number in Java","body":"<p>Yet another way...</p>\n\n<pre><code>    GregorianCalendar cal = new GregorianCalendar();\n    cal.clearTime();\n    Integer correction = 1-cal.get(GregorianCalendar.DAY_OF_WEEK)\n    cal.add(Calendar.DATE, correction);\n</code></pre>\n\n<p>cal is now the first day of the week</p>\n\n<p><code>1-cal.get(GregorianCalendar.DAY_OF_WEEK)</code></p>\n\n<p>evaluates to 1-1 for Sunday (first day of week in my Locale) and 1-2 for Monday, so this will give you the correction needed to rewind the clock back to Sunday</p>\n"},{"tags":[],"owner":{"account_id":1097516,"reputation":103,"user_id":1090794,"accept_rate":40,"display_name":"NovoBook"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375201916,"creation_date":1375201916,"answer_id":17952551,"question_id":2109145,"body_markdown":"Try the Gregorian Calendar algorithm:\r\n\r\n    public int getFirstDay(int m, int year)\r\n        {\r\n            int k=1;\r\n            int c, y, w, M=0;\r\n            if(m&gt;2 &amp;&amp; m&lt;=12) M=m-2;\r\n            else if(m&gt;0 &amp;&amp; M&lt;=2)\r\n            {\r\n                M=m+10;\r\n                year-=1;\r\n            }\r\n            c=year/100;\r\n            y=year%100;\r\n            w=(int)((k+(Math.floor(2.6*M - 0.2))-2*c+y+(Math.floor(y/4))+(Math.floor(c/4)))%7);//a fantastic formula           \r\n            if(w&lt;0) w+=7;\r\n            return w;//thus the day of the week is obtained!\r\n        }","title":"How to get first day of a given week number in Java","body":"<p>Try the Gregorian Calendar algorithm:</p>\n\n<pre><code>public int getFirstDay(int m, int year)\n    {\n        int k=1;\n        int c, y, w, M=0;\n        if(m&gt;2 &amp;&amp; m&lt;=12) M=m-2;\n        else if(m&gt;0 &amp;&amp; M&lt;=2)\n        {\n            M=m+10;\n            year-=1;\n        }\n        c=year/100;\n        y=year%100;\n        w=(int)((k+(Math.floor(2.6*M - 0.2))-2*c+y+(Math.floor(y/4))+(Math.floor(c/4)))%7);//a fantastic formula           \n        if(w&lt;0) w+=7;\n        return w;//thus the day of the week is obtained!\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1630183531,"creation_date":1630148058,"answer_id":68963656,"question_id":2109145,"body_markdown":"# *java.time* \r\n\r\nThe `java.util` Date-Time API and their formatting API, `SimpleDateFormat` are outdated and error-prone. It is recommended to stop using them completely and switch to the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt;.\r\n\r\nAlso, quoted below is a notice from the [home page of **Joda-Time**](https://www.joda.org/joda-time/):\r\n\r\n&gt; Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.\r\n\r\n**Solution using `java.time`, the modern Date-Time API:**\r\n\r\n    import java.time.LocalDate;\r\n    import java.time.temporal.WeekFields;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Test\r\n        \tint weekNumber = 34;\r\n        \tint year = 2021;\r\n        \t\r\n        \tSystem.out.println(getFirstDayOfWeek(year, weekNumber, Locale.UK));\r\n            System.out.println(getFirstDayOfWeek(year, weekNumber, Locale.US));\r\n    \t}\r\n    \r\n    \tstatic LocalDate getFirstDayOfWeek(int year, int weekNumber, Locale locale) {\r\n    \t\treturn LocalDate\r\n    \t\t\t\t.of(year, 2, 1)\r\n                    .with(WeekFields.of(locale).getFirstDayOfWeek())\r\n                    .with(WeekFields.of(locale).weekOfWeekBasedYear(), weekNumber);\r\n    \t}\r\n    }\r\n    \r\n**Output:**\r\n\r\n    2021-08-23\r\n    2021-08-15\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\nNote that the ***first day of the week*** is `Locale`-dependent e.g. it is Monday in the UK while Sunday in the US. As per the [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) standards, it is Monday. For comparison, check the [US calendar](https://www.timeanddate.com/calendar/?year=2021&amp;country=1&amp;wno=1) and the [UK calendar](https://www.timeanddate.com/calendar/?year=2021&amp;country=9&amp;wno=1).\r\n\r\nLearn more about the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html)&lt;sup&gt;*&lt;/sup&gt; from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n***\r\n&lt;sup&gt;* For any reason, if you have to stick to Java 6 or Java 7, you can use [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) which backports most of the *java.time* functionality to Java 6 &amp; 7. If you are working for an Android project and your Android API level is still not compliant with Java-8, check [Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table) and [How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project).\r\n&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://ideone.com/DiOKQ5\r\n\r\n\r\n","title":"How to get first day of a given week number in Java","body":"<h1><em>java.time</em></h1>\n<p>The <code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code> are outdated and error-prone. It is recommended to stop using them completely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a><sup>*</sup>.</p>\n<p>Also, quoted below is a notice from the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">home page of <strong>Joda-Time</strong></a>:</p>\n<blockquote>\n<p>Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.</p>\n</blockquote>\n<p><strong>Solution using <code>java.time</code>, the modern Date-Time API:</strong></p>\n<pre><code>import java.time.LocalDate;\nimport java.time.temporal.WeekFields;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Test\n        int weekNumber = 34;\n        int year = 2021;\n        \n        System.out.println(getFirstDayOfWeek(year, weekNumber, Locale.UK));\n        System.out.println(getFirstDayOfWeek(year, weekNumber, Locale.US));\n    }\n\n    static LocalDate getFirstDayOfWeek(int year, int weekNumber, Locale locale) {\n        return LocalDate\n                .of(year, 2, 1)\n                .with(WeekFields.of(locale).getFirstDayOfWeek())\n                .with(WeekFields.of(locale).weekOfWeekBasedYear(), weekNumber);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2021-08-23\n2021-08-15\n</code></pre>\n<p><a href=\"https://ideone.com/DiOKQ5\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Note that the <em><strong>first day of the week</strong></em> is <code>Locale</code>-dependent e.g. it is Monday in the UK while Sunday in the US. As per the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standards, it is Monday. For comparison, check the <a href=\"https://www.timeanddate.com/calendar/?year=2021&amp;country=1&amp;wno=1\" rel=\"nofollow noreferrer\">US calendar</a> and the <a href=\"https://www.timeanddate.com/calendar/?year=2021&amp;country=9&amp;wno=1\" rel=\"nofollow noreferrer\">UK calendar</a>.</p>\n<p>Learn more about the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a><sup>*</sup> from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p><sup>* For any reason, if you have to stick to Java 6 or Java 7, you can use <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> which backports most of the <em>java.time</em> functionality to Java 6 &amp; 7. If you are working for an Android project and your Android API level is still not compliant with Java-8, check <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">Java 8+ APIs available through desugaring</a> and <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a>.\n</sup></p>\n"},{"tags":[],"owner":{"account_id":6812138,"reputation":1,"user_id":5241932,"display_name":"zpgao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695569049,"creation_date":1695569049,"answer_id":77167720,"question_id":2109145,"body_markdown":"I revised the answer code by wrapping it within a method, you can easily incorporate this code in your development:\r\n```\r\n    public class 210945SOPost {\r\n        public static Date getFirstDayOfWeek(int week, int year) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.clear();\r\n            calendar.set(Calendar.WEEK_OF_YEAR, week);\r\n            calendar.set(Calendar.YEAR, year);\r\n            return calendar.getTime();\r\n        }\r\n    }\r\n```","title":"How to get first day of a given week number in Java","body":"<p>I revised the answer code by wrapping it within a method, you can easily incorporate this code in your development:</p>\n<pre><code>    public class 210945SOPost {\n        public static Date getFirstDayOfWeek(int week, int year) {\n            Calendar calendar = Calendar.getInstance();\n            calendar.clear();\n            calendar.set(Calendar.WEEK_OF_YEAR, week);\n            calendar.set(Calendar.YEAR, year);\n            return calendar.getTime();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29517307,"reputation":1,"user_id":22620980,"display_name":"bobo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695810830,"creation_date":1695810830,"answer_id":77186677,"question_id":2109145,"body_markdown":"I have restructured the [answer code provided by @BalusC][1] into a Java method that you can easily incorporate into your development:\r\n\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n\r\n    public class Post2109186 {\r\n        public static Date getFirstDayOfWeek(int week, int year) {\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.clear();\r\n            calendar.set(Calendar.WEEK_OF_YEAR, week);\r\n            calendar.set(Calendar.YEAR, year);\r\n            return calendar.getTime();\r\n        }\r\n    }\r\n\r\n[1]: https://stackoverflow.com/a/2109186\r\n\r\n","title":"How to get first day of a given week number in Java","body":"<p>I have restructured the <a href=\"https://stackoverflow.com/a/2109186\">answer code provided by @BalusC</a> into a Java method that you can easily incorporate into your development:</p>\n<pre><code>import java.util.Calendar;\nimport java.util.Date;\n\npublic class Post2109186 {\n    public static Date getFirstDayOfWeek(int week, int year) {\n        Calendar calendar = Calendar.getInstance();\n        calendar.clear();\n        calendar.set(Calendar.WEEK_OF_YEAR, week);\n        calendar.set(Calendar.YEAR, year);\n        return calendar.getTime();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":92433,"reputation":2863,"user_id":253329,"accept_rate":83,"display_name":"framara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50857,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":2109186,"answer_count":10,"score":21,"last_activity_date":1695810830,"creation_date":1264077241,"question_id":2109145,"body_markdown":"Let me explain myself. By knowing the week number and the year of a date:\r\n\r\n    Date curr = new Date();\r\n    Calendar cal = Calendar.getInstance();\r\n    cal.setTime(curr);\r\n    int nweek = cal.WEEK_OF_YEAR;\r\n    int year = cal.YEAR;\r\n\r\nBut now I don&#39;t know how to get the date of the first day of that week. I&#39;ve been looking in Calendar, Date, DateFormat but nothing that may be useful... \r\n\r\nAny suggestion? (working in Java)\r\n\r\n\r\n\r\n","title":"How to get first day of a given week number in Java","body":"<p>Let me explain myself. By knowing the week number and the year of a date:</p>\n\n<pre><code>Date curr = new Date();\nCalendar cal = Calendar.getInstance();\ncal.setTime(curr);\nint nweek = cal.WEEK_OF_YEAR;\nint year = cal.YEAR;\n</code></pre>\n\n<p>But now I don't know how to get the date of the first day of that week. I've been looking in Calendar, Date, DateFormat but nothing that may be useful... </p>\n\n<p>Any suggestion? (working in Java)</p>\n"},{"tags":["java","clone"],"comments":[{"owner":{"account_id":2554254,"reputation":6916,"user_id":2216621,"accept_rate":61,"display_name":"Rob Watts"},"score":1,"creation_date":1366138701,"post_id":16044887,"comment_id":22893773,"body_markdown":"You can&#39;t override a protected method to be public. In your `Octagon` class define it as `protected Object clone()`","body":"You can&#39;t override a protected method to be public. In your <code>Octagon</code> class define it as <code>protected Object clone()</code>"}],"answers":[{"tags":[],"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"down_vote_count":1,"up_vote_count":21,"is_accepted":true,"score":20,"last_activity_date":1366138682,"creation_date":1366138682,"answer_id":16044940,"question_id":16044887,"body_markdown":"Replace\r\n\r\n    Octagon copy = (Octagon)test.clone();\r\n\r\nwith\r\n\r\n    Octagon copy = (Octagon)((Octagon)test).clone();\r\n\r\nso that the called clone method is the one of your class.","title":"clone() has protected access - made public Object clone()","body":"<p>Replace</p>\n\n<pre><code>Octagon copy = (Octagon)test.clone();\n</code></pre>\n\n<p>with</p>\n\n<pre><code>Octagon copy = (Octagon)((Octagon)test).clone();\n</code></pre>\n\n<p>so that the called clone method is the one of your class.</p>\n"},{"tags":[],"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1366138689,"creation_date":1366138689,"answer_id":16044942,"question_id":16044887,"body_markdown":"You may write a copy-constructor:\r\n\r\n\r\n    public Octagon( Octagon right ){\r\n        this.side = right.side;\r\n    }\r\n\r\nAnd use it from the clone method:\r\n\r\n    public Object clone() throws CloneNotSupportedException {\r\n        return new Octagon( this );\r\n    }\r\n","title":"clone() has protected access - made public Object clone()","body":"<p>You may write a copy-constructor:</p>\n\n<pre><code>public Octagon( Octagon right ){\n    this.side = right.side;\n}\n</code></pre>\n\n<p>And use it from the clone method:</p>\n\n<pre><code>public Object clone() throws CloneNotSupportedException {\n    return new Octagon( this );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3178065,"reputation":1032,"user_id":2685454,"display_name":"Sumit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695810783,"creation_date":1695805389,"answer_id":77186021,"question_id":16044887,"body_markdown":"I also faced the same error and solved it by creating one public function inside class\r\n\r\n    public class Octagon { ....\r\n    \r\n        public Octagon copy() {\r\n            try {\r\n              return (Octagon) clone();\r\n            } catch(Exception e) {\r\n              return new Octagon();\r\n            } \r\n        }\r\n        \r\n        @Override\r\n        protected Object clone() throws CloneNotSupportedException {\r\n            return super.clone();\r\n        }\r\n    \r\n    }\r\n\r\n   ","title":"clone() has protected access - made public Object clone()","body":"<p>I also faced the same error and solved it by creating one public function inside class</p>\n<pre><code>public class Octagon { ....\n\n    public Octagon copy() {\n        try {\n          return (Octagon) clone();\n        } catch(Exception e) {\n          return new Octagon();\n        } \n    }\n    \n    @Override\n    protected Object clone() throws CloneNotSupportedException {\n        return super.clone();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":1949367,"reputation":485,"user_id":1753819,"accept_rate":86,"display_name":"Dirgon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51984,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":16044940,"answer_count":3,"score":27,"last_activity_date":1695810783,"creation_date":1366138519,"question_id":16044887,"body_markdown":"I&#39;m writing code to create an object, clone the object, then compare the two.\r\n\r\nThe object in question, Octagon, is an extension of an object GeometricObject\r\n\r\n    public class Octagon extends GeometricObject implements Comparable&lt;Octagon&gt;, Cloneable {\r\n    private double side;\r\n    \r\n    public Octagon (double side){\r\n        this.side = side;\r\n    }\r\n\r\n    public Object clone() throws CloneNotSupportedException {\r\n        Octagon octClone = (Octagon)super.clone();\r\n        return octClone;\r\n    }\r\n\r\nIn a file named Octagon.java\r\n\r\nIn another, TestOctagon.java, is my main method:\r\n\r\n    public class TestOctagon {\r\n        public static void main(String[] args) {\r\n            GeometricObject test = new Octagon(5); //create an Octagon with a side of 5\r\n            System.out.println(&quot;Area is: &quot;+test.getArea());\r\n            System.out.println(&quot;Perimeter is: &quot;+test.getPerimeter());\r\n            \r\n            Octagon copy = (Octagon)test.clone();\r\n            \r\n        \r\n        }\r\n    }\r\n\r\nThe errors come in on the last line of the main method.\r\n\r\n    clone() has protected access in Object\r\n\r\nI&#39;ve tried renaming the clone method in Octagaon, say to cloneme, but then I get the error:\r\n\r\n    cannot find symbol\r\n    symbol: method cloneme()\r\n    location: variable test of type GeometricObject\r\n\r\n\r\nI get the feeling the problem is because Octagon extends another object, maybe?\r\n\r\nI really can&#39;t find any solution, and I&#39;ve spent a good hour reading all the other clone() posts here.\r\n\r\nEdit: It&#39;s required I use clone. I&#39;m aware the general consensus is clone is borked.","title":"clone() has protected access - made public Object clone()","body":"<p>I'm writing code to create an object, clone the object, then compare the two.</p>\n\n<p>The object in question, Octagon, is an extension of an object GeometricObject</p>\n\n<pre><code>public class Octagon extends GeometricObject implements Comparable&lt;Octagon&gt;, Cloneable {\nprivate double side;\n\npublic Octagon (double side){\n    this.side = side;\n}\n\npublic Object clone() throws CloneNotSupportedException {\n    Octagon octClone = (Octagon)super.clone();\n    return octClone;\n}\n</code></pre>\n\n<p>In a file named Octagon.java</p>\n\n<p>In another, TestOctagon.java, is my main method:</p>\n\n<pre><code>public class TestOctagon {\n    public static void main(String[] args) {\n        GeometricObject test = new Octagon(5); //create an Octagon with a side of 5\n        System.out.println(\"Area is: \"+test.getArea());\n        System.out.println(\"Perimeter is: \"+test.getPerimeter());\n\n        Octagon copy = (Octagon)test.clone();\n\n\n    }\n}\n</code></pre>\n\n<p>The errors come in on the last line of the main method.</p>\n\n<pre><code>clone() has protected access in Object\n</code></pre>\n\n<p>I've tried renaming the clone method in Octagaon, say to cloneme, but then I get the error:</p>\n\n<pre><code>cannot find symbol\nsymbol: method cloneme()\nlocation: variable test of type GeometricObject\n</code></pre>\n\n<p>I get the feeling the problem is because Octagon extends another object, maybe?</p>\n\n<p>I really can't find any solution, and I've spent a good hour reading all the other clone() posts here.</p>\n\n<p>Edit: It's required I use clone. I'm aware the general consensus is clone is borked.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1695760120,"post_id":77183150,"comment_id":136066913,"body_markdown":"You are implementing the same worst practices as the author of [this other recent question](https://stackoverflow.com/q/77176116/619830). Switch to [formLogin](https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html) and sessions or see [my answer](https://stackoverflow.com/a/77176424/619830) for proper OAuth2 implementation.","body":"You are implementing the same worst practices as the author of <a href=\"https://stackoverflow.com/q/77176116/619830\">this other recent question</a>. Switch to <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html\" rel=\"nofollow noreferrer\">formLogin</a> and sessions or see <a href=\"https://stackoverflow.com/a/77176424/619830\">my answer</a> for proper OAuth2 implementation."}],"owner":{"account_id":11597040,"reputation":1,"user_id":8495470,"display_name":"Ayush Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695810430,"creation_date":1695759310,"question_id":77183150,"body_markdown":"I am making an authentication feature for my Spring Boot API using **Spring Security** and **OAuth2ResourceServerConfigurer**. I am storing the user details in a MySQL database. For an authentication request, I want to check if the user exists in the database or not.\r\n\r\nI kept breakpoints at the overridden *loadUserByUsername()* function and I am getting userName parameter as ***NONE_PROVIDED***. The username that I am trying to fetch exists in the database table. I even tried to test the *findByUserName()* repository method by passing the username that I want to authenticate and it returned me the user result but I could not understand that why that particular username is not being passed in the UserDetails method.\r\n\r\nAttaching my code snippets below.\r\n\r\nThis is my User class.\r\n\r\n```\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport java.util.Collection;\r\n\r\n@Entity\r\n@Table(name = &quot;newUser&quot;)\r\npublic class User implements UserDetails {\r\n    @Id\r\n    @GeneratedValue\r\n    private Integer userId;\r\n    private String userName;\r\n    private String password;\r\n\r\n    public User() {\r\n    }\r\n\r\n    public User(String userName, String password) {\r\n        this.userName = userName;\r\n        this.password = password;\r\n    }\r\n\r\n    public User(int userId, String userName, String password) {\r\n        this.userId = userId;\r\n        this.userName = userName;\r\n        this.password = password;\r\n    }\r\n\r\n    public int getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(int userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    public String getUserName() {\r\n        return userName;\r\n    }\r\n\r\n    public void setUserName(String userName) {\r\n        this.userName = userName;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return null;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return userName;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;User{&quot; +\r\n                &quot;userId=&quot; + userId +\r\n                &quot;, userName=&#39;&quot; + userName + &#39;\\&#39;&#39; +\r\n                &quot;, password=&#39;&quot; + password + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\n```\r\n\r\nUser Repository Class\r\n\r\n```\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface UserRepository extends JpaRepository&lt;User, Integer&gt; {\r\n    User findByUserName(String userName);\r\n}\r\n```\r\n\r\nConfiguration Class\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableMethodSecurity\r\npublic class JwtSecurityConfig {\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n        return httpSecurity\r\n                .authorizeHttpRequests(auth -&gt; auth\r\n                \t.requestMatchers(&quot;/authenticate&quot;).permitAll()\r\n                \t.requestMatchers(&quot;/register&quot;).permitAll()\r\n                    .permitAll()\r\n                    .anyRequest()\r\n                    .authenticated())\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .sessionManagement(session -&gt; session.\r\n                \tsessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .oauth2ResourceServer(\r\n                        OAuth2ResourceServerConfigurer::jwt)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService(){\r\n        return new UserDetailsService() {\r\n            @Override\r\n            public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\r\n                return userRepository.findByUserName(userName);\r\n            }\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    @DependsOn(&quot;userDetailsService&quot;)\r\n    public AuthenticationManager authenticationManager(UserDetailsService userDetailsService) {\r\n        var authenticationProvider = new DaoAuthenticationProvider();\r\n        authenticationProvider.setUserDetailsService(userDetailsService);\r\n        return new ProviderManager(authenticationProvider);\r\n    }\r\n\r\n    //Other beans for JWT encoding and decoding\r\n\r\n}\r\n\r\n```\r\n\r\nThe Controller class\r\n\r\n```\r\n@RestController\r\npublic class JwtAuthenticationController {\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    \r\n    private final JwtTokenService tokenService;\r\n    \r\n    private final AuthenticationManager authenticationManager;\r\n\r\n    public JwtAuthenticationController(JwtTokenService tokenService, \r\n            AuthenticationManager authenticationManager) {\r\n        this.tokenService = tokenService;\r\n        this.authenticationManager = authenticationManager;\r\n    }\r\n\r\n    @PostMapping(&quot;/authenticate&quot;)\r\n    public ResponseEntity&lt;JwtTokenResponse&gt; generateToken(\r\n            @RequestBody JwtTokenRequest jwtTokenRequest) {\r\n        \r\n        var authenticationToken = \r\n                new UsernamePasswordAuthenticationToken(\r\n                        jwtTokenRequest.username(), \r\n                        jwtTokenRequest.password());\r\n        \r\n        var authentication = \r\n                authenticationManager.authenticate(authenticationToken);\r\n        \r\n        var token = tokenService.generateToken(authentication);\r\n\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n        \r\n        return ResponseEntity.ok(new JwtTokenResponse(token));\r\n    }\r\n}\r\n```\r\n\r\nThe pom.xml file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;react.api.helloworldv3&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;helloworldv3&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;helloworldv3&lt;/name&gt;\r\n\t&lt;description&gt;Hello World&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.33&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n","title":"Receiving NONE_PROVIDED in username parameter in the loadUserByUsername() function in Spring Boot 3.1.2","body":"<p>I am making an authentication feature for my Spring Boot API using <strong>Spring Security</strong> and <strong>OAuth2ResourceServerConfigurer</strong>. I am storing the user details in a MySQL database. For an authentication request, I want to check if the user exists in the database or not.</p>\n<p>I kept breakpoints at the overridden <em>loadUserByUsername()</em> function and I am getting userName parameter as <em><strong>NONE_PROVIDED</strong></em>. The username that I am trying to fetch exists in the database table. I even tried to test the <em>findByUserName()</em> repository method by passing the username that I want to authenticate and it returned me the user result but I could not understand that why that particular username is not being passed in the UserDetails method.</p>\n<p>Attaching my code snippets below.</p>\n<p>This is my User class.</p>\n<pre><code>import jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.util.Collection;\n\n@Entity\n@Table(name = &quot;newUser&quot;)\npublic class User implements UserDetails {\n    @Id\n    @GeneratedValue\n    private Integer userId;\n    private String userName;\n    private String password;\n\n    public User() {\n    }\n\n    public User(String userName, String password) {\n        this.userName = userName;\n        this.password = password;\n    }\n\n    public User(int userId, String userName, String password) {\n        this.userId = userId;\n        this.userName = userName;\n        this.password = password;\n    }\n\n    public int getUserId() {\n        return userId;\n    }\n\n    public void setUserId(int userId) {\n        this.userId = userId;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return null;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        return userName;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;User{&quot; +\n                &quot;userId=&quot; + userId +\n                &quot;, userName='&quot; + userName + '\\'' +\n                &quot;, password='&quot; + password + '\\'' +\n                '}';\n    }\n}\n\n</code></pre>\n<p>User Repository Class</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface UserRepository extends JpaRepository&lt;User, Integer&gt; {\n    User findByUserName(String userName);\n}\n</code></pre>\n<p>Configuration Class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\npublic class JwtSecurityConfig {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n        return httpSecurity\n                .authorizeHttpRequests(auth -&gt; auth\n                    .requestMatchers(&quot;/authenticate&quot;).permitAll()\n                    .requestMatchers(&quot;/register&quot;).permitAll()\n                    .permitAll()\n                    .anyRequest()\n                    .authenticated())\n                .csrf(AbstractHttpConfigurer::disable)\n                .sessionManagement(session -&gt; session.\n                    sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .oauth2ResourceServer(\n                        OAuth2ResourceServerConfigurer::jwt)\n                .build();\n    }\n\n    @Bean\n    public UserDetailsService userDetailsService(){\n        return new UserDetailsService() {\n            @Override\n            public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException {\n                return userRepository.findByUserName(userName);\n            }\n        };\n    }\n\n    @Bean\n    @DependsOn(&quot;userDetailsService&quot;)\n    public AuthenticationManager authenticationManager(UserDetailsService userDetailsService) {\n        var authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService);\n        return new ProviderManager(authenticationProvider);\n    }\n\n    //Other beans for JWT encoding and decoding\n\n}\n\n</code></pre>\n<p>The Controller class</p>\n<pre><code>@RestController\npublic class JwtAuthenticationController {\n\n    @Autowired\n    private UserRepository userRepository;\n    \n    private final JwtTokenService tokenService;\n    \n    private final AuthenticationManager authenticationManager;\n\n    public JwtAuthenticationController(JwtTokenService tokenService, \n            AuthenticationManager authenticationManager) {\n        this.tokenService = tokenService;\n        this.authenticationManager = authenticationManager;\n    }\n\n    @PostMapping(&quot;/authenticate&quot;)\n    public ResponseEntity&lt;JwtTokenResponse&gt; generateToken(\n            @RequestBody JwtTokenRequest jwtTokenRequest) {\n        \n        var authenticationToken = \n                new UsernamePasswordAuthenticationToken(\n                        jwtTokenRequest.username(), \n                        jwtTokenRequest.password());\n        \n        var authentication = \n                authenticationManager.authenticate(authenticationToken);\n        \n        var token = tokenService.generateToken(authentication);\n\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n        \n        return ResponseEntity.ok(new JwtTokenResponse(token));\n    }\n}\n</code></pre>\n<p>The pom.xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;react.api.helloworldv3&lt;/groupId&gt;\n    &lt;artifactId&gt;helloworldv3&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;helloworldv3&lt;/name&gt;\n    &lt;description&gt;Hello World&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.33&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","sqlite","hibernate","kotlin","jpa"],"answers":[{"tags":[],"owner":{"account_id":106045,"reputation":12258,"user_id":282677,"accept_rate":88,"display_name":"jlengrand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1644450069,"creation_date":1644450069,"answer_id":71058174,"question_id":70933212,"body_markdown":"Gonna answer my own question given that it&#39;s not getting much traction :).\r\n\r\nSQLite indeed does not support ALTER with constraints, and Hibernate does not (to my knowledge) offer a clean way to use custom SQL. \r\nOn top of this, [it is not recommended to use Hibernate: hbm2ddl.auto=update in production](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production).\r\n\r\nFor those reasons, I decided to turn myself to [Flyway](https://flywaydb.org/) and write my own SQL. The good news is that adding Flyway provides my database migrations. The bad news is that it&#39;s one more dependency to maintain.\r\n\r\nWhat I&#39;ve done: \r\n\r\nAdded the flyway dependency in my build.gradle.kts\r\n\r\n```\r\n    implementation(&quot;org.flywaydb:flyway-core:8.4.3&quot;)\r\n```\r\n\r\nInstantiated flyway before hibernate in my code, pointing to the same database: \r\n\r\n```\r\n    val flyway = Flyway\r\n        .configure()\r\n        .dataSource(&quot;jdbc:sqlite:test.db&quot;, null, null).load()\r\n    flyway.migrate()\r\n```\r\n\r\nAdded a handwritten SQL migration file in `resources/V1__Create_person_and_entries_table.sql`\r\n\r\n```SQL\r\ncreate table Person\r\n(\r\n    id   integer primary key,\r\n    name varchar(255) not null UNIQUE\r\n);\r\n```\r\n\r\nEt voil&#224;!\r\n\r\nI wrote a blog post over [here](https://lengrand.fr/tips-and-tricks-using-hibernate-and-sqlite-with-kotlin/) with more details and some more reasons to use something like Flyway.","title":"Hibernate and SQLite : Set unique constraint on creation","body":"<p>Gonna answer my own question given that it's not getting much traction :).</p>\n<p>SQLite indeed does not support ALTER with constraints, and Hibernate does not (to my knowledge) offer a clean way to use custom SQL.\nOn top of this, <a href=\"https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production\">it is not recommended to use Hibernate: hbm2ddl.auto=update in production</a>.</p>\n<p>For those reasons, I decided to turn myself to <a href=\"https://flywaydb.org/\" rel=\"nofollow noreferrer\">Flyway</a> and write my own SQL. The good news is that adding Flyway provides my database migrations. The bad news is that it's one more dependency to maintain.</p>\n<p>What I've done:</p>\n<p>Added the flyway dependency in my build.gradle.kts</p>\n<pre><code>    implementation(&quot;org.flywaydb:flyway-core:8.4.3&quot;)\n</code></pre>\n<p>Instantiated flyway before hibernate in my code, pointing to the same database:</p>\n<pre><code>    val flyway = Flyway\n        .configure()\n        .dataSource(&quot;jdbc:sqlite:test.db&quot;, null, null).load()\n    flyway.migrate()\n</code></pre>\n<p>Added a handwritten SQL migration file in <code>resources/V1__Create_person_and_entries_table.sql</code></p>\n<pre><code>create table Person\n(\n    id   integer primary key,\n    name varchar(255) not null UNIQUE\n);\n</code></pre>\n<p>Et voilà!</p>\n<p>I wrote a blog post over <a href=\"https://lengrand.fr/tips-and-tricks-using-hibernate-and-sqlite-with-kotlin/\" rel=\"nofollow noreferrer\">here</a> with more details and some more reasons to use something like Flyway.</p>\n"},{"tags":[],"owner":{"account_id":908335,"reputation":5155,"user_id":942774,"accept_rate":100,"display_name":"Hendrik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695810382,"creation_date":1695810382,"answer_id":77186623,"question_id":70933212,"body_markdown":"The Hibernate SQLiteDialect [bug](https://hibernate.atlassian.net/browse/HHH-17245) you point to will be fixed in version 6.3.2. Hibernate will then stop emitting things like\r\n\r\n```sql\r\nALTER TABLE some_table ADD CONSTRAINT constraint_name UNIQUE (some_column);\r\n```\r\n\r\nfor SQLite.\r\n\r\nThe `unique` constraint should still be part of the table creation statement, though.","title":"Hibernate and SQLite : Set unique constraint on creation","body":"<p>The Hibernate SQLiteDialect <a href=\"https://hibernate.atlassian.net/browse/HHH-17245\" rel=\"nofollow noreferrer\">bug</a> you point to will be fixed in version 6.3.2. Hibernate will then stop emitting things like</p>\n<pre class=\"lang-sql prettyprint-override\"><code>ALTER TABLE some_table ADD CONSTRAINT constraint_name UNIQUE (some_column);\n</code></pre>\n<p>for SQLite.</p>\n<p>The <code>unique</code> constraint should still be part of the table creation statement, though.</p>\n"}],"owner":{"account_id":106045,"reputation":12258,"user_id":282677,"accept_rate":88,"display_name":"jlengrand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":681,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71058174,"answer_count":2,"score":2,"last_activity_date":1695810382,"creation_date":1643665750,"question_id":70933212,"body_markdown":"I&#39;m using Hibernate to create SQLite tables.\r\n\r\nI have a table as such \r\n\r\n```kotlin\r\n@Entity \r\nclass Person(\r\n\r\n    @Column(unique = true, nullable = false)\r\n    val name: String,\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    val id: Int? = null,\r\n)\r\n```\r\n\r\nI see that when the database is created, the `unique` constraint is added later on via an ALTER request\r\n\r\n```\r\nHibernate: create table Person (id  integer, name varchar(255) not null, primary key (id))\r\nHibernate: alter table Person add constraint UK_is4vd0f6kw9sw4dxyie5cy9fa unique (name)\r\n```\r\n\r\nExcept that SQLite [does not seem to support ALTER requests modifying constraints on tables](https://www.sqlite.org/omitted.html).\r\n\r\nSo my question is : Is there a way to literally indicate Hibernate to set that uniqueness constraint on table creation? What would be the best way to do it?\r\n\r\nI can ensure uniqueness easily later on via code, but I&#39;d rather use the power of the database if I can.\r\n\r\nI should add that this is for a personal small application so so far I&#39;m using the `update` setting for `hibernate.hbm2ddl.auto` so Hibernate generates the SQL itself. I&#39;m open to other methods but I&#39;d rather avoid them if I can to reduce maintenance.\r\n","title":"Hibernate and SQLite : Set unique constraint on creation","body":"<p>I'm using Hibernate to create SQLite tables.</p>\n<p>I have a table as such</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Entity \nclass Person(\n\n    @Column(unique = true, nullable = false)\n    val name: String,\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    val id: Int? = null,\n)\n</code></pre>\n<p>I see that when the database is created, the <code>unique</code> constraint is added later on via an ALTER request</p>\n<pre><code>Hibernate: create table Person (id  integer, name varchar(255) not null, primary key (id))\nHibernate: alter table Person add constraint UK_is4vd0f6kw9sw4dxyie5cy9fa unique (name)\n</code></pre>\n<p>Except that SQLite <a href=\"https://www.sqlite.org/omitted.html\" rel=\"nofollow noreferrer\">does not seem to support ALTER requests modifying constraints on tables</a>.</p>\n<p>So my question is : Is there a way to literally indicate Hibernate to set that uniqueness constraint on table creation? What would be the best way to do it?</p>\n<p>I can ensure uniqueness easily later on via code, but I'd rather use the power of the database if I can.</p>\n<p>I should add that this is for a personal small application so so far I'm using the <code>update</code> setting for <code>hibernate.hbm2ddl.auto</code> so Hibernate generates the SQL itself. I'm open to other methods but I'd rather avoid them if I can to reduce maintenance.</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":3175510,"reputation":2055,"user_id":2683501,"accept_rate":82,"display_name":"pL4Gu33"},"score":0,"creation_date":1574452832,"post_id":59000565,"comment_id":104252291,"body_markdown":"i tried it and the health endpoint is used. Could you make a system.out. there and try it again... if there is something in the console.","body":"i tried it and the health endpoint is used. Could you make a system.out. there and try it again... if there is something in the console."},{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":1,"creation_date":1574452882,"post_id":59000565,"comment_id":104252303,"body_markdown":"Verify the component is actually configured as a spring bean. Just annotating as @Component does not guarantee it becomes a bean if there&#39;s no component scan for it.","body":"Verify the component is actually configured as a spring bean. Just annotating as @Component does not guarantee it becomes a bean if there&#39;s no component scan for it."},{"owner":{"account_id":243216,"reputation":1162,"user_id":515241,"display_name":"Tomek Cejner"},"score":0,"creation_date":1574809723,"post_id":59000565,"comment_id":104360718,"body_markdown":"@Compass, I&#39;ve updated the question. The main class is annotated with `@SpringBootApplication`, which enables component scan.","body":"@Compass, I&#39;ve updated the question. The main class is annotated with <code>@SpringBootApplication</code>, which enables component scan."},{"owner":{"account_id":1119443,"reputation":6044,"user_id":1108098,"accept_rate":73,"display_name":"jordiburgos"},"score":0,"creation_date":1574860951,"post_id":59000565,"comment_id":104380254,"body_markdown":"Your HealthIndicator class doesn&#39;t add any extra information.","body":"Your HealthIndicator class doesn&#39;t add any extra information."},{"owner":{"account_id":2133396,"reputation":57,"user_id":1893680,"display_name":"Java Crazy"},"score":0,"creation_date":1662996114,"post_id":59000565,"comment_id":130129693,"body_markdown":"add a name to your component like @Component(&quot;healtCheck&quot;).","body":"add a name to your component like @Component(&quot;healtCheck&quot;)."}],"answers":[{"tags":[],"owner":{"account_id":243216,"reputation":1162,"user_id":515241,"display_name":"Tomek Cejner"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1574880794,"creation_date":1574880794,"answer_id":59076813,"question_id":59000565,"body_markdown":"I found the solution, but am not sure about the cause. The class was indeed not registered as bean, and surprisingly, adding explicitly base packages attribute helped:\r\n\r\n```java\r\n@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\r\n```\r\n\r\nInteresting that there was no need to do the above in a different project.","title":"Spring Boot custom health indicator not showing up","body":"<p>I found the solution, but am not sure about the cause. The class was indeed not registered as bean, and surprisingly, adding explicitly base packages attribute helped:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication(scanBasePackages=\"com.example.*\")\n</code></pre>\n\n<p>Interesting that there was no need to do the above in a different project.</p>\n"},{"tags":[],"owner":{"account_id":19449009,"reputation":1,"user_id":14225879,"display_name":"Gaurav Swain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600196411,"creation_date":1600195275,"answer_id":63908019,"question_id":59000565,"body_markdown":"Interestingly the base package for the HealthIndicator is not recognized by the application container instead of declaring the class as @component Stereotype.\r\n\r\nFix for the issue- declare base package of HealthIndicator in Main Spring boot application class:\r\n@SpringBootApplication (scanBasePackages = &quot;basepackage for your class HealthCheck&quot;)\r\npublic class PaymentServiceApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(PaymentServiceApplication.class, args);\r\n    }\r\n\r\n}\r\n\r\nEDIT : NOTE- The above declaration of base package=&quot;&quot; is not main spring boot class is not necessary.\r\n\r\nYou must stop the SERVER and then clean build the maven application and RESTART the server and re-run the application \r\n\r\nYou can now run find your custom health endpoint.","title":"Spring Boot custom health indicator not showing up","body":"<p>Interestingly the base package for the HealthIndicator is not recognized by the application container instead of declaring the class as @component Stereotype.</p>\n<p>Fix for the issue- declare base package of HealthIndicator in Main Spring boot application class:\n@SpringBootApplication (scanBasePackages = &quot;basepackage for your class HealthCheck&quot;)\npublic class PaymentServiceApplication {</p>\n<pre><code>public static void main(String[] args) {\n    SpringApplication.run(PaymentServiceApplication.class, args);\n}\n</code></pre>\n<p>}</p>\n<p>EDIT : NOTE- The above declaration of base package=&quot;&quot; is not main spring boot class is not necessary.</p>\n<p>You must stop the SERVER and then clean build the maven application and RESTART the server and re-run the application</p>\n<p>You can now run find your custom health endpoint.</p>\n"},{"tags":[],"owner":{"account_id":446893,"reputation":121,"user_id":840222,"display_name":"lich0079"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646018971,"creation_date":1646018971,"answer_id":71290320,"question_id":59000565,"body_markdown":"I encounter issue too, what I miss is \r\n\r\n    management:\r\n      endpoint:\r\n        health:\r\n          show-details: always","title":"Spring Boot custom health indicator not showing up","body":"<p>I encounter issue too, what I miss is</p>\n<pre><code>management:\n  endpoint:\n    health:\n      show-details: always\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6652893,"reputation":21,"user_id":5134334,"display_name":"Łukasz Bocheński"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676472604,"creation_date":1676472604,"answer_id":75461537,"question_id":59000565,"body_markdown":"This is solved by adding this code:\r\n\r\n    management:\r\n      endpoint:\r\n        health:\r\n          show-details: always\r\nHowever, it creates another problem. When calling /actuator/health endpoint, you see all the details which is problematic for me. What I want to achieve is to see only statuses for both endpoints.","title":"Spring Boot custom health indicator not showing up","body":"<p>This is solved by adding this code:</p>\n<pre><code>management:\n  endpoint:\n    health:\n      show-details: always\n</code></pre>\n<p>However, it creates another problem. When calling /actuator/health endpoint, you see all the details which is problematic for me. What I want to achieve is to see only statuses for both endpoints.</p>\n"},{"tags":[],"owner":{"account_id":1610121,"reputation":31,"user_id":1489404,"display_name":"Joseph.Chambers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692131104,"creation_date":1692131104,"answer_id":76908929,"question_id":59000565,"body_markdown":"Instead of using\r\n```\r\n@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\r\n```\r\nYou can instead define your packages to scan\r\n```\r\n@ComponentScan(basePackages = {&quot;com.example&quot;, &quot;com.other&quot;}\r\n```\r\n\r\nI will note I tested using scanBasepackages as described in the top answer and that doesn&#39;t seem to work if you also have the @ComponentScan defined.","title":"Spring Boot custom health indicator not showing up","body":"<p>Instead of using</p>\n<pre><code>@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\n</code></pre>\n<p>You can instead define your packages to scan</p>\n<pre><code>@ComponentScan(basePackages = {&quot;com.example&quot;, &quot;com.other&quot;}\n</code></pre>\n<p>I will note I tested using scanBasepackages as described in the top answer and that doesn't seem to work if you also have the @ComponentScan defined.</p>\n"},{"tags":[],"owner":{"account_id":16582017,"reputation":11,"user_id":11982368,"display_name":"Igor Dobrovolskyi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695809985,"creation_date":1695809985,"answer_id":77186571,"question_id":59000565,"body_markdown":"If you have packages structure like:\r\n```\r\ncom.example.health.MyHealthIndicator\r\ncom.example.myapp.MyApp (SpringApplication.run() is here)\r\n```\r\nthen MyHealthIndicator will not be treated as component. In this case in MyApp you should add scanBasePackages\r\n```\r\n@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\r\npublic class MyApp { ... }\r\n\r\n```\r\n\r\nBUT if you put your component inside package where application is, then scanBasePackages is not needed:\r\n```\r\ncom.example.myapp.health.MyHealthIndicator\r\ncom.example.myapp.MyApp\r\n```\r\nSpring will automatically find all components inside com.example.myapp.* packages. And it will not search outside of this package, unless you ask him to do so via scanBasePackages parameter.","title":"Spring Boot custom health indicator not showing up","body":"<p>If you have packages structure like:</p>\n<pre><code>com.example.health.MyHealthIndicator\ncom.example.myapp.MyApp (SpringApplication.run() is here)\n</code></pre>\n<p>then MyHealthIndicator will not be treated as component. In this case in MyApp you should add scanBasePackages</p>\n<pre><code>@SpringBootApplication(scanBasePackages=&quot;com.example.*&quot;)\npublic class MyApp { ... }\n\n</code></pre>\n<p>BUT if you put your component inside package where application is, then scanBasePackages is not needed:</p>\n<pre><code>com.example.myapp.health.MyHealthIndicator\ncom.example.myapp.MyApp\n</code></pre>\n<p>Spring will automatically find all components inside com.example.myapp.* packages. And it will not search outside of this package, unless you ask him to do so via scanBasePackages parameter.</p>\n"}],"owner":{"account_id":243216,"reputation":1162,"user_id":515241,"display_name":"Tomek Cejner"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5705,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":6,"score":7,"last_activity_date":1695809985,"creation_date":1574450704,"question_id":59000565,"body_markdown":"I believe followed almost all tutorials on the Internet and read many SO answers and still I&#39;m stuck.\r\n\r\n### 1. A simple health check\r\n```java\r\n@Component\r\npublic class HealthCheck implements HealthIndicator {\r\n\r\n    @Override\r\n    public Health health() {\r\n        return Health.up().build();\r\n    }\r\n\r\n}\r\n```\r\n\r\n### 2. Application.yaml is configured to show all details:\r\n```yml\r\nmanagement.endpoints.web.exposure.include: &quot;*&quot;\r\nmanagement.endpoint.health.show-details: ALWAYS\r\n```\r\n\r\n### 3. Spring-boot-actuator included as dependency:\r\n```groovy\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n```\r\n\r\n### 4. Spring boot of recent release:\r\n```\r\nid &#39;org.springframework.boot&#39; version &#39;2.2.0.RELEASE&#39;\r\n```\r\n\r\n### 5. Main application class is annotated with `@SpringBootApplication` (which implicitly brings `@ComponentScan`).\r\n```java\r\n@SpringBootApplication\r\npublic class PaymentServiceApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(PaymentServiceApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nMy custom health check has to test for Apache Kafka, but I skipped the details for brevity. \r\nStill, invoking `/actuator/health` endpoint I get the same default result:\r\n\r\n```json\r\n{\r\n    &quot;status&quot;: &quot;UP&quot;,\r\n    &quot;components&quot;: {\r\n        &quot;diskSpace&quot;: {\r\n            &quot;status&quot;: &quot;UP&quot;,\r\n            &quot;details&quot;: {\r\n                &quot;total&quot;: 250685575168,\r\n                &quot;free&quot;: 99168997376,\r\n                &quot;threshold&quot;: 10485760\r\n            }\r\n        },\r\n        &quot;ping&quot;: {\r\n            &quot;status&quot;: &quot;UP&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIs there anything I may have missed?\r\n","title":"Spring Boot custom health indicator not showing up","body":"<p>I believe followed almost all tutorials on the Internet and read many SO answers and still I'm stuck.</p>\n\n<h3>1. A simple health check</h3>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class HealthCheck implements HealthIndicator {\n\n    @Override\n    public Health health() {\n        return Health.up().build();\n    }\n\n}\n</code></pre>\n\n<h3>2. Application.yaml is configured to show all details:</h3>\n\n<pre><code>management.endpoints.web.exposure.include: \"*\"\nmanagement.endpoint.health.show-details: ALWAYS\n</code></pre>\n\n<h3>3. Spring-boot-actuator included as dependency:</h3>\n\n<pre><code>    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n</code></pre>\n\n<h3>4. Spring boot of recent release:</h3>\n\n<pre><code>id 'org.springframework.boot' version '2.2.0.RELEASE'\n</code></pre>\n\n<h3>5. Main application class is annotated with <code>@SpringBootApplication</code> (which implicitly brings <code>@ComponentScan</code>).</h3>\n\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class PaymentServiceApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(PaymentServiceApplication.class, args);\n    }\n\n}\n</code></pre>\n\n<p>My custom health check has to test for Apache Kafka, but I skipped the details for brevity. \nStill, invoking <code>/actuator/health</code> endpoint I get the same default result:</p>\n\n<pre><code>{\n    \"status\": \"UP\",\n    \"components\": {\n        \"diskSpace\": {\n            \"status\": \"UP\",\n            \"details\": {\n                \"total\": 250685575168,\n                \"free\": 99168997376,\n                \"threshold\": 10485760\n            }\n        },\n        \"ping\": {\n            \"status\": \"UP\"\n        }\n    }\n}\n</code></pre>\n\n<p>Is there anything I may have missed?</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695804119,"creation_date":1695802444,"answer_id":77185674,"question_id":77185598,"body_markdown":"As soon as in your `IndexHeaderSnapshot` you have id column annotated with `@GeneratedValue(strategy = GenerationType.IDENTITY)` it looks like you are adding detached instances of `IndexHeaderSnapshot` into `OrderHeaderSnapshot.indexHeaderSnapshot`. The entities must be attached to Hibernate session, i.e. call `IndexHeaderRepository.save(listOfIndexHeaderSnapshots)` before adding them into `OrderHeaderSnapshot.indexHeaderSnapshot`. Hibernate will request ids for them from the database and attach them to current session.\r\n\r\nAlso make sure that your table in PostgreSQL described as\r\n```sql\r\nCREATE TABLE index_header_snapshot (\r\n    id INT GENERATED ALWAYS AS IDENTITY,\r\n    ...\r\n);\r\n```\r\nSee https://stackoverflow.com/a/66421047/12473843","title":"Null in foreign key hibernate @OneToMany while saving","body":"<p>As soon as in your <code>IndexHeaderSnapshot</code> you have id column annotated with <code>@GeneratedValue(strategy = GenerationType.IDENTITY)</code> it looks like you are adding detached instances of <code>IndexHeaderSnapshot</code> into <code>OrderHeaderSnapshot.indexHeaderSnapshot</code>. The entities must be attached to Hibernate session, i.e. call <code>IndexHeaderRepository.save(listOfIndexHeaderSnapshots)</code> before adding them into <code>OrderHeaderSnapshot.indexHeaderSnapshot</code>. Hibernate will request ids for them from the database and attach them to current session.</p>\n<p>Also make sure that your table in PostgreSQL described as</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE index_header_snapshot (\n    id INT GENERATED ALWAYS AS IDENTITY,\n    ...\n);\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/a/66421047/12473843\">https://stackoverflow.com/a/66421047/12473843</a></p>\n"},{"tags":[],"owner":{"account_id":9942498,"reputation":33,"user_id":7358578,"display_name":"Soft"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695809599,"creation_date":1695809599,"answer_id":77186532,"question_id":77185598,"body_markdown":"Ok, i have answer\r\n\r\nI&#39;ve replaced \r\n```\r\n@JoinColumn(name = &quot;order_header_snapshot_id&quot;)\r\n```\r\nwith \r\n```\r\n@JoinColumn(name = &quot;order_header_snapshot_id&quot;, nullable = false)\r\n```\r\n\r\nand it works :)","title":"Null in foreign key hibernate @OneToMany while saving","body":"<p>Ok, i have answer</p>\n<p>I've replaced</p>\n<pre><code>@JoinColumn(name = &quot;order_header_snapshot_id&quot;)\n</code></pre>\n<p>with</p>\n<pre><code>@JoinColumn(name = &quot;order_header_snapshot_id&quot;, nullable = false)\n</code></pre>\n<p>and it works :)</p>\n"}],"owner":{"account_id":9942498,"reputation":33,"user_id":7358578,"display_name":"Soft"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695809599,"creation_date":1695801598,"question_id":77185598,"body_markdown":"I have two tables in database like `order_header_snapshot` and `index_header_snapshot`. `OrderHeaderSnapshot` can have a list of `IndexHeader`. `IndexHeader` has column `order_header_snapshot_id` as a foreign key. I don&#39;t describe others fields because it is not important.\r\n\r\n```java\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\nclass OrderHeaderSnapshot {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\r\n\t@JoinColumn(name = &quot;order_header_snapshot_id&quot;)\r\n\tprivate List&lt;IndexHeaderSnapshot&gt; indexHeaderSnapshot = new ArrayList&lt;&gt;();\r\n```\r\n\r\n```java\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\nclass IndexHeaderSnapshot {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n}\r\n```\r\n\r\nAt the end while saving in repository I catch an exception \r\n```\r\nCaused by: org.postgresql.util.PSQLException: ERROR: null value in column &quot;order_header_snapshot_id&quot; of relation &quot;index_header_snapshot&quot; violates not-null constraint\r\n```\r\nI don&#39;t have an idea what I do wrong. Please help :)","title":"Null in foreign key hibernate @OneToMany while saving","body":"<p>I have two tables in database like <code>order_header_snapshot</code> and <code>index_header_snapshot</code>. <code>OrderHeaderSnapshot</code> can have a list of <code>IndexHeader</code>. <code>IndexHeader</code> has column <code>order_header_snapshot_id</code> as a foreign key. I don't describe others fields because it is not important.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\nclass OrderHeaderSnapshot {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\n    @JoinColumn(name = &quot;order_header_snapshot_id&quot;)\n    private List&lt;IndexHeaderSnapshot&gt; indexHeaderSnapshot = new ArrayList&lt;&gt;();\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\nclass IndexHeaderSnapshot {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n}\n</code></pre>\n<p>At the end while saving in repository I catch an exception</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: ERROR: null value in column &quot;order_header_snapshot_id&quot; of relation &quot;index_header_snapshot&quot; violates not-null constraint\n</code></pre>\n<p>I don't have an idea what I do wrong. Please help :)</p>\n"},{"tags":["java","swagger","swagger-ui"],"owner":{"account_id":20211488,"reputation":9,"user_id":14823942,"display_name":"Ever Last"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695809422,"creation_date":1695809422,"question_id":77186512,"body_markdown":"When sending a request to localhost/swagger-ui/index.html I get all the documentation of my application. Is it possible to make sure that only certain APIs are visible to certain users or users with certain roles? \r\nIn my application, I use SecurityContextHolder for access control, from which I can get data about the user: his role, privileges, etc.\r\n\r\nI tried using the @PreAuthorize annotation on the counter-controllers, but I still see the API in the documentation.\r\n\r\nMy swagger configuration:\r\n\r\n    @PropertySource(value = &quot;classpath:OpenAPIConfig.yaml&quot;, factory = YamlPropertySourceFactory.class)\r\n    @Configuration\r\n    public class OpenAPIConfig {\r\n\r\n       @Bean\r\n       @Primary\r\n       public SpringDocConfiguration springDocConfiguration() {\r\n           return new SpringDocConfiguration();\r\n       }\r\n\r\n       @Bean\r\n       public SpringDocConfigProperties springDocConfigProperties() {\r\n           return new SpringDocConfigProperties();\r\n       }\r\n\r\n       @Bean\r\n       public ObjectMapperProvider objectMapperProvider(SpringDocConfigProperties    springDocConfigProperties) {\r\n           return new ObjectMapperProvider(springDocConfigProperties);\r\n       }\r\n\r\n       @Bean\r\n       public SpringDocUIConfiguration springDocUIConfiguration(Optional&lt;SwaggerUiConfigProperties&gt; optionalSwaggerUiConfigProperties) {\r\n           return new SpringDocUIConfiguration(optionalSwaggerUiConfigProperties);\r\n       }\r\n    }\r\n\r\n\r\nOpenAPIConfig.yaml:\r\n\r\n    springdoc:\r\n     api-docs:\r\n      enabled: false\r\n     swagger-ui:\r\n      urls:\r\n      - url: &quot;/ApiDocumentation1.yaml&quot;\r\n        name: &quot;Doc1&quot;\r\n      - url: &quot;/ApiDocumentation2.yaml&quot;\r\n        name: &quot;Doc2&quot;","title":"How to differentiate viewing access to certain apis in swagger ui view java?","body":"<p>When sending a request to localhost/swagger-ui/index.html I get all the documentation of my application. Is it possible to make sure that only certain APIs are visible to certain users or users with certain roles?\nIn my application, I use SecurityContextHolder for access control, from which I can get data about the user: his role, privileges, etc.</p>\n<p>I tried using the @PreAuthorize annotation on the counter-controllers, but I still see the API in the documentation.</p>\n<p>My swagger configuration:</p>\n<pre><code>@PropertySource(value = &quot;classpath:OpenAPIConfig.yaml&quot;, factory = YamlPropertySourceFactory.class)\n@Configuration\npublic class OpenAPIConfig {\n\n   @Bean\n   @Primary\n   public SpringDocConfiguration springDocConfiguration() {\n       return new SpringDocConfiguration();\n   }\n\n   @Bean\n   public SpringDocConfigProperties springDocConfigProperties() {\n       return new SpringDocConfigProperties();\n   }\n\n   @Bean\n   public ObjectMapperProvider objectMapperProvider(SpringDocConfigProperties    springDocConfigProperties) {\n       return new ObjectMapperProvider(springDocConfigProperties);\n   }\n\n   @Bean\n   public SpringDocUIConfiguration springDocUIConfiguration(Optional&lt;SwaggerUiConfigProperties&gt; optionalSwaggerUiConfigProperties) {\n       return new SpringDocUIConfiguration(optionalSwaggerUiConfigProperties);\n   }\n}\n</code></pre>\n<p>OpenAPIConfig.yaml:</p>\n<pre><code>springdoc:\n api-docs:\n  enabled: false\n swagger-ui:\n  urls:\n  - url: &quot;/ApiDocumentation1.yaml&quot;\n    name: &quot;Doc1&quot;\n  - url: &quot;/ApiDocumentation2.yaml&quot;\n    name: &quot;Doc2&quot;\n</code></pre>\n"},{"tags":["java","redis","reactive-programming","vert.x"],"answers":[{"tags":[],"owner":{"account_id":385127,"reputation":6284,"user_id":742081,"display_name":"Ladicek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695809170,"creation_date":1695809170,"answer_id":77186482,"question_id":77180316,"body_markdown":"Using `onSuccess()` and `onFailure()` is a very tedious approach of working with futures. I suggest you familiarize yourself with the combinator methods, most notably `map()` and `flatMap()`. These are what I would call _operators of sequential composition_ -- that is, they allow expressing &quot;first do A, then do B&quot;. `map()` is synchronous, while `flatMap()` is asynchronous. (Also note that `compose()` is the same as `flatMap()`, so it&#39;s a matter of style. I prefer using `flatMap()`, so that&#39;s what you see below.) There are other operators for error handling etc., but these 2 are the most important in my opinion.\r\n\r\nThat said, here&#39;s my implementation:\r\n\r\n```java\r\nprivate Future&lt;Boolean&gt; compareAndDelete(Redis client, String key, String value) {\r\n    return client.connect().flatMap(connection -&gt; {\r\n        RedisAPI redis = RedisAPI.api(connection);\r\n        return redis.watch(List.of(key))\r\n                .flatMap(ignored -&gt; redis.get(key))\r\n                .flatMap(response -&gt; {\r\n                    if (response == null) {\r\n                        // key does not exist\r\n                        return Future.succeededFuture(false);\r\n                    }\r\n                    if (value.equals(response.toString())) {\r\n                        return redis.multi()\r\n                                .flatMap(ignored -&gt; redis.del(List.of(key)))\r\n                                .flatMap(ignored -&gt; redis.exec())\r\n                                // null reply means transaction aborted\r\n                                .map(execResult -&gt; execResult != null);\r\n                    } else {\r\n                        return Future.succeededFuture(false);\r\n                    }\r\n                })\r\n                .eventually(connection::close);\r\n    });\r\n}\r\n```\r\n\r\nYou&#39;ll note that I don&#39;t do any error handling here. Instead, I structure the code so that whenever an error happens (that is, a `Future` completes with an error), it gets propagated through the chain. The method returns a future which completes with `true` when the &quot;compare and delete&quot; operation succeeded or with `false` when the operation failed (the key does not exist, or someone changed the value in the middle of the transaction). The future may complete with a failure in case of some error.\r\n\r\nFor testing, I also wrote this simple function:\r\n\r\n```java\r\nprivate Future&lt;Void&gt; delay(long timeout) {\r\n    Promise&lt;Void&gt; promise = ((ContextInternal) vertx.getOrCreateContext()).promise();\r\n    vertx.setTimer(timeout, ignored -&gt; {\r\n        promise.complete();\r\n    });\r\n    return promise.future();\r\n}\r\n```\r\n\r\nWith this, I can insert an arbitrary delay into the chain to be able to easily trigger the situation when someone else changes the value in the middle of the transaction. For example, I can insert this line\r\n\r\n```java\r\n                                .flatMap(ignored -&gt; delay(10_000))\r\n```\r\n\r\nin between the calls to `redis.del()` and `redis.exec()`.\r\n\r\nIn addition to using future combinators instead of success/failure callbacks, there&#39;s one other important difference. The first thing my implementation does is obtaining a _connection_ from the Redis client. The Vert.x Redis client manages a connection pool and if you use the `Redis` object for sending commands, each command may be executed on a different connection. On the other hand, when using a `RedisConnection` object, a single connection will be used to send all the commands, which is necessary for Redis transactions to work correctly. The last thing my method does, as you see, is &quot;closing&quot; the connection (which in fact means just returning the connection to the pool).","title":"Unclear about how to structure a vertx-redis-client code","body":"<p>Using <code>onSuccess()</code> and <code>onFailure()</code> is a very tedious approach of working with futures. I suggest you familiarize yourself with the combinator methods, most notably <code>map()</code> and <code>flatMap()</code>. These are what I would call <em>operators of sequential composition</em> -- that is, they allow expressing &quot;first do A, then do B&quot;. <code>map()</code> is synchronous, while <code>flatMap()</code> is asynchronous. (Also note that <code>compose()</code> is the same as <code>flatMap()</code>, so it's a matter of style. I prefer using <code>flatMap()</code>, so that's what you see below.) There are other operators for error handling etc., but these 2 are the most important in my opinion.</p>\n<p>That said, here's my implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Future&lt;Boolean&gt; compareAndDelete(Redis client, String key, String value) {\n    return client.connect().flatMap(connection -&gt; {\n        RedisAPI redis = RedisAPI.api(connection);\n        return redis.watch(List.of(key))\n                .flatMap(ignored -&gt; redis.get(key))\n                .flatMap(response -&gt; {\n                    if (response == null) {\n                        // key does not exist\n                        return Future.succeededFuture(false);\n                    }\n                    if (value.equals(response.toString())) {\n                        return redis.multi()\n                                .flatMap(ignored -&gt; redis.del(List.of(key)))\n                                .flatMap(ignored -&gt; redis.exec())\n                                // null reply means transaction aborted\n                                .map(execResult -&gt; execResult != null);\n                    } else {\n                        return Future.succeededFuture(false);\n                    }\n                })\n                .eventually(connection::close);\n    });\n}\n</code></pre>\n<p>You'll note that I don't do any error handling here. Instead, I structure the code so that whenever an error happens (that is, a <code>Future</code> completes with an error), it gets propagated through the chain. The method returns a future which completes with <code>true</code> when the &quot;compare and delete&quot; operation succeeded or with <code>false</code> when the operation failed (the key does not exist, or someone changed the value in the middle of the transaction). The future may complete with a failure in case of some error.</p>\n<p>For testing, I also wrote this simple function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Future&lt;Void&gt; delay(long timeout) {\n    Promise&lt;Void&gt; promise = ((ContextInternal) vertx.getOrCreateContext()).promise();\n    vertx.setTimer(timeout, ignored -&gt; {\n        promise.complete();\n    });\n    return promise.future();\n}\n</code></pre>\n<p>With this, I can insert an arbitrary delay into the chain to be able to easily trigger the situation when someone else changes the value in the middle of the transaction. For example, I can insert this line</p>\n<pre class=\"lang-java prettyprint-override\"><code>                                .flatMap(ignored -&gt; delay(10_000))\n</code></pre>\n<p>in between the calls to <code>redis.del()</code> and <code>redis.exec()</code>.</p>\n<p>In addition to using future combinators instead of success/failure callbacks, there's one other important difference. The first thing my implementation does is obtaining a <em>connection</em> from the Redis client. The Vert.x Redis client manages a connection pool and if you use the <code>Redis</code> object for sending commands, each command may be executed on a different connection. On the other hand, when using a <code>RedisConnection</code> object, a single connection will be used to send all the commands, which is necessary for Redis transactions to work correctly. The last thing my method does, as you see, is &quot;closing&quot; the connection (which in fact means just returning the connection to the pool).</p>\n"}],"owner":{"account_id":1048512,"reputation":1671,"user_id":1052979,"accept_rate":43,"display_name":"StFS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77186482,"answer_count":1,"score":0,"last_activity_date":1695809170,"creation_date":1695733710,"question_id":77180316,"body_markdown":"I&#39;m trying to implement a compare-and-delete (CAD) function using the [vertx-redis-client](https://vertx.io/docs/vertx-redis-client/java/) library.\r\n\r\nI&#39;m following [this answer](https://stackoverflow.com/a/68232171/1052979) on how to do this. I&#39;ve already implemented the Lua script method and that works fine. However, as redis installations may possibly prohibit running the `eval` command with arbitrary Lua scripts, I think I must also implement this functionality using the WATCH/GET/MULTI/compare/DELETE/UNWATCH sequence of commands.\r\n\r\nHowever, I&#39;m really having a hard time wrapping my head around the correct way to do this with the vert.x reactive way of programming.\r\n\r\n\r\n\r\nHere&#39;s my code that implements both of the methods to do a CAD operation:\r\n\r\n```java\r\n    private Future&lt;Boolean&gt; deleteLua(final String key, final String value) {\r\n        final RedisAPI redis = RedisAPI.api(client);\r\n\r\n        final Promise&lt;Boolean&gt; promise = Promise.promise();\r\n        redis.eval(List.of(&quot;if redis.call(&#39;get&#39;, KEYS[1]) == ARGV[1] then redis.call(&#39;del&#39;, KEYS[1]); return 1; else return 0; end&quot;, &quot;1&quot;, key, value))\r\n                .onSuccess(res -&gt; {\r\n                    System.out.println(&quot;Success: &quot; + res);\r\n                    promise.complete(res.toInteger() == 1);\r\n                })\r\n                .onFailure(err -&gt; {\r\n                    System.out.println(&quot;Error: &quot; + err);\r\n                    promise.fail(err);\r\n                });\r\n\r\n        return promise.future();\r\n    }\r\n```\r\n\r\n```java\r\n    private Future&lt;Boolean&gt; deleteMulti(final String key, final String value) {\r\n        final RedisAPI redis = RedisAPI.api(client);\r\n\r\n        final Promise&lt;Boolean&gt; promise = Promise.promise();\r\n        redis.watch(List.of(key))\r\n                .onSuccess(watchResult -&gt; {\r\n                    redis.get(key)\r\n                            .onSuccess(getResult -&gt; {\r\n                                redis.multi()\r\n                                        .onSuccess(multiResult -&gt; {\r\n                                            if (value.equals(String.valueOf(getResult))) {\r\n                                                redis.del(List.of(key))\r\n                                                        .onSuccess(delResult -&gt; {\r\n                                                            System.out.println(&quot;key deleted&quot;);\r\n                                                        });\r\n                                            } else {\r\n                                                System.out.println(&quot;value did not match, key not deleted&quot;);\r\n                                                promise.complete(false);\r\n                                            }\r\n                                            redis.exec().onSuccess(execResult -&gt; {\r\n                                                System.out.println(&quot;execResult: &quot; + execResult);\r\n                                                redis.unwatch().onSuccess(unwatchResult -&gt; {\r\n                                                    System.out.println(&quot;unwatched key&quot;);\r\n                                                    promise.complete(true);\r\n                                                });\r\n                                            });\r\n                                        })\r\n                                        .onFailure(multiErr -&gt; {\r\n                                            System.out.println(&quot;The multi failed: &quot; + multiErr);\r\n                                            promise.fail(multiErr);\r\n                                        });\r\n                            });\r\n                });\r\n        return Future.succeededFuture(true);\r\n    }\r\n```\r\n\r\nBoth seem to work but I&#39;m really uncertain about the `deleteMulti` method. First of all, it just looks ugly... it&#39;s so endlessly nested! I believe I can probably use a `compose` somehow to get around that to some extent, but I&#39;ve tried doing that but keep running into walls on how exactly to do that. For example, I need the `getResult` inside the `onSuccess` block of the `multi` but when I try to use the `compose` structure, everything gets a bit messed up and I&#39;m unclear on what result exactly I have in each compose block. Another thing I&#39;m very unclear about is how the redis transactions work here. is my `redis` object keeping track of the session so that my call to `watch` will be &quot;active&quot; for any subsequent redis calls I make using that same object? Also, how do I need to treat `unwatch`? I&#39;m currently only calling it within `onSuccess` for the watch-&gt;get-&gt;multi-&gt;exec block, but what if the get or multi fail? Do I need to unwatch on failures as well or will that just be handled by the session getting invalidated somehow? That actually seems unlikely since this is all reactive and the method (where the `RedisAPI redis` object is actually created will return probably before all the operations have finished.\r\n\r\nSo yeah... quite confused.\r\n\r\nAny help in getting this code block into shape would be very much appreciated.\r\n","title":"Unclear about how to structure a vertx-redis-client code","body":"<p>I'm trying to implement a compare-and-delete (CAD) function using the <a href=\"https://vertx.io/docs/vertx-redis-client/java/\" rel=\"nofollow noreferrer\">vertx-redis-client</a> library.</p>\n<p>I'm following <a href=\"https://stackoverflow.com/a/68232171/1052979\">this answer</a> on how to do this. I've already implemented the Lua script method and that works fine. However, as redis installations may possibly prohibit running the <code>eval</code> command with arbitrary Lua scripts, I think I must also implement this functionality using the WATCH/GET/MULTI/compare/DELETE/UNWATCH sequence of commands.</p>\n<p>However, I'm really having a hard time wrapping my head around the correct way to do this with the vert.x reactive way of programming.</p>\n<p>Here's my code that implements both of the methods to do a CAD operation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private Future&lt;Boolean&gt; deleteLua(final String key, final String value) {\n        final RedisAPI redis = RedisAPI.api(client);\n\n        final Promise&lt;Boolean&gt; promise = Promise.promise();\n        redis.eval(List.of(&quot;if redis.call('get', KEYS[1]) == ARGV[1] then redis.call('del', KEYS[1]); return 1; else return 0; end&quot;, &quot;1&quot;, key, value))\n                .onSuccess(res -&gt; {\n                    System.out.println(&quot;Success: &quot; + res);\n                    promise.complete(res.toInteger() == 1);\n                })\n                .onFailure(err -&gt; {\n                    System.out.println(&quot;Error: &quot; + err);\n                    promise.fail(err);\n                });\n\n        return promise.future();\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    private Future&lt;Boolean&gt; deleteMulti(final String key, final String value) {\n        final RedisAPI redis = RedisAPI.api(client);\n\n        final Promise&lt;Boolean&gt; promise = Promise.promise();\n        redis.watch(List.of(key))\n                .onSuccess(watchResult -&gt; {\n                    redis.get(key)\n                            .onSuccess(getResult -&gt; {\n                                redis.multi()\n                                        .onSuccess(multiResult -&gt; {\n                                            if (value.equals(String.valueOf(getResult))) {\n                                                redis.del(List.of(key))\n                                                        .onSuccess(delResult -&gt; {\n                                                            System.out.println(&quot;key deleted&quot;);\n                                                        });\n                                            } else {\n                                                System.out.println(&quot;value did not match, key not deleted&quot;);\n                                                promise.complete(false);\n                                            }\n                                            redis.exec().onSuccess(execResult -&gt; {\n                                                System.out.println(&quot;execResult: &quot; + execResult);\n                                                redis.unwatch().onSuccess(unwatchResult -&gt; {\n                                                    System.out.println(&quot;unwatched key&quot;);\n                                                    promise.complete(true);\n                                                });\n                                            });\n                                        })\n                                        .onFailure(multiErr -&gt; {\n                                            System.out.println(&quot;The multi failed: &quot; + multiErr);\n                                            promise.fail(multiErr);\n                                        });\n                            });\n                });\n        return Future.succeededFuture(true);\n    }\n</code></pre>\n<p>Both seem to work but I'm really uncertain about the <code>deleteMulti</code> method. First of all, it just looks ugly... it's so endlessly nested! I believe I can probably use a <code>compose</code> somehow to get around that to some extent, but I've tried doing that but keep running into walls on how exactly to do that. For example, I need the <code>getResult</code> inside the <code>onSuccess</code> block of the <code>multi</code> but when I try to use the <code>compose</code> structure, everything gets a bit messed up and I'm unclear on what result exactly I have in each compose block. Another thing I'm very unclear about is how the redis transactions work here. is my <code>redis</code> object keeping track of the session so that my call to <code>watch</code> will be &quot;active&quot; for any subsequent redis calls I make using that same object? Also, how do I need to treat <code>unwatch</code>? I'm currently only calling it within <code>onSuccess</code> for the watch-&gt;get-&gt;multi-&gt;exec block, but what if the get or multi fail? Do I need to unwatch on failures as well or will that just be handled by the session getting invalidated somehow? That actually seems unlikely since this is all reactive and the method (where the <code>RedisAPI redis</code> object is actually created will return probably before all the operations have finished.</p>\n<p>So yeah... quite confused.</p>\n<p>Any help in getting this code block into shape would be very much appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":95417,"reputation":4933,"user_id":259889,"accept_rate":76,"display_name":"Sid"},"score":1,"creation_date":1646221455,"post_id":71322093,"comment_id":126068186,"body_markdown":"Not sure of an API for this, but one way would be to split by `/` and then reverse the array.","body":"Not sure of an API for this, but one way would be to split by <code>&#47;</code> and then reverse the array."},{"owner":{"account_id":7595573,"reputation":101,"user_id":5761837,"accept_rate":17,"display_name":"A.Goel"},"score":0,"creation_date":1646221642,"post_id":71322093,"comment_id":126068250,"body_markdown":"yes that is the only way I know.","body":"yes that is the only way I know."},{"owner":{"account_id":22506547,"reputation":965,"user_id":16702058,"display_name":"Hi computer"},"score":0,"creation_date":1695805734,"post_id":71322093,"comment_id":136072076,"body_markdown":"SO is not a code writing or translation service. You can show your attempt and ask about a specific problem.","body":"SO is not a code writing or translation service. You can show your attempt and ask about a specific problem."}],"answers":[{"tags":[],"owner":{"account_id":18728352,"reputation":76,"user_id":13654416,"display_name":"AlexAlbu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646222312,"creation_date":1646222312,"answer_id":71322314,"question_id":71322093,"body_markdown":"I believe you could do that by splitting the path by &quot;/&quot; and afterwards concatenating the tokens in reverse order.\r\n\r\nHere is a code snippet:\r\n\r\n        Path path = Path.of(&quot;this/that/folder&quot;);\r\n        List&lt;String&gt; tokens = Arrays.stream(path.toString().split(&quot;/&quot;)).toList();\r\n        StringBuilder newPath = new StringBuilder();\r\n        for(int i = tokens.size() - 1; i &gt;= 0; i--){\r\n           newPath.append(tokens.get(i));\r\n           newPath.append(&quot;/&quot;);\r\n        }\r\n        System.out.println(newPath.toString());","title":"How to print a file path in reverse order in Java?","body":"<p>I believe you could do that by splitting the path by &quot;/&quot; and afterwards concatenating the tokens in reverse order.</p>\n<p>Here is a code snippet:</p>\n<pre><code>    Path path = Path.of(&quot;this/that/folder&quot;);\n    List&lt;String&gt; tokens = Arrays.stream(path.toString().split(&quot;/&quot;)).toList();\n    StringBuilder newPath = new StringBuilder();\n    for(int i = tokens.size() - 1; i &gt;= 0; i--){\n       newPath.append(tokens.get(i));\n       newPath.append(&quot;/&quot;);\n    }\n    System.out.println(newPath.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695805217,"creation_date":1646516378,"answer_id":71366131,"question_id":71322093,"body_markdown":"A `Stream` of the `Path` components could be used to reverse the components of a relative path, and also handles any platform using the appropriate file separator:\r\n\r\n    Stream.iterate(Path.of(&quot;src/abc/foldername&quot;), Objects::nonNull, Path::getParent)\r\n          .map(Path::getFileName).map(Path::toString)\r\n       .collect(Collectors.joining(File.separator));\r\n    ==&gt; &quot;foldername/abc/src&quot;  (or foldername\\abc\\src on Windows)","title":"How to print a file path in reverse order in Java?","body":"<p>A <code>Stream</code> of the <code>Path</code> components could be used to reverse the components of a relative path, and also handles any platform using the appropriate file separator:</p>\n<pre><code>Stream.iterate(Path.of(&quot;src/abc/foldername&quot;), Objects::nonNull, Path::getParent)\n      .map(Path::getFileName).map(Path::toString)\n   .collect(Collectors.joining(File.separator));\n==&gt; &quot;foldername/abc/src&quot;  (or foldername\\abc\\src on Windows)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695809132,"creation_date":1695809132,"answer_id":77186477,"question_id":71322093,"body_markdown":"I&#39;ll assume you are using interface `IPath` from Eclipse Platform (not stated in your question, but seems reasonably likely).\r\n\r\nFrom the [IPath documentation][1] we can see that we can get individual segments in reverse order like this:\r\n\r\n    for (int i = projectRelativePath.segmentCount() - 1; i &gt;= 0; i--) {\r\n        System.out.println(projectRelativePath.segment(i)); // or append to string etc.\r\n    }\r\n\r\n  [1]: https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FIPath.html","title":"How to print a file path in reverse order in Java?","body":"<p>I'll assume you are using interface <code>IPath</code> from Eclipse Platform (not stated in your question, but seems reasonably likely).</p>\n<p>From the <a href=\"https://help.eclipse.org/latest/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FIPath.html\" rel=\"nofollow noreferrer\">IPath documentation</a> we can see that we can get individual segments in reverse order like this:</p>\n<pre><code>for (int i = projectRelativePath.segmentCount() - 1; i &gt;= 0; i--) {\n    System.out.println(projectRelativePath.segment(i)); // or append to string etc.\n}\n</code></pre>\n"}],"owner":{"account_id":7595573,"reputation":101,"user_id":5761837,"accept_rate":17,"display_name":"A.Goel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":71322314,"answer_count":3,"score":-1,"last_activity_date":1695809132,"creation_date":1646221306,"question_id":71322093,"body_markdown":"I want to print the relative path of file/folder in reverse order.\r\n\r\n    IPath projectRelativePath = element.getProjectRelativePath();\r\n\r\n\r\nthe result is &quot;src/abc/foldername&quot;.\r\n\r\nBut I want the result in reverse manner ie. foldername/abc/src.\r\n\r\nCan someone help me here? Is there any JAVA API available for this?","title":"How to print a file path in reverse order in Java?","body":"<p>I want to print the relative path of file/folder in reverse order.</p>\n<pre><code>IPath projectRelativePath = element.getProjectRelativePath();\n</code></pre>\n<p>the result is &quot;src/abc/foldername&quot;.</p>\n<p>But I want the result in reverse manner ie. foldername/abc/src.</p>\n<p>Can someone help me here? Is there any JAVA API available for this?</p>\n"},{"tags":["java","android","delete-file"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1673005628,"post_id":75030498,"comment_id":132405626,"body_markdown":"You do not have write access to arbitrary files on Android 11+. That will include the ability to delete arbitrary files.","body":"You do not have write access to arbitrary files on Android 11+. That will include the ability to delete arbitrary files."},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673005665,"post_id":75030498,"comment_id":132405634,"body_markdown":"Do I remove the permission  from manifest ?","body":"Do I remove the permission  from manifest ?"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1673005721,"post_id":75030498,"comment_id":132405649,"body_markdown":"If you want to be able to delete that file on Android 10 and below, you would need `WRITE_EXTERNAL_STORAGE` (including requesting it at runtime).","body":"If you want to be able to delete that file on Android 10 and below, you would need <code>WRITE_EXTERNAL_STORAGE</code> (including requesting it at runtime)."},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673005788,"post_id":75030498,"comment_id":132405670,"body_markdown":"So, Do I delete the permission for android 10+ devices ?","body":"So, Do I delete the permission for android 10+ devices ?"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1673005831,"post_id":75030498,"comment_id":132405687,"body_markdown":"You could if you wanted. That is your decision.","body":"You could if you wanted. That is your decision."},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673005909,"post_id":75030498,"comment_id":132405712,"body_markdown":"Even now file is not deleting","body":"Even now file is not deleting"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1673005985,"post_id":75030498,"comment_id":132405740,"body_markdown":"Well, sure. As I wrote earlier, you do not have write access to arbitrary files on Android 11+. That will include the ability to delete arbitrary files.","body":"Well, sure. As I wrote earlier, you do not have write access to arbitrary files on Android 11+. That will include the ability to delete arbitrary files."},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673006081,"post_id":75030498,"comment_id":132405763,"body_markdown":"Ok Thanks @CommonsWare, But Whats the solution for my current issue","body":"Ok Thanks @CommonsWare, But Whats the solution for my current issue"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1673006273,"post_id":75030498,"comment_id":132405817,"body_markdown":"AFAIK, there is none. You cannot just randomly delete whatever you want anymore. If you are willing to involve the user, it might be possible to delete something that the user chooses via `ACTION_OPEN_DOCUMENT` / `ActivityResultContracts.OpenDocument`, though I have not tried this. You could ask that the user grant you `MANAGE_EXTERNAL_STORAGE` permission, but then you may not be allowed to distribute your app on the Play Store or elsewhere. Personally, I would simply not delete files in arbitrary locations.","body":"AFAIK, there is none. You cannot just randomly delete whatever you want anymore. If you are willing to involve the user, it might be possible to delete something that the user chooses via <code>ACTION_OPEN_DOCUMENT</code> / <code>ActivityResultContracts.OpenDocument</code>, though I have not tried this. You could ask that the user grant you <code>MANAGE_EXTERNAL_STORAGE</code> permission, but then you may not be allowed to distribute your app on the Play Store or elsewhere. Personally, I would simply not delete files in arbitrary locations."},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673007317,"post_id":75030498,"comment_id":132406089,"body_markdown":"I used the above permissions and  I already published app in the playstore","body":"I used the above permissions and  I already published app in the playstore"},{"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"score":0,"creation_date":1673007346,"post_id":75030498,"comment_id":132406097,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/250891/discussion-between-anandh-krishnan-and-commonsware).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/250891/discussion-between-anandh-krishnan-and-commonsware\">continue this discussion in chat</a>."},{"owner":{"account_id":16115791,"reputation":367,"user_id":11632959,"display_name":"dect"},"score":0,"creation_date":1695216432,"post_id":75030498,"comment_id":135994653,"body_markdown":"Did you find a solution?","body":"Did you find a solution?"}],"answers":[{"tags":[],"owner":{"account_id":26855967,"reputation":2321,"user_id":20440272,"display_name":"Sohaib Ahmed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673088476,"creation_date":1673021005,"answer_id":75033288,"question_id":75030498,"body_markdown":"### Solution # 1 \r\nFor Android 11 or higher, you can delete file using [MediaStore Api][1] (without `MANAGE_EXTERNAL_Storage`)\r\n\r\nIn `onCreate()`\r\n\r\n    String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\r\n\r\n    private ActivityResultLauncher&lt;Intent&gt; deleteResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), result -&gt; {\r\n    \t\tif (result.getResultCode() == Activity.RESULT_OK) {\r\n    \t\t\tMediaScannerConnection.scanFile(getApplicationContext(), new String[]{path}, null, (path, uri) -&gt; {\r\n    \t\t\t\tLog.d(&quot;onScanCompleted&quot;, uri.getPath());\r\n    \t\t\t});\r\n    \t\t}\r\n    \t});\r\n\r\nyou delete function,\r\n\r\n\r\n\t\tif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n\t\t\tUri fileUri = Uri.fromFile(new File(path));\r\n\r\n\t\t\tArrayList&lt;Uri&gt; arrayList = new ArrayList&lt;&gt;();\r\n\t\t\tarrayList.add(fileUri);\r\n\r\n\t\t\tPendingIntent pendingIntent = MediaStore.createDeleteRequest(getContentResolver(), arrayList);\r\n\t\t\tdeleteResultLauncher.launch(new IntentSenderRequest.Builder(pendingIntent).build().getFillInIntent());\r\n\t\t}\r\n\r\n### Solution 2\r\nWith `MANAGE_EXTERNAL_Storage`, just add `MediaScannerConnection`\r\n\r\n\r\n\tString path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\r\n\tFile file = new File(path);\r\n\r\n\tif (file.exists()) {\r\n\t\tFile file2 = new File(file.toString());\r\n\t\tfile2.delete();\r\n        MediaScannerConnection.scanFile(getApplicationContext(), new String[]{path}, null, (path, uri) -&gt; {\r\n                Log.d(&quot;onScanCompleted&quot;, uri.getPath());\r\n            });\r\n\t\tToast.makeText(this, &quot;File deleted.&quot;, Toast.LENGTH_SHORT).show();\r\n\t\tfinish();\r\n\t} else {\r\n\t\tToast.makeText(this, &quot;File not exists&quot;, Toast.LENGTH_SHORT).show();\r\n\t}\r\n\r\n  [1]: https://developer.android.com/reference/android/provider/MediaStore#createDeleteRequest(android.content.ContentResolver,%20java.util.Collection%3Candroid.net.Uri%3E)\r\n","title":"File is not getting deleted in Android 13?","body":"<h3>Solution # 1</h3>\n<p>For Android 11 or higher, you can delete file using <a href=\"https://developer.android.com/reference/android/provider/MediaStore#createDeleteRequest(android.content.ContentResolver,%20java.util.Collection%3Candroid.net.Uri%3E)\" rel=\"nofollow noreferrer\">MediaStore Api</a> (without <code>MANAGE_EXTERNAL_Storage</code>)</p>\n<p>In <code>onCreate()</code></p>\n<pre><code>String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\n\nprivate ActivityResultLauncher&lt;Intent&gt; deleteResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), result -&gt; {\n        if (result.getResultCode() == Activity.RESULT_OK) {\n            MediaScannerConnection.scanFile(getApplicationContext(), new String[]{path}, null, (path, uri) -&gt; {\n                Log.d(&quot;onScanCompleted&quot;, uri.getPath());\n            });\n        }\n    });\n</code></pre>\n<p>you delete function,</p>\n<pre><code>    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n        Uri fileUri = Uri.fromFile(new File(path));\n\n        ArrayList&lt;Uri&gt; arrayList = new ArrayList&lt;&gt;();\n        arrayList.add(fileUri);\n\n        PendingIntent pendingIntent = MediaStore.createDeleteRequest(getContentResolver(), arrayList);\n        deleteResultLauncher.launch(new IntentSenderRequest.Builder(pendingIntent).build().getFillInIntent());\n    }\n</code></pre>\n<h3>Solution 2</h3>\n<p>With <code>MANAGE_EXTERNAL_Storage</code>, just add <code>MediaScannerConnection</code></p>\n<pre><code>String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\nFile file = new File(path);\n\nif (file.exists()) {\n    File file2 = new File(file.toString());\n    file2.delete();\n    MediaScannerConnection.scanFile(getApplicationContext(), new String[]{path}, null, (path, uri) -&gt; {\n            Log.d(&quot;onScanCompleted&quot;, uri.getPath());\n        });\n    Toast.makeText(this, &quot;File deleted.&quot;, Toast.LENGTH_SHORT).show();\n    finish();\n} else {\n    Toast.makeText(this, &quot;File not exists&quot;, Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n"}],"owner":{"account_id":6746145,"reputation":4817,"user_id":5197712,"display_name":"Anand"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1396,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695808382,"creation_date":1673005453,"question_id":75030498,"body_markdown":"    String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\r\n    File file = new File(path);\r\n    \r\n    if(file.exists()) {\r\n    File file2 = new File(file.getAbsolutePath());\r\n        file2.delete();\r\n        Toast.makeText(this, &quot;File deleted.&quot;, Toast.LENGTH_SHORT).show();\r\n        finish();   \r\n    }else \r\n    {\r\n        Toast.makeText(this, &quot;File not exists&quot;, Toast.LENGTH_SHORT).show();        \r\n    }\r\n\r\nFile is not getting deleted. But the toast is showing as File Deleted.I trapped on this issue almost 2 days, any help will be highly appreciated. Thanks in advance.\r\n\r\nI used the below permission in the manifest.\r\n\r\n      &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n      &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n      &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/I23nP.png","title":"File is not getting deleted in Android 13?","body":"<pre><code>String path = &quot;/storage/emulated/0/Recordings/Call/Two.mp3&quot;;\nFile file = new File(path);\n\nif(file.exists()) {\nFile file2 = new File(file.getAbsolutePath());\n    file2.delete();\n    Toast.makeText(this, &quot;File deleted.&quot;, Toast.LENGTH_SHORT).show();\n    finish();   \n}else \n{\n    Toast.makeText(this, &quot;File not exists&quot;, Toast.LENGTH_SHORT).show();        \n}\n</code></pre>\n<p>File is not getting deleted. But the toast is showing as File Deleted.I trapped on this issue almost 2 days, any help will be highly appreciated. Thanks in advance.</p>\n<p>I used the below permission in the manifest.</p>\n<pre><code>  &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n  &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n  &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/I23nP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I23nP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","maven","maven-shade-plugin"],"comments":[{"owner":{"account_id":3085559,"reputation":699,"user_id":2612773,"accept_rate":100,"display_name":"dev_feed"},"score":0,"creation_date":1395921497,"post_id":11551083,"comment_id":34563005,"body_markdown":"I&#39;ve got the same problem, would like to see more attention to this question.  Did you solve this error?","body":"I&#39;ve got the same problem, would like to see more attention to this question.  Did you solve this error?"},{"owner":{"account_id":7864671,"reputation":452,"user_id":5943840,"display_name":"Raphael"},"score":0,"creation_date":1665702099,"post_id":11551083,"comment_id":130766781,"body_markdown":"In my case, I was actually missing the property in question. Problem was solved after adding it (as a dummy property, since I&#39;m running locally).","body":"In my case, I was actually missing the property in question. Problem was solved after adding it (as a dummy property, since I&#39;m running locally)."}],"answers":[{"tags":[],"owner":{"account_id":70704,"reputation":49430,"user_id":204788,"display_name":"Biju Kunjummen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1342651042,"creation_date":1342651042,"answer_id":11551388,"question_id":11551083,"body_markdown":"It is probably not able to find the resource - `postprocess.properties`. Can you please remove this line - \r\n\r\n    &lt;property name=&quot;ignoreResourceNotFound&quot; value=&quot;true&quot; /&gt;\r\n\r\nThen if the resource is not found appropriate message should be displayed.","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>It is probably not able to find the resource - <code>postprocess.properties</code>. Can you please remove this line - </p>\n\n<pre><code>&lt;property name=\"ignoreResourceNotFound\" value=\"true\" /&gt;\n</code></pre>\n\n<p>Then if the resource is not found appropriate message should be displayed.</p>\n"},{"tags":[],"owner":{"account_id":3600772,"reputation":495,"user_id":3004124,"display_name":"Pragmatic"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1438242513,"creation_date":1438242513,"answer_id":31718018,"question_id":11551083,"body_markdown":"Its probably late to answer this, but adding it for benefit of someone facing similar issue. \r\n\r\nI was able to fix it by changing the key names. e.g.\r\n\r\n     &lt;prop key=&quot;processor.core.poolsize&quot;&gt;${processor.core.poolsize}&lt;/prop&gt;\r\n     &lt;prop key=&quot;processor.max.poolsize&quot;&gt;${processor.max.poolsize}&lt;/prop&gt;\r\nWas changed to something like\r\n \r\n    &lt;prop key=&quot;processor.core.poolsize&quot;&gt;${core.poolsize}&lt;/prop&gt;\r\n    &lt;prop key=&quot;processor.max.poolsize&quot;&gt;${max.poolsize}&lt;/prop&gt;\r\n\r\nproperty-placeholder key and the key of property value to be filtered cannot be same.","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>Its probably late to answer this, but adding it for benefit of someone facing similar issue. </p>\n\n<p>I was able to fix it by changing the key names. e.g.</p>\n\n<pre><code> &lt;prop key=\"processor.core.poolsize\"&gt;${processor.core.poolsize}&lt;/prop&gt;\n &lt;prop key=\"processor.max.poolsize\"&gt;${processor.max.poolsize}&lt;/prop&gt;\n</code></pre>\n\n<p>Was changed to something like</p>\n\n<pre><code>&lt;prop key=\"processor.core.poolsize\"&gt;${core.poolsize}&lt;/prop&gt;\n&lt;prop key=\"processor.max.poolsize\"&gt;${max.poolsize}&lt;/prop&gt;\n</code></pre>\n\n<p>property-placeholder key and the key of property value to be filtered cannot be same.</p>\n"},{"tags":[],"owner":{"account_id":1050608,"reputation":96,"user_id":1054658,"display_name":"Becky reamy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1476992647,"creation_date":1476992647,"answer_id":40163191,"question_id":11551083,"body_markdown":"I was having the same issue when trying to run a spring integration test using SpringJUnit4ClassRunner.  I was unsure of how to get my properties file loaded and after a few mis-steps, I found the @TestPropertySource annotation that allowed me to define the properties file(s) needed.\r\n\r\nI had tried @PropertySource before that, and it does not work when you are running a spring integration test like this. \r\n\r\nHopefully this helps someone else.","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>I was having the same issue when trying to run a spring integration test using SpringJUnit4ClassRunner.  I was unsure of how to get my properties file loaded and after a few mis-steps, I found the @TestPropertySource annotation that allowed me to define the properties file(s) needed.</p>\n\n<p>I had tried @PropertySource before that, and it does not work when you are running a spring integration test like this. </p>\n\n<p>Hopefully this helps someone else.</p>\n"},{"tags":[],"owner":{"account_id":3223776,"reputation":171,"user_id":2720559,"display_name":"Abhishek"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1586965140,"creation_date":1586965140,"answer_id":61232758,"question_id":11551083,"body_markdown":"    Circular placeholder reference XXXX in property definitions\r\n\r\nAbove kind of exception will be thrown by the `spring-framework` when your property key name and value variable name are exactly the same. \r\n\r\nMake sure your property should not look like \r\n `key={$key}`. Keeping **different** name for key and value will fix this issue.","title":"Spring Circular placeholder reference while running an executable jar","body":"<pre><code>Circular placeholder reference XXXX in property definitions\n</code></pre>\n\n<p>Above kind of exception will be thrown by the <code>spring-framework</code> when your property key name and value variable name are exactly the same. </p>\n\n<p>Make sure your property should not look like \n <code>key={$key}</code>. Keeping <strong>different</strong> name for key and value will fix this issue.</p>\n"},{"tags":[],"owner":{"account_id":2409845,"reputation":866,"user_id":2105218,"display_name":"YellowStrawHatter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618831411,"creation_date":1618831411,"answer_id":67161055,"question_id":11551083,"body_markdown":"In your java code, if you are using keys declared in some **.properties** or **yaml** file other than `application.properties` or `application.yaml`, you will get this exception when you try to run your Spring application without specifying the profile to use.\r\n\r\nSolution:\r\nIn my case, I&#39;m using ***Spring Boot 2.4***, here is one way to tell your app which profile(s) will be used:\r\n\r\n**Command Line:** \r\n\r\n    java -jar -Dspring.profiles.active=DEV myapp.jar\r\n\r\nIf you&#39;re running your apps via an IDE such as IntelliJ:\r\n\r\n***Run -&gt; Edit configurations***\r\n\r\nIn your Spring Config, specify the profiles(s) that you want to be active (separated by commas):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aoa1w.png","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>In your java code, if you are using keys declared in some <strong>.properties</strong> or <strong>yaml</strong> file other than <code>application.properties</code> or <code>application.yaml</code>, you will get this exception when you try to run your Spring application without specifying the profile to use.</p>\n<p>Solution:\nIn my case, I'm using <em><strong>Spring Boot 2.4</strong></em>, here is one way to tell your app which profile(s) will be used:</p>\n<p><strong>Command Line:</strong></p>\n<pre><code>java -jar -Dspring.profiles.active=DEV myapp.jar\n</code></pre>\n<p>If you're running your apps via an IDE such as IntelliJ:</p>\n<p><em><strong>Run -&gt; Edit configurations</strong></em></p>\n<p>In your Spring Config, specify the profiles(s) that you want to be active (separated by commas):</p>\n<p><a href=\"https://i.stack.imgur.com/aoa1w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aoa1w.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":26147565,"reputation":81,"user_id":19835993,"display_name":"Michael Sparrow"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695808053,"creation_date":1695807040,"answer_id":77186241,"question_id":11551083,"body_markdown":"**Quick fix:** Had the same problem. Renaming the property, starting the application and the renaming the property back and restarting the application again solved the problem. Maybe this can help someone.","title":"Spring Circular placeholder reference while running an executable jar","body":"<p><strong>Quick fix:</strong> Had the same problem. Renaming the property, starting the application and the renaming the property back and restarting the application again solved the problem. Maybe this can help someone.</p>\n"}],"owner":{"account_id":207732,"reputation":1691,"user_id":457776,"accept_rate":60,"display_name":"Shamik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71708,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":6,"score":25,"last_activity_date":1695808053,"creation_date":1342649286,"question_id":11551083,"body_markdown":"I&#39;m facing &quot;Circular Placeholder reference&quot; exception while trying to run an executable jar file. Here&#39;s the detailed exception.\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name &#39;postProcessProperties&#39; defined in class path resource [applicationContext.xml]: Circular placeholder reference &#39;processor.core.poolsize&#39; in property definitions\r\n     [echo]     at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:287)\r\n     [echo]     at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:75)\r\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)\r\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)\r\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)\r\n     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:139)\r\n     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:83)\r\n     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.start(PostProcessEngine.java:39)\r\n     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.main(PostProcessEngine.java:29)\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nThis is a spring application which uses an external property file to read values at startup. Here&#39;s the spring definition. This has worked pretty well till now.\r\n&lt;pre&gt;&lt;code&gt;\r\n&amp;lt;bean id=&quot;propertyConfig&quot;\r\n\t\tclass=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&amp;gt;\r\n\t\t&amp;lt;property name=&quot;systemPropertiesModeName&quot; value=&quot;SYSTEM_PROPERTIES_MODE_NEVER&quot; /&amp;gt;\r\n\t\t&amp;lt;property name=&quot;ignoreResourceNotFound&quot; value=&quot;true&quot; /&amp;gt;\r\n\t    &amp;lt;property name=&quot;locations&quot;&amp;gt;\r\n\t\t\t&amp;lt;list&amp;gt;\r\n\t\t\t\t&amp;lt;value&amp;gt;classpath:/postprocess.properties&amp;lt;/value&amp;gt;\r\n\t\t\t&amp;lt;/list&amp;gt;\r\n\t\t&amp;lt;/property&amp;gt;\r\n\t\t&amp;lt;property name=&quot;properties&quot;&amp;gt;\r\n\t\t\t&amp;lt;props&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.core.poolsize&quot;&amp;gt;${processor.core.poolsize}&amp;lt;/prop&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.max.poolsize&quot;&amp;gt;${processor.max.poolsize}&amp;lt;/prop&amp;gt;\r\n\t\t\t&amp;lt;/props&amp;gt;\r\n\t\t&amp;lt;/property&amp;gt;\r\n\t&amp;lt;/bean&amp;gt;\r\n\r\n\t&amp;lt;bean id=&quot;postProcessProperties&quot;\r\n\t\tclass=&quot;org.springframework.beans.factory.config.PropertiesFactoryBean&quot;&amp;gt;\r\n\t\t&amp;lt;property name=&quot;properties&quot;&amp;gt;\r\n\t\t\t&amp;lt;props&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.core.poolsize&quot;&amp;gt;${processor.core.poolsize}&amp;lt;/prop&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.max.poolsize&quot;&amp;gt;${processor.max.poolsize}&amp;lt;/prop&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.polling.delay&quot;&amp;gt;${processor.polling.delay}&amp;lt;/prop&amp;gt;\r\n\t\t\t\t&amp;lt;prop key=&quot;processor.polling.period&quot;&amp;gt;${processor.polling.period}&amp;lt;/prop&amp;gt;\r\n\t\t&amp;lt;/property&amp;gt;\r\n\t&amp;lt;/bean&amp;gt;\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nI&#39;m using shade plugin to generate the jar file. Here&#39;s a snippet\r\n&lt;pre&gt;&lt;code&gt;\r\n&amp;lt;plugin&amp;gt;\r\n\t\t\t\t&amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;\r\n\t\t\t\t&amp;lt;artifactId&amp;gt;maven-shade-plugin&amp;lt;/artifactId&amp;gt;\r\n\t\t\t\t&amp;lt;version&amp;gt;1.7.1&amp;lt;/version&amp;gt;\r\n\t\t\t\t&amp;lt;executions&amp;gt;\r\n\t\t\t\t\t&amp;lt;execution&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;phase&amp;gt;package&amp;lt;/phase&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;goals&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;goal&amp;gt;shade&amp;lt;/goal&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;/goals&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;configuration&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;transformers&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;transformer\r\n\t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;mainClass&amp;gt;com.test.postprocess.engine.PostProcessEngine&amp;lt;/mainClass&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;/transformer&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;transformer\r\n\t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;resource&amp;gt;META-INF/spring.handlers&amp;lt;/resource&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;/transformer&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;transformer\r\n\t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;resource&amp;gt;META-INF/spring.schemas&amp;lt;/resource&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;/transformer&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;/transformers&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;filters&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;filter&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;artifact&amp;gt;*:*&amp;lt;/artifact&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;excludes&amp;gt;\r\n\t\t\t\t\t\t\t\t\t\t&amp;lt;exclude&amp;gt;META-INF/*.SF&amp;lt;/exclude&amp;gt;\r\n\t\t\t\t\t\t\t\t\t\t&amp;lt;exclude&amp;gt;META-INF/*.DSA&amp;lt;/exclude&amp;gt;\r\n\t\t\t\t\t\t\t\t\t\t&amp;lt;exclude&amp;gt;META-INF/*.RSA&amp;lt;/exclude&amp;gt;\r\n\t\t\t\t\t\t\t\t\t&amp;lt;/excludes&amp;gt;\r\n\t\t\t\t\t\t\t\t&amp;lt;/filter&amp;gt;\r\n\t\t\t\t\t\t\t&amp;lt;/filters&amp;gt;\r\n\t\t\t\t\t\t&amp;lt;/configuration&amp;gt;\r\n\t\t\t\t\t&amp;lt;/execution&amp;gt;\r\n\t\t\t\t&amp;lt;/executions&amp;gt;\r\n\t\t\t&amp;lt;/plugin&amp;gt;\r\n&lt;/pre&gt;&lt;/code&gt;\r\n\r\nI&#39;m not sure what&#39;s causing this issue, as I&#39;ve used similar pattern before in other executable jar files.\r\n\r\nAny pointer will be appreciated.\r\n\r\nThanks","title":"Spring Circular placeholder reference while running an executable jar","body":"<p>I'm facing \"Circular Placeholder reference\" exception while trying to run an executable jar file. Here's the detailed exception.</p>\n\n<pre><code>\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'postProcessProperties' defined in class path resource [applicationContext.xml]: Circular placeholder reference 'processor.core.poolsize' in property definitions\n     [echo]     at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:287)\n     [echo]     at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:75)\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)\n     [echo]     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)\n     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:139)\n     [echo]     at org.springframework.context.support.ClassPathXmlApplicationContext.(ClassPathXmlApplicationContext.java:83)\n     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.start(PostProcessEngine.java:39)\n     [echo]     at com.autodesk.postprocess.engine.PostProcessEngine.main(PostProcessEngine.java:29)\n</code></pre>\n\n<p>This is a spring application which uses an external property file to read values at startup. Here's the spring definition. This has worked pretty well till now.</p>\n\n<pre><code>\n&lt;bean id=\"propertyConfig\"\n        class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"systemPropertiesModeName\" value=\"SYSTEM_PROPERTIES_MODE_NEVER\" /&gt;\n        &lt;property name=\"ignoreResourceNotFound\" value=\"true\" /&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:/postprocess.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"properties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"processor.core.poolsize\"&gt;${processor.core.poolsize}&lt;/prop&gt;\n                &lt;prop key=\"processor.max.poolsize\"&gt;${processor.max.poolsize}&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"postProcessProperties\"\n        class=\"org.springframework.beans.factory.config.PropertiesFactoryBean\"&gt;\n        &lt;property name=\"properties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"processor.core.poolsize\"&gt;${processor.core.poolsize}&lt;/prop&gt;\n                &lt;prop key=\"processor.max.poolsize\"&gt;${processor.max.poolsize}&lt;/prop&gt;\n                &lt;prop key=\"processor.polling.delay\"&gt;${processor.polling.delay}&lt;/prop&gt;\n                &lt;prop key=\"processor.polling.period\"&gt;${processor.polling.period}&lt;/prop&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>I'm using shade plugin to generate the jar file. Here's a snippet\n<pre><code>\n&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.7.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                    implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt;\n                                    &lt;mainClass&gt;com.test.postprocess.engine.PostProcessEngine&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                                &lt;transformer\n                                    implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                    &lt;resource&gt;META-INF/spring.handlers&lt;/resource&gt;\n                                &lt;/transformer&gt;\n                                &lt;transformer\n                                    implementation=\"org.apache.maven.plugins.shade.resource.AppendingTransformer\"&gt;\n                                    &lt;resource&gt;META-INF/spring.schemas&lt;/resource&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                            &lt;filters&gt;\n                                &lt;filter&gt;\n                                    &lt;artifact&gt;<em>:</em>&lt;/artifact&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;META-INF/<em>.SF&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/</em>.DSA&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/filter&gt;\n                            &lt;/filters&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</pre></code></p>\n\n<p>I'm not sure what's causing this issue, as I've used similar pattern before in other executable jar files.</p>\n\n<p>Any pointer will be appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","websocket","graphql","spring-graphql"],"owner":{"account_id":2590005,"reputation":1317,"user_id":2244915,"accept_rate":75,"display_name":"loonis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695807823,"creation_date":1695807823,"question_id":77186332,"body_markdown":"Using Spring Boot 3.2.4 with Spring WebFlux/GraphQL subscription via Websocket.\r\n\r\nServer A exposes a graphqlSubscription, and Server B consumes the subscription.  \r\nThey both use the same components (reactor/netty).\r\n\r\nSteps to Reproduce:\r\n\r\n``` lang-java\r\n// Client side, Initialize the webSocketGraphQlClient\r\nReactorNettyWebSocketClient reactorNettyWebSocketClient = new ReactorNettyWebSocketClient(HttpClient.create(), build);\r\nWebSocketGraphQlClient.builder(serverUrl, reactorNettyWebSocketClient).build();\r\n    \r\n// Call sample\r\nwebSocketGraphQlClient\r\n .document(query)\r\n .retrieveSubscription(path)\r\n .toEntity(XXXX.class)\r\n .retryWhen(Retry.fixedDelay(5, Duration.ofMinutes(1))).blockLast()\r\n```\r\n\r\n**Not Working Cases**\r\n\r\nCase 1:\r\n* Run the client, do not start the server\r\n* Wait for the 1st RETRY.\r\n* `GraphQlTransportException =&gt; connection refused.`\r\n* Run the server.\r\n* Nexts retries will fail with the same reason.\r\n\r\nCase 2:\r\n\r\n* Run the server.\r\n* Run the client.\r\n* Communication between both is working fine\r\n* Kill the server.\r\n* Wait for the FIRST RETRY\r\n* `WebSocketDisconnectedException -&gt; connection is closed or lost.`\r\n* Wait for the SECOND RETRY.\r\n* `GraphQlTransportException =&gt; connection refused.`\r\n* Rerun the server.\r\n* Nexts retries will fail with the same reason.\r\n\r\n\r\n**Working Case**\r\n\r\n* Run the server.\r\n* Run the client.\r\n* Communication between both is working fine\r\n* Kill the server.\r\n* Wait for the FIRST RETRY\r\n* `WebSocketDisconnectedException -&gt; connection is closed or lost.`\r\n* Rerun the server.\r\n* OK, the retry is working.\r\n\r\nIs there a way to resume a WebSocket connection when the client failed to connect to the remote server?\r\n\r\nLink to the github question : https://github.com/spring-projects/spring-graphql/issues/826","title":"How to retry a Spring WebSocketGraphQlClient query","body":"<p>Using Spring Boot 3.2.4 with Spring WebFlux/GraphQL subscription via Websocket.</p>\n<p>Server A exposes a graphqlSubscription, and Server B consumes the subscription.<br />\nThey both use the same components (reactor/netty).</p>\n<p>Steps to Reproduce:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Client side, Initialize the webSocketGraphQlClient\nReactorNettyWebSocketClient reactorNettyWebSocketClient = new ReactorNettyWebSocketClient(HttpClient.create(), build);\nWebSocketGraphQlClient.builder(serverUrl, reactorNettyWebSocketClient).build();\n    \n// Call sample\nwebSocketGraphQlClient\n .document(query)\n .retrieveSubscription(path)\n .toEntity(XXXX.class)\n .retryWhen(Retry.fixedDelay(5, Duration.ofMinutes(1))).blockLast()\n</code></pre>\n<p><strong>Not Working Cases</strong></p>\n<p>Case 1:</p>\n<ul>\n<li>Run the client, do not start the server</li>\n<li>Wait for the 1st RETRY.</li>\n<li><code>GraphQlTransportException =&gt; connection refused.</code></li>\n<li>Run the server.</li>\n<li>Nexts retries will fail with the same reason.</li>\n</ul>\n<p>Case 2:</p>\n<ul>\n<li>Run the server.</li>\n<li>Run the client.</li>\n<li>Communication between both is working fine</li>\n<li>Kill the server.</li>\n<li>Wait for the FIRST RETRY</li>\n<li><code>WebSocketDisconnectedException -&gt; connection is closed or lost.</code></li>\n<li>Wait for the SECOND RETRY.</li>\n<li><code>GraphQlTransportException =&gt; connection refused.</code></li>\n<li>Rerun the server.</li>\n<li>Nexts retries will fail with the same reason.</li>\n</ul>\n<p><strong>Working Case</strong></p>\n<ul>\n<li>Run the server.</li>\n<li>Run the client.</li>\n<li>Communication between both is working fine</li>\n<li>Kill the server.</li>\n<li>Wait for the FIRST RETRY</li>\n<li><code>WebSocketDisconnectedException -&gt; connection is closed or lost.</code></li>\n<li>Rerun the server.</li>\n<li>OK, the retry is working.</li>\n</ul>\n<p>Is there a way to resume a WebSocket connection when the client failed to connect to the remote server?</p>\n<p>Link to the github question : <a href=\"https://github.com/spring-projects/spring-graphql/issues/826\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-graphql/issues/826</a></p>\n"},{"tags":["java","multithreading","performance","libgdx","game-development"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1695999891,"post_id":77184059,"comment_id":136102076,"body_markdown":"You definitely do not want a second thread. By &quot;tick the game&quot;, do you mean you want to simulate it with a fixed time step instead of just updating it at whatever the framerate of the rendering is? Even games with a fixed time step for the simulation still render as fast as possible, and often have to do some kind of interpolation or extrapolation of the simulation to render animation smoothly without stuttering. It is a complicated subject. [Here](https://gafferongames.com/post/fix_your_timestep/) is a famous article on the subject. The `while(!quit)` loop&#39;s interior in the example there","body":"You definitely do not want a second thread. By &quot;tick the game&quot;, do you mean you want to simulate it with a fixed time step instead of just updating it at whatever the framerate of the rendering is? Even games with a fixed time step for the simulation still render as fast as possible, and often have to do some kind of interpolation or extrapolation of the simulation to render animation smoothly without stuttering. It is a complicated subject. <a href=\"https://gafferongames.com/post/fix_your_timestep/\" rel=\"nofollow noreferrer\">Here</a> is a famous article on the subject. The <code>while(!quit)</code> loop&#39;s interior in the example there"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1695999934,"post_id":77184059,"comment_id":136102084,"body_markdown":"is analogous to libGDX&#39;s `render` method. And the `render()` in the example there is analogous to whatever drawing methods you have in your own game.","body":"is analogous to libGDX&#39;s <code>render</code> method. And the <code>render()</code> in the example there is analogous to whatever drawing methods you have in your own game."}],"answers":[{"tags":[],"owner":{"account_id":233979,"reputation":851,"user_id":499837,"accept_rate":60,"display_name":"bornander"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695807426,"creation_date":1695807426,"answer_id":77186282,"question_id":77184059,"body_markdown":"You don&#39;t need another thread for this and it is a bad idea to have one (as you pointed out yourself).\r\n\r\nIf you can make your game-logic delta-time dependent, so that it doesn&#39;t matter how often `render` gets called:\r\n\r\n\t@Override\r\n\tpublic void render() {\r\n\t\tfloat delta = Gdx.graphics.getDeltaTime();\r\n        // Use delta to update you game an appropriate amount\r\n\t}\r\n\r\nIf your particular scenario won&#39;t work with that approach, you can instead just configure **libGDX** to call the `render` method as often as you like.\r\n\r\nIn you launcher class you can configure the foreground FPS, so in the case of a  desktop application that might look like this;\r\n\r\n\tpublic static void main (String[] arg) {\r\n\t\tLwjgl3ApplicationConfiguration config = new Lwjgl3ApplicationConfiguration();\r\n\t\tconfig.setForegroundFPS(20); // Or what ever FPS you want.\r\n\t\tnew Lwjgl3Application(new TanksII(), config);\r\n\t}\r\n\r\n\r\n ","title":"How to create a proper tick method in a lib gdx game","body":"<p>You don't need another thread for this and it is a bad idea to have one (as you pointed out yourself).</p>\n<p>If you can make your game-logic delta-time dependent, so that it doesn't matter how often <code>render</code> gets called:</p>\n<pre><code>@Override\npublic void render() {\n    float delta = Gdx.graphics.getDeltaTime();\n    // Use delta to update you game an appropriate amount\n}\n</code></pre>\n<p>If your particular scenario won't work with that approach, you can instead just configure <strong>libGDX</strong> to call the <code>render</code> method as often as you like.</p>\n<p>In you launcher class you can configure the foreground FPS, so in the case of a  desktop application that might look like this;</p>\n<pre><code>public static void main (String[] arg) {\n    Lwjgl3ApplicationConfiguration config = new Lwjgl3ApplicationConfiguration();\n    config.setForegroundFPS(20); // Or what ever FPS you want.\n    new Lwjgl3Application(new TanksII(), config);\n}\n</code></pre>\n"}],"owner":{"account_id":29390454,"reputation":15,"user_id":22518954,"display_name":"JewishBanana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77186282,"answer_count":1,"score":1,"last_activity_date":1695807426,"creation_date":1695774291,"question_id":77184059,"body_markdown":"I just started with lib gdx and essentially gave up on using lwgjl for making a game as it is ridicoulosy overcomplicated. The problem is that lib gdx has a built in create() method run once at creation and a render() method run as many times as possible. So there is no built in tick method that I can use to update the game at a set time per second. I want to add one.\r\n\r\nIn my main class I create a new thread with the tick rate method and it works, but the problem is that I can&#39;t utitlize the render() method myself since that is handled already by lib gdx to be called as many times as possible. So I have the thread I create to tick the game and the render method is being run by lib gdx which is I believe run from a second thread. I don&#39;t think its a good idea to tick the game and render from different threads as I believe that the rendering could have issues with updating properly since the read write from the same variables in the object classes would be both read in the tick and render and modified in the tick only. Is this maybe a very good idea to do actually if I handle all the variables visible to the object render methods as volatile since they are only read by the thread? Or is this a terrible idea for performance? I am no sure about the set backs and difference of using a lot of volatile variables rather than regular variables. Here is my main class so far:\r\n\r\n```\r\npublic class TanksII extends ApplicationAdapter implements Runnable {\r\n\t\r\n\tSpriteBatch batch;\r\n\tTexture img;\r\n\t\r\n\tprivate Thread thread;\r\n\tboolean isRunning;\r\n\tvolatile int frames;\r\n\t\r\n\t@Override\r\n\tpublic void create() {\r\n\t\tbatch = new SpriteBatch();\r\n\t\timg = new Texture(&quot;badlogic.jpg&quot;);\r\n\t\t\r\n\t\tstart();\r\n\t}\r\n\tprivate void tick() {\r\n\t\t\r\n\t}\r\n\t@Override\r\n\tpublic void render() {\r\n\t\tScreenUtils.clear(1, 0, 0, 1);\r\n\t\tbatch.begin();\r\n\t\tbatch.draw(img, 0, 0);\r\n\t\tbatch.end();\r\n\t\tframes++;\r\n\t}\r\n\t@Override\r\n\tpublic void dispose() {\r\n\t\tisRunning = false;\r\n\t\tbatch.dispose();\r\n\t\timg.dispose();\r\n\t}\r\n\tprivate synchronized void start() {\r\n\t\tif (isRunning)\r\n\t\t\treturn;\r\n\t\tthread = new Thread(this);\r\n\t\tthread.start();\r\n\t\tisRunning = true;\r\n\t}\r\n\tprivate synchronized void stop() {\r\n\t\tif (!(isRunning))\r\n\t\t\treturn;\r\n\t\ttry {\r\n\t\t\tthread.join();\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tisRunning = false;\r\n\t}\r\n\tpublic void run() {\r\n\t\tlong lastTime = System.nanoTime();\r\n\t\tdouble amountOfTicks = 60.0;\r\n\t\tdouble ns = 1000000000 / amountOfTicks;\r\n\t\tdouble delta = 0;\r\n\t\tlong timer = System.currentTimeMillis();\r\n\t\tint updates = 0;\r\n\t\twhile(isRunning) {\r\n\t\t\tlong now = System.nanoTime();\r\n\t\t\tdelta += (now - lastTime) / ns;\r\n\t\t\tlastTime = now;\r\n\t\t\twhile(delta &gt;= 1) {\r\n\t\t\t\ttick();\r\n\t\t\t\tupdates++;\r\n\t\t\t\tdelta--;\r\n\t\t\t}\r\n\t\t\tif(System.currentTimeMillis() - timer &gt; 1000) {\r\n\t\t\t\ttimer += 1000;\r\n\t\t\t\tSystem.out.println(&quot;FPS: &quot; + frames + &quot; TICKS: &quot; + updates);\r\n\t\t\t\tframes = 0;\r\n\t\t\t\tupdates = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tstop();\r\n\t}\r\n}\r\n```\r\n","title":"How to create a proper tick method in a lib gdx game","body":"<p>I just started with lib gdx and essentially gave up on using lwgjl for making a game as it is ridicoulosy overcomplicated. The problem is that lib gdx has a built in create() method run once at creation and a render() method run as many times as possible. So there is no built in tick method that I can use to update the game at a set time per second. I want to add one.</p>\n<p>In my main class I create a new thread with the tick rate method and it works, but the problem is that I can't utitlize the render() method myself since that is handled already by lib gdx to be called as many times as possible. So I have the thread I create to tick the game and the render method is being run by lib gdx which is I believe run from a second thread. I don't think its a good idea to tick the game and render from different threads as I believe that the rendering could have issues with updating properly since the read write from the same variables in the object classes would be both read in the tick and render and modified in the tick only. Is this maybe a very good idea to do actually if I handle all the variables visible to the object render methods as volatile since they are only read by the thread? Or is this a terrible idea for performance? I am no sure about the set backs and difference of using a lot of volatile variables rather than regular variables. Here is my main class so far:</p>\n<pre><code>public class TanksII extends ApplicationAdapter implements Runnable {\n    \n    SpriteBatch batch;\n    Texture img;\n    \n    private Thread thread;\n    boolean isRunning;\n    volatile int frames;\n    \n    @Override\n    public void create() {\n        batch = new SpriteBatch();\n        img = new Texture(&quot;badlogic.jpg&quot;);\n        \n        start();\n    }\n    private void tick() {\n        \n    }\n    @Override\n    public void render() {\n        ScreenUtils.clear(1, 0, 0, 1);\n        batch.begin();\n        batch.draw(img, 0, 0);\n        batch.end();\n        frames++;\n    }\n    @Override\n    public void dispose() {\n        isRunning = false;\n        batch.dispose();\n        img.dispose();\n    }\n    private synchronized void start() {\n        if (isRunning)\n            return;\n        thread = new Thread(this);\n        thread.start();\n        isRunning = true;\n    }\n    private synchronized void stop() {\n        if (!(isRunning))\n            return;\n        try {\n            thread.join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        isRunning = false;\n    }\n    public void run() {\n        long lastTime = System.nanoTime();\n        double amountOfTicks = 60.0;\n        double ns = 1000000000 / amountOfTicks;\n        double delta = 0;\n        long timer = System.currentTimeMillis();\n        int updates = 0;\n        while(isRunning) {\n            long now = System.nanoTime();\n            delta += (now - lastTime) / ns;\n            lastTime = now;\n            while(delta &gt;= 1) {\n                tick();\n                updates++;\n                delta--;\n            }\n            if(System.currentTimeMillis() - timer &gt; 1000) {\n                timer += 1000;\n                System.out.println(&quot;FPS: &quot; + frames + &quot; TICKS: &quot; + updates);\n                frames = 0;\n                updates = 0;\n            }\n        }\n        stop();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-restcontroller","mockmvc"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1666361315,"post_id":74154746,"comment_id":130925628,"body_markdown":"How exactly are you calling that endpoint in mock mvc? I don&#39;t think this has anything to do with your controller and mapping, but rather with your test code","body":"How exactly are you calling that endpoint in mock mvc? I don&#39;t think this has anything to do with your controller and mapping, but rather with your test code"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1666361602,"post_id":74154746,"comment_id":130925754,"body_markdown":"Why do you have a `charset` on an `octet-stream`?","body":"Why do you have a <code>charset</code> on an <code>octet-stream</code>?"},{"owner":{"account_id":1022944,"reputation":55,"user_id":1032836,"display_name":"user1032836"},"score":0,"creation_date":1666397054,"post_id":74154746,"comment_id":130935100,"body_markdown":"Forgot to mention the test call to original message. Added now. Dont know why mockmvc adds charset there. I didnt ask for that ;)","body":"Forgot to mention the test call to original message. Added now. Dont know why mockmvc adds charset there. I didnt ask for that ;)"}],"answers":[{"tags":[],"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1685725565,"creation_date":1666377049,"answer_id":74157859,"question_id":74154746,"body_markdown":"I have analysed this issue and got to know that issue is in this method.\r\n\r\n```java\r\n  @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE})\r\n    public String parse(RequestEntity&lt;InputStream&gt; entity) {\r\n        return service.parse(entity.getBody());\r\n    }\r\n```\r\n\r\nHere method parameter is of type ```RequestEntity&lt;InputStream&gt;``` it should be ```HttpServletRequest```\r\n\r\nSo here is the fix.\r\n\r\n```java\r\n    @PostMapping(value = &quot;/upload&quot;,\r\n            consumes = MediaType.APPLICATION_OCTET_STREAM_VALUE)\r\n    public String demo(HttpServletRequest httpServletRequest) {\r\n\r\n        try (ServletInputStream inputStream = httpServletRequest.getInputStream()) {\r\n            new BufferedReader(new InputStreamReader(inputStream, UTF_8))\r\n                    .lines().forEach(System.out::println);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        return &quot;Hello World&quot;;\r\n    }\r\n```\r\n\r\n**Test Case**\r\n\r\n```java\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @Test\r\n    public void shouldTestBinaryFileUpload() throws Exception {\r\n        mockMvc\r\n                .perform(MockMvcRequestBuilders\r\n                        .post(&quot;/upload&quot;)\r\n                        .content(&quot;Hello&quot;.getBytes())\r\n                        .contentType(MediaType.APPLICATION_OCTET_STREAM))\r\n                .andExpect(MockMvcResultMatchers\r\n                        .status()\r\n                        .isOk())\r\n                .andExpect(MockMvcResultMatchers\r\n                        .content()\r\n                        .bytes(&quot;Hello World&quot;.getBytes()));\r\n    }\r\n\r\n```\r\n","title":"Cant have RestController to accept application/octet-stream","body":"<p>I have analysed this issue and got to know that issue is in this method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE})\n    public String parse(RequestEntity&lt;InputStream&gt; entity) {\n        return service.parse(entity.getBody());\n    }\n</code></pre>\n<p>Here method parameter is of type <code>RequestEntity&lt;InputStream&gt;</code> it should be <code>HttpServletRequest</code></p>\n<p>So here is the fix.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @PostMapping(value = &quot;/upload&quot;,\n            consumes = MediaType.APPLICATION_OCTET_STREAM_VALUE)\n    public String demo(HttpServletRequest httpServletRequest) {\n\n        try (ServletInputStream inputStream = httpServletRequest.getInputStream()) {\n            new BufferedReader(new InputStreamReader(inputStream, UTF_8))\n                    .lines().forEach(System.out::println);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n        return &quot;Hello World&quot;;\n    }\n</code></pre>\n<p><strong>Test Case</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    public void shouldTestBinaryFileUpload() throws Exception {\n        mockMvc\n                .perform(MockMvcRequestBuilders\n                        .post(&quot;/upload&quot;)\n                        .content(&quot;Hello&quot;.getBytes())\n                        .contentType(MediaType.APPLICATION_OCTET_STREAM))\n                .andExpect(MockMvcResultMatchers\n                        .status()\n                        .isOk())\n                .andExpect(MockMvcResultMatchers\n                        .content()\n                        .bytes(&quot;Hello World&quot;.getBytes()));\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":74193,"reputation":4313,"user_id":213292,"accept_rate":40,"display_name":"JJ Roman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695807078,"creation_date":1695807078,"answer_id":77186245,"question_id":74154746,"body_markdown":"I was getting same error and fixed it by adding ocet stream converter that was missing from mvc config.\r\n\r\n```java\r\n@Configuration\r\npublic class WebMvcConfig implements WebMvcConfigurer { \r\n  @Override \r\n  public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters){\r\n    convertes.add(new ByteArrayHttpMessageConverter());\r\n  }\r\n}\r\n``` ","title":"Cant have RestController to accept application/octet-stream","body":"<p>I was getting same error and fixed it by adding ocet stream converter that was missing from mvc config.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebMvcConfig implements WebMvcConfigurer { \n  @Override \n  public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters){\n    convertes.add(new ByteArrayHttpMessageConverter());\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1022944,"reputation":55,"user_id":1032836,"display_name":"user1032836"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4834,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74157859,"answer_count":2,"score":0,"last_activity_date":1695807078,"creation_date":1666360591,"question_id":74154746,"body_markdown":"I have a spring boot application with rest controller that has to accept binary stream at post endpoint and do the things with it.\r\n\r\nSo i have:\r\n```\r\n    @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE})\r\n    public String parse(RequestEntity&lt;InputStream&gt; entity) {\r\n        return service.parse(entity.getBody());\r\n    }\r\n\r\n```\r\nWhen i try to test it with MockMvc i get org.springframework.web.HttpMediaTypeNotSupportedException.\r\nI see in log:\r\nRequest:\r\n```\r\nMockHttpServletRequest:\r\n      HTTP Method = POST\r\n      Request URI = /parse\r\n       Parameters = {}\r\n          Headers = [Content-Type:&quot;application/octet-stream;charset=UTF-8&quot;, Content-Length:&quot;2449&quot;]\r\n             Body = ...skipped unreadable binary data...\r\n    Session Attrs = {}\r\n\r\n```\r\nResponse:\r\n```\r\nMockHttpServletResponse:\r\n           Status = 415\r\n    Error message = null\r\n          Headers = [Vary:&quot;Origin&quot;, &quot;Access-Control-Request-Method&quot;, &quot;Access-Control-Request-Headers&quot;, Accept:&quot;application/json, application/*+json&quot;, X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;1; mode=block&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\r\n     Content type = null\r\n             Body = \r\n    Forwarded URL = null\r\n   Redirected URL = null\r\n          Cookies = []\r\n```\r\nI tried to add explicit header: \r\n```\r\n    @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE},\r\n            headers = &quot;Accept=application/octet-stream&quot;)\r\n```\r\nDoes not help.\r\nThe testing call is:\r\n```\r\n        mvc.perform(post(&quot;/parse&quot;)                       \r\n                        .contentType(MediaType.APPLICATION_OCTET_STREAM)\r\n                        .content(bytes)\r\n                ).andDo(print())\r\n                .andExpect(status().isOk());\r\n```\r\nHow can i make it work without going to multipart-form?\r\n","title":"Cant have RestController to accept application/octet-stream","body":"<p>I have a spring boot application with rest controller that has to accept binary stream at post endpoint and do the things with it.</p>\n<p>So i have:</p>\n<pre><code>    @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE})\n    public String parse(RequestEntity&lt;InputStream&gt; entity) {\n        return service.parse(entity.getBody());\n    }\n\n</code></pre>\n<p>When i try to test it with MockMvc i get org.springframework.web.HttpMediaTypeNotSupportedException.\nI see in log:\nRequest:</p>\n<pre><code>MockHttpServletRequest:\n      HTTP Method = POST\n      Request URI = /parse\n       Parameters = {}\n          Headers = [Content-Type:&quot;application/octet-stream;charset=UTF-8&quot;, Content-Length:&quot;2449&quot;]\n             Body = ...skipped unreadable binary data...\n    Session Attrs = {}\n\n</code></pre>\n<p>Response:</p>\n<pre><code>MockHttpServletResponse:\n           Status = 415\n    Error message = null\n          Headers = [Vary:&quot;Origin&quot;, &quot;Access-Control-Request-Method&quot;, &quot;Access-Control-Request-Headers&quot;, Accept:&quot;application/json, application/*+json&quot;, X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;1; mode=block&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\n     Content type = null\n             Body = \n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n</code></pre>\n<p>I tried to add explicit header:</p>\n<pre><code>    @PostMapping(path=&quot;/parse&quot;, consumes = {MediaType.APPLICATION_OCTET_STREAM_VALUE},\n            headers = &quot;Accept=application/octet-stream&quot;)\n</code></pre>\n<p>Does not help.\nThe testing call is:</p>\n<pre><code>        mvc.perform(post(&quot;/parse&quot;)                       \n                        .contentType(MediaType.APPLICATION_OCTET_STREAM)\n                        .content(bytes)\n                ).andDo(print())\n                .andExpect(status().isOk());\n</code></pre>\n<p>How can i make it work without going to multipart-form?</p>\n"},{"tags":["java","maven","intellij-idea","build"],"answers":[{"tags":[],"owner":{"account_id":25686844,"reputation":189,"user_id":19448783,"display_name":"HHHHNNNNNNIIIII"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695708972,"creation_date":1695708972,"answer_id":77177411,"question_id":77177292,"body_markdown":"Idea just resolves maven dependencies and compile in its [own way][1]. So if some executions of maven goal is a must for compiling the project, it may cause idea build fail. Maybe you can [run a package jar directly][2] for debug as a workaround. Or figure out what maven goal should be executed.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/compiling-applications.html\r\n  [2]: https://www.jetbrains.com/help/idea/compiling-applications.html#run_packaged_jar","title":"Ask IntelliJ to follow a Maven POM to build the project internally (Build Project, for testing, debugging) and not its own procedure, when it fails?","body":"<p>Idea just resolves maven dependencies and compile in its <a href=\"https://www.jetbrains.com/help/idea/compiling-applications.html\" rel=\"nofollow noreferrer\">own way</a>. So if some executions of maven goal is a must for compiling the project, it may cause idea build fail. Maybe you can <a href=\"https://www.jetbrains.com/help/idea/compiling-applications.html#run_packaged_jar\" rel=\"nofollow noreferrer\">run a package jar directly</a> for debug as a workaround. Or figure out what maven goal should be executed.</p>\n"},{"tags":[],"owner":{"account_id":28411028,"reputation":416,"user_id":21734429,"display_name":"romanv-jb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695806979,"creation_date":1695806979,"answer_id":77186227,"question_id":77177292,"body_markdown":"Options that you have listed are processed by IDEA&#39;s native Build System.\r\nThe native Build System is intended to be as close as possible to Maven, but there might be discrepancies for the Projects with more advanced build logic and/or structure.\r\n\r\n\r\nFor Maven-based Projects it is best to use options available from the [Maven Tool Window][1] and Maven&#39;s [Run/Debug Configurations][2].\r\n\r\nIf you are still experiencing issues, enable &quot;[Delegate IDE build/run actions to Maven][3]&quot; option from `Settings / Preferences -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Maven -&gt; Runner`.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/maven-projects-tool-window.html\r\n  [2]: https://www.jetbrains.com/help/idea/run-debug-configuration-maven.html\r\n  [3]: https://www.jetbrains.com/help/idea/maven-runner.html","title":"Ask IntelliJ to follow a Maven POM to build the project internally (Build Project, for testing, debugging) and not its own procedure, when it fails?","body":"<p>Options that you have listed are processed by IDEA's native Build System.\nThe native Build System is intended to be as close as possible to Maven, but there might be discrepancies for the Projects with more advanced build logic and/or structure.</p>\n<p>For Maven-based Projects it is best to use options available from the <a href=\"https://www.jetbrains.com/help/idea/maven-projects-tool-window.html\" rel=\"nofollow noreferrer\">Maven Tool Window</a> and Maven's <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration-maven.html\" rel=\"nofollow noreferrer\">Run/Debug Configurations</a>.</p>\n<p>If you are still experiencing issues, enable &quot;<a href=\"https://www.jetbrains.com/help/idea/maven-runner.html\" rel=\"nofollow noreferrer\">Delegate IDE build/run actions to Maven</a>&quot; option from <code>Settings / Preferences -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Maven -&gt; Runner</code>.</p>\n"}],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77186227,"answer_count":2,"score":-1,"last_activity_date":1695806979,"creation_date":1695707317,"question_id":77177292,"body_markdown":"At work, at home, on open source projects, I often face the same trouble:\r\n\r\n1. I download a project. I compile it from a command line with _Maven_ and succeed.\r\n\r\n2. I open _IntelliJ_: it detects a _Maven_ project, solve it, and show me its sources without errors.\r\n\r\n3. Then I ask it to _Build Project_. And it fails with a message depicting a trouble that doesn&#39;t exist.  \r\n\r\nThen, I can&#39;t :\r\n\r\n   - Start a debug session\r\n   - Run a single test or test class from the IDE\r\n\r\nBecause _IntelliJ_ wants to build the project its own way first, but is failing to do so.\r\n\r\nHow to set _IntelliJ_ to use only _Maven_ and a specified pom to build/refresh the project, when it needs so? And not to attempt another way, that doesn&#39;t succeed?\r\n\r\n---\r\n\r\n(*) The project I&#39;m attempting to build with the _Build Project_ of _IntelliJ_ is https://github.com/apache/spark/tree/branch-3.5 that compiles with _Maven_ in a command line, is shown without errors when opened with _IntelliJ_, and fail to build with _Build Project_:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBecause it attempts to do anything that isn&#39;t asked in any pom.  \r\nThe mentioned `import` does exist, of course.\r\n\r\n---\r\n\r\nTo reproduce: \r\n\r\n1. Download https://github.com/apache/spark/tree/branch-3.5\r\n2. Compile it with _Maven_: it compiles (skip tests, if you wish to go faster)\r\n3. Then, with _IntelliJ_, attempt a _Build Project_ or to run a test, or to start a debug. It will fail.\r\n\r\n  [1]: https://i.stack.imgur.com/kza4R.png","title":"Ask IntelliJ to follow a Maven POM to build the project internally (Build Project, for testing, debugging) and not its own procedure, when it fails?","body":"<p>At work, at home, on open source projects, I often face the same trouble:</p>\n<ol>\n<li><p>I download a project. I compile it from a command line with <em>Maven</em> and succeed.</p>\n</li>\n<li><p>I open <em>IntelliJ</em>: it detects a <em>Maven</em> project, solve it, and show me its sources without errors.</p>\n</li>\n<li><p>Then I ask it to <em>Build Project</em>. And it fails with a message depicting a trouble that doesn't exist.</p>\n</li>\n</ol>\n<p>Then, I can't :</p>\n<ul>\n<li>Start a debug session</li>\n<li>Run a single test or test class from the IDE</li>\n</ul>\n<p>Because <em>IntelliJ</em> wants to build the project its own way first, but is failing to do so.</p>\n<p>How to set <em>IntelliJ</em> to use only <em>Maven</em> and a specified pom to build/refresh the project, when it needs so? And not to attempt another way, that doesn't succeed?</p>\n<hr />\n<p>(*) The project I'm attempting to build with the <em>Build Project</em> of <em>IntelliJ</em> is <a href=\"https://github.com/apache/spark/tree/branch-3.5\" rel=\"nofollow noreferrer\">https://github.com/apache/spark/tree/branch-3.5</a> that compiles with <em>Maven</em> in a command line, is shown without errors when opened with <em>IntelliJ</em>, and fail to build with <em>Build Project</em>:</p>\n<p><a href=\"https://i.stack.imgur.com/kza4R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kza4R.png\" alt=\"enter image description here\" /></a></p>\n<p>Because it attempts to do anything that isn't asked in any pom.<br />\nThe mentioned <code>import</code> does exist, of course.</p>\n<hr />\n<p>To reproduce:</p>\n<ol>\n<li>Download <a href=\"https://github.com/apache/spark/tree/branch-3.5\" rel=\"nofollow noreferrer\">https://github.com/apache/spark/tree/branch-3.5</a></li>\n<li>Compile it with <em>Maven</em>: it compiles (skip tests, if you wish to go faster)</li>\n<li>Then, with <em>IntelliJ</em>, attempt a <em>Build Project</em> or to run a test, or to start a debug. It will fail.</li>\n</ol>\n"},{"tags":["java","spring-boot","kotlin","karate"],"owner":{"account_id":9744856,"reputation":985,"user_id":7225171,"accept_rate":67,"display_name":"Serob_b"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1695704231,"answer_count":0,"score":1,"last_activity_date":1695806154,"creation_date":1695659382,"question_id":77174339,"body_markdown":"I&#39;m running 2 separate tests each of which with its feature files (suppose I have another `run2()` method with the same settings except `&quot;features-dir&quot;`):\r\n  \r\n    @Test\r\n    fun run1() {\r\n        val reportDir = &quot;build/report-dir&quot;\r\n        val results: Results = Runner\r\n            .path(&quot;features-dir&quot;)\r\n            .debugMode(true)\r\n            .outputCucumberJson(true)\r\n            .reportDir(reportDir)\r\n             ....\r\n            .parallel(1)\r\n    }\r\n\r\nWhen I run all the test (`run1()` and `run2()`) I get the report of the last run only, the first one is lost due to overwrite. What I need is to have one report with the information (features) of two runs. Is that possible?","title":"One karate report for all tests","body":"<p>I'm running 2 separate tests each of which with its feature files (suppose I have another <code>run2()</code> method with the same settings except <code>&quot;features-dir&quot;</code>):</p>\n<pre><code>@Test\nfun run1() {\n    val reportDir = &quot;build/report-dir&quot;\n    val results: Results = Runner\n        .path(&quot;features-dir&quot;)\n        .debugMode(true)\n        .outputCucumberJson(true)\n        .reportDir(reportDir)\n         ....\n        .parallel(1)\n}\n</code></pre>\n<p>When I run all the test (<code>run1()</code> and <code>run2()</code>) I get the report of the last run only, the first one is lost due to overwrite. What I need is to have one report with the information (features) of two runs. Is that possible?</p>\n"},{"tags":["java","spring","spring-boot","ehcache","ehcache-3"],"answers":[{"tags":[],"owner":{"account_id":13022992,"reputation":204,"user_id":9411757,"display_name":"tehmas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695388041,"creation_date":1695388041,"answer_id":77157886,"question_id":77157770,"body_markdown":"The problem was ConfigManager needs to be a @Component and should be injected into ServiceFacadeImpl.\r\n\r\nConfigManager:\r\n\r\n    package com.demo.example.ehcache;\r\n    \r\n    import org.springframework.cache.annotation.Cacheable;\r\n    \r\n    @Component\r\n    public class ConfigManager {\r\n        public ConfigManager() {\r\n        }\r\n    \r\n        @Cacheable(value = &quot;configCache&quot;, key=&quot;#number&quot;)\r\n        public int getNumber(int number) {\r\n            return number;\r\n        }\r\n    }\r\n\r\nServiceFacadeImpl:\r\n\r\n    @Component\r\n    public class ServiceFacadeImpl { \r\n      private final ConfigManager ConfigManager;\r\n    \r\n      ServiceFacadeImpl(ConfigManager configManager)\r\n      {\r\n        this.ConfigManager = configManager;\r\n      }\r\n     \r\n      @Override\r\n      public Integer getNumber() throws UpfrontException {\r\n        configManager.getNumber(1); //hard coded 1 here\r\n      }\r\n    }\r\n\r\n","title":"ehcache 3 not working with Sprint Boot 1.5.22","body":"<p>The problem was ConfigManager needs to be a @Component and should be injected into ServiceFacadeImpl.</p>\n<p>ConfigManager:</p>\n<pre><code>package com.demo.example.ehcache;\n\nimport org.springframework.cache.annotation.Cacheable;\n\n@Component\npublic class ConfigManager {\n    public ConfigManager() {\n    }\n\n    @Cacheable(value = &quot;configCache&quot;, key=&quot;#number&quot;)\n    public int getNumber(int number) {\n        return number;\n    }\n}\n</code></pre>\n<p>ServiceFacadeImpl:</p>\n<pre><code>@Component\npublic class ServiceFacadeImpl { \n  private final ConfigManager ConfigManager;\n\n  ServiceFacadeImpl(ConfigManager configManager)\n  {\n    this.ConfigManager = configManager;\n  }\n \n  @Override\n  public Integer getNumber() throws UpfrontException {\n    configManager.getNumber(1); //hard coded 1 here\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":13022992,"reputation":204,"user_id":9411757,"display_name":"tehmas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695805899,"creation_date":1695387047,"question_id":77157770,"body_markdown":"I&#39;m new to Java and SpringBoot.\r\n\r\nehcache.xml file in `resources`:\r\n\r\n    &lt;config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n            xmlns=&quot;http://www.ehcache.org/v3&quot;\r\n            xmlns:jsr107=&quot;http://www.ehcache.org/v3/jsr107&quot;\r\n            xsi:schemaLocation=&quot;\r\n                http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd\r\n                http://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.0.xsd&quot;&gt;\r\n    \r\n        &lt;cache alias=&quot;configCache&quot;&gt;\r\n            &lt;key-type&gt;java.lang.Integer&lt;/key-type&gt;\r\n            &lt;value-type&gt;java.lang.Integer&lt;/value-type&gt;\r\n            &lt;expiry&gt;\r\n                &lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;\r\n            &lt;/expiry&gt;\r\n    \r\n            &lt;listeners&gt;\r\n                &lt;listener&gt;\r\n                    &lt;class&gt;com.demo.example.ehcache.CacheEventLogger&lt;/class&gt;\r\n                    &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;\r\n                    &lt;event-ordering-mode&gt;UNORDERED&lt;/event-ordering-mode&gt;\r\n                    &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;\r\n                    &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;\r\n                &lt;/listener&gt;\r\n            &lt;/listeners&gt;\r\n    \r\n            &lt;resources&gt;\r\n                &lt;heap unit=&quot;entries&quot;&gt;2&lt;/heap&gt;\r\n                &lt;offheap unit=&quot;MB&quot;&gt;10&lt;/offheap&gt;\r\n            &lt;/resources&gt;\r\n        &lt;/cache&gt;\r\n    \r\n    &lt;/config&gt;\r\n\r\nThe following line in `application.properties`:\r\n\r\n    spring.cache.jcache.config=classpath:ehcache.xml\r\n\r\nCacheEventLogger:\r\n\r\n    package com.demo.example.ehcache;\r\n    \r\n    import com.github.structlog4j.ILogger;\r\n    import com.github.structlog4j.SLoggerFactory;\r\n    import org.ehcache.event.CacheEvent;\r\n    import org.ehcache.event.CacheEventListener;\r\n    \r\n    public class CacheEventLogger implements CacheEventListener&lt;Object, Object&gt; {\r\n        private final ILogger log = SLoggerFactory.getLogger(CacheEventLogger.class);\r\n    \r\n        @Override\r\n        public void onEvent(CacheEvent&lt;? extends Object, ? extends Object&gt; cacheEvent) {\r\n            log.info(&quot;Cache event {} for item with key {}. Old value = {}, New value = {}&quot;,\r\n                    cacheEvent.getType(),\r\n                    cacheEvent.getKey(),\r\n                    cacheEvent.getOldValue(),\r\n                    cacheEvent.getNewValue());\r\n        }\r\n    }\r\n\r\nConfigManager.Java:\r\n\r\n    package com.demo.example.ehcache;\r\n    \r\n    import org.springframework.cache.annotation.Cacheable;\r\n    \r\n    public class ConfigManager {\r\n        public ConfigManager() {\r\n        }\r\n    \r\n        @Cacheable(value = &quot;configCache&quot;, key=&quot;#number&quot;)\r\n        public int getNumber(int number) {\r\n            return number;\r\n        }\r\n    }\r\n\r\nCachingConfig.java:\r\n\r\n    package com.demo.example.configuration;\r\n    \r\n    import org.springframework.cache.annotation.EnableCaching;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    \r\n    @Configuration\r\n    @EnableCaching\r\n    public class CachingConfig {\r\n    \r\n    }\r\n\r\nfollowing dependencies in pom.xml:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.cache&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cache-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nServiceFacadeImpl.java:\r\n\r\n    @Component\r\n    public class ServiceFacadeImpl { \r\n      private final ConfigManager ConfigManager;\r\n    \r\n      ServiceFacadeImpl()\r\n      {\r\n        this.ConfigManager = new ConfigManager();\r\n      }\r\n     \r\n      @Override\r\n      public Integer getNumber() throws UpfrontException {\r\n        configManager.getNumber(1); //hard coded 1 here\r\n      }\r\n    }\r\n\r\nI&#39;m always passing a fixed Integer value of 1 in getNumber but it is always executing the function. Why isn&#39;t the cache working?","title":"ehcache 3 not working with Sprint Boot 1.5.22","body":"<p>I'm new to Java and SpringBoot.</p>\n<p>ehcache.xml file in <code>resources</code>:</p>\n<pre><code>&lt;config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xmlns=&quot;http://www.ehcache.org/v3&quot;\n        xmlns:jsr107=&quot;http://www.ehcache.org/v3/jsr107&quot;\n        xsi:schemaLocation=&quot;\n            http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd\n            http://www.ehcache.org/v3/jsr107 http://www.ehcache.org/schema/ehcache-107-ext-3.0.xsd&quot;&gt;\n\n    &lt;cache alias=&quot;configCache&quot;&gt;\n        &lt;key-type&gt;java.lang.Integer&lt;/key-type&gt;\n        &lt;value-type&gt;java.lang.Integer&lt;/value-type&gt;\n        &lt;expiry&gt;\n            &lt;ttl unit=&quot;minutes&quot;&gt;60&lt;/ttl&gt;\n        &lt;/expiry&gt;\n\n        &lt;listeners&gt;\n            &lt;listener&gt;\n                &lt;class&gt;com.demo.example.ehcache.CacheEventLogger&lt;/class&gt;\n                &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;\n                &lt;event-ordering-mode&gt;UNORDERED&lt;/event-ordering-mode&gt;\n                &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;\n                &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;\n            &lt;/listener&gt;\n        &lt;/listeners&gt;\n\n        &lt;resources&gt;\n            &lt;heap unit=&quot;entries&quot;&gt;2&lt;/heap&gt;\n            &lt;offheap unit=&quot;MB&quot;&gt;10&lt;/offheap&gt;\n        &lt;/resources&gt;\n    &lt;/cache&gt;\n\n&lt;/config&gt;\n</code></pre>\n<p>The following line in <code>application.properties</code>:</p>\n<pre><code>spring.cache.jcache.config=classpath:ehcache.xml\n</code></pre>\n<p>CacheEventLogger:</p>\n<pre><code>package com.demo.example.ehcache;\n\nimport com.github.structlog4j.ILogger;\nimport com.github.structlog4j.SLoggerFactory;\nimport org.ehcache.event.CacheEvent;\nimport org.ehcache.event.CacheEventListener;\n\npublic class CacheEventLogger implements CacheEventListener&lt;Object, Object&gt; {\n    private final ILogger log = SLoggerFactory.getLogger(CacheEventLogger.class);\n\n    @Override\n    public void onEvent(CacheEvent&lt;? extends Object, ? extends Object&gt; cacheEvent) {\n        log.info(&quot;Cache event {} for item with key {}. Old value = {}, New value = {}&quot;,\n                cacheEvent.getType(),\n                cacheEvent.getKey(),\n                cacheEvent.getOldValue(),\n                cacheEvent.getNewValue());\n    }\n}\n</code></pre>\n<p>ConfigManager.Java:</p>\n<pre><code>package com.demo.example.ehcache;\n\nimport org.springframework.cache.annotation.Cacheable;\n\npublic class ConfigManager {\n    public ConfigManager() {\n    }\n\n    @Cacheable(value = &quot;configCache&quot;, key=&quot;#number&quot;)\n    public int getNumber(int number) {\n        return number;\n    }\n}\n</code></pre>\n<p>CachingConfig.java:</p>\n<pre><code>package com.demo.example.configuration;\n\nimport org.springframework.cache.annotation.EnableCaching;\nimport org.springframework.context.annotation.Configuration;\n\n\n@Configuration\n@EnableCaching\npublic class CachingConfig {\n\n}\n</code></pre>\n<p>following dependencies in pom.xml:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\n        &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.cache&lt;/groupId&gt;\n        &lt;artifactId&gt;cache-api&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>ServiceFacadeImpl.java:</p>\n<pre><code>@Component\npublic class ServiceFacadeImpl { \n  private final ConfigManager ConfigManager;\n\n  ServiceFacadeImpl()\n  {\n    this.ConfigManager = new ConfigManager();\n  }\n \n  @Override\n  public Integer getNumber() throws UpfrontException {\n    configManager.getNumber(1); //hard coded 1 here\n  }\n}\n</code></pre>\n<p>I'm always passing a fixed Integer value of 1 in getNumber but it is always executing the function. Why isn't the cache working?</p>\n"},{"tags":["java","json","jmeter","assertion"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669144532,"creation_date":1669144532,"answer_id":74537909,"question_id":74536638,"body_markdown":"It&#39;s a side-effect of the bug fix for the JMeter Issue [5543][1], you might want to [report it][2] \r\n\r\nLooking into [this line][3]:\r\n\r\n    Object expected = JSONValue.parse(getExpectedValue());\r\n\r\nthere is no possibility to revert to the previous behaviour via property. You might want to tick &quot;Match as regular expression&quot; box:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nhowever it might break more complex assertions especially if they contain [meta characters][5] \r\n\r\nSo you either need to downgrade and wait for the decision or scan assertion failure messages using [JSR223 Assertion and Groovy language][6] and set the assertion result as passed if &quot;expected&quot; and &quot;found&quot; values are equal \r\n\r\n\r\n  [1]: https://github.com/apache/jmeter/issues/5534\r\n  [2]: https://jmeter.apache.org/issues.html\r\n  [3]: https://github.com/apache/jmeter/blob/rel/v5.5/src/components/src/main/java/org/apache/jmeter/assertions/JSONPathAssertion.java#L177\r\n  [4]: https://i.stack.imgur.com/cr2ND.png\r\n  [5]: https://jmeter.apache.org/usermanual/regular_expressions.html#meta_chars\r\n  [6]: https://www.blazemeter.com/blog/apache-groovy","title":"Jmeter 5.5 error with assertion value type, string not equal to int","body":"<p>It's a side-effect of the bug fix for the JMeter Issue <a href=\"https://github.com/apache/jmeter/issues/5534\" rel=\"nofollow noreferrer\">5543</a>, you might want to <a href=\"https://jmeter.apache.org/issues.html\" rel=\"nofollow noreferrer\">report it</a></p>\n<p>Looking into <a href=\"https://github.com/apache/jmeter/blob/rel/v5.5/src/components/src/main/java/org/apache/jmeter/assertions/JSONPathAssertion.java#L177\" rel=\"nofollow noreferrer\">this line</a>:</p>\n<pre><code>Object expected = JSONValue.parse(getExpectedValue());\n</code></pre>\n<p>there is no possibility to revert to the previous behaviour via property. You might want to tick &quot;Match as regular expression&quot; box:</p>\n<p><a href=\"https://i.stack.imgur.com/cr2ND.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cr2ND.png\" alt=\"enter image description here\" /></a></p>\n<p>however it might break more complex assertions especially if they contain <a href=\"https://jmeter.apache.org/usermanual/regular_expressions.html#meta_chars\" rel=\"nofollow noreferrer\">meta characters</a></p>\n<p>So you either need to downgrade and wait for the decision or scan assertion failure messages using <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">JSR223 Assertion and Groovy language</a> and set the assertion result as passed if &quot;expected&quot; and &quot;found&quot; values are equal</p>\n"},{"tags":[],"owner":{"account_id":3572712,"reputation":13,"user_id":2982672,"display_name":"aakraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695805875,"creation_date":1695805875,"answer_id":77186092,"question_id":74536638,"body_markdown":"I was facing the same issue with jmeter version &gt; 5.5. Setting the expected value as &quot;8&quot; fixed it. \r\nBasically, if expected value is of type string, it must be enclosed in double-quotes, specially numeric values.","title":"Jmeter 5.5 error with assertion value type, string not equal to int","body":"<p>I was facing the same issue with jmeter version &gt; 5.5. Setting the expected value as &quot;8&quot; fixed it.\nBasically, if expected value is of type string, it must be enclosed in double-quotes, specially numeric values.</p>\n"}],"owner":{"account_id":8757810,"reputation":3,"user_id":6548801,"display_name":"Ivan Chacon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74537909,"answer_count":2,"score":0,"last_activity_date":1695805875,"creation_date":1669137382,"question_id":74536638,"body_markdown":"I have a test that used to work perfect in jmeter 5.4.1. Then I upgraded to jmeter 5.5 recently and all JSON assertions stopped working.\r\n\r\nthis is the message I get from all JSON assertions :\r\n\r\nAssertion failure message:Value expected to be &#39;8&#39;, but found &#39;8&#39;\r\n\r\nthe value is the same, but I realized that now it checks the type (string != number), but in previous versions, it used to work.\r\n\r\nthis is my Json assert :&lt;br/&gt;\r\n[![enter image description here][1]][1]\r\n\r\n\r\nAnd this is an example of the JSON response :\r\n\r\n    {\r\n      &quot;person&quot;: {\r\n        &quot;age&quot;: &quot;8&quot;\r\n      }\r\n    }\r\n\r\nAnyone knows how to disable the type check or how to make it works like previous versions?\r\n\r\n\r\n\r\nIf I change the JSON assertion value like this, it works :\r\n\r\n\r\n[![\\[enter image description here\\](https://i.stack.imgur.com/98GKg.png)][2]][2]\r\n\r\nThe problem is that I have a lot of tests, and it&#39;s better for me to find a different solution, like enable/disable a parameter, or something like that.\r\n\r\nThanks !\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zY2iF.png\r\n  [2]: https://i.stack.imgur.com/RGkID.png","title":"Jmeter 5.5 error with assertion value type, string not equal to int","body":"<p>I have a test that used to work perfect in jmeter 5.4.1. Then I upgraded to jmeter 5.5 recently and all JSON assertions stopped working.</p>\n<p>this is the message I get from all JSON assertions :</p>\n<p>Assertion failure message:Value expected to be '8', but found '8'</p>\n<p>the value is the same, but I realized that now it checks the type (string != number), but in previous versions, it used to work.</p>\n<p>this is my Json assert :<br/>\n<a href=\"https://i.stack.imgur.com/zY2iF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zY2iF.png\" alt=\"enter image description here\" /></a></p>\n<p>And this is an example of the JSON response :</p>\n<pre><code>{\n  &quot;person&quot;: {\n    &quot;age&quot;: &quot;8&quot;\n  }\n}\n</code></pre>\n<p>Anyone knows how to disable the type check or how to make it works like previous versions?</p>\n<p>If I change the JSON assertion value like this, it works :</p>\n<p><a href=\"https://i.stack.imgur.com/RGkID.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RGkID.png\" alt=\"[enter image description here](https://i.stack.imgur.com/98GKg.png)\" /></a></p>\n<p>The problem is that I have a lot of tests, and it's better for me to find a different solution, like enable/disable a parameter, or something like that.</p>\n<p>Thanks !</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1517307077,"post_id":48518762,"comment_id":84032184,"body_markdown":"Are you running a Maven project?  You need to make sure those resource files make it to your classpath.","body":"Are you running a Maven project?  You need to make sure those resource files make it to your classpath."},{"owner":{"account_id":3794041,"reputation":15633,"user_id":3154233,"accept_rate":88,"display_name":"NoobEditor"},"score":0,"creation_date":1517307313,"post_id":48518762,"comment_id":84032335,"body_markdown":"is moving `/tmp/resources` into your project `resources` not an option?","body":"is moving <code>&#47;tmp&#47;resources</code> into your project <code>resources</code> not an option?"},{"owner":{"account_id":4294753,"reputation":965,"user_id":3510108,"accept_rate":75,"display_name":"kensuke1984"},"score":0,"creation_date":1517307631,"post_id":48518762,"comment_id":84032511,"body_markdown":"The project is governed by Gradle. and I realized that even if I  rebuild, files in the added resource folder will not move or be copied to a bin path which is loaded when I run Java.\n@NoobEditor yes I temporarily do it thank you. but if there is another way... I would follow...","body":"The project is governed by Gradle. and I realized that even if I  rebuild, files in the added resource folder will not move or be copied to a bin path which is loaded when I run Java. @NoobEditor yes I temporarily do it thank you. but if there is another way... I would follow..."},{"owner":{"account_id":190568,"reputation":601,"user_id":1873036,"display_name":"olikaf"},"score":0,"creation_date":1517307632,"post_id":48518762,"comment_id":84032514,"body_markdown":"As far as I know, such folders must be under the main folder.\nMaybe you can use symbolic link.","body":"As far as I know, such folders must be under the main folder. Maybe you can use symbolic link."}],"answers":[{"tags":[],"owner":{"account_id":190568,"reputation":601,"user_id":1873036,"display_name":"olikaf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517390866,"creation_date":1517308825,"answer_id":48519394,"question_id":48518762,"body_markdown":"I tried and it works.\r\n\r\nIn build.gradle :\r\n\r\n    sourceSets {\r\n        main {\r\n            resources {\r\n                srcDir &#39;/tmp/resources&#39;\r\n            }\r\n        }\r\n    }\r\n\r\nIt is recognized by Intellij \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI added an image in this folder, and it is included in the final jar .\r\n\r\nEDIT : Add some pics to answer a comment\r\n\r\nAbout seeing files under /tmp : \r\n\r\nWell it depends of the view used to display the project.\r\nThe **production** is fine.\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nOther views are differents, like the **project** one : It displays everything.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mwwi3.png\r\n  [2]: https://i.stack.imgur.com/aN5hV.png\r\n  [3]: https://i.stack.imgur.com/1Xxd2.png","title":"Adding a resource folder in intellij","body":"<p>I tried and it works.</p>\n\n<p>In build.gradle :</p>\n\n<pre><code>sourceSets {\n    main {\n        resources {\n            srcDir '/tmp/resources'\n        }\n    }\n}\n</code></pre>\n\n<p>It is recognized by Intellij </p>\n\n<p><a href=\"https://i.stack.imgur.com/mwwi3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mwwi3.png\" alt=\"enter image description here\"></a></p>\n\n<p>I added an image in this folder, and it is included in the final jar .</p>\n\n<p>EDIT : Add some pics to answer a comment</p>\n\n<p>About seeing files under /tmp : </p>\n\n<p>Well it depends of the view used to display the project.\nThe <strong>production</strong> is fine.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aN5hV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aN5hV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Other views are differents, like the <strong>project</strong> one : It displays everything.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1Xxd2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Xxd2.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":4294753,"reputation":965,"user_id":3510108,"accept_rate":75,"display_name":"kensuke1984"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695805485,"creation_date":1517306946,"question_id":48518762,"body_markdown":"I want to add a folder as a resource folder in an IntelliJ IDEA project  (Java).\r\n\r\nIn project settings - Modules - ProjectName_main, I put a folder as a resource folder. However I can&#39;t reach a file in the folder.\r\n\r\nGeneral paths are like below.\r\n\r\n\r\n    LocalProject\r\n        | - src\r\n             | - main\r\n                   | - java\r\n                   | - resources\r\n\r\n\r\n\r\nand adding a folder, say, ```/tmp/resources```\r\n\r\nSuppose I put a tmp.txt and main.txt in the folders in ```/tmp/resources``` and ```LocalProject/src/main/resources```, respectively, and have a class ```Hoge```, ```Hoge.class.getClass().getResourceAsStream(&quot;main.txt&quot;)``` works but doesn&#39;t work on the other file.....\r\n\r\nHow can I fix it?","title":"Adding a resource folder in intellij","body":"<p>I want to add a folder as a resource folder in an IntelliJ IDEA project  (Java).</p>\n\n<p>In project settings - Modules - ProjectName_main, I put a folder as a resource folder. However I can't reach a file in the folder.</p>\n\n<p>General paths are like below.</p>\n\n<pre><code>LocalProject\n    | - src\n         | - main\n               | - java\n               | - resources\n</code></pre>\n\n<p>and adding a folder, say, <code>/tmp/resources</code></p>\n\n<p>Suppose I put a tmp.txt and main.txt in the folders in <code>/tmp/resources</code> and <code>LocalProject/src/main/resources</code>, respectively, and have a class <code>Hoge</code>, <code>Hoge.class.getClass().getResourceAsStream(\"main.txt\")</code> works but doesn't work on the other file.....</p>\n\n<p>How can I fix it?</p>\n"},{"tags":["java","dns","inetaddress","nslookup"],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1346696074,"creation_date":1346696074,"answer_id":12252445,"question_id":12252387,"body_markdown":"Your computer may not be configured to use DNS by default, even if it is available on demand.\r\n\r\nI would try\r\n\r\n    ping 82.117.193.169\r\n\r\nand see whether it resolves the IP address into a hostname.","title":"Different results between nslookup and Java&#39;s InetAddress getHostName","body":"<p>Your computer may not be configured to use DNS by default, even if it is available on demand.</p>\n\n<p>I would try</p>\n\n<pre><code>ping 82.117.193.169\n</code></pre>\n\n<p>and see whether it resolves the IP address into a hostname.</p>\n"},{"tags":[],"owner":{"account_id":1741891,"reputation":887,"user_id":1593058,"accept_rate":61,"display_name":"BUKTOP"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1491278255,"creation_date":1491278255,"answer_id":43197927,"question_id":12252387,"body_markdown":"It is due to the &quot;A&quot; record check - Java wants that IP number you&#39;re looking up, was listed there. They call it &quot;XXX&quot; and I understand why:\r\n\r\n    private static String getHostFromNameService(InetAddress addr, boolean check) {\r\n    String host = null;\r\n    for (NameService nameService : nameServices) {\r\n        try {\r\n            // first lookup the hostname\r\n            host = nameService.getHostByAddr(addr.getAddress());\r\n    \r\n            /* check to see if calling code is allowed to know\r\n             * the hostname for this IP address, ie, connect to the host\r\n             */\r\n            if (check) {\r\n                SecurityManager sec = System.getSecurityManager();\r\n                if (sec != null) {\r\n                    sec.checkConnect(host, -1);\r\n                }\r\n            }\r\n    \r\n            /* now get all the IP addresses for this hostname,\r\n             * and make sure one of them matches the original IP\r\n             * address. We do this to try and prevent spoofing.\r\n             */\r\n    \r\n            InetAddress[] arr = InetAddress.getAllByName0(host, check);\r\n            boolean ok = false;\r\n    \r\n            if(arr != null) {\r\n                for(int i = 0; !ok &amp;&amp; i &lt; arr.length; i++) {\r\n                    ok = addr.equals(arr[i]);\r\n                }\r\n            }\r\n    \r\n            //XXX: if it looks a spoof just return the address?\r\n            if (!ok) {\r\n                host = addr.getHostAddress();\r\n                return host;\r\n            }\r\n    \r\n            break;\r\n\r\n","title":"Different results between nslookup and Java&#39;s InetAddress getHostName","body":"<p>It is due to the \"A\" record check - Java wants that IP number you're looking up, was listed there. They call it \"XXX\" and I understand why:</p>\n\n<pre><code>private static String getHostFromNameService(InetAddress addr, boolean check) {\nString host = null;\nfor (NameService nameService : nameServices) {\n    try {\n        // first lookup the hostname\n        host = nameService.getHostByAddr(addr.getAddress());\n\n        /* check to see if calling code is allowed to know\n         * the hostname for this IP address, ie, connect to the host\n         */\n        if (check) {\n            SecurityManager sec = System.getSecurityManager();\n            if (sec != null) {\n                sec.checkConnect(host, -1);\n            }\n        }\n\n        /* now get all the IP addresses for this hostname,\n         * and make sure one of them matches the original IP\n         * address. We do this to try and prevent spoofing.\n         */\n\n        InetAddress[] arr = InetAddress.getAllByName0(host, check);\n        boolean ok = false;\n\n        if(arr != null) {\n            for(int i = 0; !ok &amp;&amp; i &lt; arr.length; i++) {\n                ok = addr.equals(arr[i]);\n            }\n        }\n\n        //XXX: if it looks a spoof just return the address?\n        if (!ok) {\n            host = addr.getHostAddress();\n            return host;\n        }\n\n        break;\n</code></pre>\n"}],"owner":{"account_id":95521,"reputation":2731,"user_id":260108,"accept_rate":76,"display_name":"Vasilis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10761,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695805485,"creation_date":1346695725,"question_id":12252387,"body_markdown":"I&#39;m trying to write a simple java program that will return the dns names of ip addresses which I do using the following code:\r\n\r\n\r\n    InetAddress host = InetAddress.getByName(ip);\r\n    String dnsName = host.getHostName();\r\n\r\nWhen a dns name is registered getHostName() returns this name and when there is no existent dns name the ip address is returned.\r\n\r\nFor many addresses the above code doesn&#39;t return any while the nslookup command returns.\r\n\r\nFor example, for the address 82.117.193.169 nslookup returns **peer-AS31042.sbb.rs** while getHostName() returns only the address. This doesn&#39;t happen for all the addresses but for a large number of cases.\r\n\r\n","title":"Different results between nslookup and Java&#39;s InetAddress getHostName","body":"<p>I'm trying to write a simple java program that will return the dns names of ip addresses which I do using the following code:</p>\n\n<pre><code>InetAddress host = InetAddress.getByName(ip);\nString dnsName = host.getHostName();\n</code></pre>\n\n<p>When a dns name is registered getHostName() returns this name and when there is no existent dns name the ip address is returned.</p>\n\n<p>For many addresses the above code doesn't return any while the nslookup command returns.</p>\n\n<p>For example, for the address 82.117.193.169 nslookup returns <strong>peer-AS31042.sbb.rs</strong> while getHostName() returns only the address. This doesn't happen for all the addresses but for a large number of cases.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"score":0,"creation_date":1695810539,"post_id":77185998,"comment_id":136073048,"body_markdown":"Please check whether your JAR is correctly bound to your Maven project. In Eclipse you would go to `Package View &gt; Maven Dependencies`. There you can check whether the JAR contains the expected class, too.","body":"Please check whether your JAR is correctly bound to your Maven project. In Eclipse you would go to <code>Package View &gt; Maven Dependencies</code>. There you can check whether the JAR contains the expected class, too."},{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695811784,"post_id":77185998,"comment_id":136073269,"body_markdown":"@PaulSchimmer just as a sanity check, `jar tvf ~/.m2/repository/com/org/services/spkservice/SPKClient-1.0.jar` (fix the path so that it is pointing at the jar itself) - does like `com/org/services/spkservice/SomeClassInThere.class` right? Let&#39;s eliminate &#39;the SPKService jar is broken&#39; as a cause.","body":"@PaulSchimmer just as a sanity check, <code>jar tvf ~&#47;.m2&#47;repository&#47;com&#47;org&#47;services&#47;spkservice&#47;SPKClient-1.0.j&zwnj;&#8203;ar</code> (fix the path so that it is pointing at the jar itself) - does like <code>com&#47;org&#47;services&#47;spkservice&#47;SomeClassInThere.class</code> right? Let&#39;s eliminate &#39;the SPKService jar is broken&#39; as a cause."}],"owner":{"account_id":9563856,"reputation":173,"user_id":7103753,"accept_rate":61,"display_name":"Paul Schimmer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695805223,"creation_date":1695805223,"question_id":77185998,"body_markdown":"I want to import a local jar SPK-1.0.jar built on Java 1.8 into the maven project using java 17.\r\nI am using maven-install-plugin. I changed the parent pom and module pom as below:\r\n\r\n\r\nParent pom\r\n\r\n```\r\n&lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                      &lt;execution&gt;\r\n                            &lt;id&gt;local-spk-sdk&lt;/id&gt;\r\n                            &lt;phase&gt;clean&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;install-file&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;file&gt;${project.main.basedir}/lib/SPK-1.0.jar&lt;/file&gt;\r\n                          &lt;groupId&gt;com.org.services.spkservice&lt;/groupId&gt;\r\n                          &lt;artifactId&gt;SPKClient&lt;/artifactId&gt;\r\n                                &lt;version&gt;1.0&lt;/version&gt;\r\n                                &lt;packaging&gt;jar&lt;/packaging&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n```\r\n\r\nModule pom dependency\r\n\r\n```\r\n&lt;dependency&gt;\r\n      &lt;groupId&gt;com.org.services.spkservice&lt;/groupId&gt;\r\n      &lt;artifactId&gt;SPKClient&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nI verified the path in local m2 and can confirm that the jar is present in `~/.m2/repository/com/org/services/spkservice` location\r\n\r\nWhen I try to import the class with logic into my java file I get this error:\r\n \r\n\r\n     package com.org.services.spkservice does not exist \r\n\r\nDoes anyone know what might be missing here?","title":"Importing local jar of different java version in a maven project","body":"<p>I want to import a local jar SPK-1.0.jar built on Java 1.8 into the maven project using java 17.\nI am using maven-install-plugin. I changed the parent pom and module pom as below:</p>\n<p>Parent pom</p>\n<pre><code>&lt;plugin&gt;\n                    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n                    &lt;executions&gt;\n                      &lt;execution&gt;\n                            &lt;id&gt;local-spk-sdk&lt;/id&gt;\n                            &lt;phase&gt;clean&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;install-file&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;configuration&gt;\n                                &lt;file&gt;${project.main.basedir}/lib/SPK-1.0.jar&lt;/file&gt;\n                          &lt;groupId&gt;com.org.services.spkservice&lt;/groupId&gt;\n                          &lt;artifactId&gt;SPKClient&lt;/artifactId&gt;\n                                &lt;version&gt;1.0&lt;/version&gt;\n                                &lt;packaging&gt;jar&lt;/packaging&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n</code></pre>\n<p>Module pom dependency</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;com.org.services.spkservice&lt;/groupId&gt;\n      &lt;artifactId&gt;SPKClient&lt;/artifactId&gt;\n      &lt;version&gt;1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I verified the path in local m2 and can confirm that the jar is present in <code>~/.m2/repository/com/org/services/spkservice</code> location</p>\n<p>When I try to import the class with logic into my java file I get this error:</p>\n<pre><code> package com.org.services.spkservice does not exist \n</code></pre>\n<p>Does anyone know what might be missing here?</p>\n"},{"tags":["java","swing","jcombobox"],"comments":[{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":2,"creation_date":1695799149,"post_id":77184774,"comment_id":136070820,"body_markdown":"Well, do not use a JComboBox then. Use a JButton with an arrow icon that opens a JPopupMenu when clicked.","body":"Well, do not use a JComboBox then. Use a JButton with an arrow icon that opens a JPopupMenu when clicked."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695822742,"post_id":77184774,"comment_id":136075611,"body_markdown":"(1-) Why? How will the user every know what has been selected? Don&#39;t try to reinvent the UI.","body":"(1-) Why? How will the user every know what has been selected? Don&#39;t try to reinvent the UI."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695995232,"post_id":77184774,"comment_id":136101033,"body_markdown":"You can simply create a `JButton` with an arrow image, set a popup menu, and show the menu beneath the button when the button has been clicked. As apparently, that is what you actually want.","body":"You can simply create a <code>JButton</code> with an arrow image, set a popup menu, and show the menu beneath the button when the button has been clicked. As apparently, that is what you actually want."}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695805170,"creation_date":1695805170,"answer_id":77185993,"question_id":77184774,"body_markdown":"You could do something like this (read comments in code):\r\n\r\n    private void showOnlyComboBoxButton(javax.swing.JComboBox combo) {\r\n        // Make sure ComboBox is Editable\r\n        combo.setEditable(true);  \r\n        \r\n        // Get a list of ComboBox Components:\r\n        java.awt.Component[] comp = combo.getComponents();\r\n        \r\n        /* Declare a javax.swing.JComponent object. The ComboBox\r\n           TextField will be held there.        */\r\n        javax.swing.JComponent jc;\r\n        \r\n        // Iterate through the ComboBox components and find the TextField\r\n        for (java.awt.Component c : comp) {\r\n            if (c instanceof javax.swing.JComponent) {\r\n                jc = ((javax.swing.JComponent) c);\r\n                // Is this the TextField?\r\n                if (jc.getName().equals(&quot;ComboBox.textField&quot;)) {\r\n                    // Yes...set it&#39;s visible property to boolean false:\r\n                    jc.setVisible(false);\r\n                    // Break out of loop;\r\n                    break;  \r\n                }\r\n            }\r\n        }\r\n        /* Optional - Set the ComboBox drop-down list to \r\n           the right side of the Arrow Button:        */\r\n        combo.setComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);\r\n        \r\n        // Repaint:\r\n        combo.repaint();\r\n    }","title":"I want to show only the arrow in JComboBox","body":"<p>You could do something like this (read comments in code):</p>\n<pre><code>private void showOnlyComboBoxButton(javax.swing.JComboBox combo) {\n    // Make sure ComboBox is Editable\n    combo.setEditable(true);  \n    \n    // Get a list of ComboBox Components:\n    java.awt.Component[] comp = combo.getComponents();\n    \n    /* Declare a javax.swing.JComponent object. The ComboBox\n       TextField will be held there.        */\n    javax.swing.JComponent jc;\n    \n    // Iterate through the ComboBox components and find the TextField\n    for (java.awt.Component c : comp) {\n        if (c instanceof javax.swing.JComponent) {\n            jc = ((javax.swing.JComponent) c);\n            // Is this the TextField?\n            if (jc.getName().equals(&quot;ComboBox.textField&quot;)) {\n                // Yes...set it's visible property to boolean false:\n                jc.setVisible(false);\n                // Break out of loop;\n                break;  \n            }\n        }\n    }\n    /* Optional - Set the ComboBox drop-down list to \n       the right side of the Arrow Button:        */\n    combo.setComponentOrientation(java.awt.ComponentOrientation.RIGHT_TO_LEFT);\n    \n    // Repaint:\n    combo.repaint();\n}\n</code></pre>\n"}],"owner":{"account_id":29501565,"reputation":7,"user_id":22608457,"display_name":"MouseTheMilkLover"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1695805170,"creation_date":1695790898,"question_id":77184774,"body_markdown":"I have a JComboBox, but I want it to show only dropdown arrow, that is, without any space on left for the JComboBox element. But when I click the arrow, I want the list to go naturally, without it being empty or something.\r\n\r\nThis is what I&#39;m dealing with:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/Z0IOa.png)](https://i.stack.imgur.com/Z0IOa.png)\r\n\r\nI want it to look something like this (also list elements in the center, if that&#39;s possible):\r\n\r\n[![enter image description here](https://i.stack.imgur.com/1v4qz.png)](https://i.stack.imgur.com/1v4qz.png)\r\n\r\nThanks :).","title":"I want to show only the arrow in JComboBox","body":"<p>I have a JComboBox, but I want it to show only dropdown arrow, that is, without any space on left for the JComboBox element. But when I click the arrow, I want the list to go naturally, without it being empty or something.</p>\n<p>This is what I'm dealing with:</p>\n<p><a href=\"https://i.stack.imgur.com/Z0IOa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z0IOa.png\" alt=\"enter image description here\" /></a></p>\n<p>I want it to look something like this (also list elements in the center, if that's possible):</p>\n<p><a href=\"https://i.stack.imgur.com/1v4qz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1v4qz.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks :).</p>\n"},{"tags":["java","spring","maven","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":326040,"reputation":3140,"user_id":647581,"display_name":"Patrick Herrera"},"down_vote_count":0,"up_vote_count":96,"is_accepted":true,"score":96,"last_activity_date":1447025929,"creation_date":1447022149,"answer_id":33599838,"question_id":33483697,"body_markdown":"Following these instructions worked for me: http://www.mdoninger.de/2015/05/16/completion-for-custom-properties-in-spring-boot.html\r\n\r\nThat message about having to Re-run the Annotation Processor is a bit confusing as it appears it stays there all the time even if nothing has changed.\r\n\r\nThe key seems to be rebuilding the project after adding the required dependency, or after making any property changes.  After doing that and going back to the YAML file, all my properties were now linked to the configuration classes.\r\n\r\nYou may need to click the &#39;Reimport All Maven Projects&#39; button in the Maven pane as well to get the .yaml file view to recognise the links back to the corresponding Java class.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>Following these instructions worked for me: <a href=\"http://www.mdoninger.de/2015/05/16/completion-for-custom-properties-in-spring-boot.html\">http://www.mdoninger.de/2015/05/16/completion-for-custom-properties-in-spring-boot.html</a></p>\n\n<p>That message about having to Re-run the Annotation Processor is a bit confusing as it appears it stays there all the time even if nothing has changed.</p>\n\n<p>The key seems to be rebuilding the project after adding the required dependency, or after making any property changes.  After doing that and going back to the YAML file, all my properties were now linked to the configuration classes.</p>\n\n<p>You may need to click the 'Reimport All Maven Projects' button in the Maven pane as well to get the .yaml file view to recognise the links back to the corresponding Java class.</p>\n"},{"tags":[],"owner":{"account_id":996717,"reputation":728,"user_id":1012470,"display_name":"Deathtiny"},"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1450733852,"creation_date":1450733852,"answer_id":34404745,"question_id":33483697,"body_markdown":"I had the same issue. The problem is that the Spring Boot annotation processor generates the `spring-configuration-metadata.json` file inside your `/target/classes/META-INF` folder.\r\n\r\nIf you happen to have ignored this folder in IntelliJ like me (because what the heck, who cares about classes files?), the file won&#39;t be indexed by your IDE. Therefore, no completion, and the annoying message.\r\n\r\nJust remove `target` from the ignore files/folders list, located in `Settings &gt; Editor &gt; File Types &gt; Ignore files and folders`.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I had the same issue. The problem is that the Spring Boot annotation processor generates the <code>spring-configuration-metadata.json</code> file inside your <code>/target/classes/META-INF</code> folder.</p>\n\n<p>If you happen to have ignored this folder in IntelliJ like me (because what the heck, who cares about classes files?), the file won't be indexed by your IDE. Therefore, no completion, and the annoying message.</p>\n\n<p>Just remove <code>target</code> from the ignore files/folders list, located in <code>Settings &gt; Editor &gt; File Types &gt; Ignore files and folders</code>.</p>\n"},{"tags":[],"owner":{"account_id":475255,"reputation":10372,"user_id":885464,"accept_rate":71,"display_name":"Lorenzo Polidori"},"down_vote_count":4,"up_vote_count":20,"is_accepted":false,"score":16,"last_activity_date":1475525781,"creation_date":1452786407,"answer_id":34793756,"question_id":33483697,"body_markdown":"None of the answers worked for me. If you just want to disable the message, go to Intellij Preferences -&gt; Editor -&gt; General -&gt; Appearance, uncheck &quot;Show Spring Boot metadata panel&quot;.\r\n\r\nHowever, you can also live with that message, if it does not bother you too much, so to make sure you don&#39;t miss any other Spring Boot metadata messages you may be interested in.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>None of the answers worked for me. If you just want to disable the message, go to Intellij Preferences -> Editor -> General -> Appearance, uncheck \"Show Spring Boot metadata panel\".</p>\n\n<p>However, you can also live with that message, if it does not bother you too much, so to make sure you don't miss any other Spring Boot metadata messages you may be interested in.</p>\n"},{"tags":[],"owner":{"account_id":273892,"reputation":1312,"user_id":565792,"accept_rate":67,"display_name":"Jason Turan"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1514580035,"creation_date":1514580035,"answer_id":48028193,"question_id":33483697,"body_markdown":"None of these options worked for me. I&#39;ve found that the auto detection of annotation processors to be pretty flaky. I ended up creating a plugin section in the pom.xml file that explicitly sets the annotation processors that are used for the project. The advantage of this is that you don&#39;t need to rely on any IDE settings.\r\n\r\n    &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.7.0&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;compilerVersion&gt;1.8&lt;/compilerVersion&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t\t&lt;annotationProcessors&gt;\r\n                        &lt;annotationProcessor&gt;org.springframework.boot.configurationprocessor.ConfigurationMetadataAnnotationProcessor&lt;/annotationProcessor&gt;\r\n\t\t\t\t\t\t&lt;annotationProcessor&gt;lombok.launch.AnnotationProcessorHider$AnnotationProcessor&lt;/annotationProcessor&gt;\r\n\t\t\t\t\t\t&lt;annotationProcessor&gt;org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor&lt;/annotationProcessor&gt;\r\n\t\t\t\t\t&lt;/annotationProcessors&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>None of these options worked for me. I've found that the auto detection of annotation processors to be pretty flaky. I ended up creating a plugin section in the pom.xml file that explicitly sets the annotation processors that are used for the project. The advantage of this is that you don't need to rely on any IDE settings.</p>\n\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.7.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;compilerVersion&gt;1.8&lt;/compilerVersion&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;annotationProcessors&gt;\n                    &lt;annotationProcessor&gt;org.springframework.boot.configurationprocessor.ConfigurationMetadataAnnotationProcessor&lt;/annotationProcessor&gt;\n                    &lt;annotationProcessor&gt;lombok.launch.AnnotationProcessorHider$AnnotationProcessor&lt;/annotationProcessor&gt;\n                    &lt;annotationProcessor&gt;org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor&lt;/annotationProcessor&gt;\n                &lt;/annotationProcessors&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":142582,"reputation":1553,"user_id":350372,"display_name":"Brandon S"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1528317933,"creation_date":1528317933,"answer_id":50729313,"question_id":33483697,"body_markdown":"You can enable annotation processors in IntelliJ via the following:\r\n\r\n1. Click on File\r\n2. Click on Settings\r\n3. In the little search box in the upper-left hand corner, search for &quot;Annotation Processors&quot;\r\n4. Check &quot;Enable annotation processing&quot;\r\n5. Click OK\r\n\r\n","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>You can enable annotation processors in IntelliJ via the following:</p>\n\n<ol>\n<li>Click on File</li>\n<li>Click on Settings</li>\n<li>In the little search box in the upper-left hand corner, search for \"Annotation Processors\"</li>\n<li>Check \"Enable annotation processing\"</li>\n<li>Click OK</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":106263,"reputation":3151,"user_id":283136,"accept_rate":38,"display_name":"timomeinen"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1543409464,"creation_date":1543409464,"answer_id":53519910,"question_id":33483697,"body_markdown":" 1. Include a dependency on spring-boot-configuration-processor\r\n 2. Click &quot;Reimport All Maven Projects&quot; in the Maven pane of IDEA\r\n 3. Rebuild project","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<ol>\n<li>Include a dependency on spring-boot-configuration-processor</li>\n<li>Click \"Reimport All Maven Projects\" in the Maven pane of IDEA</li>\n<li>Rebuild project</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6746060,"reputation":1317,"user_id":5197662,"accept_rate":69,"display_name":"Sepehr GH"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1593758472,"creation_date":1593758472,"answer_id":62709804,"question_id":33483697,"body_markdown":"For me, other answers didn&#39;t work. I had to go to open `Files` and do `Invalidate caches and restart` on Intellij. After that, everything worked fine again.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>For me, other answers didn't work. I had to go to open <code>Files</code> and do <code>Invalidate caches and restart</code> on Intellij. After that, everything worked fine again.</p>\n"},{"tags":[],"owner":{"account_id":1463205,"reputation":501,"user_id":1376906,"accept_rate":71,"display_name":"fachexot"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1610118928,"creation_date":1610118928,"answer_id":65631656,"question_id":33483697,"body_markdown":"Having included a dependency on `spring-boot-configuration-processor` in `build.gradle`:\r\n\r\n    annotationProcessor &quot;org.springframework.boot:spring-boot-configuration-processor:2.4.1&quot;\r\n\r\nthe only thing that worked for me, besides invalidating caches of IntelliJ and restarting, is \r\n\r\n 1. Refresh button in side panel `Reload All Gradle Projects`\r\n 2. Gradle task `Clean`\r\n 3. Gradle task `Build`\r\n","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>Having included a dependency on <code>spring-boot-configuration-processor</code> in <code>build.gradle</code>:</p>\n<pre><code>annotationProcessor &quot;org.springframework.boot:spring-boot-configuration-processor:2.4.1&quot;\n</code></pre>\n<p>the only thing that worked for me, besides invalidating caches of IntelliJ and restarting, is</p>\n<ol>\n<li>Refresh button in side panel <code>Reload All Gradle Projects</code></li>\n<li>Gradle task <code>Clean</code></li>\n<li>Gradle task <code>Build</code></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1931877,"reputation":1731,"user_id":1741107,"accept_rate":60,"display_name":"Jasper Citi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633406137,"creation_date":1633406137,"answer_id":69444748,"question_id":33483697,"body_markdown":"I had the same problem. In my case I was missing the spring-boot-maven-plugin.\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nas well as the @Data Lombok annotation\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(&quot;logging.web&quot;)\r\n    @Data\r\n    public class LoggingWebConfiguration {\r\n    // ...\r\n    }\r\n\r\nObviously you can also just create the getter/setters yourself.\r\n\r\nThen you must also remember to re-import and re-compile your project.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I had the same problem. In my case I was missing the spring-boot-maven-plugin.</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>as well as the @Data Lombok annotation</p>\n<pre><code>@Configuration\n@ConfigurationProperties(&quot;logging.web&quot;)\n@Data\npublic class LoggingWebConfiguration {\n// ...\n}\n</code></pre>\n<p>Obviously you can also just create the getter/setters yourself.</p>\n<p>Then you must also remember to re-import and re-compile your project.</p>\n"},{"tags":[],"owner":{"account_id":12296087,"reputation":437,"user_id":8971683,"display_name":"the one"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1634219795,"creation_date":1634219795,"answer_id":69572015,"question_id":33483697,"body_markdown":"I just needed\r\n\r\n```\r\n@EnableConfigurationProperties({MY_PROPS_CLASS.class})\r\n```\r\n in Main Application class and it helped me to resolve this issue","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I just needed</p>\n<pre><code>@EnableConfigurationProperties({MY_PROPS_CLASS.class})\n</code></pre>\n<p>in Main Application class and it helped me to resolve this issue</p>\n"},{"tags":[],"owner":{"account_id":7644404,"reputation":61,"user_id":5795553,"display_name":"Jo&#227;o Verissimo Ribeiro"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634628634,"creation_date":1634583909,"answer_id":69621273,"question_id":33483697,"body_markdown":"I had a similar issue using Gradle and Kotlin.\r\nYou should modify the `build.gradle.kts` file to include the following:\r\n\r\n```kt\r\n//build.gradle.kts\r\nplugins {\r\n  // ...\r\n  kotlin(&quot;kapt&quot;) version &quot;1.5.31&quot;\r\n}\r\n\r\n\r\ndependencies {\r\n  // ...\r\n\r\n  kapt(&quot;org.springframework.boot:spring-boot-configuration-processor&quot;)\r\n}\r\n```\r\n\r\nThen, to generate the annotations: \r\n```shell\r\n./gradlew kaptKotlin\r\n```\r\n\r\nReferences: https://spring.io/guides/tutorials/spring-boot-kotlin/#_configuration_properties","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I had a similar issue using Gradle and Kotlin.\nYou should modify the <code>build.gradle.kts</code> file to include the following:</p>\n<pre><code>//build.gradle.kts\nplugins {\n  // ...\n  kotlin(&quot;kapt&quot;) version &quot;1.5.31&quot;\n}\n\n\ndependencies {\n  // ...\n\n  kapt(&quot;org.springframework.boot:spring-boot-configuration-processor&quot;)\n}\n</code></pre>\n<p>Then, to generate the annotations:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>./gradlew kaptKotlin\n</code></pre>\n<p>References: <a href=\"https://spring.io/guides/tutorials/spring-boot-kotlin/#_configuration_properties\" rel=\"nofollow noreferrer\">https://spring.io/guides/tutorials/spring-boot-kotlin/#_configuration_properties</a></p>\n"},{"tags":[],"owner":{"account_id":1192298,"reputation":2149,"user_id":1512168,"accept_rate":96,"display_name":"Mario B"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688629227,"creation_date":1651655086,"answer_id":72110413,"question_id":33483697,"body_markdown":"None of the above worked in my case, but brought me close. In the end explicitly defining all required annotationProcessors in the maven-compiler-plugin solved it for me. In my case this was: Spring-Boot + Lombok + MapStruct\r\n\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;annotationProcessorPaths&gt;\r\n            &lt;annotationProcessorPath&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n              &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n            &lt;/annotationProcessorPath&gt;\r\n            &lt;annotationProcessorPath&gt;\r\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n              &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n            &lt;/annotationProcessorPath&gt;\r\n            &lt;annotationProcessorPath&gt;\r\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n              &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${spring-boot-configuration-processor.version}&lt;/version&gt;\r\n            &lt;/annotationProcessorPath&gt;\r\n          &lt;/annotationProcessorPaths&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n\r\nBefore that I always got some warnings in the Class + in the application.properties some properties were marked as &quot;unusued&quot;, even when they were defined in a class with @ConfigurationProperties","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>None of the above worked in my case, but brought me close. In the end explicitly defining all required annotationProcessors in the maven-compiler-plugin solved it for me. In my case this was: Spring-Boot + Lombok + MapStruct</p>\n<pre><code>  &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;configuration&gt;\n      &lt;annotationProcessorPaths&gt;\n        &lt;annotationProcessorPath&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n          &lt;version&gt;${lombok.version}&lt;/version&gt;\n        &lt;/annotationProcessorPath&gt;\n        &lt;annotationProcessorPath&gt;\n          &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n          &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n          &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n        &lt;/annotationProcessorPath&gt;\n        &lt;annotationProcessorPath&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n          &lt;version&gt;${spring-boot-configuration-processor.version}&lt;/version&gt;\n        &lt;/annotationProcessorPath&gt;\n      &lt;/annotationProcessorPaths&gt;\n    &lt;/configuration&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p>Before that I always got some warnings in the Class + in the application.properties some properties were marked as &quot;unusued&quot;, even when they were defined in a class with @ConfigurationProperties</p>\n"},{"tags":[],"owner":{"account_id":10465700,"reputation":1,"user_id":7715186,"display_name":"lihang cai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657691387,"creation_date":1657691387,"answer_id":72961491,"question_id":33483697,"body_markdown":"In the maven panel of Idea, clean and compile in the maven lifecycle worked for me.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>In the maven panel of Idea, clean and compile in the maven lifecycle worked for me.</p>\n"},{"tags":[],"owner":{"account_id":6265351,"reputation":284,"user_id":4871273,"display_name":"RedPelle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695805152,"creation_date":1695805152,"answer_id":77185991,"question_id":33483697,"body_markdown":"Simply do:\r\n\r\n`mvn clean verify`\r\n\r\nor click &quot;verify&quot; in you **maven panel** in IntelliJ.\r\n\r\nOn &quot;clean&quot; he will not recognize annotations and on &quot;verify&quot; he will generate them again and they will be immediately recognized, no need for restart or anything.","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>Simply do:</p>\n<p><code>mvn clean verify</code></p>\n<p>or click &quot;verify&quot; in you <strong>maven panel</strong> in IntelliJ.</p>\n<p>On &quot;clean&quot; he will not recognize annotations and on &quot;verify&quot; he will generate them again and they will be immediately recognized, no need for restart or anything.</p>\n"}],"owner":{"account_id":449002,"reputation":23329,"user_id":843542,"accept_rate":69,"display_name":"Eric Francis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161940,"favorite_count":0,"down_vote_count":0,"up_vote_count":179,"accepted_answer_id":33599838,"answer_count":14,"score":179,"last_activity_date":1695805152,"creation_date":1446486331,"question_id":33483697,"body_markdown":"I&#39;ve added:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n        &lt;optional&gt;true&lt;/optional&gt;\r\n    &lt;/dependency&gt;\r\n\r\nto my `pom.xml` per `intellij`&#39;s request/warning.\r\n\r\nNow I&#39;m seeing &quot;Re-run Spring Boot Configuration Annotation Processor to update generated metadata&quot;.\r\n\r\nHow do I do what `intellij` is asking me to do? \r\n\r\nThis link, [B.2 Generating your own meta-data using the annotation processor][1], does not have instructions. \r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/html/configuration-metadata.html#configuration-metadata-annotation-processor","title":"Re-run Spring Boot Configuration Annotation Processor to update generated metadata","body":"<p>I've added:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n    &lt;optional&gt;true&lt;/optional&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>to my <code>pom.xml</code> per <code>intellij</code>'s request/warning.</p>\n\n<p>Now I'm seeing \"Re-run Spring Boot Configuration Annotation Processor to update generated metadata\".</p>\n\n<p>How do I do what <code>intellij</code> is asking me to do? </p>\n\n<p>This link, <a href=\"http://docs.spring.io/spring-boot/docs/1.2.5.RELEASE/reference/html/configuration-metadata.html#configuration-metadata-annotation-processor\" rel=\"noreferrer\">B.2 Generating your own meta-data using the annotation processor</a>, does not have instructions. </p>\n"},{"tags":["java","docker","centos"],"answers":[{"tags":[],"owner":{"account_id":1298254,"reputation":2903,"user_id":1248724,"accept_rate":67,"display_name":"Zarathustra"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1549989614,"creation_date":1549989614,"answer_id":54654814,"question_id":53674342,"body_markdown":"Just edit the `java.security` file located in `&lt;jvm_home&gt;/conf/security` in your Dockerfile","title":"Alter java security in docker container","body":"<p>Just edit the <code>java.security</code> file located in <code>&lt;jvm_home&gt;/conf/security</code> in your Dockerfile</p>\n"},{"tags":[],"owner":{"account_id":6058354,"reputation":81,"user_id":5333683,"display_name":"D.Oleg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695805027,"creation_date":1695805027,"answer_id":77185975,"question_id":53674342,"body_markdown":"In Dockerfile for 17 Java\r\n#copy from source \r\nCOPY javaconf/java.security /app/javaconf/java.security\r\n\r\n#next\r\nCOPY --from=build /app/javaconf/java.security /opt/openjdk-17/conf/security/java.security","title":"Alter java security in docker container","body":"<p>In Dockerfile for 17 Java\n#copy from source\nCOPY javaconf/java.security /app/javaconf/java.security</p>\n<p>#next\nCOPY --from=build /app/javaconf/java.security /opt/openjdk-17/conf/security/java.security</p>\n"}],"owner":{"account_id":8364490,"reputation":2453,"user_id":7253775,"accept_rate":65,"display_name":"Jose Cabrera Zuniga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1624,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695805027,"creation_date":1544203893,"question_id":53674342,"body_markdown":"I have oracle java sdk 8 running in my docker container (running centos 7) but I want to configure the security of running java apps. This can be done using jcontrol but it requires a graphical environment that my docker container does not provide. How can I solve this problem? thx","title":"Alter java security in docker container","body":"<p>I have oracle java sdk 8 running in my docker container (running centos 7) but I want to configure the security of running java apps. This can be done using jcontrol but it requires a graphical environment that my docker container does not provide. How can I solve this problem? thx</p>\n"},{"tags":["java","algorithm","graph","graph-theory","depth-first-search"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1649572375,"creation_date":1649553681,"answer_id":71813109,"question_id":71777572,"body_markdown":"You were close to the answer.\r\n\r\nIn order to *detect a cycle* in a graph, you need to use the **Depth first search** algorithm. That&#39;s correct.\r\n\r\nBut there are a couple of things in your solution that has to improved:\r\n* For this task, you don&#39;t need *edges*. Because you can model a *directed graph* by using *vertices* only. *Edges* are useful when you deal with a weighted graph (i.e. every edge is associated with a value) and need to address, for instance, the problem of the shortest path using Dijkstra&#39;s or Bellman–Ford algorithms. Then you really need edges to model the connections between vertices. But for in this task, edges are redundant, each *vertex can point to other vertexes*.\r\n* *Adjacency list* mustn&#39;t be a separate data structure. Instead, every *vertex* has to be aware of its *neighbors*. I.e. each *vertex* must hold a reference to a collection of *adjacent vertices*.\r\n* Since *graph* can contain *multiple cycles*, the result need to be represented by the nested collection. Like list of lists `List&lt;List&lt;Vertex&gt;&gt;`.\r\n* `contains()` checks done on a `List` are very costful (**O(n)** *in the worse case*), and isn&#39;t list capable to associate elements. `Map` is a better choice because map allow to retrieve values in a constant time and associate multiple keys with the same value (i.e. model cases when a group of vertices points is being connected with a single vertex).\r\n\r\nNote that cycle `[1,2,3,2,1]` isn&#39;t valid because there&#39;s *more than one vertex* that was *visited twice*. It&#39;s a combination of two cycles `1-2` and `2-3`. If you need to spot all the cycles in a graph they must be detected only one at a time, otherwise attempt to restore the path of a cycle might fail because of references pointing one at each other. Only because in your solution is capable to track only a single path, you didn&#39;t run in to trouble with the second cycle `2-&gt;3-&gt;2`. I.e. all vertexes (*except one*) in a cycle must be unique, that will allow to maintain multiple paths.\r\n\r\nIn the implementation below, I deliberately provided a method that is able to detect cycles that contain a particular vertex, as well a method that fetches all the cycles *comprised of only unique vertices*. So that you can play around by changing them and make sure that *map* should never contain the last segment of cycle. I.e. only entry `2-&gt;3` will be added by into map, but entry `3-&gt;2` will not, otherwise you can create an infinite loop.\r\n\r\nImplementation of the graph below utilizes only *vertexes*. Depth first search algorithm is implemented *iteratively* (although recursive implementation is easier, recursion has limitation in Java especially when dealing with a large dataset and iterative approach is more performant).\r\n```\r\npublic class CyclicGraph {\r\n    private Map&lt;Integer, Vertex&gt; vertexById = new HashMap&lt;&gt;();\r\n    \r\n    public void addVertex(int vertexId, int... neighbours) {\r\n//        vertexById.putIfAbsent(vertexId, new Vertex(vertexId));\r\n//        Vertex current = vertexById.get(vertexId); // does the same as the line below with one important distinction - new Vertex will be instantiated by `computeIfAbsent` only entry is not present\r\n        Vertex current = vertexById.computeIfAbsent(vertexId, Vertex::new); // adding a vertex\r\n        \r\n        for (int next : neighbours) {\r\n            Vertex neighbour = vertexById.computeIfAbsent(next, Vertex::new); // retrieving neighbour\r\n            current.addNeighbour(neighbour);                                  // adding neighbour\r\n        }\r\n    }\r\n    \r\n    public List&lt;List&lt;Vertex&gt;&gt; getCyclesContainingVertex(int targetId) {\r\n        Vertex target = vertexById.get(targetId);\r\n        \r\n        if (vertexById.get(targetId) == null) {\r\n            return Collections.emptyList();\r\n        }\r\n        List&lt;List&lt;Vertex&gt;&gt; cycles = new ArrayList&lt;&gt;();\r\n        \r\n        Deque&lt;Vertex&gt; stack = new ArrayDeque&lt;&gt;();\r\n        Set&lt;Vertex&gt; seen = new HashSet&lt;&gt;();\r\n        Map&lt;Vertex, Vertex&gt; paths = new HashMap&lt;&gt;();\r\n        \r\n        stack.add(target);\r\n        while (!stack.isEmpty()) {\r\n            Vertex current = stack.pop();\r\n            seen.add(current);\r\n            for (Vertex neighbour : current.getNeighbours()) {\r\n                if (seen.contains(neighbour) &amp;&amp; neighbour.equals(target)) { // the cycle was found\r\n                    // build cycle, don&#39;t add vertex to the stack and don&#39;t add new entry to the paths (it can prevent other cycles containing neighbour vertex from being detected)\r\n                    cycles.add(buildCycle(paths, neighbour, current));\r\n                } else if (!seen.contains(neighbour)) {\r\n                    stack.add(neighbour);\r\n                    paths.put(neighbour, current);\r\n                    seen.add(neighbour);\r\n                }\r\n            }\r\n        }\r\n        return cycles;\r\n    }\r\n    \r\n    public List&lt;List&lt;Vertex&gt;&gt; getAllCycles() {\r\n        List&lt;List&lt;Vertex&gt;&gt; cycles = new ArrayList&lt;&gt;();\r\n        Deque&lt;Vertex&gt; stack = new ArrayDeque&lt;&gt;();\r\n        Set&lt;Vertex&gt; seen = new HashSet&lt;&gt;();\r\n        \r\n        for (Vertex next : vertexById.values()) {\r\n            if (seen.contains(next)) continue;\r\n            \r\n            Map&lt;Vertex, Vertex&gt; paths = new HashMap&lt;&gt;();\r\n            stack.add(next);\r\n            while (!stack.isEmpty()) {\r\n                Vertex current = stack.pop();\r\n                seen.add(current);\r\n                for (Vertex neighbour : current.getNeighbours()) {\r\n                    if (seen.contains(neighbour)) { // the cycle was found\r\n                        // build cycle, don&#39;t add vertex to the stack and don&#39;t add new entry to the paths (it can prevent other cycles containing neighbour vertex from being detected)\r\n                        cycles.add(buildCycle(paths, neighbour, current));\r\n                    } else {\r\n                        stack.add(neighbour);\r\n                        paths.put(neighbour, current);\r\n                        seen.add(neighbour);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return cycles;\r\n    }\r\n    \r\n    private List&lt;Vertex&gt; buildCycle(Map&lt;Vertex, Vertex&gt; paths, Vertex start, Vertex end) {\r\n        Deque&lt;Vertex&gt; cycle = new ArrayDeque&lt;&gt;();\r\n        Vertex current = end;\r\n        while (current != null &amp;&amp; !current.equals(start)) {\r\n            cycle.addFirst(current);\r\n            current = paths.get(current);\r\n        }\r\n        cycle.addFirst(start);\r\n        return new ArrayList&lt;&gt;(cycle);\r\n    }\r\n    \r\n    public void clear() {\r\n        this.vertexById.clear();\r\n    }\r\n    \r\n    private class Vertex {\r\n        private int id;\r\n        private Set&lt;Vertex&gt; neighbours = new HashSet&lt;&gt;();\r\n        \r\n        public Vertex(int id) {\r\n            this.id = id;\r\n        }\r\n        \r\n        public boolean addNeighbour(Vertex vert) {\r\n            return neighbours.add(vert);\r\n        }\r\n        \r\n        // getters, hashCode/equeals, toString()\r\n    }\r\n}\r\n```\r\nExample of a bit more elaborate graph used in demo together with the graph provided in the question.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n`main()` - demo\r\n\r\n    public static void main(String[] args) {\r\n        CyclicGraph graph = new CyclicGraph();\r\n        \r\n        System.out.println(&quot;Graph described in the question (only cycles that include vertex 1):&quot;);\r\n        graph.addVertex(1, 2);\r\n        graph.addVertex(2, 1, 3);\r\n        graph.addVertex(3, 1, 2);\r\n    \r\n        for (List&lt;Vertex&gt; cycle : graph.getCyclesContainingVertex(1)) {\r\n            System.out.println(cycle);\r\n        }\r\n        \r\n        graph.clear();\r\n        System.out.println(&quot;\\nMore elaborate Graph (all cycles):&quot;);\r\n        \r\n        graph.addVertex(1, 2);\r\n        graph.addVertex(2, 1, 5);\r\n        graph.addVertex(3, 1, 2);\r\n        graph.addVertex(4, 1, 3);\r\n        graph.addVertex(5, 3, 4);\r\n        \r\n        for (List&lt;Vertex&gt; cycle : graph.getAllCycles()) {\r\n            System.out.println(cycle);\r\n        }\r\n    }\r\n\r\n**Output**\r\n```\r\nGraph described in the question (cycles that lead to 1):\r\n[Vertex{ 1 }, Vertex{ 2 }] // 1 is reachable from 2\r\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 3 }] // 1 is reachable from 3\r\n\r\nMore elaborate Graph (all cycles):\r\n[Vertex{ 1 }, Vertex{ 2 }] // 1 is reachable from 2\r\n[Vertex{ 2 }, Vertex{ 5 }, Vertex{ 3 }] // 2 is reachable from 3\r\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 3 }] // 1 is reachable from 3\r\n[Vertex{ 3 }, Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 4 }] // 3 is reachable from 4\r\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 4 }] // 1 is reachable from 4\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VXP3km.jpg","title":"Find all Cycles in the Directed Graph including back edges","body":"<p>You were close to the answer.</p>\n<p>In order to <em>detect a cycle</em> in a graph, you need to use the <strong>Depth first search</strong> algorithm. That's correct.</p>\n<p>But there are a couple of things in your solution that has to improved:</p>\n<ul>\n<li>For this task, you don't need <em>edges</em>. Because you can model a <em>directed graph</em> by using <em>vertices</em> only. <em>Edges</em> are useful when you deal with a weighted graph (i.e. every edge is associated with a value) and need to address, for instance, the problem of the shortest path using Dijkstra's or Bellman–Ford algorithms. Then you really need edges to model the connections between vertices. But for in this task, edges are redundant, each <em>vertex can point to other vertexes</em>.</li>\n<li><em>Adjacency list</em> mustn't be a separate data structure. Instead, every <em>vertex</em> has to be aware of its <em>neighbors</em>. I.e. each <em>vertex</em> must hold a reference to a collection of <em>adjacent vertices</em>.</li>\n<li>Since <em>graph</em> can contain <em>multiple cycles</em>, the result need to be represented by the nested collection. Like list of lists <code>List&lt;List&lt;Vertex&gt;&gt;</code>.</li>\n<li><code>contains()</code> checks done on a <code>List</code> are very costful (<strong>O(n)</strong> <em>in the worse case</em>), and isn't list capable to associate elements. <code>Map</code> is a better choice because map allow to retrieve values in a constant time and associate multiple keys with the same value (i.e. model cases when a group of vertices points is being connected with a single vertex).</li>\n</ul>\n<p>Note that cycle <code>[1,2,3,2,1]</code> isn't valid because there's <em>more than one vertex</em> that was <em>visited twice</em>. It's a combination of two cycles <code>1-2</code> and <code>2-3</code>. If you need to spot all the cycles in a graph they must be detected only one at a time, otherwise attempt to restore the path of a cycle might fail because of references pointing one at each other. Only because in your solution is capable to track only a single path, you didn't run in to trouble with the second cycle <code>2-&gt;3-&gt;2</code>. I.e. all vertexes (<em>except one</em>) in a cycle must be unique, that will allow to maintain multiple paths.</p>\n<p>In the implementation below, I deliberately provided a method that is able to detect cycles that contain a particular vertex, as well a method that fetches all the cycles <em>comprised of only unique vertices</em>. So that you can play around by changing them and make sure that <em>map</em> should never contain the last segment of cycle. I.e. only entry <code>2-&gt;3</code> will be added by into map, but entry <code>3-&gt;2</code> will not, otherwise you can create an infinite loop.</p>\n<p>Implementation of the graph below utilizes only <em>vertexes</em>. Depth first search algorithm is implemented <em>iteratively</em> (although recursive implementation is easier, recursion has limitation in Java especially when dealing with a large dataset and iterative approach is more performant).</p>\n<pre><code>public class CyclicGraph {\n    private Map&lt;Integer, Vertex&gt; vertexById = new HashMap&lt;&gt;();\n    \n    public void addVertex(int vertexId, int... neighbours) {\n//        vertexById.putIfAbsent(vertexId, new Vertex(vertexId));\n//        Vertex current = vertexById.get(vertexId); // does the same as the line below with one important distinction - new Vertex will be instantiated by `computeIfAbsent` only entry is not present\n        Vertex current = vertexById.computeIfAbsent(vertexId, Vertex::new); // adding a vertex\n        \n        for (int next : neighbours) {\n            Vertex neighbour = vertexById.computeIfAbsent(next, Vertex::new); // retrieving neighbour\n            current.addNeighbour(neighbour);                                  // adding neighbour\n        }\n    }\n    \n    public List&lt;List&lt;Vertex&gt;&gt; getCyclesContainingVertex(int targetId) {\n        Vertex target = vertexById.get(targetId);\n        \n        if (vertexById.get(targetId) == null) {\n            return Collections.emptyList();\n        }\n        List&lt;List&lt;Vertex&gt;&gt; cycles = new ArrayList&lt;&gt;();\n        \n        Deque&lt;Vertex&gt; stack = new ArrayDeque&lt;&gt;();\n        Set&lt;Vertex&gt; seen = new HashSet&lt;&gt;();\n        Map&lt;Vertex, Vertex&gt; paths = new HashMap&lt;&gt;();\n        \n        stack.add(target);\n        while (!stack.isEmpty()) {\n            Vertex current = stack.pop();\n            seen.add(current);\n            for (Vertex neighbour : current.getNeighbours()) {\n                if (seen.contains(neighbour) &amp;&amp; neighbour.equals(target)) { // the cycle was found\n                    // build cycle, don't add vertex to the stack and don't add new entry to the paths (it can prevent other cycles containing neighbour vertex from being detected)\n                    cycles.add(buildCycle(paths, neighbour, current));\n                } else if (!seen.contains(neighbour)) {\n                    stack.add(neighbour);\n                    paths.put(neighbour, current);\n                    seen.add(neighbour);\n                }\n            }\n        }\n        return cycles;\n    }\n    \n    public List&lt;List&lt;Vertex&gt;&gt; getAllCycles() {\n        List&lt;List&lt;Vertex&gt;&gt; cycles = new ArrayList&lt;&gt;();\n        Deque&lt;Vertex&gt; stack = new ArrayDeque&lt;&gt;();\n        Set&lt;Vertex&gt; seen = new HashSet&lt;&gt;();\n        \n        for (Vertex next : vertexById.values()) {\n            if (seen.contains(next)) continue;\n            \n            Map&lt;Vertex, Vertex&gt; paths = new HashMap&lt;&gt;();\n            stack.add(next);\n            while (!stack.isEmpty()) {\n                Vertex current = stack.pop();\n                seen.add(current);\n                for (Vertex neighbour : current.getNeighbours()) {\n                    if (seen.contains(neighbour)) { // the cycle was found\n                        // build cycle, don't add vertex to the stack and don't add new entry to the paths (it can prevent other cycles containing neighbour vertex from being detected)\n                        cycles.add(buildCycle(paths, neighbour, current));\n                    } else {\n                        stack.add(neighbour);\n                        paths.put(neighbour, current);\n                        seen.add(neighbour);\n                    }\n                }\n            }\n        }\n        return cycles;\n    }\n    \n    private List&lt;Vertex&gt; buildCycle(Map&lt;Vertex, Vertex&gt; paths, Vertex start, Vertex end) {\n        Deque&lt;Vertex&gt; cycle = new ArrayDeque&lt;&gt;();\n        Vertex current = end;\n        while (current != null &amp;&amp; !current.equals(start)) {\n            cycle.addFirst(current);\n            current = paths.get(current);\n        }\n        cycle.addFirst(start);\n        return new ArrayList&lt;&gt;(cycle);\n    }\n    \n    public void clear() {\n        this.vertexById.clear();\n    }\n    \n    private class Vertex {\n        private int id;\n        private Set&lt;Vertex&gt; neighbours = new HashSet&lt;&gt;();\n        \n        public Vertex(int id) {\n            this.id = id;\n        }\n        \n        public boolean addNeighbour(Vertex vert) {\n            return neighbours.add(vert);\n        }\n        \n        // getters, hashCode/equeals, toString()\n    }\n}\n</code></pre>\n<p>Example of a bit more elaborate graph used in demo together with the graph provided in the question.</p>\n<p><a href=\"https://i.stack.imgur.com/VXP3km.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VXP3km.jpg\" alt=\"enter image description here\" /></a></p>\n<p><code>main()</code> - demo</p>\n<pre><code>public static void main(String[] args) {\n    CyclicGraph graph = new CyclicGraph();\n    \n    System.out.println(&quot;Graph described in the question (only cycles that include vertex 1):&quot;);\n    graph.addVertex(1, 2);\n    graph.addVertex(2, 1, 3);\n    graph.addVertex(3, 1, 2);\n\n    for (List&lt;Vertex&gt; cycle : graph.getCyclesContainingVertex(1)) {\n        System.out.println(cycle);\n    }\n    \n    graph.clear();\n    System.out.println(&quot;\\nMore elaborate Graph (all cycles):&quot;);\n    \n    graph.addVertex(1, 2);\n    graph.addVertex(2, 1, 5);\n    graph.addVertex(3, 1, 2);\n    graph.addVertex(4, 1, 3);\n    graph.addVertex(5, 3, 4);\n    \n    for (List&lt;Vertex&gt; cycle : graph.getAllCycles()) {\n        System.out.println(cycle);\n    }\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>Graph described in the question (cycles that lead to 1):\n[Vertex{ 1 }, Vertex{ 2 }] // 1 is reachable from 2\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 3 }] // 1 is reachable from 3\n\nMore elaborate Graph (all cycles):\n[Vertex{ 1 }, Vertex{ 2 }] // 1 is reachable from 2\n[Vertex{ 2 }, Vertex{ 5 }, Vertex{ 3 }] // 2 is reachable from 3\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 3 }] // 1 is reachable from 3\n[Vertex{ 3 }, Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 4 }] // 3 is reachable from 4\n[Vertex{ 1 }, Vertex{ 2 }, Vertex{ 5 }, Vertex{ 4 }] // 1 is reachable from 4\n</code></pre>\n"}],"owner":{"account_id":10091227,"reputation":304,"user_id":7458152,"accept_rate":67,"display_name":"Arundhathi D"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1347,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71813109,"answer_count":1,"score":2,"last_activity_date":1695804713,"creation_date":1649314452,"question_id":71777572,"body_markdown":"Given a *graph* below, find all the possible path from vertex `1` to come back to `1` including back edges.\r\n\r\n**Result:**\r\n\r\n            [1,2,3,2,1]\r\n            [1,2,1]\r\n            [1,2,3,1]\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nGjgt.png\r\n\r\nI tried using DFS able to get only one cycle `[1,2,3,2,1]`. I&#39;m not getting how to get track of back edges. \r\n\r\n**Code**:\r\n\r\n    private static void dfsNow(Node vertex, HashMap&lt;String, List&lt;Node&gt;&gt; adjList,\r\n                               HashSet&lt;String&gt; visited, HashSet&lt;String&gt; candidates,\r\n                               ArrayList&lt;String&gt; res) {\r\n\r\n        candidates.add(vertex.v);\r\n        res.add(vertex.v);\r\n\r\n        for(Node adj :  adjList.get(vertex.v)) {\r\n\r\n            if(candidates.contains(adj.v)) {\r\n               \r\n                res.add(adj.v);\r\n                System.out.println(vertex.v+&quot;:&quot;+adj.v);\r\n            } else {\r\n                //adj.setParent(vertex); // build the trace back\r\n                dfsNow( adj, adjList,visited,candidates,res);\r\n            }\r\n        }\r\n        candidates.remove(vertex.v);\r\n        visited.add(vertex.v);\r\n    }\r\n\r\n","title":"Find all Cycles in the Directed Graph including back edges","body":"<p>Given a <em>graph</em> below, find all the possible path from vertex <code>1</code> to come back to <code>1</code> including back edges.</p>\n<p><strong>Result:</strong></p>\n<pre><code>        [1,2,3,2,1]\n        [1,2,1]\n        [1,2,3,1]\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/nGjgt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nGjgt.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried using DFS able to get only one cycle <code>[1,2,3,2,1]</code>. I'm not getting how to get track of back edges.</p>\n<p><strong>Code</strong>:</p>\n<pre><code>private static void dfsNow(Node vertex, HashMap&lt;String, List&lt;Node&gt;&gt; adjList,\n                           HashSet&lt;String&gt; visited, HashSet&lt;String&gt; candidates,\n                           ArrayList&lt;String&gt; res) {\n\n    candidates.add(vertex.v);\n    res.add(vertex.v);\n\n    for(Node adj :  adjList.get(vertex.v)) {\n\n        if(candidates.contains(adj.v)) {\n           \n            res.add(adj.v);\n            System.out.println(vertex.v+&quot;:&quot;+adj.v);\n        } else {\n            //adj.setParent(vertex); // build the trace back\n            dfsNow( adj, adjList,visited,candidates,res);\n        }\n    }\n    candidates.remove(vertex.v);\n    visited.add(vertex.v);\n}\n</code></pre>\n"},{"tags":["java","mongodb"],"answers":[{"tags":[],"owner":{"account_id":8353193,"reputation":76,"user_id":6274514,"display_name":"ashwani bakshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695804362,"creation_date":1695804362,"answer_id":77185894,"question_id":77185138,"body_markdown":"The below code worked and got the required result:-\r\n\r\n    query.put(&quot;nodes._id&quot;,&quot;core&quot;);\r\n    query.put(&quot;nodes.attvalues&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new \r\n    BasicDBObject(&quot;attr&quot;,&quot;last_mod_date&quot;)));\r\n    query.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new \r\n    BasicDBObject(&quot;value&quot;,new \r\n    BasicDBObject(&quot;$gt&quot;,then.format(format)).append(&quot;$lt&quot;,now.format(format)))));\r\n\r\n","title":"How to add $elemMatch of mongodb in java code?","body":"<p>The below code worked and got the required result:-</p>\n<pre><code>query.put(&quot;nodes._id&quot;,&quot;core&quot;);\nquery.put(&quot;nodes.attvalues&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new \nBasicDBObject(&quot;attr&quot;,&quot;last_mod_date&quot;)));\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new \nBasicDBObject(&quot;value&quot;,new \nBasicDBObject(&quot;$gt&quot;,then.format(format)).append(&quot;$lt&quot;,now.format(format)))));\n</code></pre>\n"}],"owner":{"account_id":8353193,"reputation":76,"user_id":6274514,"display_name":"ashwani bakshi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77185894,"answer_count":1,"score":0,"last_activity_date":1695804362,"creation_date":1695796693,"question_id":77185138,"body_markdown":"this is my query \r\ndb.collectionname.find( {&quot;nodes._id&quot;:&quot;core&quot;,&quot;nodes.attvalues&quot;:{&quot;$elemMatch&quot;:{attr:&quot;last_mod_date&quot;,value:{$gte:&quot;2023-09-17T00:00:00Z&quot;,$lt:&quot;2023-09-24T00:00:00Z&quot;}}}}).count();\r\n\r\nI want to use it in my java code.\r\n\r\nThe below code is giving me the data.\r\n\r\n```\r\nDateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;00:00:00&#39;Z&#39;&quot;);\r\n\r\n        LocalDateTime now = LocalDateTime.now();\r\n        LocalDateTime then = now.minusDays(8);\r\n\r\nBasicDBObject query = new BasicDBObject();\r\nquery.put(&quot;nodes._id&quot;,&quot;core&quot;);\r\nquery.put(&quot;nodes.attvalues.attr&quot;,&quot;last_mod_date&quot;);\r\nquery.put(&quot;nodes.attvalues.value&quot;,new BasicDBObject(&quot;$gt&quot;,then.format(format)));\r\nquery.put(&quot;nodes.attvalues.value&quot;,new BasicDBObject(&quot;$lt&quot;,now.format(format)));\r\n\r\n```\r\nBut I want to that how can i update the current code with the above mongo query and fetch the required data from the db.\r\n\r\nThe collection looks like this.\r\n\r\n```\r\n[\r\n  {\r\n    _id: &#39;55f6d14b5ddb3ae7d5d08a7b&#39;,\r\n    _class: &#39;com.somfy.pcpwebapp.domain.SWOGraph&#39;,\r\n    label: &#39;5100188/C - Make - Gray &#39;,\r\n    mode: &#39;directed&#39;,\r\n    type: &#39;workflow&#39;,\r\n    nodes: [\r\n      {\r\n        _id: &#39;core&#39;,\r\n        label: &#39;core&#39;,\r\n        type: &#39;core&#39;,\r\n        attvalues: [\r\n          { attr: &#39;creation_date&#39;, value: &#39;2015-09-14T13:53:06.000Z&#39; },\r\n          { attr: &#39;designation&#39;, value: &#39;LEAFLET UTIL. DEXXO PRO RTS&#39; },\r\n          { attr: &#39;distribution_sites&#39;, value: [] },\r\n          { attr: &#39;distribution_workflow_ids&#39;, value: {} },\r\n          { attr: &#39;flow&#39;, value: &#39;1&#39; },\r\n          { attr: &#39;flow_to_task_definition_ids&#39;, value: [ [Array] ] },\r\n          { attr: &#39;last_mod_date&#39;, value: &#39;2023-09-20T07:23:30.093Z&#39; },\r\n          {\r\n            attr: &#39;last_mod_user_id&#39;,\r\n            value: &#39;55b66bb127772e0efc3669e2&#39;\r\n          },\r\n          { attr: &#39;last_mod_user_login&#39;, value: &#39;marith01&#39; },\r\n          { attr: &#39;manuf_exists_offserie&#39;, value: &#39;&#39; }\r\n        ]\r\n      },\r\n      {\r\n        _id: &#39;MethodsSite&#39;,\r\n        label: &#39;MethodsSite&#39;,\r\n        type: &#39;task&#39;,\r\n        attvalues: [\r\n          {\r\n            attr: &#39;assignable_user_ids&#39;,\r\n            value: [\r\n              &#39;55b66bb127772e0efc3669cf&#39;,\r\n              &#39;55b66bb127772e0efc3669e2&#39;,\r\n              &#39;55b66bb127772e0efc3669da&#39;,\r\n              &#39;55b66bb127772e0efc3669d9&#39;,\r\n              &#39;55f29e07618fe271f2c57227&#39;\r\n            ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_displaynames&#39;,\r\n            value: [ &#39;MARINO Thierry&#39;, &#39;RAZNIK Pascal&#39; ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_emails&#39;,\r\n            value: [ &#39;Thierry.MARINO@simu.com&#39;, &#39;Pascal.RAZNIK@simu.com&#39; ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_ids&#39;,\r\n            value: [ &#39;55b66bb127772e0efc3669e2&#39;, &#39;55b66bb127772e0efc3669d9&#39; ]\r\n          },\r\n          { attr: &#39;comment&#39;, value: &#39;&#39; },\r\n          { attr: &#39;completed_date&#39;, value: &#39;2015-09-15T06:30:05Z&#39; },\r\n          { attr: &#39;completed_user_id&#39;, value: &#39;MARINO Thierry&#39; },\r\n          {\r\n            attr: &#39;completing_date&#39;,\r\n            value: &#39;2015-09-15T06:29:29.843Z&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_displayname&#39;,\r\n            value: &#39;MARINO Thierry&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_email&#39;,\r\n            value: &#39;Thierry.MARINO@simu.com&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_id&#39;,\r\n            value: &#39;55b66bb127772e0efc3669e2&#39;\r\n          },\r\n          { attr: &#39;last_mod_date&#39;, value: &#39;2015-09-03T06:30:05Z&#39; },\r\n          { attr: &#39;last_mod_user_login&#39;, value: &#39;MARINO Thierry&#39; }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    _id: &#39;55f6d14b5ddb3ae7d5d09a8b&#39;,\r\n    _class: &#39;com.somfy.pcpwebapp.domain.SWOGraph&#39;,\r\n    label: &#39;5100188/C - Make - Demo &#39;,\r\n    mode: &#39;directed&#39;,\r\n    type: &#39;workflow&#39;,\r\n    nodes: [\r\n      {\r\n        _id: &#39;core&#39;,\r\n        label: &#39;core&#39;,\r\n        type: &#39;coree&#39;,\r\n        attvalues: [\r\n          { attr: &#39;creation_date&#39;, value: &#39;2015-09-14T13:53:06.000Z&#39; },\r\n          { attr: &#39;designation&#39;, value: &#39;LEAFLET UTIL. DEXXO PRO RTS&#39; },\r\n          { attr: &#39;distribution_sites&#39;, value: [] },\r\n          { attr: &#39;distribution_workflow_ids&#39;, value: {} },\r\n          { attr: &#39;flow&#39;, value: &#39;1&#39; },\r\n          { attr: &#39;flow_to_task_definition_ids&#39;, value: [ [Array] ] },\r\n          { attr: &#39;last_mod_date&#39;, value: &#39;2015-09-30T07:23:30.093Z&#39; },\r\n          {\r\n            attr: &#39;last_mod_user_id&#39;,\r\n            value: &#39;55b66bb127772e0efc3669e2&#39;\r\n          },\r\n          { attr: &#39;last_mod_user_login&#39;, value: &#39;marith01&#39; },\r\n          { attr: &#39;manuf_exists_offserie&#39;, value: &#39;&#39; }\r\n        ]\r\n      },\r\n      {\r\n        _id: &#39;MethodsSite&#39;,\r\n        label: &#39;MethodsSite&#39;,\r\n        type: &#39;task&#39;,\r\n        attvalues: [\r\n          {\r\n            attr: &#39;assignable_user_ids&#39;,\r\n            value: [\r\n              &#39;55b66bb127772e0efc3669cf&#39;,\r\n              &#39;55b66bb127772e0efc3669e2&#39;,\r\n              &#39;55b66bb127772e0efc3669da&#39;,\r\n              &#39;55b66bb127772e0efc3669d9&#39;,\r\n              &#39;55f29e07618fe271f2c57227&#39;\r\n            ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_displaynames&#39;,\r\n            value: [ &#39;MARINO Thierry&#39;, &#39;RAZNIK Pascal&#39; ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_emails&#39;,\r\n            value: [ &#39;Thierry.MARINO@simu.com&#39;, &#39;Pascal.RAZNIK@simu.com&#39; ]\r\n          },\r\n          {\r\n            attr: &#39;assigned_user_ids&#39;,\r\n            value: [ &#39;55b66bb127772e0efc3669e2&#39;, &#39;55b66bb127772e0efc3669d9&#39; ]\r\n          },\r\n          { attr: &#39;comment&#39;, value: &#39;&#39; },\r\n          { attr: &#39;completed_date&#39;, value: &#39;2015-09-15T06:30:05Z&#39; },\r\n          { attr: &#39;completed_user_id&#39;, value: &#39;MARINO Thierry&#39; },\r\n          {\r\n            attr: &#39;completing_date&#39;,\r\n            value: &#39;2015-09-15T06:29:29.843Z&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_displayname&#39;,\r\n            value: &#39;MARINO Thierry&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_email&#39;,\r\n            value: &#39;Thierry.MARINO@simu.com&#39;\r\n          },\r\n          {\r\n            attr: &#39;completing_user_id&#39;,\r\n            value: &#39;55b66bb127772e0efc3669e2&#39;\r\n          },\r\n          { attr: &#39;last_mod_date&#39;, value: &#39;2015-09-15T06:30:05Z&#39; },\r\n          { attr: &#39;last_mod_user_login&#39;, value: &#39;MARINO Thierry&#39; }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\n\r\n\r\nquery.put(&quot;nodes._id&quot;,&quot;core&quot;);\r\nquery.put(&quot;nodes.attvalues&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;attr&quot;,&quot;last_mod_date&quot;)));\r\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;value&quot;,new BasicDBObject(&quot;$gt&quot;,then.format(format)))));\r\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;value&quot;,new BasicDBObject(&quot;$lt&quot;,now.format(format)))));","title":"How to add $elemMatch of mongodb in java code?","body":"<p>this is my query\ndb.collectionname.find( {&quot;nodes._id&quot;:&quot;core&quot;,&quot;nodes.attvalues&quot;:{&quot;$elemMatch&quot;:{attr:&quot;last_mod_date&quot;,value:{$gte:&quot;2023-09-17T00:00:00Z&quot;,$lt:&quot;2023-09-24T00:00:00Z&quot;}}}}).count();</p>\n<p>I want to use it in my java code.</p>\n<p>The below code is giving me the data.</p>\n<pre><code>DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'00:00:00'Z'&quot;);\n\n        LocalDateTime now = LocalDateTime.now();\n        LocalDateTime then = now.minusDays(8);\n\nBasicDBObject query = new BasicDBObject();\nquery.put(&quot;nodes._id&quot;,&quot;core&quot;);\nquery.put(&quot;nodes.attvalues.attr&quot;,&quot;last_mod_date&quot;);\nquery.put(&quot;nodes.attvalues.value&quot;,new BasicDBObject(&quot;$gt&quot;,then.format(format)));\nquery.put(&quot;nodes.attvalues.value&quot;,new BasicDBObject(&quot;$lt&quot;,now.format(format)));\n\n</code></pre>\n<p>But I want to that how can i update the current code with the above mongo query and fetch the required data from the db.</p>\n<p>The collection looks like this.</p>\n<pre><code>[\n  {\n    _id: '55f6d14b5ddb3ae7d5d08a7b',\n    _class: 'com.somfy.pcpwebapp.domain.SWOGraph',\n    label: '5100188/C - Make - Gray ',\n    mode: 'directed',\n    type: 'workflow',\n    nodes: [\n      {\n        _id: 'core',\n        label: 'core',\n        type: 'core',\n        attvalues: [\n          { attr: 'creation_date', value: '2015-09-14T13:53:06.000Z' },\n          { attr: 'designation', value: 'LEAFLET UTIL. DEXXO PRO RTS' },\n          { attr: 'distribution_sites', value: [] },\n          { attr: 'distribution_workflow_ids', value: {} },\n          { attr: 'flow', value: '1' },\n          { attr: 'flow_to_task_definition_ids', value: [ [Array] ] },\n          { attr: 'last_mod_date', value: '2023-09-20T07:23:30.093Z' },\n          {\n            attr: 'last_mod_user_id',\n            value: '55b66bb127772e0efc3669e2'\n          },\n          { attr: 'last_mod_user_login', value: 'marith01' },\n          { attr: 'manuf_exists_offserie', value: '' }\n        ]\n      },\n      {\n        _id: 'MethodsSite',\n        label: 'MethodsSite',\n        type: 'task',\n        attvalues: [\n          {\n            attr: 'assignable_user_ids',\n            value: [\n              '55b66bb127772e0efc3669cf',\n              '55b66bb127772e0efc3669e2',\n              '55b66bb127772e0efc3669da',\n              '55b66bb127772e0efc3669d9',\n              '55f29e07618fe271f2c57227'\n            ]\n          },\n          {\n            attr: 'assigned_user_displaynames',\n            value: [ 'MARINO Thierry', 'RAZNIK Pascal' ]\n          },\n          {\n            attr: 'assigned_user_emails',\n            value: [ 'Thierry.MARINO@simu.com', 'Pascal.RAZNIK@simu.com' ]\n          },\n          {\n            attr: 'assigned_user_ids',\n            value: [ '55b66bb127772e0efc3669e2', '55b66bb127772e0efc3669d9' ]\n          },\n          { attr: 'comment', value: '' },\n          { attr: 'completed_date', value: '2015-09-15T06:30:05Z' },\n          { attr: 'completed_user_id', value: 'MARINO Thierry' },\n          {\n            attr: 'completing_date',\n            value: '2015-09-15T06:29:29.843Z'\n          },\n          {\n            attr: 'completing_user_displayname',\n            value: 'MARINO Thierry'\n          },\n          {\n            attr: 'completing_user_email',\n            value: 'Thierry.MARINO@simu.com'\n          },\n          {\n            attr: 'completing_user_id',\n            value: '55b66bb127772e0efc3669e2'\n          },\n          { attr: 'last_mod_date', value: '2015-09-03T06:30:05Z' },\n          { attr: 'last_mod_user_login', value: 'MARINO Thierry' }\n        ]\n      }\n    ]\n  },\n  {\n    _id: '55f6d14b5ddb3ae7d5d09a8b',\n    _class: 'com.somfy.pcpwebapp.domain.SWOGraph',\n    label: '5100188/C - Make - Demo ',\n    mode: 'directed',\n    type: 'workflow',\n    nodes: [\n      {\n        _id: 'core',\n        label: 'core',\n        type: 'coree',\n        attvalues: [\n          { attr: 'creation_date', value: '2015-09-14T13:53:06.000Z' },\n          { attr: 'designation', value: 'LEAFLET UTIL. DEXXO PRO RTS' },\n          { attr: 'distribution_sites', value: [] },\n          { attr: 'distribution_workflow_ids', value: {} },\n          { attr: 'flow', value: '1' },\n          { attr: 'flow_to_task_definition_ids', value: [ [Array] ] },\n          { attr: 'last_mod_date', value: '2015-09-30T07:23:30.093Z' },\n          {\n            attr: 'last_mod_user_id',\n            value: '55b66bb127772e0efc3669e2'\n          },\n          { attr: 'last_mod_user_login', value: 'marith01' },\n          { attr: 'manuf_exists_offserie', value: '' }\n        ]\n      },\n      {\n        _id: 'MethodsSite',\n        label: 'MethodsSite',\n        type: 'task',\n        attvalues: [\n          {\n            attr: 'assignable_user_ids',\n            value: [\n              '55b66bb127772e0efc3669cf',\n              '55b66bb127772e0efc3669e2',\n              '55b66bb127772e0efc3669da',\n              '55b66bb127772e0efc3669d9',\n              '55f29e07618fe271f2c57227'\n            ]\n          },\n          {\n            attr: 'assigned_user_displaynames',\n            value: [ 'MARINO Thierry', 'RAZNIK Pascal' ]\n          },\n          {\n            attr: 'assigned_user_emails',\n            value: [ 'Thierry.MARINO@simu.com', 'Pascal.RAZNIK@simu.com' ]\n          },\n          {\n            attr: 'assigned_user_ids',\n            value: [ '55b66bb127772e0efc3669e2', '55b66bb127772e0efc3669d9' ]\n          },\n          { attr: 'comment', value: '' },\n          { attr: 'completed_date', value: '2015-09-15T06:30:05Z' },\n          { attr: 'completed_user_id', value: 'MARINO Thierry' },\n          {\n            attr: 'completing_date',\n            value: '2015-09-15T06:29:29.843Z'\n          },\n          {\n            attr: 'completing_user_displayname',\n            value: 'MARINO Thierry'\n          },\n          {\n            attr: 'completing_user_email',\n            value: 'Thierry.MARINO@simu.com'\n          },\n          {\n            attr: 'completing_user_id',\n            value: '55b66bb127772e0efc3669e2'\n          },\n          { attr: 'last_mod_date', value: '2015-09-15T06:30:05Z' },\n          { attr: 'last_mod_user_login', value: 'MARINO Thierry' }\n        ]\n      }\n    ]\n  }\n]\n</code></pre>\n<p>query.put(&quot;nodes._id&quot;,&quot;core&quot;);\nquery.put(&quot;nodes.attvalues&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;attr&quot;,&quot;last_mod_date&quot;)));\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;value&quot;,new BasicDBObject(&quot;$gt&quot;,then.format(format)))));\nquery.put(&quot;nodes.attvalues.&quot;,new BasicDBObject(&quot;$elemMatch&quot;,new BasicDBObject(&quot;value&quot;,new BasicDBObject(&quot;$lt&quot;,now.format(format)))));</p>\n"},{"tags":["java","spring-boot","kubernetes","jvm","java-11"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1695799384,"post_id":77185098,"comment_id":136070858,"body_markdown":"I suggest that you start by finding out why the pods were restarting.","body":"I suggest that you start by finding out why the pods were restarting."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695803610,"post_id":77185098,"comment_id":136071630,"body_markdown":"Which kind of threads were reduced? Is it a specific thread pool?","body":"Which kind of threads were reduced? Is it a specific thread pool?"},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1695803622,"post_id":77185098,"comment_id":136071636,"body_markdown":"Recent Java version obtain more information about their run environment when running in a container. It is possible that it uses/reports a lower CPU count because of the requests/limits you configured for your pod, this in turn may lead to libraries using a lower number of threads for thread pools and such. You may need to manually override this by instructing Java to assume a higher CPU count with `-XX:ActiveProcessorCount`, e.g, `-XX:ActiveProcessorCount=4` to assume four CPUs.","body":"Recent Java version obtain more information about their run environment when running in a container. It is possible that it uses/reports a lower CPU count because of the requests/limits you configured for your pod, this in turn may lead to libraries using a lower number of threads for thread pools and such. You may need to manually override this by instructing Java to assume a higher CPU count with <code>-XX:ActiveProcessorCount</code>, e.g, <code>-XX:ActiveProcessorCount=4</code> to assume four CPUs."},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695803770,"post_id":77185098,"comment_id":136071667,"body_markdown":"Alternatively, find out if you can configure Undertow manually to use a higher thread count instead of deriving it from the CPU count.","body":"Alternatively, find out if you can configure Undertow manually to use a higher thread count instead of deriving it from the CPU count."},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695812426,"post_id":77185098,"comment_id":136073412,"body_markdown":"If I manually increase the undertow thread count will it not affect the performance of the application?","body":"If I manually increase the undertow thread count will it not affect the performance of the application?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695812506,"post_id":77185098,"comment_id":136073425,"body_markdown":"Changing the amount of threads will likely affect the performance of your application. But isn&#39;t that what you want?","body":"Changing the amount of threads will likely affect the performance of your application. But isn&#39;t that what you want?"},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695812707,"post_id":77185098,"comment_id":136073448,"body_markdown":"The configuration for requests/limits hasn&#39;t changed. It is the same as before migration.","body":"The configuration for requests/limits hasn&#39;t changed. It is the same as before migration."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695812804,"post_id":77185098,"comment_id":136073473,"body_markdown":"The ideal configuration may be different with different Spring/Java versions.","body":"The ideal configuration may be different with different Spring/Java versions."},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695812854,"post_id":77185098,"comment_id":136073480,"body_markdown":"Is there any formula to see how many threads I can increase to? for now, the undertow threads are 16 which is a default value.","body":"Is there any formula to see how many threads I can increase to? for now, the undertow threads are 16 which is a default value."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1695812905,"post_id":77185098,"comment_id":136073493,"body_markdown":"I guess you need to try out different values and see what works best. There are formulas like `number of threads = number of cores * estimated IO time / estimated CPU time` but there are also some issues with that (i.e. at some point, you&#39;ll reach OS or memory limitations when creating too many threads)","body":"I guess you need to try out different values and see what works best. There are formulas like <code>number of threads = number of cores * estimated IO time &#47; estimated CPU time</code> but there are also some issues with that (i.e. at some point, you&#39;ll reach OS or memory limitations when creating too many threads)"},{"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"score":0,"creation_date":1695813008,"post_id":77185098,"comment_id":136073517,"body_markdown":"Is there a way to find the configuration for the Java version?\nWill the docker image also impact the CPU count?","body":"Is there a way to find the configuration for the Java version? Will the docker image also impact the CPU count?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1695813090,"post_id":77185098,"comment_id":136073534,"body_markdown":"Try it and see what works best.","body":"Try it and see what works best."},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695887024,"post_id":77185098,"comment_id":136084388,"body_markdown":"_&quot;The configuration for requests/limits hasn&#39;t changed.&quot;_. You upgraded from Java 8, and since - I believe - Java 10, Java will get more information about the container it&#39;s running in, and use that to calculate an estimate of the equivalent processor count, where previously it would likely use the actual processor count of the underlying machine. If a threadpool is configured using that processor count, you will now get a smaller thread pool.","body":"<i>&quot;The configuration for requests/limits hasn&#39;t changed.&quot;</i>. You upgraded from Java 8, and since - I believe - Java 10, Java will get more information about the container it&#39;s running in, and use that to calculate an estimate of the equivalent processor count, where previously it would likely use the actual processor count of the underlying machine. If a threadpool is configured using that processor count, you will now get a smaller thread pool."}],"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695803470,"creation_date":1695796129,"question_id":77185098,"body_markdown":"I migrated the Application that was running in Java 8 and Spring Boot version 2.0.8.RELEASE to Java 11 and Spring Boot version 2.7.11.\r\n\r\nMigration was successful and the application is working fine but I could see the JVM threads were reduced a lot and also able to see the undertow server queue was high after migration and due to this, there was an increase in latency. Kubernetes pods were restarting during the high latency time the CPU usage was also high.","title":"JVM threads count decreased after Java 11 migration causing high latency","body":"<p>I migrated the Application that was running in Java 8 and Spring Boot version 2.0.8.RELEASE to Java 11 and Spring Boot version 2.7.11.</p>\n<p>Migration was successful and the application is working fine but I could see the JVM threads were reduced a lot and also able to see the undertow server queue was high after migration and due to this, there was an increase in latency. Kubernetes pods were restarting during the high latency time the CPU usage was also high.</p>\n"},{"tags":["java","constructor","initialization","base-class"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1695206749,"post_id":77141529,"comment_id":135992343,"body_markdown":"Try it where `id` is not constant - where it&#39;s passed in to `Foo`&#39;s constructor.","body":"Try it where <code>id</code> is not constant - where it&#39;s passed in to <code>Foo</code>&#39;s constructor."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":4,"creation_date":1695207600,"post_id":77141529,"comment_id":135992516,"body_markdown":"Final fields are initialized very early and overridable methods at that point means you&#39;re basically calling a method on a not-fully-initialized object, so there&#39;s a good amount of risk there.","body":"Final fields are initialized very early and overridable methods at that point means you&#39;re basically calling a method on a not-fully-initialized object, so there&#39;s a good amount of risk there."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695231103,"post_id":77141529,"comment_id":135998069,"body_markdown":"A better idea is to remove `protected final String name` entirely.  Any code in Base that needs the name can just… call `calName()` as needed.  Much simpler and cleaner.","body":"A better idea is to remove <code>protected final String name</code> entirely.  Any code in Base that needs the name can just… call <code>calName()</code> as needed.  Much simpler and cleaner."}],"answers":[{"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695218862,"creation_date":1695212170,"answer_id":77142330,"question_id":77141529,"body_markdown":"No, it is not ok.\r\n\r\nCall to abstract method (as well as any kind of overridable method) during object construction is a bad idea.\r\n\r\nSuch calls may result in subtle bugs, as object initialization may happen before the method call.","title":"Is it ok to initialize final member in abstract base class using abtract method?","body":"<p>No, it is not ok.</p>\n<p>Call to abstract method (as well as any kind of overridable method) during object construction is a bad idea.</p>\n<p>Such calls may result in subtle bugs, as object initialization may happen before the method call.</p>\n"},{"tags":[],"owner":{"account_id":6996158,"reputation":63,"user_id":7006701,"display_name":"Y.F."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695802922,"creation_date":1695802922,"answer_id":77185718,"question_id":77141529,"body_markdown":"Thanks for all your opinions. Now I&#39;ve got some idea about how to handle such situations.\r\n\r\n1. If the field can be constructed directly using default ctor and configured later, I can construct it in the base class as a final field and configure it during the derived constructing phase:\r\n\r\n        abstract class Base {\r\n            protected final Widget core = new Widget();\r\n            public void methodThatUsesCore() { core.display(); }\r\n        }\r\n        public final class Foo42 extends Base {\r\n            {\r\n                core.configure(42, &quot;jklmn&quot;);\r\n            }\r\n        }\r\n\r\n2. If the field has to be constructed with info provided by the derived class, I should put it into the derived class and add an abstract getter in the base class:\r\n\r\n        abstract class Base {\r\n            protected abstract Widget getCore();\r\n            public void methodThatUsesCore() { getCore().display(); }\r\n        }\r\n        public final class Foo42 extends Base {\r\n            private final Widget core = new Widget(42, &quot;jklmn&quot;);\r\n            @Override\r\n            protected Widget getCore() { return core; }\r\n        }\r\n\r\nIs it a reasonable design?","title":"Is it ok to initialize final member in abstract base class using abtract method?","body":"<p>Thanks for all your opinions. Now I've got some idea about how to handle such situations.</p>\n<ol>\n<li><p>If the field can be constructed directly using default ctor and configured later, I can construct it in the base class as a final field and configure it during the derived constructing phase:</p>\n<pre><code> abstract class Base {\n     protected final Widget core = new Widget();\n     public void methodThatUsesCore() { core.display(); }\n }\n public final class Foo42 extends Base {\n     {\n         core.configure(42, &quot;jklmn&quot;);\n     }\n }\n</code></pre>\n</li>\n<li><p>If the field has to be constructed with info provided by the derived class, I should put it into the derived class and add an abstract getter in the base class:</p>\n<pre><code> abstract class Base {\n     protected abstract Widget getCore();\n     public void methodThatUsesCore() { getCore().display(); }\n }\n public final class Foo42 extends Base {\n     private final Widget core = new Widget(42, &quot;jklmn&quot;);\n     @Override\n     protected Widget getCore() { return core; }\n }\n</code></pre>\n</li>\n</ol>\n<p>Is it a reasonable design?</p>\n"}],"owner":{"account_id":6996158,"reputation":63,"user_id":7006701,"display_name":"Y.F."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695802922,"creation_date":1695205759,"question_id":77141529,"body_markdown":"I wonder whether I could initialze a final field in an abstract base class with the result of an abtract method, which would be implemented by the derived class.\r\nI understand that derived ctor would call base ctor first, so I guarantee that the abtract method implementation would also depend only on defined-on-declaration final fields of the derived class.\r\nI try the following code and it seems working.\r\n\r\n```\r\nabstract class Base {\r\n    protected final String name = calName();\r\n    protected abstract String calName();\r\n}\r\n\r\npublic final class Foo extends Base {\r\n    private final String id = &quot;42&quot;;\r\n    @Override\r\n    protected String calName() {\r\n        return String.format(&quot;WithId%s&quot;, id);\r\n    }\r\n    public void display() {\r\n        System.out.printf(&quot;name: %s\\n&quot;, name);\r\n        System.out.printf(&quot;id:   %s\\n&quot;, id);\r\n    }\r\n    public static void main(String[] args) {\r\n        var foo = new Foo();\r\n        foo.display();\r\n    }\r\n}\r\n```\r\n\r\n\r\nSo is this a legit action in java, or is it a very bad idea?","title":"Is it ok to initialize final member in abstract base class using abtract method?","body":"<p>I wonder whether I could initialze a final field in an abstract base class with the result of an abtract method, which would be implemented by the derived class.\nI understand that derived ctor would call base ctor first, so I guarantee that the abtract method implementation would also depend only on defined-on-declaration final fields of the derived class.\nI try the following code and it seems working.</p>\n<pre><code>abstract class Base {\n    protected final String name = calName();\n    protected abstract String calName();\n}\n\npublic final class Foo extends Base {\n    private final String id = &quot;42&quot;;\n    @Override\n    protected String calName() {\n        return String.format(&quot;WithId%s&quot;, id);\n    }\n    public void display() {\n        System.out.printf(&quot;name: %s\\n&quot;, name);\n        System.out.printf(&quot;id:   %s\\n&quot;, id);\n    }\n    public static void main(String[] args) {\n        var foo = new Foo();\n        foo.display();\n    }\n}\n</code></pre>\n<p>So is this a legit action in java, or is it a very bad idea?</p>\n"},{"tags":["python","java","jmeter","traffic"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695802768,"creation_date":1695802768,"answer_id":77185698,"question_id":77181967,"body_markdown":" 1. Check [jmeter.log file][1] for any suspicious entries \r\n 2. Check if your `response` variable contains the line you&#39;re looking for, you can print it to i.e. the aforementioned `jmeter.log` file with the following line of code:\r\n\r\n        log.info(response.toString());\r\n\r\n    and see what is being returned\r\n 3. [Since JMeter 3.1 it&#39;s recommended to use JSR223 Sampler and Groovy language for scripting][2] mainly for performance reasons. Moreover Groovy has some &quot;syntax sugar&quot; so your code can be shortened to something like:\r\n\r\n\t\tString response = &quot;python myscript.py&quot;.execute().text\r\n\t\t\r\n\t\tif (response.contains(&quot;ERROR-TRAFFIC&quot;)){\r\n\t\t    SampleResult.setResponseCode(&quot;500&quot;);\r\n\t\t    SampleResult.setSuccessful(false);\r\n\t\t}\r\n\r\n   More information on Groovy scripting in JMeter: [Apache Groovy: What Is Groovy Used For?][3]\r\n\r\n\r\n  [1]: https://jmeter.apache.org/usermanual/get-started.html#logging\r\n  [2]: https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\r\n  [3]: https://www.blazemeter.com/blog/apache-groovy","title":"jmeter SampleResult.setSuccessful(false) not working","body":"<ol>\n<li><p>Check <a href=\"https://jmeter.apache.org/usermanual/get-started.html#logging\" rel=\"nofollow noreferrer\">jmeter.log file</a> for any suspicious entries</p>\n</li>\n<li><p>Check if your <code>response</code> variable contains the line you're looking for, you can print it to i.e. the aforementioned <code>jmeter.log</code> file with the following line of code:</p>\n<pre><code>log.info(response.toString());\n</code></pre>\n<p>and see what is being returned</p>\n</li>\n<li><p><a href=\"https://jmeter.apache.org/usermanual/best-practices.html#bsh_scripting\" rel=\"nofollow noreferrer\">Since JMeter 3.1 it's recommended to use JSR223 Sampler and Groovy language for scripting</a> mainly for performance reasons. Moreover Groovy has some &quot;syntax sugar&quot; so your code can be shortened to something like:</p>\n<pre><code>String response = &quot;python myscript.py&quot;.execute().text\n\nif (response.contains(&quot;ERROR-TRAFFIC&quot;)){\n    SampleResult.setResponseCode(&quot;500&quot;);\n    SampleResult.setSuccessful(false);\n}\n</code></pre>\n</li>\n</ol>\n<p>More information on Groovy scripting in JMeter: <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Apache Groovy: What Is Groovy Used For?</a></p>\n"}],"owner":{"account_id":29540499,"reputation":11,"user_id":22639286,"display_name":"ing-95"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695802768,"creation_date":1695746656,"question_id":77181967,"body_markdown":"I&#39;m using a loop of beanShell samplers starting threads and, for each thread, a python script is executed, that returns a particular string. I want the thread to fail if the returning string contains a specific error. \r\n\r\nHere my code:\r\n\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStreamReader;\r\n\r\nRuntime r = Runtime.getRuntime();\r\nProcess p = r.exec(&quot;python myscript.py&quot;);\r\np.waitFor();\r\nBufferedReader b = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\nString line = &quot;&quot;;\r\nStringBuilder response = new StringBuilder();\r\nwhile ((line = b.readLine()) != null) {\r\n    response.append(line);\r\n    response.append(&quot;\\n&quot;);\r\n}\r\nb.close();\r\n\r\nif (response.toString().contains(&quot;ERROR-TRAFFIC&quot;)){\r\n    SampleResult.setResponseCode(&quot;500&quot;); \r\n    SampleResult.setSuccessful(false);\r\n}\r\n```\r\n\r\n\r\nUsing this code, if condition is correctly executed when the error is present, but in the traffic results I don&#39;t see any thread failure. Any hints ??\r\n","title":"jmeter SampleResult.setSuccessful(false) not working","body":"<p>I'm using a loop of beanShell samplers starting threads and, for each thread, a python script is executed, that returns a particular string. I want the thread to fail if the returning string contains a specific error.</p>\n<p>Here my code:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\nRuntime r = Runtime.getRuntime();\nProcess p = r.exec(&quot;python myscript.py&quot;);\np.waitFor();\nBufferedReader b = new BufferedReader(new InputStreamReader(p.getInputStream()));\nString line = &quot;&quot;;\nStringBuilder response = new StringBuilder();\nwhile ((line = b.readLine()) != null) {\n    response.append(line);\n    response.append(&quot;\\n&quot;);\n}\nb.close();\n\nif (response.toString().contains(&quot;ERROR-TRAFFIC&quot;)){\n    SampleResult.setResponseCode(&quot;500&quot;); \n    SampleResult.setSuccessful(false);\n}\n</code></pre>\n<p>Using this code, if condition is correctly executed when the error is present, but in the traffic results I don't see any thread failure. Any hints ??</p>\n"},{"tags":["java","maven","groovy","compiler-errors","lombok"],"answers":[{"tags":[],"owner":{"account_id":1367113,"reputation":22105,"user_id":1303324,"accept_rate":83,"display_name":"Krzysztof Atłasik"},"down_vote_count":1,"up_vote_count":17,"is_accepted":true,"score":16,"last_activity_date":1505650317,"creation_date":1505593605,"answer_id":46258158,"question_id":46257162,"body_markdown":"You shouldn&#39;t use Lombok for Groovy, it is intended to be used only with Java. \r\n\r\nGroovy has built-in annotation `@Canonical` which does what you want:\r\n\r\n * it creates useful equals, hashCode and toString methods\r\n * it creates no-arg and tuple constructor\r\n\r\nSo in your case use:\r\n\r\n    @Canonical\r\n    public class Rocket {}\r\n\r\nAdditionally you don&#39;t need to create getters and setters for fields in Groovy. If you add any field to your class, Groovy would [create getters and setters](http://groovy-lang.org/objectorientation.html#_fields_and_properties).","title":"Compilation error - Groovy and Lombok","body":"<p>You shouldn't use Lombok for Groovy, it is intended to be used only with Java. </p>\n\n<p>Groovy has built-in annotation <code>@Canonical</code> which does what you want:</p>\n\n<ul>\n<li>it creates useful equals, hashCode and toString methods</li>\n<li>it creates no-arg and tuple constructor</li>\n</ul>\n\n<p>So in your case use:</p>\n\n<pre><code>@Canonical\npublic class Rocket {}\n</code></pre>\n\n<p>Additionally you don't need to create getters and setters for fields in Groovy. If you add any field to your class, Groovy would <a href=\"http://groovy-lang.org/objectorientation.html#_fields_and_properties\" rel=\"noreferrer\">create getters and setters</a>.</p>\n"},{"tags":[],"owner":{"account_id":15326359,"reputation":661,"user_id":11057391,"display_name":"Saravanan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695801758,"creation_date":1695801758,"answer_id":77185617,"question_id":46257162,"body_markdown":"I was also having issue on using Lombok with groovy. (It wasn&#39;t generating any code) So I just changed my model class to `.java` and did the lombok stuff on the java class. Since we can intermix java and groovy code without any issue, I&#39;m now able to use it without any issue.","title":"Compilation error - Groovy and Lombok","body":"<p>I was also having issue on using Lombok with groovy. (It wasn't generating any code) So I just changed my model class to <code>.java</code> and did the lombok stuff on the java class. Since we can intermix java and groovy code without any issue, I'm now able to use it without any issue.</p>\n"}],"owner":{"account_id":2634858,"reputation":540,"user_id":2279856,"accept_rate":71,"display_name":"Arthur Kharkivskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5890,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":46258158,"answer_count":2,"score":7,"last_activity_date":1695801758,"creation_date":1505586635,"question_id":46257162,"body_markdown":"Here is my Maven command\r\n\r\n    mvn clean compile test-compile test\r\nfor\r\n[this project][1]\r\n\r\nbut I am facing with\r\n \r\n[ERROR] no more tokens - could not parse error message: Groovy:unable to resolve class Delegate ,  unable to find class for annotation\r\n[ERROR] 12. ERROR in D:\\Projects\\lombok-groovy-example-master\\src\\main\\groovy\\prystasj\\lombok\\example\\groovy\\Rocket.groovy (at line 5)\r\n[ERROR] @Data\r\n\r\nmvn --version\r\n\r\n    Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T22:39:06+03:00)\r\n\r\njava -version\r\n\r\n    java version &quot;1.8.0_144&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_144-b01)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\r\n\r\n\r\n  [1]: https://github.com/prystasj/lombok-groovy-example\r\n\r\nCode from repository\r\n\r\n    &lt;properties&gt;\r\n        &lt;groovy.version&gt;2.0.5&lt;/groovy.version&gt;\r\n        &lt;java.version&gt;1.6&lt;/java.version&gt;\r\n        &lt;lombok.version&gt;0.11.4&lt;/lombok.version&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n\r\n        &lt;build&gt;\r\n        &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.2&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n        &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;\r\n        &lt;fork&gt;true&lt;/fork&gt;\r\n        &lt;verbose&gt;false&lt;/verbose&gt;\r\n        &lt;source&gt;${java.version}&lt;/source&gt;\r\n        &lt;target&gt;${java.version}&lt;/target&gt;\r\n        &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\r\n        &lt;compilerArguments&gt;\r\n        &lt;javaAgentClass&gt;lombok.core.Agent&lt;/javaAgentClass&gt;\r\n        &lt;/compilerArguments&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n        &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.0-01&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;//...\r\n    \r\nClass (file on git differs!)\r\n\r\n    @Data\r\n    public class Rocket {\r\n    }","title":"Compilation error - Groovy and Lombok","body":"<p>Here is my Maven command</p>\n\n<pre><code>mvn clean compile test-compile test\n</code></pre>\n\n<p>for\n<a href=\"https://github.com/prystasj/lombok-groovy-example\" rel=\"noreferrer\">this project</a></p>\n\n<p>but I am facing with</p>\n\n<p>[ERROR] no more tokens - could not parse error message: Groovy:unable to resolve class Delegate ,  unable to find class for annotation\n[ERROR] 12. ERROR in D:\\Projects\\lombok-groovy-example-master\\src\\main\\groovy\\prystasj\\lombok\\example\\groovy\\Rocket.groovy (at line 5)\n[ERROR] @Data</p>\n\n<p>mvn --version</p>\n\n<pre><code>Apache Maven 3.5.0 (ff8f5e7444045639af65f6095c62210b5713f426; 2017-04-03T22:39:06+03:00)\n</code></pre>\n\n<p>java -version</p>\n\n<pre><code>java version \"1.8.0_144\"\nJava(TM) SE Runtime Environment (build 1.8.0_144-b01)\nJava HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\n</code></pre>\n\n<p>Code from repository</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;groovy.version&gt;2.0.5&lt;/groovy.version&gt;\n    &lt;java.version&gt;1.6&lt;/java.version&gt;\n    &lt;lombok.version&gt;0.11.4&lt;/lombok.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n    &lt;plugins&gt;\n    &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n    &lt;configuration&gt;\n    &lt;compilerId&gt;groovy-eclipse-compiler&lt;/compilerId&gt;\n    &lt;fork&gt;true&lt;/fork&gt;\n    &lt;verbose&gt;false&lt;/verbose&gt;\n    &lt;source&gt;${java.version}&lt;/source&gt;\n    &lt;target&gt;${java.version}&lt;/target&gt;\n    &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;\n    &lt;compilerArguments&gt;\n    &lt;javaAgentClass&gt;lombok.core.Agent&lt;/javaAgentClass&gt;\n    &lt;/compilerArguments&gt;\n    &lt;/configuration&gt;\n    &lt;dependencies&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n    &lt;artifactId&gt;groovy-eclipse-compiler&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0-01&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;version&gt;${lombok.version}&lt;/version&gt;\n    &lt;/dependency&gt;//...\n</code></pre>\n\n<p>Class (file on git differs!)</p>\n\n<pre><code>@Data\npublic class Rocket {\n}\n</code></pre>\n"},{"tags":["java","android","string","split"],"answers":[{"tags":[],"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1367753135,"creation_date":1367752401,"answer_id":16383909,"question_id":16383898,"body_markdown":"Try with regex `\\[(.*?)\\]` to match the words. \r\n\r\n`\\[`: escaped `[` for literal match as it is a meta char.\r\n\r\n`(.*?)` : match everything in a non-greedy way.\r\n\r\n\r\nSample code:\r\n\r\n    Pattern p = Pattern.compile(&quot;\\\\[(.*?)\\\\]&quot;);\r\n    Matcher m = p.matcher(&quot;Where Are You [Employee Name]? your have a [Shift] shift.&quot;);\r\n    while(m.find()) {\r\n        System.out.println(m.group());\r\n    }","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>Try with regex <code>\\[(.*?)\\]</code> to match the words. </p>\n\n<p><code>\\[</code>: escaped <code>[</code> for literal match as it is a meta char.</p>\n\n<p><code>(.*?)</code> : match everything in a non-greedy way.</p>\n\n<p>Sample code:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"\\\\[(.*?)\\\\]\");\nMatcher m = p.matcher(\"Where Are You [Employee Name]? your have a [Shift] shift.\");\nwhile(m.find()) {\n    System.out.println(m.group());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":227022,"reputation":8243,"user_id":488434,"accept_rate":100,"display_name":"Ahmad Kayyali"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1367753008,"creation_date":1367752652,"answer_id":16383942,"question_id":16383898,"body_markdown":"Here you go Java regular expression that extract text between two brackets ***including white spaces***:\r\n\r\n\r\n    import java.util.regex.*;\r\n    \r\n    class Main\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n        String txt=&quot;[ Employee Name ]&quot;;\r\n    \r\n        String re1=&quot;.*?&quot;;\t\r\n        String re2=&quot;( )&quot;;\t\r\n        String re3=&quot;((?:[a-z][a-z]+))&quot;;\t// Word 1\r\n        String re4=&quot;( )&quot;;\t\r\n        String re5=&quot;((?:[a-z][a-z]+))&quot;;\t// Word 2\r\n        String re6=&quot;( )&quot;;\t\r\n    \r\n        Pattern p = Pattern.compile(re1+re2+re3+re4+re5+re6,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);\r\n        Matcher m = p.matcher(txt);\r\n        if (m.find())\r\n        {\r\n            String ws1=m.group(1);\r\n            String word1=m.group(2);\r\n            String ws2=m.group(3);\r\n            String word2=m.group(4);\r\n            String ws3=m.group(5);\r\n            System.out.print(&quot;(&quot;+ws1.toString()+&quot;)&quot;+&quot;(&quot;+word1.toString()+&quot;)&quot;+&quot;(&quot;+ws2.toString()+&quot;)&quot;+&quot;(&quot;+word2.toString()+&quot;)&quot;+&quot;(&quot;+ws3.toString()+&quot;)&quot;+&quot;\\n&quot;);\r\n        }\r\n      }\r\n    }\r\n\r\nif you want to ignore white space remove `&quot;( )&quot;;`","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>Here you go Java regular expression that extract text between two brackets <strong><em>including white spaces</em></strong>:</p>\n\n<pre><code>import java.util.regex.*;\n\nclass Main\n{\n  public static void main(String[] args)\n  {\n    String txt=\"[ Employee Name ]\";\n\n    String re1=\".*?\";   \n    String re2=\"( )\";   \n    String re3=\"((?:[a-z][a-z]+))\"; // Word 1\n    String re4=\"( )\";   \n    String re5=\"((?:[a-z][a-z]+))\"; // Word 2\n    String re6=\"( )\";   \n\n    Pattern p = Pattern.compile(re1+re2+re3+re4+re5+re6,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);\n    Matcher m = p.matcher(txt);\n    if (m.find())\n    {\n        String ws1=m.group(1);\n        String word1=m.group(2);\n        String ws2=m.group(3);\n        String word2=m.group(4);\n        String ws3=m.group(5);\n        System.out.print(\"(\"+ws1.toString()+\")\"+\"(\"+word1.toString()+\")\"+\"(\"+ws2.toString()+\")\"+\"(\"+word2.toString()+\")\"+\"(\"+ws3.toString()+\")\"+\"\\n\");\n    }\n  }\n}\n</code></pre>\n\n<p>if you want to ignore white space remove <code>\"( )\";</code></p>\n"},{"tags":[],"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367752890,"creation_date":1367752705,"answer_id":16383950,"question_id":16383898,"body_markdown":"Use a [StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html) (I assume you don&#39;t need synchronization).\r\n\r\nAs you suggested, `indexOf()` using your square bracket delimiters will give you a starting index and an ending index.  use substring(startIndex + 1, endIndex - 1) to get exactly the string you want.\r\n\r\nI&#39;m not sure what you meant by the end of the String, but `indexOf(&quot;[&quot;)` is the start and `indexOf(&quot;]&quot;)` is the end.","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>Use a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow\">StringBuilder</a> (I assume you don't need synchronization).</p>\n\n<p>As you suggested, <code>indexOf()</code> using your square bracket delimiters will give you a starting index and an ending index.  use substring(startIndex + 1, endIndex - 1) to get exactly the string you want.</p>\n\n<p>I'm not sure what you meant by the end of the String, but <code>indexOf(\"[\")</code> is the start and <code>indexOf(\"]\")</code> is the end.</p>\n"},{"tags":[],"owner":{"account_id":348076,"reputation":5557,"user_id":682559,"accept_rate":100,"display_name":"Nicktar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367753132,"creation_date":1367752710,"answer_id":16383951,"question_id":16383898,"body_markdown":"That&#39;s pretty much the use case for a regular expression. \r\nTry `&quot;(\\\\[[\\\\w ]*\\\\])&quot;` as your expression.\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\[[\\\\w ]*\\\\])&quot;);\r\n    Matcher m = p.matcher(&quot;Where Are You [Employee Name]? your have a [Shift] shift..&quot;);\r\n    \r\n    if (m.find()) {\r\n    \r\n        String found = m.group();\r\n    }\r\n\r\nWhat does this expression do?\r\n\r\n - First it defines a group (...) \r\n - Then it defines the starting point for that group. \\\\[ matches [ since [ itself is a &#39;keyword&#39; for regular expressions it has to be masked by \\ which is reserved in Java Strings and has to be masked by another \\\r\n - Then it defines the body of the group [\\\\w ]*... here the regexpression [] are used along with \\\\w (meaning \\w, meaning any letter, number or undescore) and a blank, meaning blank. The * means zero or more of the previous group.\r\n - Then it defines the endpoint of the group \\\\]\r\n - and closes the group )","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>That's pretty much the use case for a regular expression. \nTry <code>\"(\\\\[[\\\\w ]*\\\\])\"</code> as your expression.</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(\\\\[[\\\\w ]*\\\\])\");\nMatcher m = p.matcher(\"Where Are You [Employee Name]? your have a [Shift] shift..\");\n\nif (m.find()) {\n\n    String found = m.group();\n}\n</code></pre>\n\n<p>What does this expression do?</p>\n\n<ul>\n<li>First it defines a group (...) </li>\n<li>Then it defines the starting point for that group. \\[ matches [ since [ itself is a 'keyword' for regular expressions it has to be masked by \\ which is reserved in Java Strings and has to be masked by another \\</li>\n<li>Then it defines the body of the group [\\w ]*... here the regexpression [] are used along with \\w (meaning \\w, meaning any letter, number or undescore) and a blank, meaning blank. The * means zero or more of the previous group.</li>\n<li>Then it defines the endpoint of the group \\]</li>\n<li>and closes the group )</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1367753464,"creation_date":1367753464,"answer_id":16384064,"question_id":16383898,"body_markdown":"This is a Scanner base solution  \r\n\r\n\t\tScanner sc = new Scanner(&quot;Where Are You [Employee Name]? your have a [Shift] shift..&quot;);\r\n\t\tfor (String s; (s = sc.findWithinHorizon(&quot;(?&lt;=\\\\[).*?(?=\\\\])&quot;, 0)) != null;) {\r\n\t\t\tSystem.out.println(s);\r\n\t\t}\r\n\r\noutput\r\n\r\n    Employee Name\r\n    Shift\r\n\r\n","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>This is a Scanner base solution  </p>\n\n<pre><code>    Scanner sc = new Scanner(\"Where Are You [Employee Name]? your have a [Shift] shift..\");\n    for (String s; (s = sc.findWithinHorizon(\"(?&lt;=\\\\[).*?(?=\\\\])\", 0)) != null;) {\n        System.out.println(s);\n    }\n</code></pre>\n\n<p>output</p>\n\n<pre><code>Employee Name\nShift\n</code></pre>\n"}],"owner":{"account_id":1701242,"reputation":40799,"user_id":1561247,"accept_rate":74,"display_name":"Emil Adz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3515,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":16384064,"answer_count":5,"score":3,"last_activity_date":1695801751,"creation_date":1367752312,"question_id":16383898,"body_markdown":"I need help with a simple task in java. I have the following sentence:\r\n\r\n&gt; Where Are You [Employee Name]?\r\nyour have a [Shift] shift..\r\n\r\nI need to extract the strings that are surrounded by `[` and `]` signs.\r\n\r\nI was thinking of using the `split` method with `&quot; &quot;` parameter and then find the single words, but I have a problem using that if the phrase I&#39;m looking for contains: `&quot; &quot;`. using `indexOf` might be an option as well, only I don&#39;t know what is the indication that I have reached the end of the `String`.\r\n\r\nWhat is the best way to perform this task?\r\nAny help would be appreciated.\r\n ","title":"Find words in string surrounded by &quot;[&quot; and &quot;]&quot;:","body":"<p>I need help with a simple task in java. I have the following sentence:</p>\n\n<blockquote>\n  <p>Where Are You [Employee Name]?\n  your have a [Shift] shift..</p>\n</blockquote>\n\n<p>I need to extract the strings that are surrounded by <code>[</code> and <code>]</code> signs.</p>\n\n<p>I was thinking of using the <code>split</code> method with <code>\" \"</code> parameter and then find the single words, but I have a problem using that if the phrase I'm looking for contains: <code>\" \"</code>. using <code>indexOf</code> might be an option as well, only I don't know what is the indication that I have reached the end of the <code>String</code>.</p>\n\n<p>What is the best way to perform this task?\nAny help would be appreciated.</p>\n"},{"tags":["java","ssl","certificate","keystore","truststore"],"comments":[{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1347879450,"post_id":12456079,"comment_id":16754185,"body_markdown":"Why don&#39;t you let the trust manager via the JSSE do all this for you?","body":"Why don&#39;t you let the trust manager via the JSSE do all this for you?"},{"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"score":0,"creation_date":1347880119,"post_id":12456079,"comment_id":16754397,"body_markdown":"Because my server is also accepting non cert-auth connection. I have to let it accept all connections first and then in some case validate the client&#39;s certificate if any.","body":"Because my server is also accepting non cert-auth connection. I have to let it accept all connections first and then in some case validate the client&#39;s certificate if any."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":4,"creation_date":1347880944,"post_id":12456079,"comment_id":16754718,"body_markdown":"No, you just need to make the client certificate optional using the wantClientAuth option (instead of need).","body":"No, you just need to make the client certificate optional using the wantClientAuth option (instead of need)."},{"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"score":0,"creation_date":1347886178,"post_id":12456079,"comment_id":16756877,"body_markdown":"Actually it&#39;s how it work, but I thought it wasnt doing any validation on the client&#39;s certificate. I&#39;ve done some test after reading your comment and this is how its seems to work: If a valid client certificate is sent by the client, the connection is accepted and the request attribute X509Certificate is set with the valid certificate. If a invalid or no certificate are sent then the connection is still accepted but the request attribute is not set. Is this is right it means I just need to test the request attribute in order to know if the certificate is valid. Can you confirm this behavior?","body":"Actually it&#39;s how it work, but I thought it wasnt doing any validation on the client&#39;s certificate. I&#39;ve done some test after reading your comment and this is how its seems to work: If a valid client certificate is sent by the client, the connection is accepted and the request attribute X509Certificate is set with the valid certificate. If a invalid or no certificate are sent then the connection is still accepted but the request attribute is not set. Is this is right it means I just need to test the request attribute in order to know if the certificate is valid. Can you confirm this behavior?"},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1347886329,"post_id":12456079,"comment_id":16756947,"body_markdown":"Yes, that&#39;s how it&#39;s meant to work when you configure the client-cert authentication to be optional. I think the connection would be rejected if the certificate isn&#39;t trusted (i.e. the client shouldn&#39;t send a cert at all if its cert isn&#39;t trusted).","body":"Yes, that&#39;s how it&#39;s meant to work when you configure the client-cert authentication to be optional. I think the connection would be rejected if the certificate isn&#39;t trusted (i.e. the client shouldn&#39;t send a cert at all if its cert isn&#39;t trusted)."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1347964822,"post_id":12456079,"comment_id":16782204,"body_markdown":"@Bruno That is correct. &#39;needClientAuth&#39; isn&#39;t actually part of RFC 2246 at all, it is a Java-ism and possibly an OpenSSL-ism as well. The idea is that if no valid certificate is supplied the server closes the connection, but it isn&#39;t properly specified anywhere that I am aware of, and I&#39;ve been looking for about 9 years. If it was part of RFC 2246 you would expect an alert of some kind to be generated.","body":"@Bruno That is correct. &#39;needClientAuth&#39; isn&#39;t actually part of RFC 2246 at all, it is a Java-ism and possibly an OpenSSL-ism as well. The idea is that if no valid certificate is supplied the server closes the connection, but it isn&#39;t properly specified anywhere that I am aware of, and I&#39;ve been looking for about 9 years. If it was part of RFC 2246 you would expect an alert of some kind to be generated."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1588717345,"post_id":12456079,"comment_id":109005919,"body_markdown":"How did you get the server certificate to sign the client certificate? CAs won&#39;t give you a signing certificate. Also *why*?","body":"How did you get the server certificate to sign the client certificate? CAs won&#39;t give you a signing certificate. Also <i>why</i>?"}],"answers":[{"tags":[],"owner":{"account_id":362387,"reputation":2296,"user_id":705553,"display_name":"Ted Shaw"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1347873888,"creation_date":1347873888,"answer_id":12456401,"question_id":12456079,"body_markdown":"Please check your certificate CRL or OCSP is accessible, you can find such information in certificate, such as \r\n\r\n    [1]CRL Distribution Point\r\n         Distribution Point Name:\r\n              Full Name:\r\n                   URL=http://crl.verisign.com/pca2-g2.crl\r\n\r\n","title":"Java/Keystore Verify Signed certificate","body":"<p>Please check your certificate CRL or OCSP is accessible, you can find such information in certificate, such as </p>\n\n<pre><code>[1]CRL Distribution Point\n     Distribution Point Name:\n          Full Name:\n               URL=http://crl.verisign.com/pca2-g2.crl\n</code></pre>\n"},{"tags":[],"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620013628,"creation_date":1347888332,"answer_id":12460205,"question_id":12456079,"body_markdown":"Actually I don&#39;t need to do the validation myself. \r\n\r\nThe `SSLEngine` is already doing it. If a valid certificate is sent by the client you can get it using `getPeerCertificateChain()`: if no certificate or an invalid certificate is sent by the client `getPeerCertificateChain()` throws a exception. \r\n\r\nUsing Jetty (or any Java ServletContainer I guess) you just need to check the HttpServletRequest&#39;s attribute[&quot;javax.servlet.request.X509Certificate&quot;] to know if a valid certificate was sent by the client. \r\n\r\nI still don&#39;t know how to validate a certificate in Java but this solution is enough for me :) I don&#39;t need to do it myself anymore. Thanks to Bruno !","title":"Java/Keystore Verify Signed certificate","body":"<p>Actually I don't need to do the validation myself.</p>\n<p>The <code>SSLEngine</code> is already doing it. If a valid certificate is sent by the client you can get it using <code>getPeerCertificateChain()</code>: if no certificate or an invalid certificate is sent by the client <code>getPeerCertificateChain()</code> throws a exception.</p>\n<p>Using Jetty (or any Java ServletContainer I guess) you just need to check the HttpServletRequest's attribute[&quot;javax.servlet.request.X509Certificate&quot;] to know if a valid certificate was sent by the client.</p>\n<p>I still don't know how to validate a certificate in Java but this solution is enough for me :) I don't need to do it myself anymore. Thanks to Bruno !</p>\n"}],"owner":{"account_id":467686,"reputation":3232,"user_id":873229,"accept_rate":50,"display_name":"Ghetolay"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10036,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":2,"score":4,"last_activity_date":1695801695,"creation_date":1347872611,"question_id":12456079,"body_markdown":"I&#39;m working on a client-cert authentication between a embedded jetty server and a client. They both use keystore. The client certificate is signed by the server&#39;s certificate which is signed by a CA. Jetty use 2 method to authenticate a client certificate, javax.net.ssl.SSLEngine which seems to work and they also use the code above.\r\n\r\n    \r\n    List&lt;X509Certificate&gt; certList = Certificate chain sent by the client\r\n    KeyStore truststore = server&#39;s truststore\r\n    \r\n    //No use of CRL/OSCP/CRLDP\r\n    _crls = null;\r\n    _enableOCSP = false;\r\n    _enableCRLDP = false;\r\n\r\n    try{\r\n     X509CertSelector certSelect = new X509CertSelector();\r\n     certSelect.setCertificate((X509Certificate) certList.get(0));\r\n    \t\t\t\r\n     // Configure certification path builder parameters\r\n     PKIXBuilderParameters pbParams = new PKIXBuilderParameters(truststore, certSelect);\r\n     pbParams.addCertStore(CertStore.getInstance(&quot;Collection&quot;, new CollectionCertStoreParameters(certList)));\r\n    \r\n     // Set maximum certification path length\r\n     pbParams.setMaxPathLength(-1);\r\n    \r\n     // Enable revocation checking\r\n     pbParams.setRevocationEnabled(true);\r\n    \t\t\t\r\n     // Set static Certificate Revocation List\r\n     if (_crls != null &amp;&amp; !_crls.isEmpty())\r\n         pbParams.addCertStore(CertStore.getInstance(&quot;Collection&quot;, new CollectionCertStoreParameters(_crls)));\r\n    \r\n      // Enable On-Line Certificate Status Protocol (OCSP) support\r\n      if (_enableOCSP)\r\n          Security.setProperty(&quot;ocsp.enable&quot;,&quot;true&quot;);\r\n         \r\n      // Enable Certificate Revocation List Distribution Points (CRLDP) support\r\n      if (_enableCRLDP)\r\n          System.setProperty(&quot;com.sun.security.enableCRLDP&quot;,&quot;true&quot;);\r\n          \r\n     // Build certification path\r\n     CertPathBuilderResult buildResult = CertPathBuilder.getInstance(&quot;PKIX&quot;).build(pbParams);               \r\n    \r\n     // Validate certification path\r\n     CertPathValidator.getInstance(&quot;PKIX&quot;).validate(buildResult.getCertPath(),pbParams);\r\n    }catch(GeneralSecurityException gse){\r\n     ...\r\n    }\r\n\r\nOf course I must use this second way...\r\nSo let&#39;s concentrate on this code, is this a good way to verify a signed certificate ?\r\nHere is a dump of my keystores : \r\n\r\nClient Keystore :\r\n\r\n    Entry type: PrivateKeyEntry \r\n    Certificate chain length: 2\r\n    Certificate[1]: \r\n    Owner: EMAILADDRESS=truc@ok.com, CN=Servlet, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \r\n    Issuer: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR \r\n    ...\r\n    \r\n    Certificate[2]: \r\n    Owner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\r\n    Issuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \r\n    ...\r\n\r\nServer truststore : \r\n\r\n    Entry type: trustedCertEntry\r\n\r\n    Owner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\r\n    Issuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR\r\n\r\nI&#39;m not sure about these keystores but I tried with different one (adding the CA certificate to the client&#39;s certificate chain, adding certificate to the truststore) and the validation still fail. And with these keystores the first way of validation (SSLEngine) seems to work.\r\n\r\nThe debug output is too big to put it here but here is the stacktrace : \r\n\r\n    java.security.cert.CertPathValidatorException: Could not determine revocation status\r\n    \tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:153)\r\n    \tat sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:325)\r\n    \tat sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:187)\r\n    \tat java.security.cert.CertPathValidator.validate(CertPathValidator.java:267)\r\n    \tat MainClass.main(MainClass.java:75)\r\n    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n    \tat sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:197)\r\n    \tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:255)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.buildToNewKey(CrlRevocationChecker.java:583)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.verifyWithSeparateSigningKey(CrlRevocationChecker.java:459)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:339)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:248)\r\n    \tat sun.security.provider.certpath.CrlRevocationChecker.check(CrlRevocationChecker.java:189)\r\n    \tat sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:131)\r\n    \t... 4 more\r\n\r\nIf I disable the revocation or if I set the last certificate (instead of the first) as X509CertSelector the code work but I&#39;m not sure of what I&#39;m doing.\r\n\r\nI&#39;m starting to doubt about the jetty code but I&#39;m not an expert in certificate and SSL handshaking so it could also come from bad keystore/truststore. That&#39;s why I did not create a issue on jetty&#39;s board and asked here before, to be sure the code needs to be changed.\r\n\r\nAlso It could be useful to know how to validate a signed certificate in Java.","title":"Java/Keystore Verify Signed certificate","body":"<p>I'm working on a client-cert authentication between a embedded jetty server and a client. They both use keystore. The client certificate is signed by the server's certificate which is signed by a CA. Jetty use 2 method to authenticate a client certificate, javax.net.ssl.SSLEngine which seems to work and they also use the code above.</p>\n\n<pre><code>List&lt;X509Certificate&gt; certList = Certificate chain sent by the client\nKeyStore truststore = server's truststore\n\n//No use of CRL/OSCP/CRLDP\n_crls = null;\n_enableOCSP = false;\n_enableCRLDP = false;\n\ntry{\n X509CertSelector certSelect = new X509CertSelector();\n certSelect.setCertificate((X509Certificate) certList.get(0));\n\n // Configure certification path builder parameters\n PKIXBuilderParameters pbParams = new PKIXBuilderParameters(truststore, certSelect);\n pbParams.addCertStore(CertStore.getInstance(\"Collection\", new CollectionCertStoreParameters(certList)));\n\n // Set maximum certification path length\n pbParams.setMaxPathLength(-1);\n\n // Enable revocation checking\n pbParams.setRevocationEnabled(true);\n\n // Set static Certificate Revocation List\n if (_crls != null &amp;&amp; !_crls.isEmpty())\n     pbParams.addCertStore(CertStore.getInstance(\"Collection\", new CollectionCertStoreParameters(_crls)));\n\n  // Enable On-Line Certificate Status Protocol (OCSP) support\n  if (_enableOCSP)\n      Security.setProperty(\"ocsp.enable\",\"true\");\n\n  // Enable Certificate Revocation List Distribution Points (CRLDP) support\n  if (_enableCRLDP)\n      System.setProperty(\"com.sun.security.enableCRLDP\",\"true\");\n\n // Build certification path\n CertPathBuilderResult buildResult = CertPathBuilder.getInstance(\"PKIX\").build(pbParams);               \n\n // Validate certification path\n CertPathValidator.getInstance(\"PKIX\").validate(buildResult.getCertPath(),pbParams);\n}catch(GeneralSecurityException gse){\n ...\n}\n</code></pre>\n\n<p>Of course I must use this second way...\nSo let's concentrate on this code, is this a good way to verify a signed certificate ?\nHere is a dump of my keystores : </p>\n\n<p>Client Keystore :</p>\n\n<pre><code>Entry type: PrivateKeyEntry \nCertificate chain length: 2\nCertificate[1]: \nOwner: EMAILADDRESS=truc@ok.com, CN=Servlet, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \nIssuer: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR \n...\n\nCertificate[2]: \nOwner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\nIssuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR \n...\n</code></pre>\n\n<p>Server truststore : </p>\n\n<pre><code>Entry type: trustedCertEntry\n\nOwner: EMAILADDRESS=contact@greenpacs.com, CN=Greenpacs, OU=dev, O=Imbasoft, L=Bondy, ST=Ile-de-France, C=FR\nIssuer: EMAILADDRESS=ghetolay@imbasoft.com, CN=Greenpacs Certificate Authority, OU=dev, O=Imbasoft, ST=Ile-de-France, C=FR\n</code></pre>\n\n<p>I'm not sure about these keystores but I tried with different one (adding the CA certificate to the client's certificate chain, adding certificate to the truststore) and the validation still fail. And with these keystores the first way of validation (SSLEngine) seems to work.</p>\n\n<p>The debug output is too big to put it here but here is the stacktrace : </p>\n\n<pre><code>java.security.cert.CertPathValidatorException: Could not determine revocation status\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:153)\n    at sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:325)\n    at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:187)\n    at java.security.cert.CertPathValidator.validate(CertPathValidator.java:267)\n    at MainClass.main(MainClass.java:75)\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:197)\n    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:255)\n    at sun.security.provider.certpath.CrlRevocationChecker.buildToNewKey(CrlRevocationChecker.java:583)\n    at sun.security.provider.certpath.CrlRevocationChecker.verifyWithSeparateSigningKey(CrlRevocationChecker.java:459)\n    at sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:339)\n    at sun.security.provider.certpath.CrlRevocationChecker.verifyRevocationStatus(CrlRevocationChecker.java:248)\n    at sun.security.provider.certpath.CrlRevocationChecker.check(CrlRevocationChecker.java:189)\n    at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:131)\n    ... 4 more\n</code></pre>\n\n<p>If I disable the revocation or if I set the last certificate (instead of the first) as X509CertSelector the code work but I'm not sure of what I'm doing.</p>\n\n<p>I'm starting to doubt about the jetty code but I'm not an expert in certificate and SSL handshaking so it could also come from bad keystore/truststore. That's why I did not create a issue on jetty's board and asked here before, to be sure the code needs to be changed.</p>\n\n<p>Also It could be useful to know how to validate a signed certificate in Java.</p>\n"},{"tags":["java","spring","junit5"],"answers":[{"tags":[],"owner":{"account_id":8821600,"reputation":568,"user_id":15059968,"display_name":"Andrei Kulik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695801220,"creation_date":1620146994,"answer_id":67388897,"question_id":67386221,"body_markdown":"I think you try to test a class that extends from the `CrudRepository` or `JpaRepository` interface. If it is true then unit tests don&#39;t have any sense, as you&#39;re not writing any implementation code yourself. You need to think about the integration test in this way.\r\nOr you can do it something like this:\r\n```java\r\n@DataJpaTest\r\npublic class ApplicationTests {\r\n\r\n    @Autowired\r\n    UserRepository usRepo;\r\n\r\n    @Test\r\n    public void name() {\r\n        usRepo.save(new MyEntity());\r\n    }\r\n}\r\n\r\n```","title":"Spring JUnit5 testing Repositories, Repo is null?","body":"<p>I think you try to test a class that extends from the <code>CrudRepository</code> or <code>JpaRepository</code> interface. If it is true then unit tests don't have any sense, as you're not writing any implementation code yourself. You need to think about the integration test in this way.\nOr you can do it something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DataJpaTest\npublic class ApplicationTests {\n\n    @Autowired\n    UserRepository usRepo;\n\n    @Test\n    public void name() {\n        usRepo.save(new MyEntity());\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":20067767,"reputation":189,"user_id":14713134,"display_name":"Jefferey John Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695801220,"creation_date":1620136469,"question_id":67386221,"body_markdown":"I am trying to test my 3rd year project using JUnit5, I am trying to test the repositories. Alas, when I am trying to test I keep getting the same error. The error is as follows:\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;CO3102.hw2.repositories.UserRepository.save(Object)&quot; because &quot;this.usRepo&quot; is null\r\n\tat CO3202.tests.ApplicationTests.name(ApplicationTests.java:19)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat \r\n \r\n \r\n     org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:84)\r\n\tat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\r\n\tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\r\n\r\nI can&#39;t quite understand why this isn&#39;t working. But here is my ApplicationTest.class\r\n\r\n    import static org.junit.jupiter.api.Assertions.*;\r\n     import org.springframework.boot.test.context.SpringBootTest;\r\n     import org.junit.jupiter.api.Test;\r\n     import org.springframework.beans.factory.annotation.Autowired;\r\n\r\n     import CO3102.hw2.domain.User;\r\n      import CO3102.hw2.repositories.UserRepository;\r\n     @SpringBootTest\r\n     class ApplicationTests {\r\n\t @Autowired\r\n\t UserRepository usRepo;\r\n\r\n\t    @Test\r\n\t    public void name() {\r\n\t    \tUser u = new User();\r\n\t    \tu.setEmail(&quot;fdssfs&quot;);\r\n\t    \tusRepo.save(u);\r\n\t    }\r\n\t@Test\r\n\tvoid test() {\r\n\t\tfail(&quot;Not yet implemented&quot;);\r\n\t}\r\n\r\n    }\r\n\r\nHere is my build.gradle\r\n\r\n    dependencies {\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    compile(&quot;javax.servlet:jstl:1.2&quot;)\r\n    compile group: &#39;javax.servlet&#39;, name: &#39;jstl&#39;, version: &#39;1.2&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    implementation &#39;org.springframework.security:spring-security-test&#39;\r\n    compile group: &#39;org.springframework.security&#39;, name: &#39;spring-security-crypto&#39;, version: &#39;5.4.2&#39;\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\r\n    compile group: &#39;mysql&#39;, name: &#39;mysql-connector-java&#39;, version: &#39;8.0.11&#39;\r\n    compile group: &#39;javax.servlet&#39;, name: &#39;jstl&#39;, version: &#39;1.2&#39;\r\n    runtime(&quot;mysql:mysql-connector-java&quot;)\r\n    compile(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\r\n    compile (&quot;org.springframework.boot:spring-boot-starter-web&quot;) \r\n    compile group: &#39;com.qasymphony.qtest&#39;, name: &#39;qtest-sdk-java&#39;, version: &#39;1.4.7&#39;    \r\n    compile(&quot;org.apache.tomcat.embed:tomcat-embed-jasper&quot;)\r\n    compile group: &#39;org.glassfish.jaxb&#39;, name: &#39;jaxb-runtime&#39;, version: &#39;2.3.3&#39;\r\n    providedRuntime(&quot;org.springframework.boot:spring-boot-starter-tomcat&quot;)\r\n    providedRuntime &#39;org.apache.tomcat.embed:tomcat-embed-jasper&#39;\r\n    compile group: &#39;tangrammer&#39;, name: &#39;java-net-http-client&#39;, version: &#39;0.1.2&#39;\r\n    implementation &#39;com.squareup.okhttp3:okhttp:3.14.6&#39;\r\n    compile group: &#39;com.google.code.gson&#39;, name: &#39;gson&#39;, version: &#39;2.8.5&#39;\r\n    testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    }\r\n\r\nI have tried the following:\r\n\r\n 1. AutoConfigureMockMvc\r\n 2. @DataJpaTest - this cannot be resolved to a type I have tried adding dependency and jar file.\r\n\r\nIf you could help or point me in the right direction I would be very grateful.\r\nThank you\r\n\r\n ","title":"Spring JUnit5 testing Repositories, Repo is null?","body":"<p>I am trying to test my 3rd year project using JUnit5, I am trying to test the repositories. Alas, when I am trying to test I keep getting the same error. The error is as follows:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;CO3102.hw2.repositories.UserRepository.save(Object)&quot; because &quot;this.usRepo&quot; is null\nat CO3202.tests.ApplicationTests.name(ApplicationTests.java:19)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:564)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\nat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\nat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\nat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\nat \n\n\n org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:84)\nat org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\nat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n</code></pre>\n<p>I can't quite understand why this isn't working. But here is my ApplicationTest.class</p>\n<pre><code>import static org.junit.jupiter.api.Assertions.*;\n import org.springframework.boot.test.context.SpringBootTest;\n import org.junit.jupiter.api.Test;\n import org.springframework.beans.factory.annotation.Autowired;\n\n import CO3102.hw2.domain.User;\n  import CO3102.hw2.repositories.UserRepository;\n @SpringBootTest\n class ApplicationTests {\n @Autowired\n UserRepository usRepo;\n\n    @Test\n    public void name() {\n        User u = new User();\n        u.setEmail(&quot;fdssfs&quot;);\n        usRepo.save(u);\n    }\n@Test\nvoid test() {\n    fail(&quot;Not yet implemented&quot;);\n}\n\n}\n</code></pre>\n<p>Here is my build.gradle</p>\n<pre><code>dependencies {\ncompile(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\ncompile(&quot;javax.servlet:jstl:1.2&quot;)\ncompile group: 'javax.servlet', name: 'jstl', version: '1.2'\nimplementation 'org.springframework.boot:spring-boot-starter-security'\nimplementation 'org.springframework.security:spring-security-test'\ncompile group: 'org.springframework.security', name: 'spring-security-crypto', version: '5.4.2'\ncompile(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\ncompile group: 'mysql', name: 'mysql-connector-java', version: '8.0.11'\ncompile group: 'javax.servlet', name: 'jstl', version: '1.2'\nruntime(&quot;mysql:mysql-connector-java&quot;)\ncompile(&quot;org.springframework.boot:spring-boot-starter-jdbc&quot;)\ncompile (&quot;org.springframework.boot:spring-boot-starter-web&quot;) \ncompile group: 'com.qasymphony.qtest', name: 'qtest-sdk-java', version: '1.4.7'    \ncompile(&quot;org.apache.tomcat.embed:tomcat-embed-jasper&quot;)\ncompile group: 'org.glassfish.jaxb', name: 'jaxb-runtime', version: '2.3.3'\nprovidedRuntime(&quot;org.springframework.boot:spring-boot-starter-tomcat&quot;)\nprovidedRuntime 'org.apache.tomcat.embed:tomcat-embed-jasper'\ncompile group: 'tangrammer', name: 'java-net-http-client', version: '0.1.2'\nimplementation 'com.squareup.okhttp3:okhttp:3.14.6'\ncompile group: 'com.google.code.gson', name: 'gson', version: '2.8.5'\ntestImplementation('org.springframework.boot:spring-boot-starter-test')\n}\n</code></pre>\n<p>I have tried the following:</p>\n<ol>\n<li>AutoConfigureMockMvc</li>\n<li>@DataJpaTest - this cannot be resolved to a type I have tried adding dependency and jar file.</li>\n</ol>\n<p>If you could help or point me in the right direction I would be very grateful.\nThank you</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":6232328,"reputation":1338,"user_id":4848659,"display_name":"Gimhani"},"score":0,"creation_date":1536312024,"post_id":52219311,"comment_id":91387091,"body_markdown":"spring framework comes with the idea of autowiring objects in place of creating objects in every occasion. As done in your code, it prevents extra code required.What do you mean by &#39;wrong&#39;?","body":"spring framework comes with the idea of autowiring objects in place of creating objects in every occasion. As done in your code, it prevents extra code required.What do you mean by &#39;wrong&#39;?"},{"owner":{"account_id":7757823,"reputation":1399,"user_id":5871514,"accept_rate":80,"display_name":"Tilak Raj"},"score":0,"creation_date":1536312089,"post_id":52219311,"comment_id":91387135,"body_markdown":"i mean , why would i go with the former one , why not the latter one? What&#39;s the benefit of doing th former one?","body":"i mean , why would i go with the former one , why not the latter one? What&#39;s the benefit of doing th former one?"},{"owner":{"account_id":7757823,"reputation":1399,"user_id":5871514,"accept_rate":80,"display_name":"Tilak Raj"},"score":0,"creation_date":1536312303,"post_id":52219311,"comment_id":91387288,"body_markdown":"@Gimhani see the update","body":"@Gimhani see the update"},{"owner":{"account_id":6232328,"reputation":1338,"user_id":4848659,"display_name":"Gimhani"},"score":1,"creation_date":1536312386,"post_id":52219311,"comment_id":91387342,"body_markdown":"you do not need to explicitly initialize the object using constructor when you use spring @Autowired. This comes specially handy when you are working on a big java application.","body":"you do not need to explicitly initialize the object using constructor when you use spring @Autowired. This comes specially handy when you are working on a big java application."},{"owner":{"account_id":212417,"reputation":43614,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1536322873,"post_id":52219311,"comment_id":91393571,"body_markdown":"You can read about the principle of the design pattern dependency injection at https://en.wikipedia.org/wiki/Dependency_injection.","body":"You can read about the principle of the design pattern dependency injection at <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Dependency_injection</a>."}],"answers":[{"tags":[],"owner":{"account_id":1198039,"reputation":10944,"user_id":1169349,"display_name":"Reg"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1695800022,"creation_date":1536312393,"answer_id":52219490,"question_id":52219311,"body_markdown":"**I believe you are confusing Spring and the Java language.**\r\n\r\n`Autowire` has to do with &quot;Code injections&quot;. (Just like you described.) And is part of the Spring framework.\r\n\r\nHowever, the `import` (with a lowercase i) is part of the Java language. As you stated, it makes other code available to be used in the class where you added it. `import` will be used regardless if you are using the Spring framework. \r\n\r\n**Both of these statements have completely different purposes and are used with others.** \r\n\r\nFor example:\r\nThe class you are autowiring will also be imported (*if it is in a different Java package*). And you do not have to create an instance of it. In other words, you do not have to use the &#39;new&#39; keyword - the Spring framework will do that for you. (*nice right?*)\r\n\r\nBut that being said, there is also a `@Import` annotation in the Spring framework, which is used for importing Spring Configuration classes. I am guessing this is where the confusion originated. \r\n","title":"Autowired vs import","body":"<p><strong>I believe you are confusing Spring and the Java language.</strong></p>\n<p><code>Autowire</code> has to do with &quot;Code injections&quot;. (Just like you described.) And is part of the Spring framework.</p>\n<p>However, the <code>import</code> (with a lowercase i) is part of the Java language. As you stated, it makes other code available to be used in the class where you added it. <code>import</code> will be used regardless if you are using the Spring framework.</p>\n<p><strong>Both of these statements have completely different purposes and are used with others.</strong></p>\n<p>For example:\nThe class you are autowiring will also be imported (<em>if it is in a different Java package</em>). And you do not have to create an instance of it. In other words, you do not have to use the 'new' keyword - the Spring framework will do that for you. (<em>nice right?</em>)</p>\n<p>But that being said, there is also a <code>@Import</code> annotation in the Spring framework, which is used for importing Spring Configuration classes. I am guessing this is where the confusion originated.</p>\n"},{"tags":[],"owner":{"account_id":5896196,"reputation":740,"user_id":4641280,"display_name":"Damith"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1536312665,"creation_date":1536312665,"answer_id":52219580,"question_id":52219311,"body_markdown":"Its basically about object creation.\r\nWhen you Autowire something, that particular bean is managed by the spring context and only one instance of particular class will be constructed by spring context and that particular instance will be provided when you use Autowire for that class type Objects. \r\nBut when you import something into your class, that does not mean that you have an instance of that particular class; you have to initialize it on your own. And if you want to treat it as a singleton object, basically you will be writing whole code for it. \r\n\r\nAnd more over there are basic differences between them like if you want to access static variables in a class, you will not need an instance of that class. (you can access them by class reference) In that case you dont need to Autowire but you need Import statement.\r\n\r\nBut on the other hand if you are interested in experiencing power of spring, like Autowire Configurations and may be validate them and all those cool functionalities that spring provides, you need to make your class a component and Autowire as you want. \r\n","title":"Autowired vs import","body":"<p>Its basically about object creation.\nWhen you Autowire something, that particular bean is managed by the spring context and only one instance of particular class will be constructed by spring context and that particular instance will be provided when you use Autowire for that class type Objects. \nBut when you import something into your class, that does not mean that you have an instance of that particular class; you have to initialize it on your own. And if you want to treat it as a singleton object, basically you will be writing whole code for it. </p>\n\n<p>And more over there are basic differences between them like if you want to access static variables in a class, you will not need an instance of that class. (you can access them by class reference) In that case you dont need to Autowire but you need Import statement.</p>\n\n<p>But on the other hand if you are interested in experiencing power of spring, like Autowire Configurations and may be validate them and all those cool functionalities that spring provides, you need to make your class a component and Autowire as you want. </p>\n"}],"owner":{"account_id":7757823,"reputation":1399,"user_id":5871514,"accept_rate":80,"display_name":"Tilak Raj"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5009,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":52219580,"answer_count":2,"score":4,"last_activity_date":1695800022,"creation_date":1536311781,"question_id":52219311,"body_markdown":"I am very new to spring boot and I am trying to grasp the concept of it. Now I came across @Autowired in it. I understood pretty much about it.\r\n\r\nLike, when you write @Autowired, things happen in two passes and in the second pass spring injects beans.\r\n\r\nNow, I have this example; \r\n\r\n    Class Abc {\r\n        \r\n        @Autowired\r\n        private Xyz xyz;\r\n        \r\n        PSVM(String...z) {\r\n            xyz.hello();\r\n        } \r\n    }\r\n\r\nImport basically imports the code into the file.\r\n\r\nSo,\r\n\r\n    Import com.tilak.Xyz;\r\n    \r\n    Class Abc {\r\n        private Xyz xyz;\r\n        \r\n        PSVM(String...z) {\r\n            xyz = new Xyz();\r\n            xyz.hello();\r\n        }\r\n    }\r\n\r\nWhy should/ shouldn&#39;t I go with the latter one? \r\n\r\nIs there any advantage in doing the first one? Where should I use the first one and where should I use the second one?","title":"Autowired vs import","body":"<p>I am very new to spring boot and I am trying to grasp the concept of it. Now I came across @Autowired in it. I understood pretty much about it.</p>\n\n<p>Like, when you write @Autowired, things happen in two passes and in the second pass spring injects beans.</p>\n\n<p>Now, I have this example; </p>\n\n<pre><code>Class Abc {\n\n    @Autowired\n    private Xyz xyz;\n\n    PSVM(String...z) {\n        xyz.hello();\n    } \n}\n</code></pre>\n\n<p>Import basically imports the code into the file.</p>\n\n<p>So,</p>\n\n<pre><code>Import com.tilak.Xyz;\n\nClass Abc {\n    private Xyz xyz;\n\n    PSVM(String...z) {\n        xyz = new Xyz();\n        xyz.hello();\n    }\n}\n</code></pre>\n\n<p>Why should/ shouldn't I go with the latter one? </p>\n\n<p>Is there any advantage in doing the first one? Where should I use the first one and where should I use the second one?</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695799822,"creation_date":1695799822,"answer_id":77185420,"question_id":77184629,"body_markdown":"\r\nMost probably your app is starting a foreground service from the bacground and you are not calling startForeground() in your service onCreate() or onStartCommand on time. Your app has 5s period to call startForeground in your Service after you call Context.startForegroundService(). You can check if your service logic might have a bug causing startForeground to not be called in some scenarios. You can also add firebase logging to log the time of startForegroundService call and startForeground call, this will show in your crash report whether this is the actual problem.\r\n\r\nThis crash is quiet common and appears on various devices. It might be either a design problem in the android.\r\n\r\nsome references:\r\n\r\nhttps://developer.android.com/about/versions/oreo/android-8.0-changes.html#back-all\r\n\r\nhttps://issuetracker.google.com/issues/76112072","title":"AndroidRuntime: FATAL EXCEPTION:: startForegroundService() not allowed due to mAllowStartForeground","body":"<p>Most probably your app is starting a foreground service from the bacground and you are not calling startForeground() in your service onCreate() or onStartCommand on time. Your app has 5s period to call startForeground in your Service after you call Context.startForegroundService(). You can check if your service logic might have a bug causing startForeground to not be called in some scenarios. You can also add firebase logging to log the time of startForegroundService call and startForeground call, this will show in your crash report whether this is the actual problem.</p>\n<p>This crash is quiet common and appears on various devices. It might be either a design problem in the android.</p>\n<p>some references:</p>\n<p><a href=\"https://developer.android.com/about/versions/oreo/android-8.0-changes.html#back-all\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/oreo/android-8.0-changes.html#back-all</a></p>\n<p><a href=\"https://issuetracker.google.com/issues/76112072\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/76112072</a></p>\n"}],"owner":{"account_id":26805586,"reputation":31,"user_id":20396942,"display_name":"Vijay Rathod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695799822,"creation_date":1695787574,"question_id":77184629,"body_markdown":"Can&#39;t reproduce manually, got those stats from Crashlytics. Not sure how we can deal with this crash, do you have any idea why this crash may happen?\r\n\r\n\r\nActual result\r\nThere are several types of exception grouped by the Android OS, but the reason looks exactly the same\r\n\r\n    Fatal Exception: android.app.RemoteServiceException: Context.startForegroundService() did not then call Service.startForeground(): ServiceRecord{bc3065 u0 com.bandlab.bandlab/com.bandlab.media.player.notification.MediaPlaybackService}\r\n           at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2269)\r\n           at android.os.Handler.dispatchMessage(Handler.java:106)\r\n           at android.os.Looper.loop(Looper.java:246)\r\n           at android.app.ActivityThread.main(ActivityThread.java:8653)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)","title":"AndroidRuntime: FATAL EXCEPTION:: startForegroundService() not allowed due to mAllowStartForeground","body":"<p>Can't reproduce manually, got those stats from Crashlytics. Not sure how we can deal with this crash, do you have any idea why this crash may happen?</p>\n<p>Actual result\nThere are several types of exception grouped by the Android OS, but the reason looks exactly the same</p>\n<pre><code>Fatal Exception: android.app.RemoteServiceException: Context.startForegroundService() did not then call Service.startForeground(): ServiceRecord{bc3065 u0 com.bandlab.bandlab/com.bandlab.media.player.notification.MediaPlaybackService}\n       at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2269)\n       at android.os.Handler.dispatchMessage(Handler.java:106)\n       at android.os.Looper.loop(Looper.java:246)\n       at android.app.ActivityThread.main(ActivityThread.java:8653)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n</code></pre>\n"},{"tags":["java","multithreading","synchronization","synchronized"],"comments":[{"owner":{"account_id":11683,"reputation":1438159,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1231930964,"post_id":442564,"comment_id":264387,"body_markdown":"I&#39;d also like to point out that context is important - the &quot;Typically it is the lock on the instance itself&quot; bit is within a section about documenting a conditionally thread-safe class, when you&#39;re making the lock public. In other words, that sentence applies when you&#39;ve already made this decision.","body":"I&#39;d also like to point out that context is important - the &quot;Typically it is the lock on the instance itself&quot; bit is within a section about documenting a conditionally thread-safe class, when you&#39;re making the lock public. In other words, that sentence applies when you&#39;ve already made this decision."},{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":0,"creation_date":1231934371,"post_id":442564,"comment_id":264477,"body_markdown":"In the absence of internal synch, and when external synch is needed, the lock is often the instance itself, Bloch basically says. So why wouldn&#39;t this be the case for internal synch with lock on &#39;this&#39; as well? (The importance of documentation is another issue.)","body":"In the absence of internal synch, and when external synch is needed, the lock is often the instance itself, Bloch basically says. So why wouldn&#39;t this be the case for internal synch with lock on &#39;this&#39; as well? (The importance of documentation is another issue.)"},{"owner":{"account_id":94310,"reputation":11924,"user_id":257568,"accept_rate":50,"display_name":"ArtemGr"},"score":0,"creation_date":1277454062,"post_id":442564,"comment_id":3198471,"body_markdown":"There is a tradeoff between extended granularity and extra CPU cache and bus requests overhead, because locking on an external Object will most probably require a separate cache line to be modified and exchanged between CPU caches (cf. MESIF and MOESI).","body":"There is a tradeoff between extended granularity and extra CPU cache and bus requests overhead, because locking on an external Object will most probably require a separate cache line to be modified and exchanged between CPU caches (cf. MESIF and MOESI)."},{"owner":{"account_id":8732367,"reputation":156,"user_id":6531984,"display_name":"Sgene9"},"score":2,"creation_date":1544048104,"post_id":442564,"comment_id":94142605,"body_markdown":"I think, in the world of defensive programming, you prevent bugs not by idiom but by code. When someone asks me a question, &quot;How optimized is your synchronization?&quot;, I want to say &quot;Very&quot; instead of &quot;Very, unless someone else doesn&#39;t follow the idiom&quot;.","body":"I think, in the world of defensive programming, you prevent bugs not by idiom but by code. When someone asks me a question, &quot;How optimized is your synchronization?&quot;, I want to say &quot;Very&quot; instead of &quot;Very, unless someone else doesn&#39;t follow the idiom&quot;."}],"answers":[{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":6,"up_vote_count":97,"is_accepted":false,"score":91,"last_activity_date":1231937475,"creation_date":1231929777,"answer_id":442570,"question_id":442564,"body_markdown":"Well, firstly it should be pointed out that:\r\n\r\n    public void blah() {\r\n      synchronized (this) {\r\n        // do stuff\r\n      }\r\n    }\r\n\r\nis semantically equivalent to:\r\n\r\n    public synchronized void blah() {\r\n      // do stuff\r\n    }\r\n\r\nwhich is one reason not to use `synchronized(this)`.  You might argue that you can do stuff around the `synchronized(this)` block.  The usual reason is to try and avoid having to do the synchronized check at all, which leads to all sorts of concurrency problems, specifically the [double checked-locking problem][1], which just goes to show how difficult it can be to make a relatively simple check threadsafe.\r\n\r\nA private lock is a defensive mechanism, which is never a bad idea.\r\n\r\nAlso, as you alluded to, private locks can control granularity.  One set of operations on an object might be totally unrelated to another but `synchronized(this)` will mutually exclude access to all of them.\r\n\r\n`synchronized(this)` just really doesn&#39;t give you anything.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Double-checked_locking","title":"Avoid synchronized(this) in Java?","body":"<p>Well, firstly it should be pointed out that:</p>\n\n<pre><code>public void blah() {\n  synchronized (this) {\n    // do stuff\n  }\n}\n</code></pre>\n\n<p>is semantically equivalent to:</p>\n\n<pre><code>public synchronized void blah() {\n  // do stuff\n}\n</code></pre>\n\n<p>which is one reason not to use <code>synchronized(this)</code>.  You might argue that you can do stuff around the <code>synchronized(this)</code> block.  The usual reason is to try and avoid having to do the synchronized check at all, which leads to all sorts of concurrency problems, specifically the <a href=\"http://en.wikipedia.org/wiki/Double-checked_locking\" rel=\"noreferrer\">double checked-locking problem</a>, which just goes to show how difficult it can be to make a relatively simple check threadsafe.</p>\n\n<p>A private lock is a defensive mechanism, which is never a bad idea.</p>\n\n<p>Also, as you alluded to, private locks can control granularity.  One set of operations on an object might be totally unrelated to another but <code>synchronized(this)</code> will mutually exclude access to all of them.</p>\n\n<p><code>synchronized(this)</code> just really doesn't give you anything.</p>\n"},{"tags":[],"owner":{"account_id":15923,"reputation":28380,"user_id":34161,"accept_rate":83,"display_name":"Yoni Roit"},"down_vote_count":5,"up_vote_count":2,"is_accepted":false,"score":-3,"last_activity_date":1231929792,"creation_date":1231929792,"answer_id":442571,"question_id":442564,"body_markdown":"I think points one (somebody else using your lock) and two (all methods using the same lock needlessly) can happen in any fairly large application. Especially when there&#39;s no good communication between developers.\r\n\r\nIt&#39;s not cast in stone, it&#39;s mostly an issue of good practice and preventing errors.\r\n\r\n","title":"Avoid synchronized(this) in Java?","body":"<p>I think points one (somebody else using your lock) and two (all methods using the same lock needlessly) can happen in any fairly large application. Especially when there's no good communication between developers.</p>\n\n<p>It's not cast in stone, it's mostly an issue of good practice and preventing errors.</p>\n"},{"tags":[],"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1231930244,"creation_date":1231930244,"answer_id":442580,"question_id":442564,"body_markdown":"No, you shouldn&#39;t *always*.  However, I tend to avoid it when there are multiple concerns on a particular object that only need to be threadsafe in respect to themselves.  For example, you might have a mutable data object that has &quot;label&quot; and &quot;parent&quot; fields; these need to be threadsafe, but changing one need not block the other from being written/read.  (In practice I would avoid this by declaring the fields volatile and/or using java.util.concurrent&#39;s AtomicFoo wrappers).\r\n\r\nSynchronization in general is a bit clumsy, as it slaps a big lock down rather than thinking exactly how threads might be allowed to work around each other.  Using &lt;code&gt;synchronized(this)&lt;/code&gt; is even clumsier and anti-social, as it&#39;s saying &quot;no-one may change *anything* on this class while I hold the lock&quot;.  How often do you actually need to do that?\r\n\r\nI would much rather have more granular locks; even if you do want to stop everything from changing (perhaps you&#39;re serialising the object), you can just acquire all of the locks to achieve the same thing, plus it&#39;s more explicit that way.  When you use &lt;code&gt;synchronized(this)&lt;/code&gt;, it&#39;s not clear exactly why you&#39;re synchronizing, or what the side effects might be.  If you use &lt;code&gt;synchronized(labelMonitor)&lt;/code&gt;, or even better &lt;code&gt;labelLock.getWriteLock().lock()&lt;/code&gt;, it&#39;s clear what you are doing and what the effects of your critical section are limited to.","title":"Avoid synchronized(this) in Java?","body":"<p>No, you shouldn't <em>always</em>.  However, I tend to avoid it when there are multiple concerns on a particular object that only need to be threadsafe in respect to themselves.  For example, you might have a mutable data object that has \"label\" and \"parent\" fields; these need to be threadsafe, but changing one need not block the other from being written/read.  (In practice I would avoid this by declaring the fields volatile and/or using java.util.concurrent's AtomicFoo wrappers).</p>\n\n<p>Synchronization in general is a bit clumsy, as it slaps a big lock down rather than thinking exactly how threads might be allowed to work around each other.  Using <code>synchronized(this)</code> is even clumsier and anti-social, as it's saying \"no-one may change <em>anything</em> on this class while I hold the lock\".  How often do you actually need to do that?</p>\n\n<p>I would much rather have more granular locks; even if you do want to stop everything from changing (perhaps you're serialising the object), you can just acquire all of the locks to achieve the same thing, plus it's more explicit that way.  When you use <code>synchronized(this)</code>, it's not clear exactly why you're synchronizing, or what the side effects might be.  If you use <code>synchronized(labelMonitor)</code>, or even better <code>labelLock.getWriteLock().lock()</code>, it's clear what you are doing and what the effects of your critical section are limited to.</p>\n"},{"tags":[],"owner":{"account_id":15611,"reputation":14858,"user_id":33165,"accept_rate":80,"display_name":"tcurdt"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1231931093,"creation_date":1231931093,"answer_id":442597,"question_id":442564,"body_markdown":"**Short answer**: You have to understand the difference and make choice depending on the code.\r\n\r\n**Long answer**: In general I would rather try to avoid *synchronize(this)* to reduce contention but private locks add complexity you have to be aware of. So use the right synchronization for the right job. If you are not so experienced with multi-threaded programming I would rather stick to instance locking and read up on this topic. (That said: just using *synchronize(this)* does not automatically make your class fully thread-safe.) This is a not an easy topic but once you get used to it, the answer whether to use *synchronize(this)* or not comes naturally.","title":"Avoid synchronized(this) in Java?","body":"<p><strong>Short answer</strong>: You have to understand the difference and make choice depending on the code.</p>\n\n<p><strong>Long answer</strong>: In general I would rather try to avoid <em>synchronize(this)</em> to reduce contention but private locks add complexity you have to be aware of. So use the right synchronization for the right job. If you are not so experienced with multi-threaded programming I would rather stick to instance locking and read up on this topic. (That said: just using <em>synchronize(this)</em> does not automatically make your class fully thread-safe.) This is a not an easy topic but once you get used to it, the answer whether to use <em>synchronize(this)</em> or not comes naturally.</p>\n"},{"tags":[],"owner":{"account_id":11708,"reputation":21399,"user_id":22704,"display_name":"Darron"},"down_vote_count":1,"up_vote_count":140,"is_accepted":true,"score":139,"last_activity_date":1461091208,"creation_date":1231931141,"answer_id":442601,"question_id":442564,"body_markdown":"I&#39;ll cover each point separately.\r\n\r\n1. \r\n\r\n&gt; Some evil code may steal your lock (very popular this one, also has an\r\n&gt; &quot;accidentally&quot; variant)\r\n\r\n  I&#39;m more worried about *accidentally*.  What it amounts to is that this use of `this` is part of your class&#39; exposed interface, and should be documented.  Sometimes the ability of other code to use your lock is desired.  This is true of things like `Collections.synchronizedMap` (see the javadoc).\r\n\r\n2. \r\n\r\n &gt; All synchronized methods within the same class use the exact same\r\n &gt; lock, which reduces throughput\r\n\r\n  This is overly simplistic thinking; just getting rid of `synchronized(this)` won&#39;t solve the problem.  Proper synchronization for throughput will take more thought.\r\n\r\n3. \r\n\r\n &gt; You are (unnecessarily) exposing too much information\r\n\r\n  This is a variant of #1.  Use of `synchronized(this)` is part of your interface.  If you don&#39;t want/need this exposed, don&#39;t do it.\r\n\r\n","title":"Avoid synchronized(this) in Java?","body":"<p>I'll cover each point separately.</p>\n\n<ol>\n<li><blockquote>\n  <p>Some evil code may steal your lock (very popular this one, also has an\n  \"accidentally\" variant)</p>\n</blockquote>\n\n<p>I'm more worried about <em>accidentally</em>.  What it amounts to is that this use of <code>this</code> is part of your class' exposed interface, and should be documented.  Sometimes the ability of other code to use your lock is desired.  This is true of things like <code>Collections.synchronizedMap</code> (see the javadoc).</p></li>\n<li><blockquote>\n  <p>All synchronized methods within the same class use the exact same\n  lock, which reduces throughput</p>\n</blockquote>\n\n<p>This is overly simplistic thinking; just getting rid of <code>synchronized(this)</code> won't solve the problem.  Proper synchronization for throughput will take more thought.</p></li>\n<li><blockquote>\n  <p>You are (unnecessarily) exposing too much information</p>\n</blockquote>\n\n<p>This is a variant of #1.  Use of <code>synchronized(this)</code> is part of your interface.  If you don't want/need this exposed, don't do it.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":22098,"reputation":1108,"user_id":54236,"display_name":"Harald Schilly"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1468775313,"creation_date":1231931780,"answer_id":442622,"question_id":442564,"body_markdown":"It depends on the task you want to do, but I wouldn&#39;t use it. Also, check if the thread-save-ness you want to accompish couldn&#39;t be done by synchronize(this) in the first place? There are also some nice [locks in the API][1] that might help you :)\r\n\r\n\r\n  [1]:http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/package-summary.html","title":"Avoid synchronized(this) in Java?","body":"<p>It depends on the task you want to do, but I wouldn't use it. Also, check if the thread-save-ness you want to accompish couldn't be done by synchronize(this) in the first place? There are also some nice <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/package-summary.html\" rel=\"nofollow noreferrer\">locks in the API</a> that might help you :)</p>\n"},{"tags":[],"owner":{"account_id":4797,"reputation":1533,"user_id":7400,"display_name":"Andreas Bakurov"},"down_vote_count":4,"up_vote_count":66,"is_accepted":false,"score":62,"last_activity_date":1562581283,"creation_date":1231932207,"answer_id":442638,"question_id":442564,"body_markdown":"While you are using synchronized(this) you are using the class instance as a lock itself. This means that while lock is acquired by *thread 1*, the *thread 2* should wait.\r\n\r\nSuppose the following code:\r\n\r\n  \r\n    public void method1() {\r\n        // do something ...\r\n        synchronized(this) {\r\n            a ++;      \r\n        }\r\n        // ................\r\n    }\r\n\r\n\r\n    public void method2() {\r\n        // do something ...\r\n        synchronized(this) {\r\n            b ++;      \r\n        }\r\n        // ................\r\n    }\r\n\r\nMethod 1 modifying the variable *a* and method 2 modifying the variable *b*, the concurrent modification of the same variable by two threads should be avoided and it is. BUT while *thread1* modifying *a* and *thread2* modifying *b* it can be performed without any race condition.\r\n\r\nUnfortunately, the above code will not allow this since we are using the same reference for a lock; This means that threads even if they are not in a race condition should wait and obviously the code sacrifices concurrency of the program.\r\n\r\nThe solution is to use *2* different locks for *two* different variables:\r\n\r\n\r\n    public class Test {\r\n    \t\r\n        private Object lockA = new Object();\r\n        private Object lockB = new Object();\r\n    \r\n        public void method1() {\r\n            // do something ...\r\n            synchronized(lockA) {\r\n                a ++;      \r\n            }\r\n            // ................\r\n        }\r\n    \r\n    \r\n        public void method2() {\r\n            // do something ...\r\n            synchronized(lockB) {\r\n                b ++;      \r\n            }\r\n            // ................\r\n        }\r\n    \t\r\n    }\r\n     \r\n\r\nThe above example uses more fine grained locks (2 locks instead one (*lockA*  and *lockB* for variables *a* and *b* respectively) and as a result allows better concurrency, on the other hand it became more complex than the first example ...","title":"Avoid synchronized(this) in Java?","body":"<p>While you are using synchronized(this) you are using the class instance as a lock itself. This means that while lock is acquired by <em>thread 1</em>, the <em>thread 2</em> should wait.</p>\n\n<p>Suppose the following code:</p>\n\n<pre><code>public void method1() {\n    // do something ...\n    synchronized(this) {\n        a ++;      \n    }\n    // ................\n}\n\n\npublic void method2() {\n    // do something ...\n    synchronized(this) {\n        b ++;      \n    }\n    // ................\n}\n</code></pre>\n\n<p>Method 1 modifying the variable <em>a</em> and method 2 modifying the variable <em>b</em>, the concurrent modification of the same variable by two threads should be avoided and it is. BUT while <em>thread1</em> modifying <em>a</em> and <em>thread2</em> modifying <em>b</em> it can be performed without any race condition.</p>\n\n<p>Unfortunately, the above code will not allow this since we are using the same reference for a lock; This means that threads even if they are not in a race condition should wait and obviously the code sacrifices concurrency of the program.</p>\n\n<p>The solution is to use <em>2</em> different locks for <em>two</em> different variables:</p>\n\n<pre><code>public class Test {\n\n    private Object lockA = new Object();\n    private Object lockB = new Object();\n\n    public void method1() {\n        // do something ...\n        synchronized(lockA) {\n            a ++;      \n        }\n        // ................\n    }\n\n\n    public void method2() {\n        // do something ...\n        synchronized(lockB) {\n            b ++;      \n        }\n        // ................\n    }\n\n}\n</code></pre>\n\n<p>The above example uses more fine grained locks (2 locks instead one (<em>lockA</em>  and <em>lockB</em> for variables <em>a</em> and <em>b</em> respectively) and as a result allows better concurrency, on the other hand it became more complex than the first example ...</p>\n"},{"tags":[],"owner":{"account_id":21831,"reputation":1232,"user_id":53369,"display_name":"Olivier"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1231944150,"creation_date":1231936055,"answer_id":442771,"question_id":442564,"body_markdown":"While I agree about not adhering blindly to dogmatic rules, does the &quot;lock stealing&quot; scenario seem so eccentric to you? A thread could indeed acquire the lock on your object &quot;externally&quot;(`synchronized(theObject) {...}`), blocking other threads waiting on synchronized instance methods.\r\n\r\nIf you don&#39;t believe in malicious code, consider that this code could come from third parties (for instance if you develop some sort of application server).\r\n\r\nThe &quot;accidental&quot; version seems less likely, but as they say, &quot;make something idiot-proof and someone will invent a better idiot&quot;.\r\n\r\nSo I agree with the it-depends-on-what-the-class-does school of thought.\r\n\r\n----------\r\n**Edit following eljenso&#39;s first 3 comments:**\r\n\r\nI&#39;ve never experienced the lock stealing problem but here is an imaginary scenario:\r\n\r\nLet&#39;s say your system is a servlet container, and the object we&#39;re considering is the `ServletContext` implementation. Its `getAttribute` method must be thread-safe, as context attributes are shared data; so you declare it as `synchronized`. Let&#39;s also imagine that you provide a public hosting service based on your container implementation.\r\n\r\nI&#39;m your customer and deploy my &quot;good&quot; servlet on your site. It happens that my code contains a call to `getAttribute`.\r\n\r\nA hacker, disguised as another customer, deploys his malicious servlet on your site. It contains the following code in the `init` method:\r\n\r\n&lt;pre&gt;\r\nsynchronized (this.getServletConfig().getServletContext()) {\r\n   while (true) {}\r\n}\r\n&lt;/pre&gt;\r\n\r\nAssuming we share the same servlet context (allowed by the spec as long as the two servlets are on the same virtual host), my call on `getAttribute` is locked forever. The hacker has achieved a DoS on my servlet.\r\n\r\nThis attack is not possible if `getAttribute` is synchronized on a private lock, because 3rd-party code cannot acquire this lock.\r\n\r\nI admit that the example is contrived and an oversimplistic view of how a servlet container works, but IMHO it proves the point.\r\n\r\nSo I would make my design choice based on security consideration: will I have complete control over the code that has access to the instances? What would be the consequence of a thread&#39;s holding a lock on an instance indefinitely?","title":"Avoid synchronized(this) in Java?","body":"<p>While I agree about not adhering blindly to dogmatic rules, does the \"lock stealing\" scenario seem so eccentric to you? A thread could indeed acquire the lock on your object \"externally\"(<code>synchronized(theObject) {...}</code>), blocking other threads waiting on synchronized instance methods.</p>\n\n<p>If you don't believe in malicious code, consider that this code could come from third parties (for instance if you develop some sort of application server).</p>\n\n<p>The \"accidental\" version seems less likely, but as they say, \"make something idiot-proof and someone will invent a better idiot\".</p>\n\n<p>So I agree with the it-depends-on-what-the-class-does school of thought.</p>\n\n<hr>\n\n<p><strong>Edit following eljenso's first 3 comments:</strong></p>\n\n<p>I've never experienced the lock stealing problem but here is an imaginary scenario:</p>\n\n<p>Let's say your system is a servlet container, and the object we're considering is the <code>ServletContext</code> implementation. Its <code>getAttribute</code> method must be thread-safe, as context attributes are shared data; so you declare it as <code>synchronized</code>. Let's also imagine that you provide a public hosting service based on your container implementation.</p>\n\n<p>I'm your customer and deploy my \"good\" servlet on your site. It happens that my code contains a call to <code>getAttribute</code>.</p>\n\n<p>A hacker, disguised as another customer, deploys his malicious servlet on your site. It contains the following code in the <code>init</code> method:</p>\n\n<pre>\nsynchronized (this.getServletConfig().getServletContext()) {\n   while (true) {}\n}\n</pre>\n\n<p>Assuming we share the same servlet context (allowed by the spec as long as the two servlets are on the same virtual host), my call on <code>getAttribute</code> is locked forever. The hacker has achieved a DoS on my servlet.</p>\n\n<p>This attack is not possible if <code>getAttribute</code> is synchronized on a private lock, because 3rd-party code cannot acquire this lock.</p>\n\n<p>I admit that the example is contrived and an oversimplistic view of how a servlet container works, but IMHO it proves the point.</p>\n\n<p>So I would make my design choice based on security consideration: will I have complete control over the code that has access to the instances? What would be the consequence of a thread's holding a lock on an instance indefinitely?</p>\n"},{"tags":[],"owner":{"account_id":1387,"reputation":32183,"user_id":1853,"accept_rate":94,"display_name":"serg10"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1231936980,"creation_date":1231936302,"answer_id":442783,"question_id":442564,"body_markdown":"**There seems a different consensus in the C# and Java camps on this.**  The majority of Java code I have seen uses:\r\n\r\n    // apply mutex to this instance\r\n    synchronized(this) {\r\n        // do work here\r\n    }\r\n\r\nwhereas the majority of C# code opts for the arguably safer:\r\n\r\n    // instance level lock object\r\n    private readonly object _syncObj = new object();\r\n\r\n    ...\r\n\r\n    // apply mutex to private instance level field (a System.Object usually)\r\n    lock(_syncObj)\r\n    {\r\n        // do work here\r\n    }\r\n\r\nThe C# idiom is certainly safer.  As mentioned previously, no malicious / accidental access to the lock can be made from outside the instance.  Java code has this risk too, **but it seems that the Java community has gravitated over time to the slightly less safe, but slightly more terse version.**  \r\n\r\nThat&#39;s not meant as a dig against Java, just a reflection of my experience working on both languages.","title":"Avoid synchronized(this) in Java?","body":"<p><strong>There seems a different consensus in the C# and Java camps on this.</strong>  The majority of Java code I have seen uses:</p>\n\n<pre><code>// apply mutex to this instance\nsynchronized(this) {\n    // do work here\n}\n</code></pre>\n\n<p>whereas the majority of C# code opts for the arguably safer:</p>\n\n<pre><code>// instance level lock object\nprivate readonly object _syncObj = new object();\n\n...\n\n// apply mutex to private instance level field (a System.Object usually)\nlock(_syncObj)\n{\n    // do work here\n}\n</code></pre>\n\n<p>The C# idiom is certainly safer.  As mentioned previously, no malicious / accidental access to the lock can be made from outside the instance.  Java code has this risk too, <strong>but it seems that the Java community has gravitated over time to the slightly less safe, but slightly more terse version.</strong>  </p>\n\n<p>That's not meant as a dig against Java, just a reflection of my experience working on both languages.</p>\n"},{"tags":[],"owner":{"account_id":3290,"reputation":19931,"user_id":4737,"accept_rate":52,"display_name":"jamesh"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1231943687,"creation_date":1231943687,"answer_id":443160,"question_id":442564,"body_markdown":"The `java.util.concurrent` package has vastly reduced the complexity of my thread safe code. I only have anecdotal evidence to go on, but most work I have seen with `synchronized(x)` appears to be re-implementing a Lock, Semaphore, or Latch, but using the lower-level monitors.\r\n\r\nWith this in mind, synchronizing using any of these mechanisms is analogous to synchronizing on an internal object, rather than leaking a lock. This is beneficial in that you have absolute certainty that you control the entry into the monitor by two or more threads.","title":"Avoid synchronized(this) in Java?","body":"<p>The <code>java.util.concurrent</code> package has vastly reduced the complexity of my thread safe code. I only have anecdotal evidence to go on, but most work I have seen with <code>synchronized(x)</code> appears to be re-implementing a Lock, Semaphore, or Latch, but using the lower-level monitors.</p>\n\n<p>With this in mind, synchronizing using any of these mechanisms is analogous to synchronizing on an internal object, rather than leaking a lock. This is beneficial in that you have absolute certainty that you control the entry into the monitor by two or more threads.</p>\n"},{"tags":[],"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1231945188,"creation_date":1231945188,"answer_id":443260,"question_id":442564,"body_markdown":"If you&#39;ve decided that:\r\n\r\n - the thing you need to do is lock on\r\n   the current object; and\r\n - you want to\r\n   lock it with granularity smaller than\r\n   a whole method;\r\n\r\nthen I don&#39;t see the a taboo over synchronizezd(this).\r\n\r\nSome people deliberately use synchronized(this) (instead of marking the method synchronized) inside the whole contents of a method because they think it&#39;s &quot;clearer to the reader&quot; which object is actually being synchronized on. So long as people are making an informed choice (e.g. understand that by doing so they&#39;re actually inserting extra bytecodes into the method and this could have a knock-on effect on potential optimisations), I don&#39;t particularly see a problem with this. You should always document the concurrent behaviour of your program, so I don&#39;t see the &quot;&#39;synchronized&#39; publishes the behaviour&quot; argument as being so compelling.\r\n\r\nAs to the question of which object&#39;s lock you should use, I think there&#39;s nothing wrong with synchronizing on the current object **if this would be expected by the logic of what you&#39;re doing and how your class would typically be used**. For example, with a collection, the object that you would logically expect to lock is generally the collection itself.","title":"Avoid synchronized(this) in Java?","body":"<p>If you've decided that:</p>\n\n<ul>\n<li>the thing you need to do is lock on\nthe current object; and</li>\n<li>you want to\nlock it with granularity smaller than\na whole method;</li>\n</ul>\n\n<p>then I don't see the a taboo over synchronizezd(this).</p>\n\n<p>Some people deliberately use synchronized(this) (instead of marking the method synchronized) inside the whole contents of a method because they think it's \"clearer to the reader\" which object is actually being synchronized on. So long as people are making an informed choice (e.g. understand that by doing so they're actually inserting extra bytecodes into the method and this could have a knock-on effect on potential optimisations), I don't particularly see a problem with this. You should always document the concurrent behaviour of your program, so I don't see the \"'synchronized' publishes the behaviour\" argument as being so compelling.</p>\n\n<p>As to the question of which object's lock you should use, I think there's nothing wrong with synchronizing on the current object <strong>if this would be expected by the logic of what you're doing and how your class would typically be used</strong>. For example, with a collection, the object that you would logically expect to lock is generally the collection itself.</p>\n"},{"tags":[],"owner":{"account_id":166371,"reputation":422,"user_id":390442,"display_name":"Bart Prokop"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1279027167,"creation_date":1279024734,"answer_id":3237204,"question_id":442564,"body_markdown":"A good example for use synchronized(this).\r\n\r\n    // add listener\r\n    public final synchronized void addListener(IListener l) {listeners.add(l);}\r\n    // remove listener\r\n    public final synchronized void removeListener(IListener l) {listeners.remove(l);}\r\n    // routine that raise events\r\n    public void run() {\r\n       // some code here...\r\n       Set ls;\r\n       synchronized(this) {\r\n          ls = listeners.clone();\r\n       }\r\n       for (IListener l : ls) { l.processEvent(event); }\r\n       // some code here...\r\n    }\r\n\r\nAs you can see here, we use synchronize on this to easy cooperate of lengthly (possibly infinite loop of run method) with some synchronized methods there.\r\n\r\nOf course it can be very easily rewritten with using synchronized on private field. But sometimes, when we already have some design with synchronized methods (i.e. legacy class, we derive from, synchronized(this) can be the only solution).","title":"Avoid synchronized(this) in Java?","body":"<p>A good example for use synchronized(this).</p>\n\n<pre><code>// add listener\npublic final synchronized void addListener(IListener l) {listeners.add(l);}\n// remove listener\npublic final synchronized void removeListener(IListener l) {listeners.remove(l);}\n// routine that raise events\npublic void run() {\n   // some code here...\n   Set ls;\n   synchronized(this) {\n      ls = listeners.clone();\n   }\n   for (IListener l : ls) { l.processEvent(event); }\n   // some code here...\n}\n</code></pre>\n\n<p>As you can see here, we use synchronize on this to easy cooperate of lengthly (possibly infinite loop of run method) with some synchronized methods there.</p>\n\n<p>Of course it can be very easily rewritten with using synchronized on private field. But sometimes, when we already have some design with synchronized methods (i.e. legacy class, we derive from, synchronized(this) can be the only solution).</p>\n"},{"tags":[],"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1361341612,"creation_date":1361341612,"answer_id":14973568,"question_id":442564,"body_markdown":"The reason not to synchronize on _this_ is that sometimes you need more than one lock (the second lock often gets removed after some additional thinking, but you still need it in the intermediate state). If you lock on _this_, you always have to remember which one of the two locks is _this_; if you lock on a private Object, the variable name tells you that.\r\n\r\nFrom the reader&#39;s viewpoint, if you see locking on _this_, you always have to answer the two questions: \r\n\r\n 1. what kind of access is protected by _this_?\r\n 2. is one lock really enough, didn&#39;t someone introduce a bug?\r\n\r\nAn example:\r\n\r\n    class BadObject {\r\n        private Something mStuff;\r\n        synchronized setStuff(Something stuff) {\r\n            mStuff = stuff;\r\n        }\r\n        synchronized getStuff(Something stuff) {\r\n            return mStuff;\r\n        }\r\n        private MyListener myListener = new MyListener() {\r\n            public void onMyEvent(...) {\r\n                setStuff(...);\r\n            }\r\n        }\r\n        synchronized void longOperation(MyListener l) {\r\n            ...\r\n            l.onMyEvent(...);\r\n            ...\r\n        }\r\n    }\r\n\r\nIf two threads begin `longOperation()` on two different instances of `BadObject`, they acquire \r\ntheir locks; when it&#39;s time to invoke `l.onMyEvent(...)`, we have a deadlock because neither of the threads may acquire the other object&#39;s lock.\r\n\r\nIn this example we may eliminate the deadlock by using two locks, one for short operations and one for long ones.","title":"Avoid synchronized(this) in Java?","body":"<p>The reason not to synchronize on <em>this</em> is that sometimes you need more than one lock (the second lock often gets removed after some additional thinking, but you still need it in the intermediate state). If you lock on <em>this</em>, you always have to remember which one of the two locks is <em>this</em>; if you lock on a private Object, the variable name tells you that.</p>\n\n<p>From the reader's viewpoint, if you see locking on <em>this</em>, you always have to answer the two questions: </p>\n\n<ol>\n<li>what kind of access is protected by <em>this</em>?</li>\n<li>is one lock really enough, didn't someone introduce a bug?</li>\n</ol>\n\n<p>An example:</p>\n\n<pre><code>class BadObject {\n    private Something mStuff;\n    synchronized setStuff(Something stuff) {\n        mStuff = stuff;\n    }\n    synchronized getStuff(Something stuff) {\n        return mStuff;\n    }\n    private MyListener myListener = new MyListener() {\n        public void onMyEvent(...) {\n            setStuff(...);\n        }\n    }\n    synchronized void longOperation(MyListener l) {\n        ...\n        l.onMyEvent(...);\n        ...\n    }\n}\n</code></pre>\n\n<p>If two threads begin <code>longOperation()</code> on two different instances of <code>BadObject</code>, they acquire \ntheir locks; when it's time to invoke <code>l.onMyEvent(...)</code>, we have a deadlock because neither of the threads may acquire the other object's lock.</p>\n\n<p>In this example we may eliminate the deadlock by using two locks, one for short operations and one for long ones.</p>\n"},{"tags":[],"owner":{"account_id":2461264,"reputation":350,"user_id":2145397,"display_name":"Roman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394728540,"creation_date":1373964632,"answer_id":17672039,"question_id":442564,"body_markdown":"As already said here synchronized block can use user-defined variable as lock object, when synchronized function uses only &quot;this&quot;. And of course you can manipulate with areas of your function which should be synchronized and so on.\r\n\r\nBut everyone says that no difference between synchronized function and block which covers whole function using &quot;this&quot; as lock object. That is not true, difference is in byte code which will be generated in both situations. In case of synchronized block usage should be allocated local variable which holds reference to &quot;this&quot;. And as result we will have a little bit larger size of function (not relevant if you have only few number of functions).\r\n\r\nMore detailed explanation of the difference you can find here:\r\nhttp://www.artima.com/insidejvm/ed2/threadsynchP.html\r\n\r\nAlso usage of synchronized block is not good due to following point of view:\r\n\r\n&gt; The synchronized keyword is very limited in one area: when exiting a synchronized block, all threads that are waiting for that lock must be unblocked, but only one of those threads gets to take the lock; all the others see that the lock is taken and go back to the blocked state. That&#39;s not just a lot of wasted processing cycles: often the context switch to unblock a thread also involves paging memory off the disk, and that&#39;s very, very, expensive.\r\n\r\nFor more details in this area I would recommend you read this article:\r\nhttp://java.dzone.com/articles/synchronized-considered","title":"Avoid synchronized(this) in Java?","body":"<p>As already said here synchronized block can use user-defined variable as lock object, when synchronized function uses only \"this\". And of course you can manipulate with areas of your function which should be synchronized and so on.</p>\n\n<p>But everyone says that no difference between synchronized function and block which covers whole function using \"this\" as lock object. That is not true, difference is in byte code which will be generated in both situations. In case of synchronized block usage should be allocated local variable which holds reference to \"this\". And as result we will have a little bit larger size of function (not relevant if you have only few number of functions).</p>\n\n<p>More detailed explanation of the difference you can find here:\n<a href=\"http://www.artima.com/insidejvm/ed2/threadsynchP.html\" rel=\"nofollow\">http://www.artima.com/insidejvm/ed2/threadsynchP.html</a></p>\n\n<p>Also usage of synchronized block is not good due to following point of view:</p>\n\n<blockquote>\n  <p>The synchronized keyword is very limited in one area: when exiting a synchronized block, all threads that are waiting for that lock must be unblocked, but only one of those threads gets to take the lock; all the others see that the lock is taken and go back to the blocked state. That's not just a lot of wasted processing cycles: often the context switch to unblock a thread also involves paging memory off the disk, and that's very, very, expensive.</p>\n</blockquote>\n\n<p>For more details in this area I would recommend you read this article:\n<a href=\"http://java.dzone.com/articles/synchronized-considered\" rel=\"nofollow\">http://java.dzone.com/articles/synchronized-considered</a></p>\n"},{"tags":[],"owner":{"account_id":1903805,"reputation":41397,"user_id":1719067,"accept_rate":73,"display_name":"Narendra Pathai"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1384933422,"creation_date":1384933422,"answer_id":20090123,"question_id":442564,"body_markdown":"A lock is used for either *visibility* or for protecting some data from *concurrent modification* which may lead to race.\r\n\r\nWhen you need to just make primitive type operations to be atomic there are available options like `AtomicInteger` and the likes.\r\n\r\nBut suppose you have two integers which are related to each other like `x` and `y` co-ordinates, which are related to each other and should be changed in an atomic manner. Then you would protect them using a same lock.\r\n\r\nA lock should only protect the state that is related to each other. No less and no more. If you use `synchronized(this)` in each method then even if the state of the class is unrelated all the threads will face contention even if updating unrelated state.\r\n\r\n    class Point{\r\n       private int x;\r\n       private int y;\r\n    \r\n       public Point(int x, int y){\r\n           this.x = x;\r\n           this.y = y;\r\n       }\r\n    \r\n       //mutating methods should be guarded by same lock\r\n       public synchronized void changeCoordinates(int x, int y){\r\n           this.x = x;\r\n           this.y = y;\r\n       }\r\n    }\r\n\r\nIn the above example I have only one method which mutates both `x` and `y` and not two different methods as `x` and `y` are related and if I had given two different methods for mutating `x` and `y` separately then it would not have been thread safe. \r\n\r\nThis example is just to demonstrate and not necessarily the way it should be implemented. The best way to do it would be to make it ***IMMUTABLE***.\r\n\r\nNow in opposition to `Point` example, there is an example of `TwoCounters` already provided by @Andreas where the state which is being protected by two different locks as the state is unrelated to each other.\r\n\r\nThe process of using different locks to protect unrelated states is called *Lock Striping or Lock Splitting*\r\n \r\n\r\n\r\n\r\n ","title":"Avoid synchronized(this) in Java?","body":"<p>A lock is used for either <em>visibility</em> or for protecting some data from <em>concurrent modification</em> which may lead to race.</p>\n\n<p>When you need to just make primitive type operations to be atomic there are available options like <code>AtomicInteger</code> and the likes.</p>\n\n<p>But suppose you have two integers which are related to each other like <code>x</code> and <code>y</code> co-ordinates, which are related to each other and should be changed in an atomic manner. Then you would protect them using a same lock.</p>\n\n<p>A lock should only protect the state that is related to each other. No less and no more. If you use <code>synchronized(this)</code> in each method then even if the state of the class is unrelated all the threads will face contention even if updating unrelated state.</p>\n\n<pre><code>class Point{\n   private int x;\n   private int y;\n\n   public Point(int x, int y){\n       this.x = x;\n       this.y = y;\n   }\n\n   //mutating methods should be guarded by same lock\n   public synchronized void changeCoordinates(int x, int y){\n       this.x = x;\n       this.y = y;\n   }\n}\n</code></pre>\n\n<p>In the above example I have only one method which mutates both <code>x</code> and <code>y</code> and not two different methods as <code>x</code> and <code>y</code> are related and if I had given two different methods for mutating <code>x</code> and <code>y</code> separately then it would not have been thread safe. </p>\n\n<p>This example is just to demonstrate and not necessarily the way it should be implemented. The best way to do it would be to make it <strong><em>IMMUTABLE</em></strong>.</p>\n\n<p>Now in opposition to <code>Point</code> example, there is an example of <code>TwoCounters</code> already provided by @Andreas where the state which is being protected by two different locks as the state is unrelated to each other.</p>\n\n<p>The process of using different locks to protect unrelated states is called <em>Lock Striping or Lock Splitting</em></p>\n"},{"tags":[],"owner":{"account_id":5277096,"reputation":41,"user_id":4213548,"display_name":"Sandesh Sadhale"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1415093076,"creation_date":1415092267,"answer_id":26731309,"question_id":442564,"body_markdown":"I think there is a good explanation on why each of these are vital techniques under your belt in a book called Java Concurrency In Practice by Brian Goetz. He makes one point very clear - you must use the same lock &quot;EVERYWHERE&quot; to protect the state of your object. Synchronised method and synchronising on an object often go hand in hand. E.g. Vector synchronises all its methods. If you have a handle to a vector object and are going to do &quot;put if absent&quot; then merely Vector synchronising its own individual methods isn&#39;t going to protect you from corruption of state. You need to synchronise using synchronised (vectorHandle). This will result in the SAME lock being acquired by every thread which has a handle to the vector and will protect overall state of the vector. This is called client side locking. We do know as a matter of fact vector does synchronised (this) / synchronises all its methods and hence synchronising on the object vectorHandle will result in proper synchronisation of vector objects state. Its foolish to believe that you are thread safe just because you are using a thread safe collection. This is precisely the reason ConcurrentHashMap explicitly introduced putIfAbsent method - to make such operations atomic.\r\n\r\nIn summary\r\n\r\n1. Synchronising at method level allows client side locking.\r\n2. If you have a private lock object - it makes client side locking impossible. This is fine if you know that your class doesn&#39;t have &quot;put if absent&quot; type of functionality.\r\n3. If you are designing a library - then synchronising on this or synchronising the method is often wiser. Because you are rarely in a position to decide how your class is going to be used.\r\n4. Had Vector used a private lock object - it would have been impossible to get &quot;put if absent&quot; right. The client code will never gain a handle to the private lock thus breaking the fundamental rule of using the EXACT SAME LOCK to protect its state.\r\n5. Synchronising on this or synchronised methods do have a problem as others have pointed out - someone could get a lock and never release it. All other threads would keep waiting for the lock to be released.\r\n6. So know what you are doing and adopt the one that&#39;s correct.\r\n7. Someone argued that having a private lock object gives you better granularity - e.g. if two operations are unrelated - they could be guarded by different locks resulting in better throughput. But this i think is design smell and not code smell - if two operations are completely unrelated why are they part of the SAME class? Why should a class club unrelated functionalities at all? May be a utility class? Hmmmm - some util providing string manipulation and calendar date formatting through the same instance?? ... doesn&#39;t make any sense to me at least!!","title":"Avoid synchronized(this) in Java?","body":"<p>I think there is a good explanation on why each of these are vital techniques under your belt in a book called Java Concurrency In Practice by Brian Goetz. He makes one point very clear - you must use the same lock \"EVERYWHERE\" to protect the state of your object. Synchronised method and synchronising on an object often go hand in hand. E.g. Vector synchronises all its methods. If you have a handle to a vector object and are going to do \"put if absent\" then merely Vector synchronising its own individual methods isn't going to protect you from corruption of state. You need to synchronise using synchronised (vectorHandle). This will result in the SAME lock being acquired by every thread which has a handle to the vector and will protect overall state of the vector. This is called client side locking. We do know as a matter of fact vector does synchronised (this) / synchronises all its methods and hence synchronising on the object vectorHandle will result in proper synchronisation of vector objects state. Its foolish to believe that you are thread safe just because you are using a thread safe collection. This is precisely the reason ConcurrentHashMap explicitly introduced putIfAbsent method - to make such operations atomic.</p>\n\n<p>In summary</p>\n\n<ol>\n<li>Synchronising at method level allows client side locking.</li>\n<li>If you have a private lock object - it makes client side locking impossible. This is fine if you know that your class doesn't have \"put if absent\" type of functionality.</li>\n<li>If you are designing a library - then synchronising on this or synchronising the method is often wiser. Because you are rarely in a position to decide how your class is going to be used.</li>\n<li>Had Vector used a private lock object - it would have been impossible to get \"put if absent\" right. The client code will never gain a handle to the private lock thus breaking the fundamental rule of using the EXACT SAME LOCK to protect its state.</li>\n<li>Synchronising on this or synchronised methods do have a problem as others have pointed out - someone could get a lock and never release it. All other threads would keep waiting for the lock to be released.</li>\n<li>So know what you are doing and adopt the one that's correct.</li>\n<li>Someone argued that having a private lock object gives you better granularity - e.g. if two operations are unrelated - they could be guarded by different locks resulting in better throughput. But this i think is design smell and not code smell - if two operations are completely unrelated why are they part of the SAME class? Why should a class club unrelated functionalities at all? May be a utility class? Hmmmm - some util providing string manipulation and calendar date formatting through the same instance?? ... doesn't make any sense to me at least!!</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5981137,"reputation":17317,"user_id":4700156,"accept_rate":64,"display_name":"Rohit Singh"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1538674417,"creation_date":1473614809,"answer_id":39438754,"question_id":442564,"body_markdown":"It depends on the situation.   \r\nIf There is only one sharing entity or more than one.   \r\n\r\n**See full working example** [here][1]            \r\n\r\n\r\nA small introduction.  \r\n \r\n**Threads and shareable entities**        \r\nIt is possible for multiple threads to access same entity, for eg multiple connectionThreads sharing a single messageQueue. Since the threads run concurrently there may be a chance of overriding one&#39;s data by another which may be a messed up situation.   \r\nSo we need some way to ensure that shareable entity is accessed only by one thread at a time. (CONCURRENCY).  \r\n\r\n**Synchronized block**       \r\nsynchronized() block is a way to ensure concurrent access of shareable entity.  \r\nFirst, a small analogy      \r\nSuppose There are two-person P1, P2 (threads) a Washbasin (shareable entity) inside a washroom and there is a door (lock).      \r\nNow we want one person to use washbasin at a time.      \r\nAn approach is to lock the door by P1 when the door is locked P2 waits until p1 completes his work     \r\nP1 unlocks the door      \r\nthen only p1 can use washbasin.   \r\n\r\nsyntax.    \r\n\r\n    synchronized(this)\r\n    {\r\n      SHARED_ENTITY.....\r\n    }\r\n&quot;this&quot; provided the intrinsic lock associated with the class (Java developer designed Object class in such a way that each object can work as monitor).\r\nAbove approach works fine when there are only one shared entity and multiple threads (1: N).  \r\n  [![enter image description here][2]][2]\r\n**N shareable entities-M threads**      \r\nNow think of a situation when there is two washbasin inside a washroom and only one door. If we are using the previous approach, only p1 can use one washbasin at a time while p2 will wait outside. It is wastage of resource as no one is using B2 (washbasin).         \r\nA wiser approach would be to create a smaller room inside washroom and provide them one door per washbasin. In this way, P1 can access B1 and P2 can access B2 and vice-versa.  \r\n\r\n    washbasin1;  \r\n    washbasin2;\r\n    \r\n    Object lock1=new Object();\r\n    Object lock2=new Object();\r\n     \r\n      synchronized(lock1)\r\n      {\r\n        washbasin1;\r\n      }\r\n\r\n      synchronized(lock2)\r\n      {\r\n        washbasin2;\r\n      }\r\n\r\n[![enter image description here][3]][3]             \r\n[![enter image description here][4]][4]\r\n\r\n**See more on Threads**----&gt; [here][5]\r\n\r\n\r\n  [1]: https://github.com/rohitksingh/Multi-Threading\r\n  [2]: http://i.stack.imgur.com/jrbvI.png\r\n  [3]: http://i.stack.imgur.com/jqavZ.png\r\n  [4]: http://i.stack.imgur.com/Xeydw.png\r\n  [5]: https://github.com/rohitksingh/Multi-Threading/wiki","title":"Avoid synchronized(this) in Java?","body":"<p>It depends on the situation.<br>\nIf There is only one sharing entity or more than one.   </p>\n\n<p><strong>See full working example</strong> <a href=\"https://github.com/rohitksingh/Multi-Threading\" rel=\"noreferrer\">here</a>            </p>\n\n<p>A small introduction.  </p>\n\n<p><strong>Threads and shareable entities</strong><br>\nIt is possible for multiple threads to access same entity, for eg multiple connectionThreads sharing a single messageQueue. Since the threads run concurrently there may be a chance of overriding one's data by another which may be a messed up situation.<br>\nSo we need some way to ensure that shareable entity is accessed only by one thread at a time. (CONCURRENCY).  </p>\n\n<p><strong>Synchronized block</strong><br>\nsynchronized() block is a way to ensure concurrent access of shareable entity.<br>\nFirst, a small analogy<br>\nSuppose There are two-person P1, P2 (threads) a Washbasin (shareable entity) inside a washroom and there is a door (lock).<br>\nNow we want one person to use washbasin at a time.<br>\nAn approach is to lock the door by P1 when the door is locked P2 waits until p1 completes his work<br>\nP1 unlocks the door<br>\nthen only p1 can use washbasin.   </p>\n\n<p>syntax.    </p>\n\n<pre><code>synchronized(this)\n{\n  SHARED_ENTITY.....\n}\n</code></pre>\n\n<p>\"this\" provided the intrinsic lock associated with the class (Java developer designed Object class in such a way that each object can work as monitor).\nAbove approach works fine when there are only one shared entity and multiple threads (1: N).<br>\n  <a href=\"https://i.stack.imgur.com/jrbvI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jrbvI.png\" alt=\"enter image description here\"></a>\n<strong>N shareable entities-M threads</strong><br>\nNow think of a situation when there is two washbasin inside a washroom and only one door. If we are using the previous approach, only p1 can use one washbasin at a time while p2 will wait outside. It is wastage of resource as no one is using B2 (washbasin).<br>\nA wiser approach would be to create a smaller room inside washroom and provide them one door per washbasin. In this way, P1 can access B1 and P2 can access B2 and vice-versa.  </p>\n\n<pre><code>washbasin1;  \nwashbasin2;\n\nObject lock1=new Object();\nObject lock2=new Object();\n\n  synchronized(lock1)\n  {\n    washbasin1;\n  }\n\n  synchronized(lock2)\n  {\n    washbasin2;\n  }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jqavZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jqavZ.png\" alt=\"enter image description here\"></a><br>\n<a href=\"https://i.stack.imgur.com/Xeydw.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Xeydw.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>See more on Threads</strong>----> <a href=\"https://github.com/rohitksingh/Multi-Threading/wiki\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540802281,"creation_date":1540802281,"answer_id":53041597,"question_id":442564,"body_markdown":"This is really just supplementary to the other answers, but if your main objection to using private objects for locking is that it clutters your class with fields that are not related to the business logic then Project Lombok has [`@Synchronized`](https://projectlombok.org/features/Synchronized) to generate the boilerplate at compile-time:\r\n\r\n    @Synchronized\r\n    public int foo() {\r\n        return 0;\r\n    }\r\n\r\ncompiles to\r\n\r\n    private final Object $lock = new Object[0];\r\n\r\n    public int foo() {\r\n        synchronized($lock) {\r\n            return 0;\r\n        }\r\n    }\r\n ","title":"Avoid synchronized(this) in Java?","body":"<p>This is really just supplementary to the other answers, but if your main objection to using private objects for locking is that it clutters your class with fields that are not related to the business logic then Project Lombok has <a href=\"https://projectlombok.org/features/Synchronized\" rel=\"nofollow noreferrer\"><code>@Synchronized</code></a> to generate the boilerplate at compile-time:</p>\n\n<pre><code>@Synchronized\npublic int foo() {\n    return 0;\n}\n</code></pre>\n\n<p>compiles to</p>\n\n<pre><code>private final Object $lock = new Object[0];\n\npublic int foo() {\n    synchronized($lock) {\n        return 0;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11554857,"reputation":21,"user_id":8466347,"display_name":"Kolarč&#237;k V&#225;clav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694420956,"creation_date":1542532626,"answer_id":53359380,"question_id":442564,"body_markdown":"I want to mention possible solution for atomic parts of source code. You can use a Hashmap with locks that use class names and line numbers.\r\n\r\n\t// Synchronization objects (locks)\r\n\tprivate static HashMap&lt;String, Object&gt; locks = new HashMap&lt;String, Object&gt;();\r\n    // Simple method\r\n\tprivate static Object atomic() {\r\n\t\tStackTraceElement [] stack = Thread.currentThread().getStackTrace(); // get execution point \r\n\t\tStackTraceElement exepoint = stack[2];\r\n        // creates unique key from class name and line number using execution point\r\n\t\tString key = String.format(&quot;%s#%d&quot;, exepoint.getClassName(), exepoint.getLineNumber()); \r\n\t\tObject lock = locks.get(key); // use old or create new lock\r\n\t\tif (lock == null) {\r\n\t\t\tlock = new Object();\r\n\t\t\tlocks.put(key, lock);\r\n\t\t}\r\n\t\treturn lock; // return reference to lock\r\n\t}\r\n    // Synchronized code\r\n    void dosomething1() {\r\n        // start commands\r\n\t\tsynchronized (atomic()) {\r\n            // atomic commands 1\r\n            ...\r\n        }\r\n        // other command\r\n    }\r\n    // Synchronized code\r\n    void dosomething2() {\r\n        // start commands\r\n\t\tsynchronized (atomic()) {\r\n            // atomic commands 2\r\n            ...\r\n        }\r\n        // other command\r\n    }","title":"Avoid synchronized(this) in Java?","body":"<p>I want to mention possible solution for atomic parts of source code. You can use a Hashmap with locks that use class names and line numbers.</p>\n<pre><code>// Synchronization objects (locks)\nprivate static HashMap&lt;String, Object&gt; locks = new HashMap&lt;String, Object&gt;();\n// Simple method\nprivate static Object atomic() {\n    StackTraceElement [] stack = Thread.currentThread().getStackTrace(); // get execution point \n    StackTraceElement exepoint = stack[2];\n    // creates unique key from class name and line number using execution point\n    String key = String.format(&quot;%s#%d&quot;, exepoint.getClassName(), exepoint.getLineNumber()); \n    Object lock = locks.get(key); // use old or create new lock\n    if (lock == null) {\n        lock = new Object();\n        locks.put(key, lock);\n    }\n    return lock; // return reference to lock\n}\n// Synchronized code\nvoid dosomething1() {\n    // start commands\n    synchronized (atomic()) {\n        // atomic commands 1\n        ...\n    }\n    // other command\n}\n// Synchronized code\nvoid dosomething2() {\n    // start commands\n    synchronized (atomic()) {\n        // atomic commands 2\n        ...\n    }\n    // other command\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9421037,"reputation":530,"user_id":9851598,"display_name":"surendrapanday"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551140403,"creation_date":1551140403,"answer_id":54876721,"question_id":442564,"body_markdown":"Avoid using `synchronized(this)` as a locking mechanism: This locks the whole class instance and can cause deadlocks. In such cases, refactor the code to lock only a specific method or variable, that way whole class doesn&#39;t get locked. `Synchronised` can be used inside method level.   \r\nInstead of using `synchronized(this)`, below code shows how you could just lock a method.  \r\n     \r\n\r\n       public void foo() {\r\n    if(operation = null) {\r\n        synchronized(foo) { \r\n    if (operation == null) {\r\n     // enter your code that this method has to handle...\r\n              }\r\n            }\r\n          }\r\n        }","title":"Avoid synchronized(this) in Java?","body":"<p>Avoid using <code>synchronized(this)</code> as a locking mechanism: This locks the whole class instance and can cause deadlocks. In such cases, refactor the code to lock only a specific method or variable, that way whole class doesn't get locked. <code>Synchronised</code> can be used inside method level.<br>\nInstead of using <code>synchronized(this)</code>, below code shows how you could just lock a method.  </p>\n\n<pre><code>   public void foo() {\nif(operation = null) {\n    synchronized(foo) { \nif (operation == null) {\n // enter your code that this method has to handle...\n          }\n        }\n      }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1597307,"reputation":2656,"user_id":1479080,"display_name":"Amit Mittal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563345152,"creation_date":1563344491,"answer_id":57069640,"question_id":442564,"body_markdown":"My two cents in 2019 even though this question could have been settled already.\r\n\r\nLocking on &#39;this&#39; is not bad if you know what you are doing but behind the scene locking on &#39;this&#39; is (which unfortunately what synchronized keyword in method definition allows).\r\n\r\nIf you actually want users of your class to be able to &#39;steal&#39; your lock (i.e. prevent other threads from dealing with it), you actually want all the synchronized methods to wait while another sync method is running and so on. \r\nIt should be intentional and well thought off (and hence documented to help your users understand it).\r\n\r\nTo further elaborate, in the reverse you must know what you are &#39;gaining&#39; (or &#39;losing&#39; out on) if you lock on a non accessible lock (nobody can &#39;steal&#39; your lock, you are in total control and so on...). \r\n\r\nThe problem for me is that synchronized keyword in the method definition signature makes it just too easy for programmers **not to think** about what to lock on which is a mighty important thing to think about if you don&#39;t want to run into problems in a multi-threaded program.\r\n\r\nOne can&#39;t argue that &#39;typically&#39; you don&#39;t want users of your class to be able to do these stuff or that &#39;typically&#39; you want...It depends on what functionality you are coding. You can&#39;t make a thumb rule as you can&#39;t predict all the use cases.\r\n\r\nConsider for e.g. the printwriter which uses an internal lock but then people struggle to use it from multiple threads if they don&#39;t want their output to interleave.\r\n\r\nShould your lock be accessible outside of the class or not is your decision as a programmer on the basis of what functionality the class has. It is part of the api. You can&#39;t move away for instance from synchronized(this) to synchronized(provateObjet) without risking breaking changes in the code using it.\r\n\r\nNote 1: I know you can achieve whatever synchronized(this) &#39;achieves&#39; by using a explicit lock object and exposing it but I think it is unnecessary if your behaviour is well documented and you actually know what locking on &#39;this&#39; means.\r\n\r\nNote 2: I don&#39;t concur with the argument that if some code is accidentally stealing your lock its a bug and you have to solve it. This in a way is same argument as saying I can make all my methods public even if they are not meant to be public. If someone is &#39;accidentally&#39; calling my intended to be private method its a bug. Why enable this accident in the first place!!! If ability to steal your lock is a problem for your class don&#39;t allow it. As simple as that.","title":"Avoid synchronized(this) in Java?","body":"<p>My two cents in 2019 even though this question could have been settled already.</p>\n\n<p>Locking on 'this' is not bad if you know what you are doing but behind the scene locking on 'this' is (which unfortunately what synchronized keyword in method definition allows).</p>\n\n<p>If you actually want users of your class to be able to 'steal' your lock (i.e. prevent other threads from dealing with it), you actually want all the synchronized methods to wait while another sync method is running and so on. \nIt should be intentional and well thought off (and hence documented to help your users understand it).</p>\n\n<p>To further elaborate, in the reverse you must know what you are 'gaining' (or 'losing' out on) if you lock on a non accessible lock (nobody can 'steal' your lock, you are in total control and so on...). </p>\n\n<p>The problem for me is that synchronized keyword in the method definition signature makes it just too easy for programmers <strong>not to think</strong> about what to lock on which is a mighty important thing to think about if you don't want to run into problems in a multi-threaded program.</p>\n\n<p>One can't argue that 'typically' you don't want users of your class to be able to do these stuff or that 'typically' you want...It depends on what functionality you are coding. You can't make a thumb rule as you can't predict all the use cases.</p>\n\n<p>Consider for e.g. the printwriter which uses an internal lock but then people struggle to use it from multiple threads if they don't want their output to interleave.</p>\n\n<p>Should your lock be accessible outside of the class or not is your decision as a programmer on the basis of what functionality the class has. It is part of the api. You can't move away for instance from synchronized(this) to synchronized(provateObjet) without risking breaking changes in the code using it.</p>\n\n<p>Note 1: I know you can achieve whatever synchronized(this) 'achieves' by using a explicit lock object and exposing it but I think it is unnecessary if your behaviour is well documented and you actually know what locking on 'this' means.</p>\n\n<p>Note 2: I don't concur with the argument that if some code is accidentally stealing your lock its a bug and you have to solve it. This in a way is same argument as saying I can make all my methods public even if they are not meant to be public. If someone is 'accidentally' calling my intended to be private method its a bug. Why enable this accident in the first place!!! If ability to steal your lock is a problem for your class don't allow it. As simple as that.</p>\n"},{"tags":[],"owner":{"account_id":218063,"reputation":3190,"user_id":474197,"accept_rate":46,"display_name":"HKTonyLee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652769633,"creation_date":1623094806,"answer_id":67877778,"question_id":442564,"body_markdown":"Let me put the conclusion first - locking on private fields does not work for slightly more complicated multi-threaded program. This is because multi-threading is a global problem. It is impossible to localize synchronization unless you write in a very defensive way (e.g. copy everything on passing to other threads).\r\n\r\n---\r\n\r\nHere is the long explanation:\r\n\r\nSynchronization includes 3 parts: Atomicity, Visibility and Ordering\r\n\r\nSynchronized block is very coarse level of synchronization. It enforces visibility and ordering just as what you expected. But for atomicity, it does not provide much protection. Atomicity requires global knowledge of the program rather than local knowledge. (And that makes multi-threading programming very hard)\r\n\r\nLet&#39;s say we have a class `Account` having method `deposit` and `withdraw`. They are both synchronized based on a private lock like this:\r\n\r\n```\r\nclass Account {\r\n    private Object lock = new Object();\r\n\r\n    void withdraw(int amount) {\r\n        synchronized(lock) {\r\n            // ...\r\n        }\r\n    }\r\n\r\n    void deposit(int amount) {\r\n        synchronized(lock) {\r\n            // ...\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nConsidering we need to implement a higher-level class which handles transfer, like this:\r\n\r\n```\r\nclass AccountManager {\r\n    void transfer(Account fromAcc, Account toAcc, int amount) {\r\n        if (fromAcc.getBalance() &gt; amount) {\r\n            fromAcc.setBalance(fromAcc.getBalance() - amount);\r\n            toAcc.setBalance(toAcc.getBalance + amount);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAssuming we have 2 accounts now,\r\n\r\n```\r\nAccount john;\r\nAccount marry;\r\n```\r\n\r\nIf the `Account.deposit()` and `Account.withdraw()` are locked with internal lock only. That will cause problem when we have 2 threads working:\r\n\r\n```\r\n// Some thread\r\nvoid threadA() {\r\n    john.withdraw(500);\r\n}\r\n\r\n// Another thread\r\nvoid threadB() {\r\n    accountManager.transfer(john, marry, 100);\r\n}\r\n```\r\n\r\nBecause it is possible for both `threadA` and `threadB` run at the same time. And thread B finishes the conditional check, thread A withdraws, and thread B withdraws again. This means we can withdraw $100 from John even if his account has no enough money. This will break atomicity.\r\n\r\nYou may propose that: why not adding `withdraw()` and `deposit()` to `AccountManager` then? But under this proposal, we need to create a multi-thread safe `Map` which maps from different accounts to their locks. We need to delete the lock after execution (otherwise will leak memory). And we also need to ensure no other one accesses the `Account.withdraw()` directly. This will introduce a lots of subtle bugs.\r\n\r\nThe correct and most idiomatic way is to expose the lock in the `Account`. And let the `AccountManager` to use the lock. But in this case, why not just use the object itself then?\r\n\r\n```\r\nclass Account {\r\n    synchronized void withdraw(int amount) {\r\n        // ...\r\n    }\r\n\r\n    synchronized void deposit(int amount) {\r\n        // ...\r\n    }\r\n}\r\n\r\nclass AccountManager {\r\n    void transfer(Account fromAcc, Account toAcc, int amount) {\r\n        // Ensure locking order to prevent deadlock\r\n        Account firstLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? fromAcc : toAcc;\r\n        Account secondLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? toAcc : fromAcc;\r\n\r\n        synchronized(firstLock) {\r\n            synchronized(secondLock) {\r\n                if (fromAcc.getBalance() &gt; amount) {\r\n                    fromAcc.setBalance(fromAcc.getBalance() - amount);\r\n                    toAcc.setBalance(toAcc.getBalance + amount);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nTo conclude in simple English, private lock does not work for slightly more complicated multi-threaded program.\r\n\r\n\r\n(Reposted from https://stackoverflow.com/a/67877650/474197)\r\n","title":"Avoid synchronized(this) in Java?","body":"<p>Let me put the conclusion first - locking on private fields does not work for slightly more complicated multi-threaded program. This is because multi-threading is a global problem. It is impossible to localize synchronization unless you write in a very defensive way (e.g. copy everything on passing to other threads).</p>\n<hr />\n<p>Here is the long explanation:</p>\n<p>Synchronization includes 3 parts: Atomicity, Visibility and Ordering</p>\n<p>Synchronized block is very coarse level of synchronization. It enforces visibility and ordering just as what you expected. But for atomicity, it does not provide much protection. Atomicity requires global knowledge of the program rather than local knowledge. (And that makes multi-threading programming very hard)</p>\n<p>Let's say we have a class <code>Account</code> having method <code>deposit</code> and <code>withdraw</code>. They are both synchronized based on a private lock like this:</p>\n<pre><code>class Account {\n    private Object lock = new Object();\n\n    void withdraw(int amount) {\n        synchronized(lock) {\n            // ...\n        }\n    }\n\n    void deposit(int amount) {\n        synchronized(lock) {\n            // ...\n        }\n    }\n}\n</code></pre>\n<p>Considering we need to implement a higher-level class which handles transfer, like this:</p>\n<pre><code>class AccountManager {\n    void transfer(Account fromAcc, Account toAcc, int amount) {\n        if (fromAcc.getBalance() &gt; amount) {\n            fromAcc.setBalance(fromAcc.getBalance() - amount);\n            toAcc.setBalance(toAcc.getBalance + amount);\n        }\n    }\n}\n</code></pre>\n<p>Assuming we have 2 accounts now,</p>\n<pre><code>Account john;\nAccount marry;\n</code></pre>\n<p>If the <code>Account.deposit()</code> and <code>Account.withdraw()</code> are locked with internal lock only. That will cause problem when we have 2 threads working:</p>\n<pre><code>// Some thread\nvoid threadA() {\n    john.withdraw(500);\n}\n\n// Another thread\nvoid threadB() {\n    accountManager.transfer(john, marry, 100);\n}\n</code></pre>\n<p>Because it is possible for both <code>threadA</code> and <code>threadB</code> run at the same time. And thread B finishes the conditional check, thread A withdraws, and thread B withdraws again. This means we can withdraw $100 from John even if his account has no enough money. This will break atomicity.</p>\n<p>You may propose that: why not adding <code>withdraw()</code> and <code>deposit()</code> to <code>AccountManager</code> then? But under this proposal, we need to create a multi-thread safe <code>Map</code> which maps from different accounts to their locks. We need to delete the lock after execution (otherwise will leak memory). And we also need to ensure no other one accesses the <code>Account.withdraw()</code> directly. This will introduce a lots of subtle bugs.</p>\n<p>The correct and most idiomatic way is to expose the lock in the <code>Account</code>. And let the <code>AccountManager</code> to use the lock. But in this case, why not just use the object itself then?</p>\n<pre><code>class Account {\n    synchronized void withdraw(int amount) {\n        // ...\n    }\n\n    synchronized void deposit(int amount) {\n        // ...\n    }\n}\n\nclass AccountManager {\n    void transfer(Account fromAcc, Account toAcc, int amount) {\n        // Ensure locking order to prevent deadlock\n        Account firstLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? fromAcc : toAcc;\n        Account secondLock = fromAcc.hashCode() &lt; toAcc.hashCode() ? toAcc : fromAcc;\n\n        synchronized(firstLock) {\n            synchronized(secondLock) {\n                if (fromAcc.getBalance() &gt; amount) {\n                    fromAcc.setBalance(fromAcc.getBalance() - amount);\n                    toAcc.setBalance(toAcc.getBalance + amount);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>To conclude in simple English, private lock does not work for slightly more complicated multi-threaded program.</p>\n<p>(Reposted from <a href=\"https://stackoverflow.com/a/67877650/474197\">https://stackoverflow.com/a/67877650/474197</a>)</p>\n"},{"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695799735,"creation_date":1695799735,"answer_id":77185409,"question_id":442564,"body_markdown":"To add to what has been mentioned earlier, with the release of Java 21, which introduced Project Loom and Virtual Threads, it&#39;s advisable to avoid `synchronized` blocks.\r\n\r\nThis is because [JEP 444][1] and [JEP 425][2] tell us the following:\r\n\r\n    There are two scenarios in which a virtual thread cannot be unmounted during blocking operations because it is pinned to its carrier:\r\n      When it executes code inside a synchronized block or method, or\r\n      When it executes a native method or a foreign function.\r\n\r\nThus, a virtual thread does not release the operating system thread while working with a `synchronized` method or block.\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/444\r\n  [2]: https://openjdk.org/jeps/425","title":"Avoid synchronized(this) in Java?","body":"<p>To add to what has been mentioned earlier, with the release of Java 21, which introduced Project Loom and Virtual Threads, it's advisable to avoid <code>synchronized</code> blocks.</p>\n<p>This is because <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">JEP 444</a> and <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">JEP 425</a> tell us the following:</p>\n<pre><code>There are two scenarios in which a virtual thread cannot be unmounted during blocking operations because it is pinned to its carrier:\n  When it executes code inside a synchronized block or method, or\n  When it executes a native method or a foreign function.\n</code></pre>\n<p>Thus, a virtual thread does not release the operating system thread while working with a <code>synchronized</code> method or block.</p>\n"}],"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157374,"favorite_count":0,"down_vote_count":0,"up_vote_count":408,"accepted_answer_id":442601,"answer_count":23,"score":408,"last_activity_date":1695799735,"creation_date":1231929474,"question_id":442564,"body_markdown":"Whenever a question pops up on SO about Java synchronization, some people are very eager to point out that `synchronized(this)` should be avoided. Instead, they claim, a lock on a private reference is to be preferred.\r\n\r\nSome of the given reasons are:\r\n\r\n - [some *evil code* may steal your lock][1] (very popular this one, also has an &quot;accidentally&quot; variant)\r\n - [all synchronized methods within the same class use the exact same lock, which reduces throughput][2]\r\n - [you are (unnecessarily) exposing too much information][3]\r\n\r\nOther people, including me, argue that `synchronized(this)` is an idiom that is used a lot (also in Java libraries), is safe and well understood. It should not be avoided because you have a bug and you don&#39;t have a clue of what is going on in your multithreaded program. In other words: if it is applicable, then use it.\r\n\r\nI am interested in seeing some real-world examples (no foobar stuff) where avoiding a lock on `this` is preferable when `synchronized(this)` would also do the job.\r\n\r\nTherefore: **should you always avoid `synchronized(this)` and replace it with a lock on a private reference?**  \r\n\r\n---\r\n\r\nSome further info (updated as answers are given):\r\n\r\n - we are talking about instance synchronization\r\n - both implicit (`synchronized` methods) and explicit form of `synchronized(this)` are considered\r\n - if you quote Bloch or other authorities on the subject, don&#39;t leave out the parts you don&#39;t like (e.g. Effective Java, item on Thread Safety: *Typically it is the lock on the instance itself, but there are exceptions.)*\r\n - if you need granularity in your locking other than `synchronized(this)` provides, then `synchronized(this)` is not applicable so that&#39;s not the issue\r\n\r\n  [1]: https://stackoverflow.com/questions/416183/in-java-critical-sections-what-should-i-synchronize-on#416198\r\n  [2]: https://stackoverflow.com/questions/309631/what-cases-require-synchronized-method-access-in-java#309677\r\n  [3]: https://stackoverflow.com/questions/439302/allowing-a-method-to-lock-its-parent-object-in-java#439317","title":"Avoid synchronized(this) in Java?","body":"<p>Whenever a question pops up on SO about Java synchronization, some people are very eager to point out that <code>synchronized(this)</code> should be avoided. Instead, they claim, a lock on a private reference is to be preferred.</p>\n\n<p>Some of the given reasons are:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/416183/in-java-critical-sections-what-should-i-synchronize-on#416198\">some <em>evil code</em> may steal your lock</a> (very popular this one, also has an \"accidentally\" variant)</li>\n<li><a href=\"https://stackoverflow.com/questions/309631/what-cases-require-synchronized-method-access-in-java#309677\">all synchronized methods within the same class use the exact same lock, which reduces throughput</a></li>\n<li><a href=\"https://stackoverflow.com/questions/439302/allowing-a-method-to-lock-its-parent-object-in-java#439317\">you are (unnecessarily) exposing too much information</a></li>\n</ul>\n\n<p>Other people, including me, argue that <code>synchronized(this)</code> is an idiom that is used a lot (also in Java libraries), is safe and well understood. It should not be avoided because you have a bug and you don't have a clue of what is going on in your multithreaded program. In other words: if it is applicable, then use it.</p>\n\n<p>I am interested in seeing some real-world examples (no foobar stuff) where avoiding a lock on <code>this</code> is preferable when <code>synchronized(this)</code> would also do the job.</p>\n\n<p>Therefore: <strong>should you always avoid <code>synchronized(this)</code> and replace it with a lock on a private reference?</strong>  </p>\n\n<hr>\n\n<p>Some further info (updated as answers are given):</p>\n\n<ul>\n<li>we are talking about instance synchronization</li>\n<li>both implicit (<code>synchronized</code> methods) and explicit form of <code>synchronized(this)</code> are considered</li>\n<li>if you quote Bloch or other authorities on the subject, don't leave out the parts you don't like (e.g. Effective Java, item on Thread Safety: <em>Typically it is the lock on the instance itself, but there are exceptions.)</em></li>\n<li>if you need granularity in your locking other than <code>synchronized(this)</code> provides, then <code>synchronized(this)</code> is not applicable so that's not the issue</li>\n</ul>\n"},{"tags":["java","jms","activemq","spring-jms"],"comments":[{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695751564,"post_id":77179751,"comment_id":136065475,"body_markdown":"Based on the stack-trace it looks like you&#39;re using the HTTP transport. Is that correct? If so, is there a particular reason you&#39;re using it? Could you use the normal TCP transport instead? It looks like your use of the HTTP transport is tied directly to the problem(s) you&#39;re experiencing.","body":"Based on the stack-trace it looks like you&#39;re using the HTTP transport. Is that correct? If so, is there a particular reason you&#39;re using it? Could you use the normal TCP transport instead? It looks like your use of the HTTP transport is tied directly to the problem(s) you&#39;re experiencing."},{"owner":{"account_id":157630,"reputation":17688,"user_id":375722,"display_name":"Tim Bish"},"score":0,"creation_date":1695759412,"post_id":77179751,"comment_id":136066805,"body_markdown":"Posting the connection URI you are using is usually a helpful addition.","body":"Posting the connection URI you are using is usually a helpful addition."},{"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"score":0,"creation_date":1695790766,"post_id":77179751,"comment_id":136069755,"body_markdown":"@JustinBertram we have 2 separate applications and there is a firewall in between, due to security reasons, we have to use HTTPS.","body":"@JustinBertram we have 2 separate applications and there is a firewall in between, due to security reasons, we have to use HTTPS."},{"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"score":0,"creation_date":1695790933,"post_id":77179751,"comment_id":136069772,"body_markdown":"@TimBish connection URI is as below activeMQ.brokerurl=https://dummy.dns.name.com:443/destination-name?useInactivityMonitor=false","body":"@TimBish connection URI is as below activeMQ.brokerurl=<a href=\"https://dummy.dns.name.com:443/destination-name?useInactivityMonitor=false\" rel=\"nofollow noreferrer\">dummy.dns.name.com:443/&hellip;</a>"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1695827961,"post_id":77179751,"comment_id":136076827,"body_markdown":"This looks like a bug in the HTTP transport so if you have no choice but to use it then I would recommend trying to upgrade since ActiveMQ 5.15.12 is over 3 years old now. That said, the HTTP transport isn&#39;t commonly used so an upgrade may not resolve the issue. You might also consider migrating to [ActiveMQ Artemis](https://activemq.apache.org/components/artemis/) (i.e. the next-generation broker from ActiveMQ) which also [supports HTTP](https://activemq.apache.org/components/artemis/documentation/latest/configuring-transports.html#configuring-netty-http).","body":"This looks like a bug in the HTTP transport so if you have no choice but to use it then I would recommend trying to upgrade since ActiveMQ 5.15.12 is over 3 years old now. That said, the HTTP transport isn&#39;t commonly used so an upgrade may not resolve the issue. You might also consider migrating to <a href=\"https://activemq.apache.org/components/artemis/\" rel=\"nofollow noreferrer\">ActiveMQ Artemis</a> (i.e. the next-generation broker from ActiveMQ) which also <a href=\"https://activemq.apache.org/components/artemis/documentation/latest/configuring-transports.html#configuring-netty-http\" rel=\"nofollow noreferrer\">supports HTTP</a>."},{"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"score":0,"creation_date":1695996320,"post_id":77179751,"comment_id":136101271,"body_markdown":"@JustinBertram is there any other option or workaround, as ActiveMQ is common between many services so an upgrade is not feasible as of now. Can you give more details or reason of this issue.","body":"@JustinBertram is there any other option or workaround, as ActiveMQ is common between many services so an upgrade is not feasible as of now. Can you give more details or reason of this issue."}],"owner":{"account_id":10883371,"reputation":57,"user_id":8001604,"accept_rate":0,"display_name":"Prabhjot Sokhi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695799732,"creation_date":1695728991,"question_id":77179751,"body_markdown":"The application uses pooled JMS connection. On startup the application is working fine, but after a couple of days it is not able to send messages to ActiveMQ &quot;Classic.&quot; As soon as the application is restarted it connects again and works fine for the next couple of days.\r\n\r\nBelow is the error message:\r\nThe initial error is:\r\n```\r\n2023-09-18 00:03:15,051 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 78\r\norg.springframework.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper; nested exception is javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:274) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\r\n\tat com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\r\n\tat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\r\n\tat java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\r\nCaused by: javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:646) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: java.lang.ClassNotFoundException: com.thoughtworks.xstream.mapper.EnumMapper\r\n\tat com.thoughtworks.xstream.core.util.CompositeClassLoader.loadClass(CompositeClassLoader.java:148) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat java.lang.Class.forName0(Native Method) ~[?:1.8.0_222]\r\n\tat java.lang.Class.forName(Class.java:348) ~[?:1.8.0_222]\r\n\tat com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:642) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\r\n\tat org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\n```\r\n\r\nAfter the below error is coming continuously until the application has not restarted.\r\n\r\n```\r\n2023-09-18 00:03:16,363 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 94\r\norg.springframework.jms.UncategorizedJmsException: Uncategorized exception occurred during JMS processing; nested exception is javax.jms.JMSException: Error while attempting to add new Connection to the pool; nested exception is javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n\tat org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:311) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\r\n\tat com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\r\n\tat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\r\n\tat java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\r\nCaused by: javax.jms.JMSException: Error while attempting to add new Connection to the pool\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createJmsException(PooledConnectionFactory.java:279) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:230) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n\tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:36) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:374) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\nCaused by: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading(WebappClassLoaderBase.java:1427) ~[?:?]\r\n\tat org.apache.catalina.loader.WebappClassLoaderBase.getResourceAsStream(WebappClassLoaderBase.java:1135) ~[?:?]\r\n\tat org.apache.http.util.VersionInfo.loadVersionInfo(VersionInfo.java:233) ~[httpcore-4.4.13.jar:4.4.13]\r\n\tat org.apache.http.util.VersionInfo.getUserAgent(VersionInfo.java:319) ~[httpcore-4.4.13.jar:4.4.13]\r\n\tat org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:1057) ~[httpclient-4.5.12.jar:4.5.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.createHttpClient(HttpClientTransport.java:347) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.getReceiveHttpClient(HttpClientTransport.java:233) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.http.HttpClientTransport.doStart(HttpClientTransport.java:250) ~[activemq-http-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:354) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\r\n\tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\r\n\t... 11 more\r\n```\r\n\r\nBelow is code for configuring the client application:\r\n```java\r\npublic class ActiveMQConfig {\r\n\r\n\tprivate static final Logger logger = LoggerFactory.getLogger(ActiveMQConfig.class);\r\n\r\n\t// Active Mq properties\r\n\r\n\t@Value(&quot;${activeMQ.broker.url}&quot;)\r\n\tprivate String brokerUrl;\r\n\r\n\t@Value(&quot;${jms.listener.concurrency}&quot;)\r\n\tprivate String concurrency;\r\n\t\r\n\t// The duration between attempts to redliver a message\r\n\t@Value(&quot;${jms.rollback.redelivery.delay:10000}&quot;)\r\n\tprivate int redeliveryDelay;\r\n\r\n\t// Maximum number of times a redlivery of a message will be attempted -1 is infinite\r\n\t@Value(&quot;${jms.rollback.maximum.redeliveries:-1}&quot;)\r\n\tprivate String maximumRedelivery;\r\n\r\n\t@Value(&quot;${message.activeMQ.pool.max.connections:10}&quot;)\r\n\tprivate int activeMqPoolMaxConnections;\r\n\r\n\t@Bean\r\n\tpublic JmsListenerContainerFactory jmsListenerContainerFactory(\r\n\t\t\t@Qualifier(&quot;jmsConnectionFactoryActiveMQ&quot;) ConnectionFactory connectionFactory,\r\n\t\t\tDefaultJmsListenerContainerFactoryConfigurer configurer) {\r\n\t\tDefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\r\n\t\tfactory.setConcurrency(concurrency);\r\n\t\tfactory.setSessionTransacted(true);\r\n\t\tfactory.setAutoStartup(false);\r\n\t\tfactory.setErrorHandler(errorHandler -&gt; logger.error(&quot;An error has occurred in the transaction: {}&quot;,\r\n\t\t\t\terrorHandler.getMessage()));\r\n\t\tconfigurer.configure(factory, connectionFactory);\r\n\t\treturn factory;\r\n\t}\r\n\r\n\t@Bean\r\n\t@Primary\r\n\tpublic ActiveMQConnectionFactory jmsConnectionFactoryActiveMQ() {\r\n\t\tActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory();\r\n\t\tconnectionFactory.setTrustAllPackages(true);\r\n\t\t\r\n\t\t// create re-delivery policy to configure re-attempt count and delay\r\n\t\t// when message is rolled back on queue in case of any exception\r\n\t\tRedeliveryPolicy redeliveryPolicy = new RedeliveryPolicy();\r\n\t\tredeliveryPolicy.setMaximumRedeliveries(Integer.parseInt(maximumRedelivery));\r\n\t\tredeliveryPolicy.setRedeliveryDelay(redeliveryDelay);\r\n\t\t\r\n\t\tconnectionFactory.setRedeliveryPolicy(redeliveryPolicy);\r\n\t\tconnectionFactory.setBrokerURL(brokerUrl);\r\n\r\n\t\treturn connectionFactory;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic JmsTemplate jmsTemplateActiveMQ(PooledConnectionFactory pooledConnectionFactory) {\r\n\t\tJmsTemplate jmsTemplate = new JmsTemplate();\r\n\t\tjmsTemplate.setPubSubDomain(false);\r\n\t\tjmsTemplate.setConnectionFactory(pooledConnectionFactory);\r\n\t\treturn jmsTemplate;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PooledConnectionFactory pooledConnectionFactory(ActiveMQConnectionFactory connectionFactory) {\r\n\t\tPooledConnectionFactory pooledConnectionFactory = new PooledConnectionFactory();\r\n\t\tpooledConnectionFactory.setConnectionFactory(connectionFactory);\r\n\t\tpooledConnectionFactory.setMaxConnections(activeMqPoolMaxConnections);\r\n\t\treturn pooledConnectionFactory;\r\n\r\n\t}\r\n\r\n}\r\n```\r\nNote: \r\n\r\n - activeMqPoolMaxConnections is 10.   \r\n - Message inflow is not too high. It&#39;s like 400-500 messages.\r\n - We are also using `JMSXGroupID` to group messages (`message.setStringProperty(&quot;JMSXGroupID&quot;, groupId);`)\r\n - ActiveMQ connection url is `activeMQ.broker.url=https://dummy.dns.name.com/destination-name?useInactivityMonitor=false`","title":"Intermittently application is not able to send message on ActiceMQ &quot;Classic&quot; due to javax.jms.JMSException: Could not connect to broker URL","body":"<p>The application uses pooled JMS connection. On startup the application is working fine, but after a couple of days it is not able to send messages to ActiveMQ &quot;Classic.&quot; As soon as the application is restarted it connects again and works fine for the next couple of days.</p>\n<p>Below is the error message:\nThe initial error is:</p>\n<pre><code>2023-09-18 00:03:15,051 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 78\norg.springframework.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper; nested exception is javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\n    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:274) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\n    at com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\n    at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\nCaused by: javax.jms.IllegalStateException: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\n    at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:162) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: com.thoughtworks.xstream.InitializationException: Could not instantiate mapper : com.thoughtworks.xstream.mapper.EnumMapper\n    at com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:646) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: java.lang.ClassNotFoundException: com.thoughtworks.xstream.mapper.EnumMapper\n    at com.thoughtworks.xstream.core.util.CompositeClassLoader.loadClass(CompositeClassLoader.java:148) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at java.lang.Class.forName0(Native Method) ~[?:1.8.0_222]\n    at java.lang.Class.forName(Class.java:348) ~[?:1.8.0_222]\n    at com.thoughtworks.xstream.XStream.buildMapperDynamically(XStream.java:642) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.buildMapper(XStream.java:616) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:587) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:515) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:484) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:430) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at com.thoughtworks.xstream.XStream.&lt;init&gt;(XStream.java:369) ~[xstream-1.4.11.1.jar:1.4.11.1]\n    at org.apache.activemq.transport.stomp.XStreamSupport.createXStream(XStreamSupport.java:31) ~[activemq-stomp-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.createXStream(XStreamWireFormat.java:127) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.getXStream(XStreamWireFormat.java:113) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.xstream.XStreamWireFormat.marshalText(XStreamWireFormat.java:89) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.oneway(HttpClientTransport.java:106) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:68) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:86) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1392) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.ensureConnectionInfoSent(ActiveMQConnection.java:1486) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnection.createSession(ActiveMQConnection.java:329) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool.makeSession(ConnectionPool.java:112) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:82) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.ConnectionPool$1.makeObject(ConnectionPool.java:78) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:342) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.borrowObject(GenericKeyedObjectPool.java:265) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.ConnectionPool.createSession(ConnectionPool.java:144) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnection.createSession(PooledConnection.java:167) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createSession(JmsAccessor.java:208) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:495) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\n</code></pre>\n<p>After the below error is coming continuously until the application has not restarted.</p>\n<pre><code>2023-09-18 00:03:16,363 ERROR c.n.v.r.i.l.BulkMessageStorageQueueListener [pool-7-thread-1] Exception in sending messages, rollbacking messages with size: 94\norg.springframework.jms.UncategorizedJmsException: Uncategorized exception occurred during JMS processing; nested exception is javax.jms.JMSException: Error while attempting to add new Connection to the pool; nested exception is javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:311) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:691) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at com.project.xxx.BulkMessageSender.sendStatusMessage(BulkMessageSender.java:71) ~[classes/:04.17.02.35]\n    at com.project.xxx.BulkMessageStorageQueueListener.lambda$setupConsumer$0(BulkMessageStorageQueueListener.java:113) ~[classes/:04.17.02.35]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:?]\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) ~[?:1.8.0_222]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[?:?]\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[?:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_222]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:?]\n    at java.lang.Thread.run(Thread.java:748) ~[?:1.8.0_222]\nCaused by: javax.jms.JMSException: Error while attempting to add new Connection to the pool\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createJmsException(PooledConnectionFactory.java:279) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:230) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: javax.jms.JMSException: Could not connect to broker URL: https://hostName:443/destination-name?useInactivityMonitor=false. Reason: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n    at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:36) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:374) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\nCaused by: java.lang.IllegalStateException: Illegal access: this web application instance has been stopped already. Could not load [org/apache/http/client/version.properties]. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.\n    at org.apache.catalina.loader.WebappClassLoaderBase.checkStateForResourceLoading(WebappClassLoaderBase.java:1427) ~[?:?]\n    at org.apache.catalina.loader.WebappClassLoaderBase.getResourceAsStream(WebappClassLoaderBase.java:1135) ~[?:?]\n    at org.apache.http.util.VersionInfo.loadVersionInfo(VersionInfo.java:233) ~[httpcore-4.4.13.jar:4.4.13]\n    at org.apache.http.util.VersionInfo.getUserAgent(VersionInfo.java:319) ~[httpcore-4.4.13.jar:4.4.13]\n    at org.apache.http.impl.client.HttpClientBuilder.build(HttpClientBuilder.java:1057) ~[httpclient-4.5.12.jar:4.5.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.createHttpClient(HttpClientTransport.java:347) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.getReceiveHttpClient(HttpClientTransport.java:233) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.http.HttpClientTransport.doStart(HttpClientTransport.java:250) ~[activemq-http-5.15.12.jar:5.15.12]\n    at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:354) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) ~[activemq-client-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:288) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:97) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory$1.makeObject(PooledConnectionFactory.java:94) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.create(GenericKeyedObjectPool.java:1041) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.commons.pool2.impl.GenericKeyedObjectPool.addObject(GenericKeyedObjectPool.java:1238) ~[commons-pool2-2.7.0.jar:2.7.0]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:226) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.apache.activemq.jms.pool.PooledConnectionFactory.createConnection(PooledConnectionFactory.java:209) ~[activemq-jms-pool-5.15.12.jar:5.15.12]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.2.5.RELEASE.jar:5.2.5.RELEASE]\n    ... 11 more\n</code></pre>\n<p>Below is code for configuring the client application:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ActiveMQConfig {\n\n    private static final Logger logger = LoggerFactory.getLogger(ActiveMQConfig.class);\n\n    // Active Mq properties\n\n    @Value(&quot;${activeMQ.broker.url}&quot;)\n    private String brokerUrl;\n\n    @Value(&quot;${jms.listener.concurrency}&quot;)\n    private String concurrency;\n    \n    // The duration between attempts to redliver a message\n    @Value(&quot;${jms.rollback.redelivery.delay:10000}&quot;)\n    private int redeliveryDelay;\n\n    // Maximum number of times a redlivery of a message will be attempted -1 is infinite\n    @Value(&quot;${jms.rollback.maximum.redeliveries:-1}&quot;)\n    private String maximumRedelivery;\n\n    @Value(&quot;${message.activeMQ.pool.max.connections:10}&quot;)\n    private int activeMqPoolMaxConnections;\n\n    @Bean\n    public JmsListenerContainerFactory jmsListenerContainerFactory(\n            @Qualifier(&quot;jmsConnectionFactoryActiveMQ&quot;) ConnectionFactory connectionFactory,\n            DefaultJmsListenerContainerFactoryConfigurer configurer) {\n        DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\n        factory.setConcurrency(concurrency);\n        factory.setSessionTransacted(true);\n        factory.setAutoStartup(false);\n        factory.setErrorHandler(errorHandler -&gt; logger.error(&quot;An error has occurred in the transaction: {}&quot;,\n                errorHandler.getMessage()));\n        configurer.configure(factory, connectionFactory);\n        return factory;\n    }\n\n    @Bean\n    @Primary\n    public ActiveMQConnectionFactory jmsConnectionFactoryActiveMQ() {\n        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory();\n        connectionFactory.setTrustAllPackages(true);\n        \n        // create re-delivery policy to configure re-attempt count and delay\n        // when message is rolled back on queue in case of any exception\n        RedeliveryPolicy redeliveryPolicy = new RedeliveryPolicy();\n        redeliveryPolicy.setMaximumRedeliveries(Integer.parseInt(maximumRedelivery));\n        redeliveryPolicy.setRedeliveryDelay(redeliveryDelay);\n        \n        connectionFactory.setRedeliveryPolicy(redeliveryPolicy);\n        connectionFactory.setBrokerURL(brokerUrl);\n\n        return connectionFactory;\n    }\n\n    @Bean\n    public JmsTemplate jmsTemplateActiveMQ(PooledConnectionFactory pooledConnectionFactory) {\n        JmsTemplate jmsTemplate = new JmsTemplate();\n        jmsTemplate.setPubSubDomain(false);\n        jmsTemplate.setConnectionFactory(pooledConnectionFactory);\n        return jmsTemplate;\n    }\n\n    @Bean\n    public PooledConnectionFactory pooledConnectionFactory(ActiveMQConnectionFactory connectionFactory) {\n        PooledConnectionFactory pooledConnectionFactory = new PooledConnectionFactory();\n        pooledConnectionFactory.setConnectionFactory(connectionFactory);\n        pooledConnectionFactory.setMaxConnections(activeMqPoolMaxConnections);\n        return pooledConnectionFactory;\n\n    }\n\n}\n</code></pre>\n<p>Note:</p>\n<ul>\n<li>activeMqPoolMaxConnections is 10.</li>\n<li>Message inflow is not too high. It's like 400-500 messages.</li>\n<li>We are also using <code>JMSXGroupID</code> to group messages (<code>message.setStringProperty(&quot;JMSXGroupID&quot;, groupId);</code>)</li>\n<li>ActiveMQ connection url is <code>activeMQ.broker.url=https://dummy.dns.name.com/destination-name?useInactivityMonitor=false</code></li>\n</ul>\n"},{"tags":["java","compiler-errors","uncaught-exception","checked-exceptions"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1656140083,"post_id":72751842,"comment_id":128502964,"body_markdown":"Please note.  This intended to be a canonical Q&amp;A for this kind of question.  There are *many* (hundreds) of existing questions, but they either have &quot;too much code&quot; or the answers are too specific to the code.","body":"Please note.  This intended to be a canonical Q&amp;A for this kind of question.  There are <i>many</i> (hundreds) of existing questions, but they either have &quot;too much code&quot; or the answers are too specific to the code."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1695798890,"creation_date":1656139913,"answer_id":72751843,"question_id":72751842,"body_markdown":"First things first.  This a compilation error not a exception.  You should see it at compile time.  \r\n\r\n&lt;sup&gt;If you see it in a runtime exception message, that&#39;s probably because you are running some code with compilation errors in it.  Go back and fix the compilation errors.  Then find and set the setting in your IDE that prevents it generating &quot;.class&quot; files for source code with compilation errors.  (Save yourself future pain.)&lt;/sup&gt;\r\n\r\n-------------------\r\n\r\nThe short answer to the question is:\r\n\r\n - The error message is saying that the statement with this error is throwing (or propagating) a *checked exception*, and the exception (the `XXX`) is not being dealt with properly.\r\n\r\n - The solution is to deal with the exception by either:\r\n\r\n   - catching and handling it with a `try ... catch` statement, or\r\n   - declaring that the enclosing method or constructor `throws` it&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\n&lt;sup&gt;1 - There are some edge-cases where you can&#39;t do that.  Read the rest of the answer!&lt;/sup&gt;\r\n\r\n-----------------------\r\n\r\nChecked versus unchecked exceptions\r\n-----------------------------------\r\n\r\nIn Java, exceptions are represented by classes that descend from the `java.lang.Throwable` class.  Exceptions are divided into two categories:\r\n\r\n  - *Checked exceptions* are `Throwable`, and `Exception` and its subclasses, apart from `RuntimeException` and its subclasses.\r\n  - *Unchecked exceptions* are all other exceptions; i.e. `Error` and its subclasses, and `RuntimeException` and its subclasses.\r\n\r\n(In the above, &quot;subclasses&quot; includes by direct and indirect subclasses.)\r\n\r\nThe distinction between checked and unchecked exceptions is that checked exceptions *must* be &quot;dealt with&quot; within the enclosing method or constructor that they occur, but unchecked exceptions need not be dealt with.\r\n\r\n(Q: How do you know if an exception is checked or not?  A: Find the javadoc for the exception&#39;s class, and look at its parent classes.)\r\n\r\nHow do you deal with a (checked) exception\r\n---------------------------------\r\n\r\nFrom the Java language perspective, there are two ways to deal with an exception that will &quot;satisfy&quot; the compiler:\r\n\r\n1.  You can catch the exception in a `try ... catch` statement.  For example:\r\n\r\n        public void doThings() {\r\n            try {\r\n                // do some things\r\n                if (someFlag) {\r\n                    throw new IOException(&quot;cannot read something&quot;);\r\n                }\r\n                // do more things\r\n            } catch (IOException ex) {\r\n                // deal with it    &lt;&lt;&lt;=== HERE\r\n            }\r\n        }\r\n\r\n    In the above, we put the statement that throws the (checked) `IOException` in the body of the `try`.  Then we wrote a `catch` clause to catch the exception.   (We could catch a superclass of `IOException` ... but in this case that would be `Exception` and catching `Exception` is a bad idea.)\r\n\r\n2.  You can declare that the enclosing method or constructor `throws` the exception\r\n\r\n        public void doThings() throws IOException {\r\n            // do some things\r\n            if (someFlag) {\r\n                throw new IOException(&quot;cannot read something&quot;);\r\n            }\r\n            // do more things\r\n        }  \r\n\r\n    In the above we have declared that `doThings()` throws `IOException`.  That means that any code that calls the `doThings()` method has to deal with the exception.  In short, we are passing the problem of dealing with the exception to the caller.\r\n\r\nWhich of these things is the correct thing to do?\r\n\r\nIt depends on the context.  However, a general principle is that you should deal with exceptions at a level in the code where you are able to deal with them appropriately.   And that in turn depends on what the exception handling code is going to do (at `HERE`).  Can it recover?  Can it abandon the current request?  Should it halt the application?\r\n\r\nSolving the problem\r\n-------------------\r\n\r\nTo recap.  The compilation error means that:\r\n\r\n  - your code has thrown a checked exception, or called some method or constructor that throws the checked exception, and\r\n  - it has not *dealt with* the exception by catching it or by declaring it as required by the Java language.\r\n\r\nYour solution process should be:\r\n\r\n  1.  Understand what the exception means, and why it *could* be thrown.  Read the javadoc for the exception and the method that throws the exception.\r\n  2.  Based on 1, read *your* code and decide on the correct way to deal with the possible exception.\r\n  3.  Based on 2, make the relevant changes to your code.\r\n\r\nExample: throwing and catching in the same method\r\n-----------------------------------\r\n\r\nConsider the following example from [this Q&amp;A](https://stackoverflow.com/questions/67867013)\r\n\r\n    public class Main {\r\n        static void t() throws IllegalAccessException {\r\n            try {\r\n               throw new IllegalAccessException(&quot;demo&quot;);\r\n            } catch (IllegalAccessException e){\r\n                System.out.println(e);\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args){\r\n            t();\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n    }\r\n\r\nIf you have been following what we have said so far, you will realise that the `t()` will give the &quot;unreported exception&quot; compilation error.  In this case, the mistake is that `t` has been declared as `throws IllegalAccessException`.  In fact the exception does not propagate, because it has been caught within the method that threw it.  \r\n\r\nThe fix in this example will be to *remove* the `throws IllegalAccessException`.\r\n\r\nThe mini-lesson here is that `throws IllegalAccessException` is the method saying that the caller should *expect* the exception to propagate.  It doesn&#39;t actually mean that it will propagate.  And the flip-side is that if you *don&#39;t* expect the exception to propagate (e.g. because it wasn&#39;t thrown, or because it was caught and not rethrown) then the method&#39;s signature shouldn&#39;t say it is thrown! \r\n\r\n\r\nBad practice with exceptions\r\n----------------------------\r\n\r\nThere are a couple of things that you should avoid doing:\r\n\r\n  - Don&#39;t catch `Exception` (or `Throwable`) as a short cut for catching a list of exceptions.  If you do that, you are liable catch things that you don&#39;t expect (like an *unchecked* `NullPointerException`) and then attempt to recover when you shouldn&#39;t.\r\n  - Don&#39;t declare a method as `throws Exception`.  That forces the called to deal with (potentially) any checked exception ... which is a nightmare.\r\n  - Don&#39;t squash exceptions.  For example\r\n\r\n        try { \r\n            ...\r\n        } catch (NullPointerException ex) {\r\n            // It never happens ... ignoring this\r\n        }\r\n    \r\n    If you squash exceptions, you are liable to make the runtime errors that triggered them much harder to diagnose.  You are destroying the evidence.  \r\n\r\n    Note: just *believing* that the exception never happens (per the comment) doesn&#39;t necessarily make it a fact.\r\n\r\nEdge case: static initializers\r\n-----------------------------------\r\n\r\nThere some situations where dealing with checked exceptions is a problem.  One particular case is checked exceptions in `static` initializers.  For example:\r\n\r\n    private static final FileInputStream input = new FileInputStream(&quot;foo.txt&quot;);\r\n\r\nThe `FileInputStream` is declared as `throws FileNotFoundException` ... which is a checked exception.  But since the above is a field declaration, the syntax of the Java language, won&#39;t let us put the declaration inside a `try` ... `catch`.  And there is no appropriate (enclosing) method or constructor ... because this code is run when the *class* is initialized.\r\n\r\nOne solution is to use a `static` block; for example:\r\n\r\n    private static final FileInputStream input;\r\n\r\n    static {\r\n       FileInputStream temp = null;\r\n       try {\r\n           temp = new FileInputStream(&quot;foo.txt&quot;);\r\n       } catch (FileNotFoundException ex) {\r\n           // log the error rather than squashing it\r\n       }\r\n       input = temp;   // Note that we need a single point of assignment to &#39;input&#39;\r\n    }\r\n\r\n&lt;sup&gt;(There are better ways to handle the above scenario in practical code, but that&#39;s not the point of this example.)&lt;/sup&gt;\r\n\r\nEdge case: static blocks\r\n-----------------------------\r\n\r\nAs noted above, you can catch exceptions in static blocks.  But what we didn&#39;t mention is that you *must* catch checked exceptions *within* the block.  There is no enclosing context for a static block where checked exceptions could be caught.\r\n\r\nEdge case: lambdas\r\n------------------\r\n\r\nA lambda expression (typically) should not throw an unchecked exception.  This is not a restriction on lambdas *per se*.  Rather it is a consequence of the function interface that is used for the argument where you are supplying the argument.  Unless the function declares a checked exception, the lambda cannot throw one.   For example:\r\n\r\n    List&lt;Path&gt; paths = ...\r\n    try {\r\n        paths.forEach(p -&gt; Files.delete(p));\r\n    } catch (IOException ex) {\r\n        // log it ...\r\n    }\r\n\r\nEven though we appear to have caught `IOException`, the compiler will complain that:\r\n\r\n  - there is an uncaught exception in the lambda, AND\r\n  - the `catch` is catching an exception that is never thrown!\r\n\r\nIn fact, the exception needs to be caught in the lambda itself:\r\n\r\n    List&lt;Path&gt; paths = ...\r\n    paths.forEach(p -&gt; {\r\n                          try {\r\n                              Files.delete(p);\r\n                          } catch (IOException ex) {\r\n                              // log it ...\r\n                          }\r\n                       }\r\n                 );\r\n\r\n&lt;sup&gt;(The astute reader will notice that the two versions behave differently in the case that a `delete` throws an exception ...)&lt;/sup&gt;\r\n\r\nEdge case: two exceptions called Xyzzy\r\n--------------------------------------\r\n\r\nI have seen cases where a method has a `throws Xyzzy` clause, and the compiler *still complains* that `Xyzzy` must be &quot;caught or declared to be thrown&quot;.  For example: https://stackoverflow.com/questions/27100099.  \r\n\r\nIf you find yourself in this situation, look carefully at the fully qualified names of the exceptions. If the fully qualified names are different, then the exceptions are different.  (Believe what the compiler is saying and try to understand it.)\r\n\r\nMore Information\r\n----------------\r\n\r\nThe Oracle Java Tutorial:\r\n - [The catch or specify requirement](https://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)\r\n   ... also covers checked vs unchecked exceptions.\r\n - [Catching and handling exceptions](https://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html)\r\n - [Specifying the exceptions thrown by a method](https://docs.oracle.com/javase/tutorial/essential/exceptions/declaring.html)\r\n\r\n","title":"What does &quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; mean and how do I fix it?","body":"<p>First things first.  This a compilation error not a exception.  You should see it at compile time.</p>\n<p><sup>If you see it in a runtime exception message, that's probably because you are running some code with compilation errors in it.  Go back and fix the compilation errors.  Then find and set the setting in your IDE that prevents it generating &quot;.class&quot; files for source code with compilation errors.  (Save yourself future pain.)</sup></p>\n<hr />\n<p>The short answer to the question is:</p>\n<ul>\n<li><p>The error message is saying that the statement with this error is throwing (or propagating) a <em>checked exception</em>, and the exception (the <code>XXX</code>) is not being dealt with properly.</p>\n</li>\n<li><p>The solution is to deal with the exception by either:</p>\n<ul>\n<li>catching and handling it with a <code>try ... catch</code> statement, or</li>\n<li>declaring that the enclosing method or constructor <code>throws</code> it<sup>1</sup>.</li>\n</ul>\n</li>\n</ul>\n<p><sup>1 - There are some edge-cases where you can't do that.  Read the rest of the answer!</sup></p>\n<hr />\n<h2>Checked versus unchecked exceptions</h2>\n<p>In Java, exceptions are represented by classes that descend from the <code>java.lang.Throwable</code> class.  Exceptions are divided into two categories:</p>\n<ul>\n<li><em>Checked exceptions</em> are <code>Throwable</code>, and <code>Exception</code> and its subclasses, apart from <code>RuntimeException</code> and its subclasses.</li>\n<li><em>Unchecked exceptions</em> are all other exceptions; i.e. <code>Error</code> and its subclasses, and <code>RuntimeException</code> and its subclasses.</li>\n</ul>\n<p>(In the above, &quot;subclasses&quot; includes by direct and indirect subclasses.)</p>\n<p>The distinction between checked and unchecked exceptions is that checked exceptions <em>must</em> be &quot;dealt with&quot; within the enclosing method or constructor that they occur, but unchecked exceptions need not be dealt with.</p>\n<p>(Q: How do you know if an exception is checked or not?  A: Find the javadoc for the exception's class, and look at its parent classes.)</p>\n<h2>How do you deal with a (checked) exception</h2>\n<p>From the Java language perspective, there are two ways to deal with an exception that will &quot;satisfy&quot; the compiler:</p>\n<ol>\n<li><p>You can catch the exception in a <code>try ... catch</code> statement.  For example:</p>\n<pre><code>public void doThings() {\n    try {\n        // do some things\n        if (someFlag) {\n            throw new IOException(&quot;cannot read something&quot;);\n        }\n        // do more things\n    } catch (IOException ex) {\n        // deal with it    &lt;&lt;&lt;=== HERE\n    }\n}\n</code></pre>\n<p>In the above, we put the statement that throws the (checked) <code>IOException</code> in the body of the <code>try</code>.  Then we wrote a <code>catch</code> clause to catch the exception.   (We could catch a superclass of <code>IOException</code> ... but in this case that would be <code>Exception</code> and catching <code>Exception</code> is a bad idea.)</p>\n</li>\n<li><p>You can declare that the enclosing method or constructor <code>throws</code> the exception</p>\n<pre><code>public void doThings() throws IOException {\n    // do some things\n    if (someFlag) {\n        throw new IOException(&quot;cannot read something&quot;);\n    }\n    // do more things\n}  \n</code></pre>\n<p>In the above we have declared that <code>doThings()</code> throws <code>IOException</code>.  That means that any code that calls the <code>doThings()</code> method has to deal with the exception.  In short, we are passing the problem of dealing with the exception to the caller.</p>\n</li>\n</ol>\n<p>Which of these things is the correct thing to do?</p>\n<p>It depends on the context.  However, a general principle is that you should deal with exceptions at a level in the code where you are able to deal with them appropriately.   And that in turn depends on what the exception handling code is going to do (at <code>HERE</code>).  Can it recover?  Can it abandon the current request?  Should it halt the application?</p>\n<h2>Solving the problem</h2>\n<p>To recap.  The compilation error means that:</p>\n<ul>\n<li>your code has thrown a checked exception, or called some method or constructor that throws the checked exception, and</li>\n<li>it has not <em>dealt with</em> the exception by catching it or by declaring it as required by the Java language.</li>\n</ul>\n<p>Your solution process should be:</p>\n<ol>\n<li>Understand what the exception means, and why it <em>could</em> be thrown.  Read the javadoc for the exception and the method that throws the exception.</li>\n<li>Based on 1, read <em>your</em> code and decide on the correct way to deal with the possible exception.</li>\n<li>Based on 2, make the relevant changes to your code.</li>\n</ol>\n<h2>Example: throwing and catching in the same method</h2>\n<p>Consider the following example from <a href=\"https://stackoverflow.com/questions/67867013\">this Q&amp;A</a></p>\n<pre><code>public class Main {\n    static void t() throws IllegalAccessException {\n        try {\n           throw new IllegalAccessException(&quot;demo&quot;);\n        } catch (IllegalAccessException e){\n            System.out.println(e);\n        }\n    }\n\n    public static void main(String[] args){\n        t();\n        System.out.println(&quot;hello&quot;);\n    }\n}\n</code></pre>\n<p>If you have been following what we have said so far, you will realise that the <code>t()</code> will give the &quot;unreported exception&quot; compilation error.  In this case, the mistake is that <code>t</code> has been declared as <code>throws IllegalAccessException</code>.  In fact the exception does not propagate, because it has been caught within the method that threw it.</p>\n<p>The fix in this example will be to <em>remove</em> the <code>throws IllegalAccessException</code>.</p>\n<p>The mini-lesson here is that <code>throws IllegalAccessException</code> is the method saying that the caller should <em>expect</em> the exception to propagate.  It doesn't actually mean that it will propagate.  And the flip-side is that if you <em>don't</em> expect the exception to propagate (e.g. because it wasn't thrown, or because it was caught and not rethrown) then the method's signature shouldn't say it is thrown!</p>\n<h2>Bad practice with exceptions</h2>\n<p>There are a couple of things that you should avoid doing:</p>\n<ul>\n<li><p>Don't catch <code>Exception</code> (or <code>Throwable</code>) as a short cut for catching a list of exceptions.  If you do that, you are liable catch things that you don't expect (like an <em>unchecked</em> <code>NullPointerException</code>) and then attempt to recover when you shouldn't.</p>\n</li>\n<li><p>Don't declare a method as <code>throws Exception</code>.  That forces the called to deal with (potentially) any checked exception ... which is a nightmare.</p>\n</li>\n<li><p>Don't squash exceptions.  For example</p>\n<pre><code>try { \n    ...\n} catch (NullPointerException ex) {\n    // It never happens ... ignoring this\n}\n</code></pre>\n<p>If you squash exceptions, you are liable to make the runtime errors that triggered them much harder to diagnose.  You are destroying the evidence.</p>\n<p>Note: just <em>believing</em> that the exception never happens (per the comment) doesn't necessarily make it a fact.</p>\n</li>\n</ul>\n<h2>Edge case: static initializers</h2>\n<p>There some situations where dealing with checked exceptions is a problem.  One particular case is checked exceptions in <code>static</code> initializers.  For example:</p>\n<pre><code>private static final FileInputStream input = new FileInputStream(&quot;foo.txt&quot;);\n</code></pre>\n<p>The <code>FileInputStream</code> is declared as <code>throws FileNotFoundException</code> ... which is a checked exception.  But since the above is a field declaration, the syntax of the Java language, won't let us put the declaration inside a <code>try</code> ... <code>catch</code>.  And there is no appropriate (enclosing) method or constructor ... because this code is run when the <em>class</em> is initialized.</p>\n<p>One solution is to use a <code>static</code> block; for example:</p>\n<pre><code>private static final FileInputStream input;\n\nstatic {\n   FileInputStream temp = null;\n   try {\n       temp = new FileInputStream(&quot;foo.txt&quot;);\n   } catch (FileNotFoundException ex) {\n       // log the error rather than squashing it\n   }\n   input = temp;   // Note that we need a single point of assignment to 'input'\n}\n</code></pre>\n<p><sup>(There are better ways to handle the above scenario in practical code, but that's not the point of this example.)</sup></p>\n<h2>Edge case: static blocks</h2>\n<p>As noted above, you can catch exceptions in static blocks.  But what we didn't mention is that you <em>must</em> catch checked exceptions <em>within</em> the block.  There is no enclosing context for a static block where checked exceptions could be caught.</p>\n<h2>Edge case: lambdas</h2>\n<p>A lambda expression (typically) should not throw an unchecked exception.  This is not a restriction on lambdas <em>per se</em>.  Rather it is a consequence of the function interface that is used for the argument where you are supplying the argument.  Unless the function declares a checked exception, the lambda cannot throw one.   For example:</p>\n<pre><code>List&lt;Path&gt; paths = ...\ntry {\n    paths.forEach(p -&gt; Files.delete(p));\n} catch (IOException ex) {\n    // log it ...\n}\n</code></pre>\n<p>Even though we appear to have caught <code>IOException</code>, the compiler will complain that:</p>\n<ul>\n<li>there is an uncaught exception in the lambda, AND</li>\n<li>the <code>catch</code> is catching an exception that is never thrown!</li>\n</ul>\n<p>In fact, the exception needs to be caught in the lambda itself:</p>\n<pre><code>List&lt;Path&gt; paths = ...\npaths.forEach(p -&gt; {\n                      try {\n                          Files.delete(p);\n                      } catch (IOException ex) {\n                          // log it ...\n                      }\n                   }\n             );\n</code></pre>\n<p><sup>(The astute reader will notice that the two versions behave differently in the case that a <code>delete</code> throws an exception ...)</sup></p>\n<h2>Edge case: two exceptions called Xyzzy</h2>\n<p>I have seen cases where a method has a <code>throws Xyzzy</code> clause, and the compiler <em>still complains</em> that <code>Xyzzy</code> must be &quot;caught or declared to be thrown&quot;.  For example: <a href=\"https://stackoverflow.com/questions/27100099\">Unreported exception ...... must be caught or declared to be thrown; despite *thrown* keyword</a>.</p>\n<p>If you find yourself in this situation, look carefully at the fully qualified names of the exceptions. If the fully qualified names are different, then the exceptions are different.  (Believe what the compiler is saying and try to understand it.)</p>\n<h2>More Information</h2>\n<p>The Oracle Java Tutorial:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html\" rel=\"nofollow noreferrer\">The catch or specify requirement</a>\n... also covers checked vs unchecked exceptions.</li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html\" rel=\"nofollow noreferrer\">Catching and handling exceptions</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/declaring.html\" rel=\"nofollow noreferrer\">Specifying the exceptions thrown by a method</a></li>\n</ul>\n"}],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2932,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":1,"score":5,"last_activity_date":1695798890,"creation_date":1656139913,"question_id":72751842,"body_markdown":"New Java programmers frequently encounter errors phrased like this:\r\n\r\n    &quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; \r\n\r\nwhere XXX is the name of some exception class.\r\n\r\nPlease explain:\r\n\r\n  - What the compilation error message is saying,\r\n  - the Java concepts behind this error, and \r\n  - how to fix it.","title":"What does &quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; mean and how do I fix it?","body":"<p>New Java programmers frequently encounter errors phrased like this:</p>\n<pre><code>&quot;error: unreported exception &lt;XXX&gt;; must be caught or declared to be thrown&quot; \n</code></pre>\n<p>where XXX is the name of some exception class.</p>\n<p>Please explain:</p>\n<ul>\n<li>What the compilation error message is saying,</li>\n<li>the Java concepts behind this error, and</li>\n<li>how to fix it.</li>\n</ul>\n"},{"tags":["java","selenium-webdriver","slf4j"],"comments":[{"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"score":0,"creation_date":1695802925,"post_id":77185310,"comment_id":136071499,"body_markdown":"There is no solution for this, coz many of the inbuilt selenium defined methods are only support to the 3.14 only, So I advocate you that again you have to switch back the 4.12 to 3.14. else if you want to continue with 4.12, build your code from scratch.","body":"There is no solution for this, coz many of the inbuilt selenium defined methods are only support to the 3.14 only, So I advocate you that again you have to switch back the 4.12 to 3.14. else if you want to continue with 4.12, build your code from scratch."}],"owner":{"account_id":29376912,"reputation":1,"user_id":22508250,"display_name":"Revathi Kamaraj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695798667,"creation_date":1695798667,"question_id":77185310,"body_markdown":"I changed my scripts for the issue of HasInputDevice interface methods\r\nBecause of chromedriver 117, my scripts are not running.\r\nI changed my selenium version 3.141.59 to 4.12.0 to solve this issue\r\nBut now, HasInputDevice interface method issues are coming.\r\nI don&#39;t know, how to solve this\r\nplease help\r\nAnd some places showing compatibility error\r\nI used the pom.xml:\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;AIM&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Aim&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;Aim&lt;/name&gt;\r\n    &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;java.version&gt;12&lt;/java.version&gt;\r\n\t&lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\r\n\t&lt;cucumber.version&gt;6.9.0&lt;/cucumber.version&gt;\r\n\t&lt;serenity.version&gt;2.4.48&lt;/serenity.version&gt;\r\n\t&lt;serenity.cucumber.version&gt;2.4.48&lt;/serenity.cucumber.version&gt;\r\n\t&lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\r\n\t&lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;!-- Dependencies and other sections here --&gt;\r\n    &lt;dependencies&gt;\r\n       &lt;dependency&gt;\r\n\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n\t&lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n\t&lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n\tscope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t&lt;version&gt;${junit.version}&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.12.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.5.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;tech.grasshopper&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;extentreports-cucumber6-adapter&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.8.1&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.1.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t&lt;version&gt;4.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\t\r\n```\r\nI tried to use selenium 4.12.0. After that my scripts are launching the chrome itself.\r\nConsole error:\r\n```\r\n[INFO] -------------------------------------------------------\r\n12:03:55.789 [main] INFO  i.c.core.plugin.SerenityReporter - Running feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature\r\n12:03:55.794 [main] WARN  i.c.core.plugin.SerenityReporter - Feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature is not under the &#39;features&#39; directory. Requirements report will not be correctly generated!\r\ntestrunner.MyTestRunnerDirect_DealerAndIndirectcom.google.inject.ProvisionException: \r\nUnable to provision, see the following errors:\r\n1) [Guice/ErrorInjectingConstructor]: NoClassDefFoundError: \r\norg/openqa/selenium/interactions/HasInputDevices\r\n  at WebdriverCloseBrowser.&lt;init&gt;(WebdriverCloseBrowser.java:22)\r\n  while locating WebdriverCloseBrowser\r\n  at WebDriverModule.configure(WebDriverModule.java:20)\r\n  while locating CloseBrowser\r\nLearn more:\r\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\r\n1 error\r\n======================\r\nFull classname legend:\r\n======================\r\nCloseBrowser:          &quot;net.thucydides.core.webdriver.CloseBrowser&quot;\r\nWebDriverModule:       &quot;net.thucydides.core.guice.webdriver.WebDriverModule&quot;\r\nWebdriverCloseBrowser: &quot;net.thucydides.core.webdriver.WebdriverCloseBrowser&quot;\r\n========================\r\nEnd of classname legend:\r\n========================\r\n[INFO] Running Direct-Ordering and delivery\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Ordering and delivery\r\n[INFO] Running Direct-Stock Booking and Report Generation\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Stock Booking and Report Generation\r\n[INFO] Running dealer indirect Scenario verification #3\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in dealer indirect Scenario verification #3\r\n[INFO] Running Direct-Configuration and Assortment&amp;Inventory page validation\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Configuration and Assortment&amp;Inventory page validation\r\n[INFO] Running Drivus brand selection and validation\r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Drivus brand selection and validation\r\n[INFO] \r\n[INFO] Results:\r\n[INFO] \r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\r\n[INFO] \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n```","title":"Script not running in selenium 4.12.0 showing HasInputDevice error","body":"<p>I changed my scripts for the issue of HasInputDevice interface methods\nBecause of chromedriver 117, my scripts are not running.\nI changed my selenium version 3.141.59 to 4.12.0 to solve this issue\nBut now, HasInputDevice interface method issues are coming.\nI don't know, how to solve this\nplease help\nAnd some places showing compatibility error\nI used the pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;AIM&lt;/groupId&gt;\n    &lt;artifactId&gt;Aim&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Aim&lt;/name&gt;\n    &lt;!-- FIXME change it to the project's website --&gt;\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;12&lt;/java.version&gt;\n    &lt;junit.version&gt;4.13.2&lt;/junit.version&gt;\n    &lt;cucumber.version&gt;6.9.0&lt;/cucumber.version&gt;\n    &lt;serenity.version&gt;2.4.48&lt;/serenity.version&gt;\n    &lt;serenity.cucumber.version&gt;2.4.48&lt;/serenity.cucumber.version&gt;\n    &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\n    &lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;\n    &lt;/properties&gt;\n    &lt;!-- Dependencies and other sections here --&gt;\n    &lt;dependencies&gt;\n       &lt;dependency&gt;\n    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n    &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n    &lt;version&gt;${cucumber.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n    &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n    &lt;version&gt;${cucumber.version}&lt;/version&gt;\n    scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;junit&lt;/groupId&gt;\n    &lt;artifactId&gt;junit&lt;/artifactId&gt;\n    &lt;version&gt;${junit.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n    &lt;version&gt;5.5.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;tech.grasshopper&lt;/groupId&gt;\n    &lt;artifactId&gt;extentreports-cucumber6-adapter&lt;/artifactId&gt;\n    &lt;version&gt;2.8.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;  \n</code></pre>\n<p>I tried to use selenium 4.12.0. After that my scripts are launching the chrome itself.\nConsole error:</p>\n<pre><code>[INFO] -------------------------------------------------------\n12:03:55.789 [main] INFO  i.c.core.plugin.SerenityReporter - Running feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature\n12:03:55.794 [main] WARN  i.c.core.plugin.SerenityReporter - Feature from file:///D:/Git/AIMe2e/src/test/resources/DealerAndIndirectFeatures/DRE_DealerAndIndirect.feature is not under the 'features' directory. Requirements report will not be correctly generated!\ntestrunner.MyTestRunnerDirect_DealerAndIndirectcom.google.inject.ProvisionException: \nUnable to provision, see the following errors:\n1) [Guice/ErrorInjectingConstructor]: NoClassDefFoundError: \norg/openqa/selenium/interactions/HasInputDevices\n  at WebdriverCloseBrowser.&lt;init&gt;(WebdriverCloseBrowser.java:22)\n  while locating WebdriverCloseBrowser\n  at WebDriverModule.configure(WebDriverModule.java:20)\n  while locating CloseBrowser\nLearn more:\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\n1 error\n======================\nFull classname legend:\n======================\nCloseBrowser:          &quot;net.thucydides.core.webdriver.CloseBrowser&quot;\nWebDriverModule:       &quot;net.thucydides.core.guice.webdriver.WebDriverModule&quot;\nWebdriverCloseBrowser: &quot;net.thucydides.core.webdriver.WebdriverCloseBrowser&quot;\n========================\nEnd of classname legend:\n========================\n[INFO] Running Direct-Ordering and delivery\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Ordering and delivery\n[INFO] Running Direct-Stock Booking and Report Generation\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Stock Booking and Report Generation\n[INFO] Running dealer indirect Scenario verification #3\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in dealer indirect Scenario verification #3\n[INFO] Running Direct-Configuration and Assortment&amp;Inventory page validation\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Direct-Configuration and Assortment&amp;Inventory page validation\n[INFO] Running Drivus brand selection and validation\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in Drivus brand selection and validation\n[INFO] \n[INFO] Results:\n[INFO] \n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9847,"page":158,"page_size":100}
