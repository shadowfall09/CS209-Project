{"items":[{"tags":["java","spring","mongodb","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691958181,"post_id":76890676,"comment_id":135557679,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":29213347,"reputation":1,"user_id":22380801,"display_name":"Ananth Roy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691865893,"creation_date":1691865893,"question_id":76890676,"body_markdown":"I want to implement a api endpoint made with spring boot and mongoDB as database. it accepts name as a paramter and it should follow fuzzy search logic. Suppose we have a data in our database, flipkart should get searched when we search with a wrong spelling flipcart.\r\nFuzzy Search logic follows:\r\n1. All words from the search query should be available in the &quot;name&quot; attribute, in any order.\r\n2. The search should tolerate small spelling mistakes.\r\n\r\nOne more example \r\ndomino cheese pizza should get searched if I search for pizza domeno  \r\n\r\nI tried all the queries but I wasnt able to do it","title":"How to implement advance search functionalities in spring boot and mongoDb","body":"<p>I want to implement a api endpoint made with spring boot and mongoDB as database. it accepts name as a paramter and it should follow fuzzy search logic. Suppose we have a data in our database, flipkart should get searched when we search with a wrong spelling flipcart.\nFuzzy Search logic follows:</p>\n<ol>\n<li>All words from the search query should be available in the &quot;name&quot; attribute, in any order.</li>\n<li>The search should tolerate small spelling mistakes.</li>\n</ol>\n<p>One more example\ndomino cheese pizza should get searched if I search for pizza domeno</p>\n<p>I tried all the queries but I wasnt able to do it</p>\n"},{"tags":["java","libgdx","box2d"],"comments":[{"owner":{"account_id":21733129,"reputation":95,"user_id":16041552,"display_name":"Fullaccess "},"score":0,"creation_date":1691625041,"post_id":76862228,"comment_id":135518323,"body_markdown":"Could It be that the projecting is done twice? Stage.draw() calls batch.setProjectionMatrix(), and if that is set the batch automatically projects all coordinates.","body":"Could It be that the projecting is done twice? Stage.draw() calls batch.setProjectionMatrix(), and if that is set the batch automatically projects all coordinates."},{"owner":{"account_id":22723442,"reputation":119,"user_id":16887604,"display_name":"Adixe"},"score":0,"creation_date":1691667708,"post_id":76862228,"comment_id":135523966,"body_markdown":"I don&#39;t quite understand, could you please explain in more detail?","body":"I don&#39;t quite understand, could you please explain in more detail?"},{"owner":{"account_id":21733129,"reputation":95,"user_id":16041552,"display_name":"Fullaccess "},"score":0,"creation_date":1691693297,"post_id":76862228,"comment_id":135529665,"body_markdown":"SpriteBatch has a setProjectionMatrix() method that once called will allow the SpriteBatch to do the coordinate conversion by itself. So when drawing, you just pass the world coordinates and dont have to bother calling project(). Stage.draw() calls batch.setProjectionMatrix() right before it starts drawing. If you call project yourself, the coordinates will be projected twice. Try just passing the coordinate as they are.","body":"SpriteBatch has a setProjectionMatrix() method that once called will allow the SpriteBatch to do the coordinate conversion by itself. So when drawing, you just pass the world coordinates and dont have to bother calling project(). Stage.draw() calls batch.setProjectionMatrix() right before it starts drawing. If you call project yourself, the coordinates will be projected twice. Try just passing the coordinate as they are."}],"answers":[{"tags":[],"owner":{"account_id":233979,"reputation":851,"user_id":499837,"accept_rate":60,"display_name":"bornander"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691865642,"creation_date":1691865642,"answer_id":76890661,"question_id":76862228,"body_markdown":"In order to translate from `World`-coordinates to `Stage`-coordinates you need to first project the `World` position onto *screen-space*, and then unproject it back into *`Stage`-space*.\r\n\r\n    Vector2 worldPosition = body.getPosition();\r\n    Vector3 screenPosition = worldCamera.project(new Vector3(worldPosition.x, worldPosition.y, 1.0f));\r\n    Vector3 stagePosition = stage.getCamera().unproject(screenPosition);\r\n    \r\n    label.setPosition(stagePosition.x, stage.getHeight() - stagePosition.y)); // stage.getHeight() - because UP is flipped.\r\n\r\n\r\nThat process will allow you to track a **Box2D** `Body` and set a `Label`s position to match it:\r\n\r\n[![Label tracking Box2D body][1]][1]\r\n\r\nFull source for the example above is included below, it uses the default font from the **libGDX** tests ([font][2] and the [font image][3]).\r\n\r\n\tpackage com.bornander.sandbox;\r\n\t\r\n\timport com.badlogic.gdx.ApplicationAdapter;\r\n\timport com.badlogic.gdx.Gdx;\r\n\timport com.badlogic.gdx.graphics.Color;\r\n\timport com.badlogic.gdx.graphics.OrthographicCamera;\r\n\timport com.badlogic.gdx.graphics.g2d.BitmapFont;\r\n\timport com.badlogic.gdx.math.Vector2;\r\n\timport com.badlogic.gdx.math.Vector3;\r\n\timport com.badlogic.gdx.physics.box2d.*;\r\n\timport com.badlogic.gdx.scenes.scene2d.Stage;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Label;\r\n\timport com.badlogic.gdx.utils.ScreenUtils;\r\n\timport com.badlogic.gdx.utils.viewport.ScreenViewport;\r\n\t\r\n\tpublic class MyGdxSandbox extends ApplicationAdapter {\r\n\t\tWorld world;\r\n\t\tOrthographicCamera worldCamera;\r\n\t\tBox2DDebugRenderer box2DDebugRenderer;\r\n\t\r\n\t\tBody ballBody;\r\n\t\tStage stage;\r\n\t\tLabel label;\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic void create () {\r\n\t\t\tworld = new World(new Vector2(0.0f, -10.0f), false);\r\n\t\t\tfloat aspectRatio = (float)Gdx.graphics.getWidth() / Gdx.graphics.getHeight();\r\n\t\t\tfloat worldCameraViewportWidth = 100.0f;\r\n\t\t\tworldCamera = new OrthographicCamera(worldCameraViewportWidth, worldCameraViewportWidth / aspectRatio);\r\n\t\t\tworldCamera.position.set(worldCamera.viewportWidth / 2.0f, worldCamera.viewportHeight / 2.0f, 1.0f);\r\n\t\t\tbox2DDebugRenderer = new Box2DDebugRenderer();\r\n\t\r\n\t\t\tCircleShape ballShape = new CircleShape();\r\n\t\t\tballShape.setRadius(4.0f);\r\n\t\r\n\t\t\tFixtureDef ballFixtureDef = new FixtureDef();\r\n\t\t\tballFixtureDef.shape = ballShape;\r\n\t\t\tballFixtureDef.friction = 0.2f;\r\n\t\t\tballFixtureDef.density = 1.0f;\r\n\t\t\tballFixtureDef.restitution = 0.65f;\r\n\t\r\n\t\t\tBodyDef ballBodyDef = new BodyDef();\r\n\t\t\tballBodyDef.type = BodyDef.BodyType.DynamicBody;\r\n\t\r\n\t\t\tballBody = world.createBody(ballBodyDef);\r\n\t\t\tballBody.createFixture(ballFixtureDef);\r\n\t\t\tballBody.setTransform(25, 50, 0);\r\n\t\t\tballBody.applyLinearImpulse(200, 0, ballBody.getPosition().x, ballBody.getPosition().y, true);\r\n\t\r\n\t\t\tPolygonShape groundShape = new PolygonShape();\r\n\t\t\tgroundShape.setAsBox(25, 2);\r\n\t\r\n\t\t\tFixtureDef groundFixtureDef = new FixtureDef();\r\n\t\t\tgroundFixtureDef.shape = groundShape;\r\n\t\t\tgroundFixtureDef.friction = 0.2f;\r\n\t\t\tgroundFixtureDef.density = 1.0f;\r\n\t\t\tgroundFixtureDef.restitution = 0.2f;\r\n\t\r\n\t\t\tBodyDef groundBodyDef = new BodyDef();\r\n\t\t\tgroundBodyDef.type = BodyDef.BodyType.StaticBody;\r\n\t\r\n\t\t\tBody ground = world.createBody(groundBodyDef);\r\n\t\t\tground.createFixture(groundFixtureDef);\r\n\t\t\tground.setTransform(50, 20, 0);\r\n\t\r\n\t\r\n\t\t\tstage = new Stage(new ScreenViewport());\r\n\t\t\tstage.setDebugAll(true);\r\n\t\t\tlabel = new Label(&quot;TEXT&quot;, new Label.LabelStyle(new BitmapFont(Gdx.files.internal(&quot;default.fnt&quot;)), Color.WHITE));\r\n\t\t\tlabel.setPosition(10, 10);\r\n\t\t\tstage.addActor(label);\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void render () {\r\n\t\t\tScreenUtils.clear(0, 0, 0, 1);\r\n\t\t\tfloat delta = Gdx.graphics.getDeltaTime();\r\n\t\t\tworldCamera.update();\r\n\t\t\tworld.step(delta, 8, 8);\r\n\t\t\tVector2 ballPositionWorld = ballBody.getPosition();\r\n\t\t\tVector3 ballScreenPosition = worldCamera.project(new Vector3(ballPositionWorld.x, ballPositionWorld.y, 1.0f));\r\n\t\t\tVector3 ballStagePosition = stage.getCamera().unproject(ballScreenPosition);\r\n\t\t\tlabel.setText(String.format(&quot;(%.3f, %.3f)&quot;, ballPositionWorld.x, ballPositionWorld.y));\r\n\t\t\tlabel.pack();\r\n\t\t\tlabel.setPosition(ballStagePosition.x, stage.getHeight() - ballStagePosition.y);\r\n\t\t\tbox2DDebugRenderer.render(world, worldCamera.combined);\r\n\t\t\tstage.act();\r\n\t\t\tstage.draw();\r\n\t\t}\r\n\t}\r\n\r\n  [1]: https://i.stack.imgur.com/9TTkn.gif\r\n  [2]: https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests-android/assets/data/default.fnt\r\n  [3]: https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests-android/assets/data/default.png","title":"LibGDX camera.project() is not working properly","body":"<p>In order to translate from <code>World</code>-coordinates to <code>Stage</code>-coordinates you need to first project the <code>World</code> position onto <em>screen-space</em>, and then unproject it back into <em><code>Stage</code>-space</em>.</p>\n<pre><code>Vector2 worldPosition = body.getPosition();\nVector3 screenPosition = worldCamera.project(new Vector3(worldPosition.x, worldPosition.y, 1.0f));\nVector3 stagePosition = stage.getCamera().unproject(screenPosition);\n\nlabel.setPosition(stagePosition.x, stage.getHeight() - stagePosition.y)); // stage.getHeight() - because UP is flipped.\n</code></pre>\n<p>That process will allow you to track a <strong>Box2D</strong> <code>Body</code> and set a <code>Label</code>s position to match it:</p>\n<p><a href=\"https://i.stack.imgur.com/9TTkn.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9TTkn.gif\" alt=\"Label tracking Box2D body\" /></a></p>\n<p>Full source for the example above is included below, it uses the default font from the <strong>libGDX</strong> tests (<a href=\"https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests-android/assets/data/default.fnt\" rel=\"nofollow noreferrer\">font</a> and the <a href=\"https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests-android/assets/data/default.png\" rel=\"nofollow noreferrer\">font image</a>).</p>\n<pre><code>package com.bornander.sandbox;\n\nimport com.badlogic.gdx.ApplicationAdapter;\nimport com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.graphics.Color;\nimport com.badlogic.gdx.graphics.OrthographicCamera;\nimport com.badlogic.gdx.graphics.g2d.BitmapFont;\nimport com.badlogic.gdx.math.Vector2;\nimport com.badlogic.gdx.math.Vector3;\nimport com.badlogic.gdx.physics.box2d.*;\nimport com.badlogic.gdx.scenes.scene2d.Stage;\nimport com.badlogic.gdx.scenes.scene2d.ui.Label;\nimport com.badlogic.gdx.utils.ScreenUtils;\nimport com.badlogic.gdx.utils.viewport.ScreenViewport;\n\npublic class MyGdxSandbox extends ApplicationAdapter {\n    World world;\n    OrthographicCamera worldCamera;\n    Box2DDebugRenderer box2DDebugRenderer;\n\n    Body ballBody;\n    Stage stage;\n    Label label;\n    \n    @Override\n    public void create () {\n        world = new World(new Vector2(0.0f, -10.0f), false);\n        float aspectRatio = (float)Gdx.graphics.getWidth() / Gdx.graphics.getHeight();\n        float worldCameraViewportWidth = 100.0f;\n        worldCamera = new OrthographicCamera(worldCameraViewportWidth, worldCameraViewportWidth / aspectRatio);\n        worldCamera.position.set(worldCamera.viewportWidth / 2.0f, worldCamera.viewportHeight / 2.0f, 1.0f);\n        box2DDebugRenderer = new Box2DDebugRenderer();\n\n        CircleShape ballShape = new CircleShape();\n        ballShape.setRadius(4.0f);\n\n        FixtureDef ballFixtureDef = new FixtureDef();\n        ballFixtureDef.shape = ballShape;\n        ballFixtureDef.friction = 0.2f;\n        ballFixtureDef.density = 1.0f;\n        ballFixtureDef.restitution = 0.65f;\n\n        BodyDef ballBodyDef = new BodyDef();\n        ballBodyDef.type = BodyDef.BodyType.DynamicBody;\n\n        ballBody = world.createBody(ballBodyDef);\n        ballBody.createFixture(ballFixtureDef);\n        ballBody.setTransform(25, 50, 0);\n        ballBody.applyLinearImpulse(200, 0, ballBody.getPosition().x, ballBody.getPosition().y, true);\n\n        PolygonShape groundShape = new PolygonShape();\n        groundShape.setAsBox(25, 2);\n\n        FixtureDef groundFixtureDef = new FixtureDef();\n        groundFixtureDef.shape = groundShape;\n        groundFixtureDef.friction = 0.2f;\n        groundFixtureDef.density = 1.0f;\n        groundFixtureDef.restitution = 0.2f;\n\n        BodyDef groundBodyDef = new BodyDef();\n        groundBodyDef.type = BodyDef.BodyType.StaticBody;\n\n        Body ground = world.createBody(groundBodyDef);\n        ground.createFixture(groundFixtureDef);\n        ground.setTransform(50, 20, 0);\n\n\n        stage = new Stage(new ScreenViewport());\n        stage.setDebugAll(true);\n        label = new Label(&quot;TEXT&quot;, new Label.LabelStyle(new BitmapFont(Gdx.files.internal(&quot;default.fnt&quot;)), Color.WHITE));\n        label.setPosition(10, 10);\n        stage.addActor(label);\n    }\n\n    @Override\n    public void render () {\n        ScreenUtils.clear(0, 0, 0, 1);\n        float delta = Gdx.graphics.getDeltaTime();\n        worldCamera.update();\n        world.step(delta, 8, 8);\n        Vector2 ballPositionWorld = ballBody.getPosition();\n        Vector3 ballScreenPosition = worldCamera.project(new Vector3(ballPositionWorld.x, ballPositionWorld.y, 1.0f));\n        Vector3 ballStagePosition = stage.getCamera().unproject(ballScreenPosition);\n        label.setText(String.format(&quot;(%.3f, %.3f)&quot;, ballPositionWorld.x, ballPositionWorld.y));\n        label.pack();\n        label.setPosition(ballStagePosition.x, stage.getHeight() - ballStagePosition.y);\n        box2DDebugRenderer.render(world, worldCamera.combined);\n        stage.act();\n        stage.draw();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22723442,"reputation":119,"user_id":16887604,"display_name":"Adixe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76890661,"answer_count":1,"score":1,"last_activity_date":1691865642,"creation_date":1691518723,"question_id":76862228,"body_markdown":"I use Box2D to manage my game world. I want to display text above the body. I plan to do this by setting the Label appropriately. The problem is that the body is in the game world and the Label is in the Stage (UI). So I tried to use the *camera.project()* method to convert world coordinates to screen coordinates. Unfortunately, for some reason I couldn&#39;t do it - the Label is displayed in a different place than it should be - it is shifted down and to the left relative to the target position. When resizing the window, this position also changes, but also incorrectly.\r\nI will add that otherwise I use the *camera.unproject()* method in the same way and I have no problems here - everything works fine. I don&#39;t know why it&#39;s different the other way around.\r\n\r\n    this.camera = new OrthographicCamera(ScreenManager.WIDTH * SCALE, ScreenManager.HEIGHT * SCALE);\r\n    this.viewport = new FitViewport(ScreenManager.WIDTH, ScreenManager.HEIGHT);\r\n    this.stage = new Stage(viewport, batch);\r\n    this.world = new World(Vector2.Zero, true);\r\n\r\n    // ...\r\n\r\n    Vector3 worldPosition = new Vector3(x, y, 0);\r\n    Vector3 screenPosition = camera.project(worldPosition,\r\n        viewport.getScreenX(), viewport.getScreenY(),\r\n        viewport.getScreenWidth(), viewport.getScreenHeight());\r\n    \r\n    label.setPosition(screenPosition.x, screenPosition.y);\r\n\r\nAnd my resize method:\r\n\r\n    @Override\r\n    public void resize(int width, int height) {\r\n        viewport.update(width, height, true);\r\n    }\r\nOf course I call *act()* and *draw()* for Stage in the render method. What am I doing wrong?","title":"LibGDX camera.project() is not working properly","body":"<p>I use Box2D to manage my game world. I want to display text above the body. I plan to do this by setting the Label appropriately. The problem is that the body is in the game world and the Label is in the Stage (UI). So I tried to use the <em>camera.project()</em> method to convert world coordinates to screen coordinates. Unfortunately, for some reason I couldn't do it - the Label is displayed in a different place than it should be - it is shifted down and to the left relative to the target position. When resizing the window, this position also changes, but also incorrectly.\nI will add that otherwise I use the <em>camera.unproject()</em> method in the same way and I have no problems here - everything works fine. I don't know why it's different the other way around.</p>\n<pre><code>this.camera = new OrthographicCamera(ScreenManager.WIDTH * SCALE, ScreenManager.HEIGHT * SCALE);\nthis.viewport = new FitViewport(ScreenManager.WIDTH, ScreenManager.HEIGHT);\nthis.stage = new Stage(viewport, batch);\nthis.world = new World(Vector2.Zero, true);\n\n// ...\n\nVector3 worldPosition = new Vector3(x, y, 0);\nVector3 screenPosition = camera.project(worldPosition,\n    viewport.getScreenX(), viewport.getScreenY(),\n    viewport.getScreenWidth(), viewport.getScreenHeight());\n\nlabel.setPosition(screenPosition.x, screenPosition.y);\n</code></pre>\n<p>And my resize method:</p>\n<pre><code>@Override\npublic void resize(int width, int height) {\n    viewport.update(width, height, true);\n}\n</code></pre>\n<p>Of course I call <em>act()</em> and <em>draw()</em> for Stage in the render method. What am I doing wrong?</p>\n"},{"tags":["java","android","android-volley"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691865759,"post_id":76890629,"comment_id":135550271,"body_markdown":"Why is it necessary to convert from Base64 to the less efficient hex representation?","body":"Why is it necessary to convert from Base64 to the less efficient hex representation?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691866411,"post_id":76890629,"comment_id":135550333,"body_markdown":"`public static String sixtyFourToHex(String s64) { return HexFormat.of().formatHex(Base64.getDecoder().decode(s64)); }`","body":"<code>public static String sixtyFourToHex(String s64) { return HexFormat.of().formatHex(Base64.getDecoder().decode(s64)); }</code>"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1691870470,"post_id":76890629,"comment_id":135550725,"body_markdown":"@g00se That code you have posted requires API 34. Or is it also provided by some compatibility library?","body":"@g00se That code you have posted requires API 34. Or is it also provided by some compatibility library?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691873132,"post_id":76890629,"comment_id":135550941,"body_markdown":"It&#39;s Java 17 actually","body":"It&#39;s Java 17 actually"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691879297,"post_id":76890629,"comment_id":135551386,"body_markdown":"Or `String hex = new BigInteger(1, Base64.getDecoder().decode(b64)).toString(16);\n`","body":"Or <code>String hex = new BigInteger(1, Base64.getDecoder().decode(b64)).toString(16); </code>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691939386,"post_id":76890629,"comment_id":135555681,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":13199884,"reputation":1,"user_id":9533425,"display_name":"molige srinivas"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691865162,"creation_date":1691865162,"question_id":76890629,"body_markdown":"how to convert a base64 String into HexaDecimal String and Upload to the server Of HexaDecimal String with adding headers in Volley Library in Java. what are the steps needed to upload hexadecimal string into server in volley  Thanks in Adavance\r\n\r\nI tried with base64 String and HexaDecimal(hardcode string) to upload image to server  in Volley , but unfortunately it is not stored Hexadecimal string in Server(SAP OData) , so added the base64 String in getParams method. what is the problem and why it is not uploaded base64 String/ HexaDecimal String.    another issue is how to convert Base64 string into Hexadecimal String in java android . ","title":"how to convert base64 value into Hexa decimal String and Send that hexa decimal String to Server by using volley in Java android","body":"<p>how to convert a base64 String into HexaDecimal String and Upload to the server Of HexaDecimal String with adding headers in Volley Library in Java. what are the steps needed to upload hexadecimal string into server in volley  Thanks in Adavance</p>\n<p>I tried with base64 String and HexaDecimal(hardcode string) to upload image to server  in Volley , but unfortunately it is not stored Hexadecimal string in Server(SAP OData) , so added the base64 String in getParams method. what is the problem and why it is not uploaded base64 String/ HexaDecimal String.    another issue is how to convert Base64 string into Hexadecimal String in java android .</p>\n"},{"tags":["java","spring-boot","autowired"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1666247696,"post_id":74135333,"comment_id":130891524,"body_markdown":"How did you instantiate AccountPanel?","body":"How did you instantiate AccountPanel?"},{"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"score":0,"creation_date":1666247971,"post_id":74135333,"comment_id":130891599,"body_markdown":"does the `UserClientApi` needed to be the inner class of `AccountPanel` ? if not then create another class for `UserClientApi` if yes then try this https://stackoverflow.com/questions/24213823/anyway-to-inject-autowire-an-inner-class-into-an-outer-class","body":"does the <code>UserClientApi</code> needed to be the inner class of <code>AccountPanel</code> ? if not then create another class for <code>UserClientApi</code> if yes then try this <a href=\"https://stackoverflow.com/questions/24213823/anyway-to-inject-autowire-an-inner-class-into-an-outer-class\" title=\"anyway to inject autowire an inner class into an outer class\">stackoverflow.com/questions/24213823/&hellip;</a>"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1666248530,"post_id":74135333,"comment_id":130891762,"body_markdown":"@Aleson it isn&#39;t an inner class, the closing bracket is right before the UserClientApi class","body":"@Aleson it isn&#39;t an inner class, the closing bracket is right before the UserClientApi class"},{"owner":{"account_id":14207111,"reputation":332,"user_id":10263321,"display_name":"Aleson"},"score":0,"creation_date":1666248703,"post_id":74135333,"comment_id":130891826,"body_markdown":"by the code you showed here it looks like the `UserClientApi` is the inner class of `AccountPanel` try create new java file for the `UserClientApi` class","body":"by the code you showed here it looks like the <code>UserClientApi</code> is the inner class of <code>AccountPanel</code> try create new java file for the <code>UserClientApi</code> class"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1666255201,"post_id":74135333,"comment_id":130894165,"body_markdown":"@Aleson by the code the OP showed, it doesn&#39;t look like the UserClientApi is an inner class. I&#39;ve already pointed out there is a closing bracket for AccountPanel before the configuration of UserClientApi","body":"@Aleson by the code the OP showed, it doesn&#39;t look like the UserClientApi is an inner class. I&#39;ve already pointed out there is a closing bracket for AccountPanel before the configuration of UserClientApi"}],"owner":{"account_id":2683594,"reputation":490,"user_id":2318409,"accept_rate":80,"display_name":"Gary Greenberg"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1666249026,"answer_count":0,"score":0,"last_activity_date":1691863586,"creation_date":1666247382,"question_id":74135333,"body_markdown":"I have created an AccountPanel class that is using another class UserClientApi to call some microservices to process information about customers.\r\n\r\n    @Component\r\n    public class AccountPanel {\r\n    \r\n        private static final int notificationTime = 5000;\r\n    \r\n        @Autowired\r\n        private UserClientApi  api;\r\n        ...\r\n        }\r\n\r\n        @Component\r\n        public class UserClientApi  {\r\n    \r\n        @Value(&quot;${user.api.url}&quot;)\r\n        String apiUrl;\r\n    \r\n        @Autowired\r\n        RestTemplate rest;\r\n    \r\n        @Override\r\n        public Reader findUserByName(String name) {\r\n         ...\r\n        }\r\n        ...\r\n      }\r\n\r\nFirst I had problems with autowiring RestTemplate, until I added a bean that creates it.\r\nNow I am having problems with injecting UserClientApi. I tried 2 dozens of suggestions but still my api variable is always null. I tried extracting interface, added component scan, etc. Nothing is working. Can someone help me? I am using spring-boot 2.7.4 with JDK 14\r\n","title":"@Autowired component is not injected","body":"<p>I have created an AccountPanel class that is using another class UserClientApi to call some microservices to process information about customers.</p>\n<pre><code>@Component\npublic class AccountPanel {\n\n    private static final int notificationTime = 5000;\n\n    @Autowired\n    private UserClientApi  api;\n    ...\n    }\n\n    @Component\n    public class UserClientApi  {\n\n    @Value(&quot;${user.api.url}&quot;)\n    String apiUrl;\n\n    @Autowired\n    RestTemplate rest;\n\n    @Override\n    public Reader findUserByName(String name) {\n     ...\n    }\n    ...\n  }\n</code></pre>\n<p>First I had problems with autowiring RestTemplate, until I added a bean that creates it.\nNow I am having problems with injecting UserClientApi. I tried 2 dozens of suggestions but still my api variable is always null. I tried extracting interface, added component scan, etc. Nothing is working. Can someone help me? I am using spring-boot 2.7.4 with JDK 14</p>\n"},{"tags":["java","spring","spring-boot","spring-rest"],"answers":[{"tags":[],"owner":{"account_id":10717399,"reputation":5816,"user_id":7887516,"display_name":"Ananthapadmanabhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585647811,"creation_date":1585646613,"answer_id":60947253,"question_id":60946866,"body_markdown":"In your code , the method that you are calling asynchronously is a void method, meaning it won&#39;t return anything.In Spring, annotating a method of a bean with `@Async` will make it execute in a separate thread i.e. the caller will not wait for the completion of the called method. \r\n\r\nSo , if you want the controller to wait till the execution is completed, If you want to wait for the result I suggest you use `Future`. You could take the approach where you wrap the actual return in the `Future` instance.I haven&#39;t tried compiling this code , but something like below :\r\n\r\n    @Async\r\n    public Future&lt;T&gt; initializeUser(InitRequest initRequest) {\r\n    \r\n        String BASE_URL = &quot;http://sample_url&quot;;\r\n    \r\n        client.initUser(BASE_URL, initRequest, new ResponseCallback&lt;InitRequest&gt;() {\r\n    \r\n            @Override\r\n            public void onSuccess(@NonNull InitRequest arg0) {\r\n                return new AsyncResult&lt;InitRequest&gt;(arg0);\r\n                System.out.println(&quot;User Initialized: &quot; + arg0.getId());\r\n            }\r\n    \r\n            @Override\r\n            public void onError(@NonNull ResponseBody error) { \r\n                return new AsyncResult&lt;ResponseBody&gt;(error);\r\n                System.out.println(&quot;User Initialize failed&quot;);\r\n            }\r\n    \r\n            @Override\r\n            public void validationError(@NonNull String arg0) {\r\n                 return new AsyncResult&lt;String&gt;(arg0);\r\n                // TODO Auto-generated method stub\r\n    \r\n            }\r\n        });\r\n    }\r\n\r\nand in the rest controller to receive this :\r\n\r\n    @RequestMapping(method=RequestMethod.POST, value = &quot;/init&quot; )\r\n    public InitRequest initUser( @RequestBody InitRequest initRequest) {\r\n      Future&lt;T&gt; futureResult = experimentServices.initializeUser(initRequest);\r\n      // wait for request to finish and send response to user\r\n      if (futureResult.isDone()) {\r\n          return futureResult.get();\r\n      }\r\n    }","title":"Spring boot return a response from callback in services","body":"<p>In your code , the method that you are calling asynchronously is a void method, meaning it won't return anything.In Spring, annotating a method of a bean with <code>@Async</code> will make it execute in a separate thread i.e. the caller will not wait for the completion of the called method. </p>\n\n<p>So , if you want the controller to wait till the execution is completed, If you want to wait for the result I suggest you use <code>Future</code>. You could take the approach where you wrap the actual return in the <code>Future</code> instance.I haven't tried compiling this code , but something like below :</p>\n\n<pre><code>@Async\npublic Future&lt;T&gt; initializeUser(InitRequest initRequest) {\n\n    String BASE_URL = \"http://sample_url\";\n\n    client.initUser(BASE_URL, initRequest, new ResponseCallback&lt;InitRequest&gt;() {\n\n        @Override\n        public void onSuccess(@NonNull InitRequest arg0) {\n            return new AsyncResult&lt;InitRequest&gt;(arg0);\n            System.out.println(\"User Initialized: \" + arg0.getId());\n        }\n\n        @Override\n        public void onError(@NonNull ResponseBody error) { \n            return new AsyncResult&lt;ResponseBody&gt;(error);\n            System.out.println(\"User Initialize failed\");\n        }\n\n        @Override\n        public void validationError(@NonNull String arg0) {\n             return new AsyncResult&lt;String&gt;(arg0);\n            // TODO Auto-generated method stub\n\n        }\n    });\n}\n</code></pre>\n\n<p>and in the rest controller to receive this :</p>\n\n<pre><code>@RequestMapping(method=RequestMethod.POST, value = \"/init\" )\npublic InitRequest initUser( @RequestBody InitRequest initRequest) {\n  Future&lt;T&gt; futureResult = experimentServices.initializeUser(initRequest);\n  // wait for request to finish and send response to user\n  if (futureResult.isDone()) {\n      return futureResult.get();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11026225,"reputation":41,"user_id":8099064,"display_name":"ironside"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636556906,"creation_date":1636551146,"answer_id":69914196,"question_id":60946866,"body_markdown":"Best way to do is to avoid busy waiting on server, so use DeferredResult:\r\n\r\n    private ExecutorService executor = ....\r\n\r\n    @RequestMapping(method=RequestMethod.POST, value = &quot;/init&quot; )\r\n    public DeferredResult&lt;ResponseEntity&lt;InitResponse&gt;&gt; initUser(@RequestBody InitRequest initRequest) {\r\n        final DeferredResult&lt;ResponseEntity&lt;InitResponse&gt;&gt; output = new DeferredResult&lt;&gt;(5000L, 5000L);\r\n        executor.submit(() -&gt; {\r\n            InitResponse response = processAndcreateRespnse(...);\r\n            output.setResult(new ResponseEntity&lt;&gt;(response, HttpStatus.OK));\r\n        });\r\n\r\n        return output;\r\n    }\r\n","title":"Spring boot return a response from callback in services","body":"<p>Best way to do is to avoid busy waiting on server, so use DeferredResult:</p>\n<pre><code>private ExecutorService executor = ....\n\n@RequestMapping(method=RequestMethod.POST, value = &quot;/init&quot; )\npublic DeferredResult&lt;ResponseEntity&lt;InitResponse&gt;&gt; initUser(@RequestBody InitRequest initRequest) {\n    final DeferredResult&lt;ResponseEntity&lt;InitResponse&gt;&gt; output = new DeferredResult&lt;&gt;(5000L, 5000L);\n    executor.submit(() -&gt; {\n        InitResponse response = processAndcreateRespnse(...);\n        output.setResult(new ResponseEntity&lt;&gt;(response, HttpStatus.OK));\n    });\n\n    return output;\n}\n</code></pre>\n"}],"owner":{"account_id":5195840,"reputation":53,"user_id":4750686,"accept_rate":80,"display_name":"Dhaval P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691863455,"creation_date":1585645285,"question_id":60946866,"body_markdown":"I am trying to develop sample Rest API application using Spring boot to test my java client library (Which is a conversion of a JS Client). Java client does some async tasks and returns response as callback.\r\n\r\nHere is example of how i am calling it from my sample application&#39;s service.\r\n\r\n    @Async\r\n    public void initializeUser(InitRequest initRequest) {\r\n\t\r\n\t\tString BASE_URL = &quot;http://sample_url&quot;;\r\n\r\n\t\tclient.initUser(BASE_URL, initRequest, new ResponseCallback&lt;InitRequest&gt;() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onSuccess(@NonNull InitRequest arg0) {\r\n                // Return arg0 to controller\r\n\t\t\t\tSystem.out.println(&quot;User Initialized: &quot; + arg0.getId());\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onError(@NonNull ResponseBody error) { \r\n                // Return error to controller\r\n\t\t\t\tSystem.out.println(&quot;User Initialize failed&quot;);\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void validationError(@NonNull String arg0) {\r\n                 // return validationError to controller\r\n\t\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n    }\r\n\r\nHere initUser is method implemented in my client. When i call this method from my controller. controller returns before actual request is finished and i am not able to see any response in postman.\r\n\r\nHere is a controller method.\r\n\r\n\t\r\n\r\n    @RequestMapping(method=RequestMethod.POST, value = &quot;/init&quot; )\r\n    public void initUser( @RequestBody InitRequest initRequest) {\r\n    \texperimentServices.initializeUser(initRequest);\r\n        // wait for request to finish and send response to user\r\n    }\r\n\r\n\r\nLike in javascript i can use promises or async/await to wait till the services gives response before returning to user.\r\n\r\nI wanted to know.....\r\n\r\n1) How to achieve something similar in Java? (Services returns some data to controller which then goes as a response to end user).\r\n\r\n2) Java methods needs specific return response while services might gives Error, ValidationError or Successfull response object. Is there a way to properly handle all this in a single function?\r\n\r\n\r\nAny links or documentation will help. \r\nThanks \r\n","title":"Spring boot return a response from callback in services","body":"<p>I am trying to develop sample Rest API application using Spring boot to test my java client library (Which is a conversion of a JS Client). Java client does some async tasks and returns response as callback.</p>\n\n<p>Here is example of how i am calling it from my sample application's service.</p>\n\n<pre><code>@Async\npublic void initializeUser(InitRequest initRequest) {\n\n    String BASE_URL = \"http://sample_url\";\n\n    client.initUser(BASE_URL, initRequest, new ResponseCallback&lt;InitRequest&gt;() {\n\n        @Override\n        public void onSuccess(@NonNull InitRequest arg0) {\n            // Return arg0 to controller\n            System.out.println(\"User Initialized: \" + arg0.getId());\n        }\n\n        @Override\n        public void onError(@NonNull ResponseBody error) { \n            // Return error to controller\n            System.out.println(\"User Initialize failed\");\n        }\n\n        @Override\n        public void validationError(@NonNull String arg0) {\n             // return validationError to controller\n            // TODO Auto-generated method stub\n\n        }\n    });\n}\n</code></pre>\n\n<p>Here initUser is method implemented in my client. When i call this method from my controller. controller returns before actual request is finished and i am not able to see any response in postman.</p>\n\n<p>Here is a controller method.</p>\n\n<pre><code>@RequestMapping(method=RequestMethod.POST, value = \"/init\" )\npublic void initUser( @RequestBody InitRequest initRequest) {\n    experimentServices.initializeUser(initRequest);\n    // wait for request to finish and send response to user\n}\n</code></pre>\n\n<p>Like in javascript i can use promises or async/await to wait till the services gives response before returning to user.</p>\n\n<p>I wanted to know.....</p>\n\n<p>1) How to achieve something similar in Java? (Services returns some data to controller which then goes as a response to end user).</p>\n\n<p>2) Java methods needs specific return response while services might gives Error, ValidationError or Successfull response object. Is there a way to properly handle all this in a single function?</p>\n\n<p>Any links or documentation will help. \nThanks </p>\n"},{"tags":["java","spring","junit"],"answers":[{"tags":[],"owner":{"account_id":6471354,"reputation":1382,"user_id":5011400,"accept_rate":78,"display_name":"Yati Sawhney"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1527836033,"creation_date":1527835710,"answer_id":50637616,"question_id":50637581,"body_markdown":"That&#39;s what you return. \r\n\r\n    return new ResponseEntity&lt;&gt;(response, HttpStatus.CREATED);\r\n\r\n`HttpStatus.CREATED` returns **201** and indicates that a resource has been created by the request\r\n\r\n\r\nHow ever in your testcase you are expecting OK(200) `.andExpect(status().isOk());`\r\n\r\nAccording to [HTTP1.1/ specs][1] Post request should always result in the creation of a resource. So it makes sense to return 201 from there. All your need to do is change your testcase assertion expected value to HTTPStatus.CREATED.\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc2616","title":"java.lang.AssertionError: Status expected:&lt;200&gt; but was:&lt;201&gt;","body":"<p>That's what you return.</p>\n<pre><code>return new ResponseEntity&lt;&gt;(response, HttpStatus.CREATED);\n</code></pre>\n<p><code>HttpStatus.CREATED</code> returns <strong>201</strong> and indicates that a resource has been created by the request</p>\n<p>How ever in your testcase you are expecting OK(200) <code>.andExpect(status().isOk());</code></p>\n<p>According to <a href=\"https://www.rfc-editor.org/rfc/rfc2616\" rel=\"nofollow noreferrer\">HTTP1.1/ specs</a> Post request should always result in the creation of a resource. So it makes sense to return 201 from there. All your need to do is change your testcase assertion expected value to HTTPStatus.CREATED.</p>\n"}],"owner":{"account_id":13692159,"reputation":101,"user_id":9879683,"display_name":"newbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11428,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"accepted_answer_id":50637616,"answer_count":1,"score":0,"last_activity_date":1691863327,"creation_date":1527835585,"question_id":50637581,"body_markdown":"Hi I&#39;m trying to implement junit in my controller. But what I get is 201 instead of 200.\r\n\r\nBelow is my controller\r\n\r\n    @RestController\r\n    @RequestMapping(value = &quot;/treat&quot;)\r\n    public class TreatController {\r\n    \r\n      private final TreatService treatService;\r\n    \r\n    @Autowired\r\n      public TreatController(TreatService treatService){\r\n        this.treatService = treatService;\r\n      }\r\n    \r\n    @PostMapping\r\n      public ResponseEntity&lt;CommonResponse&gt; addNew(\r\n          @RequestBody Treat treat) throws RecordNotFoundException{\r\n        CommonResponse response = new CommonResponse();\r\n        response.setStatus(CommonConstants.OK);\r\n        response.setData(treatService.save(treat));\r\n        return new ResponseEntity&lt;&gt;(response, HttpStatus.CREATED);\r\n      }\r\n    }\r\n\r\n\r\nnext is my Junit testing:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @WebMvcTest(TreatController.class)\r\n    public class TreatControllerTest {\r\n    \r\n      private RecordNotFoundException recordException = new RecordNotFoundException(&quot;&quot;);\r\n    \r\n      private final String title = &quot;{\\&quot;title\\&quot; : \\&quot;title\\&quot;}&quot;;\r\n    \r\n      @Autowired\r\n      private MockMvc mockMvc;\r\n    \r\n      @MockBean\r\n      private TreatService treatService;\r\n    \r\n    @Test\r\n      public void addNew() throws Exception{\r\n        Treatment treatment = new Treatment();\r\n    \r\n        given(treatmentService.save(\r\n            Mockito.any(Treat.class))).willReturn(treat);\r\n        mockMvc.perform(post(&quot;/treats&quot;)\r\n        .content(title)\r\n        .accept(MediaType.APPLICATION_JSON_VALUE)\r\n        .contentType(MediaType.APPLICATION_JSON_VALUE))\r\n    \r\n        .andDo(print())\r\n        .andExpect(status().isOk());\r\n        \r\n        Mockito.verify(treatService).save(Mockito.any(Treat.class));\r\n      }\r\n    }\r\n\r\nis there anything that I missed?\r\nBy the way, I dont use Json. I just inserted it because it works.","title":"java.lang.AssertionError: Status expected:&lt;200&gt; but was:&lt;201&gt;","body":"<p>Hi I'm trying to implement junit in my controller. But what I get is 201 instead of 200.</p>\n\n<p>Below is my controller</p>\n\n<pre><code>@RestController\n@RequestMapping(value = \"/treat\")\npublic class TreatController {\n\n  private final TreatService treatService;\n\n@Autowired\n  public TreatController(TreatService treatService){\n    this.treatService = treatService;\n  }\n\n@PostMapping\n  public ResponseEntity&lt;CommonResponse&gt; addNew(\n      @RequestBody Treat treat) throws RecordNotFoundException{\n    CommonResponse response = new CommonResponse();\n    response.setStatus(CommonConstants.OK);\n    response.setData(treatService.save(treat));\n    return new ResponseEntity&lt;&gt;(response, HttpStatus.CREATED);\n  }\n}\n</code></pre>\n\n<p>next is my Junit testing:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@WebMvcTest(TreatController.class)\npublic class TreatControllerTest {\n\n  private RecordNotFoundException recordException = new RecordNotFoundException(\"\");\n\n  private final String title = \"{\\\"title\\\" : \\\"title\\\"}\";\n\n  @Autowired\n  private MockMvc mockMvc;\n\n  @MockBean\n  private TreatService treatService;\n\n@Test\n  public void addNew() throws Exception{\n    Treatment treatment = new Treatment();\n\n    given(treatmentService.save(\n        Mockito.any(Treat.class))).willReturn(treat);\n    mockMvc.perform(post(\"/treats\")\n    .content(title)\n    .accept(MediaType.APPLICATION_JSON_VALUE)\n    .contentType(MediaType.APPLICATION_JSON_VALUE))\n\n    .andDo(print())\n    .andExpect(status().isOk());\n\n    Mockito.verify(treatService).save(Mockito.any(Treat.class));\n  }\n}\n</code></pre>\n\n<p>is there anything that I missed?\nBy the way, I dont use Json. I just inserted it because it works.</p>\n"},{"tags":["java","generics","function-reference"],"comments":[{"owner":{"account_id":1174921,"reputation":1613,"user_id":1151144,"accept_rate":79,"display_name":"Dale"},"score":0,"creation_date":1691848865,"post_id":76889316,"comment_id":135548599,"body_markdown":"Can you give us more context to why this has to be one method?","body":"Can you give us more context to why this has to be one method?"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691851351,"post_id":76889316,"comment_id":135548881,"body_markdown":"A very minor nit: It&#39;s &quot;algorithm&quot;, not &quot;algorythm&quot;.","body":"A very minor nit: It&#39;s &quot;algorithm&quot;, not &quot;algorythm&quot;."}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691849691,"creation_date":1691849691,"answer_id":76889683,"question_id":76889316,"body_markdown":"You can’t do it in constructor code.  There is no way to change the meaning of T at runtime using code.  Generic types are enforced by the compiler, not at runtime.\r\n\r\nIf this weren’t an abstract class, I would suggest that you make the constructor private, and create public static factory methods as a way to let allow code construct instances.\r\n\r\nSince it is an abstract class, you can just make the picker function a parameter:\r\n\r\n    protected SelectionAlgorythm(RangePair&lt;T&gt; pair,\r\n                                 BinaryOperator&lt;T&gt; picker)\r\n    {\r\n        this.pair = pair;\r\n        this.picker = picker;\r\n    }\r\n\r\n(Note that [BinaryOperator](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/BinaryOperator.html) is the same as a BiFunction where all types are the same, but is easier to read.)\r\n\r\nIf you want to restrict which picker functions are allowed, create your own inner pseudo-enum class:\r\n\r\n    protected static final class Picker&lt;V&gt; {\r\n        private final BinaryOperator&lt;V&gt; function;\r\n\r\n        private Picker(BinaryOperator&lt;V&gt; function) {\r\n            this.function = function;\r\n        }\r\n\r\n        BinaryOperation&lt;V&gt; function() {\r\n            return function;\r\n        }\r\n\r\n        public static final Picker&lt;Integer&gt; INT =\r\n            new Picker&lt;&gt;(SelectionAlgorythm::pickRandomInt);\r\n\r\n        public static final Picker&lt;Float&gt; FLOAT =\r\n            new Picker&lt;&gt;(SelectionAlgorythm::pickRandomFloat);\r\n    }\r\n\r\nThis will be typesafe since no class other than SelectionAlgorythm is capable of creating Picker instances:\r\n\r\n    protected SelectionAlgorythm(RangePair&lt;T&gt; pair,\r\n                                 Picker&lt;T&gt; picker)\r\n    {\r\n        this.pair = pair;\r\n        this.picker = picker.function();\r\n    }\r\n","title":"Making a reference to set type functions in Java","body":"<p>You can’t do it in constructor code.  There is no way to change the meaning of T at runtime using code.  Generic types are enforced by the compiler, not at runtime.</p>\n<p>If this weren’t an abstract class, I would suggest that you make the constructor private, and create public static factory methods as a way to let allow code construct instances.</p>\n<p>Since it is an abstract class, you can just make the picker function a parameter:</p>\n<pre><code>protected SelectionAlgorythm(RangePair&lt;T&gt; pair,\n                             BinaryOperator&lt;T&gt; picker)\n{\n    this.pair = pair;\n    this.picker = picker;\n}\n</code></pre>\n<p>(Note that <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/function/BinaryOperator.html\" rel=\"nofollow noreferrer\">BinaryOperator</a> is the same as a BiFunction where all types are the same, but is easier to read.)</p>\n<p>If you want to restrict which picker functions are allowed, create your own inner pseudo-enum class:</p>\n<pre><code>protected static final class Picker&lt;V&gt; {\n    private final BinaryOperator&lt;V&gt; function;\n\n    private Picker(BinaryOperator&lt;V&gt; function) {\n        this.function = function;\n    }\n\n    BinaryOperation&lt;V&gt; function() {\n        return function;\n    }\n\n    public static final Picker&lt;Integer&gt; INT =\n        new Picker&lt;&gt;(SelectionAlgorythm::pickRandomInt);\n\n    public static final Picker&lt;Float&gt; FLOAT =\n        new Picker&lt;&gt;(SelectionAlgorythm::pickRandomFloat);\n}\n</code></pre>\n<p>This will be typesafe since no class other than SelectionAlgorythm is capable of creating Picker instances:</p>\n<pre><code>protected SelectionAlgorythm(RangePair&lt;T&gt; pair,\n                             Picker&lt;T&gt; picker)\n{\n    this.pair = pair;\n    this.picker = picker.function();\n}\n</code></pre>\n"}],"owner":{"account_id":14864245,"reputation":540,"user_id":10733903,"display_name":"Vlad Vyatkin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76889683,"answer_count":1,"score":2,"last_activity_date":1691861317,"creation_date":1691844109,"question_id":76889316,"body_markdown":"I&#39;m making a generic abstract class that will work with float and integer values and will use different algorithms to generate a new value. It relies heavily on picking a random value within range, so I wanted to make a generic RandomRange kind of function.\r\n\r\nThis is the example of my code and what I&#39;m trying to achieve.\r\n```java\r\npublic abstract class SelectionAlgorythm &lt; T &gt; {\r\n  protected static Random random = new Random();\r\n  BiFunction &lt; T, T, T &gt; picker;\r\n\r\n  RangePair pair;\r\n\r\n  public abstract T value();\r\n\r\n  protected SelectionAlgorythm(RangePair &lt; T &gt; pair) {\r\n    this.pair = pair\r\n    if (pair.minRange instanceof Integer) {\r\n      picker = SelectionAlgorythm::pickRandomInt;\r\n    } else if (pair.minRange instanceof Float) {\r\n      picker = SelectionAlgorythm::pickRandomFloat;\r\n    }\r\n  }\r\n\r\n  private static Integer pickRandomInt(Integer val1, Integer val2) {\r\n    return random.nextInt((int) val2 - (int) val1) + (int) val1;\r\n  }\r\n\r\n  private static Float pickRandomFloat(Float val1, Float val2) {\r\n    return random.nextFloat() * (val2 - val1) + val1;\r\n  }\r\n\r\n  public T pickValue() {\r\n    return picker(pair.minRange, pair.maxRange);\r\n  }\r\n}\r\n```\r\n\r\nHowever I run into problems here and I can&#39;t figure out how to fix them. If I leave the code as it is, then the picker initialization lines complain that &quot;Incompatible types, T is not convertible to Integer&quot;\r\n\r\nBut I also can&#39;t just make the functions themselves generic, because random.nextInt() and random.nextFloat() expect particular values, not generics.\r\n\r\nHow do I do that? I admit, I have not worked with generics much and kind of moved away from Java recently, so I may be missing something obvious.\r\n","title":"Making a reference to set type functions in Java","body":"<p>I'm making a generic abstract class that will work with float and integer values and will use different algorithms to generate a new value. It relies heavily on picking a random value within range, so I wanted to make a generic RandomRange kind of function.</p>\n<p>This is the example of my code and what I'm trying to achieve.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class SelectionAlgorythm &lt; T &gt; {\n  protected static Random random = new Random();\n  BiFunction &lt; T, T, T &gt; picker;\n\n  RangePair pair;\n\n  public abstract T value();\n\n  protected SelectionAlgorythm(RangePair &lt; T &gt; pair) {\n    this.pair = pair\n    if (pair.minRange instanceof Integer) {\n      picker = SelectionAlgorythm::pickRandomInt;\n    } else if (pair.minRange instanceof Float) {\n      picker = SelectionAlgorythm::pickRandomFloat;\n    }\n  }\n\n  private static Integer pickRandomInt(Integer val1, Integer val2) {\n    return random.nextInt((int) val2 - (int) val1) + (int) val1;\n  }\n\n  private static Float pickRandomFloat(Float val1, Float val2) {\n    return random.nextFloat() * (val2 - val1) + val1;\n  }\n\n  public T pickValue() {\n    return picker(pair.minRange, pair.maxRange);\n  }\n}\n</code></pre>\n<p>However I run into problems here and I can't figure out how to fix them. If I leave the code as it is, then the picker initialization lines complain that &quot;Incompatible types, T is not convertible to Integer&quot;</p>\n<p>But I also can't just make the functions themselves generic, because random.nextInt() and random.nextFloat() expect particular values, not generics.</p>\n<p>How do I do that? I admit, I have not worked with generics much and kind of moved away from Java recently, so I may be missing something obvious.</p>\n"},{"tags":["java","android","ssl","httpurlconnection"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1691859190,"post_id":76890242,"comment_id":135549671,"body_markdown":"Have you tried using OkHttp, as it has [better HTTPS support](https://square.github.io/okhttp/features/https/)?","body":"Have you tried using OkHttp, as it has <a href=\"https://square.github.io/okhttp/features/https/\" rel=\"nofollow noreferrer\">better HTTPS support</a>?"}],"answers":[{"tags":[],"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691860937,"creation_date":1691860937,"answer_id":76890390,"question_id":76890242,"body_markdown":"&gt; When I disable all ciphers but the two first ones all http connections to the backend fail with exception\r\n\r\nThis means that the following ciphers are left:\r\n\r\n    TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\r\n    TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256\r\n\r\nBoth require ECDSA authentication, which means they need an ECC certificate. Probably you only have a RSA certificate though, which means that the server does not support any ciphers which can work together with the  certificate used by the server.\r\n","title":"Android HttpsURLConnection giving SSLHandshakeException after disabling cipher suites in backend","body":"<blockquote>\n<p>When I disable all ciphers but the two first ones all http connections to the backend fail with exception</p>\n</blockquote>\n<p>This means that the following ciphers are left:</p>\n<pre><code>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\nTLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256\n</code></pre>\n<p>Both require ECDSA authentication, which means they need an ECC certificate. Probably you only have a RSA certificate though, which means that the server does not support any ciphers which can work together with the  certificate used by the server.</p>\n"}],"owner":{"account_id":207323,"reputation":4288,"user_id":457123,"accept_rate":70,"display_name":"Mathias R&#246;nnlund"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76890390,"answer_count":1,"score":0,"last_activity_date":1691860937,"creation_date":1691858570,"question_id":76890242,"body_markdown":"Our backend is Azure App Service (Linux) that with default settings supports the following cipher suite:\r\n\r\n&gt; TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384  \r\n&gt; TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256  \r\n&gt; TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA  \r\n&gt; TLS_RSA_WITH_AES_256_GCM_SHA384  \r\n&gt; TLS_RSA_WITH_AES_128_GCM_SHA256  \r\n&gt; TLS_RSA_WITH_AES_256_CBC_SHA256  \r\n&gt; TLS_RSA_WITH_AES_128_CBC_SHA256  \r\n&gt; TLS_RSA_WITH_AES_256_CBC_SHA  \r\n&gt; TLS_RSA_WITH_AES_128_CBC_SHA  \r\n\r\nWhen I disable all ciphers but the two first ones all http connections to the backend fail with exception\r\n\r\n&gt; javax.net.ssl.SSLHandshakeException: connection closed\r\n\r\nWe have the following code:\r\n\r\n    URL url = new URL(urlString);\r\n    HttpsURLConnection connection = (HttpsURLConnection) url.openConnection();\r\n    connection.setRequestMethod(&quot;GET&quot;);\r\n\r\n    SSLSocketFactory factory = connection.getSSLSocketFactory()\r\n    String[] cipherSuites = factory.getSupportedCipherSuites();\r\n    for (String suite : cipherSuites) {\r\n        System.out.println(suite);\r\n    }\r\n\r\n    connection.connect();\r\n\r\nThe SSLSocketFactory was added just to print the supported cipher suites. The output is:\r\n\r\n&gt; TLS_AES_128_GCM_SHA256  \r\n&gt; TLS_AES_256_GCM_SHA384  \r\n&gt; TLS_CHACHA20_POLY1305_SHA256  \r\n&gt; TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256  \r\n&gt; TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384  \r\n&gt; TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256  \r\n&gt; TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256  \r\n&gt; TLS_ECDHE_PSK_WITH_CHACHA20_POLY1305_SHA256  \r\n&gt; TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\r\n&gt; TLS_ECDHE_PSK_WITH_AES_128_CBC_SHA  \r\n&gt; TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA  \r\n&gt; TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA  \r\n&gt; TLS_ECDHE_PSK_WITH_AES_256_CBC_SHA  \r\n&gt; TLS_RSA_WITH_AES_128_GCM_SHA256\r\n&gt; TLS_RSA_WITH_AES_256_GCM_SHA384  \r\n&gt; TLS_RSA_WITH_AES_128_CBC_SHA  \r\n&gt; TLS_PSK_WITH_AES_128_CBC_SHA  \r\n&gt; TLS_RSA_WITH_AES_256_CBC_SHA  \r\n&gt; TLS_PSK_WITH_AES_256_CBC_SHA  \r\n&gt; SSL_RSA_WITH_3DES_EDE_CBC_SHA  \r\n&gt; TLS_EMPTY_RENEGOTIATION_INFO_SCSV  \r\n&gt; TLS_FALLBACK_SCSV  \r\n\r\nSo at least the first cipher, e.g. TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384 seems to be supported by both.\r\n\r\nThe app for various historical reasons have sdk 28 as minimum and target sdk\r\n\r\n    minSdkVersion 28\r\n    targetSdkVersion 28\r\n\r\nWhy is the handshake not finding a common cipher?","title":"Android HttpsURLConnection giving SSLHandshakeException after disabling cipher suites in backend","body":"<p>Our backend is Azure App Service (Linux) that with default settings supports the following cipher suite:</p>\n<blockquote>\n<p>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384<br />\nTLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256<br />\nTLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256<br />\nTLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384<br />\nTLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256<br />\nTLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384<br />\nTLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256<br />\nTLS_ECDHE_RSA_WITH_AES_256_CBC_SHA<br />\nTLS_ECDHE_RSA_WITH_AES_128_CBC_SHA<br />\nTLS_RSA_WITH_AES_256_GCM_SHA384<br />\nTLS_RSA_WITH_AES_128_GCM_SHA256<br />\nTLS_RSA_WITH_AES_256_CBC_SHA256<br />\nTLS_RSA_WITH_AES_128_CBC_SHA256<br />\nTLS_RSA_WITH_AES_256_CBC_SHA<br />\nTLS_RSA_WITH_AES_128_CBC_SHA</p>\n</blockquote>\n<p>When I disable all ciphers but the two first ones all http connections to the backend fail with exception</p>\n<blockquote>\n<p>javax.net.ssl.SSLHandshakeException: connection closed</p>\n</blockquote>\n<p>We have the following code:</p>\n<pre><code>URL url = new URL(urlString);\nHttpsURLConnection connection = (HttpsURLConnection) url.openConnection();\nconnection.setRequestMethod(&quot;GET&quot;);\n\nSSLSocketFactory factory = connection.getSSLSocketFactory()\nString[] cipherSuites = factory.getSupportedCipherSuites();\nfor (String suite : cipherSuites) {\n    System.out.println(suite);\n}\n\nconnection.connect();\n</code></pre>\n<p>The SSLSocketFactory was added just to print the supported cipher suites. The output is:</p>\n<blockquote>\n<p>TLS_AES_128_GCM_SHA256<br />\nTLS_AES_256_GCM_SHA384<br />\nTLS_CHACHA20_POLY1305_SHA256<br />\nTLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256<br />\nTLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256<br />\nTLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384<br />\nTLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384<br />\nTLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256<br />\nTLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256<br />\nTLS_ECDHE_PSK_WITH_CHACHA20_POLY1305_SHA256<br />\nTLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA<br />\nTLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\nTLS_ECDHE_PSK_WITH_AES_128_CBC_SHA<br />\nTLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA<br />\nTLS_ECDHE_RSA_WITH_AES_256_CBC_SHA<br />\nTLS_ECDHE_PSK_WITH_AES_256_CBC_SHA<br />\nTLS_RSA_WITH_AES_128_GCM_SHA256\nTLS_RSA_WITH_AES_256_GCM_SHA384<br />\nTLS_RSA_WITH_AES_128_CBC_SHA<br />\nTLS_PSK_WITH_AES_128_CBC_SHA<br />\nTLS_RSA_WITH_AES_256_CBC_SHA<br />\nTLS_PSK_WITH_AES_256_CBC_SHA<br />\nSSL_RSA_WITH_3DES_EDE_CBC_SHA<br />\nTLS_EMPTY_RENEGOTIATION_INFO_SCSV<br />\nTLS_FALLBACK_SCSV</p>\n</blockquote>\n<p>So at least the first cipher, e.g. TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384 seems to be supported by both.</p>\n<p>The app for various historical reasons have sdk 28 as minimum and target sdk</p>\n<pre><code>minSdkVersion 28\ntargetSdkVersion 28\n</code></pre>\n<p>Why is the handshake not finding a common cipher?</p>\n"},{"tags":["java","spring-boot","header","postman","api-versioning"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1691827114,"post_id":76888083,"comment_id":135546549,"body_markdown":"If you format your question properly, someone is more likely to read it and try to answer your question.","body":"If you format your question properly, someone is more likely to read it and try to answer your question."}],"owner":{"account_id":29210328,"reputation":1,"user_id":22378447,"display_name":"Pooja B"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691860446,"creation_date":1691822580,"question_id":76888083,"body_markdown":"How to give multiple values to a controller for api versioning through header having same header name \r\n\r\n```lang-java\r\n@PostMapping(value = URL.ADD, headers = {&quot;X-API-VERSION=1.0&quot;, &quot;X-API-VERSION=2.0&quot;})\r\npublic int add(@RequestBody ProductVariant productVariant) {\r\n    int result = productVariantBo.add(productVariant);\r\n    return result;\r\n}\r\n```","title":"Api versioning through header having same header name","body":"<p>How to give multiple values to a controller for api versioning through header having same header name</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(value = URL.ADD, headers = {&quot;X-API-VERSION=1.0&quot;, &quot;X-API-VERSION=2.0&quot;})\npublic int add(@RequestBody ProductVariant productVariant) {\n    int result = productVariantBo.add(productVariant);\n    return result;\n}\n</code></pre>\n"},{"tags":["java","splash-screen"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1691915704,"post_id":76890340,"comment_id":135553363,"body_markdown":"The referenced answers all direct to creating a splash screen either using JWindow or an undecorated JFrame. As soon as you use setLocationRelativeTo(null) the window gets positioned in the center of the first screen. Problem solved.","body":"The referenced answers all direct to creating a splash screen either using JWindow or an undecorated JFrame. As soon as you use setLocationRelativeTo(null) the window gets positioned in the center of the first screen. Problem solved."}],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1691877117,"answer_count":0,"score":0,"last_activity_date":1691860226,"creation_date":1691860226,"question_id":76890340,"body_markdown":"I created a Java application that uses a [Splash Screen][1].\r\nNow this splash screen shows up in the center of the desktop. Unfortunately my desktop (and that of many other users) consists of two screen side by side. The window that renders in the center always is split between the two screens.\r\n\r\nHow can my application control where the Splash Screen will show up? Is there any way to change the default behaviour?\r\n\r\nOne idea would be to remember the position where the application window was used last time and center the splash screen there.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/SplashScreen.html","title":"Java Splash Screen Location","body":"<p>I created a Java application that uses a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/SplashScreen.html\" rel=\"nofollow noreferrer\">Splash Screen</a>.\nNow this splash screen shows up in the center of the desktop. Unfortunately my desktop (and that of many other users) consists of two screen side by side. The window that renders in the center always is split between the two screens.</p>\n<p>How can my application control where the Splash Screen will show up? Is there any way to change the default behaviour?</p>\n<p>One idea would be to remember the position where the application window was used last time and center the splash screen there.</p>\n"},{"tags":["java","android","environment-variables","environment"],"answers":[{"tags":[],"owner":{"account_id":21257490,"reputation":76,"user_id":15638753,"display_name":"ChrisMersi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680119146,"creation_date":1679577171,"answer_id":75823467,"question_id":75817154,"body_markdown":"Check this line carefully: ```PATH=&quot;/Users/name/Library/Android/sdk/tools/bin:$PATH}&quot;```\r\n\r\nYou are missing a left bracket, `&quot;{&quot;` after the dollar sign.","title":"&quot;Original error: Neither ANDROID_HOME nor ANDROID_SDK_ROOT environment variable was exported.&quot; Even when already set in ~/.zshrc","body":"<p>Check this line carefully: <code>PATH=&quot;/Users/name/Library/Android/sdk/tools/bin:$PATH}&quot;</code></p>\n<p>You are missing a left bracket, <code>&quot;{&quot;</code> after the dollar sign.</p>\n"}],"owner":{"account_id":13229300,"reputation":17,"user_id":9553478,"display_name":"K White"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":837,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691860175,"creation_date":1679518125,"question_id":75817154,"body_markdown":"I&#39;ve recently swapped from a macbook air to a mac pro(m1 chip, Ventura 13.2.1) for work. I never had any issues on the previous macbook with the same setup. After swapping over and doing my environment setups I&#39;m facing this issue:\r\n\r\nOriginal error: Neither ANDROID_HOME nor ANDROID_SDK_ROOT environment variable was exported.\r\n\r\nI&#39;ve set my ~/.zshrc up as\r\n```\r\n#JAVA_HOME\r\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_361.jdk/Contents/Home\r\n\r\n#ANDROID_HOME\r\nexport ANDROID_HOME=/Users/name/Library/Android/sdk\r\nPATH=&quot;/Users/name/Library/Android/sdk/tools:${PATH}&quot;\r\nPATH=&quot;/Users/name/Library/Android/sdk/tools/bin:$PATH}&quot;\r\nPATH=&quot;/Users/name/Library/Android/sdk/platform-tools:${PATH}&quot;\r\n```\r\nBoth return:\r\n[![Java_HOME and ANROID_HOME return][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/y3wom.png\r\n\r\nI also have them set the same way in appium GUI configs.\r\n\r\nI have no issues executing the web project, only our mobile. If I set ANDROID_HOME=/Users/name/Library/Android/sdk in the IDE, it works without issue. Why would this work when set in IDE but not work when set in my ~/.zshrc? Is something failing to source? There is no difference in the values. Alongside the loads of suggestions I tried from other threads here with no luck, I also tried swapping from zsh to bash and had the same issue when setting up in .bash_profile. Any advice would be much appreciated ","title":"&quot;Original error: Neither ANDROID_HOME nor ANDROID_SDK_ROOT environment variable was exported.&quot; Even when already set in ~/.zshrc","body":"<p>I've recently swapped from a macbook air to a mac pro(m1 chip, Ventura 13.2.1) for work. I never had any issues on the previous macbook with the same setup. After swapping over and doing my environment setups I'm facing this issue:</p>\n<p>Original error: Neither ANDROID_HOME nor ANDROID_SDK_ROOT environment variable was exported.</p>\n<p>I've set my ~/.zshrc up as</p>\n<pre><code>#JAVA_HOME\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_361.jdk/Contents/Home\n\n#ANDROID_HOME\nexport ANDROID_HOME=/Users/name/Library/Android/sdk\nPATH=&quot;/Users/name/Library/Android/sdk/tools:${PATH}&quot;\nPATH=&quot;/Users/name/Library/Android/sdk/tools/bin:$PATH}&quot;\nPATH=&quot;/Users/name/Library/Android/sdk/platform-tools:${PATH}&quot;\n</code></pre>\n<p>Both return:\n<a href=\"https://i.stack.imgur.com/y3wom.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y3wom.png\" alt=\"Java_HOME and ANROID_HOME return\" /></a></p>\n<p>I also have them set the same way in appium GUI configs.</p>\n<p>I have no issues executing the web project, only our mobile. If I set ANDROID_HOME=/Users/name/Library/Android/sdk in the IDE, it works without issue. Why would this work when set in IDE but not work when set in my ~/.zshrc? Is something failing to source? There is no difference in the values. Alongside the loads of suggestions I tried from other threads here with no luck, I also tried swapping from zsh to bash and had the same issue when setting up in .bash_profile. Any advice would be much appreciated</p>\n"},{"tags":["java","sql","hibernate","jpa","hibernate-mapping"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":0,"creation_date":1690213956,"post_id":76755668,"comment_id":135318807,"body_markdown":"2 question: *what exactly are you trying to do?* and *are you in control of the schema?* It seems that what you actually want is a `Person` base entity with 2 child entities, `Student` and `Faculty`. Do you really need to reflect this inheritance in the DB? If so and if you are in control of the schema, you can change the `is_faculty` to `person_type` and make it a discriminator column (see e.g. [this](https://stackoverflow.com/questions/4275517)). Also, I feel that `isFaculty` should not be part of the PK.","body":"2 question: <i>what exactly are you trying to do?</i> and <i>are you in control of the schema?</i> It seems that what you actually want is a <code>Person</code> base entity with 2 child entities, <code>Student</code> and <code>Faculty</code>. Do you really need to reflect this inheritance in the DB? If so and if you are in control of the schema, you can change the <code>is_faculty</code> to <code>person_type</code> and make it a discriminator column (see e.g. <a href=\"https://stackoverflow.com/questions/4275517\">this</a>). Also, I feel that <code>isFaculty</code> should not be part of the PK."},{"owner":{"account_id":26385561,"reputation":109,"user_id":20038123,"display_name":"Twisted Tea"},"score":0,"creation_date":1690219030,"post_id":76755668,"comment_id":135319813,"body_markdown":"@NikosParaskevopoulos Crap, that&#39;s right, `Student` and `Facility` are both child entities, I just forgot to add `extends Person` to `Faculty`. On that note, I am in control of the schema, but these tables are just simplified examples to reproduce my problem, and not my actual schema; in this case, `is_faculty` has to be part of the primary key.\n\nI think you may be onto something there with the discriminator + secondary table, I&#39;m gonna have to check that out. Thanks.","body":"@NikosParaskevopoulos Crap, that&#39;s right, <code>Student</code> and <code>Facility</code> are both child entities, I just forgot to add <code>extends Person</code> to <code>Faculty</code>. On that note, I am in control of the schema, but these tables are just simplified examples to reproduce my problem, and not my actual schema; in this case, <code>is_faculty</code> has to be part of the primary key.  I think you may be onto something there with the discriminator + secondary table, I&#39;m gonna have to check that out. Thanks."},{"owner":{"account_id":26385561,"reputation":109,"user_id":20038123,"display_name":"Twisted Tea"},"score":0,"creation_date":1690909179,"post_id":76755668,"comment_id":135417537,"body_markdown":"@NikosParaskevopoulos using `@SecondaryTable` and a discriminator column didn&#39;t work in this situation, since the discriminator column (`is_faculty`) is part of the composite key (`org.hibernate.AnnotationException: The &#39;@JoinColumn&#39; for a secondary table must reference the primary key`)","body":"@NikosParaskevopoulos using <code>@SecondaryTable</code> and a discriminator column didn&#39;t work in this situation, since the discriminator column (<code>is_faculty</code>) is part of the composite key (<code>org.hibernate.AnnotationException: The &#39;@JoinColumn&#39; for a secondary table must reference the primary key</code>)"},{"owner":{"account_id":20251935,"reputation":6409,"user_id":14852784,"display_name":"J. M. Arnold"},"score":0,"creation_date":1691400107,"post_id":76755668,"comment_id":135481205,"body_markdown":"@TwistedTea Are you able to change the primary key structure? I.e. just a single attribute like an Id? You still could use `is_faculty` as discriminator. E.g.  `@Inheritance(strategy=InheritanceType.SINGLE_TABLE)` and `@DiscriminatorColumn(name=&quot;is_faculty&quot;, discriminatorType=DiscriminatorType.BOOLEAN)` on the `Person` entity.\nIf that suits you, I might be able to write an answer :)","body":"@TwistedTea Are you able to change the primary key structure? I.e. just a single attribute like an Id? You still could use <code>is_faculty</code> as discriminator. E.g.  <code>@Inheritance(strategy=InheritanceType.SINGLE_TABLE)</code> and <code>@DiscriminatorColumn(name=&quot;is_faculty&quot;, discriminatorType=DiscriminatorType.BOOLEAN)</code> on the <code>Person</code> entity. If that suits you, I might be able to write an answer :)"},{"owner":{"account_id":26385561,"reputation":109,"user_id":20038123,"display_name":"Twisted Tea"},"score":0,"creation_date":1691410290,"post_id":76755668,"comment_id":135483251,"body_markdown":"@J.M.Arnold sorry, a single primary key just doesn’t make sense in my exact situation. the discriminator needs to be part of the composite primary key in the parent table.","body":"@J.M.Arnold sorry, a single primary key just doesn’t make sense in my exact situation. the discriminator needs to be part of the composite primary key in the parent table."}],"answers":[{"tags":[],"owner":{"account_id":13177148,"reputation":8757,"user_id":9517769,"display_name":"Amira Bedhiafi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691860036,"creation_date":1691843745,"answer_id":76889291,"question_id":76755668,"body_markdown":"If the discriminator must be part of the composite primary key, then your initial workaround is a reasonable approach given the constraints of Hibernate and SQL. You can add the `is_faculty` column to both the `student` and `faculty` tables, and ensure that they are set to `true` or `false` accordingly. \r\n\r\nYou may still encapsulate this logic within your application, ensuring that the column is managed transparently and the correct value is always used:\r\n```java\r\n@Entity\r\n@Table(name = &quot;student&quot;)\r\n@PrimaryKeyJoinColumns({\r\n\t@PrimaryKeyJoinColumn(name = &quot;name&quot;, referencedColumnName = &quot;name&quot;),\r\n\t@PrimaryKeyJoinColumn(name = &quot;address&quot;, referencedColumnName = &quot;address&quot;),\r\n\t@PrimaryKeyJoinColumn(name = &quot;is_faculty&quot;, referencedColumnName = &quot;is_faculty&quot;),\r\n})\r\npublic class Student extends Person {\r\n\r\n    @Column(name = &quot;current_grade&quot;)\r\n    private int currentGrade;\r\n\r\n    @Column(name = &quot;is_faculty&quot;, nullable = false, insertable = false, updatable = false)\r\n    private boolean isFaculty = false;\r\n\r\n    // Constructors, getters, setters, etc.\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;faculty&quot;)\r\n@PrimaryKeyJoinColumns({\r\n\t@PrimaryKeyJoinColumn(name = &quot;name&quot;, referencedColumnName = &quot;name&quot;),\r\n\t@PrimaryKeyJoinColumn(name = &quot;address&quot;, referencedColumnName = &quot;address&quot;),\r\n\t@PrimaryKeyJoinColumn(name = &quot;is_faculty&quot;, referencedColumnName = &quot;is_faculty&quot;),\r\n})\r\npublic class Faculty extends Person {\r\n\r\n    @Column(name = &quot;department&quot;, length = 2)\r\n    private String department;\r\n\r\n    @Column(name = &quot;is_faculty&quot;, nullable = false, insertable = false, updatable = false)\r\n    private boolean isFaculty = true;\r\n\r\n    // Constructors, getters, setters, etc.\r\n}\r\n```\r\n\r\nThe `insertable = false, updatable = false` attributes make it clear that the application will not directly modify these values, and you can set the values in your constructors or setters, as needed.\r\n\r\n","title":"Table Per Type - Making a Custom Join Formula in Hibernate / JPA?","body":"<p>If the discriminator must be part of the composite primary key, then your initial workaround is a reasonable approach given the constraints of Hibernate and SQL. You can add the <code>is_faculty</code> column to both the <code>student</code> and <code>faculty</code> tables, and ensure that they are set to <code>true</code> or <code>false</code> accordingly.</p>\n<p>You may still encapsulate this logic within your application, ensuring that the column is managed transparently and the correct value is always used:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;student&quot;)\n@PrimaryKeyJoinColumns({\n    @PrimaryKeyJoinColumn(name = &quot;name&quot;, referencedColumnName = &quot;name&quot;),\n    @PrimaryKeyJoinColumn(name = &quot;address&quot;, referencedColumnName = &quot;address&quot;),\n    @PrimaryKeyJoinColumn(name = &quot;is_faculty&quot;, referencedColumnName = &quot;is_faculty&quot;),\n})\npublic class Student extends Person {\n\n    @Column(name = &quot;current_grade&quot;)\n    private int currentGrade;\n\n    @Column(name = &quot;is_faculty&quot;, nullable = false, insertable = false, updatable = false)\n    private boolean isFaculty = false;\n\n    // Constructors, getters, setters, etc.\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;faculty&quot;)\n@PrimaryKeyJoinColumns({\n    @PrimaryKeyJoinColumn(name = &quot;name&quot;, referencedColumnName = &quot;name&quot;),\n    @PrimaryKeyJoinColumn(name = &quot;address&quot;, referencedColumnName = &quot;address&quot;),\n    @PrimaryKeyJoinColumn(name = &quot;is_faculty&quot;, referencedColumnName = &quot;is_faculty&quot;),\n})\npublic class Faculty extends Person {\n\n    @Column(name = &quot;department&quot;, length = 2)\n    private String department;\n\n    @Column(name = &quot;is_faculty&quot;, nullable = false, insertable = false, updatable = false)\n    private boolean isFaculty = true;\n\n    // Constructors, getters, setters, etc.\n}\n</code></pre>\n<p>The <code>insertable = false, updatable = false</code> attributes make it clear that the application will not directly modify these values, and you can set the values in your constructors or setters, as needed.</p>\n"}],"owner":{"account_id":26385561,"reputation":109,"user_id":20038123,"display_name":"Twisted Tea"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":307,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691860036,"creation_date":1690210533,"question_id":76755668,"body_markdown":"Consider the following SQL tables using a Table Per Type inheritance pattern:\r\n\r\n```sql\r\nCREATE TABLE person (\r\n  name VARCHAR(50),\r\n  address VARCHAR(50),\r\n  is_faculty BOOLEAN,\r\n  age SMALLINT NOT NULL,\r\n\r\n  PRIMARY KEY(name, address, is_faculty)\r\n);\r\n\r\nCREATE TABLE student (\r\n  name VARCHAR(50),\r\n  address VARCHAR(50),\r\n  current_grade SMALLINT,\r\n\r\n  PRIMARY KEY(name, address)\r\n);\r\n\r\nCREATE TABLE faculty (\r\n  name VARCHAR(50),\r\n  address VARCHAR(50),\r\n  department VARCHAR(2)\r\n\r\n  PRIMARY KEY(name, address)\r\n);\r\n```\r\n\r\nObviously the idea here is that if, for example, I wanted to get a faculty member, I&#39;d use the following join formula:\r\n\r\n```sql\r\nSELECT *\r\n  FROM person\r\n  INNER JOIN faculty\r\n    ON person.name = faculty.name\r\n    AND person.address = faculty.address\r\n    AND person.is_faculty = true;\r\n```\r\n\r\nNow consider the following Hibernate entities representing said tables:\r\n\r\n```java\r\nimport javax.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;person&quot;)\r\n@IdClass(PersonId.class)\r\n@Inheritance(strategy = InheritanceType.JOINED)\r\npublic class Person {\r\n    @Id\r\n    @Column(name = &quot;name&quot;, length = 50)\r\n    private String name;\r\n\r\n    @Id\r\n    @Column(name = &quot;address&quot;, length = 50)\r\n    private String address;\r\n\r\n    @Id\r\n    @Column(name = &quot;is_faculty&quot;)\r\n    private boolean isFaculty;\r\n\r\n    @Column(name = &quot;age&quot;, nullable = false)\r\n    private int age;\r\n\r\n    // Constructors, getters, setters, etc.\r\n}\r\n```\r\n```java\r\nimport java.io.Serializable;\r\nimport java.util.Objects;\r\n\r\npublic class PersonId implements Serializable {\r\n    private String name;\r\n    private String address;\r\n    private boolean isFaculty;\r\n\r\n    // Constructors, getters, setters, hashCode, equals, etc.\r\n}\r\n```\r\n```java\r\nimport javax.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;student&quot;)\r\n@PrimaryKeyJoinColumns({\r\n\t@PrimaryKeyJoinColumn(name = &quot;name&quot;, referencedColumnName = &quot;name&quot;),\r\n\t@PrimaryKeyJoinColumn(name = &quot;address&quot;, referencedColumnName = &quot;address&quot;),\r\n\t@PrimaryKeyJoinColumn(name = &quot;is_faculty&quot;, referencedColumnName = &quot;is_faculty&quot;),\r\n})\r\npublic class Student extends Person {\r\n    @Column(name = &quot;current_grade&quot;)\r\n    private int currentGrade;\r\n\r\n    // Constructors, getters, setters, etc.\r\n}\r\n```\r\n```java\r\nimport javax.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;faculty&quot;)\r\n@PrimaryKeyJoinColumns({\r\n\t@PrimaryKeyJoinColumn(name = &quot;name&quot;, referencedColumnName = &quot;name&quot;),\r\n\t@PrimaryKeyJoinColumn(name = &quot;address&quot;, referencedColumnName = &quot;address&quot;),\r\n\t@PrimaryKeyJoinColumn(name = &quot;is_faculty&quot;, referencedColumnName = &quot;is_faculty&quot;),\r\n})\r\npublic class Faculty extends Person {\r\n    @Column(name = &quot;department&quot;, length = 2)\r\n    private String department;\r\n\r\n    // Constructors, getters, setters, etc.\r\n}\r\n```\r\n\r\nThere&#39;s a clear problem here however; the `faculty` and `student` tables have no `is_faculty` column. But we still need to join on either `true` or `false` for `is_faculty`, as shown in the SELECT statement above.\r\n\r\nNormally, this would be solved by using `@JoinColumnsOrFormulas` / `@JoinColumnOrFormula` with `@JoinFormula` and `@JoinColumn` if this weren&#39;t an inheritance based join. However, to my knowledge no such alternative exists, such as `@PrimaryKeyJoinColumnsOrFormulas`.\r\n\r\nMy workaround so far has been to just add an `is_faculty` column to the `faculty` and `student` tables, so that both tables share the exact same composite PK columns (letting Hibernate join them using `PersonId`).","title":"Table Per Type - Making a Custom Join Formula in Hibernate / JPA?","body":"<p>Consider the following SQL tables using a Table Per Type inheritance pattern:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE person (\n  name VARCHAR(50),\n  address VARCHAR(50),\n  is_faculty BOOLEAN,\n  age SMALLINT NOT NULL,\n\n  PRIMARY KEY(name, address, is_faculty)\n);\n\nCREATE TABLE student (\n  name VARCHAR(50),\n  address VARCHAR(50),\n  current_grade SMALLINT,\n\n  PRIMARY KEY(name, address)\n);\n\nCREATE TABLE faculty (\n  name VARCHAR(50),\n  address VARCHAR(50),\n  department VARCHAR(2)\n\n  PRIMARY KEY(name, address)\n);\n</code></pre>\n<p>Obviously the idea here is that if, for example, I wanted to get a faculty member, I'd use the following join formula:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\n  FROM person\n  INNER JOIN faculty\n    ON person.name = faculty.name\n    AND person.address = faculty.address\n    AND person.is_faculty = true;\n</code></pre>\n<p>Now consider the following Hibernate entities representing said tables:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.*;\n\n@Entity\n@Table(name = &quot;person&quot;)\n@IdClass(PersonId.class)\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class Person {\n    @Id\n    @Column(name = &quot;name&quot;, length = 50)\n    private String name;\n\n    @Id\n    @Column(name = &quot;address&quot;, length = 50)\n    private String address;\n\n    @Id\n    @Column(name = &quot;is_faculty&quot;)\n    private boolean isFaculty;\n\n    @Column(name = &quot;age&quot;, nullable = false)\n    private int age;\n\n    // Constructors, getters, setters, etc.\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.Serializable;\nimport java.util.Objects;\n\npublic class PersonId implements Serializable {\n    private String name;\n    private String address;\n    private boolean isFaculty;\n\n    // Constructors, getters, setters, hashCode, equals, etc.\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.*;\n\n@Entity\n@Table(name = &quot;student&quot;)\n@PrimaryKeyJoinColumns({\n    @PrimaryKeyJoinColumn(name = &quot;name&quot;, referencedColumnName = &quot;name&quot;),\n    @PrimaryKeyJoinColumn(name = &quot;address&quot;, referencedColumnName = &quot;address&quot;),\n    @PrimaryKeyJoinColumn(name = &quot;is_faculty&quot;, referencedColumnName = &quot;is_faculty&quot;),\n})\npublic class Student extends Person {\n    @Column(name = &quot;current_grade&quot;)\n    private int currentGrade;\n\n    // Constructors, getters, setters, etc.\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.*;\n\n@Entity\n@Table(name = &quot;faculty&quot;)\n@PrimaryKeyJoinColumns({\n    @PrimaryKeyJoinColumn(name = &quot;name&quot;, referencedColumnName = &quot;name&quot;),\n    @PrimaryKeyJoinColumn(name = &quot;address&quot;, referencedColumnName = &quot;address&quot;),\n    @PrimaryKeyJoinColumn(name = &quot;is_faculty&quot;, referencedColumnName = &quot;is_faculty&quot;),\n})\npublic class Faculty extends Person {\n    @Column(name = &quot;department&quot;, length = 2)\n    private String department;\n\n    // Constructors, getters, setters, etc.\n}\n</code></pre>\n<p>There's a clear problem here however; the <code>faculty</code> and <code>student</code> tables have no <code>is_faculty</code> column. But we still need to join on either <code>true</code> or <code>false</code> for <code>is_faculty</code>, as shown in the SELECT statement above.</p>\n<p>Normally, this would be solved by using <code>@JoinColumnsOrFormulas</code> / <code>@JoinColumnOrFormula</code> with <code>@JoinFormula</code> and <code>@JoinColumn</code> if this weren't an inheritance based join. However, to my knowledge no such alternative exists, such as <code>@PrimaryKeyJoinColumnsOrFormulas</code>.</p>\n<p>My workaround so far has been to just add an <code>is_faculty</code> column to the <code>faculty</code> and <code>student</code> tables, so that both tables share the exact same composite PK columns (letting Hibernate join them using <code>PersonId</code>).</p>\n"},{"tags":["java","javafx","scroll","mouse"],"comments":[{"owner":{"account_id":7882188,"reputation":1056,"user_id":5955739,"display_name":"lambad"},"score":0,"creation_date":1498642541,"post_id":44797039,"comment_id":76577633,"body_markdown":"I tried the code you provided and it ran successfully without crashing. When the mouse is at the border line then you can see scrolling. Can you point me to the code where you tried to loop the process .. Also provide the exception stack trace you got. .","body":"I tried the code you provided and it ran successfully without crashing. When the mouse is at the border line then you can see scrolling. Can you point me to the code where you tried to loop the process .. Also provide the exception stack trace you got. ."},{"owner":{"account_id":11210511,"reputation":1,"user_id":8224701,"display_name":"Amaury Tricquet"},"score":0,"creation_date":1498654895,"post_id":44797039,"comment_id":76586341,"body_markdown":"Thanks for your interest\nI edited the thing with more detail","body":"Thanks for your interest I edited the thing with more detail"}],"answers":[{"tags":[],"owner":{"account_id":11165575,"reputation":9,"user_id":8194365,"display_name":"SpoonDog"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1498659292,"creation_date":1498659292,"answer_id":44805047,"question_id":44797039,"body_markdown":"I too tried your code and it seemed to run fine. You could try putting it into a new file and rerunning it to &quot;reset the file paths&quot;. Interesting that you got no stack trace. That tells me it could be a memory leak problem with your loop. If you are using NetBeans, you could try installing NetBeans: StatusLine Memory Usage to see if your while loop is running infinitely. Alternatively you could output some text every loop to see how many times it is running through. \r\n\r\nIf it does end up being a memory problem with your loop, try to create a set of circumstances where it only enters the loop when an action is performed, and then exits after an action is performed. Hope this helps. ","title":"Java fx 2D scrolling game","body":"<p>I too tried your code and it seemed to run fine. You could try putting it into a new file and rerunning it to \"reset the file paths\". Interesting that you got no stack trace. That tells me it could be a memory leak problem with your loop. If you are using NetBeans, you could try installing NetBeans: StatusLine Memory Usage to see if your while loop is running infinitely. Alternatively you could output some text every loop to see how many times it is running through. </p>\n\n<p>If it does end up being a memory problem with your loop, try to create a set of circumstances where it only enters the loop when an action is performed, and then exits after an action is performed. Hope this helps. </p>\n"}],"owner":{"account_id":11210511,"reputation":1,"user_id":8224701,"display_name":"Amaury Tricquet"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":776,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691859727,"creation_date":1498637566,"question_id":44797039,"body_markdown":"I want to create a 2D game using java fx but I have an issue trying to make scrolling work when the mouse approaches the edge of the screen because it works for when the mouse enters the border I defined but when I try to loop that process to make it work until the mouse comes out of the border it just crashes the app. \r\nThe scrolling system I want to end up with is more or less like in strategy games like warcraft or Empire earth etc...\r\nhere is the code I work with:\r\n\r\n    import javafx.application.Application;\r\n    import static javafx.application.Application.launch;\r\n    import javax.swing.JScrollPane;\r\n    import javafx.event.ActionEvent;\r\n    import javafx.event.EventHandler;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.ScrollPane;\r\n    import javafx.scene.image.Image;\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.scene.input.KeyCode;\r\n    import javafx.scene.input.MouseEvent;\r\n    import javafx.scene.input.ScrollEvent;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.stage.Stage;\r\n\r\n    /** Constructs a scene with a pannable Map background. */\r\n    public class PannableView extends Application {\r\n     private Image backgroundImage;\r\n  \r\n    @Override public void init() {\r\n    backgroundImage = new Image(&quot;http://www.narniaweb.com/wp-content/uploads/2009/08/NarniaMap.jpg&quot;);\r\n     }\r\n  \r\n    @Override public void start(Stage stage) {\r\n    stage.setTitle(&quot;Drag the mouse to pan the map&quot;);\r\n    \r\n    // construct the scene contents over a stacked background.\r\n    StackPane layout = new StackPane();\r\n    layout.getChildren().setAll(\r\n      new ImageView(backgroundImage),\r\n      createKillButton()\r\n    );\r\n\r\n    // wrap the scene contents in a pannable scroll pane.\r\n    ScrollPane scroll = createScrollPane(layout);\r\n    \r\n    // show the scene.\r\n    Scene scene = new Scene(scroll);\r\n    stage.setScene(scene);\r\n    stage.show();\r\n    scroll.setOnMouseMoved(e-&gt;{\r\n    \t/*\r\n\t\t * screen movement\r\n\t\t * if cursor close to border:\r\n\t\t * \tdetect which border and move in consequences\r\n\t\t */\r\n    \r\n    int marge = 10;\r\n\t\t\r\n\t\t//TODO make camera move\r\n\t\t//left top corner\r\n\t\tif(marge &gt; e.getX() &amp;&amp; marge &gt; e.getY()){\r\n\t\t\tscroll.setVvalue(scroll.getVvalue() -0.001);\r\n\t\t\tscroll.setHvalue(scroll.getHvalue() -0.001);\r\n\t\t}//left bottom corner\r\n\t\telse if(marge &gt; e.getX() &amp;&amp; scroll.getHeight()-marge &lt; e.getY()){\r\n\t\t\tscroll.setVvalue(scroll.getVvalue() +0.001);\r\n\t\t\tscroll.setHvalue(scroll.getHvalue() -0.001);\r\n\t\t}//right top corner\r\n\t\telse if(scroll.getWidth()-marge &lt; e.getX() &amp;&amp; marge &gt; e.getY()){\r\n\t\t\tscroll.setVvalue(scroll.getVvalue() -0.001);\r\n\t\t\tscroll.setHvalue(scroll.getHvalue() +0.001);\r\n\t\t}//right bottom corner\r\n\t\telse if(scroll.getWidth()-marge &lt; e.getX() &amp;&amp; scroll.getHeight()-marge &lt; e.getY() ){\r\n\t\t\tscroll.setVvalue(scroll.getVvalue() +0.001);\r\n\t\t\tscroll.setHvalue(scroll.getHvalue() +0.001);\r\n\t\t}//top\r\n\t\telse if(marge &gt; e.getY()){\r\n\t\t\tscroll.setVvalue(scroll.getVvalue() -0.001);\r\n\t\t}//right\r\n\t\telse if(scroll.getWidth()-marge &lt; e.getX()){\r\n\t\t\tscroll.setHvalue(scroll.getHvalue() +0.001);\r\n\t\t}//bottom\r\n\t\telse if(scroll.getHeight()-marge &lt; e.getY()){\r\n\t\t\tscroll.setVvalue(scroll.getVvalue() +0.001);\r\n\t\t}//left\r\n\t\telse if(marge &gt; e.getX()){\r\n\t\t\tscroll.setHvalue(scroll.getHvalue() -0.001);\r\n\t\t}\r\n    \t\r\n    \t\r\n    });\r\n    // bind the preferred size of the scroll area to the size of the scene.\r\n    scroll.prefWidthProperty().bind(scene.widthProperty());\r\n    scroll.prefHeightProperty().bind(scene.widthProperty());\r\n    \r\n    // center the scroll contents.\r\n    scroll.setHvalue(scroll.getHmin() + (scroll.getHmax() - scroll.getHmin()) / 2);\r\n    scroll.setVvalue(scroll.getVmin() + (scroll.getVmax() - scroll.getVmin()) / 2);\r\n    }\r\n  \r\n    /** @return a control to place on the scene. */\r\n    private Button createKillButton() {\r\n    final Button killButton = new Button(&quot;Kill the evil witch&quot;);\r\n    killButton.setStyle(&quot;-fx-base: firebrick;&quot;);\r\n    killButton.setTranslateX(65);\r\n    killButton.setTranslateY(-130);\r\n    killButton.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\r\n      @Override public void handle(ActionEvent t) {\r\n        killButton.setStyle(&quot;-fx-base: forestgreen;&quot;);\r\n        killButton.setText(&quot;Ding-Dong! The Witch is Dead&quot;);\r\n      }\r\n    });\r\n    return killButton;\r\n    }\r\n\r\n    /** @return a ScrollPane which scrolls the layout. */\r\n    private ScrollPane createScrollPane(Pane layout) {\r\n    ScrollPane scroll = new ScrollPane();\r\n    scroll.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\r\n    scroll.setVbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\r\n    scroll.setPannable(true);\r\n    scroll.setPrefSize(800, 600);\r\n    scroll.setContent(layout);\r\n    return scroll;\r\n    }\r\n  \r\n  \r\n    public static void main(String[] args) { launch(args); }  \r\n    }\r\n\r\nI hope someone can help me with it thanks!\r\n\r\nhere is the part I try to loop:\r\n  \r\n\r\n    if(marge &gt; e.getX() &amp;&amp; marge &gt; e.getY()){\r\n        scroll.setVvalue(scroll.getVvalue() -0.001);\r\n        scroll.setHvalue(scroll.getHvalue() -0.001);\r\n    }//left bottom corner\r\n    else if(marge &gt; e.getX() &amp;&amp; scroll.getHeight()-marge &lt; e.getY()){\r\n        scroll.setVvalue(scroll.getVvalue() +0.001);\r\n        scroll.setHvalue(scroll.getHvalue() -0.001);\r\n    }//right top corner\r\n    else if(scroll.getWidth()-marge &lt; e.getX() &amp;&amp; marge &gt; e.getY()){\r\n        scroll.setVvalue(scroll.getVvalue() -0.001);\r\n        scroll.setHvalue(scroll.getHvalue() +0.001);\r\n    }//right bottom corner\r\n    else if(scroll.getWidth()-marge &lt; e.getX() &amp;&amp; scroll.getHeight()-marge &lt; e.getY() ){\r\n        scroll.setVvalue(scroll.getVvalue() +0.001);\r\n        scroll.setHvalue(scroll.getHvalue() +0.001);\r\n    }//top\r\n    else if(marge &gt; e.getY()){\r\n        scroll.setVvalue(scroll.getVvalue() -0.001);\r\n    }//right\r\n    else if(scroll.getWidth()-marge &lt; e.getX()){\r\n        scroll.setHvalue(scroll.getHvalue() +0.001);\r\n    }//bottom\r\n    else if(scroll.getHeight()-marge &lt; e.getY()){\r\n        scroll.setVvalue(scroll.getVvalue() +0.001);\r\n    }//left\r\n    else if(marge &gt; e.getX()){\r\n        scroll.setHvalue(scroll.getHvalue() -0.001);\r\n    }\r\n\r\nI tried a while loop but I simply get the app crashing without any java exception on console it simply stopped working.","title":"Java fx 2D scrolling game","body":"<p>I want to create a 2D game using java fx but I have an issue trying to make scrolling work when the mouse approaches the edge of the screen because it works for when the mouse enters the border I defined but when I try to loop that process to make it work until the mouse comes out of the border it just crashes the app.\nThe scrolling system I want to end up with is more or less like in strategy games like warcraft or Empire earth etc...\nhere is the code I work with:</p>\n<pre><code>import javafx.application.Application;\nimport static javafx.application.Application.launch;\nimport javax.swing.JScrollPane;\nimport javafx.event.ActionEvent;\nimport javafx.event.EventHandler;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ScrollPane;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.input.KeyCode;\nimport javafx.scene.input.MouseEvent;\nimport javafx.scene.input.ScrollEvent;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\n\n/** Constructs a scene with a pannable Map background. */\npublic class PannableView extends Application {\n private Image backgroundImage;\n\n@Override public void init() {\nbackgroundImage = new Image(&quot;http://www.narniaweb.com/wp-content/uploads/2009/08/NarniaMap.jpg&quot;);\n }\n\n@Override public void start(Stage stage) {\nstage.setTitle(&quot;Drag the mouse to pan the map&quot;);\n\n// construct the scene contents over a stacked background.\nStackPane layout = new StackPane();\nlayout.getChildren().setAll(\n  new ImageView(backgroundImage),\n  createKillButton()\n);\n\n// wrap the scene contents in a pannable scroll pane.\nScrollPane scroll = createScrollPane(layout);\n\n// show the scene.\nScene scene = new Scene(scroll);\nstage.setScene(scene);\nstage.show();\nscroll.setOnMouseMoved(e-&gt;{\n    /*\n     * screen movement\n     * if cursor close to border:\n     *  detect which border and move in consequences\n     */\n\nint marge = 10;\n    \n    //TODO make camera move\n    //left top corner\n    if(marge &gt; e.getX() &amp;&amp; marge &gt; e.getY()){\n        scroll.setVvalue(scroll.getVvalue() -0.001);\n        scroll.setHvalue(scroll.getHvalue() -0.001);\n    }//left bottom corner\n    else if(marge &gt; e.getX() &amp;&amp; scroll.getHeight()-marge &lt; e.getY()){\n        scroll.setVvalue(scroll.getVvalue() +0.001);\n        scroll.setHvalue(scroll.getHvalue() -0.001);\n    }//right top corner\n    else if(scroll.getWidth()-marge &lt; e.getX() &amp;&amp; marge &gt; e.getY()){\n        scroll.setVvalue(scroll.getVvalue() -0.001);\n        scroll.setHvalue(scroll.getHvalue() +0.001);\n    }//right bottom corner\n    else if(scroll.getWidth()-marge &lt; e.getX() &amp;&amp; scroll.getHeight()-marge &lt; e.getY() ){\n        scroll.setVvalue(scroll.getVvalue() +0.001);\n        scroll.setHvalue(scroll.getHvalue() +0.001);\n    }//top\n    else if(marge &gt; e.getY()){\n        scroll.setVvalue(scroll.getVvalue() -0.001);\n    }//right\n    else if(scroll.getWidth()-marge &lt; e.getX()){\n        scroll.setHvalue(scroll.getHvalue() +0.001);\n    }//bottom\n    else if(scroll.getHeight()-marge &lt; e.getY()){\n        scroll.setVvalue(scroll.getVvalue() +0.001);\n    }//left\n    else if(marge &gt; e.getX()){\n        scroll.setHvalue(scroll.getHvalue() -0.001);\n    }\n    \n    \n});\n// bind the preferred size of the scroll area to the size of the scene.\nscroll.prefWidthProperty().bind(scene.widthProperty());\nscroll.prefHeightProperty().bind(scene.widthProperty());\n\n// center the scroll contents.\nscroll.setHvalue(scroll.getHmin() + (scroll.getHmax() - scroll.getHmin()) / 2);\nscroll.setVvalue(scroll.getVmin() + (scroll.getVmax() - scroll.getVmin()) / 2);\n}\n\n/** @return a control to place on the scene. */\nprivate Button createKillButton() {\nfinal Button killButton = new Button(&quot;Kill the evil witch&quot;);\nkillButton.setStyle(&quot;-fx-base: firebrick;&quot;);\nkillButton.setTranslateX(65);\nkillButton.setTranslateY(-130);\nkillButton.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n  @Override public void handle(ActionEvent t) {\n    killButton.setStyle(&quot;-fx-base: forestgreen;&quot;);\n    killButton.setText(&quot;Ding-Dong! The Witch is Dead&quot;);\n  }\n});\nreturn killButton;\n}\n\n/** @return a ScrollPane which scrolls the layout. */\nprivate ScrollPane createScrollPane(Pane layout) {\nScrollPane scroll = new ScrollPane();\nscroll.setHbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\nscroll.setVbarPolicy(ScrollPane.ScrollBarPolicy.NEVER);\nscroll.setPannable(true);\nscroll.setPrefSize(800, 600);\nscroll.setContent(layout);\nreturn scroll;\n}\n\n\npublic static void main(String[] args) { launch(args); }  \n}\n</code></pre>\n<p>I hope someone can help me with it thanks!</p>\n<p>here is the part I try to loop:</p>\n<pre><code>if(marge &gt; e.getX() &amp;&amp; marge &gt; e.getY()){\n    scroll.setVvalue(scroll.getVvalue() -0.001);\n    scroll.setHvalue(scroll.getHvalue() -0.001);\n}//left bottom corner\nelse if(marge &gt; e.getX() &amp;&amp; scroll.getHeight()-marge &lt; e.getY()){\n    scroll.setVvalue(scroll.getVvalue() +0.001);\n    scroll.setHvalue(scroll.getHvalue() -0.001);\n}//right top corner\nelse if(scroll.getWidth()-marge &lt; e.getX() &amp;&amp; marge &gt; e.getY()){\n    scroll.setVvalue(scroll.getVvalue() -0.001);\n    scroll.setHvalue(scroll.getHvalue() +0.001);\n}//right bottom corner\nelse if(scroll.getWidth()-marge &lt; e.getX() &amp;&amp; scroll.getHeight()-marge &lt; e.getY() ){\n    scroll.setVvalue(scroll.getVvalue() +0.001);\n    scroll.setHvalue(scroll.getHvalue() +0.001);\n}//top\nelse if(marge &gt; e.getY()){\n    scroll.setVvalue(scroll.getVvalue() -0.001);\n}//right\nelse if(scroll.getWidth()-marge &lt; e.getX()){\n    scroll.setHvalue(scroll.getHvalue() +0.001);\n}//bottom\nelse if(scroll.getHeight()-marge &lt; e.getY()){\n    scroll.setVvalue(scroll.getVvalue() +0.001);\n}//left\nelse if(marge &gt; e.getX()){\n    scroll.setHvalue(scroll.getHvalue() -0.001);\n}\n</code></pre>\n<p>I tried a while loop but I simply get the app crashing without any java exception on console it simply stopped working.</p>\n"},{"tags":["java","google-apps-script","google-sheets","cell","simple-form"],"answers":[{"tags":[],"owner":{"account_id":9729507,"reputation":61490,"user_id":7215091,"accept_rate":71,"display_name":"Cooper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691857600,"creation_date":1691856461,"answer_id":76890111,"question_id":76889815,"body_markdown":"    function deleteOldRows() {\r\n      const ss = SpreadsheetApp.getActive();\r\n      const sh = ss.getSheetByName(&quot;Sheet0&quot;);\r\n      const [hA, ...vs] = sh.getDataRange().getValues();\r\n      const dtv = new Date().valueOf();\r\n      let idx = {};\r\n      let d = 0;\r\n      hA.forEach((h, i) =&gt; idx[h] = i);\r\n      vs.forEach((r, i) =&gt; {\r\n        let dv = new Date(r[idx[&quot;COL1&quot;]]).valueOf();\r\n        if (dv &lt; dtv) { // if you only want a specific date change &lt; to  ==\r\n          sh.deleteRow(i + 2 - d++)\r\n        }\r\n      })\r\n    }\r\n\r\nStart Data:\r\n\r\n||A|B|C|D|E|\r\n|:---:|:---|:---|:---|:---|:---|\r\n|1|COL1|COL2|COL3|COL4|COL5|\r\n|2|8/1/2023|21|14|2|24|\r\n|3|8/2/2023|21|20|21|24|\r\n|4|8/3/2023|17|22|23|5|\r\n|5|8/4/2023|5|24|9|23|\r\n|6|8/5/2023|16|3|23|14|\r\n|7|8/6/2023|12|8|16|7|\r\n|8|8/7/2023|21|20|14|17|\r\n|9|8/8/2023|18|8|7|24|\r\n|10|8/9/2023|19|19|18|16|\r\n|11|8/10/2023|22|22|4|19|\r\n|12|8/11/2023|2|16|18|1|\r\n|13|8/12/2023|16|8|3|20|\r\n|14|8/13/2023|5|1|15|21|\r\n|15|8/14/2023|11|11|13|15|\r\n|16|8/15/2023|22|13|3|6|\r\n|17|8/16/2023|20|6|19|1|\r\n|18|8/17/2023|7|20|5|24|\r\n|19|8/18/2023|5|8|18|6|\r\n|20|8/19/2023|4|13|12|21|\r\n|21|8/20/2023|10|7|17|14|\r\n|22|8/21/2023|11|6|11|11|\r\n|23|8/22/2023|21|13|7|8|\r\n|24|8/23/2023|9|17|21|21|\r\n|25|8/24/2023|15|0|17|23|\r\n|26|8/25/2023|12|17|21|10|\r\n\r\nEnd Data:\r\n\r\n||A|B|C|D|E|\r\n|:---:|:---|:---|:---|:---|:---|\r\n|1|COL1|COL2|COL3|COL4|COL5|\r\n|2|8/13/2023|5|1|15|21|\r\n|3|8/14/2023|11|11|13|15|\r\n|4|8/15/2023|22|13|3|6|\r\n|5|8/16/2023|20|6|19|1|\r\n|6|8/17/2023|7|20|5|24|\r\n|7|8/18/2023|5|8|18|6|\r\n|8|8/19/2023|4|13|12|21|\r\n|9|8/20/2023|10|7|17|14|\r\n|10|8/21/2023|11|6|11|11|\r\n|11|8/22/2023|21|13|7|8|\r\n|12|8/23/2023|9|17|21|21|\r\n|13|8/24/2023|15|0|17|23|\r\n|14|8/25/2023|12|17|21|10|\r\n\r\nIf you wish to keep today, you can do this:\r\n\r\n    function deleteOldRows() {\r\n      const ss = SpreadsheetApp.getActive();\r\n      const sh = ss.getSheetByName(&quot;Sheet0&quot;);\r\n      const [hA, ...vs] = sh.getDataRange().getValues();\r\n      let dt = new Date();\r\n      const dtv = new Date(dt.getFullYear(),dt.getMonth(),dt.getDate()).valueOf();\r\n      let idx = {};\r\n      let d = 0;\r\n      hA.forEach((h, i) =&gt; idx[h] = i);\r\n      vs.forEach((r, i) =&gt; {\r\n        let dv = new Date(r[idx[&quot;COL1&quot;]]).valueOf();\r\n        if (dv &lt; dtv) {\r\n          sh.deleteRow(i + 2 - d++)\r\n        }\r\n      })\r\n    }\r\n\r\nIt depends upon whether or not your date values include time or not","title":"Google sheet cell delete at specific date","body":"<pre><code>function deleteOldRows() {\n  const ss = SpreadsheetApp.getActive();\n  const sh = ss.getSheetByName(&quot;Sheet0&quot;);\n  const [hA, ...vs] = sh.getDataRange().getValues();\n  const dtv = new Date().valueOf();\n  let idx = {};\n  let d = 0;\n  hA.forEach((h, i) =&gt; idx[h] = i);\n  vs.forEach((r, i) =&gt; {\n    let dv = new Date(r[idx[&quot;COL1&quot;]]).valueOf();\n    if (dv &lt; dtv) { // if you only want a specific date change &lt; to  ==\n      sh.deleteRow(i + 2 - d++)\n    }\n  })\n}\n</code></pre>\n<p>Start Data:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\"></th>\n<th style=\"text-align: left;\">A</th>\n<th style=\"text-align: left;\">B</th>\n<th style=\"text-align: left;\">C</th>\n<th style=\"text-align: left;\">D</th>\n<th style=\"text-align: left;\">E</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">1</td>\n<td style=\"text-align: left;\">COL1</td>\n<td style=\"text-align: left;\">COL2</td>\n<td style=\"text-align: left;\">COL3</td>\n<td style=\"text-align: left;\">COL4</td>\n<td style=\"text-align: left;\">COL5</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">2</td>\n<td style=\"text-align: left;\">8/1/2023</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">14</td>\n<td style=\"text-align: left;\">2</td>\n<td style=\"text-align: left;\">24</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">3</td>\n<td style=\"text-align: left;\">8/2/2023</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">20</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">24</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">4</td>\n<td style=\"text-align: left;\">8/3/2023</td>\n<td style=\"text-align: left;\">17</td>\n<td style=\"text-align: left;\">22</td>\n<td style=\"text-align: left;\">23</td>\n<td style=\"text-align: left;\">5</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">5</td>\n<td style=\"text-align: left;\">8/4/2023</td>\n<td style=\"text-align: left;\">5</td>\n<td style=\"text-align: left;\">24</td>\n<td style=\"text-align: left;\">9</td>\n<td style=\"text-align: left;\">23</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">6</td>\n<td style=\"text-align: left;\">8/5/2023</td>\n<td style=\"text-align: left;\">16</td>\n<td style=\"text-align: left;\">3</td>\n<td style=\"text-align: left;\">23</td>\n<td style=\"text-align: left;\">14</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">7</td>\n<td style=\"text-align: left;\">8/6/2023</td>\n<td style=\"text-align: left;\">12</td>\n<td style=\"text-align: left;\">8</td>\n<td style=\"text-align: left;\">16</td>\n<td style=\"text-align: left;\">7</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">8</td>\n<td style=\"text-align: left;\">8/7/2023</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">20</td>\n<td style=\"text-align: left;\">14</td>\n<td style=\"text-align: left;\">17</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">9</td>\n<td style=\"text-align: left;\">8/8/2023</td>\n<td style=\"text-align: left;\">18</td>\n<td style=\"text-align: left;\">8</td>\n<td style=\"text-align: left;\">7</td>\n<td style=\"text-align: left;\">24</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">10</td>\n<td style=\"text-align: left;\">8/9/2023</td>\n<td style=\"text-align: left;\">19</td>\n<td style=\"text-align: left;\">19</td>\n<td style=\"text-align: left;\">18</td>\n<td style=\"text-align: left;\">16</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">11</td>\n<td style=\"text-align: left;\">8/10/2023</td>\n<td style=\"text-align: left;\">22</td>\n<td style=\"text-align: left;\">22</td>\n<td style=\"text-align: left;\">4</td>\n<td style=\"text-align: left;\">19</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">12</td>\n<td style=\"text-align: left;\">8/11/2023</td>\n<td style=\"text-align: left;\">2</td>\n<td style=\"text-align: left;\">16</td>\n<td style=\"text-align: left;\">18</td>\n<td style=\"text-align: left;\">1</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">13</td>\n<td style=\"text-align: left;\">8/12/2023</td>\n<td style=\"text-align: left;\">16</td>\n<td style=\"text-align: left;\">8</td>\n<td style=\"text-align: left;\">3</td>\n<td style=\"text-align: left;\">20</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">14</td>\n<td style=\"text-align: left;\">8/13/2023</td>\n<td style=\"text-align: left;\">5</td>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: left;\">15</td>\n<td style=\"text-align: left;\">21</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">15</td>\n<td style=\"text-align: left;\">8/14/2023</td>\n<td style=\"text-align: left;\">11</td>\n<td style=\"text-align: left;\">11</td>\n<td style=\"text-align: left;\">13</td>\n<td style=\"text-align: left;\">15</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">16</td>\n<td style=\"text-align: left;\">8/15/2023</td>\n<td style=\"text-align: left;\">22</td>\n<td style=\"text-align: left;\">13</td>\n<td style=\"text-align: left;\">3</td>\n<td style=\"text-align: left;\">6</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">17</td>\n<td style=\"text-align: left;\">8/16/2023</td>\n<td style=\"text-align: left;\">20</td>\n<td style=\"text-align: left;\">6</td>\n<td style=\"text-align: left;\">19</td>\n<td style=\"text-align: left;\">1</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">18</td>\n<td style=\"text-align: left;\">8/17/2023</td>\n<td style=\"text-align: left;\">7</td>\n<td style=\"text-align: left;\">20</td>\n<td style=\"text-align: left;\">5</td>\n<td style=\"text-align: left;\">24</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">19</td>\n<td style=\"text-align: left;\">8/18/2023</td>\n<td style=\"text-align: left;\">5</td>\n<td style=\"text-align: left;\">8</td>\n<td style=\"text-align: left;\">18</td>\n<td style=\"text-align: left;\">6</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">20</td>\n<td style=\"text-align: left;\">8/19/2023</td>\n<td style=\"text-align: left;\">4</td>\n<td style=\"text-align: left;\">13</td>\n<td style=\"text-align: left;\">12</td>\n<td style=\"text-align: left;\">21</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">21</td>\n<td style=\"text-align: left;\">8/20/2023</td>\n<td style=\"text-align: left;\">10</td>\n<td style=\"text-align: left;\">7</td>\n<td style=\"text-align: left;\">17</td>\n<td style=\"text-align: left;\">14</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">22</td>\n<td style=\"text-align: left;\">8/21/2023</td>\n<td style=\"text-align: left;\">11</td>\n<td style=\"text-align: left;\">6</td>\n<td style=\"text-align: left;\">11</td>\n<td style=\"text-align: left;\">11</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">23</td>\n<td style=\"text-align: left;\">8/22/2023</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">13</td>\n<td style=\"text-align: left;\">7</td>\n<td style=\"text-align: left;\">8</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">24</td>\n<td style=\"text-align: left;\">8/23/2023</td>\n<td style=\"text-align: left;\">9</td>\n<td style=\"text-align: left;\">17</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">21</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">25</td>\n<td style=\"text-align: left;\">8/24/2023</td>\n<td style=\"text-align: left;\">15</td>\n<td style=\"text-align: left;\">0</td>\n<td style=\"text-align: left;\">17</td>\n<td style=\"text-align: left;\">23</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">26</td>\n<td style=\"text-align: left;\">8/25/2023</td>\n<td style=\"text-align: left;\">12</td>\n<td style=\"text-align: left;\">17</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">10</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>End Data:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\"></th>\n<th style=\"text-align: left;\">A</th>\n<th style=\"text-align: left;\">B</th>\n<th style=\"text-align: left;\">C</th>\n<th style=\"text-align: left;\">D</th>\n<th style=\"text-align: left;\">E</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">1</td>\n<td style=\"text-align: left;\">COL1</td>\n<td style=\"text-align: left;\">COL2</td>\n<td style=\"text-align: left;\">COL3</td>\n<td style=\"text-align: left;\">COL4</td>\n<td style=\"text-align: left;\">COL5</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">2</td>\n<td style=\"text-align: left;\">8/13/2023</td>\n<td style=\"text-align: left;\">5</td>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: left;\">15</td>\n<td style=\"text-align: left;\">21</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">3</td>\n<td style=\"text-align: left;\">8/14/2023</td>\n<td style=\"text-align: left;\">11</td>\n<td style=\"text-align: left;\">11</td>\n<td style=\"text-align: left;\">13</td>\n<td style=\"text-align: left;\">15</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">4</td>\n<td style=\"text-align: left;\">8/15/2023</td>\n<td style=\"text-align: left;\">22</td>\n<td style=\"text-align: left;\">13</td>\n<td style=\"text-align: left;\">3</td>\n<td style=\"text-align: left;\">6</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">5</td>\n<td style=\"text-align: left;\">8/16/2023</td>\n<td style=\"text-align: left;\">20</td>\n<td style=\"text-align: left;\">6</td>\n<td style=\"text-align: left;\">19</td>\n<td style=\"text-align: left;\">1</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">6</td>\n<td style=\"text-align: left;\">8/17/2023</td>\n<td style=\"text-align: left;\">7</td>\n<td style=\"text-align: left;\">20</td>\n<td style=\"text-align: left;\">5</td>\n<td style=\"text-align: left;\">24</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">7</td>\n<td style=\"text-align: left;\">8/18/2023</td>\n<td style=\"text-align: left;\">5</td>\n<td style=\"text-align: left;\">8</td>\n<td style=\"text-align: left;\">18</td>\n<td style=\"text-align: left;\">6</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">8</td>\n<td style=\"text-align: left;\">8/19/2023</td>\n<td style=\"text-align: left;\">4</td>\n<td style=\"text-align: left;\">13</td>\n<td style=\"text-align: left;\">12</td>\n<td style=\"text-align: left;\">21</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">9</td>\n<td style=\"text-align: left;\">8/20/2023</td>\n<td style=\"text-align: left;\">10</td>\n<td style=\"text-align: left;\">7</td>\n<td style=\"text-align: left;\">17</td>\n<td style=\"text-align: left;\">14</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">10</td>\n<td style=\"text-align: left;\">8/21/2023</td>\n<td style=\"text-align: left;\">11</td>\n<td style=\"text-align: left;\">6</td>\n<td style=\"text-align: left;\">11</td>\n<td style=\"text-align: left;\">11</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">11</td>\n<td style=\"text-align: left;\">8/22/2023</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">13</td>\n<td style=\"text-align: left;\">7</td>\n<td style=\"text-align: left;\">8</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">12</td>\n<td style=\"text-align: left;\">8/23/2023</td>\n<td style=\"text-align: left;\">9</td>\n<td style=\"text-align: left;\">17</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">21</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">13</td>\n<td style=\"text-align: left;\">8/24/2023</td>\n<td style=\"text-align: left;\">15</td>\n<td style=\"text-align: left;\">0</td>\n<td style=\"text-align: left;\">17</td>\n<td style=\"text-align: left;\">23</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">14</td>\n<td style=\"text-align: left;\">8/25/2023</td>\n<td style=\"text-align: left;\">12</td>\n<td style=\"text-align: left;\">17</td>\n<td style=\"text-align: left;\">21</td>\n<td style=\"text-align: left;\">10</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>If you wish to keep today, you can do this:</p>\n<pre><code>function deleteOldRows() {\n  const ss = SpreadsheetApp.getActive();\n  const sh = ss.getSheetByName(&quot;Sheet0&quot;);\n  const [hA, ...vs] = sh.getDataRange().getValues();\n  let dt = new Date();\n  const dtv = new Date(dt.getFullYear(),dt.getMonth(),dt.getDate()).valueOf();\n  let idx = {};\n  let d = 0;\n  hA.forEach((h, i) =&gt; idx[h] = i);\n  vs.forEach((r, i) =&gt; {\n    let dv = new Date(r[idx[&quot;COL1&quot;]]).valueOf();\n    if (dv &lt; dtv) {\n      sh.deleteRow(i + 2 - d++)\n    }\n  })\n}\n</code></pre>\n<p>It depends upon whether or not your date values include time or not</p>\n"}],"owner":{"account_id":29212222,"reputation":1,"user_id":22379917,"display_name":"amit sachdeva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691857600,"creation_date":1691851838,"question_id":76889815,"body_markdown":"there are some cells in my spreadsheet which I want to remove or delete on a specific date is over . can you help me?\r\nI already installed google script.\r\n\r\njava programming , trigger to delete cells in specific date .\r\nwaiting for response","title":"Google sheet cell delete at specific date","body":"<p>there are some cells in my spreadsheet which I want to remove or delete on a specific date is over . can you help me?\nI already installed google script.</p>\n<p>java programming , trigger to delete cells in specific date .\nwaiting for response</p>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691856782,"creation_date":1691819816,"answer_id":76887949,"question_id":76887934,"body_markdown":"In chunked mode, Spring will take care of calling a reader, forwarding the data to the processor and finally the writer. You can configure features like transation size, but the control is on Spring.\r\n\r\nIn Tasklet mode Spring will not impose the structure and the Tasklet can decide on it&#39;s own how to do the job. That does not mean all the data has to be read in one step.\r\n\r\nIt may come handy when Spring control is not useful. Just assume depending on the data multiple different databases need to be addressed - then Spring&#39;s transaction control would be meaningless.\r\n\r\nIf it helps, also study documentation for JSR-352 Java Batch, such as [Understanding Java Batch][1]. Your question is pretty much when to use Batchlet vs Chunk based processing:\r\n\r\n*For a batchlet your application code just gets control once and does whatever it needs to\r\ndo. A chunk step is different because it always contains a loop. The batch container will\r\ncreate a loop around calls to your application. The idea is that your application will do\r\nsome limited amount of processing, perhaps on a single item of data, and then return so\r\nthe container can loop around and we do it again.*\r\n\r\n*Obviously you could do this in a batchlet yourself, but the chunk model brings with it some\r\npretty fancy options that the container takes care of for you. We’ll dig into that as we work\r\nour way through the chunk programming model. But at a high level a chunk step is simply\r\nthe container calling your application in a loop until you are done. In theory each pass\r\nthrough the loop does similar processing with different data, although really that is up to\r\nyour application.*\r\n\r\n  [1]: https://www.ibm.com/support/pages/system/files/inline-files/WP102706_WLB_JSR352.002.pdf","title":"What is the use of Tasklet step in Spring Batch?","body":"<p>In chunked mode, Spring will take care of calling a reader, forwarding the data to the processor and finally the writer. You can configure features like transation size, but the control is on Spring.</p>\n<p>In Tasklet mode Spring will not impose the structure and the Tasklet can decide on it's own how to do the job. That does not mean all the data has to be read in one step.</p>\n<p>It may come handy when Spring control is not useful. Just assume depending on the data multiple different databases need to be addressed - then Spring's transaction control would be meaningless.</p>\n<p>If it helps, also study documentation for JSR-352 Java Batch, such as <a href=\"https://www.ibm.com/support/pages/system/files/inline-files/WP102706_WLB_JSR352.002.pdf\" rel=\"nofollow noreferrer\">Understanding Java Batch</a>. Your question is pretty much when to use Batchlet vs Chunk based processing:</p>\n<p><em>For a batchlet your application code just gets control once and does whatever it needs to\ndo. A chunk step is different because it always contains a loop. The batch container will\ncreate a loop around calls to your application. The idea is that your application will do\nsome limited amount of processing, perhaps on a single item of data, and then return so\nthe container can loop around and we do it again.</em></p>\n<p><em>Obviously you could do this in a batchlet yourself, but the chunk model brings with it some\npretty fancy options that the container takes care of for you. We’ll dig into that as we work\nour way through the chunk programming model. But at a high level a chunk step is simply\nthe container calling your application in a loop until you are done. In theory each pass\nthrough the loop does similar processing with different data, although really that is up to\nyour application.</em></p>\n"}],"owner":{"account_id":28788063,"reputation":1,"user_id":22048100,"display_name":"techie_kvy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":587,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691856782,"creation_date":1691819499,"question_id":76887934,"body_markdown":"There are 2 different types of steps in Spring Batch, either we can configure the job using a Tasklet step or a chunk oriented step. In chunk oriented step we can read, process and write data in chunks for better performance. Whilst the tasklet step reads, processes and writes the whole data at once like other traditional programs using spring boot.\r\n\r\nHow Tasklet step, differs from the traditional programs using springboot and what is the extra level of usage that the tasklet step provides? \r\n\r\nClear explanation of the major differences between tasklet and chunk oriented steps.","title":"What is the use of Tasklet step in Spring Batch?","body":"<p>There are 2 different types of steps in Spring Batch, either we can configure the job using a Tasklet step or a chunk oriented step. In chunk oriented step we can read, process and write data in chunks for better performance. Whilst the tasklet step reads, processes and writes the whole data at once like other traditional programs using spring boot.</p>\n<p>How Tasklet step, differs from the traditional programs using springboot and what is the extra level of usage that the tasklet step provides?</p>\n<p>Clear explanation of the major differences between tasklet and chunk oriented steps.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1691844063,"post_id":76889310,"comment_id":135548121,"body_markdown":"&quot;because b.name is just the reference of the a.name object and not a real copy&quot; Yeah, but by doing `b.name = &quot;Ernie&quot;`, you are making `b.name` refer to something else. It no longer is &quot;just the reference of the a.name object&quot;.","body":"&quot;because b.name is just the reference of the a.name object and not a real copy&quot; Yeah, but by doing <code>b.name = &quot;Ernie&quot;</code>, you are making <code>b.name</code> refer to something else. It no longer is &quot;just the reference of the a.name object&quot;."},{"owner":{"account_id":29211844,"reputation":23,"user_id":22379633,"display_name":"John Sace"},"score":0,"creation_date":1691844298,"post_id":76889310,"comment_id":135548142,"body_markdown":"Wow thank you for the quick answer :) . Okay than I got the sideeffect part wrong. How do I then force a sideeffect ?","body":"Wow thank you for the quick answer :) . Okay than I got the sideeffect part wrong. How do I then force a sideeffect ?"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691856541,"post_id":76889310,"comment_id":135549414,"body_markdown":"Both are a deep copy... Your second constructor is identical to calling `this(a.name)`, that is, calling your first constructor.","body":"Both are a deep copy... Your second constructor is identical to calling <code>this(a.name)</code>, that is, calling your first constructor."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691844571,"creation_date":1691844571,"answer_id":76889343,"question_id":76889310,"body_markdown":"&gt; because `b.name` is just the reference of the `a.name` object and not a real copy&quot; \r\n\r\nYeah, that is true, until you wrote `b.name = &quot;Ernie&quot;`. That makes `b.name` a reference to something else (namely, the string &quot;Ernie&quot;). That is what the `=` operator does. `b.name` no longer is &quot;just the reference of the `a.name` object&quot;. \r\n\r\nSo you need to change `b.name` in some way, without making it a reference to something else.\r\n\r\nHowever, there is no way to do this. [`String` is immutable][1]. After the `String` is created, there is no method you can call, or (public) fields you can set, that can change what string the `String` object represents. On the other hand, you can assign a new object to an existing `String`, like you are doing here.\r\n\r\nArguably, this is one of the reasons why `String` is immutable. Making a shallow copy of `String` will not cause any unwanted side effects, so you don&#39;t actually need to deep copy `String`s.\r\n\r\nTo see the side effects, use a mutable type, like `StringBuilder`:\r\n\r\n```\r\npublic class Joo {\r\n    public StringBuilder name;\r\n\r\n    public Joo(String a) {\r\n        this.name = new StringBuilder(a);\r\n    }\r\n\r\n    public Joo(Joo a) {\r\n        this.name = a.name;\r\n    }\r\n}\r\n```\r\n\r\nRather than assigning a new instance of `StringBuilder`, mutate the object by calling one of its methods:\r\n\r\n```\r\nb.name.append(&quot;Something&quot;);\r\n```\r\n\r\nNow it prints:\r\n\r\n```\r\na :Bernt\r\nb :Bernt\r\na :BerntSomething\r\nb :BerntSomething\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/22397861/5133585","title":"I can&#39;t create an unwanted side effect with a shallow copy","body":"<blockquote>\n<p>because <code>b.name</code> is just the reference of the <code>a.name</code> object and not a real copy&quot;</p>\n</blockquote>\n<p>Yeah, that is true, until you wrote <code>b.name = &quot;Ernie&quot;</code>. That makes <code>b.name</code> a reference to something else (namely, the string &quot;Ernie&quot;). That is what the <code>=</code> operator does. <code>b.name</code> no longer is &quot;just the reference of the <code>a.name</code> object&quot;.</p>\n<p>So you need to change <code>b.name</code> in some way, without making it a reference to something else.</p>\n<p>However, there is no way to do this. <a href=\"https://stackoverflow.com/q/22397861/5133585\"><code>String</code> is immutable</a>. After the <code>String</code> is created, there is no method you can call, or (public) fields you can set, that can change what string the <code>String</code> object represents. On the other hand, you can assign a new object to an existing <code>String</code>, like you are doing here.</p>\n<p>Arguably, this is one of the reasons why <code>String</code> is immutable. Making a shallow copy of <code>String</code> will not cause any unwanted side effects, so you don't actually need to deep copy <code>String</code>s.</p>\n<p>To see the side effects, use a mutable type, like <code>StringBuilder</code>:</p>\n<pre><code>public class Joo {\n    public StringBuilder name;\n\n    public Joo(String a) {\n        this.name = new StringBuilder(a);\n    }\n\n    public Joo(Joo a) {\n        this.name = a.name;\n    }\n}\n</code></pre>\n<p>Rather than assigning a new instance of <code>StringBuilder</code>, mutate the object by calling one of its methods:</p>\n<pre><code>b.name.append(&quot;Something&quot;);\n</code></pre>\n<p>Now it prints:</p>\n<pre><code>a :Bernt\nb :Bernt\na :BerntSomething\nb :BerntSomething\n</code></pre>\n"}],"owner":{"account_id":29211844,"reputation":23,"user_id":22379633,"display_name":"John Sace"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76889343,"answer_count":1,"score":2,"last_activity_date":1691856530,"creation_date":1691843934,"question_id":76889310,"body_markdown":"I just wanted to create a shallow and a deep copy of an object. I know that in the deep copy you create a new object with the values of the object you want to copy to prevent a side effect. The thing I noticed I can&#39;t get a side effect on my shallow copy, but I don&#39;t understand why.\r\n\r\n```\r\npublic class Joo {\r\n\tpublic String name;\r\n\t\r\n\tpublic Joo(String a) {\r\n\t\tthis.name = a; \r\n\t}\r\n\tpublic Joo(Joo a) {\r\n\t\tthis.name = a.name; \r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tJoo a = new Joo(&quot;Bernt&quot;);\r\n\t\tJoo b = new Joo(a);\r\n\t\t\r\n\t\tSystem.out.println(&quot;a :&quot; +a.name); //a :Bernt\r\n\t\tSystem.out.println(&quot;b :&quot; +b.name); //b :Bernt\r\n\r\n\t\tb.name = &quot;Ernie&quot;;\r\n\t\tSystem.out.println(&quot;a :&quot; +a.name); //a :Bernt \r\n\t\tSystem.out.println(&quot;b :&quot; +b.name); //b :Ernie\r\n\t}\r\n}\r\n```\r\n\r\nI was expected that when I change b.name its also changes a.name because b.name is just the reference of the a.name object and not a real copy.","title":"I can&#39;t create an unwanted side effect with a shallow copy","body":"<p>I just wanted to create a shallow and a deep copy of an object. I know that in the deep copy you create a new object with the values of the object you want to copy to prevent a side effect. The thing I noticed I can't get a side effect on my shallow copy, but I don't understand why.</p>\n<pre><code>public class Joo {\n    public String name;\n    \n    public Joo(String a) {\n        this.name = a; \n    }\n    public Joo(Joo a) {\n        this.name = a.name; \n    }\n    \n    public static void main(String[] args) {\n        Joo a = new Joo(&quot;Bernt&quot;);\n        Joo b = new Joo(a);\n        \n        System.out.println(&quot;a :&quot; +a.name); //a :Bernt\n        System.out.println(&quot;b :&quot; +b.name); //b :Bernt\n\n        b.name = &quot;Ernie&quot;;\n        System.out.println(&quot;a :&quot; +a.name); //a :Bernt \n        System.out.println(&quot;b :&quot; +b.name); //b :Ernie\n    }\n}\n</code></pre>\n<p>I was expected that when I change b.name its also changes a.name because b.name is just the reference of the a.name object and not a real copy.</p>\n"},{"tags":["java","flutter","dart","encryption"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1691862275,"post_id":76889862,"comment_id":135549958,"body_markdown":"What did you do to see if the chosen primitives are correct? How did you come up with HKDF and HMAC-SHA-256? How are you going to make sure that the ciphertext looks the same if ECIES creates an ephemeral key pair to derive the AES key? I&#39;d suggest you perform a lot more research, then create a decryption routine for both. Decryption *is deterministic* and you can then step through to see what is happening. Note that Bouncy Castle is also open source, if you link the source you can step through the encryption / decryption code.","body":"What did you do to see if the chosen primitives are correct? How did you come up with HKDF and HMAC-SHA-256? How are you going to make sure that the ciphertext looks the same if ECIES creates an ephemeral key pair to derive the AES key? I&#39;d suggest you perform a lot more research, then create a decryption routine for both. Decryption <i>is deterministic</i> and you can then step through to see what is happening. Note that Bouncy Castle is also open source, if you link the source you can step through the encryption / decryption code."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1691863002,"post_id":76889862,"comment_id":135550034,"body_markdown":"Why do you encrypt the plaintext (`plainPin`) with AES and the AES key (`aesKey`) with ECIES (and generate a MAC for authentication) in the Java code? ECIES is a hybrid scheme that does all this for you under the hood. So why don&#39;t you just encrypt the plaintext (`plainPin`) with ECIES?","body":"Why do you encrypt the plaintext (<code>plainPin</code>) with AES and the AES key (<code>aesKey</code>) with ECIES (and generate a MAC for authentication) in the Java code? ECIES is a hybrid scheme that does all this for you under the hood. So why don&#39;t you just encrypt the plaintext (<code>plainPin</code>) with ECIES?"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1691863233,"post_id":76889862,"comment_id":135550051,"body_markdown":"Apart from that you have to keep in mind (especially cross-platform) that there are different ECIES standards. So if you use the ECIES implementation of a certain provider, you have to use the same standard on the other side (and if you implement it yourself with the corresponding effort, you have to follow the specification exactly).","body":"Apart from that you have to keep in mind (especially cross-platform) that there are different ECIES standards. So if you use the ECIES implementation of a certain provider, you have to use the same standard on the other side (and if you implement it yourself with the corresponding effort, you have to follow the specification exactly)."}],"owner":{"account_id":29212410,"reputation":11,"user_id":22380068,"display_name":"Felix Luu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1691856369,"creation_date":1691852546,"question_id":76889862,"body_markdown":"I currently have a Java class like below:\r\n\r\n```java\r\nclass Sample {\r\n    private SetPinEncryptedDTO createSetPinEncryptedPayload(PublicKeyDTO publicKeyDTO, String plainPin) throws Exception {\r\n        final String AES_CIPHER_TRANSFORMATION = &quot;AES/CBC/PKCS5PADDING&quot;;\r\n        final String ECC_CIPHER_TRANSFORMATION = &quot;ECIES&quot;;\r\n        // encrypt PIN with AES\r\n        byte[] aesKey = generateAESKey(256).getEncoded();\r\n        byte[] encryptedPin = encrypt(AES_CIPHER_TRANSFORMATION, aesKey, plainPin.getBytes(StandardCharsets.UTF_8), new byte[16]);\r\n        // encrypt AES key with ECC using the received public key. Public key is encoded with Base64\r\n        PublicKey publicKey = readEncodedECCPublicKey(Base64.decodeBase64(publicKeyDTO.getPublicKey()));\r\n        byte[] encryptedAesKey = eccEncrypt(ECC_CIPHER_TRANSFORMATION, publicKey, aesKey);\r\n        // create a payload\r\n        SetPinEncryptedDTO setPinDTO = new SetPinEncryptedDTO();\r\n        setPinDTO.setPin(Base64.encodeBase64String(encryptedPin)); // encode encrypted PIN with Base64\r\n        setPinDTO.setEncryptedSymmetricKey(Base64.encodeBase64String(encryptedAesKey));// encode encrypted AES key with Base64\r\n        setPinDTO.setChecksum(new HmacUtils(HmacAlgorithms.HMAC_SHA_256, aesKey).hmacHex(plainPin.getBytes(StandardCharsets.UTF_8)));\r\n        return setPinDTO;\r\n    }\r\n\r\n    public static SecretKey generateAESKey(int length) throws Exception {\r\n        KeyGenerator keyGen = KeyGenerator.getInstance(&quot;AES&quot;);\r\n        keyGen.init(length);\r\n        return keyGen.generateKey();\r\n    }\r\n\r\n    public static byte[] encrypt(String cipherTransformation, byte[] keyBytes, byte[] message, byte[] ivBytes) throws Exception {\r\n        SecretKeySpec key = new SecretKeySpec(keyBytes, &quot;AES&quot;);\r\n        IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);\r\n        Cipher aesCipher = Cipher.getInstance(cipherTransformation);\r\n        aesCipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);\r\n        return aesCipher.doFinal(message);\r\n    }\r\n\r\n    public static ECPublicKey readEncodedECCPublicKey(byte[] bytesKey) throws Exception {\r\n        KeyFactory keyFactory = KeyFactory.getInstance(&quot;ECDH&quot;, BouncyCastleProvider.PROVIDER_NAME);\r\n        X509EncodedKeySpec x509EncodedKeySpec = new X509EncodedKeySpec(bytesKey);\r\n        return (ECPublicKey) keyFactory.generatePublic(x509EncodedKeySpec);\r\n    }\r\n\r\n    public static byte[] eccEncrypt(String eccCipherTransformation, PublicKey publicKey, byte[] plainBytes) throws Exception {\r\n        Cipher cipher = Cipher.getInstance(eccCipherTransformation, BouncyCastleProvider.PROVIDER_NAME);\r\n        cipher.init(Cipher.ENCRYPT_MODE, publicKey);\r\n        return cipher.doFinal(plainBytes);\r\n    }\r\n}\r\n```\r\n\r\nI want to convert that class to Dart, and I have written that class into the following:\r\n\r\n```dart\r\nclass Sample {\r\n  static Future&lt;Uint8List&gt; generateAESKey() async {\r\n    final algorithm = better_cryptography.AesGcm.with256bits(nonceLength: 32);\r\n    final key = algorithm.newNonce();\r\n    return Uint8List.fromList(key);\r\n  }\r\n\r\n  static Uint8List encryptAES(String cipherTransformation, Uint8List keyBytes,\r\n      Uint8List plainText, Uint8List ivBytes) {\r\n    final params = PaddedBlockCipherParameters(\r\n      ParametersWithIV&lt;KeyParameter&gt;(KeyParameter(keyBytes), ivBytes),\r\n      null, // Using PKCS7 padding by default\r\n    );\r\n\r\n    PaddedBlockCipher cipher = PaddedBlockCipher(cipherTransformation)\r\n      ..init(true, params);\r\n\r\n    Uint8List encrypted = cipher.process(plainText);\r\n    return encrypted;\r\n  }\r\n\r\n  static String eccEncrypt(String eccCipherTransformation,\r\n      ECPublicKey publicKey, Uint8List plaintext) {\r\n    var rnd = getSecureRandom();\r\n    var domainParams = ECDomainParameters(&quot;secp256r1&quot;);\r\n    // 1. Create ephemeral key pair\r\n    var ephKeyPair = (KeyGenerator(&quot;EC&quot;)\r\n          ..init(ParametersWithRandom(\r\n              ECKeyGeneratorParameters(domainParams), rnd)))\r\n        .generateKeyPair();\r\n\r\n    // 3. Get full point to ECDH shared secret, derive AES key via HKDF\r\n    var sharedSecretECPointUncomp =\r\n        (publicKey.Q! * (ephKeyPair.privateKey as ECPrivateKey).d)!\r\n            .getEncoded(false);\r\n    var ephPublicKeyUncomp =\r\n        (ephKeyPair.publicKey as ECPublicKey).Q!.getEncoded(false);\r\n    var aesKey = hkdf(ephPublicKeyUncomp, sharedSecretECPointUncomp);\r\n\r\n    // 4. Encrypt via AES-256, GCM\r\n    var nonce = rnd.nextBytes(16);\r\n    var ciphertextTag = (GCMBlockCipher(AESEngine())\r\n          ..init(true,\r\n              AEADParameters(KeyParameter(aesKey), 128, nonce, Uint8List(0))))\r\n        .process(plaintext);\r\n\r\n    // 5. Concatenate (ephemeral public key|nonce|tag|ciphertext), Base64 encode and return\r\n    return base64.encode(ephPublicKeyUncomp +\r\n        nonce +\r\n        ciphertextTag.sublist(ciphertextTag.length - 16) +\r\n        ciphertextTag.sublist(0, ciphertextTag.length - 16));\r\n  }\r\n\r\n  static basic_utils.SecureRandom getSecureRandom() {\r\n    List&lt;int&gt; seed =\r\n        List&lt;int&gt;.generate(32, (_) =&gt; Random.secure().nextInt(256));\r\n    return FortunaRandom()..seed(KeyParameter(Uint8List.fromList(seed)));\r\n  }\r\n\r\n  static Uint8List hkdf(var ephPublicKeyUnc, var sharedSecretEcPointUnc) {\r\n    var master = Uint8List.fromList(ephPublicKeyUnc + sharedSecretEcPointUnc);\r\n    var aesKey = Uint8List(32);\r\n    (HKDFKeyDerivator(SHA256Digest())..init(HkdfParameters(master, 32, null)))\r\n        .deriveKey(null, 0, aesKey, 0);\r\n    return aesKey;\r\n  }\r\n\r\n  static String hMacSha256(String data, Uint8List key) {\r\n    var hMacSha256 = crypto.Hmac(crypto.sha256, key);\r\n    return hMacSha256.convert(utf8.encode(data)).toString();\r\n  }\r\n\r\n  static Future&lt;ECPublicKey&gt; readEncodedECCPublicKey(String key) async {\r\n    ASN1Parser parser = ASN1Parser(Uint8List.fromList(base64.decode(key)));\r\n    ASN1Sequence topLevelSeq = parser.nextObject() as ASN1Sequence;\r\n    ECPoint? ecPoint;\r\n    // Extracting ECPoint\r\n    try {\r\n      ASN1Sequence publicKeySeq = topLevelSeq.elements![0] as ASN1Sequence;\r\n      ASN1BitString publicKeyBitString =\r\n      topLevelSeq.elements![1] as ASN1BitString;\r\n      List&lt;int&gt; publicKeyBytes = publicKeyBitString.stringValues!;\r\n      ecPoint = ECCurve_secp256r1().curve.decodePoint(publicKeyBytes);\r\n    } catch (e) {}\r\n    // Creating ECPublicKey object\r\n    final keyParams = ECCurve_secp256r1();\r\n    final ecPublicKey = ECPublicKey(ecPoint, keyParams);\r\n    return ecPublicKey;\r\n  }\r\n\r\n  static String hMacHex(\r\n      String hMacAlgorithm, Uint8List key, List&lt;int&gt; message) {\r\n    var hMacSha256 = crypto.Hmac(crypto.sha256, key);\r\n    var hMac = hMacSha256.convert(message);\r\n    return hex.encode(hMac.bytes);\r\n  }\r\n\r\n  static Future&lt;SetPinEncryptedDTO&gt; createSetPinEncryptedPayload(\r\n      String publicKeyFromServer, String plainPin) async {\r\n    const String AES_CIPHER_TRANSFORMATION = &quot;AES/CBC/PKCS7&quot;;\r\n    const String ECC_CIPHER_TRANSFORMATION = &quot;ECIES&quot;;\r\n    const String HMAC_ALGORITHM = &quot;SHA-256&quot;;\r\n\r\n    // Encrypt PIN with AES\r\n    final aesKey = await generateAESKey();\r\n    final encryptedPin = encryptAES(AES_CIPHER_TRANSFORMATION, aesKey,\r\n        Uint8List.fromList(utf8.encode(plainPin)), Uint8List(16));\r\n\r\n    // Encrypt AES key with ECC using the received public key. Public key is encoded with Base64.\r\n    final publicKey = await readEncodedECCPublicKey(publicKeyFromServer);\r\n    final encryptedAesKey =\r\n        eccEncrypt(ECC_CIPHER_TRANSFORMATION, publicKey, aesKey);\r\n\r\n    // Create a payload\r\n    final setPinDTO = SetPinEncryptedDTO();\r\n    setPinDTO.pin =\r\n        base64.encode(encryptedPin); // Encode encrypted PIN with Base64\r\n    setPinDTO.encryptedSymmetricKey =\r\n        encryptedAesKey; // Encode encrypted AES key with Base64\r\n    setPinDTO.checksum = hMacHex(HMAC_ALGORITHM, aesKey, utf8.encode(plainPin));\r\n    return setPinDTO;\r\n  }\r\n}\r\n```\r\n\r\nAll the functions in function createSetPinEncryptedPayload work and it seem very well, but encryptedAesKey is wrong. In Java, `Base64.encodeBase64String(encryptedAesKey)` returns a character string with length 156, but in Dart length is 172. I don&#39;t know which is wrong. How do I fix this?\r\n","title":"Support encryption algorithm &quot;ECIES&quot; using cipher with dart . language","body":"<p>I currently have a Java class like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Sample {\n    private SetPinEncryptedDTO createSetPinEncryptedPayload(PublicKeyDTO publicKeyDTO, String plainPin) throws Exception {\n        final String AES_CIPHER_TRANSFORMATION = &quot;AES/CBC/PKCS5PADDING&quot;;\n        final String ECC_CIPHER_TRANSFORMATION = &quot;ECIES&quot;;\n        // encrypt PIN with AES\n        byte[] aesKey = generateAESKey(256).getEncoded();\n        byte[] encryptedPin = encrypt(AES_CIPHER_TRANSFORMATION, aesKey, plainPin.getBytes(StandardCharsets.UTF_8), new byte[16]);\n        // encrypt AES key with ECC using the received public key. Public key is encoded with Base64\n        PublicKey publicKey = readEncodedECCPublicKey(Base64.decodeBase64(publicKeyDTO.getPublicKey()));\n        byte[] encryptedAesKey = eccEncrypt(ECC_CIPHER_TRANSFORMATION, publicKey, aesKey);\n        // create a payload\n        SetPinEncryptedDTO setPinDTO = new SetPinEncryptedDTO();\n        setPinDTO.setPin(Base64.encodeBase64String(encryptedPin)); // encode encrypted PIN with Base64\n        setPinDTO.setEncryptedSymmetricKey(Base64.encodeBase64String(encryptedAesKey));// encode encrypted AES key with Base64\n        setPinDTO.setChecksum(new HmacUtils(HmacAlgorithms.HMAC_SHA_256, aesKey).hmacHex(plainPin.getBytes(StandardCharsets.UTF_8)));\n        return setPinDTO;\n    }\n\n    public static SecretKey generateAESKey(int length) throws Exception {\n        KeyGenerator keyGen = KeyGenerator.getInstance(&quot;AES&quot;);\n        keyGen.init(length);\n        return keyGen.generateKey();\n    }\n\n    public static byte[] encrypt(String cipherTransformation, byte[] keyBytes, byte[] message, byte[] ivBytes) throws Exception {\n        SecretKeySpec key = new SecretKeySpec(keyBytes, &quot;AES&quot;);\n        IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);\n        Cipher aesCipher = Cipher.getInstance(cipherTransformation);\n        aesCipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);\n        return aesCipher.doFinal(message);\n    }\n\n    public static ECPublicKey readEncodedECCPublicKey(byte[] bytesKey) throws Exception {\n        KeyFactory keyFactory = KeyFactory.getInstance(&quot;ECDH&quot;, BouncyCastleProvider.PROVIDER_NAME);\n        X509EncodedKeySpec x509EncodedKeySpec = new X509EncodedKeySpec(bytesKey);\n        return (ECPublicKey) keyFactory.generatePublic(x509EncodedKeySpec);\n    }\n\n    public static byte[] eccEncrypt(String eccCipherTransformation, PublicKey publicKey, byte[] plainBytes) throws Exception {\n        Cipher cipher = Cipher.getInstance(eccCipherTransformation, BouncyCastleProvider.PROVIDER_NAME);\n        cipher.init(Cipher.ENCRYPT_MODE, publicKey);\n        return cipher.doFinal(plainBytes);\n    }\n}\n</code></pre>\n<p>I want to convert that class to Dart, and I have written that class into the following:</p>\n<pre class=\"lang-dart prettyprint-override\"><code>class Sample {\n  static Future&lt;Uint8List&gt; generateAESKey() async {\n    final algorithm = better_cryptography.AesGcm.with256bits(nonceLength: 32);\n    final key = algorithm.newNonce();\n    return Uint8List.fromList(key);\n  }\n\n  static Uint8List encryptAES(String cipherTransformation, Uint8List keyBytes,\n      Uint8List plainText, Uint8List ivBytes) {\n    final params = PaddedBlockCipherParameters(\n      ParametersWithIV&lt;KeyParameter&gt;(KeyParameter(keyBytes), ivBytes),\n      null, // Using PKCS7 padding by default\n    );\n\n    PaddedBlockCipher cipher = PaddedBlockCipher(cipherTransformation)\n      ..init(true, params);\n\n    Uint8List encrypted = cipher.process(plainText);\n    return encrypted;\n  }\n\n  static String eccEncrypt(String eccCipherTransformation,\n      ECPublicKey publicKey, Uint8List plaintext) {\n    var rnd = getSecureRandom();\n    var domainParams = ECDomainParameters(&quot;secp256r1&quot;);\n    // 1. Create ephemeral key pair\n    var ephKeyPair = (KeyGenerator(&quot;EC&quot;)\n          ..init(ParametersWithRandom(\n              ECKeyGeneratorParameters(domainParams), rnd)))\n        .generateKeyPair();\n\n    // 3. Get full point to ECDH shared secret, derive AES key via HKDF\n    var sharedSecretECPointUncomp =\n        (publicKey.Q! * (ephKeyPair.privateKey as ECPrivateKey).d)!\n            .getEncoded(false);\n    var ephPublicKeyUncomp =\n        (ephKeyPair.publicKey as ECPublicKey).Q!.getEncoded(false);\n    var aesKey = hkdf(ephPublicKeyUncomp, sharedSecretECPointUncomp);\n\n    // 4. Encrypt via AES-256, GCM\n    var nonce = rnd.nextBytes(16);\n    var ciphertextTag = (GCMBlockCipher(AESEngine())\n          ..init(true,\n              AEADParameters(KeyParameter(aesKey), 128, nonce, Uint8List(0))))\n        .process(plaintext);\n\n    // 5. Concatenate (ephemeral public key|nonce|tag|ciphertext), Base64 encode and return\n    return base64.encode(ephPublicKeyUncomp +\n        nonce +\n        ciphertextTag.sublist(ciphertextTag.length - 16) +\n        ciphertextTag.sublist(0, ciphertextTag.length - 16));\n  }\n\n  static basic_utils.SecureRandom getSecureRandom() {\n    List&lt;int&gt; seed =\n        List&lt;int&gt;.generate(32, (_) =&gt; Random.secure().nextInt(256));\n    return FortunaRandom()..seed(KeyParameter(Uint8List.fromList(seed)));\n  }\n\n  static Uint8List hkdf(var ephPublicKeyUnc, var sharedSecretEcPointUnc) {\n    var master = Uint8List.fromList(ephPublicKeyUnc + sharedSecretEcPointUnc);\n    var aesKey = Uint8List(32);\n    (HKDFKeyDerivator(SHA256Digest())..init(HkdfParameters(master, 32, null)))\n        .deriveKey(null, 0, aesKey, 0);\n    return aesKey;\n  }\n\n  static String hMacSha256(String data, Uint8List key) {\n    var hMacSha256 = crypto.Hmac(crypto.sha256, key);\n    return hMacSha256.convert(utf8.encode(data)).toString();\n  }\n\n  static Future&lt;ECPublicKey&gt; readEncodedECCPublicKey(String key) async {\n    ASN1Parser parser = ASN1Parser(Uint8List.fromList(base64.decode(key)));\n    ASN1Sequence topLevelSeq = parser.nextObject() as ASN1Sequence;\n    ECPoint? ecPoint;\n    // Extracting ECPoint\n    try {\n      ASN1Sequence publicKeySeq = topLevelSeq.elements![0] as ASN1Sequence;\n      ASN1BitString publicKeyBitString =\n      topLevelSeq.elements![1] as ASN1BitString;\n      List&lt;int&gt; publicKeyBytes = publicKeyBitString.stringValues!;\n      ecPoint = ECCurve_secp256r1().curve.decodePoint(publicKeyBytes);\n    } catch (e) {}\n    // Creating ECPublicKey object\n    final keyParams = ECCurve_secp256r1();\n    final ecPublicKey = ECPublicKey(ecPoint, keyParams);\n    return ecPublicKey;\n  }\n\n  static String hMacHex(\n      String hMacAlgorithm, Uint8List key, List&lt;int&gt; message) {\n    var hMacSha256 = crypto.Hmac(crypto.sha256, key);\n    var hMac = hMacSha256.convert(message);\n    return hex.encode(hMac.bytes);\n  }\n\n  static Future&lt;SetPinEncryptedDTO&gt; createSetPinEncryptedPayload(\n      String publicKeyFromServer, String plainPin) async {\n    const String AES_CIPHER_TRANSFORMATION = &quot;AES/CBC/PKCS7&quot;;\n    const String ECC_CIPHER_TRANSFORMATION = &quot;ECIES&quot;;\n    const String HMAC_ALGORITHM = &quot;SHA-256&quot;;\n\n    // Encrypt PIN with AES\n    final aesKey = await generateAESKey();\n    final encryptedPin = encryptAES(AES_CIPHER_TRANSFORMATION, aesKey,\n        Uint8List.fromList(utf8.encode(plainPin)), Uint8List(16));\n\n    // Encrypt AES key with ECC using the received public key. Public key is encoded with Base64.\n    final publicKey = await readEncodedECCPublicKey(publicKeyFromServer);\n    final encryptedAesKey =\n        eccEncrypt(ECC_CIPHER_TRANSFORMATION, publicKey, aesKey);\n\n    // Create a payload\n    final setPinDTO = SetPinEncryptedDTO();\n    setPinDTO.pin =\n        base64.encode(encryptedPin); // Encode encrypted PIN with Base64\n    setPinDTO.encryptedSymmetricKey =\n        encryptedAesKey; // Encode encrypted AES key with Base64\n    setPinDTO.checksum = hMacHex(HMAC_ALGORITHM, aesKey, utf8.encode(plainPin));\n    return setPinDTO;\n  }\n}\n</code></pre>\n<p>All the functions in function createSetPinEncryptedPayload work and it seem very well, but encryptedAesKey is wrong. In Java, <code>Base64.encodeBase64String(encryptedAesKey)</code> returns a character string with length 156, but in Dart length is 172. I don't know which is wrong. How do I fix this?</p>\n"},{"tags":["java","react-native","screen-capture","foreground-service","react-native-bridge"],"answers":[{"tags":[],"owner":{"account_id":29193473,"reputation":11,"user_id":22365140,"display_name":"Hello"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691856269,"creation_date":1691856269,"answer_id":76890098,"question_id":76888920,"body_markdown":"I have examined your code, and it seems that `MediaProjection` instance is not being passed properly to your `ScreenCaptureService`, and therefore, screen capturing does not start.\r\n\r\nIn your `ScreenCaptureModule.java`, you are creating `VirtualDisplay` which initiates capturing and is being released in the same scope. Thus, your capturing process ends immediately after you chose to start screen recording.\r\n\r\nA better approach would be not to start and then stop `MediaProjection` immediately but to keep it running as long as you need to capture the screenshots:\r\n\r\nIn your `ScreenCaptureService.java`, add a static method to start your service and pass `MediaProjection` data as an extra in the Intent:\r\n\r\n    public class ScreenCaptureService extends Service {\r\n        public static final String EXTRA_RESULT_CODE = &quot;resultCode&quot;;\r\n        public static final String EXTRA_RESULT_DATA = &quot;resultData&quot;;\r\n    \r\n        public static void start(Context context, int resultCode, Intent resultData) {\r\n            Intent i = new Intent(context, ScreenCaptureService.class);\r\n            \r\n            i.putExtra(EXTRA_RESULT_CODE, resultCode);\r\n            i.putExtra(EXTRA_RESULT_DATA, resultData);\r\n            \r\n            context.startService(i);\r\n        }\r\n        ...\r\n        @Override\r\n        public int onStartCommand(Intent intent, int flags, int startId) {\r\n            int resultCode = intent.getIntExtra(EXTRA_RESULT_CODE, 0);\r\n            Intent resultData = intent.getParcelableExtra(EXTRA_RESULT_DATA);\r\n            \r\n            // Initialize MediaProjection using data received from ScreenCaptureModule\r\n            MediaProjection mediaProjection = mediaProjectionManager.getMediaProjection(resultCode, resultData);\r\n            \r\n            // Initialize your VirtualDisplay and ImageReader here\r\n    \r\n            // Don&#39;t forget to stop MediaProjection when the Service is destroyed\r\n        }\r\n        ...\r\n    }\r\n\r\nIn your `ScreenCaptureModule.java`, replace `currentActivity.startService(serviceIntent);` with `ScreenCaptureService.start(currentActivity, resultCode, data);:`\r\n\r\n// ... Your existing dialog code ...\r\n.\r\n\r\n    setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\r\n        @Override\r\n        public void onClick(DialogInterface dialog, int which) {\r\n            ScreenCaptureService.start(currentActivity, resultCode, data)\r\n            currentActivity.finish();\r\n        }\r\n    })\r\n\r\n// ...\r\nIn your `module`, do not release `MediaProjection`, `VirtualDisplay`, and `Image` within `onImageAvailable`. The capturing should be stopped once your service is stopped:\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        handler.removeCallbacks(captureRunnable);\r\n        \r\n        // Stop MediaProjection right here:\r\n        mediaProjection.stop();\r\n    \r\n        // Release VirtualDisplay if it&#39;s not already released:\r\n        if (virtualDisplay != null) {\r\n            virtualDisplay.release();\r\n        }\r\n    }\r\n\r\nFollowing these steps should keep the `MediaProjection` alive and capturing during the lifetime of your `ScreenCaptureService`. With the right code in the `ScreenCaptureService&#39;s` onStartCommand method, you should be able to start capturing screen shots immediately after Service is instantiated, storing them in the Pictures directory.","title":"saving Screenshot to Pictures Directory not working in the foreground Service in Java","body":"<p>I have examined your code, and it seems that <code>MediaProjection</code> instance is not being passed properly to your <code>ScreenCaptureService</code>, and therefore, screen capturing does not start.</p>\n<p>In your <code>ScreenCaptureModule.java</code>, you are creating <code>VirtualDisplay</code> which initiates capturing and is being released in the same scope. Thus, your capturing process ends immediately after you chose to start screen recording.</p>\n<p>A better approach would be not to start and then stop <code>MediaProjection</code> immediately but to keep it running as long as you need to capture the screenshots:</p>\n<p>In your <code>ScreenCaptureService.java</code>, add a static method to start your service and pass <code>MediaProjection</code> data as an extra in the Intent:</p>\n<pre><code>public class ScreenCaptureService extends Service {\n    public static final String EXTRA_RESULT_CODE = &quot;resultCode&quot;;\n    public static final String EXTRA_RESULT_DATA = &quot;resultData&quot;;\n\n    public static void start(Context context, int resultCode, Intent resultData) {\n        Intent i = new Intent(context, ScreenCaptureService.class);\n        \n        i.putExtra(EXTRA_RESULT_CODE, resultCode);\n        i.putExtra(EXTRA_RESULT_DATA, resultData);\n        \n        context.startService(i);\n    }\n    ...\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        int resultCode = intent.getIntExtra(EXTRA_RESULT_CODE, 0);\n        Intent resultData = intent.getParcelableExtra(EXTRA_RESULT_DATA);\n        \n        // Initialize MediaProjection using data received from ScreenCaptureModule\n        MediaProjection mediaProjection = mediaProjectionManager.getMediaProjection(resultCode, resultData);\n        \n        // Initialize your VirtualDisplay and ImageReader here\n\n        // Don't forget to stop MediaProjection when the Service is destroyed\n    }\n    ...\n}\n</code></pre>\n<p>In your <code>ScreenCaptureModule.java</code>, replace <code>currentActivity.startService(serviceIntent);</code> with <code>ScreenCaptureService.start(currentActivity, resultCode, data);:</code></p>\n<p>// ... Your existing dialog code ...\n.</p>\n<pre><code>setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\n    @Override\n    public void onClick(DialogInterface dialog, int which) {\n        ScreenCaptureService.start(currentActivity, resultCode, data)\n        currentActivity.finish();\n    }\n})\n</code></pre>\n<p>// ...\nIn your <code>module</code>, do not release <code>MediaProjection</code>, <code>VirtualDisplay</code>, and <code>Image</code> within <code>onImageAvailable</code>. The capturing should be stopped once your service is stopped:</p>\n<pre><code>@Override\npublic void onDestroy() {\n    super.onDestroy();\n    handler.removeCallbacks(captureRunnable);\n    \n    // Stop MediaProjection right here:\n    mediaProjection.stop();\n\n    // Release VirtualDisplay if it's not already released:\n    if (virtualDisplay != null) {\n        virtualDisplay.release();\n    }\n}\n</code></pre>\n<p>Following these steps should keep the <code>MediaProjection</code> alive and capturing during the lifetime of your <code>ScreenCaptureService</code>. With the right code in the <code>ScreenCaptureService's</code> onStartCommand method, you should be able to start capturing screen shots immediately after Service is instantiated, storing them in the Pictures directory.</p>\n"}],"owner":{"account_id":22481280,"reputation":21,"user_id":16786075,"display_name":"Holaba"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691856269,"creation_date":1691837472,"question_id":76888920,"body_markdown":"I have a React Native project. this app should captures the user screen and activities in the foreground. React Native cannot do this thing so I used Native Modules to write java. I made two java file which are `ScreenCaptureModule.java` and `ScreenCaptureService.java`. in this app I reach to: when the user opens the app he will see a Start Screen Capture button. when the user press on this button it will show a Dialog box like this: \r\n```\r\n AlertDialog.Builder builder = new AlertDialog.Builder(currentActivity);\r\n            builder.setTitle(&quot;Welcome, user!&quot;)\r\n                    .setMessage(&quot;You are about to use my app, which captures your screen every one second. Are you willing to proceed?&quot;)\r\n                    .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            Intent serviceIntent = new Intent(currentActivity, ScreenCaptureService.class);\r\n                            currentActivity.startService(serviceIntent);\r\n                            currentActivity.finish();\r\n                        }\r\n                    })\r\n                    .setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            // User declined, do nothing\r\n                        }\r\n                    })\r\n                    .show(); \r\n```\r\nif the user press on Yes the app will close and it will show a Notification like this:  \r\n\r\n```\r\n private void showNotification() {\r\n        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n        if (notificationManager == null) {\r\n            return;\r\n        }\r\n\r\n        String channelId = &quot;screen_capture_channel&quot;;\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n            NotificationChannel channel = new NotificationChannel(channelId, &quot;Screen Capture&quot;, NotificationManager.IMPORTANCE_DEFAULT);\r\n            notificationManager.createNotificationChannel(channel);\r\n        }\r\n\r\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this, channelId)\r\n                .setContentTitle(&quot;Screen Capture&quot;)\r\n                .setContentText(&quot;Your screen is currently being captured. You can find the captures in the Pictures Directory.&quot;)\r\n                .setSmallIcon(R.drawable.ic_notification)\r\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT)\r\n                .setAutoCancel(true);\r\n\r\n        notificationManager.notify(1, builder.build());\r\n    } \r\n```\r\nafter the Notification shown it should capture the screen every one second and save it in the Pictures Directory.  it shows the Notification but it doesn&#39;t save it in Pictures Directory. this is the problem. and now\r\nI&#39;ll give you the code of  `ScreenCapture.java` , `ScreenCaptureService.java` and `React Native`  to see How I call the methods. Again: the problem is when the app starting in the foreground it doesn&#39;t capture or save the image in the Pictures directory. it only shows a notification. \r\n\r\n#  **ScreenCaptureModule.java:** \r\n```\r\npublic class ScreenCaptureModule extends ReactContextBaseJavaModule {\r\n    private static final int REQUEST_MEDIA_PROJECTION = 1;\r\n    private final MediaProjectionManager mediaProjectionManager;\r\n    private ImageReader imageReader;\r\n    private int screenshotCounter = 1;\r\n\r\n    private final ReactApplicationContext reactContext;\r\n\r\n    public ScreenCaptureModule(ReactApplicationContext reactContext) {\r\n        super(reactContext);\r\n        this.reactContext = reactContext;\r\n        mediaProjectionManager = (MediaProjectionManager) reactContext.getSystemService(Context.MEDIA_PROJECTION_SERVICE);\r\n        reactContext.addActivityEventListener(activityEventListener);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public String getName() {\r\n        return &quot;ScreenCaptureModule&quot;;\r\n    }\r\n\r\n    @ReactMethod\r\n    public void startScreenCapture() {\r\n        Activity currentActivity = getCurrentActivity();\r\n        if (currentActivity != null) {\r\n           // Here is the show of dialog box when click on start capture button\r\n        }\r\n    }\r\n\r\n\r\n    private final ActivityEventListener activityEventListener = new BaseActivityEventListener() {\r\n      @Override\r\npublic void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {\r\n    if (requestCode == REQUEST_MEDIA_PROJECTION &amp;&amp; resultCode == Activity.RESULT_OK) {\r\n        MediaProjection mediaProjection = mediaProjectionManager.getMediaProjection(resultCode, data);\r\n\r\n        DisplayMetrics metrics = new DisplayMetrics();\r\n        WindowManager windowManager = (WindowManager) getReactApplicationContext().getSystemService(Context.WINDOW_SERVICE);\r\n        windowManager.getDefaultDisplay().getMetrics(metrics);\r\n        @SuppressLint(&quot;WrongConstant&quot;) ImageReader imageReader = ImageReader.newInstance(metrics.widthPixels, metrics.heightPixels, PixelFormat.RGBA_8888, 1);\r\n        VirtualDisplay virtualDisplay = mediaProjection.createVirtualDisplay(\r\n                &quot;ScreenCapture&quot;,\r\n                metrics.widthPixels,\r\n                metrics.heightPixels,\r\n                metrics.densityDpi,\r\n                DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,\r\n                imageReader.getSurface(),\r\n                null,\r\n                null\r\n        );\r\n\r\n        imageReader.setOnImageAvailableListener(new ImageReader.OnImageAvailableListener() {\r\n            @Override\r\n            public void onImageAvailable(ImageReader reader) {\r\n                Image image = null;\r\n                FileOutputStream fos = null;\r\n                Bitmap bitmap = null;\r\n\r\n                try {\r\n                    image = reader.acquireLatestImage();\r\n                    if (image != null) {\r\n                        Image.Plane[] planes = image.getPlanes();\r\n                        ByteBuffer buffer = planes[0].getBuffer();\r\n                        int pixelStride = planes[0].getPixelStride();\r\n                        int rowStride = planes[0].getRowStride();\r\n                        int rowPadding = rowStride - pixelStride * metrics.widthPixels;\r\n\r\n                        bitmap = Bitmap.createBitmap(metrics.widthPixels + rowPadding / pixelStride, metrics.heightPixels, Bitmap.Config.ARGB_8888);\r\n                        bitmap.copyPixelsFromBuffer(buffer);\r\n\r\n                        File screenshotsDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\r\n                        File screenshotFile = new File(screenshotsDir, &quot;screenshot&quot; + screenshotCounter + &quot;.png&quot;);\r\n                        screenshotCounter++;\r\n                        fos = new FileOutputStream(screenshotFile);\r\n                        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);\r\n                        fos.flush(); // Add this line to flush the data to the file\r\n\r\n                    }\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                } finally {\r\n                    if (fos != null) {\r\n                        try {\r\n                            fos.close();\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    if (bitmap != null) {\r\n                        bitmap.recycle();\r\n                    }\r\n                    if (image != null) {\r\n                        image.close();\r\n                    }\r\n                    if (virtualDisplay != null) {\r\n                        virtualDisplay.release();\r\n                    }\r\n                    if (mediaProjection != null) {\r\n                        mediaProjection.stop();\r\n                    }\r\n                }\r\n            }\r\n        }, null);\r\n    }\r\n}\r\n\r\n    };\r\n\r\n    @SuppressLint(&quot;WrongConstant&quot;)\r\n    private VirtualDisplay createVirtualDisplay(MediaProjection mediaProjection) {\r\n        DisplayMetrics metrics = new DisplayMetrics();\r\n        WindowManager windowManager = (WindowManager) reactContext.getSystemService(Context.WINDOW_SERVICE);\r\n        windowManager.getDefaultDisplay().getMetrics(metrics);\r\n\r\n        imageReader = ImageReader.newInstance(\r\n                metrics.widthPixels,\r\n                metrics.heightPixels,\r\n                PixelFormat.RGBA_8888,\r\n                1\r\n        );\r\n\r\n        return mediaProjection.createVirtualDisplay(\r\n                &quot;ScreenCapture&quot;,\r\n                metrics.widthPixels,\r\n                metrics.heightPixels,\r\n                metrics.densityDpi,\r\n                DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,\r\n                imageReader.getSurface(),\r\n                null,\r\n                null\r\n        );\r\n    }\r\n}\r\n```\r\n# **ScreenCaptureService.java:**\r\n```\r\n\r\npublic class ScreenCaptureService extends Service {\r\n    private static final int SCREEN_CAPTURE_INTERVAL = 1000; // 1 second\r\n    private Handler handler;\r\n    private Runnable captureRunnable;\r\n    private ImageReader imageReader;\r\n    private int screenshotCounter = 1;\r\n\r\n    private VirtualDisplay virtualDisplay;\r\n\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n        handler = new Handler();\r\n        captureRunnable = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                captureScreen();\r\n                handler.postDelayed(this, SCREEN_CAPTURE_INTERVAL);\r\n            }\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n        handler.post(captureRunnable);\r\n        showNotification();\r\n        return START_STICKY;\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        handler.removeCallbacks(captureRunnable);\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return null;\r\n    }\r\n\r\n    private void captureScreen() {\r\n        imageReader.setOnImageAvailableListener(new ImageReader.OnImageAvailableListener() {\r\n            @Override\r\n            public void onImageAvailable(ImageReader reader) {\r\n                Image image = null;\r\n                FileOutputStream fos = null;\r\n                Bitmap bitmap = null;\r\n\r\n                try {\r\n                    image = reader.acquireLatestImage();\r\n                    if (image != null) {\r\n                        Image.Plane[] planes = image.getPlanes();\r\n                        ByteBuffer buffer = planes[0].getBuffer();\r\n                        int pixelStride = planes[0].getPixelStride();\r\n                        int rowStride = planes[0].getRowStride();\r\n                        int rowPadding = rowStride - pixelStride * image.getWidth();\r\n\r\n                        bitmap = Bitmap.createBitmap(image.getWidth() + rowPadding / pixelStride, image.getHeight(), Bitmap.Config.ARGB_8888);\r\n                        bitmap.copyPixelsFromBuffer(buffer);\r\n\r\n                        File screenshotsDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\r\n                        File screenshotFile = new File(screenshotsDir, &quot;screenshot&quot; + screenshotCounter + &quot;.png&quot;);\r\n                        screenshotCounter++;\r\n                        fos = new FileOutputStream(screenshotFile);\r\n                        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);\r\n                        fos.flush();\r\n                    }\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                } finally {\r\n                    if (fos != null) {\r\n                        try {\r\n                            fos.close();\r\n                        } catch (IOException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    if (bitmap != null) {\r\n                        bitmap.recycle();\r\n                    }\r\n                    if (image != null) {\r\n                        image.close();\r\n                    }\r\n                    if (virtualDisplay != null) {\r\n                        virtualDisplay.release();\r\n                    }\r\n                }\r\n            }\r\n        }, null);\r\n    }\r\n\r\n    private void showNotification() {\r\n      Here is the Notification\r\n    }\r\n}\r\n\r\n```\r\n\r\n# **React Native code:**\r\n```\r\nconst {ScreenCaptureModule} = NativeModules\r\nconst App = () =&gt; {\r\n  const startScreenCapture = () =&gt; {\r\n    ScreenCaptureModule.startScrerenCapture();\r\n  };\r\n  return (\r\n    &lt;View&gt;\r\n      &lt;Button onPress={startScreenCapture} title=&quot;Start Screen Capture&quot; /&gt;\r\n\r\n    &lt;/View&gt;\r\n  )\r\n}\r\n\r\nexport default App\r\n``` \r\nThis is the full code of my project. I think the issue is that while the notification function works as expected, no captures are stored in the designated directory happened because I have something wrong in the captureScreen function in ScreenCaptureService.java.\r\n\r\nNote: I granted the WRITE_EXTERNAL_PERMISSION. and I&#39;ll give you my Manifest.xml: \r\n```\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.MEDIA_CONTENT_CONTROL&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\r\n\r\n    &lt;application\r\n      android:name=&quot;.MainApplication&quot;\r\n      android:label=&quot;@string/app_name&quot;\r\n      android:icon=&quot;@mipmap/ic_launcher&quot;\r\n      android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n      android:allowBackup=&quot;false&quot;\r\n      android:theme=&quot;@style/AppTheme&quot;&gt;\r\n      \r\n      &lt;activity\r\n        android:name=&quot;.MainActivity&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:configChanges=&quot;keyboard|keyboardHidden|orientation|screenLayout|screenSize|smallestScreenSize|uiMode&quot;\r\n        android:launchMode=&quot;singleTask&quot;\r\n        android:windowSoftInputMode=&quot;adjustResize&quot;\r\n        android:exported=&quot;true&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n      &lt;/activity&gt;\r\n\r\n        &lt;service android:name=&quot;com.test.ScreenCaptureService&quot; android:exported=&quot;false&quot; /&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n\r\n```\r\n\r\n","title":"saving Screenshot to Pictures Directory not working in the foreground Service in Java","body":"<p>I have a React Native project. this app should captures the user screen and activities in the foreground. React Native cannot do this thing so I used Native Modules to write java. I made two java file which are <code>ScreenCaptureModule.java</code> and <code>ScreenCaptureService.java</code>. in this app I reach to: when the user opens the app he will see a Start Screen Capture button. when the user press on this button it will show a Dialog box like this:</p>\n<pre><code> AlertDialog.Builder builder = new AlertDialog.Builder(currentActivity);\n            builder.setTitle(&quot;Welcome, user!&quot;)\n                    .setMessage(&quot;You are about to use my app, which captures your screen every one second. Are you willing to proceed?&quot;)\n                    .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialog, int which) {\n                            Intent serviceIntent = new Intent(currentActivity, ScreenCaptureService.class);\n                            currentActivity.startService(serviceIntent);\n                            currentActivity.finish();\n                        }\n                    })\n                    .setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialog, int which) {\n                            // User declined, do nothing\n                        }\n                    })\n                    .show(); \n</code></pre>\n<p>if the user press on Yes the app will close and it will show a Notification like this:</p>\n<pre><code> private void showNotification() {\n        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n        if (notificationManager == null) {\n            return;\n        }\n\n        String channelId = &quot;screen_capture_channel&quot;;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            NotificationChannel channel = new NotificationChannel(channelId, &quot;Screen Capture&quot;, NotificationManager.IMPORTANCE_DEFAULT);\n            notificationManager.createNotificationChannel(channel);\n        }\n\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this, channelId)\n                .setContentTitle(&quot;Screen Capture&quot;)\n                .setContentText(&quot;Your screen is currently being captured. You can find the captures in the Pictures Directory.&quot;)\n                .setSmallIcon(R.drawable.ic_notification)\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT)\n                .setAutoCancel(true);\n\n        notificationManager.notify(1, builder.build());\n    } \n</code></pre>\n<p>after the Notification shown it should capture the screen every one second and save it in the Pictures Directory.  it shows the Notification but it doesn't save it in Pictures Directory. this is the problem. and now\nI'll give you the code of  <code>ScreenCapture.java</code> , <code>ScreenCaptureService.java</code> and <code>React Native</code>  to see How I call the methods. Again: the problem is when the app starting in the foreground it doesn't capture or save the image in the Pictures directory. it only shows a notification.</p>\n<h1><strong>ScreenCaptureModule.java:</strong></h1>\n<pre><code>public class ScreenCaptureModule extends ReactContextBaseJavaModule {\n    private static final int REQUEST_MEDIA_PROJECTION = 1;\n    private final MediaProjectionManager mediaProjectionManager;\n    private ImageReader imageReader;\n    private int screenshotCounter = 1;\n\n    private final ReactApplicationContext reactContext;\n\n    public ScreenCaptureModule(ReactApplicationContext reactContext) {\n        super(reactContext);\n        this.reactContext = reactContext;\n        mediaProjectionManager = (MediaProjectionManager) reactContext.getSystemService(Context.MEDIA_PROJECTION_SERVICE);\n        reactContext.addActivityEventListener(activityEventListener);\n    }\n\n    @NonNull\n    @Override\n    public String getName() {\n        return &quot;ScreenCaptureModule&quot;;\n    }\n\n    @ReactMethod\n    public void startScreenCapture() {\n        Activity currentActivity = getCurrentActivity();\n        if (currentActivity != null) {\n           // Here is the show of dialog box when click on start capture button\n        }\n    }\n\n\n    private final ActivityEventListener activityEventListener = new BaseActivityEventListener() {\n      @Override\npublic void onActivityResult(Activity activity, int requestCode, int resultCode, Intent data) {\n    if (requestCode == REQUEST_MEDIA_PROJECTION &amp;&amp; resultCode == Activity.RESULT_OK) {\n        MediaProjection mediaProjection = mediaProjectionManager.getMediaProjection(resultCode, data);\n\n        DisplayMetrics metrics = new DisplayMetrics();\n        WindowManager windowManager = (WindowManager) getReactApplicationContext().getSystemService(Context.WINDOW_SERVICE);\n        windowManager.getDefaultDisplay().getMetrics(metrics);\n        @SuppressLint(&quot;WrongConstant&quot;) ImageReader imageReader = ImageReader.newInstance(metrics.widthPixels, metrics.heightPixels, PixelFormat.RGBA_8888, 1);\n        VirtualDisplay virtualDisplay = mediaProjection.createVirtualDisplay(\n                &quot;ScreenCapture&quot;,\n                metrics.widthPixels,\n                metrics.heightPixels,\n                metrics.densityDpi,\n                DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,\n                imageReader.getSurface(),\n                null,\n                null\n        );\n\n        imageReader.setOnImageAvailableListener(new ImageReader.OnImageAvailableListener() {\n            @Override\n            public void onImageAvailable(ImageReader reader) {\n                Image image = null;\n                FileOutputStream fos = null;\n                Bitmap bitmap = null;\n\n                try {\n                    image = reader.acquireLatestImage();\n                    if (image != null) {\n                        Image.Plane[] planes = image.getPlanes();\n                        ByteBuffer buffer = planes[0].getBuffer();\n                        int pixelStride = planes[0].getPixelStride();\n                        int rowStride = planes[0].getRowStride();\n                        int rowPadding = rowStride - pixelStride * metrics.widthPixels;\n\n                        bitmap = Bitmap.createBitmap(metrics.widthPixels + rowPadding / pixelStride, metrics.heightPixels, Bitmap.Config.ARGB_8888);\n                        bitmap.copyPixelsFromBuffer(buffer);\n\n                        File screenshotsDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n                        File screenshotFile = new File(screenshotsDir, &quot;screenshot&quot; + screenshotCounter + &quot;.png&quot;);\n                        screenshotCounter++;\n                        fos = new FileOutputStream(screenshotFile);\n                        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);\n                        fos.flush(); // Add this line to flush the data to the file\n\n                    }\n                } catch (IOException e) {\n                    e.printStackTrace();\n                } finally {\n                    if (fos != null) {\n                        try {\n                            fos.close();\n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                    if (bitmap != null) {\n                        bitmap.recycle();\n                    }\n                    if (image != null) {\n                        image.close();\n                    }\n                    if (virtualDisplay != null) {\n                        virtualDisplay.release();\n                    }\n                    if (mediaProjection != null) {\n                        mediaProjection.stop();\n                    }\n                }\n            }\n        }, null);\n    }\n}\n\n    };\n\n    @SuppressLint(&quot;WrongConstant&quot;)\n    private VirtualDisplay createVirtualDisplay(MediaProjection mediaProjection) {\n        DisplayMetrics metrics = new DisplayMetrics();\n        WindowManager windowManager = (WindowManager) reactContext.getSystemService(Context.WINDOW_SERVICE);\n        windowManager.getDefaultDisplay().getMetrics(metrics);\n\n        imageReader = ImageReader.newInstance(\n                metrics.widthPixels,\n                metrics.heightPixels,\n                PixelFormat.RGBA_8888,\n                1\n        );\n\n        return mediaProjection.createVirtualDisplay(\n                &quot;ScreenCapture&quot;,\n                metrics.widthPixels,\n                metrics.heightPixels,\n                metrics.densityDpi,\n                DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,\n                imageReader.getSurface(),\n                null,\n                null\n        );\n    }\n}\n</code></pre>\n<h1><strong>ScreenCaptureService.java:</strong></h1>\n<pre><code>\npublic class ScreenCaptureService extends Service {\n    private static final int SCREEN_CAPTURE_INTERVAL = 1000; // 1 second\n    private Handler handler;\n    private Runnable captureRunnable;\n    private ImageReader imageReader;\n    private int screenshotCounter = 1;\n\n    private VirtualDisplay virtualDisplay;\n\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        handler = new Handler();\n        captureRunnable = new Runnable() {\n            @Override\n            public void run() {\n                captureScreen();\n                handler.postDelayed(this, SCREEN_CAPTURE_INTERVAL);\n            }\n        };\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        handler.post(captureRunnable);\n        showNotification();\n        return START_STICKY;\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        handler.removeCallbacks(captureRunnable);\n    }\n\n    @Nullable\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n\n    private void captureScreen() {\n        imageReader.setOnImageAvailableListener(new ImageReader.OnImageAvailableListener() {\n            @Override\n            public void onImageAvailable(ImageReader reader) {\n                Image image = null;\n                FileOutputStream fos = null;\n                Bitmap bitmap = null;\n\n                try {\n                    image = reader.acquireLatestImage();\n                    if (image != null) {\n                        Image.Plane[] planes = image.getPlanes();\n                        ByteBuffer buffer = planes[0].getBuffer();\n                        int pixelStride = planes[0].getPixelStride();\n                        int rowStride = planes[0].getRowStride();\n                        int rowPadding = rowStride - pixelStride * image.getWidth();\n\n                        bitmap = Bitmap.createBitmap(image.getWidth() + rowPadding / pixelStride, image.getHeight(), Bitmap.Config.ARGB_8888);\n                        bitmap.copyPixelsFromBuffer(buffer);\n\n                        File screenshotsDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);\n                        File screenshotFile = new File(screenshotsDir, &quot;screenshot&quot; + screenshotCounter + &quot;.png&quot;);\n                        screenshotCounter++;\n                        fos = new FileOutputStream(screenshotFile);\n                        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);\n                        fos.flush();\n                    }\n                } catch (IOException e) {\n                    e.printStackTrace();\n                } finally {\n                    if (fos != null) {\n                        try {\n                            fos.close();\n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                    if (bitmap != null) {\n                        bitmap.recycle();\n                    }\n                    if (image != null) {\n                        image.close();\n                    }\n                    if (virtualDisplay != null) {\n                        virtualDisplay.release();\n                    }\n                }\n            }\n        }, null);\n    }\n\n    private void showNotification() {\n      Here is the Notification\n    }\n}\n\n</code></pre>\n<h1><strong>React Native code:</strong></h1>\n<pre><code>const {ScreenCaptureModule} = NativeModules\nconst App = () =&gt; {\n  const startScreenCapture = () =&gt; {\n    ScreenCaptureModule.startScrerenCapture();\n  };\n  return (\n    &lt;View&gt;\n      &lt;Button onPress={startScreenCapture} title=&quot;Start Screen Capture&quot; /&gt;\n\n    &lt;/View&gt;\n  )\n}\n\nexport default App\n</code></pre>\n<p>This is the full code of my project. I think the issue is that while the notification function works as expected, no captures are stored in the designated directory happened because I have something wrong in the captureScreen function in ScreenCaptureService.java.</p>\n<p>Note: I granted the WRITE_EXTERNAL_PERMISSION. and I'll give you my Manifest.xml:</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.MEDIA_CONTENT_CONTROL&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;\n\n    &lt;application\n      android:name=&quot;.MainApplication&quot;\n      android:label=&quot;@string/app_name&quot;\n      android:icon=&quot;@mipmap/ic_launcher&quot;\n      android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n      android:allowBackup=&quot;false&quot;\n      android:theme=&quot;@style/AppTheme&quot;&gt;\n      \n      &lt;activity\n        android:name=&quot;.MainActivity&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:configChanges=&quot;keyboard|keyboardHidden|orientation|screenLayout|screenSize|smallestScreenSize|uiMode&quot;\n        android:launchMode=&quot;singleTask&quot;\n        android:windowSoftInputMode=&quot;adjustResize&quot;\n        android:exported=&quot;true&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n      &lt;/activity&gt;\n\n        &lt;service android:name=&quot;com.test.ScreenCaptureService&quot; android:exported=&quot;false&quot; /&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n\n</code></pre>\n"},{"tags":["java","spring","spring-aop"],"answers":[{"tags":[],"owner":{"account_id":16161163,"reputation":90,"user_id":11667201,"display_name":"mmeqbel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691855478,"creation_date":1691854747,"answer_id":76889996,"question_id":76889714,"body_markdown":"`@Aspect` is part of the AspectJ library, which is a stand-alone library that shipped with Spring and therefore, Spring can&#39;t change the `@Aspect` annotation source code to add the meta `@Component` (spring can&#39;t make `@Aspect` a stereotype in another word)\r\n\r\n`@Aspect` is part of aspectj annotations: `org.aspectj.lang.annotation.Aspect`\r\n\r\nfor \r\n\r\n&gt; if @Component is not necessary for aspect classes\r\n\r\n`@Component` is there just to register the Aspect in the application context via component scan (`@ComponentScan` that you add to `Config` class let Spring search for stereotype annotations and register them in the application context) \r\n\r\n","title":"Does an @Aspect have to be a @Component?","body":"<p><code>@Aspect</code> is part of the AspectJ library, which is a stand-alone library that shipped with Spring and therefore, Spring can't change the <code>@Aspect</code> annotation source code to add the meta <code>@Component</code> (spring can't make <code>@Aspect</code> a stereotype in another word)</p>\n<p><code>@Aspect</code> is part of aspectj annotations: <code>org.aspectj.lang.annotation.Aspect</code></p>\n<p>for</p>\n<blockquote>\n<p>if @Component is not necessary for aspect classes</p>\n</blockquote>\n<p><code>@Component</code> is there just to register the Aspect in the application context via component scan (<code>@ComponentScan</code> that you add to <code>Config</code> class let Spring search for stereotype annotations and register them in the application context)</p>\n"},{"tags":[],"owner":{"account_id":17900577,"reputation":11,"user_id":13004914,"display_name":"Alhassan Abubakar Sadiq"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691856051,"creation_date":1691856051,"answer_id":76890084,"question_id":76889714,"body_markdown":"In Spring, the `@Aspect` annotation is not directly related to being a stereotype annotation like `@Component`, `@Service`, or `@Repository`. Stereotype annotations are used to indicate that a class fulfills a specific role in the application, and they are often used in conjunction with component scanning to automatically discover and register those components in the Spring context.\r\n\r\nWhile `@Component`, `@Service`, and `@Repository` are all stereotype annotations, `@Aspect` serves a different purpose. It is used to declare a class as an aspect, which is a modular unit of cross-cutting concerns in Spring AOP (Aspect-Oriented Programming). Aspects are not meant to be automatically discovered by component scanning like typical Spring components.\r\n\r\nWhen you apply the `@Component` annotation to an aspect class, you&#39;re telling Spring to treat the aspect as a regular Spring component and manage its lifecycle. This is why you see the aspect being created and its advice being applied when it&#39;s a `@Component`.\r\n\r\nHowever, if you remove the `@Component` annotation from your aspect class, Spring no longer treats it as a managed component. As a result, the aspect is not registered with the Spring context, and its advice won&#39;t be applied to the target methods.\r\n\r\nTo summarize:\r\n\r\n1. The `@Aspect` annotation is not a stereotype annotation like `@Component`. It&#39;s used to define a class as an aspect to handle cross-cutting concerns.\r\n2. Adding `@Component` to an aspect class makes Spring treat it as a managed component, and the aspect&#39;s advice will be applied.\r\n3. Removing `@Component` from an aspect class will prevent Spring from managing it, and the aspect&#39;s advice won&#39;t be applied.\r\n\r\nSo, while `@Component` can be used with an aspect class to manage its lifecycle, it&#39;s not a requirement for aspects to function properly. Aspects can be used effectively without being managed components, but you&#39;ll need to manually register them with Spring&#39;s AOP configuration if they are not discovered via component scanning.","title":"Does an @Aspect have to be a @Component?","body":"<p>In Spring, the <code>@Aspect</code> annotation is not directly related to being a stereotype annotation like <code>@Component</code>, <code>@Service</code>, or <code>@Repository</code>. Stereotype annotations are used to indicate that a class fulfills a specific role in the application, and they are often used in conjunction with component scanning to automatically discover and register those components in the Spring context.</p>\n<p>While <code>@Component</code>, <code>@Service</code>, and <code>@Repository</code> are all stereotype annotations, <code>@Aspect</code> serves a different purpose. It is used to declare a class as an aspect, which is a modular unit of cross-cutting concerns in Spring AOP (Aspect-Oriented Programming). Aspects are not meant to be automatically discovered by component scanning like typical Spring components.</p>\n<p>When you apply the <code>@Component</code> annotation to an aspect class, you're telling Spring to treat the aspect as a regular Spring component and manage its lifecycle. This is why you see the aspect being created and its advice being applied when it's a <code>@Component</code>.</p>\n<p>However, if you remove the <code>@Component</code> annotation from your aspect class, Spring no longer treats it as a managed component. As a result, the aspect is not registered with the Spring context, and its advice won't be applied to the target methods.</p>\n<p>To summarize:</p>\n<ol>\n<li>The <code>@Aspect</code> annotation is not a stereotype annotation like <code>@Component</code>. It's used to define a class as an aspect to handle cross-cutting concerns.</li>\n<li>Adding <code>@Component</code> to an aspect class makes Spring treat it as a managed component, and the aspect's advice will be applied.</li>\n<li>Removing <code>@Component</code> from an aspect class will prevent Spring from managing it, and the aspect's advice won't be applied.</li>\n</ol>\n<p>So, while <code>@Component</code> can be used with an aspect class to manage its lifecycle, it's not a requirement for aspects to function properly. Aspects can be used effectively without being managed components, but you'll need to manually register them with Spring's AOP configuration if they are not discovered via component scanning.</p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76889996,"answer_count":2,"score":1,"last_activity_date":1691856051,"creation_date":1691850208,"question_id":76889714,"body_markdown":"I made a tiny app to check a few things. Here&#39;s the code (assume all the files are in the same package)\r\n```java\r\n@Configuration\r\n@ComponentScan\r\n@EnableAspectJAutoProxy\r\npublic class Config {\r\n}\r\n```\r\n```java\r\n@Component\r\npublic class SomeBean {\r\n    public SomeBean() {\r\n        System.out.println(&quot;Creating SomeBean...&quot;);\r\n    }\r\n\r\n    public String someAspectedMethod() {\r\n        return &quot;some string&quot;;\r\n    }\r\n}\r\n```\r\n```java\r\n@Aspect\r\n@Component // note this\r\npublic class SomeAspect {\r\n\r\n    public SomeAspect() {\r\n        System.out.println(&quot;Creating SomeAspect...&quot;);\r\n    }\r\n\r\n    @Around(&quot;execution(String SomeBean.someAspectedMethod())&quot;)\r\n    public Object methodAdvice(ProceedingJoinPoint joinPoint) {\r\n        System.out.println(&quot;Running methodAdvice()...&quot;); // never gets printed\r\n        Object object;\r\n        try {\r\n            object = joinPoint.proceed();\r\n        } catch (Throwable e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        return object;\r\n    }\r\n}\r\n```\r\n```java\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        var context = new AnnotationConfigApplicationContext(Config.class);\r\n        SomeBean someBean = context.getBean(SomeBean.class);\r\n        String returnedVal = someBean.someAspectedMethod();\r\n        System.out.println(returnedVal);\r\n        System.out.println(returnedVal.getClass());\r\n    }\r\n}\r\n```\r\nConsole output:\r\n```\r\nCreating SomeAspect...\r\nCreating SomeBean...\r\nRunning methodAspect()...\r\nsome string\r\nclass java.lang.String\r\n```\r\nI noticed that once I remove the `@Component` annotation, the aspect is no longer applied\r\n```java\r\n@Aspect\r\n// @Component\r\npublic class SomeAspect {\r\n```\r\nConsole output:\r\n```java\r\nCreating SomeBean...\r\nsome string\r\nclass java.lang.String\r\n```\r\nWhich begs the question: why isn&#39;t `@Aspect` a `@Component` (stereotype annotation) just like `@Service`, `@Repository` and a few others? And if `@Component` is not necessary for aspect classes, then why does the lack of it effectively disables my aspect?\r\n\r\n[This][1] doesn&#39;t answer my question\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/33612156/how-aspect-with-component-annotation-works-under-the-hood","title":"Does an @Aspect have to be a @Component?","body":"<p>I made a tiny app to check a few things. Here's the code (assume all the files are in the same package)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ComponentScan\n@EnableAspectJAutoProxy\npublic class Config {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class SomeBean {\n    public SomeBean() {\n        System.out.println(&quot;Creating SomeBean...&quot;);\n    }\n\n    public String someAspectedMethod() {\n        return &quot;some string&quot;;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n@Component // note this\npublic class SomeAspect {\n\n    public SomeAspect() {\n        System.out.println(&quot;Creating SomeAspect...&quot;);\n    }\n\n    @Around(&quot;execution(String SomeBean.someAspectedMethod())&quot;)\n    public Object methodAdvice(ProceedingJoinPoint joinPoint) {\n        System.out.println(&quot;Running methodAdvice()...&quot;); // never gets printed\n        Object object;\n        try {\n            object = joinPoint.proceed();\n        } catch (Throwable e) {\n            throw new RuntimeException(e);\n        }\n        return object;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class App {\n    public static void main(String[] args) {\n        var context = new AnnotationConfigApplicationContext(Config.class);\n        SomeBean someBean = context.getBean(SomeBean.class);\n        String returnedVal = someBean.someAspectedMethod();\n        System.out.println(returnedVal);\n        System.out.println(returnedVal.getClass());\n    }\n}\n</code></pre>\n<p>Console output:</p>\n<pre><code>Creating SomeAspect...\nCreating SomeBean...\nRunning methodAspect()...\nsome string\nclass java.lang.String\n</code></pre>\n<p>I noticed that once I remove the <code>@Component</code> annotation, the aspect is no longer applied</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Aspect\n// @Component\npublic class SomeAspect {\n</code></pre>\n<p>Console output:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Creating SomeBean...\nsome string\nclass java.lang.String\n</code></pre>\n<p>Which begs the question: why isn't <code>@Aspect</code> a <code>@Component</code> (stereotype annotation) just like <code>@Service</code>, <code>@Repository</code> and a few others? And if <code>@Component</code> is not necessary for aspect classes, then why does the lack of it effectively disables my aspect?</p>\n<p><a href=\"https://stackoverflow.com/questions/33612156/how-aspect-with-component-annotation-works-under-the-hood\">This</a> doesn't answer my question</p>\n"},{"tags":["java","gradle","intellij-idea","gradle-kotlin-dsl"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1691994772,"post_id":76888617,"comment_id":135560521,"body_markdown":"Instead of using flatDir you can try to create a local Maven repository and put these libraries there. See the related discussion https://discuss.gradle.org/t/how-to-supply-source-jars-from-flatdir-for-eclipse-debugging/35670/7","body":"Instead of using flatDir you can try to create a local Maven repository and put these libraries there. See the related discussion <a href=\"https://discuss.gradle.org/t/how-to-supply-source-jars-from-flatdir-for-eclipse-debugging/35670/7\" rel=\"nofollow noreferrer\">discuss.gradle.org/t/&hellip;</a>"}],"owner":{"account_id":5255036,"reputation":1267,"user_id":4198170,"display_name":"Tobse"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691855911,"creation_date":1691832543,"question_id":76888617,"body_markdown":"I have a Gradle project with Koltin-DSL which stores the dependencies in a local directory called `lib`. This folder contains my `commons-lang3-3.12.0.jar` dependency.  \r\nHow can I reference an additional `commons-lang3-3.12.0-sources.jar` which contains the sources for this dependency?\r\nAfter a Gradle import, my IDE (IntelliJ) should be able to find the source code for this dependency, in my local filesystem - without searching it only.\r\n  \r\n#### Project Structure\r\n```text\r\nroot\r\n - app\r\n   - lib\r\n     commons-lang3-3.12.0.jar\r\n     commons-lang3-3.12.0-sources.jar &lt;-- I want to reference this\r\n  build.gradle.kts\r\n```\r\n\r\n#### `build.gradle.kts`\r\n```kotlin\r\nrepositories {\r\n  flatDir {\r\n    dirs(&quot;lib&quot;)\r\n  }\r\n}\r\n\r\ndependencies {\r\n  implementation(&quot;:commons-lang3:3.12.0&quot;)\r\n}\r\n```\r\n\r\nOn Maven this would work, by just follow the naming pattern with the suffix `sources.jar`.\r\nI found an answer, from [Peter Niederwieser](https://stackoverflow.com/a/22448170/4198170) that:\r\n&gt; Adding sources and Javadoc Jars for local libraries will be supported in Gradle 1.12 or 1.13\r\nBut I didn&#39;t find any hint in the Gradle Doku, how to setup.\r\n\r\nThe `commons-lang3` was just an example, and I know I can just add it as regular dependency and let the IDE download the sources from maven central. But I have other dependencies which are not published in the maven central or GitHub. So how could I just point Gradle to the Source file or JavaDoc - without manual choosing the files in the IDE with _Choose sources...:\r\n[![enter image description here][1]][1]_\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NKZ0a.png","title":"Add sources and Javadoc Jars to Gradle for local flatdir dependency","body":"<p>I have a Gradle project with Koltin-DSL which stores the dependencies in a local directory called <code>lib</code>. This folder contains my <code>commons-lang3-3.12.0.jar</code> dependency.<br />\nHow can I reference an additional <code>commons-lang3-3.12.0-sources.jar</code> which contains the sources for this dependency?\nAfter a Gradle import, my IDE (IntelliJ) should be able to find the source code for this dependency, in my local filesystem - without searching it only.</p>\n<h4>Project Structure</h4>\n<pre><code>root\n - app\n   - lib\n     commons-lang3-3.12.0.jar\n     commons-lang3-3.12.0-sources.jar &lt;-- I want to reference this\n  build.gradle.kts\n</code></pre>\n<h4><code>build.gradle.kts</code></h4>\n<pre class=\"lang-kotlin prettyprint-override\"><code>repositories {\n  flatDir {\n    dirs(&quot;lib&quot;)\n  }\n}\n\ndependencies {\n  implementation(&quot;:commons-lang3:3.12.0&quot;)\n}\n</code></pre>\n<p>On Maven this would work, by just follow the naming pattern with the suffix <code>sources.jar</code>.\nI found an answer, from <a href=\"https://stackoverflow.com/a/22448170/4198170\">Peter Niederwieser</a> that:</p>\n<blockquote>\n<p>Adding sources and Javadoc Jars for local libraries will be supported in Gradle 1.12 or 1.13\nBut I didn't find any hint in the Gradle Doku, how to setup.</p>\n</blockquote>\n<p>The <code>commons-lang3</code> was just an example, and I know I can just add it as regular dependency and let the IDE download the sources from maven central. But I have other dependencies which are not published in the maven central or GitHub. So how could I just point Gradle to the Source file or JavaDoc - without manual choosing the files in the IDE with <em>Choose sources...:\n<a href=\"https://i.stack.imgur.com/NKZ0a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NKZ0a.png\" alt=\"enter image description here\" /></a></em></p>\n"},{"tags":["java","spring-data-jpa","mybatis","spring-mybatis"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":9,"creation_date":1447253210,"post_id":33652936,"comment_id":55079274,"body_markdown":"MyBatis is not a JPA implementation. Don&#39;t see how you could use Spring-Data-JPA with it.","body":"MyBatis is not a JPA implementation. Don&#39;t see how you could use Spring-Data-JPA with it."},{"owner":{"account_id":4989547,"reputation":544,"user_id":4012202,"accept_rate":29,"display_name":"srini"},"score":0,"creation_date":1447254559,"post_id":33652936,"comment_id":55080215,"body_markdown":"@JBNizet Interesting that you mentioned it. I happened to assume that MyBatis is a ORM implementing JPA like Hibernate does. Guess this question is invalid in that case. Thank you.","body":"@JBNizet Interesting that you mentioned it. I happened to assume that MyBatis is a ORM implementing JPA like Hibernate does. Guess this question is invalid in that case. Thank you."},{"owner":{"account_id":10891011,"reputation":123,"user_id":8006794,"display_name":"Karthikeyan"},"score":0,"creation_date":1495692126,"post_id":33652936,"comment_id":75364170,"body_markdown":"You can show the complete spring xml file and complete stack trace. It will be useful to identify","body":"You can show the complete spring xml file and complete stack trace. It will be useful to identify"},{"owner":{"account_id":942344,"reputation":4204,"user_id":970200,"display_name":"Ian Lim"},"score":1,"creation_date":1515251342,"post_id":33652936,"comment_id":83233930,"body_markdown":"You can use both of them together (which I have been doing) but according to your info above, it is not enough to determine what you are trying to achieve.","body":"You can use both of them together (which I have been doing) but according to your info above, it is not enough to determine what you are trying to achieve."}],"answers":[{"tags":[],"owner":{"account_id":8398268,"reputation":41,"user_id":6304538,"display_name":"stormning"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1462641110,"creation_date":1462641110,"answer_id":37091408,"question_id":33652936,"body_markdown":"Why not try [spring-data-jpa-extra][1]\r\n\r\n\r\n  [1]: https://github.com/stormning/spring-data-jpa-extra\r\n\r\nIt provide a dynamic query solution for spring-data-jpa like mybatis, but much easier than mybatis.\r\n\r\nI think you would like it  : )","title":"Spring Data JPA &amp; MyBatis","body":"<p>Why not try <a href=\"https://github.com/stormning/spring-data-jpa-extra\" rel=\"nofollow\">spring-data-jpa-extra</a></p>\n\n<p>It provide a dynamic query solution for spring-data-jpa like mybatis, but much easier than mybatis.</p>\n\n<p>I think you would like it  : )</p>\n"},{"tags":[],"owner":{"display_name":"user2053904"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1462981765,"creation_date":1462981765,"answer_id":37167591,"question_id":33652936,"body_markdown":"# Spring Data MyBatis  \nIf you would **not** like to use a JPA implementation like [Spring-Data-JPA][1] module, but you like use [Spring-Data][2] you can find   [Spring-Data-Mybatis][3] a useful project.  \n\nI know that this is not precise answer to your question but I hope that this answer can be interesting.\n\n\n  [1]: http://projects.spring.io/spring-data-jpa\n  [2]: http://projects.spring.io/spring-data/ &quot;Spring Data project&quot;\n  [3]: https://github.com/jclagache/spring-data-mybatis","title":"Spring Data JPA &amp; MyBatis","body":"<h1>Spring Data MyBatis</h1>\n<p>If you would <strong>not</strong> like to use a JPA implementation like <a href=\"http://projects.spring.io/spring-data-jpa\" rel=\"nofollow noreferrer\">Spring-Data-JPA</a> module, but you like use <a href=\"http://projects.spring.io/spring-data/\" rel=\"nofollow noreferrer\" title=\"Spring Data project\">Spring-Data</a> you can find   <a href=\"https://github.com/jclagache/spring-data-mybatis\" rel=\"nofollow noreferrer\">Spring-Data-Mybatis</a> a useful project.</p>\n<p>I know that this is not precise answer to your question but I hope that this answer can be interesting.</p>\n"},{"tags":[],"owner":{"account_id":2437868,"reputation":13395,"user_id":2127277,"accept_rate":66,"display_name":"Dimitri Kopriwa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1597137382,"creation_date":1508736216,"answer_id":46882434,"question_id":33652936,"body_markdown":"## Spring-Data-Mybatis Hatunet version\r\n\r\nI am using this project: https://github.com/hatunet/spring-data-mybatis \r\n\r\nIt fit very well with spring-data-mybatis and it have also the paginated repository.\r\n\r\nWork very well on production project.\r\n\r\n**update 08/2020**\r\n\r\n\r\nThe projet as moved to another webspace and evolved: https://github.com/easybest/spring-data-mybatis","title":"Spring Data JPA &amp; MyBatis","body":"<h2>Spring-Data-Mybatis Hatunet version</h2>\n<p>I am using this project: <a href=\"https://github.com/hatunet/spring-data-mybatis\" rel=\"nofollow noreferrer\">https://github.com/hatunet/spring-data-mybatis</a></p>\n<p>It fit very well with spring-data-mybatis and it have also the paginated repository.</p>\n<p>Work very well on production project.</p>\n<p><strong>update 08/2020</strong></p>\n<p>The projet as moved to another webspace and evolved: <a href=\"https://github.com/easybest/spring-data-mybatis\" rel=\"nofollow noreferrer\">https://github.com/easybest/spring-data-mybatis</a></p>\n"},{"tags":[],"owner":{"account_id":9922482,"reputation":179,"user_id":7345159,"display_name":"Pankaj Shet"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1594745416,"creation_date":1594745416,"answer_id":62900083,"question_id":33652936,"body_markdown":"Mybatis does not implement JPA.\r\nMybatis is not ORM Framework.  JPA is ORM Specification which is implemented by Hibernate, Toplink, Eclipselink . Since Mybatis does  not mplement JPA, it does not come under the list of JPA providers.\r\nHence, you cannot use mybatis as a JPA framework.\r\nMybatis is a data mapper framework which is completely different framework compared to JPA.\r\nIn JPA and ORM frameworks,  you map Objects /Entities to the corresponding sql tables and you work on objects and not on tables directly unless you use their native  queries.\r\nIn mybatis , you play directly with sql data..\r\nHope this clears the difference between mybatis and JPA.\r\nHence when you want mybatis with spring data you use spring data mybatis independently and not spring data JPA.","title":"Spring Data JPA &amp; MyBatis","body":"<p>Mybatis does not implement JPA.\nMybatis is not ORM Framework.  JPA is ORM Specification which is implemented by Hibernate, Toplink, Eclipselink . Since Mybatis does  not mplement JPA, it does not come under the list of JPA providers.\nHence, you cannot use mybatis as a JPA framework.\nMybatis is a data mapper framework which is completely different framework compared to JPA.\nIn JPA and ORM frameworks,  you map Objects /Entities to the corresponding sql tables and you work on objects and not on tables directly unless you use their native  queries.\nIn mybatis , you play directly with sql data..\nHope this clears the difference between mybatis and JPA.\nHence when you want mybatis with spring data you use spring data mybatis independently and not spring data JPA.</p>\n"},{"tags":[],"owner":{"account_id":3652842,"reputation":210,"user_id":3044539,"accept_rate":20,"display_name":"Atif"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594749326,"creation_date":1594749326,"answer_id":62901144,"question_id":33652936,"body_markdown":"Here is the configuration of mybatis and jpa in spring framework. Mybatis and jpa are different framework so you cannot use mybatis as a JPA framework. Feel free to ask any question if you cannot catch up the configuration.\r\n\r\n```\r\npackage com.mastering.springbatch.config;\r\n\r\nimport org.apache.ibatis.session.SqlSessionFactory;\r\nimport org.mybatis.spring.SqlSessionFactoryBean;\r\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.Primary;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\r\nimport org.springframework.orm.jpa.JpaTransactionManager;\r\nimport org.springframework.orm.jpa.JpaVendorAdapter;\r\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\r\n\r\nimport javax.sql.DataSource;\r\n\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(\r\n        basePackages = {&quot;com.mastering.springbatch.dao&quot;,\r\n                &quot;com.mastering.springbatch.repository&quot;})\r\n@EntityScan(&quot;com.mastering.springbatch.entity&quot;)\r\npublic class DataConfig {\r\n    private final String ENTITY_PACKAGE = &quot;com.mastering.springbatch.entity&quot;;\r\n    private DriverManagerDataSource dataSource;\r\n\r\n    @Primary\r\n    @Bean(value = &quot;customDataSource&quot;)\r\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\r\n    public DataSource dataSource() {\r\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        this.dataSource = dataSource;\r\n        return dataSource;\r\n    }\r\n\r\n    @Primary\r\n    @Bean(value = &quot;entityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n        LocalContainerEntityManagerFactoryBean emf =\r\n                new LocalContainerEntityManagerFactoryBean();\r\n        emf.setPackagesToScan(ENTITY_PACKAGE);\r\n        emf.setDataSource(dataSource());\r\n        emf.setJpaVendorAdapter(jpaVendorAdapter());\r\n        return emf;\r\n    }\r\n\r\n    @Primary\r\n    @Bean(value = &quot;sqlSessionFactory&quot;)\r\n    public SqlSessionFactory sqlSessionFactory() throws Exception {\r\n        SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();\r\n        factoryBean.setDataSource(dataSource());\r\n        return factoryBean.getObject();\r\n    }\r\n\r\n\r\n    @Primary\r\n    @Bean(name = &quot;transactionManager&quot;)\r\n    public PlatformTransactionManager transactionManager() {\r\n        JpaTransactionManager tm = new JpaTransactionManager();\r\n        tm.setEntityManagerFactory(entityManagerFactory().getObject());\r\n        return tm;\r\n    }\r\n\r\n    private JpaVendorAdapter jpaVendorAdapter() {\r\n        HibernateJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();\r\n        jpaVendorAdapter.setShowSql(true);\r\n        jpaVendorAdapter.setGenerateDdl(true);\r\n        jpaVendorAdapter.setDatabasePlatform(&quot;org.hibernate.dialect.MySQLDialect&quot;);\r\n        return jpaVendorAdapter;\r\n    }\r\n}\r\n\r\n```\r\nhere is the `build.gradle` file\r\n```\r\nbuildscript {\r\n    ext {\r\n        springBootVersion = &#39;2.1.8.RELEASE&#39;\r\n        springBootDepManagementVersion = &#39;1.0.8.RELEASE&#39;\r\n    }\r\n    repositories {\r\n        mavenLocal()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n        classpath &quot;io.spring.gradle:dependency-management-plugin:${springBootDepManagementVersion}&quot;\r\n    }\r\n}\r\n\r\napply plugin: &#39;org.springframework.boot&#39;\r\napply plugin: &#39;io.spring.dependency-management&#39;\r\napply plugin: &#39;java&#39;\r\napply plugin: &#39;idea&#39;\r\n\r\n\r\ngroup &#39;com.learning&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\nsourceCompatibility = 1.8\r\n\r\nconfigurations {\r\n    implementation.exclude module: &quot;spring-boot-starter-tomcat&quot;\r\n}\r\n\r\nrepositories {\r\n    mavenLocal()\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    compile &#39;org.mybatis:mybatis:3.5.0&#39;\r\n    compile &#39;org.mybatis:mybatis-spring:2.0.0&#39;\r\n\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-batch&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n    \r\n    implementation(&quot;mysql:mysql-connector-java:8.0.14&quot;)\r\n    \r\n//    implementation(&quot;io.springfox:springfox-swagger2:2.7.0&quot;)\r\n//    implementation(&quot;io.springfox:springfox-swagger-ui:2.7.0&quot;)\r\n    \r\n    implementation(&quot;org.projectlombok:lombok:1.18.10&quot;)\r\n    annotationProcessor(&quot;org.projectlombok:lombok:1.18.10&quot;)\r\n    compile group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.6&#39;\r\n\r\n    testAnnotationProcessor(&quot;org.projectlombok:lombok:1.18.10&quot;)\r\n    testCompile(&quot;junit:junit:4.12&quot;)\r\n    testCompile(&quot;org.mockito:mockito-core:2.1.0&quot;)\r\n    testCompile(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n\r\n}\r\n\r\nspringBoot {\r\n    buildInfo()\r\n}\r\n\r\n```\r\n```","title":"Spring Data JPA &amp; MyBatis","body":"<p>Here is the configuration of mybatis and jpa in spring framework. Mybatis and jpa are different framework so you cannot use mybatis as a JPA framework. Feel free to ask any question if you cannot catch up the configuration.</p>\n<pre><code>package com.mastering.springbatch.config;\n\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.mybatis.spring.SqlSessionFactoryBean;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.JpaVendorAdapter;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\nimport javax.sql.DataSource;\n\n@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(\n        basePackages = {&quot;com.mastering.springbatch.dao&quot;,\n                &quot;com.mastering.springbatch.repository&quot;})\n@EntityScan(&quot;com.mastering.springbatch.entity&quot;)\npublic class DataConfig {\n    private final String ENTITY_PACKAGE = &quot;com.mastering.springbatch.entity&quot;;\n    private DriverManagerDataSource dataSource;\n\n    @Primary\n    @Bean(value = &quot;customDataSource&quot;)\n    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)\n    public DataSource dataSource() {\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        this.dataSource = dataSource;\n        return dataSource;\n    }\n\n    @Primary\n    @Bean(value = &quot;entityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n        LocalContainerEntityManagerFactoryBean emf =\n                new LocalContainerEntityManagerFactoryBean();\n        emf.setPackagesToScan(ENTITY_PACKAGE);\n        emf.setDataSource(dataSource());\n        emf.setJpaVendorAdapter(jpaVendorAdapter());\n        return emf;\n    }\n\n    @Primary\n    @Bean(value = &quot;sqlSessionFactory&quot;)\n    public SqlSessionFactory sqlSessionFactory() throws Exception {\n        SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();\n        factoryBean.setDataSource(dataSource());\n        return factoryBean.getObject();\n    }\n\n\n    @Primary\n    @Bean(name = &quot;transactionManager&quot;)\n    public PlatformTransactionManager transactionManager() {\n        JpaTransactionManager tm = new JpaTransactionManager();\n        tm.setEntityManagerFactory(entityManagerFactory().getObject());\n        return tm;\n    }\n\n    private JpaVendorAdapter jpaVendorAdapter() {\n        HibernateJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();\n        jpaVendorAdapter.setShowSql(true);\n        jpaVendorAdapter.setGenerateDdl(true);\n        jpaVendorAdapter.setDatabasePlatform(&quot;org.hibernate.dialect.MySQLDialect&quot;);\n        return jpaVendorAdapter;\n    }\n}\n\n</code></pre>\n<p>here is the <code>build.gradle</code> file</p>\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '2.1.8.RELEASE'\n        springBootDepManagementVersion = '1.0.8.RELEASE'\n    }\n    repositories {\n        mavenLocal()\n        mavenCentral()\n    }\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\n        classpath &quot;io.spring.gradle:dependency-management-plugin:${springBootDepManagementVersion}&quot;\n    }\n}\n\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\napply plugin: 'java'\napply plugin: 'idea'\n\n\ngroup 'com.learning'\nversion '1.0-SNAPSHOT'\n\nsourceCompatibility = 1.8\n\nconfigurations {\n    implementation.exclude module: &quot;spring-boot-starter-tomcat&quot;\n}\n\nrepositories {\n    mavenLocal()\n    mavenCentral()\n}\n\ndependencies {\n    compile 'org.mybatis:mybatis:3.5.0'\n    compile 'org.mybatis:mybatis-spring:2.0.0'\n\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-batch&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n    \n    implementation(&quot;mysql:mysql-connector-java:8.0.14&quot;)\n    \n//    implementation(&quot;io.springfox:springfox-swagger2:2.7.0&quot;)\n//    implementation(&quot;io.springfox:springfox-swagger-ui:2.7.0&quot;)\n    \n    implementation(&quot;org.projectlombok:lombok:1.18.10&quot;)\n    annotationProcessor(&quot;org.projectlombok:lombok:1.18.10&quot;)\n    compile group: 'commons-io', name: 'commons-io', version: '2.6'\n\n    testAnnotationProcessor(&quot;org.projectlombok:lombok:1.18.10&quot;)\n    testCompile(&quot;junit:junit:4.12&quot;)\n    testCompile(&quot;org.mockito:mockito-core:2.1.0&quot;)\n    testCompile(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\n\n}\n\nspringBoot {\n    buildInfo()\n}\n\n</code></pre>\n<pre><code></code></pre>\n"}],"owner":{"account_id":4989547,"reputation":544,"user_id":4012202,"accept_rate":29,"display_name":"srini"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33357,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1691855433,"creation_date":1447252932,"question_id":33652936,"body_markdown":"I am trying to use Spring Data JPA with MyBatis. Since there isnt a Vendor Adapter for MyBatis, what is the alternative here?\r\n\r\n    &lt;bean id=&quot;entityManagerFactory&quot;\r\n\t\tclass=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;packagesToScan&quot; value=&quot;com.abc.xyz.domain&quot;/&gt;\r\n\t&lt;/bean&gt;\r\n\r\nI am getting the below exception when I tried to initialize my application.\r\n\r\n    Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: No PersistenceProvider specified in EntityManagerFactory configuration, and chosen PersistenceUnitInfo does not specify a provider class name either\r\n\r\nThanks","title":"Spring Data JPA &amp; MyBatis","body":"<p>I am trying to use Spring Data JPA with MyBatis. Since there isnt a Vendor Adapter for MyBatis, what is the alternative here?</p>\n\n<pre><code>&lt;bean id=\"entityManagerFactory\"\n    class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"dataSource\" /&gt;\n    &lt;property name=\"packagesToScan\" value=\"com.abc.xyz.domain\"/&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>I am getting the below exception when I tried to initialize my application.</p>\n\n<pre><code>Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: No PersistenceProvider specified in EntityManagerFactory configuration, and chosen PersistenceUnitInfo does not specify a provider class name either\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","database","mongodb"],"comments":[{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1599054509,"post_id":63705331,"comment_id":112654913,"body_markdown":"There are many ways you can write a query using Spring Data MongoDB. One way is to query using the `MongoTemplate#exists` method.","body":"There are many ways you can write a query using Spring Data MongoDB. One way is to query using the <code>MongoTemplate#exists</code> method."}],"answers":[{"tags":[],"owner":{"account_id":17832603,"reputation":109,"user_id":12952268,"display_name":"Stoil Terziev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1599050993,"creation_date":1599049708,"answer_id":63705537,"question_id":63705331,"body_markdown":"You will need a repository which will do the search. Create something like this:\r\n\r\n    @Repository(&quot;user&quot;)\r\n    public interface UserRepository extends MongoRepository&lt;User, String&gt; {\r\n    \t\r\n    \tpublic Optional&lt;User&gt; findOneByTwitterId(String twitterId);\r\n    \r\n    }\r\nThen you can check if there is a value in the optional.\r\n\r\nOf course they are plenty of other solution. You can also write a query to count how many users have this twitter id","title":"How to check if specific field has specific value in MongoDB using Java Spring?","body":"<p>You will need a repository which will do the search. Create something like this:</p>\n<pre><code>@Repository(&quot;user&quot;)\npublic interface UserRepository extends MongoRepository&lt;User, String&gt; {\n    \n    public Optional&lt;User&gt; findOneByTwitterId(String twitterId);\n\n}\n</code></pre>\n<p>Then you can check if there is a value in the optional.</p>\n<p>Of course they are plenty of other solution. You can also write a query to count how many users have this twitter id</p>\n"},{"tags":[],"owner":{"account_id":12910496,"reputation":111,"user_id":9336348,"display_name":"Learner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691853802,"creation_date":1691853802,"answer_id":76889950,"question_id":63705331,"body_markdown":"    @Repository(&quot;user&quot;)\r\n    public interface UserRepository extends MongoRepository&lt;User, String&gt; {\r\n        @Query (value = &quot; {&#39;twitterId&#39;: ?0} &quot;, count = true)\r\n        public int findByTwitterId(String twitterId);\r\n    }","title":"How to check if specific field has specific value in MongoDB using Java Spring?","body":"<pre><code>@Repository(&quot;user&quot;)\npublic interface UserRepository extends MongoRepository&lt;User, String&gt; {\n    @Query (value = &quot; {'twitterId': ?0} &quot;, count = true)\n    public int findByTwitterId(String twitterId);\n}\n</code></pre>\n"}],"owner":{"display_name":"user14197608"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":820,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63705537,"answer_count":2,"score":1,"last_activity_date":1691853802,"creation_date":1599048972,"question_id":63705331,"body_markdown":"This is my structure. Let&#39;s say I have got a bunch of these objects in my collection. I want to search for value for the field `twitterId`. In this case, let&#39;s say I want to check whether `102030 ` value exists in any of my `twitterId` fields? How can I build this query in Java Spring?\r\n\r\n    { \r\n    &quot;_id&quot; : ObjectId(&quot;5f4edc8f0edc9e79dcd58cb4&quot;), \r\n    &quot;twitterId&quot; : &quot;102030&quot;, \r\n    &quot;fullName&quot; : &quot;Elon Musk&quot;, \r\n    &quot;followers&quot; : [ ], \r\n    &quot;_class&quot; : &quot;xxxx.yyyyy.model.User&quot; \r\n    }","title":"How to check if specific field has specific value in MongoDB using Java Spring?","body":"<p>This is my structure. Let's say I have got a bunch of these objects in my collection. I want to search for value for the field <code>twitterId</code>. In this case, let's say I want to check whether <code>102030 </code> value exists in any of my <code>twitterId</code> fields? How can I build this query in Java Spring?</p>\n<pre><code>{ \n&quot;_id&quot; : ObjectId(&quot;5f4edc8f0edc9e79dcd58cb4&quot;), \n&quot;twitterId&quot; : &quot;102030&quot;, \n&quot;fullName&quot; : &quot;Elon Musk&quot;, \n&quot;followers&quot; : [ ], \n&quot;_class&quot; : &quot;xxxx.yyyyy.model.User&quot; \n}\n</code></pre>\n"},{"tags":["java","or-tools","constraint-programming","cp-sat-solver"],"comments":[{"owner":{"account_id":10605067,"reputation":2646,"user_id":7810777,"display_name":"Stradivari"},"score":0,"creation_date":1585139483,"post_id":60848729,"comment_id":107656910,"body_markdown":"I don&#39;t really understand the question, can&#39;t you wait until `searchAllSolutions` finishes?","body":"I don&#39;t really understand the question, can&#39;t you wait until <code>searchAllSolutions</code> finishes?"},{"owner":{"account_id":3038988,"reputation":237,"user_id":2576456,"display_name":"sdare"},"score":0,"creation_date":1585139920,"post_id":60848729,"comment_id":107657110,"body_markdown":"As per my understanding, searchAllSolutions() is an asynchronous API. Solver calls onSolutionCallback() function once for every solution it find. There is no way to find if all the solutions have been found or we need to wait more time.","body":"As per my understanding, searchAllSolutions() is an asynchronous API. Solver calls onSolutionCallback() function once for every solution it find. There is no way to find if all the solutions have been found or we need to wait more time."},{"owner":{"account_id":13814932,"reputation":9106,"user_id":9971759,"display_name":"Laurent Perron"},"score":2,"creation_date":1585143541,"post_id":60848729,"comment_id":107659014,"body_markdown":"Actually, Solve() returns OPTIMAL when all solutions have been found, and search has terminated normally. See http://google.github.io/or-tools/python/ortools/sat/python/cp_model.html#cp_model.CpSolver.SearchForAllSolutions","body":"Actually, Solve() returns OPTIMAL when all solutions have been found, and search has terminated normally. See <a href=\"http://google.github.io/or-tools/python/ortools/sat/python/cp_model.html#cp_model.CpSolver.SearchForAllSolutions\" rel=\"nofollow noreferrer\">google.github.io/or-tools/python/ortools/sat/python/&hellip;</a>"},{"owner":{"account_id":3038988,"reputation":237,"user_id":2576456,"display_name":"sdare"},"score":0,"creation_date":1585148865,"post_id":60848729,"comment_id":107662213,"body_markdown":"I have been a noob. I misunderstood the documentation and assumed the searchAllSolutions() can return &#39;FEASIBLE&#39; sometimes and I thought there was no way to force it to search all solutions.","body":"I have been a noob. I misunderstood the documentation and assumed the searchAllSolutions() can return &#39;FEASIBLE&#39; sometimes and I thought there was no way to force it to search all solutions."},{"owner":{"account_id":3038988,"reputation":237,"user_id":2576456,"display_name":"sdare"},"score":0,"creation_date":1585196838,"post_id":60848729,"comment_id":107679442,"body_markdown":"Another related question: Is there any remote chance for a CP SAT solver to run into a non-deterministic state or run into infinite loops (or such) even when there is a feasible solution possible for given set of constraints?","body":"Another related question: Is there any remote chance for a CP SAT solver to run into a non-deterministic state or run into infinite loops (or such) even when there is a feasible solution possible for given set of constraints?"},{"owner":{"account_id":3038988,"reputation":237,"user_id":2576456,"display_name":"sdare"},"score":0,"creation_date":1585220513,"post_id":60848729,"comment_id":107687620,"body_markdown":"Thanks Laurent Perron, Stradivari. I will add the above question in overview and you can add the answer. This way it will be useful for others in future.","body":"Thanks Laurent Perron, Stradivari. I will add the above question in overview and you can add the answer. This way it will be useful for others in future."},{"owner":{"account_id":193612,"reputation":32530,"user_id":2320035,"accept_rate":79,"display_name":"sascha"},"score":0,"creation_date":1585225560,"post_id":60848729,"comment_id":107690071,"body_markdown":"@sdare Upper bounds in combinatorial-optimization are pretty uncommon. You probably started to use ortools because it&#39;s heuristics are performing good (better than some other approach you could write where you can post upper-bounds; e.g. exhaustive-search). But there is always the exponential worst-case. Depending on some very complex internals like random-restarts there is maybe even a chance of infinite-search (even if the core CDCL-SAT is *complete*). This isn&#39;t that important for the user, but you should always use time-outs and expect *some* bad runs (in production).","body":"@sdare Upper bounds in combinatorial-optimization are pretty uncommon. You probably started to use ortools because it&#39;s heuristics are performing good (better than some other approach you could write where you can post upper-bounds; e.g. exhaustive-search). But there is always the exponential worst-case. Depending on some very complex internals like random-restarts there is maybe even a chance of infinite-search (even if the core CDCL-SAT is <i>complete</i>). This isn&#39;t that important for the user, but you should always use time-outs and expect <i>some</i> bad runs (in production)."},{"owner":{"account_id":3038988,"reputation":237,"user_id":2576456,"display_name":"sdare"},"score":0,"creation_date":1585303816,"post_id":60848729,"comment_id":107717652,"body_markdown":"Thanks sascha@, Does that mean for a given set of constraints there is a remote chance that the SAT solver can run into infinite search in production, even if in past it was able to return a feasible solution for same set of constraints ?","body":"Thanks sascha@, Does that mean for a given set of constraints there is a remote chance that the SAT solver can run into infinite search in production, even if in past it was able to return a feasible solution for same set of constraints ?"},{"owner":{"account_id":193612,"reputation":32530,"user_id":2320035,"accept_rate":79,"display_name":"sascha"},"score":0,"creation_date":1585317694,"post_id":60848729,"comment_id":107724238,"body_markdown":"My remarks were more target to the solve my problem A thing -&gt; no problem. Ok, problem B is problem A without one constraint. It&#39;s easier then. The solver should have no prob..... oh it does not find a solution. These things are common in discrete-opt. Your question ` even if in past it was able to return a feasible solution for same set of constraints` sounds like asking for deterministic behaviour. If the solver is deterministic, using the same hardware, ortools version,ortools options, model / problem should ways lead to the same solution. See ortools docs. ortools has undeterministic modes","body":"My remarks were more target to the solve my problem A thing -&gt; no problem. Ok, problem B is problem A without one constraint. It&#39;s easier then. The solver should have no prob..... oh it does not find a solution. These things are common in discrete-opt. Your question ` even if in past it was able to return a feasible solution for same set of constraints` sounds like asking for deterministic behaviour. If the solver is deterministic, using the same hardware, ortools version,ortools options, model / problem should ways lead to the same solution. See ortools docs. ortools has undeterministic modes"}],"owner":{"account_id":3038988,"reputation":237,"user_id":2576456,"display_name":"sdare"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691853477,"creation_date":1585138791,"question_id":60848729,"body_markdown":"I was exploring the CP-SAT APIs for fetching all solution for given set of constraints. \r\n\r\nAs per the API documentation, onSolutionCallback() function is called for every solution found. However if I need to find all solutions for a given model, is there a way to detect the last solution or the feasibility of no more solutions through onSolutionCallback() function or other means?\r\n\r\nI found that searchAllSolutions() API can be used and we can set termination conditions based on time or number of solutions. Assuming I can wait unlimited amount of time, how do I detect that there are no more solutions feasible? \r\n\r\nhttps://developers.google.com/optimization/cp/cp_tasks\r\n\r\nAnother related question: \r\nIs there any remote chance for a CP SAT solver to run into a non-deterministic state or run into infinite loops (or such) even when there is a feasible solution possible for given set of constraints?\r\nI plan to use the CPSAT for a production usecase and hence would like to know its determinism and upper bounds for execution.\r\n\r\nEdit: Added the second question.","title":"Detecting termination in CP-SAT","body":"<p>I was exploring the CP-SAT APIs for fetching all solution for given set of constraints. </p>\n\n<p>As per the API documentation, onSolutionCallback() function is called for every solution found. However if I need to find all solutions for a given model, is there a way to detect the last solution or the feasibility of no more solutions through onSolutionCallback() function or other means?</p>\n\n<p>I found that searchAllSolutions() API can be used and we can set termination conditions based on time or number of solutions. Assuming I can wait unlimited amount of time, how do I detect that there are no more solutions feasible? </p>\n\n<p><a href=\"https://developers.google.com/optimization/cp/cp_tasks\" rel=\"nofollow noreferrer\">https://developers.google.com/optimization/cp/cp_tasks</a></p>\n\n<p>Another related question: \nIs there any remote chance for a CP SAT solver to run into a non-deterministic state or run into infinite loops (or such) even when there is a feasible solution possible for given set of constraints?\nI plan to use the CPSAT for a production usecase and hence would like to know its determinism and upper bounds for execution.</p>\n\n<p>Edit: Added the second question.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691858260,"post_id":76889904,"comment_id":135549583,"body_markdown":"[DefaultSqlSession](https://github.com/mybatis/mybatis-3/blob/621de2602b7d6bc1ba65237b26409ebeb086c45a/src/main/java/org/apache/ibatis/session/defaults/DefaultSqlSession.java#L173) does have the implementation, delegating to `selectList` which contains the actual logic.","body":"<a href=\"https://github.com/mybatis/mybatis-3/blob/621de2602b7d6bc1ba65237b26409ebeb086c45a/src/main/java/org/apache/ibatis/session/defaults/DefaultSqlSession.java#L173\" rel=\"nofollow noreferrer\">DefaultSqlSession</a> does have the implementation, delegating to <code>selectList</code> which contains the actual logic."},{"owner":{"account_id":21426151,"reputation":1,"user_id":15783433,"display_name":"ygh"},"score":0,"creation_date":1691927209,"post_id":76889904,"comment_id":135554401,"body_markdown":"There was something I missed, thank you!","body":"There was something I missed, thank you!"}],"owner":{"account_id":21426151,"reputation":1,"user_id":15783433,"display_name":"ygh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691853126,"creation_date":1691853126,"question_id":76889904,"body_markdown":"I have a question while using the mybatis&#39;s sqlSession &#39;select&#39; function. I know that sqlSession is an interface. And I know that  mybatis&#39;s DefaultSqlSession.java implements this. So I looked at the DefaultSqlSession.java code\r\n\r\n\r\n\r\n```\r\n@Override\r\n   public void select(String statement, ResultHandler handler) {\r\n     select(statement, null, RowBounds.DEFAULT, handler);\r\n   }\r\n```\r\nThe method above is the &#39;select&#39; method of DefaultSqlSession.java.\r\n\r\nWhat I&#39;m curious about is select(statement, null, RowBounds.DEFAULT, handler);\r\nThat function is not defined in DefaultSqlSession.java, so I wonder how it can be used.\r\n\r\nI wonder where the  mybatis&#39;s sqlsession select statement was fundamentally implemented.","title":"How can I use the select function of DefaultSqlSession?","body":"<p>I have a question while using the mybatis's sqlSession 'select' function. I know that sqlSession is an interface. And I know that  mybatis's DefaultSqlSession.java implements this. So I looked at the DefaultSqlSession.java code</p>\n<pre><code>@Override\n   public void select(String statement, ResultHandler handler) {\n     select(statement, null, RowBounds.DEFAULT, handler);\n   }\n</code></pre>\n<p>The method above is the 'select' method of DefaultSqlSession.java.</p>\n<p>What I'm curious about is select(statement, null, RowBounds.DEFAULT, handler);\nThat function is not defined in DefaultSqlSession.java, so I wonder how it can be used.</p>\n<p>I wonder where the  mybatis's sqlsession select statement was fundamentally implemented.</p>\n"},{"tags":["java","spring-boot","spring-expression-language"],"comments":[{"owner":{"account_id":6014861,"reputation":18112,"user_id":7939871,"display_name":"L&#233;a Gris"},"score":0,"creation_date":1603047740,"post_id":61066447,"comment_id":113906010,"body_markdown":"[What should I do when someone answers my question?](https://stackoverflow.com/help/someone-answers)","body":"<a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2301478,"reputation":197,"user_id":2021693,"display_name":"Reeta Wani"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1586198593,"creation_date":1586198593,"answer_id":61066759,"question_id":61066447,"body_markdown":"Can you try writing your annotation values like this and check :\r\n\r\n    @ConditionalOnExpression(&quot;#{${conditions.values.options}}.contains(&#39;ScenarioOne&#39;)&quot;)\r\n\r\nWrite the contains method after the curly brackets.","title":"Using Spring expression language to assert if a property (with comma separated values) loaded from a properties file, contains &quot;value&quot;","body":"<p>Can you try writing your annotation values like this and check :</p>\n\n<pre><code>@ConditionalOnExpression(\"#{${conditions.values.options}}.contains('ScenarioOne')\")\n</code></pre>\n\n<p>Write the contains method after the curly brackets.</p>\n"},{"tags":[],"owner":{"account_id":3302455,"reputation":213,"user_id":2778243,"accept_rate":60,"display_name":"Carlos Luis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1586237848,"creation_date":1586237848,"answer_id":61073436,"question_id":61066447,"body_markdown":"I was able to get the desired behavior using this:\r\n\r\n```\r\n@ConditionalOnExpression(&quot;#{T(java.util.Arrays).asList(&#39;${conditions.values.options}&#39;).contains(&#39;ScenarioOne&#39;)}&quot;)\r\n```\r\nSo dissecting this a little bit in the hopes to help others who may come across similar problems:\r\nIt seems that spring reads comma separated properties as an Array, this is bogus because the following can be done using spring boot:\r\n\r\nThe following two statements are valid:\r\n```\r\n@Value(&quot;${property.with.comma.separated.values}&quot;)\r\nprivate List&lt;String&gt; prop;\r\n```\r\nOR \r\n```\r\n@Value(&quot;${property.with.comma.separated.values}&quot;)\r\nprivate String [] prop;\r\n```\r\nnow the expression:\r\n```\r\n&quot;#{&#39;${conditions.values.options}&#39;.contains(&#39;ScenarioOne&#39;)}&quot;\r\n``` \r\nwill throw an error saying that the Array class does not contain a method called &#39;.contains()&#39;\r\nhence this is why I had to resort to use some method execution:\r\n```\r\nT(java.util.Arrays).asList(&#39;${conditions.values.options}&#39;)\r\n```\r\nto read the comma separated values, convert the String array into a List&lt;String&gt; and then perform the &#39;.contains(..)&#39; method invocation.\r\n\r\nI wish there was a simpler way to do it, to have to do a method invocation in there seems like overkill.\r\n\r\nI am open to sugestions &#128512;","title":"Using Spring expression language to assert if a property (with comma separated values) loaded from a properties file, contains &quot;value&quot;","body":"<p>I was able to get the desired behavior using this:</p>\n\n<pre><code>@ConditionalOnExpression(\"#{T(java.util.Arrays).asList('${conditions.values.options}').contains('ScenarioOne')}\")\n</code></pre>\n\n<p>So dissecting this a little bit in the hopes to help others who may come across similar problems:\nIt seems that spring reads comma separated properties as an Array, this is bogus because the following can be done using spring boot:</p>\n\n<p>The following two statements are valid:</p>\n\n<pre><code>@Value(\"${property.with.comma.separated.values}\")\nprivate List&lt;String&gt; prop;\n</code></pre>\n\n<p>OR </p>\n\n<pre><code>@Value(\"${property.with.comma.separated.values}\")\nprivate String [] prop;\n</code></pre>\n\n<p>now the expression:</p>\n\n<pre><code>\"#{'${conditions.values.options}'.contains('ScenarioOne')}\"\n</code></pre>\n\n<p>will throw an error saying that the Array class does not contain a method called '.contains()'\nhence this is why I had to resort to use some method execution:</p>\n\n<pre><code>T(java.util.Arrays).asList('${conditions.values.options}')\n</code></pre>\n\n<p>to read the comma separated values, convert the String array into a List and then perform the '.contains(..)' method invocation.</p>\n\n<p>I wish there was a simpler way to do it, to have to do a method invocation in there seems like overkill.</p>\n\n<p>I am open to sugestions 😀</p>\n"},{"tags":[],"owner":{"account_id":317708,"reputation":9159,"user_id":634545,"accept_rate":73,"display_name":"user634545"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691852551,"creation_date":1691852551,"answer_id":76889863,"question_id":61066447,"body_markdown":"An alternative is to implement a custom conditional annotation.\r\n\r\n`@ConditionalOnHavingValue(property = &quot;conditions.values.options&quot;, value = &quot;ScenarioOne&quot;)`\r\n\r\n\r\n```\r\n@Target({ElementType.TYPE, ElementType.METHOD})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\n@Conditional(OnHavingValueCondition.class)\r\npublic @interface ConditionalOnHavingValue {\r\n\r\n    /**\r\n     * The property that should contain the value.\r\n     */\r\n    String property();\r\n\r\n    /**\r\n     * The value that must be present.\r\n     */\r\n    String value();\r\n\r\n}\r\n```\r\n\r\n```\r\npublic class OnHavingValueCondition extends SpringBootCondition {\r\n\r\n    @Override\r\n    public ConditionOutcome getMatchOutcome(final ConditionContext context, final AnnotatedTypeMetadata metadata) {\r\n        final MultiValueMap&lt;String, Object&gt; attributes = metadata.getAllAnnotationAttributes(ConditionalOnHavingValue.class.getName());\r\n        if (attributes == null) {\r\n            return ConditionOutcome.noMatch(&quot;Unable to retrieve attributes from ConditionalOnHavingValue annotation&quot;);\r\n        }\r\n\r\n        final String property = (String) attributes.getFirst(&quot;property&quot;);\r\n        final String value = (String) attributes.getFirst(&quot;value&quot;);\r\n\r\n        //noinspection unchecked,DataFlowIssue\r\n        final Set&lt;String&gt; propertyValues = (Set&lt;String&gt;) context.getEnvironment().getProperty(property, Set.class);\r\n\r\n        //noinspection DataFlowIssue\r\n        if (!propertyValues.contains(value)) {\r\n            return ConditionOutcome.noMatch(&quot;Unable to find the particular value in the property&quot;);\r\n        }\r\n\r\n        return ConditionOutcome.match();\r\n    }\r\n\r\n}\r\n```","title":"Using Spring expression language to assert if a property (with comma separated values) loaded from a properties file, contains &quot;value&quot;","body":"<p>An alternative is to implement a custom conditional annotation.</p>\n<p><code>@ConditionalOnHavingValue(property = &quot;conditions.values.options&quot;, value = &quot;ScenarioOne&quot;)</code></p>\n<pre><code>@Target({ElementType.TYPE, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Conditional(OnHavingValueCondition.class)\npublic @interface ConditionalOnHavingValue {\n\n    /**\n     * The property that should contain the value.\n     */\n    String property();\n\n    /**\n     * The value that must be present.\n     */\n    String value();\n\n}\n</code></pre>\n<pre><code>public class OnHavingValueCondition extends SpringBootCondition {\n\n    @Override\n    public ConditionOutcome getMatchOutcome(final ConditionContext context, final AnnotatedTypeMetadata metadata) {\n        final MultiValueMap&lt;String, Object&gt; attributes = metadata.getAllAnnotationAttributes(ConditionalOnHavingValue.class.getName());\n        if (attributes == null) {\n            return ConditionOutcome.noMatch(&quot;Unable to retrieve attributes from ConditionalOnHavingValue annotation&quot;);\n        }\n\n        final String property = (String) attributes.getFirst(&quot;property&quot;);\n        final String value = (String) attributes.getFirst(&quot;value&quot;);\n\n        //noinspection unchecked,DataFlowIssue\n        final Set&lt;String&gt; propertyValues = (Set&lt;String&gt;) context.getEnvironment().getProperty(property, Set.class);\n\n        //noinspection DataFlowIssue\n        if (!propertyValues.contains(value)) {\n            return ConditionOutcome.noMatch(&quot;Unable to find the particular value in the property&quot;);\n        }\n\n        return ConditionOutcome.match();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3302455,"reputation":213,"user_id":2778243,"accept_rate":60,"display_name":"Carlos Luis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2214,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1691852551,"creation_date":1586197515,"question_id":61066447,"body_markdown":"I have the following problem, I have a certain configuration class in spring boot which contains beans, which I would like to be created only if a certain property which has a list of values, contains a certain value.\r\n\r\nnow the configuration class looks something like this:\r\n\r\n```java\r\n@ConditionalOnExpression(&quot;#{&#39;${conditions.values.options}&#39;.contains(&#39;ScenarioOne&#39;)}&quot;)\r\nConfigurationForScenarioOne{\r\n\r\n  @Bean\r\n  public StudentBean getStudentBean(){\r\n  ...\r\n  }\r\n}\r\n```\r\nIn the properties file I would have something like so:\r\n```\r\nconditions.values.options=${CONDITIONS_VALUES_OPTIONS}\r\n```\r\nThen provide the value of `CONDITIONS_VALUES_OPTIONS` at runtime like so:\r\n```\r\n-DCONDITIONS_VALUES_OPTIONS=ScenarioOne,ScenarioTwo,ScenarioFive\r\n```\r\nThe reason why I want to do this is to be able to deploy the app and have different beans be in use depending on the value given at runtime.\r\n\r\nI will have several of these Configuration classes that will be created based on which ones of these properties are passed. \r\nTO achieve this I was trying to rely on Spring Expression language to do the following:\r\n1-Read the property `conditions.values.options`, then convert it to a list, then verify if the list contained the desired configuration string.\r\n\r\nSo far I have tried several expressions including:\r\n```\r\n@ConditionalOnExpression(&quot;#{&#39;${conditions.values.options}&#39;.contains(&#39;ScenarioOne&#39;)}&quot;)\r\n```\r\n\r\nand other similar expressions, with no luck. Can someone help me see what I am missing here?","title":"Using Spring expression language to assert if a property (with comma separated values) loaded from a properties file, contains &quot;value&quot;","body":"<p>I have the following problem, I have a certain configuration class in spring boot which contains beans, which I would like to be created only if a certain property which has a list of values, contains a certain value.</p>\n\n<p>now the configuration class looks something like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ConditionalOnExpression(\"#{'${conditions.values.options}'.contains('ScenarioOne')}\")\nConfigurationForScenarioOne{\n\n  @Bean\n  public StudentBean getStudentBean(){\n  ...\n  }\n}\n</code></pre>\n\n<p>In the properties file I would have something like so:</p>\n\n<pre><code>conditions.values.options=${CONDITIONS_VALUES_OPTIONS}\n</code></pre>\n\n<p>Then provide the value of <code>CONDITIONS_VALUES_OPTIONS</code> at runtime like so:</p>\n\n<pre><code>-DCONDITIONS_VALUES_OPTIONS=ScenarioOne,ScenarioTwo,ScenarioFive\n</code></pre>\n\n<p>The reason why I want to do this is to be able to deploy the app and have different beans be in use depending on the value given at runtime.</p>\n\n<p>I will have several of these Configuration classes that will be created based on which ones of these properties are passed. \nTO achieve this I was trying to rely on Spring Expression language to do the following:\n1-Read the property <code>conditions.values.options</code>, then convert it to a list, then verify if the list contained the desired configuration string.</p>\n\n<p>So far I have tried several expressions including:</p>\n\n<pre><code>@ConditionalOnExpression(\"#{'${conditions.values.options}'.contains('ScenarioOne')}\")\n</code></pre>\n\n<p>and other similar expressions, with no luck. Can someone help me see what I am missing here?</p>\n"},{"tags":["java","database","oracle","selenium-webdriver"],"comments":[{"owner":{"account_id":1635690,"reputation":150047,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":0,"creation_date":1481587094,"post_id":41111224,"comment_id":69427720,"body_markdown":"Why are you using the database in tests of a browser based interface? Just mock the responses using whatever you are using to perform the tests and do not involve the database in tests of your front-end.","body":"Why are you using the database in tests of a browser based interface? Just mock the responses using whatever you are using to perform the tests and do not involve the database in tests of your front-end."}],"answers":[{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481590727,"creation_date":1481590727,"answer_id":41112145,"question_id":41111224,"body_markdown":"What I would suggest you do is if you really want to verify the data in the database, do that at the end of the first test case.  Use clean data each time so you don&#39;t have to worry about bad data.\r\n\r\nWhat if your second test case fails because the data in the first test case is no good? Then you&#39;ve failed the second test case because of bad data not bad functionality.","title":"How to fetch data in Oracle database and use it in Selenium WebDriver","body":"<p>What I would suggest you do is if you really want to verify the data in the database, do that at the end of the first test case.  Use clean data each time so you don't have to worry about bad data.</p>\n\n<p>What if your second test case fails because the data in the first test case is no good? Then you've failed the second test case because of bad data not bad functionality.</p>\n"},{"tags":[],"owner":{"account_id":8811434,"reputation":77,"user_id":6584371,"display_name":"rajan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481613282,"creation_date":1481613282,"answer_id":41115471,"question_id":41111224,"body_markdown":"According to my understanding you want to login into the application with the test data that you entered during creation of the user.\r\nFor that you need to make a program which connects you with your db.\r\n\r\nFlow of your suit:\r\n\r\nFirst Step: Create a user. Once the user is created, the info gets stored in the database\r\n\r\nSecond Step : create a connection class, get all the details into variables.\r\n\r\nThird Step : Pass those variables *test data* into your scrip.\r\n\r\nThat&#39;s all.\r\n\r\nConnection class : \r\n\r\n\r\n    public static void main(String args[]){  \r\n    try{  \r\n    //step1 load the driver class  \r\n    Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);  \r\n      \r\n    //step2 create  the connection object  \r\n    Connection con=DriverManager.getConnection(  \r\n    &quot;jdbc:oracle:thin:@localhost:1521:xe&quot;,&quot;system&quot;,&quot;password&quot;);  \r\n      \r\n    //step3 create the statement object  \r\n    Statement stmt=con.createStatement();  \r\n      \r\n    //step4 execute query  \r\n    ResultSet rs=stmt.executeQuery(&quot;select * from created_user&quot;);  \r\n    while(rs.next())  \r\n    System.out.println(rs.getInt(1)+&quot;  &quot;+rs.getString(2)+&quot;  &quot;+rs.getString(3));  \r\n      \r\n    //step5 close the connection object  \r\n    con.close();  \r\n      \r\n    }catch(Exception e){ System.out.println(e);}  \r\n      \r\n    }  \r\n    }  \r\n    \r\n     \r\nyou can pass rs.getInt(1) into a var. and use this variable as your test data.\r\n\r\n\r\nI hope this will solve your problem.\r\n\r\nThanks.\r\n\r\n","title":"How to fetch data in Oracle database and use it in Selenium WebDriver","body":"<p>According to my understanding you want to login into the application with the test data that you entered during creation of the user.\nFor that you need to make a program which connects you with your db.</p>\n\n<p>Flow of your suit:</p>\n\n<p>First Step: Create a user. Once the user is created, the info gets stored in the database</p>\n\n<p>Second Step : create a connection class, get all the details into variables.</p>\n\n<p>Third Step : Pass those variables <em>test data</em> into your scrip.</p>\n\n<p>That's all.</p>\n\n<p>Connection class : </p>\n\n<pre><code>public static void main(String args[]){  \ntry{  \n//step1 load the driver class  \nClass.forName(\"oracle.jdbc.driver.OracleDriver\");  \n\n//step2 create  the connection object  \nConnection con=DriverManager.getConnection(  \n\"jdbc:oracle:thin:@localhost:1521:xe\",\"system\",\"password\");  \n\n//step3 create the statement object  \nStatement stmt=con.createStatement();  \n\n//step4 execute query  \nResultSet rs=stmt.executeQuery(\"select * from created_user\");  \nwhile(rs.next())  \nSystem.out.println(rs.getInt(1)+\"  \"+rs.getString(2)+\"  \"+rs.getString(3));  \n\n//step5 close the connection object  \ncon.close();  \n\n}catch(Exception e){ System.out.println(e);}  \n\n}  \n}  \n</code></pre>\n\n<p>you can pass rs.getInt(1) into a var. and use this variable as your test data.</p>\n\n<p>I hope this will solve your problem.</p>\n\n<p>Thanks.</p>\n"},{"tags":[],"owner":{"account_id":18965449,"reputation":1,"user_id":13840045,"display_name":"Ben Miao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626247849,"creation_date":1626247849,"answer_id":68373845,"question_id":41111224,"body_markdown":"Create a Junit Test called LoginTest, and in this Test, it contains two testcase, the first one is create user test case , the second one is login test case\r\n\r\n```\r\n// make sure the createUserTest is test first\r\n@FixMethodOrder(value = MethodSorters.NAME_ASCENDING)\r\npublic class LoginTest {\r\n\r\n  // User that created in the createUserTest\r\n  private User user = null;\r\n\r\n  @AfterClass\r\n  public void clear() {\r\n    if (user != null) {\r\n       someDbLogic.delete(user)\r\n    }\r\n  }\r\n\r\n  @Test\r\n  public void createUserTest() {\r\n    // create user and save it to db\r\n    user = new User();\r\n    // save to db\r\n    someDbLogic.save(user)\r\n  }\r\n\r\n  @Test\r\n  public void loginTest() {\r\n    // get loginId and password from user and perform login action by selenium\r\n    String loginId = user.getLogin();\r\n    String password = user.getPassword();\r\n\r\n    // perform login\r\n  }\r\n}\r\n```\r\nIn junit, the @AfterClass will be invoke after all the test cases have been run, then we can delete the user data there.\r\n\r\nI hope this can help you a bit.\r\n\r\n\r\n","title":"How to fetch data in Oracle database and use it in Selenium WebDriver","body":"<p>Create a Junit Test called LoginTest, and in this Test, it contains two testcase, the first one is create user test case , the second one is login test case</p>\n<pre><code>// make sure the createUserTest is test first\n@FixMethodOrder(value = MethodSorters.NAME_ASCENDING)\npublic class LoginTest {\n\n  // User that created in the createUserTest\n  private User user = null;\n\n  @AfterClass\n  public void clear() {\n    if (user != null) {\n       someDbLogic.delete(user)\n    }\n  }\n\n  @Test\n  public void createUserTest() {\n    // create user and save it to db\n    user = new User();\n    // save to db\n    someDbLogic.save(user)\n  }\n\n  @Test\n  public void loginTest() {\n    // get loginId and password from user and perform login action by selenium\n    String loginId = user.getLogin();\n    String password = user.getPassword();\n\n    // perform login\n  }\n}\n</code></pre>\n<p>In junit, the @AfterClass will be invoke after all the test cases have been run, then we can delete the user data there.</p>\n<p>I hope this can help you a bit.</p>\n"}],"owner":{"account_id":9459587,"reputation":11,"user_id":7033765,"accept_rate":83,"display_name":"Muhammad Khan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10829,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691852480,"creation_date":1481584247,"question_id":41111224,"body_markdown":"I have two test cases. \r\n\r\nFirst Test Case: Create a user. Once the user is created, the info gets stored in the database.(i.e account number, username, password, first name, last name etc) \r\n\r\nSecond Test Case: Login as a User.\r\n\r\nOnce the first test case has been passed, how can I fetch the data from the db (e.g. select * from created_user) and use it in my second test case. \r\n\r\nFor example: I would like to fetch the username and password from the database, and use it in my second test case when i&#39;m on the login page. \r\n\r\nAny help would be appreciated. Thanks!","title":"How to fetch data in Oracle database and use it in Selenium WebDriver","body":"<p>I have two test cases. </p>\n\n<p>First Test Case: Create a user. Once the user is created, the info gets stored in the database.(i.e account number, username, password, first name, last name etc) </p>\n\n<p>Second Test Case: Login as a User.</p>\n\n<p>Once the first test case has been passed, how can I fetch the data from the db (e.g. select * from created_user) and use it in my second test case. </p>\n\n<p>For example: I would like to fetch the username and password from the database, and use it in my second test case when i'm on the login page. </p>\n\n<p>Any help would be appreciated. Thanks!</p>\n"},{"tags":["java","spring-boot","jdbc","connection-pooling"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691767524,"post_id":76884571,"comment_id":135540810,"body_markdown":"Running out of connections in a pool is annoying, but it&#39;s not &quot;unexpected end of data&quot;. Maybe you&#39;re doing something weird, sharing a connection accidentally or an internal bug that manifests in your use case.","body":"Running out of connections in a pool is annoying, but it&#39;s not &quot;unexpected end of data&quot;. Maybe you&#39;re doing something weird, sharing a connection accidentally or an internal bug that manifests in your use case."},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1691771656,"post_id":76884571,"comment_id":135541570,"body_markdown":"Please share the database type and version of the driver. Please also share the part of the log files preceding the exception and full stack trace. It would be helpful to set the log level to debug for the interesting packages like `org.apache.tomcat.jdbc.pool`","body":"Please share the database type and version of the driver. Please also share the part of the log files preceding the exception and full stack trace. It would be helpful to set the log level to debug for the interesting packages like <code>org.apache.tomcat.jdbc.pool</code>"},{"owner":{"account_id":6632648,"reputation":525,"user_id":5120843,"accept_rate":40,"display_name":"Morkus"},"score":0,"creation_date":1691772912,"post_id":76884571,"comment_id":135541759,"body_markdown":"Interesting....how to you go about setting the log level for the pool? Also, maybe there&#39;s a way I can get more detailed logging info. Thanks!","body":"Interesting....how to you go about setting the log level for the pool? Also, maybe there&#39;s a way I can get more detailed logging info. Thanks!"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1691773141,"post_id":76884571,"comment_id":135541795,"body_markdown":"Add to application.properties: logging.level.org.apache.tomcat.jdbc.pool=DEBUG","body":"Add to application.properties: logging.level.org.apache.tomcat.jdbc.pool=DEBUG"},{"owner":{"account_id":6632648,"reputation":525,"user_id":5120843,"accept_rate":40,"display_name":"Morkus"},"score":0,"creation_date":1691775329,"post_id":76884571,"comment_id":135542161,"body_markdown":"Nice! That&#39;s great, I think this will be very useful. Thanks.","body":"Nice! That&#39;s great, I think this will be very useful. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":29206924,"reputation":1,"user_id":22375818,"display_name":"Cornelis"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1691765217,"creation_date":1691765217,"answer_id":76884589,"question_id":76884571,"body_markdown":"Try increasing the max-active value, as a value of 100 might be too low depending on your application&#39;s concurrency requirements","title":"Can anyone see why Tomcat is timing out on my connection pool?","body":"<p>Try increasing the max-active value, as a value of 100 might be too low depending on your application's concurrency requirements</p>\n"}],"owner":{"account_id":6632648,"reputation":525,"user_id":5120843,"accept_rate":40,"display_name":"Morkus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691850885,"creation_date":1691765007,"question_id":76884571,"body_markdown":" have a connection pool in my Springboot App with these settings in Application.properties:\r\n\r\n    // db user name, password, url here...\r\n    spring.datasource.tomcat.initial-size=15\r\n    spring.datasource.tomcat.max-wait=20000\r\n    spring.datasource.tomcat.max-active=100\r\n    spring.datasource.tomcat.max-idle=15\r\n    spring.datasource.tomcat.min-idle=8\r\n    spring.datasource.tomcat.default-auto-commit=true\r\n    spring.datasource.type=org.apache.tomcat.jdbc.pool.DataSource\r\n\r\nAll is OK for a while. But what&#39;s happening is that every few hours, something goes wrong and I get this Exception when trying to run the JDBC code:  \r\nUnexpected end of data.\r\n\r\nIn other classes, the Unexpected end of data Exception shows up as a SQL Exception, but it&#39;s the same message.\r\n\r\nIf I restart Tomcat, JDBC is all working again ... for a little while.\r\n\r\nThe Connection code looks like this:\r\n\r\n    try\r\n    \t(\r\n    \t\t\tfinal Connection connection = dataSource.getConnection();\r\n    \t\t\tfinal PreparedStatement statement = connection.prepareStatement(SQL_TO_RUN_HERE);\r\n    \t)\r\n    \t{\r\n    \t.\r\n    \t.\r\n    \t.\r\n    \t\r\n    \t}\r\n\r\n&quot;dataSource&quot; is injected into the class and is the Connection Pool instance.\r\n\r\nAlso, if I don&#39;t use the connection pool at all and just use `DriverManager.getConnection(...),` it always works then too with no problems.\r\n\r\nAdditional debugging info:\r\n----------------------------\r\nSQL State: 08007\r\nDetail Message: [FileMaker][FileMaker JDBC] Unexpected end of data.\r\nError code: 27026\r\n\r\nLine of code that fails: connection.prepareStatement(SQL)\r\n\r\nCan anyone see what setting is off or what setting I might need to add to the connection pool settings?\r\n\r\nThanks very much in advance,\r\n","title":"Can anyone see why Tomcat is timing out on my connection pool?","body":"<p>have a connection pool in my Springboot App with these settings in Application.properties:</p>\n<pre><code>// db user name, password, url here...\nspring.datasource.tomcat.initial-size=15\nspring.datasource.tomcat.max-wait=20000\nspring.datasource.tomcat.max-active=100\nspring.datasource.tomcat.max-idle=15\nspring.datasource.tomcat.min-idle=8\nspring.datasource.tomcat.default-auto-commit=true\nspring.datasource.type=org.apache.tomcat.jdbc.pool.DataSource\n</code></pre>\n<p>All is OK for a while. But what's happening is that every few hours, something goes wrong and I get this Exception when trying to run the JDBC code:<br />\nUnexpected end of data.</p>\n<p>In other classes, the Unexpected end of data Exception shows up as a SQL Exception, but it's the same message.</p>\n<p>If I restart Tomcat, JDBC is all working again ... for a little while.</p>\n<p>The Connection code looks like this:</p>\n<pre><code>try\n    (\n            final Connection connection = dataSource.getConnection();\n            final PreparedStatement statement = connection.prepareStatement(SQL_TO_RUN_HERE);\n    )\n    {\n    .\n    .\n    .\n    \n    }\n</code></pre>\n<p>&quot;dataSource&quot; is injected into the class and is the Connection Pool instance.</p>\n<p>Also, if I don't use the connection pool at all and just use <code>DriverManager.getConnection(...),</code> it always works then too with no problems.</p>\n<h2>Additional debugging info:</h2>\n<p>SQL State: 08007\nDetail Message: [FileMaker][FileMaker JDBC] Unexpected end of data.\nError code: 27026</p>\n<p>Line of code that fails: connection.prepareStatement(SQL)</p>\n<p>Can anyone see what setting is off or what setting I might need to add to the connection pool settings?</p>\n<p>Thanks very much in advance,</p>\n"},{"tags":["java","unit-testing","testing","unitils"],"answers":[{"tags":[],"owner":{"account_id":1028549,"reputation":10245,"user_id":1037316,"accept_rate":86,"display_name":"G. Demecki"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1691850866,"creation_date":1452181408,"answer_id":34659291,"question_id":34658067,"body_markdown":"Unitils seems to be almost abandoned nowadays. Project is available on the GitHub [here][1] and you can look at its history and activity.\r\n\r\nAnyways my two cents...\r\n\r\n**Unitils** has serious drawbacks:\r\n\r\n - Integrates many third-party libs (easymock, dbunit, spring, dbmaintainer, xmlunit, slf4j etc) and thus forces their versions - it is a really serious drawback\r\n - Due to being dependent on many 3rd party libraries, it is almost impossible to keep it up to date without any company behind.\r\n - Unitils 4.0 is developed since 06.2011 and was planned to release at 01.2012, but now (01.2016) **after 4 years** is still not released.\r\n\r\n\r\n**DbUnit**\r\n\r\nFor database-driven apps it may seem that interesting way to go is a plain DbUnit + Spring-Test or alternatively some 3rd party tools:\r\n\r\n - [excilys/spring-dbunit][2] that comes with handy `@DataSet` annotation and is actively developed on the github, also is constantly updated to use the newest versions of DbUnit and Spring Framework.\r\n - [springtestdbunit/spring-test-dbunit][3]  which is also hosted on the github (comes with a `@DatabaseSetup` annotation).\r\n\r\nBoth are very similar, but personally I find DbUnit confusing, quite cumbersome and time-consuming. Why? Try to maintain large amount of small xml files and you find out what I mean. Also combining multiple data sets is really hard.\r\n\r\n**DbSetup**\r\n\r\n[DbSetup][4] may seem like a tempting proposition, but I also do not recommend it at all due to many drawbacks, like no compile time type checking (`Insert.values()` accepts `Object`), it does not allow arbitrary SQL execution (only inserts and deletes are permitted), using this library leads to a not readable code.\r\n\r\n---\r\n\r\nUPDATE 2023: sorry, but TBH these days, when dealing with setting up a relational database I prefer to create test fixtures as close as possible to the test case + using the source code itself. Optionally with database foreign key constraints disabled (if it makes sense).\r\nAlternatively loading the tiniest possible DB dump from SQL file is also an option - but without any weird 3rd party tools like dbunit/dbsetup/whatsoever.\r\n\r\nHope it helps.\r\n\r\n  [1]: https://github.com/arteam/unitils\r\n  [2]: https://github.com/excilys/spring-dbunit\r\n  [3]: https://github.com/springtestdbunit/spring-test-dbunit\r\n  [4]: http://dbsetup.ninja-squad.com/","title":"Is Unitils project alive?","body":"<p>Unitils seems to be almost abandoned nowadays. Project is available on the GitHub <a href=\"https://github.com/arteam/unitils\" rel=\"nofollow noreferrer\">here</a> and you can look at its history and activity.</p>\n<p>Anyways my two cents...</p>\n<p><strong>Unitils</strong> has serious drawbacks:</p>\n<ul>\n<li>Integrates many third-party libs (easymock, dbunit, spring, dbmaintainer, xmlunit, slf4j etc) and thus forces their versions - it is a really serious drawback</li>\n<li>Due to being dependent on many 3rd party libraries, it is almost impossible to keep it up to date without any company behind.</li>\n<li>Unitils 4.0 is developed since 06.2011 and was planned to release at 01.2012, but now (01.2016) <strong>after 4 years</strong> is still not released.</li>\n</ul>\n<p><strong>DbUnit</strong></p>\n<p>For database-driven apps it may seem that interesting way to go is a plain DbUnit + Spring-Test or alternatively some 3rd party tools:</p>\n<ul>\n<li><a href=\"https://github.com/excilys/spring-dbunit\" rel=\"nofollow noreferrer\">excilys/spring-dbunit</a> that comes with handy <code>@DataSet</code> annotation and is actively developed on the github, also is constantly updated to use the newest versions of DbUnit and Spring Framework.</li>\n<li><a href=\"https://github.com/springtestdbunit/spring-test-dbunit\" rel=\"nofollow noreferrer\">springtestdbunit/spring-test-dbunit</a>  which is also hosted on the github (comes with a <code>@DatabaseSetup</code> annotation).</li>\n</ul>\n<p>Both are very similar, but personally I find DbUnit confusing, quite cumbersome and time-consuming. Why? Try to maintain large amount of small xml files and you find out what I mean. Also combining multiple data sets is really hard.</p>\n<p><strong>DbSetup</strong></p>\n<p><a href=\"http://dbsetup.ninja-squad.com/\" rel=\"nofollow noreferrer\">DbSetup</a> may seem like a tempting proposition, but I also do not recommend it at all due to many drawbacks, like no compile time type checking (<code>Insert.values()</code> accepts <code>Object</code>), it does not allow arbitrary SQL execution (only inserts and deletes are permitted), using this library leads to a not readable code.</p>\n<hr />\n<p>UPDATE 2023: sorry, but TBH these days, when dealing with setting up a relational database I prefer to create test fixtures as close as possible to the test case + using the source code itself. Optionally with database foreign key constraints disabled (if it makes sense).\nAlternatively loading the tiniest possible DB dump from SQL file is also an option - but without any weird 3rd party tools like dbunit/dbsetup/whatsoever.</p>\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":3522295,"reputation":2693,"user_id":2944265,"accept_rate":50,"display_name":"Zveratko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3359,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":34659291,"answer_count":1,"score":4,"last_activity_date":1691850866,"creation_date":1452178131,"question_id":34658067,"body_markdown":"anybody knows whether [unitils project][1] is still alive. On there pages last version is 3.3 in maven repository it is 3.4.2.(Actually there is google cached version of their pages where the version is said to be 3.4.2)\r\n\r\nAnyway is there any replacement for this project. I kind of lack the vivid community around and really don&#39;t want to be bound to dying project.\r\n\r\n\r\n  [1]: http://unitils.org/","title":"Is Unitils project alive?","body":"<p>anybody knows whether <a href=\"http://unitils.org/\" rel=\"nofollow\">unitils project</a> is still alive. On there pages last version is 3.3 in maven repository it is 3.4.2.(Actually there is google cached version of their pages where the version is said to be 3.4.2)</p>\n\n<p>Anyway is there any replacement for this project. I kind of lack the vivid community around and really don't want to be bound to dying project.</p>\n"},{"tags":["java","android","dependency-injection","dagger-2","dagger"],"answers":[{"tags":[],"owner":{"account_id":1088874,"reputation":61123,"user_id":1083957,"accept_rate":93,"display_name":"azizbekian"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1499947927,"creation_date":1499947927,"answer_id":45080249,"question_id":45080227,"body_markdown":"You have two methods with same name: `provideOkHttpClient()`. Rename one of them, make them distinct.","title":"Dagger2 where inject @Named @Provides in dependent module?","body":"<p>You have two methods with same name: <code>provideOkHttpClient()</code>. Rename one of them, make them distinct.</p>\n"},{"tags":[],"owner":{"account_id":2652641,"reputation":2720,"user_id":2293954,"display_name":"DeKaNszn"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1499949383,"creation_date":1499949383,"answer_id":45080811,"question_id":45080227,"body_markdown":"Your Retrofit provider should use `@Named` annotation for OkHttpClient, for example:\r\n\r\n    @Provides\r\n    @Singleton\r\n    public Retrofit provideRetrofit(@Named(&quot;cached&quot;) OkHttpClient okHttpClient)\r\n    {\r\n        return new Retrofit.Builder()\r\n                .baseUrl(&quot;...&quot;)\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                .client(okHttpClient)\r\n                .build();\r\n    }","title":"Dagger2 where inject @Named @Provides in dependent module?","body":"<p>Your Retrofit provider should use <code>@Named</code> annotation for OkHttpClient, for example:</p>\n\n<pre><code>@Provides\n@Singleton\npublic Retrofit provideRetrofit(@Named(\"cached\") OkHttpClient okHttpClient)\n{\n    return new Retrofit.Builder()\n            .baseUrl(\"...\")\n            .addConverterFactory(GsonConverterFactory.create())\n            .client(okHttpClient)\n            .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5754804,"reputation":2636,"user_id":4543133,"accept_rate":87,"display_name":"YTerle"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1565610816,"creation_date":1565610816,"answer_id":57460707,"question_id":45080227,"body_markdown":"If you are using kotlin, the correct way to inject named is next:\r\n\r\n`@field:[Inject Named(&quot;api1&quot;)]`.\r\n\r\nSource: https://medium.com/@WindRider/correct-usage-of-dagger-2-named-annotation-in-kotlin-8ab17ced6928","title":"Dagger2 where inject @Named @Provides in dependent module?","body":"<p>If you are using kotlin, the correct way to inject named is next:</p>\n\n<p><code>@field:[Inject Named(\"api1\")]</code>.</p>\n\n<p>Source: <a href=\"https://medium.com/@WindRider/correct-usage-of-dagger-2-named-annotation-in-kotlin-8ab17ced6928\" rel=\"nofollow noreferrer\">https://medium.com/@WindRider/correct-usage-of-dagger-2-named-annotation-in-kotlin-8ab17ced6928</a></p>\n"},{"tags":[],"owner":{"account_id":10723469,"reputation":870,"user_id":7891801,"display_name":"Devansh Maurya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691850852,"creation_date":1691850852,"answer_id":76889754,"question_id":45080227,"body_markdown":"For Kotlin, use:\r\n```lang-kt\r\n@Inject\r\n@field:Named(&quot;cached&quot;)\r\nlateinit var mOkHttpClient: OkHttpClient\r\n```\r\nFocus on the `@Named` annotation, which is specificed using `@field` [annotation use-site target][1] from Kotlin. Since, no `@Target` is specified in `@Named` annotation source code in Dagger for older versions, we need to tell the Kotlin compiler where to apply this annotation, hence the `@field` use-site annotation target. A `FIELD` `@Target` is specified for `@Inject` annotation in the source code, hence we do not need to specify a target for it explicitly and the compiler picks the correct target automatically\r\n\r\nAlso, when you have multiple annotations, they can be combined in an array-like syntax as:\r\n```lang-kt\r\n@field:[Inject Named(&quot;cached&quot;)]\r\nlateinit var mOkHttpClient: OkHttpClient\r\n```\r\n\r\nFor a more thorough understanding, refer [this][2].\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/annotations.html#annotation-use-site-targets\r\n  [2]: https://stackoverflow.com/a/59925322/7891801","title":"Dagger2 where inject @Named @Provides in dependent module?","body":"<p>For Kotlin, use:</p>\n<pre class=\"lang-kt prettyprint-override\"><code>@Inject\n@field:Named(&quot;cached&quot;)\nlateinit var mOkHttpClient: OkHttpClient\n</code></pre>\n<p>Focus on the <code>@Named</code> annotation, which is specificed using <code>@field</code> <a href=\"https://kotlinlang.org/docs/annotations.html#annotation-use-site-targets\" rel=\"nofollow noreferrer\">annotation use-site target</a> from Kotlin. Since, no <code>@Target</code> is specified in <code>@Named</code> annotation source code in Dagger for older versions, we need to tell the Kotlin compiler where to apply this annotation, hence the <code>@field</code> use-site annotation target. A <code>FIELD</code> <code>@Target</code> is specified for <code>@Inject</code> annotation in the source code, hence we do not need to specify a target for it explicitly and the compiler picks the correct target automatically</p>\n<p>Also, when you have multiple annotations, they can be combined in an array-like syntax as:</p>\n<pre class=\"lang-kt prettyprint-override\"><code>@field:[Inject Named(&quot;cached&quot;)]\nlateinit var mOkHttpClient: OkHttpClient\n</code></pre>\n<p>For a more thorough understanding, refer <a href=\"https://stackoverflow.com/a/59925322/7891801\">this</a>.</p>\n"}],"owner":{"account_id":5015098,"reputation":2952,"user_id":4030157,"accept_rate":88,"display_name":"eurosecom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11165,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":45080811,"answer_count":4,"score":9,"last_activity_date":1691850852,"creation_date":1499947846,"question_id":45080227,"body_markdown":"I use dagger2 demo by https://guides.codepath.com/android/Dependency-Injection-with-Dagger-2.\r\nI want to use cached and non_cached retrofit call. I create in NetModule.java\r\n\r\n    @Provides @Named(&quot;cached&quot;)\r\n    @Singleton\r\n    OkHttpClient provideOkHttpClient(Cache cache) {\r\n        OkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                .cache(cache)\r\n                .build();\r\n        return okHttpClient;\r\n    }\r\n\r\n    @Provides @Named(&quot;non_cached&quot;)\r\n    @Singleton\r\n    OkHttpClient provideOkHttpClientNonCached() {\r\n        OkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                .build();\r\n        return okHttpClient;\r\n    }\r\n\r\nGitHubModule.java is dependent on NetModule.java. \r\nmy GitHubComponent.java\r\n\r\n    @UserScope\r\n    @Component(dependencies = NetComponent.class, modules = GitHubModule.class)\r\n    public interface GitHubComponent {\r\n    void inject(DemoDaggerActivity activity);\r\n    }\r\n\r\nmy NetComponent.java\r\n\r\n    @Singleton\r\n    @Component(modules={ApplicationModule.class, NetModule.class})\r\n    public interface NetComponent {\r\n    // downstream components need these exposed\r\n    Retrofit retrofit();\r\n    OkHttpClient okHttpClient();\r\n    SharedPreferences sharedPreferences();\r\n    }\r\n\r\nIn my `DemoDaggerActivity.java` I inject retrofit:\r\n\r\n    @Inject @Named(&quot;cached&quot;)\r\n    OkHttpClient mOkHttpClient;\r\n\r\n    @Inject\r\n    Retrofit mRetrofit;\r\n\r\nAfter rebuild project I get error:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nWhere can I tell to dagger, that i want to use cached or non_cached retrofit?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jTWIa.png","title":"Dagger2 where inject @Named @Provides in dependent module?","body":"<p>I use dagger2 demo by <a href=\"https://guides.codepath.com/android/Dependency-Injection-with-Dagger-2\" rel=\"noreferrer\">https://guides.codepath.com/android/Dependency-Injection-with-Dagger-2</a>.\nI want to use cached and non_cached retrofit call. I create in NetModule.java</p>\n\n<pre><code>@Provides @Named(\"cached\")\n@Singleton\nOkHttpClient provideOkHttpClient(Cache cache) {\n    OkHttpClient okHttpClient = new OkHttpClient.Builder()\n            .cache(cache)\n            .build();\n    return okHttpClient;\n}\n\n@Provides @Named(\"non_cached\")\n@Singleton\nOkHttpClient provideOkHttpClientNonCached() {\n    OkHttpClient okHttpClient = new OkHttpClient.Builder()\n            .build();\n    return okHttpClient;\n}\n</code></pre>\n\n<p>GitHubModule.java is dependent on NetModule.java. \nmy GitHubComponent.java</p>\n\n<pre><code>@UserScope\n@Component(dependencies = NetComponent.class, modules = GitHubModule.class)\npublic interface GitHubComponent {\nvoid inject(DemoDaggerActivity activity);\n}\n</code></pre>\n\n<p>my NetComponent.java</p>\n\n<pre><code>@Singleton\n@Component(modules={ApplicationModule.class, NetModule.class})\npublic interface NetComponent {\n// downstream components need these exposed\nRetrofit retrofit();\nOkHttpClient okHttpClient();\nSharedPreferences sharedPreferences();\n}\n</code></pre>\n\n<p>In my <code>DemoDaggerActivity.java</code> I inject retrofit:</p>\n\n<pre><code>@Inject @Named(\"cached\")\nOkHttpClient mOkHttpClient;\n\n@Inject\nRetrofit mRetrofit;\n</code></pre>\n\n<p>After rebuild project I get error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jTWIa.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jTWIa.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where can I tell to dagger, that i want to use cached or non_cached retrofit?</p>\n"},{"tags":["java","security"],"answers":[{"tags":[],"owner":{"account_id":1485484,"reputation":17448,"user_id":1393862,"accept_rate":84,"display_name":"Kuf"},"down_vote_count":0,"up_vote_count":233,"is_accepted":false,"score":233,"last_activity_date":1691850121,"creation_date":1344873390,"answer_id":11937940,"question_id":11936685,"body_markdown":"Under **Linux**, to find the location of `$JAVA_HOME`:\r\n\r\n    readlink -f /usr/bin/java | sed &quot;s:bin/java::&quot;\r\n\r\n\r\nthe `cacerts` are under `lib/security/cacerts`:\r\n\r\n    $(readlink -f /usr/bin/java | sed &quot;s:bin/java::&quot;)lib/security/cacerts\r\n\r\nUnder **mac OS X** , to find `$JAVA_HOME` run:\r\n\r\n    /usr/libexec/java_home\r\n\r\nthe `cacerts` are under `Home/lib/security/cacerts`:\r\n\r\n    $(/usr/libexec/java_home)/lib/security/cacerts\r\n\r\n**UPDATE: JDK 8 (or prior)**\r\n\r\nThe code above was tested on a computer with a JRE installed. \r\nWhen using a JDK for Java 8 (or prior), [as pR0Ps said](https://stackoverflow.com/a/27971915/369977), it&#39;s at\r\n\r\n    $(/usr/libexec/java_home)/jre/lib/security/cacerts\r\n\r\nFor Java 9 and above, both JRE and JDK use `$(/usr/libexec/java_home)/lib/security/cacerts`.","title":"How to obtain the location of cacerts of the default java installation?","body":"<p>Under <strong>Linux</strong>, to find the location of <code>$JAVA_HOME</code>:</p>\n<pre><code>readlink -f /usr/bin/java | sed &quot;s:bin/java::&quot;\n</code></pre>\n<p>the <code>cacerts</code> are under <code>lib/security/cacerts</code>:</p>\n<pre><code>$(readlink -f /usr/bin/java | sed &quot;s:bin/java::&quot;)lib/security/cacerts\n</code></pre>\n<p>Under <strong>mac OS X</strong> , to find <code>$JAVA_HOME</code> run:</p>\n<pre><code>/usr/libexec/java_home\n</code></pre>\n<p>the <code>cacerts</code> are under <code>Home/lib/security/cacerts</code>:</p>\n<pre><code>$(/usr/libexec/java_home)/lib/security/cacerts\n</code></pre>\n<p><strong>UPDATE: JDK 8 (or prior)</strong></p>\n<p>The code above was tested on a computer with a JRE installed.\nWhen using a JDK for Java 8 (or prior), <a href=\"https://stackoverflow.com/a/27971915/369977\">as pR0Ps said</a>, it's at</p>\n<pre><code>$(/usr/libexec/java_home)/jre/lib/security/cacerts\n</code></pre>\n<p>For Java 9 and above, both JRE and JDK use <code>$(/usr/libexec/java_home)/lib/security/cacerts</code>.</p>\n"},{"tags":[],"owner":{"account_id":154212,"reputation":2772,"user_id":369977,"accept_rate":100,"display_name":"pR0Ps"},"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1421351790,"creation_date":1421351790,"answer_id":27971915,"question_id":11936685,"body_markdown":"As of OS X 10.10.1 (Yosemite), the location of the `cacerts` file has been changed to\r\n\r\n    $(/usr/libexec/java_home)/jre/lib/security/cacerts","title":"How to obtain the location of cacerts of the default java installation?","body":"<p>As of OS X 10.10.1 (Yosemite), the location of the <code>cacerts</code> file has been changed to</p>\n\n<pre><code>$(/usr/libexec/java_home)/jre/lib/security/cacerts\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1421352016,"creation_date":1421352016,"answer_id":27971974,"question_id":11936685,"body_markdown":"You can also consult readlink -f &quot;`which java`&quot;. However it might not work for all binary wrappers. It is most likely better to actually start a Java class.","title":"How to obtain the location of cacerts of the default java installation?","body":"<p>You can also consult readlink -f \"<code>which java</code>\". However it might not work for all binary wrappers. It is most likely better to actually start a Java class.</p>\n"},{"tags":[],"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1517964230,"creation_date":1517964230,"answer_id":48654255,"question_id":11936685,"body_markdown":"If you need to access those certs programmatically it is best to not use the file at all, but access it via the trust manager. The following code is from a OpenJDK [Test][1] case (which makes sure the built cacerts collection is not empty):\n\n    TrustManagerFactory trustManagerFactory =\n        TrustManagerFactory.getInstance(&quot;PKIX&quot;);\n    trustManagerFactory.init((KeyStore) null);\n    TrustManager[] trustManagers =\n        trustManagerFactory.getTrustManagers();\n    X509TrustManager trustManager =\n        (X509TrustManager) trustManagers[0];\n    X509Certificate[] acceptedIssuers =\n        trustManager.getAcceptedIssuers();\n\nSo you don’t have to deal with file location or keystore password.\n\n\n  [1]: http://cr.openjdk.java.net/~martin/webrevs/jdk/CacertsExplorer/test/jdk/javax/net/ssl/sanity/CacertsExplorer.java.html","title":"How to obtain the location of cacerts of the default java installation?","body":"<p>If you need to access those certs programmatically it is best to not use the file at all, but access it via the trust manager. The following code is from a OpenJDK <a href=\"http://cr.openjdk.java.net/~martin/webrevs/jdk/CacertsExplorer/test/jdk/javax/net/ssl/sanity/CacertsExplorer.java.html\" rel=\"noreferrer\">Test</a> case (which makes sure the built cacerts collection is not empty):</p>\n\n<pre><code>TrustManagerFactory trustManagerFactory =\n    TrustManagerFactory.getInstance(\"PKIX\");\ntrustManagerFactory.init((KeyStore) null);\nTrustManager[] trustManagers =\n    trustManagerFactory.getTrustManagers();\nX509TrustManager trustManager =\n    (X509TrustManager) trustManagers[0];\nX509Certificate[] acceptedIssuers =\n    trustManager.getAcceptedIssuers();\n</code></pre>\n\n<p>So you don’t have to deal with file location or keystore password.</p>\n"},{"tags":[],"owner":{"account_id":15610464,"reputation":79,"user_id":11262072,"display_name":"arpurush"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1553786515,"creation_date":1553782933,"answer_id":55399974,"question_id":11936685,"body_markdown":"In High Sierra, the **cacerts** is located at : `/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/security/cacerts`","title":"How to obtain the location of cacerts of the default java installation?","body":"<p>In High Sierra, the <strong>cacerts</strong> is located at : <code>/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/security/cacerts</code></p>\n"},{"tags":[],"owner":{"account_id":674339,"reputation":545,"user_id":518401,"display_name":"Nish"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1563458038,"creation_date":1562173344,"answer_id":56874963,"question_id":11936685,"body_markdown":"In MacOS Mojave, the location is:\r\n\r\n    /Library/Java/JavaVirtualMachines/jdk1.8.0_192.jdk/Contents/Home/jre/lib/security/cacerts \r\n\r\nIf using sdkman to manage java versions, the cacerts is in\r\n   \r\n\r\n    ~/.sdkman/candidates/java/current/jre/lib/security","title":"How to obtain the location of cacerts of the default java installation?","body":"<p>In MacOS Mojave, the location is:</p>\n\n<pre><code>/Library/Java/JavaVirtualMachines/jdk1.8.0_192.jdk/Contents/Home/jre/lib/security/cacerts \n</code></pre>\n\n<p>If using sdkman to manage java versions, the cacerts is in</p>\n\n<pre><code>~/.sdkman/candidates/java/current/jre/lib/security\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15400934,"reputation":1598,"user_id":11110455,"display_name":"Felipe Windmoller"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1636139579,"creation_date":1636138470,"answer_id":69857998,"question_id":11936685,"body_markdown":"In Ubuntu 20.04.3 LTS, the **cacerts** is located at: `/etc/ssl/certs/java/cacerts`\r\n\r\n```\r\n$ java --version\r\nopenjdk 11.0.11 2021-04-20\r\nOpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)\r\nOpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)\r\n```\r\n\r\n```\r\n$ ls -lah /usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts*\r\n/usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts -&gt; /etc/ssl/certs/java/cacerts\r\n```","title":"How to obtain the location of cacerts of the default java installation?","body":"<p>In Ubuntu 20.04.3 LTS, the <strong>cacerts</strong> is located at: <code>/etc/ssl/certs/java/cacerts</code></p>\n<pre><code>$ java --version\nopenjdk 11.0.11 2021-04-20\nOpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)\nOpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)\n</code></pre>\n<pre><code>$ ls -lah /usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts*\n/usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts -&gt; /etc/ssl/certs/java/cacerts\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1641947025,"creation_date":1641947025,"answer_id":70674977,"question_id":11936685,"body_markdown":"For `Java 9` onwards, it&#39;s in &lt;br&gt;\r\n\r\n&gt; `${JAVA_HOME}/lib/security/cacerts`\r\n\r\nas opposed to the usual &lt;br&gt;\r\n\r\n&gt; `${JAVA_HOME}/jre/lib/security/cacerts`","title":"How to obtain the location of cacerts of the default java installation?","body":"<p>For <code>Java 9</code> onwards, it's in <br></p>\n<blockquote>\n<p><code>${JAVA_HOME}/lib/security/cacerts</code></p>\n</blockquote>\n<p>as opposed to the usual <br></p>\n<blockquote>\n<p><code>${JAVA_HOME}/jre/lib/security/cacerts</code></p>\n</blockquote>\n"}],"owner":{"account_id":35261,"reputation":163460,"user_id":99834,"accept_rate":46,"display_name":"sorin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286065,"favorite_count":0,"down_vote_count":0,"up_vote_count":141,"answer_count":8,"score":141,"last_activity_date":1691850121,"creation_date":1344869155,"question_id":11936685,"body_markdown":"I am looking on how how to obtain the location of `cacerts` of the default java installation, when you do not have `JAVA_HOME` or `JRE_HOME` defined.\r\n\r\nI need a solution that works at least for `OS X` and `Linux`.\r\n\r\nYes. `java -v` is assumed to work :)","title":"How to obtain the location of cacerts of the default java installation?","body":"<p>I am looking on how how to obtain the location of <code>cacerts</code> of the default java installation, when you do not have <code>JAVA_HOME</code> or <code>JRE_HOME</code> defined.</p>\n\n<p>I need a solution that works at least for <code>OS X</code> and <code>Linux</code>.</p>\n\n<p>Yes. <code>java -v</code> is assumed to work :)</p>\n"},{"tags":["java","android","error-handling"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691850498,"post_id":76889623,"comment_id":135548788,"body_markdown":"That seem not to be the complete file. A valid XML file should have a root element.","body":"That seem not to be the complete file. A valid XML file should have a root element."},{"owner":{"account_id":21332522,"reputation":41,"user_id":15704156,"display_name":"M.Jamous"},"score":0,"creation_date":1691860727,"post_id":76889623,"comment_id":135549805,"body_markdown":"yes the root is just like this &quot;&lt;resources&gt;&quot;","body":"yes the root is just like this &quot;&lt;resources&gt;&quot;"}],"owner":{"account_id":21332522,"reputation":41,"user_id":15704156,"display_name":"M.Jamous"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691848992,"creation_date":1691848992,"question_id":76889623,"body_markdown":"this is attr file\r\n\r\n      &lt;declare-styleable name=&quot;WeekdaysPicker&quot;&gt;\r\n        &lt;attr name=&quot;enabled&quot; format=&quot;boolean&quot; /&gt;\r\n        &lt;attr name=&quot;highlight_color&quot; format=&quot;color&quot; /&gt;\r\n\r\n        &lt;attr name=&quot;text_unselected_color&quot; format=&quot;color&quot; /&gt;\r\n        &lt;attr name=&quot;sunday_first_day&quot; format=&quot;boolean&quot; /&gt;\r\n        &lt;attr name=&quot;show_weekend&quot; format=&quot;boolean&quot; /&gt;\r\n        &lt;attr name=&quot;week_end_darker&quot; format=&quot;boolean&quot; /&gt;\r\n        &lt;attr name=&quot;weekend_color&quot; format=&quot;color&quot; /&gt;\r\n        &lt;attr name=&quot;weekend_text_color&quot; format=&quot;color&quot; /&gt;\r\n        &lt;attr name=&quot;full_size&quot; format=&quot;boolean&quot; /&gt;\r\n        &lt;attr name=&quot;recurrence&quot; format=&quot;boolean&quot; /&gt;\r\n        &lt;attr name=&quot;border_color&quot; format=&quot;color&quot; /&gt;\r\n        &lt;attr name=&quot;border_thickness&quot; format=&quot;integer&quot; /&gt;\r\n        &lt;attr name=&quot;border_highlight_color&quot; format=&quot;color&quot; /&gt;\r\n        &lt;attr name=&quot;border_highlight_thickness&quot; format=&quot;integer&quot; /&gt;\r\n    &lt;/declare-styleable&gt;\r\n\r\n    &lt;attr name=&quot;text_color&quot; format=&quot;color&quot; /&gt;\r\n    &lt;attr name=&quot;button_text_color&quot; format=&quot;reference&quot; /&gt;\r\n    &lt;attr name=&quot;button_background_color&quot; format=&quot;reference&quot; /&gt;\r\n    &lt;attr name=&quot;button_disabled_background_color&quot; format=&quot;reference&quot; /&gt;\r\n    &lt;attr name=&quot;background_color&quot; format=&quot;reference&quot; /&gt;\r\n    &lt;attr name=&quot;input_layout_background_color&quot; format=&quot;reference&quot; /&gt;\r\n    &lt;attr name=&quot;icon_color&quot; format=&quot;reference&quot; /&gt;\r\n\r\n\r\nNothing in the project has &lt;:&gt; in it, and tried Invalidate Caches and Restart didn&#39;t work, tried changing the attr values name didn&#39;t work too.\r\n","title":"How to fix &quot;Illegal char &lt;:&gt; at index 37: com.xride.app-mergeDebugResources-115:/values/values.xml&quot; in Android","body":"<p>this is attr file</p>\n<pre><code>  &lt;declare-styleable name=&quot;WeekdaysPicker&quot;&gt;\n    &lt;attr name=&quot;enabled&quot; format=&quot;boolean&quot; /&gt;\n    &lt;attr name=&quot;highlight_color&quot; format=&quot;color&quot; /&gt;\n\n    &lt;attr name=&quot;text_unselected_color&quot; format=&quot;color&quot; /&gt;\n    &lt;attr name=&quot;sunday_first_day&quot; format=&quot;boolean&quot; /&gt;\n    &lt;attr name=&quot;show_weekend&quot; format=&quot;boolean&quot; /&gt;\n    &lt;attr name=&quot;week_end_darker&quot; format=&quot;boolean&quot; /&gt;\n    &lt;attr name=&quot;weekend_color&quot; format=&quot;color&quot; /&gt;\n    &lt;attr name=&quot;weekend_text_color&quot; format=&quot;color&quot; /&gt;\n    &lt;attr name=&quot;full_size&quot; format=&quot;boolean&quot; /&gt;\n    &lt;attr name=&quot;recurrence&quot; format=&quot;boolean&quot; /&gt;\n    &lt;attr name=&quot;border_color&quot; format=&quot;color&quot; /&gt;\n    &lt;attr name=&quot;border_thickness&quot; format=&quot;integer&quot; /&gt;\n    &lt;attr name=&quot;border_highlight_color&quot; format=&quot;color&quot; /&gt;\n    &lt;attr name=&quot;border_highlight_thickness&quot; format=&quot;integer&quot; /&gt;\n&lt;/declare-styleable&gt;\n\n&lt;attr name=&quot;text_color&quot; format=&quot;color&quot; /&gt;\n&lt;attr name=&quot;button_text_color&quot; format=&quot;reference&quot; /&gt;\n&lt;attr name=&quot;button_background_color&quot; format=&quot;reference&quot; /&gt;\n&lt;attr name=&quot;button_disabled_background_color&quot; format=&quot;reference&quot; /&gt;\n&lt;attr name=&quot;background_color&quot; format=&quot;reference&quot; /&gt;\n&lt;attr name=&quot;input_layout_background_color&quot; format=&quot;reference&quot; /&gt;\n&lt;attr name=&quot;icon_color&quot; format=&quot;reference&quot; /&gt;\n</code></pre>\n<p>Nothing in the project has &lt;:&gt; in it, and tried Invalidate Caches and Restart didn't work, tried changing the attr values name didn't work too.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691849774,"post_id":7379915,"comment_id":135548689,"body_markdown":"you are telling that `rh.executeBatchInsert()` does not work? Some error message? Which?","body":"you are telling that <code>rh.executeBatchInsert()</code> does not work? Some error message? Which?"}],"answers":[{"tags":[],"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1315761524,"creation_date":1315761524,"answer_id":7379937,"question_id":7379915,"body_markdown":"You can&#39;t call a non-static method from a static method, because the definition of &quot;non-static&quot; means something that is associated with an *instance* of the class.  You don&#39;t have an instance of the class in a static context.","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>You can't call a non-static method from a static method, because the definition of \"non-static\" means something that is associated with an <em>instance</em> of the class.  You don't have an instance of the class in a static context.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":79,"is_accepted":true,"score":79,"last_activity_date":1315761552,"creation_date":1315761552,"answer_id":7379939,"question_id":7379915,"body_markdown":"You simply need to create an instance of ReportHandler:\r\n\r\n    ReportHandler rh = new ReportHandler(/* constructor args here */);\r\n    rh.executeBatchInsert(); // Having fixed name to follow conventions\r\n\r\nThe important point of instance methods is that they&#39;re meant to be specific to a particular instance of the class... so you&#39;ll need to *create* an instance first. That way the instance will have access to the right connection and prepared statement in your case. Just calling `ReportHandler.executeBatchInsert`, there isn&#39;t enough *context*.\r\n\r\nIt&#39;s really important that you understand that:\r\n\r\n- Instance methods (and fields etc) relate to a particular instance\r\n- Static methods and fields relate to the type itself, *not* a particular instance\r\n\r\nOnce you understand that fundamental difference, it makes sense that you can&#39;t call an instance method without creating an instance... For example, it makes sense to ask, &quot;What is the height of *that* person?&quot; (for a specific person) but it doesn&#39;t make sense to ask, &quot;What is the height of Person?&quot; (without specifying a person).\r\n\r\nAssuming you&#39;re leaning Java from a book or tutorial, you should read up on more examples of static and non-static methods etc - it&#39;s a *vital* distinction to understand, and you&#39;ll have all kinds of problems until you&#39;ve understood it.","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>You simply need to create an instance of ReportHandler:</p>\n\n<pre><code>ReportHandler rh = new ReportHandler(/* constructor args here */);\nrh.executeBatchInsert(); // Having fixed name to follow conventions\n</code></pre>\n\n<p>The important point of instance methods is that they're meant to be specific to a particular instance of the class... so you'll need to <em>create</em> an instance first. That way the instance will have access to the right connection and prepared statement in your case. Just calling <code>ReportHandler.executeBatchInsert</code>, there isn't enough <em>context</em>.</p>\n\n<p>It's really important that you understand that:</p>\n\n<ul>\n<li>Instance methods (and fields etc) relate to a particular instance</li>\n<li>Static methods and fields relate to the type itself, <em>not</em> a particular instance</li>\n</ul>\n\n<p>Once you understand that fundamental difference, it makes sense that you can't call an instance method without creating an instance... For example, it makes sense to ask, \"What is the height of <em>that</em> person?\" (for a specific person) but it doesn't make sense to ask, \"What is the height of Person?\" (without specifying a person).</p>\n\n<p>Assuming you're leaning Java from a book or tutorial, you should read up on more examples of static and non-static methods etc - it's a <em>vital</em> distinction to understand, and you'll have all kinds of problems until you've understood it.</p>\n"},{"tags":[],"owner":{"account_id":378962,"reputation":15657,"user_id":732016,"accept_rate":83,"display_name":"wchargin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1315761581,"creation_date":1315761581,"answer_id":7379943,"question_id":7379915,"body_markdown":"A static method means that you don&#39;t need to invoke the method on an instance. A non-static (instance) method requires that you invoke it on an instance. So think about it: if I have a method `changeThisItemToTheColorBlue()` and I try to run it from the main method, what instance would it change? It doesn&#39;t know. You can run an instance method _on_ an instance, like `someItem.changeThisItemToTheColorBlue()`.\r\n\r\nMore information at &lt;http://en.wikipedia.org/wiki/Method_(computer_programming)#Static_methods&gt;.","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>A static method means that you don't need to invoke the method on an instance. A non-static (instance) method requires that you invoke it on an instance. So think about it: if I have a method <code>changeThisItemToTheColorBlue()</code> and I try to run it from the main method, what instance would it change? It doesn't know. You can run an instance method <em>on</em> an instance, like <code>someItem.changeThisItemToTheColorBlue()</code>.</p>\n\n<p>More information at <a href=\"http://en.wikipedia.org/wiki/Method_(computer_programming)#Static_methods\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Method_(computer_programming)#Static_methods</a>.</p>\n"},{"tags":[],"owner":{"account_id":230661,"reputation":613,"user_id":494402,"accept_rate":62,"display_name":"zero_dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1315761720,"creation_date":1315761720,"answer_id":7379957,"question_id":7379915,"body_markdown":"You can think of a static member function as one that exists without the need for an object to exist.  For example, the Integer.parseInt() method from the Integer class is static.  When you need to use it, you don&#39;t need to create a new Integer object, you simply call it.  The same thing for main().  If you need to call a non-static member from it, simply put your main code in a class and then from main create a new object of your newly created class.","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>You can think of a static member function as one that exists without the need for an object to exist.  For example, the Integer.parseInt() method from the Integer class is static.  When you need to use it, you don't need to create a new Integer object, you simply call it.  The same thing for main().  If you need to call a non-static member from it, simply put your main code in a class and then from main create a new object of your newly created class.</p>\n"},{"tags":[],"owner":{"account_id":242656,"reputation":26086,"user_id":514316,"accept_rate":80,"display_name":"TheOneTeam"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1315762098,"creation_date":1315762098,"answer_id":7380000,"question_id":7379915,"body_markdown":"Java is a kind of object-oriented programming, not a procedure programming. So every thing in your code should be manipulating an object.\r\n\r\n**public static void main** is only the **entry** of your program. It does not involve any object behind.\r\n\r\nSo what is coding with an object? It is simple, you need to create a particular object/instance, call their methods to change their states, or do other specific function within that object.\r\n\r\ne.g. just like\r\n\r\n    private ReportHandler rh = new ReportHandler();\r\n    rh.&lt;function declare in your Report Handler class&gt;\r\n\r\nSo when you declare a **static** method, it doesn&#39;t associate with your object/instance of your object. And it is also violate with your O-O programming. \r\n\r\n**static** method is usually be called when that function is not related to any object behind.","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>Java is a kind of object-oriented programming, not a procedure programming. So every thing in your code should be manipulating an object.</p>\n\n<p><strong>public static void main</strong> is only the <strong>entry</strong> of your program. It does not involve any object behind.</p>\n\n<p>So what is coding with an object? It is simple, you need to create a particular object/instance, call their methods to change their states, or do other specific function within that object.</p>\n\n<p>e.g. just like</p>\n\n<pre><code>private ReportHandler rh = new ReportHandler();\nrh.&lt;function declare in your Report Handler class&gt;\n</code></pre>\n\n<p>So when you declare a <strong>static</strong> method, it doesn't associate with your object/instance of your object. And it is also violate with your O-O programming. </p>\n\n<p><strong>static</strong> method is usually be called when that function is not related to any object behind.</p>\n"},{"tags":[],"owner":{"account_id":6132216,"reputation":603,"user_id":4782065,"accept_rate":0,"display_name":"Ankit"},"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1526078450,"creation_date":1449219857,"answer_id":34084440,"question_id":7379915,"body_markdown":"Please find answer:\r\n               \r\n    public class Customer {\r\n    \r\n        public static void main(String[] args) {\r\n            Customer customer=new Customer();\r\n            customer.business();\r\n        }\r\n   \r\n        public void business(){\r\n            System.out.println(&quot;Hi Harry&quot;);\r\n        }\r\n    }\r\n","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>Please find answer:</p>\n\n<pre><code>public class Customer {\n\n    public static void main(String[] args) {\n        Customer customer=new Customer();\n        customer.business();\n    }\n\n    public void business(){\n        System.out.println(\"Hi Harry\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11728127,"reputation":1,"user_id":8584649,"display_name":"user8584649"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504972058,"creation_date":1504972058,"answer_id":46132366,"question_id":7379915,"body_markdown":"You cannot call a non-static method from the main without instance creation, whereas you can simply call a static method.\r\nThe main logic behind this is that, whenever you execute a .class file all the static data gets stored in the RAM and however, JVM(java virtual machine) would be creating context of the mentioned class which contains all the static data of the class. \r\nTherefore, it is easy to access the static data from the class without instance creation.The object contains the non-static data\r\nContext is created only once, whereas object can be created any number of times.\r\ncontext contains methods, variables etc. Whereas, object contains only data.\r\nthus, the an object can access both static and non-static data from the context of the class","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>You cannot call a non-static method from the main without instance creation, whereas you can simply call a static method.\nThe main logic behind this is that, whenever you execute a .class file all the static data gets stored in the RAM and however, JVM(java virtual machine) would be creating context of the mentioned class which contains all the static data of the class. \nTherefore, it is easy to access the static data from the class without instance creation.The object contains the non-static data\nContext is created only once, whereas object can be created any number of times.\ncontext contains methods, variables etc. Whereas, object contains only data.\nthus, the an object can access both static and non-static data from the context of the class</p>\n"},{"tags":[],"owner":{"account_id":13700339,"reputation":131,"user_id":9885720,"display_name":"user9885720"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532210207,"creation_date":1532210207,"answer_id":51460440,"question_id":7379915,"body_markdown":"Since you want to call a non-static method from main, you just need to create an object of that class consisting non-static method and then you will be able to call the method using ***objectname.methodname();***\r\nBut if you write the method as static then you won&#39;t need to create object and you will be able to call the method using ***methodname();*** from main. And this will be more efficient as it will take less memory than the object created without static method.","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>Since you want to call a non-static method from main, you just need to create an object of that class consisting non-static method and then you will be able to call the method using <strong><em>objectname.methodname();</em></strong>\nBut if you write the method as static then you won't need to create object and you will be able to call the method using <strong><em>methodname();</em></strong> from main. And this will be more efficient as it will take less memory than the object created without static method.</p>\n"},{"tags":[],"owner":{"account_id":6115438,"reputation":596,"user_id":7625104,"display_name":"Vicky Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561181382,"creation_date":1561181382,"answer_id":56712857,"question_id":7379915,"body_markdown":"Useful link to understand static keyword\r\nhttps://www.codeguru.com/java/tij/tij0037.shtml#Heading79","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>Useful link to understand static keyword\n<a href=\"https://www.codeguru.com/java/tij/tij0037.shtml#Heading79\" rel=\"nofollow noreferrer\">https://www.codeguru.com/java/tij/tij0037.shtml#Heading79</a></p>\n"},{"tags":[],"owner":{"account_id":29211853,"reputation":1,"user_id":22379639,"display_name":"Varry"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691846965,"creation_date":1691846965,"answer_id":76889510,"question_id":7379915,"body_markdown":"Let me guess, &quot;ReportHandler&quot; was written like an inner class inside of Main?\r\nI faced the same problem, and all the answers here seems to be inattentive.\r\nI moved my &quot;ReportHandler&quot; outside, and the error has gone","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>Let me guess, &quot;ReportHandler&quot; was written like an inner class inside of Main?\nI faced the same problem, and all the answers here seems to be inattentive.\nI moved my &quot;ReportHandler&quot; outside, and the error has gone</p>\n"}],"owner":{"account_id":47759,"reputation":7319,"user_id":141579,"accept_rate":88,"display_name":"stighy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209258,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"accepted_answer_id":7379939,"answer_count":10,"score":57,"last_activity_date":1691846965,"creation_date":1315761369,"question_id":7379915,"body_markdown":"I&#39;m learning java and now i&#39;ve the following problem: I have the main method declared as\r\n\r\n    public static void main(String[] args) {\r\n    \r\n    ..... }\r\n\r\nInside my main method, because it is **static** I can call ONLY other static method!!! Why ?\r\n\r\nFor example: I have another class\r\n\r\n     public class ReportHandler { \t \t\r\n         private Connection conn; \t\r\n         private PreparedStatement prep;\r\n         public void executeBatchInsert() { ....\r\n     } }\r\n\r\n\r\nSo in my main class I declare a `private ReportHandler rh = new ReportHandler();`\r\n\r\nBut I can&#39;t call any method if they aren&#39;t static.\r\n\r\nWhere does this go wrong?\r\n\r\nEDIT: sorry, my question is: how to &#39;design&#39; the app to allow me to call other class from my &#39;starting point&#39; (the `static void main`).\r\n","title":"Java: How To Call Non Static Method From Main Method?","body":"<p>I'm learning java and now i've the following problem: I have the main method declared as</p>\n\n<pre><code>public static void main(String[] args) {\n\n..... }\n</code></pre>\n\n<p>Inside my main method, because it is <strong>static</strong> I can call ONLY other static method!!! Why ?</p>\n\n<p>For example: I have another class</p>\n\n<pre><code> public class ReportHandler {       \n     private Connection conn;   \n     private PreparedStatement prep;\n     public void executeBatchInsert() { ....\n } }\n</code></pre>\n\n<p>So in my main class I declare a <code>private ReportHandler rh = new ReportHandler();</code></p>\n\n<p>But I can't call any method if they aren't static.</p>\n\n<p>Where does this go wrong?</p>\n\n<p>EDIT: sorry, my question is: how to 'design' the app to allow me to call other class from my 'starting point' (the <code>static void main</code>).</p>\n"},{"tags":["java","regex","string","replace"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1307434810,"post_id":6262397,"comment_id":7305679,"body_markdown":"Oh the joy of regular expressions...","body":"Oh the joy of regular expressions..."}],"answers":[{"tags":[],"owner":{"account_id":182101,"reputation":48239,"user_id":416564,"accept_rate":100,"display_name":"Johan Sj&#246;berg"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1379606864,"creation_date":1307434656,"answer_id":6262409,"question_id":6262397,"body_markdown":"`replace` and `replaceAll` uses **regex** internally which in most cases gives a serious [performance impact][1] compared to e.g., [`StringUtils.replace(..)`][2]. \r\n\r\n\r\n[`String.replaceAll()`][3]:\r\n\r\n    public String replaceAll(String regex, String replacement) {\r\n            return Pattern.compile(regex).matcher(this ).replaceAll(\r\n                 replacement);\r\n    }\r\n\r\n\r\n[`String.replace()`][3] uses Pattern.compile underneath.\r\n\r\n    public String replace(CharSequence target, CharSequence replacement) {\r\n      return Pattern.compile(target.toString(), Pattern.LITERAL)\r\n             .matcher(this ).replaceAll(\r\n               Matcher.quoteReplacement(replacement.toString()));\r\n    }\r\n\r\nAlso see [Replace all occurrences of substring in a string - which is more efficient in Java?][4]\r\n\r\n  [1]: http://www.java2s.com/Open-Source/Java-Document/6.0-JDK-Core/Collections-Jar-Zip-Logging-regex/java/util/regex/Pattern.java.htm\r\n  [2]: http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#replace%28java.lang.String,%20java.lang.String,%20java.lang.String%29\r\n  [3]: http://www.java2s.com/Open-Source/Java-Document/6.0-JDK-Core/lang/java/lang/String.java.htm\r\n  [4]: https://stackoverflow.com/questions/5407592/replace-all-occurrences-of-substring-in-a-string-which-is-more-efficient-in-jav","title":"String.replaceAll is considerably slower than doing the job yourself","body":"<p><code>replace</code> and <code>replaceAll</code> uses <strong>regex</strong> internally which in most cases gives a serious <a href=\"http://www.java2s.com/Open-Source/Java-Document/6.0-JDK-Core/Collections-Jar-Zip-Logging-regex/java/util/regex/Pattern.java.htm\" rel=\"nofollow noreferrer\">performance impact</a> compared to e.g., <a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#replace%28java.lang.String,%20java.lang.String,%20java.lang.String%29\" rel=\"nofollow noreferrer\"><code>StringUtils.replace(..)</code></a>. </p>\n\n<p><a href=\"http://www.java2s.com/Open-Source/Java-Document/6.0-JDK-Core/lang/java/lang/String.java.htm\" rel=\"nofollow noreferrer\"><code>String.replaceAll()</code></a>:</p>\n\n<pre><code>public String replaceAll(String regex, String replacement) {\n        return Pattern.compile(regex).matcher(this ).replaceAll(\n             replacement);\n}\n</code></pre>\n\n<p><a href=\"http://www.java2s.com/Open-Source/Java-Document/6.0-JDK-Core/lang/java/lang/String.java.htm\" rel=\"nofollow noreferrer\"><code>String.replace()</code></a> uses Pattern.compile underneath.</p>\n\n<pre><code>public String replace(CharSequence target, CharSequence replacement) {\n  return Pattern.compile(target.toString(), Pattern.LITERAL)\n         .matcher(this ).replaceAll(\n           Matcher.quoteReplacement(replacement.toString()));\n}\n</code></pre>\n\n<p>Also see <a href=\"https://stackoverflow.com/questions/5407592/replace-all-occurrences-of-substring-in-a-string-which-is-more-efficient-in-jav\">Replace all occurrences of substring in a string - which is more efficient in Java?</a></p>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1307435535,"creation_date":1307434849,"answer_id":6262437,"question_id":6262397,"body_markdown":"When it comes to `replaceAll(&quot;[,. ]*&quot;, &quot;&quot;)` it&#39;s not that big of a surprise since it relies on regular expressions. The regex engine creates an automaton which it runs over the input. Some overhead is expected.\r\n\r\nThe second approach (`replace(&quot;,&quot;, &quot;&quot;)...`) also uses regular expressions internally. Here the given pattern is however compiled using `Pattern.LITERAL` so the regular expression overhead should be negligable.) In this case it is probably due to the fact that `Strings` are immutable (however small change you do, you will create a new string) and thus not as efficient as `StringBuffers` which manipulate the string in-place.","title":"String.replaceAll is considerably slower than doing the job yourself","body":"<p>When it comes to <code>replaceAll(\"[,. ]*\", \"\")</code> it's not that big of a surprise since it relies on regular expressions. The regex engine creates an automaton which it runs over the input. Some overhead is expected.</p>\n\n<p>The second approach (<code>replace(\",\", \"\")...</code>) also uses regular expressions internally. Here the given pattern is however compiled using <code>Pattern.LITERAL</code> so the regular expression overhead should be negligable.) In this case it is probably due to the fact that <code>Strings</code> are immutable (however small change you do, you will create a new string) and thus not as efficient as <code>StringBuffers</code> which manipulate the string in-place.</p>\n"},{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":70,"is_accepted":true,"score":70,"last_activity_date":1307434857,"creation_date":1307434857,"answer_id":6262439,"question_id":6262397,"body_markdown":"While using regular expressions imparts **some** performance impact, it should not be as terrible.\r\n\r\nNote that using [`String.replaceAll()`][1] will compile the regular expression **each time** you call it.\r\n\r\nYou can avoid that by explicitly using a [`Pattern`][2] object:\r\n\r\n    Pattern p = Pattern.compile(&quot;[,. ]+&quot;);\r\n \r\n    // repeat only the following part:\r\n    String output = p.matcher(input).replaceAll(&quot;&quot;);\r\n\r\nNote also that using `+` instead of `*` avoids replacing empty strings and therefore might also speed up the process.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html","title":"String.replaceAll is considerably slower than doing the job yourself","body":"<p>While using regular expressions imparts <strong>some</strong> performance impact, it should not be as terrible.</p>\n\n<p>Note that using <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\"><code>String.replaceAll()</code></a> will compile the regular expression <strong>each time</strong> you call it.</p>\n\n<p>You can avoid that by explicitly using a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html\"><code>Pattern</code></a> object:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"[,. ]+\");\n\n// repeat only the following part:\nString output = p.matcher(input).replaceAll(\"\");\n</code></pre>\n\n<p>Note also that using <code>+</code> instead of <code>*</code> avoids replacing empty strings and therefore might also speed up the process.</p>\n"},{"tags":[],"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1307442425,"creation_date":1307442425,"answer_id":6263890,"question_id":6262397,"body_markdown":"As I have put in a comment [,. ]* matches the empty String &quot;&quot;. So, every &quot;space&quot; between characters matches the pattern. It is only noted in performance because you are replacing a lot of &quot;&quot; by &quot;&quot;.\r\n\r\nTry doing this:\r\n\r\n    Pattern p = Pattern.compile(&quot;[,. ]*&quot;);\r\n    System.out.println(p.matcher(&quot;Hello World&quot;).replaceAll(&quot;$$$&quot;);\r\n\r\nIt returns:\r\n\r\nH$$$e$$$l$$$o$$$$$$W$$$o$$$r$$$l$$$d$$$!$$$\r\n\r\nNo wonder it is slower that doing it &quot;by hand&quot;! You should try with [,. ]+\r\n","title":"String.replaceAll is considerably slower than doing the job yourself","body":"<p>As I have put in a comment [,. ]* matches the empty String \"\". So, every \"space\" between characters matches the pattern. It is only noted in performance because you are replacing a lot of \"\" by \"\".</p>\n\n<p>Try doing this:</p>\n\n<pre><code>Pattern p = Pattern.compile(\"[,. ]*\");\nSystem.out.println(p.matcher(\"Hello World\").replaceAll(\"$$$\");\n</code></pre>\n\n<p>It returns:</p>\n\n<p>H$$$e$$$l$$$o$$$$$$W$$$o$$$r$$$l$$$d$$$!$$$</p>\n\n<p>No wonder it is slower that doing it \"by hand\"! You should try with [,. ]+</p>\n"},{"tags":[],"owner":{"account_id":2025376,"reputation":213,"user_id":1810548,"display_name":"chipukb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691846886,"creation_date":1691846886,"answer_id":76889506,"question_id":6262397,"body_markdown":"This is a very old post, but for the record, since **Java 9**, the performance characteristics of String.replace(String,String) has changed, it now does **not** use Pattern under the hood\r\n\r\nhttps://medium.com/javarevisited/micro-optimizations-in-java-string-replaceall-c6d0edf2ef6","title":"String.replaceAll is considerably slower than doing the job yourself","body":"<p>This is a very old post, but for the record, since <strong>Java 9</strong>, the performance characteristics of String.replace(String,String) has changed, it now does <strong>not</strong> use Pattern under the hood</p>\n<p><a href=\"https://medium.com/javarevisited/micro-optimizations-in-java-string-replaceall-c6d0edf2ef6\" rel=\"nofollow noreferrer\">https://medium.com/javarevisited/micro-optimizations-in-java-string-replaceall-c6d0edf2ef6</a></p>\n"}],"owner":{"account_id":146723,"reputation":9512,"user_id":357360,"accept_rate":84,"display_name":"RonK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40979,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":6262439,"answer_count":5,"score":36,"last_activity_date":1691846886,"creation_date":1307434553,"question_id":6262397,"body_markdown":"I have an old piece of code that performs find and replace of tokens within a string.\r\n\r\nIt receives a map of `from` and `to` pairs, iterates over them and for each of those pairs, iterates over the target string, looks for the `from` using `indexOf()`, and replaces it with the value of `to`. It does all the work on a `StringBuffer` and eventually returns a `String`.\r\n\r\nI replaced that code with this line: `replaceAll(&quot;[,. ]*&quot;, &quot;&quot;);`  \r\nAnd I ran some comparative performance tests.  \r\nWhen comparing for `1,000,000` iterations, I got this:\r\n&gt; Old Code: 1287ms  \r\n&gt; New Code: 4605ms  \r\n\r\n3 times longer!\r\n\r\nI then tried replacing it with 3 calls to `replace`:  \r\n `replace(&quot;,&quot;, &quot;&quot;);`    \r\n `replace(&quot;.&quot;, &quot;&quot;);`    \r\n `replace(&quot; &quot;, &quot;&quot;);`    \r\n\r\nThis resulted with the following results:\r\n&gt; Old Code: 1295  \r\n&gt; New Code: 3524\r\n\r\n2 times longer!\r\n\r\nAny idea why `replace` and `replaceAll` are so inefficient? Can I do something to make it faster?\r\n\r\n\r\n----------\r\n\r\n**Edit:** Thanks for all the answers - the main problem was indeed that `[,. ]*` did not do what I wanted it to do. Changing it to be `[,. ]+` almost equaled the performance of the non-Regex based solution.\r\nUsing a pre-compiled regex helped, but was marginal. (It is a solution very applicable for my problem.\r\n\r\nTest code:  \r\n[Replace string with Regex: [,. ]*][1]  \r\n[Replace string with Regex: [,. ]+][2]  \r\n[Replace string with Regex: [,. ]+ and Pre-Compiled Pattern][3]  \r\n\r\n\r\n  [1]: http://ideone.com/66cVN\r\n  [2]: http://ideone.com/3Ed2A\r\n  [3]: http://ideone.com/tmDD1","title":"String.replaceAll is considerably slower than doing the job yourself","body":"<p>I have an old piece of code that performs find and replace of tokens within a string.</p>\n\n<p>It receives a map of <code>from</code> and <code>to</code> pairs, iterates over them and for each of those pairs, iterates over the target string, looks for the <code>from</code> using <code>indexOf()</code>, and replaces it with the value of <code>to</code>. It does all the work on a <code>StringBuffer</code> and eventually returns a <code>String</code>.</p>\n\n<p>I replaced that code with this line: <code>replaceAll(\"[,. ]*\", \"\");</code><br>\nAnd I ran some comparative performance tests.<br>\nWhen comparing for <code>1,000,000</code> iterations, I got this:</p>\n\n<blockquote>\n  <p>Old Code: 1287ms<br>\n  New Code: 4605ms  </p>\n</blockquote>\n\n<p>3 times longer!</p>\n\n<p>I then tried replacing it with 3 calls to <code>replace</code>:<br>\n <code>replace(\",\", \"\");</code><br>\n <code>replace(\".\", \"\");</code><br>\n <code>replace(\" \", \"\");</code>    </p>\n\n<p>This resulted with the following results:</p>\n\n<blockquote>\n  <p>Old Code: 1295<br>\n  New Code: 3524</p>\n</blockquote>\n\n<p>2 times longer!</p>\n\n<p>Any idea why <code>replace</code> and <code>replaceAll</code> are so inefficient? Can I do something to make it faster?</p>\n\n<hr>\n\n<p><strong>Edit:</strong> Thanks for all the answers - the main problem was indeed that <code>[,. ]*</code> did not do what I wanted it to do. Changing it to be <code>[,. ]+</code> almost equaled the performance of the non-Regex based solution.\nUsing a pre-compiled regex helped, but was marginal. (It is a solution very applicable for my problem.</p>\n\n<p>Test code:<br>\n<a href=\"http://ideone.com/66cVN\">Replace string with Regex: [,. ]*</a><br>\n<a href=\"http://ideone.com/3Ed2A\">Replace string with Regex: [,. ]+</a><br>\n<a href=\"http://ideone.com/tmDD1\">Replace string with Regex: [,. ]+ and Pre-Compiled Pattern</a>  </p>\n"},{"tags":["java","alpine-linux","openjdk-17"],"answers":[{"tags":[],"owner":{"account_id":1078921,"reputation":36333,"user_id":1076463,"accept_rate":65,"display_name":"Robin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1641905380,"creation_date":1641905380,"answer_id":70667085,"question_id":70666824,"body_markdown":"The 7th image layer in that Docker container contains the command used to download the JDK, including:\r\n\r\n    downloadUrl=&#39;https://download.java.net/java/early_access/alpine/14/binaries/openjdk-17-ea+14_linux-x64-musl_bin.tar.gz&#39;\r\n    downloadSha256=&#39;f07a1ac921333dafac1cd886ad49600ce143be7efebd32e1a02599a8a0829dd4&#39;\r\n\r\nSo it uses an early access build.","title":"OpenJDK 17 Alpine Image","body":"<p>The 7th image layer in that Docker container contains the command used to download the JDK, including:</p>\n<pre><code>downloadUrl='https://download.java.net/java/early_access/alpine/14/binaries/openjdk-17-ea+14_linux-x64-musl_bin.tar.gz'\ndownloadSha256='f07a1ac921333dafac1cd886ad49600ce143be7efebd32e1a02599a8a0829dd4'\n</code></pre>\n<p>So it uses an early access build.</p>\n"},{"tags":[],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691846497,"creation_date":1691846497,"answer_id":76889478,"question_id":70666824,"body_markdown":"You may use:\r\n\r\nhttps://hub.docker.com/layers/library/amazoncorretto/17.0.8-alpine3.18/images/sha256-6e6f780411eae55e8dcb59391aa09dd778f0fa2c896f9c218961fdb7da52f485?context=explore\r\n\r\nor \r\n\r\namazoncorretto:17.0.7-alpine on docker hub.","title":"OpenJDK 17 Alpine Image","body":"<p>You may use:</p>\n<p><a href=\"https://hub.docker.com/layers/library/amazoncorretto/17.0.8-alpine3.18/images/sha256-6e6f780411eae55e8dcb59391aa09dd778f0fa2c896f9c218961fdb7da52f485?context=explore\" rel=\"nofollow noreferrer\">https://hub.docker.com/layers/library/amazoncorretto/17.0.8-alpine3.18/images/sha256-6e6f780411eae55e8dcb59391aa09dd778f0fa2c896f9c218961fdb7da52f485?context=explore</a></p>\n<p>or</p>\n<p>amazoncorretto:17.0.7-alpine on docker hub.</p>\n"}],"owner":{"account_id":6307461,"reputation":365,"user_id":4900133,"display_name":"enthusiast"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21482,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":70667085,"answer_count":2,"score":5,"last_activity_date":1691846497,"creation_date":1641904220,"question_id":70666824,"body_markdown":"I am looking for an openjdk 17 docker image based on alpine.\r\nIt looks like we have got one here\r\n\r\nhttps://hub.docker.com/layers/openjdk/library/openjdk/17-alpine/images/sha256-a996cdcc040704ec6badaf5fecf1e144c096e00231a29188596c784bcf858d05?context=explore\r\n\r\nBut the below repository shows its not ready for GA. So I wonder from where do the above docker image gets the source file.\r\n\r\nhttp://jdk.java.net/17/\r\n","title":"OpenJDK 17 Alpine Image","body":"<p>I am looking for an openjdk 17 docker image based on alpine.\nIt looks like we have got one here</p>\n<p><a href=\"https://hub.docker.com/layers/openjdk/library/openjdk/17-alpine/images/sha256-a996cdcc040704ec6badaf5fecf1e144c096e00231a29188596c784bcf858d05?context=explore\" rel=\"noreferrer\">https://hub.docker.com/layers/openjdk/library/openjdk/17-alpine/images/sha256-a996cdcc040704ec6badaf5fecf1e144c096e00231a29188596c784bcf858d05?context=explore</a></p>\n<p>But the below repository shows its not ready for GA. So I wonder from where do the above docker image gets the source file.</p>\n<p><a href=\"http://jdk.java.net/17/\" rel=\"noreferrer\">http://jdk.java.net/17/</a></p>\n"},{"tags":["java","deployment","bpmn","camunda"],"comments":[{"owner":{"account_id":3820593,"reputation":699,"user_id":3168783,"display_name":"Sebastian Menski"},"score":1,"creation_date":1466772712,"post_id":38013430,"comment_id":63470015,"body_markdown":"Is your process marked as executable? Check the Executable checkbox in the modeler or the isExecutable attribute of the process element in the BPMN XML. If so is there any log output of the engine during deployment?","body":"Is your process marked as executable? Check the Executable checkbox in the modeler or the isExecutable attribute of the process element in the BPMN XML. If so is there any log output of the engine during deployment?"},{"owner":{"account_id":50383,"reputation":2186,"user_id":150295,"accept_rate":50,"display_name":"Lista"},"score":0,"creation_date":1466775734,"post_id":38013430,"comment_id":63471867,"body_markdown":"Can you check your database and see if the process is there?","body":"Can you check your database and see if the process is there?"},{"owner":{"account_id":3724603,"reputation":8203,"user_id":3098783,"accept_rate":67,"display_name":"Jankapunkt"},"score":0,"creation_date":1466775774,"post_id":38013430,"comment_id":63471894,"body_markdown":"It works now. I do use the bpmn.io javascript modeler where isExecutable is of course false by default so I had to implement an option to set this flag first. Now it runs fine!","body":"It works now. I do use the bpmn.io javascript modeler where isExecutable is of course false by default so I had to implement an option to set this flag first. Now it runs fine!"},{"owner":{"account_id":3724603,"reputation":8203,"user_id":3098783,"accept_rate":67,"display_name":"Jankapunkt"},"score":0,"creation_date":1466775819,"post_id":38013430,"comment_id":63471931,"body_markdown":"@Lista after setting the executable flag it is also listed in the Db.","body":"@Lista after setting the executable flag it is also listed in the Db."}],"owner":{"account_id":3724603,"reputation":8203,"user_id":3098783,"accept_rate":67,"display_name":"Jankapunkt"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1608,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691845975,"creation_date":1466771178,"question_id":38013430,"body_markdown":"I have a Camunda 7.3 standalone h2-in-mem configuration which I want to integrate into my own application. When I create a deployment based on a (valid) bpmn xml String, I get no process definition in return:\r\n\r\n    public String deployProcess(WorkflowDef workflowDef) throws IOException, SQLException {\r\n    \t//prepare resources\r\n\t\tString name = workflowDef.getTitle()+&quot;.bpmn&quot;;\r\n\t\tInputStream stream = new ByteArrayInputStream(workflowDef.getBpmnXml().getBytes(Charset.defaultCharset()));\r\n\t\t\r\n\t\t//prepare deployment\r\n\t\tRepositoryService repositoryService = processEngine.getRepositoryService();\r\n\t\tfinal DeploymentBuilder deploymentBuilder = repositoryService.createDeployment();\r\n\t\tdeploymentBuilder.name(workflowDef.getId());\r\n\t\tDeploymentEntity deploymentResult;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tdeploymentResult = (DeploymentEntity) repositoryService.createDeployment().addInputStream(name, stream).deploy();\r\n\t\t} finally {\r\n\t\t\tstream.close();\r\n\t\t}\r\n\t\t\r\n\t\t//read the result\r\n\t\tString deploymentId = deploymentResult.getId();\r\n\t\tProcessDefinition processDef = repositoryService.createProcessDefinitionQuery().deploymentId(deploymentId).singleResult();\r\n\t\t\r\n\t\t//return the process definition id for later query\r\n\t\tString processDefinitionId = processDef.getId();\r\n\t\treturn processDefinitionId;\r\n\t}\r\n\r\n*Note:* The object workflowDef is just a wrapper, which contains definitions from the bpmn.io modeler, like name and the bpmn XML as String. I also make sure, that engine and db are initialized and running. \r\n\r\nAfter deploying, I get a NullPointerException at the line\r\n\r\n    String processDefinitionId = processDef.getId();\r\n\r\nEven when I try to get the definition via \r\n\r\n    repositoryService.createProcessDefinitionQuery().list();\r\n\r\nI just receive an empty list. Is there a misconception in my code?\r\n","title":"Camunda ProcessDefinition not available after deployment","body":"<p>I have a Camunda 7.3 standalone h2-in-mem configuration which I want to integrate into my own application. When I create a deployment based on a (valid) bpmn xml String, I get no process definition in return:</p>\n\n<pre><code>public String deployProcess(WorkflowDef workflowDef) throws IOException, SQLException {\n    //prepare resources\n    String name = workflowDef.getTitle()+\".bpmn\";\n    InputStream stream = new ByteArrayInputStream(workflowDef.getBpmnXml().getBytes(Charset.defaultCharset()));\n\n    //prepare deployment\n    RepositoryService repositoryService = processEngine.getRepositoryService();\n    final DeploymentBuilder deploymentBuilder = repositoryService.createDeployment();\n    deploymentBuilder.name(workflowDef.getId());\n    DeploymentEntity deploymentResult;\n\n    try {\n        deploymentResult = (DeploymentEntity) repositoryService.createDeployment().addInputStream(name, stream).deploy();\n    } finally {\n        stream.close();\n    }\n\n    //read the result\n    String deploymentId = deploymentResult.getId();\n    ProcessDefinition processDef = repositoryService.createProcessDefinitionQuery().deploymentId(deploymentId).singleResult();\n\n    //return the process definition id for later query\n    String processDefinitionId = processDef.getId();\n    return processDefinitionId;\n}\n</code></pre>\n\n<p><em>Note:</em> The object workflowDef is just a wrapper, which contains definitions from the bpmn.io modeler, like name and the bpmn XML as String. I also make sure, that engine and db are initialized and running. </p>\n\n<p>After deploying, I get a NullPointerException at the line</p>\n\n<pre><code>String processDefinitionId = processDef.getId();\n</code></pre>\n\n<p>Even when I try to get the definition via </p>\n\n<pre><code>repositoryService.createProcessDefinitionQuery().list();\n</code></pre>\n\n<p>I just receive an empty list. Is there a misconception in my code?</p>\n"},{"tags":["java","graalvm","graalvm-native-image"],"answers":[{"tags":[],"owner":{"account_id":19005277,"reputation":1,"user_id":13872166,"display_name":"user13872166"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593969565,"creation_date":1593969565,"answer_id":62743984,"question_id":60228053,"body_markdown":"I am not sure if it could help you at all. That class is very similar to &#39;CustomBuffer&#39;. Try to add this configuration to your reflection.json and test if it works.\r\n\r\n```\r\n{\r\n  &quot;name&quot; : &quot;org.lwjgl.PointerBuffer&quot;,\r\n  &quot;fields&quot;:[\r\n\t{&quot;name&quot;:&quot;capacity&quot;, &quot;allowUnsafeAccess&quot;:true}, \r\n\t{&quot;name&quot;:&quot;container&quot;, &quot;allowUnsafeAccess&quot;:true}, \r\n\t{&quot;name&quot;:&quot;limit&quot;, &quot;allowUnsafeAccess&quot;:true}, \r\n\t{&quot;name&quot;:&quot;mark&quot;, &quot;allowUnsafeAccess&quot;:true}, \r\n\t{&quot;name&quot;:&quot;position&quot;, &quot;allowUnsafeAccess&quot;:true}\r\n  ]\r\n}\r\n```\r\n\r\nI test it in my code and it works. I hope it helps you.","title":"Registering a class for instantiating via Unsafe.allocateInstance in graalvm native image","body":"<p>I am not sure if it could help you at all. That class is very similar to 'CustomBuffer'. Try to add this configuration to your reflection.json and test if it works.</p>\n<pre><code>{\n  &quot;name&quot; : &quot;org.lwjgl.PointerBuffer&quot;,\n  &quot;fields&quot;:[\n    {&quot;name&quot;:&quot;capacity&quot;, &quot;allowUnsafeAccess&quot;:true}, \n    {&quot;name&quot;:&quot;container&quot;, &quot;allowUnsafeAccess&quot;:true}, \n    {&quot;name&quot;:&quot;limit&quot;, &quot;allowUnsafeAccess&quot;:true}, \n    {&quot;name&quot;:&quot;mark&quot;, &quot;allowUnsafeAccess&quot;:true}, \n    {&quot;name&quot;:&quot;position&quot;, &quot;allowUnsafeAccess&quot;:true}\n  ]\n}\n</code></pre>\n<p>I test it in my code and it works. I hope it helps you.</p>\n"},{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691845955,"creation_date":1691845955,"answer_id":76889434,"question_id":60228053,"body_markdown":"There is `&quot;unsafeAllocated&quot;: true` which you can set in `reflect-config.json`:\r\n&gt; Allows objects of this class to be allocated using `Unsafe.allocateInstance`\r\n\r\nThis was added by [this pull request](https://github.com/oracle/graal/pull/4393) and according to the Git tag seems to be available since GraalVM 22.1, though the documentation only seems to [mention it since version 22.2](https://www.graalvm.org/22.2/reference-manual/native-image/metadata/#specifying-reflection-metadata-in-json).","title":"Registering a class for instantiating via Unsafe.allocateInstance in graalvm native image","body":"<p>There is <code>&quot;unsafeAllocated&quot;: true</code> which you can set in <code>reflect-config.json</code>:</p>\n<blockquote>\n<p>Allows objects of this class to be allocated using <code>Unsafe.allocateInstance</code></p>\n</blockquote>\n<p>This was added by <a href=\"https://github.com/oracle/graal/pull/4393\" rel=\"nofollow noreferrer\">this pull request</a> and according to the Git tag seems to be available since GraalVM 22.1, though the documentation only seems to <a href=\"https://www.graalvm.org/22.2/reference-manual/native-image/metadata/#specifying-reflection-metadata-in-json\" rel=\"nofollow noreferrer\">mention it since version 22.2</a>.</p>\n"}],"owner":{"account_id":2966688,"reputation":233,"user_id":2519698,"display_name":"zakgof"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":934,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691845955,"creation_date":1581689727,"question_id":60228053,"body_markdown":"Graalvm native image of my application fails in runtime on the following method call:\r\n\r\n    Unsafe.allocateInstance(org.lwjgl.PointerBuffer.class);\r\n\r\nwith the exception:\r\n\r\n    java.lang.IllegalArgumentException: Class org.lwjgl.PointerBuffer is instantiated reflectively but was never registered. Register the class by using org.graalvm.nativeimage.hosted.RuntimeReflection\r\n        at com.oracle.svm.core.graal.snippets.SubstrateAllocationSnippets.hubErrorStub(SubstrateAllocationSnippets.java:246)\r\n\r\nBefore generating the native image, I launched the application with `native-image-agent` and it generated the graalvm configuration jsons, but `reflect-config.json` had no entry for `org.lwjgl.PointerBuffer`.\r\n\r\nEven if I add manually to `reflect-config.json`\r\n\r\n    {\r\n      &quot;name&quot;:&quot;org.lwjgl.PointerBuffer&quot;,\r\n      &quot;allDeclaredFields&quot;:true,\r\n      &quot;allPublicConstructors&quot; : true\r\n      &quot;allPublicFields&quot;: true,\r\n      &quot;allDeclaredMethods&quot;: true,\r\n      &quot;allPublicMethods&quot;: true\r\n    }\r\n\r\nthe native image still fails with the above-mentioned exception. Is there a way to make `Unsafe.allocateInstance` work in a native image?\r\n","title":"Registering a class for instantiating via Unsafe.allocateInstance in graalvm native image","body":"<p>Graalvm native image of my application fails in runtime on the following method call:</p>\n\n<pre><code>Unsafe.allocateInstance(org.lwjgl.PointerBuffer.class);\n</code></pre>\n\n<p>with the exception:</p>\n\n<pre><code>java.lang.IllegalArgumentException: Class org.lwjgl.PointerBuffer is instantiated reflectively but was never registered. Register the class by using org.graalvm.nativeimage.hosted.RuntimeReflection\n    at com.oracle.svm.core.graal.snippets.SubstrateAllocationSnippets.hubErrorStub(SubstrateAllocationSnippets.java:246)\n</code></pre>\n\n<p>Before generating the native image, I launched the application with <code>native-image-agent</code> and it generated the graalvm configuration jsons, but <code>reflect-config.json</code> had no entry for <code>org.lwjgl.PointerBuffer</code>.</p>\n\n<p>Even if I add manually to <code>reflect-config.json</code></p>\n\n<pre><code>{\n  \"name\":\"org.lwjgl.PointerBuffer\",\n  \"allDeclaredFields\":true,\n  \"allPublicConstructors\" : true\n  \"allPublicFields\": true,\n  \"allDeclaredMethods\": true,\n  \"allPublicMethods\": true\n}\n</code></pre>\n\n<p>the native image still fails with the above-mentioned exception. Is there a way to make <code>Unsafe.allocateInstance</code> work in a native image?</p>\n"},{"tags":["java","hibernate","jpa","caching"],"owner":{"account_id":392230,"reputation":6617,"user_id":753377,"accept_rate":68,"display_name":"Thor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691845623,"creation_date":1691840068,"question_id":76889080,"body_markdown":"At the moment I&#39;m updating some `@org.hibernate.annotations.Cache(usage=CacheConcurrencyStrategy.READ_WRITE)` annotations with the JPA equivalent `@javax.persistence.Cacheable`. This works well on `@Entity` level, but cannot be done for `@OneToMany` relationships.\r\n\r\nMy question is similar to https://stackoverflow.com/questions/14365297/can-we-use-jpa2-annotations-to-cache-associations but I think it&#39;s appropriate to ask again after 10 years while it was self-answered with &quot;*there is no replacement for the hibernate annotation*&quot; such a long time ago.\r\n\r\n**Now my question**: Are there replacements in the `javax.persistence` or `jakarta.persistence` packages for `@org.hibernate.annotations.Cache`?\r\n\r\n```\r\n@Entity\r\n@javax.persistence.Cacheable\r\npublic class Tutor\r\n{\r\n   @org.hibernate.annotations.Cache  &lt;---- REPLACE this with JPA\r\n   @OneToMany(mappedBy=&quot;tutor&quot;)\r\n   private Set&lt;Student&gt; students;\r\n}\r\n\r\n@Entity\r\n@javax.persistence.Cacheable\r\npublic class Student\r\n{\r\n   @ManyToOne(fetch=FetchType.LAZY)\r\n   @JoinColumn(name=&quot;TUTOR_FK&quot;)\r\n   private Tutor tutor;\r\n}\r\n```\r\n\r\nBTW: If someone is reading this question in the context of performance improvements, I recommend these articles\r\n\r\n- https://stackoverflow.com/questions/3663979/how-to-use-jpa2s-cacheable-instead-of-hibernates-cache\r\n - https://www.baeldung.com/hibernate-second-level-cache\r\n - https://vladmihalcea.com/the-best-way-to-map-a-onetomany-association-with-jpa-and-hibernate/\r\n - https://thorben-janssen.com/best-practices-many-one-one-many-associations-mappings/","title":"Replacement of Hibernate @Cache with JPA for @OneToMany relationships","body":"<p>At the moment I'm updating some <code>@org.hibernate.annotations.Cache(usage=CacheConcurrencyStrategy.READ_WRITE)</code> annotations with the JPA equivalent <code>@javax.persistence.Cacheable</code>. This works well on <code>@Entity</code> level, but cannot be done for <code>@OneToMany</code> relationships.</p>\n<p>My question is similar to <a href=\"https://stackoverflow.com/questions/14365297/can-we-use-jpa2-annotations-to-cache-associations\">Can we use JPA2 annotations to cache associations?</a> but I think it's appropriate to ask again after 10 years while it was self-answered with &quot;<em>there is no replacement for the hibernate annotation</em>&quot; such a long time ago.</p>\n<p><strong>Now my question</strong>: Are there replacements in the <code>javax.persistence</code> or <code>jakarta.persistence</code> packages for <code>@org.hibernate.annotations.Cache</code>?</p>\n<pre><code>@Entity\n@javax.persistence.Cacheable\npublic class Tutor\n{\n   @org.hibernate.annotations.Cache  &lt;---- REPLACE this with JPA\n   @OneToMany(mappedBy=&quot;tutor&quot;)\n   private Set&lt;Student&gt; students;\n}\n\n@Entity\n@javax.persistence.Cacheable\npublic class Student\n{\n   @ManyToOne(fetch=FetchType.LAZY)\n   @JoinColumn(name=&quot;TUTOR_FK&quot;)\n   private Tutor tutor;\n}\n</code></pre>\n<p>BTW: If someone is reading this question in the context of performance improvements, I recommend these articles</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3663979/how-to-use-jpa2s-cacheable-instead-of-hibernates-cache\">How to use JPA2&#39;s @Cacheable instead of Hibernate&#39;s @Cache</a></li>\n<li><a href=\"https://www.baeldung.com/hibernate-second-level-cache\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-second-level-cache</a></li>\n<li><a href=\"https://vladmihalcea.com/the-best-way-to-map-a-onetomany-association-with-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/the-best-way-to-map-a-onetomany-association-with-jpa-and-hibernate/</a></li>\n<li><a href=\"https://thorben-janssen.com/best-practices-many-one-one-many-associations-mappings/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/best-practices-many-one-one-many-associations-mappings/</a></li>\n</ul>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"owner":{"account_id":2029453,"reputation":1,"user_id":1813588,"display_name":"Sanchit Shukla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691844620,"creation_date":1691073831,"question_id":76829183,"body_markdown":"We are trying to implement kafka retry using application.yaml configuration which is working as expected. However it&#39;s blocking queue implementation any way we can implement it using non blocking retry topic using application yaml configurations only.  \r\n\r\nWe have tried to implement it using application yaml config which is working in blocking queue.\r\n\r\n    handleTestEvent-in-0:\r\n              group: test-topic-group\r\n              destination: ${TEST_EVENT_TOPIC}\r\n             consumer:\r\n               maxAttempts: 5\r\n               backOffInitialInterval: 60000\r\n               backOffMaxInterval: 1000000\r\n               backOffMultiplier: 2.0\r\n               defaultRetryable: false\r\n               retryable-exceptions:\r\n                 java.lang.RuntimeException: true","title":"Non Blocking retry implementing using kafka stream","body":"<p>We are trying to implement kafka retry using application.yaml configuration which is working as expected. However it's blocking queue implementation any way we can implement it using non blocking retry topic using application yaml configurations only.</p>\n<p>We have tried to implement it using application yaml config which is working in blocking queue.</p>\n<pre><code>handleTestEvent-in-0:\n          group: test-topic-group\n          destination: ${TEST_EVENT_TOPIC}\n         consumer:\n           maxAttempts: 5\n           backOffInitialInterval: 60000\n           backOffMaxInterval: 1000000\n           backOffMultiplier: 2.0\n           defaultRetryable: false\n           retryable-exceptions:\n             java.lang.RuntimeException: true\n</code></pre>\n"},{"tags":["java","spring-boot","junit","spring-data-jpa","h2"],"comments":[{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1691845660,"post_id":76889250,"comment_id":135548291,"body_markdown":"Can you try loading it explicitely such as:\n\n@TestPropertySource(\n  locations = &quot;classpath:application-localtest.properties&quot;)","body":"Can you try loading it explicitely such as:  @TestPropertySource(   locations = &quot;classpath:application-localtest.properties&quot;)"},{"owner":{"account_id":16152922,"reputation":365,"user_id":11660873,"display_name":"Jeet"},"score":0,"creation_date":1691847619,"post_id":76889250,"comment_id":135548480,"body_markdown":"dataSource bean is not found even after adding  @TestPropertySource( locations = &quot;classpath:application-localtest.properties&quot;)","body":"dataSource bean is not found even after adding  @TestPropertySource( locations = &quot;classpath:application-localtest.properties&quot;)"}],"owner":{"account_id":16152922,"reputation":365,"user_id":11660873,"display_name":"Jeet"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691844527,"creation_date":1691843174,"question_id":76889250,"body_markdown":"I have 2 application.properties in a Springboot project. One for the test(application) and the other for the application.\r\n\r\nI dont understand the log here which is eventually throwing an error of not able to create the bean of the DB2 datasource. The idea is to create the bean of the H2 datasource while running the tests. However, the error shows that the error is due to the creation of the DB2 datasource bean. I have defined application-localtest.properties to establish the H2 database connection but from the log it seems that the bean for H2 datasource is not created. I think the application.properties file is overriding the application.localtest.properties file. In the log provided below it first states that activated &quot;localtest&quot; profile and then it states &quot;localtest&quot; won&#39;t apply and then the error is thrown.\r\n\r\n&gt; 2023-08-12 13:42:29.263  INFO 9516 --- [           main] d.k.d.v.a.BatchTest             : Starting VTZReportBatchTest using Java 11.0.14.1 on VM2300094 with PID 9516 (started by xx in xx\\AppServer-xxx)\r\n&gt; 2023-08-12 13:42:29.265 DEBUG 9516 --- [           main] d.k.d.v.a.BatchTest             : Running with Spring Boot v2.7.9, Spring v5.3.25\r\n&gt; 2023-08-12 13:42:29.267  INFO 9516 --- [           main] d.k.d.v.a.BatchTest             : The following 1 profile is active: &quot;localtest&quot;\r\n&gt; 2023-08-12 13:42:29.269 DEBUG 9516 --- [           main] o.s.b.SpringApplication                  : Loading source class xxx.xxxx.Batch,class xxx.xxx.config.H2Test\r\n&gt; 2023-08-12 13:42:29.354 DEBUG 9516 --- [           main] b.c.c.ConfigDataEnvironmentPostProcessor : Switching to legacy config file processing [[ConfigurationProperty@4a55a6e8 name = spring.config.use-legacy-processing, value = &#39;true&#39;, origin = class path resource [application-localtest.properties] - 2:37]]\r\n&gt; 2023-08-12 13:42:29.354 DEBUG 9516 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Activated activeProfiles localtest\r\n&gt; 2023-08-12 13:42:29.354 DEBUG 9516 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Loaded config file &#39;file:xxx/AppServer-xxx/target/classes/application.properties&#39; (classpath:/application.properties)\r\n&gt; 2023-08-12 13:42:29.355 DEBUG 9516 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Profiles already activated, &#39;[localtest]&#39; will not be applied\r\n&gt; 2023-08-12 13:42:29.355 DEBUG 9516 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Loaded config file &#39;file:xxx/AppServer-xxx/target/test-classes/application-localtest.properties&#39; (classpath:/application-localtest.properties) for profile localtest\r\n&gt; 2023-08-12 13:42:30.953  INFO 9516 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n&gt; 2023-08-12 13:42:31.144  INFO 9516 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 164 ms. Found 1 JPA repository interfaces.\r\n&gt; 2023-08-12 13:42:32.500  WARN 9516 --- [           main] s.c.a.AnnotationConfigApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;getDB2Source&#39; defined in class path resource [xxxx/xx/DatasourceConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method &#39;getDB2Source&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.\r\n&gt; 2023-08-12 13:42:32.535 DEBUG 9516 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\n\r\nMy Test configuration class (H2Test) is as follows -\r\n\r\n\r\n```\r\n@TestConfiguration\r\n@ActiveProfiles(&quot;localtest&quot;)\r\npublic class H2Test {\r\n\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    @Value(&quot;org.h2.Driver&quot;)\r\n    private String dbUrl;\r\n\r\n    @Value(&quot;jdbc:h2:mem:test&quot;)\r\n    private String dbDriverClass;\r\n    @Value(&quot;sa&quot;)\r\n    private String dbUser;\r\n\r\n    @Primary\r\n    @Bean(name=&quot;datasource&quot;)\r\n    @Profile(&quot;localtest&quot;)\r\n    @ConditionalOnMissingBean\r\n    public DataSource getH2DataSource() throws Exception{\r\n\r\n        System.out.println(&quot;___ DataSource construction started ___&quot;);\r\n\r\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(dbDriverClass);\r\n        dataSource.setUrl(dbUrl);\r\n        dataSource.setUsername(dbUser);\r\n        dataSource.setPassword(&quot;&quot;);\r\n\r\n        ResourceDatabasePopulator rdp = new ResourceDatabasePopulator();\r\n        rdp.setScripts(new ClassPathResource(&quot;/test/data/Create_Tables.sql&quot;));\r\n\r\n        rdp.execute(dataSource);\r\n        return dataSource;\r\n\r\n    }\r\n```\r\n\r\nThe test class is as follows -\r\n\r\n\r\n```\r\n@SpringBootTest(\r\n        classes = { Batch.class}\r\n)\r\n@AutoConfiguration\r\n@ContextConfiguration(\r\n        classes = {H2Test.class}\r\n)\r\n@ActiveProfiles(&quot;localtest&quot;)\r\npublic class BatchTest{\r\n  \r\n    String[] args={&quot;xx&quot;, &quot;xx&quot;,&quot;x&quot;,&quot;xxx&quot;,&quot;xxx&quot;};\r\n\r\n    @Test\r\n    public void testMain() throws IOException{\r\n\r\n\r\n          Batch batch =new Batch();\r\n         Assertions.assertDoesNotThrow(()-&gt;Batch.main(args));\r\n\r\n    }\r\n}\r\n```\r\nI want to run the test by calling the main method of the application in the Batch.class and intend to create the bean of the H2 datasource with the application-localtest.properties while running the test. Batch. class is the class that contains the main method and the corresponding BatchTest.class provided above.\r\n\r\n\r\n","title":"How to resolve the configuration problem with 2 application.properties in Springboot?","body":"<p>I have 2 application.properties in a Springboot project. One for the test(application) and the other for the application.</p>\n<p>I dont understand the log here which is eventually throwing an error of not able to create the bean of the DB2 datasource. The idea is to create the bean of the H2 datasource while running the tests. However, the error shows that the error is due to the creation of the DB2 datasource bean. I have defined application-localtest.properties to establish the H2 database connection but from the log it seems that the bean for H2 datasource is not created. I think the application.properties file is overriding the application.localtest.properties file. In the log provided below it first states that activated &quot;localtest&quot; profile and then it states &quot;localtest&quot; won't apply and then the error is thrown.</p>\n<blockquote>\n<p>2023-08-12 13:42:29.263  INFO 9516 --- [           main] d.k.d.v.a.BatchTest             : Starting VTZReportBatchTest using Java 11.0.14.1 on VM2300094 with PID 9516 (started by xx in xx\\AppServer-xxx)\n2023-08-12 13:42:29.265 DEBUG 9516 --- [           main] d.k.d.v.a.BatchTest             : Running with Spring Boot v2.7.9, Spring v5.3.25\n2023-08-12 13:42:29.267  INFO 9516 --- [           main] d.k.d.v.a.BatchTest             : The following 1 profile is active: &quot;localtest&quot;\n2023-08-12 13:42:29.269 DEBUG 9516 --- [           main] o.s.b.SpringApplication                  : Loading source class xxx.xxxx.Batch,class xxx.xxx.config.H2Test\n2023-08-12 13:42:29.354 DEBUG 9516 --- [           main] b.c.c.ConfigDataEnvironmentPostProcessor : Switching to legacy config file processing [[ConfigurationProperty@4a55a6e8 name = spring.config.use-legacy-processing, value = 'true', origin = class path resource [application-localtest.properties] - 2:37]]\n2023-08-12 13:42:29.354 DEBUG 9516 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Activated activeProfiles localtest\n2023-08-12 13:42:29.354 DEBUG 9516 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Loaded config file 'file:xxx/AppServer-xxx/target/classes/application.properties' (classpath:/application.properties)\n2023-08-12 13:42:29.355 DEBUG 9516 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Profiles already activated, '[localtest]' will not be applied\n2023-08-12 13:42:29.355 DEBUG 9516 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Loaded config file 'file:xxx/AppServer-xxx/target/test-classes/application-localtest.properties' (classpath:/application-localtest.properties) for profile localtest\n2023-08-12 13:42:30.953  INFO 9516 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-08-12 13:42:31.144  INFO 9516 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 164 ms. Found 1 JPA repository interfaces.\n2023-08-12 13:42:32.500  WARN 9516 --- [           main] s.c.a.AnnotationConfigApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'getDB2Source' defined in class path resource [xxxx/xx/DatasourceConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'getDB2Source' threw exception; nested exception is java.lang.IllegalArgumentException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.\n2023-08-12 13:42:32.535 DEBUG 9516 --- [           main] ConditionEvaluationReportLoggingListener :</p>\n</blockquote>\n<p>My Test configuration class (H2Test) is as follows -</p>\n<pre><code>@TestConfiguration\n@ActiveProfiles(&quot;localtest&quot;)\npublic class H2Test {\n\n    @Autowired\n    private Environment env;\n\n    @Value(&quot;org.h2.Driver&quot;)\n    private String dbUrl;\n\n    @Value(&quot;jdbc:h2:mem:test&quot;)\n    private String dbDriverClass;\n    @Value(&quot;sa&quot;)\n    private String dbUser;\n\n    @Primary\n    @Bean(name=&quot;datasource&quot;)\n    @Profile(&quot;localtest&quot;)\n    @ConditionalOnMissingBean\n    public DataSource getH2DataSource() throws Exception{\n\n        System.out.println(&quot;___ DataSource construction started ___&quot;);\n\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(dbDriverClass);\n        dataSource.setUrl(dbUrl);\n        dataSource.setUsername(dbUser);\n        dataSource.setPassword(&quot;&quot;);\n\n        ResourceDatabasePopulator rdp = new ResourceDatabasePopulator();\n        rdp.setScripts(new ClassPathResource(&quot;/test/data/Create_Tables.sql&quot;));\n\n        rdp.execute(dataSource);\n        return dataSource;\n\n    }\n</code></pre>\n<p>The test class is as follows -</p>\n<pre><code>@SpringBootTest(\n        classes = { Batch.class}\n)\n@AutoConfiguration\n@ContextConfiguration(\n        classes = {H2Test.class}\n)\n@ActiveProfiles(&quot;localtest&quot;)\npublic class BatchTest{\n  \n    String[] args={&quot;xx&quot;, &quot;xx&quot;,&quot;x&quot;,&quot;xxx&quot;,&quot;xxx&quot;};\n\n    @Test\n    public void testMain() throws IOException{\n\n\n          Batch batch =new Batch();\n         Assertions.assertDoesNotThrow(()-&gt;Batch.main(args));\n\n    }\n}\n</code></pre>\n<p>I want to run the test by calling the main method of the application in the Batch.class and intend to create the bean of the H2 datasource with the application-localtest.properties while running the test. Batch. class is the class that contains the main method and the corresponding BatchTest.class provided above.</p>\n"},{"tags":["java","spring-boot","logging","logback","elk"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1592002164,"post_id":62353123,"comment_id":110278155,"body_markdown":"Are you having difficulty in managing logs that are the collected output of multiple requests, or the output of a single request that&#39;s mixed up?","body":"Are you having difficulty in managing logs that are the collected output of multiple requests, or the output of a single request that&#39;s mixed up?"},{"owner":{"account_id":5330792,"reputation":787,"user_id":4251391,"display_name":"august0490"},"score":0,"creation_date":1592093588,"post_id":62353123,"comment_id":110301301,"body_markdown":"I having difficulty to order the logs from one Springboot instance when I inspect them in Kibana.","body":"I having difficulty to order the logs from one Springboot instance when I inspect them in Kibana."}],"answers":[{"tags":[],"owner":{"account_id":13339832,"reputation":199,"user_id":9628409,"display_name":"Gaurao Burghate"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592014733,"creation_date":1592014733,"answer_id":62354785,"question_id":62353123,"body_markdown":"You can use custom log pattern. Please follow below link. \r\nhttps://reflectoring.io/logging-format-logback/","title":"Is it possible to add a sequential number to each log event using Logback?","body":"<p>You can use custom log pattern. Please follow below link. \n<a href=\"https://reflectoring.io/logging-format-logback/\" rel=\"nofollow noreferrer\">https://reflectoring.io/logging-format-logback/</a></p>\n"},{"tags":[],"owner":{"account_id":29211726,"reputation":1,"user_id":22379550,"display_name":"mark ws"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691844480,"creation_date":1691844124,"answer_id":76889317,"question_id":62353123,"body_markdown":"```xml\r\n&lt;configuration&gt;\r\n    &lt;sequenceNumberGenerator class=&quot;ch.qos.logback.core.spi.BasicSequenceNumberGenerator&quot;/&gt;\r\n\r\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%sequenceNumber---%msg%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;debug&quot;&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nPS:\r\nLogback supports a sequence number field which is automatically populated at event creation. This field is fed by a sequence number generator attached to the logging context.\r\n\r\nvisit  https://logback.qos.ch/manual/configuration.html\r\n","title":"Is it possible to add a sequential number to each log event using Logback?","body":"<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n    &lt;sequenceNumberGenerator class=&quot;ch.qos.logback.core.spi.BasicSequenceNumberGenerator&quot;/&gt;\n\n    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;%sequenceNumber---%msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;root level=&quot;debug&quot;&gt;\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>PS:\nLogback supports a sequence number field which is automatically populated at event creation. This field is fed by a sequence number generator attached to the logging context.</p>\n<p>visit  <a href=\"https://logback.qos.ch/manual/configuration.html\" rel=\"nofollow noreferrer\">https://logback.qos.ch/manual/configuration.html</a></p>\n"}],"owner":{"account_id":5330792,"reputation":787,"user_id":4251391,"display_name":"august0490"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":518,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691844480,"creation_date":1591999542,"question_id":62353123,"body_markdown":"I have an ELK mounted and my app send logs use Logback. The problem is that I loose the events order when there are many logs with the same timestamp (many fast events in the same millisecond).\r\n\r\nI would like to add a sequential number to keep the log events order when there is many logs at the same time. Is that possible? How?\r\n\r\nThank you and sorry for my English.\r\n\r\n-----\r\nEDIT:\r\n\r\nSorry, I give more information about the scenario: I&#39;m using a Springboot application which sends the logs to an ELK (Elastic-Logstash-Kibana) stack.\r\n\r\nI need to add a field with the sequence number so then I&#39;ll be able to order the logs in Kibana using that field. Currently Kibana is ordering the logs by timestamp field but sometimes there is too many logs at the same time. The logs at the same time are unordered.","title":"Is it possible to add a sequential number to each log event using Logback?","body":"<p>I have an ELK mounted and my app send logs use Logback. The problem is that I loose the events order when there are many logs with the same timestamp (many fast events in the same millisecond).</p>\n<p>I would like to add a sequential number to keep the log events order when there is many logs at the same time. Is that possible? How?</p>\n<p>Thank you and sorry for my English.</p>\n<hr />\n<p>EDIT:</p>\n<p>Sorry, I give more information about the scenario: I'm using a Springboot application which sends the logs to an ELK (Elastic-Logstash-Kibana) stack.</p>\n<p>I need to add a field with the sequence number so then I'll be able to order the logs in Kibana using that field. Currently Kibana is ordering the logs by timestamp field but sometimes there is too many logs at the same time. The logs at the same time are unordered.</p>\n"},{"tags":["java","hive","classloader","java-9","urlclassloader"],"comments":[{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":1,"creation_date":1514451525,"post_id":47897645,"comment_id":82977033,"body_markdown":"Is there a newer version of Hive? MaxPermSize has been obsolete since JDK 8. The ClassCastException is Hive making an assumption that the system class loader is a URLClassLoader (this changed in JDK 9, see release notes here: http://www.oracle.com/technetwork/java/javase/9-relnote-issues-3704069.html#JDK-8142968).","body":"Is there a newer version of Hive? MaxPermSize has been obsolete since JDK 8. The ClassCastException is Hive making an assumption that the system class loader is a URLClassLoader (this changed in JDK 9, see release notes here: <a href=\"http://www.oracle.com/technetwork/java/javase/9-relnote-issues-3704069.html#JDK-8142968\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/javase/&hellip;</a>)."},{"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"score":1,"creation_date":1515005547,"post_id":47897645,"comment_id":83141488,"body_markdown":"As mentioned in the OP I updated to pointing to `JDK8` to avoid the `JDK9` issues that you mention.","body":"As mentioned in the OP I updated to pointing to <code>JDK8</code> to avoid the <code>JDK9</code> issues that you mention."}],"answers":[{"tags":[],"owner":{"account_id":9602323,"reputation":11,"user_id":7129388,"display_name":"player six"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514962411,"creation_date":1514961567,"answer_id":48072411,"question_id":47897645,"body_markdown":"I have the same problem, I just remove JDK 9 instead of change the environment, and problem is solved.\r\n\r\nSee hive, it uses\r\n\r\n    JAVA_HOME=&quot;$(/usr/libexec/java_home --version 1.7+)&quot; \r\n    HIVE_HOME=&quot;/usr/local/Cellar/hive/2.3.1/libexec&quot; \r\n    exec &quot;/usr/local/Cellar/hive/2.3.1/libexec/bin/hive&quot; &quot;$@&quot;.\r\n","title":"Hive: AppClassLoader cannot be cast to URLClassLoader although using JDK8","body":"<p>I have the same problem, I just remove JDK 9 instead of change the environment, and problem is solved.</p>\n\n<p>See hive, it uses</p>\n\n<pre><code>JAVA_HOME=\"$(/usr/libexec/java_home --version 1.7+)\" \nHIVE_HOME=\"/usr/local/Cellar/hive/2.3.1/libexec\" \nexec \"/usr/local/Cellar/hive/2.3.1/libexec/bin/hive\" \"$@\".\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10753883,"reputation":1,"user_id":7912372,"display_name":"Deepak Rajwani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568408451,"creation_date":1568408451,"answer_id":57930292,"question_id":47897645,"body_markdown":"I was facing same error while setting up hive, initially I thought of it could be because of different java versions. \r\n\r\nBut on checking java version, it was jdk 1.8.\r\n\r\nFinally on checking jdk installed directory (/Library/Java/JavaVirtualMachine), I found jdk 1.8 and jdk 10 both were present\r\n\r\nI removed jdk 10, and finally it worked.","title":"Hive: AppClassLoader cannot be cast to URLClassLoader although using JDK8","body":"<p>I was facing same error while setting up hive, initially I thought of it could be because of different java versions. </p>\n\n<p>But on checking java version, it was jdk 1.8.</p>\n\n<p>Finally on checking jdk installed directory (/Library/Java/JavaVirtualMachine), I found jdk 1.8 and jdk 10 both were present</p>\n\n<p>I removed jdk 10, and finally it worked.</p>\n"},{"tags":[],"owner":{"account_id":15812164,"reputation":49,"user_id":11408874,"display_name":"Legend-IDK"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1579294123,"creation_date":1579294123,"answer_id":59794667,"question_id":47897645,"body_markdown":"Install jdk8 and change the path accordingly in hadoop-env.sh, which did the trick for me.","title":"Hive: AppClassLoader cannot be cast to URLClassLoader although using JDK8","body":"<p>Install jdk8 and change the path accordingly in hadoop-env.sh, which did the trick for me.</p>\n"},{"tags":[],"owner":{"account_id":28881381,"reputation":61,"user_id":22120795,"display_name":"Mathew Mani"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691844222,"creation_date":1691844222,"answer_id":76889324,"question_id":47897645,"body_markdown":"I was trying to install hive in ubuntu and ran into the same issue. Installed hadoop 3.3.6 and hive 3.1.3. I had both java 11 and java 8 installed side by side. I tried changing the JAVA_HOME in the shell but it did not work. The solution was to change the JAVA_HOME in hadoop_env.sh from java11 to java8, as Legend-IDK mentioned above. Now hive is working in my ubuntu laptop.","title":"Hive: AppClassLoader cannot be cast to URLClassLoader although using JDK8","body":"<p>I was trying to install hive in ubuntu and ran into the same issue. Installed hadoop 3.3.6 and hive 3.1.3. I had both java 11 and java 8 installed side by side. I tried changing the JAVA_HOME in the shell but it did not work. The solution was to change the JAVA_HOME in hadoop_env.sh from java11 to java8, as Legend-IDK mentioned above. Now hive is working in my ubuntu laptop.</p>\n"}],"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13252,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":4,"score":11,"last_activity_date":1691844222,"creation_date":1513734016,"question_id":47897645,"body_markdown":"After installing `jdk9` I have been seeing this problem:\r\n\r\n    $hive\r\n    Java HotSpot(TM) 64-Bit Server VM warning: Ignoring option MaxPermSize; support was removed in 8.0\r\n    SLF4J: Class path contains multiple SLF4J bindings.\r\n    SLF4J: Found binding in [jar:file:/usr/local/Cellar/hive/2.3.1/libexec/lib/log4j-slf4j-impl-2.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\n    SLF4J: Found binding in [jar:file:/usr/local/Cellar/hadoop/2.8.1/libexec/share/hadoop/common/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\n    SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\n    SLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\r\n    Exception in thread &quot;main&quot; java.lang.ClassCastException: java.base/jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to java.base/java.net.URLClassLoader\r\n    \tat org.apache.hadoop.hive.ql.session.SessionState.&lt;init&gt;(SessionState.java:394)\r\n    \tat org.apache.hadoop.hive.ql.session.SessionState.&lt;init&gt;(SessionState.java:370)\r\n    \tat org.apache.hadoop.hive.cli.CliSessionState.&lt;init&gt;(CliSessionState.java:60)\r\n    \tat org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:708)\r\n    \tat org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:686)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n    \tat org.apache.hadoop.util.RunJar.run(RunJar.java:234)\r\n    \tat org.apache.hadoop.util.RunJar.main(RunJar.java:148)\r\n\r\nBut I have \r\n\r\n*Updated `$PATH` to point to java8*\r\n\r\n    $java -version\r\n    java version &quot;1.8.0_144&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_144-b01)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\r\n\r\n*Updated `hive` executable to specify java8*\r\n\r\n    vi $(which hive)\r\n\r\n    #!/bin/bash\r\n    JAVA_HOME=&quot;$(/usr/libexec/java_home --version 1.8)&quot; HIVE_HOME=&quot;/usr/local/Cellar/hive/2.3.1/libexec&quot; exec &quot;/usr/local/Cellar/hive/2.3.1/libexec/bin/hive&quot; &quot;$@&quot;\r\n\r\n*Verified the updated java version does point to jdk8*\r\n\r\n    $/usr/libexec/java_home --version 1.8\r\n    /Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home\r\n\r\nWhat else should I be looking into here?\r\n\r\nThis is `hive 2.3.1` on `macos`\r\n\r\n     $hive --version\r\n    Hive 2.3.1\r\n    Git git://jcamachorodriguez-rMBP.local/Users/jcamachorodriguez/src/workspaces/hive/HIVE-apache/hive -r 7590572d9265e15286628013268b2ce785c6aa08\r\n    Compiled by jcamachorodriguez on Thu Oct 19 18:37:58 PDT 2017\r\n    From source with checksum 03c91029a6103bd91f25a6ff8a01fbcd\r\n\r\n\r\n","title":"Hive: AppClassLoader cannot be cast to URLClassLoader although using JDK8","body":"<p>After installing <code>jdk9</code> I have been seeing this problem:</p>\n\n<pre><code>$hive\nJava HotSpot(TM) 64-Bit Server VM warning: Ignoring option MaxPermSize; support was removed in 8.0\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/usr/local/Cellar/hive/2.3.1/libexec/lib/log4j-slf4j-impl-2.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/usr/local/Cellar/hadoop/2.8.1/libexec/share/hadoop/common/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]\nException in thread \"main\" java.lang.ClassCastException: java.base/jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to java.base/java.net.URLClassLoader\n    at org.apache.hadoop.hive.ql.session.SessionState.&lt;init&gt;(SessionState.java:394)\n    at org.apache.hadoop.hive.ql.session.SessionState.&lt;init&gt;(SessionState.java:370)\n    at org.apache.hadoop.hive.cli.CliSessionState.&lt;init&gt;(CliSessionState.java:60)\n    at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:708)\n    at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:686)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at org.apache.hadoop.util.RunJar.run(RunJar.java:234)\n    at org.apache.hadoop.util.RunJar.main(RunJar.java:148)\n</code></pre>\n\n<p>But I have </p>\n\n<p><em>Updated <code>$PATH</code> to point to java8</em></p>\n\n<pre><code>$java -version\njava version \"1.8.0_144\"\nJava(TM) SE Runtime Environment (build 1.8.0_144-b01)\nJava HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\n</code></pre>\n\n<p><em>Updated <code>hive</code> executable to specify java8</em></p>\n\n<pre><code>vi $(which hive)\n\n#!/bin/bash\nJAVA_HOME=\"$(/usr/libexec/java_home --version 1.8)\" HIVE_HOME=\"/usr/local/Cellar/hive/2.3.1/libexec\" exec \"/usr/local/Cellar/hive/2.3.1/libexec/bin/hive\" \"$@\"\n</code></pre>\n\n<p><em>Verified the updated java version does point to jdk8</em></p>\n\n<pre><code>$/usr/libexec/java_home --version 1.8\n/Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home\n</code></pre>\n\n<p>What else should I be looking into here?</p>\n\n<p>This is <code>hive 2.3.1</code> on <code>macos</code></p>\n\n<pre><code> $hive --version\nHive 2.3.1\nGit git://jcamachorodriguez-rMBP.local/Users/jcamachorodriguez/src/workspaces/hive/HIVE-apache/hive -r 7590572d9265e15286628013268b2ce785c6aa08\nCompiled by jcamachorodriguez on Thu Oct 19 18:37:58 PDT 2017\nFrom source with checksum 03c91029a6103bd91f25a6ff8a01fbcd\n</code></pre>\n"},{"tags":["java","eclipse","windows-10","64-bit"],"comments":[{"owner":{"account_id":1326560,"reputation":2671,"user_id":1271255,"display_name":"minus"},"score":0,"creation_date":1497126990,"post_id":44477763,"comment_id":75950826,"body_markdown":"You are using a 32bit VM, and 64bit eclipse, It won&#39;t work. You should either install a 64bit jvm or a 32bit eclipse.","body":"You are using a 32bit VM, and 64bit eclipse, It won&#39;t work. You should either install a 64bit jvm or a 32bit eclipse."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1497127031,"post_id":44477763,"comment_id":75950838,"body_markdown":"`-vm` must be on a separate line from the javaw path, and they must come **before** the -vmargs line. It looks like you may have a 32 bit Java and a 64 bit Eclipse. They must both be 64 bit or both be 32 bit.","body":"<code>-vm</code> must be on a separate line from the javaw path, and they must come <b>before</b> the -vmargs line. It looks like you may have a 32 bit Java and a 64 bit Eclipse. They must both be 64 bit or both be 32 bit."},{"owner":{"account_id":1208583,"reputation":41,"user_id":1177576,"accept_rate":0,"display_name":"yama"},"score":0,"creation_date":1497224816,"post_id":44477763,"comment_id":75973565,"body_markdown":"Thank you for your info!\nThis works now","body":"Thank you for your info! This works now"},{"owner":{"account_id":1529698,"reputation":553,"user_id":1427210,"display_name":"Bolesław Denk"},"score":0,"creation_date":1528701967,"post_id":44477763,"comment_id":88590717,"body_markdown":"Side note: had the same problem but in my case I had duplicted -vm at the end of file.","body":"Side note: had the same problem but in my case I had duplicted -vm at the end of file."}],"answers":[{"tags":[],"owner":{"account_id":10926536,"reputation":11,"user_id":8031099,"display_name":"Sachintha Weesinghe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528979339,"creation_date":1528960497,"answer_id":50851648,"question_id":44477763,"body_markdown":"Try updating your JDK to 8u171 or higher.\r\nI had the same issue with eclipse oxygen. This is worked for me.\r\n\r\nHere&#39;s the URL for downloading the latest Java 8 JDK:\r\nhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html  \r\nIf that should stop working, go to http://java.oracle.com and click &quot;Java SE&quot; under top downloads.","title":"Launch error: could not create the Java virtual machine. A fatal exception has occurred","body":"<p>Try updating your JDK to 8u171 or higher.\nI had the same issue with eclipse oxygen. This is worked for me.</p>\n\n<p>Here's the URL for downloading the latest Java 8 JDK:\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a><br>\nIf that should stop working, go to <a href=\"http://java.oracle.com\" rel=\"nofollow noreferrer\">http://java.oracle.com</a> and click \"Java SE\" under top downloads.</p>\n"},{"tags":[],"owner":{"account_id":19215510,"reputation":21,"user_id":14040338,"display_name":"The_real_codder"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1617798034,"creation_date":1617798034,"answer_id":66985950,"question_id":44477763,"body_markdown":"try to use java 8, it solve my problem when i degraded my jdk from 15 to 8, here is the link\r\n\r\n[JAVA][1]\r\n\r\n\r\n  [1]: https://enos.itcollege.ee/~jpoial/allalaadimised/jdk8/","title":"Launch error: could not create the Java virtual machine. A fatal exception has occurred","body":"<p>try to use java 8, it solve my problem when i degraded my jdk from 15 to 8, here is the link</p>\n<p><a href=\"https://enos.itcollege.ee/%7Ejpoial/allalaadimised/jdk8/\" rel=\"nofollow noreferrer\">JAVA</a></p>\n"}],"owner":{"account_id":1208583,"reputation":41,"user_id":1177576,"accept_rate":0,"display_name":"yama"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9589,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691842015,"creation_date":1497126541,"question_id":44477763,"body_markdown":"Below is my Eclipse.ini\r\n\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.3.201.v20161025-1711.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.401.v20161122-1740\r\n    -product\r\n    org.eclipse.epp.package.java.product\r\n    --launcher.defaultAction\r\n    openFile\r\n    -showsplash\r\n    org.eclipse.platform\r\n    --launcher.defaultAction\r\n    openFile\r\n    --launcher.appendVmargs\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.8\r\n    -XX:+UseG1GC\r\n    -XX:+UseStringDeduplication\r\n    -Dosgi.requiredJavaVersion=1.8\r\n    -Xms256m\r\n    -Xmx1024m\r\n    -vm C:\\Program Files (x86)\\Java\\jre1.8.0_111\\bin\\javaw.exe\r\n\r\nI did add the path for javaw.exe looking at some posts. But this addition just gave me a new error\r\n\r\n1. How to fix this in my computer?\r\n\r\n2. If someone can explain me on this launch config stuff in Eclipse?","title":"Launch error: could not create the Java virtual machine. A fatal exception has occurred","body":"<p>Below is my Eclipse.ini</p>\n\n<pre><code>-startup\nplugins/org.eclipse.equinox.launcher_1.3.201.v20161025-1711.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.401.v20161122-1740\n-product\norg.eclipse.epp.package.java.product\n--launcher.defaultAction\nopenFile\n-showsplash\norg.eclipse.platform\n--launcher.defaultAction\nopenFile\n--launcher.appendVmargs\n-vmargs\n-Dosgi.requiredJavaVersion=1.8\n-XX:+UseG1GC\n-XX:+UseStringDeduplication\n-Dosgi.requiredJavaVersion=1.8\n-Xms256m\n-Xmx1024m\n-vm C:\\Program Files (x86)\\Java\\jre1.8.0_111\\bin\\javaw.exe\n</code></pre>\n\n<p>I did add the path for javaw.exe looking at some posts. But this addition just gave me a new error</p>\n\n<ol>\n<li><p>How to fix this in my computer?</p></li>\n<li><p>If someone can explain me on this launch config stuff in Eclipse?</p></li>\n</ol>\n"},{"tags":["java","spring","jpa","spring-annotations"],"owner":{"account_id":29180693,"reputation":1,"user_id":22354956,"display_name":"Max"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691840356,"creation_date":1691840356,"question_id":76889095,"body_markdown":"In order to avoid the use of an if statement when I want to check if a given String is an ENUM constant, I implemented EnumValidator:\r\n\r\n```@Documented\r\n@Constraint(validatedBy = EnumHelper.class)\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.FIELD)\r\n@NotNull\r\npublic @interface EnumValidator {\r\n\r\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\r\n\r\n    String message() default &quot;Is not in enum&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n}\r\n```\r\n\r\nAnd EnumHelpe which implements ConstraintValidator&lt;EnumValidator, String&gt;: \r\n\r\n```\r\n    @Override\r\n    public void initialize(EnumValidator constraintAnnotation) {\r\n        values = Stream.of(constraintAnnotation.enumClass().getEnumConstants())\r\n                .map(Enum::toString)\r\n                .collect(Collectors.toSet());\r\n        values.addAll(Stream.of(constraintAnnotation.enumClass().getEnumConstants())\r\n                .map(Enum::name)\r\n                .collect(Collectors.toSet()));\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(String value, ConstraintValidatorContext context) {\r\n        return value == null || values.contains(value);\r\n\r\n    }\r\n\r\n```\r\n\r\nThen I added the Annotation to the Entity:\r\n```  @EnumValidator(enumClass = DegreeEnum.class,message = &quot;{degree.EnumValidator.message}&quot;)\r\n  private String degree;\r\n```\r\n\r\nAnd it basically works unless I do not provide this attribute, which means null is not a valid value, even though I set it in isValid() method.\r\n\r\nAlso, the Message from ExceptionHandler is very poor and only saying &quot;Could not commit JPA transaction&quot;. This also occurs when a value is given that is not valid, so the Validation has no conclusive Error message.\r\n\r\nSeems like going back to if statements with a simple isInEnum(String string) method works much better even though it takes some more lines of code.\r\n\r\nI have checked out many solutions. One was to remove the attribute from the entity, inherit entity to sub class and create the attribute there where NULL value was not a valid option. Like this, I also had proper error messages. \r\n\r\nBut that solution is not good. \r\n\r\nIt should be working because &quot;isValid()&quot; returns true when I do not set the field.\r\n\r\nI actually came to a better solution. It is very easy compared to my other approaches:\r\n```  @Nullable\r\n  @Enumerated(EnumType.STRING)\r\n  private DegreeEnum degree;\r\n```\r\n\r\nOnly disadvantage: I cannot use the Enum extension attribute anymore, so I can only check for the Uppercase Enum Constants (which is the .name() method) and not for customized String values and Override toString() method.\r\n\r\nI would be happy to make my Custom Validator work as it should. Any ideas?","title":"EnumValidator - Could not commit JPA transcation - Not accepting NULL values - Custom Annotation","body":"<p>In order to avoid the use of an if statement when I want to check if a given String is an ENUM constant, I implemented EnumValidator:</p>\n<pre><code>@Constraint(validatedBy = EnumHelper.class)\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\n@NotNull\npublic @interface EnumValidator {\n\n    Class&lt;? extends Enum&lt;?&gt;&gt; enumClass();\n\n    String message() default &quot;Is not in enum&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n}\n</code></pre>\n<p>And EnumHelpe which implements ConstraintValidator&lt;EnumValidator, String&gt;:</p>\n<pre><code>    @Override\n    public void initialize(EnumValidator constraintAnnotation) {\n        values = Stream.of(constraintAnnotation.enumClass().getEnumConstants())\n                .map(Enum::toString)\n                .collect(Collectors.toSet());\n        values.addAll(Stream.of(constraintAnnotation.enumClass().getEnumConstants())\n                .map(Enum::name)\n                .collect(Collectors.toSet()));\n    }\n\n    @Override\n    public boolean isValid(String value, ConstraintValidatorContext context) {\n        return value == null || values.contains(value);\n\n    }\n\n</code></pre>\n<p>Then I added the Annotation to the Entity:</p>\n<pre><code>  private String degree;\n</code></pre>\n<p>And it basically works unless I do not provide this attribute, which means null is not a valid value, even though I set it in isValid() method.</p>\n<p>Also, the Message from ExceptionHandler is very poor and only saying &quot;Could not commit JPA transaction&quot;. This also occurs when a value is given that is not valid, so the Validation has no conclusive Error message.</p>\n<p>Seems like going back to if statements with a simple isInEnum(String string) method works much better even though it takes some more lines of code.</p>\n<p>I have checked out many solutions. One was to remove the attribute from the entity, inherit entity to sub class and create the attribute there where NULL value was not a valid option. Like this, I also had proper error messages.</p>\n<p>But that solution is not good.</p>\n<p>It should be working because &quot;isValid()&quot; returns true when I do not set the field.</p>\n<p>I actually came to a better solution. It is very easy compared to my other approaches:</p>\n<pre><code>  @Enumerated(EnumType.STRING)\n  private DegreeEnum degree;\n</code></pre>\n<p>Only disadvantage: I cannot use the Enum extension attribute anymore, so I can only check for the Uppercase Enum Constants (which is the .name() method) and not for customized String values and Override toString() method.</p>\n<p>I would be happy to make my Custom Validator work as it should. Any ideas?</p>\n"},{"tags":["java","arraylist","queue"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1691842056,"post_id":76889063,"comment_id":135547931,"body_markdown":"*I&#39;m trying to recreate queue using ArrayList* **Why?** [`ArrayDeque`](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayDeque.html) is built-in. Note: [*The name deque is short for &quot;double ended queue&quot; and is usually pronounced &quot;deck&quot;.*](https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html).","body":"<i>I&#39;m trying to recreate queue using ArrayList</i> <b>Why?</b> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/ArrayDeque.html\" rel=\"nofollow noreferrer\"><code>ArrayDeque</code></a> is built-in. Note: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Deque.html\" rel=\"nofollow noreferrer\"><i>The name deque is short for &quot;double ended queue&quot; and is usually pronounced &quot;deck&quot;.</i></a>."},{"owner":{"account_id":28145098,"reputation":1,"user_id":21507533,"display_name":"JxDev"},"score":0,"creation_date":1691845510,"post_id":76889063,"comment_id":135548270,"body_markdown":"I have an assignment that is testing my understanding of queues so we are not allowed to use the built in queue function. We have to build it our own.","body":"I have an assignment that is testing my understanding of queues so we are not allowed to use the built in queue function. We have to build it our own."}],"owner":{"account_id":28145098,"reputation":1,"user_id":21507533,"display_name":"JxDev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691840191,"creation_date":1691839697,"question_id":76889063,"body_markdown":"I&#39;m giving a sample .txt file. In this file, the first 2 integers in the first line is the amount of Primary Servers and Secondary Servers there are working at a fast food restaurant. For the rest of the line, 1st integer is customer arrival time, 2nd integer is time primary server takes to serve, 3rd integer is time secondary server takes to serve. (In this case primary servers can be seen as counter server and secondary server can be seen as cook).\r\n\r\n\r\n3\t2\t\r\n\r\n3\t2\t7\r\n\r\n4\t11\t2\r\n\r\n7\t14\t7\r\n\r\n12\t3\t18\r\n\r\n14\t8\t2\r\n\r\n\r\nI have created classes for Server, Queue and Customer.\r\n\r\nI have pasted the main logic of my code here:\r\n```\r\n           for (int i = 0; i &lt; primaryServers.size(); i++) {\r\n                Server primaryServer = primaryServers.get(i);\r\n\r\n                if (!primaryServer.isBusy() &amp;&amp; !priQueue.qIsEmpty()) {\r\n                    Customer customer = priQueue.dequeue();\r\n                    primaryServer.startService(customer.getPriQueueTime());\r\n                    primaryServer.incrementQueueCount();\r\n                    primaryServer.updateTotalServiceTime(customer.getPriQueueTime());\r\n                    secQueue.enqueue(customer);\r\n                }\r\n\r\n                primaryServer.decreaseServiceTime();\r\n\r\n                if (!primaryServer.isBusy()) {\r\n                    primaryServer.incrementIdleTime();\r\n                }\r\n            }\r\n\r\n\r\n            for (int i = 0; i &lt; secondaryServers.size(); i++) {\r\n                Server secondaryServer = secondaryServers.get(i);\r\n\r\n                if (!secondaryServer.isBusy() &amp;&amp; !secQueue.qIsEmpty()) {\r\n                    Customer customer = secQueue.dequeue();\r\n                    secondaryServer.startService(customer.getSecQueueTime());\r\n                    secondaryServer.incrementQueueCount();\r\n                    secondaryServer.updateTotalServiceTime(customer.getSecQueueTime());\r\n                }\r\n\r\n                secondaryServer.decreaseServiceTime();\r\n                servedCustomers++;\r\n\r\n                if (!secondaryServer.isBusy()) {\r\n                    secondaryServer.incrementIdleTime();\r\n                }\r\n            }\r\n\r\n            currentTime++;\r\n\r\n        }\r\n```\r\n\r\nThis is the code for the output:\r\n\r\n\r\n```\r\n System.out.println(&quot;--- Server Data ---&quot;);\r\n\r\n        for(int i = 0; i &lt; primaryServers.size(); i++) {\r\n            System.out.printf(&quot;%-15s&quot;, &quot;P&quot; + (i + 1));\r\n        }\r\n        System.out.println(&quot;&quot;);\r\n        for (Server p : primaryServers) {\r\n\r\n            System.out.printf(&quot;%-15d&quot;, p.getTotalServiceTime());\r\n\r\n        }\r\n        System.out.println(&quot;Serve Time (in minutes.)&quot;);\r\n        for (Server p : primaryServers) {\r\n\r\n            System.out.printf(&quot;%-15d&quot;, p.getIdleTime());\r\n\r\n        }\r\n\r\n        System.out.println(&quot;Idle Time (in minutes.)\\n&quot;);\r\n        for(int i = 0; i &lt; secondaryServers.size(); i++) {\r\n            System.out.printf(&quot;%-15s&quot;, &quot;S&quot; + (i + 1));\r\n        }\r\n        System.out.println(&quot;&quot;);\r\n        for (Server s : secondaryServers) {\r\n\r\n            System.out.printf(&quot;%-15d&quot;, s.getTotalServiceTime());\r\n\r\n        }\r\n        System.out.println(&quot;Serve Time (in minutes.)&quot;);\r\n        for (Server s : secondaryServers) {\r\n\r\n            System.out.printf(&quot;%-15d&quot;, s.getIdleTime());\r\n\r\n        }\r\n        System.out.println(&quot;Idle Time (in minutes.)\\n&quot;);\r\n```\r\n\r\nThis is the result I get.\r\n--- Server Data ---\r\nP1             P2             P3\r\n0              0              0              Serve Time (in minutes.)\r\n3              3              3              Idle Time (in minutes.)\r\n\r\nS1             S2\r\n0              0              Serve Time (in minutes.)\r\n3              3              Idle Time (in minutes.)\r\n\r\nI&#39;m not sure why the data is not being passed into the queue even though I wrote the enqueue and dequeue myself\r\n\r\n\r\n```\r\n    public void enqueue(Customer customer) {\r\n        customerQueueList.add(customer);\r\n            customerInQueue++;\r\n            totalCountCustomers++;\r\n\r\n    }\r\n\r\n    public Customer dequeue() {\r\n        if (!customerQueueList.isEmpty()) {\r\n            customerInQueue--;\r\n            return customerQueueList.remove(0); // Remove and return the first customer\r\n        }\r\n        return null;\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n\r\nInitially I was using an enhanced for-loop to loop through the primary servers and secondary servers to enqueue and dequeue them. I thought it might be unsure who was busy and who is not so I changed it to a normal for-loop for them to loop through every server but nothing I&#39;ve tried worked.","title":"I&#39;m trying to recreate queue using ArrayList in java but am having troubles","body":"<p>I'm giving a sample .txt file. In this file, the first 2 integers in the first line is the amount of Primary Servers and Secondary Servers there are working at a fast food restaurant. For the rest of the line, 1st integer is customer arrival time, 2nd integer is time primary server takes to serve, 3rd integer is time secondary server takes to serve. (In this case primary servers can be seen as counter server and secondary server can be seen as cook).</p>\n<p>3   2</p>\n<p>3   2   7</p>\n<p>4   11  2</p>\n<p>7   14  7</p>\n<p>12  3   18</p>\n<p>14  8   2</p>\n<p>I have created classes for Server, Queue and Customer.</p>\n<p>I have pasted the main logic of my code here:</p>\n<pre><code>           for (int i = 0; i &lt; primaryServers.size(); i++) {\n                Server primaryServer = primaryServers.get(i);\n\n                if (!primaryServer.isBusy() &amp;&amp; !priQueue.qIsEmpty()) {\n                    Customer customer = priQueue.dequeue();\n                    primaryServer.startService(customer.getPriQueueTime());\n                    primaryServer.incrementQueueCount();\n                    primaryServer.updateTotalServiceTime(customer.getPriQueueTime());\n                    secQueue.enqueue(customer);\n                }\n\n                primaryServer.decreaseServiceTime();\n\n                if (!primaryServer.isBusy()) {\n                    primaryServer.incrementIdleTime();\n                }\n            }\n\n\n            for (int i = 0; i &lt; secondaryServers.size(); i++) {\n                Server secondaryServer = secondaryServers.get(i);\n\n                if (!secondaryServer.isBusy() &amp;&amp; !secQueue.qIsEmpty()) {\n                    Customer customer = secQueue.dequeue();\n                    secondaryServer.startService(customer.getSecQueueTime());\n                    secondaryServer.incrementQueueCount();\n                    secondaryServer.updateTotalServiceTime(customer.getSecQueueTime());\n                }\n\n                secondaryServer.decreaseServiceTime();\n                servedCustomers++;\n\n                if (!secondaryServer.isBusy()) {\n                    secondaryServer.incrementIdleTime();\n                }\n            }\n\n            currentTime++;\n\n        }\n</code></pre>\n<p>This is the code for the output:</p>\n<pre><code> System.out.println(&quot;--- Server Data ---&quot;);\n\n        for(int i = 0; i &lt; primaryServers.size(); i++) {\n            System.out.printf(&quot;%-15s&quot;, &quot;P&quot; + (i + 1));\n        }\n        System.out.println(&quot;&quot;);\n        for (Server p : primaryServers) {\n\n            System.out.printf(&quot;%-15d&quot;, p.getTotalServiceTime());\n\n        }\n        System.out.println(&quot;Serve Time (in minutes.)&quot;);\n        for (Server p : primaryServers) {\n\n            System.out.printf(&quot;%-15d&quot;, p.getIdleTime());\n\n        }\n\n        System.out.println(&quot;Idle Time (in minutes.)\\n&quot;);\n        for(int i = 0; i &lt; secondaryServers.size(); i++) {\n            System.out.printf(&quot;%-15s&quot;, &quot;S&quot; + (i + 1));\n        }\n        System.out.println(&quot;&quot;);\n        for (Server s : secondaryServers) {\n\n            System.out.printf(&quot;%-15d&quot;, s.getTotalServiceTime());\n\n        }\n        System.out.println(&quot;Serve Time (in minutes.)&quot;);\n        for (Server s : secondaryServers) {\n\n            System.out.printf(&quot;%-15d&quot;, s.getIdleTime());\n\n        }\n        System.out.println(&quot;Idle Time (in minutes.)\\n&quot;);\n</code></pre>\n<p>This is the result I get.\n--- Server Data ---\nP1             P2             P3\n0              0              0              Serve Time (in minutes.)\n3              3              3              Idle Time (in minutes.)</p>\n<p>S1             S2\n0              0              Serve Time (in minutes.)\n3              3              Idle Time (in minutes.)</p>\n<p>I'm not sure why the data is not being passed into the queue even though I wrote the enqueue and dequeue myself</p>\n<pre><code>    public void enqueue(Customer customer) {\n        customerQueueList.add(customer);\n            customerInQueue++;\n            totalCountCustomers++;\n\n    }\n\n    public Customer dequeue() {\n        if (!customerQueueList.isEmpty()) {\n            customerInQueue--;\n            return customerQueueList.remove(0); // Remove and return the first customer\n        }\n        return null;\n    }\n</code></pre>\n<p>Initially I was using an enhanced for-loop to loop through the primary servers and secondary servers to enqueue and dequeue them. I thought it might be unsure who was busy and who is not so I changed it to a normal for-loop for them to loop through every server but nothing I've tried worked.</p>\n"},{"tags":["java","android","canvas","view","drawing"],"comments":[{"owner":{"account_id":3409033,"reputation":712,"user_id":4566802,"accept_rate":67,"display_name":"totoaussi"},"score":0,"creation_date":1696446217,"post_id":76889050,"comment_id":136155492,"body_markdown":"The 2nd rectangle disappears because the 0, 0, 0, 0 in saveLayer parameters means your layer has no dimensions.","body":"The 2nd rectangle disappears because the 0, 0, 0, 0 in saveLayer parameters means your layer has no dimensions."}],"owner":{"account_id":23191109,"reputation":11,"user_id":17287471,"display_name":"kamal MKA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691839474,"creation_date":1691839474,"question_id":76889050,"body_markdown":"can any one explains to me in simple way what does `canvas.saveLayer()` exactly mean ? , I&#39;m beginner in android canvas.\r\n\r\n\r\nI tried the method in this code : \r\n```\r\n\r\ncanvas.drawRect(50,50,300,300,paint);\r\ncanvas.saveLayer(0,0,0,0,paint);\r\ncanvas.drawRect(250,250,400,400,paint);\r\n```\r\nThe second rectangle disappears and I don&#39;t know why\r\n","title":"Can&#39;t understand what saveLayer() do in canvas android","body":"<p>can any one explains to me in simple way what does <code>canvas.saveLayer()</code> exactly mean ? , I'm beginner in android canvas.</p>\n<p>I tried the method in this code :</p>\n<pre><code>\ncanvas.drawRect(50,50,300,300,paint);\ncanvas.saveLayer(0,0,0,0,paint);\ncanvas.drawRect(250,250,400,400,paint);\n</code></pre>\n<p>The second rectangle disappears and I don't know why</p>\n"},{"tags":["java","json","xml","spring-boot"],"comments":[{"owner":{"account_id":5236921,"reputation":1452,"user_id":4185221,"display_name":"Sunil Dabburi"},"score":0,"creation_date":1576863702,"post_id":59429211,"comment_id":105044620,"body_markdown":"I&#39;m sorry what is the `endpoint` you are talking about? You are not sure which API endpoint to call with JSON?","body":"I&#39;m sorry what is the <code>endpoint</code> you are talking about? You are not sure which API endpoint to call with JSON?"},{"owner":{"account_id":5236921,"reputation":1452,"user_id":4185221,"display_name":"Sunil Dabburi"},"score":0,"creation_date":1576864062,"post_id":59429211,"comment_id":105044731,"body_markdown":"I am assuming your code is outside the REST project, you should have `SOAP to REST` mapping to help you find the URL. One way to solve is to configure the `Gateway` to provide the REST URL as `header`.","body":"I am assuming your code is outside the REST project, you should have <code>SOAP to REST</code> mapping to help you find the URL. One way to solve is to configure the <code>Gateway</code> to provide the REST URL as <code>header</code>."},{"owner":{"account_id":5236921,"reputation":1452,"user_id":4185221,"display_name":"Sunil Dabburi"},"score":0,"creation_date":1576864664,"post_id":59429211,"comment_id":105044921,"body_markdown":"I am not sure what `Gateway` is used. Lot of gateways provide configurations for each endpoint that&#39;s added. We can ask it to add custom headers when a request is made on a URL that way when it adds REST url as a header, you can read it and use that route your call further. If your gateway is another app custom written, it should be modified to support this functionality I believe.","body":"I am not sure what <code>Gateway</code> is used. Lot of gateways provide configurations for each endpoint that&#39;s added. We can ask it to add custom headers when a request is made on a URL that way when it adds REST url as a header, you can read it and use that route your call further. If your gateway is another app custom written, it should be modified to support this functionality I believe."},{"owner":{"account_id":5236921,"reputation":1452,"user_id":4185221,"display_name":"Sunil Dabburi"},"score":0,"creation_date":1576864744,"post_id":59429211,"comment_id":105044956,"body_markdown":"If your gateway does not support it, another way is to configure your `adapter` application to contain those mappings. configure your environment to load the mappings on initial application loading and use them to identify the REST endpoint.","body":"If your gateway does not support it, another way is to configure your <code>adapter</code> application to contain those mappings. configure your environment to load the mappings on initial application loading and use them to identify the REST endpoint."},{"owner":{"account_id":5236921,"reputation":1452,"user_id":4185221,"display_name":"Sunil Dabburi"},"score":0,"creation_date":1576865067,"post_id":59429211,"comment_id":105045061,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/204623/discussion-between-sunil-dabburi-and-paa).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/204623/discussion-between-sunil-dabburi-and-paa\">continue this discussion in chat</a>."}],"answers":[{"tags":[],"owner":{"account_id":5236921,"reputation":1452,"user_id":4185221,"display_name":"Sunil Dabburi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576868489,"creation_date":1576867683,"answer_id":59430046,"question_id":59429211,"body_markdown":"If your Gateway supports passing custom header for every endpoint, that would be the ideal way to do this. In such a case, it will send the REST endpoint in the request header, you can use that to forwarding calls.\r\n\r\nIf Gateway does not support such functionality, you can try modifying your `Adapter` code.\r\n\r\nIf you want to configure your adapter to hold the endpoint mappings, you can configure it using `@ConfigurationProperties`\r\n\r\n`EndpointRegistry` class\r\n\r\n    import java.util.Map;\r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.boot.context.properties.EnableConfigurationProperties;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @EnableConfigurationProperties\r\n    @ConfigurationProperties(prefix = &quot;endpoint&quot;)\r\n    @Component\r\n    public class EndpointRegistry {\r\n    \r\n    \t// top key - endpoint\r\n    \t// one key - soapUrl\r\n    \t// another key - restUrl\r\n    \tprivate Map&lt;String, Map&lt;String, String&gt;&gt; api;\r\n    \r\n    \tpublic Map&lt;String, Map&lt;String, String&gt;&gt; getApi() {\r\n    \t\treturn api;\r\n    \t}\r\n    \r\n    \tpublic void setApi(Map&lt;String, Map&lt;String, String&gt;&gt; api) {\r\n    \t\tthis.api = api;\r\n    \t}\r\n    }\r\n\r\nThis will match the key pattern mentioned in your `application.properties` file as below\r\n\r\n    endpoint.api.endpoint1.soapUrl=&lt;soap-url&gt;\r\n    endpoint.api.endpoint1.restUrl=&lt;rest-url&gt;\r\n    \r\n    endpoint.api.endpoint2.soapUrl=&lt;soap-url&gt;\r\n    endpoint.api.endpoint2.restUrl=&lt;rest-url&gt;\r\n\r\nNow, `endpoint name` should be unique. You can decide on the key structure. This is just an example.\r\n\r\nHere is a test controller to verify the values:\r\n\r\n    import java.util.Map;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/endpoints&quot;)\r\n    public class EndpointController {\r\n    \r\n    \t@Autowired\r\n    \tEndpointRegistry registry;\r\n    \r\n    \t@GetMapping\r\n    \tpublic Map&lt;String, String&gt; getRestUrl(String endpoint) {\r\n    \t\treturn registry.getApi().get(endpoint);\r\n    \t}\r\n    }\r\n\r\nMake a `GET` call to `http://localhost:8080/endpoints?endpoint=endpoint1`\r\n\r\nYou should get\r\n\r\n    {\r\n       &quot;soapUrl&quot;:&quot;&lt;soap-url&gt;&quot;,\r\n       &quot;restUrl&quot;:&quot;&lt;rest-url&gt;&quot;\r\n    }\r\n\r\nThis way, you can use your `EndpointRegistry` to get the required URLs and make calls.\r\n\r\nYou can use the Spring Configuration server to update your application.properties for each environment. Check it here: https://cloud.spring.io/spring-cloud-config/multi/multi__spring_cloud_config_server.html\r\n\r\nMeanwhile, you can configure your CI pipeline to add these properties beforehand for each environment.","title":"Convert XML to JSON and Vice Versa and also how to identify REST endpoint while making XML Request?","body":"<p>If your Gateway supports passing custom header for every endpoint, that would be the ideal way to do this. In such a case, it will send the REST endpoint in the request header, you can use that to forwarding calls.</p>\n\n<p>If Gateway does not support such functionality, you can try modifying your <code>Adapter</code> code.</p>\n\n<p>If you want to configure your adapter to hold the endpoint mappings, you can configure it using <code>@ConfigurationProperties</code></p>\n\n<p><code>EndpointRegistry</code> class</p>\n\n<pre><code>import java.util.Map;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nimport org.springframework.stereotype.Component;\n\n@EnableConfigurationProperties\n@ConfigurationProperties(prefix = \"endpoint\")\n@Component\npublic class EndpointRegistry {\n\n    // top key - endpoint\n    // one key - soapUrl\n    // another key - restUrl\n    private Map&lt;String, Map&lt;String, String&gt;&gt; api;\n\n    public Map&lt;String, Map&lt;String, String&gt;&gt; getApi() {\n        return api;\n    }\n\n    public void setApi(Map&lt;String, Map&lt;String, String&gt;&gt; api) {\n        this.api = api;\n    }\n}\n</code></pre>\n\n<p>This will match the key pattern mentioned in your <code>application.properties</code> file as below</p>\n\n<pre><code>endpoint.api.endpoint1.soapUrl=&lt;soap-url&gt;\nendpoint.api.endpoint1.restUrl=&lt;rest-url&gt;\n\nendpoint.api.endpoint2.soapUrl=&lt;soap-url&gt;\nendpoint.api.endpoint2.restUrl=&lt;rest-url&gt;\n</code></pre>\n\n<p>Now, <code>endpoint name</code> should be unique. You can decide on the key structure. This is just an example.</p>\n\n<p>Here is a test controller to verify the values:</p>\n\n<pre><code>import java.util.Map;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/endpoints\")\npublic class EndpointController {\n\n    @Autowired\n    EndpointRegistry registry;\n\n    @GetMapping\n    public Map&lt;String, String&gt; getRestUrl(String endpoint) {\n        return registry.getApi().get(endpoint);\n    }\n}\n</code></pre>\n\n<p>Make a <code>GET</code> call to <code>http://localhost:8080/endpoints?endpoint=endpoint1</code></p>\n\n<p>You should get</p>\n\n<pre><code>{\n   \"soapUrl\":\"&lt;soap-url&gt;\",\n   \"restUrl\":\"&lt;rest-url&gt;\"\n}\n</code></pre>\n\n<p>This way, you can use your <code>EndpointRegistry</code> to get the required URLs and make calls.</p>\n\n<p>You can use the Spring Configuration server to update your application.properties for each environment. Check it here: <a href=\"https://cloud.spring.io/spring-cloud-config/multi/multi__spring_cloud_config_server.html\" rel=\"nofollow noreferrer\">https://cloud.spring.io/spring-cloud-config/multi/multi__spring_cloud_config_server.html</a></p>\n\n<p>Meanwhile, you can configure your CI pipeline to add these properties beforehand for each environment.</p>\n"},{"tags":[],"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1580372923,"creation_date":1580372288,"answer_id":59981603,"question_id":59429211,"body_markdown":"You may use the [underscore-java][1] library. It has static methods to read xml and generate json.\r\n\r\n        String xmlData = &quot;&lt;soapenv:Envelope xmlns:soapenv=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\&quot;&quot;\r\n        + &quot; xmlns:urn=\\&quot;urn:ahc.com:dms:wsdls:organization\\&quot;&gt;\\n&quot;\r\n        + &quot;   &lt;soapenv:Header/&gt;\\n&quot;\r\n        + &quot;   &lt;soapenv:Body&gt;\\n&quot;\r\n        + &quot;      &lt;urn:getRoles&gt;\\n&quot;\r\n        + &quot;         &lt;getRolesRequest&gt;\\n&quot;\r\n        + &quot;            &lt;Type&gt;ABC&lt;/Type&gt;\\n&quot;\r\n        + &quot;         &lt;/getRolesRequest&gt;\\n&quot;\r\n        + &quot;      &lt;/urn:getRoles&gt;\\n&quot;\r\n        + &quot;   &lt;/soapenv:Body&gt;\\n&quot;\r\n        + &quot;&lt;/soapenv:Envelope&gt;&quot;;\r\n        Map&lt;String, Object&gt; jsonData = U.&lt;Map&lt;String, Object&gt;&gt;get(\r\n            U.&lt;Map&lt;String, Object&gt;&gt;fromXmlWithoutNamespaces(xmlData), &quot;Envelope.Body.getRoles&quot;);\r\n        System.out.println(U.toJson(jsonData));\r\n\r\nOutput:\r\n\r\n    {\r\n      &quot;getRolesRequest&quot;: {\r\n        &quot;Type&quot;: &quot;ABC&quot;\r\n      }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/javadev/underscore-java","title":"Convert XML to JSON and Vice Versa and also how to identify REST endpoint while making XML Request?","body":"<p>You may use the <a href=\"https://github.com/javadev/underscore-java\" rel=\"nofollow noreferrer\">underscore-java</a> library. It has static methods to read xml and generate json.</p>\n\n<pre><code>    String xmlData = \"&lt;soapenv:Envelope xmlns:soapenv=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\"\"\n    + \" xmlns:urn=\\\"urn:ahc.com:dms:wsdls:organization\\\"&gt;\\n\"\n    + \"   &lt;soapenv:Header/&gt;\\n\"\n    + \"   &lt;soapenv:Body&gt;\\n\"\n    + \"      &lt;urn:getRoles&gt;\\n\"\n    + \"         &lt;getRolesRequest&gt;\\n\"\n    + \"            &lt;Type&gt;ABC&lt;/Type&gt;\\n\"\n    + \"         &lt;/getRolesRequest&gt;\\n\"\n    + \"      &lt;/urn:getRoles&gt;\\n\"\n    + \"   &lt;/soapenv:Body&gt;\\n\"\n    + \"&lt;/soapenv:Envelope&gt;\";\n    Map&lt;String, Object&gt; jsonData = U.&lt;Map&lt;String, Object&gt;&gt;get(\n        U.&lt;Map&lt;String, Object&gt;&gt;fromXmlWithoutNamespaces(xmlData), \"Envelope.Body.getRoles\");\n    System.out.println(U.toJson(jsonData));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n  \"getRolesRequest\": {\n    \"Type\": \"ABC\"\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":59981603,"answer_count":2,"score":0,"last_activity_date":1691839196,"creation_date":1576862862,"question_id":59429211,"body_markdown":"My company has exposed REST endpoint to external world through Proxy/Gateway. Around 1000 of customers are on-boarded to Proxy/Gateway and making XML request to SOAP based system (deployed on WebSphere App Server (WAS) V7.5).\r\n\r\nNow, we&#39;ve developed new system which only supports JSON and wanted to point to newly developed system which deployed on PCF (Pivotal Cloud Foundry).\r\n\r\nHere we don&#39;t want to ask Consumers to make any changes.\r\n\r\nNow, we&#39;re trying to developed Adapter (Spring Boot Project) which converts XML request to JSON make a request to new system and get response in JSON and again Adapter (Spring Boot Project) converts JSON to XML. Here, JSON response and XML response could be different at times.\r\n\r\nNow, I am really not able to make any decision which endpoint to call to\r\n\r\n    String xml_data = &quot;&lt;soapenv:Envelope xmlns:soapenv=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\&quot; xmlns:urn=\\&quot;urn:ahc.com:dms:wsdls:organization\\&quot;&gt;\\n&quot; + \r\n    \t\t&quot;   &lt;soapenv:Header/&gt;\\n&quot; + \r\n    \t\t&quot;   &lt;soapenv:Body&gt;\\n&quot; + \r\n    \t\t&quot;      &lt;urn:getRoles&gt;\\n&quot; + \r\n    \t\t&quot;         &lt;getRolesRequest&gt;\\n&quot; + \r\n    \t\t&quot;            &lt;Type&gt;ABC&lt;/Type&gt;\\n&quot; + \r\n    \t\t&quot;         &lt;/getRolesRequest&gt;\\n&quot; + \r\n    \t\t&quot;      &lt;/urn:getRoles&gt;\\n&quot; + \r\n    \t\t&quot;   &lt;/soapenv:Body&gt;\\n&quot; + \r\n    \t\t&quot;&lt;/soapenv:Envelope&gt;&quot;;\r\n    JSONObject obj = XML.toJSONObject(xml_data);\r\n    System.out.println(obj);\r\n\r\nIt gives me below response.\r\n\r\n    {&quot;soapenv:Envelope&quot;:{&quot;soapenv:Body&quot;:{&quot;urn:getRoles&quot;:{&quot;getRolesRequest&quot;:{&quot;Type&quot;:&quot;AYU&quot;}}},&quot;xmlns:soapenv&quot;:&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;,&quot;xmlns:urn&quot;:&quot;urn:ahc.com:dms:wsdls:organization&quot;,&quot;soapenv:Header&quot;:&quot;&quot;}}\r\n\r\nAny guidance ?\r\n\r\nNote: I want to remove `&lt;soapenv:Envelope xmlns:soapenv=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\` from JSON object. Also, while convering JSON to XML I want to add `&lt;soapenv:Envelope xmlns:soapenv=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\`","title":"Convert XML to JSON and Vice Versa and also how to identify REST endpoint while making XML Request?","body":"<p>My company has exposed REST endpoint to external world through Proxy/Gateway. Around 1000 of customers are on-boarded to Proxy/Gateway and making XML request to SOAP based system (deployed on WebSphere App Server (WAS) V7.5).</p>\n<p>Now, we've developed new system which only supports JSON and wanted to point to newly developed system which deployed on PCF (Pivotal Cloud Foundry).</p>\n<p>Here we don't want to ask Consumers to make any changes.</p>\n<p>Now, we're trying to developed Adapter (Spring Boot Project) which converts XML request to JSON make a request to new system and get response in JSON and again Adapter (Spring Boot Project) converts JSON to XML. Here, JSON response and XML response could be different at times.</p>\n<p>Now, I am really not able to make any decision which endpoint to call to</p>\n<pre><code>String xml_data = &quot;&lt;soapenv:Envelope xmlns:soapenv=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\&quot; xmlns:urn=\\&quot;urn:ahc.com:dms:wsdls:organization\\&quot;&gt;\\n&quot; + \n        &quot;   &lt;soapenv:Header/&gt;\\n&quot; + \n        &quot;   &lt;soapenv:Body&gt;\\n&quot; + \n        &quot;      &lt;urn:getRoles&gt;\\n&quot; + \n        &quot;         &lt;getRolesRequest&gt;\\n&quot; + \n        &quot;            &lt;Type&gt;ABC&lt;/Type&gt;\\n&quot; + \n        &quot;         &lt;/getRolesRequest&gt;\\n&quot; + \n        &quot;      &lt;/urn:getRoles&gt;\\n&quot; + \n        &quot;   &lt;/soapenv:Body&gt;\\n&quot; + \n        &quot;&lt;/soapenv:Envelope&gt;&quot;;\nJSONObject obj = XML.toJSONObject(xml_data);\nSystem.out.println(obj);\n</code></pre>\n<p>It gives me below response.</p>\n<pre><code>{&quot;soapenv:Envelope&quot;:{&quot;soapenv:Body&quot;:{&quot;urn:getRoles&quot;:{&quot;getRolesRequest&quot;:{&quot;Type&quot;:&quot;AYU&quot;}}},&quot;xmlns:soapenv&quot;:&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;,&quot;xmlns:urn&quot;:&quot;urn:ahc.com:dms:wsdls:organization&quot;,&quot;soapenv:Header&quot;:&quot;&quot;}}\n</code></pre>\n<p>Any guidance ?</p>\n<p>Note: I want to remove <code>&lt;soapenv:Envelope xmlns:soapenv=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\</code> from JSON object. Also, while convering JSON to XML I want to add <code>&lt;soapenv:Envelope xmlns:soapenv=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\</code></p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":10835632,"reputation":541,"user_id":7968718,"display_name":"Daksharaj kamal"},"score":0,"creation_date":1669801543,"post_id":74625572,"comment_id":131723589,"body_markdown":"Can you provide some details related to your Pojo","body":"Can you provide some details related to your Pojo"},{"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"score":0,"creation_date":1669801660,"post_id":74625572,"comment_id":131723629,"body_markdown":"@Daksharajkamal added some details but the question is more on how pagination can be handled when multiple specifications are linked. You can use whatever pojo you think of.","body":"@Daksharajkamal added some details but the question is more on how pagination can be handled when multiple specifications are linked. You can use whatever pojo you think of."},{"owner":{"account_id":10835632,"reputation":541,"user_id":7968718,"display_name":"Daksharaj kamal"},"score":0,"creation_date":1669801729,"post_id":74625572,"comment_id":131723645,"body_markdown":"You can use Criteria API for handling pagination and multiple specifications","body":"You can use Criteria API for handling pagination and multiple specifications"},{"owner":{"account_id":1947573,"reputation":6810,"user_id":1752366,"accept_rate":54,"display_name":"silentsudo"},"score":0,"creation_date":1669802300,"post_id":74625572,"comment_id":131723844,"body_markdown":"can you share what data you have and what actually output you want to achieve?","body":"can you share what data you have and what actually output you want to achieve?"}],"answers":[{"tags":[],"owner":{"account_id":1100909,"reputation":412,"user_id":1093333,"accept_rate":90,"display_name":"Jayesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669801978,"creation_date":1669801978,"answer_id":74625746,"question_id":74625572,"body_markdown":"Have you tried [JpaRepository][1] or [ListPagingAndSortingRepository][2] or [PagingAndSortingRepository][3] as they allow pagination and creating methods like `findAllByType(...)` may solve your problem.\r\nAndd for combining results, you can use HQL type query to write a single query or create 2 queries to DB and put them in a single list/set before you return as result.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\r\n  [2]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/ListPagingAndSortingRepository.html\r\n  [3]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/PagingAndSortingRepository.html","title":"Combining JPA specification with pagination","body":"<p>Have you tried <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\" rel=\"nofollow noreferrer\">JpaRepository</a> or <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/ListPagingAndSortingRepository.html\" rel=\"nofollow noreferrer\">ListPagingAndSortingRepository</a> or <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/PagingAndSortingRepository.html\" rel=\"nofollow noreferrer\">PagingAndSortingRepository</a> as they allow pagination and creating methods like <code>findAllByType(...)</code> may solve your problem.\nAndd for combining results, you can use HQL type query to write a single query or create 2 queries to DB and put them in a single list/set before you return as result.</p>\n"},{"tags":[],"owner":{"account_id":10835632,"reputation":541,"user_id":7968718,"display_name":"Daksharaj kamal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669803108,"creation_date":1669803108,"answer_id":74625999,"question_id":74625572,"body_markdown":"You can handle Pagination with multiple specifications by using Criteria API.\r\nExample:\r\n\r\n    DetachedCriteria detachedCriteria = DetachedCriteria.forClass(EmployeeEntity.class, &quot;employee&quot;);\r\n\r\nNow suppose you want to filter Employee by EmployeeType which is some different entity:\r\n\r\n    detachedCriteria.createAlias(&quot;employee.type&quot;, &quot;employeeType&quot;);\r\n    detachedCriteria.add(Restrictions.eq(&quot;employeeType.name&quot;, string (example: &quot;Teachers&quot;)));\r\nSimilar way you can add more specifications, and for pagination, you can do this:\r\n\r\n    Integer pageNumber = (Integer.valueOf(page_number)-1) * 10;\r\n\r\nand then you can pass all this data using the:\r\n\r\n    resultList = findByCriteria(detachedCriteria,pageNumber,page_size);\r\nwhich will return your result based on the specification and pagination based on page_number and page_size\r\n\r\n","title":"Combining JPA specification with pagination","body":"<p>You can handle Pagination with multiple specifications by using Criteria API.\nExample:</p>\n<pre><code>DetachedCriteria detachedCriteria = DetachedCriteria.forClass(EmployeeEntity.class, &quot;employee&quot;);\n</code></pre>\n<p>Now suppose you want to filter Employee by EmployeeType which is some different entity:</p>\n<pre><code>detachedCriteria.createAlias(&quot;employee.type&quot;, &quot;employeeType&quot;);\ndetachedCriteria.add(Restrictions.eq(&quot;employeeType.name&quot;, string (example: &quot;Teachers&quot;)));\n</code></pre>\n<p>Similar way you can add more specifications, and for pagination, you can do this:</p>\n<pre><code>Integer pageNumber = (Integer.valueOf(page_number)-1) * 10;\n</code></pre>\n<p>and then you can pass all this data using the:</p>\n<pre><code>resultList = findByCriteria(detachedCriteria,pageNumber,page_size);\n</code></pre>\n<p>which will return your result based on the specification and pagination based on page_number and page_size</p>\n"},{"tags":[],"owner":{"account_id":12478391,"reputation":67,"user_id":9084034,"display_name":"Iv&#225;n P&#233;rez"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1691838874,"creation_date":1691708539,"answer_id":76879794,"question_id":74625572,"body_markdown":"There is an easy way to provide pagination using JPA specs.\r\n\r\nStarting from the controller, you need to allow two new parameters, like `int page` and `int size`. Let&#39;s say for your use case:\r\n\r\nController:\r\n```java\r\n@GetMapping(value = &quot;/employees&quot;)\r\n@ResponseStatus(HttpStatus.OK)\r\nEmployeePageResponse&lt;EmployeeDto&gt; getEmployees(EmployeeSearchCriteria criteria) {\r\n    return employeeFilterService.searchEmployee(employeeMapper.toFilter(criteria), criteria.getPage(), criteria.getSize());\r\n}\r\n```\r\nwhere:\r\n```java\r\npublic class EmployeeSearchCriteria {\r\n    private EmployeeType type;\r\n    private int page = 0;\r\n    private int size = 10;\r\n}\r\n```\r\n\r\nthe service just receives the filter you want to apply and propagates it to the repository layer.\r\n\r\nService:\r\n```java\r\n@Override\r\npublic EmployeePageResponse&lt;EmployeeDto&gt; searchEmployees(EmployeesFilter filter, int page, int size) {\r\n    Specification&lt;EmployeeEntity&gt; spec = EmployeeSpec.filterBy(filter);\r\n    // here we pass the pagination parameterers page and size\r\n    Page&lt;EmplooyeeDto&gt; pageResult = carRepository.findAll(spec, PageRequest.of(page, size));\r\n    return employeeMapper.toEmployeePageResponse(pageResult);\r\n}\r\n```\r\nFilter (using Java 17 you can just create a record):\r\n```java\r\npublic record EmployeesFilter(EmployeeType type) {}\r\n```\r\nAnd now comes the important part. Once you have the filter setup, apply it over the repository layer using JPA specs:\r\n```java\r\npublic class EmployeeSpec {\r\n\r\n    public static final String EMPLOYEE_TYPE= &quot;employeeType&quot;;\r\n\r\n    public static Specification&lt;EmployeeEntity&gt; filterBy(EmployeesFilter employeesFilter) {\r\n        return Specification\r\n                .where(hasType(employeesFilter.type()));\r\n    }\r\n\r\n    private static Specification&lt;EmployeeEntity&gt; hasType(EmployeeType type) {\r\n        return ((root, query, cb) -&gt; cb.equal(root.get(EMPLOYEE_TYPE), type));\r\n    }\r\n}\r\n```\r\nAnd finally, the repository\r\n```java\r\n@Repository\r\npublic interface EmployeeRepository extends JpaRepository&lt;EmployeeEntity, Integer&gt;, JpaSpecificationExecutor&lt;EmployeeEntity&gt; {\r\n\r\n    Page&lt;EmployeeEntity&gt; findAll(@Nullable Specification&lt;EmployeeEntity&gt; spec, @NonNull Pageable pageable);\r\n}\r\n```\r\n\r\n\r\nI wrote a small tutorial a few months ago exactly about this topic. There you can also find some examples as well as the Github repo.\r\n\r\nHope you find it useful!\r\nhttps://binarymindset.com/filter-your-data-the-right-way-using-jpa-specifications/","title":"Combining JPA specification with pagination","body":"<p>There is an easy way to provide pagination using JPA specs.</p>\n<p>Starting from the controller, you need to allow two new parameters, like <code>int page</code> and <code>int size</code>. Let's say for your use case:</p>\n<p>Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(value = &quot;/employees&quot;)\n@ResponseStatus(HttpStatus.OK)\nEmployeePageResponse&lt;EmployeeDto&gt; getEmployees(EmployeeSearchCriteria criteria) {\n    return employeeFilterService.searchEmployee(employeeMapper.toFilter(criteria), criteria.getPage(), criteria.getSize());\n}\n</code></pre>\n<p>where:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EmployeeSearchCriteria {\n    private EmployeeType type;\n    private int page = 0;\n    private int size = 10;\n}\n</code></pre>\n<p>the service just receives the filter you want to apply and propagates it to the repository layer.</p>\n<p>Service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic EmployeePageResponse&lt;EmployeeDto&gt; searchEmployees(EmployeesFilter filter, int page, int size) {\n    Specification&lt;EmployeeEntity&gt; spec = EmployeeSpec.filterBy(filter);\n    // here we pass the pagination parameterers page and size\n    Page&lt;EmplooyeeDto&gt; pageResult = carRepository.findAll(spec, PageRequest.of(page, size));\n    return employeeMapper.toEmployeePageResponse(pageResult);\n}\n</code></pre>\n<p>Filter (using Java 17 you can just create a record):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record EmployeesFilter(EmployeeType type) {}\n</code></pre>\n<p>And now comes the important part. Once you have the filter setup, apply it over the repository layer using JPA specs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EmployeeSpec {\n\n    public static final String EMPLOYEE_TYPE= &quot;employeeType&quot;;\n\n    public static Specification&lt;EmployeeEntity&gt; filterBy(EmployeesFilter employeesFilter) {\n        return Specification\n                .where(hasType(employeesFilter.type()));\n    }\n\n    private static Specification&lt;EmployeeEntity&gt; hasType(EmployeeType type) {\n        return ((root, query, cb) -&gt; cb.equal(root.get(EMPLOYEE_TYPE), type));\n    }\n}\n</code></pre>\n<p>And finally, the repository</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface EmployeeRepository extends JpaRepository&lt;EmployeeEntity, Integer&gt;, JpaSpecificationExecutor&lt;EmployeeEntity&gt; {\n\n    Page&lt;EmployeeEntity&gt; findAll(@Nullable Specification&lt;EmployeeEntity&gt; spec, @NonNull Pageable pageable);\n}\n</code></pre>\n<p>I wrote a small tutorial a few months ago exactly about this topic. There you can also find some examples as well as the Github repo.</p>\n<p>Hope you find it useful!\n<a href=\"https://binarymindset.com/filter-your-data-the-right-way-using-jpa-specifications/\" rel=\"nofollow noreferrer\">https://binarymindset.com/filter-your-data-the-right-way-using-jpa-specifications/</a></p>\n"}],"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1691838874,"creation_date":1669801191,"question_id":74625572,"body_markdown":"I have a JPA specification that needs to be split up in two, but also support backend pagination. I am unsure how to accomplish this. \r\n\r\nFor example, I have Employess that can be of two types Teachers and Carers. I need to perform a filtered search (the exact search) on both and return a single unionized response, that can support pagination. Although I know how to perform the two requests, I don&#39;t know how to process the pagination when combining JPA specifications. Any hints?\r\n````\r\nclass EmployeeEntity {\r\n  private Long id;\r\n  private EmployeeType type;\r\n  private String name;\r\n\r\n} \r\n````","title":"Combining JPA specification with pagination","body":"<p>I have a JPA specification that needs to be split up in two, but also support backend pagination. I am unsure how to accomplish this.</p>\n<p>For example, I have Employess that can be of two types Teachers and Carers. I need to perform a filtered search (the exact search) on both and return a single unionized response, that can support pagination. Although I know how to perform the two requests, I don't know how to process the pagination when combining JPA specifications. Any hints?</p>\n<pre><code>class EmployeeEntity {\n  private Long id;\n  private EmployeeType type;\n  private String name;\n\n} \n</code></pre>\n"},{"tags":["java","swing","user-interface","netbeans"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691831325,"post_id":76888079,"comment_id":135546894,"body_markdown":"Slightly strange location, package `com.mycompany.coachingintelligencepro4` for your image. Does it exist and is the image in it?","body":"Slightly strange location, package <code>com.mycompany.coachingintelligencepro4</code> for your image. Does it exist and is the image in it?"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1691835753,"post_id":76888079,"comment_id":135547343,"body_markdown":"Try placing your **resources** directory (folder) directly within the root of the `src` directory of your *Project*. Perhaps even have an path scheme like: **MyProjectName/src/resources/images**. When Importing Images from the Netbeans *Image Chooser* dialog, have them imported into the **MyProjectName/src/resources/images** directory or, manually copy/paste them there and then you can just select the one you want from the *Image Chooser* dialog.","body":"Try placing your <b>resources</b> directory (folder) directly within the root of the <code>src</code> directory of your <i>Project</i>. Perhaps even have an path scheme like: <b>MyProjectName/src/resources/images</b>. When Importing Images from the Netbeans <i>Image Chooser</i> dialog, have them imported into the <b>MyProjectName/src/resources/images</b> directory or, manually copy/paste them there and then you can just select the one you want from the <i>Image Chooser</i> dialog."}],"owner":{"account_id":29210282,"reputation":1,"user_id":22378412,"display_name":"Ron ELLENBOGEN"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691837161,"answer_count":0,"score":0,"last_activity_date":1691837206,"creation_date":1691822384,"question_id":76888079,"body_markdown":"I am trying to make a Java GUI using NetBeans&#39; Swing GUI Builder. I want to import an image into my GUI. From research it seems to do this you must first create a JFrame form, then drag a JPanel onto that, then drag a JLabel on top of that. After putting your image in the project package folder, you then click on the JLabel and go to its properties, click the (...) beside &quot;Icon,&quot; then select the image. For some reason when I try to run my GUI after inserting an image, the Java application icon appears in the taskbar, but no GUI appears on screen. After a few seconds, the Java application icon disappears from the taskbar, and the following error is displayed in the output box:\r\n\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException: Cannot invoke &quot;java.net.URL.toExternalForm()&quot; because &quot;location&quot; is null\r\n\tat java.desktop/javax.swing.ImageIcon.&lt;init&gt;(ImageIcon.java:232)\r\n\tat com.mycompany.coachingintelligencepro4.TestFrame.initComponents(TestFrame.java:35)\r\n\tat com.mycompany.coachingintelligencepro4.TestFrame.&lt;init&gt;(TestFrame.java:17)\r\n\tat com.mycompany.coachingintelligencepro4.TestFrame$1.run(TestFrame.java:104)\r\n\tat java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:773)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:742)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n\r\n\r\n\r\n\r\nAlthough, when making a GUI that does not involve importing an image, it runs perfectly fine, which leads me to believe there is a problem with the image importing process.\r\n\r\nI am running Apache NetBeans IDE 18, on a MacBook Pro with MacOS Ventura 13.5.\r\n\r\nThis is the source code for my GUI class:\r\n\r\n```\r\n/*\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template\r\n */\r\npackage com.mycompany.coachingintelligencepro4;\r\n\r\n/**\r\n *\r\n * @author ronellenbogen\r\n */\r\npublic class TestFrame extends javax.swing.JFrame {\r\n\r\n    /**\r\n     * Creates new form TestFrame\r\n     */\r\n    public TestFrame() {\r\n        initComponents();\r\n    }\r\n\r\n    /**\r\n     * This method is called from within the constructor to initialize the form.\r\n     * WARNING: Do NOT modify this code. The content of this method is always\r\n     * regenerated by the Form Editor.\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \r\n    private void initComponents() {\r\n\r\n        jPanel2 = new javax.swing.JPanel();\r\n        jLabel2 = new javax.swing.JLabel();\r\n        jLabel3 = new javax.swing.JLabel();\r\n\r\n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\r\n\r\n        jLabel3.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/com/mycompany/coachingintelligencepro4/download.jpg&quot;))); // NOI18N\r\n\r\n        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);\r\n        jPanel2.setLayout(jPanel2Layout);\r\n        jPanel2Layout.setHorizontalGroup(\r\n            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addGroup(jPanel2Layout.createSequentialGroup()\r\n                .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 475, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\r\n                .addComponent(jLabel2)\r\n                .addContainerGap(1037, Short.MAX_VALUE))\r\n        );\r\n        jPanel2Layout.setVerticalGroup(\r\n            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addGroup(jPanel2Layout.createSequentialGroup()\r\n                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                    .addGroup(jPanel2Layout.createSequentialGroup()\r\n                        .addGap(112, 112, 112)\r\n                        .addComponent(jLabel2))\r\n                    .addGroup(jPanel2Layout.createSequentialGroup()\r\n                        .addContainerGap()\r\n                        .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 242, javax.swing.GroupLayout.PREFERRED_SIZE)))\r\n                .addContainerGap(856, Short.MAX_VALUE))\r\n        );\r\n\r\n        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());\r\n        getContentPane().setLayout(layout);\r\n        layout.setHorizontalGroup(\r\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addComponent(jPanel2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n        );\r\n        layout.setVerticalGroup(\r\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addComponent(jPanel2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n        );\r\n\r\n        pack();\r\n    }// &lt;/editor-fold&gt;                        \r\n\r\n    /**\r\n     * @param args the command line arguments\r\n     */\r\n    public static void main() {\r\n        /* Set the Nimbus look and feel */\r\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Look and feel setting code (optional) &quot;&gt;\r\n        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.\r\n         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html \r\n         */\r\n        try {\r\n            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\r\n                if (&quot;Nimbus&quot;.equals(info.getName())) {\r\n                    javax.swing.UIManager.setLookAndFeel(info.getClassName());\r\n                    break;\r\n                }\r\n            }\r\n        } catch (ClassNotFoundException ex) {\r\n            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        } catch (InstantiationException ex) {\r\n            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        } catch (IllegalAccessException ex) {\r\n            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        } catch (javax.swing.UnsupportedLookAndFeelException ex) {\r\n            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n        }\r\n        //&lt;/editor-fold&gt;\r\n\r\n        /* Create and display the form */\r\n        java.awt.EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                new TestFrame().setVisible(true);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Variables declaration - do not modify                     \r\n    private javax.swing.JLabel jLabel2;\r\n    private javax.swing.JLabel jLabel3;\r\n    private javax.swing.JPanel jPanel2;\r\n    // End of variables declaration                   \r\n}\r\n\r\n```\r\nThis is the source code for the project&#39;s main class:\r\n\r\n```\r\n/*\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\r\n */\r\n\r\npackage com.mycompany.coachingintelligencepro4;\r\n\r\n/**\r\n *\r\n * @author ronellenbogen\r\n */\r\npublic class CoachingIntelligencePro4 {\r\n\r\n    public static void main(String[] args) {\r\n        TestFrame.main();\r\n    }\r\n}\r\n\r\n```\r\n\r\nThank you\r\n","title":"Importing an image to NetBeans&#39; Java Swing GUI Builder","body":"<p>I am trying to make a Java GUI using NetBeans' Swing GUI Builder. I want to import an image into my GUI. From research it seems to do this you must first create a JFrame form, then drag a JPanel onto that, then drag a JLabel on top of that. After putting your image in the project package folder, you then click on the JLabel and go to its properties, click the (...) beside &quot;Icon,&quot; then select the image. For some reason when I try to run my GUI after inserting an image, the Java application icon appears in the taskbar, but no GUI appears on screen. After a few seconds, the Java application icon disappears from the taskbar, and the following error is displayed in the output box:</p>\n<pre><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException: Cannot invoke &quot;java.net.URL.toExternalForm()&quot; because &quot;location&quot; is null\nat java.desktop/javax.swing.ImageIcon.&lt;init&gt;(ImageIcon.java:232)\nat com.mycompany.coachingintelligencepro4.TestFrame.initComponents(TestFrame.java:35)\nat com.mycompany.coachingintelligencepro4.TestFrame.&lt;init&gt;(TestFrame.java:17)\nat com.mycompany.coachingintelligencepro4.TestFrame$1.run(TestFrame.java:104)\nat java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\nat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:773)\nat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\nat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\nat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\nat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:742)\nat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\nat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\nat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\nat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\nat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\nat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n<p>Although, when making a GUI that does not involve importing an image, it runs perfectly fine, which leads me to believe there is a problem with the image importing process.</p>\n<p>I am running Apache NetBeans IDE 18, on a MacBook Pro with MacOS Ventura 13.5.</p>\n<p>This is the source code for my GUI class:</p>\n<pre><code>/*\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\n * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template\n */\npackage com.mycompany.coachingintelligencepro4;\n\n/**\n *\n * @author ronellenbogen\n */\npublic class TestFrame extends javax.swing.JFrame {\n\n    /**\n     * Creates new form TestFrame\n     */\n    public TestFrame() {\n        initComponents();\n    }\n\n    /**\n     * This method is called from within the constructor to initialize the form.\n     * WARNING: Do NOT modify this code. The content of this method is always\n     * regenerated by the Form Editor.\n     */\n    @SuppressWarnings(&quot;unchecked&quot;)\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \n    private void initComponents() {\n\n        jPanel2 = new javax.swing.JPanel();\n        jLabel2 = new javax.swing.JLabel();\n        jLabel3 = new javax.swing.JLabel();\n\n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\n\n        jLabel3.setIcon(new javax.swing.ImageIcon(getClass().getResource(&quot;/com/mycompany/coachingintelligencepro4/download.jpg&quot;))); // NOI18N\n\n        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);\n        jPanel2.setLayout(jPanel2Layout);\n        jPanel2Layout.setHorizontalGroup(\n            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(jPanel2Layout.createSequentialGroup()\n                .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 475, javax.swing.GroupLayout.PREFERRED_SIZE)\n                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)\n                .addComponent(jLabel2)\n                .addContainerGap(1037, Short.MAX_VALUE))\n        );\n        jPanel2Layout.setVerticalGroup(\n            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(jPanel2Layout.createSequentialGroup()\n                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n                    .addGroup(jPanel2Layout.createSequentialGroup()\n                        .addGap(112, 112, 112)\n                        .addComponent(jLabel2))\n                    .addGroup(jPanel2Layout.createSequentialGroup()\n                        .addContainerGap()\n                        .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 242, javax.swing.GroupLayout.PREFERRED_SIZE)))\n                .addContainerGap(856, Short.MAX_VALUE))\n        );\n\n        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());\n        getContentPane().setLayout(layout);\n        layout.setHorizontalGroup(\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addComponent(jPanel2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n        );\n        layout.setVerticalGroup(\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addComponent(jPanel2, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n        );\n\n        pack();\n    }// &lt;/editor-fold&gt;                        \n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main() {\n        /* Set the Nimbus look and feel */\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Look and feel setting code (optional) &quot;&gt;\n        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.\n         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html \n         */\n        try {\n            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\n                if (&quot;Nimbus&quot;.equals(info.getName())) {\n                    javax.swing.UIManager.setLookAndFeel(info.getClassName());\n                    break;\n                }\n            }\n        } catch (ClassNotFoundException ex) {\n            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (InstantiationException ex) {\n            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (IllegalAccessException ex) {\n            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (javax.swing.UnsupportedLookAndFeelException ex) {\n            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        }\n        //&lt;/editor-fold&gt;\n\n        /* Create and display the form */\n        java.awt.EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                new TestFrame().setVisible(true);\n            }\n        });\n    }\n\n    // Variables declaration - do not modify                     \n    private javax.swing.JLabel jLabel2;\n    private javax.swing.JLabel jLabel3;\n    private javax.swing.JPanel jPanel2;\n    // End of variables declaration                   \n}\n\n</code></pre>\n<p>This is the source code for the project's main class:</p>\n<pre><code>/*\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\n */\n\npackage com.mycompany.coachingintelligencepro4;\n\n/**\n *\n * @author ronellenbogen\n */\npublic class CoachingIntelligencePro4 {\n\n    public static void main(String[] args) {\n        TestFrame.main();\n    }\n}\n\n</code></pre>\n<p>Thank you</p>\n"},{"tags":["java","string","unicode","encoding"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1691749967,"post_id":76882703,"comment_id":135537081,"body_markdown":"See if [this](https://stackoverflow.com/questions/57131654/using-utf-8-encoding-chcp-65001-in-command-prompt-windows-powershell-window) helps.","body":"See if <a href=\"https://stackoverflow.com/questions/57131654/using-utf-8-encoding-chcp-65001-in-command-prompt-windows-powershell-window\">this</a> helps."},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1691750033,"post_id":76882703,"comment_id":135537092,"body_markdown":"I can&#39;t reproduce it, I tried your code and it can be displayed correctly","body":"I can&#39;t reproduce it, I tried your code and it can be displayed correctly"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1691750322,"post_id":76882703,"comment_id":135537140,"body_markdown":"Why are you taking a string, converting it to its UTF-8 bytes and back into a string (in potentially a different character encoding)? Why not just `System.out.println(str);`?","body":"Why are you taking a string, converting it to its UTF-8 bytes and back into a string (in potentially a different character encoding)? Why not just <code>System.out.println(str);</code>?"},{"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"score":0,"creation_date":1691750515,"post_id":76882703,"comment_id":135537171,"body_markdown":"@AndyTurner When I print only `str` then compiles but nothing is displayed","body":"@AndyTurner When I print only <code>str</code> then compiles but nothing is displayed"},{"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"score":0,"creation_date":1691750559,"post_id":76882703,"comment_id":135537185,"body_markdown":"@时间只会一直走 Have you please tried in windows command line?","body":"@时间只会一直走 Have you please tried in windows command line?"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1691752409,"post_id":76882703,"comment_id":135537558,"body_markdown":"`new String(str.getBytes(&quot;UTF-8&quot;))` will take your string, convert it to bytes using UTF-8, and then convert it back to a string using either UTF-8 (on modern JVMs, I think jdk17+), or using your platform local encoding. __If__ that is UTF-8, this is meaningless and produces the same thing as just `str`. If it&#39;s not UTF-8, you lose the game here, and your string is irrepairably gobbledygook. No matter what is happening, __do not do this part__. Your string is then converted back to byte[] a third time when sent to standard out. Your OS then converts it back to a string and prints it.","body":"<code>new String(str.getBytes(&quot;UTF-8&quot;))</code> will take your string, convert it to bytes using UTF-8, and then convert it back to a string using either UTF-8 (on modern JVMs, I think jdk17+), or using your platform local encoding. <b>If</b> that is UTF-8, this is meaningless and produces the same thing as just <code>str</code>. If it&#39;s not UTF-8, you lose the game here, and your string is irrepairably gobbledygook. No matter what is happening, <b>do not do this part</b>. Your string is then converted back to byte[] a third time when sent to standard out. Your OS then converts it back to a string and prints it."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691752544,"post_id":76882703,"comment_id":135537588,"body_markdown":"Just print `str`. If that prints nothing, go debug it. What does `System.out.println(System.getProperty(&quot;native.encoding&quot;));` print?","body":"Just print <code>str</code>. If that prints nothing, go debug it. What does <code>System.out.println(System.getProperty(&quot;native.encoding&quot;));</code> print?"},{"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"score":0,"creation_date":1691753783,"post_id":76882703,"comment_id":135537857,"body_markdown":"@rzwitserloot it prints `null`","body":"@rzwitserloot it prints <code>null</code>"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691769895,"post_id":76882703,"comment_id":135541302,"body_markdown":"@user then you&#39;re on an old JDK. Okay, the old version of that is `System.out.println(Charset.defaultCharset())`.","body":"@user then you&#39;re on an old JDK. Okay, the old version of that is <code>System.out.println(Charset.defaultCharset())</code>."},{"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"score":0,"creation_date":1691770436,"post_id":76882703,"comment_id":135541397,"body_markdown":"@rzwitserloot output is: `windows-1256`","body":"@rzwitserloot output is: <code>windows-1256</code>"},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1691773040,"post_id":76882703,"comment_id":135541778,"body_markdown":"I don&#39;t think that can handle persian characters at all. No java code could possibly make it work.","body":"I don&#39;t think that can handle persian characters at all. No java code could possibly make it work."},{"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"score":0,"creation_date":1691775050,"post_id":76882703,"comment_id":135542113,"body_markdown":"@rzwitserloot then what should I do? May I upgrade my jdk to newer version or else?","body":"@rzwitserloot then what should I do? May I upgrade my jdk to newer version or else?"},{"owner":{"account_id":4198672,"reputation":28840,"user_id":3439404,"display_name":"JosefZ"},"score":0,"creation_date":1691782789,"post_id":76882703,"comment_id":135543411,"body_markdown":"You face a [mojibake](https://en.wikipedia.org/wiki/Mojibake) case (*example in Python for its universal intelligibility*): `&quot;سلام&quot;.encode(&#39;utf-8&#39;).decode(&#39;cp1256&#39;)` returns `&#39;ط&#179;ظ„ط&#167;ظ…&#39;`. I&#39;d guess that `System.out.println(&quot;سلام&quot;);`  or `System.out.println(str);` should work instead of `System.out.println(new String(str.getBytes(&quot;UTF-8&quot;)));`…","body":"You face a <a href=\"https://en.wikipedia.org/wiki/Mojibake\" rel=\"nofollow noreferrer\">mojibake</a> case (<i>example in Python for its universal intelligibility</i>): <code>&quot;سلام&quot;.encode(&#39;utf-8&#39;).decode(&#39;cp1256&#39;)</code> returns <code>&#39;ط&#179;ظ„ط&#167;ظ…&#39;</code>. I&#39;d guess that <code>System.out.println(&quot;سلام&quot;);</code>  or <code>System.out.println(str);</code> should work instead of <code>System.out.println(new String(str.getBytes(&quot;UTF-8&quot;)));</code>…"},{"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"score":0,"creation_date":1691820555,"post_id":76882703,"comment_id":135546133,"body_markdown":"@JosefZ I tried `System.out.println(&quot;سلام&quot;);` but strange character is displayed","body":"@JosefZ I tried <code>System.out.println(&quot;سلام&quot;);</code> but strange character is displayed"}],"answers":[{"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691837075,"creation_date":1691837075,"answer_id":76888896,"question_id":76882703,"body_markdown":"Your code is fine, but you have two problems:\r\n- You are using a font in the **Command Prompt** window which does not properly support Farsi characters.\r\n- Farsi is written from right to left, but the **Command Prompt** window is rendering text from left to right, so even if you use an appropriate font the Farsi text will be rendered in reverse.\r\n\r\nUsing your sample application, this is how the output was rendered in my **Command Prompt** window using *Courier New* font which supports Farsi characters:\r\n\r\n[![Farsi from cmd window][1]][1]\r\n\r\nNote that the characters were rendered correctly, but in reverse order.\r\n\r\nThere may be an easy workaround to get characters to render right to left text correctly in a **Command Prompt** window, but a better alternative approach in any case is to instead use the **Command Prompt** implementation provided by the [Microsoft&#39;s **Terminal** utility](https://learn.microsoft.com/en-us/windows/terminal/install). \r\n\r\nIf you do that then your application&#39;s output is rendered correctly without needing to make any configuration changes:\r\n\r\n[![Terminal output][2]][2]\r\n\r\nNotes:\r\n- My environment is Windows 10 using *United States* locale with a default code page of 65001. I tested using JDK 20, but any JDK version should be fine.\r\n- Unless you must use the traditional **Command Prompt** window for compatibility reasons, consider using the **Command Prompt** implementation provided by **Terminal** instead. All kinds of text rendering problems just disappear because some longstanding bugs/limitations with the traditional **Command Prompt** window have been resolved.\r\n- If you are not familiar with Terminal, this is [Microsoft&#39;s overview](https://learn.microsoft.com/en-us/windows/terminal/) description:\r\n &gt; *Windows Terminal is a modern host application for the command-line shells you already love, like Command Prompt, PowerShell, and bash\r\n &gt; (via Windows Subsystem for Linux (WSL)). Its main features include\r\n &gt; multiple tabs, panes, Unicode and UTF-8 character support, a GPU\r\n &gt; accelerated text rendering engine, and the ability to create your own\r\n &gt; themes and customize text, colors, backgrounds, and shortcuts.*\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0Rco3.png\r\n  [2]: https://i.stack.imgur.com/ZSK8m.png","title":"Java not printing Persian accurately in Windows command line","body":"<p>Your code is fine, but you have two problems:</p>\n<ul>\n<li>You are using a font in the <strong>Command Prompt</strong> window which does not properly support Farsi characters.</li>\n<li>Farsi is written from right to left, but the <strong>Command Prompt</strong> window is rendering text from left to right, so even if you use an appropriate font the Farsi text will be rendered in reverse.</li>\n</ul>\n<p>Using your sample application, this is how the output was rendered in my <strong>Command Prompt</strong> window using <em>Courier New</em> font which supports Farsi characters:</p>\n<p><a href=\"https://i.stack.imgur.com/0Rco3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0Rco3.png\" alt=\"Farsi from cmd window\" /></a></p>\n<p>Note that the characters were rendered correctly, but in reverse order.</p>\n<p>There may be an easy workaround to get characters to render right to left text correctly in a <strong>Command Prompt</strong> window, but a better alternative approach in any case is to instead use the <strong>Command Prompt</strong> implementation provided by the <a href=\"https://learn.microsoft.com/en-us/windows/terminal/install\" rel=\"nofollow noreferrer\">Microsoft's <strong>Terminal</strong> utility</a>.</p>\n<p>If you do that then your application's output is rendered correctly without needing to make any configuration changes:</p>\n<p><a href=\"https://i.stack.imgur.com/ZSK8m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZSK8m.png\" alt=\"Terminal output\" /></a></p>\n<p>Notes:</p>\n<ul>\n<li>My environment is Windows 10 using <em>United States</em> locale with a default code page of 65001. I tested using JDK 20, but any JDK version should be fine.</li>\n<li>Unless you must use the traditional <strong>Command Prompt</strong> window for compatibility reasons, consider using the <strong>Command Prompt</strong> implementation provided by <strong>Terminal</strong> instead. All kinds of text rendering problems just disappear because some longstanding bugs/limitations with the traditional <strong>Command Prompt</strong> window have been resolved.</li>\n<li>If you are not familiar with Terminal, this is <a href=\"https://learn.microsoft.com/en-us/windows/terminal/\" rel=\"nofollow noreferrer\">Microsoft's overview</a> description:</li>\n</ul>\n<blockquote>\n<p><em>Windows Terminal is a modern host application for the command-line shells you already love, like Command Prompt, PowerShell, and bash\n(via Windows Subsystem for Linux (WSL)). Its main features include\nmultiple tabs, panes, Unicode and UTF-8 character support, a GPU\naccelerated text rendering engine, and the ability to create your own\nthemes and customize text, colors, backgrounds, and shortcuts.</em></p>\n</blockquote>\n"}],"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76888896,"answer_count":1,"score":2,"last_activity_date":1691837075,"creation_date":1691749577,"question_id":76882703,"body_markdown":"Here is my code:\r\n\r\n    class Hello{\r\n    \tpublic static void main(String[] arg)throws Exception{\r\n    \t\tSystem.out.println(&quot;Hello&quot;);\r\n    \t\tString str = &quot;سلام&quot;;\r\n    \t\t\tSystem.out.println(new String(str.getBytes(&quot;UTF-8&quot;)));\r\n    \t}\r\n    }\r\n\r\nCompiling as: `javac -encoding UTF8 Hello.java` The ouput is:\r\n\r\n    C:\\Users\\Windows\\Desktop&gt;java Hello\r\n    Hello\r\n    ط&#179;ظ„ط&#167;ظ…\r\n\r\n`chcp` shows: `Active code page: 65001`\r\n\r\nHow can I display it accurately?\r\n\r\nBest Regards\r\n\r\n","title":"Java not printing Persian accurately in Windows command line","body":"<p>Here is my code:</p>\n<pre><code>class Hello{\n    public static void main(String[] arg)throws Exception{\n        System.out.println(&quot;Hello&quot;);\n        String str = &quot;سلام&quot;;\n            System.out.println(new String(str.getBytes(&quot;UTF-8&quot;)));\n    }\n}\n</code></pre>\n<p>Compiling as: <code>javac -encoding UTF8 Hello.java</code> The ouput is:</p>\n<pre><code>C:\\Users\\Windows\\Desktop&gt;java Hello\nHello\nط³ظ„ط§ظ…\n</code></pre>\n<p><code>chcp</code> shows: <code>Active code page: 65001</code></p>\n<p>How can I display it accurately?</p>\n<p>Best Regards</p>\n"},{"tags":["java","android","repeat","detection","face-detection"],"comments":[{"owner":{"account_id":13104915,"reputation":677,"user_id":9468070,"display_name":"bijaykumarpun"},"score":0,"creation_date":1557824840,"post_id":56123221,"comment_id":98885114,"body_markdown":"please put the crash report as well","body":"please put the crash report as well"},{"owner":{"account_id":15888164,"reputation":59,"user_id":11464005,"display_name":"Nicolas Borowicz"},"score":0,"creation_date":1557884761,"post_id":56123221,"comment_id":98911802,"body_markdown":"I have edited my post in order to put the crash report","body":"I have edited my post in order to put the crash report"},{"owner":{"account_id":9764543,"reputation":1315,"user_id":7238475,"accept_rate":100,"display_name":"flopshot"},"score":0,"creation_date":1557884903,"post_id":56123221,"comment_id":98911831,"body_markdown":"I’d use the new CameraX apis. Much simpler","body":"I’d use the new CameraX apis. Much simpler"}],"answers":[{"tags":[],"owner":{"account_id":1420007,"reputation":17492,"user_id":1344825,"display_name":"Eddy Talvala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1557942606,"creation_date":1557942606,"answer_id":56155072,"question_id":56123221,"body_markdown":"You&#39;re resetting mCaptureSession to null somewhere in your code before the handler method can run, or this particular mCaptureSession is never correctly initialized to begin with.\r\n\r\nYou could explicitly use a copy of mCaptureSession to pass into the Handler runnable to avoid the nullness issue if you can&#39;t find what sets the member variable to null, but then you still have to make sure nothing actually closes the session before your handler runs.","title":"How to use Handler with a CaptureSession.stopReapeating()?","body":"<p>You're resetting mCaptureSession to null somewhere in your code before the handler method can run, or this particular mCaptureSession is never correctly initialized to begin with.</p>\n\n<p>You could explicitly use a copy of mCaptureSession to pass into the Handler runnable to avoid the nullness issue if you can't find what sets the member variable to null, but then you still have to make sure nothing actually closes the session before your handler runs.</p>\n"}],"owner":{"account_id":15888164,"reputation":59,"user_id":11464005,"display_name":"Nicolas Borowicz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":532,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56155072,"answer_count":1,"score":0,"last_activity_date":1691837061,"creation_date":1557809622,"question_id":56123221,"body_markdown":"I&#39;m working on a face detection app with android studio (Based on Camera2 Api face recon). The problem is the following : the capture session is stopped when some condition are true. Then, the user can take the picture or retry (capture session is started). I would like to give time to user after he used retry button in order to replace his face. \r\n\r\nButtons retry and take picture appear when the face take more than 20% of the screen. During the same time, I use stopRepeating in order to freeze the camera capture session. I tried to put these functions in a handler, but when I put the stopRepeating inside the handler, the app crash.\r\n\r\n\r\n    if(face/sizeEc&gt;0.20 &amp;&amp; face/sizeEc&lt;0.6){\r\n    \r\n      new Handler().postDelayed(new Runnable() {\r\n    \r\n        @Override\r\n        public void run() {\r\n    \r\n          TextView textView = (TextView) getView().findViewById(R.id.picture);\r\n          textView.setVisibility(View.VISIBLE);\r\n          TextView textView2 = (TextView) getView().findViewById(R.id.picture2);\r\n          textView2.setVisibility(View.VISIBLE);\r\n          try {\r\n            mCaptureSession.stopRepeating();\r\n          } catch (CameraAccessException e) {\r\n            e.printStackTrace();\r\n          }\r\n    \r\n    \r\n        }\r\n      }, 2000);\r\n\r\n      //I tried to use this handler in order to allow user to replace his head\r\n      //But there is a problem when the handler is used with stopRepeating\r\n\r\n    }\r\n\r\n\r\n\r\nand the code for the retry button : \r\n\r\n    textView2.setOnClickListener(new View.OnClickListener() {\r\n    \r\n      @Override\r\n      public void onClick(View view) {\r\n    \r\n    \r\n        try {\r\n          mCaptureSession.setRepeatingRequest(mPreviewRequest,\r\n            mCaptureCallback, mBackgroundHandler);\r\n        } catch (CameraAccessException e) {\r\n          e.printStackTrace();\r\n        }\r\n        textView.setVisibility(View.GONE);\r\n        textView2.setVisibility(View.GONE);\r\n        asDelayed=true;\r\n    \r\n    \r\n      }\r\n    });\r\n\r\nAs I said, when I do this, the app crash when I use take picture after a retry. I would like to give time to user to replace his face after using retry button.\r\n\r\n\r\n[EDIT] Here is the error\r\n\r\n2019-05-15 08:44:12.149 28923-28923/weladee.frontware.com.weladee_android E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: weladee.frontware.com.weladee_android, PID: 28923\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.hardware.camera2.CameraCaptureSession.stopRepeating()&#39; on a null object reference\r\n        at weladee.frontware.com.weladee_android.utils.front_camera.CameraFacingFront$4$1$1.run(CameraFacingFront.java:429)\r\n        at android.os.Handler.handleCallback(Handler.java:761)\r\n        at android.os.Handler.dispatchMessage(Handler.java:98)\r\n        at android.os.Looper.loop(Looper.java:156)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6523)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:942)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:832)","title":"How to use Handler with a CaptureSession.stopReapeating()?","body":"<p>I'm working on a face detection app with android studio (Based on Camera2 Api face recon). The problem is the following : the capture session is stopped when some condition are true. Then, the user can take the picture or retry (capture session is started). I would like to give time to user after he used retry button in order to replace his face. </p>\n\n<p>Buttons retry and take picture appear when the face take more than 20% of the screen. During the same time, I use stopRepeating in order to freeze the camera capture session. I tried to put these functions in a handler, but when I put the stopRepeating inside the handler, the app crash.</p>\n\n<pre><code>if(face/sizeEc&gt;0.20 &amp;&amp; face/sizeEc&lt;0.6){\n\n  new Handler().postDelayed(new Runnable() {\n\n    @Override\n    public void run() {\n\n      TextView textView = (TextView) getView().findViewById(R.id.picture);\n      textView.setVisibility(View.VISIBLE);\n      TextView textView2 = (TextView) getView().findViewById(R.id.picture2);\n      textView2.setVisibility(View.VISIBLE);\n      try {\n        mCaptureSession.stopRepeating();\n      } catch (CameraAccessException e) {\n        e.printStackTrace();\n      }\n\n\n    }\n  }, 2000);\n\n  //I tried to use this handler in order to allow user to replace his head\n  //But there is a problem when the handler is used with stopRepeating\n\n}\n</code></pre>\n\n<p>and the code for the retry button : </p>\n\n<pre><code>textView2.setOnClickListener(new View.OnClickListener() {\n\n  @Override\n  public void onClick(View view) {\n\n\n    try {\n      mCaptureSession.setRepeatingRequest(mPreviewRequest,\n        mCaptureCallback, mBackgroundHandler);\n    } catch (CameraAccessException e) {\n      e.printStackTrace();\n    }\n    textView.setVisibility(View.GONE);\n    textView2.setVisibility(View.GONE);\n    asDelayed=true;\n\n\n  }\n});\n</code></pre>\n\n<p>As I said, when I do this, the app crash when I use take picture after a retry. I would like to give time to user to replace his face after using retry button.</p>\n\n<p>[EDIT] Here is the error</p>\n\n<p>2019-05-15 08:44:12.149 28923-28923/weladee.frontware.com.weladee_android E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: weladee.frontware.com.weladee_android, PID: 28923\n    java.lang.NullPointerException: Attempt to invoke virtual method 'void android.hardware.camera2.CameraCaptureSession.stopRepeating()' on a null object reference\n        at weladee.frontware.com.weladee_android.utils.front_camera.CameraFacingFront$4$1$1.run(CameraFacingFront.java:429)\n        at android.os.Handler.handleCallback(Handler.java:761)\n        at android.os.Handler.dispatchMessage(Handler.java:98)\n        at android.os.Looper.loop(Looper.java:156)\n        at android.app.ActivityThread.main(ActivityThread.java:6523)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:942)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:832)</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691759840,"post_id":76883870,"comment_id":135539098,"body_markdown":"Block what? There&#39;s only one thread here, nothing to block.","body":"Block what? There&#39;s only one thread here, nothing to block."},{"owner":{"account_id":17753497,"reputation":71,"user_id":14039564,"display_name":"Squared"},"score":1,"creation_date":1691760406,"post_id":76883870,"comment_id":135539254,"body_markdown":"Why only one? There are main and Thread-0.","body":"Why only one? There are main and Thread-0."},{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":0,"creation_date":1691760509,"post_id":76883870,"comment_id":135539280,"body_markdown":"Why do you think so?","body":"Why do you think so?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691760675,"post_id":76883870,"comment_id":135539308,"body_markdown":"Right, one in addition to the main thread. Still there&#39;s nothing to block: Thread-0 is running and the main thread is waiting for it to finish.","body":"Right, one in addition to the main thread. Still there&#39;s nothing to block: Thread-0 is running and the main thread is waiting for it to finish."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691760611,"creation_date":1691760611,"answer_id":76883990,"question_id":76883870,"body_markdown":"You misunderstood what `synchronized` means. It doesn&#39;t &quot;block&quot; an object in the sense that other methods of that object cannot run. The `run` method can totally in parallel with `method1`.\r\n\r\nWhen `synchronized` methods are called, all that happens is that the monitor of `this` is acquired. After that, if some other thread *also* tries to acquire that same monitor (either by calling a `synchronized` method on the same object, or using a `synchronized` block that synchronises on that object), then that other thread will wait until the monitor is released. The monitor is released when the `synchronized` method returns or throws an exception.\r\n\r\nIn other words, if there is only ever one thread that acquires a monitor, it will not be very different from not using `synchronized` at all. This is what happens in your code - only the main thread acquires the monitor of `mt1` by calling `method1`. The `run` method doesn&#39;t acquire any monitors.\r\n\r\nIf you also call `method1` in `run`, then both the main thread and `mt1` will try to acquire the monitor. One of them will get it, and the other will have to wait until the monitor is released.","title":"Why doesn&#39;t the call to the synchronized method block the object?","body":"<p>You misunderstood what <code>synchronized</code> means. It doesn't &quot;block&quot; an object in the sense that other methods of that object cannot run. The <code>run</code> method can totally in parallel with <code>method1</code>.</p>\n<p>When <code>synchronized</code> methods are called, all that happens is that the monitor of <code>this</code> is acquired. After that, if some other thread <em>also</em> tries to acquire that same monitor (either by calling a <code>synchronized</code> method on the same object, or using a <code>synchronized</code> block that synchronises on that object), then that other thread will wait until the monitor is released. The monitor is released when the <code>synchronized</code> method returns or throws an exception.</p>\n<p>In other words, if there is only ever one thread that acquires a monitor, it will not be very different from not using <code>synchronized</code> at all. This is what happens in your code - only the main thread acquires the monitor of <code>mt1</code> by calling <code>method1</code>. The <code>run</code> method doesn't acquire any monitors.</p>\n<p>If you also call <code>method1</code> in <code>run</code>, then both the main thread and <code>mt1</code> will try to acquire the monitor. One of them will get it, and the other will have to wait until the monitor is released.</p>\n"},{"tags":[],"owner":{"account_id":14698033,"reputation":11,"user_id":17636972,"display_name":"funkemunky"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691761263,"creation_date":1691760910,"answer_id":76884030,"question_id":76883870,"body_markdown":"When you synchronize methods in an object, you are telling the JVM to only allow one execution of all `synchronized` methods at a time. In your code, you are running MyThread#method() on the primary thread. While the method is executing, all other accesses to that singular method are blocked.\r\n\r\nHowever, the synchronization of a method will only block *synchronized methods* in the object, not the object itself. If you want to block an entire object, you will have to use a synchronized block on that object.\r\n\r\nIf you prefer to block the entire object of MyThread, here is how you would do that:\r\n``` lang-java\r\nclass MyThread implements Runnable {\r\n    public Thread thrd;\r\n\r\n    public MyThread() {\r\n        thrd = new Thread(this);\r\n    }\r\n\r\n    public static MyThread createAndRun() {\r\n        MyThread mt = new MyThread();\r\n        mt.thrd.start();\r\n        return mt;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        synchronized (this) {\r\n            for (int i = 0; i &lt; 10; ++i) {\r\n                System.out.print(Thread.currentThread().getName() + &quot;:&quot; + i + &quot; &quot;);\r\n\r\n                try {\r\n                    Thread.sleep(250);\r\n                } catch (InterruptedException exception) {\r\n                    exception.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public void method() {\r\n        for (int i = 0; i &lt; 10; ++i) {\r\n            System.out.print(Thread.currentThread().getName() + &quot;:&quot; + i + &quot; &quot;);\r\n            try {\r\n                Thread.sleep(250);\r\n            } catch (InterruptedException exception) {\r\n                exception.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass App {\r\n    public static void main(String[] args) {\r\n        MyThread mt1 = MyThread.createAndRun();\r\n        synchronized (mt1) {\r\n            mt1.method();\r\n        }\r\n        try {\r\n            mt1.thrd.join();\r\n        } catch (InterruptedException exc) {\r\n            System.out.println(exc);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere is the following output:\r\n```\r\nmain:0 main:1 main:2 main:3 main:4 main:5 main:6 main:7 main:8 main:9 Thread-0:0 Thread-0:1 Thread-0:2 Thread-0:3 Thread-0:4 Thread-0:5 Thread-0:6 Thread-0:7 Thread-0:8 Thread-0:9 \r\n```\r\n\r\n","title":"Why doesn&#39;t the call to the synchronized method block the object?","body":"<p>When you synchronize methods in an object, you are telling the JVM to only allow one execution of all <code>synchronized</code> methods at a time. In your code, you are running MyThread#method() on the primary thread. While the method is executing, all other accesses to that singular method are blocked.</p>\n<p>However, the synchronization of a method will only block <em>synchronized methods</em> in the object, not the object itself. If you want to block an entire object, you will have to use a synchronized block on that object.</p>\n<p>If you prefer to block the entire object of MyThread, here is how you would do that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyThread implements Runnable {\n    public Thread thrd;\n\n    public MyThread() {\n        thrd = new Thread(this);\n    }\n\n    public static MyThread createAndRun() {\n        MyThread mt = new MyThread();\n        mt.thrd.start();\n        return mt;\n    }\n\n    @Override\n    public void run() {\n        synchronized (this) {\n            for (int i = 0; i &lt; 10; ++i) {\n                System.out.print(Thread.currentThread().getName() + &quot;:&quot; + i + &quot; &quot;);\n\n                try {\n                    Thread.sleep(250);\n                } catch (InterruptedException exception) {\n                    exception.printStackTrace();\n                }\n            }\n        }\n    }\n\n    public void method() {\n        for (int i = 0; i &lt; 10; ++i) {\n            System.out.print(Thread.currentThread().getName() + &quot;:&quot; + i + &quot; &quot;);\n            try {\n                Thread.sleep(250);\n            } catch (InterruptedException exception) {\n                exception.printStackTrace();\n            }\n        }\n    }\n}\n\nclass App {\n    public static void main(String[] args) {\n        MyThread mt1 = MyThread.createAndRun();\n        synchronized (mt1) {\n            mt1.method();\n        }\n        try {\n            mt1.thrd.join();\n        } catch (InterruptedException exc) {\n            System.out.println(exc);\n        }\n    }\n}\n</code></pre>\n<p>Here is the following output:</p>\n<pre><code>main:0 main:1 main:2 main:3 main:4 main:5 main:6 main:7 main:8 main:9 Thread-0:0 Thread-0:1 Thread-0:2 Thread-0:3 Thread-0:4 Thread-0:5 Thread-0:6 Thread-0:7 Thread-0:8 Thread-0:9 \n</code></pre>\n"}],"owner":{"account_id":17753497,"reputation":71,"user_id":14039564,"display_name":"Squared"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76883990,"answer_count":2,"score":0,"last_activity_date":1691836283,"creation_date":1691759558,"question_id":76883870,"body_markdown":"Why doesn&#39;t the call to the synchronized method block the object?\r\nI assume that mt1.method(); should block object MyThread. But it doesn&#39;t happen.\r\n```\r\nclass MyThread implements Runnable {\r\n    public Thread thrd;\r\n\r\n    public MyThread() {\r\n        thrd = new Thread(this);\r\n    }\r\n\r\n    public static MyThread createAndRun() {//Test t\r\n        MyThread mt = new MyThread();\r\n        mt.thrd.start();\r\n        return mt;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n// This way main thread doesn&#39;t block MyThread.\r\n        for (int i = 0; i &lt; 10; ++i) {\r\n            System.out.print(Thread.currentThread().getName() + &quot;:&quot; + i + &quot; &quot;);\r\n\r\n            try {\r\n                Thread.sleep(250);\r\n            } catch (InterruptedException exception) {\r\n                exception.printStackTrace();\r\n            }\r\n        }\r\n//main:0 Thread-0:0 main:1 Thread-0:1 main:2 Thread-0:2 main:3 Thread-0:3 main:4 Thread-0:4 main:5 Thread-0:5 Thread-0:6 main:6 Thread-0:7 main:7 Thread-0:8 main:8 Thread-0:9 main:9 \r\n\r\n\r\n\r\n\r\n\r\n//        method();// if use it instead for-lopp - all works as expected. \r\n//main:0 main:1 main:2 main:3 main:4 main:5 main:6 main:7 main:8 main:9 Thread-0:0 Thread-0:1 Thread-0:2 Thread-0:3 Thread-0:4 Thread-0:5 Thread-0:6 Thread-0:7 Thread-0:8 Thread-0:9 \r\n    }\r\n\r\n    synchronized public void method() {\r\n        for (int i = 0; i &lt; 10; ++i) {\r\n            System.out.print(Thread.currentThread().getName() + &quot;:&quot; + i + &quot; &quot;);\r\n            try {\r\n                Thread.sleep(250);\r\n            } catch (InterruptedException exception) {\r\n                exception.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nclass App {\r\n    public static void main(String[] args) {\r\n        MyThread mt1 = MyThread.createAndRun();\r\n        mt1.method();\r\n        try {\r\n            mt1.thrd.join();\r\n        } catch (InterruptedException exc) {\r\n            System.out.println(exc);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI assume that mt1.method(); should block object MyThread. But it doesn&#39;t happen. What don&#39;t I understand correctly?","title":"Why doesn&#39;t the call to the synchronized method block the object?","body":"<p>Why doesn't the call to the synchronized method block the object?\nI assume that mt1.method(); should block object MyThread. But it doesn't happen.</p>\n<pre><code>class MyThread implements Runnable {\n    public Thread thrd;\n\n    public MyThread() {\n        thrd = new Thread(this);\n    }\n\n    public static MyThread createAndRun() {//Test t\n        MyThread mt = new MyThread();\n        mt.thrd.start();\n        return mt;\n    }\n\n    @Override\n    public void run() {\n// This way main thread doesn't block MyThread.\n        for (int i = 0; i &lt; 10; ++i) {\n            System.out.print(Thread.currentThread().getName() + &quot;:&quot; + i + &quot; &quot;);\n\n            try {\n                Thread.sleep(250);\n            } catch (InterruptedException exception) {\n                exception.printStackTrace();\n            }\n        }\n//main:0 Thread-0:0 main:1 Thread-0:1 main:2 Thread-0:2 main:3 Thread-0:3 main:4 Thread-0:4 main:5 Thread-0:5 Thread-0:6 main:6 Thread-0:7 main:7 Thread-0:8 main:8 Thread-0:9 main:9 \n\n\n\n\n\n//        method();// if use it instead for-lopp - all works as expected. \n//main:0 main:1 main:2 main:3 main:4 main:5 main:6 main:7 main:8 main:9 Thread-0:0 Thread-0:1 Thread-0:2 Thread-0:3 Thread-0:4 Thread-0:5 Thread-0:6 Thread-0:7 Thread-0:8 Thread-0:9 \n    }\n\n    synchronized public void method() {\n        for (int i = 0; i &lt; 10; ++i) {\n            System.out.print(Thread.currentThread().getName() + &quot;:&quot; + i + &quot; &quot;);\n            try {\n                Thread.sleep(250);\n            } catch (InterruptedException exception) {\n                exception.printStackTrace();\n            }\n        }\n    }\n}\n\nclass App {\n    public static void main(String[] args) {\n        MyThread mt1 = MyThread.createAndRun();\n        mt1.method();\n        try {\n            mt1.thrd.join();\n        } catch (InterruptedException exc) {\n            System.out.println(exc);\n        }\n    }\n}\n</code></pre>\n<p>I assume that mt1.method(); should block object MyThread. But it doesn't happen. What don't I understand correctly?</p>\n"},{"tags":["java","spring-boot","oop","design-patterns","dto"],"comments":[{"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"score":0,"creation_date":1691854005,"post_id":76888527,"comment_id":135549157,"body_markdown":"I answered a very similar question last week, so here are my 5 cents of you want to see different views: https://stackoverflow.com/questions/76809263/relation-between-services-when-using-dtos-in-spring","body":"I answered a very similar question last week, so here are my 5 cents of you want to see different views: <a href=\"https://stackoverflow.com/questions/76809263/relation-between-services-when-using-dtos-in-spring\" title=\"relation between services when using dtos in spring\">stackoverflow.com/questions/76809263/&hellip;</a>"},{"owner":{"account_id":25654570,"reputation":111,"user_id":19421233,"display_name":"Vidz Here"},"score":0,"creation_date":1691869154,"post_id":76888527,"comment_id":135550590,"body_markdown":"One of the common pattern is to implement ModelMapperUtil class with generics methods &amp; calling those methods in serviceImpl class .","body":"One of the common pattern is to implement ModelMapperUtil class with generics methods &amp; calling those methods in serviceImpl class ."}],"answers":[{"tags":[],"owner":{"account_id":43160,"reputation":227380,"user_id":126014,"accept_rate":86,"display_name":"Mark Seemann"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691834529,"creation_date":1691834529,"answer_id":76888755,"question_id":76888527,"body_markdown":"There&#39;s hardly any unqualified universal answer to a design problem like this one, but in general, Data Transfer Objects exist in order to model how an application interfaces with the rest of the world: JSON, XML, database rows, etc.\r\n\r\n[At the boundaries, applications aren&#39;t object-oriented][1], and DTOs aren&#39;t really proper objects, in any sense of object-orientation. As Martin Fowler wrote in [PEAA][2]:\r\n\r\n&gt; &quot;A *Data Transfer Object* is one of those objects our mothers told us never to write.&quot;\r\n\r\nDTOs should be specific to an external API, so for the same Domain Model, you may even have one DTO for representing an Entity as JSON, and another DTO for representing it as a database row.\r\n\r\nIn a typical [ports-and-adapters][3] architecture, the DTOs and Adapters are defined at the boundary of the application.\r\n\r\nIf you follow the [Dependency Inversion Principle][4] you want to keep the core Domain Model free of &#39;edge&#39; concerns, whereas the &#39;edge&#39; (or boundary) may depend on, and know of, the core Domain Model.\r\n\r\nFrom this principle it then follows that all mapping that involves DTOs must exist at the same &#39;layer&#39; as the DTOs themselves.\r\n\r\nPeople often find that [Clean Architecture][5] explains this in a way that makes sense. Dependencies may only point inwards.\r\n\r\nIf I understand the terminology of the OP correctly, put mappers in the &#39;Controller layer&#39;, since this is also where the DTOs should be, and DTOs are exclusively a &#39;Controller-layer&#39; concern.\r\n\r\nYou don&#39;t necessarily have to put the conversion logic into actual Controller classes, but the conversions belong in that layer (e.g. library or module).\r\n\r\nAs to the more specific question about services *A* and *B*, I would consider writing the APIs in terms of the Domain Model (Entities) instead of DTOs.\r\n\r\n\r\n  [1]: https://blog.ploeh.dk/2011/05/31/AttheBoundaries,ApplicationsareNotObject-Oriented\r\n  [2]: https://blog.ploeh.dk/ref/peaa\r\n  [3]: https://alistair.cockburn.us/hexagonal-architecture/\r\n  [4]: https://en.wikipedia.org/wiki/Dependency_inversion_principle\r\n  [5]: https://blog.ploeh.dk/ref/clean-architecture","title":"Where is the best place to convert Entity to DTO?","body":"<p>There's hardly any unqualified universal answer to a design problem like this one, but in general, Data Transfer Objects exist in order to model how an application interfaces with the rest of the world: JSON, XML, database rows, etc.</p>\n<p><a href=\"https://blog.ploeh.dk/2011/05/31/AttheBoundaries,ApplicationsareNotObject-Oriented\" rel=\"nofollow noreferrer\">At the boundaries, applications aren't object-oriented</a>, and DTOs aren't really proper objects, in any sense of object-orientation. As Martin Fowler wrote in <a href=\"https://blog.ploeh.dk/ref/peaa\" rel=\"nofollow noreferrer\">PEAA</a>:</p>\n<blockquote>\n<p>&quot;A <em>Data Transfer Object</em> is one of those objects our mothers told us never to write.&quot;</p>\n</blockquote>\n<p>DTOs should be specific to an external API, so for the same Domain Model, you may even have one DTO for representing an Entity as JSON, and another DTO for representing it as a database row.</p>\n<p>In a typical <a href=\"https://alistair.cockburn.us/hexagonal-architecture/\" rel=\"nofollow noreferrer\">ports-and-adapters</a> architecture, the DTOs and Adapters are defined at the boundary of the application.</p>\n<p>If you follow the <a href=\"https://en.wikipedia.org/wiki/Dependency_inversion_principle\" rel=\"nofollow noreferrer\">Dependency Inversion Principle</a> you want to keep the core Domain Model free of 'edge' concerns, whereas the 'edge' (or boundary) may depend on, and know of, the core Domain Model.</p>\n<p>From this principle it then follows that all mapping that involves DTOs must exist at the same 'layer' as the DTOs themselves.</p>\n<p>People often find that <a href=\"https://blog.ploeh.dk/ref/clean-architecture\" rel=\"nofollow noreferrer\">Clean Architecture</a> explains this in a way that makes sense. Dependencies may only point inwards.</p>\n<p>If I understand the terminology of the OP correctly, put mappers in the 'Controller layer', since this is also where the DTOs should be, and DTOs are exclusively a 'Controller-layer' concern.</p>\n<p>You don't necessarily have to put the conversion logic into actual Controller classes, but the conversions belong in that layer (e.g. library or module).</p>\n<p>As to the more specific question about services <em>A</em> and <em>B</em>, I would consider writing the APIs in terms of the Domain Model (Entities) instead of DTOs.</p>\n"},{"tags":[],"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691835786,"creation_date":1691835786,"answer_id":76888828,"question_id":76888527,"body_markdown":"For the purpose of interfacing with web applications I frequently use records (&gt; Java 14), since they make class creation very easy:\r\n\r\n* I define them directly in the controllers as inner classes since they don&#39;t have any usage outside of them.\r\n* To prevent naming conflicts with entities I prepend them with an underscore.\r\n\r\nThe conversion logic isn&#39;t really logic. It&#39;s just forwarding the entities&#39; properties to the record or vice versa. Mapping lists of objects is also clear and easy using streams.","title":"Where is the best place to convert Entity to DTO?","body":"<p>For the purpose of interfacing with web applications I frequently use records (&gt; Java 14), since they make class creation very easy:</p>\n<ul>\n<li>I define them directly in the controllers as inner classes since they don't have any usage outside of them.</li>\n<li>To prevent naming conflicts with entities I prepend them with an underscore.</li>\n</ul>\n<p>The conversion logic isn't really logic. It's just forwarding the entities' properties to the record or vice versa. Mapping lists of objects is also clear and easy using streams.</p>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":563,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76888755,"answer_count":2,"score":0,"last_activity_date":1691835786,"creation_date":1691831077,"question_id":76888527,"body_markdown":"Other than Service, is there any better place to put the mapper for converting Entity to DTO and vice-versa?\r\n\r\nAt work, we always put Mapper into the Service layer, but I&#39;m not sure this is the best place...\r\n\r\nThe service contains a bunch of methods that take as parameter DTO objects, or return DTO objects.\r\nAnd this is smooth when those methods are invoked on the controller side.\r\nBut sometimes we have methods in ServiceA that invoke a method of ServiceB, and I would like to avoid to convert object where is not needed:\r\n\r\nExample:\r\n\r\n    // A SERVICE IMPL\r\n    public Integer save(ADto aDto) {\r\n       AEntity aEntity = aMapper.toEntity(aDto);\r\n  \r\n       BEntity bEntity = aEntity.getBEntity();\r\n       BDto bDto = bMapper.toDto(bEntity);\r\n       bService.save(bDto);\r\n       \r\n       aEntity = aRepository.save(aEntity);\r\n       return aEntity.getId();\r\n    }\r\n\r\n    // B SERVICE IMPL\r\n    public Integer save(BDto bDto) {\r\n       BEntity bEntity = bMapper.toEntity(bDto);\r\n       bEntity = bRepository.save(bEntity);\r\n       return bEntity.getId();\r\n    }\r\n\r\nIn this case, there are 2 conversions that can be avoided:\r\n- `bMapper.toDto(bEntity);` \r\n- `bMapper.toEntity(bDto);`\r\n\r\nso we ended up having &quot;duplicate&quot; methods:\r\n\r\n    Integer save(Entity entity)\r\n    Integer saveFromDto(Dto dto)\r\n    Integer save(List&lt;Entity&gt; entities)\r\n    Integer saveFromDtos(List&lt;Dto&gt; dtos)\r\n    \r\n    Entity findById(Integer id)\r\n    Dto findByIdToDto(Integer id)\r\n    List&lt;Entity&gt; findAll()\r\n    List&lt;Dto&gt; findAllToDto()\r\n\r\nI started thinking about how to refactor it, and the following possibilities came to my mind:\r\n\r\n- **Move Mapper into Controller layer**\r\n  The controller is the layer that is responsible to send data as a response, so this layer must know what has to be sent, in my opinion, it is not the responsibility of the service to know what to send. \r\n  &lt;br&gt; PRO: doesn&#39;t need a new adapter class for each service\r\n  &lt;br&gt; CONS: add conversion logic into controller\r\n\r\n- **Create an Adapter of Service and use this one into Controller layer.** &lt;br&gt;\r\nBasically, the adapter will be responsible of:\r\n&lt;br&gt;1 - invoke the mapper method to convert Dto to Entity before invoking the service method that requires entity as parameter.\r\n&lt;br&gt;2 - invoke the mapper method to convert entity to dto before returning the result to the Controller layer.\r\n  &lt;br&gt; PRO: doesn&#39;t add conversion logic into controller.\r\n  &lt;br&gt; CONS: a new Adapter class for each service.\r\n\r\nThis refactor will free the Service layer from extra work, since it will be only aware of Entity classes and not also about DTOs.\r\n\r\n","title":"Where is the best place to convert Entity to DTO?","body":"<p>Other than Service, is there any better place to put the mapper for converting Entity to DTO and vice-versa?</p>\n<p>At work, we always put Mapper into the Service layer, but I'm not sure this is the best place...</p>\n<p>The service contains a bunch of methods that take as parameter DTO objects, or return DTO objects.\nAnd this is smooth when those methods are invoked on the controller side.\nBut sometimes we have methods in ServiceA that invoke a method of ServiceB, and I would like to avoid to convert object where is not needed:</p>\n<p>Example:</p>\n<pre><code>// A SERVICE IMPL\npublic Integer save(ADto aDto) {\n   AEntity aEntity = aMapper.toEntity(aDto);\n\n   BEntity bEntity = aEntity.getBEntity();\n   BDto bDto = bMapper.toDto(bEntity);\n   bService.save(bDto);\n   \n   aEntity = aRepository.save(aEntity);\n   return aEntity.getId();\n}\n\n// B SERVICE IMPL\npublic Integer save(BDto bDto) {\n   BEntity bEntity = bMapper.toEntity(bDto);\n   bEntity = bRepository.save(bEntity);\n   return bEntity.getId();\n}\n</code></pre>\n<p>In this case, there are 2 conversions that can be avoided:</p>\n<ul>\n<li><code>bMapper.toDto(bEntity);</code></li>\n<li><code>bMapper.toEntity(bDto);</code></li>\n</ul>\n<p>so we ended up having &quot;duplicate&quot; methods:</p>\n<pre><code>Integer save(Entity entity)\nInteger saveFromDto(Dto dto)\nInteger save(List&lt;Entity&gt; entities)\nInteger saveFromDtos(List&lt;Dto&gt; dtos)\n\nEntity findById(Integer id)\nDto findByIdToDto(Integer id)\nList&lt;Entity&gt; findAll()\nList&lt;Dto&gt; findAllToDto()\n</code></pre>\n<p>I started thinking about how to refactor it, and the following possibilities came to my mind:</p>\n<ul>\n<li><p><strong>Move Mapper into Controller layer</strong>\nThe controller is the layer that is responsible to send data as a response, so this layer must know what has to be sent, in my opinion, it is not the responsibility of the service to know what to send.\n<br> PRO: doesn't need a new adapter class for each service\n<br> CONS: add conversion logic into controller</p>\n</li>\n<li><p><strong>Create an Adapter of Service and use this one into Controller layer.</strong> <br>\nBasically, the adapter will be responsible of:\n<br>1 - invoke the mapper method to convert Dto to Entity before invoking the service method that requires entity as parameter.\n<br>2 - invoke the mapper method to convert entity to dto before returning the result to the Controller layer.\n<br> PRO: doesn't add conversion logic into controller.\n<br> CONS: a new Adapter class for each service.</p>\n</li>\n</ul>\n<p>This refactor will free the Service layer from extra work, since it will be only aware of Entity classes and not also about DTOs.</p>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"comments":[{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":0,"creation_date":1690354725,"post_id":76768617,"comment_id":135339947,"body_markdown":"You need to set it your self via: public void setItemReader(ItemReader&lt;AggregateItem&lt;T&gt;&gt; itemReader)","body":"You need to set it your self via: public void setItemReader(ItemReader&lt;AggregateItem&lt;T&gt;&gt; itemReader)"},{"owner":{"account_id":11405681,"reputation":76,"user_id":8361202,"display_name":"Vinod"},"score":0,"creation_date":1690355704,"post_id":76768617,"comment_id":135340145,"body_markdown":"@fascynacja Initialized using the setter but i am getting this error now, updated the post.","body":"@fascynacja Initialized using the setter but i am getting this error now, updated the post."},{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":3,"creation_date":1690435475,"post_id":76768617,"comment_id":135354020,"body_markdown":"Please put the whole stack trace","body":"Please put the whole stack trace"},{"owner":{"account_id":21356,"reputation":47248,"user_id":51831,"accept_rate":56,"display_name":"jpalecek"},"score":0,"creation_date":1691019624,"post_id":76768617,"comment_id":135435658,"body_markdown":"But how do you pass a `FlatFileItemReader&lt;String&gt;` to something which needs `ItemStreamReader&lt;AggregateItem&lt;T&gt;&gt;`? There is your problem.","body":"But how do you pass a <code>FlatFileItemReader&lt;String&gt;</code> to something which needs <code>ItemStreamReader&lt;AggregateItem&lt;T&gt;&gt;</code>? There is your problem."}],"owner":{"account_id":11405681,"reputation":76,"user_id":8361202,"display_name":"Vinod"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691835593,"creation_date":1690353667,"question_id":76768617,"body_markdown":"Using Spring Batch, I need to read multiple lines from a text file and pass it to the processor as `List&lt;String&gt;`,  I am trying to implement AggregateItemReader, I followed the below link, but I am not able to understand how this is initialized:\r\n\r\n    \tprivate ItemStreamReader&lt;AggregateItem&lt;T&gt;&gt; itemReader;\r\n\r\nInitialized using the setter but I am getting this error now:\r\n\r\n    java.lang.ClassCastException: class java.lang.String cannot be cast to class .AggregateItem\r\n\r\nThis is my reader:\r\n\r\n     public FlatFileItemReader&lt;String&gt; gsmfFlatReader() {\r\n        return new FlatFileItemReaderBuilder&lt;String&gt;()\r\n                     .name(GSMF_READER)\r\n                     .lineMapper((line, index) -&gt; line)\r\n                     .build();\r\n         }\r\n\r\nhttps://github.com/christian-posta/batch-systems-examples/blob/master/spring-batch-example/src/main/java/org/jboss/examples/spring/batch/multiline/AggregateItemReader.java","title":"How is AggregateItemReader&#39;s itemReader is initialized","body":"<p>Using Spring Batch, I need to read multiple lines from a text file and pass it to the processor as <code>List&lt;String&gt;</code>,  I am trying to implement AggregateItemReader, I followed the below link, but I am not able to understand how this is initialized:</p>\n<pre><code>    private ItemStreamReader&lt;AggregateItem&lt;T&gt;&gt; itemReader;\n</code></pre>\n<p>Initialized using the setter but I am getting this error now:</p>\n<pre><code>java.lang.ClassCastException: class java.lang.String cannot be cast to class .AggregateItem\n</code></pre>\n<p>This is my reader:</p>\n<pre><code> public FlatFileItemReader&lt;String&gt; gsmfFlatReader() {\n    return new FlatFileItemReaderBuilder&lt;String&gt;()\n                 .name(GSMF_READER)\n                 .lineMapper((line, index) -&gt; line)\n                 .build();\n     }\n</code></pre>\n<p><a href=\"https://github.com/christian-posta/batch-systems-examples/blob/master/spring-batch-example/src/main/java/org/jboss/examples/spring/batch/multiline/AggregateItemReader.java\" rel=\"nofollow noreferrer\">https://github.com/christian-posta/batch-systems-examples/blob/master/spring-batch-example/src/main/java/org/jboss/examples/spring/batch/multiline/AggregateItemReader.java</a></p>\n"},{"tags":["java","hibernate","java-14","jpa"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1635618987,"post_id":69781049,"comment_id":123346355,"body_markdown":"As far as I know, JPA does not support records (for details why, please see [this article](https://vladmihalcea.com/java-records-jpa-hibernate/)).","body":"As far as I know, JPA does not support records (for details why, please see <a href=\"https://vladmihalcea.com/java-records-jpa-hibernate/\" rel=\"nofollow noreferrer\">this article</a>)."}],"answers":[{"tags":[],"owner":{"account_id":3988115,"reputation":1606,"user_id":3288041,"display_name":"gkatiforis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635620694,"creation_date":1635620694,"answer_id":69781312,"question_id":69781049,"body_markdown":"A `record` cannot be used as Hibernate entity because it breaks the requirements of an entity according to JPA specification. Make it `class` and use `@Immutable` annotation instead:\r\n\r\n    @Entity\r\n    @Immutable\r\n    public class Agent\r\n\r\n","title":"Javax-Persistance : Entity does not have a primary key using Java records","body":"<p>A <code>record</code> cannot be used as Hibernate entity because it breaks the requirements of an entity according to JPA specification. Make it <code>class</code> and use <code>@Immutable</code> annotation instead:</p>\n<pre><code>@Entity\n@Immutable\npublic class Agent\n</code></pre>\n"},{"tags":[],"owner":{"account_id":265347,"reputation":1035,"user_id":2322270,"display_name":"Vaibhav Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635694354,"creation_date":1635694354,"answer_id":69788032,"question_id":69781049,"body_markdown":"Just clearing the answer for completeness (although @Turning85 and @gkatiforis have already provided correct explanation):\r\n \r\nAccording to the JPA specification, an entity must follow these requirements:\r\n\r\n - the entity class needs to be non-final,\r\n - the entity class needs to have a no-arg constructor that is either\r\n   public or protected,\r\n - the entity attributes must be non-final.\r\n\r\nHowever, as explained by this [article][1], the Java Record type is defined like this:\r\n\r\n - the associated Java class is final,\r\n - there is only one constructor that takes all attributes,\r\n - the Java record attributes are final.\r\n\r\nBut records are a good fit for a DTO projection, which is often used as a read-only representation of the data stored in your database.\r\nmore info - https://thorben-janssen.com/java-records-hibernate-jpa/\r\n\r\n\r\n  [1]: https://vladmihalcea.com/java-records-jpa-hibernate/","title":"Javax-Persistance : Entity does not have a primary key using Java records","body":"<p>Just clearing the answer for completeness (although @Turning85 and @gkatiforis have already provided correct explanation):</p>\n<p>According to the JPA specification, an entity must follow these requirements:</p>\n<ul>\n<li>the entity class needs to be non-final,</li>\n<li>the entity class needs to have a no-arg constructor that is either\npublic or protected,</li>\n<li>the entity attributes must be non-final.</li>\n</ul>\n<p>However, as explained by this <a href=\"https://vladmihalcea.com/java-records-jpa-hibernate/\" rel=\"nofollow noreferrer\">article</a>, the Java Record type is defined like this:</p>\n<ul>\n<li>the associated Java class is final,</li>\n<li>there is only one constructor that takes all attributes,</li>\n<li>the Java record attributes are final.</li>\n</ul>\n<p>But records are a good fit for a DTO projection, which is often used as a read-only representation of the data stored in your database.\nmore info - <a href=\"https://thorben-janssen.com/java-records-hibernate-jpa/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/java-records-hibernate-jpa/</a></p>\n"},{"tags":[],"owner":{"account_id":17722198,"reputation":63,"user_id":12866947,"display_name":"Pushpendra Kushvaha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691835353,"creation_date":1691835353,"answer_id":76888805,"question_id":69781049,"body_markdown":"`Entity` class internally use setter methods to set the data. As record are immutable. It only contain \r\n- fields\r\n- all-args constructor\r\n- getters\r\n- toString\r\n- equals/hashCode methods\r\n\r\nand not `setter` methods. So we can&#39;t use `record` as entities.","title":"Javax-Persistance : Entity does not have a primary key using Java records","body":"<p><code>Entity</code> class internally use setter methods to set the data. As record are immutable. It only contain</p>\n<ul>\n<li>fields</li>\n<li>all-args constructor</li>\n<li>getters</li>\n<li>toString</li>\n<li>equals/hashCode methods</li>\n</ul>\n<p>and not <code>setter</code> methods. So we can't use <code>record</code> as entities.</p>\n"}],"owner":{"account_id":23192137,"reputation":13,"user_id":17288349,"display_name":"MFT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":608,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69781312,"answer_count":3,"score":1,"last_activity_date":1691835353,"creation_date":1635618708,"question_id":69781049,"body_markdown":"\r\nI am trying to create a entity class using Java record, but I get the error message \r\n&quot;Entity does not have primary key&quot; although I assigned an ID annotation.\r\n\r\n\r\n        import javax.persistence.*;\r\n        import java.time.LocalDate;\r\n\r\n        @Entity\r\n        public record Agent (\r\n                @Id\r\n                String code,\r\n                String name,\r\n                LocalDate date,\r\n                String workingArea,\r\n                String country,\r\n                String phoneNumber,\r\n                boolean licenseToKill,\r\n                int credits,\r\n                byte[] picture)\r\n              {}\r\n\r\n\r\nWhat&#39;s wrong with this?","title":"Javax-Persistance : Entity does not have a primary key using Java records","body":"<p>I am trying to create a entity class using Java record, but I get the error message\n&quot;Entity does not have primary key&quot; although I assigned an ID annotation.</p>\n<pre><code>    import javax.persistence.*;\n    import java.time.LocalDate;\n\n    @Entity\n    public record Agent (\n            @Id\n            String code,\n            String name,\n            LocalDate date,\n            String workingArea,\n            String country,\n            String phoneNumber,\n            boolean licenseToKill,\n            int credits,\n            byte[] picture)\n          {}\n</code></pre>\n<p>What's wrong with this?</p>\n"},{"tags":["java","selenium-webdriver","testng","extentreports","selenium-extent-report"],"owner":{"account_id":29205889,"reputation":1,"user_id":22374977,"display_name":"testemulate emulate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691834657,"creation_date":1691834657,"question_id":76888764,"body_markdown":"I am working on Java Selenium TestNG.\r\nSelenium 4.10.0\r\nTestNG 7.8.0\r\n\r\nI am trying to generate Extent Reports, but the CSS properties are not loaded, probably because of the internet restrictions I have.\r\nThe github CDN from which the CSS are taken are blocked in my organization, and would not be whitelisted. Is there a way where I can get the reports working good without internet? Any jars for css,etc are available? Or is there any alternative?\r\nPlease help!\r\n\r\nNote: I cannot use Maven, so all jars must be downloaded and then loaded into my IDE (IntelliJ)\r\n\r\nExtent Report dependencies (jar files):\r\nextentreports-4.0.9\r\nfreemarker-2.3.23\r\nbson-3.3.0\r\ngson-2.8.5\r\nhttpclient-4.5.2\r\nhttpcore-4.4.4\r\nhttpmime-4.5.2\r\nmongodb-driver-3.3.0\r\nmongodb-driver-core-3.3.0\r\ncommons-codec-1.9.0\r\ncommons-logging-1.2\r\n\r\nCode I tried:\r\n**TestBase.java (Base Class)**\r\n\r\n```\r\npackage tests;\r\n\r\nimport com.aventstack.extentreports.ExtentReports;\r\nimport com.aventstack.extentreports.ExtentTest;\r\nimport org.apache.commons.io.FileUtils;\r\nimport org.openqa.selenium.OutputType;\r\nimport org.openqa.selenium.TakesScreenshot;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.edge.EdgeDriver;\r\nimport org.openqa.selenium.support.ui.ExpectedConditions;\r\nimport org.openqa.selenium.support.ui.WebDriverWait;\r\nimport org.testng.ITestContext;\r\nimport org.testng.annotations.Listeners;\r\nimport utils.ExtentManager;\r\nimport utils.ExtentTestManager;\r\nimport utils.TestListener;\r\n\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.time.Duration;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Properties;\r\nimport java.util.Set;\r\n\r\n@Listeners(TestListener.class)\r\npublic class TestBase {\r\n    public static WebDriver driver;\r\n    public static Properties prop;\r\n\r\n    public static int TIMEOUT = 60;\r\n\r\n    public TestBase() {\r\n        try {\r\n            prop = new Properties();\r\n            FileInputStream fis = new FileInputStream(System.getProperty(&quot;user.dir&quot;) + &quot;/src/testDAta/config.properties&quot;);\r\n            prop.load(fis);\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Exception: &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\n    public void setup(ITestContext context) {\r\n        System.setProperty(&quot;webdriver.edge.driver&quot;, System.getProperty(&quot;user.dir&quot;) + prop.getProperty(&quot;edge.path&quot;));\r\n        driver = new EdgeDriver();\r\n        driver.manage().window().maximize();\r\n        context.setAttribute(&quot;driver&quot;, driver);\r\n    }\r\n    public void getURL(String url){\r\n        if (url.equalsIgnoreCase(&quot;google&quot;)) {\r\n            driver.get(prop.getProperty(&quot;web.urlG&quot;));\r\n        } else if (url.equalsIgnoreCase(&quot;yahoo&quot;)) {\r\n            driver.get(prop.getProperty(&quot;web.urlY&quot;));\r\n        } else {\r\n            System.out.println(&quot;none!&quot;);\r\n        }\r\n    }\r\n\r\n    public void waitAndClickElement(WebElement element) {\r\n        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(TIMEOUT));\r\n        wait.until(ExpectedConditions.elementToBeClickable(element)).click();\r\n    }\r\n    public void waitForElementToAppear(WebElement element){\r\n        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(TIMEOUT));\r\n        wait.until(ExpectedConditions.visibilityOf(element));\r\n    }\r\n\r\n    public void switchWindow(int idx){\r\n        Set&lt;String&gt; allHandles = driver.getWindowHandles();\r\n        List&lt;String&gt; handlesList = new ArrayList&lt;&gt;(allHandles);\r\n        System.out.println(&quot;Handles: &quot; + handlesList);\r\n        driver.switchTo().window(handlesList.get(idx));\r\n\r\n    }\r\n    public void captureScreenshot(String screenshotName){\r\n        try{\r\n            TakesScreenshot ts = (TakesScreenshot) driver;\r\n            File srcFile = ts.getScreenshotAs(OutputType.FILE);\r\n            String destPath = System.getProperty(&quot;user.dir&quot;) + &quot;/screenshots/&quot; + screenshotName + &quot;.png&quot;;\r\n            File destFile = new File(destPath);\r\n            FileUtils.copyFile(srcFile, destFile);\r\n        }catch (IOException e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n**HomePage.java (PageObject file)**\r\n\r\n\r\n```\r\npackage pages;\r\n\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.support.FindBy;\r\nimport org.openqa.selenium.support.PageFactory;\r\nimport tests.TestBase;\r\n\r\npublic class HomePage extends TestBase {\r\n    public WebDriver driver;\r\n    public HomePage(WebDriver driver){\r\n//        this.driver = driver;\r\n        PageFactory.initElements(driver, this);\r\n    }\r\n\r\n    @FindBy(id = &quot;getwebsitebtn&quot;)\r\n    WebElement txtLink;\r\n\r\n    @FindBy(xpath = &quot;//*[text()=&#39;Get Started for Free&#39;]&quot;)\r\n    WebElement getFreeBtn;\r\n\r\n    public void linkTest(){\r\n        waitAndClickElement(txtLink);\r\n        switchWindow(1);\r\n        waitAndClickElement(getFreeBtn);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n**TestFile.java (Test file)**\r\n\r\n```\r\npackage tests;\r\n\r\nimport com.aventstack.extentreports.ExtentTest;\r\nimport com.aventstack.extentreports.Status;\r\nimport org.testng.ITestContext;\r\nimport org.testng.annotations.BeforeClass;\r\nimport org.testng.annotations.Test;\r\nimport pages.HomePage;\r\nimport utils.ExtentTestManager;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class TestFile extends TestBase{\r\n\r\n\r\n    @BeforeClass\r\n    public void setItUp(ITestContext context){\r\n        setup(context);\r\n    }\r\n\r\n    public static ExtentTest extentTest;\r\n    @Test\r\n    public void urlTest() throws IOException {\r\n//        extentTest = ExtentTestManager.getTest();\r\n        // Call the setup method to initialize the driver\r\n//        getURL(&quot;Yahoo&quot;); // You can change this to &quot;Google&quot; or other URLs as needed\r\n        extentTest = ExtentTestManager.getTest();\r\n        getURL(&quot;Yahoo&quot;);\r\n\r\n        HomePage hp = new HomePage(driver); // Initialize the HomePage object after the driver is set up\r\n        hp.linkTest();\r\n        extentTest.log(Status.INFO, &quot;Clicked on Links&quot;);\r\n        captureScreenshot(&quot;snap1&quot;);\r\n        System.out.println(System.getProperty(&quot;user.dir&quot;));\r\n        extentTest.addScreenCaptureFromPath(System.getProperty(&quot;user.dir&quot;) + &quot;/screenshots/snap1.png&quot;, &quot;snapshot&quot;);\r\n        ExtentTestManager.endTest();\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n**testng.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n&lt;suite name=&quot;All Test Suite&quot;&gt;\r\n    &lt;test verbose=&quot;2&quot; preserve-order=&quot;true&quot; name=&quot;E:/MyCode/frmwrk&quot;&gt;\r\n        &lt;classes&gt;&lt;class name=&quot;tests.TestFile&quot;&gt;\r\n            &lt;methods&gt;&lt;include name=&quot;urlTest&quot;/&gt;\r\n            &lt;/methods&gt;\r\n        &lt;/class&gt;\r\n        &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n&lt;/suite&gt;\r\n```\r\n\r\n**ExtentManager.java**\r\n\r\n```\r\npackage utils;\r\n\r\nimport java.io.File;\r\n\r\nimport com.aventstack.extentreports.ExtentReports;\r\nimport com.aventstack.extentreports.reporter.ExtentSparkReporter;\r\nimport com.aventstack.extentreports.reporter.configuration.Theme;\r\n\r\npublic class ExtentManager {\r\n    private static ExtentReports extent;\r\n    private static String reportFileName = &quot;Test-Automaton-Report&quot; + &quot;.html&quot;;\r\n    private static String fileSeperator = System.getProperty(&quot;file.separator&quot;);\r\n    private static String reportFilepath = System.getProperty(&quot;user.dir&quot;) + fileSeperator + &quot;TestReport&quot;;\r\n    private static String reportFileLocation = reportFilepath + fileSeperator + reportFileName;\r\n\r\n    public static ExtentReports getInstance() {\r\n        if (extent == null)\r\n            createInstance();\r\n        return extent;\r\n    }\r\n\r\n    // Create an extent report instance\r\n    public static ExtentReports createInstance() {\r\n        String fileName = getReportPath(reportFilepath);\r\n\r\n        ExtentSparkReporter htmlReporter = new ExtentSparkReporter(fileName);\r\n        htmlReporter.config().setTheme(Theme.DARK);\r\n        htmlReporter.config().setDocumentTitle(reportFileName);\r\n        htmlReporter.config().setReportName(reportFileName);\r\n        htmlReporter.config().setTimeStampFormat(&quot;MMM dd, yyyy HH:mm:ss&quot;);\r\n\r\n        extent = new ExtentReports();\r\n        extent.attachReporter(htmlReporter);\r\n\r\n        return extent;\r\n    }\r\n\r\n    // Create the report path\r\n    private static String getReportPath(String path) {\r\n        File testDirectory = new File(path);\r\n        if (!testDirectory.exists()) {\r\n            if (testDirectory.mkdir()) {\r\n                System.out.println(&quot;Directory: &quot; + path + &quot; is created!&quot;);\r\n                return reportFileLocation;\r\n            } else {\r\n                System.out.println(&quot;Failed to create directory: &quot; + path);\r\n                return System.getProperty(&quot;user.dir&quot;);\r\n            }\r\n        } else {\r\n            System.out.println(&quot;Directory already exists: &quot; + path);\r\n        }\r\n        return reportFileLocation;\r\n    }\r\n}\r\n\r\n```\r\n\r\n**ExtentTestManager.java**\r\n\r\n```\r\npackage utils;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport com.aventstack.extentreports.ExtentReports;\r\nimport com.aventstack.extentreports.ExtentTest;\r\n\r\n\r\npublic class ExtentTestManager {\r\n    static Map&lt;Long, ExtentTest&gt; extentTestMap = new HashMap&lt;&gt;();\r\n    static ExtentReports extent = ExtentManager.getInstance();\r\n\r\n    public static synchronized ExtentTest getTest() {\r\n        return extentTestMap.get(Thread.currentThread().getId());\r\n    }\r\n\r\n    public static synchronized void endTest() {\r\n        extent.flush();\r\n    }\r\n\r\n    public static synchronized ExtentTest startTest(String testName) {\r\n        ExtentTest test = extent.createTest(testName);\r\n        extentTestMap.put(Thread.currentThread().getId(), test);\r\n        return test;\r\n    }\r\n}\r\n\r\n```\r\n\r\n**TestListener.java**\r\n\r\n```\r\npackage utils;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.io.PrintWriter;\r\nimport java.io.StringWriter;\r\n\r\nimport org.apache.commons.io.FileUtils;\r\nimport org.openqa.selenium.OutputType;\r\nimport org.openqa.selenium.TakesScreenshot;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.testng.ITestContext;\r\nimport org.testng.ITestListener;\r\nimport org.testng.ITestResult;\r\n\r\nimport com.aventstack.extentreports.Status;\r\n\r\nimport tests.TestBase;\r\nimport utils.ExtentManager;\r\nimport utils.ExtentTestManager;\r\n\r\npublic class TestListener extends TestBase implements ITestListener {\r\n\r\n    public void onStart(ITestContext context) {\r\n        System.out.println(&quot;*** Test Suite &quot; + context.getName() + &quot; started ***&quot;);\r\n        System.setProperty(&quot;org.freemarker.loggerLibrary&quot;, &quot;none&quot;);\r\n    }\r\n\r\n    public void onFinish(ITestContext context) {\r\n        System.out.println((&quot;*** Test Suite &quot; + context.getName() + &quot; ending ***&quot;));\r\n        ExtentTestManager.endTest();\r\n        ExtentManager.getInstance().flush();\r\n    }\r\n\r\n    public void onTestStart(ITestResult result) {\r\n        System.out.println((&quot;*** Running test method &quot; + result.getMethod().getMethodName() + &quot;...&quot;));\r\n        ExtentTestManager.startTest(result.getMethod().getMethodName());\r\n    }\r\n\r\n    public void onTestSuccess(ITestResult result) {\r\n        System.out.println(&quot;*** Executed &quot; + result.getMethod().getMethodName() + &quot; test successfully...&quot;);\r\n        ExtentTestManager.getTest().log(Status.PASS, &quot;Test passed&quot;);\r\n    }\r\n\r\n    public void onTestFailure(ITestResult result) {\r\n        System.out.println(&quot;*** Executed &quot; + result.getMethod().getMethodName() + &quot; test FAILED...&quot;);\r\n        ExtentTestManager.getTest().log(Status.FAIL, &quot;Test Failed&quot;);\r\n        ExtentTestManager.getTest().fail(result.getThrowable());\r\n\r\n        StringWriter sw = new StringWriter();\r\n        result.getThrowable().printStackTrace(new PrintWriter(sw));\r\n        sw = null;\r\n\r\n        WebDriver driver = (WebDriver) result.getTestContext().getAttribute(&quot;driver&quot;);\r\n        String root = System.getProperty(&quot;user.dir&quot;);\r\n        TakesScreenshot ts = (TakesScreenshot) driver;\r\n        File ss = ts.getScreenshotAs(OutputType.FILE);\r\n        long random = System.currentTimeMillis();\r\n        String des = root + &quot;//target//screenshots//ss&quot; + result.getMethod().getMethodName() + random + &quot;.png&quot;;\r\n\r\n        try {\r\n            FileUtils.copyFile(ss, new File(des));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        ExtentTestManager.getTest().fail(&quot;Test skipped&quot;);\r\n        try {\r\n            ExtentTestManager.getTest().addScreenCaptureFromPath(des);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n    }\r\n\r\n    public void onTestSkipped(ITestResult result) {\r\n        System.out.println(&quot;*** Test &quot; + result.getMethod().getMethodName() + &quot; skipped...&quot;);\r\n        ExtentTestManager.getTest().log(Status.SKIP, &quot;Test Skipped&quot;);\r\n    }\r\n\r\n    public void onTestFailedButWithinSuccessPercentage(ITestResult result) {\r\n        System.out.println(&quot;*** Test failed but within percentage % &quot; + result.getMethod().getMethodName());\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","title":"Require Extent report to work in Offline Mode entirely due to internet restrictions","body":"<p>I am working on Java Selenium TestNG.\nSelenium 4.10.0\nTestNG 7.8.0</p>\n<p>I am trying to generate Extent Reports, but the CSS properties are not loaded, probably because of the internet restrictions I have.\nThe github CDN from which the CSS are taken are blocked in my organization, and would not be whitelisted. Is there a way where I can get the reports working good without internet? Any jars for css,etc are available? Or is there any alternative?\nPlease help!</p>\n<p>Note: I cannot use Maven, so all jars must be downloaded and then loaded into my IDE (IntelliJ)</p>\n<p>Extent Report dependencies (jar files):\nextentreports-4.0.9\nfreemarker-2.3.23\nbson-3.3.0\ngson-2.8.5\nhttpclient-4.5.2\nhttpcore-4.4.4\nhttpmime-4.5.2\nmongodb-driver-3.3.0\nmongodb-driver-core-3.3.0\ncommons-codec-1.9.0\ncommons-logging-1.2</p>\n<p>Code I tried:\n<strong>TestBase.java (Base Class)</strong></p>\n<pre><code>package tests;\n\nimport com.aventstack.extentreports.ExtentReports;\nimport com.aventstack.extentreports.ExtentTest;\nimport org.apache.commons.io.FileUtils;\nimport org.openqa.selenium.OutputType;\nimport org.openqa.selenium.TakesScreenshot;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.edge.EdgeDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.testng.ITestContext;\nimport org.testng.annotations.Listeners;\nimport utils.ExtentManager;\nimport utils.ExtentTestManager;\nimport utils.TestListener;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.time.Duration;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Properties;\nimport java.util.Set;\n\n@Listeners(TestListener.class)\npublic class TestBase {\n    public static WebDriver driver;\n    public static Properties prop;\n\n    public static int TIMEOUT = 60;\n\n    public TestBase() {\n        try {\n            prop = new Properties();\n            FileInputStream fis = new FileInputStream(System.getProperty(&quot;user.dir&quot;) + &quot;/src/testDAta/config.properties&quot;);\n            prop.load(fis);\n        } catch (Exception e) {\n            System.out.println(&quot;Exception: &quot; + e.getMessage());\n        }\n    }\n\n    public void setup(ITestContext context) {\n        System.setProperty(&quot;webdriver.edge.driver&quot;, System.getProperty(&quot;user.dir&quot;) + prop.getProperty(&quot;edge.path&quot;));\n        driver = new EdgeDriver();\n        driver.manage().window().maximize();\n        context.setAttribute(&quot;driver&quot;, driver);\n    }\n    public void getURL(String url){\n        if (url.equalsIgnoreCase(&quot;google&quot;)) {\n            driver.get(prop.getProperty(&quot;web.urlG&quot;));\n        } else if (url.equalsIgnoreCase(&quot;yahoo&quot;)) {\n            driver.get(prop.getProperty(&quot;web.urlY&quot;));\n        } else {\n            System.out.println(&quot;none!&quot;);\n        }\n    }\n\n    public void waitAndClickElement(WebElement element) {\n        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(TIMEOUT));\n        wait.until(ExpectedConditions.elementToBeClickable(element)).click();\n    }\n    public void waitForElementToAppear(WebElement element){\n        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(TIMEOUT));\n        wait.until(ExpectedConditions.visibilityOf(element));\n    }\n\n    public void switchWindow(int idx){\n        Set&lt;String&gt; allHandles = driver.getWindowHandles();\n        List&lt;String&gt; handlesList = new ArrayList&lt;&gt;(allHandles);\n        System.out.println(&quot;Handles: &quot; + handlesList);\n        driver.switchTo().window(handlesList.get(idx));\n\n    }\n    public void captureScreenshot(String screenshotName){\n        try{\n            TakesScreenshot ts = (TakesScreenshot) driver;\n            File srcFile = ts.getScreenshotAs(OutputType.FILE);\n            String destPath = System.getProperty(&quot;user.dir&quot;) + &quot;/screenshots/&quot; + screenshotName + &quot;.png&quot;;\n            File destFile = new File(destPath);\n            FileUtils.copyFile(srcFile, destFile);\n        }catch (IOException e){\n            e.printStackTrace();\n        }\n    }\n}\n\n</code></pre>\n<p><strong>HomePage.java (PageObject file)</strong></p>\n<pre><code>package pages;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.FindBy;\nimport org.openqa.selenium.support.PageFactory;\nimport tests.TestBase;\n\npublic class HomePage extends TestBase {\n    public WebDriver driver;\n    public HomePage(WebDriver driver){\n//        this.driver = driver;\n        PageFactory.initElements(driver, this);\n    }\n\n    @FindBy(id = &quot;getwebsitebtn&quot;)\n    WebElement txtLink;\n\n    @FindBy(xpath = &quot;//*[text()='Get Started for Free']&quot;)\n    WebElement getFreeBtn;\n\n    public void linkTest(){\n        waitAndClickElement(txtLink);\n        switchWindow(1);\n        waitAndClickElement(getFreeBtn);\n    }\n\n}\n\n</code></pre>\n<p><strong>TestFile.java (Test file)</strong></p>\n<pre><code>package tests;\n\nimport com.aventstack.extentreports.ExtentTest;\nimport com.aventstack.extentreports.Status;\nimport org.testng.ITestContext;\nimport org.testng.annotations.BeforeClass;\nimport org.testng.annotations.Test;\nimport pages.HomePage;\nimport utils.ExtentTestManager;\n\nimport java.io.IOException;\n\npublic class TestFile extends TestBase{\n\n\n    @BeforeClass\n    public void setItUp(ITestContext context){\n        setup(context);\n    }\n\n    public static ExtentTest extentTest;\n    @Test\n    public void urlTest() throws IOException {\n//        extentTest = ExtentTestManager.getTest();\n        // Call the setup method to initialize the driver\n//        getURL(&quot;Yahoo&quot;); // You can change this to &quot;Google&quot; or other URLs as needed\n        extentTest = ExtentTestManager.getTest();\n        getURL(&quot;Yahoo&quot;);\n\n        HomePage hp = new HomePage(driver); // Initialize the HomePage object after the driver is set up\n        hp.linkTest();\n        extentTest.log(Status.INFO, &quot;Clicked on Links&quot;);\n        captureScreenshot(&quot;snap1&quot;);\n        System.out.println(System.getProperty(&quot;user.dir&quot;));\n        extentTest.addScreenCaptureFromPath(System.getProperty(&quot;user.dir&quot;) + &quot;/screenshots/snap1.png&quot;, &quot;snapshot&quot;);\n        ExtentTestManager.endTest();\n    }\n\n}\n\n</code></pre>\n<p><strong>testng.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\n&lt;suite name=&quot;All Test Suite&quot;&gt;\n    &lt;test verbose=&quot;2&quot; preserve-order=&quot;true&quot; name=&quot;E:/MyCode/frmwrk&quot;&gt;\n        &lt;classes&gt;&lt;class name=&quot;tests.TestFile&quot;&gt;\n            &lt;methods&gt;&lt;include name=&quot;urlTest&quot;/&gt;\n            &lt;/methods&gt;\n        &lt;/class&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n<p><strong>ExtentManager.java</strong></p>\n<pre><code>package utils;\n\nimport java.io.File;\n\nimport com.aventstack.extentreports.ExtentReports;\nimport com.aventstack.extentreports.reporter.ExtentSparkReporter;\nimport com.aventstack.extentreports.reporter.configuration.Theme;\n\npublic class ExtentManager {\n    private static ExtentReports extent;\n    private static String reportFileName = &quot;Test-Automaton-Report&quot; + &quot;.html&quot;;\n    private static String fileSeperator = System.getProperty(&quot;file.separator&quot;);\n    private static String reportFilepath = System.getProperty(&quot;user.dir&quot;) + fileSeperator + &quot;TestReport&quot;;\n    private static String reportFileLocation = reportFilepath + fileSeperator + reportFileName;\n\n    public static ExtentReports getInstance() {\n        if (extent == null)\n            createInstance();\n        return extent;\n    }\n\n    // Create an extent report instance\n    public static ExtentReports createInstance() {\n        String fileName = getReportPath(reportFilepath);\n\n        ExtentSparkReporter htmlReporter = new ExtentSparkReporter(fileName);\n        htmlReporter.config().setTheme(Theme.DARK);\n        htmlReporter.config().setDocumentTitle(reportFileName);\n        htmlReporter.config().setReportName(reportFileName);\n        htmlReporter.config().setTimeStampFormat(&quot;MMM dd, yyyy HH:mm:ss&quot;);\n\n        extent = new ExtentReports();\n        extent.attachReporter(htmlReporter);\n\n        return extent;\n    }\n\n    // Create the report path\n    private static String getReportPath(String path) {\n        File testDirectory = new File(path);\n        if (!testDirectory.exists()) {\n            if (testDirectory.mkdir()) {\n                System.out.println(&quot;Directory: &quot; + path + &quot; is created!&quot;);\n                return reportFileLocation;\n            } else {\n                System.out.println(&quot;Failed to create directory: &quot; + path);\n                return System.getProperty(&quot;user.dir&quot;);\n            }\n        } else {\n            System.out.println(&quot;Directory already exists: &quot; + path);\n        }\n        return reportFileLocation;\n    }\n}\n\n</code></pre>\n<p><strong>ExtentTestManager.java</strong></p>\n<pre><code>package utils;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport com.aventstack.extentreports.ExtentReports;\nimport com.aventstack.extentreports.ExtentTest;\n\n\npublic class ExtentTestManager {\n    static Map&lt;Long, ExtentTest&gt; extentTestMap = new HashMap&lt;&gt;();\n    static ExtentReports extent = ExtentManager.getInstance();\n\n    public static synchronized ExtentTest getTest() {\n        return extentTestMap.get(Thread.currentThread().getId());\n    }\n\n    public static synchronized void endTest() {\n        extent.flush();\n    }\n\n    public static synchronized ExtentTest startTest(String testName) {\n        ExtentTest test = extent.createTest(testName);\n        extentTestMap.put(Thread.currentThread().getId(), test);\n        return test;\n    }\n}\n\n</code></pre>\n<p><strong>TestListener.java</strong></p>\n<pre><code>package utils;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport java.io.StringWriter;\n\nimport org.apache.commons.io.FileUtils;\nimport org.openqa.selenium.OutputType;\nimport org.openqa.selenium.TakesScreenshot;\nimport org.openqa.selenium.WebDriver;\nimport org.testng.ITestContext;\nimport org.testng.ITestListener;\nimport org.testng.ITestResult;\n\nimport com.aventstack.extentreports.Status;\n\nimport tests.TestBase;\nimport utils.ExtentManager;\nimport utils.ExtentTestManager;\n\npublic class TestListener extends TestBase implements ITestListener {\n\n    public void onStart(ITestContext context) {\n        System.out.println(&quot;*** Test Suite &quot; + context.getName() + &quot; started ***&quot;);\n        System.setProperty(&quot;org.freemarker.loggerLibrary&quot;, &quot;none&quot;);\n    }\n\n    public void onFinish(ITestContext context) {\n        System.out.println((&quot;*** Test Suite &quot; + context.getName() + &quot; ending ***&quot;));\n        ExtentTestManager.endTest();\n        ExtentManager.getInstance().flush();\n    }\n\n    public void onTestStart(ITestResult result) {\n        System.out.println((&quot;*** Running test method &quot; + result.getMethod().getMethodName() + &quot;...&quot;));\n        ExtentTestManager.startTest(result.getMethod().getMethodName());\n    }\n\n    public void onTestSuccess(ITestResult result) {\n        System.out.println(&quot;*** Executed &quot; + result.getMethod().getMethodName() + &quot; test successfully...&quot;);\n        ExtentTestManager.getTest().log(Status.PASS, &quot;Test passed&quot;);\n    }\n\n    public void onTestFailure(ITestResult result) {\n        System.out.println(&quot;*** Executed &quot; + result.getMethod().getMethodName() + &quot; test FAILED...&quot;);\n        ExtentTestManager.getTest().log(Status.FAIL, &quot;Test Failed&quot;);\n        ExtentTestManager.getTest().fail(result.getThrowable());\n\n        StringWriter sw = new StringWriter();\n        result.getThrowable().printStackTrace(new PrintWriter(sw));\n        sw = null;\n\n        WebDriver driver = (WebDriver) result.getTestContext().getAttribute(&quot;driver&quot;);\n        String root = System.getProperty(&quot;user.dir&quot;);\n        TakesScreenshot ts = (TakesScreenshot) driver;\n        File ss = ts.getScreenshotAs(OutputType.FILE);\n        long random = System.currentTimeMillis();\n        String des = root + &quot;//target//screenshots//ss&quot; + result.getMethod().getMethodName() + random + &quot;.png&quot;;\n\n        try {\n            FileUtils.copyFile(ss, new File(des));\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        ExtentTestManager.getTest().fail(&quot;Test skipped&quot;);\n        try {\n            ExtentTestManager.getTest().addScreenCaptureFromPath(des);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n\n    }\n\n    public void onTestSkipped(ITestResult result) {\n        System.out.println(&quot;*** Test &quot; + result.getMethod().getMethodName() + &quot; skipped...&quot;);\n        ExtentTestManager.getTest().log(Status.SKIP, &quot;Test Skipped&quot;);\n    }\n\n    public void onTestFailedButWithinSuccessPercentage(ITestResult result) {\n        System.out.println(&quot;*** Test failed but within percentage % &quot; + result.getMethod().getMethodName());\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","swagger","openapi","openapi-generator"],"owner":{"account_id":12634959,"reputation":222,"user_id":9184784,"display_name":"tyb9900"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":449,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691834283,"creation_date":1691834283,"question_id":76888744,"body_markdown":"I have an OAS YAML file, and the Maven plugin generates POJO classes for me. \r\n\r\nHowever, it adds words to the class names of the POJO classes. In the OAS, the schema is defined with the name &quot;ApiResponse,&quot; but the plugin generates it as &quot;ModelApiResponse&quot; in the Java class. \r\n\r\nHow should I configure the plugin to create a POJO class with the name specified in the OAS?\r\n\r\nThe current config of the plugin is:\r\n\r\n    &lt;plugin&gt;\r\n    \t &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n    \t &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n    \t &lt;version&gt;6.6.0&lt;/version&gt;\r\n    \t &lt;executions&gt;\r\n    \t\t&lt;execution&gt;\r\n    \t\t\t&lt;id&gt;target-spec&lt;/id&gt;\r\n    \t\t\t   &lt;goals&gt;\r\n    \t\t\t   &lt;goal&gt;generate&lt;/goal&gt;\r\n    \t\t\t   &lt;/goals&gt;\r\n    \t\t  &lt;configuration&gt;\r\n    \t\t\t&lt;inputSpec&gt;${project.basedir}/src/main/resources/petstore.yaml&lt;/inputSpec&gt;\r\n    \t\t    &lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n    \t\t\t&lt;modelPackage&gt;com.petstorespringapi.stub.target&lt;/modelPackage&gt;\r\n    \t\t\t&lt;generateApis&gt;false&lt;/generateApis&gt;\r\n    \t\t\t&lt;generateSupportingFiles&gt;false&lt;/generateSupportingFiles&gt;\r\n    \t\t\t&lt;generateApiDocumentation&gt;false&lt;/generateApiDocumentation&gt;\r\n    \t     &lt;/configuration&gt;\r\n    \t    &lt;/execution&gt;\r\n       &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\n\r\nHere is my petstore.yml file:\r\n\r\n    openapi: 3.0.0\r\n    info:\r\n      version: 1.0.0\r\n      title: Swagger Petstore\r\n    paths:\r\n      &#39;/pet/{petId}/uploadImage&#39;:\r\n        post:\r\n          tags:\r\n            - pet\r\n          summary: Uploads an image\r\n          description: &#39;&#39;\r\n          operationId: uploadFile\r\n          parameters:\r\n            - name: petId\r\n              in: path\r\n              description: ID of pet to update\r\n              required: true\r\n              schema:\r\n                type: integer\r\n                format: int64\r\n          requestBody:\r\n            content:\r\n              multipart/form-data:\r\n                schema:\r\n                  type: object\r\n                  properties:\r\n                    additionalMetadata:\r\n                      description: Additional data to pass to server\r\n                      type: string\r\n                    file:\r\n                      description: file to upload\r\n                      type: string\r\n                      format: binary\r\n          responses:\r\n            &#39;200&#39;:\r\n              description: successful operation\r\n              content:\r\n                application/json:\r\n                  schema:\r\n                    &#39;$ref&#39;: &#39;#/components/schemas/ApiResponse&#39;\r\n    components:\r\n      schemas:\r\n        ApiResponse:\r\n          type: object\r\n          properties:\r\n            code:\r\n              type: integer\r\n              format: int32\r\n            type:\r\n              type: string\r\n            message:\r\n              type: string\r\n\r\n\r\nHere is the generated class:\r\n\r\n\r\n    /**\r\n     * ModelApiResponse\r\n     */\r\n    \r\n    @JsonTypeName(&quot;ApiResponse&quot;)\r\n    @Generated(value = &quot;org.openapitools.codegen.languages.SpringCodegen&quot;, date = &quot;2023-08-12T11:49:39.983257+02:00[Europe/Copenhagen]&quot;)\r\n    public class ModelApiResponse {}","title":"Why does the Open API Generator produce different class names from the ones in the OAS?","body":"<p>I have an OAS YAML file, and the Maven plugin generates POJO classes for me.</p>\n<p>However, it adds words to the class names of the POJO classes. In the OAS, the schema is defined with the name &quot;ApiResponse,&quot; but the plugin generates it as &quot;ModelApiResponse&quot; in the Java class.</p>\n<p>How should I configure the plugin to create a POJO class with the name specified in the OAS?</p>\n<p>The current config of the plugin is:</p>\n<pre><code>&lt;plugin&gt;\n     &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n     &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n     &lt;version&gt;6.6.0&lt;/version&gt;\n     &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;target-spec&lt;/id&gt;\n               &lt;goals&gt;\n               &lt;goal&gt;generate&lt;/goal&gt;\n               &lt;/goals&gt;\n          &lt;configuration&gt;\n            &lt;inputSpec&gt;${project.basedir}/src/main/resources/petstore.yaml&lt;/inputSpec&gt;\n            &lt;generatorName&gt;spring&lt;/generatorName&gt;\n            &lt;modelPackage&gt;com.petstorespringapi.stub.target&lt;/modelPackage&gt;\n            &lt;generateApis&gt;false&lt;/generateApis&gt;\n            &lt;generateSupportingFiles&gt;false&lt;/generateSupportingFiles&gt;\n            &lt;generateApiDocumentation&gt;false&lt;/generateApiDocumentation&gt;\n         &lt;/configuration&gt;\n        &lt;/execution&gt;\n   &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Here is my petstore.yml file:</p>\n<pre><code>openapi: 3.0.0\ninfo:\n  version: 1.0.0\n  title: Swagger Petstore\npaths:\n  '/pet/{petId}/uploadImage':\n    post:\n      tags:\n        - pet\n      summary: Uploads an image\n      description: ''\n      operationId: uploadFile\n      parameters:\n        - name: petId\n          in: path\n          description: ID of pet to update\n          required: true\n          schema:\n            type: integer\n            format: int64\n      requestBody:\n        content:\n          multipart/form-data:\n            schema:\n              type: object\n              properties:\n                additionalMetadata:\n                  description: Additional data to pass to server\n                  type: string\n                file:\n                  description: file to upload\n                  type: string\n                  format: binary\n      responses:\n        '200':\n          description: successful operation\n          content:\n            application/json:\n              schema:\n                '$ref': '#/components/schemas/ApiResponse'\ncomponents:\n  schemas:\n    ApiResponse:\n      type: object\n      properties:\n        code:\n          type: integer\n          format: int32\n        type:\n          type: string\n        message:\n          type: string\n</code></pre>\n<p>Here is the generated class:</p>\n<pre><code>/**\n * ModelApiResponse\n */\n\n@JsonTypeName(&quot;ApiResponse&quot;)\n@Generated(value = &quot;org.openapitools.codegen.languages.SpringCodegen&quot;, date = &quot;2023-08-12T11:49:39.983257+02:00[Europe/Copenhagen]&quot;)\npublic class ModelApiResponse {}\n</code></pre>\n"},{"tags":["java","intellij-idea","jar","obfuscation"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":1,"creation_date":1616682847,"post_id":66801590,"comment_id":118084524,"body_markdown":"Please follow: [Etiquette for answering your own question](https://meta.stackexchange.com/questions/17845/etiquette-for-answering-your-own-question), so rewrite your question to something like: &quot;How can I obfuscate a jar in IntelliJ&quot;, and then answer your own question with the body you currently have. (It should still read like a Q&amp;A)","body":"Please follow: <a href=\"https://meta.stackexchange.com/questions/17845/etiquette-for-answering-your-own-question\">Etiquette for answering your own question</a>, so rewrite your question to something like: &quot;How can I obfuscate a jar in IntelliJ&quot;, and then answer your own question with the body you currently have. (It should still read like a Q&amp;A)"}],"answers":[{"tags":[],"owner":{"account_id":2790946,"reputation":444,"user_id":2401191,"display_name":"Ahmad Alhilal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1616683379,"creation_date":1616683379,"answer_id":66801861,"question_id":66801590,"body_markdown":"I have been trying to obfuscate a jar file to protect it from retrieving the original source code.\r\n\r\nObfuscation in Intellij requires [IntelliGuard 2][1] plugin and [yuguard 3.0.0][2] (preferably [yguard-bundle-3.0.0.zip][3]).\r\n\r\n**The obfuscation process :**\r\n\r\n 1. **Generate Module** out of the project: File --&gt; project settings --&gt; Modules ( + new module and set proper out path)\r\n2. **Generate jar** file using Artifacts: File --&gt; project settings --&gt; Artifacts ( + JAR and naming configuration)\r\n\r\n3. [Generate Ant build][4] \r\n\r\n4. **Obfuscate the jar** file: File --&gt; project settings --&gt; Facets( + Obfuscation ), then choose the path to ygurad-bundle/lib/yuguard.jar, and choose the main class. See illustrating image below:\r\n\r\n[![enter image description here][5]][5]\r\n\r\nAfterward, build Artifacts (build--&gt; build Artifacts), then Obfuscate the jar file ( build--&gt; obfuscate jar, then choose the input jar and the output obfuscated jar).\r\n\r\nI couldn&#39;t find another way or resource to follow and do it the easy way, so I decided to share my experience.\r\n\r\n\r\n  [1]: https://plugins.jetbrains.com/plugin/10974-intelliguard-2\r\n  [2]: https://github.com/yWorks/yGuard/releases\r\n  [3]: https://github.com/yWorks/yGuard/releases/download/3.0.0/yguard-bundle-3.0.0.zip\r\n  [4]: https://www.jetbrains.com/help/idea/generating-ant-build-file.html\r\n  [5]: https://i.stack.imgur.com/3PHgG.png","title":"How can I obfuscate a jar in IntelliJ?","body":"<p>I have been trying to obfuscate a jar file to protect it from retrieving the original source code.</p>\n<p>Obfuscation in Intellij requires <a href=\"https://plugins.jetbrains.com/plugin/10974-intelliguard-2\" rel=\"nofollow noreferrer\">IntelliGuard 2</a> plugin and <a href=\"https://github.com/yWorks/yGuard/releases\" rel=\"nofollow noreferrer\">yuguard 3.0.0</a> (preferably <a href=\"https://github.com/yWorks/yGuard/releases/download/3.0.0/yguard-bundle-3.0.0.zip\" rel=\"nofollow noreferrer\">yguard-bundle-3.0.0.zip</a>).</p>\n<p><strong>The obfuscation process :</strong></p>\n<ol>\n<li><p><strong>Generate Module</strong> out of the project: File --&gt; project settings --&gt; Modules ( + new module and set proper out path)</p>\n</li>\n<li><p><strong>Generate jar</strong> file using Artifacts: File --&gt; project settings --&gt; Artifacts ( + JAR and naming configuration)</p>\n</li>\n<li><p><a href=\"https://www.jetbrains.com/help/idea/generating-ant-build-file.html\" rel=\"nofollow noreferrer\">Generate Ant build</a></p>\n</li>\n<li><p><strong>Obfuscate the jar</strong> file: File --&gt; project settings --&gt; Facets( + Obfuscation ), then choose the path to ygurad-bundle/lib/yuguard.jar, and choose the main class. See illustrating image below:</p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/3PHgG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3PHgG.png\" alt=\"enter image description here\" /></a></p>\n<p>Afterward, build Artifacts (build--&gt; build Artifacts), then Obfuscate the jar file ( build--&gt; obfuscate jar, then choose the input jar and the output obfuscated jar).</p>\n<p>I couldn't find another way or resource to follow and do it the easy way, so I decided to share my experience.</p>\n"}],"owner":{"account_id":2790946,"reputation":444,"user_id":2401191,"display_name":"Ahmad Alhilal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5274,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":66801861,"answer_count":1,"score":2,"last_activity_date":1691834256,"creation_date":1616682478,"question_id":66801590,"body_markdown":"I found out that an executable jar file can be decompiled to retrieve the original source code using [Java Decompiler][1], which allows decompiling and browsing the source with the JD-GUI.\r\n\r\nI&#39;m trying to obfuscate a jar file to protect it from retrieving the original source code. \r\n\r\nI have tried proguard but sounds a little bit time consuming!!\r\nI then tried IntelliGuard 2 plugin but there was no information about what proguard and yguard and how to use them!! \r\n\r\nI read some resources that I need to generate an Ant build file for proguard or yguard to be able to obfuscate the jar file. Then I stuck a little bit on generating a jar file to obfuscate. \r\n\r\n**Is there an easy and straightforward way to generate a jar and obfuscate it?**\r\n\r\n\r\n  [1]: http://java-decompiler.github.io/","title":"How can I obfuscate a jar in IntelliJ?","body":"<p>I found out that an executable jar file can be decompiled to retrieve the original source code using <a href=\"http://java-decompiler.github.io/\" rel=\"nofollow noreferrer\">Java Decompiler</a>, which allows decompiling and browsing the source with the JD-GUI.</p>\n<p>I'm trying to obfuscate a jar file to protect it from retrieving the original source code.</p>\n<p>I have tried proguard but sounds a little bit time consuming!!\nI then tried IntelliGuard 2 plugin but there was no information about what proguard and yguard and how to use them!!</p>\n<p>I read some resources that I need to generate an Ant build file for proguard or yguard to be able to obfuscate the jar file. Then I stuck a little bit on generating a jar file to obfuscate.</p>\n<p><strong>Is there an easy and straightforward way to generate a jar and obfuscate it?</strong></p>\n"},{"tags":["java","xml","configuration","log4j","environment-variables"],"comments":[{"owner":{"account_id":11447,"reputation":1067,"user_id":22070,"accept_rate":50,"display_name":"Derek Lewis"},"score":0,"creation_date":1443646019,"post_id":201188,"comment_id":53582059,"body_markdown":"I just commented on the most upvoted answer and explained my reasoning.  I&#39;ve also just now upvoted the answer I accepted, for what it&#39;s worth.","body":"I just commented on the most upvoted answer and explained my reasoning.  I&#39;ve also just now upvoted the answer I accepted, for what it&#39;s worth."}],"answers":[{"tags":[],"owner":{"account_id":2150,"reputation":3289,"user_id":2964,"accept_rate":67,"display_name":"Einar"},"down_vote_count":4,"up_vote_count":59,"is_accepted":false,"score":55,"last_activity_date":1223995977,"creation_date":1223995977,"answer_id":201489,"question_id":201188,"body_markdown":"I tried to do that recently and couldn&#39;t get it to work. What I ended up doing is sending a variable at startup. So say you have an environment variable called $LOG_LEVEL:\r\n\r\n    &lt;level value=&quot;${log_level}&quot; /&gt;\r\n\r\nand at startup...\r\n\r\n    java -Dlog_level=$LOG_LEVEL your_app","title":"Using system environment variables in log4j xml configuration","body":"<p>I tried to do that recently and couldn't get it to work. What I ended up doing is sending a variable at startup. So say you have an environment variable called $LOG_LEVEL:</p>\n\n<pre><code>&lt;level value=\"${log_level}\" /&gt;\n</code></pre>\n\n<p>and at startup...</p>\n\n<pre><code>java -Dlog_level=$LOG_LEVEL your_app\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11511,"reputation":9525,"user_id":22227,"accept_rate":62,"display_name":"Martin Probst"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1224055472,"creation_date":1224055472,"answer_id":203941,"question_id":201188,"body_markdown":"I think this is not supported, but basically you can do two things to bring in your environment variables:\r\n\r\n 1. Use System.setProperty before Log4J gets configured\r\n \r\n 2. Convert (your) environment variables to system properties in your launcher\r\n\r\nThe first option basically boils down to this:\r\n\r\n    for (Map&lt;String,String&gt;.Entry entry : System.getenv().entrySet()) {\r\n      System.setProperty(entry.getKey(), entry.getValue());\r\n    }\r\n\r\n... but the question is of course where to put this code. In particular if you&#39;re running within some sort of Tomcat container or similar, this might be troublesome.\r\n\r\nThe other largely depends on your environment. Basically if you have a shell script that starts your app, you can write some shell magic to set all environment variables as properties, or just the ones you need, e.g.:\r\n\r\n    java -DMY_ENV=$MY_ENV -DMY_OTHER_ENV=$MY_OTHER_ENV -cp ... com.example.Main\r\n\r\nIt&#39;s also possible to alter your server startup scripts to support this, e.g. catalina.sh or similar.","title":"Using system environment variables in log4j xml configuration","body":"<p>I think this is not supported, but basically you can do two things to bring in your environment variables:</p>\n\n<ol>\n<li><p>Use System.setProperty before Log4J gets configured</p></li>\n<li><p>Convert (your) environment variables to system properties in your launcher</p></li>\n</ol>\n\n<p>The first option basically boils down to this:</p>\n\n<pre><code>for (Map&lt;String,String&gt;.Entry entry : System.getenv().entrySet()) {\n  System.setProperty(entry.getKey(), entry.getValue());\n}\n</code></pre>\n\n<p>... but the question is of course where to put this code. In particular if you're running within some sort of Tomcat container or similar, this might be troublesome.</p>\n\n<p>The other largely depends on your environment. Basically if you have a shell script that starts your app, you can write some shell magic to set all environment variables as properties, or just the ones you need, e.g.:</p>\n\n<pre><code>java -DMY_ENV=$MY_ENV -DMY_OTHER_ENV=$MY_OTHER_ENV -cp ... com.example.Main\n</code></pre>\n\n<p>It's also possible to alter your server startup scripts to support this, e.g. catalina.sh or similar.</p>\n"},{"tags":[],"owner":{"account_id":936504,"reputation":926,"user_id":965342,"accept_rate":20,"display_name":"Daniel Estrada"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1392995989,"creation_date":1392995989,"answer_id":21938229,"question_id":201188,"body_markdown":"You need to put a colon between env and the name of the variable, like this:\r\n\r\n    &lt;level value=&quot;${env:LOG_LEVEL}&quot; /&gt;","title":"Using system environment variables in log4j xml configuration","body":"<p>You need to put a colon between env and the name of the variable, like this:</p>\n\n<pre><code>&lt;level value=\"${env:LOG_LEVEL}\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1360035,"reputation":7094,"user_id":1297578,"accept_rate":82,"display_name":"Shoham"},"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1427820056,"creation_date":1427636943,"answer_id":29329899,"question_id":201188,"body_markdown":"This syntax is documented only in log4j 2.X so make sure you are using the correct version.  It does not work on the 1.X versions.\r\n\r\n        &lt;Appenders&gt;\r\n        &lt;File name=&quot;file&quot; fileName=&quot;${env:LOG_PATH}&quot;&gt;\r\n            &lt;PatternLayout&gt;\r\n                &lt;Pattern&gt;%d %p %c{1.} [%t] %m %ex%n&lt;/Pattern&gt;\r\n            &lt;/PatternLayout&gt;\r\n        &lt;/File&gt;\r\n    &lt;/Appenders&gt;","title":"Using system environment variables in log4j xml configuration","body":"<p>This syntax is documented only in log4j 2.X so make sure you are using the correct version.  It does not work on the 1.X versions.</p>\n\n<pre><code>    &lt;Appenders&gt;\n    &lt;File name=\"file\" fileName=\"${env:LOG_PATH}\"&gt;\n        &lt;PatternLayout&gt;\n            &lt;Pattern&gt;%d %p %c{1.} [%t] %m %ex%n&lt;/Pattern&gt;\n        &lt;/PatternLayout&gt;\n    &lt;/File&gt;\n&lt;/Appenders&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2271854,"reputation":423,"user_id":1999025,"accept_rate":45,"display_name":"tkolleh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454519950,"creation_date":1454519950,"answer_id":35183593,"question_id":201188,"body_markdown":"Create a system variable. I prefer to use setenv.bat for such variables.\r\n\r\n    @echo off\r\n    rem app specific log dir\r\n    set &quot;APP_LOG_ROOTDIR=../app/app-log&quot;\r\n    exit /b 0\r\n\r\nAdd reference in log4j.xml file\r\n\r\n    &lt;appender name=&quot;fileAppender&quot; class=&quot;org.apache.log4j.RollingFileAppender&quot;&gt;\r\n      &lt;param name=&quot;Threshold&quot; value=&quot;DEBUG&quot; /&gt;\r\n      &lt;param name=&quot;MaxFileSize&quot; value=&quot;512KB&quot; /&gt;\r\n      &lt;param name=&quot;MaxBackupIndex&quot; value=&quot;10&quot; /&gt;\r\n      &lt;param name=&quot;File&quot; value=&quot;${APP_LOG_ROOTDIR}/app.log&quot;/&gt;\r\n      &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n       &lt;param name=&quot;ConversionPattern&quot; value=&quot;%d %-5p %c{1} %m %n&quot; /&gt;\r\n      &lt;/layout&gt;\r\n    &lt;/appender&gt;","title":"Using system environment variables in log4j xml configuration","body":"<p>Create a system variable. I prefer to use setenv.bat for such variables.</p>\n\n<pre><code>@echo off\nrem app specific log dir\nset \"APP_LOG_ROOTDIR=../app/app-log\"\nexit /b 0\n</code></pre>\n\n<p>Add reference in log4j.xml file</p>\n\n<pre><code>&lt;appender name=\"fileAppender\" class=\"org.apache.log4j.RollingFileAppender\"&gt;\n  &lt;param name=\"Threshold\" value=\"DEBUG\" /&gt;\n  &lt;param name=\"MaxFileSize\" value=\"512KB\" /&gt;\n  &lt;param name=\"MaxBackupIndex\" value=\"10\" /&gt;\n  &lt;param name=\"File\" value=\"${APP_LOG_ROOTDIR}/app.log\"/&gt;\n  &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;\n   &lt;param name=\"ConversionPattern\" value=\"%d %-5p %c{1} %m %n\" /&gt;\n  &lt;/layout&gt;\n&lt;/appender&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29211147,"reputation":1,"user_id":22379097,"display_name":"Thejas HM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691834141,"creation_date":1691834118,"answer_id":76888723,"question_id":201188,"body_markdown":"Just do this while calling the main program, it will solve the issue\r\n\r\n1. -DLOG4J_CONFIGURATION_FILE=P:\\conf\\TEST_FOLDER\\ssdf\\log4j2.xml -&gt; Path from where the log4j2.xml file to be read\r\n2. -DLOGDIRECTORY=P:\\conf\\TEST_FOLDER\\ssdf\\Final_log_Destination\\test.log -&gt; This is the variable inputted in the xml file\r\n3. Use the below in the xml file for the value to get changed\r\n\r\n&lt;property name=&quot;filevalue&quot;&gt;${sys:LOGDIRECTORY}&lt;/property&gt;","title":"Using system environment variables in log4j xml configuration","body":"<p>Just do this while calling the main program, it will solve the issue</p>\n<ol>\n<li>-DLOG4J_CONFIGURATION_FILE=P:\\conf\\TEST_FOLDER\\ssdf\\log4j2.xml -&gt; Path from where the log4j2.xml file to be read</li>\n<li>-DLOGDIRECTORY=P:\\conf\\TEST_FOLDER\\ssdf\\Final_log_Destination\\test.log -&gt; This is the variable inputted in the xml file</li>\n<li>Use the below in the xml file for the value to get changed</li>\n</ol>\n<p>${sys:LOGDIRECTORY}</p>\n"}],"owner":{"account_id":11447,"reputation":1067,"user_id":22070,"accept_rate":50,"display_name":"Derek Lewis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85589,"favorite_count":0,"down_vote_count":1,"up_vote_count":54,"accepted_answer_id":29329899,"answer_count":6,"score":53,"last_activity_date":1691834141,"creation_date":1223991764,"question_id":201188,"body_markdown":"Is it possible to reference system environment variables (as opposed to Java system properties) in a log4j xml configuration file?\r\n\r\nI&#39;d like to be able to do something like:\r\n\r\n    &lt;level value=&quot;${env.LOG_LEVEL}&quot; /&gt;\r\n\r\nand have it get that from the system environment variables, so I can avoid having to pass in so many things with -D parameters.","title":"Using system environment variables in log4j xml configuration","body":"<p>Is it possible to reference system environment variables (as opposed to Java system properties) in a log4j xml configuration file?</p>\n\n<p>I'd like to be able to do something like:</p>\n\n<pre><code>&lt;level value=\"${env.LOG_LEVEL}\" /&gt;\n</code></pre>\n\n<p>and have it get that from the system environment variables, so I can avoid having to pass in so many things with -D parameters.</p>\n"},{"tags":["java","spring","ms-word","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1658811371,"post_id":73114704,"comment_id":129137596,"body_markdown":"Biggest problem is to find the position of the new run. You cannot rely on &quot;TextToFind&quot; be in its own text-run. It could be a part of a text run (&quot;with TextToFind working&quot;) as well as split into multiple text-runs (&quot;Text&quot;&quot;To&quot;&quot;Find&quot;). Microsoft Word is very special in how it stores text-runs.","body":"Biggest problem is to find the position of the new run. You cannot rely on &quot;TextToFind&quot; be in its own text-run. It could be a part of a text run (&quot;with TextToFind working&quot;) as well as split into multiple text-runs (&quot;Text&quot;&quot;To&quot;&quot;Find&quot;). Microsoft Word is very special in how it stores text-runs."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1658811385,"post_id":73114704,"comment_id":129137599,"body_markdown":"Also, what is `XWPFTrackRun` in your code? What you would need is a special [XWPFParagraph.insertNewRun](https://poi.apache.org/apidocs/4.1/org/apache/poi/xwpf/usermodel/XWPFParagraph.html#insertNewRun-int-) for your `XWPFTrackRun`. See [XWPFParagraph.java](https://svn.apache.org/viewvc/poi/tags/REL_5_2_2/poi-ooxml/src/main/java/org/apache/poi/xwpf/usermodel/XWPFParagraph.java?view=markup#l1526) for how to code that. Much too broad for an answer here.","body":"Also, what is <code>XWPFTrackRun</code> in your code? What you would need is a special <a href=\"https://poi.apache.org/apidocs/4.1/org/apache/poi/xwpf/usermodel/XWPFParagraph.html#insertNewRun-int-\" rel=\"nofollow noreferrer\">XWPFParagraph.insertNewRun</a> for your <code>XWPFTrackRun</code>. See <a href=\"https://svn.apache.org/viewvc/poi/tags/REL_5_2_2/poi-ooxml/src/main/java/org/apache/poi/xwpf/usermodel/XWPFParagraph.java?view=markup#l1526\" rel=\"nofollow noreferrer\">XWPFParagraph.java</a> for how to code that. Much too broad for an answer here."},{"owner":{"account_id":19272771,"reputation":9,"user_id":14086391,"display_name":"Kane"},"score":0,"creation_date":1658829389,"post_id":73114704,"comment_id":129143338,"body_markdown":"@AxelRichter Thanks for your reply. `XWPFTrackRun` extends `XWPFRun` to insert text with track changes [XWPFTrackRun](https://stackoverflow.com/questions/71941703/apache-poi-insert-text-in-a-paragraph-and-view-track-changes-in-a-word-document) \nThe idea of ​​this development is to search for a specific word and just after add a new word `XWPFTrackRun` with track changes to accept or reject","body":"@AxelRichter Thanks for your reply. <code>XWPFTrackRun</code> extends <code>XWPFRun</code> to insert text with track changes <a href=\"https://stackoverflow.com/questions/71941703/apache-poi-insert-text-in-a-paragraph-and-view-track-changes-in-a-word-document\">XWPFTrackRun</a>  The idea of ​​this development is to search for a specific word and just after add a new word <code>XWPFTrackRun</code> with track changes to accept or reject"}],"answers":[{"tags":[],"owner":{"account_id":16176316,"reputation":1,"user_id":11678873,"display_name":"周志明"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691833488,"creation_date":1691832845,"answer_id":76888636,"question_id":73114704,"body_markdown":"you have solve the direction of write when it doesn&#39;t support &#39;insert&#39;,but it also doesn&#39;t support &quot;read&#39;s insert&quot;!\r\n\r\nso how to do the opposite operation? such as\r\n\r\n    para1.getRuns().forEach(x1 -&gt; {\r\n    //i can get deltext by using api &quot;                     x1.getCTR().getDelTextArray(0);\r\n    &quot;\r\n    //but i can&#39;t get inserttext by official api , because &quot;x1.getCTR().getInsTextArray(0)&quot; is unexisting!\r\n    \r\n    //And \r\n    &quot;x1.getCTR().getInstrTextArray(0)&quot; it doesn&#39;t work !\r\n    \r\n    \r\n    });","title":"Apache poi: insert run at specific position in paragraph","body":"<p>you have solve the direction of write when it doesn't support 'insert',but it also doesn't support &quot;read's insert&quot;!</p>\n<p>so how to do the opposite operation? such as</p>\n<pre><code>para1.getRuns().forEach(x1 -&gt; {\n//i can get deltext by using api &quot;                     x1.getCTR().getDelTextArray(0);\n&quot;\n//but i can't get inserttext by official api , because &quot;x1.getCTR().getInsTextArray(0)&quot; is unexisting!\n\n//And \n&quot;x1.getCTR().getInstrTextArray(0)&quot; it doesn't work !\n\n\n});\n</code></pre>\n"}],"owner":{"account_id":19272771,"reputation":9,"user_id":14086391,"display_name":"Kane"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":661,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691833488,"creation_date":1658779055,"question_id":73114704,"body_markdown":"I&#39;m working with Apache poi in java 11. I&#39;m trying to insert a new run (with control change) at a specific position in a paragraph but currently the run is inserted at the end of the paragraph.\r\n\r\nHere my code:\r\n\r\n```java\r\nprivate void insertCTRun(List&lt;XWPFParagraph&gt; paraList){\r\n\tfor (XWPFParagraph paragraph : paraList) {\r\n\t\tList&lt;XWPFRun&gt; runs = p.getRuns();\r\n\t\t// Loop runs\r\n\t\tfor (XWPFRun r : runs) {\r\n\t\t\tString text = r.getText(0);\r\n\t\t\t// Find specific text\r\n\t\t\tif (text != null &amp;&amp; text.contains(&quot;TextToFind&quot;)) {\r\n\r\n\t\t\t\tXmlCursor cursor = paragraph.getCTP().newCursor();\r\n\t\t\t\tcursor.toNextSibling();\r\n\r\n\t\t\t\t// Add a new track run\r\n\t\t\t\tXWPFTrackRun newCTRun = createInsRun(paragraph, SummaryCommonConstants.NAME_APP, new java.util.GregorianCalendar());\r\n\r\n\t\t\t\tnewCTRun.setText(&quot;NewText&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Add track change\r\nprivate static XWPFTrackRun createInsRun(XWPFParagraph paragraph, String author, java.util.Calendar date) {\r\n\tCTRunTrackChange trackChange = paragraph.getCTP().addNewIns();\r\n\ttrackChange.setAuthor(author);\r\n\ttrackChange.setDate(date);\r\n\ttrackChange.addNewR();\r\n\treturn new XWPFTrackRun(\r\n\t\t\ttrackChange,\r\n\t\t\ttrackChange.getRArray(0),\r\n\t\t\tparagraph\r\n\t);\r\n}\r\n\r\n// Model with track change properties\r\npublic class XWPFTrackRun extends XWPFRun {\r\n\r\n    private CTRunTrackChange trackChange;\r\n\r\n    public XWPFTrackRun(CTRunTrackChange trackChange, CTR run, IRunBody p) {\r\n        super(run, p);\r\n        this.trackChange = trackChange;\r\n    }\r\n    public String getAuthor() {\r\n        return this.trackChange.getAuthor();\r\n    }\r\n    public void setAuthor(String author) {\r\n        this.trackChange.setAuthor(author);\r\n    }\r\n    public java.util.Calendar getDate() {\r\n        return this.trackChange.getDate();\r\n    }\r\n    public void setDate(java.util.Calendar date) {\r\n        this.trackChange.setDate(date);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI would like to insert the run with a &quot;NewText&quot; after the text &quot;TextToFind&quot; but I get the following result:\r\n\r\n    This is an example with TextToFind working with apache poi NewText\r\n\r\nIs there a way to insert the run &quot;NewText&quot; at that specific position?\r\n\r\nThanks in advance.","title":"Apache poi: insert run at specific position in paragraph","body":"<p>I'm working with Apache poi in java 11. I'm trying to insert a new run (with control change) at a specific position in a paragraph but currently the run is inserted at the end of the paragraph.</p>\n<p>Here my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void insertCTRun(List&lt;XWPFParagraph&gt; paraList){\n    for (XWPFParagraph paragraph : paraList) {\n        List&lt;XWPFRun&gt; runs = p.getRuns();\n        // Loop runs\n        for (XWPFRun r : runs) {\n            String text = r.getText(0);\n            // Find specific text\n            if (text != null &amp;&amp; text.contains(&quot;TextToFind&quot;)) {\n\n                XmlCursor cursor = paragraph.getCTP().newCursor();\n                cursor.toNextSibling();\n\n                // Add a new track run\n                XWPFTrackRun newCTRun = createInsRun(paragraph, SummaryCommonConstants.NAME_APP, new java.util.GregorianCalendar());\n\n                newCTRun.setText(&quot;NewText&quot;);\n            }\n        }\n    }\n}\n\n// Add track change\nprivate static XWPFTrackRun createInsRun(XWPFParagraph paragraph, String author, java.util.Calendar date) {\n    CTRunTrackChange trackChange = paragraph.getCTP().addNewIns();\n    trackChange.setAuthor(author);\n    trackChange.setDate(date);\n    trackChange.addNewR();\n    return new XWPFTrackRun(\n            trackChange,\n            trackChange.getRArray(0),\n            paragraph\n    );\n}\n\n// Model with track change properties\npublic class XWPFTrackRun extends XWPFRun {\n\n    private CTRunTrackChange trackChange;\n\n    public XWPFTrackRun(CTRunTrackChange trackChange, CTR run, IRunBody p) {\n        super(run, p);\n        this.trackChange = trackChange;\n    }\n    public String getAuthor() {\n        return this.trackChange.getAuthor();\n    }\n    public void setAuthor(String author) {\n        this.trackChange.setAuthor(author);\n    }\n    public java.util.Calendar getDate() {\n        return this.trackChange.getDate();\n    }\n    public void setDate(java.util.Calendar date) {\n        this.trackChange.setDate(date);\n    }\n\n}\n</code></pre>\n<p>I would like to insert the run with a &quot;NewText&quot; after the text &quot;TextToFind&quot; but I get the following result:</p>\n<pre><code>This is an example with TextToFind working with apache poi NewText\n</code></pre>\n<p>Is there a way to insert the run &quot;NewText&quot; at that specific position?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":419956,"reputation":9055,"user_id":797390,"accept_rate":65,"display_name":"Jong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1353072182,"creation_date":1353072182,"answer_id":13417500,"question_id":13417163,"body_markdown":"You have an example [here][1].\r\n\r\n    mImage.writeToParcel(parcel, 0);\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/7326365/how-to-parcel-a-bitmap-in-android","title":"Parcel Bitmap - Android","body":"<p>You have an example <a href=\"https://stackoverflow.com/questions/7326365/how-to-parcel-a-bitmap-in-android\">here</a>.</p>\n\n<pre><code>mImage.writeToParcel(parcel, 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1707553,"reputation":328,"user_id":1566316,"display_name":"sercxjo"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1354698346,"creation_date":1354697164,"answer_id":13719248,"question_id":13417163,"body_markdown":"    public void writeToParcel(Parcel dest, int flags) {\r\n    ...\r\n        dest.writeValue(mImage);\r\n    }\r\n    private Category(Parcel in) {\r\n    ...\r\n        mImage= in.readParcelable(Bitmap.class.getClassLoader());\r\n    }\r\n\r\nThis will work even if `mImage==null`.\r\n","title":"Parcel Bitmap - Android","body":"<pre><code>public void writeToParcel(Parcel dest, int flags) {\n...\n    dest.writeValue(mImage);\n}\nprivate Category(Parcel in) {\n...\n    mImage= in.readParcelable(Bitmap.class.getClassLoader());\n}\n</code></pre>\n\n<p>This will work even if <code>mImage==null</code>.</p>\n"},{"tags":[],"owner":{"account_id":1985337,"reputation":1538,"user_id":1780737,"accept_rate":60,"display_name":"Ashish Sahu"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1425586349,"creation_date":1425586349,"answer_id":28886838,"question_id":13417163,"body_markdown":"**Try simply**\r\n    \r\n    public class MyVeryOwnParcelable  implements Parcelable {\r\n\t \r\n    //you can use every type of data even Arraylist\r\n\r\n    //change here (1)\r\n    public String ID;\r\n\tpublic Bitmap BITMAP_IMAGE;\r\n   \r\n    public MyVeryOwnParcelable  () {\r\n       \r\n    }\r\n\tpublic MyVeryOwnParcelable  (Parcel parcel) {\r\n    \t//change here (2)\r\n        this.ID= parcel.readString();\r\n        this.BITMAP_IMAGE=parcel.readParcelable(null);\r\n    }\r\n\r\n    @Override\r\n    public void writeToParcel(Parcel dest, int flags) {\r\n        //change here (3)\r\n        dest.writeString(ID);\r\n        dest.writeParcelable(BITMAP_IMAGE, flags);\r\n    }\r\n\r\n    @Override\r\n    public int describeContents() {\r\n        return 0;\r\n    }\r\n    // Method to recreate a Catch from a Parcel\r\n    public static Creator&lt;MyVeryOwnParcelable  &gt; CREATOR = new Creator&lt;MyVeryOwnParcelable  &gt;() {\r\n\r\n        @Override\r\n        public MyVeryOwnParcelable  createFromParcel(Parcel source) {\r\n            return new MyVeryOwnParcelable  (source);\r\n        }\r\n\r\n        @Override\r\n        public MyVeryOwnParcelable  [] newArray(int size) {\r\n            return new MyVeryOwnParcelable  [size];\r\n        }\r\n\r\n      };\r\n    }\r\n\r\n**Send simply**\r\n    \r\n    MyVeryOwnParcelable mp=new MyVeryOwnParcelable();\r\n    mp.ID=&quot;hello parcel&quot;;\r\n    mp.BITMAP_IMAGE=BitmapFactory.decodeResource(getResources(), R.drawable.myimage);\r\n\r\n    //put as normal\r\n    intent.putExtra(&quot;MY_DATA&quot;,mp);\r\n    \r\n    //get from intent\r\n    MyVeryOwnParcelable  my= (MyVeryOwnParcelable )   getIntent().getExtras().getParcelable(KEY.EXTRA_DATA);\r\n    //do anything with data\r\n\r\n    imageView.setImageBitmap(mp.BITMAP_IMAGE);\r\n\r\n**simply change &#39;MyVeryOwnParcelable&#39; according your needs l&#39;ll already indicate where change require** \r\n\r\nHope this will help someone\r\n","title":"Parcel Bitmap - Android","body":"<p><strong>Try simply</strong></p>\n\n<pre><code>public class MyVeryOwnParcelable  implements Parcelable {\n\n//you can use every type of data even Arraylist\n\n//change here (1)\npublic String ID;\npublic Bitmap BITMAP_IMAGE;\n\npublic MyVeryOwnParcelable  () {\n\n}\npublic MyVeryOwnParcelable  (Parcel parcel) {\n    //change here (2)\n    this.ID= parcel.readString();\n    this.BITMAP_IMAGE=parcel.readParcelable(null);\n}\n\n@Override\npublic void writeToParcel(Parcel dest, int flags) {\n    //change here (3)\n    dest.writeString(ID);\n    dest.writeParcelable(BITMAP_IMAGE, flags);\n}\n\n@Override\npublic int describeContents() {\n    return 0;\n}\n// Method to recreate a Catch from a Parcel\npublic static Creator&lt;MyVeryOwnParcelable  &gt; CREATOR = new Creator&lt;MyVeryOwnParcelable  &gt;() {\n\n    @Override\n    public MyVeryOwnParcelable  createFromParcel(Parcel source) {\n        return new MyVeryOwnParcelable  (source);\n    }\n\n    @Override\n    public MyVeryOwnParcelable  [] newArray(int size) {\n        return new MyVeryOwnParcelable  [size];\n    }\n\n  };\n}\n</code></pre>\n\n<p><strong>Send simply</strong></p>\n\n<pre><code>MyVeryOwnParcelable mp=new MyVeryOwnParcelable();\nmp.ID=\"hello parcel\";\nmp.BITMAP_IMAGE=BitmapFactory.decodeResource(getResources(), R.drawable.myimage);\n\n//put as normal\nintent.putExtra(\"MY_DATA\",mp);\n\n//get from intent\nMyVeryOwnParcelable  my= (MyVeryOwnParcelable )   getIntent().getExtras().getParcelable(KEY.EXTRA_DATA);\n//do anything with data\n\nimageView.setImageBitmap(mp.BITMAP_IMAGE);\n</code></pre>\n\n<p><strong>simply change 'MyVeryOwnParcelable' according your needs l'll already indicate where change require</strong> </p>\n\n<p>Hope this will help someone</p>\n"},{"tags":[],"owner":{"account_id":25349000,"reputation":1,"user_id":19166265,"display_name":"planetoxod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691832256,"creation_date":1691832256,"answer_id":76888599,"question_id":13417163,"body_markdown":"    constructor(parcel: Parcel) : this(\r\n        parcel.readInt(),\r\n        parcel.readString(),\r\n        parcel.readString(),\r\n        parcel.readString(),\r\n        parcel.readInt(),\r\n        parcel.readInt(),\r\n        parcel.readString(),\r\n        parcel.readTypedObject(Bitmap.CREATOR),\r\n        parcel.readTypedObject(Bitmap.CREATOR),\r\n        parcel.readString()\r\n    ) {\r\n    }\r\n\r\n    override fun describeContents(): Int {\r\n       // TODO(&quot;Not yet implemented&quot;)\r\n        return 0\r\n    }\r\n\r\n    override fun writeToParcel(p0: Parcel, p1: Int) {\r\n       // TODO(&quot;Not yet implemented&quot;)\r\n    }","title":"Parcel Bitmap - Android","body":"<pre><code>constructor(parcel: Parcel) : this(\n    parcel.readInt(),\n    parcel.readString(),\n    parcel.readString(),\n    parcel.readString(),\n    parcel.readInt(),\n    parcel.readInt(),\n    parcel.readString(),\n    parcel.readTypedObject(Bitmap.CREATOR),\n    parcel.readTypedObject(Bitmap.CREATOR),\n    parcel.readString()\n) {\n}\n\noverride fun describeContents(): Int {\n   // TODO(&quot;Not yet implemented&quot;)\n    return 0\n}\n\noverride fun writeToParcel(p0: Parcel, p1: Int) {\n   // TODO(&quot;Not yet implemented&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":1990458,"reputation":125,"user_id":1784581,"accept_rate":27,"display_name":"iShare"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9450,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":4,"score":5,"last_activity_date":1691832256,"creation_date":1353070885,"question_id":13417163,"body_markdown":"In the existing code I have following class to hold category details.\r\n\r\n   \r\n\r\n\r\n\r\n    import org.json.JSONObject;\r\n    import android.graphics.Bitmap;\r\n    import android.os.Parcel;\r\n    import android.os.Parcelable;\r\n    \r\n    public class Category  {\r\n\r\n\r\n    private String mIconURL;\r\n    private String mName;\r\n \r\n\r\n    \r\n    public Category() {\r\n        super();\r\n    }\r\n\r\n    public String getIconURL() {\r\n        return mIconURL;\r\n    }\r\n\r\n    \r\n    public void setIconURL(String iconURL) {\r\n        this.mIconURL = iconURL;\r\n    }\r\n\r\n    public String getName() {\r\n        return mName;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.mName = name;\r\n    }\r\n\r\n    @Override\r\n    public void writeToParcel(Parcel dest, int flags) {\r\n        super.writeToParcel(dest, flags);\r\n\r\n        dest.writeString(mIconURL);\r\n        dest.writeString(mName);\r\n      \r\n\r\n    }\r\n\r\n    public static final Parcelable.Creator&lt;Category&gt; CREATOR = new Parcelable.Creator&lt;Category&gt;() {\r\n\r\n        public Category createFromParcel(Parcel in) {\r\n            return new Category(in);\r\n        }\r\n\r\n        public Category[] newArray(int size) {\r\n            return new Category[size];\r\n        }\r\n    };\r\n\r\n    private Category(Parcel in) {\r\n        super(in);\r\n        mIconURL = in.readString();\r\n        mName = in.readString();\r\n \r\n\r\n    }\r\n\r\n    @Override\r\n    public int describeContents() {\r\n\r\n        return 1;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        StringBuilder builder = new StringBuilder();\r\n        builder.append(&quot;{&quot;);\r\n        builder.append(super.toString());\r\n        builder.append(&quot;, mName=&quot;).append(mName);\r\n        builder.append(&quot;, mIconURL=&quot;).append(mIconURL);\r\n        builder.append(&quot;}&quot;);\r\n        return builder.toString();\r\n    }\r\n\r\n    public static Category parseFromJSON(JSONObject jsonObject) {\r\n        Category cat = new Category();\r\n        try {\r\n            cat.setServerId(jsonObject.getInt(&quot;id&quot;));\r\n            cat.setName(jsonObject.getString(&quot;name&quot;));\r\n            cat.setIconURL(jsonObject.getString(&quot;icon&quot;));\r\n         \r\n        } catch (Exception e) {\r\n\r\n        }\r\n        return cat;\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\nAnd application works fine, but now I want to add Image property to this category class. I am new to Java and Android. But existing class has something called parcel. Now how i do same for bitmap? Is it like below\r\n\r\n\r\n    public Bitmap getImage()\r\n    {\r\n    \treturn mImage;\r\n    }\r\n\r\n     \r\n    @Override\r\n    public void writeToParcel(Parcel dest, int flags) {\r\n        super.writeToParcel(dest, flags);\r\n\r\n        dest.writeString(mIconURL);\r\n        dest.writeString(mName);\r\n        dest.writeByteArray(mImage);// there is no &quot;writeBitmap&quot; method in Parcel.\r\n\r\n    }\r\n   \r\n\r\n\r\nPlease guide me\r\n","title":"Parcel Bitmap - Android","body":"<p>In the existing code I have following class to hold category details.</p>\n\n<pre><code>import org.json.JSONObject;\nimport android.graphics.Bitmap;\nimport android.os.Parcel;\nimport android.os.Parcelable;\n\npublic class Category  {\n\n\nprivate String mIconURL;\nprivate String mName;\n\n\n\npublic Category() {\n    super();\n}\n\npublic String getIconURL() {\n    return mIconURL;\n}\n\n\npublic void setIconURL(String iconURL) {\n    this.mIconURL = iconURL;\n}\n\npublic String getName() {\n    return mName;\n}\n\npublic void setName(String name) {\n    this.mName = name;\n}\n\n@Override\npublic void writeToParcel(Parcel dest, int flags) {\n    super.writeToParcel(dest, flags);\n\n    dest.writeString(mIconURL);\n    dest.writeString(mName);\n\n\n}\n\npublic static final Parcelable.Creator&lt;Category&gt; CREATOR = new Parcelable.Creator&lt;Category&gt;() {\n\n    public Category createFromParcel(Parcel in) {\n        return new Category(in);\n    }\n\n    public Category[] newArray(int size) {\n        return new Category[size];\n    }\n};\n\nprivate Category(Parcel in) {\n    super(in);\n    mIconURL = in.readString();\n    mName = in.readString();\n\n\n}\n\n@Override\npublic int describeContents() {\n\n    return 1;\n}\n\n@Override\npublic String toString() {\n    StringBuilder builder = new StringBuilder();\n    builder.append(\"{\");\n    builder.append(super.toString());\n    builder.append(\", mName=\").append(mName);\n    builder.append(\", mIconURL=\").append(mIconURL);\n    builder.append(\"}\");\n    return builder.toString();\n}\n\npublic static Category parseFromJSON(JSONObject jsonObject) {\n    Category cat = new Category();\n    try {\n        cat.setServerId(jsonObject.getInt(\"id\"));\n        cat.setName(jsonObject.getString(\"name\"));\n        cat.setIconURL(jsonObject.getString(\"icon\"));\n\n    } catch (Exception e) {\n\n    }\n    return cat;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>And application works fine, but now I want to add Image property to this category class. I am new to Java and Android. But existing class has something called parcel. Now how i do same for bitmap? Is it like below</p>\n\n<pre><code>public Bitmap getImage()\n{\n    return mImage;\n}\n\n\n@Override\npublic void writeToParcel(Parcel dest, int flags) {\n    super.writeToParcel(dest, flags);\n\n    dest.writeString(mIconURL);\n    dest.writeString(mName);\n    dest.writeByteArray(mImage);// there is no \"writeBitmap\" method in Parcel.\n\n}\n</code></pre>\n\n<p>Please guide me</p>\n"},{"tags":["java","apache-zookeeper"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1649003744,"post_id":71724855,"comment_id":126760679,"body_markdown":"Sorry, I left my crystal ball in the other pants. Can you [edit] your question and add more details on how your Linux and Windows setups differ, how the network is between them and zookeper, how exactly you test, and so on? See [ask].","body":"Sorry, I left my crystal ball in the other pants. Can you <a href=\"https://stackoverflow.com/posts/71724855/edit\">edit</a> your question and add more details on how your Linux and Windows setups differ, how the network is between them and zookeper, how exactly you test, and so on? See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":23684186,"reputation":21,"user_id":17709371,"display_name":"gonnaup"},"score":0,"creation_date":1649047057,"post_id":71724855,"comment_id":126768103,"body_markdown":"sorry, it&#39;s my first time to ask question. I add my environment, code and logs yet. Thanks for your answer and please ignore my poor English. &#128522;","body":"sorry, it&#39;s my first time to ask question. I add my environment, code and logs yet. Thanks for your answer and please ignore my poor English. 😊"}],"answers":[{"tags":[],"owner":{"account_id":18195498,"reputation":51,"user_id":13240626,"display_name":"FreemanB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650032022,"creation_date":1650032022,"answer_id":71885114,"question_id":71724855,"body_markdown":"I can&#39;t say this is your problem exactly, but do you have some type of antivirus software running on the Windows box that is scanning jar files on access? I&#39;ve run into that problem on a server in the past, where an antivirus update caused all Zookeeper connections to go from less than a second to connect to approximately 60 seconds while the on-access scanner was checking all jar files that were being touched/loaded, including both Zookeeper and JVM libraries. If you have antivirus, you can try temporarily disabling it while running your connection tests to at least rule that possibility out.","title":"Why does connecting zookeeper take a long time on Windows?","body":"<p>I can't say this is your problem exactly, but do you have some type of antivirus software running on the Windows box that is scanning jar files on access? I've run into that problem on a server in the past, where an antivirus update caused all Zookeeper connections to go from less than a second to connect to approximately 60 seconds while the on-access scanner was checking all jar files that were being touched/loaded, including both Zookeeper and JVM libraries. If you have antivirus, you can try temporarily disabling it while running your connection tests to at least rule that possibility out.</p>\n"},{"tags":[],"owner":{"account_id":23684186,"reputation":21,"user_id":17709371,"display_name":"gonnaup"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650724161,"creation_date":1650724161,"answer_id":71980568,"question_id":71724855,"body_markdown":"I finally discovered the problem through debug the source code of the Zookeeper.\r\nBefore JVM instantiate the Zookeeper object, it execute the static block in Zookeeper.class which load your enviroment. There has a method `InetAddress.getLocalHost().getCanonicalHostName()` which make the code running\r\nslowly.I found a solution in [getcanonicalhostname-is-very-slow](https://stackoverflow.com/questions/47031687/getcanonicalhostname-is-very-slow). This is the `Npcap Loopback Adapter` cause the slowly execution.","title":"Why does connecting zookeeper take a long time on Windows?","body":"<p>I finally discovered the problem through debug the source code of the Zookeeper.\nBefore JVM instantiate the Zookeeper object, it execute the static block in Zookeeper.class which load your enviroment. There has a method <code>InetAddress.getLocalHost().getCanonicalHostName()</code> which make the code running\nslowly.I found a solution in <a href=\"https://stackoverflow.com/questions/47031687/getcanonicalhostname-is-very-slow\">getcanonicalhostname-is-very-slow</a>. This is the <code>Npcap Loopback Adapter</code> cause the slowly execution.</p>\n"}],"owner":{"account_id":23684186,"reputation":21,"user_id":17709371,"display_name":"gonnaup"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":542,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691831748,"creation_date":1648980411,"question_id":71724855,"body_markdown":"I&#39;m running a simple demo that is using the Java zookeeper client to connect zookeeper server.\r\nIt takes a long time(at least 10 seconds) to connect successfully on windows, but it connects successfully on Linux very quickly. What is the reason and how to deal with it?\r\n\r\n**solft version:**\r\n\r\nOS: Windows 11 with two virtual machines, one is Ubuntu server, the other is Ubuntu desktop,\r\n\r\nJava: OpenJDK 11,\r\n\r\nzookeeper server: version3.7.0, deployed on Ubuntu virtual machine\r\n\r\ndemo code:\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        log.info(&quot;begin connect to zookeeper ================================&gt;&gt;&quot;);\r\n        ZooKeeper zooKeeper = new ZooKeeper(&quot;192.168.1.16&quot;, 30000, watchedEvent -&gt; {\r\n        });\r\n        log.info(&quot;connect zookeeper success =================================&gt;&gt;&quot;);\r\n        zooKeeper.close();\r\n        log.info(&quot;zookeeper is closed...&quot;);\r\n    }\r\n\r\n**result and logs:**\r\n\r\n 1. demo code run on Win11:\r\n```\r\n[04-04-22 11:57:32:013 CST] main  INFO provider.ProviderStartup: begin connect to zookeeper ================================&gt;&gt;\r\n[04-04-22 11:57:41:087 CST] main  INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.7.0-e3704b390a6697bfdf4b0bef79e3da7a4f6bac4b, built on 2021-03-17 09:46 UTC\r\n[04-04-22 11:57:41:087 CST] main  INFO zookeeper.ZooKeeper: Client environment:java.version=11\r\n[04-04-22 11:57:41:088 CST] main  INFO zookeeper.ZooKeeper: Client environment:java.home=D:\\jdk-11\r\n[04-04-22 11:57:41:088 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.name=Windows 10\r\n[04-04-22 11:57:41:088 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64\r\n[04-04-22 11:57:41:088 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.version=10.0\r\n[04-04-22 11:57:41:096 CST] main  INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.1.16 sessionTimeout=30000 watcher=com.gonnaup.dubbo.provider.ProviderStartup$$Lambda$29/0x00000008000dc840@799d4f69\r\n[04-04-22 11:57:41:102 CST] main  INFO common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\r\n[04-04-22 11:57:41:384 CST] main  INFO zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes\r\n[04-04-22 11:57:41:393 CST] main  INFO zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false\r\n[04-04-22 11:57:41:393 CST] main  INFO provider.ProviderStartup: connect zookeeper success =================================&gt;&gt;\r\n[04-04-22 11:57:59:472 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: Opening socket connection to server 192.168.1.16/192.168.1.16:2181.\r\n[04-04-22 11:57:59:473 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)\r\n[04-04-22 11:57:59:476 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: Socket connection established, initiating session, client: /192.168.1.8:2474, server: 192.168.1.16/192.168.1.16:2181\r\n[04-04-22 11:57:59:596 CST] main  INFO provider.ProviderStartup: zookeeper is closed...\r\n[04-04-22 11:57:59:596 CST] main-EventThread  INFO zookeeper.ClientCnxn: EventThread shut down for session: 0x100001dd5b40058\r\n```\r\nI omitted some useless logs to reduce the number of words.It can be seen from the logging time that It takes a long time from the connection to the end(see the &#39;======&gt;&gt;&#39; flag).\r\n\r\n2. demo code run on ubuntu desktop virtual machine:\r\n```\r\n[04-04-22 11:57:03:739 CST] main  INFO simple.ZookeeperCli: begin connect to zookeeper ================================&gt;&gt;\r\n[04-04-22 11:57:03:785 CST] main  INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.7.0-e3704b390a6697bfdf4b0bef79e3da7a4f6bac4b, built on 2021-03-17 09:46 UTC\r\n[04-04-22 11:57:03:786 CST] main  INFO zookeeper.ZooKeeper: Client environment:java.version=11.0.14.1\r\n[04-04-22 11:57:03:788 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.name=Linux\r\n[04-04-22 11:57:03:788 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64\r\n[04-04-22 11:57:03:788 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.version=5.13.0-39-generic\r\n[04-04-22 11:57:03:800 CST] main  INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.1.16 sessionTimeout=30000 watcher=cn.gonnaup.simple.ZookeeperCli$$Lambda$31/0x0000000840083040@47f37ef1\r\n[04-04-22 11:57:03:808 CST] main  INFO common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\r\n[04-04-22 11:57:03:818 CST] main  INFO zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes\r\n[04-04-22 11:57:03:838 CST] main  INFO zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false\r\n[04-04-22 11:57:03:849 CST] main  INFO simple.ZookeeperCli: connect zookeeper success =================================&gt;&gt;\r\n[04-04-22 11:57:03:941 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: Opening socket connection to server 192.168.1.16/192.168.1.16:2181.\r\n[04-04-22 11:57:03:943 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)\r\n[04-04-22 11:57:03:964 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: Socket connection established, initiating session, client: /10.0.2.15:56596, server: 192.168.1.16/192.168.1.16:2181\r\n[04-04-22 11:57:04:109 CST] main  INFO zookeeper.ZooKeeper: Session: 0x100001dd5b40057 closed\r\n[04-04-22 11:57:04:109 CST] main  INFO simple.ZookeeperCli: zookeeper is closed...\r\n[04-04-22 11:57:04:109 CST] main-EventThread  INFO zookeeper.ClientCnxn: EventThread shut down for session: 0x100001dd5b40057\r\n\r\n```\r\nThat can see connecting zookeeper and closing the connection is completion immediately.","title":"Why does connecting zookeeper take a long time on Windows?","body":"<p>I'm running a simple demo that is using the Java zookeeper client to connect zookeeper server.\nIt takes a long time(at least 10 seconds) to connect successfully on windows, but it connects successfully on Linux very quickly. What is the reason and how to deal with it?</p>\n<p><strong>solft version:</strong></p>\n<p>OS: Windows 11 with two virtual machines, one is Ubuntu server, the other is Ubuntu desktop,</p>\n<p>Java: OpenJDK 11,</p>\n<p>zookeeper server: version3.7.0, deployed on Ubuntu virtual machine</p>\n<p>demo code:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    log.info(&quot;begin connect to zookeeper ================================&gt;&gt;&quot;);\n    ZooKeeper zooKeeper = new ZooKeeper(&quot;192.168.1.16&quot;, 30000, watchedEvent -&gt; {\n    });\n    log.info(&quot;connect zookeeper success =================================&gt;&gt;&quot;);\n    zooKeeper.close();\n    log.info(&quot;zookeeper is closed...&quot;);\n}\n</code></pre>\n<p><strong>result and logs:</strong></p>\n<ol>\n<li>demo code run on Win11:</li>\n</ol>\n<pre><code>[04-04-22 11:57:32:013 CST] main  INFO provider.ProviderStartup: begin connect to zookeeper ================================&gt;&gt;\n[04-04-22 11:57:41:087 CST] main  INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.7.0-e3704b390a6697bfdf4b0bef79e3da7a4f6bac4b, built on 2021-03-17 09:46 UTC\n[04-04-22 11:57:41:087 CST] main  INFO zookeeper.ZooKeeper: Client environment:java.version=11\n[04-04-22 11:57:41:088 CST] main  INFO zookeeper.ZooKeeper: Client environment:java.home=D:\\jdk-11\n[04-04-22 11:57:41:088 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.name=Windows 10\n[04-04-22 11:57:41:088 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64\n[04-04-22 11:57:41:088 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.version=10.0\n[04-04-22 11:57:41:096 CST] main  INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.1.16 sessionTimeout=30000 watcher=com.gonnaup.dubbo.provider.ProviderStartup$$Lambda$29/0x00000008000dc840@799d4f69\n[04-04-22 11:57:41:102 CST] main  INFO common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n[04-04-22 11:57:41:384 CST] main  INFO zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes\n[04-04-22 11:57:41:393 CST] main  INFO zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false\n[04-04-22 11:57:41:393 CST] main  INFO provider.ProviderStartup: connect zookeeper success =================================&gt;&gt;\n[04-04-22 11:57:59:472 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: Opening socket connection to server 192.168.1.16/192.168.1.16:2181.\n[04-04-22 11:57:59:473 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)\n[04-04-22 11:57:59:476 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: Socket connection established, initiating session, client: /192.168.1.8:2474, server: 192.168.1.16/192.168.1.16:2181\n[04-04-22 11:57:59:596 CST] main  INFO provider.ProviderStartup: zookeeper is closed...\n[04-04-22 11:57:59:596 CST] main-EventThread  INFO zookeeper.ClientCnxn: EventThread shut down for session: 0x100001dd5b40058\n</code></pre>\n<p>I omitted some useless logs to reduce the number of words.It can be seen from the logging time that It takes a long time from the connection to the end(see the '======&gt;&gt;' flag).</p>\n<ol start=\"2\">\n<li>demo code run on ubuntu desktop virtual machine:</li>\n</ol>\n<pre><code>[04-04-22 11:57:03:739 CST] main  INFO simple.ZookeeperCli: begin connect to zookeeper ================================&gt;&gt;\n[04-04-22 11:57:03:785 CST] main  INFO zookeeper.ZooKeeper: Client environment:zookeeper.version=3.7.0-e3704b390a6697bfdf4b0bef79e3da7a4f6bac4b, built on 2021-03-17 09:46 UTC\n[04-04-22 11:57:03:786 CST] main  INFO zookeeper.ZooKeeper: Client environment:java.version=11.0.14.1\n[04-04-22 11:57:03:788 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.name=Linux\n[04-04-22 11:57:03:788 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64\n[04-04-22 11:57:03:788 CST] main  INFO zookeeper.ZooKeeper: Client environment:os.version=5.13.0-39-generic\n[04-04-22 11:57:03:800 CST] main  INFO zookeeper.ZooKeeper: Initiating client connection, connectString=192.168.1.16 sessionTimeout=30000 watcher=cn.gonnaup.simple.ZookeeperCli$$Lambda$31/0x0000000840083040@47f37ef1\n[04-04-22 11:57:03:808 CST] main  INFO common.X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation\n[04-04-22 11:57:03:818 CST] main  INFO zookeeper.ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes\n[04-04-22 11:57:03:838 CST] main  INFO zookeeper.ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false\n[04-04-22 11:57:03:849 CST] main  INFO simple.ZookeeperCli: connect zookeeper success =================================&gt;&gt;\n[04-04-22 11:57:03:941 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: Opening socket connection to server 192.168.1.16/192.168.1.16:2181.\n[04-04-22 11:57:03:943 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)\n[04-04-22 11:57:03:964 CST] main-SendThread(192.168.1.16:2181)  INFO zookeeper.ClientCnxn: Socket connection established, initiating session, client: /10.0.2.15:56596, server: 192.168.1.16/192.168.1.16:2181\n[04-04-22 11:57:04:109 CST] main  INFO zookeeper.ZooKeeper: Session: 0x100001dd5b40057 closed\n[04-04-22 11:57:04:109 CST] main  INFO simple.ZookeeperCli: zookeeper is closed...\n[04-04-22 11:57:04:109 CST] main-EventThread  INFO zookeeper.ClientCnxn: EventThread shut down for session: 0x100001dd5b40057\n\n</code></pre>\n<p>That can see connecting zookeeper and closing the connection is completion immediately.</p>\n"},{"tags":["java","android","multithreading","audio","low-latency"],"owner":{"account_id":29210808,"reputation":1,"user_id":22378832,"display_name":"Aman Motiyani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691831219,"creation_date":1691831219,"question_id":76888536,"body_markdown":"I am working on an Android application that involves real-time audio recording from the microphone and immediate playback through a Bluetooth speaker. However, I am facing latency issues between the audio input from the microphone and the audio output through the Bluetooth speaker. The latency seems to increase as the recording duration gets longer.\r\n\r\nI have been trying various approaches to minimize this latency, but I have not been successful so far. I&#39;m reaching out to the Stack Overflow community for assistance and guidance on how to effectively reduce this latency.\r\n\r\nHere is the relevant code snippets from my RecordFragment and AudioRecordingThread classes:\r\n\r\n**AudioRecordingThread.java :**\r\n\r\n\r\n```\r\npublic void run() {\r\n        //change\r\n        Process.setThreadPriority(Process.THREAD_PRIORITY_URGENT_AUDIO);\r\n\r\n        FileOutputStream out = prepareWriting();\r\n        if (out == null) {\r\n            return;\r\n        }\r\n\r\n\r\n        intRecordSampleRate = AudioTrack.getNativeOutputSampleRate(AudioManager.STREAM_MUSIC);\r\n//        bufferSize = AudioRecord.getMinBufferSize(SAMPLING_RATE,\r\n//                AudioFormat.CHANNEL_IN_MONO,\r\n//                AudioFormat.ENCODING_PCM_16BIT);\r\n\r\n        //change 1\r\n        bufferSize = 441 * SAMPLING_RATE / 1000; //change 1\r\n        audioBuffer = new byte[bufferSize];\r\n\r\n        shortAudioData = new short[bufferSize];\r\n\r\n        record = new AudioRecord(AudioSource.DEFAULT, /*AudioSource.MIC*/\r\n                SAMPLING_RATE,\r\n                AudioFormat.CHANNEL_IN_MONO,\r\n                AudioFormat.ENCODING_PCM_16BIT,\r\n                BUFFER_SIZE_IN_BYTES);\r\n\r\n        audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC\r\n                , SAMPLING_RATE\r\n                , AudioFormat.CHANNEL_OUT_MONO\r\n                , AudioFormat.ENCODING_PCM_16BIT\r\n                , BUFFER_SIZE_IN_BYTES\r\n                , AudioTrack.MODE_STREAM);\r\n\r\n        audioTrack.setPlaybackRate(SAMPLING_RATE);\r\n        record.startRecording();\r\n        audioTrack.play();\r\n\r\n        int read = 0;\r\n        while (isRecording) {\r\n\r\n            //change 2\r\n            long startTime = System.currentTimeMillis();\r\n            read = record.read(audioBuffer, 0, bufferSize);\r\n            long endTime = System.currentTimeMillis();\r\n\r\n            // Send the audio buffer to the BT speaker\r\n            audioTrackWriteTime = System.nanoTime();\r\n            audioTrack.write(audioBuffer, 0, read);\r\n            audioRecordReadTime = System.nanoTime();\r\n\r\n            // Sleep for the remaining time in the 10 ms period\r\n            long sleepTime = 10 - (endTime - startTime);\r\n            if (sleepTime &gt; 0) {\r\n                try {\r\n                    Thread.sleep(sleepTime);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n//            read = record.read(audioBuffer, 0, bufferSize);\r\n//            audioTrack.write(audioBuffer, 0, bufferSize);\r\n\r\n            if ((read == AudioRecord.ERROR_INVALID_OPERATION) ||\r\n                    (read == AudioRecord.ERROR_BAD_VALUE) ||\r\n                    (read == AudioRecord.ERROR_BAD_VALUE) ||\r\n                    (read &lt;= 0)) {\r\n                continue;\r\n            }\r\n\r\n            if (RecordFragment.checkSound==1) {\r\n                stopRecording();\r\n                long latencyInMilliseconds = getLatencyInMilliseconds();\r\n                Log.d(&quot;AudioLatency&quot;, &quot;Latency: &quot; + latencyInMilliseconds + &quot; ms&quot;);\r\n                finishWriting(out);\r\n                convertRawToWav();\r\n                //proceed();\r\n                write(out);\r\n            }\r\n        }\r\n\r\n        if (record != null) {\r\n            record.stop();\r\n            record.release();\r\n        }\r\n\r\n        if (RecordFragment.checkSound==1) {\r\n\r\n            finishWriting(out);\r\n            convertRawToWav();\r\n        }\r\n    }\r\n```\r\n\r\n**Record Fragment :**\r\n\r\n```\r\nbtn_testSound.setOnClickListener(new OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(View view) {\r\n                Log.e(&quot;Record Fragment&quot;,&quot;Inside Record Fragment&quot;);\r\n                if (requestAudioPermissions()) {\r\n                    if (MyBroadcastReceiver.connectedBluetooth || welcomePref.isConnectedDevice()) {\r\n                        testLoudSpeakerSound();\r\n                        changeColor();\r\n                    } else {\r\n                        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n                        builder.setMessage(&quot;Please go to Settings to connect a bluetooth speaker&quot;)\r\n                                .setCancelable(true)\r\n                                .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\r\n                                    public void onClick(DialogInterface dialog, int id) {\r\n                                        //finish();\r\n                                        /* startActivity(new Intent(getActivity(), DashBoardActivity.class)\r\n                                .putExtra(&quot;tag&quot;, &quot;speaker&quot;));*/\r\n\r\n                                    }\r\n                                });\r\n                        AlertDialog alertdialog = builder.create();\r\n                        alertdialog.setTitle(&quot;Bluetooth Speaker not connected&quot;);\r\n                        alertdialog.show();\r\n                    }\r\n\r\n                }\r\n            }\r\n        });\r\n\r\npublic void testLoudSpeakerSound() {\r\n        checkSound = 0;\r\n        if (isLoudSpeakerOn || !this.isPermit) {\r\n            if (SDK_INT &gt;= 23) {\r\n                voiceFromBuiltinMic();\r\n            }\r\n            toStopSpeaker();\r\n            btn_testSound.setText(&quot;Test Audio Out&quot;);\r\n            return;\r\n        }\r\n        isLoudSpeakerOn = true;\r\n        loudspeaker_status = 1;\r\n        btn_testSound.setText(&quot;Off&quot;);\r\n        testAudio=true;\r\n\r\n\r\n\r\n\r\n        new AsyncTask&lt;Void, Void, Void&gt;() {\r\n            /* access modifiers changed from: protected */\r\n            public Void doInBackground(Void... voidArr) {\r\n\r\n\r\n                loudSpeaker();\r\n                return null;\r\n            }\r\n        }.execute();\r\n\r\n    }\r\n\r\npublic void voiceFromBuiltinMic() {\r\n        //bottomNavigationView.getMenu().findItem(nav_home).setEnabled(false);\r\n\r\n        try {\r\n            Thread.sleep(10);\r\n        } catch (Exception unused) {\r\n        }\r\n        if (am == null) {\r\n            am = (AudioManager) getActivity().getSystemService(&quot;audio&quot;);\r\n        }\r\n        int i = loudspeaker_status;\r\n        if (i == 1 || i == 0) {\r\n            am.setSpeakerphoneOn(false);\r\n            am.setMode(3);\r\n        } else if (i == 2) {\r\n            am.setSpeakerphoneOn(false);\r\n            am.setMode(2);\r\n        }\r\n        if (this.recorder != null) {\r\n            AudioDeviceInfo myAudioDeviceInfo_builtinMic = getMyAudioDeviceInfo_builtinMic();\r\n            if (myAudioDeviceInfo_builtinMic != null) {\r\n                if (SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                    this.recorder.setPreferredDevice(myAudioDeviceInfo_builtinMic);\r\n                }\r\n                if (this.audioTrack != null) {\r\n                    AudioDeviceInfo myAudioDeviceInfo_BL_a2dp = getMyAudioDeviceInfo_BL_a2dp();\r\n                    if (SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                        if (myAudioDeviceInfo_BL_a2dp != null &amp;&amp; this.audioTrack.setPreferredDevice(myAudioDeviceInfo_BL_a2dp)) {\r\n//                            setMaxVol();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\npublic void loudSpeaker() {\r\n        try {\r\n\r\n            if (am == null) {\r\n                am = (AudioManager) getActivity().getSystemService(&quot;audio&quot;);\r\n            }\r\n            int i = loudspeaker_status;\r\n            am.setSpeakerphoneOn(false);\r\n            am.setMode(3);\r\n            if (i == 1) {\r\n                am.setSpeakerphoneOn(false);\r\n                am.setMode(3);\r\n            } else if (i == 2) {\r\n                am.setSpeakerphoneOn(false);\r\n                am.setMode(2);\r\n            }\r\n            if (SDK_INT &gt;= 23) {\r\n                if (findHeadset()) {\r\n                    voiceFromHeadset();\r\n                } else if (loudspeaker_status == 1) {\r\n                    voiceFromBuiltinMic();\r\n                }\r\n            }\r\n\r\n            //initialize filename variable with date and time at the end to ensure the new file wont overwrite previous file\r\n            directory = ContextCompat.getExternalFilesDirs(getActivity(), Environment.DIRECTORY_MUSIC)[0];\r\n            fileName = directory + &quot;/&quot; + recordFileName + &quot;.mp3&quot;;\r\n            //  recordFileName = &quot;Recording_&quot; + formatter.format(now) + &quot;.mp3&quot;;\r\n\r\n\r\n            audioInputStartTimestamp = System.currentTimeMillis();\r\n            recordingThread = new AudioRecordingThread(fileName, new AudioRecordingHandler() {\r\n                @Override\r\n                public void onFftDataCapture(final byte[] bytes) {\r\n                    getActivity().runOnUiThread(new Runnable() {\r\n                        public void run() {\r\n\r\n                        }\r\n                    });\r\n                }\r\n\r\n                @Override\r\n                public void onRecordSuccess() {\r\n\r\n                    new Handler(Looper.getMainLooper()).post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            Log.e(&quot;filename&quot;, &quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot; + fileName);\r\n                            byte[] audio = converwav(fileName);\r\n                            if (audio != null) {\r\n                                //  callSaveRecordingAPI();\r\n                                //  MyToast.display(getActivity(), &quot;File Saved&quot;);\r\n                                Log.e(&quot;filebyte&quot;, &quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot; + audio);\r\n\r\n                                long audioLatency = audioOutputStartTimestamp - audioInputStartTimestamp;\r\n                                Log.e(&quot;AudioLatency&quot;, &quot;Audio Latency (ms): &quot; + audioLatency);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n\r\n                @Override\r\n                public void onRecordingError() {\r\n                    getActivity().runOnUiThread(new Runnable() {\r\n                        public void run() {\r\n                        }\r\n                    });\r\n                }\r\n\r\n                @Override\r\n                public void onRecordSaveError() {\r\n                    getActivity().runOnUiThread(new Runnable() {\r\n                        public void run() {\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            recordingThread.start();\r\n\r\n            audioOutputStartTimestamp = System.currentTimeMillis();\r\n\r\n        } catch (Exception unused) {\r\n            getActivity().runOnUiThread(new Runnable() {\r\n                public void run() {\r\n\r\n                    isLoudSpeakerOn = false;\r\n                    isRecording = false;\r\n                    isRecordOn = false;\r\n                    Log.e(&quot;TAG&quot;, &quot;: &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;);\r\n\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n```\r\n\r\nI have already tried adjusting the buffer size and experimenting with different thread priorities, but the latency issue remains. I suspect that there might be a more effective approach to manage audio recording and playback simultaneously to reduce the latency.\r\n\r\nCould anyone provide guidance or suggestions on how to further reduce audio latency in this scenario? Are there any specific optimizations I should consider? I would greatly appreciate any insights or solutions that can help improve the real-time audio experience in my application.","title":"Reduce Latency in Android Audio Recording and Playback in Java Android","body":"<p>I am working on an Android application that involves real-time audio recording from the microphone and immediate playback through a Bluetooth speaker. However, I am facing latency issues between the audio input from the microphone and the audio output through the Bluetooth speaker. The latency seems to increase as the recording duration gets longer.</p>\n<p>I have been trying various approaches to minimize this latency, but I have not been successful so far. I'm reaching out to the Stack Overflow community for assistance and guidance on how to effectively reduce this latency.</p>\n<p>Here is the relevant code snippets from my RecordFragment and AudioRecordingThread classes:</p>\n<p><strong>AudioRecordingThread.java :</strong></p>\n<pre><code>public void run() {\n        //change\n        Process.setThreadPriority(Process.THREAD_PRIORITY_URGENT_AUDIO);\n\n        FileOutputStream out = prepareWriting();\n        if (out == null) {\n            return;\n        }\n\n\n        intRecordSampleRate = AudioTrack.getNativeOutputSampleRate(AudioManager.STREAM_MUSIC);\n//        bufferSize = AudioRecord.getMinBufferSize(SAMPLING_RATE,\n//                AudioFormat.CHANNEL_IN_MONO,\n//                AudioFormat.ENCODING_PCM_16BIT);\n\n        //change 1\n        bufferSize = 441 * SAMPLING_RATE / 1000; //change 1\n        audioBuffer = new byte[bufferSize];\n\n        shortAudioData = new short[bufferSize];\n\n        record = new AudioRecord(AudioSource.DEFAULT, /*AudioSource.MIC*/\n                SAMPLING_RATE,\n                AudioFormat.CHANNEL_IN_MONO,\n                AudioFormat.ENCODING_PCM_16BIT,\n                BUFFER_SIZE_IN_BYTES);\n\n        audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC\n                , SAMPLING_RATE\n                , AudioFormat.CHANNEL_OUT_MONO\n                , AudioFormat.ENCODING_PCM_16BIT\n                , BUFFER_SIZE_IN_BYTES\n                , AudioTrack.MODE_STREAM);\n\n        audioTrack.setPlaybackRate(SAMPLING_RATE);\n        record.startRecording();\n        audioTrack.play();\n\n        int read = 0;\n        while (isRecording) {\n\n            //change 2\n            long startTime = System.currentTimeMillis();\n            read = record.read(audioBuffer, 0, bufferSize);\n            long endTime = System.currentTimeMillis();\n\n            // Send the audio buffer to the BT speaker\n            audioTrackWriteTime = System.nanoTime();\n            audioTrack.write(audioBuffer, 0, read);\n            audioRecordReadTime = System.nanoTime();\n\n            // Sleep for the remaining time in the 10 ms period\n            long sleepTime = 10 - (endTime - startTime);\n            if (sleepTime &gt; 0) {\n                try {\n                    Thread.sleep(sleepTime);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n//            read = record.read(audioBuffer, 0, bufferSize);\n//            audioTrack.write(audioBuffer, 0, bufferSize);\n\n            if ((read == AudioRecord.ERROR_INVALID_OPERATION) ||\n                    (read == AudioRecord.ERROR_BAD_VALUE) ||\n                    (read == AudioRecord.ERROR_BAD_VALUE) ||\n                    (read &lt;= 0)) {\n                continue;\n            }\n\n            if (RecordFragment.checkSound==1) {\n                stopRecording();\n                long latencyInMilliseconds = getLatencyInMilliseconds();\n                Log.d(&quot;AudioLatency&quot;, &quot;Latency: &quot; + latencyInMilliseconds + &quot; ms&quot;);\n                finishWriting(out);\n                convertRawToWav();\n                //proceed();\n                write(out);\n            }\n        }\n\n        if (record != null) {\n            record.stop();\n            record.release();\n        }\n\n        if (RecordFragment.checkSound==1) {\n\n            finishWriting(out);\n            convertRawToWav();\n        }\n    }\n</code></pre>\n<p><strong>Record Fragment :</strong></p>\n<pre><code>btn_testSound.setOnClickListener(new OnClickListener() {\n\n            @Override\n            public void onClick(View view) {\n                Log.e(&quot;Record Fragment&quot;,&quot;Inside Record Fragment&quot;);\n                if (requestAudioPermissions()) {\n                    if (MyBroadcastReceiver.connectedBluetooth || welcomePref.isConnectedDevice()) {\n                        testLoudSpeakerSound();\n                        changeColor();\n                    } else {\n                        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n                        builder.setMessage(&quot;Please go to Settings to connect a bluetooth speaker&quot;)\n                                .setCancelable(true)\n                                .setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\n                                    public void onClick(DialogInterface dialog, int id) {\n                                        //finish();\n                                        /* startActivity(new Intent(getActivity(), DashBoardActivity.class)\n                                .putExtra(&quot;tag&quot;, &quot;speaker&quot;));*/\n\n                                    }\n                                });\n                        AlertDialog alertdialog = builder.create();\n                        alertdialog.setTitle(&quot;Bluetooth Speaker not connected&quot;);\n                        alertdialog.show();\n                    }\n\n                }\n            }\n        });\n\npublic void testLoudSpeakerSound() {\n        checkSound = 0;\n        if (isLoudSpeakerOn || !this.isPermit) {\n            if (SDK_INT &gt;= 23) {\n                voiceFromBuiltinMic();\n            }\n            toStopSpeaker();\n            btn_testSound.setText(&quot;Test Audio Out&quot;);\n            return;\n        }\n        isLoudSpeakerOn = true;\n        loudspeaker_status = 1;\n        btn_testSound.setText(&quot;Off&quot;);\n        testAudio=true;\n\n\n\n\n        new AsyncTask&lt;Void, Void, Void&gt;() {\n            /* access modifiers changed from: protected */\n            public Void doInBackground(Void... voidArr) {\n\n\n                loudSpeaker();\n                return null;\n            }\n        }.execute();\n\n    }\n\npublic void voiceFromBuiltinMic() {\n        //bottomNavigationView.getMenu().findItem(nav_home).setEnabled(false);\n\n        try {\n            Thread.sleep(10);\n        } catch (Exception unused) {\n        }\n        if (am == null) {\n            am = (AudioManager) getActivity().getSystemService(&quot;audio&quot;);\n        }\n        int i = loudspeaker_status;\n        if (i == 1 || i == 0) {\n            am.setSpeakerphoneOn(false);\n            am.setMode(3);\n        } else if (i == 2) {\n            am.setSpeakerphoneOn(false);\n            am.setMode(2);\n        }\n        if (this.recorder != null) {\n            AudioDeviceInfo myAudioDeviceInfo_builtinMic = getMyAudioDeviceInfo_builtinMic();\n            if (myAudioDeviceInfo_builtinMic != null) {\n                if (SDK_INT &gt;= Build.VERSION_CODES.M) {\n                    this.recorder.setPreferredDevice(myAudioDeviceInfo_builtinMic);\n                }\n                if (this.audioTrack != null) {\n                    AudioDeviceInfo myAudioDeviceInfo_BL_a2dp = getMyAudioDeviceInfo_BL_a2dp();\n                    if (SDK_INT &gt;= Build.VERSION_CODES.M) {\n                        if (myAudioDeviceInfo_BL_a2dp != null &amp;&amp; this.audioTrack.setPreferredDevice(myAudioDeviceInfo_BL_a2dp)) {\n//                            setMaxVol();\n                        }\n                    }\n                }\n            }\n        }\n    }\n\npublic void loudSpeaker() {\n        try {\n\n            if (am == null) {\n                am = (AudioManager) getActivity().getSystemService(&quot;audio&quot;);\n            }\n            int i = loudspeaker_status;\n            am.setSpeakerphoneOn(false);\n            am.setMode(3);\n            if (i == 1) {\n                am.setSpeakerphoneOn(false);\n                am.setMode(3);\n            } else if (i == 2) {\n                am.setSpeakerphoneOn(false);\n                am.setMode(2);\n            }\n            if (SDK_INT &gt;= 23) {\n                if (findHeadset()) {\n                    voiceFromHeadset();\n                } else if (loudspeaker_status == 1) {\n                    voiceFromBuiltinMic();\n                }\n            }\n\n            //initialize filename variable with date and time at the end to ensure the new file wont overwrite previous file\n            directory = ContextCompat.getExternalFilesDirs(getActivity(), Environment.DIRECTORY_MUSIC)[0];\n            fileName = directory + &quot;/&quot; + recordFileName + &quot;.mp3&quot;;\n            //  recordFileName = &quot;Recording_&quot; + formatter.format(now) + &quot;.mp3&quot;;\n\n\n            audioInputStartTimestamp = System.currentTimeMillis();\n            recordingThread = new AudioRecordingThread(fileName, new AudioRecordingHandler() {\n                @Override\n                public void onFftDataCapture(final byte[] bytes) {\n                    getActivity().runOnUiThread(new Runnable() {\n                        public void run() {\n\n                        }\n                    });\n                }\n\n                @Override\n                public void onRecordSuccess() {\n\n                    new Handler(Looper.getMainLooper()).post(new Runnable() {\n                        @Override\n                        public void run() {\n                            Log.e(&quot;filename&quot;, &quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot; + fileName);\n                            byte[] audio = converwav(fileName);\n                            if (audio != null) {\n                                //  callSaveRecordingAPI();\n                                //  MyToast.display(getActivity(), &quot;File Saved&quot;);\n                                Log.e(&quot;filebyte&quot;, &quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot; + audio);\n\n                                long audioLatency = audioOutputStartTimestamp - audioInputStartTimestamp;\n                                Log.e(&quot;AudioLatency&quot;, &quot;Audio Latency (ms): &quot; + audioLatency);\n                            }\n                        }\n                    });\n                }\n\n                @Override\n                public void onRecordingError() {\n                    getActivity().runOnUiThread(new Runnable() {\n                        public void run() {\n                        }\n                    });\n                }\n\n                @Override\n                public void onRecordSaveError() {\n                    getActivity().runOnUiThread(new Runnable() {\n                        public void run() {\n                        }\n                    });\n                }\n            });\n            recordingThread.start();\n\n            audioOutputStartTimestamp = System.currentTimeMillis();\n\n        } catch (Exception unused) {\n            getActivity().runOnUiThread(new Runnable() {\n                public void run() {\n\n                    isLoudSpeakerOn = false;\n                    isRecording = false;\n                    isRecordOn = false;\n                    Log.e(&quot;TAG&quot;, &quot;: &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;);\n\n                }\n            });\n        }\n    }\n\n</code></pre>\n<p>I have already tried adjusting the buffer size and experimenting with different thread priorities, but the latency issue remains. I suspect that there might be a more effective approach to manage audio recording and playback simultaneously to reduce the latency.</p>\n<p>Could anyone provide guidance or suggestions on how to further reduce audio latency in this scenario? Are there any specific optimizations I should consider? I would greatly appreciate any insights or solutions that can help improve the real-time audio experience in my application.</p>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691997114,"post_id":76888499,"comment_id":135560860,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":29166006,"reputation":1,"user_id":22343571,"display_name":"Mohd Zaid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691830689,"creation_date":1691830689,"question_id":76888499,"body_markdown":"\r\n[This is currently my layout (I am using a coordinator layout) i just want the horizontal recyclerView to scroll off the screen as the user Scrolls the vertical RecyclerView ](https://i.stack.imgur.com/sURcp.png)\r\n\r\nThis is how my code looks like \r\n                 &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n                &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n                    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n                    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;match_parent&quot;\r\n                    tools:context=&quot;.MainActivity&quot;&gt;\r\n                    &lt;com.google.android.material.appbar.AppBarLayout\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        &gt;\r\n                        &lt;com.google.android.material.appbar.CollapsingToolbarLayout\r\n                            android:layout_width=&quot;match_parent&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            app:layout_scrollFlags=&quot;scroll|enterAlways&quot;\r\n                            &gt;\r\n                            &lt;androidx.appcompat.widget.Toolbar\r\n                                android:id=&quot;@+id/feed_toolbar&quot;\r\n                                android:layout_width=&quot;match_parent&quot;\r\n                                android:layout_height=&quot;wrap_content&quot;\r\n                                &gt;\r\n                                &lt;LinearLayout\r\n                                    android:id=&quot;@+id/feed_linear&quot;\r\n                                    android:layout_width=&quot;match_parent&quot;\r\n                                    android:layout_height=&quot;wrap_content&quot;\r\n                                    android:orientation=&quot;horizontal&quot;&gt;\r\n                \r\n                                    &lt;LinearLayout\r\n                                        android:layout_width=&quot;0dp&quot;\r\n                                        android:layout_height=&quot;wrap_content&quot;\r\n                                        android:layout_weight=&quot;1&quot;&gt;\r\n                \r\n                                        &lt;TextView\r\n                                            android:layout_width=&quot;wrap_content&quot;\r\n                                            android:layout_height=&quot;wrap_content&quot;\r\n                                            android:fontFamily=&quot;@font/billabong&quot;\r\n                                            android:paddingLeft=&quot;10dp&quot;\r\n                                            android:paddingTop=&quot;10dp&quot;\r\n                                            android:text=&quot;@string/instagram&quot;\r\n                                            android:textColor=&quot;@color/white&quot;\r\n                                            android:textSize=&quot;33dp&quot; /&gt;\r\n                \r\n                                    &lt;/LinearLayout&gt;\r\n                \r\n                                    &lt;LinearLayout\r\n                                        android:layout_width=&quot;0dp&quot;\r\n                                        android:layout_height=&quot;wrap_content&quot;\r\n                                        android:layout_gravity=&quot;center_vertical&quot;\r\n                                        android:layout_weight=&quot;1&quot;\r\n                                        android:gravity=&quot;end&quot;&gt;\r\n                \r\n                                        &lt;ImageView\r\n                                            android:layout_width=&quot;30dp&quot;\r\n                                            android:layout_height=&quot;30dp&quot;\r\n                                            android:id=&quot;@+id/notification_custom&quot;\r\n                                            android:layout_marginRight=&quot;15dp&quot;\r\n                                            android:src=&quot;@drawable/heart&quot; /&gt;\r\n                \r\n                                        &lt;ImageView\r\n                                            android:id=&quot;@+id/message_icon&quot;\r\n                                            android:layout_width=&quot;30dp&quot;\r\n                                            android:layout_height=&quot;30dp&quot;\r\n                                            android:layout_marginRight=&quot;12dp&quot;\r\n                                            android:src=&quot;@drawable/messenger&quot; /&gt;\r\n                \r\n                                    &lt;/LinearLayout&gt;\r\n                \r\n                                &lt;/LinearLayout&gt;\r\n                \r\n                            &lt;/androidx.appcompat.widget.Toolbar&gt;\r\n                \r\n                \r\n                        &lt;/com.google.android.material.appbar.CollapsingToolbarLayout&gt;\r\n                            &lt;androidx.recyclerview.widget.RecyclerView\r\n                                android:visibility=&quot;visible&quot;\r\n                                android:id=&quot;@+id/feed_story_recycler&quot;\r\n                                android:layout_width=&quot;match_parent&quot;\r\n                                android:background=&quot;#000&quot;\r\n                                android:layout_height=&quot;wrap_content&quot;/&gt;\r\n                    &lt;/com.google.android.material.appbar.AppBarLayout&gt;\r\n                \r\n                \r\n                    &lt;androidx.recyclerview.widget.RecyclerView\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:clipToPadding=&quot;false&quot;\r\n                        android:layout_marginBottom=&quot;40dp&quot;\r\n                        android:id=&quot;@+id/feed_recyler&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n                        &gt;\r\n                    &lt;/androidx.recyclerview.widget.RecyclerView&gt;\r\n                \r\n                &lt;!--    Footer --&gt;\r\n                    &lt;LinearLayout\r\n                \r\n                        android:id=&quot;@+id/home&quot;\r\n                        android:paddingTop=&quot;9dp&quot;\r\n                        android:paddingBottom=&quot;9sp&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:orientation=&quot;horizontal&quot;\r\n                        android:layout_gravity=&quot;bottom&quot;\r\n                        &gt;\r\n                        &lt;LinearLayout\r\n                            android:layout_width=&quot;0dp&quot;\r\n                            android:layout_weight=&quot;1&quot;\r\n                            android:gravity=&quot;center_horizontal&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;&gt;\r\n                            &lt;ImageView\r\n                                android:layout_width=&quot;21.5dp&quot;\r\n                                android:layout_height=&quot;21.5dp&quot;\r\n                                android:src=&quot;@drawable/home&quot;\r\n                                /&gt;\r\n                \r\n                        &lt;/LinearLayout&gt;\r\n                        &lt;LinearLayout\r\n                            android:gravity=&quot;center_horizontal&quot;\r\n                            android:layout_width=&quot;0dp&quot;\r\n                            android:layout_weight=&quot;1&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;&gt;\r\n                            &lt;ImageView\r\n                                android:layout_width=&quot;21.5dp&quot;\r\n                                android:layout_height=&quot;21.5dp&quot;\r\n                                android:src=&quot;@drawable/search&quot;\r\n                                android:layout_marginStart=&quot;0dp&quot;\r\n                                android:layout_marginEnd=&quot;0dp&quot;\r\n                                /&gt;\r\n                \r\n                        &lt;/LinearLayout&gt;\r\n                        &lt;LinearLayout\r\n                            android:layout_width=&quot;0dp&quot;\r\n                            android:gravity=&quot;center_horizontal&quot;\r\n                            android:layout_weight=&quot;1&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;&gt;\r\n                            &lt;ImageView\r\n                                android:layout_width=&quot;21.5dp&quot;\r\n                                android:layout_height=&quot;21.5dp&quot;\r\n                                android:src=&quot;@drawable/plus&quot;\r\n                                android:layout_marginStart=&quot;0dp&quot;\r\n                                android:layout_marginEnd=&quot;0dp&quot;\r\n                                /&gt;\r\n                \r\n                        &lt;/LinearLayout&gt;\r\n                        &lt;LinearLayout\r\n                            android:layout_width=&quot;0dp&quot;\r\n                            android:gravity=&quot;center_horizontal&quot;\r\n                            android:layout_weight=&quot;1&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;&gt;\r\n                            &lt;ImageView\r\n                                android:layout_width=&quot;21.5dp&quot;\r\n                                android:layout_height=&quot;21.5dp&quot;\r\n                                android:src=&quot;@drawable/reel&quot;\r\n                                android:layout_marginStart=&quot;0dp&quot;\r\n                                android:layout_marginEnd=&quot;-15dp&quot;\r\n                                /&gt;\r\n                \r\n                        &lt;/LinearLayout&gt;\r\n                        &lt;LinearLayout\r\n                            android:layout_width=&quot;0dp&quot;\r\n                            android:layout_weight=&quot;1&quot;\r\n                            android:gravity=&quot;center_horizontal&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;&gt;\r\n                \r\n                            &lt;com.google.android.material.imageview.ShapeableImageView\r\n                                android:layout_width=&quot;21.5dp&quot;\r\n                                android:layout_height=&quot;21.5dp&quot;\r\n                                android:background=&quot;#00FFFFFF&quot;\r\n                                android:scaleType=&quot;fitXY&quot;\r\n                                android:src=&quot;@drawable/goku2&quot;\r\n                                app:shapeAppearanceOverlay=&quot;@style/circularImageView&quot; /&gt;\r\n                        &lt;/LinearLayout&gt;\r\n                \r\n                \r\n                \r\n                \r\n                \r\n                    &lt;/LinearLayout&gt;\r\n                \r\n                &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n\r\n","title":"Complex Scrolling Behaviour in Coordinator Layout","body":"<p><a href=\"https://i.stack.imgur.com/sURcp.png\" rel=\"nofollow noreferrer\">This is currently my layout (I am using a coordinator layout) i just want the horizontal recyclerView to scroll off the screen as the user Scrolls the vertical RecyclerView </a></p>\n<p>This is how my code looks like\n\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\ntools:context=&quot;.MainActivity&quot;&gt;\n&lt;com.google.android.material.appbar.AppBarLayout\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;wrap_content&quot;\n&gt;\n&lt;com.google.android.material.appbar.CollapsingToolbarLayout\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;wrap_content&quot;\napp:layout_scrollFlags=&quot;scroll|enterAlways&quot;\n&gt;\n&lt;androidx.appcompat.widget.Toolbar\nandroid:id=&quot;@+id/feed_toolbar&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;wrap_content&quot;\n&gt;\n</p>\n<pre><code>                                &lt;LinearLayout\n                                    android:layout_width=&quot;0dp&quot;\n                                    android:layout_height=&quot;wrap_content&quot;\n                                    android:layout_weight=&quot;1&quot;&gt;\n            \n                                    &lt;TextView\n                                        android:layout_width=&quot;wrap_content&quot;\n                                        android:layout_height=&quot;wrap_content&quot;\n                                        android:fontFamily=&quot;@font/billabong&quot;\n                                        android:paddingLeft=&quot;10dp&quot;\n                                        android:paddingTop=&quot;10dp&quot;\n                                        android:text=&quot;@string/instagram&quot;\n                                        android:textColor=&quot;@color/white&quot;\n                                        android:textSize=&quot;33dp&quot; /&gt;\n            \n                                &lt;/LinearLayout&gt;\n            \n                                &lt;LinearLayout\n                                    android:layout_width=&quot;0dp&quot;\n                                    android:layout_height=&quot;wrap_content&quot;\n                                    android:layout_gravity=&quot;center_vertical&quot;\n                                    android:layout_weight=&quot;1&quot;\n                                    android:gravity=&quot;end&quot;&gt;\n            \n                                    &lt;ImageView\n                                        android:layout_width=&quot;30dp&quot;\n                                        android:layout_height=&quot;30dp&quot;\n                                        android:id=&quot;@+id/notification_custom&quot;\n                                        android:layout_marginRight=&quot;15dp&quot;\n                                        android:src=&quot;@drawable/heart&quot; /&gt;\n            \n                                    &lt;ImageView\n                                        android:id=&quot;@+id/message_icon&quot;\n                                        android:layout_width=&quot;30dp&quot;\n                                        android:layout_height=&quot;30dp&quot;\n                                        android:layout_marginRight=&quot;12dp&quot;\n                                        android:src=&quot;@drawable/messenger&quot; /&gt;\n            \n                                &lt;/LinearLayout&gt;\n            \n                            &lt;/LinearLayout&gt;\n            \n                        &lt;/androidx.appcompat.widget.Toolbar&gt;\n            \n            \n                    &lt;/com.google.android.material.appbar.CollapsingToolbarLayout&gt;\n                        &lt;androidx.recyclerview.widget.RecyclerView\n                            android:visibility=&quot;visible&quot;\n                            android:id=&quot;@+id/feed_story_recycler&quot;\n                            android:layout_width=&quot;match_parent&quot;\n                            android:background=&quot;#000&quot;\n                            android:layout_height=&quot;wrap_content&quot;/&gt;\n                &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n            \n            \n                &lt;androidx.recyclerview.widget.RecyclerView\n                    android:layout_width=&quot;match_parent&quot;\n                    android:clipToPadding=&quot;false&quot;\n                    android:layout_marginBottom=&quot;40dp&quot;\n                    android:id=&quot;@+id/feed_recyler&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n                    &gt;\n                &lt;/androidx.recyclerview.widget.RecyclerView&gt;\n            \n            &lt;!--    Footer --&gt;\n                &lt;LinearLayout\n            \n                    android:id=&quot;@+id/home&quot;\n                    android:paddingTop=&quot;9dp&quot;\n                    android:paddingBottom=&quot;9sp&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:orientation=&quot;horizontal&quot;\n                    android:layout_gravity=&quot;bottom&quot;\n                    &gt;\n                    &lt;LinearLayout\n                        android:layout_width=&quot;0dp&quot;\n                        android:layout_weight=&quot;1&quot;\n                        android:gravity=&quot;center_horizontal&quot;\n                        android:layout_height=&quot;wrap_content&quot;&gt;\n                        &lt;ImageView\n                            android:layout_width=&quot;21.5dp&quot;\n                            android:layout_height=&quot;21.5dp&quot;\n                            android:src=&quot;@drawable/home&quot;\n                            /&gt;\n            \n                    &lt;/LinearLayout&gt;\n                    &lt;LinearLayout\n                        android:gravity=&quot;center_horizontal&quot;\n                        android:layout_width=&quot;0dp&quot;\n                        android:layout_weight=&quot;1&quot;\n                        android:layout_height=&quot;wrap_content&quot;&gt;\n                        &lt;ImageView\n                            android:layout_width=&quot;21.5dp&quot;\n                            android:layout_height=&quot;21.5dp&quot;\n                            android:src=&quot;@drawable/search&quot;\n                            android:layout_marginStart=&quot;0dp&quot;\n                            android:layout_marginEnd=&quot;0dp&quot;\n                            /&gt;\n            \n                    &lt;/LinearLayout&gt;\n                    &lt;LinearLayout\n                        android:layout_width=&quot;0dp&quot;\n                        android:gravity=&quot;center_horizontal&quot;\n                        android:layout_weight=&quot;1&quot;\n                        android:layout_height=&quot;wrap_content&quot;&gt;\n                        &lt;ImageView\n                            android:layout_width=&quot;21.5dp&quot;\n                            android:layout_height=&quot;21.5dp&quot;\n                            android:src=&quot;@drawable/plus&quot;\n                            android:layout_marginStart=&quot;0dp&quot;\n                            android:layout_marginEnd=&quot;0dp&quot;\n                            /&gt;\n            \n                    &lt;/LinearLayout&gt;\n                    &lt;LinearLayout\n                        android:layout_width=&quot;0dp&quot;\n                        android:gravity=&quot;center_horizontal&quot;\n                        android:layout_weight=&quot;1&quot;\n                        android:layout_height=&quot;wrap_content&quot;&gt;\n                        &lt;ImageView\n                            android:layout_width=&quot;21.5dp&quot;\n                            android:layout_height=&quot;21.5dp&quot;\n                            android:src=&quot;@drawable/reel&quot;\n                            android:layout_marginStart=&quot;0dp&quot;\n                            android:layout_marginEnd=&quot;-15dp&quot;\n                            /&gt;\n            \n                    &lt;/LinearLayout&gt;\n                    &lt;LinearLayout\n                        android:layout_width=&quot;0dp&quot;\n                        android:layout_weight=&quot;1&quot;\n                        android:gravity=&quot;center_horizontal&quot;\n                        android:layout_height=&quot;wrap_content&quot;&gt;\n            \n                        &lt;com.google.android.material.imageview.ShapeableImageView\n                            android:layout_width=&quot;21.5dp&quot;\n                            android:layout_height=&quot;21.5dp&quot;\n                            android:background=&quot;#00FFFFFF&quot;\n                            android:scaleType=&quot;fitXY&quot;\n                            android:src=&quot;@drawable/goku2&quot;\n                            app:shapeAppearanceOverlay=&quot;@style/circularImageView&quot; /&gt;\n                    &lt;/LinearLayout&gt;\n            \n            \n            \n            \n            \n                &lt;/LinearLayout&gt;\n            \n            &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n"},{"tags":["java","spring-security","pac4j"],"comments":[{"owner":{"account_id":2588110,"reputation":7132,"user_id":2243324,"display_name":"jzheaux"},"score":2,"creation_date":1661876191,"post_id":73544811,"comment_id":129873851,"body_markdown":"As a matter of cleaning up the question, can you clarify what this has to do with Spring Security? If nothing, then please remove those labels for clarity.","body":"As a matter of cleaning up the question, can you clarify what this has to do with Spring Security? If nothing, then please remove those labels for clarity."}],"answers":[{"tags":[],"owner":{"account_id":2588110,"reputation":7132,"user_id":2243324,"display_name":"jzheaux"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661894915,"creation_date":1661894915,"answer_id":73548635,"question_id":73544811,"body_markdown":"Since `Credentials` is a super-class of `TokenCredentials`, it seems like you&#39;d be able to do:\r\n\r\n```java\r\nprivate static class TestAuthenticator implements Authenticator {\r\n  @Override\r\n  public void validate(Credentials credentials, WebContext context, SessionStore sessionStore) {\r\n    TokenCredentials tokenCredentials = (TokenCredentials) credentials;\r\n    if (TEST_TOKEN.equals(tokenCredentials.getToken())) {\r\n      tokenCredentials.setUserProfile(mockUserProfile());\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nApologies, though, if I&#39;m missing something. It seems like the generic type was removed from `Authenticator`, meaning that a cast is now required.","title":"How to upgrade from version 2.31 to version 5.3.1 of pac4j-http and fix the arguments to org.pac4j.core.credentials.authenticator.Authenticator?","body":"<p>Since <code>Credentials</code> is a super-class of <code>TokenCredentials</code>, it seems like you'd be able to do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static class TestAuthenticator implements Authenticator {\n  @Override\n  public void validate(Credentials credentials, WebContext context, SessionStore sessionStore) {\n    TokenCredentials tokenCredentials = (TokenCredentials) credentials;\n    if (TEST_TOKEN.equals(tokenCredentials.getToken())) {\n      tokenCredentials.setUserProfile(mockUserProfile());\n    }\n  }\n}\n</code></pre>\n<p>Apologies, though, if I'm missing something. It seems like the generic type was removed from <code>Authenticator</code>, meaning that a cast is now required.</p>\n"}],"owner":{"account_id":16399037,"reputation":381,"user_id":11845631,"display_name":"Jayashree Madanala"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73548635,"answer_count":1,"score":0,"last_activity_date":1691830688,"creation_date":1661872572,"question_id":73544811,"body_markdown":"I am trying to upgrade pac4j-http:2.31 to 5.3.1 and need help dealing with a breaking change in the argument list of the `validate()` function in the [`Authenticator`](https://www.pac4j.org/docs/authenticators.html) interface.\r\n\r\nEarlier I was using `Authenticator(org.pac4j.core.credentials.authenticator.Authenticator)` which had method `public void validate(TokenCredentials credentials, WebContext context)` and now it changed to `public void validate(Credentials credentials, WebContext context, SessionStore sessionStore)`\r\n\r\nEarlier code below:\r\n```\r\nprivate static class TestAuthenticator implements Authenticator&lt;TokenCredentials&gt;\r\n  {\r\n    @Override\r\n    public void validate(TokenCredentials credentials, WebContext context)\r\n    {\r\n      if (TEST_TOKEN.equals(credentials.getToken()))\r\n      {\r\n        credentials.setUserProfile(mockUserProfile());\r\n      }\r\n    }\r\n  }\r\n```\r\nSo my question is, how to upgrade to this latest version of 5.3.1. where the validate method of `Authenticator` class has `Credential` argument instead of `TokenCredential`?  How can we validate token now since the validate method arguments changed?","title":"How to upgrade from version 2.31 to version 5.3.1 of pac4j-http and fix the arguments to org.pac4j.core.credentials.authenticator.Authenticator?","body":"<p>I am trying to upgrade pac4j-http:2.31 to 5.3.1 and need help dealing with a breaking change in the argument list of the <code>validate()</code> function in the <a href=\"https://www.pac4j.org/docs/authenticators.html\" rel=\"nofollow noreferrer\"><code>Authenticator</code></a> interface.</p>\n<p>Earlier I was using <code>Authenticator(org.pac4j.core.credentials.authenticator.Authenticator)</code> which had method <code>public void validate(TokenCredentials credentials, WebContext context)</code> and now it changed to <code>public void validate(Credentials credentials, WebContext context, SessionStore sessionStore)</code></p>\n<p>Earlier code below:</p>\n<pre><code>private static class TestAuthenticator implements Authenticator&lt;TokenCredentials&gt;\n  {\n    @Override\n    public void validate(TokenCredentials credentials, WebContext context)\n    {\n      if (TEST_TOKEN.equals(credentials.getToken()))\n      {\n        credentials.setUserProfile(mockUserProfile());\n      }\n    }\n  }\n</code></pre>\n<p>So my question is, how to upgrade to this latest version of 5.3.1. where the validate method of <code>Authenticator</code> class has <code>Credential</code> argument instead of <code>TokenCredential</code>?  How can we validate token now since the validate method arguments changed?</p>\n"},{"tags":["java","android","accessibility","screenshot","accessibilityservice"],"comments":[{"owner":{"account_id":1654563,"reputation":57569,"user_id":1524450,"display_name":"Michael"},"score":0,"creation_date":1691828587,"post_id":76888327,"comment_id":135546659,"body_markdown":"And did you set the necessary canTakeScreenshot attribute in your sevice&#39;s metadata?","body":"And did you set the necessary canTakeScreenshot attribute in your sevice&#39;s metadata?"}],"answers":[{"tags":[],"owner":{"account_id":29208623,"reputation":184,"user_id":22377147,"display_name":"Shashank saxena"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691828999,"creation_date":1691828999,"answer_id":76888396,"question_id":76888327,"body_markdown":"It could be due to a variety of reasons such as a bug in the Android system, an issue with the device hardware, or a problem with the app’s implementation. You might want to try running your app on a different device or emulator to see if the issue persists.\r\n\r\nIf the error still occurs then try debugging to see any error in its implementation.\r\n\r\nAlso, The log shows that there is a warning about a ClassLoaderContext classpath size mismatch and a warning about Found duplicate classes1. These warnings suggest that there might be an issue with the way your app is set up or built.\r\n\r\nCheck log with first three lines:\r\n\r\nW ClassLoaderContext classpath size mismatch\r\n\r\nW  Found duplicate classes, falling back to extracting from APK \r\n","title":"Taking screenshot on android phone with Accessibility Service always fails with internal error","body":"<p>It could be due to a variety of reasons such as a bug in the Android system, an issue with the device hardware, or a problem with the app’s implementation. You might want to try running your app on a different device or emulator to see if the issue persists.</p>\n<p>If the error still occurs then try debugging to see any error in its implementation.</p>\n<p>Also, The log shows that there is a warning about a ClassLoaderContext classpath size mismatch and a warning about Found duplicate classes1. These warnings suggest that there might be an issue with the way your app is set up or built.</p>\n<p>Check log with first three lines:</p>\n<p>W ClassLoaderContext classpath size mismatch</p>\n<p>W  Found duplicate classes, falling back to extracting from APK</p>\n"}],"owner":{"account_id":25355576,"reputation":21,"user_id":22182412,"display_name":"Predator"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691828999,"creation_date":1691827699,"question_id":76888327,"body_markdown":"I am trying to create an app that allows me to take screenshot of the current displayed screen of another app after pressing a button. Everytime I press the button and start the service of taking a screenshot, it fails and return error code of 1. Can anyone explain why it is always returning error code of 1 and tell me the correct way of taking a screenshot with Android AccessibilityService. \r\n\r\n```\r\npublic class AutoService extends AccessibilityService {\r\n    private Handler mHandler;\r\n    public static Bitmap sudokuMap = null;\r\n    public static boolean result;\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n        HandlerThread handlerThread = new HandlerThread(&quot;auto-handler&quot;);\r\n        handlerThread.start();\r\n        mHandler = new Handler(handlerThread.getLooper());\r\n    }\r\n\r\n    @Override\r\n    protected void onServiceConnected() {\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n        Log.d(&quot;Service&quot;,&quot;SERVICE STARTED&quot;);\r\n        if (intent != null) {\r\n            String action = intent.getStringExtra(&quot;action&quot;);\r\n            if (action.equals(&quot;capture&quot;)) {\r\n                if (mRunnable == null) {\r\n                    mRunnable = new IntervalRunnable();\r\n                }\r\n                mHandler.post(mRunnable);\r\n\r\n                Toast.makeText(getBaseContext(), &quot;Started&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n            else if (action.equals(&quot;stop&quot;)) {\r\n                mHandler.removeCallbacksAndMessages(null);\r\n            }\r\n        }\r\n\r\n        return super.onStartCommand(intent, flags, startId);\r\n    }\r\n\r\n    @Override\r\n    public void takeScreenshot(int displayId, Executor executor, AccessibilityService.TakeScreenshotCallback callback) {\r\n        super.takeScreenshot(displayId, executor, callback);\r\n    }\r\n\r\n    @Override\r\n    public void onAccessibilityEvent(AccessibilityEvent event) {\r\n    }\r\n\r\n    @Override\r\n    public void onInterrupt() {\r\n    }\r\n\r\n    public void screenshot() {\r\n        Log.d(&quot;SCREENSHOT&quot;, &quot;trying to capture&quot;);\r\n        takeScreenshot(Display.DEFAULT_DISPLAY, getApplicationContext().getMainExecutor(), new TakeScreenshotCallback() {\r\n            @Override\r\n            public void onSuccess(@NonNull ScreenshotResult screenshotResult) {\r\n                Log.d(&quot;SCREENSHOT&quot;, &quot;Success&quot;);\r\n                sudokuMap = Bitmap.wrapHardwareBuffer(screenshotResult.getHardwareBuffer(), screenshotResult.getColorSpace());\r\n                sudokuMap = Bitmap.createBitmap(sudokuMap, 39,498,1002,1002);\r\n                result = true;\r\n                Toast.makeText(getBaseContext(), &quot;Success&quot;, Toast.LENGTH_LONG).show();\r\n                saveImage(sudokuMap);\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(int i) {\r\n                Log.d(&quot;SCREENSHOT&quot;, &quot;Failed &quot; + i);\r\n                sudokuMap = Bitmap.createBitmap(1,1, Bitmap.Config.ARGB_8888);\r\n                result = false;\r\n                Toast.makeText(getBaseContext(), &quot;Failed &quot; + i, Toast.LENGTH_LONG).show();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void saveImage(Bitmap image) {\r\n        File root = Environment.getExternalStorageDirectory();\r\n        File file = new File(root.getAbsolutePath()+&quot;/DCIM/test/test.png&quot;);\r\n        File dir = new File(root.getAbsolutePath()+&quot;/DCIM/test&quot;);\r\n        if (!dir.exists())\r\n            dir.mkdir();\r\n        try {\r\n            file.createNewFile();\r\n            OutputStream outputStream = new FileOutputStream(file);\r\n            image.compress(Bitmap.CompressFormat.PNG, 100, outputStream);\r\n            outputStream.close();\r\n            Toast.makeText(getBaseContext(), &quot;Image saved&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private IntervalRunnable mRunnable;\r\n\r\n    private class IntervalRunnable implements Runnable {\r\n        @Override\r\n        public void run() {\r\n            Log.d(&quot;SCREENSHOT&quot;,&quot;Started&quot;);\r\n            screenshot();\r\n        }\r\n    }\r\n}\r\n```\r\nAfter entering the service, the program will start taking screenshot with the run() method. \r\n\r\nThe log detail is below\r\n```\r\n2023-08-12 15:37:31.838 31840-31840 ActivityThread          com.example.sudokusolver             W  Application com.example.sudokusolver can be debugged on port 8100...\r\n2023-08-12 15:37:31.850 31840-31840 le.sudokusolve          com.example.sudokusolver             W  ClassLoaderContext classpath size mismatch. expected=0, found=1 (PCL[] | PCL[/data/data/com.example.sudokusolver/code_cache/.overlay/base.apk/classes4.dex*4114240452])\r\n2023-08-12 15:37:31.850 31840-31840 le.sudokusolve          com.example.sudokusolver             W  Found duplicate classes, falling back to extracting from APK : /data/app/~~SulUYZxd5YnqTvrkNbJQdw==/com.example.sudokusolver-W8DCKxBEqhN-8T7rr30ACQ==/base.apk\r\n2023-08-12 15:37:31.851 31840-31840 le.sudokusolve          com.example.sudokusolver             W  NOTE: This wastes RAM and hurts startup performance.\r\n2023-08-12 15:37:31.851 31840-31840 le.sudokusolve          com.example.sudokusolver             W  Found duplicated class when checking oat files: &#39;Lcom/example/sudokusolver/AutoService$1;&#39; in /data/data/com.example.sudokusolver/code_cache/.overlay/base.apk/classes4.dex and /data/app/~~SulUYZxd5YnqTvrkNbJQdw==/com.example.sudokusolver-W8DCKxBEqhN-8T7rr30ACQ==/base.apk!classes4.dex\r\n2023-08-12 15:37:32.070 31840-31840 NetworkSecurityConfig   com.example.sudokusolver             D  No Network Security Config specified, using platform default\r\n2023-08-12 15:37:32.070 31840-31840 NetworkSecurityConfig   com.example.sudokusolver             D  No Network Security Config specified, using platform default\r\n2023-08-12 15:37:32.075 31840-31840 libc                    com.example.sudokusolver             E  Access denied finding property &quot;ro.vendor.pref_scale_resolution&quot;\r\n2023-08-12 15:37:32.104 31840-31887 libMEOW                 com.example.sudokusolver             D  meow reload base cfg path: na\r\n2023-08-12 15:37:32.104 31840-31887 libMEOW                 com.example.sudokusolver             D  meow reload overlay cfg path: na\r\n2023-08-12 15:37:32.105 31840-31887 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\r\n2023-08-12 15:37:32.105 31840-31887 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\r\n2023-08-12 15:37:32.148 31840-31840 AppCompatDelegate       com.example.sudokusolver             D  Checking for metadata for AppLocalesMetadataHolderService : Service not found\r\n2023-08-12 15:37:32.177 31840-31840 View                    com.example.sudokusolver             D  com.example.sudokusolver initForcedUseForceDark: 1\r\n2023-08-12 15:37:32.184 31840-31840 DecorView[]             com.example.sudokusolver             D  getWindowModeFromSystem  windowmode is 1\r\n2023-08-12 15:37:32.185 31840-31840 DecorView               com.example.sudokusolver             D  createDecorCaptionView windowingMode:1 mWindowMode 1 isFullscreen: true\r\n2023-08-12 15:37:32.244 31840-31840 le.sudokusolve          com.example.sudokusolver             W  Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (greylist, reflection, allowed)\r\n2023-08-12 15:37:32.245 31840-31840 le.sudokusolve          com.example.sudokusolver             W  Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (greylist, reflection, allowed)\r\n2023-08-12 15:37:32.352 31840-31840 SurfaceFactory          com.example.sudokusolver             I  [static] sSurfaceFactory = com.mediatek.view.impl.SurfaceFactoryImpl@6e07aeb\r\n2023-08-12 15:37:32.358 31840-31840 ViewRootIm...nActivity] com.example.sudokusolver             D  hardware acceleration = true , fakeHwAccelerated = false, sRendererDisabled = false, forceHwAccelerated = false, sSystemRendererDisabled = false\r\n2023-08-12 15:37:32.363 31840-31840 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\r\n2023-08-12 15:37:32.363 31840-31840 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\r\n2023-08-12 15:37:32.363 31840-31840 InputTransport          com.example.sudokusolver             I  Create ARC handle: 0xb400007c589ddb20\r\n2023-08-12 15:37:32.366 31840-31840 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 0, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\r\n2023-08-12 15:37:32.367 31840-31840 Looper                  com.example.sudokusolver             W  PerfMonitor looperActivity : package=com.example.sudokusolver/.MainActivity time=275ms latency=326ms running=251ms  procState=2 ClientTransaction{ callbacks=[android.app.servertransaction.LaunchActivityItem] lifecycleRequest=android.app.servertransaction.ResumeActivityItem } historyMsgCount=3 (msgIndex=1 wall=65ms seq=1 running=62ms runnable=1ms late=4ms h=android.app.ActivityThread$H w=162) (msgIndex=3 wall=263ms seq=3 running=247ms late=64ms h=android.app.ActivityThread$H w=110)\r\n2023-08-12 15:37:32.368 31840-31840 Looper                  com.example.sudokusolver             W  PerfMonitor looperActivity : package=com.example.sudokusolver/.MainActivity time=0ms latency=601ms running=0ms  procState=2 ClientTransaction{ callbacks=[android.app.servertransaction.TopResumedActivityChangeItem] } historyMsgCount=4 (msgIndex=1 wall=65ms seq=1 running=62ms runnable=1ms late=4ms h=android.app.ActivityThread$H w=162) (msgIndex=3 wall=263ms seq=3 running=247ms late=64ms h=android.app.ActivityThread$H w=110) (msgIndex=4 wall=275ms seq=4 running=251ms runnable=2ms late=326ms h=android.app.ActivityThread$H w=159)\r\n2023-08-12 15:37:32.396 31840-31885 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\r\n2023-08-12 15:37:32.396 31840-31885 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\r\n2023-08-12 15:37:32.401 31840-31885 GED                     com.example.sudokusolver             I  [GT]_get_procNameprocess pid(31840)\r\n2023-08-12 15:37:32.401 31840-31885 GED                     com.example.sudokusolver             I  [GT]_getprocess name(com.example.sudokusolver)\r\n2023-08-12 15:37:32.401 31840-31885 le.sudokusolve          com.example.sudokusolver             I  [GT] ret(1) gt_status(00000000) aniso_debug_level(0) gt_aniso_max_level(16) ani so mask(00000001) tri mask(00000002)\r\n2023-08-12 15:37:32.401 31840-31885 libMEOW_gift            com.example.sudokusolver             I  ctx:0xb400007c69ca2ee8, ARC not Enabled.\r\n2023-08-12 15:37:32.413 31840-31885 ion                     com.example.sudokusolver             E  ioctl c0044901 failed with code -1: Invalid argument\r\n2023-08-12 15:37:33.760 31840-31876 System                  com.example.sudokusolver             W  A resource failed to call close. \r\n2023-08-12 15:37:33.761 31840-31876 System                  com.example.sudokusolver             W  A resource failed to call close. \r\n2023-08-12 15:37:34.299 31840-31840 ViewRootImpl[]          com.example.sudokusolver             D  hardware acceleration = true , fakeHwAccelerated = false, sRendererDisabled = false, forceHwAccelerated = false, sSystemRendererDisabled = false\r\n2023-08-12 15:37:34.307 31840-31840 InputTransport          com.example.sudokusolver             I  Create ARC handle: 0xb400007d005f60e0\r\n2023-08-12 15:37:34.397 31840-31885 GED                     com.example.sudokusolver             I  ged_boost_gpu_freq, level 100, eOrigin 2, final_idx 42, oppidx_max 42, oppidx_min 0\r\n2023-08-12 15:37:34.896 31840-31840 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 4, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\r\n2023-08-12 15:37:34.904 31840-31840 View                    com.example.sudokusolver             D  [Warning] assignParent to null: this = DecorView@a84f8f4[MainActivity]\r\n2023-08-12 15:37:34.910 31840-31840 InputTransport          com.example.sudokusolver             I  Destroy ARC handle: 0xb400007c589ddb20\r\n2023-08-12 15:37:39.939 31840-31840 Service                 com.example.sudokusolver             D  SERVICE STARTED\r\n2023-08-12 15:37:39.940 31840-31909 clicked                 com.example.sudokusolver             D  click\r\n2023-08-12 15:37:39.941 31840-31840 Compatibil...geReporter com.example.sudokusolver             D  Compat change id reported: 147798919; UID 10496; state: ENABLED\r\n2023-08-12 15:37:40.063 31840-31883 le.sudokusolve          com.example.sudokusolver             I  ProcessProfilingInfo new_methods=0 is saved saved_to_disk=0 resolve_classes_delay=8000\r\n2023-08-12 15:38:01.512 31840-31840 le.sudokusolver         com.example.sudokusolver             W  type=1400 audit(0.0:137797): avc: granted { execute } for path=&quot;/data/data/com.example.sudokusolver/code_cache/startup_agents/31c79e06-agent.so&quot; dev=&quot;dm-11&quot; ino=618782 scontext=u:r:untrusted_app:s0:c240,c257,c512,c768 tcontext=u:object_r:app_data_file:s0:c240,c257,c512,c768 tclass=file app=com.example.sudokusolver\r\n2023-08-12 15:38:01.524 31840-31840 studio.deploy           com.example.sudokusolver             V  Prior agent invocations in this VM: 0\r\n2023-08-12 15:38:01.547 31840-31840 studio.deploy           com.example.sudokusolver             I  Using Structure Redefinition Extension\r\n2023-08-12 15:38:01.553 29979-29979 studio.deploy           pid-29979                            E  Could not remove dir &#39;/data/data/com.example.sudokusolver/code_cache/.ll/&#39;: No such file or directory\r\n2023-08-12 15:38:05.980 31840-31885 OpenGLRenderer          com.example.sudokusolver             D  endAllActiveAnimators on 0xb400007c0b85b700 (RippleDrawable) with handle 0xb400007c69c18040\r\n2023-08-12 15:38:05.981 31840-31840 View                    com.example.sudokusolver             D  [Warning] assignParent to null: this = android.widget.FrameLayout{bbe7467 V.E...... ........ 0,0-550,165}\r\n2023-08-12 15:38:05.995 31840-31840 InputTransport          com.example.sudokusolver             I  Destroy ARC handle: 0xb400007d005f60e0\r\n2023-08-12 15:38:05.996 31840-31840 Service                 com.example.sudokusolver             D  SERVICE STARTED\r\n2023-08-12 15:38:08.852  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=154   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\r\n---------------------------- PROCESS ENDED (31840) for package com.example.sudokusolver ----------------------------\r\n2023-08-12 15:38:10.792 29979-29979 studio.deploy           pid-29979                            E  Could not remove dir &#39;/data/data/com.example.sudokusolver/code_cache/.ll/&#39;: No such file or directory\r\n---------------------------- PROCESS STARTED (31982) for package com.example.sudokusolver ----------------------------\r\n2023-08-12 15:38:11.195 31982-31982 ActivityThread          com.example.sudokusolver             W  Application com.example.sudokusolver can be debugged on port 8100...\r\n2023-08-12 15:38:11.206 31982-31982 le.sudokusolve          com.example.sudokusolver             W  ClassLoaderContext classpath size mismatch. expected=0, found=1 (PCL[] | PCL[/data/data/com.example.sudokusolver/code_cache/.overlay/base.apk/classes4.dex*127293272])\r\n2023-08-12 15:38:11.207 31982-31982 le.sudokusolve          com.example.sudokusolver             W  Found duplicate classes, falling back to extracting from APK : /data/app/~~SulUYZxd5YnqTvrkNbJQdw==/com.example.sudokusolver-W8DCKxBEqhN-8T7rr30ACQ==/base.apk\r\n2023-08-12 15:38:11.207 31982-31982 le.sudokusolve          com.example.sudokusolver             W  NOTE: This wastes RAM and hurts startup performance.\r\n2023-08-12 15:38:11.207 31982-31982 le.sudokusolve          com.example.sudokusolver             W  Found duplicated class when checking oat files: &#39;Lcom/example/sudokusolver/AutoService$1;&#39; in /data/data/com.example.sudokusolver/code_cache/.overlay/base.apk/classes4.dex and /data/app/~~SulUYZxd5YnqTvrkNbJQdw==/com.example.sudokusolver-W8DCKxBEqhN-8T7rr30ACQ==/base.apk!classes4.dex\r\n2023-08-12 15:38:11.431 31982-31982 NetworkSecurityConfig   com.example.sudokusolver             D  No Network Security Config specified, using platform default\r\n2023-08-12 15:38:11.432 31982-31982 NetworkSecurityConfig   com.example.sudokusolver             D  No Network Security Config specified, using platform default\r\n2023-08-12 15:38:11.436 31982-31982 libc                    com.example.sudokusolver             E  Access denied finding property &quot;ro.vendor.pref_scale_resolution&quot;\r\n2023-08-12 15:38:11.467 31982-32015 libMEOW                 com.example.sudokusolver             D  meow reload base cfg path: na\r\n2023-08-12 15:38:11.467 31982-32015 libMEOW                 com.example.sudokusolver             D  meow reload overlay cfg path: na\r\n2023-08-12 15:38:11.469 31982-32015 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\r\n2023-08-12 15:38:11.469 31982-32015 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\r\n2023-08-12 15:38:11.513 31982-31982 AppCompatDelegate       com.example.sudokusolver             D  Checking for metadata for AppLocalesMetadataHolderService : Service not found\r\n2023-08-12 15:38:11.543 31982-31982 View                    com.example.sudokusolver             D  com.example.sudokusolver initForcedUseForceDark: 1\r\n2023-08-12 15:38:11.553 31982-31982 DecorView[]             com.example.sudokusolver             D  getWindowModeFromSystem  windowmode is 1\r\n2023-08-12 15:38:11.553 31982-31982 DecorView               com.example.sudokusolver             D  createDecorCaptionView windowingMode:1 mWindowMode 1 isFullscreen: true\r\n2023-08-12 15:38:11.616 31982-31982 le.sudokusolve          com.example.sudokusolver             W  Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (greylist, reflection, allowed)\r\n2023-08-12 15:38:11.616 31982-31982 le.sudokusolve          com.example.sudokusolver             W  Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (greylist, reflection, allowed)\r\n2023-08-12 15:38:11.721 31982-31982 SurfaceFactory          com.example.sudokusolver             I  [static] sSurfaceFactory = com.mediatek.view.impl.SurfaceFactoryImpl@6e07aeb\r\n2023-08-12 15:38:11.728 31982-31982 ViewRootIm...nActivity] com.example.sudokusolver             D  hardware acceleration = true , fakeHwAccelerated = false, sRendererDisabled = false, forceHwAccelerated = false, sSystemRendererDisabled = false\r\n2023-08-12 15:38:11.732 31982-31982 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\r\n2023-08-12 15:38:11.732 31982-31982 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\r\n2023-08-12 15:38:11.732 31982-31982 InputTransport          com.example.sudokusolver             I  Create ARC handle: 0xb400007c589e1bc0\r\n2023-08-12 15:38:11.735 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 0, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\r\n2023-08-12 15:38:11.736 31982-31982 Looper                  com.example.sudokusolver             W  PerfMonitor looperActivity : package=com.example.sudokusolver/.MainActivity time=282ms latency=329ms running=254ms  procState=2 ClientTransaction{ callbacks=[android.app.servertransaction.LaunchActivityItem] lifecycleRequest=android.app.servertransaction.ResumeActivityItem } historyMsgCount=3 (msgIndex=1 wall=67ms seq=1 running=63ms late=2ms h=android.app.ActivityThread$H w=162) (msgIndex=3 wall=270ms seq=3 running=253ms late=61ms h=android.app.ActivityThread$H w=110)\r\n2023-08-12 15:38:11.736 31982-31982 Looper                  com.example.sudokusolver             W  PerfMonitor looperActivity : package=com.example.sudokusolver/.MainActivity time=0ms latency=612ms running=0ms  procState=2 ClientTransaction{ callbacks=[android.app.servertransaction.TopResumedActivityChangeItem] } historyMsgCount=4 (msgIndex=1 wall=67ms seq=1 running=63ms late=2ms h=android.app.ActivityThread$H w=162) (msgIndex=3 wall=270ms seq=3 running=253ms late=61ms h=android.app.ActivityThread$H w=110) (msgIndex=4 wall=282ms seq=4 running=254ms runnable=1ms late=329ms h=android.app.ActivityThread$H w=159)\r\n2023-08-12 15:38:11.765 31982-32008 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\r\n2023-08-12 15:38:11.765 31982-32008 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\r\n2023-08-12 15:38:11.771 31982-32008 GED                     com.example.sudokusolver             I  [GT]_get_procNameprocess pid(31982)\r\n2023-08-12 15:38:11.771 31982-32008 GED                     com.example.sudokusolver             I  [GT]_getprocess name(com.example.sudokusolver)\r\n2023-08-12 15:38:11.771 31982-32008 le.sudokusolve          com.example.sudokusolver             I  [GT] ret(1) gt_status(00000000) aniso_debug_level(0) gt_aniso_max_level(16) ani so mask(00000001) tri mask(00000002)\r\n2023-08-12 15:38:11.771 31982-32008 libMEOW_gift            com.example.sudokusolver             I  ctx:0xb400007c69ca2ee8, ARC not Enabled.\r\n2023-08-12 15:38:11.784 31982-32008 ion                     com.example.sudokusolver             E  ioctl c0044901 failed with code -1: Invalid argument\r\n2023-08-12 15:38:12.801  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\r\n2023-08-12 15:38:12.845  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\r\n2023-08-12 15:38:13.121 31982-32001 System                  com.example.sudokusolver             W  A resource failed to call close. \r\n2023-08-12 15:38:13.121 31982-32001 System                  com.example.sudokusolver             W  A resource failed to call close. \r\n2023-08-12 15:38:13.349 31982-32008 GED                     com.example.sudokusolver             I  ged_boost_gpu_freq, level 100, eOrigin 2, final_idx 42, oppidx_max 42, oppidx_min 0\r\n2023-08-12 15:38:13.359 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 4, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\r\n2023-08-12 15:38:19.421 31982-32006 le.sudokusolve          com.example.sudokusolver             I  ProcessProfilingInfo new_methods=0 is saved saved_to_disk=0 resolve_classes_delay=8000\r\n2023-08-12 15:38:26.789  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\r\n2023-08-12 15:38:26.795  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\r\n2023-08-12 15:38:26.840  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\r\n2023-08-12 15:38:27.297 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 0, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\r\n2023-08-12 15:38:27.301 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 0, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\r\n2023-08-12 15:38:27.967 31982-31982 ViewRootImpl[]          com.example.sudokusolver             D  hardware acceleration = true , fakeHwAccelerated = false, sRendererDisabled = false, forceHwAccelerated = false, sSystemRendererDisabled = false\r\n2023-08-12 15:38:27.974 31982-31982 InputTransport          com.example.sudokusolver             I  Create ARC handle: 0xb400007c63937f20\r\n2023-08-12 15:38:28.697 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 4, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\r\n2023-08-12 15:38:28.701 31982-31982 View                    com.example.sudokusolver             D  [Warning] assignParent to null: this = DecorView@a84f8f4[MainActivity]\r\n2023-08-12 15:38:28.704 31982-31982 InputTransport          com.example.sudokusolver             I  Destroy ARC handle: 0xb400007c589e1bc0\r\n2023-08-12 15:38:28.736 31982-31982 Service                 com.example.sudokusolver             D  SERVICE STARTED\r\n2023-08-12 15:38:28.737 31982-32059 SCREENSHOT                 com.example.sudokusolver             D  Starting\r\n2023-08-12 15:38:28.737 31982-32059 SCREENSHOT              com.example.sudokusolver             D  trying to capture\r\n2023-08-12 15:38:28.737 31982-31982 Compatibil...geReporter com.example.sudokusolver             D  Compat change id reported: 147798919; UID 10496; state: ENABLED\r\n2023-08-12 15:38:28.745 31982-31982 SCREENSHOT              com.example.sudokusolver             D  Failed 1\r\n```\r\nFrom the result of the TakeScreenshotCallback() method, it returned int error code of 1, Android studio website said the error code meant internal error, but what is causing the internal error? ","title":"Taking screenshot on android phone with Accessibility Service always fails with internal error","body":"<p>I am trying to create an app that allows me to take screenshot of the current displayed screen of another app after pressing a button. Everytime I press the button and start the service of taking a screenshot, it fails and return error code of 1. Can anyone explain why it is always returning error code of 1 and tell me the correct way of taking a screenshot with Android AccessibilityService.</p>\n<pre><code>public class AutoService extends AccessibilityService {\n    private Handler mHandler;\n    public static Bitmap sudokuMap = null;\n    public static boolean result;\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        HandlerThread handlerThread = new HandlerThread(&quot;auto-handler&quot;);\n        handlerThread.start();\n        mHandler = new Handler(handlerThread.getLooper());\n    }\n\n    @Override\n    protected void onServiceConnected() {\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        Log.d(&quot;Service&quot;,&quot;SERVICE STARTED&quot;);\n        if (intent != null) {\n            String action = intent.getStringExtra(&quot;action&quot;);\n            if (action.equals(&quot;capture&quot;)) {\n                if (mRunnable == null) {\n                    mRunnable = new IntervalRunnable();\n                }\n                mHandler.post(mRunnable);\n\n                Toast.makeText(getBaseContext(), &quot;Started&quot;, Toast.LENGTH_SHORT).show();\n            }\n            else if (action.equals(&quot;stop&quot;)) {\n                mHandler.removeCallbacksAndMessages(null);\n            }\n        }\n\n        return super.onStartCommand(intent, flags, startId);\n    }\n\n    @Override\n    public void takeScreenshot(int displayId, Executor executor, AccessibilityService.TakeScreenshotCallback callback) {\n        super.takeScreenshot(displayId, executor, callback);\n    }\n\n    @Override\n    public void onAccessibilityEvent(AccessibilityEvent event) {\n    }\n\n    @Override\n    public void onInterrupt() {\n    }\n\n    public void screenshot() {\n        Log.d(&quot;SCREENSHOT&quot;, &quot;trying to capture&quot;);\n        takeScreenshot(Display.DEFAULT_DISPLAY, getApplicationContext().getMainExecutor(), new TakeScreenshotCallback() {\n            @Override\n            public void onSuccess(@NonNull ScreenshotResult screenshotResult) {\n                Log.d(&quot;SCREENSHOT&quot;, &quot;Success&quot;);\n                sudokuMap = Bitmap.wrapHardwareBuffer(screenshotResult.getHardwareBuffer(), screenshotResult.getColorSpace());\n                sudokuMap = Bitmap.createBitmap(sudokuMap, 39,498,1002,1002);\n                result = true;\n                Toast.makeText(getBaseContext(), &quot;Success&quot;, Toast.LENGTH_LONG).show();\n                saveImage(sudokuMap);\n            }\n\n            @Override\n            public void onFailure(int i) {\n                Log.d(&quot;SCREENSHOT&quot;, &quot;Failed &quot; + i);\n                sudokuMap = Bitmap.createBitmap(1,1, Bitmap.Config.ARGB_8888);\n                result = false;\n                Toast.makeText(getBaseContext(), &quot;Failed &quot; + i, Toast.LENGTH_LONG).show();\n            }\n        });\n    }\n\n    private void saveImage(Bitmap image) {\n        File root = Environment.getExternalStorageDirectory();\n        File file = new File(root.getAbsolutePath()+&quot;/DCIM/test/test.png&quot;);\n        File dir = new File(root.getAbsolutePath()+&quot;/DCIM/test&quot;);\n        if (!dir.exists())\n            dir.mkdir();\n        try {\n            file.createNewFile();\n            OutputStream outputStream = new FileOutputStream(file);\n            image.compress(Bitmap.CompressFormat.PNG, 100, outputStream);\n            outputStream.close();\n            Toast.makeText(getBaseContext(), &quot;Image saved&quot;, Toast.LENGTH_SHORT).show();\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private IntervalRunnable mRunnable;\n\n    private class IntervalRunnable implements Runnable {\n        @Override\n        public void run() {\n            Log.d(&quot;SCREENSHOT&quot;,&quot;Started&quot;);\n            screenshot();\n        }\n    }\n}\n</code></pre>\n<p>After entering the service, the program will start taking screenshot with the run() method.</p>\n<p>The log detail is below</p>\n<pre><code>2023-08-12 15:37:31.838 31840-31840 ActivityThread          com.example.sudokusolver             W  Application com.example.sudokusolver can be debugged on port 8100...\n2023-08-12 15:37:31.850 31840-31840 le.sudokusolve          com.example.sudokusolver             W  ClassLoaderContext classpath size mismatch. expected=0, found=1 (PCL[] | PCL[/data/data/com.example.sudokusolver/code_cache/.overlay/base.apk/classes4.dex*4114240452])\n2023-08-12 15:37:31.850 31840-31840 le.sudokusolve          com.example.sudokusolver             W  Found duplicate classes, falling back to extracting from APK : /data/app/~~SulUYZxd5YnqTvrkNbJQdw==/com.example.sudokusolver-W8DCKxBEqhN-8T7rr30ACQ==/base.apk\n2023-08-12 15:37:31.851 31840-31840 le.sudokusolve          com.example.sudokusolver             W  NOTE: This wastes RAM and hurts startup performance.\n2023-08-12 15:37:31.851 31840-31840 le.sudokusolve          com.example.sudokusolver             W  Found duplicated class when checking oat files: 'Lcom/example/sudokusolver/AutoService$1;' in /data/data/com.example.sudokusolver/code_cache/.overlay/base.apk/classes4.dex and /data/app/~~SulUYZxd5YnqTvrkNbJQdw==/com.example.sudokusolver-W8DCKxBEqhN-8T7rr30ACQ==/base.apk!classes4.dex\n2023-08-12 15:37:32.070 31840-31840 NetworkSecurityConfig   com.example.sudokusolver             D  No Network Security Config specified, using platform default\n2023-08-12 15:37:32.070 31840-31840 NetworkSecurityConfig   com.example.sudokusolver             D  No Network Security Config specified, using platform default\n2023-08-12 15:37:32.075 31840-31840 libc                    com.example.sudokusolver             E  Access denied finding property &quot;ro.vendor.pref_scale_resolution&quot;\n2023-08-12 15:37:32.104 31840-31887 libMEOW                 com.example.sudokusolver             D  meow reload base cfg path: na\n2023-08-12 15:37:32.104 31840-31887 libMEOW                 com.example.sudokusolver             D  meow reload overlay cfg path: na\n2023-08-12 15:37:32.105 31840-31887 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\n2023-08-12 15:37:32.105 31840-31887 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\n2023-08-12 15:37:32.148 31840-31840 AppCompatDelegate       com.example.sudokusolver             D  Checking for metadata for AppLocalesMetadataHolderService : Service not found\n2023-08-12 15:37:32.177 31840-31840 View                    com.example.sudokusolver             D  com.example.sudokusolver initForcedUseForceDark: 1\n2023-08-12 15:37:32.184 31840-31840 DecorView[]             com.example.sudokusolver             D  getWindowModeFromSystem  windowmode is 1\n2023-08-12 15:37:32.185 31840-31840 DecorView               com.example.sudokusolver             D  createDecorCaptionView windowingMode:1 mWindowMode 1 isFullscreen: true\n2023-08-12 15:37:32.244 31840-31840 le.sudokusolve          com.example.sudokusolver             W  Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (greylist, reflection, allowed)\n2023-08-12 15:37:32.245 31840-31840 le.sudokusolve          com.example.sudokusolver             W  Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (greylist, reflection, allowed)\n2023-08-12 15:37:32.352 31840-31840 SurfaceFactory          com.example.sudokusolver             I  [static] sSurfaceFactory = com.mediatek.view.impl.SurfaceFactoryImpl@6e07aeb\n2023-08-12 15:37:32.358 31840-31840 ViewRootIm...nActivity] com.example.sudokusolver             D  hardware acceleration = true , fakeHwAccelerated = false, sRendererDisabled = false, forceHwAccelerated = false, sSystemRendererDisabled = false\n2023-08-12 15:37:32.363 31840-31840 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\n2023-08-12 15:37:32.363 31840-31840 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\n2023-08-12 15:37:32.363 31840-31840 InputTransport          com.example.sudokusolver             I  Create ARC handle: 0xb400007c589ddb20\n2023-08-12 15:37:32.366 31840-31840 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 0, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\n2023-08-12 15:37:32.367 31840-31840 Looper                  com.example.sudokusolver             W  PerfMonitor looperActivity : package=com.example.sudokusolver/.MainActivity time=275ms latency=326ms running=251ms  procState=2 ClientTransaction{ callbacks=[android.app.servertransaction.LaunchActivityItem] lifecycleRequest=android.app.servertransaction.ResumeActivityItem } historyMsgCount=3 (msgIndex=1 wall=65ms seq=1 running=62ms runnable=1ms late=4ms h=android.app.ActivityThread$H w=162) (msgIndex=3 wall=263ms seq=3 running=247ms late=64ms h=android.app.ActivityThread$H w=110)\n2023-08-12 15:37:32.368 31840-31840 Looper                  com.example.sudokusolver             W  PerfMonitor looperActivity : package=com.example.sudokusolver/.MainActivity time=0ms latency=601ms running=0ms  procState=2 ClientTransaction{ callbacks=[android.app.servertransaction.TopResumedActivityChangeItem] } historyMsgCount=4 (msgIndex=1 wall=65ms seq=1 running=62ms runnable=1ms late=4ms h=android.app.ActivityThread$H w=162) (msgIndex=3 wall=263ms seq=3 running=247ms late=64ms h=android.app.ActivityThread$H w=110) (msgIndex=4 wall=275ms seq=4 running=251ms runnable=2ms late=326ms h=android.app.ActivityThread$H w=159)\n2023-08-12 15:37:32.396 31840-31885 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\n2023-08-12 15:37:32.396 31840-31885 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\n2023-08-12 15:37:32.401 31840-31885 GED                     com.example.sudokusolver             I  [GT]_get_procNameprocess pid(31840)\n2023-08-12 15:37:32.401 31840-31885 GED                     com.example.sudokusolver             I  [GT]_getprocess name(com.example.sudokusolver)\n2023-08-12 15:37:32.401 31840-31885 le.sudokusolve          com.example.sudokusolver             I  [GT] ret(1) gt_status(00000000) aniso_debug_level(0) gt_aniso_max_level(16) ani so mask(00000001) tri mask(00000002)\n2023-08-12 15:37:32.401 31840-31885 libMEOW_gift            com.example.sudokusolver             I  ctx:0xb400007c69ca2ee8, ARC not Enabled.\n2023-08-12 15:37:32.413 31840-31885 ion                     com.example.sudokusolver             E  ioctl c0044901 failed with code -1: Invalid argument\n2023-08-12 15:37:33.760 31840-31876 System                  com.example.sudokusolver             W  A resource failed to call close. \n2023-08-12 15:37:33.761 31840-31876 System                  com.example.sudokusolver             W  A resource failed to call close. \n2023-08-12 15:37:34.299 31840-31840 ViewRootImpl[]          com.example.sudokusolver             D  hardware acceleration = true , fakeHwAccelerated = false, sRendererDisabled = false, forceHwAccelerated = false, sSystemRendererDisabled = false\n2023-08-12 15:37:34.307 31840-31840 InputTransport          com.example.sudokusolver             I  Create ARC handle: 0xb400007d005f60e0\n2023-08-12 15:37:34.397 31840-31885 GED                     com.example.sudokusolver             I  ged_boost_gpu_freq, level 100, eOrigin 2, final_idx 42, oppidx_max 42, oppidx_min 0\n2023-08-12 15:37:34.896 31840-31840 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 4, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\n2023-08-12 15:37:34.904 31840-31840 View                    com.example.sudokusolver             D  [Warning] assignParent to null: this = DecorView@a84f8f4[MainActivity]\n2023-08-12 15:37:34.910 31840-31840 InputTransport          com.example.sudokusolver             I  Destroy ARC handle: 0xb400007c589ddb20\n2023-08-12 15:37:39.939 31840-31840 Service                 com.example.sudokusolver             D  SERVICE STARTED\n2023-08-12 15:37:39.940 31840-31909 clicked                 com.example.sudokusolver             D  click\n2023-08-12 15:37:39.941 31840-31840 Compatibil...geReporter com.example.sudokusolver             D  Compat change id reported: 147798919; UID 10496; state: ENABLED\n2023-08-12 15:37:40.063 31840-31883 le.sudokusolve          com.example.sudokusolver             I  ProcessProfilingInfo new_methods=0 is saved saved_to_disk=0 resolve_classes_delay=8000\n2023-08-12 15:38:01.512 31840-31840 le.sudokusolver         com.example.sudokusolver             W  type=1400 audit(0.0:137797): avc: granted { execute } for path=&quot;/data/data/com.example.sudokusolver/code_cache/startup_agents/31c79e06-agent.so&quot; dev=&quot;dm-11&quot; ino=618782 scontext=u:r:untrusted_app:s0:c240,c257,c512,c768 tcontext=u:object_r:app_data_file:s0:c240,c257,c512,c768 tclass=file app=com.example.sudokusolver\n2023-08-12 15:38:01.524 31840-31840 studio.deploy           com.example.sudokusolver             V  Prior agent invocations in this VM: 0\n2023-08-12 15:38:01.547 31840-31840 studio.deploy           com.example.sudokusolver             I  Using Structure Redefinition Extension\n2023-08-12 15:38:01.553 29979-29979 studio.deploy           pid-29979                            E  Could not remove dir '/data/data/com.example.sudokusolver/code_cache/.ll/': No such file or directory\n2023-08-12 15:38:05.980 31840-31885 OpenGLRenderer          com.example.sudokusolver             D  endAllActiveAnimators on 0xb400007c0b85b700 (RippleDrawable) with handle 0xb400007c69c18040\n2023-08-12 15:38:05.981 31840-31840 View                    com.example.sudokusolver             D  [Warning] assignParent to null: this = android.widget.FrameLayout{bbe7467 V.E...... ........ 0,0-550,165}\n2023-08-12 15:38:05.995 31840-31840 InputTransport          com.example.sudokusolver             I  Destroy ARC handle: 0xb400007d005f60e0\n2023-08-12 15:38:05.996 31840-31840 Service                 com.example.sudokusolver             D  SERVICE STARTED\n2023-08-12 15:38:08.852  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=154   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\n---------------------------- PROCESS ENDED (31840) for package com.example.sudokusolver ----------------------------\n2023-08-12 15:38:10.792 29979-29979 studio.deploy           pid-29979                            E  Could not remove dir '/data/data/com.example.sudokusolver/code_cache/.ll/': No such file or directory\n---------------------------- PROCESS STARTED (31982) for package com.example.sudokusolver ----------------------------\n2023-08-12 15:38:11.195 31982-31982 ActivityThread          com.example.sudokusolver             W  Application com.example.sudokusolver can be debugged on port 8100...\n2023-08-12 15:38:11.206 31982-31982 le.sudokusolve          com.example.sudokusolver             W  ClassLoaderContext classpath size mismatch. expected=0, found=1 (PCL[] | PCL[/data/data/com.example.sudokusolver/code_cache/.overlay/base.apk/classes4.dex*127293272])\n2023-08-12 15:38:11.207 31982-31982 le.sudokusolve          com.example.sudokusolver             W  Found duplicate classes, falling back to extracting from APK : /data/app/~~SulUYZxd5YnqTvrkNbJQdw==/com.example.sudokusolver-W8DCKxBEqhN-8T7rr30ACQ==/base.apk\n2023-08-12 15:38:11.207 31982-31982 le.sudokusolve          com.example.sudokusolver             W  NOTE: This wastes RAM and hurts startup performance.\n2023-08-12 15:38:11.207 31982-31982 le.sudokusolve          com.example.sudokusolver             W  Found duplicated class when checking oat files: 'Lcom/example/sudokusolver/AutoService$1;' in /data/data/com.example.sudokusolver/code_cache/.overlay/base.apk/classes4.dex and /data/app/~~SulUYZxd5YnqTvrkNbJQdw==/com.example.sudokusolver-W8DCKxBEqhN-8T7rr30ACQ==/base.apk!classes4.dex\n2023-08-12 15:38:11.431 31982-31982 NetworkSecurityConfig   com.example.sudokusolver             D  No Network Security Config specified, using platform default\n2023-08-12 15:38:11.432 31982-31982 NetworkSecurityConfig   com.example.sudokusolver             D  No Network Security Config specified, using platform default\n2023-08-12 15:38:11.436 31982-31982 libc                    com.example.sudokusolver             E  Access denied finding property &quot;ro.vendor.pref_scale_resolution&quot;\n2023-08-12 15:38:11.467 31982-32015 libMEOW                 com.example.sudokusolver             D  meow reload base cfg path: na\n2023-08-12 15:38:11.467 31982-32015 libMEOW                 com.example.sudokusolver             D  meow reload overlay cfg path: na\n2023-08-12 15:38:11.469 31982-32015 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\n2023-08-12 15:38:11.469 31982-32015 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\n2023-08-12 15:38:11.513 31982-31982 AppCompatDelegate       com.example.sudokusolver             D  Checking for metadata for AppLocalesMetadataHolderService : Service not found\n2023-08-12 15:38:11.543 31982-31982 View                    com.example.sudokusolver             D  com.example.sudokusolver initForcedUseForceDark: 1\n2023-08-12 15:38:11.553 31982-31982 DecorView[]             com.example.sudokusolver             D  getWindowModeFromSystem  windowmode is 1\n2023-08-12 15:38:11.553 31982-31982 DecorView               com.example.sudokusolver             D  createDecorCaptionView windowingMode:1 mWindowMode 1 isFullscreen: true\n2023-08-12 15:38:11.616 31982-31982 le.sudokusolve          com.example.sudokusolver             W  Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (greylist, reflection, allowed)\n2023-08-12 15:38:11.616 31982-31982 le.sudokusolve          com.example.sudokusolver             W  Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (greylist, reflection, allowed)\n2023-08-12 15:38:11.721 31982-31982 SurfaceFactory          com.example.sudokusolver             I  [static] sSurfaceFactory = com.mediatek.view.impl.SurfaceFactoryImpl@6e07aeb\n2023-08-12 15:38:11.728 31982-31982 ViewRootIm...nActivity] com.example.sudokusolver             D  hardware acceleration = true , fakeHwAccelerated = false, sRendererDisabled = false, forceHwAccelerated = false, sSystemRendererDisabled = false\n2023-08-12 15:38:11.732 31982-31982 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\n2023-08-12 15:38:11.732 31982-31982 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\n2023-08-12 15:38:11.732 31982-31982 InputTransport          com.example.sudokusolver             I  Create ARC handle: 0xb400007c589e1bc0\n2023-08-12 15:38:11.735 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 0, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\n2023-08-12 15:38:11.736 31982-31982 Looper                  com.example.sudokusolver             W  PerfMonitor looperActivity : package=com.example.sudokusolver/.MainActivity time=282ms latency=329ms running=254ms  procState=2 ClientTransaction{ callbacks=[android.app.servertransaction.LaunchActivityItem] lifecycleRequest=android.app.servertransaction.ResumeActivityItem } historyMsgCount=3 (msgIndex=1 wall=67ms seq=1 running=63ms late=2ms h=android.app.ActivityThread$H w=162) (msgIndex=3 wall=270ms seq=3 running=253ms late=61ms h=android.app.ActivityThread$H w=110)\n2023-08-12 15:38:11.736 31982-31982 Looper                  com.example.sudokusolver             W  PerfMonitor looperActivity : package=com.example.sudokusolver/.MainActivity time=0ms latency=612ms running=0ms  procState=2 ClientTransaction{ callbacks=[android.app.servertransaction.TopResumedActivityChangeItem] } historyMsgCount=4 (msgIndex=1 wall=67ms seq=1 running=63ms late=2ms h=android.app.ActivityThread$H w=162) (msgIndex=3 wall=270ms seq=3 running=253ms late=61ms h=android.app.ActivityThread$H w=110) (msgIndex=4 wall=282ms seq=4 running=254ms runnable=1ms late=329ms h=android.app.ActivityThread$H w=159)\n2023-08-12 15:38:11.765 31982-32008 libMEOW                 com.example.sudokusolver             D  applied 1 plugins for [com.example.sudokusolver]:\n2023-08-12 15:38:11.765 31982-32008 libMEOW                 com.example.sudokusolver             D    plugin 1: [libMEOW_gift.so]:\n2023-08-12 15:38:11.771 31982-32008 GED                     com.example.sudokusolver             I  [GT]_get_procNameprocess pid(31982)\n2023-08-12 15:38:11.771 31982-32008 GED                     com.example.sudokusolver             I  [GT]_getprocess name(com.example.sudokusolver)\n2023-08-12 15:38:11.771 31982-32008 le.sudokusolve          com.example.sudokusolver             I  [GT] ret(1) gt_status(00000000) aniso_debug_level(0) gt_aniso_max_level(16) ani so mask(00000001) tri mask(00000002)\n2023-08-12 15:38:11.771 31982-32008 libMEOW_gift            com.example.sudokusolver             I  ctx:0xb400007c69ca2ee8, ARC not Enabled.\n2023-08-12 15:38:11.784 31982-32008 ion                     com.example.sudokusolver             E  ioctl c0044901 failed with code -1: Invalid argument\n2023-08-12 15:38:12.801  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\n2023-08-12 15:38:12.845  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\n2023-08-12 15:38:13.121 31982-32001 System                  com.example.sudokusolver             W  A resource failed to call close. \n2023-08-12 15:38:13.121 31982-32001 System                  com.example.sudokusolver             W  A resource failed to call close. \n2023-08-12 15:38:13.349 31982-32008 GED                     com.example.sudokusolver             I  ged_boost_gpu_freq, level 100, eOrigin 2, final_idx 42, oppidx_max 42, oppidx_min 0\n2023-08-12 15:38:13.359 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 4, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\n2023-08-12 15:38:19.421 31982-32006 le.sudokusolve          com.example.sudokusolver             I  ProcessProfilingInfo new_methods=0 is saved saved_to_disk=0 resolve_classes_delay=8000\n2023-08-12 15:38:26.789  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\n2023-08-12 15:38:26.795  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\n2023-08-12 15:38:26.840  2142-2142  ActivityManagerWrapper  pid-2142                             E  getRecentTasks: taskId=155   userId=0   baseIntent=Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.example.sudokusolver/.MainActivity }\n2023-08-12 15:38:27.297 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 0, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\n2023-08-12 15:38:27.301 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 0, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\n2023-08-12 15:38:27.967 31982-31982 ViewRootImpl[]          com.example.sudokusolver             D  hardware acceleration = true , fakeHwAccelerated = false, sRendererDisabled = false, forceHwAccelerated = false, sSystemRendererDisabled = false\n2023-08-12 15:38:27.974 31982-31982 InputTransport          com.example.sudokusolver             I  Create ARC handle: 0xb400007c63937f20\n2023-08-12 15:38:28.697 31982-31982 PhoneWindow             com.example.sudokusolver             V  DecorView setVisiblity: visibility = 4, Parent = android.view.ViewRootImpl@3c9dac7, this = DecorView@a84f8f4[MainActivity]\n2023-08-12 15:38:28.701 31982-31982 View                    com.example.sudokusolver             D  [Warning] assignParent to null: this = DecorView@a84f8f4[MainActivity]\n2023-08-12 15:38:28.704 31982-31982 InputTransport          com.example.sudokusolver             I  Destroy ARC handle: 0xb400007c589e1bc0\n2023-08-12 15:38:28.736 31982-31982 Service                 com.example.sudokusolver             D  SERVICE STARTED\n2023-08-12 15:38:28.737 31982-32059 SCREENSHOT                 com.example.sudokusolver             D  Starting\n2023-08-12 15:38:28.737 31982-32059 SCREENSHOT              com.example.sudokusolver             D  trying to capture\n2023-08-12 15:38:28.737 31982-31982 Compatibil...geReporter com.example.sudokusolver             D  Compat change id reported: 147798919; UID 10496; state: ENABLED\n2023-08-12 15:38:28.745 31982-31982 SCREENSHOT              com.example.sudokusolver             D  Failed 1\n</code></pre>\n<p>From the result of the TakeScreenshotCallback() method, it returned int error code of 1, Android studio website said the error code meant internal error, but what is causing the internal error?</p>\n"},{"tags":["java","android","mobile","switch-statement"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1691828165,"post_id":76888306,"comment_id":135546624,"body_markdown":"What&#39;s unclear about `constant expression required`?","body":"What&#39;s unclear about <code>constant expression required</code>?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1691828186,"post_id":76888306,"comment_id":135546626,"body_markdown":"Possibly related: [constant expression required when trying to create a switch case block](https://stackoverflow.com/q/76430646), [what causes &quot;constant expression required&quot; errors for the generated R.id.xxx values in switch statements?](https://stackoverflow.com/q/21005205)","body":"Possibly related: <a href=\"https://stackoverflow.com/q/76430646\">constant expression required when trying to create a switch case block</a>, <a href=\"https://stackoverflow.com/q/21005205\">what causes &quot;constant expression required&quot; errors for the generated R.id.xxx values in switch statements?</a>"},{"owner":{"account_id":28430250,"reputation":1,"user_id":21751005,"display_name":"Kian"},"score":0,"creation_date":1691829368,"post_id":76888306,"comment_id":135546727,"body_markdown":"@Olivier Owe you one ;D","body":"@Olivier Owe you one ;D"}],"owner":{"account_id":28430250,"reputation":1,"user_id":21751005,"display_name":"Kian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691831830,"answer_count":0,"score":0,"last_activity_date":1691828559,"creation_date":1691827371,"question_id":76888306,"body_markdown":"(https://i.stack.imgur.com/HydEx.png)\r\n\r\nhey guys,\r\ni have problem with switch case in android studio\r\nin this case i have a radio group &quot;**radioGroup_newAc_n1**&quot; and 3 radio button &quot;**radioButton_newAc_rb1,rb2,rb3**&quot; and i wrote this code, but i got this error in the compilation process...\r\nwhats wrong?\r\nyou can see deatails in pic...\r\n\r\n```\r\n        RadioGroup rgOptions = findViewById(R.id.radioGroup_newAc_n1);\r\n        rgOptions.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {\r\n            @Override\r\n            public void onCheckedChanged(RadioGroup group, int checkedId) {\r\n                switch (checkedId){\r\n                    case R.id.radioButton_newAc_rb1: // &lt;--Line72\r\n                        Toast.makeText(NewAc.this,&quot;rb1 is checked&quot;,Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case R.id.radioButton_newAc_rb2: // &lt;--Line75\r\n                        Toast.makeText(NewAc.this,&quot;rb2 is checked&quot;,Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                    case R.id.radioButton_newAc_rb3: // &lt;--Line78\r\n                        Toast.makeText(NewAc.this,&quot;rb3 is checked&quot;,Toast.LENGTH_SHORT).show();\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n```\r\n\r\n**Error:**\r\n\r\n    NewAc.java:72: error: constant expression required\r\n                        case R.id.radioButton_newAc_rb1:\r\n                                 ^\r\n    NewAc.java:75: error: constant expression required\r\n                        case R.id.radioButton_newAc_rb2:\r\n                                 ^\r\n    NewAc.java:78: error: constant expression required\r\n                        case R.id.radioButton_newAc_rb3:\r\n                                 ^\r\n\r\n\r\n\r\nthis is my first question in stackoverflow and actually don&#39;t have idea what&#39;s need to be here :D","title":"problem with switch case in android(java)","body":"<p>(<a href=\"https://i.stack.imgur.com/HydEx.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/HydEx.png</a>)</p>\n<p>hey guys,\ni have problem with switch case in android studio\nin this case i have a radio group &quot;<strong>radioGroup_newAc_n1</strong>&quot; and 3 radio button &quot;<strong>radioButton_newAc_rb1,rb2,rb3</strong>&quot; and i wrote this code, but i got this error in the compilation process...\nwhats wrong?\nyou can see deatails in pic...</p>\n<pre><code>        RadioGroup rgOptions = findViewById(R.id.radioGroup_newAc_n1);\n        rgOptions.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {\n            @Override\n            public void onCheckedChanged(RadioGroup group, int checkedId) {\n                switch (checkedId){\n                    case R.id.radioButton_newAc_rb1: // &lt;--Line72\n                        Toast.makeText(NewAc.this,&quot;rb1 is checked&quot;,Toast.LENGTH_SHORT).show();\n                        break;\n                    case R.id.radioButton_newAc_rb2: // &lt;--Line75\n                        Toast.makeText(NewAc.this,&quot;rb2 is checked&quot;,Toast.LENGTH_SHORT).show();\n                        break;\n                    case R.id.radioButton_newAc_rb3: // &lt;--Line78\n                        Toast.makeText(NewAc.this,&quot;rb3 is checked&quot;,Toast.LENGTH_SHORT).show();\n                        break;\n                }\n            }\n        });\n</code></pre>\n<p><strong>Error:</strong></p>\n<pre><code>NewAc.java:72: error: constant expression required\n                    case R.id.radioButton_newAc_rb1:\n                             ^\nNewAc.java:75: error: constant expression required\n                    case R.id.radioButton_newAc_rb2:\n                             ^\nNewAc.java:78: error: constant expression required\n                    case R.id.radioButton_newAc_rb3:\n                             ^\n</code></pre>\n<p>this is my first question in stackoverflow and actually don't have idea what's need to be here :D</p>\n"},{"tags":["java","intellij-idea","spotless"],"comments":[{"owner":{"account_id":1047596,"reputation":9325,"user_id":1052284,"accept_rate":44,"display_name":"Mark Jeronimus"},"score":1,"creation_date":1579102423,"post_id":59754621,"comment_id":105655477,"body_markdown":"I&#39;d ask that on the IntelliJ forum, as the developers who know it the best stalk those forums regularly.","body":"I&#39;d ask that on the IntelliJ forum, as the developers who know it the best stalk those forums regularly."}],"answers":[{"tags":[],"owner":{"account_id":6525393,"reputation":332,"user_id":5048304,"display_name":"Tob"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1602409838,"creation_date":1602409838,"answer_id":64302678,"question_id":59754621,"body_markdown":"A not 100% satisfying but working approach:\r\n\r\n**1. Configure the Spotless tasks**\r\n\r\n    spotless {\r\n        format &#39;misc&#39;, {\r\n            target &#39;*.properties&#39;,&#39;*.gradle&#39;, &#39;*.md&#39;, &#39;.gitignore&#39; // etc.\r\n            // code style rules\r\n        }\r\n        java {\r\n            // code style rules\r\n        }\r\n    }\r\n\r\n**2. Add task activation to `*Apply` tasks**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**3. Assign convenient keystroke to `Build Project`**\r\n\r\nDo this under `Settings &gt; Keymap`.\r\n\r\n*Keep in mind that `Build Project` is using IntelliJ&#39;s internal builder. It&#39;s incremental (performant), but in case of custom/third-party gradle tasks, the build result might deviate from the `$ gradle build` result.*\r\n\r\nIn case of a Spring application utilizing DevTools, the build will lead to the changes/updates being served automatically.\r\n\r\n---\r\n\r\nWith the IDE Hook it should be rather trivial to implement a dedicated Spotless formatter plugin for IntelliJ:\r\nhttps://github.com/diffplug/spotless/blob/master/plugin-gradle/IDE_HOOK.md\r\n\r\nSo far I wasn&#39;t able to find one though.\r\n\r\n  [1]: https://i.stack.imgur.com/SOwfqm.png","title":"Confgure IntelliJ to use the same Java formatter as Spotless","body":"<p>A not 100% satisfying but working approach:</p>\n<p><strong>1. Configure the Spotless tasks</strong></p>\n<pre><code>spotless {\n    format 'misc', {\n        target '*.properties','*.gradle', '*.md', '.gitignore' // etc.\n        // code style rules\n    }\n    java {\n        // code style rules\n    }\n}\n</code></pre>\n<p><strong>2. Add task activation to <code>*Apply</code> tasks</strong></p>\n<p><a href=\"https://i.stack.imgur.com/SOwfqm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SOwfqm.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>3. Assign convenient keystroke to <code>Build Project</code></strong></p>\n<p>Do this under <code>Settings &gt; Keymap</code>.</p>\n<p><em>Keep in mind that <code>Build Project</code> is using IntelliJ's internal builder. It's incremental (performant), but in case of custom/third-party gradle tasks, the build result might deviate from the <code>$ gradle build</code> result.</em></p>\n<p>In case of a Spring application utilizing DevTools, the build will lead to the changes/updates being served automatically.</p>\n<hr />\n<p>With the IDE Hook it should be rather trivial to implement a dedicated Spotless formatter plugin for IntelliJ:\n<a href=\"https://github.com/diffplug/spotless/blob/master/plugin-gradle/IDE_HOOK.md\" rel=\"noreferrer\">https://github.com/diffplug/spotless/blob/master/plugin-gradle/IDE_HOOK.md</a></p>\n<p>So far I wasn't able to find one though.</p>\n"},{"tags":[],"owner":{"account_id":6910510,"reputation":71,"user_id":5306599,"display_name":"DiPech"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1639991731,"creation_date":1639907578,"answer_id":70410374,"question_id":59754621,"body_markdown":"Although Tob&#39;s approach works, I use a bit different way of configuring it.\r\n\r\n### 1. Create an external tool in the Preferences\r\n[![enter image description here][1]][1]\r\n\r\n\r\n### 2. Assign a shortcut for the created external tool\r\n\r\nI prefer using `⌘` + `⌥` + `;`, because it&#39;s easy to remember (IDEA uses `⌘` + `⌥` + `L` by default).\r\n[![enter image description here][2]][2]\r\n\r\n### 3. Use it\r\n\r\nPress `⌘` + `⌥` + `;` and wait until all the files are processed and the IDE reloaded changed files. Usually, it takes 2-5 seconds. \r\n\r\nWarning: spotless may crash (usually it happens because of mistakes in your code, so be sure your code is compilable):\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GtByn.png\r\n  [2]: https://i.stack.imgur.com/lod43.png\r\n  [3]: https://i.stack.imgur.com/kkXUk.png","title":"Confgure IntelliJ to use the same Java formatter as Spotless","body":"<p>Although Tob's approach works, I use a bit different way of configuring it.</p>\n<h3>1. Create an external tool in the Preferences</h3>\n<p><a href=\"https://i.stack.imgur.com/GtByn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GtByn.png\" alt=\"enter image description here\" /></a></p>\n<h3>2. Assign a shortcut for the created external tool</h3>\n<p>I prefer using <code>⌘</code> + <code>⌥</code> + <code>;</code>, because it's easy to remember (IDEA uses <code>⌘</code> + <code>⌥</code> + <code>L</code> by default).\n<a href=\"https://i.stack.imgur.com/lod43.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lod43.png\" alt=\"enter image description here\" /></a></p>\n<h3>3. Use it</h3>\n<p>Press <code>⌘</code> + <code>⌥</code> + <code>;</code> and wait until all the files are processed and the IDE reloaded changed files. Usually, it takes 2-5 seconds.</p>\n<p>Warning: spotless may crash (usually it happens because of mistakes in your code, so be sure your code is compilable):\n<a href=\"https://i.stack.imgur.com/kkXUk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kkXUk.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":18412529,"reputation":53,"user_id":13412398,"display_name":"Dimitrii"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1691827504,"creation_date":1691827504,"answer_id":76888315,"question_id":59754621,"body_markdown":"You can install this plugin: https://plugins.jetbrains.com/plugin/22455-spotless-applier.\r\n\r\nIt allows running the spotless Gradle and Maven tasks from within the IDE, either on the current file selected in the editor or for the whole project.","title":"Confgure IntelliJ to use the same Java formatter as Spotless","body":"<p>You can install this plugin: <a href=\"https://plugins.jetbrains.com/plugin/22455-spotless-applier\" rel=\"nofollow noreferrer\">https://plugins.jetbrains.com/plugin/22455-spotless-applier</a>.</p>\n<p>It allows running the spotless Gradle and Maven tasks from within the IDE, either on the current file selected in the editor or for the whole project.</p>\n"}],"owner":{"account_id":6138978,"reputation":2133,"user_id":4786956,"accept_rate":55,"display_name":"Antonio Dragos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20094,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"answer_count":3,"score":22,"last_activity_date":1691827504,"creation_date":1579102140,"question_id":59754621,"body_markdown":"I use the [Spotless Gradle plugin][1] to ensure consistent formatting of the Java code in my app. The relevant entries in `build.gradle` are\r\n\r\n    plugins {\r\n      id &quot;com.diffplug.gradle.spotless&quot; version &quot;3.27.0&quot;\r\n    }\r\n    \r\n    spotless {\r\n      java {\r\n        // The available versions of the Eclipse JDT formatter are defined here\r\n        // https://github.com/diffplug/spotless/tree/master/lib-extra/src/main/resources/com/diffplug/spotless/extra/eclipse_jdt_formatter\r\n        eclipse(&#39;4.13.0&#39;)\r\n        indentWithSpaces()\r\n        removeUnusedImports()\r\n      }\r\n    }\r\n\r\nIs there some way I can configure IntelliJ to use the same formatting settings?\r\n\r\n\r\n  [1]: https://github.com/diffplug/spotless/tree/master/plugin-gradle","title":"Confgure IntelliJ to use the same Java formatter as Spotless","body":"<p>I use the <a href=\"https://github.com/diffplug/spotless/tree/master/plugin-gradle\" rel=\"noreferrer\">Spotless Gradle plugin</a> to ensure consistent formatting of the Java code in my app. The relevant entries in <code>build.gradle</code> are</p>\n\n<pre><code>plugins {\n  id \"com.diffplug.gradle.spotless\" version \"3.27.0\"\n}\n\nspotless {\n  java {\n    // The available versions of the Eclipse JDT formatter are defined here\n    // https://github.com/diffplug/spotless/tree/master/lib-extra/src/main/resources/com/diffplug/spotless/extra/eclipse_jdt_formatter\n    eclipse('4.13.0')\n    indentWithSpaces()\n    removeUnusedImports()\n  }\n}\n</code></pre>\n\n<p>Is there some way I can configure IntelliJ to use the same formatting settings?</p>\n"},{"tags":["java","java-stream","option-type","findfirst"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1671566927,"post_id":74868318,"comment_id":132125977,"body_markdown":"What do you want to accomplish by using `findFirst`?","body":"What do you want to accomplish by using <code>findFirst</code>?"},{"owner":{"account_id":220794,"reputation":12257,"user_id":478406,"accept_rate":82,"display_name":"Robert Strauch"},"score":0,"creation_date":1671567080,"post_id":74868318,"comment_id":132126015,"body_markdown":"The reason I mentioned `findFirst` is I need to process only the first item of the list with an additional method.","body":"The reason I mentioned <code>findFirst</code> is I need to process only the first item of the list with an additional method."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671566695,"creation_date":1671566695,"answer_id":74868371,"question_id":74868318,"body_markdown":"You could create an `IntStream` over the indexes.\r\n\r\n```java\r\nIntStream.range(0, strings.size())\r\n    .mapToObj(i -&gt; {\r\n        var s = strings.get(i);\r\n        if (i == 0) s = someMethod(s);\r\n        return anotherMethod(s);\r\n    }).toList();","title":"Resume processing of a Java Stream after running findFirst()","body":"<p>You could create an <code>IntStream</code> over the indexes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>IntStream.range(0, strings.size())\n    .mapToObj(i -&gt; {\n        var s = strings.get(i);\n        if (i == 0) s = someMethod(s);\n        return anotherMethod(s);\n    }).toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1688974237,"creation_date":1671566702,"answer_id":74868373,"question_id":74868318,"body_markdown":"`findFirst` collapses the stream to an `Optional&lt;String&gt;`, and there is nothing to resume.\r\n\r\n    Optional&lt;String&gt; mary = Stream.of(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;).findFirst();\r\n\r\nDo you want to reduce the stream to only one element? Then the method `limit(1)` might be what you are looking for and then concat it with a copy where you `skip(1)` the element.\r\n\r\n    List&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\r\n    List&lt;String&gt; result = Stream.concat(\r\n          strings.stream()\r\n            .limit(1)\r\n            .map(this::someMethod),\r\n          strings.stream()\r\n            .skip(1))\r\n            .map(this::anotherMethod)\r\n         ).toList();\r\n\r\n# Edit: After Update 1:\r\nYou wouldn&#39;t want to apply `toLowerCase()` to the first element after you applied `toUpperCase()`.","title":"Resume processing of a Java Stream after running findFirst()","body":"<p><code>findFirst</code> collapses the stream to an <code>Optional&lt;String&gt;</code>, and there is nothing to resume.</p>\n<pre><code>Optional&lt;String&gt; mary = Stream.of(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;).findFirst();\n</code></pre>\n<p>Do you want to reduce the stream to only one element? Then the method <code>limit(1)</code> might be what you are looking for and then concat it with a copy where you <code>skip(1)</code> the element.</p>\n<pre><code>List&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\nList&lt;String&gt; result = Stream.concat(\n      strings.stream()\n        .limit(1)\n        .map(this::someMethod),\n      strings.stream()\n        .skip(1))\n        .map(this::anotherMethod)\n     ).toList();\n</code></pre>\n<h1>Edit: After Update 1:</h1>\n<p>You wouldn't want to apply <code>toLowerCase()</code> to the first element after you applied <code>toUpperCase()</code>.</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671629535,"creation_date":1671572850,"answer_id":74869225,"question_id":74868318,"body_markdown":"# [`Optional.stream()`][stream]\r\n\r\nYour idea of using `findFirst()` is perfectly viable.\r\n\r\nWe can apply `map()` on the `Optional` result and make use of the Java 9 `Optional.stream()` (to &quot;resume&quot; the stream).\r\n\r\n`flatMap()` operation in conjunction with `Stream.concat()` would be handy for combining the very first element with the rest part of the stream.\r\n\r\nApply the final transformation and collect the result into a list.\r\n\r\n```\r\nList&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\r\n\r\nList&lt;String&gt; result = strings.stream().findFirst()\r\n    .map(MyClass::someMethod)\r\n    .stream()\r\n    .flatMap(s -&gt; Stream.concat(\r\n        Stream.of(s), \r\n        strings.stream().skip(1).map(MyClass::anotherMethod)\r\n    ))\r\n    .toList();\r\n```\r\n\r\n# [`Iterator.forEachRemaining()`][forEachRemaining]\r\n\r\nAnother option would be to use Java 8 `Iterator.forEachRemaining()`:\r\n\r\n```\r\nList&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\r\nList&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n\r\nIterator&lt;String&gt; iterator = strings.iterator();\r\nresult.add(someMethod(iterator.next()));\r\niterator.forEachRemaining(s -&gt; result.add(anotherMethod(s));\r\n```\r\n\r\n\r\n\r\n   [stream]: https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/util/Optional.html#stream()\r\n\r\n   [forEachRemaining]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Iterator.html","title":"Resume processing of a Java Stream after running findFirst()","body":"<h1><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/util/Optional.html#stream()\" rel=\"nofollow noreferrer\"><code>Optional.stream()</code></a></h1>\n<p>Your idea of using <code>findFirst()</code> is perfectly viable.</p>\n<p>We can apply <code>map()</code> on the <code>Optional</code> result and make use of the Java 9 <code>Optional.stream()</code> (to &quot;resume&quot; the stream).</p>\n<p><code>flatMap()</code> operation in conjunction with <code>Stream.concat()</code> would be handy for combining the very first element with the rest part of the stream.</p>\n<p>Apply the final transformation and collect the result into a list.</p>\n<pre><code>List&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\n\nList&lt;String&gt; result = strings.stream().findFirst()\n    .map(MyClass::someMethod)\n    .stream()\n    .flatMap(s -&gt; Stream.concat(\n        Stream.of(s), \n        strings.stream().skip(1).map(MyClass::anotherMethod)\n    ))\n    .toList();\n</code></pre>\n<h1><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Iterator.html\" rel=\"nofollow noreferrer\"><code>Iterator.forEachRemaining()</code></a></h1>\n<p>Another option would be to use Java 8 <code>Iterator.forEachRemaining()</code>:</p>\n<pre><code>List&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\nList&lt;String&gt; result = new ArrayList&lt;&gt;();\n\nIterator&lt;String&gt; iterator = strings.iterator();\nresult.add(someMethod(iterator.next()));\niterator.forEachRemaining(s -&gt; result.add(anotherMethod(s));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672357352,"creation_date":1672356986,"answer_id":74956959,"question_id":74868318,"body_markdown":"Try [StreamEx][1] or [abacus-common][2] (I&#39;m the developer of this library)\r\n\r\n    var result = StreamEx.of(strings)\r\n               .mapFirstOrElse(String::toUpperCase, String::toLowerCase)\r\n               .toList();\r\n\r\n    result.forEach(System.out::println); \r\n\r\n\r\n  [1]: https://github.com/amaembo/streamex\r\n  [2]: https://github.com/landawn/abacus-common","title":"Resume processing of a Java Stream after running findFirst()","body":"<p>Try <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx</a> or <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a> (I'm the developer of this library)</p>\n<pre><code>var result = StreamEx.of(strings)\n           .mapFirstOrElse(String::toUpperCase, String::toLowerCase)\n           .toList();\n\nresult.forEach(System.out::println); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691827433,"creation_date":1691827433,"answer_id":76888308,"question_id":74868318,"body_markdown":"```\r\n final AtomicBoolean processFirstElement = new AtomicBoolean(true);\r\n        strings.stream()\r\n                .map(input-&gt;processFirstElement.getAndSet(false)?\r\n                                someMethod(input)\r\n                                :input)\r\n                .map(YourClass::anotherMethod)\r\n                .collect(Collectors.toList());\r\n```\r\nIdeally we should avoid using mutable objects,AtomicBoolean should be able to maintain happens-before and hence prevent racing condition.\r\n","title":"Resume processing of a Java Stream after running findFirst()","body":"<pre><code> final AtomicBoolean processFirstElement = new AtomicBoolean(true);\n        strings.stream()\n                .map(input-&gt;processFirstElement.getAndSet(false)?\n                                someMethod(input)\n                                :input)\n                .map(YourClass::anotherMethod)\n                .collect(Collectors.toList());\n</code></pre>\n<p>Ideally we should avoid using mutable objects,AtomicBoolean should be able to maintain happens-before and hence prevent racing condition.</p>\n"}],"owner":{"account_id":220794,"reputation":12257,"user_id":478406,"accept_rate":82,"display_name":"Robert Strauch"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":74868373,"answer_count":5,"score":4,"last_activity_date":1691827433,"creation_date":1671566387,"question_id":74868318,"body_markdown":"Given a simple list of strings:\r\n\r\n```java\r\nList&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\r\n```\r\n\r\nI&#39;d like to process each item of the list with a `anotherMethod()` method, however the first item shall be processed additionally by `someMethod()`.\r\n\r\nI&#39;ve tried something like this:\r\n\r\n```java\r\nList&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\r\n\r\nvar result = strings.stream()\r\n     .findFirst()\r\n     .map(myString -&gt; someMethod(myString))\r\n     // &quot;resume&quot; stream\r\n     .map(myString -&gt; anotherMethod(myString))\r\n     .toList();     \r\n```\r\n\r\nIs there a way to handle such a scenario using a `Stream` or something similar?\r\n\r\n----------\r\n\r\n### Update 1\r\n\r\nHere is an example to help you better understand the motivation behind my question.\r\n\r\n```java\r\nList&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\r\n\r\npublic String someMethod(String s) {\r\n  return s.toUpperCase();\r\n}\r\n\r\npublic String anotherMethod(String s) {\r\n  return s.toLowerCase();\r\n}\r\n```\r\n\r\nThe final result shall be a `List&lt;String&gt;` with the following elements, that is, only the first element is converted to upper-case while all other elements are converted to lower-case.\r\n\r\n`&quot;MARY&quot;, &quot;james&quot;, &quot;jim&quot;, &quot;camilla&quot;` ","title":"Resume processing of a Java Stream after running findFirst()","body":"<p>Given a simple list of strings:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\n</code></pre>\n<p>I'd like to process each item of the list with a <code>anotherMethod()</code> method, however the first item shall be processed additionally by <code>someMethod()</code>.</p>\n<p>I've tried something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\n\nvar result = strings.stream()\n     .findFirst()\n     .map(myString -&gt; someMethod(myString))\n     // &quot;resume&quot; stream\n     .map(myString -&gt; anotherMethod(myString))\n     .toList();     \n</code></pre>\n<p>Is there a way to handle such a scenario using a <code>Stream</code> or something similar?</p>\n<hr />\n<h3>Update 1</h3>\n<p>Here is an example to help you better understand the motivation behind my question.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; strings = Arrays.asList(&quot;Mary&quot;, &quot;James&quot;, &quot;Jim&quot;, &quot;Camilla&quot;);\n\npublic String someMethod(String s) {\n  return s.toUpperCase();\n}\n\npublic String anotherMethod(String s) {\n  return s.toLowerCase();\n}\n</code></pre>\n<p>The final result shall be a <code>List&lt;String&gt;</code> with the following elements, that is, only the first element is converted to upper-case while all other elements are converted to lower-case.</p>\n<p><code>&quot;MARY&quot;, &quot;james&quot;, &quot;jim&quot;, &quot;camilla&quot;</code></p>\n"},{"tags":["java","scala","apache-spark","amazon-s3"],"owner":{"account_id":15647920,"reputation":1,"user_id":11289770,"display_name":"wudaoyunqi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691827384,"creation_date":1691118535,"question_id":76832740,"body_markdown":"Read S3 file of txt format\r\n\r\n```java\r\nJavaRDD&lt;String&gt; textRdd = sparkContext.textFile(filePath, 3).toJavaRDD().repartition(60);\r\n```\r\nThe filePath is like &#39;s3a://bucket_name/object_name&#39;. BTW, spark can&#39;t read s3 file by s3filePath like above when the bucket name contains underscore symbol, i.e. &#39;_&#39;, I&#39;m really confused about this.\r\n\r\nHere omit transToRowRdd process, i.e., change JavaRDD&lt; String &gt; to JavaRDD&lt; Row &gt;.\r\n\r\n---\r\n\r\nThe write process\r\n```java\r\nDataset dataset = SparkSession.createDataFrame(rowRDD, fieldSchemas)\r\n\r\nDataFrameWriter tableWriter = dataset.write().mode(SaveMode.Overwrite).format(&quot;hive&quot;);\r\n\r\ntableWriter.insertInto(fullTableName);\r\n```\r\n---\r\n\r\nIf the s3 file is empty, an error will be reported in the insertinto method.\r\n\r\n```\r\n23/08/03 19:43:20 INFO Driver ApplicationMaster: Final app status: FAILED, exitCode: 15, (reason: User class threw exception: org.apache.spark.SparkException: Job aborted.\r\n\tat org.apache.spark.sql.execution.datasources.FileFormatWriter$.write(FileFormatWriter.scala:252)\r\n\tat org.apache.spark.sql.hive.execution.SaveAsHiveFile.saveAsHiveFile(SaveAsHiveFile.scala:105)\r\n\tat org.apache.spark.sql.hive.execution.SaveAsHiveFile.saveAsHiveFile$(SaveAsHiveFile.scala:56)\r\n\tat org.apache.spark.sql.hive.execution.InsertIntoHiveTable.saveAsHiveFile(InsertIntoHiveTable.scala:81)\r\n\tat org.apache.spark.sql.hive.execution.InsertIntoHiveTable.processInsert(InsertIntoHiveTable.scala:243)\r\n\tat org.apache.spark.sql.hive.execution.InsertIntoHiveTable.run(InsertIntoHiveTable.scala:140)\r\n\tat org.apache.spark.sql.execution.command.DataWritingCommandExec.sideEffectResult$lzycompute(commands.scala:108)\r\n\tat org.apache.spark.sql.execution.command.DataWritingCommandExec.sideEffectResult(commands.scala:106)\r\n\tat org.apache.spark.sql.execution.command.DataWritingCommandExec.doExecute(commands.scala:131)\r\n\tat org.apache.spark.sql.execution.SparkPlan.$anonfun$execute$1(SparkPlan.scala:175)\r\n\tat org.apache.spark.sql.execution.SparkPlan.$anonfun$executeQuery$1(SparkPlan.scala:213)\r\n\tat org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\r\n\tat org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:210)\r\n\tat org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:171)\r\n\tat org.apache.spark.sql.execution.QueryExecution.toRdd$lzycompute(QueryExecution.scala:132)\r\n\tat org.apache.spark.sql.execution.QueryExecution.toRdd(QueryExecution.scala:127)\r\n\tat org.apache.spark.sql.DataFrameWriter.$anonfun$runCommand$1(DataFrameWriter.scala:963)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withNewQueryId(SQLExecution.scala:58)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:125)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:185)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:112)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:767)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:89)\r\n\tat org.apache.spark.sql.DataFrameWriter.runCommand(DataFrameWriter.scala:963)\r\n\tat org.apache.spark.sql.DataFrameWriter.insertInto(DataFrameWriter.scala:519)\r\n\tat org.apache.spark.sql.DataFrameWriter.insertInto(DataFrameWriter.scala:473)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.apache.spark.deploy.yarn.ApplicationMaster$$anon$2.run(ApplicationMaster.scala:750)\r\n\r\nCaused by: org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 0.0 failed 4 times, most recent failure: Lost task 0.3 in stage 0.0 (TID 3, , executor 4): java.lang.Exception: The requested range cannot be satisfied. (Service: Amazon S3; Status Code: 416; Error Code: InvalidRange; Request ID: )\r\n\tat org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:419)\r\n\tat org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:305)\r\n\tat org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\r\n\tat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\r\n\tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:458)\r\n\tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:458)\r\n\tat org.apache.spark.shuffle.sort.BypassMergeSortShuffleWriter.write(BypassMergeSortShuffleWriter.java:141)\r\n\tat org.apache.spark.shuffle.ShuffleWriteProcessor.write(ShuffleWriteProcessor.scala:59)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:102)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:54)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:130)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:473)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1428)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:476)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n\r\nCaused by: com.amazonaws.services.s3.model.AmazonS3Exception: The requested range cannot be satisfied. (Service: Amazon S3; Status Code: 416; Error Code: InvalidRange; Request ID: ), S3 Extended Request ID:\r\n\tat com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1073)\r\n\tat com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:721)\r\n\tat com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:456)\r\n\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:295)\r\n\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2752)\r\n\tat com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:815)\r\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.reopen(S3AInputStream.java:91)\r\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.openIfNeeded(S3AInputStream.java:62)\r\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.read(S3AInputStream.java:156)\r\n\tat java.io.DataInputStream.read(DataInputStream.java:149)\r\n\tat org.apache.hadoop.mapreduce.lib.input.UncompressedSplitLineReader.fillBuffer(UncompressedSplitLineReader.java:62)\r\n\tat org.apache.hadoop.util.LineReader.readDefaultLine(LineReader.java:216)\r\n\tat org.apache.hadoop.util.LineReader.readLine(LineReader.java:174)\r\n\tat org.apache.hadoop.mapreduce.lib.input.UncompressedSplitLineReader.readLine(UncompressedSplitLineReader.java:94)\r\n\tat org.apache.hadoop.mapred.LineRecordReader.skipUtfByteOrderMark(LineRecordReader.java:208)\r\n\tat org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:246)\r\n\tat org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:48)\r\n\tat org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:392)\r\n\t... 16 more\r\n\r\nDriver stacktrace:\r\n\tat org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2737)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2673)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2672)\r\n\tat scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)\r\n\tat scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)\r\n\tat scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)\r\n\tat org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2672)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1083)\r\n\tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1083)\r\n\tat scala.Option.foreach(Option.scala:407)\r\n\tat org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1083)\r\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2926)\r\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2866)\r\n\tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2855)\r\n\tat org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\r\n\tat org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:861)\r\n\tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2155)\r\n\tat org.apache.spark.sql.execution.datasources.FileFormatWriter$.write(FileFormatWriter.scala:213)\r\n\t... 33 more\r\n\r\nCaused by: java.lang.Exception: The requested range cannot be satisfied. (Service: Amazon S3; Status Code: 416; Error Code: InvalidRange; Request ID: )\r\n\tat org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:419)\r\n\tat org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:305)\r\n\tat org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\r\n\tat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\r\n\tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:458)\r\n\tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:458)\r\n\tat org.apache.spark.shuffle.sort.BypassMergeSortShuffleWriter.write(BypassMergeSortShuffleWriter.java:141)\r\n\tat org.apache.spark.shuffle.ShuffleWriteProcessor.write(ShuffleWriteProcessor.scala:59)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:102)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:54)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:130)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:473)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1428)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:476)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n\r\nCaused by: com.amazonaws.services.s3.model.AmazonS3Exception: The requested range cannot be satisfied. (Service: Amazon S3; Status Code: 416; Error Code: InvalidRange; Request ID: ), S3 Extended Request ID:\r\n\tat com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1073)\r\n\tat com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:721)\r\n\tat com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:456)\r\n\tat com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:295)\r\n\tat com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2752)\r\n\tat com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:815)\r\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.reopen(S3AInputStream.java:91)\r\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.openIfNeeded(S3AInputStream.java:62)\r\n\tat org.apache.hadoop.fs.s3a.S3AInputStream.read(S3AInputStream.java:156)\r\n\tat java.io.DataInputStream.read(DataInputStream.java:149)\r\n\tat org.apache.hadoop.mapreduce.lib.input.UncompressedSplitLineReader.fillBuffer(UncompressedSplitLineReader.java:62)\r\n\tat org.apache.hadoop.util.LineReader.readDefaultLine(LineReader.java:216)\r\n\tat org.apache.hadoop.util.LineReader.readLine(LineReader.java:174)\r\n\tat org.apache.hadoop.mapreduce.lib.input.UncompressedSplitLineReader.readLine(UncompressedSplitLineReader.java:94)\r\n\tat org.apache.hadoop.mapred.LineRecordReader.skipUtfByteOrderMark(LineRecordReader.java:208)\r\n\tat org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:246)\r\n\tat org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:48)\r\n\tat org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:392)\r\n\t... 16 more\r\n)\r\n```\r\n\r\n---\r\nWhen read an empty csv formatted s3 file, everything works fine.\r\n```java\r\nJavaRDD&lt;Row&gt; javaRDD = sparkSession.read().format(&quot;csv&quot;).option(&quot;enforceSchema&quot;, true).option(&quot;header&quot;, &quot;true&quot;).load(filePath).javaRDD();\r\n```\r\n\r\n---\r\n\r\nWhen I read a non-empty s3 file of any format, everything works fine.","title":"An error is reported when reading an empty s3 file through SparkContext.textFile and using the DataFrameWriter.insertinto method","body":"<p>Read S3 file of txt format</p>\n<pre class=\"lang-java prettyprint-override\"><code>JavaRDD&lt;String&gt; textRdd = sparkContext.textFile(filePath, 3).toJavaRDD().repartition(60);\n</code></pre>\n<p>The filePath is like 's3a://bucket_name/object_name'. BTW, spark can't read s3 file by s3filePath like above when the bucket name contains underscore symbol, i.e. '_', I'm really confused about this.</p>\n<p>Here omit transToRowRdd process, i.e., change JavaRDD&lt; String &gt; to JavaRDD&lt; Row &gt;.</p>\n<hr />\n<p>The write process</p>\n<pre class=\"lang-java prettyprint-override\"><code>Dataset dataset = SparkSession.createDataFrame(rowRDD, fieldSchemas)\n\nDataFrameWriter tableWriter = dataset.write().mode(SaveMode.Overwrite).format(&quot;hive&quot;);\n\ntableWriter.insertInto(fullTableName);\n</code></pre>\n<hr />\n<p>If the s3 file is empty, an error will be reported in the insertinto method.</p>\n<pre><code>23/08/03 19:43:20 INFO Driver ApplicationMaster: Final app status: FAILED, exitCode: 15, (reason: User class threw exception: org.apache.spark.SparkException: Job aborted.\n    at org.apache.spark.sql.execution.datasources.FileFormatWriter$.write(FileFormatWriter.scala:252)\n    at org.apache.spark.sql.hive.execution.SaveAsHiveFile.saveAsHiveFile(SaveAsHiveFile.scala:105)\n    at org.apache.spark.sql.hive.execution.SaveAsHiveFile.saveAsHiveFile$(SaveAsHiveFile.scala:56)\n    at org.apache.spark.sql.hive.execution.InsertIntoHiveTable.saveAsHiveFile(InsertIntoHiveTable.scala:81)\n    at org.apache.spark.sql.hive.execution.InsertIntoHiveTable.processInsert(InsertIntoHiveTable.scala:243)\n    at org.apache.spark.sql.hive.execution.InsertIntoHiveTable.run(InsertIntoHiveTable.scala:140)\n    at org.apache.spark.sql.execution.command.DataWritingCommandExec.sideEffectResult$lzycompute(commands.scala:108)\n    at org.apache.spark.sql.execution.command.DataWritingCommandExec.sideEffectResult(commands.scala:106)\n    at org.apache.spark.sql.execution.command.DataWritingCommandExec.doExecute(commands.scala:131)\n    at org.apache.spark.sql.execution.SparkPlan.$anonfun$execute$1(SparkPlan.scala:175)\n    at org.apache.spark.sql.execution.SparkPlan.$anonfun$executeQuery$1(SparkPlan.scala:213)\n    at org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\n    at org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:210)\n    at org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:171)\n    at org.apache.spark.sql.execution.QueryExecution.toRdd$lzycompute(QueryExecution.scala:132)\n    at org.apache.spark.sql.execution.QueryExecution.toRdd(QueryExecution.scala:127)\n    at org.apache.spark.sql.DataFrameWriter.$anonfun$runCommand$1(DataFrameWriter.scala:963)\n    at org.apache.spark.sql.execution.SQLExecution$.withNewQueryId(SQLExecution.scala:58)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:125)\n    at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:185)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:112)\n    at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:767)\n    at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:89)\n    at org.apache.spark.sql.DataFrameWriter.runCommand(DataFrameWriter.scala:963)\n    at org.apache.spark.sql.DataFrameWriter.insertInto(DataFrameWriter.scala:519)\n    at org.apache.spark.sql.DataFrameWriter.insertInto(DataFrameWriter.scala:473)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.spark.deploy.yarn.ApplicationMaster$$anon$2.run(ApplicationMaster.scala:750)\n\nCaused by: org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 0.0 failed 4 times, most recent failure: Lost task 0.3 in stage 0.0 (TID 3, , executor 4): java.lang.Exception: The requested range cannot be satisfied. (Service: Amazon S3; Status Code: 416; Error Code: InvalidRange; Request ID: )\n    at org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:419)\n    at org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:305)\n    at org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\n    at org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\n    at scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:458)\n    at scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:458)\n    at org.apache.spark.shuffle.sort.BypassMergeSortShuffleWriter.write(BypassMergeSortShuffleWriter.java:141)\n    at org.apache.spark.shuffle.ShuffleWriteProcessor.write(ShuffleWriteProcessor.scala:59)\n    at org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:102)\n    at org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:54)\n    at org.apache.spark.scheduler.Task.run(Task.scala:130)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:473)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1428)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:476)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\nCaused by: com.amazonaws.services.s3.model.AmazonS3Exception: The requested range cannot be satisfied. (Service: Amazon S3; Status Code: 416; Error Code: InvalidRange; Request ID: ), S3 Extended Request ID:\n    at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1073)\n    at com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:721)\n    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:456)\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:295)\n    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2752)\n    at com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:815)\n    at org.apache.hadoop.fs.s3a.S3AInputStream.reopen(S3AInputStream.java:91)\n    at org.apache.hadoop.fs.s3a.S3AInputStream.openIfNeeded(S3AInputStream.java:62)\n    at org.apache.hadoop.fs.s3a.S3AInputStream.read(S3AInputStream.java:156)\n    at java.io.DataInputStream.read(DataInputStream.java:149)\n    at org.apache.hadoop.mapreduce.lib.input.UncompressedSplitLineReader.fillBuffer(UncompressedSplitLineReader.java:62)\n    at org.apache.hadoop.util.LineReader.readDefaultLine(LineReader.java:216)\n    at org.apache.hadoop.util.LineReader.readLine(LineReader.java:174)\n    at org.apache.hadoop.mapreduce.lib.input.UncompressedSplitLineReader.readLine(UncompressedSplitLineReader.java:94)\n    at org.apache.hadoop.mapred.LineRecordReader.skipUtfByteOrderMark(LineRecordReader.java:208)\n    at org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:246)\n    at org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:48)\n    at org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:392)\n    ... 16 more\n\nDriver stacktrace:\n    at org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2737)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2673)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2672)\n    at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)\n    at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)\n    at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)\n    at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2672)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1083)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1083)\n    at scala.Option.foreach(Option.scala:407)\n    at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1083)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2926)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2866)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2855)\n    at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\n    at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:861)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:2155)\n    at org.apache.spark.sql.execution.datasources.FileFormatWriter$.write(FileFormatWriter.scala:213)\n    ... 33 more\n\nCaused by: java.lang.Exception: The requested range cannot be satisfied. (Service: Amazon S3; Status Code: 416; Error Code: InvalidRange; Request ID: )\n    at org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:419)\n    at org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:305)\n    at org.apache.spark.util.NextIterator.hasNext(NextIterator.scala:73)\n    at org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\n    at scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:458)\n    at scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:458)\n    at org.apache.spark.shuffle.sort.BypassMergeSortShuffleWriter.write(BypassMergeSortShuffleWriter.java:141)\n    at org.apache.spark.shuffle.ShuffleWriteProcessor.write(ShuffleWriteProcessor.scala:59)\n    at org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:102)\n    at org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:54)\n    at org.apache.spark.scheduler.Task.run(Task.scala:130)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:473)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1428)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:476)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\nCaused by: com.amazonaws.services.s3.model.AmazonS3Exception: The requested range cannot be satisfied. (Service: Amazon S3; Status Code: 416; Error Code: InvalidRange; Request ID: ), S3 Extended Request ID:\n    at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:1073)\n    at com.amazonaws.http.AmazonHttpClient.executeOneRequest(AmazonHttpClient.java:721)\n    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:456)\n    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:295)\n    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2752)\n    at com.amazonaws.services.s3.AmazonS3Client.getObject(AmazonS3Client.java:815)\n    at org.apache.hadoop.fs.s3a.S3AInputStream.reopen(S3AInputStream.java:91)\n    at org.apache.hadoop.fs.s3a.S3AInputStream.openIfNeeded(S3AInputStream.java:62)\n    at org.apache.hadoop.fs.s3a.S3AInputStream.read(S3AInputStream.java:156)\n    at java.io.DataInputStream.read(DataInputStream.java:149)\n    at org.apache.hadoop.mapreduce.lib.input.UncompressedSplitLineReader.fillBuffer(UncompressedSplitLineReader.java:62)\n    at org.apache.hadoop.util.LineReader.readDefaultLine(LineReader.java:216)\n    at org.apache.hadoop.util.LineReader.readLine(LineReader.java:174)\n    at org.apache.hadoop.mapreduce.lib.input.UncompressedSplitLineReader.readLine(UncompressedSplitLineReader.java:94)\n    at org.apache.hadoop.mapred.LineRecordReader.skipUtfByteOrderMark(LineRecordReader.java:208)\n    at org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:246)\n    at org.apache.hadoop.mapred.LineRecordReader.next(LineRecordReader.java:48)\n    at org.apache.spark.rdd.HadoopRDD$$anon$1.getNext(HadoopRDD.scala:392)\n    ... 16 more\n)\n</code></pre>\n<hr />\n<p>When read an empty csv formatted s3 file, everything works fine.</p>\n<pre class=\"lang-java prettyprint-override\"><code>JavaRDD&lt;Row&gt; javaRDD = sparkSession.read().format(&quot;csv&quot;).option(&quot;enforceSchema&quot;, true).option(&quot;header&quot;, &quot;true&quot;).load(filePath).javaRDD();\n</code></pre>\n<hr />\n<p>When I read a non-empty s3 file of any format, everything works fine.</p>\n"},{"tags":["java","spring","ldap","spring-ldap","ldapconnection"],"comments":[{"owner":{"account_id":443300,"reputation":15543,"user_id":834424,"accept_rate":91,"display_name":"dbrin"},"score":1,"creation_date":1346173025,"post_id":12163947,"comment_id":16279168,"body_markdown":"do you have the correct password? does it work using a client like JXplorer ?","body":"do you have the correct password? does it work using a client like JXplorer ?"},{"owner":{"account_id":1110538,"reputation":13397,"user_id":1101083,"accept_rate":70,"display_name":"Himanshu Yadav"},"score":0,"creation_date":1346175604,"post_id":12163947,"comment_id":16280243,"body_markdown":"@DmitryB I am able to connect to server with &#39;secret&#39; but not with &#39;somepwd&#39;.","body":"@DmitryB I am able to connect to server with &#39;secret&#39; but not with &#39;somepwd&#39;."},{"owner":{"account_id":1110538,"reputation":13397,"user_id":1101083,"accept_rate":70,"display_name":"Himanshu Yadav"},"score":0,"creation_date":1346178774,"post_id":12163947,"comment_id":16281598,"body_markdown":"Then where and how should I use given input user password? In this case &#39;somepwd&#39;.","body":"Then where and how should I use given input user password? In this case &#39;somepwd&#39;."},{"owner":{"account_id":29217,"reputation":3838,"user_id":78743,"accept_rate":91,"display_name":"jiggy"},"score":0,"creation_date":1346180802,"post_id":12163947,"comment_id":21789878,"body_markdown":"If I&#39;m understanding your question, you want to use [LdapTemplate.authenticate()](http://static.springsource.org/spring-ldap/docs/1.3.x/apidocs/org/springframework/ldap/core/LdapTemplate.html#authenticate%28javax.naming.Name,%20java.lang.String,%20java.lang.String%29). Or is your problem in creating the LDAP context in the first place?","body":"If I&#39;m understanding your question, you want to use <a href=\"http://static.springsource.org/spring-ldap/docs/1.3.x/apidocs/org/springframework/ldap/core/LdapTemplate.html#authenticate%28javax.naming.Name,%20java.lang.String,%20java.lang.String%29\" rel=\"nofollow noreferrer\">LdapTemplate.authenticate()</a>. Or is your problem in creating the LDAP context in the first place?"}],"answers":[{"tags":[],"owner":{"account_id":428462,"reputation":11037,"user_id":810802,"display_name":"Terry Gardner"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1346174106,"creation_date":1346174106,"answer_id":12164266,"question_id":12163947,"body_markdown":"An LDAP connection starts off as `anonymous`. To change the authorization state of a connection, use the BIND request. The BIND request takes two forms, &#39;simple&#39; or &#39;SASL&#39;. The &#39;simple&#39; BIND request takes a distinguished name and password. The BIND request should be transmitted over a secure connection, or a non-secure connection promoted to a secure connection using the `StartTLS` extended request.\r\n\r\nUsing the UnboundID LDAP SDK:\r\n\r\n    // exception handling not shown\r\n    LDAPConnection ldapConnection = new LDAPConnection(hostname,port);\r\n    BindRequest bindRequest = new SimpleBindRequest(username,password);\r\n    BindResult bindResult = ldapConnection.bind(bindRequest);\r\n    if(bindResult.getResultCode().equals(ResultCode.SUCCESS)) {\r\n       /// successful authentication\r\n    }\r\n    ldapConnection.close();","title":"LDAP: How to authenticate user with connection details","body":"<p>An LDAP connection starts off as <code>anonymous</code>. To change the authorization state of a connection, use the BIND request. The BIND request takes two forms, 'simple' or 'SASL'. The 'simple' BIND request takes a distinguished name and password. The BIND request should be transmitted over a secure connection, or a non-secure connection promoted to a secure connection using the <code>StartTLS</code> extended request.</p>\n\n<p>Using the UnboundID LDAP SDK:</p>\n\n<pre><code>// exception handling not shown\nLDAPConnection ldapConnection = new LDAPConnection(hostname,port);\nBindRequest bindRequest = new SimpleBindRequest(username,password);\nBindResult bindResult = ldapConnection.bind(bindRequest);\nif(bindResult.getResultCode().equals(ResultCode.SUCCESS)) {\n   /// successful authentication\n}\nldapConnection.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1345845,"reputation":3244,"user_id":1286621,"accept_rate":80,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1346180118,"creation_date":1346180118,"answer_id":12165647,"question_id":12163947,"body_markdown":"This is a mashup of stuff I found in various places.  It should put you along the correct path if you don&#39;t want to use the UnboundID SDK.  This isn&#39;t production quality, you might want to add the SSL stuff in here if your shop supports it.  \r\n&lt;br&gt;\r\n\r\n    public static Boolean validateLogin(String userName, String userPassword) {\r\n        Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\r\n\r\n\r\n        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n        env.put(Context.PROVIDER_URL, &quot;ldap://&quot; + LDAP_SERVER + &quot;:&quot; + LDAP_SERVER_PORT + &quot;/&quot; + LDAP_BASE_DN);\r\n    \r\n        // To get rid of the PartialResultException when using Active Directory\r\n        env.put(Context.REFERRAL, &quot;follow&quot;);\r\n\r\n        // Needed for the Bind (User Authorized to Query the LDAP server) \r\n        env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\n        env.put(Context.SECURITY_PRINCIPAL, LDAP_BIND_DN);\r\n        env.put(Context.SECURITY_CREDENTIALS, LDAP_BIND_PASSWORD);\r\n\r\n        DirContext ctx;\r\n        try {\r\n           ctx = new InitialDirContext(env);\r\n        } catch (NamingException e) {\r\n           throw new RuntimeException(e);\r\n        }\r\n\r\n        NamingEnumeration&lt;SearchResult&gt; results = null;\r\n    \r\n        try {\r\n           SearchControls controls = new SearchControls();\r\n           controls.setSearchScope(SearchControls.SUBTREE_SCOPE); // Search Entire Subtree\r\n           controls.setCountLimit(1);   //Sets the maximum number of entries to be returned as a result of the search\r\n           controls.setTimeLimit(5000); // Sets the time limit of these SearchControls in milliseconds\r\n\r\n           String searchString = &quot;(&amp;(objectCategory=user)(sAMAccountName=&quot; + userName + &quot;))&quot;;\r\n\r\n           results = ctx.search(&quot;&quot;, searchString, controls);\r\n\r\n           if (results.hasMore()) {\r\n          \r\n               SearchResult result = (SearchResult) results.next();\r\n               Attributes attrs = result.getAttributes();\r\n               Attribute dnAttr = attrs.get(&quot;distinguishedName&quot;);\r\n               String dn = (String) dnAttr.get();\r\n\r\n               // User Exists, Validate the Password\r\n           \r\n               env.put(Context.SECURITY_PRINCIPAL, dn);\r\n               env.put(Context.SECURITY_CREDENTIALS, userPassword);\r\n\r\n               new InitialDirContext(env); // Exception will be thrown on Invalid case\r\n               return true;\r\n           } \r\n           else \r\n    \t       return false;\r\n       \r\n        } catch (AuthenticationException e) { // Invalid Login\r\n        \r\n     \t    return false;\r\n        } catch (NameNotFoundException e) { // The base context was not found.\r\n       \r\n    \t    return false;\r\n        } catch (SizeLimitExceededException e) {\r\n            throw new RuntimeException(&quot;LDAP Query Limit Exceeded, adjust the query to bring back less records&quot;, e);\r\n        } catch (NamingException e) {\r\n           throw new RuntimeException(e);\r\n        } finally {\r\n    \t\r\n           if (results != null) {\r\n              try { results.close(); } catch (Exception e) { /* Do Nothing */ }\r\n           }\r\n          \r\n           if (ctx != null) {\r\n              try { ctx.close(); } catch (Exception e) { /* Do Nothing */ }\r\n           }\r\n        }\r\n    }\r\n","title":"LDAP: How to authenticate user with connection details","body":"<p>This is a mashup of stuff I found in various places.  It should put you along the correct path if you don't want to use the UnboundID SDK.  This isn't production quality, you might want to add the SSL stuff in here if your shop supports it.<br>\n<br></p>\n\n<pre><code>public static Boolean validateLogin(String userName, String userPassword) {\n    Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\n\n\n    env.put(Context.INITIAL_CONTEXT_FACTORY, \"com.sun.jndi.ldap.LdapCtxFactory\");\n    env.put(Context.PROVIDER_URL, \"ldap://\" + LDAP_SERVER + \":\" + LDAP_SERVER_PORT + \"/\" + LDAP_BASE_DN);\n\n    // To get rid of the PartialResultException when using Active Directory\n    env.put(Context.REFERRAL, \"follow\");\n\n    // Needed for the Bind (User Authorized to Query the LDAP server) \n    env.put(Context.SECURITY_AUTHENTICATION, \"simple\");\n    env.put(Context.SECURITY_PRINCIPAL, LDAP_BIND_DN);\n    env.put(Context.SECURITY_CREDENTIALS, LDAP_BIND_PASSWORD);\n\n    DirContext ctx;\n    try {\n       ctx = new InitialDirContext(env);\n    } catch (NamingException e) {\n       throw new RuntimeException(e);\n    }\n\n    NamingEnumeration&lt;SearchResult&gt; results = null;\n\n    try {\n       SearchControls controls = new SearchControls();\n       controls.setSearchScope(SearchControls.SUBTREE_SCOPE); // Search Entire Subtree\n       controls.setCountLimit(1);   //Sets the maximum number of entries to be returned as a result of the search\n       controls.setTimeLimit(5000); // Sets the time limit of these SearchControls in milliseconds\n\n       String searchString = \"(&amp;(objectCategory=user)(sAMAccountName=\" + userName + \"))\";\n\n       results = ctx.search(\"\", searchString, controls);\n\n       if (results.hasMore()) {\n\n           SearchResult result = (SearchResult) results.next();\n           Attributes attrs = result.getAttributes();\n           Attribute dnAttr = attrs.get(\"distinguishedName\");\n           String dn = (String) dnAttr.get();\n\n           // User Exists, Validate the Password\n\n           env.put(Context.SECURITY_PRINCIPAL, dn);\n           env.put(Context.SECURITY_CREDENTIALS, userPassword);\n\n           new InitialDirContext(env); // Exception will be thrown on Invalid case\n           return true;\n       } \n       else \n           return false;\n\n    } catch (AuthenticationException e) { // Invalid Login\n\n        return false;\n    } catch (NameNotFoundException e) { // The base context was not found.\n\n        return false;\n    } catch (SizeLimitExceededException e) {\n        throw new RuntimeException(\"LDAP Query Limit Exceeded, adjust the query to bring back less records\", e);\n    } catch (NamingException e) {\n       throw new RuntimeException(e);\n    } finally {\n\n       if (results != null) {\n          try { results.close(); } catch (Exception e) { /* Do Nothing */ }\n       }\n\n       if (ctx != null) {\n          try { ctx.close(); } catch (Exception e) { /* Do Nothing */ }\n       }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1691826959,"creation_date":1346322372,"answer_id":12194769,"question_id":12163947,"body_markdown":"[We have several JNDI Samples][1] That might help.\r\n\r\n\r\nThe [BasicJNDISearch.java][2] is about as basic as you can get and uses command line inputs.\r\n\r\n    public BasicJNDISearch(String[] args)\r\n    {\r\n\tsuper();\r\n\r\n\ttry\r\n\t{\r\n\t    BasicJNDISearch.doBasicSearch(args);\r\n\t}\r\n\tcatch (Exception ex)\r\n\t{\r\n\t    ex.printStackTrace();\r\n\t}\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param stid\r\n     *            String - Standard ID (uid)\r\n     * @throws Exception\r\n     *             -\r\n     */\r\n    public static void doBasicSearch(String[] args) throws Exception\r\n    {\r\n\tSystem.out.println(&quot;Performing LDAP Search with:&quot;);\r\n\tSystem.out.println(&quot;\tldapHostName = &quot; + args[0]);\r\n\tSystem.out.println(&quot;\t    ldapPort = &quot; + args[1]);\r\n\tSystem.out.println(&quot;\t      bindDn = &quot; + args[2]);\r\n\tSystem.out.println(&quot;\t   bindDnPwd = &quot; + args[3]);\r\n\tSystem.out.println(&quot;\t  searchBase = &quot; + args[4]);\r\n\tSystem.out.println(&quot;\t      filter = (&quot; + args[5] + &quot;=&quot; + args[6] + &quot;)&quot;);\r\n\tSystem.out.println(&quot;\t      Scope: = SUBTREE_SCOPE&quot;);\r\n\r\n\tDirContext ctx = getDirContext(args[0], args[1], args[2], args[3]);\r\n\tSearchControls constraints = new SearchControls();\r\n\tconstraints.setSearchScope(SearchControls.SUBTREE_SCOPE);\r\n\t// ignore attribute name case\r\n\t// matchAttrs.put(new BasicAttribute(args[5], args[6]));\r\n\tString filter = &quot;(&quot; + args[5] + &quot;=&quot; + args[6] + &quot;)&quot;;\r\n\t// Search for objects with those matching attributes\r\n\tNamingEnumeration&lt;?&gt; answer = ctx.search(args[4], filter, constraints);\r\n\tformatResults(answer);\r\n\tctx.close();\r\n    }\r\n\r\n\r\n  [1]: https://github.com/jwilleke/Examples-JNDI/tree/master/src/com/willeke/samples\r\n  [2]: https://github.com/jwilleke/Examples-JNDI/blob/master/src/com/willeke/samples/ldap/jndi/BasicJNDISearch.java","title":"LDAP: How to authenticate user with connection details","body":"<p><a href=\"https://github.com/jwilleke/Examples-JNDI/tree/master/src/com/willeke/samples\" rel=\"nofollow noreferrer\">We have several JNDI Samples</a> That might help.</p>\n<p>The <a href=\"https://github.com/jwilleke/Examples-JNDI/blob/master/src/com/willeke/samples/ldap/jndi/BasicJNDISearch.java\" rel=\"nofollow noreferrer\">BasicJNDISearch.java</a> is about as basic as you can get and uses command line inputs.</p>\n<pre><code>public BasicJNDISearch(String[] args)\n{\nsuper();\n\ntry\n{\n    BasicJNDISearch.doBasicSearch(args);\n}\ncatch (Exception ex)\n{\n    ex.printStackTrace();\n}\n}\n\n/**\n * \n * @param stid\n *            String - Standard ID (uid)\n * @throws Exception\n *             -\n */\npublic static void doBasicSearch(String[] args) throws Exception\n{\nSystem.out.println(&quot;Performing LDAP Search with:&quot;);\nSystem.out.println(&quot;    ldapHostName = &quot; + args[0]);\nSystem.out.println(&quot;        ldapPort = &quot; + args[1]);\nSystem.out.println(&quot;          bindDn = &quot; + args[2]);\nSystem.out.println(&quot;       bindDnPwd = &quot; + args[3]);\nSystem.out.println(&quot;      searchBase = &quot; + args[4]);\nSystem.out.println(&quot;          filter = (&quot; + args[5] + &quot;=&quot; + args[6] + &quot;)&quot;);\nSystem.out.println(&quot;          Scope: = SUBTREE_SCOPE&quot;);\n\nDirContext ctx = getDirContext(args[0], args[1], args[2], args[3]);\nSearchControls constraints = new SearchControls();\nconstraints.setSearchScope(SearchControls.SUBTREE_SCOPE);\n// ignore attribute name case\n// matchAttrs.put(new BasicAttribute(args[5], args[6]));\nString filter = &quot;(&quot; + args[5] + &quot;=&quot; + args[6] + &quot;)&quot;;\n// Search for objects with those matching attributes\nNamingEnumeration&lt;?&gt; answer = ctx.search(args[4], filter, constraints);\nformatResults(answer);\nctx.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4261595,"reputation":371,"user_id":3485836,"display_name":"Alok"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536130855,"creation_date":1536130855,"answer_id":52178964,"question_id":12163947,"body_markdown":"Try using this, it worked for me\r\n\r\n    public static Boolean validateLogin(String userName, String userPassword) {\r\n\t    Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\r\n\r\n\r\n\t    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n\t    env.put(Context.PROVIDER_URL, &quot;ldap://&quot; + LDAP_SERVER + &quot;:&quot; + LDAP_SERVER_PORT + &quot;/&quot; + LDAP_BASE_DN);\r\n\t    env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\n\t    env.put(Context.SECURITY_PRINCIPAL, userName + &quot;@&quot; + LDAP_SERVER);\r\n\t    env.put(Context.SECURITY_CREDENTIALS, userPassword);\r\n\r\n\t    DirContext ctx;\r\n\t    try {\r\n\t       ctx = new InitialDirContext(env); //throw exception, if username-password not correct\r\n\t       return true;\r\n\t    } catch (Exception e) {\r\n\t    \treturn false;\r\n\t    }\r\n\t}\r\n\r\n","title":"LDAP: How to authenticate user with connection details","body":"<p>Try using this, it worked for me</p>\n\n<pre><code>public static Boolean validateLogin(String userName, String userPassword) {\n    Hashtable&lt;String, String&gt; env = new Hashtable&lt;String, String&gt;();\n\n\n    env.put(Context.INITIAL_CONTEXT_FACTORY, \"com.sun.jndi.ldap.LdapCtxFactory\");\n    env.put(Context.PROVIDER_URL, \"ldap://\" + LDAP_SERVER + \":\" + LDAP_SERVER_PORT + \"/\" + LDAP_BASE_DN);\n    env.put(Context.SECURITY_AUTHENTICATION, \"simple\");\n    env.put(Context.SECURITY_PRINCIPAL, userName + \"@\" + LDAP_SERVER);\n    env.put(Context.SECURITY_CREDENTIALS, userPassword);\n\n    DirContext ctx;\n    try {\n       ctx = new InitialDirContext(env); //throw exception, if username-password not correct\n       return true;\n    } catch (Exception e) {\n        return false;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1110538,"reputation":13397,"user_id":1101083,"accept_rate":70,"display_name":"Himanshu Yadav"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32453,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":12165647,"answer_count":4,"score":10,"last_activity_date":1691826959,"creation_date":1346172743,"question_id":12163947,"body_markdown":"I am not able to authenticate a user using LDAP. I have got following details:\r\n\r\n    URL=ldap://10.10.10.10:389 \r\n    LDAP BASE:DC=lab2,DC=ins \r\n    LDAP Bind Account: CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=lab2,DC=ins \r\n    LDAP Bind Account Pw: secret \r\n\r\nI can search a `sAMAccountName` value using above details, but how to authenticate a user with user name and password?&lt;br/&gt;\r\nIf you follow my previous questions then you will understand that, I am successfully able to connect to LDAP server but not able to authenticate him.&lt;br/&gt;\r\nUser to authenticate:\r\n\r\n    user: someusername\r\n    password: somepwd\r\n\r\nI am not able to connect to LDAP server with `&#39;somepwd&#39;` and how should I use `someusername`. I am able to search given user as `sAMAccountName`.","title":"LDAP: How to authenticate user with connection details","body":"<p>I am not able to authenticate a user using LDAP. I have got following details:</p>\n\n<pre><code>URL=ldap://10.10.10.10:389 \nLDAP BASE:DC=lab2,DC=ins \nLDAP Bind Account: CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=lab2,DC=ins \nLDAP Bind Account Pw: secret \n</code></pre>\n\n<p>I can search a <code>sAMAccountName</code> value using above details, but how to authenticate a user with user name and password?<br/>\nIf you follow my previous questions then you will understand that, I am successfully able to connect to LDAP server but not able to authenticate him.<br/>\nUser to authenticate:</p>\n\n<pre><code>user: someusername\npassword: somepwd\n</code></pre>\n\n<p>I am not able to connect to LDAP server with <code>'somepwd'</code> and how should I use <code>someusername</code>. I am able to search given user as <code>sAMAccountName</code>.</p>\n"},{"tags":["java","android","kotlin","android-multiple-users"],"comments":[{"owner":{"account_id":8114986,"reputation":251,"user_id":6113794,"accept_rate":25,"display_name":"Umar Farooq"},"score":0,"creation_date":1691827071,"post_id":76888247,"comment_id":135546547,"body_markdown":"You should create two activities, one for User and one for Admin. Store your form data in local database.","body":"You should create two activities, one for User and one for Admin. Store your form data in local database."},{"owner":{"account_id":29210556,"reputation":1,"user_id":22378626,"display_name":"TYIT_511_JEET"},"score":0,"creation_date":1691854650,"post_id":76888247,"comment_id":135549222,"body_markdown":"actually when user sends the enrollment request to admin, the admin should accept and then it should store in FireStore. but I only want to know that by which method i can send form data to Admin","body":"actually when user sends the enrollment request to admin, the admin should accept and then it should store in FireStore. but I only want to know that by which method i can send form data to Admin"}],"owner":{"account_id":29210556,"reputation":1,"user_id":22378626,"display_name":"TYIT_511_JEET"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691826099,"creation_date":1691826099,"question_id":76888247,"body_markdown":"I created the multiple User app in which there are User and Admin.\r\nSo i want send the User Enrollment request, if user click on Enroll the form should fillup by the user(Name,email,contact). and after submiting the Data which is filled in the form should be sent to the Admin.\r\nAt User Side i have a Activity and At admin side i have a fragment.\r\n\r\n\r\nnote: both(user and admin) are in one app only(multiple user app) with JAVA","title":"Sharing data in multiple User app(User and Admin)","body":"<p>I created the multiple User app in which there are User and Admin.\nSo i want send the User Enrollment request, if user click on Enroll the form should fillup by the user(Name,email,contact). and after submiting the Data which is filled in the form should be sent to the Admin.\nAt User Side i have a Activity and At admin side i have a fragment.</p>\n<p>note: both(user and admin) are in one app only(multiple user app) with JAVA</p>\n"},{"tags":["javascript","java","jsp","servlets"],"comments":[{"owner":{"account_id":10010097,"reputation":987,"user_id":7403180,"accept_rate":57,"display_name":"sForSujit"},"score":1,"creation_date":1503318393,"post_id":45797003,"comment_id":78551724,"body_markdown":"You can show the pre loading div until the data is fetched","body":"You can show the pre loading div until the data is fetched"},{"owner":{"account_id":2894864,"reputation":508,"user_id":2482874,"accept_rate":86,"display_name":"Sarah Aziziyan"},"score":1,"creation_date":1503318502,"post_id":45797003,"comment_id":78551805,"body_markdown":"Possible duplicate of [Display something while servlet loads](https://stackoverflow.com/questions/36303493/display-something-while-servlet-loads)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/36303493/display-something-while-servlet-loads\">Display something while servlet loads</a>"},{"owner":{"account_id":9791160,"reputation":676,"user_id":7773888,"accept_rate":40,"display_name":"raviraja"},"score":0,"creation_date":1503318638,"post_id":45797003,"comment_id":78551907,"body_markdown":"@Sarah No it&#39;s not a duplicate as there was no specific solution provided in that question,I have already gone through it, if you don&#39;t know the answer stay idle, don&#39;t act like moderator.","body":"@Sarah No it&#39;s not a duplicate as there was no specific solution provided in that question,I have already gone through it, if you don&#39;t know the answer stay idle, don&#39;t act like moderator."},{"owner":{"account_id":9791160,"reputation":676,"user_id":7773888,"accept_rate":40,"display_name":"raviraja"},"score":0,"creation_date":1503318729,"post_id":45797003,"comment_id":78551966,"body_markdown":"@sForSujit some example code would be helpful","body":"@sForSujit some example code would be helpful"},{"owner":{"account_id":1038817,"reputation":89,"user_id":1045330,"accept_rate":100,"display_name":"PanBrambor"},"score":0,"creation_date":1503323901,"post_id":45797003,"comment_id":78555807,"body_markdown":"The simplest solution would be a show a div with &quot;loading&quot; gif as mentioned above.","body":"The simplest solution would be a show a div with &quot;loading&quot; gif as mentioned above."}],"answers":[{"tags":[],"owner":{"account_id":6991584,"reputation":2672,"user_id":5360672,"accept_rate":86,"display_name":"Jonathan Laliberte"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503351640,"creation_date":1503351640,"answer_id":45805933,"question_id":45797003,"body_markdown":"You have to use AJAX. Servlet requests like the one in your example are synchronous. Which means it will wait until the processing finishes then do the next activity. \r\n\r\nWith an AJAX request you can send the request and then do something else without having to wait for it to finish processing, because it is asynchronous. \r\n\r\nThe way i would approach this is in the following way: \r\n\r\nYou get the user details in ConfirmEvaluate, and redirect the user to userdata, then once the user is on the page do the AJAX request to fetch the information that takes a long time to process. When the request is made you can show a loading icon but when you get a response from the AJAX request, you can hide this loading icon. Check out this brilliant post on how to make [AJAX requests with servlets][1]\r\n\r\n\r\nI had to implement something like this recently, here is some example code:\r\n\r\n\r\n    &lt;script&gt;\r\n    //when page loads, the ajax request starts\r\n    $(document).ready(function() {\r\n    \t$(this).scrollTop(0);\r\n    \tgetposts(username);\r\n    \t});\r\n    \r\n    //ajax request that will show and hide the loader depending on response\r\n     var getposts = function (username) {\r\n    \t var params = {\r\n    \t \t    user: username\t \t  \r\n    \t \t};\r\n    $.get(&quot;../GetUserFeed&quot;,$.param(params),function(responseXml) {     \t\r\n            $(&quot;#user-feed&quot;).append($(responseXml).find(&quot;feed&quot;).html()); // Parse XML, find &lt;data&gt; element and append its HTML to HTML DOM element with ID &quot;somediv&quot;.\r\n    \t\t$(&#39;#logo-loader&#39;).hide();\r\n               if(isBlank(responseXml)){\r\n    \t\t\t$(&#39;#logo-loader-completed&#39;).show();\r\n    \t\t\t$(&#39;#logo-loader-image&#39;).hide();\r\n    \t\t}\r\n    \t});\r\n     };\r\n    \r\n     &lt;/script&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax","title":"Loading screen while Servlet loads","body":"<p>You have to use AJAX. Servlet requests like the one in your example are synchronous. Which means it will wait until the processing finishes then do the next activity. </p>\n\n<p>With an AJAX request you can send the request and then do something else without having to wait for it to finish processing, because it is asynchronous. </p>\n\n<p>The way i would approach this is in the following way: </p>\n\n<p>You get the user details in ConfirmEvaluate, and redirect the user to userdata, then once the user is on the page do the AJAX request to fetch the information that takes a long time to process. When the request is made you can show a loading icon but when you get a response from the AJAX request, you can hide this loading icon. Check out this brilliant post on how to make <a href=\"https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax\">AJAX requests with servlets</a></p>\n\n<p>I had to implement something like this recently, here is some example code:</p>\n\n<pre><code>&lt;script&gt;\n//when page loads, the ajax request starts\n$(document).ready(function() {\n    $(this).scrollTop(0);\n    getposts(username);\n    });\n\n//ajax request that will show and hide the loader depending on response\n var getposts = function (username) {\n     var params = {\n            user: username        \n        };\n$.get(\"../GetUserFeed\",$.param(params),function(responseXml) {      \n        $(\"#user-feed\").append($(responseXml).find(\"feed\").html()); // Parse XML, find &lt;data&gt; element and append its HTML to HTML DOM element with ID \"somediv\".\n        $('#logo-loader').hide();\n           if(isBlank(responseXml)){\n            $('#logo-loader-completed').show();\n            $('#logo-loader-image').hide();\n        }\n    });\n };\n\n &lt;/script&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19407465,"reputation":283,"user_id":14192616,"display_name":"Bipul Jaishwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691826075,"creation_date":1691826075,"answer_id":76888245,"question_id":45797003,"body_markdown":"Here is the solution you are looking for. you can use this example to get your issue solved.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    &lt;script&gt;\r\n    //when page loads, the ajax request starts\r\n    $(document).ready(function() {\r\n        $(this).scrollTop(0);\r\n        getposts(username);\r\n        });\r\n\r\n    //ajax request that will show and hide the loader depending on response\r\n     var getposts = function (username) {\r\n         var params = {\r\n                user: username        \r\n            };\r\n    $.get(&quot;../GetUserFeed&quot;,$.param(params),function(responseXml) {      \r\n            $(&quot;#user-feed&quot;).append($(responseXml).find(&quot;feed&quot;).html()); // Parse XML, find &lt;data&gt; element and append its HTML to HTML DOM element with ID &quot;somediv&quot;.\r\n            $(&#39;#logo-loader&#39;).hide();\r\n               if(isBlank(responseXml)){\r\n                $(&#39;#logo-loader-completed&#39;).show();\r\n                $(&#39;#logo-loader-image&#39;).hide();\r\n            }\r\n        });\r\n     };\r\n\r\n     &lt;/script&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Loading screen while Servlet loads","body":"<p>Here is the solution you are looking for. you can use this example to get your issue solved.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>&lt;script&gt;\n//when page loads, the ajax request starts\n$(document).ready(function() {\n    $(this).scrollTop(0);\n    getposts(username);\n    });\n\n//ajax request that will show and hide the loader depending on response\n var getposts = function (username) {\n     var params = {\n            user: username        \n        };\n$.get(\"../GetUserFeed\",$.param(params),function(responseXml) {      \n        $(\"#user-feed\").append($(responseXml).find(\"feed\").html()); // Parse XML, find &lt;data&gt; element and append its HTML to HTML DOM element with ID \"somediv\".\n        $('#logo-loader').hide();\n           if(isBlank(responseXml)){\n            $('#logo-loader-completed').show();\n            $('#logo-loader-image').hide();\n        }\n    });\n };\n\n &lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":9791160,"reputation":676,"user_id":7773888,"accept_rate":40,"display_name":"raviraja"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1463,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691826075,"creation_date":1503318062,"question_id":45797003,"body_markdown":"I have this JSP where I select certain parameters and hit &quot;**submit**&quot; button, after clicking **&quot;submit&quot;** I am calling a JavaScript function as below\r\n\r\n    &lt;body&gt;\r\n    &lt;input type=button class=&quot;button&quot;  id = &quot;submit&quot; value=&quot;Evaluate&quot; \r\n    onclick=&quot;JavaScript:return evaluateFunction()&quot;&gt;\r\n    &lt;/body&gt;\r\nand in the `evaluateFunction()` I am collecting all the parameters and call a new Servlet in new popup window as below:\r\n\r\n    &lt;script&gt;\r\n    function evaluateFunction(){\r\n    var win = window.open(&#39;ConfirmEvaluate?parameters,&#39;mywindow&#39;,&#39;width=600,height=500,titlebar=no&#39;)\r\n    }\r\n    &lt;/script&gt;\r\n\r\nNow the issue is `ConfirmEvaluate servlet` takes some time to get the data from database(around 15-20 secs based on size of input) and displays the data in the forwarded JSP(say `userdata.jsp`)\r\nNow I want to display a loading gif or screen in that 15-20 seconds while the Servlet loads the data from database.\r\nHow can I proceed, any help would be appreciated.\r\n\r\nI have already gone through some similar questions in SO but none of them is having a specific answer.\r\n\r\n\r\n","title":"Loading screen while Servlet loads","body":"<p>I have this JSP where I select certain parameters and hit \"<strong>submit</strong>\" button, after clicking <strong>\"submit\"</strong> I am calling a JavaScript function as below</p>\n\n<pre><code>&lt;body&gt;\n&lt;input type=button class=\"button\"  id = \"submit\" value=\"Evaluate\" \nonclick=\"JavaScript:return evaluateFunction()\"&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>and in the <code>evaluateFunction()</code> I am collecting all the parameters and call a new Servlet in new popup window as below:</p>\n\n<pre><code>&lt;script&gt;\nfunction evaluateFunction(){\nvar win = window.open('ConfirmEvaluate?parameters,'mywindow','width=600,height=500,titlebar=no')\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Now the issue is <code>ConfirmEvaluate servlet</code> takes some time to get the data from database(around 15-20 secs based on size of input) and displays the data in the forwarded JSP(say <code>userdata.jsp</code>)\nNow I want to display a loading gif or screen in that 15-20 seconds while the Servlet loads the data from database.\nHow can I proceed, any help would be appreciated.</p>\n\n<p>I have already gone through some similar questions in SO but none of them is having a specific answer.</p>\n"},{"tags":["java","android","decimalformat","animator"],"answers":[{"tags":[],"owner":{"account_id":10777679,"reputation":123,"user_id":7929094,"display_name":"Pascal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611683164,"creation_date":1611683164,"answer_id":65906468,"question_id":65708042,"body_markdown":"You need to actually use the DecimalFormat:\r\n\r\n```\r\nDecimalFormat decim = new DecimalFormat(&quot;#,###&quot;);\r\n//Total no animate\r\nValueAnimator animator = new ValueAnimator();\r\nanimator.setObjectValues(0, Integer.parseInt(total_no));\r\nanimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\r\n    public void onAnimationUpdate(ValueAnimator animation) {\r\n          tvtotal_no.setText(decim.format(animation.getAnimatedValue()));\r\n    }\r\n});\r\nanimator.setDuration(500);\r\nanimator.start();\r\n```","title":"Format ValueAmimator setText with decimal format Android JAVA","body":"<p>You need to actually use the DecimalFormat:</p>\n<pre><code>DecimalFormat decim = new DecimalFormat(&quot;#,###&quot;);\n//Total no animate\nValueAnimator animator = new ValueAnimator();\nanimator.setObjectValues(0, Integer.parseInt(total_no));\nanimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\n    public void onAnimationUpdate(ValueAnimator animation) {\n          tvtotal_no.setText(decim.format(animation.getAnimatedValue()));\n    }\n});\nanimator.setDuration(500);\nanimator.start();\n</code></pre>\n"}],"owner":{"account_id":17598124,"reputation":101,"user_id":14307983,"display_name":"hauto3"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691825710,"creation_date":1610563571,"question_id":65708042,"body_markdown":"I have a animated setText display. I take the string value from the JSON response and display it with valueAnimator.\r\n\r\n I need to format the final setText in 1000s format (#,###)\r\n\r\ne.g. \r\n\r\ncurrently I get: 50125\r\n\r\nExpected: 50,125\r\n\r\n```\r\n                   DecimalFormat decim = new DecimalFormat(&quot;#,###&quot;);\r\n                    //Total no animate\r\n                    ValueAnimator animator = new ValueAnimator();\r\n                    animator.setObjectValues(0, Integer.parseInt(total_no));\r\n                    animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\r\n                        public void onAnimationUpdate(ValueAnimator animation) {\r\n                            tvtotal_no.setText(String.valueOf(animation.getAnimatedValue()));\r\n                          //tvtotal_no.setText(decim.format(Integer.parseInt(total_cases)));\r\n                        }\r\n                    });\r\n                    animator.setDuration(500);\r\n                    animator.start();\r\n```","title":"Format ValueAmimator setText with decimal format Android JAVA","body":"<p>I have a animated setText display. I take the string value from the JSON response and display it with valueAnimator.</p>\n<p>I need to format the final setText in 1000s format (#,###)</p>\n<p>e.g.</p>\n<p>currently I get: 50125</p>\n<p>Expected: 50,125</p>\n<pre><code>                   DecimalFormat decim = new DecimalFormat(&quot;#,###&quot;);\n                    //Total no animate\n                    ValueAnimator animator = new ValueAnimator();\n                    animator.setObjectValues(0, Integer.parseInt(total_no));\n                    animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\n                        public void onAnimationUpdate(ValueAnimator animation) {\n                            tvtotal_no.setText(String.valueOf(animation.getAnimatedValue()));\n                          //tvtotal_no.setText(decim.format(Integer.parseInt(total_cases)));\n                        }\n                    });\n                    animator.setDuration(500);\n                    animator.start();\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1691778497,"post_id":76885894,"comment_id":135542704,"body_markdown":"I typed `Alt + 164` and got &#241; in your sample app. `Windows 11 version 10.0 running on amd64; UTF-8; en_US (nb)`.","body":"I typed <code>Alt + 164</code> and got &#241; in your sample app. <code>Windows 11 version 10.0 running on amd64; UTF-8; en_US (nb)</code>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1691784043,"post_id":76885894,"comment_id":135543575,"body_markdown":"@SedJ601 Alt-numpad is not the normal way to type non-ASCII characters.  The title specifically mentions dead keys—that is, keystrokes which indicate a pending diacritical which will be applied to the next typed character (usually a letter).  You can see this for yourself by switching your Windows keyboard layout to “US international” or any other layout with dead keys and/or AltGr.","body":"@SedJ601 Alt-numpad is not the normal way to type non-ASCII characters.  The title specifically mentions dead keys—that is, keystrokes which indicate a pending diacritical which will be applied to the next typed character (usually a letter).  You can see this for yourself by switching your Windows keyboard layout to “US international” or any other layout with dead keys and/or AltGr."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1691788015,"post_id":76885894,"comment_id":135544042,"body_markdown":"@VGR, thanks for clearing that up for me.","body":"@VGR, thanks for clearing that up for me."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1691788765,"post_id":76885894,"comment_id":135544137,"body_markdown":"What version of JavaFX are you using?  I’ve found that support for native keyboard entry has varied a lot from one version of JavaFX to the other (and from one OS with slightly different sets of updates to another).  Can you try building and running the program with JavaFX 20?","body":"What version of JavaFX are you using?  I’ve found that support for native keyboard entry has varied a lot from one version of JavaFX to the other (and from one OS with slightly different sets of updates to another).  Can you try building and running the program with JavaFX 20?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1691908048,"post_id":76885894,"comment_id":135552762,"body_markdown":"As you state in your edit, it works as expected for some key combinations but not others, it is probably a bug, probably also platform specific.  Or it could just be that JavaFX only supports certain key combinations. You can [file a bug report](https://wiki.openjdk.org/display/OpenJFX/Submitting+a+Bug+Report) or raise it on the openjfx-dev mailing list.","body":"As you state in your edit, it works as expected for some key combinations but not others, it is probably a bug, probably also platform specific.  Or it could just be that JavaFX only supports certain key combinations. You can <a href=\"https://wiki.openjdk.org/display/OpenJFX/Submitting+a+Bug+Report\" rel=\"nofollow noreferrer\">file a bug report</a> or raise it on the openjfx-dev mailing list."}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691797233,"creation_date":1691796074,"answer_id":76887145,"question_id":76885894,"body_markdown":"This is a limited answer for a **Mac with testing using JavaFX 20**, it may not be exactly what you are looking for.  \r\n\r\nAs noted by user VGR in comments, behavior will vary based based on your setup and actions.  For example, any of these can effect what happens:\r\n\r\n * JavaFX version.\r\n * OS type, version and setup.\r\n * Keyboard hardware.\r\n * Your applied text input procedure (sequence of keys typed).\r\n * Installed and applied fonts.\r\n\r\nI tried this on MacOS 13.4.1.  I used a MacBook Pro 2019 internal US keyboard with no special configurations in the OS for alternate input languages. \r\n\r\nWhat I found, is:\r\n\r\n * I type in a JavaFX TextField -&gt; `Option + n`\r\n   * it will display a `~` character.\r\n * I subsequently type another `n`\r\n   * The `~` character will change to a `&#241;` character. \r\n\r\nThe native OS X TextEdit application works the same.\r\n\r\nFor an external windows keyboard attached to the same machine, the `Alt` key is used rather than the non-existent `Option` key.\r\n\r\nTo find out how to do this I followed the [&quot;less common method&quot; for Apple laptops][1].  The &quot;most common method&quot; documented there only worked in the native app, not the JavaFX app. The &quot;most common method&quot; involves &quot;Press and hold the letter “n” key and a small popup will appear&quot;, which doesn&#39;t happen with JavaFX, instead it starts firing the keyboard repeat and writes lots on n characters.\r\n\r\nIt could be that you are using an unexpected key combination for your platform (from the JavaFX perspective), which JavaFX isn&#39;t recognizing.  On another platform, with the correct platform-specific key combination used and recognized by JavaFX, the text input controls are able to correctly process the input and map it to the desired characters (as demoed for certain input sequences outlined in this answer).\r\n\r\n\r\n**Other related info**\r\n\r\n*Key combinations are relayed in `KEY_TYPED` events*\r\n\r\nThere is a (seemingly) related, but not the same, issue which was closed as not an issue: [JDK-8172104 Dead keys are not detected][2], where it indicates that the actual outcome of the key combination comes in a [`KEY_TYPED` event][3] (not a `KEY_PRESSED` event).\r\n\r\nThe related issue is just about correctly filtering keys. If the core platform is able to correctly recognized `KEY_TYPED` strings, then I am not sure why TextField would not use that by default in your case.  I did check the JavaFX source code internally and it seems to me that text input controls function based on `KEY_TYPED` strings.\r\n\r\n*There are [dead keycodes][4]*\r\n\r\nThis means that the JavaFX system and key events can be made aware of [dead keys][5].\r\n\r\nIf you can&#39;t get the default functionality to work as you want, perhaps you could intercept them in a filter, consume the relevant events, store the historic captured key input sequences somewhere, then, if you detect a sequence which should generate something you want, map that sequence to something which does actually generate the required output (such as generating synthetic keypress events based on numerics, which SedJ601 noted in comments seems to work). This seems tricky though, probably should be a better way, so I would only consider such an approach as a last resort.  Alternately, you could raise additional feature requests for the JavaFX development team.\r\n\r\n**Test App**\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class EnyaApp extends Application {\r\n        @Override\r\n        public void start(Stage stage) {\r\n            Scene scene = new Scene(new TextField());\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    }\r\n\r\n \r\n\r\n\r\n  [1]: https://iamaileen.com/how-to-type-enye/#:~:text=%C2%BB%20Apple%20Computer%20or%20Laptop\r\n  [2]: https://bugs.openjdk.org/browse/JDK-8172104\r\n  [3]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/input/KeyEvent.html#KEY_TYPED\r\n  [4]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/input/KeyCode.html#DEAD_TILDE\r\n  [5]: https://en.wikipedia.org/wiki/Dead_key","title":"Using dead keys in JavaFX","body":"<p>This is a limited answer for a <strong>Mac with testing using JavaFX 20</strong>, it may not be exactly what you are looking for.</p>\n<p>As noted by user VGR in comments, behavior will vary based based on your setup and actions.  For example, any of these can effect what happens:</p>\n<ul>\n<li>JavaFX version.</li>\n<li>OS type, version and setup.</li>\n<li>Keyboard hardware.</li>\n<li>Your applied text input procedure (sequence of keys typed).</li>\n<li>Installed and applied fonts.</li>\n</ul>\n<p>I tried this on MacOS 13.4.1.  I used a MacBook Pro 2019 internal US keyboard with no special configurations in the OS for alternate input languages.</p>\n<p>What I found, is:</p>\n<ul>\n<li>I type in a JavaFX TextField -&gt; <code>Option + n</code>\n<ul>\n<li>it will display a <code>~</code> character.</li>\n</ul>\n</li>\n<li>I subsequently type another <code>n</code>\n<ul>\n<li>The <code>~</code> character will change to a <code>ñ</code> character.</li>\n</ul>\n</li>\n</ul>\n<p>The native OS X TextEdit application works the same.</p>\n<p>For an external windows keyboard attached to the same machine, the <code>Alt</code> key is used rather than the non-existent <code>Option</code> key.</p>\n<p>To find out how to do this I followed the <a href=\"https://iamaileen.com/how-to-type-enye/#:%7E:text=%C2%BB%20Apple%20Computer%20or%20Laptop\" rel=\"nofollow noreferrer\">&quot;less common method&quot; for Apple laptops</a>.  The &quot;most common method&quot; documented there only worked in the native app, not the JavaFX app. The &quot;most common method&quot; involves &quot;Press and hold the letter “n” key and a small popup will appear&quot;, which doesn't happen with JavaFX, instead it starts firing the keyboard repeat and writes lots on n characters.</p>\n<p>It could be that you are using an unexpected key combination for your platform (from the JavaFX perspective), which JavaFX isn't recognizing.  On another platform, with the correct platform-specific key combination used and recognized by JavaFX, the text input controls are able to correctly process the input and map it to the desired characters (as demoed for certain input sequences outlined in this answer).</p>\n<p><strong>Other related info</strong></p>\n<p><em>Key combinations are relayed in <code>KEY_TYPED</code> events</em></p>\n<p>There is a (seemingly) related, but not the same, issue which was closed as not an issue: <a href=\"https://bugs.openjdk.org/browse/JDK-8172104\" rel=\"nofollow noreferrer\">JDK-8172104 Dead keys are not detected</a>, where it indicates that the actual outcome of the key combination comes in a <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/input/KeyEvent.html#KEY_TYPED\" rel=\"nofollow noreferrer\"><code>KEY_TYPED</code> event</a> (not a <code>KEY_PRESSED</code> event).</p>\n<p>The related issue is just about correctly filtering keys. If the core platform is able to correctly recognized <code>KEY_TYPED</code> strings, then I am not sure why TextField would not use that by default in your case.  I did check the JavaFX source code internally and it seems to me that text input controls function based on <code>KEY_TYPED</code> strings.</p>\n<p><em>There are <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/input/KeyCode.html#DEAD_TILDE\" rel=\"nofollow noreferrer\">dead keycodes</a></em></p>\n<p>This means that the JavaFX system and key events can be made aware of <a href=\"https://en.wikipedia.org/wiki/Dead_key\" rel=\"nofollow noreferrer\">dead keys</a>.</p>\n<p>If you can't get the default functionality to work as you want, perhaps you could intercept them in a filter, consume the relevant events, store the historic captured key input sequences somewhere, then, if you detect a sequence which should generate something you want, map that sequence to something which does actually generate the required output (such as generating synthetic keypress events based on numerics, which SedJ601 noted in comments seems to work). This seems tricky though, probably should be a better way, so I would only consider such an approach as a last resort.  Alternately, you could raise additional feature requests for the JavaFX development team.</p>\n<p><strong>Test App</strong></p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TextField;\nimport javafx.stage.Stage;\n\npublic class EnyaApp extends Application {\n    @Override\n    public void start(Stage stage) {\n        Scene scene = new Scene(new TextField());\n        stage.setScene(scene);\n        stage.show();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13733994,"reputation":331,"user_id":9910820,"display_name":"Patrik"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691824928,"creation_date":1691777712,"question_id":76885894,"body_markdown":"Here is a minimal example.\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.scene.layout.StackPane;\r\nimport javafx.stage.Stage;\r\n\r\npublic class DeadKeyTextFieldExample extends Application {\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        TextField textField = new TextField();\r\n\r\n        StackPane root = new StackPane();\r\n        root.getChildren().add(textField);\r\n\r\n        Scene scene = new Scene(root, 300, 250);\r\n\r\n        primaryStage.setTitle(&quot;Dead Key TextField Example&quot;);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n}\r\n```\r\n\r\nOn Windows, the normal way to type a &#241; is AltGr + ~ and n (at least on a Swedish keyboard). But when I do this in the text field the result is ~&#168;n. What can I do to get the expected behaviour?\r\n\r\n\r\nEDIT: I am using JavaFX 20, Windows 10. I might add that other dead key characters work as expected: &#168; + e gives &#235;, ^ + e gives &#234;, but ~ + e gives ~&#235;.","title":"Using dead keys in JavaFX","body":"<p>Here is a minimal example.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\n\npublic class DeadKeyTextFieldExample extends Application {\n    @Override\n    public void start(Stage primaryStage) {\n        TextField textField = new TextField();\n\n        StackPane root = new StackPane();\n        root.getChildren().add(textField);\n\n        Scene scene = new Scene(root, 300, 250);\n\n        primaryStage.setTitle(&quot;Dead Key TextField Example&quot;);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>On Windows, the normal way to type a ñ is AltGr + ~ and n (at least on a Swedish keyboard). But when I do this in the text field the result is ~¨n. What can I do to get the expected behaviour?</p>\n<p>EDIT: I am using JavaFX 20, Windows 10. I might add that other dead key characters work as expected: ¨ + e gives ë, ^ + e gives ê, but ~ + e gives ~ë.</p>\n"},{"tags":["java","spring","exception","telegram","aop"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1691975970,"post_id":76888182,"comment_id":135558996,"body_markdown":"Welcome to Stack Overflow. Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). Thank you.","body":"Welcome to Stack Overflow. Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Thank you."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1691976143,"post_id":76888182,"comment_id":135559017,"body_markdown":"See, the problem with a bunch of snippets instead of full classes with package names and imports plus a Spring configuration or - even better - a link to a minimal reproducer on GitHub is, that there are so many ways to get Spring AOP wrong: configuration, self-invocation, trying to target something other than a Spring-managed bean, mixing native AspectJ with Spring AOP. The people trying to help you would have to guess.","body":"See, the problem with a bunch of snippets instead of full classes with package names and imports plus a Spring configuration or - even better - a link to a minimal reproducer on GitHub is, that there are so many ways to get Spring AOP wrong: configuration, self-invocation, trying to target something other than a Spring-managed bean, mixing native AspectJ with Spring AOP. The people trying to help you would have to guess."}],"owner":{"account_id":29210476,"reputation":1,"user_id":22378562,"display_name":"wanderer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691824711,"creation_date":1691824711,"question_id":76888182,"body_markdown":"annotation\r\n```\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface BotExceptionCheck {\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n@Aspect\r\n@Component\r\npublic class BotExceptionCheckAspect {\r\n    SendMessageProducer sendMessageProducer;\r\n    UserService userService;\r\n\r\n    public BotExceptionCheckAspect(SendMessageProducer sendMessageProducer, UserService userService) {\r\n        this.sendMessageProducer = sendMessageProducer;\r\n        this.userService = userService;\r\n    }\r\n\r\n    @Around(&quot;@annotation(BotExceptionCheck)&quot;)\r\n    public Object handleException(ProceedingJoinPoint joinPoint) throws Throwable {\r\n        Object result = null;\r\n        try {\r\n            result = joinPoint.proceed();\r\n        } catch (BotAuthorizeException ex) {\r\n            var user = userService.findById(ex.getChatId());\r\n            sendMessageProducer.sendMessage(SendMessage.builder()\r\n                    .chatId(user.getChatId())\r\n                    .text(ex.getMessage())\r\n                    .build());\r\n        }\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\nmethod where throw exception\r\n\r\n```\r\n  @BotExceptionCheck\r\n    public void checkSubscriptionForChannel(ChatMember chatMember) {\r\n        if (chatMember.getStatus().equals(&quot;kicked&quot;) || chatMember.getStatus().equals(&quot;left&quot;)) {\r\n            throw new BotAuthorizeException(String.valueOf(chatMember.getUser().getId()), &quot;&quot;&quot;\r\n                    You don&#39;t subscribe to the channel\r\n                    &quot;&quot;&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nalso i try write exception handler, but it don&#39;t see exception too\r\n\r\n```\r\n@ControllerAdvice\r\n@Slf4j\r\npublic class GlobalExceptionHandler {\r\n    SendMessageProducer sendMessageProducer;\r\n    UserService userService;\r\n\r\n    public GlobalExceptionHandler(SendMessageProducer sendMessageProducer, UserService userService) {\r\n        this.sendMessageProducer = sendMessageProducer;\r\n        this.userService = userService;\r\n    }\r\n\r\n    @ExceptionHandler(BotAuthorizeException.class)\r\n    public void handleBotAuthorizeException(BotAuthorizeException ex){\r\n        var user = userService.findById(ex.getChatId());\r\n        sendMessageProducer.sendMessage(SendMessage.builder()\r\n                .chatId(user.getChatId())\r\n                .text(ex.getMessage())\r\n                .build());\r\n    }\r\n}\r\n```\r\n\r\nEXCEPTION that i get in all of this situation : \r\n2023-08-12 10:15:54.070 ERROR 11228 --- [legram Executor] o.t.t.u.DefaultBotSession                : You don&#39;t subscribe to the channel.\r\n\r\n\r\ncom.moviescreenbot.exceptions.authorize.BotAuthorizeException: You don&#39;t subscribe to the channel.\r\n\r\n\tat com.moviescreenbot.services.user.UserService.checkSubscriptionForChannel(UserService.java:53) ~[main/:na]\r\n\tat com.moviescreenbot.services.user.UserService.authorizeUser(UserService.java:24) ~[main/:na]\r\n\tat com.moviescreenbot.services.user.UserService$$FastClassBySpringCGLIB$$64cf6081.invoke(&lt;generated&gt;) ~[main/:na]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.20.jar:5.3.20]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.20.jar:5.3.20]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.20.jar:5.3.20]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.20.jar:5.3.20]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.20.jar:5.3.20]\r\n\tat com.moviescreenbot.services.user.UserService$$EnhancerBySpringCGLIB$$6ca7934e.authorizeUser(&lt;generated&gt;) ~[main/:na]\r\n\r\n\r\n\r\n\r\nhelp to resolve this problem","title":"aspects, exceptionhandlers don&#39;t catch exception java spring","body":"<p>annotation</p>\n<pre><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface BotExceptionCheck {\n\n}\n</code></pre>\n<pre><code>@Aspect\n@Component\npublic class BotExceptionCheckAspect {\n    SendMessageProducer sendMessageProducer;\n    UserService userService;\n\n    public BotExceptionCheckAspect(SendMessageProducer sendMessageProducer, UserService userService) {\n        this.sendMessageProducer = sendMessageProducer;\n        this.userService = userService;\n    }\n\n    @Around(&quot;@annotation(BotExceptionCheck)&quot;)\n    public Object handleException(ProceedingJoinPoint joinPoint) throws Throwable {\n        Object result = null;\n        try {\n            result = joinPoint.proceed();\n        } catch (BotAuthorizeException ex) {\n            var user = userService.findById(ex.getChatId());\n            sendMessageProducer.sendMessage(SendMessage.builder()\n                    .chatId(user.getChatId())\n                    .text(ex.getMessage())\n                    .build());\n        }\n        return result;\n    }\n}\n</code></pre>\n<p>method where throw exception</p>\n<pre><code>  @BotExceptionCheck\n    public void checkSubscriptionForChannel(ChatMember chatMember) {\n        if (chatMember.getStatus().equals(&quot;kicked&quot;) || chatMember.getStatus().equals(&quot;left&quot;)) {\n            throw new BotAuthorizeException(String.valueOf(chatMember.getUser().getId()), &quot;&quot;&quot;\n                    You don't subscribe to the channel\n                    &quot;&quot;&quot;);\n        }\n    }\n</code></pre>\n<p>also i try write exception handler, but it don't see exception too</p>\n<pre><code>@ControllerAdvice\n@Slf4j\npublic class GlobalExceptionHandler {\n    SendMessageProducer sendMessageProducer;\n    UserService userService;\n\n    public GlobalExceptionHandler(SendMessageProducer sendMessageProducer, UserService userService) {\n        this.sendMessageProducer = sendMessageProducer;\n        this.userService = userService;\n    }\n\n    @ExceptionHandler(BotAuthorizeException.class)\n    public void handleBotAuthorizeException(BotAuthorizeException ex){\n        var user = userService.findById(ex.getChatId());\n        sendMessageProducer.sendMessage(SendMessage.builder()\n                .chatId(user.getChatId())\n                .text(ex.getMessage())\n                .build());\n    }\n}\n</code></pre>\n<p>EXCEPTION that i get in all of this situation :\n2023-08-12 10:15:54.070 ERROR 11228 --- [legram Executor] o.t.t.u.DefaultBotSession                : You don't subscribe to the channel.</p>\n<p>com.moviescreenbot.exceptions.authorize.BotAuthorizeException: You don't subscribe to the channel.</p>\n<pre><code>at com.moviescreenbot.services.user.UserService.checkSubscriptionForChannel(UserService.java:53) ~[main/:na]\nat com.moviescreenbot.services.user.UserService.authorizeUser(UserService.java:24) ~[main/:na]\nat com.moviescreenbot.services.user.UserService$$FastClassBySpringCGLIB$$64cf6081.invoke(&lt;generated&gt;) ~[main/:na]\nat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]\nat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793) ~[spring-aop-5.3.20.jar:5.3.20]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.20.jar:5.3.20]\nat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]\nat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.20.jar:5.3.20]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.20.jar:5.3.20]\nat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.20.jar:5.3.20]\nat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.20.jar:5.3.20]\nat com.moviescreenbot.services.user.UserService$$EnhancerBySpringCGLIB$$6ca7934e.authorizeUser(&lt;generated&gt;) ~[main/:na]\n</code></pre>\n<p>help to resolve this problem</p>\n"},{"tags":["java","spring","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":14766609,"reputation":4337,"user_id":10664446,"display_name":"stacker"},"score":0,"creation_date":1545824164,"post_id":53931323,"comment_id":94703502,"body_markdown":"can you add a snippet of index template?","body":"can you add a snippet of index template?"},{"owner":{"account_id":6544976,"reputation":1,"user_id":5061254,"display_name":"Simeon"},"score":0,"creation_date":1545824689,"post_id":53931323,"comment_id":94703674,"body_markdown":"&lt;html lang=&quot;en&quot; xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;th:block th:fragment=&quot;navbar&quot;&gt;\n    &lt;th:block\n            th:if=&quot;${#authorization.expression(&#39;isAuthenticated()&#39;) and #authorization.expression(&#39;hasAuthority(&#39;&#39;USER&#39;&#39;)&#39;)}&quot;&gt;\n        &lt;th:block th:replace=&quot;fragments/navbar-user&quot;&gt;&lt;/th:block&gt;\n    &lt;/th:block&gt;\n    &lt;th:block\n            th:if=&quot;${#authorization.expression(&#39;isAuthenticated()&#39;) and #authorization.expression(&#39;hasAuthority(&#39;&#39;ADMIN&#39;&#39;)&#39;)}&quot;&gt;\n        &lt;th:block th:replace=&quot;fragments/navbar-admin&quot;&gt;&lt;/th:block&gt;\n    &lt;/th:block&gt;","body":"&lt;html lang=&quot;en&quot; xmlns=&quot;<a href=\"http://www.w3.org/1999/xhtml\" rel=\"nofollow noreferrer\">w3.org/1999/xhtml</a>&quot;       xmlns:th=&quot;<a href=\"http://www.thymeleaf.org\" rel=\"nofollow noreferrer\">thymeleaf.org</a>&quot;&gt; &lt;th:block th:fragment=&quot;navbar&quot;&gt;     &lt;th:block             th:if=&quot;${#authorization.expression(&#39;isAuthenticated()&#39;) and #authorization.expression(&#39;hasAuthority(&#39;&#39;USER&#39;&#39;)&#39;)}&quot;&gt;         &lt;th:block th:replace=&quot;fragments/navbar-user&quot;&gt;&lt;/th:block&gt;     &lt;/th:block&gt;     &lt;th:block             th:if=&quot;${#authorization.expression(&#39;isAuthenticated()&#39;) and #authorization.expression(&#39;hasAuthority(&#39;&#39;ADMIN&#39;&#39;)&#39;)}&quot;&gt;         &lt;th:block th:replace=&quot;fragments/navbar-admin&quot;&gt;&lt;/th:block&gt;     &lt;/th:block&gt;"},{"owner":{"account_id":14766609,"reputation":4337,"user_id":10664446,"display_name":"stacker"},"score":0,"creation_date":1545824900,"post_id":53931323,"comment_id":94703744,"body_markdown":"can you post it inside the post? and please try to format your text before posting","body":"can you post it inside the post? and please try to format your text before posting"}],"answers":[{"tags":[],"owner":{"account_id":8794729,"reputation":15297,"user_id":6572971,"display_name":"Alien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545826275,"creation_date":1545825426,"answer_id":53931793,"question_id":53931323,"body_markdown":"Ensure that you **thymeleaf-extras-springsecurity4** in pom.xml\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n      &lt;artifactId&gt;thymeleaf-extras-springsecurity4&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand **xmlns:sec in the html template** in thymeleaf page.\r\n\r\n    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n      xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity4&quot;&gt;\r\n\r\n\r\n","title":"Spring Boot Exception evaluating SpringEL expression","body":"<p>Ensure that you <strong>thymeleaf-extras-springsecurity4</strong> in pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n  &lt;artifactId&gt;thymeleaf-extras-springsecurity4&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and <strong>xmlns:sec in the html template</strong> in thymeleaf page.</p>\n\n<pre><code>&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xmlns:th=\"http://www.thymeleaf.org\"\n  xmlns:sec=\"http://www.thymeleaf.org/thymeleaf-extras-springsecurity4\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4573108,"reputation":1479,"user_id":3712298,"display_name":"sanjeevjha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545827592,"creation_date":1545827592,"answer_id":53932181,"question_id":53931323,"body_markdown":"If you pass authorization in model like as below-\r\n\r\n&gt; set parameters on the controller\r\n\r\n    request.setAttribute(&quot;authorization&quot;, authorizationObject);\r\n\r\n&gt; use the same on the fron-end as below\r\n\r\n    &lt;th:block th:if=&quot;${authorization.isAuthenticated() &amp;&amp; authorization.hasAuthority(&#39;USER&#39;)}&quot;&gt;\r\n            &lt;th:block th:replace=&quot;fragments/navbar-user&quot;&gt;&lt;/th:block&gt;\r\n    &lt;/th:block&gt;\r\n\r\nHope it will be helpful, Thanks","title":"Spring Boot Exception evaluating SpringEL expression","body":"<p>If you pass authorization in model like as below-</p>\n\n<blockquote>\n  <p>set parameters on the controller</p>\n</blockquote>\n\n<pre><code>request.setAttribute(\"authorization\", authorizationObject);\n</code></pre>\n\n<blockquote>\n  <p>use the same on the fron-end as below</p>\n</blockquote>\n\n<pre><code>&lt;th:block th:if=\"${authorization.isAuthenticated() &amp;&amp; authorization.hasAuthority('USER')}\"&gt;\n        &lt;th:block th:replace=\"fragments/navbar-user\"&gt;&lt;/th:block&gt;\n&lt;/th:block&gt;\n</code></pre>\n\n<p>Hope it will be helpful, Thanks</p>\n"},{"tags":[],"owner":{"account_id":6544976,"reputation":1,"user_id":5061254,"display_name":"Simeon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545833038,"creation_date":1545833038,"answer_id":53933139,"question_id":53931323,"body_markdown":"I added interceptor which on every request sends the Role\r\n\r\n    modelAndView.addObject(&quot;authorization&quot;, SecurityContextHolder.getContext().getAuthentication().getAuthorities().stream().findFirst().get().toString());\r\n\r\nand in the HTML I check with ` &lt;th:block th:if=&quot;${authorization==&#39;USER&#39;}&quot;&gt;\r\n        &lt;th:block th:replace=&quot;fragments/navbar-user&quot;&gt;&lt;/th:block&gt;\r\n    &lt;/th:block&gt;`\r\n\r\nFor now everything works !","title":"Spring Boot Exception evaluating SpringEL expression","body":"<p>I added interceptor which on every request sends the Role</p>\n\n<pre><code>modelAndView.addObject(\"authorization\", SecurityContextHolder.getContext().getAuthentication().getAuthorities().stream().findFirst().get().toString());\n</code></pre>\n\n<p>and in the HTML I check with <code>&lt;th:block th:if=\"${authorization=='USER'}\"&gt;\n        &lt;th:block th:replace=\"fragments/navbar-user\"&gt;&lt;/th:block&gt;\n    &lt;/th:block&gt;</code></p>\n\n<p>For now everything works !</p>\n"}],"owner":{"account_id":6544976,"reputation":1,"user_id":5061254,"display_name":"Simeon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9940,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691823895,"creation_date":1545822988,"question_id":53931323,"body_markdown":"&gt; ERROR 4904 --- [nio-8080-exec-1] org.thymeleaf.TemplateEngine         \r\n&gt; : [THYMELEAF][http-nio-8080-exec-1] Exception processing template\r\n&gt; &quot;index&quot;: An error happened during template parsing (template: &quot;class\r\n&gt; path resource [templates/index.html]&quot;)\r\n&gt; \r\n&gt; org.thymeleaf.exceptions.TemplateInputException: An error happened\r\n&gt; during template parsing (template: &quot;class path resource\r\n&gt; [templates/index.html]&quot;) \tat\r\n&gt; org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)\r\n&gt; ~[thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE] \tat\r\n&gt; org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)\r\n&gt; ~[thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE] \tat\r\n&gt; org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)\r\n&gt; ~[thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE] \tat\r\n&gt; org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)\r\n&gt; [thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE] \tat\r\n&gt; org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)\r\n&gt; [thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE] \tat\r\n&gt; org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:362)\r\n&gt; [thymeleaf-spring5-3.0.11.RELEASE.jar:3.0.11.RELEASE] \tat\r\n&gt; org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:189)\r\n&gt; [thymeleaf-spring5-3.0.11.RELEASE.jar:3.0.11.RELEASE] \tat\r\n&gt; org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1370)\r\n&gt; [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE] \tat\r\n&gt; org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1116)\r\n&gt; [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE] \tat\r\n&gt; org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1055)\r\n&gt; [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE] \tat\r\n&gt; org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\r\n&gt; [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE] \tat\r\n&gt; org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)\r\n&gt; [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE] \tat\r\n&gt; org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897)\r\n&gt; [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE]\r\n\r\n____________________________________________________\r\n\r\n&gt; Caused by: org.attoparser.ParseException: Exception evaluating\r\n&gt; SpringEL expression: &quot;#authorization.expression(&#39;isAuthenticated()&#39;)\r\n&gt; and #authorization.expression(&#39;hasAuthority(&#39;&#39;USER&#39;&#39;)&#39;)&quot; (template:\r\n&gt; &quot;fragments/navbar&quot; - line 8, col 15)\r\n\r\n____________________________________________________\r\nPom.xml\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity4&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n_________\r\nProblem comes from here when I try to check the authority \r\n\r\n    &lt;html lang=&quot;en&quot; xmlns=&quot;w3.org/1999/xhtml&quot; xmlns:th=&quot;thymeleaf.org&quot;&gt; \r\n    &lt;th:block th:fragment=&quot;navbar&quot;&gt;\r\n        &lt;th:block if:sec:authorize=&quot;isAnonymous()&quot;&gt;\r\n            &lt;th:block th:replace=&quot;fragments/navbar-guest&quot;&gt;&lt;/th:block&gt;\r\n        &lt;/th:block&gt;\r\n        &lt;th:block th:if=&quot;${#authorization.expression(&#39;isAuthenticated()&#39;) and #authorization.expression(&#39;hasAuthority(&#39;&#39;USER&#39;&#39;)&#39;)}&quot;&gt;\r\n            &lt;th:block th:replace=&quot;fragments/navbar-user&quot;&gt;&lt;/th:block&gt;\r\n        &lt;/th:block&gt;\r\n        &lt;th:block th:if=&quot;${#authorization.expression(&#39;isAuthenticated()&#39;) and #authorization.expression(&#39;hasAuthority(&#39;&#39;ADMIN&#39;&#39;)&#39;)}&quot;&gt;\r\n            &lt;th:block th:replace=&quot;fragments/navbar-admin&quot;&gt;&lt;/th:block&gt;\r\n        &lt;/th:block&gt;\r\n        &lt;th:block th:if=&quot;${#authorization.expression(&#39;isAuthenticated()&#39;) and #authorization.expression(&#39;hasAuthority(&#39;&#39;MODERATOR&#39;&#39;)&#39;)}&quot;&gt;\r\n            &lt;th:block th:replace=&quot;fragments/navbar-user&quot;&gt;&lt;/th:block&gt;\r\n        &lt;/th:block&gt;\r\n    &lt;/th:block&gt;\r\n\r\n","title":"Spring Boot Exception evaluating SpringEL expression","body":"<blockquote>\n  <p>ERROR 4904 --- [nio-8080-exec-1] org.thymeleaf.TemplateEngine<br>\n  : [THYMELEAF][http-nio-8080-exec-1] Exception processing template\n  \"index\": An error happened during template parsing (template: \"class\n  path resource [templates/index.html]\")</p>\n  \n  <p>org.thymeleaf.exceptions.TemplateInputException: An error happened\n  during template parsing (template: \"class path resource\n  [templates/index.html]\")  at\n  org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)\n  ~[thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE]    at\n  org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)\n  ~[thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE]    at\n  org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)\n  ~[thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE]    at\n  org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)\n  [thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE]     at\n  org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)\n  [thymeleaf-3.0.11.RELEASE.jar:3.0.11.RELEASE]     at\n  org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:362)\n  [thymeleaf-spring5-3.0.11.RELEASE.jar:3.0.11.RELEASE]     at\n  org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:189)\n  [thymeleaf-spring5-3.0.11.RELEASE.jar:3.0.11.RELEASE]     at\n  org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1370)\n  [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE]   at\n  org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1116)\n  [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE]   at\n  org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1055)\n  [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE]   at\n  org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\n  [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE]   at\n  org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)\n  [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE]   at\n  org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:897)\n  [spring-webmvc-5.1.3.RELEASE.jar:5.1.3.RELEASE]</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Caused by: org.attoparser.ParseException: Exception evaluating\n  SpringEL expression: \"#authorization.expression('isAuthenticated()')\n  and #authorization.expression('hasAuthority(''USER'')')\" (template:\n  \"fragments/navbar\" - line 8, col 15)</p>\n</blockquote>\n\n<hr>\n\n<p>Pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n        &lt;artifactId&gt;thymeleaf-extras-springsecurity4&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<hr>\n\n<p>Problem comes from here when I try to check the authority </p>\n\n<pre><code>&lt;html lang=\"en\" xmlns=\"w3.org/1999/xhtml\" xmlns:th=\"thymeleaf.org\"&gt; \n&lt;th:block th:fragment=\"navbar\"&gt;\n    &lt;th:block if:sec:authorize=\"isAnonymous()\"&gt;\n        &lt;th:block th:replace=\"fragments/navbar-guest\"&gt;&lt;/th:block&gt;\n    &lt;/th:block&gt;\n    &lt;th:block th:if=\"${#authorization.expression('isAuthenticated()') and #authorization.expression('hasAuthority(''USER'')')}\"&gt;\n        &lt;th:block th:replace=\"fragments/navbar-user\"&gt;&lt;/th:block&gt;\n    &lt;/th:block&gt;\n    &lt;th:block th:if=\"${#authorization.expression('isAuthenticated()') and #authorization.expression('hasAuthority(''ADMIN'')')}\"&gt;\n        &lt;th:block th:replace=\"fragments/navbar-admin\"&gt;&lt;/th:block&gt;\n    &lt;/th:block&gt;\n    &lt;th:block th:if=\"${#authorization.expression('isAuthenticated()') and #authorization.expression('hasAuthority(''MODERATOR'')')}\"&gt;\n        &lt;th:block th:replace=\"fragments/navbar-user\"&gt;&lt;/th:block&gt;\n    &lt;/th:block&gt;\n&lt;/th:block&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","okhttp"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1691825033,"post_id":76888084,"comment_id":135546397,"body_markdown":"Maybe this https://stackoverflow.com/questions/40669128/okhttp-unwanted-escaping-of-form-data","body":"Maybe this <a href=\"https://stackoverflow.com/questions/40669128/okhttp-unwanted-escaping-of-form-data\" title=\"okhttp unwanted escaping of form data\">stackoverflow.com/questions/40669128/&hellip;</a>"}],"owner":{"account_id":28189145,"reputation":1,"user_id":21544824,"display_name":"Kalaiselvan K"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691822737,"creation_date":1691822594,"question_id":76888084,"body_markdown":"I am using okhttp client to make requests to twitter. When the request body(status param) contains % it getting failed.\r\n\r\nbelow is the code I am using to make a request\r\n\r\n\r\n\r\n```\r\nOkHttpClient client = new OkHttpClient().newBuilder()\r\n\t\t\t\t  .build();\r\n\t\t\t\tMediaType mediaType = MediaType.parse(&quot;application/x-www-form-urlencoded&quot;);\r\n\t\t\t\tRequestBody body = RequestBody.create(mediaType, &quot;status=test % test&amp;media_ids=1690251004548407296&quot;);\r\n\t\t\t\tRequest request = new Request.Builder()\r\n\t\t\t\t  .url(&quot;https://api.twitter.com/1.1/statuses/update.json&quot;)\r\n\t\t\t\t  .method(&quot;POST&quot;, body)\r\n\t\t\t\t  .build();\r\n\t\t\t\tResponse response = client.newCall(request).execute();\r\n```\r\n\r\nWhen i remove the % from the status param it is getting successfull otherwise, I am getting 400 error.\r\n\r\nBut the same has been working with POSTMAN. I have copied the code from postman.\r\nAlso I tried unirest client, it is working without issues in unirest.","title":"Okhttp request fails when the request body contains %","body":"<p>I am using okhttp client to make requests to twitter. When the request body(status param) contains % it getting failed.</p>\n<p>below is the code I am using to make a request</p>\n<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n                  .build();\n                MediaType mediaType = MediaType.parse(&quot;application/x-www-form-urlencoded&quot;);\n                RequestBody body = RequestBody.create(mediaType, &quot;status=test % test&amp;media_ids=1690251004548407296&quot;);\n                Request request = new Request.Builder()\n                  .url(&quot;https://api.twitter.com/1.1/statuses/update.json&quot;)\n                  .method(&quot;POST&quot;, body)\n                  .build();\n                Response response = client.newCall(request).execute();\n</code></pre>\n<p>When i remove the % from the status param it is getting successfull otherwise, I am getting 400 error.</p>\n<p>But the same has been working with POSTMAN. I have copied the code from postman.\nAlso I tried unirest client, it is working without issues in unirest.</p>\n"},{"tags":["java","android","listadapter"],"answers":[{"tags":[],"owner":{"account_id":13368336,"reputation":725,"user_id":9647713,"display_name":"Siddharth Shakya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691813442,"creation_date":1691813442,"answer_id":76887693,"question_id":76886508,"body_markdown":"Use recyclerview instead of ListView","title":"Button throws (android.view.View$OnClickListener)&#39; on a null object reference","body":"<p>Use recyclerview instead of ListView</p>\n"},{"tags":[],"owner":{"account_id":5826843,"reputation":344,"user_id":4592885,"display_name":"Mohammad Fallah"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691822316,"creation_date":1691822316,"answer_id":76888077,"question_id":76886508,"body_markdown":"You should call `findViewById` from the ViewGroup which your particular view is belong to.\r\n\r\nJust replace these lines:\r\n```java\r\nfinal  EditText updateNote = findViewById(R.id.updateNoteText);\r\nfinal EditText updateNoteContent = findViewById(R.id.updateContentText);\r\n```\r\nto\r\n```Java\r\nfinal  EditText updateNote = updateDialogView.findViewById(R.id.updateNoteText);\r\nfinal EditText updateNoteContent = updateDialogView.findViewById(R.id.updateContentText);\r\n```\r\n\r\n","title":"Button throws (android.view.View$OnClickListener)&#39; on a null object reference","body":"<p>You should call <code>findViewById</code> from the ViewGroup which your particular view is belong to.</p>\n<p>Just replace these lines:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final  EditText updateNote = findViewById(R.id.updateNoteText);\nfinal EditText updateNoteContent = findViewById(R.id.updateContentText);\n</code></pre>\n<p>to</p>\n<pre><code>final  EditText updateNote = updateDialogView.findViewById(R.id.updateNoteText);\nfinal EditText updateNoteContent = updateDialogView.findViewById(R.id.updateContentText);\n</code></pre>\n"}],"owner":{"account_id":23814062,"reputation":45,"user_id":17822547,"display_name":"Rober"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76888077,"answer_count":2,"score":0,"last_activity_date":1691822316,"creation_date":1691785865,"question_id":76886508,"body_markdown":"I need to update date in a ListAdapter , for this i display a `dialog` composed by `2 EditTexts` and `1 Button` , the problem here is that when i click the &quot;update&quot; button in the dialog it throws\r\n\r\n    (android.view.View$OnClickListener)&#39; on a null object reference\r\n\r\nbtw, im using firebase realtime database to save the data.\r\n\r\nStacktrace: \r\n\r\n \r\n\r\n&gt; java.lang.NullPointerException: Attempt to invoke virtual method &#39;void\r\n&gt; android.widget.Button.setOnClickListener(android.view.View$OnClickListener)&#39;\r\n&gt; on a null object reference\r\n&gt;                                                                                                     \tat\r\n&gt; com.example.notasderober.ReadNotes.showUpdateDialog(ReadNotes.java:106)\r\n&gt;                                                                                                     \tat com.example.notasderober.ReadNotes.access$000(ReadNotes.java:33)\r\n&gt;                                                                                                     \tat\r\n&gt; com.example.notasderober.ReadNotes$2.onItemClick(ReadNotes.java:77)\r\n&gt;                                                                                                     \tat android.widget.AdapterView.performItemClick(AdapterView.java:330)\r\n&gt;                                                                                                     \tat android.widget.AbsListView.performItemClick(AbsListView.java:1187)\r\n&gt;                                                                                                     \tat android.widget.AbsListView$PerformClick.run(AbsListView.java:3179)\r\n&gt;                                                                                                     \tat android.widget.AbsListView$3.run(AbsListView.java:4097)\r\n&gt;                                                                                                     \tat android.os.Handler.handleCallback(Handler.java:938)\r\n&gt;                                                                                                     \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n&gt;                                                                                                     \tat android.os.Looper.loop(Looper.java:223)\r\n&gt;                                                                                                     \tat android.app.ActivityThread.main(ActivityThread.java:7656)\r\n&gt;                                                                                                     \tat java.lang.reflect.Method.invoke(Native Method)\r\n&gt;                                                                                                     \tat\r\n&gt; com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n&gt;                                                                                                     \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n\r\n\r\nCODE :\r\n\r\n    package com.example.notasderober;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AlertDialog;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.recyclerview.widget.LinearLayoutManager;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n    \r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.widget.AdapterView;\r\n    import android.widget.ArrayAdapter;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.ListView;\r\n    import android.widget.Toast;\r\n    \r\n    import com.google.firebase.database.DataSnapshot;\r\n    import com.google.firebase.database.DatabaseError;\r\n    import com.google.firebase.database.DatabaseReference;\r\n    import com.google.firebase.database.FirebaseDatabase;\r\n    import com.google.firebase.database.ValueEventListener;\r\n    import com.google.firebase.firestore.auth.User;\r\n    \r\n    import org.checkerframework.checker.units.qual.A;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class ReadNotes extends AppCompatActivity {\r\n    \r\n    \r\n       List&lt;Users&gt; notesList;\r\n    \r\n        ListView listView;\r\n        Button updateButton;\r\n         View updateDialogView;\r\n          LayoutInflater inflater;\r\n    \r\n        DatabaseReference studentDbRef;\r\n    \r\n    \r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_read_notes);\r\n            listView = findViewById(R.id.listview);\r\n            notesList = new ArrayList&lt;&gt;();\r\n            inflater = getLayoutInflater();    \r\n             updateDialogView = inflater.inflate(R.layout.update_dialog,null);\r\n           updateButton  = updateDialogView.findViewById(R.id.updateNoteButton);\r\n    \r\n            studentDbRef =FirebaseDatabase.getInstance().getReference(&quot;Notas&quot;);\r\n    \r\n            studentDbRef.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    notesList.clear();\r\n                    for (DataSnapshot studentDatasnap : snapshot.getChildren()){\r\n                        Users notes = studentDatasnap.getValue(Users.class);\r\n                        notesList.add(notes);\r\n                    }\r\n                    ListAdapter adapter = new ListAdapter(ReadNotes.this,notesList);\r\n                    listView.setAdapter(adapter);\r\n                }\r\n    \r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n    \r\n                }\r\n            });\r\n    \r\n         listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n             @Override\r\n             public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\r\n                 Users students = notesList.get(i);\r\n                 showUpdateDialog(students.getId(), students.getName());\r\n    \r\n             }\r\n         });\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n        //SHOW UPDATE DIALOG\r\n    \r\n        private void showUpdateDialog (final String id, String name) {\r\n    \r\n            Log.d(&quot;updateDialog&quot;,&quot;Dialog update&quot;);\r\n            final AlertDialog.Builder updateDialog = new AlertDialog.Builder(this);\r\n    \r\n    \r\n    \r\n            updateDialog.setView(updateDialogView);\r\n    \r\n           final  EditText updateNote = findViewById(R.id.updateNoteText);\r\n           final EditText updateNoteContent = findViewById(R.id.updateContentText);\r\n    \r\n    \r\n    \r\n            updateDialog.setTitle(&quot;Actualizando : &quot; + name);\r\n            final AlertDialog alertDialog = updateDialog.create();\r\n            alertDialog.show();\r\n    \r\n           updateButton.setOnClickListener(new View.OnClickListener() { // maybe here is the problem\r\n                @Override\r\n                public void onClick(View view) {\r\n    \r\n                    String noteTitle = updateNote.getText().toString();\r\n                    String noteContent = updateNoteContent.getText().toString();\r\n    \r\n                    updateData(id,noteTitle,noteContent);\r\n    \r\n                    Toast.makeText(ReadNotes.this,&quot;Nota actualizada&quot;,Toast.LENGTH_SHORT).show();\r\n    \r\n                }\r\n            });\r\n        }\r\n    \r\n    \r\n    \r\n        //UPDATE DATA IN DATABASE\r\n        private void updateData (String id, String name, String note) {\r\n            DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;Notas&quot;).child(id);\r\n            Users noteEx = new Users(id,name,note);\r\n            dbRef.setValue(noteEx);\r\n        }\r\n\r\nXML file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.ReadNotes&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/textView5&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Saved notes&quot;\r\n            android:textSize=&quot;34sp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.497&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.023&quot; /&gt;\r\n    \r\n        &lt;ListView\r\n            android:id=&quot;@+id/listview&quot;\r\n            android:layout_width=&quot;409dp&quot;\r\n            android:layout_height=&quot;668dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.968&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\nXML dialog file :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;EditText\r\n            android:id=&quot;@+id/updateNoteText&quot;\r\n            android:layout_width=&quot;289dp&quot;\r\n            android:layout_height=&quot;144dp&quot;\r\n            android:ems=&quot;10&quot;\r\n            android:hint=&quot;Nota&quot;\r\n            android:inputType=&quot;text&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.368&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.054&quot; /&gt;\r\n    \r\n        &lt;EditText\r\n            android:id=&quot;@+id/updateContentText&quot;\r\n            android:layout_width=&quot;286dp&quot;\r\n            android:layout_height=&quot;127dp&quot;\r\n            android:ems=&quot;10&quot;\r\n            android:hint=&quot;Contenido nota&quot;\r\n            android:inputType=&quot;text&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.381&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.462&quot; /&gt;\r\n    \r\n        &lt;Button\r\n            android:id=&quot;@+id/updateNoteButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Modificar&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.976&quot; /&gt;\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n\r\nI tried checking that the button is correctly declared in the xml file, and also as a constant field, but the error is still there.\r\n","title":"Button throws (android.view.View$OnClickListener)&#39; on a null object reference","body":"<p>I need to update date in a ListAdapter , for this i display a <code>dialog</code> composed by <code>2 EditTexts</code> and <code>1 Button</code> , the problem here is that when i click the &quot;update&quot; button in the dialog it throws</p>\n<pre><code>(android.view.View$OnClickListener)' on a null object reference\n</code></pre>\n<p>btw, im using firebase realtime database to save the data.</p>\n<p>Stacktrace:</p>\n<blockquote>\n<p>java.lang.NullPointerException: Attempt to invoke virtual method 'void\nandroid.widget.Button.setOnClickListener(android.view.View$OnClickListener)'\non a null object reference\nat\ncom.example.notasderober.ReadNotes.showUpdateDialog(ReadNotes.java:106)\nat com.example.notasderober.ReadNotes.access$000(ReadNotes.java:33)\nat\ncom.example.notasderober.ReadNotes$2.onItemClick(ReadNotes.java:77)\nat android.widget.AdapterView.performItemClick(AdapterView.java:330)\nat android.widget.AbsListView.performItemClick(AbsListView.java:1187)\nat android.widget.AbsListView$PerformClick.run(AbsListView.java:3179)\nat android.widget.AbsListView$3.run(AbsListView.java:4097)\nat android.os.Handler.handleCallback(Handler.java:938)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:223)\nat android.app.ActivityThread.main(ActivityThread.java:7656)\nat java.lang.reflect.Method.invoke(Native Method)\nat\ncom.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)</p>\n</blockquote>\n<p>CODE :</p>\n<pre><code>package com.example.notasderober;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AlertDialog;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ListView;\nimport android.widget.Toast;\n\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\nimport com.google.firebase.firestore.auth.User;\n\nimport org.checkerframework.checker.units.qual.A;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ReadNotes extends AppCompatActivity {\n\n\n   List&lt;Users&gt; notesList;\n\n    ListView listView;\n    Button updateButton;\n     View updateDialogView;\n      LayoutInflater inflater;\n\n    DatabaseReference studentDbRef;\n\n\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_read_notes);\n        listView = findViewById(R.id.listview);\n        notesList = new ArrayList&lt;&gt;();\n        inflater = getLayoutInflater();    \n         updateDialogView = inflater.inflate(R.layout.update_dialog,null);\n       updateButton  = updateDialogView.findViewById(R.id.updateNoteButton);\n\n        studentDbRef =FirebaseDatabase.getInstance().getReference(&quot;Notas&quot;);\n\n        studentDbRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                notesList.clear();\n                for (DataSnapshot studentDatasnap : snapshot.getChildren()){\n                    Users notes = studentDatasnap.getValue(Users.class);\n                    notesList.add(notes);\n                }\n                ListAdapter adapter = new ListAdapter(ReadNotes.this,notesList);\n                listView.setAdapter(adapter);\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n\n     listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n         @Override\n         public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\n             Users students = notesList.get(i);\n             showUpdateDialog(students.getId(), students.getName());\n\n         }\n     });\n    }\n\n\n\n\n\n    //SHOW UPDATE DIALOG\n\n    private void showUpdateDialog (final String id, String name) {\n\n        Log.d(&quot;updateDialog&quot;,&quot;Dialog update&quot;);\n        final AlertDialog.Builder updateDialog = new AlertDialog.Builder(this);\n\n\n\n        updateDialog.setView(updateDialogView);\n\n       final  EditText updateNote = findViewById(R.id.updateNoteText);\n       final EditText updateNoteContent = findViewById(R.id.updateContentText);\n\n\n\n        updateDialog.setTitle(&quot;Actualizando : &quot; + name);\n        final AlertDialog alertDialog = updateDialog.create();\n        alertDialog.show();\n\n       updateButton.setOnClickListener(new View.OnClickListener() { // maybe here is the problem\n            @Override\n            public void onClick(View view) {\n\n                String noteTitle = updateNote.getText().toString();\n                String noteContent = updateNoteContent.getText().toString();\n\n                updateData(id,noteTitle,noteContent);\n\n                Toast.makeText(ReadNotes.this,&quot;Nota actualizada&quot;,Toast.LENGTH_SHORT).show();\n\n            }\n        });\n    }\n\n\n\n    //UPDATE DATA IN DATABASE\n    private void updateData (String id, String name, String note) {\n        DatabaseReference dbRef = FirebaseDatabase.getInstance().getReference(&quot;Notas&quot;).child(id);\n        Users noteEx = new Users(id,name,note);\n        dbRef.setValue(noteEx);\n    }\n</code></pre>\n<p>XML file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.ReadNotes&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textView5&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Saved notes&quot;\n        android:textSize=&quot;34sp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.497&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.023&quot; /&gt;\n\n    &lt;ListView\n        android:id=&quot;@+id/listview&quot;\n        android:layout_width=&quot;409dp&quot;\n        android:layout_height=&quot;668dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.968&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>XML dialog file :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/updateNoteText&quot;\n        android:layout_width=&quot;289dp&quot;\n        android:layout_height=&quot;144dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Nota&quot;\n        android:inputType=&quot;text&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.368&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.054&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/updateContentText&quot;\n        android:layout_width=&quot;286dp&quot;\n        android:layout_height=&quot;127dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Contenido nota&quot;\n        android:inputType=&quot;text&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.381&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.462&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/updateNoteButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Modificar&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.976&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>I tried checking that the button is correctly declared in the xml file, and also as a constant field, but the error is still there.</p>\n"},{"tags":["java","arrays","compression","zstd"],"answers":[{"tags":[],"owner":{"account_id":23425812,"reputation":14,"user_id":17485310,"display_name":"sadegh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1691821993,"creation_date":1675530208,"answer_id":75346804,"question_id":75346702,"body_markdown":"You should determine the size of the buffer and also determine the index value of the buffer.\r\n```\r\npublic static byte[] compressZstd(byte[] input) throws IOException {\r\n        var compressor = new ZstdCompressor();\r\n        int maxCompressLength = compressor.maxCompressedLength(input.length);\r\n        byte[] compressedBuffer = new byte[maxCompressLength];\r\n        int compressedSize = compressor.compress(input, 0, input.length, compressedBuffer, 0, compressedBuffer.length);\r\n        return Arrays.copyOfRange(compressedBuffer, 0, compressedSize);\r\n    }\r\n\r\n    public static byte[] decompressZstd(byte[] compressed) throws IOException {\r\n        var decompressor = new ZstdDecompressor();\r\n        byte[] decompressedBuffer = new byte[MAX_VALUE_FOR_DECOMPRESSED_BUFFER];\r\n        int decompressedSize = decompressor\r\n                .decompress(compressed, 0, compressed.length, decompressedBuffer, 0, decompressedBuffer.length);\r\n        return Arrays.copyOfRange(decompressedBuffer, 0, decompressedSize);\r\n\r\n    }","title":"How to compress and decompress byte array with zstd algorithm in java","body":"<p>You should determine the size of the buffer and also determine the index value of the buffer.</p>\n<pre><code>public static byte[] compressZstd(byte[] input) throws IOException {\n        var compressor = new ZstdCompressor();\n        int maxCompressLength = compressor.maxCompressedLength(input.length);\n        byte[] compressedBuffer = new byte[maxCompressLength];\n        int compressedSize = compressor.compress(input, 0, input.length, compressedBuffer, 0, compressedBuffer.length);\n        return Arrays.copyOfRange(compressedBuffer, 0, compressedSize);\n    }\n\n    public static byte[] decompressZstd(byte[] compressed) throws IOException {\n        var decompressor = new ZstdDecompressor();\n        byte[] decompressedBuffer = new byte[MAX_VALUE_FOR_DECOMPRESSED_BUFFER];\n        int decompressedSize = decompressor\n                .decompress(compressed, 0, compressed.length, decompressedBuffer, 0, decompressedBuffer.length);\n        return Arrays.copyOfRange(decompressedBuffer, 0, decompressedSize);\n\n    }\n</code></pre>\n"}],"owner":{"account_id":27703444,"reputation":3,"user_id":21147603,"display_name":"pan ta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75346804,"answer_count":1,"score":0,"last_activity_date":1691821993,"creation_date":1675529354,"question_id":75346702,"body_markdown":"I&#39;m trying to use ZSTD algorithm to compress and decompress byte array.\r\nI read the ZSTD document that will give more details about implementation, but I can&#39;t still implement sufficient method to compress and decompress byte arrays.\r\nIf anyone can explain to me what I have to do  it would be appreciated. \r\n\r\n```\r\npublic static byte[] compressZstd(byte[] input) throws IOException {\r\n        var compressor = new ZstdCompressor();\r\n        byte[] compressedBuffer = new byte[1024];\r\n        compressor.compress(input, 0, input.length, compressedBuffer, 0, 1024);\r\n        return compressedBuffer;\r\n    }\r\n\r\npublic static byte[] decompressZstd(byte[] input) throws IOException {\r\n        var decompressor = new ZstdDecompressor();\r\n        byte[] decompressedBuffer = new byte[1024];\r\n        decompressor.decompress(input, 0, input.length, decompressedBuffer, 0, 1024);\r\n        return decompressedBuffer;\r\n\r\n    }","title":"How to compress and decompress byte array with zstd algorithm in java","body":"<p>I'm trying to use ZSTD algorithm to compress and decompress byte array.\nI read the ZSTD document that will give more details about implementation, but I can't still implement sufficient method to compress and decompress byte arrays.\nIf anyone can explain to me what I have to do  it would be appreciated.</p>\n<pre><code>public static byte[] compressZstd(byte[] input) throws IOException {\n        var compressor = new ZstdCompressor();\n        byte[] compressedBuffer = new byte[1024];\n        compressor.compress(input, 0, input.length, compressedBuffer, 0, 1024);\n        return compressedBuffer;\n    }\n\npublic static byte[] decompressZstd(byte[] input) throws IOException {\n        var decompressor = new ZstdDecompressor();\n        byte[] decompressedBuffer = new byte[1024];\n        decompressor.decompress(input, 0, input.length, decompressedBuffer, 0, 1024);\n        return decompressedBuffer;\n\n    }\n</code></pre>\n"},{"tags":["java","logging","slf4j","lazy-evaluation","slf4j-api"],"answers":[{"tags":[],"owner":{"account_id":14656252,"reputation":672,"user_id":10869284,"display_name":"sigur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586947426,"creation_date":1586946350,"answer_id":61226474,"question_id":61226307,"body_markdown":"If you like to add some condition lines, you could add an if statement to check if the log level is enabled and then log the message.\r\n\r\nLazy loading is preserved but you&#39;re going to get something like:\r\n\r\n    if(log.isDebugEnabled()) {\r\n     log.debug(....);\r\n    }","title":"Simplify lazy logging with SLF4J","body":"<p>If you like to add some condition lines, you could add an if statement to check if the log level is enabled and then log the message.</p>\n\n<p>Lazy loading is preserved but you're going to get something like:</p>\n\n<pre><code>if(log.isDebugEnabled()) {\n log.debug(....);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586947463,"creation_date":1586947463,"answer_id":61226808,"question_id":61226307,"body_markdown":"Better way to do that:\r\n\r\n```\r\nif (logger.isDebugEnabled()) {\r\n    logger.debug(&quot;Begin proceed aspect Method {} : initiator={} | recepient={} | tx_type={}&quot;,\r\n                 proceedingJoinPoint.getSignature().getName(),\r\n                 request.getAgentAlias(),\r\n                 request.getSubscriberMobile(),\r\n                 request.getTxType());\r\n}\r\n```\r\n\r\nOr:\r\n\r\n```\r\nif (logger.isDebugEnabled()) {\r\n    logger.debug(&quot;Begin proceed aspect Method &quot; + proceedingJoinPoint.getSignature().getName() +\r\n                 &quot; : initiator=&quot; + request.getAgentAlias() +\r\n                 &quot; | recepient=&quot; + request.getSubscriberMobile() +\r\n                 &quot; | tx_type=&quot; + request.getTxType());\r\n}\r\n```\r\n","title":"Simplify lazy logging with SLF4J","body":"<p>Better way to do that:</p>\n\n<pre><code>if (logger.isDebugEnabled()) {\n    logger.debug(\"Begin proceed aspect Method {} : initiator={} | recepient={} | tx_type={}\",\n                 proceedingJoinPoint.getSignature().getName(),\n                 request.getAgentAlias(),\n                 request.getSubscriberMobile(),\n                 request.getTxType());\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>if (logger.isDebugEnabled()) {\n    logger.debug(\"Begin proceed aspect Method \" + proceedingJoinPoint.getSignature().getName() +\n                 \" : initiator=\" + request.getAgentAlias() +\n                 \" | recepient=\" + request.getSubscriberMobile() +\n                 \" | tx_type=\" + request.getTxType());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4952989,"reputation":2910,"user_id":3986395,"display_name":"Simas Joneliunas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691727389,"creation_date":1691720943,"answer_id":76880360,"question_id":61226307,"body_markdown":"With SLF4J V2, this can also be done through the [fluent API][1], for example: `log.debug(&quot;some expensive evaluation: {}&quot;, () -&gt; doSomethingExpensive())`.\r\n\r\nIf you develop a Spring Boot app and depend on Spring for dependency management, this would mean Spring Boot 3.0 or higher as 2.x are bundled with SLF4J V1.x\r\n\r\n\r\n  [1]: https://www.slf4j.org/manual.html#fluent","title":"Simplify lazy logging with SLF4J","body":"<p>With SLF4J V2, this can also be done through the <a href=\"https://www.slf4j.org/manual.html#fluent\" rel=\"nofollow noreferrer\">fluent API</a>, for example: <code>log.debug(&quot;some expensive evaluation: {}&quot;, () -&gt; doSomethingExpensive())</code>.</p>\n<p>If you develop a Spring Boot app and depend on Spring for dependency management, this would mean Spring Boot 3.0 or higher as 2.x are bundled with SLF4J V1.x</p>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691820619,"creation_date":1691820619,"answer_id":76888003,"question_id":61226307,"body_markdown":"On the lines of [Simas Jonelius&#39;s answer](https://stackoverflow.com/questions/61226307/simplify-lazy-logging-with-slf4j/76880360#76880360) if we do not wish to change any dependencies, we could do lazy evaluation by defining suppliers for each parameter.\r\n```\r\nSupplier&lt;String&gt; initiator = ()-&gt; proceedingJoinPoint.getSignature().getName();\r\nSupplier&lt;String&gt; recepient = ()-&gt; request.getAgentAlias();\r\nSupplier&lt;String&gt; subscriberMobile = ()-&gt; request.getSubscriberMobile();\r\nSupplier&lt;String&gt; tx_type = ()-&gt; request.getTxType(); ;\r\n\r\nlogger.debug(&quot;Begin proceed aspect Method {} : initiator={} | recepient={} | tx_type={}&quot;,\r\n                initiator.get(),\r\n                recepient.get(),\r\n                subscriberMobile.get(),\r\n                tx_type.get());\r\n``` ","title":"Simplify lazy logging with SLF4J","body":"<p>On the lines of <a href=\"https://stackoverflow.com/questions/61226307/simplify-lazy-logging-with-slf4j/76880360#76880360\">Simas Jonelius's answer</a> if we do not wish to change any dependencies, we could do lazy evaluation by defining suppliers for each parameter.</p>\n<pre><code>Supplier&lt;String&gt; initiator = ()-&gt; proceedingJoinPoint.getSignature().getName();\nSupplier&lt;String&gt; recepient = ()-&gt; request.getAgentAlias();\nSupplier&lt;String&gt; subscriberMobile = ()-&gt; request.getSubscriberMobile();\nSupplier&lt;String&gt; tx_type = ()-&gt; request.getTxType(); ;\n\nlogger.debug(&quot;Begin proceed aspect Method {} : initiator={} | recepient={} | tx_type={}&quot;,\n                initiator.get(),\n                recepient.get(),\n                subscriberMobile.get(),\n                tx_type.get());\n</code></pre>\n"}],"owner":{"account_id":3689534,"reputation":43,"user_id":3072473,"display_name":"Didula Egodage"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2728,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1691820619,"creation_date":1586945738,"question_id":61226307,"body_markdown":"I am using SLF4J with Logback in a Spring Boot application. I was interested in using lazy logging and after some research, I came up with this solution.\r\n\r\nThis works as expected and does not invoke methods if the logging level is not matched.\r\n\r\n    logger.debug(&quot;Begin proceed aspect Method {} : initiator={} | recepient={} | tx_type={}&quot;,\r\n                    new Object() {@Override public String toString() { return proceedingJoinPoint.getSignature().getName(); }},\r\n                    new Object() {@Override public String toString() { return request.getAgentAlias(); }},\r\n                    new Object() {@Override public String toString() { return request.getSubscriberMobile(); }},\r\n                    new Object() {@Override public String toString() { return request.getTxType(); }});\r\nAs you can see, I am creating new Objects and overriding the toString method over and over. I don&#39;t want to do this. Is there a better way to do this? \r\n\r\nI am using the SLF4J 1.7.28 version which came bundled with Spring Boot starter.\r\nPlease note I prefer using the SLF4J over other logging frameworks.\r\n\r\nI tried **slf4j-api 2.0.0-alpha1** version along with **slf4j-simple** binding since it has logger.atDebug.log() implementation. But I couldn&#39;t make it work properly.\r\n\r\nThank you.","title":"Simplify lazy logging with SLF4J","body":"<p>I am using SLF4J with Logback in a Spring Boot application. I was interested in using lazy logging and after some research, I came up with this solution.</p>\n\n<p>This works as expected and does not invoke methods if the logging level is not matched.</p>\n\n<pre><code>logger.debug(\"Begin proceed aspect Method {} : initiator={} | recepient={} | tx_type={}\",\n                new Object() {@Override public String toString() { return proceedingJoinPoint.getSignature().getName(); }},\n                new Object() {@Override public String toString() { return request.getAgentAlias(); }},\n                new Object() {@Override public String toString() { return request.getSubscriberMobile(); }},\n                new Object() {@Override public String toString() { return request.getTxType(); }});\n</code></pre>\n\n<p>As you can see, I am creating new Objects and overriding the toString method over and over. I don't want to do this. Is there a better way to do this? </p>\n\n<p>I am using the SLF4J 1.7.28 version which came bundled with Spring Boot starter.\nPlease note I prefer using the SLF4J over other logging frameworks.</p>\n\n<p>I tried <strong>slf4j-api 2.0.0-alpha1</strong> version along with <strong>slf4j-simple</strong> binding since it has logger.atDebug.log() implementation. But I couldn't make it work properly.</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","kubernetes","java-17","corretto","oom"],"comments":[{"owner":{"account_id":26127214,"reputation":1801,"user_id":19818461,"display_name":"Veera Nagireddy"},"score":0,"creation_date":1691999407,"post_id":76887658,"comment_id":135561267,"body_markdown":"For nodes running Linux Kernel 5.0 or later (ex. Ubuntu 18.04.3) there is a known [issue](https://b.corp.google.com/issues/150815439#comment12) where **kubelet falsely reports pod cgroup OOM as a system OOM**. To verify whether it was a false positive, check the node&#39;s kernel log for &#39;**oom-kill**&#39; messages. If you see &#39;**memcg=/kubepods/**&#39; then it is a standard container OOM and can be disregarded as a system OOM. The [fix](https://github.com/google/cadvisor/pull/2817) is expected to be implemented in K8s 1.21.","body":"For nodes running Linux Kernel 5.0 or later (ex. Ubuntu 18.04.3) there is a known <a href=\"https://b.corp.google.com/issues/150815439#comment12\" rel=\"nofollow noreferrer\">issue</a> where <b>kubelet falsely reports pod cgroup OOM as a system OOM</b>. To verify whether it was a false positive, check the node&#39;s kernel log for &#39;<b>oom-kill</b>&#39; messages. If you see &#39;<b>memcg=/kubepods/</b>&#39; then it is a standard container OOM and can be disregarded as a system OOM. The <a href=\"https://github.com/google/cadvisor/pull/2817\" rel=\"nofollow noreferrer\">fix</a> is expected to be implemented in K8s 1.21."},{"owner":{"account_id":26127214,"reputation":1801,"user_id":19818461,"display_name":"Veera Nagireddy"},"score":0,"creation_date":1692339634,"post_id":76887658,"comment_id":135612180,"body_markdown":"Apart from above comment , please go throught this Article\n\n[Java Container crashes with “Error 137 (out of memory)”](https://blogs.sap.com/2022/10/10/java-container-crashes-with-error-137-out-of-memory/), which may help to resolve your issue.","body":"Apart from above comment , please go throught this Article  <a href=\"https://blogs.sap.com/2022/10/10/java-container-crashes-with-error-137-out-of-memory/\" rel=\"nofollow noreferrer\">Java Container crashes with “Error 137 (out of memory)”</a>, which may help to resolve your issue."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691820446,"creation_date":1691820127,"answer_id":76887969,"question_id":76887658,"body_markdown":"Xmx will control the maximum heap size - but that is not the only memory region a JVM manages (see e.g. [here][1] or [here][2]). If memory dumps do not reveal which memory region is growing that much, consider a bug in the JVM itself.\r\n\r\nTo verify, tweak more parameters or switch to another JVM implementation.\r\n\r\n\r\n  [1]: https://www.betsol.com/blog/java-memory-management-for-java-virtual-machine-jvm/\r\n  [2]: https://www.baeldung.com/java-jvm-memory-types","title":"K8S OOM kill JDK17 application with huge RSS size","body":"<p>Xmx will control the maximum heap size - but that is not the only memory region a JVM manages (see e.g. <a href=\"https://www.betsol.com/blog/java-memory-management-for-java-virtual-machine-jvm/\" rel=\"nofollow noreferrer\">here</a> or <a href=\"https://www.baeldung.com/java-jvm-memory-types\" rel=\"nofollow noreferrer\">here</a>). If memory dumps do not reveal which memory region is growing that much, consider a bug in the JVM itself.</p>\n<p>To verify, tweak more parameters or switch to another JVM implementation.</p>\n"}],"owner":{"account_id":3042569,"reputation":21,"user_id":2579189,"display_name":"Musaddique Hossain"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691820446,"creation_date":1691812205,"question_id":76887658,"body_markdown":"We are running a JDK17 spring-boot application on our production server with following configuration:\r\n- JDK Vendor : Amazon corretto (17.0.6)\r\n- K8S version : 1.17\r\n- Max pod memory : 5GB\r\n- Min pod memory : 5GB\r\n- Xmx : 2GB\r\n- Xms : 2GB\r\n\r\nThe problem we are running into is that in every 24hr, the application is getting OOM Killed by K8S (exit code 137). Few observations till now:\r\n- There is no leak in heap memory, it&#39;s confired from multiple heap dumps and gc logs as well.\r\n- No leak is observed in native memory as well with native memory dump. The max reserved seen in native memory dump is **3.5GB**. Dump has been taken in periodic intervals, no increase in any non-heap area is observed.\r\n- We have checked that RSS size of the application increases **gradually to 5GB** when the OOM kill happens.\r\n\r\nWe have tried to tweak around XMX/XMS and few other GC parameters (disabling adaptive IHOP and all), but nothing helped till now.\r\nPossibly there is some leak and same is visible in growing RSS, but same is not reflecting on native dump.","title":"K8S OOM kill JDK17 application with huge RSS size","body":"<p>We are running a JDK17 spring-boot application on our production server with following configuration:</p>\n<ul>\n<li>JDK Vendor : Amazon corretto (17.0.6)</li>\n<li>K8S version : 1.17</li>\n<li>Max pod memory : 5GB</li>\n<li>Min pod memory : 5GB</li>\n<li>Xmx : 2GB</li>\n<li>Xms : 2GB</li>\n</ul>\n<p>The problem we are running into is that in every 24hr, the application is getting OOM Killed by K8S (exit code 137). Few observations till now:</p>\n<ul>\n<li>There is no leak in heap memory, it's confired from multiple heap dumps and gc logs as well.</li>\n<li>No leak is observed in native memory as well with native memory dump. The max reserved seen in native memory dump is <strong>3.5GB</strong>. Dump has been taken in periodic intervals, no increase in any non-heap area is observed.</li>\n<li>We have checked that RSS size of the application increases <strong>gradually to 5GB</strong> when the OOM kill happens.</li>\n</ul>\n<p>We have tried to tweak around XMX/XMS and few other GC parameters (disabling adaptive IHOP and all), but nothing helped till now.\nPossibly there is some leak and same is visible in growing RSS, but same is not reflecting on native dump.</p>\n"},{"tags":["java","random"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":1,"creation_date":1691545819,"post_id":76864080,"comment_id":135505089,"body_markdown":"Also, the issue is when you sort the array on each iteration as you insert values, because each time you sort, the default value of the index is 0, your values are &quot;sorted&quot; to the last indices of the array, with leading 0s, and when your i increases, there are 0s you do not overwrite, but instead overwrite your own values","body":"Also, the issue is when you sort the array on each iteration as you insert values, because each time you sort, the default value of the index is 0, your values are &quot;sorted&quot; to the last indices of the array, with leading 0s, and when your i increases, there are 0s you do not overwrite, but instead overwrite your own values"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1691545972,"post_id":76864080,"comment_id":135505101,"body_markdown":"You&#39;ll need to learn to debug. One harder issue to find is that the `nextInt` method takes a maximum value that is *exclusive*, i.e. [0..68] if the value is 69. I don&#39;t think you need the shuffle, and you can do the sort after the for loop. Bigger problem is that you probably don&#39;t want to repeat any values; in this case you can simply check if you&#39;ve generated it before... And I&#39;d use a `SortedSet` (`TreeSet`) for that instead of an array.","body":"You&#39;ll need to learn to debug. One harder issue to find is that the <code>nextInt</code> method takes a maximum value that is <i>exclusive</i>, i.e. [0..68] if the value is 69. I don&#39;t think you need the shuffle, and you can do the sort after the for loop. Bigger problem is that you probably don&#39;t want to repeat any values; in this case you can simply check if you&#39;ve generated it before... And I&#39;d use a <code>SortedSet</code> (<code>TreeSet</code>) for that instead of an array."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":1,"creation_date":1691546282,"post_id":76864080,"comment_id":135505131,"body_markdown":"The recommended way to generate random numbers w/o repeats on SO is to generate a list of numbers from x to y, Collections.shuffle the list, then you can get/subList as many numbers as you need","body":"The recommended way to generate random numbers w/o repeats on SO is to generate a list of numbers from x to y, Collections.shuffle the list, then you can get/subList as many numbers as you need"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1691547363,"post_id":76864080,"comment_id":135505217,"body_markdown":"&quot;Collections.shuffle should take care of any repeating integers&quot; Collections.shuffle has nothing to do with repeating values. It shuffles whatever is in the list. It does not care about the values in any way.","body":"&quot;Collections.shuffle should take care of any repeating integers&quot; Collections.shuffle has nothing to do with repeating values. It shuffles whatever is in the list. It does not care about the values in any way."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691571310,"post_id":76864080,"comment_id":135508296,"body_markdown":"check: `new Random().ints(1, 71).distinct().limit(5).toArray()`","body":"check: <code>new Random().ints(1, 71).distinct().limit(5).toArray()</code>"}],"answers":[{"tags":[],"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691546286,"creation_date":1691546286,"answer_id":76864121,"question_id":76864080,"body_markdown":"Originally you have an array like\r\n\r\n[0,0,0,0,0]\r\n\r\nyou do `numbers[i] = rand.nextInt(69) + 1;`\r\n\r\nand may end up with `\r\n[21,0,0,0,0]`\r\n\r\nthen you do `Arrays.sort(numbers);` \r\n\r\nwhich will change to `[0,0,0,0,21]`\r\n\r\n\r\nnext `[0,12,0,0,21]` -&gt; `[0,0,0,12,21]`\r\n\r\nnext `[0,0,7,12,21]` -&gt; `[0,0,7,12,21]`\r\n\r\n","title":"Why does sorting my array always make the first two index values a zero?","body":"<p>Originally you have an array like</p>\n<p>[0,0,0,0,0]</p>\n<p>you do <code>numbers[i] = rand.nextInt(69) + 1;</code></p>\n<p>and may end up with <code> [21,0,0,0,0]</code></p>\n<p>then you do <code>Arrays.sort(numbers);</code></p>\n<p>which will change to <code>[0,0,0,0,21]</code></p>\n<p>next <code>[0,12,0,0,21]</code> -&gt; <code>[0,0,0,12,21]</code></p>\n<p>next <code>[0,0,7,12,21]</code> -&gt; <code>[0,0,7,12,21]</code></p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691546350,"creation_date":1691546350,"answer_id":76864125,"question_id":76864080,"body_markdown":"&gt; `Collections.shuffle(Arrays.asList(numbers));`\r\n\r\nOkay, your `numbers` array is now shuffled. Immediate next line:\r\n\r\n&gt; `Arrays.sort(numbers);`\r\n\r\n... and now it&#39;s sorted again. There was no point whatsoever in shuffling first if you&#39;re going to sort right after. It seems clear you misunderstand what these calls do or how your algorithm works, but exactly how you misunderstand these things isn&#39;t clear from your question.\r\n\r\n## Why do I get two zeroes?\r\n\r\nBecause that&#39;s exactly what your algorithm does. The computer just does what you tell it to.\r\n\r\nLet&#39;s go through an example:\r\n\r\n1. You start with a new 5-sized array; `[0, 0, 0, 0, 0]`.\r\n2. loop 5 times.\r\n3. (loop1) Set the 0-index to a random number: `[50, 0, 0, 0, 0]`.\r\n4. (loop1) Shuffle the list. Irrelevant, we&#39;ll sort it afterwards.\r\n5. (loop1) sort it: `[0, 0, 0, 0, 50]`.\r\n6. (loop1) print the 0-index number. __This is always 0__.\r\n7. (loop2) Set the 1-index to a random number: `[0, 45, 0, 0, 50]`.\r\n8. (loop2) Shuffle the list. Irrelevant, we&#39;ll sort it afterwards.\r\n9. (loop2) sort it: `[0, 0, 0, 45, 50]`.\r\n10. (loop2) print the 1-index number. __This is always 0__.\r\n11. (loop3) Set the 2-index to a random number: `[0, 0, 47, 45, 50]`.\r\n12. (loop3) Shuffle the list. Irrelevant, we&#39;ll sort it afterwards.\r\n13. (loop3) sort it: `[0, 0, 45, 47, 50]`.\r\n14. (loop3) print the 2-index number. This prints &#39;45&#39;.\r\n\r\nAnd so on.\r\n\r\nIt seems rather likely that you don&#39;t want to shuffle __and__ you don&#39;t want to sort.\r\n\r\nYou want to just fill each slot with a random number and that is all.\r\n\r\nIf you want the 5 numbers to be sorted - just sort once, afterwards. If you want to print the numbers in sorted order, first fill the entire array and print nothing - then sort it, then loop through to print it, then add the 1-25 number as final step and print that.\r\n\r\n","title":"Why does sorting my array always make the first two index values a zero?","body":"<blockquote>\n<p><code>Collections.shuffle(Arrays.asList(numbers));</code></p>\n</blockquote>\n<p>Okay, your <code>numbers</code> array is now shuffled. Immediate next line:</p>\n<blockquote>\n<p><code>Arrays.sort(numbers);</code></p>\n</blockquote>\n<p>... and now it's sorted again. There was no point whatsoever in shuffling first if you're going to sort right after. It seems clear you misunderstand what these calls do or how your algorithm works, but exactly how you misunderstand these things isn't clear from your question.</p>\n<h2>Why do I get two zeroes?</h2>\n<p>Because that's exactly what your algorithm does. The computer just does what you tell it to.</p>\n<p>Let's go through an example:</p>\n<ol>\n<li>You start with a new 5-sized array; <code>[0, 0, 0, 0, 0]</code>.</li>\n<li>loop 5 times.</li>\n<li>(loop1) Set the 0-index to a random number: <code>[50, 0, 0, 0, 0]</code>.</li>\n<li>(loop1) Shuffle the list. Irrelevant, we'll sort it afterwards.</li>\n<li>(loop1) sort it: <code>[0, 0, 0, 0, 50]</code>.</li>\n<li>(loop1) print the 0-index number. <strong>This is always 0</strong>.</li>\n<li>(loop2) Set the 1-index to a random number: <code>[0, 45, 0, 0, 50]</code>.</li>\n<li>(loop2) Shuffle the list. Irrelevant, we'll sort it afterwards.</li>\n<li>(loop2) sort it: <code>[0, 0, 0, 45, 50]</code>.</li>\n<li>(loop2) print the 1-index number. <strong>This is always 0</strong>.</li>\n<li>(loop3) Set the 2-index to a random number: <code>[0, 0, 47, 45, 50]</code>.</li>\n<li>(loop3) Shuffle the list. Irrelevant, we'll sort it afterwards.</li>\n<li>(loop3) sort it: <code>[0, 0, 45, 47, 50]</code>.</li>\n<li>(loop3) print the 2-index number. This prints '45'.</li>\n</ol>\n<p>And so on.</p>\n<p>It seems rather likely that you don't want to shuffle <strong>and</strong> you don't want to sort.</p>\n<p>You want to just fill each slot with a random number and that is all.</p>\n<p>If you want the 5 numbers to be sorted - just sort once, afterwards. If you want to print the numbers in sorted order, first fill the entire array and print nothing - then sort it, then loop through to print it, then add the 1-25 number as final step and print that.</p>\n"},{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691546676,"creation_date":1691546367,"answer_id":76864126,"question_id":76864080,"body_markdown":"Your code is... odd.   \r\n\r\nThe first time through the loop, ou put the first random number in the array at index 0, shuffle the array (putting the number &#39;somewhere&#39;), and then sort the array (putting the number in the last place, guaranteed because the other 4 numbers are each 0). Index 0 is 0 after this.  \r\n\r\nThen repeat with second number, which goes into index 1. Note that the zero index stays zero. Shuffle, and sort again.  The first three numbers will be zero; they have to be, because there are only 2 non-zero numbers in the array.\r\n\r\nNow the third number. Note that index 0 and index 1 remain zero.\r\n\r\nEtc.\r\n\r\nSummary:  shuffling and then sorting is pointless, since the sort undoes any randomization that shuffling did.\r\n\r\nAnd sorting inside the loop is pointless too, since it is moving non-zero numbers to where they can eventually be overwritten, and guaranteeing some zeroes that won&#39;t be.\r\n\r\nGuessing that you want to print out each &#39;ball&#39; as it is generated, and then print them all out in sorted order:\r\n\r\n     for (int i = 0; i &lt; 5; i++) {\r\n         numbers[i] = rand.nextInt(69) + 1;\r\n         System.out.print(numbers[i] + &quot; &quot;);\r\n     }\r\n     System.out.println();\r\n     \r\n     Arrays.sort(numbers);\r\n     for (int i = 0; i &lt; 5; i++) {\r\n         System.out.print(numbers[i] + &quot; &quot;);\r\n     }\r\n     System.out.println();\r\n\r\nThis is liable to having repeated random numbers, but dealing with that should be another question.","title":"Why does sorting my array always make the first two index values a zero?","body":"<p>Your code is... odd.</p>\n<p>The first time through the loop, ou put the first random number in the array at index 0, shuffle the array (putting the number 'somewhere'), and then sort the array (putting the number in the last place, guaranteed because the other 4 numbers are each 0). Index 0 is 0 after this.</p>\n<p>Then repeat with second number, which goes into index 1. Note that the zero index stays zero. Shuffle, and sort again.  The first three numbers will be zero; they have to be, because there are only 2 non-zero numbers in the array.</p>\n<p>Now the third number. Note that index 0 and index 1 remain zero.</p>\n<p>Etc.</p>\n<p>Summary:  shuffling and then sorting is pointless, since the sort undoes any randomization that shuffling did.</p>\n<p>And sorting inside the loop is pointless too, since it is moving non-zero numbers to where they can eventually be overwritten, and guaranteeing some zeroes that won't be.</p>\n<p>Guessing that you want to print out each 'ball' as it is generated, and then print them all out in sorted order:</p>\n<pre><code> for (int i = 0; i &lt; 5; i++) {\n     numbers[i] = rand.nextInt(69) + 1;\n     System.out.print(numbers[i] + &quot; &quot;);\n }\n System.out.println();\n \n Arrays.sort(numbers);\n for (int i = 0; i &lt; 5; i++) {\n     System.out.print(numbers[i] + &quot; &quot;);\n }\n System.out.println();\n</code></pre>\n<p>This is liable to having repeated random numbers, but dealing with that should be another question.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691551559,"creation_date":1691551559,"answer_id":76864366,"question_id":76864080,"body_markdown":"&gt; _&quot;Why does sorting my array always make the first two index values a zero? ...&quot;_\r\n\r\nThis is because you&#39;re sorting _numbers_ on each iteration.\r\n\r\nThe first and second iterations would yield a _numbers_ array where elements _0_ and _1_ are zero.\r\n\r\n&gt; _&quot;... What I am trying to get is a random number generator that will produce five lines of 5 random numbers 1 through 70 and one more number 1 through 25 like a mega millions ticket. ...&quot;_\r\n\r\nTo get 5 unique random numbers, create a _List_ of values 1 through 70, and use _[Collections#shuffle](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#shuffle(java.util.List))_.\r\n\r\n```java\r\nint[] numbers = new int[6];\r\nList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\nfor (int value = 1; value &lt;= 70; value++) list.add(value);\r\nCollections.shuffle(list);\r\nfor (int index = 0; index &lt; 5; index++)\r\n    numbers[index] = list.get(index);\r\nnumbers[5] = new Random().nextInt(1, 26);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n51 11 30 59 44 (13)\r\n```\r\n\r\n&gt; _&quot;... My understanding was that Collections.shuffle should take care of any repeating integers ...&quot;_\r\n\r\nNo, _shuffle_ just re-orders the list.  \r\nYou may be thinking of a _[Set](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html)_, which will only allow unique values.","title":"Why does sorting my array always make the first two index values a zero?","body":"<blockquote>\n<p><em>&quot;Why does sorting my array always make the first two index values a zero? ...&quot;</em></p>\n</blockquote>\n<p>This is because you're sorting <em>numbers</em> on each iteration.</p>\n<p>The first and second iterations would yield a <em>numbers</em> array where elements <em>0</em> and <em>1</em> are zero.</p>\n<blockquote>\n<p><em>&quot;... What I am trying to get is a random number generator that will produce five lines of 5 random numbers 1 through 70 and one more number 1 through 25 like a mega millions ticket. ...&quot;</em></p>\n</blockquote>\n<p>To get 5 unique random numbers, create a <em>List</em> of values 1 through 70, and use <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#shuffle(java.util.List)\" rel=\"nofollow noreferrer\">Collections#shuffle</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] numbers = new int[6];\nList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\nfor (int value = 1; value &lt;= 70; value++) list.add(value);\nCollections.shuffle(list);\nfor (int index = 0; index &lt; 5; index++)\n    numbers[index] = list.get(index);\nnumbers[5] = new Random().nextInt(1, 26);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>51 11 30 59 44 (13)\n</code></pre>\n<blockquote>\n<p><em>&quot;... My understanding was that Collections.shuffle should take care of any repeating integers ...&quot;</em></p>\n</blockquote>\n<p>No, <em>shuffle</em> just re-orders the list.<br />\nYou may be thinking of a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\">Set</a></em>, which will only allow unique values.</p>\n"},{"tags":[],"owner":{"account_id":14864634,"reputation":13,"user_id":13796584,"display_name":"user1091091"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691819439,"creation_date":1691557974,"answer_id":76864757,"question_id":76864080,"body_markdown":"I switched a few things around and it seems to work. In order to get the results that I had intend I simply cut the `Collections.shuffle` and `Arrays.sort` lines and pasted directly below the `for` loop. Then, beneath that, I added another `for` loop that loops five times printing `numbers[i]`.  Also the final `Collections.shuffle` wasn&#39;t necessary for the mega ball.\r\n````java\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.Random;\r\n\r\nclass Main {\r\n    public static void main(String[] args) {\r\n        MegaMillions megamillions = new MegaMillions();\r\n        for(int i = 0; i &lt; 5; i++) {\r\n            megamillions.play();\r\n        }\r\n    }\r\n}    \r\nclass MegaMillions {\r\n    public void play() {\r\n        Random rand = new Random();\r\n        int[] numbers = new int[5]; \r\n        for(int i = 0; i &lt; 5; i++) {\r\n            numbers[i] = rand.nextInt(69) + 1;\r\n        }\r\n        Collections.shuffle(Arrays.asList(numbers));\r\n        Arrays.sort(numbers);\r\n        for(int i = 0; i &lt; 5; i++) {\r\n            System.out.print(numbers[i] + &quot; &quot;);\r\n        }\r\n        int megaBall = rand.nextInt(24) + 1;\r\n        System.out.println(&quot;(&quot; + megaBall + &quot;)&quot;); \r\n    }\r\n}\r\n```\r\n","title":"Why does sorting my array always make the first two index values a zero?","body":"<p>I switched a few things around and it seems to work. In order to get the results that I had intend I simply cut the <code>Collections.shuffle</code> and <code>Arrays.sort</code> lines and pasted directly below the <code>for</code> loop. Then, beneath that, I added another <code>for</code> loop that loops five times printing <code>numbers[i]</code>.  Also the final <code>Collections.shuffle</code> wasn't necessary for the mega ball.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.Collections;\nimport java.util.Random;\n\nclass Main {\n    public static void main(String[] args) {\n        MegaMillions megamillions = new MegaMillions();\n        for(int i = 0; i &lt; 5; i++) {\n            megamillions.play();\n        }\n    }\n}    \nclass MegaMillions {\n    public void play() {\n        Random rand = new Random();\n        int[] numbers = new int[5]; \n        for(int i = 0; i &lt; 5; i++) {\n            numbers[i] = rand.nextInt(69) + 1;\n        }\n        Collections.shuffle(Arrays.asList(numbers));\n        Arrays.sort(numbers);\n        for(int i = 0; i &lt; 5; i++) {\n            System.out.print(numbers[i] + &quot; &quot;);\n        }\n        int megaBall = rand.nextInt(24) + 1;\n        System.out.println(&quot;(&quot; + megaBall + &quot;)&quot;); \n    }\n}\n```\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15518636,"reputation":11,"user_id":11195391,"display_name":"lama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691570581,"creation_date":1691570581,"answer_id":76866007,"question_id":76864080,"body_markdown":"The answer lies in the sorting of array using Arrays.sort(numbers) method.\r\nlets suppose your values is like below\r\n\r\n0 index loop  [10,0,0,0,0]\r\n\r\nthen you do Arrays.sort(numbers);\r\n\r\nyou will get the array like this [0,0,0,0,10]\r\n\r\n1 index loop [0,12,0,0,10] -&gt; [0,0,0,10,12]\r\n\r\n2 index loop [0,0,15,10,12] -&gt; [0,0,10,12,15]\r\n\r\nthe game begins from here right?\r\n3 index loop [0,0,10,21,15]-&gt;[0,0,10,15,21]\r\n\r\nwhen you add elements in numbers[i] this actually fills the 3 index value which after sorting becomes [0,0,10,15,21].so index 0 and 1 will become always zero while looping until loop ends.\r\n\r\nif you increase the length of the array numbers then index with zero will also increase.\r\n\r\n","title":"Why does sorting my array always make the first two index values a zero?","body":"<p>The answer lies in the sorting of array using Arrays.sort(numbers) method.\nlets suppose your values is like below</p>\n<p>0 index loop  [10,0,0,0,0]</p>\n<p>then you do Arrays.sort(numbers);</p>\n<p>you will get the array like this [0,0,0,0,10]</p>\n<p>1 index loop [0,12,0,0,10] -&gt; [0,0,0,10,12]</p>\n<p>2 index loop [0,0,15,10,12] -&gt; [0,0,10,12,15]</p>\n<p>the game begins from here right?\n3 index loop [0,0,10,21,15]-&gt;[0,0,10,15,21]</p>\n<p>when you add elements in numbers[i] this actually fills the 3 index value which after sorting becomes [0,0,10,15,21].so index 0 and 1 will become always zero while looping until loop ends.</p>\n<p>if you increase the length of the array numbers then index with zero will also increase.</p>\n"}],"owner":{"account_id":14864634,"reputation":13,"user_id":13796584,"display_name":"user1091091"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":6,"score":-1,"last_activity_date":1691819439,"creation_date":1691545577,"question_id":76864080,"body_markdown":"What I am trying to get is a random number generator that will produce five lines of 5 random numbers 1 through 70 and one more number 1 through 25 like a mega millions ticket.\r\n\r\n```\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.Random;\r\n\r\npublic class MegaMillions {\r\n    \r\n\tpublic void play() {\r\n\t\tRandom rand = new Random();\r\n\t\tint[] numbers = new int[5];\r\n\t\tfor(int i = 0; i &lt; 5; i++) {\r\n\t\t\tnumbers[i] = rand.nextInt(69) + 1;\r\n\t\t\tCollections.shuffle(Arrays.asList(numbers));\r\n\t\t\tArrays.sort(numbers);\r\n\t\t\tSystem.out.print(numbers[i] + &quot; &quot;);\r\n\t\t}\r\n\t\tCollections.shuffle(Arrays.asList(numbers));\r\n\t\tint megaBall = rand.nextInt(24) + 1;\r\n\t\tSystem.out.println(&quot;(&quot; + megaBall + &quot;)&quot;);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nHere is an example of what I&#39;m getting:\r\n\r\n\r\n```\r\n0 0 21 21 35 (1)\r\n\r\n0 0 16 26 32 (9)\r\n\r\n0 0 39 39 53 (3)\r\n\r\n0 0 22 37 51 (14)\r\n\r\n0 0 18 18 60 (14)\r\n```\r\n\r\n\r\n\r\nMy understanding was that Collections.shuffle should take care of any repeating integers and Arrays.sort should put in numerical order.","title":"Why does sorting my array always make the first two index values a zero?","body":"<p>What I am trying to get is a random number generator that will produce five lines of 5 random numbers 1 through 70 and one more number 1 through 25 like a mega millions ticket.</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Collections;\nimport java.util.Random;\n\npublic class MegaMillions {\n    \n    public void play() {\n        Random rand = new Random();\n        int[] numbers = new int[5];\n        for(int i = 0; i &lt; 5; i++) {\n            numbers[i] = rand.nextInt(69) + 1;\n            Collections.shuffle(Arrays.asList(numbers));\n            Arrays.sort(numbers);\n            System.out.print(numbers[i] + &quot; &quot;);\n        }\n        Collections.shuffle(Arrays.asList(numbers));\n        int megaBall = rand.nextInt(24) + 1;\n        System.out.println(&quot;(&quot; + megaBall + &quot;)&quot;);\n    }\n\n}\n</code></pre>\n<p>Here is an example of what I'm getting:</p>\n<pre><code>0 0 21 21 35 (1)\n\n0 0 16 26 32 (9)\n\n0 0 39 39 53 (3)\n\n0 0 22 37 51 (14)\n\n0 0 18 18 60 (14)\n</code></pre>\n<p>My understanding was that Collections.shuffle should take care of any repeating integers and Arrays.sort should put in numerical order.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":23936770,"reputation":128,"user_id":17930413,"display_name":"Rahul Rokade"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691760661,"creation_date":1691759210,"answer_id":76883817,"question_id":76883414,"body_markdown":"**Android 13 - access the media folder**\r\n\r\n*please provide permission in manifest file &quot;READ_EXTERNAL_STORAGE&quot;, access to file directory then used &quot;READ_MEDIA_IMAGES&quot;, &quot;READ_MEDIA_VIDEO&quot;, &quot;READ_MEDIA_AUDIO&quot;. if you want to access media files in other apps&#39; directories.*\r\n\r\n*&quot;getExternalStoragePublicDirectory()&quot; used this method for shared storage directory.*\r\n\r\n    public String getRealPathFromURI(Uri uri) {\r\n        String path = &quot;&quot;;\r\n        if (getContentResolver() != null) {\r\n            Cursor cursor = getContentResolver().query(uri, null, null, null, null);\r\n            if (cursor != null) {\r\n                cursor.moveToFirst();\r\n                int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);\r\n                path = cursor.getString(idx);\r\n                cursor.close();\r\n            }\r\n        }\r\n        return path;\r\n    }\r\n\r\n    File file = new File(&quot;/path/to/file&quot;);\r\n                FileInputStream inputStream = new FileInputStream(file);\r\n                byte[] bytes = new byte[inputStream.available()];\r\n                inputStream.read(bytes);\r\n                String contents = new String(bytes);\r\n                Log.d(&quot;TAG&quot;, &quot;Contents: &quot; + contents);\r\n\r\n**try this line in input stream**\r\n\r\n    AssetManager assetManager = getAssets();\r\n                InputStream inputStream = assetManager.open(&quot;my_obj_file.obj&quot;);\r\n                BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\r\n                String line;\r\n                while ((line = reader.readLine()) != null) {\r\n                    // Do something with the line.\r\n                }\r\n                Resources resources = getResources();\r\n                InputStream inputStream = resources.openRawResource(R.raw.my_atlas_file);\r\n                BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\r\n                String line;\r\n                while ((line = reader.readLine()) != null) {\r\n                   \r\n                }\r\n                String path = Environment.getExternalStorageDirectory() + &quot;/my_pack_file.pack&quot;;\r\n                FileInputStream inputStream = new FileInputStream(path);\r\n                BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\r\n                String line;\r\n                while ((line = reader.readLine()) != null) {\r\n                   \r\n                }","title":"Android 13 folder access","body":"<p><strong>Android 13 - access the media folder</strong></p>\n<p><em>please provide permission in manifest file &quot;READ_EXTERNAL_STORAGE&quot;, access to file directory then used &quot;READ_MEDIA_IMAGES&quot;, &quot;READ_MEDIA_VIDEO&quot;, &quot;READ_MEDIA_AUDIO&quot;. if you want to access media files in other apps' directories.</em></p>\n<p><em>&quot;getExternalStoragePublicDirectory()&quot; used this method for shared storage directory.</em></p>\n<pre><code>public String getRealPathFromURI(Uri uri) {\n    String path = &quot;&quot;;\n    if (getContentResolver() != null) {\n        Cursor cursor = getContentResolver().query(uri, null, null, null, null);\n        if (cursor != null) {\n            cursor.moveToFirst();\n            int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA);\n            path = cursor.getString(idx);\n            cursor.close();\n        }\n    }\n    return path;\n}\n\nFile file = new File(&quot;/path/to/file&quot;);\n            FileInputStream inputStream = new FileInputStream(file);\n            byte[] bytes = new byte[inputStream.available()];\n            inputStream.read(bytes);\n            String contents = new String(bytes);\n            Log.d(&quot;TAG&quot;, &quot;Contents: &quot; + contents);\n</code></pre>\n<p><strong>try this line in input stream</strong></p>\n<pre><code>AssetManager assetManager = getAssets();\n            InputStream inputStream = assetManager.open(&quot;my_obj_file.obj&quot;);\n            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n            String line;\n            while ((line = reader.readLine()) != null) {\n                // Do something with the line.\n            }\n            Resources resources = getResources();\n            InputStream inputStream = resources.openRawResource(R.raw.my_atlas_file);\n            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n            String line;\n            while ((line = reader.readLine()) != null) {\n               \n            }\n            String path = Environment.getExternalStorageDirectory() + &quot;/my_pack_file.pack&quot;;\n            FileInputStream inputStream = new FileInputStream(path);\n            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n            String line;\n            while ((line = reader.readLine()) != null) {\n               \n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23936770,"reputation":128,"user_id":17930413,"display_name":"Rahul Rokade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691818669,"creation_date":1691818669,"answer_id":76887899,"question_id":76883414,"body_markdown":"**The Android folder is supposed to be inaccessible in Android 11 and newer. Due to a bug, workarounds worked until Android 13 got released. Only access on the device itself is blocked. You can access the folder just fine if you connect your device to a computer.**","title":"Android 13 folder access","body":"<p><strong>The Android folder is supposed to be inaccessible in Android 11 and newer. Due to a bug, workarounds worked until Android 13 got released. Only access on the device itself is blocked. You can access the folder just fine if you connect your device to a computer.</strong></p>\n"}],"owner":{"account_id":9716165,"reputation":21,"user_id":10273624,"display_name":"Михаил Куликовец"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1740,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1691818669,"creation_date":1691755529,"question_id":76883414,"body_markdown":"My app needs access to a folder in order to work, it needs to access files and create files in that folder. I saw this in some console emulators, the file manager opened, after selecting a folder, I received a request for access to this folder. How to implement this, I can not find the answer for a long time.\r\n\r\n```\r\nif (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\r\n\t\t\t\t!= PackageManager.PERMISSION_GRANTED) {\r\n\t\t\t// Permission is not granted, so request permission\r\n\t\t\tActivityCompat.requestPermissions(this,\r\n\t\t\t\t\tnew String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n\t\t\t\t\t225);\r\n\t\t} else {\r\n\t\t\t// Permission is already granted, so proceed\r\n\t\t\tselectFolder();\r\n\t\t}\r\n```\r\n\r\n```\r\n@Override\r\n\tpublic void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\r\n\r\n\t\t/*if (requestCode == 1) {\r\n\t\t\tif (grantResults.length &gt; 1) {//&gt;0\r\n\t\t\t\tif (grantResults[0] == PackageManager.PERMISSION_GRANTED &amp;&amp; grantResults[1] == PackageManager.PERMISSION_GRANTED) {\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.finish();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}*/\r\n\r\n\t\tif (requestCode == 225) {\r\n\t\t\t// Check if the user has granted permission\r\n\t\t\tif (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n\t\t\t\t// Permission is granted, so proceed\r\n\t\t\t\tselectFolder();\r\n\t\t\t} else {\r\n\t\t\t\t// Permission is not granted, so display a message to the user\r\n\t\t\t\t//Log.e(TAG, &quot;Permission not granted&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```\r\n\r\n```\r\nprivate void selectFolder() {\r\n\t\t// Get a file chooser dialog to allow the user to select a folder\r\n\t\tIntent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);\r\n\t\tstartActivityForResult(intent, 3);\r\n\t}\r\n```\r\nthis code was suggested to me by google Bard,\r\nbut it doesn&#39;t work, the request doesn&#39;t come, nothing happens, this code worked to import the file only via ACTION_OPEN_DOCUMENT\r\n\r\nAs I understand it, I need to use SAF, but only media files can be accessed there, but i need other files as well (.obj, .atlas, .pack, .pfx)\r\n\r\ni know about permission MANAGE_EXTERNAL_STORAGE, but there will be problems with it when publishing the application\r\n\r\ntried what suggested by google Bard\r\n\r\n```\r\nFile publicFolder = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);\r\nFile newFolder = new File(publicFolder, &quot;my_public_folder&quot;);\r\nnewFolder.mkdirs();\r\n```\r\nbut I did not find the required request, and the program crashes on this\r\n","title":"Android 13 folder access","body":"<p>My app needs access to a folder in order to work, it needs to access files and create files in that folder. I saw this in some console emulators, the file manager opened, after selecting a folder, I received a request for access to this folder. How to implement this, I can not find the answer for a long time.</p>\n<pre><code>if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\n                != PackageManager.PERMISSION_GRANTED) {\n            // Permission is not granted, so request permission\n            ActivityCompat.requestPermissions(this,\n                    new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\n                    225);\n        } else {\n            // Permission is already granted, so proceed\n            selectFolder();\n        }\n</code></pre>\n<pre><code>@Override\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n\n        /*if (requestCode == 1) {\n            if (grantResults.length &gt; 1) {//&gt;0\n                if (grantResults[0] == PackageManager.PERMISSION_GRANTED &amp;&amp; grantResults[1] == PackageManager.PERMISSION_GRANTED) {\n\n                } else {\n                    this.finish();\n                }\n            }\n        }*/\n\n        if (requestCode == 225) {\n            // Check if the user has granted permission\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                // Permission is granted, so proceed\n                selectFolder();\n            } else {\n                // Permission is not granted, so display a message to the user\n                //Log.e(TAG, &quot;Permission not granted&quot;);\n            }\n        }\n    }\n</code></pre>\n<pre><code>private void selectFolder() {\n        // Get a file chooser dialog to allow the user to select a folder\n        Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT_TREE);\n        startActivityForResult(intent, 3);\n    }\n</code></pre>\n<p>this code was suggested to me by google Bard,\nbut it doesn't work, the request doesn't come, nothing happens, this code worked to import the file only via ACTION_OPEN_DOCUMENT</p>\n<p>As I understand it, I need to use SAF, but only media files can be accessed there, but i need other files as well (.obj, .atlas, .pack, .pfx)</p>\n<p>i know about permission MANAGE_EXTERNAL_STORAGE, but there will be problems with it when publishing the application</p>\n<p>tried what suggested by google Bard</p>\n<pre><code>File publicFolder = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);\nFile newFolder = new File(publicFolder, &quot;my_public_folder&quot;);\nnewFolder.mkdirs();\n</code></pre>\n<p>but I did not find the required request, and the program crashes on this</p>\n"},{"tags":["java","android","gradle","navigation","classpath"],"owner":{"account_id":28815725,"reputation":23,"user_id":22069400,"display_name":"San Nasser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691818229,"creation_date":1691818229,"question_id":76887882,"body_markdown":"The project is working perfectly, but when I added this library, the problems started to disappear\r\n\r\n`implementation &#39;com.etebarian:meow-bottom-navigation:1.3.1&#39;`\r\n\r\nthis message showed after build my pro \r\n\r\n`Caused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.`\r\n\r\nand \r\n`Caused by: org.gradle.internal.resolve.ModuleVersionNotFoundException: Could not find com.etebarian:meow-bottom-navigation:1.3.1.`\r\n\r\n\r\n\r\nthis is my gradle.build  module file \r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;com.google.gms.google-services&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;greenline.fpotwotw.poeter&#39;\r\n    compileSdk 34\r\n\r\n    defaultConfig {\r\n        applicationId &quot;greenline.fpotwotw.poeter&quot;\r\n        minSdk 23\r\n        targetSdk 34\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;androidx.core:core:1.10.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;androidx.lifecycle:lifecycle-livedata-ktx:2.6.1&#39;\r\n    implementation &#39;androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.1&#39;\r\n    implementation &#39;androidx.navigation:navigation-fragment:2.7.0&#39;\r\n    implementation &#39;androidx.navigation:navigation-ui:2.7.0&#39;\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n    implementation &#39;androidx.recyclerview:recyclerview:1.3.1&#39;\r\n    implementation &#39;androidx.preference:preference:1.2.1&#39;\r\n    implementation &#39;androidx.palette:palette:1.0.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.9.0&#39;\r\n    implementation &#39;com.github.ksoichiro:android-observablescrollview:1.5.0&#39;\r\n    implementation &#39;com.google.android.gms:play-services-cast-framework:21.3.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-storage:20.2.1&#39;\r\n    implementation &#39;com.google.firebase:firebase-messaging:23.2.1&#39;\r\n    implementation &#39;com.google.firebase:firebase-database:20.2.2&#39;\r\n    implementation &#39;com.google.firebase:firebase-firestore:24.7.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-analytics:21.3.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-bom:32.2.2&#39;\r\n    implementation &#39;com.google.firebase:firebase-auth-ktx:22.1.1&#39;\r\n    implementation &#39;com.google.firebase:firebase-auth:22.1.1&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    implementation &#39;com.squareup.retrofit2:retrofit:2.9.0&#39;\r\n    implementation &#39;com.squareup.retrofit2:converter-gson:2.9.0&#39;\r\n    implementation &#39;com.squareup.okhttp3:okhttp:5.0.0-alpha.3&#39;\r\n    implementation &#39;com.squareup.okhttp3:logging-interceptor:5.0.0-alpha.3&#39;\r\n    //implementation &#39;com.androidx.palette:palette:1.0.0&#39;\r\n    implementation &#39;de.hdodenhof:circleimageview:3.1.0&#39;\r\n    implementation &#39;com.android.volley:volley:1.2.1&#39;\r\n    implementation  &#39;com.github.dhaval2404:imagepicker:2.1&#39;\r\n    implementation &#39;com.github.bumptech.glide:glide:4.15.1&#39;\r\n    implementation &#39;com.pnikosis:materialish-progress:1.7&#39;\r\n    implementation &quot;androidx.core:core-splashscreen:1.0.1&quot;\r\n    implementation &quot;com.squareup.picasso:picasso:2.8&quot;\r\n\r\n    implementation  &quot;com.facebook.fresco:fresco:2.3.0&quot;\r\n    implementation &quot;com.github.skydoves:balloon:1.2.9&quot;\r\n    implementation &quot;com.hbb20:ccp:2.6.0&quot;\r\n\r\n\r\n    implementation &#39;com.facebook.shimmer:shimmer:0.5.0&#39;\r\n\r\n    implementation &#39;com.etebarian:meow-bottom-navigation:1.3.1&#39;\r\n\r\n    //implementation &quot;com.mikhaellopez:circularfillableloaders:1.3.2&quot;\r\n\r\n    constraints {\r\n        implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.8.0&quot;) {\r\n            because(&quot;kotlin-stdlib-jdk7 is now a part of kotlin-stdlib&quot;)\r\n        }\r\n        implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.8.0&quot;) {\r\n            because(&quot;kotlin-stdlib-jdk8 is now a part of kotlin-stdlib&quot;)\r\n        }\r\n    }\r\n}\r\n```\r\nand project path  gradle\r\n\r\n```\r\nbuildscript {\r\n    dependencies {\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n}// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;7.3.1&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.3.1&#39; apply false\r\n}\r\n```\r\nand gradle.setting \r\n\r\n```\r\npluginManagement {\r\n    repositories {\r\n        gradlePluginPortal()\r\n        google()\r\n        mavenCentral()\r\n\r\n    }\r\n}\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        maven { url &quot;https://jitpack.io&quot; }\r\n\r\n    }\r\n}\r\nrootProject.name = &quot;Poeter&quot;\r\ninclude &#39;:app&#39;\r\n\r\n```\r\n\r\nCan someone with experience help us, thank you very much.\r\n","title":"This problem occurs to me whenever I try to add a new library in the Android Studio gradle file in the Java language","body":"<p>The project is working perfectly, but when I added this library, the problems started to disappear</p>\n<p><code>implementation 'com.etebarian:meow-bottom-navigation:1.3.1'</code></p>\n<p>this message showed after build my pro</p>\n<p><code>Caused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration ':app:debugRuntimeClasspath'.</code></p>\n<p>and\n<code>Caused by: org.gradle.internal.resolve.ModuleVersionNotFoundException: Could not find com.etebarian:meow-bottom-navigation:1.3.1.</code></p>\n<p>this is my gradle.build  module file</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    namespace 'greenline.fpotwotw.poeter'\n    compileSdk 34\n\n    defaultConfig {\n        applicationId &quot;greenline.fpotwotw.poeter&quot;\n        minSdk 23\n        targetSdk 34\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'androidx.core:core:1.10.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'androidx.lifecycle:lifecycle-livedata-ktx:2.6.1'\n    implementation 'androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.1'\n    implementation 'androidx.navigation:navigation-fragment:2.7.0'\n    implementation 'androidx.navigation:navigation-ui:2.7.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'androidx.recyclerview:recyclerview:1.3.1'\n    implementation 'androidx.preference:preference:1.2.1'\n    implementation 'androidx.palette:palette:1.0.0'\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'com.github.ksoichiro:android-observablescrollview:1.5.0'\n    implementation 'com.google.android.gms:play-services-cast-framework:21.3.0'\n    implementation 'com.google.firebase:firebase-storage:20.2.1'\n    implementation 'com.google.firebase:firebase-messaging:23.2.1'\n    implementation 'com.google.firebase:firebase-database:20.2.2'\n    implementation 'com.google.firebase:firebase-firestore:24.7.0'\n    implementation 'com.google.firebase:firebase-analytics:21.3.0'\n    implementation 'com.google.firebase:firebase-bom:32.2.2'\n    implementation 'com.google.firebase:firebase-auth-ktx:22.1.1'\n    implementation 'com.google.firebase:firebase-auth:22.1.1'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    implementation 'com.squareup.retrofit2:retrofit:2.9.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'\n    implementation 'com.squareup.okhttp3:okhttp:5.0.0-alpha.3'\n    implementation 'com.squareup.okhttp3:logging-interceptor:5.0.0-alpha.3'\n    //implementation 'com.androidx.palette:palette:1.0.0'\n    implementation 'de.hdodenhof:circleimageview:3.1.0'\n    implementation 'com.android.volley:volley:1.2.1'\n    implementation  'com.github.dhaval2404:imagepicker:2.1'\n    implementation 'com.github.bumptech.glide:glide:4.15.1'\n    implementation 'com.pnikosis:materialish-progress:1.7'\n    implementation &quot;androidx.core:core-splashscreen:1.0.1&quot;\n    implementation &quot;com.squareup.picasso:picasso:2.8&quot;\n\n    implementation  &quot;com.facebook.fresco:fresco:2.3.0&quot;\n    implementation &quot;com.github.skydoves:balloon:1.2.9&quot;\n    implementation &quot;com.hbb20:ccp:2.6.0&quot;\n\n\n    implementation 'com.facebook.shimmer:shimmer:0.5.0'\n\n    implementation 'com.etebarian:meow-bottom-navigation:1.3.1'\n\n    //implementation &quot;com.mikhaellopez:circularfillableloaders:1.3.2&quot;\n\n    constraints {\n        implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.8.0&quot;) {\n            because(&quot;kotlin-stdlib-jdk7 is now a part of kotlin-stdlib&quot;)\n        }\n        implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.8.0&quot;) {\n            because(&quot;kotlin-stdlib-jdk8 is now a part of kotlin-stdlib&quot;)\n        }\n    }\n}\n</code></pre>\n<p>and project path  gradle</p>\n<pre><code>buildscript {\n    dependencies {\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n    repositories {\n        mavenCentral()\n    }\n}// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '7.3.1' apply false\n    id 'com.android.library' version '7.3.1' apply false\n}\n</code></pre>\n<p>and gradle.setting</p>\n<pre><code>pluginManagement {\n    repositories {\n        gradlePluginPortal()\n        google()\n        mavenCentral()\n\n    }\n}\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n        maven { url &quot;https://jitpack.io&quot; }\n\n    }\n}\nrootProject.name = &quot;Poeter&quot;\ninclude ':app'\n\n</code></pre>\n<p>Can someone with experience help us, thank you very much.</p>\n"},{"tags":["java","spring-boot","spring-batch","batch-processing"],"comments":[{"owner":{"account_id":28788063,"reputation":1,"user_id":22048100,"display_name":"techie_kvy"},"score":0,"creation_date":1691831316,"post_id":76885728,"comment_id":135546892,"body_markdown":"This [question](https://stackoverflow.com/questions/59165083/how-to-read-multiple-flat-files-with-different-headers-and-process-them-at-once) is somewhat similar to mine, [@techi](https://stackoverflow.com/users/2592089/techi), I&#39;d like to know whether you got your question answered or do you find any solution to this?","body":"This <a href=\"https://stackoverflow.com/questions/59165083/how-to-read-multiple-flat-files-with-different-headers-and-process-them-at-once\">question</a> is somewhat similar to mine, <a href=\"https://stackoverflow.com/users/2592089/techi\">@techi</a>, I&#39;d like to know whether you got your question answered or do you find any solution to this?"}],"answers":[{"tags":[],"owner":{"account_id":1310169,"reputation":3813,"user_id":1258319,"accept_rate":81,"display_name":"Julian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691786024,"creation_date":1691786024,"answer_id":76886520,"question_id":76885728,"body_markdown":"Not exactly sure how you can do it with spring-batch but doing this using an embedded database such as [H2][1] is extremely easy. Assuming transforming the two files from `txt` to `csv` is not a problem you just load the two files into two tables and join them by `ID`\r\n\r\n    CREATE table_1 TEST AS SELECT * FROM CSVREAD(&#39;file1.csv&#39;);\r\n    CREATE table_2 TEST AS SELECT * FROM CSVREAD(&#39;file2.csv&#39;);\r\n    SELECT t1.first_name, t1.last_name, t2.dept\r\n      FROM table_1 t1\r\n      JOIN table_2 t2\r\n        ON t1.id = t2.id;\r\n\r\nThen depending on your requirements, you can write them back to a file or do whatever you need.\r\n\r\n  [1]: https://h2database.com/html/main.html","title":"Can we process the records read from two different flat files in one processor?","body":"<p>Not exactly sure how you can do it with spring-batch but doing this using an embedded database such as <a href=\"https://h2database.com/html/main.html\" rel=\"nofollow noreferrer\">H2</a> is extremely easy. Assuming transforming the two files from <code>txt</code> to <code>csv</code> is not a problem you just load the two files into two tables and join them by <code>ID</code></p>\n<pre><code>CREATE table_1 TEST AS SELECT * FROM CSVREAD('file1.csv');\nCREATE table_2 TEST AS SELECT * FROM CSVREAD('file2.csv');\nSELECT t1.first_name, t1.last_name, t2.dept\n  FROM table_1 t1\n  JOIN table_2 t2\n    ON t1.id = t2.id;\n</code></pre>\n<p>Then depending on your requirements, you can write them back to a file or do whatever you need.</p>\n"}],"owner":{"account_id":28788063,"reputation":1,"user_id":22048100,"display_name":"techie_kvy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691817932,"creation_date":1691775966,"question_id":76885728,"body_markdown":"I need to process the data read from two different files and need to store in the Mongo DB. Since one step under the job cannot have multiple readers, I thought of having two different readers, but how can we merge the data read from two different files from two different steps and in which step we need to implement the processor and writer.\r\n\r\nI tried implementing a flow with split of having two different steps where each handles reading the records from two files. Since they are completely different files with difference in their headers.\r\n\r\n```\r\n\r\n@Bean\r\npublic Job job(JobRepository jobRepository) {\r\n    return new JobBuilder(&quot;job&quot;, jobRepository)\r\n        .start(splitFlow())\r\n        .next(step4())\r\n        .build()        //builds FlowJobBuilder instance\r\n        .build();       //builds Job instance\r\n}\r\n\r\n@Bean\r\npublic Flow splitFlow() {\r\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;splitFlow&quot;)\r\n        .split(taskExecutor())\r\n        .add(flow1(), flow2())\r\n        .build();\r\n}\r\n\r\n@Bean\r\npublic Flow flow1() {\r\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;flow1&quot;)\r\n        .start(step1()) // where step1 handles the reading of one flatFile.\r\n        .build();\r\n}\r\n\r\n@Bean\r\npublic Flow flow2() {\r\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;flow2&quot;)\r\n        .start(step3()) // where step3 handles the reading of another flatFile.\r\n        .build();\r\n}\r\n\r\n@Bean\r\npublic TaskExecutor taskExecutor() {\r\n    return new SimpleAsyncTaskExecutor(&quot;spring_batch&quot;);\r\n}\r\n\r\n```\r\nNow, for each record in the first file, I need to lookup for id value in the second file and then store in the DB. \r\n\r\n\r\n```\r\nfile1.csv\r\n--------------\r\nId| First Name| Last Name\r\n\r\nfile2.csv\r\n-----------\r\nid| Dept\r\n\r\nResult\r\n--------------\r\nid| First Name| Last Name| Dept \r\n```\r\n\r\n\r\nHow can we combine the data read from two readers and process them under one processor?\r\nDoes anyone have any suggestions on how the job should be configured in this scenario?","title":"Can we process the records read from two different flat files in one processor?","body":"<p>I need to process the data read from two different files and need to store in the Mongo DB. Since one step under the job cannot have multiple readers, I thought of having two different readers, but how can we merge the data read from two different files from two different steps and in which step we need to implement the processor and writer.</p>\n<p>I tried implementing a flow with split of having two different steps where each handles reading the records from two files. Since they are completely different files with difference in their headers.</p>\n<pre><code>\n@Bean\npublic Job job(JobRepository jobRepository) {\n    return new JobBuilder(&quot;job&quot;, jobRepository)\n        .start(splitFlow())\n        .next(step4())\n        .build()        //builds FlowJobBuilder instance\n        .build();       //builds Job instance\n}\n\n@Bean\npublic Flow splitFlow() {\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;splitFlow&quot;)\n        .split(taskExecutor())\n        .add(flow1(), flow2())\n        .build();\n}\n\n@Bean\npublic Flow flow1() {\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;flow1&quot;)\n        .start(step1()) // where step1 handles the reading of one flatFile.\n        .build();\n}\n\n@Bean\npublic Flow flow2() {\n    return new FlowBuilder&lt;SimpleFlow&gt;(&quot;flow2&quot;)\n        .start(step3()) // where step3 handles the reading of another flatFile.\n        .build();\n}\n\n@Bean\npublic TaskExecutor taskExecutor() {\n    return new SimpleAsyncTaskExecutor(&quot;spring_batch&quot;);\n}\n\n</code></pre>\n<p>Now, for each record in the first file, I need to lookup for id value in the second file and then store in the DB.</p>\n<pre><code>file1.csv\n--------------\nId| First Name| Last Name\n\nfile2.csv\n-----------\nid| Dept\n\nResult\n--------------\nid| First Name| Last Name| Dept \n</code></pre>\n<p>How can we combine the data read from two readers and process them under one processor?\nDoes anyone have any suggestions on how the job should be configured in this scenario?</p>\n"},{"tags":["java","spring","file","web-applications","file-upload"],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1487001928,"creation_date":1375129755,"answer_id":17933595,"question_id":17933508,"body_markdown":"Don&#39;t use `@ResponseBody`. Have Spring inject the `HttpServletResponse` and write directly to its `OutputStream`.\r\n\r\n    @RequestMapping(&quot;/getFile&quot;)\r\n    public void getFile(HttpServletResponse response) {\r\n        String address = Services.createFile();\r\n        File file = new File(address);\r\n        response.setContentType(&quot;application/vnd.ms-excel&quot;);\r\n        response.setHeader(&quot;Content-disposition&quot;, &quot;attachment; filename=&quot; + file.getName());\r\n        \r\n        OutputStream out = response.getOutputStream();\r\n        FileInputStream in = new FileInputStream(file);\r\n\r\n        // copy from in to out\r\n        IOUtils.copy(in,out);\r\n\r\n        out.close();\r\n        in.close();\r\n        file.delete();\r\n    }\r\n\r\nI haven&#39;t added any exception handling. I leave that to you.\r\n\r\n`FileSystemResource` is really just is a wrapper for `FileInputStream` that&#39;s used by Spring.\r\n\r\nOr, if you want to be hardcore, you could make your own `FileSystemResource` implementation with its own `getOutputStream()` method that returns your own implementation of `FileOutputStream` that deletes the underlying file when you call `close()` on it.","title":"How to delete a file after sending it in a web app?","body":"<p>Don't use <code>@ResponseBody</code>. Have Spring inject the <code>HttpServletResponse</code> and write directly to its <code>OutputStream</code>.</p>\n\n<pre><code>@RequestMapping(\"/getFile\")\npublic void getFile(HttpServletResponse response) {\n    String address = Services.createFile();\n    File file = new File(address);\n    response.setContentType(\"application/vnd.ms-excel\");\n    response.setHeader(\"Content-disposition\", \"attachment; filename=\" + file.getName());\n\n    OutputStream out = response.getOutputStream();\n    FileInputStream in = new FileInputStream(file);\n\n    // copy from in to out\n    IOUtils.copy(in,out);\n\n    out.close();\n    in.close();\n    file.delete();\n}\n</code></pre>\n\n<p>I haven't added any exception handling. I leave that to you.</p>\n\n<p><code>FileSystemResource</code> is really just is a wrapper for <code>FileInputStream</code> that's used by Spring.</p>\n\n<p>Or, if you want to be hardcore, you could make your own <code>FileSystemResource</code> implementation with its own <code>getOutputStream()</code> method that returns your own implementation of <code>FileOutputStream</code> that deletes the underlying file when you call <code>close()</code> on it.</p>\n"},{"tags":[],"owner":{"account_id":2015038,"reputation":379,"user_id":1802560,"display_name":"Mag"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1463667792,"creation_date":1463667792,"answer_id":37326148,"question_id":17933508,"body_markdown":"So I decided to take Sotirious&#39;s suggestion for a &quot;hardcore&quot; way. It is pretty simple, but has one problem. If user of that class opens input stream once to check something and closes it, it will not be able to open it again since file is deleted on close. Spring does not seem to do that, but you will need to check after every version upgrade. \r\n\r\n\tpublic class DeleteAfterReadeFileSystemResource extends FileSystemResource {\r\n\t\tpublic DeleteAfterReadeFileSystemResource(File file) {\r\n\t\t\tsuper(file);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic InputStream getInputStream() throws IOException {\r\n\t\t\treturn new DeleteOnCloseFileInputStream(super.getFile());\r\n\t\t}\r\n\r\n\t\tprivate static final class DeleteOnCloseFileInputStream extends FileInputStream {\r\n\r\n\t\t\tprivate File file;\r\n\t\t\tDeleteOnCloseFileInputStream(File file) throws FileNotFoundException \t{\r\n\t\t\t\tsuper(file);\r\n\t\t\t\tthis.file = file;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void close() throws IOException {\r\n\t\t\t\tsuper.close();\r\n\t\t\t\tfile.delete();\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"How to delete a file after sending it in a web app?","body":"<p>So I decided to take Sotirious's suggestion for a \"hardcore\" way. It is pretty simple, but has one problem. If user of that class opens input stream once to check something and closes it, it will not be able to open it again since file is deleted on close. Spring does not seem to do that, but you will need to check after every version upgrade. </p>\n\n<pre><code>public class DeleteAfterReadeFileSystemResource extends FileSystemResource {\n    public DeleteAfterReadeFileSystemResource(File file) {\n        super(file);\n    }\n\n    @Override\n    public InputStream getInputStream() throws IOException {\n        return new DeleteOnCloseFileInputStream(super.getFile());\n    }\n\n    private static final class DeleteOnCloseFileInputStream extends FileInputStream {\n\n        private File file;\n        DeleteOnCloseFileInputStream(File file) throws FileNotFoundException    {\n            super(file);\n            this.file = file;\n        }\n\n        @Override\n        public void close() throws IOException {\n            super.close();\n            file.delete();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3009385,"reputation":7267,"user_id":2553215,"display_name":"kuhnroyal"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1531853462,"creation_date":1531853462,"answer_id":51388422,"question_id":17933508,"body_markdown":"A minor adaption to [this answer](https://stackoverflow.com/a/37326148/2553215). \r\n\r\nUsing a `InputStreamResource` instead of `FileSystemResource` makes this a little shorter.\r\n\r\n    public class CleanupInputStreamResource extends InputStreamResource {\r\n        public CleanupInputStreamResource(File file) throws FileNotFoundException {\r\n            super(new FileInputStream(file) {\r\n                @Override\r\n                public void close() throws IOException {\r\n                    super.close();\r\n                    Files.delete(file.toPath());\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to delete a file after sending it in a web app?","body":"<p>A minor adaption to <a href=\"https://stackoverflow.com/a/37326148/2553215\">this answer</a>. </p>\n\n<p>Using a <code>InputStreamResource</code> instead of <code>FileSystemResource</code> makes this a little shorter.</p>\n\n<pre><code>public class CleanupInputStreamResource extends InputStreamResource {\n    public CleanupInputStreamResource(File file) throws FileNotFoundException {\n        super(new FileInputStream(file) {\n            @Override\n            public void close() throws IOException {\n                super.close();\n                Files.delete(file.toPath());\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2166683,"reputation":61,"user_id":1919662,"display_name":"user1919662"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1617862885,"creation_date":1617862885,"answer_id":66998326,"question_id":17933508,"body_markdown":"You can write Mag&#39;s solution with anonymous classes like this:\r\n\r\n\tnew FileSystemResource(file) {\r\n\t\t@Override\r\n\t\tpublic InputStream getInputStream() throws IOException {\r\n\t\t\treturn new FileInputStream(file) {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void close() throws IOException {\r\n\t\t\t\t\tsuper.close();\r\n\t\t\t\t\tFiles.delete(file.toPath());\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t}","title":"How to delete a file after sending it in a web app?","body":"<p>You can write Mag's solution with anonymous classes like this:</p>\n<pre><code>new FileSystemResource(file) {\n    @Override\n    public InputStream getInputStream() throws IOException {\n        return new FileInputStream(file) {\n            @Override\n            public void close() throws IOException {\n                super.close();\n                Files.delete(file.toPath());\n            }\n        };\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6250990,"reputation":436,"user_id":4861041,"accept_rate":20,"display_name":"Rahogata"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640923583,"creation_date":1640446943,"answer_id":70481055,"question_id":17933508,"body_markdown":"Used this [answer](https://stackoverflow.com/a/37326148/4861041) and added some modification. Working so far. Due to my limited knowledge I couldn&#39;t create dynamic proxy for my custom inputStream.\r\n\r\n\r\n    import static org.apache.commons.io.FileUtils.deleteQuietly;\r\n    \r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.nio.file.Path;\r\n    \r\n    import org.springframework.core.io.FileSystemResource;\r\n    \r\n    import lombok.RequiredArgsConstructor;\r\n    \r\n    public final class AutoDeleteFileSystemResource extends FileSystemResource {\r\n    \r\n        public AutoDeleteFileSystemResource(Path filePath) {\r\n            super(filePath);\r\n        }\r\n    \r\n        @RequiredArgsConstructor\r\n        private static final class AutoDeleteStream extends InputStream {\r\n    \r\n            private final File file;\r\n            private final InputStream original;\r\n    \r\n            @Override\r\n            public int read() throws IOException {\r\n                return original.read();\r\n            }\r\n    \r\n            @Override\r\n            public void close() throws IOException {\r\n                original.close();\r\n                deleteQuietly(file);\r\n            }\r\n    \r\n            @Override\r\n            public int available() throws IOException {\r\n                return original.available();\r\n            }\r\n    \r\n            @Override\r\n            public int read(byte[] b) throws IOException {\r\n                return original.read(b);\r\n            }\r\n    \r\n            @Override\r\n            public int read(byte[] b, int off, int len) throws IOException {\r\n                return original.read(b, off, len);\r\n            }\r\n    \r\n            @Override\r\n            public long skip(long n) throws IOException {\r\n                return original.skip(n);\r\n            }\r\n    \r\n            @Override\r\n            public boolean equals(Object obj) {\r\n                return original.equals(obj);\r\n            }\r\n    \r\n            @Override\r\n            public int hashCode() {\r\n                return original.hashCode();\r\n            }\r\n    \r\n            @Override\r\n            public synchronized void mark(int readlimit) {\r\n                original.mark(readlimit);\r\n            }\r\n    \r\n            @Override\r\n            public boolean markSupported() {\r\n                return original.markSupported();\r\n            }\r\n    \r\n            @Override\r\n            public synchronized void reset() throws IOException {\r\n                original.reset();\r\n            }\r\n    \r\n            @Override\r\n            public String toString() {\r\n                return original.toString();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @see org.springframework.core.io.FileSystemResource#getInputStream()\r\n         */\r\n        @Override\r\n        public InputStream getInputStream() throws IOException {\r\n            return new AutoDeleteStream(getFile(), super.getInputStream());\r\n        }\r\n    }","title":"How to delete a file after sending it in a web app?","body":"<p>Used this <a href=\"https://stackoverflow.com/a/37326148/4861041\">answer</a> and added some modification. Working so far. Due to my limited knowledge I couldn't create dynamic proxy for my custom inputStream.</p>\n<pre><code>import static org.apache.commons.io.FileUtils.deleteQuietly;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Path;\n\nimport org.springframework.core.io.FileSystemResource;\n\nimport lombok.RequiredArgsConstructor;\n\npublic final class AutoDeleteFileSystemResource extends FileSystemResource {\n\n    public AutoDeleteFileSystemResource(Path filePath) {\n        super(filePath);\n    }\n\n    @RequiredArgsConstructor\n    private static final class AutoDeleteStream extends InputStream {\n\n        private final File file;\n        private final InputStream original;\n\n        @Override\n        public int read() throws IOException {\n            return original.read();\n        }\n\n        @Override\n        public void close() throws IOException {\n            original.close();\n            deleteQuietly(file);\n        }\n\n        @Override\n        public int available() throws IOException {\n            return original.available();\n        }\n\n        @Override\n        public int read(byte[] b) throws IOException {\n            return original.read(b);\n        }\n\n        @Override\n        public int read(byte[] b, int off, int len) throws IOException {\n            return original.read(b, off, len);\n        }\n\n        @Override\n        public long skip(long n) throws IOException {\n            return original.skip(n);\n        }\n\n        @Override\n        public boolean equals(Object obj) {\n            return original.equals(obj);\n        }\n\n        @Override\n        public int hashCode() {\n            return original.hashCode();\n        }\n\n        @Override\n        public synchronized void mark(int readlimit) {\n            original.mark(readlimit);\n        }\n\n        @Override\n        public boolean markSupported() {\n            return original.markSupported();\n        }\n\n        @Override\n        public synchronized void reset() throws IOException {\n            original.reset();\n        }\n\n        @Override\n        public String toString() {\n            return original.toString();\n        }\n    }\n\n    /**\n     * @see org.springframework.core.io.FileSystemResource#getInputStream()\n     */\n    @Override\n    public InputStream getInputStream() throws IOException {\n        return new AutoDeleteStream(getFile(), super.getInputStream());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2848514,"reputation":10932,"user_id":2446208,"accept_rate":69,"display_name":"blacktide"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691817162,"creation_date":1691817162,"answer_id":76887826,"question_id":17933508,"body_markdown":"Here&#39;s a simple way using [StreamingResponseBody](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/StreamingResponseBody.html) from your controller method:\r\n\r\n```java\r\nFile file = getFile();\r\nreturn ResponseEntity.ok()\r\n    .headers(headers)\r\n    .contentLength(length)\r\n    .contentType(MediaType.APPLICATION_OCTET_STREAM)\r\n    .body(os -&gt; {\r\n        Files.copy(file.toPath(), os);\r\n        Files.delete(file.toPath());\r\n    });\r\n```\r\n\r\nThe lambda is shorthand for the following:\r\n\r\n```java\r\nnew StreamingResponseBody() {\r\n    @Override\r\n    public void writeTo(OutputStream os) throws IOException {\r\n        Files.copy(file.toPath(), os);\r\n        Files.delete(file.toPath());\r\n    }\r\n}\r\n```","title":"How to delete a file after sending it in a web app?","body":"<p>Here's a simple way using <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/StreamingResponseBody.html\" rel=\"nofollow noreferrer\">StreamingResponseBody</a> from your controller method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File file = getFile();\nreturn ResponseEntity.ok()\n    .headers(headers)\n    .contentLength(length)\n    .contentType(MediaType.APPLICATION_OCTET_STREAM)\n    .body(os -&gt; {\n        Files.copy(file.toPath(), os);\n        Files.delete(file.toPath());\n    });\n</code></pre>\n<p>The lambda is shorthand for the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new StreamingResponseBody() {\n    @Override\n    public void writeTo(OutputStream os) throws IOException {\n        Files.copy(file.toPath(), os);\n        Files.delete(file.toPath());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3007688,"reputation":558,"user_id":2551839,"accept_rate":87,"display_name":"ia.solano"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26146,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":17933595,"answer_count":6,"score":18,"last_activity_date":1691817162,"creation_date":1375129467,"question_id":17933508,"body_markdown":"I have a web application. I am using java and spring. The application can create a file and send it to the browser, this is working fine. The way I do it is:\r\n\r\nI create the file in a Services class, and the method returns the address to the controller. The controller then sends the file, and it is downloaded correctly. The code for the controller method is this.\r\n\r\n    \r\n    @RequestMapping(&quot;/getFile&quot;)\r\n    public @ResponseBody\r\n    FileSystemResource getFile() {\r\n        \r\n        String address = Services.createFile();\r\n        response.setContentType(&quot;application/vnd.ms-excel&quot;);\r\n        return new FileSystemResource(new File (address));\r\n    }\r\n\r\nThe problem is that the file is saved in the server, and after many requests it will have a lot of files. I have to delete them manually. The question is: How can I delete this file after sending it? or Is there a way to send the file without saving it in the server?\r\n","title":"How to delete a file after sending it in a web app?","body":"<p>I have a web application. I am using java and spring. The application can create a file and send it to the browser, this is working fine. The way I do it is:</p>\n\n<p>I create the file in a Services class, and the method returns the address to the controller. The controller then sends the file, and it is downloaded correctly. The code for the controller method is this.</p>\n\n<pre><code>@RequestMapping(\"/getFile\")\npublic @ResponseBody\nFileSystemResource getFile() {\n\n    String address = Services.createFile();\n    response.setContentType(\"application/vnd.ms-excel\");\n    return new FileSystemResource(new File (address));\n}\n</code></pre>\n\n<p>The problem is that the file is saved in the server, and after many requests it will have a lot of files. I have to delete them manually. The question is: How can I delete this file after sending it? or Is there a way to send the file without saving it in the server?</p>\n"},{"tags":["java","collections","set","hashset","treeset"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1576224675,"post_id":59318398,"comment_id":104837513,"body_markdown":"A `HashSet` *doesn&#39;t have* a defined &quot;last&quot; element.","body":"A <code>HashSet</code> <i>doesn&#39;t have</i> a defined &quot;last&quot; element."},{"owner":{"account_id":3703110,"reputation":3347,"user_id":3082272,"accept_rate":50,"display_name":"bobbel"},"score":1,"creation_date":1576225706,"post_id":59318398,"comment_id":104837941,"body_markdown":"If you want the „last“ element of a HashSet, just grab **any** element of it, it would be the same like @chrylis-onstrike- said. So, it sounds more like a XY-problem. What‘s the real problem of your intention?","body":"If you want the „last“ element of a HashSet, just grab <b>any</b> element of it, it would be the same like @chrylis-onstrike- said. So, it sounds more like a XY-problem. What‘s the real problem of your intention?"},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1691815847,"post_id":59318398,"comment_id":135545848,"body_markdown":"Looking at the [self-answer](https://stackoverflow.com/a/59320014/1108305), it looks like the real request is to get the greatest element in the collection, according to a particular comparison function.  Voting to close this as a duplicate of an existing question that does that.","body":"Looking at the <a href=\"https://stackoverflow.com/a/59320014/1108305\">self-answer</a>, it looks like the real request is to get the greatest element in the collection, according to a particular comparison function.  Voting to close this as a duplicate of an existing question that does that."},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1691815885,"post_id":59318398,"comment_id":135545854,"body_markdown":"Though it looks like I should have voted to close as a duplicate of this one instead, but if I retract my close vote I can&#39;t re-vote to close.  https://stackoverflow.com/q/1669282/1108305","body":"Though it looks like I should have voted to close as a duplicate of this one instead, but if I retract my close vote I can&#39;t re-vote to close.  <a href=\"https://stackoverflow.com/q/1669282/1108305\">stackoverflow.com/q/1669282/1108305</a>"}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576224312,"creation_date":1576224312,"answer_id":59318436,"question_id":59318398,"body_markdown":"&gt;com.barcouncil.entity.EnrollmentStatusTrack cannot be cast to java.lang.Comparable\r\n\r\nThis means your `EnrollmentStatusTrack` class doesn&#39;t implement the `Comparable` interface, so you can&#39;t construct a `TreeSet&lt;EnrollmentStatusTrack&gt;` using a constructor that doesn&#39;t have a `Comparator&lt;EnrollmentStatusTrack&gt;` argument (since the `TreeSet` would have no way of comparing the elements added to it).\r\n\r\nYou can write:\r\n\r\n    Comprator&lt;EnrollmentStatusTrack&gt; comparator = ...\r\n    TreeSet&lt;EnrollmentStatusTrack&gt; hashSetToTreeSet  = new TreeSet&lt;&gt;(comparator);\r\n    hashSetToTreeSet.addAll(set);\r\n         \r\nwhere `comparator` implements the comparison logic.","title":"How to get the last element of a HashSet?","body":"<blockquote>\n  <p>com.barcouncil.entity.EnrollmentStatusTrack cannot be cast to java.lang.Comparable</p>\n</blockquote>\n\n<p>This means your <code>EnrollmentStatusTrack</code> class doesn't implement the <code>Comparable</code> interface, so you can't construct a <code>TreeSet&lt;EnrollmentStatusTrack&gt;</code> using a constructor that doesn't have a <code>Comparator&lt;EnrollmentStatusTrack&gt;</code> argument (since the <code>TreeSet</code> would have no way of comparing the elements added to it).</p>\n\n<p>You can write:</p>\n\n<pre><code>Comprator&lt;EnrollmentStatusTrack&gt; comparator = ...\nTreeSet&lt;EnrollmentStatusTrack&gt; hashSetToTreeSet  = new TreeSet&lt;&gt;(comparator);\nhashSetToTreeSet.addAll(set);\n</code></pre>\n\n<p>where <code>comparator</code> implements the comparison logic.</p>\n"},{"tags":[],"owner":{"account_id":4638574,"reputation":67,"user_id":3759060,"display_name":"Amar Wadhwani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576226937,"creation_date":1576226937,"answer_id":59318989,"question_id":59318398,"body_markdown":"You can define a `compareTo()` method in your `EnrollmentStatusTrack` class by implementing the Comparable interface.\r\nIn the `compareTo()` method, you need to define the meaning of first/last element i.e. the ordering of the elements when the TreeSet is populated.\r\n\r\n```\r\nclass EnrollmentStatusTrack implements Comparable&lt;EnrollmentStatusTrack&gt; {\r\n \r\n    int size;\r\n \r\n    EnrollmentStatusTrack(int s) {\r\n        size = s;\r\n    }\r\n \r\n    public int compareTo(EnrollmentStatusTrack o) {\r\n        return size - o.size;\r\n    }\r\n}\r\n```","title":"How to get the last element of a HashSet?","body":"<p>You can define a <code>compareTo()</code> method in your <code>EnrollmentStatusTrack</code> class by implementing the Comparable interface.\nIn the <code>compareTo()</code> method, you need to define the meaning of first/last element i.e. the ordering of the elements when the TreeSet is populated.</p>\n\n<pre><code>class EnrollmentStatusTrack implements Comparable&lt;EnrollmentStatusTrack&gt; {\n\n    int size;\n\n    EnrollmentStatusTrack(int s) {\n        size = s;\n    }\n\n    public int compareTo(EnrollmentStatusTrack o) {\n        return size - o.size;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15056857,"reputation":61,"user_id":10866894,"display_name":"bharath varma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1576230869,"creation_date":1576230869,"answer_id":59320014,"question_id":59318398,"body_markdown":"my aim is to find last element so i have done like this\r\n\r\n    if(en.getEnrollmentStatusTracks() != null)\r\n    \t\t\t{\r\n    \t\t\tSet&lt;EnrollmentStatusTrack&gt; set= new HashSet&lt;EnrollmentStatusTrack&gt;();\r\n    \t\t\tset=en.getEnrollmentStatusTracks();\r\n    \t\t\tList&lt;EnrollmentStatusTrack&gt; list  = new ArrayList&lt;EnrollmentStatusTrack&gt;(set); \r\n    \t\t\tCollections.sort(list, Comparator.comparingInt(EnrollmentStatusTrack::getEnrollmentStatusTrackId)); \r\n    \t\t\tif(list.size() &gt; 0)\r\n    \t\t\t{\r\n    \t\t\t ent=list.get(list.size() - 1);\r\n    \t\t\t}\r\n    }","title":"How to get the last element of a HashSet?","body":"<p>my aim is to find last element so i have done like this</p>\n\n<pre><code>if(en.getEnrollmentStatusTracks() != null)\n            {\n            Set&lt;EnrollmentStatusTrack&gt; set= new HashSet&lt;EnrollmentStatusTrack&gt;();\n            set=en.getEnrollmentStatusTracks();\n            List&lt;EnrollmentStatusTrack&gt; list  = new ArrayList&lt;EnrollmentStatusTrack&gt;(set); \n            Collections.sort(list, Comparator.comparingInt(EnrollmentStatusTrack::getEnrollmentStatusTrackId)); \n            if(list.size() &gt; 0)\n            {\n             ent=list.get(list.size() - 1);\n            }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576231947,"creation_date":1576231947,"answer_id":59320326,"question_id":59318398,"body_markdown":"It could very well be, that with &quot;last&quot; you do **not** mean the last in an internal ordering of EnrollmentStatusTrack, but the _last added_ (because of the terms _enrollment_, _status_, _track_).\r\n\r\nIn that case use **`LinkedHashSet`** which is ordered on addition, like `LinkedHashMap`.","title":"How to get the last element of a HashSet?","body":"<p>It could very well be, that with \"last\" you do <strong>not</strong> mean the last in an internal ordering of EnrollmentStatusTrack, but the <em>last added</em> (because of the terms <em>enrollment</em>, <em>status</em>, <em>track</em>).</p>\n\n<p>In that case use <strong><code>LinkedHashSet</code></strong> which is ordered on addition, like <code>LinkedHashMap</code>.</p>\n"}],"owner":{"account_id":15056857,"reputation":61,"user_id":10866894,"display_name":"bharath varma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1691846174,"accepted_answer_id":59320014,"answer_count":4,"score":2,"last_activity_date":1691815573,"creation_date":1576224130,"question_id":59318398,"body_markdown":"I want to get last element of `HashSet`.\r\n\r\nSo there is a `last()` method in `TreeSet` so, I thought to convert set to `TreeSet` and apply `last()` method on it so that I will get last element.\r\n\r\nI tried below code :\r\n\r\n```lang-java\r\nSet&lt;EnrollmentStatusTrack&gt; set= new HashSet&lt;EnrollmentStatusTrack&gt;();\r\nset=en.getEnrollmentStatusTracks();\r\nTreeSet&lt;EnrollmentStatusTrack&gt; hashSetToTreeSet  = new TreeSet&lt;EnrollmentStatusTrack&gt;(set);  //here is the exception\r\nEnrollmentStatusTrack entt=hashSetToTreeSet.last();\r\n```\r\n\r\nThen i get below exception:\r\n\r\n```lang-none\r\njava.lang.ClassCastException: com.barcouncil.entity.EnrollmentStatusTrack cannot be cast to java.lang.Comparable\r\n\tat java.util.TreeMap.compare(TreeMap.java:1290)\r\n\tat java.util.TreeMap.put(TreeMap.java:538)\r\n\tat java.util.TreeSet.add(TreeSet.java:255)\r\n\tat java.util.AbstractCollection.addAll(AbstractCollection.java:344)\r\n\tat java.util.TreeSet.addAll(TreeSet.java:312)\r\n\tat java.util.TreeSet.&lt;init&gt;(TreeSet.java:160)\r\n\tat com.barcouncil.dao.EnrollmentDaoImpl.searchReport(EnrollmentDaoImpl.java:994)\r\n\tat com.barcouncil.service.EnrollmentServiceImpl.searchReport(EnrollmentServiceImpl.java:278)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\r\n\tat com.sun.proxy.$Proxy1909.searchReport(Unknown Source)\r\n\tat com.barcouncil.controller.EnrollmentController.searchReport(EnrollmentController.java:984)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:648)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)\r\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1100)\r\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:687)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1520)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1476)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```\r\n\r\nCan any one help me with this?  Or is there any other procedure to do so?\r\n  ","title":"How to get the last element of a HashSet?","body":"<p>I want to get last element of <code>HashSet</code>.</p>\n<p>So there is a <code>last()</code> method in <code>TreeSet</code> so, I thought to convert set to <code>TreeSet</code> and apply <code>last()</code> method on it so that I will get last element.</p>\n<p>I tried below code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;EnrollmentStatusTrack&gt; set= new HashSet&lt;EnrollmentStatusTrack&gt;();\nset=en.getEnrollmentStatusTracks();\nTreeSet&lt;EnrollmentStatusTrack&gt; hashSetToTreeSet  = new TreeSet&lt;EnrollmentStatusTrack&gt;(set);  //here is the exception\nEnrollmentStatusTrack entt=hashSetToTreeSet.last();\n</code></pre>\n<p>Then i get below exception:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.lang.ClassCastException: com.barcouncil.entity.EnrollmentStatusTrack cannot be cast to java.lang.Comparable\n    at java.util.TreeMap.compare(TreeMap.java:1290)\n    at java.util.TreeMap.put(TreeMap.java:538)\n    at java.util.TreeSet.add(TreeSet.java:255)\n    at java.util.AbstractCollection.addAll(AbstractCollection.java:344)\n    at java.util.TreeSet.addAll(TreeSet.java:312)\n    at java.util.TreeSet.&lt;init&gt;(TreeSet.java:160)\n    at com.barcouncil.dao.EnrollmentDaoImpl.searchReport(EnrollmentDaoImpl.java:994)\n    at com.barcouncil.service.EnrollmentServiceImpl.searchReport(EnrollmentServiceImpl.java:278)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212)\n    at com.sun.proxy.$Proxy1909.searchReport(Unknown Source)\n    at com.barcouncil.controller.EnrollmentController.searchReport(EnrollmentController.java:984)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:74)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1100)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:687)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1520)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1476)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n<p>Can any one help me with this?  Or is there any other procedure to do so?</p>\n"},{"tags":["java","spring-boot","soapui","apache-axis","java-17"],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691815423,"creation_date":1691814786,"answer_id":76887738,"question_id":76885860,"body_markdown":"The change in package naming from `javax.*` to `jakarta.*` is a breaking event. Different packages mean different software. The whole point of packages is to create separate distinct [namespaces][1]. \r\n\r\nIf your project depends on *any* Java EE components, then you cannot use Jakarta EE. \r\n\r\nThis transition has been known for years. So many Java EE components have been updated to support the new package names. Check for new versions of your needed components. \r\n\r\nIf stuck on the *javax.* naming, do not despair. The Jakarta implementations such as Jetty and Tomcat are continuing to develop parallel versions of their products in both package naming schemes. So you have time to wait for needed components to be eventually updated to Jakarta. \r\n\r\nRegarding *Axis2* specifically, I found [this open ticket][2] asking for Jakarta support.\r\n\r\n\r\n  [1]: https://en.m.wikipedia.org/wiki/Namespace\r\n  [2]: https://issues.apache.org/jira/plugins/servlet/mobile#issue/AXIS2-6051","title":"How to use axis2 with jakarta?","body":"<p>The change in package naming from <code>javax.*</code> to <code>jakarta.*</code> is a breaking event. Different packages mean different software. The whole point of packages is to create separate distinct <a href=\"https://en.m.wikipedia.org/wiki/Namespace\" rel=\"nofollow noreferrer\">namespaces</a>.</p>\n<p>If your project depends on <em>any</em> Java EE components, then you cannot use Jakarta EE.</p>\n<p>This transition has been known for years. So many Java EE components have been updated to support the new package names. Check for new versions of your needed components.</p>\n<p>If stuck on the <em>javax.</em> naming, do not despair. The Jakarta implementations such as Jetty and Tomcat are continuing to develop parallel versions of their products in both package naming schemes. So you have time to wait for needed components to be eventually updated to Jakarta.</p>\n<p>Regarding <em>Axis2</em> specifically, I found <a href=\"https://issues.apache.org/jira/plugins/servlet/mobile#issue/AXIS2-6051\" rel=\"nofollow noreferrer\">this open ticket</a> asking for Jakarta support.</p>\n"}],"owner":{"account_id":23623466,"reputation":1,"user_id":17656332,"display_name":"Harshini R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":429,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691815423,"creation_date":1691777343,"question_id":76885860,"body_markdown":"Axis2-transport-http uses javax.* and java 17 and tomcat 10 need jakarta EE API\r\nIs it possible to use the Jakarta EE API with the Axis2 library and will migrating to Java 17 and Tomcat 10 work? ","title":"How to use axis2 with jakarta?","body":"<p>Axis2-transport-http uses javax.* and java 17 and tomcat 10 need jakarta EE API\nIs it possible to use the Jakarta EE API with the Axis2 library and will migrating to Java 17 and Tomcat 10 work?</p>\n"},{"tags":["java","mongodb","spring-data-mongodb","java-17","mongodb-csfle"],"answers":[{"tags":[],"owner":{"account_id":13141180,"reputation":4284,"user_id":9492730,"display_name":"dododo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690725910,"creation_date":1690725910,"answer_id":76798102,"question_id":76795168,"body_markdown":"Writing it as answer since it&#39;s quite big:\r\n\r\n1. `Where does the actual encryption happens ?` - inside java driver (in particular inside a libmongocrypt library), but mongocryptd is also required daemon for this workflow.\r\n2. `Is there any settings we have to enable in the mongo cluster in order to enable auto field encryption.` - there are options to disable encrypting, but by default it should work as long as you specified correct schemaMap.\r\n3. `are those inter compatible with each other` - it should, but even if no, such simple functionality were in csfle logic from the beginning.\r\n4. Where is `@Encrypted` attribute came from, I&#39;m not java developer, but I didn&#39;t find it in documentation. See articles how it should be configured [here][1]. Also, in order to troubleshot further, provide schemaMap value you add to the clientSettings.\r\n\r\n\r\n  [1]: https://www.mongodb.com/docs/manual/core/csfle/fundamentals/automatic-encryption/","title":"MongoDB Automatic client side Field level Encryption | mongoCryptD daemon not marking the fields to be encrypted","body":"<p>Writing it as answer since it's quite big:</p>\n<ol>\n<li><code>Where does the actual encryption happens ?</code> - inside java driver (in particular inside a libmongocrypt library), but mongocryptd is also required daemon for this workflow.</li>\n<li><code>Is there any settings we have to enable in the mongo cluster in order to enable auto field encryption.</code> - there are options to disable encrypting, but by default it should work as long as you specified correct schemaMap.</li>\n<li><code>are those inter compatible with each other</code> - it should, but even if no, such simple functionality were in csfle logic from the beginning.</li>\n<li>Where is <code>@Encrypted</code> attribute came from, I'm not java developer, but I didn't find it in documentation. See articles how it should be configured <a href=\"https://www.mongodb.com/docs/manual/core/csfle/fundamentals/automatic-encryption/\" rel=\"nofollow noreferrer\">here</a>. Also, in order to troubleshot further, provide schemaMap value you add to the clientSettings.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4671960,"reputation":27,"user_id":3783528,"display_name":"Wolf17"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690743089,"creation_date":1690741919,"answer_id":76799156,"question_id":76795168,"body_markdown":"I am putting the code that generates the schemaMap below -&gt;\r\n```\r\nprivate Map&lt;String, BsonDocument&gt; generateSchemaMap() {\r\n\tMongoJsonSchemaCreator schemaCreator = MongoJsonSchemaCreator.create(mappingContext);\r\n\tMap&lt;String, BsonDocument&gt; schemaMap = new HashMap&lt;&gt;();\r\n\tClass encryptedEntityClass = MyDocument.class ;  //Class that has fields to be encrypted -&gt; MyDocument\r\n\tMongoJsonSchema schema = schemaCreator\r\n\t\t\t.filter(MongoJsonSchemaCreator.encryptedOnly); // this checks for entity marked with @Encrypted annotation only.\r\n\t\t\t.createSchemaFor(encryptedEntityClass);\r\n\t\r\n\tschemaMap.put(&quot;dbName.MyDocument&quot;, \r\n\t\t\tschema.schemaDocument().toBsonDocument(encryptedEntityClass,\r\n\t\t\t     MongoClientSettings.getDefaultCodecRegistry()));\r\n\treturn schemaMap;\r\n\t\t\r\n}\r\n\r\n```\r\n\r\nthis SchemaMap then I put inside my AutoEncryptionSettings -&gt;\r\n```\r\nMongoClientSettings.Builder.autoEncryptionSettings(\r\n          AutoEncryptionSettings.builder()\r\n            .keyVaultNamespace(encryptionConfig.getKeyVaultNamespace())\r\n            .kmsProviders(LocalKmsUtils.providersMap(encryptionConfig.getMasterKeyPath()))\r\n\t\t\t.schemaMap(generateSchemaMap())\r\n          .build())\r\n\t\t .build();\r\n```","title":"MongoDB Automatic client side Field level Encryption | mongoCryptD daemon not marking the fields to be encrypted","body":"<p>I am putting the code that generates the schemaMap below -&gt;</p>\n<pre><code>private Map&lt;String, BsonDocument&gt; generateSchemaMap() {\n    MongoJsonSchemaCreator schemaCreator = MongoJsonSchemaCreator.create(mappingContext);\n    Map&lt;String, BsonDocument&gt; schemaMap = new HashMap&lt;&gt;();\n    Class encryptedEntityClass = MyDocument.class ;  //Class that has fields to be encrypted -&gt; MyDocument\n    MongoJsonSchema schema = schemaCreator\n            .filter(MongoJsonSchemaCreator.encryptedOnly); // this checks for entity marked with @Encrypted annotation only.\n            .createSchemaFor(encryptedEntityClass);\n    \n    schemaMap.put(&quot;dbName.MyDocument&quot;, \n            schema.schemaDocument().toBsonDocument(encryptedEntityClass,\n                 MongoClientSettings.getDefaultCodecRegistry()));\n    return schemaMap;\n        \n}\n\n</code></pre>\n<p>this SchemaMap then I put inside my AutoEncryptionSettings -&gt;</p>\n<pre><code>MongoClientSettings.Builder.autoEncryptionSettings(\n          AutoEncryptionSettings.builder()\n            .keyVaultNamespace(encryptionConfig.getKeyVaultNamespace())\n            .kmsProviders(LocalKmsUtils.providersMap(encryptionConfig.getMasterKeyPath()))\n            .schemaMap(generateSchemaMap())\n          .build())\n         .build();\n</code></pre>\n"}],"owner":{"account_id":4671960,"reputation":27,"user_id":3783528,"display_name":"Wolf17"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76798102,"answer_count":2,"score":1,"last_activity_date":1691814513,"creation_date":1690659163,"question_id":76795168,"body_markdown":"I am using MongoDB&#39;s automatic client side field level encryption, But I observed that the fields are not getting encrypted in the collection.\r\n\r\n - The MongoDB-crypt library that I am using is 1.6.1\r\n - mongo driver core and sync version are 4.9.1\r\n - The MongoCryptD version is 5.0.3\r\n - The OS is linux (RHEL 7.9)\r\n - MongoDB version 4.2.11 Enterprise edition.\r\n - Java JDK- 17\r\n\r\nThe Class that represents my document that I want to perform field encryption on is annotated with @Encrypted annotation with the data key ID and the Encryption algorithm \r\nand also the fields in that class I want to encrypt is simply annotated with @Encypted annotation.\r\n\r\nSo it looks something like this -&gt;\r\n\r\n\r\n```\r\n@Data  // lombok\r\n@Document\r\n@Encrypted (keyID=&quot;&lt;the key id&gt;&quot;, algorithm= &quot;&lt;The algorithm&gt;&quot;)\r\npublic class MyDocument{\r\n   @Id\r\n   private UUID dataID;\r\n\r\n   @Encrypted\r\n   private String fieldToBeEncrypted;\r\n   \r\n   private String otherField;\r\n} \r\n\r\n```\r\n\r\nI am using MongoJsonSchemaCreator&#39;s createSchemaFor() method with a filter method MongoJsonSchemaCreator.encryptedOnly() in order to generate a Json Schema after which I then create a SchemaMap from.\r\n\r\nthis schemaMap I am then populating while creating AutoEncryptionSettings.-&gt;\r\n\r\n\r\n```\r\nMongoClientSettings clientSettings = MongoClientSettings.builder()\r\n.autoEncryptionSettings(AutoEncryptionSettings.builder()\r\n        .keyVaultNamespace(keyVaultNamespace)\r\n        .kmsProviders(kmsProviders)\r\n        .schemaMap(schemaMap)\r\n        .extraOptions(extraOptions)\r\n        .build())\r\n...(other settings)\r\n    .build();\r\n```\r\n\r\nThe master key that I am putting in the kmsProviders is a 96 bytes random character that I generate with OpenSSL random command.\r\n\r\n____\r\nNow the problem is that I am not seeing any data being encrypted and also I do not see any failure message in the console logs.\r\n\r\nNow my question is -&gt;\r\n1. Where does the actual encryption happens ? it is definitly not in the mongocryptd as the docs states so.\r\n   So what is actually handling the encryption ?\r\n2. Is there any settings we have to enable in the mongo cluster in order to enable auto field encryption.\r\n3. The versions that I have stated at the top of my question are those inter compatible with each other and the linux OS as well ?\r\n4. Is there any checklist in general that I can use in order to troubleshoot this issue of encryption not happening ?\r\n\r\n\r\n\r\n\r\nIt seems that the mongocryptd process is not marking the fields to be encrypted for writes and thus no encryption is taking place but not sure\r\n\r\n\r\n-------\r\nEdit 1:\r\n\r\nSharing the rough SchemaMap that I tried in my AutoEncryptionSettings but this to has failed -&gt;\r\n\r\n```\r\nschemaMap.put(getDatabaseName() + &quot;.MyDocument&quot;, BsonDocument.parse(&quot;{&quot;\r\n  + &quot;  bsonType: \\&quot;object\\&quot;,&quot;\r\n  + &quot;  encryptMetadata: {&quot;\r\n  + &quot;    keyId: [UUID(\\&quot;&quot; + keyUuid + &quot;\\&quot;)]&quot;\r\n  + &quot;  },&quot;\r\n  + &quot;  properties: {&quot;\r\n  + &quot;    fieldToBeEncrypted: {&quot;\r\n  + &quot;      encrypt: {&quot;\r\n  + &quot;        bsonType: \\&quot;string\\&quot;,&quot;\r\n  + &quot;        algorithm: \\&quot;AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic\\&quot;&quot;\r\n  + &quot;      }&quot;\r\n  + &quot;    }&quot;\r\n  + &quot;  }&quot;\r\n  + &quot;}&quot;));\r\n```\r\nHere the &quot;keyUuid&quot; is the UUID of the datakey that was generated with ClientEncryption class&#39;s createDataKey() method. I had commented the @Encrypted annotation on MyDocument class temporarily in order to pass this hard coded SchemaMap.\r\n\r\nEdit 2:\r\n\r\nSo we found that the issue was related to the schemaMap. The key name in the schemaMap was not matching with the document name.\r\nThe mongo document name was &quot;myDocument&quot; and what I put in the key of schemaMap was &quot;MyDocument&quot; with &quot;M&quot; in caps, thus it was not able to find the proper mapping and was failing.","title":"MongoDB Automatic client side Field level Encryption | mongoCryptD daemon not marking the fields to be encrypted","body":"<p>I am using MongoDB's automatic client side field level encryption, But I observed that the fields are not getting encrypted in the collection.</p>\n<ul>\n<li>The MongoDB-crypt library that I am using is 1.6.1</li>\n<li>mongo driver core and sync version are 4.9.1</li>\n<li>The MongoCryptD version is 5.0.3</li>\n<li>The OS is linux (RHEL 7.9)</li>\n<li>MongoDB version 4.2.11 Enterprise edition.</li>\n<li>Java JDK- 17</li>\n</ul>\n<p>The Class that represents my document that I want to perform field encryption on is annotated with @Encrypted annotation with the data key ID and the Encryption algorithm\nand also the fields in that class I want to encrypt is simply annotated with @Encypted annotation.</p>\n<p>So it looks something like this -&gt;</p>\n<pre><code>@Data  // lombok\n@Document\n@Encrypted (keyID=&quot;&lt;the key id&gt;&quot;, algorithm= &quot;&lt;The algorithm&gt;&quot;)\npublic class MyDocument{\n   @Id\n   private UUID dataID;\n\n   @Encrypted\n   private String fieldToBeEncrypted;\n   \n   private String otherField;\n} \n\n</code></pre>\n<p>I am using MongoJsonSchemaCreator's createSchemaFor() method with a filter method MongoJsonSchemaCreator.encryptedOnly() in order to generate a Json Schema after which I then create a SchemaMap from.</p>\n<p>this schemaMap I am then populating while creating AutoEncryptionSettings.-&gt;</p>\n<pre><code>MongoClientSettings clientSettings = MongoClientSettings.builder()\n.autoEncryptionSettings(AutoEncryptionSettings.builder()\n        .keyVaultNamespace(keyVaultNamespace)\n        .kmsProviders(kmsProviders)\n        .schemaMap(schemaMap)\n        .extraOptions(extraOptions)\n        .build())\n...(other settings)\n    .build();\n</code></pre>\n<p>The master key that I am putting in the kmsProviders is a 96 bytes random character that I generate with OpenSSL random command.</p>\n<hr />\n<p>Now the problem is that I am not seeing any data being encrypted and also I do not see any failure message in the console logs.</p>\n<p>Now my question is -&gt;</p>\n<ol>\n<li>Where does the actual encryption happens ? it is definitly not in the mongocryptd as the docs states so.\nSo what is actually handling the encryption ?</li>\n<li>Is there any settings we have to enable in the mongo cluster in order to enable auto field encryption.</li>\n<li>The versions that I have stated at the top of my question are those inter compatible with each other and the linux OS as well ?</li>\n<li>Is there any checklist in general that I can use in order to troubleshoot this issue of encryption not happening ?</li>\n</ol>\n<p>It seems that the mongocryptd process is not marking the fields to be encrypted for writes and thus no encryption is taking place but not sure</p>\n<hr />\n<p>Edit 1:</p>\n<p>Sharing the rough SchemaMap that I tried in my AutoEncryptionSettings but this to has failed -&gt;</p>\n<pre><code>schemaMap.put(getDatabaseName() + &quot;.MyDocument&quot;, BsonDocument.parse(&quot;{&quot;\n  + &quot;  bsonType: \\&quot;object\\&quot;,&quot;\n  + &quot;  encryptMetadata: {&quot;\n  + &quot;    keyId: [UUID(\\&quot;&quot; + keyUuid + &quot;\\&quot;)]&quot;\n  + &quot;  },&quot;\n  + &quot;  properties: {&quot;\n  + &quot;    fieldToBeEncrypted: {&quot;\n  + &quot;      encrypt: {&quot;\n  + &quot;        bsonType: \\&quot;string\\&quot;,&quot;\n  + &quot;        algorithm: \\&quot;AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic\\&quot;&quot;\n  + &quot;      }&quot;\n  + &quot;    }&quot;\n  + &quot;  }&quot;\n  + &quot;}&quot;));\n</code></pre>\n<p>Here the &quot;keyUuid&quot; is the UUID of the datakey that was generated with ClientEncryption class's createDataKey() method. I had commented the @Encrypted annotation on MyDocument class temporarily in order to pass this hard coded SchemaMap.</p>\n<p>Edit 2:</p>\n<p>So we found that the issue was related to the schemaMap. The key name in the schemaMap was not matching with the document name.\nThe mongo document name was &quot;myDocument&quot; and what I put in the key of schemaMap was &quot;MyDocument&quot; with &quot;M&quot; in caps, thus it was not able to find the proper mapping and was failing.</p>\n"},{"tags":["java","azure","azure-cognitive-services","microsoft-custom-vision","azure-ai"],"owner":{"account_id":11018626,"reputation":21,"user_id":8093679,"display_name":"Ppp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691813710,"creation_date":1691813710,"question_id":76887702,"body_markdown":"I am trying to train an Azure Custom Vision model by following the instructions on this Learn page: [Quickstart: Create an image classification project with the Custom Vision client library or REST API](https://learn.microsoft.com/en-us/azure/ai-services/custom-vision-service/quickstarts/image-classification?tabs=linux%2Cvisual-studio&amp;pivots=programming-language-java) using Java.\r\nWhen I finally try to run the Gradle build, I am getting the below error\r\n\r\n```\r\nException in thread &quot;main&quot; com.microsoft.azure.cognitiveservices.vision.customvision.training.models.CustomVisionErrorException: Status code 404, {&quot;error&quot;:{&quot;code&quot;:&quot;404&quot;,&quot;message&quot;: &quot;Resource not found&quot;}}\r\n```\r\nI am getting this error specifically in the following line:\r\n\r\n```\r\nProject project=createProject(trainClient);\r\n```\r\nThe createProject function which I have taken from the Learn page I linked earlier is:\r\n\r\n```\r\npublic static Project createProject(CustomVisionTrainingClient trainClient)\r\n{    \r\n\tTrainings trainer=trainClient.trainings();    \r\n\tSystem.out.println(&quot;Creating Project&quot;);    \r\n\tProject project=trainer.createProject().withName(&quot;Moon-Phases-Trainer&quot;).execute();    \r\n\treturn project;\r\n}\r\n```\r\nThe line that is causing an issue in specific in the function is\r\n\r\n```\r\nProject project=trainer.createProject().withName(&quot;Moon-Phases-Trainer&quot;).execute();\r\n```\r\nHere&#39;s the full code for your reference:\r\n\r\n```\r\nclass CustomVisionQuickstart\r\n{\r\n    final static String trainingApiKey=System.getenv(&quot;VISION_TRAINING_KEY&quot;);\r\n    final static String trainingEndpoint=System.getenv(&quot;VISION_TRAINING_ENDPOINT&quot;);\r\n    final static String predictionApiKey=System.getenv(&quot;VISION_PREDICTION_KEY&quot;);\r\n    final static String predictionEndpoint=System.getenv(&quot;VISION_PREDICTION_ENDPOINT&quot;);\r\n    final static String predictionResourceID=System.getenv(&quot;VISION_PREDICTION_RESOURCE_ID&quot;);\r\n\r\n    private static Tag newMoonTag, waxingCrescentTag, firstQuarterTag, waxingGibbousTag,\r\n            fullTag, waningGibbousTag, thirdQuarterTag, waningCrescentTag;\r\n\r\n\r\n    public static void main(String[] args) throws InterruptedException\r\n    {\r\n//        System.out.println(trainingApiKey);\r\n//        System.out.println(trainingEndpoint);\r\n        CustomVisionTrainingClient trainClient=CustomVisionTrainingManager\r\n                .authenticate(trainingEndpoint,trainingApiKey)\r\n                .withEndpoint(trainingEndpoint);\r\n\r\n        CustomVisionPredictionClient predictor=CustomVisionPredictionManager\r\n                .authenticate(predictionEndpoint,predictionApiKey)\r\n                .withEndpoint(predictionEndpoint);\r\n\r\n        Project project=createProject(trainClient);\r\n        addTags(trainClient, project);\r\n        uploadImages(trainClient, project);\r\n        trainProject(trainClient, project);\r\n        publishIteration(trainClient, project);\r\n        testProject(predictor, project);\r\n    }\r\n    public static Project createProject(CustomVisionTrainingClient trainClient)\r\n    {\r\n        Trainings trainer=trainClient.trainings();\r\n        System.out.println(&quot;Creating Project&quot;);\r\n        Project project=trainer.createProject().withName(&quot;Moon-Phases-Trainer&quot;).execute();\r\n        return project;\r\n    }\r\n    public static void addTags(CustomVisionTrainingClient trainClient, Project project)\r\n    {\r\n        Trainings trainer = trainClient.trainings();\r\n\r\n        newMoonTag = trainer.createTag().withProjectId(project.id()).withName(&quot;New Moon&quot;).execute();\r\n        waxingCrescentTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Waxing Crescent Moon&quot;).execute();\r\n        firstQuarterTag = trainer.createTag().withProjectId(project.id()).withName(&quot;First Quarter Moon&quot;).execute();\r\n        waxingGibbousTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Waxing Gibbous Moon&quot;).execute();\r\n        fullTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Full Moon&quot;).execute();\r\n        waningGibbousTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Waning Gibbous Moon&quot;).execute();\r\n        thirdQuarterTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Third Quarter Moon&quot;).execute();\r\n        waningCrescentTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Waning Crescent Moon&quot;).execute();\r\n    }\r\n    public static void uploadImages(CustomVisionTrainingClient trainClient, Project project)\r\n    {\r\n        Trainings trainer=trainClient.trainings();\r\n        for (int x=0;x&lt;4;x++)\r\n        {\r\n            String fileName=&quot;New_Moon_&quot;+x+&quot;.jpg&quot;;\r\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\r\n            addImageToProject(trainer,project,fileName,contents,newMoonTag.id(),null);\r\n        }\r\n        for (int x=0;x&lt;9;x++)\r\n        {\r\n            String fileName=&quot;Waxing_Crescent_&quot;+x+&quot;.jpg&quot;;\r\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\r\n            addImageToProject(trainer,project,fileName,contents,waxingCrescentTag.id(),null);\r\n        }\r\n        for (int x=0;x&lt;8;x++)\r\n        {\r\n            String fileName=&quot;First_Quarter_&quot;+x+&quot;.jpg&quot;;\r\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\r\n            addImageToProject(trainer,project,fileName,contents,firstQuarterTag.id(),null);\r\n        }\r\n        for (int x=0;x&lt;13;x++)\r\n        {\r\n            String fileName=&quot;Waxing_Gibbous_&quot;+x+&quot;.jpg&quot;;\r\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\r\n            addImageToProject(trainer,project,fileName,contents,waxingGibbousTag.id(),null);\r\n        }\r\n        for (int x=0;x&lt;5;x++)\r\n        {\r\n            String fileName=&quot;Full_Moon_&quot;+x+&quot;.jpg&quot;;\r\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\r\n            addImageToProject(trainer,project,fileName,contents,fullTag.id(),null);\r\n        }\r\n        for (int x=0;x&lt;15;x++)\r\n        {\r\n            String fileName=&quot;Waning_Gibbous_&quot;+x+&quot;.jpg&quot;;\r\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\r\n            addImageToProject(trainer,project,fileName,contents,waningGibbousTag.id(),null);\r\n        }\r\n        for (int x=0;x&lt;6;x++)\r\n        {\r\n            String fileName=&quot;Third_Quarter_&quot;+x+&quot;.jpg&quot;;\r\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\r\n            addImageToProject(trainer,project,fileName,contents,thirdQuarterTag.id(),null);\r\n        }\r\n        for (int x=0;x&lt;13;x++)\r\n        {\r\n            String fileName=&quot;Waning_Crescent_&quot;+x+&quot;.jpg&quot;;\r\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\r\n            addImageToProject(trainer,project,fileName,contents,waningCrescentTag.id(),null);\r\n        }\r\n    }\r\n    private static void addImageToProject(Trainings trainer, Project project, String fileName, byte[] contents, UUID tag, double[] regionValues)\r\n    {\r\n        System.out.println(&quot;Adding image: &quot;+fileName);\r\n        ImageFileCreateEntry file=new ImageFileCreateEntry().withName(fileName).withContents(contents);\r\n        ImageFileCreateBatch batch=new ImageFileCreateBatch().withImages(Collections.singletonList(file));\r\n        if(regionValues!=null)\r\n        {\r\n            Region region=new Region().withTagId(tag).withLeft(regionValues[0]).withTop(regionValues[1]).withWidth(regionValues[2]).withHeight(regionValues[3]);\r\n            file=file.withRegions(Collections.singletonList(region));\r\n        }\r\n        else\r\n            batch = batch.withTagIds(Collections.singletonList(tag));\r\n        trainer.createImagesFromFiles(project.id(),batch);\r\n    }\r\n    private static byte[] getImage(String folder, String fileName)\r\n    {\r\n        try\r\n        {\r\n            return ByteStreams.toByteArray(CustomVisionQuickstart.class.getResourceAsStream(folder+&quot;/&quot;+fileName));\r\n        }\r\n        catch(Exception e)\r\n        {\r\n            System.out.println(e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n    public static Iteration trainProject(CustomVisionTrainingClient trainClient, Project project) throws InterruptedException\r\n    {\r\n        System.out.println(&quot;Training...&quot;);\r\n        Trainings trainer=trainClient.trainings();\r\n        Iteration iteration=trainer.trainProject(project.id(),new TrainProjectOptionalParameter());\r\n\r\n        while(iteration.status().equals(&quot;Training&quot;))\r\n        {\r\n            System.out.println(&quot;Training Status: &quot; + iteration.status());\r\n            Thread.sleep(1000);\r\n            iteration = trainer.getIteration(project.id(), iteration.id());\r\n        }\r\n        System.out.println(&quot;Training Status: &quot; + iteration.status());\r\n        return iteration;\r\n    }\r\n    public static void publishIteration(CustomVisionTrainingClient trainClient, Project project) throws InterruptedException\r\n    {\r\n        Trainings trainer=trainClient.trainings();\r\n        Iteration iteration=trainProject(trainClient,project);\r\n        String publishedModelName=&quot;myMoonPhaseModel&quot;;\r\n        trainer.publishIteration(project.id(),iteration.id(),publishedModelName,predictionResourceID);\r\n    }\r\n    public static void testProject(CustomVisionPredictionClient predictor, Project project)\r\n    {\r\n        byte[] testImeage=getImage(&quot;/Moons&quot;,&quot;testImage.jpg&quot;);\r\n        String publishedModelName = &quot;myMoonPhaseModel&quot;;\r\n        ImagePrediction results=predictor.predictions().classifyImage().withProjectId(project.id()).withPublishedName(publishedModelName).withImageData(testImeage).execute();\r\n        for (Prediction prediction : results.predictions())\r\n            System.out.println(String.format(&quot;\\t%s: %.2f%%&quot;, prediction.tagName(), prediction.probability() * 100.0f));\r\n    }\r\n}\r\n```\r\nI am trying to connect to the Azure Custom vision training API but am getting a resource not found error when I should be seeing a project being created in the vision studio.\r\nPlease let me what is causing this error and how to resolve it.\r\nThank you.\r\n","title":"How to fix Error 404 Resource not Found in Azure Custom Vision API","body":"<p>I am trying to train an Azure Custom Vision model by following the instructions on this Learn page: <a href=\"https://learn.microsoft.com/en-us/azure/ai-services/custom-vision-service/quickstarts/image-classification?tabs=linux%2Cvisual-studio&amp;pivots=programming-language-java\" rel=\"nofollow noreferrer\">Quickstart: Create an image classification project with the Custom Vision client library or REST API</a> using Java.\nWhen I finally try to run the Gradle build, I am getting the below error</p>\n<pre><code>Exception in thread &quot;main&quot; com.microsoft.azure.cognitiveservices.vision.customvision.training.models.CustomVisionErrorException: Status code 404, {&quot;error&quot;:{&quot;code&quot;:&quot;404&quot;,&quot;message&quot;: &quot;Resource not found&quot;}}\n</code></pre>\n<p>I am getting this error specifically in the following line:</p>\n<pre><code>Project project=createProject(trainClient);\n</code></pre>\n<p>The createProject function which I have taken from the Learn page I linked earlier is:</p>\n<pre><code>public static Project createProject(CustomVisionTrainingClient trainClient)\n{    \n    Trainings trainer=trainClient.trainings();    \n    System.out.println(&quot;Creating Project&quot;);    \n    Project project=trainer.createProject().withName(&quot;Moon-Phases-Trainer&quot;).execute();    \n    return project;\n}\n</code></pre>\n<p>The line that is causing an issue in specific in the function is</p>\n<pre><code>Project project=trainer.createProject().withName(&quot;Moon-Phases-Trainer&quot;).execute();\n</code></pre>\n<p>Here's the full code for your reference:</p>\n<pre><code>class CustomVisionQuickstart\n{\n    final static String trainingApiKey=System.getenv(&quot;VISION_TRAINING_KEY&quot;);\n    final static String trainingEndpoint=System.getenv(&quot;VISION_TRAINING_ENDPOINT&quot;);\n    final static String predictionApiKey=System.getenv(&quot;VISION_PREDICTION_KEY&quot;);\n    final static String predictionEndpoint=System.getenv(&quot;VISION_PREDICTION_ENDPOINT&quot;);\n    final static String predictionResourceID=System.getenv(&quot;VISION_PREDICTION_RESOURCE_ID&quot;);\n\n    private static Tag newMoonTag, waxingCrescentTag, firstQuarterTag, waxingGibbousTag,\n            fullTag, waningGibbousTag, thirdQuarterTag, waningCrescentTag;\n\n\n    public static void main(String[] args) throws InterruptedException\n    {\n//        System.out.println(trainingApiKey);\n//        System.out.println(trainingEndpoint);\n        CustomVisionTrainingClient trainClient=CustomVisionTrainingManager\n                .authenticate(trainingEndpoint,trainingApiKey)\n                .withEndpoint(trainingEndpoint);\n\n        CustomVisionPredictionClient predictor=CustomVisionPredictionManager\n                .authenticate(predictionEndpoint,predictionApiKey)\n                .withEndpoint(predictionEndpoint);\n\n        Project project=createProject(trainClient);\n        addTags(trainClient, project);\n        uploadImages(trainClient, project);\n        trainProject(trainClient, project);\n        publishIteration(trainClient, project);\n        testProject(predictor, project);\n    }\n    public static Project createProject(CustomVisionTrainingClient trainClient)\n    {\n        Trainings trainer=trainClient.trainings();\n        System.out.println(&quot;Creating Project&quot;);\n        Project project=trainer.createProject().withName(&quot;Moon-Phases-Trainer&quot;).execute();\n        return project;\n    }\n    public static void addTags(CustomVisionTrainingClient trainClient, Project project)\n    {\n        Trainings trainer = trainClient.trainings();\n\n        newMoonTag = trainer.createTag().withProjectId(project.id()).withName(&quot;New Moon&quot;).execute();\n        waxingCrescentTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Waxing Crescent Moon&quot;).execute();\n        firstQuarterTag = trainer.createTag().withProjectId(project.id()).withName(&quot;First Quarter Moon&quot;).execute();\n        waxingGibbousTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Waxing Gibbous Moon&quot;).execute();\n        fullTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Full Moon&quot;).execute();\n        waningGibbousTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Waning Gibbous Moon&quot;).execute();\n        thirdQuarterTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Third Quarter Moon&quot;).execute();\n        waningCrescentTag = trainer.createTag().withProjectId(project.id()).withName(&quot;Waning Crescent Moon&quot;).execute();\n    }\n    public static void uploadImages(CustomVisionTrainingClient trainClient, Project project)\n    {\n        Trainings trainer=trainClient.trainings();\n        for (int x=0;x&lt;4;x++)\n        {\n            String fileName=&quot;New_Moon_&quot;+x+&quot;.jpg&quot;;\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\n            addImageToProject(trainer,project,fileName,contents,newMoonTag.id(),null);\n        }\n        for (int x=0;x&lt;9;x++)\n        {\n            String fileName=&quot;Waxing_Crescent_&quot;+x+&quot;.jpg&quot;;\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\n            addImageToProject(trainer,project,fileName,contents,waxingCrescentTag.id(),null);\n        }\n        for (int x=0;x&lt;8;x++)\n        {\n            String fileName=&quot;First_Quarter_&quot;+x+&quot;.jpg&quot;;\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\n            addImageToProject(trainer,project,fileName,contents,firstQuarterTag.id(),null);\n        }\n        for (int x=0;x&lt;13;x++)\n        {\n            String fileName=&quot;Waxing_Gibbous_&quot;+x+&quot;.jpg&quot;;\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\n            addImageToProject(trainer,project,fileName,contents,waxingGibbousTag.id(),null);\n        }\n        for (int x=0;x&lt;5;x++)\n        {\n            String fileName=&quot;Full_Moon_&quot;+x+&quot;.jpg&quot;;\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\n            addImageToProject(trainer,project,fileName,contents,fullTag.id(),null);\n        }\n        for (int x=0;x&lt;15;x++)\n        {\n            String fileName=&quot;Waning_Gibbous_&quot;+x+&quot;.jpg&quot;;\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\n            addImageToProject(trainer,project,fileName,contents,waningGibbousTag.id(),null);\n        }\n        for (int x=0;x&lt;6;x++)\n        {\n            String fileName=&quot;Third_Quarter_&quot;+x+&quot;.jpg&quot;;\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\n            addImageToProject(trainer,project,fileName,contents,thirdQuarterTag.id(),null);\n        }\n        for (int x=0;x&lt;13;x++)\n        {\n            String fileName=&quot;Waning_Crescent_&quot;+x+&quot;.jpg&quot;;\n            byte contents[]=getImage(&quot;/Moons&quot;,fileName);\n            addImageToProject(trainer,project,fileName,contents,waningCrescentTag.id(),null);\n        }\n    }\n    private static void addImageToProject(Trainings trainer, Project project, String fileName, byte[] contents, UUID tag, double[] regionValues)\n    {\n        System.out.println(&quot;Adding image: &quot;+fileName);\n        ImageFileCreateEntry file=new ImageFileCreateEntry().withName(fileName).withContents(contents);\n        ImageFileCreateBatch batch=new ImageFileCreateBatch().withImages(Collections.singletonList(file));\n        if(regionValues!=null)\n        {\n            Region region=new Region().withTagId(tag).withLeft(regionValues[0]).withTop(regionValues[1]).withWidth(regionValues[2]).withHeight(regionValues[3]);\n            file=file.withRegions(Collections.singletonList(region));\n        }\n        else\n            batch = batch.withTagIds(Collections.singletonList(tag));\n        trainer.createImagesFromFiles(project.id(),batch);\n    }\n    private static byte[] getImage(String folder, String fileName)\n    {\n        try\n        {\n            return ByteStreams.toByteArray(CustomVisionQuickstart.class.getResourceAsStream(folder+&quot;/&quot;+fileName));\n        }\n        catch(Exception e)\n        {\n            System.out.println(e.getMessage());\n            e.printStackTrace();\n        }\n        return null;\n    }\n    public static Iteration trainProject(CustomVisionTrainingClient trainClient, Project project) throws InterruptedException\n    {\n        System.out.println(&quot;Training...&quot;);\n        Trainings trainer=trainClient.trainings();\n        Iteration iteration=trainer.trainProject(project.id(),new TrainProjectOptionalParameter());\n\n        while(iteration.status().equals(&quot;Training&quot;))\n        {\n            System.out.println(&quot;Training Status: &quot; + iteration.status());\n            Thread.sleep(1000);\n            iteration = trainer.getIteration(project.id(), iteration.id());\n        }\n        System.out.println(&quot;Training Status: &quot; + iteration.status());\n        return iteration;\n    }\n    public static void publishIteration(CustomVisionTrainingClient trainClient, Project project) throws InterruptedException\n    {\n        Trainings trainer=trainClient.trainings();\n        Iteration iteration=trainProject(trainClient,project);\n        String publishedModelName=&quot;myMoonPhaseModel&quot;;\n        trainer.publishIteration(project.id(),iteration.id(),publishedModelName,predictionResourceID);\n    }\n    public static void testProject(CustomVisionPredictionClient predictor, Project project)\n    {\n        byte[] testImeage=getImage(&quot;/Moons&quot;,&quot;testImage.jpg&quot;);\n        String publishedModelName = &quot;myMoonPhaseModel&quot;;\n        ImagePrediction results=predictor.predictions().classifyImage().withProjectId(project.id()).withPublishedName(publishedModelName).withImageData(testImeage).execute();\n        for (Prediction prediction : results.predictions())\n            System.out.println(String.format(&quot;\\t%s: %.2f%%&quot;, prediction.tagName(), prediction.probability() * 100.0f));\n    }\n}\n</code></pre>\n<p>I am trying to connect to the Azure Custom vision training API but am getting a resource not found error when I should be seeing a project being created in the vision studio.\nPlease let me what is causing this error and how to resolve it.\nThank you.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":4361079,"reputation":5302,"user_id":3558145,"accept_rate":67,"display_name":"Shaishav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1469853673,"creation_date":1469853673,"answer_id":38670399,"question_id":38668689,"body_markdown":"The problem is in the following section:\r\n\r\n    AlertDialog.Builder Alert = new AlertDialog.Builder(this);\r\n    Alert.setMessage(&quot;Correct!&quot;)\r\n                        .create();\r\n    Alert.show();\r\n    Intent i = new Intent(MainActivity.this, Main2Activity.class);\r\n    startActivity(i);\r\n\r\nYou are getting the error because you are trying to show an alert right before starting a new activity. Now, the &#39;receiver&#39; for the dialog is the current activity and as soon as you start new activity that is switched. To tackle this problem you can try something like this:\r\n\r\n    Alert.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n        public void onClick(DialogInterface dialog, int id) {\r\n             Intent i = new Intent(MainActivity.this, Main2Activity.class);\r\n             startActivity(i);\r\n        } \r\n\r\nTL;DR: Can&#39;t show an alert right before starting a new activity.","title":"Attempted to finish an input event but the input event receiver has already been disposed error","body":"<p>The problem is in the following section:</p>\n\n<pre><code>AlertDialog.Builder Alert = new AlertDialog.Builder(this);\nAlert.setMessage(\"Correct!\")\n                    .create();\nAlert.show();\nIntent i = new Intent(MainActivity.this, Main2Activity.class);\nstartActivity(i);\n</code></pre>\n\n<p>You are getting the error because you are trying to show an alert right before starting a new activity. Now, the 'receiver' for the dialog is the current activity and as soon as you start new activity that is switched. To tackle this problem you can try something like this:</p>\n\n<pre><code>Alert.setPositiveButton(\"OK\", new DialogInterface.OnClickListener() {\n    public void onClick(DialogInterface dialog, int id) {\n         Intent i = new Intent(MainActivity.this, Main2Activity.class);\n         startActivity(i);\n    } \n</code></pre>\n\n<p>TL;DR: Can't show an alert right before starting a new activity.</p>\n"}],"owner":{"account_id":4949533,"reputation":31,"user_id":3983967,"display_name":"Ken Dy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10937,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691813351,"creation_date":1469833765,"question_id":38668689,"body_markdown":"I am not sure what I have done but for a moment my code was working smoothly and after I added a new activity the error **Attempted to finish an input event but the input event receiver has already been disposed**. \r\n\r\nI need help on how to fix this.\r\n\r\n    \r\n\r\n\r\n\r\n    package proj.com.desperationfinals;\r\n\r\n    import android.content.DialogInterface;\r\n    import android.content.Intent;\r\n    import android.support.v7.app.AlertDialog;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.text.Editable;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    EditText editText;\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        editText = (EditText) findViewById(R.id.editText);\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    public void validate (View view){\r\n        String word = editText.getText().toString();\r\n\r\n        if(word.contentEquals(&quot;Sir Zalameda&quot;)) {\r\n                AlertDialog.Builder Alert = new AlertDialog.Builder(this);\r\n                Alert.setMessage(&quot;Correct!&quot;)\r\n                        .create();\r\n            Alert.show();\r\n            Intent i = new Intent(MainActivity.this, Main2Activity.class);\r\n            startActivity(i);\r\n\r\n\r\n\r\n        }else{\r\n            AlertDialog.Builder Alert = new AlertDialog.Builder(this);\r\n            Alert.setMessage(&quot;Mali!&quot;)\r\n\r\n\r\n\r\n                    .create();\r\n            Alert.show();\r\n\r\n        }\r\n        }\r\n\r\n}\r\n\r\n\r\n\r\n","title":"Attempted to finish an input event but the input event receiver has already been disposed error","body":"<p>I am not sure what I have done but for a moment my code was working smoothly and after I added a new activity the error <strong>Attempted to finish an input event but the input event receiver has already been disposed</strong>. </p>\n\n<p>I need help on how to fix this.</p>\n\n<pre><code>package proj.com.desperationfinals;\n\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.support.v7.app.AlertDialog;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.text.Editable;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\n\npublic class MainActivity extends AppCompatActivity {\n\nEditText editText;\n\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    editText = (EditText) findViewById(R.id.editText);\n\n}\n\n\n\n\n\npublic void validate (View view){\n    String word = editText.getText().toString();\n\n    if(word.contentEquals(\"Sir Zalameda\")) {\n            AlertDialog.Builder Alert = new AlertDialog.Builder(this);\n            Alert.setMessage(\"Correct!\")\n                    .create();\n        Alert.show();\n        Intent i = new Intent(MainActivity.this, Main2Activity.class);\n        startActivity(i);\n\n\n\n    }else{\n        AlertDialog.Builder Alert = new AlertDialog.Builder(this);\n        Alert.setMessage(\"Mali!\")\n\n\n\n                .create();\n        Alert.show();\n\n    }\n    }\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","jasper-reports"],"comments":[{"owner":{"account_id":469619,"reputation":22464,"user_id":876298,"display_name":"Alex K"},"score":0,"creation_date":1605555498,"post_id":64864041,"comment_id":114680828,"body_markdown":"Your example is working great without any issues. You should post small *jrxml* (to reproduce the issue) and show the project structure. What version of jdk and JasperReports library are you using? Did you try the same using basic console application (just main method)? Are you using maven or gradle?","body":"Your example is working great without any issues. You should post small <i>jrxml</i> (to reproduce the issue) and show the project structure. What version of jdk and JasperReports library are you using? Did you try the same using basic console application (just main method)? Are you using maven or gradle?"},{"owner":{"account_id":8288409,"reputation":1122,"user_id":6230882,"accept_rate":56,"display_name":"Jiji"},"score":0,"creation_date":1605565172,"post_id":64864041,"comment_id":114684502,"body_markdown":"Hi @AlexK, I have tried it in just a simple maven project and it still has the issue. I am using Java 8 and jasperreports 6.11.0.","body":"Hi @AlexK, I have tried it in just a simple maven project and it still has the issue. I am using Java 8 and jasperreports 6.11.0."},{"owner":{"account_id":8288409,"reputation":1122,"user_id":6230882,"accept_rate":56,"display_name":"Jiji"},"score":0,"creation_date":1605565610,"post_id":64864041,"comment_id":114684633,"body_markdown":"Hi @AlexK, I made it work by using 6.15. Thank you. Do you have any idea why?","body":"Hi @AlexK, I made it work by using 6.15. Thank you. Do you have any idea why?"},{"owner":{"account_id":469619,"reputation":22464,"user_id":876298,"display_name":"Alex K"},"score":0,"creation_date":1605635034,"post_id":64864041,"comment_id":114709201,"body_markdown":"The simple *jxml* is working fine with *jr 6.11.0*. Are you able to reproduce the issue using simple *jrxml* (for example having one staticText at title)?","body":"The simple <i>jxml</i> is working fine with <i>jr 6.11.0</i>. Are you able to reproduce the issue using simple <i>jrxml</i> (for example having one staticText at title)?"},{"owner":{"account_id":8288409,"reputation":1122,"user_id":6230882,"accept_rate":56,"display_name":"Jiji"},"score":0,"creation_date":1605654214,"post_id":64864041,"comment_id":114716746,"body_markdown":"Yes. It still has the same issue after trying that.","body":"Yes. It still has the same issue after trying that."}],"answers":[{"tags":[],"owner":{"account_id":28937581,"reputation":1,"user_id":22164787,"display_name":"Renan Gabriel de P&#225;dua"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691811548,"creation_date":1691810525,"answer_id":76887613,"question_id":64864041,"body_markdown":"Swap your search path for this:\r\n\r\n    FileInputStream inputStream = new \r\n    FileInputStream(Faces.getRealPath(inside webapp &quot;/reports/yourfile.jrxml&quot;));\r\n\tJasperReport jasperReport = JasperCompileManager.compileReport(inputStream);\r\n\r\n","title":"Loading a precompiled jasper file throws an exception: Class not found when loading object from file","body":"<p>Swap your search path for this:</p>\n<pre><code>FileInputStream inputStream = new \nFileInputStream(Faces.getRealPath(inside webapp &quot;/reports/yourfile.jrxml&quot;));\nJasperReport jasperReport = JasperCompileManager.compileReport(inputStream);\n</code></pre>\n"}],"owner":{"account_id":8288409,"reputation":1122,"user_id":6230882,"accept_rate":56,"display_name":"Jiji"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2930,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691811548,"creation_date":1605553082,"question_id":64864041,"body_markdown":"Using *JasperReports 6.11.0* in Eclipse, I precompiled a *.jrxml* file into a *.jasper* file. My problem is when I use the *jasper* file to load as a report, it throws an exception `net.sf.jasperreports.engine.JRException: Class not found when loading object from file`. This is the code I am using:\r\n\r\n```\r\nJasperReport jasperReport = (JasperReport) JRLoader\r\n                .loadObjectFromFile(&quot;src/main/resources/Report.jasper&quot;);\r\nJasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, new JREmptyDataSource());\r\n```\r\n\r\nNote that I tried using a template and still throws the same exception. Also, when I compile the jrxml in the Java code, it works perfectly.\r\n```\r\nInputStream input = new ClassPathResource(&quot;jasper.jrxml&quot;).getInputStream();\r\nJasperDesign jasperDesign = JRXmlLoader.load(input);\r\nJasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);\r\n\r\nJasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, new JREmptyDataSource());\r\n```","title":"Loading a precompiled jasper file throws an exception: Class not found when loading object from file","body":"<p>Using <em>JasperReports 6.11.0</em> in Eclipse, I precompiled a <em>.jrxml</em> file into a <em>.jasper</em> file. My problem is when I use the <em>jasper</em> file to load as a report, it throws an exception <code>net.sf.jasperreports.engine.JRException: Class not found when loading object from file</code>. This is the code I am using:</p>\n<pre><code>JasperReport jasperReport = (JasperReport) JRLoader\n                .loadObjectFromFile(&quot;src/main/resources/Report.jasper&quot;);\nJasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, new JREmptyDataSource());\n</code></pre>\n<p>Note that I tried using a template and still throws the same exception. Also, when I compile the jrxml in the Java code, it works perfectly.</p>\n<pre><code>InputStream input = new ClassPathResource(&quot;jasper.jrxml&quot;).getInputStream();\nJasperDesign jasperDesign = JRXmlLoader.load(input);\nJasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);\n\nJasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, new JREmptyDataSource());\n</code></pre>\n"},{"tags":["java","android","broadcastreceiver","google-tv","hdmi-cec"],"owner":{"account_id":103637,"reputation":10150,"user_id":277480,"accept_rate":68,"display_name":"StealthRT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691810218,"creation_date":1691810218,"question_id":76887600,"body_markdown":"Hey all I have been trying to get my remotes volume up/down buttons to register in my app but they never seem to do anything when I press them?\r\n\r\nI have tried:\r\n\r\n    public class CallBroadcastReceiver extends BroadcastReceiver {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            int volume = (Integer)intent.getExtras().get(&quot;android.media.EXTRA_VOLUME_STREAM_VALUE&quot;);\r\n            Log.i(&quot;Tag&quot;, &quot;Action : &quot;+ intent.getAction() + &quot; / volume : &quot;+volume);\r\n        }\r\n    }\r\n\r\nand also\r\n\r\n    @Override\r\n    public boolean onKey(View v, int keyCode, KeyEvent event) {\r\n            if (event.getAction()!=KeyEvent.ACTION_DOWN)\r\n                return true;\r\n\r\n            switch (keyCode) {\r\n                case 20:\r\n                    return false;\r\n                case 22:\r\n                    fastForward();\r\n                    return false;\r\n                case 21:\r\n                    rewind();\r\n                    return false;\r\n                case 23:\r\n                    if (mTransportControlGlue.isPlaying()) {\r\n                        mTransportControlGlue.pause();\r\n                    } else {\r\n                        mTransportControlGlue.play();\r\n                    }\r\n\r\n                    return false;\r\n              \r\n                    getActivity().finish();\r\n                    return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\nBut like I said, every time I hit the buttons they never fire any of those above. The only ones that register are the Dpad up/down/left/right, center button and the back button.\r\n\r\nI cam change the volume just fine using this code:\r\n\r\n    AudioManager mAudioManager = (AudioManager) getContext().getSystemService(Context.AUDIO_SERVICE);\r\n    int actualVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC);\r\n    mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 1, AudioManager.FLAG_PLAY_SOUND);\r\n\r\nBut that does me no good if I cant detect the volume up/down being pressed...\r\n\r\nThe google TV remote looks like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnyone know what I am missing?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mx3Ax.png","title":"Google TV remote volume up/down not registering","body":"<p>Hey all I have been trying to get my remotes volume up/down buttons to register in my app but they never seem to do anything when I press them?</p>\n<p>I have tried:</p>\n<pre><code>public class CallBroadcastReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        int volume = (Integer)intent.getExtras().get(&quot;android.media.EXTRA_VOLUME_STREAM_VALUE&quot;);\n        Log.i(&quot;Tag&quot;, &quot;Action : &quot;+ intent.getAction() + &quot; / volume : &quot;+volume);\n    }\n}\n</code></pre>\n<p>and also</p>\n<pre><code>@Override\npublic boolean onKey(View v, int keyCode, KeyEvent event) {\n        if (event.getAction()!=KeyEvent.ACTION_DOWN)\n            return true;\n\n        switch (keyCode) {\n            case 20:\n                return false;\n            case 22:\n                fastForward();\n                return false;\n            case 21:\n                rewind();\n                return false;\n            case 23:\n                if (mTransportControlGlue.isPlaying()) {\n                    mTransportControlGlue.pause();\n                } else {\n                    mTransportControlGlue.play();\n                }\n\n                return false;\n          \n                getActivity().finish();\n                return true;\n        }\n\n        return false;\n    }\n</code></pre>\n<p>But like I said, every time I hit the buttons they never fire any of those above. The only ones that register are the Dpad up/down/left/right, center button and the back button.</p>\n<p>I cam change the volume just fine using this code:</p>\n<pre><code>AudioManager mAudioManager = (AudioManager) getContext().getSystemService(Context.AUDIO_SERVICE);\nint actualVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC);\nmAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 1, AudioManager.FLAG_PLAY_SOUND);\n</code></pre>\n<p>But that does me no good if I cant detect the volume up/down being pressed...</p>\n<p>The google TV remote looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/mx3Ax.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mx3Ax.png\" alt=\"enter image description here\" /></a></p>\n<p>Anyone know what I am missing?</p>\n"},{"tags":["java","drools"],"answers":[{"tags":[],"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1373270557,"creation_date":1373270557,"answer_id":17521658,"question_id":17490509,"body_markdown":"Your code just do not make sense to me. One of the major problems is, after you have created the StatefulKnowledgeSession, you have not insert any object in the session.  Without anything in the session, I doubt anything Drool can do.  \r\n\r\nTry to do something like :\r\n\r\n    name.setType(1);\r\n    session.insert(name);    // Important! Drools need the objects to work on \r\n                             // inserted to session\r\n    session.fireAllRules();\r\n\r\nThen in your decision table, change the action to `namea.setName($param)`\r\n\r\nI believe it should work after such changes","title":"drools: access objects in drools excel decision table","body":"<p>Your code just do not make sense to me. One of the major problems is, after you have created the StatefulKnowledgeSession, you have not insert any object in the session.  Without anything in the session, I doubt anything Drool can do.  </p>\n\n<p>Try to do something like :</p>\n\n<pre><code>name.setType(1);\nsession.insert(name);    // Important! Drools need the objects to work on \n                         // inserted to session\nsession.fireAllRules();\n</code></pre>\n\n<p>Then in your decision table, change the action to <code>namea.setName($param)</code></p>\n\n<p>I believe it should work after such changes</p>\n"}],"owner":{"account_id":948533,"reputation":2812,"user_id":975234,"accept_rate":75,"display_name":"Rebooting"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2892,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":17521658,"answer_count":1,"score":3,"last_activity_date":1691809706,"creation_date":1373032299,"question_id":17490509,"body_markdown":"The scenario is as follows: \r\n\r\nI have a java pojo class `Name` having 2 variables `type` and `name` with appropriate getters and setters. I am using decision table drools and I want:\r\n\r\n`Condition`: when type is set to &quot;1&quot;\r\n\r\n`Action`: call setName setter of the name class and set the appropriate parameter from excel\r\n\r\nNow I want to access this set value of name in java.\r\n\r\nThis is the thing i have done:\r\n\r\nName.java-\r\n\r\n    public class Name{\r\n    \t\r\n    \r\n    \tString name,type;\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic String getType() {\r\n    \t\treturn type;\r\n    \t}\r\n    \r\n    \tpublic void setType(String type) {\r\n    \t\tthis.type = type;\r\n    \t}\r\n\r\n\r\nMainClass.java- That has drools implementation!! \r\n\r\n    public class MainClass {\r\n    \t\r\n    \tpublic static StatefulKnowledgeSession session;\r\n    \tpublic static KnowledgeBase kbase;\r\n    \tpublic static Name name;\r\n    \tpublic static void main(String args[])\r\n    \r\n    {\t\r\n    \tinit();\r\n    \tinitialiseNameObject();\r\n    \tfireAllRules();\r\n    }\r\n    \r\n    public static void init()\r\n    {\r\n    \tSystem.out.println(&quot;inside init&quot;);\r\n    \tKnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();\r\n    \tDecisionTableConfiguration dconf=KnowledgeBuilderFactory.newDecisionTableConfiguration();\r\n    \t\r\n    \tdconf.setInputType(DecisionTableInputType.XLS);\r\n    \tdconf.setWorksheetName(&quot;rulesW&quot;);\r\n    \t\r\n    \tkbuilder.add(ResourceFactory.newClassPathResource(&quot;/drools.xls&quot;,MainClass.class), ResourceType.DTABLE, dconf);\r\n    \t\r\n    \tKnowledgeBuilderErrors errors=kbuilder.getErrors();\r\n    \t\r\n    \tif(!errors.isEmpty())\r\n    \t{\r\n    \t\tSystem.out.println(&quot;Errors in package&quot;);\r\n    \t\tIterator i=errors.iterator();\r\n    \t\twhile(i.hasNext())\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;The error: &quot;+i.next());\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tkbase=KnowledgeBaseFactory.newKnowledgeBase();\r\n    \t\r\n    \ttry\r\n    \t{\r\n    \t\tkbase.addKnowledgePackages(kbuilder.getKnowledgePackages());\r\n    \t\tsession=kbase.newStatefulKnowledgeSession();\r\n    \t\t\r\n    \t\tname=new Name();\r\n    \t}\r\n    \tcatch(Exception e)\r\n    \t\r\n    \t{\r\n    \t\tSystem.out.println(&quot;The exception &quot;+e);\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    public static void initialiseNameObject()\r\n    {\r\n    \t\r\n    \r\n    \tSystem.out.println(&quot;insideNameObject&quot;);\r\n    \tname.setType(&quot;1&quot;);\r\n    \t\r\n    \t\r\n    }\r\n    \r\n    public static void fireAllRules()\r\n    {\r\n    \tSystem.out.println(&quot;inside fire all&quot;);\r\n    \t\r\n    \tsession.fireAllRules();\r\n    \t\r\n    \tSystem.out.println(name.getName());\r\n    \t\r\n    }\r\n\r\nThe issue is I am not able to get the name .. always getting null for that. The name should be updated in the object and i should get ABCD as output. I guess it has to do something regarding global instances!! ","title":"drools: access objects in drools excel decision table","body":"<p>The scenario is as follows:</p>\n<p>I have a java pojo class <code>Name</code> having 2 variables <code>type</code> and <code>name</code> with appropriate getters and setters. I am using decision table drools and I want:</p>\n<p><code>Condition</code>: when type is set to &quot;1&quot;</p>\n<p><code>Action</code>: call setName setter of the name class and set the appropriate parameter from excel</p>\n<p>Now I want to access this set value of name in java.</p>\n<p>This is the thing i have done:</p>\n<p>Name.java-</p>\n<pre><code>public class Name{\n    \n\n    String name,type;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n</code></pre>\n<p>MainClass.java- That has drools implementation!!</p>\n<pre><code>public class MainClass {\n    \n    public static StatefulKnowledgeSession session;\n    public static KnowledgeBase kbase;\n    public static Name name;\n    public static void main(String args[])\n\n{   \n    init();\n    initialiseNameObject();\n    fireAllRules();\n}\n\npublic static void init()\n{\n    System.out.println(&quot;inside init&quot;);\n    KnowledgeBuilder kbuilder=KnowledgeBuilderFactory.newKnowledgeBuilder();\n    DecisionTableConfiguration dconf=KnowledgeBuilderFactory.newDecisionTableConfiguration();\n    \n    dconf.setInputType(DecisionTableInputType.XLS);\n    dconf.setWorksheetName(&quot;rulesW&quot;);\n    \n    kbuilder.add(ResourceFactory.newClassPathResource(&quot;/drools.xls&quot;,MainClass.class), ResourceType.DTABLE, dconf);\n    \n    KnowledgeBuilderErrors errors=kbuilder.getErrors();\n    \n    if(!errors.isEmpty())\n    {\n        System.out.println(&quot;Errors in package&quot;);\n        Iterator i=errors.iterator();\n        while(i.hasNext())\n        {\n            System.out.println(&quot;The error: &quot;+i.next());\n        }\n    }\n    \n    kbase=KnowledgeBaseFactory.newKnowledgeBase();\n    \n    try\n    {\n        kbase.addKnowledgePackages(kbuilder.getKnowledgePackages());\n        session=kbase.newStatefulKnowledgeSession();\n        \n        name=new Name();\n    }\n    catch(Exception e)\n    \n    {\n        System.out.println(&quot;The exception &quot;+e);\n    }\n    \n}\n\npublic static void initialiseNameObject()\n{\n    \n\n    System.out.println(&quot;insideNameObject&quot;);\n    name.setType(&quot;1&quot;);\n    \n    \n}\n\npublic static void fireAllRules()\n{\n    System.out.println(&quot;inside fire all&quot;);\n    \n    session.fireAllRules();\n    \n    System.out.println(name.getName());\n    \n}\n</code></pre>\n<p>The issue is I am not able to get the name .. always getting null for that. The name should be updated in the object and i should get ABCD as output. I guess it has to do something regarding global instances!!</p>\n"},{"tags":["java","javascript","gwt","gxt"],"answers":[{"tags":[],"owner":{"account_id":1923037,"reputation":1117,"user_id":1734066,"accept_rate":26,"display_name":"Amit Rana"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1353667551,"creation_date":1353667551,"answer_id":13527456,"question_id":13249820,"body_markdown":"i find the way to solve this problem , \r\ni give margin to my viewport \r\n\r\n     x-viewport {margin-bottom: -16px;}\r\n\r\nand Done!","title":"Overflow is Hidden but page scroll on key events","body":"<p>i find the way to solve this problem , \ni give margin to my viewport </p>\n\n<pre><code> x-viewport {margin-bottom: -16px;}\n</code></pre>\n\n<p>and Done!</p>\n"}],"owner":{"account_id":1923037,"reputation":1117,"user_id":1734066,"accept_rate":26,"display_name":"Amit Rana"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":13527456,"answer_count":1,"score":1,"last_activity_date":1691809517,"creation_date":1352200477,"question_id":13249820,"body_markdown":"On a `BorderLayout` panel (with hidden overflow), when &lt;kbd&gt;Page Down&lt;/kbd&gt;, &lt;kbd&gt;&amp;darr;&lt;/kbd&gt; or &lt;kbd&gt;End&lt;/kbd&gt; are pressed the page is scrolled down, hiding its top. How to prevent it? ","title":"Overflow is Hidden but page scroll on key events","body":"<p>On a <code>BorderLayout</code> panel (with hidden overflow), when <kbd>Page Down</kbd>, <kbd>↓</kbd> or <kbd>End</kbd> are pressed the page is scrolled down, hiding its top. How to prevent it?</p>\n"},{"tags":["java","android","c","kotlin"],"answers":[{"tags":[],"owner":{"account_id":5826843,"reputation":344,"user_id":4592885,"display_name":"Mohammad Fallah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691808481,"creation_date":1691807200,"answer_id":76887522,"question_id":76887328,"body_markdown":"You can simply pass your specific path as an argument to your function in C and use it with `fopen`.\r\n\r\nTo define your function in C and calling it in Kotlin side please read [this document][1].\r\n\r\nWhen you pass your `String` variable as argument, you need to convert it to a regular C string type (char*).\r\nSo you can use this example:\r\n```C\r\nJNIEXPORT void JNICALL \r\nJava_com_example_hellojni_HelloJni_readFile(JNIEnv *env, jobject obj,\r\n\tjstring name)\r\n{\r\n\tconst char *path= (*env)-&gt;GetStringUTFChars(env,name,0);\r\n    // use fopen and other stuff\r\n\t// release this string when done with it\r\n\t(*env)-&gt;ReleaseStringUTFChars(env, name, str);\r\n}\r\n```\r\n\r\nto access your app-specific directory (/data/data/{package-name}/), you don&#39;t need any permission declaration. \r\n\r\n  [1]: https://developer.android.com/ndk/samples/sample_hellojni#ci","title":"How to open app specific files in Android using C?","body":"<p>You can simply pass your specific path as an argument to your function in C and use it with <code>fopen</code>.</p>\n<p>To define your function in C and calling it in Kotlin side please read <a href=\"https://developer.android.com/ndk/samples/sample_hellojni#ci\" rel=\"nofollow noreferrer\">this document</a>.</p>\n<p>When you pass your <code>String</code> variable as argument, you need to convert it to a regular C string type (char*).\nSo you can use this example:</p>\n<pre><code>JNIEXPORT void JNICALL \nJava_com_example_hellojni_HelloJni_readFile(JNIEnv *env, jobject obj,\n    jstring name)\n{\n    const char *path= (*env)-&gt;GetStringUTFChars(env,name,0);\n    // use fopen and other stuff\n    // release this string when done with it\n    (*env)-&gt;ReleaseStringUTFChars(env, name, str);\n}\n</code></pre>\n<p>to access your app-specific directory (/data/data/{package-name}/), you don't need any permission declaration.</p>\n"}],"owner":{"account_id":5724751,"reputation":633,"user_id":4522084,"accept_rate":75,"display_name":"pdiffley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76887522,"answer_count":1,"score":-1,"last_activity_date":1691808481,"creation_date":1691801208,"question_id":76887328,"body_markdown":"The [Android docs][1] show how to open app-specific files by calling `val file = File(context.filesDir, filename)` or `context.openFileOutput()`, but I need to open a file in a C library where the `context` is not available.\r\n\r\nIs it possible to open app-specific files in Android from a C library, and if so, how can you get the file path to pass to something like `fopen`?\r\n\r\n\r\n  [1]: https://developer.android.com/training/data-storage/app-specific#internal-access-store-files","title":"How to open app specific files in Android using C?","body":"<p>The <a href=\"https://developer.android.com/training/data-storage/app-specific#internal-access-store-files\" rel=\"nofollow noreferrer\">Android docs</a> show how to open app-specific files by calling <code>val file = File(context.filesDir, filename)</code> or <code>context.openFileOutput()</code>, but I need to open a file in a C library where the <code>context</code> is not available.</p>\n<p>Is it possible to open app-specific files in Android from a C library, and if so, how can you get the file path to pass to something like <code>fopen</code>?</p>\n"},{"tags":["java","android","twilio","twilio-api","twilio-programmable-voice"],"answers":[{"tags":[],"owner":{"account_id":5332702,"reputation":2200,"user_id":4628115,"accept_rate":60,"display_name":"CybeX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691807335,"creation_date":1691807335,"answer_id":76887525,"question_id":76879711,"body_markdown":"An issue I explored in detail on [Twilio Android Quickstart][1] documented a Parcel issue, and provided some insight into the cause of the problem.\r\n\r\nThe cause being the current thread&#39;s `ClassLoader` isn&#39;t the same that initialized (loaded) the Voice SDK&#39;s class loader as suggested by `@afalls-twilio` in his comment [here][2]\r\n\r\nThis was confirmed and discussed in some detail by [David Wasser at SO](https://stackoverflow.com/a/28589962/4628115).\r\n\r\n#### TL;DR Solution\r\nA simple line addition when reading the bundle adds the class to be found i.e.\r\n```kotlin\r\nval myBundle: Bundle? = connection.extras.getBundle(TelecomManager.EXTRA_INCOMING_CALL_EXTRAS);\r\nmyBundle.classLoader = CallInvite::class.java.classLoader\r\n// read CallInvite from Bundle as required\r\n```\r\n\r\n  [1]: https://github.com/twilio/voice-quickstart-android/issues/561\r\n  [2]: https://github.com/twilio/voice-quickstart-android/issues/561#issuecomment-1675435831","title":"ClassNotFoundException com.twilio.voice.CallInvite when reading ConnectionService Bundle extras in onCreateIncomingConnection","body":"<p>An issue I explored in detail on <a href=\"https://github.com/twilio/voice-quickstart-android/issues/561\" rel=\"nofollow noreferrer\">Twilio Android Quickstart</a> documented a Parcel issue, and provided some insight into the cause of the problem.</p>\n<p>The cause being the current thread's <code>ClassLoader</code> isn't the same that initialized (loaded) the Voice SDK's class loader as suggested by <code>@afalls-twilio</code> in his comment <a href=\"https://github.com/twilio/voice-quickstart-android/issues/561#issuecomment-1675435831\" rel=\"nofollow noreferrer\">here</a></p>\n<p>This was confirmed and discussed in some detail by <a href=\"https://stackoverflow.com/a/28589962/4628115\">David Wasser at SO</a>.</p>\n<h4>TL;DR Solution</h4>\n<p>A simple line addition when reading the bundle adds the class to be found i.e.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val myBundle: Bundle? = connection.extras.getBundle(TelecomManager.EXTRA_INCOMING_CALL_EXTRAS);\nmyBundle.classLoader = CallInvite::class.java.classLoader\n// read CallInvite from Bundle as required\n</code></pre>\n"}],"owner":{"account_id":5332702,"reputation":2200,"user_id":4628115,"accept_rate":60,"display_name":"CybeX"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691807335,"creation_date":1691707073,"question_id":76879711,"body_markdown":"I&#39;m upgrading a Flutter library to use a Twilio Voice integrated with a [ConnectionService][1] for native call management. To accomplish this, one has to extend a `ConnectionService` (inherits from a `Service` with associated communication methods, i.e. `Intent`s)\r\n\r\n---\r\n\r\n### Background &amp; Context\r\n\r\nTo receive incoming call (via a notification manager like FCM), one needs to notify the `ConnectionService` of an incoming call using\r\n\r\n```kotlin\r\noverride fun onCreateIncomingConnection(connectionManagerPhoneAccount: PhoneAccountHandle?, request: ConnectionRequest?): Connection {\r\n    super.onCreateIncomingConnection(connectionManagerPhoneAccount, request)\r\n    Log.d(TAG, &quot;onCreateIncomingConnection&quot;)&#39;\r\n    // ... code goes here\r\n    // return new Connection(...)\r\n}\r\n```\r\n\r\nWith this `onCreateIncomingConnection`, it will ask the native &#39;Phone Call&#39; app to show an incoming call with parameters you provide, e.g. showing the incoming caller number with [Connection.setAddress][2]\r\n\r\nThis additional information can be passed into the `ConnectionService` by adding them to an extras `Bundle` with the Key [TelecomManager.EXTRA_INCOMING_CALL_EXTRAS][3] (for incoming calls) which is then added to a new `Bundle` e.g. \r\n\r\n[Source][4]\r\n\r\n```java\r\nprivate fun handleFCMCallInvite(callInvite: CallInvite, notificationId: Int) {\r\n    // Get telecom manager\r\n    val telecomManager = getSystemService(TELECOM_SERVICE) as TelecomManager\r\n\r\n    // Get PhoneAccountHandle\r\n    val caller = callInvite.from!!.toString()\r\n    val componentName = ComponentName(applicationContext.packageName, TwilioVoiceConnectionService::class.java.name)\r\n    val phoneAccountHandle = PhoneAccountHandle(componentName, caller)\r\n\r\n    // Create my Bundle containing information e.g. notificationId and callInvite\r\n    val myBundle = Bundle()\r\n    myBundle.putInt(Constants.INCOMING_CALL_NOTIFICATION_ID, notificationId)\r\n    myBundle.putParcelable(Constants.INCOMING_CALL_INVITE, callInvite)\r\n\r\n    // Add new incoming call to the telecom manager\r\n    telecomManager.addNewIncomingCall(phoneAccountHandle, Bundle().apply {\r\n        putBundle(EXTRA_INCOMING_CALL_EXTRAS, myBundle)\r\n        putParcelable(EXTRA_PHONE_ACCOUNT_HANDLE, phoneAccountHandle)\r\n    })\r\n}\r\n```\r\n\r\n----------\r\n\r\n### Problem\r\n\r\nThe issue comes in when trying to `unparcel()` the `CallInvite` from Bundled extras in the `ConnectionService`&#39;s [onCreateIncomingConnection][5] implementation, see as follows:\r\n\r\n```java\r\noverride fun onCreateIncomingConnection(connectionManagerPhoneAccount: PhoneAccountHandle?, request: ConnectionRequest?): Connection {\r\n    super.onCreateIncomingConnection(connectionManagerPhoneAccount, request)\r\n    Log.d(TAG, &quot;onCreateIncomingConnection&quot;)\r\n    val connection: Connection = VoipConnection(applicationContext)\r\n    connection.extras = request?.extras\r\n\r\n    var ci: CallInvite? = null\r\n    val myBundle: Bundle? = connection.extras.getBundle(TelecomManager.EXTRA_INCOMING_CALL_EXTRAS);\r\n    if(myBundle != null) {\r\n        Log.d(TAG, &quot;onCreateIncomingConnection: myBundle is not null&quot;)\r\n\r\n        /// --------------------------------------------------------\r\n        /// This next line throws the ClassNotFoundException occurs\r\n        /// --------------------------------------------------------\r\n        if (myBundle.containsKey(Constants.INCOMING_CALL_INVITE) ) { \r\n            Log.d(TAG, &quot;onCreateIncomingConnection: myBundle contains INCOMING_CALL_INVITE&quot;)\r\n            ci = myBundle.getParcelable(Constants.INCOMING_CALL_INVITE)\r\n        } else {\r\n            Log.d(TAG, &quot;onCreateIncomingConnection: myBundle does not contain INCOMING_CALL_INVITE&quot;)\r\n        }\r\n    } else {\r\n        Log.d(TAG, &quot;onCreateIncomingConnection: myBundle is null&quot;)\r\n    }\r\n\r\n    ...\r\n}\r\n```\r\n\r\nAs shown in the snippet above, when calling `myBundle.containsKey()` with a valid key any time I have a [CallInvite][6] object bundled in. If I only pass in e.g. `notificationId`, contains and accessors work as intended. \r\n\r\nWhen including the `CallInvite` in the bundle, I get the following exception:\r\n\r\n*Note: `CallInvite` implements `Parcelable`\r\n\r\n```\r\nClass not found when unmarshalling: com.twilio.voice.CallInvite\r\njava.lang.ClassNotFoundException: com.twilio.voice.CallInvite\r\n\tat java.lang.Class.classForName(Native Method)\r\n\tat java.lang.Class.forName(Class.java:454)\r\n\tat android.os.Parcel.readParcelableCreator(Parcel.java:3403)\r\n\tat android.os.Parcel.readParcelable(Parcel.java:3337)\r\n\tat android.os.Parcel.readValue(Parcel.java:3239)\r\n\tat android.os.Parcel.readArrayMapInternal(Parcel.java:3636)\r\n\tat android.os.BaseBundle.initializeFromParcelLocked(BaseBundle.java:292)\r\n\tat android.os.BaseBundle.unparcel(BaseBundle.java:236)\r\n\tat android.os.BaseBundle.containsKey(BaseBundle.java:516)\r\n\tat com.twilio.twilio_voice.connectionservice.TwilioVoiceConnectionService.onCreateIncomingConnection(TwilioVoiceConnectionService.kt:43)\r\n\tat android.telecom.ConnectionService.createConnection(ConnectionService.java:2061)\r\n\tat android.telecom.ConnectionService.access$400(ConnectionService.java:96)\r\n\tat android.telecom.ConnectionService$2$1.loggedRun(ConnectionService.java:914)\r\n\tat android.telecom.Logging.Runnable$1.run(Runnable.java:37)\r\n\tat android.telecom.ConnectionService.onAccountsInitialized(ConnectionService.java:3272)\r\n\tat android.telecom.ConnectionService.access$5000(ConnectionService.java:96)\r\n\tat android.telecom.ConnectionService$5$1.loggedRun(ConnectionService.java:2577)\r\n\tat android.telecom.Logging.Runnable$1.run(Runnable.java:37)\r\n\tat android.os.Handler.handleCallback(Handler.java:938)\r\n\tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n\tat android.os.Looper.loopOnce(Looper.java:226)\r\n\tat android.os.Looper.loop(Looper.java:313)\r\n\tat android.app.ActivityThread.main(ActivityThread.java:8663)\r\n\tat java.lang.reflect.Method.invoke(Native Method)\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:567)\r\n\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1135)\r\nCaused by: java.lang.ClassNotFoundException: com.twilio.voice.CallInvite\r\n\tat java.lang.Class.classForName(Native Method)\r\n\tat java.lang.BootClassLoader.findClass(ClassLoader.java:1358)\r\n\tat java.lang.BootClassLoader.loadClass(ClassLoader.java:1418)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n\tat java.lang.Class.classForName(Native Method)&#160;\r\n\tat java.lang.Class.forName(Class.java:454)&#160;\r\n\tat android.os.Parcel.readParcelableCreator(Parcel.java:3403)&#160;\r\n\tat android.os.Parcel.readParcelable(Parcel.java:3337)&#160;\r\n\tat android.os.Parcel.readValue(Parcel.java:3239)&#160;\r\n\tat android.os.Parcel.readArrayMapInternal(Parcel.java:3636)&#160;\r\n\tat android.os.BaseBundle.initializeFromParcelLocked(BaseBundle.java:292)&#160;\r\n\tat android.os.BaseBundle.unparcel(BaseBundle.java:236)&#160;\r\n\tat android.os.BaseBundle.containsKey(BaseBundle.java:516)&#160;\r\n\tat com.twilio.twilio_voice.connectionservice.TwilioVoiceConnectionService.onCreateIncomingConnection(TwilioVoiceConnectionService.kt:43)&#160;\r\n\tat android.telecom.ConnectionService.createConnection(ConnectionService.java:2061)&#160;\r\n\tat android.telecom.ConnectionService.access$400(ConnectionService.java:96)&#160;\r\n\tat android.telecom.ConnectionService$2$1.loggedRun(ConnectionService.java:914)&#160;\r\n\tat android.telecom.Logging.Runnable$1.run(Runnable.java:37)&#160;\r\n\tat android.telecom.ConnectionService.onAccountsInitialized(ConnectionService.java:3272)&#160;\r\n\tat android.telecom.ConnectionService.access$5000(ConnectionService.java:96)&#160;\r\n\tat android.telecom.ConnectionService$5$1.loggedRun(ConnectionService.java:2577)&#160;\r\n\tat android.telecom.Logging.Runnable$1.run(Runnable.java:37)&#160;\r\n\tat android.os.Handler.handleCallback(Handler.java:938)&#160;\r\n\tat android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\n\tat android.os.Looper.loopOnce(Looper.java:226)&#160;\r\n\tat android.os.Looper.loop(Looper.java:313)&#160;\r\n\tat android.app.ActivityThread.main(ActivityThread.java:8663)&#160;\r\n\tat java.lang.reflect.Method.invoke(Native Method)&#160;\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:567)&#160;\r\n\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1135)&#160;\r\nCaused by: java.lang.NoClassDefFoundError: Class not found using the boot class loader; no stack trace available\r\n```\r\n\r\n----------\r\n\r\n### Libraries, etc\r\n\r\n`build.gradle` (module)\r\n\r\n```\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.8.0&#39;\r\n\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.4.2&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\n...\r\nandroid {\r\n    compileSdk 33\r\n    ...\r\n}\r\n...\r\ndependencies {\r\n    ...\r\n    implementation(&quot;com.twilio:voice-android:6.2.1&quot;)\r\n    implementation(&quot;com.google.firebase:firebase-messaging-ktx:23.2.1&quot;)\r\n    ...\r\n}\r\n```\r\n\r\n---\r\n\r\n## UPDATE 1\r\n\r\nUsing the last working solution (Java), I resolved to parcelling and unparcelling immediately to emulate what&#39;s happening in the background, seems there might be a problem here.\r\n\r\n```java\r\npublic class VoiceFirebaseMessagingService extends FirebaseMessagingService {\r\n\r\n    @Override\r\n    public void onMessageReceived(final RemoteMessage remoteMessage) {\r\n        // ... valid message\r\n        handleInvite(callInvite, notificationId);\r\n        //...\r\n    }\r\n\r\n    private void handleInvite(CallInvite callInvite, int notificationId) {\r\n        Parcel p = Parcel.obtain();\r\n        p.writeParcelable(callInvite, 0);\r\n        ClassLoader classLoader = getApplicationContext().getClassLoader();\r\n        CallInvite ci = p.readParcelable(classLoader); // &lt;----------------- ci is always null\r\n        if(ci != null){\r\n            Log.d(TAG, &quot;handleInvite: &quot; + ci.getCallSid());\r\n        } else {\r\n            Log.d(TAG, &quot;handleInvite: null&quot;);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe same occurs on with Kotlin, though I get a `ClassNotFoundException` for `CallInvite`.\r\n\r\nSo far, I&#39;ve traced the issue to [Parcel.readParcelableCreator(@Nullable ClassLoader)](https://android.googlesource.com/platform/frameworks/base/+/400aaf9/core/java/android/os/Parcel.java#2868) (for Android 11, API 30)\r\n\r\n```java\r\npublic final Parcelable.Creator&lt;?&gt; readParcelableCreator(@Nullable ClassLoader loader) {\r\n        String name = readString();\r\n        if (name == null) {\r\n            return null;\r\n        }\r\n        Parcelable.Creator&lt;?&gt; creator;\r\n```\r\n\r\n`name` is always null, thus returns null when calling `Parcel.readParcelable`.\r\n\r\n_This occurs on both Android 11 &amp; 12 (API 30, 31)_\r\n\r\n  [1]: https://developer.android.com/reference/android/telecom/ConnectionService\r\n  [2]: https://developer.android.com/reference/android/telecom/Connection#setAddress(android.net.Uri,%20int)\r\n  [3]: https://developer.android.com/reference/android/telecom/TelecomManager#EXTRA_INCOMING_CALL_EXTRAS\r\n  [4]: https://stackoverflow.com/a/66893429/4628115\r\n  [5]: https://developer.android.com/reference/android/telecom/ConnectionService#onCreateIncomingConnection(android.telecom.PhoneAccountHandle,%20android.telecom.ConnectionRequest)\r\n  [6]: https://twilio.github.io/twilio-voice-android/docs/latest/com/twilio/voice/CallInvite.html","title":"ClassNotFoundException com.twilio.voice.CallInvite when reading ConnectionService Bundle extras in onCreateIncomingConnection","body":"<p>I'm upgrading a Flutter library to use a Twilio Voice integrated with a <a href=\"https://developer.android.com/reference/android/telecom/ConnectionService\" rel=\"nofollow noreferrer\">ConnectionService</a> for native call management. To accomplish this, one has to extend a <code>ConnectionService</code> (inherits from a <code>Service</code> with associated communication methods, i.e. <code>Intent</code>s)</p>\n<hr />\n<h3>Background &amp; Context</h3>\n<p>To receive incoming call (via a notification manager like FCM), one needs to notify the <code>ConnectionService</code> of an incoming call using</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun onCreateIncomingConnection(connectionManagerPhoneAccount: PhoneAccountHandle?, request: ConnectionRequest?): Connection {\n    super.onCreateIncomingConnection(connectionManagerPhoneAccount, request)\n    Log.d(TAG, &quot;onCreateIncomingConnection&quot;)'\n    // ... code goes here\n    // return new Connection(...)\n}\n</code></pre>\n<p>With this <code>onCreateIncomingConnection</code>, it will ask the native 'Phone Call' app to show an incoming call with parameters you provide, e.g. showing the incoming caller number with <a href=\"https://developer.android.com/reference/android/telecom/Connection#setAddress(android.net.Uri,%20int)\" rel=\"nofollow noreferrer\">Connection.setAddress</a></p>\n<p>This additional information can be passed into the <code>ConnectionService</code> by adding them to an extras <code>Bundle</code> with the Key <a href=\"https://developer.android.com/reference/android/telecom/TelecomManager#EXTRA_INCOMING_CALL_EXTRAS\" rel=\"nofollow noreferrer\">TelecomManager.EXTRA_INCOMING_CALL_EXTRAS</a> (for incoming calls) which is then added to a new <code>Bundle</code> e.g.</p>\n<p><a href=\"https://stackoverflow.com/a/66893429/4628115\">Source</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>private fun handleFCMCallInvite(callInvite: CallInvite, notificationId: Int) {\n    // Get telecom manager\n    val telecomManager = getSystemService(TELECOM_SERVICE) as TelecomManager\n\n    // Get PhoneAccountHandle\n    val caller = callInvite.from!!.toString()\n    val componentName = ComponentName(applicationContext.packageName, TwilioVoiceConnectionService::class.java.name)\n    val phoneAccountHandle = PhoneAccountHandle(componentName, caller)\n\n    // Create my Bundle containing information e.g. notificationId and callInvite\n    val myBundle = Bundle()\n    myBundle.putInt(Constants.INCOMING_CALL_NOTIFICATION_ID, notificationId)\n    myBundle.putParcelable(Constants.INCOMING_CALL_INVITE, callInvite)\n\n    // Add new incoming call to the telecom manager\n    telecomManager.addNewIncomingCall(phoneAccountHandle, Bundle().apply {\n        putBundle(EXTRA_INCOMING_CALL_EXTRAS, myBundle)\n        putParcelable(EXTRA_PHONE_ACCOUNT_HANDLE, phoneAccountHandle)\n    })\n}\n</code></pre>\n<hr />\n<h3>Problem</h3>\n<p>The issue comes in when trying to <code>unparcel()</code> the <code>CallInvite</code> from Bundled extras in the <code>ConnectionService</code>'s <a href=\"https://developer.android.com/reference/android/telecom/ConnectionService#onCreateIncomingConnection(android.telecom.PhoneAccountHandle,%20android.telecom.ConnectionRequest)\" rel=\"nofollow noreferrer\">onCreateIncomingConnection</a> implementation, see as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>override fun onCreateIncomingConnection(connectionManagerPhoneAccount: PhoneAccountHandle?, request: ConnectionRequest?): Connection {\n    super.onCreateIncomingConnection(connectionManagerPhoneAccount, request)\n    Log.d(TAG, &quot;onCreateIncomingConnection&quot;)\n    val connection: Connection = VoipConnection(applicationContext)\n    connection.extras = request?.extras\n\n    var ci: CallInvite? = null\n    val myBundle: Bundle? = connection.extras.getBundle(TelecomManager.EXTRA_INCOMING_CALL_EXTRAS);\n    if(myBundle != null) {\n        Log.d(TAG, &quot;onCreateIncomingConnection: myBundle is not null&quot;)\n\n        /// --------------------------------------------------------\n        /// This next line throws the ClassNotFoundException occurs\n        /// --------------------------------------------------------\n        if (myBundle.containsKey(Constants.INCOMING_CALL_INVITE) ) { \n            Log.d(TAG, &quot;onCreateIncomingConnection: myBundle contains INCOMING_CALL_INVITE&quot;)\n            ci = myBundle.getParcelable(Constants.INCOMING_CALL_INVITE)\n        } else {\n            Log.d(TAG, &quot;onCreateIncomingConnection: myBundle does not contain INCOMING_CALL_INVITE&quot;)\n        }\n    } else {\n        Log.d(TAG, &quot;onCreateIncomingConnection: myBundle is null&quot;)\n    }\n\n    ...\n}\n</code></pre>\n<p>As shown in the snippet above, when calling <code>myBundle.containsKey()</code> with a valid key any time I have a <a href=\"https://twilio.github.io/twilio-voice-android/docs/latest/com/twilio/voice/CallInvite.html\" rel=\"nofollow noreferrer\">CallInvite</a> object bundled in. If I only pass in e.g. <code>notificationId</code>, contains and accessors work as intended.</p>\n<p>When including the <code>CallInvite</code> in the bundle, I get the following exception:</p>\n<p>*Note: <code>CallInvite</code> implements <code>Parcelable</code></p>\n<pre><code>Class not found when unmarshalling: com.twilio.voice.CallInvite\njava.lang.ClassNotFoundException: com.twilio.voice.CallInvite\n    at java.lang.Class.classForName(Native Method)\n    at java.lang.Class.forName(Class.java:454)\n    at android.os.Parcel.readParcelableCreator(Parcel.java:3403)\n    at android.os.Parcel.readParcelable(Parcel.java:3337)\n    at android.os.Parcel.readValue(Parcel.java:3239)\n    at android.os.Parcel.readArrayMapInternal(Parcel.java:3636)\n    at android.os.BaseBundle.initializeFromParcelLocked(BaseBundle.java:292)\n    at android.os.BaseBundle.unparcel(BaseBundle.java:236)\n    at android.os.BaseBundle.containsKey(BaseBundle.java:516)\n    at com.twilio.twilio_voice.connectionservice.TwilioVoiceConnectionService.onCreateIncomingConnection(TwilioVoiceConnectionService.kt:43)\n    at android.telecom.ConnectionService.createConnection(ConnectionService.java:2061)\n    at android.telecom.ConnectionService.access$400(ConnectionService.java:96)\n    at android.telecom.ConnectionService$2$1.loggedRun(ConnectionService.java:914)\n    at android.telecom.Logging.Runnable$1.run(Runnable.java:37)\n    at android.telecom.ConnectionService.onAccountsInitialized(ConnectionService.java:3272)\n    at android.telecom.ConnectionService.access$5000(ConnectionService.java:96)\n    at android.telecom.ConnectionService$5$1.loggedRun(ConnectionService.java:2577)\n    at android.telecom.Logging.Runnable$1.run(Runnable.java:37)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loopOnce(Looper.java:226)\n    at android.os.Looper.loop(Looper.java:313)\n    at android.app.ActivityThread.main(ActivityThread.java:8663)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:567)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1135)\nCaused by: java.lang.ClassNotFoundException: com.twilio.voice.CallInvite\n    at java.lang.Class.classForName(Native Method)\n    at java.lang.BootClassLoader.findClass(ClassLoader.java:1358)\n    at java.lang.BootClassLoader.loadClass(ClassLoader.java:1418)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n    at java.lang.Class.classForName(Native Method) \n    at java.lang.Class.forName(Class.java:454) \n    at android.os.Parcel.readParcelableCreator(Parcel.java:3403) \n    at android.os.Parcel.readParcelable(Parcel.java:3337) \n    at android.os.Parcel.readValue(Parcel.java:3239) \n    at android.os.Parcel.readArrayMapInternal(Parcel.java:3636) \n    at android.os.BaseBundle.initializeFromParcelLocked(BaseBundle.java:292) \n    at android.os.BaseBundle.unparcel(BaseBundle.java:236) \n    at android.os.BaseBundle.containsKey(BaseBundle.java:516) \n    at com.twilio.twilio_voice.connectionservice.TwilioVoiceConnectionService.onCreateIncomingConnection(TwilioVoiceConnectionService.kt:43) \n    at android.telecom.ConnectionService.createConnection(ConnectionService.java:2061) \n    at android.telecom.ConnectionService.access$400(ConnectionService.java:96) \n    at android.telecom.ConnectionService$2$1.loggedRun(ConnectionService.java:914) \n    at android.telecom.Logging.Runnable$1.run(Runnable.java:37) \n    at android.telecom.ConnectionService.onAccountsInitialized(ConnectionService.java:3272) \n    at android.telecom.ConnectionService.access$5000(ConnectionService.java:96) \n    at android.telecom.ConnectionService$5$1.loggedRun(ConnectionService.java:2577) \n    at android.telecom.Logging.Runnable$1.run(Runnable.java:37) \n    at android.os.Handler.handleCallback(Handler.java:938) \n    at android.os.Handler.dispatchMessage(Handler.java:99) \n    at android.os.Looper.loopOnce(Looper.java:226) \n    at android.os.Looper.loop(Looper.java:313) \n    at android.app.ActivityThread.main(ActivityThread.java:8663) \n    at java.lang.reflect.Method.invoke(Native Method) \n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:567) \n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1135) \nCaused by: java.lang.NoClassDefFoundError: Class not found using the boot class loader; no stack trace available\n</code></pre>\n<hr />\n<h3>Libraries, etc</h3>\n<p><code>build.gradle</code> (module)</p>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.8.0'\n\n    repositories {\n        google()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.4.2'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n...\nandroid {\n    compileSdk 33\n    ...\n}\n...\ndependencies {\n    ...\n    implementation(&quot;com.twilio:voice-android:6.2.1&quot;)\n    implementation(&quot;com.google.firebase:firebase-messaging-ktx:23.2.1&quot;)\n    ...\n}\n</code></pre>\n<hr />\n<h2>UPDATE 1</h2>\n<p>Using the last working solution (Java), I resolved to parcelling and unparcelling immediately to emulate what's happening in the background, seems there might be a problem here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class VoiceFirebaseMessagingService extends FirebaseMessagingService {\n\n    @Override\n    public void onMessageReceived(final RemoteMessage remoteMessage) {\n        // ... valid message\n        handleInvite(callInvite, notificationId);\n        //...\n    }\n\n    private void handleInvite(CallInvite callInvite, int notificationId) {\n        Parcel p = Parcel.obtain();\n        p.writeParcelable(callInvite, 0);\n        ClassLoader classLoader = getApplicationContext().getClassLoader();\n        CallInvite ci = p.readParcelable(classLoader); // &lt;----------------- ci is always null\n        if(ci != null){\n            Log.d(TAG, &quot;handleInvite: &quot; + ci.getCallSid());\n        } else {\n            Log.d(TAG, &quot;handleInvite: null&quot;);\n        }\n    }\n\n}\n</code></pre>\n<p>The same occurs on with Kotlin, though I get a <code>ClassNotFoundException</code> for <code>CallInvite</code>.</p>\n<p>So far, I've traced the issue to <a href=\"https://android.googlesource.com/platform/frameworks/base/+/400aaf9/core/java/android/os/Parcel.java#2868\" rel=\"nofollow noreferrer\">Parcel.readParcelableCreator(@Nullable ClassLoader)</a> (for Android 11, API 30)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final Parcelable.Creator&lt;?&gt; readParcelableCreator(@Nullable ClassLoader loader) {\n        String name = readString();\n        if (name == null) {\n            return null;\n        }\n        Parcelable.Creator&lt;?&gt; creator;\n</code></pre>\n<p><code>name</code> is always null, thus returns null when calling <code>Parcel.readParcelable</code>.</p>\n<p><em>This occurs on both Android 11 &amp; 12 (API 30, 31)</em></p>\n"},{"tags":["java","postman","rest-assured","micronaut","micronaut-rest"],"comments":[{"owner":{"account_id":26632345,"reputation":90,"user_id":20249350,"display_name":"Hassen Gaaya"},"score":0,"creation_date":1691790745,"post_id":76886503,"comment_id":135544337,"body_markdown":"Hello @svwleg42, are you sure that the content of ContentType.JSON is equal to &quot;application/json&quot; ? Is there ContentType.APPLICATION_JSON ?","body":"Hello @svwleg42, are you sure that the content of ContentType.JSON is equal to &quot;application/json&quot; ? Is there ContentType.APPLICATION_JSON ?"}],"answers":[{"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691805021,"creation_date":1691805021,"answer_id":76887448,"question_id":76886503,"body_markdown":"- First, `param()` is for query param or path param, if you want to add body in json, use `.body()` instead.\r\n- Second, `ContentType.JSON` is not equal to `appplication/json`, it is `application/json; charest=utf-8`\r\n\r\nThe code would be:\r\n\r\n```\r\nspec.given().header(&quot;Authorization&quot;, &quot;Bearer &quot; + bearerToken)\r\n        .contentType(&quot;application/json&quot;)\r\n        .body(&quot;{\\&quot;name\\&quot;:\\&quot;Test Device\\&quot;}&quot;)\r\n        .when().post(&quot;/user/38/devices&quot;)\r\n        .then().statusCode(201);\r\n```","title":"Why do these REST Assured queries not get the same result as doing it in Postman? (403 or 400 status code vs desired 201)","body":"<ul>\n<li>First, <code>param()</code> is for query param or path param, if you want to add body in json, use <code>.body()</code> instead.</li>\n<li>Second, <code>ContentType.JSON</code> is not equal to <code>appplication/json</code>, it is <code>application/json; charest=utf-8</code></li>\n</ul>\n<p>The code would be:</p>\n<pre><code>spec.given().header(&quot;Authorization&quot;, &quot;Bearer &quot; + bearerToken)\n        .contentType(&quot;application/json&quot;)\n        .body(&quot;{\\&quot;name\\&quot;:\\&quot;Test Device\\&quot;}&quot;)\n        .when().post(&quot;/user/38/devices&quot;)\n        .then().statusCode(201);\n</code></pre>\n"}],"owner":{"account_id":29208239,"reputation":3,"user_id":22376844,"display_name":"svwleg42"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76887448,"answer_count":1,"score":0,"last_activity_date":1691805021,"creation_date":1691785713,"question_id":76886503,"body_markdown":"For a group project at university, we&#39;re writing a Micronaut application for managing some data with a REST API, which I&#39;m supposed to test with REST Assured. To start off with, I&#39;m basically trying to convert a successful Postman request (POST to the path user/38/devices with body `{&quot;name&quot;:&quot;Test Device&quot;}` - i.e. creating a device called &quot;Test Device&quot; for this random existing user - with authentication via a bearer token) to REST Assured code that just checks if the status code is 201 as it should be. \r\n\r\n\r\n\r\n\r\nMy first attempt after parsing through the REST Assured and Micronaut Test usage guides was this:\r\n\r\n```\r\n@Test\r\npublic void devicePostTest(RequestSpecification spec) {\r\n    spec.given().auth().oauth2(bearerToken).param(&quot;name&quot;, &quot;Test Device&quot;)\r\n            .when().post(&quot;/user/38/devices&quot;)\r\n            .then().statusCode(201);\r\n}\r\n```\r\nBut the status code is 403. \r\nAfter finding [this similar Stackoverflow question](https://stackoverflow.com/questions/42790021/rest-assured-bearer-authentication), I changed it to this:\r\n\r\n```\r\n@Test\r\npublic void devicePostTest(RequestSpecification spec) {\r\n    spec.given().headers(&quot;Authorization&quot;, &quot;Bearer &quot; + bearerToken,&quot;Content-Type&quot;, ContentType.JSON,\r\n                &quot;Accept&quot;, ContentType.JSON)\r\n            .param(&quot;name&quot;, &quot;Test Device&quot;)\r\n            .when().post(&quot;/user/38/devices&quot;)\r\n            .then().statusCode(201);\r\n    }\r\n```\r\nWhich curiously now throws a 400. At this point, I found Postman&#39;s feature to generate cURL which gives me this:\r\n\r\n```\r\ncurl --location &#39;http://localhost:9080/user/38/devices&#39; \\\r\n--header &#39;Content-Type: application/json&#39; \\\r\n--header &#39;Authorization: Bearer *bearerToken*&#39; \\\r\n--data &#39;{\r\n    &quot;name&quot;:&quot;Test Device&quot;\r\n}&#39;\r\n```\r\nSo I removed the &quot;Accept&quot; header from my code to match the cURL more closely, but none the better. \r\nInterestingly, also removing the &quot;Content-Type&quot; header results in going back to a 403 status code, whatever that may tell us.\r\n\r\nMaybe I&#39;m missing out on some very basic knowledge here (it is my first time working with basically anything  included in this except Java), maybe I&#39;ve made some blatant error or something else entirely. Whatever it is, I have no clue what it may be.\r\n","title":"Why do these REST Assured queries not get the same result as doing it in Postman? (403 or 400 status code vs desired 201)","body":"<p>For a group project at university, we're writing a Micronaut application for managing some data with a REST API, which I'm supposed to test with REST Assured. To start off with, I'm basically trying to convert a successful Postman request (POST to the path user/38/devices with body <code>{&quot;name&quot;:&quot;Test Device&quot;}</code> - i.e. creating a device called &quot;Test Device&quot; for this random existing user - with authentication via a bearer token) to REST Assured code that just checks if the status code is 201 as it should be.</p>\n<p>My first attempt after parsing through the REST Assured and Micronaut Test usage guides was this:</p>\n<pre><code>@Test\npublic void devicePostTest(RequestSpecification spec) {\n    spec.given().auth().oauth2(bearerToken).param(&quot;name&quot;, &quot;Test Device&quot;)\n            .when().post(&quot;/user/38/devices&quot;)\n            .then().statusCode(201);\n}\n</code></pre>\n<p>But the status code is 403.\nAfter finding <a href=\"https://stackoverflow.com/questions/42790021/rest-assured-bearer-authentication\">this similar Stackoverflow question</a>, I changed it to this:</p>\n<pre><code>@Test\npublic void devicePostTest(RequestSpecification spec) {\n    spec.given().headers(&quot;Authorization&quot;, &quot;Bearer &quot; + bearerToken,&quot;Content-Type&quot;, ContentType.JSON,\n                &quot;Accept&quot;, ContentType.JSON)\n            .param(&quot;name&quot;, &quot;Test Device&quot;)\n            .when().post(&quot;/user/38/devices&quot;)\n            .then().statusCode(201);\n    }\n</code></pre>\n<p>Which curiously now throws a 400. At this point, I found Postman's feature to generate cURL which gives me this:</p>\n<pre><code>curl --location 'http://localhost:9080/user/38/devices' \\\n--header 'Content-Type: application/json' \\\n--header 'Authorization: Bearer *bearerToken*' \\\n--data '{\n    &quot;name&quot;:&quot;Test Device&quot;\n}'\n</code></pre>\n<p>So I removed the &quot;Accept&quot; header from my code to match the cURL more closely, but none the better.\nInterestingly, also removing the &quot;Content-Type&quot; header results in going back to a 403 status code, whatever that may tell us.</p>\n<p>Maybe I'm missing out on some very basic knowledge here (it is my first time working with basically anything  included in this except Java), maybe I've made some blatant error or something else entirely. Whatever it is, I have no clue what it may be.</p>\n"},{"tags":["java","spring","aspectj","spring-aop"],"answers":[{"tags":[],"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1691804613,"creation_date":1419086272,"answer_id":27581226,"question_id":27580958,"body_markdown":"Your understanding is right. Spring AOP is proxy-based. Spring uses either JDK proxies (preferred wheneven the proxied target implements at least one interface) or CGLIB proxies (if the target object does not implement any interfaces) to create the proxy for a given target bean.\r\n\r\nUnless configured to do otherwise, Spring AOP performs run-time weaving. You can however set up Spring to do load-time weaving through AspectJ. Check the [documentation link][1] for more details.\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-ataspectj#","title":"How Spring aspects work internally?","body":"<p>Your understanding is right. Spring AOP is proxy-based. Spring uses either JDK proxies (preferred wheneven the proxied target implements at least one interface) or CGLIB proxies (if the target object does not implement any interfaces) to create the proxy for a given target bean.</p>\n<p>Unless configured to do otherwise, Spring AOP performs run-time weaving. You can however set up Spring to do load-time weaving through AspectJ. Check the <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-ataspectj#\" rel=\"nofollow noreferrer\">documentation link</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1450808039,"creation_date":1450808039,"answer_id":34422044,"question_id":27580958,"body_markdown":"Still there are two points to clarify here\r\n\r\nFirst one in my post is actually load time weaving not run time weaving\r\n\r\nFrom this [link][1]\r\n\r\n**Load-time weaving (LTW)** is simply binary weaving defered until the point that a class loader loads a class file and defines the class to the JVM. To support this, one or more &quot;weaving class loaders&quot;, either provided explicitly by the run-time environment or enabled through a &quot;weaving agent&quot; are required.\r\n\r\nSecond one is compile time weaving\r\n\r\n**Compile-time weaving** is the simplest approach. When you have the source code for an application, ajc will compile from source and produce woven class files as output. The invocation of the weaver is integral to the ajc compilation process. The aspects themselves may be in source or binary form. If the aspects are required for the affected classes to compile, then you must weave at compile-time. Aspects are required, e.g., when they add members to a class and other classes being compiled reference the added members.\r\n\r\n\r\n  [1]: https://eclipse.org/aspectj/doc/released/devguide/ltw.html","title":"How Spring aspects work internally?","body":"<p>Still there are two points to clarify here</p>\n\n<p>First one in my post is actually load time weaving not run time weaving</p>\n\n<p>From this <a href=\"https://eclipse.org/aspectj/doc/released/devguide/ltw.html\" rel=\"nofollow\">link</a></p>\n\n<p><strong>Load-time weaving (LTW)</strong> is simply binary weaving defered until the point that a class loader loads a class file and defines the class to the JVM. To support this, one or more \"weaving class loaders\", either provided explicitly by the run-time environment or enabled through a \"weaving agent\" are required.</p>\n\n<p>Second one is compile time weaving</p>\n\n<p><strong>Compile-time weaving</strong> is the simplest approach. When you have the source code for an application, ajc will compile from source and produce woven class files as output. The invocation of the weaver is integral to the ajc compilation process. The aspects themselves may be in source or binary form. If the aspects are required for the affected classes to compile, then you must weave at compile-time. Aspects are required, e.g., when they add members to a class and other classes being compiled reference the added members.</p>\n"}],"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13434,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"accepted_answer_id":27581226,"answer_count":2,"score":16,"last_activity_date":1691804613,"creation_date":1419084301,"question_id":27580958,"body_markdown":"Say Service calls Dao class on which logging aspect(annotational)  needs to be applied. I am wondering how\r\naspects actually gets applied. \r\n\r\nAs per my understanding at the time of DAO injection under Service object, spring finds out that there is some \r\naspect(in this case logging) is configured for DAO, so it injects the proxy object instead of actual target object.\r\nNow when actual call is made to any method inside DAO, proxy applies the aspects and then call the actual target\r\nobject. Is that correct ? Also i believe this is called Run time weaving.  \r\n\r\nOn the other hand same can be done with load time weaving(with javaagent configuration) where byte code manipulation\r\nis done for classes on which aspects needs to be applied.  So proxy does not come into picture here.\r\n\r\nPlease correct me if i am wrong as this is the foundation for all spring modules?\r\n\r\n","title":"How Spring aspects work internally?","body":"<p>Say Service calls Dao class on which logging aspect(annotational)  needs to be applied. I am wondering how\naspects actually gets applied. </p>\n\n<p>As per my understanding at the time of DAO injection under Service object, spring finds out that there is some \naspect(in this case logging) is configured for DAO, so it injects the proxy object instead of actual target object.\nNow when actual call is made to any method inside DAO, proxy applies the aspects and then call the actual target\nobject. Is that correct ? Also i believe this is called Run time weaving.  </p>\n\n<p>On the other hand same can be done with load time weaving(with javaagent configuration) where byte code manipulation\nis done for classes on which aspects needs to be applied.  So proxy does not come into picture here.</p>\n\n<p>Please correct me if i am wrong as this is the foundation for all spring modules?</p>\n"},{"tags":["java","android","notifications","android-notifications","alarmmanager"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1691804088,"post_id":76887413,"comment_id":135545294,"body_markdown":"I highly doubt you can programatically.  It would kind of defeat the purpose of blocking them","body":"I highly doubt you can programatically.  It would kind of defeat the purpose of blocking them"},{"owner":{"account_id":19730063,"reputation":1,"user_id":14445746,"display_name":"Ehsan"},"score":0,"creation_date":1691804393,"post_id":76887413,"comment_id":135545313,"body_markdown":"@GabeSechan\n&quot;Is it possible to make an application run in the background permanently?&quot;","body":"@GabeSechan &quot;Is it possible to make an application run in the background permanently?&quot;"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1691813258,"post_id":76887413,"comment_id":135545709,"body_markdown":"No.  It never has been on Android.  And in modern ANdroid you&#39;re extremely limited.  But explain why you want to do that, there&#39;s probably a way to achieve it without being running constantly","body":"No.  It never has been on Android.  And in modern ANdroid you&#39;re extremely limited.  But explain why you want to do that, there&#39;s probably a way to achieve it without being running constantly"},{"owner":{"account_id":19730063,"reputation":1,"user_id":14445746,"display_name":"Ehsan"},"score":0,"creation_date":1691840503,"post_id":76887413,"comment_id":135547771,"body_markdown":"@GabeSechan    i make simple (to do list app) with notification i used alarm manager it is work correctly but when the app is close alarm manager don&#39;t post any notification","body":"@GabeSechan    i make simple (to do list app) with notification i used alarm manager it is work correctly but when the app is close alarm manager don&#39;t post any notification"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691939261,"post_id":76887413,"comment_id":135555674,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":19730063,"reputation":1,"user_id":14445746,"display_name":"Ehsan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691804089,"creation_date":1691804020,"question_id":76887413,"body_markdown":"how can i make may android application is allowed to send notification when it is close from **phone security or from phone master app**\r\n\r\ni need to get permission from user to add may application to white list\r\n\r\nas this figure\r\n\r\n(https://i.stack.imgur.com/lx9RA.jpg)\r\n\r\n(https://i.stack.imgur.com/44agV.jpg)\r\n\r\n\r\n\r\n\r\ni will search and try different solutions but not solved may problem\r\n\r\n","title":"android notification problem in ( tecno,Xiaomi,infinix , ...) phone","body":"<p>how can i make may android application is allowed to send notification when it is close from <strong>phone security or from phone master app</strong></p>\n<p>i need to get permission from user to add may application to white list</p>\n<p>as this figure</p>\n<p>(<a href=\"https://i.stack.imgur.com/lx9RA.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/lx9RA.jpg</a>)</p>\n<p>(<a href=\"https://i.stack.imgur.com/44agV.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/44agV.jpg</a>)</p>\n<p>i will search and try different solutions but not solved may problem</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9741,"page":251,"page_size":100}
