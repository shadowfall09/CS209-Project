{"items":[{"tags":["java","loops","primes"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1612840947,"post_id":66112449,"comment_id":116886250,"body_markdown":"It looks like you need `break;` instead of `continue;`.","body":"It looks like you need <code>break;</code> instead of <code>continue;</code>."}],"answers":[{"tags":[],"owner":{"account_id":17551404,"reputation":199,"user_id":12731743,"display_name":"Major_Ash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612841030,"creation_date":1612841030,"answer_id":66112544,"question_id":66112449,"body_markdown":"You need to add a flag to check the divisibility of the value `i`. It will remain true only if `i` is a prime number. Later if the flag remains true, you can return `i` else you need to continue iterating \r\n\r\nWhat&#39;s happening in your code is that when i=15, and the inner loop starts iterating starting from 2, 15%2!=0 so it skips the if condition and returns 15\r\n \r\n    for (int i = number-1; i &gt; 1; i--) {\r\n            if (number % i == 0) {\r\n                bool flag = true;\r\n                for (int j = 2; j &lt; i; j++) {\r\n                    if (i % j == 0) {\r\n                        flag = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if(flag)\r\n                    return i;\r\n            }\r\n        }","title":"Find the largest prime factor of a given number","body":"<p>You need to add a flag to check the divisibility of the value <code>i</code>. It will remain true only if <code>i</code> is a prime number. Later if the flag remains true, you can return <code>i</code> else you need to continue iterating</p>\n<p>What's happening in your code is that when i=15, and the inner loop starts iterating starting from 2, 15%2!=0 so it skips the if condition and returns 15</p>\n<pre><code>for (int i = number-1; i &gt; 1; i--) {\n        if (number % i == 0) {\n            bool flag = true;\n            for (int j = 2; j &lt; i; j++) {\n                if (i % j == 0) {\n                    flag = false;\n                    break;\n                }\n            }\n            if(flag)\n                return i;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17619742,"reputation":718,"user_id":12785994,"display_name":"javadev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612841407,"creation_date":1612841407,"answer_id":66112582,"question_id":66112449,"body_markdown":"In short: The &quot;prime&quot; validation is wrong.\r\n\r\nIn your code, in the inner loop, you expect all numbers will be factors of &quot;i&quot;, which is of course wrong.\r\n\r\nYour code will retrieve the largest factor of your input, which there is a number which is not a factor of it (i % j != 0), therefore the largest factor of it (regardless of  primality).\r\n","title":"Find the largest prime factor of a given number","body":"<p>In short: The &quot;prime&quot; validation is wrong.</p>\n<p>In your code, in the inner loop, you expect all numbers will be factors of &quot;i&quot;, which is of course wrong.</p>\n<p>Your code will retrieve the largest factor of your input, which there is a number which is not a factor of it (i % j != 0), therefore the largest factor of it (regardless of  primality).</p>\n"},{"tags":[],"owner":{"account_id":20511313,"reputation":2360,"user_id":15102459,"display_name":"Thiyanesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612842570,"creation_date":1612842570,"answer_id":66112714,"question_id":66112449,"body_markdown":"1. Find the prime numbers before the input number\r\n2. Sort the prime numbers in reverse order\r\n3. Iterate over the prime numbers and check whether its an exact multiple\r\n4. If its an exact multiple return the prime number\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\nclass PrimeFactorTest {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        int[] inputs = new int[]{-100, -25, -2, -1, 0, 1, 2, 3, 4, 5, 100, 1223, 2000, 874032849,\r\n            Integer.MAX_VALUE, Integer.MAX_VALUE};\r\n\r\n        for (final int input : inputs) {\r\n            Optional primeFactor = largestPrimeFactor(input);\r\n            if (primeFactor.isPresent()) {\r\n                System.out.println(&quot;Largest Prime Factor of &quot; + input + &quot; is &quot; + primeFactor.get());\r\n            } else {\r\n                System.out.println(&quot;No Prime Factor for &quot; + input);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static Optional&lt;Integer&gt; largestPrimeFactor(final int input) {\r\n        if (input &lt; 0) {\r\n            return largestPrimeFactor(Math.abs(input));\r\n        }\r\n        final int sqrt = (int) Math.sqrt(input);\r\n        List&lt;Integer&gt; primes = getPrimesInDescendingOrder(sqrt);\r\n        if (primes.size() == 0) {\r\n            return Optional.empty();\r\n        }\r\n        for (final int prime : primes) {\r\n            if (input % prime == 0) {\r\n                return Optional.of(prime);\r\n            }\r\n        }\r\n        return Optional.of(input);\r\n    }\r\n\r\n    private static List&lt;Integer&gt; getPrimesInDescendingOrder(final int input) {\r\n        if (input &lt; 2) {\r\n            return new ArrayList&lt;&gt;();\r\n        }\r\n        List&lt;Integer&gt; primes = new ArrayList&lt;&gt;();\r\n        primes.add(2);\r\n        for (int current = 3; current &lt;= input; current++) {\r\n            boolean isPrime = true;\r\n            for (int prime : primes) {\r\n                if (current % prime == 0) {\r\n                    isPrime = false;\r\n                }\r\n            }\r\n            if (isPrime) {\r\n                primes.add(current);\r\n            }\r\n        }\r\n        primes.sort(Collections.reverseOrder());\r\n        return Collections.unmodifiableList(primes);\r\n    }\r\n}\r\n```\r\n\r\n","title":"Find the largest prime factor of a given number","body":"<ol>\n<li>Find the prime numbers before the input number</li>\n<li>Sort the prime numbers in reverse order</li>\n<li>Iterate over the prime numbers and check whether its an exact multiple</li>\n<li>If its an exact multiple return the prime number</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Optional;\n\nclass PrimeFactorTest {\n\n    public static void main(String[] args) throws Exception {\n        int[] inputs = new int[]{-100, -25, -2, -1, 0, 1, 2, 3, 4, 5, 100, 1223, 2000, 874032849,\n            Integer.MAX_VALUE, Integer.MAX_VALUE};\n\n        for (final int input : inputs) {\n            Optional primeFactor = largestPrimeFactor(input);\n            if (primeFactor.isPresent()) {\n                System.out.println(&quot;Largest Prime Factor of &quot; + input + &quot; is &quot; + primeFactor.get());\n            } else {\n                System.out.println(&quot;No Prime Factor for &quot; + input);\n            }\n        }\n    }\n\n    public static Optional&lt;Integer&gt; largestPrimeFactor(final int input) {\n        if (input &lt; 0) {\n            return largestPrimeFactor(Math.abs(input));\n        }\n        final int sqrt = (int) Math.sqrt(input);\n        List&lt;Integer&gt; primes = getPrimesInDescendingOrder(sqrt);\n        if (primes.size() == 0) {\n            return Optional.empty();\n        }\n        for (final int prime : primes) {\n            if (input % prime == 0) {\n                return Optional.of(prime);\n            }\n        }\n        return Optional.of(input);\n    }\n\n    private static List&lt;Integer&gt; getPrimesInDescendingOrder(final int input) {\n        if (input &lt; 2) {\n            return new ArrayList&lt;&gt;();\n        }\n        List&lt;Integer&gt; primes = new ArrayList&lt;&gt;();\n        primes.add(2);\n        for (int current = 3; current &lt;= input; current++) {\n            boolean isPrime = true;\n            for (int prime : primes) {\n                if (current % prime == 0) {\n                    isPrime = false;\n                }\n            }\n            if (isPrime) {\n                primes.add(current);\n            }\n        }\n        primes.sort(Collections.reverseOrder());\n        return Collections.unmodifiableList(primes);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8709503,"reputation":454,"user_id":6516178,"display_name":"Chris Foley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612842908,"creation_date":1612842908,"answer_id":66112750,"question_id":66112449,"body_markdown":"I came up with this. If you start at 2 and work up the way, you are eliminating all the non-primes before you hit them, as they will no-longer be factors of the remainder.\r\n\r\n    import static org.junit.Assert.assertEquals;\r\n    \r\n    import org.junit.Test;\r\n    \r\n    public class LargestPrimeFactor {\r\n    \t@Test\r\n    \tpublic void testGetLargestPrime() {\r\n    \t\tassertEquals(2, getLargestPrime(2));\r\n    \t\tassertEquals(3, getLargestPrime(3));\r\n    \t\tassertEquals(2, getLargestPrime(4));\r\n    \t\tassertEquals(5, getLargestPrime(5));\r\n    \t\tassertEquals(3, getLargestPrime(6));\r\n    \t\tassertEquals(7, getLargestPrime(7));\r\n    \t\tassertEquals(2, getLargestPrime(8));\r\n    \t\tassertEquals(3, getLargestPrime(9));\r\n    \t\t\r\n    \t\tassertEquals(23, getLargestPrime(23*23*7*2*5*11*11));\r\n    \t}\r\n    \r\n    \tint getLargestPrime(int number) {\r\n    \t\tfor (int i = 2; number &gt; i; i++) {\r\n    \t\t\twhile (number &gt; i &amp;&amp; number % i == 0) {\r\n    \t\t\t\tnumber = number / i;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn number;\r\n    \t}\r\n    }\r\n\r\n","title":"Find the largest prime factor of a given number","body":"<p>I came up with this. If you start at 2 and work up the way, you are eliminating all the non-primes before you hit them, as they will no-longer be factors of the remainder.</p>\n<pre><code>import static org.junit.Assert.assertEquals;\n\nimport org.junit.Test;\n\npublic class LargestPrimeFactor {\n    @Test\n    public void testGetLargestPrime() {\n        assertEquals(2, getLargestPrime(2));\n        assertEquals(3, getLargestPrime(3));\n        assertEquals(2, getLargestPrime(4));\n        assertEquals(5, getLargestPrime(5));\n        assertEquals(3, getLargestPrime(6));\n        assertEquals(7, getLargestPrime(7));\n        assertEquals(2, getLargestPrime(8));\n        assertEquals(3, getLargestPrime(9));\n        \n        assertEquals(23, getLargestPrime(23*23*7*2*5*11*11));\n    }\n\n    int getLargestPrime(int number) {\n        for (int i = 2; number &gt; i; i++) {\n            while (number &gt; i &amp;&amp; number % i == 0) {\n                number = number / i;\n            }\n        }\n        return number;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612844478,"creation_date":1612844478,"answer_id":66112941,"question_id":66112449,"body_markdown":"It wasn&#39;t working fine until it reached 45. It failed for 4, 8, 12, 16, 18, 20, 24, 27, 28, 30, 32, 36, 40, 42, and 44. It returned -1 for every prime number, which is correct, but it also returned -1 for 4. It usually finds the largest factor, regardless of whether it&#39;s prime.\r\n\r\nYour outer loop finds factors, starting with the largest. Your inner loop doesn&#39;t make sense. It needs to have a test for primality. It looks like you meant it to quit when it finds a factor of i, but it doesn&#39;t do that. Instead, it quits when it finds a number that isn&#39;t a factor. The continue statement tells it to go to the next value of j. You probably meant for it to go on to the next value of i. To do that, you could use break. That would bail out of the inner loop. Or you could label the outer loop and use the label in the continue statement, which is probably what you had in mind:\r\n\r\n    candidates:\r\n    for (int i = number - 1; i &gt; 1; i--) {\r\n      if (number % i == 0) {\r\n        for (int j = 2; j &lt; i; j++) {\r\n          if (i % j == 0) {\r\n            continue candidates; // This continues the outer loop\r\n          }\r\n          return i;\r\n        }\r\n      }\r\n    }\r\n    return -1;\r\n\r\n\r\n\r\nThat gets you closer, but it still fails for powers of two, and for cases where it finds p^n where p is a prime number.\r\n\r\nAlso, there&#39;s no point in starting the outer loop with number-1. You can skip all the numbers higher than number/2. None of them will produce a modulo of zero.\r\n","title":"Find the largest prime factor of a given number","body":"<p>It wasn't working fine until it reached 45. It failed for 4, 8, 12, 16, 18, 20, 24, 27, 28, 30, 32, 36, 40, 42, and 44. It returned -1 for every prime number, which is correct, but it also returned -1 for 4. It usually finds the largest factor, regardless of whether it's prime.</p>\n<p>Your outer loop finds factors, starting with the largest. Your inner loop doesn't make sense. It needs to have a test for primality. It looks like you meant it to quit when it finds a factor of i, but it doesn't do that. Instead, it quits when it finds a number that isn't a factor. The continue statement tells it to go to the next value of j. You probably meant for it to go on to the next value of i. To do that, you could use break. That would bail out of the inner loop. Or you could label the outer loop and use the label in the continue statement, which is probably what you had in mind:</p>\n<pre><code>candidates:\nfor (int i = number - 1; i &gt; 1; i--) {\n  if (number % i == 0) {\n    for (int j = 2; j &lt; i; j++) {\n      if (i % j == 0) {\n        continue candidates; // This continues the outer loop\n      }\n      return i;\n    }\n  }\n}\nreturn -1;\n</code></pre>\n<p>That gets you closer, but it still fails for powers of two, and for cases where it finds p^n where p is a prime number.</p>\n<p>Also, there's no point in starting the outer loop with number-1. You can skip all the numbers higher than number/2. None of them will produce a modulo of zero.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612844938,"creation_date":1612844938,"answer_id":66112995,"question_id":66112449,"body_markdown":"I would recommend doing something like this.  First, consider `2*2*3*47 = 564`. The square root of `564 is &lt;= 24`.  So all you need to do is divide by numbers up to `24`.  First, eliminate `2`. That leaves `3*47`.  Next is `3` which leaves `47`. Since no other number from `4 thru 24` divides `47`, `47` must be a prime.  If it were composite, it&#39;s prime factors would have been factored out by one of the earlier divisors.\r\n\r\nThis can be further optimized by factoring out `2` in a separate loop. Then starting with `3`, start dividing by only the odd numbers (`2` already eliminated the even factors if there were any).\r\n\r\nIf the situation arises when the number is reduced to 1, then the last divisor that did the reduction must be the largest prime.\r\n```\r\nint[] testData = { 2, 10, 2 * 2 * 5, 2 * 3 * 47 * 5,\r\n\t\t2 * 2 * 2 * 3 * 3 * 3 * 17 * 17 * 17 };\r\nfor (int v : testData) {\r\n\tSystem.out.printf(&quot;%8s - largest prime factor = %s%n&quot;, v,\r\n\t\t\tgetLargestPrime(v));\r\n}\r\n```\r\nPrints\r\n```\r\n       2 - largest prime factor = 2\r\n      10 - largest prime factor = 5\r\n      20 - largest prime factor = 5\r\n    1410 - largest prime factor = 47\r\n 1061208 - largest prime factor = 17\r\n```\r\nThe method\r\n```\t\r\npublic static int getLargestPrime(int number) {\r\n    // no primes less than 2 exist.\r\n\tif (number &lt; 2) {\r\n\t\treturn -1;\r\n\t}\r\n\twhile (number % 2 == 0) {\r\n\t\tnumber /= 2;\r\n\t}\r\n\t\r\n\tint lastDivisor = 2;\r\n\tfor (int d = 3; d &lt;= Math.sqrt(number); d += 2) {\r\n\t\tlastDivisor = d;\r\n\t\twhile (number % d == 0) {\r\n\t\t\tnumber /= d;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn number == 1 ? lastDivisor : number;\r\n}","title":"Find the largest prime factor of a given number","body":"<p>I would recommend doing something like this.  First, consider <code>2*2*3*47 = 564</code>. The square root of <code>564 is &lt;= 24</code>.  So all you need to do is divide by numbers up to <code>24</code>.  First, eliminate <code>2</code>. That leaves <code>3*47</code>.  Next is <code>3</code> which leaves <code>47</code>. Since no other number from <code>4 thru 24</code> divides <code>47</code>, <code>47</code> must be a prime.  If it were composite, it's prime factors would have been factored out by one of the earlier divisors.</p>\n<p>This can be further optimized by factoring out <code>2</code> in a separate loop. Then starting with <code>3</code>, start dividing by only the odd numbers (<code>2</code> already eliminated the even factors if there were any).</p>\n<p>If the situation arises when the number is reduced to 1, then the last divisor that did the reduction must be the largest prime.</p>\n<pre><code>int[] testData = { 2, 10, 2 * 2 * 5, 2 * 3 * 47 * 5,\n        2 * 2 * 2 * 3 * 3 * 3 * 17 * 17 * 17 };\nfor (int v : testData) {\n    System.out.printf(&quot;%8s - largest prime factor = %s%n&quot;, v,\n            getLargestPrime(v));\n}\n</code></pre>\n<p>Prints</p>\n<pre><code>       2 - largest prime factor = 2\n      10 - largest prime factor = 5\n      20 - largest prime factor = 5\n    1410 - largest prime factor = 47\n 1061208 - largest prime factor = 17\n</code></pre>\n<p>The method</p>\n<pre><code>public static int getLargestPrime(int number) {\n    // no primes less than 2 exist.\n    if (number &lt; 2) {\n        return -1;\n    }\n    while (number % 2 == 0) {\n        number /= 2;\n    }\n    \n    int lastDivisor = 2;\n    for (int d = 3; d &lt;= Math.sqrt(number); d += 2) {\n        lastDivisor = d;\n        while (number % d == 0) {\n            number /= d;\n        }\n    }\n    \n    return number == 1 ? lastDivisor : number;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15947332,"reputation":164,"user_id":11507522,"display_name":"Chrisphine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662998307,"creation_date":1662997868,"answer_id":73691952,"question_id":66112449,"body_markdown":"This code will help you find the largest prime number.  Most online servers won&#39;t allow it to run. Just change the value of n.\r\n   \r\n\r\n    public class PrimeExample{    \r\n             public static void main(String args[]){          \r\n              for(int n = 100;n&lt;=1000;n++){\r\n               int i,m=0,flag=0; \r\n                  m=n/2;      \r\n                  if(n==0||n==1){  \r\n                   System.out.println(n+&quot; is not prime number&quot;);      \r\n                  }else{  \r\n                   for(i=2;i&lt;=m;i++){      \r\n                    if(n%i==0){      \r\n                     System.out.println(n+&quot; is not prime number&quot;);      \r\n                     flag=1;      \r\n                     break;      \r\n                    }      \r\n                   }      \r\n                   if(flag==0)  { System.out.println(n+&quot; is prime number&quot;); }  \r\n                }//end of else  \r\n              }\r\n            }    \r\n        }  ","title":"Find the largest prime factor of a given number","body":"<p>This code will help you find the largest prime number.  Most online servers won't allow it to run. Just change the value of n.</p>\n<pre><code>public class PrimeExample{    \n         public static void main(String args[]){          \n          for(int n = 100;n&lt;=1000;n++){\n           int i,m=0,flag=0; \n              m=n/2;      \n              if(n==0||n==1){  \n               System.out.println(n+&quot; is not prime number&quot;);      \n              }else{  \n               for(i=2;i&lt;=m;i++){      \n                if(n%i==0){      \n                 System.out.println(n+&quot; is not prime number&quot;);      \n                 flag=1;      \n                 break;      \n                }      \n               }      \n               if(flag==0)  { System.out.println(n+&quot; is prime number&quot;); }  \n            }//end of else  \n          }\n        }    \n    }  \n</code></pre>\n"}],"owner":{"account_id":19953689,"reputation":45,"user_id":14622768,"display_name":"Sk_Hssn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2750,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":7,"score":1,"last_activity_date":1662998307,"creation_date":1612840233,"question_id":66112449,"body_markdown":"I am writing this method which should return the largest prime factor of a given number. It was working fine till 45 was entered and the output was 15, even though the output should be 5. I am struggling to find the bug. Please help.\r\n\r\n    public static int getLargestPrime(int number) {\r\n    \r\n            if (number &lt; 0) {\r\n                return -1;\r\n            }\r\n    \r\n            for (int i = number-1; i &gt; 1; i--) {\r\n                if (number % i == 0) {\r\n                    for (int j = 2; j &lt; i; j++) {\r\n                        if (i % j == 0) {\r\n                            continue;\r\n                        }\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n            return -1;\r\n    \r\n        }","title":"Find the largest prime factor of a given number","body":"<p>I am writing this method which should return the largest prime factor of a given number. It was working fine till 45 was entered and the output was 15, even though the output should be 5. I am struggling to find the bug. Please help.</p>\n<pre><code>public static int getLargestPrime(int number) {\n\n        if (number &lt; 0) {\n            return -1;\n        }\n\n        for (int i = number-1; i &gt; 1; i--) {\n            if (number % i == 0) {\n                for (int j = 2; j &lt; i; j++) {\n                    if (i % j == 0) {\n                        continue;\n                    }\n                    return i;\n                }\n            }\n        }\n        return -1;\n\n    }\n</code></pre>\n"},{"tags":["java","spring","oracle","spring-boot"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1629825097,"post_id":68910711,"comment_id":121786975,"body_markdown":"No stack trace? that could tell you if hikari or tomcat pool is causing the error. https://stackoverflow.com/a/40090148/2834978","body":"No stack trace? that could tell you if hikari or tomcat pool is causing the error. <a href=\"https://stackoverflow.com/a/40090148/2834978\">stackoverflow.com/a/40090148/2834978</a>"},{"owner":{"account_id":9697932,"reputation":1242,"user_id":7193786,"accept_rate":87,"display_name":"Sahbaz"},"score":0,"creation_date":1629825784,"post_id":68910711,"comment_id":121787265,"body_markdown":"@LMC i added stack trace, could it tell you something ?","body":"@LMC i added stack trace, could it tell you something ?"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1629827567,"post_id":68910711,"comment_id":121787963,"body_markdown":"Yes, seems to be the oracle wrapper issue. Hikari is not able to unwrap the connection: `Caused by: java.sql.SQLException: Object does not wrap anything with requested interface \t\n at oracle.jdbc.driver.OracleConnection.isWrapperFor(OracleConnection.java:251)\n at com.zaxxer.hikari.pool.ProxyConnection.isWrapperFor(ProxyConnection.java:448)`","body":"Yes, seems to be the oracle wrapper issue. Hikari is not able to unwrap the connection: <code>Caused by: java.sql.SQLException: Object does not wrap anything with requested interface \t  at oracle.jdbc.driver.OracleConnection.isWrapperFor(OracleConne&zwnj;&#8203;ction.java:251)  at com.zaxxer.hikari.pool.ProxyConnection.isWrapperFor(ProxyCon&zwnj;&#8203;nection.java:448)</code>"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1629827903,"post_id":68910711,"comment_id":121788081,"body_markdown":"Fix could depend on your oracle db version","body":"Fix could depend on your oracle db version"},{"owner":{"account_id":9697932,"reputation":1242,"user_id":7193786,"accept_rate":87,"display_name":"Sahbaz"},"score":0,"creation_date":1629830211,"post_id":68910711,"comment_id":121788913,"body_markdown":"@LMC\n\nVersion is: Oracle Database 19c Enterprise Edition Release 19.0.0.0.0","body":"@LMC  Version is: Oracle Database 19c Enterprise Edition Release 19.0.0.0.0"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1629832366,"post_id":68910711,"comment_id":121789735,"body_markdown":"Dialect could be `org.hibernate.dialect.Oracle12cDialect` and dependency could be `implementation group: &#39;com.oracle.database.jdbc&#39;, name: &#39;ojdbc8&#39;, version: &#39;19.11.0.0&#39;`. Updating the driver could fix the issue, worth trying.","body":"Dialect could be <code>org.hibernate.dialect.Oracle12cDialect</code> and dependency could be <code>implementation group: &#39;com.oracle.database.jdbc&#39;, name: &#39;ojdbc8&#39;, version: &#39;19.11.0.0&#39;</code>. Updating the driver could fix the issue, worth trying."},{"owner":{"account_id":9697932,"reputation":1242,"user_id":7193786,"accept_rate":87,"display_name":"Sahbaz"},"score":0,"creation_date":1629843342,"post_id":68910711,"comment_id":121792887,"body_markdown":"I already tried that unfortunately its not working","body":"I already tried that unfortunately its not working"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1629845396,"post_id":68910711,"comment_id":121793315,"body_markdown":"Did you updated hikari too?","body":"Did you updated hikari too?"},{"owner":{"account_id":4946282,"reputation":1350,"user_id":3981539,"display_name":"Kavitha Karunakaran"},"score":0,"creation_date":1631112950,"post_id":68910711,"comment_id":122137158,"body_markdown":"@Sahbaz - just out of curiosity - why do you have both ldap and jdbc url values configured for your spring.datasource.url property in your yml file?","body":"@Sahbaz - just out of curiosity - why do you have both ldap and jdbc url values configured for your spring.datasource.url property in your yml file?"}],"owner":{"account_id":9697932,"reputation":1242,"user_id":7193786,"accept_rate":87,"display_name":"Sahbaz"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1273,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1662998304,"creation_date":1629821539,"question_id":68910711,"body_markdown":"I have very annoying issue and i have no idea where to start, i already checked every link on internet regarding this problem and was not able to find anything useful.\r\n\r\nSo basically i have fresh spring boot application and i am trying to connect it to existing oracle database. \r\n\r\nMy application.properties for local instance looks like this:\r\n\r\n\r\n    spring:\r\n      datasource:\r\n        url: jdbc:oracle:thin:@ldap://oraldap1:389/DB,cn=OracleContext,dc=COMPANY,dc=com ldap://oraldap2:389/DB,cn=OracleContext,dc=COMPANY,dc=com\r\n        username: user\r\n        password: pass\r\n        driverClassName: oracle.jdbc.OracleDriver\r\n        hikari:\r\n          maximum-pool-size: 30\r\n          connection-timeout: 20000\r\n        tomcat:\r\n          initial-size: 2\r\n          max-active: 20\r\n          min-idle: 2\r\n          max-idle: 2\r\n      jpa:\r\n        properties:\r\n          hibernate:\r\n            dialect: org.hibernate.dialect.Oracle10gDialect\r\n            jdbc:\r\n              use_get_generated_keys: true\r\n\r\n\r\nAnd in my gradle.build i have this dependency:\r\n\r\n    compile group: &#39;com.oracle.database.jdbc&#39;, name: &#39;ojdbc8&#39;, version: &#39;12.2.0.1&#39;\r\n\r\nWhen i start application i can  see 2 errors:\r\n\r\n&gt; 2021-08-24T17:46:03.685+02:00 WARN - 0 jvm\r\n&gt; org.springframework.boot.actuate.health.AbstractHealthIndicator\r\n&gt; {&quot;x-company-correlation-id&quot;:&quot;&quot;, &quot;@trace_info&quot;:&quot;[ebas,,,,]&quot;,\r\n&gt; &quot;@message&quot;: &quot;DataSource health check failed&quot;,&quot;@data&quot;:{}, &quot;@exception&quot;:\r\n&gt; &quot;\torg.springframework.jdbc.CannotGetJdbcConnectionException: Failed to\r\n&gt; obtain JDBC Connection; nested exception is java.sql.SQLException:\r\n&gt; Object does not wrap anything with requested interface\r\n&gt; \r\n&gt; 2021-08-24T17:45:51.418+02:00 ERROR - 0 jvm\r\n&gt; org.hibernate.hql.spi.id.IdTableHelper\r\n&gt; {&quot;x-company-correlation-id&quot;:&quot;&quot;, &quot;@trace_info&quot;:&quot;[ebas,,,,]&quot;,\r\n&gt; &quot;@message&quot;: &quot;Unable obtain JDBC Connection&quot;,&quot;@data&quot;:{}, &quot;@exception&quot;:\r\n&gt; &quot;\tjava.sql.SQLException: Object does not wrap anything with requested\r\n&gt; interface\r\n\r\n\r\nAnd the funny thing, when i put intentionally wrong password on application startup i can see message that says: \r\n\r\n&gt; Unable obtain JDBC Connection&quot;,&quot;@data&quot;:{}, &quot;@exception&quot;:\r\n&gt; &quot;\tjava.sql.SQLException: ORA-01017: invalid username/password; logon\r\n&gt; denied\r\n\r\n\r\nOf course i already know that this database url and drivers are correct because i can connect to db via dbeaver.\r\n\r\n\r\nedit: \r\nHere are stacktraces:\r\n\r\n&gt; at\r\n&gt; org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:82)\r\n&gt; \tat\r\n&gt; org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:324)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.getProduct(DataSourceHealthIndicator.java:122)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doDataSourceHealthCheck(DataSourceHealthIndicator.java:107)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doHealthCheck(DataSourceHealthIndicator.java:102)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.AbstractHealthIndicator.health(AbstractHealthIndicator.java:82)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthIndicator.getHealth(HealthIndicator.java:37)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:81)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:38)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:108)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthEndpointSupport.getAggregateHealth(HealthEndpointSupport.java:119)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:105)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:83)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:70)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:75)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:65)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:77)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:121)\r\n&gt; \tat\r\n&gt; org.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:96)\r\n&gt; \tat\r\n&gt; com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n&gt; \tat\r\n&gt; com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n&gt; \tat sun.reflect.GeneratedMethodAccessor99.invoke(Unknown Source) \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)\r\n&gt; \tat sun.rmi.transport.Transport$1.run(Transport.java:200) \tat\r\n&gt; sun.rmi.transport.Transport$1.run(Transport.java:197) \tat\r\n&gt; java.security.AccessController.doPrivileged(Native Method) \tat\r\n&gt; sun.rmi.transport.Transport.serviceCall(Transport.java:196) \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:573)\r\n&gt; \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:834)\r\n&gt; \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:688)\r\n&gt; \tat java.security.AccessController.doPrivileged(Native Method) \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:687)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n&gt; \tat java.lang.Thread.run(Thread.java:748) \tCaused by:\r\n&gt; java.sql.SQLException: Object does not wrap anything with requested\r\n&gt; interface \tat\r\n&gt; oracle.jdbc.driver.OracleConnection.isWrapperFor(OracleConnection.java:251)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.pool.ProxyConnection.isWrapperFor(ProxyConnection.java:448)\r\n&gt; \tat\r\n&gt; io.opentracing.contrib.spring.cloud.jdbc.JdbcAspect.getConnection(JdbcAspect.java:56)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\r\n&gt; \tat\r\n&gt; org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\r\n&gt; \tat\r\n&gt; org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\r\n&gt; \tat\r\n&gt; org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$4d55a5a7.getConnection(&lt;generated&gt;)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.HikariDataSource$$FastClassBySpringCGLIB$$eeb1ae86.invoke(&lt;generated&gt;)\r\n&gt; \tat\r\n&gt; org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\r\n&gt; \tat\r\n&gt; org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\r\n&gt; \tat\r\n&gt; org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$e4736671.getConnection(&lt;generated&gt;)\r\n&gt; \tat\r\n&gt; org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:158)\r\n&gt; \tat\r\n&gt; org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:116)\r\n&gt; \tat\r\n&gt; org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79)\r\n&gt; \t... 47 common frames omitted\r\n&gt; \r\n\r\n\r\n\r\n&gt; \tat\r\n&gt; oracle.jdbc.driver.OracleConnection.isWrapperFor(OracleConnection.java:251)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.pool.ProxyConnection.isWrapperFor(ProxyConnection.java:448)\r\n&gt; \tat\r\n&gt; io.opentracing.contrib.spring.cloud.jdbc.JdbcAspect.getConnection(JdbcAspect.java:56)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\r\n&gt; \tat\r\n&gt; org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\r\n&gt; \tat\r\n&gt; org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\r\n&gt; \tat\r\n&gt; org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$4d55a5a7.getConnection(&lt;generated&gt;)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.HikariDataSource$$FastClassBySpringCGLIB$$eeb1ae86.invoke(&lt;generated&gt;)\r\n&gt; \tat\r\n&gt; org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\r\n&gt; \tat\r\n&gt; org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\r\n&gt; \tat\r\n&gt; org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)\r\n&gt; \tat\r\n&gt; com.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$e4736671.getConnection(&lt;generated&gt;)\r\n&gt; \tat\r\n&gt; org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\r\n&gt; \tat\r\n&gt; org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\r\n&gt; \tat\r\n&gt; org.hibernate.hql.spi.id.IdTableHelper.executeIdTableCreationStatements(IdTableHelper.java:67)\r\n&gt; \tat\r\n&gt; org.hibernate.hql.spi.id.global.GlobalTemporaryTableBulkIdStrategy.finishPreparation(GlobalTemporaryTableBulkIdStrategy.java:125)\r\n&gt; \tat\r\n&gt; org.hibernate.hql.spi.id.global.GlobalTemporaryTableBulkIdStrategy.finishPreparation(GlobalTemporaryTableBulkIdStrategy.java:42)\r\n&gt; \tat\r\n&gt; org.hibernate.hql.spi.id.AbstractMultiTableBulkIdStrategyImpl.prepare(AbstractMultiTableBulkIdStrategyImpl.java:88)\r\n&gt; \tat\r\n&gt; org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:313)\r\n&gt; \tat\r\n&gt; org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:462)\r\n&gt; \tat\r\n&gt; org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1237)\r\n&gt; \tat\r\n&gt; org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)\r\n&gt; \tat\r\n&gt; org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)\r\n&gt; \tat\r\n&gt; org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391)\r\n&gt; \tat\r\n&gt; org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378)\r\n&gt; \tat\r\n&gt; org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n&gt; \tat\r\n&gt; org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108)\r\n&gt; \tat\r\n&gt; org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)\r\n&gt; \tat\r\n&gt; org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\r\n&gt; \tat\r\n&gt; org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\r\n&gt; \tat\r\n&gt; org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)\r\n&gt; \tat\r\n&gt; org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\r\n&gt; \tat\r\n&gt; org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\r\n&gt; \tat\r\n&gt; org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\r\n&gt; \tat\r\n&gt; org.springframework.boot.SpringApplication.run(SpringApplication.java:1215)\r\n&gt; \tat\r\n&gt; com.bawagpsk.msa.ebanking.ebas.Application.main(Application.java:15)\r\n\r\n ","title":"Failed to obtain JDBC Connection Object does not wrap anything with requested interface when starting spring boot app","body":"<p>I have very annoying issue and i have no idea where to start, i already checked every link on internet regarding this problem and was not able to find anything useful.</p>\n<p>So basically i have fresh spring boot application and i am trying to connect it to existing oracle database.</p>\n<p>My application.properties for local instance looks like this:</p>\n<pre><code>spring:\n  datasource:\n    url: jdbc:oracle:thin:@ldap://oraldap1:389/DB,cn=OracleContext,dc=COMPANY,dc=com ldap://oraldap2:389/DB,cn=OracleContext,dc=COMPANY,dc=com\n    username: user\n    password: pass\n    driverClassName: oracle.jdbc.OracleDriver\n    hikari:\n      maximum-pool-size: 30\n      connection-timeout: 20000\n    tomcat:\n      initial-size: 2\n      max-active: 20\n      min-idle: 2\n      max-idle: 2\n  jpa:\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.Oracle10gDialect\n        jdbc:\n          use_get_generated_keys: true\n</code></pre>\n<p>And in my gradle.build i have this dependency:</p>\n<pre><code>compile group: 'com.oracle.database.jdbc', name: 'ojdbc8', version: '12.2.0.1'\n</code></pre>\n<p>When i start application i can  see 2 errors:</p>\n<blockquote>\n<p>2021-08-24T17:46:03.685+02:00 WARN - 0 jvm\norg.springframework.boot.actuate.health.AbstractHealthIndicator\n{&quot;x-company-correlation-id&quot;:&quot;&quot;, &quot;@trace_info&quot;:&quot;[ebas,,,,]&quot;,\n&quot;@message&quot;: &quot;DataSource health check failed&quot;,&quot;@data&quot;:{}, &quot;@exception&quot;:\n&quot; org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to\nobtain JDBC Connection; nested exception is java.sql.SQLException:\nObject does not wrap anything with requested interface</p>\n<p>2021-08-24T17:45:51.418+02:00 ERROR - 0 jvm\norg.hibernate.hql.spi.id.IdTableHelper\n{&quot;x-company-correlation-id&quot;:&quot;&quot;, &quot;@trace_info&quot;:&quot;[ebas,,,,]&quot;,\n&quot;@message&quot;: &quot;Unable obtain JDBC Connection&quot;,&quot;@data&quot;:{}, &quot;@exception&quot;:\n&quot; java.sql.SQLException: Object does not wrap anything with requested\ninterface</p>\n</blockquote>\n<p>And the funny thing, when i put intentionally wrong password on application startup i can see message that says:</p>\n<blockquote>\n<p>Unable obtain JDBC Connection&quot;,&quot;@data&quot;:{}, &quot;@exception&quot;:\n&quot; java.sql.SQLException: ORA-01017: invalid username/password; logon\ndenied</p>\n</blockquote>\n<p>Of course i already know that this database url and drivers are correct because i can connect to db via dbeaver.</p>\n<p>edit:\nHere are stacktraces:</p>\n<blockquote>\n<p>at\norg.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:82)\nat\norg.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:324)\nat\norg.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.getProduct(DataSourceHealthIndicator.java:122)\nat\norg.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doDataSourceHealthCheck(DataSourceHealthIndicator.java:107)\nat\norg.springframework.boot.actuate.jdbc.DataSourceHealthIndicator.doHealthCheck(DataSourceHealthIndicator.java:102)\nat\norg.springframework.boot.actuate.health.AbstractHealthIndicator.health(AbstractHealthIndicator.java:82)\nat\norg.springframework.boot.actuate.health.HealthIndicator.getHealth(HealthIndicator.java:37)\nat\norg.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:81)\nat\norg.springframework.boot.actuate.health.HealthEndpoint.getHealth(HealthEndpoint.java:38)\nat\norg.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:108)\nat\norg.springframework.boot.actuate.health.HealthEndpointSupport.getAggregateHealth(HealthEndpointSupport.java:119)\nat\norg.springframework.boot.actuate.health.HealthEndpointSupport.getContribution(HealthEndpointSupport.java:105)\nat\norg.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:83)\nat\norg.springframework.boot.actuate.health.HealthEndpointSupport.getHealth(HealthEndpointSupport.java:70)\nat\norg.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:75)\nat\norg.springframework.boot.actuate.health.HealthEndpoint.health(HealthEndpoint.java:65)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)     at\norg.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\nat\norg.springframework.boot.actuate.endpoint.invoke.reflect.ReflectiveOperationInvoker.invoke(ReflectiveOperationInvoker.java:77)\nat\norg.springframework.boot.actuate.endpoint.annotation.AbstractDiscoveredOperation.invoke(AbstractDiscoveredOperation.java:60)\nat\norg.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:121)\nat\norg.springframework.boot.actuate.endpoint.jmx.EndpointMBean.invoke(EndpointMBean.java:96)\nat\ncom.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\nat\ncom.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\nat\njavax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)\nat\njavax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\nat\njavax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)\nat\njavax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)\nat\njavax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\nat sun.reflect.GeneratedMethodAccessor99.invoke(Unknown Source)     at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)     at\nsun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)\nat sun.rmi.transport.Transport$1.run(Transport.java:200)    at\nsun.rmi.transport.Transport$1.run(Transport.java:197)     at\njava.security.AccessController.doPrivileged(Native Method)    at\nsun.rmi.transport.Transport.serviceCall(Transport.java:196)   at\nsun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:573)\nat\nsun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:834)\nat\nsun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:688)\nat java.security.AccessController.doPrivileged(Native Method)   at\nsun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:687)\nat\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:748)    Caused by:\njava.sql.SQLException: Object does not wrap anything with requested\ninterface     at\noracle.jdbc.driver.OracleConnection.isWrapperFor(OracleConnection.java:251)\nat\ncom.zaxxer.hikari.pool.ProxyConnection.isWrapperFor(ProxyConnection.java:448)\nat\nio.opentracing.contrib.spring.cloud.jdbc.JdbcAspect.getConnection(JdbcAspect.java:56)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)     at\norg.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\nat\norg.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\nat\norg.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\nat\norg.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\nat\norg.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)\nat\ncom.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$4d55a5a7.getConnection()\nat\ncom.zaxxer.hikari.HikariDataSource$$FastClassBySpringCGLIB$$eeb1ae86.invoke()\nat\norg.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\nat\norg.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\nat\norg.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\nat\norg.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)\nat\ncom.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$e4736671.getConnection()\nat\norg.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:158)\nat\norg.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:116)\nat\norg.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:79)\n... 47 common frames omitted</p>\n</blockquote>\n<blockquote>\n<p>at\noracle.jdbc.driver.OracleConnection.isWrapperFor(OracleConnection.java:251)\nat\ncom.zaxxer.hikari.pool.ProxyConnection.isWrapperFor(ProxyConnection.java:448)\nat\nio.opentracing.contrib.spring.cloud.jdbc.JdbcAspect.getConnection(JdbcAspect.java:56)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)     at\norg.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)\nat\norg.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)\nat\norg.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\nat\norg.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\nat\norg.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)\nat\ncom.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$4d55a5a7.getConnection()\nat\ncom.zaxxer.hikari.HikariDataSource$$FastClassBySpringCGLIB$$eeb1ae86.invoke()\nat\norg.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\nat\norg.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:136)\nat\norg.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)\nat\norg.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)\nat\ncom.zaxxer.hikari.HikariDataSource$$EnhancerBySpringCGLIB$$e4736671.getConnection()\nat\norg.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\nat\norg.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\nat\norg.hibernate.hql.spi.id.IdTableHelper.executeIdTableCreationStatements(IdTableHelper.java:67)\nat\norg.hibernate.hql.spi.id.global.GlobalTemporaryTableBulkIdStrategy.finishPreparation(GlobalTemporaryTableBulkIdStrategy.java:125)\nat\norg.hibernate.hql.spi.id.global.GlobalTemporaryTableBulkIdStrategy.finishPreparation(GlobalTemporaryTableBulkIdStrategy.java:42)\nat\norg.hibernate.hql.spi.id.AbstractMultiTableBulkIdStrategyImpl.prepare(AbstractMultiTableBulkIdStrategyImpl.java:88)\nat\norg.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:313)\nat\norg.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:462)\nat\norg.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1237)\nat\norg.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58)\nat\norg.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365)\nat\norg.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:391)\nat\norg.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:378)\nat\norg.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)\nat\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1855)\nat\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1792)\nat\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:595)\nat\norg.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)\nat\norg.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)\nat\norg.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat\norg.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)\nat\norg.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\nat\norg.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1108)\nat\norg.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)\nat\norg.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:550)\nat\norg.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141)\nat\norg.springframework.boot.SpringApplication.refresh(SpringApplication.java:747)\nat\norg.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397)\nat\norg.springframework.boot.SpringApplication.run(SpringApplication.java:315)\nat\norg.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\nat\norg.springframework.boot.SpringApplication.run(SpringApplication.java:1215)\nat\ncom.bawagpsk.msa.ebanking.ebas.Application.main(Application.java:15)</p>\n</blockquote>\n"},{"tags":["java","spring-boot","kotlin","serialization","jackson"],"comments":[{"owner":{"account_id":5797887,"reputation":366,"user_id":4573103,"display_name":"Dhruv Patel"},"score":0,"creation_date":1662837185,"post_id":73674165,"comment_id":130100156,"body_markdown":"Could you take the input as a String and then use ObjectMapper to convert the request into the form you want to consume? \n\nAlso, you can try using 2 @JsonProperty, one for getter and other for setter for example:\n\nplease checkout this question:\nhttps://stackoverflow.com/questions/8560348/different-names-of-json-property-during-serialization-and-deserialization","body":"Could you take the input as a String and then use ObjectMapper to convert the request into the form you want to consume?   Also, you can try using 2 @JsonProperty, one for getter and other for setter for example:  please checkout this question: <a href=\"https://stackoverflow.com/questions/8560348/different-names-of-json-property-during-serialization-and-deserialization\" title=\"different names of json property during serialization and deserialization\">stackoverflow.com/questions/8560348/&hellip;</a>"},{"owner":{"account_id":12822065,"reputation":17,"user_id":10250453,"display_name":"krown_loki"},"score":0,"creation_date":1662947428,"post_id":73674165,"comment_id":130116403,"body_markdown":"No, unfortunately client wants to send request body exactly without key field in Map value. I don&#39;t understand if I can do that with `@JsonProperty` on setter method.","body":"No, unfortunately client wants to send request body exactly without key field in Map value. I don&#39;t understand if I can do that with <code>@JsonProperty</code> on setter method."}],"answers":[{"tags":[],"owner":{"account_id":12822065,"reputation":17,"user_id":10250453,"display_name":"krown_loki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662998170,"creation_date":1662998170,"answer_id":73692020,"question_id":73674165,"body_markdown":"I found solution. It&#39;s need to use @JsonAnySetter annotation.\r\nI changed **ExampleObject** to:  \r\n```\r\nclass ExampleObject(\r\n    @JsonProperty(&quot;paramTwo&quot;)\r\n    val paramTwo: String\r\n) {\r\n    @JsonProperty(&quot;paramOne&quot;)\r\n    val paramOne = MutableMap&lt;String, Int&gt; = mutableMapOf()\r\n\r\n    @JsonAnySetter\r\n    fun setParamOne(key: String, value: Int) {\r\n        paramOne[key] = value\r\n    }\r\n}\r\n```\r\nAnd now I can send request body the way I wanted. All fields that don&#39;t match with declared @JsonProperty annotation will be assigned to property with @JsonAnySetter method. \r\n```\r\n{\r\n    &quot;paramTwo&quot;: &quot;data&quot;,\r\n    &quot;testStringOne&quot;: 1,\r\n    &quot;testStringTwo&quot;: 2,\r\n    ...\r\n}\r\n```\r\n","title":"How to serialize request object without field name in Spring Boot?","body":"<p>I found solution. It's need to use @JsonAnySetter annotation.\nI changed <strong>ExampleObject</strong> to:</p>\n<pre><code>class ExampleObject(\n    @JsonProperty(&quot;paramTwo&quot;)\n    val paramTwo: String\n) {\n    @JsonProperty(&quot;paramOne&quot;)\n    val paramOne = MutableMap&lt;String, Int&gt; = mutableMapOf()\n\n    @JsonAnySetter\n    fun setParamOne(key: String, value: Int) {\n        paramOne[key] = value\n    }\n}\n</code></pre>\n<p>And now I can send request body the way I wanted. All fields that don't match with declared @JsonProperty annotation will be assigned to property with @JsonAnySetter method.</p>\n<pre><code>{\n    &quot;paramTwo&quot;: &quot;data&quot;,\n    &quot;testStringOne&quot;: 1,\n    &quot;testStringTwo&quot;: 2,\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":12822065,"reputation":17,"user_id":10250453,"display_name":"krown_loki"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":582,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73692020,"answer_count":1,"score":0,"last_activity_date":1662998170,"creation_date":1662833416,"question_id":73674165,"body_markdown":"I have simple REST Controller (in Kotlin) method with ```@RequestBody``` object.  \r\n```\r\n@PostMappging(...)\r\nfun postTestFunction(@RequestBody data: ExampleObject) {\r\n    ...\r\n}\r\n```  \r\nWhere **ExampleObject** is:  \r\n```\r\nclass ExampleObject(\r\n    @JsonProperty(&quot;paramOne&quot;)\r\n    val paramOne: Map&lt;String, Int&gt;,\r\n    @JsonProperty(&quot;paramTwo&quot;)\r\n    val paramTwo: String\r\n)\r\n```  \r\nThat request can be send with next body:  \r\n```\r\n{\r\n    &quot;paramOne&quot;: {\r\n        &quot;test&quot;: 1 // Here I can write any number of Map&lt;String, Int&gt;\r\n    },\r\n    &quot;paramTwo&quot;: &quot;test&quot;\r\n}\r\n```  \r\nBut I need another request body something like this:  \r\n```\r\n{\r\n    &quot;test&quot;: 1, // I need  any number of Map&lt;String, Int&gt; without field name &quot;paramOne&quot;\r\n    &quot;paramTwo&quot;: &quot;test&quot;\r\n}\r\n```  \r\nWhat should I do to send request body with Map field (String, Int) but without field name?\r\n\r\n","title":"How to serialize request object without field name in Spring Boot?","body":"<p>I have simple REST Controller (in Kotlin) method with <code>@RequestBody</code> object.</p>\n<pre><code>@PostMappging(...)\nfun postTestFunction(@RequestBody data: ExampleObject) {\n    ...\n}\n</code></pre>\n<p>Where <strong>ExampleObject</strong> is:</p>\n<pre><code>class ExampleObject(\n    @JsonProperty(&quot;paramOne&quot;)\n    val paramOne: Map&lt;String, Int&gt;,\n    @JsonProperty(&quot;paramTwo&quot;)\n    val paramTwo: String\n)\n</code></pre>\n<p>That request can be send with next body:</p>\n<pre><code>{\n    &quot;paramOne&quot;: {\n        &quot;test&quot;: 1 // Here I can write any number of Map&lt;String, Int&gt;\n    },\n    &quot;paramTwo&quot;: &quot;test&quot;\n}\n</code></pre>\n<p>But I need another request body something like this:</p>\n<pre><code>{\n    &quot;test&quot;: 1, // I need  any number of Map&lt;String, Int&gt; without field name &quot;paramOne&quot;\n    &quot;paramTwo&quot;: &quot;test&quot;\n}\n</code></pre>\n<p>What should I do to send request body with Map field (String, Int) but without field name?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":13810539,"reputation":3452,"user_id":9968399,"display_name":"Taseer"},"score":0,"creation_date":1563790519,"post_id":57143656,"comment_id":100802571,"body_markdown":"Looks like you are not setting an audio session","body":"Looks like you are not setting an audio session"},{"owner":{"account_id":10407151,"reputation":49,"user_id":10784377,"display_name":"Asif Ali Khan"},"score":0,"creation_date":1563790740,"post_id":57143656,"comment_id":100802709,"body_markdown":"The audio gets played when i comment out The SoundVisualtion library.@Tase","body":"The audio gets played when i comment out The SoundVisualtion library.@Tase"}],"answers":[{"tags":[],"owner":{"account_id":13810539,"reputation":3452,"user_id":9968399,"display_name":"Taseer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1563790995,"creation_date":1563790995,"answer_id":57143930,"question_id":57143656,"body_markdown":"Try doing this, it appeared that you were not supplying audio session ID to the visualizer.\r\n\r\n\r\n     public void init(){\r\n        Log.d(TAG, &quot;init: init() called&quot;);\r\n        LineVisualizer lineVisualizer = findViewById(R.id.lineVisualizer);\r\n        // set custom color to the line.\r\n        lineVisualizer.setColor(ContextCompat.getColor(this, R.color.custom));\r\n        // set the line with for the visualizer between 1-10 default 1.\r\n        lineVisualizer.setStrokeWidth(1);\r\n        // Set you media player to the visualizer.\r\n        lineVisualizer.setPlayer(mediaPlayer.getAudioSessionId());  //Added session ID\r\n    }","title":"How to visualize an audio file in an android app using Android Studio?","body":"<p>Try doing this, it appeared that you were not supplying audio session ID to the visualizer.</p>\n\n<pre><code> public void init(){\n    Log.d(TAG, \"init: init() called\");\n    LineVisualizer lineVisualizer = findViewById(R.id.lineVisualizer);\n    // set custom color to the line.\n    lineVisualizer.setColor(ContextCompat.getColor(this, R.color.custom));\n    // set the line with for the visualizer between 1-10 default 1.\n    lineVisualizer.setStrokeWidth(1);\n    // Set you media player to the visualizer.\n    lineVisualizer.setPlayer(mediaPlayer.getAudioSessionId());  //Added session ID\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19877748,"reputation":51,"user_id":14562389,"display_name":"Manisha Saini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662997941,"creation_date":1662997941,"answer_id":73691973,"question_id":57143656,"body_markdown":"Here&#39;s how you can add RECORD_AUDIO permissions inside your method: \r\n\r\n     if (context?.let {\r\n        ContextCompat.checkSelfPermission(\r\n            it,\r\n            Manifest.permission.RECORD_AUDIO\r\n        )\r\n    } != PackageManager.PERMISSION_GRANTED) {\r\n    activity?.let {\r\n        ActivityCompat.requestPermissions(\r\n            it,\r\n            Array(1) { Manifest.permission.RECORD_AUDIO },\r\n            0\r\n        )\r\n    }\r\n\r\nif (mediaPlayer!!.audioSessionId != -1)","title":"How to visualize an audio file in an android app using Android Studio?","body":"<p>Here's how you can add RECORD_AUDIO permissions inside your method:</p>\n<pre><code> if (context?.let {\n    ContextCompat.checkSelfPermission(\n        it,\n        Manifest.permission.RECORD_AUDIO\n    )\n} != PackageManager.PERMISSION_GRANTED) {\nactivity?.let {\n    ActivityCompat.requestPermissions(\n        it,\n        Array(1) { Manifest.permission.RECORD_AUDIO },\n        0\n    )\n}\n</code></pre>\n<p>if (mediaPlayer!!.audioSessionId != -1)</p>\n"}],"owner":{"account_id":10407151,"reputation":49,"user_id":10784377,"display_name":"Asif Ali Khan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2585,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":57143930,"answer_count":2,"score":0,"last_activity_date":1662997941,"creation_date":1563790121,"question_id":57143656,"body_markdown":"I am trying to visualize an file  in android.I am using the following library to do it `com.chibde:audiovisualizer:2.1.0`. But my app crashes saying \r\n&gt;java.lang.RuntimeException: Cannot initialize Visualizer engine, error: -3\r\n                                                                              at android.media.audiofx.Visualizer\r\n\r\nI have written this code by reading this blog https://mindorks.com/android/store/Equalizers-and-Visualizations/gautamchibde/android-audio-visualizer.\r\n\r\nThe following is my MainActivity.java\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        ImageButton playPauseBtn;\r\n        private static final String TAG = &quot;MainActivity&quot;;\r\n        MediaPlayer mediaPlayer;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            playPauseBtn = (ImageButton) findViewById(R.id.ib_play_pause);\r\n            setPlayer();\r\n        }\r\n        public void playPause(View view){\r\n            if(mediaPlayer != null){\r\n                if(mediaPlayer.isPlaying()){\r\n                    mediaPlayer.pause();\r\n                    playPauseBtn.setImageDrawable(ContextCompat.getDrawable(this,R.drawable.ic_play_red_48dp));\r\n                }\r\n                else\r\n                {\r\n                    mediaPlayer.start();\r\n                    playPauseBtn.setImageDrawable(ContextCompat.getDrawable(this,R.drawable.ic_pause_red_48dp));\r\n                }\r\n            }\r\n        }\r\n        \r\n        public void setPlayer(){\r\n            Log.d(TAG, &quot;setPlayer: setPlayer() called&quot;);\r\n            mediaPlayer = MediaPlayer.create(this,R.raw.normal);\r\n            mediaPlayer.setLooping(false);\r\n            init();\r\n        }\r\n    \r\n        public void init(){\r\n            Log.d(TAG, &quot;init: init() called&quot;);\r\n            LineVisualizer lineVisualizer = findViewById(R.id.lineVisualizer);\r\n            // set custom color to the line.\r\n            lineVisualizer.setColor(ContextCompat.getColor(this, R.color.custom));\r\n            // set the line with for the visualizer between 1-10 default 1.\r\n            lineVisualizer.setStrokeWidth(1);\r\n            // Set you media player to the visualizer.\r\n            lineVisualizer.setPlayer(mediaPlayer);\r\n        }\r\n    }\r\n\r\n//The following is my ActivityMain.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        tools:context=&quot;com.techmate.asifa.waves.MainActivity&quot;&gt;\r\n    \r\n       &lt;com.chibde.visualizer.LineVisualizer\r\n           android:layout_width=&quot;match_parent&quot;\r\n           android:layout_height=&quot;250dp&quot;\r\n           android:id=&quot;@+id/lineVisualizer&quot;/&gt;\r\n    \r\n    \r\n        &lt;include layout=&quot;@layout/layout_audio_buttons&quot;/&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nthe following is my gradle\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 28\r\n        buildToolsVersion &quot;29.0.0&quot;\r\n        defaultConfig {\r\n            applicationId &quot;com.techmate.asifa.waves&quot;\r\n            minSdkVersion 19\r\n            targetSdkVersion 28\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        androidTestCompile(&#39;com.android.support.test.espresso:espresso-core:2.2.2&#39;, {\r\n            exclude group: &#39;com.android.support&#39;, module: &#39;support-annotations&#39;\r\n        })\r\n        compile &#39;com.android.support:appcompat-v7:28.+&#39;\r\n        compile &#39;com.android.support.constraint:constraint-layout:1.0.2&#39;\r\n        compile &#39;com.chibde:audiovisualizer:2.1.0&#39;\r\n        testCompile &#39;junit:junit:4.12&#39;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\nMy app crashes when i run it and the following error is shown in my logcat\r\n\r\n```\r\nCaused by: java.lang.RuntimeException: Cannot initialize Visualizer engine, error: -3\r\n    at android.media.audiofx.Visualizer.&lt;init&gt;(Visualizer.java:218)\r\n    at com.chibde.BaseVisualizer.setPlayer(BaseVisualizer.java:81)\r\n    at com.chibde.BaseVisualizer.setPlayer(BaseVisualizer.java:77)\r\n    at com.techmate.asifa.waves.MainActivity.init(MainActivity.java:81)\r\n    at com.techmate.asifa.waves.MainActivity.setPlayer(MainActivity.java:66)\r\n    at com.techmate.asifa.waves.MainActivity.onCreate(MainActivity.java:32)\r\n    at android.app.Activity.performCreate(Activity.java:7009)\r\n    at android.app.Activity.performCreate(Activity.java:7000)\r\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\r\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2731)\r\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856)&#160;\r\n    at android.app.ActivityThread.-wrap11(Unknown Source:0)&#160;\r\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589)&#160;\r\n    at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n    at android.os.Looper.loop(Looper.java:164)&#160;\r\n    at android.app.ActivityThread.main(ActivityThread.java:6494)\r\n```\r\n\r\n","title":"How to visualize an audio file in an android app using Android Studio?","body":"<p>I am trying to visualize an file  in android.I am using the following library to do it <code>com.chibde:audiovisualizer:2.1.0</code>. But my app crashes saying </p>\n\n<blockquote>\n  <p>java.lang.RuntimeException: Cannot initialize Visualizer engine, error: -3\n                                                                                at android.media.audiofx.Visualizer</p>\n</blockquote>\n\n<p>I have written this code by reading this blog <a href=\"https://mindorks.com/android/store/Equalizers-and-Visualizations/gautamchibde/android-audio-visualizer\" rel=\"nofollow noreferrer\">https://mindorks.com/android/store/Equalizers-and-Visualizations/gautamchibde/android-audio-visualizer</a>.</p>\n\n<p>The following is my MainActivity.java</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    ImageButton playPauseBtn;\n    private static final String TAG = \"MainActivity\";\n    MediaPlayer mediaPlayer;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        playPauseBtn = (ImageButton) findViewById(R.id.ib_play_pause);\n        setPlayer();\n    }\n    public void playPause(View view){\n        if(mediaPlayer != null){\n            if(mediaPlayer.isPlaying()){\n                mediaPlayer.pause();\n                playPauseBtn.setImageDrawable(ContextCompat.getDrawable(this,R.drawable.ic_play_red_48dp));\n            }\n            else\n            {\n                mediaPlayer.start();\n                playPauseBtn.setImageDrawable(ContextCompat.getDrawable(this,R.drawable.ic_pause_red_48dp));\n            }\n        }\n    }\n\n    public void setPlayer(){\n        Log.d(TAG, \"setPlayer: setPlayer() called\");\n        mediaPlayer = MediaPlayer.create(this,R.raw.normal);\n        mediaPlayer.setLooping(false);\n        init();\n    }\n\n    public void init(){\n        Log.d(TAG, \"init: init() called\");\n        LineVisualizer lineVisualizer = findViewById(R.id.lineVisualizer);\n        // set custom color to the line.\n        lineVisualizer.setColor(ContextCompat.getColor(this, R.color.custom));\n        // set the line with for the visualizer between 1-10 default 1.\n        lineVisualizer.setStrokeWidth(1);\n        // Set you media player to the visualizer.\n        lineVisualizer.setPlayer(mediaPlayer);\n    }\n}\n</code></pre>\n\n<p>//The following is my ActivityMain.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\"\n    tools:context=\"com.techmate.asifa.waves.MainActivity\"&gt;\n\n   &lt;com.chibde.visualizer.LineVisualizer\n       android:layout_width=\"match_parent\"\n       android:layout_height=\"250dp\"\n       android:id=\"@+id/lineVisualizer\"/&gt;\n\n\n    &lt;include layout=\"@layout/layout_audio_buttons\"/&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>the following is my gradle</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 28\n    buildToolsVersion \"29.0.0\"\n    defaultConfig {\n        applicationId \"com.techmate.asifa.waves\"\n        minSdkVersion 19\n        targetSdkVersion 28\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n        exclude group: 'com.android.support', module: 'support-annotations'\n    })\n    compile 'com.android.support:appcompat-v7:28.+'\n    compile 'com.android.support.constraint:constraint-layout:1.0.2'\n    compile 'com.chibde:audiovisualizer:2.1.0'\n    testCompile 'junit:junit:4.12'\n}\n</code></pre>\n\n<p>My app crashes when i run it and the following error is shown in my logcat</p>\n\n<pre><code>Caused by: java.lang.RuntimeException: Cannot initialize Visualizer engine, error: -3\n    at android.media.audiofx.Visualizer.&lt;init&gt;(Visualizer.java:218)\n    at com.chibde.BaseVisualizer.setPlayer(BaseVisualizer.java:81)\n    at com.chibde.BaseVisualizer.setPlayer(BaseVisualizer.java:77)\n    at com.techmate.asifa.waves.MainActivity.init(MainActivity.java:81)\n    at com.techmate.asifa.waves.MainActivity.setPlayer(MainActivity.java:66)\n    at com.techmate.asifa.waves.MainActivity.onCreate(MainActivity.java:32)\n    at android.app.Activity.performCreate(Activity.java:7009)\n    at android.app.Activity.performCreate(Activity.java:7000)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2731)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2856) \n    at android.app.ActivityThread.-wrap11(Unknown Source:0) \n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1589) \n    at android.os.Handler.dispatchMessage(Handler.java:106) \n    at android.os.Looper.loop(Looper.java:164) \n    at android.app.ActivityThread.main(ActivityThread.java:6494)\n</code></pre>\n"},{"tags":["java","spring-boot","multi-database-connections"],"answers":[{"tags":[],"owner":{"account_id":16689839,"reputation":557,"user_id":12062831,"display_name":"gsan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1652480474,"creation_date":1652480474,"answer_id":72235905,"question_id":72225990,"body_markdown":"[This answer][1] explains how to configure two data sources for a single Spring Boot application. \r\n\r\nAlso [this][2] tutorial explains the same concept with a detailed example. \r\n\r\nThe copying procedure could be done by fetching all the objects from each table on the main db, deleting id values and saving them to the second db. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/30344608/12062831\r\n  [2]: https://www.baeldung.com/spring-data-jpa-multiple-databases","title":"Dynamically change data source connection at runtime in Spring Boot","body":"<p><a href=\"https://stackoverflow.com/a/30344608/12062831\">This answer</a> explains how to configure two data sources for a single Spring Boot application.</p>\n<p>Also <a href=\"https://www.baeldung.com/spring-data-jpa-multiple-databases\" rel=\"nofollow noreferrer\">this</a> tutorial explains the same concept with a detailed example.</p>\n<p>The copying procedure could be done by fetching all the objects from each table on the main db, deleting id values and saving them to the second db.</p>\n"},{"tags":[],"owner":{"account_id":2115514,"reputation":93,"user_id":1879941,"display_name":"Mah"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1655040884,"creation_date":1655040884,"answer_id":72592663,"question_id":72225990,"body_markdown":"Alternative solution could be to use AbstractRoutingDatasource: https://www.baeldung.com/spring-abstract-routing-data-source","title":"Dynamically change data source connection at runtime in Spring Boot","body":"<p>Alternative solution could be to use AbstractRoutingDatasource: <a href=\"https://www.baeldung.com/spring-abstract-routing-data-source\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-abstract-routing-data-source</a></p>\n"},{"tags":[],"owner":{"account_id":3984506,"reputation":83,"user_id":15623419,"display_name":"SoftWar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662997409,"creation_date":1662997409,"answer_id":73691849,"question_id":72225990,"body_markdown":"I would like to write code for others on the same search:\r\n\r\n    _context.Database.CloseConnection();\r\n    _context.Database.SetConnectionString(&quot;NewConnectionString&quot;);\r\n    _context.Database.OpenConnection();\r\n\r\nthis will connect you whatever DB you want to connect...\r\n","title":"Dynamically change data source connection at runtime in Spring Boot","body":"<p>I would like to write code for others on the same search:</p>\n<pre><code>_context.Database.CloseConnection();\n_context.Database.SetConnectionString(&quot;NewConnectionString&quot;);\n_context.Database.OpenConnection();\n</code></pre>\n<p>this will connect you whatever DB you want to connect...</p>\n"}],"owner":{"account_id":2115514,"reputation":93,"user_id":1879941,"display_name":"Mah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10339,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":72592663,"answer_count":3,"score":5,"last_activity_date":1662997409,"creation_date":1652427537,"question_id":72225990,"body_markdown":"I have a spring-boot application with one database. Now I would like to integrate the possibility to copy some data from this database to another database. The connection to the second database should be done during runtime. I insert in my frontend the second database connection and start the copy from the first database to the second. The two databases have the same tables and I would like to use the same repositories. Is it possible to do that? If yes, do you know some code example or documentation? I&#39;m trying to find the correct approach to do that.\r\n\r\nThank you!","title":"Dynamically change data source connection at runtime in Spring Boot","body":"<p>I have a spring-boot application with one database. Now I would like to integrate the possibility to copy some data from this database to another database. The connection to the second database should be done during runtime. I insert in my frontend the second database connection and start the copy from the first database to the second. The two databases have the same tables and I would like to use the same repositories. Is it possible to do that? If yes, do you know some code example or documentation? I'm trying to find the correct approach to do that.</p>\n<p>Thank you!</p>\n"},{"tags":["java","pyspark","jupyter-lab"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1636106908,"post_id":69851277,"comment_id":123473857,"body_markdown":"What java version are you using? Did you do export SPARK_LOCAL_IP=localhost ?","body":"What java version are you using? Did you do export SPARK_LOCAL_IP=localhost ?"}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1636107358,"creation_date":1636107358,"answer_id":69851663,"question_id":69851277,"body_markdown":"Spark runs on `Java 8/11`, Scala 2.12, Python 3.6+ and R 3.5+. Python 3.6 support is deprecated as of Spark 3.2.0. \r\n\r\n&gt; Java 8 prior to version 8u201 support is deprecated as of Spark 3.2.0\r\n\r\nFor the Scala API, Spark 3.2.0 uses Scala 2.12. You will need to use a compatible Scala version (2.12.x).\r\n\r\nFor Python 3.9, Arrow optimization and pandas UDFs might not work due to the supported Python versions in Apache Arrow. Please refer to the latest Python Compatibility page. \r\n\r\nFor `Java 11`, `-Dio.netty.tryReflectionSetAccessible=true` is required additionally for Apache Arrow library. This prevents java.lang.UnsupportedOperationException: sun.misc.Unsafe or java.nio.DirectByteBuffer.(long, int) not available when Apache Arrow uses Netty internally.","title":"Error when initializing SparkContext in jupyterlab","body":"<p>Spark runs on <code>Java 8/11</code>, Scala 2.12, Python 3.6+ and R 3.5+. Python 3.6 support is deprecated as of Spark 3.2.0.</p>\n<blockquote>\n<p>Java 8 prior to version 8u201 support is deprecated as of Spark 3.2.0</p>\n</blockquote>\n<p>For the Scala API, Spark 3.2.0 uses Scala 2.12. You will need to use a compatible Scala version (2.12.x).</p>\n<p>For Python 3.9, Arrow optimization and pandas UDFs might not work due to the supported Python versions in Apache Arrow. Please refer to the latest Python Compatibility page.</p>\n<p>For <code>Java 11</code>, <code>-Dio.netty.tryReflectionSetAccessible=true</code> is required additionally for Apache Arrow library. This prevents java.lang.UnsupportedOperationException: sun.misc.Unsafe or java.nio.DirectByteBuffer.(long, int) not available when Apache Arrow uses Netty internally.</p>\n"},{"tags":[],"owner":{"account_id":7705631,"reputation":1881,"user_id":5836700,"display_name":"thrinadhn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662997336,"creation_date":1652371381,"answer_id":72218805,"question_id":69851277,"body_markdown":" - Spark runs on Java 8/11 [Java SE 8 Archive Downloads (JDK 8u202 and earlier)][1]\r\n - I successfully installed Python 3.9.7 version of Anaconda distribution.\r\n \r\n**I’ve provided a spark installation link** [How to Install and Run PySpark in Jupyter Notebook on Windows\r\n][2]\r\n\r\n**I’ve provided a spark installation video link** [youtube Video how to Run PySpark in Jupyter Notebook on Windows][3]\r\n\r\nThis works me\r\n\r\nSource: Eden Canlilar\r\n\r\n\r\n \r\n\r\n\r\n**How to Install and Run PySpark in Jupyter Notebook on Windows**\r\n\r\nWhen I write PySpark code, I use Jupyter notebook to test my code before submitting a job on the cluster. In this post, I will show you how to install and run PySpark locally in Jupyter Notebook on Windows. I’ve tested this guide on a dozen Windows 7 and 10 PCs in different languages.\r\n\r\n A. **Items needed**\r\n    \r\n\r\n 1. Spark distribution from spark.apache.org[spark.apache.org][4]\r\n [![Download Apache Spark][5]][5]\r\n 2. Python and Jupyter Notebook. You can get both by installing the Python 3.x version of [Anaconda distribution.]\r\n 3. winutils.exe — a Hadoop binary for Windows — from Steve Loughran’s [GitHub repo][6]. Go to the corresponding Hadoop version in the Spark distribution and find winutils.exe under /bin. For example,\r\nhttps://github.com/steveloughran/winutils/blob/master/hadoop-2.7.1/bin/winutils.exe\r\n[![enter image description here][7]][7]\r\n 4. The findspark Python module, which can be installed by running python -m pip install findspark either in Windows command prompt or Git bash if Python is installed in item 2. You can find command prompt by searching cmd in the search box.\r\n[![enter image description here][8]][8]\r\n 5. If you don’t have Java or your Java version is 7.x or less, download and install Java from [Oracle][9]. I recommend getting the latest JDK (current version 9.0.1).\r\n[![enter image description here][10]][10]\r\n 6. If you don’t know how to unpack a .tgz file on Windows, you can download and install 7-zip on Windows to unpack the .tgz file from Spark distribution in item 1 by right-clicking on the file icon and select [7-zip][11] &gt; Extract Here.\r\n[![enter image description here][12]][12]\r\n\r\nB. **Installing PySpark**\r\n\r\n   After getting all the items in section A, let’s set up PySpark.\r\n\r\n 1. Unpack the .tgz file. For example, I unpacked with 7zip from step A6 and put mine under D:\\spark\\spark-2.2.1-bin-hadoop2.7\r\n[![enter image description here][13]][13]\r\n 2. Move the winutils.exe downloaded from step A3 to the \\bin folder of Spark distribution. For example, D:\\spark\\spark-2.2.1-bin-hadoop2.7\\bin\\winutils.exe\r\n 3. Add environment variables: the environment variables let Windows find where the files are when we start the PySpark kernel. You can find the environment variable settings by putting “environ…” in the search box.\r\n\r\n    The variables to add are, in my example,\r\n\r\n    \r\n\r\n    | Name                       | Value              |\r\n    | ---------------------------|-------------------- \r\n    | SPARK_HOME                 | D:\\spark\\spark-2.2.1-bin-hadoop2.7|\r\n    | HADOOP_HOME                | D:\\spark\\spark-2.2.1-bin-hadoop2.7|\r\n    | PYSPARK_DRIVER_PYTHON      | jupyter            |\r\n    | PYSPARK_DRIVER_PYTHON_OPTS | notebook |\r\n    \r\n    [![enter code here][14]][14]\r\n\r\n 4. In the same environment variable settings window, look for the Path or PATH variable, click edit and add D:\\spark\\spark-2.2.1-bin-hadoop2.7\\bin to it. In Windows 7 you need to separate the values in Path with a semicolon ; between the values.\r\n 5. (Optional, if see Java related error in step C) Find the installed Java JDK folder from step A5, for example, D:\\Program Files\\Java\\jdk1.8.0_121, and add the following environment variable\r\n\r\n     | Name     | Value                              |\r\n     | ------   |------------------------------------| \r\n     | JAVA_HOME| D:\\Progra~1\\Java\\jdk1.8.0_121      |\r\n\r\nIf JDK is installed under \\Program Files (x86), then replace the Progra~1 part by Progra~2 instead. In my experience, this error only occurs in Windows 7, and I think it’s because Spark couldn’t parse the space in the folder name.\r\nEdit (1/23/19): You might also find Gerard’s comment helpful: [How to Install and Run PySpark in Jupyter Notebook on Windows][15]\r\n\r\n  C. **Running PySpark in Jupyter Notebook**\r\n\r\n   To run Jupyter notebook, open Windows command prompt or Git Bash and run jupyter notebook. If you use Anaconda Navigator to open Jupyter Notebook instead, you might see a Java gateway process exited before sending the driver its port number error from PySpark in step C. Fall back to Windows cmd if it happens.\r\n\r\nOnce inside Jupyter notebook, open a Python 3 notebook\r\n[![Create a new notebook][16]][16]\r\nIn the notebook, run the following code\r\n\r\n    import findspark\r\n    findspark.init()\r\n\r\n    import pyspark # only run after findspark.init()\r\n    from pyspark.sql import SparkSession\r\n    spark = SparkSession.builder.getOrCreate()\r\n\r\n    df = spark.sql(&#39;&#39;&#39;select &#39;spark&#39; as hello &#39;&#39;&#39;)\r\n    df.show()    \r\n    \r\n\r\n    When you press run, it might trigger a Windows firewall pop-up. I pressed cancel on the pop-up as blocking the connection doesn’t affect PySpark.\r\n\r\nIf you see the following output, then you have \r\ninstalled PySpark on your Windows system!\r\n[![following output][17]][17]\r\n\r\n\r\n  [1]: https://www.oracle.com/in/java/technologies/javase/javase8-archive-downloads.html\r\n  [2]: https://changhsinlee.com/install-pyspark-windows-jupyter/\r\n  [3]: https://www.youtube.com/watch?v=Rv4NOAn2m-g&amp;t=4s\r\n  [4]: https://spark.apache.org/downloads.html\r\n  [5]: https://i.stack.imgur.com/xU6GX.png\r\n  [6]: https://github.com/steveloughran/winutils/\r\n  [7]: https://i.stack.imgur.com/0a7gO.png\r\n  [8]: https://i.stack.imgur.com/IVe49.png\r\n  [9]: https://www.oracle.com/java/technologies/downloads/\r\n  [10]: https://i.stack.imgur.com/8PRXq.png\r\n  [11]: https://www.7-zip.org/download.html\r\n  [12]: https://i.stack.imgur.com/d2yuw.png\r\n  [13]: https://i.stack.imgur.com/xUlIZ.png\r\n  [14]: https://i.stack.imgur.com/AQ2kv.png\r\n  [15]: https://changhsinlee.com/install-pyspark-windows-jupyter/#comment-4302741820\r\n  [16]: https://i.stack.imgur.com/0j7Dr.png\r\n  [17]: https://i.stack.imgur.com/9bpS9.png","title":"Error when initializing SparkContext in jupyterlab","body":"<ul>\n<li>Spark runs on Java 8/11 <a href=\"https://www.oracle.com/in/java/technologies/javase/javase8-archive-downloads.html\" rel=\"nofollow noreferrer\">Java SE 8 Archive Downloads (JDK 8u202 and earlier)</a></li>\n<li>I successfully installed Python 3.9.7 version of Anaconda distribution.</li>\n</ul>\n<p><strong>I’ve provided a spark installation link</strong> <a href=\"https://changhsinlee.com/install-pyspark-windows-jupyter/\" rel=\"nofollow noreferrer\">How to Install and Run PySpark in Jupyter Notebook on Windows\n</a></p>\n<p><strong>I’ve provided a spark installation video link</strong> <a href=\"https://www.youtube.com/watch?v=Rv4NOAn2m-g&amp;t=4s\" rel=\"nofollow noreferrer\">youtube Video how to Run PySpark in Jupyter Notebook on Windows</a></p>\n<p>This works me</p>\n<p>Source: Eden Canlilar</p>\n<p><strong>How to Install and Run PySpark in Jupyter Notebook on Windows</strong></p>\n<p>When I write PySpark code, I use Jupyter notebook to test my code before submitting a job on the cluster. In this post, I will show you how to install and run PySpark locally in Jupyter Notebook on Windows. I’ve tested this guide on a dozen Windows 7 and 10 PCs in different languages.</p>\n<p>A. <strong>Items needed</strong></p>\n<ol>\n<li>Spark distribution from spark.apache.org<a href=\"https://spark.apache.org/downloads.html\" rel=\"nofollow noreferrer\">spark.apache.org</a>\n<a href=\"https://i.stack.imgur.com/xU6GX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xU6GX.png\" alt=\"Download Apache Spark\" /></a></li>\n<li>Python and Jupyter Notebook. You can get both by installing the Python 3.x version of [Anaconda distribution.]</li>\n<li>winutils.exe — a Hadoop binary for Windows — from Steve Loughran’s <a href=\"https://github.com/steveloughran/winutils/\" rel=\"nofollow noreferrer\">GitHub repo</a>. Go to the corresponding Hadoop version in the Spark distribution and find winutils.exe under /bin. For example,\n<a href=\"https://github.com/steveloughran/winutils/blob/master/hadoop-2.7.1/bin/winutils.exe\" rel=\"nofollow noreferrer\">https://github.com/steveloughran/winutils/blob/master/hadoop-2.7.1/bin/winutils.exe</a>\n<a href=\"https://i.stack.imgur.com/0a7gO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0a7gO.png\" alt=\"enter image description here\" /></a></li>\n<li>The findspark Python module, which can be installed by running python -m pip install findspark either in Windows command prompt or Git bash if Python is installed in item 2. You can find command prompt by searching cmd in the search box.\n<a href=\"https://i.stack.imgur.com/IVe49.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IVe49.png\" alt=\"enter image description here\" /></a></li>\n<li>If you don’t have Java or your Java version is 7.x or less, download and install Java from <a href=\"https://www.oracle.com/java/technologies/downloads/\" rel=\"nofollow noreferrer\">Oracle</a>. I recommend getting the latest JDK (current version 9.0.1).\n<a href=\"https://i.stack.imgur.com/8PRXq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8PRXq.png\" alt=\"enter image description here\" /></a></li>\n<li>If you don’t know how to unpack a .tgz file on Windows, you can download and install 7-zip on Windows to unpack the .tgz file from Spark distribution in item 1 by right-clicking on the file icon and select <a href=\"https://www.7-zip.org/download.html\" rel=\"nofollow noreferrer\">7-zip</a> &gt; Extract Here.\n<a href=\"https://i.stack.imgur.com/d2yuw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d2yuw.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n<p>B. <strong>Installing PySpark</strong></p>\n<p>After getting all the items in section A, let’s set up PySpark.</p>\n<ol>\n<li><p>Unpack the .tgz file. For example, I unpacked with 7zip from step A6 and put mine under D:\\spark\\spark-2.2.1-bin-hadoop2.7\n<a href=\"https://i.stack.imgur.com/xUlIZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xUlIZ.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Move the winutils.exe downloaded from step A3 to the \\bin folder of Spark distribution. For example, D:\\spark\\spark-2.2.1-bin-hadoop2.7\\bin\\winutils.exe</p>\n</li>\n<li><p>Add environment variables: the environment variables let Windows find where the files are when we start the PySpark kernel. You can find the environment variable settings by putting “environ…” in the search box.</p>\n<p>The variables to add are, in my example,</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Name</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SPARK_HOME</td>\n<td>D:\\spark\\spark-2.2.1-bin-hadoop2.7</td>\n</tr>\n<tr>\n<td>HADOOP_HOME</td>\n<td>D:\\spark\\spark-2.2.1-bin-hadoop2.7</td>\n</tr>\n<tr>\n<td>PYSPARK_DRIVER_PYTHON</td>\n<td>jupyter</td>\n</tr>\n<tr>\n<td>PYSPARK_DRIVER_PYTHON_OPTS</td>\n<td>notebook</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><a href=\"https://i.stack.imgur.com/AQ2kv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AQ2kv.png\" alt=\"enter code here\" /></a></p>\n</li>\n<li><p>In the same environment variable settings window, look for the Path or PATH variable, click edit and add D:\\spark\\spark-2.2.1-bin-hadoop2.7\\bin to it. In Windows 7 you need to separate the values in Path with a semicolon ; between the values.</p>\n</li>\n<li><p>(Optional, if see Java related error in step C) Find the installed Java JDK folder from step A5, for example, D:\\Program Files\\Java\\jdk1.8.0_121, and add the following environment variable</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Name</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>JAVA_HOME</td>\n<td>D:\\Progra~1\\Java\\jdk1.8.0_121</td>\n</tr>\n</tbody>\n</table>\n</div></li>\n</ol>\n<p>If JDK is installed under \\Program Files (x86), then replace the Progra~1 part by Progra~2 instead. In my experience, this error only occurs in Windows 7, and I think it’s because Spark couldn’t parse the space in the folder name.\nEdit (1/23/19): You might also find Gerard’s comment helpful: <a href=\"https://changhsinlee.com/install-pyspark-windows-jupyter/#comment-4302741820\" rel=\"nofollow noreferrer\">How to Install and Run PySpark in Jupyter Notebook on Windows</a></p>\n<p>C. <strong>Running PySpark in Jupyter Notebook</strong></p>\n<p>To run Jupyter notebook, open Windows command prompt or Git Bash and run jupyter notebook. If you use Anaconda Navigator to open Jupyter Notebook instead, you might see a Java gateway process exited before sending the driver its port number error from PySpark in step C. Fall back to Windows cmd if it happens.</p>\n<p>Once inside Jupyter notebook, open a Python 3 notebook\n<a href=\"https://i.stack.imgur.com/0j7Dr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0j7Dr.png\" alt=\"Create a new notebook\" /></a>\nIn the notebook, run the following code</p>\n<pre><code>import findspark\nfindspark.init()\n\nimport pyspark # only run after findspark.init()\nfrom pyspark.sql import SparkSession\nspark = SparkSession.builder.getOrCreate()\n\ndf = spark.sql('''select 'spark' as hello ''')\ndf.show()    \n\n\nWhen you press run, it might trigger a Windows firewall pop-up. I pressed cancel on the pop-up as blocking the connection doesn’t affect PySpark.\n</code></pre>\n<p>If you see the following output, then you have\ninstalled PySpark on your Windows system!\n<a href=\"https://i.stack.imgur.com/9bpS9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9bpS9.png\" alt=\"following output\" /></a></p>\n"},{"tags":[],"owner":{"account_id":25329636,"reputation":21,"user_id":19149631,"display_name":"Green Lion"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652926049,"creation_date":1652926049,"answer_id":72297881,"question_id":69851277,"body_markdown":"What worked for me:\r\n\r\n`brew install openjdk@8`\r\n\r\n`sudo ln -sfn /usr/local/opt/openjdk@8/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-8.jdk`\r\n\r\nIf you need to have openjdk@8 first in your PATH, run:\r\n  `echo &#39;export PATH=&quot;/usr/local/opt/openjdk@8/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc`\r\n\r\n`source ~/.zshrc`\r\n","title":"Error when initializing SparkContext in jupyterlab","body":"<p>What worked for me:</p>\n<p><code>brew install openjdk@8</code></p>\n<p><code>sudo ln -sfn /usr/local/opt/openjdk@8/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-8.jdk</code></p>\n<p>If you need to have openjdk@8 first in your PATH, run:\n<code>echo 'export PATH=&quot;/usr/local/opt/openjdk@8/bin:$PATH&quot;' &gt;&gt; ~/.zshrc</code></p>\n<p><code>source ~/.zshrc</code></p>\n"}],"owner":{"account_id":10250968,"reputation":99,"user_id":7565232,"display_name":"The Questionner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6075,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":69851663,"answer_count":3,"score":6,"last_activity_date":1662997336,"creation_date":1636105595,"question_id":69851277,"body_markdown":"Hi I&#39;m trying to learn how to use pyspark but when I run this first line :\r\n```\r\nimport pyspark\r\nsc = pyspark.SparkContext(&#39;local[*]&#39;)\r\n```\r\nI get this error :\r\n\r\n```\r\nPy4JJavaError: An error occurred while calling None.org.apache.spark.api.java.JavaSparkContext.\r\n: java.lang.IllegalAccessError: class org.apache.spark.storage.StorageUtils$ (in unnamed module @0x724b93a8) cannot access class sun.nio.ch.DirectBuffer (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x724b93a8\r\n```\r\n\r\nI can&#39;t seem to find what&#39;s causing it :/","title":"Error when initializing SparkContext in jupyterlab","body":"<p>Hi I'm trying to learn how to use pyspark but when I run this first line :</p>\n<pre><code>import pyspark\nsc = pyspark.SparkContext('local[*]')\n</code></pre>\n<p>I get this error :</p>\n<pre><code>Py4JJavaError: An error occurred while calling None.org.apache.spark.api.java.JavaSparkContext.\n: java.lang.IllegalAccessError: class org.apache.spark.storage.StorageUtils$ (in unnamed module @0x724b93a8) cannot access class sun.nio.ch.DirectBuffer (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x724b93a8\n</code></pre>\n<p>I can't seem to find what's causing it :/</p>\n"},{"tags":["java","spring-boot","hibernate","database-connection","hikaricp"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1662982438,"post_id":73688119,"comment_id":130124365,"body_markdown":"Your `HibernateConfig` should be an `@Configuration` not an `@Component`. Why is `auto-commit` set to `true`? You should have some form of transaction management. Can you add your jpa properties (from the `application.properties`) to your question as well. Generally these errors come from wrong configuration or from manually using the `DataSource` and obtaining connections without properly releasing them.","body":"Your <code>HibernateConfig</code> should be an <code>@Configuration</code> not an <code>@Component</code>. Why is <code>auto-commit</code> set to <code>true</code>? You should have some form of transaction management. Can you add your jpa properties (from the <code>application.properties</code>) to your question as well. Generally these errors come from wrong configuration or from manually using the <code>DataSource</code> and obtaining connections without properly releasing them."},{"owner":{"account_id":19124055,"reputation":27,"user_id":13967389,"display_name":"Pankaj Chouhan"},"score":0,"creation_date":1662988244,"post_id":73688119,"comment_id":130126551,"body_markdown":"@M.Deinum Thanks for yours reply, we have given @Transactional to some of our heavy CRUD ServiceImpl and also given @Configuration to HibernateConfig.\n\n    Only this much Jpa Prop we have given\n```\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.hibernate.ddl-auto=none\n```","body":"@M.Deinum Thanks for yours reply, we have given @Transactional to some of our heavy CRUD ServiceImpl and also given @Configuration to HibernateConfig.      Only this much Jpa Prop we have given ``` spring.jpa.show-sql=true spring.jpa.properties.hibernate.format_sql=true spring.jpa.hibernate.ddl-auto=none ```"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1662989757,"post_id":73688119,"comment_id":130127140,"body_markdown":"All uour methods operating on the database should be `@Transactional`. Please don&#39;t add additional information as comments as that is totally unreadable. Please add your `applicaiton.properties` to your question instead.","body":"All uour methods operating on the database should be <code>@Transactional</code>. Please don&#39;t add additional information as comments as that is totally unreadable. Please add your <code>applicaiton.properties</code> to your question instead."},{"owner":{"account_id":19124055,"reputation":27,"user_id":13967389,"display_name":"Pankaj Chouhan"},"score":0,"creation_date":1662997339,"post_id":73688119,"comment_id":130130146,"body_markdown":"Hi @M.Deinum i have added application.properties file. Thank You.","body":"Hi @M.Deinum i have added application.properties file. Thank You."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1663046904,"post_id":73688119,"comment_id":130140538,"body_markdown":"As you are using Spring Boot I would suggest removing your dedicated configuration and add a `EntityManagerFactoryBuilderCustomizer` to configure the multi-tenant stuff, that way you can use the Spring Boot auto configuration better. However you have a connection leak so check the places in which you use the entitymanager without a transaction (It shouls really be transactional all your database related stuff) and see if you are properly using it. Also check if there are places you are using a connection without properly returning it.","body":"As you are using Spring Boot I would suggest removing your dedicated configuration and add a <code>EntityManagerFactoryBuilderCustomizer</code> to configure the multi-tenant stuff, that way you can use the Spring Boot auto configuration better. However you have a connection leak so check the places in which you use the entitymanager without a transaction (It shouls really be transactional all your database related stuff) and see if you are properly using it. Also check if there are places you are using a connection without properly returning it."}],"owner":{"account_id":19124055,"reputation":27,"user_id":13967389,"display_name":"Pankaj Chouhan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7144,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1662997253,"creation_date":1662979895,"question_id":73688119,"body_markdown":"I&#39;m facing this issue i do deployment through jenkins.Our project is a multiTenant project which follows (Single database &amp; Separate Schemas). \r\n\r\nTotal 4 microservice we have and same tenantdatasource.java ,hibernateConfig.java in all microservice we have kept, along with same hikari pool config in application.properties.\r\n\r\n\r\nWhenever i do deployment it runs fine till 1 day and next day our api&#39;s starts giving error.\r\nconnection getting lost after 30000ms , it says Hikari Fill pool skipped, pool is at sufficient level.But runs fine in local.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n```\r\n2022-09-07 10:34:17.050 DEBUG 304980 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Pool stats (total=10, active=10, idle=0, waiting=4)\r\n2022-09-07 10:34:17.050 DEBUG 304980 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Fill pool skipped, pool is at sufficient level.\r\n2022-09-07 10:34:26.421 DEBUG 304980 --- [http-nio-9091-exec-8] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Timeout failure stats (total=10, active=10, idle=0, waiting=3)\r\n2022-09-07 10:34:26.422  INFO 304980 --- [http-nio-9091-exec-8] c.m.s.tenant.TenantConnectionProvider    : Inside catch for get any conncetion org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30000ms.\r\n2022-09-07 10:34:26.422  INFO 304980 --- [http-nio-9091-exec-8] c.m.session.tenant.RequestInterceptor    : java.lang.NullPointerException\r\n2022-09-07 10:34:26.422  INFO 304980 --- [http-nio-9091-exec-8] c.m.session.tenant.TenantSchemaResolver  : TenantSchemaResolver: qa-tenant-1\r\n2022-09-07 10:34:26.423  INFO 304980 --- [http-nio-9091-exec-8] c.m.s.tenant.TenantConnectionProvider    : INSIDE GET CONNECTION\r\n2022-09-07 10:34:26.423  INFO 304980 --- [http-nio-9091-exec-8] c.m.s.tenant.TenantConnectionProvider    : INSIDE GET ANY CONNECTION\r\n2022-09-07 10:34:26.423 DEBUG 304980 --- [http-nio-9091-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Timeout failure stats (total=10, active=10, idle=0, waiting=3)\r\n2022-09-07 10:34:26.423  INFO 304980 --- [http-nio-9091-exec-3] c.m.s.tenant.TenantConnectionProvider    : Inside catch for get any conncetion org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30003ms.\r\n2022-09-07 10:34:26.424  INFO 304980 --- [http-nio-9091-exec-3] c.m.session.tenant.RequestInterceptor    : java.lang.NullPointerException\r\n2022-09-07 10:34:26.424  INFO 304980 --- [http-nio-9091-exec-3] c.m.session.tenant.TenantSchemaResolver  : TenantSchemaResolver: qa-tenant-1\r\n2022-09-07 10:34:26.424  INFO 304980 --- [http-nio-9091-exec-3] c.m.s.tenant.TenantConnectionProvider    : INSIDE GET CONNECTION\r\n2022-09-07 10:34:26.424  INFO 304980 --- [http-nio-9091-exec-3] c.m.s.tenant.TenantConnectionProvider    : INSIDE GET ANY CONNECTION\r\n2022-09-07 10:34:30.005 DEBUG 304980 --- [MessageBroker-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Timeout failure stats (total=10, active=10, idle=0, waiting=2)\r\n2022-09-07 10:34:30.005 DEBUG 304980 --- [MessageBroker-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Timeout failure stats (total=10, active=10, idle=0, waiting=3)\r\n2022-09-07 10:34:30.005  INFO 304980 --- [MessageBroker-2] c.m.s.tenant.TenantConnectionProvider    : Inside catch for get any conncetion org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.\r\n2022-09-07 10:34:30.005  INFO 304980 --- [MessageBroker-1] c.m.s.tenant.TenantConnectionProvider    : Inside catch for get any conncetion org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-\r\n```\r\n\r\nHikari config\r\n\r\n```\r\nspring.datasource.hikari.connectionTimeout=30000\r\nspring.datasource.hikari.idleTimeout=600000\r\nspring.datasource.hikari.maxLifetime=180000\r\nspring.datasource.hikari.maximum-pool-size=10\r\nspring.datasource.hikari.auto-commit =true\r\nspring.datasource.hikari.leak-detection-threshold=40000\r\n\r\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG \r\nlogging.level.com.zaxxer.hikari=TRACE\r\n\r\n```\r\n\r\n\r\n\r\nHibernateConfig.java\r\n\r\n```\r\nimport org.hibernate.MultiTenancyStrategy;\r\nimport org.hibernate.cfg.Environment;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.autoconfigure.orm.jpa.JpaProperties;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Primary;\r\nimport org.springframework.orm.jpa.JpaVendorAdapter;\r\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport javax.sql.DataSource;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n@Component\r\npublic class HibernateConfig {\r\n\r\n    private static final Logger LOG = LoggerFactory.getLogger(HibernateConfig.class);\r\n\r\n    @Autowired\r\n    private JpaProperties jpaProperties;\r\n\r\n    @Bean\r\n    JpaVendorAdapter jpaVendorAdapter() {\r\n        return new HibernateJpaVendorAdapter();\r\n    }\r\n\r\n    @Primary\r\n    @Bean\r\n    LocalContainerEntityManagerFactoryBean entityManagerFactory(\r\n            DataSource dataSource,\r\n            TenantConnectionProvider multiTenantConnectionProviderImpl,\r\n            TenantSchemaResolver currentTenantIdentifierResolverImpl,\r\n            JpaVendorAdapter jpaVendorAdapter) {\r\n\r\n        Map&lt;String, Object&gt; jpaPropertiesMap = new HashMap&lt;&gt;(jpaProperties.getProperties());\r\n        jpaPropertiesMap.put(Environment.MULTI_TENANT, MultiTenancyStrategy.SCHEMA);\r\n        jpaPropertiesMap.put(Environment.MULTI_TENANT_CONNECTION_PROVIDER, multiTenantConnectionProviderImpl);\r\n        jpaPropertiesMap.put(Environment.MULTI_TENANT_IDENTIFIER_RESOLVER, currentTenantIdentifierResolverImpl);\r\n        jpaPropertiesMap.put(Environment.FORMAT_SQL, true);\r\n        jpaPropertiesMap.put(Environment.SHOW_SQL, true);\r\n        jpaPropertiesMap.put(Environment.USE_SECOND_LEVEL_CACHE, false);\r\n        LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n        em.setDataSource(dataSource);\r\n        em.setPackagesToScan(&quot;com.meis.*&quot;);\r\n        em.setJpaVendorAdapter(jpaVendorAdapter);\r\n        em.setJpaPropertyMap(jpaPropertiesMap);\r\n        return em;\r\n    }\r\n}\r\n```\r\n\r\n\r\nTenantConnectionProvider.java\r\n\r\n```\r\nimport org.hibernate.engine.jdbc.connections.spi.MultiTenantConnectionProvider;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport javax.sql.DataSource;\r\nimport java.sql.Connection;\r\nimport java.sql.SQLException;\r\n\r\n@Component\r\npublic class TenantConnectionProvider implements MultiTenantConnectionProvider {\r\n\r\n    private final DataSource datasource;\r\n    private final Logger logger = LoggerFactory.getLogger(TenantConnectionProvider.class);\r\n\r\n    @Value(&quot;${master.schema.name}&quot;)\r\n    public String defaultTenant;\r\n\r\n    public TenantConnectionProvider(DataSource dataSource) {\r\n        this.datasource = dataSource;\r\n    }\r\n\r\n    @Override\r\n    public Connection getAnyConnection() throws SQLException {\r\n        return datasource.getConnection();\r\n    }\r\n\r\n    @Override\r\n    public void releaseAnyConnection(Connection connection) throws SQLException {\r\n\r\n        try {\r\n            connection.close();\r\n\r\n            logger.info(&quot;Connection closed&quot;);\r\n\r\n        } catch (Exception e) {\r\n            logger.error(&quot;Connection not closed&quot;, e.toString());\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public Connection getConnection(String tenantIdentifier) throws SQLException {\r\n//        log.debug(&quot;Get connection for tenant {}&quot;, tenantIdentifier);\r\n        final Connection connection = getAnyConnection();\r\n\r\n        connection.setSchema(tenantIdentifier);\r\n        connection.setCatalog(tenantIdentifier);\r\n        return connection;\r\n    }\r\n\r\n    @Override\r\n    public void releaseConnection(String tenantIdentifier, Connection connection) throws SQLException {\r\n//        log.debug(&quot;Release connection for tenant {}&quot;, tenantIdentifier);\r\n        connection.setSchema(tenantIdentifier);\r\n        connection.setCatalog(tenantIdentifier);\r\n        releaseAnyConnection(connection);\r\n    }\r\n\r\n    @Override\r\n    public boolean supportsAggressiveRelease() {\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    @SuppressWarnings(&quot;rawtypes&quot;)\r\n    public boolean isUnwrappableAs(Class aClass) {\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public &lt;T&gt; T unwrap(Class&lt;T&gt; aClass) {\r\n        return null;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\nserver.port=9091\r\nspring.profiles.active=qa\r\nlogging.file.name=/home/ubuntu/logs/session-app.log\r\nlogging.file.max-size=10MB\r\nlogging.level.org.springframework.web: DEBUG\r\nlogging.level.org.hibernate: ERROR\r\n## MULTIPART (MultipartProperties)\r\n# Enable multipart uploads\r\nspring.servlet.multipart.enabled=true\r\n# Max file size.\r\nspring.servlet.multipart.max-file-size=200MB\r\n# Max Request Size\r\nspring.servlet.multipart.max-request-size=215MB\r\n\r\n\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\nspring.jpa.hibernate.ddl-auto=none\r\n\r\nadmin.default.topic=admin\r\n\r\nbyPassToken=hhhkhguuyiiih786566bhhkhgjbnkhgxfcgvhjghfgfvkhhhgcvhgfvbnbvbvvcdfdzzxknnlkbj\r\n\r\n\r\n\r\n# Connection pool configuration\r\n\r\nspring.datasource.hikari.connectionTimeout=30000\r\nspring.datasource.hikari.idleTimeout=600000\r\nspring.datasource.hikari.maxLifetime=180000\r\nspring.datasource.hikari.maximum-pool-size=10\r\n\r\nspring.datasource.hikari.leak-detection-threshold=40000\r\n\r\n\r\n\r\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG \r\nlogging.level.com.zaxxer.hikari=TRACE\r\n\r\n\r\n```\r\n","title":"HikariPool-1 - Fill pool skipped, pool is at sufficient level","body":"<p>I'm facing this issue i do deployment through jenkins.Our project is a multiTenant project which follows (Single database &amp; Separate Schemas).</p>\n<p>Total 4 microservice we have and same tenantdatasource.java ,hibernateConfig.java in all microservice we have kept, along with same hikari pool config in application.properties.</p>\n<p>Whenever i do deployment it runs fine till 1 day and next day our api's starts giving error.\nconnection getting lost after 30000ms , it says Hikari Fill pool skipped, pool is at sufficient level.But runs fine in local.</p>\n<pre><code>2022-09-07 10:34:17.050 DEBUG 304980 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Pool stats (total=10, active=10, idle=0, waiting=4)\n2022-09-07 10:34:17.050 DEBUG 304980 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Fill pool skipped, pool is at sufficient level.\n2022-09-07 10:34:26.421 DEBUG 304980 --- [http-nio-9091-exec-8] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Timeout failure stats (total=10, active=10, idle=0, waiting=3)\n2022-09-07 10:34:26.422  INFO 304980 --- [http-nio-9091-exec-8] c.m.s.tenant.TenantConnectionProvider    : Inside catch for get any conncetion org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30000ms.\n2022-09-07 10:34:26.422  INFO 304980 --- [http-nio-9091-exec-8] c.m.session.tenant.RequestInterceptor    : java.lang.NullPointerException\n2022-09-07 10:34:26.422  INFO 304980 --- [http-nio-9091-exec-8] c.m.session.tenant.TenantSchemaResolver  : TenantSchemaResolver: qa-tenant-1\n2022-09-07 10:34:26.423  INFO 304980 --- [http-nio-9091-exec-8] c.m.s.tenant.TenantConnectionProvider    : INSIDE GET CONNECTION\n2022-09-07 10:34:26.423  INFO 304980 --- [http-nio-9091-exec-8] c.m.s.tenant.TenantConnectionProvider    : INSIDE GET ANY CONNECTION\n2022-09-07 10:34:26.423 DEBUG 304980 --- [http-nio-9091-exec-3] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Timeout failure stats (total=10, active=10, idle=0, waiting=3)\n2022-09-07 10:34:26.423  INFO 304980 --- [http-nio-9091-exec-3] c.m.s.tenant.TenantConnectionProvider    : Inside catch for get any conncetion org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30003ms.\n2022-09-07 10:34:26.424  INFO 304980 --- [http-nio-9091-exec-3] c.m.session.tenant.RequestInterceptor    : java.lang.NullPointerException\n2022-09-07 10:34:26.424  INFO 304980 --- [http-nio-9091-exec-3] c.m.session.tenant.TenantSchemaResolver  : TenantSchemaResolver: qa-tenant-1\n2022-09-07 10:34:26.424  INFO 304980 --- [http-nio-9091-exec-3] c.m.s.tenant.TenantConnectionProvider    : INSIDE GET CONNECTION\n2022-09-07 10:34:26.424  INFO 304980 --- [http-nio-9091-exec-3] c.m.s.tenant.TenantConnectionProvider    : INSIDE GET ANY CONNECTION\n2022-09-07 10:34:30.005 DEBUG 304980 --- [MessageBroker-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Timeout failure stats (total=10, active=10, idle=0, waiting=2)\n2022-09-07 10:34:30.005 DEBUG 304980 --- [MessageBroker-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Timeout failure stats (total=10, active=10, idle=0, waiting=3)\n2022-09-07 10:34:30.005  INFO 304980 --- [MessageBroker-2] c.m.s.tenant.TenantConnectionProvider    : Inside catch for get any conncetion org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms.\n2022-09-07 10:34:30.005  INFO 304980 --- [MessageBroker-1] c.m.s.tenant.TenantConnectionProvider    : Inside catch for get any conncetion org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLTransientConnectionException: HikariPool-\n</code></pre>\n<p>Hikari config</p>\n<pre><code>spring.datasource.hikari.connectionTimeout=30000\nspring.datasource.hikari.idleTimeout=600000\nspring.datasource.hikari.maxLifetime=180000\nspring.datasource.hikari.maximum-pool-size=10\nspring.datasource.hikari.auto-commit =true\nspring.datasource.hikari.leak-detection-threshold=40000\n\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG \nlogging.level.com.zaxxer.hikari=TRACE\n\n</code></pre>\n<p>HibernateConfig.java</p>\n<pre><code>import org.hibernate.MultiTenancyStrategy;\nimport org.hibernate.cfg.Environment;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.autoconfigure.orm.jpa.JpaProperties;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.orm.jpa.JpaVendorAdapter;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.stereotype.Component;\n\nimport javax.sql.DataSource;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Component\npublic class HibernateConfig {\n\n    private static final Logger LOG = LoggerFactory.getLogger(HibernateConfig.class);\n\n    @Autowired\n    private JpaProperties jpaProperties;\n\n    @Bean\n    JpaVendorAdapter jpaVendorAdapter() {\n        return new HibernateJpaVendorAdapter();\n    }\n\n    @Primary\n    @Bean\n    LocalContainerEntityManagerFactoryBean entityManagerFactory(\n            DataSource dataSource,\n            TenantConnectionProvider multiTenantConnectionProviderImpl,\n            TenantSchemaResolver currentTenantIdentifierResolverImpl,\n            JpaVendorAdapter jpaVendorAdapter) {\n\n        Map&lt;String, Object&gt; jpaPropertiesMap = new HashMap&lt;&gt;(jpaProperties.getProperties());\n        jpaPropertiesMap.put(Environment.MULTI_TENANT, MultiTenancyStrategy.SCHEMA);\n        jpaPropertiesMap.put(Environment.MULTI_TENANT_CONNECTION_PROVIDER, multiTenantConnectionProviderImpl);\n        jpaPropertiesMap.put(Environment.MULTI_TENANT_IDENTIFIER_RESOLVER, currentTenantIdentifierResolverImpl);\n        jpaPropertiesMap.put(Environment.FORMAT_SQL, true);\n        jpaPropertiesMap.put(Environment.SHOW_SQL, true);\n        jpaPropertiesMap.put(Environment.USE_SECOND_LEVEL_CACHE, false);\n        LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n        em.setDataSource(dataSource);\n        em.setPackagesToScan(&quot;com.meis.*&quot;);\n        em.setJpaVendorAdapter(jpaVendorAdapter);\n        em.setJpaPropertyMap(jpaPropertiesMap);\n        return em;\n    }\n}\n</code></pre>\n<p>TenantConnectionProvider.java</p>\n<pre><code>import org.hibernate.engine.jdbc.connections.spi.MultiTenantConnectionProvider;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n\nimport javax.sql.DataSource;\nimport java.sql.Connection;\nimport java.sql.SQLException;\n\n@Component\npublic class TenantConnectionProvider implements MultiTenantConnectionProvider {\n\n    private final DataSource datasource;\n    private final Logger logger = LoggerFactory.getLogger(TenantConnectionProvider.class);\n\n    @Value(&quot;${master.schema.name}&quot;)\n    public String defaultTenant;\n\n    public TenantConnectionProvider(DataSource dataSource) {\n        this.datasource = dataSource;\n    }\n\n    @Override\n    public Connection getAnyConnection() throws SQLException {\n        return datasource.getConnection();\n    }\n\n    @Override\n    public void releaseAnyConnection(Connection connection) throws SQLException {\n\n        try {\n            connection.close();\n\n            logger.info(&quot;Connection closed&quot;);\n\n        } catch (Exception e) {\n            logger.error(&quot;Connection not closed&quot;, e.toString());\n        }\n\n    }\n\n    @Override\n    public Connection getConnection(String tenantIdentifier) throws SQLException {\n//        log.debug(&quot;Get connection for tenant {}&quot;, tenantIdentifier);\n        final Connection connection = getAnyConnection();\n\n        connection.setSchema(tenantIdentifier);\n        connection.setCatalog(tenantIdentifier);\n        return connection;\n    }\n\n    @Override\n    public void releaseConnection(String tenantIdentifier, Connection connection) throws SQLException {\n//        log.debug(&quot;Release connection for tenant {}&quot;, tenantIdentifier);\n        connection.setSchema(tenantIdentifier);\n        connection.setCatalog(tenantIdentifier);\n        releaseAnyConnection(connection);\n    }\n\n    @Override\n    public boolean supportsAggressiveRelease() {\n        return false;\n    }\n\n    @Override\n    @SuppressWarnings(&quot;rawtypes&quot;)\n    public boolean isUnwrappableAs(Class aClass) {\n        return false;\n    }\n\n    @Override\n    public &lt;T&gt; T unwrap(Class&lt;T&gt; aClass) {\n        return null;\n    }\n}\n\n</code></pre>\n<pre><code>server.port=9091\nspring.profiles.active=qa\nlogging.file.name=/home/ubuntu/logs/session-app.log\nlogging.file.max-size=10MB\nlogging.level.org.springframework.web: DEBUG\nlogging.level.org.hibernate: ERROR\n## MULTIPART (MultipartProperties)\n# Enable multipart uploads\nspring.servlet.multipart.enabled=true\n# Max file size.\nspring.servlet.multipart.max-file-size=200MB\n# Max Request Size\nspring.servlet.multipart.max-request-size=215MB\n\n\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.hibernate.ddl-auto=none\n\nadmin.default.topic=admin\n\nbyPassToken=hhhkhguuyiiih786566bhhkhgjbnkhgxfcgvhjghfgfvkhhhgcvhgfvbnbvbvvcdfdzzxknnlkbj\n\n\n\n# Connection pool configuration\n\nspring.datasource.hikari.connectionTimeout=30000\nspring.datasource.hikari.idleTimeout=600000\nspring.datasource.hikari.maxLifetime=180000\nspring.datasource.hikari.maximum-pool-size=10\n\nspring.datasource.hikari.leak-detection-threshold=40000\n\n\n\nlogging.level.com.zaxxer.hikari.HikariConfig=DEBUG \nlogging.level.com.zaxxer.hikari=TRACE\n\n\n</code></pre>\n"},{"tags":["java","upload","drive"],"comments":[{"owner":{"account_id":2513781,"reputation":1109,"user_id":2185630,"display_name":"dbl"},"score":0,"creation_date":1556616343,"post_id":55917579,"comment_id":98489753,"body_markdown":"A multipart file is just an abstraction that is used for transfers. It has the bytes, a name, and the type, etc. But it has no idea which is the source, is it really a file(bytes written on a physical drive)... You can not take this information at this point, unless you pass it somehow(meaning that you have to bundle it with the multipart at the moment of its creation). Check if [MultipartFile:: getOriginalFilename](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/multipart/MultipartFile.html#getOriginalFilename--) could be of any use to you.","body":"A multipart file is just an abstraction that is used for transfers. It has the bytes, a name, and the type, etc. But it has no idea which is the source, is it really a file(bytes written on a physical drive)... You can not take this information at this point, unless you pass it somehow(meaning that you have to bundle it with the multipart at the moment of its creation). Check if <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/multipart/MultipartFile.html#getOriginalFilename--\" rel=\"nofollow noreferrer\">MultipartFile:: getOriginalFilename</a> could be of any use to you."},{"owner":{"account_id":15836027,"reputation":35,"user_id":11425851,"display_name":"dorae"},"score":0,"creation_date":1556673260,"post_id":55917579,"comment_id":98514286,"body_markdown":"that is my local file that I chosen for upload to drive. i gave up to get the path. thank you for advice!","body":"that is my local file that I chosen for upload to drive. i gave up to get the path. thank you for advice!"}],"answers":[{"tags":[],"owner":{"account_id":9727934,"reputation":2489,"user_id":7214142,"display_name":"Yuriy Tsarkov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1556616241,"creation_date":1556616241,"answer_id":55917794,"question_id":55917579,"body_markdown":"You don&#39;t need a file path to upload the file anywhere. Use `multipartFile.getInputStream()` or `multipartFile.getBytes()` instead. Actually at the moment of getting the file you cann&#39;t know a path to a file (it&#39;s not a solid rule but rather a browser-dependent feature)","title":"how can I extract file path from MultipartFile","body":"<p>You don't need a file path to upload the file anywhere. Use <code>multipartFile.getInputStream()</code> or <code>multipartFile.getBytes()</code> instead. Actually at the moment of getting the file you cann't know a path to a file (it's not a solid rule but rather a browser-dependent feature)</p>\n"},{"tags":[],"owner":{"account_id":20701840,"reputation":871,"user_id":15200705,"display_name":"Luciana Oliveira"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624505508,"creation_date":1624505508,"answer_id":68109300,"question_id":55917579,"body_markdown":"I could not extract file path from MultipartFile directly. However I could get the getInputStream() proprety.\r\n\r\nThen, you can use the code below considering the **inputStream** is your MultPartFile variable .getInputStream().\r\n\r\n     StringBuilder resultStringBuilder = new StringBuilder();\r\n        try (BufferedReader br\r\n          = new BufferedReader(new InputStreamReader(**inputStream**))) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                resultStringBuilder.append(line).append(&quot;\\n&quot;);\r\n            }\r\n        }\r\n\r\nAfter you can read the resultStringBuilder variable and you can get the value you want.\r\n\r\nThis way worked to me. I hope can helps you.","title":"how can I extract file path from MultipartFile","body":"<p>I could not extract file path from MultipartFile directly. However I could get the getInputStream() proprety.</p>\n<p>Then, you can use the code below considering the <strong>inputStream</strong> is your MultPartFile variable .getInputStream().</p>\n<pre><code> StringBuilder resultStringBuilder = new StringBuilder();\n    try (BufferedReader br\n      = new BufferedReader(new InputStreamReader(**inputStream**))) {\n        String line;\n        while ((line = br.readLine()) != null) {\n            resultStringBuilder.append(line).append(&quot;\\n&quot;);\n        }\n    }\n</code></pre>\n<p>After you can read the resultStringBuilder variable and you can get the value you want.</p>\n<p>This way worked to me. I hope can helps you.</p>\n"},{"tags":[],"owner":{"account_id":14780386,"reputation":2981,"user_id":10674026,"display_name":"pero_hero"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662997218,"creation_date":1662997218,"answer_id":73691806,"question_id":55917579,"body_markdown":"You could consider using the `CommonsMultipartResolver` from `org.springframework.web.multipart.commons` which is the implementation for \r\n\r\n&gt; implementation for Apache Commons FileUpload  1.2 or above.\r\n\r\n  \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nThen create a `multipartResolver` bean:\r\n\r\n       @Bean(name = &quot;multipartResolver&quot;)\r\n        public CommonsMultipartResolver multipartResolver(\r\n                @Value(&quot;${spring.servlet.multipart.location}&quot;) String tmpFolder,\r\n                @Value(&quot;${spring.servlet.multipart.max-file-size}&quot;) DataSize maxFileSize,\r\n                @Value(&quot;${spring.servlet.multipart.max-request-size}&quot;) DataSize maxRequestSize) throws IOException {\r\n            CommonsMultipartResolver commonsMultipartResolver = new CommonsMultipartResolver();\r\n            commonsMultipartResolver.setDefaultEncoding(&quot;UTF-8&quot;);\r\n            commonsMultipartResolver.setMaxUploadSizePerFile(maxRequestSize.toBytes());\r\n            commonsMultipartResolver.setMaxUploadSize(maxFileSize.toBytes());\r\n            commonsMultipartResolver.setUploadTempDir(new FileUrlResource(tmpFolder));\r\n            return commonsMultipartResolver;\r\n        }\r\n\r\nThen you should get a `CommonsMultipartFile` as implementation of the `MultipartFile` interface in your method and you can get the absolute path of the `MultipartFile`:\r\n\r\n    File storeLocation = uploadFile.getFileItem().getStoreLocation();\r\n               \r\n","title":"how can I extract file path from MultipartFile","body":"<p>You could consider using the <code>CommonsMultipartResolver</code> from <code>org.springframework.web.multipart.commons</code> which is the implementation for</p>\n<blockquote>\n<p>implementation for Apache Commons FileUpload  1.2 or above.</p>\n</blockquote>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n    &lt;version&gt;1.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then create a <code>multipartResolver</code> bean:</p>\n<pre><code>   @Bean(name = &quot;multipartResolver&quot;)\n    public CommonsMultipartResolver multipartResolver(\n            @Value(&quot;${spring.servlet.multipart.location}&quot;) String tmpFolder,\n            @Value(&quot;${spring.servlet.multipart.max-file-size}&quot;) DataSize maxFileSize,\n            @Value(&quot;${spring.servlet.multipart.max-request-size}&quot;) DataSize maxRequestSize) throws IOException {\n        CommonsMultipartResolver commonsMultipartResolver = new CommonsMultipartResolver();\n        commonsMultipartResolver.setDefaultEncoding(&quot;UTF-8&quot;);\n        commonsMultipartResolver.setMaxUploadSizePerFile(maxRequestSize.toBytes());\n        commonsMultipartResolver.setMaxUploadSize(maxFileSize.toBytes());\n        commonsMultipartResolver.setUploadTempDir(new FileUrlResource(tmpFolder));\n        return commonsMultipartResolver;\n    }\n</code></pre>\n<p>Then you should get a <code>CommonsMultipartFile</code> as implementation of the <code>MultipartFile</code> interface in your method and you can get the absolute path of the <code>MultipartFile</code>:</p>\n<pre><code>File storeLocation = uploadFile.getFileItem().getStoreLocation();\n           \n</code></pre>\n"}],"owner":{"account_id":15836027,"reputation":35,"user_id":11425851,"display_name":"dorae"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21924,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1662997218,"creation_date":1556615476,"question_id":55917579,"body_markdown":"I want to extract file path then can upload to google drive. How can I get the path from MultipartFile??\r\n\r\n\t\t//logger.info(&quot;&quot;+uploadFile.getClass().getResource(&quot;&quot;).getFile().getPath());\r\n\t\t//System.out.println(uploadFile.getClass().getResource(&quot;&quot;).getPath());\r\n\r\nalso tried convert MultipartFile to File but cannot &quot;import java.io.File&quot; because of &quot;import com.google.api.services.drive.model.File;&quot; cannot be compatible with. I think. already use drive.model.File a lot.\r\n\r\n\t@Override\r\n\tpublic int uploadFile(HttpSession session, MultipartFile uploadFile) throws Exception {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tFile fileMetadata = new File();\r\n\t\t\r\n\t\tDrive driveService = getCredential(session);\r\n\t\t\r\n\t\tfileMetadata.setName(uploadFile.getOriginalFilename());\r\n\t\tlogger.info(uploadFile.getResource().getFile().getAbsoluteFile().getPath());\r\n\t\t//logger.info(&quot;&quot;+uploadFile.getClass().getResource(&quot;&quot;).getFile().getPath());\r\n\t\t//System.out.println(uploadFile.getClass().getResource(&quot;&quot;).getPath());\r\n\t\t\r\n\t\tjava.io.File filePath = new java.io.File(&quot;need to input file path here&quot;);\r\n\t\tFileContent mediaContent = new FileContent(&quot;image/jpeg&quot;, filePath);\r\n\t\tFile file = driveService.files().create(fileMetadata, mediaContent).setFields(&quot;id&quot;).execute();\r\n\t\tSystem.out.println(&quot;File ID: &quot; + file.getId());\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\nServlet.service() for servlet [appServlet] in context with path [] threw exception\r\njava.io.FileNotFoundException: MultipartFile resource [uploadFile] cannot be resolved to absolute file path\r\n\r\nI can get the name, size from MultipartFile that is in parameter so it is exists but how can I get the path from it??","title":"how can I extract file path from MultipartFile","body":"<p>I want to extract file path then can upload to google drive. How can I get the path from MultipartFile??</p>\n\n<pre><code>    //logger.info(\"\"+uploadFile.getClass().getResource(\"\").getFile().getPath());\n    //System.out.println(uploadFile.getClass().getResource(\"\").getPath());\n</code></pre>\n\n<p>also tried convert MultipartFile to File but cannot \"import java.io.File\" because of \"import com.google.api.services.drive.model.File;\" cannot be compatible with. I think. already use drive.model.File a lot.</p>\n\n<pre><code>@Override\npublic int uploadFile(HttpSession session, MultipartFile uploadFile) throws Exception {\n    // TODO Auto-generated method stub\n    File fileMetadata = new File();\n\n    Drive driveService = getCredential(session);\n\n    fileMetadata.setName(uploadFile.getOriginalFilename());\n    logger.info(uploadFile.getResource().getFile().getAbsoluteFile().getPath());\n    //logger.info(\"\"+uploadFile.getClass().getResource(\"\").getFile().getPath());\n    //System.out.println(uploadFile.getClass().getResource(\"\").getPath());\n\n    java.io.File filePath = new java.io.File(\"need to input file path here\");\n    FileContent mediaContent = new FileContent(\"image/jpeg\", filePath);\n    File file = driveService.files().create(fileMetadata, mediaContent).setFields(\"id\").execute();\n    System.out.println(\"File ID: \" + file.getId());\n\n    return 0;\n}\n</code></pre>\n\n<p>Servlet.service() for servlet [appServlet] in context with path [] threw exception\njava.io.FileNotFoundException: MultipartFile resource [uploadFile] cannot be resolved to absolute file path</p>\n\n<p>I can get the name, size from MultipartFile that is in parameter so it is exists but how can I get the path from it??</p>\n"},{"tags":["java","keytool","jarsigner"],"answers":[{"tags":[],"owner":{"account_id":27505,"reputation":32693,"user_id":72673,"accept_rate":72,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1279200630,"creation_date":1279200630,"answer_id":3255941,"question_id":3255836,"body_markdown":"It seems that your keystore contains only a certificate (public key) you need a complete key entry, with a private key, and the whole certificate chain to be able to sign anything","title":"Jarsigner: certificate chain not found for ","body":"<p>It seems that your keystore contains only a certificate (public key) you need a complete key entry, with a private key, and the whole certificate chain to be able to sign anything</p>\n"},{"tags":[],"owner":{"account_id":2156572,"reputation":3896,"user_id":1911652,"accept_rate":73,"display_name":"Atul"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1576542603,"creation_date":1576542603,"answer_id":59366045,"question_id":3255836,"body_markdown":"I faced same issue. I am having .p12 file issued by CA and I was trying to sign jar file. However I was getting error:\r\n\r\n    jarsigner: Certificate chain not found for:\r\n\r\nBasically I was copying alias name from console. It was having wrong character &#39;question mark&#39; (?) causing this error. Instead I redirected output of `keytool` to text file and then I copied alias name from there.\r\n\r\n1. Issue this command:\r\n\r\n    keytool -list -v -storetype pkcs12 -keystore &quot;mycertificate.p12&quot; &gt; cert.txt\r\n\r\n(This is very important. Always redirect to txt file. Do not copy from console output. It can contain wrong characters) \r\n\r\n2. Find out alias name in certificate. Open cert.txt and copy string as it is mentioned in front of &quot;Alias name:&quot;\r\n\r\nLet&#39;s say this string is &quot;my alias name, a.p.’s my ca limited id&quot;\r\n\r\n3. Use jarsigner:\r\n\r\n    jarsigner -storetype pkcs12 -keystore &quot;mycertificate.p12&quot; myjarfile.jar &quot;my alias name, a.p.’s my ca limited id&quot;\r\n\r\n","title":"Jarsigner: certificate chain not found for ","body":"<p>I faced same issue. I am having .p12 file issued by CA and I was trying to sign jar file. However I was getting error:</p>\n\n<pre><code>jarsigner: Certificate chain not found for:\n</code></pre>\n\n<p>Basically I was copying alias name from console. It was having wrong character 'question mark' (?) causing this error. Instead I redirected output of <code>keytool</code> to text file and then I copied alias name from there.</p>\n\n<ol>\n<li><p>Issue this command:</p>\n\n<p>keytool -list -v -storetype pkcs12 -keystore \"mycertificate.p12\" > cert.txt</p></li>\n</ol>\n\n<p>(This is very important. Always redirect to txt file. Do not copy from console output. It can contain wrong characters) </p>\n\n<ol start=\"2\">\n<li>Find out alias name in certificate. Open cert.txt and copy string as it is mentioned in front of \"Alias name:\"</li>\n</ol>\n\n<p>Let's say this string is \"my alias name, a.p.’s my ca limited id\"</p>\n\n<ol start=\"3\">\n<li><p>Use jarsigner:</p>\n\n<p>jarsigner -storetype pkcs12 -keystore \"mycertificate.p12\" myjarfile.jar \"my alias name, a.p.’s my ca limited id\"</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6937846,"reputation":573,"user_id":5325222,"display_name":"Andy Piper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1595856936,"creation_date":1595856936,"answer_id":63116534,"question_id":3255836,"body_markdown":"I had this error, but it was a different issue. When you send off a CSR to a CA it comes from a particular private key with a particular alias that you generated. When you receive the cert back again you ***must import it using the same alias name*** or else the two certs will not be wired together. \r\n\r\nIf you have done it right, when you use keytool -list -v you wil see a single entry with the alias name, of type\r\n\r\n    Entry type: PrivateKeyEntry\r\n    Certificate chain length: 3\r\n\r\nFor the entry.\r\nIf you have done it wrong the you will have two entries\r\n\r\n    Entry type: PrivateKeyEntry\r\n    Certificate chain length: 1\r\n\r\nand\r\n\r\n    Entry type: trustedCertEntry","title":"Jarsigner: certificate chain not found for ","body":"<p>I had this error, but it was a different issue. When you send off a CSR to a CA it comes from a particular private key with a particular alias that you generated. When you receive the cert back again you <em><strong>must import it using the same alias name</strong></em> or else the two certs will not be wired together.</p>\n<p>If you have done it right, when you use keytool -list -v you wil see a single entry with the alias name, of type</p>\n<pre><code>Entry type: PrivateKeyEntry\nCertificate chain length: 3\n</code></pre>\n<p>For the entry.\nIf you have done it wrong the you will have two entries</p>\n<pre><code>Entry type: PrivateKeyEntry\nCertificate chain length: 1\n</code></pre>\n<p>and</p>\n<pre><code>Entry type: trustedCertEntry\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10627020,"reputation":698,"user_id":7826372,"accept_rate":43,"display_name":"Islam Ahmed"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1611326022,"creation_date":1610352958,"answer_id":65663369,"question_id":3255836,"body_markdown":"**Short Answer**\r\n\r\nUse your alias key instead of key store like this:\r\n\r\n    jarsigner -verbose -keystore [Your signature storage path] -signedjar [signed filename] [unsigned filename] [Your alias key]\r\n\r\n**More Details**\r\n\r\nHere are the easiest way to solve this error:\r\n1) Go to bin folder .. it may be in this path:\r\n\r\n&gt; C:\\Users\\[Your computer name]\\jdk\\bin\r\n\r\nor this path:\r\n\r\n&gt; C:\\Program Files\\Java\\jre1.8.0_77\\bin\r\n\r\n2) To prevent issues caused by the configuration of environment variables, please copy both the **empty package** to be signed, and **your key store** [the private key for signature] to the **bin directory** under JDK. \r\n\r\n3) Get your alias key by run this command:\r\n\r\n    `keytool -keystore [your key store] -list -v`\r\n\r\n4) Finally run this command:\r\n\r\n   `jarsigner -verbose -keystore [Your signature storage path] -signedjar [signed filename] [unsigned filename] [Your alias key]`\r\n\r\n","title":"Jarsigner: certificate chain not found for ","body":"<p><strong>Short Answer</strong></p>\n<p>Use your alias key instead of key store like this:</p>\n<pre><code>jarsigner -verbose -keystore [Your signature storage path] -signedjar [signed filename] [unsigned filename] [Your alias key]\n</code></pre>\n<p><strong>More Details</strong></p>\n<p>Here are the easiest way to solve this error:</p>\n<ol>\n<li>Go to bin folder .. it may be in this path:</li>\n</ol>\n<blockquote>\n<p>C:\\Users[Your computer name]\\jdk\\bin</p>\n</blockquote>\n<p>or this path:</p>\n<blockquote>\n<p>C:\\Program Files\\Java\\jre1.8.0_77\\bin</p>\n</blockquote>\n<ol start=\"2\">\n<li><p>To prevent issues caused by the configuration of environment variables, please copy both the <strong>empty package</strong> to be signed, and <strong>your key store</strong> [the private key for signature] to the <strong>bin directory</strong> under JDK.</p>\n</li>\n<li><p>Get your alias key by run this command:</p>\n<p><code>keytool -keystore [your key store] -list -v</code></p>\n</li>\n<li><p>Finally run this command:</p>\n<p><code>jarsigner -verbose -keystore [Your signature storage path] -signedjar [signed filename] [unsigned filename] [Your alias key]</code></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":899108,"reputation":1915,"user_id":935715,"display_name":"Steve Mitchell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653749805,"creation_date":1653749805,"answer_id":72416689,"question_id":3255836,"body_markdown":"I encountered this error because I was using a Jenkins &quot;certificate&quot; credential.  The Jenkins credential configuration dialog has a text box called `Description`, whose help says it is a free comment describing the credential.  In fact, the Jenkins pipeline block `withCredentials` uses the `Description` text box to populate the environment variable named in the `aliasVariable` property.\r\n\r\n    withCredentials([certificate(\r\n        credentialsId:    my_credentials,\r\n        keystoreVariable: &#39;MY_KEYSTORE&#39;,\r\n        aliasVariable:    &#39;MY_ALIAS&#39;, // Set value in Description textbox\r\n        passwordVariable: &#39;MY_PASSWORD&#39;)]) {\r\n           bat &#39;mvn clean deploy -Dmy.keystore=%MY_KEYSTORE% -Dmy.alias=%MY_ALIAS% -Dmy.password=\\&quot;%MY_PASSWORD%\\&quot;&#39;\r\n    }\r\n\r\nThis is not mentioned in the Jenkins [documentation][1].\r\n\r\n\r\n  [1]: https://www.jenkins.io/doc/pipeline/steps/credentials-binding/","title":"Jarsigner: certificate chain not found for ","body":"<p>I encountered this error because I was using a Jenkins &quot;certificate&quot; credential.  The Jenkins credential configuration dialog has a text box called <code>Description</code>, whose help says it is a free comment describing the credential.  In fact, the Jenkins pipeline block <code>withCredentials</code> uses the <code>Description</code> text box to populate the environment variable named in the <code>aliasVariable</code> property.</p>\n<pre><code>withCredentials([certificate(\n    credentialsId:    my_credentials,\n    keystoreVariable: 'MY_KEYSTORE',\n    aliasVariable:    'MY_ALIAS', // Set value in Description textbox\n    passwordVariable: 'MY_PASSWORD')]) {\n       bat 'mvn clean deploy -Dmy.keystore=%MY_KEYSTORE% -Dmy.alias=%MY_ALIAS% -Dmy.password=\\&quot;%MY_PASSWORD%\\&quot;'\n}\n</code></pre>\n<p>This is not mentioned in the Jenkins <a href=\"https://www.jenkins.io/doc/pipeline/steps/credentials-binding/\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":2556420,"reputation":503,"user_id":2218290,"accept_rate":100,"display_name":"Myo Win"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662997193,"creation_date":1662997193,"answer_id":73691801,"question_id":3255836,"body_markdown":"`mylyn-mantis` should be the actual alias name you used when you generate the signing key. ","title":"Jarsigner: certificate chain not found for ","body":"<p><code>mylyn-mantis</code> should be the actual alias name you used when you generate the signing key.</p>\n"}],"owner":{"account_id":39088,"reputation":67399,"user_id":112671,"accept_rate":79,"display_name":"Robert Munteanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54378,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":3255941,"answer_count":6,"score":28,"last_activity_date":1662997193,"creation_date":1279199862,"question_id":3255836,"body_markdown":"I have imported a certificate into a private `~/.keystore` file:\r\n\r\n    keytool -list\r\n    Enter keystore password:\r\n    \r\n    Keystore type: JKS\r\n    Keystore provider: SUN\r\n    \r\n    Your keystore contains 1 entry\r\n    \r\n    mylyn-mantis, Jul 15, 2010, trustedCertEntry\r\n\r\nand am trying to sign a jar with it, but I get a &#39;certificate chain not found&#39; error.\r\n\r\n    jarsigner -verbose  /home/robert/file.jar mylyn-mantis\r\n    jarsigner: Certificate chain not found for: mylyn-mantis.  mylyn-mantis must reference a valid KeyStore key entry containing a private key and corresponding public key certificate chain.\r\n\r\nHow can I solve this problem?","title":"Jarsigner: certificate chain not found for ","body":"<p>I have imported a certificate into a private <code>~/.keystore</code> file:</p>\n\n<pre><code>keytool -list\nEnter keystore password:\n\nKeystore type: JKS\nKeystore provider: SUN\n\nYour keystore contains 1 entry\n\nmylyn-mantis, Jul 15, 2010, trustedCertEntry\n</code></pre>\n\n<p>and am trying to sign a jar with it, but I get a 'certificate chain not found' error.</p>\n\n<pre><code>jarsigner -verbose  /home/robert/file.jar mylyn-mantis\njarsigner: Certificate chain not found for: mylyn-mantis.  mylyn-mantis must reference a valid KeyStore key entry containing a private key and corresponding public key certificate chain.\n</code></pre>\n\n<p>How can I solve this problem?</p>\n"},{"tags":["java","spring-boot","rest","multipartform-data"],"answers":[{"tags":[],"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662997158,"creation_date":1662997158,"answer_id":73691791,"question_id":73689572,"body_markdown":"Ok, looks like the reason why this is happening is because your call in Postman is not specifying the response media type nor is your endpoint.\r\n\r\nSo your current call is saying `Accept: */*` (anything), and your endpoint isn&#39;t specific about what `FileResponse` should be returned as.\r\n\r\nSo, assuming you want a json response, you either need to update your Postman call to include\r\n```\r\nAccept: application/json\r\n```\r\nor  your endpoint\r\n```\r\n @RequestMapping(value = &quot;/upload-file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE, method = RequestMethod.POST, produces = MediaType.APPLICATION_JSON_VALUE)\r\n```\r\n\r\nAnother way to do this is to annotate your controller class with a `@RestController` and simplify your endpoint method by removing the `@ResponseBody` and going with `@PostMapping(value = &quot;/upload-file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)` and you should be good to go.\r\n\r\nExample:\r\n```\r\n@RestController\r\npublic class UploadController {\r\n\r\n    @PostMapping(value = &quot;/upload-file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\n    public FileResponse uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file) {\r\n```\r\n\r\n","title":"Can&#39;t upload multipart file from postman to spring boot","body":"<p>Ok, looks like the reason why this is happening is because your call in Postman is not specifying the response media type nor is your endpoint.</p>\n<p>So your current call is saying <code>Accept: */*</code> (anything), and your endpoint isn't specific about what <code>FileResponse</code> should be returned as.</p>\n<p>So, assuming you want a json response, you either need to update your Postman call to include</p>\n<pre><code>Accept: application/json\n</code></pre>\n<p>or  your endpoint</p>\n<pre><code> @RequestMapping(value = &quot;/upload-file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE, method = RequestMethod.POST, produces = MediaType.APPLICATION_JSON_VALUE)\n</code></pre>\n<p>Another way to do this is to annotate your controller class with a <code>@RestController</code> and simplify your endpoint method by removing the <code>@ResponseBody</code> and going with <code>@PostMapping(value = &quot;/upload-file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)</code> and you should be good to go.</p>\n<p>Example:</p>\n<pre><code>@RestController\npublic class UploadController {\n\n    @PostMapping(value = &quot;/upload-file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n    public FileResponse uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file) {\n</code></pre>\n"}],"owner":{"account_id":26313726,"reputation":1,"user_id":19976848,"display_name":"Nikita Zakharov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662997158,"creation_date":1662986963,"question_id":73689572,"body_markdown":"I have the method:\r\n\r\n    @RequestMapping(value = &quot;/upload-file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE, method = RequestMethod.POST)\r\n    @ResponseBody\r\n    public FileResponse uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file) {\r\n        String name = storageService.store(file);\r\n    \r\n        String uri = ServletUriComponentsBuilder.fromCurrentContextPath()\r\n                .path(&quot;/download/&quot;)\r\n                .path(name)\r\n                .toUriString();\r\n    \r\n        return new FileResponse(name, uri, file.getContentType(), file.getSize());\r\n    }\r\n\r\nWhen I try to upload file from postman I get the response:\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2022-09-12T12:42:46.493+00:00&quot;,\r\n        &quot;status&quot;: 406,\r\n        &quot;error&quot;: &quot;Not Acceptable&quot;,\r\n        &quot;path&quot;: &quot;/upload-file&quot;\r\n    }\r\n\r\nPostman request: \r\n[![enter image description here][1]][1]\r\n\r\nPostman headers:\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/50HJy.png\r\n  [2]: https://i.stack.imgur.com/MfQA6.png","title":"Can&#39;t upload multipart file from postman to spring boot","body":"<p>I have the method:</p>\n<pre><code>@RequestMapping(value = &quot;/upload-file&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE, method = RequestMethod.POST)\n@ResponseBody\npublic FileResponse uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file) {\n    String name = storageService.store(file);\n\n    String uri = ServletUriComponentsBuilder.fromCurrentContextPath()\n            .path(&quot;/download/&quot;)\n            .path(name)\n            .toUriString();\n\n    return new FileResponse(name, uri, file.getContentType(), file.getSize());\n}\n</code></pre>\n<p>When I try to upload file from postman I get the response:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2022-09-12T12:42:46.493+00:00&quot;,\n    &quot;status&quot;: 406,\n    &quot;error&quot;: &quot;Not Acceptable&quot;,\n    &quot;path&quot;: &quot;/upload-file&quot;\n}\n</code></pre>\n<p>Postman request:\n<a href=\"https://i.stack.imgur.com/50HJy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/50HJy.png\" alt=\"enter image description here\" /></a></p>\n<p>Postman headers:\n<a href=\"https://i.stack.imgur.com/MfQA6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MfQA6.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","collections","java-8","java-stream"],"comments":[{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":1,"creation_date":1521252688,"post_id":49324437,"comment_id":85665724,"body_markdown":"I think your approach is fine, and as efficient as it gets. You could just wrap it into a method (replacing the `equals...` call with the corresponding `BiPredicate`). For readability, I would replace the nested streaming in the filter criterion with a call to a method like `boolean contains(Collection&lt;T&gt;, T, BiPredicate&lt;T, T&gt;)`, but other than that, everything seems to be fine here.","body":"I think your approach is fine, and as efficient as it gets. You could just wrap it into a method (replacing the <code>equals...</code> call with the corresponding <code>BiPredicate</code>). For readability, I would replace the nested streaming in the filter criterion with a call to a method like <code>boolean contains(Collection&lt;T&gt;, T, BiPredicate&lt;T, T&gt;)</code>, but other than that, everything seems to be fine here."},{"owner":{"account_id":8245409,"reputation":3834,"user_id":6201659,"display_name":"Jose Da Silva Gomes"},"score":0,"creation_date":1521254509,"post_id":49324437,"comment_id":85665998,"body_markdown":"I think that the key point here is the custom equals function without overriding the equals, not the difference itself.","body":"I think that the key point here is the custom equals function without overriding the equals, not the difference itself."},{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":0,"creation_date":1521313653,"post_id":49324437,"comment_id":85681748,"body_markdown":"@JoseDaSilva If this was the case, it should be made **much** clearer in the question. Although the answer would then be `BiPredicate&lt;T, T&gt; p = (t0,t1) -&gt; t0.equalsWithoutSomeField(t1);`, which is a rather &quot;trivial&quot; syntactical detail...","body":"@JoseDaSilva If this was the case, it should be made <b>much</b> clearer in the question. Although the answer would then be <code>BiPredicate&lt;T, T&gt; p = (t0,t1) -&gt; t0.equalsWithoutSomeField(t1);</code>, which is a rather &quot;trivial&quot; syntactical detail..."},{"owner":{"account_id":8245409,"reputation":3834,"user_id":6201659,"display_name":"Jose Da Silva Gomes"},"score":0,"creation_date":1521317504,"post_id":49324437,"comment_id":85682941,"body_markdown":"There i agree, if he already has the `Foo::equalsWithoutSomeField` method, the correct answer would be a simple static function using that `BiPredicate`. The solution can use the same diff method that he already provide because it works fine. In the opposite case, and even to help people with a similar issue that do not have that `equalsWithoutSomeField`, the key would be here, in this method.","body":"There i agree, if he already has the <code>Foo::equalsWithoutSomeField</code> method, the correct answer would be a simple static function using that <code>BiPredicate</code>. The solution can use the same diff method that he already provide because it works fine. In the opposite case, and even to help people with a similar issue that do not have that <code>equalsWithoutSomeField</code>, the key would be here, in this method."},{"owner":{"account_id":7844827,"reputation":392,"user_id":5930242,"display_name":"FredBoutin"},"score":0,"creation_date":1521471668,"post_id":49324437,"comment_id":85732620,"body_markdown":"@Marco13 surely I can do that. I was looking for some hidden utils I&#39;m unaware of that would do this OOTB by passing only the collections and the predicate. Just like I mentioned in the question.","body":"@Marco13 surely I can do that. I was looking for some hidden utils I&#39;m unaware of that would do this OOTB by passing only the collections and the predicate. Just like I mentioned in the question."}],"answers":[{"tags":[],"owner":{"account_id":8245409,"reputation":3834,"user_id":6201659,"display_name":"Jose Da Silva Gomes"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1565553315,"creation_date":1521215236,"answer_id":49324753,"question_id":49324437,"body_markdown":"**Comparing**\n\nYou can achieve this without the use of any library, just using java&#39;s [Comparator][1]\n\nFor instance, with the following object \n\n    public class A {\n        private String a;\n        private Double b;\n        private String c;\n        private int d;\n        // getters and setters\n    }\n\nYou can use a comparator like\n\n    Comparator&lt;AA&gt; comparator = Comparator.comparing(AA::getA)\n            .thenComparing(AA::getB)\n            .thenComparingInt(AA::getD);\n\nThis compares the fields `a`, `b` and the int `d`, skipping `c`.\n\nThe only problem here is that this won&#39;t work with null values.\n\n----------\n\n**Comparing nulls**\n\nOne possible solution to do a fine grained configuration, that is allow to check for specific null fields is using a `Comparator` class similar to:\n\n    // Comparator for properties only, only writed to be used with Comparator#comparing\n    public final class PropertyNullComparator&lt;T extends Comparable&lt;? super T&gt;&gt; \n                                                implements Comparator&lt;Object&gt; {\n        private PropertyNullComparator() {  }\n        public static &lt;T extends Comparable&lt;? super T&gt;&gt; PropertyNullComparator&lt;T&gt; of() {\n            return new PropertyNullComparator&lt;&gt;();\n        }\n        @Override\n        public int compare(Object o1, Object o2) {\n            if (o1 != null &amp;&amp; o2 != null) {\n                if (o1 instanceof Comparable) {\n                    @SuppressWarnings({ &quot;unchecked&quot; })\n                    Comparable&lt;Object&gt; comparable = (Comparable&lt;Object&gt;) o1;\n                    return comparable.compareTo(o2);\n                } else {\n                    // this will throw a ccn exception when object is not comparable\n                    @SuppressWarnings({ &quot;unchecked&quot; })\n                    Comparable&lt;Object&gt; comparable = (Comparable&lt;Object&gt;) o2;\n                    return comparable.compareTo(o1) * -1; // * -1 to keep order\n                }\n            } else {\n                return o1 == o2 ? 0 : (o1 == null ? -1 : 1); // nulls first\n            }\n        }\n    }\n\nThis way you can use a comparator specifying the allowed null fields.\n\n    Comparator&lt;AA&gt; comparator = Comparator.comparing(AA::getA)\n            .thenComparing(AA::getB, PropertyNullComparator.of())\n            .thenComparingInt(AA::getD);\n\n----------\n\nIf you don&#39;t want to define a custom comparator you can use something like:\n\n    Comparator&lt;AA&gt; comparator = Comparator.comparing(AA::getA)\n            .thenComparing(AA::getB, Comparator.nullsFirst(Comparator.naturalOrder()))\n            .thenComparingInt(AA::getD);\n\n----------\n\n**Difference  method**\n\nThe difference (A - B) method could be implemented using two `TreeSets`. \n\n    static &lt;T&gt; TreeSet&lt;T&gt; difference(Collection&lt;T&gt; c1, \n                                     Collection&lt;T&gt; c2, \n                                     Comparator&lt;T&gt; comparator) {\n        TreeSet&lt;T&gt; treeSet1 = new TreeSet&lt;&gt;(comparator); treeSet1.addAll(c1);\n        if (treeSet1.size() &gt; c2.size()) {\n            treeSet1.removeAll(c2);\n        } else {\n            TreeSet&lt;T&gt; treeSet2 = new TreeSet&lt;&gt;(comparator); treeSet2.addAll(c2);\n            treeSet1.removeAll(treeSet2);\n        }\n        return treeSet1;\n    }\n\nnote: a `TreeSet` makes sense to be used since we are talking of uniqueness with a specific comparator. Also could perform better, the `contains` method of `TreeSet` is `O(log(n))`, compared to a common `ArrayList` that is `O(n)`.\n\nWhy only a `TreeSet` is used when `treeSet1.size() &gt; c2.size()`, this is because when the condition is not met, the `TreeSet#removeAll`, uses the `contains` method of the second collection, this second collection could be any java collection and its `contains` method its not guaranteed to work exactly the same as the `contains` of the first `TreeSet` (with custom comparator).\n\n----------\n\n**Edit (Given the more context of the question)**\n\nSince collection1 is a set that could contains repeated elements acording to the custom `equals` (not the `equals` of the object) the solution already provided in the question could be used, since it does exactly that, without modifying any of the input collections and creating a new output set.\n\nSo you can create your own static function (because at least i am not aware of a library that provides a similar method), and use the `Comparator` or a `BiPredicate`.\n\n    static &lt;T&gt; Set&lt;T&gt; difference(Collection&lt;T&gt; collection1, \n                                 Collection&lt;T&gt; collection2, \n                                 Comparator&lt;T&gt; comparator) {\n        collection1.stream()\n                .filter(element1 -&gt; !collection2.stream()\n                        .anyMatch(element2 -&gt; comparator.compare(element1, element2) == 0))\n                .collect(Collectors.toSet());\n    }\n\n**Edit (To Eugene)**\n\n*&quot;Why would you want to implement a null safe comparator yourself&quot;*\n\nAt least to my knowledge there isn&#39;t a comparator to compare fields when this are a simple and common null, the closest that i know of is (to raplace my sugested `PropertyNullComparator.of()` [clearer/shorter/better name can be used]):\n\n    Comparator.nullsFirst(Comparator.naturalOrder())\n    \nSo you would have to write that line for every field that you want to compare. Is this doable?, of course it is, is it practical?, i think not.\n\nEasy solution, create a helper method.\n\n    static class  ComparatorUtils {\n        public static &lt;T extends Comparable&lt;? super T&gt;&gt; Comparator&lt;T&gt; shnp() { // super short null comparator\n            return Comparator.nullsFirst(Comparator.&lt;T&gt;naturalOrder());\n        }\n    }\n\nDo this work?, yes this works, is it practical?, it looks like, is it a great solution? well that depends, many people consider the exaggerated (and/or unnecessary) use of helper methods as an anti-pattern, (a good old article by [Nick Malik][2]). There are some reasons listed there, but to make things short, this is an OO language, so OO solutions are normally preferred to static helper methods.\n    \n----------\n\n*&quot;As stated in the documentation : Note that the ordering maintained by a set (whether or not an explicit comparator is provided must be consistent with equals if it is to correctly implement the Set interface. Further, the same problem would arise in the other case, when size() &gt; c.size() because ultimately this would still call equals in the remove method. So they both have to implement Comparator and equals consistently for this to work correctly&quot;*\n\nThe javadoc says of [TreeSet][3] the following, but with a clear if:\n\n&gt; Note that the ordering maintained by a set (whether or not an explicit comparator is provided) must be consistent with equals **if it is to correctly implement the Set interface**\n\nThen says this:\n\n&gt; See Comparable or Comparator for a precise definition of consistent with equals\n\nIf you go to the [Comparable][4] javadoc says:\n\n&gt; It is strongly recommended (though not required) that natural orderings be consistent with equals\n\nIf we continue to read the javadoc again from Comparable (even in the same paragraph) says the following:\n\n&gt; This is so because the Set interface is defined in terms of the equals operation, but a TreeSet instance performs all key comparisons using its compareTo (or compare ) method, so two keys that are deemed equal by this method are, from the standpoint of the set, equal. The behavior of a set is well-defined even if its ordering is inconsistent with equals; it just fails to obey the general contract of the Set interface.\n\nBy this last quote and with a very simple code debug, or even a reading, you can see the use of an internal [TreeMap][5], and that all its derivated methods are based on the `comparator`, not the `equals` method;\n\n----------\n\n*&quot;Why is this so implemented? because there is a difference when removing many elements from a little set and the other way around, as a matter of fact same stands for addAll&quot;*\n\nIf you go to the definition of `removeAll` you can see that its implementation is in `AbstractSet`, it is not overrided. And this implementation uses a `contains` from the argument collection when this is larger, the beavior of this `contains` is uncertain, it isn&#39;t necessary (nor probable) that the received collection (e.g. list, queue, etc) has/can define the same comparator.\n\n**Update 1:**\nThis jdk bug is being discussed (and considerated to be fixed) in here https://bugs.openjdk.java.net/browse/JDK-6394757\n\n[1]:\nhttps://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\n\n[2]:\nhttps://blogs.msdn.microsoft.com/nickmalik/2005/09/06/are-helper-classes-evil/\n[3]:\nhttps://docs.oracle.com/cd/E17802_01/j2se/j2se/1.5.0/jcp/beta1/apidiffs/java/util/TreeSet.html\n\n[4]:\nhttps://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html\n[5]:\nhttps://docs.oracle.com/javase/8/docs/api/java/util/TreeMap.html","title":"Is there a simple way in Java to get the difference between two collections using a custom equals function without overriding the equals?","body":"<p><strong>Comparing</strong></p>\n<p>You can achieve this without the use of any library, just using java's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\">Comparator</a></p>\n<p>For instance, with the following object</p>\n<pre><code>public class A {\n    private String a;\n    private Double b;\n    private String c;\n    private int d;\n    // getters and setters\n}\n</code></pre>\n<p>You can use a comparator like</p>\n<pre><code>Comparator&lt;AA&gt; comparator = Comparator.comparing(AA::getA)\n        .thenComparing(AA::getB)\n        .thenComparingInt(AA::getD);\n</code></pre>\n<p>This compares the fields <code>a</code>, <code>b</code> and the int <code>d</code>, skipping <code>c</code>.</p>\n<p>The only problem here is that this won't work with null values.</p>\n<hr />\n<p><strong>Comparing nulls</strong></p>\n<p>One possible solution to do a fine grained configuration, that is allow to check for specific null fields is using a <code>Comparator</code> class similar to:</p>\n<pre><code>// Comparator for properties only, only writed to be used with Comparator#comparing\npublic final class PropertyNullComparator&lt;T extends Comparable&lt;? super T&gt;&gt; \n                                            implements Comparator&lt;Object&gt; {\n    private PropertyNullComparator() {  }\n    public static &lt;T extends Comparable&lt;? super T&gt;&gt; PropertyNullComparator&lt;T&gt; of() {\n        return new PropertyNullComparator&lt;&gt;();\n    }\n    @Override\n    public int compare(Object o1, Object o2) {\n        if (o1 != null &amp;&amp; o2 != null) {\n            if (o1 instanceof Comparable) {\n                @SuppressWarnings({ &quot;unchecked&quot; })\n                Comparable&lt;Object&gt; comparable = (Comparable&lt;Object&gt;) o1;\n                return comparable.compareTo(o2);\n            } else {\n                // this will throw a ccn exception when object is not comparable\n                @SuppressWarnings({ &quot;unchecked&quot; })\n                Comparable&lt;Object&gt; comparable = (Comparable&lt;Object&gt;) o2;\n                return comparable.compareTo(o1) * -1; // * -1 to keep order\n            }\n        } else {\n            return o1 == o2 ? 0 : (o1 == null ? -1 : 1); // nulls first\n        }\n    }\n}\n</code></pre>\n<p>This way you can use a comparator specifying the allowed null fields.</p>\n<pre><code>Comparator&lt;AA&gt; comparator = Comparator.comparing(AA::getA)\n        .thenComparing(AA::getB, PropertyNullComparator.of())\n        .thenComparingInt(AA::getD);\n</code></pre>\n<hr />\n<p>If you don't want to define a custom comparator you can use something like:</p>\n<pre><code>Comparator&lt;AA&gt; comparator = Comparator.comparing(AA::getA)\n        .thenComparing(AA::getB, Comparator.nullsFirst(Comparator.naturalOrder()))\n        .thenComparingInt(AA::getD);\n</code></pre>\n<hr />\n<p><strong>Difference  method</strong></p>\n<p>The difference (A - B) method could be implemented using two <code>TreeSets</code>.</p>\n<pre><code>static &lt;T&gt; TreeSet&lt;T&gt; difference(Collection&lt;T&gt; c1, \n                                 Collection&lt;T&gt; c2, \n                                 Comparator&lt;T&gt; comparator) {\n    TreeSet&lt;T&gt; treeSet1 = new TreeSet&lt;&gt;(comparator); treeSet1.addAll(c1);\n    if (treeSet1.size() &gt; c2.size()) {\n        treeSet1.removeAll(c2);\n    } else {\n        TreeSet&lt;T&gt; treeSet2 = new TreeSet&lt;&gt;(comparator); treeSet2.addAll(c2);\n        treeSet1.removeAll(treeSet2);\n    }\n    return treeSet1;\n}\n</code></pre>\n<p>note: a <code>TreeSet</code> makes sense to be used since we are talking of uniqueness with a specific comparator. Also could perform better, the <code>contains</code> method of <code>TreeSet</code> is <code>O(log(n))</code>, compared to a common <code>ArrayList</code> that is <code>O(n)</code>.</p>\n<p>Why only a <code>TreeSet</code> is used when <code>treeSet1.size() &gt; c2.size()</code>, this is because when the condition is not met, the <code>TreeSet#removeAll</code>, uses the <code>contains</code> method of the second collection, this second collection could be any java collection and its <code>contains</code> method its not guaranteed to work exactly the same as the <code>contains</code> of the first <code>TreeSet</code> (with custom comparator).</p>\n<hr />\n<p><strong>Edit (Given the more context of the question)</strong></p>\n<p>Since collection1 is a set that could contains repeated elements acording to the custom <code>equals</code> (not the <code>equals</code> of the object) the solution already provided in the question could be used, since it does exactly that, without modifying any of the input collections and creating a new output set.</p>\n<p>So you can create your own static function (because at least i am not aware of a library that provides a similar method), and use the <code>Comparator</code> or a <code>BiPredicate</code>.</p>\n<pre><code>static &lt;T&gt; Set&lt;T&gt; difference(Collection&lt;T&gt; collection1, \n                             Collection&lt;T&gt; collection2, \n                             Comparator&lt;T&gt; comparator) {\n    collection1.stream()\n            .filter(element1 -&gt; !collection2.stream()\n                    .anyMatch(element2 -&gt; comparator.compare(element1, element2) == 0))\n            .collect(Collectors.toSet());\n}\n</code></pre>\n<p><strong>Edit (To Eugene)</strong></p>\n<p><em>&quot;Why would you want to implement a null safe comparator yourself&quot;</em></p>\n<p>At least to my knowledge there isn't a comparator to compare fields when this are a simple and common null, the closest that i know of is (to raplace my sugested <code>PropertyNullComparator.of()</code> [clearer/shorter/better name can be used]):</p>\n<pre><code>Comparator.nullsFirst(Comparator.naturalOrder())\n</code></pre>\n<p>So you would have to write that line for every field that you want to compare. Is this doable?, of course it is, is it practical?, i think not.</p>\n<p>Easy solution, create a helper method.</p>\n<pre><code>static class  ComparatorUtils {\n    public static &lt;T extends Comparable&lt;? super T&gt;&gt; Comparator&lt;T&gt; shnp() { // super short null comparator\n        return Comparator.nullsFirst(Comparator.&lt;T&gt;naturalOrder());\n    }\n}\n</code></pre>\n<p>Do this work?, yes this works, is it practical?, it looks like, is it a great solution? well that depends, many people consider the exaggerated (and/or unnecessary) use of helper methods as an anti-pattern, (a good old article by <a href=\"https://blogs.msdn.microsoft.com/nickmalik/2005/09/06/are-helper-classes-evil/\" rel=\"nofollow noreferrer\">Nick Malik</a>). There are some reasons listed there, but to make things short, this is an OO language, so OO solutions are normally preferred to static helper methods.</p>\n<hr />\n<p><em>&quot;As stated in the documentation : Note that the ordering maintained by a set (whether or not an explicit comparator is provided must be consistent with equals if it is to correctly implement the Set interface. Further, the same problem would arise in the other case, when size() &gt; c.size() because ultimately this would still call equals in the remove method. So they both have to implement Comparator and equals consistently for this to work correctly&quot;</em></p>\n<p>The javadoc says of <a href=\"https://docs.oracle.com/cd/E17802_01/j2se/j2se/1.5.0/jcp/beta1/apidiffs/java/util/TreeSet.html\" rel=\"nofollow noreferrer\">TreeSet</a> the following, but with a clear if:</p>\n<blockquote>\n<p>Note that the ordering maintained by a set (whether or not an explicit comparator is provided) must be consistent with equals <strong>if it is to correctly implement the Set interface</strong></p>\n</blockquote>\n<p>Then says this:</p>\n<blockquote>\n<p>See Comparable or Comparator for a precise definition of consistent with equals</p>\n</blockquote>\n<p>If you go to the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html\" rel=\"nofollow noreferrer\">Comparable</a> javadoc says:</p>\n<blockquote>\n<p>It is strongly recommended (though not required) that natural orderings be consistent with equals</p>\n</blockquote>\n<p>If we continue to read the javadoc again from Comparable (even in the same paragraph) says the following:</p>\n<blockquote>\n<p>This is so because the Set interface is defined in terms of the equals operation, but a TreeSet instance performs all key comparisons using its compareTo (or compare ) method, so two keys that are deemed equal by this method are, from the standpoint of the set, equal. The behavior of a set is well-defined even if its ordering is inconsistent with equals; it just fails to obey the general contract of the Set interface.</p>\n</blockquote>\n<p>By this last quote and with a very simple code debug, or even a reading, you can see the use of an internal <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/TreeMap.html\" rel=\"nofollow noreferrer\">TreeMap</a>, and that all its derivated methods are based on the <code>comparator</code>, not the <code>equals</code> method;</p>\n<hr />\n<p><em>&quot;Why is this so implemented? because there is a difference when removing many elements from a little set and the other way around, as a matter of fact same stands for addAll&quot;</em></p>\n<p>If you go to the definition of <code>removeAll</code> you can see that its implementation is in <code>AbstractSet</code>, it is not overrided. And this implementation uses a <code>contains</code> from the argument collection when this is larger, the beavior of this <code>contains</code> is uncertain, it isn't necessary (nor probable) that the received collection (e.g. list, queue, etc) has/can define the same comparator.</p>\n<p><strong>Update 1:</strong>\nThis jdk bug is being discussed (and considerated to be fixed) in here <a href=\"https://bugs.openjdk.java.net/browse/JDK-6394757\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-6394757</a></p>\n"},{"tags":[],"owner":{"account_id":10377194,"reputation":4505,"user_id":7653073,"display_name":"Malte Hartwig"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1521217514,"creation_date":1521216610,"answer_id":49325158,"question_id":49324437,"body_markdown":"We use similar methods in our project to shorten repetitive collection filtering. We started with some basic building blocks:\r\n\r\n    static &lt;T&gt; boolean anyMatch(Collection&lt;T&gt; set, Predicate&lt;T&gt; match) {\r\n        for (T object : set)\r\n            if (match.test(object))\r\n                return true;\r\n        return false;\r\n    }\r\n\r\nBased on this, we can easily implement methods like `noneMatch` and more complicated ones like `isSubset` or your `diff`:\r\n\r\n    static &lt;E&gt; Collection&lt;E&gt; disjunctiveUnion(Collection&lt;E&gt; c1, Collection&lt;E&gt; c2, BiPredicate&lt;E, E&gt; match)\r\n    {\r\n        ArrayList&lt;E&gt; diff = new ArrayList&lt;&gt;();\r\n        diff.addAll(c1);\r\n        diff.addAll(c2);\r\n        diff.removeIf(e -&gt; anyMatch(c1, e1 -&gt; match.test(e, e1)) \r\n                           &amp;&amp; anyMatch(c2, e2 -&gt; match.test(e, e2)));\r\n        return diff;\r\n    }\r\n\r\n*Note that there are for sure some possibilities for perfomance tuning. But keeping it separated into small methods help understanding and using them with ease. Used in code they read quite nice.*\r\n\r\nYou would then use it as you already said:\r\n\r\n    CollectionUtils.disjunctiveUnion(collection1, collection2, Foo::equalsWithoutSomeField);\r\n\r\nTaking Jose Da Silva&#39;s suggestion into account, you could even use `Comparator` to build your criteria on the fly:\r\n\r\n    Comparator&lt;E&gt; special = Comparator.comparing(Foo::thisField)\r\n                                      .thenComparing(Foo::thatField);\r\n    BiPredicate specialMatch = (e1, e2) -&gt; special.compare(e1, e2) == 0;","title":"Is there a simple way in Java to get the difference between two collections using a custom equals function without overriding the equals?","body":"<p>We use similar methods in our project to shorten repetitive collection filtering. We started with some basic building blocks:</p>\n\n<pre><code>static &lt;T&gt; boolean anyMatch(Collection&lt;T&gt; set, Predicate&lt;T&gt; match) {\n    for (T object : set)\n        if (match.test(object))\n            return true;\n    return false;\n}\n</code></pre>\n\n<p>Based on this, we can easily implement methods like <code>noneMatch</code> and more complicated ones like <code>isSubset</code> or your <code>diff</code>:</p>\n\n<pre><code>static &lt;E&gt; Collection&lt;E&gt; disjunctiveUnion(Collection&lt;E&gt; c1, Collection&lt;E&gt; c2, BiPredicate&lt;E, E&gt; match)\n{\n    ArrayList&lt;E&gt; diff = new ArrayList&lt;&gt;();\n    diff.addAll(c1);\n    diff.addAll(c2);\n    diff.removeIf(e -&gt; anyMatch(c1, e1 -&gt; match.test(e, e1)) \n                       &amp;&amp; anyMatch(c2, e2 -&gt; match.test(e, e2)));\n    return diff;\n}\n</code></pre>\n\n<p><em>Note that there are for sure some possibilities for perfomance tuning. But keeping it separated into small methods help understanding and using them with ease. Used in code they read quite nice.</em></p>\n\n<p>You would then use it as you already said:</p>\n\n<pre><code>CollectionUtils.disjunctiveUnion(collection1, collection2, Foo::equalsWithoutSomeField);\n</code></pre>\n\n<p>Taking Jose Da Silva's suggestion into account, you could even use <code>Comparator</code> to build your criteria on the fly:</p>\n\n<pre><code>Comparator&lt;E&gt; special = Comparator.comparing(Foo::thisField)\n                                  .thenComparing(Foo::thatField);\nBiPredicate specialMatch = (e1, e2) -&gt; special.compare(e1, e2) == 0;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465094,"reputation":4280,"user_id":868975,"accept_rate":71,"display_name":"Bax"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521304390,"creation_date":1521225787,"answer_id":49327601,"question_id":49324437,"body_markdown":"    static &lt;T&gt; Collection&lt;T&gt; diff(Collection&lt;T&gt; minuend, Collection&lt;T&gt; subtrahend, BiPredicate&lt;T, T&gt; equals) {\r\n        Set&lt;Wrapper&lt;T&gt;&gt; w1 = minuend.stream().map(item -&gt; new Wrapper&lt;&gt;(item, equals)).collect(Collectors.toSet());\r\n        Set&lt;Wrapper&lt;T&gt;&gt; w2 = subtrahend.stream().map(item -&gt; new Wrapper&lt;&gt;(item, equals)).collect(Collectors.toSet());\r\n        w1.removeAll(w2);\r\n        return w1.stream().map(w -&gt; w.item).collect(Collectors.toList());\r\n    }\r\n\r\n    static class Wrapper&lt;T&gt; {\r\n        T item;\r\n        BiPredicate&lt;T, T&gt; equals;\r\n\r\n        Wrapper(T item, BiPredicate&lt;T, T&gt; equals) {\r\n            this.item = item;\r\n            this.equals = equals;\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            // all items have same hash code, check equals\r\n            return 1;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object that) {\r\n            return equals.test(this.item, ((Wrapper&lt;T&gt;) that).item);\r\n        }\r\n    }","title":"Is there a simple way in Java to get the difference between two collections using a custom equals function without overriding the equals?","body":"<pre><code>static &lt;T&gt; Collection&lt;T&gt; diff(Collection&lt;T&gt; minuend, Collection&lt;T&gt; subtrahend, BiPredicate&lt;T, T&gt; equals) {\n    Set&lt;Wrapper&lt;T&gt;&gt; w1 = minuend.stream().map(item -&gt; new Wrapper&lt;&gt;(item, equals)).collect(Collectors.toSet());\n    Set&lt;Wrapper&lt;T&gt;&gt; w2 = subtrahend.stream().map(item -&gt; new Wrapper&lt;&gt;(item, equals)).collect(Collectors.toSet());\n    w1.removeAll(w2);\n    return w1.stream().map(w -&gt; w.item).collect(Collectors.toList());\n}\n\nstatic class Wrapper&lt;T&gt; {\n    T item;\n    BiPredicate&lt;T, T&gt; equals;\n\n    Wrapper(T item, BiPredicate&lt;T, T&gt; equals) {\n        this.item = item;\n        this.equals = equals;\n    }\n\n    @Override\n    public int hashCode() {\n        // all items have same hash code, check equals\n        return 1;\n    }\n\n    @Override\n    public boolean equals(Object that) {\n        return equals.test(this.item, ((Wrapper&lt;T&gt;) that).item);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6722754,"reputation":1152,"user_id":5182052,"display_name":"Nikhil Nanivadekar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1521517818,"creation_date":1521257476,"answer_id":49332217,"question_id":49324437,"body_markdown":"You can use `UnifiedSetWithHashingStrategy` from [Eclipse Collections][1]. `UnifiedSetWithHashingStrategy` allows you to create a Set with a custom `HashingStrategy`. \r\n`HashingStrategy` allows the user to use a custom `hashCode()` and `equals()`. The Object&#39;s `hashCode()` and `equals()` is not used. \r\n\r\n**Edit based on requirement from OP via comment**: \r\n\r\nYou can use `reject()` or `removeIf()` depending on your requirement.\r\n\r\n**Code Example:**\r\n\r\n    // Common code\r\n    Person person1 = new Person(&quot;A&quot;, &quot;A&quot;);\r\n    Person person2 = new Person(&quot;B&quot;, &quot;B&quot;);\r\n    Person person3 = new Person(&quot;C&quot;, &quot;A&quot;);\r\n    Person person4 = new Person(&quot;A&quot;, &quot;D&quot;);\r\n    Person person5 = new Person(&quot;E&quot;, &quot;E&quot;);\r\n\r\n    MutableSet&lt;Person&gt; personSet1 = Sets.mutable.with(person1, person2, person3);\r\n    MutableSet&lt;Person&gt; personSet2 = Sets.mutable.with(person2, person4, person5);\r\n\r\n    HashingStrategy&lt;Person&gt; hashingStrategy =\r\n        HashingStrategies.fromFunction(Person::getLastName);\r\n\r\n1) Using `reject()`:  Creates a new `Set` which contains all the elements which do *not* satisfy the `Predicate`.\r\n\r\n    @Test\r\n    public void reject()\r\n    {\r\n        MutableSet&lt;Person&gt; personHashingStrategySet = HashingStrategySets.mutable.withAll(\r\n            hashingStrategy, personSet2);\r\n\r\n        // reject creates a new copy\r\n        MutableSet&lt;Person&gt; rejectSet = personSet1.reject(personHashingStrategySet::contains);\r\n        Assert.assertEquals(Sets.mutable.with(person1, person3), rejectSet);\r\n    }\r\n\r\n2) Using `removeIf()`: Mutates the original `Set` by *removing* the elements which satisfy the `Predicate`.\r\n\r\n    @Test\r\n    public void removeIfTest()\r\n    {\r\n        MutableSet&lt;Person&gt; personHashingStrategySet = HashingStrategySets.mutable.withAll(\r\n            hashingStrategy, personSet2);\r\n\r\n        // removeIf mutates the personSet1\r\n        personSet1.removeIf(personHashingStrategySet::contains);\r\n        Assert.assertEquals(Sets.mutable.with(person1, person3), personSet1);\r\n    }\r\n\r\n\r\n**Answer before requirement from OP via comment:** Kept for reference if others might find it useful.\r\n\r\n3) Using `Sets.differenceInto()` API available in Eclipse Collections:\r\n\r\nIn the code below, `set1` and `set2` are the two sets which use `Person`&#39;s `equals()` and `hashCode()`. The `differenceSet` is a `UnifiedSetWithHashingStrategy` so, it uses the `lastNameHashingStrategy` to define uniqueness. Hence, even though `set2` does not contain `person3` however it has the same lastName as `person1` the `differenceSet` contains only `person1`.\r\n\r\n    @Test\r\n    public void differenceTest()\r\n    {\r\n        MutableSet&lt;Person&gt; differenceSet = Sets.differenceInto(\r\n            HashingStrategySets.mutable.with(hashingStrategy), \r\n            set1, \r\n            set2);\r\n\r\n        Assert.assertEquals(Sets.mutable.with(person1), differenceSet);\r\n    }\r\n\r\nPerson class common to both code blocks:\r\n\r\n    public class Person\r\n    {\r\n        private final String firstName;\r\n        private final String lastName;\r\n\r\n        public Person(String firstName, String lastName)\r\n        {\r\n            this.firstName = firstName;\r\n            this.lastName = lastName;\r\n        }\r\n\r\n        public String getFirstName()\r\n        {\r\n            return firstName;\r\n        }\r\n\r\n        public String getLastName()\r\n        {\r\n            return lastName;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object o)\r\n        {\r\n            if (this == o)\r\n            {\r\n                return true;\r\n            }\r\n            if (o == null || getClass() != o.getClass())\r\n            {\r\n                return false;\r\n            }\r\n            Person person = (Person) o;\r\n            return Objects.equals(firstName, person.firstName) &amp;&amp;\r\n                    Objects.equals(lastName, person.lastName);\r\n        }\r\n\r\n        @Override\r\n        public int hashCode()\r\n        {\r\n            return Objects.hash(firstName, lastName);\r\n        }\r\n    }\r\n\r\n\r\n**Javadocs:** [MutableSet][2], [UnifiedSet][3], [UnifiedSetWithHashingStrategy][4], [HashingStrategy][5], [Sets][6], [reject][7], [removeIf][8]\r\n\r\n**Note:** I am a committer on Eclipse Collections\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/\r\n  [2]: https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/api/set/MutableSet.html\r\n  [3]: https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/set/mutable/UnifiedSet.html\r\n  [4]: https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/set/strategy/mutable/UnifiedSetWithHashingStrategy.html\r\n  [5]: https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/api/block/HashingStrategy.html\r\n  [6]: https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/factory/Sets.html\r\n  [7]: https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/set/mutable/UnifiedSet.html#reject-org.eclipse.collections.api.block.predicate.Predicate-\r\n  [8]: https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/collection/mutable/AbstractMutableCollection.html#removeIf-org.eclipse.collections.api.block.predicate.Predicate-","title":"Is there a simple way in Java to get the difference between two collections using a custom equals function without overriding the equals?","body":"<p>You can use <code>UnifiedSetWithHashingStrategy</code> from <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow noreferrer\">Eclipse Collections</a>. <code>UnifiedSetWithHashingStrategy</code> allows you to create a Set with a custom <code>HashingStrategy</code>. \n<code>HashingStrategy</code> allows the user to use a custom <code>hashCode()</code> and <code>equals()</code>. The Object's <code>hashCode()</code> and <code>equals()</code> is not used. </p>\n\n<p><strong>Edit based on requirement from OP via comment</strong>: </p>\n\n<p>You can use <code>reject()</code> or <code>removeIf()</code> depending on your requirement.</p>\n\n<p><strong>Code Example:</strong></p>\n\n<pre><code>// Common code\nPerson person1 = new Person(\"A\", \"A\");\nPerson person2 = new Person(\"B\", \"B\");\nPerson person3 = new Person(\"C\", \"A\");\nPerson person4 = new Person(\"A\", \"D\");\nPerson person5 = new Person(\"E\", \"E\");\n\nMutableSet&lt;Person&gt; personSet1 = Sets.mutable.with(person1, person2, person3);\nMutableSet&lt;Person&gt; personSet2 = Sets.mutable.with(person2, person4, person5);\n\nHashingStrategy&lt;Person&gt; hashingStrategy =\n    HashingStrategies.fromFunction(Person::getLastName);\n</code></pre>\n\n<p>1) Using <code>reject()</code>:  Creates a new <code>Set</code> which contains all the elements which do <em>not</em> satisfy the <code>Predicate</code>.</p>\n\n<pre><code>@Test\npublic void reject()\n{\n    MutableSet&lt;Person&gt; personHashingStrategySet = HashingStrategySets.mutable.withAll(\n        hashingStrategy, personSet2);\n\n    // reject creates a new copy\n    MutableSet&lt;Person&gt; rejectSet = personSet1.reject(personHashingStrategySet::contains);\n    Assert.assertEquals(Sets.mutable.with(person1, person3), rejectSet);\n}\n</code></pre>\n\n<p>2) Using <code>removeIf()</code>: Mutates the original <code>Set</code> by <em>removing</em> the elements which satisfy the <code>Predicate</code>.</p>\n\n<pre><code>@Test\npublic void removeIfTest()\n{\n    MutableSet&lt;Person&gt; personHashingStrategySet = HashingStrategySets.mutable.withAll(\n        hashingStrategy, personSet2);\n\n    // removeIf mutates the personSet1\n    personSet1.removeIf(personHashingStrategySet::contains);\n    Assert.assertEquals(Sets.mutable.with(person1, person3), personSet1);\n}\n</code></pre>\n\n<p><strong>Answer before requirement from OP via comment:</strong> Kept for reference if others might find it useful.</p>\n\n<p>3) Using <code>Sets.differenceInto()</code> API available in Eclipse Collections:</p>\n\n<p>In the code below, <code>set1</code> and <code>set2</code> are the two sets which use <code>Person</code>'s <code>equals()</code> and <code>hashCode()</code>. The <code>differenceSet</code> is a <code>UnifiedSetWithHashingStrategy</code> so, it uses the <code>lastNameHashingStrategy</code> to define uniqueness. Hence, even though <code>set2</code> does not contain <code>person3</code> however it has the same lastName as <code>person1</code> the <code>differenceSet</code> contains only <code>person1</code>.</p>\n\n<pre><code>@Test\npublic void differenceTest()\n{\n    MutableSet&lt;Person&gt; differenceSet = Sets.differenceInto(\n        HashingStrategySets.mutable.with(hashingStrategy), \n        set1, \n        set2);\n\n    Assert.assertEquals(Sets.mutable.with(person1), differenceSet);\n}\n</code></pre>\n\n<p>Person class common to both code blocks:</p>\n\n<pre><code>public class Person\n{\n    private final String firstName;\n    private final String lastName;\n\n    public Person(String firstName, String lastName)\n    {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n\n    public String getFirstName()\n    {\n        return firstName;\n    }\n\n    public String getLastName()\n    {\n        return lastName;\n    }\n\n    @Override\n    public boolean equals(Object o)\n    {\n        if (this == o)\n        {\n            return true;\n        }\n        if (o == null || getClass() != o.getClass())\n        {\n            return false;\n        }\n        Person person = (Person) o;\n        return Objects.equals(firstName, person.firstName) &amp;&amp;\n                Objects.equals(lastName, person.lastName);\n    }\n\n    @Override\n    public int hashCode()\n    {\n        return Objects.hash(firstName, lastName);\n    }\n}\n</code></pre>\n\n<p><strong>Javadocs:</strong> <a href=\"https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/api/set/MutableSet.html\" rel=\"nofollow noreferrer\">MutableSet</a>, <a href=\"https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/set/mutable/UnifiedSet.html\" rel=\"nofollow noreferrer\">UnifiedSet</a>, <a href=\"https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/set/strategy/mutable/UnifiedSetWithHashingStrategy.html\" rel=\"nofollow noreferrer\">UnifiedSetWithHashingStrategy</a>, <a href=\"https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/api/block/HashingStrategy.html\" rel=\"nofollow noreferrer\">HashingStrategy</a>, <a href=\"https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/factory/Sets.html\" rel=\"nofollow noreferrer\">Sets</a>, <a href=\"https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/set/mutable/UnifiedSet.html#reject-org.eclipse.collections.api.block.predicate.Predicate-\" rel=\"nofollow noreferrer\">reject</a>, <a href=\"https://www.eclipse.org/collections/javadoc/9.1.0/org/eclipse/collections/impl/collection/mutable/AbstractMutableCollection.html#removeIf-org.eclipse.collections.api.block.predicate.Predicate-\" rel=\"nofollow noreferrer\">removeIf</a></p>\n\n<p><strong>Note:</strong> I am a committer on Eclipse Collections</p>\n"},{"tags":[],"owner":{"account_id":7452114,"reputation":326,"user_id":5666521,"display_name":"Rail Yulgutlin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662996907,"creation_date":1662996907,"answer_id":73691740,"question_id":49324437,"body_markdown":"pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\r\n        &lt;version&gt;4.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\ncode/test:\r\n\r\n    package com.my;\r\n    \r\n    import lombok.Builder;\r\n    import lombok.Getter;\r\n    import lombok.ToString;\r\n    import org.apache.commons.collections4.CollectionUtils;\r\n    import org.apache.commons.collections4.Equator;\r\n    \r\n    import java.util.Collection;\r\n    import java.util.HashSet;\r\n    import java.util.Objects;\r\n    import java.util.Set;\r\n    import java.util.function.Function;\r\n    \r\n    public class Diff {\r\n    \r\n        public static class FieldEquator&lt;T&gt; implements Equator&lt;T&gt; {\r\n            private final Function&lt;T, Object&gt;[] functions;\r\n    \r\n            @SafeVarargs\r\n            public FieldEquator(Function&lt;T, Object&gt;... functions) {\r\n                if (Objects.isNull(functions) || functions.length &lt; 1) {\r\n                    throw new UnsupportedOperationException();\r\n                }\r\n                this.functions = functions;\r\n            }\r\n    \r\n            @Override\r\n            public boolean equate(T o1, T o2) {\r\n                if (Objects.isNull(o1) &amp;&amp; Objects.isNull(o2)) {\r\n                    return true;\r\n                }\r\n                if (Objects.isNull(o1) || Objects.isNull(o2)) {\r\n                    return false;\r\n                }\r\n                for (Function&lt;T, ?&gt; function : functions) {\r\n                    if (!Objects.equals(function.apply(o1), function.apply(o2))) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n    \r\n            @Override\r\n            public int hash(T o) {\r\n                if (Objects.isNull(o)) {\r\n                    return -1;\r\n                }\r\n                int i = 0;\r\n                Object[] vals = new Object[functions.length];\r\n                for (Function&lt;T, Object&gt; function : functions) {\r\n                    vals[i] = function.apply(o);\r\n                    i++;\r\n                }\r\n                return Objects.hash(vals);\r\n            }\r\n        }\r\n    \r\n        @SafeVarargs\r\n        private static &lt;T&gt; Set&lt;T&gt; difference(Collection&lt;T&gt; a, Collection&lt;T&gt; b, Function&lt;T, Object&gt;... functions) {\r\n            if ((Objects.isNull(a) || a.isEmpty()) &amp;&amp; Objects.nonNull(b) &amp;&amp; !b.isEmpty()) {\r\n                return new HashSet&lt;&gt;(b);\r\n            } else if ((Objects.isNull(b) || b.isEmpty()) &amp;&amp; Objects.nonNull(a) &amp;&amp; !a.isEmpty()) {\r\n                return new HashSet&lt;&gt;(a);\r\n            }\r\n    \r\n            Equator&lt;T&gt; eq = new FieldEquator&lt;&gt;(functions);\r\n    \r\n            Collection&lt;T&gt; res = CollectionUtils.removeAll(a, b, eq);\r\n            res.addAll(CollectionUtils.removeAll(b, a, eq));\r\n    \r\n            return new HashSet&lt;&gt;(res);\r\n        }\r\n    \r\n        /**\r\n         * Test\r\n         */\r\n    \r\n        @Builder\r\n        @Getter\r\n        @ToString\r\n        public static class A {\r\n            String a;\r\n            String b;\r\n            String c;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Set&lt;A&gt; as1 = new HashSet&lt;&gt;();\r\n            Set&lt;A&gt; as2 = new HashSet&lt;&gt;();\r\n    \r\n            A a1 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;1&quot;).build();\r\n            A a2 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;2&quot;).build();\r\n            A a3 = A.builder().a(&quot;2&quot;).b(&quot;1&quot;).c(&quot;1&quot;).build();\r\n            A a4 = A.builder().a(&quot;1&quot;).b(&quot;3&quot;).c(&quot;1&quot;).build();\r\n            A a5 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;1&quot;).build();\r\n            A a6 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;2&quot;).build();\r\n            A a7 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;6&quot;).build();\r\n\r\n            as1.add(a1);\r\n            as1.add(a2);\r\n            as1.add(a3);\r\n\r\n            as2.add(a4);\r\n            as2.add(a5);\r\n            as2.add(a6);\r\n            as2.add(a7);\r\n    \r\n            System.out.println(&quot;Set1: &quot; + as1);\r\n            System.out.println(&quot;Set2: &quot; + as2);\r\n    \r\n            // Check A::getA, A::getB ignore A::getC\r\n            Collection&lt;A&gt; difference = difference(as1, as2, A::getA, A::getB);\r\n    \r\n            System.out.println(&quot;Diff: &quot; + difference);\r\n        }\r\n    }\r\n\r\nresult:\r\n\r\n    Set1: [Diff.A(a=2, b=1, c=1), Diff.A(a=1, b=1, c=1), Diff.A(a=1, b=1, c=2)]\r\n    Set2: [Diff.A(a=1, b=1, c=6), Diff.A(a=1, b=1, c=2), Diff.A(a=1, b=3, c=1), Diff.A(a=1, b=1, c=1)]\r\n    Diff: [Diff.A(a=1, b=3, c=1), Diff.A(a=2, b=1, c=1)]","title":"Is there a simple way in Java to get the difference between two collections using a custom equals function without overriding the equals?","body":"<p>pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\n    &lt;version&gt;4.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>code/test:</p>\n<pre><code>package com.my;\n\nimport lombok.Builder;\nimport lombok.Getter;\nimport lombok.ToString;\nimport org.apache.commons.collections4.CollectionUtils;\nimport org.apache.commons.collections4.Equator;\n\nimport java.util.Collection;\nimport java.util.HashSet;\nimport java.util.Objects;\nimport java.util.Set;\nimport java.util.function.Function;\n\npublic class Diff {\n\n    public static class FieldEquator&lt;T&gt; implements Equator&lt;T&gt; {\n        private final Function&lt;T, Object&gt;[] functions;\n\n        @SafeVarargs\n        public FieldEquator(Function&lt;T, Object&gt;... functions) {\n            if (Objects.isNull(functions) || functions.length &lt; 1) {\n                throw new UnsupportedOperationException();\n            }\n            this.functions = functions;\n        }\n\n        @Override\n        public boolean equate(T o1, T o2) {\n            if (Objects.isNull(o1) &amp;&amp; Objects.isNull(o2)) {\n                return true;\n            }\n            if (Objects.isNull(o1) || Objects.isNull(o2)) {\n                return false;\n            }\n            for (Function&lt;T, ?&gt; function : functions) {\n                if (!Objects.equals(function.apply(o1), function.apply(o2))) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        @Override\n        public int hash(T o) {\n            if (Objects.isNull(o)) {\n                return -1;\n            }\n            int i = 0;\n            Object[] vals = new Object[functions.length];\n            for (Function&lt;T, Object&gt; function : functions) {\n                vals[i] = function.apply(o);\n                i++;\n            }\n            return Objects.hash(vals);\n        }\n    }\n\n    @SafeVarargs\n    private static &lt;T&gt; Set&lt;T&gt; difference(Collection&lt;T&gt; a, Collection&lt;T&gt; b, Function&lt;T, Object&gt;... functions) {\n        if ((Objects.isNull(a) || a.isEmpty()) &amp;&amp; Objects.nonNull(b) &amp;&amp; !b.isEmpty()) {\n            return new HashSet&lt;&gt;(b);\n        } else if ((Objects.isNull(b) || b.isEmpty()) &amp;&amp; Objects.nonNull(a) &amp;&amp; !a.isEmpty()) {\n            return new HashSet&lt;&gt;(a);\n        }\n\n        Equator&lt;T&gt; eq = new FieldEquator&lt;&gt;(functions);\n\n        Collection&lt;T&gt; res = CollectionUtils.removeAll(a, b, eq);\n        res.addAll(CollectionUtils.removeAll(b, a, eq));\n\n        return new HashSet&lt;&gt;(res);\n    }\n\n    /**\n     * Test\n     */\n\n    @Builder\n    @Getter\n    @ToString\n    public static class A {\n        String a;\n        String b;\n        String c;\n    }\n\n    public static void main(String[] args) {\n        Set&lt;A&gt; as1 = new HashSet&lt;&gt;();\n        Set&lt;A&gt; as2 = new HashSet&lt;&gt;();\n\n        A a1 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;1&quot;).build();\n        A a2 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;2&quot;).build();\n        A a3 = A.builder().a(&quot;2&quot;).b(&quot;1&quot;).c(&quot;1&quot;).build();\n        A a4 = A.builder().a(&quot;1&quot;).b(&quot;3&quot;).c(&quot;1&quot;).build();\n        A a5 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;1&quot;).build();\n        A a6 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;2&quot;).build();\n        A a7 = A.builder().a(&quot;1&quot;).b(&quot;1&quot;).c(&quot;6&quot;).build();\n\n        as1.add(a1);\n        as1.add(a2);\n        as1.add(a3);\n\n        as2.add(a4);\n        as2.add(a5);\n        as2.add(a6);\n        as2.add(a7);\n\n        System.out.println(&quot;Set1: &quot; + as1);\n        System.out.println(&quot;Set2: &quot; + as2);\n\n        // Check A::getA, A::getB ignore A::getC\n        Collection&lt;A&gt; difference = difference(as1, as2, A::getA, A::getB);\n\n        System.out.println(&quot;Diff: &quot; + difference);\n    }\n}\n</code></pre>\n<p>result:</p>\n<pre><code>Set1: [Diff.A(a=2, b=1, c=1), Diff.A(a=1, b=1, c=1), Diff.A(a=1, b=1, c=2)]\nSet2: [Diff.A(a=1, b=1, c=6), Diff.A(a=1, b=1, c=2), Diff.A(a=1, b=3, c=1), Diff.A(a=1, b=1, c=1)]\nDiff: [Diff.A(a=1, b=3, c=1), Diff.A(a=2, b=1, c=1)]\n</code></pre>\n"}],"owner":{"account_id":7844827,"reputation":392,"user_id":5930242,"display_name":"FredBoutin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":855,"favorite_count":0,"down_vote_count":2,"up_vote_count":7,"accepted_answer_id":49332217,"answer_count":5,"score":5,"last_activity_date":1662996907,"creation_date":1521214354,"question_id":49324437,"body_markdown":"I&#39;m open to use a lib. I just want something simple to diff two collections on a different criteria than the normal equals function.\r\n\r\nRight now I use something like :\r\n\r\n    collection1.stream()\r\n               .filter(element -&gt; !collection2.stream()\r\n                                              .anyMatch(element2 -&gt; element2.equalsWithoutSomeField(element)))\r\n               .collect(Collectors.toSet());\r\nand I would like something like :\r\n\r\n    Collections.diff(collection1, collection2, Foo::equalsWithoutSomeField);\r\n\r\n(edit) More context:\r\n\r\nShould of mentioned that I&#39;m looking for something that exists already and not to code it myself. I might code a small utils from your ideas if nothing exists.\r\n\r\nAlso, Real duplicates aren&#39;t possible in my case: the collections are Sets. However, duplicates according to the custom equals are possible and should not be removed by this operation. It seems to be a limitation in a lot of possible solutions.","title":"Is there a simple way in Java to get the difference between two collections using a custom equals function without overriding the equals?","body":"<p>I'm open to use a lib. I just want something simple to diff two collections on a different criteria than the normal equals function.</p>\n\n<p>Right now I use something like :</p>\n\n<pre><code>collection1.stream()\n           .filter(element -&gt; !collection2.stream()\n                                          .anyMatch(element2 -&gt; element2.equalsWithoutSomeField(element)))\n           .collect(Collectors.toSet());\n</code></pre>\n\n<p>and I would like something like :</p>\n\n<pre><code>Collections.diff(collection1, collection2, Foo::equalsWithoutSomeField);\n</code></pre>\n\n<p>(edit) More context:</p>\n\n<p>Should of mentioned that I'm looking for something that exists already and not to code it myself. I might code a small utils from your ideas if nothing exists.</p>\n\n<p>Also, Real duplicates aren't possible in my case: the collections are Sets. However, duplicates according to the custom equals are possible and should not be removed by this operation. It seems to be a limitation in a lot of possible solutions.</p>\n"},{"tags":["java","pythagorean"],"comments":[{"owner":{"account_id":2037746,"reputation":3939,"user_id":1819669,"accept_rate":75,"display_name":"Micho"},"score":0,"creation_date":1436492453,"post_id":31331064,"comment_id":50647713,"body_markdown":"What&#39;s the problem with your code? Are you getting any kind of error? Is it not returning the expected result? What&#39;s your question?","body":"What&#39;s the problem with your code? Are you getting any kind of error? Is it not returning the expected result? What&#39;s your question?"},{"owner":{"account_id":1627636,"reputation":1649,"user_id":1502810,"accept_rate":50,"display_name":"celticminstrel"},"score":0,"creation_date":1436492713,"post_id":31331064,"comment_id":50647765,"body_markdown":"This is unrelated to your issue, but there&#39;s a function `Math.hypot(a,b)` which calculates `sqrt(a*a+b*b)`. It probably doesn&#39;t matter in your sample code, mind you; however, if you had very large numbers, it could make a difference.","body":"This is unrelated to your issue, but there&#39;s a function <code>Math.hypot(a,b)</code> which calculates <code>sqrt(a*a+b*b)</code>. It probably doesn&#39;t matter in your sample code, mind you; however, if you had very large numbers, it could make a difference."}],"answers":[{"tags":[],"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436492773,"creation_date":1436492458,"answer_id":31331109,"question_id":31331064,"body_markdown":"You need to change the calls to `Math.sqrt(n)` to `Math.pow(n, 2)`, where n = a, b, c.\r\n\r\nSo, the code becomes\r\n\r\n     package cs520.hw1;\r\n    \r\n     public class Triples {\r\n             \r\n     public static void main(String[] args) \r\n     {\r\n            int x1, x2, x3; \r\n\r\n            for(x1 = 1; x1 &lt; 100; x1++)\r\n            {\r\n                for(x2 = 1; x2 &lt; 100; x2++)\r\n                {\r\n                    for(x3 = 1; x3 &lt; 100; x3++)\r\n                    {\r\n                        int a= x1, b=x2, c=x3;\r\n\r\n                        if((Math.pow(a, 2) + Math.pow(b, 2)) == Math.pow(c, 2))\r\n                        {\r\n                            if(a &lt; b)\r\n                            {\r\n                                System.out.println(x1 +&quot;  &quot;+ x2 +&quot;   &quot;+ x3);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }       \r\n        }\r\n    }\r\n","title":"Pythagorean Triples Calculation for Java","body":"<p>You need to change the calls to <code>Math.sqrt(n)</code> to <code>Math.pow(n, 2)</code>, where n = a, b, c.</p>\n\n<p>So, the code becomes</p>\n\n<pre><code> package cs520.hw1;\n\n public class Triples {\n\n public static void main(String[] args) \n {\n        int x1, x2, x3; \n\n        for(x1 = 1; x1 &lt; 100; x1++)\n        {\n            for(x2 = 1; x2 &lt; 100; x2++)\n            {\n                for(x3 = 1; x3 &lt; 100; x3++)\n                {\n                    int a= x1, b=x2, c=x3;\n\n                    if((Math.pow(a, 2) + Math.pow(b, 2)) == Math.pow(c, 2))\n                    {\n                        if(a &lt; b)\n                        {\n                            System.out.println(x1 +\"  \"+ x2 +\"   \"+ x3);\n                        }\n                    }\n                }\n            }\n        }       \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5133110,"reputation":3741,"user_id":4112664,"display_name":"almightyGOSU"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1436492597,"creation_date":1436492597,"answer_id":31331127,"question_id":31331064,"body_markdown":"**Example code:**\r\n\r\n    public class QuickTester {\r\n    \t\r\n    \t// Change MAX to whatever value required\r\n    \tprivate static final int MAX = 25;\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tint a, b, c;\r\n    \r\n            for(a = 1; a &lt; MAX; a++)\r\n            {\r\n                for(b = a; b &lt; MAX; b++)\r\n                {\r\n                    for(c = b; c &lt; MAX; c++)\r\n                    {\r\n                        if((Math.pow(a, 2) + Math.pow(b, 2))\r\n                        \t\t== Math.pow(c, 2))\r\n                        {\r\n                        \tSystem.out.printf(&quot;%d %d %d\\n&quot;,\r\n                        \t\t\ta, b, c);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \t}\r\n    }\r\n\r\n**Output (for MAX being 25 instead of 100):**\r\n\r\n    3 4 5\r\n    5 12 13\r\n    6 8 10\r\n    8 15 17\r\n    9 12 15\r\n    12 16 20\r\n\r\n**Note:**\r\n\r\n- To ensure that you don&#39;t get (5 12 13 and 12 5 13), simply make sure that a &lt; b &lt; c.\r\n- Use (Math.pow(a, 2) + Math.pow(b, 2)) == Math.pow(c, 2) to find the triplets","title":"Pythagorean Triples Calculation for Java","body":"<p><strong>Example code:</strong></p>\n\n<pre><code>public class QuickTester {\n\n    // Change MAX to whatever value required\n    private static final int MAX = 25;\n\n    public static void main(String[] args) {\n\n        int a, b, c;\n\n        for(a = 1; a &lt; MAX; a++)\n        {\n            for(b = a; b &lt; MAX; b++)\n            {\n                for(c = b; c &lt; MAX; c++)\n                {\n                    if((Math.pow(a, 2) + Math.pow(b, 2))\n                            == Math.pow(c, 2))\n                    {\n                        System.out.printf(\"%d %d %d\\n\",\n                                a, b, c);\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output (for MAX being 25 instead of 100):</strong></p>\n\n<pre><code>3 4 5\n5 12 13\n6 8 10\n8 15 17\n9 12 15\n12 16 20\n</code></pre>\n\n<p><strong>Note:</strong></p>\n\n<ul>\n<li>To ensure that you don't get (5 12 13 and 12 5 13), simply make sure that a &lt; b &lt; c.</li>\n<li>Use (Math.pow(a, 2) + Math.pow(b, 2)) == Math.pow(c, 2) to find the triplets</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15204618,"reputation":37,"user_id":10971505,"display_name":"iamgoddey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599809518,"creation_date":1599809518,"answer_id":63842630,"question_id":31331064,"body_markdown":"    public class Triplets {\r\n    public static void main(String args[]) {\r\n        Scanner in = new Scanner(System.in);\r\n        int a, b, c;\r\n        System.out.println(&quot;Enter the value of n: &quot;);\r\n        int n = in.nextInt();\r\n        System.out.println(&quot;Pythagorean Triplets upto &quot; + n + &quot; are:\\n&quot;);\r\n        for (a = 1; a &lt;= n; a++) {\r\n            for (b = a; b &lt;= n; b++) {\r\n                for (c = 1; c &lt;= n; c++) {\r\n                    if (a * a + b * b == c * c) {\r\n                        System.out.print(a + &quot;, &quot; + b + &quot;, &quot; + c);\r\n                        System.out.println();\r\n                    }\r\n                    else\r\n                        continue;                  \r\n                }\r\n            }\r\n        }\r\n    }}","title":"Pythagorean Triples Calculation for Java","body":"<pre><code>public class Triplets {\npublic static void main(String args[]) {\n    Scanner in = new Scanner(System.in);\n    int a, b, c;\n    System.out.println(&quot;Enter the value of n: &quot;);\n    int n = in.nextInt();\n    System.out.println(&quot;Pythagorean Triplets upto &quot; + n + &quot; are:\\n&quot;);\n    for (a = 1; a &lt;= n; a++) {\n        for (b = a; b &lt;= n; b++) {\n            for (c = 1; c &lt;= n; c++) {\n                if (a * a + b * b == c * c) {\n                    System.out.print(a + &quot;, &quot; + b + &quot;, &quot; + c);\n                    System.out.println();\n                }\n                else\n                    continue;                  \n            }\n        }\n    }\n}}\n</code></pre>\n"}],"owner":{"account_id":4775876,"reputation":379,"user_id":3859018,"accept_rate":64,"display_name":"user3859018"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10230,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1662996796,"creation_date":1436492121,"question_id":31331064,"body_markdown":"So I need help calculating Pythagorean Triples, basically I want the output to look like this:\r\n\r\n    3 4 5\r\n    5 12 13\r\n    6 8 10\r\n    7 24 25\r\n\r\nETC.\r\n\r\nI need help with the calculation portion and to ensure that I do not have duplicates (i.e. 5 12 13 and 12 5 13).\r\n\r\nThoughts?  Can someone lead me in the right direction?\r\n\r\nHere is my code that I have so far:\r\n\r\n    package cs520.hw1;\r\n    \r\n    public class Triples {\r\n    \r\n    \t\tpublic static void main(String[] args) \r\n    \t\t{\r\n    \t\t\tint x1, x2, x3; \r\n    \t\t\t\r\n    \t\t\tfor(x1 = 1; x1 &lt; 100; x1++)\r\n    \t\t\t{\r\n    \t\t    \tfor(x2 = 1; x2 &lt; 100; x2++)\r\n    \t\t    \t{\r\n    \t\t    \t\tfor(x3 = 1; x3 &lt; 100; x3++)\r\n    \t\t\t    \t{\r\n    \t\t    \t\t\tint a= x1, b=x2, c=x3;\r\n    \t\t    \t\t\t\r\n    \t\t    \t\t\tif((Math.sqrt(a) + Math.sqrt(b)) == Math.sqrt(c))\r\n    \t\t\t    \t\t{\r\n    \t\t    \t\t\t\tif(a &lt; b)\r\n    \t\t    \t\t\t\t{\r\n    \t\t    \t\t\t\t\tSystem.out.println(x1 +&quot;  &quot;+ x2 +&quot;   &quot;+ x3);\r\n    \t\t    \t\t\t\t}\r\n    \t\t\t    \t\t}\r\n    \t\t\t    \t}\r\n    \t\t    \t}\r\n    \t\t\t}\t\t\r\n    \t\t}\r\n    \t}\r\n\t\r\n\t\r\n\t\r\n\r\n","title":"Pythagorean Triples Calculation for Java","body":"<p>So I need help calculating Pythagorean Triples, basically I want the output to look like this:</p>\n\n<pre><code>3 4 5\n5 12 13\n6 8 10\n7 24 25\n</code></pre>\n\n<p>ETC.</p>\n\n<p>I need help with the calculation portion and to ensure that I do not have duplicates (i.e. 5 12 13 and 12 5 13).</p>\n\n<p>Thoughts?  Can someone lead me in the right direction?</p>\n\n<p>Here is my code that I have so far:</p>\n\n<pre><code>package cs520.hw1;\n\npublic class Triples {\n\n        public static void main(String[] args) \n        {\n            int x1, x2, x3; \n\n            for(x1 = 1; x1 &lt; 100; x1++)\n            {\n                for(x2 = 1; x2 &lt; 100; x2++)\n                {\n                    for(x3 = 1; x3 &lt; 100; x3++)\n                    {\n                        int a= x1, b=x2, c=x3;\n\n                        if((Math.sqrt(a) + Math.sqrt(b)) == Math.sqrt(c))\n                        {\n                            if(a &lt; b)\n                            {\n                                System.out.println(x1 +\"  \"+ x2 +\"   \"+ x3);\n                            }\n                        }\n                    }\n                }\n            }       \n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","swagger","springdoc"],"answers":[{"tags":[],"owner":{"account_id":26283297,"reputation":31,"user_id":19951449,"display_name":"wheyger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662996641,"creation_date":1662996641,"answer_id":73691675,"question_id":73690948,"body_markdown":"I figured out a solution, but it might be a hack.  Please let me know if there&#39;s a proper way to do this...\r\n\r\nThe dynamically generated openapi java beans are still executing even if I add the static settings, so the dynamic URL must still exist despite not being shown by springdoc when loading the swagger page.\r\n\r\nSo to get both static and dynamic swagger content to display using springdoc:\r\n\r\n1) Run your spring-boot app with just the dynamically generated swagger (no static settings in application.yml or comment it out)\r\n\r\n2) In the swagger page it generates, there should be a url link to your openapi generated file (http://localhost:8080/v3/api-docs/My%20Group%20API in this case).  Click it and it&#39;ll open into a new tab.\r\n\r\n3) Add in the static settings to the application.yml file and add in another set entry that includes that url:\r\n\r\n```\r\nspringdoc:\r\n   swagger-ui:\r\n     urls:\r\n       - name: My Group 1\r\n         display-name: My Group 1\r\n         url: group1.yml\r\n       - name: My Group 2\r\n         display-name: My Group 2\r\n         url: group2.yml\r\n       - name: My Group API\r\n         display-name: My Group API\r\n         url: /v3/api-docs/My%20Group%20API\r\n```\r\nStart your spring-boot app and you&#39;ll have both your static file swagger groups and your dynamic group in the pulldown\r\n","title":"In springdoc, is it possible to show both OpenAPI generated UIs and ones off custom static yml files in the same set of groups?","body":"<p>I figured out a solution, but it might be a hack.  Please let me know if there's a proper way to do this...</p>\n<p>The dynamically generated openapi java beans are still executing even if I add the static settings, so the dynamic URL must still exist despite not being shown by springdoc when loading the swagger page.</p>\n<p>So to get both static and dynamic swagger content to display using springdoc:</p>\n<ol>\n<li><p>Run your spring-boot app with just the dynamically generated swagger (no static settings in application.yml or comment it out)</p>\n</li>\n<li><p>In the swagger page it generates, there should be a url link to your openapi generated file (http://localhost:8080/v3/api-docs/My%20Group%20API in this case).  Click it and it'll open into a new tab.</p>\n</li>\n<li><p>Add in the static settings to the application.yml file and add in another set entry that includes that url:</p>\n</li>\n</ol>\n<pre><code>springdoc:\n   swagger-ui:\n     urls:\n       - name: My Group 1\n         display-name: My Group 1\n         url: group1.yml\n       - name: My Group 2\n         display-name: My Group 2\n         url: group2.yml\n       - name: My Group API\n         display-name: My Group API\n         url: /v3/api-docs/My%20Group%20API\n</code></pre>\n<p>Start your spring-boot app and you'll have both your static file swagger groups and your dynamic group in the pulldown</p>\n"}],"owner":{"account_id":26283297,"reputation":31,"user_id":19951449,"display_name":"wheyger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1278,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1662996641,"creation_date":1662993186,"question_id":73690948,"body_markdown":"I&#39;m building enhancements off a 3rd party software with my own APIs.  I have the 3rd party&#39;s static .yml files for swagger, but for my own endpoints, I&#39;m using the springdoc annotations and OpenAPI bean declarations to generate the documentation.  Can I show both in the same swagger doc?\r\n\r\nDynamically generated doc:\r\n```\r\n@Configuration\r\npublic class SwaggerConfiguration {\r\n   @Bean\r\n   public GroupedOpenApi myOpenApi() {\r\n      String group = &quot;My Group API&quot;;\r\n      String paths[] = { &quot;/**&quot; };\r\n      GroupedOpenApi api = GroupedOpenApi.builder()\r\n           .group(group)\r\n           .pathsToMatch(paths)\r\n           .packagesToScan(&quot;org.mypackage&quot;)\r\n           .addOpenApiCustomiser(openApi -&gt; {\r\n                   openApi.setInfo(\r\n                        new Info()\r\n                            .title(group)\r\n                            .description(&quot;[Base URL: /myapi ]&quot;)\r\n                   );\r\n           }).build();\r\n           return api;\r\n   }\r\n}\r\n```\r\nStatic .yml settings in application.yml:\r\n```\r\nspringdoc:\r\n   swagger-ui:\r\n     urls:\r\n       - name: My Group 1\r\n         display-name: My Group 1\r\n         url: group1.yml\r\n       - name: My Group 2\r\n         display-name: My Group 2\r\n         url: group2.yml\r\n```\r\nAnd so by default, springdoc will show my dynamically generated API in swagger, but once I add the static settings, the static file driven swagger groups show up and the dynamic one isn&#39;t shown.  Is it possible to show both?\r\n","title":"In springdoc, is it possible to show both OpenAPI generated UIs and ones off custom static yml files in the same set of groups?","body":"<p>I'm building enhancements off a 3rd party software with my own APIs.  I have the 3rd party's static .yml files for swagger, but for my own endpoints, I'm using the springdoc annotations and OpenAPI bean declarations to generate the documentation.  Can I show both in the same swagger doc?</p>\n<p>Dynamically generated doc:</p>\n<pre><code>@Configuration\npublic class SwaggerConfiguration {\n   @Bean\n   public GroupedOpenApi myOpenApi() {\n      String group = &quot;My Group API&quot;;\n      String paths[] = { &quot;/**&quot; };\n      GroupedOpenApi api = GroupedOpenApi.builder()\n           .group(group)\n           .pathsToMatch(paths)\n           .packagesToScan(&quot;org.mypackage&quot;)\n           .addOpenApiCustomiser(openApi -&gt; {\n                   openApi.setInfo(\n                        new Info()\n                            .title(group)\n                            .description(&quot;[Base URL: /myapi ]&quot;)\n                   );\n           }).build();\n           return api;\n   }\n}\n</code></pre>\n<p>Static .yml settings in application.yml:</p>\n<pre><code>springdoc:\n   swagger-ui:\n     urls:\n       - name: My Group 1\n         display-name: My Group 1\n         url: group1.yml\n       - name: My Group 2\n         display-name: My Group 2\n         url: group2.yml\n</code></pre>\n<p>And so by default, springdoc will show my dynamically generated API in swagger, but once I add the static settings, the static file driven swagger groups show up and the dynamic one isn't shown.  Is it possible to show both?</p>\n"},{"tags":["java","encryption","encoding","character-encoding","aes"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1352311188,"post_id":13261252,"comment_id":18096331,"body_markdown":"Note that if you receive the String `&quot;~9?8?m???=?T?G&quot;` from a server, instead of a base 64 encoded string or just plain bytes (as received from an `InputStream`) then the server does not produce valid cipher text. Those question marks are unprintable characters, and when those are present you are likely loosing information.","body":"Note that if you receive the String <code>&quot;~9?8?m???=?T?G&quot;</code> from a server, instead of a base 64 encoded string or just plain bytes (as received from an <code>InputStream</code>) then the server does not produce valid cipher text. Those question marks are unprintable characters, and when those are present you are likely loosing information."},{"owner":{"account_id":2017806,"reputation":747,"user_id":1804667,"accept_rate":33,"display_name":"lazypig"},"score":0,"creation_date":1352323397,"post_id":13261252,"comment_id":18101512,"body_markdown":"Thanks @owlstead. You bring up a good point. The `~9?8?m???=?T?G` was originally created with the String `4` and we were hoping to decrypt this and retrieve `4`, but haven&#39;t been successful. I was hoping to get a basic decryption working and then build off from there. This is first step and I haven&#39;t gotten through it. I&#39;ll respond as I find out more from a few more tries following your suggestion.","body":"Thanks @owlstead. You bring up a good point. The <code>~9?8?m???=?T?G</code> was originally created with the String <code>4</code> and we were hoping to decrypt this and retrieve <code>4</code>, but haven&#39;t been successful. I was hoping to get a basic decryption working and then build off from there. This is first step and I haven&#39;t gotten through it. I&#39;ll respond as I find out more from a few more tries following your suggestion."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1352330523,"post_id":13261252,"comment_id":18104287,"body_markdown":"You have to encode the results on the server using base 64 for the code to work, if you cannot directly transfer bytes.","body":"You have to encode the results on the server using base 64 for the code to work, if you cannot directly transfer bytes."}],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1560934704,"creation_date":1352306105,"answer_id":13274072,"question_id":13261252,"body_markdown":"You should *decode* the string instead of encoding the platform specific representation of the string, right at the start of your method.\r\n\r\n    byte[] base64TextToDecrypt = Base64.decodeBase64(textToDecrypt);\r\n\r\nor more precisely:\r\n\r\n    byte[] bytesToDecrypt = Base64(base64TextToDecrypt);\r\n\r\nif you name your variables correctly.\r\n\r\nIn general, each time you (feel like you have to) use the `String.getBytes(): byte[]` method or the `String(byte[])` constructor you are likely doing something wrong. You should first think about what you are trying to do, and specify a [tag:character-encoding] if you *do* need to use it.\r\n\r\nIn your case, the output in the `converted` variable is probably character-encoded. So you you could use the following fragment:\r\n\r\n    String plainText = new String(converted, StandardCharsets.UTF_8);\r\n    System.out.println(plainText);\r\n\r\ninstead of what you have now.\r\n\r\n\r\n","title":"javax.crypto.IllegalBlockSizeException: last block incomplete in decryption - Decrypting an encrypted AES String","body":"<p>You should <em>decode</em> the string instead of encoding the platform specific representation of the string, right at the start of your method.</p>\n\n<pre><code>byte[] base64TextToDecrypt = Base64.decodeBase64(textToDecrypt);\n</code></pre>\n\n<p>or more precisely:</p>\n\n<pre><code>byte[] bytesToDecrypt = Base64(base64TextToDecrypt);\n</code></pre>\n\n<p>if you name your variables correctly.</p>\n\n<p>In general, each time you (feel like you have to) use the <code>String.getBytes(): byte[]</code> method or the <code>String(byte[])</code> constructor you are likely doing something wrong. You should first think about what you are trying to do, and specify a <a href=\"/questions/tagged/character-encoding\" class=\"post-tag\" title=\"show questions tagged &#39;character-encoding&#39;\" rel=\"tag\">character-encoding</a> if you <em>do</em> need to use it.</p>\n\n<p>In your case, the output in the <code>converted</code> variable is probably character-encoded. So you you could use the following fragment:</p>\n\n<pre><code>String plainText = new String(converted, StandardCharsets.UTF_8);\nSystem.out.println(plainText);\n</code></pre>\n\n<p>instead of what you have now.</p>\n"},{"tags":[],"owner":{"account_id":2017806,"reputation":747,"user_id":1804667,"accept_rate":33,"display_name":"lazypig"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1352334616,"creation_date":1352334616,"answer_id":13280669,"question_id":13261252,"body_markdown":"So thanks to @owlstead, I was able to figure out the solution. It was that I made the mistake of Base64encoding an already Base64 encoded string. The following is by code chunk.\r\n\r\n\r\n\tpublic static String decryptText(String textToDecrypt) {\r\n\t\ttry {\r\n\t\t\tbyte[] decodedValue = Base64.decodeBase64(textToDecrypt.getBytes());\r\n\r\n\t\t\tbyte[] iv = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\r\n\t\t\tIvParameterSpec ips = new IvParameterSpec(iv);\r\n\r\n\t\t\tbyte[] input = textToDecrypt.getBytes();\r\n\r\n\t\t\tCipher cipher = Cipher.getInstance(ENCRYPTION_METHOD);\r\n\r\n\t\t\t// decryption pass\r\n\t\t\tcipher.init(Cipher.DECRYPT_MODE, SECRET_KEY, ips);\r\n\t\t\tbyte[] plainText = cipher.doFinal(decodedValue);\r\n\r\n\t\t\treturn new String(plainText);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tLog.e(TAG, &quot;Decipher error for &quot; + textToDecrypt, e);\r\n\t\t}\r\n\r\n\t\treturn &quot;&quot;;\r\n\t}\r\n\r\n\r\nThe corresponding encrypting is like this\r\n\r\n\tpublic static String encryptText(String textToEncrypt) {\r\n\t\ttry {\r\n\t\t\tbyte[] guid = &quot;1234567890123456&quot;.getBytes(&quot;UTF-8&quot;);\r\n\r\n\t\t\tbyte[] iv = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\r\n\t\t\tIvParameterSpec ips = new IvParameterSpec(iv);\r\n\r\n\t\t\t// The secret key from the server needs to be converted to byte array for encryption.\r\n\t\t\tbyte[] secret = ENCRYPTION_SECRET_HASH.getBytes(&quot;UTF-8&quot;);\r\n\r\n\t\t\t// we generate a AES SecretKeySpec object which contains the secret key.\r\n\t\t\t// SecretKeySpec secretKey = new SecretKeySpec(secret, &quot;AES&quot;);\r\n\t\t\tCipher cipher = Cipher.getInstance(ENCRYPTION_METHOD);\r\n\t\t\tcipher.init(Cipher.ENCRYPT_MODE, SECRET_KEY, ips);\r\n\r\n\t\t\tbyte[] cipherText = cipher.doFinal(textToEncrypt.getBytes());\r\n\t\t\tbyte[] base64encodedSecretData = Base64.encodeBase64(cipherText);\r\n\t\t\tString secretString = new String(base64encodedSecretData);\r\n\t\t\treturn secretString;\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tLog.e(TAG, &quot;Encryption error for &quot; + textToEncrypt, e);\r\n\t\t}\r\n\t\treturn &quot;&quot;;\r\n\t}","title":"javax.crypto.IllegalBlockSizeException: last block incomplete in decryption - Decrypting an encrypted AES String","body":"<p>So thanks to @owlstead, I was able to figure out the solution. It was that I made the mistake of Base64encoding an already Base64 encoded string. The following is by code chunk.</p>\n\n<pre><code>public static String decryptText(String textToDecrypt) {\n    try {\n        byte[] decodedValue = Base64.decodeBase64(textToDecrypt.getBytes());\n\n        byte[] iv = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\n        IvParameterSpec ips = new IvParameterSpec(iv);\n\n        byte[] input = textToDecrypt.getBytes();\n\n        Cipher cipher = Cipher.getInstance(ENCRYPTION_METHOD);\n\n        // decryption pass\n        cipher.init(Cipher.DECRYPT_MODE, SECRET_KEY, ips);\n        byte[] plainText = cipher.doFinal(decodedValue);\n\n        return new String(plainText);\n    } catch (Exception e) {\n        e.printStackTrace();\n        Log.e(TAG, \"Decipher error for \" + textToDecrypt, e);\n    }\n\n    return \"\";\n}\n</code></pre>\n\n<p>The corresponding encrypting is like this</p>\n\n<pre><code>public static String encryptText(String textToEncrypt) {\n    try {\n        byte[] guid = \"1234567890123456\".getBytes(\"UTF-8\");\n\n        byte[] iv = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };\n        IvParameterSpec ips = new IvParameterSpec(iv);\n\n        // The secret key from the server needs to be converted to byte array for encryption.\n        byte[] secret = ENCRYPTION_SECRET_HASH.getBytes(\"UTF-8\");\n\n        // we generate a AES SecretKeySpec object which contains the secret key.\n        // SecretKeySpec secretKey = new SecretKeySpec(secret, \"AES\");\n        Cipher cipher = Cipher.getInstance(ENCRYPTION_METHOD);\n        cipher.init(Cipher.ENCRYPT_MODE, SECRET_KEY, ips);\n\n        byte[] cipherText = cipher.doFinal(textToEncrypt.getBytes());\n        byte[] base64encodedSecretData = Base64.encodeBase64(cipherText);\n        String secretString = new String(base64encodedSecretData);\n        return secretString;\n    } catch (Exception e) {\n        e.printStackTrace();\n        Log.e(TAG, \"Encryption error for \" + textToEncrypt, e);\n    }\n    return \"\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19740493,"reputation":21,"user_id":14453968,"display_name":"Sai Teja"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1602746756,"creation_date":1602746432,"answer_id":64366662,"question_id":13261252,"body_markdown":"Keep the following things in mind while encrypting and decrypting strings,\r\n\r\nENCRYPTION:\r\n1. Convert string to byteArray using toByteArray(Charsets.UTF-8) and always specify the charset with UTF-8.\r\n\r\n2. Encrypyt the above byteArray using cipher.doFinal(byteArray). \r\n\r\n3. Now this is not enough, you need to do base64 encoding for that encrypted byteArray using Base64.encode(encryptedByteArray, Base64.DEFAULT)\r\n\r\n4. Remember this again returns byteArray , if you want to convert to string, use toString(Charsets.UTF-8) and most importantly specify the charset again as UTF-8 and then process or store it in DB as you wish.\r\n\r\nDECRYPTION:\r\n\r\n1.Get the encrypted string and first step while decrypting is to decode the encrypted string using base64.decode(encryptedString.toByteArray(Charsets.UTF-8), Base64.DEFAULT)\r\n\r\n2. Now decrypt the decoded byteArray by using cipher.dofinal(decodedByteArray).\r\n\r\n3. Convert the Decrypted byteArray to String using toString(Charsets.UTF-8). NOTE:Always specify the charset. This returns the original string.\r\n\r\nI know I have not shared any code but trust me the flow is the important part while encrypting and decrypting a string..","title":"javax.crypto.IllegalBlockSizeException: last block incomplete in decryption - Decrypting an encrypted AES String","body":"<p>Keep the following things in mind while encrypting and decrypting strings,</p>\n<p>ENCRYPTION:</p>\n<ol>\n<li><p>Convert string to byteArray using toByteArray(Charsets.UTF-8) and always specify the charset with UTF-8.</p>\n</li>\n<li><p>Encrypyt the above byteArray using cipher.doFinal(byteArray).</p>\n</li>\n<li><p>Now this is not enough, you need to do base64 encoding for that encrypted byteArray using Base64.encode(encryptedByteArray, Base64.DEFAULT)</p>\n</li>\n<li><p>Remember this again returns byteArray , if you want to convert to string, use toString(Charsets.UTF-8) and most importantly specify the charset again as UTF-8 and then process or store it in DB as you wish.</p>\n</li>\n</ol>\n<p>DECRYPTION:</p>\n<p>1.Get the encrypted string and first step while decrypting is to decode the encrypted string using base64.decode(encryptedString.toByteArray(Charsets.UTF-8), Base64.DEFAULT)</p>\n<ol start=\"2\">\n<li><p>Now decrypt the decoded byteArray by using cipher.dofinal(decodedByteArray).</p>\n</li>\n<li><p>Convert the Decrypted byteArray to String using toString(Charsets.UTF-8). NOTE:Always specify the charset. This returns the original string.</p>\n</li>\n</ol>\n<p>I know I have not shared any code but trust me the flow is the important part while encrypting and decrypting a string..</p>\n"},{"tags":[],"owner":{"account_id":11259570,"reputation":916,"user_id":8258305,"accept_rate":60,"display_name":"Mohd Qasim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662996037,"creation_date":1662996037,"answer_id":73691549,"question_id":13261252,"body_markdown":"there is a chance your passing `textToDecrypt` as null or empty try to keep checker before decrypt your data like following\r\n\r\n    public static String decrypt(String encrypted)\r\n            throws Exception {\r\n        if(encrypted==null || encrypted.isEmpty())return &quot;&quot;;\r\n        byte[] enc = toByte(encrypted);\r\n        byte[] result = decrypt(enc);\r\n        return new String(result);\r\n    }","title":"javax.crypto.IllegalBlockSizeException: last block incomplete in decryption - Decrypting an encrypted AES String","body":"<p>there is a chance your passing <code>textToDecrypt</code> as null or empty try to keep checker before decrypt your data like following</p>\n<pre><code>public static String decrypt(String encrypted)\n        throws Exception {\n    if(encrypted==null || encrypted.isEmpty())return &quot;&quot;;\n    byte[] enc = toByte(encrypted);\n    byte[] result = decrypt(enc);\n    return new String(result);\n}\n</code></pre>\n"}],"owner":{"account_id":2017806,"reputation":747,"user_id":1804667,"accept_rate":33,"display_name":"lazypig"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39802,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":13274072,"answer_count":4,"score":18,"last_activity_date":1662996037,"creation_date":1352245778,"question_id":13261252,"body_markdown":"I am trying to decrypt the string `&quot;~9?8?m???=?T?G&quot;` that I receive from a back-end server which uses OpenSSL to encrypt the String using AES-256-CBC. There is the code block:\r\n\r\n\tpublic static String decryptText(String textToDecrypt) {\r\n\t\ttry {\r\n\r\n\t\t\tbyte[] base64TextToDecrypt = Base64.encodeBase64(textToDecrypt.getBytes(&quot;UTF-8&quot;));\r\n\r\n\t\t\tbyte[] guid = &quot;fjakdsjkld;asfj&quot;.getBytes(&quot;UTF-8&quot;);\r\n\r\n\t\t\tbyte[] iv = new byte[16];\r\n\t\t\tSystem.arraycopy(guid, 0, iv, 0, guid.length);\r\n\t\t\tIvParameterSpec ips = new IvParameterSpec(iv);\r\n\r\n\t\t\tbyte[] secret = DECRYPTION_SECRET_HASH.getBytes(&quot;UTF-8&quot;);\r\n\t\t\tSecretKeySpec secretKey = new SecretKeySpec(secret, &quot;AES&quot;);\r\n\t\t\t\r\n\t\t\tCipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n\t\t\t// decryption pass\r\n\t\t    cipher.init(Cipher.DECRYPT_MODE, secretKey, ips);\r\n\t\t    byte[] converted = cipher.doFinal(base64TextToDecrypt);\r\n\t\t    System.out.println(new String(converted));\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tLog.e(TAG, &quot;Decipher error for &quot; + textToDecrypt, e);\r\n\t\t}\r\n\t\treturn &quot;&quot;;\r\n\t}\r\n\r\nUnfortunately, when I get to the\r\n\r\n    byte[] converted = cipher.doFinal(base64TextToDecrypt);\r\n\r\nstatement the following exception is thrown:\r\n  \r\n    javax.crypto.IllegalBlockSizeException: last block incomplete in decryption\r\n\r\nAny ideas?","title":"javax.crypto.IllegalBlockSizeException: last block incomplete in decryption - Decrypting an encrypted AES String","body":"<p>I am trying to decrypt the string <code>\"~9?8?m???=?T?G\"</code> that I receive from a back-end server which uses OpenSSL to encrypt the String using AES-256-CBC. There is the code block:</p>\n\n<pre><code>public static String decryptText(String textToDecrypt) {\n    try {\n\n        byte[] base64TextToDecrypt = Base64.encodeBase64(textToDecrypt.getBytes(\"UTF-8\"));\n\n        byte[] guid = \"fjakdsjkld;asfj\".getBytes(\"UTF-8\");\n\n        byte[] iv = new byte[16];\n        System.arraycopy(guid, 0, iv, 0, guid.length);\n        IvParameterSpec ips = new IvParameterSpec(iv);\n\n        byte[] secret = DECRYPTION_SECRET_HASH.getBytes(\"UTF-8\");\n        SecretKeySpec secretKey = new SecretKeySpec(secret, \"AES\");\n\n        Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\n        // decryption pass\n        cipher.init(Cipher.DECRYPT_MODE, secretKey, ips);\n        byte[] converted = cipher.doFinal(base64TextToDecrypt);\n        System.out.println(new String(converted));\n\n    } catch (Exception e) {\n        e.printStackTrace();\n        Log.e(TAG, \"Decipher error for \" + textToDecrypt, e);\n    }\n    return \"\";\n}\n</code></pre>\n\n<p>Unfortunately, when I get to the</p>\n\n<pre><code>byte[] converted = cipher.doFinal(base64TextToDecrypt);\n</code></pre>\n\n<p>statement the following exception is thrown:</p>\n\n<pre><code>javax.crypto.IllegalBlockSizeException: last block incomplete in decryption\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":1951,"reputation":26904,"user_id":2684,"accept_rate":87,"display_name":"Martin Marconcini"},"score":0,"creation_date":1662995727,"post_id":73668426,"comment_id":130129533,"body_markdown":"`Resources$NotFoundException` means whatever this`App.getInstance().getLegajoAlumno()` (and the other) are outputting, are numbers and as such, `TextView.setText(...)` is trying to resolve it as a string resource and naturally failing.","body":"<code>Resources$NotFoundException</code> means whatever this<code>App.getInstance().getLegajoAlumno()</code> (and the other) are outputting, are numbers and as such, <code>TextView.setText(...)</code> is trying to resolve it as a string resource and naturally failing."}],"answers":[{"tags":[],"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662769960,"creation_date":1662769960,"answer_id":73668541,"question_id":73668426,"body_markdown":"**ISSUE:** I guess your issue is calling `setContentView` again and again...\r\n\r\n**FIX:** `setContentView` and assign Variables in `onCreate`:\r\n\r\n\tTextView tvLegajo;\r\n\tTextView tvNFabrica;\r\n\r\n\t@Override\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\tsuper.onCreate(savedInstanceState);\r\n\t\tsetContentView(R.layout.activity_main);\r\n\t\ttvLegajo = (TextView)(findViewById(R.id.txtLegajo));\r\n\t\ttvNFabrica = (TextView)(findViewById(R.id.txtNFabrica));\r\n\t}\r\n\r\nNow start your thread:\r\n\r\n\r\n\t\tnew Thread(){\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\tsuper.run();\r\n\t\t\t\ttry {\r\n\t\t\t\t\twhile(!this.isInterrupted()){\r\n\t\t\t\t\t\tThread.sleep(1000);\r\n\t\t\t\t\t\trunOnUiThread(new Runnable() {\r\n\t\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\t\t\tif(App.getInstance().getLegajoAlumno()!=0)\r\n\t\t\t\t\t\t\t\t\t\ttvLegajo.setText(App.getInstance().getLegajoAlumno());\r\n\t\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t\ttvLegajo.setText(&quot;&quot;);\r\n\t\t\t\t\t\t\t\t\ttvNFabrica.setText(App.getInstance().getnFabricaNotebook());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.start();\r\n\r\n**PERFECT CURE:** Its better if you show us the error from [logcat][1], so we can help to fix it in a better way.\r\n\r\n\r\n  [1]: https://developer.android.com/studio/debug/am-logcat","title":"Android Studio Java app crashing when trying to update TextView","body":"<p><strong>ISSUE:</strong> I guess your issue is calling <code>setContentView</code> again and again...</p>\n<p><strong>FIX:</strong> <code>setContentView</code> and assign Variables in <code>onCreate</code>:</p>\n<pre><code>TextView tvLegajo;\nTextView tvNFabrica;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    tvLegajo = (TextView)(findViewById(R.id.txtLegajo));\n    tvNFabrica = (TextView)(findViewById(R.id.txtNFabrica));\n}\n</code></pre>\n<p>Now start your thread:</p>\n<pre><code>    new Thread(){\n        @Override\n        public void run() {\n            super.run();\n            try {\n                while(!this.isInterrupted()){\n                    Thread.sleep(1000);\n                    runOnUiThread(new Runnable() {\n                            @Override\n                            public void run() {\n                                if(App.getInstance().getLegajoAlumno()!=0)\n                                    tvLegajo.setText(App.getInstance().getLegajoAlumno());\n                                else\n                                    tvLegajo.setText(&quot;&quot;);\n                                tvNFabrica.setText(App.getInstance().getnFabricaNotebook());\n                            }\n                        });\n                }\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }.start();\n</code></pre>\n<p><strong>PERFECT CURE:</strong> Its better if you show us the error from <a href=\"https://developer.android.com/studio/debug/am-logcat\" rel=\"nofollow noreferrer\">logcat</a>, so we can help to fix it in a better way.</p>\n"},{"tags":[],"owner":{"account_id":1951,"reputation":26904,"user_id":2684,"accept_rate":87,"display_name":"Martin Marconcini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662995900,"creation_date":1662995900,"answer_id":73691519,"question_id":73668426,"body_markdown":"Your `tvLegajo.setText(App.getInstance().getLegajoAlumno());` is being resolved to a `number`. This means the `setText` method is thinking it&#39;s a Resource Id. Because it&#39;s not, then you get a Resource Not Found exception.\r\n\r\nInstead make it a string: `getLegajoAlumno().toString()`.\r\n","title":"Android Studio Java app crashing when trying to update TextView","body":"<p>Your <code>tvLegajo.setText(App.getInstance().getLegajoAlumno());</code> is being resolved to a <code>number</code>. This means the <code>setText</code> method is thinking it's a Resource Id. Because it's not, then you get a Resource Not Found exception.</p>\n<p>Instead make it a string: <code>getLegajoAlumno().toString()</code>.</p>\n"}],"owner":{"account_id":26295128,"reputation":3,"user_id":19961497,"display_name":"Gaspar Liboreiro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73691519,"answer_count":2,"score":0,"last_activity_date":1662995900,"creation_date":1662768013,"question_id":73668426,"body_markdown":"I&#39;m trying to create a new Thread that updates a TextView&#39;s value every 1 second and for some reason this code crashes the app\r\n\r\n    new Thread(){\r\n            @Override\r\n            public void run() {\r\n                super.run();\r\n                try {\r\n                    while(!this.isInterrupted()){\r\n                        Thread.sleep(1000);\r\n                        runOnUiThread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                setContentView(R.layout.activity_main);\r\n                                TextView tvLegajo = (TextView)(findViewById(R.id.txtLegajo));\r\n                                TextView tvNFabrica = (TextView)(findViewById(R.id.txtNFabrica));\r\n                                if(App.getInstance().getLegajoAlumno()!=0)\r\n                                    tvLegajo.setText(App.getInstance().getLegajoAlumno());\r\n                                else\r\n                                    tvLegajo.setText(&quot;&quot;);\r\n                                tvNFabrica.setText(App.getInstance().getnFabricaNotebook());\r\n                            }\r\n                        });\r\n                    }\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }.start();\r\n\r\n\r\n\r\nThat is in the onCreate function in my MainActivity\r\nJust to clarify, I&#39;m trying to update the values in the Views \r\n\r\n    R.id.txtLegajo \r\n    R.id.txtNFabrica\r\n\r\nto the values in \r\n\r\n    App.getInstance().getLegajoAlumno();\r\n    App.getInstance().getNFabricaNotebook();\r\n\r\n(also if the ...getLegajoAlumno() is 0, R.id.txtLegajo is set to a blank String)\r\n\r\n**EDIT:**\r\n\r\nI did the changes recomended by @DiLDoST but it crashes regardles.\r\nA detail is that the thread is created in the onCreate method of the activity.\r\nThe logcat after the crash looks like this:\r\n\r\n    2022-09-12 10:50:39.696 11067-11067/com.example.prestaciones E/le.prestacione: Invalid ID 0x000368bd.\r\n    2022-09-12 10:50:39.696 11067-11067/com.example.prestaciones D/AndroidRuntime: Shutting down VM\r\n    2022-09-12 10:50:39.697 11067-11067/com.example.prestaciones E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.prestaciones, PID: 11067\r\n        android.content.res.Resources$NotFoundException: String resource ID #0x368bd\r\n            at android.content.res.Resources.getText(Resources.java:367)\r\n            at android.widget.TextView.setText(TextView.java:6370)\r\n            at com.example.prestaciones.MainActivity$1$1.run(MainActivity.java:47)\r\n            at android.os.Handler.handleCallback(Handler.java:883)\r\n            at android.os.Handler.dispatchMessage(Handler.java:100)\r\n            at android.os.Looper.loop(Looper.java:214)\r\n            at android.app.ActivityThread.main(ActivityThread.java:7356)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\r\n    2022-09-12 10:50:39.720 11067-11067/com.example.prestaciones I/Process: Sending signal. PID: 11067 SIG: 9\r\n\r\n","title":"Android Studio Java app crashing when trying to update TextView","body":"<p>I'm trying to create a new Thread that updates a TextView's value every 1 second and for some reason this code crashes the app</p>\n<pre><code>new Thread(){\n        @Override\n        public void run() {\n            super.run();\n            try {\n                while(!this.isInterrupted()){\n                    Thread.sleep(1000);\n                    runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n                            setContentView(R.layout.activity_main);\n                            TextView tvLegajo = (TextView)(findViewById(R.id.txtLegajo));\n                            TextView tvNFabrica = (TextView)(findViewById(R.id.txtNFabrica));\n                            if(App.getInstance().getLegajoAlumno()!=0)\n                                tvLegajo.setText(App.getInstance().getLegajoAlumno());\n                            else\n                                tvLegajo.setText(&quot;&quot;);\n                            tvNFabrica.setText(App.getInstance().getnFabricaNotebook());\n                        }\n                    });\n                }\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }.start();\n</code></pre>\n<p>That is in the onCreate function in my MainActivity\nJust to clarify, I'm trying to update the values in the Views</p>\n<pre><code>R.id.txtLegajo \nR.id.txtNFabrica\n</code></pre>\n<p>to the values in</p>\n<pre><code>App.getInstance().getLegajoAlumno();\nApp.getInstance().getNFabricaNotebook();\n</code></pre>\n<p>(also if the ...getLegajoAlumno() is 0, R.id.txtLegajo is set to a blank String)</p>\n<p><strong>EDIT:</strong></p>\n<p>I did the changes recomended by @DiLDoST but it crashes regardles.\nA detail is that the thread is created in the onCreate method of the activity.\nThe logcat after the crash looks like this:</p>\n<pre><code>2022-09-12 10:50:39.696 11067-11067/com.example.prestaciones E/le.prestacione: Invalid ID 0x000368bd.\n2022-09-12 10:50:39.696 11067-11067/com.example.prestaciones D/AndroidRuntime: Shutting down VM\n2022-09-12 10:50:39.697 11067-11067/com.example.prestaciones E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.prestaciones, PID: 11067\n    android.content.res.Resources$NotFoundException: String resource ID #0x368bd\n        at android.content.res.Resources.getText(Resources.java:367)\n        at android.widget.TextView.setText(TextView.java:6370)\n        at com.example.prestaciones.MainActivity$1$1.run(MainActivity.java:47)\n        at android.os.Handler.handleCallback(Handler.java:883)\n        at android.os.Handler.dispatchMessage(Handler.java:100)\n        at android.os.Looper.loop(Looper.java:214)\n        at android.app.ActivityThread.main(ActivityThread.java:7356)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\n2022-09-12 10:50:39.720 11067-11067/com.example.prestaciones I/Process: Sending signal. PID: 11067 SIG: 9\n</code></pre>\n"},{"tags":["java","http","servlets","http-headers"],"answers":[{"tags":[],"owner":{"account_id":18600,"reputation":39591,"user_id":42769,"accept_rate":95,"display_name":"Adeel Ansari"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1307955341,"creation_date":1307955020,"answer_id":6328347,"question_id":6328302,"body_markdown":"You can find the hooks in [HttpServletRequestWrapper][1].\r\n\r\n**[Edited to include a link to an example]**\r\n\r\nHere you can find [a fine example][2].\r\n\r\n\r\n  [1]: http://download.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequestWrapper.html\r\n  [2]: http://vangjee.wordpress.com/2009/02/25/how-to-modify-request-headers-in-a-j2ee-web-application/","title":"How do you add a http protocol header value in HttpServletRequest ？","body":"<p>You can find the hooks in <a href=\"http://download.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequestWrapper.html\" rel=\"noreferrer\">HttpServletRequestWrapper</a>.</p>\n\n<p><strong>[Edited to include a link to an example]</strong></p>\n\n<p>Here you can find <a href=\"http://vangjee.wordpress.com/2009/02/25/how-to-modify-request-headers-in-a-j2ee-web-application/\" rel=\"noreferrer\">a fine example</a>.</p>\n"},{"tags":[],"owner":{"account_id":344466,"reputation":7026,"user_id":676803,"accept_rate":64,"display_name":"Drona"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1410941984,"creation_date":1410941984,"answer_id":25885586,"question_id":6328302,"body_markdown":"HttpServletRequest objects are read-only. You cannot modify them. But you can definitely extend their functionality by employing a decorator pattern and add mutability in the extended class. Take a look at the following post:\r\n\r\nhttp://wilddiary.com/adding-custom-headers-java-httpservletrequest/","title":"How do you add a http protocol header value in HttpServletRequest ？","body":"<p>HttpServletRequest objects are read-only. You cannot modify them. But you can definitely extend their functionality by employing a decorator pattern and add mutability in the extended class. Take a look at the following post:</p>\n\n<p><a href=\"http://wilddiary.com/adding-custom-headers-java-httpservletrequest/\" rel=\"nofollow\">http://wilddiary.com/adding-custom-headers-java-httpservletrequest/</a></p>\n"},{"tags":[],"owner":{"account_id":21957517,"reputation":15,"user_id":16235867,"display_name":"serhercu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662995791,"creation_date":1662995365,"answer_id":73691397,"question_id":6328302,"body_markdown":"Try this:\r\n\r\n    MutableHttpServletRequest mutableRequest = new MutableHttpServletRequest(request); \r\n    mutableRequest.putHeader(&quot;yourHeader&quot;, &quot;yourHeaderValue&quot;);\r\n\r\nwhere *request* is a HttpServletRequest.","title":"How do you add a http protocol header value in HttpServletRequest ？","body":"<p>Try this:</p>\n<pre><code>MutableHttpServletRequest mutableRequest = new MutableHttpServletRequest(request); \nmutableRequest.putHeader(&quot;yourHeader&quot;, &quot;yourHeaderValue&quot;);\n</code></pre>\n<p>where <em>request</em> is a HttpServletRequest.</p>\n"}],"owner":{"account_id":53163,"reputation":1161,"user_id":158911,"accept_rate":42,"display_name":"Diablo.Wu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18517,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":6328347,"answer_count":3,"score":4,"last_activity_date":1662995791,"creation_date":1307954721,"question_id":6328302,"body_markdown":"How do you add a  http protocol header value in HttpServletRequest at a Filter，before call `request.getHeader()` and get the header value?","title":"How do you add a http protocol header value in HttpServletRequest ？","body":"<p>How do you add a  http protocol header value in HttpServletRequest at a Filter，before call <code>request.getHeader()</code> and get the header value?</p>\n"},{"tags":["java","spring-boot","rest","debugging"],"answers":[{"tags":[],"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662995755,"creation_date":1662995755,"answer_id":73691490,"question_id":73691105,"body_markdown":"Is this an STS issue or an application properties issue? Ensure you have your package logging level set correctly.\r\n\r\nExamples:\r\n\r\napplication.yaml\r\n```yaml\r\nlogging:\r\n  level:\r\n    com.myself.app: debug\r\n```\r\n\r\nor application.properties\r\n```\r\nlogging.level.com.myself.app=debug\r\n```","title":"Debug not working on Spring Boot 2.7.3 application in STS (Spring Tool Suite)","body":"<p>Is this an STS issue or an application properties issue? Ensure you have your package logging level set correctly.</p>\n<p>Examples:</p>\n<p>application.yaml</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>logging:\n  level:\n    com.myself.app: debug\n</code></pre>\n<p>or application.properties</p>\n<pre><code>logging.level.com.myself.app=debug\n</code></pre>\n"}],"owner":{"account_id":19950129,"reputation":601,"user_id":14619971,"display_name":"jkfe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":581,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662995755,"creation_date":1662993987,"question_id":73691105,"body_markdown":"I have a REST API created on Spring Boot 2.7.3 that I&#39;m testing through Postman.\r\n\r\nWhen I run the application through STS, it starts fine and I get the correct responses on Postman.\r\n\r\nBut when I run it on Debug mode in STS, the application doesn&#39;t start fine and I get a &quot;Could not send request&quot; error message on Postman as if no application was up and running.\r\n\r\nI noticed that in STS, when running in debug mode, the last message I see in the console is &quot;HHH000400: Using dialect....&quot; as you see in the screen shot below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nOn the other hand, in another application that debug is working fine (earlier Spring Boot version) the last message I see is &quot;Started Application in x seconds (JVM running for 12.133)&quot; as you see in this other screen shot below. \r\n\r\n[![enter image description here][2]][2]\r\n\r\nSo seems that the first application is not correctly starting in debug mode. \r\n\r\nHow to fix that?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SZABB.png\r\n  [2]: https://i.stack.imgur.com/vxHeL.png","title":"Debug not working on Spring Boot 2.7.3 application in STS (Spring Tool Suite)","body":"<p>I have a REST API created on Spring Boot 2.7.3 that I'm testing through Postman.</p>\n<p>When I run the application through STS, it starts fine and I get the correct responses on Postman.</p>\n<p>But when I run it on Debug mode in STS, the application doesn't start fine and I get a &quot;Could not send request&quot; error message on Postman as if no application was up and running.</p>\n<p>I noticed that in STS, when running in debug mode, the last message I see in the console is &quot;HHH000400: Using dialect....&quot; as you see in the screen shot below.</p>\n<p><a href=\"https://i.stack.imgur.com/SZABB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SZABB.png\" alt=\"enter image description here\" /></a></p>\n<p>On the other hand, in another application that debug is working fine (earlier Spring Boot version) the last message I see is &quot;Started Application in x seconds (JVM running for 12.133)&quot; as you see in this other screen shot below.</p>\n<p><a href=\"https://i.stack.imgur.com/vxHeL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vxHeL.png\" alt=\"enter image description here\" /></a></p>\n<p>So seems that the first application is not correctly starting in debug mode.</p>\n<p>How to fix that?</p>\n"},{"tags":["java","tabs","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1662802317,"post_id":73667042,"comment_id":130093731,"body_markdown":"Please add the code you have tried and how it failed (e.g. errors,\nstacktraces, logs, ...) so we can improve on it.","body":"Please add the code you have tried and how it failed (e.g. errors, stacktraces, logs, ...) so we can improve on it."},{"owner":{"account_id":8748537,"reputation":39,"user_id":6542777,"display_name":"Seba klakier"},"score":0,"creation_date":1662836857,"post_id":73667042,"comment_id":130100098,"body_markdown":"Added some code","body":"Added some code"}],"answers":[{"tags":[],"owner":{"account_id":8748537,"reputation":39,"user_id":6542777,"display_name":"Seba klakier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662995718,"creation_date":1662995718,"answer_id":73691477,"question_id":73667042,"body_markdown":"Problem solved, I had to add annotation `@ParentLayout(MainView.class)` in **OrderGUI.java**","title":"Tabs in tab Vaadin Flow java","body":"<p>Problem solved, I had to add annotation <code>@ParentLayout(MainView.class)</code> in <strong>OrderGUI.java</strong></p>\n"}],"owner":{"account_id":8748537,"reputation":39,"user_id":6542777,"display_name":"Seba klakier"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1662995718,"creation_date":1662754099,"question_id":73667042,"body_markdown":"I want to make tabs in tab in Vaadin. I&#39;m using tabs with routes https://cookbook.vaadin.com/tabs-with-routes/a . It is working fine when I have only one level of tabs. I dont know how to display Main Tabs, tabs under and its content. How to achieve something like that: [![enter image description here][1]][1]\r\n\r\n\r\nMainView.java\r\n\r\n    @Route(&quot;&quot;)\r\n    public class MainView extends VerticalLayout implements RouterLayout {\r\n    \r\n        private Map&lt;Tab, String&gt; tabToUrlMap = new LinkedHashMap&lt;&gt;();\r\n    \r\n        public MainView(){\r\n    \r\n            H1 title = new H1(&quot;CMS&quot;);\r\n    \r\n            Tabs tabs = getTabs();\r\n           \r\n            UI.getCurrent().navigate(OrderGUI.class);\r\n            tabs.addSelectedChangeListener(e -&gt; UI.getCurrent().navigate(tabToUrlMap.get(e.getSelectedTab())));\r\n    \r\n            add(title, tabs);\r\n    \r\n        }\r\n    \r\n        private Tabs getTabs() {\r\n    \r\n            RouteConfiguration routeConfiguration = RouteConfiguration.forApplicationScope();\r\n    \r\n            tabToUrlMap.put(new Tab(&quot;Zam&#243;wienia&quot;), routeConfiguration.getUrl(OrderGUI.class));\r\n    //code for rest tabs\r\n            Tabs tabs = new Tabs(tabToUrlMap.keySet().toArray(new Tab[]{}));\r\n            tabs.getStyle().set(&quot;margin&quot;, &quot;auto&quot;);\r\n    \r\n            return tabs;\r\n    \r\n        }\r\n    \r\n    \r\n    }\r\n\r\n\r\nOrderGUI.java\r\n\r\n    @Route(value=&quot;zamowienia&quot;, layout = MainView.class)\r\n    \r\n    public class OrderGUI extends VerticalLayout implements RouterLayout{\r\n        private Map&lt;Tab, String&gt; tabToUrlMapOrder = new LinkedHashMap&lt;&gt;();\r\n    \r\n        public OrderGUI() {\r\n    \r\n            //super();\r\n            Tabs tabs = getTabsOrder();\r\n            UI.getCurrent().navigate(OrderedOrderGUI.class);//pierwsza zakładka jako gł&#243;wna\r\n            tabs.addSelectedChangeListener(e -&gt; UI.getCurrent().navigate(tabToUrlMapOrder.get(e.getSelectedTab())));\r\n    \r\n            add(tabs);\r\n        }\r\n        private Tabs getTabsOrder() {\r\n    \r\n            RouteConfiguration routeConfiguration = RouteConfiguration.forApplicationScope();\r\n    \r\n            tabToUrlMapOrder.put(new Tab(&quot;Złożone&quot;), routeConfiguration.getUrl(OrderedOrderGUI.class));\r\n            tabToUrlMapOrder.put(new Tab(&quot;W produkcji&quot;), routeConfiguration.getUrl(ProductionOrderGUI.class));\r\n            tabToUrlMapOrder.put(new Tab(&quot;Gotowe&quot;), routeConfiguration.getUrl(ReadyOrderGUI.class));\r\n            \r\n            Tabs tabs = new Tabs(tabToUrlMapOrder.keySet().toArray(new Tab[]{}));\r\n            tabs.getStyle().set(&quot;margin&quot;, &quot;auto&quot;);\r\n    \r\n            return tabs;\r\n    \r\n        }\r\n    \r\n    \r\n    }\r\n\r\nOrderedOrderGUI.java\r\n\r\n    @Route(value=&quot;zamowienia/zlozone&quot;, layout = OrderGUI.class)\r\n    public class OrderedOrderGUI extends VerticalLayout {\r\n        public OrderedOrderGUI() {\r\n            add(new Text(&quot;some content&quot;));\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/JTTzW.png\r\n\r\n\r\n","title":"Tabs in tab Vaadin Flow java","body":"<p>I want to make tabs in tab in Vaadin. I'm using tabs with routes <a href=\"https://cookbook.vaadin.com/tabs-with-routes/a\" rel=\"nofollow noreferrer\">https://cookbook.vaadin.com/tabs-with-routes/a</a> . It is working fine when I have only one level of tabs. I dont know how to display Main Tabs, tabs under and its content. How to achieve something like that: <a href=\"https://i.stack.imgur.com/JTTzW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JTTzW.png\" alt=\"enter image description here\" /></a></p>\n<p>MainView.java</p>\n<pre><code>@Route(&quot;&quot;)\npublic class MainView extends VerticalLayout implements RouterLayout {\n\n    private Map&lt;Tab, String&gt; tabToUrlMap = new LinkedHashMap&lt;&gt;();\n\n    public MainView(){\n\n        H1 title = new H1(&quot;CMS&quot;);\n\n        Tabs tabs = getTabs();\n       \n        UI.getCurrent().navigate(OrderGUI.class);\n        tabs.addSelectedChangeListener(e -&gt; UI.getCurrent().navigate(tabToUrlMap.get(e.getSelectedTab())));\n\n        add(title, tabs);\n\n    }\n\n    private Tabs getTabs() {\n\n        RouteConfiguration routeConfiguration = RouteConfiguration.forApplicationScope();\n\n        tabToUrlMap.put(new Tab(&quot;Zamówienia&quot;), routeConfiguration.getUrl(OrderGUI.class));\n//code for rest tabs\n        Tabs tabs = new Tabs(tabToUrlMap.keySet().toArray(new Tab[]{}));\n        tabs.getStyle().set(&quot;margin&quot;, &quot;auto&quot;);\n\n        return tabs;\n\n    }\n\n\n}\n</code></pre>\n<p>OrderGUI.java</p>\n<pre><code>@Route(value=&quot;zamowienia&quot;, layout = MainView.class)\n\npublic class OrderGUI extends VerticalLayout implements RouterLayout{\n    private Map&lt;Tab, String&gt; tabToUrlMapOrder = new LinkedHashMap&lt;&gt;();\n\n    public OrderGUI() {\n\n        //super();\n        Tabs tabs = getTabsOrder();\n        UI.getCurrent().navigate(OrderedOrderGUI.class);//pierwsza zakładka jako główna\n        tabs.addSelectedChangeListener(e -&gt; UI.getCurrent().navigate(tabToUrlMapOrder.get(e.getSelectedTab())));\n\n        add(tabs);\n    }\n    private Tabs getTabsOrder() {\n\n        RouteConfiguration routeConfiguration = RouteConfiguration.forApplicationScope();\n\n        tabToUrlMapOrder.put(new Tab(&quot;Złożone&quot;), routeConfiguration.getUrl(OrderedOrderGUI.class));\n        tabToUrlMapOrder.put(new Tab(&quot;W produkcji&quot;), routeConfiguration.getUrl(ProductionOrderGUI.class));\n        tabToUrlMapOrder.put(new Tab(&quot;Gotowe&quot;), routeConfiguration.getUrl(ReadyOrderGUI.class));\n        \n        Tabs tabs = new Tabs(tabToUrlMapOrder.keySet().toArray(new Tab[]{}));\n        tabs.getStyle().set(&quot;margin&quot;, &quot;auto&quot;);\n\n        return tabs;\n\n    }\n\n\n}\n</code></pre>\n<p>OrderedOrderGUI.java</p>\n<pre><code>@Route(value=&quot;zamowienia/zlozone&quot;, layout = OrderGUI.class)\npublic class OrderedOrderGUI extends VerticalLayout {\n    public OrderedOrderGUI() {\n        add(new Text(&quot;some content&quot;));\n    }\n}\n</code></pre>\n"},{"tags":["java","servlets"],"answers":[{"tags":[],"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1314529071,"creation_date":1314529071,"answer_id":7220518,"question_id":7220273,"body_markdown":"The following lines:\r\n\r\n    // Setting input parameter as header parameter.Since request object dont have setHeader so setting in response\r\n    //object\r\n    \r\n    response.setHeader(&quot;x-HwId&quot;,hwid);\r\n    response.setHeader(&quot;x-panelistId,panelistId);\r\n\r\nadds two headers to the HTTP response that will be generated by the servlet container, and not to the HTTP request that is forwarded to the `CheckForCommandServlet` servlet.\r\n\r\nSince your intention is to add a HTTP header to the original request so that a subsequent [`HttpServletRequest.getHeader()`][1] invocation would read the appropriate value, you may adopt the approach of using a [`HttpServletRequestWrapper`][2] that overrides the `getHeader` method, to return the values sent by the client. More details can be found in [this related StackOverflow answer][3].\r\n\r\n---\r\n\r\nA better approach for the purpose of verifying the behavior of the `CheckForCommandServlet`, would be to use a HTTP debugging proxy like [Fiddler][4]. Fiddler allows you to add [request headers automatically][5] to a request issued by a client. All you need to do is to ensure that the client is configured to use Fiddler as the HTTP proxy.\r\n\r\nEven if your intention is to write a light-weight unit test, it would be preferable to use a HTTP library like [Apache HttpComponents][6] in a client, instead of an approach that involves writing a request wrapper and a servlet with the additional overhead of requiring a test-specific WAR to built.\r\n\r\n  [1]: http://java.sun.com/javaee/6/docs/api/javax/servlet/http/HttpServletRequest.html#getHeader%28java.lang.String%29\r\n  [2]: http://java.sun.com/javaee/6/docs/api/javax/servlet/http/HttpServletRequestWrapper.html\r\n  [3]: https://stackoverflow.com/questions/2811769/adding-an-http-header-to-the-request-in-a-servlet-filter/2811841#2811841\r\n  [4]: http://www.fiddler2.com/fiddler2/\r\n  [5]: http://www.fiddler2.com/Fiddler/Dev/ScriptSamples.asp\r\n  [6]: http://hc.apache.org/","title":"Manually setting header for testing","body":"<p>The following lines:</p>\n\n<pre><code>// Setting input parameter as header parameter.Since request object dont have setHeader so setting in response\n//object\n\nresponse.setHeader(\"x-HwId\",hwid);\nresponse.setHeader(\"x-panelistId,panelistId);\n</code></pre>\n\n<p>adds two headers to the HTTP response that will be generated by the servlet container, and not to the HTTP request that is forwarded to the <code>CheckForCommandServlet</code> servlet.</p>\n\n<p>Since your intention is to add a HTTP header to the original request so that a subsequent <a href=\"http://java.sun.com/javaee/6/docs/api/javax/servlet/http/HttpServletRequest.html#getHeader%28java.lang.String%29\" rel=\"nofollow noreferrer\"><code>HttpServletRequest.getHeader()</code></a> invocation would read the appropriate value, you may adopt the approach of using a <a href=\"http://java.sun.com/javaee/6/docs/api/javax/servlet/http/HttpServletRequestWrapper.html\" rel=\"nofollow noreferrer\"><code>HttpServletRequestWrapper</code></a> that overrides the <code>getHeader</code> method, to return the values sent by the client. More details can be found in <a href=\"https://stackoverflow.com/questions/2811769/adding-an-http-header-to-the-request-in-a-servlet-filter/2811841#2811841\">this related StackOverflow answer</a>.</p>\n\n<hr>\n\n<p>A better approach for the purpose of verifying the behavior of the <code>CheckForCommandServlet</code>, would be to use a HTTP debugging proxy like <a href=\"http://www.fiddler2.com/fiddler2/\" rel=\"nofollow noreferrer\">Fiddler</a>. Fiddler allows you to add <a href=\"http://www.fiddler2.com/Fiddler/Dev/ScriptSamples.asp\" rel=\"nofollow noreferrer\">request headers automatically</a> to a request issued by a client. All you need to do is to ensure that the client is configured to use Fiddler as the HTTP proxy.</p>\n\n<p>Even if your intention is to write a light-weight unit test, it would be preferable to use a HTTP library like <a href=\"http://hc.apache.org/\" rel=\"nofollow noreferrer\">Apache HttpComponents</a> in a client, instead of an approach that involves writing a request wrapper and a servlet with the additional overhead of requiring a test-specific WAR to built.</p>\n"},{"tags":[],"owner":{"account_id":84884,"reputation":12163,"user_id":237033,"display_name":"Sahil Muthoo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1314536407,"creation_date":1314531807,"answer_id":7220727,"question_id":7220273,"body_markdown":"To expand upon Vineet Reynolds&#39; excellent answer, Here&#39;s one way you can set HTTP headers using [java.net.HttpURLConnection](http://download.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html):\r\n\r\n    URL url = new URL(&quot;http://localhost:8080/CheckForCommandServlet&quot;);\r\n    HttpURLConnection connection = (HttpURLConnection)url.openConnection();\r\n    connection.setRequestProperty(&quot;X-HwId&quot;, &quot;Foo&quot;);\r\n    connection.setRequestProperty(&quot;X-panelistId&quot;, &quot;Bar&quot;);\r\n    connection.setRequestMethod(&quot;GET&quot;);\r\n    connection.connect();\r\n    connection.getInputStream().close(); //Must open stream to make request.\r\n    connection.disconnect();\r\n\r\nYou can wrap up something like this in your functional tests to assert on the response amongst other things. \r\n\r\n---\r\n__EDIT__\r\n\r\nUsing the  [HttpServletRequestWrapper](http://java.sun.com/javaee/6/docs/api/javax/servlet/http/HttpServletRequestWrapper.html):\r\n\r\n\r\n1. Set the headers as request attributes.\r\n1. Override `getHeader(String name)` and `getHeaderNames()` in your wrapper.\r\n3. Forward to the target servlet using the wrapper in-place of the request.\r\n\r\nCode (_note that I&#39;ve removed imports for brevity_):\r\n\r\n    public class CommandQueueTestServlet extends HttpServlet {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \tprotected void doGet(HttpServletRequest request,\r\n    \t\t\tHttpServletResponse response) throws ServletException, IOException {\r\n    \t\tMyWrapper wrapper = new MyWrapper(request);\r\n    \t\trequest.setAttribute(&quot;X-HwId&quot;, &quot;HardWare ID&quot;);\r\n    \t\trequest.setAttribute(&quot;X-PanelListId&quot;, &quot;Panel List ID&quot;);\r\n    \t\trequest.getRequestDispatcher(&quot;/CheckForCommandServlet&quot;).forward(\r\n    \t\t\t\twrapper, response);\r\n    \t}\r\n    \r\n    \tprivate static class MyWrapper extends HttpServletRequestWrapper {\r\n    \r\n    \t\tpublic MyWrapper(HttpServletRequest request) {\r\n    \t\t\tsuper(request);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic String getHeader(String name) {\r\n    \t\t\tString header = super.getHeader(name);\r\n    \t\t\treturn header == null ? (String) super.getAttribute(name) : header;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tpublic Enumeration&lt;String&gt; getHeaderNames() {\r\n    \t\t\tList&lt;String&gt; headerNames = Collections.list(super.getHeaderNames());\r\n    \t\t\theaderNames.addAll(Collections.list(super.getAttributeNames()));\r\n    \t\t\treturn Collections.enumeration(headerNames);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nYou should now be able to use `request.getHeader(String name)` as usual:\r\n\r\n    public class CheckForCommandServlet extends HttpServlet {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \tprotected void doGet(HttpServletRequest request,\r\n    \t\t\tHttpServletResponse response) throws ServletException, IOException {\r\n    \t\tresponse.getWriter()\r\n    \t\t\t\t.format(&quot;Hardware ID = %s\\n Panel List ID = %s&quot;,\r\n    \t\t\t\t\t\trequest.getHeader(&quot;X-HwId&quot;),\r\n    \t\t\t\t\t\trequest.getHeader(&quot;X-PanelListId&quot;));\r\n    \t}\r\n    }\r\n\r\nEven though this works, it&#39;s a rather brittle test and as Vineet has already mentioned, will require you to deploy a separate WAR. IMHO, using an HTTP library outside of servlet code in a test of some sort is still the best way to go.  \r\n\r\n\r\n\r\n","title":"Manually setting header for testing","body":"<p>To expand upon Vineet Reynolds' excellent answer, Here's one way you can set HTTP headers using <a href=\"http://download.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html\" rel=\"nofollow\">java.net.HttpURLConnection</a>:</p>\n\n<pre><code>URL url = new URL(\"http://localhost:8080/CheckForCommandServlet\");\nHttpURLConnection connection = (HttpURLConnection)url.openConnection();\nconnection.setRequestProperty(\"X-HwId\", \"Foo\");\nconnection.setRequestProperty(\"X-panelistId\", \"Bar\");\nconnection.setRequestMethod(\"GET\");\nconnection.connect();\nconnection.getInputStream().close(); //Must open stream to make request.\nconnection.disconnect();\n</code></pre>\n\n<p>You can wrap up something like this in your functional tests to assert on the response amongst other things. </p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>Using the  <a href=\"http://java.sun.com/javaee/6/docs/api/javax/servlet/http/HttpServletRequestWrapper.html\" rel=\"nofollow\">HttpServletRequestWrapper</a>:</p>\n\n<ol>\n<li>Set the headers as request attributes.</li>\n<li>Override <code>getHeader(String name)</code> and <code>getHeaderNames()</code> in your wrapper.</li>\n<li>Forward to the target servlet using the wrapper in-place of the request.</li>\n</ol>\n\n<p>Code (<em>note that I've removed imports for brevity</em>):</p>\n\n<pre><code>public class CommandQueueTestServlet extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n\n    protected void doGet(HttpServletRequest request,\n            HttpServletResponse response) throws ServletException, IOException {\n        MyWrapper wrapper = new MyWrapper(request);\n        request.setAttribute(\"X-HwId\", \"HardWare ID\");\n        request.setAttribute(\"X-PanelListId\", \"Panel List ID\");\n        request.getRequestDispatcher(\"/CheckForCommandServlet\").forward(\n                wrapper, response);\n    }\n\n    private static class MyWrapper extends HttpServletRequestWrapper {\n\n        public MyWrapper(HttpServletRequest request) {\n            super(request);\n        }\n\n        @Override\n        public String getHeader(String name) {\n            String header = super.getHeader(name);\n            return header == null ? (String) super.getAttribute(name) : header;\n        }\n\n        @Override\n        @SuppressWarnings(\"unchecked\")\n        public Enumeration&lt;String&gt; getHeaderNames() {\n            List&lt;String&gt; headerNames = Collections.list(super.getHeaderNames());\n            headerNames.addAll(Collections.list(super.getAttributeNames()));\n            return Collections.enumeration(headerNames);\n        }\n    }\n}\n</code></pre>\n\n<p>You should now be able to use <code>request.getHeader(String name)</code> as usual:</p>\n\n<pre><code>public class CheckForCommandServlet extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n\n    protected void doGet(HttpServletRequest request,\n            HttpServletResponse response) throws ServletException, IOException {\n        response.getWriter()\n                .format(\"Hardware ID = %s\\n Panel List ID = %s\",\n                        request.getHeader(\"X-HwId\"),\n                        request.getHeader(\"X-PanelListId\"));\n    }\n}\n</code></pre>\n\n<p>Even though this works, it's a rather brittle test and as Vineet has already mentioned, will require you to deploy a separate WAR. IMHO, using an HTTP library outside of servlet code in a test of some sort is still the best way to go.  </p>\n"},{"tags":[],"owner":{"account_id":21957517,"reputation":15,"user_id":16235867,"display_name":"serhercu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662995668,"creation_date":1662995668,"answer_id":73691460,"question_id":7220273,"body_markdown":"If you want to add headers to your HttpServletRequest, try this:\r\n\r\n    MutableHttpServletRequest mutableRequest = new MutableHttpServletRequest(request);\r\n    mutableRequest.putHeader(&quot;header&quot;, &quot;headerValue&quot;);\r\n\r\nwhere *request* is your HttpServletRequest object.","title":"Manually setting header for testing","body":"<p>If you want to add headers to your HttpServletRequest, try this:</p>\n<pre><code>MutableHttpServletRequest mutableRequest = new MutableHttpServletRequest(request);\nmutableRequest.putHeader(&quot;header&quot;, &quot;headerValue&quot;);\n</code></pre>\n<p>where <em>request</em> is your HttpServletRequest object.</p>\n"}],"owner":{"account_id":534273,"reputation":1449,"user_id":899169,"accept_rate":31,"display_name":"vibhas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20256,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1662995668,"creation_date":1314526196,"question_id":7220273,"body_markdown":"I want to create a servlet class which receives two input parameters from a jsp let say login.jsp and thae servlet  &quot;CommandQueueTestServlet&quot; set those incomming parameter as a header parameter and then send the request and response parameter to another servlet &quot;CheckForCommandServlet&quot;. \r\n\r\nI need     to do this just to test my functionality because my &quot;CheckForCommandServlet&quot; will actually be invoked by some other application which has header     parameter.\r\n\r\nBut for my own testing I want to create a servlet  &quot;CommandQueueTestServlet&quot; for setting header.\r\n\r\nPlease check the below code what I am trying     to explain\r\n\r\n\r\n    javax.servlet.*;\r\n    import javax.servlet.http.*;\r\n    import java.util.*;\r\n\r\n    public class CommandQueueTestServlet extends HttpServlet{\r\n\t\r\n\t public void doGet(HttpServletRequest request,\r\n             HttpServletResponse response)\r\n    throws ServletException, IOException {\r\n\r\n\r\n    String hwId=request.getParameter(&quot;hardware_id&quot;);\r\n    String panelistId=request.getParameter(&quot;panelist_id&quot;)); \r\n\r\n    // Setting input parameter as header parameter.Since request object dont have setHeader so setting in response\r\n    //object\r\n\r\n    response.setHeader(&quot;x-HwId&quot;,hwid);\r\n    response.setHeader(&quot;x-panelistId,panelistId);\r\n\r\n    // creating instance of CheckForCommandServlet and passing in doGet() method:\r\n\r\n    CheckForCommandServlet headerParam= new CheckForCommandServlet();\r\n\r\n     headerParam.doGet(request,response);\r\n\r\n\r\n     }\r\n     }\r\n\r\n\r\n----------\r\n\r\n\r\n     // Code for CheckForCommandServlet \r\n\r\n     public class CheckForCommandServlet extends HttpServlet {\r\n\r\n     @Override\r\n     public void doGet(HttpServletRequest request, HttpServletResponse response)\r\n     throws ServletException, IOException {\r\n\r\n\r\n\t\t\r\n\t\tEnumeration enumeration = httpServletRequest.getHeaderNames();\r\n\t\tString headerName;\r\n\t\tString headerValue;\r\n\t\twhile (enumeration.hasMoreElements())\r\n\t\t{\r\n\t\t\theaderName = (String)enumeration.nextElement();\r\n\t\t\tif (headerName == null)\r\n\t\t\t{\r\n\t\t\t\theaderName = &quot;&quot;;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\theaderName = headerName.toLowerCase();\r\n\t\t\theaderValue = httpServletRequest.getHeader(headerName);\r\n\t\t\tlogger.log(Level.INFO, &quot;Header headerName &quot; + headerName);\r\n\t\t\tlogger.log(Level.INFO, &quot;Header ParamaterValue &quot; + headerValue);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n      }\r\n\r\nHow did my CheckForCommandServlet  get the headerParemeter set in  CommandQueueTestServlet as it is set in header parameter.\r\n\r\n\r\n\r\n","title":"Manually setting header for testing","body":"<p>I want to create a servlet class which receives two input parameters from a jsp let say login.jsp and thae servlet  \"CommandQueueTestServlet\" set those incomming parameter as a header parameter and then send the request and response parameter to another servlet \"CheckForCommandServlet\". </p>\n\n<p>I need     to do this just to test my functionality because my \"CheckForCommandServlet\" will actually be invoked by some other application which has header     parameter.</p>\n\n<p>But for my own testing I want to create a servlet  \"CommandQueueTestServlet\" for setting header.</p>\n\n<p>Please check the below code what I am trying     to explain</p>\n\n<pre><code>javax.servlet.*;\nimport javax.servlet.http.*;\nimport java.util.*;\n\npublic class CommandQueueTestServlet extends HttpServlet{\n\n public void doGet(HttpServletRequest request,\n         HttpServletResponse response)\nthrows ServletException, IOException {\n\n\nString hwId=request.getParameter(\"hardware_id\");\nString panelistId=request.getParameter(\"panelist_id\")); \n\n// Setting input parameter as header parameter.Since request object dont have setHeader so setting in response\n//object\n\nresponse.setHeader(\"x-HwId\",hwid);\nresponse.setHeader(\"x-panelistId,panelistId);\n\n// creating instance of CheckForCommandServlet and passing in doGet() method:\n\nCheckForCommandServlet headerParam= new CheckForCommandServlet();\n\n headerParam.doGet(request,response);\n\n\n }\n }\n</code></pre>\n\n<hr>\n\n<pre><code> // Code for CheckForCommandServlet \n\n public class CheckForCommandServlet extends HttpServlet {\n\n @Override\n public void doGet(HttpServletRequest request, HttpServletResponse response)\n throws ServletException, IOException {\n\n\n\n    Enumeration enumeration = httpServletRequest.getHeaderNames();\n    String headerName;\n    String headerValue;\n    while (enumeration.hasMoreElements())\n    {\n        headerName = (String)enumeration.nextElement();\n        if (headerName == null)\n        {\n            headerName = \"\";\n        }\n\n        headerName = headerName.toLowerCase();\n        headerValue = httpServletRequest.getHeader(headerName);\n        logger.log(Level.INFO, \"Header headerName \" + headerName);\n        logger.log(Level.INFO, \"Header ParamaterValue \" + headerValue);\n\n    }\n\n  }\n</code></pre>\n\n<p>How did my CheckForCommandServlet  get the headerParemeter set in  CommandQueueTestServlet as it is set in header parameter.</p>\n"},{"tags":["java","spring-webflux","openjdk-11"],"comments":[{"owner":{"account_id":8001950,"reputation":589,"user_id":6301603,"display_name":"TTho Einthausend"},"score":0,"creation_date":1662039279,"post_id":73569438,"comment_id":129917693,"body_markdown":"the File ist loaded into memory, so maybe try it with a smaller one? Edit: memory leak?","body":"the File ist loaded into memory, so maybe try it with a smaller one? Edit: memory leak?"},{"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"score":0,"creation_date":1662041644,"post_id":73569438,"comment_id":129918763,"body_markdown":"That`s not an option since the files can have a size from a few MB to a lot of MB.","body":"That`s not an option since the files can have a size from a few MB to a lot of MB."}],"answers":[{"tags":[],"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662995207,"creation_date":1662995207,"answer_id":73691365,"question_id":73569438,"body_markdown":"It seems that this is caused by the given OpenJDK Bug in **EDIT #2**. With OpenJDK 17 the issue disappears. So far all is working as expected.","title":"Webflux upload file - out of RAM or swap","body":"<p>It seems that this is caused by the given OpenJDK Bug in <strong>EDIT #2</strong>. With OpenJDK 17 the issue disappears. So far all is working as expected.</p>\n"}],"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73691365,"answer_count":1,"score":0,"last_activity_date":1662995207,"creation_date":1662035743,"question_id":73569438,"body_markdown":"I&#180;m facing a strange issue:\r\nI&#180;m uploading a file (about 50 MB) via WebFlux and save it to a minio container.\r\n\r\nThis is the code:\r\n```java\r\nprivate Mono&lt;Boolean&gt; saveFileToMinio(FilePart filePart) {\r\n\t\tlog.info(String.format(&quot;About to save database named %s to minio container...&quot;, filePart.filename()));\r\n\t\tvar result = DataBufferUtils.join(filePart.content()).map(dataBuffer -&gt; {\r\n\t\t\t\t\tvar bytes = dataBuffer.asByteBuffer().array();\r\n\t\t\t\t\t//dataBuffer.read(bytes);\r\n\t\t\t\t\t//DataBufferUtils.release(dataBuffer);\r\n\t\t\t\t\treturn bytes;\r\n\t\t\t\t}).map(databaseFileService::write)\r\n\t\t\t\t.then(Mono.just(true))\r\n\t\t\t\t.onErrorMap(throwable -&gt; {\r\n\t\t\t\t\tlog.error(throwable.getMessage(), throwable);\r\n\t\t\t\t\treturn throwable;\r\n\t\t\t\t});\r\n\t\tlog.info(String.format(&quot;Successfully saved database named %s to minio container...&quot;, filePart.filename()));\r\n\t\treturn result;\r\n\t}\r\n```\r\n\r\nThis workflow sometimes forces the OS (debian) to kill the java process because of \r\n&gt;insufficient memory for the Java Runtime Environment\r\n\r\nThe jar is being run like so:  \r\n`/usr/bin/java -Dsun.misc.URLClassPath.disableJarChecking=true -jar /home/pmgr/pmgr.jar`\r\n\r\nWe use openjdk.\r\n\r\nIs there an issue with the above method?\r\n\r\nPlease see the comments above. Commenting these in does not take any effect though.\r\n\r\nAny ideas?\r\n\r\n**EDIT #1:**  \r\nThe strange thing is, that it works X times before killing the process.\r\nIf you try it X+1 times, the process will be killed.\r\n\r\n**EDIT #2:**  \r\nMaybe this is caused by this:\r\nhttps://bugs.openjdk.org/browse/JDK-8214994\r\n\r\nI&#180;ll try to use a different JDK and keep you updated ...\r\n\r\n","title":"Webflux upload file - out of RAM or swap","body":"<p>I´m facing a strange issue:\nI´m uploading a file (about 50 MB) via WebFlux and save it to a minio container.</p>\n<p>This is the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Mono&lt;Boolean&gt; saveFileToMinio(FilePart filePart) {\n        log.info(String.format(&quot;About to save database named %s to minio container...&quot;, filePart.filename()));\n        var result = DataBufferUtils.join(filePart.content()).map(dataBuffer -&gt; {\n                    var bytes = dataBuffer.asByteBuffer().array();\n                    //dataBuffer.read(bytes);\n                    //DataBufferUtils.release(dataBuffer);\n                    return bytes;\n                }).map(databaseFileService::write)\n                .then(Mono.just(true))\n                .onErrorMap(throwable -&gt; {\n                    log.error(throwable.getMessage(), throwable);\n                    return throwable;\n                });\n        log.info(String.format(&quot;Successfully saved database named %s to minio container...&quot;, filePart.filename()));\n        return result;\n    }\n</code></pre>\n<p>This workflow sometimes forces the OS (debian) to kill the java process because of</p>\n<blockquote>\n<p>insufficient memory for the Java Runtime Environment</p>\n</blockquote>\n<p>The jar is being run like so:<br />\n<code>/usr/bin/java -Dsun.misc.URLClassPath.disableJarChecking=true -jar /home/pmgr/pmgr.jar</code></p>\n<p>We use openjdk.</p>\n<p>Is there an issue with the above method?</p>\n<p>Please see the comments above. Commenting these in does not take any effect though.</p>\n<p>Any ideas?</p>\n<p><strong>EDIT #1:</strong><br />\nThe strange thing is, that it works X times before killing the process.\nIf you try it X+1 times, the process will be killed.</p>\n<p><strong>EDIT #2:</strong><br />\nMaybe this is caused by this:\n<a href=\"https://bugs.openjdk.org/browse/JDK-8214994\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8214994</a></p>\n<p>I´ll try to use a different JDK and keep you updated ...</p>\n"},{"tags":["java","jackson","yaml"],"answers":[{"tags":[],"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"down_vote_count":0,"up_vote_count":36,"is_accepted":true,"score":36,"last_activity_date":1593162274,"creation_date":1475097948,"answer_id":39757935,"question_id":39757421,"body_markdown":"There is a `YAMLGenerator` feature called [`MINIMIZE_QUOTES`][1] that will turn off the quotes.\r\n\r\nYou can [`enable()`][2] it when creating your `YAMLFactory` like so:\r\n\r\n\r\n\tObjectMapper mapper = new ObjectMapper(new YAMLFactory().enable(YAMLGenerator.Feature.MINIMIZE_QUOTES));\r\n\r\n\r\n  [1]: http://static.javadoc.io/com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.7.5/com/fasterxml/jackson/dataformat/yaml/YAMLGenerator.Feature.html#MINIMIZE_QUOTES\r\n  [2]: http://static.javadoc.io/com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.7.5/com/fasterxml/jackson/dataformat/yaml/YAMLFactory.html#enable(com.fasterxml.jackson.dataformat.yaml.YAMLGenerator.Feature)","title":"How do I stop jackson&#39;s YAML writer from quoting values","body":"<p>There is a <code>YAMLGenerator</code> feature called <a href=\"http://static.javadoc.io/com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.7.5/com/fasterxml/jackson/dataformat/yaml/YAMLGenerator.Feature.html#MINIMIZE_QUOTES\" rel=\"noreferrer\"><code>MINIMIZE_QUOTES</code></a> that will turn off the quotes.</p>\n<p>You can <a href=\"http://static.javadoc.io/com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.7.5/com/fasterxml/jackson/dataformat/yaml/YAMLFactory.html#enable(com.fasterxml.jackson.dataformat.yaml.YAMLGenerator.Feature)\" rel=\"noreferrer\"><code>enable()</code></a> it when creating your <code>YAMLFactory</code> like so:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper(new YAMLFactory().enable(YAMLGenerator.Feature.MINIMIZE_QUOTES));\n</code></pre>\n"}],"owner":{"account_id":1874363,"reputation":1758,"user_id":1695901,"accept_rate":67,"display_name":"gilbertpilz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7888,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":39757935,"answer_count":1,"score":24,"last_activity_date":1662995171,"creation_date":1475095851,"question_id":39757421,"body_markdown":"I&#39;m working on a project to convert files from JSON to YAML. I&#39;m using the 2.8.3 versions of the following libraries:\r\n\r\n - jackson-core\r\n - jackson-databind\r\n - jackson-dataformat-yaml\r\n - jackson-annotations\r\n\r\nMy YAML serialization code is extremely simple:\r\n\r\n    ObjectMapper mapper = new ObjectMapper(new YAMLFactory());\r\n    ObjectWriter writer = mapper.writer();\r\n\r\n    try {\r\n        SequenceWriter sw = writer.writeValues(System.out);\r\n        sw.write(tree);\r\n    }\r\n    catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\nThe YAML produced by this code looks like the following:\r\n\r\n    serviceType: &quot;elasticSearch&quot;\r\n    displayName: &quot;Elasticsearch Service&quot;\r\n    description: &quot;Sample Elastic Search Service&quot;\r\n\r\nAlthough it is valid YAML, I don&#39;t like the double quotes around the values. You don&#39;t need them in YAML and it makes editing the resulting file more cumbersome. Does anyone know how to configure the ObjectWriter to make jackson stop encapsulating String values in quotes?\r\n","title":"How do I stop jackson&#39;s YAML writer from quoting values","body":"<p>I'm working on a project to convert files from JSON to YAML. I'm using the 2.8.3 versions of the following libraries:</p>\n\n<ul>\n<li>jackson-core</li>\n<li>jackson-databind</li>\n<li>jackson-dataformat-yaml</li>\n<li>jackson-annotations</li>\n</ul>\n\n<p>My YAML serialization code is extremely simple:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper(new YAMLFactory());\nObjectWriter writer = mapper.writer();\n\ntry {\n    SequenceWriter sw = writer.writeValues(System.out);\n    sw.write(tree);\n}\ncatch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>The YAML produced by this code looks like the following:</p>\n\n<pre><code>serviceType: \"elasticSearch\"\ndisplayName: \"Elasticsearch Service\"\ndescription: \"Sample Elastic Search Service\"\n</code></pre>\n\n<p>Although it is valid YAML, I don't like the double quotes around the values. You don't need them in YAML and it makes editing the resulting file more cumbersome. Does anyone know how to configure the ObjectWriter to make jackson stop encapsulating String values in quotes?</p>\n"},{"tags":["java","spring","hibernate","spring-annotations"],"comments":[{"owner":{"account_id":917855,"reputation":1792,"user_id":950253,"accept_rate":36,"display_name":"wedens"},"score":0,"creation_date":1377263977,"post_id":18399006,"comment_id":27031246,"body_markdown":"this may happen when already commited or rolled back transaction tries to commit or rollback","body":"this may happen when already commited or rolled back transaction tries to commit or rollback"},{"owner":{"account_id":917855,"reputation":1792,"user_id":950253,"accept_rate":36,"display_name":"wedens"},"score":0,"creation_date":1377264090,"post_id":18399006,"comment_id":27031333,"body_markdown":"can you show your dao method?","body":"can you show your dao method?"},{"owner":{"account_id":122100,"reputation":16858,"user_id":315677,"accept_rate":81,"display_name":"Pierre Henry"},"score":1,"creation_date":1377264897,"post_id":18399006,"comment_id":27031855,"body_markdown":"OK, my DAO method was the guilty one. I was starting to suspect it and then your comment made me look twice. So the method contained some left-over manual session commit (I am recently modernizing and &quot;springifying&quot; this app), so when the transactional proxy was calling commit it failed because it was commited already ! Thanks for your time. If you edit your answer to mention the DAO method I&#39;ll accept it.","body":"OK, my DAO method was the guilty one. I was starting to suspect it and then your comment made me look twice. So the method contained some left-over manual session commit (I am recently modernizing and &quot;springifying&quot; this app), so when the transactional proxy was calling commit it failed because it was commited already ! Thanks for your time. If you edit your answer to mention the DAO method I&#39;ll accept it."}],"answers":[{"tags":[],"owner":{"account_id":917855,"reputation":1792,"user_id":950253,"accept_rate":36,"display_name":"wedens"},"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1377276596,"creation_date":1377257279,"answer_id":18401709,"question_id":18399006,"body_markdown":"create separate class with method annotated with `@Transactional` and call this method in your `@Scheduled` annotated method. spring will do a call through proxy and handle `@Transactional` correctly.\r\n\r\nEDIT:\r\nalso look at your DAO method and make sure it not commits or rolls back transaction manually","title":"Spring : @Transactional @Scheduled method throws TransactionException","body":"<p>create separate class with method annotated with <code>@Transactional</code> and call this method in your <code>@Scheduled</code> annotated method. spring will do a call through proxy and handle <code>@Transactional</code> correctly.</p>\n\n<p>EDIT:\nalso look at your DAO method and make sure it not commits or rolls back transaction manually</p>\n"},{"tags":[],"owner":{"account_id":3014209,"reputation":1479,"user_id":2556867,"accept_rate":44,"display_name":"degr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544700361,"creation_date":1544700361,"answer_id":53760798,"question_id":18399006,"body_markdown":"In my case \r\n\r\n    @EnableTransactionManagement\r\n\r\nwas not used. After I add this annotation to one of my @Configuration classes it start to work.","title":"Spring : @Transactional @Scheduled method throws TransactionException","body":"<p>In my case </p>\n\n<pre><code>@EnableTransactionManagement\n</code></pre>\n\n<p>was not used. After I add this annotation to one of my @Configuration classes it start to work.</p>\n"}],"owner":{"account_id":122100,"reputation":16858,"user_id":315677,"accept_rate":81,"display_name":"Pierre Henry"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23187,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":18401709,"answer_count":2,"score":14,"last_activity_date":1662994841,"creation_date":1377248912,"question_id":18399006,"body_markdown":"(Still a bit new to Spring)\r\n\r\nI need to have a service method that is at the same time `@Scheduled` and `@Transactional`, so that I get to call a DAO in it.\r\n\r\nDeclarative transactions are enabled, the transaction manager is a `org.springframework.orm.hibernate3.HibernateTransactionManager` based on a hibernate session factory.\r\n\r\nThe service class does not implement any interface so a CGLIB proxy is used.\r\n\r\nThis setup works fine in general (methods called from the web stack i.e. Struts) but this method raises an exception when called by the scheduler.\r\n\r\nHere are the relevant bits of code :\r\n\r\nThe service method (the class is called `ClientWakeAndTerminateManager`) :\r\n\r\n    @Scheduled(initialDelay = 5000, fixedRateString = &quot;${rmi.server.threads.clientsScheduleManagement.rate}&quot;)\r\n        @Transactional(readOnly = true)\r\n        public void runCheck(){\r\n    \r\n            //Call a read-only DAO method (the DAO is @Autowired as a class field)\r\n    \r\n            //do some stuff with the data loaded from DB\r\n    \r\n        }\r\n\r\nRelevant parts of my application context :\r\n\r\n    &lt;!-- switch on the transactional infrastructure --&gt;\r\n        &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; proxy-target-class=&quot;true&quot;/&gt;\r\n    \r\n        &lt;!-- Utility class to execute transactional code where use of annotation is not possible --&gt;\r\n        &lt;bean class=&quot;org.springframework.transaction.support.TransactionTemplate&quot; id=&quot;txTemplate&quot;&gt;\r\n            &lt;constructor-arg name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;!-- Transaction manager based on Hibernate --&gt;\r\n        &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;\r\n            &lt;property name=&quot;sessionFactory&quot; ref=&quot;hibernateSessionFactory&quot;/&gt;\r\n        &lt;/bean&gt;\r\n\r\nException stack trace :\r\n\r\n    [ERROR] : Unexpected error occurred in scheduled task.\r\n    org.springframework.transaction.TransactionSystemException: Could not commit Hibernate transaction; nested exception is org.hibernate.TransactionException: Transaction not successfully started\r\n    \tat org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:661)\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:755)\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:724)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:475)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:270)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:94)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:631)\r\n    \tat ch.unine.sitel.lis.rmi.shared.ClientWakeAndTerminateManager$$EnhancerByCGLIB$$d8be4f34.runCheck(&lt;generated&gt;)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:601)\r\n    \tat org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:64)\r\n    \tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\r\n    \tat java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351)\r\n    \tat java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178)\r\n    \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)\r\n    \tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n    \tat java.lang.Thread.run(Thread.java:722)\r\n    Caused by: org.hibernate.TransactionException: Transaction not successfully started\r\n    \tat org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:127)\r\n    \tat org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:657)\r\n    \t... 22 more\r\n\r\n\r\nThe stack trace seems to tell me that a transactional proxy is indeed used so I don&#39;t understand this exception. Help !\r\n\r\nEDIT:\r\n\r\nI tried to separate the `@Transactional` and the `@Scheduled` annotations by :\r\n\r\n- Create a new class/bean that contaisn the `@Scheduled` method\r\n- Inject my service to this bean\r\n- Removed the `@Scheduled` from my original method but left the `@Transactional`\r\n\r\nBut I still get the same exception. I also tried to put the `@Transactional` on my DAO method and remove it from my service method : same result.","title":"Spring : @Transactional @Scheduled method throws TransactionException","body":"<p>(Still a bit new to Spring)</p>\n\n<p>I need to have a service method that is at the same time <code>@Scheduled</code> and <code>@Transactional</code>, so that I get to call a DAO in it.</p>\n\n<p>Declarative transactions are enabled, the transaction manager is a <code>org.springframework.orm.hibernate3.HibernateTransactionManager</code> based on a hibernate session factory.</p>\n\n<p>The service class does not implement any interface so a CGLIB proxy is used.</p>\n\n<p>This setup works fine in general (methods called from the web stack i.e. Struts) but this method raises an exception when called by the scheduler.</p>\n\n<p>Here are the relevant bits of code :</p>\n\n<p>The service method (the class is called <code>ClientWakeAndTerminateManager</code>) :</p>\n\n<pre><code>@Scheduled(initialDelay = 5000, fixedRateString = \"${rmi.server.threads.clientsScheduleManagement.rate}\")\n    @Transactional(readOnly = true)\n    public void runCheck(){\n\n        //Call a read-only DAO method (the DAO is @Autowired as a class field)\n\n        //do some stuff with the data loaded from DB\n\n    }\n</code></pre>\n\n<p>Relevant parts of my application context :</p>\n\n<pre><code>&lt;!-- switch on the transactional infrastructure --&gt;\n    &lt;tx:annotation-driven transaction-manager=\"transactionManager\" proxy-target-class=\"true\"/&gt;\n\n    &lt;!-- Utility class to execute transactional code where use of annotation is not possible --&gt;\n    &lt;bean class=\"org.springframework.transaction.support.TransactionTemplate\" id=\"txTemplate\"&gt;\n        &lt;constructor-arg name=\"transactionManager\" ref=\"transactionManager\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Transaction manager based on Hibernate --&gt;\n    &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\"&gt;\n        &lt;property name=\"sessionFactory\" ref=\"hibernateSessionFactory\"/&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>Exception stack trace :</p>\n\n<pre><code>[ERROR] : Unexpected error occurred in scheduled task.\norg.springframework.transaction.TransactionSystemException: Could not commit Hibernate transaction; nested exception is org.hibernate.TransactionException: Transaction not successfully started\n    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:661)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:755)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:724)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:475)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:270)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:94)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:631)\n    at ch.unine.sitel.lis.rmi.shared.ClientWakeAndTerminateManager$$EnhancerByCGLIB$$d8be4f34.runCheck(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:64)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:53)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351)\n    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)\n    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n    at java.lang.Thread.run(Thread.java:722)\nCaused by: org.hibernate.TransactionException: Transaction not successfully started\n    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:127)\n    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:657)\n    ... 22 more\n</code></pre>\n\n<p>The stack trace seems to tell me that a transactional proxy is indeed used so I don't understand this exception. Help !</p>\n\n<p>EDIT:</p>\n\n<p>I tried to separate the <code>@Transactional</code> and the <code>@Scheduled</code> annotations by :</p>\n\n<ul>\n<li>Create a new class/bean that contaisn the <code>@Scheduled</code> method</li>\n<li>Inject my service to this bean</li>\n<li>Removed the <code>@Scheduled</code> from my original method but left the <code>@Transactional</code></li>\n</ul>\n\n<p>But I still get the same exception. I also tried to put the <code>@Transactional</code> on my DAO method and remove it from my service method : same result.</p>\n"},{"tags":["java","android","xml","android-layout","text-size"],"comments":[{"owner":{"account_id":15483805,"reputation":242,"user_id":11170352,"display_name":"Mokhtar Abdelhalim"},"score":0,"creation_date":1662990945,"post_id":73690313,"comment_id":130127661,"body_markdown":"You want to change the size of your text dynamically or what ?","body":"You want to change the size of your text dynamically or what ?"},{"owner":{"account_id":23714354,"reputation":1,"user_id":18496663,"display_name":"Pedro Bonini"},"score":0,"creation_date":1662991871,"post_id":73690313,"comment_id":130128052,"body_markdown":"exactly, I need a responsive text. On a 10.5&quot; device the text is one size, on a 8.5&quot; device the text is another size.\n\nIf I used an xml in layout-Xlarge and layout it would switch sizes by itself","body":"exactly, I need a responsive text. On a 10.5&quot; device the text is one size, on a 8.5&quot; device the text is another size.  If I used an xml in layout-Xlarge and layout it would switch sizes by itself"},{"owner":{"account_id":15483805,"reputation":242,"user_id":11170352,"display_name":"Mokhtar Abdelhalim"},"score":0,"creation_date":1662992254,"post_id":73690313,"comment_id":130128182,"body_markdown":"so try to use this line of code holder.tvValue.setTextSize(20f), your post is right, but you forget to add the size as parameter, setTextSize need a parameter of type Float","body":"so try to use this line of code holder.tvValue.setTextSize(20f), your post is right, but you forget to add the size as parameter, setTextSize need a parameter of type Float"},{"owner":{"account_id":23714354,"reputation":1,"user_id":18496663,"display_name":"Pedro Bonini"},"score":0,"creation_date":1663004734,"post_id":73690313,"comment_id":130132571,"body_markdown":"I want to get this parameter from a TextSize from an xml file","body":"I want to get this parameter from a TextSize from an xml file"}],"answers":[{"tags":[],"owner":{"account_id":11231029,"reputation":1,"user_id":8239090,"display_name":"Sunday Ndu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662991570,"creation_date":1662991570,"answer_id":73690609,"question_id":73690313,"body_markdown":"I am assuming you are using Java here.\r\nThis method `TextView.setTextSize(float size);` requires you to enter a value as the parameter.\r\nTry entering `holder.tvValue.setTextSize(32f);`.\r\nLet me know if this helps you","title":"how to get textSize value of a textview from XML and set it in code","body":"<p>I am assuming you are using Java here.\nThis method <code>TextView.setTextSize(float size);</code> requires you to enter a value as the parameter.\nTry entering <code>holder.tvValue.setTextSize(32f);</code>.\nLet me know if this helps you</p>\n"},{"tags":[],"owner":{"account_id":24438997,"reputation":1738,"user_id":18362930,"display_name":"Sandesh Khutal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662994538,"creation_date":1662994538,"answer_id":73691228,"question_id":73690313,"body_markdown":"Find the [[link][1]][1] for more details.\r\n\r\nExample:\r\n\r\n    holder.tvValue.setTextSize(TypedValue.COMPLEX_UNIT_SP, 65);\r\n\r\nOR\r\nCleaner and more reusable approach is\r\n\r\ndefine text size in dimens.xml file inside res/values/ directory:\r\n\r\n    &lt;/resources&gt;\r\n       &lt;dimen name=&quot;text_medium&quot;&gt;14sp&lt;/dimen&gt;\r\n    &lt;/resources&gt;\r\n\r\nand then apply it to the TextView:\r\n\r\n    holder.tvValue.setTextSize(TypedValue.COMPLEX_UNIT_SP,context.getResources().getDimension(R.dimen.text_medium));\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/widget/TextView.html#setTextSize%28int,%20float%29","title":"how to get textSize value of a textview from XML and set it in code","body":"<p>Find the [<a href=\"https://developer.android.com/reference/android/widget/TextView.html#setTextSize%28int,%20float%29\" rel=\"nofollow noreferrer\">link</a>]<a href=\"https://developer.android.com/reference/android/widget/TextView.html#setTextSize%28int,%20float%29\" rel=\"nofollow noreferrer\">1</a> for more details.</p>\n<p>Example:</p>\n<pre><code>holder.tvValue.setTextSize(TypedValue.COMPLEX_UNIT_SP, 65);\n</code></pre>\n<p>OR\nCleaner and more reusable approach is</p>\n<p>define text size in dimens.xml file inside res/values/ directory:</p>\n<pre><code>&lt;/resources&gt;\n   &lt;dimen name=&quot;text_medium&quot;&gt;14sp&lt;/dimen&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>and then apply it to the TextView:</p>\n<pre><code>holder.tvValue.setTextSize(TypedValue.COMPLEX_UNIT_SP,context.getResources().getDimension(R.dimen.text_medium));\n</code></pre>\n"}],"owner":{"account_id":23714354,"reputation":1,"user_id":18496663,"display_name":"Pedro Bonini"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1662994538,"creation_date":1662990233,"question_id":73690313,"body_markdown":"I want to set the textSize value of the snippet below to a textSize of an XML file, how to achieve this?\r\n\r\n    holder.tvValue.setTextSize();\r\n\r\nin the xml it is like this:\r\n\r\n    &lt;TextView\r\n       android:id=&quot;@+id/tv_title&quot;\r\n       android:textSize=&quot;32sp&quot;\r\n       app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n       app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n","title":"how to get textSize value of a textview from XML and set it in code","body":"<p>I want to set the textSize value of the snippet below to a textSize of an XML file, how to achieve this?</p>\n<pre><code>holder.tvValue.setTextSize();\n</code></pre>\n<p>in the xml it is like this:</p>\n<pre><code>&lt;TextView\n   android:id=&quot;@+id/tv_title&quot;\n   android:textSize=&quot;32sp&quot;\n   app:layout_constraintStart_toStartOf=&quot;parent&quot;\n   app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662994221,"creation_date":1662994221,"answer_id":73691158,"question_id":73690868,"body_markdown":"Hibernate provides this through the Event Listener. The `EventType` is `INIT_COLLECTION` \r\n\r\nPlease read the documentation:\r\nhttps://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#bootstrap-event-listener-registration","title":"Listener for lazy-loading fields in JPA entity","body":"<p>Hibernate provides this through the Event Listener. The <code>EventType</code> is <code>INIT_COLLECTION</code></p>\n<p>Please read the documentation:\n<a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#bootstrap-event-listener-registration\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#bootstrap-event-listener-registration</a></p>\n"}],"owner":{"account_id":7313625,"reputation":6030,"user_id":5572007,"display_name":"amseager"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662994221,"creation_date":1662992817,"question_id":73690868,"body_markdown":"Is it possible to add a custom listener/hook which would be triggered after loading a lazy field of an entity (e.g. `@OneToMany` collection) where you can put your custom code?\r\n\r\nI can imagine something similar to `@PostLoad` annotation but which would be triggered later, at the 1st access to the lazy field.\r\n\r\nNo biggie if it&#39;s possible but without reference to the concrete field.","title":"Listener for lazy-loading fields in JPA entity","body":"<p>Is it possible to add a custom listener/hook which would be triggered after loading a lazy field of an entity (e.g. <code>@OneToMany</code> collection) where you can put your custom code?</p>\n<p>I can imagine something similar to <code>@PostLoad</code> annotation but which would be triggered later, at the 1st access to the lazy field.</p>\n<p>No biggie if it's possible but without reference to the concrete field.</p>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":3245347,"reputation":3398,"user_id":3887073,"accept_rate":75,"display_name":"Ben"},"score":0,"creation_date":1662995656,"post_id":73691090,"comment_id":130129508,"body_markdown":"Maybe you have to change from *Compile* to *Runtime* (in the settings from Image1)?","body":"Maybe you have to change from <i>Compile</i> to <i>Runtime</i> (in the settings from Image1)?"},{"owner":{"account_id":26314815,"reputation":1,"user_id":19977762,"display_name":"&#199;ağatay Ko&#231;"},"score":0,"creation_date":1663020283,"post_id":73691090,"comment_id":130136824,"body_markdown":"@Ben I have tried that. Didn&#39;t work. But I didn&#39;t try to add it twice, one for Runtime and  one for Compile. I&#39;ll try that tomorrow tho.","body":"@Ben I have tried that. Didn&#39;t work. But I didn&#39;t try to add it twice, one for Runtime and  one for Compile. I&#39;ll try that tomorrow tho."}],"owner":{"account_id":26314815,"reputation":1,"user_id":19977762,"display_name":"&#199;ağatay Ko&#231;"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662993931,"creation_date":1662993931,"question_id":73691090,"body_markdown":"It&#39;s been a while since I&#39;ve used java and somehow I can&#39;t import a jar correctly. I went to Project Structure&gt;Modules&gt;Main&gt;Dependencies&gt;JARs or Directories to add my jar file into the project. But somehow when im in the editor all the code is white (no red underlines), but when I try to run it, it says that the package can&#39;t be found. What could be the reasoning here? I&#39;ll provide some pictures to help. The classes do indeed exist and I can call methods from them within my code.\r\n\r\n[Image1][1]\r\n\r\n[Image2][2]\r\n\r\n[Image3][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3g3Vc.png\r\n  [2]: https://i.stack.imgur.com/Yo2kv.png\r\n  [3]: https://i.stack.imgur.com/jLzxh.png","title":"Java jar no errors in compiler but package does not exist when building","body":"<p>It's been a while since I've used java and somehow I can't import a jar correctly. I went to Project Structure&gt;Modules&gt;Main&gt;Dependencies&gt;JARs or Directories to add my jar file into the project. But somehow when im in the editor all the code is white (no red underlines), but when I try to run it, it says that the package can't be found. What could be the reasoning here? I'll provide some pictures to help. The classes do indeed exist and I can call methods from them within my code.</p>\n<p><a href=\"https://i.stack.imgur.com/3g3Vc.png\" rel=\"nofollow noreferrer\">Image1</a></p>\n<p><a href=\"https://i.stack.imgur.com/Yo2kv.png\" rel=\"nofollow noreferrer\">Image2</a></p>\n<p><a href=\"https://i.stack.imgur.com/jLzxh.png\" rel=\"nofollow noreferrer\">Image3</a></p>\n"},{"tags":["java","keras","deeplearning4j"],"comments":[{"owner":{"account_id":6647858,"reputation":3100,"user_id":5131255,"display_name":"Adam Gibson"},"score":0,"creation_date":1663041905,"post_id":73691082,"comment_id":130139823,"body_markdown":"Hi, I just want you to know I saw this on our forums already. You gave me a reproducer here I can use. Let me get back to you. Thanks!","body":"Hi, I just want you to know I saw this on our forums already. You gave me a reproducer here I can use. Let me get back to you. Thanks!"}],"owner":{"account_id":26313618,"reputation":11,"user_id":19976762,"display_name":"HayWhy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1662993911,"creation_date":1662993838,"question_id":73691082,"body_markdown":"I trained a model in Keras, this is my python code:\r\n\r\n    model = Sequential()\r\n    model.add(Embedding(50000, 128, input_length=10))\r\n    model.add(Conv1D(48, 5, activation=&#39;relu&#39;, padding=&#39;valid&#39;))\r\n    model.add(GlobalMaxPooling1D())\r\n    model.add(Dropout(0.5))\r\n    model.add(Flatten())\r\n    model.add(Dropout(0.5))\r\n\r\n    model.add(Dense(7, activation=&#39;softmax&#39;))\r\n    model.compile(loss=&#39;categorical_crossentropy&#39;, optimizer=&#39;adam&#39;, metrics=[&#39;accuracy&#39;])\r\n\r\n\r\nSo I import in DL4J and when I try to predict using the imported model:\r\n\r\n    val modelPath = File(&quot;C:/Users/Ayodele/Desktop/Development/classification.h5&quot;)\r\n    val model: MultiLayerNetwork = \r\n    KerasModelImport.importKerasSequentialModelAndWeights(modelPath.absolutePath)\r\n    val list = arrayOf(1,2,3,4,5,6,7,8,9,10)\r\n    val inputs = 10\r\n    val features = Nd4j.create(1,inputs)\r\n     for (i in 0 until inputs) {\r\n            features.putScalar(intArrayOf(i), list.get(i))\r\n        }\r\n        System.out.println(features)\r\n        val pred = model.predict(features) \r\n\r\n\r\nI get the following error:\r\n\r\n        Exception in thread &quot;main&quot; org.nd4j.linalg.exception.ND4JIllegalStateException: New \r\n        shape length doesn&#39;t match original length: [288] vs [48]. Original shape: [1, 48] \r\n        New Shape: [1, 288]\r\n        at org.nd4j.linalg.api.ndarray.BaseNDArray.reshape(BaseNDArray.java:3804)\r\n    \tat org.nd4j.linalg.api.ndarray.BaseNDArray.reshape(BaseNDArray.java:3749)\r\n    \tat org.nd4j.linalg.api.ndarray.BaseNDArray.reshape(BaseNDArray.java:3872)\r\n    \tat org.nd4j.linalg.api.ndarray.BaseNDArray.reshape(BaseNDArray.java:4099)\r\n    \tat \r\n    org.deeplearning4j.preprocessors.KerasFlattenRnnPreprocessor.preProcess(KerasFlattenRnnPreprocessor.java:49)\r\n    \tat org.deeplearning4j.nn.multilayer.MultiLayerNetwork.outputOfLayerDetached(MultiLayerNetwork.java:1299)\r\n    \tat org.deeplearning4j.nn.multilayer.MultiLayerNetwork.output(MultiLayerNetwork.java:2467)\r\n    \tat org.deeplearning4j.nn.multilayer.MultiLayerNetwork.output(MultiLayerNetwork.java:2430)\r\n    \tat org.deeplearning4j.nn.multilayer.MultiLayerNetwork.output(MultiLayerNetwork.java:2421)\r\n    \tat org.deeplearning4j.nn.multilayer.MultiLayerNetwork.output(MultiLayerNetwork.java:2408)\r\n    \tat org.deeplearning4j.nn.multilayer.MultiLayerNetwork.predict(MultiLayerNetwork.java:2270)\r\n\r\n\r\nI have combed the internet for any help, didn&#39;t find on. So I decided to post the problem here.\r\n\r\n\r\n\r\n","title":"Why is there shape error from imported Keras model in DL4J","body":"<p>I trained a model in Keras, this is my python code:</p>\n<pre><code>model = Sequential()\nmodel.add(Embedding(50000, 128, input_length=10))\nmodel.add(Conv1D(48, 5, activation='relu', padding='valid'))\nmodel.add(GlobalMaxPooling1D())\nmodel.add(Dropout(0.5))\nmodel.add(Flatten())\nmodel.add(Dropout(0.5))\n\nmodel.add(Dense(7, activation='softmax'))\nmodel.compile(loss='categorical_crossentropy', optimizer='adam', metrics=['accuracy'])\n</code></pre>\n<p>So I import in DL4J and when I try to predict using the imported model:</p>\n<pre><code>val modelPath = File(&quot;C:/Users/Ayodele/Desktop/Development/classification.h5&quot;)\nval model: MultiLayerNetwork = \nKerasModelImport.importKerasSequentialModelAndWeights(modelPath.absolutePath)\nval list = arrayOf(1,2,3,4,5,6,7,8,9,10)\nval inputs = 10\nval features = Nd4j.create(1,inputs)\n for (i in 0 until inputs) {\n        features.putScalar(intArrayOf(i), list.get(i))\n    }\n    System.out.println(features)\n    val pred = model.predict(features) \n</code></pre>\n<p>I get the following error:</p>\n<pre><code>    Exception in thread &quot;main&quot; org.nd4j.linalg.exception.ND4JIllegalStateException: New \n    shape length doesn't match original length: [288] vs [48]. Original shape: [1, 48] \n    New Shape: [1, 288]\n    at org.nd4j.linalg.api.ndarray.BaseNDArray.reshape(BaseNDArray.java:3804)\n    at org.nd4j.linalg.api.ndarray.BaseNDArray.reshape(BaseNDArray.java:3749)\n    at org.nd4j.linalg.api.ndarray.BaseNDArray.reshape(BaseNDArray.java:3872)\n    at org.nd4j.linalg.api.ndarray.BaseNDArray.reshape(BaseNDArray.java:4099)\n    at \norg.deeplearning4j.preprocessors.KerasFlattenRnnPreprocessor.preProcess(KerasFlattenRnnPreprocessor.java:49)\n    at org.deeplearning4j.nn.multilayer.MultiLayerNetwork.outputOfLayerDetached(MultiLayerNetwork.java:1299)\n    at org.deeplearning4j.nn.multilayer.MultiLayerNetwork.output(MultiLayerNetwork.java:2467)\n    at org.deeplearning4j.nn.multilayer.MultiLayerNetwork.output(MultiLayerNetwork.java:2430)\n    at org.deeplearning4j.nn.multilayer.MultiLayerNetwork.output(MultiLayerNetwork.java:2421)\n    at org.deeplearning4j.nn.multilayer.MultiLayerNetwork.output(MultiLayerNetwork.java:2408)\n    at org.deeplearning4j.nn.multilayer.MultiLayerNetwork.predict(MultiLayerNetwork.java:2270)\n</code></pre>\n<p>I have combed the internet for any help, didn't find on. So I decided to post the problem here.</p>\n"},{"tags":["java","spring-boot","spring-mvc","spring-data-jpa"],"comments":[{"owner":{"account_id":5879019,"reputation":1195,"user_id":4629025,"display_name":"Raushan Kumar"},"score":0,"creation_date":1662756657,"post_id":73667314,"comment_id":130087924,"body_markdown":"I think you need to use referencedColumnName when you giving @JoinColumn .\n\n@JoinColumn(name = &quot;user_id&quot;,referencedColumnName = &quot;id&quot;)","body":"I think you need to use referencedColumnName when you giving @JoinColumn .  @JoinColumn(name = &quot;user_id&quot;,referencedColumnName = &quot;id&quot;)"},{"owner":{"account_id":21674731,"reputation":35,"user_id":15991889,"display_name":"Steve Otieno"},"score":0,"creation_date":1662756906,"post_id":73667314,"comment_id":130087979,"body_markdown":"Is it mandatory? I thought this is normally optional.","body":"Is it mandatory? I thought this is normally optional."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1662783895,"post_id":73667314,"comment_id":130091273,"body_markdown":"How is the 415 connected? (Where is controller? Spring-data-rest?) Please try to make an [mre]","body":"How is the 415 connected? (Where is controller? Spring-data-rest?) Please try to make an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":21674731,"reputation":35,"user_id":15991889,"display_name":"Steve Otieno"},"score":0,"creation_date":1662793433,"post_id":73667314,"comment_id":130092360,"body_markdown":"Use this https://github.com/Java-Techie-jt/JPA-ManyToMany as MRE","body":"Use this <a href=\"https://github.com/Java-Techie-jt/JPA-ManyToMany\" rel=\"nofollow noreferrer\">github.com/Java-Techie-jt/JPA-ManyToMany</a> as MRE"}],"answers":[{"tags":[],"owner":{"account_id":21674731,"reputation":35,"user_id":15991889,"display_name":"Steve Otieno"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662993761,"creation_date":1662993065,"answer_id":73690920,"question_id":73667314,"body_markdown":"I found a permanent solution for this problem. For anyone else facing a similar problem, This is what I found. First, my entity classes had `@Data` Lombok annotation. I removed this because the `@Data` annotation has a tendency of almost always loading collections even if you have `FetchType.LAZY`. \r\n\r\nYou can read more about why you should&#39;t annotate your entity class with `@Data` here https://www.jpa-buddy.com/blog/lombok-and-jpa-what-may-go-wrong/\r\n\r\nAfter removing this annotation, I removed `@JsonManagedReference` and `@JsonBackReference` from both sides of the relationship(both entities). I then added `@Jsonignore` to the referencing side only(User class). This solves 2 things\r\n1. Creating a group with a list of users works fine\r\n2. Adding a list of users to a group works fine.\r\n\r\nAfter this, we are left with one last problem. When we try to read a user from the api, we get a user without the associated list of groups they belong to, because we have `@JsonIgnore` on the user list. To solve this, I made the controller return a new object. So after fetching the user from my service, I map it to a new data transfer object, the I return this object in the controller.\r\n\r\nFrom here I used `@JsonView` to filter my responses.\r\n\r\nThis is how my classes look, notice there is no `@Data` in annotations.\r\n\r\n**Group**\r\n```\r\n@Builder\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@ToString\r\n@Getter\r\n@Setter\r\n@Table(name = &quot;`group`&quot;) // &lt;- group is a reserved keyword in SQL\r\npublic class Group {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String name;\r\n    private Integer maximumMembers;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER,\r\n            cascade = {CascadeType.MERGE, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\r\n    @JoinTable(name = &quot;group_user&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;group_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n    @JsonView(UserViews.PublicUserDetails.class)\r\n    private Set&lt;User&gt; groupMembers = new HashSet&lt;&gt;();\r\n\r\n} \r\n```\r\n\r\n**User**\r\n```\r\n@Builder\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@ToString\r\n@Getter\r\n@Setter\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @JsonView(UserViews.PublicUserDetails.class)\r\n    private Long id;\r\n    @JsonView(UserViews.PublicUserDetails.class)\r\n    private String nickname;\r\n    @JsonView(UserViews.PublicUserDetails.class)\r\n    private String username; // &lt;- Unique user&#39;s phone number\r\n    private String password;\r\n\r\n    @ElementCollection(targetClass = ApplicationUserRole.class)\r\n    @CollectionTable(name = &quot;user_role&quot;, joinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;role&quot;)\r\n    @JsonView(UserViews.PublicUserDetails.class)\r\n    private Set&lt;ApplicationUserRole&gt; roles;\r\n\r\n    @JsonIgnore\r\n    @ManyToMany(mappedBy = &quot;groupMembers&quot;, fetch = FetchType.LAZY, targetEntity = Group.class)\r\n    private Set&lt;Group&gt; groups = new HashSet&lt;&gt;();\r\n}\r\n\r\n```\r\n\r\nMethod fetching user in user controller\r\n```\r\n@GetMapping(&quot;/get-groups&quot;)\r\n    public ResponseEntity&lt;UserRequestResponseDTO&gt; getWithGroups(@RequestParam(name = &quot;userId&quot;) Long userId) {\r\n        User user = userService.getWithGroups(userId);\r\n        UserRequestResponseDTO response = UserRequestResponseDTO.builder()\r\n                .nickname(user.getNickname())\r\n                .username(user.getUsername())\r\n                .groups(user.getGroups())\r\n                .build();\r\n        return ResponseEntity.ok().body(response);\r\n    }\r\n```\r\n\r\nHopefully this helps someone&#128129;","title":"I am unable to create entity or fetch list of entities due to stack overflow error on bi-directional @ManyToMany relationship SpringDataJPA","body":"<p>I found a permanent solution for this problem. For anyone else facing a similar problem, This is what I found. First, my entity classes had <code>@Data</code> Lombok annotation. I removed this because the <code>@Data</code> annotation has a tendency of almost always loading collections even if you have <code>FetchType.LAZY</code>.</p>\n<p>You can read more about why you should't annotate your entity class with <code>@Data</code> here <a href=\"https://www.jpa-buddy.com/blog/lombok-and-jpa-what-may-go-wrong/\" rel=\"nofollow noreferrer\">https://www.jpa-buddy.com/blog/lombok-and-jpa-what-may-go-wrong/</a></p>\n<p>After removing this annotation, I removed <code>@JsonManagedReference</code> and <code>@JsonBackReference</code> from both sides of the relationship(both entities). I then added <code>@Jsonignore</code> to the referencing side only(User class). This solves 2 things</p>\n<ol>\n<li>Creating a group with a list of users works fine</li>\n<li>Adding a list of users to a group works fine.</li>\n</ol>\n<p>After this, we are left with one last problem. When we try to read a user from the api, we get a user without the associated list of groups they belong to, because we have <code>@JsonIgnore</code> on the user list. To solve this, I made the controller return a new object. So after fetching the user from my service, I map it to a new data transfer object, the I return this object in the controller.</p>\n<p>From here I used <code>@JsonView</code> to filter my responses.</p>\n<p>This is how my classes look, notice there is no <code>@Data</code> in annotations.</p>\n<p><strong>Group</strong></p>\n<pre><code>@Builder\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\n@Getter\n@Setter\n@Table(name = &quot;`group`&quot;) // &lt;- group is a reserved keyword in SQL\npublic class Group {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String name;\n    private Integer maximumMembers;\n\n    @ManyToMany(fetch = FetchType.EAGER,\n            cascade = {CascadeType.MERGE, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    @JoinTable(name = &quot;group_user&quot;,\n            joinColumns = @JoinColumn(name = &quot;group_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\n    @JsonView(UserViews.PublicUserDetails.class)\n    private Set&lt;User&gt; groupMembers = new HashSet&lt;&gt;();\n\n} \n</code></pre>\n<p><strong>User</strong></p>\n<pre><code>@Builder\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@ToString\n@Getter\n@Setter\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @JsonView(UserViews.PublicUserDetails.class)\n    private Long id;\n    @JsonView(UserViews.PublicUserDetails.class)\n    private String nickname;\n    @JsonView(UserViews.PublicUserDetails.class)\n    private String username; // &lt;- Unique user's phone number\n    private String password;\n\n    @ElementCollection(targetClass = ApplicationUserRole.class)\n    @CollectionTable(name = &quot;user_role&quot;, joinColumns = @JoinColumn(name = &quot;user_id&quot;))\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;role&quot;)\n    @JsonView(UserViews.PublicUserDetails.class)\n    private Set&lt;ApplicationUserRole&gt; roles;\n\n    @JsonIgnore\n    @ManyToMany(mappedBy = &quot;groupMembers&quot;, fetch = FetchType.LAZY, targetEntity = Group.class)\n    private Set&lt;Group&gt; groups = new HashSet&lt;&gt;();\n}\n\n</code></pre>\n<p>Method fetching user in user controller</p>\n<pre><code>@GetMapping(&quot;/get-groups&quot;)\n    public ResponseEntity&lt;UserRequestResponseDTO&gt; getWithGroups(@RequestParam(name = &quot;userId&quot;) Long userId) {\n        User user = userService.getWithGroups(userId);\n        UserRequestResponseDTO response = UserRequestResponseDTO.builder()\n                .nickname(user.getNickname())\n                .username(user.getUsername())\n                .groups(user.getGroups())\n                .build();\n        return ResponseEntity.ok().body(response);\n    }\n</code></pre>\n<p>Hopefully this helps someone💁</p>\n"}],"owner":{"account_id":21674731,"reputation":35,"user_id":15991889,"display_name":"Steve Otieno"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73690920,"answer_count":1,"score":0,"last_activity_date":1662993761,"creation_date":1662756123,"question_id":73667314,"body_markdown":"I am working on a springboot application. I have 2 entity classes, Group and User. I also have @ManyToMany relationship defined in the Group class (Owning entity), and also in the User class, so that I can fetch all the groups a user belongs to. Unfortunately, I can&#39;t create a new group or a new user due to the following error;\r\n```\r\n{\r\n    &quot;timestamp&quot;: &quot;2022-09-09T20:29:22.606+00:00&quot;,\r\n    &quot;status&quot;: 415,\r\n    &quot;error&quot;: &quot;Unsupported Media Type&quot;,\r\n    &quot;message&quot;: &quot;Content type &#39;application/json;charset=UTF-8&#39; not supported&quot;\r\n}\r\n```\r\nWhen I try to fetch all groups a user belongs to by calling `user.get().getGroups();` I get a a stack overflow error\r\n\r\nNote: Currently I have @JsonManagedReference and @JsonBackReference in Group and User classes respectively. I also tried adding `@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)` on both classes, but this did not work either. Adding value parameter to @JsonManagedReference and @JsonBackReference as demonstrated below did not work either. What am I doing wrong? What am I missing?\r\n\r\nThis is my **Group** entity class\r\n```\r\n@Table(name = &quot;`group`&quot;) // &lt;- group is a reserved keyword in SQL\r\npublic class Group {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    @JsonView(Views.Public.class)\r\n    private String name;\r\n    private Integer maximumMembers;\r\n\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = {CascadeType.ALL})\r\n    @JoinTable(name = &quot;group_user&quot;, joinColumns = @JoinColumn(name = &quot;group_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n    @JsonView(Views.Public.class)\r\n    @JsonManagedReference(value = &quot;group-member&quot;)\r\n    private Set&lt;User&gt; groupMembers;\r\n}\r\n```\r\n\r\nThis is my **User** entity class\r\n```\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @JsonView(Views.Public.class)\r\n    private Long id;\r\n    @JsonView(Views.Public.class)\r\n    private String nickname;\r\n    @JsonView(Views.Public.class)\r\n    private String username; // &lt;- Unique user&#39;s phone number\r\n    private String password;\r\n\r\n    @ElementCollection(targetClass = ApplicationUserRole.class)\r\n    @CollectionTable(name = &quot;user_role&quot;, joinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(name = &quot;role&quot;)\r\n    private Set&lt;ApplicationUserRole&gt; roles;\r\n\r\n    @ManyToMany(mappedBy = &quot;groupMembers&quot;, fetch = FetchType.LAZY, targetEntity = Group.class)\r\n    @JsonBackReference(value = &quot;user-group&quot;)\r\n    private Set&lt;Group&gt; groups;\r\n}\r\n```\r\n\r\nMinimal, Reproducible Example https://github.com/Java-Techie-jt/JPA-ManyToMany","title":"I am unable to create entity or fetch list of entities due to stack overflow error on bi-directional @ManyToMany relationship SpringDataJPA","body":"<p>I am working on a springboot application. I have 2 entity classes, Group and User. I also have @ManyToMany relationship defined in the Group class (Owning entity), and also in the User class, so that I can fetch all the groups a user belongs to. Unfortunately, I can't create a new group or a new user due to the following error;</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2022-09-09T20:29:22.606+00:00&quot;,\n    &quot;status&quot;: 415,\n    &quot;error&quot;: &quot;Unsupported Media Type&quot;,\n    &quot;message&quot;: &quot;Content type 'application/json;charset=UTF-8' not supported&quot;\n}\n</code></pre>\n<p>When I try to fetch all groups a user belongs to by calling <code>user.get().getGroups();</code> I get a a stack overflow error</p>\n<p>Note: Currently I have @JsonManagedReference and @JsonBackReference in Group and User classes respectively. I also tried adding <code>@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)</code> on both classes, but this did not work either. Adding value parameter to @JsonManagedReference and @JsonBackReference as demonstrated below did not work either. What am I doing wrong? What am I missing?</p>\n<p>This is my <strong>Group</strong> entity class</p>\n<pre><code>@Table(name = &quot;`group`&quot;) // &lt;- group is a reserved keyword in SQL\npublic class Group {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    @JsonView(Views.Public.class)\n    private String name;\n    private Integer maximumMembers;\n\n    @ManyToMany(fetch = FetchType.LAZY, cascade = {CascadeType.ALL})\n    @JoinTable(name = &quot;group_user&quot;, joinColumns = @JoinColumn(name = &quot;group_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\n    @JsonView(Views.Public.class)\n    @JsonManagedReference(value = &quot;group-member&quot;)\n    private Set&lt;User&gt; groupMembers;\n}\n</code></pre>\n<p>This is my <strong>User</strong> entity class</p>\n<pre><code>public class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @JsonView(Views.Public.class)\n    private Long id;\n    @JsonView(Views.Public.class)\n    private String nickname;\n    @JsonView(Views.Public.class)\n    private String username; // &lt;- Unique user's phone number\n    private String password;\n\n    @ElementCollection(targetClass = ApplicationUserRole.class)\n    @CollectionTable(name = &quot;user_role&quot;, joinColumns = @JoinColumn(name = &quot;user_id&quot;))\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;role&quot;)\n    private Set&lt;ApplicationUserRole&gt; roles;\n\n    @ManyToMany(mappedBy = &quot;groupMembers&quot;, fetch = FetchType.LAZY, targetEntity = Group.class)\n    @JsonBackReference(value = &quot;user-group&quot;)\n    private Set&lt;Group&gt; groups;\n}\n</code></pre>\n<p>Minimal, Reproducible Example <a href=\"https://github.com/Java-Techie-jt/JPA-ManyToMany\" rel=\"nofollow noreferrer\">https://github.com/Java-Techie-jt/JPA-ManyToMany</a></p>\n"},{"tags":["java","carousel","instagram","instagram-api"],"comments":[{"owner":{"account_id":10154484,"reputation":804,"user_id":7499981,"accept_rate":70,"display_name":"coderwill"},"score":0,"creation_date":1495876230,"post_id":43572683,"comment_id":75441319,"body_markdown":"you can find with this key post[&quot;carousel_media&quot;] so on this key get foreach loop and take all the media. First you want to check post[&quot;type &quot;] = &quot;carousel&quot;","body":"you can find with this key post[&quot;carousel_media&quot;] so on this key get foreach loop and take all the media. First you want to check post[&quot;type &quot;] = &quot;carousel&quot;"}],"answers":[{"tags":[],"owner":{"account_id":4663452,"reputation":1108,"user_id":3777134,"display_name":"Jordi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1493391140,"creation_date":1493391140,"answer_id":43683106,"question_id":43572683,"body_markdown":"Since last Monday (April 24) we are receiving posts of type &quot;carousel&quot; containing the property &quot;carousel_media&quot; with all the carousel images. I really don&#39;t know if this is official or not, Instagram never document this things, it&#39;s a shame...\r\n\r\nCheck this question: https://stackoverflow.com/questions/42417842/null-jpg-being-returned-for-carousel-posts-via-instagram-api?s=2|2.2402","title":"Getting &quot;carousel&quot; posts via Instagram API","body":"<p>Since last Monday (April 24) we are receiving posts of type \"carousel\" containing the property \"carousel_media\" with all the carousel images. I really don't know if this is official or not, Instagram never document this things, it's a shame...</p>\n\n<p>Check this question: <a href=\"https://stackoverflow.com/questions/42417842/null-jpg-being-returned-for-carousel-posts-via-instagram-api?s=2|2.2402\">null.jpg being returned for carousel posts via Instagram API</a></p>\n"}],"owner":{"account_id":10749575,"reputation":11,"user_id":7909558,"display_name":"DeMurat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2193,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":43683106,"answer_count":1,"score":-2,"last_activity_date":1662993470,"creation_date":1492959530,"question_id":43572683,"body_markdown":"Having trouble with the new Instagram &quot;carousel&quot; feature. When using Instagram API for Java I get only the first image in the carousel and can`t get the rest of them. The type of media feed is &quot;image&quot; in this case. \r\n\r\nDoes anybody know if there is an appropriate way to work with these &quot;carousel&quot; objects? \r\n","title":"Getting &quot;carousel&quot; posts via Instagram API","body":"<p>Having trouble with the new Instagram \"carousel\" feature. When using Instagram API for Java I get only the first image in the carousel and can`t get the rest of them. The type of media feed is \"image\" in this case. </p>\n\n<p>Does anybody know if there is an appropriate way to work with these \"carousel\" objects? </p>\n"},{"tags":["java","testing","benchmarking","microbenchmark","jmh"],"answers":[{"tags":[],"owner":{"account_id":26314740,"reputation":1,"user_id":19977699,"display_name":"sosiuneg"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1662993155,"creation_date":1662993133,"answer_id":73690938,"question_id":71301016,"body_markdown":"We can set\r\n\r\n```java\r\n@Measurement(iterations = 100000000)\r\npublic void function() {\r\n    // ...\r\n}\r\n```\r\n\r\nto have the JMH execute your operation 100 million times.","title":"How can I run JMH benchmarking operations for Average runtime metrics?","body":"<p>We can set</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Measurement(iterations = 100000000)\npublic void function() {\n    // ...\n}\n</code></pre>\n<p>to have the JMH execute your operation 100 million times.</p>\n"}],"owner":{"account_id":1191863,"reputation":4884,"user_id":1164435,"accept_rate":64,"display_name":"P basak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662993155,"creation_date":1646082143,"question_id":71301016,"body_markdown":"I am trying to measure average runtime performance for particular methods. I want to run them 100 million times. With default options this is taking an eternity. What options I can enable or disable to achieve a faster execution time for the benchmark testing as a whole? I do not need warm up and other fine tuning. All I need is average time for 100 million operations.","title":"How can I run JMH benchmarking operations for Average runtime metrics?","body":"<p>I am trying to measure average runtime performance for particular methods. I want to run them 100 million times. With default options this is taking an eternity. What options I can enable or disable to achieve a faster execution time for the benchmark testing as a whole? I do not need warm up and other fine tuning. All I need is average time for 100 million operations.</p>\n"},{"tags":["java","spring-boot","versioning"],"comments":[{"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"score":0,"creation_date":1662993104,"post_id":73690884,"comment_id":130128502,"body_markdown":"Why not use a filter that performs the header check?","body":"Why not use a filter that performs the header check?"},{"owner":{"account_id":23359173,"reputation":13,"user_id":17431701,"display_name":"iRaven"},"score":0,"creation_date":1662993158,"post_id":73690884,"comment_id":130128530,"body_markdown":"But how would I know that the payload is in the version I want?","body":"But how would I know that the payload is in the version I want?"},{"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"score":0,"creation_date":1662993323,"post_id":73690884,"comment_id":130128586,"body_markdown":"You can check your header information and request in your filter.","body":"You can check your header information and request in your filter."},{"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"score":0,"creation_date":1662994032,"post_id":73690884,"comment_id":130128861,"body_markdown":"I checked the `unmarshallToVersion` method. You are not throwing any `UnrecognizedPropertyException` exceptions here. So it&#39;s perfectly normal that you&#39;re not getting an exception.","body":"I checked the <code>unmarshallToVersion</code> method. You are not throwing any <code>UnrecognizedPropertyException</code> exceptions here. So it&#39;s perfectly normal that you&#39;re not getting an exception."},{"owner":{"account_id":23359173,"reputation":13,"user_id":17431701,"display_name":"iRaven"},"score":0,"creation_date":1662995671,"post_id":73690884,"comment_id":130129513,"body_markdown":"Right. But how can I do this? I&#39;m also having this problem as I&#39;m using generics.","body":"Right. But how can I do this? I&#39;m also having this problem as I&#39;m using generics."},{"owner":{"account_id":23359173,"reputation":13,"user_id":17431701,"display_name":"iRaven"},"score":0,"creation_date":1662995689,"post_id":73690884,"comment_id":130129525,"body_markdown":"What I&#39;m trying to do here is to throw that conversion error: ```return (JsonApi&lt;T&gt;) mapper.readValue(inputStreamReader, new TypeReference&lt;JsonApi&lt;CenterDtoV1&gt;&gt;() {});```","body":"What I&#39;m trying to do here is to throw that conversion error: <code>return (JsonApi&lt;T&gt;) mapper.readValue(inputStreamReader, new TypeReference&lt;JsonApi&lt;CenterDtoV1&gt;&gt;() {});</code>"}],"owner":{"account_id":23359173,"reputation":13,"user_id":17431701,"display_name":"iRaven"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662992885,"creation_date":1662992885,"question_id":73690884,"body_markdown":"I have various versions on my API. So, for example, I have the accept header as center_1.1.\r\nWhen I pass this header with a previous version of the payload I would like to throw an exception, showing the user that the path is wrong. So, for example, for version center_1.0, the payload should be as follows:\r\n\r\n```\r\n{\r\n  &quot;data&quot;: {\r\n    &quot;city&quot;: &quot;Campinas&quot;,\r\n     ...\r\n  }\r\n}\r\n```\r\n\r\nAnd for payload of version center_1.1, should be: \r\n\r\n```\r\n{\r\n  &quot;data&quot;: {\r\n    &quot;route&quot;: &quot;Campinas&quot;,\r\n     ...\r\n  }\r\n}\r\n```\r\n\r\nWhen I send for example, the header as center_1.1 and the payload of version 1.0, I would like to give the user an error, showing that data.city path is wrong.\r\n\r\nI&#39;ve tried making this: \r\n\r\n```\r\n\r\n  public &lt;T extends ... &gt; void validateExpectedPayloadVersion(JsonApi&lt;T&gt; payload, String version)\r\n      throws IOException {\r\n\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    ObjectOutputStream oos = new ObjectOutputStream(baos);\r\n\r\n\r\n    oos.writeObject(payload);\r\n\r\n    oos.flush();\r\n    oos.close();\r\n\r\n    InputStream is = new ByteArrayInputStream(baos.toByteArray());\r\n\r\n    try (InputStreamReader streamReader = new InputStreamReader(is, StandardCharsets.UTF_8)) {\r\n      JsonApi&lt;T&gt; payloadRequest;\r\n      try {\r\n        payloadRequest= unmarshallToVersion(streamReader, version);\r\n      } catch (final UnrecognizedPropertyException e) {\r\n\r\n        final String offendingPath = StringUtils\r\n            .join(e.getPath().stream().map(JsonMappingException.Reference::getFieldName)\r\n                .collect(\r\n                    Collectors.toList()), &quot;.&quot;);\r\n\r\n        throw new InvalidException(offendingPath);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  private &lt;T extends ...&gt; JsonApi&lt;T&gt; unmarshallToVersion(final InputStreamReader inputStreamReader,\r\n      final String version)\r\n      throws IOException {\r\n\r\n    final ObjectMapper mapper = new ObjectMapper();\r\n    mapper.setSerializationInclusion(JsonInclude.Include.ALWAYS);\r\n    mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\r\n    mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n\r\n    switch (version) {\r\n      case &quot;center.1.0&quot;:\r\n        return (JsonApi&lt;T&gt;) mapper.readValue(inputStreamReader, new TypeReference&lt;JsonApi&lt;CenterDtoV0&gt;&gt;() {});\r\n      case &quot;center.1.1&quot;:\r\n      default:\r\n        return (JsonApi&lt;T&gt;) mapper.readValue(inputStreamReader, new TypeReference&lt;JsonApi&lt;CenterDtoV1&gt;&gt;() {});\r\n    }\r\n  }\r\n```\r\n\r\nBut this won&#39;t throw the desired exception (UnrecognizedPropertyException). ","title":"Validate payload against header Spring boot","body":"<p>I have various versions on my API. So, for example, I have the accept header as center_1.1.\nWhen I pass this header with a previous version of the payload I would like to throw an exception, showing the user that the path is wrong. So, for example, for version center_1.0, the payload should be as follows:</p>\n<pre><code>{\n  &quot;data&quot;: {\n    &quot;city&quot;: &quot;Campinas&quot;,\n     ...\n  }\n}\n</code></pre>\n<p>And for payload of version center_1.1, should be:</p>\n<pre><code>{\n  &quot;data&quot;: {\n    &quot;route&quot;: &quot;Campinas&quot;,\n     ...\n  }\n}\n</code></pre>\n<p>When I send for example, the header as center_1.1 and the payload of version 1.0, I would like to give the user an error, showing that data.city path is wrong.</p>\n<p>I've tried making this:</p>\n<pre><code>\n  public &lt;T extends ... &gt; void validateExpectedPayloadVersion(JsonApi&lt;T&gt; payload, String version)\n      throws IOException {\n\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    ObjectOutputStream oos = new ObjectOutputStream(baos);\n\n\n    oos.writeObject(payload);\n\n    oos.flush();\n    oos.close();\n\n    InputStream is = new ByteArrayInputStream(baos.toByteArray());\n\n    try (InputStreamReader streamReader = new InputStreamReader(is, StandardCharsets.UTF_8)) {\n      JsonApi&lt;T&gt; payloadRequest;\n      try {\n        payloadRequest= unmarshallToVersion(streamReader, version);\n      } catch (final UnrecognizedPropertyException e) {\n\n        final String offendingPath = StringUtils\n            .join(e.getPath().stream().map(JsonMappingException.Reference::getFieldName)\n                .collect(\n                    Collectors.toList()), &quot;.&quot;);\n\n        throw new InvalidException(offendingPath);\n      }\n    }\n\n  }\n\n  private &lt;T extends ...&gt; JsonApi&lt;T&gt; unmarshallToVersion(final InputStreamReader inputStreamReader,\n      final String version)\n      throws IOException {\n\n    final ObjectMapper mapper = new ObjectMapper();\n    mapper.setSerializationInclusion(JsonInclude.Include.ALWAYS);\n    mapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\n    mapper.enable(SerializationFeature.INDENT_OUTPUT);\n\n    switch (version) {\n      case &quot;center.1.0&quot;:\n        return (JsonApi&lt;T&gt;) mapper.readValue(inputStreamReader, new TypeReference&lt;JsonApi&lt;CenterDtoV0&gt;&gt;() {});\n      case &quot;center.1.1&quot;:\n      default:\n        return (JsonApi&lt;T&gt;) mapper.readValue(inputStreamReader, new TypeReference&lt;JsonApi&lt;CenterDtoV1&gt;&gt;() {});\n    }\n  }\n</code></pre>\n<p>But this won't throw the desired exception (UnrecognizedPropertyException).</p>\n"},{"tags":["java","string","algorithm","recursion"],"comments":[{"owner":{"account_id":3496566,"reputation":6513,"user_id":2924577,"accept_rate":92,"display_name":"Nikhil"},"score":2,"creation_date":1662963042,"post_id":73685057,"comment_id":130118557,"body_markdown":"How is the count 4 when `geugeu` has only two `eu`s. The code is working as expected.","body":"How is the count 4 when <code>geugeu</code> has only two <code>eu</code>s. The code is working as expected."},{"owner":{"account_id":21356370,"reputation":47,"user_id":15725257,"display_name":"ScubaDivingGoldFish"},"score":1,"creation_date":1662963130,"post_id":73685057,"comment_id":130118574,"body_markdown":"the extra eu was a mistake, my bad. But I need the code to count all characters, but the 4 special cases listed above need to count as one word. So &quot;geugeu&quot; needs to count as 4 characters in the string.","body":"the extra eu was a mistake, my bad. But I need the code to count all characters, but the 4 special cases listed above need to count as one word. So &quot;geugeu&quot; needs to count as 4 characters in the string."},{"owner":{"account_id":13832344,"reputation":1457,"user_id":9984846,"display_name":"Christian"},"score":0,"creation_date":1662963370,"post_id":73685057,"comment_id":130118634,"body_markdown":"Then you have to return &quot;2 + recursion...&quot;, as the string is two digits long.","body":"Then you have to return &quot;2 + recursion...&quot;, as the string is two digits long."},{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1662963411,"post_id":73685057,"comment_id":130118644,"body_markdown":"in that case use 2 + recursionCount(str.substring(1)); in your if block","body":"in that case use 2 + recursionCount(str.substring(1)); in your if block"}],"answers":[{"tags":[],"owner":{"account_id":3496566,"reputation":6513,"user_id":2924577,"accept_rate":92,"display_name":"Nikhil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662964319,"creation_date":1662964018,"answer_id":73685235,"question_id":73685057,"body_markdown":"OP wants to count all characters in a string but adjacent characters &quot;ae&quot;, &quot;oe&quot;, &quot;ue&quot;, and &quot;eu&quot; should be considered a single character and counted only once.\r\n\r\nBelow code does that:\r\n\r\n    public static int recursionCount(String str) {\r\n        int n;\r\n        n = str.length();\r\n        if(n &lt;= 1) {\r\n            return n; // return 1 if one character left or 0 if empty string.\r\n        }\r\n        else {\r\n            String ch = str.substring(0, 2);\r\n            if(ch.equals(&quot;ae&quot;) || ch.equals(&quot;oe&quot;) || ch.equals(&quot;ue&quot;) || ch.equals(&quot;eu&quot;)) {\r\n                // consider as one character and skip next character\r\n                return 1 + recursionCount(str.substring(2));\r\n            }\r\n            else {\r\n                // don&#39;t skip next character\r\n                return 1 + recursionCount(str.substring(1));\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Count the Characters in a String Recursively &amp; treat &quot;eu&quot; as a Single Character","body":"<p>OP wants to count all characters in a string but adjacent characters &quot;ae&quot;, &quot;oe&quot;, &quot;ue&quot;, and &quot;eu&quot; should be considered a single character and counted only once.</p>\n<p>Below code does that:</p>\n<pre><code>public static int recursionCount(String str) {\n    int n;\n    n = str.length();\n    if(n &lt;= 1) {\n        return n; // return 1 if one character left or 0 if empty string.\n    }\n    else {\n        String ch = str.substring(0, 2);\n        if(ch.equals(&quot;ae&quot;) || ch.equals(&quot;oe&quot;) || ch.equals(&quot;ue&quot;) || ch.equals(&quot;eu&quot;)) {\n            // consider as one character and skip next character\n            return 1 + recursionCount(str.substring(2));\n        }\n        else {\n            // don't skip next character\n            return 1 + recursionCount(str.substring(1));\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662990977,"creation_date":1662990977,"answer_id":73690478,"question_id":73685057,"body_markdown":"# Recursion explained\r\n\r\nIn order to address a particular task using **Recursion**, you need a firm understanding of how recursion works.\r\n\r\nAnd the first thing you need to keep in mind is that **every** *recursive solution* should (either explicitly or implicitly) contain two parts: *Base case* and *Recursive case*.\r\n\r\nLet&#39;s have a look at them closely:\r\n\r\n* **Base case** - a part that represents a simple edge-case (*or a set of edge-cases*), i.e. a situation in which recursion should terminate. The outcome for these edge-cases is known in advance. For this task, ***base case*** is when the given *string is empty*, and since there&#39;s nothing to count the *return value* should be `0`. That is sufficient for the algorithm to work, outcomes for other inputs should be derived from the *recursive case*.\r\n\r\n* **Recursive case** - is the part of the method where recursive calls are made and where the main logic resides. Every recursive call eventually hits the *base case* and stars building its return value.\r\n\r\nIn the recursive case, we need to check whether the given string starts from a particular string like `&quot;eu&quot;`. And for that we don&#39;t need to generate a substring (keep in mind that object creation is costful). instead we can use method [`String.startsWith()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#startsWith(java.lang.String)) which checks if the bytes of the provided prefix string match the bytes at the beginning of this string which is chipper (*reminder: starting from Java 9* `String` *is backed by an array of bytes, and each character is represented either with one or two bytes depending on the character encoding*) and we also don&#39;t bother about the length of the string because if the string is shorter than the prefix `startsWith()` will return `false`.\r\n\r\n# Implementation\r\n\r\nThat said, here&#39;s how an implementation might look:\r\n\r\n    public static int recursionCount(String str) {\r\n        if(str.isEmpty()) {\r\n            return 0;\r\n        }\r\n\r\n        return str.startsWith(&quot;eu&quot;) ?\r\n            1 + recursionCount(str.substring(2)) : 1 + recursionCount(str.substring(1));\r\n    }\r\n\r\n**Note:** that besides from being able to implement a solution, you also need to evaluate it&#39;s *Time* and *Space complexity*.\r\n\r\nIn this case because we are creating a new string with every call time complexity is quadratic **O(n^2)** (*reminder: creation of the new string requires allocating the memory to coping bytes of the original string*). And worse case space complexity also would be **O(n^2)**.\r\n\r\nThere&#39;s a way of solving this problem *recursively* in a linear time **O(n)** without generating a new string at every call. For that we need to introduce the second argument - *current index*, and each *recursive call* should advance this index either by `1` or by `2` (*I&#39;m not going to implement this solution and living it for OP/reader as an exercise*).\r\n\r\n# In addition\r\n\r\nIn addition, here&#39;s a concise and simple **non-recursive** solution using [`String.replace()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)):\r\n\r\n    public static int count(String str) {\r\n        \r\n        return str.replace(&quot;eu&quot;, &quot;_&quot;).length();\r\n    }\r\n\r\nIf you would need handle multiple combination of character (which were listed in the first version of the question) you can make use of the regular expressions with [`String.replaceAll()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String)):\r\n\r\n    public static int count(String str) {\r\n        \r\n        return str.replaceAll(&quot;ue|au|oe|eu&quot;, &quot;_&quot;).length();\r\n    }","title":"Count the Characters in a String Recursively &amp; treat &quot;eu&quot; as a Single Character","body":"<h1>Recursion explained</h1>\n<p>In order to address a particular task using <strong>Recursion</strong>, you need a firm understanding of how recursion works.</p>\n<p>And the first thing you need to keep in mind is that <strong>every</strong> <em>recursive solution</em> should (either explicitly or implicitly) contain two parts: <em>Base case</em> and <em>Recursive case</em>.</p>\n<p>Let's have a look at them closely:</p>\n<ul>\n<li><p><strong>Base case</strong> - a part that represents a simple edge-case (<em>or a set of edge-cases</em>), i.e. a situation in which recursion should terminate. The outcome for these edge-cases is known in advance. For this task, <em><strong>base case</strong></em> is when the given <em>string is empty</em>, and since there's nothing to count the <em>return value</em> should be <code>0</code>. That is sufficient for the algorithm to work, outcomes for other inputs should be derived from the <em>recursive case</em>.</p>\n</li>\n<li><p><strong>Recursive case</strong> - is the part of the method where recursive calls are made and where the main logic resides. Every recursive call eventually hits the <em>base case</em> and stars building its return value.</p>\n</li>\n</ul>\n<p>In the recursive case, we need to check whether the given string starts from a particular string like <code>&quot;eu&quot;</code>. And for that we don't need to generate a substring (keep in mind that object creation is costful). instead we can use method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#startsWith(java.lang.String)\" rel=\"nofollow noreferrer\"><code>String.startsWith()</code></a> which checks if the bytes of the provided prefix string match the bytes at the beginning of this string which is chipper (<em>reminder: starting from Java 9</em> <code>String</code> <em>is backed by an array of bytes, and each character is represented either with one or two bytes depending on the character encoding</em>) and we also don't bother about the length of the string because if the string is shorter than the prefix <code>startsWith()</code> will return <code>false</code>.</p>\n<h1>Implementation</h1>\n<p>That said, here's how an implementation might look:</p>\n<pre><code>public static int recursionCount(String str) {\n    if(str.isEmpty()) {\n        return 0;\n    }\n\n    return str.startsWith(&quot;eu&quot;) ?\n        1 + recursionCount(str.substring(2)) : 1 + recursionCount(str.substring(1));\n}\n</code></pre>\n<p><strong>Note:</strong> that besides from being able to implement a solution, you also need to evaluate it's <em>Time</em> and <em>Space complexity</em>.</p>\n<p>In this case because we are creating a new string with every call time complexity is quadratic <strong>O(n^2)</strong> (<em>reminder: creation of the new string requires allocating the memory to coping bytes of the original string</em>). And worse case space complexity also would be <strong>O(n^2)</strong>.</p>\n<p>There's a way of solving this problem <em>recursively</em> in a linear time <strong>O(n)</strong> without generating a new string at every call. For that we need to introduce the second argument - <em>current index</em>, and each <em>recursive call</em> should advance this index either by <code>1</code> or by <code>2</code> (<em>I'm not going to implement this solution and living it for OP/reader as an exercise</em>).</p>\n<h1>In addition</h1>\n<p>In addition, here's a concise and simple <strong>non-recursive</strong> solution using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)\" rel=\"nofollow noreferrer\"><code>String.replace()</code></a>:</p>\n<pre><code>public static int count(String str) {\n    \n    return str.replace(&quot;eu&quot;, &quot;_&quot;).length();\n}\n</code></pre>\n<p>If you would need handle multiple combination of character (which were listed in the first version of the question) you can make use of the regular expressions with <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\"><code>String.replaceAll()</code></a>:</p>\n<pre><code>public static int count(String str) {\n    \n    return str.replaceAll(&quot;ue|au|oe|eu&quot;, &quot;_&quot;).length();\n}\n</code></pre>\n"}],"owner":{"account_id":21356370,"reputation":47,"user_id":15725257,"display_name":"ScubaDivingGoldFish"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73685235,"answer_count":2,"score":3,"last_activity_date":1662992876,"creation_date":1662962553,"question_id":73685057,"body_markdown":"I am new to Java, and I&#39;m trying to figure out how to count Characters  in the given string and threat a combination of *two characters* `&quot;eu&quot;` as a **single character**, and still count all other characters as one character. \r\n\r\nAnd I want to do that using recursion.\r\n\r\nConsider the following example.\r\n\r\n*Input:*\r\n\r\n```\r\n&quot;geugeu&quot;\r\n```\r\n\r\n*Desired output:*\r\n\r\n```\r\n4   // g + eu + g + eu = 4\r\n```\r\n\r\n*Current output:*\r\n\r\n```\r\n2\r\n```\r\nI&#39;ve been trying a lot and still can&#39;t seem to figure out how to implement it correctly.\r\n\r\n*My code:*\r\n\r\n    public static int recursionCount(String str) {\r\n        if (str.length() == 1) {\r\n            return 0;   \r\n        }\r\n        else {\r\n            String ch = str.substring(0, 2);\r\n            if (ch.equals(&quot;eu&quot;) {\r\n                return 1 + recursionCount(str.substring(1));\r\n            }\r\n            else {\r\n                return recursionCount(str.substring(1));\r\n            }\r\n        }\r\n    }","title":"Count the Characters in a String Recursively &amp; treat &quot;eu&quot; as a Single Character","body":"<p>I am new to Java, and I'm trying to figure out how to count Characters  in the given string and threat a combination of <em>two characters</em> <code>&quot;eu&quot;</code> as a <strong>single character</strong>, and still count all other characters as one character.</p>\n<p>And I want to do that using recursion.</p>\n<p>Consider the following example.</p>\n<p><em>Input:</em></p>\n<pre><code>&quot;geugeu&quot;\n</code></pre>\n<p><em>Desired output:</em></p>\n<pre><code>4   // g + eu + g + eu = 4\n</code></pre>\n<p><em>Current output:</em></p>\n<pre><code>2\n</code></pre>\n<p>I've been trying a lot and still can't seem to figure out how to implement it correctly.</p>\n<p><em>My code:</em></p>\n<pre><code>public static int recursionCount(String str) {\n    if (str.length() == 1) {\n        return 0;   \n    }\n    else {\n        String ch = str.substring(0, 2);\n        if (ch.equals(&quot;eu&quot;) {\n            return 1 + recursionCount(str.substring(1));\n        }\n        else {\n            return recursionCount(str.substring(1));\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","gradle","fatjar"],"comments":[{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":0,"creation_date":1662986083,"post_id":73688812,"comment_id":130125682,"body_markdown":"this is a warning, not an error","body":"this is a warning, not an error"}],"answers":[{"tags":[],"owner":{"account_id":7091735,"reputation":2510,"user_id":5426703,"display_name":"Spyros K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662992790,"creation_date":1662983602,"answer_id":73688889,"question_id":73688812,"body_markdown":"The messages inform you that some properties are deprecated and will be removed in the version `7.0`. If you want to remove the message warnings and be compatible with `gradle 7.0` you need to replace `version` with `archiveVersion` and `name` with `archiveBaseName`. These messages should be just warnings, not errors. This means that these message warnings do not prevent the project from building. If you cannot build your project then most probably there is a different cause.\r\n\r\nThis should remove the warnings:\r\n\r\n    task fatJar(type: Jar) {\r\n        manifest {\r\n            attributes &#39;Implementation-Title&#39;: &#39;Gradle Jar File Example&#39;,  \r\n                &#39;Implementation-Version&#39;: archiveVersion ,\r\n                &#39;Main-Class&#39;: &#39;com.cekpremi.example&#39;\r\n        }\r\n        archiveBaseName = project.name + &#39;-all&#39;\r\n        from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }\r\n        with jar\r\n    }","title":"How to make jar use gradle?","body":"<p>The messages inform you that some properties are deprecated and will be removed in the version <code>7.0</code>. If you want to remove the message warnings and be compatible with <code>gradle 7.0</code> you need to replace <code>version</code> with <code>archiveVersion</code> and <code>name</code> with <code>archiveBaseName</code>. These messages should be just warnings, not errors. This means that these message warnings do not prevent the project from building. If you cannot build your project then most probably there is a different cause.</p>\n<p>This should remove the warnings:</p>\n<pre><code>task fatJar(type: Jar) {\n    manifest {\n        attributes 'Implementation-Title': 'Gradle Jar File Example',  \n            'Implementation-Version': archiveVersion ,\n            'Main-Class': 'com.cekpremi.example'\n    }\n    archiveBaseName = project.name + '-all'\n    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }\n    with jar\n}\n</code></pre>\n"}],"owner":{"account_id":24210186,"reputation":21,"user_id":18166824,"display_name":"jujol"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":514,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662992790,"creation_date":1662983281,"question_id":73688812,"body_markdown":"I use version Gradle 6.8.3\r\n\r\nI want to use gradle clean build, but I have cannot make fatJar use gradle.\r\n\r\nHere is my task for fatJar\r\n\r\n    task fatJar(type: Jar) {\r\n        manifest {\r\n            attributes &#39;Implementation-Title&#39;: &#39;Gradle Jar File Example&#39;,  \r\n                &#39;Implementation-Version&#39;: version,\r\n                &#39;Main-Class&#39;: &#39;com.cekpremi.example&#39;\r\n        }\r\n        baseName = project.name + &#39;-all&#39;\r\n        from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }\r\n        with jar\r\n    }\r\n\r\nand here is my error:\r\n\r\n&gt; Configure project : The AbstractArchiveTask.version property has been\r\n&gt; deprecated. This is scheduled to be removed in Gradle 7.0. Please use\r\n&gt; the archiveVersion property instead. See\r\n&gt; https://docs.gradle.org/6.8.3/dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html#org.gradle.api.tasks.bundling.AbstractArchiveTask:version\r\n&gt; for more details.\r\n&gt;             at build_ctf8avxcswmp4us7papf7uvsh$_run_closure3$_closure9.doCall(C:\\Users\\LTP-20090289\\IdeaProjects\\belajarspringboot\\build.gradle:32)\r\n&gt;             (Run with --stacktrace to get the full stack trace of this deprecation warning.)\r\n&gt;     The AbstractArchiveTask.baseName property has been deprecated. This is scheduled to be removed in Gradle 7.0. Please use the\r\n&gt; archiveBaseName property instead. See\r\n&gt; https://docs.gradle.org/6.8.3/dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html#org.gradle.api.tasks.bundling.AbstractArchiveTask:baseName\r\n&gt; for more details.\r\n&gt;             at build_ctf8avxcswmp4us7papf7uvsh$_run_closure3.doCall(C:\\Users\\LTP-20090289\\IdeaProjects\\belajarspringboot\\build.gradle:36)\r\n&gt;             (Run with --stacktrace to get the full stack trace of this deprecation warning.)\r\n\r\nMy question is how to make fatJar use gradle 6.8.3?","title":"How to make jar use gradle?","body":"<p>I use version Gradle 6.8.3</p>\n<p>I want to use gradle clean build, but I have cannot make fatJar use gradle.</p>\n<p>Here is my task for fatJar</p>\n<pre><code>task fatJar(type: Jar) {\n    manifest {\n        attributes 'Implementation-Title': 'Gradle Jar File Example',  \n            'Implementation-Version': version,\n            'Main-Class': 'com.cekpremi.example'\n    }\n    baseName = project.name + '-all'\n    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }\n    with jar\n}\n</code></pre>\n<p>and here is my error:</p>\n<blockquote>\n<p>Configure project : The AbstractArchiveTask.version property has been\ndeprecated. This is scheduled to be removed in Gradle 7.0. Please use\nthe archiveVersion property instead. See\n<a href=\"https://docs.gradle.org/6.8.3/dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html#org.gradle.api.tasks.bundling.AbstractArchiveTask:version\" rel=\"nofollow noreferrer\">https://docs.gradle.org/6.8.3/dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html#org.gradle.api.tasks.bundling.AbstractArchiveTask:version</a>\nfor more details.\nat build_ctf8avxcswmp4us7papf7uvsh$_run_closure3$_closure9.doCall(C:\\Users\\LTP-20090289\\IdeaProjects\\belajarspringboot\\build.gradle:32)\n(Run with --stacktrace to get the full stack trace of this deprecation warning.)\nThe AbstractArchiveTask.baseName property has been deprecated. This is scheduled to be removed in Gradle 7.0. Please use the\narchiveBaseName property instead. See\n<a href=\"https://docs.gradle.org/6.8.3/dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html#org.gradle.api.tasks.bundling.AbstractArchiveTask:baseName\" rel=\"nofollow noreferrer\">https://docs.gradle.org/6.8.3/dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html#org.gradle.api.tasks.bundling.AbstractArchiveTask:baseName</a>\nfor more details.\nat build_ctf8avxcswmp4us7papf7uvsh$_run_closure3.doCall(C:\\Users\\LTP-20090289\\IdeaProjects\\belajarspringboot\\build.gradle:36)\n(Run with --stacktrace to get the full stack trace of this deprecation warning.)</p>\n</blockquote>\n<p>My question is how to make fatJar use gradle 6.8.3?</p>\n"},{"tags":["java","matlab","sockets","udp"],"comments":[{"owner":{"account_id":4942098,"reputation":28127,"user_id":3978545,"accept_rate":100,"display_name":"Wolfie"},"score":0,"creation_date":1662979435,"post_id":73687043,"comment_id":130123308,"body_markdown":"Which version of MATLAB is the &quot;pretty old version&quot;","body":"Which version of MATLAB is the &quot;pretty old version&quot;"},{"owner":{"account_id":2242992,"reputation":496,"user_id":1977050,"accept_rate":25,"display_name":"user1977050"},"score":0,"creation_date":1662979541,"post_id":73687043,"comment_id":130123339,"body_markdown":"@Wolfie - R14SP3","body":"@Wolfie - R14SP3"}],"owner":{"account_id":2242992,"reputation":496,"user_id":1977050,"accept_rate":25,"display_name":"user1977050"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662992694,"creation_date":1662974493,"question_id":73687043,"body_markdown":"Unfortunately I&#39;m using pretty old Matlab version (R14SP3 from 2005). I&#39;d like to read some UDP packets and analyse them. \r\nAs this version of Matlab doesn&#39;t contains a package to handle the IP, but it contains Java, I&#39;m trying to use Java to receive the data. \r\n\r\nI see that there is socket opening (with netstat/tcpview), I see in wireshark that there is a traffic, but I don&#39;t receive it:\r\n\r\n```\r\nsocket = DatagramSocket(1900);\r\nsocket.setSoTimeout(10e3);\r\nsocket.setReuseAddress(1);\r\npacket = DatagramPacket(zeros(1,packetLength,&#39;int8&#39;),packetLength);        \r\nsocket.receive(packet); %&lt;=here I&#39;m waiting 10 seconds while there is active traffic on udp port 1900\r\n```","title":"Matlab R14SP3 - receiving UDP packet","body":"<p>Unfortunately I'm using pretty old Matlab version (R14SP3 from 2005). I'd like to read some UDP packets and analyse them.\nAs this version of Matlab doesn't contains a package to handle the IP, but it contains Java, I'm trying to use Java to receive the data.</p>\n<p>I see that there is socket opening (with netstat/tcpview), I see in wireshark that there is a traffic, but I don't receive it:</p>\n<pre><code>socket = DatagramSocket(1900);\nsocket.setSoTimeout(10e3);\nsocket.setReuseAddress(1);\npacket = DatagramPacket(zeros(1,packetLength,'int8'),packetLength);        \nsocket.receive(packet); %&lt;=here I'm waiting 10 seconds while there is active traffic on udp port 1900\n</code></pre>\n"},{"tags":["java","swing","layout","awt","jscrollpane"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1662990195,"post_id":73687515,"comment_id":130127312,"body_markdown":"You need additional scroll panes for each row you add.","body":"You need additional scroll panes for each row you add."}],"answers":[{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662987484,"creation_date":1662979555,"answer_id":73688048,"question_id":73687515,"body_markdown":"A JScrollPane must have a JViewport assigned using the jscrollpane method **setViewportView**. You should also give it a scrollbar policy\r\nsetVerticalScrollBarPolicy\r\nsetHorizontalScrollBarPolicy\r\nThe policy *int* is part of the class for the two previous methods and are called &quot;constant field values&quot; , see the API doc for JScrollPane.\r\nTo expand the JScrollPane out, put it in a *JPanel with a BorderLayout* and NO OTHER elements in that particular panel with the JScrollPane.\r\nUse on the JPanel, the methods setMinimumSize and setPreferredSize and setSize or a BoxLayout in the main window(although i think main windows have a special layout so a boxlayout would not be required if so) or higher level panel in the stack, or just setPreferredSize for the JScrollPane.\r\nA jscrollpane has a view set by its &quot;**setView**&quot; method , its view is a java.awt.Component note: a **JComponent is a** java.awt.Component, any javax swing J panel or J viewport is a java.awt.Component by hierarchy. NOTE a jviewport is a java.awt.Component\r\nso get a jscrollpane.setViewportView\r\nadd the jviewport reference jviewport.setView as the JPanel with the BorderLayout , add another panel to start adding other components, but remember to give all Jcomponents a .preferredSize method use.\r\nIf you are after javax.swing.JList&amp;lt;E&amp;gt; and javax.swing.DefaultListModel&amp;lt;E&amp;gt;\r\nThe JList must be placed in a JPanel with a BorderLayout , or much more difficult system  a java.awt.GridBagLayout then in a jscrollpane.","title":"Horizontal JScrollPane inside vertical JScrollPane","body":"<p>A JScrollPane must have a JViewport assigned using the jscrollpane method <strong>setViewportView</strong>. You should also give it a scrollbar policy\nsetVerticalScrollBarPolicy\nsetHorizontalScrollBarPolicy\nThe policy <em>int</em> is part of the class for the two previous methods and are called &quot;constant field values&quot; , see the API doc for JScrollPane.\nTo expand the JScrollPane out, put it in a <em>JPanel with a BorderLayout</em> and NO OTHER elements in that particular panel with the JScrollPane.\nUse on the JPanel, the methods setMinimumSize and setPreferredSize and setSize or a BoxLayout in the main window(although i think main windows have a special layout so a boxlayout would not be required if so) or higher level panel in the stack, or just setPreferredSize for the JScrollPane.\nA jscrollpane has a view set by its &quot;<strong>setView</strong>&quot; method , its view is a java.awt.Component note: a <strong>JComponent is a</strong> java.awt.Component, any javax swing J panel or J viewport is a java.awt.Component by hierarchy. NOTE a jviewport is a java.awt.Component\nso get a jscrollpane.setViewportView\nadd the jviewport reference jviewport.setView as the JPanel with the BorderLayout , add another panel to start adding other components, but remember to give all Jcomponents a .preferredSize method use.\nIf you are after javax.swing.JList&lt;E&gt; and javax.swing.DefaultListModel&lt;E&gt;\nThe JList must be placed in a JPanel with a BorderLayout , or much more difficult system  a java.awt.GridBagLayout then in a jscrollpane.</p>\n"},{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662981515,"creation_date":1662981515,"answer_id":73688456,"question_id":73687515,"body_markdown":"You can do the horizontal and vertical scrolling with only one JScrollPane. But what you need is an underlying JComponent that renders your content. This however can be a JPanel that stretches as far as you need.\r\n\r\nHave a look at [How to use ScrollPanes][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html","title":"Horizontal JScrollPane inside vertical JScrollPane","body":"<p>You can do the horizontal and vertical scrolling with only one JScrollPane. But what you need is an underlying JComponent that renders your content. This however can be a JPanel that stretches as far as you need.</p>\n<p>Have a look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\" rel=\"nofollow noreferrer\">How to use ScrollPanes</a>.</p>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662992641,"creation_date":1662992641,"answer_id":73690829,"question_id":73687515,"body_markdown":"A scrolling area inside another scrolling area is a user interface antipattern (anti-design?).  It should be avoided.\r\n\r\nI would create a scrollable panel based on a vertical BoxLayout:\r\n\r\n    public class WindowAddCameras extends JFrame {\r\n        private static final long serialVersionUID = 1;\r\n\r\n        public static final List&lt;JPanel&gt; labels = new ArrayList&lt;JPanel&gt;();\r\n\r\n        private static class CameraListPanel\r\n        extends JPanel\r\n        implements Scrollable {\r\n            private static final long serialVersionUID = 1;\r\n\r\n            CameraListPanel() {\r\n                setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\r\n            }\r\n\r\n            @Override\r\n            public Dimension getPreferredScrollableViewportSize() {\r\n                return getPreferredSize();\r\n            }\r\n\r\n            @Override\r\n            public boolean getScrollableTracksViewportWidth() {\r\n                return true;\r\n            }\r\n\r\n            @Override\r\n            public boolean getScrollableTracksViewportHeight() {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public int getScrollableUnitIncrement(Rectangle visibleRect,\r\n                                                  int orientation,\r\n                                                  int direction) {\r\n                return getScrollableIncrement(30,\r\n                    visibleRect, orientation, direction);\r\n            }\r\n\r\n            @Override\r\n            public int getScrollableBlockIncrement(Rectangle visibleRect,\r\n                                                   int orientation,\r\n                                                   int direction) {\r\n                return getScrollableIncrement(\r\n                    orientation == SwingConstants.HORIZONTAL ?\r\n                        getWidth() : getHeight(),\r\n                    visibleRect, orientation, direction);\r\n            }\r\n\r\n            private int getScrollableIncrement(int amount,\r\n                                               Rectangle visibleRect,\r\n                                               int orientation,\r\n                                               int direction) {\r\n                if (orientation == SwingConstants.HORIZONTAL) {\r\n                    return Math.min(amount, direction &lt; 0 ? visibleRect.x :\r\n                        getWidth() - (visibleRect.x + visibleRect.width));\r\n                } else {\r\n                    return Math.min(amount, direction &lt; 0 ? visibleRect.y :\r\n                        getHeight() - (visibleRect.y + visibleRect.height));\r\n                }\r\n            }\r\n        }\r\n     \r\n        public WindowAddCameras() {\r\n            super(&quot;Добавить камеру&quot;);\r\n     \r\n            this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n     \r\n            JPanel panelButton = new JPanel();\r\n     \r\n            JButton addButton = new JButton(&quot;+&quot;);\r\n            addButton.setFocusable(false);\r\n            panelButton.add(addButton);\r\n     \r\n            JButton remButton = new JButton(&quot;-&quot;);\r\n            remButton.setFocusable(false);\r\n            panelButton.add(remButton);\r\n\r\n            JPanel camerasPanel = new CameraListPanel();\r\n            JScrollPane scrollPaneGroupEvent = new JScrollPane(camerasPanel);\r\n     \r\n            addButton.addActionListener(new ActionListener() {\r\n                public void actionPerformed(ActionEvent e) {\r\n                    int number = labels.size() + 1;\r\n                    EventAdd eventAdd = new EventAdd();\r\n                    Dimension labelSize = new Dimension(80, 80);\r\n     \r\n                    //add event to group event\r\n                    Random rand = new Random();\r\n                    for(int a = 0; a &lt; 20; a++) {\r\n                        //random color border event for TEST\r\n                        Color randomColor = new Color(rand.nextFloat(), rand.nextFloat(), rand.nextFloat());\r\n                        eventAdd.createEventLabel(&quot;Камера &quot; + number, labelSize, randomColor);\r\n                    }\r\n     \r\n                    labels.add(eventAdd);\r\n                    camerasPanel.add(eventAdd);\r\n                    scrollPaneGroupEvent.revalidate();\r\n                }\r\n            });\r\n     \r\n            remButton.addActionListener(new ActionListener() {\r\n                public void actionPerformed(ActionEvent e) {\r\n                    if(labels.size() &gt; 0) {\r\n                        int index = labels.size() - 1;\r\n                        JPanel panel = labels.remove(index);\r\n                        camerasPanel.remove(panel);\r\n                        camerasPanel.repaint();\r\n                        scrollPaneGroupEvent.revalidate();\r\n                    }\r\n                }\r\n            });\r\n     \r\n            this.getContentPane().setLayout(new BorderLayout());\r\n            this.getContentPane().add(panelButton, BorderLayout.NORTH);\r\n            this.getContentPane().add(scrollPaneGroupEvent, BorderLayout.CENTER);\r\n     \r\n            this.setPreferredSize(new Dimension(600, 400));\r\n            this.pack();\r\n            this.setLocationRelativeTo(null);\r\n            this.setVisible(true);\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            EventQueue.invokeLater(() -&gt; new WindowAddCameras());\r\n        }\r\n    }\r\n\r\n\r\nThe CameraListPanel class is mostly a basic scrollable panel;  the important part is that `getScrollableTracksViewportWidth()` returns true, which will cause the panel’s width to match the width of any JScrollPane viewport.  This eliminates any need for a horizontal scrollbar.\r\n\r\nOf course, you will want to show all of your child components somehow.  To do that, I would have the EventAdd class compute a height that can accommodate all of the children:\r\n\r\n    public class EventAdd extends JPanel {\r\n        private static final long serialVersionUID = 1;\r\n\r\n        private final FlowLayout layout;\r\n\r\n        public EventAdd() {\r\n            layout = new FlowLayout(FlowLayout.LEFT);\r\n            setLayout(layout);\r\n        }\r\n\r\n        @Override\r\n        public Dimension getPreferredSize() {\r\n            Rectangle childSize = new Rectangle();\r\n            Component[] children = getComponents();\r\n            for (Component child : children) {\r\n                childSize.add(new Rectangle(child.getPreferredSize()));\r\n            }\r\n\r\n            Insets insets = getInsets();\r\n\r\n            int hgap = layout.getHgap();\r\n            int vgap = layout.getVgap();\r\n            int childWidth = childSize.width + hgap;\r\n\r\n            Dimension size;\r\n            if (getParent() == null) {\r\n                size = new Dimension(\r\n                    children.length * (childWidth * hgap) + hgap,\r\n                    childSize.height + vgap * 2);\r\n            } else {\r\n                int width = getParent().getWidth();\r\n                width -= insets.left + insets.right;\r\n                int childrenPerRow =\r\n                    childWidth == 0 ? 0 : (width - hgap) / childWidth;\r\n\r\n                int rows;\r\n                if (childrenPerRow == 0) {\r\n                    rows = 0;\r\n                } else {\r\n                    rows = children.length / childrenPerRow;\r\n                    if (children.length % childrenPerRow &gt; 0) {\r\n                        rows++;\r\n                    }\r\n                }\r\n                size = new Dimension(width,\r\n                    vgap + rows * (childSize.height + vgap));\r\n            }\r\n\r\n            size.width += insets.left + insets.right;\r\n            size.height += insets.top + insets.bottom;\r\n\r\n            return size;\r\n        }\r\n","title":"Horizontal JScrollPane inside vertical JScrollPane","body":"<p>A scrolling area inside another scrolling area is a user interface antipattern (anti-design?).  It should be avoided.</p>\n<p>I would create a scrollable panel based on a vertical BoxLayout:</p>\n<pre><code>public class WindowAddCameras extends JFrame {\n    private static final long serialVersionUID = 1;\n\n    public static final List&lt;JPanel&gt; labels = new ArrayList&lt;JPanel&gt;();\n\n    private static class CameraListPanel\n    extends JPanel\n    implements Scrollable {\n        private static final long serialVersionUID = 1;\n\n        CameraListPanel() {\n            setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));\n        }\n\n        @Override\n        public Dimension getPreferredScrollableViewportSize() {\n            return getPreferredSize();\n        }\n\n        @Override\n        public boolean getScrollableTracksViewportWidth() {\n            return true;\n        }\n\n        @Override\n        public boolean getScrollableTracksViewportHeight() {\n            return false;\n        }\n\n        @Override\n        public int getScrollableUnitIncrement(Rectangle visibleRect,\n                                              int orientation,\n                                              int direction) {\n            return getScrollableIncrement(30,\n                visibleRect, orientation, direction);\n        }\n\n        @Override\n        public int getScrollableBlockIncrement(Rectangle visibleRect,\n                                               int orientation,\n                                               int direction) {\n            return getScrollableIncrement(\n                orientation == SwingConstants.HORIZONTAL ?\n                    getWidth() : getHeight(),\n                visibleRect, orientation, direction);\n        }\n\n        private int getScrollableIncrement(int amount,\n                                           Rectangle visibleRect,\n                                           int orientation,\n                                           int direction) {\n            if (orientation == SwingConstants.HORIZONTAL) {\n                return Math.min(amount, direction &lt; 0 ? visibleRect.x :\n                    getWidth() - (visibleRect.x + visibleRect.width));\n            } else {\n                return Math.min(amount, direction &lt; 0 ? visibleRect.y :\n                    getHeight() - (visibleRect.y + visibleRect.height));\n            }\n        }\n    }\n \n    public WindowAddCameras() {\n        super(&quot;Добавить камеру&quot;);\n \n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n \n        JPanel panelButton = new JPanel();\n \n        JButton addButton = new JButton(&quot;+&quot;);\n        addButton.setFocusable(false);\n        panelButton.add(addButton);\n \n        JButton remButton = new JButton(&quot;-&quot;);\n        remButton.setFocusable(false);\n        panelButton.add(remButton);\n\n        JPanel camerasPanel = new CameraListPanel();\n        JScrollPane scrollPaneGroupEvent = new JScrollPane(camerasPanel);\n \n        addButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                int number = labels.size() + 1;\n                EventAdd eventAdd = new EventAdd();\n                Dimension labelSize = new Dimension(80, 80);\n \n                //add event to group event\n                Random rand = new Random();\n                for(int a = 0; a &lt; 20; a++) {\n                    //random color border event for TEST\n                    Color randomColor = new Color(rand.nextFloat(), rand.nextFloat(), rand.nextFloat());\n                    eventAdd.createEventLabel(&quot;Камера &quot; + number, labelSize, randomColor);\n                }\n \n                labels.add(eventAdd);\n                camerasPanel.add(eventAdd);\n                scrollPaneGroupEvent.revalidate();\n            }\n        });\n \n        remButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                if(labels.size() &gt; 0) {\n                    int index = labels.size() - 1;\n                    JPanel panel = labels.remove(index);\n                    camerasPanel.remove(panel);\n                    camerasPanel.repaint();\n                    scrollPaneGroupEvent.revalidate();\n                }\n            }\n        });\n \n        this.getContentPane().setLayout(new BorderLayout());\n        this.getContentPane().add(panelButton, BorderLayout.NORTH);\n        this.getContentPane().add(scrollPaneGroupEvent, BorderLayout.CENTER);\n \n        this.setPreferredSize(new Dimension(600, 400));\n        this.pack();\n        this.setLocationRelativeTo(null);\n        this.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; new WindowAddCameras());\n    }\n}\n</code></pre>\n<p>The CameraListPanel class is mostly a basic scrollable panel;  the important part is that <code>getScrollableTracksViewportWidth()</code> returns true, which will cause the panel’s width to match the width of any JScrollPane viewport.  This eliminates any need for a horizontal scrollbar.</p>\n<p>Of course, you will want to show all of your child components somehow.  To do that, I would have the EventAdd class compute a height that can accommodate all of the children:</p>\n<pre><code>public class EventAdd extends JPanel {\n    private static final long serialVersionUID = 1;\n\n    private final FlowLayout layout;\n\n    public EventAdd() {\n        layout = new FlowLayout(FlowLayout.LEFT);\n        setLayout(layout);\n    }\n\n    @Override\n    public Dimension getPreferredSize() {\n        Rectangle childSize = new Rectangle();\n        Component[] children = getComponents();\n        for (Component child : children) {\n            childSize.add(new Rectangle(child.getPreferredSize()));\n        }\n\n        Insets insets = getInsets();\n\n        int hgap = layout.getHgap();\n        int vgap = layout.getVgap();\n        int childWidth = childSize.width + hgap;\n\n        Dimension size;\n        if (getParent() == null) {\n            size = new Dimension(\n                children.length * (childWidth * hgap) + hgap,\n                childSize.height + vgap * 2);\n        } else {\n            int width = getParent().getWidth();\n            width -= insets.left + insets.right;\n            int childrenPerRow =\n                childWidth == 0 ? 0 : (width - hgap) / childWidth;\n\n            int rows;\n            if (childrenPerRow == 0) {\n                rows = 0;\n            } else {\n                rows = children.length / childrenPerRow;\n                if (children.length % childrenPerRow &gt; 0) {\n                    rows++;\n                }\n            }\n            size = new Dimension(width,\n                vgap + rows * (childSize.height + vgap));\n        }\n\n        size.width += insets.left + insets.right;\n        size.height += insets.top + insets.bottom;\n\n        return size;\n    }\n</code></pre>\n"}],"owner":{"account_id":25997867,"reputation":15,"user_id":19930210,"display_name":"IvanNaStackOF"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73690829,"answer_count":3,"score":0,"last_activity_date":1662992641,"creation_date":1662976790,"question_id":73687515,"body_markdown":"Good afternoon! It is necessary to make a list (vertical) from lists of events (horizontal). There are at least 2 problems:\r\n1) the area of the list of events (horizontal scrolling) expands beyond the borders of the panel. Apparently, the problem is with Layout, but I can not find the right combination;\r\n2) horizontal scrolling does not work (probably due to the problem described above) and the scrollbar must be different for each group of events.\r\n````\r\nimport ivank.components.EventAdd;\r\n \r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.net.URL;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Random;\r\n \r\npublic class WindowAddCameras extends JFrame {\r\n    public static final List&lt;JPanel&gt; labels = new ArrayList&lt;JPanel&gt;();\r\n \r\n    public WindowAddCameras() {\r\n        super(&quot;Добавить камеру&quot;);\r\n \r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n \r\n        JPanel panelButton = new JPanel();\r\n \r\n        JButton addButton = new JButton(&quot;+&quot;);\r\n        addButton.setFocusable(false);\r\n        panelButton.add(addButton);\r\n \r\n        JButton remButton = new JButton(&quot;-&quot;);\r\n        remButton.setFocusable(false);\r\n        panelButton.add(remButton);\r\n \r\n        JPanel externalPanel = new JPanel();\r\n        externalPanel.setLayout(new BorderLayout(0, 0));\r\n        JScrollPane scrollPaneGroupEvent = new JScrollPane(\r\n                externalPanel,\r\n                JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,\r\n                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER\r\n        );\r\n \r\n        JPanel internalPanel = new JPanel();\r\n        internalPanel.setLayout(new GridLayout(0, 1, 0, 0));\r\n \r\n        JScrollPane scrollPaneEvent = new JScrollPane(internalPanel);\r\n        scrollPaneEvent.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER);\r\n        scrollPaneEvent.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);\r\n \r\n        externalPanel.add(scrollPaneEvent, BorderLayout.NORTH);\r\n        addButton.addActionListener(new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n                int number = labels.size() + 1;\r\n                EventAdd eventAdd = new EventAdd();\r\n                Dimension labelSize = new Dimension(80, 80);\r\n \r\n                //add event to group event\r\n                Random rand = new Random();\r\n                for(int a = 0; a &lt; 20; a++) {\r\n                    //random color border event for TEST\r\n                    Color randomColor = new Color(rand.nextFloat(), rand.nextFloat(), rand.nextFloat());\r\n                    eventAdd.createEventLabel(&quot;Камера &quot; + number, labelSize, randomColor);\r\n                }\r\n \r\n                labels.add(eventAdd);\r\n                internalPanel.add(eventAdd, BorderLayout.NORTH);\r\n                scrollPaneGroupEvent.revalidate();\r\n            }\r\n        });\r\n \r\n        remButton.addActionListener(new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n                if(labels.size() &gt; 0) {\r\n                    int index = labels.size() - 1;\r\n                    JPanel panel = labels.remove(index);\r\n                    internalPanel.remove(panel);\r\n                    internalPanel.repaint();\r\n                    scrollPaneGroupEvent.revalidate();\r\n                }\r\n            }\r\n        });\r\n \r\n        this.getContentPane().setLayout(new BorderLayout());\r\n        this.getContentPane().add(panelButton, BorderLayout.NORTH);\r\n        this.getContentPane().add(scrollPaneGroupEvent, BorderLayout.CENTER);\r\n \r\n        this.setPreferredSize(new Dimension(600, 400));\r\n        this.pack();\r\n        this.setLocationRelativeTo(null);\r\n        this.setVisible(true);\r\n    }\r\n}\r\n````\r\n\r\n````\r\npackage ivank.components;\r\n \r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.util.ArrayList;\r\n \r\npublic class EventAdd extends JPanel {\r\n    public EventAdd() {\r\n        super(new FlowLayout(FlowLayout.LEFT));\r\n    }\r\n \r\n    public JComponent createEventLabel(String name, Dimension labelSize, Color randomColor) {\r\n        this.setBorder(BorderFactory.createTitledBorder(name));\r\n        JLabel label = new JLabel();\r\n        label.setPreferredSize(labelSize);\r\n        label.setHorizontalAlignment(JLabel.CENTER);\r\n \r\n        label.setBorder(BorderFactory.createLineBorder(randomColor, 5));\r\n        this.add(label);\r\n \r\n        return label;\r\n    }\r\n}\r\n````\r\n\r\nWhat I have: [enter image description here][2]\r\nWhat I want to get: [enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1HoPH.png\r\n  [2]: https://i.stack.imgur.com/0eHkn.png","title":"Horizontal JScrollPane inside vertical JScrollPane","body":"<p>Good afternoon! It is necessary to make a list (vertical) from lists of events (horizontal). There are at least 2 problems:</p>\n<ol>\n<li>the area of the list of events (horizontal scrolling) expands beyond the borders of the panel. Apparently, the problem is with Layout, but I can not find the right combination;</li>\n<li>horizontal scrolling does not work (probably due to the problem described above) and the scrollbar must be different for each group of events.</li>\n</ol>\n<pre><code>import ivank.components.EventAdd;\n \nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.net.URL;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Random;\n \npublic class WindowAddCameras extends JFrame {\n    public static final List&lt;JPanel&gt; labels = new ArrayList&lt;JPanel&gt;();\n \n    public WindowAddCameras() {\n        super(&quot;Добавить камеру&quot;);\n \n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n \n        JPanel panelButton = new JPanel();\n \n        JButton addButton = new JButton(&quot;+&quot;);\n        addButton.setFocusable(false);\n        panelButton.add(addButton);\n \n        JButton remButton = new JButton(&quot;-&quot;);\n        remButton.setFocusable(false);\n        panelButton.add(remButton);\n \n        JPanel externalPanel = new JPanel();\n        externalPanel.setLayout(new BorderLayout(0, 0));\n        JScrollPane scrollPaneGroupEvent = new JScrollPane(\n                externalPanel,\n                JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,\n                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER\n        );\n \n        JPanel internalPanel = new JPanel();\n        internalPanel.setLayout(new GridLayout(0, 1, 0, 0));\n \n        JScrollPane scrollPaneEvent = new JScrollPane(internalPanel);\n        scrollPaneEvent.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER);\n        scrollPaneEvent.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);\n \n        externalPanel.add(scrollPaneEvent, BorderLayout.NORTH);\n        addButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                int number = labels.size() + 1;\n                EventAdd eventAdd = new EventAdd();\n                Dimension labelSize = new Dimension(80, 80);\n \n                //add event to group event\n                Random rand = new Random();\n                for(int a = 0; a &lt; 20; a++) {\n                    //random color border event for TEST\n                    Color randomColor = new Color(rand.nextFloat(), rand.nextFloat(), rand.nextFloat());\n                    eventAdd.createEventLabel(&quot;Камера &quot; + number, labelSize, randomColor);\n                }\n \n                labels.add(eventAdd);\n                internalPanel.add(eventAdd, BorderLayout.NORTH);\n                scrollPaneGroupEvent.revalidate();\n            }\n        });\n \n        remButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                if(labels.size() &gt; 0) {\n                    int index = labels.size() - 1;\n                    JPanel panel = labels.remove(index);\n                    internalPanel.remove(panel);\n                    internalPanel.repaint();\n                    scrollPaneGroupEvent.revalidate();\n                }\n            }\n        });\n \n        this.getContentPane().setLayout(new BorderLayout());\n        this.getContentPane().add(panelButton, BorderLayout.NORTH);\n        this.getContentPane().add(scrollPaneGroupEvent, BorderLayout.CENTER);\n \n        this.setPreferredSize(new Dimension(600, 400));\n        this.pack();\n        this.setLocationRelativeTo(null);\n        this.setVisible(true);\n    }\n}\n</code></pre>\n<pre><code>package ivank.components;\n \nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\n \npublic class EventAdd extends JPanel {\n    public EventAdd() {\n        super(new FlowLayout(FlowLayout.LEFT));\n    }\n \n    public JComponent createEventLabel(String name, Dimension labelSize, Color randomColor) {\n        this.setBorder(BorderFactory.createTitledBorder(name));\n        JLabel label = new JLabel();\n        label.setPreferredSize(labelSize);\n        label.setHorizontalAlignment(JLabel.CENTER);\n \n        label.setBorder(BorderFactory.createLineBorder(randomColor, 5));\n        this.add(label);\n \n        return label;\n    }\n}\n</code></pre>\n<p>What I have: <a href=\"https://i.stack.imgur.com/0eHkn.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nWhat I want to get: <a href=\"https://i.stack.imgur.com/1HoPH.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","docusignapi","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1662630090,"post_id":73640979,"comment_id":130051874,"body_markdown":"Why the PDFBox label if you&#39;re doing docusign?","body":"Why the PDFBox label if you&#39;re doing docusign?"},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1662639066,"post_id":73640979,"comment_id":130055211,"body_markdown":"@TilmanHausherr Maybe he is using PdfBox to add the *ocuSign tabs?","body":"@TilmanHausherr Maybe he is using PdfBox to add the *ocuSign tabs?"},{"owner":{"account_id":17948444,"reputation":3,"user_id":13042140,"display_name":"Sam"},"score":0,"creation_date":1662643532,"post_id":73640979,"comment_id":130056974,"body_markdown":"@TilmanHausherr I am generating the PDF and sending it to DocuSign via API call.\nI thought of adding the above mentioned field and then specify its position as DocuSign tabs","body":"@TilmanHausherr I am generating the PDF and sending it to DocuSign via API call. I thought of adding the above mentioned field and then specify its position as DocuSign tabs"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1662659019,"post_id":73640979,"comment_id":130062973,"body_markdown":"PDFBox is the name of the software. Are you using that software or is it because your field is a &quot;box&quot;?","body":"PDFBox is the name of the software. Are you using that software or is it because your field is a &quot;box&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":20233256,"reputation":261,"user_id":14839219,"display_name":"Paige Rossi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662583459,"creation_date":1662583459,"answer_id":73641279,"question_id":73640979,"body_markdown":"You can use an anchor string to place a SignHere tab anywhere that a certain string appears in your document. You could use the word &quot;Signature&quot; or use another unique string in white text where you want the Signature to appear. We have a few resources on anchor tagging:\r\n\r\nBlog post: https://www.docusign.com/blog/developers/tabs-deep-dive-placing-tabs-documents\r\n\r\nDeveloper Center guide: https://developers.docusign.com/docs/esign-rest-api/esign101/concepts/tabs/auto-place/\r\n\r\nHow-to guide using anchor tagging: https://developers.docusign.com/docs/esign-rest-api/how-to/request-signature-in-app-embedded/","title":"How to add a field at the end of the pdf in Java (PDFBox)","body":"<p>You can use an anchor string to place a SignHere tab anywhere that a certain string appears in your document. You could use the word &quot;Signature&quot; or use another unique string in white text where you want the Signature to appear. We have a few resources on anchor tagging:</p>\n<p>Blog post: <a href=\"https://www.docusign.com/blog/developers/tabs-deep-dive-placing-tabs-documents\" rel=\"nofollow noreferrer\">https://www.docusign.com/blog/developers/tabs-deep-dive-placing-tabs-documents</a></p>\n<p>Developer Center guide: <a href=\"https://developers.docusign.com/docs/esign-rest-api/esign101/concepts/tabs/auto-place/\" rel=\"nofollow noreferrer\">https://developers.docusign.com/docs/esign-rest-api/esign101/concepts/tabs/auto-place/</a></p>\n<p>How-to guide using anchor tagging: <a href=\"https://developers.docusign.com/docs/esign-rest-api/how-to/request-signature-in-app-embedded/\" rel=\"nofollow noreferrer\">https://developers.docusign.com/docs/esign-rest-api/how-to/request-signature-in-app-embedded/</a></p>\n"},{"tags":[],"owner":{"account_id":3941825,"reputation":12902,"user_id":3255871,"display_name":"Inbar Gazit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662584210,"creation_date":1662584210,"answer_id":73641386,"question_id":73640979,"body_markdown":"Paige gave a very good answer, let me just add a few things.\r\nYou can determine how many pages are in the document, and then use this number to place one in the last page.\r\nSee this blog post on how to do this - https://www.docusign.com/blog/developers/common-api-tasks-adding-initials-each-page-each-document-your-envelope\r\nThe java code is this:\r\n(note this uses a different tab, but you get the idea)\r\n\r\n        // You need to obtain an access token using your chosen authentication flow \r\n        Configuration config = new Configuration(new ApiClient(basePath));\r\n        config.addDefaultHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken);\r\n        EnvelopesApi envelopesApi = new EnvelopesApi(config);\r\n        \r\n            EnvelopesApi.GetEnvelopeOptions options = \r\n    \r\n    envelopesApi.new GetEnvelopeOptions();\r\n        options.setInclude(&quot;documents,recipients&quot;);\r\n        Envelope env = envelopesApi.getEnvelope(accountId, envelopeId, options);\r\n        for (Signer signer : env.getRecipients().getSigners())\r\n          {\r\n          signer.setTabs(new Tabs());\r\n          signer.getTabs().setInitialHereTabs(new java.util.List&lt;InitialHere&gt;());\r\n          for (EnvelopeDocument doc : env.getEnvelopeDocuments())\r\n            {\r\n              for (Page page : doc.getPages())\r\n              {\r\n              int width = Integer.parseInt(page.getWidth());\r\n              int height = Integer.parseInt(page.getHeight());\r\n              InitialHere initial = new InitialHere();\r\n              // 100 pixels higher and to the left from the top bottom corner\r\n              int x = width - 100;\r\n              int y = height - 100;\r\n              initial.setXPosition(x.toString());\r\n              initial.setYPosition(y.toString());\r\n              initial.setPageNumber(page.getSequence());\r\n              initial.setDocumentId(doc.getDocumentId());\r\n              initial.setRecipientId(signer.getRecipientId());\r\n              signer.getTabs().getInitialHereTabs().Add(initial);\r\n              }\r\n            }\r\n          envelopesApi.createTabs(accountId, env.getEnvelopeId(), signer.getRecipientId(), signer.getTabs());\r\n          }","title":"How to add a field at the end of the pdf in Java (PDFBox)","body":"<p>Paige gave a very good answer, let me just add a few things.\nYou can determine how many pages are in the document, and then use this number to place one in the last page.\nSee this blog post on how to do this - <a href=\"https://www.docusign.com/blog/developers/common-api-tasks-adding-initials-each-page-each-document-your-envelope\" rel=\"nofollow noreferrer\">https://www.docusign.com/blog/developers/common-api-tasks-adding-initials-each-page-each-document-your-envelope</a>\nThe java code is this:\n(note this uses a different tab, but you get the idea)</p>\n<pre><code>    // You need to obtain an access token using your chosen authentication flow \n    Configuration config = new Configuration(new ApiClient(basePath));\n    config.addDefaultHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken);\n    EnvelopesApi envelopesApi = new EnvelopesApi(config);\n    \n        EnvelopesApi.GetEnvelopeOptions options = \n\nenvelopesApi.new GetEnvelopeOptions();\n    options.setInclude(&quot;documents,recipients&quot;);\n    Envelope env = envelopesApi.getEnvelope(accountId, envelopeId, options);\n    for (Signer signer : env.getRecipients().getSigners())\n      {\n      signer.setTabs(new Tabs());\n      signer.getTabs().setInitialHereTabs(new java.util.List&lt;InitialHere&gt;());\n      for (EnvelopeDocument doc : env.getEnvelopeDocuments())\n        {\n          for (Page page : doc.getPages())\n          {\n          int width = Integer.parseInt(page.getWidth());\n          int height = Integer.parseInt(page.getHeight());\n          InitialHere initial = new InitialHere();\n          // 100 pixels higher and to the left from the top bottom corner\n          int x = width - 100;\n          int y = height - 100;\n          initial.setXPosition(x.toString());\n          initial.setYPosition(y.toString());\n          initial.setPageNumber(page.getSequence());\n          initial.setDocumentId(doc.getDocumentId());\n          initial.setRecipientId(signer.getRecipientId());\n          signer.getTabs().getInitialHereTabs().Add(initial);\n          }\n        }\n      envelopesApi.createTabs(accountId, env.getEnvelopeId(), signer.getRecipientId(), signer.getTabs());\n      }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25282,"reputation":48199,"user_id":64904,"accept_rate":70,"display_name":"Larry K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662649312,"creation_date":1662649312,"answer_id":73651245,"question_id":73640979,"body_markdown":"Another option is to add an additional document which would only have one page. This would be the &quot;Signing page&quot; and would reference the other pages.\r\n\r\nYou can include more than one document in your signature request. The documents are sent in an array, the documents will be presented in the array&#39;s order.\r\n\r\nExample JSON fragment:\r\n\r\n```\r\n...\r\n    &quot;documents&quot;: [\r\n      {\r\n        &quot;name&quot;: &quot;Example document&quot;,\r\n        &quot;fileExtension&quot;: &quot;pdf&quot;,\r\n        &quot;documentId&quot;: &quot;1&quot;,\r\n        &quot;documentBase64&quot;: &quot;&lt;base64 encoded doc contents&gt;&quot;\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;Signature page&quot;,\r\n        &quot;fileExtension&quot;: &quot;pdf&quot;,\r\n        &quot;documentId&quot;: &quot;2&quot;,\r\n        &quot;documentBase64&quot;: &quot;&lt;base64 encoded doc contents&gt;&quot;\r\n      }\r\n    ],\r\n...\r\n```\r\n\r\n","title":"How to add a field at the end of the pdf in Java (PDFBox)","body":"<p>Another option is to add an additional document which would only have one page. This would be the &quot;Signing page&quot; and would reference the other pages.</p>\n<p>You can include more than one document in your signature request. The documents are sent in an array, the documents will be presented in the array's order.</p>\n<p>Example JSON fragment:</p>\n<pre><code>...\n    &quot;documents&quot;: [\n      {\n        &quot;name&quot;: &quot;Example document&quot;,\n        &quot;fileExtension&quot;: &quot;pdf&quot;,\n        &quot;documentId&quot;: &quot;1&quot;,\n        &quot;documentBase64&quot;: &quot;&lt;base64 encoded doc contents&gt;&quot;\n      },\n      {\n        &quot;name&quot;: &quot;Signature page&quot;,\n        &quot;fileExtension&quot;: &quot;pdf&quot;,\n        &quot;documentId&quot;: &quot;2&quot;,\n        &quot;documentBase64&quot;: &quot;&lt;base64 encoded doc contents&gt;&quot;\n      }\n    ],\n...\n</code></pre>\n"}],"owner":{"account_id":17948444,"reputation":3,"user_id":13042140,"display_name":"Sam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1662992568,"creation_date":1662581501,"question_id":73640979,"body_markdown":"I have documents of different number of pages. My requirement is to add a Signature field at the bottom of the document. \r\nIt should be something like below. The page number is dynamic so it can be any number from 1 to 15.\r\n\r\nSignature: ______________________\r\n\r\nI am going to add DocuSign tabs here.\r\n\r\nAny help is appreciated.\r\n\r\n----------------------------------\r\nUpdate\r\n----------------------------------\r\n\r\nI was able to add the field using auto-tagging but the DocuSign tab is displaying over the text instead of replacing it. \r\nI have attached the image below. Is there a way to replace the text ?\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0e6fG.png","title":"How to add a field at the end of the pdf in Java (PDFBox)","body":"<p>I have documents of different number of pages. My requirement is to add a Signature field at the bottom of the document.\nIt should be something like below. The page number is dynamic so it can be any number from 1 to 15.</p>\n<p>Signature: ______________________</p>\n<p>I am going to add DocuSign tabs here.</p>\n<p>Any help is appreciated.</p>\n<hr />\n<h2>Update</h2>\n<p>I was able to add the field using auto-tagging but the DocuSign tab is displaying over the text instead of replacing it.\nI have attached the image below. Is there a way to replace the text ?</p>\n<p><a href=\"https://i.stack.imgur.com/0e6fG.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring-boot","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662991967,"creation_date":1662990570,"answer_id":73690387,"question_id":73689666,"body_markdown":"The issue is that your processor is not being implicitly registered as a listener, only the composite processor is. You will need to do this explicitly in your step\r\n```\r\n    @Bean\r\n    public CompositeItemProcessor&lt;User, User&gt; compositeItemProcessor() throws Exception {\r\n        CompositeItemProcessor&lt;User, User&gt; processor = new CompositeItemProcessor&lt;&gt;();\r\n        List&lt;ItemProcessor&lt;User, User&gt;&gt; processors = Arrays.asList(processor(), validatingItemProcessor());\r\n        processor.setDelegates(processors);\r\n        processor.afterPropertiesSet();\r\n        return processor;\r\n    }\r\n\r\n    @Bean\r\n    public ItemProcessor&lt;User, User&gt; processor() {\r\n        return new Processor();\r\n    }\r\n\r\n    @Bean\r\n    public void step() {\r\n        Step step = stepBuilderFactory.get(&quot;ETL-file-load&quot;)\r\n                .&lt;User, User&gt;chunk(100)\r\n                .reader(itemReader)\r\n                .processor(compositeItemProcessor())\r\n                .writer(itemWriter)\r\n                .faultTolerant()\r\n                .skipPolicy(jobSkipPolicy())\r\n                .listener(userValidationListener())\r\n                .listener(processor()) // register your custom processor as a listener to execute @BeforeStep\r\n                .build();\r\n        return step;\r\n    }\r\n```\r\n","title":"How to get jobId with @BeforeStep in spring batch with compositeItem processor?","body":"<p>The issue is that your processor is not being implicitly registered as a listener, only the composite processor is. You will need to do this explicitly in your step</p>\n<pre><code>    @Bean\n    public CompositeItemProcessor&lt;User, User&gt; compositeItemProcessor() throws Exception {\n        CompositeItemProcessor&lt;User, User&gt; processor = new CompositeItemProcessor&lt;&gt;();\n        List&lt;ItemProcessor&lt;User, User&gt;&gt; processors = Arrays.asList(processor(), validatingItemProcessor());\n        processor.setDelegates(processors);\n        processor.afterPropertiesSet();\n        return processor;\n    }\n\n    @Bean\n    public ItemProcessor&lt;User, User&gt; processor() {\n        return new Processor();\n    }\n\n    @Bean\n    public void step() {\n        Step step = stepBuilderFactory.get(&quot;ETL-file-load&quot;)\n                .&lt;User, User&gt;chunk(100)\n                .reader(itemReader)\n                .processor(compositeItemProcessor())\n                .writer(itemWriter)\n                .faultTolerant()\n                .skipPolicy(jobSkipPolicy())\n                .listener(userValidationListener())\n                .listener(processor()) // register your custom processor as a listener to execute @BeforeStep\n                .build();\n        return step;\n    }\n</code></pre>\n"}],"owner":{"account_id":15652376,"reputation":1164,"user_id":11293523,"display_name":"wick3d"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":295,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73690387,"answer_count":1,"score":0,"last_activity_date":1662992452,"creation_date":1662987276,"question_id":73689666,"body_markdown":"I have a composite item processor like so: \r\n```java\r\n@Bean\r\n    public CompositeItemProcessor&lt;User, User&gt; compositeItemProcessor() throws Exception {\r\n        CompositeItemProcessor&lt;User, User&gt; processor = new CompositeItemProcessor&lt;&gt;();\r\n        List&lt;ItemProcessor&lt;User, User&gt;&gt; processors = Arrays.asList(new Processor(),validatingItemProcessor());\r\n        processor.setDelegates(processors);\r\n        processor.afterPropertiesSet();\r\n        return processor;\r\n    }\r\n```\r\nI am not able to get `jobExecutionId` in any of the process with `@Beforestep`\r\nThis is processor 1.\r\n\r\n```java\r\n\r\npublic class Processor implements ItemProcessor&lt;User, User&gt;  {\r\n\r\n    private static final Map&lt;String, String&gt; DEPT_NAMES =\r\n            new HashMap&lt;&gt;();\r\n\r\n    private Long jobExecutionId;\r\n\r\n    @BeforeStep\r\n    public void beforeStep(StepExecution stepExecution) {\r\n        this.jobExecutionId = stepExecution.getJobExecutionId();\r\n    }\r\n\r\n    public Processor() {\r\n        DEPT_NAMES.put(&quot;001&quot;, &quot;Technology&quot;);\r\n        DEPT_NAMES.put(&quot;002&quot;, &quot;Operations&quot;);\r\n        DEPT_NAMES.put(&quot;003&quot;, &quot;Accounts&quot;);\r\n    }\r\n\r\n    @Override\r\n    public User process(User user) throws Exception {\r\n        System.out.println(this.jobExecutionId);\r\n        String deptCode = user.getDept();\r\n        String dept = DEPT_NAMES.get(deptCode);\r\n        user.setDept(dept);\r\n        user.setTime(new Date());\r\n        System.out.println(String.format(&quot;Converted from [%s] to [%s]&quot;, deptCode, dept));\r\n        return user;\r\n    }\r\n\r\n}\r\n```\r\nThis is processor 2.\r\n```java\r\n\r\n    @Bean\r\n    public ValidatingItemProcessor&lt;User&gt; validatingItemProcessor() {\r\n        return new ValidatingItemProcessor&lt;&gt;(new UserValidator());\r\n    }\r\n```\r\n\r\nHere is my job configuration.\r\n\r\n```java\r\n       Step step = stepBuilderFactory.get(&quot;ETL-file-load&quot;)\r\n                .&lt;User, User&gt;chunk(100)\r\n                .reader(itemReader)\r\n                .processor(compositeItemProcessor())\r\n                .writer(itemWriter)\r\n                .faultTolerant()\r\n                .skipPolicy(jobSkipPolicy())\r\n                .listener(userValidationListener())\r\n                .build();\r\n\r\n\r\n        return jobBuilderFactory.get(&quot;ETL-Load&quot;)\r\n                .incrementer(new RunIdIncrementer())\r\n                .start(step)\r\n                .build();\r\n```\r\nI am using a listener for skipped user records.\r\n```java\r\n    @Bean\r\n    public UserValidationListener userValidationListener() {\r\n        return new UserValidationListener();\r\n    }\r\npublic class UserValidationListener implements SkipListener&lt;User, User&gt; {\r\n\r\n\r\n    @Override\r\n    public void onSkipInRead(Throwable throwable) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onSkipInWrite(User user, Throwable throwable) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onSkipInProcess(User user, Throwable throwable) {\r\n        System.out.println(user.toString());\r\n        System.out.println(throwable.getMessage());\r\n        //write error\r\n        //errorStaorage.()\r\n    }\r\n}\r\n```\r\n\r\nWith this configuration, I am not abled to get the `jobExecutionId` in any of the processor.\r\n\r\n\r\nI have tried using a single processor instead of composite processor. I get the `jobExecutionId`. \r\n```java\r\n        Step step = stepBuilderFactory.get(&quot;ETL-file-load&quot;)\r\n                .&lt;User, User&gt;chunk(100)\r\n                .reader(itemReader)\r\n                .processor(new Processor())\r\n                .writer(itemWriter)\r\n                .faultTolerant()\r\n                .skipPolicy(jobSkipPolicy())\r\n                .listener(userValidationListener())\r\n                .build();\r\n```\r\nI am getting the `jobExecutionId`\r\n```java\r\nConverted from [001] to [Technology]\r\n1\r\nConverted from [002] to [Operations]\r\n1\r\nConverted from [003] to [Accounts]\r\n1\r\nConverted from [001] to [Technology]\r\n1\r\nConverted from [001] to [Technology]\r\n```\r\nWhere `1` is the jobId. So, this brings me to a conclusion that there is an error with the way I have setup `composite processor` and cannot get the `id` with `@BeforeStep`.\r\n\r\nWhy does `@Beforestep` behave differently and not get invoke when using a composite item processor?\r\n\r\n\r\n**UPDATE**\r\nAs per suggested answer, I have added this.\r\n```java\r\n    @Bean\r\n    public Processor itemProcessor() {\r\n        return new Processor();\r\n    }\r\n\r\n```\r\nAnd now my steplooks like this...\r\n```\r\n        Step step = stepBuilderFactory.get(&quot;ETL-file-load&quot;)\r\n                .&lt;User, User&gt;chunk(100)\r\n                .reader(itemReader)\r\n                .processor(compositeItemProcessor())\r\n                .writer(itemWriter)\r\n                .faultTolerant()\r\n                .skipPolicy(jobSkipPolicy())\r\n                .listener(userValidationListener())\r\n                .listener(itemProcessor())\r\n                .build();\r\n```\r\n\r\n","title":"How to get jobId with @BeforeStep in spring batch with compositeItem processor?","body":"<p>I have a composite item processor like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n    public CompositeItemProcessor&lt;User, User&gt; compositeItemProcessor() throws Exception {\n        CompositeItemProcessor&lt;User, User&gt; processor = new CompositeItemProcessor&lt;&gt;();\n        List&lt;ItemProcessor&lt;User, User&gt;&gt; processors = Arrays.asList(new Processor(),validatingItemProcessor());\n        processor.setDelegates(processors);\n        processor.afterPropertiesSet();\n        return processor;\n    }\n</code></pre>\n<p>I am not able to get <code>jobExecutionId</code> in any of the process with <code>@Beforestep</code>\nThis is processor 1.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class Processor implements ItemProcessor&lt;User, User&gt;  {\n\n    private static final Map&lt;String, String&gt; DEPT_NAMES =\n            new HashMap&lt;&gt;();\n\n    private Long jobExecutionId;\n\n    @BeforeStep\n    public void beforeStep(StepExecution stepExecution) {\n        this.jobExecutionId = stepExecution.getJobExecutionId();\n    }\n\n    public Processor() {\n        DEPT_NAMES.put(&quot;001&quot;, &quot;Technology&quot;);\n        DEPT_NAMES.put(&quot;002&quot;, &quot;Operations&quot;);\n        DEPT_NAMES.put(&quot;003&quot;, &quot;Accounts&quot;);\n    }\n\n    @Override\n    public User process(User user) throws Exception {\n        System.out.println(this.jobExecutionId);\n        String deptCode = user.getDept();\n        String dept = DEPT_NAMES.get(deptCode);\n        user.setDept(dept);\n        user.setTime(new Date());\n        System.out.println(String.format(&quot;Converted from [%s] to [%s]&quot;, deptCode, dept));\n        return user;\n    }\n\n}\n</code></pre>\n<p>This is processor 2.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Bean\n    public ValidatingItemProcessor&lt;User&gt; validatingItemProcessor() {\n        return new ValidatingItemProcessor&lt;&gt;(new UserValidator());\n    }\n</code></pre>\n<p>Here is my job configuration.</p>\n<pre class=\"lang-java prettyprint-override\"><code>       Step step = stepBuilderFactory.get(&quot;ETL-file-load&quot;)\n                .&lt;User, User&gt;chunk(100)\n                .reader(itemReader)\n                .processor(compositeItemProcessor())\n                .writer(itemWriter)\n                .faultTolerant()\n                .skipPolicy(jobSkipPolicy())\n                .listener(userValidationListener())\n                .build();\n\n\n        return jobBuilderFactory.get(&quot;ETL-Load&quot;)\n                .incrementer(new RunIdIncrementer())\n                .start(step)\n                .build();\n</code></pre>\n<p>I am using a listener for skipped user records.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public UserValidationListener userValidationListener() {\n        return new UserValidationListener();\n    }\npublic class UserValidationListener implements SkipListener&lt;User, User&gt; {\n\n\n    @Override\n    public void onSkipInRead(Throwable throwable) {\n\n    }\n\n    @Override\n    public void onSkipInWrite(User user, Throwable throwable) {\n\n    }\n\n    @Override\n    public void onSkipInProcess(User user, Throwable throwable) {\n        System.out.println(user.toString());\n        System.out.println(throwable.getMessage());\n        //write error\n        //errorStaorage.()\n    }\n}\n</code></pre>\n<p>With this configuration, I am not abled to get the <code>jobExecutionId</code> in any of the processor.</p>\n<p>I have tried using a single processor instead of composite processor. I get the <code>jobExecutionId</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Step step = stepBuilderFactory.get(&quot;ETL-file-load&quot;)\n                .&lt;User, User&gt;chunk(100)\n                .reader(itemReader)\n                .processor(new Processor())\n                .writer(itemWriter)\n                .faultTolerant()\n                .skipPolicy(jobSkipPolicy())\n                .listener(userValidationListener())\n                .build();\n</code></pre>\n<p>I am getting the <code>jobExecutionId</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>Converted from [001] to [Technology]\n1\nConverted from [002] to [Operations]\n1\nConverted from [003] to [Accounts]\n1\nConverted from [001] to [Technology]\n1\nConverted from [001] to [Technology]\n</code></pre>\n<p>Where <code>1</code> is the jobId. So, this brings me to a conclusion that there is an error with the way I have setup <code>composite processor</code> and cannot get the <code>id</code> with <code>@BeforeStep</code>.</p>\n<p>Why does <code>@Beforestep</code> behave differently and not get invoke when using a composite item processor?</p>\n<p><strong>UPDATE</strong>\nAs per suggested answer, I have added this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    public Processor itemProcessor() {\n        return new Processor();\n    }\n\n</code></pre>\n<p>And now my steplooks like this...</p>\n<pre><code>        Step step = stepBuilderFactory.get(&quot;ETL-file-load&quot;)\n                .&lt;User, User&gt;chunk(100)\n                .reader(itemReader)\n                .processor(compositeItemProcessor())\n                .writer(itemWriter)\n                .faultTolerant()\n                .skipPolicy(jobSkipPolicy())\n                .listener(userValidationListener())\n                .listener(itemProcessor())\n                .build();\n</code></pre>\n"},{"tags":["java","android","material-design","bottom-sheet","material-components-android"],"comments":[{"owner":{"account_id":5059097,"reputation":3003,"user_id":4061352,"accept_rate":30,"display_name":"Russell Ghana"},"score":0,"creation_date":1561021022,"post_id":56682333,"comment_id":99930612,"body_markdown":"check this question : https://stackoverflow.com/questions/43852562/round-corner-for-bottomsheetdialogfragment","body":"check this question : <a href=\"https://stackoverflow.com/questions/43852562/round-corner-for-bottomsheetdialogfragment\" title=\"round corner for bottomsheetdialogfragment\">stackoverflow.com/questions/43852562/&hellip;</a>"},{"owner":{"display_name":"user8836512"},"score":0,"creation_date":1561021425,"post_id":56682333,"comment_id":99930828,"body_markdown":"@RasoolGhana I did. It&#39;s for modal dialog. Not working for me.","body":"@RasoolGhana I did. It&#39;s for modal dialog. Not working for me."},{"owner":{"account_id":11475235,"reputation":859,"user_id":8410926,"display_name":"Son Huynh"},"score":0,"creation_date":1561023496,"post_id":56682333,"comment_id":99931888,"body_markdown":"@nachiketa I tried your code, maybe something wrong with your `fragment`, remove fragment and your layout works fine. I copy your layout and only remove `fragment` and `android:textColor`, `android:text=&quot;@string/placeholder_text&quot;` in  `TextView`","body":"@nachiketa I tried your code, maybe something wrong with your <code>fragment</code>, remove fragment and your layout works fine. I copy your layout and only remove <code>fragment</code> and <code>android:textColor</code>, <code>android:text=&quot;@string&#47;placeholder_text&quot;</code> in  <code>TextView</code>"}],"answers":[{"tags":[],"owner":{"account_id":11475235,"reputation":859,"user_id":8410926,"display_name":"Son Huynh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561022157,"creation_date":1561021366,"answer_id":56682528,"question_id":56682333,"body_markdown":"You can wrap your sheet layout with a card view to have rounded corners.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;androidx.cardview.widget.CardView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;450dp&quot;\r\n            app:layout_behavior=&quot;@string/bottom_sheet_behavior&quot;\r\n            app:cardCornerRadius=&quot;24dp&quot;\r\n            app:cardElevation=&quot;8dp&quot;\r\n            app:behavior_hideable=&quot;true&quot;\r\n            app:behavior_peekHeight=&quot;55dp&quot;&gt;\r\n    \r\n            &lt;androidx.core.widget.NestedScrollView\r\n                android:id=&quot;@+id/bottom_sheet&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tvBottomSheet&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;ABC&quot;\r\n                    android:textSize=&quot;37sp&quot; /&gt;\r\n    \r\n            &lt;/androidx.core.widget.NestedScrollView&gt;\r\n    \r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;","title":"Persistent Bottom Sheet with rounded corners in Android crashes when used in a card view","body":"<p>You can wrap your sheet layout with a card view to have rounded corners.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;androidx.cardview.widget.CardView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"450dp\"\n        app:layout_behavior=\"@string/bottom_sheet_behavior\"\n        app:cardCornerRadius=\"24dp\"\n        app:cardElevation=\"8dp\"\n        app:behavior_hideable=\"true\"\n        app:behavior_peekHeight=\"55dp\"&gt;\n\n        &lt;androidx.core.widget.NestedScrollView\n            android:id=\"@+id/bottom_sheet\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n            &lt;TextView\n                android:id=\"@+id/tvBottomSheet\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"ABC\"\n                android:textSize=\"37sp\" /&gt;\n\n        &lt;/androidx.core.widget.NestedScrollView&gt;\n\n    &lt;/androidx.cardview.widget.CardView&gt;\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16171420,"reputation":188,"user_id":11675125,"display_name":"headofmobile"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1561023157,"creation_date":1561023157,"answer_id":56683012,"question_id":56682333,"body_markdown":"U can add shape for you bottom sheet background background\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n       android:shape=&quot;rectangle&quot;&gt;\r\n\r\n    &lt;solid android:color=&quot;@color/you_color&quot;/&gt;\r\n\r\n    &lt;corners\r\n            android:bottomRightRadius=&quot;2dp&quot;\r\n            android:bottomLeftRadius=&quot;2dp&quot;\r\n            android:topLeftRadius=&quot;2dp&quot;\r\n            android:topRightRadius=&quot;2dp&quot;/&gt;\r\n&lt;/shape&gt;\r\n```","title":"Persistent Bottom Sheet with rounded corners in Android crashes when used in a card view","body":"<p>U can add shape for you bottom sheet background background</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n       android:shape=\"rectangle\"&gt;\n\n    &lt;solid android:color=\"@color/you_color\"/&gt;\n\n    &lt;corners\n            android:bottomRightRadius=\"2dp\"\n            android:bottomLeftRadius=\"2dp\"\n            android:topLeftRadius=\"2dp\"\n            android:topRightRadius=\"2dp\"/&gt;\n&lt;/shape&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2294849,"reputation":331976,"user_id":2016562,"accept_rate":92,"display_name":"Gabriele Mariotti"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1566564884,"creation_date":1566564884,"answer_id":57626774,"question_id":56682333,"body_markdown":"With the new [Material Component][1] library you can [customize the shape][2] of your component using the **`shapeAppearanceOverlay`** attribute.\r\n\r\nYou can use something like:\r\n\r\n      &lt;!-- BottomSheet --&gt;\r\n      &lt;style name=&quot;CustomBottomSheet&quot; parent=&quot;Widget.MaterialComponents.BottomSheet&quot;&gt;\r\n        &lt;item name=&quot;shapeAppearanceOverlay&quot;&gt;@style/CustomShapeAppearanceOverlay.MaterialComponents.BottomSheet&lt;/item&gt;\r\n        ....\r\n      &lt;/style&gt;\r\n    \r\n      &lt;style name=&quot;CustomShapeAppearanceOverlay.MaterialComponents.BottomSheet&quot; parent=&quot;&quot;&gt;\r\n        &lt;item name=&quot;cornerSizeTopRight&quot;&gt;16dp&lt;/item&gt;\r\n        &lt;item name=&quot;cornerSizeTopLeft&quot;&gt;16dp&lt;/item&gt;\r\n        &lt;item name=&quot;cornerSizeBottomRight&quot;&gt;0dp&lt;/item&gt;\r\n        &lt;item name=&quot;cornerSizeBottomLeft&quot;&gt;0dp&lt;/item&gt;\r\n      &lt;/style&gt;\r\n\r\nThen you can apply this style to your single component or your theme app.\r\n\r\n      &lt;!-- Base application theme. --&gt;\r\n      &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.MaterialComponents.Light&quot;&gt;\r\n        ...\r\n        &lt;item name=&quot;bottomSheetStyle&quot;&gt;@style/CustomBottomSheet&lt;/item&gt;\r\n      &lt;/style&gt;\r\n\r\nIf you are using a non-modal bottom sheet just apply the style. For example:\r\n\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/standardBottomSheet&quot;\r\n    app:layout_behavior=&quot;com.google.android.material.bottomsheet.BottomSheetBehavior&quot;\r\n        style=&quot;?attr/bottomSheetStyle&quot; \r\n        ...&gt;\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://github.com/material-components/material-components-android\r\n  [2]: https://github.com/material-components/material-components-android/blob/master/docs/theming/Shape.md#customizing-component-shapes\r\n  [3]: https://i.stack.imgur.com/qMjiF.png","title":"Persistent Bottom Sheet with rounded corners in Android crashes when used in a card view","body":"<p>With the new <a href=\"https://github.com/material-components/material-components-android\" rel=\"noreferrer\">Material Component</a> library you can <a href=\"https://github.com/material-components/material-components-android/blob/master/docs/theming/Shape.md#customizing-component-shapes\" rel=\"noreferrer\">customize the shape</a> of your component using the <strong><code>shapeAppearanceOverlay</code></strong> attribute.</p>\n\n<p>You can use something like:</p>\n\n<pre><code>  &lt;!-- BottomSheet --&gt;\n  &lt;style name=\"CustomBottomSheet\" parent=\"Widget.MaterialComponents.BottomSheet\"&gt;\n    &lt;item name=\"shapeAppearanceOverlay\"&gt;@style/CustomShapeAppearanceOverlay.MaterialComponents.BottomSheet&lt;/item&gt;\n    ....\n  &lt;/style&gt;\n\n  &lt;style name=\"CustomShapeAppearanceOverlay.MaterialComponents.BottomSheet\" parent=\"\"&gt;\n    &lt;item name=\"cornerSizeTopRight\"&gt;16dp&lt;/item&gt;\n    &lt;item name=\"cornerSizeTopLeft\"&gt;16dp&lt;/item&gt;\n    &lt;item name=\"cornerSizeBottomRight\"&gt;0dp&lt;/item&gt;\n    &lt;item name=\"cornerSizeBottomLeft\"&gt;0dp&lt;/item&gt;\n  &lt;/style&gt;\n</code></pre>\n\n<p>Then you can apply this style to your single component or your theme app.</p>\n\n<pre><code>  &lt;!-- Base application theme. --&gt;\n  &lt;style name=\"AppTheme\" parent=\"Theme.MaterialComponents.Light\"&gt;\n    ...\n    &lt;item name=\"bottomSheetStyle\"&gt;@style/CustomBottomSheet&lt;/item&gt;\n  &lt;/style&gt;\n</code></pre>\n\n<p>If you are using a non-modal bottom sheet just apply the style. For example:</p>\n\n<pre><code>&lt;LinearLayout\n    android:id=\"@+id/standardBottomSheet\"\napp:layout_behavior=\"com.google.android.material.bottomsheet.BottomSheetBehavior\"\n    style=\"?attr/bottomSheetStyle\" \n    ...&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qMjiF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qMjiF.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":14636108,"reputation":1436,"user_id":10570201,"display_name":"nhcodes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662992019,"creation_date":1662992019,"answer_id":73690704,"question_id":56682333,"body_markdown":"You could also use the `app:shapeAppearance` attribute:\r\n\r\nCreate a ShapeAppearance in `styles.xml`:\r\n\r\n    &lt;resources&gt;\r\n\r\n        ...\r\n    \r\n        &lt;style name=&quot;BottomSheetShapeAppearance&quot;&gt;\r\n            &lt;item name=&quot;cornerFamily&quot;&gt;rounded&lt;/item&gt;\r\n            &lt;item name=&quot;cornerSizeTopLeft&quot;&gt;16dp&lt;/item&gt;\r\n            &lt;item name=&quot;cornerSizeTopRight&quot;&gt;16dp&lt;/item&gt;\r\n        &lt;/style&gt;\r\n    \r\n    &lt;/resources&gt;\r\n\r\nSet the `app:shapeAppearance` attribute on the BottomSheet component:\r\n\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        style=&quot;@style/Widget.MaterialComponents.BottomSheet&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        app:layout_behavior=&quot;com.google.android.material.bottomsheet.BottomSheetBehavior&quot;\r\n        app:shapeAppearance=&quot;@style/BottomSheetShapeAppearance&quot;&gt;\r\n\r\n        ...\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\nHere&#39;s how it looks:\r\n\r\n[![Screenshot][1]][1]\r\n\r\n\r\nMore info: https://material.io/develop/android/theming/shape\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rBcKy.jpg","title":"Persistent Bottom Sheet with rounded corners in Android crashes when used in a card view","body":"<p>You could also use the <code>app:shapeAppearance</code> attribute:</p>\n<p>Create a ShapeAppearance in <code>styles.xml</code>:</p>\n<pre><code>&lt;resources&gt;\n\n    ...\n\n    &lt;style name=&quot;BottomSheetShapeAppearance&quot;&gt;\n        &lt;item name=&quot;cornerFamily&quot;&gt;rounded&lt;/item&gt;\n        &lt;item name=&quot;cornerSizeTopLeft&quot;&gt;16dp&lt;/item&gt;\n        &lt;item name=&quot;cornerSizeTopRight&quot;&gt;16dp&lt;/item&gt;\n    &lt;/style&gt;\n\n&lt;/resources&gt;\n</code></pre>\n<p>Set the <code>app:shapeAppearance</code> attribute on the BottomSheet component:</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    style=&quot;@style/Widget.MaterialComponents.BottomSheet&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    app:layout_behavior=&quot;com.google.android.material.bottomsheet.BottomSheetBehavior&quot;\n    app:shapeAppearance=&quot;@style/BottomSheetShapeAppearance&quot;&gt;\n\n    ...\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>Here's how it looks:</p>\n<p><a href=\"https://i.stack.imgur.com/rBcKy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rBcKy.jpg\" alt=\"Screenshot\" /></a></p>\n<p>More info: <a href=\"https://material.io/develop/android/theming/shape\" rel=\"nofollow noreferrer\">https://material.io/develop/android/theming/shape</a></p>\n"}],"owner":{"display_name":"user8836512"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8117,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":56683012,"answer_count":4,"score":6,"last_activity_date":1662992019,"creation_date":1561020689,"question_id":56682333,"body_markdown":"I have created a persistent bottom sheet in android with the intent of displaying a ListView containing additional information about locations. I want the sheet to have rounded corners. I got a ton of results for modal dialog but none for persistent. Is it possible or should I use the modal version? \r\n\r\nAs suggested in an answer here, I tried wrapping it in a card view but the app crashes when I try to open the fragment.\r\n\r\n```xml\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.fragments.MapFragment&quot;&gt;\r\n\r\n    &lt;RelativeLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n        &lt;androidx.cardview.widget.CardView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_margin=&quot;5dp&quot;\r\n            app:cardCornerRadius=&quot;20dp&quot;&gt;\r\n\r\n            &lt;fragment\r\n                android:id=&quot;@+id/autocomplete_fragment&quot;\r\n                android:name=&quot;com.google.android.libraries.places.widget.AutocompleteSupportFragment&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                tools:layout=&quot;@layout/places_autocomplete_item_powered_by_google&quot; /&gt;\r\n\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n\r\n        &lt;com.google.android.gms.maps.MapView\r\n            android:id=&quot;@+id/mapView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot; /&gt;\r\n\r\n    &lt;/RelativeLayout&gt;\r\n\r\n    &lt;androidx.cardview.widget.CardView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;450dp&quot;\r\n        app:cardCornerRadius=&quot;24dp&quot;\r\n        app:cardElevation=&quot;8dp&quot;\r\n        app:layout_behavior=&quot;@string/bottom_sheet_behavior&quot;\r\n        app:behavior_hideable=&quot;true&quot;\r\n        app:behavior_peekHeight=&quot;55dp&quot;&gt;\r\n\r\n        &lt;androidx.core.widget.NestedScrollView\r\n            android:id=&quot;@+id/bottom_sheet&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/tvBottomSheet&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;@string/placeholder_text&quot;\r\n                android:textColor=&quot;@color/colorCommon_BLACK&quot;\r\n                android:textSize=&quot;37sp&quot; /&gt;\r\n\r\n        &lt;/androidx.core.widget.NestedScrollView&gt;\r\n\r\n    &lt;/androidx.cardview.widget.CardView&gt;\r\n\r\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n```","title":"Persistent Bottom Sheet with rounded corners in Android crashes when used in a card view","body":"<p>I have created a persistent bottom sheet in android with the intent of displaying a ListView containing additional information about locations. I want the sheet to have rounded corners. I got a ton of results for modal dialog but none for persistent. Is it possible or should I use the modal version? </p>\n\n<p>As suggested in an answer here, I tried wrapping it in a card view but the app crashes when I try to open the fragment.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:orientation=\"vertical\"\n    tools:context=\".fragments.MapFragment\"&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n        &lt;androidx.cardview.widget.CardView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_margin=\"5dp\"\n            app:cardCornerRadius=\"20dp\"&gt;\n\n            &lt;fragment\n                android:id=\"@+id/autocomplete_fragment\"\n                android:name=\"com.google.android.libraries.places.widget.AutocompleteSupportFragment\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                tools:layout=\"@layout/places_autocomplete_item_powered_by_google\" /&gt;\n\n        &lt;/androidx.cardview.widget.CardView&gt;\n\n        &lt;com.google.android.gms.maps.MapView\n            android:id=\"@+id/mapView\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\" /&gt;\n\n    &lt;/RelativeLayout&gt;\n\n    &lt;androidx.cardview.widget.CardView\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"450dp\"\n        app:cardCornerRadius=\"24dp\"\n        app:cardElevation=\"8dp\"\n        app:layout_behavior=\"@string/bottom_sheet_behavior\"\n        app:behavior_hideable=\"true\"\n        app:behavior_peekHeight=\"55dp\"&gt;\n\n        &lt;androidx.core.widget.NestedScrollView\n            android:id=\"@+id/bottom_sheet\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n\n            &lt;TextView\n                android:id=\"@+id/tvBottomSheet\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"@string/placeholder_text\"\n                android:textColor=\"@color/colorCommon_BLACK\"\n                android:textSize=\"37sp\" /&gt;\n\n        &lt;/androidx.core.widget.NestedScrollView&gt;\n\n    &lt;/androidx.cardview.widget.CardView&gt;\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n"},{"tags":["java","mscapi"],"answers":[{"tags":[],"owner":{"account_id":18115522,"reputation":153,"user_id":13172220,"display_name":"Papp Zolt&#225;n"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662991925,"creation_date":1662991925,"answer_id":73690679,"question_id":73685515,"body_markdown":"I changed the buffer size for decrypton of RSAEncryptUtil:\r\n\r\n    byte[] buf = cipherMode == Cipher.ENCRYPT_MODE ? new byte[100] : new byte[KEYSIZE / 8];\r\n\r\nI set KEYSIZE to 4096 and this helped for 4096 bit RSA key and this is solved the problem.","title":"mscapi java.security.ProviderException: java.security.KeyException:: The parameter is incorrect","body":"<p>I changed the buffer size for decrypton of RSAEncryptUtil:</p>\n<pre><code>byte[] buf = cipherMode == Cipher.ENCRYPT_MODE ? new byte[100] : new byte[KEYSIZE / 8];\n</code></pre>\n<p>I set KEYSIZE to 4096 and this helped for 4096 bit RSA key and this is solved the problem.</p>\n"}],"owner":{"account_id":18115522,"reputation":153,"user_id":13172220,"display_name":"Papp Zolt&#225;n"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":751,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662991925,"creation_date":1662966018,"question_id":73685515,"body_markdown":"I get &quot;The parameter is incorrect&quot; exception when I try decrypt the encrypted file with MSCAPI. I use [RSAEncryptUtil.java][1] utility\r\nand JDK 1.8.0_201 for this homework project.\r\n\r\n    package hu.infokristaly.homework4rsaencdec;\r\n    \r\n    import java.security.KeyStore;\r\n    import java.security.PrivateKey;\r\n    import java.security.PublicKey;\r\n    import java.security.cert.Certificate;\r\n    \r\n    import sun.security.mscapi.SunMSCAPI;\r\n    \r\n    public class Homework4RSAEncDec {\r\n    \r\n    \tprivate static final String alias = &quot;papp zolt&#225;n&quot;;\r\n    \tprivate static final String fileName = &quot;c:\\\\temp\\\\test.txt&quot;;\r\n    \t\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tKeyStore keyStore = KeyStore.getInstance(&quot;Windows-MY&quot;, new SunMSCAPI());\r\n    \t\tkeyStore.load(null, null);\r\n    \t\t\r\n    \t\tCertificate cert = keyStore.getCertificate(alias);\t\t\t\r\n            PublicKey pubKey = cert.getPublicKey();\r\n    \r\n            RSAEncryptUtil.encryptFile(fileName, fileName + &quot;.enc&quot;, pubKey);\r\n\r\n    \t\tKeyStore.PasswordProtection  keyPassword = new KeyStore.PasswordProtection (&quot;&quot;.toCharArray());\r\n    \t\tKeyStore.PrivateKeyEntry selectedKey = (KeyStore.PrivateKeyEntry)keyStore.getEntry(alias, keyPassword);\r\n    \t\tPrivateKey privKey = selectedKey.getPrivateKey();\r\n\r\n            RSAEncryptUtil.decryptFile(fileName + &quot;.enc&quot;, fileName + &quot;.dec&quot;, privKey);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nThe exception is occurred in cipher.doFinal at line 98 of RSAEncryptUtil.\r\n\r\n    public static byte[] decrypt(byte[] text, PrivateKey key) throws Exception\r\n    {\r\n        byte[] dectyptedText = null;\r\n        // decrypt the text using the private key\r\n        Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;,&quot;SunMSCAPI&quot;);\r\n        cipher.init(Cipher.DECRYPT_MODE, key);\r\n        dectyptedText = cipher.doFinal(text);\r\n        return dectyptedText;\r\n\r\n    }\r\n\r\nWhen I generate keypair with RSAEncryptUtil and no MSCAPI, everything works fine.\r\n\r\n    KeyPair keyPair = RSAEncryptUtil.generateKey();\r\n    RSAEncryptUtil.encryptFile(fileName, fileName + &quot;.enc&quot;, keyPair.getPublic());\r\n    RSAEncryptUtil.decryptFile(fileName + &quot;.enc&quot;, fileName + &quot;.dec&quot;, keyPair.getPrivate());\r\n\r\nWhen I use 1024 key length RSA in Windows-My, it works fine.\r\n\r\n[1]: https://github.com/ingoclaro/crypt-examples/blob/master/java/src/RSAEncryptUtil.java\r\n","title":"mscapi java.security.ProviderException: java.security.KeyException:: The parameter is incorrect","body":"<p>I get &quot;The parameter is incorrect&quot; exception when I try decrypt the encrypted file with MSCAPI. I use <a href=\"https://github.com/ingoclaro/crypt-examples/blob/master/java/src/RSAEncryptUtil.java\" rel=\"nofollow noreferrer\">RSAEncryptUtil.java</a> utility\nand JDK 1.8.0_201 for this homework project.</p>\n<pre><code>package hu.infokristaly.homework4rsaencdec;\n\nimport java.security.KeyStore;\nimport java.security.PrivateKey;\nimport java.security.PublicKey;\nimport java.security.cert.Certificate;\n\nimport sun.security.mscapi.SunMSCAPI;\n\npublic class Homework4RSAEncDec {\n\n    private static final String alias = &quot;papp zoltán&quot;;\n    private static final String fileName = &quot;c:\\\\temp\\\\test.txt&quot;;\n    \n    public static void main(String[] args) throws Exception {\n        KeyStore keyStore = KeyStore.getInstance(&quot;Windows-MY&quot;, new SunMSCAPI());\n        keyStore.load(null, null);\n        \n        Certificate cert = keyStore.getCertificate(alias);          \n        PublicKey pubKey = cert.getPublicKey();\n\n        RSAEncryptUtil.encryptFile(fileName, fileName + &quot;.enc&quot;, pubKey);\n\n        KeyStore.PasswordProtection  keyPassword = new KeyStore.PasswordProtection (&quot;&quot;.toCharArray());\n        KeyStore.PrivateKeyEntry selectedKey = (KeyStore.PrivateKeyEntry)keyStore.getEntry(alias, keyPassword);\n        PrivateKey privKey = selectedKey.getPrivateKey();\n\n        RSAEncryptUtil.decryptFile(fileName + &quot;.enc&quot;, fileName + &quot;.dec&quot;, privKey);\n    }\n\n}\n</code></pre>\n<p>The exception is occurred in cipher.doFinal at line 98 of RSAEncryptUtil.</p>\n<pre><code>public static byte[] decrypt(byte[] text, PrivateKey key) throws Exception\n{\n    byte[] dectyptedText = null;\n    // decrypt the text using the private key\n    Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/PKCS1Padding&quot;,&quot;SunMSCAPI&quot;);\n    cipher.init(Cipher.DECRYPT_MODE, key);\n    dectyptedText = cipher.doFinal(text);\n    return dectyptedText;\n\n}\n</code></pre>\n<p>When I generate keypair with RSAEncryptUtil and no MSCAPI, everything works fine.</p>\n<pre><code>KeyPair keyPair = RSAEncryptUtil.generateKey();\nRSAEncryptUtil.encryptFile(fileName, fileName + &quot;.enc&quot;, keyPair.getPublic());\nRSAEncryptUtil.decryptFile(fileName + &quot;.enc&quot;, fileName + &quot;.dec&quot;, keyPair.getPrivate());\n</code></pre>\n<p>When I use 1024 key length RSA in Windows-My, it works fine.</p>\n"},{"tags":["java","spring-boot","jpa"],"answers":[{"tags":[],"owner":{"account_id":13632774,"reputation":41,"user_id":9834497,"display_name":"Anwar Ansari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662974797,"creation_date":1662974797,"answer_id":73687101,"question_id":73686214,"body_markdown":"Try to add @Repository annotation on the PropertyRepository interface which you are trying to inject in AuditInterceptor class.","title":"Is it possible to add a spring bean to ejb EmptyInterceptor","body":"<p>Try to add @Repository annotation on the PropertyRepository interface which you are trying to inject in AuditInterceptor class.</p>\n"}],"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662991485,"creation_date":1662969958,"question_id":73686214,"body_markdown":"In my application I have the following interceptor:\r\n\r\n    public class AuditInterceptor extends EmptyInterceptor {\r\n\r\nadding `@Component` on the top of the class is working but I am not able to add a service bean from my application since I want to execute some service logic. What I am doing is the following is:\r\n\r\n    @Slf4j\r\n    @Component\r\n    public class AuditInterceptor extends EmptyInterceptor {\r\n\r\n    private final List&lt;Class&lt;?&gt;&gt; updates = new ArrayList&lt;&gt;();\r\n    private final List&lt;Class&lt;?&gt;&gt; creates = new ArrayList&lt;&gt;();\r\n    private final List&lt;Class&lt;?&gt;&gt; loads = new ArrayList&lt;&gt;();\r\n    private final List&lt;Class&lt;?&gt;&gt; deletes = new ArrayList&lt;&gt;();\r\n\r\n    private final TelemetryClient telemetryClient = new TelemetryClient();\r\n\r\n    private final PropertyRepository propertyRepository;\r\n\r\n    public AuditInterceptor(PropertyRepository propertyRepository) {\r\n        this.propertyRepository = propertyRepository;\r\n    }\r\n\r\nand it fails with:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;propertyPartnerRepository&#39; defined in com.microservice.persistence.PropertyPartnerRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean &#39;jpaMappingContext&#39; while setting bean property &#39;mappingContext&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jpaMappingContext&#39;: Invocation of init method failed; nested exception is org.hibernate.boot.registry.selector.spi.StrategySelectionException: Could not instantiate named strategy class [com.microservice.persistence.AuditInterceptor]\r\n\r\nI want to know if there is a way to execute add a service bean in this interceptor so I can execute some service logic?\r\n","title":"Is it possible to add a spring bean to ejb EmptyInterceptor","body":"<p>In my application I have the following interceptor:</p>\n<pre><code>public class AuditInterceptor extends EmptyInterceptor {\n</code></pre>\n<p>adding <code>@Component</code> on the top of the class is working but I am not able to add a service bean from my application since I want to execute some service logic. What I am doing is the following is:</p>\n<pre><code>@Slf4j\n@Component\npublic class AuditInterceptor extends EmptyInterceptor {\n\nprivate final List&lt;Class&lt;?&gt;&gt; updates = new ArrayList&lt;&gt;();\nprivate final List&lt;Class&lt;?&gt;&gt; creates = new ArrayList&lt;&gt;();\nprivate final List&lt;Class&lt;?&gt;&gt; loads = new ArrayList&lt;&gt;();\nprivate final List&lt;Class&lt;?&gt;&gt; deletes = new ArrayList&lt;&gt;();\n\nprivate final TelemetryClient telemetryClient = new TelemetryClient();\n\nprivate final PropertyRepository propertyRepository;\n\npublic AuditInterceptor(PropertyRepository propertyRepository) {\n    this.propertyRepository = propertyRepository;\n}\n</code></pre>\n<p>and it fails with:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'propertyPartnerRepository' defined in com.microservice.persistence.PropertyPartnerRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaMappingContext' while setting bean property 'mappingContext'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMappingContext': Invocation of init method failed; nested exception is org.hibernate.boot.registry.selector.spi.StrategySelectionException: Could not instantiate named strategy class [com.microservice.persistence.AuditInterceptor]\n</code></pre>\n<p>I want to know if there is a way to execute add a service bean in this interceptor so I can execute some service logic?</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","apache-kafka-streams","kafka-producer-api"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1662774527,"post_id":73664886,"comment_id":130090459,"body_markdown":"kcat skips transaction markers, I believe. How large are your transaction boundaries?","body":"kcat skips transaction markers, I believe. How large are your transaction boundaries?"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1662969916,"post_id":73664886,"comment_id":130120338,"body_markdown":"I tested consumption using `READ_UNCOMMITTED` with a Spring Kafka based consumer in addition to `kcat`, both results were the same. I&#39;m not sure what exactly *transaction boundaries* refers to. Are you referring to how large the offset jumps are? If so, they always seem to just be 1 (i.e. `5 -&gt; 7`, `14 -&gt; 15`, `25 -&gt; 27`, ...).","body":"I tested consumption using <code>READ_UNCOMMITTED</code> with a Spring Kafka based consumer in addition to <code>kcat</code>, both results were the same. I&#39;m not sure what exactly <i>transaction boundaries</i> refers to. Are you referring to how large the offset jumps are? If so, they always seem to just be 1 (i.e. <code>5 -&gt; 7</code>, <code>14 -&gt; 15</code>, <code>25 -&gt; 27</code>, ...)."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1662988237,"post_id":73664886,"comment_id":130126549,"body_markdown":"[This post describes transactions](https://www.confluent.io/blog/transactions-apache-kafka/) and markers. They are enabled by default in latest Kafka clients. By boundary, I mean, how many records are in each transaction? I don&#39;t imagine Kafka Streams puts in more than one record, so that&#39;s why you&#39;d see &quot;every other offset&quot; for your own data, separate from the transaction marker offsets in the same topic","body":"<a href=\"https://www.confluent.io/blog/transactions-apache-kafka/\" rel=\"nofollow noreferrer\">This post describes transactions</a> and markers. They are enabled by default in latest Kafka clients. By boundary, I mean, how many records are in each transaction? I don&#39;t imagine Kafka Streams puts in more than one record, so that&#39;s why you&#39;d see &quot;every other offset&quot; for your own data, separate from the transaction marker offsets in the same topic"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1662991297,"post_id":73664886,"comment_id":130127800,"body_markdown":"Thanks for the link - very informative. *how many records are in each transaction* Sorry for misinterpreting. Unless I&#39;m completely misinterpreting it, it seems that the number of records in each transaction for that topic-partition (at least, going by the above offsets) is different every time (first `6`, then `8`, then `10`, ...), which is why I thought this might have to do with batching different numbers of messages in a single TX.","body":"Thanks for the link - very informative. <i>how many records are in each transaction</i> Sorry for misinterpreting. Unless I&#39;m completely misinterpreting it, it seems that the number of records in each transaction for that topic-partition (at least, going by the above offsets) is different every time (first <code>6</code>, then <code>8</code>, then <code>10</code>, ...), which is why I thought this might have to do with batching different numbers of messages in a single TX."},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1662991397,"post_id":73664886,"comment_id":130127847,"body_markdown":"But I&#39;m unsure as to how I would verify this. I can&#39;t say for sure that record offsets `0` to `5` were produced in the same transaction, I&#39;m not sure how I would even check that barring `DEBUG` logs (which I will do if there&#39;s no better way to tell). Basically, I wish to understand this gap and make sure that I don&#39;t misinterpret it. I hope I&#39;ve communicated the question well.","body":"But I&#39;m unsure as to how I would verify this. I can&#39;t say for sure that record offsets <code>0</code> to <code>5</code> were produced in the same transaction, I&#39;m not sure how I would even check that barring <code>DEBUG</code> logs (which I will do if there&#39;s no better way to tell). Basically, I wish to understand this gap and make sure that I don&#39;t misinterpret it. I hope I&#39;ve communicated the question well."}],"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":492,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662991426,"creation_date":1662739959,"question_id":73664886,"body_markdown":"This question is *similar* to https://stackoverflow.com/a/54637004 but I am not 100% sure that it is the exact same situation - it presents slightly differently at least.\r\n\r\nI noticed that a topic that I am writing to using Kafka Streams, as in the above question, does not have a continuous value for the offsets in any given partition. This is *expected* when using exactly-once semantics, but the &quot;gaps&quot; seem a little confusing to me.\r\n\r\nThe behaviour I&#39;m seeing similar is the following:\r\n\r\n```\r\n$ kcat -C -b &lt;broker&gt; -t &lt;topic&gt; -o beginning -f &#39;%o\\n&#39; -p 0\r\n0\r\n1\r\n2\r\n3\r\n4\r\n5\r\n7  &lt;-- Gap in offsets after 6 records\r\n8\r\n...\r\n13\r\n14\r\n16 &lt;-- Gap in offsets after 8 records\r\n17\r\n...\r\n24\r\n25\r\n27 &lt;-- Gap in offsets after 10 records\r\n...\r\n```\r\n(note that kcat uses the librdkafka default, `READ_COMMITTED`, when consuming)\r\n\r\nAs opposed to the picture in the above question, the &quot;commit marker offset&quot; (i.e. the gap) is at very different locations.\r\n\r\nI tried to check whether there might be any aborted messages in the topic, but did not find any when reading with `READ_UNCOMMITTED` isolation level, which leads me to believe that the gaps are indeed due to the commit marker.\r\n\r\nAm I understanding correctly that the different gap sizes between offsets is due to Kafka Streams producing different numbers of messages in a given transaction batch (through e.g. `max.message.bytes`)?","title":"Understanding offset jumps in topic produced to by Kafka Streams","body":"<p>This question is <em>similar</em> to <a href=\"https://stackoverflow.com/a/54637004\">https://stackoverflow.com/a/54637004</a> but I am not 100% sure that it is the exact same situation - it presents slightly differently at least.</p>\n<p>I noticed that a topic that I am writing to using Kafka Streams, as in the above question, does not have a continuous value for the offsets in any given partition. This is <em>expected</em> when using exactly-once semantics, but the &quot;gaps&quot; seem a little confusing to me.</p>\n<p>The behaviour I'm seeing similar is the following:</p>\n<pre><code>$ kcat -C -b &lt;broker&gt; -t &lt;topic&gt; -o beginning -f '%o\\n' -p 0\n0\n1\n2\n3\n4\n5\n7  &lt;-- Gap in offsets after 6 records\n8\n...\n13\n14\n16 &lt;-- Gap in offsets after 8 records\n17\n...\n24\n25\n27 &lt;-- Gap in offsets after 10 records\n...\n</code></pre>\n<p>(note that kcat uses the librdkafka default, <code>READ_COMMITTED</code>, when consuming)</p>\n<p>As opposed to the picture in the above question, the &quot;commit marker offset&quot; (i.e. the gap) is at very different locations.</p>\n<p>I tried to check whether there might be any aborted messages in the topic, but did not find any when reading with <code>READ_UNCOMMITTED</code> isolation level, which leads me to believe that the gaps are indeed due to the commit marker.</p>\n<p>Am I understanding correctly that the different gap sizes between offsets is due to Kafka Streams producing different numbers of messages in a given transaction batch (through e.g. <code>max.message.bytes</code>)?</p>\n"},{"tags":["java","android","android-studio","admob","handler"],"answers":[{"tags":[],"owner":{"account_id":15984131,"reputation":99,"user_id":11535103,"display_name":"Rakshit Tanti"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1662991306,"creation_date":1662980285,"answer_id":73688200,"question_id":73688001,"body_markdown":"If the delay in postDelay extends beyound the activity lifetime, the runnable will execute after the activity has been destryed and will lead app crash. You should use a common handler. To clear the handler, you can call `handler.removeCallbacksAndMessages(null);` in on destroy or wherever else you want to clear them.\r\n\r\n\r\n    Handler handler;\r\n\r\n    @Override\r\n    public void onCreate(@Nullable Bundle savedInstanceState, @Nullable PersistableBundle persistentState) {\r\n        super.onCreate(savedInstanceState, persistentState);\r\n\r\n        handler = new Handler();\r\n        btnPause.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                if (mInterstitialAd != null) {\r\n\r\n                    mInterstitialAd.show(Activityone.this);\r\n\r\n                    mInterstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\r\n                        @Override\r\n                        public void onAdDismissedFullScreenContent() {\r\n\r\n                        }\r\n\r\n                        @Override\r\n                        public void onAdFailedToShowFullScreenContent(@NonNull AdError adError) {\r\n\r\n                        }\r\n\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        requestNewInterstitial(5);\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        handler.removeCallbacksAndMessages(null)\r\n        super.onDestroy();\r\n    }\r\n\r\n\r\n    private void requestNewInterstitial(int maxRetry) {\r\n        AdRequest adRequest = new AdRequest.Builder().build();\r\n        InterstitialAd.load(Activityone.this, getString(R.string.interid), adRequest, new InterstitialAdLoadCallback() {\r\n            @Override\r\n            public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\r\n                mInterstitialAd = interstitialAd;\r\n            }\r\n\r\n            @Override\r\n            public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n\r\n\r\n                if (maxRetry &gt; 0) {\r\n\r\n                    handler.postDelayed(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            mInterstitialAd = null;\r\n                            requestNewInterstitial(maxRetry - 1);\r\n\r\n                        }\r\n                    }, 1000);\r\n\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n","title":"Is it okay to use/invoke new Handler() in a loop?","body":"<p>If the delay in postDelay extends beyound the activity lifetime, the runnable will execute after the activity has been destryed and will lead app crash. You should use a common handler. To clear the handler, you can call <code>handler.removeCallbacksAndMessages(null);</code> in on destroy or wherever else you want to clear them.</p>\n<pre><code>Handler handler;\n\n@Override\npublic void onCreate(@Nullable Bundle savedInstanceState, @Nullable PersistableBundle persistentState) {\n    super.onCreate(savedInstanceState, persistentState);\n\n    handler = new Handler();\n    btnPause.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n\n            if (mInterstitialAd != null) {\n\n                mInterstitialAd.show(Activityone.this);\n\n                mInterstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\n                    @Override\n                    public void onAdDismissedFullScreenContent() {\n\n                    }\n\n                    @Override\n                    public void onAdFailedToShowFullScreenContent(@NonNull AdError adError) {\n\n                    }\n\n                });\n            }\n        }\n    });\n}\n\n@Override\nprotected void onResume() {\n    super.onResume();\n    requestNewInterstitial(5);\n\n}\n\n@Override\nprotected void onDestroy() {\n    handler.removeCallbacksAndMessages(null)\n    super.onDestroy();\n}\n\n\nprivate void requestNewInterstitial(int maxRetry) {\n    AdRequest adRequest = new AdRequest.Builder().build();\n    InterstitialAd.load(Activityone.this, getString(R.string.interid), adRequest, new InterstitialAdLoadCallback() {\n        @Override\n        public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\n            mInterstitialAd = interstitialAd;\n        }\n\n        @Override\n        public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n\n\n            if (maxRetry &gt; 0) {\n\n                handler.postDelayed(new Runnable() {\n                    @Override\n                    public void run() {\n                        mInterstitialAd = null;\n                        requestNewInterstitial(maxRetry - 1);\n\n                    }\n                }, 1000);\n\n\n            }\n        }\n    });\n}\n</code></pre>\n"}],"owner":{"account_id":25929375,"reputation":69,"user_id":19650731,"display_name":"Eldestornillador"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662991306,"creation_date":1662979299,"question_id":73688001,"body_markdown":"I am using `new Handler().postDelayed` to set a delay when reloading an ad when the previous request of the ad has failed in the `requestNewInterstitial` method. I am wondering if invoking/creating many new Handlers would be okay as in my loop the new Handler line of code could be run up to 5 times. My question is, if later I have to clear the handler in the Activity `onDestroy` method so that there are no memory leaks, should I clear it only once or should I clean all the new Handlers I have created (the number of times that the loop is run). Also, how could I implement to clear the Handler `OnDestroy` method?\r\n\r\nThis is my code:\r\n\r\n\r\n```java\r\n @Override\r\n      protected void onResume() {\r\n        super.onResume();\r\n        requestNewInterstitial(5);\r\n\r\n        }\r\n\r\n\r\n private void requestNewInterstitial(int maxRetry) {\r\n        AdRequest adRequest = new AdRequest.Builder().build();\r\n        InterstitialAd.load(Activityone.this, getString(R.string.interid),\r\n                adRequest, new InterstitialAdLoadCallback() {\r\n                    @Override\r\n                    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\r\n                        mInterstitialAd = interstitialAd;\r\n                    }\r\n\r\n                    @Override\r\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n\r\n\r\n          if (maxRetry&gt;0){\r\n                         \r\n                    new Handler().postDelayed(new Runnable() {\r\n          @Override\r\n          public void run() {\r\n              mInterstitialAd = null;\r\n              requestNewInterstitial(maxRetry-1);\r\n\r\n          }\r\n      }, 1000);\r\n              \r\n                   \r\n                    }\r\n                });\r\n                     }\r\n           \r\n    }\r\n\r\n\r\n\r\n\r\n  btnPause.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n            \r\n                if (mInterstitialAd != null) {\r\n\r\n                    mInterstitialAd.show(Activityone.this);\r\n\r\n                    mInterstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\r\n                        @Override\r\n                        public void onAdDismissedFullScreenContent() {\r\n                  \r\n                        }\r\n\r\n                        @Override\r\n                        public void onAdFailedToShowFullScreenContent(@NonNull AdError adError) {\r\n\r\n                        }\r\n\r\n                    });\r\n```\r\nThanks for the help.\r\n","title":"Is it okay to use/invoke new Handler() in a loop?","body":"<p>I am using <code>new Handler().postDelayed</code> to set a delay when reloading an ad when the previous request of the ad has failed in the <code>requestNewInterstitial</code> method. I am wondering if invoking/creating many new Handlers would be okay as in my loop the new Handler line of code could be run up to 5 times. My question is, if later I have to clear the handler in the Activity <code>onDestroy</code> method so that there are no memory leaks, should I clear it only once or should I clean all the new Handlers I have created (the number of times that the loop is run). Also, how could I implement to clear the Handler <code>OnDestroy</code> method?</p>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Override\n      protected void onResume() {\n        super.onResume();\n        requestNewInterstitial(5);\n\n        }\n\n\n private void requestNewInterstitial(int maxRetry) {\n        AdRequest adRequest = new AdRequest.Builder().build();\n        InterstitialAd.load(Activityone.this, getString(R.string.interid),\n                adRequest, new InterstitialAdLoadCallback() {\n                    @Override\n                    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\n                        mInterstitialAd = interstitialAd;\n                    }\n\n                    @Override\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n\n\n          if (maxRetry&gt;0){\n                         \n                    new Handler().postDelayed(new Runnable() {\n          @Override\n          public void run() {\n              mInterstitialAd = null;\n              requestNewInterstitial(maxRetry-1);\n\n          }\n      }, 1000);\n              \n                   \n                    }\n                });\n                     }\n           \n    }\n\n\n\n\n  btnPause.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n            \n                if (mInterstitialAd != null) {\n\n                    mInterstitialAd.show(Activityone.this);\n\n                    mInterstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\n                        @Override\n                        public void onAdDismissedFullScreenContent() {\n                  \n                        }\n\n                        @Override\n                        public void onAdFailedToShowFullScreenContent(@NonNull AdError adError) {\n\n                        }\n\n                    });\n</code></pre>\n<p>Thanks for the help.</p>\n"},{"tags":["java","docker","selenium","memory-leaks","selenium-chromedriver"],"owner":{"account_id":23366219,"reputation":11,"user_id":17437824,"display_name":"Daryna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1662990457,"creation_date":1662990457,"question_id":73690360,"body_markdown":"I have a multymodule project, that have 5 containers in docker. And I use selenium hub 4.3 and chrome node 4.3 for taking screenshots in  usual flow (not for tests). The problem is that chrome node creates a lot of folders in tmp directory, and this leads to overusing memory in docker containers.\r\nThat is my settings for docker containers with selenium and chrome\r\n\r\n \r\n\r\n         selenium_hub:\r\n        image: selenium/hub:4.3\r\n        ports:\r\n          - &quot;4444:4444&quot;\r\n        networks:\r\n          - selenium\r\n      chrome:\r\n        image: selenium/node-chrome:4.3\r\n        shm_size: &#39;2gb&#39;\r\n        depends_on:\r\n          - selenium_hub\r\n        environment:\r\n          - HUB_HOST=selenium_hub\r\n          - SE_EVENT_BUS_HOST=selenium_hub\r\n          - SE_EVENT_BUS_PUBLISH_PORT=4442\r\n          - SE_EVENT_BUS_SUBSCRIBE_PORT=4443\r\n          - SE_NODE_MAX_SESSIONS=2\r\n        networks:\r\n          - selenium\r\n\r\nand this is my truncated code of the method that takes screenshots\r\n\r\n    public ImageDto getScreenshot() {\r\n            DesiredCapabilities dc = new DesiredCapabilities();\r\n            ChromeOptions chromeOptions = new ChromeOptions();\r\n            chromeOptions.addArguments(&quot;--headless&quot;);\r\n            chromeOptions.addArguments(&quot;--no-sandbox&quot;);\r\n            chromeOptions.addArguments(&quot;--disable-dev-shm-usage&quot;);\r\n            dc.merge(chromeOptions);\r\n            if (chromeDriver == null || chromeDriver.getSessionId() == null)\r\n                chromeDriver = new RemoteWebDriver(new URL(seleniumHubUrl), dc);\r\n            WebElement widgetElement = chromeDriver.findElement(By.className(widget.getWidgetDivClassname()));\r\n            File screenshot = ((TakesScreenshot) chromeDriver).getScreenshotAs(OutputType.FILE);\r\n            BufferedImage f = ImageIO.read(screenshot);\r\n            if (chromeDriver != null) {\r\n                chromeDriver.manage().deleteAllCookies();\r\n            }\r\n        }\r\n    \r\n        @Scheduled(cron = &quot;0 0 0 * * *&quot;, zone = NEW_YORK_ZONE_NAME)\r\n        public void recreateTwitterLoggersForNewDayScheduledJob() throws IOException {\r\n            FileUtils.deleteDirectory(new File(folderName));\r\n            folderName = createFolderForScreenshots();\r\n    \r\n            if (chromeDriver != null) {\r\n                chromeDriver.manage().deleteAllCookies();\r\n                chromeDriver.close();\r\n                chromeDriver.quit();\r\n            }\r\n        }\r\nI tried to close and quit webdriver after every screenshot taking, but that doesn&#39;t help. How can I prevent memory leaking using chrome node?","title":"Chromenode creates a lot of folders in tmp directory","body":"<p>I have a multymodule project, that have 5 containers in docker. And I use selenium hub 4.3 and chrome node 4.3 for taking screenshots in  usual flow (not for tests). The problem is that chrome node creates a lot of folders in tmp directory, and this leads to overusing memory in docker containers.\nThat is my settings for docker containers with selenium and chrome</p>\n<pre><code>     selenium_hub:\n    image: selenium/hub:4.3\n    ports:\n      - &quot;4444:4444&quot;\n    networks:\n      - selenium\n  chrome:\n    image: selenium/node-chrome:4.3\n    shm_size: '2gb'\n    depends_on:\n      - selenium_hub\n    environment:\n      - HUB_HOST=selenium_hub\n      - SE_EVENT_BUS_HOST=selenium_hub\n      - SE_EVENT_BUS_PUBLISH_PORT=4442\n      - SE_EVENT_BUS_SUBSCRIBE_PORT=4443\n      - SE_NODE_MAX_SESSIONS=2\n    networks:\n      - selenium\n</code></pre>\n<p>and this is my truncated code of the method that takes screenshots</p>\n<pre><code>public ImageDto getScreenshot() {\n        DesiredCapabilities dc = new DesiredCapabilities();\n        ChromeOptions chromeOptions = new ChromeOptions();\n        chromeOptions.addArguments(&quot;--headless&quot;);\n        chromeOptions.addArguments(&quot;--no-sandbox&quot;);\n        chromeOptions.addArguments(&quot;--disable-dev-shm-usage&quot;);\n        dc.merge(chromeOptions);\n        if (chromeDriver == null || chromeDriver.getSessionId() == null)\n            chromeDriver = new RemoteWebDriver(new URL(seleniumHubUrl), dc);\n        WebElement widgetElement = chromeDriver.findElement(By.className(widget.getWidgetDivClassname()));\n        File screenshot = ((TakesScreenshot) chromeDriver).getScreenshotAs(OutputType.FILE);\n        BufferedImage f = ImageIO.read(screenshot);\n        if (chromeDriver != null) {\n            chromeDriver.manage().deleteAllCookies();\n        }\n    }\n\n    @Scheduled(cron = &quot;0 0 0 * * *&quot;, zone = NEW_YORK_ZONE_NAME)\n    public void recreateTwitterLoggersForNewDayScheduledJob() throws IOException {\n        FileUtils.deleteDirectory(new File(folderName));\n        folderName = createFolderForScreenshots();\n\n        if (chromeDriver != null) {\n            chromeDriver.manage().deleteAllCookies();\n            chromeDriver.close();\n            chromeDriver.quit();\n        }\n    }\n</code></pre>\n<p>I tried to close and quit webdriver after every screenshot taking, but that doesn't help. How can I prevent memory leaking using chrome node?</p>\n"},{"tags":["java","lambda","deferred"],"answers":[{"tags":[],"owner":{"account_id":15083,"reputation":22025,"user_id":31506,"display_name":"Jack Leow"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662937284,"creation_date":1662937284,"answer_id":73683162,"question_id":73683078,"body_markdown":"There are a few different solutions to your problem, depending on how your third-party library has changed.\r\n\r\nI&#39;m assuming version 2 of your third-party class has new methods that are not on version 1 that you need?\r\n\r\nThe simplest solution is to implement your class against version 2 of the library, but handling [LinkageError][1] (or more a more specific subclass, for instance [NoSuchMethodError][2]), and reverting to version 1 calls if these errors are caught. You can also handle if it&#39;s a completely different class, by handling [NoClassDefFoundError][3].\r\n\r\nAlternatively, if performance isn&#39;t critical, you can also use [reflection][4].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/LinkageError.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/lang/NoSuchMethodError.html\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/lang/NoClassDefFoundError.html\r\n  [4]: https://www.oracle.com/technical-resources/articles/java/javareflection.html","title":"Is there a way to call a deferred implementation in Java?","body":"<p>There are a few different solutions to your problem, depending on how your third-party library has changed.</p>\n<p>I'm assuming version 2 of your third-party class has new methods that are not on version 1 that you need?</p>\n<p>The simplest solution is to implement your class against version 2 of the library, but handling <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/LinkageError.html\" rel=\"nofollow noreferrer\">LinkageError</a> (or more a more specific subclass, for instance <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/NoSuchMethodError.html\" rel=\"nofollow noreferrer\">NoSuchMethodError</a>), and reverting to version 1 calls if these errors are caught. You can also handle if it's a completely different class, by handling <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/NoClassDefFoundError.html\" rel=\"nofollow noreferrer\">NoClassDefFoundError</a>.</p>\n<p>Alternatively, if performance isn't critical, you can also use <a href=\"https://www.oracle.com/technical-resources/articles/java/javareflection.html\" rel=\"nofollow noreferrer\">reflection</a>.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662949094,"creation_date":1662937352,"answer_id":73683166,"question_id":73683078,"body_markdown":"Sort of. Java doesn&#39;t load a class unless you actually need it. This means you can do something like this:\r\n\r\n```\r\npublic String getFoo() {\r\n  switch (versionRequired()) {\r\n    case 1: return new Version1Impl().getFoo();\r\n    default: return new Version2Impl().getFoo();\r\n  }\r\n}\r\n\r\nboolean versionRequired() {\r\n  // figure out which version is needed here.\r\n  // if you&#39;re having trouble with this, you can use `Class.forName` to check\r\n  // if a certain type is even available. Worst case scenario, you can\r\n  // ask a class for its own bytecode and hash that. This is very tricky.\r\n  return 1;\r\n}\r\n\r\nprivate static class Version1Impl {\r\n  public String getFoo() {\r\n    return new UseSomethingFromV1().getFoo();\r\n  }\r\n}\r\n```\r\n\r\nThe clue with the weird &#39;redirect to an inner class&#39; stuff here is that the inner class won&#39;t be loaded until the switch branch is taken, and as long as e.g. `Version2Impl` never loads, you also never get the error that it is referring to a class that doesn&#39;t exist (because it was designed for v2 of that library, but only v1 is available).\r\n\r\n\r\n-----\r\n\r\nNB: About that version detection scheme: The problem with hashing classes is that a class may not have changed between 2 major releases (you wanted it to be different but it will not be). Or, on the flip side, a minor point release update may have changed it (it is now different, but you did not want it to be). One solution is to hash a lot of classes, which helps with the first case (you want to notice changes), but makes the second worse. You can do this with e.g. `try (InputStream in = String.class.getResourceAsStream(&quot;String.class&quot;)) {` - which works for any class. Toss this inputstream through a hasher (search the web if you don&#39;t know how, this is a _very_ common task, plenty of tutorials to find).\r\n\r\nMany libraries have a supported way to ask them what version they are, but there is no standard, so check the docs of this library.\r\n","title":"Is there a way to call a deferred implementation in Java?","body":"<p>Sort of. Java doesn't load a class unless you actually need it. This means you can do something like this:</p>\n<pre><code>public String getFoo() {\n  switch (versionRequired()) {\n    case 1: return new Version1Impl().getFoo();\n    default: return new Version2Impl().getFoo();\n  }\n}\n\nboolean versionRequired() {\n  // figure out which version is needed here.\n  // if you're having trouble with this, you can use `Class.forName` to check\n  // if a certain type is even available. Worst case scenario, you can\n  // ask a class for its own bytecode and hash that. This is very tricky.\n  return 1;\n}\n\nprivate static class Version1Impl {\n  public String getFoo() {\n    return new UseSomethingFromV1().getFoo();\n  }\n}\n</code></pre>\n<p>The clue with the weird 'redirect to an inner class' stuff here is that the inner class won't be loaded until the switch branch is taken, and as long as e.g. <code>Version2Impl</code> never loads, you also never get the error that it is referring to a class that doesn't exist (because it was designed for v2 of that library, but only v1 is available).</p>\n<hr />\n<p>NB: About that version detection scheme: The problem with hashing classes is that a class may not have changed between 2 major releases (you wanted it to be different but it will not be). Or, on the flip side, a minor point release update may have changed it (it is now different, but you did not want it to be). One solution is to hash a lot of classes, which helps with the first case (you want to notice changes), but makes the second worse. You can do this with e.g. <code>try (InputStream in = String.class.getResourceAsStream(&quot;String.class&quot;)) {</code> - which works for any class. Toss this inputstream through a hasher (search the web if you don't know how, this is a <em>very</em> common task, plenty of tutorials to find).</p>\n<p>Many libraries have a supported way to ask them what version they are, but there is no standard, so check the docs of this library.</p>\n"},{"tags":[],"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662990369,"creation_date":1662990369,"answer_id":73690347,"question_id":73683078,"body_markdown":"For now, I&#39;ve created a file based solution.  Look for a file on the class path, if it is there, read what version is indicated from the file. If there is no file, use the default (original) version.  \r\n\r\n    package com.nach.core.util.fhir.parser;\r\n    \r\n    import java.io.File;\r\n    \r\n    import org.hl7.fhir.instance.model.api.IBaseResource;\r\n    \r\n    import com.nach.core.util.file.FileUtil;\r\n    \r\n    import ca.uhn.fhir.context.FhirContext;\r\n    import ca.uhn.fhir.parser.IParser;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    \r\n    @Slf4j\r\n    public class FhirJsonParser {\r\n    \r\n    \tprivate static final FhirContext CTX;\r\n    \t\r\n    \tprivate static final IParser PARSER;\r\n    \r\n    \tstatic {\r\n    \t\tFile fhirContextFile = FileUtil.getFile(&quot;/fhir-context.txt&quot;);\r\n    \t\tif (fhirContextFile != null &amp;&amp; fhirContextFile.exists()) {\r\n    \t\t\tString fhirContext = FileUtil.getAsString(fhirContextFile).trim();\r\n    \t\t\tif (&quot;Dstu3&quot;.equals(fhirContext)) {\r\n    \t\t\t\tlog.info(&quot;USING DSTU3 FOR FHIR PARSING&quot;);\r\n    \t\t\t\tCTX = FhirContext.forDstu3();\r\n    \t\t\t} else if (&quot;R4&quot;.equals(fhirContext)) {\r\n    \t\t\t\tlog.info(&quot;USING R4 FOR FHIR PARSING&quot;);\r\n    \t\t\t\tCTX = FhirContext.forR4();\r\n    \t\t\t} else {\r\n    \t\t\t\tCTX = FhirContext.forDstu3();\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\tCTX = FhirContext.forDstu3();\r\n    \t\t}\r\n    \t\tPARSER = CTX.newJsonParser();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Generate a class from a json string.\r\n    \t */\r\n    \tpublic static &lt;T extends IBaseResource&gt; T parse(String jsonString, Class&lt;T&gt; cls) {\r\n    \t\ttry {\r\n    \t\t\tIParser parser = CTX.newJsonParser();\r\n    \t\t\tparser.setStripVersionsFromReferences(false);\r\n    \t\t\tCTX.getParserOptions().setStripVersionsFromReferences(false);\r\n    \t\t\tIParser jsonParser = CTX.newJsonParser();\r\n    \t\t\tT rtn = jsonParser.parseResource(cls, jsonString);\r\n    \t\t\treturn rtn;\r\n    \t\t} catch (Exception exp) {\r\n    \t\t\tthrow new RuntimeException(exp);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Generate a json string from a class.\r\n    \t */\r\n    \tpublic static String serialize(IBaseResource resource) {\r\n    \t\tString rtn = PARSER.encodeResourceToString(resource);\r\n    \t\treturn rtn;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n","title":"Is there a way to call a deferred implementation in Java?","body":"<p>For now, I've created a file based solution.  Look for a file on the class path, if it is there, read what version is indicated from the file. If there is no file, use the default (original) version.</p>\n<pre><code>package com.nach.core.util.fhir.parser;\n\nimport java.io.File;\n\nimport org.hl7.fhir.instance.model.api.IBaseResource;\n\nimport com.nach.core.util.file.FileUtil;\n\nimport ca.uhn.fhir.context.FhirContext;\nimport ca.uhn.fhir.parser.IParser;\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\npublic class FhirJsonParser {\n\n    private static final FhirContext CTX;\n    \n    private static final IParser PARSER;\n\n    static {\n        File fhirContextFile = FileUtil.getFile(&quot;/fhir-context.txt&quot;);\n        if (fhirContextFile != null &amp;&amp; fhirContextFile.exists()) {\n            String fhirContext = FileUtil.getAsString(fhirContextFile).trim();\n            if (&quot;Dstu3&quot;.equals(fhirContext)) {\n                log.info(&quot;USING DSTU3 FOR FHIR PARSING&quot;);\n                CTX = FhirContext.forDstu3();\n            } else if (&quot;R4&quot;.equals(fhirContext)) {\n                log.info(&quot;USING R4 FOR FHIR PARSING&quot;);\n                CTX = FhirContext.forR4();\n            } else {\n                CTX = FhirContext.forDstu3();\n            }\n        } else {\n            CTX = FhirContext.forDstu3();\n        }\n        PARSER = CTX.newJsonParser();\n    }\n\n    /**\n     * Generate a class from a json string.\n     */\n    public static &lt;T extends IBaseResource&gt; T parse(String jsonString, Class&lt;T&gt; cls) {\n        try {\n            IParser parser = CTX.newJsonParser();\n            parser.setStripVersionsFromReferences(false);\n            CTX.getParserOptions().setStripVersionsFromReferences(false);\n            IParser jsonParser = CTX.newJsonParser();\n            T rtn = jsonParser.parseResource(cls, jsonString);\n            return rtn;\n        } catch (Exception exp) {\n            throw new RuntimeException(exp);\n        }\n    }\n\n    /**\n     * Generate a json string from a class.\n     */\n    public static String serialize(IBaseResource resource) {\n        String rtn = PARSER.encodeResourceToString(resource);\n        return rtn;\n    }\n    \n}\n</code></pre>\n"}],"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73683166,"answer_count":3,"score":0,"last_activity_date":1662990369,"creation_date":1662936083,"question_id":73683078,"body_markdown":"I&#39;m not sure if the terminology is exactly correct here.  \r\n\r\nI have a class with some static methods that are called by several other classes in some library code written long ago.  \r\n\r\nThe class with the static methods that are called by several other classes has a reference to a third party class that now has a version 2.  \r\n\r\nIs there a way I can code this class to do something like &quot;when this static method is call, there will be something that you need to call to see which version of the library you should be using&quot;?  \r\n\r\nSuch that when I pull this library code in to a new project as a jar file, I can include something in each project that will tell my class in the library with the static methods to use a specific version.  \r\n\r\nSuch that I don&#39;t need to provide a version1 and version2 of each of the classes in my library.\r\n\r\nAm I on the right track with deferred? \r\n\r\nA lambda function maybe?\r\n\r\n  ","title":"Is there a way to call a deferred implementation in Java?","body":"<p>I'm not sure if the terminology is exactly correct here.</p>\n<p>I have a class with some static methods that are called by several other classes in some library code written long ago.</p>\n<p>The class with the static methods that are called by several other classes has a reference to a third party class that now has a version 2.</p>\n<p>Is there a way I can code this class to do something like &quot;when this static method is call, there will be something that you need to call to see which version of the library you should be using&quot;?</p>\n<p>Such that when I pull this library code in to a new project as a jar file, I can include something in each project that will tell my class in the library with the static methods to use a specific version.</p>\n<p>Such that I don't need to provide a version1 and version2 of each of the classes in my library.</p>\n<p>Am I on the right track with deferred?</p>\n<p>A lambda function maybe?</p>\n"},{"tags":["java","processing"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1662475597,"post_id":73623903,"comment_id":130011130,"body_markdown":"Does this answer your question? [How to convert hex to rgb using Java?](https://stackoverflow.com/questions/4129666/how-to-convert-hex-to-rgb-using-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/4129666/how-to-convert-hex-to-rgb-using-java\">How to convert hex to rgb using Java?</a>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1662475649,"post_id":73623903,"comment_id":130011151,"body_markdown":"&quot;but this int is not meaningful as a representation of colour in Processing&quot; What does it convert it to, and what are you expecting instead? Is it because you need to convert `FFC990C0` instead of `#C990C0`?","body":"&quot;but this int is not meaningful as a representation of colour in Processing&quot; What does it convert it to, and what are you expecting instead? Is it because you need to convert <code>FFC990C0</code> instead of <code>#C990C0</code>?"},{"owner":{"account_id":19789231,"reputation":149,"user_id":14492562,"display_name":"chemFour"},"score":0,"creation_date":1662477160,"post_id":73623903,"comment_id":130011815,"body_markdown":"Ok, thanks @xerx593. This is not exactly the solution I was looking for but it works to ... `import java.awt.Color;` and then get the r g b ints using `Color col = Color.decode(hexStringColour);` ... `int r = col.getRed();` etc.","body":"Ok, thanks @xerx593. This is not exactly the solution I was looking for but it works to ... <code>import java.awt.Color;</code> and then get the r g b ints using <code>Color col = Color.decode(hexStringColour);</code> ... <code>int r = col.getRed();</code> etc."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1662477350,"post_id":73623903,"comment_id":130011906,"body_markdown":"My favorite was the [custom function](https://stackoverflow.com/a/4129754/592355) ! ..with byte shifts! ;P","body":"My favorite was the <a href=\"https://stackoverflow.com/a/4129754/592355\">custom function</a> ! ..with byte shifts! ;P"}],"answers":[{"tags":[],"owner":{"account_id":32369,"reputation":51044,"user_id":89766,"accept_rate":92,"display_name":"George Profenza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662989815,"creation_date":1662482190,"answer_id":73625266,"question_id":73623903,"body_markdown":"You&#39;re on the right track using [`unhex()`][1].\r\n\r\nProcessing tries to be too nice in this case and it ends up being confusing.\r\nWithin the Processing editor you can use `color(#C990C0)` (though this wouldn&#39;t work in other editors easily).\r\n\r\nSimilarly `color` type is an `int` behind the scenes.\r\n(It stores the 4 bytes: alpha, red, breen, blue as a 32bit integer)\r\n\r\nAnd there&#39;s yet another catch with `unhex()`: number formatting.\r\nYou can use digits from `0` to `9` and letters `A` to `F`, but not other prefixes (such as `#` or `0x` for example).\r\nOn top of that it expects colours in `ARGB` (**not** `RGBA`) and that means you do need to specify the alpha value (otherwise, if the first two hex digits(alpha channel) is missing `00` is implied so your colour will be invisible).\r\n\r\nIn your case, you&#39;d format the colour as: `&quot;FFC990C0&quot;`\r\n\r\nHere&#39;s a test sketch:\r\n```\r\nJSONObject myData = JSONObject.parse(&quot;{\\&quot;color\\&quot;:\\&quot;FFC990C0\\&quot;}&quot;);\r\n\r\ncolor myColor = unhex(myData.getString(&quot;color&quot;));\r\n\r\nfill(myColor);\r\nrect(0, 0, 50, 100);\r\n\r\n// notice the colour doesn&#39;t show because the FF alpha prefix is missing\r\nfill(unhex(&quot;C990C0&quot;));\r\nrect(50, 0, 50, 100);\r\n```\r\n\r\n**Update** After a bit of digging around it was interesting to spot this:\r\n\r\n    println(JSONObject.parse(&quot;{\\&quot;color\\&quot;:0xC990C0}&quot;).get(&quot;color&quot;) instanceof String);\r\n\r\nIt prints `true` when I was expecting `false` (expecting `Integer` instead). (it does work as expected for `0-9`, but not `A-F`).\r\n\r\nProcessing thinks `0xC990C0` is a `String` (notice it has no double quotes surrounding the value), probably due to [this][2]. \r\nAlso, [`unhex()`][3] uses [`Long.parseLong()`][3] which limits the usage of `0x`, `#` or similar prefixes.\r\n\r\nYou can use `Long.decode(&quot;#C990C0&quot;)` instead though (e.g. `color myColor = Long.parseLong(myData.getString(&quot;color&quot;)).intValue();`)\r\n.\r\n\r\n\r\n  [1]: https://processing.org/reference/unhex_.html\r\n  [2]: https://github.com/processing/processing4/blob/main/core/src/processing/data/JSONObject.java#L1556\r\n  [3]: https://github.com/processing/processing4/blob/main/core/src/processing/core/PApplet.java#L9379","title":"How to convert a hex colour value stored as a String into an actual hex value in Processing?","body":"<p>You're on the right track using <a href=\"https://processing.org/reference/unhex_.html\" rel=\"nofollow noreferrer\"><code>unhex()</code></a>.</p>\n<p>Processing tries to be too nice in this case and it ends up being confusing.\nWithin the Processing editor you can use <code>color(#C990C0)</code> (though this wouldn't work in other editors easily).</p>\n<p>Similarly <code>color</code> type is an <code>int</code> behind the scenes.\n(It stores the 4 bytes: alpha, red, breen, blue as a 32bit integer)</p>\n<p>And there's yet another catch with <code>unhex()</code>: number formatting.\nYou can use digits from <code>0</code> to <code>9</code> and letters <code>A</code> to <code>F</code>, but not other prefixes (such as <code>#</code> or <code>0x</code> for example).\nOn top of that it expects colours in <code>ARGB</code> (<strong>not</strong> <code>RGBA</code>) and that means you do need to specify the alpha value (otherwise, if the first two hex digits(alpha channel) is missing <code>00</code> is implied so your colour will be invisible).</p>\n<p>In your case, you'd format the colour as: <code>&quot;FFC990C0&quot;</code></p>\n<p>Here's a test sketch:</p>\n<pre><code>JSONObject myData = JSONObject.parse(&quot;{\\&quot;color\\&quot;:\\&quot;FFC990C0\\&quot;}&quot;);\n\ncolor myColor = unhex(myData.getString(&quot;color&quot;));\n\nfill(myColor);\nrect(0, 0, 50, 100);\n\n// notice the colour doesn't show because the FF alpha prefix is missing\nfill(unhex(&quot;C990C0&quot;));\nrect(50, 0, 50, 100);\n</code></pre>\n<p><strong>Update</strong> After a bit of digging around it was interesting to spot this:</p>\n<pre><code>println(JSONObject.parse(&quot;{\\&quot;color\\&quot;:0xC990C0}&quot;).get(&quot;color&quot;) instanceof String);\n</code></pre>\n<p>It prints <code>true</code> when I was expecting <code>false</code> (expecting <code>Integer</code> instead). (it does work as expected for <code>0-9</code>, but not <code>A-F</code>).</p>\n<p>Processing thinks <code>0xC990C0</code> is a <code>String</code> (notice it has no double quotes surrounding the value), probably due to <a href=\"https://github.com/processing/processing4/blob/main/core/src/processing/data/JSONObject.java#L1556\" rel=\"nofollow noreferrer\">this</a>.\nAlso, <a href=\"https://github.com/processing/processing4/blob/main/core/src/processing/core/PApplet.java#L9379\" rel=\"nofollow noreferrer\"><code>unhex()</code></a> uses <a href=\"https://github.com/processing/processing4/blob/main/core/src/processing/core/PApplet.java#L9379\" rel=\"nofollow noreferrer\"><code>Long.parseLong()</code></a> which limits the usage of <code>0x</code>, <code>#</code> or similar prefixes.</p>\n<p>You can use <code>Long.decode(&quot;#C990C0&quot;)</code> instead though (e.g. <code>color myColor = Long.parseLong(myData.getString(&quot;color&quot;)).intValue();</code>)\n.</p>\n"}],"owner":{"account_id":19789231,"reputation":149,"user_id":14492562,"display_name":"chemFour"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73625266,"answer_count":1,"score":2,"last_activity_date":1662989815,"creation_date":1662475378,"question_id":73623903,"body_markdown":"In short: how to get, for example... `#C990C0` from String data, as opposed to `&quot;#C990C0&quot;`?\r\n\r\nI am prototyping something in Processing so ideally looking for a solution with no additional Java libraries. \r\n\r\nIn my data (json) hex colour values are stored as Strings. \r\n\r\nThere is an `unhex()` function in Processing that converts the String to an int, but this int is not meaningful as a representation of colour in Processing... and the `hex()` function converts to a String, not a hex type.\r\n\r\nYou can hardcode, say `fill(color(#C990C0))`, but you can&#39;t cast the String `&quot;#C990C0&quot;` to `#C990C0` to do this programmatically because there isn&#39;t a Hex primitive type. \r\n\r\nMaybe the answer is to do something weird with the `byte` primitive type?\r\n ","title":"How to convert a hex colour value stored as a String into an actual hex value in Processing?","body":"<p>In short: how to get, for example... <code>#C990C0</code> from String data, as opposed to <code>&quot;#C990C0&quot;</code>?</p>\n<p>I am prototyping something in Processing so ideally looking for a solution with no additional Java libraries.</p>\n<p>In my data (json) hex colour values are stored as Strings.</p>\n<p>There is an <code>unhex()</code> function in Processing that converts the String to an int, but this int is not meaningful as a representation of colour in Processing... and the <code>hex()</code> function converts to a String, not a hex type.</p>\n<p>You can hardcode, say <code>fill(color(#C990C0))</code>, but you can't cast the String <code>&quot;#C990C0&quot;</code> to <code>#C990C0</code> to do this programmatically because there isn't a Hex primitive type.</p>\n<p>Maybe the answer is to do something weird with the <code>byte</code> primitive type?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":3123035,"reputation":170,"user_id":2642451,"display_name":"Sanju Baghla"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1662987143,"creation_date":1662987143,"answer_id":73689630,"question_id":73689496,"body_markdown":"As per the docs https://docs.oracle.com/javase/9/docs/api/java/lang/module/ModuleDescriptor.html\r\n\r\nModuleDescriptor is in JDK 1.9 .\r\nYou can download JDK from here https://www.oracle.com/ca-en/java/technologies/javase/javase9-archive-downloads.html\r\n\r\nthen import it in your android studio.","title":"Can&#39;t import java.lang.module.ModuleDescriptor.Version","body":"<p>As per the docs <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/module/ModuleDescriptor.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/9/docs/api/java/lang/module/ModuleDescriptor.html</a></p>\n<p>ModuleDescriptor is in JDK 1.9 .\nYou can download JDK from here <a href=\"https://www.oracle.com/ca-en/java/technologies/javase/javase9-archive-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/ca-en/java/technologies/javase/javase9-archive-downloads.html</a></p>\n<p>then import it in your android studio.</p>\n"},{"tags":[],"owner":{"account_id":7648232,"reputation":1230,"user_id":5798049,"accept_rate":83,"display_name":"Mr. Mad"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1662987289,"creation_date":1662987289,"answer_id":73689672,"question_id":73689496,"body_markdown":"ModuleDescriptor is exists for the JAVA SE 9 &amp; JDK 9.\r\n[read the documentation at official website ][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/lang/module/ModuleDescriptor.html","title":"Can&#39;t import java.lang.module.ModuleDescriptor.Version","body":"<p>ModuleDescriptor is exists for the JAVA SE 9 &amp; JDK 9.\n<a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/module/ModuleDescriptor.html\" rel=\"nofollow noreferrer\">read the documentation at official website </a></p>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662989571,"creation_date":1662989571,"answer_id":73690181,"question_id":73689496,"body_markdown":"You are not changing the Java version for your project - you are changing the Java version that Gradle should use (as indicated by the &quot;Gradle JVM&quot; label before the dropdown selector).\r\n\r\nIf you want your project to use Java 18 you must change it under &quot;File&quot; -&gt; &quot;Project Structure&quot; (which opens the **Project Settings**) and there under the tab &quot;Project&quot;, entry &quot;SDK&quot;.","title":"Can&#39;t import java.lang.module.ModuleDescriptor.Version","body":"<p>You are not changing the Java version for your project - you are changing the Java version that Gradle should use (as indicated by the &quot;Gradle JVM&quot; label before the dropdown selector).</p>\n<p>If you want your project to use Java 18 you must change it under &quot;File&quot; -&gt; &quot;Project Structure&quot; (which opens the <strong>Project Settings</strong>) and there under the tab &quot;Project&quot;, entry &quot;SDK&quot;.</p>\n"}],"owner":{"account_id":9033560,"reputation":193,"user_id":6730396,"display_name":"qarasique"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73690181,"answer_count":3,"score":0,"last_activity_date":1662989571,"creation_date":1662986695,"question_id":73689496,"body_markdown":"&gt; [import java.lang.module.ModuleDescriptor.Version][1]\r\n\r\nprints error: Cannot resolve symbol &#39;ModuleDescriptor&#39;. Tried with JDK 11 and 18. What am I doing wrong?\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/lang/module/ModuleDescriptor.Version.html\r\n  [2]: https://i.stack.imgur.com/EhcfQ.png","title":"Can&#39;t import java.lang.module.ModuleDescriptor.Version","body":"<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/module/ModuleDescriptor.Version.html\" rel=\"nofollow noreferrer\">import java.lang.module.ModuleDescriptor.Version</a></p>\n</blockquote>\n<p>prints error: Cannot resolve symbol 'ModuleDescriptor'. Tried with JDK 11 and 18. What am I doing wrong?</p>\n<p><a href=\"https://i.stack.imgur.com/EhcfQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EhcfQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9824858,"reputation":121,"user_id":7278190,"display_name":"WPW"},"score":0,"creation_date":1662780294,"post_id":73668964,"comment_id":130090991,"body_markdown":"I did a homegrown password manager, I needed to keep the initialization vector along with the key and use both to decrypt.","body":"I did a homegrown password manager, I needed to keep the initialization vector along with the key and use both to decrypt."},{"owner":{"account_id":9824858,"reputation":121,"user_id":7278190,"display_name":"WPW"},"score":0,"creation_date":1662780312,"post_id":73668964,"comment_id":130090992,"body_markdown":"I can share that code tomorrow","body":"I can share that code tomorrow"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1662800830,"post_id":73668964,"comment_id":130093482,"body_markdown":"Of course, you need to be careful of character encoding too as you can get quite different byte arrays for the same string depending on that","body":"Of course, you need to be careful of character encoding too as you can get quite different byte arrays for the same string depending on that"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1662988792,"post_id":73668964,"comment_id":130126785,"body_markdown":"Welcome to Stack Overflow.\nPlease take the [tour] to learn how Stack Overflow works and read [ask] on how to improve the quality of your question.\nThen [edit] your question to include your source code as a working [mcve], which can be tested by others.","body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on how to improve the quality of your question. Then <a href=\"https://stackoverflow.com/posts/73668964/edit\">edit</a> your question to include your source code as a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be tested by others."}],"answers":[{"tags":[],"owner":{"account_id":9824858,"reputation":121,"user_id":7278190,"display_name":"WPW"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662988883,"creation_date":1662988307,"answer_id":73689913,"question_id":73668964,"body_markdown":"NOTE: I have removed some of the code specific to my usage of encryption, and just providing the general way to use this.\r\n\r\nThis is what I used encrypt and encode\r\n\t\r\n    Encoder enc = Base64.getEncoder();\r\n    SecureRandom sr = new SecureRandom();\r\n    byte[] ivBytes = new byte[16];\r\n    byte[] keyBytes = new byte[16];\r\n    sr.nextBytes(ivBytes);\r\n    IvParameterSpec iv = new IvParameterSpec(ivBytes);\r\n    sr.nextBytes(keyBytes);\r\n    \r\n  \r\n\r\n    SecretKeySpec skeySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\r\n    \r\n    Cipher aesCipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n    aesCipher.init(Cipher.ENCRYPT_MODE, skeySpec, iv);\r\n    //Character encoding can mess things up. like UTF-8 etc. This is what the other commentors are talking about\r\n    byte[] dataInBytes = &quot;the String you want to encrypt&quot;.getBytes(&quot;UTF-8&quot;); \r\n    byte[] encryptedBytes = aesCipher.doFinal(dataInBytes);\r\n    \r\n    String base64Encoded = enc.encodeToString(encryptedBytes);\r\n\r\n\r\nThen to decrypt:\r\n\r\n    \t\r\n     IvParameterSpec iv = new IvParameterSpec(ivBytes);\r\n     SecretKeySpec skeySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\r\n    \t\t\r\n     Cipher aesCipher;\r\n     aesCipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n    \t\t\r\n     aesCipher.init(Cipher.DECRYPT_MODE, skeySpec, iv);\r\n    \t\r\n     encryptedString = Base64.getDecoder().decode(base64Encoded) \r\n  \t\r\n     byte[] decryptedBytes = aesCipher.doFinal(encryptedString);\r\n\t \r\n     String yourString = new String(decryptedBytes);\t\r\n    \r\n\t","title":"Unable to isolate the problem in decoding/decrypt","body":"<p>NOTE: I have removed some of the code specific to my usage of encryption, and just providing the general way to use this.</p>\n<p>This is what I used encrypt and encode</p>\n<pre><code>Encoder enc = Base64.getEncoder();\nSecureRandom sr = new SecureRandom();\nbyte[] ivBytes = new byte[16];\nbyte[] keyBytes = new byte[16];\nsr.nextBytes(ivBytes);\nIvParameterSpec iv = new IvParameterSpec(ivBytes);\nsr.nextBytes(keyBytes);\n\n\n\nSecretKeySpec skeySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\n\nCipher aesCipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\naesCipher.init(Cipher.ENCRYPT_MODE, skeySpec, iv);\n//Character encoding can mess things up. like UTF-8 etc. This is what the other commentors are talking about\nbyte[] dataInBytes = &quot;the String you want to encrypt&quot;.getBytes(&quot;UTF-8&quot;); \nbyte[] encryptedBytes = aesCipher.doFinal(dataInBytes);\n\nString base64Encoded = enc.encodeToString(encryptedBytes);\n</code></pre>\n<p>Then to decrypt:</p>\n<pre><code> IvParameterSpec iv = new IvParameterSpec(ivBytes);\n SecretKeySpec skeySpec = new SecretKeySpec(keyBytes, &quot;AES&quot;);\n        \n Cipher aesCipher;\n aesCipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\n        \n aesCipher.init(Cipher.DECRYPT_MODE, skeySpec, iv);\n    \n encryptedString = Base64.getDecoder().decode(base64Encoded) \n\n byte[] decryptedBytes = aesCipher.doFinal(encryptedString);\n \n String yourString = new String(decryptedBytes);    \n</code></pre>\n"}],"owner":{"account_id":26295732,"reputation":9,"user_id":19962007,"display_name":"smart dev"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1662988883,"creation_date":1662778118,"question_id":73668964,"body_markdown":"I&#39;m encrypting a password using the following\r\n\r\n    BASE64Encoder.encode(cipher.doFinal(password[]))\r\n\r\nI&#39;m decrypting as follows\r\n\r\n    cipher.doFinal(BASE64Decoder.decodeBuffer(encryptedPasswordString))\r\n\r\nHowever decrypt works for few and doesn&#39;t return proper text for many inputs. Sometimes it returns the input value itself which is weird.\r\n\r\nAny suggestions or comments?\r\n\r\nThanks\r\n","title":"Unable to isolate the problem in decoding/decrypt","body":"<p>I'm encrypting a password using the following</p>\n<pre><code>BASE64Encoder.encode(cipher.doFinal(password[]))\n</code></pre>\n<p>I'm decrypting as follows</p>\n<pre><code>cipher.doFinal(BASE64Decoder.decodeBuffer(encryptedPasswordString))\n</code></pre>\n<p>However decrypt works for few and doesn't return proper text for many inputs. Sometimes it returns the input value itself which is weird.</p>\n<p>Any suggestions or comments?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","postgresql","jpa","jakarta-ee"],"answers":[{"tags":[],"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662988746,"creation_date":1662988746,"answer_id":73689999,"question_id":73689203,"body_markdown":"After executing these statements\r\n```\r\nnews.setComments(new ArrayList&lt;Comment&gt;());\r\nnews.setCategories(new ArrayList&lt;Category&gt;());\r\nnews.setSessionsVoted(new ArrayList&lt;Session&gt;());\r\n```\r\naren&#39;t these statements just iterating over empty lists?\r\n```\r\nnews.getComments().forEach(comment -&gt; comment.setNews(null));\r\nnews.getCategories().forEach(category -&gt; category.setNews(null));\r\nnews.getSessionsVoted().forEach(session -&gt; session.setNewsVoted(null));\r\n```","title":"JPA - Foreign Key Constraint problem when deleting entity even after removing connected entity","body":"<p>After executing these statements</p>\n<pre><code>news.setComments(new ArrayList&lt;Comment&gt;());\nnews.setCategories(new ArrayList&lt;Category&gt;());\nnews.setSessionsVoted(new ArrayList&lt;Session&gt;());\n</code></pre>\n<p>aren't these statements just iterating over empty lists?</p>\n<pre><code>news.getComments().forEach(comment -&gt; comment.setNews(null));\nnews.getCategories().forEach(category -&gt; category.setNews(null));\nnews.getSessionsVoted().forEach(session -&gt; session.setNewsVoted(null));\n</code></pre>\n"}],"owner":{"account_id":4095402,"reputation":2030,"user_id":3362334,"accept_rate":28,"display_name":"user3362334"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73689999,"answer_count":1,"score":0,"last_activity_date":1662988746,"creation_date":1662985364,"question_id":73689203,"body_markdown":"I have a News entity that has the following fields:\r\n\r\n        @ManyToMany(mappedBy = &quot;news&quot;)\r\n        @LazyCollection(LazyCollectionOption.FALSE)\r\n        private List&lt;Category&gt; categories;\r\n    \r\n        @LazyCollection(LazyCollectionOption.FALSE)\r\n        @OneToMany(mappedBy = &quot;news&quot;, cascade = CascadeType.REMOVE)\r\n        @JsonIgnore\r\n        private List&lt;Comment&gt; comments;\r\n    \r\n        @ManyToMany(mappedBy = &quot;newsVoted&quot;)\r\n        @JsonIgnore\r\n        private Collection&lt;Session&gt; sessionsVoted;\r\n\r\nMy Category entity has those fields:\r\n\r\n        @Id\r\n        @GeneratedValue\r\n        private long id;\r\n    \r\n        private String name;\r\n    \r\n        private int priority;\r\n    \r\n        @LazyCollection(LazyCollectionOption.FALSE)\r\n        @ManyToMany\r\n        @JsonIgnore\r\n        private List&lt;News&gt; news;\r\n    \r\n        private boolean visible;\r\n\r\nI am trying to delete one News entry without removing connected Categories.\r\n\r\nMy code looks like this:\r\n\r\n                    news.setComments(new ArrayList&lt;Comment&gt;());\r\n                    news.setCategories(new ArrayList&lt;Category&gt;());\r\n                    news.setSessionsVoted(new ArrayList&lt;Session&gt;());\r\n    \r\n                    news.getComments().forEach(comment -&gt; comment.setNews(null));\r\n                    news.getCategories().forEach(category -&gt; category.setNews(null));\r\n                    news.getSessionsVoted().forEach(session -&gt; session.setNewsVoted(null));\r\n    \r\n                    newsFacade.save(news);\r\n                    news.getComments().forEach(comment -&gt; commentFacade.save(comment));\r\n                    news.getCategories().forEach(category -&gt; categoryFacade.save(category));\r\n                    news.getSessionsVoted().forEach(session -&gt; sessionFacade.save(session));\r\n    \r\n                    em.flush();\r\n    \r\n                    newsFacade.delete(news);\r\n\r\nI tried to detach all Categories from News. However, when I execute this, I get the following Error:\r\n\r\n    Caused by: org.postgresql.util.PSQLException: ERROR: update or delete on table &quot;news&quot; violates foreign key constraint &quot;fkhik32gpatwh82fuds49l7goo3&quot; on table &quot;category_news&quot;\r\n      Detail: Key (id)=(5) is still referenced from table &quot;category_news&quot;.\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2505)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2241)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)\r\n    \tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:447)\r\n    \tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:368)\r\n    \tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:158)\r\n    \tat org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:124)\r\n    \tat sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.postgresql.ds.PGPooledConnection$StatementHandler.invoke(PGPooledConnection.java:428)\r\n    \tat com.sun.proxy.$Proxy132.executeUpdate(Unknown Source)\r\n    \tat org.jboss.jca.adapters.jdbc.WrappedPreparedStatement.executeUpdate(WrappedPreparedStatement.java:537)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:175)\r\n    \t... 67 more\r\n\r\nIt seems like this category is still conected to the news. I wonder how","title":"JPA - Foreign Key Constraint problem when deleting entity even after removing connected entity","body":"<p>I have a News entity that has the following fields:</p>\n<pre><code>    @ManyToMany(mappedBy = &quot;news&quot;)\n    @LazyCollection(LazyCollectionOption.FALSE)\n    private List&lt;Category&gt; categories;\n\n    @LazyCollection(LazyCollectionOption.FALSE)\n    @OneToMany(mappedBy = &quot;news&quot;, cascade = CascadeType.REMOVE)\n    @JsonIgnore\n    private List&lt;Comment&gt; comments;\n\n    @ManyToMany(mappedBy = &quot;newsVoted&quot;)\n    @JsonIgnore\n    private Collection&lt;Session&gt; sessionsVoted;\n</code></pre>\n<p>My Category entity has those fields:</p>\n<pre><code>    @Id\n    @GeneratedValue\n    private long id;\n\n    private String name;\n\n    private int priority;\n\n    @LazyCollection(LazyCollectionOption.FALSE)\n    @ManyToMany\n    @JsonIgnore\n    private List&lt;News&gt; news;\n\n    private boolean visible;\n</code></pre>\n<p>I am trying to delete one News entry without removing connected Categories.</p>\n<p>My code looks like this:</p>\n<pre><code>                news.setComments(new ArrayList&lt;Comment&gt;());\n                news.setCategories(new ArrayList&lt;Category&gt;());\n                news.setSessionsVoted(new ArrayList&lt;Session&gt;());\n\n                news.getComments().forEach(comment -&gt; comment.setNews(null));\n                news.getCategories().forEach(category -&gt; category.setNews(null));\n                news.getSessionsVoted().forEach(session -&gt; session.setNewsVoted(null));\n\n                newsFacade.save(news);\n                news.getComments().forEach(comment -&gt; commentFacade.save(comment));\n                news.getCategories().forEach(category -&gt; categoryFacade.save(category));\n                news.getSessionsVoted().forEach(session -&gt; sessionFacade.save(session));\n\n                em.flush();\n\n                newsFacade.delete(news);\n</code></pre>\n<p>I tried to detach all Categories from News. However, when I execute this, I get the following Error:</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: ERROR: update or delete on table &quot;news&quot; violates foreign key constraint &quot;fkhik32gpatwh82fuds49l7goo3&quot; on table &quot;category_news&quot;\n  Detail: Key (id)=(5) is still referenced from table &quot;category_news&quot;.\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2505)\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2241)\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)\n    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:447)\n    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:368)\n    at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:158)\n    at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:124)\n    at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.postgresql.ds.PGPooledConnection$StatementHandler.invoke(PGPooledConnection.java:428)\n    at com.sun.proxy.$Proxy132.executeUpdate(Unknown Source)\n    at org.jboss.jca.adapters.jdbc.WrappedPreparedStatement.executeUpdate(WrappedPreparedStatement.java:537)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:175)\n    ... 67 more\n</code></pre>\n<p>It seems like this category is still conected to the news. I wonder how</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662988657,"creation_date":1662655159,"answer_id":73652484,"question_id":73556386,"body_markdown":"As per [Spring Docs for OncePerFilterRequest][1] :\r\n\r\n&gt; It says that this filter base class aims to guarantee a single\r\n&gt; execution per request dispatch, on any servlet container.\r\n\r\nBut in some case, it can happen that the other servlets are also using the same filter due to that it can be called multiple times.\r\n\r\nNow, coming to your issue. I suspect the issue is with the way you are debugging `ExecutorService` that is making the `FooValidationFilter` to be called multiple times in debug mode and not in normal mode.\r\n\r\nDebugging `ExecutorService` is difficult sometimes because in debug mode, its execution can&#39;t be predicted. So, you don&#39;t think that if it&#39;s called multiple times in debug mode, then it will be called multiple times in normal mode.\r\n\r\n-----\r\n\r\nI tried to reproduce with the code that you have provided. I have used STS Eclipse IDE to debug the scenario. The filter is called for two times in normal mode.\r\n\r\n- Normal Mode :\r\n\r\nController logic :\r\n\r\n    @RestController\r\n    public class Resource {\r\n    \r\n    \tprivate ExecutorService executor = Executors.newCachedThreadPool();\r\n    \r\n    \t@GetMapping(&quot;/foo/stream&quot;)\r\n    \tpublic ResponseEntity&lt;ResponseBodyEmitter&gt; handleRbe() {\r\n    \t\tResponseBodyEmitter emitter = new ResponseBodyEmitter();\r\n    \t\texecutor.execute(() -&gt; {\r\n    \t\t\ttry {\r\n    \t\t\t\temitter.send(&quot;a&quot;);\r\n    \t\t\t\tThread.sleep(2000);\r\n    \t\t\t\temitter.send(&quot;b&quot;);\r\n    \t\t\t\tThread.sleep(2000);\r\n    \t\t\t\temitter.send(&quot;c&quot;);\r\n    \t\t\t\tThread.sleep(2000);\r\n    \t\t\t\temitter.complete();\r\n    \t\t\t} catch (Exception ex) {\r\n    \t\t\t\temitter.completeWithError(ex);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\treturn new ResponseEntity&lt;ResponseBodyEmitter&gt;(emitter, HttpStatus.OK);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nAdded logger into your existing filter :\r\n\r\n    @Slf4j\r\n    @AllArgsConstructor\r\n    @Component\r\n    public class ValidationFilter extends OncePerRequestFilter {\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n                throws ServletException, IOException {\r\n    \r\n        \tlog.info(&quot;Inside Filter&quot;);\r\n        \t\r\n            ContentCachingRequestWrapper requestToCache = new ContentCachingRequestWrapper(request);\r\n            ContentCachingResponseWrapper responseToUse = new ContentCachingResponseWrapper(response);\r\n    \r\n            filterChain.doFilter(request, responseToUse);\r\n    \r\n            if (!responseToUse.isCommitted() &amp;&amp;\r\n                    responseToUse.getStatus() &gt;= 200 &amp;&amp; responseToUse.getStatus() &lt; 300 &amp;&amp;\r\n                    HttpMethod.GET.matches(request.getMethod())) {\r\n    \r\n                Scanner scanner = new Scanner(responseToUse.getContentInputStream());\r\n    //            String fooField;\r\n    //            do {\r\n    //                fooField = scanner.findWithinHorizon(&quot;&quot;, 0); \r\n    //                // perform some checks\r\n    //            } while (fooField != null);\r\n            }\r\n    \r\n            if (requestToCache.isAsyncStarted()) {\r\n                requestToCache.getAsyncContext().addListener(new AsyncListener() {\r\n                    public void onComplete(AsyncEvent asyncEvent) throws IOException {\r\n                        responseToUse.copyBodyToResponse();\r\n                    }\r\n    \r\n                    public void onTimeout(AsyncEvent asyncEvent) throws IOException {\r\n                    }\r\n    \r\n                    public void onError(AsyncEvent asyncEvent) throws IOException {\r\n                    }\r\n    \r\n                    public void onStartAsync(AsyncEvent asyncEvent) throws IOException {\r\n                    }\r\n                });\r\n            } else {\r\n                responseToUse.copyBodyToResponse();\r\n            }\r\n            log.info(&quot;End Filter&quot;);\r\n        }\r\n    \r\n        @Override\r\n        protected boolean shouldNotFilterAsyncDispatch() {\r\n            return false;\r\n        }\r\n    } \r\n\r\n**Note:** You also need to add `@Component` in your filter which was missing.\r\n\r\nPostman request :\r\n\r\n[![enter image description here][2]][2]\r\n\r\nServer logs in normal mode to prove that it&#39;s called multiple times :\r\n\r\n[![enter image description here][3]][3]\r\n\r\n----------\r\n\r\n- Debug Mode steps to prove that it got called two times: \r\n\r\nThe request came to the filter first.\r\n\r\n[![enter image description here][4]][4]\r\n\r\nThe request came to the controller :\r\n\r\n[![enter image description here][5]][5]\r\n\r\nThe response comes back from controller and the filter check if the isAsyncStarted() is true. In this case, it returns true which means async context started.\r\n\r\n[![enter image description here][6]][6]\r\n\r\nIt comes to the same line again -&gt; `filterChain.doFilter(request, responseToUse);`\r\n\r\n[![enter image description here][7]][7]\r\n\r\nServer Log at this point in debug mode : \r\n\r\n[![enter image description here][8]][8]\r\n\r\nThe response comes back from controller and the filter check if the isAsyncStarted() is true. In this case, it returns false and the async context is skipped.\r\n\r\nServer log at the end :\r\n\r\n[![enter image description here][9]][9]\r\n\r\n-----\r\n\r\nPostman response :\r\n\r\n[![enter image description here][10]][10]\r\n\r\nUpdate : As per Spring&#39;s [ResponseBodyEmitter][11] Docs, it states that :\r\n\r\n&gt; Write the given object to the response.\r\n&gt; \r\n&gt; If any exception occurs a dispatch is made back to the app server\r\n&gt; where Spring MVC will pass the exception through its exception\r\n&gt; handling mechanism.\r\n&gt; \r\n&gt; Note: if the send fails with an IOException, you do not need to call\r\n&gt; completeWithError(Throwable) in order to clean up. Instead the Servlet\r\n&gt; container creates a notification that results in a dispatch where\r\n&gt; Spring MVC invokes exception resolvers and completes processing.\r\n\r\nIn simple words : \r\n\r\n&gt; `send()` method only writes to the response. It doesn&#39;t mean that it\r\n&gt; will make dispatch to filter/interceptor on send() method call. The\r\n&gt; send method only combines all the individual send data and append it\r\n&gt; to the response.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/OncePerRequestFilter.html\r\n  [2]: https://i.stack.imgur.com/q0b5Q.png\r\n  [3]: https://i.stack.imgur.com/u4EXy.png\r\n  [4]: https://i.stack.imgur.com/mVgAd.jpg\r\n  [5]: https://i.stack.imgur.com/4aQtW.png\r\n  [6]: https://i.stack.imgur.com/RzK6F.png\r\n  [7]: https://i.stack.imgur.com/zvuXR.jpg\r\n  [8]: https://i.stack.imgur.com/mQCUd.png\r\n  [9]: https://i.stack.imgur.com/vVY1M.png\r\n  [10]: https://i.stack.imgur.com/UYv6h.png\r\n  [11]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.html#complete--","title":"Spring filter bypassed when a REST endpoint returns a Json stream","body":"<p>As per <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/OncePerRequestFilter.html\" rel=\"nofollow noreferrer\">Spring Docs for OncePerFilterRequest</a> :</p>\n<blockquote>\n<p>It says that this filter base class aims to guarantee a single\nexecution per request dispatch, on any servlet container.</p>\n</blockquote>\n<p>But in some case, it can happen that the other servlets are also using the same filter due to that it can be called multiple times.</p>\n<p>Now, coming to your issue. I suspect the issue is with the way you are debugging <code>ExecutorService</code> that is making the <code>FooValidationFilter</code> to be called multiple times in debug mode and not in normal mode.</p>\n<p>Debugging <code>ExecutorService</code> is difficult sometimes because in debug mode, its execution can't be predicted. So, you don't think that if it's called multiple times in debug mode, then it will be called multiple times in normal mode.</p>\n<hr />\n<p>I tried to reproduce with the code that you have provided. I have used STS Eclipse IDE to debug the scenario. The filter is called for two times in normal mode.</p>\n<ul>\n<li>Normal Mode :</li>\n</ul>\n<p>Controller logic :</p>\n<pre><code>@RestController\npublic class Resource {\n\n    private ExecutorService executor = Executors.newCachedThreadPool();\n\n    @GetMapping(&quot;/foo/stream&quot;)\n    public ResponseEntity&lt;ResponseBodyEmitter&gt; handleRbe() {\n        ResponseBodyEmitter emitter = new ResponseBodyEmitter();\n        executor.execute(() -&gt; {\n            try {\n                emitter.send(&quot;a&quot;);\n                Thread.sleep(2000);\n                emitter.send(&quot;b&quot;);\n                Thread.sleep(2000);\n                emitter.send(&quot;c&quot;);\n                Thread.sleep(2000);\n                emitter.complete();\n            } catch (Exception ex) {\n                emitter.completeWithError(ex);\n            }\n        });\n        return new ResponseEntity&lt;ResponseBodyEmitter&gt;(emitter, HttpStatus.OK);\n    }\n\n}\n</code></pre>\n<p>Added logger into your existing filter :</p>\n<pre><code>@Slf4j\n@AllArgsConstructor\n@Component\npublic class ValidationFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n\n        log.info(&quot;Inside Filter&quot;);\n        \n        ContentCachingRequestWrapper requestToCache = new ContentCachingRequestWrapper(request);\n        ContentCachingResponseWrapper responseToUse = new ContentCachingResponseWrapper(response);\n\n        filterChain.doFilter(request, responseToUse);\n\n        if (!responseToUse.isCommitted() &amp;&amp;\n                responseToUse.getStatus() &gt;= 200 &amp;&amp; responseToUse.getStatus() &lt; 300 &amp;&amp;\n                HttpMethod.GET.matches(request.getMethod())) {\n\n            Scanner scanner = new Scanner(responseToUse.getContentInputStream());\n//            String fooField;\n//            do {\n//                fooField = scanner.findWithinHorizon(&quot;&quot;, 0); \n//                // perform some checks\n//            } while (fooField != null);\n        }\n\n        if (requestToCache.isAsyncStarted()) {\n            requestToCache.getAsyncContext().addListener(new AsyncListener() {\n                public void onComplete(AsyncEvent asyncEvent) throws IOException {\n                    responseToUse.copyBodyToResponse();\n                }\n\n                public void onTimeout(AsyncEvent asyncEvent) throws IOException {\n                }\n\n                public void onError(AsyncEvent asyncEvent) throws IOException {\n                }\n\n                public void onStartAsync(AsyncEvent asyncEvent) throws IOException {\n                }\n            });\n        } else {\n            responseToUse.copyBodyToResponse();\n        }\n        log.info(&quot;End Filter&quot;);\n    }\n\n    @Override\n    protected boolean shouldNotFilterAsyncDispatch() {\n        return false;\n    }\n} \n</code></pre>\n<p><strong>Note:</strong> You also need to add <code>@Component</code> in your filter which was missing.</p>\n<p>Postman request :</p>\n<p><a href=\"https://i.stack.imgur.com/q0b5Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q0b5Q.png\" alt=\"enter image description here\" /></a></p>\n<p>Server logs in normal mode to prove that it's called multiple times :</p>\n<p><a href=\"https://i.stack.imgur.com/u4EXy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u4EXy.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<ul>\n<li>Debug Mode steps to prove that it got called two times:</li>\n</ul>\n<p>The request came to the filter first.</p>\n<p><a href=\"https://i.stack.imgur.com/mVgAd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mVgAd.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The request came to the controller :</p>\n<p><a href=\"https://i.stack.imgur.com/4aQtW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4aQtW.png\" alt=\"enter image description here\" /></a></p>\n<p>The response comes back from controller and the filter check if the isAsyncStarted() is true. In this case, it returns true which means async context started.</p>\n<p><a href=\"https://i.stack.imgur.com/RzK6F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RzK6F.png\" alt=\"enter image description here\" /></a></p>\n<p>It comes to the same line again -&gt; <code>filterChain.doFilter(request, responseToUse);</code></p>\n<p><a href=\"https://i.stack.imgur.com/zvuXR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zvuXR.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Server Log at this point in debug mode :</p>\n<p><a href=\"https://i.stack.imgur.com/mQCUd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mQCUd.png\" alt=\"enter image description here\" /></a></p>\n<p>The response comes back from controller and the filter check if the isAsyncStarted() is true. In this case, it returns false and the async context is skipped.</p>\n<p>Server log at the end :</p>\n<p><a href=\"https://i.stack.imgur.com/vVY1M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vVY1M.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>Postman response :</p>\n<p><a href=\"https://i.stack.imgur.com/UYv6h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UYv6h.png\" alt=\"enter image description here\" /></a></p>\n<p>Update : As per Spring's <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.html#complete--\" rel=\"nofollow noreferrer\">ResponseBodyEmitter</a> Docs, it states that :</p>\n<blockquote>\n<p>Write the given object to the response.</p>\n<p>If any exception occurs a dispatch is made back to the app server\nwhere Spring MVC will pass the exception through its exception\nhandling mechanism.</p>\n<p>Note: if the send fails with an IOException, you do not need to call\ncompleteWithError(Throwable) in order to clean up. Instead the Servlet\ncontainer creates a notification that results in a dispatch where\nSpring MVC invokes exception resolvers and completes processing.</p>\n</blockquote>\n<p>In simple words :</p>\n<blockquote>\n<p><code>send()</code> method only writes to the response. It doesn't mean that it\nwill make dispatch to filter/interceptor on send() method call. The\nsend method only combines all the individual send data and append it\nto the response.</p>\n</blockquote>\n"}],"owner":{"account_id":6794864,"reputation":1053,"user_id":5230585,"display_name":"Katy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":73652484,"answer_count":1,"score":4,"last_activity_date":1662988657,"creation_date":1661951266,"question_id":73556386,"body_markdown":"\r\nI have an endpoint which return a `ResponseBodyEmitter`: \r\n\r\n\r\n    @GetMapping(&quot;/foo/stream&quot;)\r\n    public ResponseEntity&lt;ResponseBodyEmitter&gt; getFoos() {\r\n        ResponseBodyEmitter rbe = new ResponseBodyEmitter();\r\n        executor.execute(() -&gt; {\r\n            try {\r\n                    rbe.send(foo1);\r\n                    Thread.sleep(2000);\r\n                    rbe.send(foo2);\r\n                    Thread.sleep(2000);\r\n                    rbe.send(foo3);\r\n                    Thread.sleep(2000);\r\n                }\r\n                rbe.complete();\r\n            } catch (Exception ex) {\r\n                rbe.completeWithError(ex);\r\n            }\r\n        });\r\n        return ResponseEntity.ok(rbe);\r\n    }\r\n\r\nA custom filter (`FooValidationFilter`) is created to perform checks on foo&#39;s object when this endpoint is called: \r\n\r\n    @Slf4j\r\n    @AllArgsConstructor\r\n    public class FooValidationFilter extends OncePerRequestFilter {\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n                throws ServletException, IOException {\r\n    \r\n            ContentCachingRequestWrapper requestToCache = new ContentCachingRequestWrapper(request);\r\n            ContentCachingResponseWrapper responseToUse = new ContentCachingResponseWrapper(response);\r\n    \r\n            filterChain.doFilter(request, responseToUse);\r\n    \r\n            if (!responseToUse.isCommitted() &amp;&amp;\r\n                    responseToUse.getStatus() &gt;= 200 &amp;&amp; responseToUse.getStatus() &lt; 300 &amp;&amp;\r\n                    HttpMethod.GET.matches(request.getMethod())) {\r\n    \r\n                Scanner scanner = new Scanner(responseToUse.getContentInputStream());\r\n                String fooField;\r\n                do {\r\n                    fooField = scanner.findWithinHorizon(REGEX, 0); \r\n                    // perform some checks\r\n                } while (fooField != null);\r\n            }\r\n    \r\n            if (requestToCache.isAsyncStarted()) {\r\n                requestToCache.getAsyncContext().addListener(new AsyncListener() {\r\n                    public void onComplete(AsyncEvent asyncEvent) throws IOException {\r\n                        responseToUse.copyBodyToResponse();\r\n                    }\r\n    \r\n                    public void onTimeout(AsyncEvent asyncEvent) throws IOException {\r\n                    }\r\n    \r\n                    public void onError(AsyncEvent asyncEvent) throws IOException {\r\n                    }\r\n    \r\n                    public void onStartAsync(AsyncEvent asyncEvent) throws IOException {\r\n                    }\r\n                });\r\n            } else {\r\n                responseToUse.copyBodyToResponse();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected boolean shouldNotFilterAsyncDispatch() {\r\n            return false;\r\n        }\r\n\r\n**Note:** \r\n\r\n1. In debug mode, the `FooValidationFilter` is called after each `ResponseBodyEmitter.send()`. \r\n\r\n2. In normal mode, the `FooValidationFilter` is invoked only one time. So, the checks on some Foo objects will be bypassed.\r\n\r\nAm I missing something which is causing this issue ?","title":"Spring filter bypassed when a REST endpoint returns a Json stream","body":"<p>I have an endpoint which return a <code>ResponseBodyEmitter</code>:</p>\n<pre><code>@GetMapping(&quot;/foo/stream&quot;)\npublic ResponseEntity&lt;ResponseBodyEmitter&gt; getFoos() {\n    ResponseBodyEmitter rbe = new ResponseBodyEmitter();\n    executor.execute(() -&gt; {\n        try {\n                rbe.send(foo1);\n                Thread.sleep(2000);\n                rbe.send(foo2);\n                Thread.sleep(2000);\n                rbe.send(foo3);\n                Thread.sleep(2000);\n            }\n            rbe.complete();\n        } catch (Exception ex) {\n            rbe.completeWithError(ex);\n        }\n    });\n    return ResponseEntity.ok(rbe);\n}\n</code></pre>\n<p>A custom filter (<code>FooValidationFilter</code>) is created to perform checks on foo's object when this endpoint is called:</p>\n<pre><code>@Slf4j\n@AllArgsConstructor\npublic class FooValidationFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n\n        ContentCachingRequestWrapper requestToCache = new ContentCachingRequestWrapper(request);\n        ContentCachingResponseWrapper responseToUse = new ContentCachingResponseWrapper(response);\n\n        filterChain.doFilter(request, responseToUse);\n\n        if (!responseToUse.isCommitted() &amp;&amp;\n                responseToUse.getStatus() &gt;= 200 &amp;&amp; responseToUse.getStatus() &lt; 300 &amp;&amp;\n                HttpMethod.GET.matches(request.getMethod())) {\n\n            Scanner scanner = new Scanner(responseToUse.getContentInputStream());\n            String fooField;\n            do {\n                fooField = scanner.findWithinHorizon(REGEX, 0); \n                // perform some checks\n            } while (fooField != null);\n        }\n\n        if (requestToCache.isAsyncStarted()) {\n            requestToCache.getAsyncContext().addListener(new AsyncListener() {\n                public void onComplete(AsyncEvent asyncEvent) throws IOException {\n                    responseToUse.copyBodyToResponse();\n                }\n\n                public void onTimeout(AsyncEvent asyncEvent) throws IOException {\n                }\n\n                public void onError(AsyncEvent asyncEvent) throws IOException {\n                }\n\n                public void onStartAsync(AsyncEvent asyncEvent) throws IOException {\n                }\n            });\n        } else {\n            responseToUse.copyBodyToResponse();\n        }\n    }\n\n    @Override\n    protected boolean shouldNotFilterAsyncDispatch() {\n        return false;\n    }\n</code></pre>\n<p><strong>Note:</strong></p>\n<ol>\n<li><p>In debug mode, the <code>FooValidationFilter</code> is called after each <code>ResponseBodyEmitter.send()</code>.</p>\n</li>\n<li><p>In normal mode, the <code>FooValidationFilter</code> is invoked only one time. So, the checks on some Foo objects will be bypassed.</p>\n</li>\n</ol>\n<p>Am I missing something which is causing this issue ?</p>\n"},{"tags":["java","sql","xss"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1662991228,"post_id":73689615,"comment_id":130127771,"body_markdown":"Don&#39;t you want to exit the `while` loop (in method `regexChecker`) after you find a line that matches your regular expression? The way your code is currently written, method `regexChecker` will only return _true_ if the last line of the file matches the regular expression.","body":"Don&#39;t you want to exit the <code>while</code> loop (in method <code>regexChecker</code>) after you find a line that matches your regular expression? The way your code is currently written, method <code>regexChecker</code> will only return <i>true</i> if the last line of the file matches the regular expression."},{"owner":{"account_id":15899962,"reputation":1,"user_id":11472643,"display_name":"LorenzHaze"},"score":0,"creation_date":1663004532,"post_id":73689615,"comment_id":130132509,"body_markdown":"@Abra u&#39;re right! Is it enough to add isInjected = false as OR clause in while loop?","body":"@Abra u&#39;re right! Is it enough to add isInjected = false as OR clause in while loop?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1663005626,"post_id":73689615,"comment_id":130132844,"body_markdown":"`while ((strCurrentLine = buff.readLine()) != null &amp;&amp; !isInjected) {`","body":"<code>while ((strCurrentLine = buff.readLine()) != null &amp;&amp; !isInjected) {</code>"}],"answers":[{"tags":[],"owner":{"account_id":24305671,"reputation":23,"user_id":18248455,"display_name":"KomiShao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662988652,"creation_date":1662987495,"answer_id":73689729,"question_id":73689615,"body_markdown":"you can try this:\r\n```java\r\nisInjected &amp;= matcher.find();\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UOaHM.png","title":"trying to detect for basic XSS and SQLi tags with Pattern and Matcher in Java","body":"<p>you can try this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>isInjected &amp;= matcher.find();\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UOaHM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UOaHM.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":15899962,"reputation":1,"user_id":11472643,"display_name":"LorenzHaze"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662988652,"creation_date":1662987103,"question_id":73689615,"body_markdown":"I&#39;m writing a small web-app for my exam at university.\r\n\r\nThe goal, is to detect for basic XSS and SQLi tags in a txt file.\r\n\r\nI notice that something is wrong with my code, sometimes it works.\r\n\r\n\tpublic static final String REGEX_FILE_CONTENT_PATTERN = &quot;(&lt;script&gt;|&lt;\\\\/script&gt;|\\\\.jsp|\\\\?[a-zA-Z]+=)&quot;;\r\n\r\n    private final boolean regexChecker(File file) throws IOException {\r\n    \t\tboolean isInjected = false;\r\n    \r\n    \t\tBufferedReader buff = new BufferedReader(new FileReader(file, StandardCharsets.UTF_8));\r\n    \r\n    \t\tString strCurrentLine = null;\r\n    \r\n    \t\t// check if file reaches function\r\n    \t\tif (buff != null) {\r\n    \t\t\t// Pattern pattern = Pattern.compile(REGEX_FILE_CONTENT_PATTERN);\r\n    \t\t\tPattern pattern = Pattern.compile(REGEX_FILE_CONTENT_PATTERN, Pattern.CASE_INSENSITIVE);\r\n    \r\n    \t\t\t// here i can read lines\r\n    \t\t\twhile ((strCurrentLine = buff.readLine()) != null) { // start while\r\n    \t\t\t\tSystem.out.println(strCurrentLine); // PRINT CURRENT LINE\r\n    \t\t\t\tMatcher matcher = pattern.matcher(strCurrentLine);\r\n    \t\t\t\t// System.out.println(&quot;MATCH: &quot; + matcher.find());\r\n    \t\t\t\tisInjected = matcher.find();\r\n    \t\t\t} // end while\r\n    \t\t}\r\n    \t\treturn isInjected;\r\n    \t}\r\n\r\nThe code always returns false, even if script tag is placed inside the file.\r\n\r\nThank you!","title":"trying to detect for basic XSS and SQLi tags with Pattern and Matcher in Java","body":"<p>I'm writing a small web-app for my exam at university.</p>\n<p>The goal, is to detect for basic XSS and SQLi tags in a txt file.</p>\n<p>I notice that something is wrong with my code, sometimes it works.</p>\n<pre><code>public static final String REGEX_FILE_CONTENT_PATTERN = &quot;(&lt;script&gt;|&lt;\\\\/script&gt;|\\\\.jsp|\\\\?[a-zA-Z]+=)&quot;;\n\nprivate final boolean regexChecker(File file) throws IOException {\n        boolean isInjected = false;\n\n        BufferedReader buff = new BufferedReader(new FileReader(file, StandardCharsets.UTF_8));\n\n        String strCurrentLine = null;\n\n        // check if file reaches function\n        if (buff != null) {\n            // Pattern pattern = Pattern.compile(REGEX_FILE_CONTENT_PATTERN);\n            Pattern pattern = Pattern.compile(REGEX_FILE_CONTENT_PATTERN, Pattern.CASE_INSENSITIVE);\n\n            // here i can read lines\n            while ((strCurrentLine = buff.readLine()) != null) { // start while\n                System.out.println(strCurrentLine); // PRINT CURRENT LINE\n                Matcher matcher = pattern.matcher(strCurrentLine);\n                // System.out.println(&quot;MATCH: &quot; + matcher.find());\n                isInjected = matcher.find();\n            } // end while\n        }\n        return isInjected;\n    }\n</code></pre>\n<p>The code always returns false, even if script tag is placed inside the file.</p>\n<p>Thank you!</p>\n"},{"tags":["java","excel"],"comments":[{"owner":{"account_id":1586146,"reputation":2608,"user_id":1470454,"display_name":"Norbert Radyk"},"score":0,"creation_date":1401798670,"post_id":24015183,"comment_id":37015138,"body_markdown":"Please provide more details, i.e. sample of code you use to read the values. Also where does it come misformatted, is that when you&#39;re trying to read the values?","body":"Please provide more details, i.e. sample of code you use to read the values. Also where does it come misformatted, is that when you&#39;re trying to read the values?"}],"answers":[{"tags":[],"owner":{"account_id":4560664,"reputation":68,"user_id":3703103,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1401799635,"creation_date":1401799635,"answer_id":24015602,"question_id":24015183,"body_markdown":"I&#39;m assuming you&#39;re using the cell method .getNumericCellValue() which returns a double - a double will always print at least 1 decimal. As for the exponential format, that is just how large doubles print. See this question for how to deal with printing large doubles without scientific notation: https://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java\r\n\r\nAlso, if your goal is printing the results back out into another spreadsheet with POI, you can create a cell style to format the numbers you put into a cell. For example:\r\n\r\n    DataFormat format = workbook.createDataFormat();\r\n\tCellStyle number = workbook.createCellStyle();\r\n\tnumber.setDataFormat(format.getFormat(&quot;#,##0&quot;));","title":"Why format changes while reading data from excel file using poi api java?","body":"<p>I'm assuming you're using the cell method .getNumericCellValue() which returns a double - a double will always print at least 1 decimal. As for the exponential format, that is just how large doubles print. See this question for how to deal with printing large doubles without scientific notation: <a href=\"https://stackoverflow.com/questions/16098046/how-to-print-double-value-without-scientific-notation-using-java\">How to print double value without scientific notation using Java?</a></p>\n\n<p>Also, if your goal is printing the results back out into another spreadsheet with POI, you can create a cell style to format the numbers you put into a cell. For example:</p>\n\n<pre><code>DataFormat format = workbook.createDataFormat();\nCellStyle number = workbook.createCellStyle();\nnumber.setDataFormat(format.getFormat(\"#,##0\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6532172,"reputation":11,"user_id":5052985,"display_name":"Keshav Gopal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662988542,"creation_date":1662988542,"answer_id":73689957,"question_id":24015183,"body_markdown":"Try this function . You need to call this function for the expected value \r\n\r\n\tpublic static String convertNumberToString(Object obj) {\r\n\t\tif (obj == null)\r\n\t\t\treturn null;\r\n\t\ttry {\r\n\r\n\t\t\treturn new BigDecimal(obj.toString()).toBigInteger().toString();\r\n\t\t} catch (NumberFormatException nfe) {\r\n\t\t\treturn obj.toString();\r\n\t\t}\r\n\t}\r\n\r\nyou should be able to get the proper string","title":"Why format changes while reading data from excel file using poi api java?","body":"<p>Try this function . You need to call this function for the expected value</p>\n<pre><code>public static String convertNumberToString(Object obj) {\n    if (obj == null)\n        return null;\n    try {\n\n        return new BigDecimal(obj.toString()).toBigInteger().toString();\n    } catch (NumberFormatException nfe) {\n        return obj.toString();\n    }\n}\n</code></pre>\n<p>you should be able to get the proper string</p>\n"}],"owner":{"account_id":1191768,"reputation":335,"user_id":1197056,"accept_rate":37,"display_name":"Bamadeva"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":991,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":24015602,"answer_count":2,"score":0,"last_activity_date":1662988542,"creation_date":1401798515,"question_id":24015183,"body_markdown":"I have an excel sheet, While reading the format changes like following \r\n\r\n&gt; 2 comes like 2.0, 1189736455 comes like 1.18973645E8  in Exponential\r\n&gt; format..\r\n\r\nWhy this happens, can anybody please help..\r\nThanks in advance...\r\n\r\nhere is my sample code   Sheet_numUI and Sheet_numDB are the number of sheet form two files... Generally here I read from a file and compare with some value which I stored in a list and the result I store in another excel file... But while getting data from second file that is workBookUI (in my program) I&#39;m not getting expected values...\r\n\r\nthe following are the files :  reader ![enter image description here][1]\r\nand output file is : ![enter image description here][2]\r\n\r\n       if(Sheet_numUI==Sheet_numDB){\r\n            \tfor(int i=0;i&lt;Sheet_numUI;i++){\r\n            \t\tSheet_nameDB=workBookDB.getSheetAt(i).getSheetName();\r\n            \t\tSheet_nameUI=workBookUI.getSheetAt(i).getSheetName();\r\n            \t\tResultXLS_Reader =  new OMEGA_XLSX_Reader(file.getAbsolutePath());\r\n            \t\tResultXLS_Reader.addSheet1(Sheet_nameDB);\r\n            \t\tcounter=4;\r\n            \t\tDBCol=readerDB.getColumnCount(Sheet_nameDB);\r\n            \t\tDBRow=readerDB.getRowCount(Sheet_nameDB);\r\n            \t\t\r\n            \t\tUICol=readerUI.getColumnCount(Sheet_nameUI);\r\n            \t\tUIRow=readerUI.getRowCount(Sheet_nameUI);\r\n            \t\tfor(int y=0;y&lt;DBRow;y++){\r\n            \t\t\tfor (int x=0;x&lt;DBCol;x++){\r\n            \t\t\t\tif(y==0){\r\n            \t\t\t\t\tval=readerDB.getCellData(Sheet_nameDB, x, y+1);\r\n            \t\t\t\t\tResultXLS_Reader.setCellDataStringColorLightGreen(Sheet_nameDB, x+1, y+1,val);\r\n            \t\t\t\t}else{\r\n            \t\t\t\t\tval=readerDB.getCellData(Sheet_nameDB, x, y+1);\r\n            \t\t\t\t\tResultXLS_Reader.setCellData(Sheet_nameDB, x+1, y+1,val);\r\n            \t\t\t\t\tlist.add(val);\r\n            \t\t\t\t\t\r\n            \t\t\t\t}\r\n            \t\t\t\tSystem.out.println(&quot;List : &quot;+ list);\r\n            \t\t\t}\r\n            \t\t}\r\n    //        \t\tdata insertion over\r\n            \t\tcompVal=(String) map.get(Sheet_nameDB);\r\n            \t\tfor(int k=0;k&lt;=UIRow;k++){\r\n            \t\t\tfor(int l=0;l&lt;UICol;l++){\r\n            \t\t\t\tval=readerUI.getCellData(Sheet_nameUI, l, k);\r\n            \t\t\t\tif(val.equalsIgnoreCase(compVal)){\r\n            \t\t\t\t\t\r\n            \t\t\t\t\tcompleteRow=readerUI.getRow(Sheet_nameUI, k-1);\r\n            \t\t\t\t\tfor(Cell cell: completeRow){\r\n            \t\t\t\t\t\tlist2.add(cell);\r\n            \t\t\t\t\t}\r\n            \t\t\t\t\tif(list2 != null &amp;&amp; list2.size() &gt; 0){\r\n            \t\t\t\t\tfor(int m=0;m&lt;list2.size();m++){\r\n            \t\t\t\t\t        \t\t\t\t\t\t\r\n                \t\t\t\t\tString val1=list.get(m).toString();\r\n                \t\t\t\t\tString val2=list2.get(m).toString();\r\n                \t\t\t\t\t\r\n                \t\t\t\t\tif(val1.equalsIgnoreCase(val2)){\r\n                \t\t\t\t\t\tResultXLS_Reader.setCellDataColorLightGreen(Sheet_nameDB,m+1,counter, val1);\r\n                \t\t\t\t\t\t\r\n                \t\t\t\t\t}else{\r\n                \t\t\t\t\t\tResultXLS_Reader.setCellDataColorRed(Sheet_nameDB, m+1,counter, val2);\r\n                \t\t\t\t\t}\r\n                \t\t\t\t}\r\n            \t\t\t\t\tcounter=counter+1;\r\n            \t\t\t\t}\r\n            \t\t\t\t\tlist2.clear();\r\n            \t\t\t\t}\r\n            \t\t\t\t\r\n            \t\t\t}\r\n            \t\t}\r\n            \t\tlist.clear();\r\n            \t\tcounter =0;\r\n            \t}\r\n            \t\r\n            }\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/AkY71.png\r\n  [2]: http://i.stack.imgur.com/HKL6C.png","title":"Why format changes while reading data from excel file using poi api java?","body":"<p>I have an excel sheet, While reading the format changes like following </p>\n\n<blockquote>\n  <p>2 comes like 2.0, 1189736455 comes like 1.18973645E8  in Exponential\n  format..</p>\n</blockquote>\n\n<p>Why this happens, can anybody please help..\nThanks in advance...</p>\n\n<p>here is my sample code   Sheet_numUI and Sheet_numDB are the number of sheet form two files... Generally here I read from a file and compare with some value which I stored in a list and the result I store in another excel file... But while getting data from second file that is workBookUI (in my program) I'm not getting expected values...</p>\n\n<p>the following are the files :  reader <img src=\"https://i.stack.imgur.com/AkY71.png\" alt=\"enter image description here\">\nand output file is : <img src=\"https://i.stack.imgur.com/HKL6C.png\" alt=\"enter image description here\"></p>\n\n<pre><code>   if(Sheet_numUI==Sheet_numDB){\n            for(int i=0;i&lt;Sheet_numUI;i++){\n                Sheet_nameDB=workBookDB.getSheetAt(i).getSheetName();\n                Sheet_nameUI=workBookUI.getSheetAt(i).getSheetName();\n                ResultXLS_Reader =  new OMEGA_XLSX_Reader(file.getAbsolutePath());\n                ResultXLS_Reader.addSheet1(Sheet_nameDB);\n                counter=4;\n                DBCol=readerDB.getColumnCount(Sheet_nameDB);\n                DBRow=readerDB.getRowCount(Sheet_nameDB);\n\n                UICol=readerUI.getColumnCount(Sheet_nameUI);\n                UIRow=readerUI.getRowCount(Sheet_nameUI);\n                for(int y=0;y&lt;DBRow;y++){\n                    for (int x=0;x&lt;DBCol;x++){\n                        if(y==0){\n                            val=readerDB.getCellData(Sheet_nameDB, x, y+1);\n                            ResultXLS_Reader.setCellDataStringColorLightGreen(Sheet_nameDB, x+1, y+1,val);\n                        }else{\n                            val=readerDB.getCellData(Sheet_nameDB, x, y+1);\n                            ResultXLS_Reader.setCellData(Sheet_nameDB, x+1, y+1,val);\n                            list.add(val);\n\n                        }\n                        System.out.println(\"List : \"+ list);\n                    }\n                }\n//              data insertion over\n                compVal=(String) map.get(Sheet_nameDB);\n                for(int k=0;k&lt;=UIRow;k++){\n                    for(int l=0;l&lt;UICol;l++){\n                        val=readerUI.getCellData(Sheet_nameUI, l, k);\n                        if(val.equalsIgnoreCase(compVal)){\n\n                            completeRow=readerUI.getRow(Sheet_nameUI, k-1);\n                            for(Cell cell: completeRow){\n                                list2.add(cell);\n                            }\n                            if(list2 != null &amp;&amp; list2.size() &gt; 0){\n                            for(int m=0;m&lt;list2.size();m++){\n\n                                String val1=list.get(m).toString();\n                                String val2=list2.get(m).toString();\n\n                                if(val1.equalsIgnoreCase(val2)){\n                                    ResultXLS_Reader.setCellDataColorLightGreen(Sheet_nameDB,m+1,counter, val1);\n\n                                }else{\n                                    ResultXLS_Reader.setCellDataColorRed(Sheet_nameDB, m+1,counter, val2);\n                                }\n                            }\n                            counter=counter+1;\n                        }\n                            list2.clear();\n                        }\n\n                    }\n                }\n                list.clear();\n                counter =0;\n            }\n\n        }\n</code></pre>\n"},{"tags":["java","bitmap","javax.imageio"],"comments":[{"owner":{"account_id":6795544,"reputation":1900,"user_id":5231001,"accept_rate":75,"display_name":"n247s"},"score":0,"creation_date":1662976005,"post_id":73686870,"comment_id":130122266,"body_markdown":"What is the result you got from this attempt?","body":"What is the result you got from this attempt?"},{"owner":{"account_id":10769973,"reputation":79,"user_id":9674183,"display_name":"Gladiator9120"},"score":0,"creation_date":1662976856,"post_id":73686870,"comment_id":130122516,"body_markdown":"The string itself saved as image file. Entire string. @n247s","body":"The string itself saved as image file. Entire string. @n247s"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":4,"creation_date":1662976863,"post_id":73686870,"comment_id":130122517,"body_markdown":"You don&#39;t need to use a font. You need to convert each pair of bytes to a number and set the correct bits in your image to black, based on the &#39;1&#39;s in the number. The MSB is at the bottom of the image, the LSB at the top. Each pair of bytes is a single column from left to right.","body":"You don&#39;t need to use a font. You need to convert each pair of bytes to a number and set the correct bits in your image to black, based on the &#39;1&#39;s in the number. The MSB is at the bottom of the image, the LSB at the top. Each pair of bytes is a single column from left to right."},{"owner":{"account_id":10769973,"reputation":79,"user_id":9674183,"display_name":"Gladiator9120"},"score":0,"creation_date":1662976950,"post_id":73686870,"comment_id":130122539,"body_markdown":"@tgdavies Thanks for the comment, however, I have literally zero experience with image manipulation / creating etc. Is it possible for you to point me to right direction (blog / docs) anything from where I can get started ?","body":"@tgdavies Thanks for the comment, however, I have literally zero experience with image manipulation / creating etc. Is it possible for you to point me to right direction (blog / docs) anything from where I can get started ?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1662995399,"post_id":73686870,"comment_id":130129408,"body_markdown":"I don’t know what ByteString is, but [java.util.HexFormat](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/HexFormat.html) will do the same thing without requiring an external dependency:  `byte[] imageInByte = HexFormat.of().parseHex(hex);`","body":"I don’t know what ByteString is, but <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/HexFormat.html\" rel=\"nofollow noreferrer\">java.util.HexFormat</a> will do the same thing without requiring an external dependency:  <code>byte[] imageInByte = HexFormat.of().parseHex(hex);</code>"}],"answers":[{"tags":[],"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662988194,"creation_date":1662988194,"answer_id":73689898,"question_id":73686870,"body_markdown":"The clue here is *the format of the hex/binary data*. You need to know this from some kind of specification, from the device/software/service that produces the hex string. From the data and sample image, I believe @tgdavies has correctly reverse-engineered it. \r\n\r\nEach pixel is one bit. The white pixels are stored as 0, black as 1. Each *column* of pixels is stored as two bytes. Each column is stored bottom-up. \r\n\r\nAssuming that format is correct, it&#39;s quite trivial to write code to convert it:\r\n\r\n\r\n```java \r\npublic void createImageFromHex() throws IOException {\r\n    // Assumption: hex contains a bitmap format, where\r\n    //   * each pair of bytes is one *column*\r\n    //   * each column is stored &quot;bottom-up&quot; (LSB is bottom pixel, MSB is top pixel)\r\n    String hex = &quot;001E00FE07FE3FE03C003C003F801FFE03FE007E3E003FE03FFC0FFE0E3E0FFE3FFC3FE03E0000000FF83FFC3FFE300630063006380E180C00003E003FE03FFC0FFE0E3E0FFE3FFC3FE03E00000000003FFE3FFE3FFE01F807F01FC03FFE3FFE3FFE0000000E000E000E3FFE3FFE3FFE000E000E000E0000&quot;;\r\n\r\n    // (result is 120 bytes)\r\n    byte[] imageInByte = ByteString.decodeHex(hex).toByteArray();\r\n\r\n    int height = 16; // 16 according to sample\r\n    int width = imageInByte.length / 2; // 60 according to the sample, but as we know each column is 16 bits or 2 bytes, we can calculate it\r\n\r\n    // Create a BufferedImage of correct type: For a bitmap this is TYPE_BYTE_BINARY\r\n    BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_BINARY);\r\n\r\n    // Loop over pixels and insert black or white\r\n    for (int x = 0; x &lt; width; x++) {\r\n        for (int y = 0; y &lt; height; y++) {\r\n            int pos = height * x + y;\r\n            int bytePos = pos / 8;\r\n            int bitPos = 7 - (pos % 8);\r\n            byte value = imageInByte[bytePos];\r\n\r\n            int bit = (value &gt;&gt; bitPos) &amp; 1;\r\n\r\n            // Each pixel is either all white (0) or all black (1)\r\n            int rgb = bit != 0 ? 0x000000 : 0xFFFFFF;\r\n            img.setRGB(x, height - 1 - y, rgb);\r\n        }\r\n    }\r\n\r\n    // Write to BMP format\r\n    File output = new File(&quot;Hex.bmp&quot;);\r\n    if (!ImageIO.write(img, &quot;bmp&quot;, output)) {\r\n        System.err.printf(&quot;Could not write %s in BMP format...%n&quot;, output.getAbsolutePath());\r\n    }\r\n}\r\n\r\n````\r\n\r\nResult file: \r\n\r\n[![Hex.bmp][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/n9QMa.png","title":"create BITMAP image from hex String Java","body":"<p>The clue here is <em>the format of the hex/binary data</em>. You need to know this from some kind of specification, from the device/software/service that produces the hex string. From the data and sample image, I believe @tgdavies has correctly reverse-engineered it.</p>\n<p>Each pixel is one bit. The white pixels are stored as 0, black as 1. Each <em>column</em> of pixels is stored as two bytes. Each column is stored bottom-up.</p>\n<p>Assuming that format is correct, it's quite trivial to write code to convert it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void createImageFromHex() throws IOException {\n    // Assumption: hex contains a bitmap format, where\n    //   * each pair of bytes is one *column*\n    //   * each column is stored &quot;bottom-up&quot; (LSB is bottom pixel, MSB is top pixel)\n    String hex = &quot;001E00FE07FE3FE03C003C003F801FFE03FE007E3E003FE03FFC0FFE0E3E0FFE3FFC3FE03E0000000FF83FFC3FFE300630063006380E180C00003E003FE03FFC0FFE0E3E0FFE3FFC3FE03E00000000003FFE3FFE3FFE01F807F01FC03FFE3FFE3FFE0000000E000E000E3FFE3FFE3FFE000E000E000E0000&quot;;\n\n    // (result is 120 bytes)\n    byte[] imageInByte = ByteString.decodeHex(hex).toByteArray();\n\n    int height = 16; // 16 according to sample\n    int width = imageInByte.length / 2; // 60 according to the sample, but as we know each column is 16 bits or 2 bytes, we can calculate it\n\n    // Create a BufferedImage of correct type: For a bitmap this is TYPE_BYTE_BINARY\n    BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_BINARY);\n\n    // Loop over pixels and insert black or white\n    for (int x = 0; x &lt; width; x++) {\n        for (int y = 0; y &lt; height; y++) {\n            int pos = height * x + y;\n            int bytePos = pos / 8;\n            int bitPos = 7 - (pos % 8);\n            byte value = imageInByte[bytePos];\n\n            int bit = (value &gt;&gt; bitPos) &amp; 1;\n\n            // Each pixel is either all white (0) or all black (1)\n            int rgb = bit != 0 ? 0x000000 : 0xFFFFFF;\n            img.setRGB(x, height - 1 - y, rgb);\n        }\n    }\n\n    // Write to BMP format\n    File output = new File(&quot;Hex.bmp&quot;);\n    if (!ImageIO.write(img, &quot;bmp&quot;, output)) {\n        System.err.printf(&quot;Could not write %s in BMP format...%n&quot;, output.getAbsolutePath());\n    }\n}\n\n</code></pre>\n<p>Result file:</p>\n<p><a href=\"https://i.stack.imgur.com/n9QMa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n9QMa.png\" alt=\"Hex.bmp\" /></a></p>\n"}],"owner":{"account_id":10769973,"reputation":79,"user_id":9674183,"display_name":"Gladiator9120"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":675,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73689898,"answer_count":1,"score":0,"last_activity_date":1662988194,"creation_date":1662973534,"question_id":73686870,"body_markdown":"I have a requirement to create a BMP image (black &amp; white) from the hex string created through Excel Macro. I have next to zero experience working on this and need some help. Below is the Hex String, output image example of the hex, and little code snippet that I am trying : \r\n\r\n**String**:\r\n \r\n```001E00FE07FE3FE03C003C003F801FFE03FE007E3E003FE03FFC0FFE0E3E0FFE3FFC3FE03E0000000FF83FFC3FFE300630063006380E180C00003E003FE03FFC0FFE0E3E0FFE3FFC3FE03E00000000003FFE3FFE3FFE01F807F01FC03FFE3FFE3FFE0000000E000E000E3FFE3FFE3FFE000E000E000E0000```\r\n\r\n**Image to be created of the above string:**\r\n\r\n[![enter image description here][1]][1] \r\n\r\n[1]: https://i.stack.imgur.com/LzcGR.png\r\n\r\n**Code Snippet :**\r\n\r\n``` \t\r\npublic void createImageFromHex() throws IOException {\r\n\t\tString hex=&quot;001E00FE07FE3FE03C003C003F801FFE03FE007E3E003FE03FFC0FFE0E3E0FFE3FFC3FE03E0000000FF83FFC3FFE300630063006380E180C00003E003FE03FFC0FFE0E3E0FFE3FFC3FE03E00000000003FFE3FFE3FFE01F807F01FC03FFE3FFE3FFE0000000E000E000E3FFE3FFE3FFE000E000E000E0000&quot;;\r\n\r\n\t\tbyte[] imageInByte= ByteString.decodeHex(hex).toByteArray();\r\n\r\n\t\tfor (byte b : imageInByte) {\r\n\t\t\tSystem.out.println(&quot;Byte : &quot; + b);\r\n\r\n\t\t}\r\n\t\tInputStream in = new ByteArrayInputStream(imageInByte);\r\n\r\n\t\tFont font = new Font(&quot;Arial&quot;, Font.PLAIN, 12);\r\n\t\tBufferedImage img = new BufferedImage(1, 1, BufferedImage.BITMASK);\r\n\t\tGraphics2D g2d = img.createGraphics();\r\n\t\tFontMetrics fm = g2d.getFontMetrics(font);\r\n\t\tg2d.dispose();\r\n\r\n\t\tint width = fm.stringWidth(hex);\r\n\t\tint height = fm.getHeight();\r\n\r\n\t\timg = new BufferedImage(width, height, BufferedImage.BITMASK);\r\n\t\tg2d = img.createGraphics();\r\n\t\tg2d.setColor(Color.WHITE);\r\n\t\tg2d.fillRect(0, 0, width, height);\r\n\t\tg2d.setColor(Color.BLACK);\r\n\t\tg2d.setFont(font);\r\n\t\tg2d.drawString(hex, 0, fm.getAscent());\r\n\t\tg2d.dispose();\r\n\r\n\t\ttry {\r\n\t\t\tImageIO.write(img, &quot;bmp&quot;, new File(&quot;Hex.bmp&quot;));\r\n\t\t} catch (IOException ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t}\r\n\t} \r\n```","title":"create BITMAP image from hex String Java","body":"<p>I have a requirement to create a BMP image (black &amp; white) from the hex string created through Excel Macro. I have next to zero experience working on this and need some help. Below is the Hex String, output image example of the hex, and little code snippet that I am trying :</p>\n<p><strong>String</strong>:</p>\n<p><code>001E00FE07FE3FE03C003C003F801FFE03FE007E3E003FE03FFC0FFE0E3E0FFE3FFC3FE03E0000000FF83FFC3FFE300630063006380E180C00003E003FE03FFC0FFE0E3E0FFE3FFC3FE03E00000000003FFE3FFE3FFE01F807F01FC03FFE3FFE3FFE0000000E000E000E3FFE3FFE3FFE000E000E000E0000</code></p>\n<p><strong>Image to be created of the above string:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/LzcGR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LzcGR.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Code Snippet :</strong></p>\n<pre><code>public void createImageFromHex() throws IOException {\n        String hex=&quot;001E00FE07FE3FE03C003C003F801FFE03FE007E3E003FE03FFC0FFE0E3E0FFE3FFC3FE03E0000000FF83FFC3FFE300630063006380E180C00003E003FE03FFC0FFE0E3E0FFE3FFC3FE03E00000000003FFE3FFE3FFE01F807F01FC03FFE3FFE3FFE0000000E000E000E3FFE3FFE3FFE000E000E000E0000&quot;;\n\n        byte[] imageInByte= ByteString.decodeHex(hex).toByteArray();\n\n        for (byte b : imageInByte) {\n            System.out.println(&quot;Byte : &quot; + b);\n\n        }\n        InputStream in = new ByteArrayInputStream(imageInByte);\n\n        Font font = new Font(&quot;Arial&quot;, Font.PLAIN, 12);\n        BufferedImage img = new BufferedImage(1, 1, BufferedImage.BITMASK);\n        Graphics2D g2d = img.createGraphics();\n        FontMetrics fm = g2d.getFontMetrics(font);\n        g2d.dispose();\n\n        int width = fm.stringWidth(hex);\n        int height = fm.getHeight();\n\n        img = new BufferedImage(width, height, BufferedImage.BITMASK);\n        g2d = img.createGraphics();\n        g2d.setColor(Color.WHITE);\n        g2d.fillRect(0, 0, width, height);\n        g2d.setColor(Color.BLACK);\n        g2d.setFont(font);\n        g2d.drawString(hex, 0, fm.getAscent());\n        g2d.dispose();\n\n        try {\n            ImageIO.write(img, &quot;bmp&quot;, new File(&quot;Hex.bmp&quot;));\n        } catch (IOException ex) {\n            ex.printStackTrace();\n        }\n    } \n</code></pre>\n"},{"tags":["java","r","linux","server","xlconnect"],"comments":[{"owner":{"account_id":10787939,"reputation":579,"user_id":7936386,"display_name":"Andrei Niță"},"score":0,"creation_date":1662647371,"post_id":73650194,"comment_id":130058590,"body_markdown":"you could use library(openxlsx) to deal with xlsx in R. I think is far superior to XLConnnect.","body":"you could use library(openxlsx) to deal with xlsx in R. I think is far superior to XLConnnect."},{"owner":{"account_id":1272872,"reputation":2251,"user_id":1228765,"accept_rate":60,"display_name":"Martin Studer"},"score":0,"creation_date":1662791823,"post_id":73650194,"comment_id":130092141,"body_markdown":"You may want to try running `R CMD javareconf` after upgrading various parts of your system.","body":"You may want to try running <code>R CMD javareconf</code> after upgrading various parts of your system."}],"owner":{"account_id":24562908,"reputation":1,"user_id":18470404,"display_name":"ABeer_AEM"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662987819,"creation_date":1662645081,"question_id":73650194,"body_markdown":"I get the following error-massage when I try to open a existing xls-file (that include some macros) and add some data to it in R with the package &quot;XLConnect&quot;.\r\n\r\n`Error in .jcall(&quot;java/lang/Class&quot;, &quot;Ljava/lang/Class;&quot;, &quot;forName&quot;, cl,: RcallMethod: cannot determine object class`\r\n\r\n`Warning: Error in h: Error evaluating argument &#39;Class&#39; in method selection for function &#39;new&#39;: Java Exception &lt;no description because toString() failed&gt;jclassName(class, class.loader = class.loader)new(&quot; jobjRef&quot;, jobj = &lt;pointer: 0x55b2c3244c00&gt;, jclass = &quot;java/lang/Throwable&quot;)`\r\n\r\n\r\nI&#39;m working on a LINUX-Server, which I recently updated it. In addition updated R, RStudio and RShiny-Server. Everything worked before the Update. If I run the same Shiny script local on my Win10 PC evrything works fine.I googled a lot and can&#39;t find any solution to my problem. Can you guys help me?\r\n\r\nJava version *openjdk 11.0.16*\r\n\r\nLinux server, R, Shiny-Server and RStudio-Server newest version\r\n\r\n\r\nThanks for your help.\r\nPlease be kind, I&#39;m new with Linux systems and these things.\r\n\r\n\r\n**EDIT:**\r\n\r\nI&#39;m tried `R CMD javareconf` and get the following output\r\n[consol output][1]. When I run my Rscript again, I get the same error massage like described above.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eo1R1.png","title":"Getting Error while create xls-File with XLConnect in R after Linux-Server Update","body":"<p>I get the following error-massage when I try to open a existing xls-file (that include some macros) and add some data to it in R with the package &quot;XLConnect&quot;.</p>\n<p><code>Error in .jcall(&quot;java/lang/Class&quot;, &quot;Ljava/lang/Class;&quot;, &quot;forName&quot;, cl,: RcallMethod: cannot determine object class</code></p>\n<p><code>Warning: Error in h: Error evaluating argument 'Class' in method selection for function 'new': Java Exception &lt;no description because toString() failed&gt;jclassName(class, class.loader = class.loader)new(&quot; jobjRef&quot;, jobj = &lt;pointer: 0x55b2c3244c00&gt;, jclass = &quot;java/lang/Throwable&quot;)</code></p>\n<p>I'm working on a LINUX-Server, which I recently updated it. In addition updated R, RStudio and RShiny-Server. Everything worked before the Update. If I run the same Shiny script local on my Win10 PC evrything works fine.I googled a lot and can't find any solution to my problem. Can you guys help me?</p>\n<p>Java version <em>openjdk 11.0.16</em></p>\n<p>Linux server, R, Shiny-Server and RStudio-Server newest version</p>\n<p>Thanks for your help.\nPlease be kind, I'm new with Linux systems and these things.</p>\n<p><strong>EDIT:</strong></p>\n<p>I'm tried <code>R CMD javareconf</code> and get the following output\n<a href=\"https://i.stack.imgur.com/eo1R1.png\" rel=\"nofollow noreferrer\">consol output</a>. When I run my Rscript again, I get the same error massage like described above.</p>\n"},{"tags":["java","liferay"],"answers":[{"tags":[],"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662987794,"creation_date":1662987794,"answer_id":73689802,"question_id":73689431,"body_markdown":"[Service Wrappers][1] come to my mind: *Everything* in Liferay goes through the technical API, and with a ServiceWrapper you can intercept and enrich calls to that API. \r\n\r\n[Model Listeners][2] work on the persisted objects themselves, but I&#39;m more hesitant to recommend them - they&#39;re too far away from the business layer and rather on the persistence layer. I&#39;d be *very* reserved putting any business logic down that layer.\r\n\r\nThose plugin types work for any and all Entities created by Liferay&#39;s ServiceBuilder - and lucky you, Journal Article is such an entity. You&#39;d likely look at a wrapper of JournalArticleLocalService.\r\n\r\n\r\n  [1]: https://help.liferay.com/hc/en-us/articles/360018159951-Overriding-Liferay-Services-Service-Wrappers-\r\n  [2]: https://help.liferay.com/hc/en-us/articles/360017881252-Creating-Model-Listeners","title":"Custom callback method when journal article expires in Liferay?","body":"<p><a href=\"https://help.liferay.com/hc/en-us/articles/360018159951-Overriding-Liferay-Services-Service-Wrappers-\" rel=\"nofollow noreferrer\">Service Wrappers</a> come to my mind: <em>Everything</em> in Liferay goes through the technical API, and with a ServiceWrapper you can intercept and enrich calls to that API.</p>\n<p><a href=\"https://help.liferay.com/hc/en-us/articles/360017881252-Creating-Model-Listeners\" rel=\"nofollow noreferrer\">Model Listeners</a> work on the persisted objects themselves, but I'm more hesitant to recommend them - they're too far away from the business layer and rather on the persistence layer. I'd be <em>very</em> reserved putting any business logic down that layer.</p>\n<p>Those plugin types work for any and all Entities created by Liferay's ServiceBuilder - and lucky you, Journal Article is such an entity. You'd likely look at a wrapper of JournalArticleLocalService.</p>\n"}],"owner":{"account_id":22825676,"reputation":387,"user_id":16974979,"display_name":"KRISTIJAN TOMASINI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73689802,"answer_count":1,"score":0,"last_activity_date":1662987794,"creation_date":1662986454,"question_id":73689431,"body_markdown":"I need to run custom code whenever an Journal Article expires in Liferay (in Java).\r\n\r\nHow can I register a callback function which gets called when an Journal Article changes its state from approved to expired?\r\n\r\nSo I need to call a Java method which would receive the Article which expired as its parameter, or at least the Article&#39;s id.\r\nAny ideas?","title":"Custom callback method when journal article expires in Liferay?","body":"<p>I need to run custom code whenever an Journal Article expires in Liferay (in Java).</p>\n<p>How can I register a callback function which gets called when an Journal Article changes its state from approved to expired?</p>\n<p>So I need to call a Java method which would receive the Article which expired as its parameter, or at least the Article's id.\nAny ideas?</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1662979132,"post_id":73687934,"comment_id":130123211,"body_markdown":"[What is a debugger and how can it help me diagnose problems?](https://stackoverflow.com/q/25385173)","body":"<a href=\"https://stackoverflow.com/q/25385173\">What is a debugger and how can it help me diagnose problems?</a>"}],"answers":[{"tags":[],"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662987478,"creation_date":1662987478,"answer_id":73689722,"question_id":73687934,"body_markdown":"`i = i+1` increments the counter of the outer for-loop by 1.  When you copy a `0` to the right you need to ignore that copied `0` value as you continue to step through.  Otherwise, you will just fill out the array with `0`s.\r\n\r\nIs it in the right place?  Well, you say its working so it seems to be.  Write some tests to verify the expected behavior.\r\n    ","title":"Given a fixed-length integer array arr, duplicate each occurrence of zero, shift elements to right","body":"<p><code>i = i+1</code> increments the counter of the outer for-loop by 1.  When you copy a <code>0</code> to the right you need to ignore that copied <code>0</code> value as you continue to step through.  Otherwise, you will just fill out the array with <code>0</code>s.</p>\n<p>Is it in the right place?  Well, you say its working so it seems to be.  Write some tests to verify the expected behavior.</p>\n"}],"owner":{"account_id":23448076,"reputation":37,"user_id":17504599,"display_name":"Jeevan Jitu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1662987478,"creation_date":1662978930,"question_id":73687934,"body_markdown":"```\r\npublic class Dupzero {\r\n\tstatic int dup =0;\r\n\t\r\n    public static void duplicateZeros(int[] arr) {\r\n    \t//read all the elememts in arrays\r\n    for(int i=0;i&lt;arr.length;i++) {\r\n    \tif(arr[i]==0) {\r\n    \t\tfor(int j=arr.length-2;j&gt;=i;j--) {\r\n    \t\t\tarr[j+1]=arr[j];\r\n    \t\t\t\r\n    \t\t}\r\n    \t\ti=i+1;\r\n    \t\r\n    \t}\r\n    \t \r\n    }\r\n    System.out.println(Arrays.toString(arr));\r\n    }\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint []arr = {\r\n\t\t\t\t1,0,2,3,0,4,5,0\t\r\n\t\t};\r\n\tduplicateZeros(arr);\r\n\t}\r\n}\r\n```\r\n\r\nI wrote this code and i get expected output. Previously i was getting wrong output as i missed the statement i=i+1; .. Can you explain me here in the code what is i=i+1 doing ? is it in the right place ? ","title":"Given a fixed-length integer array arr, duplicate each occurrence of zero, shift elements to right","body":"<pre><code>public class Dupzero {\n    static int dup =0;\n    \n    public static void duplicateZeros(int[] arr) {\n        //read all the elememts in arrays\n    for(int i=0;i&lt;arr.length;i++) {\n        if(arr[i]==0) {\n            for(int j=arr.length-2;j&gt;=i;j--) {\n                arr[j+1]=arr[j];\n                \n            }\n            i=i+1;\n        \n        }\n         \n    }\n    System.out.println(Arrays.toString(arr));\n    }\n\n    public static void main(String[] args) {\n        int []arr = {\n                1,0,2,3,0,4,5,0 \n        };\n    duplicateZeros(arr);\n    }\n}\n</code></pre>\n<p>I wrote this code and i get expected output. Previously i was getting wrong output as i missed the statement i=i+1; .. Can you explain me here in the code what is i=i+1 doing ? is it in the right place ?</p>\n"},{"tags":["java","spring-mvc","spring-data","jsonparser","jparepository"],"owner":{"account_id":26181504,"reputation":13,"user_id":19864826,"display_name":"rafalindo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1662987402,"creation_date":1662757593,"question_id":73667493,"body_markdown":"I&#39;m new to this tool and I&#39;m having trouble with this specific issue. I looked for an example But could not find something similar, better, I found a possible solution, but in my case It doesn&#39;t work.\r\n\r\nI have this narrow project that resembles our famous CRUD, and I&#39;m trying to reference the primary key from one table to another.\r\n\r\n 1. Client Entity:\r\n\r\n        @Entity\r\n        @Table(name = &quot;client&quot;)             \r\n        public class Client {\r\n    \r\n            @Id\r\n            @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n            private Long id;\r\n    \r\n            @Column(name = &quot;cpf&quot;, length = 14)\r\n            private String cpf;\r\n    \r\n            @Column(name = &quot;name&quot;, length = 100)\r\n            private String name;\r\n    \r\n            @Column(name = &quot;birth_date&quot;)\r\n            private LocalDate birthDate;\r\n    \r\n            @Column(name = &quot;address&quot;, length = 255)\r\n            private String address;\r\n    \r\n            @Column(name = &quot;telephone&quot;, length = 14)\r\n            private String telephone;\r\n    \r\n            @Column(name = &quot;email&quot;, length = 200)\r\n            private String email;\r\n    \r\n            @Column(name = &quot;date_register&quot;, insertable = true, updatable = false)\r\n            private LocalDate dateRegister;\r\n    \r\n            public Client() {\r\n                super();\r\n            }\r\n    \r\n            public Client(Long id, String cpf, String name, LocalDate birthDate, String address, String telephone, String email, LocalDate dateRegister) {\r\n                super();\r\n                this.id = id;\r\n                this.cpf = cpf;\r\n                this.name = name;\r\n                this.birthDate = birthDate;\r\n                this.address = address;\r\n                this.telephone = telephone;\r\n                this.email = email;\r\n                this.dateRegister = dateRegister;\r\n            }\r\n    \r\n            public Client(String cpf, String name, LocalDate birthDate, String address, String telephone, String email, LocalDate dateRegister) {\r\n                super();\r\n                this.cpf = cpf;\r\n                this.name = name;\r\n                this.birthDate = birthDate;\r\n                this.address = address;\r\n                this.telephone = telephone;\r\n                this.email = email;\r\n                this.dateRegister = dateRegister;\r\n            }\r\n    \r\n            @PrePersist\r\n            public void prePersist() {\r\n                setDateRegister(LocalDate.now());\r\n            }\r\n    \r\n            public Long getId() {\r\n                return id;\r\n            }\r\n    \r\n            public void setId(Long id) {\r\n                this.id = id;\r\n            }\r\n    \r\n            public String getCpf() {\r\n                return cpf;\r\n            }\r\n    \r\n            public void setCpf(String cpf) {\r\n                this.cpf = cpf;\r\n            }\r\n    \r\n            public String getName() {\r\n                return name;\r\n            }\r\n    \r\n            public void setName(String name) {\r\n                this.name = name;\r\n            }\r\n    \r\n            public LocalDate getBirthDate() {\r\n                return birthDate;\r\n            }\r\n    \r\n            public void setBirthDate(LocalDate birthDate) {\r\n                this.birthDate = birthDate;\r\n            }\r\n    \r\n            public String getAddress() {\r\n                return address;\r\n            }\r\n    \r\n            public void setAddress(String address) {\r\n                this.address = address;\r\n            }\r\n    \r\n            public String getTelephone() {\r\n                return telephone;\r\n            }\r\n    \r\n            public void setTelephone(String telephone) {\r\n                this.telephone = telephone;\r\n            }\r\n    \r\n            public String getEmail() {\r\n                return email;\r\n            }\r\n    \r\n            public void setEmail(String email) {\r\n                this.email = email;\r\n            }\r\n    \r\n            public LocalDate getDateRegister() {\r\n                return dateRegister;\r\n            }\r\n    \r\n            public void setDateRegister(LocalDate dateRegister) {\r\n                this.dateRegister = dateRegister;\r\n            }\r\n    \r\n            @Override\r\n            public String toString() {\r\n                return &quot;Client [id=&quot; + id + &quot;, cpf=&quot; + cpf + &quot;, name=&quot; + name + &quot;, birthDate=&quot; + birthDate + &quot;, address=&quot;\r\n                + address + &quot;, telephone=&quot; + telephone + &quot;, email=&quot; + email + &quot;, dateRegister=&quot; + dateRegister + &quot;]&quot;;\r\n            }\r\n        }\r\n\r\n 2. Sale Entity:\r\n\r\n        @Entity\r\n        @Table(name = &quot;sale&quot;)\r\n        public class Sale {\r\n    \r\n            @Id\r\n            @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n            private Long id;\r\n    \r\n            @ManyToOne\r\n            @JoinColumn(name = &quot;client_id&quot;)\r\n            private Client client;\r\n    \r\n            @OneToMany(mappedBy = &quot;sale&quot;)\r\n            private List&lt;SaleItem&gt; items;\r\n    \r\n            @Column(name = &quot;payment_type&quot;, length = 10)\r\n            @Enumerated(EnumType.STRING)\r\n            private PaymentType paymentType;\r\n    \r\n            @Column(name = &quot;amount&quot;)\r\n            private BigDecimal amount;\r\n    \r\n            public Long getId() {\r\n                return id;\r\n            }\r\n    \r\n            public void setId(Long id) {\r\n                this.id = id;\r\n            }\r\n    \r\n            public Client getClient() {\r\n                return client;\r\n            }\r\n    \r\n            public void setClient(Client client) {\r\n                this.client = client;\r\n            }\r\n    \r\n            public List&lt;SaleItem&gt; getItems() {\r\n                return items;\r\n            }\r\n    \r\n            public void setItems(List&lt;SaleItem&gt; items) {\r\n                this.items = items;\r\n            }\r\n    \r\n            public PaymentType getPaymentType() {\r\n                return paymentType;\r\n            }\r\n    \r\n            public void setPaymentType(PaymentType paymentType) {\r\n                this.paymentType = paymentType;\r\n            }\r\n    \r\n            public BigDecimal getAmount() {\r\n                return amount;\r\n            }\r\n    \r\n            public void setAmount(BigDecimal amount) {\r\n                this.amount = amount;\r\n            }\r\n    \r\n            @Override\r\n            public String toString() {\r\n                return &quot;Sale [id=&quot; + id + &quot;, client=&quot; + client + &quot;, items=&quot; + items + &quot;, paymentType=&quot; + paymentType\r\n                + &quot;, amount=&quot; + amount + &quot;]&quot;;\r\n            }   \r\n        }\r\n\r\nThe objective is to link the client to a sale through its primary key. These two codes refer to the sales repository and its controller:\r\n\r\n 1. SaleRepository:\r\n\r\n        public interface SaleRepository extends JpaRepository&lt;Sale, Long&gt; {\r\n    \r\n        }\r\n\r\n 2. SaleController:\r\n\r\n         @RestController\r\n         @RequestMapping(&quot;/api/sales&quot;)\r\n         @CrossOrigin(&quot;*&quot;)\r\n         public class SaleController {\r\n    \r\n             @Autowired\r\n             private SaleRepository repository;\r\n    \r\n             @Autowired\r\n             private SaleItemRepository saleItemrepository;\r\n    \r\n             @PostMapping\r\n             @Transactional\r\n             public void save(@RequestBody Sale sale) {\r\n                 repository.save(sale);\r\n                 sale.getItems().stream().forEach(saleItem -&gt; saleItem.setSale(sale));\r\n                 saleItemrepository.saveAll(sale.getItems());\r\n             }\r\n    \r\n        }\r\n\r\nAnd the problem is exactly how this reference is being made. In the current `private Client client;` way , the client object is being passed in full instead of its id, that&#39;s why it throws this following error when I try to register the sale.\r\n\r\n    Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.time.LocalDate` from String &quot;31/05/1968&quot;: Failed to deserialize java.time.LocalDate: (java.time.format.DateTimeParseException) Text &#39;31/05/1968&#39; could not be parsed at index 0; nested exception is com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `java.time.LocalDate` from String &quot;31/05/1968&quot;: Failed to deserialize java.time.LocalDate: (java.time.format.DateTimeParseException) Text &#39;31/05/1968&#39; could not be parsed at index 0&lt;EOL&gt; at [Source: (PushbackInputStream); line: 1, column: 87] (through reference chain: MyNameIsRafaelSampaio.github.com.bruxo_vendas_ltda_api.model.Sale[&quot;client&quot;]-&gt;MyNameIsRafaelSampaio.github.com.bruxo_vendas_ltda_api.model.Client[&quot;birthDate&quot;])]\r\n\r\nAs was to be expected, since the column `birthDate`  present in the client entity is not being treated correctly in the sale entity. I did research on a possible solution but none made much sense to me, I believe for being a newbie, one of the solutions that I found more understandable was the use of the `@MapsId`  tag. I tried to make changes to adapt, but I was not successful, if you can help I will be grateful.","title":"JSON parse error, unable to deserialize value of type `java.time.LocalDate` in STS 4.15.3 windows version","body":"<p>I'm new to this tool and I'm having trouble with this specific issue. I looked for an example But could not find something similar, better, I found a possible solution, but in my case It doesn't work.</p>\n<p>I have this narrow project that resembles our famous CRUD, and I'm trying to reference the primary key from one table to another.</p>\n<ol>\n<li><p>Client Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;client&quot;)             \npublic class Client {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;cpf&quot;, length = 14)\n    private String cpf;\n\n    @Column(name = &quot;name&quot;, length = 100)\n    private String name;\n\n    @Column(name = &quot;birth_date&quot;)\n    private LocalDate birthDate;\n\n    @Column(name = &quot;address&quot;, length = 255)\n    private String address;\n\n    @Column(name = &quot;telephone&quot;, length = 14)\n    private String telephone;\n\n    @Column(name = &quot;email&quot;, length = 200)\n    private String email;\n\n    @Column(name = &quot;date_register&quot;, insertable = true, updatable = false)\n    private LocalDate dateRegister;\n\n    public Client() {\n        super();\n    }\n\n    public Client(Long id, String cpf, String name, LocalDate birthDate, String address, String telephone, String email, LocalDate dateRegister) {\n        super();\n        this.id = id;\n        this.cpf = cpf;\n        this.name = name;\n        this.birthDate = birthDate;\n        this.address = address;\n        this.telephone = telephone;\n        this.email = email;\n        this.dateRegister = dateRegister;\n    }\n\n    public Client(String cpf, String name, LocalDate birthDate, String address, String telephone, String email, LocalDate dateRegister) {\n        super();\n        this.cpf = cpf;\n        this.name = name;\n        this.birthDate = birthDate;\n        this.address = address;\n        this.telephone = telephone;\n        this.email = email;\n        this.dateRegister = dateRegister;\n    }\n\n    @PrePersist\n    public void prePersist() {\n        setDateRegister(LocalDate.now());\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getCpf() {\n        return cpf;\n    }\n\n    public void setCpf(String cpf) {\n        this.cpf = cpf;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public LocalDate getBirthDate() {\n        return birthDate;\n    }\n\n    public void setBirthDate(LocalDate birthDate) {\n        this.birthDate = birthDate;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getTelephone() {\n        return telephone;\n    }\n\n    public void setTelephone(String telephone) {\n        this.telephone = telephone;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public LocalDate getDateRegister() {\n        return dateRegister;\n    }\n\n    public void setDateRegister(LocalDate dateRegister) {\n        this.dateRegister = dateRegister;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Client [id=&quot; + id + &quot;, cpf=&quot; + cpf + &quot;, name=&quot; + name + &quot;, birthDate=&quot; + birthDate + &quot;, address=&quot;\n        + address + &quot;, telephone=&quot; + telephone + &quot;, email=&quot; + email + &quot;, dateRegister=&quot; + dateRegister + &quot;]&quot;;\n    }\n}\n</code></pre>\n</li>\n<li><p>Sale Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;sale&quot;)\npublic class Sale {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;client_id&quot;)\n    private Client client;\n\n    @OneToMany(mappedBy = &quot;sale&quot;)\n    private List&lt;SaleItem&gt; items;\n\n    @Column(name = &quot;payment_type&quot;, length = 10)\n    @Enumerated(EnumType.STRING)\n    private PaymentType paymentType;\n\n    @Column(name = &quot;amount&quot;)\n    private BigDecimal amount;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public Client getClient() {\n        return client;\n    }\n\n    public void setClient(Client client) {\n        this.client = client;\n    }\n\n    public List&lt;SaleItem&gt; getItems() {\n        return items;\n    }\n\n    public void setItems(List&lt;SaleItem&gt; items) {\n        this.items = items;\n    }\n\n    public PaymentType getPaymentType() {\n        return paymentType;\n    }\n\n    public void setPaymentType(PaymentType paymentType) {\n        this.paymentType = paymentType;\n    }\n\n    public BigDecimal getAmount() {\n        return amount;\n    }\n\n    public void setAmount(BigDecimal amount) {\n        this.amount = amount;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Sale [id=&quot; + id + &quot;, client=&quot; + client + &quot;, items=&quot; + items + &quot;, paymentType=&quot; + paymentType\n        + &quot;, amount=&quot; + amount + &quot;]&quot;;\n    }   \n}\n</code></pre>\n</li>\n</ol>\n<p>The objective is to link the client to a sale through its primary key. These two codes refer to the sales repository and its controller:</p>\n<ol>\n<li><p>SaleRepository:</p>\n<pre><code>public interface SaleRepository extends JpaRepository&lt;Sale, Long&gt; {\n\n}\n</code></pre>\n</li>\n<li><p>SaleController:</p>\n<pre><code> @RestController\n @RequestMapping(&quot;/api/sales&quot;)\n @CrossOrigin(&quot;*&quot;)\n public class SaleController {\n\n     @Autowired\n     private SaleRepository repository;\n\n     @Autowired\n     private SaleItemRepository saleItemrepository;\n\n     @PostMapping\n     @Transactional\n     public void save(@RequestBody Sale sale) {\n         repository.save(sale);\n         sale.getItems().stream().forEach(saleItem -&gt; saleItem.setSale(sale));\n         saleItemrepository.saveAll(sale.getItems());\n     }\n\n}\n</code></pre>\n</li>\n</ol>\n<p>And the problem is exactly how this reference is being made. In the current <code>private Client client;</code> way , the client object is being passed in full instead of its id, that's why it throws this following error when I try to register the sale.</p>\n<pre><code>Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.time.LocalDate` from String &quot;31/05/1968&quot;: Failed to deserialize java.time.LocalDate: (java.time.format.DateTimeParseException) Text '31/05/1968' could not be parsed at index 0; nested exception is com.fasterxml.jackson.databind.exc.InvalidFormatException: Cannot deserialize value of type `java.time.LocalDate` from String &quot;31/05/1968&quot;: Failed to deserialize java.time.LocalDate: (java.time.format.DateTimeParseException) Text '31/05/1968' could not be parsed at index 0&lt;EOL&gt; at [Source: (PushbackInputStream); line: 1, column: 87] (through reference chain: MyNameIsRafaelSampaio.github.com.bruxo_vendas_ltda_api.model.Sale[&quot;client&quot;]-&gt;MyNameIsRafaelSampaio.github.com.bruxo_vendas_ltda_api.model.Client[&quot;birthDate&quot;])]\n</code></pre>\n<p>As was to be expected, since the column <code>birthDate</code>  present in the client entity is not being treated correctly in the sale entity. I did research on a possible solution but none made much sense to me, I believe for being a newbie, one of the solutions that I found more understandable was the use of the <code>@MapsId</code>  tag. I tried to make changes to adapt, but I was not successful, if you can help I will be grateful.</p>\n"},{"tags":["java","android","sqlite","android-room"],"answers":[{"tags":[],"owner":{"account_id":485226,"reputation":1434,"user_id":901410,"display_name":"zen_of_kermit"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648087056,"creation_date":1648087056,"answer_id":71596203,"question_id":71595298,"body_markdown":"The reason your newer query fails is that you are passing a `lower`-cased string to the WHERE clause, and no rows match those lowercase strings. For example, your table contains &quot;P&#233;rez Juan&quot;, not &quot;p&#233;rez juan&quot;\r\n\r\nThe `addTildeOptions` function is on the right track, but you need to change it to replace all plain vowels and those with diacritical marks (tilde, accent, umlaut, etc.) with a &#39;?&#39; character so that the query can find rows using either LIKE or GLOB:\r\n\r\n```\r\nString globPersonName(String fn) {\r\n    return fn.replaceAll(&quot;[a&#225;&#224;&#228;&#226;&#227;]&quot;, &quot;?&quot;)\r\n\t        .replaceAll(&quot;[e&#233;&#232;&#235;&#234;]&quot;, &quot;?&quot;)\r\n\t        .replaceAll(&quot;[i&#237;&#236;&#238;]&quot;, &quot;?&quot;)\r\n\t        .replaceAll(&quot;[o&#243;&#242;&#246;&#244;&#245;]&quot;, &quot;?&quot;)\r\n\t        .replaceAll(&quot;[u&#250;&#249;&#252;&#251;]&quot;, &quot;?&quot;);\r\n}\r\n```\r\n\r\nThen just remove the `lower` call and keep the GLOB in your query:\r\n\r\n```\r\n@Query(&quot;SELECT *, lastName || &#39; &#39; || name AS FullName\\n&quot; +\r\n        &quot;FROM Person\\n&quot; +\r\n        &quot;WHERE FullName GLOB :fn\\n&quot; +\r\n        &quot;ORDER BY FullName&quot;)\r\nLiveData&lt;List&lt;Person&gt;&gt; searchPerson(String fn);\r\n```\r\n\r\nSo a search for all variations of a name would look like: `personDao.searchPerson(globPersonName(fn));`\r\n\r\nFor example, `globPersonName(&quot;Perez Juan&quot;)` will return `P?r?z J??n` and your query should find the &quot;P&#233;rez Juan&quot; record.","title":"Query in Room SQLite (Insensitive casing) ignoring accents","body":"<p>The reason your newer query fails is that you are passing a <code>lower</code>-cased string to the WHERE clause, and no rows match those lowercase strings. For example, your table contains &quot;Pérez Juan&quot;, not &quot;pérez juan&quot;</p>\n<p>The <code>addTildeOptions</code> function is on the right track, but you need to change it to replace all plain vowels and those with diacritical marks (tilde, accent, umlaut, etc.) with a '?' character so that the query can find rows using either LIKE or GLOB:</p>\n<pre><code>String globPersonName(String fn) {\n    return fn.replaceAll(&quot;[aáàäâã]&quot;, &quot;?&quot;)\n            .replaceAll(&quot;[eéèëê]&quot;, &quot;?&quot;)\n            .replaceAll(&quot;[iíìî]&quot;, &quot;?&quot;)\n            .replaceAll(&quot;[oóòöôõ]&quot;, &quot;?&quot;)\n            .replaceAll(&quot;[uúùüû]&quot;, &quot;?&quot;);\n}\n</code></pre>\n<p>Then just remove the <code>lower</code> call and keep the GLOB in your query:</p>\n<pre><code>@Query(&quot;SELECT *, lastName || ' ' || name AS FullName\\n&quot; +\n        &quot;FROM Person\\n&quot; +\n        &quot;WHERE FullName GLOB :fn\\n&quot; +\n        &quot;ORDER BY FullName&quot;)\nLiveData&lt;List&lt;Person&gt;&gt; searchPerson(String fn);\n</code></pre>\n<p>So a search for all variations of a name would look like: <code>personDao.searchPerson(globPersonName(fn));</code></p>\n<p>For example, <code>globPersonName(&quot;Perez Juan&quot;)</code> will return <code>P?r?z J??n</code> and your query should find the &quot;Pérez Juan&quot; record.</p>\n"},{"tags":[],"owner":{"account_id":4545435,"reputation":860,"user_id":3692177,"accept_rate":88,"display_name":"SebasSBM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1649066849,"creation_date":1649066849,"answer_id":71735419,"question_id":71595298,"body_markdown":"Using `GLOB` was what I needed. However, I changed it a little bit to be a little more &quot;fine-grained&quot;. @zen_of_kermit &#39;s solution would also match &quot;Poraz Jaen&quot; for example; but this would not:\r\n\r\n    String globPersonName(String fn) {\r\n        return fn.replaceAll(&quot;[a&#225;&#224;&#228;&#226;&#227;]&quot;, &quot;[a&#225;&#224;&#228;&#226;&#227;]&quot;)\r\n                .replaceAll(&quot;[e&#233;&#232;&#235;&#234;]&quot;, &quot;[e&#233;&#232;&#235;&#234;]&quot;)\r\n                .replaceAll(&quot;[i&#237;&#236;&#238;]&quot;, &quot;[i&#237;&#236;&#238;]&quot;)\r\n                .replaceAll(&quot;[o&#243;&#242;&#246;&#244;&#245;]&quot;, &quot;[o&#243;&#242;&#246;&#244;&#245;]&quot;)\r\n                .replaceAll(&quot;[u&#250;&#249;&#252;&#251;]&quot;, &quot;[u&#250;&#249;&#252;&#251;]&quot;);\r\n    }\r\n\r\nThis way each vowel is replaced by its respective regular expression, so it matches only **known** variants of each vowel.","title":"Query in Room SQLite (Insensitive casing) ignoring accents","body":"<p>Using <code>GLOB</code> was what I needed. However, I changed it a little bit to be a little more &quot;fine-grained&quot;. @zen_of_kermit 's solution would also match &quot;Poraz Jaen&quot; for example; but this would not:</p>\n<pre><code>String globPersonName(String fn) {\n    return fn.replaceAll(&quot;[aáàäâã]&quot;, &quot;[aáàäâã]&quot;)\n            .replaceAll(&quot;[eéèëê]&quot;, &quot;[eéèëê]&quot;)\n            .replaceAll(&quot;[iíìî]&quot;, &quot;[iíìî]&quot;)\n            .replaceAll(&quot;[oóòöôõ]&quot;, &quot;[oóòöôõ]&quot;)\n            .replaceAll(&quot;[uúùüû]&quot;, &quot;[uúùüû]&quot;);\n}\n</code></pre>\n<p>This way each vowel is replaced by its respective regular expression, so it matches only <strong>known</strong> variants of each vowel.</p>\n"},{"tags":[],"owner":{"account_id":341810,"reputation":922,"user_id":672631,"display_name":"VonSchnauzer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662987309,"creation_date":1662987309,"answer_id":73689677,"question_id":71595298,"body_markdown":"For those working in Kotlin:\r\n\r\n    fun replaceVowels(searchText: String): String {\r\n      return searchText.lowercase(Locale.getDefault())\r\n          .replace(Regex(&quot;[a&#225;&#224;&#226;&#227;]&quot;), &quot;?&quot;)\r\n          .replace(Regex(&quot;[e&#233;&#232;&#235;&#234;]&quot;), &quot;?&quot;)\r\n          .replace(Regex(&quot;[i&#237;&#236;&#238;]&quot;), &quot;?&quot;)\r\n          .replace(Regex(&quot;[o&#243;&#242;&#244;&#245;]&quot;), &quot;?&quot;)\r\n          .replace(Regex(&quot;[u&#250;&#249;&#252;&#251;]&quot;), &quot;?&quot;)\r\n    }\r\n\r\nand change the SQL query to:\r\n\r\n    @Query(&quot;SELECT * FROM your_table WHERE your_column GLOB :query || &#39;*&#39; &quot;)\r\n\r\n","title":"Query in Room SQLite (Insensitive casing) ignoring accents","body":"<p>For those working in Kotlin:</p>\n<pre><code>fun replaceVowels(searchText: String): String {\n  return searchText.lowercase(Locale.getDefault())\n      .replace(Regex(&quot;[aáàâã]&quot;), &quot;?&quot;)\n      .replace(Regex(&quot;[eéèëê]&quot;), &quot;?&quot;)\n      .replace(Regex(&quot;[iíìî]&quot;), &quot;?&quot;)\n      .replace(Regex(&quot;[oóòôõ]&quot;), &quot;?&quot;)\n      .replace(Regex(&quot;[uúùüû]&quot;), &quot;?&quot;)\n}\n</code></pre>\n<p>and change the SQL query to:</p>\n<pre><code>@Query(&quot;SELECT * FROM your_table WHERE your_column GLOB :query || '*' &quot;)\n</code></pre>\n"}],"owner":{"account_id":16114085,"reputation":563,"user_id":13452141,"display_name":"JP711"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":670,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71735419,"answer_count":3,"score":1,"last_activity_date":1662987309,"creation_date":1648078052,"question_id":71595298,"body_markdown":"In a part of my Android application you can search for people by name. But I need that even if the name or surname is written incorrectly (without an accent for example) the result is displayed:\r\n\r\nExample:\r\n\r\nIn database: P&#233;rez Juan, Cooper Sheldon, P&#233;rez Adrian\r\n\r\nSearch: perez\r\n\r\nShow: P&#233;rez Juan, P&#233;rez Adrian (from database)\r\n\r\nI was performing the query using LIKE and it works covering the insensitive casing, but it doesn&#39;t work for accents because I have to write the letter exactly the same (with or without an accent), here is my working code:\r\n\r\n**So I get the variable used in searchPerson**\r\n\r\n    String name = searchEditText.getText().toString();\r\n                if (!name.equals(&quot;&quot;)){\r\n                    name = &quot;%&quot; + name + &quot;%&quot;;\r\n                }\r\n\r\n**PersonDao**\r\n\r\n    @Query(&quot;SELECT *, lastName || &#39; &#39; || name AS FullName\\n&quot; +\r\n            &quot;FROM Person\\n&quot; +\r\n            &quot;WHERE FullName LIKE :fn\\n&quot; +\r\n            &quot;ORDER BY FullName&quot;)\r\n    LiveData&lt;List&lt;Person&gt;&gt; searchPerson(String fn);\r\n\r\n***\r\n\r\nPossible solution found on StackOverflow\r\n----------------------------------------\r\n\r\n***\r\n\r\nTo solve the problem of the accents I found [this answer][1] that I am trying to implement without success\r\n\r\n**So I get the variable used in searchPerson**\r\n\r\n    String name = searchEditText.getText().toString();\r\n                name = addTildeOptions(name);\r\n\r\n**addTildeOptions function**\r\n\r\n    private String addTildeOptions(String searchText) {\r\n        return searchText.toLowerCase()\r\n                .replaceAll(&quot;\\\\[a&#225;&#224;&#228;&#226;&#227;]\\\\.*&quot;, &quot;[a&#225;&#224;&#228;&#226;&#227;]&quot;)\r\n                .replaceAll(&quot;\\\\[e&#233;&#232;&#235;&#234;]\\\\.*&quot;, &quot;[e&#233;&#232;&#235;&#234;]&quot;)\r\n                .replaceAll(&quot;\\\\[i&#237;&#236;&#238;]\\\\.*&quot;, &quot;[i&#237;&#236;&#238;]&quot;)\r\n                .replaceAll(&quot;\\\\[o&#243;&#242;&#246;&#244;&#245;]\\\\.*&quot;, &quot;[o&#243;&#242;&#246;&#244;&#245;]&quot;)\r\n                .replaceAll(&quot;\\\\[u&#250;&#249;&#252;&#251;]\\\\.*&quot;, &quot;[u&#250;&#249;&#252;&#251;]&quot;)\r\n                .replace(&quot;*&quot;, &quot;[*]&quot;)\r\n                .replace(&quot;?&quot;, &quot;[?]&quot;);\r\n    }\r\n\r\n**PersonDao**\r\n\r\n    @Query(&quot;SELECT *, lastName || &#39; &#39; || name AS FullName\\n&quot; +\r\n            &quot;FROM Person\\n&quot; +\r\n            &quot;WHERE lower(FullName) GLOB :fn\\n&quot; +\r\n            &quot;ORDER BY FullName&quot;)\r\n    LiveData&lt;List&lt;Person&gt;&gt; searchPerson(String fn);\r\n\r\nHowever this does not return any results, even if I type a single letter it never shows anything.\r\n\r\nI&#39;ve tried adding asterisks to the start and end when getting the text of the EditText, tried to enter the addTildeOptions function in my PersonDao query as the answer shows but failed to do so, tried some other non-relevant things but never got results.\r\n\r\nWhat is wrong in my code?\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/55724736/13452141","title":"Query in Room SQLite (Insensitive casing) ignoring accents","body":"<p>In a part of my Android application you can search for people by name. But I need that even if the name or surname is written incorrectly (without an accent for example) the result is displayed:</p>\n<p>Example:</p>\n<p>In database: Pérez Juan, Cooper Sheldon, Pérez Adrian</p>\n<p>Search: perez</p>\n<p>Show: Pérez Juan, Pérez Adrian (from database)</p>\n<p>I was performing the query using LIKE and it works covering the insensitive casing, but it doesn't work for accents because I have to write the letter exactly the same (with or without an accent), here is my working code:</p>\n<p><strong>So I get the variable used in searchPerson</strong></p>\n<pre><code>String name = searchEditText.getText().toString();\n            if (!name.equals(&quot;&quot;)){\n                name = &quot;%&quot; + name + &quot;%&quot;;\n            }\n</code></pre>\n<p><strong>PersonDao</strong></p>\n<pre><code>@Query(&quot;SELECT *, lastName || ' ' || name AS FullName\\n&quot; +\n        &quot;FROM Person\\n&quot; +\n        &quot;WHERE FullName LIKE :fn\\n&quot; +\n        &quot;ORDER BY FullName&quot;)\nLiveData&lt;List&lt;Person&gt;&gt; searchPerson(String fn);\n</code></pre>\n<hr />\n<h2>Possible solution found on StackOverflow</h2>\n<hr />\n<p>To solve the problem of the accents I found <a href=\"https://stackoverflow.com/a/55724736/13452141\">this answer</a> that I am trying to implement without success</p>\n<p><strong>So I get the variable used in searchPerson</strong></p>\n<pre><code>String name = searchEditText.getText().toString();\n            name = addTildeOptions(name);\n</code></pre>\n<p><strong>addTildeOptions function</strong></p>\n<pre><code>private String addTildeOptions(String searchText) {\n    return searchText.toLowerCase()\n            .replaceAll(&quot;\\\\[aáàäâã]\\\\.*&quot;, &quot;[aáàäâã]&quot;)\n            .replaceAll(&quot;\\\\[eéèëê]\\\\.*&quot;, &quot;[eéèëê]&quot;)\n            .replaceAll(&quot;\\\\[iíìî]\\\\.*&quot;, &quot;[iíìî]&quot;)\n            .replaceAll(&quot;\\\\[oóòöôõ]\\\\.*&quot;, &quot;[oóòöôõ]&quot;)\n            .replaceAll(&quot;\\\\[uúùüû]\\\\.*&quot;, &quot;[uúùüû]&quot;)\n            .replace(&quot;*&quot;, &quot;[*]&quot;)\n            .replace(&quot;?&quot;, &quot;[?]&quot;);\n}\n</code></pre>\n<p><strong>PersonDao</strong></p>\n<pre><code>@Query(&quot;SELECT *, lastName || ' ' || name AS FullName\\n&quot; +\n        &quot;FROM Person\\n&quot; +\n        &quot;WHERE lower(FullName) GLOB :fn\\n&quot; +\n        &quot;ORDER BY FullName&quot;)\nLiveData&lt;List&lt;Person&gt;&gt; searchPerson(String fn);\n</code></pre>\n<p>However this does not return any results, even if I type a single letter it never shows anything.</p>\n<p>I've tried adding asterisks to the start and end when getting the text of the EditText, tried to enter the addTildeOptions function in my PersonDao query as the answer shows but failed to do so, tried some other non-relevant things but never got results.</p>\n<p>What is wrong in my code?</p>\n"},{"tags":["java","arrays","memory","out-of-memory","filechannel"],"comments":[{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":1,"creation_date":1662987966,"post_id":73689645,"comment_id":130126431,"body_markdown":"This `new String[buffer.remaining()]` doesn&#39;t make sense and probably already causes the problem. You don&#39;t want an array that holds each byte as an item. The array size is the number of lines, and that final array is created by the `split(&quot;\\n&quot;)` already. So no need to create one in advance.","body":"This <code>new String[buffer.remaining()]</code> doesn&#39;t make sense and probably already causes the problem. You don&#39;t want an array that holds each byte as an item. The array size is the number of lines, and that final array is created by the <code>split(&quot;\\n&quot;)</code> already. So no need to create one in advance."},{"owner":{"account_id":8137043,"reputation":1,"user_id":6128377,"display_name":"Wajih Bouzid"},"score":1,"creation_date":1662988977,"post_id":73689645,"comment_id":130126848,"body_markdown":"@Andreas Dolk , thanks for your response but it&#39;s the same, the same error persists, I removed the line new String[buffer.remaining()]; and replace it directly with:\nString[] rowString = new String(barray, 0, endOfLinePos, charSet).split(&quot;\\n&quot;);\nunfortunately the same error appears on this line","body":"@Andreas Dolk , thanks for your response but it&#39;s the same, the same error persists, I removed the line new String[buffer.remaining()]; and replace it directly with: String[] rowString = new String(barray, 0, endOfLinePos, charSet).split(&quot;\\n&quot;); unfortunately the same error appears on this line"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1662989308,"post_id":73689645,"comment_id":130126984,"body_markdown":"Think about what you are doing. You are loading a file in memory that&#39;s very large by your own estimation. Then, you load in memory a very large array of strings, and then a *new* `String` object to hold the contents of the byte array. I think Wajid&#39;s recommendation should work. Also, allocating more memory, although might work, is not the way to solve these problems (just in case someone suggests it or you were thinking about it).","body":"Think about what you are doing. You are loading a file in memory that&#39;s very large by your own estimation. Then, you load in memory a very large array of strings, and then a <i>new</i> <code>String</code> object to hold the contents of the byte array. I think Wajid&#39;s recommendation should work. Also, allocating more memory, although might work, is not the way to solve these problems (just in case someone suggests it or you were thinking about it)."},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1662990008,"post_id":73689645,"comment_id":130127248,"body_markdown":"You could just use `Files.lines(Path.of(&quot;/opt/input.txt&quot;), charSet)` which returns a `Stream&lt;String&gt;` where you can then call `.map(line -&gt; {` etc. on","body":"You could just use <code>Files.lines(Path.of(&quot;&#47;opt&#47;input.txt&quot;), charSet)</code> which returns a <code>Stream&lt;String&gt;</code> where you can then call <code>.map(line -&gt; {</code> etc. on"},{"owner":{"account_id":8137043,"reputation":1,"user_id":6128377,"display_name":"Wajih Bouzid"},"score":0,"creation_date":1662991140,"post_id":73689645,"comment_id":130127735,"body_markdown":"thank you @Lino , thant&#39;s true but i need to change Stream&lt;String&gt; wich is actually used with FileChannel because FileChannel and BufferedinputStream are recommended for large files","body":"thank you @Lino , thant&#39;s true but i need to change Stream&lt;String&gt; wich is actually used with FileChannel because FileChannel and BufferedinputStream are recommended for large files"},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1662991319,"post_id":73689645,"comment_id":130127808,"body_markdown":"@WajihBouzid as far as I can tell, `Files.lines` uses `FileChannel` internally (with a falback to `BufferedReader`), so you could still use it","body":"@WajihBouzid as far as I can tell, <code>Files.lines</code> uses <code>FileChannel</code> internally (with a falback to <code>BufferedReader</code>), so you could still use it"}],"owner":{"account_id":8137043,"reputation":1,"user_id":6128377,"display_name":"Wajih Bouzid"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1662989016,"answer_count":0,"score":0,"last_activity_date":1662987191,"creation_date":1662987191,"question_id":73689645,"body_markdown":"I had an outofmemory error when launching the batch on the server: below are the details of the error as well as the piece of code written in java, can you help me please , the error is triggered at this line:\r\n\r\n    rowString = new String(barray, 0, endOfLinePos, charSet).split(&quot;\\n&quot;);\r\n\r\nknowing that my file contains 461500 lines and the number of bytes used is 230989152.\r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n\tat java.util.Arrays.copyOf(Arrays.java:3332)\r\n\tat java.lang.StringCoding.safeTrim(StringCoding.java:89)\r\n\tat java.lang.StringCoding.decode(StringCoding.java:230)\r\n\tat java.lang.String.&lt;init&gt;(String.java:463)\r\n\tat com.test(Maclasse.java:215)\r\n\tat com.test(Maclasse.java:181)\r\n\tat com.test(Maclasse.java:144)\r\n\tat com.test(Maclasse.java:119)\r\n\r\n\r\n\r\n       try ( FileChannel inputChannel = new FileInputStream(&quot;/opt/input.txt&quot;).getChannel();)\r\n\t {\r\n\t\tMappedByteBuffer buffer = inputChannel.map( FileChannel.MapMode.READ_ONLY, 0L, inputChannel.size());\r\n\t    buffer.position(0);\r\n\t    long availableBytes = inputChannel.size();\r\n\t\tint endOfLinePos = (int)availableBytes;\r\n\t    int get = Math.min(buffer.remaining(), endOfLinePos);\r\n\t    byte[] barray = new byte[endOfLinePos];\r\n\t    buffer.get(barray, 0, get);\r\n\t    Charset charSet = Charset.forName(&quot;UTF-8&quot;);\r\n\t    String[] rowString = new String[buffer.remaining()];\r\n\t   \r\n\t\trowString = new String(barray, 0, endOfLinePos, charSet).split(&quot;\\n&quot;);   \r\n\t\tArrays.asList(rowString).stream().map(line -&gt; {\r\n\t\t\ttry ...\r\n\r\n","title":"FileChannel Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space","body":"<p>I had an outofmemory error when launching the batch on the server: below are the details of the error as well as the piece of code written in java, can you help me please , the error is triggered at this line:</p>\n<pre><code>rowString = new String(barray, 0, endOfLinePos, charSet).split(&quot;\\n&quot;);\n</code></pre>\n<p>knowing that my file contains 461500 lines and the number of bytes used is 230989152.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\nat java.util.Arrays.copyOf(Arrays.java:3332)\nat java.lang.StringCoding.safeTrim(StringCoding.java:89)\nat java.lang.StringCoding.decode(StringCoding.java:230)\nat java.lang.String.&lt;init&gt;(String.java:463)\nat com.test(Maclasse.java:215)\nat com.test(Maclasse.java:181)\nat com.test(Maclasse.java:144)\nat com.test(Maclasse.java:119)\n\n\n\n   try ( FileChannel inputChannel = new FileInputStream(&quot;/opt/input.txt&quot;).getChannel();)\n {\n    MappedByteBuffer buffer = inputChannel.map( FileChannel.MapMode.READ_ONLY, 0L, inputChannel.size());\n    buffer.position(0);\n    long availableBytes = inputChannel.size();\n    int endOfLinePos = (int)availableBytes;\n    int get = Math.min(buffer.remaining(), endOfLinePos);\n    byte[] barray = new byte[endOfLinePos];\n    buffer.get(barray, 0, get);\n    Charset charSet = Charset.forName(&quot;UTF-8&quot;);\n    String[] rowString = new String[buffer.remaining()];\n   \n    rowString = new String(barray, 0, endOfLinePos, charSet).split(&quot;\\n&quot;);   \n    Arrays.asList(rowString).stream().map(line -&gt; {\n        try ...\n</code></pre>\n"},{"tags":["java","freemarker"],"answers":[{"tags":[],"owner":{"account_id":299854,"reputation":29886,"user_id":606679,"accept_rate":25,"display_name":"ddekany"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1653124210,"creation_date":1653124210,"answer_id":72328167,"question_id":72315462,"body_markdown":"Seems like template parsing dominates in your workload. While FreeMarker parsing is not particularly slow (for a relatively complex language parser), FreeMarker was designed with the assumption that you parse a template only once (which yields a `Template` object, that contains the template in an already parsed form), and then run (&quot;process&quot;) it for many times. That is, that you will re-use the same `Template` object for several `Template.process` calls (that&#39;s what generates the actual output), each time with a potentially different data-model. Normally, if you get templates from `Configuration` (which should be a singleton, as opposed to being re-created again and again), those `Template` objects are cached. If you are creating `Template`-s with the `Template` constructor, then those are of course not cached, and re-using them is up to you.","title":"Performance issue with freemarker template","body":"<p>Seems like template parsing dominates in your workload. While FreeMarker parsing is not particularly slow (for a relatively complex language parser), FreeMarker was designed with the assumption that you parse a template only once (which yields a <code>Template</code> object, that contains the template in an already parsed form), and then run (&quot;process&quot;) it for many times. That is, that you will re-use the same <code>Template</code> object for several <code>Template.process</code> calls (that's what generates the actual output), each time with a potentially different data-model. Normally, if you get templates from <code>Configuration</code> (which should be a singleton, as opposed to being re-created again and again), those <code>Template</code> objects are cached. If you are creating <code>Template</code>-s with the <code>Template</code> constructor, then those are of course not cached, and re-using them is up to you.</p>\n"},{"tags":[],"owner":{"account_id":4947740,"reputation":13,"user_id":3982674,"display_name":"Kamarthi Raghunatha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662987182,"creation_date":1662987182,"answer_id":73689642,"question_id":72315462,"body_markdown":"I used latest version of free-marker jar, the performance is 80% better than before. \r\n","title":"Performance issue with freemarker template","body":"<p>I used latest version of free-marker jar, the performance is 80% better than before.</p>\n"}],"owner":{"account_id":4947740,"reputation":13,"user_id":3982674,"display_name":"Kamarthi Raghunatha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":588,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662987182,"creation_date":1653033556,"question_id":72315462,"body_markdown":"I have migrated my code to generate a file using Xpand template to Freemarker template for performance improvements. But i still see some performance problems with freemarker. Below two methods are taking 40 sec together, see snapshot. Is there a way to improve the performance? &lt;br&gt;Thanks in advance. \r\n\r\n[![enter image description here][1]][1]  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/59om1.png","title":"Performance issue with freemarker template","body":"<p>I have migrated my code to generate a file using Xpand template to Freemarker template for performance improvements. But i still see some performance problems with freemarker. Below two methods are taking 40 sec together, see snapshot. Is there a way to improve the performance? <br>Thanks in advance.</p>\n<p><a href=\"https://i.stack.imgur.com/59om1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/59om1.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jackson"],"answers":[{"tags":[],"owner":{"account_id":24902,"reputation":9752,"user_id":63621,"accept_rate":64,"display_name":"Henrik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662986757,"creation_date":1662986757,"answer_id":73689514,"question_id":73627195,"body_markdown":"The code above is correct from the start; you&#39;ll have to use runtime reflection to check what the type of the `&lt;Object&gt;` is.","title":"Serialise/deserialise wrapper with List&lt;Message&lt;TData&gt;&gt; in Jackson","body":"<p>The code above is correct from the start; you'll have to use runtime reflection to check what the type of the <code>&lt;Object&gt;</code> is.</p>\n"}],"owner":{"account_id":24902,"reputation":9752,"user_id":63621,"accept_rate":64,"display_name":"Henrik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73689514,"answer_count":1,"score":0,"last_activity_date":1662986757,"creation_date":1662494377,"question_id":73627195,"body_markdown":"I&#39;m trying to do something like https://github.com/brharrington/jackson-databind/blob/master/src/test/java/com/fasterxml/jackson/databind/ser/TestGenericTypes.java#L10 but with a twist. How can I serialise and deserialise an object graph like this?\r\n\r\n```java\r\npublic class Envelope {\r\n    // more fields here\r\n\r\n\r\n    // CRUX IS HERE; I can&#39;t type it as List&lt;BaseMessage&lt;&gt;&gt; unfortunately\r\n    public List&lt;BaseMessage&lt;Object&gt;&gt; payload;\r\n\r\n\r\n}\r\n\r\n@JsonTypeInfo(\r\n        use = JsonTypeInfo.Id.NAME,\r\n        include = JsonTypeInfo.As.PROPERTY,\r\n        property = &quot;n&quot;\r\n)\r\n@JsonSubTypes({\r\n        @JsonSubTypes.Type(value = AMessage.class, name = &quot;a&quot;),\r\n        @JsonSubTypes.Type(value = BMessage.class, name = &quot;b&quot;),\r\n})\r\npublic abstract class BaseMessage&lt;TData&gt; {\r\n    // discriminator field getters and setters (no abstract field in Java)\r\n    public abstract String getN();\r\n    public abstract void setN(String n);\r\n    // more props\r\n    public TData ps;\r\n    public SpanContext s;\r\n}\r\npublic class AMessage extends BaseMessage&lt;MessageData&gt; {\r\n    public String n = &quot;a&quot;;\r\n\r\n    @Override\r\n    public String getN() {\r\n        return n;\r\n    }\r\n\r\n    @Override\r\n    public void setN(String n) {\r\n        this.n = n;\r\n    }\r\n}\r\npublic class MessageData {\r\n    public String example;\r\n    // more props\r\n}\r\npublic class BMessage extends BaseMessage&lt;MessageData&gt; {\r\n    public String n = &quot;b&quot;;\r\n\r\n    @Override\r\n    public String getN() {\r\n        return n;\r\n    }\r\n\r\n    @Override\r\n    public void setN(String n) {\r\n        this.n = n;\r\n    }\r\n}\r\n```\r\n\r\n1. I&#39;d be happiest if I can configure this with jackson annotations\r\n2. Secondly, if I can use TypeReference in some way\r\n3. Thirdly, if I can type the list as `List&lt;JsonValue&gt;` and subsequently call jackson explicitly by reading the discriminator field `n` manually and then calling jackson with the actual type\r\n\r\n","title":"Serialise/deserialise wrapper with List&lt;Message&lt;TData&gt;&gt; in Jackson","body":"<p>I'm trying to do something like <a href=\"https://github.com/brharrington/jackson-databind/blob/master/src/test/java/com/fasterxml/jackson/databind/ser/TestGenericTypes.java#L10\" rel=\"nofollow noreferrer\">https://github.com/brharrington/jackson-databind/blob/master/src/test/java/com/fasterxml/jackson/databind/ser/TestGenericTypes.java#L10</a> but with a twist. How can I serialise and deserialise an object graph like this?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Envelope {\n    // more fields here\n\n\n    // CRUX IS HERE; I can't type it as List&lt;BaseMessage&lt;&gt;&gt; unfortunately\n    public List&lt;BaseMessage&lt;Object&gt;&gt; payload;\n\n\n}\n\n@JsonTypeInfo(\n        use = JsonTypeInfo.Id.NAME,\n        include = JsonTypeInfo.As.PROPERTY,\n        property = &quot;n&quot;\n)\n@JsonSubTypes({\n        @JsonSubTypes.Type(value = AMessage.class, name = &quot;a&quot;),\n        @JsonSubTypes.Type(value = BMessage.class, name = &quot;b&quot;),\n})\npublic abstract class BaseMessage&lt;TData&gt; {\n    // discriminator field getters and setters (no abstract field in Java)\n    public abstract String getN();\n    public abstract void setN(String n);\n    // more props\n    public TData ps;\n    public SpanContext s;\n}\npublic class AMessage extends BaseMessage&lt;MessageData&gt; {\n    public String n = &quot;a&quot;;\n\n    @Override\n    public String getN() {\n        return n;\n    }\n\n    @Override\n    public void setN(String n) {\n        this.n = n;\n    }\n}\npublic class MessageData {\n    public String example;\n    // more props\n}\npublic class BMessage extends BaseMessage&lt;MessageData&gt; {\n    public String n = &quot;b&quot;;\n\n    @Override\n    public String getN() {\n        return n;\n    }\n\n    @Override\n    public void setN(String n) {\n        this.n = n;\n    }\n}\n</code></pre>\n<ol>\n<li>I'd be happiest if I can configure this with jackson annotations</li>\n<li>Secondly, if I can use TypeReference in some way</li>\n<li>Thirdly, if I can type the list as <code>List&lt;JsonValue&gt;</code> and subsequently call jackson explicitly by reading the discriminator field <code>n</code> manually and then calling jackson with the actual type</li>\n</ol>\n"},{"tags":["java","spring-boot","dependencies","pom.xml"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1625959904,"post_id":68332127,"comment_id":120766656,"body_markdown":"If you look up [`jakarta.xml.bind`](https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api):[`jakarta.xml.bind-api`](https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api) in the **MVN Repository**, you&#39;ll see that there is no version `2.0`. There is a version `2.3.3` if you want to try that. --- There is a version `2.2.11` under the older name [`org.glassfish.jaxb`](https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime):[`jaxb-runtime`](https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime).","body":"If you look up <a href=\"https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api\" rel=\"nofollow noreferrer\"><code>jakarta.xml.bind</code></a>:<a href=\"https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api\" rel=\"nofollow noreferrer\"><code>jakarta.xml.bind-api</code></a> in the <b>MVN Repository</b>, you&#39;ll see that there is no version <code>2.0</code>. There is a version <code>2.3.3</code> if you want to try that. --- There is a version <code>2.2.11</code> under the older name <a href=\"https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime\" rel=\"nofollow noreferrer\"><code>org.glassfish.jaxb</code></a>:<a href=\"https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime\" rel=\"nofollow noreferrer\"><code>jaxb-runtime</code></a>."},{"owner":{"account_id":2113203,"reputation":9798,"user_id":1878022,"accept_rate":96,"display_name":"VedantK"},"score":0,"creation_date":1626049266,"post_id":68332127,"comment_id":120781421,"body_markdown":"Which version of java?","body":"Which version of java?"}],"answers":[{"tags":[],"owner":{"account_id":2113203,"reputation":9798,"user_id":1878022,"accept_rate":96,"display_name":"VedantK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625961415,"creation_date":1625961415,"answer_id":68332359,"question_id":68332127,"body_markdown":"    &lt;dependency&gt;\r\n        &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\ncheck available version from here [mvn repo][1]\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api/3.0.1","title":"&#39;dependencies.dependency.version&#39; for jakarta.xml.bind:jakarta.xml.bind-api:jar must be a valid version","body":"<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>check available version from here <a href=\"https://mvnrepository.com/artifact/jakarta.xml.bind/jakarta.xml.bind-api/3.0.1\" rel=\"nofollow noreferrer\">mvn repo</a></p>\n"},{"tags":[],"owner":{"account_id":9287983,"reputation":7,"user_id":6897230,"display_name":"Garen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662986307,"creation_date":1662478762,"answer_id":73624641,"question_id":68332127,"body_markdown":"go to your maven repository:\r\n```\r\n.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api\r\n```  \r\nand select the right version from there.  \r\nFor windows the path of maven repository is:  \r\n\r\n```\r\nC:\\Users\\&lt;username&gt;\\.m2\\\r\n```","title":"&#39;dependencies.dependency.version&#39; for jakarta.xml.bind:jakarta.xml.bind-api:jar must be a valid version","body":"<p>go to your maven repository:</p>\n<pre><code>.m2/repository/jakarta/xml/bind/jakarta.xml.bind-api\n</code></pre>\n<p>and select the right version from there.<br />\nFor windows the path of maven repository is:</p>\n<pre><code>C:\\Users\\&lt;username&gt;\\.m2\\\n</code></pre>\n"}],"owner":{"account_id":10438200,"reputation":313,"user_id":7695789,"display_name":"Jhon Hern&#225;ndez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8611,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1662986307,"creation_date":1625957904,"question_id":68332127,"body_markdown":"I have to make a Soap web service, but I get stuck right away, I can&#39;t pass the configuration stage.\r\n\r\nI was solving a lot of configuration problems which is apparently the way of Java, and now, a new one comes out:\r\n\r\n&gt;&#39;dependencies.dependency.version&#39; for jakarta.xml.bind:jakarta.xml.bind-api:jar must be a valid version\r\n\r\nI tried what other post said and now:\r\n\r\n&gt;Could not resolve dependencies for project com.javaspringclub:SpringBoot_SOAP_WebServices_Movies:jar:0.0.1-SNAPSHOT: Could not find artifact jakarta.xml.bind:jakarta.xml.bind-api:jar:2.0.4.RELEASE in central (https://repo.maven.apache.org/maven2) \r\n\r\nThis is my pom\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;com.javaspringclub&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;SpringBoot_SOAP_WebServices_Movies&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;SpringBoot_SOAP_WebServices_Movies&lt;/name&gt;\r\n    \t&lt;description&gt;WebService Example&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.0.4.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\t\t\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;!--groupId&gt;package1&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;package1&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${package1.version}&lt;/version --&gt;\r\n    \t\t\t\t&lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;!--version&gt;${jakarta-xml-api.version}&lt;/version--&gt;\r\n    \t\t\t&lt;version&gt;2.0&lt;/version&gt;\t\t\t\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;xjc-schema&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;xjc&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;sources&gt;\r\n    \t\t\t\t\t\t&lt;source&gt;src/main/resources/xsd/movies.xsd&lt;/source&gt;\r\n    \t\t\t\t\t&lt;/sources&gt;\r\n    \t\t\t\t\t&lt;packageName&gt;com.javaspringclub.gs_ws&lt;/packageName&gt;\r\n    \t\t\t\t\t&lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    \r\n    &lt;/project&gt;\r\n\r\nThe problem occurs here:\r\n\r\n   \r\n\r\n     &lt;!--groupId&gt;package1&lt;/groupId&gt;\r\n        \t\t\t&lt;artifactId&gt;package1&lt;/artifactId&gt;\r\n        \t\t\t&lt;version&gt;${package1.version}&lt;/version --&gt;\r\n        \t\t\t\t&lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n        \t\t\t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n        \t\t\t&lt;!--version&gt;${jakarta-xml-api.version}&lt;/version--&gt;\r\n        \t\t\t&lt;version&gt;2.0&lt;/version&gt;\t\r\n\r\nI&#39;m a programmer of other technologies, any help will be appreciated\r\n\r\n    [ERROR] Failed to execute goal org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc (xjc-schema) on project SpringBoot_SOAP_WebServices_Movies: Execution xjc-schema of goal org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc failed: A required class was missing while executing org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc: com/sun/codemodel/CodeWriter\r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] realm =    plugin&gt;org.codehaus.mojo:jaxb2-maven-plugin:2.3.1\r\n    [ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n    [ERROR] urls[0] = file:/C:/Users/PC/.m2/repository/org/codehaus/mojo/jaxb2-maven-plugin/2.3.1/jaxb2-maven-plugin-2.3.1.jar\r\n    [ERROR] urls[1] = file:/C:/Users/PC/.m2/repository/javax/xml/bind/jaxb-api/2.2.11/jaxb-api-2.2.11.jar\r\n    [ERROR] urls[2] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-core/2.2.11/jaxb-core-2.2.11.jar\r\n    [ERROR] urls[3] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.2.11/jaxb-runtime-2.2.11.jar\r\n    [ERROR] urls[4] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-xjc/2.2.11/jaxb-xjc-2.2.11.jar\r\n    [ERROR] urls[5] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-jxc/2.2.11/jaxb-jxc-2.2.11.jar\r\n    [ERROR] urls[6] = file:/C:/Users/PC/.m2/repository/com/thoughtworks/qdox/qdox/2.0-M3/qdox-2.0-M3.jar\r\n    [ERROR] urls[7] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-inject-bean/2.3.0/sisu-inject-bean-2.3.0.jar\r\n    [ERROR] urls[8] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-guice/3.1.0/sisu-guice-3.1.0-no_aop.jar\r\n    [ERROR] urls[9] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-guava/0.9.9/sisu-guava-0.9.9.jar\r\n    [ERROR] urls[10] = file:/C:/Users/PC/.m2/repository/org/sonatype/aether/aether-util/1.13.1/aether-util-1.13.1.jar\r\n    [ERROR] urls[11] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.jar\r\n    [ERROR] urls[12] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.5.5/plexus-component-annotations-1.5.5.jar\r\n    [ERROR] urls[13] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar\r\n    [ERROR] urls[14] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar\r\n    [ERROR] urls[15] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-compiler-api/2.5/plexus-compiler-api-2.5.jar\r\n    [ERROR] urls[16] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-utils/3.0.22/plexus-utils-3.0.22.jar\r\n    [ERROR] urls[17] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-build-api/0.0.7/plexus-build-api-0.0.7.jar\r\n    [ERROR] Number of foreign imports: 1\r\n    [ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n    [ERROR]\r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] : com.sun.codemodel.CodeWriter\r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\r\n\r\nAfter 2.3.2\r\n\r\n    [ERROR] Failed to execute goal org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc (xjc-schema) on project SpringBoot_SOAP_WebServices_Movies: Execution xjc-schema of goal org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc failed: A required class was missing while executing org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc: com/sun/codemodel/CodeWriter\r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] realm =    plugin&gt;org.codehaus.mojo:jaxb2-maven-plugin:2.3.1\r\n    [ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n    [ERROR] urls[0] = file:/C:/Users/PC/.m2/repository/org/codehaus/mojo/jaxb2-maven-plugin/2.3.1/jaxb2-maven-plugin-2.3.1.jar\r\n    [ERROR] urls[1] = file:/C:/Users/PC/.m2/repository/javax/xml/bind/jaxb-api/2.2.11/jaxb-api-2.2.11.jar\r\n    [ERROR] urls[2] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-core/2.2.11/jaxb-core-2.2.11.jar\r\n    [ERROR] urls[3] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.2.11/jaxb-runtime-2.2.11.jar\r\n    [ERROR] urls[4] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-xjc/2.2.11/jaxb-xjc-2.2.11.jar\r\n    [ERROR] urls[5] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-jxc/2.2.11/jaxb-jxc-2.2.11.jar\r\n    [ERROR] urls[6] = file:/C:/Users/PC/.m2/repository/com/thoughtworks/qdox/qdox/2.0-M3/qdox-2.0-M3.jar\r\n    [ERROR] urls[7] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-inject-bean/2.3.0/sisu-inject-bean-2.3.0.jar\r\n    [ERROR] urls[8] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-guice/3.1.0/sisu-guice-3.1.0-no_aop.jar\r\n    [ERROR] urls[9] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-guava/0.9.9/sisu-guava-0.9.9.jar\r\n    [ERROR] urls[10] = file:/C:/Users/PC/.m2/repository/org/sonatype/aether/aether-util/1.13.1/aether-util-1.13.1.jar\r\n    [ERROR] urls[11] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.jar\r\n    [ERROR] urls[12] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.5.5/plexus-component-annotations-1.5.5.jar\r\n    [ERROR] urls[13] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar\r\n    [ERROR] urls[14] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar\r\n    [ERROR] urls[15] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-compiler-api/2.5/plexus-compiler-api-2.5.jar\r\n    [ERROR] urls[16] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-utils/3.0.22/plexus-utils-3.0.22.jar\r\n    [ERROR] urls[17] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-build-api/0.0.7/plexus-build-api-0.0.7.jar\r\n    [ERROR] Number of foreign imports: 1\r\n    [ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n    [ERROR]\r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] : com.sun.codemodel.CodeWriter\r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\r\n\r\n","title":"&#39;dependencies.dependency.version&#39; for jakarta.xml.bind:jakarta.xml.bind-api:jar must be a valid version","body":"<p>I have to make a Soap web service, but I get stuck right away, I can't pass the configuration stage.</p>\n<p>I was solving a lot of configuration problems which is apparently the way of Java, and now, a new one comes out:</p>\n<blockquote>\n<p>'dependencies.dependency.version' for jakarta.xml.bind:jakarta.xml.bind-api:jar must be a valid version</p>\n</blockquote>\n<p>I tried what other post said and now:</p>\n<blockquote>\n<p>Could not resolve dependencies for project com.javaspringclub:SpringBoot_SOAP_WebServices_Movies:jar:0.0.1-SNAPSHOT: Could not find artifact jakarta.xml.bind:jakarta.xml.bind-api:jar:2.0.4.RELEASE in central (<a href=\"https://repo.maven.apache.org/maven2\" rel=\"nofollow noreferrer\">https://repo.maven.apache.org/maven2</a>)</p>\n</blockquote>\n<p>This is my pom</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.javaspringclub&lt;/groupId&gt;\n    &lt;artifactId&gt;SpringBoot_SOAP_WebServices_Movies&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;SpringBoot_SOAP_WebServices_Movies&lt;/name&gt;\n    &lt;description&gt;WebService Example&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;      \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;       \n\n        &lt;dependency&gt;\n            &lt;!--groupId&gt;package1&lt;/groupId&gt;\n            &lt;artifactId&gt;package1&lt;/artifactId&gt;\n            &lt;version&gt;${package1.version}&lt;/version --&gt;\n                &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;!--version&gt;${jakarta-xml-api.version}&lt;/version--&gt;\n            &lt;version&gt;2.0&lt;/version&gt;          \n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;log4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;xjc-schema&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;xjc&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;sources&gt;\n                        &lt;source&gt;src/main/resources/xsd/movies.xsd&lt;/source&gt;\n                    &lt;/sources&gt;\n                    &lt;packageName&gt;com.javaspringclub.gs_ws&lt;/packageName&gt;\n                    &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n\n&lt;/project&gt;\n</code></pre>\n<p>The problem occurs here:</p>\n<pre><code> &lt;!--groupId&gt;package1&lt;/groupId&gt;\n                &lt;artifactId&gt;package1&lt;/artifactId&gt;\n                &lt;version&gt;${package1.version}&lt;/version --&gt;\n                    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n                &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n                &lt;!--version&gt;${jakarta-xml-api.version}&lt;/version--&gt;\n                &lt;version&gt;2.0&lt;/version&gt;  \n</code></pre>\n<p>I'm a programmer of other technologies, any help will be appreciated</p>\n<pre><code>[ERROR] Failed to execute goal org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc (xjc-schema) on project SpringBoot_SOAP_WebServices_Movies: Execution xjc-schema of goal org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc failed: A required class was missing while executing org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc: com/sun/codemodel/CodeWriter\n[ERROR] -----------------------------------------------------\n[ERROR] realm =    plugin&gt;org.codehaus.mojo:jaxb2-maven-plugin:2.3.1\n[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\n[ERROR] urls[0] = file:/C:/Users/PC/.m2/repository/org/codehaus/mojo/jaxb2-maven-plugin/2.3.1/jaxb2-maven-plugin-2.3.1.jar\n[ERROR] urls[1] = file:/C:/Users/PC/.m2/repository/javax/xml/bind/jaxb-api/2.2.11/jaxb-api-2.2.11.jar\n[ERROR] urls[2] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-core/2.2.11/jaxb-core-2.2.11.jar\n[ERROR] urls[3] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.2.11/jaxb-runtime-2.2.11.jar\n[ERROR] urls[4] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-xjc/2.2.11/jaxb-xjc-2.2.11.jar\n[ERROR] urls[5] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-jxc/2.2.11/jaxb-jxc-2.2.11.jar\n[ERROR] urls[6] = file:/C:/Users/PC/.m2/repository/com/thoughtworks/qdox/qdox/2.0-M3/qdox-2.0-M3.jar\n[ERROR] urls[7] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-inject-bean/2.3.0/sisu-inject-bean-2.3.0.jar\n[ERROR] urls[8] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-guice/3.1.0/sisu-guice-3.1.0-no_aop.jar\n[ERROR] urls[9] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-guava/0.9.9/sisu-guava-0.9.9.jar\n[ERROR] urls[10] = file:/C:/Users/PC/.m2/repository/org/sonatype/aether/aether-util/1.13.1/aether-util-1.13.1.jar\n[ERROR] urls[11] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.jar\n[ERROR] urls[12] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.5.5/plexus-component-annotations-1.5.5.jar\n[ERROR] urls[13] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar\n[ERROR] urls[14] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar\n[ERROR] urls[15] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-compiler-api/2.5/plexus-compiler-api-2.5.jar\n[ERROR] urls[16] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-utils/3.0.22/plexus-utils-3.0.22.jar\n[ERROR] urls[17] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-build-api/0.0.7/plexus-build-api-0.0.7.jar\n[ERROR] Number of foreign imports: 1\n[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n[ERROR]\n[ERROR] -----------------------------------------------------\n[ERROR] : com.sun.codemodel.CodeWriter\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\n</code></pre>\n<p>After 2.3.2</p>\n<pre><code>[ERROR] Failed to execute goal org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc (xjc-schema) on project SpringBoot_SOAP_WebServices_Movies: Execution xjc-schema of goal org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc failed: A required class was missing while executing org.codehaus.mojo:jaxb2-maven-plugin:2.3.1:xjc: com/sun/codemodel/CodeWriter\n[ERROR] -----------------------------------------------------\n[ERROR] realm =    plugin&gt;org.codehaus.mojo:jaxb2-maven-plugin:2.3.1\n[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\n[ERROR] urls[0] = file:/C:/Users/PC/.m2/repository/org/codehaus/mojo/jaxb2-maven-plugin/2.3.1/jaxb2-maven-plugin-2.3.1.jar\n[ERROR] urls[1] = file:/C:/Users/PC/.m2/repository/javax/xml/bind/jaxb-api/2.2.11/jaxb-api-2.2.11.jar\n[ERROR] urls[2] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-core/2.2.11/jaxb-core-2.2.11.jar\n[ERROR] urls[3] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-runtime/2.2.11/jaxb-runtime-2.2.11.jar\n[ERROR] urls[4] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-xjc/2.2.11/jaxb-xjc-2.2.11.jar\n[ERROR] urls[5] = file:/C:/Users/PC/.m2/repository/org/glassfish/jaxb/jaxb-jxc/2.2.11/jaxb-jxc-2.2.11.jar\n[ERROR] urls[6] = file:/C:/Users/PC/.m2/repository/com/thoughtworks/qdox/qdox/2.0-M3/qdox-2.0-M3.jar\n[ERROR] urls[7] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-inject-bean/2.3.0/sisu-inject-bean-2.3.0.jar\n[ERROR] urls[8] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-guice/3.1.0/sisu-guice-3.1.0-no_aop.jar\n[ERROR] urls[9] = file:/C:/Users/PC/.m2/repository/org/sonatype/sisu/sisu-guava/0.9.9/sisu-guava-0.9.9.jar\n[ERROR] urls[10] = file:/C:/Users/PC/.m2/repository/org/sonatype/aether/aether-util/1.13.1/aether-util-1.13.1.jar\n[ERROR] urls[11] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.jar\n[ERROR] urls[12] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.5.5/plexus-component-annotations-1.5.5.jar\n[ERROR] urls[13] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar\n[ERROR] urls[14] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar\n[ERROR] urls[15] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-compiler-api/2.5/plexus-compiler-api-2.5.jar\n[ERROR] urls[16] = file:/C:/Users/PC/.m2/repository/org/codehaus/plexus/plexus-utils/3.0.22/plexus-utils-3.0.22.jar\n[ERROR] urls[17] = file:/C:/Users/PC/.m2/repository/org/sonatype/plexus/plexus-build-api/0.0.7/plexus-build-api-0.0.7.jar\n[ERROR] Number of foreign imports: 1\n[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n[ERROR]\n[ERROR] -----------------------------------------------------\n[ERROR] : com.sun.codemodel.CodeWriter\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1656096045,"post_id":72748139,"comment_id":128496628,"body_markdown":"Why do you have a separate, and more importantly **much** lower version of `spring-boot-configuration-processor`? Its latest version is 2.7.1, so in this case you should use 2.7.0 to match the rest. You can probably remove its version, because it would really surprise me if the dependency is not managed by the parent.","body":"Why do you have a separate, and more importantly <b>much</b> lower version of <code>spring-boot-configuration-processor</code>? Its latest version is 2.7.1, so in this case you should use 2.7.0 to match the rest. You can probably remove its version, because it would really surprise me if the dependency is not managed by the parent."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1656096201,"post_id":72748139,"comment_id":128496667,"body_markdown":"I just created a simple project using https://start.spring.io/ with only the Spring Configuration Processor selected. It indeed added the dependency without any version. It was also marked as `&lt;optional&gt;true&lt;/optional&gt;`, something that I&#39;d also do here unless you need it in production.","body":"I just created a simple project using <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">start.spring.io</a> with only the Spring Configuration Processor selected. It indeed added the dependency without any version. It was also marked as <code>&lt;optional&gt;true&lt;&#47;optional&gt;</code>, something that I&#39;d also do here unless you need it in production."},{"owner":{"account_id":15851975,"reputation":1,"user_id":11437553,"display_name":"paukyducky"},"score":0,"creation_date":1656096633,"post_id":72748139,"comment_id":128496790,"body_markdown":"Sorry, I was using 2.7 and that is the error it gave me, not 2.0.3. I started to play around with it and trial and error and found that 2.0.3 works, but I am really not sure why it works. That is the only thing I changed. I had it at 2.7.0 and that was when it would not work.\n\nDo I need to have all those spring dependencies listed out? I was thinking I did not need to have them all listed out...","body":"Sorry, I was using 2.7 and that is the error it gave me, not 2.0.3. I started to play around with it and trial and error and found that 2.0.3 works, but I am really not sure why it works. That is the only thing I changed. I had it at 2.7.0 and that was when it would not work.  Do I need to have all those spring dependencies listed out? I was thinking I did not need to have them all listed out..."}],"answers":[{"tags":[],"owner":{"account_id":15514869,"reputation":1,"user_id":11192698,"display_name":"Shariq Haque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662986192,"creation_date":1662986192,"answer_id":73689379,"question_id":72748139,"body_markdown":"Have you tried setting   spring.config.use-legacy-processing=true ?\r\n\r\nIf that works please make sure to fix your project before springboot 3.0 as this prop will be removed.  https://spring.io/blog/2020/08/14/config-file-processing-in-spring-boot-2-4\r\n","title":"Upgraded from Spring Boot 2.4 to 2.7 compiles fine in IDE, but when I deploy I get NoClassDefFoundError","body":"<p>Have you tried setting   spring.config.use-legacy-processing=true ?</p>\n<p>If that works please make sure to fix your project before springboot 3.0 as this prop will be removed.  <a href=\"https://spring.io/blog/2020/08/14/config-file-processing-in-spring-boot-2-4\" rel=\"nofollow noreferrer\">https://spring.io/blog/2020/08/14/config-file-processing-in-spring-boot-2-4</a></p>\n"}],"owner":{"account_id":15851975,"reputation":1,"user_id":11437553,"display_name":"paukyducky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1797,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662986192,"creation_date":1656095766,"question_id":72748139,"body_markdown":"I recently switched from Spring Boot 2.4.0 to 2.7.0 to take advantage of using PEM certs, and when I compiled it worked fine, but when I deployed to my server and ran the jar file, it gave me the error below. I tried to add in the JSON dependency as well with no avail. \r\n\r\nSorry if it is not properly formatted, I am really new to posting.\r\nThank you in advanced for your help!!!\r\n\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;mainController&#39;: Unsatisfied dependency expressed through field &#39;*****&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;******&#39;: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/springframework/boot/configurationprocessor/json/JSONObject\r\n\r\n&gt; Caused by: java.lang.ClassNotFoundException: org.springframework.boot.configurationprocessor.json.JSONObject\r\n\r\nHere is my pom.xml\r\n\r\n     &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.0&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.****.operations&lt;/groupId&gt;\r\n    &lt;artifactId&gt;backend&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.4-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;****backend&lt;/name&gt;\r\n\r\n\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;description&gt;****Operations Java / SQL Backend&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;org.mapstruct.version&gt;1.4.2.Final&lt;/org.mapstruct.version&gt;\r\n        &lt;org.modelmapper.version&gt;2.3.5&lt;/org.modelmapper.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.3.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n            &lt;version&gt;${org.modelmapper.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n            &lt;version&gt;20220320&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n\r\n\r\n","title":"Upgraded from Spring Boot 2.4 to 2.7 compiles fine in IDE, but when I deploy I get NoClassDefFoundError","body":"<p>I recently switched from Spring Boot 2.4.0 to 2.7.0 to take advantage of using PEM certs, and when I compiled it worked fine, but when I deployed to my server and ran the jar file, it gave me the error below. I tried to add in the JSON dependency as well with no avail.</p>\n<p>Sorry if it is not properly formatted, I am really new to posting.\nThank you in advanced for your help!!!</p>\n<blockquote>\n<p>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mainController': Unsatisfied dependency expressed through field '<em><strong><strong>'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '</strong></strong></em>*': Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/springframework/boot/configurationprocessor/json/JSONObject</p>\n</blockquote>\n<blockquote>\n<p>Caused by: java.lang.ClassNotFoundException: org.springframework.boot.configurationprocessor.json.JSONObject</p>\n</blockquote>\n<p>Here is my pom.xml</p>\n<pre><code> &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;com.****.operations&lt;/groupId&gt;\n&lt;artifactId&gt;backend&lt;/artifactId&gt;\n&lt;version&gt;0.0.4-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;****backend&lt;/name&gt;\n\n\n&lt;packaging&gt;jar&lt;/packaging&gt;\n&lt;description&gt;****Operations Java / SQL Backend&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;org.mapstruct.version&gt;1.4.2.Final&lt;/org.mapstruct.version&gt;\n    &lt;org.modelmapper.version&gt;2.3.5&lt;/org.modelmapper.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n        &lt;version&gt;2.0.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n        &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n        &lt;version&gt;${org.modelmapper.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.json&lt;/groupId&gt;\n        &lt;artifactId&gt;json&lt;/artifactId&gt;\n        &lt;version&gt;20220320&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","web-services","request","wsdl","jax-ws"],"owner":{"account_id":20037117,"reputation":33,"user_id":14688588,"display_name":"Michael Neumair"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1662986168,"creation_date":1662986168,"question_id":73689367,"body_markdown":"I wrote a minimalistic Web Service in Java using JAX-WS. The Service provides an interface \r\n\r\n    @WebMethod\r\n    @WebResult(partName = &quot;return&quot;)\r\n    @Action(input = &quot;http://api.example.org/TimeService/getTimeAsStringRequest&quot;, output = &quot;http://api.example.org/TimeService/getTimeAsStringResponse&quot;)\r\n    public String getTimeAsString();\r\n\r\nThe service provider is working correctly.\r\n\r\nhttp://127.0.0.1:9876/ts?wsdl\r\n\r\ngives me the following responese:\r\n\r\n\t&lt;definitions targetNamespace=&quot;http://impl.be.example.org/&quot; name=&quot;TimeServiceImplService&quot;&gt;\r\n\t\t&lt;import namespace=&quot;http://api.example.org/&quot; location=&quot;http://127.0.0.1:9876/ts?wsdl=1&quot;/&gt;\r\n\t\t&lt;binding name=&quot;TimeServiceImplPortBinding&quot; type=&quot;ns1:TimeService&quot;&gt;\r\n\t\t&lt;soap:binding transport=&quot;http://schemas.xmlsoap.org/soap/http&quot; style=&quot;rpc&quot;/&gt;\r\n\t\t&lt;operation name=&quot;getTimeAsString&quot;&gt;\r\n\t\t\t&lt;soap:operation soapAction=&quot;&quot;/&gt;\r\n\t\t\t&lt;input&gt;\r\n\t\t\t\t&lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\r\n\t\t\t&lt;/input&gt;\r\n\t\t\t&lt;output&gt;\r\n\t\t\t\t&lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\r\n\t\t\t&lt;/output&gt;\r\n\t\t&lt;/operation&gt;\r\n\t\t&lt;operation name=&quot;getTimeAsElapsed&quot;&gt;\r\n\t\t\t&lt;soap:operation soapAction=&quot;&quot;/&gt;\r\n\t\t\t&lt;input&gt;\r\n\t\t\t\t&lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\r\n\t\t\t&lt;/input&gt;\r\n\t\t\t&lt;output&gt;\r\n\t\t\t\t&lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\r\n\t\t\t&lt;/output&gt;\r\n\t\t&lt;/operation&gt;\r\n\t\t&lt;/binding&gt;\r\n\t\t&lt;service name=&quot;TimeServiceImplService&quot;&gt;\r\n\t\t\t&lt;port name=&quot;TimeServiceImplPort&quot; binding=&quot;tns:TimeServiceImplPortBinding&quot;&gt;\r\n\t\t\t\t&lt;soap:address location=&quot;http://127.0.0.1:9876/ts&quot;/&gt;\r\n\t\t\t&lt;/port&gt;\r\n\t\t&lt;/service&gt;\r\n\t&lt;/definitions&gt;\r\n\r\nhttp://127.0.0.1:9876/ts?wsdl=1 gives me the following response:\r\n\r\n\t&lt;definitions targetNamespace=&quot;http://impl.be.example.org/&quot; name=&quot;TimeServiceImplService&quot;&gt;\r\n\t\t&lt;import namespace=&quot;http://api.example.org/&quot; location=&quot;http://127.0.0.1:9876/ts?wsdl=1&quot;/&gt;\r\n\t\t&lt;binding name=&quot;TimeServiceImplPortBinding&quot; type=&quot;ns1:TimeService&quot;&gt;\r\n\t\t\t&lt;soap:binding transport=&quot;http://schemas.xmlsoap.org/soap/http&quot; style=&quot;rpc&quot;/&gt;\r\n\t\t&lt;operation name=&quot;getTimeAsString&quot;&gt;\r\n\t\t\t&lt;soap:operation soapAction=&quot;&quot;/&gt;\r\n\t\t\t&lt;input&gt;\r\n\t\t\t\t&lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\r\n\t\t\t&lt;/input&gt;\r\n\t\t\t&lt;output&gt;\r\n\t\t\t\t&lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\r\n\t\t\t&lt;/output&gt;\r\n\t\t&lt;/operation&gt;\r\n\t\t&lt;operation name=&quot;getTimeAsElapsed&quot;&gt;\r\n\t\t\t&lt;soap:operation soapAction=&quot;&quot;/&gt;\r\n\t\t\t&lt;input&gt;\r\n\t\t\t\t&lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\r\n\t\t\t&lt;/input&gt;\r\n\t\t\t&lt;output&gt;\r\n\t\t\t\t&lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\r\n\t\t\t&lt;/output&gt;\r\n\t\t&lt;/operation&gt;\r\n\t\t&lt;/binding&gt;\r\n\t\t&lt;service name=&quot;TimeServiceImplService&quot;&gt;\r\n\t\t\t&lt;port name=&quot;TimeServiceImplPort&quot; binding=&quot;tns:TimeServiceImplPortBinding&quot;&gt;\r\n\t\t\t\t&lt;soap:address location=&quot;http://127.0.0.1:9876/ts&quot;/&gt;\r\n\t\t\t&lt;/port&gt;\r\n\t\t&lt;/service&gt;\r\n\t&lt;/definitions&gt;\r\n\r\nHow can I access the service directly via HTML call? How can I build the XML body for the request from the information above?\r\n\r\nPS: \r\n\r\n    POST http://127.0.0.1:9876/ts?wsdl HTTP/1.0\r\n    Content-Type: text/xml\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n       &lt;soapenv:Envelope \r\n       xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\n       xmlns:tns=&quot;http://www.4d.com/namespace/default&quot;&gt;\r\n       &lt;soapenv:Body&gt;\r\n          &lt;ns1:getTimeAsString xsi:type=&quot;xsd:any&quot;&gt;\r\n          &lt;/ns1:getTimeAsString&gt;\r\n       &lt;/soapenv:Body&gt;\r\n    &lt;/soapenv:Envelope&gt;\r\n\r\nterminates with the following error: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[6,47]\r\n\r\nRegards\r\nMichael","title":"How to build WSDL Request body","body":"<p>I wrote a minimalistic Web Service in Java using JAX-WS. The Service provides an interface</p>\n<pre><code>@WebMethod\n@WebResult(partName = &quot;return&quot;)\n@Action(input = &quot;http://api.example.org/TimeService/getTimeAsStringRequest&quot;, output = &quot;http://api.example.org/TimeService/getTimeAsStringResponse&quot;)\npublic String getTimeAsString();\n</code></pre>\n<p>The service provider is working correctly.</p>\n<p><a href=\"http://127.0.0.1:9876/ts?wsdl\" rel=\"nofollow noreferrer\">http://127.0.0.1:9876/ts?wsdl</a></p>\n<p>gives me the following responese:</p>\n<pre><code>&lt;definitions targetNamespace=&quot;http://impl.be.example.org/&quot; name=&quot;TimeServiceImplService&quot;&gt;\n    &lt;import namespace=&quot;http://api.example.org/&quot; location=&quot;http://127.0.0.1:9876/ts?wsdl=1&quot;/&gt;\n    &lt;binding name=&quot;TimeServiceImplPortBinding&quot; type=&quot;ns1:TimeService&quot;&gt;\n    &lt;soap:binding transport=&quot;http://schemas.xmlsoap.org/soap/http&quot; style=&quot;rpc&quot;/&gt;\n    &lt;operation name=&quot;getTimeAsString&quot;&gt;\n        &lt;soap:operation soapAction=&quot;&quot;/&gt;\n        &lt;input&gt;\n            &lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\n        &lt;/input&gt;\n        &lt;output&gt;\n            &lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\n        &lt;/output&gt;\n    &lt;/operation&gt;\n    &lt;operation name=&quot;getTimeAsElapsed&quot;&gt;\n        &lt;soap:operation soapAction=&quot;&quot;/&gt;\n        &lt;input&gt;\n            &lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\n        &lt;/input&gt;\n        &lt;output&gt;\n            &lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\n        &lt;/output&gt;\n    &lt;/operation&gt;\n    &lt;/binding&gt;\n    &lt;service name=&quot;TimeServiceImplService&quot;&gt;\n        &lt;port name=&quot;TimeServiceImplPort&quot; binding=&quot;tns:TimeServiceImplPortBinding&quot;&gt;\n            &lt;soap:address location=&quot;http://127.0.0.1:9876/ts&quot;/&gt;\n        &lt;/port&gt;\n    &lt;/service&gt;\n&lt;/definitions&gt;\n</code></pre>\n<p><a href=\"http://127.0.0.1:9876/ts?wsdl=1\" rel=\"nofollow noreferrer\">http://127.0.0.1:9876/ts?wsdl=1</a> gives me the following response:</p>\n<pre><code>&lt;definitions targetNamespace=&quot;http://impl.be.example.org/&quot; name=&quot;TimeServiceImplService&quot;&gt;\n    &lt;import namespace=&quot;http://api.example.org/&quot; location=&quot;http://127.0.0.1:9876/ts?wsdl=1&quot;/&gt;\n    &lt;binding name=&quot;TimeServiceImplPortBinding&quot; type=&quot;ns1:TimeService&quot;&gt;\n        &lt;soap:binding transport=&quot;http://schemas.xmlsoap.org/soap/http&quot; style=&quot;rpc&quot;/&gt;\n    &lt;operation name=&quot;getTimeAsString&quot;&gt;\n        &lt;soap:operation soapAction=&quot;&quot;/&gt;\n        &lt;input&gt;\n            &lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\n        &lt;/input&gt;\n        &lt;output&gt;\n            &lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\n        &lt;/output&gt;\n    &lt;/operation&gt;\n    &lt;operation name=&quot;getTimeAsElapsed&quot;&gt;\n        &lt;soap:operation soapAction=&quot;&quot;/&gt;\n        &lt;input&gt;\n            &lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\n        &lt;/input&gt;\n        &lt;output&gt;\n            &lt;soap:body use=&quot;literal&quot; namespace=&quot;http://api.example.org/&quot;/&gt;\n        &lt;/output&gt;\n    &lt;/operation&gt;\n    &lt;/binding&gt;\n    &lt;service name=&quot;TimeServiceImplService&quot;&gt;\n        &lt;port name=&quot;TimeServiceImplPort&quot; binding=&quot;tns:TimeServiceImplPortBinding&quot;&gt;\n            &lt;soap:address location=&quot;http://127.0.0.1:9876/ts&quot;/&gt;\n        &lt;/port&gt;\n    &lt;/service&gt;\n&lt;/definitions&gt;\n</code></pre>\n<p>How can I access the service directly via HTML call? How can I build the XML body for the request from the information above?</p>\n<p>PS:</p>\n<pre><code>POST http://127.0.0.1:9876/ts?wsdl HTTP/1.0\nContent-Type: text/xml\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n   &lt;soapenv:Envelope \n   xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\n   xmlns:tns=&quot;http://www.4d.com/namespace/default&quot;&gt;\n   &lt;soapenv:Body&gt;\n      &lt;ns1:getTimeAsString xsi:type=&quot;xsd:any&quot;&gt;\n      &lt;/ns1:getTimeAsString&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>terminates with the following error: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[6,47]</p>\n<p>Regards\nMichael</p>\n"},{"tags":["java","date-manipulation"],"answers":[{"tags":[],"owner":{"account_id":43412,"reputation":23624,"user_id":126916,"accept_rate":91,"display_name":"Abhinav Sarkar"},"down_vote_count":0,"up_vote_count":73,"is_accepted":true,"score":73,"last_activity_date":1277115804,"creation_date":1277115804,"answer_id":3083812,"question_id":3083781,"body_markdown":"There you go:\r\n\r\n    public Pair&lt;Date, Date&gt; getDateRange() {\r\n    \tDate begining, end;\r\n\r\n    \t{\r\n    \t\tCalendar calendar = getCalendarForNow();\r\n        \tcalendar.set(Calendar.DAY_OF_MONTH,\r\n        \t\t\tcalendar.getActualMinimum(Calendar.DAY_OF_MONTH));\r\n        \tsetTimeToBeginningOfDay(calendar);\r\n        \tbegining = calendar.getTime();\r\n    \t}\r\n\r\n    \t{\r\n    \t\tCalendar calendar = getCalendarForNow();\r\n        \tcalendar.set(Calendar.DAY_OF_MONTH,\r\n        \t\t\tcalendar.getActualMaximum(Calendar.DAY_OF_MONTH));\r\n        \tsetTimeToEndofDay(calendar);\r\n        \tend = calendar.getTime();\r\n    \t}\r\n\r\n        return Pair.of(begining, end);\r\n    }\r\n\r\n\tprivate static Calendar getCalendarForNow() {\r\n\t    Calendar calendar = GregorianCalendar.getInstance();\r\n\t    calendar.setTime(new Date());\r\n\t    return calendar;\r\n    }\r\n\r\n\tprivate static void setTimeToBeginningOfDay(Calendar calendar) {\r\n        calendar.set(Calendar.HOUR_OF_DAY, 0);\r\n        calendar.set(Calendar.MINUTE, 0);\r\n        calendar.set(Calendar.SECOND, 0);\r\n        calendar.set(Calendar.MILLISECOND, 0);\r\n    }\r\n\r\n\tprivate static void setTimeToEndofDay(Calendar calendar) {\r\n        calendar.set(Calendar.HOUR_OF_DAY, 23);\r\n        calendar.set(Calendar.MINUTE, 59);\r\n        calendar.set(Calendar.SECOND, 59);\r\n        calendar.set(Calendar.MILLISECOND, 999);\r\n    }\r\n\r\nPS: `Pair` class is simply a pair of two values.","title":"Start and end date of a current month","body":"<p>There you go:</p>\n\n<pre><code>public Pair&lt;Date, Date&gt; getDateRange() {\n    Date begining, end;\n\n    {\n        Calendar calendar = getCalendarForNow();\n        calendar.set(Calendar.DAY_OF_MONTH,\n                calendar.getActualMinimum(Calendar.DAY_OF_MONTH));\n        setTimeToBeginningOfDay(calendar);\n        begining = calendar.getTime();\n    }\n\n    {\n        Calendar calendar = getCalendarForNow();\n        calendar.set(Calendar.DAY_OF_MONTH,\n                calendar.getActualMaximum(Calendar.DAY_OF_MONTH));\n        setTimeToEndofDay(calendar);\n        end = calendar.getTime();\n    }\n\n    return Pair.of(begining, end);\n}\n\nprivate static Calendar getCalendarForNow() {\n    Calendar calendar = GregorianCalendar.getInstance();\n    calendar.setTime(new Date());\n    return calendar;\n}\n\nprivate static void setTimeToBeginningOfDay(Calendar calendar) {\n    calendar.set(Calendar.HOUR_OF_DAY, 0);\n    calendar.set(Calendar.MINUTE, 0);\n    calendar.set(Calendar.SECOND, 0);\n    calendar.set(Calendar.MILLISECOND, 0);\n}\n\nprivate static void setTimeToEndofDay(Calendar calendar) {\n    calendar.set(Calendar.HOUR_OF_DAY, 23);\n    calendar.set(Calendar.MINUTE, 59);\n    calendar.set(Calendar.SECOND, 59);\n    calendar.set(Calendar.MILLISECOND, 999);\n}\n</code></pre>\n\n<p>PS: <code>Pair</code> class is simply a pair of two values.</p>\n"},{"tags":[],"owner":{"account_id":103559,"reputation":73828,"user_id":277304,"accept_rate":66,"display_name":"leonbloy"},"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1662986097,"creation_date":1277120389,"answer_id":3084292,"question_id":3083781,"body_markdown":"If you have the option, you&#39;d better avoid the horrid Java Date API, and use instead [Jodatime][1] (or equivalently the Java 8 `java.time.*` API). Here is an example:\r\n\r\n    LocalDate monthBegin = new LocalDate().withDayOfMonth(1);\r\n    LocalDate monthEnd = new LocalDate().plusMonths(1).withDayOfMonth(1).minusDays(1);\r\n\r\n  [1]: http://joda-time.sourceforge.net/userguide.html\r\n\r\n\r\n","title":"Start and end date of a current month","body":"<p>If you have the option, you'd better avoid the horrid Java Date API, and use instead <a href=\"http://joda-time.sourceforge.net/userguide.html\" rel=\"nofollow noreferrer\">Jodatime</a> (or equivalently the Java 8 <code>java.time.*</code> API). Here is an example:</p>\n<pre><code>LocalDate monthBegin = new LocalDate().withDayOfMonth(1);\nLocalDate monthEnd = new LocalDate().plusMonths(1).withDayOfMonth(1).minusDays(1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52561,"reputation":1633,"user_id":157080,"accept_rate":71,"display_name":"John"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1297565766,"creation_date":1297565766,"answer_id":4982158,"question_id":3083781,"body_markdown":"With the [date4j][1] library :\r\n\r\n    dt.getStartOfMonth();\r\n    dt.getEndOfMonth();\r\n\r\n\r\n  [1]: http://www.date4j.net","title":"Start and end date of a current month","body":"<p>With the <a href=\"http://www.date4j.net\" rel=\"nofollow\">date4j</a> library :</p>\n\n<pre><code>dt.getStartOfMonth();\ndt.getEndOfMonth();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":732799,"reputation":19,"user_id":694598,"display_name":"paks"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1302084522,"creation_date":1302084049,"answer_id":5564561,"question_id":3083781,"body_markdown":"    Date begining, ending;\r\n    Calendar calendar_start =BusinessUnitUtility.getCalendarForNow();\r\n      calendar_start.set(Calendar.DAY_OF_MONTH,calendar_start.getActualMinimum(Calendar.DAY_OF_MONTH));\r\n      begining = calendar_start.getTime();\r\n      String start= DateDifference.dateToString(begining,&quot;dd-MMM-yyyy&quot;);//sdf.format(begining);\r\n\t    \t\r\n\t    \t\r\n       //\t    \t for End Date of month\r\n      Calendar calendar_end = BusinessUnitUtility.getCalendarForNow();\r\n\t  calendar_end.set(Calendar.DAY_OF_MONTH,calendar_end.getActualMaximum(Calendar.DAY_OF_MONTH));\r\n          ending = calendar_end.getTime();\r\n          String end=DateDifference.dateToString(ending,&quot;dd-MMM-yyyy&quot;);//or sdf.format(end);\r\n\r\n    enter code here\r\n\r\n\r\n\r\n    public static Calendar getCalendarForNow() {\r\n\t        Calendar calendar = GregorianCalendar.getInstance();\r\n\t        calendar.setTime(new Date());\r\n\t        return calendar;\r\n\t    }\r\n\r\n\r\n\r\n\t       ","title":"Start and end date of a current month","body":"<pre><code>Date begining, ending;\nCalendar calendar_start =BusinessUnitUtility.getCalendarForNow();\n  calendar_start.set(Calendar.DAY_OF_MONTH,calendar_start.getActualMinimum(Calendar.DAY_OF_MONTH));\n  begining = calendar_start.getTime();\n  String start= DateDifference.dateToString(begining,\"dd-MMM-yyyy\");//sdf.format(begining);\n\n\n   //            for End Date of month\n  Calendar calendar_end = BusinessUnitUtility.getCalendarForNow();\n  calendar_end.set(Calendar.DAY_OF_MONTH,calendar_end.getActualMaximum(Calendar.DAY_OF_MONTH));\n      ending = calendar_end.getTime();\n      String end=DateDifference.dateToString(ending,\"dd-MMM-yyyy\");//or sdf.format(end);\n\nenter code here\n\n\n\npublic static Calendar getCalendarForNow() {\n        Calendar calendar = GregorianCalendar.getInstance();\n        calendar.setTime(new Date());\n        return calendar;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2817653,"reputation":201,"user_id":2422263,"display_name":"ManishKr"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1480602517,"creation_date":1384675125,"answer_id":20028540,"question_id":3083781,"body_markdown":"Making it more modular, you can have one main function that calculates startDate or EndDate and than you can have individual methods to `getMonthStartDate`, `getMonthEndDate` and to `getMonthStartEndDate`. Use methods as per your requirement.\r\n\r\n    public static String getMonthStartEndDate(){\r\n\t\tString start = getMonthDate(&quot;START&quot;);\r\n\t\tString end = getMonthDate(&quot;END&quot;);\r\n\t\tString result = start + &quot; to &quot; + end;\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static String getMonthStartDate(){\r\n\t\tString start = getMonthDate(&quot;START&quot;);\r\n\t\treturn start;\r\n\t}\r\n\t\r\n\tpublic static String getMonthEndDate(){\r\n\t\tString end = getMonthDate(&quot;END&quot;);\r\n\t\treturn end;\r\n\t}\r\n\r\n\t/**\r\n\t * @param filter \r\n\t * START for start date of month e.g.  Nov 01, 2013\r\n\t * END for end date of month e.g.  Nov 30, 2013\r\n\t * @return\r\n\t */\r\n\tpublic static String getMonthDate(String filter){\r\n                String MMM_DD_COMMA_YYYY       = &quot;MMM dd, yyyy&quot;;\r\n\t\tSimpleDateFormat sdf = new SimpleDateFormat(MMM_DD_COMMA_YYYY);\r\n\t\tsdf.setTimeZone(TimeZone.getTimeZone(&quot;PST&quot;));\r\n\t\tsdf.format(GregorianCalendar.getInstance().getTime());\r\n\t\t\r\n\t\tCalendar cal =  GregorianCalendar.getInstance();\r\n\t\tint date = cal.getActualMinimum(Calendar.DATE);\r\n\t\tif(&quot;END&quot;.equalsIgnoreCase(filter)){\r\n\t\t\tdate = cal.getActualMaximum(Calendar.DATE);\r\n\t\t}\r\n\t\tcal.set(Calendar.DATE, date);\r\n\t\tString result =  sdf.format(cal.getTime());\r\n\t\tSystem.out.println(&quot; &quot; + result  );\r\n\r\n\t\treturn result;\r\n\t}","title":"Start and end date of a current month","body":"<p>Making it more modular, you can have one main function that calculates startDate or EndDate and than you can have individual methods to <code>getMonthStartDate</code>, <code>getMonthEndDate</code> and to <code>getMonthStartEndDate</code>. Use methods as per your requirement.</p>\n\n<pre><code>public static String getMonthStartEndDate(){\n    String start = getMonthDate(\"START\");\n    String end = getMonthDate(\"END\");\n    String result = start + \" to \" + end;\n    return result;\n}\n\npublic static String getMonthStartDate(){\n    String start = getMonthDate(\"START\");\n    return start;\n}\n\npublic static String getMonthEndDate(){\n    String end = getMonthDate(\"END\");\n    return end;\n}\n\n/**\n * @param filter \n * START for start date of month e.g.  Nov 01, 2013\n * END for end date of month e.g.  Nov 30, 2013\n * @return\n */\npublic static String getMonthDate(String filter){\n            String MMM_DD_COMMA_YYYY       = \"MMM dd, yyyy\";\n    SimpleDateFormat sdf = new SimpleDateFormat(MMM_DD_COMMA_YYYY);\n    sdf.setTimeZone(TimeZone.getTimeZone(\"PST\"));\n    sdf.format(GregorianCalendar.getInstance().getTime());\n\n    Calendar cal =  GregorianCalendar.getInstance();\n    int date = cal.getActualMinimum(Calendar.DATE);\n    if(\"END\".equalsIgnoreCase(filter)){\n        date = cal.getActualMaximum(Calendar.DATE);\n    }\n    cal.set(Calendar.DATE, date);\n    String result =  sdf.format(cal.getTime());\n    System.out.println(\" \" + result  );\n\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":136651,"reputation":8180,"user_id":340290,"accept_rate":78,"display_name":"manikanta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430331399,"creation_date":1430331399,"answer_id":29951441,"question_id":3083781,"body_markdown":"For Java 8+, below method will given current month first &amp; last dates as LocalDate instances.\r\n\r\n\tpublic static LocalDate getCurrentMonthFirstDate() {\r\n\t\treturn LocalDate.ofEpochDay(System.currentTimeMillis() / (24 * 60 * 60 * 1000) ).withDayOfMonth(1);\r\n\t}\r\n\r\n\tpublic static LocalDate getCurrentMonthLastDate() {\r\n\t\treturn LocalDate.ofEpochDay(System.currentTimeMillis() / (24 * 60 * 60 * 1000) ).plusMonths(1).withDayOfMonth(1).minusDays(1);\r\n\t}\r\n\r\n*Side note: Using `LocalDate.ofEpochDay(...)` instead of `LocalDate.now()` gives much improved performance. Also, using the millis-in-a-day expression instead of the end value, which is `86400000` is performing better. I initially thought the latter would perform better than the the expression :P*","title":"Start and end date of a current month","body":"<p>For Java 8+, below method will given current month first &amp; last dates as LocalDate instances.</p>\n\n<pre><code>public static LocalDate getCurrentMonthFirstDate() {\n    return LocalDate.ofEpochDay(System.currentTimeMillis() / (24 * 60 * 60 * 1000) ).withDayOfMonth(1);\n}\n\npublic static LocalDate getCurrentMonthLastDate() {\n    return LocalDate.ofEpochDay(System.currentTimeMillis() / (24 * 60 * 60 * 1000) ).plusMonths(1).withDayOfMonth(1).minusDays(1);\n}\n</code></pre>\n\n<p><em>Side note: Using <code>LocalDate.ofEpochDay(...)</code> instead of <code>LocalDate.now()</code> gives much improved performance. Also, using the millis-in-a-day expression instead of the end value, which is <code>86400000</code> is performing better. I initially thought the latter would perform better than the the expression :P</em></p>\n"},{"tags":[],"owner":{"account_id":3962804,"reputation":1490,"user_id":3269543,"accept_rate":83,"display_name":"Phoenix"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1441373459,"creation_date":1441373459,"answer_id":32399388,"question_id":3083781,"body_markdown":"Try this Code\r\n\r\n    Calendar calendar = Calendar.getInstance();\r\n    int yearpart = 2010;\r\n    int monthPart = 11;\r\n    int dateDay = 1;\r\n    calendar.set(yearpart, monthPart, dateDay);\r\n    int numOfDaysInMonth = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);\r\n    System.out.println(&quot;Number of Days: &quot; + numOfDaysInMonth);\r\n    System.out.println(&quot;First Day of month: &quot; + calendar.getTime());\r\n    calendar.add(Calendar.DAY_OF_MONTH, numOfDaysInMonth-1);\r\n    System.out.println(&quot;Last Day of month: &quot; + calendar.getTime());\r\n\r\nHope it helps.","title":"Start and end date of a current month","body":"<p>Try this Code</p>\n\n<pre><code>Calendar calendar = Calendar.getInstance();\nint yearpart = 2010;\nint monthPart = 11;\nint dateDay = 1;\ncalendar.set(yearpart, monthPart, dateDay);\nint numOfDaysInMonth = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);\nSystem.out.println(\"Number of Days: \" + numOfDaysInMonth);\nSystem.out.println(\"First Day of month: \" + calendar.getTime());\ncalendar.add(Calendar.DAY_OF_MONTH, numOfDaysInMonth-1);\nSystem.out.println(\"Last Day of month: \" + calendar.getTime());\n</code></pre>\n\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":4318423,"reputation":51,"user_id":3527518,"display_name":"Sumeet"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1453359810,"creation_date":1453359810,"answer_id":34917320,"question_id":3083781,"body_markdown":"\tCalendar c = Calendar.getInstance();\r\n\t\tint year = c.get(Calendar.YEAR);\r\n\t\tint month = c.get(Calendar.MONTH);\r\n\t\tint day = 1;\r\n\t\tc.set(year, month, day);\r\n\t\tint numOfDaysInMonth = c.getActualMaximum(Calendar.DAY_OF_MONTH);\r\n\t\tSystem.out.println(&quot;First Day of month: &quot; + c.getTime());\r\n\t\tc.add(Calendar.DAY_OF_MONTH, numOfDaysInMonth-1);\r\n\t\tSystem.out.println(&quot;Last Day of month: &quot; + c.getTime());","title":"Start and end date of a current month","body":"<pre><code>Calendar c = Calendar.getInstance();\n    int year = c.get(Calendar.YEAR);\n    int month = c.get(Calendar.MONTH);\n    int day = 1;\n    c.set(year, month, day);\n    int numOfDaysInMonth = c.getActualMaximum(Calendar.DAY_OF_MONTH);\n    System.out.println(\"First Day of month: \" + c.getTime());\n    c.add(Calendar.DAY_OF_MONTH, numOfDaysInMonth-1);\n    System.out.println(\"Last Day of month: \" + c.getTime());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3639607,"reputation":878,"user_id":3034100,"display_name":"aianitro"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1477543331,"creation_date":1477543331,"answer_id":40276266,"question_id":3083781,"body_markdown":"Try LocalDate from Java 8:\r\n\r\n    LocalDate today = LocalDate.now();\r\n    System.out.println(&quot;First day: &quot; + today.withDayOfMonth(1));\r\n    System.out.println(&quot;Last day: &quot; + today.withDayOfMonth(today.lengthOfMonth()));","title":"Start and end date of a current month","body":"<p>Try LocalDate from Java 8:</p>\n\n<pre><code>LocalDate today = LocalDate.now();\nSystem.out.println(\"First day: \" + today.withDayOfMonth(1));\nSystem.out.println(\"Last day: \" + today.withDayOfMonth(today.lengthOfMonth()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16061786,"reputation":1,"user_id":11592460,"display_name":"suraj singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559905904,"creation_date":1559905904,"answer_id":56493226,"question_id":3083781,"body_markdown":"    public static void main(String[] args) \r\n    \t{\r\n    \t\tLocalDate today = LocalDate.now();\r\n    \t\tSystem.out.println(&quot;First day: &quot; + \r\n    today.withDayOfMonth(1));\r\n    \t\tSystem.out.println(&quot;Last day: &quot; + today.withDayOfMonth(today.lengthOfMonth()))\r\n    \t}","title":"Start and end date of a current month","body":"<pre><code>public static void main(String[] args) \n    {\n        LocalDate today = LocalDate.now();\n        System.out.println(\"First day: \" + \ntoday.withDayOfMonth(1));\n        System.out.println(\"Last day: \" + today.withDayOfMonth(today.lengthOfMonth()))\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9124954,"reputation":1832,"user_id":6789088,"display_name":"Sujeet Kumar"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1569048720,"creation_date":1569048720,"answer_id":58037964,"question_id":3083781,"body_markdown":"    \r\n\r\n&gt; Simple and Best, Try this One\r\n\r\n    Calendar calendar = Calendar.getInstance();\r\n                calendar.add(Calendar.MONTH, 0);\r\n                calendar.set(Calendar.DATE, calendar.getActualMinimum(Calendar.DAY_OF_MONTH));\r\n                Date monthFirstDay = calendar.getTime();\r\n                calendar.set(Calendar.DATE, calendar.getActualMaximum(Calendar.DAY_OF_MONTH));\r\n                Date monthLastDay = calendar.getTime();\r\n    \r\n            SimpleDateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n            String startDateStr = df.format(monthFirstDay);\r\n            String endDateStr = df.format(monthLastDay);\r\n    \r\n            Log.e(&quot;DateFirstLast&quot;,startDateStr+&quot; &quot;+endDateStr);","title":"Start and end date of a current month","body":"<blockquote>\n  <p>Simple and Best, Try this One</p>\n</blockquote>\n\n<pre><code>Calendar calendar = Calendar.getInstance();\n            calendar.add(Calendar.MONTH, 0);\n            calendar.set(Calendar.DATE, calendar.getActualMinimum(Calendar.DAY_OF_MONTH));\n            Date monthFirstDay = calendar.getTime();\n            calendar.set(Calendar.DATE, calendar.getActualMaximum(Calendar.DAY_OF_MONTH));\n            Date monthLastDay = calendar.getTime();\n\n        SimpleDateFormat df = new SimpleDateFormat(\"yyyy-MM-dd\");\n        String startDateStr = df.format(monthFirstDay);\n        String endDateStr = df.format(monthLastDay);\n\n        Log.e(\"DateFirstLast\",startDateStr+\" \"+endDateStr);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17070734,"reputation":1,"user_id":12351593,"display_name":"ashwani pratap singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573407799,"creation_date":1573402238,"answer_id":58790491,"question_id":3083781,"body_markdown":"You can implement it as below:\r\n\r\n    public void FirstAndLastDate() {\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyy-MM-dd&quot;);\r\n        //start date of month\r\n        calendarStart = Calendar.getInstance();\r\n        calendarStart.set(Integer.parseInt((new SimpleDateFormat(&quot;yyyy&quot;)).format(new Date().getTime()))\r\n                , Integer.parseInt((new SimpleDateFormat(&quot;MM&quot;)).format(new Date().getTime()))\r\n                , Calendar.getInstance().getActualMinimum(Calendar.DAY_OF_MONTH));\r\n\r\n        //End Date of month\r\n        calendarEnd = Calendar.getInstance();\r\n        calendarEnd.set(Integer.parseInt((new SimpleDateFormat(&quot;yyyy&quot;)).format(new Date().getTime()))\r\n                , Integer.parseInt((new SimpleDateFormat(&quot;MM&quot;)).format(new Date().getTime()))\r\n                , Calendar.getInstance().getActualMaximum(Calendar.DAY_OF_MONTH));\r\n\r\n        Toast.makeText(this, sdf.format(calendarStart.getTime()) + &quot;\\n&quot; + sdf.format(calendarEnd.getTime()), Toast.LENGTH_SHORT).show();\r\n\r\n    }\r\n","title":"Start and end date of a current month","body":"<p>You can implement it as below:</p>\n\n<pre><code>public void FirstAndLastDate() {\n\n    SimpleDateFormat sdf = new SimpleDateFormat(\"yyy-MM-dd\");\n    //start date of month\n    calendarStart = Calendar.getInstance();\n    calendarStart.set(Integer.parseInt((new SimpleDateFormat(\"yyyy\")).format(new Date().getTime()))\n            , Integer.parseInt((new SimpleDateFormat(\"MM\")).format(new Date().getTime()))\n            , Calendar.getInstance().getActualMinimum(Calendar.DAY_OF_MONTH));\n\n    //End Date of month\n    calendarEnd = Calendar.getInstance();\n    calendarEnd.set(Integer.parseInt((new SimpleDateFormat(\"yyyy\")).format(new Date().getTime()))\n            , Integer.parseInt((new SimpleDateFormat(\"MM\")).format(new Date().getTime()))\n            , Calendar.getInstance().getActualMaximum(Calendar.DAY_OF_MONTH));\n\n    Toast.makeText(this, sdf.format(calendarStart.getTime()) + \"\\n\" + sdf.format(calendarEnd.getTime()), Toast.LENGTH_SHORT).show();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15974771,"reputation":1023,"user_id":11527968,"display_name":"Jimmy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629970409,"creation_date":1629970409,"answer_id":68936051,"question_id":3083781,"body_markdown":"**A very simple step to get the first day and last day of the month:**\r\n\r\n\t\tCalendar calendar = Calendar.getInstance();\r\n\t\t\r\n\t\t// Get the current date\r\n\t\tDate today = calendar.getTime();\r\n\t\t\r\n\t\t\r\n\t\t// Setting the first day of month\r\n\t\tcalendar.set(Calendar.DAY_OF_MONTH, 1);\r\n\t\tDate firstDayOfMonth = calendar.getTime();\r\n\r\n\t\t// Move to next month  \r\n\t\tcalendar.add(Calendar.MONTH, 1);\r\n\t\t// setting the 1st day of the month\r\n\t\tcalendar.set(Calendar.DAY_OF_MONTH, 1);\r\n\t\t// Move a day back from the date\r\n\t\tcalendar.add(Calendar.DATE, -1);\r\n\t\tDate lastDayOfMonth = calendar.getTime();\r\n\r\n        // Formatting the date  \r\n\t\tDateFormat sdf = new SimpleDateFormat(&quot;dd-MMM-YY&quot;);\r\n\r\n\t\tString todayStr = sdf.format(today);\r\n\t\tString firstDayOfMonthStr = sdf.format(firstDayOfMonth);\r\n\t\tString lastDayOfMonthStr = sdf.format(lastDayOfMonth);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Today            : &quot; + todayStr);\r\n\t\tSystem.out.println(&quot;Fist Day of Month: &quot;+firstDayOfMonthStr);\r\n\t\tSystem.out.println(&quot;Last Day of Month: &quot;+lastDayOfMonthStr);\r\n","title":"Start and end date of a current month","body":"<p><strong>A very simple step to get the first day and last day of the month:</strong></p>\n<pre><code>    Calendar calendar = Calendar.getInstance();\n    \n    // Get the current date\n    Date today = calendar.getTime();\n    \n    \n    // Setting the first day of month\n    calendar.set(Calendar.DAY_OF_MONTH, 1);\n    Date firstDayOfMonth = calendar.getTime();\n\n    // Move to next month  \n    calendar.add(Calendar.MONTH, 1);\n    // setting the 1st day of the month\n    calendar.set(Calendar.DAY_OF_MONTH, 1);\n    // Move a day back from the date\n    calendar.add(Calendar.DATE, -1);\n    Date lastDayOfMonth = calendar.getTime();\n\n    // Formatting the date  \n    DateFormat sdf = new SimpleDateFormat(&quot;dd-MMM-YY&quot;);\n\n    String todayStr = sdf.format(today);\n    String firstDayOfMonthStr = sdf.format(firstDayOfMonth);\n    String lastDayOfMonthStr = sdf.format(lastDayOfMonth);\n    \n    System.out.println(&quot;Today            : &quot; + todayStr);\n    System.out.println(&quot;Fist Day of Month: &quot;+firstDayOfMonthStr);\n    System.out.println(&quot;Last Day of Month: &quot;+lastDayOfMonthStr);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6267548,"reputation":319,"user_id":4872752,"display_name":"Dušan Salay"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1630270348,"creation_date":1630270348,"answer_id":68976812,"question_id":3083781,"body_markdown":"if you have `java.time.YearMonth` you can do:\r\n    \r\n    YearMonth startYearMonth = YearMonth.now();\r\n    java.time.LocalDate startOfMonthDate = startYearMonth.atDay(1);    \r\n    java.time.LocalDate endOfMonthDate   = startYearMonth.atEndOfMonth();\r\n    \r\n\r\n","title":"Start and end date of a current month","body":"<p>if you have <code>java.time.YearMonth</code> you can do:</p>\n<pre><code>YearMonth startYearMonth = YearMonth.now();\njava.time.LocalDate startOfMonthDate = startYearMonth.atDay(1);    \njava.time.LocalDate endOfMonthDate   = startYearMonth.atEndOfMonth();\n</code></pre>\n"}],"owner":{"account_id":147386,"reputation":7667,"user_id":358471,"accept_rate":50,"display_name":"Lalchand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96386,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":3083812,"answer_count":14,"score":48,"last_activity_date":1662986097,"creation_date":1277115429,"question_id":3083781,"body_markdown":"I need the start date and the end date of the current month in Java. When the JSP page is loaded with the current month it should automatically calculate the start and end date of that month. It should be irrespective of the year and month. That is some month has 31 days or 30 days or 28 days. This should satisfy for a leap year too. Can you help me out with that?\r\n\r\nFor example if I select month May in a list box I need starting date that is 1 and end date that is 31.","title":"Start and end date of a current month","body":"<p>I need the start date and the end date of the current month in Java. When the JSP page is loaded with the current month it should automatically calculate the start and end date of that month. It should be irrespective of the year and month. That is some month has 31 days or 30 days or 28 days. This should satisfy for a leap year too. Can you help me out with that?</p>\n\n<p>For example if I select month May in a list box I need starting date that is 1 and end date that is 31.</p>\n"},{"tags":["java","mysql","http","get","counter"],"answers":[{"tags":[],"owner":{"account_id":14595960,"reputation":7,"user_id":10770017,"display_name":"NothingIsIrrational"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662985943,"creation_date":1662985678,"answer_id":73689263,"question_id":73688658,"body_markdown":"2 options come to my mind : \r\n\r\n1. Create another service-class, which will have a method to track (and update) the API-call count, (you can make DB calls in that method).\r\n\r\n2. Use annotations(AOP) to make a generic handler for tracking the API call counts. Try searching for ```@Before``` it comes from `org.aspectj.lang.annotation` package.\r\n","title":"add view counter for GET REQUEST","body":"<p>2 options come to my mind :</p>\n<ol>\n<li><p>Create another service-class, which will have a method to track (and update) the API-call count, (you can make DB calls in that method).</p>\n</li>\n<li><p>Use annotations(AOP) to make a generic handler for tracking the API call counts. Try searching for <code>@Before</code> it comes from <code>org.aspectj.lang.annotation</code> package.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":26234884,"reputation":41,"user_id":19910214,"display_name":"Pasquale Meo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662985943,"creation_date":1662982612,"question_id":73688658,"body_markdown":"Im here again to ask help about a little ( i hope is little) problem.\r\n\r\nWhat my friend told me to do, is to add a view/click counter in the GET request and save it into a DATABASE (actualy working with DBEAVER).\r\n\r\nI m still looking for a way to do it but i have no idea. can you help pls ? Here the code.\r\n\r\noh btw im using springtools\r\n\r\n\r\nthis is the controller: \r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/&quot;)\r\n    public class RecipeController {\r\n    \t\r\n\t//ADMIN- USER\r\n\t@GetMapping(&quot;/user&quot;)\r\n\tpublic String user() {\r\n\t\treturn &quot;user&quot;;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/admin&quot;)\r\n\tpublic String admin() {\r\n\t\treturn &quot;admin&quot;;\r\n\t}\r\n\r\nand this is the model\r\n\r\n    \r\n\tprivate int hitCount; \r\n\t\r\n\tpublic int getHitCount() {\r\n\t\treturn hitCount;\r\n\t}\r\n\r\n\tpublic void setHitCount(int hitCount) {\r\n\t\tthis.hitCount = hitCount;\r\n\t}\r\n\r\ni hope is enough clear, is more info is need im here :D\r\nThx alot ","title":"add view counter for GET REQUEST","body":"<p>Im here again to ask help about a little ( i hope is little) problem.</p>\n<p>What my friend told me to do, is to add a view/click counter in the GET request and save it into a DATABASE (actualy working with DBEAVER).</p>\n<p>I m still looking for a way to do it but i have no idea. can you help pls ? Here the code.</p>\n<p>oh btw im using springtools</p>\n<p>this is the controller:</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/&quot;)\npublic class RecipeController {\n    \n//ADMIN- USER\n@GetMapping(&quot;/user&quot;)\npublic String user() {\n    return &quot;user&quot;;\n}\n\n@GetMapping(&quot;/admin&quot;)\npublic String admin() {\n    return &quot;admin&quot;;\n}\n</code></pre>\n<p>and this is the model</p>\n<pre><code>private int hitCount; \n\npublic int getHitCount() {\n    return hitCount;\n}\n\npublic void setHitCount(int hitCount) {\n    this.hitCount = hitCount;\n}\n</code></pre>\n<p>i hope is enough clear, is more info is need im here :D\nThx alot</p>\n"},{"tags":["java","gradle","java-8","overriding","opencsv"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1638537249,"post_id":70214817,"comment_id":124121443,"body_markdown":"There is no method `public String[] generateHeader()` in the `ColumnPositionMappingStrategy` class. There is only a method `public String[] generateHeader(T bean)` that you can override - see the [JavaDoc](http://opencsv.sourceforge.net/apidocs/com/opencsv/bean/ColumnPositionMappingStrategy.html#generateHeader-T-).","body":"There is no method <code>public String[] generateHeader()</code> in the <code>ColumnPositionMappingStrategy</code> class. There is only a method <code>public String[] generateHeader(T bean)</code> that you can override - see the <a href=\"http://opencsv.sourceforge.net/apidocs/com/opencsv/bean/ColumnPositionMappingStrategy.html#generateHeader-T-\" rel=\"nofollow noreferrer\">JavaDoc</a>."},{"owner":{"account_id":23098374,"reputation":21,"user_id":17208128,"display_name":"Jithin Variyar"},"score":0,"creation_date":1638537642,"post_id":70214817,"comment_id":124121591,"body_markdown":"But no public methods can be overridden. I tried now by changing the signature of the method\nin eclipse when you press ctr + O it will list all the methods in the super class that can be overridden. But here it is nothing","body":"But no public methods can be overridden. I tried now by changing the signature of the method in eclipse when you press ctr + O it will list all the methods in the super class that can be overridden. But here it is nothing"}],"answers":[{"tags":[],"owner":{"account_id":8408949,"reputation":11,"user_id":7205560,"display_name":"marcos rivera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662985851,"creation_date":1662985851,"answer_id":73689301,"question_id":70214817,"body_markdown":"Have you tried\r\n\r\n```@Override\r\n  public String[] generateHeader(T bean) throws CsvRequiredFieldEmptyException {\r\n    super.generateHeader(bean);\r\n    return HEADER;\r\n  }\r\n```","title":"How to override a method from a class existing in an external jar?","body":"<p>Have you tried</p>\n<pre><code>  public String[] generateHeader(T bean) throws CsvRequiredFieldEmptyException {\n    super.generateHeader(bean);\n    return HEADER;\n  }\n</code></pre>\n"}],"owner":{"account_id":23098374,"reputation":21,"user_id":17208128,"display_name":"Jithin Variyar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":552,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662985851,"creation_date":1638536882,"question_id":70214817,"body_markdown":"I added an external dependency (open CSV) to my Gradle project. I wanted to override a particular method from that. \r\n1. I subclassed the required class in a new custom class\r\n2. But I can not override any methods in the super class. Even though they are public \r\n\r\nWhat will be the reason for this.? The Gradle dependencies exist in Library/Project and External Dependencies.\r\n\r\n    class CustomMappingStrategy&lt;T&gt; extends ColumnPositionMappingStrategy&lt;T&gt; {\r\n        private static final String[] HEADER = new String[]{&quot;TradeID&quot;, &quot;GWML GUID&quot;, &quot;MXML GUID&quot;, &quot;GWML File&quot;, &quot;MxML File&quot;, &quot;MxML Counterparty&quot;, &quot;GWML Counterparty&quot;};\r\n    \r\n        @Override         //This is not working\r\n        public String[] generateHeader() {\r\n            return HEADER;\r\n        }\r\n    }\r\n\r\nThe super class looks like:\r\n\r\n    package com.opencsv.bean;\r\n    \r\n    import com.opencsv.CSVReader;\r\n    import com.opencsv.ICSVParser;\r\n    import com.opencsv.exceptions.CsvBadConverterException;\r\n    import com.opencsv.exceptions.CsvRequiredFieldEmptyException;\r\n    import org.apache.commons.collections4.MultiValuedMap;\r\n    import org.apache.commons.lang3.ArrayUtils;\r\n    import org.apache.commons.lang3.reflect.FieldUtils;\r\n    \r\n    import java.io.IOException;\r\n    import java.lang.reflect.Field;\r\n    import java.util.*;\r\n    \r\n    /**\r\n     * Allows for the mapping of columns with their positions. Using this strategy\r\n     * without annotations ({@link com.opencsv.bean.CsvBindByPosition} or\r\n     * {@link com.opencsv.bean.CsvCustomBindByPosition}) requires all the columns\r\n     * to be present in the CSV file and for them to be in a particular order. Using\r\n     * annotations allows one to specify arbitrary zero-based column numbers for\r\n     * each bean member variable to be filled. Also this strategy requires that the\r\n     * file does NOT have a header. That said, the main use of this strategy is\r\n     * files that do not have headers.\r\n     *\r\n     * @param &lt;T&gt; Type of object that is being processed.\r\n     */\r\n    public class ColumnPositionMappingStrategy&lt;T&gt; extends AbstractMappingStrategy&lt;String, Integer, ComplexFieldMapEntry&lt;String, Integer, T&gt;, T&gt; {\r\n    \r\n        /**\r\n         * Whether the user has programmatically set the map from column positions\r\n         * to field names.\r\n         */\r\n        private boolean columnsExplicitlySet = false;\r\n    \r\n        /**\r\n         * The map from column position to {@link BeanField}.\r\n         */\r\n        private FieldMapByPosition&lt;T&gt; fieldMap;\r\n    \r\n        /**\r\n         * Holds a {@link java.util.Comparator} to sort columns on writing.\r\n         */\r\n        private Comparator&lt;Integer&gt; writeOrder;\r\n    \r\n        /**\r\n         * Used to store a mapping from presumed input column index to desired\r\n         * output column index, as determined by applying {@link #writeOrder}.\r\n         */\r\n        private Integer[] columnIndexForWriting = null;\r\n    \r\n        /**\r\n         * Default constructor.\r\n         */\r\n        public ColumnPositionMappingStrategy() {\r\n        }\r\n    \r\n        /**\r\n         * There is no header per se for this mapping strategy, but this method\r\n         * checks the first line to determine how many fields are present and\r\n         * adjusts its field map accordingly.\r\n         */\r\n        // The rest of the Javadoc is inherited\r\n        @Override\r\n        public void captureHeader(CSVReader reader) throws IOException {\r\n            // Validation\r\n            if (type == null) {\r\n                throw new IllegalStateException(ResourceBundle\r\n                        .getBundle(ICSVParser.DEFAULT_BUNDLE_NAME, errorLocale)\r\n                        .getString(&quot;type.unset&quot;));\r\n            }\r\n    \r\n            String[] firstLine = reader.peek();\r\n            fieldMap.setMaxIndex(firstLine.length - 1);\r\n            if (!columnsExplicitlySet) {\r\n                headerIndex.clear();\r\n                for (FieldMapByPositionEntry entry : fieldMap) {\r\n                    Field f = entry.getField().getField();\r\n                    if (f.getAnnotation(CsvCustomBindByPosition.class) != null\r\n                            || f.getAnnotation(CsvBindAndSplitByPosition.class) != null\r\n                            || f.getAnnotation(CsvBindAndJoinByPosition.class) != null\r\n                            || f.getAnnotation(CsvBindByPosition.class) != null) {\r\n                        headerIndex.put(entry.getPosition(), f.getName().toUpperCase().trim());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @return {@inheritDoc} For this mapping strategy, it&#39;s simply\r\n         * {@code index} wrapped as an {@link java.lang.Integer}.\r\n         */\r\n        // The rest of the Javadoc is inherited\r\n        @Override\r\n        protected Object chooseMultivaluedFieldIndexFromHeaderIndex(int index) {\r\n            return Integer.valueOf(index);\r\n        }\r\n    \r\n        @Override\r\n        public BeanField&lt;T&gt; findField(int col) {\r\n            // If we have a mapping for changing the order of the columns on\r\n            // writing, be sure to use it.\r\n            if (columnIndexForWriting != null) {\r\n                return col &lt; columnIndexForWriting.length ? fieldMap.get(columnIndexForWriting[col]) : null;\r\n            }\r\n            return fieldMap.get(col);\r\n        }\r\n    \r\n        /**\r\n         * This method returns an empty array.\r\n         * The column position mapping strategy assumes that there is no header, and\r\n         * thus it also does not write one, accordingly.\r\n         *\r\n         * @return An empty array\r\n         */\r\n        // The rest of the Javadoc is inherited\r\n        @Override\r\n        public String[] generateHeader(T bean) throws CsvRequiredFieldEmptyException {\r\n            String[] h = super.generateHeader(bean);\r\n            columnIndexForWriting = new Integer[h.length];\r\n    \r\n            // Once we support Java 8, this might be nicer with Arrays.parallelSetAll().\r\n            for (int i = 0; i &lt; columnIndexForWriting.length; i++) {\r\n                columnIndexForWriting[i] = i;\r\n            }\r\n    \r\n            // Create the mapping for input column index to output column index.\r\n            Arrays.sort(columnIndexForWriting, writeOrder);\r\n            return ArrayUtils.EMPTY_STRING_ARRAY;\r\n        }\r\n    \r\n        /**\r\n         * Gets a column name.\r\n         *\r\n         * @param col Position of the column.\r\n         * @return Column name or null if col &amp;gt; number of mappings.\r\n         */\r\n        @Override\r\n        public String getColumnName(int col) {\r\n            return headerIndex.getByPosition(col);\r\n        }\r\n    \r\n        /**\r\n         * Retrieves the column mappings.\r\n         *\r\n         * @return String array with the column mappings.\r\n         */\r\n        public String[] getColumnMapping() {\r\n            return headerIndex.getHeaderIndex();\r\n        }\r\n    \r\n        /**\r\n         * Setter for the column mapping.\r\n         * This mapping is for reading. Use of this method in conjunction with\r\n         * writing is undefined.\r\n         *\r\n         * @param columnMapping Column names to be mapped.\r\n         */\r\n        public void setColumnMapping(String... columnMapping) {\r\n            if (columnMapping != null) {\r\n                headerIndex.initializeHeaderIndex(columnMapping);\r\n            } else {\r\n                headerIndex.clear();\r\n            }\r\n            columnsExplicitlySet = true;\r\n        }\r\n    \r\n        @Override\r\n        protected void loadFieldMap() throws CsvBadConverterException {\r\n            boolean required;\r\n            fieldMap = new FieldMapByPosition&lt;&gt;(errorLocale);\r\n            fieldMap.setColumnOrderOnWrite(writeOrder);\r\n    \r\n            for (Field field : loadFields(getType())) {\r\n                String fieldLocale, capture, format;\r\n    \r\n                // Custom converters always have precedence.\r\n                if (field.isAnnotationPresent(CsvCustomBindByPosition.class)) {\r\n                    CsvCustomBindByPosition annotation = field\r\n                            .getAnnotation(CsvCustomBindByPosition.class);\r\n                    Class&lt;? extends AbstractBeanField&gt; converter = annotation.converter();\r\n                    BeanField&lt;T&gt; bean = instantiateCustomConverter(converter);\r\n                    bean.setField(field);\r\n                    required = annotation.required();\r\n                    bean.setRequired(required);\r\n                    fieldMap.put(annotation.position(), bean);\r\n                }\r\n    \r\n                // Then check for a collection\r\n                else if (field.isAnnotationPresent(CsvBindAndSplitByPosition.class)) {\r\n                    CsvBindAndSplitByPosition annotation = field.getAnnotation(CsvBindAndSplitByPosition.class);\r\n                    required = annotation.required();\r\n                    fieldLocale = annotation.locale();\r\n                    String splitOn = annotation.splitOn();\r\n                    String writeDelimiter = annotation.writeDelimiter();\r\n                    Class&lt;? extends Collection&gt; collectionType = annotation.collectionType();\r\n                    Class&lt;?&gt; elementType = annotation.elementType();\r\n                    Class&lt;? extends AbstractCsvConverter&gt; splitConverter = annotation.converter();\r\n                    capture = annotation.capture();\r\n                    format = annotation.format();\r\n    \r\n                    CsvConverter converter = determineConverter(field, elementType, fieldLocale, splitConverter);\r\n                    fieldMap.put(annotation.position(), new BeanFieldSplit&lt;T&gt;(\r\n                            field, required, errorLocale, converter, splitOn,\r\n                            writeDelimiter, collectionType, capture, format));\r\n                }\r\n    \r\n                // Then check for a multi-column annotation\r\n                else if (field.isAnnotationPresent(CsvBindAndJoinByPosition.class)) {\r\n                    CsvBindAndJoinByPosition annotation = field.getAnnotation(CsvBindAndJoinByPosition.class);\r\n                    required = annotation.required();\r\n                    fieldLocale = annotation.locale();\r\n                    Class&lt;?&gt; elementType = annotation.elementType();\r\n                    Class&lt;? extends MultiValuedMap&gt; mapType = annotation.mapType();\r\n                    Class&lt;? extends AbstractCsvConverter&gt; joinConverter = annotation.converter();\r\n                    capture = annotation.capture();\r\n                    format = annotation.format();\r\n    \r\n                    CsvConverter converter = determineConverter(field, elementType, fieldLocale, joinConverter);\r\n                    fieldMap.putComplex(annotation.position(), new BeanFieldJoinIntegerIndex&lt;T&gt;(\r\n                            field, required, errorLocale, converter, mapType, capture, format));\r\n                }\r\n    \r\n                // Then it must be a bind by position.\r\n                else {\r\n                    CsvBindByPosition annotation = field.getAnnotation(CsvBindByPosition.class);\r\n                    required = annotation.required();\r\n                    fieldLocale = annotation.locale();\r\n                    capture = annotation.capture();\r\n                    format = annotation.format();\r\n                    CsvConverter converter = determineConverter(field, field.getType(), fieldLocale, null);\r\n    \r\n                    fieldMap.put(annotation.position(), new BeanFieldSingleValue&lt;T&gt;(\r\n                            field, required, errorLocale, converter, capture, format));\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void verifyLineLength(int numberOfFields) throws CsvRequiredFieldEmptyException {\r\n            if (!headerIndex.isEmpty()) {\r\n                BeanField f;\r\n                StringBuilder sb = null;\r\n                for (int i = numberOfFields; i &lt;= headerIndex.findMaxIndex(); i++) {\r\n                    f = findField(i);\r\n                    if (f != null &amp;&amp; f.isRequired()) {\r\n                        if (sb == null) {\r\n                            sb = new StringBuilder(ResourceBundle.getBundle(ICSVParser.DEFAULT_BUNDLE_NAME, errorLocale).getString(&quot;multiple.required.field.empty&quot;));\r\n                        }\r\n                        sb.append(&#39; &#39;);\r\n                        sb.append(f.getField().getName());\r\n                    }\r\n                }\r\n                if (sb != null) {\r\n                    throw new CsvRequiredFieldEmptyException(type, sb.toString());\r\n                }\r\n            }\r\n        }\r\n    \r\n        private List&lt;Field&gt; loadFields(Class&lt;? extends T&gt; cls) {\r\n            List&lt;Field&gt; fields = new LinkedList&lt;&gt;();\r\n            for (Field field : FieldUtils.getAllFields(cls)) {\r\n                if (field.isAnnotationPresent(CsvBindByPosition.class)\r\n                        || field.isAnnotationPresent(CsvCustomBindByPosition.class)\r\n                        || field.isAnnotationPresent(CsvBindAndJoinByPosition.class)\r\n                        || field.isAnnotationPresent(CsvBindAndSplitByPosition.class)) {\r\n                    fields.add(field);\r\n                }\r\n            }\r\n            setAnnotationDriven(!fields.isEmpty());\r\n            return fields;\r\n        }\r\n    \r\n        /**\r\n         * Returns the column position for the given column number.\r\n         * Yes, they&#39;re the same thing. For this mapping strategy, it&#39;s a simple\r\n         * conversion from an integer to a string.\r\n         */\r\n        // The rest of the Javadoc is inherited\r\n        @Override\r\n        public String findHeader(int col) {\r\n            return Integer.toString(col);\r\n        }\r\n    \r\n        @Override\r\n        protected FieldMap&lt;String, Integer, ? extends ComplexFieldMapEntry&lt;String, Integer, T&gt;, T&gt; getFieldMap() {\r\n            return fieldMap;\r\n        }\r\n    \r\n        /**\r\n         * Sets the {@link java.util.Comparator} to be used to sort columns when\r\n         * writing beans to a CSV file.\r\n         * Behavior of this method when used on a mapping strategy intended for\r\n         * reading data from a CSV source is not defined.\r\n         *\r\n         * @param writeOrder The {@link java.util.Comparator} to use. May be\r\n         *                   {@code null}, in which case the natural ordering is used.\r\n         * @since 4.3\r\n         */\r\n        public void setColumnOrderOnWrite(Comparator&lt;Integer&gt; writeOrder) {\r\n            this.writeOrder = writeOrder;\r\n            if (fieldMap != null) {\r\n                fieldMap.setColumnOrderOnWrite(this.writeOrder);\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to override a method from a class existing in an external jar?","body":"<p>I added an external dependency (open CSV) to my Gradle project. I wanted to override a particular method from that.</p>\n<ol>\n<li>I subclassed the required class in a new custom class</li>\n<li>But I can not override any methods in the super class. Even though they are public</li>\n</ol>\n<p>What will be the reason for this.? The Gradle dependencies exist in Library/Project and External Dependencies.</p>\n<pre><code>class CustomMappingStrategy&lt;T&gt; extends ColumnPositionMappingStrategy&lt;T&gt; {\n    private static final String[] HEADER = new String[]{&quot;TradeID&quot;, &quot;GWML GUID&quot;, &quot;MXML GUID&quot;, &quot;GWML File&quot;, &quot;MxML File&quot;, &quot;MxML Counterparty&quot;, &quot;GWML Counterparty&quot;};\n\n    @Override         //This is not working\n    public String[] generateHeader() {\n        return HEADER;\n    }\n}\n</code></pre>\n<p>The super class looks like:</p>\n<pre><code>package com.opencsv.bean;\n\nimport com.opencsv.CSVReader;\nimport com.opencsv.ICSVParser;\nimport com.opencsv.exceptions.CsvBadConverterException;\nimport com.opencsv.exceptions.CsvRequiredFieldEmptyException;\nimport org.apache.commons.collections4.MultiValuedMap;\nimport org.apache.commons.lang3.ArrayUtils;\nimport org.apache.commons.lang3.reflect.FieldUtils;\n\nimport java.io.IOException;\nimport java.lang.reflect.Field;\nimport java.util.*;\n\n/**\n * Allows for the mapping of columns with their positions. Using this strategy\n * without annotations ({@link com.opencsv.bean.CsvBindByPosition} or\n * {@link com.opencsv.bean.CsvCustomBindByPosition}) requires all the columns\n * to be present in the CSV file and for them to be in a particular order. Using\n * annotations allows one to specify arbitrary zero-based column numbers for\n * each bean member variable to be filled. Also this strategy requires that the\n * file does NOT have a header. That said, the main use of this strategy is\n * files that do not have headers.\n *\n * @param &lt;T&gt; Type of object that is being processed.\n */\npublic class ColumnPositionMappingStrategy&lt;T&gt; extends AbstractMappingStrategy&lt;String, Integer, ComplexFieldMapEntry&lt;String, Integer, T&gt;, T&gt; {\n\n    /**\n     * Whether the user has programmatically set the map from column positions\n     * to field names.\n     */\n    private boolean columnsExplicitlySet = false;\n\n    /**\n     * The map from column position to {@link BeanField}.\n     */\n    private FieldMapByPosition&lt;T&gt; fieldMap;\n\n    /**\n     * Holds a {@link java.util.Comparator} to sort columns on writing.\n     */\n    private Comparator&lt;Integer&gt; writeOrder;\n\n    /**\n     * Used to store a mapping from presumed input column index to desired\n     * output column index, as determined by applying {@link #writeOrder}.\n     */\n    private Integer[] columnIndexForWriting = null;\n\n    /**\n     * Default constructor.\n     */\n    public ColumnPositionMappingStrategy() {\n    }\n\n    /**\n     * There is no header per se for this mapping strategy, but this method\n     * checks the first line to determine how many fields are present and\n     * adjusts its field map accordingly.\n     */\n    // The rest of the Javadoc is inherited\n    @Override\n    public void captureHeader(CSVReader reader) throws IOException {\n        // Validation\n        if (type == null) {\n            throw new IllegalStateException(ResourceBundle\n                    .getBundle(ICSVParser.DEFAULT_BUNDLE_NAME, errorLocale)\n                    .getString(&quot;type.unset&quot;));\n        }\n\n        String[] firstLine = reader.peek();\n        fieldMap.setMaxIndex(firstLine.length - 1);\n        if (!columnsExplicitlySet) {\n            headerIndex.clear();\n            for (FieldMapByPositionEntry entry : fieldMap) {\n                Field f = entry.getField().getField();\n                if (f.getAnnotation(CsvCustomBindByPosition.class) != null\n                        || f.getAnnotation(CsvBindAndSplitByPosition.class) != null\n                        || f.getAnnotation(CsvBindAndJoinByPosition.class) != null\n                        || f.getAnnotation(CsvBindByPosition.class) != null) {\n                    headerIndex.put(entry.getPosition(), f.getName().toUpperCase().trim());\n                }\n            }\n        }\n    }\n\n    /**\n     * @return {@inheritDoc} For this mapping strategy, it's simply\n     * {@code index} wrapped as an {@link java.lang.Integer}.\n     */\n    // The rest of the Javadoc is inherited\n    @Override\n    protected Object chooseMultivaluedFieldIndexFromHeaderIndex(int index) {\n        return Integer.valueOf(index);\n    }\n\n    @Override\n    public BeanField&lt;T&gt; findField(int col) {\n        // If we have a mapping for changing the order of the columns on\n        // writing, be sure to use it.\n        if (columnIndexForWriting != null) {\n            return col &lt; columnIndexForWriting.length ? fieldMap.get(columnIndexForWriting[col]) : null;\n        }\n        return fieldMap.get(col);\n    }\n\n    /**\n     * This method returns an empty array.\n     * The column position mapping strategy assumes that there is no header, and\n     * thus it also does not write one, accordingly.\n     *\n     * @return An empty array\n     */\n    // The rest of the Javadoc is inherited\n    @Override\n    public String[] generateHeader(T bean) throws CsvRequiredFieldEmptyException {\n        String[] h = super.generateHeader(bean);\n        columnIndexForWriting = new Integer[h.length];\n\n        // Once we support Java 8, this might be nicer with Arrays.parallelSetAll().\n        for (int i = 0; i &lt; columnIndexForWriting.length; i++) {\n            columnIndexForWriting[i] = i;\n        }\n\n        // Create the mapping for input column index to output column index.\n        Arrays.sort(columnIndexForWriting, writeOrder);\n        return ArrayUtils.EMPTY_STRING_ARRAY;\n    }\n\n    /**\n     * Gets a column name.\n     *\n     * @param col Position of the column.\n     * @return Column name or null if col &amp;gt; number of mappings.\n     */\n    @Override\n    public String getColumnName(int col) {\n        return headerIndex.getByPosition(col);\n    }\n\n    /**\n     * Retrieves the column mappings.\n     *\n     * @return String array with the column mappings.\n     */\n    public String[] getColumnMapping() {\n        return headerIndex.getHeaderIndex();\n    }\n\n    /**\n     * Setter for the column mapping.\n     * This mapping is for reading. Use of this method in conjunction with\n     * writing is undefined.\n     *\n     * @param columnMapping Column names to be mapped.\n     */\n    public void setColumnMapping(String... columnMapping) {\n        if (columnMapping != null) {\n            headerIndex.initializeHeaderIndex(columnMapping);\n        } else {\n            headerIndex.clear();\n        }\n        columnsExplicitlySet = true;\n    }\n\n    @Override\n    protected void loadFieldMap() throws CsvBadConverterException {\n        boolean required;\n        fieldMap = new FieldMapByPosition&lt;&gt;(errorLocale);\n        fieldMap.setColumnOrderOnWrite(writeOrder);\n\n        for (Field field : loadFields(getType())) {\n            String fieldLocale, capture, format;\n\n            // Custom converters always have precedence.\n            if (field.isAnnotationPresent(CsvCustomBindByPosition.class)) {\n                CsvCustomBindByPosition annotation = field\n                        .getAnnotation(CsvCustomBindByPosition.class);\n                Class&lt;? extends AbstractBeanField&gt; converter = annotation.converter();\n                BeanField&lt;T&gt; bean = instantiateCustomConverter(converter);\n                bean.setField(field);\n                required = annotation.required();\n                bean.setRequired(required);\n                fieldMap.put(annotation.position(), bean);\n            }\n\n            // Then check for a collection\n            else if (field.isAnnotationPresent(CsvBindAndSplitByPosition.class)) {\n                CsvBindAndSplitByPosition annotation = field.getAnnotation(CsvBindAndSplitByPosition.class);\n                required = annotation.required();\n                fieldLocale = annotation.locale();\n                String splitOn = annotation.splitOn();\n                String writeDelimiter = annotation.writeDelimiter();\n                Class&lt;? extends Collection&gt; collectionType = annotation.collectionType();\n                Class&lt;?&gt; elementType = annotation.elementType();\n                Class&lt;? extends AbstractCsvConverter&gt; splitConverter = annotation.converter();\n                capture = annotation.capture();\n                format = annotation.format();\n\n                CsvConverter converter = determineConverter(field, elementType, fieldLocale, splitConverter);\n                fieldMap.put(annotation.position(), new BeanFieldSplit&lt;T&gt;(\n                        field, required, errorLocale, converter, splitOn,\n                        writeDelimiter, collectionType, capture, format));\n            }\n\n            // Then check for a multi-column annotation\n            else if (field.isAnnotationPresent(CsvBindAndJoinByPosition.class)) {\n                CsvBindAndJoinByPosition annotation = field.getAnnotation(CsvBindAndJoinByPosition.class);\n                required = annotation.required();\n                fieldLocale = annotation.locale();\n                Class&lt;?&gt; elementType = annotation.elementType();\n                Class&lt;? extends MultiValuedMap&gt; mapType = annotation.mapType();\n                Class&lt;? extends AbstractCsvConverter&gt; joinConverter = annotation.converter();\n                capture = annotation.capture();\n                format = annotation.format();\n\n                CsvConverter converter = determineConverter(field, elementType, fieldLocale, joinConverter);\n                fieldMap.putComplex(annotation.position(), new BeanFieldJoinIntegerIndex&lt;T&gt;(\n                        field, required, errorLocale, converter, mapType, capture, format));\n            }\n\n            // Then it must be a bind by position.\n            else {\n                CsvBindByPosition annotation = field.getAnnotation(CsvBindByPosition.class);\n                required = annotation.required();\n                fieldLocale = annotation.locale();\n                capture = annotation.capture();\n                format = annotation.format();\n                CsvConverter converter = determineConverter(field, field.getType(), fieldLocale, null);\n\n                fieldMap.put(annotation.position(), new BeanFieldSingleValue&lt;T&gt;(\n                        field, required, errorLocale, converter, capture, format));\n            }\n        }\n    }\n\n    @Override\n    public void verifyLineLength(int numberOfFields) throws CsvRequiredFieldEmptyException {\n        if (!headerIndex.isEmpty()) {\n            BeanField f;\n            StringBuilder sb = null;\n            for (int i = numberOfFields; i &lt;= headerIndex.findMaxIndex(); i++) {\n                f = findField(i);\n                if (f != null &amp;&amp; f.isRequired()) {\n                    if (sb == null) {\n                        sb = new StringBuilder(ResourceBundle.getBundle(ICSVParser.DEFAULT_BUNDLE_NAME, errorLocale).getString(&quot;multiple.required.field.empty&quot;));\n                    }\n                    sb.append(' ');\n                    sb.append(f.getField().getName());\n                }\n            }\n            if (sb != null) {\n                throw new CsvRequiredFieldEmptyException(type, sb.toString());\n            }\n        }\n    }\n\n    private List&lt;Field&gt; loadFields(Class&lt;? extends T&gt; cls) {\n        List&lt;Field&gt; fields = new LinkedList&lt;&gt;();\n        for (Field field : FieldUtils.getAllFields(cls)) {\n            if (field.isAnnotationPresent(CsvBindByPosition.class)\n                    || field.isAnnotationPresent(CsvCustomBindByPosition.class)\n                    || field.isAnnotationPresent(CsvBindAndJoinByPosition.class)\n                    || field.isAnnotationPresent(CsvBindAndSplitByPosition.class)) {\n                fields.add(field);\n            }\n        }\n        setAnnotationDriven(!fields.isEmpty());\n        return fields;\n    }\n\n    /**\n     * Returns the column position for the given column number.\n     * Yes, they're the same thing. For this mapping strategy, it's a simple\n     * conversion from an integer to a string.\n     */\n    // The rest of the Javadoc is inherited\n    @Override\n    public String findHeader(int col) {\n        return Integer.toString(col);\n    }\n\n    @Override\n    protected FieldMap&lt;String, Integer, ? extends ComplexFieldMapEntry&lt;String, Integer, T&gt;, T&gt; getFieldMap() {\n        return fieldMap;\n    }\n\n    /**\n     * Sets the {@link java.util.Comparator} to be used to sort columns when\n     * writing beans to a CSV file.\n     * Behavior of this method when used on a mapping strategy intended for\n     * reading data from a CSV source is not defined.\n     *\n     * @param writeOrder The {@link java.util.Comparator} to use. May be\n     *                   {@code null}, in which case the natural ordering is used.\n     * @since 4.3\n     */\n    public void setColumnOrderOnWrite(Comparator&lt;Integer&gt; writeOrder) {\n        this.writeOrder = writeOrder;\n        if (fieldMap != null) {\n            fieldMap.setColumnOrderOnWrite(this.writeOrder);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","urlencode","urldecode"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1662978203,"post_id":73687690,"comment_id":130122892,"body_markdown":"Why would you expect `offset=1` when your input ends with `offset=2`?","body":"Why would you expect <code>offset=1</code> when your input ends with <code>offset=2</code>?"},{"owner":{"account_id":26312271,"reputation":1,"user_id":19975617,"display_name":"string"},"score":0,"creation_date":1662978560,"post_id":73687690,"comment_id":130123000,"body_markdown":"typo error ,now its corrected","body":"typo error ,now its corrected"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1662979044,"post_id":73687690,"comment_id":130123176,"body_markdown":"it still says `offset=2` in the code snippet. Also, the API key differs.","body":"it still says <code>offset=2</code> in the code snippet. Also, the API key differs."}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662978419,"creation_date":1662978419,"answer_id":73687833,"question_id":73687690,"body_markdown":"Your string is double-URL encoded, see https://ideone.com/CQQbPz:\r\n\r\n```\r\nString url1 = &quot;https://dev/ABC/v1/XYZ?itemnumber%255Bin%255D=%255B3001%252C3005%252C202%255D&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=2&quot;;\r\n\r\nSystem.out.println(URLDecoder.decode(url1, &quot;UTF-8&quot;));\r\nSystem.out.println(URLDecoder.decode(URLDecoder.decode(url1, &quot;UTF-8&quot;), &quot;UTF-8&quot;));\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nhttps://dev/ABC/v1/XYZ?itemnumber%5Bin%5D=%5B3001%2C3005%2C202%5D&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=2\r\nhttps://dev/ABC/v1/XYZ?itemnumber[in]=[3001,3005,202]&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=2\r\n```","title":"How to avoid special character from URL using java","body":"<p>Your string is double-URL encoded, see <a href=\"https://ideone.com/CQQbPz\" rel=\"nofollow noreferrer\">https://ideone.com/CQQbPz</a>:</p>\n<pre><code>String url1 = &quot;https://dev/ABC/v1/XYZ?itemnumber%255Bin%255D=%255B3001%252C3005%252C202%255D&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=2&quot;;\n\nSystem.out.println(URLDecoder.decode(url1, &quot;UTF-8&quot;));\nSystem.out.println(URLDecoder.decode(URLDecoder.decode(url1, &quot;UTF-8&quot;), &quot;UTF-8&quot;));\n</code></pre>\n<p>Output:</p>\n<pre><code>https://dev/ABC/v1/XYZ?itemnumber%5Bin%5D=%5B3001%2C3005%2C202%5D&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=2\nhttps://dev/ABC/v1/XYZ?itemnumber[in]=[3001,3005,202]&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1662978482,"creation_date":1662978482,"answer_id":73687842,"question_id":73687690,"body_markdown":"Browsers and many other http programs convert illegitimate url request symbols to URL encoding scheme that place a % percent sign in front of two numerals. Before use, use \r\n\r\n    String decoded = java.net.URLDecoder.decode(request);","title":"How to avoid special character from URL using java","body":"<p>Browsers and many other http programs convert illegitimate url request symbols to URL encoding scheme that place a % percent sign in front of two numerals. Before use, use</p>\n<pre><code>String decoded = java.net.URLDecoder.decode(request);\n</code></pre>\n"}],"owner":{"account_id":26312271,"reputation":1,"user_id":19975617,"display_name":"string"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1662985850,"creation_date":1662977683,"question_id":73687690,"body_markdown":"I am using below code to eliminate the special characters from URL:\r\n\r\n\r\n\r\n    String url1 = &quot;https://dev/ABC/v1/XYZ?itemnumber%255Bin%255D=%255B3001%252C3005%252C202%255D&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=2&quot;;\r\n\r\n\tString decodedURL = URLDecoder.decode(url1, &quot;UTF-8&quot;);\r\n\r\n\tSystem.out.println(decodedURL);\r\n\r\nExpected output:\r\n&gt;https://dev/ABC/v1/XYZ?itemnumber[in]=[3001,3005,20]&amp;limit=2&amp;offset=1&amp;apikey=4zVYEk2Xg8zvwYxNnW\r\n\r\n\r\nError output:\r\n&gt;https://dev/ABC/v1/XYZ?itemnumber%5Bin%5D=%5B3001%2C3005%2C202%5D&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=1\r\n\r\n\r\n\r\n","title":"How to avoid special character from URL using java","body":"<p>I am using below code to eliminate the special characters from URL:</p>\n<pre><code>String url1 = &quot;https://dev/ABC/v1/XYZ?itemnumber%255Bin%255D=%255B3001%252C3005%252C202%255D&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=2&quot;;\n\nString decodedURL = URLDecoder.decode(url1, &quot;UTF-8&quot;);\n\nSystem.out.println(decodedURL);\n</code></pre>\n<p>Expected output:</p>\n<blockquote>\n<p>https://dev/ABC/v1/XYZ?itemnumber[in]=[3001,3005,20]&amp;limit=2&amp;offset=1&amp;apikey=4zVYEk2Xg8zvwYxNnW</p>\n</blockquote>\n<p>Error output:</p>\n<blockquote>\n<p>https://dev/ABC/v1/XYZ?itemnumber%5Bin%5D=%5B3001%2C3005%2C202%5D&amp;limit=2&amp;apikey=4zVYEk2Xg8zvwYxNnW&amp;offset=1</p>\n</blockquote>\n"},{"tags":["java","apache-poi","pivot-table"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1662942678,"post_id":73683445,"comment_id":130115927,"body_markdown":"Please [edit] your question to indicate how this question differs from your previous [question](https://stackoverflow.com/q/73655197/230513) on the topic.","body":"Please <a href=\"https://stackoverflow.com/posts/73683445/edit\">edit</a> your question to indicate how this question differs from your previous <a href=\"https://stackoverflow.com/q/73655197/230513\">question</a> on the topic."},{"owner":{"account_id":11884292,"reputation":43,"user_id":8697117,"display_name":"user8697117"},"score":0,"creation_date":1662945150,"post_id":73683445,"comment_id":130116167,"body_markdown":"@trashgod - previous question was denoting more of the exception i was getting which i mentioned in the previous question. This question has no exception but unable to get the expected output. And please if you dont have the proper answer for the question and just to mention that its a previous question reduces the chance of someone looking and answer it.","body":"@trashgod - previous question was denoting more of the exception i was getting which i mentioned in the previous question. This question has no exception but unable to get the expected output. And please if you dont have the proper answer for the question and just to mention that its a previous question reduces the chance of someone looking and answer it."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1662985361,"post_id":73683445,"comment_id":130125441,"body_markdown":"You are correct: as I can&#39;t reproduce your result, I don&#39;t have a proper _answer_ for the question; my _comment_ was for the convenience of someone who might have an answer.","body":"You are correct: as I can&#39;t reproduce your result, I don&#39;t have a proper <i>answer</i> for the question; my <i>comment</i> was for the convenience of someone who might have an answer."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1663177831,"post_id":73683445,"comment_id":130180190,"body_markdown":"Why do you think that `indexOfSortColumn` should be `1`? Shouldn&#39;t that be &quot;the column which is showing the months data&quot;? So, either `5`, `12` or `19`?","body":"Why do you think that <code>indexOfSortColumn</code> should be <code>1</code>? Shouldn&#39;t that be &quot;the column which is showing the months data&quot;? So, either <code>5</code>, <code>12</code> or <code>19</code>?"}],"owner":{"account_id":11884292,"reputation":43,"user_id":8697117,"display_name":"user8697117"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662985575,"creation_date":1662941893,"question_id":73683445,"body_markdown":"As shown [here][1], I am generating the pivot table using the apache POI. When the excel sheet is generated with pivot table, I want it to sort the column which is showing the months data in chronological order by month (ascending). Below is the sample code used to generate the pivot table.\r\n\r\n    XSSFSheet dataSheet\r\n            = workbook.createSheet(&quot;DataSheet&quot;);\r\n    workbook = dataWriteService.writeToSheet(workbook, dataSheet, dataResponseList); //data is written in the sheet\r\n    XSSFSheet sheet = workbook.createSheet(&quot;PIVOTSHEET&quot;);\r\n\r\n    AreaReference ar = new AreaReference(topLeft, botRight, SpreadsheetVersion.EXCEL2007);\r\n    CellReference cr1 = new CellReference(&quot;A1&quot;);\r\n    XSSFPivotTable pivotTable1 = sheet.createPivotTable(ar, cr1, dataSheet);\r\n    pivotTable1.addRowLabel(5);\r\n    pivotTable1.addRowLabel(12);\r\n    pivotTable1.addColLabel(19);\r\n    final File xlsFile = new File(&quot;dataWithPivot.xlsm&quot;);\r\n    FileOutputStream fileOutputStream = new FileOutputStream(xlsFile);\r\n    workbook.write(fileOutputStream);\r\n        \r\nBelow is the sample code I have been trying to sort pivot table by column and not worked.\r\n   \r\n\r\n    int indexOfSortColumn = 1;\r\n    pivotTable.getCTPivotTableDefinition()\r\n            .getPivotFields()\r\n            .getPivotFieldArray(indexOfSortColumn)\r\n            .setSortType(STFieldSortType.ASCENDING);\r\n    //below is the second tried approach and didnot work\r\n    CTPivotField fld = pivotTable1.getCTPivotTableDefinition().getPivotFields().getPivotFieldList().get(1);\r\n    fld.setSortType(STFieldSortType.ASCENDING);\r\n\r\nbuild.gradle\r\n\r\n    implementation group: &#39;org.apache.poi&#39;, name: &#39;poi-ooxml-full&#39;, version: &#39;5.2.2&#39;\r\n    implementation group: &#39;org.apache.poi&#39;, name: &#39;ooxml-schemas&#39;, version: &#39;1.1&#39;\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/73655197/230513\r\n\r\n","title":"Unable to sort by column of apache POI pivot table","body":"<p>As shown <a href=\"https://stackoverflow.com/q/73655197/230513\">here</a>, I am generating the pivot table using the apache POI. When the excel sheet is generated with pivot table, I want it to sort the column which is showing the months data in chronological order by month (ascending). Below is the sample code used to generate the pivot table.</p>\n<pre><code>XSSFSheet dataSheet\n        = workbook.createSheet(&quot;DataSheet&quot;);\nworkbook = dataWriteService.writeToSheet(workbook, dataSheet, dataResponseList); //data is written in the sheet\nXSSFSheet sheet = workbook.createSheet(&quot;PIVOTSHEET&quot;);\n\nAreaReference ar = new AreaReference(topLeft, botRight, SpreadsheetVersion.EXCEL2007);\nCellReference cr1 = new CellReference(&quot;A1&quot;);\nXSSFPivotTable pivotTable1 = sheet.createPivotTable(ar, cr1, dataSheet);\npivotTable1.addRowLabel(5);\npivotTable1.addRowLabel(12);\npivotTable1.addColLabel(19);\nfinal File xlsFile = new File(&quot;dataWithPivot.xlsm&quot;);\nFileOutputStream fileOutputStream = new FileOutputStream(xlsFile);\nworkbook.write(fileOutputStream);\n    \n</code></pre>\n<p>Below is the sample code I have been trying to sort pivot table by column and not worked.</p>\n<pre><code>int indexOfSortColumn = 1;\npivotTable.getCTPivotTableDefinition()\n        .getPivotFields()\n        .getPivotFieldArray(indexOfSortColumn)\n        .setSortType(STFieldSortType.ASCENDING);\n//below is the second tried approach and didnot work\nCTPivotField fld = pivotTable1.getCTPivotTableDefinition().getPivotFields().getPivotFieldList().get(1);\nfld.setSortType(STFieldSortType.ASCENDING);\n</code></pre>\n<p>build.gradle</p>\n<pre><code>implementation group: 'org.apache.poi', name: 'poi-ooxml-full', version: '5.2.2'\nimplementation group: 'org.apache.poi', name: 'ooxml-schemas', version: '1.1'\n</code></pre>\n"},{"tags":["java","docker","spring-boot","jar","docker-compose"],"comments":[{"owner":{"account_id":1439863,"reputation":5483,"user_id":1360318,"display_name":"mbuechmann"},"score":1,"creation_date":1525705123,"post_id":50216280,"comment_id":87451154,"body_markdown":"This is hard to answer without seeing any error message. Could you run `docker-compose logs spring` and post the output?","body":"This is hard to answer without seeing any error message. Could you run <code>docker-compose logs spring</code> and post the output?"},{"owner":{"account_id":7203923,"reputation":9885,"user_id":5500224,"accept_rate":83,"display_name":"Bukharov Sergey"},"score":0,"creation_date":1525709911,"post_id":50216280,"comment_id":87453939,"body_markdown":"Are you sure you have `build/libs/spring-project-0.1.0.jar` in volume `/my/project/dir`?","body":"Are you sure you have <code>build&#47;libs&#47;spring-project-0.1.0.jar</code> in volume <code>&#47;my&#47;project&#47;dir</code>?"},{"owner":{"account_id":7507439,"reputation":1018,"user_id":5703530,"accept_rate":57,"display_name":"Merve Sahin"},"score":0,"creation_date":1525717537,"post_id":50216280,"comment_id":87457715,"body_markdown":"@mbuechmann I added the logs","body":"@mbuechmann I added the logs"},{"owner":{"account_id":7507439,"reputation":1018,"user_id":5703530,"accept_rate":57,"display_name":"Merve Sahin"},"score":0,"creation_date":1525717625,"post_id":50216280,"comment_id":87457760,"body_markdown":"@BukharovSergey I am very certain it exists. When I run `java -jar /my/project/dir/build/libs/spring-project-0.1.0.jar` on the local machine the application launches.","body":"@BukharovSergey I am very certain it exists. When I run <code>java -jar &#47;my&#47;project&#47;dir&#47;build&#47;libs&#47;spring-project-0.1.0.jar</code> on the local machine the application launches."}],"answers":[{"tags":[],"owner":{"account_id":4180449,"reputation":2218,"user_id":3425640,"display_name":"trust512"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1525729317,"creation_date":1525727985,"answer_id":50222583,"question_id":50216280,"body_markdown":"I don&#39;t see you copying the `jar` into the container anywhere. You should try moving a `VOLUME` declaration from `Dockerfile` to the `compose` file into the `spring` service  like this:\r\n\r\n      volumes:\r\n        - /my/project/dir:/app\r\n\r\nAnd then inside Dockerfile you should point to the dir:\r\n\r\n    ENTRYPOINT [ &quot;java&quot;,&quot;-jar&quot;,&quot;/app/build/libs/spring-project-0.1.0.jar&quot; ]\r\n\r\nLater on if you&#39;d like to deploy it (for example) you should copy the project files directly into the image instead of utilizing the `volumes` approach. So in `Dockerfile` you&#39;d then do:\r\n\r\n    COPY . /app\r\n\r\ninstead of `VOLUME [..]`\r\n\r\n**Putting it all together:**\r\n\r\n**development:**\r\n\r\nDockerfile:\r\n\r\n    FROM tomcat:9-jre8\r\n    RUN apt-get update &amp;&amp; apt-get install librrds-perl rrdtool -y\r\n    ENTRYPOINT [ &quot;java&quot;,&quot;-jar&quot;,&quot;/app/build/libs/spring-project-0.1.0.jar&quot; ]\r\n\r\ncompose-file:\r\n\r\n    version: &#39;2&#39;\r\n    services:\r\n        [..]\r\n        spring:\r\n           container_name: spring-boot-project\r\n           build: .\r\n           links:\r\n             - db:db1\r\n             - db2:db2\r\n           depends_on:\r\n             - db\r\n             - db2\r\n           ports:\r\n             - &quot;8081:8081&quot;\r\n           restart: always\r\n           volumes:\r\n             - /my/project/dir:/app\r\n\r\n**deployment:**\r\n\r\nDockerfile (that is placed inside project&#39;s folder, docker build requires it&#39;s build context to be in a current directory):\r\n\r\n    FROM tomcat:9-jre8\r\n    RUN apt-get update &amp;&amp; apt-get install librrds-perl rrdtool -y\r\n    COPY . /app\r\n    ENTRYPOINT [ &quot;java&quot;,&quot;-jar&quot;,&quot;/app/build/libs/spring-project-0.1.0.jar&quot; ]\r\n\r\ncompose-file:\r\n\r\n    version: &#39;2&#39;\r\n    services:\r\n        [..]\r\n        spring:\r\n           container_name: spring-boot-project\r\n           build: .\r\n           links:\r\n             - db:db1\r\n             - db2:db2\r\n           depends_on:\r\n             - db\r\n             - db2\r\n           expose:\r\n             - &quot;8081&quot;","title":"Docker unable to access jar file","body":"<p>I don't see you copying the <code>jar</code> into the container anywhere. You should try moving a <code>VOLUME</code> declaration from <code>Dockerfile</code> to the <code>compose</code> file into the <code>spring</code> service  like this:</p>\n\n<pre><code>  volumes:\n    - /my/project/dir:/app\n</code></pre>\n\n<p>And then inside Dockerfile you should point to the dir:</p>\n\n<pre><code>ENTRYPOINT [ \"java\",\"-jar\",\"/app/build/libs/spring-project-0.1.0.jar\" ]\n</code></pre>\n\n<p>Later on if you'd like to deploy it (for example) you should copy the project files directly into the image instead of utilizing the <code>volumes</code> approach. So in <code>Dockerfile</code> you'd then do:</p>\n\n<pre><code>COPY . /app\n</code></pre>\n\n<p>instead of <code>VOLUME [..]</code></p>\n\n<p><strong>Putting it all together:</strong></p>\n\n<p><strong>development:</strong></p>\n\n<p>Dockerfile:</p>\n\n<pre><code>FROM tomcat:9-jre8\nRUN apt-get update &amp;&amp; apt-get install librrds-perl rrdtool -y\nENTRYPOINT [ \"java\",\"-jar\",\"/app/build/libs/spring-project-0.1.0.jar\" ]\n</code></pre>\n\n<p>compose-file:</p>\n\n<pre><code>version: '2'\nservices:\n    [..]\n    spring:\n       container_name: spring-boot-project\n       build: .\n       links:\n         - db:db1\n         - db2:db2\n       depends_on:\n         - db\n         - db2\n       ports:\n         - \"8081:8081\"\n       restart: always\n       volumes:\n         - /my/project/dir:/app\n</code></pre>\n\n<p><strong>deployment:</strong></p>\n\n<p>Dockerfile (that is placed inside project's folder, docker build requires it's build context to be in a current directory):</p>\n\n<pre><code>FROM tomcat:9-jre8\nRUN apt-get update &amp;&amp; apt-get install librrds-perl rrdtool -y\nCOPY . /app\nENTRYPOINT [ \"java\",\"-jar\",\"/app/build/libs/spring-project-0.1.0.jar\" ]\n</code></pre>\n\n<p>compose-file:</p>\n\n<pre><code>version: '2'\nservices:\n    [..]\n    spring:\n       container_name: spring-boot-project\n       build: .\n       links:\n         - db:db1\n         - db2:db2\n       depends_on:\n         - db\n         - db2\n       expose:\n         - \"8081\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5859243,"reputation":6929,"user_id":4615540,"accept_rate":0,"display_name":"Maheshvirus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662985189,"creation_date":1662973055,"answer_id":73686775,"question_id":50216280,"body_markdown":"If you are using `Spring-Boot` Project with `Maven` build. Try with below \r\n\r\n**Dockerfile**.\r\n\r\n    FROM maven:3.8.4-openjdk-17 as maven-builder\r\n    COPY src /app/src\r\n    COPY pom.xml /app\r\n    \r\n    RUN mvn -f /app/pom.xml clean package -DskipTests\r\n    FROM openjdk:17-alpine\r\n    \r\n    COPY --from=maven-builder app/target/dockube-spring-boot.jar /app-service/dockube-spring-boot.jar\r\n    WORKDIR /app-service\r\n    \r\n    EXPOSE 8080\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;dockube-spring-boot.jar&quot;]\r\n\r\n\r\n&gt; dockube-spring-boot.jar // replace with your generated jar name\r\n\r\nHere is the [Sample Code Available][1] \r\n\r\n\r\n  [1]: https://github.com/Maheshbhusanoor/dockube-spring-boot","title":"Docker unable to access jar file","body":"<p>If you are using <code>Spring-Boot</code> Project with <code>Maven</code> build. Try with below</p>\n<p><strong>Dockerfile</strong>.</p>\n<pre><code>FROM maven:3.8.4-openjdk-17 as maven-builder\nCOPY src /app/src\nCOPY pom.xml /app\n\nRUN mvn -f /app/pom.xml clean package -DskipTests\nFROM openjdk:17-alpine\n\nCOPY --from=maven-builder app/target/dockube-spring-boot.jar /app-service/dockube-spring-boot.jar\nWORKDIR /app-service\n\nEXPOSE 8080\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;dockube-spring-boot.jar&quot;]\n</code></pre>\n<blockquote>\n<p>dockube-spring-boot.jar // replace with your generated jar name</p>\n</blockquote>\n<p>Here is the <a href=\"https://github.com/Maheshbhusanoor/dockube-spring-boot\" rel=\"nofollow noreferrer\">Sample Code Available</a></p>\n"}],"owner":{"account_id":7507439,"reputation":1018,"user_id":5703530,"accept_rate":57,"display_name":"Merve Sahin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59212,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":50222583,"answer_count":2,"score":7,"last_activity_date":1662985189,"creation_date":1525702165,"question_id":50216280,"body_markdown":"The docker container is not able to access the jar file, that is being accessed over the mount point `/my/project/dir`.\r\nI am certain it is not a permission issue, because I changed the access rights locally, so it should be able to read/write/execute it.\r\n\r\nThis is the `Dockerfile`:\r\n\r\n    FROM tomcat:9-jre8\r\n    RUN apt-get update &amp;&amp; apt-get install librrds-perl rrdtool -y\r\n    VOLUME [&quot;/data/rrdtool&quot;, &quot;/my/project/dir&quot;]\r\n    ENTRYPOINT [ &quot;java&quot;,&quot;-jar&quot;,&quot;/my/project/dir/build/libs/spring-project-0.1.0.jar&quot; ]\r\n\r\nAnd this is the `docker-compose.yml` file:\r\n\r\n    version: &#39;2&#39;\r\n    services:\r\n     db:\r\n       container_name: db1\r\n       image: mysql:8\r\n       restart: always\r\n       environment:\r\n         MYSQL_ROOT_PASSWORD: password123\r\n         MYSQL_USER: user123\r\n         MYSQL_PASSWORD: pasw\r\n         MYSQL_DATABASE: mydb\r\n       expose:\r\n         - &quot;3307&quot;\r\n     db2:\r\n       container_name: db2\r\n       image: mysql:8\r\n       restart: always\r\n       environment:\r\n         MYSQL_ROOT_PASSWORD: password123\r\n         MYSQL_USER: user123\r\n         MYSQL_PASSWORD: pasw\r\n         MYSQL_DATABASE: mydb2\r\n       expose:\r\n         - &quot;3308&quot;\r\n     spring:\r\n       container_name: spring-boot-project\r\n       build: \r\n         context: ./\r\n         dockerfile: Dockerfile\r\n       links:\r\n         - db:db1\r\n         - db2:db2\r\n       depends_on:\r\n         - db\r\n         - db2\r\n       expose:\r\n         - &quot;8081&quot;\r\n       ports:\r\n         - &quot;8081:8081&quot;\r\n       restart: always\r\n\r\n   This is the output from `docker-compose logs spring`:\r\n\r\n    Error: Unable to access jarfile /my/project/dir/build/libs/spring-project-0.1.0.jar","title":"Docker unable to access jar file","body":"<p>The docker container is not able to access the jar file, that is being accessed over the mount point <code>/my/project/dir</code>.\nI am certain it is not a permission issue, because I changed the access rights locally, so it should be able to read/write/execute it.</p>\n\n<p>This is the <code>Dockerfile</code>:</p>\n\n<pre><code>FROM tomcat:9-jre8\nRUN apt-get update &amp;&amp; apt-get install librrds-perl rrdtool -y\nVOLUME [\"/data/rrdtool\", \"/my/project/dir\"]\nENTRYPOINT [ \"java\",\"-jar\",\"/my/project/dir/build/libs/spring-project-0.1.0.jar\" ]\n</code></pre>\n\n<p>And this is the <code>docker-compose.yml</code> file:</p>\n\n<pre><code>version: '2'\nservices:\n db:\n   container_name: db1\n   image: mysql:8\n   restart: always\n   environment:\n     MYSQL_ROOT_PASSWORD: password123\n     MYSQL_USER: user123\n     MYSQL_PASSWORD: pasw\n     MYSQL_DATABASE: mydb\n   expose:\n     - \"3307\"\n db2:\n   container_name: db2\n   image: mysql:8\n   restart: always\n   environment:\n     MYSQL_ROOT_PASSWORD: password123\n     MYSQL_USER: user123\n     MYSQL_PASSWORD: pasw\n     MYSQL_DATABASE: mydb2\n   expose:\n     - \"3308\"\n spring:\n   container_name: spring-boot-project\n   build: \n     context: ./\n     dockerfile: Dockerfile\n   links:\n     - db:db1\n     - db2:db2\n   depends_on:\n     - db\n     - db2\n   expose:\n     - \"8081\"\n   ports:\n     - \"8081:8081\"\n   restart: always\n</code></pre>\n\n<p>This is the output from <code>docker-compose logs spring</code>:</p>\n\n<pre><code>Error: Unable to access jarfile /my/project/dir/build/libs/spring-project-0.1.0.jar\n</code></pre>\n"},{"tags":["java","audio","playwright","playwright-java"],"answers":[{"tags":[],"owner":{"account_id":26217181,"reputation":96,"user_id":19895163,"display_name":"Lilpercy11"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662985156,"creation_date":1662985156,"answer_id":73689164,"question_id":73568290,"body_markdown":"For anyone facing the same issue I was having, check out FMedia once installed you can call the program via the command line and therefore Java by using the Java.Lang.Process library. I did : Process p = Runtime.getRuntime().exec(fmedia --record --dev-loopback=0 -o OutputFile.wav --globcmd=listen --until=5); This allowed me to record all system audio for 5 seconds. The --globcmd command also means you can stop the recording using another process if you wish. Check out FMedia documentation for more information or their GitHub page. https://github.com/stsaz/fmedia#install\r\nIf anyone finds a more elegant solution or a native java solution please feel free to add your suggestion below, I just thought I would answer this thread for anyone else in my position.","title":"How to record browser/system audio using Java/Playwright","body":"<p>For anyone facing the same issue I was having, check out FMedia once installed you can call the program via the command line and therefore Java by using the Java.Lang.Process library. I did : Process p = Runtime.getRuntime().exec(fmedia --record --dev-loopback=0 -o OutputFile.wav --globcmd=listen --until=5); This allowed me to record all system audio for 5 seconds. The --globcmd command also means you can stop the recording using another process if you wish. Check out FMedia documentation for more information or their GitHub page. <a href=\"https://github.com/stsaz/fmedia#install\" rel=\"nofollow noreferrer\">https://github.com/stsaz/fmedia#install</a>\nIf anyone finds a more elegant solution or a native java solution please feel free to add your suggestion below, I just thought I would answer this thread for anyone else in my position.</p>\n"}],"owner":{"account_id":26217181,"reputation":96,"user_id":19895163,"display_name":"Lilpercy11"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":528,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73689164,"answer_count":1,"score":0,"last_activity_date":1662985156,"creation_date":1662030189,"question_id":73568290,"body_markdown":"I am currently using Playwright to interact with a webpage that makes calls to people. I need to record the call for the first 5 seconds and save the file locally for playback after execution. I cannot find a good solution for this anywhere. Any help would be greatly appreciated.\r\n\r\nI need to record the browser audio for 5 seconds and store it.\r\nI don&#39;t mind if I have to capture the entire system audio but would prefer if I could just capture the browser audio.\r\nCurrently using Java and Playwright\r\nOS : Windows 10\r\n","title":"How to record browser/system audio using Java/Playwright","body":"<p>I am currently using Playwright to interact with a webpage that makes calls to people. I need to record the call for the first 5 seconds and save the file locally for playback after execution. I cannot find a good solution for this anywhere. Any help would be greatly appreciated.</p>\n<p>I need to record the browser audio for 5 seconds and store it.\nI don't mind if I have to capture the entire system audio but would prefer if I could just capture the browser audio.\nCurrently using Java and Playwright\nOS : Windows 10</p>\n"},{"tags":["java","selenium"],"answers":[{"tags":[],"owner":{"account_id":6244293,"reputation":3872,"user_id":4856814,"display_name":"murali selenium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662984762,"creation_date":1462356834,"answer_id":37024742,"question_id":37024194,"body_markdown":"You have to use like this\r\n\r\n\r\n      System.out.println(&quot;Outer HTML for Home Team cell&quot; + row.findElement(By.xpath(&quot;td[contains(@class,&#39;team-a&#39;)]&quot;)).getAttribute(&quot;outerHTML&quot;));\r\n\r\nThen it will point to the correct element that we want.\r\n\r\n","title":"Selenium WebDriver - iteration through table rows","body":"<p>You have to use like this</p>\n<pre><code>  System.out.println(&quot;Outer HTML for Home Team cell&quot; + row.findElement(By.xpath(&quot;td[contains(@class,'team-a')]&quot;)).getAttribute(&quot;outerHTML&quot;));\n</code></pre>\n<p>Then it will point to the correct element that we want.</p>\n"}],"owner":{"account_id":7120968,"reputation":282,"user_id":5445606,"display_name":"George Lupu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12437,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":37024742,"answer_count":1,"score":0,"last_activity_date":1662984762,"creation_date":1462355421,"question_id":37024194,"body_markdown":"I&#39;m having an issue with Selenium in Java. \r\nI have a web page like this:\r\n\r\n\r\n    &lt;html&gt;\r\n    &lt;body&gt;\r\n    &lt;div id=&#39;content&#39;&gt;\r\n    &lt;table class=&#39;matches&#39;&gt;\r\n    &lt;tr id=&#39;today_01&#39;&gt;\r\n    &lt;td class=&#39;team-a&#39;&gt;Real Madrid&lt;/td&gt;\r\n    &lt;td class=&#39;score&#39;&gt;0-0&lt;/td&gt;\r\n    &lt;td class=&#39;team-b&#39;&gt;Barcelona&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr id=&#39;today_02&#39;&gt;\r\n    &lt;td class=&#39;team-a&#39;&gt;PSG&lt;/td&gt;\r\n    &lt;td class=&#39;score&#39;&gt;1-1&lt;/td&gt;\r\n    &lt;td class=&#39;team-b&#39;&gt;Manchester City&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr id=&#39;today_03&#39;&gt;\r\n    &lt;td class=&#39;team-a&#39;&gt;Liverpool&lt;/td&gt;\r\n    &lt;td class=&#39;score&#39;&gt;2-2&lt;/td&gt;\r\n    &lt;td class=&#39;team-b&#39;&gt;Arsenal&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;/table&gt;\r\n    \r\n    &lt;div id=&#39;content&#39;&gt;\r\n    &lt;body&gt;\r\n    &lt;html&gt;\r\n\r\nI first get all the rows into a list:\r\n\r\n    List&lt;WebElement&gt; allRows = driver.findElements(By.xpath(&quot;//table[@class=&#39;matches&#39;]/tbody/tr[contains(@id, &#39;today&#39;)]&quot;));\r\n\r\nNext I iterate through all the elements displaying the WebElement (i.e. the row) and on the next line I display the td containing the home team, separated by a line:\r\n\r\n    for (WebElement row : allRows) {\r\n    \tSystem.out.println(&quot;Outer HTML for row&quot; + row.getAttribute(&quot;outerHTML&quot;));\r\n    \tSystem.out.println(&quot;Outer HTML for Home Team cell&quot; + row.findElement(By.xpath(&quot;//td[contains(@class,&#39;team-a&#39;)]&quot;)).getAttribute(&quot;outerHTML&quot;));\r\n    System.out.println(&quot;------------------------------------------------------------&quot;);\r\n    }\r\n\r\nThe first println displays all rows, one by one. \r\nThe second however displays ONLY &#39;Real Madrid&#39; for each iteration. I&#39;m losing my mind because I don&#39;t understand why. Can someone please help?\r\n\r\nThe output:\r\n\r\n   \r\n\r\n    &lt;tr id=&#39;today_01&#39;&gt;\r\n    &lt;td class=&#39;team-a&#39;&gt;Real Madrid&lt;/td&gt;\r\n    &lt;td class=&#39;score&#39;&gt;0-0&lt;/td&gt;\r\n    &lt;td class=&#39;team-b&#39;&gt;Barcelona&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;td class=&#39;team-a&#39;&gt;Real Madrid&lt;/td&gt;\r\n    ------------------------------------------------------------\r\n    &lt;tr id=&#39;today_02&#39;&gt;\r\n    &lt;td class=&#39;team-a&#39;&gt;PSG&lt;/td&gt;\r\n    &lt;td class=&#39;score&#39;&gt;1-1&lt;/td&gt;\r\n    &lt;td class=&#39;team-b&#39;&gt;Manchester City&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;td class=&#39;team-a&#39;&gt;Real Madrid&lt;/td&gt;\r\n    ------------------------------------------------------------\r\n    &lt;tr id=&#39;today_03&#39;&gt;\r\n    &lt;td class=&#39;team-a&#39;&gt;Liverpool&lt;/td&gt;\r\n    &lt;td class=&#39;score&#39;&gt;2-2&lt;/td&gt;\r\n    &lt;td class=&#39;team-b&#39;&gt;Arsenal&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;td class=&#39;team-a&#39;&gt;Real Madrid&lt;/td&gt;\r\n    ------------------------------------------------------------\r\n\r\n","title":"Selenium WebDriver - iteration through table rows","body":"<p>I'm having an issue with Selenium in Java. \nI have a web page like this:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;div id='content'&gt;\n&lt;table class='matches'&gt;\n&lt;tr id='today_01'&gt;\n&lt;td class='team-a'&gt;Real Madrid&lt;/td&gt;\n&lt;td class='score'&gt;0-0&lt;/td&gt;\n&lt;td class='team-b'&gt;Barcelona&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr id='today_02'&gt;\n&lt;td class='team-a'&gt;PSG&lt;/td&gt;\n&lt;td class='score'&gt;1-1&lt;/td&gt;\n&lt;td class='team-b'&gt;Manchester City&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr id='today_03'&gt;\n&lt;td class='team-a'&gt;Liverpool&lt;/td&gt;\n&lt;td class='score'&gt;2-2&lt;/td&gt;\n&lt;td class='team-b'&gt;Arsenal&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;div id='content'&gt;\n&lt;body&gt;\n&lt;html&gt;\n</code></pre>\n\n<p>I first get all the rows into a list:</p>\n\n<pre><code>List&lt;WebElement&gt; allRows = driver.findElements(By.xpath(\"//table[@class='matches']/tbody/tr[contains(@id, 'today')]\"));\n</code></pre>\n\n<p>Next I iterate through all the elements displaying the WebElement (i.e. the row) and on the next line I display the td containing the home team, separated by a line:</p>\n\n<pre><code>for (WebElement row : allRows) {\n    System.out.println(\"Outer HTML for row\" + row.getAttribute(\"outerHTML\"));\n    System.out.println(\"Outer HTML for Home Team cell\" + row.findElement(By.xpath(\"//td[contains(@class,'team-a')]\")).getAttribute(\"outerHTML\"));\nSystem.out.println(\"------------------------------------------------------------\");\n}\n</code></pre>\n\n<p>The first println displays all rows, one by one. \nThe second however displays ONLY 'Real Madrid' for each iteration. I'm losing my mind because I don't understand why. Can someone please help?</p>\n\n<p>The output:</p>\n\n<pre><code>&lt;tr id='today_01'&gt;\n&lt;td class='team-a'&gt;Real Madrid&lt;/td&gt;\n&lt;td class='score'&gt;0-0&lt;/td&gt;\n&lt;td class='team-b'&gt;Barcelona&lt;/td&gt;\n&lt;/tr&gt;\n&lt;td class='team-a'&gt;Real Madrid&lt;/td&gt;\n------------------------------------------------------------\n&lt;tr id='today_02'&gt;\n&lt;td class='team-a'&gt;PSG&lt;/td&gt;\n&lt;td class='score'&gt;1-1&lt;/td&gt;\n&lt;td class='team-b'&gt;Manchester City&lt;/td&gt;\n&lt;/tr&gt;\n&lt;td class='team-a'&gt;Real Madrid&lt;/td&gt;\n------------------------------------------------------------\n&lt;tr id='today_03'&gt;\n&lt;td class='team-a'&gt;Liverpool&lt;/td&gt;\n&lt;td class='score'&gt;2-2&lt;/td&gt;\n&lt;td class='team-b'&gt;Arsenal&lt;/td&gt;\n&lt;/tr&gt;\n&lt;td class='team-a'&gt;Real Madrid&lt;/td&gt;\n------------------------------------------------------------\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662984735,"creation_date":1662984735,"answer_id":73689076,"question_id":73689027,"body_markdown":"Serialization frameworks (not just Jackson) can&#39;t handle bidirectional many-to-many relations well. When it tries to serialize a `UserEntity`, it tries to serialize its `UserTypeEntity` as well. It then tries to serialize all `UserEntity` instances of each `UserTypeEntity`, which again leads to the `UserTypeEntity` being serialized. This repeats until the StackOverflowError occurs.\r\n\r\nI think that Jackson has a max depth setting somewhere, that could possibly help you. Other people have used Jackson&#39;s annotations like `@JsonIgnore`. I myself prefer to create DTOs from my entitities, so I can have more fine-grained control over what to serialize. That also allows me to return `UserEntity` instances for one endpoint with nested `UserTypeEntity` instances (but not depper), and `UserTypeEntity` instances from another, with nested `UserEntity` instances (but not deeper). \r\n\r\nNote that your `@JsonIgnore` doesn&#39;t work because Jackson by default prefers to use getters and setters. Your error will probably go away when you move the annotation to the getter, or tell Jackson to serialize fields instead.","title":"java.lang.StackOverflowError: null at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields","body":"<p>Serialization frameworks (not just Jackson) can't handle bidirectional many-to-many relations well. When it tries to serialize a <code>UserEntity</code>, it tries to serialize its <code>UserTypeEntity</code> as well. It then tries to serialize all <code>UserEntity</code> instances of each <code>UserTypeEntity</code>, which again leads to the <code>UserTypeEntity</code> being serialized. This repeats until the StackOverflowError occurs.</p>\n<p>I think that Jackson has a max depth setting somewhere, that could possibly help you. Other people have used Jackson's annotations like <code>@JsonIgnore</code>. I myself prefer to create DTOs from my entitities, so I can have more fine-grained control over what to serialize. That also allows me to return <code>UserEntity</code> instances for one endpoint with nested <code>UserTypeEntity</code> instances (but not depper), and <code>UserTypeEntity</code> instances from another, with nested <code>UserEntity</code> instances (but not deeper).</p>\n<p>Note that your <code>@JsonIgnore</code> doesn't work because Jackson by default prefers to use getters and setters. Your error will probably go away when you move the annotation to the getter, or tell Jackson to serialize fields instead.</p>\n"}],"owner":{"account_id":20204611,"reputation":559,"user_id":14819402,"display_name":"Cross"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1950,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73689076,"answer_count":1,"score":0,"last_activity_date":1662984735,"creation_date":1662984419,"question_id":73689027,"body_markdown":"I&#39;m trying to create an app that allows to track the couriers, using Sptring boot. But here I got struggled with some problem. When I try to call ```get_couriers``` function, it throws me this exception:\r\n```\r\njava.lang.StackOverflowError: null\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\r\n\tat \r\n\tat \r\n```\r\nI tryied to add @JsonIgnore to entities&#39; fields, but nothing was happened; \r\n\r\nWell, here&#39;s my code of entities:\r\n\r\n**UserEntity**\r\n```java\r\n@Table(name = &quot;users&quot;)\r\n@Entity\r\npublic class UserEntity {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n    private String username;\r\n    private String name;\r\n    private String surname;\r\n    private String email;\r\n    private String password;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER)\r\n    @JsonIgnore\r\n    private List&lt;RoleEntity&gt; roles;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;user_type_id&quot;)\r\n    @JsonIgnore\r\n    private UserTypeEntity userType;\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    @JoinTable(\r\n            name = &quot;user_regions&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;users_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;regions_id&quot;)\r\n    )\r\n    @JsonIgnore\r\n    private List&lt;RegionEntity&gt; regions;\r\n\r\n    public UserEntity() {\r\n    }\r\n\r\n    public void addRegion(RegionEntity region) {\r\n        regions.add(region);\r\n    }\r\n\r\n    public void addRoleToUserRoles(RoleEntity role) {\r\n        roles.add(role);\r\n    }\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n    public UserTypeEntity getUserType() {\r\n        return userType;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getSurname() {\r\n        return surname;\r\n    }\r\n\r\n    public void setSurname(String surname) {\r\n        this.surname = surname;\r\n    }\r\n\r\n    public List&lt;RoleEntity&gt; getRoles() {\r\n        return roles;\r\n    }\r\n\r\n    public void setRoles(List&lt;RoleEntity&gt; roles) {\r\n        this.roles = roles;\r\n    }\r\n\r\n    public void setUserType(UserTypeEntity userType) {\r\n        this.userType = userType;\r\n    }\r\n\r\n    public List&lt;RegionEntity&gt; getRegions() {\r\n        return regions;\r\n    }\r\n\r\n    public void setRegions(List&lt;RegionEntity&gt; regions) {\r\n        this.regions = regions;\r\n    }\r\n}\r\n```\r\n\r\n**UserTypeEntity**\r\n\r\n```java\r\n@Table(name = &quot;user_type&quot;)\r\n@Entity\r\n\r\npublic class UserTypeEntity {\r\n    @Id\r\n    @GeneratedValue\r\n    private long id;\r\n    private String type;\r\n    private double capacity;\r\n\r\n    @OneToMany(mappedBy = &quot;userType&quot;, cascade = CascadeType.ALL)\r\n    @JsonIgnore\r\n    private List&lt;UserEntity&gt; users = new ArrayList&lt;&gt;();\r\n\r\n    public UserTypeEntity() {\r\n    }\r\n\r\n    public double getCapacity() {\r\n        return capacity;\r\n    }\r\n\r\n    public void setCapacity(double capacity) {\r\n        this.capacity = capacity;\r\n    }\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getType() {\r\n        return type;\r\n    }\r\n\r\n    public void setType(String type) {\r\n        this.type = type;\r\n    }\r\n\r\n    public List&lt;UserEntity&gt; getUsers() {\r\n        return users;\r\n    }\r\n\r\n    public void setUsers(List&lt;UserEntity&gt; users) {\r\n        this.users = users;\r\n    }\r\n}\r\n```\r\n\r\n**RegionEntiy**\r\n```java\r\n@Table(name = &quot;regions&quot;)\r\n@Entity\r\npublic class RegionEntity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n    private String name;\r\n    @ManyToMany(mappedBy = &quot;regions&quot;)\r\n    @JsonIgnore\r\n    private List&lt;UserEntity&gt; couriers;\r\n\r\n    public RegionEntity() {\r\n    }\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public List&lt;UserEntity&gt; getCouriers() {\r\n        return couriers;\r\n    }\r\n\r\n    public void setCouriers(List&lt;UserEntity&gt; couriers) {\r\n        this.couriers = couriers;\r\n    }\r\n}\r\n```\r\n**RoleEntity**\r\n```java\r\n@Table(name = &quot;roles&quot;)\r\n@Entity\r\npublic class RoleEntity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private long id;\r\n    private String name;\r\n\r\n    public RoleEntity() {\r\n    }\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd here&#39;s the code that should return all couriers, it stored in ```CourierService.java``` and calls in ```CourierController.java```:\r\n```java\r\npublic List&lt;CourierGetModel&gt; getCouriers() {\r\n        RoleEntity courier = roleService.getRoleByName(Roles.COURIER);\r\n        List&lt;UserEntity&gt; users = userRepo.findAll().stream()\r\n                .filter(x -&gt; x.getRoles().contains(courier)).toList();\r\n        return generateCourierGetModelList(users);\r\n    }\r\n\r\n    private List&lt;CourierGetModel&gt; generateCourierGetModelList(List&lt;UserEntity&gt; couriers) {\r\n        List&lt;CourierGetModel&gt; courierModels = new ArrayList&lt;&gt;();\r\n        for(var courier: couriers) {\r\n            courierModels.add(CourierGetModel.toModel(courier));\r\n        }\r\n        return courierModels;\r\n    }\r\n```\r\n\r\nHere&#39;s ```CourierController.java```\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/api/courier&quot;)\r\npublic class CourierController {\r\n    @Autowired\r\n    private CourierService courierService;\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;Object&gt; addCourier(@RequestBody DefineCourierModel courierData) {\r\n        courierService.addCourier(courierData);\r\n        return ResponseEntity.ok(&quot;user was defined as a courier&quot;);\r\n    }\r\n    @GetMapping\r\n    public ResponseEntity&lt;Object&gt; getCouriers() {\r\n        return ResponseEntity.ok(courierService.getCouriers());\r\n    }\r\n}\r\n```\r\nAlso, if you need, here&#39;s the ```CourierGetModel```\r\n```java\r\npublic class CourierGetModel {\r\n    private long id;\r\n    private String username;\r\n    private String name;\r\n    private String surname;\r\n    private String email;\r\n    private UserTypeEntity type;\r\n    private List&lt;RegionEntity&gt; regions;\r\n\r\n    public CourierGetModel() {\r\n    }\r\n\r\n    public static CourierGetModel toModel(UserEntity user) {\r\n        CourierGetModel model = new CourierGetModel();\r\n        model.setUsername(user.getUsername());\r\n        model.setId(user.getId());\r\n        model.setType(user.getUserType());\r\n        model.setRegion(user.getRegions());\r\n        return model;\r\n    }\r\n\r\n    public long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getSurname() {\r\n        return surname;\r\n    }\r\n\r\n    public void setSurname(String surname) {\r\n        this.surname = surname;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public UserTypeEntity getType() {\r\n        return type;\r\n    }\r\n\r\n    public void setType(UserTypeEntity type) {\r\n        this.type = type;\r\n    }\r\n\r\n    public List&lt;RegionEntity&gt; getRegion() {\r\n        return regions;\r\n    }\r\n\r\n    public void setRegion(List&lt;RegionEntity&gt; region) {\r\n        this.regions = region;\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m kinda new to Sptring, so I really hope that you can help me. Thank you in advance!","title":"java.lang.StackOverflowError: null at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields","body":"<p>I'm trying to create an app that allows to track the couriers, using Sptring boot. But here I got struggled with some problem. When I try to call <code>get_couriers</code> function, it throws me this exception:</p>\n<pre><code>java.lang.StackOverflowError: null\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:107) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serialize(CollectionSerializer.java:25) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:728) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at com.fasterxml.jackson.databind.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:145) ~[jackson-databind-2.13.3.jar:2.13.3]\n    at \n    at \n</code></pre>\n<p>I tryied to add @JsonIgnore to entities' fields, but nothing was happened;</p>\n<p>Well, here's my code of entities:</p>\n<p><strong>UserEntity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table(name = &quot;users&quot;)\n@Entity\npublic class UserEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    private String username;\n    private String name;\n    private String surname;\n    private String email;\n    private String password;\n\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JsonIgnore\n    private List&lt;RoleEntity&gt; roles;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;user_type_id&quot;)\n    @JsonIgnore\n    private UserTypeEntity userType;\n\n    @ManyToMany(cascade = CascadeType.ALL)\n    @JoinTable(\n            name = &quot;user_regions&quot;,\n            joinColumns = @JoinColumn(name = &quot;users_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;regions_id&quot;)\n    )\n    @JsonIgnore\n    private List&lt;RegionEntity&gt; regions;\n\n    public UserEntity() {\n    }\n\n    public void addRegion(RegionEntity region) {\n        regions.add(region);\n    }\n\n    public void addRoleToUserRoles(RoleEntity role) {\n        roles.add(role);\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n    public UserTypeEntity getUserType() {\n        return userType;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getSurname() {\n        return surname;\n    }\n\n    public void setSurname(String surname) {\n        this.surname = surname;\n    }\n\n    public List&lt;RoleEntity&gt; getRoles() {\n        return roles;\n    }\n\n    public void setRoles(List&lt;RoleEntity&gt; roles) {\n        this.roles = roles;\n    }\n\n    public void setUserType(UserTypeEntity userType) {\n        this.userType = userType;\n    }\n\n    public List&lt;RegionEntity&gt; getRegions() {\n        return regions;\n    }\n\n    public void setRegions(List&lt;RegionEntity&gt; regions) {\n        this.regions = regions;\n    }\n}\n</code></pre>\n<p><strong>UserTypeEntity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table(name = &quot;user_type&quot;)\n@Entity\n\npublic class UserTypeEntity {\n    @Id\n    @GeneratedValue\n    private long id;\n    private String type;\n    private double capacity;\n\n    @OneToMany(mappedBy = &quot;userType&quot;, cascade = CascadeType.ALL)\n    @JsonIgnore\n    private List&lt;UserEntity&gt; users = new ArrayList&lt;&gt;();\n\n    public UserTypeEntity() {\n    }\n\n    public double getCapacity() {\n        return capacity;\n    }\n\n    public void setCapacity(double capacity) {\n        this.capacity = capacity;\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n\n    public List&lt;UserEntity&gt; getUsers() {\n        return users;\n    }\n\n    public void setUsers(List&lt;UserEntity&gt; users) {\n        this.users = users;\n    }\n}\n</code></pre>\n<p><strong>RegionEntiy</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table(name = &quot;regions&quot;)\n@Entity\npublic class RegionEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    private String name;\n    @ManyToMany(mappedBy = &quot;regions&quot;)\n    @JsonIgnore\n    private List&lt;UserEntity&gt; couriers;\n\n    public RegionEntity() {\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public List&lt;UserEntity&gt; getCouriers() {\n        return couriers;\n    }\n\n    public void setCouriers(List&lt;UserEntity&gt; couriers) {\n        this.couriers = couriers;\n    }\n}\n</code></pre>\n<p><strong>RoleEntity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table(name = &quot;roles&quot;)\n@Entity\npublic class RoleEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long id;\n    private String name;\n\n    public RoleEntity() {\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n<p>And here's the code that should return all couriers, it stored in <code>CourierService.java</code> and calls in <code>CourierController.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;CourierGetModel&gt; getCouriers() {\n        RoleEntity courier = roleService.getRoleByName(Roles.COURIER);\n        List&lt;UserEntity&gt; users = userRepo.findAll().stream()\n                .filter(x -&gt; x.getRoles().contains(courier)).toList();\n        return generateCourierGetModelList(users);\n    }\n\n    private List&lt;CourierGetModel&gt; generateCourierGetModelList(List&lt;UserEntity&gt; couriers) {\n        List&lt;CourierGetModel&gt; courierModels = new ArrayList&lt;&gt;();\n        for(var courier: couriers) {\n            courierModels.add(CourierGetModel.toModel(courier));\n        }\n        return courierModels;\n    }\n</code></pre>\n<p>Here's <code>CourierController.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/api/courier&quot;)\npublic class CourierController {\n    @Autowired\n    private CourierService courierService;\n\n    @PostMapping\n    public ResponseEntity&lt;Object&gt; addCourier(@RequestBody DefineCourierModel courierData) {\n        courierService.addCourier(courierData);\n        return ResponseEntity.ok(&quot;user was defined as a courier&quot;);\n    }\n    @GetMapping\n    public ResponseEntity&lt;Object&gt; getCouriers() {\n        return ResponseEntity.ok(courierService.getCouriers());\n    }\n}\n</code></pre>\n<p>Also, if you need, here's the <code>CourierGetModel</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CourierGetModel {\n    private long id;\n    private String username;\n    private String name;\n    private String surname;\n    private String email;\n    private UserTypeEntity type;\n    private List&lt;RegionEntity&gt; regions;\n\n    public CourierGetModel() {\n    }\n\n    public static CourierGetModel toModel(UserEntity user) {\n        CourierGetModel model = new CourierGetModel();\n        model.setUsername(user.getUsername());\n        model.setId(user.getId());\n        model.setType(user.getUserType());\n        model.setRegion(user.getRegions());\n        return model;\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getSurname() {\n        return surname;\n    }\n\n    public void setSurname(String surname) {\n        this.surname = surname;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public UserTypeEntity getType() {\n        return type;\n    }\n\n    public void setType(UserTypeEntity type) {\n        this.type = type;\n    }\n\n    public List&lt;RegionEntity&gt; getRegion() {\n        return regions;\n    }\n\n    public void setRegion(List&lt;RegionEntity&gt; region) {\n        this.regions = region;\n    }\n}\n</code></pre>\n<p>I'm kinda new to Sptring, so I really hope that you can help me. Thank you in advance!</p>\n"},{"tags":["java","maven","amazon-ec2"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662984094,"creation_date":1662984094,"answer_id":73688968,"question_id":73688695,"body_markdown":"When you use `sudo`, it doesn&#39;t use _your_ environment variables but those of the root user (or in case you use `sudo -u &lt;user&gt;`, that user).\r\n\r\nI suggest not using `sudo` without specifying a user. That means that the code is running as root, which is a big security risk. I&#39;d create a new user dedicated for your application. You can configure that user&#39;s environment variables as well.","title":"mvn package not recognizing OS environment variables","body":"<p>When you use <code>sudo</code>, it doesn't use <em>your</em> environment variables but those of the root user (or in case you use <code>sudo -u &lt;user&gt;</code>, that user).</p>\n<p>I suggest not using <code>sudo</code> without specifying a user. That means that the code is running as root, which is a big security risk. I'd create a new user dedicated for your application. You can configure that user's environment variables as well.</p>\n"}],"owner":{"account_id":14665520,"reputation":1,"user_id":10591470,"display_name":"Gustavo Schulmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662984094,"creation_date":1662982748,"question_id":73688695,"body_markdown":"I&#39;m trying to deploy an API do AWS EC2.\r\n\r\nAnd this API has environment variables inside application.properties, such as $DB_HOST, $DB_USER and $DB_PASS, and then I set them at \r\n\r\n    vim .bashrc\r\n    source .bashrc\r\n\r\nAll the process occurs alright for the deployment, but when I run\r\n\r\n    sudo mvn package\r\n\r\nIt doesn&#39;t recognize the environment variables setted from the OS (linux) and build fail.\r\nI can&#39;t really find any similar solution here. \r\n\r\nAlso tried putting them inside the /˜profile with \r\n\r\n    nano /˜profile\r\n    source /˜profile\r\n\r\nAnyone has any ideas? :)\r\n\r\n\r\n\r\n\r\n\r\n","title":"mvn package not recognizing OS environment variables","body":"<p>I'm trying to deploy an API do AWS EC2.</p>\n<p>And this API has environment variables inside application.properties, such as $DB_HOST, $DB_USER and $DB_PASS, and then I set them at</p>\n<pre><code>vim .bashrc\nsource .bashrc\n</code></pre>\n<p>All the process occurs alright for the deployment, but when I run</p>\n<pre><code>sudo mvn package\n</code></pre>\n<p>It doesn't recognize the environment variables setted from the OS (linux) and build fail.\nI can't really find any similar solution here.</p>\n<p>Also tried putting them inside the /˜profile with</p>\n<pre><code>nano /˜profile\nsource /˜profile\n</code></pre>\n<p>Anyone has any ideas? :)</p>\n"},{"tags":["java","oauth-2.0","office365","imap"],"comments":[{"owner":{"account_id":1550376,"reputation":10772,"user_id":1442918,"display_name":"Max"},"score":0,"creation_date":1658939122,"post_id":73138484,"comment_id":129178570,"body_markdown":"Which version of javamail are you using?  Are you sure you&#39;re using an Access Token and not a Rrefresh Token, and that your access token hasn&#39;t expired?  What is in the response to AUTHENTICATE failed?  Turn on debugging, there should be some base64 error message in the protocol flow.","body":"Which version of javamail are you using?  Are you sure you&#39;re using an Access Token and not a Rrefresh Token, and that your access token hasn&#39;t expired?  What is in the response to AUTHENTICATE failed?  Turn on debugging, there should be some base64 error message in the protocol flow."},{"owner":{"account_id":2759651,"reputation":692,"user_id":2376794,"accept_rate":67,"display_name":"jamie"},"score":0,"creation_date":1658946112,"post_id":73138484,"comment_id":129181019,"body_markdown":"My setup is also exactly as OP describes and I cannot get it to work either. In my case, I&#39;m definitely using an access token and the token is not expired. It is newly created.  Alot of people eem to be experiencing the exact same issue. See: https://techcommunity.microsoft.com/t5/office-365/authentication-failure-for-imap-and-pop3-using-client-credential/m-p/3583468/highlight/false#M39544","body":"My setup is also exactly as OP describes and I cannot get it to work either. In my case, I&#39;m definitely using an access token and the token is not expired. It is newly created.  Alot of people eem to be experiencing the exact same issue. See: <a href=\"https://techcommunity.microsoft.com/t5/office-365/authentication-failure-for-imap-and-pop3-using-client-credential/m-p/3583468/highlight/false#M39544\" rel=\"nofollow noreferrer\">techcommunity.microsoft.com/t5/office-365/&hellip;</a>"},{"owner":{"account_id":2759651,"reputation":692,"user_id":2376794,"accept_rate":67,"display_name":"jamie"},"score":0,"creation_date":1658949960,"post_id":73138484,"comment_id":129182270,"body_markdown":"When add scope in Azure GUI, the scope https://graph.microsoft.com/IMAP.AccessAsUser.All is added. This does not correspond with https://outlook.office365.com/.default. A possible cause of auth failure? The resolutiion would be to somehow add scope https://outlook.office365.com/IMAP.AccessAsUser.All to Azure app registration.","body":"When add scope in Azure GUI, the scope <a href=\"https://graph.microsoft.com/IMAP.AccessAsUser.All\" rel=\"nofollow noreferrer\">graph.microsoft.com/IMAP.AccessAsUser.All</a> is added. This does not correspond with <a href=\"https://outlook.office365.com/.default\" rel=\"nofollow noreferrer\">outlook.office365.com/.default</a>. A possible cause of auth failure? The resolutiion would be to somehow add scope <a href=\"https://outlook.office365.com/IMAP.AccessAsUser.All\" rel=\"nofollow noreferrer\">outlook.office365.com/IMAP.AccessAsUser.All</a> to Azure app registration."},{"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"score":0,"creation_date":1658954429,"post_id":73138484,"comment_id":129183561,"body_markdown":"Hi, I am using Java Mail 1.6.7. And the token is valid and non expired. \n@jamie Thank you for the link. From what I understood from documentation, you need to add IMAP.AccessAsApp permission and scope https://outlook.office365.com/.default will use it, because it is defined directly on register application. Because it is request without user interaction, all permissions need to be defined on application, instead of scope on request. So I think, there is not possible to add IMAP.AccessAsUser.All to client credentials grant flow. Everything works with fine with authorization code flow.","body":"Hi, I am using Java Mail 1.6.7. And the token is valid and non expired.  @jamie Thank you for the link. From what I understood from documentation, you need to add IMAP.AccessAsApp permission and scope <a href=\"https://outlook.office365.com/.default\" rel=\"nofollow noreferrer\">outlook.office365.com/.default</a> will use it, because it is defined directly on register application. Because it is request without user interaction, all permissions need to be defined on application, instead of scope on request. So I think, there is not possible to add IMAP.AccessAsUser.All to client credentials grant flow. Everything works with fine with authorization code flow."},{"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"score":0,"creation_date":1658954567,"post_id":73138484,"comment_id":129183593,"body_markdown":"Because everything works fine with authorization code flow I suspect that I did not related service principal correctly to mail or mail should not be used as username for access. I will try to increase debug on IMAP connection, to see if there is some additional info, because defining just debug dies not have any specific information.","body":"Because everything works fine with authorization code flow I suspect that I did not related service principal correctly to mail or mail should not be used as username for access. I will try to increase debug on IMAP connection, to see if there is some additional info, because defining just debug dies not have any specific information."},{"owner":{"account_id":2759651,"reputation":692,"user_id":2376794,"accept_rate":67,"display_name":"jamie"},"score":0,"creation_date":1658955905,"post_id":73138484,"comment_id":129183959,"body_markdown":"Sorry, I misread the doc.  Its been at this too long! I added Exchange Online scope https://ps.outlook.com/IMAP.AccessAsApp. I tried requesting https://outlook.office365.com/.default as per doc. Still authentication failed.","body":"Sorry, I misread the doc.  Its been at this too long! I added Exchange Online scope <a href=\"https://ps.outlook.com/IMAP.AccessAsApp\" rel=\"nofollow noreferrer\">ps.outlook.com/IMAP.AccessAsApp</a>. I tried requesting <a href=\"https://outlook.office365.com/.default\" rel=\"nofollow noreferrer\">outlook.office365.com/.default</a> as per doc. Still authentication failed."}],"answers":[{"tags":[],"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1659171436,"creation_date":1659097592,"answer_id":73166725,"question_id":73138484,"body_markdown":"I wrote same answer [here][1], so I am coping it here.\r\n\r\nI think I made some progress.\r\n \r\nI read documentation few times, tried few times from the start with same error. I even have tried using client and object ids instead of email as username, in lack of better ideas.\r\n\r\n\r\nSo this is where I think I have made mistake previous times.\r\n\r\n\r\nOn the part where it is needed to register service principal, I needed to execute\r\n\r\n    New-ServicePrincipal -AppId &lt;APPLICATION_ID&gt; -ServiceId &lt;OBJECT_ID&gt; [-Organization &lt;ORGANIZATION_ID&gt;]\r\n\r\n Here I have put enterprise application object id as ServiceId argument. And that is ok.\r\n\r\n \r\nBut on \r\n\r\n    Add-MailboxPermission -Identity &quot;email address removed for privacy reasons&quot; -User \r\n    &lt;SERVICE_PRINCIPAL_ID&gt; -AccessRights FullAccess\r\n\r\nI have put my registered application object id as User argument. I also tried setting object id of enterprise application, but it did not have success.\r\n\r\n\r\nWhen I executed \r\n\r\n    Get-ServicePrincipal -Organization &lt;ORGANIZATION_ID&gt; | fl\r\n\r\n\r\nI did not pay attention to ServiceId property, even with documentation specifying it and saying it will be different.\r\n\r\n \r\nNow I cleared everything and started fresh.\r\n\r\nI have executed all the steps again, but on the step for creating new service principal I used data from enterprise application view. When I need to add mail permission, I list service principals, and then use `ServiceId` value from the output, as argument for user.\r\n\r\n \r\nWith that, I was able to authorise. \r\n\r\n\r\n  [1]: https://techcommunity.microsoft.com/t5/office-365/authentication-failure-for-imap-and-pop3-using-client-credential/m-p/3576825\r\n","title":"Microsoft exchange - IMAP OAuth2 With client credentials","body":"<p>I wrote same answer <a href=\"https://techcommunity.microsoft.com/t5/office-365/authentication-failure-for-imap-and-pop3-using-client-credential/m-p/3576825\" rel=\"nofollow noreferrer\">here</a>, so I am coping it here.</p>\n<p>I think I made some progress.</p>\n<p>I read documentation few times, tried few times from the start with same error. I even have tried using client and object ids instead of email as username, in lack of better ideas.</p>\n<p>So this is where I think I have made mistake previous times.</p>\n<p>On the part where it is needed to register service principal, I needed to execute</p>\n<pre><code>New-ServicePrincipal -AppId &lt;APPLICATION_ID&gt; -ServiceId &lt;OBJECT_ID&gt; [-Organization &lt;ORGANIZATION_ID&gt;]\n</code></pre>\n<p>Here I have put enterprise application object id as ServiceId argument. And that is ok.</p>\n<p>But on</p>\n<pre><code>Add-MailboxPermission -Identity &quot;email address removed for privacy reasons&quot; -User \n&lt;SERVICE_PRINCIPAL_ID&gt; -AccessRights FullAccess\n</code></pre>\n<p>I have put my registered application object id as User argument. I also tried setting object id of enterprise application, but it did not have success.</p>\n<p>When I executed</p>\n<pre><code>Get-ServicePrincipal -Organization &lt;ORGANIZATION_ID&gt; | fl\n</code></pre>\n<p>I did not pay attention to ServiceId property, even with documentation specifying it and saying it will be different.</p>\n<p>Now I cleared everything and started fresh.</p>\n<p>I have executed all the steps again, but on the step for creating new service principal I used data from enterprise application view. When I need to add mail permission, I list service principals, and then use <code>ServiceId</code> value from the output, as argument for user.</p>\n<p>With that, I was able to authorise.</p>\n"},{"tags":[],"owner":{"account_id":3134523,"reputation":3,"user_id":2651325,"display_name":"Inny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662983775,"creation_date":1662982783,"answer_id":73688704,"question_id":73138484,"body_markdown":"Thanks everyone for sharing your experience. This has proved to be a little confusing. :)\r\n\r\nTo sum everything up, to access a mailbox with IMAPS and OAuth2 (as opposed to using Graph API which is another method Microsoft recommends):\r\n- Create an Azure App Registration\r\n- Add API permission Office 365 Exchange Online - IMAP.AccessAsApp and grant admin consent\r\n- Create a service principal, which will be used to grant mailbox permissions to in Exchange Online\r\n\r\n```\r\nConnect-AzureAD\r\nConnect-ExchangeOnline\r\n$azapp = Get-AzureADApplication -SearchString &#39;App Registration Name&#39;\r\n$azsp = Get-AzureADServicePrincipal -SearchString $azapp.DisplayName\r\n# GOTCHA: You need the ObjectId from &#39;Enterprise applications&#39; (Get-AzureADServicePrincipal), not &#39;Application registrations&#39; (Get-AzureADApplication) for ServiceId (thanks @[jamie][1])\r\n$sp = New-ServicePrincipal -AppId $azapp.AppId -ServiceId $azsp.ObjectId -DisplayName &quot;EXO Service Principal for $($azapp.DisplayName)&quot;\r\n```\r\n- Grant access rights to mailboxes for the service principal\r\n```\r\n$mbxs = &#39;mymbx1@yourdomain.tld&#39;,`\r\n        &#39;mymbx2@yourdomain.tld&#39;,`\r\n        &#39;mymbx3@yourdomain.tld&#39;\r\n$mbxs | %{ Add-MailboxPermission -Identity $_ -User $sp.ServiceId -AccessRights FullAccess } | fl *\r\nGet-MailboxPermission $mbxs[-1] | ft -a\r\n```\r\nYou can use [Get-IMAPAccessToken.ps1][1] to test your setup\r\n  - ``.\\Get-IMAPAccessToken.ps1 -TenantID $TenantId -ClientId $ClientId -ClientSecret $ClientSecret -TargetMailbox $TargetMailbox``\r\n\r\nOther parameters you may need:\r\n- [Authority][2]: ``https://login.microsoftonline.com/&lt;YourTenantId&gt;/``\r\n- Scope: ``https://outlook.office365.com/.default``\r\n\r\n  [1]: https://github.com/DanijelkMSFT/ThisandThat/blob/main/Get-IMAPAccessToken.ps1\r\n  [2]: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-client-application-configuration","title":"Microsoft exchange - IMAP OAuth2 With client credentials","body":"<p>Thanks everyone for sharing your experience. This has proved to be a little confusing. :)</p>\n<p>To sum everything up, to access a mailbox with IMAPS and OAuth2 (as opposed to using Graph API which is another method Microsoft recommends):</p>\n<ul>\n<li>Create an Azure App Registration</li>\n<li>Add API permission Office 365 Exchange Online - IMAP.AccessAsApp and grant admin consent</li>\n<li>Create a service principal, which will be used to grant mailbox permissions to in Exchange Online</li>\n</ul>\n<pre><code>Connect-AzureAD\nConnect-ExchangeOnline\n$azapp = Get-AzureADApplication -SearchString 'App Registration Name'\n$azsp = Get-AzureADServicePrincipal -SearchString $azapp.DisplayName\n# GOTCHA: You need the ObjectId from 'Enterprise applications' (Get-AzureADServicePrincipal), not 'Application registrations' (Get-AzureADApplication) for ServiceId (thanks @[jamie][1])\n$sp = New-ServicePrincipal -AppId $azapp.AppId -ServiceId $azsp.ObjectId -DisplayName &quot;EXO Service Principal for $($azapp.DisplayName)&quot;\n</code></pre>\n<ul>\n<li>Grant access rights to mailboxes for the service principal</li>\n</ul>\n<pre><code>$mbxs = 'mymbx1@yourdomain.tld',`\n        'mymbx2@yourdomain.tld',`\n        'mymbx3@yourdomain.tld'\n$mbxs | %{ Add-MailboxPermission -Identity $_ -User $sp.ServiceId -AccessRights FullAccess } | fl *\nGet-MailboxPermission $mbxs[-1] | ft -a\n</code></pre>\n<p>You can use <a href=\"https://github.com/DanijelkMSFT/ThisandThat/blob/main/Get-IMAPAccessToken.ps1\" rel=\"nofollow noreferrer\">Get-IMAPAccessToken.ps1</a> to test your setup</p>\n<ul>\n<li><code>.\\Get-IMAPAccessToken.ps1 -TenantID $TenantId -ClientId $ClientId -ClientSecret $ClientSecret -TargetMailbox $TargetMailbox</code></li>\n</ul>\n<p>Other parameters you may need:</p>\n<ul>\n<li><a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/msal-client-application-configuration\" rel=\"nofollow noreferrer\">Authority</a>: <code>https://login.microsoftonline.com/&lt;YourTenantId&gt;/</code></li>\n<li>Scope: <code>https://outlook.office365.com/.default</code></li>\n</ul>\n"}],"owner":{"account_id":6115625,"reputation":746,"user_id":4770761,"accept_rate":86,"display_name":"Boris"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3194,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73166725,"answer_count":2,"score":3,"last_activity_date":1662983775,"creation_date":1658927052,"question_id":73138484,"body_markdown":"I am writing application that need to read mailbox using IMAP, but as daemon, without user interaction. I need to use OAuth2 to get access.\r\nBecause I need it without user interaction, I need to use client credentials flow. This was added this June.\r\n\r\nI have done everything from [official documentation][1]. Registered application, added permissions, added mailbox permission using PowerShell.\r\n\r\nWhen I get request access token with scope `https://outlook.office365.com/.default`, the one that I receive has role `IMAP.AccessAsApp`, so I believe that is correct. I used [https://jwt.ms/][2] to parse JWT.\r\n\r\nThe problem is when I try to authenticate using this access token in Java, for example\r\n\r\n        Properties props = new Properties();\r\n        props.put(&quot;mail.imap.ssl.enable&quot;, &quot;true&quot;);\r\n        props.put(&quot;mail.imap.auth.mechanisms&quot;, &quot;XOAUTH2&quot;);\r\n        props.put(&quot;mail.debug&quot;, &quot;true&quot;);\r\n\r\n        Session session = Session.getInstance(props);\r\n        Store store = session.getStore(&quot;imap&quot;);\r\n        store.connect(&quot;outlook.office365.com&quot;, 993, &quot;testing@mydomain.com&quot;, &quot;accessToken&quot;);\r\n\r\nI receive `AUTHENTICATE failed`. I tried same code with access token received using authorization code flow, which requires user interaction. Using that access code I was able to connect to mailbox. So the code is correct.\r\n\r\nI even tried using client id and service id instead of email address as username, but without success.\r\n\r\nI am not sure where I made the mistake and if I am using correct username. Any help is appreciated.\r\n \r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/exchange/client-developer/legacy-protocols/how-to-authenticate-an-imap-pop-smtp-application-by-using-oauth\r\n  [2]: https://jwt.ms/","title":"Microsoft exchange - IMAP OAuth2 With client credentials","body":"<p>I am writing application that need to read mailbox using IMAP, but as daemon, without user interaction. I need to use OAuth2 to get access.\nBecause I need it without user interaction, I need to use client credentials flow. This was added this June.</p>\n<p>I have done everything from <a href=\"https://learn.microsoft.com/en-us/exchange/client-developer/legacy-protocols/how-to-authenticate-an-imap-pop-smtp-application-by-using-oauth\" rel=\"nofollow noreferrer\">official documentation</a>. Registered application, added permissions, added mailbox permission using PowerShell.</p>\n<p>When I get request access token with scope <code>https://outlook.office365.com/.default</code>, the one that I receive has role <code>IMAP.AccessAsApp</code>, so I believe that is correct. I used <a href=\"https://jwt.ms/\" rel=\"nofollow noreferrer\">https://jwt.ms/</a> to parse JWT.</p>\n<p>The problem is when I try to authenticate using this access token in Java, for example</p>\n<pre><code>    Properties props = new Properties();\n    props.put(&quot;mail.imap.ssl.enable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.imap.auth.mechanisms&quot;, &quot;XOAUTH2&quot;);\n    props.put(&quot;mail.debug&quot;, &quot;true&quot;);\n\n    Session session = Session.getInstance(props);\n    Store store = session.getStore(&quot;imap&quot;);\n    store.connect(&quot;outlook.office365.com&quot;, 993, &quot;testing@mydomain.com&quot;, &quot;accessToken&quot;);\n</code></pre>\n<p>I receive <code>AUTHENTICATE failed</code>. I tried same code with access token received using authorization code flow, which requires user interaction. Using that access code I was able to connect to mailbox. So the code is correct.</p>\n<p>I even tried using client id and service id instead of email address as username, but without success.</p>\n<p>I am not sure where I made the mistake and if I am using correct username. Any help is appreciated.</p>\n"},{"tags":["java","spring-boot","maven","jenkins","deployment"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1662984605,"post_id":73688911,"comment_id":130125191,"body_markdown":"As far as I know, Maven doesn&#39;t check your configuration service during the build phase, nor does the Spring Boot Maven plugin. My guess is that you have some test that uses Spring and that uses the default configured location (`http://localhost:8888`). So the solution would be to fix that test. Can you show the entire build output (or at least more than just a part of a stack trace)?","body":"As far as I know, Maven doesn&#39;t check your configuration service during the build phase, nor does the Spring Boot Maven plugin. My guess is that you have some test that uses Spring and that uses the default configured location (<code>http:&#47;&#47;localhost:8888</code>). So the solution would be to fix that test. Can you show the entire build output (or at least more than just a part of a stack trace)?"},{"owner":{"account_id":4700927,"reputation":1844,"user_id":3804495,"accept_rate":46,"display_name":"heisenberg"},"score":0,"creation_date":1662985135,"post_id":73688911,"comment_id":130125359,"body_markdown":"@g00glen00b, hey thanks! for your comment. After reading your comment and rechecking the log, I think you are probably right. I have to read further in the logs. On near end of the logs, I see some `junit` tests failing I&#39;ll come back here for update.","body":"@g00glen00b, hey thanks! for your comment. After reading your comment and rechecking the log, I think you are probably right. I have to read further in the logs. On near end of the logs, I see some <code>junit</code> tests failing I&#39;ll come back here for update."}],"owner":{"account_id":4700927,"reputation":1844,"user_id":3804495,"accept_rate":46,"display_name":"heisenberg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662983745,"creation_date":1662983745,"question_id":73688911,"body_markdown":"My goal is to deploy 1 **spring-config-server** application AND 1 **spring-boot-client** application to the same Linux server machine.\r\n\r\n**spring-boot-client application** port is **8081**\r\n**spring-config-server application** port is **8888**\r\n\r\nIn Jenkins I created 2 jobs. First job is to build and deploy the **spring-config-server** application and start the jar. Second job is is to build and deploy the **spring-boot-client** application and start the jar. \r\n\r\nI was able to build and deploy the **spring-config-server** application to the Linux machine. I can see it running at **localhost:8888** \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**Problem :** Build task/job for **spring-boot-client** application in Jenkins is **failing** because when maven `clean install` is run, I believe that it tries to locate presence of a config server running at `localhost:8888`. I don&#39;t know if it&#39;s because of actuator dependency I added.\r\n\r\nIn Jenkins build console, this is what I get\r\n\r\n&gt; Caused by: org.springframework.web.client.ResourceAccessException: I/O\r\n&gt; error on GET request for &quot;http://localhost:8888/application/dev&quot;:\r\n&gt; Connection refused (Connection refused); nested exception is\r\n&gt; java.net.ConnectException: Connection refused (Connection refused) \tat\r\n&gt; org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)\r\n&gt; \tat\r\n&gt; org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)\r\n&gt; \tat\r\n&gt; org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)\r\n&gt; \tat\r\n&gt; org.springframework.cloud.config.client.ConfigServerConfigDataLoader.getRemoteEnvironment(ConfigServerConfigDataLoader.java:303)\r\n&gt; \tat\r\n&gt; org.springframework.cloud.config.client.ConfigServerConfigDataLoader.doLoad(ConfigServerConfigDataLoader.java:118)\r\n&gt; \t... 94 common frames omitted Caused by: java.net.ConnectException:\r\n&gt; Connection refused (Connection refused)\r\n\r\nIn the **spring-boot-client** app&#39;s `application.properties`, the only setting I have are these :\r\n\r\n    # ANT_PATH_MATCHER is added to avoid NULL error in SwaggerConfig\r\n    spring.mvc.pathmatch.matching-strategy = ANT_PATH_MATCHER\r\n    \r\n    server.port=8081\r\n    \r\n    # Spring Config Server URL of Config Server Microservice :\r\n    spring.config.import=configserver:http://localhost:8888\r\n    \r\n    # Environment configuration which you want to load :\r\n    spring.profiles.active=dev\r\n\r\nIn spring-boot-client&#39;s jenkins build job, this is what I have : \r\n\r\n[![enter image description here][2]][2]\r\n\r\n  [1]: https://i.stack.imgur.com/Ix08y.png\r\n  [2]: https://i.stack.imgur.com/YllME.png\r\n\r\nNow, theoretically, I believe that deploying 1 config-server and 1 client-app in the same linux machine should be possible. I just don&#39;t know how to properly configure it in Jenkins.\r\n\r\nI have this spring cloud config client in pom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-config-client&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI have a copy of the spring-config-server app and spring-boot-client app in my local machine. I just start/run both and it works. \r\n\r\nI am a beginner in Jenkins and I do everything in UI. This is just a build task with scp and ssh commands executed in shell to deploy.\r\n\r\nI&#39;d appreciate any help or comment.\r\n\r\nThank you.","title":"Jenkins build and deployment of spring boot client microservice fails because of config-server at https://localhost:8888 not present on maven build","body":"<p>My goal is to deploy 1 <strong>spring-config-server</strong> application AND 1 <strong>spring-boot-client</strong> application to the same Linux server machine.</p>\n<p><strong>spring-boot-client application</strong> port is <strong>8081</strong>\n<strong>spring-config-server application</strong> port is <strong>8888</strong></p>\n<p>In Jenkins I created 2 jobs. First job is to build and deploy the <strong>spring-config-server</strong> application and start the jar. Second job is is to build and deploy the <strong>spring-boot-client</strong> application and start the jar.</p>\n<p>I was able to build and deploy the <strong>spring-config-server</strong> application to the Linux machine. I can see it running at <strong>localhost:8888</strong></p>\n<p><a href=\"https://i.stack.imgur.com/Ix08y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ix08y.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Problem :</strong> Build task/job for <strong>spring-boot-client</strong> application in Jenkins is <strong>failing</strong> because when maven <code>clean install</code> is run, I believe that it tries to locate presence of a config server running at <code>localhost:8888</code>. I don't know if it's because of actuator dependency I added.</p>\n<p>In Jenkins build console, this is what I get</p>\n<blockquote>\n<p>Caused by: org.springframework.web.client.ResourceAccessException: I/O\nerror on GET request for &quot;http://localhost:8888/application/dev&quot;:\nConnection refused (Connection refused); nested exception is\njava.net.ConnectException: Connection refused (Connection refused)    at\norg.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)\nat\norg.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)\nat\norg.springframework.web.client.RestTemplate.exchange(RestTemplate.java:602)\nat\norg.springframework.cloud.config.client.ConfigServerConfigDataLoader.getRemoteEnvironment(ConfigServerConfigDataLoader.java:303)\nat\norg.springframework.cloud.config.client.ConfigServerConfigDataLoader.doLoad(ConfigServerConfigDataLoader.java:118)\n... 94 common frames omitted Caused by: java.net.ConnectException:\nConnection refused (Connection refused)</p>\n</blockquote>\n<p>In the <strong>spring-boot-client</strong> app's <code>application.properties</code>, the only setting I have are these :</p>\n<pre><code># ANT_PATH_MATCHER is added to avoid NULL error in SwaggerConfig\nspring.mvc.pathmatch.matching-strategy = ANT_PATH_MATCHER\n\nserver.port=8081\n\n# Spring Config Server URL of Config Server Microservice :\nspring.config.import=configserver:http://localhost:8888\n\n# Environment configuration which you want to load :\nspring.profiles.active=dev\n</code></pre>\n<p>In spring-boot-client's jenkins build job, this is what I have :</p>\n<p><a href=\"https://i.stack.imgur.com/YllME.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YllME.png\" alt=\"enter image description here\" /></a></p>\n<p>Now, theoretically, I believe that deploying 1 config-server and 1 client-app in the same linux machine should be possible. I just don't know how to properly configure it in Jenkins.</p>\n<p>I have this spring cloud config client in pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-config-client&lt;/artifactId&gt;\n    &lt;version&gt;3.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I have a copy of the spring-config-server app and spring-boot-client app in my local machine. I just start/run both and it works.</p>\n<p>I am a beginner in Jenkins and I do everything in UI. This is just a build task with scp and ssh commands executed in shell to deploy.</p>\n<p>I'd appreciate any help or comment.</p>\n<p>Thank you.</p>\n"},{"tags":["java","jvm"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1662973461,"post_id":73686831,"comment_id":130121368,"body_markdown":"If you can install third-party Open Source tools, why can&#39;t you just install a JDK?","body":"If you can install third-party Open Source tools, why can&#39;t you just install a JDK?"},{"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"score":0,"creation_date":1662973563,"post_id":73686831,"comment_id":130121402,"body_markdown":"OK but I will need to stop the live server in order to install the jdk, and is it good idea to have JDK on live environement?","body":"OK but I will need to stop the live server in order to install the jdk, and is it good idea to have JDK on live environement?"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1662973613,"post_id":73686831,"comment_id":130121413,"body_markdown":"&quot;*I will need to stop the live server in order to install the jdk*&quot; Why?","body":"&quot;<i>I will need to stop the live server in order to install the jdk</i>&quot; Why?"},{"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"score":0,"creation_date":1662973704,"post_id":73686831,"comment_id":130121442,"body_markdown":"my apologies,i thought I had to stop the server uninstall the jre and then install the jdk","body":"my apologies,i thought I had to stop the server uninstall the jre and then install the jdk"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1662973722,"post_id":73686831,"comment_id":130121448,"body_markdown":"First: no, you can connect tools from the JDK to a JVM running in a JRE. The JVM itself is the same one. Second: The concept of a &quot;JRE&quot; has been basically removed in more recent Java releases for various reasons, so yes, having &quot;a JDK&quot; on a production environment is *probably* acceptable by some metrics. At least it&#39;s no worse (in my opinion) than installing alternative monitoring tools that are just as powerful/intrusive than what the JDK provides.","body":"First: no, you can connect tools from the JDK to a JVM running in a JRE. The JVM itself is the same one. Second: The concept of a &quot;JRE&quot; has been basically removed in more recent Java releases for various reasons, so yes, having &quot;a JDK&quot; on a production environment is <i>probably</i> acceptable by some metrics. At least it&#39;s no worse (in my opinion) than installing alternative monitoring tools that are just as powerful/intrusive than what the JDK provides."}],"answers":[{"tags":[],"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1662983570,"creation_date":1662983570,"answer_id":73688879,"question_id":73686831,"body_markdown":"jattach gives you access to a few powerful tools, namely jcmd which you can then use to run various diagnostics commands against the java app.\r\nWorks with plain JRE - check https://github.com/apangin/jattach\r\n\r\nSee also https://docs.oracle.com/en/java/javase/17/docs/specs/man/jcmd.html","title":"How to monitor JVM with JRE only","body":"<p>jattach gives you access to a few powerful tools, namely jcmd which you can then use to run various diagnostics commands against the java app.\nWorks with plain JRE - check <a href=\"https://github.com/apangin/jattach\" rel=\"nofollow noreferrer\">https://github.com/apangin/jattach</a></p>\n<p>See also <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/jcmd.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/17/docs/specs/man/jcmd.html</a></p>\n"}],"owner":{"account_id":2272389,"reputation":1347,"user_id":1999453,"accept_rate":67,"display_name":"user1999453"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73688879,"answer_count":1,"score":0,"last_activity_date":1662983570,"creation_date":1662973330,"question_id":73686831,"body_markdown":"I have a Centos7 server and I want to monitor the JVM in order to identify performance issue but I have only JRE installed on the prod environment as follows: \r\n\r\n[![enter image description here][1]][1]\r\n\r\nBased on the research I saw there were some tool available such as Java Mission Control but it is only available with JDK but I have JRE installed. Any idea what open source tool I can use to monitor the jvm on centos with only JRE installed?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KuP4j.jpg","title":"How to monitor JVM with JRE only","body":"<p>I have a Centos7 server and I want to monitor the JVM in order to identify performance issue but I have only JRE installed on the prod environment as follows:</p>\n<p><a href=\"https://i.stack.imgur.com/KuP4j.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KuP4j.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Based on the research I saw there were some tool available such as Java Mission Control but it is only available with JDK but I have JRE installed. Any idea what open source tool I can use to monitor the jvm on centos with only JRE installed?</p>\n"},{"tags":["java","spring-boot","mapping","backend"],"answers":[{"tags":[],"owner":{"account_id":5243437,"reputation":98,"user_id":4189875,"display_name":"BigO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662983485,"creation_date":1662983485,"answer_id":73688855,"question_id":73687925,"body_markdown":"&gt;create a new list of &quot;AccountInfo&quot; which contain &quot;id&quot; same as the &quot;id&quot; of &gt;meetings\r\n\r\nWhat do want to do if id&#39;s are same, merge in a new variable ?","title":"How to match lists of two objects based on a common field using map?","body":"<blockquote>\n<p>create a new list of &quot;AccountInfo&quot; which contain &quot;id&quot; same as the &quot;id&quot; of &gt;meetings</p>\n</blockquote>\n<p>What do want to do if id's are same, merge in a new variable ?</p>\n"}],"owner":{"account_id":22521553,"reputation":11,"user_id":16715034,"display_name":"Markus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662983485,"creation_date":1662978868,"question_id":73687925,"body_markdown":"    Class AccountInfo\r\n    {\r\n    String id;\r\n    String name;\r\n    String type;\r\n    }\r\n    Class MeetingsInfo\r\n    {\r\n    String id;\r\n    String count;\r\n    Date meetingDate;\r\n    }\r\n    List&lt;AccountInfo&gt; accounts;\r\n    List&lt;MeetingsInfo&gt; meetings;\r\n\r\nHere &quot;accounts&quot; contain details of all accounts and meetings contain all meetings of that day. How to create a new list of &quot;AccountInfo&quot; which contain &quot;id&quot; same as the &quot;id&quot; of meetings using &quot;map&quot; function?\r\n\r\nI tried to do it this way:\r\n\r\n    List&lt;AccountInfo&gt; newAccounts = accounts.stream().map(meetings::getAccountId);\r\n\r\nPlease do mention if there is any optimised method than using map.\r\n    \r\n","title":"How to match lists of two objects based on a common field using map?","body":"<pre><code>Class AccountInfo\n{\nString id;\nString name;\nString type;\n}\nClass MeetingsInfo\n{\nString id;\nString count;\nDate meetingDate;\n}\nList&lt;AccountInfo&gt; accounts;\nList&lt;MeetingsInfo&gt; meetings;\n</code></pre>\n<p>Here &quot;accounts&quot; contain details of all accounts and meetings contain all meetings of that day. How to create a new list of &quot;AccountInfo&quot; which contain &quot;id&quot; same as the &quot;id&quot; of meetings using &quot;map&quot; function?</p>\n<p>I tried to do it this way:</p>\n<pre><code>List&lt;AccountInfo&gt; newAccounts = accounts.stream().map(meetings::getAccountId);\n</code></pre>\n<p>Please do mention if there is any optimised method than using map.</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662983226,"creation_date":1662982031,"answer_id":73688553,"question_id":73688160,"body_markdown":"The string:\r\n\r\n    Ljava/lang/String;-&gt;indexOf([CII[CIII)I\r\n\r\nappears to be composed of the JVM&#39;s internal (&quot;binary&quot;) type name and a method signature.\r\n\r\n  1.  `Ljava/lang/String;` is the internal name of the type `java.lang.String`\r\n  2.  `indexOf([CII[CIII)I` denotes a method with this signature:\r\n\r\n          int indexOf(char[], int, int, char[], int, int, int)\r\n  3.  The `-&gt;` in this context means the classes method.\r\n\r\n\r\nSo in context, `Ljava/lang/String;-&gt;indexOf([CII[CIII)I` is saying that the `String.indexOf` method with that particular signature is blocked.  \r\n\r\n(This is most likely referring to an *internal* overload of the `String.indexOf` methods that ordinary application code should never be using in the first place.   You won&#39;t see it in the javadocs, but if you will most likely find it if you look at the Android source code ... for some versions of Android.)\r\n\r\nFor more information on the &quot;binary&quot; representation of type names and method signatures, see the JVM Specification sections &#167;4.3.3 and &#167;4.3.4\r\n\r\n\r\n","title":"What does the parameter [CII[CIII in indexOf() method signify? I am using the the following non-SDK interfaces Ljava/lang/String;-&gt;indexOf([CII[CIII)I","body":"<p>The string:</p>\n<pre><code>Ljava/lang/String;-&gt;indexOf([CII[CIII)I\n</code></pre>\n<p>appears to be composed of the JVM's internal (&quot;binary&quot;) type name and a method signature.</p>\n<ol>\n<li><p><code>Ljava/lang/String;</code> is the internal name of the type <code>java.lang.String</code></p>\n</li>\n<li><p><code>indexOf([CII[CIII)I</code> denotes a method with this signature:</p>\n<pre><code>int indexOf(char[], int, int, char[], int, int, int)\n</code></pre>\n</li>\n<li><p>The <code>-&gt;</code> in this context means the classes method.</p>\n</li>\n</ol>\n<p>So in context, <code>Ljava/lang/String;-&gt;indexOf([CII[CIII)I</code> is saying that the <code>String.indexOf</code> method with that particular signature is blocked.</p>\n<p>(This is most likely referring to an <em>internal</em> overload of the <code>String.indexOf</code> methods that ordinary application code should never be using in the first place.   You won't see it in the javadocs, but if you will most likely find it if you look at the Android source code ... for some versions of Android.)</p>\n<p>For more information on the &quot;binary&quot; representation of type names and method signatures, see the JVM Specification sections §4.3.3 and §4.3.4</p>\n"}],"owner":{"account_id":18044313,"reputation":5,"user_id":13115699,"display_name":"Shreyas R"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73688553,"answer_count":1,"score":0,"last_activity_date":1662983226,"creation_date":1662980068,"question_id":73688160,"body_markdown":"I have a Android project which is using indexOf(&lt;String&gt;).\r\nThen while surfing through Android developers forum, I came across the restricted API that is blocked in API level 28. \r\n\r\nSo can anyone help me out in briefing what is the full meaning of this \r\n     API &quot;Ljava/lang/String;-&gt;indexOf([CII[CIII)I&quot; being blocked and what actually is the \r\n     parameter &quot;indexOf([CII[CIII)I&quot;\r\n\r\nRef link: https://developer.android.com/about/versions/12/non-sdk-12#list-changes\r\n\r\nThanks","title":"What does the parameter [CII[CIII in indexOf() method signify? I am using the the following non-SDK interfaces Ljava/lang/String;-&gt;indexOf([CII[CIII)I","body":"<p>I have a Android project which is using indexOf().\nThen while surfing through Android developers forum, I came across the restricted API that is blocked in API level 28.</p>\n<p>So can anyone help me out in briefing what is the full meaning of this\nAPI &quot;Ljava/lang/String;-&gt;indexOf([CII[CIII)I&quot; being blocked and what actually is the\nparameter &quot;indexOf([CII[CIII)I&quot;</p>\n<p>Ref link: <a href=\"https://developer.android.com/about/versions/12/non-sdk-12#list-changes\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/12/non-sdk-12#list-changes</a></p>\n<p>Thanks</p>\n"},{"tags":["java","multithreading","cpu-usage"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662982127,"creation_date":1662982127,"answer_id":73688571,"question_id":73687444,"body_markdown":"Total should be wait+cpu time. I guess your total thread time is short enough you might measure nothing, so at least the Thread.sleep() should help on total time.\r\n\r\nFor the total, somehow I believe you are comparing the ThreadClass thread vs the main/default thread. Compare these two lines:\r\n\r\n    Long tid=t.currentThread().getId();\r\n\r\n    Long tid = t.getId();\r\n\r\nSince the code is getting executed in the main thread, t.currentThread() returns the main thread where you intend to measure t.","title":"Calculating CPU time and Wait Time","body":"<p>Total should be wait+cpu time. I guess your total thread time is short enough you might measure nothing, so at least the Thread.sleep() should help on total time.</p>\n<p>For the total, somehow I believe you are comparing the ThreadClass thread vs the main/default thread. Compare these two lines:</p>\n<pre><code>Long tid=t.currentThread().getId();\n\nLong tid = t.getId();\n</code></pre>\n<p>Since the code is getting executed in the main thread, t.currentThread() returns the main thread where you intend to measure t.</p>\n"}],"owner":{"account_id":9184639,"reputation":103,"user_id":10432355,"display_name":"SUVAM ROY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":341,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662983138,"creation_date":1662976427,"question_id":73687444,"body_markdown":"To calculate ideal ThreadPool size in my project I have to calculate CPU time and Wait time for a thread. So I have made a dummy project something like this:\r\n\r\n    class  ThreadClass extends Thread\r\n    {\r\n        public static Long total;\r\n        public void run()\r\n        {\r\n            try\r\n            {\r\n                Long start=System.currentTimeMillis();\r\n                System.out.println(&quot;Starting at &quot;+start);\r\n                //Thread.sleep(1000);\r\n                System.out.println(&quot;thread is running...&quot;);\r\n                Long end=System.currentTimeMillis();\r\n                System.out.println(&quot;Ending at &quot;+end);\r\n                total=end-start;\r\n                System.out.println(&quot;Total &quot;+total);\r\n            }\r\n            catch (Exception e){}\r\n        }\r\n    }\r\n    public class Main3 {\r\n        public static void main(String[] args) {\r\n            ThreadClass t=new ThreadClass();\r\n            t.start();\r\n            Long tid=t.getId();//currentThread() still showing same\r\n            ThreadMXBean threadMXBean= ManagementFactory.getThreadMXBean();\r\n            long cpuTime = threadMXBean.getThreadCpuTime(tid)/1000000;\r\n            System.out.println(&quot;CPU time calculated in MAIN &quot;+cpuTime);\r\n        }\r\n    }\r\n\r\n&gt; The Value I am getting : Starting at 1662975991279 thread is\r\n&gt; running... Ending at 1662975991319 Total 40 CPU time calculated in\r\n&gt; MAIN 222\r\n\r\nNow my question is isn&#39;t the &quot;Total&quot; value is wait time + cpu time? Or is it the wait time only? And for this simple code why CPU time is 222 MS and how come this is higher than &quot;Total&quot;??\r\n\r\nAm I calculating correctly the CPU time and Wait time?","title":"Calculating CPU time and Wait Time","body":"<p>To calculate ideal ThreadPool size in my project I have to calculate CPU time and Wait time for a thread. So I have made a dummy project something like this:</p>\n<pre><code>class  ThreadClass extends Thread\n{\n    public static Long total;\n    public void run()\n    {\n        try\n        {\n            Long start=System.currentTimeMillis();\n            System.out.println(&quot;Starting at &quot;+start);\n            //Thread.sleep(1000);\n            System.out.println(&quot;thread is running...&quot;);\n            Long end=System.currentTimeMillis();\n            System.out.println(&quot;Ending at &quot;+end);\n            total=end-start;\n            System.out.println(&quot;Total &quot;+total);\n        }\n        catch (Exception e){}\n    }\n}\npublic class Main3 {\n    public static void main(String[] args) {\n        ThreadClass t=new ThreadClass();\n        t.start();\n        Long tid=t.getId();//currentThread() still showing same\n        ThreadMXBean threadMXBean= ManagementFactory.getThreadMXBean();\n        long cpuTime = threadMXBean.getThreadCpuTime(tid)/1000000;\n        System.out.println(&quot;CPU time calculated in MAIN &quot;+cpuTime);\n    }\n}\n</code></pre>\n<blockquote>\n<p>The Value I am getting : Starting at 1662975991279 thread is\nrunning... Ending at 1662975991319 Total 40 CPU time calculated in\nMAIN 222</p>\n</blockquote>\n<p>Now my question is isn't the &quot;Total&quot; value is wait time + cpu time? Or is it the wait time only? And for this simple code why CPU time is 222 MS and how come this is higher than &quot;Total&quot;??</p>\n<p>Am I calculating correctly the CPU time and Wait time?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1662973349,"post_id":73686795,"comment_id":130121333,"body_markdown":"So you want to replace only leading `+`, right? What about the trailing `+` in the first example, why did they vanish? What&#39;s the logic there? What&#39;s the expected output of the input `+1+2+`?","body":"So you want to replace only leading <code>+</code>, right? What about the trailing <code>+</code> in the first example, why did they vanish? What&#39;s the logic there? What&#39;s the expected output of the input <code>+1+2+</code>?"},{"owner":{"account_id":26295695,"reputation":117,"user_id":19961979,"display_name":"testjava dev"},"score":0,"creation_date":1662973537,"post_id":73686795,"comment_id":130121392,"body_markdown":"sorry, edited @JoachimSauer. +1 it would be %2b1 and for +2 it would be %2b2","body":"sorry, edited @JoachimSauer. +1 it would be %2b1 and for +2 it would be %2b2"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1662973813,"post_id":73686795,"comment_id":130121480,"body_markdown":"You need `&quot;^\\\\++&quot;`. `^` to indicate &quot;at the start of the input&quot; and the last `+` to mean &quot;one or more of what came before&quot;.","body":"You need <code>&quot;^\\\\++&quot;</code>. <code>^</code> to indicate &quot;at the start of the input&quot; and the last <code>+</code> to mean &quot;one or more of what came before&quot;."},{"owner":{"account_id":26295695,"reputation":117,"user_id":19961979,"display_name":"testjava dev"},"score":0,"creation_date":1662974281,"post_id":73686795,"comment_id":130121636,"body_markdown":"@JoachimSauer System.out.println(&quot;+++123&quot;.replaceFirst(&quot;^\\\\\\\\++&quot;, &quot;%2b&quot;)); doesn&#39;t work","body":"@JoachimSauer System.out.println(&quot;+++123&quot;.replaceFirst(&quot;^\\\\\\\\++&quot;, &quot;%2b&quot;)); doesn&#39;t work"},{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1662974281,"post_id":73686795,"comment_id":130121637,"body_markdown":"I m checking out other similar questions, [this](https://stackoverflow.com/a/19908722/10671013) should be a good reference","body":"I m checking out other similar questions, <a href=\"https://stackoverflow.com/a/19908722/10671013\">this</a> should be a good reference"},{"owner":{"account_id":26295695,"reputation":117,"user_id":19961979,"display_name":"testjava dev"},"score":0,"creation_date":1662974883,"post_id":73686795,"comment_id":130121841,"body_markdown":"@TanYuHauSean That also looks complex. Is any solution by iteration of character?","body":"@TanYuHauSean That also looks complex. Is any solution by iteration of character?"},{"owner":{"account_id":14632062,"reputation":585,"user_id":10671013,"display_name":"Tan Yu Hau Sean"},"score":0,"creation_date":1662975213,"post_id":73686795,"comment_id":130121980,"body_markdown":"it uses Pattern and Matcher, but it still is regex.","body":"it uses Pattern and Matcher, but it still is regex."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1662996030,"post_id":73686795,"comment_id":130129661,"body_markdown":"Is there a reason you have to do this with a single regular expresion?  Why not write a simple loop instead of a complex regex?","body":"Is there a reason you have to do this with a single regular expresion?  Why not write a simple loop instead of a complex regex?"}],"answers":[{"tags":[],"owner":{"account_id":4895,"reputation":136019,"user_id":7586,"accept_rate":83,"display_name":"Kobi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1662982869,"creation_date":1662980188,"answer_id":73688182,"question_id":73686795,"body_markdown":"This is a great use case for `\\G` - which matches the beginning of the string or at the position the previous match ended:\r\n\r\n    System.out.println(&quot;+++123++&quot;.replaceAll(&quot;\\\\G\\\\+&quot;, &quot;%2b&quot;));\r\n\r\nHere&#39;s another option that is more easily expandable:\r\n\r\n    import java.util.regex.Pattern;\r\n    import java.net.URLEncoder;\r\n    ...\r\n\r\n    String result = Pattern.compile(&quot;^\\\\++&quot;).matcher(&quot;+++123++&quot;)\r\n                         .replaceAll(mr -&gt; URLEncoder.encode(mr.group()).toLowerCase());\r\n\r\nHere we&#39;re using an overload of [relpaceAll](https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/regex/Matcher.html#replaceAll(java.util.function.Function)) that takes a callback and can dynamically calculate the result string, and [URLEncoder](https://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html) to get the right number of pluses. ","title":"Tricky Regex - Replace only the first occurrence and not the next occurence","body":"<p>This is a great use case for <code>\\G</code> - which matches the beginning of the string or at the position the previous match ended:</p>\n<pre><code>System.out.println(&quot;+++123++&quot;.replaceAll(&quot;\\\\G\\\\+&quot;, &quot;%2b&quot;));\n</code></pre>\n<p>Here's another option that is more easily expandable:</p>\n<pre><code>import java.util.regex.Pattern;\nimport java.net.URLEncoder;\n...\n\nString result = Pattern.compile(&quot;^\\\\++&quot;).matcher(&quot;+++123++&quot;)\n                     .replaceAll(mr -&gt; URLEncoder.encode(mr.group()).toLowerCase());\n</code></pre>\n<p>Here we're using an overload of <a href=\"https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/regex/Matcher.html#replaceAll(java.util.function.Function)\" rel=\"nofollow noreferrer\">relpaceAll</a> that takes a callback and can dynamically calculate the result string, and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html\" rel=\"nofollow noreferrer\">URLEncoder</a> to get the right number of pluses.</p>\n"}],"owner":{"account_id":26295695,"reputation":117,"user_id":19961979,"display_name":"testjava dev"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1662982869,"creation_date":1662973154,"question_id":73686795,"body_markdown":"Need to match and replace all first occurrences of plus alone with %2b\r\n\r\nExample  \r\n    \r\n    Input        Output\r\n    ++123++      %2b%2b123++\r\n    +++++12      %2b%2b%2b%2b%2b12\r\n    12           12\r\n    123+         123+\r\n    +1           %2b1\r\n    +2           %2b2\r\n\r\nHow to do this via regex? It is possible to do via character matching in java but wanted to see whether it is possible via regex pattern?\r\n\r\n`System.out.println(&quot;+++123&quot;.replaceFirst(&quot;\\\\+&quot;, &quot;%2b&quot;));` ==&gt; Just removes the first character alone","title":"Tricky Regex - Replace only the first occurrence and not the next occurence","body":"<p>Need to match and replace all first occurrences of plus alone with %2b</p>\n<p>Example</p>\n<pre><code>Input        Output\n++123++      %2b%2b123++\n+++++12      %2b%2b%2b%2b%2b12\n12           12\n123+         123+\n+1           %2b1\n+2           %2b2\n</code></pre>\n<p>How to do this via regex? It is possible to do via character matching in java but wanted to see whether it is possible via regex pattern?</p>\n<p><code>System.out.println(&quot;+++123&quot;.replaceFirst(&quot;\\\\+&quot;, &quot;%2b&quot;));</code> ==&gt; Just removes the first character alone</p>\n"},{"tags":["java","maven","quarkus"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1662550759,"post_id":73634817,"comment_id":130030717,"body_markdown":"It seems that your version of Hibernate doesn&#39;t support  Java 17 yet. It seems that only [5.6, 6.1 and newer support Java 17](https://hibernate.org/orm/releases/#compatibility-matrix). Which version are you using?","body":"It seems that your version of Hibernate doesn&#39;t support  Java 17 yet. It seems that only <a href=\"https://hibernate.org/orm/releases/#compatibility-matrix\" rel=\"nofollow noreferrer\">5.6, 6.1 and newer support Java 17</a>. Which version are you using?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1662550822,"post_id":73634817,"comment_id":130030743,"body_markdown":"looks as if some of your _org.hibernate.bytecode.enhance_ dependency cannot cope with bytecode produced by Java 17. Can you add the dependencies and their versions that you have that could contain that package or Exception class? (Please also have a look into transitive deps)","body":"looks as if some of your <i>org.hibernate.bytecode.enhance</i> dependency cannot cope with bytecode produced by Java 17. Can you add the dependencies and their versions that you have that could contain that package or Exception class? (Please also have a look into transitive deps)"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1662551246,"post_id":73634817,"comment_id":130030913,"body_markdown":"That means `Unsupported class file major version 61` you are using a JDK less than 17 ... Is that a spring boot project?","body":"That means <code>Unsupported class file major version 61</code> you are using a JDK less than 17 ... Is that a spring boot project?"},{"owner":{"account_id":13409260,"reputation":629,"user_id":9676335,"display_name":"quinzo    "},"score":0,"creation_date":1662551592,"post_id":73634817,"comment_id":130031065,"body_markdown":"I use: openjdk 17.0.4 2022-07-19 LTS\nOpenJDK Runtime Environment Corretto-17.0.4.8.1 (build 17.0.4+8-LTS)\nOpenJDK 64-Bit Server VM Corretto-17.0.4.8.1 (build 17.0.4+8-LTS, mixed mode, sharing)","body":"I use: openjdk 17.0.4 2022-07-19 LTS OpenJDK Runtime Environment Corretto-17.0.4.8.1 (build 17.0.4+8-LTS) OpenJDK 64-Bit Server VM Corretto-17.0.4.8.1 (build 17.0.4+8-LTS, mixed mode, sharing)"},{"owner":{"account_id":13409260,"reputation":629,"user_id":9676335,"display_name":"quinzo    "},"score":0,"creation_date":1662551704,"post_id":73634817,"comment_id":130031115,"body_markdown":"I add all used dependencies and how can I find out which hibernate version am I using?","body":"I add all used dependencies and how can I find out which hibernate version am I using?"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1662553473,"post_id":73634817,"comment_id":130031851,"body_markdown":"@quinzo: it seems you only have hibernate as a transient dependency. You need to use something like `dependency:tree` to find out which version of hibernate you end up using and then either update that directly or update to a newer version of whatever ends up pulling in hibernate that depends on a newever version.","body":"@quinzo: it seems you only have hibernate as a transient dependency. You need to use something like <code>dependency:tree</code> to find out which version of hibernate you end up using and then either update that directly or update to a newer version of whatever ends up pulling in hibernate that depends on a newever version."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1662553812,"post_id":73634817,"comment_id":130031995,"body_markdown":"@khmarbaise normally this is the reason, appears to be hibernate here","body":"@khmarbaise normally this is the reason, appears to be hibernate here"}],"answers":[{"tags":[],"owner":{"account_id":13409260,"reputation":629,"user_id":9676335,"display_name":"quinzo    "},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662982603,"creation_date":1662982603,"answer_id":73688656,"question_id":73634817,"body_markdown":"Well my problem was that I forget to update my quarkus dependency. Hope this will help someone in the future :)","title":"Unsupported class file major version 61, trying to migrate from Java 11 to Java 17","body":"<p>Well my problem was that I forget to update my quarkus dependency. Hope this will help someone in the future :)</p>\n"}],"owner":{"account_id":13409260,"reputation":629,"user_id":9676335,"display_name":"quinzo    "},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1898,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662982603,"creation_date":1662550578,"question_id":73634817,"body_markdown":"I try to migrate a Java 11 project to Java 17. With Java 11 environment, the project runs without any issues. But in Java 17 I get the following error:\r\n\r\n    Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.791 s &lt;&lt;&lt; FAILURE! - in userservice.controller.UserControllerTest\r\n    userservice.controller.UserControllerTest  Time elapsed: 1.791 s  &lt;&lt;&lt; ERROR!\r\n    java.lang.RuntimeException: java.lang.ExceptionInInitializerError\r\n    Caused by: java.lang.ExceptionInInitializerError\r\n    Caused by: java.lang.RuntimeException: Failed to start quarkus\r\n    Caused by: java.lang.RuntimeException: Failed to initialize Arc\r\n    Caused by: java.lang.ExceptionInInitializerError\r\n    Caused by: org.hibernate.bytecode.enhance.spi.EnhancementException: Failed to enhance class userservice.persistence.entities.UserEntity\r\n    Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 61\r\n\r\nMy UserEntity class looks like this:\r\n\r\n    package userservice.persistence.entities;\r\n    \r\n    import javax.persistence.*;\r\n    import java.util.Objects;\r\n    \r\n    @Entity(name=&quot;user&quot;)\r\n    @Table(name=&quot;user&quot;)\r\n    @NamedQuery(name = &quot;User.findAll&quot;, query = &quot;SELECT u FROM user u ORDER BY u.email&quot;)\r\n    @NamedQuery(name = &quot;User.findByEmail&quot;, query = &quot;SELECT u FROM user u WHERE u.email = :email&quot;)\r\n    public class UserEntity {\r\n    \r\n        public static final String QUERY_FIND_ALL = &quot;User.findAll&quot;;\r\n        public static final String QUERY_FIND_BY_EMAIL = &quot;User.findByEmail&quot;;\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n        @Column(unique = true)\r\n        private String email;\r\n    \r\n        public UserEntity() {}\r\n    \r\n        // basic setter, getter for email and id...\r\n        // and basic equals, toString and hashCode methods...\r\n    \r\n    }\r\n\r\nWhat am I missing..would be glad if someone could help me.\r\n\r\nEdit:\r\nHere are the Dependencies I use in the quarkus project:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-resteasy&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-kubernetes&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-container-image-docker&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-junit5&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\r\n          &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-resteasy-jackson&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-hibernate-orm&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-test-h2&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-jdbc-mysql&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-liquibase&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n          &lt;version&gt;1.18.24&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-hibernate-validator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-oidc&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-junit5-mockito&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n          &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-test-security&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;own.repo.costcenter&lt;/groupId&gt;\r\n          &lt;artifactId&gt;common-lib&lt;/artifactId&gt;\r\n          &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n          &lt;artifactId&gt;quarkus-jdbc-postgresql&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;","title":"Unsupported class file major version 61, trying to migrate from Java 11 to Java 17","body":"<p>I try to migrate a Java 11 project to Java 17. With Java 11 environment, the project runs without any issues. But in Java 17 I get the following error:</p>\n<pre><code>Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.791 s &lt;&lt;&lt; FAILURE! - in userservice.controller.UserControllerTest\nuserservice.controller.UserControllerTest  Time elapsed: 1.791 s  &lt;&lt;&lt; ERROR!\njava.lang.RuntimeException: java.lang.ExceptionInInitializerError\nCaused by: java.lang.ExceptionInInitializerError\nCaused by: java.lang.RuntimeException: Failed to start quarkus\nCaused by: java.lang.RuntimeException: Failed to initialize Arc\nCaused by: java.lang.ExceptionInInitializerError\nCaused by: org.hibernate.bytecode.enhance.spi.EnhancementException: Failed to enhance class userservice.persistence.entities.UserEntity\nCaused by: java.lang.IllegalArgumentException: Unsupported class file major version 61\n</code></pre>\n<p>My UserEntity class looks like this:</p>\n<pre><code>package userservice.persistence.entities;\n\nimport javax.persistence.*;\nimport java.util.Objects;\n\n@Entity(name=&quot;user&quot;)\n@Table(name=&quot;user&quot;)\n@NamedQuery(name = &quot;User.findAll&quot;, query = &quot;SELECT u FROM user u ORDER BY u.email&quot;)\n@NamedQuery(name = &quot;User.findByEmail&quot;, query = &quot;SELECT u FROM user u WHERE u.email = :email&quot;)\npublic class UserEntity {\n\n    public static final String QUERY_FIND_ALL = &quot;User.findAll&quot;;\n    public static final String QUERY_FIND_BY_EMAIL = &quot;User.findByEmail&quot;;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(unique = true)\n    private String email;\n\n    public UserEntity() {}\n\n    // basic setter, getter for email and id...\n    // and basic equals, toString and hashCode methods...\n\n}\n</code></pre>\n<p>What am I missing..would be glad if someone could help me.</p>\n<p>Edit:\nHere are the Dependencies I use in the quarkus project:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-resteasy&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-kubernetes&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-container-image-docker&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-junit5&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;\n      &lt;artifactId&gt;rest-assured&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-resteasy-jackson&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-hibernate-orm&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-test-h2&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-jdbc-mysql&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-liquibase&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n      &lt;version&gt;1.18.24&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-hibernate-validator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-oidc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-junit5-mockito&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n      &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-test-security&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;own.repo.costcenter&lt;/groupId&gt;\n      &lt;artifactId&gt;common-lib&lt;/artifactId&gt;\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-jdbc-postgresql&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","file","apache-camel","camel-ftp"],"comments":[{"owner":{"account_id":1362824,"reputation":420,"user_id":1299861,"accept_rate":59,"display_name":"Srini"},"score":0,"creation_date":1662125557,"post_id":73579284,"comment_id":129940221,"body_markdown":"As long as your charset is UTF-8, you won&#39;t face any issues. How are you checking the file name header inside the processor (debug mode on your IDE ?)","body":"As long as your charset is UTF-8, you won&#39;t face any issues. How are you checking the file name header inside the processor (debug mode on your IDE ?)"},{"owner":{"account_id":24410828,"reputation":1,"user_id":18338310,"display_name":"beyza aydın"},"score":0,"creation_date":1662982184,"post_id":73579284,"comment_id":130124274,"body_markdown":"I use a processor for accessing Exchange.FILE_NAME header. I will update my question","body":"I use a processor for accessing Exchange.FILE_NAME header. I will update my question"}],"owner":{"account_id":24410828,"reputation":1,"user_id":18338310,"display_name":"beyza aydın"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662982588,"creation_date":1662104415,"question_id":73579284,"body_markdown":"I am working on a ftp route that gets a file from one endpoint and moves to another. If file has non english characters like &#246;,&#231;,ğ etc. filename in the header wont be correct. But when saved to endpoint filename seems to fine. I believe this is because program and windows 10 uses different encodings. But I have no idea to how to fix it.\r\n   \r\n - For example; the original file name is aslan *&#231;ilek.txt* becomes\r\n   *aslan &#195;&#167;ilek* when the file enters the processor.\r\n\r\n***EDIT\r\n\r\n```\r\n                    from(...)\r\n                    .convertBodyTo(String.class, &quot;UTF-8&quot;)\r\n                        .process(new Processor() {\r\n                            @Override\r\n                            public void process(Exchange exchange) throws \r\n                                Exception {\r\n                                String fileName =exchange.getIn().getHeader(Exchange.FILE_NAME).toString();\r\n                                String newFn = fileName.substring(0, fileName.indexOf(&#39;.&#39;)) + &quot;_&quot;\r\n                                        + sdf.format(new Date()) + fileName.substring(fileName.indexOf(&#39;.&#39;));\r\n                                exchange.getIn().setHeader(&quot;CamelFileName&quot;, newFn);\r\n                            }\r\n                        })\r\n                        .doTry()\r\n                        .to(...)\r\n                        .bean(x.class, &quot;successfulLog(*,${file:name})&quot;)\r\n                        .doCatch(Exception.class)\r\n                        .bean(x.class, &quot;failedLog(*,${file:name},${exception.message})&quot;);\r\n```\r\n\r\n\r\nconvertBodyTo(String.class, &quot;UTF-8&quot;) is added after the special character problem. With or without I still have the same problem.\r\n","title":"Apache Camel FTP File Name Non English Character Encoding Problem","body":"<p>I am working on a ftp route that gets a file from one endpoint and moves to another. If file has non english characters like ö,ç,ğ etc. filename in the header wont be correct. But when saved to endpoint filename seems to fine. I believe this is because program and windows 10 uses different encodings. But I have no idea to how to fix it.</p>\n<ul>\n<li>For example; the original file name is aslan <em>çilek.txt</em> becomes\n<em>aslan Ã§ilek</em> when the file enters the processor.</li>\n</ul>\n<p>***EDIT</p>\n<pre><code>                    from(...)\n                    .convertBodyTo(String.class, &quot;UTF-8&quot;)\n                        .process(new Processor() {\n                            @Override\n                            public void process(Exchange exchange) throws \n                                Exception {\n                                String fileName =exchange.getIn().getHeader(Exchange.FILE_NAME).toString();\n                                String newFn = fileName.substring(0, fileName.indexOf('.')) + &quot;_&quot;\n                                        + sdf.format(new Date()) + fileName.substring(fileName.indexOf('.'));\n                                exchange.getIn().setHeader(&quot;CamelFileName&quot;, newFn);\n                            }\n                        })\n                        .doTry()\n                        .to(...)\n                        .bean(x.class, &quot;successfulLog(*,${file:name})&quot;)\n                        .doCatch(Exception.class)\n                        .bean(x.class, &quot;failedLog(*,${file:name},${exception.message})&quot;);\n</code></pre>\n<p>convertBodyTo(String.class, &quot;UTF-8&quot;) is added after the special character problem. With or without I still have the same problem.</p>\n"},{"tags":["java","eclipse","version"],"answers":[{"tags":[],"owner":{"account_id":1252478,"reputation":1866,"user_id":1212605,"display_name":"raddykrish"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1336014265,"creation_date":1336014265,"answer_id":10424549,"question_id":10424528,"body_markdown":"In eclipse go to `Window -&gt; Preferences -&gt; Java -&gt; Compiler`, there you can change the java versions. Hope it helps.","title":"Changing Java Version From Within Eclipse","body":"<p>In eclipse go to <code>Window -&gt; Preferences -&gt; Java -&gt; Compiler</code>, there you can change the java versions. Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":187942,"reputation":1117,"user_id":426360,"display_name":"MohanaRao SV"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1336014543,"creation_date":1336014543,"answer_id":10424574,"question_id":10424528,"body_markdown":"In myeclipse select the project -&gt; properties -&gt; java compiler -&gt; there you can specify jdk version.","title":"Changing Java Version From Within Eclipse","body":"<p>In myeclipse select the project -> properties -> java compiler -> there you can specify jdk version.</p>\n"},{"tags":[],"owner":{"account_id":3460314,"reputation":623,"user_id":2897653,"display_name":"akshaymani"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1390476014,"creation_date":1390476014,"answer_id":21306662,"question_id":10424528,"body_markdown":"Ideally if we want to have two different versions of Java [say 1.6 and 1.7], then we should have two workspace defined accordingly to avoid any mixup. We can also change the Project Facets if our projects has facets that is.\r\n\r\nIn Eclipse Follow steps given below: \r\n1) Windows -&gt; Preferences -&gt; Java -&gt; Compiler and as per the image set the compliance compiler level as per your requirements.\r\n![Compiler Compliance Level Not Project Specific][1]\r\n\r\n\r\n2) Windows -&gt; Preferences -&gt; Java -&gt; Installed JRE&#39;s and check if your required jre/jdk is available or not as given in image below: \r\n![Installed JRE&#39;s Not Project Specific][2]\r\n\r\n3) Right Click on Your Project and go to Java Build Path and check if your required Library is available or not as per image given below:\r\n![Java Build Path Project Specific][3]\r\n\r\n4) Now you can edit the JRE System Library or add one by clicking on button&#39;s available on last image&#39;s right side, then a pop up as given below will open up. Here, you can change the execution environment [default values also can be set]\r\n![Edit/Add Library][4]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/J8Cm2.png\r\n  [2]: http://i.stack.imgur.com/lIisy.png\r\n  [3]: http://i.stack.imgur.com/6QmnL.png\r\n  [4]: http://i.stack.imgur.com/RyFCd.png","title":"Changing Java Version From Within Eclipse","body":"<p>Ideally if we want to have two different versions of Java [say 1.6 and 1.7], then we should have two workspace defined accordingly to avoid any mixup. We can also change the Project Facets if our projects has facets that is.</p>\n\n<p>In Eclipse Follow steps given below: \n1) Windows -> Preferences -> Java -> Compiler and as per the image set the compliance compiler level as per your requirements.\n<img src=\"https://i.stack.imgur.com/J8Cm2.png\" alt=\"Compiler Compliance Level Not Project Specific\"></p>\n\n<p>2) Windows -> Preferences -> Java -> Installed JRE's and check if your required jre/jdk is available or not as given in image below: \n<img src=\"https://i.stack.imgur.com/lIisy.png\" alt=\"Installed JRE&#39;s Not Project Specific\"></p>\n\n<p>3) Right Click on Your Project and go to Java Build Path and check if your required Library is available or not as per image given below:\n<img src=\"https://i.stack.imgur.com/6QmnL.png\" alt=\"Java Build Path Project Specific\"></p>\n\n<p>4) Now you can edit the JRE System Library or add one by clicking on button's available on last image's right side, then a pop up as given below will open up. Here, you can change the execution environment [default values also can be set]\n<img src=\"https://i.stack.imgur.com/RyFCd.png\" alt=\"Edit/Add Library\"></p>\n"},{"tags":[],"owner":{"account_id":4692777,"reputation":49,"user_id":3798483,"display_name":"Ra&#250;l Vela"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662982427,"creation_date":1662970261,"answer_id":73686263,"question_id":10424528,"body_markdown":"Easy\r\n\r\n1. Download the jdk from Oracle&#39;s official website for the version you want to compile your project with.\r\n\r\n[JDK Oracle&#39;s official][1]\r\n\r\n2. create a new Java project\r\n\r\n[![enter image description here][2]\r\n\r\n3. Once the project has been generated, If you select the part that says *Configure JREs*\r\n\r\n[![enter image description here][3]][3]\r\n\r\n4. By default eclipse will use the version you have installed on your system so if you don&#39;t change this configuration you will never be able to run the program with the build you need, in this case I will use jdk 1.8. \r\n\r\n5. After pressing **Add**  \r\n\r\n[![enter image description here][4]][4]\r\n\r\n5.1 And choose the option select the 3rd option in this case, called **Standard VM** and press **Next**\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n6. Now eclipse asks us to indicate the path where the libraries and other content is located in order to compile and run the program, we only have to indicate the directory where it is located. \r\n\r\n[![enter image description here][6]][6]\r\n\r\n\r\n7. As my goal is to run a program with the JRE 8 , I will look for the directory path where the download described in option 1 of this message is located.\r\n\r\n[![enter image description here][7]][7]\r\n\r\n8. As a quick example, since I just want my program to compile without worrying about anything else, I will add all the contents of my address.\r\n\r\n[![enter image description here][8]][8]\r\n\r\n9. Now we change by clicking on the JRE we want to compile our program, to be changed to the original default so that the new selection is executed ; and finally we press **Apply and Close** and **Next**\r\n\r\n[![enter image description here][9]][9]\r\n\r\n10. Press **Finish** to create the project\r\n\r\n[![enter image description here][10]][10]\r\n\r\n11. Now we have the whole project with all the necessary content to compile and run it.\r\n\r\n[![enter image description here][11]][11]\r\n\r\nPersonally I think this is the quickest and cleanest way to do it ; the problem I encountered when I changed JDK is that when compiling I couldn&#39;t find the directory with the necessary components to run it, you had to download it and configure it together with the default parameters, which can cause a lot of headaches for less experienced users.\r\n\r\nFinally, this is the version of eclipse that I am using\r\n\r\n[![enter image description here][12]][12]\r\n\r\nI hope you find this system useful, I use it to be able to run old examples that use **applets** , which are obsolete classes and jvm does not compile.\r\n\r\n  [1]: https://www.oracle.com/java/technologies/downloads/archive/\r\n  [2]: https://i.stack.imgur.com/ayj2j.png\r\n  [3]: https://i.stack.imgur.com/Iqyqm.png\r\n  [4]: https://i.stack.imgur.com/FXgvA.png\r\n  [5]: https://i.stack.imgur.com/I4Xd6.png\r\n  [6]: https://i.stack.imgur.com/GxVC5.png\r\n  [7]: https://i.stack.imgur.com/Cr8CY.png\r\n  [8]: https://i.stack.imgur.com/gbyTo.png\r\n  [9]: https://i.stack.imgur.com/CJ8As.png\r\n  [10]: https://i.stack.imgur.com/FAmZR.png\r\n  [11]: https://i.stack.imgur.com/xXutt.png\r\n  [12]: https://i.stack.imgur.com/6xNTm.png","title":"Changing Java Version From Within Eclipse","body":"<p>Easy</p>\n<ol>\n<li>Download the jdk from Oracle's official website for the version you want to compile your project with.</li>\n</ol>\n<p><a href=\"https://www.oracle.com/java/technologies/downloads/archive/\" rel=\"nofollow noreferrer\">JDK Oracle's official</a></p>\n<ol start=\"2\">\n<li>create a new Java project</li>\n</ol>\n<p>[<img src=\"https://i.stack.imgur.com/ayj2j.png\" alt=\"enter image description here\" /></p>\n<ol start=\"3\">\n<li>Once the project has been generated, If you select the part that says <em>Configure JREs</em></li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/Iqyqm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Iqyqm.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"4\">\n<li><p>By default eclipse will use the version you have installed on your system so if you don't change this configuration you will never be able to run the program with the build you need, in this case I will use jdk 1.8.</p>\n</li>\n<li><p>After pressing <strong>Add</strong></p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/FXgvA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FXgvA.png\" alt=\"enter image description here\" /></a></p>\n<p>5.1 And choose the option select the 3rd option in this case, called <strong>Standard VM</strong> and press <strong>Next</strong></p>\n<p><a href=\"https://i.stack.imgur.com/I4Xd6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I4Xd6.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"6\">\n<li>Now eclipse asks us to indicate the path where the libraries and other content is located in order to compile and run the program, we only have to indicate the directory where it is located.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/GxVC5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GxVC5.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"7\">\n<li>As my goal is to run a program with the JRE 8 , I will look for the directory path where the download described in option 1 of this message is located.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/Cr8CY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cr8CY.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"8\">\n<li>As a quick example, since I just want my program to compile without worrying about anything else, I will add all the contents of my address.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/gbyTo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gbyTo.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"9\">\n<li>Now we change by clicking on the JRE we want to compile our program, to be changed to the original default so that the new selection is executed ; and finally we press <strong>Apply and Close</strong> and <strong>Next</strong></li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/CJ8As.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CJ8As.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"10\">\n<li>Press <strong>Finish</strong> to create the project</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/FAmZR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FAmZR.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"11\">\n<li>Now we have the whole project with all the necessary content to compile and run it.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/xXutt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xXutt.png\" alt=\"enter image description here\" /></a></p>\n<p>Personally I think this is the quickest and cleanest way to do it ; the problem I encountered when I changed JDK is that when compiling I couldn't find the directory with the necessary components to run it, you had to download it and configure it together with the default parameters, which can cause a lot of headaches for less experienced users.</p>\n<p>Finally, this is the version of eclipse that I am using</p>\n<p><a href=\"https://i.stack.imgur.com/6xNTm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6xNTm.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope you find this system useful, I use it to be able to run old examples that use <strong>applets</strong> , which are obsolete classes and jvm does not compile.</p>\n"}],"owner":{"account_id":1389475,"reputation":183,"user_id":1320668,"display_name":"user1320668"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106001,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":4,"score":18,"last_activity_date":1662982427,"creation_date":1336013983,"question_id":10424528,"body_markdown":"I wrote a project in eclipse with an older version of java.\r\nNow on a different computer but running the same codes I&#39;m getting a whole lot of red.\r\n\r\nThis is due to Version incompatibility.\r\nI&#39;ve had my professor change the Java version from within the console window before. The code compiled just fine after he did so. I&#39;m sure its the same case with this code.\r\n\r\nAfter looking at other tutorials and google links I could only find command line approaches and @override methods. To be honest I still don&#39;t understand these. \r\n\r\nWhat is the best way to change the version of a code originally written in an older code inside the eclipse console?\r\nthanks!","title":"Changing Java Version From Within Eclipse","body":"<p>I wrote a project in eclipse with an older version of java.\nNow on a different computer but running the same codes I'm getting a whole lot of red.</p>\n\n<p>This is due to Version incompatibility.\nI've had my professor change the Java version from within the console window before. The code compiled just fine after he did so. I'm sure its the same case with this code.</p>\n\n<p>After looking at other tutorials and google links I could only find command line approaches and @override methods. To be honest I still don't understand these. </p>\n\n<p>What is the best way to change the version of a code originally written in an older code inside the eclipse console?\nthanks!</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":17154024,"reputation":1962,"user_id":12415339,"display_name":"Happy-Monad"},"score":0,"creation_date":1605264755,"post_id":64801023,"comment_id":114603848,"body_markdown":"In the line `Product product = doc.toObject(Product.class);` are you getting some value?","body":"In the line <code>Product product = doc.toObject(Product.class);</code> are you getting some value?"},{"owner":{"account_id":19955117,"reputation":81,"user_id":14623896,"display_name":"Saket Mishra"},"score":0,"creation_date":1605266564,"post_id":64801023,"comment_id":114604472,"body_markdown":"Yes I made some changes and now I am able to search but I am not able to show it in recycler view as per already created room. Means I am not able to show the searched product getting some binding issue.","body":"Yes I made some changes and now I am able to search but I am not able to show it in recycler view as per already created room. Means I am not able to show the searched product getting some binding issue."}],"owner":{"account_id":19955117,"reputation":81,"user_id":14623896,"display_name":"Saket Mishra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662982336,"creation_date":1605172581,"question_id":64801023,"body_markdown":"    package ml.daily.basket;\r\n    \r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    \r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.appcompat.widget.SearchView;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n    \r\n    import com.google.firebase.firestore.CollectionReference;\r\n    import com.google.firebase.firestore.DocumentSnapshot;\r\n    import com.google.firebase.firestore.EventListener;\r\n    import com.google.firebase.firestore.FirebaseFirestore;\r\n    import com.google.firebase.firestore.FirebaseFirestoreException;\r\n    import com.google.firebase.firestore.QuerySnapshot;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    \r\n    import ml.daily.basket.data.Product;\r\n    \r\n    public class search extends AppCompatActivity {\r\n        private CollectionReference collectionReference;\r\n        RecyclerView recyclerView;\r\n        SearchView searchView;\r\n        private verticalProductScrollAdapter adapter;\r\n        private FirebaseFirestore db;\r\n        private List&lt;Product&gt; productData=new ArrayList&lt;&gt;();\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_search);\r\n            recyclerView = findViewById(R.id.search_Results);\r\n            searchView = (SearchView)findViewById(R.id.searchView);\r\n            db = FirebaseFirestore.getInstance();\r\n            getData();\r\n    \r\n            if (searchView!=null){\r\n                searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\r\n                    @Override\r\n                    public boolean onQueryTextSubmit(String query) {\r\n                        //Toast.makeText(MainActivity.this, &quot;SEARCH &quot; + query, Toast.LENGTH_LONG).show();\r\n                        searchUsers(query);\r\n                        return true;\r\n                    }\r\n    \r\n                    @Override\r\n                    public boolean onQueryTextChange(String newText) {\r\n                        //Toast.makeText(MainActivity.this, &quot;SEARCH &quot; + newText, Toast.LENGTH_LONG).show();\r\n                        searchUsers(newText);\r\n                        return false;\r\n                    }\r\n                });\r\n    \r\n            }\r\n    \r\n    \r\n        }\r\n\r\nThis method gets products from Firebase but in the log, I am getting an empty array.\r\n\r\n        private void getData(){\r\n            db.collection(&quot;milk&quot;).whereEqualTo(&quot;milk&quot;,1).addSnapshotListener(new EventListener&lt;QuerySnapshot&gt;() {\r\n                @Override\r\n                public void onEvent(@Nullable QuerySnapshot value, @Nullable FirebaseFirestoreException error) {\r\n                   if (error != null){\r\n                       System.err.println(&quot;Listen failed:&quot; + error);\r\n                       return;\r\n                   }\r\n                    Log.d(&quot;ds&quot;, value + &quot; =&gt; &quot;);\r\n                   for (DocumentSnapshot doc: value){\r\n                       Product product = doc.toObject(Product.class);\r\n                       productData.add(product);\r\n                   }\r\n                    updateProduct(productData);\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void searchUsers(String recherche) {\r\n            if (recherche.length() &gt; 0)\r\n                recherche = recherche.substring(0, 1).toUpperCase() + recherche.substring(1).toLowerCase();\r\n    \r\n            List&lt;Product&gt; results = new ArrayList&lt;&gt;();\r\n            for(Product product : productData){\r\n                if(product.getProductName() != null &amp;&amp; product.getProductName().contains(recherche)){\r\n                    results.add(product);\r\n                }\r\n            }\r\n            updateProduct(results);\r\n        }\r\n        \r\nTo set the updated product in the recycler view.\r\n    \r\n        private void updateProduct(List&lt;Product&gt; productData) {\r\n    \r\n            //Sort the list by id\r\n    \r\n            Collections.sort(productData, new Comparator&lt;Product&gt;() {\r\n                @Override\r\n                public int compare(Product o1, Product o2) {\r\n                    int res = -1;\r\n                    if (o1.getId() &gt; (o2.getId())) {\r\n                        res = 1;\r\n                    }\r\n                    return res;\r\n                }\r\n            });\r\n            Log.d(&quot;search is&quot;, String.valueOf(productData));\r\n        }\r\n    \r\n        \r\n    \r\n    }\r\n\r\n","title":"I am using a product room and storing Firestore data in a list and then implementing search on that list but I am getting empty array as search result","body":"<pre><code>package ml.daily.basket;\n\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.appcompat.widget.SearchView;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport com.google.firebase.firestore.CollectionReference;\nimport com.google.firebase.firestore.DocumentSnapshot;\nimport com.google.firebase.firestore.EventListener;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.FirebaseFirestoreException;\nimport com.google.firebase.firestore.QuerySnapshot;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.List;\n\nimport ml.daily.basket.data.Product;\n\npublic class search extends AppCompatActivity {\n    private CollectionReference collectionReference;\n    RecyclerView recyclerView;\n    SearchView searchView;\n    private verticalProductScrollAdapter adapter;\n    private FirebaseFirestore db;\n    private List&lt;Product&gt; productData=new ArrayList&lt;&gt;();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_search);\n        recyclerView = findViewById(R.id.search_Results);\n        searchView = (SearchView)findViewById(R.id.searchView);\n        db = FirebaseFirestore.getInstance();\n        getData();\n\n        if (searchView!=null){\n            searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\n                @Override\n                public boolean onQueryTextSubmit(String query) {\n                    //Toast.makeText(MainActivity.this, &quot;SEARCH &quot; + query, Toast.LENGTH_LONG).show();\n                    searchUsers(query);\n                    return true;\n                }\n\n                @Override\n                public boolean onQueryTextChange(String newText) {\n                    //Toast.makeText(MainActivity.this, &quot;SEARCH &quot; + newText, Toast.LENGTH_LONG).show();\n                    searchUsers(newText);\n                    return false;\n                }\n            });\n\n        }\n\n\n    }\n</code></pre>\n<p>This method gets products from Firebase but in the log, I am getting an empty array.</p>\n<pre><code>    private void getData(){\n        db.collection(&quot;milk&quot;).whereEqualTo(&quot;milk&quot;,1).addSnapshotListener(new EventListener&lt;QuerySnapshot&gt;() {\n            @Override\n            public void onEvent(@Nullable QuerySnapshot value, @Nullable FirebaseFirestoreException error) {\n               if (error != null){\n                   System.err.println(&quot;Listen failed:&quot; + error);\n                   return;\n               }\n                Log.d(&quot;ds&quot;, value + &quot; =&gt; &quot;);\n               for (DocumentSnapshot doc: value){\n                   Product product = doc.toObject(Product.class);\n                   productData.add(product);\n               }\n                updateProduct(productData);\n            }\n        });\n    }\n\n    private void searchUsers(String recherche) {\n        if (recherche.length() &gt; 0)\n            recherche = recherche.substring(0, 1).toUpperCase() + recherche.substring(1).toLowerCase();\n\n        List&lt;Product&gt; results = new ArrayList&lt;&gt;();\n        for(Product product : productData){\n            if(product.getProductName() != null &amp;&amp; product.getProductName().contains(recherche)){\n                results.add(product);\n            }\n        }\n        updateProduct(results);\n    }\n    \n</code></pre>\n<p>To set the updated product in the recycler view.</p>\n<pre><code>    private void updateProduct(List&lt;Product&gt; productData) {\n\n        //Sort the list by id\n\n        Collections.sort(productData, new Comparator&lt;Product&gt;() {\n            @Override\n            public int compare(Product o1, Product o2) {\n                int res = -1;\n                if (o1.getId() &gt; (o2.getId())) {\n                    res = 1;\n                }\n                return res;\n            }\n        });\n        Log.d(&quot;search is&quot;, String.valueOf(productData));\n    }\n\n    \n\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7302782,"reputation":158,"user_id":5564845,"display_name":"Saurabh"},"score":0,"creation_date":1662981812,"post_id":73688454,"comment_id":130124121,"body_markdown":"Crash log isn&#39;t clear but isn&#39;t there is change for apps targeting android 12 or higher you need to add  android:exported=&quot;true&quot; in Launcher activity tag. It does give security exception we don&#39;t add it and run-on android 12 or higher.","body":"Crash log isn&#39;t clear but isn&#39;t there is change for apps targeting android 12 or higher you need to add  android:exported=&quot;true&quot; in Launcher activity tag. It does give security exception we don&#39;t add it and run-on android 12 or higher."},{"owner":{"account_id":4557644,"reputation":326,"user_id":3700915,"accept_rate":62,"display_name":"eXistenZ"},"score":0,"creation_date":1662982566,"post_id":73688454,"comment_id":130124413,"body_markdown":"That&#39;s all I have in the crash log. I forgot to mention, this happens on a few Android versions, from Android 7 to Android 11, looks like no Android 12. I also already have android:exported=&quot;true&quot; in launcher activity tag.","body":"That&#39;s all I have in the crash log. I forgot to mention, this happens on a few Android versions, from Android 7 to Android 11, looks like no Android 12. I also already have android:exported=&quot;true&quot; in launcher activity tag."}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662982238,"creation_date":1662982238,"answer_id":73688591,"question_id":73688454,"body_markdown":"If you rewrite your code as:\r\n\r\n```java\r\nString url = &quot;https://www.google.com/&quot;; // any URL\r\nIntent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));\r\n\r\ntry {\r\n    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url))); // crashes here on some devices\r\n} catch (Throwable t) {\r\n    showToast(getApplicationContext(), &quot;No application found to handle the link.&quot;);\r\n}\r\n```\r\n\r\n...now you handle any reason why you cannot start the activity. It also works on Android 11+ where you might need a `&lt;queries&gt;` element in your manifest for that `resolveActivity()` call.","title":"java.lang.SecurityException for startActivity URL on some devices","body":"<p>If you rewrite your code as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String url = &quot;https://www.google.com/&quot;; // any URL\nIntent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));\n\ntry {\n    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url))); // crashes here on some devices\n} catch (Throwable t) {\n    showToast(getApplicationContext(), &quot;No application found to handle the link.&quot;);\n}\n</code></pre>\n<p>...now you handle any reason why you cannot start the activity. It also works on Android 11+ where you might need a <code>&lt;queries&gt;</code> element in your manifest for that <code>resolveActivity()</code> call.</p>\n"}],"owner":{"account_id":4557644,"reputation":326,"user_id":3700915,"accept_rate":62,"display_name":"eXistenZ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1662982272,"creation_date":1662981504,"question_id":73688454,"body_markdown":"I am getting this crash on some devices and I can&#39;t figure out why, I can&#39;t reproduce it on my devices. This is my code:\r\n\r\n    String url = &quot;https://www.google.com/&quot;; // any URL\r\n    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));\r\n    ResolveInfo result = getPackageManager().resolveActivity(intent, 0);\r\n    if (result != null) {\r\n        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url))); // crashes here on some devices\r\n    } else {\r\n        showToast(getApplicationContext(), &quot;No application found to handle the link.&quot;);\r\n    }\r\n\r\nI am getting this error on some devices, Play Console won&#39;t show the devices anymore, so I have no idea which devices this happens on, but it doesn&#39;t happen on many:\r\n\r\n    Exception java.lang.SecurityException:\r\n      at android.os.Parcel.createException (Parcel.java:1966)\r\n      at android.os.Parcel.readException (Parcel.java:1934)\r\n      at android.os.Parcel.readException (Parcel.java:1884)\r\n      at android.app.IActivityManager$Stub$Proxy.startActivity (IActivityManager.java:3619)\r\n      at android.app.Instrumentation.execStartActivity (Instrumentation.java:1669)\r\n      at android.app.Activity.startActivityForResult (Activity.java:4689)\r\n      at android.app.Activity.startActivityForResult (Activity.java:4647)\r\n      at android.app.Activity.startActivity (Activity.java:5008)\r\n      at android.app.Activity.startActivity (Activity.java:4976)\r\n\r\nDoes anyone know what could be the problem? I don&#39;t remember seeing this crash in the past and I didn&#39;t change anything in my app since then.\r\n\r\nThis happens on a few Android versions, from Android 7 to Android 11.","title":"java.lang.SecurityException for startActivity URL on some devices","body":"<p>I am getting this crash on some devices and I can't figure out why, I can't reproduce it on my devices. This is my code:</p>\n<pre><code>String url = &quot;https://www.google.com/&quot;; // any URL\nIntent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));\nResolveInfo result = getPackageManager().resolveActivity(intent, 0);\nif (result != null) {\n    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url))); // crashes here on some devices\n} else {\n    showToast(getApplicationContext(), &quot;No application found to handle the link.&quot;);\n}\n</code></pre>\n<p>I am getting this error on some devices, Play Console won't show the devices anymore, so I have no idea which devices this happens on, but it doesn't happen on many:</p>\n<pre><code>Exception java.lang.SecurityException:\n  at android.os.Parcel.createException (Parcel.java:1966)\n  at android.os.Parcel.readException (Parcel.java:1934)\n  at android.os.Parcel.readException (Parcel.java:1884)\n  at android.app.IActivityManager$Stub$Proxy.startActivity (IActivityManager.java:3619)\n  at android.app.Instrumentation.execStartActivity (Instrumentation.java:1669)\n  at android.app.Activity.startActivityForResult (Activity.java:4689)\n  at android.app.Activity.startActivityForResult (Activity.java:4647)\n  at android.app.Activity.startActivity (Activity.java:5008)\n  at android.app.Activity.startActivity (Activity.java:4976)\n</code></pre>\n<p>Does anyone know what could be the problem? I don't remember seeing this crash in the past and I didn't change anything in my app since then.</p>\n<p>This happens on a few Android versions, from Android 7 to Android 11.</p>\n"},{"tags":["java","spring","spring-security"],"owner":{"account_id":23543214,"reputation":37,"user_id":17587086,"display_name":"Sprivro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1662981743,"creation_date":1662981743,"question_id":73688505,"body_markdown":"The requirement is to log principal with a request id (randomly generated) so that the request-id can be used to search through logs to know who has made the request.\r\n\r\nWe are using Spring reactive, MDC (to log multiple components together), and web filter for logging purposes. The goal is to do an MDC.put on principal.\r\n\r\nThe web filter:\r\n\r\n    public class WebFilterLogging implements WebFilter {\r\n\r\n\t@Override\r\n\tpublic Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n\t\tlong time = System.currentTimeMillis();\r\n\t\tBodyCaptureExchange bodyCaptureExchange = new BodyCaptureExchange(exchange);\r\n\t\t// TODO:add logged in user information\r\n\t\treturn chain.filter(bodyCaptureExchange).doOnError(err -&gt; {\r\n\t\t\tlong latencyInMs = System.currentTimeMillis() - time;\r\n\t\t\tMDC.put(&quot;request-id&quot;, bodyCaptureExchange.getRequest().getId());\r\n\t\t\tMDC.put(&quot;request-method&quot;, bodyCaptureExchange.getRequest().getMethod());\r\n\t\t\tMDC.put(&quot;request-url&quot;, bodyCaptureExchange.getRequest().getPath());\r\n\t\t\tMDC.put(&quot;query-params&quot;, bodyCaptureExchange.getRequest().getQueryParams());\r\n\t\t\tMDC.put(&quot;host-ip&quot;, EcsService.getContainerIP());\r\n\t\t\tMDC.put(&quot;user-id&quot;, exchange.getPrincipal());\r\n\t\t\tlog.info(&quot;{\\&quot;requestBody\\&quot;:&quot; + bodyCaptureExchange.getRequest().getFullBody() + &quot;}&quot;);\r\n\r\n\t\t\tlog.error(&quot;{\\&quot;responseBody\\&quot;:&quot; + &quot;\\&quot;&quot; + err.getLocalizedMessage() +&quot;\\&quot;&quot; + &quot;,&quot; +\r\n\t\t\t\t\t&quot; \\&quot;responseCode\\&quot;:&quot;+ err.getLocalizedMessage().split(&quot; &quot;)[0] + &quot;,&quot; +\r\n\t\t\t\t\t&quot; \\&quot;latencyInMs\\&quot;:&quot; + latencyInMs + &quot;}&quot;);\r\n\t\t}).doOnSuccess(se -&gt; {\r\n\t\t\tlong latencyInMs = System.currentTimeMillis() - time;\r\n\t\t\tMDC.put(&quot;request-id&quot;, bodyCaptureExchange.getRequest().getId());\r\n\t\t\tMDC.put(&quot;request-method&quot;, bodyCaptureExchange.getRequest().getMethod());\r\n\t\t\tMDC.put(&quot;request-url&quot;, bodyCaptureExchange.getRequest().getPath());\r\n\t\t\tMDC.put(&quot;query-params&quot;, bodyCaptureExchange.getRequest().getQueryParams());\r\n\t\t\tMDC.put(&quot;host-ip&quot;, EcsService.getContainerIP());\r\n\t\t\tMDC.put(&quot;user-id&quot;, exchange.getPrincipal());\r\n\t\t\tlog.info(&quot;{\\&quot;requestBody\\&quot;:&quot; + bodyCaptureExchange.getRequest().getFullBody() + &quot;}&quot;);\r\n\r\n\t\t\tlog.info(&quot;{\\&quot;responseBody\\&quot;:&quot; + bodyCaptureExchange.getResponse().getFullBody() + &quot;,&quot; + \r\n\t\t\t&quot; \\&quot;latencyInMs\\&quot;:&quot; + latencyInMs + &quot;,&quot; +   \t\t\r\n\t\t\t&quot; \\&quot;responseCode\\&quot;:&quot; + bodyCaptureExchange.getResponse().getRawStatusCode() + &quot;}&quot;);\r\n\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\nexchange.getPrincipal() - returns a Mono (requirement is String) actually returns: &quot;MonoMapFusable&quot; as output\r\nI have tried using a map and a flat map after getPrincipal() but it returns a &quot;MonoMapFusable&quot; as output\r\n\r\nI have tried retrieving the principal through ReactiveSecurityContext as well but that also returns a Mono, and not a String\r\n\r\nMy question is, is there a way to work with ServerWebExchange to retrieve the principal the goal is to log the principal/user name of the user who made the request","title":"Retrieve principal from ServerWebExchange","body":"<p>The requirement is to log principal with a request id (randomly generated) so that the request-id can be used to search through logs to know who has made the request.</p>\n<p>We are using Spring reactive, MDC (to log multiple components together), and web filter for logging purposes. The goal is to do an MDC.put on principal.</p>\n<p>The web filter:</p>\n<pre><code>public class WebFilterLogging implements WebFilter {\n\n@Override\npublic Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n    long time = System.currentTimeMillis();\n    BodyCaptureExchange bodyCaptureExchange = new BodyCaptureExchange(exchange);\n    // TODO:add logged in user information\n    return chain.filter(bodyCaptureExchange).doOnError(err -&gt; {\n        long latencyInMs = System.currentTimeMillis() - time;\n        MDC.put(&quot;request-id&quot;, bodyCaptureExchange.getRequest().getId());\n        MDC.put(&quot;request-method&quot;, bodyCaptureExchange.getRequest().getMethod());\n        MDC.put(&quot;request-url&quot;, bodyCaptureExchange.getRequest().getPath());\n        MDC.put(&quot;query-params&quot;, bodyCaptureExchange.getRequest().getQueryParams());\n        MDC.put(&quot;host-ip&quot;, EcsService.getContainerIP());\n        MDC.put(&quot;user-id&quot;, exchange.getPrincipal());\n        log.info(&quot;{\\&quot;requestBody\\&quot;:&quot; + bodyCaptureExchange.getRequest().getFullBody() + &quot;}&quot;);\n\n        log.error(&quot;{\\&quot;responseBody\\&quot;:&quot; + &quot;\\&quot;&quot; + err.getLocalizedMessage() +&quot;\\&quot;&quot; + &quot;,&quot; +\n                &quot; \\&quot;responseCode\\&quot;:&quot;+ err.getLocalizedMessage().split(&quot; &quot;)[0] + &quot;,&quot; +\n                &quot; \\&quot;latencyInMs\\&quot;:&quot; + latencyInMs + &quot;}&quot;);\n    }).doOnSuccess(se -&gt; {\n        long latencyInMs = System.currentTimeMillis() - time;\n        MDC.put(&quot;request-id&quot;, bodyCaptureExchange.getRequest().getId());\n        MDC.put(&quot;request-method&quot;, bodyCaptureExchange.getRequest().getMethod());\n        MDC.put(&quot;request-url&quot;, bodyCaptureExchange.getRequest().getPath());\n        MDC.put(&quot;query-params&quot;, bodyCaptureExchange.getRequest().getQueryParams());\n        MDC.put(&quot;host-ip&quot;, EcsService.getContainerIP());\n        MDC.put(&quot;user-id&quot;, exchange.getPrincipal());\n        log.info(&quot;{\\&quot;requestBody\\&quot;:&quot; + bodyCaptureExchange.getRequest().getFullBody() + &quot;}&quot;);\n\n        log.info(&quot;{\\&quot;responseBody\\&quot;:&quot; + bodyCaptureExchange.getResponse().getFullBody() + &quot;,&quot; + \n        &quot; \\&quot;latencyInMs\\&quot;:&quot; + latencyInMs + &quot;,&quot; +           \n        &quot; \\&quot;responseCode\\&quot;:&quot; + bodyCaptureExchange.getResponse().getRawStatusCode() + &quot;}&quot;);\n\n    });\n}\n</code></pre>\n<p>}</p>\n<p>exchange.getPrincipal() - returns a Mono (requirement is String) actually returns: &quot;MonoMapFusable&quot; as output\nI have tried using a map and a flat map after getPrincipal() but it returns a &quot;MonoMapFusable&quot; as output</p>\n<p>I have tried retrieving the principal through ReactiveSecurityContext as well but that also returns a Mono, and not a String</p>\n<p>My question is, is there a way to work with ServerWebExchange to retrieve the principal the goal is to log the principal/user name of the user who made the request</p>\n"},{"tags":["java","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":23053047,"reputation":9,"user_id":19971395,"display_name":"Nacho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662981613,"creation_date":1662981613,"answer_id":73688471,"question_id":73681189,"body_markdown":"this solves the problem **spring.jackson.serialization.fail-on-empty-beans=false**","title":"Java - Could not set field value [null, permissions=[]}]","body":"<p>this solves the problem <strong>spring.jackson.serialization.fail-on-empty-beans=false</strong></p>\n"}],"owner":{"account_id":23053047,"reputation":9,"user_id":19971395,"display_name":"Nacho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1662981613,"creation_date":1662916360,"question_id":73681189,"body_markdown":"I have a class User, that have a Role, role have a list of permission (enum), when i try to get a User by ID i get an error! In my database the data is OK, i have an user with a rol created.\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table(name = &quot;usuarios&quot;)\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String name;\r\n    private String password;\r\n    @ManyToOne(targetEntity= com.ecommerce.model.Role.class)\r\n    private Role role;\r\n```\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table(name = &quot;roles&quot;)\r\npublic class Role {\r\n    @Id\r\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @Column(name = &quot;rol&quot;)\r\n    @Enumerated(EnumType.STRING)\r\n    private RoleType role;\r\n    @Column(name = &quot;permisos&quot;)\r\n    @Enumerated(EnumType.STRING)\r\n    @ElementCollection(targetClass = Permission.class)\r\n    private List&lt;Permission&gt; permissions;\r\n```\r\n\r\n```\r\npublic enum RoleType {\r\n    manager,\r\n    seller,\r\n    buyer\r\n}\r\n```\r\n\r\n```\r\nThere was an unexpected error (type=Internal Server Error, status=500).\r\nCould not set field value [null, permissions=[]}] value by reflection : [class com.ecommerce.model.User.role] setter of com.ecommerce.model.User.role; nested exception is org.hibernate.PropertyAccessException: Could not set field value [null, permissions=[]}] value by reflection : [class com.ecommerce.model.User.role] setter of com.ecommerce.model.User.role\r\norg.springframework.orm.jpa.JpaSystemException: Could not set field value [null, permissions=[]}] value by reflection : [class com.ecommerce.model.User.role] setter of com.ecommerce.model.User.role; nested exception is org.hibernate.PropertyAccessException: Could not set field value [null, permissions=[]}] value by reflection : [class com.ecommerce.model.User.role] setter of com.ecommerce.model.User.role\r\n```","title":"Java - Could not set field value [null, permissions=[]}]","body":"<p>I have a class User, that have a Role, role have a list of permission (enum), when i try to get a User by ID i get an error! In my database the data is OK, i have an user with a rol created.</p>\n<pre><code>@Getter\n@Setter\n@Entity\n@Table(name = &quot;usuarios&quot;)\npublic class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String name;\n    private String password;\n    @ManyToOne(targetEntity= com.ecommerce.model.Role.class)\n    private Role role;\n</code></pre>\n<pre><code>@Getter\n@Setter\n@Entity\n@Table(name = &quot;roles&quot;)\npublic class Role {\n    @Id\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = &quot;rol&quot;)\n    @Enumerated(EnumType.STRING)\n    private RoleType role;\n    @Column(name = &quot;permisos&quot;)\n    @Enumerated(EnumType.STRING)\n    @ElementCollection(targetClass = Permission.class)\n    private List&lt;Permission&gt; permissions;\n</code></pre>\n<pre><code>public enum RoleType {\n    manager,\n    seller,\n    buyer\n}\n</code></pre>\n<pre><code>There was an unexpected error (type=Internal Server Error, status=500).\nCould not set field value [null, permissions=[]}] value by reflection : [class com.ecommerce.model.User.role] setter of com.ecommerce.model.User.role; nested exception is org.hibernate.PropertyAccessException: Could not set field value [null, permissions=[]}] value by reflection : [class com.ecommerce.model.User.role] setter of com.ecommerce.model.User.role\norg.springframework.orm.jpa.JpaSystemException: Could not set field value [null, permissions=[]}] value by reflection : [class com.ecommerce.model.User.role] setter of com.ecommerce.model.User.role; nested exception is org.hibernate.PropertyAccessException: Could not set field value [null, permissions=[]}] value by reflection : [class com.ecommerce.model.User.role] setter of com.ecommerce.model.User.role\n</code></pre>\n"},{"tags":["java","interactive-brokers","tws"],"comments":[{"owner":{"account_id":9113843,"reputation":197,"user_id":6781533,"display_name":"Carter Brainerd"},"score":0,"creation_date":1493323608,"post_id":43666988,"comment_id":74380957,"body_markdown":"Make sure the class extends the class you intend it to. If it isn&#39;t running (and it&#39;s supposed to), you probably didn&#39;t extend the right class.","body":"Make sure the class extends the class you intend it to. If it isn&#39;t running (and it&#39;s supposed to), you probably didn&#39;t extend the right class."},{"owner":{"account_id":385753,"reputation":795,"user_id":743097,"display_name":"gogotox"},"score":1,"creation_date":1497468318,"post_id":43666988,"comment_id":76096620,"body_markdown":"Also make sure you are using the right method to make the request, which is reqPositions(). If you use reqAccountUpdates(), you will get callbacks to updateAccountValue(), updatePortfolio() and updateAccountTime(), but not to position().","body":"Also make sure you are using the right method to make the request, which is reqPositions(). If you use reqAccountUpdates(), you will get callbacks to updateAccountValue(), updatePortfolio() and updateAccountTime(), but not to position()."}],"answers":[{"tags":[],"owner":{"account_id":16401969,"reputation":129,"user_id":11847630,"display_name":"algonell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662981435,"creation_date":1662981435,"answer_id":73688444,"question_id":43666988,"body_markdown":"You will have to make a request for positions via ```ApiController``` class:\r\n\r\n    var handler = new PositionsHandler();\r\n    controller.reqPositions(handler);\r\n\r\nAnd implement your own positions handler:\r\n\r\n    public final class PositionsHandler implements IPositionHandler {\r\n    \r\n      @Override\r\n      public void positionEnd() {\r\n        //NOP\r\n      }\r\n    \r\n      @Override\r\n      public void position(String account, Contract contract, Decimal pos, double avgCost) {\r\n        //TODO\r\n      }\r\n    }\r\n\r\n","title":"open positions interactive brokers java","body":"<p>You will have to make a request for positions via <code>ApiController</code> class:</p>\n<pre><code>var handler = new PositionsHandler();\ncontroller.reqPositions(handler);\n</code></pre>\n<p>And implement your own positions handler:</p>\n<pre><code>public final class PositionsHandler implements IPositionHandler {\n\n  @Override\n  public void positionEnd() {\n    //NOP\n  }\n\n  @Override\n  public void position(String account, Contract contract, Decimal pos, double avgCost) {\n    //TODO\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":5678412,"reputation":77,"user_id":4490614,"accept_rate":71,"display_name":"James Shelton"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662981435,"creation_date":1493323435,"question_id":43666988,"body_markdown":"I am trying to use the override function positions but it is not being called at all when running. Just want it to print out all open positions.\r\n\r\n\r\n      @Override\r\n    public void position(String account, Contract contract, double pos, \r\n    double avgCost) {\r\n      System.out.println(&quot;contract &quot; + contract);\r\n    }\r\n\r\n\r\nIt is not printing anything out at all. The account has open positions. Trying to just print all open positions each pass by of the function. ","title":"open positions interactive brokers java","body":"<p>I am trying to use the override function positions but it is not being called at all when running. Just want it to print out all open positions.</p>\n\n<pre><code>  @Override\npublic void position(String account, Contract contract, double pos, \ndouble avgCost) {\n  System.out.println(\"contract \" + contract);\n}\n</code></pre>\n\n<p>It is not printing anything out at all. The account has open positions. Trying to just print all open positions each pass by of the function. </p>\n"},{"tags":["java","unit-testing","mockito","grpc","grpc-java"],"comments":[{"owner":{"account_id":51211,"reputation":3143,"user_id":152984,"accept_rate":52,"display_name":"CuriousMind"},"score":0,"creation_date":1662814528,"post_id":73648589,"comment_id":130095758,"body_markdown":"The problem is the static builder methods that you are invoking to create stub and channel. Either you can externalize that code to other class and use dependency injection OR you can use [Powermock](https://github.com/powermock/powermock) to mock static method calls.","body":"The problem is the static builder methods that you are invoking to create stub and channel. Either you can externalize that code to other class and use dependency injection OR you can use <a href=\"https://github.com/powermock/powermock\" rel=\"nofollow noreferrer\">Powermock</a> to mock static method calls."},{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1663060822,"post_id":73648589,"comment_id":130144647,"body_markdown":"Where did you create myProto ?","body":"Where did you create myProto ?"}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662827187,"creation_date":1662827187,"answer_id":73673430,"question_id":73648589,"body_markdown":"For cases like this, I tend to add a second, package private constructor:\r\n\r\n```java\r\npublic class MyProtoClient {\r\n    private final ManagedChannel channel;\r\n\r\n    public MyProtoClient() {\r\n        this(ManagedChannelBuilder.forAddress(&quot;{remote_url}&quot;, remote_port)\r\n                .usePlaintext()\r\n                .build());\r\n    }\r\n\r\n    MyProtoClient(ManagedChannel channel) {\r\n        this.channel = channel;\r\n    }\r\n\r\n    ...\r\n```\r\nThis allows you to call the second constructor with the mocked `ManagedChannel`. I prefer not to use `@InjectMocks` at all for cases like this, and create the object myself:\r\n\r\n```java\r\n    @BeforeEach\r\n    void setUp() throws Exception {\r\n        // managedChannel can still be annotated with @Mock\r\n        myProtoClient = new MyProtoClient(managedChannel);\r\n    }\r\n```\r\n\r\nNote that the stub is still not mocked, but its backing channel is. You may have to do some more low-level mocking to get your test to work.","title":"Using mockito to mock server for client unit tests","body":"<p>For cases like this, I tend to add a second, package private constructor:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyProtoClient {\n    private final ManagedChannel channel;\n\n    public MyProtoClient() {\n        this(ManagedChannelBuilder.forAddress(&quot;{remote_url}&quot;, remote_port)\n                .usePlaintext()\n                .build());\n    }\n\n    MyProtoClient(ManagedChannel channel) {\n        this.channel = channel;\n    }\n\n    ...\n</code></pre>\n<p>This allows you to call the second constructor with the mocked <code>ManagedChannel</code>. I prefer not to use <code>@InjectMocks</code> at all for cases like this, and create the object myself:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @BeforeEach\n    void setUp() throws Exception {\n        // managedChannel can still be annotated with @Mock\n        myProtoClient = new MyProtoClient(managedChannel);\n    }\n</code></pre>\n<p>Note that the stub is still not mocked, but its backing channel is. You may have to do some more low-level mocking to get your test to work.</p>\n"},{"tags":[],"owner":{"account_id":13641857,"reputation":763,"user_id":9841751,"display_name":"pismy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662981083,"creation_date":1662981083,"answer_id":73688357,"question_id":73648589,"body_markdown":"I&#39;m not an expert with gRPC, but my guess is the following:\r\n\r\nIn your test you&#39;re using a mocked `ManagedChannel`, but at some point gRPC must be trying to instantiate a `ClientCall` object from it.\r\nAs it&#39;s a basic mock, it&#39;s simply returning `null`, which causes a `java.lang.NullPointerException` when gRPC is executing [`io.grpc.stub.ClientCalls.startCall(ClientCalls.java:341)`](https://github.com/grpc/grpc-java/blob/master/stub/src/main/java/io/grpc/stub/ClientCalls.java#L341) (from your stacktrace)\r\n\r\nI have 2 suggestions:\r\n\r\n1. try using a non-mocked `ManagedChannel` in your tests, or mock the required methods to provide a non-null `ClientCall` to gRPC\r\n2. try to adapt your tests to mimic the official gRPC example project ([the client class](https://github.com/grpc/grpc-java/blob/master/examples/src/main/java/io/grpc/examples/helloworld/HelloWorldClient.java) / [the test class](https://github.com/grpc/grpc-java/blob/master/examples/src/test/java/io/grpc/examples/helloworld/HelloWorldClientTest.java))","title":"Using mockito to mock server for client unit tests","body":"<p>I'm not an expert with gRPC, but my guess is the following:</p>\n<p>In your test you're using a mocked <code>ManagedChannel</code>, but at some point gRPC must be trying to instantiate a <code>ClientCall</code> object from it.\nAs it's a basic mock, it's simply returning <code>null</code>, which causes a <code>java.lang.NullPointerException</code> when gRPC is executing <a href=\"https://github.com/grpc/grpc-java/blob/master/stub/src/main/java/io/grpc/stub/ClientCalls.java#L341\" rel=\"nofollow noreferrer\"><code>io.grpc.stub.ClientCalls.startCall(ClientCalls.java:341)</code></a> (from your stacktrace)</p>\n<p>I have 2 suggestions:</p>\n<ol>\n<li>try using a non-mocked <code>ManagedChannel</code> in your tests, or mock the required methods to provide a non-null <code>ClientCall</code> to gRPC</li>\n<li>try to adapt your tests to mimic the official gRPC example project (<a href=\"https://github.com/grpc/grpc-java/blob/master/examples/src/main/java/io/grpc/examples/helloworld/HelloWorldClient.java\" rel=\"nofollow noreferrer\">the client class</a> / <a href=\"https://github.com/grpc/grpc-java/blob/master/examples/src/test/java/io/grpc/examples/helloworld/HelloWorldClientTest.java\" rel=\"nofollow noreferrer\">the test class</a>)</li>\n</ol>\n"}],"owner":{"account_id":1520243,"reputation":4680,"user_id":1443702,"accept_rate":55,"display_name":"xan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1298,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1662981083,"creation_date":1662637630,"question_id":73648589,"body_markdown":"I&#39;m trying to write unit tests for Java based gRPC client where the server is remote.\r\n\r\nAll the examples I&#39;ve seen use a local gRPC server for writing client unit test cases.\r\n\r\nHow can I mock the server so my client unit test cases are able to run.\r\n\r\n\r\n```\r\npublic class MyProtoClient {\r\n    private final ManagedChannel channel;\r\n\r\n    public MyProtoClient() {\r\n        this(ManagedChannelBuilder.forAddress(&quot;{remote_url}&quot;, remote_port)\r\n                .usePlaintext()\r\n                .build());\r\n    }\r\n\r\n    MyProtoClient(ManagedChannel channel) {\r\n        this.channel = channel;\r\n    }\r\n\r\n\r\n    public Boolean getResult(int a, int b) {\r\n        MyProtoGrpc.MyProtoBlockingStub stub = MyProtoGrpc.newBlockingStub(this.channel);\r\n\r\n        MyProtoResponse response = stub.myProtoRequest(ReqPayload.newBuilder()\r\n                .setNum1(a)\r\n                .setNum2(b)\r\n                .build());\r\n\r\n        this.channel.shutdown();\r\n        return response.getSum();\r\n    }\r\n}\r\n```\r\n\r\n\r\n&lt;strike&gt;Here is the code of my test class. But it throws an error saying it&#39;s trying to connect to the `remote_url`.&lt;/strike&gt;\r\n\r\n\r\nThe below code throws `java.lang.NullPointerException`.\r\n\r\n```\r\npublic class MyProtoClientTest {\r\n    @InjectMocks\r\n    MyProtoClient myProtoClient;    \r\n\r\n    @Mock\r\n    private ManagedChannel managedChannel;\r\n\r\n    @BeforeEach\r\n    void setUp() throws Exception {\r\n       myProtoClient = new MyProtoClient(managedChannel);\r\n    }\r\n\r\n    @Test\r\n    void getResult() {\r\n        int a = 1;\r\n        int b = 2;\r\n\r\n        \r\n        MyProtoGrpc.MyProtoGrpcBlockingStub mockMyProtoBlockingStub = \r\n        MyProtoGrpc.newBlockingStub(managedChannel);\r\n        MyProtoResponse mockResponse = mock(MyProtoResponse.class);\r\n        ReqPayload req = ReqPayload.newBuilder()\r\n                .setNum1(a)\r\n                .setNum2(b)\r\n                .build());\r\n\r\n        when(mockMyProtoBlockingStub.myProtoRequest(req)).thenReturn(mockResponse);\r\n        assertTrue(myProto.getResult(a, b));\r\n    }\r\n```\r\n\r\n**EDIT** following is the latest stacktrace which I&#39;m getting:\r\n```\r\nSep 12, 2022 1:44:12 PM io.grpc.stub.ClientCalls cancelThrow\r\nSEVERE: RuntimeException encountered while closing call\r\njava.lang.NullPointerException\r\n\tat io.grpc.stub.ClientCalls.cancelThrow(ClientCalls.java:286)\r\n\tat io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:168)\r\n\tat io.grpc.my_package.my_proto.MyProtoGrpc$MyProtoBlockingStub.myProtoRequest(MyProtoGrpc.java:187)\r\n\tat com.alawa.helpers.service.impl.MyProtoTest.getResult(MyProtoTest.java:70)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\r\n\r\njava.lang.NullPointerException\r\n\tat io.grpc.stub.ClientCalls.startCall(ClientCalls.java:341)\r\n\tat io.grpc.stub.ClientCalls.asyncUnaryRequestCall(ClientCalls.java:315)\r\n\tat io.grpc.stub.ClientCalls.futureUnaryCall(ClientCalls.java:227)\r\n\tat io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:154)\r\n\tat io.grpc.my_package.my_proto.MyProtoGrpc$MyProtoBlockingStub.myProtoRequest(MyProtoGrpc.java:187)\r\n\tat com.alawa.helpers.service.impl.MyProtoTest.getResult(MyProtoTest.java:70)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\r\n\r\n```","title":"Using mockito to mock server for client unit tests","body":"<p>I'm trying to write unit tests for Java based gRPC client where the server is remote.</p>\n<p>All the examples I've seen use a local gRPC server for writing client unit test cases.</p>\n<p>How can I mock the server so my client unit test cases are able to run.</p>\n<pre><code>public class MyProtoClient {\n    private final ManagedChannel channel;\n\n    public MyProtoClient() {\n        this(ManagedChannelBuilder.forAddress(&quot;{remote_url}&quot;, remote_port)\n                .usePlaintext()\n                .build());\n    }\n\n    MyProtoClient(ManagedChannel channel) {\n        this.channel = channel;\n    }\n\n\n    public Boolean getResult(int a, int b) {\n        MyProtoGrpc.MyProtoBlockingStub stub = MyProtoGrpc.newBlockingStub(this.channel);\n\n        MyProtoResponse response = stub.myProtoRequest(ReqPayload.newBuilder()\n                .setNum1(a)\n                .setNum2(b)\n                .build());\n\n        this.channel.shutdown();\n        return response.getSum();\n    }\n}\n</code></pre>\n<p><strike>Here is the code of my test class. But it throws an error saying it's trying to connect to the <code>remote_url</code>.</strike></p>\n<p>The below code throws <code>java.lang.NullPointerException</code>.</p>\n<pre><code>public class MyProtoClientTest {\n    @InjectMocks\n    MyProtoClient myProtoClient;    \n\n    @Mock\n    private ManagedChannel managedChannel;\n\n    @BeforeEach\n    void setUp() throws Exception {\n       myProtoClient = new MyProtoClient(managedChannel);\n    }\n\n    @Test\n    void getResult() {\n        int a = 1;\n        int b = 2;\n\n        \n        MyProtoGrpc.MyProtoGrpcBlockingStub mockMyProtoBlockingStub = \n        MyProtoGrpc.newBlockingStub(managedChannel);\n        MyProtoResponse mockResponse = mock(MyProtoResponse.class);\n        ReqPayload req = ReqPayload.newBuilder()\n                .setNum1(a)\n                .setNum2(b)\n                .build());\n\n        when(mockMyProtoBlockingStub.myProtoRequest(req)).thenReturn(mockResponse);\n        assertTrue(myProto.getResult(a, b));\n    }\n</code></pre>\n<p><strong>EDIT</strong> following is the latest stacktrace which I'm getting:</p>\n<pre><code>Sep 12, 2022 1:44:12 PM io.grpc.stub.ClientCalls cancelThrow\nSEVERE: RuntimeException encountered while closing call\njava.lang.NullPointerException\n    at io.grpc.stub.ClientCalls.cancelThrow(ClientCalls.java:286)\n    at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:168)\n    at io.grpc.my_package.my_proto.MyProtoGrpc$MyProtoBlockingStub.myProtoRequest(MyProtoGrpc.java:187)\n    at com.alawa.helpers.service.impl.MyProtoTest.getResult(MyProtoTest.java:70)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n\n\njava.lang.NullPointerException\n    at io.grpc.stub.ClientCalls.startCall(ClientCalls.java:341)\n    at io.grpc.stub.ClientCalls.asyncUnaryRequestCall(ClientCalls.java:315)\n    at io.grpc.stub.ClientCalls.futureUnaryCall(ClientCalls.java:227)\n    at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:154)\n    at io.grpc.my_package.my_proto.MyProtoGrpc$MyProtoBlockingStub.myProtoRequest(MyProtoGrpc.java:187)\n    at com.alawa.helpers.service.impl.MyProtoTest.getResult(MyProtoTest.java:70)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n\n\n</code></pre>\n"},{"tags":["java","android","kotlin","amazon-dynamodb"],"answers":[{"tags":[],"owner":{"account_id":10209378,"reputation":369,"user_id":7537048,"display_name":"Vaclav Stengl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662980904,"creation_date":1662737130,"answer_id":73664388,"question_id":73664227,"body_markdown":"In this case  [extension function][1] function may come handy. Let&#39;s assume, that `WriteBatch.builder(MyClass::class.java)` has type `WriteBatch.Builder` maybe with some generics, which is hard to say for example.\r\n```\r\nval writeBatch = WriteBatch.builder(MyClass::class.java)\r\n    .mappedTableResource(myMappedTable)\r\n    .addItems(putItemRequests)\r\n    .build()\r\n// I did use Any for items type, change it according to your need\r\nfun WriteBatch.Builder.addItems(items: List&lt;Any&gt;): WriteBatch.Builder {\r\n    items.forEach { item -&gt; addPutItem(item) }\r\n    // in case addPutItem(item) returns a new builder instance just store it in the variable and return it at the end.\r\n    return this\r\n}\r\n```\r\n\r\n  [1]: https://kotlinlang.org/docs/extensions.html","title":"Kotlin/Java: Add multiple items to a Builder class that only allows one .add() at a time","body":"<p>In this case  <a href=\"https://kotlinlang.org/docs/extensions.html\" rel=\"nofollow noreferrer\">extension function</a> function may come handy. Let's assume, that <code>WriteBatch.builder(MyClass::class.java)</code> has type <code>WriteBatch.Builder</code> maybe with some generics, which is hard to say for example.</p>\n<pre><code>val writeBatch = WriteBatch.builder(MyClass::class.java)\n    .mappedTableResource(myMappedTable)\n    .addItems(putItemRequests)\n    .build()\n// I did use Any for items type, change it according to your need\nfun WriteBatch.Builder.addItems(items: List&lt;Any&gt;): WriteBatch.Builder {\n    items.forEach { item -&gt; addPutItem(item) }\n    // in case addPutItem(item) returns a new builder instance just store it in the variable and return it at the end.\n    return this\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662750041,"creation_date":1662739014,"answer_id":73664719,"question_id":73664227,"body_markdown":"Given an instance of `WriteBatch.Builder`, there&#39;s no explicit need to chain the DSL, so your `writeBatchBuilder` can be a `val`. Each builder function mutates the internal state of the `WriteBatch.Builder` instance, and the returned value is just for convenience - [source code](https://github.com/aws/aws-sdk-java-v2/blob/e377518b08ccc2cd9cc32be74345064b2fadee64/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/model/WriteBatch.java#L228-L232). \r\n\r\n\r\nYou can therefore simplify your for-loop and make `writeBatchBuilder` a `val`:\r\n\r\n```kotlin\r\nval writeBatchBuilder = WriteBatch.builder(MyClass::class.java)\r\n    .mappedTableResource(myMappedTable)\r\n\r\nfor (request in putItemRequests){\r\n    writeBatchBuilder.addPutItem(request)\r\n}\r\n\r\nval writeBatch = writeBatchBuilder.build()\r\n```\r\n\r\n#### Scope function\r\n\r\nGoing one step further, [scope functions](https://kotlinlang.org/docs/scope-functions.html) are a nice way of converting Java DSLs into something more Kotlin-esque.\r\n\r\n(For a more visual guide to scope functions, and Kotlin in general, check out https://typealias.com/start/kotlin-scopes-and-scope-functions/)\r\n\r\n[`apply {}`](https://kotlinlang.org/docs/scope-functions.html#apply) will turn the created `WriteBatch.Builder` into the receiver, meaning you don&#39;t need to have a variable for the builder, you can just use `this`.\r\n\r\n```kotlin\r\nval writeBatch = WriteBatch.builder(MyClass::class.java).apply {\r\n  mappedTableResource(myMappedTable)\r\n\r\n  putItemRequests.forEach { request -&gt; \r\n    addPutItem(request)\r\n  }\r\n}.build()\r\n```\r\n\r\n(I also changed the for loop into a `forEach {}` - which is more Kotlin-ey.)\r\n\r\n\r\n#### Custom helper function\r\n\r\nThe next improvement is to encapsulate the `apply {}` logic inside of a helper function, `writeBatchBuilder()`, so the boilerplate is hidden away, which makes re-using the function easier.\r\n\r\nUsing `inline` and `reified T` means there&#39;s no need to define `::class.java` every time - instead the class can be defined as a type-parameter, and the class can be omitted if Kotlin can infer the type.\r\n\r\nNote that the receiver of the `builder` arg is `WriteBatch.Builder`, just like how the `apply {}` scope function changes the receiver to be the builder.\r\n\r\n\r\n```kotlin\r\ninline fun &lt;reified T&gt; buildWriteBatch(\r\n  builder: WriteBatch.Builder&lt;T&gt;.() -&gt; Unit\r\n) : WriteBatch&lt;T&gt; {\r\n  return WriteBatch.builder(T::class.java).apply(builder).build()\r\n}\r\n```\r\n\r\nExample usage:\r\n\r\n```kotlin\r\nval writeBatch = buildWriteBatch&lt;MyClass&gt; {\r\n  mappedTableResource(myMappedTable)\r\n\r\n  putItemRequests.forEach { request -&gt; \r\n    addPutItem(request)\r\n  }\r\n}\r\n\r\n\r\n// no need for explicit typing on buildWriteBatch - Kotlin can infer the type\r\nval writeBatch2: WriteBatch&lt;MyClass&gt; = buildWriteBatch {}\r\n```\r\n\r\n(For examples of this approach in Kotlin stdlib, see [the collection builder functions](https://kotlinlang.org/docs/constructing-collections.html#create-with-collection-builder-functions))","title":"Kotlin/Java: Add multiple items to a Builder class that only allows one .add() at a time","body":"<p>Given an instance of <code>WriteBatch.Builder</code>, there's no explicit need to chain the DSL, so your <code>writeBatchBuilder</code> can be a <code>val</code>. Each builder function mutates the internal state of the <code>WriteBatch.Builder</code> instance, and the returned value is just for convenience - <a href=\"https://github.com/aws/aws-sdk-java-v2/blob/e377518b08ccc2cd9cc32be74345064b2fadee64/services-custom/dynamodb-enhanced/src/main/java/software/amazon/awssdk/enhanced/dynamodb/model/WriteBatch.java#L228-L232\" rel=\"nofollow noreferrer\">source code</a>.</p>\n<p>You can therefore simplify your for-loop and make <code>writeBatchBuilder</code> a <code>val</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val writeBatchBuilder = WriteBatch.builder(MyClass::class.java)\n    .mappedTableResource(myMappedTable)\n\nfor (request in putItemRequests){\n    writeBatchBuilder.addPutItem(request)\n}\n\nval writeBatch = writeBatchBuilder.build()\n</code></pre>\n<h4>Scope function</h4>\n<p>Going one step further, <a href=\"https://kotlinlang.org/docs/scope-functions.html\" rel=\"nofollow noreferrer\">scope functions</a> are a nice way of converting Java DSLs into something more Kotlin-esque.</p>\n<p>(For a more visual guide to scope functions, and Kotlin in general, check out <a href=\"https://typealias.com/start/kotlin-scopes-and-scope-functions/\" rel=\"nofollow noreferrer\">https://typealias.com/start/kotlin-scopes-and-scope-functions/</a>)</p>\n<p><a href=\"https://kotlinlang.org/docs/scope-functions.html#apply\" rel=\"nofollow noreferrer\"><code>apply {}</code></a> will turn the created <code>WriteBatch.Builder</code> into the receiver, meaning you don't need to have a variable for the builder, you can just use <code>this</code>.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val writeBatch = WriteBatch.builder(MyClass::class.java).apply {\n  mappedTableResource(myMappedTable)\n\n  putItemRequests.forEach { request -&gt; \n    addPutItem(request)\n  }\n}.build()\n</code></pre>\n<p>(I also changed the for loop into a <code>forEach {}</code> - which is more Kotlin-ey.)</p>\n<h4>Custom helper function</h4>\n<p>The next improvement is to encapsulate the <code>apply {}</code> logic inside of a helper function, <code>writeBatchBuilder()</code>, so the boilerplate is hidden away, which makes re-using the function easier.</p>\n<p>Using <code>inline</code> and <code>reified T</code> means there's no need to define <code>::class.java</code> every time - instead the class can be defined as a type-parameter, and the class can be omitted if Kotlin can infer the type.</p>\n<p>Note that the receiver of the <code>builder</code> arg is <code>WriteBatch.Builder</code>, just like how the <code>apply {}</code> scope function changes the receiver to be the builder.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>inline fun &lt;reified T&gt; buildWriteBatch(\n  builder: WriteBatch.Builder&lt;T&gt;.() -&gt; Unit\n) : WriteBatch&lt;T&gt; {\n  return WriteBatch.builder(T::class.java).apply(builder).build()\n}\n</code></pre>\n<p>Example usage:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val writeBatch = buildWriteBatch&lt;MyClass&gt; {\n  mappedTableResource(myMappedTable)\n\n  putItemRequests.forEach { request -&gt; \n    addPutItem(request)\n  }\n}\n\n\n// no need for explicit typing on buildWriteBatch - Kotlin can infer the type\nval writeBatch2: WriteBatch&lt;MyClass&gt; = buildWriteBatch {}\n</code></pre>\n<p>(For examples of this approach in Kotlin stdlib, see <a href=\"https://kotlinlang.org/docs/constructing-collections.html#create-with-collection-builder-functions\" rel=\"nofollow noreferrer\">the collection builder functions</a>)</p>\n"}],"owner":{"account_id":25486667,"reputation":61,"user_id":19282171,"display_name":"Paul Eaten"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":320,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73664719,"answer_count":2,"score":2,"last_activity_date":1662980996,"creation_date":1662736270,"question_id":73664227,"body_markdown":"Problem: I&#39;m using an AWS DynamoDb Enhanced Java client V2 in Kotlin (the details of the client might not be important), where I want to make a `BatchWriteItemEnhancedRequest` containing a bunch of requests. The standard usage according to the [docs][1] goes:\r\n```\r\nval batchWriteItemEnhancedRequest = BatchWriteItemEnhancedRequest.builder()\r\n    .addWriteBatch(\r\n        WriteBatch.builder(MyClass::class.java)\r\n            .mappedTableResource(myMappedTable)\r\n            .addPutItem(putRequest1)\r\n            .addPutItem(putRequest2)\r\n            .addPutItem(putRequest3)\r\n            .build()\r\n    )\r\n    .build()\r\n```\r\nObviously this can&#39;t handle an anonymous list of `putRequest` items, only some known discrete values like `putRequest1` and `putRequest2`.\r\n\r\nThe builder for `WriteBatch` doesn&#39;t seem to allow adding lists of requests: [doc][2]\r\n\r\nThe only way to do this, as I can see, is to make a for-loop that goes:\r\n```\r\nvar writeBatchBuilder = WriteBatch.builder(MyClass::class.java)\r\n    .mappedTableResource(myMappedTable)\r\n\r\nfor (request in putItemRequests){\r\n    writeBatchBuilder = writeBatchBuilder.addPutItem(request)\r\n}\r\n\r\nval writeBatch = writeBatchBuilder.build()\r\n```\r\nWhich seems horrible to me. There&#39;s got to be a more idiomatic way to do this right?\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-dynamodb-enhanced.html#dynamodb-enhanced-mapper-batchitems\r\n  [2]: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/enhanced/dynamodb/model/WriteBatch.Builder.html","title":"Kotlin/Java: Add multiple items to a Builder class that only allows one .add() at a time","body":"<p>Problem: I'm using an AWS DynamoDb Enhanced Java client V2 in Kotlin (the details of the client might not be important), where I want to make a <code>BatchWriteItemEnhancedRequest</code> containing a bunch of requests. The standard usage according to the <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-dynamodb-enhanced.html#dynamodb-enhanced-mapper-batchitems\" rel=\"nofollow noreferrer\">docs</a> goes:</p>\n<pre><code>val batchWriteItemEnhancedRequest = BatchWriteItemEnhancedRequest.builder()\n    .addWriteBatch(\n        WriteBatch.builder(MyClass::class.java)\n            .mappedTableResource(myMappedTable)\n            .addPutItem(putRequest1)\n            .addPutItem(putRequest2)\n            .addPutItem(putRequest3)\n            .build()\n    )\n    .build()\n</code></pre>\n<p>Obviously this can't handle an anonymous list of <code>putRequest</code> items, only some known discrete values like <code>putRequest1</code> and <code>putRequest2</code>.</p>\n<p>The builder for <code>WriteBatch</code> doesn't seem to allow adding lists of requests: <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/enhanced/dynamodb/model/WriteBatch.Builder.html\" rel=\"nofollow noreferrer\">doc</a></p>\n<p>The only way to do this, as I can see, is to make a for-loop that goes:</p>\n<pre><code>var writeBatchBuilder = WriteBatch.builder(MyClass::class.java)\n    .mappedTableResource(myMappedTable)\n\nfor (request in putItemRequests){\n    writeBatchBuilder = writeBatchBuilder.addPutItem(request)\n}\n\nval writeBatch = writeBatchBuilder.build()\n</code></pre>\n<p>Which seems horrible to me. There's got to be a more idiomatic way to do this right?</p>\n"},{"tags":["java","generics"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1662800504,"creation_date":1662799955,"answer_id":73670514,"question_id":73670432,"body_markdown":"There is no way to prove that this casting is safe and would succeed. You&#39;re performing casting of `Class&lt;?&gt;` (of *unknown type*) returned by `Class.forName()` into the `Class&lt;X&gt;` (of something), the compiler can&#39;t verify if what you&#39;re doing is correct.\r\n\r\nThe only thing you can do is to suppress the warning by placing annotation `@SuppressWarnings(&quot;unchecked&quot;)` on the method on the problematic statement:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private &lt;X extends SomeInterface&lt;MyImplementation&gt;&gt; void test(String fqcn) {\r\n        Class&lt;X&gt; c = (Class&lt;X&gt;)Class.forName(fqcn).asSubclass(SomeInterface.class);\r\n        ...\r\n    }\r\n\r\nOr \r\n\r\n    private &lt;X extends SomeInterface&lt;MyImplementation&gt;&gt; void test(String fqcn) {\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        Class&lt;X&gt; c = (Class&lt;X&gt;)Class.forName(fqcn).asSubclass(SomeInterface.class);\r\n        ...\r\n    }","title":"How to avoid type safety warning with generic interfaces and Class.forName","body":"<p>There is no way to prove that this casting is safe and would succeed. You're performing casting of <code>Class&lt;?&gt;</code> (of <em>unknown type</em>) returned by <code>Class.forName()</code> into the <code>Class&lt;X&gt;</code> (of something), the compiler can't verify if what you're doing is correct.</p>\n<p>The only thing you can do is to suppress the warning by placing annotation <code>@SuppressWarnings(&quot;unchecked&quot;)</code> on the method on the problematic statement:</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\nprivate &lt;X extends SomeInterface&lt;MyImplementation&gt;&gt; void test(String fqcn) {\n    Class&lt;X&gt; c = (Class&lt;X&gt;)Class.forName(fqcn).asSubclass(SomeInterface.class);\n    ...\n}\n</code></pre>\n<p>Or</p>\n<pre><code>private &lt;X extends SomeInterface&lt;MyImplementation&gt;&gt; void test(String fqcn) {\n    @SuppressWarnings(&quot;unchecked&quot;)\n    Class&lt;X&gt; c = (Class&lt;X&gt;)Class.forName(fqcn).asSubclass(SomeInterface.class);\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1662980568,"creation_date":1662808513,"answer_id":73671356,"question_id":73670432,"body_markdown":"Read the reflection java.lang.Class&lt;T&gt; &quot;api docs&quot; for forName method, it should be wrapped in  java.lang.ClassNotFoundException and java.lang.ClassCastException.\r\nThe correct Exception(s) should remove that warning.\r\n\r\n**use isInstance(theCreatedClassReference) from java.lang.Class**\r\n\r\ndon&#39;t want to try without code and compiler , take too long for me.\r\n\r\nisInstance() returns a boolean and is the correct to use for Class.forName(stringnametoload) check alike the *instanceof* operator\r\nwhen creating a Class check its constructed reference in an if test\r\nthe multi argument Class.forName allows class loading usage designation of whether it is &quot;initialized&quot;.\r\n\r\n*sorry about the botched code attempt.*\r\n\r\nIf you are actually making a usable reference then maybe check with instanceof but the actions DO require the exception wrappers (not a bad idea when they can be interfaces and other types in one).\r\n\r\nI can only presume from your code you are loading a class that will be returned &quot;something like (and as the byte code compiler sees it)&quot; a &amp;lt;T&amp;gt; type by genericsthat could be any type, so the runtime would have no idea what resource of byte code would be loaded. \r\nNot knowing what the T type will be is extremely dangerous.\r\nIf you flag Class.forName with initialize false using its multi argument method version you can load an uninstantiated class as a test to see that the dynamic resource is true for the compiled code before it is able to be loaded live.\r\nIt would then tested the resource class loaded.","title":"How to avoid type safety warning with generic interfaces and Class.forName","body":"<p>Read the reflection java.lang.Class &quot;api docs&quot; for forName method, it should be wrapped in  java.lang.ClassNotFoundException and java.lang.ClassCastException.\nThe correct Exception(s) should remove that warning.</p>\n<p><strong>use isInstance(theCreatedClassReference) from java.lang.Class</strong></p>\n<p>don't want to try without code and compiler , take too long for me.</p>\n<p>isInstance() returns a boolean and is the correct to use for Class.forName(stringnametoload) check alike the <em>instanceof</em> operator\nwhen creating a Class check its constructed reference in an if test\nthe multi argument Class.forName allows class loading usage designation of whether it is &quot;initialized&quot;.</p>\n<p><em>sorry about the botched code attempt.</em></p>\n<p>If you are actually making a usable reference then maybe check with instanceof but the actions DO require the exception wrappers (not a bad idea when they can be interfaces and other types in one).</p>\n<p>I can only presume from your code you are loading a class that will be returned &quot;something like (and as the byte code compiler sees it)&quot; a &lt;T&gt; type by genericsthat could be any type, so the runtime would have no idea what resource of byte code would be loaded.\nNot knowing what the T type will be is extremely dangerous.\nIf you flag Class.forName with initialize false using its multi argument method version you can load an uninstantiated class as a test to see that the dynamic resource is true for the compiled code before it is able to be loaded live.\nIt would then tested the resource class loaded.</p>\n"}],"owner":{"account_id":392230,"reputation":6617,"user_id":753377,"accept_rate":68,"display_name":"Thor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1662980568,"creation_date":1662799242,"question_id":73670432,"body_markdown":"I have the following code which is forking fine:\r\n\r\n```\r\nprivate &lt;X extends SomeInterface&lt;MyImplementation&gt;&gt; void test(String fqcn)\r\n{\r\n\tClass&lt;X&gt; c = (Class&lt;X&gt;)Class.forName(fqcn).asSubclass(SomeInterface.class);\r\n\t...\r\n}\r\n```\r\nHowever, I get a type safety warning\r\n```\r\nType safety: Unchecked cast from Class&lt;capture#2-of ? extends SomeInterface&gt; to Class&lt;X&gt;\r\n```\r\nand wondering how to fix it?\r\n","title":"How to avoid type safety warning with generic interfaces and Class.forName","body":"<p>I have the following code which is forking fine:</p>\n<pre><code>private &lt;X extends SomeInterface&lt;MyImplementation&gt;&gt; void test(String fqcn)\n{\n    Class&lt;X&gt; c = (Class&lt;X&gt;)Class.forName(fqcn).asSubclass(SomeInterface.class);\n    ...\n}\n</code></pre>\n<p>However, I get a type safety warning</p>\n<pre><code>Type safety: Unchecked cast from Class&lt;capture#2-of ? extends SomeInterface&gt; to Class&lt;X&gt;\n</code></pre>\n<p>and wondering how to fix it?</p>\n"},{"tags":["java","pdf","itext"],"comments":[{"owner":{"account_id":926701,"reputation":1165,"user_id":957359,"accept_rate":47,"display_name":"jcrshankar"},"score":0,"creation_date":1358327858,"post_id":14354712,"comment_id":19957229,"body_markdown":"http://stackoverflow.com/questions/7708130/reduce-pdf-file-size-in-itext-java?rq=1 ... i gone through this thread but i dont find useful info.","body":"<a href=\"http://stackoverflow.com/questions/7708130/reduce-pdf-file-size-in-itext-java?rq=1\" title=\"reduce pdf file size in itext java\">stackoverflow.com/questions/7708130/&hellip;</a> ... i gone through this thread but i dont find useful info."}],"answers":[{"tags":[],"owner":{"account_id":395910,"reputation":14044,"user_id":759126,"accept_rate":100,"display_name":"partlov"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1358328368,"creation_date":1358328368,"answer_id":14354975,"question_id":14354712,"body_markdown":"With `writer.setFullCompression()` you already compressed file as much as possible. With iText you can&#39;t do anything more.","title":"How to reduce PDF file size programmatically in Java?","body":"<p>With <code>writer.setFullCompression()</code> you already compressed file as much as possible. With iText you can't do anything more.</p>\n"},{"tags":[],"owner":{"account_id":113355,"reputation":18625,"user_id":298573,"display_name":"VahidN"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1562563560,"creation_date":1358355875,"answer_id":14363777,"question_id":14354712,"body_markdown":"Also change the `PdfCopy` to `PdfSmartCopy`. It will eliminate duplicate streams which have the same hash (md5).","title":"How to reduce PDF file size programmatically in Java?","body":"<p>Also change the <code>PdfCopy</code> to <code>PdfSmartCopy</code>. It will eliminate duplicate streams which have the same hash (md5).</p>\n"},{"tags":[],"owner":{"account_id":1506926,"reputation":2144,"user_id":1410097,"display_name":"Morcilla de Arroz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1383689600,"creation_date":1383689600,"answer_id":19800111,"question_id":14354712,"body_markdown":"You can use ghostscript, invoking the exe with specific parameters for print your pdf with the ghostscript&#39;s pdfwriter (example: sDEVICE=pdfwrite -sOutputFile=myfile.pdf). There are several accepted parameters, for compression or quality levels, etc.\r\nIt may result and optimized and smaller file. ","title":"How to reduce PDF file size programmatically in Java?","body":"<p>You can use ghostscript, invoking the exe with specific parameters for print your pdf with the ghostscript's pdfwriter (example: sDEVICE=pdfwrite -sOutputFile=myfile.pdf). There are several accepted parameters, for compression or quality levels, etc.\nIt may result and optimized and smaller file. </p>\n"},{"tags":[],"owner":{"account_id":246127,"reputation":326,"user_id":520068,"display_name":"Mauro Braggio"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1389283372,"creation_date":1389283372,"answer_id":21025162,"question_id":14354712,"body_markdown":"use iText\r\n\r\n    PdfReader reader = new PdfReader(new FileInputStream(&quot;input.pdf&quot;));\r\n    PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(&quot;output.pdf&quot;));\r\n    int total = reader.getNumberOfPages() + 1;\r\n    for ( int i=1; i&lt;total; i++) {\r\n       reader.setPageContent(i + 1, reader.getPageContent(i + 1));\r\n    }\r\n    stamper.setFullCompression();\r\n    stamper.close();\r\n","title":"How to reduce PDF file size programmatically in Java?","body":"<p>use iText</p>\n\n<pre><code>PdfReader reader = new PdfReader(new FileInputStream(\"input.pdf\"));\nPdfStamper stamper = new PdfStamper(reader, new FileOutputStream(\"output.pdf\"));\nint total = reader.getNumberOfPages() + 1;\nfor ( int i=1; i&lt;total; i++) {\n   reader.setPageContent(i + 1, reader.getPageContent(i + 1));\n}\nstamper.setFullCompression();\nstamper.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26114819,"reputation":16,"user_id":19808133,"display_name":"Dhananjay Kumar Roy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662980266,"creation_date":1662980205,"answer_id":73688185,"question_id":14354712,"body_markdown":"**Multiple Bitmap Image to pdf converter --&gt; Compressed Pdf**\r\n\r\n    public static String  createPDFWithMultipleImage(Bitmap[] bitmaps, String pdf_name){\r\n        String directoryPath = Environment.getExternalStorageDirectory() + &quot;/OpPath/&quot;;\r\n\r\n        File file = new File(directoryPath,pdf_name);\r\n        try {\r\n            FileOutputStream fileOutputStream = new FileOutputStream(file);\r\n            PdfDocument pdfDocument = new PdfDocument();\r\n            for (int i = 0; i &lt; bitmaps.length; i++){\r\n                Bitmap original = bitmaps[i];\r\n                int nh = (int) ( original.getHeight() * (512.0 / original.getWidth()) );\r\n                Bitmap bitmap = Bitmap.createScaledBitmap(original, 512, nh, true);\r\n\r\n                PdfDocument.PageInfo pageInfo = new PdfDocument.PageInfo.Builder(bitmap.getWidth(), bitmap.getHeight(), (i + 1)).create();\r\n                PdfDocument.Page page = pdfDocument.startPage(pageInfo);\r\n                Canvas canvas = page.getCanvas();\r\n                Paint paint = new Paint();\r\n                paint.setColor(Color.BLUE);\r\n                canvas.drawPaint(paint);\r\n                canvas.drawBitmap(bitmap, 0f, 0f, null);\r\n                pdfDocument.finishPage(page);\r\n                bitmap.recycle();\r\n            }\r\n            pdfDocument.writeTo(fileOutputStream);\r\n            pdfDocument.close();\r\n            return file.toString();\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            return file.toString();\r\n        }\r\n    }","title":"How to reduce PDF file size programmatically in Java?","body":"<p><strong>Multiple Bitmap Image to pdf converter --&gt; Compressed Pdf</strong></p>\n<pre><code>public static String  createPDFWithMultipleImage(Bitmap[] bitmaps, String pdf_name){\n    String directoryPath = Environment.getExternalStorageDirectory() + &quot;/OpPath/&quot;;\n\n    File file = new File(directoryPath,pdf_name);\n    try {\n        FileOutputStream fileOutputStream = new FileOutputStream(file);\n        PdfDocument pdfDocument = new PdfDocument();\n        for (int i = 0; i &lt; bitmaps.length; i++){\n            Bitmap original = bitmaps[i];\n            int nh = (int) ( original.getHeight() * (512.0 / original.getWidth()) );\n            Bitmap bitmap = Bitmap.createScaledBitmap(original, 512, nh, true);\n\n            PdfDocument.PageInfo pageInfo = new PdfDocument.PageInfo.Builder(bitmap.getWidth(), bitmap.getHeight(), (i + 1)).create();\n            PdfDocument.Page page = pdfDocument.startPage(pageInfo);\n            Canvas canvas = page.getCanvas();\n            Paint paint = new Paint();\n            paint.setColor(Color.BLUE);\n            canvas.drawPaint(paint);\n            canvas.drawBitmap(bitmap, 0f, 0f, null);\n            pdfDocument.finishPage(page);\n            bitmap.recycle();\n        }\n        pdfDocument.writeTo(fileOutputStream);\n        pdfDocument.close();\n        return file.toString();\n\n    } catch (IOException e) {\n        e.printStackTrace();\n        return file.toString();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":926701,"reputation":1165,"user_id":957359,"accept_rate":47,"display_name":"jcrshankar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40076,"favorite_count":0,"down_vote_count":3,"up_vote_count":14,"accepted_answer_id":14354975,"answer_count":5,"score":11,"last_activity_date":1662980266,"creation_date":1358327433,"question_id":14354712,"body_markdown":"    Document document = new Document(reader.getPageSizeWithRotation(1));\r\n    PdfCopy writer = new PdfCopy(document, new FileOutputStream(outFile));\r\n    document.open();\r\n    PdfImportedPage page = writer.getImportedPage(reader, ++i);\r\n    writer.setFullCompression();\r\n    writer.addPage(page);\r\n    document.close();\r\n    writer.close();\r\n\r\n\r\nI am using iText to split and merger the PDF, I need your help to reduce (compress) the output PDF size programmatically. Please let me know the steps to achieve the same.\r\n\r\n   ","title":"How to reduce PDF file size programmatically in Java?","body":"<pre><code>Document document = new Document(reader.getPageSizeWithRotation(1));\nPdfCopy writer = new PdfCopy(document, new FileOutputStream(outFile));\ndocument.open();\nPdfImportedPage page = writer.getImportedPage(reader, ++i);\nwriter.setFullCompression();\nwriter.addPage(page);\ndocument.close();\nwriter.close();\n</code></pre>\n\n<p>I am using iText to split and merger the PDF, I need your help to reduce (compress) the output PDF size programmatically. Please let me know the steps to achieve the same.</p>\n"},{"tags":["java","spring-boot","asynchronous","async-await","interactive-brokers"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1655630772,"post_id":72675604,"comment_id":128373400,"body_markdown":"Maybe implement `IBEventWrapper` in `TraderService` and try to keep state in that class? A `Map&lt;Integer, CompatibleFuture&lt;?&gt;&gt;` where the key is request id or something suitable, and the `CompatibleFuture` is completed by the TWS callback with any relevant data. The calling thread can then wait on the future.","body":"Maybe implement <code>IBEventWrapper</code> in <code>TraderService</code> and try to keep state in that class? A <code>Map&lt;Integer, CompatibleFuture&lt;?&gt;&gt;</code> where the key is request id or something suitable, and the <code>CompatibleFuture</code> is completed by the TWS callback with any relevant data. The calling thread can then wait on the future."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1662980390,"post_id":72675604,"comment_id":130123623,"body_markdown":"I don&#39;t get why you do this in a constructor? I would also expect the `this.eventWrapper` to be injected and not constructed (just like the socket). Why don&#39;t you handle the results in the wrapper? Not sure why you need to pass them to the service? What is it you are trying to do?","body":"I don&#39;t get why you do this in a constructor? I would also expect the <code>this.eventWrapper</code> to be injected and not constructed (just like the socket). Why don&#39;t you handle the results in the wrapper? Not sure why you need to pass them to the service? What is it you are trying to do?"},{"owner":{"account_id":9445685,"reputation":138,"user_id":7024535,"accept_rate":100,"display_name":"LSampath"},"score":0,"creation_date":1664032370,"post_id":72675604,"comment_id":130380920,"body_markdown":"Thanks @Kayaman I implemented the IBEventWrapper in TraderService. It was a simple and efficient solution, I was blind enough not to see that.","body":"Thanks @Kayaman I implemented the IBEventWrapper in TraderService. It was a simple and efficient solution, I was blind enough not to see that."}],"answers":[{"tags":[],"owner":{"account_id":16401969,"reputation":129,"user_id":11847630,"display_name":"algonell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662980136,"creation_date":1662932906,"answer_id":73682843,"question_id":72675604,"body_markdown":"IB TWS API is publish–subscribe based, you will have to make requests and await the data to return. I have been using [CountDownLatch][1] like this (in your handler class):\r\n\r\n      private CountDownLatch latch = new CountDownLatch(1);\r\n    \r\n      public String getGenericTick() {\r\n        return genericTick;\r\n      }\r\n    \r\n      public CountDownLatch getLatch() {\r\n        return latch;\r\n      }\r\n    \r\n      @Override\r\n      public void tickString(TickType tickType, String value) {\r\n        if (tickType == TickType.FUNDAMENTAL_RATIOS) {\r\n          genericTick = value;\r\n          latch.countDown();\r\n        }\r\n      }\r\n\r\nWhich allows you to know if the data is available or explicitly await for some time (3s is usually enough for anything within a single request):\r\n\r\n      var handler = new FundamentalsRatiosDataHandler();\r\n\r\n      controller.reqTopMktData(contract, &quot;258&quot;, false, false, handler);\r\n        if (!handler\r\n            .getLatch()\r\n            .await(3, TimeUnit.SECONDS)) {\r\n          // failure\r\n        }\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html","title":"How to make my service object to wait till it receives respond from external resource in Spring boot","body":"<p>IB TWS API is publish–subscribe based, you will have to make requests and await the data to return. I have been using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\">CountDownLatch</a> like this (in your handler class):</p>\n<pre><code>  private CountDownLatch latch = new CountDownLatch(1);\n\n  public String getGenericTick() {\n    return genericTick;\n  }\n\n  public CountDownLatch getLatch() {\n    return latch;\n  }\n\n  @Override\n  public void tickString(TickType tickType, String value) {\n    if (tickType == TickType.FUNDAMENTAL_RATIOS) {\n      genericTick = value;\n      latch.countDown();\n    }\n  }\n</code></pre>\n<p>Which allows you to know if the data is available or explicitly await for some time (3s is usually enough for anything within a single request):</p>\n<pre><code>  var handler = new FundamentalsRatiosDataHandler();\n\n  controller.reqTopMktData(contract, &quot;258&quot;, false, false, handler);\n    if (!handler\n        .getLatch()\n        .await(3, TimeUnit.SECONDS)) {\n      // failure\n    }\n</code></pre>\n"}],"owner":{"account_id":9445685,"reputation":138,"user_id":7024535,"accept_rate":100,"display_name":"LSampath"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1662980136,"creation_date":1655629818,"question_id":72675604,"body_markdown":"I am implementing a client application to automate trading tasks in InteractiveBroker(IB) platform. They are providing us with standalone application called TradingWorkStation(TWS) and a library to implement our own client applications. But our client application cannot directly communicate with IB platform on its own, client app has to pass our message to TWS application and TWS handles the communication with the actual IB platform.\r\n\r\nIB library provides us with EClientSocket interface, which has methods to communicate with TWS application. But they are asynchronous calls with no responses. When TWS needs to send back responses, it calls EWrapper interface of client application.\r\n\r\nRefer to following diagram,\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI am using Spring Boot to develop this client application. I have TraderService class which has eClient object as a attribute to communicate with TWS app. And I need to ask for contract details from TWS to initiate the trading process. I need TraderService constructor to continue only of these requested contract details are available.\r\n\r\nRefer to TraderService below,\r\n\r\n```\r\n@Service\r\npublic class TraderService {\r\n    private final IBEventWrapper eventWrapper;\r\n    private final EClientSocket socket;\r\n\r\n    public TraderService() {\r\n\t\t\r\n        this.eventWrapper = new IBEventWrapper();\r\n\r\n        this.socket = new EClientSocket(eventWrapper);\r\n        socket.eConnect(&#39;localhost&#39;, 7497, 1);\r\n\r\n        if (socket.isConnected()) {\r\n            logger.info(&quot;connected..&quot;);\r\n\t\t\t\r\n\t\t\t// requesting contract details, but return type is void\r\n\t\t\tsocket.reqContractDetails();\r\n\r\n           // continue only if contract results are available ...\r\n        }\r\n\t}\r\n}\r\n```\r\n\r\nNotice here, *reqContractDetails* method does not have a return type, and actual results are received to EWrapper interface implementation.\r\n\r\nRefer to EWrapper implementatin below,\r\n\r\n```\r\npublic class IBEventWrapper implements EWrapper {\r\n    private final TraderService traderService;\r\n\r\n    public IBEventWrapper(TraderService traderService) {\r\n\t\t// trying to pass results back to trader service\r\n        this.traderService = traderService;\r\n    }\r\n\t\r\n\t// this method is invoked by TWS to return contract results\r\n\t@Override\r\n    public void contractDetails(int reqId, ContractDetails contractDetails) {\r\n        logger.info(&quot;contractDetails {}&quot;, reqId);\r\n    }\r\n}\r\n```\r\n\r\nAs seen above, EWrapper methods are invoked by TWS app, when results are available. But I need to pass them back to TraderService constructor. \r\n\r\nIs there any approach (may be from Spring boot) to make this happen.\r\n\r\n  [1]: https://i.stack.imgur.com/LIvjo.png","title":"How to make my service object to wait till it receives respond from external resource in Spring boot","body":"<p>I am implementing a client application to automate trading tasks in InteractiveBroker(IB) platform. They are providing us with standalone application called TradingWorkStation(TWS) and a library to implement our own client applications. But our client application cannot directly communicate with IB platform on its own, client app has to pass our message to TWS application and TWS handles the communication with the actual IB platform.</p>\n<p>IB library provides us with EClientSocket interface, which has methods to communicate with TWS application. But they are asynchronous calls with no responses. When TWS needs to send back responses, it calls EWrapper interface of client application.</p>\n<p>Refer to following diagram,</p>\n<p><a href=\"https://i.stack.imgur.com/LIvjo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LIvjo.png\" alt=\"enter image description here\" /></a></p>\n<p>I am using Spring Boot to develop this client application. I have TraderService class which has eClient object as a attribute to communicate with TWS app. And I need to ask for contract details from TWS to initiate the trading process. I need TraderService constructor to continue only of these requested contract details are available.</p>\n<p>Refer to TraderService below,</p>\n<pre><code>@Service\npublic class TraderService {\n    private final IBEventWrapper eventWrapper;\n    private final EClientSocket socket;\n\n    public TraderService() {\n        \n        this.eventWrapper = new IBEventWrapper();\n\n        this.socket = new EClientSocket(eventWrapper);\n        socket.eConnect('localhost', 7497, 1);\n\n        if (socket.isConnected()) {\n            logger.info(&quot;connected..&quot;);\n            \n            // requesting contract details, but return type is void\n            socket.reqContractDetails();\n\n           // continue only if contract results are available ...\n        }\n    }\n}\n</code></pre>\n<p>Notice here, <em>reqContractDetails</em> method does not have a return type, and actual results are received to EWrapper interface implementation.</p>\n<p>Refer to EWrapper implementatin below,</p>\n<pre><code>public class IBEventWrapper implements EWrapper {\n    private final TraderService traderService;\n\n    public IBEventWrapper(TraderService traderService) {\n        // trying to pass results back to trader service\n        this.traderService = traderService;\n    }\n    \n    // this method is invoked by TWS to return contract results\n    @Override\n    public void contractDetails(int reqId, ContractDetails contractDetails) {\n        logger.info(&quot;contractDetails {}&quot;, reqId);\n    }\n}\n</code></pre>\n<p>As seen above, EWrapper methods are invoked by TWS app, when results are available. But I need to pass them back to TraderService constructor.</p>\n<p>Is there any approach (may be from Spring boot) to make this happen.</p>\n"},{"tags":["java","kotlin","gradle","transitive-dependency","conflicting-libraries"],"comments":[{"owner":{"account_id":10209378,"reputation":369,"user_id":7537048,"display_name":"Vaclav Stengl"},"score":0,"creation_date":1662986016,"post_id":73688169,"comment_id":130125657,"body_markdown":"I don&#39;t think this is possible. If it would be possible, then it would lead to class collisions as libraries in multiple versions would bring classes in same packages, with different implementations. \n\nUsually you have to upgrade/downgrade all libs using lib X to state without breaking changes.","body":"I don&#39;t think this is possible. If it would be possible, then it would lead to class collisions as libraries in multiple versions would bring classes in same packages, with different implementations.   Usually you have to upgrade/downgrade all libs using lib X to state without breaking changes."},{"owner":{"account_id":4623673,"reputation":6002,"user_id":4161471,"display_name":"aSemy"},"score":0,"creation_date":1663019409,"post_id":73688169,"comment_id":130136628,"body_markdown":"I don&#39;t really understand your example (it&#39;s very abstract; proper names and a diagram might help) but I think you can create Gradle subprojects to isolate incompatible dependencies, and expose an API that provides the functionality of the dependencies that you require. The &#39;core&#39; subproject can depend on the &#39;client&#39; subprojects.","body":"I don&#39;t really understand your example (it&#39;s very abstract; proper names and a diagram might help) but I think you can create Gradle subprojects to isolate incompatible dependencies, and expose an API that provides the functionality of the dependencies that you require. The &#39;core&#39; subproject can depend on the &#39;client&#39; subprojects."}],"owner":{"account_id":277289,"reputation":936,"user_id":1146513,"accept_rate":38,"display_name":"Pinco Pallino"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1662980100,"creation_date":1662980100,"question_id":73688169,"body_markdown":"Say I have a two direct dependencies A and B to my project, where one of the direct dependencies (say A) depends on package X version 3, and the other (say B) depends on package X version 4 and package X 4 has breaking changes compared to package X version 3, therefore it is not possible to apply a resolution strategy to transitive dependencies to force one or the other version.\r\n\r\nIs it possible to isolate/hide the transitive to package X below package A and B so that the project does not see X, and package B does not see X version 3 and package A does not see X version 4 ?\r\n","title":"Use of incompatible conflicting transitive dependency in gradle","body":"<p>Say I have a two direct dependencies A and B to my project, where one of the direct dependencies (say A) depends on package X version 3, and the other (say B) depends on package X version 4 and package X 4 has breaking changes compared to package X version 3, therefore it is not possible to apply a resolution strategy to transitive dependencies to force one or the other version.</p>\n<p>Is it possible to isolate/hide the transitive to package X below package A and B so that the project does not see X, and package B does not see X version 3 and package A does not see X version 4 ?</p>\n"},{"tags":["java","android","agora.io"],"comments":[{"owner":{"account_id":17962444,"reputation":312,"user_id":13053118,"display_name":"Shaocheng Yang"},"score":0,"creation_date":1606959409,"post_id":65112493,"comment_id":115124525,"body_markdown":"Are you testing on the emulators, which could cause this error? Meanwhile, this error should not cause any performance issue of the SDK.","body":"Are you testing on the emulators, which could cause this error? Meanwhile, this error should not cause any performance issue of the SDK."},{"owner":{"account_id":11226516,"reputation":1868,"user_id":8235983,"accept_rate":81,"display_name":"Peter"},"score":0,"creation_date":1606975666,"post_id":65112493,"comment_id":115127710,"body_markdown":"No am testing it on a real device, I didn&#39;t make any changes on the example code from GitHub, just added my `app_id` and `token`","body":"No am testing it on a real device, I didn&#39;t make any changes on the example code from GitHub, just added my <code>app_id</code> and <code>token</code>"},{"owner":{"account_id":17962444,"reputation":312,"user_id":13053118,"display_name":"Shaocheng Yang"},"score":0,"creation_date":1607366905,"post_id":65112493,"comment_id":115245034,"body_markdown":"After copying your token and pasting it to the String.xml file, please double check if the token is actually used when joining the channel.","body":"After copying your token and pasting it to the String.xml file, please double check if the token is actually used when joining the channel."}],"answers":[{"tags":[],"owner":{"account_id":11226516,"reputation":1868,"user_id":8235983,"accept_rate":81,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1662980085,"creation_date":1607444587,"answer_id":65202794,"question_id":65112493,"body_markdown":"After a long research I found out that why the live isn&#39;t starting and the screen is blank was because i created a token in agora dashboard with a `channel name` `test1`, but in my app while opening live I passed the `channel name` with user id.\r\n\r\nSo in other to make agora work you need to create a token with same channel name which you will pass while starting live.\r\n\r\nBut this fix still didn&#39;t stop the error `Access denied finding property &quot;net.dns1&quot;` in log, but now I can go live.\r\n\r\n\r\n","title":"agora.io Error Access denied finding property net.dns2","body":"<p>After a long research I found out that why the live isn't starting and the screen is blank was because i created a token in agora dashboard with a <code>channel name</code> <code>test1</code>, but in my app while opening live I passed the <code>channel name</code> with user id.</p>\n<p>So in other to make agora work you need to create a token with same channel name which you will pass while starting live.</p>\n<p>But this fix still didn't stop the error <code>Access denied finding property &quot;net.dns1&quot;</code> in log, but now I can go live.</p>\n"}],"owner":{"account_id":11226516,"reputation":1868,"user_id":8235983,"accept_rate":81,"display_name":"Peter"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10761,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":65202794,"answer_count":1,"score":6,"last_activity_date":1662980085,"creation_date":1606927766,"question_id":65112493,"body_markdown":"Am trying to implement a live streaming app using `agora.io`, on test vision. When i click on start streaming I get error below and camera will be blank.\r\n\r\n    W/GENP.0: type=1400 audit(0.0:74945): avc: denied { read } for name=&quot;u:object_r:net_dns_prop:s0&quot; dev=&quot;tmpfs&quot; ino=3282 scontext=u:r:untrusted_app:s0:c512,c768 tcontext=u:object_r:net_dns_prop:s0 tclass=file permissive=0\r\n    E/libc: Access denied finding property &quot;net.dns1&quot;\r\n    E/libc: Access denied finding property &quot;net.dns2&quot;\r\n        Access denied finding property &quot;net.dns3&quot;\r\n    E/libc: Access denied finding property &quot;net.dns4&quot;\r\n\r\n\r\nPlease any idea what is causing the issue.","title":"agora.io Error Access denied finding property net.dns2","body":"<p>Am trying to implement a live streaming app using <code>agora.io</code>, on test vision. When i click on start streaming I get error below and camera will be blank.</p>\n<pre><code>W/GENP.0: type=1400 audit(0.0:74945): avc: denied { read } for name=&quot;u:object_r:net_dns_prop:s0&quot; dev=&quot;tmpfs&quot; ino=3282 scontext=u:r:untrusted_app:s0:c512,c768 tcontext=u:object_r:net_dns_prop:s0 tclass=file permissive=0\nE/libc: Access denied finding property &quot;net.dns1&quot;\nE/libc: Access denied finding property &quot;net.dns2&quot;\n    Access denied finding property &quot;net.dns3&quot;\nE/libc: Access denied finding property &quot;net.dns4&quot;\n</code></pre>\n<p>Please any idea what is causing the issue.</p>\n"},{"tags":["java","spring","mongodb","hibernate","mongodb-query"],"answers":[{"tags":[],"owner":{"account_id":5243437,"reputation":98,"user_id":4189875,"display_name":"BigO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662980078,"creation_date":1662980078,"answer_id":73688164,"question_id":73687956,"body_markdown":"    import java.util.Arrays;\r\n    import org.bson.Document;\r\n    import com.mongodb.MongoClient;\r\n    import com.mongodb.MongoClientURI;\r\n    import com.mongodb.client.FindIterable;\r\n    import com.mongodb.client.MongoCollection;\r\n    import com.mongodb.client.MongoDatabase;\r\n    import org.bson.conversions.Bson;\r\n    import java.util.concurrent.TimeUnit;\r\n    import org.bson.Document;\r\n    \r\n    /*\r\n     * Requires the MongoDB Java Driver.\r\n     * https://mongodb.github.io/mongo-java-driver\r\n     */\r\n    \r\n    Bson filter = new Document(&quot;$and&quot;, Arrays.asList(new Document(&quot;timeStamp&quot;, \r\n            new Document(&quot;$gt&quot;, &quot;now-24 epoch&quot;)), \r\n            new Document(&quot;$lt&quot;, &quot;now epoch&quot;)));\r\n    \r\n    MongoClient mongoClient = new MongoClient(\r\n        new MongoClientURI(\r\n            &quot;[YOUR_MONGO_URI]&quot;\r\n        )\r\n    );\r\n    MongoDatabase database = mongoClient.getDatabase(&quot;[YOUR_DB]&quot;);\r\n    MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;[YOUR_COLLECTION]&quot;);\r\n    FindIterable&lt;Document&gt; result = collection.find(filter);","title":"how to delete records in mongo collection based on epoch?","body":"<pre><code>import java.util.Arrays;\nimport org.bson.Document;\nimport com.mongodb.MongoClient;\nimport com.mongodb.MongoClientURI;\nimport com.mongodb.client.FindIterable;\nimport com.mongodb.client.MongoCollection;\nimport com.mongodb.client.MongoDatabase;\nimport org.bson.conversions.Bson;\nimport java.util.concurrent.TimeUnit;\nimport org.bson.Document;\n\n/*\n * Requires the MongoDB Java Driver.\n * https://mongodb.github.io/mongo-java-driver\n */\n\nBson filter = new Document(&quot;$and&quot;, Arrays.asList(new Document(&quot;timeStamp&quot;, \n        new Document(&quot;$gt&quot;, &quot;now-24 epoch&quot;)), \n        new Document(&quot;$lt&quot;, &quot;now epoch&quot;)));\n\nMongoClient mongoClient = new MongoClient(\n    new MongoClientURI(\n        &quot;[YOUR_MONGO_URI]&quot;\n    )\n);\nMongoDatabase database = mongoClient.getDatabase(&quot;[YOUR_DB]&quot;);\nMongoCollection&lt;Document&gt; collection = database.getCollection(&quot;[YOUR_COLLECTION]&quot;);\nFindIterable&lt;Document&gt; result = collection.find(filter);\n</code></pre>\n"}],"owner":{"account_id":20111723,"reputation":17,"user_id":15268247,"display_name":"Searching For Solutions"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1662980078,"creation_date":1662979050,"question_id":73687956,"body_markdown":"below is my mongo db collection:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nso here i need to query in mongo db through java,\r\n\r\n    to remove the records of (current epoch-24 hours), basically i need last 24 hours records\r\n\r\nlike in this :\r\ndb data, the first row is last 24 hours\r\nso after removal the db should be like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\ncan you pls help how to do this in java with mongo?\r\n\r\nassuming i have the DAO and POJO available .\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sZBVs.png\r\n  [2]: https://i.stack.imgur.com/etlAQ.png","title":"how to delete records in mongo collection based on epoch?","body":"<p>below is my mongo db collection:</p>\n<p><a href=\"https://i.stack.imgur.com/sZBVs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sZBVs.png\" alt=\"enter image description here\" /></a></p>\n<p>so here i need to query in mongo db through java,</p>\n<pre><code>to remove the records of (current epoch-24 hours), basically i need last 24 hours records\n</code></pre>\n<p>like in this :\ndb data, the first row is last 24 hours\nso after removal the db should be like this:</p>\n<p><a href=\"https://i.stack.imgur.com/etlAQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/etlAQ.png\" alt=\"enter image description here\" /></a></p>\n<p>can you pls help how to do this in java with mongo?</p>\n<p>assuming i have the DAO and POJO available .</p>\n"},{"tags":["java","reactjs","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":11597557,"reputation":469,"user_id":8495832,"display_name":"SYED MUSTAFA HUSSAIN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662979897,"creation_date":1662979897,"answer_id":73688120,"question_id":73686078,"body_markdown":"Use this &quot;**WebSecurityConfig**&quot;\r\n\r\n\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        private final JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\r\n        private final UserDetailsService userDetailsService;\r\n        private final JwtRequestFilter jwtRequestFilter;\r\n    \r\n        public WebSecurityConfig(JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint, UserDetailsService userDetailsService, JwtRequestFilter jwtRequestFilter) {\r\n            this.jwtAuthenticationEntryPoint = jwtAuthenticationEntryPoint;\r\n            this.userDetailsService = userDetailsService;\r\n            this.jwtRequestFilter = jwtRequestFilter;\r\n        }\r\n    \r\n        @Autowired\r\n        public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n            // configure AuthenticationManager so that it knows from where to load\r\n            // user for matching credentials\r\n            // Use BCryptPasswordEncoder\r\n            auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder(){\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Bean\r\n        @Override\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .cors()\r\n                    .and()\r\n                    .csrf()\r\n                    /*.and()\r\n                    .cors()*/\r\n                    .disable()\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/authenticate&quot;,&quot;/notification/*&quot;,&quot;/actuator/*&quot;,&quot;/actuator&quot;)\r\n                    .permitAll()\r\n                    .antMatchers(&quot;/app/*&quot;,&quot;/topic/*&quot;,&quot;/exchange/*&quot;)\r\n                    .authenticated()\r\n                    .anyRequest()\r\n                    .authenticated()\r\n                    .and()\r\n                    .exceptionHandling()\r\n                    .authenticationEntryPoint(jwtAuthenticationEntryPoint)\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \r\n            http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n        }\r\n\r\n","title":"request doesn&#39;t pass access control check: It does not have HTTP ok status. on Spring Boot","body":"<p>Use this &quot;<strong>WebSecurityConfig</strong>&quot;</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private final JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\n    private final UserDetailsService userDetailsService;\n    private final JwtRequestFilter jwtRequestFilter;\n\n    public WebSecurityConfig(JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint, UserDetailsService userDetailsService, JwtRequestFilter jwtRequestFilter) {\n        this.jwtAuthenticationEntryPoint = jwtAuthenticationEntryPoint;\n        this.userDetailsService = userDetailsService;\n        this.jwtRequestFilter = jwtRequestFilter;\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        // configure AuthenticationManager so that it knows from where to load\n        // user for matching credentials\n        // Use BCryptPasswordEncoder\n        auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .cors()\n                .and()\n                .csrf()\n                /*.and()\n                .cors()*/\n                .disable()\n                .authorizeRequests()\n                .antMatchers(&quot;/authenticate&quot;,&quot;/notification/*&quot;,&quot;/actuator/*&quot;,&quot;/actuator&quot;)\n                .permitAll()\n                .antMatchers(&quot;/app/*&quot;,&quot;/topic/*&quot;,&quot;/exchange/*&quot;)\n                .authenticated()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .exceptionHandling()\n                .authenticationEntryPoint(jwtAuthenticationEntryPoint)\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n    }\n</code></pre>\n"}],"owner":{"account_id":6241524,"reputation":1808,"user_id":4854993,"accept_rate":55,"display_name":"Kevin Bryan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1662979897,"creation_date":1662969217,"question_id":73686078,"body_markdown":"I having blocked by CORS on the client side, so I added these configuration on spring boot to allow api calls on my react app:\r\n\r\n    @Configuration\r\n    public class WebConfiguration implements WebMvcConfigurer {\r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;http://localhost:3000&quot;);\r\n        }\r\n    }\r\n\r\n\r\nThen this is my api call on my React app:\r\n\r\n      const res = await axios({\r\n        method: &quot;POST&quot;,\r\n        url: &quot;http://localhost:8080/login&quot;,\r\n        headers: {\r\n          &quot;Access-Control-Allow-Origin&quot;: &quot;*&quot;,\r\n          &quot;content-type&quot;: &quot;application/x-www-form-urlencoded&quot;,\r\n        },\r\n        data: {\r\n          username,\r\n          password,\r\n        },\r\n      });\r\n\r\n\r\nHowever I&#39;m still getting blocked by CORS error\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eBPR0.png","title":"request doesn&#39;t pass access control check: It does not have HTTP ok status. on Spring Boot","body":"<p>I having blocked by CORS on the client side, so I added these configuration on spring boot to allow api calls on my react app:</p>\n<pre><code>@Configuration\npublic class WebConfiguration implements WebMvcConfigurer {\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;).allowedOrigins(&quot;http://localhost:3000&quot;);\n    }\n}\n</code></pre>\n<p>Then this is my api call on my React app:</p>\n<pre><code>  const res = await axios({\n    method: &quot;POST&quot;,\n    url: &quot;http://localhost:8080/login&quot;,\n    headers: {\n      &quot;Access-Control-Allow-Origin&quot;: &quot;*&quot;,\n      &quot;content-type&quot;: &quot;application/x-www-form-urlencoded&quot;,\n    },\n    data: {\n      username,\n      password,\n    },\n  });\n</code></pre>\n<p>However I'm still getting blocked by CORS error</p>\n<p><a href=\"https://i.stack.imgur.com/eBPR0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eBPR0.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","hl7-fhir","hapi-fhir","smart-on-fhir"],"answers":[{"tags":[],"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662739512,"creation_date":1661283618,"answer_id":73464309,"question_id":73334765,"body_markdown":"\r\nhttp://hapi.fhir.org/baseR4/metadata\r\n\r\nhttp://wildfhir4.aegis.net/fhir4-0-1/metadata\r\n\r\nhttps://vonk.fire.ly/R4/metadata\r\n\r\nI think you&#39;re asking this.\r\n\r\nIf you examine any of the reference implementations above: you&#39;ll retrieve the CapabilityStatement.\r\n\r\nEVERY FHIR server must supply a CapabilityStatement.\r\n\r\nYou look at the CapabilityStatement, find the Fhir-Resource (&quot;Patient&quot; here), and then any includes and rev-includes.\r\n\r\n\r\n\r\n\r\n                    &quot;type&quot;: &quot;Patient&quot;,\r\n\r\n                    &quot;searchInclude&quot;: [\r\n                        &quot;Patient:general-practitioner&quot;,\r\n                        &quot;Patient:link&quot;,\r\n                        &quot;Patient:organization&quot;\r\n                    ],\r\n                    &quot;searchRevInclude&quot;: [\r\n                        &quot;Account:patient&quot;,\r\n                        &quot;Account:subject&quot;,\r\n\r\n\r\nalso see:\r\n\r\nhttps://www.hl7.org/fhir/search.html#include\r\n\r\n","title":"Is there any way to fetch the list of resource types available for a patient id from FHIR Server?","body":"<p><a href=\"http://hapi.fhir.org/baseR4/metadata\" rel=\"nofollow noreferrer\">http://hapi.fhir.org/baseR4/metadata</a></p>\n<p><a href=\"http://wildfhir4.aegis.net/fhir4-0-1/metadata\" rel=\"nofollow noreferrer\">http://wildfhir4.aegis.net/fhir4-0-1/metadata</a></p>\n<p><a href=\"https://vonk.fire.ly/R4/metadata\" rel=\"nofollow noreferrer\">https://vonk.fire.ly/R4/metadata</a></p>\n<p>I think you're asking this.</p>\n<p>If you examine any of the reference implementations above: you'll retrieve the CapabilityStatement.</p>\n<p>EVERY FHIR server must supply a CapabilityStatement.</p>\n<p>You look at the CapabilityStatement, find the Fhir-Resource (&quot;Patient&quot; here), and then any includes and rev-includes.</p>\n<pre><code>                &quot;type&quot;: &quot;Patient&quot;,\n\n                &quot;searchInclude&quot;: [\n                    &quot;Patient:general-practitioner&quot;,\n                    &quot;Patient:link&quot;,\n                    &quot;Patient:organization&quot;\n                ],\n                &quot;searchRevInclude&quot;: [\n                    &quot;Account:patient&quot;,\n                    &quot;Account:subject&quot;,\n</code></pre>\n<p>also see:</p>\n<p><a href=\"https://www.hl7.org/fhir/search.html#include\" rel=\"nofollow noreferrer\">https://www.hl7.org/fhir/search.html#include</a></p>\n"},{"tags":[],"owner":{"account_id":5614999,"reputation":443,"user_id":4446662,"accept_rate":80,"display_name":"Spindoctor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661656614,"creation_date":1661656614,"answer_id":73515760,"question_id":73334765,"body_markdown":"I think what your asking is resources types linked to a Patient. In this case you can do a http://base/fhir/Patient/[id]/$everything\r\n\r\nhttps://hl7.org/fhir/operation-patient-everything.html\r\n","title":"Is there any way to fetch the list of resource types available for a patient id from FHIR Server?","body":"<p>I think what your asking is resources types linked to a Patient. In this case you can do a http://base/fhir/Patient/[id]/$everything</p>\n<p><a href=\"https://hl7.org/fhir/operation-patient-everything.html\" rel=\"nofollow noreferrer\">https://hl7.org/fhir/operation-patient-everything.html</a></p>\n"},{"tags":[],"owner":{"account_id":508183,"reputation":510,"user_id":1250568,"display_name":"Jason S."},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662239583,"creation_date":1662239583,"answer_id":73595443,"question_id":73334765,"body_markdown":"When you say &quot;the list of resource types available for a patient from the FHIR server&quot;, I think what you mean is the resource types that can be searched by patient on the FHIR server.\r\n\r\nTo build such a list, read the FHIR server&#39;s `CapabilityStatement`.  Iterate through the CapabilityStatement&#39;s `resource` array, checking each item&#39;s `searchParam` array for an element where `name` = &#39;patient&#39; and `type` = &#39;reference&#39;. If you find it, add that item&#39;s `type` value (i.e. the resource type) to the list.","title":"Is there any way to fetch the list of resource types available for a patient id from FHIR Server?","body":"<p>When you say &quot;the list of resource types available for a patient from the FHIR server&quot;, I think what you mean is the resource types that can be searched by patient on the FHIR server.</p>\n<p>To build such a list, read the FHIR server's <code>CapabilityStatement</code>.  Iterate through the CapabilityStatement's <code>resource</code> array, checking each item's <code>searchParam</code> array for an element where <code>name</code> = 'patient' and <code>type</code> = 'reference'. If you find it, add that item's <code>type</code> value (i.e. the resource type) to the list.</p>\n"},{"tags":[],"owner":{"account_id":1879653,"reputation":80,"user_id":1700138,"display_name":"Rajesh Rajendran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662979786,"creation_date":1662979786,"answer_id":73688099,"question_id":73334765,"body_markdown":"Thank you all for posting your answers. I have achieved this by making a batch request like the below,\r\n\r\n        Bundle bundle = new Bundle();\r\n\r\n\t\tbundle.setType(Bundle.BundleType.TRANSACTION);\r\n\r\n\t\t// Adding bundle entries to make the batch request\r\n\r\n\t\t// To fetch the resource count for each resource type\r\n\r\n\t\tfor (String resource : resources) {\r\n\r\n\t\t\tString url = String.format(MyConstants.URLs.FETCH_SUMMARY_COUNT, \r\n            resource, patientId);\r\n\r\n\t bundle.addEntry().getRequest().setUrl(url).setMethod(Bundle.HTTPVerb.GET);\r\n\r\n\t\t}\r\n\r\n\t\ttry {\r\n\r\n\t\t\t// Create a client\r\n\r\n\t\t\tIGenericClient client = fhirContext.newRestfulGenericClient(fhirServerUrl);\r\n\r\n\t\t\tBearerTokenAuthInterceptor bearerTokenAuthInterceptor = new BearerTokenAuthInterceptor(accessToken);\r\n\r\n\t\t\tclient.registerInterceptor(bearerTokenAuthInterceptor);\r\n\r\n\r\n\r\n\t\t\tbundle = client.transaction().withBundle(bundle).execute();\r\n\r\n\t\t\tIFhirPath iFhirPath = fhirContext.newFhirPath();\r\n\r\n\t\t\tList&lt;IntegerType&gt; counts = iFhirPath.evaluate(bundle, MyConstants.FHIRPATH.SUMMARY_COUNT_FROM_BUNDLE,\r\n\r\n\t\t\t\t\tIntegerType.class);\r\n\r\n\t\t\tResourceTypesResponse resourceTypesResponse = ResourceParser.getResourceTypes(counts, resources);\r\n\r\n\t\t\tif (resourceTypesResponse == null) {\r\n\r\n\t\t\t\tthrow new PatientNotFoundException(&quot;Resource Not Found&quot;);\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn resourceTypesResponse;\r\n\r\n\t\t} catch (Exception e) {\r\n\r\n\t\t\tif (e.getMessage().equalsIgnoreCase(&quot;HTTP 401 Unauthorized&quot;)) {\r\n\r\n\t\t\t\treturn getResourceBundleForPatient(patientId, resources);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow new PatientNotFoundException(&quot;Patient Id Not Found&quot;);\r\n\r\n\t\t\t}\r\n\r\n\t\t}","title":"Is there any way to fetch the list of resource types available for a patient id from FHIR Server?","body":"<p>Thank you all for posting your answers. I have achieved this by making a batch request like the below,</p>\n<pre><code>    Bundle bundle = new Bundle();\n\n    bundle.setType(Bundle.BundleType.TRANSACTION);\n\n    // Adding bundle entries to make the batch request\n\n    // To fetch the resource count for each resource type\n\n    for (String resource : resources) {\n\n        String url = String.format(MyConstants.URLs.FETCH_SUMMARY_COUNT, \n        resource, patientId);\n\n bundle.addEntry().getRequest().setUrl(url).setMethod(Bundle.HTTPVerb.GET);\n\n    }\n\n    try {\n\n        // Create a client\n\n        IGenericClient client = fhirContext.newRestfulGenericClient(fhirServerUrl);\n\n        BearerTokenAuthInterceptor bearerTokenAuthInterceptor = new BearerTokenAuthInterceptor(accessToken);\n\n        client.registerInterceptor(bearerTokenAuthInterceptor);\n\n\n\n        bundle = client.transaction().withBundle(bundle).execute();\n\n        IFhirPath iFhirPath = fhirContext.newFhirPath();\n\n        List&lt;IntegerType&gt; counts = iFhirPath.evaluate(bundle, MyConstants.FHIRPATH.SUMMARY_COUNT_FROM_BUNDLE,\n\n                IntegerType.class);\n\n        ResourceTypesResponse resourceTypesResponse = ResourceParser.getResourceTypes(counts, resources);\n\n        if (resourceTypesResponse == null) {\n\n            throw new PatientNotFoundException(&quot;Resource Not Found&quot;);\n\n        }\n\n        return resourceTypesResponse;\n\n    } catch (Exception e) {\n\n        if (e.getMessage().equalsIgnoreCase(&quot;HTTP 401 Unauthorized&quot;)) {\n\n            return getResourceBundleForPatient(patientId, resources);\n\n        } else {\n\n            throw new PatientNotFoundException(&quot;Patient Id Not Found&quot;);\n\n        }\n\n    }\n</code></pre>\n"}],"owner":{"account_id":1879653,"reputation":80,"user_id":1700138,"display_name":"Rajesh Rajendran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":999,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73595443,"answer_count":4,"score":1,"last_activity_date":1662979786,"creation_date":1660310026,"question_id":73334765,"body_markdown":"I want the fetch the list of resource types available for a patient from the FHIR server. I tried to fetch the List of items from the Patient. But it doesn&#39;t contain all the resource types available for that particular patient. ","title":"Is there any way to fetch the list of resource types available for a patient id from FHIR Server?","body":"<p>I want the fetch the list of resource types available for a patient from the FHIR server. I tried to fetch the List of items from the Patient. But it doesn't contain all the resource types available for that particular patient.</p>\n"},{"tags":["java","spring","spring-security","spring-webflux","spring-session"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1662649995,"post_id":73650886,"comment_id":130059630,"body_markdown":"What version of spring?","body":"What version of spring?"},{"owner":{"account_id":9148659,"reputation":195,"user_id":6803950,"display_name":"zy_sun"},"score":0,"creation_date":1662650634,"post_id":73650886,"comment_id":130059901,"body_markdown":"In Spring boot 2.3.12.RELEASE Project @K.Nicholas","body":"In Spring boot 2.3.12.RELEASE Project @K.Nicholas"},{"owner":{"account_id":9148659,"reputation":195,"user_id":6803950,"display_name":"zy_sun"},"score":0,"creation_date":1662650692,"post_id":73650886,"comment_id":130059930,"body_markdown":"I can also upgrade to a higher version","body":"I can also upgrade to a higher version"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1662653246,"post_id":73650886,"comment_id":130061028,"body_markdown":"Stable release5.3.19 / 13 April 2022","body":"Stable release5.3.19 / 13 April 2022"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1662653279,"post_id":73650886,"comment_id":130061041,"body_markdown":"https://spring.io/guides/gs/reactive-rest-service/","body":"<a href=\"https://spring.io/guides/gs/reactive-rest-service/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/reactive-rest-service</a>"}],"answers":[{"tags":[],"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662979227,"creation_date":1662979227,"answer_id":73687983,"question_id":73650886,"body_markdown":"Spring Session provides transparent integration with Spring WebFlux’s `WebSession`.\r\n\r\nThis is documented under &quot;WebSession Integration&quot; in the Spring Session [reference docs][1].\r\n\r\nYou can see an example provided by the Spring Session team [here][2].\r\n\r\nIf you are using Spring Boot and a single Spring Session module is present on the classpath, Spring Boot uses that store implementation automatically. There is no need for further configuration. You can find additional information in the Spring Boot [reference docs](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.spring-session).\r\n\r\nIf you are not using Spring Boot, you can use the annotation `@EnableRedisWebSession` to enable WebSession with Redis. \r\n\r\n  [1]: https://docs.spring.io/spring-session/reference/web-session.html\r\n  [2]: https://github.com/spring-projects/spring-session/tree/main/spring-session-samples/spring-session-sample-boot-webflux","title":"Does Spring Session REST support WebFlux Reactor applications?","body":"<p>Spring Session provides transparent integration with Spring WebFlux’s <code>WebSession</code>.</p>\n<p>This is documented under &quot;WebSession Integration&quot; in the Spring Session <a href=\"https://docs.spring.io/spring-session/reference/web-session.html\" rel=\"nofollow noreferrer\">reference docs</a>.</p>\n<p>You can see an example provided by the Spring Session team <a href=\"https://github.com/spring-projects/spring-session/tree/main/spring-session-samples/spring-session-sample-boot-webflux\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>If you are using Spring Boot and a single Spring Session module is present on the classpath, Spring Boot uses that store implementation automatically. There is no need for further configuration. You can find additional information in the Spring Boot <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.spring-session\" rel=\"nofollow noreferrer\">reference docs</a>.</p>\n<p>If you are not using Spring Boot, you can use the annotation <code>@EnableRedisWebSession</code> to enable WebSession with Redis.</p>\n"}],"owner":{"account_id":9148659,"reputation":195,"user_id":6803950,"display_name":"zy_sun"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":721,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73687983,"answer_count":1,"score":0,"last_activity_date":1662979227,"creation_date":1662647836,"question_id":73650886,"body_markdown":"\r\n**I&#39;m planning to integrate Spring Session Redis + Spring Security in WebFlux Project.**\r\n\r\nAnd I am looking for some official documentation and references\\Sample.But The Document only have Servlet Container Initialization.\r\n\r\nI`m not quite sure the Spring Session REST support WebFlux Reactor applications.\r\nIn my limited experience with Spring,Thanks in advance.\r\n\r\nSpring Session and Spring Security:\r\nhttps://docs.spring.io/spring-session/docs/2.5.3/reference/html5/guides/java-security.html#servlet-container-initialization\r\n\r\nSpring Session - REST:\r\nhttps://docs.spring.io/spring-session/docs/2.4.6/reference/html5/guides/java-rest.html#servlet-container-initialization\r\n\r\n\r\n","title":"Does Spring Session REST support WebFlux Reactor applications?","body":"<p><strong>I'm planning to integrate Spring Session Redis + Spring Security in WebFlux Project.</strong></p>\n<p>And I am looking for some official documentation and references\\Sample.But The Document only have Servlet Container Initialization.</p>\n<p>I`m not quite sure the Spring Session REST support WebFlux Reactor applications.\nIn my limited experience with Spring,Thanks in advance.</p>\n<p>Spring Session and Spring Security:\n<a href=\"https://docs.spring.io/spring-session/docs/2.5.3/reference/html5/guides/java-security.html#servlet-container-initialization\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-session/docs/2.5.3/reference/html5/guides/java-security.html#servlet-container-initialization</a></p>\n<p>Spring Session - REST:\n<a href=\"https://docs.spring.io/spring-session/docs/2.4.6/reference/html5/guides/java-rest.html#servlet-container-initialization\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-session/docs/2.4.6/reference/html5/guides/java-rest.html#servlet-container-initialization</a></p>\n"},{"tags":["java","nio"],"answers":[{"tags":[],"owner":{"account_id":8247130,"reputation":22669,"user_id":6202869,"accept_rate":50,"display_name":"Roland"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662979072,"creation_date":1490012163,"answer_id":42903374,"question_id":42903373,"body_markdown":"What I came up with is the following:\r\n\r\n    boolean containsSubPath(Path someRealPath, Path subPathToCheck) {\r\n      return someRealPath.normalize()\r\n                         .toString()\r\n                         .contains(subPathToCheck.normalize()\r\n                                                 .toString());\r\n    }\r\n\r\nThis way I am able to just call:\r\n\r\n    containsSubPath(Paths.get(&quot;/tmp/some/path/to/somewhere&quot;), Paths.get(&quot;some/path&quot;));\r\n\r\nAs Thomas Kl&#228;ger pointed out, this solution matches also paths, that are only substrings of a real path (which for my use case would also be ok).\r\n\r\nHere is another solution that is probably more correct (for complete matching subpaths), but still not as short as I would like it to be (now corrected due to Kabhals input):\r\n\r\n```\r\nstatic boolean containsSubPath(Path realPath, Path subPath) {\r\n  for (Path realPathSegment : realPath.normalize()) {\r\n    if (containsSubPath(realPathSegment.iterator(), subPath.normalize().iterator())) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\nprivate static boolean containsSubPath(Iterator&lt;Path&gt; realPathIterator, Iterator&lt;Path&gt; subPathIterator) {\r\n  var hasEntries = realPathIterator.hasNext() &amp;&amp; subPathIterator.hasNext();\r\n  while (realPathIterator.hasNext() &amp;&amp; subPathIterator.hasNext()) {\r\n    Path realPathSegment = realPathIterator.next();\r\n    Path subPathSegment = subPathIterator.next();\r\n    if (!Objects.equals(realPathSegment, subPathSegment))\r\n      return false;\r\n  }\r\n  return hasEntries;\r\n}\r\n```\r\n\r\nExample calls with expected output:\r\n\r\n    containsSubPath(Paths.get(&quot;/tmp/some/path/to/somewhere&quot;), Paths.get(&quot;some/path&quot;)) // true\r\n    containsSubPath(Paths.get(&quot;/tmp/some/path/to/somewhere&quot;), Paths.get(&quot;me/pa&quot;)) // false\r\n\r\n\r\nIf you need to use it as `BinaryOperator` just use the method reference instead, i.e. `YourClass::containsSubPath`.","title":"java.nio.file.Path.contains(subPath)?","body":"<p>What I came up with is the following:</p>\n<pre><code>boolean containsSubPath(Path someRealPath, Path subPathToCheck) {\n  return someRealPath.normalize()\n                     .toString()\n                     .contains(subPathToCheck.normalize()\n                                             .toString());\n}\n</code></pre>\n<p>This way I am able to just call:</p>\n<pre><code>containsSubPath(Paths.get(&quot;/tmp/some/path/to/somewhere&quot;), Paths.get(&quot;some/path&quot;));\n</code></pre>\n<p>As Thomas Kläger pointed out, this solution matches also paths, that are only substrings of a real path (which for my use case would also be ok).</p>\n<p>Here is another solution that is probably more correct (for complete matching subpaths), but still not as short as I would like it to be (now corrected due to Kabhals input):</p>\n<pre><code>static boolean containsSubPath(Path realPath, Path subPath) {\n  for (Path realPathSegment : realPath.normalize()) {\n    if (containsSubPath(realPathSegment.iterator(), subPath.normalize().iterator())) {\n      return true;\n    }\n  }\n  return false;\n}\nprivate static boolean containsSubPath(Iterator&lt;Path&gt; realPathIterator, Iterator&lt;Path&gt; subPathIterator) {\n  var hasEntries = realPathIterator.hasNext() &amp;&amp; subPathIterator.hasNext();\n  while (realPathIterator.hasNext() &amp;&amp; subPathIterator.hasNext()) {\n    Path realPathSegment = realPathIterator.next();\n    Path subPathSegment = subPathIterator.next();\n    if (!Objects.equals(realPathSegment, subPathSegment))\n      return false;\n  }\n  return hasEntries;\n}\n</code></pre>\n<p>Example calls with expected output:</p>\n<pre><code>containsSubPath(Paths.get(&quot;/tmp/some/path/to/somewhere&quot;), Paths.get(&quot;some/path&quot;)) // true\ncontainsSubPath(Paths.get(&quot;/tmp/some/path/to/somewhere&quot;), Paths.get(&quot;me/pa&quot;)) // false\n</code></pre>\n<p>If you need to use it as <code>BinaryOperator</code> just use the method reference instead, i.e. <code>YourClass::containsSubPath</code>.</p>\n"}],"owner":{"account_id":8247130,"reputation":22669,"user_id":6202869,"accept_rate":50,"display_name":"Roland"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3788,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1662979072,"creation_date":1490012163,"question_id":42903373,"body_markdown":"I need to check whether a given path is a subpath anywhere within another path and was wondering whether there exists such a method already before writing my own.\r\n\r\nHere is some code that may help to understand the problem:\r\n\r\n    Path someRealPath = Paths.get(&quot;/tmp/some/path/to/somewhere&quot;);\r\n    Path subpathToCheck = Paths.get(&quot;some/path&quot;);\r\n\r\n    // I am expecting something similar as follows:\r\n    someRealPath.contains(subPathToCheck) // should return true in this case\r\n    someRealPath.contains(Paths.get(&quot;some/to&quot;)) // should return false\r\n\r\nI already saw `relativize`, but I don&#39;t think that&#39;s the easiest way to solve the problem. The simplest I came up with was `normalize().toString().contains(/* other normalized string path */)`. But maybe there is an easier way? Lots of methods inside `Paths` look as if this functionality must already be in there. Maybe I am just not seeing it.","title":"java.nio.file.Path.contains(subPath)?","body":"<p>I need to check whether a given path is a subpath anywhere within another path and was wondering whether there exists such a method already before writing my own.</p>\n\n<p>Here is some code that may help to understand the problem:</p>\n\n<pre><code>Path someRealPath = Paths.get(\"/tmp/some/path/to/somewhere\");\nPath subpathToCheck = Paths.get(\"some/path\");\n\n// I am expecting something similar as follows:\nsomeRealPath.contains(subPathToCheck) // should return true in this case\nsomeRealPath.contains(Paths.get(\"some/to\")) // should return false\n</code></pre>\n\n<p>I already saw <code>relativize</code>, but I don't think that's the easiest way to solve the problem. The simplest I came up with was <code>normalize().toString().contains(/* other normalized string path */)</code>. But maybe there is an easier way? Lots of methods inside <code>Paths</code> look as if this functionality must already be in there. Maybe I am just not seeing it.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1662972775,"post_id":73686452,"comment_id":130121154,"body_markdown":"The unit test fails not the app :). But that is maybe nitpicking. But you enabled JWT/oauth2 so yuou need to add some beans tot he context. You haven&#39;t thus it fails when the test is trying to start the application.","body":"The unit test fails not the app :). But that is maybe nitpicking. But you enabled JWT/oauth2 so yuou need to add some beans tot he context. You haven&#39;t thus it fails when the test is trying to start the application."}],"answers":[{"tags":[],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1662973528,"creation_date":1662973528,"answer_id":73686867,"question_id":73686452,"body_markdown":"The following is written in the [documentation][1]:\r\n\r\n&gt; If the application doesn’t expose a JwtDecoder bean, then Spring Boot\r\n&gt; will expose the above default one.\r\n\r\n\r\nHere is how default JwtDecoder implementation looks like:\r\n\r\n    @Bean\r\n    public JwtDecoder jwtDecoder() {\r\n        return JwtDecoders.fromIssuerLocation(issuerUri);\r\n    }\r\n\r\n\r\nMy guess is that you didn&#39;t specify `issuer-uri` in your property file, so Spring fails to autoconfigure bean above.\r\n\r\nIn a Spring Boot application, to specify which authorization server to use, simply do:\r\n \r\n\r\n     spring:\r\n      security:\r\n        oauth2:\r\n          resourceserver:\r\n            jwt:\r\n              issuer-uri: https://idp.example.com/issuer\r\n\r\nWhere `idp.example.com/issuer` is the value contained in the iss claim for JWT tokens that the authorization server will issue. Resource Server will use this property to further self-configure, discover the authorization server’s public keys, and subsequently validate incoming JWTs\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html","title":"Spring boot application fails to start when adding junit tests","body":"<p>The following is written in the <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>If the application doesn’t expose a JwtDecoder bean, then Spring Boot\nwill expose the above default one.</p>\n</blockquote>\n<p>Here is how default JwtDecoder implementation looks like:</p>\n<pre><code>@Bean\npublic JwtDecoder jwtDecoder() {\n    return JwtDecoders.fromIssuerLocation(issuerUri);\n}\n</code></pre>\n<p>My guess is that you didn't specify <code>issuer-uri</code> in your property file, so Spring fails to autoconfigure bean above.</p>\n<p>In a Spring Boot application, to specify which authorization server to use, simply do:</p>\n<pre><code> spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: https://idp.example.com/issuer\n</code></pre>\n<p>Where <code>idp.example.com/issuer</code> is the value contained in the iss claim for JWT tokens that the authorization server will issue. Resource Server will use this property to further self-configure, discover the authorization server’s public keys, and subsequently validate incoming JWTs</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662978991,"creation_date":1662978991,"answer_id":73687944,"question_id":73686452,"body_markdown":"If your test is a ctroller unit-test, maybe should you just `@MockBean JwtDecoder jwtDecoder;`\r\n\r\n## PS\r\nFor roles checking instead of your custom JWT validator, maybe could you configure an authorities converter (from Keycloak roles rather than scopes) and have Authentication converter use this authorities converter.\r\n\r\nThis would enable you to:\r\n- write security expressions like `@PreAuthorize(&quot;hasAuthority(&#39;foo&#39;)&quot;)` or equivalents in security config\r\n- unit test access control\r\n\r\nSample in [this article][1]\r\n\r\n\r\n  [1]: https://dzone.com/articles/spring-oauth2-resource-servers","title":"Spring boot application fails to start when adding junit tests","body":"<p>If your test is a ctroller unit-test, maybe should you just <code>@MockBean JwtDecoder jwtDecoder;</code></p>\n<h2>PS</h2>\n<p>For roles checking instead of your custom JWT validator, maybe could you configure an authorities converter (from Keycloak roles rather than scopes) and have Authentication converter use this authorities converter.</p>\n<p>This would enable you to:</p>\n<ul>\n<li>write security expressions like <code>@PreAuthorize(&quot;hasAuthority('foo')&quot;)</code> or equivalents in security config</li>\n<li>unit test access control</li>\n</ul>\n<p>Sample in <a href=\"https://dzone.com/articles/spring-oauth2-resource-servers\" rel=\"nofollow noreferrer\">this article</a></p>\n"}],"owner":{"account_id":7434209,"reputation":81,"user_id":5827272,"display_name":"CompileNow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":538,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73687944,"answer_count":2,"score":0,"last_activity_date":1662978991,"creation_date":1662971455,"question_id":73686452,"body_markdown":"I am trying to add tests to my Spring boot app, but when I do, the application fails to start.\r\n\r\nI have a custom jwt authorazation class to validate jwt, I am not sure if this causes any issue?\r\n\r\n``` \r\n\r\n@Component\r\npublic class JwtCustomValidator {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(LogDeletionJob.class);\r\n\r\n    private static final String TAG = &quot;JwtCustomValidator&quot;;\r\n\r\n    public void validateAudience(Jwt jwt) throws Exception {\r\n        //System.out.println(&quot;validate audience JWT AUDIENCE: &quot; + jwt.getAudience().toString());\r\n        if (!jwt.getAudience().contains(System.getenv(&quot;oauthAudience&quot;))) {\r\n            //System.out.println(&quot;\\nAUDIENCE NOT AUTHORIZED!\\n&quot;);\r\n            logger.warn(TAG, &quot;AUDIENCE NOT AUTHORIZED!&quot; + jwt.getAudience());\r\n            throw new Exception(&quot;wrong audience&quot;);\r\n        }\r\n        logger.info(TAG, &quot;audience validated&quot;);\r\n    }\r\n\r\n    public void validateRole(final Jwt jwt, final String role) throws Exception {\r\n        //System.out.println(&quot;validate roles JWT ROLES: &quot; + jwt.getClaim(&quot;roles&quot;).toString());\r\n        if (!((List&lt;String&gt;) jwt.getClaim(&quot;roles&quot;)).contains(role)) {\r\n            //System.out.println(&quot;\\nROLE NOT AUTHORIZED!\\n&quot;);\r\n            logger.warn(TAG, &quot;ROLE NOT AUTHORIZED!&quot; + jwt.getClaim(&quot;roles&quot;).toString());\r\n            throw new Exception(&quot;Not sufficient role, UnAuthorized&quot;);\r\n        }\r\n        logger.info(TAG, &quot;role validated&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nHere is my security configuration class with the antmatchers:\r\n``` \r\n@EnableWebSecurity(debug = false)\r\n@Configuration\r\npublic class ResourceServerSecurityConfigs extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests(authz -&gt; authz\r\n                .antMatchers(HttpMethod.GET, &quot;api/v1/books/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\r\n                .antMatchers(HttpMethod.POST, &quot;api/v1/books/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\r\n                .antMatchers(HttpMethod.PUT, &quot;api/v1/books/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\r\n                .antMatchers(HttpMethod.DELETE, &quot;api/v1/books/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\r\n                .antMatchers(HttpMethod.GET, &quot;api/v1/lending/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\r\n                .antMatchers(HttpMethod.POST, &quot;api/v1/lending/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\r\n                .antMatchers(HttpMethod.PUT, &quot;api/v1/lending/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\r\n                .antMatchers(HttpMethod.DELETE, &quot;api/v1/lending/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\r\n                .anyRequest().authenticated())\r\n                .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt());\r\n    }\r\n}\r\n```\r\n\r\n\r\nHere&#39;s the stacktrace:\r\n\r\n\r\n``` \r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nMethod springSecurityFilterChain in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; in your configuration.\r\n\r\n2022-09-12 10:05:57,294 ERROR [main] org.springframework.test.context.TestContextManager: Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@55787112] to prepare test instance [backend.controllers.MyAppListControllerTest@5488b5c5]\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n\tat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:369)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\r\n\t... 70 common frames omitted\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n\t... 91 common frames omitted\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:351)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1172)\r\n\tat org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$JwtConfigurer.getJwtDecoder(OAuth2ResourceServerConfigurer.java:419)\r\n\tat org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$JwtConfigurer.getAuthenticationProvider(OAuth2ResourceServerConfigurer.java:428)\r\n\tat org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer.getAuthenticationProvider(OAuth2ResourceServerConfigurer.java:335)\r\n\tat org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer.init(OAuth2ResourceServerConfigurer.java:254)\r\n\tat org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer.init(OAuth2ResourceServerConfigurer.java:147)\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:338)\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:300)\r\n\tat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)\r\n\tat org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:315)\r\n\tat org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:90)\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:305)\r\n\tat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:126)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n\t... 92 common frames omitted\r\nDisconnected from the target VM, address: &#39;127.0.0.1:54592&#39;, transport: &#39;socket&#39;\r\n\r\nProcess finished with exit code -1\r\n```\r\n\r\nNot sure where to start, I didn&#39;t find any thread here that solved yet. Please explain this to me, would really appreciate!\r\n\r\nEdits:\r\nI have one regular app.properties:\r\n```\r\nlogging.level.org.springframework.jdbc.core=${logLvl}\r\nspring.datasource.url=${dbConnStr}\r\nspring.datasource.username=${dbUser}\r\nspring.datasource.password=${dbPw}\r\n\r\nspring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.dialect=com.backend.hibernat.CustSQLServerDialect\r\nspring.jpa.hibernate.ddl-auto = none\r\nserver.port=8081\r\n\r\nmyAppPath=${myAppPath}\r\n\r\ntenantId=123-tenant-id-456\r\nspring.security.oauth2.resourceserver.jwt.issuer-uri=http://issues-uri\r\nspring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://keys\r\n```\r\n\r\nAnd one under test/resources:\r\n```\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n# spring.datasource.x\r\n#spring.datasource.driver-class-name=org.h2.Driver\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.url=jdbc:h2:mem:db;DB_CLOSE_DELAY=-1\r\nspring.datasource.username=sa\r\nspring.datasource.password=sa\r\n#settings\r\nspring.h2.console.enabled=false\r\n#app settings\r\n```","title":"Spring boot application fails to start when adding junit tests","body":"<p>I am trying to add tests to my Spring boot app, but when I do, the application fails to start.</p>\n<p>I have a custom jwt authorazation class to validate jwt, I am not sure if this causes any issue?</p>\n<pre><code>\n@Component\npublic class JwtCustomValidator {\n\n    private static final Logger logger = LoggerFactory.getLogger(LogDeletionJob.class);\n\n    private static final String TAG = &quot;JwtCustomValidator&quot;;\n\n    public void validateAudience(Jwt jwt) throws Exception {\n        //System.out.println(&quot;validate audience JWT AUDIENCE: &quot; + jwt.getAudience().toString());\n        if (!jwt.getAudience().contains(System.getenv(&quot;oauthAudience&quot;))) {\n            //System.out.println(&quot;\\nAUDIENCE NOT AUTHORIZED!\\n&quot;);\n            logger.warn(TAG, &quot;AUDIENCE NOT AUTHORIZED!&quot; + jwt.getAudience());\n            throw new Exception(&quot;wrong audience&quot;);\n        }\n        logger.info(TAG, &quot;audience validated&quot;);\n    }\n\n    public void validateRole(final Jwt jwt, final String role) throws Exception {\n        //System.out.println(&quot;validate roles JWT ROLES: &quot; + jwt.getClaim(&quot;roles&quot;).toString());\n        if (!((List&lt;String&gt;) jwt.getClaim(&quot;roles&quot;)).contains(role)) {\n            //System.out.println(&quot;\\nROLE NOT AUTHORIZED!\\n&quot;);\n            logger.warn(TAG, &quot;ROLE NOT AUTHORIZED!&quot; + jwt.getClaim(&quot;roles&quot;).toString());\n            throw new Exception(&quot;Not sufficient role, UnAuthorized&quot;);\n        }\n        logger.info(TAG, &quot;role validated&quot;);\n    }\n}\n\n</code></pre>\n<p>Here is my security configuration class with the antmatchers:</p>\n<pre><code>@EnableWebSecurity(debug = false)\n@Configuration\npublic class ResourceServerSecurityConfigs extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests(authz -&gt; authz\n                .antMatchers(HttpMethod.GET, &quot;api/v1/books/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\n                .antMatchers(HttpMethod.POST, &quot;api/v1/books/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\n                .antMatchers(HttpMethod.PUT, &quot;api/v1/books/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\n                .antMatchers(HttpMethod.DELETE, &quot;api/v1/books/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\n                .antMatchers(HttpMethod.GET, &quot;api/v1/lending/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\n                .antMatchers(HttpMethod.POST, &quot;api/v1/lending/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\n                .antMatchers(HttpMethod.PUT, &quot;api/v1/lending/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\n                .antMatchers(HttpMethod.DELETE, &quot;api/v1/lending/**&quot;).hasAuthority(&quot;ALLOW-allowedtraffic&quot;)\n                .anyRequest().authenticated())\n                .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt());\n    }\n}\n</code></pre>\n<p>Here's the stacktrace:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nMethod springSecurityFilterChain in org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration required a bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' in your configuration.\n\n2022-09-12 10:05:57,294 ERROR [main] org.springframework.test.context.TestContextManager: Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@55787112] to prepare test instance [backend.controllers.MyAppListControllerTest@5488b5c5]\njava.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)\n    at java.base/java.util.Optional.orElseGet(Optional.java:369)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\n    ... 70 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 91 common frames omitted\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:351)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1172)\n    at org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$JwtConfigurer.getJwtDecoder(OAuth2ResourceServerConfigurer.java:419)\n    at org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer$JwtConfigurer.getAuthenticationProvider(OAuth2ResourceServerConfigurer.java:428)\n    at org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer.getAuthenticationProvider(OAuth2ResourceServerConfigurer.java:335)\n    at org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer.init(OAuth2ResourceServerConfigurer.java:254)\n    at org.springframework.security.config.annotation.web.configurers.oauth2.server.resource.OAuth2ResourceServerConfigurer.init(OAuth2ResourceServerConfigurer.java:147)\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:338)\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:300)\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)\n    at org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:315)\n    at org.springframework.security.config.annotation.web.builders.WebSecurity.performBuild(WebSecurity.java:90)\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:305)\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:126)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 92 common frames omitted\nDisconnected from the target VM, address: '127.0.0.1:54592', transport: 'socket'\n\nProcess finished with exit code -1\n</code></pre>\n<p>Not sure where to start, I didn't find any thread here that solved yet. Please explain this to me, would really appreciate!</p>\n<p>Edits:\nI have one regular app.properties:</p>\n<pre><code>logging.level.org.springframework.jdbc.core=${logLvl}\nspring.datasource.url=${dbConnStr}\nspring.datasource.username=${dbUser}\nspring.datasource.password=${dbPw}\n\nspring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\nspring.jpa.show-sql=true\nspring.jpa.hibernate.dialect=com.backend.hibernat.CustSQLServerDialect\nspring.jpa.hibernate.ddl-auto = none\nserver.port=8081\n\nmyAppPath=${myAppPath}\n\ntenantId=123-tenant-id-456\nspring.security.oauth2.resourceserver.jwt.issuer-uri=http://issues-uri\nspring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://keys\n</code></pre>\n<p>And one under test/resources:</p>\n<pre><code>spring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n# spring.datasource.x\n#spring.datasource.driver-class-name=org.h2.Driver\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.url=jdbc:h2:mem:db;DB_CLOSE_DELAY=-1\nspring.datasource.username=sa\nspring.datasource.password=sa\n#settings\nspring.h2.console.enabled=false\n#app settings\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8950,"page":1042,"page_size":100}
