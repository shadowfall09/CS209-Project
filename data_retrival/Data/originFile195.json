{"items":[{"tags":["java","spring-boot","spring-data-jpa","java-17","criteriabuilder"],"comments":[{"owner":{"account_id":9341144,"reputation":173,"user_id":6933895,"display_name":"Riberto Junior"},"score":0,"creation_date":1684252678,"post_id":76261869,"comment_id":134489716,"body_markdown":"The reason it was not working is that my projection was not correctly designed, I had to rework the joins.","body":"The reason it was not working is that my projection was not correctly designed, I had to rework the joins."}],"owner":{"account_id":9341144,"reputation":173,"user_id":6933895,"display_name":"Riberto Junior"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":614,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694185532,"creation_date":1684232141,"question_id":76261869,"body_markdown":"So I&#39;m trying to use Specification with projection, this is a new feature on Spring Boot 3.\r\n\r\n```\r\nUserRepository repo;\r\nSpecification&lt;User&gt; spec;\r\nPage&lt;UserProjection&gt; result = repo.findBy(spec, q -&gt; q.as(UserProjection.class).page(pageable));\r\n```\r\nas viewed here https://github.com/spring-projects/spring-data-jpa/issues/2499\r\n\r\nBut this implementation generates the same SQL as the regular findAll\r\n\r\n```\r\nUserRepository repo;\r\nSpecification&lt;User&gt; spec;\r\nPage&lt;User&gt; result = repo.findAll(spec, pageable);\r\n```\r\nWith the same SQL the use of projections is meaningless.\r\nIs there anything missing on this implementation?","title":"Spring Boot 3 JpaSpecificationExecutor::FindBy(~) with Specification and Projection","body":"<p>So I'm trying to use Specification with projection, this is a new feature on Spring Boot 3.</p>\n<pre><code>UserRepository repo;\nSpecification&lt;User&gt; spec;\nPage&lt;UserProjection&gt; result = repo.findBy(spec, q -&gt; q.as(UserProjection.class).page(pageable));\n</code></pre>\n<p>as viewed here <a href=\"https://github.com/spring-projects/spring-data-jpa/issues/2499\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-jpa/issues/2499</a></p>\n<p>But this implementation generates the same SQL as the regular findAll</p>\n<pre><code>UserRepository repo;\nSpecification&lt;User&gt; spec;\nPage&lt;User&gt; result = repo.findAll(spec, pageable);\n</code></pre>\n<p>With the same SQL the use of projections is meaningless.\nIs there anything missing on this implementation?</p>\n"},{"tags":["java","android","kotlin"],"owner":{"account_id":29396189,"reputation":1,"user_id":22523482,"display_name":"luszyn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694185218,"creation_date":1694185218,"question_id":77067955,"body_markdown":"Is there any way or SDK that would allow my Android application to connect to the wristbands and download data from them, such as heart rate, number of steps or sleep? I&#39;m trying to make my own fit application that will be able to collect such data. I want to connect to, for example, Mi Band 5 in the simplest way, without the need to use shell commands\r\n\r\nI tried to download the sdk https://github.com/pangliang/miband-sdk-android however gradle had trouble downloading this sdk. I downloaded the SDK from Xiaomi, but due to the lack of documentation, it was difficult to do anything. I tried to detect the band via BluetoothGATT in the test Android application, but it crashed when launched","title":"Downloading data from smartbands (e.g. Xiaomi Mi Band 5)","body":"<p>Is there any way or SDK that would allow my Android application to connect to the wristbands and download data from them, such as heart rate, number of steps or sleep? I'm trying to make my own fit application that will be able to collect such data. I want to connect to, for example, Mi Band 5 in the simplest way, without the need to use shell commands</p>\n<p>I tried to download the sdk <a href=\"https://github.com/pangliang/miband-sdk-android\" rel=\"nofollow noreferrer\">https://github.com/pangliang/miband-sdk-android</a> however gradle had trouble downloading this sdk. I downloaded the SDK from Xiaomi, but due to the lack of documentation, it was difficult to do anything. I tried to detect the band via BluetoothGATT in the test Android application, but it crashed when launched</p>\n"},{"tags":["java","priority-queue","blockingqueue"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694184972,"creation_date":1694183472,"answer_id":77067756,"question_id":77067190,"body_markdown":"&gt;  Is there any other scenario when it could block?\r\n\r\nBy my reading of the code (Java 11 version) `take()` *should* only block if the queue is empty when the call is made.  \r\n\r\nBut that doesn&#39;t imply that a `take()` call will immediately unblock when the queue becomes non-empty.  Indeed, if two or more threads are calling `take()` at the same time, it is conceivable that some threads will &quot;starve&quot; because the arriving elements are consistently being delivered to other waiting threads.   (The `PriorityBlockingQueue` uses `ReentrantLock` instances to coordinate the producers and consumers, but these are not created as *fair* locks.)\r\n\r\nAnother scenario involves faulty `Comparable` or `Comparator` implementations.  When the queue is or becomes non-empty, `take()` calls an internal `dequeue` method which in turn uses the `Comparable` or `Comparator` interface to *sift* the queue.  If your `Comparable` or `Comparator` code could itself block, that would block the current `take()` call and all future `take()` calls.  \r\n\r\n----------------------\r\n\r\nHaving said that, you also need to consider the most obvious explanation; i.e. that `take()` is blocking because the queue *really is empty*.\r\n","title":"Java PriorityBlockingQueue blocking behavior","body":"<blockquote>\n<p>Is there any other scenario when it could block?</p>\n</blockquote>\n<p>By my reading of the code (Java 11 version) <code>take()</code> <em>should</em> only block if the queue is empty when the call is made.</p>\n<p>But that doesn't imply that a <code>take()</code> call will immediately unblock when the queue becomes non-empty.  Indeed, if two or more threads are calling <code>take()</code> at the same time, it is conceivable that some threads will &quot;starve&quot; because the arriving elements are consistently being delivered to other waiting threads.   (The <code>PriorityBlockingQueue</code> uses <code>ReentrantLock</code> instances to coordinate the producers and consumers, but these are not created as <em>fair</em> locks.)</p>\n<p>Another scenario involves faulty <code>Comparable</code> or <code>Comparator</code> implementations.  When the queue is or becomes non-empty, <code>take()</code> calls an internal <code>dequeue</code> method which in turn uses the <code>Comparable</code> or <code>Comparator</code> interface to <em>sift</em> the queue.  If your <code>Comparable</code> or <code>Comparator</code> code could itself block, that would block the current <code>take()</code> call and all future <code>take()</code> calls.</p>\n<hr />\n<p>Having said that, you also need to consider the most obvious explanation; i.e. that <code>take()</code> is blocking because the queue <em>really is empty</em>.</p>\n"}],"owner":{"account_id":7378068,"reputation":31,"user_id":5615886,"display_name":"Krist&#243;f Marosv&#225;ri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77067756,"answer_count":1,"score":0,"last_activity_date":1694184972,"creation_date":1694178615,"question_id":77067190,"body_markdown":"From the docs I see, that the `take()` method blocks until an element becomes available.  \r\nIs there any other scenario when it could block?\r\n\r\nWhat I mean is, is there a possible scenario, when the queue is **not** empty, but despite that, calling `take()` blocks for some reason.\r\n\r\nPlease tell me, if anyone has knowledge about some scenario like this.","title":"Java PriorityBlockingQueue blocking behavior","body":"<p>From the docs I see, that the <code>take()</code> method blocks until an element becomes available.<br />\nIs there any other scenario when it could block?</p>\n<p>What I mean is, is there a possible scenario, when the queue is <strong>not</strong> empty, but despite that, calling <code>take()</code> blocks for some reason.</p>\n<p>Please tell me, if anyone has knowledge about some scenario like this.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4816916,"reputation":16538,"user_id":3888766,"accept_rate":100,"display_name":"Fullstack Guy"},"score":3,"creation_date":1551760069,"post_id":54995386,"comment_id":96747271,"body_markdown":"What were your inputs?","body":"What were your inputs?"},{"owner":{"account_id":15189241,"reputation":1478,"user_id":11032188,"display_name":"Mark Melgo"},"score":0,"creation_date":1551760160,"post_id":54995386,"comment_id":96747292,"body_markdown":"Your code is correct. I think the input during GPA (line 15, as what the error says) are not in double format, maybe you entered a non number input","body":"Your code is correct. I think the input during GPA (line 15, as what the error says) are not in double format, maybe you entered a non number input"},{"owner":{"account_id":15458538,"reputation":59,"user_id":11151793,"display_name":"gangLand"},"score":0,"creation_date":1551760243,"post_id":54995386,"comment_id":96747315,"body_markdown":"@Mark My Inputs were: Hotam for the name 19 for the age, and 3.9 for the GPA, when i put a single digit in the GPA it runs fine. and even adds a 0 at the end for example If i put 3, it will print 3.0","body":"@Mark My Inputs were: Hotam for the name 19 for the age, and 3.9 for the GPA, when i put a single digit in the GPA it runs fine. and even adds a 0 at the end for example If i put 3, it will print 3.0"},{"owner":{"account_id":15156663,"reputation":71,"user_id":10937221,"display_name":"ChipLimo"},"score":0,"creation_date":1551760304,"post_id":54995386,"comment_id":96747331,"body_markdown":"I think you need to add some more code to check input. try to use Scanner.hasNext...() method.","body":"I think you need to add some more code to check input. try to use Scanner.hasNext...() method."},{"owner":{"account_id":15189241,"reputation":1478,"user_id":11032188,"display_name":"Mark Melgo"},"score":1,"creation_date":1551760463,"post_id":54995386,"comment_id":96747374,"body_markdown":"I executed your code with your input. It works well, no error was thrown","body":"I executed your code with your input. It works well, no error was thrown"},{"owner":{"account_id":15458538,"reputation":59,"user_id":11151793,"display_name":"gangLand"},"score":0,"creation_date":1551760670,"post_id":54995386,"comment_id":96747417,"body_markdown":"@Mark Maybe it has to do with eclipse? Im curious in what you run the code in","body":"@Mark Maybe it has to do with eclipse? Im curious in what you run the code in"},{"owner":{"account_id":15189241,"reputation":1478,"user_id":11032188,"display_name":"Mark Melgo"},"score":0,"creation_date":1551760719,"post_id":54995386,"comment_id":96747423,"body_markdown":"@HotamYusupov it has nothing to do with the IDE, I am also running it with eclipse. Try your input again and you will realize that it is working correctly","body":"@HotamYusupov it has nothing to do with the IDE, I am also running it with eclipse. Try your input again and you will realize that it is working correctly"},{"owner":{"account_id":15458538,"reputation":59,"user_id":11151793,"display_name":"gangLand"},"score":0,"creation_date":1551760771,"post_id":54995386,"comment_id":96747439,"body_markdown":"@Mark These are my exact inputs Enter your name: \nhotam\nEnter students age: \n19\nEnter your GPA: \n3.9  &lt;&lt;&lt; this is exactly where i get the error","body":"@Mark These are my exact inputs Enter your name:  hotam Enter students age:  19 Enter your GPA:  3.9  &lt;&lt;&lt; this is exactly where i get the error"}],"answers":[{"tags":[],"owner":{"account_id":3076596,"reputation":1137,"user_id":2605758,"display_name":"Hoppeduppeanut"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1551760731,"creation_date":1551760731,"answer_id":54995508,"question_id":54995386,"body_markdown":"Your code looks OK.\r\n\r\nAn `InputMismatchException` occurs in a `Scanner` when a given input doesn&#39;t match the expected input format. Your exception occurs on line 15, where a scanner expects a decimal number such as `3.14` (which, depending on your system&#39;s locale, the decimal can be represented by a dot `.` or a comma `,`!)\r\n\r\nIf you&#39;re certain that the input you&#39;re providing is absolutely a decimal number, but you&#39;re not sure what locale you&#39;re using, you can force a particular locale by using the `useLocale` method.\r\n\r\n    Scanner Scan = new Scanner(System.in).useLocale(Locale.US);","title":"Exception in thread &quot;main&quot; java.util.InputMismatchException error","body":"<p>Your code looks OK.</p>\n\n<p>An <code>InputMismatchException</code> occurs in a <code>Scanner</code> when a given input doesn't match the expected input format. Your exception occurs on line 15, where a scanner expects a decimal number such as <code>3.14</code> (which, depending on your system's locale, the decimal can be represented by a dot <code>.</code> or a comma <code>,</code>!)</p>\n\n<p>If you're certain that the input you're providing is absolutely a decimal number, but you're not sure what locale you're using, you can force a particular locale by using the <code>useLocale</code> method.</p>\n\n<pre><code>Scanner Scan = new Scanner(System.in).useLocale(Locale.US);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23185557,"reputation":1,"user_id":17282726,"display_name":"Ayoub smit"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1635534165,"creation_date":1635534165,"answer_id":69773671,"question_id":54995386,"body_markdown":"when you enter a double or a float, enter it like this 80,9 not like this 80.9","title":"Exception in thread &quot;main&quot; java.util.InputMismatchException error","body":"<p>when you enter a double or a float, enter it like this 80,9 not like this 80.9</p>\n"},{"tags":[],"owner":{"account_id":27912425,"reputation":1,"user_id":21314325,"display_name":"Kret"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1677700563,"creation_date":1677700563,"answer_id":75608357,"question_id":54995386,"body_markdown":"when you enter a double or a float, enter with a comma (,) not a period (.) when the console asks you to enter a value.\r\n\r\n","title":"Exception in thread &quot;main&quot; java.util.InputMismatchException error","body":"<p>when you enter a double or a float, enter with a comma (,) not a period (.) when the console asks you to enter a value.</p>\n"}],"owner":{"account_id":15458538,"reputation":59,"user_id":11151793,"display_name":"gangLand"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32124,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":54995508,"answer_count":3,"score":5,"last_activity_date":1694184945,"creation_date":1551759979,"question_id":54995386,"body_markdown":"I believe I wrote all my code correctly but Im getting this error, can someone help me understand:\r\n\r\n    Exception in thread &quot;main&quot; java.util.InputMismatchException\r\n\tat java.base/java.util.Scanner.throwFor(Scanner.java:939)\r\n\tat java.base/java.util.Scanner.next(Scanner.java:1594)\r\n\tat java.base/java.util.Scanner.nextDouble(Scanner.java:2564)\r\n\tat gangPackage.newClass.main(newClass.java:15)\r\n\r\nHere is my code:\r\n\r\n    package gangPackage;\r\n    import java.util.*;\r\n    public class newClass {\r\n    \tpublic static void main (String[] args) {\r\n    \t    Scanner Scan = new Scanner(System.in);\r\n    \t    String name;\r\n    \t    int age;\r\n    \t    double gpa;\r\n    \t\r\n    \t    System.out.println(&quot;Enter your name: &quot;);\r\n    \t    name = Scan.nextLine();\r\n    \t    System.out.println(&quot;Enter students age: &quot;);\r\n    \t    age = Scan.nextInt();\r\n    \t    System.out.println(&quot;Enter your GPA: &quot;);\r\n    \t    gpa = Scan.nextDouble();\r\n    \r\n    \r\n    \t    System.out.printf(name + &quot; is &quot; + age + &quot; years old. And has a GPA of &quot; + gpa);\r\n    \t}\r\n    }\r\n\r\n","title":"Exception in thread &quot;main&quot; java.util.InputMismatchException error","body":"<p>I believe I wrote all my code correctly but Im getting this error, can someone help me understand:</p>\n\n<pre><code>Exception in thread \"main\" java.util.InputMismatchException\nat java.base/java.util.Scanner.throwFor(Scanner.java:939)\nat java.base/java.util.Scanner.next(Scanner.java:1594)\nat java.base/java.util.Scanner.nextDouble(Scanner.java:2564)\nat gangPackage.newClass.main(newClass.java:15)\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>package gangPackage;\nimport java.util.*;\npublic class newClass {\n    public static void main (String[] args) {\n        Scanner Scan = new Scanner(System.in);\n        String name;\n        int age;\n        double gpa;\n\n        System.out.println(\"Enter your name: \");\n        name = Scan.nextLine();\n        System.out.println(\"Enter students age: \");\n        age = Scan.nextInt();\n        System.out.println(\"Enter your GPA: \");\n        gpa = Scan.nextDouble();\n\n\n        System.out.printf(name + \" is \" + age + \" years old. And has a GPA of \" + gpa);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","dependency-injection"],"comments":[{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1694184592,"post_id":77067884,"comment_id":135862325,"body_markdown":"I assume that&#39;s supposed to be `@Autowired` not `@Autowire`?  The `extern` import is also missing a semicolon.","body":"I assume that&#39;s supposed to be <code>@Autowired</code> not <code>@Autowire</code>?  The <code>extern</code> import is also missing a semicolon."}],"owner":{"account_id":3675763,"reputation":1288,"user_id":3061903,"accept_rate":55,"display_name":"Vishal Maral"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694184909,"creation_date":1694184483,"question_id":77067884,"body_markdown":"I have a project with 3 maven modules as follows:\r\n```\r\nmain\r\n|\r\n|--extern\r\n|\t|\r\n|\t|-Adapter.java\r\n|\t\r\n|--business\r\n\t|-- CustomerService.java\r\n```   \r\n- *business* is included as a dependency in *extern*\r\n- *business* and *extern* both are included as a dependency in *main*\r\n- *main* module has the @SpringBootApplication class\r\n\r\nHere are the signatures of these classes:\r\n\r\n**MainApplication**\r\n```\r\npackage com.company.main;\r\n\r\n@ComponentScan(basePackages = {&quot;com.company.business&quot;, &quot;com.company.extern&quot;})\r\npublic class MainApplication {\r\n\r\n    public static void main(String[] args) {\r\n        log.info(&quot;Running the service...&quot;);\r\n        var applicationContext = SpringApplication.run(MainApplication.class, args);\r\n        var customerService = applicationContext.getBean(&quot;customerService&quot;); //able to access the bean here\r\n    }\r\n}\r\n```\r\n**Adapter**\r\n```\r\npackage com.company.extern;\r\n\r\n@Component\r\npublic class Adapter.java implements ApplicationContextAware {\r\n\r\n\t@Autowire\r\n\tCustomerService customerService; //this is null\r\n\t\r\n\tpublic void expose(){\r\n\t\tcustomerService.serve();\r\n\t}\r\n\t\r\n\t@Override\r\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\r\n        var service = context.getBean(&quot;customerService&quot;); //able to access bean here\r\n    }\r\n}\r\n```\r\n**CustomerService**\r\n```\r\npackage com.company.business;\r\n\r\n@Service\r\npublic class CustomerService {\r\n\r\n    public void serve() {\r\n        log.info(&quot;serve&quot;);\r\n    }\r\n}\r\n```\r\nI can&#39;t get Spring to wire `customerService` bean in `Adapter.java`. what am I missing here? How can I make it work?","title":"How to resolve transitive spring bean dependency","body":"<p>I have a project with 3 maven modules as follows:</p>\n<pre><code>main\n|\n|--extern\n|   |\n|   |-Adapter.java\n|   \n|--business\n    |-- CustomerService.java\n</code></pre>\n<ul>\n<li><em>business</em> is included as a dependency in <em>extern</em></li>\n<li><em>business</em> and <em>extern</em> both are included as a dependency in <em>main</em></li>\n<li><em>main</em> module has the @SpringBootApplication class</li>\n</ul>\n<p>Here are the signatures of these classes:</p>\n<p><strong>MainApplication</strong></p>\n<pre><code>package com.company.main;\n\n@ComponentScan(basePackages = {&quot;com.company.business&quot;, &quot;com.company.extern&quot;})\npublic class MainApplication {\n\n    public static void main(String[] args) {\n        log.info(&quot;Running the service...&quot;);\n        var applicationContext = SpringApplication.run(MainApplication.class, args);\n        var customerService = applicationContext.getBean(&quot;customerService&quot;); //able to access the bean here\n    }\n}\n</code></pre>\n<p><strong>Adapter</strong></p>\n<pre><code>package com.company.extern;\n\n@Component\npublic class Adapter.java implements ApplicationContextAware {\n\n    @Autowire\n    CustomerService customerService; //this is null\n    \n    public void expose(){\n        customerService.serve();\n    }\n    \n    @Override\n    public void setApplicationContext(ApplicationContext context) throws BeansException {\n        var service = context.getBean(&quot;customerService&quot;); //able to access bean here\n    }\n}\n</code></pre>\n<p><strong>CustomerService</strong></p>\n<pre><code>package com.company.business;\n\n@Service\npublic class CustomerService {\n\n    public void serve() {\n        log.info(&quot;serve&quot;);\n    }\n}\n</code></pre>\n<p>I can't get Spring to wire <code>customerService</code> bean in <code>Adapter.java</code>. what am I missing here? How can I make it work?</p>\n"},{"tags":["java","windows","swing","jfilechooser"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":0,"creation_date":1429696795,"post_id":29793656,"comment_id":47716286,"body_markdown":"possible duplicate of [How to set the dpi of java swing apps on Windows/Linux?](http://stackoverflow.com/questions/15659044/how-to-set-the-dpi-of-java-swing-apps-on-windows-linux)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/15659044/how-to-set-the-dpi-of-java-swing-apps-on-windows-linux\">How to set the dpi of java swing apps on Windows/Linux?</a>"},{"owner":{"account_id":908335,"reputation":5155,"user_id":942774,"accept_rate":100,"display_name":"Hendrik"},"score":0,"creation_date":1438265028,"post_id":29793656,"comment_id":51387969,"body_markdown":"AFAIK, it&#39;s not possible right now. Please submit a bug/RFE at http://bugreport.java.com","body":"AFAIK, it&#39;s not possible right now. Please submit a bug/RFE at <a href=\"http://bugreport.java.com\" rel=\"nofollow noreferrer\">bugreport.java.com</a>"}],"answers":[{"tags":[],"owner":{"account_id":3265203,"reputation":471,"user_id":2749837,"accept_rate":38,"display_name":"gantners"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1444080190,"creation_date":1444080190,"answer_id":32958121,"question_id":29793656,"body_markdown":"Just a quick idea while i came across this thread. You can try to deliver your own iconset:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    new JFileChooser().setFileView(new FileView() {\r\n\t\t\t@Override\r\n\t\t\tpublic Icon getIcon(File f) {\r\n\t\t\t\treturn fancy2kIconForExtension(StringUtils.substringAfterLast(&quot;.&quot;));\r\n\t\t\t}\r\n\t\t});\r\n\r\nbe careful to load your Icons from a Cache, as this method is called very often from inside `JFileChooser`, otherwise you end up reloading icon all the time.","title":"JFileChooser icons on 2K Displays","body":"<p>Just a quick idea while i came across this thread. You can try to deliver your own iconset:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>new JFileChooser().setFileView(new FileView() {\n        @Override\n        public Icon getIcon(File f) {\n            return fancy2kIconForExtension(StringUtils.substringAfterLast(\".\"));\n        }\n    });\n</code></pre>\n\n<p>be careful to load your Icons from a Cache, as this method is called very often from inside <code>JFileChooser</code>, otherwise you end up reloading icon all the time.</p>\n"},{"tags":[],"owner":{"account_id":20452579,"reputation":26,"user_id":15007011,"display_name":"Rjelinek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663797824,"creation_date":1663797824,"answer_id":73807386,"question_id":29793656,"body_markdown":"I very recently ran into same problem. the only work around is not using java build in ImageIcon class but to write one yourself,\r\nThis one took the provided image, scale it to fit current component size and paint it. I tried to make is as simple as possible and as close to original class as able, but its not perfect and need improvement, especially in component-icon alignment\r\n\r\n        import java.awt.Component;\r\n        import java.awt.Graphics;\r\n        import java.awt.Graphics2D;\r\n        import java.awt.RenderingHints;\r\n        import java.awt.geom.AffineTransform;\r\n        import javax.swing.AbstractButton;\r\n        import javax.swing.ImageIcon;\r\n        \r\n        /**\r\n         *\r\n         * @author Rastislav\r\n         */\r\n        public class ScaleToFitAndAntialiasIcon extends ImageIcon{\r\n            private ImageIcon icon;\r\n            \r\n            \r\n            \r\n        \r\n            public ScaleToFitAndAntialiasIcon(ImageIcon icon)\r\n            {\r\n                this.icon = icon;\r\n            }\r\n        \r\n            public int getIconWidth()\r\n            {\r\n                return icon.getIconWidth();\r\n            }\r\n        \r\n            public int getIconHeight()\r\n            {\r\n                return icon.getIconHeight();\r\n            }\r\n        \r\n            @Override\r\n            public void paintIcon(Component c, Graphics g, int x, int y)\r\n            {\r\n                Graphics2D g2d = (Graphics2D)g.create();\r\n                AffineTransform at = g2d.getTransform();\r\n                \r\n                double scaleToFit = ((double)c.getHeight() / (double)icon.getIconHeight());\r\n                \r\n                \r\n                if((int)icon.getIconHeight()*scaleToFit == c.getHeight()){\r\n                    scaleToFit = ((double)c.getHeight() / (double)icon.getIconHeight()) - 0.1;\r\n                }\r\n        \r\n                AffineTransform scaled = AffineTransform.getScaleInstance(scaleToFit, scaleToFit);\r\n                at.concatenate( scaled );\r\n                g2d.setTransform( at );\r\n                \r\n    //need improvement\r\n               /* int lineupMinus = (int)((double)icon.getIconWidth() *((double)c.getHeight() / (double)icon.getIconHeight()));\r\n                int lineup = (int)((double)icon.getIconWidth() * scaleToFit);\r\n                \r\n                int ff = (int)(lineupMinus - lineup);\r\n                System.out.println(ff);\r\n                */\r\n                \r\n                g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\r\n                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\r\n                g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\r\n    //improved code goes here\r\n                icon.paintIcon(c, g2d, x, 4);\r\n                \r\n                \r\n                \r\n                \r\n                if(c instanceof AbstractButton a){\r\n                    a.setIconTextGap((int)(-icon.getIconWidth()/2));\r\n                }\r\n                \r\n                \r\n                \r\n                g2d.dispose();\r\n            }\r\n        \r\n        \r\n        }","title":"JFileChooser icons on 2K Displays","body":"<p>I very recently ran into same problem. the only work around is not using java build in ImageIcon class but to write one yourself,\nThis one took the provided image, scale it to fit current component size and paint it. I tried to make is as simple as possible and as close to original class as able, but its not perfect and need improvement, especially in component-icon alignment</p>\n<pre><code>    import java.awt.Component;\n    import java.awt.Graphics;\n    import java.awt.Graphics2D;\n    import java.awt.RenderingHints;\n    import java.awt.geom.AffineTransform;\n    import javax.swing.AbstractButton;\n    import javax.swing.ImageIcon;\n    \n    /**\n     *\n     * @author Rastislav\n     */\n    public class ScaleToFitAndAntialiasIcon extends ImageIcon{\n        private ImageIcon icon;\n        \n        \n        \n    \n        public ScaleToFitAndAntialiasIcon(ImageIcon icon)\n        {\n            this.icon = icon;\n        }\n    \n        public int getIconWidth()\n        {\n            return icon.getIconWidth();\n        }\n    \n        public int getIconHeight()\n        {\n            return icon.getIconHeight();\n        }\n    \n        @Override\n        public void paintIcon(Component c, Graphics g, int x, int y)\n        {\n            Graphics2D g2d = (Graphics2D)g.create();\n            AffineTransform at = g2d.getTransform();\n            \n            double scaleToFit = ((double)c.getHeight() / (double)icon.getIconHeight());\n            \n            \n            if((int)icon.getIconHeight()*scaleToFit == c.getHeight()){\n                scaleToFit = ((double)c.getHeight() / (double)icon.getIconHeight()) - 0.1;\n            }\n    \n            AffineTransform scaled = AffineTransform.getScaleInstance(scaleToFit, scaleToFit);\n            at.concatenate( scaled );\n            g2d.setTransform( at );\n            \n//need improvement\n           /* int lineupMinus = (int)((double)icon.getIconWidth() *((double)c.getHeight() / (double)icon.getIconHeight()));\n            int lineup = (int)((double)icon.getIconWidth() * scaleToFit);\n            \n            int ff = (int)(lineupMinus - lineup);\n            System.out.println(ff);\n            */\n            \n            g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);\n            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n            g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n//improved code goes here\n            icon.paintIcon(c, g2d, x, 4);\n            \n            \n            \n            \n            if(c instanceof AbstractButton a){\n                a.setIconTextGap((int)(-icon.getIconWidth()/2));\n            }\n            \n            \n            \n            g2d.dispose();\n        }\n    \n    \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":278315,"reputation":11579,"user_id":572834,"display_name":"Alexey Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694184304,"creation_date":1694184304,"answer_id":77067860,"question_id":29793656,"body_markdown":"Java 8 does not support High DPI, its UI is scaled up by Windows to the correct size. Yet it means the UI is blurry.\r\n\r\nJava 11 and later support High DPI, the icons in `JFileChooser` will be scaled up by Java if the icon is not a [`MultiResolutionImage`][1] that provides different icons for different display scales in High DPI environment. In Java 17, most icons used by the file chooser are multi-resolution icons.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/MultiResolutionImage.html","title":"JFileChooser icons on 2K Displays","body":"<p>Java 8 does not support High DPI, its UI is scaled up by Windows to the correct size. Yet it means the UI is blurry.</p>\n<p>Java 11 and later support High DPI, the icons in <code>JFileChooser</code> will be scaled up by Java if the icon is not a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/MultiResolutionImage.html\" rel=\"nofollow noreferrer\"><code>MultiResolutionImage</code></a> that provides different icons for different display scales in High DPI environment. In Java 17, most icons used by the file chooser are multi-resolution icons.</p>\n"}],"owner":{"display_name":"user502187"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":498,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1694184304,"creation_date":1429695950,"question_id":29793656,"body_markdown":"Any idea how to make the Java Swing file chooser\r\nlook better on 2K displays where the windows\r\nfont scaling is &gt; 125%?\r\n\r\nI am using ordinary code such as:\r\n\r\n    JFileChooser fc = new JFileChooser();\r\n    if (settings.currentdir != null)\r\n       fc.setCurrentDirectory(new File(settings.currentdir));\r\n    int returnVal = fc.showOpenDialog((Window) holder);\r\n    if (returnVal == JFileChooser.APPROVE_OPTION) {\r\n\r\n\r\nBut the file chooser is only displaying tiny\r\nicons for the listed files and directories. I am using\r\nJDK 8. What is going wrong?\r\n\r\nP.S.: Scope of the question is only Windows, not \r\nUnixes. On Windows, the two default L&amp;F, they \r\nscale the font. But they don&#39;t scale icons. The \r\napplication has to do that, since it might use \r\na different bitmap resources for higher scales. \r\nIt seems that JFileChooser is not coded this way. \r\n\r\nBut it might be that the JFileChooser can be\r\ninstructed to do so. I don&#39;t see that the\r\nother question addresses icon size and the\r\nJFileChooser on Windows: https://stackoverflow.com/questions/15659044/how-to-set-the-dpi-of-java-swing-apps-on-windows-linux The\r\nother question deals with font size, which is\r\nnot an issue for the JFileChooser on Windows with\r\none of the two Windows L&amp;F.","title":"JFileChooser icons on 2K Displays","body":"<p>Any idea how to make the Java Swing file chooser\nlook better on 2K displays where the windows\nfont scaling is > 125%?</p>\n\n<p>I am using ordinary code such as:</p>\n\n<pre><code>JFileChooser fc = new JFileChooser();\nif (settings.currentdir != null)\n   fc.setCurrentDirectory(new File(settings.currentdir));\nint returnVal = fc.showOpenDialog((Window) holder);\nif (returnVal == JFileChooser.APPROVE_OPTION) {\n</code></pre>\n\n<p>But the file chooser is only displaying tiny\nicons for the listed files and directories. I am using\nJDK 8. What is going wrong?</p>\n\n<p>P.S.: Scope of the question is only Windows, not \nUnixes. On Windows, the two default L&amp;F, they \nscale the font. But they don't scale icons. The \napplication has to do that, since it might use \na different bitmap resources for higher scales. \nIt seems that JFileChooser is not coded this way. </p>\n\n<p>But it might be that the JFileChooser can be\ninstructed to do so. I don't see that the\nother question addresses icon size and the\nJFileChooser on Windows: <a href=\"https://stackoverflow.com/questions/15659044/how-to-set-the-dpi-of-java-swing-apps-on-windows-linux\">How to set the DPI of Java Swing apps on Windows/Linux?</a> The\nother question deals with font size, which is\nnot an issue for the JFileChooser on Windows with\none of the two Windows L&amp;F.</p>\n"},{"tags":["java","image","android-studio","imageview"],"answers":[{"tags":[],"owner":{"account_id":17620595,"reputation":55,"user_id":12786651,"display_name":"Rafael Diaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694181669,"creation_date":1694181669,"answer_id":77067571,"question_id":77067514,"body_markdown":"Try changing android:scaleType=&quot;centerCrop&quot; to android:scaleType=&quot;fitCenter&quot;","title":"image is cropped inside the image view","body":"<p>Try changing android:scaleType=&quot;centerCrop&quot; to android:scaleType=&quot;fitCenter&quot;</p>\n"},{"tags":[],"owner":{"account_id":2714969,"reputation":5858,"user_id":2342558,"accept_rate":67,"display_name":"user2342558"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694184272,"creation_date":1694184272,"answer_id":77067851,"question_id":77067514,"body_markdown":"According to your screenshot, ImageView has rounded corners:\r\n[![enter image description here][1]][1]\r\n\r\nSo I assume there is another code affecting that view which causes cropping and rounded corners.\r\n\r\n  [1]: https://i.stack.imgur.com/4Yy6l.png","title":"image is cropped inside the image view","body":"<p>According to your screenshot, ImageView has rounded corners:\n<a href=\"https://i.stack.imgur.com/4Yy6l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4Yy6l.png\" alt=\"enter image description here\" /></a></p>\n<p>So I assume there is another code affecting that view which causes cropping and rounded corners.</p>\n"}],"owner":{"account_id":29257311,"reputation":21,"user_id":22415222,"display_name":"Arianna Garaglia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694184272,"creation_date":1694181208,"question_id":77067514,"body_markdown":"I&#39;m trying to load an image into an image view: \r\n[![enter image description here](https://i.stack.imgur.com/nDTu7.jpg)](https://i.stack.imgur.com/nDTu7.jpg)\r\n\r\nbut the image is cropped inside the image view:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/6S9kD.jpg)](https://i.stack.imgur.com/6S9kD.jpg)\r\n```\r\n &lt;ImageView\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_marginTop=&quot;30dp&quot;\r\n    android:layout_marginBottom=&quot;10dp&quot;\r\n    android:gravity=&quot;center&quot;\r\n    android:scaleType=&quot;centerCrop&quot;\r\n    android:src=&quot;@mipmap/icona_animal_app&quot; /&gt;\r\n```\r\n\r\n\r\nwhy does this thing happen? how can i solve?","title":"image is cropped inside the image view","body":"<p>I'm trying to load an image into an image view:\n<a href=\"https://i.stack.imgur.com/nDTu7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nDTu7.jpg\" alt=\"enter image description here\" /></a></p>\n<p>but the image is cropped inside the image view:</p>\n<p><a href=\"https://i.stack.imgur.com/6S9kD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6S9kD.jpg\" alt=\"enter image description here\" /></a></p>\n<pre><code> &lt;ImageView\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_marginTop=&quot;30dp&quot;\n    android:layout_marginBottom=&quot;10dp&quot;\n    android:gravity=&quot;center&quot;\n    android:scaleType=&quot;centerCrop&quot;\n    android:src=&quot;@mipmap/icona_animal_app&quot; /&gt;\n</code></pre>\n<p>why does this thing happen? how can i solve?</p>\n"},{"tags":["java","spring","spring-batch"],"owner":{"account_id":29396098,"reputation":1,"user_id":22523414,"display_name":"sman_steel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694184255,"creation_date":1694184255,"question_id":77067848,"body_markdown":"I get this trace when i run the code below : \r\n```\r\n2023-09-08T16:32:38.217+02:00 ERROR 26472 --- [   scheduling-1] o.s.batch.core.step.AbstractStep         : Encountered an error executing step step in job job\r\n\r\njava.lang.IllegalStateException: Existing transaction detected in JobRepository. Please fix this and try again (e.g. remove @Transactional annotations from client).\r\n\tat org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.lambda$getObject$0(AbstractJobRepositoryFactoryBean.java:201) ~[spring-batch-core-5.0.3.jar:5.0.3]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244) ~[spring-aop-6.0.11.jar:6.0.11]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy73.createJobExecution(Unknown Source) ~[na:na]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:145) ~[spring-batch-core-5.0.3.jar:5.0.3]\r\n\tat org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:59) ~[spring-batch-core-5.0.3.jar:5.0.3]\r\n\tat com.test.batch.jobConfig$1.execute(jobConfig.java:62) ~[classes/:na]\r\n```\r\n\r\n\r\n```\r\n\r\n    @Autowired\r\n    PlatformTransactionManager mgr;\r\n    @Autowired\r\n    JobRepository jr;\r\n    @Autowired\r\n    ApplicationContext applicationContext;\r\n    @Qualifier(&quot;simpleJobLauncher&quot;)\r\n    @Autowired\r\n    JobLauncher simpleJobLauncher;\r\n@Bean\r\n    public Job job() throws JobInstanceAlreadyCompleteException, JobExecutionAlreadyRunningException, JobParametersInvalidException, JobRestartException {\r\n        return new JobBuilder(&quot;job&quot;, jr)\r\n                .start(new StepBuilder(&quot;step&quot;, jr).tasklet(new Tasklet() {\r\n                    @Override\r\n                    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception {\r\n                        System.out.println(&quot;helloJob&quot;);\r\n                        Map&lt;String, Object&gt; beans = applicationContext.getBeansWithAnnotation(Annotation.class);\r\n                        for (Object bean: beans.values()\r\n                        ) {\r\n                            Job jobbean = (Job) bean;\r\n                            JobParameters jp = new JobParametersBuilder()\r\n                                    .addString(&quot;time&quot;, new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.S&quot;).format(Calendar.getInstance().getTime()))\r\n\r\n                                    .toJobParameters();\r\n                            simpleJobLauncher.run(jobbean, jp);\r\n                        }\r\n                        return null;\r\n                    }\r\n                }, mgr)\r\n                        .build())\r\n                .build();\r\n\r\n    }\r\n```\r\n\r\n```\r\n    @Bean\r\n    public TaskExecutor taskExecutor(){\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(2);\r\n        executor.setMaxPoolSize(2);\r\n        executor.setQueueCapacity(500);\r\n        executor.setThreadNamePrefix(&quot;GithubLookup-&quot;);\r\n        executor.initialize();\r\n        return executor;\r\n    }\r\n\r\n```\r\n```\r\n\r\n    @Bean\r\n    public JobLauncher simpleJobLauncher(JobRepository jr , @Qualifier(&quot;taskExecutor&quot;) TaskExecutor taskExecutor) throws Exception {\r\n        TaskExecutorJobLauncher jobLauncher = new TaskExecutorJobLauncher();\r\n        jobLauncher.setJobRepository(jr);\r\n        jobLauncher.setTaskExecutor(taskExecutor);\r\n        jobLauncher.afterPropertiesSet();\r\n        return jobLauncher;\r\n    }\r\n```\r\n\r\n\r\n\r\nI have tried to lauch it with a separate JobLauncher, with a new TaskExecutor, and so on, maybe i missed something. And i don&#39;t use @Transactional at all.\r\n\r\nMaybe i don&#39;t have the right use of the jobs, if this is the case, please enlighten me\r\n\r\n\r\nVersions tried : \r\nJava 17 &amp; 20\r\nSpring : 3.1.3\r\nIn any case thank you for your time ","title":"Spring Batch : Existing transaction detected in JobRepository","body":"<p>I get this trace when i run the code below :</p>\n<pre><code>2023-09-08T16:32:38.217+02:00 ERROR 26472 --- [   scheduling-1] o.s.batch.core.step.AbstractStep         : Encountered an error executing step step in job job\n\njava.lang.IllegalStateException: Existing transaction detected in JobRepository. Please fix this and try again (e.g. remove @Transactional annotations from client).\n    at org.springframework.batch.core.repository.support.AbstractJobRepositoryFactoryBean.lambda$getObject$0(AbstractJobRepositoryFactoryBean.java:201) ~[spring-batch-core-5.0.3.jar:5.0.3]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.11.jar:6.0.11]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244) ~[spring-aop-6.0.11.jar:6.0.11]\n    at jdk.proxy2/jdk.proxy2.$Proxy73.createJobExecution(Unknown Source) ~[na:na]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:145) ~[spring-batch-core-5.0.3.jar:5.0.3]\n    at org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:59) ~[spring-batch-core-5.0.3.jar:5.0.3]\n    at com.test.batch.jobConfig$1.execute(jobConfig.java:62) ~[classes/:na]\n</code></pre>\n<pre><code>\n    @Autowired\n    PlatformTransactionManager mgr;\n    @Autowired\n    JobRepository jr;\n    @Autowired\n    ApplicationContext applicationContext;\n    @Qualifier(&quot;simpleJobLauncher&quot;)\n    @Autowired\n    JobLauncher simpleJobLauncher;\n@Bean\n    public Job job() throws JobInstanceAlreadyCompleteException, JobExecutionAlreadyRunningException, JobParametersInvalidException, JobRestartException {\n        return new JobBuilder(&quot;job&quot;, jr)\n                .start(new StepBuilder(&quot;step&quot;, jr).tasklet(new Tasklet() {\n                    @Override\n                    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext) throws Exception {\n                        System.out.println(&quot;helloJob&quot;);\n                        Map&lt;String, Object&gt; beans = applicationContext.getBeansWithAnnotation(Annotation.class);\n                        for (Object bean: beans.values()\n                        ) {\n                            Job jobbean = (Job) bean;\n                            JobParameters jp = new JobParametersBuilder()\n                                    .addString(&quot;time&quot;, new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.S&quot;).format(Calendar.getInstance().getTime()))\n\n                                    .toJobParameters();\n                            simpleJobLauncher.run(jobbean, jp);\n                        }\n                        return null;\n                    }\n                }, mgr)\n                        .build())\n                .build();\n\n    }\n</code></pre>\n<pre><code>    @Bean\n    public TaskExecutor taskExecutor(){\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(2);\n        executor.setMaxPoolSize(2);\n        executor.setQueueCapacity(500);\n        executor.setThreadNamePrefix(&quot;GithubLookup-&quot;);\n        executor.initialize();\n        return executor;\n    }\n\n</code></pre>\n<pre><code>\n    @Bean\n    public JobLauncher simpleJobLauncher(JobRepository jr , @Qualifier(&quot;taskExecutor&quot;) TaskExecutor taskExecutor) throws Exception {\n        TaskExecutorJobLauncher jobLauncher = new TaskExecutorJobLauncher();\n        jobLauncher.setJobRepository(jr);\n        jobLauncher.setTaskExecutor(taskExecutor);\n        jobLauncher.afterPropertiesSet();\n        return jobLauncher;\n    }\n</code></pre>\n<p>I have tried to lauch it with a separate JobLauncher, with a new TaskExecutor, and so on, maybe i missed something. And i don't use @Transactional at all.</p>\n<p>Maybe i don't have the right use of the jobs, if this is the case, please enlighten me</p>\n<p>Versions tried :\nJava 17 &amp; 20\nSpring : 3.1.3\nIn any case thank you for your time</p>\n"},{"tags":["java","spring-boot","docker-compose","docker-registry"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694184251,"creation_date":1694184251,"answer_id":77067847,"question_id":77067771,"body_markdown":"Have you tried to add `defaultZone`  to `eureka.client` config yet ? I mean something like this:\r\n\r\n    eureka:\r\n      client:\r\n        register-with-eureka: false\r\n        fetch-registry: false\r\n        service-url:\r\n          defaultZone: http://localhost:8761/eureka\r\n      instance:\r\n        hostname: localhost\r\n\r\n","title":"I am trying to register an instance of a service to a discovery server and getting this error below","body":"<p>Have you tried to add <code>defaultZone</code>  to <code>eureka.client</code> config yet ? I mean something like this:</p>\n<pre><code>eureka:\n  client:\n    register-with-eureka: false\n    fetch-registry: false\n    service-url:\n      defaultZone: http://localhost:8761/eureka\n  instance:\n    hostname: localhost\n</code></pre>\n"}],"owner":{"account_id":19411240,"reputation":1,"user_id":14195624,"display_name":"Badmus Sodiq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694184251,"creation_date":1694183592,"question_id":77067771,"body_markdown":"I tried to register an instance of my microservice with eureka discovery server running on docker. The application is running fine but when i try to register an instance, It will register it but will bring this runtime excetpion.... This is my error log... I am confused as it is trying to connect to localhost:8761 which i did not configure in the configuration file.\r\n\r\n\r\n```\r\n2023-09-08 14:31:01 2023-09-08T13:31:01.536Z  INFO 1 --- [nio-9001-exec-2] c.n.e.registry.AbstractInstanceRegistry  : Registered instance API-GATEWAY/479d5ae21d41:api-gateway:9000 with status UP (replication=false)\r\n2023-09-08 14:31:03 2023-09-08T13:31:03.618Z ERROR 1 --- [get_localhost-4] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\r\n2023-09-08 14:31:03 \r\n2023-09-08 14:31:03 ***jakarta.ws.rs.ProcessingException: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused***\r\n2023-09-08 14:31:03     at org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:439) ~[jersey-client-3.1.3.jar!/:na]\r\n2023-09-08 14:31:03     at org.glassfish.jersey.client.JerseyInvocation$Builder.post(JerseyInvocation.java:345) ~[jersey-client-3.1.3.jar!/:na]\r\n2023-09-08 14:31:03     at com.netflix.eureka.transport.Jersey3ReplicationClient.submitBatchUpdates(Jersey3ReplicationClient.java:116) ~[eureka-core-jersey3-2.0.1.jar!/:2.0.1]\r\n2023-09-08 14:31:03     at com.netflix.eureka.cluster.ReplicationTaskProcessor.process(ReplicationTaskProcessor.java:80) ~[eureka-core-2.0.1.jar!/:2.0.1]\r\n2023-09-08 14:31:03     at com.netflix.eureka.util.batcher.TaskExecutors$BatchWorkerRunnable.run(TaskExecutors.java:190) ~[eureka-core-2.0.1.jar!/:2.0.1]\r\n2023-09-08 14:31:03     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n2023-09-08 14:31:03 Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused\r\n2023-09-08 14:31:03     at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n2023-09-08 14:31:13 Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused\r\n2023-09-08 14:31:13     at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72) ~[httpclient-4.5.3.jar!/:4.5.3]\r\n2023-09-08 14:31:23     at org.glassfish.jersey.apache.connector.ApacheConnector.apply(ApacheConnector.java:483) ~[jersey-apache-connector-3.1.3.jar!/:na\r\n2023-09-08 14:31:23 \r\n2023-09-08 14:31:26 2023-09-08T13:31:26.682Z  INFO 1 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 98ms\r\n2023-09-08 14:31:33 2023-09-08T13:31:33.757Z ERROR 1 --- [et_localhost-16] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\r\n```\r\n```\r\n# Below is the application.yml file for the discovery server\r\nserver:\r\n  port: 9001\r\n\r\n\r\nspring:\r\n  application:\r\n    name: discovery-server\r\n\r\n\r\neureka:\r\n  client:\r\n    register-with-eureka: false\r\n    fetch-registry: false\r\n  instance:\r\n    hostname: localhost\r\n\r\n#spring:\r\n#  zipkin:\r\n#    base-url: http://localhost:9411\r\n#  sleuth:\r\n#    sampler:\r\n#      probability: 1.0\r\n\r\nmanagement:\r\n  tracing:\r\n    sampling:\r\n      probability: 1.0\r\n# Below is the docker compose configuration for discovery server\r\nversion: &#39;3.8&#39;\r\n\r\nservices:\r\n  discovery-service:\r\n    image:  discoveryservice\r\n    container_name: discovery-service\r\n    hostname: discovery-service\r\n    environment:\r\n      EUREKA_INSTANCE_HOSTNAME: discovery-service\r\n    ports:\r\n      - &quot;9001:9001&quot;\r\n    networks:\r\n      - grammercetamol\r\nnetworks:\r\n  grammercetamol:\r\n    name: grammercetamol\r\n    external: true\r\n\r\n# Below is also the application.yml file for api-gateway, the instance i am trying to register to the server\r\nserver:\r\n  port: 9000\r\n\r\neureka:\r\n  client:\r\n    serviceUrl:\r\n      defaultZone: http://localhost:9001/eureka\r\n  instance:\r\n    hostname: localhost\r\n\r\n\r\nspring:\r\n  application:\r\n    name: api-gateway\r\n    http:\r\n      multipart:\r\n        max-file-size: 50MB\r\n        max-request-size: 40\r\n  cloud:\r\n    discovery:\r\n      enabled: true\r\n    gateway:\r\n      routes:\r\n#        Identity service route\r\n        - id: identity-service\r\n          predicates:\r\n            - Path=/api/auth/**\r\n          uri: lb://identity-service\r\n\r\n#        Course service route\r\n        - id: course-service\r\n          predicates:\r\n            - Path=/api/courses/**\r\n          uri: lb://course-service\r\n\r\n#          Video service route\r\n        - id: video-service\r\n          predicates:\r\n            - Path=/api/videos/**\r\n          uri: lb://video-service\r\n\r\n#          cloudinary service route\r\n        - id: cloudinary-service\r\n          predicates:\r\n            - Path=/api/cloudinary/**\r\n          uri: lb://cloudinary-service\r\nlogging:\r\n  level:\r\n    root: INFO\r\n    org:\r\n      springframework:\r\n        cloud:\r\n          gateway: TRACE\r\n          gateway.route.RouteDefinitionLoader: INFO\r\n# The docker compose file for the instance API-GATEWAY\r\nversion: &#39;3.8&#39;\r\n\r\nservices:\r\n  api-gateway:\r\n    image: apigateway\r\n    container_name: api-gateway\r\n    ports:\r\n      - &quot;9000:9000&quot;\r\n    environment:\r\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: http://discovery-service:9001/eureka\r\n      EUREKA_INSTANCE_HOSTNAME: api-gateway\r\n#      - eureka_client_serviceUrl_defaultZone=http://discovery-server:9001/eureka\r\n    networks:\r\n      - grammercetamol\r\nnetworks:\r\n  grammercetamol:\r\n    name: grammercetamol\r\n    external: true\r\n```\r\n","title":"I am trying to register an instance of a service to a discovery server and getting this error below","body":"<p>I tried to register an instance of my microservice with eureka discovery server running on docker. The application is running fine but when i try to register an instance, It will register it but will bring this runtime excetpion.... This is my error log... I am confused as it is trying to connect to localhost:8761 which i did not configure in the configuration file.</p>\n<pre><code>2023-09-08 14:31:01 2023-09-08T13:31:01.536Z  INFO 1 --- [nio-9001-exec-2] c.n.e.registry.AbstractInstanceRegistry  : Registered instance API-GATEWAY/479d5ae21d41:api-gateway:9000 with status UP (replication=false)\n2023-09-08 14:31:03 2023-09-08T13:31:03.618Z ERROR 1 --- [get_localhost-4] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\n2023-09-08 14:31:03 \n2023-09-08 14:31:03 ***jakarta.ws.rs.ProcessingException: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused***\n2023-09-08 14:31:03     at org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:439) ~[jersey-client-3.1.3.jar!/:na]\n2023-09-08 14:31:03     at org.glassfish.jersey.client.JerseyInvocation$Builder.post(JerseyInvocation.java:345) ~[jersey-client-3.1.3.jar!/:na]\n2023-09-08 14:31:03     at com.netflix.eureka.transport.Jersey3ReplicationClient.submitBatchUpdates(Jersey3ReplicationClient.java:116) ~[eureka-core-jersey3-2.0.1.jar!/:2.0.1]\n2023-09-08 14:31:03     at com.netflix.eureka.cluster.ReplicationTaskProcessor.process(ReplicationTaskProcessor.java:80) ~[eureka-core-2.0.1.jar!/:2.0.1]\n2023-09-08 14:31:03     at com.netflix.eureka.util.batcher.TaskExecutors$BatchWorkerRunnable.run(TaskExecutors.java:190) ~[eureka-core-2.0.1.jar!/:2.0.1]\n2023-09-08 14:31:03     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n2023-09-08 14:31:03 Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused\n2023-09-08 14:31:03     at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:03     at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n2023-09-08 14:31:13 Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused\n2023-09-08 14:31:13     at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:159) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:13     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:381) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72) ~[httpclient-4.5.3.jar!/:4.5.3]\n2023-09-08 14:31:23     at org.glassfish.jersey.apache.connector.ApacheConnector.apply(ApacheConnector.java:483) ~[jersey-apache-connector-3.1.3.jar!/:na\n2023-09-08 14:31:23 \n2023-09-08 14:31:26 2023-09-08T13:31:26.682Z  INFO 1 --- [a-EvictionTimer] c.n.e.registry.AbstractInstanceRegistry  : Running the evict task with compensationTime 98ms\n2023-09-08 14:31:33 2023-09-08T13:31:33.757Z ERROR 1 --- [et_localhost-16] c.n.e.cluster.ReplicationTaskProcessor   : Network level connection to peer localhost; retrying after delay\n</code></pre>\n<pre><code># Below is the application.yml file for the discovery server\nserver:\n  port: 9001\n\n\nspring:\n  application:\n    name: discovery-server\n\n\neureka:\n  client:\n    register-with-eureka: false\n    fetch-registry: false\n  instance:\n    hostname: localhost\n\n#spring:\n#  zipkin:\n#    base-url: http://localhost:9411\n#  sleuth:\n#    sampler:\n#      probability: 1.0\n\nmanagement:\n  tracing:\n    sampling:\n      probability: 1.0\n# Below is the docker compose configuration for discovery server\nversion: '3.8'\n\nservices:\n  discovery-service:\n    image:  discoveryservice\n    container_name: discovery-service\n    hostname: discovery-service\n    environment:\n      EUREKA_INSTANCE_HOSTNAME: discovery-service\n    ports:\n      - &quot;9001:9001&quot;\n    networks:\n      - grammercetamol\nnetworks:\n  grammercetamol:\n    name: grammercetamol\n    external: true\n\n# Below is also the application.yml file for api-gateway, the instance i am trying to register to the server\nserver:\n  port: 9000\n\neureka:\n  client:\n    serviceUrl:\n      defaultZone: http://localhost:9001/eureka\n  instance:\n    hostname: localhost\n\n\nspring:\n  application:\n    name: api-gateway\n    http:\n      multipart:\n        max-file-size: 50MB\n        max-request-size: 40\n  cloud:\n    discovery:\n      enabled: true\n    gateway:\n      routes:\n#        Identity service route\n        - id: identity-service\n          predicates:\n            - Path=/api/auth/**\n          uri: lb://identity-service\n\n#        Course service route\n        - id: course-service\n          predicates:\n            - Path=/api/courses/**\n          uri: lb://course-service\n\n#          Video service route\n        - id: video-service\n          predicates:\n            - Path=/api/videos/**\n          uri: lb://video-service\n\n#          cloudinary service route\n        - id: cloudinary-service\n          predicates:\n            - Path=/api/cloudinary/**\n          uri: lb://cloudinary-service\nlogging:\n  level:\n    root: INFO\n    org:\n      springframework:\n        cloud:\n          gateway: TRACE\n          gateway.route.RouteDefinitionLoader: INFO\n# The docker compose file for the instance API-GATEWAY\nversion: '3.8'\n\nservices:\n  api-gateway:\n    image: apigateway\n    container_name: api-gateway\n    ports:\n      - &quot;9000:9000&quot;\n    environment:\n      EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: http://discovery-service:9001/eureka\n      EUREKA_INSTANCE_HOSTNAME: api-gateway\n#      - eureka_client_serviceUrl_defaultZone=http://discovery-server:9001/eureka\n    networks:\n      - grammercetamol\nnetworks:\n  grammercetamol:\n    name: grammercetamol\n    external: true\n</code></pre>\n"},{"tags":["java","spring","spring-3","content-disposition"],"answers":[{"tags":[],"owner":{"account_id":2572266,"reputation":1270,"user_id":2230661,"display_name":"Hassan Jamil"},"down_vote_count":3,"up_vote_count":60,"is_accepted":true,"score":57,"last_activity_date":1394176521,"creation_date":1394176521,"answer_id":22243867,"question_id":16601428,"body_markdown":"\t@RequestMapping(value = &quot;/action/{abcd}/{efgh}&quot;, method = RequestMethod.GET)\r\n\t@PreAuthorize(&quot;@authorizationService.authorizeMethod(#id)&quot;)\r\n\tpublic HttpEntity&lt;byte[]&gt; doAction(@PathVariable ObjectType obj, @PathVariable Date date, HttpServletResponse response) throws IOException {\r\n\t\tZipFileType zipFile = service.getFile(obj1.getId(), date);\r\n\r\n\t\tHttpHeaders headers = new HttpHeaders();\r\n\t\theaders.setContentType(MediaType.APPLICATION_OCTET_STREAM);\r\n\t\tresponse.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + zipFile.getFileName());\r\n\r\n\t\treturn new HttpEntity&lt;byte[]&gt;(zipFile.getByteArray(), headers);\r\n\t}","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<pre><code>@RequestMapping(value = \"/action/{abcd}/{efgh}\", method = RequestMethod.GET)\n@PreAuthorize(\"@authorizationService.authorizeMethod(#id)\")\npublic HttpEntity&lt;byte[]&gt; doAction(@PathVariable ObjectType obj, @PathVariable Date date, HttpServletResponse response) throws IOException {\n    ZipFileType zipFile = service.getFile(obj1.getId(), date);\n\n    HttpHeaders headers = new HttpHeaders();\n    headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);\n    response.setHeader(\"Content-Disposition\", \"attachment; filename=\" + zipFile.getFileName());\n\n    return new HttpEntity&lt;byte[]&gt;(zipFile.getByteArray(), headers);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4728579,"reputation":877,"user_id":3824815,"display_name":"Kumar"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1504266521,"creation_date":1454099096,"answer_id":35093411,"question_id":16601428,"body_markdown":"  \r\n\r\n \r\n\r\n     @RequestMapping(value = &quot;/files/{file_name}&quot;, method = RequestMethod.GET)\r\n        @ResponseBody\r\n        public FileSystemResource getFile(@PathVariable(&quot;file_name&quot;) String fileName,HttpServletResponse response) {\r\n            response.setContentType(&quot;application/pdf&quot;);      \r\n            response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=somefile.pdf&quot;); \r\n            return new FileSystemResource(new File(&quot;file full path&quot;)); \r\n        }","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<pre><code> @RequestMapping(value = \"/files/{file_name}\", method = RequestMethod.GET)\n    @ResponseBody\n    public FileSystemResource getFile(@PathVariable(\"file_name\") String fileName,HttpServletResponse response) {\n        response.setContentType(\"application/pdf\");      \n        response.setHeader(\"Content-Disposition\", \"attachment; filename=somefile.pdf\"); \n        return new FileSystemResource(new File(\"file full path\")); \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2369743,"reputation":7275,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1694183699,"creation_date":1508070159,"answer_id":46754991,"question_id":16601428,"body_markdown":"Here is an alternative approach for Spring 4. Note that this example clearly does not use good practices regarding filesystem access, this is just to demonstrate how some properties can be set declaratively.\r\n\r\n    @RequestMapping(value = &quot;/{resourceIdentifier}&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\r\n    // @ResponseBody // Needed for @Controller but not for @RestController.\r\n    public ResponseEntity&lt;InputStreamResource&gt; download(@PathVariable(name = &quot;resourceIdentifier&quot;) final String filename) throws Exception\r\n    {\r\n        final String resourceName = filename + &quot;.dat&quot;;\r\n        final File iFile = new File(&quot;/some/folder&quot;, resourceName);\r\n        final long resourceLength = iFile.length();\r\n        final long lastModified = iFile.lastModified();\r\n        final InputStream resource = new FileInputStream(iFile);\r\n\r\n        return ResponseEntity.ok()\r\n                .header(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + resourceName)\r\n                .contentLength(resourceLength)\r\n                .lastModified(lastModified)\r\n                .contentType(MediaType.APPLICATION_OCTET_STREAM_VALUE) // For Spring 5: APPLICATION_OCTET_STREAM\r\n                .body(resource);\r\n    }","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<p>Here is an alternative approach for Spring 4. Note that this example clearly does not use good practices regarding filesystem access, this is just to demonstrate how some properties can be set declaratively.</p>\n<pre><code>@RequestMapping(value = &quot;/{resourceIdentifier}&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\n// @ResponseBody // Needed for @Controller but not for @RestController.\npublic ResponseEntity&lt;InputStreamResource&gt; download(@PathVariable(name = &quot;resourceIdentifier&quot;) final String filename) throws Exception\n{\n    final String resourceName = filename + &quot;.dat&quot;;\n    final File iFile = new File(&quot;/some/folder&quot;, resourceName);\n    final long resourceLength = iFile.length();\n    final long lastModified = iFile.lastModified();\n    final InputStream resource = new FileInputStream(iFile);\n\n    return ResponseEntity.ok()\n            .header(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + resourceName)\n            .contentLength(resourceLength)\n            .lastModified(lastModified)\n            .contentType(MediaType.APPLICATION_OCTET_STREAM_VALUE) // For Spring 5: APPLICATION_OCTET_STREAM\n            .body(resource);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3761296,"reputation":131,"user_id":3126202,"display_name":"Fahad Alkamli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1522536941,"creation_date":1522536941,"answer_id":49593207,"question_id":16601428,"body_markdown":"Made few changes to both given answers and I ended up with the best of both in my project where I needed to extract an image from the database as a blob and then serve it to the clients :\r\n\r\n    @GetMapping(&quot;/images/{imageId:.+}&quot;)\r\n    @ResponseBody\r\n    public ResponseEntity&lt;FileSystemResource&gt;  serveFile(@PathVariable @Valid String imageId,HttpServletResponse response)\r\n    {\t\t\r\n    \tImageEntity singleImageInfo=db.storage.StorageService.getImage(imageId);\r\n    \tif(singleImageInfo==null)\r\n    \t{\r\n    \t\treturn ResponseEntity.status(HttpStatus.NOT_FOUND).body(null);\r\n    \t}\r\n    \tBlob image=singleImageInfo.getImage();\r\n        try {        \t\r\n        \tString filename= UsersExtra.GenerateSession()+&quot;xxyy&quot;+singleImageInfo.getImage1Ext().trim();\r\n        \t\r\n        byte [] array = image.getBytes( 1, ( int ) image.length() );\r\n        File file = File.createTempFile(UsersExtra.GenerateSession()+&quot;xxyy&quot;, singleImageInfo.getImage1Ext().trim(), new File(&quot;.&quot;));\r\n        FileOutputStream out = new FileOutputStream( file );\r\n        out.write( array );\r\n        out.close();\r\n    \tFileSystemResource testing=new FileSystemResource(file);\r\n    \t\r\n    \tString mimeType = &quot;image/&quot;+singleImageInfo.getImage1Ext().trim().toLowerCase().replace(&quot;.&quot;, &quot;&quot;);\r\n\t\t  response.setContentType(mimeType);    \r\n\r\n\t        String headerKey = &quot;Content-Disposition&quot;;\r\n           String headerValue = String.format(&quot;attachment; filename=\\&quot;%s\\&quot;&quot;, filename);\r\n           response.setHeader(headerKey, headerValue);\r\n          // return new FileSystemResource(file); \r\n           return ResponseEntity.status(HttpStatus.OK).body( new FileSystemResource(file));\r\n        }catch(Exception e)\r\n        {\r\n        \tSystem.out.println(e.getMessage());\r\n        }\r\n\t\treturn null;\r\n    }\r\n\r\nUsing a ResponseEntity in Kumar&#39;s code will help you respond with  the correct Response code.\r\nNote: converting from a blob to a file is quoted from this link: \r\nhttps://stackoverflow.com/questions/1076972/snippet-to-create-a-file-from-the-contents-of-a-blob-in-java\r\n","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<p>Made few changes to both given answers and I ended up with the best of both in my project where I needed to extract an image from the database as a blob and then serve it to the clients :</p>\n\n<pre><code>@GetMapping(\"/images/{imageId:.+}\")\n@ResponseBody\npublic ResponseEntity&lt;FileSystemResource&gt;  serveFile(@PathVariable @Valid String imageId,HttpServletResponse response)\n{       \n    ImageEntity singleImageInfo=db.storage.StorageService.getImage(imageId);\n    if(singleImageInfo==null)\n    {\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(null);\n    }\n    Blob image=singleImageInfo.getImage();\n    try {           \n        String filename= UsersExtra.GenerateSession()+\"xxyy\"+singleImageInfo.getImage1Ext().trim();\n\n    byte [] array = image.getBytes( 1, ( int ) image.length() );\n    File file = File.createTempFile(UsersExtra.GenerateSession()+\"xxyy\", singleImageInfo.getImage1Ext().trim(), new File(\".\"));\n    FileOutputStream out = new FileOutputStream( file );\n    out.write( array );\n    out.close();\n    FileSystemResource testing=new FileSystemResource(file);\n\n    String mimeType = \"image/\"+singleImageInfo.getImage1Ext().trim().toLowerCase().replace(\".\", \"\");\n      response.setContentType(mimeType);    \n\n        String headerKey = \"Content-Disposition\";\n       String headerValue = String.format(\"attachment; filename=\\\"%s\\\"\", filename);\n       response.setHeader(headerKey, headerValue);\n      // return new FileSystemResource(file); \n       return ResponseEntity.status(HttpStatus.OK).body( new FileSystemResource(file));\n    }catch(Exception e)\n    {\n        System.out.println(e.getMessage());\n    }\n    return null;\n}\n</code></pre>\n\n<p>Using a ResponseEntity in Kumar's code will help you respond with  the correct Response code.\nNote: converting from a blob to a file is quoted from this link: \n<a href=\"https://stackoverflow.com/questions/1076972/snippet-to-create-a-file-from-the-contents-of-a-blob-in-java\">Snippet to create a file from the contents of a blob in Java</a></p>\n"},{"tags":[],"owner":{"account_id":3269240,"reputation":5236,"user_id":2752969,"display_name":"Jefferson Lima"},"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1545243353,"creation_date":1545243353,"answer_id":53857047,"question_id":16601428,"body_markdown":"In addition to the accepted answer, Spring has the class [ContentDisposition](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/ContentDisposition.html) specific for this purpose. I believe it deals with the file name sanitization.\r\n  \r\n          ContentDisposition contentDisposition = ContentDisposition.builder(&quot;inline&quot;)\r\n              .filename(&quot;Filename&quot;)\r\n              .build();\r\n    \r\n          HttpHeaders headers = new HttpHeaders();\r\n          headers.setContentDisposition(contentDisposition);\r\n  ","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<p>In addition to the accepted answer, Spring has the class <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/ContentDisposition.html\" rel=\"noreferrer\">ContentDisposition</a> specific for this purpose. I believe it deals with the file name sanitization.</p>\n\n<pre><code>      ContentDisposition contentDisposition = ContentDisposition.builder(\"inline\")\n          .filename(\"Filename\")\n          .build();\n\n      HttpHeaders headers = new HttpHeaders();\n      headers.setContentDisposition(contentDisposition);\n</code></pre>\n"}],"owner":{"account_id":2572266,"reputation":1270,"user_id":2230661,"display_name":"Hassan Jamil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136344,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"accepted_answer_id":22243867,"answer_count":5,"score":59,"last_activity_date":1694183699,"creation_date":1368764970,"question_id":16601428,"body_markdown":"What is the most appropriate, and standard, way to set the `Content-Disposition=attachment` and `filename=xyz.zip` using Spring 3 `FileSystemResource`?\r\n\r\nThe action looks like :\r\n\r\n\t@ResponseBody\r\n\t@RequestMapping(value = &quot;/action/{abcd}/{efgh}&quot;, method = RequestMethod.GET, produces = &quot;application/zip&quot;)\r\n\t@PreAuthorize(&quot;@authorizationService.authorizeMethod()&quot;)\r\n\tpublic FileSystemResource doAction(@PathVariable String abcd, @PathVariable String efgh) {\r\n\r\n\t\tFile zipFile = service.getFile(abcd, efgh);\r\n\r\n\t\treturn new FileSystemResource(zipFile);\r\n\t}\r\n\r\n\r\nAlthough the file is a zip file so the browser always downloads the file, but I would like to explicitly mention the file as attachment, and also provide a filename that has nothing to do with the files actual name.\r\n\r\nThere might be workarounds for this problem, but I would like to know the proper Spring and `FileSystemResource` way to achieve this goal.\r\n\r\nP.S. The file that is being used here is a temporary file, marked for deletion when the JVM exists.\r\n","title":"How to set &#39;Content-Disposition&#39; and &#39;Filename&#39; when using FileSystemResource to force a file download file?","body":"<p>What is the most appropriate, and standard, way to set the <code>Content-Disposition=attachment</code> and <code>filename=xyz.zip</code> using Spring 3 <code>FileSystemResource</code>?</p>\n\n<p>The action looks like :</p>\n\n<pre><code>@ResponseBody\n@RequestMapping(value = \"/action/{abcd}/{efgh}\", method = RequestMethod.GET, produces = \"application/zip\")\n@PreAuthorize(\"@authorizationService.authorizeMethod()\")\npublic FileSystemResource doAction(@PathVariable String abcd, @PathVariable String efgh) {\n\n    File zipFile = service.getFile(abcd, efgh);\n\n    return new FileSystemResource(zipFile);\n}\n</code></pre>\n\n<p>Although the file is a zip file so the browser always downloads the file, but I would like to explicitly mention the file as attachment, and also provide a filename that has nothing to do with the files actual name.</p>\n\n<p>There might be workarounds for this problem, but I would like to know the proper Spring and <code>FileSystemResource</code> way to achieve this goal.</p>\n\n<p>P.S. The file that is being used here is a temporary file, marked for deletion when the JVM exists.</p>\n"},{"tags":["java","hibernate","spring-boot","spring-data-jpa","hikaricp"],"comments":[{"owner":{"account_id":4118097,"reputation":5672,"user_id":3379182,"display_name":"Matteo Baldi"},"score":0,"creation_date":1551178988,"post_id":54883940,"comment_id":96536961,"body_markdown":"Well, at least you&#39;re not constantly leaking connections (or you&#39;ll be missing the Previously reported leaked connection com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8 was returned to the pool (unleaked) log row). Which version of Hikari CP are you using?","body":"Well, at least you&#39;re not constantly leaking connections (or you&#39;ll be missing the Previously reported leaked connection com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8 was returned to the pool (unleaked) log row). Which version of Hikari CP are you using?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":5,"creation_date":1551179090,"post_id":54883940,"comment_id":96537028,"body_markdown":"How long does it take to execute the method? If it is longer then 2seconds Hikari will log this warning (as that is what you confiugred it to do.","body":"How long does it take to execute the method? If it is longer then 2seconds Hikari will log this warning (as that is what you confiugred it to do."},{"owner":{"account_id":7344529,"reputation":642,"user_id":5592727,"display_name":"mario"},"score":0,"creation_date":1551182479,"post_id":54883940,"comment_id":96539048,"body_markdown":"@MatteoBaldi HikariCP 2.7.9","body":"@MatteoBaldi HikariCP 2.7.9"}],"answers":[{"tags":[],"owner":{"account_id":4118097,"reputation":5672,"user_id":3379182,"display_name":"Matteo Baldi"},"down_vote_count":2,"up_vote_count":27,"is_accepted":true,"score":25,"last_activity_date":1551188318,"creation_date":1551188318,"answer_id":54886801,"question_id":54883940,"body_markdown":"You&#39;re using a recent version of Hikari CP and the connection leak resolves by itself (as visible in your logs). As noted by *@M. Deinum* the issue can be caused in a low value of `hikari.leakDetectionThreshold` property (your &quot;in&quot; query can take much more than 2 seconds). Try to increase it to 60000, then do some tuning based on your response time. ","title":"Apparent connection leak detected with Hikari CP","body":"<p>You're using a recent version of Hikari CP and the connection leak resolves by itself (as visible in your logs). As noted by <em>@M. Deinum</em> the issue can be caused in a low value of <code>hikari.leakDetectionThreshold</code> property (your \"in\" query can take much more than 2 seconds). Try to increase it to 60000, then do some tuning based on your response time. </p>\n"},{"tags":[],"owner":{"account_id":14600060,"reputation":1104,"user_id":10544569,"display_name":"IndustryUser1942"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1657222941,"creation_date":1657222941,"answer_id":72903406,"question_id":54883940,"body_markdown":"    # in spring boot\r\n    spring.datasource.hikari.leak-detection-threshold=60000\r\n","title":"Apparent connection leak detected with Hikari CP","body":"<pre><code># in spring boot\nspring.datasource.hikari.leak-detection-threshold=60000\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15974948,"reputation":127,"user_id":11528102,"display_name":"Mevl&#252;t Beder"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1694183540,"creation_date":1694182856,"answer_id":77067686,"question_id":54883940,"body_markdown":"This error occurs if the maxLifetime time exceeds the leak-detection-threshold time.\r\n\r\n***Failed Example***\r\n\r\n    spring.datasource.hikari.maxLifetime=40000\r\n    spring.datasource.hikari.leak-detection-threshold=30000\r\n\r\n***Works Fine Example***\r\n\r\n    spring.datasource.hikari.maxLifetime=30000\r\n    spring.datasource.hikari.leak-detection-threshold=40000\r\n\r\n","title":"Apparent connection leak detected with Hikari CP","body":"<p>This error occurs if the maxLifetime time exceeds the leak-detection-threshold time.</p>\n<p><em><strong>Failed Example</strong></em></p>\n<pre><code>spring.datasource.hikari.maxLifetime=40000\nspring.datasource.hikari.leak-detection-threshold=30000\n</code></pre>\n<p><em><strong>Works Fine Example</strong></em></p>\n<pre><code>spring.datasource.hikari.maxLifetime=30000\nspring.datasource.hikari.leak-detection-threshold=40000\n</code></pre>\n"}],"owner":{"account_id":7344529,"reputation":642,"user_id":5592727,"display_name":"mario"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123713,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":54886801,"answer_count":3,"score":32,"last_activity_date":1694183540,"creation_date":1551178712,"question_id":54883940,"body_markdown":"When using native sql operator **IN** i get exception. Although it throws an exception, it still works as it was intended, but the exception in the logs is a bit annoying. I think it has something to do with the **IN** operator.\r\n\r\n    @Query(&quot;select c from Contact c where c.id in :ids&quot;)\r\n    List&lt;Contact&gt; findByContactsIds(@Param(&quot;ids&quot;) List&lt;Integer&gt; contactsIds);\r\n\r\nconfig:\r\n\r\n    spring.datasource.hikari.max-lifetime=900000\r\n    spring.datasource.hikari.leakDetectionThreshold=2000\r\n    spring.datasource.hikari.idle-timeout=900000\r\n\r\nexception:\r\n\r\n    2019-02-26 11:25:16.252  WARN 924 --- [l-1 housekeeper] com.zaxxer.hikari.pool.ProxyLeakTask     : Connection leak detection triggered for com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8, stack trace follows\r\n    \r\n    java.lang.Exception: Apparent connection leak detected\r\n    \tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128) ~[HikariCP-2.7.9.jar:na]\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:35) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:106) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:136) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:254) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:262) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:214) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:56) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:162) ~[spring-orm-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:400) ~[spring-orm-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:378) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:474) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:289) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-2.0.10.RELEASE.jar:2.0.10.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61) ~[spring-data-commons-2.0.10.RELEASE.jar:2.0.10.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat com.sun.proxy.$Proxy134.findByContactsIds(Unknown Source) ~[na:na]\r\n    \tat enera.handbook.controller.PassesController.generatePassesPdf(PassesController.java:71) ~[classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_144]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_144]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_144]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_144]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:661) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:742) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:806) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[na:1.8.0_144]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[na:1.8.0_144]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\r\n    \tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_144]\r\n    \r\n    2019-02-26 11:25:34.741 DEBUG 924 --- [l-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)\r\n    2019-02-26 11:25:35.024  INFO 924 --- [p-nio-80-exec-8] com.zaxxer.hikari.pool.ProxyLeakTask     : Previously reported leaked connection com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8 was returned to the pool (unleaked)\r\n\r\nWhy do I have to think all the time what to write so that the validator misses me\r\n","title":"Apparent connection leak detected with Hikari CP","body":"<p>When using native sql operator <strong>IN</strong> i get exception. Although it throws an exception, it still works as it was intended, but the exception in the logs is a bit annoying. I think it has something to do with the <strong>IN</strong> operator.</p>\n\n<pre><code>@Query(\"select c from Contact c where c.id in :ids\")\nList&lt;Contact&gt; findByContactsIds(@Param(\"ids\") List&lt;Integer&gt; contactsIds);\n</code></pre>\n\n<p>config:</p>\n\n<pre><code>spring.datasource.hikari.max-lifetime=900000\nspring.datasource.hikari.leakDetectionThreshold=2000\nspring.datasource.hikari.idle-timeout=900000\n</code></pre>\n\n<p>exception:</p>\n\n<pre><code>2019-02-26 11:25:16.252  WARN 924 --- [l-1 housekeeper] com.zaxxer.hikari.pool.ProxyLeakTask     : Connection leak detection triggered for com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8, stack trace follows\n\njava.lang.Exception: Apparent connection leak detected\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128) ~[HikariCP-2.7.9.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:35) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:106) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:136) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:254) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:262) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:214) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:56) ~[hibernate-core-5.2.17.Final.jar:5.2.17.Final]\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:162) ~[spring-orm-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:400) ~[spring-orm-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:378) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:474) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:289) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135) ~[spring-data-jpa-2.0.10.RELEASE.jar:2.0.10.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.data.repository.core.support.SurroundingTransactionDetectorMethodInterceptor.invoke(SurroundingTransactionDetectorMethodInterceptor.java:61) ~[spring-data-commons-2.0.10.RELEASE.jar:2.0.10.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:185) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at com.sun.proxy.$Proxy134.findByContactsIds(Unknown Source) ~[na:na]\n    at enera.handbook.controller.PassesController.generatePassesPdf(PassesController.java:71) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_144]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_144]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_144]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_144]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:877) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:661) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:742) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.8.RELEASE.jar:5.0.8.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.9.RELEASE.jar:5.0.9.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:800) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:806) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1498) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[na:1.8.0_144]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[na:1.8.0_144]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-8.5.34.jar:8.5.34]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_144]\n\n2019-02-26 11:25:34.741 DEBUG 924 --- [l-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)\n2019-02-26 11:25:35.024  INFO 924 --- [p-nio-80-exec-8] com.zaxxer.hikari.pool.ProxyLeakTask     : Previously reported leaked connection com.mysql.jdbc.JDBC4Connection@ffd3737 on thread http-nio-80-exec-8 was returned to the pool (unleaked)\n</code></pre>\n\n<p>Why do I have to think all the time what to write so that the validator misses me</p>\n"},{"tags":["java","swing","jframe","embedding"],"comments":[{"owner":{"account_id":231518,"reputation":32297,"user_id":495796,"accept_rate":79,"display_name":"Robin Green"},"score":1,"creation_date":1389556026,"post_id":21076086,"comment_id":31703754,"body_markdown":"How does your question differ from the previous one you linked to? If it&#39;s the same question, you can put a bounty on it to get more attention to it. If you have enough reputation.","body":"How does your question differ from the previous one you linked to? If it&#39;s the same question, you can put a bounty on it to get more attention to it. If you have enough reputation."},{"owner":{"account_id":27028764,"reputation":561,"user_id":20585541,"display_name":"Ben the Coder"},"score":0,"creation_date":1681050865,"post_id":21076086,"comment_id":133993452,"body_markdown":"What do you mean by *&quot;a native window&quot;*?","body":"What do you mean by <i>&quot;a native window&quot;</i>?"}],"answers":[{"tags":[],"owner":{"account_id":278315,"reputation":11579,"user_id":572834,"display_name":"Alexey Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694183153,"creation_date":1694183153,"answer_id":77067720,"question_id":21076086,"body_markdown":"I can only repeat [the answer][1] given in another question: **This is not supported**.\r\n\r\nUsing Windows APIs, you can add a window into a `HWND` of `JFrame`, `Panel` (not `JPanel`!) or `Canvas`. Yet Java will never know you did it, it could break many assumptions inside AWT code.\r\n\r\nEven when you write a native Win32 app, you can&#39;t embed an arbitrary window into your top-level window. If the window you want to embed is a top-level window, it may not play well when it&#39;s made a child window of another window because, again, the assumptions are now wrong, some messages are handled differently.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/6525367/572834","title":"Embedding a native window inside a JFrame","body":"<p>I can only repeat <a href=\"https://stackoverflow.com/a/6525367/572834\">the answer</a> given in another question: <strong>This is not supported</strong>.</p>\n<p>Using Windows APIs, you can add a window into a <code>HWND</code> of <code>JFrame</code>, <code>Panel</code> (not <code>JPanel</code>!) or <code>Canvas</code>. Yet Java will never know you did it, it could break many assumptions inside AWT code.</p>\n<p>Even when you write a native Win32 app, you can't embed an arbitrary window into your top-level window. If the window you want to embed is a top-level window, it may not play well when it's made a child window of another window because, again, the assumptions are now wrong, some messages are handled differently.</p>\n"}],"owner":{"account_id":793512,"reputation":788,"user_id":900699,"accept_rate":17,"display_name":"Graham Seed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2547,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":1,"score":11,"last_activity_date":1694183153,"creation_date":1389538603,"question_id":21076086,"body_markdown":"Does anyone know of a method or API that supports embedding a native window inside either a Java JFrame or JPanel?\r\n\r\nI found this previous post:\r\n\r\nhttps://stackoverflow.com/questions/6524727/how-do-i-run-an-external-program-inside-a-java-frame-in-netbeans-in-a-platform-i\r\n\r\nI can get the window handle using:\r\n\r\nhttp://www.java-forums.org/advanced-java/44064-getting-window-id-window-frame.html\r\n\r\nand this works fine.\r\n\r\nThis article appears to suggest that it&#39;s possible, but does not illustrate how:\r\n\r\nhttps://stackoverflow.com/questions/4809713/embed-hwnd-window-handle-in-a-jpanel\r\n\r\n","title":"Embedding a native window inside a JFrame","body":"<p>Does anyone know of a method or API that supports embedding a native window inside either a Java JFrame or JPanel?</p>\n\n<p>I found this previous post:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6524727/how-do-i-run-an-external-program-inside-a-java-frame-in-netbeans-in-a-platform-i\">How do I run an external program inside a Java frame in netbeans in a platform independent manner?</a></p>\n\n<p>I can get the window handle using:</p>\n\n<p><a href=\"http://www.java-forums.org/advanced-java/44064-getting-window-id-window-frame.html\" rel=\"noreferrer\">http://www.java-forums.org/advanced-java/44064-getting-window-id-window-frame.html</a></p>\n\n<p>and this works fine.</p>\n\n<p>This article appears to suggest that it's possible, but does not illustrate how:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4809713/embed-hwnd-window-handle-in-a-jpanel\">Embed HWND (Window Handle) in a JPanel</a></p>\n"},{"tags":["java","spring-webflux","resilience4j"],"comments":[{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":0,"creation_date":1603595106,"post_id":64519894,"comment_id":114085386,"body_markdown":"Are you sure the client is having to retry?  How do you know?","body":"Are you sure the client is having to retry?  How do you know?"}],"answers":[{"tags":[],"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1603595479,"creation_date":1603595479,"answer_id":64519971,"question_id":64519894,"body_markdown":"There seems to be a lot of information about this on the web if you Google for &quot;resilience4j retry example logging&quot;.  I found this as a potential solution:\r\n\r\n    RetryConfig config = RetryConfig.ofDefaults();\r\n    RetryRegistry registry = RetryRegistry.of(config);\r\n    Retry retry = registry.retry(&quot;flightSearchService&quot;, config);\r\n\r\n    ...\r\n\r\n    Retry.EventPublisher publisher = retry.getEventPublisher();\r\n    publisher.onRetry(event -&gt; System.out.println(event.toString()));\r\n\r\nwhere you can register a callback to get an event whenever a Retry occurs.  This. came from &quot;https://reflectoring.io/retry-with-resilience4j&quot;.\r\n\r\n","title":"Resilience4j Retry - logging retry attempts from client?","body":"<p>There seems to be a lot of information about this on the web if you Google for &quot;resilience4j retry example logging&quot;.  I found this as a potential solution:</p>\n<pre><code>RetryConfig config = RetryConfig.ofDefaults();\nRetryRegistry registry = RetryRegistry.of(config);\nRetry retry = registry.retry(&quot;flightSearchService&quot;, config);\n\n...\n\nRetry.EventPublisher publisher = retry.getEventPublisher();\npublisher.onRetry(event -&gt; System.out.println(event.toString()));\n</code></pre>\n<p>where you can register a callback to get an event whenever a Retry occurs.  This. came from &quot;https://reflectoring.io/retry-with-resilience4j&quot;.</p>\n"},{"tags":[],"owner":{"account_id":3622573,"reputation":1784,"user_id":5077433,"display_name":"Robert Winkler"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1603713809,"creation_date":1603713809,"answer_id":64536776,"question_id":64519894,"body_markdown":"Fortunately (or unfortunately) there is an undocumented feature :)\r\n\r\nYou can add a RegistryEventConsumer Bean in order to add event consumers to any Retry instance.\r\n\r\n```\r\n    @Bean\r\n    public RegistryEventConsumer&lt;Retry&gt; myRetryRegistryEventConsumer() {\r\n\r\n        return new RegistryEventConsumer&lt;Retry&gt;() {\r\n            @Override\r\n            public void onEntryAddedEvent(EntryAddedEvent&lt;Retry&gt; entryAddedEvent) {\r\n                entryAddedEvent.getAddedEntry().getEventPublisher()\r\n                   .onEvent(event -&gt; LOG.info(event.toString()));\r\n            }\r\n\r\n            @Override\r\n            public void onEntryRemovedEvent(EntryRemovedEvent&lt;Retry&gt; entryRemoveEvent) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onEntryReplacedEvent(EntryReplacedEvent&lt;Retry&gt; entryReplacedEvent) {\r\n\r\n            }\r\n        };\r\n    }\r\n```\r\n\r\nLog entry look as follows:\r\n\r\n```\r\n2020-10-26T13:00:19.807034700+01:00[Europe/Berlin]: Retry &#39;backendA&#39;, waiting PT0.1S until attempt &#39;1&#39;. Last attempt failed with exception &#39;org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception&#39;.\r\n\r\n2020-10-26T13:00:19.912028800+01:00[Europe/Berlin]: Retry &#39;backendA&#39;, waiting PT0.1S until attempt &#39;2&#39;. Last attempt failed with exception &#39;org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception&#39;.\r\n\r\n2020-10-26T13:00:20.023250+01:00[Europe/Berlin]: Retry &#39;backendA&#39; recorded a failed retry attempt. Number of retry attempts: &#39;3&#39;. Giving up. Last exception was: &#39;org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception&#39;.\r\n```","title":"Resilience4j Retry - logging retry attempts from client?","body":"<p>Fortunately (or unfortunately) there is an undocumented feature :)</p>\n<p>You can add a RegistryEventConsumer Bean in order to add event consumers to any Retry instance.</p>\n<pre><code>    @Bean\n    public RegistryEventConsumer&lt;Retry&gt; myRetryRegistryEventConsumer() {\n\n        return new RegistryEventConsumer&lt;Retry&gt;() {\n            @Override\n            public void onEntryAddedEvent(EntryAddedEvent&lt;Retry&gt; entryAddedEvent) {\n                entryAddedEvent.getAddedEntry().getEventPublisher()\n                   .onEvent(event -&gt; LOG.info(event.toString()));\n            }\n\n            @Override\n            public void onEntryRemovedEvent(EntryRemovedEvent&lt;Retry&gt; entryRemoveEvent) {\n\n            }\n\n            @Override\n            public void onEntryReplacedEvent(EntryReplacedEvent&lt;Retry&gt; entryReplacedEvent) {\n\n            }\n        };\n    }\n</code></pre>\n<p>Log entry look as follows:</p>\n<pre><code>2020-10-26T13:00:19.807034700+01:00[Europe/Berlin]: Retry 'backendA', waiting PT0.1S until attempt '1'. Last attempt failed with exception 'org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception'.\n\n2020-10-26T13:00:19.912028800+01:00[Europe/Berlin]: Retry 'backendA', waiting PT0.1S until attempt '2'. Last attempt failed with exception 'org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception'.\n\n2020-10-26T13:00:20.023250+01:00[Europe/Berlin]: Retry 'backendA' recorded a failed retry attempt. Number of retry attempts: '3'. Giving up. Last exception was: 'org.springframework.web.client.HttpServerErrorException: 500 This is a remote exception'.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":135385,"reputation":1785,"user_id":457589,"display_name":"Julien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617177603,"creation_date":1617177603,"answer_id":66883879,"question_id":64519894,"body_markdown":"Configured with `application.properties`, and using the `@Retry` annotation, I managed to get some output with\r\n\r\n```\r\nresilience4j.retry.instances.myRetry.maxAttempts=3\r\nresilience4j.retry.instances.myRetry.waitDuration=1s\r\nresilience4j.retry.instances.myRetry.enableExponentialBackoff=true\r\nresilience4j.retry.instances.myRetry.exponentialBackoffMultiplier=2\r\nresilience4j.retry.instances.myRetry.retryExceptions[0]=java.lang.Exception\r\n```\r\n\r\n```java\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.stereotype.Service;\r\nimport io.github.resilience4j.retry.RetryRegistry;\r\nimport io.github.resilience4j.retry.annotation.Retry;\r\n\r\n@Service\r\npublic class MyService {\r\n\tprivate static final Logger LOG = LoggerFactory.getLogger(MyService.class);\r\n\r\n\tpublic MyService(RetryRegistry retryRegistry) {\r\n        // all\r\n        retryRegistry.getAllRetries()\r\n          .forEach(retry -&gt; retry\r\n            .getEventPublisher()\r\n            .onRetry(event -&gt; LOG.info(&quot;{}&quot;, event))\r\n        );\r\n\r\n       // or single\r\n       retryRegistry\r\n\t\t\t.retry(&quot;myRetry&quot;)\r\n\t\t\t.getEventPublisher()\r\n\t\t\t.onRetry(event -&gt; LOG.info(&quot;{}&quot;, event));\r\n\t}\r\n\r\n    @Retry(name = &quot;myRetry&quot;)\r\n    public void doSomething() {\r\n\t\tthrow new RuntimeException(&quot;It failed&quot;);\r\n    }\r\n}\r\n```\r\n\r\neg.\r\n```\r\n2021-03-31T07:42:23 [http-nio-8083-exec-1] INFO  [myService] - 2021-03-31T07:42:23.228892500Z[UTC]: Retry &#39;myRetry&#39;, waiting PT1S until attempt &#39;1&#39;. Last attempt failed with exception &#39;java.lang.RuntimeException: It failed&#39;.\r\n2021-03-31T07:42:24 [http-nio-8083-exec-1] INFO  [myService] - 2021-03-31T07:42:24.231504600Z[UTC]: Retry &#39;myRetry&#39;, waiting PT2S until attempt &#39;2&#39;. Last attempt failed with exception &#39;java.lang.RuntimeException: It failed&#39;.\r\n```","title":"Resilience4j Retry - logging retry attempts from client?","body":"<p>Configured with <code>application.properties</code>, and using the <code>@Retry</code> annotation, I managed to get some output with</p>\n<pre><code>resilience4j.retry.instances.myRetry.maxAttempts=3\nresilience4j.retry.instances.myRetry.waitDuration=1s\nresilience4j.retry.instances.myRetry.enableExponentialBackoff=true\nresilience4j.retry.instances.myRetry.exponentialBackoffMultiplier=2\nresilience4j.retry.instances.myRetry.retryExceptions[0]=java.lang.Exception\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.stereotype.Service;\nimport io.github.resilience4j.retry.RetryRegistry;\nimport io.github.resilience4j.retry.annotation.Retry;\n\n@Service\npublic class MyService {\n    private static final Logger LOG = LoggerFactory.getLogger(MyService.class);\n\n    public MyService(RetryRegistry retryRegistry) {\n        // all\n        retryRegistry.getAllRetries()\n          .forEach(retry -&gt; retry\n            .getEventPublisher()\n            .onRetry(event -&gt; LOG.info(&quot;{}&quot;, event))\n        );\n\n       // or single\n       retryRegistry\n            .retry(&quot;myRetry&quot;)\n            .getEventPublisher()\n            .onRetry(event -&gt; LOG.info(&quot;{}&quot;, event));\n    }\n\n    @Retry(name = &quot;myRetry&quot;)\n    public void doSomething() {\n        throw new RuntimeException(&quot;It failed&quot;);\n    }\n}\n</code></pre>\n<p>eg.</p>\n<pre><code>2021-03-31T07:42:23 [http-nio-8083-exec-1] INFO  [myService] - 2021-03-31T07:42:23.228892500Z[UTC]: Retry 'myRetry', waiting PT1S until attempt '1'. Last attempt failed with exception 'java.lang.RuntimeException: It failed'.\n2021-03-31T07:42:24 [http-nio-8083-exec-1] INFO  [myService] - 2021-03-31T07:42:24.231504600Z[UTC]: Retry 'myRetry', waiting PT2S until attempt '2'. Last attempt failed with exception 'java.lang.RuntimeException: It failed'.\n</code></pre>\n"}],"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9474,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":64536776,"answer_count":3,"score":6,"last_activity_date":1694182898,"creation_date":1603594593,"question_id":64519894,"body_markdown":"Is it possible to log retries attempts on client side with resilience4j please?\r\n\r\nMaybe via some kind of configuration, or settings.\r\n\r\nCurrently, I am using resilience4j with Spring boot Webflux **annotation based**.\r\n\r\nIt is working great, the project is amazing.\r\n\r\nWhile we put server logs on server side, to see that a same http call has been made due to a retry (we log time, client IP, request ID, etc...) Would I be possible to have client side logs?\r\n\r\nI was expecting to see something like &quot;Resilience4j - client side: 1st attempt failed because of someException, retying with attend number 2. 2nd attempt failed because of someException, retying with attend number 3. 3rd attempt successful!&quot;\r\n\r\nSomething like that. Is there a property, some config, some setup, that can help to do this easily please? Without adding too much boiler code.\r\n\r\n```\r\n@RestController\r\npublic class TestController {\r\n\r\n    private final WebClient webClient;\r\n\r\n    public TestController(WebClient.Builder webClientBuilder) {\r\n        this.webClient = webClientBuilder.baseUrl(&quot;http://localhost:8443/serviceBgreeting&quot;).build();\r\n    }\r\n\r\n    @GetMapping(&quot;/greeting&quot;)\r\n    public Mono&lt;String&gt; greeting() {\r\n        System.out.println(&quot;Greeting method is invoked &quot;);\r\n        return someRestCall();\r\n    }\r\n\r\n    @Retry(name = &quot;greetingRetry&quot;)\r\n    public Mono&lt;String&gt; someRestCall() {\r\n        return this.webClient.get().retrieve().bodyToMono(String.class);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThank you","title":"Resilience4j Retry - logging retry attempts from client?","body":"<p>Is it possible to log retries attempts on client side with resilience4j please?</p>\n<p>Maybe via some kind of configuration, or settings.</p>\n<p>Currently, I am using resilience4j with Spring boot Webflux <strong>annotation based</strong>.</p>\n<p>It is working great, the project is amazing.</p>\n<p>While we put server logs on server side, to see that a same http call has been made due to a retry (we log time, client IP, request ID, etc...) Would I be possible to have client side logs?</p>\n<p>I was expecting to see something like &quot;Resilience4j - client side: 1st attempt failed because of someException, retying with attend number 2. 2nd attempt failed because of someException, retying with attend number 3. 3rd attempt successful!&quot;</p>\n<p>Something like that. Is there a property, some config, some setup, that can help to do this easily please? Without adding too much boiler code.</p>\n<pre><code>@RestController\npublic class TestController {\n\n    private final WebClient webClient;\n\n    public TestController(WebClient.Builder webClientBuilder) {\n        this.webClient = webClientBuilder.baseUrl(&quot;http://localhost:8443/serviceBgreeting&quot;).build();\n    }\n\n    @GetMapping(&quot;/greeting&quot;)\n    public Mono&lt;String&gt; greeting() {\n        System.out.println(&quot;Greeting method is invoked &quot;);\n        return someRestCall();\n    }\n\n    @Retry(name = &quot;greetingRetry&quot;)\n    public Mono&lt;String&gt; someRestCall() {\n        return this.webClient.get().retrieve().bodyToMono(String.class);\n    }\n\n}\n</code></pre>\n<p>Thank you</p>\n"},{"tags":["java","json","methods","parameters","constructor"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1694182351,"post_id":77067620,"comment_id":135861889,"body_markdown":"It&#39;s called an [annotation](https://docs.oracle.com/javase/tutorial/java/annotations/basics.html). It is information for some tool, like a JSON parser, to work with your code. In this case it indicates to the JSON parser which JSON values need to be bound to which parameters of the constructor of `Thing`.","body":"It&#39;s called an <a href=\"https://docs.oracle.com/javase/tutorial/java/annotations/basics.html\" rel=\"nofollow noreferrer\">annotation</a>. It is information for some tool, like a JSON parser, to work with your code. In this case it indicates to the JSON parser which JSON values need to be bound to which parameters of the constructor of <code>Thing</code>."},{"owner":{"account_id":1297417,"reputation":41873,"user_id":1248114,"accept_rate":66,"display_name":"arkascha"},"score":1,"creation_date":1694182484,"post_id":77067620,"comment_id":135861915,"body_markdown":"This is called an &quot;annotation&quot; in java. Many different types of such annotations exist, you can even implement your own. The idea is to influence the compilation process. This specific annotation _probably_ (depends on where that definition actually is imported from) means that this method can be used to create a value for a json object property. You should be able to pull up the annotations documentation by setting the cursor on it and jumping to its source (implementation) from there (how depends on the IDE you are using, for IntelliJ that would be CTRL-B).","body":"This is called an &quot;annotation&quot; in java. Many different types of such annotations exist, you can even implement your own. The idea is to influence the compilation process. This specific annotation <i>probably</i> (depends on where that definition actually is imported from) means that this method can be used to create a value for a json object property. You should be able to pull up the annotations documentation by setting the cursor on it and jumping to its source (implementation) from there (how depends on the IDE you are using, for IntelliJ that would be CTRL-B)."}],"owner":{"account_id":16955543,"reputation":165,"user_id":12264042,"display_name":"Rikudou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694182265,"creation_date":1694182205,"question_id":77067620,"body_markdown":"I came across some code that I am trying to analyze. There is a class that has a constructor that looks something like this:\r\n\r\n```\r\npublic Thing(@Json(name = &quot;var1&quot;) String str, @Json(name = &quot;var2&quot;) String str2) {\r\n        this.instanceVar1 = str;\r\n        this.instanceVar2 = str2;\r\n}\r\n```\r\n\r\nI have tried looking it up, but I can&#39;t really find anything that answers the following question:\r\n\r\nWhat does it mean in Java when a function or constructor parameter is preceded by `@Json(name=&quot;something&quot;)`?\r\n\r\nThis reminds me of how form data gets a name property in HTML/JavaScript. Even so, what would a snippet like the code above imply? Would the above code imply that there is a server somewhere, and the `String str` is being sent to that server as JSON data, with the target of this data being some endpoint with the name &quot;var1&quot;?\r\n\r\nAlternatively, does this imply that some server endpoint with the name &quot;var1&quot; is actually the one sending the value of `str` to this constructor?\r\n\r\nPlease help me out with this. ","title":"What does it mean in Java when a method or constructor parameter is preceded by @Json(name=&quot;something&quot;)?","body":"<p>I came across some code that I am trying to analyze. There is a class that has a constructor that looks something like this:</p>\n<pre><code>public Thing(@Json(name = &quot;var1&quot;) String str, @Json(name = &quot;var2&quot;) String str2) {\n        this.instanceVar1 = str;\n        this.instanceVar2 = str2;\n}\n</code></pre>\n<p>I have tried looking it up, but I can't really find anything that answers the following question:</p>\n<p>What does it mean in Java when a function or constructor parameter is preceded by <code>@Json(name=&quot;something&quot;)</code>?</p>\n<p>This reminds me of how form data gets a name property in HTML/JavaScript. Even so, what would a snippet like the code above imply? Would the above code imply that there is a server somewhere, and the <code>String str</code> is being sent to that server as JSON data, with the target of this data being some endpoint with the name &quot;var1&quot;?</p>\n<p>Alternatively, does this imply that some server endpoint with the name &quot;var1&quot; is actually the one sending the value of <code>str</code> to this constructor?</p>\n<p>Please help me out with this.</p>\n"},{"tags":["c#","java","regex","capturing-group","nested-reference"],"comments":[{"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":5,"creation_date":1283435083,"post_id":3627681,"comment_id":3810880,"body_markdown":"This series was started by permission of some in the community (http://meta.stackexchange.com/questions/62695/permission-to-start-a-series-of-advanced-regex-articles). If the reception is good, I plan to continue to cover other more advanced as well as more basic features of regex.","body":"This series was started by permission of some in the community (<a href=\"http://meta.stackexchange.com/questions/62695/permission-to-start-a-series-of-advanced-regex-articles\" title=\"permission to start a series of advanced regex articles\">meta.stackexchange.com/questions/62695/&hellip;</a>). If the reception is good, I plan to continue to cover other more advanced as well as more basic features of regex."},{"owner":{"account_id":59511,"reputation":35694,"user_id":178060,"accept_rate":92,"display_name":"wheaties"},"score":1,"creation_date":1283435244,"post_id":3627681,"comment_id":3810918,"body_markdown":"If this is supposed to be educational and for the community, why isn&#39;t it community wiki?","body":"If this is supposed to be educational and for the community, why isn&#39;t it community wiki?"},{"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"score":15,"creation_date":1283435604,"post_id":3627681,"comment_id":3810989,"body_markdown":"I think the effort is worth some reputation.  Please don&#39;t force them into community wiki.  Who cares if poly goes from 44k to 50k, what&#39;s the difference?","body":"I think the effort is worth some reputation.  Please don&#39;t force them into community wiki.  Who cares if poly goes from 44k to 50k, what&#39;s the difference?"},{"owner":{"account_id":32093,"reputation":650733,"user_id":88656,"display_name":"Eric Lippert"},"score":3,"creation_date":1283435780,"post_id":3627681,"comment_id":3811022,"body_markdown":"I look forward to the series. Note that if you are interested in a brief exploration of the origins of regular expressions, I started writing a blog series on that. I never completed it unfortunately. http://blogs.msdn.com/b/ericlippert/archive/tags/regular+expressions/","body":"I look forward to the series. Note that if you are interested in a brief exploration of the origins of regular expressions, I started writing a blog series on that. I never completed it unfortunately. <a href=\"http://blogs.msdn.com/b/ericlippert/archive/tags/regular+expressions/\" rel=\"nofollow noreferrer\">blogs.msdn.com/b/ericlippert/archive/tags/regular+expression&zwnj;&#8203;s</a>"},{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":2,"creation_date":1283436367,"post_id":3627681,"comment_id":3811114,"body_markdown":"If this is a series - how about inventing a tag, that would simplify finding all &#39;articles&#39; of this series !?","body":"If this is a series - how about inventing a tag, that would simplify finding all &#39;articles&#39; of this series !?"},{"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1283436549,"post_id":3627681,"comment_id":3811161,"body_markdown":"@Andreas: you can discuss the logistics of this series on meta. I wouldn&#39;t mind creating a new tag, but I&#39;d be careful about meta-tags (e.g. `[beginner]` was banished -- http://blog.stackoverflow.com/2010/08/the-death-of-meta-tags/). As of now, I plan to update the discussion on meta with links to each articles in the series.","body":"@Andreas: you can discuss the logistics of this series on meta. I wouldn&#39;t mind creating a new tag, but I&#39;d be careful about meta-tags (e.g. <code>[beginner]</code> was banished -- <a href=\"http://blog.stackoverflow.com/2010/08/the-death-of-meta-tags/\">blog.stackoverflow.com/2010/08/the-death-of-meta-tags</a>). As of now, I plan to update the discussion on meta with links to each articles in the series."},{"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1283640641,"post_id":3627681,"comment_id":3830934,"body_markdown":"The second part of the series is now up: http://stackoverflow.com/questions/3644266/how-can-we-match-an-bn-with-pcre-regex/","body":"The second part of the series is now up: <a href=\"http://stackoverflow.com/questions/3644266/how-can-we-match-an-bn-with-pcre-regex/\" title=\"how can we match an bn with pcre regex\">stackoverflow.com/questions/3644266/&hellip;</a>"},{"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"score":0,"creation_date":1283924639,"post_id":3627681,"comment_id":3856530,"body_markdown":"Part 3: http://stackoverflow.com/questions/3664881/how-does-this-java-regex-detect-palindromes","body":"Part 3: <a href=\"http://stackoverflow.com/questions/3664881/how-does-this-java-regex-detect-palindromes\" title=\"how does this java regex detect palindromes\">stackoverflow.com/questions/3664881/&hellip;</a>"},{"owner":{"account_id":3244487,"reputation":19947,"user_id":2736496,"accept_rate":74,"display_name":"aliteralmind"},"score":0,"creation_date":1397093819,"post_id":3627681,"comment_id":35087058,"body_markdown":"This question has been added to the [Stack Overflow Regular Expression FAQ](http://stackoverflow.com/a/22944075/2736496), under &quot;Advanced Regex-Fu&quot;.","body":"This question has been added to the <a href=\"http://stackoverflow.com/a/22944075/2736496\">Stack Overflow Regular Expression FAQ</a>, under &quot;Advanced Regex-Fu&quot;."}],"answers":[{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1694180603,"creation_date":1283435037,"answer_id":3627686,"question_id":3627681,"body_markdown":"### Explanation\r\n\r\nHere&#39;s a schematic breakdown of the pattern:\r\n\r\n    from beginning…\r\n    |         …to end\r\n    |         |\r\n    ^(\\1.|^.)+$\r\n     \\______/|___match\r\n      group 1    one-or-more times\r\n\r\nThe `(…)` [brackets](http://www.regular-expressions.info/brackets.html) define capturing group 1, and this group is [matched repeatedly](http://www.regular-expressions.info/repeat.html) with `+`. This subpattern is [anchored](http://www.regular-expressions.info/anchors.html) with `^` and `$` to see if it can match the entire string.\r\n\r\nGroup 1 tries to match `this|that` [alternates](http://www.regular-expressions.info/alternation.html):\r\n\r\n* `\\1.`, that is, what group 1 matched (self reference!), plus one of [&quot;any&quot; character](http://www.regular-expressions.info/dot.html),\r\n* or `^.`, that is, just &quot;any&quot; one character at the beginning\r\n\r\nNote that in group 1, we have a reference to what group 1 matched! This is a _nested/self reference_, and is the main idea introduced in this example. Keep in mind that when a capturing group is repeated, generally [it only keeps the last capture](http://www.regular-expressions.info/captureall.html), so the self reference in this case essentially says:\r\n\r\n&gt; &quot;Try to match what I matched last time, plus one more. That&#39;s what I&#39;ll match this time.&quot;\r\n\r\nSimilar to a recursion, there has to be a &quot;base case&quot; with self references. At the first iteration of the `+`, group 1 had not captured anything yet (which is _NOT_ the same as saying that it starts off with an empty string). Hence the second alternation is introduced, as a way to &quot;initialize&quot; group 1, which is that it&#39;s allowed to capture one character when it&#39;s at the beginning of the string.\r\n\r\nSo as it is repeated with `+`, group 1 first tries to match 1 character, then 2, then 3, then 4, etc. The sum of these numbers is a triangular number.\r\n\r\n---\r\n\r\n### Further explorations\r\n\r\nNote that for simplification, we used strings that consists of the same repeating character as our input. Now that we know how this pattern works, we can see that this pattern can also match strings like `&quot;1121231234&quot;`, `&quot;aababc&quot;`, etc.\r\n\r\nNote also that if we find that _n_ is a triangular number, i.e. _n = 1 + 2 + … + k_, the length of the string captured by group 1 at the end will be _k_.\r\n\r\nBoth of these points are shown in the following C# snippet ([also seen on ideone.com](http://ideone.com/4SqME)):\r\n\r\n    Regex r = new Regex(@&quot;^(\\1.|^.)+$&quot;);\r\n    \r\n    Console.WriteLine(r.IsMatch(&quot;aababc&quot;));     // True\r\n    Console.WriteLine(r.IsMatch(&quot;1121231234&quot;)); // True\r\n    Console.WriteLine(r.IsMatch(&quot;iLoveRegEx&quot;)); // False\r\n    \r\n    for (int n = 0; n &lt;= 50; n++) {\r\n        Match m = r.Match(&quot;&quot;.PadLeft(n));\r\n        if (m.Success) {\r\n           Console.WriteLine(&quot;{0} = sum(1..{1})&quot;, n, m.Groups[1].Length);\r\n        }\r\n    }\r\n    // 1 = sum(1..1)\r\n    // 3 = sum(1..2)\r\n    // 6 = sum(1..3)\r\n    // 10 = sum(1..4)\r\n    // 15 = sum(1..5)\r\n    // 21 = sum(1..6)\r\n    // 28 = sum(1..7)\r\n    // 36 = sum(1..8)\r\n    // 45 = sum(1..9)\r\n\r\n---\r\n\r\n### Flavor notes\r\n\r\nNot all flavors support nested references. Always familiarize yourself with [the quirks of the flavor](http://www.regular-expressions.info/refflavors.html) that you&#39;re working with (and consequently, it almost always helps to provide this information whenever you&#39;re asking regex-related questions).\r\n\r\nIn most flavors, the standard regex matching mechanism tries to see if a pattern can match _any part_ of the input string (possibly, but not necessarily, the entire input). This means that you should remember to always anchor your pattern with `^` and `$` whenever necessary.\r\n\r\nJava is slightly different in that [`String.matches`](http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29), [`Pattern.matches`](http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/regex/Pattern.html#matches%28java.lang.String,%20java.lang.CharSequence%29) and [`Matcher.matches`](http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/regex/Matcher.html#matches%28%29) attempt to match a pattern against the _entire_ input string. This is why the anchors can be omitted in the above snippet.\r\n\r\nNote that in other contexts, you may need to use `\\A` and `\\Z` anchors instead. For example, in [multiline mode](http://www.regular-expressions.info/modifiers.html), `^` and `$` match the beginning and end of _each line_ in the input.\r\n\r\nOne last thing is that in .NET regex, you _CAN_ actually get all the intermediate captures made by a repeated capturing group. In most flavors, you can&#39;t: all intermediate captures are lost and you only get to keep the last.\r\n\r\n### Related questions\r\n\r\n* [(Java) method matches not work well](https://stackoverflow.com/questions/3202120/method-matches-not-work-well) - with examples on how to do prefix/suffix/infix matching\r\n* [Is there a regex flavor that allows me to count the number of repetitions matched by `*` and `+`](https://stackoverflow.com/questions/3029127/is-there-a-regex-flavor-that-allows-me-to-count-the-number-of-repetitions-matched/) (.NET!)\r\n\r\n---\r\n\r\n### Bonus material: Using regex to find power of twos!!!\r\n\r\nWith very slight modification, you can use the same techniques presented here to find power of twos.\r\n\r\nHere&#39;s the basic mathematical property that you want to take advantage of:\r\n\r\n* 1 = 1\r\n* 2 = (1) + 1\r\n* 4 = (1+2) + 1\r\n* 8 = (1+2+4) + 1\r\n* 16 = (1+2+4+8) + 1\r\n* 32 = (1+2+4+8+16) + 1\r\n\r\nThe solution is given below (but do try to solve it yourself first!!!!)\r\n\r\n&gt;! (see on ideone.com in [PHP](http://ideone.com/tBrKd), [Java](http://ideone.com/kFCN3), and [C#](http://ideone.com/YMGz4)):\r\n&gt;! \r\n&gt;! `^(\\1\\1|^.)*.$`\r\n","title":"How does this regex find triangular numbers?","body":"<h3>Explanation</h3>\n<p>Here's a schematic breakdown of the pattern:</p>\n<pre><code>from beginning…\n|         …to end\n|         |\n^(\\1.|^.)+$\n \\______/|___match\n  group 1    one-or-more times\n</code></pre>\n<p>The <code>(…)</code> <a href=\"http://www.regular-expressions.info/brackets.html\" rel=\"nofollow noreferrer\">brackets</a> define capturing group 1, and this group is <a href=\"http://www.regular-expressions.info/repeat.html\" rel=\"nofollow noreferrer\">matched repeatedly</a> with <code>+</code>. This subpattern is <a href=\"http://www.regular-expressions.info/anchors.html\" rel=\"nofollow noreferrer\">anchored</a> with <code>^</code> and <code>$</code> to see if it can match the entire string.</p>\n<p>Group 1 tries to match <code>this|that</code> <a href=\"http://www.regular-expressions.info/alternation.html\" rel=\"nofollow noreferrer\">alternates</a>:</p>\n<ul>\n<li><code>\\1.</code>, that is, what group 1 matched (self reference!), plus one of <a href=\"http://www.regular-expressions.info/dot.html\" rel=\"nofollow noreferrer\">&quot;any&quot; character</a>,</li>\n<li>or <code>^.</code>, that is, just &quot;any&quot; one character at the beginning</li>\n</ul>\n<p>Note that in group 1, we have a reference to what group 1 matched! This is a <em>nested/self reference</em>, and is the main idea introduced in this example. Keep in mind that when a capturing group is repeated, generally <a href=\"http://www.regular-expressions.info/captureall.html\" rel=\"nofollow noreferrer\">it only keeps the last capture</a>, so the self reference in this case essentially says:</p>\n<blockquote>\n<p>&quot;Try to match what I matched last time, plus one more. That's what I'll match this time.&quot;</p>\n</blockquote>\n<p>Similar to a recursion, there has to be a &quot;base case&quot; with self references. At the first iteration of the <code>+</code>, group 1 had not captured anything yet (which is <em>NOT</em> the same as saying that it starts off with an empty string). Hence the second alternation is introduced, as a way to &quot;initialize&quot; group 1, which is that it's allowed to capture one character when it's at the beginning of the string.</p>\n<p>So as it is repeated with <code>+</code>, group 1 first tries to match 1 character, then 2, then 3, then 4, etc. The sum of these numbers is a triangular number.</p>\n<hr />\n<h3>Further explorations</h3>\n<p>Note that for simplification, we used strings that consists of the same repeating character as our input. Now that we know how this pattern works, we can see that this pattern can also match strings like <code>&quot;1121231234&quot;</code>, <code>&quot;aababc&quot;</code>, etc.</p>\n<p>Note also that if we find that <em>n</em> is a triangular number, i.e. <em>n = 1 + 2 + … + k</em>, the length of the string captured by group 1 at the end will be <em>k</em>.</p>\n<p>Both of these points are shown in the following C# snippet (<a href=\"http://ideone.com/4SqME\" rel=\"nofollow noreferrer\">also seen on ideone.com</a>):</p>\n<pre><code>Regex r = new Regex(@&quot;^(\\1.|^.)+$&quot;);\n\nConsole.WriteLine(r.IsMatch(&quot;aababc&quot;));     // True\nConsole.WriteLine(r.IsMatch(&quot;1121231234&quot;)); // True\nConsole.WriteLine(r.IsMatch(&quot;iLoveRegEx&quot;)); // False\n\nfor (int n = 0; n &lt;= 50; n++) {\n    Match m = r.Match(&quot;&quot;.PadLeft(n));\n    if (m.Success) {\n       Console.WriteLine(&quot;{0} = sum(1..{1})&quot;, n, m.Groups[1].Length);\n    }\n}\n// 1 = sum(1..1)\n// 3 = sum(1..2)\n// 6 = sum(1..3)\n// 10 = sum(1..4)\n// 15 = sum(1..5)\n// 21 = sum(1..6)\n// 28 = sum(1..7)\n// 36 = sum(1..8)\n// 45 = sum(1..9)\n</code></pre>\n<hr />\n<h3>Flavor notes</h3>\n<p>Not all flavors support nested references. Always familiarize yourself with <a href=\"http://www.regular-expressions.info/refflavors.html\" rel=\"nofollow noreferrer\">the quirks of the flavor</a> that you're working with (and consequently, it almost always helps to provide this information whenever you're asking regex-related questions).</p>\n<p>In most flavors, the standard regex matching mechanism tries to see if a pattern can match <em>any part</em> of the input string (possibly, but not necessarily, the entire input). This means that you should remember to always anchor your pattern with <code>^</code> and <code>$</code> whenever necessary.</p>\n<p>Java is slightly different in that <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29\" rel=\"nofollow noreferrer\"><code>String.matches</code></a>, <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/regex/Pattern.html#matches%28java.lang.String,%20java.lang.CharSequence%29\" rel=\"nofollow noreferrer\"><code>Pattern.matches</code></a> and <a href=\"http://download.oracle.com/docs/cd/E17409_01/javase/6/docs/api/java/util/regex/Matcher.html#matches%28%29\" rel=\"nofollow noreferrer\"><code>Matcher.matches</code></a> attempt to match a pattern against the <em>entire</em> input string. This is why the anchors can be omitted in the above snippet.</p>\n<p>Note that in other contexts, you may need to use <code>\\A</code> and <code>\\Z</code> anchors instead. For example, in <a href=\"http://www.regular-expressions.info/modifiers.html\" rel=\"nofollow noreferrer\">multiline mode</a>, <code>^</code> and <code>$</code> match the beginning and end of <em>each line</em> in the input.</p>\n<p>One last thing is that in .NET regex, you <em>CAN</em> actually get all the intermediate captures made by a repeated capturing group. In most flavors, you can't: all intermediate captures are lost and you only get to keep the last.</p>\n<h3>Related questions</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3202120/method-matches-not-work-well\">(Java) method matches not work well</a> - with examples on how to do prefix/suffix/infix matching</li>\n<li><a href=\"https://stackoverflow.com/questions/3029127/is-there-a-regex-flavor-that-allows-me-to-count-the-number-of-repetitions-matched/\">Is there a regex flavor that allows me to count the number of repetitions matched by <code>*</code> and <code>+</code></a> (.NET!)</li>\n</ul>\n<hr />\n<h3>Bonus material: Using regex to find power of twos!!!</h3>\n<p>With very slight modification, you can use the same techniques presented here to find power of twos.</p>\n<p>Here's the basic mathematical property that you want to take advantage of:</p>\n<ul>\n<li>1 = 1</li>\n<li>2 = (1) + 1</li>\n<li>4 = (1+2) + 1</li>\n<li>8 = (1+2+4) + 1</li>\n<li>16 = (1+2+4+8) + 1</li>\n<li>32 = (1+2+4+8+16) + 1</li>\n</ul>\n<p>The solution is given below (but do try to solve it yourself first!!!!)</p>\n<blockquote class=\"spoiler\">\n<p> (see on ideone.com in <a href=\"http://ideone.com/tBrKd\" rel=\"nofollow noreferrer\">PHP</a>, <a href=\"http://ideone.com/kFCN3\" rel=\"nofollow noreferrer\">Java</a>, and <a href=\"http://ideone.com/YMGz4\" rel=\"nofollow noreferrer\">C#</a>):\n\n <code>^(\\1\\1|^.)*.$</code></p>\n</blockquote>\n"}],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2731,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":3627686,"answer_count":1,"score":44,"last_activity_date":1694180603,"creation_date":1283435013,"question_id":3627681,"body_markdown":"&gt; &lt;sub&gt;_Part of a series of educational regex articles, this is a gentle introduction to the concept of nested references._&lt;/sub&gt;\r\n\r\nThe first few [triangular numbers](http://en.wikipedia.org/wiki/Triangular_number) are:\r\n\r\n     1 = 1\r\n     3 = 1 + 2\r\n     6 = 1 + 2 + 3\r\n    10 = 1 + 2 + 3 + 4\r\n    15 = 1 + 2 + 3 + 4 + 5\r\n\r\nThere are many ways to check if a number is triangular. There&#39;s this interesting technique that uses regular expressions as follows:\r\n\r\n* Given _n_, we first create a string of length _n_ filled with the same character\r\n* We then match this string against the pattern `^(\\1.|^.)+$`\r\n   * _n_ is triangular if and only if this pattern matches the string\r\n\r\nHere are some snippets to show that this works in several languages:\r\n\r\n### [PHP (on ideone.com)](http://ideone.com/KoS1a)&lt;/sub&gt;\r\n\r\n    $r = &#39;/^(\\1.|^.)+$/&#39;;\r\n     \r\n    foreach (range(0,50) as $n) {\r\n      if (preg_match($r, str_repeat(&#39;o&#39;, $n))) {\r\n         print(&quot;$n &quot;);\r\n      }\r\n    }\r\n\r\n### [Java (on ideone.com)](http://ideone.com/8FxQW)\r\n\r\n    for (int n = 0; n &lt;= 50; n++) {\r\n        String s = new String(new char[n]);\r\n        if (s.matches(&quot;(\\\\1.|^.)+&quot;)) {\r\n            System.out.print(n + &quot; &quot;);\r\n        }\r\n    }\r\n\r\n### [C# (on ideone.com)](http://ideone.com/L61sT)\r\n\r\n    Regex r = new Regex(@&quot;^(\\1.|^.)+$&quot;);\r\n     \r\n    for (int n = 0; n &lt;= 50; n++) {\r\n        if (r.IsMatch(&quot;&quot;.PadLeft(n))) {\r\n           Console.Write(&quot;{0} &quot;, n);\r\n        }\r\n    }\r\n\r\nSo this regex seems to work, but can someone explain how?\r\n\r\n### Similar questions\r\n\r\n* [How to determine if a number is a prime with regex?](https://stackoverflow.com/questions/2795065/how-to-determine-if-a-number-is-a-prime-with-regex)","title":"How does this regex find triangular numbers?","body":"<blockquote>\n  <p><sub><em>Part of a series of educational regex articles, this is a gentle introduction to the concept of nested references.</em></sub></p>\n</blockquote>\n\n<p>The first few <a href=\"http://en.wikipedia.org/wiki/Triangular_number\" rel=\"nofollow noreferrer\">triangular numbers</a> are:</p>\n\n<pre><code> 1 = 1\n 3 = 1 + 2\n 6 = 1 + 2 + 3\n10 = 1 + 2 + 3 + 4\n15 = 1 + 2 + 3 + 4 + 5\n</code></pre>\n\n<p>There are many ways to check if a number is triangular. There's this interesting technique that uses regular expressions as follows:</p>\n\n<ul>\n<li>Given <em>n</em>, we first create a string of length <em>n</em> filled with the same character</li>\n<li>We then match this string against the pattern <code>^(\\1.|^.)+$</code>\n\n<ul>\n<li><em>n</em> is triangular if and only if this pattern matches the string</li>\n</ul></li>\n</ul>\n\n<p>Here are some snippets to show that this works in several languages:</p>\n\n<h3><a href=\"http://ideone.com/KoS1a\" rel=\"nofollow noreferrer\">PHP (on ideone.com)</a></h3>\n\n<pre><code>$r = '/^(\\1.|^.)+$/';\n\nforeach (range(0,50) as $n) {\n  if (preg_match($r, str_repeat('o', $n))) {\n     print(\"$n \");\n  }\n}\n</code></pre>\n\n<h3><a href=\"http://ideone.com/8FxQW\" rel=\"nofollow noreferrer\">Java (on ideone.com)</a></h3>\n\n<pre><code>for (int n = 0; n &lt;= 50; n++) {\n    String s = new String(new char[n]);\n    if (s.matches(\"(\\\\1.|^.)+\")) {\n        System.out.print(n + \" \");\n    }\n}\n</code></pre>\n\n<h3><a href=\"http://ideone.com/L61sT\" rel=\"nofollow noreferrer\">C# (on ideone.com)</a></h3>\n\n<pre><code>Regex r = new Regex(@\"^(\\1.|^.)+$\");\n\nfor (int n = 0; n &lt;= 50; n++) {\n    if (r.IsMatch(\"\".PadLeft(n))) {\n       Console.Write(\"{0} \", n);\n    }\n}\n</code></pre>\n\n<p>So this regex seems to work, but can someone explain how?</p>\n\n<h3>Similar questions</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2795065/how-to-determine-if-a-number-is-a-prime-with-regex\">How to determine if a number is a prime with regex?</a></li>\n</ul>\n"},{"tags":["java","openapi"],"owner":{"account_id":303781,"reputation":3824,"user_id":612925,"accept_rate":67,"display_name":"tomasz-mer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694180252,"creation_date":1694180252,"question_id":77067397,"body_markdown":"Problem:\r\nI would like to have schemas for implementations of interfaces without adding @Schema annotation on interface due to number of interfaces in existing system.\r\n\r\nExample:\r\n\r\n    @Schema( oneOf = { ResultOne.class, ResultTwo.class } )\r\n    public interface Result\r\n\r\nGives me:\r\n\r\n    components: class Components {\r\n            schemas: {Result=class ComposedSchema {\r\n                class Schema {\r\n                    ...\r\n                }\r\n                allOf: null\r\n                anyOf: null\r\n                oneOf: [class Schema {\r\n                    type: null\r\n                    format: null\r\n                    $ref: #/components/schemas/ResultOne\r\n                    ...\r\n                }, class Schema {\r\n                    type: null\r\n                    format: null\r\n                    $ref: #/components/schemas/ResultTwo\r\n                    ...\r\n                }]\r\n            }, ResultOne=class Schema {\r\n    \t\t\t...\r\n            }, ResultTwo=class Schema {\r\n    \t\t\t...\r\n            }}\r\n    }\r\n\r\nDoes anyone know how to tell to OpenAPI that should generate schemas for implementations in such way programmatically? Without adding annotation to intefaces?\r\n","title":"OpenAPI to generate schemas for implementations whitout adding @Schema annotation on interface","body":"<p>Problem:\nI would like to have schemas for implementations of interfaces without adding @Schema annotation on interface due to number of interfaces in existing system.</p>\n<p>Example:</p>\n<pre><code>@Schema( oneOf = { ResultOne.class, ResultTwo.class } )\npublic interface Result\n</code></pre>\n<p>Gives me:</p>\n<pre><code>components: class Components {\n        schemas: {Result=class ComposedSchema {\n            class Schema {\n                ...\n            }\n            allOf: null\n            anyOf: null\n            oneOf: [class Schema {\n                type: null\n                format: null\n                $ref: #/components/schemas/ResultOne\n                ...\n            }, class Schema {\n                type: null\n                format: null\n                $ref: #/components/schemas/ResultTwo\n                ...\n            }]\n        }, ResultOne=class Schema {\n            ...\n        }, ResultTwo=class Schema {\n            ...\n        }}\n}\n</code></pre>\n<p>Does anyone know how to tell to OpenAPI that should generate schemas for implementations in such way programmatically? Without adding annotation to intefaces?</p>\n"},{"tags":["java","android","android-studio","exception"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1694178862,"post_id":77067206,"comment_id":135861100,"body_markdown":"As you can see, your `MainActivity` methods aren&#39;t even mentioned in the stack trace. So the exception is thrown in another thread.","body":"As you can see, your <code>MainActivity</code> methods aren&#39;t even mentioned in the stack trace. So the exception is thrown in another thread."}],"answers":[{"tags":[],"owner":{"display_name":"user22475952"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694180155,"creation_date":1694180155,"answer_id":77067381,"question_id":77067206,"body_markdown":"Because the code you have inside the try blocks doesn&#39;t truly throw exceptions that can be caught, the try-catch blocks in your program are unlikely to capture any exceptions.\r\n\r\nThere is no checked exception that the Android startActivity function throws that you can catch using a try-catch block. It may instead throw runtime exceptions, such as ActivityNotFoundException or SecurityException, which are not have to be explicitly caught.\r\n\r\nYou can take the following actions to deal with exceptions that arise when initiating an activity:\r\n\r\n    try {\r\n        Intent intent = new Intent(this, SecondActivity.class);\r\n        startActivity(intent);\r\n    } catch (ActivityNotFoundException e) {\r\n        // Handle the case where the activity is not found\r\n        e.printStackTrace();\r\n    } catch (SecurityException e) {\r\n        // Handle the security exception\r\n        e.printStackTrace();\r\n    } catch (Exception e) {\r\n        // Handle any other exceptions\r\n        e.printStackTrace();\r\n    }\r\n\r\nHowever, it&#39;s usually preferable to design your code so that control flow is not dependent on catching exceptions. Instead, before invoking the method, you can use conditional statements to look for circumstances that could cause an exception. Your code becomes more resilient and comprehensible as a result.\r\n\r\nIn your particular situation, you can use an if statement to check the condition before calling startActivity if you wish to prevent initiating the SecondActivity when a specific condition is satisfied.","title":"Why catch statement doesn&#39;t catch the error?","body":"<p>Because the code you have inside the try blocks doesn't truly throw exceptions that can be caught, the try-catch blocks in your program are unlikely to capture any exceptions.</p>\n<p>There is no checked exception that the Android startActivity function throws that you can catch using a try-catch block. It may instead throw runtime exceptions, such as ActivityNotFoundException or SecurityException, which are not have to be explicitly caught.</p>\n<p>You can take the following actions to deal with exceptions that arise when initiating an activity:</p>\n<pre><code>try {\n    Intent intent = new Intent(this, SecondActivity.class);\n    startActivity(intent);\n} catch (ActivityNotFoundException e) {\n    // Handle the case where the activity is not found\n    e.printStackTrace();\n} catch (SecurityException e) {\n    // Handle the security exception\n    e.printStackTrace();\n} catch (Exception e) {\n    // Handle any other exceptions\n    e.printStackTrace();\n}\n</code></pre>\n<p>However, it's usually preferable to design your code so that control flow is not dependent on catching exceptions. Instead, before invoking the method, you can use conditional statements to look for circumstances that could cause an exception. Your code becomes more resilient and comprehensible as a result.</p>\n<p>In your particular situation, you can use an if statement to check the condition before calling startActivity if you wish to prevent initiating the SecondActivity when a specific condition is satisfied.</p>\n"}],"owner":{"account_id":27469504,"reputation":23,"user_id":20958695,"display_name":"user20958695"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77067381,"answer_count":1,"score":0,"last_activity_date":1694180155,"creation_date":1694178737,"question_id":77067206,"body_markdown":"For some reason the catch statement doesn&#39;t catch the error in my project.\r\n\r\nI have created a mini project to reproduce the error: It has two activities and it switches between them with `startActivity()` and `finish()` respectively.\r\n\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        static int counter = 0;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            try {\r\n                System.out.println(counter);\r\n                Intent intent = new Intent(this, SecondActivity.class);\r\n                startActivity(intent);\r\n            } catch (Throwable e) {\r\n                System.out.println(&quot;Error&quot;);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onPostResume() {\r\n            super.onPostResume();\r\n            if (counter++ &lt; 100) {\r\n                try {\r\n                    System.out.println(counter);\r\n                    Intent intent = new Intent(this, SecondActivity.class);\r\n                    startActivity(intent);\r\n                } catch (Throwable e) {\r\n                    System.out.println(&quot;Error&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public class SecondActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_second);\r\n            finish();\r\n        }\r\n    }\r\n\r\nAlthough everything is surrounded in try-catch statements and I&#39;m aiming to catch the highest type possible it doesn&#39;t catch it.\r\n\r\nThis is the stack trace:\r\n\r\n    E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.example.myapplication, PID: 22538\r\n        java.lang.IllegalArgumentException: Activity client record must not be null to execute transaction item: TopResumedActivityChangeItem{onTop=true}\r\n            at android.app.servertransaction.ActivityTransactionItem.getActivityClientRecord(ActivityTransactionItem.java:66)\r\n            at android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:43)\r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2308)\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)\r\n            at android.os.Looper.loopOnce(Looper.java:201)\r\n            at android.os.Looper.loop(Looper.java:288)\r\n            at android.app.ActivityThread.main(ActivityThread.java:7898)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\r\n\r\n\r\nAny idea of why this can&#39;t be caught and how to avoid the crash? \r\n\r\nNot the original question but any general idea of how to fix this crash (so it won&#39;t need to be caught in the first place) will also be helpful, as I couldn&#39;t find any solution that worked. The error happens on a specific device I used for the Android Studio emulator: &#39;Nexus 6&#39; with API 33. I didn&#39;t encounter this issue in the few other devices I used in the emulator. The error eccurs usually around the 50&#39;th time `startActivity()` is called, but it seems completely random somewhere between 1 and 100 calls.","title":"Why catch statement doesn&#39;t catch the error?","body":"<p>For some reason the catch statement doesn't catch the error in my project.</p>\n<p>I have created a mini project to reproduce the error: It has two activities and it switches between them with <code>startActivity()</code> and <code>finish()</code> respectively.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    static int counter = 0;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        try {\n            System.out.println(counter);\n            Intent intent = new Intent(this, SecondActivity.class);\n            startActivity(intent);\n        } catch (Throwable e) {\n            System.out.println(&quot;Error&quot;);\n        }\n    }\n\n    @Override\n    protected void onPostResume() {\n        super.onPostResume();\n        if (counter++ &lt; 100) {\n            try {\n                System.out.println(counter);\n                Intent intent = new Intent(this, SecondActivity.class);\n                startActivity(intent);\n            } catch (Throwable e) {\n                System.out.println(&quot;Error&quot;);\n            }\n        }\n    }\n}\n\npublic class SecondActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_second);\n        finish();\n    }\n}\n</code></pre>\n<p>Although everything is surrounded in try-catch statements and I'm aiming to catch the highest type possible it doesn't catch it.</p>\n<p>This is the stack trace:</p>\n<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.myapplication, PID: 22538\n    java.lang.IllegalArgumentException: Activity client record must not be null to execute transaction item: TopResumedActivityChangeItem{onTop=true}\n        at android.app.servertransaction.ActivityTransactionItem.getActivityClientRecord(ActivityTransactionItem.java:66)\n        at android.app.servertransaction.ActivityTransactionItem.execute(ActivityTransactionItem.java:43)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2308)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:201)\n        at android.os.Looper.loop(Looper.java:288)\n        at android.app.ActivityThread.main(ActivityThread.java:7898)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\n</code></pre>\n<p>Any idea of why this can't be caught and how to avoid the crash?</p>\n<p>Not the original question but any general idea of how to fix this crash (so it won't need to be caught in the first place) will also be helpful, as I couldn't find any solution that worked. The error happens on a specific device I used for the Android Studio emulator: 'Nexus 6' with API 33. I didn't encounter this issue in the few other devices I used in the emulator. The error eccurs usually around the 50'th time <code>startActivity()</code> is called, but it seems completely random somewhere between 1 and 100 calls.</p>\n"},{"tags":["java","android","flutter","gradle"],"answers":[{"tags":[],"owner":{"account_id":7130379,"reputation":1308,"user_id":5451849,"display_name":"Dharam Budh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694179931,"creation_date":1694179931,"answer_id":77067350,"question_id":77067168,"body_markdown":"Open android -&gt; app -&gt; src -&gt; main -&gt; `AndroidManifest.xml`.\r\n\r\nReplace\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\nWith\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;mysite.com.myproject&quot;&gt;","title":"Android getting Namespace not specified error. when i try to upgrade Gralde version of project","body":"<p>Open android -&gt; app -&gt; src -&gt; main -&gt; <code>AndroidManifest.xml</code>.</p>\n<p>Replace</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n</code></pre>\n<p>With</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;mysite.com.myproject&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":1158163,"reputation":16333,"user_id":1830228,"accept_rate":55,"display_name":"DolDurma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694179931,"creation_date":1694178436,"question_id":77067168,"body_markdown":"When I want to upgrade the Android project to a higher Gradle version, I receive this error during compilation:\r\n\r\n```\r\nNamespace not specified. Please specify a namespace in the module&#39;s build.gradle file like so:\r\n\r\nandroid {\r\n    namespace &#39;com.example.namespace&#39;\r\n}\r\n```\r\n\r\nMy confusion is that the namespace in the build.gradle file has already been defined, and it gives this error when upgrading to a higher version.\r\n\r\nThe content of the build.gradle file:\r\n\r\n```xml\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:name=&quot;${applicationName}&quot;\r\n        android:icon=&quot;@mipmap/launcher_icon&quot;\r\n        android:label=&quot;xxxxxx&quot;&gt;\r\n        &lt;activity\r\n            ...\r\n            \r\n        &lt;/activity&gt;\r\n        \r\n        &lt;meta-data\r\n            android:name=&quot;flutterEmbedding&quot;\r\n            android:value=&quot;2&quot; /&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\n\r\n`build.gradle`\r\n```gradle\r\n...\r\nandroid {\r\n    namespace &quot;mysite.com.myproject&quot;\r\n    compileSdkVersion flutter.compileSdkVersion\r\n    ndkVersion flutter.ndkVersion\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_11\r\n        targetCompatibility JavaVersion.VERSION_11\r\n    }\r\n\r\n    ...\r\n    defaultConfig {\r\n        applicationId &quot;mysite.com.myproject&quot;\r\n        minSdkVersion 21\r\n        targetSdkVersion flutter.targetSdkVersion\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            signingConfig signingConfigs.debug\r\n        }\r\n    }\r\n}\r\n\r\nflutter {\r\n    source &#39;../..&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n}\r\n```\r\n\r\nSections defined for the buildscript:\r\n\r\n```gradle\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.9.0&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:8.0.2&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\n```\r\n\r\nAnd finally, the distributionUrl section:\r\n\r\n```\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-all.zip\r\n```","title":"Android getting Namespace not specified error. when i try to upgrade Gralde version of project","body":"<p>When I want to upgrade the Android project to a higher Gradle version, I receive this error during compilation:</p>\n<pre><code>Namespace not specified. Please specify a namespace in the module's build.gradle file like so:\n\nandroid {\n    namespace 'com.example.namespace'\n}\n</code></pre>\n<p>My confusion is that the namespace in the build.gradle file has already been defined, and it gives this error when upgrading to a higher version.</p>\n<p>The content of the build.gradle file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n\n    &lt;application\n        android:name=&quot;${applicationName}&quot;\n        android:icon=&quot;@mipmap/launcher_icon&quot;\n        android:label=&quot;xxxxxx&quot;&gt;\n        &lt;activity\n            ...\n            \n        &lt;/activity&gt;\n        \n        &lt;meta-data\n            android:name=&quot;flutterEmbedding&quot;\n            android:value=&quot;2&quot; /&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p><code>build.gradle</code></p>\n<pre><code>...\nandroid {\n    namespace &quot;mysite.com.myproject&quot;\n    compileSdkVersion flutter.compileSdkVersion\n    ndkVersion flutter.ndkVersion\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n\n    ...\n    defaultConfig {\n        applicationId &quot;mysite.com.myproject&quot;\n        minSdkVersion 21\n        targetSdkVersion flutter.targetSdkVersion\n        versionCode flutterVersionCode.toInteger()\n        versionName flutterVersionName\n    }\n\n    buildTypes {\n        release {\n            signingConfig signingConfigs.debug\n        }\n    }\n}\n\nflutter {\n    source '../..'\n}\n\ndependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n}\n</code></pre>\n<p>Sections defined for the buildscript:</p>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.9.0'\n    repositories {\n        google()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath 'com.android.tools.build:gradle:8.0.2'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n</code></pre>\n<p>And finally, the distributionUrl section:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-all.zip\n</code></pre>\n"},{"tags":["java","azure","azure-functions","inversion-of-control"],"comments":[{"owner":{"account_id":1398831,"reputation":17713,"user_id":1384539,"accept_rate":62,"display_name":"Thiago Custodio"},"score":0,"creation_date":1583421524,"post_id":60548438,"comment_id":107118209,"body_markdown":"I am not 100%, but I believe that at this moment there&#39;s no support for DI when writing your Azure Functions with Java (https://github.com/Azure/azure-functions-java-worker/issues/324)","body":"I am not 100%, but I believe that at this moment there&#39;s no support for DI when writing your Azure Functions with Java (<a href=\"https://github.com/Azure/azure-functions-java-worker/issues/324\" rel=\"nofollow noreferrer\">github.com/Azure/azure-functions-java-worker/issues/324</a>)"}],"answers":[{"tags":[],"owner":{"account_id":13151600,"reputation":130,"user_id":9500065,"display_name":"Helay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604361299,"creation_date":1604361299,"answer_id":64654935,"question_id":60548438,"body_markdown":"For now, you can use Spring Framework to use Azure Function for HTTP requests only (not the bindings.\r\n\r\n[Here][1] is a sample on how to use it \r\n\r\n\r\nI know there is a work in progress now to support Dependency injection for Azure Function [enter link description here][2]\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/samples/azure-samples/hello-spring-function-azure/hello-spring-function-azure/\r\n  [2]: https://github.com/Azure/azure-functions-java-worker/issues/324#issuecomment-719662979","title":"Dependency Injection (IoC) in JAVA + Azure Functions","body":"<p>For now, you can use Spring Framework to use Azure Function for HTTP requests only (not the bindings.</p>\n<p><a href=\"https://learn.microsoft.com/en-us/samples/azure-samples/hello-spring-function-azure/hello-spring-function-azure/\" rel=\"nofollow noreferrer\">Here</a> is a sample on how to use it</p>\n<p>I know there is a work in progress now to support Dependency injection for Azure Function <a href=\"https://github.com/Azure/azure-functions-java-worker/issues/324#issuecomment-719662979\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n"},{"tags":[],"owner":{"account_id":1180794,"reputation":791,"user_id":1155759,"display_name":"Osmund Francis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694179836,"creation_date":1694179836,"answer_id":77067342,"question_id":60548438,"body_markdown":"The Java Developer reference for Azure Functions (\r\nhttps://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-java) now includes information, and an example for Guice and Dagger.\r\n\r\nExample: https://github.com/Azure/azure-functions-java-worker/tree/dev/samples/dependency-injection-example","title":"Dependency Injection (IoC) in JAVA + Azure Functions","body":"<p>The Java Developer reference for Azure Functions (\n<a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-java\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-java</a>) now includes information, and an example for Guice and Dagger.</p>\n<p>Example: <a href=\"https://github.com/Azure/azure-functions-java-worker/tree/dev/samples/dependency-injection-example\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-functions-java-worker/tree/dev/samples/dependency-injection-example</a></p>\n"}],"owner":{"account_id":4150940,"reputation":241,"user_id":3403420,"display_name":"radoslaw.jarzynka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1812,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694179836,"creation_date":1583420990,"question_id":60548438,"body_markdown":"I am using an Azure Function written in Java to retrieve the data from REST API and insert it into the mongo database.\r\nI&#39;m trying to separate the app into different layers like I usually do for web applications - for now I&#39;ve only extracted the repository that stores the data in mongo into a separate class, so my function class looks like this (I&#39;ve omitted triggers, error handlings etc)\r\n\r\n    public class SensorFunctions {\r\n\r\n\t\t@FunctionName(&quot;saveSensors&quot;)\r\n\t\tpublic void saveSensors(\r\n\t\t\tfinal ExecutionContext context) {\r\n\t\t\tSensorRepository sensorRepository = new SensorRepository();\r\n\t\t\tnew SensorAPI().retrieveSensors()\r\n\t\t\t\t.forEach(sensorRepository::saveSensor);\r\n\t\t}\r\n\t}\r\n\r\nI&#39;d prefer to use some king of IoC mechanism, so I don&#39;t have to instantiate repostiory and other classes by myself but I can do something like \r\n\r\n    public class SensorFunctions {\r\n\t\t@Inject\r\n\t\tSensorRepository sensorRepository;\r\n\r\n\t\t@Inject\r\n\t\tSensorAPI sensorAPI;\r\n\r\n\t\t@FunctionName(&quot;saveSensors&quot;)\r\n\t\tpublic void saveSensors(\r\n\t\t\tfinal ExecutionContext context) {\r\n\t\t\tsensorAPI.retrieveSensors()\r\n\t\t\t\t.forEach(sensorRepository::saveSensor);\r\n\t\t}\r\n\t}\r\n\r\nIs it possible with Azure functions? Is so, is it possible to create an automatic configuration or do I need to trigger the configuration of the IoC container manually at the beginning of each function (I will have multiple functions in a single project).\r\nAs the cost is dependent on the function&#39;s computation time, I&#39;d prefer as lightweight solution as possible","title":"Dependency Injection (IoC) in JAVA + Azure Functions","body":"<p>I am using an Azure Function written in Java to retrieve the data from REST API and insert it into the mongo database.\nI'm trying to separate the app into different layers like I usually do for web applications - for now I've only extracted the repository that stores the data in mongo into a separate class, so my function class looks like this (I've omitted triggers, error handlings etc)</p>\n\n<pre><code>public class SensorFunctions {\n\n    @FunctionName(\"saveSensors\")\n    public void saveSensors(\n        final ExecutionContext context) {\n        SensorRepository sensorRepository = new SensorRepository();\n        new SensorAPI().retrieveSensors()\n            .forEach(sensorRepository::saveSensor);\n    }\n}\n</code></pre>\n\n<p>I'd prefer to use some king of IoC mechanism, so I don't have to instantiate repostiory and other classes by myself but I can do something like </p>\n\n<pre><code>public class SensorFunctions {\n    @Inject\n    SensorRepository sensorRepository;\n\n    @Inject\n    SensorAPI sensorAPI;\n\n    @FunctionName(\"saveSensors\")\n    public void saveSensors(\n        final ExecutionContext context) {\n        sensorAPI.retrieveSensors()\n            .forEach(sensorRepository::saveSensor);\n    }\n}\n</code></pre>\n\n<p>Is it possible with Azure functions? Is so, is it possible to create an automatic configuration or do I need to trigger the configuration of the IoC container manually at the beginning of each function (I will have multiple functions in a single project).\nAs the cost is dependent on the function's computation time, I'd prefer as lightweight solution as possible</p>\n"},{"tags":["java","swing","progress-bar","swingworker","jprogressbar"],"comments":[{"owner":{"account_id":450119,"reputation":2794,"user_id":845279,"accept_rate":88,"display_name":"user845279"},"score":0,"creation_date":1336104409,"post_id":10442406,"comment_id":13481272,"body_markdown":"You should take a look at http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html even though it seems complicated. What you need to do is run the download in another thread (backgroundworker). Then the main (gui) thread does the progressBar animation. The way you are doing it is actually the other way around.","body":"You should take a look at <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/&hellip;</a> even though it seems complicated. What you need to do is run the download in another thread (backgroundworker). Then the main (gui) thread does the progressBar animation. The way you are doing it is actually the other way around."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1336106362,"post_id":10442406,"comment_id":13481614,"body_markdown":"Please see **Edit 2** to my answer to crrect some problems.","body":"Please see <b>Edit 2</b> to my answer to crrect some problems."}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1336106347,"creation_date":1336103299,"answer_id":10442437,"question_id":10442406,"body_markdown":"Your current code shows no creation of a background thread, but rather it shows you trying to queue code on the Swing thread ***from within*** the Swing thread which doesn&#39;t make sense for this problem (although there are occasional times when you may want to do this, but again, not here). The only way for this to succeed is to use a background thread. The standard Oracle [JProgressBar tutorial](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html) and [Concurrency in Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) goes through all of this. \r\n\r\nThe basic thing is that you must update the JProgressBar from the Swing Thread will doing your long-running process in the background thread, such as that provided by a SwingWorker object. There are too many details for us to review all here, and so all I can do is provide a link, but we&#39;ll be happy to help you understand the details once you review the tutorials. Just check the tutorials and come on back with your specific questions if you&#39;re still stuck.\r\n\r\n**Edit 1**  \r\nYou state:  \r\n&gt; can I just create a new thread object within the buttonClicked() function? \r\n\r\nYes, you can create a SwingWorker object inside of the `buttonClicked()` *method* and execute it there. \r\n\r\n&gt; The thing is I have my API and library of all the functionality that I&#39;m developing the GUI to, and it seems like a longwinded workaround to wrap that function call in a thread.\r\n\r\nSorry, but I have no idea what you&#39;re saying here or what issues you think threading will cause. The `buttonClicked()` method likely *must* run on the EDT and not in a background thread. \r\n\r\nAlso note that in most of my more complex Swing GUI&#39;s, I often do my file downloading in a different (model) object and create my SwingWorker in a different object still (control) from the GUI object (the view). It may seem more complicated to do it this way, but it&#39;s a ***lot*** easier to debug, maintain and enhance my program when I do it this way, especially when I heavily use interfaces to allow me to test all program components in isolation.\r\n\r\n**Edit 2**  \r\nSome corrections to your solution post. You posted:\r\n\r\n    public void buttonClicked() {\r\n      class MyWorker extends SwingWorker(String, Object) {\r\n         protected String runInBackground() {\r\n           progressBar.setVisible(true);\r\n           progressBar.setIndeterminate(true);\r\n    \r\n           // ...\r\n\r\nwhich has problems \r\n\r\n* it&#39;s `doInBackground()`, not `runInBackground()`\r\n* but more importantly, you&#39;re making Swing calls from within a background thread, something that should never be done (unless the call is thread safe, and even then...).\r\n\r\nSo change it:\r\n\r\n    public void buttonClicked() {\r\n      progressBar.setVisible(true);\r\n      progressBar.setIndeterminate(true);\r\n      class MyWorker extends SwingWorker&lt;String, Void&gt; {\r\n         protected String doInBackground() {\r\n    \r\n           // ...","title":"Basic Indeterminate JProgress Bar Usage","body":"<p>Your current code shows no creation of a background thread, but rather it shows you trying to queue code on the Swing thread <strong><em>from within</em></strong> the Swing thread which doesn't make sense for this problem (although there are occasional times when you may want to do this, but again, not here). The only way for this to succeed is to use a background thread. The standard Oracle <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html\">JProgressBar tutorial</a> and <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\">Concurrency in Swing</a> goes through all of this. </p>\n\n<p>The basic thing is that you must update the JProgressBar from the Swing Thread will doing your long-running process in the background thread, such as that provided by a SwingWorker object. There are too many details for us to review all here, and so all I can do is provide a link, but we'll be happy to help you understand the details once you review the tutorials. Just check the tutorials and come on back with your specific questions if you're still stuck.</p>\n\n<p><strong>Edit 1</strong><br>\nYou state:  </p>\n\n<blockquote>\n  <p>can I just create a new thread object within the buttonClicked() function? </p>\n</blockquote>\n\n<p>Yes, you can create a SwingWorker object inside of the <code>buttonClicked()</code> <em>method</em> and execute it there. </p>\n\n<blockquote>\n  <p>The thing is I have my API and library of all the functionality that I'm developing the GUI to, and it seems like a longwinded workaround to wrap that function call in a thread.</p>\n</blockquote>\n\n<p>Sorry, but I have no idea what you're saying here or what issues you think threading will cause. The <code>buttonClicked()</code> method likely <em>must</em> run on the EDT and not in a background thread. </p>\n\n<p>Also note that in most of my more complex Swing GUI's, I often do my file downloading in a different (model) object and create my SwingWorker in a different object still (control) from the GUI object (the view). It may seem more complicated to do it this way, but it's a <strong><em>lot</em></strong> easier to debug, maintain and enhance my program when I do it this way, especially when I heavily use interfaces to allow me to test all program components in isolation.</p>\n\n<p><strong>Edit 2</strong><br>\nSome corrections to your solution post. You posted:</p>\n\n<pre><code>public void buttonClicked() {\n  class MyWorker extends SwingWorker(String, Object) {\n     protected String runInBackground() {\n       progressBar.setVisible(true);\n       progressBar.setIndeterminate(true);\n\n       // ...\n</code></pre>\n\n<p>which has problems </p>\n\n<ul>\n<li>it's <code>doInBackground()</code>, not <code>runInBackground()</code></li>\n<li>but more importantly, you're making Swing calls from within a background thread, something that should never be done (unless the call is thread safe, and even then...).</li>\n</ul>\n\n<p>So change it:</p>\n\n<pre><code>public void buttonClicked() {\n  progressBar.setVisible(true);\n  progressBar.setIndeterminate(true);\n  class MyWorker extends SwingWorker&lt;String, Void&gt; {\n     protected String doInBackground() {\n\n       // ...\n</code></pre>\n"}],"owner":{"account_id":525345,"reputation":2339,"user_id":927604,"accept_rate":76,"display_name":"Bill"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19784,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":10442437,"answer_count":1,"score":6,"last_activity_date":1694179799,"creation_date":1336102968,"question_id":10442406,"body_markdown":"I simply want to have an indeterminate JProgressBar animate in the bottom left corner of my frame when a long download is being done.\r\n\r\nI&#39;ve looked through many tutorials, none of which are clear to me. I simply want to have it animate while the file is being downloaded in the background. Each way I&#39;ve tried this, it doesn&#39;t animate the progress bar until *after* the download is done.\r\n\r\nI need help knowing where to place my download() call.\r\n\r\n    class MyFunClass extends JFrame {\r\n      JProgressBar progressBar = new JProgressBar();\r\n    \r\n      public void buttonClicked() {\r\n        progressBar.setVisible(true);      \r\n        progressBar.setIndeterminate(true);\r\n    \r\n        SwingUtilities.invokeLater(new Runnable() {\r\n          public void run() {\r\n            progressBar.setIndeterminate(true);\r\n            progressBar.setVisible(true);\r\n    \r\n            // Do I do my download() in here??\r\n    \r\n        }});\r\n    \r\n        // Do download() here???\r\n        progressBar.setVisible(false);\r\n      }\r\n    }\r\n\r\nThanks in advance!\r\n\r\n\r\n----------\r\n&lt;br /&gt;\r\nSolution\r\n========\r\n\r\n*Edit:* For those who have a similar issue to me in the future, this is the basic solution for a basic problem. This isn&#39;t my code verbatim, but a general sketch. Inside `buttonClicked()`:\r\n\r\n    public void buttonClicked() {\r\n      class MyWorker extends SwingWorker(String, Object) {\r\n         protected String doInBackground() {\r\n           progressBar.setVisible(true);      &lt;-- should be on the EDT\r\n           progressBar.setIndeterminate(true);&lt;-- should be on the EDT\r\n    \r\n           // Do my downloading code\r\n           return &quot;Done.&quot;\r\n         }\r\n    \r\n         protected void done() {\r\n            progressBar.setVisible(false)\r\n         }\r\n      }\r\n\r\n      new MyWorker().execute();\r\n    \r\n    }","title":"Basic Indeterminate JProgress Bar Usage","body":"<p>I simply want to have an indeterminate JProgressBar animate in the bottom left corner of my frame when a long download is being done.</p>\n<p>I've looked through many tutorials, none of which are clear to me. I simply want to have it animate while the file is being downloaded in the background. Each way I've tried this, it doesn't animate the progress bar until <em>after</em> the download is done.</p>\n<p>I need help knowing where to place my download() call.</p>\n<pre><code>class MyFunClass extends JFrame {\n  JProgressBar progressBar = new JProgressBar();\n\n  public void buttonClicked() {\n    progressBar.setVisible(true);      \n    progressBar.setIndeterminate(true);\n\n    SwingUtilities.invokeLater(new Runnable() {\n      public void run() {\n        progressBar.setIndeterminate(true);\n        progressBar.setVisible(true);\n\n        // Do I do my download() in here??\n\n    }});\n\n    // Do download() here???\n    progressBar.setVisible(false);\n  }\n}\n</code></pre>\n<p>Thanks in advance!</p>\n<hr />\n<br />\nSolution\n========\n<p><em>Edit:</em> For those who have a similar issue to me in the future, this is the basic solution for a basic problem. This isn't my code verbatim, but a general sketch. Inside <code>buttonClicked()</code>:</p>\n<pre><code>public void buttonClicked() {\n  class MyWorker extends SwingWorker(String, Object) {\n     protected String doInBackground() {\n       progressBar.setVisible(true);      &lt;-- should be on the EDT\n       progressBar.setIndeterminate(true);&lt;-- should be on the EDT\n\n       // Do my downloading code\n       return &quot;Done.&quot;\n     }\n\n     protected void done() {\n        progressBar.setVisible(false)\n     }\n  }\n\n  new MyWorker().execute();\n\n}\n</code></pre>\n"},{"tags":["java","caching","redis","redisson"],"answers":[{"tags":[],"owner":{"account_id":27911097,"reputation":1,"user_id":21313281,"display_name":"PLANESARECOOL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694179431,"creation_date":1694179431,"answer_id":77067297,"question_id":76247304,"body_markdown":"I was also experiencing a problem involving a `RedisTimeoutException` and a solution I found was increasing the `RetryInterval` property of the config object. \r\n\r\nThe default value for this property is 1500 milliseconds, which you have set to 0 here. As per [Redisson Wiki](https://github.com/redisson/redisson/wiki/16.-FAQ), increasing this value may given Redisson a little more time before the operation fails. \r\n\r\nAs I was struggling with the problem in the past, I hope this answer provides you with a little information that will prevent such situations.","title":"Java Redisson Client Redis Exceptions : org.redisson.client.RedisTimeoutException","body":"<p>I was also experiencing a problem involving a <code>RedisTimeoutException</code> and a solution I found was increasing the <code>RetryInterval</code> property of the config object.</p>\n<p>The default value for this property is 1500 milliseconds, which you have set to 0 here. As per <a href=\"https://github.com/redisson/redisson/wiki/16.-FAQ\" rel=\"nofollow noreferrer\">Redisson Wiki</a>, increasing this value may given Redisson a little more time before the operation fails.</p>\n<p>As I was struggling with the problem in the past, I hope this answer provides you with a little information that will prevent such situations.</p>\n"}],"owner":{"account_id":2814933,"reputation":2695,"user_id":2420280,"accept_rate":54,"display_name":"Osama Jetawe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":464,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694179431,"creation_date":1684064647,"question_id":76247304,"body_markdown":"I&#39;m setting up a Redis cache layer using **AWS Elasticache Redis** version **7.0.7**\r\n\r\nI&#39;m usign Java Redisson client version **3.16.0** and java version **1.8**\r\n\r\nHowever one of the requirement is to setup a fallback mechanism to fallback to the downstream service or database method whenever there is any exception on Redis operation\r\n\r\nBelow is my Redisson client configurations\r\n\r\n\r\n    redissonConfig.setNettyThreads(128);\r\n\tredissonConfig.useClusterServers()\r\n\t\t\t.setKeepAlive(true)\r\n\t\t\t.setConnectTimeout(5000)\r\n\t\t\t.setRetryAttempts(0)\r\n\t\t\t.setRetryInterval(0)\r\n\t\t\t.setPingConnectionInterval(10000)\r\n\t\t\t.setDnsMonitoringInterval(20000)\r\n\t\t\t.addNodeAddress(redisAddress);\r\n\tRedissonClient client = Redisson.create(redissonConfig);\r\n\treturn client;\r\n\r\nHowever I&#39;m getting below intermittent exceptions on read/write and on **evict Redis operations**\r\n\r\n1-Read write operation Exceptions:\r\n\r\n   \r\n\r\n    exception: org.redisson.client.RedisTimeoutException: Command still hasn&#39;t been written into connection! Try to increase nettyThreads setting. Payload size in bytes: 52. Node source: NodeSource [slot=8995, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@573846890 [redisClient=[addr=rediss://xxxxx:6379], channel=[id: 0x93e5c3e6, L:/:38098 - R:xxx], currentCommand=null], command: (EVAL), params: [local value = redis.call(&#39;hget&#39;, KEYS[1], ARGV[2]); if value == false then return nil; end; local t,..., 5, data, redisson__timeout__set:{data}, redisson__idle__set:{data}, redisson__map_cache__last_access__set:{data}, {data}:redisson_options, 1684331276823, PooledUnsafeDirectByteBuf(ridx: 0, widx: 52, cap: 256)] after 0 retry attempts\r\n\r\n2- Exceptions when **Redisson** job try to evict the cache, I’m resolving this by doing manual eviction through redis-cli\r\n\r\n    exception: org.redisson.client.RedisException: ERR user_script:1: bad argument #2 to &#39;unpack&#39; (data string too short) script: 401d7fca9b4e9022dffaa4fd236958c2babbc2f3, on @user_script:1.. channel: [id: 0x064bccc5\r\n\r\n\r\nAppreciate if you have any recommendation to prevent such issues.   \r\n\r\n\r\nNote: the fallback mechanism is working as expected.\r\n\r\nThanks\r\n\r\n\r\n\r\n\r\n","title":"Java Redisson Client Redis Exceptions : org.redisson.client.RedisTimeoutException","body":"<p>I'm setting up a Redis cache layer using <strong>AWS Elasticache Redis</strong> version <strong>7.0.7</strong></p>\n<p>I'm usign Java Redisson client version <strong>3.16.0</strong> and java version <strong>1.8</strong></p>\n<p>However one of the requirement is to setup a fallback mechanism to fallback to the downstream service or database method whenever there is any exception on Redis operation</p>\n<p>Below is my Redisson client configurations</p>\n<pre><code>redissonConfig.setNettyThreads(128);\nredissonConfig.useClusterServers()\n        .setKeepAlive(true)\n        .setConnectTimeout(5000)\n        .setRetryAttempts(0)\n        .setRetryInterval(0)\n        .setPingConnectionInterval(10000)\n        .setDnsMonitoringInterval(20000)\n        .addNodeAddress(redisAddress);\nRedissonClient client = Redisson.create(redissonConfig);\nreturn client;\n</code></pre>\n<p>However I'm getting below intermittent exceptions on read/write and on <strong>evict Redis operations</strong></p>\n<p>1-Read write operation Exceptions:</p>\n<pre><code>exception: org.redisson.client.RedisTimeoutException: Command still hasn't been written into connection! Try to increase nettyThreads setting. Payload size in bytes: 52. Node source: NodeSource [slot=8995, addr=null, redisClient=null, redirect=null, entry=null], connection: RedisConnection@573846890 [redisClient=[addr=rediss://xxxxx:6379], channel=[id: 0x93e5c3e6, L:/:38098 - R:xxx], currentCommand=null], command: (EVAL), params: [local value = redis.call('hget', KEYS[1], ARGV[2]); if value == false then return nil; end; local t,..., 5, data, redisson__timeout__set:{data}, redisson__idle__set:{data}, redisson__map_cache__last_access__set:{data}, {data}:redisson_options, 1684331276823, PooledUnsafeDirectByteBuf(ridx: 0, widx: 52, cap: 256)] after 0 retry attempts\n</code></pre>\n<p>2- Exceptions when <strong>Redisson</strong> job try to evict the cache, I’m resolving this by doing manual eviction through redis-cli</p>\n<pre><code>exception: org.redisson.client.RedisException: ERR user_script:1: bad argument #2 to 'unpack' (data string too short) script: 401d7fca9b4e9022dffaa4fd236958c2babbc2f3, on @user_script:1.. channel: [id: 0x064bccc5\n</code></pre>\n<p>Appreciate if you have any recommendation to prevent such issues.</p>\n<p>Note: the fallback mechanism is working as expected.</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot","websocket","asyncapi"],"answers":[{"tags":[],"owner":{"account_id":9148581,"reputation":703,"user_id":6803886,"accept_rate":75,"display_name":"jonaslagoni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694179189,"creation_date":1645517646,"answer_id":71217914,"question_id":71177019,"body_markdown":"That&#39;s because the template does not support anything other than [`Kafka`, `AMQP`, and `MQTT` protocols][1].\r\n\r\nAs of this writing, there does not exist any template for you to generate Java code for the WebSocket protocol.\r\n\r\nIf you want the template to support the protocol, please create a feature request for it.\r\n\r\nOr you could [author your own template][2] if you&#39;d like.\r\n\r\n\r\n  [1]: https://github.com/asyncapi/java-spring-template/blob/ae864fb1a1f1ad47b801caf843947e3caf91550e/package.json#L46\r\n  [2]: https://github.com/asyncapi/generator/blob/master/docs/authoring.md","title":"AsyncAPI Websockets Spring generated code and implementation","body":"<p>That's because the template does not support anything other than <a href=\"https://github.com/asyncapi/java-spring-template/blob/ae864fb1a1f1ad47b801caf843947e3caf91550e/package.json#L46\" rel=\"nofollow noreferrer\"><code>Kafka</code>, <code>AMQP</code>, and <code>MQTT</code> protocols</a>.</p>\n<p>As of this writing, there does not exist any template for you to generate Java code for the WebSocket protocol.</p>\n<p>If you want the template to support the protocol, please create a feature request for it.</p>\n<p>Or you could <a href=\"https://github.com/asyncapi/generator/blob/master/docs/authoring.md\" rel=\"nofollow noreferrer\">author your own template</a> if you'd like.</p>\n"}],"owner":{"account_id":10708241,"reputation":43,"user_id":7881247,"display_name":"nubi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":909,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71217914,"answer_count":1,"score":3,"last_activity_date":1694179189,"creation_date":1645202600,"question_id":71177019,"body_markdown":"I want to generate code from AsyncAPI specification and try out how it works. My goal is to have only 1 socket open for each client and over that connection send/receive different types of messages. I couldnt find any example that would show me how to generate the code and run it.\r\n\r\nHere is the API yaml\r\n```\r\nasyncapi: &#39;2.3.0&#39;\r\ninfo:\r\n  title: demo\r\n  version: &#39;1.0.0&#39;\r\n  description: websocket demo\r\n\r\nservers:\r\n  test:\r\n    url: localhost\r\n    protocol: ws\r\n\r\nchannels:\r\n  data:\r\n    publish:\r\n      operationId: publishData\r\n      message:\r\n        $ref: &#39;#/components/messages/dataMessage&#39;\r\n    subscribe:\r\n      operationId: subscribeData\r\n      message:\r\n        $ref: &#39;#/components/messages/dataMessage&#39;\r\n\r\ncomponents:\r\n  messages:\r\n    dataMessage:\r\n      headers:\r\n        $ref: &quot;#/components/schemas/MessageHeader&quot;\r\n      payload:\r\n        oneOf:\r\n          - $ref: &quot;#/components/schemas/FirstPayloadType&quot;\r\n          - $ref: &quot;#/components/schemas/SecondPayloadType&quot;\r\n\r\n  schemas:\r\n    MessageHeader:\r\n      type: object\r\n      properties:\r\n        messageType:\r\n          enum:\r\n            - a\r\n            - b\r\n            - c\r\n\r\n    FirstPayloadType:\r\n      type: object\r\n      properties:\r\n        x:\r\n          type: string\r\n        y:\r\n          type: number\r\n\r\n    SecondPayloadType:\r\n      type: object\r\n      properties:\r\n        op:\r\n          type: string\r\n        tar:\r\n          type: string\r\n```\r\n\r\nThen i use https://github.com/asyncapi/generator to generate the java code from this yaml with\r\n```\r\nag asyncapi.yaml @asyncapi/java-spring-template\r\n```\r\n\r\nAnd thats where Im stuck, it uses springframework messaging and i dont know how to configure/implement it while using the generated message handler. Or maybe im missing something in the yaml so it doesnt generate properly.","title":"AsyncAPI Websockets Spring generated code and implementation","body":"<p>I want to generate code from AsyncAPI specification and try out how it works. My goal is to have only 1 socket open for each client and over that connection send/receive different types of messages. I couldnt find any example that would show me how to generate the code and run it.</p>\n<p>Here is the API yaml</p>\n<pre><code>asyncapi: '2.3.0'\ninfo:\n  title: demo\n  version: '1.0.0'\n  description: websocket demo\n\nservers:\n  test:\n    url: localhost\n    protocol: ws\n\nchannels:\n  data:\n    publish:\n      operationId: publishData\n      message:\n        $ref: '#/components/messages/dataMessage'\n    subscribe:\n      operationId: subscribeData\n      message:\n        $ref: '#/components/messages/dataMessage'\n\ncomponents:\n  messages:\n    dataMessage:\n      headers:\n        $ref: &quot;#/components/schemas/MessageHeader&quot;\n      payload:\n        oneOf:\n          - $ref: &quot;#/components/schemas/FirstPayloadType&quot;\n          - $ref: &quot;#/components/schemas/SecondPayloadType&quot;\n\n  schemas:\n    MessageHeader:\n      type: object\n      properties:\n        messageType:\n          enum:\n            - a\n            - b\n            - c\n\n    FirstPayloadType:\n      type: object\n      properties:\n        x:\n          type: string\n        y:\n          type: number\n\n    SecondPayloadType:\n      type: object\n      properties:\n        op:\n          type: string\n        tar:\n          type: string\n</code></pre>\n<p>Then i use <a href=\"https://github.com/asyncapi/generator\" rel=\"nofollow noreferrer\">https://github.com/asyncapi/generator</a> to generate the java code from this yaml with</p>\n<pre><code>ag asyncapi.yaml @asyncapi/java-spring-template\n</code></pre>\n<p>And thats where Im stuck, it uses springframework messaging and i dont know how to configure/implement it while using the generated message handler. Or maybe im missing something in the yaml so it doesnt generate properly.</p>\n"},{"tags":["java","maven","variables","command-line"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1694179142,"post_id":77067244,"comment_id":135861175,"body_markdown":"I think you need to put `${build_version}` not `$build_version`","body":"I think you need to put <code>${build_version}</code> not <code>$build_version</code>"},{"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"score":0,"creation_date":1694179244,"post_id":77067244,"comment_id":135861201,"body_markdown":"The same apply for the other properties (eg: `${db_pwd}` not `$db_pwd`).","body":"The same apply for the other properties (eg: <code>${db_pwd}</code> not <code>$db_pwd</code>)."},{"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"score":0,"creation_date":1694179402,"post_id":77067244,"comment_id":135861243,"body_markdown":"@Jorn I think you are correct. Thanks.","body":"@Jorn I think you are correct. Thanks."}],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694179067,"creation_date":1694179067,"question_id":77067244,"body_markdown":"I&#39;m working on a build script to compile a WAR using maven. I want to be able to pass in certain values like the version number from the command line when I run the maven command. After some research I found that you can pass in values using a -D flag. I thought I had it figured out, but something is not quite working. My pom.xml looks like this:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;name&gt;myapp&lt;/name&gt;\r\n    \t&lt;description&gt;This is an app&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t\t&lt;db.password&gt;$db_pwd&lt;/db.password&gt;\r\n    \t\t&lt;email.key&gt;$email_key&lt;/email.key&gt;\r\n    \t\t&lt;modo.api.token&gt;$modo_api_token&lt;/modo.api.token&gt;\r\n    \t\t&lt;modo.auth.shared&gt;$modo_auth_shared&lt;/modo.auth.shared&gt;\r\n    \t\t&lt;build.version&gt;$build_version&lt;/build.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;version&gt;${build.version}&lt;/version&gt;\r\n    ...\r\n\r\nI then execute the compile with the command \r\n\r\n&gt; mvn clean package -Dbuild_version=0.0.2-SNAPSHOT\r\n\r\nFor some reason, the variable replacement doesn&#39;t work. I end up with a WAR file named myapp-$build_version.war instead of myapp-0.0.2-SNAPSHOT.war . I&#39;m not quite sure what I&#39;m doing wrong here. Any suggestions?","title":"Passing in a user-defined variable value for maven from the command lne","body":"<p>I'm working on a build script to compile a WAR using maven. I want to be able to pass in certain values like the version number from the command line when I run the maven command. After some research I found that you can pass in values using a -D flag. I thought I had it figured out, but something is not quite working. My pom.xml looks like this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;myapp&lt;/name&gt;\n    &lt;description&gt;This is an app&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;db.password&gt;$db_pwd&lt;/db.password&gt;\n        &lt;email.key&gt;$email_key&lt;/email.key&gt;\n        &lt;modo.api.token&gt;$modo_api_token&lt;/modo.api.token&gt;\n        &lt;modo.auth.shared&gt;$modo_auth_shared&lt;/modo.auth.shared&gt;\n        &lt;build.version&gt;$build_version&lt;/build.version&gt;\n    &lt;/properties&gt;\n    &lt;version&gt;${build.version}&lt;/version&gt;\n...\n</code></pre>\n<p>I then execute the compile with the command</p>\n<blockquote>\n<p>mvn clean package -Dbuild_version=0.0.2-SNAPSHOT</p>\n</blockquote>\n<p>For some reason, the variable replacement doesn't work. I end up with a WAR file named myapp-$build_version.war instead of myapp-0.0.2-SNAPSHOT.war . I'm not quite sure what I'm doing wrong here. Any suggestions?</p>\n"},{"tags":["java","spring-boot","docker-compose","oauth-2.0","keycloak"],"owner":{"account_id":28684108,"reputation":35,"user_id":21964694,"display_name":"Sonnka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694178812,"creation_date":1694178812,"question_id":77067219,"body_markdown":"Oauth2 with Keylock does not work for me. I get this error page.\r\n[![enter image description here][1]][1]\r\nI have a microservice architecture, with auth-service and gateway. All my services and Keylock are run using docker-compose.  \r\nMy docker-compose :\r\n```\r\n  gateway-server:\r\n    image: &#39;gateway-server:1.0&#39;\r\n    container_name: gateway\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    restart: on-failure\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=prod\r\n      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka\r\n    depends_on:\r\n      - eureka-server\r\n    networks:\r\n      - mynet\r\n\r\n  auth-server:\r\n    image: &#39;auth-service:1.0&#39;\r\n    container_name: auth-server\r\n    ports:\r\n      - &quot;8081:8081&quot;\r\n    restart: on-failure\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=prod\r\n      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka\r\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/mydb\r\n      - SPRING_DATASOURCE_USERNAME=username\r\n      - SPRING_DATASOURCE_PASSWORD=password\r\n    depends_on:\r\n      - eureka-server\r\n      - db\r\n      - keycloak-service\r\n    networks:\r\n      - mynet\r\n\r\nkeycloak-service:\r\n    image: &#39;keycloak/keycloak:latest&#39;\r\n    container_name: keycloak-service\r\n    environment:\r\n      - KEYCLOAK_ADMIN=admin\r\n      - KEYCLOAK_ADMIN_PASSWORD=password\r\n    ports:\r\n      - &quot;8085:8085&quot;\r\n    command:\r\n      - start-dev\r\n      - --http-port=8085\r\n    restart: always\r\n    networks:\r\n      mynet:\r\n        aliases:\r\n          - keycloak-service:8085\r\n\r\n\r\nnetworks:\r\n  mynet:\r\n\r\n```\r\nAlso, I made changes to the hosts file so that I could do redirect to Keycloak. \r\n\r\nhosts file : \r\n```\r\n127.0.0.1\tlocalhost\r\n127.0.0.1\tkeycloak-service\r\n```\r\n\r\nHere are my Keycloak config:\r\n``` \r\n@Configuration\r\n@Getter\r\n@Setter\r\n@RequiredArgsConstructor\r\n@ConfigurationProperties(&quot;keycloak&quot;)\r\npublic class KeycloakConfig {\r\n\r\n    private String serverUrl;\r\n\r\n    private String realm;\r\n\r\n    private String clientId;\r\n\r\n    private String username;\r\n\r\n    private String password;\r\n\r\n    private String roleBuyer;\r\n\r\n    private String roleAdmin;\r\n\r\n    private String secret;\r\n\r\n    @Bean\r\n    public Keycloak keycloak() {\r\n        ResteasyClientBuilder resteasyClientBuilder = new ResteasyClientBuilderImpl();\r\n\r\n        Keycloak keycloak = KeycloakBuilder.builder()\r\n                .serverUrl(serverUrl)\r\n                .grantType(OAuth2Constants.PASSWORD)\r\n                .realm(&quot;master&quot;)\r\n                .clientId(&quot;admin-cli&quot;)\r\n                .username(username)\r\n                .password(password)\r\n                .resteasyClient(resteasyClientBuilder.connectionPoolSize(10).build())\r\n                .build();\r\n\r\n        RealmRepresentation newRealm = new RealmRepresentation();\r\n        newRealm.setId(realm);\r\n        newRealm.setRealm(realm);\r\n        newRealm.setEnabled(true);\r\n\r\n        keycloak.realms().create(newRealm);\r\n\r\n        ClientRepresentation clientRepresentation = new ClientRepresentation();\r\n        clientRepresentation.setClientId(clientId);\r\n        clientRepresentation.setRedirectUris(List.of(&quot;http://127.0.0.1:8080/auth-service/*&quot;));\r\n        clientRepresentation.setWebOrigins(List.of(&quot;http://127.0.0.1:8080/auth-service&quot;));\r\n        clientRepresentation.setSecret(secret);\r\n\r\n        keycloak.realm(realm).clients().create(clientRepresentation);\r\n\r\n        RoleRepresentation role1 = new RoleRepresentation();\r\n        role1.setId(roleBuyer);\r\n        role1.setName(roleBuyer);\r\n        role1.setClientRole(true);\r\n\r\n        RoleRepresentation role2 = new RoleRepresentation();\r\n        role2.setId(roleAdmin);\r\n        role2.setName(roleAdmin);\r\n        role2.setClientRole(true);\r\n\r\n        keycloak.realm(realm).roles().create(role1);\r\n        keycloak.realm(realm).roles().create(role2);\r\n\r\n        return keycloak;\r\n    }\r\n}\r\n``` \r\n\r\nMy security config :\r\n``` \r\n@Configuration\r\n@EnableWebSecurity\r\n@Getter@Setter\r\npublic class MyConfig {\r\n\r\n    @Value(&quot;${keycloak.secret}&quot;)\r\n    private String secret;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity.csrf().disable();\r\n        httpSecurity.authorizeHttpRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .oauth2Login();\r\n        httpSecurity.oauth2Client();\r\n\r\n        return  httpSecurity.build();\r\n    }\r\n\r\n    @Bean\r\n    public ClientRegistrationRepository clientRepository() {\r\n        ClientRegistration keycloak = keycloakClientRegistration();\r\n        return new InMemoryClientRegistrationRepository(keycloak);\r\n    }\r\n\r\n    private ClientRegistration keycloakClientRegistration() {\r\n\r\n        return ClientRegistration.withRegistrationId(&quot;teamgeist&quot;)\r\n                .clientId(&quot;teamgeist-backend&quot;)\r\n                .clientSecret(secret)\r\n                .scope(&quot;openid&quot;)\r\n                .redirectUri(&quot;http://127.0.0.1:8080/auth-service/login/oauth2/code/teamgeist-backend&quot;)\r\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\r\n                .issuerUri(&quot;http://keycloak-service:8085/realms/teamgeist&quot;)\r\n                .authorizationUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/auth&quot;)\r\n                .tokenUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/token&quot;)\r\n                .userInfoUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/userinfo&quot;)\r\n                .build();\r\n    }\r\n}\r\n``` \r\n\r\nMy application.properties :\r\n``` \r\nspring.security.oauth2.client.registration.keycloak.client-id=teamgeist-backend\r\nspring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\r\nspring.security.oauth2.client.registration.keycloak.scope=openid\r\nspring.security.oauth2.client.provider.keycloak.issuer-uri=http://keycloak-service:8085/realms/teamgeist\r\nspring.security.oauth2.client.registration.keycloak.client-secret=${keycloak.secret}\r\nspring.security.oauth2.client.registration.keycloak.redirect-uri=http://127.0.0.1:8080/auth-service/login/oauth2/code/teamgeist-backend\r\n``` \r\n\r\n\r\nI hope for your help.\r\n\r\n  [1]: https://i.stack.imgur.com/175gs.png","title":"Keycloak oauth2 [authorization_request_not_found]","body":"<p>Oauth2 with Keylock does not work for me. I get this error page.\n<a href=\"https://i.stack.imgur.com/175gs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/175gs.png\" alt=\"enter image description here\" /></a>\nI have a microservice architecture, with auth-service and gateway. All my services and Keylock are run using docker-compose.<br />\nMy docker-compose :</p>\n<pre><code>  gateway-server:\n    image: 'gateway-server:1.0'\n    container_name: gateway\n    ports:\n      - &quot;8080:8080&quot;\n    restart: on-failure\n    environment:\n      - SPRING_PROFILES_ACTIVE=prod\n      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka\n    depends_on:\n      - eureka-server\n    networks:\n      - mynet\n\n  auth-server:\n    image: 'auth-service:1.0'\n    container_name: auth-server\n    ports:\n      - &quot;8081:8081&quot;\n    restart: on-failure\n    environment:\n      - SPRING_PROFILES_ACTIVE=prod\n      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka-server:8761/eureka\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/mydb\n      - SPRING_DATASOURCE_USERNAME=username\n      - SPRING_DATASOURCE_PASSWORD=password\n    depends_on:\n      - eureka-server\n      - db\n      - keycloak-service\n    networks:\n      - mynet\n\nkeycloak-service:\n    image: 'keycloak/keycloak:latest'\n    container_name: keycloak-service\n    environment:\n      - KEYCLOAK_ADMIN=admin\n      - KEYCLOAK_ADMIN_PASSWORD=password\n    ports:\n      - &quot;8085:8085&quot;\n    command:\n      - start-dev\n      - --http-port=8085\n    restart: always\n    networks:\n      mynet:\n        aliases:\n          - keycloak-service:8085\n\n\nnetworks:\n  mynet:\n\n</code></pre>\n<p>Also, I made changes to the hosts file so that I could do redirect to Keycloak.</p>\n<p>hosts file :</p>\n<pre><code>127.0.0.1   localhost\n127.0.0.1   keycloak-service\n</code></pre>\n<p>Here are my Keycloak config:</p>\n<pre><code>@Configuration\n@Getter\n@Setter\n@RequiredArgsConstructor\n@ConfigurationProperties(&quot;keycloak&quot;)\npublic class KeycloakConfig {\n\n    private String serverUrl;\n\n    private String realm;\n\n    private String clientId;\n\n    private String username;\n\n    private String password;\n\n    private String roleBuyer;\n\n    private String roleAdmin;\n\n    private String secret;\n\n    @Bean\n    public Keycloak keycloak() {\n        ResteasyClientBuilder resteasyClientBuilder = new ResteasyClientBuilderImpl();\n\n        Keycloak keycloak = KeycloakBuilder.builder()\n                .serverUrl(serverUrl)\n                .grantType(OAuth2Constants.PASSWORD)\n                .realm(&quot;master&quot;)\n                .clientId(&quot;admin-cli&quot;)\n                .username(username)\n                .password(password)\n                .resteasyClient(resteasyClientBuilder.connectionPoolSize(10).build())\n                .build();\n\n        RealmRepresentation newRealm = new RealmRepresentation();\n        newRealm.setId(realm);\n        newRealm.setRealm(realm);\n        newRealm.setEnabled(true);\n\n        keycloak.realms().create(newRealm);\n\n        ClientRepresentation clientRepresentation = new ClientRepresentation();\n        clientRepresentation.setClientId(clientId);\n        clientRepresentation.setRedirectUris(List.of(&quot;http://127.0.0.1:8080/auth-service/*&quot;));\n        clientRepresentation.setWebOrigins(List.of(&quot;http://127.0.0.1:8080/auth-service&quot;));\n        clientRepresentation.setSecret(secret);\n\n        keycloak.realm(realm).clients().create(clientRepresentation);\n\n        RoleRepresentation role1 = new RoleRepresentation();\n        role1.setId(roleBuyer);\n        role1.setName(roleBuyer);\n        role1.setClientRole(true);\n\n        RoleRepresentation role2 = new RoleRepresentation();\n        role2.setId(roleAdmin);\n        role2.setName(roleAdmin);\n        role2.setClientRole(true);\n\n        keycloak.realm(realm).roles().create(role1);\n        keycloak.realm(realm).roles().create(role2);\n\n        return keycloak;\n    }\n}\n</code></pre>\n<p>My security config :</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@Getter@Setter\npublic class MyConfig {\n\n    @Value(&quot;${keycloak.secret}&quot;)\n    private String secret;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.csrf().disable();\n        httpSecurity.authorizeHttpRequests()\n                .anyRequest().authenticated()\n                .and()\n                .oauth2Login();\n        httpSecurity.oauth2Client();\n\n        return  httpSecurity.build();\n    }\n\n    @Bean\n    public ClientRegistrationRepository clientRepository() {\n        ClientRegistration keycloak = keycloakClientRegistration();\n        return new InMemoryClientRegistrationRepository(keycloak);\n    }\n\n    private ClientRegistration keycloakClientRegistration() {\n\n        return ClientRegistration.withRegistrationId(&quot;teamgeist&quot;)\n                .clientId(&quot;teamgeist-backend&quot;)\n                .clientSecret(secret)\n                .scope(&quot;openid&quot;)\n                .redirectUri(&quot;http://127.0.0.1:8080/auth-service/login/oauth2/code/teamgeist-backend&quot;)\n                .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)\n                .issuerUri(&quot;http://keycloak-service:8085/realms/teamgeist&quot;)\n                .authorizationUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/auth&quot;)\n                .tokenUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/token&quot;)\n                .userInfoUri(&quot;http://keycloak-service:8085/realms/teamgeist/protocol/openid-connect/userinfo&quot;)\n                .build();\n    }\n}\n</code></pre>\n<p>My application.properties :</p>\n<pre><code>spring.security.oauth2.client.registration.keycloak.client-id=teamgeist-backend\nspring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\nspring.security.oauth2.client.registration.keycloak.scope=openid\nspring.security.oauth2.client.provider.keycloak.issuer-uri=http://keycloak-service:8085/realms/teamgeist\nspring.security.oauth2.client.registration.keycloak.client-secret=${keycloak.secret}\nspring.security.oauth2.client.registration.keycloak.redirect-uri=http://127.0.0.1:8080/auth-service/login/oauth2/code/teamgeist-backend\n</code></pre>\n<p>I hope for your help.</p>\n"},{"tags":["java","spring-boot","maven","gradle","jcenter"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694200255,"post_id":77066404,"comment_id":135864979,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29386643,"reputation":1,"user_id":22515965,"display_name":"Sourabh Patil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694178623,"creation_date":1694171688,"question_id":77066404,"body_markdown":"Although I am downloading apache-rat gradle jar from a maven third-party repository, the url.host is being set to jcenter which leads to downloading all the dependencies from jcenter.\r\n\r\nclasspath &#39;gradle.plugin.org.nosphere.apache:creadur-rat-gradle:0.2.2&#39;\r\n","title":"How to restrict apache-rat plugin from downloading jcenter dependencies","body":"<p>Although I am downloading apache-rat gradle jar from a maven third-party repository, the url.host is being set to jcenter which leads to downloading all the dependencies from jcenter.</p>\n<p>classpath 'gradle.plugin.org.nosphere.apache:creadur-rat-gradle:0.2.2'</p>\n"},{"tags":["java","eclipse","javafx"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1617297908,"post_id":66909010,"comment_id":118272065,"body_markdown":"Please tell us more specifically what you did exactly in which order.","body":"Please tell us more specifically what you did exactly in which order."},{"owner":{"account_id":17822776,"reputation":29,"user_id":12944760,"display_name":"Brandon Muller"},"score":0,"creation_date":1617299062,"post_id":66909010,"comment_id":118272495,"body_markdown":"I imported this project. I made the application.view package. Then I moved the FXML files to the package. Then i change the path in the main file to the new one which is application/view/Main.FXML. When i try to run i get the errors","body":"I imported this project. I made the application.view package. Then I moved the FXML files to the package. Then i change the path in the main file to the new one which is application/view/Main.FXML. When i try to run i get the errors"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1617318473,"post_id":66909010,"comment_id":118278691,"body_markdown":"The package is shown differently because it does not contain Java classes (it just looks grayed-out in your installed theme). The errors says `Main.fxml` is found but loading fails in line 11 (`Main.fxml:11`). By the way, the theme you have installed might cause issues and slow down Eclipse.","body":"The package is shown differently because it does not contain Java classes (it just looks grayed-out in your installed theme). The errors says <code>Main.fxml</code> is found but loading fails in line 11 (<code>Main.fxml:11</code>). By the way, the theme you have installed might cause issues and slow down Eclipse."}],"owner":{"account_id":17822776,"reputation":29,"user_id":12944760,"display_name":"Brandon Muller"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694178262,"creation_date":1617297789,"question_id":66909010,"body_markdown":"I am trying to put my javaFX FXML files into their own package. Whenever I do the package becomes greyed out and even though it shows as it should in my file system when I try to run the program it cannot find the files and gives me a load exception error. \r\n\r\n[What it looks like][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xGcek.png","title":"Java Package in Eclipse greyed out and Program unable to find file","body":"<p>I am trying to put my javaFX FXML files into their own package. Whenever I do the package becomes greyed out and even though it shows as it should in my file system when I try to run the program it cannot find the files and gives me a load exception error.</p>\n<p><a href=\"https://i.stack.imgur.com/xGcek.png\" rel=\"nofollow noreferrer\">What it looks like</a></p>\n"},{"tags":["java","ignite","gridgain"],"answers":[{"tags":[],"owner":{"account_id":16644,"reputation":18841,"user_id":36498,"accept_rate":86,"display_name":"alamar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613929404,"creation_date":1613929404,"answer_id":66305218,"question_id":66303436,"body_markdown":"You can use domain names as well as IP addresses. But you can&#39;t use node discovery with thin clients.","title":"How to connect Apache Ignite Thin Client to Apache Ignite Cluster?","body":"<p>You can use domain names as well as IP addresses. But you can't use node discovery with thin clients.</p>\n"},{"tags":[],"owner":{"account_id":7125787,"reputation":771,"user_id":5448746,"display_name":"Ondřej Stašek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694177474,"creation_date":1694177474,"answer_id":77067049,"question_id":66303436,"body_markdown":"I you need node discovery, you must use thick client, that uses same configuration as server nodes (for discovery), just set client mode to true so this node does not serve caches.\r\n\r\nYou get more capability as local caching, better discovery options, notifications, but it seems it is counted as server node for licensing purposes.","title":"How to connect Apache Ignite Thin Client to Apache Ignite Cluster?","body":"<p>I you need node discovery, you must use thick client, that uses same configuration as server nodes (for discovery), just set client mode to true so this node does not serve caches.</p>\n<p>You get more capability as local caching, better discovery options, notifications, but it seems it is counted as server node for licensing purposes.</p>\n"}],"owner":{"account_id":4153235,"reputation":511,"user_id":3405101,"display_name":"Ildar Zaripov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":727,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694177474,"creation_date":1613918438,"question_id":66303436,"body_markdown":"I have a running Ignite cluster and I use `AWS S3` for node discovery:\r\n```java\r\nTcpDiscoveryS3IpFinder ipFinder = new TcpDiscoveryS3IpFinder();\r\nBasicAWSCredentials awsCredentials =\r\n    new BasicAWSCredentials(igniteAccessKey, igniteSecretAccessKey);\r\nipFinder.setAwsCredentials(awsCredentials);\r\nipFinder.setBucketName(igniteBucketName);\r\nipFinder.setBucketEndpoint(&quot;s3.eu-central-1.amazonaws.com&quot;);\r\n\r\nTcpDiscoverySpi spi = new TcpDiscoverySpi();\r\nspi.setIpFinder(ipFinder);\r\n\r\nIgniteConfiguration cfg = new IgniteConfiguration();\r\ncfg.setClientMode(true);\r\n\r\ncfg.setDiscoverySpi(spi);\r\nIgnition.start(cfg);    \r\n```\r\n\r\nIt works very well and I can connect to this cluster using `Apache Ignite Client` nodes.\r\n\r\nBut what about `Apache Ignite Thin Client`? `Thin client` uses `ClientConfiguration` class (instead of `IgniteConfiguration`) that requires a list of IP addresses of cluster nodes. AFAIK one can only hardcode that list of IP addresses.&lt;br/&gt; From official documentation:\r\n```Java\r\nClientConfiguration cfg = new ClientConfiguration().setAddresses(&quot;127.0.0.1:10800&quot;);\r\ntry (IgniteClient client = Ignition.startClient(cfg)) {\r\n    ClientCache&lt;Integer, String&gt; cache = client.cache(&quot;myCache&quot;);\r\n    // Get data from the cache\r\n}\r\n```\r\n\r\n\r\nSo I have questions:\r\n1. How should I handle situations when a list of IP addresses change?\r\n2. Is there any way to use **node discovery** for `Thin clients`?","title":"How to connect Apache Ignite Thin Client to Apache Ignite Cluster?","body":"<p>I have a running Ignite cluster and I use <code>AWS S3</code> for node discovery:</p>\n<pre class=\"lang-java prettyprint-override\"><code>TcpDiscoveryS3IpFinder ipFinder = new TcpDiscoveryS3IpFinder();\nBasicAWSCredentials awsCredentials =\n    new BasicAWSCredentials(igniteAccessKey, igniteSecretAccessKey);\nipFinder.setAwsCredentials(awsCredentials);\nipFinder.setBucketName(igniteBucketName);\nipFinder.setBucketEndpoint(&quot;s3.eu-central-1.amazonaws.com&quot;);\n\nTcpDiscoverySpi spi = new TcpDiscoverySpi();\nspi.setIpFinder(ipFinder);\n\nIgniteConfiguration cfg = new IgniteConfiguration();\ncfg.setClientMode(true);\n\ncfg.setDiscoverySpi(spi);\nIgnition.start(cfg);    \n</code></pre>\n<p>It works very well and I can connect to this cluster using <code>Apache Ignite Client</code> nodes.</p>\n<p>But what about <code>Apache Ignite Thin Client</code>? <code>Thin client</code> uses <code>ClientConfiguration</code> class (instead of <code>IgniteConfiguration</code>) that requires a list of IP addresses of cluster nodes. AFAIK one can only hardcode that list of IP addresses.<br/> From official documentation:</p>\n<pre><code>ClientConfiguration cfg = new ClientConfiguration().setAddresses(&quot;127.0.0.1:10800&quot;);\ntry (IgniteClient client = Ignition.startClient(cfg)) {\n    ClientCache&lt;Integer, String&gt; cache = client.cache(&quot;myCache&quot;);\n    // Get data from the cache\n}\n</code></pre>\n<p>So I have questions:</p>\n<ol>\n<li>How should I handle situations when a list of IP addresses change?</li>\n<li>Is there any way to use <strong>node discovery</strong> for <code>Thin clients</code>?</li>\n</ol>\n"},{"tags":["java","spring","hl7-fhir"],"owner":{"account_id":13795396,"reputation":37,"user_id":9956737,"display_name":"nikolas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694177224,"creation_date":1694177224,"question_id":77067012,"body_markdown":"i receved the error but i have included the resource in java spring project\r\n\r\n```\r\n14:37:17.010 [main] INFO ca.uhn.fhir.util.VersionUtil -- HAPI FHIR version 6.4.3 - Rev cfc9af8148\r\n14:37:17.029 [main] INFO ca.uhn.fhir.context.FhirContext -- Creating new FHIR context for FHIR version [R4]\r\n14:37:17.034 [main] INFO ca.uhn.fhir.validation.FhirValidator -- Ph-schematron library not found on classpath, will not attempt to perform schematron validation\r\n14:37:17.285 [main] WARN ca.uhn.fhir.validation.SchemaBaseValidator -- Jaxp 1.5 Support not found.\r\n```\r\ndependencies add for the pom.xml\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hapi-fhir-validation-resourcesr4&lt;/artifactId&gt;\r\n            &lt;version&gt;6.8.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.helger.schematron&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ph-schematron-validator&lt;/artifactId&gt;\r\n            &lt;version&gt;7.1.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n","title":"Ph-schematron library not found on classpath?","body":"<p>i receved the error but i have included the resource in java spring project</p>\n<pre><code>14:37:17.010 [main] INFO ca.uhn.fhir.util.VersionUtil -- HAPI FHIR version 6.4.3 - Rev cfc9af8148\n14:37:17.029 [main] INFO ca.uhn.fhir.context.FhirContext -- Creating new FHIR context for FHIR version [R4]\n14:37:17.034 [main] INFO ca.uhn.fhir.validation.FhirValidator -- Ph-schematron library not found on classpath, will not attempt to perform schematron validation\n14:37:17.285 [main] WARN ca.uhn.fhir.validation.SchemaBaseValidator -- Jaxp 1.5 Support not found.\n</code></pre>\n<p>dependencies add for the pom.xml</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;\n            &lt;artifactId&gt;hapi-fhir-validation-resourcesr4&lt;/artifactId&gt;\n            &lt;version&gt;6.8.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.helger.schematron&lt;/groupId&gt;\n            &lt;artifactId&gt;ph-schematron-validator&lt;/artifactId&gt;\n            &lt;version&gt;7.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1648007578,"post_id":71579607,"comment_id":126512499,"body_markdown":"May you share a more detailed error from the idea.log file? Like https://youtrack.jetbrains.com/issue/IDEA-215152#focus=Comments-27-3507751.0-0","body":"May you share a more detailed error from the idea.log file? Like <a href=\"https://youtrack.jetbrains.com/issue/IDEA-215152#focus=Comments-27-3507751.0-0\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/&hellip;</a>"},{"owner":{"account_id":22624639,"reputation":55,"user_id":17109929,"display_name":"Самый Важный"},"score":0,"creation_date":1648040416,"post_id":71579607,"comment_id":126522613,"body_markdown":"sorry, i added to the question","body":"sorry, i added to the question"},{"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1648096374,"post_id":71579607,"comment_id":126539190,"body_markdown":"According to the log, IDE cannot communicate with Maven daemon to apply Maven project template. Do you have a firewall which may prevent localhost connections for the IDE?","body":"According to the log, IDE cannot communicate with Maven daemon to apply Maven project template. Do you have a firewall which may prevent localhost connections for the IDE?"},{"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1648096491,"post_id":71579607,"comment_id":126539205,"body_markdown":"Same case caused by the firewall: https://youtrack.jetbrains.com/issue/IDEA-239928","body":"Same case caused by the firewall: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-239928\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-239928</a>"}],"answers":[{"tags":[],"owner":{"account_id":22624639,"reputation":55,"user_id":17109929,"display_name":"Самый Важный"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1648083427,"creation_date":1648083427,"answer_id":71595833,"question_id":71579607,"body_markdown":"I reinstalled windows. (I needed it anyway) and installed intellij IDEA 2021.3 instead of 2020.3. Everything worked. Some of this has affected. Perhaps reinstalling the same version would also solve this problem.","title":"multi-pom in intellijIDEA. Error adding module to project: null","body":"<p>I reinstalled windows. (I needed it anyway) and installed intellij IDEA 2021.3 instead of 2020.3. Everything worked. Some of this has affected. Perhaps reinstalling the same version would also solve this problem.</p>\n"},{"tags":[],"owner":{"account_id":27732706,"reputation":11,"user_id":21170903,"display_name":"spatil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675844081,"creation_date":1675844081,"answer_id":75382913,"question_id":71579607,"body_markdown":"In Intellij goto File -&gt; Project Structure -&gt; Project SDK -&gt; [Select Your Installed SDK Version] -&gt; Ok\r\n\r\nAnd try to add the new module, it worked for me.","title":"multi-pom in intellijIDEA. Error adding module to project: null","body":"<p>In Intellij goto File -&gt; Project Structure -&gt; Project SDK -&gt; [Select Your Installed SDK Version] -&gt; Ok</p>\n<p>And try to add the new module, it worked for me.</p>\n"},{"tags":[],"owner":{"account_id":29395363,"reputation":1,"user_id":22522833,"display_name":"Chous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694176960,"creation_date":1694176896,"answer_id":77066974,"question_id":71579607,"body_markdown":"Try next things:\r\n\r\n1. Go to File-Project Structure-Project. Check SDK and Language level. Make it the same if it&#39;s not. For example 17.\r\n2. Then go to Modules. Sources-Language level and Dependencies-Module SDK must be as Project SDK (e.g. 17). All your next modules should also be 17.\r\n3. Then go to SDKs just to check that the required SDK (17) is present in the list.\r\n4. Then go to File-Settings-Build, Execution, Deployment-Compiler-Java Compiler. For all modules Taget bytecode version should be 17.\r\n5. In your pom.xml &lt;java.version&gt; should also be as SDK version (17).\r\n\r\nAfter you do all this steps restart IntelliJ IDEA and then check everything again step by step. All SDKs, Languages and versions should be like in your project (17).\r\n\r\nAnd finally, to create a general Maven module, go to the New Module (not to Maven archetype). In New Module menu check Build system, it&#39;s should be Maven. Also check JDK (17).\r\n\r\nI hope it will help. Good luck!","title":"multi-pom in intellijIDEA. Error adding module to project: null","body":"<p>Try next things:</p>\n<ol>\n<li>Go to File-Project Structure-Project. Check SDK and Language level. Make it the same if it's not. For example 17.</li>\n<li>Then go to Modules. Sources-Language level and Dependencies-Module SDK must be as Project SDK (e.g. 17). All your next modules should also be 17.</li>\n<li>Then go to SDKs just to check that the required SDK (17) is present in the list.</li>\n<li>Then go to File-Settings-Build, Execution, Deployment-Compiler-Java Compiler. For all modules Taget bytecode version should be 17.</li>\n<li>In your pom.xml &lt;java.version&gt; should also be as SDK version (17).</li>\n</ol>\n<p>After you do all this steps restart IntelliJ IDEA and then check everything again step by step. All SDKs, Languages and versions should be like in your project (17).</p>\n<p>And finally, to create a general Maven module, go to the New Module (not to Maven archetype). In New Module menu check Build system, it's should be Maven. Also check JDK (17).</p>\n<p>I hope it will help. Good luck!</p>\n"}],"owner":{"account_id":22624639,"reputation":55,"user_id":17109929,"display_name":"Самый Важный"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1833,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71595833,"answer_count":3,"score":0,"last_activity_date":1694176960,"creation_date":1647987574,"question_id":71579607,"body_markdown":"I wanted to make a multi-pom project in Intellij (2020.3.4). In one Maven project, I right-click -&gt;New -&gt; Module -&gt; Maven. select parent to &quot;my project&quot;. However, even if parent is not specified, I get the error: **Error adding module to project: null**. (at the same time, it adds a regular folder with the module name and an empty pom.xml inside) (This happens with any archetype). I didn&#39;t find any solutions on the Internet at all. Only downgrade to the old version of Intellij IDEA and that solution was published 10 years ago. Tell me what is the problem? Or what to do? Does not work only with &quot;Maven&quot;. With &quot;Java&quot; and &quot;Spring Inizializr&quot; it works.\r\n\r\n\r\n\r\n\r\n**idea.log**\r\n\r\n    2022-03-23 15:54:05,382 [81624884]   WARN - il.projectWizard.ModuleBuilder -  \r\n    java.lang.NullPointerException\r\n    \tat java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011)\r\n    \tat java.base/java.util.concurrent.ConcurrentHashMap.put(ConcurrentHashMap.java:1006)\r\n    \tat java.base/java.util.Properties.put(Properties.java:1340)\r\n    \tat java.base/java.util.Properties.setProperty(Properties.java:228)\r\n    \tat org.jetbrains.idea.maven.utils.MavenUtil.runOrApplyMavenProjectFileTemplate(MavenUtil.java:384)\r\n    \tat org.jetbrains.idea.maven.utils.MavenUtil.runOrApplyMavenProjectFileTemplate(MavenUtil.java:341)\r\n    \tat org.jetbrains.idea.maven.wizards.MavenModuleBuilderHelper.lambda$configure$0(MavenModuleBuilderHelper.java:85)\r\n    \tat com.intellij.openapi.command.WriteCommandAction$BuilderImpl$2.run(WriteCommandAction.java:122)\r\n    \tat com.intellij.openapi.application.RunResult.run(RunResult.java:35)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.lambda$performWriteCommandAction$1(WriteCommandAction.java:253)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl.runWriteAction(ApplicationImpl.java:1000)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.lambda$performWriteCommandAction$2(WriteCommandAction.java:252)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.lambda$doExecuteCommand$4(WriteCommandAction.java:310)\r\n    \tat com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:220)\r\n    \tat com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:187)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.doExecuteCommand(WriteCommandAction.java:312)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.performWriteCommandAction(WriteCommandAction.java:251)\r\n    \tat com.intellij.openapi.command.WriteCommandAction.execute(WriteCommandAction.java:232)\r\n    \tat com.intellij.openapi.command.WriteCommandAction$BuilderImpl.compute(WriteCommandAction.java:124)\r\n    \tat org.jetbrains.idea.maven.wizards.MavenModuleBuilderHelper.configure(MavenModuleBuilderHelper.java:79)\r\n    \tat org.jetbrains.idea.maven.wizards.AbstractMavenModuleBuilder.lambda$setupRootModel$0(AbstractMavenModuleBuilder.java:77)\r\n    \tat org.jetbrains.idea.maven.utils.MavenUtil.runDumbAware(MavenUtil.java:211)\r\n    \tat org.jetbrains.idea.maven.utils.MavenUtil.runWhenInitialized(MavenUtil.java:231)\r\n    \tat org.jetbrains.idea.maven.wizards.AbstractMavenModuleBuilder.setupRootModel(AbstractMavenModuleBuilder.java:70)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.setupModule(ModuleBuilder.java:260)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.createModule(ModuleBuilder.java:253)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.createAndCommitIfNeeded(ModuleBuilder.java:292)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.lambda$commitModule$4(ModuleBuilder.java:338)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl.runWriteActionWithClass(ApplicationImpl.java:988)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl.runWriteAction(ApplicationImpl.java:1014)\r\n    \tat com.intellij.ide.util.projectWizard.ModuleBuilder.commitModule(ModuleBuilder.java:337)\r\n    \tat com.intellij.openapi.roots.ui.configuration.actions.NewModuleAction.createModuleFromWizard(NewModuleAction.java:59)\r\n    \tat com.intellij.openapi.roots.ui.configuration.actions.NewModuleAction.actionPerformed(NewModuleAction.java:49)\r\n    \tat com.intellij.openapi.actionSystem.ex.ActionUtil.performActionDumbAware(ActionUtil.java:281)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.lambda$actionPerformed$0(ActionMenuItem.java:310)\r\n    \tat com.intellij.openapi.wm.impl.FocusManagerImpl.runOnOwnContext(FocusManagerImpl.java:286)\r\n    \tat com.intellij.openapi.wm.impl.IdeFocusManagerImpl.runOnOwnContext(IdeFocusManagerImpl.java:77)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.actionPerformed(ActionMenuItem.java:299)\r\n    \tat java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1967)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem.lambda$fireActionPerformed$0(ActionMenuItem.java:110)\r\n    \tat com.intellij.openapi.application.TransactionGuardImpl.performUserActivity(TransactionGuardImpl.java:95)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem.fireActionPerformed(ActionMenuItem.java:110)\r\n    \tat com.intellij.ui.plaf.beg.BegMenuItemUI.doClick(BegMenuItemUI.java:514)\r\n    \tat com.intellij.ui.plaf.beg.BegMenuItemUI$MyMouseInputHandler.mouseReleased(BegMenuItemUI.java:544)\r\n    \tat java.desktop/java.awt.Component.processMouseEvent(Component.java:6652)\r\n    \tat java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3345)\r\n    \tat java.desktop/java.awt.Component.processEvent(Component.java:6417)\r\n    \tat java.desktop/java.awt.Container.processEvent(Container.java:2263)\r\n    \tat java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5027)\r\n    \tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2321)\r\n    \tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4859)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4918)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4547)\r\n    \tat java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4488)\r\n    \tat java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2307)\r\n    \tat java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n    \tat java.desktop/java.awt.Component.dispatchEvent(Component.java:4859)\r\n    \tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:778)\r\n    \tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:727)\r\n    \tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\r\n    \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:95)\r\n    \tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:751)\r\n    \tat java.desktop/java.awt.EventQueue$5.run(EventQueue.java:749)\r\n    \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\r\n    \tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:748)\r\n    \tat com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:976)\r\n    \tat com.intellij.ide.IdeEventQueue.dispatchMouseEvent(IdeEventQueue.java:911)\r\n    \tat com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:840)\r\n    \tat com.intellij.ide.IdeEventQueue.lambda$dispatchEvent$8(IdeEventQueue.java:454)\r\n    \tat com.intellij.openapi.progress.impl.CoreProgressManager.computePrioritized(CoreProgressManager.java:773)\r\n    \tat com.intellij.ide.IdeEventQueue.lambda$dispatchEvent$9(IdeEventQueue.java:453)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl.runIntendedWriteActionOnCurrentThread(ApplicationImpl.java:822)\r\n    \tat com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:507)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n    \tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n    \tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - Cannot reconnect. \r\n    java.lang.RuntimeException: Cannot reconnect.\r\n    \tat org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform(RemoteObjectWrapper.java:82)\r\n    \tat org.jetbrains.idea.maven.server.MavenIndexerWrapper.getArchetypes(MavenIndexerWrapper.java:143)\r\n    \tat org.jetbrains.idea.maven.indices.MavenIndicesManager.getArchetypes(MavenIndicesManager.java:337)\r\n    \tat org.jetbrains.idea.maven.wizards.MavenArchetypesStep.lambda$updateArchetypesList$3(MavenArchetypesStep.java:223)\r\n    \tat com.intellij.util.RunnableCallable.call(RunnableCallable.java:20)\r\n    \tat com.intellij.util.RunnableCallable.call(RunnableCallable.java:11)\r\n    \tat com.intellij.openapi.application.impl.ApplicationImpl$1.call(ApplicationImpl.java:270)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    \tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:668)\r\n    \tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:665)\r\n    \tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1.run(Executors.java:665)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n    Caused by: java.rmi.ConnectException: Connection refused to host: 127.0.0.1; nested exception is: \r\n    \tjava.net.ConnectException: Connection refused: connect\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:623)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:209)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:196)\r\n    \tat java.rmi/sun.rmi.server.UnicastRef.invoke(UnicastRef.java:132)\r\n    \tat java.rmi/java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:217)\r\n    \tat java.rmi/java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:162)\r\n    \tat com.sun.proxy.$Proxy146.createIndexer(Unknown Source)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat com.intellij.execution.rmi.RemoteUtil.invokeRemote(RemoteUtil.java:150)\r\n    \tat com.intellij.execution.rmi.RemoteUtil.access$400(RemoteUtil.java:21)\r\n    \tat com.intellij.execution.rmi.RemoteUtil$1.lambda$invoke$0(RemoteUtil.java:134)\r\n    \tat com.intellij.openapi.util.ClassLoaderUtil.computeWithClassLoader(ClassLoaderUtil.java:31)\r\n    \tat com.intellij.execution.rmi.RemoteUtil.executeWithClassLoader(RemoteUtil.java:202)\r\n    \tat com.intellij.execution.rmi.RemoteUtil$1.invoke(RemoteUtil.java:134)\r\n    \tat com.sun.proxy.$Proxy146.createIndexer(Unknown Source)\r\n    \tat org.jetbrains.idea.maven.server.MavenServerConnectorImpl.createIndexer(MavenServerConnectorImpl.java:197)\r\n    \tat org.jetbrains.idea.maven.server.MavenServerManager$4.create(MavenServerManager.java:381)\r\n    \tat org.jetbrains.idea.maven.server.MavenServerManager$4.create(MavenServerManager.java:377)\r\n    \tat org.jetbrains.idea.maven.server.RemoteObjectWrapper.getOrCreateWrappee(RemoteObjectWrapper.java:41)\r\n    \tat org.jetbrains.idea.maven.server.MavenIndexerWrapper.lambda$getArchetypes$6(MavenIndexerWrapper.java:143)\r\n    \tat org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform(RemoteObjectWrapper.java:76)\r\n    \t... 14 more\r\n    Caused by: java.net.ConnectException: Connection refused: connect\r\n    \tat java.base/java.net.PlainSocketImpl.connect0(Native Method)\r\n    \tat java.base/java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:101)\r\n    \tat java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:399)\r\n    \tat java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:242)\r\n    \tat java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:224)\r\n    \tat java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n    \tat java.base/java.net.Socket.connect(Socket.java:609)\r\n    \tat java.base/java.net.Socket.connect(Socket.java:558)\r\n    \tat java.base/java.net.Socket.&lt;init&gt;(Socket.java:454)\r\n    \tat java.base/java.net.Socket.&lt;init&gt;(Socket.java:231)\r\n    \tat com.intellij.execution.rmi.RemoteServer$1.createSocket(RemoteServer.java:122)\r\n    \tat java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:617)\r\n    \t... 37 more\r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - IntelliJ IDEA 2020.3.4  Build #IU-203.8084.24 \r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - JDK: 11.0.10; VM: OpenJDK 64-Bit Server VM; Vendor: JetBrains s.r.o. \r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - OS: Windows 10 \r\n    2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - Last Action: NewModuleInGroup \r\n    2022-03-23 15:54:06,580 [81626082]   INFO - .diagnostic.PerformanceWatcher - Indexable file iteration took 1922ms; general responsiveness: ok; EDT responsiveness: ok \r\n    2022-03-23 15:54:06,580 [81626082]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to index \r\n    2022-03-23 15:54:06,580 [81626082]   INFO - .diagnostic.PerformanceWatcher - Indexable file iteration took 1922ms; general responsiveness: ok; EDT responsiveness: ok \r\n    2022-03-23 15:54:06,595 [81626097]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to index \r\n    2022-03-23 15:54:08,524 [81628026]   INFO - rationStore.ComponentStoreImpl - Saving appFileTypeManager took 16 ms\r\n\r\n \r\n","title":"multi-pom in intellijIDEA. Error adding module to project: null","body":"<p>I wanted to make a multi-pom project in Intellij (2020.3.4). In one Maven project, I right-click -&gt;New -&gt; Module -&gt; Maven. select parent to &quot;my project&quot;. However, even if parent is not specified, I get the error: <strong>Error adding module to project: null</strong>. (at the same time, it adds a regular folder with the module name and an empty pom.xml inside) (This happens with any archetype). I didn't find any solutions on the Internet at all. Only downgrade to the old version of Intellij IDEA and that solution was published 10 years ago. Tell me what is the problem? Or what to do? Does not work only with &quot;Maven&quot;. With &quot;Java&quot; and &quot;Spring Inizializr&quot; it works.</p>\n<p><strong>idea.log</strong></p>\n<pre><code>2022-03-23 15:54:05,382 [81624884]   WARN - il.projectWizard.ModuleBuilder -  \njava.lang.NullPointerException\n    at java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011)\n    at java.base/java.util.concurrent.ConcurrentHashMap.put(ConcurrentHashMap.java:1006)\n    at java.base/java.util.Properties.put(Properties.java:1340)\n    at java.base/java.util.Properties.setProperty(Properties.java:228)\n    at org.jetbrains.idea.maven.utils.MavenUtil.runOrApplyMavenProjectFileTemplate(MavenUtil.java:384)\n    at org.jetbrains.idea.maven.utils.MavenUtil.runOrApplyMavenProjectFileTemplate(MavenUtil.java:341)\n    at org.jetbrains.idea.maven.wizards.MavenModuleBuilderHelper.lambda$configure$0(MavenModuleBuilderHelper.java:85)\n    at com.intellij.openapi.command.WriteCommandAction$BuilderImpl$2.run(WriteCommandAction.java:122)\n    at com.intellij.openapi.application.RunResult.run(RunResult.java:35)\n    at com.intellij.openapi.command.WriteCommandAction.lambda$performWriteCommandAction$1(WriteCommandAction.java:253)\n    at com.intellij.openapi.application.impl.ApplicationImpl.runWriteAction(ApplicationImpl.java:1000)\n    at com.intellij.openapi.command.WriteCommandAction.lambda$performWriteCommandAction$2(WriteCommandAction.java:252)\n    at com.intellij.openapi.command.WriteCommandAction.lambda$doExecuteCommand$4(WriteCommandAction.java:310)\n    at com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:220)\n    at com.intellij.openapi.command.impl.CoreCommandProcessor.executeCommand(CoreCommandProcessor.java:187)\n    at com.intellij.openapi.command.WriteCommandAction.doExecuteCommand(WriteCommandAction.java:312)\n    at com.intellij.openapi.command.WriteCommandAction.performWriteCommandAction(WriteCommandAction.java:251)\n    at com.intellij.openapi.command.WriteCommandAction.execute(WriteCommandAction.java:232)\n    at com.intellij.openapi.command.WriteCommandAction$BuilderImpl.compute(WriteCommandAction.java:124)\n    at org.jetbrains.idea.maven.wizards.MavenModuleBuilderHelper.configure(MavenModuleBuilderHelper.java:79)\n    at org.jetbrains.idea.maven.wizards.AbstractMavenModuleBuilder.lambda$setupRootModel$0(AbstractMavenModuleBuilder.java:77)\n    at org.jetbrains.idea.maven.utils.MavenUtil.runDumbAware(MavenUtil.java:211)\n    at org.jetbrains.idea.maven.utils.MavenUtil.runWhenInitialized(MavenUtil.java:231)\n    at org.jetbrains.idea.maven.wizards.AbstractMavenModuleBuilder.setupRootModel(AbstractMavenModuleBuilder.java:70)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.setupModule(ModuleBuilder.java:260)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.createModule(ModuleBuilder.java:253)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.createAndCommitIfNeeded(ModuleBuilder.java:292)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.lambda$commitModule$4(ModuleBuilder.java:338)\n    at com.intellij.openapi.application.impl.ApplicationImpl.runWriteActionWithClass(ApplicationImpl.java:988)\n    at com.intellij.openapi.application.impl.ApplicationImpl.runWriteAction(ApplicationImpl.java:1014)\n    at com.intellij.ide.util.projectWizard.ModuleBuilder.commitModule(ModuleBuilder.java:337)\n    at com.intellij.openapi.roots.ui.configuration.actions.NewModuleAction.createModuleFromWizard(NewModuleAction.java:59)\n    at com.intellij.openapi.roots.ui.configuration.actions.NewModuleAction.actionPerformed(NewModuleAction.java:49)\n    at com.intellij.openapi.actionSystem.ex.ActionUtil.performActionDumbAware(ActionUtil.java:281)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.lambda$actionPerformed$0(ActionMenuItem.java:310)\n    at com.intellij.openapi.wm.impl.FocusManagerImpl.runOnOwnContext(FocusManagerImpl.java:286)\n    at com.intellij.openapi.wm.impl.IdeFocusManagerImpl.runOnOwnContext(IdeFocusManagerImpl.java:77)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.actionPerformed(ActionMenuItem.java:299)\n    at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1967)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem.lambda$fireActionPerformed$0(ActionMenuItem.java:110)\n    at com.intellij.openapi.application.TransactionGuardImpl.performUserActivity(TransactionGuardImpl.java:95)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem.fireActionPerformed(ActionMenuItem.java:110)\n    at com.intellij.ui.plaf.beg.BegMenuItemUI.doClick(BegMenuItemUI.java:514)\n    at com.intellij.ui.plaf.beg.BegMenuItemUI$MyMouseInputHandler.mouseReleased(BegMenuItemUI.java:544)\n    at java.desktop/java.awt.Component.processMouseEvent(Component.java:6652)\n    at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3345)\n    at java.desktop/java.awt.Component.processEvent(Component.java:6417)\n    at java.desktop/java.awt.Container.processEvent(Container.java:2263)\n    at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5027)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2321)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4859)\n    at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4918)\n    at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4547)\n    at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4488)\n    at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2307)\n    at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n    at java.desktop/java.awt.Component.dispatchEvent(Component.java:4859)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:778)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:727)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:721)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:95)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:751)\n    at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:749)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:85)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:748)\n    at com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:976)\n    at com.intellij.ide.IdeEventQueue.dispatchMouseEvent(IdeEventQueue.java:911)\n    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:840)\n    at com.intellij.ide.IdeEventQueue.lambda$dispatchEvent$8(IdeEventQueue.java:454)\n    at com.intellij.openapi.progress.impl.CoreProgressManager.computePrioritized(CoreProgressManager.java:773)\n    at com.intellij.ide.IdeEventQueue.lambda$dispatchEvent$9(IdeEventQueue.java:453)\n    at com.intellij.openapi.application.impl.ApplicationImpl.runIntendedWriteActionOnCurrentThread(ApplicationImpl.java:822)\n    at com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:507)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - Cannot reconnect. \njava.lang.RuntimeException: Cannot reconnect.\n    at org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform(RemoteObjectWrapper.java:82)\n    at org.jetbrains.idea.maven.server.MavenIndexerWrapper.getArchetypes(MavenIndexerWrapper.java:143)\n    at org.jetbrains.idea.maven.indices.MavenIndicesManager.getArchetypes(MavenIndicesManager.java:337)\n    at org.jetbrains.idea.maven.wizards.MavenArchetypesStep.lambda$updateArchetypesList$3(MavenArchetypesStep.java:223)\n    at com.intellij.util.RunnableCallable.call(RunnableCallable.java:20)\n    at com.intellij.util.RunnableCallable.call(RunnableCallable.java:11)\n    at com.intellij.openapi.application.impl.ApplicationImpl$1.call(ApplicationImpl.java:270)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:668)\n    at java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1$1.run(Executors.java:665)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at java.base/java.util.concurrent.Executors$PrivilegedThreadFactory$1.run(Executors.java:665)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: java.rmi.ConnectException: Connection refused to host: 127.0.0.1; nested exception is: \n    java.net.ConnectException: Connection refused: connect\n    at java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:623)\n    at java.rmi/sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:209)\n    at java.rmi/sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:196)\n    at java.rmi/sun.rmi.server.UnicastRef.invoke(UnicastRef.java:132)\n    at java.rmi/java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:217)\n    at java.rmi/java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:162)\n    at com.sun.proxy.$Proxy146.createIndexer(Unknown Source)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at com.intellij.execution.rmi.RemoteUtil.invokeRemote(RemoteUtil.java:150)\n    at com.intellij.execution.rmi.RemoteUtil.access$400(RemoteUtil.java:21)\n    at com.intellij.execution.rmi.RemoteUtil$1.lambda$invoke$0(RemoteUtil.java:134)\n    at com.intellij.openapi.util.ClassLoaderUtil.computeWithClassLoader(ClassLoaderUtil.java:31)\n    at com.intellij.execution.rmi.RemoteUtil.executeWithClassLoader(RemoteUtil.java:202)\n    at com.intellij.execution.rmi.RemoteUtil$1.invoke(RemoteUtil.java:134)\n    at com.sun.proxy.$Proxy146.createIndexer(Unknown Source)\n    at org.jetbrains.idea.maven.server.MavenServerConnectorImpl.createIndexer(MavenServerConnectorImpl.java:197)\n    at org.jetbrains.idea.maven.server.MavenServerManager$4.create(MavenServerManager.java:381)\n    at org.jetbrains.idea.maven.server.MavenServerManager$4.create(MavenServerManager.java:377)\n    at org.jetbrains.idea.maven.server.RemoteObjectWrapper.getOrCreateWrappee(RemoteObjectWrapper.java:41)\n    at org.jetbrains.idea.maven.server.MavenIndexerWrapper.lambda$getArchetypes$6(MavenIndexerWrapper.java:143)\n    at org.jetbrains.idea.maven.server.RemoteObjectWrapper.perform(RemoteObjectWrapper.java:76)\n    ... 14 more\nCaused by: java.net.ConnectException: Connection refused: connect\n    at java.base/java.net.PlainSocketImpl.connect0(Native Method)\n    at java.base/java.net.PlainSocketImpl.socketConnect(PlainSocketImpl.java:101)\n    at java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:399)\n    at java.base/java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:242)\n    at java.base/java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:224)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.base/java.net.Socket.connect(Socket.java:609)\n    at java.base/java.net.Socket.connect(Socket.java:558)\n    at java.base/java.net.Socket.&lt;init&gt;(Socket.java:454)\n    at java.base/java.net.Socket.&lt;init&gt;(Socket.java:231)\n    at com.intellij.execution.rmi.RemoteServer$1.createSocket(RemoteServer.java:122)\n    at java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:617)\n    ... 37 more\n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - IntelliJ IDEA 2020.3.4  Build #IU-203.8084.24 \n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - JDK: 11.0.10; VM: OpenJDK 64-Bit Server VM; Vendor: JetBrains s.r.o. \n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - OS: Windows 10 \n2022-03-23 15:54:05,981 [81625483]  ERROR - plication.impl.ApplicationImpl - Last Action: NewModuleInGroup \n2022-03-23 15:54:06,580 [81626082]   INFO - .diagnostic.PerformanceWatcher - Indexable file iteration took 1922ms; general responsiveness: ok; EDT responsiveness: ok \n2022-03-23 15:54:06,580 [81626082]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to index \n2022-03-23 15:54:06,580 [81626082]   INFO - .diagnostic.PerformanceWatcher - Indexable file iteration took 1922ms; general responsiveness: ok; EDT responsiveness: ok \n2022-03-23 15:54:06,595 [81626097]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to index \n2022-03-23 15:54:08,524 [81628026]   INFO - rationStore.ComponentStoreImpl - Saving appFileTypeManager took 16 ms\n</code></pre>\n"},{"tags":["java","spring","testing","proxy","resttemplate"],"owner":{"account_id":27717151,"reputation":1,"user_id":21158602,"display_name":"kwarter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694176386,"creation_date":1694176386,"question_id":77066916,"body_markdown":"I have an integration test that correctly mocks an auth call, but it needs to support a proxy now. I&#39;m inexperienced with proxies and am having a great deal of trouble testing this. \r\n\r\nThe implementation is as follows:\r\n\r\n```\r\nproxySettings.setProxy(httpClientBuilder, null);\r\nRestTemplate restTemplate = new RestTemplate(\r\n    new HttpComponentsClientHttpRequestFactory(httpClientBuilder.build()));\r\n\r\n...\r\n\r\nrestTemplate.exchange(url, HttpMethod.POST, entity, type);\r\n```\r\n\r\nThe `setProxy()` method fetches some user configured proxy settings and applies them to the `HttpClientBuilder`:\r\n\r\n```\r\n//Fetch user-configured proxy settings and null check before returning object\r\nHttpHost proxyHttpHost = getHttpClientProxyHttpHost();\r\n\r\nhttpClientBuilder.setProxy(proxyHttpHost);\r\n\r\n//If user/pass is set (credentialsProvider is just a new instance of BasicCredentialsProvider)\r\ncredentialsProvider.setCredentials(\r\n    new AuthScope(getHttpProxyHost(), Integer.parseInt(getHttpProxyPort())),\r\n    proxyUsernamePasswordCredentials\r\n);\r\nhttpClientBuilder.setDefaultCredentialsProvider(credentialsProvider);\r\n```\r\n\r\nA non-proxy version of the test passes with this expectation:\r\n\r\n```\r\nexpect().when(\r\n    request()\r\n        .withMethod(&quot;POST&quot;)\r\n        .withPath(&quot;/auth&quot;)\r\n        .withBody(\r\n            params(\r\n                param(&quot;client_id&quot;, clientId),\r\n                param(&quot;client_secret&quot;, clientSecret),\r\n                param(&quot;grant_type&quot;, grantType),\r\n                param(&quot;scope&quot;, scope)\r\n            ))\r\n).respond(\r\n    response()\r\n        .withStatusCode(expectedResponseStatusCode)\r\n        .withContentType(MediaType.APPLICATION_JSON)\r\n        .withBody(json(&quot;{\\&quot;access_token\\&quot;:\\&quot;ImAHappyString\\&quot;}&quot;))\r\n);\r\n```\r\n\r\n\r\nWhen I run the test with the proxy configured (host: `proxy-host.com`, port: `1234`) I get the following error:\r\n\r\n```\r\nErrorMessage: I/O error on POST request for &quot;http://127.0.0.1:37351/auth&quot;: proxy-host.com: Name or service not known; nested exception is java.net.UnknownHostException: proxy-host.com: Name or service not known\r\n```\r\n\r\nI tried expecting a `CONNECT` request, but I just get the same failure. Any suggestions?","title":"How to mock a RestTemplate proxy call?","body":"<p>I have an integration test that correctly mocks an auth call, but it needs to support a proxy now. I'm inexperienced with proxies and am having a great deal of trouble testing this.</p>\n<p>The implementation is as follows:</p>\n<pre><code>proxySettings.setProxy(httpClientBuilder, null);\nRestTemplate restTemplate = new RestTemplate(\n    new HttpComponentsClientHttpRequestFactory(httpClientBuilder.build()));\n\n...\n\nrestTemplate.exchange(url, HttpMethod.POST, entity, type);\n</code></pre>\n<p>The <code>setProxy()</code> method fetches some user configured proxy settings and applies them to the <code>HttpClientBuilder</code>:</p>\n<pre><code>//Fetch user-configured proxy settings and null check before returning object\nHttpHost proxyHttpHost = getHttpClientProxyHttpHost();\n\nhttpClientBuilder.setProxy(proxyHttpHost);\n\n//If user/pass is set (credentialsProvider is just a new instance of BasicCredentialsProvider)\ncredentialsProvider.setCredentials(\n    new AuthScope(getHttpProxyHost(), Integer.parseInt(getHttpProxyPort())),\n    proxyUsernamePasswordCredentials\n);\nhttpClientBuilder.setDefaultCredentialsProvider(credentialsProvider);\n</code></pre>\n<p>A non-proxy version of the test passes with this expectation:</p>\n<pre><code>expect().when(\n    request()\n        .withMethod(&quot;POST&quot;)\n        .withPath(&quot;/auth&quot;)\n        .withBody(\n            params(\n                param(&quot;client_id&quot;, clientId),\n                param(&quot;client_secret&quot;, clientSecret),\n                param(&quot;grant_type&quot;, grantType),\n                param(&quot;scope&quot;, scope)\n            ))\n).respond(\n    response()\n        .withStatusCode(expectedResponseStatusCode)\n        .withContentType(MediaType.APPLICATION_JSON)\n        .withBody(json(&quot;{\\&quot;access_token\\&quot;:\\&quot;ImAHappyString\\&quot;}&quot;))\n);\n</code></pre>\n<p>When I run the test with the proxy configured (host: <code>proxy-host.com</code>, port: <code>1234</code>) I get the following error:</p>\n<pre><code>ErrorMessage: I/O error on POST request for &quot;http://127.0.0.1:37351/auth&quot;: proxy-host.com: Name or service not known; nested exception is java.net.UnknownHostException: proxy-host.com: Name or service not known\n</code></pre>\n<p>I tried expecting a <code>CONNECT</code> request, but I just get the same failure. Any suggestions?</p>\n"},{"tags":["java","apache-httpclient-4.x","profiler"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1694175945,"post_id":77066841,"comment_id":135860518,"body_markdown":"So? Looks linear to me. What kind of performance did you expect to get?","body":"So? Looks linear to me. What kind of performance did you expect to get?"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1694176156,"post_id":77066841,"comment_id":135860557,"body_markdown":"&quot;same speed&quot; as compared to what? are request concurrent or sequential? Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example).","body":"&quot;same speed&quot; as compared to what? are request concurrent or sequential? Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":19522690,"reputation":113,"user_id":14284182,"display_name":"Haster"},"score":0,"creation_date":1694179542,"post_id":77066841,"comment_id":135861276,"body_markdown":"@Kayaman, I expected that my application would get answer with same time as my app don&#39;t exceed any resources (as CPU, memory or network)","body":"@Kayaman, I expected that my application would get answer with same time as my app don&#39;t exceed any resources (as CPU, memory or network)"},{"owner":{"account_id":19522690,"reputation":113,"user_id":14284182,"display_name":"Haster"},"score":0,"creation_date":1694179617,"post_id":77066841,"comment_id":135861291,"body_markdown":"@aled, same as when I load my app with 1000req/s.","body":"@aled, same as when I load my app with 1000req/s."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694180582,"post_id":77066841,"comment_id":135861516,"body_markdown":"You&#39;re profiling the _client_?","body":"You&#39;re profiling the <i>client</i>?"},{"owner":{"account_id":19522690,"reputation":113,"user_id":14284182,"display_name":"Haster"},"score":0,"creation_date":1694181178,"post_id":77066841,"comment_id":135861633,"body_markdown":"@Kayaman, I profile my spring app and in profiler I see that method execute of httpclient works longer","body":"@Kayaman, I profile my spring app and in profiler I see that method execute of httpclient works longer"}],"owner":{"account_id":19522690,"reputation":113,"user_id":14284182,"display_name":"Haster"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694175692,"creation_date":1694175692,"question_id":77066841,"body_markdown":"I have a problem with my spring boot application.\r\nI have a rest controller that sends some http request by apache httpclient.\r\n\r\nSo when I load 1000 req/s to my controller I get answer after 1ms (in average)\r\nBut when I load 3000 req/s - I get answer after 3 ms (in average).\r\ncpu load is about 70%\r\n\r\nI tried to profile my application with jprofiler and found that increased time in ClosableHttpClient.execute method.\r\n\r\nI decided that problem is that remote endpoint send data back slowly, but after some research I found that remote endpoint send data back with the same speed.\r\n\r\nAnd now I don&#39;t have any ideas how to profile this testcase.\r\n","title":"Profiling java application","body":"<p>I have a problem with my spring boot application.\nI have a rest controller that sends some http request by apache httpclient.</p>\n<p>So when I load 1000 req/s to my controller I get answer after 1ms (in average)\nBut when I load 3000 req/s - I get answer after 3 ms (in average).\ncpu load is about 70%</p>\n<p>I tried to profile my application with jprofiler and found that increased time in ClosableHttpClient.execute method.</p>\n<p>I decided that problem is that remote endpoint send data back slowly, but after some research I found that remote endpoint send data back with the same speed.</p>\n<p>And now I don't have any ideas how to profile this testcase.</p>\n"},{"tags":["java","pdf","pdf-generation","flying-saucer","xhtmlrenderer"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1694184379,"post_id":77066828,"comment_id":135862286,"body_markdown":"*this should be displaying Han- and Korean Characters just fine.* Example codepoints please..?","body":"<i>this should be displaying Han- and Korean Characters just fine.</i> Example codepoints please..?"}],"owner":{"account_id":26509586,"reputation":21,"user_id":20145130,"display_name":"Erik Radisch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694175528,"creation_date":1694175528,"question_id":77066828,"body_markdown":"I am using Flying Saucer and xhtmlrenderer to produce PDFs from a String-HTML-Code.\r\n\r\nThe Html-String is:\r\n\r\n```\r\n&lt;html&gt;\r\n &lt;head&gt;\r\n  &lt;style type=&quot;text/css&quot;&gt;\r\n    @font-face {\r\n\r\n    font-family: &#39;Arial&#39;;\r\n\r\n    src: url(&quot;fonts/ARIALUNI.TTF&quot;);\r\n\r\n    -fs-pdf-font-embed: embed;\r\n\r\n    -fs-pdf-font-encoding: Identity-H;\r\n}\r\n\r\n    * { font-family: &#39;Arial&#39;!important; }&lt;/style&gt;\r\n &lt;/head&gt;\r\n &lt;body&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim, Sohyeun [&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim, Sohyŏn] &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;김소현&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;1993,&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; Tang sidae ŭi hobok e kwanhan yŏn&#39;gu &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;당시대의 호복에 관한 연구 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;/ The Study on the ‘Ho Bok (Chinese: Hu-Fu, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;胡服&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)’ in the T’ang Dynasty. Ph. D. Dissertation, Ewha Woman’s University: Department of Clothing and Textiles. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Keywords: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kucha, hairstyle, Book of Wei, Weishu, Old Book of Tang, Jiutangshu, clothing, costume, Great Tang Records on the Western Regions, Da Tang Xiyu ji, History of Northern Dynasties, Beishi.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Notes: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Information in parenthesis are supplemented by Ji Ho Yi. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Summary: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Costume of Kucha is treated in pp. 68–73, (1) K&#39;uch&#39;a, K&#39;arasyarŭ ŭi poksik &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;쿠차&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;카라샤르의 복식 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Costume of Kucha, Karashar) under Na. Sŏyŏkpukto- K&#39;uch&#39;a, K&#39;arasyarŭ, T&#39;urŭp&#39;an-ŭi poksik &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;나&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;서역북도&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;- &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;쿠차&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;카라샤르&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;투르판&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;-&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;의 복식 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(B. Costume of Northern Circuit of Western Regions (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Xiyu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;西域&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)-Kucha, Karashar, Turfan). Kim refers to various visual materials and Chinese literary materials. Following are excerpts of relevant passages from Kim’s dissertation:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Hairstyle&lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;ul&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim writes that Kucha’s custom of cutting one’s hair might have been influenced by the Persians. According to Chinese accounts of Persians in the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Weishu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;魏書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) and the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Tang&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Jiutangshu,&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;舊&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;唐書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), it was typical for Persians to cut their hair. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n  &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-left: 0.64cm; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(In volume 102 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102) of the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, the relevant sentences are as follows: (According to) local custom, the men cut (their) hair, wear white leather hat. The shirt has a hole for the head (?), the sleeves open as they come closer to the bottom. There is also a headscarf, the borders are made of patterned garment. Women wear large coats and put on large skirts. Their hair is knotted at the front and draped in the back. They decorate (themselves) with golden and silver flowers, added with a string of beads in five colours, draped at the limbs. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其俗丈夫剪髮，戴白皮帽&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;貫頭衫，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;兩廂近下開之，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;亦有巾&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;帔&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;緣以織成&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;婦女服大衫，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;披大&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;帔&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其髮前&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;為&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;髻，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;後披之，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;飾以金銀花，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;仍貫五色珠，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;絡之於膊。&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;The account about Persian clothing in volume 198 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198) of &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old Book of Tang &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;is similar, only more detailed. It mentions that the male headscarves of used often sappanwood-dye-colour (red-orange, I translated &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;sufang &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;蘇方&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;as the name of tree, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Biancaea sappan&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), blue and white colours.&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; “&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;多用蘇方&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;青&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;白色&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;為&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;之&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;ul&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;“&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Both men and women (of Kucha) cut hair and let them down, along with neck garment (?), only the king does not cut his hair, …, the king covers the neck with silk brocade, wears a silk brocade robe and golden jewelled belt, sits on a golden lion throne&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;男女皆剪髮垂與項齊&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;唯王不剪髮&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;,…, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;其王以錦蒙項&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;着錦袍&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;金&lt;/font&gt;&lt;font face=&quot;&quot;&gt;寶帶&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;坐&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;金&lt;/font&gt;&lt;font face=&quot;&quot;&gt;獅子牀&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;.&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old Book of Tang&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Jiutangshu&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;舊唐書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 198 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;“&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;服飾錦褐&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;剪髮巾帽&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(“Wears silk brocade and fur, cuts hair and wears headscarf-hat.”) &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Xuanzang, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Great Tang Record of [Travels to] the Western Regions&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;大唐西域記&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Da Tang Xiyu Ji. &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;According to Buswell, Robert E. Jr. and Lopez, Donald S., 2014, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;The Princeton Dictionary of Buddhism. &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Princeton, N.J. and Oxford, United Kingdom: Princeton University Press, p. 224, this is “a travelogue of a pilgrimage to India by the Chinese translator and exegete Xuanzang (600/602–664) written in 646 at the request of the Tang emperor Taizong and edited by the monk Bianji (d. 652)…The &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Da Tang Xiyu ji &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;provides a comprehensive overview of the different countries that Xuanzang visited during his travels in India and Central Asia, offering detailed descriptions of the geography, climate, customs, languages, and religious practices of these various countries.”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, volume 1 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;1, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;1&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim supposes that the King of Kucha did not cut his hair because Kucha was subjugated to Turks and followed Turkic custom. She refers to &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;History of Northern Dynasties &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Beishi, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;北史&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 97 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;97, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;97), “the king’s head is bound with silk ribbon and it is let down to the back &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其王頭繫綵帶&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;垂之于後&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;and &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Weishu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;魏書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 102 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102), &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;which writes “The king’s head is bound with silk ribbon and it is let down to the back. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其王頭繫綵帶，垂之於後&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Collar: &lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;ul&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Everted collars (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;fanling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;翻領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) are found most often in Kizil wall paintings. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;A new form of collar, which has qualities of both everted collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;fanling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;翻領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) and straight collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;zhiling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;直領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) for the robe, is typical of Kucha. One can find such robes in the wall paintings in cave 8 of Kizil and cave 16 of Taitai’er which were supposedly painted during 7&lt;/span&gt;&lt;/font&gt;&lt;sup&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;th&lt;/span&gt;&lt;/font&gt;&lt;/sup&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; century CE. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n   &lt;li&gt;\r\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;There are many examples of figures who gather both sides of everted collar together and formed a round collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;banling&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;盤領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;). &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Women’s clothing: &lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Their costume of pants with tunic, as in the wall painting in cave 76 in Kizil, is similar to the Tocharian female costume. Kim supposes that this was the Aryan people’s costume before it was changed into Turkic style. Some women wore skirts, too. Clothing with everted collar and short sleeves were worn over the tunic. They were worn often in Central Asia. (Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\r\n  &lt;style type=&quot;text/css&quot;&gt;p { line-height: 115%; text-align: left; orphans: 2; widows: 2; margin-bottom: 0.25cm; direction: ltr; background: transparent }p.western { font-size: 12pt; so-language: de-DE }p.cjk { font-size: 12pt; so-language: zh-CN }p.ctl { font-family: &quot;Arial&quot;; font-size: 12pt; so-language: sa-IN }&lt;/style&gt;\r\n &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nThe Code, I am using for PDF-Generation is:\r\n\r\n\r\n```\r\nbyte[] bytes = html.getBytes(StandardCharsets.UTF_8); //String from above\r\nString utf8EncodedString = new String(bytes, StandardCharsets.UTF_8);\r\nDocument annotation = Jsoup.parse(utf8EncodedString, &quot;UTF-8&quot;);\r\nannotation.outputSettings().escapeMode(org.jsoup.nodes.Entities.EscapeMode.extended);\r\nannotation.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\r\ntry (ServletOutputStream out = response.getOutputStream()){\r\n  ITextRenderer renderer = new ITextRenderer();;\r\n  renderer.getFontResolver().addFont(&quot;fonts/ARIALUNI.TTF&quot;, BaseFont.EMBEDDED);\r\n  SharedContext sharedContext = renderer.getSharedContext();\r\n  sharedContext.setPrint(true);\r\n  sharedContext.setInteractive(false);\r\n  sharedContext.flushFonts();\r\n  renderer.setDocumentFromString(annotation.html());\r\n  renderer.layout();\r\n  renderer.createPDF(out);\r\n  response.setContentType(&quot;application/pdf&quot;);\r\n  out.close();\r\n} catch (IOException e) {\r\n  e.printStackTrace();\r\n}\r\n```\r\nThe PDF is generated just fine. However, the Han- and Korean Characters in it are being lost.\r\n\r\n\r\nAs you can see, I included the UTF-8 Font Arial. The TTF is 23 MB. \r\nFrom my understanding, this should be displaying Han- and Korean Characters just fine.\r\nI even included the font via CSS and by code (addFont). Bothy ways seem to be without any impact.\r\n\r\nDo I miss something? Does someone understand, where my mistake is? \r\n\r\nPlease help,\r\n\r\nErik","title":"xhtmlrenderer/Flying Saucer - UTF-8 Encoding not working","body":"<p>I am using Flying Saucer and xhtmlrenderer to produce PDFs from a String-HTML-Code.</p>\n<p>The Html-String is:</p>\n<pre><code>&lt;html&gt;\n &lt;head&gt;\n  &lt;style type=&quot;text/css&quot;&gt;\n    @font-face {\n\n    font-family: 'Arial';\n\n    src: url(&quot;fonts/ARIALUNI.TTF&quot;);\n\n    -fs-pdf-font-embed: embed;\n\n    -fs-pdf-font-encoding: Identity-H;\n}\n\n    * { font-family: 'Arial'!important; }&lt;/style&gt;\n &lt;/head&gt;\n &lt;body&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim, Sohyeun [&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim, Sohyŏn] &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;김소현&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;1993,&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; Tang sidae ŭi hobok e kwanhan yŏn'gu &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;당시대의 호복에 관한 연구 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;/ The Study on the ‘Ho Bok (Chinese: Hu-Fu, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;胡服&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)’ in the T’ang Dynasty. Ph. D. Dissertation, Ewha Woman’s University: Department of Clothing and Textiles. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Keywords: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kucha, hairstyle, Book of Wei, Weishu, Old Book of Tang, Jiutangshu, clothing, costume, Great Tang Records on the Western Regions, Da Tang Xiyu ji, History of Northern Dynasties, Beishi.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Notes: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Information in parenthesis are supplemented by Ji Ho Yi. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;b&gt;Summary: &lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Costume of Kucha is treated in pp. 68–73, (1) K'uch'a, K'arasyarŭ ŭi poksik &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;쿠차&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;카라샤르의 복식 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Costume of Kucha, Karashar) under Na. Sŏyŏkpukto- K'uch'a, K'arasyarŭ, T'urŭp'an-ŭi poksik &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;나&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;서역북도&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;- &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;쿠차&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;카라샤르&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;투르판&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;-&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;의 복식 &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(B. Costume of Northern Circuit of Western Regions (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Xiyu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;西域&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)-Kucha, Karashar, Turfan). Kim refers to various visual materials and Chinese literary materials. Following are excerpts of relevant passages from Kim’s dissertation:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Hairstyle&lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;ul&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim writes that Kucha’s custom of cutting one’s hair might have been influenced by the Persians. According to Chinese accounts of Persians in the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Weishu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;魏書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) and the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Tang&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Jiutangshu,&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;舊&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;唐書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), it was typical for Persians to cut their hair. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-left: 0.64cm; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(In volume 102 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102) of the &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, the relevant sentences are as follows: (According to) local custom, the men cut (their) hair, wear white leather hat. The shirt has a hole for the head (?), the sleeves open as they come closer to the bottom. There is also a headscarf, the borders are made of patterned garment. Women wear large coats and put on large skirts. Their hair is knotted at the front and draped in the back. They decorate (themselves) with golden and silver flowers, added with a string of beads in five colours, draped at the limbs. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其俗丈夫剪髮，戴白皮帽&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;貫頭衫，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;兩廂近下開之，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;亦有巾&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;帔&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;緣以織成&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;婦女服大衫，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;披大&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;帔&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其髮前&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;為&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;髻，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;後披之，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;飾以金銀花，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;仍貫五色珠，&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;絡之於膊。&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;The account about Persian clothing in volume 198 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198) of &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old Book of Tang &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;is similar, only more detailed. It mentions that the male headscarves of used often sappanwood-dye-colour (red-orange, I translated &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;sufang &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;蘇方&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;as the name of tree, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Biancaea sappan&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), blue and white colours.&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; “&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;多用蘇方&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;青&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;白色&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;為&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;之&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;ul&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;“&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Both men and women (of Kucha) cut hair and let them down, along with neck garment (?), only the king does not cut his hair, …, the king covers the neck with silk brocade, wears a silk brocade robe and golden jewelled belt, sits on a golden lion throne&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;男女皆剪髮垂與項齊&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;唯王不剪髮&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;,…, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;其王以錦蒙項&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;着錦袍&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;金&lt;/font&gt;&lt;font face=&quot;&quot;&gt;寶帶&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;坐&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;金&lt;/font&gt;&lt;font face=&quot;&quot;&gt;獅子牀&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;.&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Old Book of Tang&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Jiutangshu&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;舊唐書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 198 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;198)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;“&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;服飾錦褐&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;剪髮巾帽&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt;”&lt;/span&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(“Wears silk brocade and fur, cuts hair and wears headscarf-hat.”) &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Xuanzang, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Great Tang Record of [Travels to] the Western Regions&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;大唐西域記&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Da Tang Xiyu Ji. &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;According to Buswell, Robert E. Jr. and Lopez, Donald S., 2014, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;The Princeton Dictionary of Buddhism. &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Princeton, N.J. and Oxford, United Kingdom: Princeton University Press, p. 224, this is “a travelogue of a pilgrimage to India by the Chinese translator and exegete Xuanzang (600/602–664) written in 646 at the request of the Tang emperor Taizong and edited by the monk Bianji (d. 652)…The &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Da Tang Xiyu ji &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;provides a comprehensive overview of the different countries that Xuanzang visited during his travels in India and Central Asia, offering detailed descriptions of the geography, climate, customs, languages, and religious practices of these various countries.”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, volume 1 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;1, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;1&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Kim supposes that the King of Kucha did not cut his hair because Kucha was subjugated to Turks and followed Turkic custom. She refers to &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;History of Northern Dynasties &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Beishi, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;北史&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 97 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;97, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;97), “the king’s head is bound with silk ribbon and it is let down to the back &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其王頭繫綵帶&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;垂之于後&lt;/span&gt;&lt;/font&gt;&lt;span lang=&quot;ko-KR&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;and &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Book of Wei &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;Weishu, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;魏書&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;), volume 102 (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;juan &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;卷&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;102), &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;which writes “The king’s head is bound with silk ribbon and it is let down to the back. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;其王頭繫綵帶，垂之於後&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;. &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;(Translation by Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;”&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Collar: &lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;ul&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Everted collars (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;fanling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;翻領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) are found most often in Kizil wall paintings. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;A new form of collar, which has qualities of both everted collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;fanling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;翻領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) and straight collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;zhiling, &lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;直領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;) for the robe, is typical of Kucha. One can find such robes in the wall paintings in cave 8 of Kizil and cave 16 of Taitai’er which were supposedly painted during 7&lt;/span&gt;&lt;/font&gt;&lt;sup&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;th&lt;/span&gt;&lt;/font&gt;&lt;/sup&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt; century CE. &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n   &lt;li&gt;\n    &lt;p lang=&quot;de-DE&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;There are many examples of figures who gather both sides of everted collar together and formed a round collar (&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;i&gt;banling&lt;/i&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;, &lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;&quot;&gt;&lt;span lang=&quot;zh-CN&quot;&gt;&lt;font face=&quot;Arial&quot;&gt;&lt;span lang=&quot;ko-KR&quot;&gt;盤領&lt;/span&gt;&lt;/font&gt;&lt;/span&gt;&lt;/font&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;). &lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;p class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;br /&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;&lt;u&gt;Women’s clothing: &lt;/u&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;p lang=&quot;de-DE&quot; class=&quot;western&quot; style=&quot;line-height: 100%; margin-bottom: 0cm&quot;&gt;&lt;font face=&quot;Arial, serif&quot;&gt;&lt;span lang=&quot;en-GB&quot;&gt;Their costume of pants with tunic, as in the wall painting in cave 76 in Kizil, is similar to the Tocharian female costume. Kim supposes that this was the Aryan people’s costume before it was changed into Turkic style. Some women wore skirts, too. Clothing with everted collar and short sleeves were worn over the tunic. They were worn often in Central Asia. (Ji Ho Yi)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;\n  &lt;style type=&quot;text/css&quot;&gt;p { line-height: 115%; text-align: left; orphans: 2; widows: 2; margin-bottom: 0.25cm; direction: ltr; background: transparent }p.western { font-size: 12pt; so-language: de-DE }p.cjk { font-size: 12pt; so-language: zh-CN }p.ctl { font-family: &quot;Arial&quot;; font-size: 12pt; so-language: sa-IN }&lt;/style&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The Code, I am using for PDF-Generation is:</p>\n<pre><code>byte[] bytes = html.getBytes(StandardCharsets.UTF_8); //String from above\nString utf8EncodedString = new String(bytes, StandardCharsets.UTF_8);\nDocument annotation = Jsoup.parse(utf8EncodedString, &quot;UTF-8&quot;);\nannotation.outputSettings().escapeMode(org.jsoup.nodes.Entities.EscapeMode.extended);\nannotation.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\ntry (ServletOutputStream out = response.getOutputStream()){\n  ITextRenderer renderer = new ITextRenderer();;\n  renderer.getFontResolver().addFont(&quot;fonts/ARIALUNI.TTF&quot;, BaseFont.EMBEDDED);\n  SharedContext sharedContext = renderer.getSharedContext();\n  sharedContext.setPrint(true);\n  sharedContext.setInteractive(false);\n  sharedContext.flushFonts();\n  renderer.setDocumentFromString(annotation.html());\n  renderer.layout();\n  renderer.createPDF(out);\n  response.setContentType(&quot;application/pdf&quot;);\n  out.close();\n} catch (IOException e) {\n  e.printStackTrace();\n}\n</code></pre>\n<p>The PDF is generated just fine. However, the Han- and Korean Characters in it are being lost.</p>\n<p>As you can see, I included the UTF-8 Font Arial. The TTF is 23 MB.\nFrom my understanding, this should be displaying Han- and Korean Characters just fine.\nI even included the font via CSS and by code (addFont). Bothy ways seem to be without any impact.</p>\n<p>Do I miss something? Does someone understand, where my mistake is?</p>\n<p>Please help,</p>\n<p>Erik</p>\n"},{"tags":["java","spring-boot","spring-webflux","reactive-programming"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694174747,"post_id":77066692,"comment_id":135860277,"body_markdown":"I&#39;m not sure, but maybe this is a question for [Software Engineering Stack Exchange](https://softwareengineering.stackexchange.com/)","body":"I&#39;m not sure, but maybe this is a question for <a href=\"https://softwareengineering.stackexchange.com/\">Software Engineering Stack Exchange</a>"},{"owner":{"account_id":477949,"reputation":5596,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"score":0,"creation_date":1694176630,"post_id":77066692,"comment_id":135860655,"body_markdown":"Spring Reactive API&#39;s are non-blocking if both sides are reactive. There is no automatic backpressure handling (perhaps except for server queuing unhandled items). The client sets the amount of data it requests. It can request 1 item and then request another each time it handles the previous one, or it can request unlimited ones, and WebFlux will queue the items that are unhanded.  Another option is to use apis such as limitRange on the server side, limiting the amount of data sent. Generally there is no magical backpressure control until you use an appropriate API to implement it.","body":"Spring Reactive API&#39;s are non-blocking if both sides are reactive. There is no automatic backpressure handling (perhaps except for server queuing unhandled items). The client sets the amount of data it requests. It can request 1 item and then request another each time it handles the previous one, or it can request unlimited ones, and WebFlux will queue the items that are unhanded.  Another option is to use apis such as limitRange on the server side, limiting the amount of data sent. Generally there is no magical backpressure control until you use an appropriate API to implement it."},{"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"score":0,"creation_date":1694177288,"post_id":77066692,"comment_id":135860753,"body_markdown":"@GonenI nice. What about the Json response to a non-reactive client? My server is supposed to block the Flux somewhere to map it to Json. So, if it&#39;s true, there&#39;s a blocking operation on server side. Furthermore, if it&#39;s true, it breaks the logic of programming a reactive server-side to &quot;consume less resources&quot; since I&#39;m blocking a Thread to produce a Json response... or don&#39;t?","body":"@GonenI nice. What about the Json response to a non-reactive client? My server is supposed to block the Flux somewhere to map it to Json. So, if it&#39;s true, there&#39;s a blocking operation on server side. Furthermore, if it&#39;s true, it breaks the logic of programming a reactive server-side to &quot;consume less resources&quot; since I&#39;m blocking a Thread to produce a Json response... or don&#39;t?"},{"owner":{"account_id":477949,"reputation":5596,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"score":1,"creation_date":1694179057,"post_id":77066692,"comment_id":135861158,"body_markdown":"Non reactive clients block until the whole response is delivered. There will be one HTTP request and one response. The sending of the response on the server side will be a blocking operation for whatever server side thread is handling it. Any promises for more resource efficiency on reactive programming requires both sides to be reactive ( speak the same language )","body":"Non reactive clients block until the whole response is delivered. There will be one HTTP request and one response. The sending of the response on the server side will be a blocking operation for whatever server side thread is handling it. Any promises for more resource efficiency on reactive programming requires both sides to be reactive ( speak the same language )"},{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":0,"creation_date":1694238726,"post_id":77066692,"comment_id":135868187,"body_markdown":"@GonenI Not entirely sure. Because Webflux uses Netty async I/O capabilities to  write http responses. Therefore, depending on how well webflux is coded, it could &quot;suspend&quot; the response flux when the response is not consumed fast enough, even if the client is not reactive. Sure, it won&#39;t be fine-grained back-pressure (but anyway, HTTP protocol cannot do that. You&#39;d need something like RSocket instead), but it at least stream data from database. But I am not sure, we should find a doc or the code that handles Async I/O in Webflux to be sure (or create an example that demonstrate it).","body":"@GonenI Not entirely sure. Because Webflux uses Netty async I/O capabilities to  write http responses. Therefore, depending on how well webflux is coded, it could &quot;suspend&quot; the response flux when the response is not consumed fast enough, even if the client is not reactive. Sure, it won&#39;t be fine-grained back-pressure (but anyway, HTTP protocol cannot do that. You&#39;d need something like RSocket instead), but it at least stream data from database. But I am not sure, we should find a doc or the code that handles Async I/O in Webflux to be sure (or create an example that demonstrate it)."}],"answers":[{"tags":[],"owner":{"account_id":11604033,"reputation":1,"user_id":8500330,"display_name":"Sanjeev Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694175486,"creation_date":1694175486,"answer_id":77066823,"question_id":77066692,"body_markdown":"That’s a good question. From what I understand, backpressure is a mechanism to control the flow of data between a producer and a consumer in a reactive system. It allows the consumer to signal the producer how many elements it can handle, and prevent it from being overwhelmed by too much data.\r\n\r\n**If your end client is using declarative programming, it may not be able to handle backpressure properly. It may block the thread until it receives all the data from the reactive API, or it may lose some data if the buffer is full.**\r\n\r\n**To avoid these problems, your end client should also use reactive programming, such as WebClient in Spring WebFlux. This way, it can communicate with the reactive API in a non-blocking and asynchronous way, and apply backpressure strategies such as buffering, dropping, or sampling.**","title":"Spring Reactive Restful APIs - Is it really a non-blocking model?","body":"<p>That’s a good question. From what I understand, backpressure is a mechanism to control the flow of data between a producer and a consumer in a reactive system. It allows the consumer to signal the producer how many elements it can handle, and prevent it from being overwhelmed by too much data.</p>\n<p><strong>If your end client is using declarative programming, it may not be able to handle backpressure properly. It may block the thread until it receives all the data from the reactive API, or it may lose some data if the buffer is full.</strong></p>\n<p><strong>To avoid these problems, your end client should also use reactive programming, such as WebClient in Spring WebFlux. This way, it can communicate with the reactive API in a non-blocking and asynchronous way, and apply backpressure strategies such as buffering, dropping, or sampling.</strong></p>\n"}],"owner":{"account_id":18624324,"reputation":186,"user_id":13573784,"display_name":"Vitor Nilson"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":294,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694175486,"creation_date":1694174272,"question_id":77066692,"body_markdown":"I know that is possible to build my entire Spring boot application in reactive way.\r\n\r\nSo if my application uses R2DBC, I can do something like:\r\n\r\n```java\r\n@Repository\r\npublic interface PersonRepository extends ReactiveCrudRepository&lt;Person, UUID&gt; {\r\n\r\n Flux&lt;Person&gt; findAllByStatus(PersonStatusEnum status);\r\n}\r\n\r\n....\r\n\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class PersonService {\r\n \r\n private final PersonRepository repo;\r\n\r\n Flux&lt;Person&gt; findAllByStatus(PersonStatusEnum status){\r\n   return repo.findAllByStatus(status);\r\n }\r\n}\r\n\r\n....\r\n\r\n@RestController\r\n@RequestMapping(&quot;person&quot;)\r\n@RequiredArgsContructor\r\npublic class PersonController {\r\n private final PersonService service;\r\n \r\n @GetMapping(produces = MediaType.APPLICATION_JSON_VALUE)\r\n public ResponseEntity&lt;Flux&lt;Person&gt;&gt; findAllByStatus(@PathVariable(&quot;status&quot;) PersonStatusEnum status){\r\n\r\n   return ResponseEntity.ok(service.findAllByStatus(status));\r\n }\r\n\r\n\r\n} \r\n```\r\nIn the example above, I have 1000 records in my Person table, 900 of which have status &#39;ACTIVE&#39;.\r\n\r\nMy end client wants to retrieve all people with &#39;ACTIVE&#39; status. In this example, I&#39;m not using best practices like pagination.\r\n\r\nMy end constumer uses declarative programming. (It can be a cURL, or a Java application that uses RestTemplate).\r\n\r\n\r\nSomehow 900 is a huge amount of records for my application and from what I understand the backpressure in R2DBC will be performed automagically telling the database to send less data.\r\n\r\nWhat is the guarantee that my end client will receive the 900 records if they are using declarative Programming?\r\n\r\nDoes my client also need to be Reactive? (Using Webclient, for example).\r\n\r\nIf not, is `RestController` blocked somehow, waiting until the Repository has finished querying the database so my client will ? How does the whole body comes to a non Reactive client?\r\n\r\nI mean, the Reactive is supposed to be non blocking. But if a non Reactive client can consume a Reactive API, it has to block on some point of the code to send back the response.\r\n","title":"Spring Reactive Restful APIs - Is it really a non-blocking model?","body":"<p>I know that is possible to build my entire Spring boot application in reactive way.</p>\n<p>So if my application uses R2DBC, I can do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface PersonRepository extends ReactiveCrudRepository&lt;Person, UUID&gt; {\n\n Flux&lt;Person&gt; findAllByStatus(PersonStatusEnum status);\n}\n\n....\n\n@Service\n@RequiredArgsConstructor\npublic class PersonService {\n \n private final PersonRepository repo;\n\n Flux&lt;Person&gt; findAllByStatus(PersonStatusEnum status){\n   return repo.findAllByStatus(status);\n }\n}\n\n....\n\n@RestController\n@RequestMapping(&quot;person&quot;)\n@RequiredArgsContructor\npublic class PersonController {\n private final PersonService service;\n \n @GetMapping(produces = MediaType.APPLICATION_JSON_VALUE)\n public ResponseEntity&lt;Flux&lt;Person&gt;&gt; findAllByStatus(@PathVariable(&quot;status&quot;) PersonStatusEnum status){\n\n   return ResponseEntity.ok(service.findAllByStatus(status));\n }\n\n\n} \n</code></pre>\n<p>In the example above, I have 1000 records in my Person table, 900 of which have status 'ACTIVE'.</p>\n<p>My end client wants to retrieve all people with 'ACTIVE' status. In this example, I'm not using best practices like pagination.</p>\n<p>My end constumer uses declarative programming. (It can be a cURL, or a Java application that uses RestTemplate).</p>\n<p>Somehow 900 is a huge amount of records for my application and from what I understand the backpressure in R2DBC will be performed automagically telling the database to send less data.</p>\n<p>What is the guarantee that my end client will receive the 900 records if they are using declarative Programming?</p>\n<p>Does my client also need to be Reactive? (Using Webclient, for example).</p>\n<p>If not, is <code>RestController</code> blocked somehow, waiting until the Repository has finished querying the database so my client will ? How does the whole body comes to a non Reactive client?</p>\n<p>I mean, the Reactive is supposed to be non blocking. But if a non Reactive client can consume a Reactive API, it has to block on some point of the code to send back the response.</p>\n"},{"tags":["java","spring","mongodb","spring-security","spring-data-mongodb"],"owner":{"account_id":5296535,"reputation":169,"user_id":4227570,"display_name":"Sebastian Forza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694175319,"creation_date":1694097911,"question_id":77060634,"body_markdown":"I&#39;m trying to create an index (@CompoundIndex to be precise) like described in &#39;Example 186&#39; in https://docs.spring.io/spring-data/mongodb/docs/3.4.11/reference/html/#mapping.index-creation.\r\n\r\nThis is exactly how I try it:\r\n```\r\n@RequiredArgsConstructor\r\n@Configuration\r\npublic class MongoConfiguration {\r\n\r\n    private final MongoTemplate mongoTemplate;\r\n\r\n    @EventListener(ContextRefreshedEvent.class)\r\n    public void initIndicesAfterStartup() {\r\n\r\n        MappingContext&lt;? extends MongoPersistentEntity&lt;?&gt;, MongoPersistentProperty&gt; mappingContext = mongoTemplate\r\n            .getConverter().getMappingContext();\r\n\r\n        IndexResolver resolver = new MongoPersistentEntityIndexResolver(mappingContext);\r\n\r\n        IndexOperations indexOps = mongoTemplate.indexOps(MyDomainObject.class);\r\n        resolver.resolveIndexFor(MyDomainObject.class).forEach(indexOps::ensureIndex);\r\n    }\r\n```\r\n\r\nUnfortunately I get the following error:\r\n```\r\nCaused by: java.lang.IllegalArgumentException: Authentication object cannot be null\r\n\tat org.springframework.security.access.expression.SecurityExpressionRoot.&lt;init&gt;(SecurityExpressionRoot.java:76)\r\n\tat org.springframework.security.data.repository.query.SecurityEvaluationContextExtension$1.&lt;init&gt;(SecurityEvaluationContextExtension.java:124)\r\n\tat org.springframework.security.data.repository.query.SecurityEvaluationContextExtension.getRootObject(SecurityEvaluationContextExtension.java:124)\r\n\tat org.springframework.security.data.repository.query.SecurityEvaluationContextExtension.getRootObject(SecurityEvaluationContextExtension.java:89)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider$EvaluationContextExtensionAdapter.&lt;init&gt;(ExtensionAwareEvaluationContextProvider.java:415)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.lambda$toAdapters$3(ExtensionAwareEvaluationContextProvider.java:202)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.toAdapters(ExtensionAwareEvaluationContextProvider.java:203)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.access$000(ExtensionAwareEvaluationContextProvider.java:67)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider$ExtensionAwarePropertyAccessor.&lt;init&gt;(ExtensionAwareEvaluationContextProvider.java:225)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.doGetEvaluationContext(ExtensionAwareEvaluationContextProvider.java:131)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.getEvaluationContext(ExtensionAwareEvaluationContextProvider.java:111)\r\n\tat org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.getEvaluationContext(ExtensionAwareEvaluationContextProvider.java:67)\r\n\tat org.springframework.data.mapping.model.BasicPersistentEntity.getEvaluationContext(BasicPersistentEntity.java:557)\r\n\tat org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity.getEvaluationContext(BasicMongoPersistentEntity.java:219)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.getEvaluationContextForProperty(MongoPersistentEntityIndexResolver.java:664)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveCompoundIndexKeyFromStringDefinition(MongoPersistentEntityIndexResolver.java:499)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.createCompoundIndexDefinition(MongoPersistentEntityIndexResolver.java:437)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.createCompoundIndexDefinitions(MongoPersistentEntityIndexResolver.java:427)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.potentiallyCreateCompoundIndexDefinitions(MongoPersistentEntityIndexResolver.java:285)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveIndexForEntity(MongoPersistentEntityIndexResolver.java:127)\r\n\tat org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveIndexFor(MongoPersistentEntityIndexResolver.java:104)\r\n\tat org.springframework.data.mongodb.core.index.IndexResolver.resolveIndexFor(IndexResolver.java:79)\r\n\tat com.mytest.MongoConfiguration.initIndicesAfterStartup(MongoConfiguration.java:38)\r\n```\r\n\r\nObviously some code wants an Authentication object from the security context for some reason. \r\nI don&#39;t have a security context at that very time as I want to create the index automatically without user interference.\r\n\r\nI&#39;m using spring boot 2.7.11 and spring-data-mongodb 3.4.11.\r\n\r\nI can make that whole thing work by running these lines first before everything else in the `initIndicesAfterStartup()`:\r\n\r\n```\r\nUsernamePasswordAuthenticationToken authReq\r\n            = new UsernamePasswordAuthenticationToken(&quot;dummy_user&quot;, &quot;dummy_pwd&quot;);\r\n        SecurityContextHolder.getContext().setAuthentication(authReq);\r\n```\r\n\r\nIs there a way I can disable the SecurityEvaluationContextExtension which obviously tries to add the Authentication object to the evaluation context? I didn&#39;t find a way at least.\r\n\r\nI&#39;d appreciate any ideas on that.","title":"Spring: &quot;Authentication object cannot be null&quot; when creating MongoDB index programmatically","body":"<p>I'm trying to create an index (@CompoundIndex to be precise) like described in 'Example 186' in <a href=\"https://docs.spring.io/spring-data/mongodb/docs/3.4.11/reference/html/#mapping.index-creation\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/mongodb/docs/3.4.11/reference/html/#mapping.index-creation</a>.</p>\n<p>This is exactly how I try it:</p>\n<pre><code>@RequiredArgsConstructor\n@Configuration\npublic class MongoConfiguration {\n\n    private final MongoTemplate mongoTemplate;\n\n    @EventListener(ContextRefreshedEvent.class)\n    public void initIndicesAfterStartup() {\n\n        MappingContext&lt;? extends MongoPersistentEntity&lt;?&gt;, MongoPersistentProperty&gt; mappingContext = mongoTemplate\n            .getConverter().getMappingContext();\n\n        IndexResolver resolver = new MongoPersistentEntityIndexResolver(mappingContext);\n\n        IndexOperations indexOps = mongoTemplate.indexOps(MyDomainObject.class);\n        resolver.resolveIndexFor(MyDomainObject.class).forEach(indexOps::ensureIndex);\n    }\n</code></pre>\n<p>Unfortunately I get the following error:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Authentication object cannot be null\n    at org.springframework.security.access.expression.SecurityExpressionRoot.&lt;init&gt;(SecurityExpressionRoot.java:76)\n    at org.springframework.security.data.repository.query.SecurityEvaluationContextExtension$1.&lt;init&gt;(SecurityEvaluationContextExtension.java:124)\n    at org.springframework.security.data.repository.query.SecurityEvaluationContextExtension.getRootObject(SecurityEvaluationContextExtension.java:124)\n    at org.springframework.security.data.repository.query.SecurityEvaluationContextExtension.getRootObject(SecurityEvaluationContextExtension.java:89)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider$EvaluationContextExtensionAdapter.&lt;init&gt;(ExtensionAwareEvaluationContextProvider.java:415)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.lambda$toAdapters$3(ExtensionAwareEvaluationContextProvider.java:202)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n    at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.toAdapters(ExtensionAwareEvaluationContextProvider.java:203)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.access$000(ExtensionAwareEvaluationContextProvider.java:67)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider$ExtensionAwarePropertyAccessor.&lt;init&gt;(ExtensionAwareEvaluationContextProvider.java:225)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.doGetEvaluationContext(ExtensionAwareEvaluationContextProvider.java:131)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.getEvaluationContext(ExtensionAwareEvaluationContextProvider.java:111)\n    at org.springframework.data.spel.ExtensionAwareEvaluationContextProvider.getEvaluationContext(ExtensionAwareEvaluationContextProvider.java:67)\n    at org.springframework.data.mapping.model.BasicPersistentEntity.getEvaluationContext(BasicPersistentEntity.java:557)\n    at org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity.getEvaluationContext(BasicMongoPersistentEntity.java:219)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.getEvaluationContextForProperty(MongoPersistentEntityIndexResolver.java:664)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveCompoundIndexKeyFromStringDefinition(MongoPersistentEntityIndexResolver.java:499)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.createCompoundIndexDefinition(MongoPersistentEntityIndexResolver.java:437)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.createCompoundIndexDefinitions(MongoPersistentEntityIndexResolver.java:427)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.potentiallyCreateCompoundIndexDefinitions(MongoPersistentEntityIndexResolver.java:285)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveIndexForEntity(MongoPersistentEntityIndexResolver.java:127)\n    at org.springframework.data.mongodb.core.index.MongoPersistentEntityIndexResolver.resolveIndexFor(MongoPersistentEntityIndexResolver.java:104)\n    at org.springframework.data.mongodb.core.index.IndexResolver.resolveIndexFor(IndexResolver.java:79)\n    at com.mytest.MongoConfiguration.initIndicesAfterStartup(MongoConfiguration.java:38)\n</code></pre>\n<p>Obviously some code wants an Authentication object from the security context for some reason.\nI don't have a security context at that very time as I want to create the index automatically without user interference.</p>\n<p>I'm using spring boot 2.7.11 and spring-data-mongodb 3.4.11.</p>\n<p>I can make that whole thing work by running these lines first before everything else in the <code>initIndicesAfterStartup()</code>:</p>\n<pre><code>UsernamePasswordAuthenticationToken authReq\n            = new UsernamePasswordAuthenticationToken(&quot;dummy_user&quot;, &quot;dummy_pwd&quot;);\n        SecurityContextHolder.getContext().setAuthentication(authReq);\n</code></pre>\n<p>Is there a way I can disable the SecurityEvaluationContextExtension which obviously tries to add the Authentication object to the evaluation context? I didn't find a way at least.</p>\n<p>I'd appreciate any ideas on that.</p>\n"},{"tags":["java","c++","java-native-interface"],"comments":[{"owner":{"account_id":25589,"reputation":562121,"user_id":65863,"accept_rate":75,"display_name":"Remy Lebeau"},"score":2,"creation_date":1694149664,"post_id":77064243,"comment_id":135855970,"body_markdown":"You are not checking to make sure `env-&gt;GetMethodID()` is successful before calling `env-&gt;CallObjectMethod()`. You need to check the return value of `GetMethodID()` for NULL","body":"You are not checking to make sure <code>env-&gt;GetMethodID()</code> is successful before calling <code>env-&gt;CallObjectMethod()</code>. You need to check the return value of <code>GetMethodID()</code> for NULL"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1694173702,"post_id":77064243,"comment_id":135860061,"body_markdown":"Unrelated: since all your array members are of type `java.lang.reflect.Field` you can just look up the class and its `getName` method once.","body":"Unrelated: since all your array members are of type <code>java.lang.reflect.Field</code> you can just look up the class and its <code>getName</code> method once."}],"answers":[{"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694162016,"creation_date":1694162016,"answer_id":77065363,"question_id":77064243,"body_markdown":"You need to grab the `getFields` method from the metaclass, not the class.\r\n\r\nChange the line for `getFields` as follows:\r\n```\r\njmethodID getFields = env-&gt;GetMethodID(env-&gt;GetObjectClass(klass), &quot;getFields&quot;, &quot;()[Ljava/lang/reflect/Field;&quot;);\r\n```\r\nIt is an error in JNI to call `GetMethodID` on the same object as you do `CallXXXMethod`.","title":"Getting a list of all fields in a class using JNI","body":"<p>You need to grab the <code>getFields</code> method from the metaclass, not the class.</p>\n<p>Change the line for <code>getFields</code> as follows:</p>\n<pre><code>jmethodID getFields = env-&gt;GetMethodID(env-&gt;GetObjectClass(klass), &quot;getFields&quot;, &quot;()[Ljava/lang/reflect/Field;&quot;);\n</code></pre>\n<p>It is an error in JNI to call <code>GetMethodID</code> on the same object as you do <code>CallXXXMethod</code>.</p>\n"}],"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77065363,"answer_count":1,"score":0,"last_activity_date":1694174933,"creation_date":1694149148,"question_id":77064243,"body_markdown":"I am writing JNI code for a game and I&#39;m trying to get all fields of a particular class. Here&#39;s my code. It crashes at line 5 where I call `CallObjectMethod`. `classes` is an unordered map mapping `std::string` to `jclass`.\r\n```cpp\r\nvoid getAllFields(std::string className) {\r\n    jclass klass = getClass(className);\r\n    if (klass == NULL) return;\r\n    jmethodID getFields = env-&gt;GetMethodID(klass, &quot;getFields&quot;, &quot;()[Ljava/lang/reflect/Field;&quot;);\r\n    jobjectArray fieldsList = (jobjectArray) env-&gt;CallObjectMethod(klass, getFields); // error on this line\r\n    jsize len = env-&gt;GetArrayLength(fieldsList);\r\n        \r\n    for (jsize i = 0; i &lt; len; i++) {\r\n        jobject field = env-&gt;GetObjectArrayElement(fieldsList, i);\r\n        jclass fieldClass = env-&gt;GetObjectClass(field);\r\n        jmethodID getName = env-&gt;GetMethodID(fieldClass, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\r\n        jstring fieldName = (jstring) env-&gt;CallObjectMethod(field, getName);\r\n        const char *cFieldName = env-&gt;GetStringUTFChars(fieldName, 0);\r\n            \r\n        std::cout &lt;&lt; cFieldName &lt;&lt; std::endl;\r\n        env-&gt;ReleaseStringUTFChars(fieldName, cFieldName);\r\n    }\r\n}\r\n    \r\njclass getClass(std::string className) {\r\n    if (classes.contains(className))\r\n        return classes.at(className);\r\n    return NULL;\r\n}\r\n```","title":"Getting a list of all fields in a class using JNI","body":"<p>I am writing JNI code for a game and I'm trying to get all fields of a particular class. Here's my code. It crashes at line 5 where I call <code>CallObjectMethod</code>. <code>classes</code> is an unordered map mapping <code>std::string</code> to <code>jclass</code>.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>void getAllFields(std::string className) {\n    jclass klass = getClass(className);\n    if (klass == NULL) return;\n    jmethodID getFields = env-&gt;GetMethodID(klass, &quot;getFields&quot;, &quot;()[Ljava/lang/reflect/Field;&quot;);\n    jobjectArray fieldsList = (jobjectArray) env-&gt;CallObjectMethod(klass, getFields); // error on this line\n    jsize len = env-&gt;GetArrayLength(fieldsList);\n        \n    for (jsize i = 0; i &lt; len; i++) {\n        jobject field = env-&gt;GetObjectArrayElement(fieldsList, i);\n        jclass fieldClass = env-&gt;GetObjectClass(field);\n        jmethodID getName = env-&gt;GetMethodID(fieldClass, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\n        jstring fieldName = (jstring) env-&gt;CallObjectMethod(field, getName);\n        const char *cFieldName = env-&gt;GetStringUTFChars(fieldName, 0);\n            \n        std::cout &lt;&lt; cFieldName &lt;&lt; std::endl;\n        env-&gt;ReleaseStringUTFChars(fieldName, cFieldName);\n    }\n}\n    \njclass getClass(std::string className) {\n    if (classes.contains(className))\n        return classes.at(className);\n    return NULL;\n}\n</code></pre>\n"},{"tags":["java","netbeans","newtons-method"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1425668944,"post_id":28905824,"comment_id":46071019,"body_markdown":"I don&#39;t see any place in your code where you calculate, or display x2","body":"I don&#39;t see any place in your code where you calculate, or display x2"},{"owner":{"display_name":"user4227114"},"score":0,"creation_date":1425669114,"post_id":28905824,"comment_id":46071126,"body_markdown":"@azurefrog I already made a while loop, so it should calculate it automatically","body":"@azurefrog I already made a while loop, so it should calculate it automatically"},{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1425669123,"post_id":28905824,"comment_id":46071130,"body_markdown":"You said in your question you are looking for &quot;(Ex: X2 = 1.89012709)&quot;.  There&#39;s nothing in your code called x2.  You neither calculate nor attempt to display anything after &quot;The Error is: &lt;math&gt;&quot;, which is the output you are getting.  What is your *expected* output?","body":"You said in your question you are looking for &quot;(Ex: X2 = 1.89012709)&quot;.  There&#39;s nothing in your code called x2.  You neither calculate nor attempt to display anything after &quot;The Error is: &lt;math&gt;&quot;, which is the output you are getting.  What is your <i>expected</i> output?"},{"owner":{"display_name":"user4227114"},"score":0,"creation_date":1425669226,"post_id":28905824,"comment_id":46071191,"body_markdown":"I want the while loop to end when the error reaches less than 0.5%","body":"I want the while loop to end when the error reaches less than 0.5%"},{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1425669322,"post_id":28905824,"comment_id":46071243,"body_markdown":"Then you should make your while-loop dependent on the error being less then 0.5%.  Currently you terminate when `f(x1) &lt;= 0.05`, not when your error is less than 0.05.","body":"Then you should make your while-loop dependent on the error being less then 0.5%.  Currently you terminate when <code>f(x1) &lt;= 0.05</code>, not when your error is less than 0.05."},{"owner":{"display_name":"user4227114"},"score":0,"creation_date":1425669511,"post_id":28905824,"comment_id":46071360,"body_markdown":"When i tried to make the if condition if (Error &lt;= 0.5), I get nothing at all, because there is a problem in the while loop which I can&#39;t find.","body":"When i tried to make the if condition if (Error &lt;= 0.5), I get nothing at all, because there is a problem in the while loop which I can&#39;t find."}],"answers":[{"tags":[],"owner":{"account_id":3410182,"reputation":12151,"user_id":2860319,"accept_rate":75,"display_name":"The Gilbert Arenas Dagger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1425673552,"creation_date":1425673552,"answer_id":28907059,"question_id":28905824,"body_markdown":"The reason that your code is never &quot;hitting the last line&quot;, presumably you are referring to the return statement in your NewtonRhapson() method, is that it is in an infinite loop.  Each iteration of the loop is identical to the last.  You set x0 outside of the loop, then never set it again.  Given that the rest of the values / calculations in your loop are derived from x0 you are getting the same results over and over again.\r\n\r\n\r\n\r\n\r\n","title":"Newton-Raphson Method in Java","body":"<p>The reason that your code is never \"hitting the last line\", presumably you are referring to the return statement in your NewtonRhapson() method, is that it is in an infinite loop.  Each iteration of the loop is identical to the last.  You set x0 outside of the loop, then never set it again.  Given that the rest of the values / calculations in your loop are derived from x0 you are getting the same results over and over again.</p>\n"},{"tags":[],"owner":{"account_id":9628052,"reputation":1,"user_id":7147019,"display_name":"X-Dark"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1478910832,"creation_date":1478882004,"answer_id":40552316,"question_id":28905824,"body_markdown":" \r\n\r\n    public class NewtonRaphsonMethod {\r\n    \r\n    \r\n              // let f be a function defined as f(x) = 3x - e^x + sin(x)\r\n    \r\n            public static double f (double x){\r\n    \r\n               // return (3*x-(Math.pow(Math.E, x))+Math.sin(x));\r\n                return((Math.pow(x, 2))+5*x+6);\r\n            }\r\n    \r\n            // let g be a function defined as g(x) = f&#39;(x) = 3- e^x + cos (x)\r\n    \r\n    \r\n         public static double g (double x){\r\n    \r\n               // return (3-(Math.pow(Math.E, x))+Math.cos(x));\r\n        \t return(2*x+5);\r\n            }\r\n    \r\n    \r\n              public static double NewtonRaphson (){\r\n            \t  int iterations_number=0;\r\n                  boolean cont = true;\r\n                double x0 , x1, Error=0;\r\n                x0 =-1.8;\r\n                x1=0;\r\n    \r\n                while (cont){\r\n                \t\r\n                x1 = x0 - (f(x0)/g(x0));\r\n                Error = Math.abs(x1-x0);\r\n                iterations_number++;\r\n               // if (Error&lt;=0.0000000005){\r\n                if(iterations_number&gt;100){\r\n                cont = false;\r\n                System.out.println(&quot;The Program did it in &quot;+iterations_number+&quot; Step(s)&quot;);\r\n                System.out.println(&quot;The root is: &quot;+ x1);\r\n                 System.out.println(&quot;The Error is: &quot;+(Math.abs(x1-x0)/x1)*100+&quot;%&quot;);\r\n                }else{\r\n                \tx0=x1;\r\n                }\r\n                }\r\n    \r\n                return x1;\r\n            }\r\n     \r\n        public static void main(String[] args) {\r\n             NewtonRaphson();\r\n    \r\n        }\r\n    }","title":"Newton-Raphson Method in Java","body":"<pre><code>public class NewtonRaphsonMethod {\n\n\n          // let f be a function defined as f(x) = 3x - e^x + sin(x)\n\n        public static double f (double x){\n\n           // return (3*x-(Math.pow(Math.E, x))+Math.sin(x));\n            return((Math.pow(x, 2))+5*x+6);\n        }\n\n        // let g be a function defined as g(x) = f'(x) = 3- e^x + cos (x)\n\n\n     public static double g (double x){\n\n           // return (3-(Math.pow(Math.E, x))+Math.cos(x));\n         return(2*x+5);\n        }\n\n\n          public static double NewtonRaphson (){\n              int iterations_number=0;\n              boolean cont = true;\n            double x0 , x1, Error=0;\n            x0 =-1.8;\n            x1=0;\n\n            while (cont){\n\n            x1 = x0 - (f(x0)/g(x0));\n            Error = Math.abs(x1-x0);\n            iterations_number++;\n           // if (Error&lt;=0.0000000005){\n            if(iterations_number&gt;100){\n            cont = false;\n            System.out.println(\"The Program did it in \"+iterations_number+\" Step(s)\");\n            System.out.println(\"The root is: \"+ x1);\n             System.out.println(\"The Error is: \"+(Math.abs(x1-x0)/x1)*100+\"%\");\n            }else{\n                x0=x1;\n            }\n            }\n\n            return x1;\n        }\n\n    public static void main(String[] args) {\n         NewtonRaphson();\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26012737,"reputation":1,"user_id":19721541,"display_name":"Shelvean Kapita"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660109434,"creation_date":1659993498,"answer_id":73284115,"question_id":28905824,"body_markdown":"It takes about 5 iterations to converge to a root with an error of 1e-12.\r\n\r\n    public class Newton {\r\n\tpublic static double f(double x){\r\n\t\treturn(3*x-Math.exp(x)+Math.sin(x)); /* function */\r\n\t}\r\n\tpublic static double fp(double x){\r\n\t\treturn(3-Math.exp(x)+Math.cos(x)); /* derivative */\r\n\t}\r\n\r\n\tpublic static double NewtonMethod() {\r\n\t\tint it_count=0; /* iteration counter */\r\n\t\tint count_max=10; /* maximum allowed number of iterations*/\r\n\t\tdouble x0=2.0, x=1.0, error=1.0, tol=1E-12; /* initialize */\r\n\r\n\t\twhile((it_count&lt;=count_max) &amp;&amp; (error&gt;=tol))\r\n\t\t{\r\n\t\t\t/* loop while count&lt;=10 and Error &gt;= 1E-12 */\r\n\t\t\tx = x0 - f(x0)/fp(x0); /* Newton-Raphson method*/\r\n\t\t\terror = Math.abs(x-x0); /* error  */\r\n\t\t\tit_count++; /*update count*/\r\n\t\t\tx0=x; /* update root*/\r\n\t\t}\r\n\t\tSystem.out.println(&quot;The root is: &quot;+ x); /* print root*/\r\n\t\tSystem.out.println(&quot;The number of iterations is: &quot;+ it_count);/* print count*/\r\n\t\treturn x;\r\n\t}\r\n\tpublic static void main(String[] args){\r\n\t\tNewtonMethod();\r\n\t}\r\n}\r\n\r\n\r\n","title":"Newton-Raphson Method in Java","body":"<p>It takes about 5 iterations to converge to a root with an error of 1e-12.</p>\n<pre><code>public class Newton {\npublic static double f(double x){\n    return(3*x-Math.exp(x)+Math.sin(x)); /* function */\n}\npublic static double fp(double x){\n    return(3-Math.exp(x)+Math.cos(x)); /* derivative */\n}\n\npublic static double NewtonMethod() {\n    int it_count=0; /* iteration counter */\n    int count_max=10; /* maximum allowed number of iterations*/\n    double x0=2.0, x=1.0, error=1.0, tol=1E-12; /* initialize */\n\n    while((it_count&lt;=count_max) &amp;&amp; (error&gt;=tol))\n    {\n        /* loop while count&lt;=10 and Error &gt;= 1E-12 */\n        x = x0 - f(x0)/fp(x0); /* Newton-Raphson method*/\n        error = Math.abs(x-x0); /* error  */\n        it_count++; /*update count*/\n        x0=x; /* update root*/\n    }\n    System.out.println(&quot;The root is: &quot;+ x); /* print root*/\n    System.out.println(&quot;The number of iterations is: &quot;+ it_count);/* print count*/\n    return x;\n}\npublic static void main(String[] args){\n    NewtonMethod();\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"display_name":"user4227114"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10703,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1694174495,"creation_date":1425668579,"question_id":28905824,"body_markdown":"I am making a program to apply Newton-Raphson method in Java with an equation:\r\n&lt;br&gt;&lt;br&gt;\r\nf(x) = 3x - e^x + sin(x)\r\n&lt;br&gt;&lt;br&gt;\r\nAnd\r\n&lt;br&gt;&lt;br&gt;\r\ng(x) = f&#39;(x) = 3- e^x + cos (x)\r\n\r\nThe problem is when I tried to solve the equation in a paper to reach an error less than (0.5%) &lt;br&gt;\r\nI got: &lt;br&gt;&lt;br&gt;\r\n\r\n&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Xn  &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Error \r\n&lt;br&gt;\r\n&lt;br&gt;\r\n&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Xo = 2 &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|   &amp;nbsp;&amp;nbsp;&amp;nbsp;------------------------\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n &amp;nbsp; X1 = 1.900158400 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;5.254%\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n&amp;nbsp; X2 = 1.89012709 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0.5307%\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\nBut when I made the program in Java it does not reach the last line which is the required error &lt;br&gt; (Ex: X2 = 1.89012709)\r\n&lt;br&gt; It only displays the first line which is the first step which is &lt;br&gt;(X1 = 1.900158400)\r\n\r\nMy Java code is:\r\n\r\n    package newton.raphson.method;\r\n    \r\n    public class NewtonRaphsonMethod {\r\n        \r\n        \r\n              // let f be a function defined as f(x) = 3x - e^x + sin(x)\r\n            \r\n            public static double f (double x){\r\n            \r\n                return (3*x-(Math.pow(Math.E, x))+Math.sin(x));\r\n            }\r\n            \r\n            // let g be a function defined as g(x) = f&#39;(x) = 3- e^x + cos (x)\r\n            \r\n            \r\n         public static double g (double x){\r\n            \r\n                return (3-(Math.pow(Math.E, x))+Math.cos(x));\r\n            }\r\n         \r\n         \r\n              public static double NewtonRaphson (){\r\n                  int iterations_number=0;\r\n                  boolean cont = true;\r\n                double x0 , x1, Error=5000;\r\n                x0 =2;\r\n                x1=0;\r\n                \r\n                while (cont){\r\n                x1 = x0 - (f(x0)/g(x0));\r\n                Error = (Math.abs(x1-x0)/x1)*100;\r\n                iterations_number++;\r\n                if (f(x1)&lt;=0.05){\r\n                cont = false;\r\n                System.out.println(&quot;The Program did it in &quot;+iterations_number+&quot; Step(s)&quot;);\r\n                System.out.println(&quot;The root is: &quot;+ x1);\r\n                 System.out.println(&quot;The Error is: &quot;+(Math.abs(x1-x0)/x1)*100+&quot;%&quot;);\r\n                }\r\n                }\r\n                \r\n                return x1;\r\n            }\r\n         \r\n        public static void main(String[] args) {\r\n             NewtonRaphson();\r\n            \r\n        }\r\n    }\r\n\r\n\r\n\r\n&lt;br&gt;\r\n\r\nAnd the output is:\r\n\r\n    The Program did it in 1 Step(s)\r\n    The root is: 1.9001584993293807\r\n    The Error is: 5.254377500921955%","title":"Newton-Raphson Method in Java","body":"<p>I am making a program to apply Newton-Raphson method in Java with an equation:\n<br><br>\nf(x) = 3x - e^x + sin(x)\n<br><br>\nAnd\n<br><br>\ng(x) = f'(x) = 3- e^x + cos (x)</p>\n\n<p>The problem is when I tried to solve the equation in a paper to reach an error less than (0.5%) <br>\nI got: <br><br></p>\n\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Xn  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;Error \n<br>\n<br>\n&nbsp; &nbsp; &nbsp; &nbsp; Xo = 2 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|   &nbsp;&nbsp;&nbsp;------------------------\n<br>\n<br>\n &nbsp; X1 = 1.900158400 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.254%\n<br>\n<br>\n&nbsp; X2 = 1.89012709 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.5307%\n<br>\n<br></p>\n\n<p>But when I made the program in Java it does not reach the last line which is the required error <br> (Ex: X2 = 1.89012709)\n<br> It only displays the first line which is the first step which is <br>(X1 = 1.900158400)</p>\n\n<p>My Java code is:</p>\n\n<pre><code>package newton.raphson.method;\n\npublic class NewtonRaphsonMethod {\n\n\n          // let f be a function defined as f(x) = 3x - e^x + sin(x)\n\n        public static double f (double x){\n\n            return (3*x-(Math.pow(Math.E, x))+Math.sin(x));\n        }\n\n        // let g be a function defined as g(x) = f'(x) = 3- e^x + cos (x)\n\n\n     public static double g (double x){\n\n            return (3-(Math.pow(Math.E, x))+Math.cos(x));\n        }\n\n\n          public static double NewtonRaphson (){\n              int iterations_number=0;\n              boolean cont = true;\n            double x0 , x1, Error=5000;\n            x0 =2;\n            x1=0;\n\n            while (cont){\n            x1 = x0 - (f(x0)/g(x0));\n            Error = (Math.abs(x1-x0)/x1)*100;\n            iterations_number++;\n            if (f(x1)&lt;=0.05){\n            cont = false;\n            System.out.println(\"The Program did it in \"+iterations_number+\" Step(s)\");\n            System.out.println(\"The root is: \"+ x1);\n             System.out.println(\"The Error is: \"+(Math.abs(x1-x0)/x1)*100+\"%\");\n            }\n            }\n\n            return x1;\n        }\n\n    public static void main(String[] args) {\n         NewtonRaphson();\n\n    }\n}\n</code></pre>\n\n<p><br></p>\n\n<p>And the output is:</p>\n\n<pre><code>The Program did it in 1 Step(s)\nThe root is: 1.9001584993293807\nThe Error is: 5.254377500921955%\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":123871,"reputation":4275,"user_id":318599,"accept_rate":62,"display_name":"Anto"},"score":0,"creation_date":1276610565,"post_id":3045800,"comment_id":3116840,"body_markdown":"I just run the StartApplication class in my project","body":"I just run the StartApplication class in my project"},{"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"score":0,"creation_date":1338824435,"post_id":3045800,"comment_id":14185263,"body_markdown":"Have you found a fix? I am experiencing the same problem.","body":"Have you found a fix? I am experiencing the same problem."},{"owner":{"account_id":2163436,"reputation":1923,"user_id":1933494,"display_name":"J. Katzwinkel"},"score":0,"creation_date":1362010207,"post_id":3045800,"comment_id":21287623,"body_markdown":"Sometimes, cleaning everything up helps: `Project &gt; Clean &gt; Clean All`. Solved a similar issue for me.","body":"Sometimes, cleaning everything up helps: <code>Project &gt; Clean &gt; Clean All</code>. Solved a similar issue for me."}],"answers":[{"tags":[],"owner":{"account_id":142256,"reputation":3008,"user_id":349842,"accept_rate":62,"display_name":"Ross"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1276612864,"creation_date":1276612864,"answer_id":3046221,"question_id":3045800,"body_markdown":"The error can&#39;t resolve the first part of the package name: ee. Are you sure the package starts with ee? I see your Window class package starts with main.ee, does your engine project start with the same package structure?","title":"compile error: The import xxxx cannot be resolved","body":"<p>The error can't resolve the first part of the package name: ee. Are you sure the package starts with ee? I see your Window class package starts with main.ee, does your engine project start with the same package structure?</p>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301814,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396422914,"creation_date":1276613742,"answer_id":3046353,"question_id":3045800,"body_markdown":"Look for the House class in your second project, opens it and see what package it is in.  \r\n(line &quot;`package xxx.yyy.zzz;`&quot; at the beginning of the `House.java` file)\r\n\r\nThen make sure your `Window.java` file (class `main.ee.asus.GUI.FrameWindow.Window`) does have the line &quot;`import xxx.yyy.zzz.House;`&quot; in it.","title":"compile error: The import xxxx cannot be resolved","body":"<p>Look for the House class in your second project, opens it and see what package it is in.<br>\n(line \"<code>package xxx.yyy.zzz;</code>\" at the beginning of the <code>House.java</code> file)</p>\n\n<p>Then make sure your <code>Window.java</code> file (class <code>main.ee.asus.GUI.FrameWindow.Window</code>) does have the line \"<code>import xxx.yyy.zzz.House;</code>\" in it.</p>\n"},{"tags":[],"owner":{"account_id":1376,"reputation":61107,"user_id":1836,"accept_rate":90,"display_name":"Matthew Farwell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1276615124,"creation_date":1276615124,"answer_id":3046539,"question_id":3045800,"body_markdown":"I sometimes get weird behaviour with missing class files etc. when Eclipse is out of sync with the filesystem.\r\n\r\nYou could try refreshing all of your projects and doing a full rebuild.","title":"compile error: The import xxxx cannot be resolved","body":"<p>I sometimes get weird behaviour with missing class files etc. when Eclipse is out of sync with the filesystem.</p>\n\n<p>You could try refreshing all of your projects and doing a full rebuild.</p>\n"},{"tags":[],"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1338826569,"creation_date":1338826569,"answer_id":10884537,"question_id":3045800,"body_markdown":"I have been experiencing the same problem. I have an app A1(tablet version app) calling another app A2(phone version app). Upon calling, I see the same error message:\r\n\r\n    java.lang.Error: Unresolved compilation problems: \r\n    The import xxxxx cannot be resolved\r\n    xxxx cannot be resolved to a type\r\n    xxxx cannot be resolved to a type\r\n    xxxx cannot be resolved to a type\r\n\r\nAfter poking around for a while, I realized the problem was the A2 doesn&#39;t run on tablet at all. It&#39;s weird because the immediate previous version of A2 runs perfectly on the same tablet(I have been on board only for 1 month). So I decided there was something wrong in the build config.\r\n\r\nFinally, I fixed the problem by changing the order of Java Build Path. Although I have no idea why it worked, hopefully this will shed some light on your problem.\r\n\r\n","title":"compile error: The import xxxx cannot be resolved","body":"<p>I have been experiencing the same problem. I have an app A1(tablet version app) calling another app A2(phone version app). Upon calling, I see the same error message:</p>\n\n<pre><code>java.lang.Error: Unresolved compilation problems: \nThe import xxxxx cannot be resolved\nxxxx cannot be resolved to a type\nxxxx cannot be resolved to a type\nxxxx cannot be resolved to a type\n</code></pre>\n\n<p>After poking around for a while, I realized the problem was the A2 doesn't run on tablet at all. It's weird because the immediate previous version of A2 runs perfectly on the same tablet(I have been on board only for 1 month). So I decided there was something wrong in the build config.</p>\n\n<p>Finally, I fixed the problem by changing the order of Java Build Path. Although I have no idea why it worked, hopefully this will shed some light on your problem.</p>\n"},{"tags":[],"owner":{"account_id":1507058,"reputation":2933,"user_id":1410212,"accept_rate":88,"display_name":"lilalinux"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396429728,"creation_date":1396426162,"answer_id":22805218,"question_id":3045800,"body_markdown":"In my case it was a version conflict.\r\n\r\nI&#39;m using maven and updated many packages and bumped versions of many projects. Maybe the reactor built mixed something up, or the transitive dependencies weren&#39;t up-to-date, or it was a change in a project without a version increment. However, rebuilding that project explicitly via maven fixed the problem.\r\n\r\nEdit: When I think about it, it might also have been a conflict between eclipse&#39;s auto-build and building via maven on the command line.","title":"compile error: The import xxxx cannot be resolved","body":"<p>In my case it was a version conflict.</p>\n\n<p>I'm using maven and updated many packages and bumped versions of many projects. Maybe the reactor built mixed something up, or the transitive dependencies weren't up-to-date, or it was a change in a project without a version increment. However, rebuilding that project explicitly via maven fixed the problem.</p>\n\n<p>Edit: When I think about it, it might also have been a conflict between eclipse's auto-build and building via maven on the command line.</p>\n"}],"owner":{"account_id":123871,"reputation":4275,"user_id":318599,"accept_rate":62,"display_name":"Anto"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8902,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1694174495,"creation_date":1276610134,"question_id":3045800,"body_markdown":"I am developing a Java project using Eclipse. The project uses another project called *engine*, which I have added in my project build-path. As I need to call a *dabo* class, called *House*, in one of my project class, named *Window*, I have used the following code as usual:\r\n     \r\n    import ee.asus.kernel.House;\r\n\r\nI got however the following error in compiling time:   \r\n\r\n    Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problems: \r\n\tThe import ee cannot be resolved\r\n\tHouse cannot be resolved to a type\r\n\tHouse cannot be resolved to a type\r\n\tHouse cannot be resolved to a type\r\n\r\n    at main.ee.asus.GUI.FrameWindow.Window.&lt;init&gt;(Window.java:10)\r\n    at main.ee.asus.GUI.StartApplication.main(StartApplication.java:13)\r\n\r\nIt&#39;s worth to point out that my prject and the *dabo* project use the same directory/packages names. Does anyone have a clue where the error may be?","title":"compile error: The import xxxx cannot be resolved","body":"<p>I am developing a Java project using Eclipse. The project uses another project called <em>engine</em>, which I have added in my project build-path. As I need to call a <em>dabo</em> class, called <em>House</em>, in one of my project class, named <em>Window</em>, I have used the following code as usual:</p>\n\n<pre><code>import ee.asus.kernel.House;\n</code></pre>\n\n<p>I got however the following error in compiling time:   </p>\n\n<pre><code>Exception in thread \"main\" java.lang.Error: Unresolved compilation problems: \nThe import ee cannot be resolved\nHouse cannot be resolved to a type\nHouse cannot be resolved to a type\nHouse cannot be resolved to a type\n\nat main.ee.asus.GUI.FrameWindow.Window.&lt;init&gt;(Window.java:10)\nat main.ee.asus.GUI.StartApplication.main(StartApplication.java:13)\n</code></pre>\n\n<p>It's worth to point out that my prject and the <em>dabo</em> project use the same directory/packages names. Does anyone have a clue where the error may be?</p>\n"},{"tags":["java","indexing","janusgraph"],"owner":{"account_id":11120734,"reputation":23,"user_id":8163649,"display_name":"Hopper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694174366,"creation_date":1694174366,"question_id":77066704,"body_markdown":"Janusgraph version =&gt; 0.6.1\r\nTinkerpop version =&gt;3.5.1\r\nUsign Janusgraph in the embedded library mode and not in server mode.\r\n\r\nI am trying to create vertex centric index(es) on existing edge properties.\r\nTo start with I followed the steps in the documentation. With that I was getting the infamous issue of index getting stuck in INSTALLED state while waiting for it to get available (REGISTERED). On debugging it seemed like it was happening because of already open transactions at the time of waiting for the index to become available. As mentioned in several answers to similar problems online, I followed the steps to close open transactions before calling the ManagementSystem,awaitRelationIndexStatus method. This solved for the issue of index getting stuck in INSTALLED and now i am able to build edge index and REINDEX it. But the probelm is that since its closing all open transactions whatever operations are going on at the time of this indexing, will be aborted and might result in data loss. Please find below the code that i am using currently:\r\n\r\n```\r\npublic void registerVertexCentricIndexOnEdgeProperty(String edgeLabel, String propertyName, String userId) throws MinervaException {\r\n    String indexName = autoCreatedRelationIndexName(edgeLabel, propertyName);\r\n    StandardJanusGraph standardJanusGraph = (StandardJanusGraph) getGraphObjectByName();\r\n    JanusGraphManagement management = getManagementForGraph();\r\n    val propertyKey = management.getPropertyKey(propertyName);\r\n    val label = management.getEdgeLabel(edgeLabel);\r\n    val index = management.buildEdgeIndex(label, indexName, Direction.BOTH, propertyKey);\r\n    log.info(&quot;Created Edge Index: {}. Now Going to wait for it to become REGISTERED&quot;, index.name());\r\n    management.commit();\r\n\r\n    //Close all open transactions\r\n    standardJanusGraph.getOpenTransactions().forEach(JanusGraphTransaction::rollback);\r\n    ManagementSystem\r\n            .awaitRelationIndexStatus(\r\n                    standardJanusGraph,\r\n                    indexName,\r\n                    edgeLabel\r\n            ).call();\r\n    management = getManagementForGraph();\r\n    management.updateIndex(management.getRelationIndex(label, indexName), SchemaAction.REINDEX).get();\r\n    management.commit();\r\n}\r\n```\r\n\r\nIs there a cleaner and more graceful way to do this? I tried searching for similar issue but everywhere the solutions mention the closing of transactions as a mandatory step but if that is the case then this seems like a bug as the official documentation does not mention it explicitly anywhere. Moreover, it essentially means that you have to stop reads and writes on graph while doing reindexing which itself can take sometime to finish. Any help is appreciated.\r\n\r\n[ADDITIONAL NOTE] :\r\nI am trying to debug this locally using test cases in Java. In my case there are no ghost management instances (checked using mgmt.getOpenInstances()). There is only 1 open management instance which has the (current) suffix. Although, i see 4 open transactions using standardJanusGraph.getOpenTransaction(), and on closing them (as in the code above), i am able to move the index from INSTALLED to REGISTERED. I am unable to figure out whether these transactions are management transactions or normal graph transactions. Ideally I would want to not stop reads and writes on graph while this happens (at least for other labels, properties etc). \r\n","title":"Issue while creating Vertex Centric Index (Relation Index) on edge property","body":"<p>Janusgraph version =&gt; 0.6.1\nTinkerpop version =&gt;3.5.1\nUsign Janusgraph in the embedded library mode and not in server mode.</p>\n<p>I am trying to create vertex centric index(es) on existing edge properties.\nTo start with I followed the steps in the documentation. With that I was getting the infamous issue of index getting stuck in INSTALLED state while waiting for it to get available (REGISTERED). On debugging it seemed like it was happening because of already open transactions at the time of waiting for the index to become available. As mentioned in several answers to similar problems online, I followed the steps to close open transactions before calling the ManagementSystem,awaitRelationIndexStatus method. This solved for the issue of index getting stuck in INSTALLED and now i am able to build edge index and REINDEX it. But the probelm is that since its closing all open transactions whatever operations are going on at the time of this indexing, will be aborted and might result in data loss. Please find below the code that i am using currently:</p>\n<pre><code>public void registerVertexCentricIndexOnEdgeProperty(String edgeLabel, String propertyName, String userId) throws MinervaException {\n    String indexName = autoCreatedRelationIndexName(edgeLabel, propertyName);\n    StandardJanusGraph standardJanusGraph = (StandardJanusGraph) getGraphObjectByName();\n    JanusGraphManagement management = getManagementForGraph();\n    val propertyKey = management.getPropertyKey(propertyName);\n    val label = management.getEdgeLabel(edgeLabel);\n    val index = management.buildEdgeIndex(label, indexName, Direction.BOTH, propertyKey);\n    log.info(&quot;Created Edge Index: {}. Now Going to wait for it to become REGISTERED&quot;, index.name());\n    management.commit();\n\n    //Close all open transactions\n    standardJanusGraph.getOpenTransactions().forEach(JanusGraphTransaction::rollback);\n    ManagementSystem\n            .awaitRelationIndexStatus(\n                    standardJanusGraph,\n                    indexName,\n                    edgeLabel\n            ).call();\n    management = getManagementForGraph();\n    management.updateIndex(management.getRelationIndex(label, indexName), SchemaAction.REINDEX).get();\n    management.commit();\n}\n</code></pre>\n<p>Is there a cleaner and more graceful way to do this? I tried searching for similar issue but everywhere the solutions mention the closing of transactions as a mandatory step but if that is the case then this seems like a bug as the official documentation does not mention it explicitly anywhere. Moreover, it essentially means that you have to stop reads and writes on graph while doing reindexing which itself can take sometime to finish. Any help is appreciated.</p>\n<p>[ADDITIONAL NOTE] :\nI am trying to debug this locally using test cases in Java. In my case there are no ghost management instances (checked using mgmt.getOpenInstances()). There is only 1 open management instance which has the (current) suffix. Although, i see 4 open transactions using standardJanusGraph.getOpenTransaction(), and on closing them (as in the code above), i am able to move the index from INSTALLED to REGISTERED. I am unable to figure out whether these transactions are management transactions or normal graph transactions. Ideally I would want to not stop reads and writes on graph while this happens (at least for other labels, properties etc).</p>\n"},{"tags":["java","bouncycastle","pgp","openpgp"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694096556,"post_id":77059713,"comment_id":135848874,"body_markdown":"*What&#39;s the difference between detached and embedded signatures ?* Not much really. The latter is more convenient as you have only one entity to deal with, but the file format of the file into which you embed has to support embedding. Obviously, something like a text file doesn&#39;t, whereas office file formats usually do","body":"<i>What&#39;s the difference between detached and embedded signatures ?</i> Not much really. The latter is more convenient as you have only one entity to deal with, but the file format of the file into which you embed has to support embedding. Obviously, something like a text file doesn&#39;t, whereas office file formats usually do"}],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694174152,"creation_date":1694174152,"answer_id":77066674,"question_id":77059713,"body_markdown":"Not a full answer as I don&#39;t have time to rewrite your code, but:\r\n\r\nUnlike PKCS7/CMS/SMIME where an embedded (also called encapsulated) signature contains the data within the SignedData structure, in PGP a (non-detached) signed message is just a series of packets:\r\n\r\n1. a &quot;One-Pass Signature&quot; packet, which announces the algorithms to be used\r\n\r\n2. the data, normally as a &quot;Literal Data&quot; packet, but optionally can be a &quot;Compressed Data&quot; packet _containing_ the &quot;Literal Data&quot;\r\n\r\n3. a &quot;Signature&quot; packet, containing (to no one&#39;s great surprise) the signature _of_ the data\r\n\r\nSee [rfc4880 11.3](https://www.rfc-editor.org/rfc/rfc4880.html#section-11.3). Technically there is also defined an older format which doesn&#39;t use the &quot;One-Pass&quot; packet and has the Signature packet _before_ the data, but in practice that is obsolete.\r\n\r\nIn contrast a Signature packet by itself, which is what your code generates, is a detached signature, per 11.4 (one page down from the above link).\r\n\r\nTo generate the &#39;embedded&#39; signed-message in BCPG, you must therefore\r\n\r\n1. generate the One-Pass packet\r\n\r\n2. write the data into a Literal packet (or Compressed/Literal packets) AND update the signature with that data; it&#39;s most convenient to do these together, although it would be sufficient to do them separately as long as both are in fact done and consistent\r\n\r\n3. generate the Signature packet \r\n\r\nSee https://stackoverflow.com/questions/57574714/how-to-sign-and-verify-the-file-in-java for a working example (after the correction in my answer) or https://github.com/bcgit/bc-java/blob/main/pg/src/main/java/org/bouncycastle/openpgp/examples/SignedFileProcessor.java .\r\n\r\nWhen you (only) encrypt data in PGP you must first embed it in a Literal packet, or more commonly (and usually the default) Compressed/Literal packets, but when you sign-then-encrypt the signed-message is _already_ a PGP message and is fed _directly_ into Encrypted, or (again) more commonly into Compressed into Encrypted. I don&#39;t have to hand a good reference for that part.\r\n","title":"How do I write embedded pgp signatures in Java using bouncyCastle?","body":"<p>Not a full answer as I don't have time to rewrite your code, but:</p>\n<p>Unlike PKCS7/CMS/SMIME where an embedded (also called encapsulated) signature contains the data within the SignedData structure, in PGP a (non-detached) signed message is just a series of packets:</p>\n<ol>\n<li><p>a &quot;One-Pass Signature&quot; packet, which announces the algorithms to be used</p>\n</li>\n<li><p>the data, normally as a &quot;Literal Data&quot; packet, but optionally can be a &quot;Compressed Data&quot; packet <em>containing</em> the &quot;Literal Data&quot;</p>\n</li>\n<li><p>a &quot;Signature&quot; packet, containing (to no one's great surprise) the signature <em>of</em> the data</p>\n</li>\n</ol>\n<p>See <a href=\"https://www.rfc-editor.org/rfc/rfc4880.html#section-11.3\" rel=\"nofollow noreferrer\">rfc4880 11.3</a>. Technically there is also defined an older format which doesn't use the &quot;One-Pass&quot; packet and has the Signature packet <em>before</em> the data, but in practice that is obsolete.</p>\n<p>In contrast a Signature packet by itself, which is what your code generates, is a detached signature, per 11.4 (one page down from the above link).</p>\n<p>To generate the 'embedded' signed-message in BCPG, you must therefore</p>\n<ol>\n<li><p>generate the One-Pass packet</p>\n</li>\n<li><p>write the data into a Literal packet (or Compressed/Literal packets) AND update the signature with that data; it's most convenient to do these together, although it would be sufficient to do them separately as long as both are in fact done and consistent</p>\n</li>\n<li><p>generate the Signature packet</p>\n</li>\n</ol>\n<p>See <a href=\"https://stackoverflow.com/questions/57574714/how-to-sign-and-verify-the-file-in-java\">How to sign and verify the file in JAVA</a> for a working example (after the correction in my answer) or <a href=\"https://github.com/bcgit/bc-java/blob/main/pg/src/main/java/org/bouncycastle/openpgp/examples/SignedFileProcessor.java\" rel=\"nofollow noreferrer\">https://github.com/bcgit/bc-java/blob/main/pg/src/main/java/org/bouncycastle/openpgp/examples/SignedFileProcessor.java</a> .</p>\n<p>When you (only) encrypt data in PGP you must first embed it in a Literal packet, or more commonly (and usually the default) Compressed/Literal packets, but when you sign-then-encrypt the signed-message is <em>already</em> a PGP message and is fed <em>directly</em> into Encrypted, or (again) more commonly into Compressed into Encrypted. I don't have to hand a good reference for that part.</p>\n"}],"owner":{"account_id":25830230,"reputation":3,"user_id":19567568,"display_name":"Robin Reuteler"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77066674,"answer_count":1,"score":0,"last_activity_date":1694174152,"creation_date":1694090463,"question_id":77059713,"body_markdown":"I am trying to sign an encrypt a message in pgp, with an **embedded** signature. \r\n\r\nI am able to create a detached signature with the code below, using bouncyCastle&#39;s pgp libraries to sign and encrypt :\r\n```\r\npublic static byte[] pgpSign(PGPPrivateKey signingKey, byte[] data) throws PGPException, IOException {\r\n        PGPSignatureGenerator sGen = new PGPSignatureGenerator(\r\n                new BcPGPContentSignerBuilder(signingKey.getPublicKeyPacket().getAlgorithm(), SHA256));\r\n        sGen.init(PGPSignature.BINARY_DOCUMENT, signingKey);\r\n        sGen.update(data);\r\n        PGPSignature signature = sGen.generate();\r\n        ByteArrayOutputStream output = new ByteArrayOutputStream();\r\n        signature.encode(output);\r\n        output.close();\r\n        return output.toByteArray();\r\n}\r\n\r\npublic static byte[] pgpSignAndEncrypt_Detached(PGPPublicKey encryptionKey, PGPPrivateKey signingKey, byte[] data) throws IOException, PGPException, ClassCastException{\r\n        PGPEncryptedDataGenerator encryptionGenerator = new PGPEncryptedDataGenerator(\r\n                new BcPGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\r\n                        .setSecureRandom(new SecureRandom())\r\n                        .setWithIntegrityPacket(true)\r\n        );\r\n        encryptionGenerator.addMethod(new BcPublicKeyKeyEncryptionMethodGenerator(encryptionKey));\r\n        ByteArrayOutputStream encryptedStream = new ByteArrayOutputStream();\r\n\r\n\r\n        OutputStream literalDataStream = encryptionGenerator.open(encryptedStream, new byte[1048576]);\r\n        OutputStream rawStream = new PGPLiteralDataGenerator().open(literalDataStream, PGPLiteralData.BINARY, &quot;&quot;, new Date(), new byte[1048576]);\r\n        rawStream.write(data);\r\n        rawStream.close();\r\n        literalDataStream.close();\r\n        encryptedStream.write(pgpSign(signingKey, data));\r\n        encryptedStream.close();\r\n        return encryptedStream.toByteArray();\r\n}\r\n```\r\n\r\nI was expecting to get an embedded signature, however, when trying to decrypt with gpg I get the following output :\r\n\r\n&gt; gpg2 --decrypt testEmbedded.pgp\r\n\r\n&gt; gpg: encrypted with 3072-bit RSA key, ID 9505FCA2AEF76A5B, created 2023-06-19\r\n&gt; \r\n&gt; &quot;userId (testKeypair) &lt;mailto:user@email.com&gt;&quot;\r\n&gt; \r\n&gt; Hello World\r\n&gt; \r\n&gt; Detached signature.\r\n&gt;\r\n&gt; Please enter name of data file:\r\n\r\nWhat&#39;s the difference between detached and embedded signatures ? After all this &quot;detached&quot; signature is in the same .pgp file as the encrypted message. \r\nHow do I create an embedded signature, such that I don&#39;t get prompted for the original data file to verify the signature when decrypting with gpg ?","title":"How do I write embedded pgp signatures in Java using bouncyCastle?","body":"<p>I am trying to sign an encrypt a message in pgp, with an <strong>embedded</strong> signature.</p>\n<p>I am able to create a detached signature with the code below, using bouncyCastle's pgp libraries to sign and encrypt :</p>\n<pre><code>public static byte[] pgpSign(PGPPrivateKey signingKey, byte[] data) throws PGPException, IOException {\n        PGPSignatureGenerator sGen = new PGPSignatureGenerator(\n                new BcPGPContentSignerBuilder(signingKey.getPublicKeyPacket().getAlgorithm(), SHA256));\n        sGen.init(PGPSignature.BINARY_DOCUMENT, signingKey);\n        sGen.update(data);\n        PGPSignature signature = sGen.generate();\n        ByteArrayOutputStream output = new ByteArrayOutputStream();\n        signature.encode(output);\n        output.close();\n        return output.toByteArray();\n}\n\npublic static byte[] pgpSignAndEncrypt_Detached(PGPPublicKey encryptionKey, PGPPrivateKey signingKey, byte[] data) throws IOException, PGPException, ClassCastException{\n        PGPEncryptedDataGenerator encryptionGenerator = new PGPEncryptedDataGenerator(\n                new BcPGPDataEncryptorBuilder(SymmetricKeyAlgorithmTags.AES_256)\n                        .setSecureRandom(new SecureRandom())\n                        .setWithIntegrityPacket(true)\n        );\n        encryptionGenerator.addMethod(new BcPublicKeyKeyEncryptionMethodGenerator(encryptionKey));\n        ByteArrayOutputStream encryptedStream = new ByteArrayOutputStream();\n\n\n        OutputStream literalDataStream = encryptionGenerator.open(encryptedStream, new byte[1048576]);\n        OutputStream rawStream = new PGPLiteralDataGenerator().open(literalDataStream, PGPLiteralData.BINARY, &quot;&quot;, new Date(), new byte[1048576]);\n        rawStream.write(data);\n        rawStream.close();\n        literalDataStream.close();\n        encryptedStream.write(pgpSign(signingKey, data));\n        encryptedStream.close();\n        return encryptedStream.toByteArray();\n}\n</code></pre>\n<p>I was expecting to get an embedded signature, however, when trying to decrypt with gpg I get the following output :</p>\n<blockquote>\n<p>gpg2 --decrypt testEmbedded.pgp</p>\n</blockquote>\n<blockquote>\n<p>gpg: encrypted with 3072-bit RSA key, ID 9505FCA2AEF76A5B, created 2023-06-19</p>\n<p>&quot;userId (testKeypair) mailto:user@email.com&quot;</p>\n<p>Hello World</p>\n<p>Detached signature.</p>\n<p>Please enter name of data file:</p>\n</blockquote>\n<p>What's the difference between detached and embedded signatures ? After all this &quot;detached&quot; signature is in the same .pgp file as the encrypted message.\nHow do I create an embedded signature, such that I don't get prompted for the original data file to verify the signature when decrypting with gpg ?</p>\n"},{"tags":["java","html","spring","jsp","model-view-controller"],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683282477,"creation_date":1683282477,"answer_id":76181230,"question_id":76180817,"body_markdown":"The property for your list is not available in any scope. Trying to print it doesn&#39;t do anything, so nothing is displayed. The model is what Spring MVC expected on the view layer, but you didn&#39;t add this property to the model. Wrong API usage makes it even  worse. You should start learning scopes of the JSP and how EL expressions search for properties. To add properties to the model you should use something like this\r\n\r\n```java\r\nmodel.addAttribute(&quot;listGamer&quot;, listGamer);\r\n```\r\n  ","title":"Table content is not displaying in JSP page","body":"<p>The property for your list is not available in any scope. Trying to print it doesn't do anything, so nothing is displayed. The model is what Spring MVC expected on the view layer, but you didn't add this property to the model. Wrong API usage makes it even  worse. You should start learning scopes of the JSP and how EL expressions search for properties. To add properties to the model you should use something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>model.addAttribute(&quot;listGamer&quot;, listGamer);\n</code></pre>\n"}],"owner":{"account_id":28471584,"reputation":1,"user_id":21786826,"display_name":"Shriram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694173789,"creation_date":1683279432,"question_id":76180817,"body_markdown":"My project is Spring MVC. In my JSP file the table heading is displaying but displaying any content inside the table that the lists from controller. I have tested the `List`s is accessing from database or not by using jUnit in my Dao file itself. I think something problem with Controller &amp; JSP file.\r\n\r\n````\r\npackage com.shriram.gaming.controller;\r\n\r\nimport java.util.List;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.servlet.ModelAndView;\r\n\r\nimport com.shriram.gaming.dao.GamerDAO;\r\nimport com.shriram.gaming.model.Gamer;\r\n\r\n@Controller\r\npublic class MainController {\r\n  \r\n  @Autowired\r\n  private GamerDAO gamerDAO;\r\n\r\n  @RequestMapping(value = &quot;/&quot;)\r\n  public ModelAndView listGamer(ModelAndView model) {\r\n    List&lt;Gamer&gt; listGamer = gamerDAO.list();\r\n//    System.out.println(&quot;List of Gamers:&quot;+ listGamer);\r\n    model.addObject(&quot;listGamer&quot;, listGamer);\r\n    model.setViewName(&quot;index&quot;);\r\n    \r\n    return model ;\r\n  }\r\n}\r\n\r\n````\r\n\r\n````\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n&lt;title&gt;Game Manager Home&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\t&lt;div align=&quot;center&quot;&gt;\r\n\t\t&lt;h1&gt;Gamer List&lt;/h1&gt;\r\n\t\t${listGamer}\r\n\t\t&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot;&gt;\r\n\t\t\t&lt;tr&gt;\r\n\t\t\t\t&lt;th&gt;ID&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;Name&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;Email&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;GamerTag&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;Phone&lt;/th&gt;\r\n\t\t\t\t&lt;th&gt;Action&lt;/th&gt;\r\n\t\t\t&lt;/tr&gt;\r\n\t\t\t&lt;c:forEach items=&quot;${listGamer}&quot; var=&quot;gamer&quot; varStatus=&quot;status&quot;&gt;\r\n\t\t\t&lt;tr&gt;\r\n\t\t\t\t&lt;td&gt;${status.index + 1}&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;${gamer.name}&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;${gamer.email}&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;${gamer.gamertag}&lt;/td&gt;\r\n\t\t\t\t&lt;td&gt;${gamer.phone}&lt;/td&gt;\r\n\t\t\t&lt;/tr&gt;\r\n\t\t\t&lt;/c:forEach&gt;\r\n\t\t\t\r\n\t\t&lt;/table&gt;\r\n\t\t\r\n\t&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n````\r\n\r\n\r\n\r\nI tried to display the values of the `Lists&lt;Gamer&gt;` if it holds in the controller. But it doesn&#39;t printing anything in the controller. ","title":"Table content is not displaying in JSP page","body":"<p>My project is Spring MVC. In my JSP file the table heading is displaying but displaying any content inside the table that the lists from controller. I have tested the <code>List</code>s is accessing from database or not by using jUnit in my Dao file itself. I think something problem with Controller &amp; JSP file.</p>\n<pre><code>package com.shriram.gaming.controller;\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport com.shriram.gaming.dao.GamerDAO;\nimport com.shriram.gaming.model.Gamer;\n\n@Controller\npublic class MainController {\n  \n  @Autowired\n  private GamerDAO gamerDAO;\n\n  @RequestMapping(value = &quot;/&quot;)\n  public ModelAndView listGamer(ModelAndView model) {\n    List&lt;Gamer&gt; listGamer = gamerDAO.list();\n//    System.out.println(&quot;List of Gamers:&quot;+ listGamer);\n    model.addObject(&quot;listGamer&quot;, listGamer);\n    model.setViewName(&quot;index&quot;);\n    \n    return model ;\n  }\n}\n\n</code></pre>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n&lt;title&gt;Game Manager Home&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div align=&quot;center&quot;&gt;\n        &lt;h1&gt;Gamer List&lt;/h1&gt;\n        ${listGamer}\n        &lt;table border=&quot;1&quot; cellpadding=&quot;5&quot;&gt;\n            &lt;tr&gt;\n                &lt;th&gt;ID&lt;/th&gt;\n                &lt;th&gt;Name&lt;/th&gt;\n                &lt;th&gt;Email&lt;/th&gt;\n                &lt;th&gt;GamerTag&lt;/th&gt;\n                &lt;th&gt;Phone&lt;/th&gt;\n                &lt;th&gt;Action&lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;c:forEach items=&quot;${listGamer}&quot; var=&quot;gamer&quot; varStatus=&quot;status&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;${status.index + 1}&lt;/td&gt;\n                &lt;td&gt;${gamer.name}&lt;/td&gt;\n                &lt;td&gt;${gamer.email}&lt;/td&gt;\n                &lt;td&gt;${gamer.gamertag}&lt;/td&gt;\n                &lt;td&gt;${gamer.phone}&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;/c:forEach&gt;\n            \n        &lt;/table&gt;\n        \n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I tried to display the values of the <code>Lists&lt;Gamer&gt;</code> if it holds in the controller. But it doesn't printing anything in the controller.</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":8447748,"reputation":38021,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"score":2,"creation_date":1536059930,"post_id":52164964,"comment_id":91279578,"body_markdown":"It should be stored as Double BSON type. The equivalent java class is java.lang.Double.","body":"It should be stored as Double BSON type. The equivalent java class is java.lang.Double."}],"answers":[{"tags":[],"owner":{"account_id":8447748,"reputation":38021,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536060929,"creation_date":1536060523,"answer_id":52165291,"question_id":52164964,"body_markdown":"You can store the `Double` BSON type to store the price value. If the price value is 100, it can be stored as `100.00`.\r\n\r\nThe equivalent Java type is `java.lang.Double`.\r\n\r\n[BSON to Java data type mapping][1]\r\n\r\nThe integer value can be converted to double in Java. Some sample code:-\r\n\r\n    new Double(100);\r\n    int i = 100;\r\n    new Double(i);\r\n    Integer i1 = 100;\r\n    new Double(i1);\r\n    double d1 = (double) i;\r\n\r\nThere is a new [Decimal128 BSON data type][2] available since 3.4 version. \r\n\r\nThe Java API can take `BigDecimal` or `long` value to construct the Decimal128 object. Please refer the above API documentation.\r\n\r\nRefer this [blog][3] to understand why Decimal128 is needed?\r\n\r\n[Floating point arithmetic accuracy problems][4]\r\n\r\n\r\n  [1]: http://mongodb.github.io/mongo-java-driver/3.6/bson/documents/\r\n  [2]: http://mongodb.github.io/mongo-java-driver/3.6/javadoc/?org/bson/types/Decimal128.html\r\n  [3]: http://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-decimal.html\r\n  [4]: https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems","title":"How to store price in Mongodb","body":"<p>You can store the <code>Double</code> BSON type to store the price value. If the price value is 100, it can be stored as <code>100.00</code>.</p>\n\n<p>The equivalent Java type is <code>java.lang.Double</code>.</p>\n\n<p><a href=\"http://mongodb.github.io/mongo-java-driver/3.6/bson/documents/\" rel=\"nofollow noreferrer\">BSON to Java data type mapping</a></p>\n\n<p>The integer value can be converted to double in Java. Some sample code:-</p>\n\n<pre><code>new Double(100);\nint i = 100;\nnew Double(i);\nInteger i1 = 100;\nnew Double(i1);\ndouble d1 = (double) i;\n</code></pre>\n\n<p>There is a new <a href=\"http://mongodb.github.io/mongo-java-driver/3.6/javadoc/?org/bson/types/Decimal128.html\" rel=\"nofollow noreferrer\">Decimal128 BSON data type</a> available since 3.4 version. </p>\n\n<p>The Java API can take <code>BigDecimal</code> or <code>long</code> value to construct the Decimal128 object. Please refer the above API documentation.</p>\n\n<p>Refer this <a href=\"http://thecodebarbarian.com/a-nodejs-perspective-on-mongodb-34-decimal.html\" rel=\"nofollow noreferrer\">blog</a> to understand why Decimal128 is needed?</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems\" rel=\"nofollow noreferrer\">Floating point arithmetic accuracy problems</a></p>\n"},{"tags":[],"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536061220,"creation_date":1536060568,"answer_id":52165302,"question_id":52164964,"body_markdown":"I think you can try to go for BigDecimal.\r\n\r\nYou can read here:\r\nhttps://stackoverflow.com/questions/12496555/java-best-type-to-hold-price\r\n\r\nJava&#39;s native floating point types (float and  double) suffer from the same precision issues as other programming languages. I think you can make BigDecimal  from String, long and double. But as I said you must not go to double. Please can you search a way to preserve without loosing precision inside of the Mongodb and after that convert it to BigDecimal directly. If you can not convert back easy to BigDecimal please use String to store inside Mongodb and after that construct BigDecimal from this String. \r\n\r\nHere I found one post and one article about this:\r\nhttps://stackoverflow.com/questions/37950296/spring-data-mongodb-bigdecimal-support\r\nhttps://www.moschetti.org/rants/mongomoney.html\r\n","title":"How to store price in Mongodb","body":"<p>I think you can try to go for BigDecimal.</p>\n\n<p>You can read here:\n<a href=\"https://stackoverflow.com/questions/12496555/java-best-type-to-hold-price\">Java best type to hold price</a></p>\n\n<p>Java's native floating point types (float and  double) suffer from the same precision issues as other programming languages. I think you can make BigDecimal  from String, long and double. But as I said you must not go to double. Please can you search a way to preserve without loosing precision inside of the Mongodb and after that convert it to BigDecimal directly. If you can not convert back easy to BigDecimal please use String to store inside Mongodb and after that construct BigDecimal from this String. </p>\n\n<p>Here I found one post and one article about this:\n<a href=\"https://stackoverflow.com/questions/37950296/spring-data-mongodb-bigdecimal-support\">Spring Data MongoDB BigDecimal support</a>\n<a href=\"https://www.moschetti.org/rants/mongomoney.html\" rel=\"nofollow noreferrer\">https://www.moschetti.org/rants/mongomoney.html</a></p>\n"},{"tags":[],"owner":{"account_id":3225847,"reputation":707,"user_id":2727257,"display_name":"leopinzon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585855572,"creation_date":1585855572,"answer_id":60999533,"question_id":52164964,"body_markdown":"**TL;DR**\r\n\r\n - `STRING` if you want to make the arithmetic operations on the client. \r\n - `BSON` if you want the arithmetic to happen within the db server and receive it in the response. \r\n\r\n**In depth (not that much)**\r\n\r\nIt depends on where do you wish to place your numeric operations. You can always save the pricing as a **`String`** type on MongoDB, always that you don&#39;t need to make **server-side** arithmetic (Non-Numeric Model) AND the precision on the decimals you need. \r\n\r\nIf you wish to make arithmetic operations from the query itself, you should use `Bson`. Leaving you the official mongo related doc below: \r\n\r\n&gt; **Numeric Model**\r\n\r\n&gt; The numeric model may be appropriate if you need to query the database for exact, mathematically valid matches or need to perform server-side arithmetic, e.g., $inc, $mul, and aggregation framework arithmetic.\r\n\r\n&gt; The following approaches follow the numeric model:\r\n\r\n&gt; Using the Decimal BSON Type which is a decimal-based floating-point format capable of providing exact precision. Available in MongoDB version 3.4 and later.\r\nUsing a Scale Factor to convert the monetary value to a 64-bit integer (long BSON type) by multiplying by a power of 10 scale factor.\r\n\r\n\r\n&gt; **Non-Numeric Model**\r\n\r\n&gt; If there is no need to perform server-side arithmetic on monetary data or if server-side approximations are sufficient, modeling monetary data using the non-numeric model may be suitable.\r\n\r\n&gt; The following approach follows the non-numeric model:\r\n\r\n&gt; Using two fields for the monetary value: One field stores the exact monetary value as a non-numeric string and another field stores a binary-based floating-point (double BSON type) approximation of the value.\r\n\r\nEDIT: Source: https://docs.mongodb.com/manual/tutorial/model-monetary-data/\r\n","title":"How to store price in Mongodb","body":"<p><strong>TL;DR</strong></p>\n\n<ul>\n<li><code>STRING</code> if you want to make the arithmetic operations on the client. </li>\n<li><code>BSON</code> if you want the arithmetic to happen within the db server and receive it in the response. </li>\n</ul>\n\n<p><strong>In depth (not that much)</strong></p>\n\n<p>It depends on where do you wish to place your numeric operations. You can always save the pricing as a <strong><code>String</code></strong> type on MongoDB, always that you don't need to make <strong>server-side</strong> arithmetic (Non-Numeric Model) AND the precision on the decimals you need. </p>\n\n<p>If you wish to make arithmetic operations from the query itself, you should use <code>Bson</code>. Leaving you the official mongo related doc below: </p>\n\n<blockquote>\n  <p><strong>Numeric Model</strong></p>\n  \n  <p>The numeric model may be appropriate if you need to query the database for exact, mathematically valid matches or need to perform server-side arithmetic, e.g., $inc, $mul, and aggregation framework arithmetic.</p>\n  \n  <p>The following approaches follow the numeric model:</p>\n  \n  <p>Using the Decimal BSON Type which is a decimal-based floating-point format capable of providing exact precision. Available in MongoDB version 3.4 and later.\n  Using a Scale Factor to convert the monetary value to a 64-bit integer (long BSON type) by multiplying by a power of 10 scale factor.</p>\n  \n  <p><strong>Non-Numeric Model</strong></p>\n  \n  <p>If there is no need to perform server-side arithmetic on monetary data or if server-side approximations are sufficient, modeling monetary data using the non-numeric model may be suitable.</p>\n  \n  <p>The following approach follows the non-numeric model:</p>\n  \n  <p>Using two fields for the monetary value: One field stores the exact monetary value as a non-numeric string and another field stores a binary-based floating-point (double BSON type) approximation of the value.</p>\n</blockquote>\n\n<p>EDIT: Source: <a href=\"https://docs.mongodb.com/manual/tutorial/model-monetary-data/\" rel=\"nofollow noreferrer\">https://docs.mongodb.com/manual/tutorial/model-monetary-data/</a></p>\n"},{"tags":[],"owner":{"account_id":3724990,"reputation":165,"user_id":3099108,"display_name":"Ken Kopelson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1625385977,"creation_date":1625385977,"answer_id":68242796,"question_id":52164964,"body_markdown":"Monetary values should not be stored using floating point numbers like Double.  Rounding errors can certainly happen, since these formats are not exact in their representation.  The proper type to use for MongoDB is the Decimal128 type, since it stores exact representations of the values, and it has enough precision to support all forms of monetary calculation.","title":"How to store price in Mongodb","body":"<p>Monetary values should not be stored using floating point numbers like Double.  Rounding errors can certainly happen, since these formats are not exact in their representation.  The proper type to use for MongoDB is the Decimal128 type, since it stores exact representations of the values, and it has enough precision to support all forms of monetary calculation.</p>\n"},{"tags":[],"owner":{"account_id":15305578,"reputation":2692,"user_id":11042460,"display_name":"Java wanna bee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694173202,"creation_date":1694173202,"answer_id":77066579,"question_id":52164964,"body_markdown":"For type `Number`, the MongoDB server will automatically set `Int32` as data type","title":"How to store price in Mongodb","body":"<p>For type <code>Number</code>, the MongoDB server will automatically set <code>Int32</code> as data type</p>\n"}],"owner":{"account_id":10169069,"reputation":89,"user_id":7509944,"accept_rate":25,"display_name":"Rishabh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1694173202,"creation_date":1536059397,"question_id":52164964,"body_markdown":"I have a price in String format, price can contain decimal and integer both.\r\nlike \r\n\r\n    String price =&quot;100.00&quot;;\r\n    String price =&quot;100&quot;;\r\n    String price =&quot;100.123&quot;;\r\nI want to store this in mongodb, as number(100) or just 100.23(not string).\r\nHow to handle this in java as parsers are different for Integer and other format.\r\n","title":"How to store price in Mongodb","body":"<p>I have a price in String format, price can contain decimal and integer both.\nlike </p>\n\n<pre><code>String price =\"100.00\";\nString price =\"100\";\nString price =\"100.123\";\n</code></pre>\n\n<p>I want to store this in mongodb, as number(100) or just 100.23(not string).\nHow to handle this in java as parsers are different for Integer and other format.</p>\n"},{"tags":["java","jar","graalvm","graalvm-native-image"],"answers":[{"tags":[],"owner":{"account_id":999177,"reputation":8970,"user_id":1014413,"accept_rate":60,"display_name":"inmyth"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1599753881,"creation_date":1599753881,"answer_id":63833581,"question_id":60654455,"body_markdown":"These steps work for me. I&#39;ve tried using slf4j and logback, log4j2 but the one that finally works is [slf4j-simple][1].\r\nBasically I try to include specific classes that trigger the initialization in `--initialize-at-build-time`. \r\nHere&#39;s what I do. \r\n- Add parameter `-H:+TraceClassInitialization` on the build command, like this:\r\n```\r\nnative-image -jar my-app.jar \r\n-H:IncludeResources=&quot;.*.xml|.*.conf&quot; \r\n-H:+ReportUnsupportedElementsAtRuntime \r\n-H:+TraceClassInitialization \r\n-H:Name=my-app\r\n--verbose\r\n```\r\n- Run it, you will see some error like this:\r\n```\r\nError: Classes that should be initialized at run time got initialized during image building:\r\n org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. io.netty.channel.AbstractChannel caused initialization of this class with the following trace:\r\n        at org.slf4j.simple.SimpleLogger.&lt;clinit&gt;(SimpleLogger.java) // THIS IS THE OFFENDING CLASS\r\n        at org.slf4j.simple.SimpleLoggerFactory.&lt;init&gt;(SimpleLoggerFactory.java:45)\r\n        at org.slf4j.simple.SimpleServiceProvider.initialize(SimpleServiceProvider.java:43)\r\n```\r\n- You see the one line I marked. That is the class to be included.\r\n- Next run the same command with extra parameter `--initialize-at-build-time=org.slf4j.simple.SimpleLogger`\r\n- Run it. You may need to repeat all the above steps as there could be more errors showing up. If so add the classes, separate them with commas.  \r\n\r\nIn my case the final command looks like this\r\n```\r\nnative-image -jar my-app.jar \r\n-H:IncludeResources=&quot;.*.xml|.*.conf&quot; \r\n-H:+ReportUnsupportedElementsAtRuntime \r\n-H:+TraceClassInitialization \r\n--initialize-at-build-time=org.slf4j.simple.SimpleLogger,org.slf4j.LoggerFactory\r\n-H:Name=my-app\r\n--verbose\r\n```\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.slf4j/slf4j-simple/2.0.0-alpha1","title":"How to fix &quot;Try avoiding to initialize the class that caused initialization&quot; with GraalVM native-image","body":"<p>These steps work for me. I've tried using slf4j and logback, log4j2 but the one that finally works is <a href=\"https://mvnrepository.com/artifact/org.slf4j/slf4j-simple/2.0.0-alpha1\" rel=\"noreferrer\">slf4j-simple</a>.\nBasically I try to include specific classes that trigger the initialization in <code>--initialize-at-build-time</code>.\nHere's what I do.</p>\n<ul>\n<li>Add parameter <code>-H:+TraceClassInitialization</code> on the build command, like this:</li>\n</ul>\n<pre><code>native-image -jar my-app.jar \n-H:IncludeResources=&quot;.*.xml|.*.conf&quot; \n-H:+ReportUnsupportedElementsAtRuntime \n-H:+TraceClassInitialization \n-H:Name=my-app\n--verbose\n</code></pre>\n<ul>\n<li>Run it, you will see some error like this:</li>\n</ul>\n<pre><code>Error: Classes that should be initialized at run time got initialized during image building:\n org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. io.netty.channel.AbstractChannel caused initialization of this class with the following trace:\n        at org.slf4j.simple.SimpleLogger.&lt;clinit&gt;(SimpleLogger.java) // THIS IS THE OFFENDING CLASS\n        at org.slf4j.simple.SimpleLoggerFactory.&lt;init&gt;(SimpleLoggerFactory.java:45)\n        at org.slf4j.simple.SimpleServiceProvider.initialize(SimpleServiceProvider.java:43)\n</code></pre>\n<ul>\n<li>You see the one line I marked. That is the class to be included.</li>\n<li>Next run the same command with extra parameter <code>--initialize-at-build-time=org.slf4j.simple.SimpleLogger</code></li>\n<li>Run it. You may need to repeat all the above steps as there could be more errors showing up. If so add the classes, separate them with commas.</li>\n</ul>\n<p>In my case the final command looks like this</p>\n<pre><code>native-image -jar my-app.jar \n-H:IncludeResources=&quot;.*.xml|.*.conf&quot; \n-H:+ReportUnsupportedElementsAtRuntime \n-H:+TraceClassInitialization \n--initialize-at-build-time=org.slf4j.simple.SimpleLogger,org.slf4j.LoggerFactory\n-H:Name=my-app\n--verbose\n</code></pre>\n"},{"tags":[],"owner":{"account_id":242832,"reputation":363,"user_id":514623,"display_name":"Alex Zuzin"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1614791289,"creation_date":1614791289,"answer_id":66461706,"question_id":60654455,"body_markdown":"Here&#39;s the full list of classes to exclude if you&#39;re using Slf4J and Logback:\r\n\r\n    --initialize-at-build-time=\\\r\n    org.slf4j.impl.StaticLoggerBinder\\\r\n    ,org.slf4j.LoggerFactory\\\r\n    ,ch.qos.logback.classic.Logger\\\r\n    ,ch.qos.logback.core.spi.AppenderAttachableImpl\\\r\n    ,ch.qos.logback.core.status.StatusBase\\\r\n    ,ch.qos.logback.classic.Level\\\r\n    ,ch.qos.logback.core.status.InfoStatus\\\r\n    ,ch.qos.logback.classic.PatternLayout\\\r\n    ,ch.qos.logback.core.CoreConstants","title":"How to fix &quot;Try avoiding to initialize the class that caused initialization&quot; with GraalVM native-image","body":"<p>Here's the full list of classes to exclude if you're using Slf4J and Logback:</p>\n<pre><code>--initialize-at-build-time=\\\norg.slf4j.impl.StaticLoggerBinder\\\n,org.slf4j.LoggerFactory\\\n,ch.qos.logback.classic.Logger\\\n,ch.qos.logback.core.spi.AppenderAttachableImpl\\\n,ch.qos.logback.core.status.StatusBase\\\n,ch.qos.logback.classic.Level\\\n,ch.qos.logback.core.status.InfoStatus\\\n,ch.qos.logback.classic.PatternLayout\\\n,ch.qos.logback.core.CoreConstants\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29394669,"reputation":11,"user_id":22522285,"display_name":"Luigi Graci"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694173101,"creation_date":1694173101,"answer_id":77066567,"question_id":60654455,"body_markdown":"First of all you have to trace what is the class that cause the &quot;build time initialization&quot; of the classes *org.apache.log4j.Level* and *org.slf4j.log4j12.Log4jLoggerAdapter*.\r\nTo do this add the following option to the native-image command:\r\n\r\n    --trace-class-initialization=org.apache.log4j.Level,org.slf4j.log4j12.Log4jLoggerAdapter\r\n\r\nrunning the build again you should see somehing like this:\r\n\r\n   \r\n\r\n     Error: Classes that should be initialized at run time got initialized during image building:\r\n     org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. **io.netty.channel.AbstractChannel** caused initialization of this class with the following trace:\r\n            at org.slf4j.simple.SimpleLogger.&lt;clinit&gt;(SimpleLogger.java) \r\n            at org.slf4j.simple.SimpleLoggerFactory.&lt;init&gt;(SimpleLoggerFactory.java:45)\r\n            at org.slf4j.simple.SimpleServiceProvider.initialize(SimpleServiceProvider.java:43)\r\n    [...]\r\n\r\nThe important info is just: &quot;org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. **io.netty.channel.AbstractChannel** caused initialization of this class&quot;\r\n\r\nSo the solution is to prevent the build-time initialization of the *io.netty.channel.AbstractChannel* class (in the example above, but you have to run the command for your own project to see what is the class that cause the problem). To do this add the following option to the native-image command:\r\n\r\n    --initialize-at-run-time=io.netty.channel.AbstractChannel\r\n\r\nYou may need to repeat these steps more times if more errors will be presented.","title":"How to fix &quot;Try avoiding to initialize the class that caused initialization&quot; with GraalVM native-image","body":"<p>First of all you have to trace what is the class that cause the &quot;build time initialization&quot; of the classes <em>org.apache.log4j.Level</em> and <em>org.slf4j.log4j12.Log4jLoggerAdapter</em>.\nTo do this add the following option to the native-image command:</p>\n<pre><code>--trace-class-initialization=org.apache.log4j.Level,org.slf4j.log4j12.Log4jLoggerAdapter\n</code></pre>\n<p>running the build again you should see somehing like this:</p>\n<pre><code> Error: Classes that should be initialized at run time got initialized during image building:\n org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. **io.netty.channel.AbstractChannel** caused initialization of this class with the following trace:\n        at org.slf4j.simple.SimpleLogger.&lt;clinit&gt;(SimpleLogger.java) \n        at org.slf4j.simple.SimpleLoggerFactory.&lt;init&gt;(SimpleLoggerFactory.java:45)\n        at org.slf4j.simple.SimpleServiceProvider.initialize(SimpleServiceProvider.java:43)\n[...]\n</code></pre>\n<p>The important info is just: &quot;org.slf4j.simple.SimpleLogger was unintentionally initialized at build time. <strong>io.netty.channel.AbstractChannel</strong> caused initialization of this class&quot;</p>\n<p>So the solution is to prevent the build-time initialization of the <em>io.netty.channel.AbstractChannel</em> class (in the example above, but you have to run the command for your own project to see what is the class that cause the problem). To do this add the following option to the native-image command:</p>\n<pre><code>--initialize-at-run-time=io.netty.channel.AbstractChannel\n</code></pre>\n<p>You may need to repeat these steps more times if more errors will be presented.</p>\n"}],"owner":{"account_id":9060448,"reputation":1048,"user_id":6747137,"display_name":"Sammers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14564,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":3,"score":20,"last_activity_date":1694173101,"creation_date":1584017264,"question_id":60654455,"body_markdown":"I&#39;m trying to create a native-image from a fat jar file with \r\n\r\n    $ native-image -H:+TraceClassInitialization --initialize-at-run-time=org.slf4j,org.apache.log4j \\\r\n                   -jar ./my-jar-with-dependencies.jar\r\n\r\nAnd I&#39;m getting those error messages like:\r\n\r\n&gt; Error: Classes that should be initialized at run time got initialized\r\n&gt; during image building:  org.apache.log4j.Level the class was requested\r\n&gt; to be initialized at build time (from the command line).\r\n&gt; org.apache.log4j.Level has been initialized without the native-image\r\n&gt; initialization instrumentation and the stack trace can&#39;t be tracked.\r\n&gt; Try avoiding to initialize the class that caused initialization of\r\n&gt; org.apache.log4j.Level org.slf4j.log4j12.Log4jLoggerAdapter the class\r\n&gt; was requested to be initialized at build time (from the command line).\r\n&gt; org.slf4j.log4j12.Log4jLoggerAdapter has been initialized without the\r\n&gt; native-image initialization instrumentation and the stack trace can&#39;t\r\n&gt; be tracked. Try avoiding to initialize the class that caused\r\n&gt; initialization of org.slf4j.log4j12.Log4jLoggerAdapter\r\n&gt; org.apache.log4j.Logger the class was requested to be initialized at\r\n&gt; build time (from the command line). org.apache.log4j.Logger has been\r\n&gt; initialized without the native-image initialization instrumentation\r\n&gt; and the stack trace can&#39;t be tracked. Try avoiding to initialize the\r\n&gt; class that caused initialization of org.apache.log4j.Logger\r\n\r\nWhat are the ways and approaches to `avoiding to initialize the class` issues? How can I deal with those messages?\r\n\r\nMy graavlVM version is 2.0.0-java11\r\n\r\n","title":"How to fix &quot;Try avoiding to initialize the class that caused initialization&quot; with GraalVM native-image","body":"<p>I'm trying to create a native-image from a fat jar file with </p>\n\n<pre><code>$ native-image -H:+TraceClassInitialization --initialize-at-run-time=org.slf4j,org.apache.log4j \\\n               -jar ./my-jar-with-dependencies.jar\n</code></pre>\n\n<p>And I'm getting those error messages like:</p>\n\n<blockquote>\n  <p>Error: Classes that should be initialized at run time got initialized\n  during image building:  org.apache.log4j.Level the class was requested\n  to be initialized at build time (from the command line).\n  org.apache.log4j.Level has been initialized without the native-image\n  initialization instrumentation and the stack trace can't be tracked.\n  Try avoiding to initialize the class that caused initialization of\n  org.apache.log4j.Level org.slf4j.log4j12.Log4jLoggerAdapter the class\n  was requested to be initialized at build time (from the command line).\n  org.slf4j.log4j12.Log4jLoggerAdapter has been initialized without the\n  native-image initialization instrumentation and the stack trace can't\n  be tracked. Try avoiding to initialize the class that caused\n  initialization of org.slf4j.log4j12.Log4jLoggerAdapter\n  org.apache.log4j.Logger the class was requested to be initialized at\n  build time (from the command line). org.apache.log4j.Logger has been\n  initialized without the native-image initialization instrumentation\n  and the stack trace can't be tracked. Try avoiding to initialize the\n  class that caused initialization of org.apache.log4j.Logger</p>\n</blockquote>\n\n<p>What are the ways and approaches to <code>avoiding to initialize the class</code> issues? How can I deal with those messages?</p>\n\n<p>My graavlVM version is 2.0.0-java11</p>\n"},{"tags":["java","jvm","rmi","jmx","jconsole"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694329572,"post_id":77066566,"comment_id":135875087,"body_markdown":"@Community I disagree completely. The question is perfectly clear. What could anyone possibly not understand about &#39;disable the JMX / RMI interface&#39;?","body":"@Community I disagree completely. The question is perfectly clear. What could anyone possibly not understand about &#39;disable the JMX / RMI interface&#39;?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694330198,"post_id":77066566,"comment_id":135875125,"body_markdown":"I don&#39;t know where you got the idea that it is discouraged to use that system property (it isn&#39;t), but setting it to zero will disable RMI completely, not just JMX, which is probably not your intention. According to [this JMX page](https://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html), remote JMX is not enabled by default: you have to set `com.sun.management.jmxremote.port`. So if you don&#39;t, the only host that can talk JMX to your JVM is the localhost. Or you could use one of the various authentication options to make it impossible for anybody to connect to JMX.","body":"I don&#39;t know where you got the idea that it is discouraged to use that system property (it isn&#39;t), but setting it to zero will disable RMI completely, not just JMX, which is probably not your intention. According to <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/management/agent.html\" rel=\"nofollow noreferrer\">this JMX page</a>, remote JMX is not enabled by default: you have to set <code>com.sun.management.jmxremote.port</code>. So if you don&#39;t, the only host that can talk JMX to your JVM is the localhost. Or you could use one of the various authentication options to make it impossible for anybody to connect to JMX."},{"owner":{"account_id":11007060,"reputation":1,"user_id":8085673,"display_name":"stopal"},"score":0,"creation_date":1695022137,"post_id":77066566,"comment_id":135963225,"body_markdown":"Thank you for the comment. Thats interesting. So it seems that it is always active for local connections. We were considering possible misuse and exploitation of the those informations that are provided via JMX. \n\nI guess that is nothing to worry about?\n\nThank you for the hint about local / remote connections","body":"Thank you for the comment. Thats interesting. So it seems that it is always active for local connections. We were considering possible misuse and exploitation of the those informations that are provided via JMX.   I guess that is nothing to worry about?  Thank you for the hint about local / remote connections"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695112610,"post_id":77066566,"comment_id":135977185,"body_markdown":"Starting the JMX Agent when the application is already running is done via the Attach API, which can be disabled via `-XX:+DisableAttachMechanism`. This does not prevent JMX if you start it via command line options explicitly (in other words, before the application) and still allows your application to use JMX itself.","body":"Starting the JMX Agent when the application is already running is done via the Attach API, which can be disabled via <code>-XX:+DisableAttachMechanism</code>. This does not prevent JMX if you start it via command line options explicitly (in other words, before the application) and still allows your application to use JMX itself."}],"owner":{"account_id":11007060,"reputation":1,"user_id":8085673,"display_name":"stopal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694173063,"creation_date":1694173063,"question_id":77066566,"body_markdown":"Is there a (JVM-vendor agnostic) way to disable the JMX / RMI interface so no one can access it via jConsole or other tools?\r\n\r\nIf not, is there a way to restrict the access (also JVM-vendor agnostic).\r\n\r\nI can limit the tcp connections to zero with `-Dsun.rmi.transport.tcp.maxConnectionThreads=0`. But this is probably not a good idea since it is discouraged to use.","title":"How to completely disable the JMX interface for java applications","body":"<p>Is there a (JVM-vendor agnostic) way to disable the JMX / RMI interface so no one can access it via jConsole or other tools?</p>\n<p>If not, is there a way to restrict the access (also JVM-vendor agnostic).</p>\n<p>I can limit the tcp connections to zero with <code>-Dsun.rmi.transport.tcp.maxConnectionThreads=0</code>. But this is probably not a good idea since it is discouraged to use.</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":0,"creation_date":1542100365,"post_id":53276185,"comment_id":93436941,"body_markdown":"Is it possible that this was happening before and you are now just seeing that it&#39;s happening due to some increased logging that might have been introduced in jre8? Do you know what kind of allocations you routinely make (e.g. are they very large in size)?","body":"Is it possible that this was happening before and you are now just seeing that it&#39;s happening due to some increased logging that might have been introduced in jre8? Do you know what kind of allocations you routinely make (e.g. are they very large in size)?"},{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":0,"creation_date":1542100615,"post_id":53276185,"comment_id":93437083,"body_markdown":"I think it is the case that the NewSize you might be setting is controlling the size of the entire new generation (which is composed of eden and survivor spaces) so perhaps your eden is still not sufficiently sized to allocate directly into for new large objects (perhaps large byte[]&#39;s for example)","body":"I think it is the case that the NewSize you might be setting is controlling the size of the entire new generation (which is composed of eden and survivor spaces) so perhaps your eden is still not sufficiently sized to allocate directly into for new large objects (perhaps large byte[]&#39;s for example)"},{"owner":{"account_id":243231,"reputation":169,"user_id":515265,"display_name":"Bhaskar"},"score":0,"creation_date":1542100661,"post_id":53276185,"comment_id":93437104,"body_markdown":"Major GC consumption is in young generation only and not in old. We have 10 GB allocated in totalfor heap and out of which 5GB for young.","body":"Major GC consumption is in young generation only and not in old. We have 10 GB allocated in totalfor heap and out of which 5GB for young."},{"owner":{"account_id":243231,"reputation":169,"user_id":515265,"display_name":"Bhaskar"},"score":0,"creation_date":1542100727,"post_id":53276185,"comment_id":93437150,"body_markdown":"But prior moving to java8, there was no such Allocation Failure in gc logs.","body":"But prior moving to java8, there was no such Allocation Failure in gc logs."},{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":0,"creation_date":1542100971,"post_id":53276185,"comment_id":93437299,"body_markdown":"What I am questioning is that even if you set the new to 5Gb, I think (https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html) with `SurvivorRatio` default being `8` I think would mean approx 1.25Gb of survivor space, leaving 3.75 Gb eden. Is it possible you allocate objects close to this size?","body":"What I am questioning is that even if you set the new to 5Gb, I think (<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/&zwnj;&#8203;&hellip;</a>) with <code>SurvivorRatio</code> default being <code>8</code> I think would mean approx 1.25Gb of survivor space, leaving 3.75 Gb eden. Is it possible you allocate objects close to this size?"},{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":1,"creation_date":1542101036,"post_id":53276185,"comment_id":93437340,"body_markdown":"With regards to the no such logs, in the answer you link to in your OP the accepted answer makes the comment &quot;Older JVM were not printing GC cause for minor GC cycles.&quot;. So perhaps this was always happening and you just didn&#39;t know until now.","body":"With regards to the no such logs, in the answer you link to in your OP the accepted answer makes the comment &quot;Older JVM were not printing GC cause for minor GC cycles.&quot;. So perhaps this was always happening and you just didn&#39;t know until now."},{"owner":{"account_id":243231,"reputation":169,"user_id":515265,"display_name":"Bhaskar"},"score":0,"creation_date":1542102917,"post_id":53276185,"comment_id":93438523,"body_markdown":"Thanks David, I think these logs will be there as part of new jvm. For allocation of objects I will check. Thanks for your comments.","body":"Thanks David, I think these logs will be there as part of new jvm. For allocation of objects I will check. Thanks for your comments."},{"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"score":0,"creation_date":1542103276,"post_id":53276185,"comment_id":93438776,"body_markdown":"No problem I&#39;ll move to answers, would appreciate (if it&#39;s helped) for you to mark as accepted.","body":"No problem I&#39;ll move to answers, would appreciate (if it&#39;s helped) for you to mark as accepted."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1542104384,"post_id":53276185,"comment_id":93439427,"body_markdown":"You want “to overcome” a normal behavior? That doesn’t make any sense.","body":"You want “to overcome” a normal behavior? That doesn’t make any sense."},{"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"score":0,"creation_date":1542213372,"post_id":53276185,"comment_id":93490574,"body_markdown":"I have to say the a scavenge every 10 mins shouldn&#39;t be regarded as a lot or a problem in any way, depending on application. I don&#39;t know what your app does but if it allocates any memory at all that is not bad. The scavenges are quite long, if that is problem or not depends on what your app is doing.","body":"I have to say the a scavenge every 10 mins shouldn&#39;t be regarded as a lot or a problem in any way, depending on application. I don&#39;t know what your app does but if it allocates any memory at all that is not bad. The scavenges are quite long, if that is problem or not depends on what your app is doing."}],"answers":[{"tags":[],"owner":{"account_id":5153148,"reputation":7842,"user_id":4127155,"accept_rate":45,"display_name":"David"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1542103384,"creation_date":1542103384,"answer_id":53278434,"question_id":53276185,"body_markdown":"I think it is the case that the `NewSize` you might be setting is controlling the size of the entire new generation (which is composed of eden **and** survivor spaces) so perhaps your eden is still not sufficiently sized to allocate directly into for new large objects (perhaps large byte[]&#39;s for example).\r\n\r\nWhat I am questioning is that even if you set the new to `5Gb`, I think [Oracle&#39;s docs][1] suggest with `SurvivorRatio` default being `8` would mean approx `1.25Gb` of survivor space, leaving `3.75 Gb` eden. Is it possible you allocate objects above or close to this size?\r\n\r\n\r\nWith regards to the no such logs, in the answer you link to in your OP the accepted answer makes the comment \r\n\r\n&gt; &quot;Older JVM were not printing GC cause for minor GC cycles.\r\n\r\nSo perhaps this was always happening and you just didn&#39;t know until now.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html","title":"GC (Allocation Failure) [PSYoungGen]","body":"<p>I think it is the case that the <code>NewSize</code> you might be setting is controlling the size of the entire new generation (which is composed of eden <strong>and</strong> survivor spaces) so perhaps your eden is still not sufficiently sized to allocate directly into for new large objects (perhaps large byte[]'s for example).</p>\n\n<p>What I am questioning is that even if you set the new to <code>5Gb</code>, I think <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/sizing.html\" rel=\"nofollow noreferrer\">Oracle's docs</a> suggest with <code>SurvivorRatio</code> default being <code>8</code> would mean approx <code>1.25Gb</code> of survivor space, leaving <code>3.75 Gb</code> eden. Is it possible you allocate objects above or close to this size?</p>\n\n<p>With regards to the no such logs, in the answer you link to in your OP the accepted answer makes the comment </p>\n\n<blockquote>\n  <p>\"Older JVM were not printing GC cause for minor GC cycles.</p>\n</blockquote>\n\n<p>So perhaps this was always happening and you just didn't know until now.</p>\n"},{"tags":[],"owner":{"account_id":29392326,"reputation":1,"user_id":22520373,"display_name":"Salman khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694172885,"creation_date":1694146792,"answer_id":77064110,"question_id":53276185,"body_markdown":"Use\r\n```none\r\n-XX:+UseG1GC -XX:+ExplicitGCInvokesConcurrent\r\n```\r\nThis will resolve your issue.\r\n\r\nIf you use the Garbage-First (G1) garbage collector, we recommend adding the `ExplicitGCInvokesConcurrent` property to the list of startup parameters. This reduces the chance of your application becoming temporarily unavailable while garbage collection is in progress.","title":"GC (Allocation Failure) [PSYoungGen]","body":"<p>Use</p>\n<pre class=\"lang-none prettyprint-override\"><code>-XX:+UseG1GC -XX:+ExplicitGCInvokesConcurrent\n</code></pre>\n<p>This will resolve your issue.</p>\n<p>If you use the Garbage-First (G1) garbage collector, we recommend adding the <code>ExplicitGCInvokesConcurrent</code> property to the list of startup parameters. This reduces the chance of your application becoming temporarily unavailable while garbage collection is in progress.</p>\n"}],"owner":{"account_id":243231,"reputation":169,"user_id":515265,"display_name":"Bhaskar"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19195,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":53278434,"answer_count":2,"score":3,"last_activity_date":1694172885,"creation_date":1542095391,"question_id":53276185,"body_markdown":"Recently we switched our code to java8 from java7. We are getting GC allocation failure in every 10 minuts for PSYoungGen. We even tried having switch -XX:NewSize and -XX:NewMaxSize in place to around 5GB(total heap size is 10GB). But even after gc allocation failure is getting printed and PSYoungGen is triggering to the almost the size(5GB). Added some logs :\r\n\r\n    [GC (Allocation Failure) [PSYoungGen: 3145728K-&gt;114922K(3670016K)] 3145728K-&gt;115026K(5767168K), 0.2511084 secs] [Times: user=0.26 sys=0.14, real=0.25 secs]\r\n    [GC (Allocation Failure) [PSYoungGen: 4443141K-&gt;125893K(4718592K)] 4443261K-&gt;126229K(6815744K), 0.2318927 secs] [Times: user=0.42 sys=0.22, real=0.24 secs]\r\n\r\n\r\nIn one of answers: https://stackoverflow.com/questions/28342736/java-gc-allocation-failure?noredirect=1&amp;lq=1 related to this I have seen this is normal behavior, just curious to know is there any way to overcome this ? Thanks.","title":"GC (Allocation Failure) [PSYoungGen]","body":"<p>Recently we switched our code to java8 from java7. We are getting GC allocation failure in every 10 minuts for PSYoungGen. We even tried having switch -XX:NewSize and -XX:NewMaxSize in place to around 5GB(total heap size is 10GB). But even after gc allocation failure is getting printed and PSYoungGen is triggering to the almost the size(5GB). Added some logs :</p>\n\n<pre><code>[GC (Allocation Failure) [PSYoungGen: 3145728K-&gt;114922K(3670016K)] 3145728K-&gt;115026K(5767168K), 0.2511084 secs] [Times: user=0.26 sys=0.14, real=0.25 secs]\n[GC (Allocation Failure) [PSYoungGen: 4443141K-&gt;125893K(4718592K)] 4443261K-&gt;126229K(6815744K), 0.2318927 secs] [Times: user=0.42 sys=0.22, real=0.24 secs]\n</code></pre>\n\n<p>In one of answers: <a href=\"https://stackoverflow.com/questions/28342736/java-gc-allocation-failure?noredirect=1&amp;lq=1\">Java GC (Allocation Failure)</a> related to this I have seen this is normal behavior, just curious to know is there any way to overcome this ? Thanks.</p>\n"},{"tags":["java","postgresql","jpa","spring-data-jpa","jsonb"],"comments":[{"owner":{"account_id":1339752,"reputation":249,"user_id":1281686,"display_name":"newbie"},"score":1,"creation_date":1694153087,"post_id":77064226,"comment_id":135856352,"body_markdown":"Why don&#39;t you just update the column have null values with jsonb_strip_nulls() function? Maybe you can create an SP and after all inserts, you can call this SP to strip null values from data.","body":"Why don&#39;t you just update the column have null values with jsonb_strip_nulls() function? Maybe you can create an SP and after all inserts, you can call this SP to strip null values from data."},{"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"score":0,"creation_date":1694154995,"post_id":77064226,"comment_id":135856630,"body_markdown":"How to avoid this while storing the data inside database on the above converter","body":"How to avoid this while storing the data inside database on the above converter"},{"owner":{"account_id":1062483,"reputation":20163,"user_id":1104979,"display_name":"Nick Barnes"},"score":2,"creation_date":1694161692,"post_id":77064226,"comment_id":135857802,"body_markdown":"I assume this is a Jackson `ObjectMapper`? It should omit null fields if you set `objectMapper.setSerializationInclusion(Include.NON_NULL)`.","body":"I assume this is a Jackson <code>ObjectMapper</code>? It should omit null fields if you set <code>objectMapper.setSerializationInclusion(Include.NON_NULL)</code>."}],"answers":[{"tags":[],"owner":{"account_id":28999910,"reputation":994,"user_id":22213656,"display_name":"Maimoona Abid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694172729,"creation_date":1694172729,"answer_id":77066522,"question_id":77064226,"body_markdown":"You may change your JsonbConverter to filter out null values from the MapString, Object&gt; before converting it to JSON in order to prevent storing fields with null values in a JSONB data type in PostgreSQL. Here is an updated converter that performs what you want. \r\nin this code the convertToDatabaseColumn method only includes non-null values in the output JSON and filters out null values from the input details map.\r\nThe JSON is changed back into a MapString, Object&gt; using the convertToEntityAttribute function.\r\n\r\nHere is the revised code:\r\n\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.node.ObjectNode;\r\n    import javax.persistence.AttributeConverter;\r\n    import javax.persistence.Converter;\r\n    import java.io.IOException;\r\n    import java.util.Map;\r\n    \r\n    @Converter\r\n    public class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\r\n    \r\n        private final ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @Override\r\n        public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\r\n            try {\r\n                if (details == null || details.isEmpty()) {\r\n                    return null;\r\n                }\r\n    \r\n                // Create an ObjectNode to hold non-null values\r\n                ObjectNode node = objectMapper.createObjectNode();\r\n                for (Map.Entry&lt;String, Object&gt; entry : details.entrySet()) {\r\n                    if (entry.getValue() != null) {\r\n                        JsonNode valueNode = objectMapper.valueToTree(entry.getValue());\r\n                        node.set(entry.getKey(), valueNode);\r\n                    }\r\n                }\r\n    \r\n                return objectMapper.writeValueAsString(node);\r\n            } catch (IOException jpe) {\r\n                log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\r\n                return null;\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\r\n            try {\r\n                if (dbData == null) {\r\n                    return null;\r\n                }\r\n    \r\n                JsonNode node = objectMapper.readTree(dbData);\r\n    \r\n                // Convert the JSON to a Map&lt;String, Object&gt;\r\n                Map&lt;String, Object&gt; value = objectMapper.convertValue(node, Map.class);\r\n    \r\n                return value;\r\n            } catch (IOException ioe) {\r\n                log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nHope it works :)\r\n","title":"How to avoid storing fields with null in JSONB data type","body":"<p>You may change your JsonbConverter to filter out null values from the MapString, Object&gt; before converting it to JSON in order to prevent storing fields with null values in a JSONB data type in PostgreSQL. Here is an updated converter that performs what you want.\nin this code the convertToDatabaseColumn method only includes non-null values in the output JSON and filters out null values from the input details map.\nThe JSON is changed back into a MapString, Object&gt; using the convertToEntityAttribute function.</p>\n<p>Here is the revised code:</p>\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\nimport javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\nimport java.io.IOException;\nimport java.util.Map;\n\n@Converter\npublic class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\n        try {\n            if (details == null || details.isEmpty()) {\n                return null;\n            }\n\n            // Create an ObjectNode to hold non-null values\n            ObjectNode node = objectMapper.createObjectNode();\n            for (Map.Entry&lt;String, Object&gt; entry : details.entrySet()) {\n                if (entry.getValue() != null) {\n                    JsonNode valueNode = objectMapper.valueToTree(entry.getValue());\n                    node.set(entry.getKey(), valueNode);\n                }\n            }\n\n            return objectMapper.writeValueAsString(node);\n        } catch (IOException jpe) {\n            log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\n            return null;\n        }\n    }\n\n    @Override\n    public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\n        try {\n            if (dbData == null) {\n                return null;\n            }\n\n            JsonNode node = objectMapper.readTree(dbData);\n\n            // Convert the JSON to a Map&lt;String, Object&gt;\n            Map&lt;String, Object&gt; value = objectMapper.convertValue(node, Map.class);\n\n            return value;\n        } catch (IOException ioe) {\n            log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\n            return null;\n        }\n    }\n}\n</code></pre>\n<p>Hope it works :)</p>\n"}],"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":1,"score":1,"last_activity_date":1694172729,"creation_date":1694148928,"question_id":77064226,"body_markdown":"How to avoid storing fields with null value while storing into postgres JSONB data type\r\n\r\nThis is the existing code for conversion, how to make it extensible but retain the structure as well\r\n\r\n    public class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\r\n    \r\n        private final ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n        @Override\r\n        public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\r\n            String value = null;\r\n    \r\n            try {\r\n                if (details == null || details.isEmpty()) {\r\n                    return value;\r\n                }\r\n    \r\n                value = objectMapper.writeValueAsString(details);\r\n            }\r\n            catch (JsonProcessingException jpe) {\r\n                log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\r\n            }\r\n    \r\n            return value;\r\n        }\r\n    \r\n        @Override\r\n        public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\r\n            Map&lt;String, Object&gt; value = null;\r\n    \r\n            try {\r\n                if (dbData == null) {\r\n                    return value;\r\n                }\r\n    \r\n                value = objectMapper.readValue(dbData, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\r\n                });\r\n            }\r\n            catch (IOException ioe) {\r\n                log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\r\n            }\r\n    \r\n            return value;\r\n        }\r\n    \r\n    }\r\n\r\nThe stored value is:\r\n\r\n    {&quot;categories&quot;: [{&quot;name&quot;: &quot;News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;UK News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Crime&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Dogs&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Parenting advice&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Pets&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Police&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}]}\r\n","title":"How to avoid storing fields with null in JSONB data type","body":"<p>How to avoid storing fields with null value while storing into postgres JSONB data type</p>\n<p>This is the existing code for conversion, how to make it extensible but retain the structure as well</p>\n<pre><code>public class JsonbConverter implements AttributeConverter&lt;Map&lt;String, Object&gt;, String&gt; {\n\n    private final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public String convertToDatabaseColumn(Map&lt;String, Object&gt; details) {\n        String value = null;\n\n        try {\n            if (details == null || details.isEmpty()) {\n                return value;\n            }\n\n            value = objectMapper.writeValueAsString(details);\n        }\n        catch (JsonProcessingException jpe) {\n            log.error(&quot;unable to convert details to db {}&quot;, details, jpe);\n        }\n\n        return value;\n    }\n\n    @Override\n    public Map&lt;String, Object&gt; convertToEntityAttribute(String dbData) {\n        Map&lt;String, Object&gt; value = null;\n\n        try {\n            if (dbData == null) {\n                return value;\n            }\n\n            value = objectMapper.readValue(dbData, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\n            });\n        }\n        catch (IOException ioe) {\n            log.error(&quot;unable to convert details to entity {}&quot;, dbData, ioe);\n        }\n\n        return value;\n    }\n\n}\n</code></pre>\n<p>The stored value is:</p>\n<pre><code>{&quot;categories&quot;: [{&quot;name&quot;: &quot;News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;UK News&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Crime&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Dogs&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Parenting advice&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Pets&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}, {&quot;name&quot;: &quot;Police&quot;, &quot;label&quot;: null, &quot;taxonomyUri&quot;: null}]}\n</code></pre>\n"},{"tags":["java","jvm","garbage-collection"],"answers":[{"tags":[],"owner":{"account_id":10465568,"reputation":840,"user_id":7715095,"display_name":"xyz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694074469,"creation_date":1694073267,"answer_id":77057638,"question_id":77021695,"body_markdown":"Probably you need to add this flag as well:\r\n\r\n    -XX:+UseContainerSupport\r\n\r\nFrom docs you will see that this will work only with Linux x64 platforms:\r\n\r\n&gt; -XX:-UseContainerSupport\r\nThe VM now provides automatic container detection support, which allows the VM to determine the amount of memory and number of processors that are available to a Java process running in docker containers. It uses this information to allocate system resources. This support is only available on Linux x64 platforms. If supported, the default for this flag is true, and container support is enabled by default. It can be disabled with -XX:-UseContainerSupport.\r\n \r\n\r\nThis flag can help also:\r\n\r\n    -XX:+AlwaysPreTouch\r\n\r\n&gt; -XX:+AlwaysPreTouch\r\nRequests the VM to touch every page on the Java heap after requesting it from the operating system and before handing memory out to the application. By default, this option is disabled and all pages are committed as the application uses the heap space.","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>Probably you need to add this flag as well:</p>\n<pre><code>-XX:+UseContainerSupport\n</code></pre>\n<p>From docs you will see that this will work only with Linux x64 platforms:</p>\n<blockquote>\n<p>-XX:-UseContainerSupport\nThe VM now provides automatic container detection support, which allows the VM to determine the amount of memory and number of processors that are available to a Java process running in docker containers. It uses this information to allocate system resources. This support is only available on Linux x64 platforms. If supported, the default for this flag is true, and container support is enabled by default. It can be disabled with -XX:-UseContainerSupport.</p>\n</blockquote>\n<p>This flag can help also:</p>\n<pre><code>-XX:+AlwaysPreTouch\n</code></pre>\n<blockquote>\n<p>-XX:+AlwaysPreTouch\nRequests the VM to touch every page on the Java heap after requesting it from the operating system and before handing memory out to the application. By default, this option is disabled and all pages are committed as the application uses the heap space.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1694132524,"creation_date":1694131970,"answer_id":77063467,"question_id":77021695,"body_markdown":"A common misconception is that the initial heap size is the minimum heap size. They are actually different and can be configured separately: `-XX:InitialHeapSize` vs. `-XX:MinHeapSize`.\r\n\r\nIn JDK 17, `-Xms` is a shortcut to set both `InitialHeapSize` and `MinHeapSize` to the same value. In contrast, `-XX:InitialRAMPercentage` affects `InitialHeapSize` only, and therefore heap may shrink below the initial size.\r\n\r\nIf you want to prevent heap from resizing at runtime, disable heap shrinking with `-XX:MaxHeapFreeRatio=100`, or disable adaptive size policy altogether: `-XX:-UseAdaptiveSizePolicy`.\r\n\r\nNote: `-XX:MinRAMPercentage` does not help. Its name is confusing: the argument configures `MaxHeapSize`, not `MinHeapSize` - see [JDK-8278492](https://bugs.openjdk.org/browse/JDK-8278492)","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>A common misconception is that the initial heap size is the minimum heap size. They are actually different and can be configured separately: <code>-XX:InitialHeapSize</code> vs. <code>-XX:MinHeapSize</code>.</p>\n<p>In JDK 17, <code>-Xms</code> is a shortcut to set both <code>InitialHeapSize</code> and <code>MinHeapSize</code> to the same value. In contrast, <code>-XX:InitialRAMPercentage</code> affects <code>InitialHeapSize</code> only, and therefore heap may shrink below the initial size.</p>\n<p>If you want to prevent heap from resizing at runtime, disable heap shrinking with <code>-XX:MaxHeapFreeRatio=100</code>, or disable adaptive size policy altogether: <code>-XX:-UseAdaptiveSizePolicy</code>.</p>\n<p>Note: <code>-XX:MinRAMPercentage</code> does not help. Its name is confusing: the argument configures <code>MaxHeapSize</code>, not <code>MinHeapSize</code> - see <a href=\"https://bugs.openjdk.org/browse/JDK-8278492\" rel=\"noreferrer\">JDK-8278492</a></p>\n"},{"tags":[],"owner":{"account_id":22153048,"reputation":1,"user_id":22522004,"display_name":"Cyrille MAUCCI"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694172699,"creation_date":1694172699,"answer_id":77066519,"question_id":77021695,"body_markdown":"we are seeing the same issue as Popandopolos here.\r\nMore precisely we are seeing a behavior change between Java11 and Java17.\r\n\r\nIndeed, we&#39;ve recently migrated our containers apps from Java11 to Java17 (our runtime container env is RedHat OpenShift 4.12).\r\n\r\nWe&#39;ve always been using the following options:\r\n&quot;-XX:InitialRAMPercentage=60 -XX:MaxRAMPercentage=60 -XX:+AlwaysPreTouch&quot;\r\nin order to guarantee the Heap would never be resized and therefore would never impact the runtime performance of our latency critical application.\r\n\r\nWith those settings, using Java11, we have always witnessed committed heap being set to 60% of the container memory limit for the whole lifetime of the container.\r\n\r\nAfter moving to Java17, it is like if InitialRAMPercentage was no more honored.\r\nCommitted heap starts very low and moves during the lifetime of the container.\r\nIf we -Xms/-Xmx instead of -XX:InitialRAMPercentage/-XX:MaxRAMPercentage, Java17 behaves exactly as Java11 would with -XX:InitialRAMPercentage/-XX:MaxRAMPercentage.\r\n\r\nSo, the behavior definitely changed between Java11 and Java17...\r\nand currently getting back to -Xms/-Xmx seems the only way to unblock our testing.\r\n\r\nHTH\r\n++Cyrille","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>we are seeing the same issue as Popandopolos here.\nMore precisely we are seeing a behavior change between Java11 and Java17.</p>\n<p>Indeed, we've recently migrated our containers apps from Java11 to Java17 (our runtime container env is RedHat OpenShift 4.12).</p>\n<p>We've always been using the following options:\n&quot;-XX:InitialRAMPercentage=60 -XX:MaxRAMPercentage=60 -XX:+AlwaysPreTouch&quot;\nin order to guarantee the Heap would never be resized and therefore would never impact the runtime performance of our latency critical application.</p>\n<p>With those settings, using Java11, we have always witnessed committed heap being set to 60% of the container memory limit for the whole lifetime of the container.</p>\n<p>After moving to Java17, it is like if InitialRAMPercentage was no more honored.\nCommitted heap starts very low and moves during the lifetime of the container.\nIf we -Xms/-Xmx instead of -XX:InitialRAMPercentage/-XX:MaxRAMPercentage, Java17 behaves exactly as Java11 would with -XX:InitialRAMPercentage/-XX:MaxRAMPercentage.</p>\n<p>So, the behavior definitely changed between Java11 and Java17...\nand currently getting back to -Xms/-Xmx seems the only way to unblock our testing.</p>\n<p>HTH\n++Cyrille</p>\n"}],"owner":{"account_id":224290,"reputation":620,"user_id":484009,"display_name":"Popandopolos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":363,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":77063467,"answer_count":3,"score":4,"last_activity_date":1694172699,"creation_date":1693557900,"question_id":77021695,"body_markdown":"We are running our Java application with OpenJDK 17.0.7 in a Docker container with these arguments (these are only relevant to my question):&lt;br&gt;\r\n`-XX:InitialRAMPercentage=75.0 -XX:MaxRAMPercentage=75.0 -XX:MaxMetaspaceSize=1G -XX:+UseG1GC`\r\n\r\nHere is a picture from JDK Mission Control showing how the application starts:\r\n\r\n[![Run an application with InitialRAMPercentage][1]][1]\r\n\r\n\r\nYou can see that Committed size was not the same all the time. It started at 3GiB and then it grew up to ~6GiB.\r\n\r\nThen I changed VM Arguments to use Xms/Xmx instead of RAMPercentage:&lt;br&gt;\r\n`-Xms6G -Xmx6G -XX:MaxMetaspaceSize=1G -XX:+UseG1GC`\r\n\r\nAnd now I see the picture I expected to see - Committed size is equals to 6GiB from the startup:\r\n[![Run an application with Xms/XMx][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i0TBX.png\r\n  [2]: https://i.stack.imgur.com/iLiNx.png\r\n\r\nIs it an expected behavior of InitialRAMPercentage? Shouldn&#39;t it work the same way as Xms? Am I missing something?","title":"InitialRAMPercentage doesn&#39;t set initial heap size","body":"<p>We are running our Java application with OpenJDK 17.0.7 in a Docker container with these arguments (these are only relevant to my question):<br>\n<code>-XX:InitialRAMPercentage=75.0 -XX:MaxRAMPercentage=75.0 -XX:MaxMetaspaceSize=1G -XX:+UseG1GC</code></p>\n<p>Here is a picture from JDK Mission Control showing how the application starts:</p>\n<p><a href=\"https://i.stack.imgur.com/i0TBX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i0TBX.png\" alt=\"Run an application with InitialRAMPercentage\" /></a></p>\n<p>You can see that Committed size was not the same all the time. It started at 3GiB and then it grew up to ~6GiB.</p>\n<p>Then I changed VM Arguments to use Xms/Xmx instead of RAMPercentage:<br>\n<code>-Xms6G -Xmx6G -XX:MaxMetaspaceSize=1G -XX:+UseG1GC</code></p>\n<p>And now I see the picture I expected to see - Committed size is equals to 6GiB from the startup:\n<a href=\"https://i.stack.imgur.com/iLiNx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iLiNx.png\" alt=\"Run an application with Xms/XMx\" /></a></p>\n<p>Is it an expected behavior of InitialRAMPercentage? Shouldn't it work the same way as Xms? Am I missing something?</p>\n"},{"tags":["java","spring","spring-boot","hibernate"],"owner":{"account_id":20374233,"reputation":33,"user_id":14945795,"display_name":"Peter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694172622,"creation_date":1694172100,"question_id":77066457,"body_markdown":"In my application, I have an HQL query that uses the `IN` operator - this query is called very often, with different number of parameters which means that Hibernate&#39;s `QueryPlanCache` caches every single variation of it separately - with 1,2,3...10...1200 elements, etc.\r\n\r\nMy questions are:\r\n \r\n\r\n - Is there a way to exclude only the HQL query that contains the `IN`\r\n   operator from being cached in the query plan cache - perhaps an annotation?\r\n - Is there a way to programatically reset this cache? I saw that the `QueryPlanCache` class has a `clear()` method which is `public` but I couldn&#39;t figure out how you would go about calling it in a Spring Boot application.\r\n- Is there some kind of filtering mechanism or class that I could implement and use? An interceptor that fires before the methods for the `QueryPlanCache` so I can filter out the problematic query in it? \r\n\r\nThank you in advance!\r\n\r\n","title":"Spring Boot 2 + Hibernate 5 - how can I reset QueryPlanCache?","body":"<p>In my application, I have an HQL query that uses the <code>IN</code> operator - this query is called very often, with different number of parameters which means that Hibernate's <code>QueryPlanCache</code> caches every single variation of it separately - with 1,2,3...10...1200 elements, etc.</p>\n<p>My questions are:</p>\n<ul>\n<li>Is there a way to exclude only the HQL query that contains the <code>IN</code>\noperator from being cached in the query plan cache - perhaps an annotation?</li>\n<li>Is there a way to programatically reset this cache? I saw that the <code>QueryPlanCache</code> class has a <code>clear()</code> method which is <code>public</code> but I couldn't figure out how you would go about calling it in a Spring Boot application.</li>\n<li>Is there some kind of filtering mechanism or class that I could implement and use? An interceptor that fires before the methods for the <code>QueryPlanCache</code> so I can filter out the problematic query in it?</li>\n</ul>\n<p>Thank you in advance!</p>\n"},{"tags":["java","maven","pom.xml","sts"],"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":0,"creation_date":1642167591,"post_id":70711392,"comment_id":125005327,"body_markdown":"Looks like https://stackoverflow.com/questions/60911620/spring-boot-maven-project-import-error-in-sts. Martin Lippert, the developer of STS, says _&quot;Please file an issue at github.com/spring-projects/sts4/issues and attach the screenshot. Please also take a look at the Error Log View and add the details from there to the report, since the exact stack trace of the error would be quite useful.&quot;_","body":"Looks like <a href=\"https://stackoverflow.com/questions/60911620/spring-boot-maven-project-import-error-in-sts\" title=\"spring boot maven project import error in sts\">stackoverflow.com/questions/60911620/&hellip;</a>. Martin Lippert, the developer of STS, says <i>&quot;Please file an issue at github.com/spring-projects/sts4/issues and attach the screenshot. Please also take a look at the Error Log View and add the details from there to the report, since the exact stack trace of the error would be quite useful.&quot;</i>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1642968899,"post_id":70711392,"comment_id":125209422,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":17296120,"reputation":1,"user_id":12526754,"display_name":"rahul jawale"},"score":0,"creation_date":1643726996,"post_id":70711392,"comment_id":125412868,"body_markdown":"i switched to STS version 4.7.0 and the maven issue got resolved. Not sure what&#39;s wrong with version 4.8.0","body":"i switched to STS version 4.7.0 and the maven issue got resolved. Not sure what&#39;s wrong with version 4.8.0"}],"answers":[{"tags":[],"owner":{"account_id":29393073,"reputation":1,"user_id":22520984,"display_name":"Nani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694172613,"creation_date":1694154910,"answer_id":77064647,"question_id":70711392,"body_markdown":"I resolved this issue by this way:-\r\n\r\n1. close your IDE.\r\n2. start your IDE through by Run as Administrator.\r\n3. update your project-&gt;maven update","title":"An internal error occurred during &quot;updating maven project&quot; in STS(4.8.0)","body":"<p>I resolved this issue by this way:-</p>\n<ol>\n<li>close your IDE.</li>\n<li>start your IDE through by Run as Administrator.</li>\n<li>update your project-&gt;maven update</li>\n</ol>\n"}],"owner":{"account_id":17296120,"reputation":1,"user_id":12526754,"display_name":"rahul jawale"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":853,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694172613,"creation_date":1642167351,"question_id":70711392,"body_markdown":"I have cloned a repo from bitbucket to my local machine and when it tries to build i am getting the above error. Rather i am getting errors on every maven related stuff (build , update ,clean) and I am not sure what&#39;s wrong . I am not even able to open pom.xml file in STS. \r\nDetailed error -&gt;\r\nAn internal error occurred during &quot;updating maven project&quot; \r\norg/springframework/tooling/boot/ls/xml/xmlrootelementcontentdescriber2$qualifiedelement ","title":"An internal error occurred during &quot;updating maven project&quot; in STS(4.8.0)","body":"<p>I have cloned a repo from bitbucket to my local machine and when it tries to build i am getting the above error. Rather i am getting errors on every maven related stuff (build , update ,clean) and I am not sure what's wrong . I am not even able to open pom.xml file in STS.\nDetailed error -&gt;\nAn internal error occurred during &quot;updating maven project&quot;\norg/springframework/tooling/boot/ls/xml/xmlrootelementcontentdescriber2$qualifiedelement</p>\n"},{"tags":["java","mysql","testing","jdbc","containers"],"comments":[{"owner":{"account_id":18999437,"reputation":2463,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1694209611,"post_id":77066498,"comment_id":135866289,"body_markdown":"Welcome to StackOverflow! Thank you for your question. However it seems like you are not familiar with the guide of Stackoverflow to [How To: Ask a good question](https://stackoverflow.com/help/how-to-ask). Please read it and adjust your question accordingly by using the Edit option.","body":"Welcome to StackOverflow! Thank you for your question. However it seems like you are not familiar with the guide of Stackoverflow to <a href=\"https://stackoverflow.com/help/how-to-ask\">How To: Ask a good question</a>. Please read it and adjust your question accordingly by using the Edit option."}],"owner":{"account_id":29394840,"reputation":1,"user_id":22522424,"display_name":"HomeLighter"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694172554,"creation_date":1694172554,"question_id":77066498,"body_markdown":"I am currently testing my application using the JDBC test containers. I am having issues with timezones and setting certain query parameters with my test containers that I can with my normal mysql container.\r\n\r\nHere is an example of my spring.datasource.url that I am using for my test container - jdbc:tc:mysql:5.7://database/myDb?useLegacyDatetimeCode=false&amp;serverTimezone=Australia/Melbourne \r\n\r\nHowevervdebugging through the code, it semes like the query parameters does get parsed but it doesn&#39;t get used at all by the test container. Is there anyway I can set these variables with my test containers?\r\n\r\nI tried passing in a container parameter in the form of a my_sql.conf file which sets trys to set the useLegacyDatetimeCode but that didn&#39;t work as I believe it doesn&#39;t recognize the value","title":"Is there a way to pass in query parameters to mysql test containers","body":"<p>I am currently testing my application using the JDBC test containers. I am having issues with timezones and setting certain query parameters with my test containers that I can with my normal mysql container.</p>\n<p>Here is an example of my spring.datasource.url that I am using for my test container - jdbc:tc:mysql:5.7://database/myDb?useLegacyDatetimeCode=false&amp;serverTimezone=Australia/Melbourne</p>\n<p>Howevervdebugging through the code, it semes like the query parameters does get parsed but it doesn't get used at all by the test container. Is there anyway I can set these variables with my test containers?</p>\n<p>I tried passing in a container parameter in the form of a my_sql.conf file which sets trys to set the useLegacyDatetimeCode but that didn't work as I believe it doesn't recognize the value</p>\n"},{"tags":["java","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":1515381,"reputation":958,"user_id":1416490,"accept_rate":72,"display_name":"zt9788"},"score":0,"creation_date":1694164539,"post_id":77065330,"comment_id":135858341,"body_markdown":"Flux result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean(); changeto Mono.fromFuture(..remoteClient.getInfo(a.getSomeProperty()) in a thread....).flatMapMany(Flux::just)","body":"Flux result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean&zwnj;&#8203;(); changeto Mono.fromFuture(..remoteClient.getInfo(a.getSomeProperty()) in a thread....).flatMapMany(Flux::just)"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1694171770,"post_id":77065330,"comment_id":135859704,"body_markdown":"@zt9788 That requires extra threads while `remoteClient.getInfo` is already reactive as I see","body":"@zt9788 That requires extra threads while <code>remoteClient.getInfo</code> is already reactive as I see"},{"owner":{"account_id":1515381,"reputation":958,"user_id":1416490,"accept_rate":72,"display_name":"zt9788"},"score":0,"creation_date":1694189080,"post_id":77065330,"comment_id":135863199,"body_markdown":"Sorry What I said is wrong, please see others&#39; answers","body":"Sorry What I said is wrong, please see others&#39; answers"}],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694172097,"creation_date":1694172097,"answer_id":77066454,"question_id":77065330,"body_markdown":"You have `filterWhen` for that purpose:\r\n\r\n        repository.findByString(String string) // Flux&lt;SomeObject&gt;\r\n                .filterWhen(a -&gt; remoteClient.getInfo(a.getSomeProperty()).map(s -&gt; s.getBoolean()))\r\n                .map(a -&gt; {\r\n                    //Some logic\r\n                })","title":"Implement filter using project reactor","body":"<p>You have <code>filterWhen</code> for that purpose:</p>\n<pre><code>    repository.findByString(String string) // Flux&lt;SomeObject&gt;\n            .filterWhen(a -&gt; remoteClient.getInfo(a.getSomeProperty()).map(s -&gt; s.getBoolean()))\n            .map(a -&gt; {\n                //Some logic\n            })\n</code></pre>\n"}],"owner":{"account_id":12119561,"reputation":511,"user_id":8851717,"accept_rate":40,"display_name":"Fairy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77066454,"answer_count":1,"score":0,"last_activity_date":1694172097,"creation_date":1694161778,"question_id":77065330,"body_markdown":"I have a list of items from Mongo and I need to filter them by remote call result, something like this:\r\n```java\r\nrepository.findByString(String string) // Flux&lt;SomeObject&gt;\r\n    .filter(a -&gt; {\r\n        Boolean result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean();\r\n        return result;\r\n    }).map(a -&gt; {\r\n        //Some logic\r\n    })\r\n```\r\nI don&#39;t know how to do it in a non-blocking way.\r\nPlease help","title":"Implement filter using project reactor","body":"<p>I have a list of items from Mongo and I need to filter them by remote call result, something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>repository.findByString(String string) // Flux&lt;SomeObject&gt;\n    .filter(a -&gt; {\n        Boolean result =  remoteClient.getInfo(a.getSomeProperty()).block().getBoolean();\n        return result;\n    }).map(a -&gt; {\n        //Some logic\n    })\n</code></pre>\n<p>I don't know how to do it in a non-blocking way.\nPlease help</p>\n"},{"tags":["java","amazon-web-services","spring-security","thymeleaf","amazon-ecs"],"answers":[{"tags":[],"owner":{"account_id":1897626,"reputation":570,"user_id":1714215,"display_name":"Jens M&#248;ller"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694158825,"creation_date":1694158825,"answer_id":77065004,"question_id":77064932,"body_markdown":"Sounds like you are running with https offloading (meaning, that your spring boot application does not receive the https request but rather an http request, the load balancer terminates the tls connection).\r\n\r\nI think your problem is described in the [spring boot documentation][1]. \r\nIn most cases the solution is to set `server.forward-headers-strategy=NATIVE` in your application.yaml.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.webserver.use-behind-a-proxy-server","title":"The &quot;redirect&quot; routing of thymeleaf is redirecting the application to http and not to https when deployed in AWS ECS","body":"<p>Sounds like you are running with https offloading (meaning, that your spring boot application does not receive the https request but rather an http request, the load balancer terminates the tls connection).</p>\n<p>I think your problem is described in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.webserver.use-behind-a-proxy-server\" rel=\"nofollow noreferrer\">spring boot documentation</a>.\nIn most cases the solution is to set <code>server.forward-headers-strategy=NATIVE</code> in your application.yaml.</p>\n"}],"owner":{"account_id":10472614,"reputation":241,"user_id":7720057,"display_name":"Nitin Bisht"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77065004,"answer_count":1,"score":0,"last_activity_date":1694172075,"creation_date":1694158132,"question_id":77064932,"body_markdown":"I am building a Spring Boot application which consists of Spring Security and Thymeleaf. I have deployed this application in Elastic Container Service (ECS) cluster of AWS.\r\n\r\nI have my simple controller code for the homepage which looks like `return &quot;redirect:/login&quot;`. But as soon as I am hitting the homepage it is converting the URL to the **`http`** and not **`https`**.\r\n\r\nThe whole application is accessible through `https://abcd.com/login` but the **&quot;redirect&quot; routing** of  Thymeleaf is always redirecting it to the `http://abcd.com/login` which is not accessible.\r\n\r\nCan anyone help with the resolution for this.?\r\n\r\nAlso the ECS has one service, one load balancer and one Route53 for translating the names to IP address.","title":"The &quot;redirect&quot; routing of thymeleaf is redirecting the application to http and not to https when deployed in AWS ECS","body":"<p>I am building a Spring Boot application which consists of Spring Security and Thymeleaf. I have deployed this application in Elastic Container Service (ECS) cluster of AWS.</p>\n<p>I have my simple controller code for the homepage which looks like <code>return &quot;redirect:/login&quot;</code>. But as soon as I am hitting the homepage it is converting the URL to the <strong><code>http</code></strong> and not <strong><code>https</code></strong>.</p>\n<p>The whole application is accessible through <code>https://abcd.com/login</code> but the <strong>&quot;redirect&quot; routing</strong> of  Thymeleaf is always redirecting it to the <code>http://abcd.com/login</code> which is not accessible.</p>\n<p>Can anyone help with the resolution for this.?</p>\n<p>Also the ECS has one service, one load balancer and one Route53 for translating the names to IP address.</p>\n"},{"tags":["java","android","firebase","android-studio","firebase-cloud-messaging"],"comments":[{"owner":{"account_id":10866797,"reputation":1800,"user_id":8663492,"display_name":"Muntasir Aonik"},"score":0,"creation_date":1566871798,"post_id":57580464,"comment_id":101782187,"body_markdown":"Possible duplicate of [How to handle notification when app in background in Firebase](https://stackoverflow.com/questions/37711082/how-to-handle-notification-when-app-in-background-in-firebase)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/37711082/how-to-handle-notification-when-app-in-background-in-firebase\">How to handle notification when app in background in Firebase</a>"}],"answers":[{"tags":[],"owner":{"account_id":12982239,"reputation":59,"user_id":9384240,"display_name":"Shubham Vyas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694171532,"creation_date":1652095660,"answer_id":72171234,"question_id":57580464,"body_markdown":"Try removing &quot;notification&quot; key object from the payload and provide only &quot;data&quot; key object.\r\nThis should work\r\n\r\n**Body/Payload/JSON Request:**\r\n\r\n    {\r\n        &quot;collapse_key&quot;: &quot;type_a&quot;,\r\n        &quot;notification&quot;: {\r\n            &quot;badge&quot;: &quot;2&quot;,\r\n            &quot;module&quot;: &quot;announcements&quot;,\r\n        &quot;action&quot;: &quot;announcementAddedByWarden&quot;,\r\n        &quot;id&quot;: &quot;2455&quot;,\r\n        &quot;title&quot;: &quot;Test Notification&quot;,\r\n        &quot;body&quot;: &quot;Check Notification&quot;\r\n    },\r\n    &quot;data&quot;: {\r\n        &quot;badge&quot;: &quot;2&quot;,\r\n        &quot;module&quot;: &quot;Announcement&quot;,\r\n        &quot;id&quot;: &quot;2455&quot;,\r\n        &quot;title&quot;: &quot;Test Notification&quot;,\r\n        &quot;body&quot;: &quot;Check Notification&quot;\r\n    },\r\n    &quot;registration_ids&quot;: [\r\n        &quot;dJokCoAJRfyHpL3y9rQWxL:APA91bGNszapf1bnQapVHW1CMLT14SXMmjYBmXooRUiiMEWpvawkZ9Kv5SzRz4cnqHhnwFGWT3uXfzgGn3ygysJE1bkfG0nNomCtL_ikDzE0TiP0TZjhQBDSj_1ydFUyrnQKNSnszqgW&quot;\r\n     ]\r\n    }\r\n\r\n\r\n**You can remove data object from the payload as shown in below code snippet:**\r\n\r\n     &quot;notification&quot;: {\r\n        &quot;badge&quot;: &quot;2&quot;,\r\n        &quot;module&quot;: &quot;announcements&quot;,\r\n    &quot;action&quot;: &quot;announcementAddedByWarden&quot;,\r\n    &quot;id&quot;: &quot;2455&quot;,\r\n    &quot;title&quot;: &quot;Test Notification&quot;,\r\n    &quot;body&quot;: &quot;Check Notification&quot;\r\n    }\r\n\r\n**Correct format will be:**\r\n\r\n    {\r\n    &quot;collapse_key&quot;: &quot;type_a&quot;,\r\n    &quot;data&quot;: {\r\n        &quot;badge&quot;: &quot;2&quot;,\r\n        &quot;module&quot;: &quot;Announcement&quot;,\r\n        &quot;id&quot;: &quot;2455&quot;,\r\n        &quot;title&quot;: &quot;Test Notification&quot;,\r\n        &quot;body&quot;: &quot;Check Notification&quot;\r\n    },\r\n    &quot;registration_ids&quot;: [\r\n        &quot;eIMfC_Tf1bo:APA91bEJEXAsdeb33LEK1go4tMvjW-8dvO9jBYKfRaiyUwzsNICij_lUPqKBQEXtwZURxkrjg0RbUPUnr9gOxit2Sd-nu4hhloZhmtsyldqDA3SZK1ld4W2PI7hqZx6yTpZ480AIdeIs&quot;\r\n    ]\r\n    }\r\n\r\n","title":"FCM notification not retrieve when app is closed","body":"<p>Try removing &quot;notification&quot; key object from the payload and provide only &quot;data&quot; key object.\nThis should work</p>\n<p><strong>Body/Payload/JSON Request:</strong></p>\n<pre><code>{\n    &quot;collapse_key&quot;: &quot;type_a&quot;,\n    &quot;notification&quot;: {\n        &quot;badge&quot;: &quot;2&quot;,\n        &quot;module&quot;: &quot;announcements&quot;,\n    &quot;action&quot;: &quot;announcementAddedByWarden&quot;,\n    &quot;id&quot;: &quot;2455&quot;,\n    &quot;title&quot;: &quot;Test Notification&quot;,\n    &quot;body&quot;: &quot;Check Notification&quot;\n},\n&quot;data&quot;: {\n    &quot;badge&quot;: &quot;2&quot;,\n    &quot;module&quot;: &quot;Announcement&quot;,\n    &quot;id&quot;: &quot;2455&quot;,\n    &quot;title&quot;: &quot;Test Notification&quot;,\n    &quot;body&quot;: &quot;Check Notification&quot;\n},\n&quot;registration_ids&quot;: [\n    &quot;dJokCoAJRfyHpL3y9rQWxL:APA91bGNszapf1bnQapVHW1CMLT14SXMmjYBmXooRUiiMEWpvawkZ9Kv5SzRz4cnqHhnwFGWT3uXfzgGn3ygysJE1bkfG0nNomCtL_ikDzE0TiP0TZjhQBDSj_1ydFUyrnQKNSnszqgW&quot;\n ]\n}\n</code></pre>\n<p><strong>You can remove data object from the payload as shown in below code snippet:</strong></p>\n<pre><code> &quot;notification&quot;: {\n    &quot;badge&quot;: &quot;2&quot;,\n    &quot;module&quot;: &quot;announcements&quot;,\n&quot;action&quot;: &quot;announcementAddedByWarden&quot;,\n&quot;id&quot;: &quot;2455&quot;,\n&quot;title&quot;: &quot;Test Notification&quot;,\n&quot;body&quot;: &quot;Check Notification&quot;\n}\n</code></pre>\n<p><strong>Correct format will be:</strong></p>\n<pre><code>{\n&quot;collapse_key&quot;: &quot;type_a&quot;,\n&quot;data&quot;: {\n    &quot;badge&quot;: &quot;2&quot;,\n    &quot;module&quot;: &quot;Announcement&quot;,\n    &quot;id&quot;: &quot;2455&quot;,\n    &quot;title&quot;: &quot;Test Notification&quot;,\n    &quot;body&quot;: &quot;Check Notification&quot;\n},\n&quot;registration_ids&quot;: [\n    &quot;eIMfC_Tf1bo:APA91bEJEXAsdeb33LEK1go4tMvjW-8dvO9jBYKfRaiyUwzsNICij_lUPqKBQEXtwZURxkrjg0RbUPUnr9gOxit2Sd-nu4hhloZhmtsyldqDA3SZK1ld4W2PI7hqZx6yTpZ480AIdeIs&quot;\n]\n}\n</code></pre>\n"}],"owner":{"account_id":11805072,"reputation":241,"user_id":11106787,"display_name":"Saransh Agarwal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8717,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694171532,"creation_date":1566329706,"question_id":57580464,"body_markdown":"I am retrieving the notification from firebase cloud messaging into my android app. but the problem is when my app is opened or in running state in that case only my app is retrieving the notification. if I am not using my app or my app is not opened and I send any push notification that notification is not retrieving inside my app.\r\n\r\n        @Override\r\n        public void onMessageReceived(RemoteMessage remoteMessage) {\r\n            super.onMessageReceived(remoteMessage);\r\n    \r\n            mFirestore = FirebaseFirestore.getInstance();\r\n    \r\n            if (remoteMessage.getData() != null) {\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\r\n                    sendNotificationAPI26(remoteMessage);\r\n    \r\n                else\r\n                    sendNotification(remoteMessage);\r\n            }\r\n        }\r\n    \r\n        private void sendNotification(RemoteMessage remoteMessage) {\r\n    \r\n            isNotificationMatching = false;\r\n            Intent intent = new Intent(this, Dashboard.class);\r\n            intent.putExtra(&quot;notificationFragment&quot;, &quot;showNotifications&quot;);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n    \r\n            PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\r\n    \r\n    \r\n            final Map&lt;String, String&gt; data = remoteMessage.getData();\r\n    \r\n            String title = data.get(&quot;title&quot;);\r\n            String description = data.get(&quot;description&quot;);\r\n            String url = data.get(&quot;url&quot;);\r\n            String code = data.get(&quot;code&quot;);\r\n            String actual_price = data.get(&quot;actual_price&quot;);\r\n            String deal_price = data.get(&quot;deal_price&quot;);\r\n            String key = data.get(&quot;key&quot;);\r\n            final String id = data.get(&quot;id&quot;);\r\n    \r\n            mFirestore.collection(&quot;notifications&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n                public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            if (document.getData().get(&quot;id&quot;).equals(id)) {\r\n                                isNotificationMatching = true;\r\n                                break;\r\n                            }\r\n                        }\r\n    \r\n                        if (!isNotificationMatching) {\r\n                            postDataToFirebaseServer(data);\r\n                        }\r\n    \r\n                    } else {\r\n                        Log.d(TAG, &quot;Error getting documents: &quot;, task.getException());\r\n                    }\r\n                }\r\n            });\r\n    \r\n    \r\n            Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\r\n            NotificationCompat.Builder builder = new NotificationCompat.Builder(this)\r\n                    .setSmallIcon(R.drawable.app_logo)\r\n                    .setContentText(title)\r\n                    .setAutoCancel(true)\r\n                    .setSound(defaultSoundUri);\r\n            builder.setContentIntent(pendingIntent);\r\n    \r\n            NotificationManager noti = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\r\n            noti.notify(new Random().nextInt(), builder.build());\r\n        }\r\n    \r\n        private void postDataToFirebaseServer(Map&lt;String, String&gt; data) {\r\n    \r\n            Map&lt;String,Object&gt; postDataMap = new HashMap&lt;&gt;();\r\n            postDataMap.put(&quot;title&quot;, data.get(&quot;title&quot;));\r\n            postDataMap.put(&quot;description&quot;, data.get(&quot;description&quot;));\r\n            postDataMap.put(&quot;url&quot;, data.get(&quot;url&quot;));\r\n            postDataMap.put(&quot;id&quot;, data.get(&quot;id&quot;));\r\n            postDataMap.put(&quot;code&quot;, data.get(&quot;code&quot;));\r\n            postDataMap.put(&quot;actual_price&quot;, data.get(&quot;actual_price&quot;));\r\n            postDataMap.put(&quot;deal_price&quot;, data.get(&quot;deal_price&quot;));\r\n            postDataMap.put(&quot;key&quot;, data.get(&quot;key&quot;));\r\n    \r\n            postDataMap.put(&quot;timestamp&quot;, FieldValue.serverTimestamp());\r\n    \r\n    \r\n            mFirestore.collection(&quot;notifications&quot;).add(postDataMap).addOnSuccessListener(new OnSuccessListener&lt;DocumentReference&gt;() {\r\n                @Override\r\n                public void onSuccess(DocumentReference documentReference) {\r\n    //                Toast.makeText(getA.this, &quot;Success&quot;, Toast.LENGTH_SHORT);\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    String error = e.getMessage();\r\n    //                Toast.makeText(Testing.this, &quot;Failed&quot;, Toast.LENGTH_SHORT);\r\n                }\r\n            });\r\n    \r\n        }\r\n    \r\n        private void sendNotificationAPI26(RemoteMessage remoteMessage) {\r\n            Intent intent = new Intent(this, Dashboard.class);\r\n            intent.putExtra(&quot;notificationFragment&quot;, &quot;showNotifications&quot;);\r\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n    \r\n            PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\r\n    \r\n            final Map&lt;String, String&gt; data = remoteMessage.getData();\r\n    \r\n            String title = data.get(&quot;title&quot;);\r\n            String description = data.get(&quot;description&quot;);\r\n            String url = data.get(&quot;url&quot;);\r\n            String code = data.get(&quot;code&quot;);\r\n            String actual_price = data.get(&quot;actual_price&quot;);\r\n            String deal_price = data.get(&quot;deal_price&quot;);\r\n            String key = data.get(&quot;key&quot;);\r\n            final String id = data.get(&quot;id&quot;);\r\n    \r\n            mFirestore.collection(&quot;notifications&quot;).get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n                public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n                    if (task.isSuccessful()) {\r\n                        for (QueryDocumentSnapshot document : task.getResult()) {\r\n                            if (document.getData().get(&quot;id&quot;).equals(id)) {\r\n                                isNotificationMatching = true;\r\n                                break;\r\n                            }\r\n                        }\r\n    \r\n                        if (!isNotificationMatching) {\r\n                            postDataToFirebaseServer(data);\r\n                        }\r\n    \r\n                    } else {\r\n                        Log.d(TAG, &quot;Error getting documents: &quot;, task.getException());\r\n                    }\r\n                }\r\n            });\r\n    \r\n            NotificationHelper helper;\r\n            Notification.Builder builder;\r\n    \r\n            Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\r\n            helper = new NotificationHelper(this);\r\n            builder = helper.getLootBoxNotification(title, description, url, id, code, actual_price, deal_price, key, defaultSoundUri);\r\n            helper.getManager().notify(new Random().nextInt(), builder.build());\r\n            builder.setContentIntent(pendingIntent);\r\n    \r\n        }\r\n    }\r\n\r\nI want when my app is closed or not in running state at that time any push notification is sent that will also retrieve inside the application.","title":"FCM notification not retrieve when app is closed","body":"<p>I am retrieving the notification from firebase cloud messaging into my android app. but the problem is when my app is opened or in running state in that case only my app is retrieving the notification. if I am not using my app or my app is not opened and I send any push notification that notification is not retrieving inside my app.</p>\n\n<pre><code>    @Override\n    public void onMessageReceived(RemoteMessage remoteMessage) {\n        super.onMessageReceived(remoteMessage);\n\n        mFirestore = FirebaseFirestore.getInstance();\n\n        if (remoteMessage.getData() != null) {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O)\n                sendNotificationAPI26(remoteMessage);\n\n            else\n                sendNotification(remoteMessage);\n        }\n    }\n\n    private void sendNotification(RemoteMessage remoteMessage) {\n\n        isNotificationMatching = false;\n        Intent intent = new Intent(this, Dashboard.class);\n        intent.putExtra(\"notificationFragment\", \"showNotifications\");\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\n\n\n        final Map&lt;String, String&gt; data = remoteMessage.getData();\n\n        String title = data.get(\"title\");\n        String description = data.get(\"description\");\n        String url = data.get(\"url\");\n        String code = data.get(\"code\");\n        String actual_price = data.get(\"actual_price\");\n        String deal_price = data.get(\"deal_price\");\n        String key = data.get(\"key\");\n        final String id = data.get(\"id\");\n\n        mFirestore.collection(\"notifications\").get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        if (document.getData().get(\"id\").equals(id)) {\n                            isNotificationMatching = true;\n                            break;\n                        }\n                    }\n\n                    if (!isNotificationMatching) {\n                        postDataToFirebaseServer(data);\n                    }\n\n                } else {\n                    Log.d(TAG, \"Error getting documents: \", task.getException());\n                }\n            }\n        });\n\n\n        Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this)\n                .setSmallIcon(R.drawable.app_logo)\n                .setContentText(title)\n                .setAutoCancel(true)\n                .setSound(defaultSoundUri);\n        builder.setContentIntent(pendingIntent);\n\n        NotificationManager noti = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n        noti.notify(new Random().nextInt(), builder.build());\n    }\n\n    private void postDataToFirebaseServer(Map&lt;String, String&gt; data) {\n\n        Map&lt;String,Object&gt; postDataMap = new HashMap&lt;&gt;();\n        postDataMap.put(\"title\", data.get(\"title\"));\n        postDataMap.put(\"description\", data.get(\"description\"));\n        postDataMap.put(\"url\", data.get(\"url\"));\n        postDataMap.put(\"id\", data.get(\"id\"));\n        postDataMap.put(\"code\", data.get(\"code\"));\n        postDataMap.put(\"actual_price\", data.get(\"actual_price\"));\n        postDataMap.put(\"deal_price\", data.get(\"deal_price\"));\n        postDataMap.put(\"key\", data.get(\"key\"));\n\n        postDataMap.put(\"timestamp\", FieldValue.serverTimestamp());\n\n\n        mFirestore.collection(\"notifications\").add(postDataMap).addOnSuccessListener(new OnSuccessListener&lt;DocumentReference&gt;() {\n            @Override\n            public void onSuccess(DocumentReference documentReference) {\n//                Toast.makeText(getA.this, \"Success\", Toast.LENGTH_SHORT);\n            }\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                String error = e.getMessage();\n//                Toast.makeText(Testing.this, \"Failed\", Toast.LENGTH_SHORT);\n            }\n        });\n\n    }\n\n    private void sendNotificationAPI26(RemoteMessage remoteMessage) {\n        Intent intent = new Intent(this, Dashboard.class);\n        intent.putExtra(\"notificationFragment\", \"showNotifications\");\n        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n\n        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_ONE_SHOT);\n\n        final Map&lt;String, String&gt; data = remoteMessage.getData();\n\n        String title = data.get(\"title\");\n        String description = data.get(\"description\");\n        String url = data.get(\"url\");\n        String code = data.get(\"code\");\n        String actual_price = data.get(\"actual_price\");\n        String deal_price = data.get(\"deal_price\");\n        String key = data.get(\"key\");\n        final String id = data.get(\"id\");\n\n        mFirestore.collection(\"notifications\").get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    for (QueryDocumentSnapshot document : task.getResult()) {\n                        if (document.getData().get(\"id\").equals(id)) {\n                            isNotificationMatching = true;\n                            break;\n                        }\n                    }\n\n                    if (!isNotificationMatching) {\n                        postDataToFirebaseServer(data);\n                    }\n\n                } else {\n                    Log.d(TAG, \"Error getting documents: \", task.getException());\n                }\n            }\n        });\n\n        NotificationHelper helper;\n        Notification.Builder builder;\n\n        Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);\n        helper = new NotificationHelper(this);\n        builder = helper.getLootBoxNotification(title, description, url, id, code, actual_price, deal_price, key, defaultSoundUri);\n        helper.getManager().notify(new Random().nextInt(), builder.build());\n        builder.setContentIntent(pendingIntent);\n\n    }\n}\n</code></pre>\n\n<p>I want when my app is closed or not in running state at that time any push notification is sent that will also retrieve inside the application.</p>\n"},{"tags":["java","generics","interface","casting"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694170515,"post_id":77066231,"comment_id":135859454,"body_markdown":"A generic method is a method which declares at least one type parameter. The *caller* decides which actual type argument(s) to use for the type parameter(s). Your phrase “that this can only be made into a class of type Predicate” is incomprehensible. You should mark code fragments with back-ticks, so that type arguments are not confused for HTML tags. As said, the *caller* decides what `T` is, hence, returning a `Predicate&lt;T&gt;` allows the caller to decide what actual parameterization the predicate will have. Which works, because every object has an `equals` method.","body":"A generic method is a method which declares at least one type parameter. The <i>caller</i> decides which actual type argument(s) to use for the type parameter(s). Your phrase “that this can only be made into a class of type Predicate” is incomprehensible. You should mark code fragments with back-ticks, so that type arguments are not confused for HTML tags. As said, the <i>caller</i> decides what <code>T</code> is, hence, returning a <code>Predicate&lt;T&gt;</code> allows the caller to decide what actual parameterization the predicate will have. Which works, because every object has an <code>equals</code> method."}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694170808,"creation_date":1694170414,"answer_id":77066263,"question_id":77066231,"body_markdown":"We can always specify the types explicitly:\r\n\r\n```\r\nstatic &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\r\n    return (null == targetRef)\r\n            ? Objects::isNull\r\n            : (T object) -&gt; targetRef.equals(object);\r\n}\r\n```\r\n\r\nSo while `targetRef` is of type `Object`, `object` is of type `T`.\r\n\r\n`T` depends on the calling context, e.g.:\r\n\r\n```\r\nPredicate.isEqual(something); // T == Object\r\nPredicate.&lt;String&gt;isEqual(something); // T == String\r\nPredicate&lt;Double&gt; p = Predicate.isEqual(something); // T == Double\r\nStream.of(1,2,3).filter(Predicate.isEqual(2)); // T == Integer\r\n```","title":"static functions using generic types in Java","body":"<p>We can always specify the types explicitly:</p>\n<pre><code>static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\n    return (null == targetRef)\n            ? Objects::isNull\n            : (T object) -&gt; targetRef.equals(object);\n}\n</code></pre>\n<p>So while <code>targetRef</code> is of type <code>Object</code>, <code>object</code> is of type <code>T</code>.</p>\n<p><code>T</code> depends on the calling context, e.g.:</p>\n<pre><code>Predicate.isEqual(something); // T == Object\nPredicate.&lt;String&gt;isEqual(something); // T == String\nPredicate&lt;Double&gt; p = Predicate.isEqual(something); // T == Double\nStream.of(1,2,3).filter(Predicate.isEqual(2)); // T == Integer\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694170421,"creation_date":1694170421,"answer_id":77066265,"question_id":77066231,"body_markdown":"For the first function, the `equals` method always takes an `Object`. You might expect `Object::equals` to take only a parameter of its own type, but that&#39;s not what it does. That leaves the `&lt;T&gt;` parameter to be inferred purely by what the caller needs: You can easily pass `isEqual(&quot;&quot;)` to something that expects a `Predicate&lt;Integer&gt;`, and that&#39;ll work fine (and always returns `false`).\r\n\r\nThe `&lt;T&gt;` for the second function is inferred from the caller in much the same way. The `super` just means &quot;any `Predicate` that can *consume* a `T`&quot;. The cast is needed because the compiler can&#39;t know that the `Predicate` returned by `negate` is always safe as a `Predicate&lt;T&gt;`.\r\n\r\n\r\n","title":"static functions using generic types in Java","body":"<p>For the first function, the <code>equals</code> method always takes an <code>Object</code>. You might expect <code>Object::equals</code> to take only a parameter of its own type, but that's not what it does. That leaves the <code>&lt;T&gt;</code> parameter to be inferred purely by what the caller needs: You can easily pass <code>isEqual(&quot;&quot;)</code> to something that expects a <code>Predicate&lt;Integer&gt;</code>, and that'll work fine (and always returns <code>false</code>).</p>\n<p>The <code>&lt;T&gt;</code> for the second function is inferred from the caller in much the same way. The <code>super</code> just means &quot;any <code>Predicate</code> that can <em>consume</em> a <code>T</code>&quot;. The cast is needed because the compiler can't know that the <code>Predicate</code> returned by <code>negate</code> is always safe as a <code>Predicate&lt;T&gt;</code>.</p>\n"}],"owner":{"account_id":17883750,"reputation":13,"user_id":22382599,"display_name":"SoullessWarrior"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77066263,"answer_count":2,"score":0,"last_activity_date":1694170928,"creation_date":1694170137,"question_id":77066231,"body_markdown":"I was looking at the source code of Predicate&lt;T&gt; in java.util.function, (which for context, is a functional interface that returns a boolean value having taken some generic input of type T) when I came across the following functions:\r\n\r\n```\r\n    static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\r\n        return (null == targetRef)\r\n                ? Objects::isNull\r\n                : object -&gt; targetRef.equals(object);\r\n    }\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;? super T&gt; target) {\r\n        Objects.requireNonNull(target);\r\n        return (Predicate&lt;T&gt;)target.negate();\r\n    }\r\n\r\n```\r\nand I am puzzled by how static functions can be used with all these generic types lying around. What&#39;s going on?\r\n\r\nI was expecting some type inference makes this happen. In the first method, the return function is a function that can be fed into `Predicate&lt;T&gt;` implicitly, but since the `targetRef` argument is of type `Object`, I would expect that this can only be made into a class of type `Predicate&lt;Object&gt;`, which seems to me, defeats the point of using `T` at all in the function.\r\n\r\nThe second function, I cannot even think of a reasonable inference pattern, it seems absurd. The return type is cast into `Predicate&lt;T&gt;`, but `target.negate` will return `Predicate&lt;? super T&gt;`, which makes taking a super argument itself strange, and further, because of the typecast in the return statement, and the obscurity in the argument as well, it is not possible to know a sensible `T` from either. How do either of these methods work, and why were they defined that way?","title":"static functions using generic types in Java","body":"<p>I was looking at the source code of Predicate in java.util.function, (which for context, is a functional interface that returns a boolean value having taken some generic input of type T) when I came across the following functions:</p>\n<pre><code>    static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) {\n        return (null == targetRef)\n                ? Objects::isNull\n                : object -&gt; targetRef.equals(object);\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    static &lt;T&gt; Predicate&lt;T&gt; not(Predicate&lt;? super T&gt; target) {\n        Objects.requireNonNull(target);\n        return (Predicate&lt;T&gt;)target.negate();\n    }\n\n</code></pre>\n<p>and I am puzzled by how static functions can be used with all these generic types lying around. What's going on?</p>\n<p>I was expecting some type inference makes this happen. In the first method, the return function is a function that can be fed into <code>Predicate&lt;T&gt;</code> implicitly, but since the <code>targetRef</code> argument is of type <code>Object</code>, I would expect that this can only be made into a class of type <code>Predicate&lt;Object&gt;</code>, which seems to me, defeats the point of using <code>T</code> at all in the function.</p>\n<p>The second function, I cannot even think of a reasonable inference pattern, it seems absurd. The return type is cast into <code>Predicate&lt;T&gt;</code>, but <code>target.negate</code> will return <code>Predicate&lt;? super T&gt;</code>, which makes taking a super argument itself strange, and further, because of the typecast in the return statement, and the obscurity in the argument as well, it is not possible to know a sensible <code>T</code> from either. How do either of these methods work, and why were they defined that way?</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694167246,"post_id":77063897,"comment_id":135858892,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"score":0,"creation_date":1694169637,"post_id":77063897,"comment_id":135859301,"body_markdown":"Please add your test-cases.","body":"Please add your test-cases."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694170465,"creation_date":1694170465,"answer_id":77066271,"question_id":77063897,"body_markdown":"The problem is in this line:\r\n\r\n```\r\nif (currentWord.length() + word.length() + 1 &gt; K) {\r\n```\r\n\r\nThe addition of 1 in this expression accounts for the space separator, but in case we are in the first iteration of the loop, then no space should be accounted for. So if your test case has a first word (`word.length()`) that has exactly K characters, then this `if` condition will be true, while in fact we should not decide to move that word to the second SMS.\r\n\r\nThe following test case should return 2, but your code will return 3:\r\n\r\n    solution(&#39;ab cd&#39;, 2);\r\n\r\nThe correction could be this:\r\n\r\n```\r\nif (currentWord.length() + word.length() + (isFirst ? 0 : 1) &gt; K) {\r\n```\r\n\r\n### Remark\r\n\r\nIt is not necessary to actually collect the chunked strings. You can suffice with just counting the lines without doing any string manipulation.\r\n\r\nFor instance:\r\n\r\n```\r\n    public static int solution(String S, int K) {\r\n        int i = 0;\r\n        int linesCount = 1;\r\n        while (i + K &lt; S.length()) { // while a split is needed\r\n            linesCount++;\r\n            // Find index where next chunk will start\r\n            int j = S.lastIndexOf(&#39; &#39;, i + K) + 1;\r\n            if (i == j) { // Word is too long\r\n                return -1;\r\n            }\r\n            i = j;\r\n        }\r\n        return linesCount;\r\n    }\r\n```\r\n","title":"Codility test: split sms messages into smaller messages of max K characters","body":"<p>The problem is in this line:</p>\n<pre><code>if (currentWord.length() + word.length() + 1 &gt; K) {\n</code></pre>\n<p>The addition of 1 in this expression accounts for the space separator, but in case we are in the first iteration of the loop, then no space should be accounted for. So if your test case has a first word (<code>word.length()</code>) that has exactly K characters, then this <code>if</code> condition will be true, while in fact we should not decide to move that word to the second SMS.</p>\n<p>The following test case should return 2, but your code will return 3:</p>\n<pre><code>solution('ab cd', 2);\n</code></pre>\n<p>The correction could be this:</p>\n<pre><code>if (currentWord.length() + word.length() + (isFirst ? 0 : 1) &gt; K) {\n</code></pre>\n<h3>Remark</h3>\n<p>It is not necessary to actually collect the chunked strings. You can suffice with just counting the lines without doing any string manipulation.</p>\n<p>For instance:</p>\n<pre><code>    public static int solution(String S, int K) {\n        int i = 0;\n        int linesCount = 1;\n        while (i + K &lt; S.length()) { // while a split is needed\n            linesCount++;\n            // Find index where next chunk will start\n            int j = S.lastIndexOf(' ', i + K) + 1;\n            if (i == j) { // Word is too long\n                return -1;\n            }\n            i = j;\n        }\n        return linesCount;\n    }\n</code></pre>\n"}],"owner":{"account_id":29391922,"reputation":1,"user_id":22520055,"display_name":"David Tan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":416,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694170666,"creation_date":1694142420,"question_id":77063897,"body_markdown":"I am working on this Codility challenge: \r\n\r\n&gt; You have a long piece of text, and you want to send it to your friend as a series of SMS messages. Your text consists of English letters (uppercase and lowercase) and spaces. The text doesn&#39;t contain any leading spaces at the beginning or trailing spaces at the end. There are no two consecutive spaces in the text. One proper SMS can contain at most K characters. If the text is longer, it needs to be split into parts. Each part should be sent in a separate message that fulfills the maximum length requirement. Text may not be split within words. The order of the words and the messages can&#39;t change, so that we can later concatenate the resulting messages to retrieve the original text. Spaces at the start and end of all messages are removed, and thus are not accounted for in the overall message length.\r\n&gt; \r\n&gt; The goal is to count the number of SMS messages needed to accommodate the whole text, keeping the length of each message less than or equal to K. The total number of SMS messages must be kept to a minimum, however; it would not be acceptable, for example, to take the wasteful approach of programmatically sending one SMS for each word in the original text!\r\n&gt; \r\n&gt; Write a function: public func solution(_ S: String, _ K: Int) -&gt; Int that, given a string S representing the text that needs to be split and an integer K that is equal to the maximum possible message length, returns the number of SMS messages needed.\r\n&gt; \r\n&gt; For instance, given string S=&quot;SMS messages are really short&quot; and K = 12, your function should return 3. You could split this text into proper messages as follows: &quot;SMS&quot; &quot;messages are&quot; &quot;really short&quot;\r\n&gt; \r\n&gt; If it&#39;s impossible to split text into proper SMS messages, your function should return −1. Assume that: K is an integer within the range [1..500]; S is a non-empty string containing at most 500 characters: only letters and spaces, there are no spaces at the beginning and at the end of S; also there can&#39;t be two or more consecutive spaces in S.\r\n\r\nI am sure that I have covered all the corner cases but the test result is showing that only 5 out of 8 test cases are correct. What am I missing in my code?\r\n\r\nMy code:\r\n\r\n```\r\n    public static int solution (String S, int K) {\r\n        String[] words = S.split(&quot; &quot;);\r\n        StringBuilder sb = new StringBuilder();\r\n        String currentWord = &quot;&quot;;\r\n        int linesCount = 1;\r\n        boolean isFirst = true;\r\n\r\n        for (String word: words) {\r\n            if (word.length() &gt; K) {\r\n                return -1;\r\n            }\r\n        }\r\n\r\n        for (String word: words) {\r\n            if (currentWord.length() + word.length() + 1 &gt; K) {\r\n                sb.append(currentWord).append(&quot;\\n&quot;);\r\n                linesCount++;\r\n                currentWord = word;\r\n            } else {\r\n                if (isFirst) {\r\n                    currentWord += word;\r\n                    isFirst = false;\r\n                } else {\r\n                    currentWord += &quot; &quot; + word;\r\n                }\r\n            }\r\n        }\r\n        sb.append(currentWord);\r\n        System.out.println(sb.toString());\r\n\r\n        return linesCount;\r\n    }\r\n\r\n```\r\n\r\nI have tried and tested this code in my IDE, with all test cases that I can think of, and they all pass.\r\n\r\nHowever, it does not pass all Codility tests (which are hidden) and I am wondering what is missing from my code.\r\n","title":"Codility test: split sms messages into smaller messages of max K characters","body":"<p>I am working on this Codility challenge:</p>\n<blockquote>\n<p>You have a long piece of text, and you want to send it to your friend as a series of SMS messages. Your text consists of English letters (uppercase and lowercase) and spaces. The text doesn't contain any leading spaces at the beginning or trailing spaces at the end. There are no two consecutive spaces in the text. One proper SMS can contain at most K characters. If the text is longer, it needs to be split into parts. Each part should be sent in a separate message that fulfills the maximum length requirement. Text may not be split within words. The order of the words and the messages can't change, so that we can later concatenate the resulting messages to retrieve the original text. Spaces at the start and end of all messages are removed, and thus are not accounted for in the overall message length.</p>\n<p>The goal is to count the number of SMS messages needed to accommodate the whole text, keeping the length of each message less than or equal to K. The total number of SMS messages must be kept to a minimum, however; it would not be acceptable, for example, to take the wasteful approach of programmatically sending one SMS for each word in the original text!</p>\n<p>Write a function: public func solution(_ S: String, _ K: Int) -&gt; Int that, given a string S representing the text that needs to be split and an integer K that is equal to the maximum possible message length, returns the number of SMS messages needed.</p>\n<p>For instance, given string S=&quot;SMS messages are really short&quot; and K = 12, your function should return 3. You could split this text into proper messages as follows: &quot;SMS&quot; &quot;messages are&quot; &quot;really short&quot;</p>\n<p>If it's impossible to split text into proper SMS messages, your function should return −1. Assume that: K is an integer within the range [1..500]; S is a non-empty string containing at most 500 characters: only letters and spaces, there are no spaces at the beginning and at the end of S; also there can't be two or more consecutive spaces in S.</p>\n</blockquote>\n<p>I am sure that I have covered all the corner cases but the test result is showing that only 5 out of 8 test cases are correct. What am I missing in my code?</p>\n<p>My code:</p>\n<pre><code>    public static int solution (String S, int K) {\n        String[] words = S.split(&quot; &quot;);\n        StringBuilder sb = new StringBuilder();\n        String currentWord = &quot;&quot;;\n        int linesCount = 1;\n        boolean isFirst = true;\n\n        for (String word: words) {\n            if (word.length() &gt; K) {\n                return -1;\n            }\n        }\n\n        for (String word: words) {\n            if (currentWord.length() + word.length() + 1 &gt; K) {\n                sb.append(currentWord).append(&quot;\\n&quot;);\n                linesCount++;\n                currentWord = word;\n            } else {\n                if (isFirst) {\n                    currentWord += word;\n                    isFirst = false;\n                } else {\n                    currentWord += &quot; &quot; + word;\n                }\n            }\n        }\n        sb.append(currentWord);\n        System.out.println(sb.toString());\n\n        return linesCount;\n    }\n\n</code></pre>\n<p>I have tried and tested this code in my IDE, with all test cases that I can think of, and they all pass.</p>\n<p>However, it does not pass all Codility tests (which are hidden) and I am wondering what is missing from my code.</p>\n"},{"tags":["java","android","backup","android-room","android-external-storage"],"comments":[{"owner":{"account_id":20220873,"reputation":137,"user_id":14830371,"display_name":"Anesu Mazvimavi"},"score":0,"creation_date":1694415902,"post_id":67819150,"comment_id":135882930,"body_markdown":"Hello Sir please may you kindly share full source code","body":"Hello Sir please may you kindly share full source code"}],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622752568,"creation_date":1622752568,"answer_id":67828363,"question_id":67819150,"body_markdown":"You issue could well be that the database is using [WAL (Write-Ahead logging)][1] as opposed to journal mode.\r\n\r\nWith WAL changes are written to the WAL file (database file name suffixed with -wal and also another file -shm). If the database hasn&#39;t been committed and you only backup/restore the database file. You will lose data.\r\n\r\n- When fully committed, the -wal file will be 0 bytes or not exist, in which case it is not needed.\r\n\r\nFrom Android 9 the default was changed from journal mode to WAL.\r\n\r\n- https://source.android.com/devices/tech/perf/compatibility-wal\r\n\r\nAssuming that this is your issue you have some options:-\r\n\r\n1. Use Journal mode (e.g. use the SQLiteDatabase **disableWriteAheadLogging** method)\r\n1. Backup/Restore all 3 files (if they exist)\r\n1. Fully Commit the database and then backup (closing the database should fully commit) and delete/rename the -wal file and -shm file before restoring.\r\n\r\nOption 3 would be the recommended way as you then gain the advantages of WAL.\r\n\r\nHere&#39;s an example of fully checkpointing (a little over the top but it works):-\r\n\r\n    private void checkpointIfWALEnabled(Context context) {\r\n        final String TAG = &quot;WALCHKPNT&quot;;\r\n        Cursor csr;\r\n        int wal_busy = -99, wal_log = -99, wal_checkpointed = -99;\r\n        SQLiteDatabase db = SQLiteDatabase.openDatabase(context.getDatabasePath(DBConstants.DATABASE_NAME).getPath(), null, SQLiteDatabase.OPEN_READWRITE);\r\n        csr = db.rawQuery(&quot;PRAGMA journal_mode&quot;, null);\r\n        if (csr.moveToFirst()) {\r\n            String mode = csr.getString(0);\r\n            //Log.d(TAG, &quot;Mode is &quot; + mode);\r\n            if (mode.toLowerCase().equals(&quot;wal&quot;)) {\r\n                csr = db.rawQuery(&quot;PRAGMA wal_checkpoint&quot;, null);\r\n                if (csr.moveToFirst()) {\r\n                    wal_busy = csr.getInt(0);\r\n                    wal_log = csr.getInt(1);\r\n                    wal_checkpointed = csr.getInt(2);\r\n                }\r\n                //Log.d(TAG,&quot;Checkpoint pre checkpointing Busy = &quot; + String.valueOf(wal_busy) + &quot; LOG = &quot; + String.valueOf(wal_log) + &quot; CHECKPOINTED = &quot; + String.valueOf(wal_checkpointed) );\r\n                csr = db.rawQuery(&quot;PRAGMA wal_checkpoint(TRUNCATE)&quot;, null);\r\n                csr.getCount();\r\n                csr = db.rawQuery(&quot;PRAGMA wal_checkpoint&quot;, null);\r\n                if (csr.moveToFirst()) {\r\n                    wal_busy = csr.getInt(0);\r\n                    wal_log = csr.getInt(1);\r\n                    wal_checkpointed = csr.getInt(2);\r\n                }\r\n                //Log.d(TAG,&quot;Checkpoint post checkpointing Busy = &quot; + String.valueOf(wal_busy) + &quot; LOG = &quot; + String.valueOf(wal_log) + &quot; CHECKPOINTED = &quot; + String.valueOf(wal_checkpointed) );\r\n            }\r\n        }\r\n        csr.close();\r\n        db.close(); // Should checkpoint the database anyway.\r\n    }\r\n\r\nWhen restoring the following is used to delete the -wal and -shm files :-\r\n\r\n                        // Added for Android 9+ to delete shm and wal file if they exist\r\n                        File dbshm = new File(dbfile.getPath() + &quot;-shm&quot;);\r\n                        File dbwal = new File(dbfile.getPath() + &quot;-wal&quot;);\r\n                        if (dbshm.exists()) {\r\n                            dbshm.delete();\r\n                        }\r\n                        if (dbwal.exists()) {\r\n                            dbwal.delete();\r\n                        }\r\n\r\n\r\n  [1]: https://sqlite.org/wal.html","title":"Restore from Room Sqlite database from sd card not working","body":"<p>You issue could well be that the database is using <a href=\"https://sqlite.org/wal.html\" rel=\"nofollow noreferrer\">WAL (Write-Ahead logging)</a> as opposed to journal mode.</p>\n<p>With WAL changes are written to the WAL file (database file name suffixed with -wal and also another file -shm). If the database hasn't been committed and you only backup/restore the database file. You will lose data.</p>\n<ul>\n<li>When fully committed, the -wal file will be 0 bytes or not exist, in which case it is not needed.</li>\n</ul>\n<p>From Android 9 the default was changed from journal mode to WAL.</p>\n<ul>\n<li><a href=\"https://source.android.com/devices/tech/perf/compatibility-wal\" rel=\"nofollow noreferrer\">https://source.android.com/devices/tech/perf/compatibility-wal</a></li>\n</ul>\n<p>Assuming that this is your issue you have some options:-</p>\n<ol>\n<li>Use Journal mode (e.g. use the SQLiteDatabase <strong>disableWriteAheadLogging</strong> method)</li>\n<li>Backup/Restore all 3 files (if they exist)</li>\n<li>Fully Commit the database and then backup (closing the database should fully commit) and delete/rename the -wal file and -shm file before restoring.</li>\n</ol>\n<p>Option 3 would be the recommended way as you then gain the advantages of WAL.</p>\n<p>Here's an example of fully checkpointing (a little over the top but it works):-</p>\n<pre><code>private void checkpointIfWALEnabled(Context context) {\n    final String TAG = &quot;WALCHKPNT&quot;;\n    Cursor csr;\n    int wal_busy = -99, wal_log = -99, wal_checkpointed = -99;\n    SQLiteDatabase db = SQLiteDatabase.openDatabase(context.getDatabasePath(DBConstants.DATABASE_NAME).getPath(), null, SQLiteDatabase.OPEN_READWRITE);\n    csr = db.rawQuery(&quot;PRAGMA journal_mode&quot;, null);\n    if (csr.moveToFirst()) {\n        String mode = csr.getString(0);\n        //Log.d(TAG, &quot;Mode is &quot; + mode);\n        if (mode.toLowerCase().equals(&quot;wal&quot;)) {\n            csr = db.rawQuery(&quot;PRAGMA wal_checkpoint&quot;, null);\n            if (csr.moveToFirst()) {\n                wal_busy = csr.getInt(0);\n                wal_log = csr.getInt(1);\n                wal_checkpointed = csr.getInt(2);\n            }\n            //Log.d(TAG,&quot;Checkpoint pre checkpointing Busy = &quot; + String.valueOf(wal_busy) + &quot; LOG = &quot; + String.valueOf(wal_log) + &quot; CHECKPOINTED = &quot; + String.valueOf(wal_checkpointed) );\n            csr = db.rawQuery(&quot;PRAGMA wal_checkpoint(TRUNCATE)&quot;, null);\n            csr.getCount();\n            csr = db.rawQuery(&quot;PRAGMA wal_checkpoint&quot;, null);\n            if (csr.moveToFirst()) {\n                wal_busy = csr.getInt(0);\n                wal_log = csr.getInt(1);\n                wal_checkpointed = csr.getInt(2);\n            }\n            //Log.d(TAG,&quot;Checkpoint post checkpointing Busy = &quot; + String.valueOf(wal_busy) + &quot; LOG = &quot; + String.valueOf(wal_log) + &quot; CHECKPOINTED = &quot; + String.valueOf(wal_checkpointed) );\n        }\n    }\n    csr.close();\n    db.close(); // Should checkpoint the database anyway.\n}\n</code></pre>\n<p>When restoring the following is used to delete the -wal and -shm files :-</p>\n<pre><code>                    // Added for Android 9+ to delete shm and wal file if they exist\n                    File dbshm = new File(dbfile.getPath() + &quot;-shm&quot;);\n                    File dbwal = new File(dbfile.getPath() + &quot;-wal&quot;);\n                    if (dbshm.exists()) {\n                        dbshm.delete();\n                    }\n                    if (dbwal.exists()) {\n                        dbwal.delete();\n                    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12959297,"reputation":398,"user_id":9369035,"display_name":"Njuacha Hubert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1623658584,"creation_date":1623658584,"answer_id":67966940,"question_id":67819150,"body_markdown":"After testing and looking around much and thanks to @MikeT i was able to use this class below for backup and restore.\r\n\r\n    public class BackupAndRestore {\r\n\r\n            public static void importDB(Context context) {\r\n                try {\r\n                    File sd = Environment.getExternalStorageDirectory();\r\n                    // by closing the database some other database files ending with -shm and -wal are deleted so that there is one database file and it has all content\r\n                    AppDatabase.getDatabaseInstance(context).close();\r\n\r\n                    if (sd.canRead()) {\r\n                        File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\r\n                        File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\r\n\r\n                        transfer(context, backupDB, currentDB);\r\n                        Toast.makeText(context, &quot;Database Restored successfully&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n\r\n            public static void exportDB(Context context) {\r\n                try {\r\n                    File sd = Environment.getExternalStorageDirectory();\r\n                    // by closing the database some other database files ending with -shm and -wal are deleted so that there is one database file and it has all content\r\n                    AppDatabase.getDatabaseInstance(context).close();\r\n\r\n                    if (sd.canWrite()) {\r\n                        File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\r\n                        File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\r\n                        transfer(context, currentDB, backupDB);\r\n\r\n                        Toast.makeText(context, &quot;Backup is successful to SD card&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n\r\n            private static void transfer(Context context, File sourceFile, File destinationFile) throws IOException {\r\n                if (sourceFile.exists()) {\r\n                    FileChannel src = new FileInputStream(sourceFile).getChannel();\r\n                    FileChannel dst = new FileOutputStream(destinationFile).getChannel();\r\n                    dst.transferFrom(src, 0, src.size());\r\n                    src.close();\r\n                    dst.close();\r\n                }\r\n            }\r\n\r\n        }\r\nIn my main activity I call method like below\r\n        \r\n        ...\r\n\r\n        if (item.getItemId() == R.id.backup) {\r\n            BackupAndRestore.exportDB(getBaseContext());\r\n            restartApplication();\r\n        } else if (item.getItemId() == R.id.restore) {\r\n            BackupAndRestore.importDB(getBaseContext());\r\n            restartApplication();\r\n        }\r\n\r\n        ...\r\n\r\nSo the restartApplication method is called after backup because I noticed the room database was not working properly after backup unless i restart the application and also after after restoring I could not see the restored data unless the application was restarted. The restart method is below\r\n\r\n    private void restartApplication() {\r\n        finish();\r\n        startActivity(getIntent());\r\n        System.exit(0);\r\n    }\r\n\r\n\r\n\r\n     ","title":"Restore from Room Sqlite database from sd card not working","body":"<p>After testing and looking around much and thanks to @MikeT i was able to use this class below for backup and restore.</p>\n<pre><code>public class BackupAndRestore {\n\n        public static void importDB(Context context) {\n            try {\n                File sd = Environment.getExternalStorageDirectory();\n                // by closing the database some other database files ending with -shm and -wal are deleted so that there is one database file and it has all content\n                AppDatabase.getDatabaseInstance(context).close();\n\n                if (sd.canRead()) {\n                    File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\n                    File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\n\n                    transfer(context, backupDB, currentDB);\n                    Toast.makeText(context, &quot;Database Restored successfully&quot;, Toast.LENGTH_SHORT).show();\n\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n\n\n        public static void exportDB(Context context) {\n            try {\n                File sd = Environment.getExternalStorageDirectory();\n                // by closing the database some other database files ending with -shm and -wal are deleted so that there is one database file and it has all content\n                AppDatabase.getDatabaseInstance(context).close();\n\n                if (sd.canWrite()) {\n                    File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\n                    File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\n                    transfer(context, currentDB, backupDB);\n\n                    Toast.makeText(context, &quot;Backup is successful to SD card&quot;, Toast.LENGTH_SHORT).show();\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n\n        private static void transfer(Context context, File sourceFile, File destinationFile) throws IOException {\n            if (sourceFile.exists()) {\n                FileChannel src = new FileInputStream(sourceFile).getChannel();\n                FileChannel dst = new FileOutputStream(destinationFile).getChannel();\n                dst.transferFrom(src, 0, src.size());\n                src.close();\n                dst.close();\n            }\n        }\n\n    }\n</code></pre>\n<p>In my main activity I call method like below</p>\n<pre><code>    ...\n\n    if (item.getItemId() == R.id.backup) {\n        BackupAndRestore.exportDB(getBaseContext());\n        restartApplication();\n    } else if (item.getItemId() == R.id.restore) {\n        BackupAndRestore.importDB(getBaseContext());\n        restartApplication();\n    }\n\n    ...\n</code></pre>\n<p>So the restartApplication method is called after backup because I noticed the room database was not working properly after backup unless i restart the application and also after after restoring I could not see the restored data unless the application was restarted. The restart method is below</p>\n<pre><code>private void restartApplication() {\n    finish();\n    startActivity(getIntent());\n    System.exit(0);\n}\n\n\n\n \n</code></pre>\n"}],"owner":{"account_id":12959297,"reputation":398,"user_id":9369035,"display_name":"Njuacha Hubert"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":485,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67966940,"answer_count":2,"score":0,"last_activity_date":1694170473,"creation_date":1622713547,"question_id":67819150,"body_markdown":"I looked at others answers like https://stackoverflow.com/questions/2170031/backup-and-restore-sqlite-database-to-sdcard/37261271 and https://stackoverflow.com/questions/18635412/restoring-sqlite-db-file etc. but i still dont see the restoring of database when i uninstall and reinstall app and restore backup. \r\nHere is the code I have currently.\r\n\r\n            public class BackupAndRestore {\r\n            \r\n                public static void importDB(Context context) {\r\n                    try {\r\n                        File sd = Environment.getExternalStorageDirectory();\r\n            \r\n                        if (sd.canRead()) {\r\n                            File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\r\n                            File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\r\n            \r\n                            if (currentDB.exists()) {\r\n                                FileChannel src = new FileInputStream(backupDB).getChannel();\r\n                                FileChannel dst = new FileOutputStream(currentDB).getChannel();\r\n                                dst.transferFrom(src, 0, src.size());\r\n                                src.close();\r\n                                dst.close();\r\n                                Toast.makeText(context, &quot;Database Restored successfully&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            \r\n                public static void exportDB(Context context) {\r\n                    try {\r\n                        File sd = Environment.getExternalStorageDirectory();\r\n                        File data = Environment.getDataDirectory();\r\n            \r\n            \r\n                        if (sd.canWrite()) {\r\n            \r\n                            File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\r\n                            File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\r\n            \r\n                            if (currentDB.exists()) {\r\n                                FileChannel src = new FileInputStream(currentDB).getChannel();\r\n                                FileChannel dst = new FileOutputStream(backupDB).getChannel();\r\n                                dst.transferFrom(src, 0, src.size());\r\n                                src.close();\r\n                                dst.close();\r\n                                Toast.makeText(context, &quot;Backup is successful to SD card&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n            \r\n                }\r\n            \r\n            }\r\n\r\nSo I install app and I add content to database. Then I also grant permission to write to external storage before calling this export method above. it shows toast message &quot;Backup is successful... &quot; and I can see the file created in the external storage. Then I uninstall and reinstall and I request permission again to external storage. Then call the method import above. The toast message again is seen &quot;Database Restored..&quot; but I don&#39;t see the database content that existed before. I tested on android 7 device and android 10 device.\r\nI will appreciate help. Thanks. \r\n\r\n\r\n","title":"Restore from Room Sqlite database from sd card not working","body":"<p>I looked at others answers like <a href=\"https://stackoverflow.com/questions/2170031/backup-and-restore-sqlite-database-to-sdcard/37261271\">Backup and restore SQLite database to sdcard</a> and <a href=\"https://stackoverflow.com/questions/18635412/restoring-sqlite-db-file\">Restoring SQLite DB file</a> etc. but i still dont see the restoring of database when i uninstall and reinstall app and restore backup.\nHere is the code I have currently.</p>\n<pre><code>        public class BackupAndRestore {\n        \n            public static void importDB(Context context) {\n                try {\n                    File sd = Environment.getExternalStorageDirectory();\n        \n                    if (sd.canRead()) {\n                        File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\n                        File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\n        \n                        if (currentDB.exists()) {\n                            FileChannel src = new FileInputStream(backupDB).getChannel();\n                            FileChannel dst = new FileOutputStream(currentDB).getChannel();\n                            dst.transferFrom(src, 0, src.size());\n                            src.close();\n                            dst.close();\n                            Toast.makeText(context, &quot;Database Restored successfully&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        \n            public static void exportDB(Context context) {\n                try {\n                    File sd = Environment.getExternalStorageDirectory();\n                    File data = Environment.getDataDirectory();\n        \n        \n                    if (sd.canWrite()) {\n        \n                        File currentDB = context.getDatabasePath(AppDatabase.DATABASE_NAME);\n                        File backupDB = new File(sd, AppDatabase.DATABASE_NAME);\n        \n                        if (currentDB.exists()) {\n                            FileChannel src = new FileInputStream(currentDB).getChannel();\n                            FileChannel dst = new FileOutputStream(backupDB).getChannel();\n                            dst.transferFrom(src, 0, src.size());\n                            src.close();\n                            dst.close();\n                            Toast.makeText(context, &quot;Backup is successful to SD card&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n        \n            }\n        \n        }\n</code></pre>\n<p>So I install app and I add content to database. Then I also grant permission to write to external storage before calling this export method above. it shows toast message &quot;Backup is successful... &quot; and I can see the file created in the external storage. Then I uninstall and reinstall and I request permission again to external storage. Then call the method import above. The toast message again is seen &quot;Database Restored..&quot; but I don't see the database content that existed before. I tested on android 7 device and android 10 device.\nI will appreciate help. Thanks.</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":6347,"reputation":6694,"user_id":10638,"accept_rate":67,"display_name":"DJ."},"score":1,"creation_date":1593384146,"post_id":62628725,"comment_id":110754588,"body_markdown":"Be careful with the description of the type. In MySQL `datetime` is a type where it will store the value without timezone information and you need to know which timezone to use to store/retrieve it, while `timestamp` will always stored the value in the database as UTC and you can be flexible with which timezone is use to store or retrieve the value.","body":"Be careful with the description of the type. In MySQL <code>datetime</code> is a type where it will store the value without timezone information and you need to know which timezone to use to store/retrieve it, while <code>timestamp</code> will always stored the value in the database as UTC and you can be flexible with which timezone is use to store or retrieve the value."},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1593431960,"post_id":62628725,"comment_id":110770090,"body_markdown":"See also [Is java.sql.Timestamp timezone specific?](https://stackoverflow.com/questions/14070572/is-java-sql-timestamp-timezone-specific)","body":"See also <a href=\"https://stackoverflow.com/questions/14070572/is-java-sql-timestamp-timezone-specific\">Is java.sql.Timestamp timezone specific?</a>"}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1593386266,"creation_date":1593382734,"answer_id":62628813,"question_id":62628725,"body_markdown":"&gt; Q) How can I obtain the timestamp in UTC\r\n\r\nDo it as follows:\r\n\r\n\tZonedDateTime zdt = ZonedDateTime.now(ZoneId.of(&quot;Etc/UTC&quot;));\r\n\tTimestamp timestamp = Timestamp.valueOf(zdt.toLocalDateTime());\r\n\r\n**Notes:** \r\n\r\n 1. Since you want to work with a timestamp, I recommend you change the field type to `TIMESTAMP`. Check [this](https://stackoverflow.com/questions/409286/should-i-use-the-datetime-or-timestamp-data-type-in-mysql) for more details.\r\n 2. Stop using the outdated `java.util` date-time API and switch to [modern date-time API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html).","title":"How to insert timestamp in UTC","body":"<blockquote>\n<p>Q) How can I obtain the timestamp in UTC</p>\n</blockquote>\n<p>Do it as follows:</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.now(ZoneId.of(&quot;Etc/UTC&quot;));\nTimestamp timestamp = Timestamp.valueOf(zdt.toLocalDateTime());\n</code></pre>\n<p><strong>Notes:</strong></p>\n<ol>\n<li>Since you want to work with a timestamp, I recommend you change the field type to <code>TIMESTAMP</code>. Check <a href=\"https://stackoverflow.com/questions/409286/should-i-use-the-datetime-or-timestamp-data-type-in-mysql\">this</a> for more details.</li>\n<li>Stop using the outdated <code>java.util</code> date-time API and switch to <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"noreferrer\">modern date-time API</a>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593386540,"creation_date":1593386540,"answer_id":62629254,"question_id":62628725,"body_markdown":"You can let MySQL to insert a timestamp using this column definition\r\n\r\n    CREATE TABLE SOME_TABLE_NAME (\r\n         SOME_COLUMN_NAME TIMESTAMP default CURRENT_TIMESTAMP\r\n    );","title":"How to insert timestamp in UTC","body":"<p>You can let MySQL to insert a timestamp using this column definition</p>\n<pre><code>CREATE TABLE SOME_TABLE_NAME (\n     SOME_COLUMN_NAME TIMESTAMP default CURRENT_TIMESTAMP\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1593410789,"creation_date":1593410416,"answer_id":62632112,"question_id":62628725,"body_markdown":"# tl;dr\r\n\r\nYou have the wrong data type in MySQL, and the wrong class in Java.\r\n\r\n - Write to a column of type [`TIMESTAMP`][1] rather than `DATETIME`.\r\n - Use [`java.time.OffsetDateTime`][2] rather than `java.sql.Timestamp`. \r\n\r\nExample code snippet.\r\n\r\n    myPreparedStatement\r\n    .setObject( \r\n        … ,                       // Specify which placeholder `?` to fill-in.\r\n        OffsetDateTime            // JDBC 4.2 and later requires a JDBC driver support exchanging `java.time.OffsetDateTime` objects with the database.\r\n        .now( ZoneOffset.UTC )    // Capture the current moment as seen in UTC (an offset of zero hours-minutes-seconds). \r\n    )\r\n    \r\n\r\n# Wrong data type in MySQL\r\n\r\n&gt;The assumption is that the timestamp is in UTC\r\n\r\nDo you understand that [`DATETIME`][1] in MySQL is *not* in UTC? That type in MySQL has no concept of time zone nor offset-from-UTC. \r\n\r\nIf you are tracking moments, specific points on the timeline, you have the wrong data type in MySQL. You should be using `TIMESTAMP` to track moments in MySQL. \r\n\r\n# Wrong Java classes\r\n\r\nYou are using *terrible* date-time classes that were bundled with the earliest versions of Java. Those classes were supplanted by the modern *java.time* classes in Java 8 and later, as defined in JSR 310. Never use the `java.sql.Timestamp` class.\r\n\r\nTo get the current moment in UTC, use `Instant`.\r\n\r\n    Instant instant = Instant.now() ;\r\n\r\nDefine your column in MySQL as type `TIMESTAMP`. \r\n\r\nYou *may* be able to write an `Instant` via your JDBC driver. However, JDBC 4.2 requires support for `OffsetDateTime` but oddly omits required support for `Instant`. No matter, we can easily convert.\r\n\r\n    OffsetDateTime odt = instant.atOffset( ZoneOffset.UTC ) ;\r\n\r\nWrite that to the database using your JDBC driver compliant with JDBC 4.2 or later, through a prepared statement.\r\n\r\n    myPreparedStatement.setObject( … , odt ) ;\r\n\r\nRetrieval.\r\n\r\n    OffsetDateTime odt = myResultSet.getObject( … , OffsetDateTime.class ) ;\r\n\r\n# Time zone problem eliminated\r\n\r\nIf you follow the code seen here you will have no time zone problems. \r\n\r\n - None of this code depends on the JVM’s current default time zone. \r\n - None of this code depends on the database server’s current default time zone.\r\n\r\n\r\n----------\r\n\r\n\r\n[![Table of date-time types in Java (both legacy and modern) and in standard SQL][3]][3]\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html), [`Calendar`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html), &amp; [`SimpleDateFormat`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes. Hibernate 5 &amp; JPA 2.2 support *java.time*. \r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - Later versions of Android bundle implementations of the *java.time* classes.\r\n  - For earlier Android (&lt;26), the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above). See [*How to use ThreeTenABP…*](http://stackoverflow.com/q/38922754/642706).\r\n\r\n\r\n  [1]: https://dev.mysql.com/doc/refman/8.0/en/datetime.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/OffsetDateTime.html\r\n  [3]: https://i.stack.imgur.com/bXtIS.png","title":"How to insert timestamp in UTC","body":"<h1>tl;dr</h1>\n<p>You have the wrong data type in MySQL, and the wrong class in Java.</p>\n<ul>\n<li>Write to a column of type <a href=\"https://dev.mysql.com/doc/refman/8.0/en/datetime.html\" rel=\"noreferrer\"><code>TIMESTAMP</code></a> rather than <code>DATETIME</code>.</li>\n<li>Use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/OffsetDateTime.html\" rel=\"noreferrer\"><code>java.time.OffsetDateTime</code></a> rather than <code>java.sql.Timestamp</code>.</li>\n</ul>\n<p>Example code snippet.</p>\n<pre><code>myPreparedStatement\n.setObject( \n    … ,                       // Specify which placeholder `?` to fill-in.\n    OffsetDateTime            // JDBC 4.2 and later requires a JDBC driver support exchanging `java.time.OffsetDateTime` objects with the database.\n    .now( ZoneOffset.UTC )    // Capture the current moment as seen in UTC (an offset of zero hours-minutes-seconds). \n)\n</code></pre>\n<h1>Wrong data type in MySQL</h1>\n<blockquote>\n<p>The assumption is that the timestamp is in UTC</p>\n</blockquote>\n<p>Do you understand that <a href=\"https://dev.mysql.com/doc/refman/8.0/en/datetime.html\" rel=\"noreferrer\"><code>DATETIME</code></a> in MySQL is <em>not</em> in UTC? That type in MySQL has no concept of time zone nor offset-from-UTC.</p>\n<p>If you are tracking moments, specific points on the timeline, you have the wrong data type in MySQL. You should be using <code>TIMESTAMP</code> to track moments in MySQL.</p>\n<h1>Wrong Java classes</h1>\n<p>You are using <em>terrible</em> date-time classes that were bundled with the earliest versions of Java. Those classes were supplanted by the modern <em>java.time</em> classes in Java 8 and later, as defined in JSR 310. Never use the <code>java.sql.Timestamp</code> class.</p>\n<p>To get the current moment in UTC, use <code>Instant</code>.</p>\n<pre><code>Instant instant = Instant.now() ;\n</code></pre>\n<p>Define your column in MySQL as type <code>TIMESTAMP</code>.</p>\n<p>You <em>may</em> be able to write an <code>Instant</code> via your JDBC driver. However, JDBC 4.2 requires support for <code>OffsetDateTime</code> but oddly omits required support for <code>Instant</code>. No matter, we can easily convert.</p>\n<pre><code>OffsetDateTime odt = instant.atOffset( ZoneOffset.UTC ) ;\n</code></pre>\n<p>Write that to the database using your JDBC driver compliant with JDBC 4.2 or later, through a prepared statement.</p>\n<pre><code>myPreparedStatement.setObject( … , odt ) ;\n</code></pre>\n<p>Retrieval.</p>\n<pre><code>OffsetDateTime odt = myResultSet.getObject( … , OffsetDateTime.class ) ;\n</code></pre>\n<h1>Time zone problem eliminated</h1>\n<p>If you follow the code seen here you will have no time zone problems.</p>\n<ul>\n<li>None of this code depends on the JVM’s current default time zone.</li>\n<li>None of this code depends on the database server’s current default time zone.</li>\n</ul>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/bXtIS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bXtIS.png\" alt=\"Table of date-time types in Java (both legacy and modern) and in standard SQL\" /></a></p>\n<hr />\n<h1>About <em>java.time</em></h1>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> classes.</p>\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes. Hibernate 5 &amp; JPA 2.2 support <em>java.time</em>.</p>\n<p>Where to obtain the java.time classes?</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.</li>\n<li>Java 9 adds some minor features and fixes.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>Java SE 7</strong></a></li>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a>.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a></li>\n<li>Later versions of Android bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><em><strong>ThreeTenABP</strong></em></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> (mentioned above). See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP…</em></a>.</li>\n</ul>\n"}],"owner":{"account_id":7430214,"reputation":1253,"user_id":5651468,"accept_rate":100,"display_name":"Sandeep"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7685,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":62628813,"answer_count":3,"score":5,"last_activity_date":1694170228,"creation_date":1593382004,"question_id":62628725,"body_markdown":"My partial table definition (MySQL) looks as follows:\r\n\r\n    +-----------+----------+------+-----+---------+----------------+\r\n    | Field     | Type     | Null | Key | Default | Extra          |\r\n    +-----------+----------+------+-----+---------+----------------+\r\n    | ...       | ...      | ..   | ... | ...     | ...            |\r\n    | timestamp | datetime | YES  |     | NULL    |                |\r\n    | ...       | ...      | ..   | ... | ...     | ...            |\r\n    +-----------+----------+------+-----+---------+----------------+\r\n\r\nI want to update the timestamp field using JDBC.  The assumption is that the timestamp is in **UTC**.\r\n\r\nIn my Java code I am obtaining the timestamp field as follows:\r\n\r\n    Timestamp datetime = new Timestamp(new Date().getTime());\r\n\t\t\t\r\n\r\nThe documentation for the [java.util.Date][1] states that:  \r\n\r\n&gt; Although the Date class is intended to reflect coordinated universal\r\n&gt; time (UTC), it may not do so exactly, depending on the host\r\n&gt; environment of the Java Virtual Machine.\r\n\r\nUnfortunately on my Windows 10 environment (java version &quot;1.8.0_231&quot;), the Date object reflects my local timezone.  As a result the timestamp that gets added to the database is for the local timezone, not UTC.\r\n\r\nHow can I obtain the timestamp in UTC, so that the correct value is added to the database?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Date.html","title":"How to insert timestamp in UTC","body":"<p>My partial table definition (MySQL) looks as follows:</p>\n<pre><code>+-----------+----------+------+-----+---------+----------------+\n| Field     | Type     | Null | Key | Default | Extra          |\n+-----------+----------+------+-----+---------+----------------+\n| ...       | ...      | ..   | ... | ...     | ...            |\n| timestamp | datetime | YES  |     | NULL    |                |\n| ...       | ...      | ..   | ... | ...     | ...            |\n+-----------+----------+------+-----+---------+----------------+\n</code></pre>\n<p>I want to update the timestamp field using JDBC.  The assumption is that the timestamp is in <strong>UTC</strong>.</p>\n<p>In my Java code I am obtaining the timestamp field as follows:</p>\n<pre><code>Timestamp datetime = new Timestamp(new Date().getTime());\n        \n</code></pre>\n<p>The documentation for the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\">java.util.Date</a> states that:</p>\n<blockquote>\n<p>Although the Date class is intended to reflect coordinated universal\ntime (UTC), it may not do so exactly, depending on the host\nenvironment of the Java Virtual Machine.</p>\n</blockquote>\n<p>Unfortunately on my Windows 10 environment (java version &quot;1.8.0_231&quot;), the Date object reflects my local timezone.  As a result the timestamp that gets added to the database is for the local timezone, not UTC.</p>\n<p>How can I obtain the timestamp in UTC, so that the correct value is added to the database?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","websecurity"],"answers":[{"tags":[],"owner":{"account_id":25181104,"reputation":21,"user_id":19022598,"display_name":"Lakshan Jayathilake"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694169992,"creation_date":1694136029,"answer_id":77063640,"question_id":76723051,"body_markdown":"You can add default formLogin using this way(Spring 6.0),\r\n\r\n```java\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n    return http\r\n            .csrf(csrf -&gt; csrf.disable())\r\n            .authorizeHttpRequests(auth -&gt; {\r\n                auth.requestMatchers(&quot;/&quot;).permitAll();\r\n                auth.requestMatchers(&quot;/user&quot;).hasRole(&quot;USER&quot;);\r\n                auth.requestMatchers(&quot;/admin&quot;).hasRole(&quot;Admin&quot;);\r\n            })\r\n            .formLogin(Customizer.withDefaults())\r\n            .build();\r\n}\r\n```","title":"How to formLogin() since WebSecurityConfigurerAdapter is deprecated","body":"<p>You can add default formLogin using this way(Spring 6.0),</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n    return http\n            .csrf(csrf -&gt; csrf.disable())\n            .authorizeHttpRequests(auth -&gt; {\n                auth.requestMatchers(&quot;/&quot;).permitAll();\n                auth.requestMatchers(&quot;/user&quot;).hasRole(&quot;USER&quot;);\n                auth.requestMatchers(&quot;/admin&quot;).hasRole(&quot;Admin&quot;);\n            })\n            .formLogin(Customizer.withDefaults())\n            .build();\n}\n</code></pre>\n"}],"owner":{"account_id":28568371,"reputation":45,"user_id":21870939,"display_name":"L&#233;andre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":673,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694169992,"creation_date":1689781322,"question_id":76723051,"body_markdown":"I&#39;m trying to test spring security. With WebSecurityConfigurerAdapter deprecated, I have some difficulties. I&#39;d like to display the default connection form, previously displayed using .formLogin().\r\n\r\nHere&#39;s my code:\r\n\r\n```\r\npackage projet.auth.login.configuration;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.Customizer;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.core.userdetails.User;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig {\r\n\r\n    @Bean\r\n    public InMemoryUserDetailsManager userDetailsManager(){\r\n        UserDetails user = User\r\n                .withUsername(&quot;user&quot;)\r\n                .password(passwordEncoder().encode(&quot;password&quot;))\r\n                .roles(&quot;ADMIN&quot;)\r\n                .build();\r\n\r\n        UserDetails admin = User\r\n                .withUsername(&quot;admin&quot;)\r\n                .password(passwordEncoder().encode(&quot;password&quot;))\r\n                .roles(&quot;ADMIN&quot;)\r\n                .build();\r\n\r\n        return new InMemoryUserDetailsManager(user, admin);\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\r\n        return http\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests(auth -&gt; {\r\n                    auth.requestMatchers(&quot;/&quot;).permitAll();\r\n                    auth.requestMatchers(&quot;/user&quot;).hasRole(&quot;USER&quot;);\r\n                    auth.requestMatchers(&quot;/admin&quot;).hasRole(&quot;Admin&quot;);\r\n                })\r\n                .httpBasic(Customizer.withDefaults())\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nand \r\nthe rest controller for testing the different user\r\n\r\n\r\n```\r\npackage projet.auth.login.controller;\r\n\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class LoginController {\r\n\r\n\r\n    @RequestMapping(&quot;/&quot;)\r\n    public String getRandom()\r\n    {\r\n        return &quot;Welcome to this web-app&quot;;\r\n    }\r\n\r\n    @RequestMapping(&quot;/user&quot;)\r\n    public String getUser()\r\n    {\r\n        return &quot;Welcome User&quot;;\r\n    }\r\n\r\n\r\n    @RequestMapping(&quot;/admin&quot;)\r\n    public String getAdmin()\r\n    {\r\n        return &quot;Welcome Admin&quot;;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nHow can i do that ?\r\nCause i can&#39;t connect the users i created.\r\n\r\nThanks for the help !","title":"How to formLogin() since WebSecurityConfigurerAdapter is deprecated","body":"<p>I'm trying to test spring security. With WebSecurityConfigurerAdapter deprecated, I have some difficulties. I'd like to display the default connection form, previously displayed using .formLogin().</p>\n<p>Here's my code:</p>\n<pre><code>package projet.auth.login.configuration;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    @Bean\n    public InMemoryUserDetailsManager userDetailsManager(){\n        UserDetails user = User\n                .withUsername(&quot;user&quot;)\n                .password(passwordEncoder().encode(&quot;password&quot;))\n                .roles(&quot;ADMIN&quot;)\n                .build();\n\n        UserDetails admin = User\n                .withUsername(&quot;admin&quot;)\n                .password(passwordEncoder().encode(&quot;password&quot;))\n                .roles(&quot;ADMIN&quot;)\n                .build();\n\n        return new InMemoryUserDetailsManager(user, admin);\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception{\n        return http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(&quot;/&quot;).permitAll();\n                    auth.requestMatchers(&quot;/user&quot;).hasRole(&quot;USER&quot;);\n                    auth.requestMatchers(&quot;/admin&quot;).hasRole(&quot;Admin&quot;);\n                })\n                .httpBasic(Customizer.withDefaults())\n                .build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n\n\n</code></pre>\n<p>and\nthe rest controller for testing the different user</p>\n<pre><code>package projet.auth.login.controller;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class LoginController {\n\n\n    @RequestMapping(&quot;/&quot;)\n    public String getRandom()\n    {\n        return &quot;Welcome to this web-app&quot;;\n    }\n\n    @RequestMapping(&quot;/user&quot;)\n    public String getUser()\n    {\n        return &quot;Welcome User&quot;;\n    }\n\n\n    @RequestMapping(&quot;/admin&quot;)\n    public String getAdmin()\n    {\n        return &quot;Welcome Admin&quot;;\n    }\n\n}\n\n</code></pre>\n<p>How can i do that ?\nCause i can't connect the users i created.</p>\n<p>Thanks for the help !</p>\n"},{"tags":["java","android","database","firebase","real-time"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1615182834,"creation_date":1615178873,"answer_id":66524436,"question_id":66524321,"body_markdown":"The first time you access the Firebase Realtime Database from your code, the SDK has to establish a connection to the server. This involves multiple steps, which are only needed upon establishing the first connection. This explains why the first connection may take some time, and indeed it is not uncommon for it to take one of more seconds.\r\n\r\nThere is nothing you can do in code to improve the actual connection speed. That is up your bandwidth and latency (which I assume you&#39;re not interested in changing), and the SDK and server (which you can&#39;t change).\r\n\r\nAll you can do is start connecting as early as possible in your app&#39;s lifecycle, instead of waiting with it until you need to firs read/write data. For example, consider adding a listener to `.info/connected` when your app first starts.","title":"Firebase real-time database latency","body":"<p>The first time you access the Firebase Realtime Database from your code, the SDK has to establish a connection to the server. This involves multiple steps, which are only needed upon establishing the first connection. This explains why the first connection may take some time, and indeed it is not uncommon for it to take one of more seconds.</p>\n<p>There is nothing you can do in code to improve the actual connection speed. That is up your bandwidth and latency (which I assume you're not interested in changing), and the SDK and server (which you can't change).</p>\n<p>All you can do is start connecting as early as possible in your app's lifecycle, instead of waiting with it until you need to firs read/write data. For example, consider adding a listener to <code>.info/connected</code> when your app first starts.</p>\n"},{"tags":[],"owner":{"account_id":9954091,"reputation":3,"user_id":7365661,"display_name":"Jay R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615181936,"creation_date":1615181936,"answer_id":66524805,"question_id":66524321,"body_markdown":"True, \r\nhi vj Shandilya to my knowledge, the initial connection ought to take a tad longer than expected as this was the case while my team and I were working on an IoT based project linked with firebase and Android-Java.\r\n\r\nMaybe you can add, a custom (not intense) progress animation to cover up for the 2 sec. ","title":"Firebase real-time database latency","body":"<p>True,\nhi vj Shandilya to my knowledge, the initial connection ought to take a tad longer than expected as this was the case while my team and I were working on an IoT based project linked with firebase and Android-Java.</p>\n<p>Maybe you can add, a custom (not intense) progress animation to cover up for the 2 sec.</p>\n"},{"tags":[],"owner":{"account_id":13210775,"reputation":967,"user_id":9541096,"display_name":"Owais Yosuf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694169776,"creation_date":1694169776,"answer_id":77066205,"question_id":66524321,"body_markdown":"**Reason:** It is because at very first instance, firebase need to establish a connection between your app and firebase server. It will always delay by few seconds.\r\n\r\n**Solution:** Establish a connection on app start. Once the first activity is loaded, establish a firebase connection inside `onCreate()` of MainActivity.java or the other activity that gets loaded first.","title":"Firebase real-time database latency","body":"<p><strong>Reason:</strong> It is because at very first instance, firebase need to establish a connection between your app and firebase server. It will always delay by few seconds.</p>\n<p><strong>Solution:</strong> Establish a connection on app start. Once the first activity is loaded, establish a firebase connection inside <code>onCreate()</code> of MainActivity.java or the other activity that gets loaded first.</p>\n"}],"owner":{"account_id":20897303,"reputation":11,"user_id":15351178,"display_name":"vj Shandilya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":450,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1694169776,"creation_date":1615177838,"question_id":66524321,"body_markdown":"I am using firebase real-time database for my app. It&#39;s great but I am facing a delay of some seconds during writing data from the app to firebase for the very first time. Means every time when I starts the app it takes a time of 2 seconds to send data to firebase. And after that it works fine with great speed. I know this isn&#39;t a big delay by any aspects but in my case I seriously needed the data transfer and fetching instantly. Is there any way to reduce this delay ? Thanks in advance.","title":"Firebase real-time database latency","body":"<p>I am using firebase real-time database for my app. It's great but I am facing a delay of some seconds during writing data from the app to firebase for the very first time. Means every time when I starts the app it takes a time of 2 seconds to send data to firebase. And after that it works fine with great speed. I know this isn't a big delay by any aspects but in my case I seriously needed the data transfer and fetching instantly. Is there any way to reduce this delay ? Thanks in advance.</p>\n"},{"tags":["java","generics","extends","super"],"answers":[{"tags":[],"owner":{"account_id":1888343,"reputation":176597,"user_id":1707091,"display_name":"rgettman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571256284,"creation_date":1571256284,"answer_id":58420944,"question_id":58420734,"body_markdown":"The `? super` clause is a lower-bound wildcard.  But the bound is on the type parameter that is inferred, not a restriction on the types of arguments that can be passed to a method that takes a parameter of that generic type.\r\n\r\nWhen you say `&lt;? super ClassB&gt;`, you indicate that the type parameter can be `ClassB` or any supertype, e.g. `ClassA` or `Object`.\r\n\r\nThe compiler must treat the `add` method as if it could be any of these signatures:\r\n\r\n    add(Object t)\r\n    add(ClassA t)\r\n    add(ClassB t)\r\n\r\n(There could be other types if `ClassA` inherited directly from another class instead of `Object`).\r\n\r\nThe compiler must reject a `ClassA` as an argument to `add` because the type parameter could be inferred as `ClassB`.  It&#39;s legal to assign a `GenericMethod&lt;ClassB&gt;` to your `genericMethod` variable.\r\n\r\n    GenericMethod&lt;? super ClassB&gt; genericMethod = new GenericMethod&lt;ClassB&gt;();\r\n\r\nBut it doesn&#39;t make sense to be able to pass a `ClassA` to a method that expects a `ClassB`.\r\n\r\nIn fact that is what is inferred by the diamond operator - `ClassB`.\r\n\r\nYour confusion is in the conflation of two concepts: what type parameters are allowed and what types of objects are allowed in methods that use a type parameter.  Using a wildcard restricts the type parameter, but the method still accepts types that are the type parameter or a subtype.","title":"Trying to understand the role of super wildcard in Java Generics","body":"<p>The <code>? super</code> clause is a lower-bound wildcard.  But the bound is on the type parameter that is inferred, not a restriction on the types of arguments that can be passed to a method that takes a parameter of that generic type.</p>\n\n<p>When you say <code>&lt;? super ClassB&gt;</code>, you indicate that the type parameter can be <code>ClassB</code> or any supertype, e.g. <code>ClassA</code> or <code>Object</code>.</p>\n\n<p>The compiler must treat the <code>add</code> method as if it could be any of these signatures:</p>\n\n<pre><code>add(Object t)\nadd(ClassA t)\nadd(ClassB t)\n</code></pre>\n\n<p>(There could be other types if <code>ClassA</code> inherited directly from another class instead of <code>Object</code>).</p>\n\n<p>The compiler must reject a <code>ClassA</code> as an argument to <code>add</code> because the type parameter could be inferred as <code>ClassB</code>.  It's legal to assign a <code>GenericMethod&lt;ClassB&gt;</code> to your <code>genericMethod</code> variable.</p>\n\n<pre><code>GenericMethod&lt;? super ClassB&gt; genericMethod = new GenericMethod&lt;ClassB&gt;();\n</code></pre>\n\n<p>But it doesn't make sense to be able to pass a <code>ClassA</code> to a method that expects a <code>ClassB</code>.</p>\n\n<p>In fact that is what is inferred by the diamond operator - <code>ClassB</code>.</p>\n\n<p>Your confusion is in the conflation of two concepts: what type parameters are allowed and what types of objects are allowed in methods that use a type parameter.  Using a wildcard restricts the type parameter, but the method still accepts types that are the type parameter or a subtype.</p>\n"},{"tags":[],"owner":{"account_id":7739868,"reputation":731,"user_id":5860073,"display_name":"boot-and-bonnet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571256947,"creation_date":1571256947,"answer_id":58421083,"question_id":58420734,"body_markdown":"By declaring `GenericMethod&lt;? super ClassB&gt;` you are declaring the type is an unknown type that is a super-class of ClassB (or ClassB itself). And asking the compiler to only allow subtypes of this unknown type to be added to the list.\r\n\r\nThe only compatible subtypes the compiler knows are ClassB and any subtypes of ClassB. When creating instances, it is usually better to avoid wildcards.\r\n\r\nFor method parameters, wildcards give you more flexibility on what can be accepted. Use `PECS` (producer=extends, consumer=super) to determine which to use.\r\n[See Slide 5](https://www.oracle.com/technetwork/server-storage/ts-5217-159242.pdf)\r\n\r\n\r\n\r\n","title":"Trying to understand the role of super wildcard in Java Generics","body":"<p>By declaring <code>GenericMethod&lt;? super ClassB&gt;</code> you are declaring the type is an unknown type that is a super-class of ClassB (or ClassB itself). And asking the compiler to only allow subtypes of this unknown type to be added to the list.</p>\n\n<p>The only compatible subtypes the compiler knows are ClassB and any subtypes of ClassB. When creating instances, it is usually better to avoid wildcards.</p>\n\n<p>For method parameters, wildcards give you more flexibility on what can be accepted. Use <code>PECS</code> (producer=extends, consumer=super) to determine which to use.\n<a href=\"https://www.oracle.com/technetwork/server-storage/ts-5217-159242.pdf\" rel=\"nofollow noreferrer\">See Slide 5</a></p>\n"},{"tags":[],"owner":{"account_id":5067945,"reputation":617,"user_id":4067559,"display_name":"Val Martinez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694169638,"creation_date":1694118043,"answer_id":77062639,"question_id":58420734,"body_markdown":"I admit that it is a bit counterintuitive, but from the point of view of the compiler, it makes sense.\r\n\r\nSuppose you define a list in this way:\r\n\r\n    List&lt;? super ClassB&gt; myList;\r\n\r\nAnd you got\r\n\r\n    ClassB extends ClassA;\r\n    ClassC extends ClassA;\r\n\r\nCould you do ?\r\n\r\n    ClassA a = new ClassC();\r\n    myList.add (a);//does not compile\r\n\r\nNo, by several reasons. First because finally, at runtime, the parametrized type becomes a **concrete** and **single** type. So, in practice you **cannot mix** ClassA objects with ClassB objects.\r\n\r\nAnd second, because the compiler **must check** that whatever **you insert is casteable** to **ClassB**. So, only adding a ClassB object (or a subtype of him), fulfil the contract. **But the opposite is not always true!** A ClassA object could no be a super type of ClassB.\r\n\r\n&gt; I.e. the object &quot;a&quot; is actually a ClassC object!\r\n\r\nThat is why  you cannot add a supertype. So it only lets you add ClassB objects -or subtypes-\r\n\r\nIf you cast the object &quot;a&quot; to ClassB, would be compile, but will fail at runtime getting a *ClassCastException*:\r\n\r\n\r\n    ClassA a = new ClassC();\r\n    myList.add((ClassB) a); //Compiles but fails at runtime\r\n\r\nAt the same time, the wildcard combined with super, can be used as a formal parameter of a method. I.e.:\r\n\r\n    void printValues (List&lt;? super ClassB&gt; list)\r\n\r\nThis way permits generelize the treatment of super ClassB collections, making possible this calls:\r\n\r\n    List&lt;Object&gt; lo;\r\n    List&lt;ClassA&gt; la;\r\n    ...\r\n    printValues (lo);\r\n    printValues (la);\r\n\r\nIn this case, the definition using wildcards like &lt;? super ClassB&gt;, makes a little more sense. \r\n\r\n    ","title":"Trying to understand the role of super wildcard in Java Generics","body":"<p>I admit that it is a bit counterintuitive, but from the point of view of the compiler, it makes sense.</p>\n<p>Suppose you define a list in this way:</p>\n<pre><code>List&lt;? super ClassB&gt; myList;\n</code></pre>\n<p>And you got</p>\n<pre><code>ClassB extends ClassA;\nClassC extends ClassA;\n</code></pre>\n<p>Could you do ?</p>\n<pre><code>ClassA a = new ClassC();\nmyList.add (a);//does not compile\n</code></pre>\n<p>No, by several reasons. First because finally, at runtime, the parametrized type becomes a <strong>concrete</strong> and <strong>single</strong> type. So, in practice you <strong>cannot mix</strong> ClassA objects with ClassB objects.</p>\n<p>And second, because the compiler <strong>must check</strong> that whatever <strong>you insert is casteable</strong> to <strong>ClassB</strong>. So, only adding a ClassB object (or a subtype of him), fulfil the contract. <strong>But the opposite is not always true!</strong> A ClassA object could no be a super type of ClassB.</p>\n<blockquote>\n<p>I.e. the object &quot;a&quot; is actually a ClassC object!</p>\n</blockquote>\n<p>That is why  you cannot add a supertype. So it only lets you add ClassB objects -or subtypes-</p>\n<p>If you cast the object &quot;a&quot; to ClassB, would be compile, but will fail at runtime getting a <em>ClassCastException</em>:</p>\n<pre><code>ClassA a = new ClassC();\nmyList.add((ClassB) a); //Compiles but fails at runtime\n</code></pre>\n<p>At the same time, the wildcard combined with super, can be used as a formal parameter of a method. I.e.:</p>\n<pre><code>void printValues (List&lt;? super ClassB&gt; list)\n</code></pre>\n<p>This way permits generelize the treatment of super ClassB collections, making possible this calls:</p>\n<pre><code>List&lt;Object&gt; lo;\nList&lt;ClassA&gt; la;\n...\nprintValues (lo);\nprintValues (la);\n</code></pre>\n<p>In this case, the definition using wildcards like &lt;? super ClassB&gt;, makes a little more sense.</p>\n"}],"owner":{"account_id":6868391,"reputation":1588,"user_id":5279855,"accept_rate":32,"display_name":"Auro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":814,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1694169638,"creation_date":1571255376,"question_id":58420734,"body_markdown":"I was going through [this][1] article to understand the role of `super` wildcard in generics. I understood how `extends` works, but I am having difficulty understanding `super`\r\n\r\nI have a `ClassA` that is **extended** by `ClassB`, making `ClassA` super class of `ClassB`.\r\n\r\nIf I understood the article correctly, the `&lt;? super ClassB&gt;` would allow any Class that is a super type of `ClassB`.\r\n\r\nI have the following code\r\n\r\n**GenericMethod.java**\r\n\r\n    public class GenericMethod&lt;T&gt; {\r\n    \r\n    \tprivate List&lt;T&gt; list;\r\n    \t\r\n    \tpublic GenericMethod() {\r\n    \t\tlist = new ArrayList&lt;&gt;();\r\n    \t}\r\n    \t\r\n    \tpublic void add(T t) {\r\n    \t\tlist.add(t);\r\n    \t}\r\n    \t\r\n    \tpublic T get(int index) {\r\n    \t\treturn list.get(index);\r\n    \t}\r\n    }\r\n\r\n\r\n**Driver.java**\r\n\r\n    public class Driver {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tGenericMethod&lt;? super ClassB&gt; genericMethod = new GenericMethod&lt;&gt;();\r\n    \t\t\r\n    \t\tClassA classA = new ClassA();\r\n    \t\tgenericMethod.add(classA); // Compile-time error here\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n**Error**\r\n\r\n`The method add(capture#1-of ? super ClassB) in the type GenericMethod&lt;capture#1-of ? super ClassB&gt; is not applicable for the arguments (ClassA)`\r\n\r\n\r\nI don&#39;t understand where I am going wrong. When I instantiated the `GenericMethod` class, I already declared that it would accept any value that is a **super type** of `ClassB` with the declaration `&lt;? super ClassB&gt;`. Thus, the `T` inside the `GenericMethod` class should accept all classes that `ClassB` extends. \r\n\r\nWhy does the `add` method throw the compile-time error then? Shouldn&#39;t the method `add` already know that it&#39;s being passed a perfectly compatible type?\r\n\r\n  [1]: https://www.codejava.net/java-core/collections/generics-with-extends-and-super-wildcards-and-the-get-and-put-principle\r\n","title":"Trying to understand the role of super wildcard in Java Generics","body":"<p>I was going through <a href=\"https://www.codejava.net/java-core/collections/generics-with-extends-and-super-wildcards-and-the-get-and-put-principle\" rel=\"nofollow noreferrer\">this</a> article to understand the role of <code>super</code> wildcard in generics. I understood how <code>extends</code> works, but I am having difficulty understanding <code>super</code></p>\n\n<p>I have a <code>ClassA</code> that is <strong>extended</strong> by <code>ClassB</code>, making <code>ClassA</code> super class of <code>ClassB</code>.</p>\n\n<p>If I understood the article correctly, the <code>&lt;? super ClassB&gt;</code> would allow any Class that is a super type of <code>ClassB</code>.</p>\n\n<p>I have the following code</p>\n\n<p><strong>GenericMethod.java</strong></p>\n\n<pre><code>public class GenericMethod&lt;T&gt; {\n\n    private List&lt;T&gt; list;\n\n    public GenericMethod() {\n        list = new ArrayList&lt;&gt;();\n    }\n\n    public void add(T t) {\n        list.add(t);\n    }\n\n    public T get(int index) {\n        return list.get(index);\n    }\n}\n</code></pre>\n\n<p><strong>Driver.java</strong></p>\n\n<pre><code>public class Driver {\n\n    public static void main(String[] args) {\n\n        GenericMethod&lt;? super ClassB&gt; genericMethod = new GenericMethod&lt;&gt;();\n\n        ClassA classA = new ClassA();\n        genericMethod.add(classA); // Compile-time error here\n\n    }\n\n}\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<p><code>The method add(capture#1-of ? super ClassB) in the type GenericMethod&lt;capture#1-of ? super ClassB&gt; is not applicable for the arguments (ClassA)</code></p>\n\n<p>I don't understand where I am going wrong. When I instantiated the <code>GenericMethod</code> class, I already declared that it would accept any value that is a <strong>super type</strong> of <code>ClassB</code> with the declaration <code>&lt;? super ClassB&gt;</code>. Thus, the <code>T</code> inside the <code>GenericMethod</code> class should accept all classes that <code>ClassB</code> extends. </p>\n\n<p>Why does the <code>add</code> method throw the compile-time error then? Shouldn't the method <code>add</code> already know that it's being passed a perfectly compatible type?</p>\n"},{"tags":["java","selenium-webdriver","testing","automation"],"owner":{"account_id":19703137,"reputation":1,"user_id":14425450,"display_name":"Prabhat Ranjan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694169621,"answer_count":0,"score":0,"last_activity_date":1694169503,"creation_date":1694169503,"question_id":77066177,"body_markdown":"I am trying to create Hybrid framework in POM with Java and selenium. but when i am trying to execute my test case it i throwing &quot;java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.get(String)&quot; because &quot;com.TestCase.loginPageTest.driver&quot; is null&quot;\r\nI ahve declared my driver as public static but still my issue occurs again. I am sharing my project structure and code snipets. please note i am using seleium 4.11 and my chrome version is 116[[[enter image description here](https://i.stack.imgur.com/x4Yd6.png)](https://i.stack.imgur.com/Nog8I.png)](https://i.stack.imgur.com/JriaM.png)\r\n\r\n\r\nCan abyone can guide me how to resolve. PLease feel free to connect","title":"Java Selenium throwing java.lang.NullPointerException:","body":"<p>I am trying to create Hybrid framework in POM with Java and selenium. but when i am trying to execute my test case it i throwing &quot;java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.get(String)&quot; because &quot;com.TestCase.loginPageTest.driver&quot; is null&quot;\nI ahve declared my driver as public static but still my issue occurs again. I am sharing my project structure and code snipets. please note i am using seleium 4.11 and my chrome version is 116[[<a href=\"https://i.stack.imgur.com/x4Yd6.png\" rel=\"nofollow noreferrer\">enter image description here</a>](<a href=\"https://i.stack.imgur.com/Nog8I.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/Nog8I.png</a>)](<a href=\"https://i.stack.imgur.com/JriaM.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/JriaM.png</a>)</p>\n<p>Can abyone can guide me how to resolve. PLease feel free to connect</p>\n"},{"tags":["java","byte-buddy"],"answers":[{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694169032,"creation_date":1620370919,"answer_id":67430341,"question_id":67428004,"body_markdown":"You&#39;d need to disable the caching of the `Method` instance as with:\r\n\r\n    @Origin(cache = false)\r\n\r\nfor this, but this makes the call rather expensive. If you just want to stringify the method instance to begin with rather use `@Origin String method` which does not need caching anyway\r\n\r\nWhen redefining, you should use `.disableClassFormatChanges()`.","title":"Unable to obtain Method in Byte Buddy Interceptor","body":"<p>You'd need to disable the caching of the <code>Method</code> instance as with:</p>\n<pre><code>@Origin(cache = false)\n</code></pre>\n<p>for this, but this makes the call rather expensive. If you just want to stringify the method instance to begin with rather use <code>@Origin String method</code> which does not need caching anyway</p>\n<p>When redefining, you should use <code>.disableClassFormatChanges()</code>.</p>\n"}],"owner":{"account_id":237719,"reputation":1310,"user_id":506114,"accept_rate":65,"display_name":"Walter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67430341,"answer_count":1,"score":1,"last_activity_date":1694169032,"creation_date":1620352098,"question_id":67428004,"body_markdown":"When I add:\r\n\r\n  \r\n\r\n    @Origin Method method\r\n\r\nto my interceptor:\r\n\r\n\r\n    @RuntimeType\r\n      public static void intercept(\r\n          @Origin Method method, @RuntimeType @AllArguments Object[] allArguments) {\r\n        System.out.println(&quot;intercepted with args: &quot; + Arrays.toString(allArguments));\r\n        System.out.println(&quot;intercepted method: &quot; + method);\r\n      }\r\n\r\n\r\nI end up with an exception:\r\n\r\n    Error invoking java.lang.instrument.Instrumentation#retransformClasses\r\n    class redefinition failed: attempted to change the schema (add/remove fields)\r\n\r\n\r\nMy setup looks like this:\r\n\r\n    ByteBuddyAgent.install();\r\n        final ByteBuddy byteBuddy = new ByteBuddy();\r\n    \r\n        byteBuddy\r\n            .redefine(ByteBuddyFoo.class)\r\n            .method(ElementMatchers.named(&quot;anotherMethod&quot;).or(ElementMatchers.named(&quot;toString&quot;)))\r\n            .intercept(MethodDelegation.to(MethodInterceptor.class))\r\n            .make()\r\n            .load(ByteBuddyFoo.class.getClassLoader(), ClassReloadingStrategy.fromInstalledAgent());\r\n\r\n\r\nAnd my simple POJO is:\r\n\r\n    public class ByteBuddyFoo {\r\n      @Override\r\n      public String toString() {\r\n        return &quot;ByteBuddyFoo{}&quot;;\r\n      }\r\n    \r\n      public void anotherMethod(final String input) {\r\n        System.out.println(&quot;input from anotherMethod: &quot; + input);\r\n      }\r\n    }\r\n\r\n\r\nWhen my interceptor doesn&#39;t have @Origin Method method in it, it intercepts calls just fine; however, as soon as I add that back, it throws the above exception.\r\n\r\nI&#39;d like to be able to intercept any method call that I&#39;d like and have access to both the Method, its arguments, and result.  Originally, I was doing this through AspectJ; however, I want to be able to do this at runtime so my code doesn&#39;t need to be modified.","title":"Unable to obtain Method in Byte Buddy Interceptor","body":"<p>When I add:</p>\n<pre><code>@Origin Method method\n</code></pre>\n<p>to my interceptor:</p>\n<pre><code>@RuntimeType\n  public static void intercept(\n      @Origin Method method, @RuntimeType @AllArguments Object[] allArguments) {\n    System.out.println(&quot;intercepted with args: &quot; + Arrays.toString(allArguments));\n    System.out.println(&quot;intercepted method: &quot; + method);\n  }\n</code></pre>\n<p>I end up with an exception:</p>\n<pre><code>Error invoking java.lang.instrument.Instrumentation#retransformClasses\nclass redefinition failed: attempted to change the schema (add/remove fields)\n</code></pre>\n<p>My setup looks like this:</p>\n<pre><code>ByteBuddyAgent.install();\n    final ByteBuddy byteBuddy = new ByteBuddy();\n\n    byteBuddy\n        .redefine(ByteBuddyFoo.class)\n        .method(ElementMatchers.named(&quot;anotherMethod&quot;).or(ElementMatchers.named(&quot;toString&quot;)))\n        .intercept(MethodDelegation.to(MethodInterceptor.class))\n        .make()\n        .load(ByteBuddyFoo.class.getClassLoader(), ClassReloadingStrategy.fromInstalledAgent());\n</code></pre>\n<p>And my simple POJO is:</p>\n<pre><code>public class ByteBuddyFoo {\n  @Override\n  public String toString() {\n    return &quot;ByteBuddyFoo{}&quot;;\n  }\n\n  public void anotherMethod(final String input) {\n    System.out.println(&quot;input from anotherMethod: &quot; + input);\n  }\n}\n</code></pre>\n<p>When my interceptor doesn't have @Origin Method method in it, it intercepts calls just fine; however, as soon as I add that back, it throws the above exception.</p>\n<p>I'd like to be able to intercept any method call that I'd like and have access to both the Method, its arguments, and result.  Originally, I was doing this through AspectJ; however, I want to be able to do this at runtime so my code doesn't need to be modified.</p>\n"},{"tags":["java","android","firebase-realtime-database","android-recyclerview"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1694086726,"post_id":77058090,"comment_id":135846516,"body_markdown":"So most likely `currentUserName` is `null`, right? When you want to perform the comparation.","body":"So most likely <code>currentUserName</code> is <code>null</code>, right? When you want to perform the comparation."},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1694091945,"post_id":77058090,"comment_id":135847650,"body_markdown":"Yes, as I have explained in detail in my question that whenever I am trying to do login with the fake(not real email) email address the app crashes and current username at this point is null, and when I launch the app again in my device (not from Android studio), it goes to main activity because login was successful, and now the current user is empty but not null. And it ignores to exclude the current user from the list so current user also display in the recyclerView list.","body":"Yes, as I have explained in detail in my question that whenever I am trying to do login with the fake(not real email) email address the app crashes and current username at this point is null, and when I launch the app again in my device (not from Android studio), it goes to main activity because login was successful, and now the current user is empty but not null. And it ignores to exclude the current user from the list so current user also display in the recyclerView list."},{"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"score":0,"creation_date":1694092598,"post_id":77058090,"comment_id":135847812,"body_markdown":"and when I sign in with the Google account it works perfectly.","body":"and when I sign in with the Google account it works perfectly."}],"answers":[{"tags":[],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694155962,"creation_date":1694155962,"answer_id":77064740,"question_id":77058090,"body_markdown":"This is the code that I was using before:\r\n\r\n    if (!currentUserId.equals(users.getUserId())){\r\n                        list.add(users);\r\n                    }\r\n\r\nhere I was trying to get the user ID from the user model object but it wasn&#39;t providing me the ID, and it was actually the wrong approach for me.\r\n\r\nand this is the code that is working for me and excluding the current user from the list whether it is a real Google account or a fake email.\r\n\r\n      if (!currentUserId.equals(childKey)){\r\n                        list.add(users);\r\n                    }\r\n\r\nhere child key is the:\r\n\r\n    String childKey = dataSnapshot.getKey();\r\n\r\nThis actually gives me a user id as a key in every iteration of the loop and hence I used this for comparison and it is working smoothly. \r\n\r\n","title":"When Logging in with fake/template email app crashes and when logging in with actual google email it doesn&#39;t crash","body":"<p>This is the code that I was using before:</p>\n<pre><code>if (!currentUserId.equals(users.getUserId())){\n                    list.add(users);\n                }\n</code></pre>\n<p>here I was trying to get the user ID from the user model object but it wasn't providing me the ID, and it was actually the wrong approach for me.</p>\n<p>and this is the code that is working for me and excluding the current user from the list whether it is a real Google account or a fake email.</p>\n<pre><code>  if (!currentUserId.equals(childKey)){\n                    list.add(users);\n                }\n</code></pre>\n<p>here child key is the:</p>\n<pre><code>String childKey = dataSnapshot.getKey();\n</code></pre>\n<p>This actually gives me a user id as a key in every iteration of the loop and hence I used this for comparison and it is working smoothly.</p>\n"},{"tags":[],"owner":{"account_id":13210775,"reputation":967,"user_id":9541096,"display_name":"Owais Yosuf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694168867,"creation_date":1694168867,"answer_id":77066104,"question_id":77058090,"body_markdown":"Try:\r\n\r\n    reference.addValueForSingleEventListener();\r\ninstead of:\r\n\r\n    reference.addValueEventListener();","title":"When Logging in with fake/template email app crashes and when logging in with actual google email it doesn&#39;t crash","body":"<p>Try:</p>\n<pre><code>reference.addValueForSingleEventListener();\n</code></pre>\n<p>instead of:</p>\n<pre><code>reference.addValueEventListener();\n</code></pre>\n"}],"owner":{"account_id":26840344,"reputation":134,"user_id":20426969,"display_name":"Sarmad Ali"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694168867,"creation_date":1694077154,"question_id":77058090,"body_markdown":"I have a Firebase database where I have stored the credentials through signup and Google sign-in. When I am signing in through real Google email it goes smoothly and also it doesn&#39;t show the current user in the recyclerView list. However, when I try to log in through the fake/template email that I used to sign up (haven&#39;t implemented any verification so far that&#39;s why able to sign up through the fake ones) - and password of that account then app crashes and it closes. when i see the logcat it says this:\r\n\r\n    FATAL EXCEPTION: main\r\n                                                                                                \r\n\r\n    Process: com.sarmadali.chatmingle, PID: 13483\r\n\tjava.lang.NullPointerException: Attempt to invoke virtual method &#39;boolean java.lang.String.equals(java.lang.Object)&#39; on a null object reference\r\n\t\tat com.sarmadali.chatmingle.Fragments.ChatsFragment$1.onDataChange(ChatsFragment.java:74)\r\n\t\tat com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\r\n\t\tat com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\r\n\t\tat com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\r\n\t\tat android.os.Handler.handleCallback(Handler.java:883)\r\n\t\tat android.os.Handler.dispatchMessage(Handler.java:100)\r\n\t\tat android.os.Looper.loop(Looper.java:264)\r\n\t\tat android.app.ActivityThread.main(ActivityThread.java:7684)\r\n\t\tat java.lang.reflect.Method.invoke(Native Method)\r\n\t\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\n\t\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:980)\r\n\r\n\r\n\r\nand the null object which it is referring is caused by this:\r\n\r\n \r\n\r\n    String currentUserName = firebaseAuth.getCurrentUser().getDisplayName();\r\n     //to not add current user in the list\r\n    //users is the Model\r\n                        if (!currentUserName.equals(users.getUserName())){\r\n                            list.add(users);\r\n                        }\r\n\r\nMy first concern is that when I was signing in with the Google account it didn&#39;t through NullPointerException and when I logged in with the fake emails and passwords that are actually in the real-time database it throughs the NullPointerException, and hence it crashed the app. \r\n\r\nI have also applied this: \r\n\r\n   \r\n\r\n    Log.d(&quot;Current UserName&quot;,&quot;UserName: &quot;+currentUserName);\r\n\r\nAs a result that i noticed that when logged in with the Google account it returns the username, but when I try to log in with the fake credentials (means that the email actually doesn&#39;t exist but I have set the username, email, and password through signup) Now these credentials are also in the firebase database, - it crashes the app and when I re-launched the app from my physical device the logs display username as empty not as null.\r\nit shows the main activity(only allowed after login) and it includes the current user in the RecyclerView List as well. means it ignores that code when I again launch the app. Doesn&#39;t really get it why? because it is null? then it should crash again?\r\n\r\n    //to not add current user in the list\r\n                        if (!currentUserName.equals(users.getUserName())){\r\n                            list.add(users);\r\n                        }\r\n\r\n**It is the complete code of setting data on recyclerview and excluding the current user.**\r\n\r\n    reference = firebaseDatabase.getInstance().getReference().child(&quot;Users&quot;);\r\n    \r\n            reference.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n    \r\n                    list.clear();\r\n    \r\n                    String currentUserName = firebaseAuth.getCurrentUser().getDisplayName();\r\n    \r\n                    for (DataSnapshot dataSnapshot : snapshot.getChildren()) {\r\n    \r\n                        Users users = dataSnapshot.getValue(Users.class);\r\n    \r\n                        Log.d(&quot;Current UserName&quot;,&quot;UserName: &quot;+currentUserName);\r\n    \r\n                        //to not add current user in the list\r\n                        if (!currentUserName.equals(users.getUserName())){\r\n                            list.add(users);\r\n                        }\r\n    \r\n                    }\r\n    \r\n                    chatAdapter.notifyDataSetChanged();\r\n                }\r\n\r\nIf you need any other information ask me.\r\n\r\n**UPDATE**\r\n\r\n     Log.d(&quot;User ID&quot;,&quot;UserID: &quot;+users.getUserId());\r\n\r\nI have tried this and changed the comparison from userName to userId.\r\nAs a result of the above Log, I have got to know that now, the current user ID is always being displayed when it is the fake one and the Other user&#39;s ID is null. and due to this reason it is ignoring to exclude the current user from the list. And some times it shows the ids of other users too that of the real google accounts.\r\n\r\n&gt; users.getUserId()\r\n\r\ndoesn&#39;t seem to get the user id for all the user, don&#39;t know why?\r\n\r\nI changed some code  \r\n\r\n    if (users.getUserId() != null){\r\n             Log.d(&quot;User ID&quot;,&quot;UserID: &quot;+users.getUserId());\r\n      //to not add current user in the list\r\n               if (!currentUserId.equals(users.getUserId())){\r\n                            list.add(users);\r\n                        }\r\n                   }\r\n\r\nFrom the above code i just getting the current user id from the below code not others.\r\n\r\n&gt; users.getUserId()\r\n\r\n\r\n\r\nHere is the picture of the database, there might be a problem with it that i am not getting. \r\n\r\nHere the user that contain profile pic are signed in with google and the other one is fake email address that don&#39;t exist. Let me know if i am doing something wrong in the code that don&#39;t has proper effect on this database. \r\nand the rules are read and write &quot;true&quot;.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nidSM.png","title":"When Logging in with fake/template email app crashes and when logging in with actual google email it doesn&#39;t crash","body":"<p>I have a Firebase database where I have stored the credentials through signup and Google sign-in. When I am signing in through real Google email it goes smoothly and also it doesn't show the current user in the recyclerView list. However, when I try to log in through the fake/template email that I used to sign up (haven't implemented any verification so far that's why able to sign up through the fake ones) - and password of that account then app crashes and it closes. when i see the logcat it says this:</p>\n<pre><code>FATAL EXCEPTION: main\n                                                                                            \n\nProcess: com.sarmadali.chatmingle, PID: 13483\njava.lang.NullPointerException: Attempt to invoke virtual method 'boolean java.lang.String.equals(java.lang.Object)' on a null object reference\n    at com.sarmadali.chatmingle.Fragments.ChatsFragment$1.onDataChange(ChatsFragment.java:74)\n    at com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\n    at com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\n    at com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\n    at android.os.Handler.handleCallback(Handler.java:883)\n    at android.os.Handler.dispatchMessage(Handler.java:100)\n    at android.os.Looper.loop(Looper.java:264)\n    at android.app.ActivityThread.main(ActivityThread.java:7684)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:980)\n</code></pre>\n<p>and the null object which it is referring is caused by this:</p>\n<pre><code>String currentUserName = firebaseAuth.getCurrentUser().getDisplayName();\n //to not add current user in the list\n//users is the Model\n                    if (!currentUserName.equals(users.getUserName())){\n                        list.add(users);\n                    }\n</code></pre>\n<p>My first concern is that when I was signing in with the Google account it didn't through NullPointerException and when I logged in with the fake emails and passwords that are actually in the real-time database it throughs the NullPointerException, and hence it crashed the app.</p>\n<p>I have also applied this:</p>\n<pre><code>Log.d(&quot;Current UserName&quot;,&quot;UserName: &quot;+currentUserName);\n</code></pre>\n<p>As a result that i noticed that when logged in with the Google account it returns the username, but when I try to log in with the fake credentials (means that the email actually doesn't exist but I have set the username, email, and password through signup) Now these credentials are also in the firebase database, - it crashes the app and when I re-launched the app from my physical device the logs display username as empty not as null.\nit shows the main activity(only allowed after login) and it includes the current user in the RecyclerView List as well. means it ignores that code when I again launch the app. Doesn't really get it why? because it is null? then it should crash again?</p>\n<pre><code>//to not add current user in the list\n                    if (!currentUserName.equals(users.getUserName())){\n                        list.add(users);\n                    }\n</code></pre>\n<p><strong>It is the complete code of setting data on recyclerview and excluding the current user.</strong></p>\n<pre><code>reference = firebaseDatabase.getInstance().getReference().child(&quot;Users&quot;);\n\n        reference.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n\n                list.clear();\n\n                String currentUserName = firebaseAuth.getCurrentUser().getDisplayName();\n\n                for (DataSnapshot dataSnapshot : snapshot.getChildren()) {\n\n                    Users users = dataSnapshot.getValue(Users.class);\n\n                    Log.d(&quot;Current UserName&quot;,&quot;UserName: &quot;+currentUserName);\n\n                    //to not add current user in the list\n                    if (!currentUserName.equals(users.getUserName())){\n                        list.add(users);\n                    }\n\n                }\n\n                chatAdapter.notifyDataSetChanged();\n            }\n</code></pre>\n<p>If you need any other information ask me.</p>\n<p><strong>UPDATE</strong></p>\n<pre><code> Log.d(&quot;User ID&quot;,&quot;UserID: &quot;+users.getUserId());\n</code></pre>\n<p>I have tried this and changed the comparison from userName to userId.\nAs a result of the above Log, I have got to know that now, the current user ID is always being displayed when it is the fake one and the Other user's ID is null. and due to this reason it is ignoring to exclude the current user from the list. And some times it shows the ids of other users too that of the real google accounts.</p>\n<blockquote>\n<p>users.getUserId()</p>\n</blockquote>\n<p>doesn't seem to get the user id for all the user, don't know why?</p>\n<p>I changed some code</p>\n<pre><code>if (users.getUserId() != null){\n         Log.d(&quot;User ID&quot;,&quot;UserID: &quot;+users.getUserId());\n  //to not add current user in the list\n           if (!currentUserId.equals(users.getUserId())){\n                        list.add(users);\n                    }\n               }\n</code></pre>\n<p>From the above code i just getting the current user id from the below code not others.</p>\n<blockquote>\n<p>users.getUserId()</p>\n</blockquote>\n<p>Here is the picture of the database, there might be a problem with it that i am not getting.</p>\n<p>Here the user that contain profile pic are signed in with google and the other one is fake email address that don't exist. Let me know if i am doing something wrong in the code that don't has proper effect on this database.\nand the rules are read and write &quot;true&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/nidSM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nidSM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","file","transactions","apache-commons"],"answers":[{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694168387,"creation_date":1694168387,"answer_id":77066050,"question_id":77012489,"body_markdown":"To make it happen transactionally,you could copy the entire file and then delete from source location.If we directly try to move the file,its contents could get corrupted in case of failure and hence rollback won&#39;t help.\r\n```\r\npublic static void moveFiles() throws Exception {\r\n\r\n            Path source = Paths.get(&quot;C:\\\\sourced\\\\A.txt&quot;);\r\n            Path destination = Paths.get(&quot;C:\\\\destination&quot;,source.getFileName().toString());\r\n            Path fileToBeDeleted = source;\r\n            try {\r\n                Files.createFile(destination);\r\n                Files.copy(source, destination, StandardCopyOption.COPY_ATTRIBUTES);\r\n            }catch (Exception e){\r\n                logger.log(Level.WARNING,&quot;Error while copyingFile to destination&quot;);\r\n                fileToBeDeleted = destination;\r\n            }finally {\r\n                try {\r\n                    Files.deleteIfExists(fileToBeDeleted);\r\n                }catch (Exception e){\r\n                    logger.log(Level.SEVERE,&quot;File not deleted from source/destination&quot;);\r\n                    throw new IllegalStateException(&quot;Error while deleting file in source/destination &quot;+fileToBeDeleted);\r\n                }\r\n            }\r\n\r\n    }\r\n```\r\nThe above implementation was done using `java.nio` package.You could use apache utilities for file operations [ApacheFileUtil](https://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FileUtils.html#copyFile(java.io.File,%C2%A0java.io.File))","title":"Apache Transactions : How to move the files transactionally","body":"<p>To make it happen transactionally,you could copy the entire file and then delete from source location.If we directly try to move the file,its contents could get corrupted in case of failure and hence rollback won't help.</p>\n<pre><code>public static void moveFiles() throws Exception {\n\n            Path source = Paths.get(&quot;C:\\\\sourced\\\\A.txt&quot;);\n            Path destination = Paths.get(&quot;C:\\\\destination&quot;,source.getFileName().toString());\n            Path fileToBeDeleted = source;\n            try {\n                Files.createFile(destination);\n                Files.copy(source, destination, StandardCopyOption.COPY_ATTRIBUTES);\n            }catch (Exception e){\n                logger.log(Level.WARNING,&quot;Error while copyingFile to destination&quot;);\n                fileToBeDeleted = destination;\n            }finally {\n                try {\n                    Files.deleteIfExists(fileToBeDeleted);\n                }catch (Exception e){\n                    logger.log(Level.SEVERE,&quot;File not deleted from source/destination&quot;);\n                    throw new IllegalStateException(&quot;Error while deleting file in source/destination &quot;+fileToBeDeleted);\n                }\n            }\n\n    }\n</code></pre>\n<p>The above implementation was done using <code>java.nio</code> package.You could use apache utilities for file operations <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FileUtils.html#copyFile(java.io.File,%C2%A0java.io.File)\" rel=\"nofollow noreferrer\">ApacheFileUtil</a></p>\n"}],"owner":{"account_id":23224662,"reputation":11,"user_id":17316353,"display_name":"Kaarthikeyan K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694168387,"creation_date":1693448175,"question_id":77012489,"body_markdown":"Use case:\r\nNeed to move a file from one location to another location in a transactional way.If the operation fails,the appropriate operation must be rolled back.\r\n\r\nI&#39;ve chosen Apache Commons Transaction lib.\r\n\r\nI tried to use moveResource function from FileResourceManager,below is my code.\r\n\r\nCode:\r\n``` \r\n\r\n    public static void moveFiles() throws ResourceManagerException {\r\n    \t\tFileResourceManager fileResourceManager=null;\r\n    \t\tString txId = null;\r\n    \t\ttry {\r\n    \t\t\tString workDir = &quot;D:\\\\source&quot;;\r\n    \t\t\tString storeDir = &quot;D:\\\\destination&quot;;\r\n    \r\n    \t\t\tfileResourceManager = new FileResourceManager(storeDir, workDir, false, LOGGER_FACADE,true);\r\n    \r\n    \t\t\tfileResourceManager.start();\r\n    \t\t\ttxId = fileResourceManager.generatedUniqueTxId();\r\n    \t\t\tfileResourceManager.startTransaction(txId);\r\n    \r\n    \t\t\tfileResourceManager.moveResource(txId,workDir,storeDir,true);\r\n    \r\n    \t\t\tfileResourceManager.commitTransaction(txId);\r\n    \t\t\t//if any exception arises rollback\r\n    \t\t} catch (ResourceManagerException resourceManagerException) {\r\n    \t\t\tfileResourceManager.rollbackTransaction(txId);\r\n    \t\t\tresourceManagerException.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    Is it a right way to move files ? , below is my source directory (where file present) and destination directory (where file needs to be moved)\r\n[![source and destination directories][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oS6x5.png","title":"Apache Transactions : How to move the files transactionally","body":"<p>Use case:\nNeed to move a file from one location to another location in a transactional way.If the operation fails,the appropriate operation must be rolled back.</p>\n<p>I've chosen Apache Commons Transaction lib.</p>\n<p>I tried to use moveResource function from FileResourceManager,below is my code.</p>\n<p>Code:</p>\n<pre><code>\n    public static void moveFiles() throws ResourceManagerException {\n            FileResourceManager fileResourceManager=null;\n            String txId = null;\n            try {\n                String workDir = &quot;D:\\\\source&quot;;\n                String storeDir = &quot;D:\\\\destination&quot;;\n    \n                fileResourceManager = new FileResourceManager(storeDir, workDir, false, LOGGER_FACADE,true);\n    \n                fileResourceManager.start();\n                txId = fileResourceManager.generatedUniqueTxId();\n                fileResourceManager.startTransaction(txId);\n    \n                fileResourceManager.moveResource(txId,workDir,storeDir,true);\n    \n                fileResourceManager.commitTransaction(txId);\n                //if any exception arises rollback\n            } catch (ResourceManagerException resourceManagerException) {\n                fileResourceManager.rollbackTransaction(txId);\n                resourceManagerException.printStackTrace();\n            }\n        }\n    \n    Is it a right way to move files ? , below is my source directory (where file present) and destination directory (where file needs to be moved)\n[![source and destination directories][1]][1]\n\n\n  [1]: https://i.stack.imgur.com/oS6x5.png\n</code></pre>\n"},{"tags":["java","docker","apache-kafka","redpanda"],"comments":[{"owner":{"account_id":2005971,"reputation":536,"user_id":1795860,"accept_rate":91,"display_name":"TheNytangel"},"score":0,"creation_date":1693971242,"post_id":77048389,"comment_id":135828507,"body_markdown":"The dockerfile you linked only includes exposing port 8080 of the conduktor-platform container. Have you tried to expose port 9021?","body":"The dockerfile you linked only includes exposing port 8080 of the conduktor-platform container. Have you tried to expose port 9021?"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694019911,"creation_date":1694019911,"answer_id":77053995,"question_id":77048389,"body_markdown":"Unclear what you mean &quot;preconfigured&quot;. The file in the link doesn&#39;t run any broker, only Postgres database and Conduktor console container. \r\n\r\nIf you want to run RedPanda, you need to edit that compose file rather than immediately `up` it.\r\n\r\nIf RedPanda broker is running in an existing container, then you still  need to modify the Compose file to [add networks](https://docs.docker.com/compose/networking/) so that `redpanda-1` is a known DNS address. \r\n\r\n&gt; cannot seem to access this in my Java Producer/Consumer application\r\n\r\nRelated - https://stackoverflow.com/questions/51630260/connect-to-kafka-running-in-docker","title":"How do you connect your Java Producer to a preconfigured Kafka in Red Panda?","body":"<p>Unclear what you mean &quot;preconfigured&quot;. The file in the link doesn't run any broker, only Postgres database and Conduktor console container.</p>\n<p>If you want to run RedPanda, you need to edit that compose file rather than immediately <code>up</code> it.</p>\n<p>If RedPanda broker is running in an existing container, then you still  need to modify the Compose file to <a href=\"https://docs.docker.com/compose/networking/\" rel=\"nofollow noreferrer\">add networks</a> so that <code>redpanda-1</code> is a known DNS address.</p>\n<blockquote>\n<p>cannot seem to access this in my Java Producer/Consumer application</p>\n</blockquote>\n<p>Related - <a href=\"https://stackoverflow.com/questions/51630260/connect-to-kafka-running-in-docker\">Connect to Kafka running in Docker</a></p>\n"},{"tags":[],"owner":{"account_id":81772,"reputation":4274,"user_id":230415,"accept_rate":60,"display_name":"Dunith Dhanushka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694079375,"creation_date":1694079375,"answer_id":77058371,"question_id":77048389,"body_markdown":"Your question, &quot;*..preconfigured Kafka in Red Panda..*&quot;, implies that you haven&#39;t understood the relationship between Kafka, Redpanda, and Conduktor.\r\n\r\nRedpanda is a streaming data platform similar to Kafka, sharing the same read/write APIs, and has an entirely different architecture. Therefore, Redpanda is a drop-in replacement for Apache Kafka workloads if you are looking for more performance and cost-efficiency. You can connect your existing client applications to Redpanda as if they are connecting to Kafka because they share the same API interface. \r\n\r\nConduktor is a Developer Experience platform for Kafka, helping developers to debug and administer their Kafka clusters. I think the Conduktor Console has an embedded Redpanda container to make things simpler for beginners.\r\n\r\nTo solve your connectivity issue, make sure you edit the docker-compose file and expose port 9201 where the Redpanda container is going to bind.\r\n\r\nIf you want to test Redpanda in isolation, you can try out their quickstart guide on Docker. https://docs.redpanda.com/22.3/get-started/quick-start/\r\n","title":"How do you connect your Java Producer to a preconfigured Kafka in Red Panda?","body":"<p>Your question, &quot;<em>..preconfigured Kafka in Red Panda..</em>&quot;, implies that you haven't understood the relationship between Kafka, Redpanda, and Conduktor.</p>\n<p>Redpanda is a streaming data platform similar to Kafka, sharing the same read/write APIs, and has an entirely different architecture. Therefore, Redpanda is a drop-in replacement for Apache Kafka workloads if you are looking for more performance and cost-efficiency. You can connect your existing client applications to Redpanda as if they are connecting to Kafka because they share the same API interface.</p>\n<p>Conduktor is a Developer Experience platform for Kafka, helping developers to debug and administer their Kafka clusters. I think the Conduktor Console has an embedded Redpanda container to make things simpler for beginners.</p>\n<p>To solve your connectivity issue, make sure you edit the docker-compose file and expose port 9201 where the Redpanda container is going to bind.</p>\n<p>If you want to test Redpanda in isolation, you can try out their quickstart guide on Docker. <a href=\"https://docs.redpanda.com/22.3/get-started/quick-start/\" rel=\"nofollow noreferrer\">https://docs.redpanda.com/22.3/get-started/quick-start/</a></p>\n"}],"owner":{"account_id":13343493,"reputation":443,"user_id":9631005,"display_name":"Rigo Sarmiento"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1694168001,"creation_date":1693960128,"question_id":77048389,"body_markdown":"I&#39;m learning Kafka via Conduktor. I ran this command on their get-started page:\r\n\r\n&gt;curl -L https://releases.conduktor.io/console -o docker-compose.yml &amp;&amp; docker compose up -d --wait &amp;&amp; echo &quot;Conduktor started on http://localhost:8080&quot;\r\n\r\nNow when I visit the console and view the connection, I see it has a bootstrap server of redpanda-1:9021\r\n\r\nWhat confuses me is I cannot seem to access this in my Java Producer/Consumer application. It just simply cannot find it. I assume it is because it is in a container?\r\n\r\n**EDIT:** Already voted to close. Yep, I asked this question with minimal understanding of Kafka, and was just hoping to be able to use the &quot;preconfigured kafka&quot; inside Conduktor for immediate use in a Java App. All good now. Thank you all for your answers.","title":"How do you connect your Java Producer to a preconfigured Kafka in Red Panda?","body":"<p>I'm learning Kafka via Conduktor. I ran this command on their get-started page:</p>\n<blockquote>\n<p>curl -L <a href=\"https://releases.conduktor.io/console\" rel=\"nofollow noreferrer\">https://releases.conduktor.io/console</a> -o docker-compose.yml &amp;&amp; docker compose up -d --wait &amp;&amp; echo &quot;Conduktor started on http://localhost:8080&quot;</p>\n</blockquote>\n<p>Now when I visit the console and view the connection, I see it has a bootstrap server of redpanda-1:9021</p>\n<p>What confuses me is I cannot seem to access this in my Java Producer/Consumer application. It just simply cannot find it. I assume it is because it is in a container?</p>\n<p><strong>EDIT:</strong> Already voted to close. Yep, I asked this question with minimal understanding of Kafka, and was just hoping to be able to use the &quot;preconfigured kafka&quot; inside Conduktor for immediate use in a Java App. All good now. Thank you all for your answers.</p>\n"},{"tags":["java","postgresql","hibernate","h2"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1694151961,"post_id":77064387,"comment_id":135856223,"body_markdown":"To be open to use UserTypes for more than one column?","body":"To be open to use UserTypes for more than one column?"}],"answers":[{"tags":[],"owner":{"account_id":29386274,"reputation":51,"user_id":22515654,"display_name":"Klajd Bakalli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694167915,"creation_date":1694167915,"answer_id":77065995,"question_id":77064387,"body_markdown":"The reason an array of strings &quot;names&quot; is used in this Hibernate method even when only one name is expected is because Hibernate designed a consistent method signature that can handle both simple cases with one name and more complex cases with multiple names.\r\n\r\nIf you want only one below is an example:\r\n \r\n`String columnName = names[0];`\r\n\r\n","title":"Hibernate 5 UserType","body":"<p>The reason an array of strings &quot;names&quot; is used in this Hibernate method even when only one name is expected is because Hibernate designed a consistent method signature that can handle both simple cases with one name and more complex cases with multiple names.</p>\n<p>If you want only one below is an example:</p>\n<p><code>String columnName = names[0];</code></p>\n"}],"owner":{"account_id":29320823,"reputation":1,"user_id":22464474,"display_name":"Dumidu Fernando"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694167915,"creation_date":1694151650,"question_id":77064387,"body_markdown":"    @Override\r\n        public Object nullSafeGet(ResultSet rs, String[] names, SharedSessionContractImplementor session, Object owner)\r\n                throws HibernateException {\r\n            try {\r\n                Object dbResult = rs.getObject(names[0]);\r\n                if (dbResult != null) {\r\n\r\nwhen using Hibernate 5 to convert JSON to Java JSON object  in UserType class method `public Object nullSafeGet(ResultSet rs, String[] names…`  \r\n-&gt; why is an array of `String`s `names` used here when just one name is coming?\r\n","title":"Hibernate 5 UserType","body":"<pre><code>@Override\n    public Object nullSafeGet(ResultSet rs, String[] names, SharedSessionContractImplementor session, Object owner)\n            throws HibernateException {\n        try {\n            Object dbResult = rs.getObject(names[0]);\n            if (dbResult != null) {\n</code></pre>\n<p>when using Hibernate 5 to convert JSON to Java JSON object  in UserType class method <code>public Object nullSafeGet(ResultSet rs, String[] names…</code><br />\n-&gt; why is an array of <code>String</code>s <code>names</code> used here when just one name is coming?</p>\n"},{"tags":["java","spring","spring-boot","rest","junit"],"answers":[{"tags":[],"owner":{"account_id":9073858,"reputation":2807,"user_id":6756090,"display_name":"slauth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635425392,"creation_date":1635425392,"answer_id":69754412,"question_id":69754324,"body_markdown":"Two things you could improve:\r\n\r\n 1. Don&#39;t provide a request entity – it is marked as `@Nullable`\r\n 2. Use `Void.class` as return type to express that you don&#39;t expect any response body\r\n\r\n```lang-java\r\nResponseEntity&lt;Void&gt; resp = restTemplate.exchange(url, HttpMethod.DELETE, null, Void.class);\r\n```","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>Two things you could improve:</p>\n<ol>\n<li>Don't provide a request entity – it is marked as <code>@Nullable</code></li>\n<li>Use <code>Void.class</code> as return type to express that you don't expect any response body</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>ResponseEntity&lt;Void&gt; resp = restTemplate.exchange(url, HttpMethod.DELETE, null, Void.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3486535,"reputation":2623,"user_id":2917326,"display_name":"Matt Fowler"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1635426152,"creation_date":1635426152,"answer_id":69754595,"question_id":69754324,"body_markdown":"Instead of passing in `new HttpEntity&lt;&gt;(&quot;&quot;)` `HttpEntity` has a special class variable you can use called `HttpEntity.EMPTY` for these situations. You can also use a return type of void.\r\n\r\n    ResponseEntity&lt;Void&gt; resp = template.exchange(url, HttpMethod.DELETE, HttpEntity.EMPTY, Void.class);\r\n","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>Instead of passing in <code>new HttpEntity&lt;&gt;(&quot;&quot;)</code> <code>HttpEntity</code> has a special class variable you can use called <code>HttpEntity.EMPTY</code> for these situations. You can also use a return type of void.</p>\n<pre><code>ResponseEntity&lt;Void&gt; resp = template.exchange(url, HttpMethod.DELETE, HttpEntity.EMPTY, Void.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1550597,"reputation":8924,"user_id":1443084,"display_name":"Shailendra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635427247,"creation_date":1635426803,"answer_id":69754752,"question_id":69754324,"body_markdown":"Others have given different options but if you want to use the the `delete` method - it internally handles the http error by throwing runtime error as you can see [here][1]. You can check for `HttpClientErrorException` or `HttpServerErrorException` by using [`assertDoesNotThrow`][2] from JUnit5\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blob/5ea1cf532e08dbc9c79670040bb825d69878cf85/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L159\r\n  [2]: https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html#assertDoesNotThrow(org.junit.jupiter.api.function.Executable)","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>Others have given different options but if you want to use the the <code>delete</code> method - it internally handles the http error by throwing runtime error as you can see <a href=\"https://github.com/spring-projects/spring-framework/blob/5ea1cf532e08dbc9c79670040bb825d69878cf85/spring-web/src/main/java/org/springframework/web/client/DefaultResponseErrorHandler.java#L159\" rel=\"nofollow noreferrer\">here</a>. You can check for <code>HttpClientErrorException</code> or <code>HttpServerErrorException</code> by using <a href=\"https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html#assertDoesNotThrow(org.junit.jupiter.api.function.Executable)\" rel=\"nofollow noreferrer\"><code>assertDoesNotThrow</code></a> from JUnit5</p>\n"},{"tags":[],"owner":{"account_id":3692946,"reputation":121,"user_id":3075118,"display_name":"user3075118"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635427760,"creation_date":1635427760,"answer_id":69755012,"question_id":69754324,"body_markdown":"In my opinion RestTemplate.delete method is the one to use, return type is void but status other than 2XX will throw an exception.","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>In my opinion RestTemplate.delete method is the one to use, return type is void but status other than 2XX will throw an exception.</p>\n"},{"tags":[],"owner":{"account_id":3315377,"reputation":475,"user_id":2787886,"accept_rate":0,"display_name":"spyro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694167913,"creation_date":1694167913,"answer_id":77065994,"question_id":69754324,"body_markdown":"If you are using Kotin, feel free to use this extension methods :)\r\n\r\n```kotlin\r\n/**\r\n * Extension for using PUT (not provided by default)\r\n */\r\ninline fun &lt;RQ : Any, reified RP : Any&gt; TestRestTemplate.putForEntity(url: String, payload: RQ): ResponseEntity&lt;RP&gt; =\r\n    this.exchange(url, PUT, HttpEntity(payload))\r\n\r\n/**\r\n * Extension for [TestRestTemplate] DELETE (not provided by default, whyever)\r\n */\r\ninline fun &lt;reified RQ : Any&gt; TestRestTemplate.deleteForEntity(url: String): ResponseEntity&lt;RQ&gt; =\r\n    this.exchange(url, DELETE)\r\n\r\n/**\r\n * Extension for [TestRestTemplate] DELETE with payload (not provided by default, whyever)\r\n */\r\ninline fun &lt;reified RQ : Any, reified RP : Any&gt; TestRestTemplate.deleteForEntity(\r\n    url: String,\r\n    payload: RQ\r\n): ResponseEntity&lt;RP&gt; = this.exchange(url, DELETE, HttpEntity(payload))\r\n```","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>If you are using Kotin, feel free to use this extension methods :)</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>/**\n * Extension for using PUT (not provided by default)\n */\ninline fun &lt;RQ : Any, reified RP : Any&gt; TestRestTemplate.putForEntity(url: String, payload: RQ): ResponseEntity&lt;RP&gt; =\n    this.exchange(url, PUT, HttpEntity(payload))\n\n/**\n * Extension for [TestRestTemplate] DELETE (not provided by default, whyever)\n */\ninline fun &lt;reified RQ : Any&gt; TestRestTemplate.deleteForEntity(url: String): ResponseEntity&lt;RQ&gt; =\n    this.exchange(url, DELETE)\n\n/**\n * Extension for [TestRestTemplate] DELETE with payload (not provided by default, whyever)\n */\ninline fun &lt;reified RQ : Any, reified RP : Any&gt; TestRestTemplate.deleteForEntity(\n    url: String,\n    payload: RQ\n): ResponseEntity&lt;RP&gt; = this.exchange(url, DELETE, HttpEntity(payload))\n</code></pre>\n"}],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2722,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69754595,"answer_count":5,"score":0,"last_activity_date":1694167913,"creation_date":1635424992,"question_id":69754324,"body_markdown":"I&#39;m using `Spring Boot 2.5.6` and `JUnit 4.13.2`. My task is to test the `DELETE` method\r\n\r\nMy REST controller:\r\n```java\r\n@RestController\r\npublic class DomainEndpoint {\r\n\r\n    private final SomeService service;\r\n\r\n    @DeleteMapping(&quot;/domain/{id}&quot;)\r\n    public void delete(@PathVariable long id) {\r\n        service.delete(id);\r\n    }\r\n}\r\n```\r\n\r\nMy test:\r\n```java\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@RunWith(SpringRunner.class)\r\npublic class DomainEndpointTest {\r\n\r\n    @Autowired\r\n    TestRestTemplate template;\r\n\r\n    @MockBean\r\n    SomeService service;\r\n\r\n    @Test\r\n    public void delete() {\r\n        String url = &quot;/domain/123&quot;;\r\n        ResponseEntity&lt;?&gt; resp = template.exchange(url, HttpMethod.DELETE, new HttpEntity&lt;&gt;(&quot;&quot;), String.class);\r\n        assertEquals(HttpStatus.NO_CONTENT, resp.getStatusCode());\r\n    }\r\n}\r\n```\r\n\r\n\r\nAs you can see, the only solution for testing the &#39;DELETE&#39; method, which I found, is:\r\n```java\r\nResponseEntity&lt;?&gt; resp = template.exchange(url, HttpMethod.DELETE, new HttpEntity&lt;&gt;(&quot;&quot;), String.class);\r\n```\r\n\r\nBut params for body `new HttpEntity&lt;&gt;(&quot;&quot;)` and for return type `String.class` seem strange to me. Why should I use them? Can I do the same more straightway without passing unnecessary parameters?  \r\nOn the other hand, `TestRestTemplate template` has a set of short and readable methods `delete()`. The problem with them - they return `void` and I can&#39;t check the response status code in this case.\r\n\r\nThe main question is how to test `DELETE` methods correctly?\r\n","title":"Spring Boot integration test. How to test the &#39;DELETE&#39; method?","body":"<p>I'm using <code>Spring Boot 2.5.6</code> and <code>JUnit 4.13.2</code>. My task is to test the <code>DELETE</code> method</p>\n<p>My REST controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class DomainEndpoint {\n\n    private final SomeService service;\n\n    @DeleteMapping(&quot;/domain/{id}&quot;)\n    public void delete(@PathVariable long id) {\n        service.delete(id);\n    }\n}\n</code></pre>\n<p>My test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@RunWith(SpringRunner.class)\npublic class DomainEndpointTest {\n\n    @Autowired\n    TestRestTemplate template;\n\n    @MockBean\n    SomeService service;\n\n    @Test\n    public void delete() {\n        String url = &quot;/domain/123&quot;;\n        ResponseEntity&lt;?&gt; resp = template.exchange(url, HttpMethod.DELETE, new HttpEntity&lt;&gt;(&quot;&quot;), String.class);\n        assertEquals(HttpStatus.NO_CONTENT, resp.getStatusCode());\n    }\n}\n</code></pre>\n<p>As you can see, the only solution for testing the 'DELETE' method, which I found, is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ResponseEntity&lt;?&gt; resp = template.exchange(url, HttpMethod.DELETE, new HttpEntity&lt;&gt;(&quot;&quot;), String.class);\n</code></pre>\n<p>But params for body <code>new HttpEntity&lt;&gt;(&quot;&quot;)</code> and for return type <code>String.class</code> seem strange to me. Why should I use them? Can I do the same more straightway without passing unnecessary parameters?<br />\nOn the other hand, <code>TestRestTemplate template</code> has a set of short and readable methods <code>delete()</code>. The problem with them - they return <code>void</code> and I can't check the response status code in this case.</p>\n<p>The main question is how to test <code>DELETE</code> methods correctly?</p>\n"},{"tags":["java","spring-boot","interface","microservices","webclient"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693402252,"post_id":76984449,"comment_id":135756063,"body_markdown":"if you also will add `@Componet` is it will work ?","body":"if you also will add <code>@Componet</code> is it will work ?"},{"owner":{"account_id":26672214,"reputation":1,"user_id":20283497,"display_name":"Hiran Sanjeewa"},"score":0,"creation_date":1693550230,"post_id":76984449,"comment_id":135778432,"body_markdown":"I have added but not solved the problem","body":"I have added but not solved the problem"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1693553779,"post_id":76984449,"comment_id":135779064,"body_markdown":"but the class where are you trying to inject it is annotated as a spring bean, i mean `@Service` or any others spring component annotations ?","body":"but the class where are you trying to inject it is annotated as a spring bean, i mean <code>@Service</code> or any others spring component annotations ?"},{"owner":{"account_id":26672214,"reputation":1,"user_id":20283497,"display_name":"Hiran Sanjeewa"},"score":0,"creation_date":1693644353,"post_id":76984449,"comment_id":135790211,"body_markdown":"@Service annotaion","body":"@Service annotaion"}],"owner":{"account_id":26672214,"reputation":1,"user_id":20283497,"display_name":"Hiran Sanjeewa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694167604,"creation_date":1693076810,"question_id":76984449,"body_markdown":"I am trying to access a endpoint from different microservice using HttpExchange once I create a instance from the client interface it&#39;s always returns null value \r\n\r\nmy RegisterServiceClient interface looks like this\r\n```\r\n@HttpExchange   // Declarative client\r\npublic interface RegisterServiceClient {\r\n\r\n//    @PostExchange(&quot;/ecommerce/loginwithusername&quot;)\r\n//    public int ValidateUserWithUsername(@RequestBody String username, String password) throws UnsupportedEncodingException;\r\n\r\n    @PostExchange(&quot;/ecommerce/loginwithemail&quot;)\r\n    public int ValidateUserWithEmail(@RequestBody LoginUser loginUser) throws UnsupportedEncodingException ;\r\n\r\n\r\n    }\r\n```\r\nand my configuration is like this \r\n\r\n```\r\n\r\n\r\n    @Configuration\r\n    public class WebClientConfig {\r\n\r\n        @Autowired\r\n        private LoadBalancedExchangeFilterFunction filterFunction;\r\n\r\n\r\n        @Bean\r\n        public WebClient registerWebClient() {\r\n            return WebClient.builder()\r\n                    .baseUrl(&quot;http://register-service&quot;)\r\n                    .filter(filterFunction)\r\n                    .build();\r\n        }\r\n\r\n        @Bean\r\n        public RegisterServiceClient registerClient() {\r\n            HttpServiceProxyFactory httpServiceProxyFactory\r\n                    = HttpServiceProxyFactory\r\n                    .builder(WebClientAdapter.forClient(registerWebClient()))\r\n                    .build();\r\n            return httpServiceProxyFactory.createClient(RegisterServiceClient.class);\r\n        }\r\n    }\r\n```\r\n    @Autowired\r\n    private RegisterServiceClient registerServiceClient ;\r\n\r\nregisterServiceClient always have null value why ? \r\n ","title":"Cannot create Interface instance in Springboot HttpExchange","body":"<p>I am trying to access a endpoint from different microservice using HttpExchange once I create a instance from the client interface it's always returns null value</p>\n<p>my RegisterServiceClient interface looks like this</p>\n<pre><code>@HttpExchange   // Declarative client\npublic interface RegisterServiceClient {\n\n//    @PostExchange(&quot;/ecommerce/loginwithusername&quot;)\n//    public int ValidateUserWithUsername(@RequestBody String username, String password) throws UnsupportedEncodingException;\n\n    @PostExchange(&quot;/ecommerce/loginwithemail&quot;)\n    public int ValidateUserWithEmail(@RequestBody LoginUser loginUser) throws UnsupportedEncodingException ;\n\n\n    }\n</code></pre>\n<p>and my configuration is like this</p>\n<pre><code>\n\n    @Configuration\n    public class WebClientConfig {\n\n        @Autowired\n        private LoadBalancedExchangeFilterFunction filterFunction;\n\n\n        @Bean\n        public WebClient registerWebClient() {\n            return WebClient.builder()\n                    .baseUrl(&quot;http://register-service&quot;)\n                    .filter(filterFunction)\n                    .build();\n        }\n\n        @Bean\n        public RegisterServiceClient registerClient() {\n            HttpServiceProxyFactory httpServiceProxyFactory\n                    = HttpServiceProxyFactory\n                    .builder(WebClientAdapter.forClient(registerWebClient()))\n                    .build();\n            return httpServiceProxyFactory.createClient(RegisterServiceClient.class);\n        }\n    }\n</code></pre>\n<pre><code>@Autowired\nprivate RegisterServiceClient registerServiceClient ;\n</code></pre>\n<p>registerServiceClient always have null value why ?</p>\n"},{"tags":["java","android","http","httpurlconnection","ui-thread"],"comments":[{"owner":{"account_id":349152,"reputation":2546,"user_id":684273,"accept_rate":68,"display_name":"Warlock"},"score":0,"creation_date":1693427009,"post_id":77011048,"comment_id":135761327,"body_markdown":"I have no clue, why it is waiting for 30 seconds. Maybe this article will be some hint for you - https://medium.com/@yossisegev/understanding-activity-runonuithread-e102d388fe93. Also you can run in many problems with configuration change, memory leaks etc. if you will be using this code in Activity / Fragment alone. You should you for example ViewModel pattern with some business logic inside some &quot;Use Case&quot; or &quot;Repository&quot; pattern which will be calling your server. More work but it will pay off. See for example this https://developer.android.com/topic/libraries/architecture/viewmodel","body":"I have no clue, why it is waiting for 30 seconds. Maybe this article will be some hint for you - <a href=\"https://medium.com/@yossisegev/understanding-activity-runonuithread-e102d388fe93\" rel=\"nofollow noreferrer\">medium.com/@yossisegev/&hellip;</a>. Also you can run in many problems with configuration change, memory leaks etc. if you will be using this code in Activity / Fragment alone. You should you for example ViewModel pattern with some business logic inside some &quot;Use Case&quot; or &quot;Repository&quot; pattern which will be calling your server. More work but it will pay off. See for example this <a href=\"https://developer.android.com/topic/libraries/architecture/viewmodel\" rel=\"nofollow noreferrer\">developer.android.com/topic/libraries/architecture/viewmodel</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1693495958,"post_id":77011048,"comment_id":135771729,"body_markdown":"So your whole story with a sleep of five seconds becoming thirty is fake.","body":"So your whole story with a sleep of five seconds becoming thirty is fake."},{"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"score":0,"creation_date":1693497420,"post_id":77011048,"comment_id":135772076,"body_markdown":"not at all. The trigger for UI waiting 30 seconds is when there is a getResponseCode() running. Never seen anything like that. To note that our code runs fine since years, and it only shows this behaviour when we upgraded to tragetsdk33","body":"not at all. The trigger for UI waiting 30 seconds is when there is a getResponseCode() running. Never seen anything like that. To note that our code runs fine since years, and it only shows this behaviour when we upgraded to tragetsdk33"},{"owner":{"account_id":20517189,"reputation":1752,"user_id":15057576,"display_name":"聂超群"},"score":0,"creation_date":1693530012,"post_id":77011048,"comment_id":135776805,"body_markdown":"So `Thread.sleep(5000)` is actually `getResponseCode()` which took 30 seconds?","body":"So <code>Thread.sleep(5000)</code> is actually <code>getResponseCode()</code> which took 30 seconds?"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1693559061,"post_id":77011048,"comment_id":135780036,"body_markdown":"I don&#39;t have a specific theory on why this happens, but could you add a debug output *after* the `runOnUiThread` call to see how long that call itself lasts (it should be very short).","body":"I don&#39;t have a specific theory on why this happens, but could you add a debug output <i>after</i> the <code>runOnUiThread</code> call to see how long that call itself lasts (it should be very short)."},{"owner":{"account_id":7773500,"reputation":5844,"user_id":5882307,"display_name":"OMi Shah"},"score":0,"creation_date":1693629480,"post_id":77011048,"comment_id":135789198,"body_markdown":"If I am not wrong, doesn&#39;t https://cnn.com website has too much content to load if you notice, so definitely it&#39;ll take some time to process the request while SO website loads less resources. Also, your internet speed matters.","body":"If I am not wrong, doesn&#39;t <a href=\"https://cnn.com\" rel=\"nofollow noreferrer\">cnn.com</a> website has too much content to load if you notice, so definitely it&#39;ll take some time to process the request while SO website loads less resources. Also, your internet speed matters."}],"answers":[{"tags":[],"owner":{"account_id":20517189,"reputation":1752,"user_id":15057576,"display_name":"聂超群"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693444615,"creation_date":1693444615,"answer_id":77012331,"question_id":77011048,"body_markdown":"`runOnUiThread` post a message to your main `Looper`&#39;s `MessageQueue`, whose message is handled one by one.\r\n\r\nSo it&#39;s possible that `MessageQueue` is full of other message which took long time to process, which will result in long delay before your `Runnable` executed.\r\n\r\nYou can verify this by replace `runOnUiThread` with below code:\r\n\r\n```\r\n// this will insert your Runnable at the front of MessageQueue\r\nnew Handler(Looper.getMainLooper()).postAtFrontOfQueue(() -&gt; {\r\n    long delta = new Date().getTime() - start;\r\n    Log.e(&quot;TESTUI2&quot;, &quot;&quot; + delta);\r\n});\r\n```\r\n","title":"runOnUiThread executes after waiting 30 seconds","body":"<p><code>runOnUiThread</code> post a message to your main <code>Looper</code>'s <code>MessageQueue</code>, whose message is handled one by one.</p>\n<p>So it's possible that <code>MessageQueue</code> is full of other message which took long time to process, which will result in long delay before your <code>Runnable</code> executed.</p>\n<p>You can verify this by replace <code>runOnUiThread</code> with below code:</p>\n<pre><code>// this will insert your Runnable at the front of MessageQueue\nnew Handler(Looper.getMainLooper()).postAtFrontOfQueue(() -&gt; {\n    long delta = new Date().getTime() - start;\n    Log.e(&quot;TESTUI2&quot;, &quot;&quot; + delta);\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693913222,"creation_date":1693913222,"answer_id":77044108,"question_id":77011048,"body_markdown":"One the weirdest things ever seen in 30 years of software development. The cause of the problem was using elsewhere the deprecated GoogleApiClient for accessing location. This triggered a 30 seconds wait time whenever a server request was sent, but only for some servers. Migrated to FusedLocation and problem disappeared","title":"runOnUiThread executes after waiting 30 seconds","body":"<p>One the weirdest things ever seen in 30 years of software development. The cause of the problem was using elsewhere the deprecated GoogleApiClient for accessing location. This triggered a 30 seconds wait time whenever a server request was sent, but only for some servers. Migrated to FusedLocation and problem disappeared</p>\n"},{"tags":[],"owner":{"account_id":28127491,"reputation":1,"user_id":21492598,"display_name":"Aniket Tripathi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694167090,"creation_date":1694167090,"answer_id":77065920,"question_id":77011048,"body_markdown":"The behavior you&#39;re observing, where runOnUiThread sometimes takes a long time to execute after server data retrieval, can be attributed to a combination of factors including network latency, thread management, and the Android UI system. Let&#39;s break down your observations and try to understand what&#39;s happening:\r\n\r\nNetwork Latency: When you make a network request, such as fetching data from a server, the time it takes to complete the request can vary depending on the server&#39;s response time, network conditions, and other factors. In your case, when you access &quot;https://cnn.com,&quot; it appears to take longer to complete the request compared to &quot;https://stackoverflow.com.&quot; This difference in network latency can influence the overall timing of your code.\r\n\r\nThread Execution: You&#39;re starting a new thread in onResume to perform the network request and then update the UI using runOnUiThread. The timing of when the UI thread executes your code depends on the Android system&#39;s thread scheduling and how busy the system is with other tasks.\r\n\r\nUI Thread Execution: The runOnUiThread method is used to post a Runnable to the UI thread&#39;s message queue, which will be executed when the UI thread becomes available. The UI thread might be busy with other tasks, and there can be a delay in executing your Runnable if there&#39;s a backlog of UI events.\r\n\r\nGiven these factors, here&#39;s what&#39;s happening in your two scenarios:\r\n\r\nWith &quot;https://cnn.com,&quot; the network request takes longer to complete, and by the time the response is received, the UI thread might have other tasks to handle. This can introduce a delay in executing your runOnUiThread code.\r\n\r\nWith &quot;https://stackoverflow.com,&quot; the network request is faster, so the UI thread is more likely to be available when the response is received, resulting in a shorter delay before executing your runOnUiThread code.\r\n\r\nIn your log output, you can see the difference in timing between when the network request completes (TESTUI_2) and when the UI code executes (TESTUI_3). The delay is longer in the &quot;cnn.com&quot; case due to the longer network request time.\r\n\r\nTo mitigate this issue and ensure more predictable UI updates, you can consider the following:\r\n\r\nUse AsyncTask or other Android-specific mechanisms for background tasks and UI updates. AsyncTask simplifies the process of running background tasks and updating the UI when they are completed.\r\n\r\nConsider implementing error handling and timeout mechanisms for network requests to prevent long delays in case of slow or failed requests.\r\n\r\nProfile your app&#39;s performance to identify and address any other bottlenecks that might be causing delays in UI thread execution.\r\n\r\nCheck for exceptions or errors in the network request that could potentially block the UI thread. Logging error messages and handling exceptions appropriately can help in diagnosing issues.\r\n\r\nIn summary, the observed behavior is likely due to a combination of network latency and thread management. To ensure more consistent and responsive UI updates, consider using Android&#39;s built-in concurrency mechanisms and optimizing your network request handling.\r\n\r\n\r\n\r\n\r\nWas this response better or worse?","title":"runOnUiThread executes after waiting 30 seconds","body":"<p>The behavior you're observing, where runOnUiThread sometimes takes a long time to execute after server data retrieval, can be attributed to a combination of factors including network latency, thread management, and the Android UI system. Let's break down your observations and try to understand what's happening:</p>\n<p>Network Latency: When you make a network request, such as fetching data from a server, the time it takes to complete the request can vary depending on the server's response time, network conditions, and other factors. In your case, when you access &quot;https://cnn.com,&quot; it appears to take longer to complete the request compared to &quot;https://stackoverflow.com.&quot; This difference in network latency can influence the overall timing of your code.</p>\n<p>Thread Execution: You're starting a new thread in onResume to perform the network request and then update the UI using runOnUiThread. The timing of when the UI thread executes your code depends on the Android system's thread scheduling and how busy the system is with other tasks.</p>\n<p>UI Thread Execution: The runOnUiThread method is used to post a Runnable to the UI thread's message queue, which will be executed when the UI thread becomes available. The UI thread might be busy with other tasks, and there can be a delay in executing your Runnable if there's a backlog of UI events.</p>\n<p>Given these factors, here's what's happening in your two scenarios:</p>\n<p>With &quot;https://cnn.com,&quot; the network request takes longer to complete, and by the time the response is received, the UI thread might have other tasks to handle. This can introduce a delay in executing your runOnUiThread code.</p>\n<p>With &quot;https://stackoverflow.com,&quot; the network request is faster, so the UI thread is more likely to be available when the response is received, resulting in a shorter delay before executing your runOnUiThread code.</p>\n<p>In your log output, you can see the difference in timing between when the network request completes (TESTUI_2) and when the UI code executes (TESTUI_3). The delay is longer in the &quot;cnn.com&quot; case due to the longer network request time.</p>\n<p>To mitigate this issue and ensure more predictable UI updates, you can consider the following:</p>\n<p>Use AsyncTask or other Android-specific mechanisms for background tasks and UI updates. AsyncTask simplifies the process of running background tasks and updating the UI when they are completed.</p>\n<p>Consider implementing error handling and timeout mechanisms for network requests to prevent long delays in case of slow or failed requests.</p>\n<p>Profile your app's performance to identify and address any other bottlenecks that might be causing delays in UI thread execution.</p>\n<p>Check for exceptions or errors in the network request that could potentially block the UI thread. Logging error messages and handling exceptions appropriately can help in diagnosing issues.</p>\n<p>In summary, the observed behavior is likely due to a combination of network latency and thread management. To ensure more consistent and responsive UI updates, consider using Android's built-in concurrency mechanisms and optimizing your network request handling.</p>\n<p>Was this response better or worse?</p>\n"}],"owner":{"account_id":1124720,"reputation":1027,"user_id":1112269,"accept_rate":50,"display_name":"michaelsmith"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":169,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1694167090,"creation_date":1693424054,"question_id":77011048,"body_markdown":"I came across an extremely weird behaviour related to code execution on UI thread after server data retrieval.\r\n\r\nIn onResume, I start a Thread where I wait for some server data fetch to complete and then run ui updates. \r\n\r\nBut the problem is that `runOnUiThread` command more often than not only starts executing after a delay of 30 seconds. It happens with some servers, but not with others, as per example below.\r\n\r\nHere&#39;s the full code in onResume:\r\n\r\n     @Override\r\n    public void onResume() {\r\n\r\n        super.onResume();\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    Log.e(&quot;TESTUI_1&quot;, &quot;&quot;);\r\n\r\n                    String urlname = &quot;https://stackoverflow.com&quot;;//runonuithread starts immediately\r\n                    //String urlname = &quot;https://cnn.com&quot;;//runonuithread waits 30 seconds\r\n                    URL url = new URL(urlname);\r\n                    Log.e(&quot;TESTUI_1&quot;, urlname);\r\n                    HttpURLConnection connectionCache = (HttpURLConnection) url.openConnection();\r\n                    connectionCache.setDoOutput(true);\r\n\r\n                    connectionCache.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);//MAn680\r\n                    connectionCache.setRequestMethod(&quot;POST&quot;);//MAn680\r\n                    connectionCache.setRequestProperty(&quot;Connection&quot;, &quot;close&quot;);//MAn1140\r\n                    connectionCache.setConnectTimeout(10000);\r\n                    connectionCache.setReadTimeout(10000);\r\n                    connectionCache.setDoInput(true);//3.9.13\r\n                    connectionCache.setUseCaches(false); //3.9.13\r\n\r\n                    int status = connectionCache.getResponseCode();//3.9.12\r\n                    Log.e(&quot;TESTUI_status&quot;, &quot;&quot;+status);\r\n                    InputStream is;\r\n\r\n                    if (status &gt;= 400) {\r\n                        is = connectionCache.getErrorStream();\r\n                    } else {\r\n                        is = connectionCache.getInputStream();\r\n                    }\r\n                } catch (Exception e) {\r\n                    Log.e(&quot;TESTUI_error&quot;, e.getLocalizedMessage());\r\n                }\r\n                long when = new Date().getTime();\r\n                Log.e(&quot;TESTUI_2&quot;, &quot;&quot;+when);\r\n                runOnUiThread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        long delta = new Date().getTime() - when;\r\n                        Log.e(&quot;TESTUI_3&quot;, &quot;&quot;+delta);\r\n                    }\r\n                });\r\n            }\r\n        }).start();\r\n\r\n\r\n    }\r\n\r\nLogcat output with cnn.com:\r\n\r\n&gt; TESTUI_1                  E  \r\nTESTUI_1                  E  https://cnn.com    \r\nTESTUI_status             E  200   \r\nTESTUI_2                  E  1693556722917   \r\nTESTUI_3                  E  29643\r\n\r\nLogcat output with stackoverflow.com:\r\n\r\n&gt; TESTUI_1                  E    \r\nTESTUI_1                  E  https://stackoverflow.com   \r\nTESTUI_status             E  200   \r\nTESTUI_2                  E  1693556962546   \r\nTESTUI_3                  E  230   \r\n\r\nIs there anything in the Logcat that I could search for?\r\n\r\n","title":"runOnUiThread executes after waiting 30 seconds","body":"<p>I came across an extremely weird behaviour related to code execution on UI thread after server data retrieval.</p>\n<p>In onResume, I start a Thread where I wait for some server data fetch to complete and then run ui updates.</p>\n<p>But the problem is that <code>runOnUiThread</code> command more often than not only starts executing after a delay of 30 seconds. It happens with some servers, but not with others, as per example below.</p>\n<p>Here's the full code in onResume:</p>\n<pre><code> @Override\npublic void onResume() {\n\n    super.onResume();\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n            try {\n                Log.e(&quot;TESTUI_1&quot;, &quot;&quot;);\n\n                String urlname = &quot;https://stackoverflow.com&quot;;//runonuithread starts immediately\n                //String urlname = &quot;https://cnn.com&quot;;//runonuithread waits 30 seconds\n                URL url = new URL(urlname);\n                Log.e(&quot;TESTUI_1&quot;, urlname);\n                HttpURLConnection connectionCache = (HttpURLConnection) url.openConnection();\n                connectionCache.setDoOutput(true);\n\n                connectionCache.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);//MAn680\n                connectionCache.setRequestMethod(&quot;POST&quot;);//MAn680\n                connectionCache.setRequestProperty(&quot;Connection&quot;, &quot;close&quot;);//MAn1140\n                connectionCache.setConnectTimeout(10000);\n                connectionCache.setReadTimeout(10000);\n                connectionCache.setDoInput(true);//3.9.13\n                connectionCache.setUseCaches(false); //3.9.13\n\n                int status = connectionCache.getResponseCode();//3.9.12\n                Log.e(&quot;TESTUI_status&quot;, &quot;&quot;+status);\n                InputStream is;\n\n                if (status &gt;= 400) {\n                    is = connectionCache.getErrorStream();\n                } else {\n                    is = connectionCache.getInputStream();\n                }\n            } catch (Exception e) {\n                Log.e(&quot;TESTUI_error&quot;, e.getLocalizedMessage());\n            }\n            long when = new Date().getTime();\n            Log.e(&quot;TESTUI_2&quot;, &quot;&quot;+when);\n            runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    long delta = new Date().getTime() - when;\n                    Log.e(&quot;TESTUI_3&quot;, &quot;&quot;+delta);\n                }\n            });\n        }\n    }).start();\n\n\n}\n</code></pre>\n<p>Logcat output with cnn.com:</p>\n<blockquote>\n<p>TESTUI_1                  E<br />\nTESTUI_1                  E  <a href=\"https://cnn.com\" rel=\"nofollow noreferrer\">https://cnn.com</a><br />\nTESTUI_status             E  200<br />\nTESTUI_2                  E  1693556722917<br />\nTESTUI_3                  E  29643</p>\n</blockquote>\n<p>Logcat output with stackoverflow.com:</p>\n<blockquote>\n<p>TESTUI_1                  E<br />\nTESTUI_1                  E  <a href=\"https://stackoverflow.com\">https://stackoverflow.com</a><br />\nTESTUI_status             E  200<br />\nTESTUI_2                  E  1693556962546<br />\nTESTUI_3                  E  230</p>\n</blockquote>\n<p>Is there anything in the Logcat that I could search for?</p>\n"},{"tags":["java","android","websocket","retrofit","retrofit2"],"comments":[{"owner":{"account_id":1093315,"reputation":2714,"user_id":1087449,"accept_rate":29,"display_name":"giorgos.nl"},"score":0,"creation_date":1472824283,"post_id":38855677,"comment_id":65921838,"body_markdown":"I think it does not support web sockets yet since it&#39;s not being mentioned in its changelog: https://github.com/square/retrofit/blob/master/CHANGELOG.md\n\nHopefully on 2.2.","body":"I think it does not support web sockets yet since it&#39;s not being mentioned in its changelog: <a href=\"https://github.com/square/retrofit/blob/master/CHANGELOG.md\" rel=\"nofollow noreferrer\">github.com/square/retrofit/blob/master/CHANGELOG.md</a>  Hopefully on 2.2."},{"owner":{"account_id":1715220,"reputation":411,"user_id":1572449,"display_name":"theshadowchild"},"score":2,"creation_date":1508276699,"post_id":38855677,"comment_id":80546289,"body_markdown":"OkHttp supports WebSockets now. Check out this simple tutorial https://medium.com/@ssaurel/learn-to-use-websockets-on-android-with-okhttp-ba5f00aea988","body":"OkHttp supports WebSockets now. Check out this simple tutorial <a href=\"https://medium.com/@ssaurel/learn-to-use-websockets-on-android-with-okhttp-ba5f00aea988\" rel=\"nofollow noreferrer\">medium.com/@ssaurel/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":15427899,"reputation":122,"user_id":11130128,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694166944,"creation_date":1694166944,"answer_id":77065898,"question_id":38855677,"body_markdown":"Retrofit is built on top of OkHttp, and OkHttp supports WebSockets starting from the version 3.5, [more on this here][1].\r\n\r\nFor an example, you can see the following answer on [StackOverflow][2].\r\n\r\n\r\n  [1]: https://square.github.io/okhttp/changelogs/changelog_3x/#version-350\r\n  [2]: https://stackoverflow.com/questions/39416209/how-to-create-simple-okhttp3-websocket-connection","title":"Does Retrofit support websocket by now?","body":"<p>Retrofit is built on top of OkHttp, and OkHttp supports WebSockets starting from the version 3.5, <a href=\"https://square.github.io/okhttp/changelogs/changelog_3x/#version-350\" rel=\"nofollow noreferrer\">more on this here</a>.</p>\n<p>For an example, you can see the following answer on <a href=\"https://stackoverflow.com/questions/39416209/how-to-create-simple-okhttp3-websocket-connection\">StackOverflow</a>.</p>\n"}],"owner":{"account_id":8721368,"reputation":428,"user_id":6524422,"accept_rate":80,"display_name":"Daniil Orekhov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7480,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"answer_count":1,"score":8,"last_activity_date":1694166944,"creation_date":1470758942,"question_id":38855677,"body_markdown":"I know that it was a work in progress and it was supposed to become a thing in version 2.1, which is the latest version. \r\n\r\nSo, is it a thing ready now? Couldn&#39;t find any info on that topic.\r\n\r\nAnd if it is a thing already, how would use I it?","title":"Does Retrofit support websocket by now?","body":"<p>I know that it was a work in progress and it was supposed to become a thing in version 2.1, which is the latest version. </p>\n\n<p>So, is it a thing ready now? Couldn't find any info on that topic.</p>\n\n<p>And if it is a thing already, how would use I it?</p>\n"},{"tags":["java","swagger","swagger-ui","openapi"],"answers":[{"tags":[],"owner":{"account_id":4896814,"reputation":1591,"user_id":3946165,"display_name":"mcarlin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606761899,"creation_date":1606741066,"answer_id":65074042,"question_id":64677613,"body_markdown":"If I&#39;m understanding you correctly, to indicate that the `&quot;sort&quot;` parameter is a list, you need to use the parameters `array` like the following: \r\n\r\n`schema = @Schema(implementation = String.class, type = &quot;query&quot;`\r\n\r\nshould be changed to\r\n\r\n`array = @ArraySchema(implementation = String.class)`\r\n\r\n","title":"How to specify a list using OpenAPI 3 Swagger annotations","body":"<p>If I'm understanding you correctly, to indicate that the <code>&quot;sort&quot;</code> parameter is a list, you need to use the parameters <code>array</code> like the following:</p>\n<p><code>schema = @Schema(implementation = String.class, type = &quot;query&quot;</code></p>\n<p>should be changed to</p>\n<p><code>array = @ArraySchema(implementation = String.class)</code></p>\n"},{"tags":[],"owner":{"account_id":14657127,"reputation":1,"user_id":10585391,"display_name":"Brian Boothe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694166548,"creation_date":1692351736,"answer_id":76928166,"question_id":64677613,"body_markdown":"You should use this:\r\n```java\r\narray = @ArraySchema(schema = @Schema(implementation = String.class))\r\n```","title":"How to specify a list using OpenAPI 3 Swagger annotations","body":"<p>You should use this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>array = @ArraySchema(schema = @Schema(implementation = String.class))\n</code></pre>\n"}],"owner":{"account_id":9706906,"reputation":3705,"user_id":7200088,"accept_rate":100,"display_name":"Michael Dz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5305,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694166548,"creation_date":1604483141,"question_id":64677613,"body_markdown":"For my API I&#39;m making a meta annotation for handling `Pagable` parameters and for it I need to annotate a list of strings as a parameter that will show up in Swagger UI. \r\n\r\n    import io.swagger.v3.oas.annotations.Parameter;\r\n    \r\n    @Parameter(name = &quot;sort&quot;, in = ParameterIn.QUERY, schema = @Schema(implementation = String.class, type = &quot;query&quot;))\r\n    public @interface PageableQueryParameters {}\r\n\r\nIn order to sort by multiple criteria in Spring&#39;s `Pageable` the sort parameter needs to be provided as a list of strings. Unfortunately I don&#39;t know how to declare the sort parameter as a list. \r\n\r\nHow can I document a list of strings using Swagger&#39;s OpenAPI 3 annotations?","title":"How to specify a list using OpenAPI 3 Swagger annotations","body":"<p>For my API I'm making a meta annotation for handling <code>Pagable</code> parameters and for it I need to annotate a list of strings as a parameter that will show up in Swagger UI.</p>\n<pre><code>import io.swagger.v3.oas.annotations.Parameter;\n\n@Parameter(name = &quot;sort&quot;, in = ParameterIn.QUERY, schema = @Schema(implementation = String.class, type = &quot;query&quot;))\npublic @interface PageableQueryParameters {}\n</code></pre>\n<p>In order to sort by multiple criteria in Spring's <code>Pageable</code> the sort parameter needs to be provided as a list of strings. Unfortunately I don't know how to declare the sort parameter as a list.</p>\n<p>How can I document a list of strings using Swagger's OpenAPI 3 annotations?</p>\n"},{"tags":["java","intellij-idea","path"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":1,"creation_date":1694071655,"post_id":77053703,"comment_id":135843570,"body_markdown":"Despite -Djava.library.path is not listed in VM options autocompletion popup it still should work. Try to click on `Modify Options -&gt; Add VM Options` and add `-Djava.library.path=some_path`","body":"Despite -Djava.library.path is not listed in VM options autocompletion popup it still should work. Try to click on <code>Modify Options -&gt; Add VM Options</code> and add <code>-Djava.library.path=some_path</code>"},{"owner":{"account_id":438122,"reputation":6172,"user_id":826203,"accept_rate":89,"display_name":"athos"},"score":0,"creation_date":1694166485,"post_id":77053703,"comment_id":135858744,"body_markdown":"@EgorKlepikov thank you! you are right, -Djava.library.path=some_path can be added into the VM options","body":"@EgorKlepikov thank you! you are right, -Djava.library.path=some_path can be added into the VM options"}],"owner":{"account_id":438122,"reputation":6172,"user_id":826203,"accept_rate":89,"display_name":"athos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694166464,"creation_date":1694017032,"question_id":77053703,"body_markdown":"I&#39;m using IntelliJ IDEA 2023.1.2 (Community Edition), developing some Maven testcases, calling C++ library via JNI.\r\n\r\nNow I hit a problem that IntelliJ always look for the JNI.dll in ReleaseMD folder.\r\nWith `System.out.println(System.getProperty(&quot;java.library.path&quot;));`\r\nI can see it point to    `C:\\myCode\\JavaTestPrj/../CppLibPrj/x64/ReleaseMD`.\r\n\r\nHow can I force it to be `C:\\myCode\\JavaTestPrj/../CppLibPrj/x64/DebugMDd`?\r\n\r\nFrom menu Run -&gt; Edit configurations, I can see current settings are:\r\n\r\n     Working Directory: $MODULE_WORKING_DIR$\r\n     Environment Variable: path=C:/myCode/CppLibPrj/x64/DebugMDd\r\n\r\n, these seem correct.\r\n\r\nIf I click &quot;Modify Options -&gt; Add VM Options&quot; as this answer https://stackoverflow.com/a/76475062/826203 suggested, \r\nthere are only predefined options such as `-ea`\r\n","title":"how to config intellij 2023.1 java.system.path","body":"<p>I'm using IntelliJ IDEA 2023.1.2 (Community Edition), developing some Maven testcases, calling C++ library via JNI.</p>\n<p>Now I hit a problem that IntelliJ always look for the JNI.dll in ReleaseMD folder.\nWith <code>System.out.println(System.getProperty(&quot;java.library.path&quot;));</code>\nI can see it point to    <code>C:\\myCode\\JavaTestPrj/../CppLibPrj/x64/ReleaseMD</code>.</p>\n<p>How can I force it to be <code>C:\\myCode\\JavaTestPrj/../CppLibPrj/x64/DebugMDd</code>?</p>\n<p>From menu Run -&gt; Edit configurations, I can see current settings are:</p>\n<pre><code> Working Directory: $MODULE_WORKING_DIR$\n Environment Variable: path=C:/myCode/CppLibPrj/x64/DebugMDd\n</code></pre>\n<p>, these seem correct.</p>\n<p>If I click &quot;Modify Options -&gt; Add VM Options&quot; as this answer <a href=\"https://stackoverflow.com/a/76475062/826203\">https://stackoverflow.com/a/76475062/826203</a> suggested,\nthere are only predefined options such as <code>-ea</code></p>\n"},{"tags":["java","android","arraylist"],"comments":[{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":0,"creation_date":1694019437,"post_id":77053865,"comment_id":135837393,"body_markdown":"I dont see in your start button handler any code which would remove the previous views, so it looks like you add new ones after the previous ones.","body":"I dont see in your start button handler any code which would remove the previous views, so it looks like you add new ones after the previous ones."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1694032207,"post_id":77053865,"comment_id":135839677,"body_markdown":"Vague title. Rewrite to summarize your specific technical issue.","body":"Vague title. Rewrite to summarize your specific technical issue."},{"owner":{"account_id":21272415,"reputation":1,"user_id":20266598,"display_name":"Jonasoos"},"score":0,"creation_date":1694165887,"post_id":77053865,"comment_id":135858619,"body_markdown":"@marcinj does that mean that a new grid is getting added everytime i press start? That means that i need to delete all buttons first hand, and then call the code in start.setonclicklistener.","body":"@marcinj does that mean that a new grid is getting added everytime i press start? That means that i need to delete all buttons first hand, and then call the code in start.setonclicklistener."},{"owner":{"account_id":21272415,"reputation":1,"user_id":20266598,"display_name":"Jonasoos"},"score":0,"creation_date":1694166909,"post_id":77053865,"comment_id":135858825,"body_markdown":"tried using buttons.clear(), but it is still not working. The error says the error is now in the setupGame() method. -Out of bounds-","body":"tried using buttons.clear(), but it is still not working. The error says the error is now in the setupGame() method. -Out of bounds-"},{"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"score":0,"creation_date":1694167806,"post_id":77053865,"comment_id":135858996,"body_markdown":"You should also clear your layout, see here: https://stackoverflow.com/questions/14750643/delete-objects-in-gridlayout-before-adding-new-objects","body":"You should also clear your layout, see here: <a href=\"https://stackoverflow.com/questions/14750643/delete-objects-in-gridlayout-before-adding-new-objects\" title=\"delete objects in gridlayout before adding new objects\">stackoverflow.com/questions/14750643/&hellip;</a>"}],"owner":{"account_id":21272415,"reputation":1,"user_id":20266598,"display_name":"Jonasoos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694165945,"creation_date":1694018511,"question_id":77053865,"body_markdown":"The code is a mine game where there is a minefield made up out of buttons. The size and height of the minefield is set as 4 `gridsize` and 8 `gridHeight`.\r\nThe first-time initilisation works - the 4 x 8 field out of buttons pops up. But after the first game, when changing the SeekBar `minesSeekBar` the Field gets bigger by one row although `gridHeight` is not changed.\r\n[how  it looks on the first game][1], [how it looks after the first game][2]\r\n\r\nI do not quite understand how there is a  row added when `gridHeight` is never changed. I suspected that the error might be in the `start.setOnClickListener(){}` but i could not fix it as the code makes sense (to me). Everytime the field gets redone everytime you press start so it should theoratically be always the same.\r\ni do not think the error is in `setupGame()` as the gridsize is not changed in the method.\r\n\r\n  [1]: https://i.stack.imgur.com/2mm7U.png\r\n  [2]: https://i.stack.imgur.com/DBK5q.png\r\nHere is the xml: \r\n\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/menu1&quot;\r\n        android:layout_width=&quot;55dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentTop=&quot;true&quot;\r\n        android:layout_marginStart=&quot;340dp&quot;\r\n        android:layout_marginTop=&quot;10dp&quot;\r\n        android:background=&quot;@drawable/baseline_menu_24&quot;\r\n        app:cornerRadius=&quot;15dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.0&quot; /&gt;\r\n\r\n    &lt;Button\r\n        android:id=&quot;@+id/start&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;START&quot;\r\n        android:layout_marginTop=&quot;5dp&quot;\r\n        android:layout_marginStart=&quot;0dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.498&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.005&quot;\r\n        tools:ignore=&quot;MissingConstraints&quot; /&gt;\r\n\r\n    &lt;EditText\r\n        android:layout_marginStart=&quot;10dp&quot;\r\n        android:id=&quot;@+id/einsatz&quot;\r\n        android:layout_marginTop=&quot;10dp&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:hint=&quot;Einsatz&quot;\r\n        android:inputType=&quot;number&quot;\r\n        android:textColor=&quot;@color/black&quot;\r\n        android:textColorHighlight=&quot;@color/white&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n\r\n    &lt;SeekBar\r\n        android:id=&quot;@+id/sizeSeekBar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:max=&quot;8&quot;\r\n        android:progress=&quot;2&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/gridlayout&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        tools:layout_editor_absoluteX=&quot;10dp&quot;\r\n    android:visibility=&quot;gone&quot;/&gt; \r\n\r\n    &lt;SeekBar\r\n        android:id=&quot;@+id/minesSeekBar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:max=&quot;16&quot;\r\n        android:progress=&quot;2&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@+id/gridlayout&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/start&quot;\r\n        tools:layout_editor_absoluteX=&quot;10dp&quot; /&gt;\r\n\r\n    &lt;GridLayout\r\n        android:id=&quot;@+id/gridlayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;400dp&quot;\r\n        android:layout_marginBottom=&quot;52dp&quot;\r\n        android:layout_weight=&quot;1&quot;\r\n        android:background=&quot;@drawable/custom_edittext&quot;\r\n        android:columnCount=&quot;4&quot;\r\n        android:rowCount=&quot;4&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        tools:layout_editor_absoluteX=&quot;9dp&quot; /&gt;\r\n\r\n\r\nHere the code: \r\n\r\npublic class Minen extends AppCompatActivity {\r\n\r\n    private int gridSize = 4; // Default grid size\r\n    private int gridHeight = 8; // Default grid height\r\n    private int numMines = 2; // Default number of mines\r\n    private ArrayList&lt;ArrayList&lt;Button&gt;&gt; buttons;\r\n    private ArrayList&lt;ArrayList&lt;Boolean&gt;&gt; minePositions;\r\n    private boolean gameLost = false;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_minefield);\r\n        getSupportActionBar().hide();\r\n        Button menu = findViewById(R.id.menu1);\r\n        GridLayout gridLayout = findViewById(R.id.gridlayout);\r\n        SeekBar heightSeekBar = findViewById(R.id.sizeSeekBar);\r\n        SeekBar minesSeekBar = findViewById(R.id.minesSeekBar);\r\n        Button start = findViewById(R.id.start);\r\n        // Set up the height seek bar listener\r\n        heightSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n            @Override\r\n            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n               int x = progress + 1; // Adjust for a range of 2 to 10\r\n                setupGame();\r\n            }\r\n            @Override\r\n            public void onStartTrackingTouch(SeekBar seekBar) {}\r\n            @Override\r\n            public void onStopTrackingTouch(SeekBar seekBar) {\r\n            }\r\n        });\r\n        minesSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\r\n            @Override\r\n            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\r\n                numMines = progress;\r\n                setupGame();\r\n            }\r\n            @Override\r\n            public void onStartTrackingTouch(SeekBar seekBar) {}\r\n            @Override\r\n            public void onStopTrackingTouch(SeekBar seekBar) {}\r\n        });\r\n\r\n        // Initialize the ArrayLists for buttons and mine positions\r\n        buttons = new ArrayList&lt;&gt;();\r\n        minePositions = new ArrayList&lt;&gt;();\r\n\r\n        start.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (getEinsatzFromEditText() &gt; 0) {\r\n                    kontostandpositiv(getEinsatzFromEditText(), new Callback() {\r\n                        @Override\r\n                        public void Callbackchecked(boolean kontostandPositiv) {\r\n                            if (kontostandPositiv) {\r\n                                kontostandandernminus(getEinsatzFromEditText());\r\n                                for (int i = 0; i &lt; gridSize; i++) {\r\n                                    ArrayList&lt;Button&gt; rowButtons = new ArrayList&lt;&gt;();\r\n                                    ArrayList&lt;Boolean&gt; rowMinePositions = new ArrayList&lt;&gt;();\r\n                                    for (int j = 0; j &lt; gridHeight; j++) {\r\n                                        Button button = new Button(getApplicationContext());\r\n                                        int finalI = i;\r\n                                        int finalJ = j;\r\n                                        button.setOnClickListener(new View.OnClickListener() {\r\n                                            @Override\r\n                                            public void onClick(View v) {\r\n                                                if (!gameLost) {\r\n                                                    if (minePositions.get(finalI).get(finalJ)) {\r\n                                                        gameLost = true;\r\n                                                        showGameOver();\r\n                                                    } else {\r\n                                                        button.setEnabled(false);\r\n                                                        calcwin();\r\n                                                        checkForWin();\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                        rowButtons.add(button);\r\n                                        rowMinePositions.add(false);\r\n                                        gridLayout.addView(button);\r\n                                    }\r\n                                    buttons.add(rowButtons);\r\n                                    minePositions.add(rowMinePositions);\r\n                                }\r\n\r\n                                setupGame();\r\n                            } else {\r\n                                Toast.makeText(Minen.this, &quot;Nicht ausreichendes Guthaben&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    });\r\n                } else {\r\n                    Toast.makeText(Minen.this, &quot;Einsatz setzen&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\nand there the relevant methods: \r\nSetupGame: \r\n\r\n    private void setupGame() {\r\n        gameLost = false;\r\n\r\n        // Reset the button states and mine positions\r\n        for (int i = 0; i &lt; gridSize; i++) {\r\n            for (int j = 0; j &lt; gridHeight; j++) {\r\n                Button button = buttons.get(i).get(j);\r\n                button.setEnabled(true);\r\n                button.setText(&quot;&quot;);\r\n                minePositions.get(i).set(j, false);\r\n            }\r\n        }\r\n\r\n        // Randomly generate mine positions\r\n        generateMinePositions();\r\n    }\r\n\r\ngenerateMinePositions(): \r\n\r\n     private void generateMinePositions() {\r\n        Random random = new Random();\r\n        int minesPlaced = 0;\r\n\r\n        while (minesPlaced &lt; numMines) {\r\n            int row = random.nextInt(4);\r\n            int col = random.nextInt(gridHeight);\r\n\r\n            if (!minePositions.get(row).get(col)) {\r\n                minePositions.get(row).set(col, true);\r\n                minesPlaced++;\r\n            }\r\n        }\r\n    }\r\n\r\nshowGameover() :\r\n\r\n    private void showGameOver() {\r\n        Toast.makeText(this, &quot;Game Over! You hit a mine.&quot;, Toast.LENGTH_SHORT).show();\r\n        for (int i = 0; i &lt; gridSize; i++) {\r\n            for (int j = 0; j &lt; gridHeight; j++) {\r\n                if (minePositions.get(i).get(j)) {\r\n                    buttons.get(i).get(j).setText(&quot;X&quot;);\r\n                }\r\n                buttons.get(i).get(j).setEnabled(false);\r\n            }\r\n        }\r\n    }\r\n\r\ncheckForWin():\r\n\r\n    private void checkForWin() {\r\n        for (int i = 0; i &lt; gridSize; i++) {\r\n            for (int j = 0; j &lt; gridHeight; j++) {\r\n                if (!minePositions.get(i).get(j) &amp;&amp; buttons.get(i).get(j).isEnabled()) {\r\n                    return; // Not all non-mine cells are uncovered yet\r\n                }\r\n            }\r\n        }\r\n\r\n        Toast.makeText(this, &quot;Congratulations! You win!&quot;, Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n","title":"Why is a row of Buttons added after the first round?","body":"<p>The code is a mine game where there is a minefield made up out of buttons. The size and height of the minefield is set as 4 <code>gridsize</code> and 8 <code>gridHeight</code>.\nThe first-time initilisation works - the 4 x 8 field out of buttons pops up. But after the first game, when changing the SeekBar <code>minesSeekBar</code> the Field gets bigger by one row although <code>gridHeight</code> is not changed.\n<a href=\"https://i.stack.imgur.com/2mm7U.png\" rel=\"nofollow noreferrer\">how  it looks on the first game</a>, <a href=\"https://i.stack.imgur.com/DBK5q.png\" rel=\"nofollow noreferrer\">how it looks after the first game</a></p>\n<p>I do not quite understand how there is a  row added when <code>gridHeight</code> is never changed. I suspected that the error might be in the <code>start.setOnClickListener(){}</code> but i could not fix it as the code makes sense (to me). Everytime the field gets redone everytime you press start so it should theoratically be always the same.\ni do not think the error is in <code>setupGame()</code> as the gridsize is not changed in the method.</p>\n<p>Here is the xml:</p>\n<pre><code>&lt;Button\n    android:id=&quot;@+id/menu1&quot;\n    android:layout_width=&quot;55dp&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_alignParentTop=&quot;true&quot;\n    android:layout_marginStart=&quot;340dp&quot;\n    android:layout_marginTop=&quot;10dp&quot;\n    android:background=&quot;@drawable/baseline_menu_24&quot;\n    app:cornerRadius=&quot;15dp&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:layout_constraintVertical_bias=&quot;0.0&quot; /&gt;\n\n&lt;Button\n    android:id=&quot;@+id/start&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:text=&quot;START&quot;\n    android:layout_marginTop=&quot;5dp&quot;\n    android:layout_marginStart=&quot;0dp&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintHorizontal_bias=&quot;0.498&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:layout_constraintVertical_bias=&quot;0.005&quot;\n    tools:ignore=&quot;MissingConstraints&quot; /&gt;\n\n&lt;EditText\n    android:layout_marginStart=&quot;10dp&quot;\n    android:id=&quot;@+id/einsatz&quot;\n    android:layout_marginTop=&quot;10dp&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:hint=&quot;Einsatz&quot;\n    android:inputType=&quot;number&quot;\n    android:textColor=&quot;@color/black&quot;\n    android:textColorHighlight=&quot;@color/white&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n\n&lt;SeekBar\n    android:id=&quot;@+id/sizeSeekBar&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:max=&quot;8&quot;\n    android:progress=&quot;2&quot;\n    app:layout_constraintBottom_toTopOf=&quot;@+id/gridlayout&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    tools:layout_editor_absoluteX=&quot;10dp&quot;\nandroid:visibility=&quot;gone&quot;/&gt; \n\n&lt;SeekBar\n    android:id=&quot;@+id/minesSeekBar&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:max=&quot;16&quot;\n    android:progress=&quot;2&quot;\n    app:layout_constraintBottom_toTopOf=&quot;@+id/gridlayout&quot;\n    app:layout_constraintTop_toBottomOf=&quot;@+id/start&quot;\n    tools:layout_editor_absoluteX=&quot;10dp&quot; /&gt;\n\n&lt;GridLayout\n    android:id=&quot;@+id/gridlayout&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;400dp&quot;\n    android:layout_marginBottom=&quot;52dp&quot;\n    android:layout_weight=&quot;1&quot;\n    android:background=&quot;@drawable/custom_edittext&quot;\n    android:columnCount=&quot;4&quot;\n    android:rowCount=&quot;4&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    tools:layout_editor_absoluteX=&quot;9dp&quot; /&gt;\n</code></pre>\n<p>Here the code:</p>\n<p>public class Minen extends AppCompatActivity {</p>\n<pre><code>private int gridSize = 4; // Default grid size\nprivate int gridHeight = 8; // Default grid height\nprivate int numMines = 2; // Default number of mines\nprivate ArrayList&lt;ArrayList&lt;Button&gt;&gt; buttons;\nprivate ArrayList&lt;ArrayList&lt;Boolean&gt;&gt; minePositions;\nprivate boolean gameLost = false;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_minefield);\n    getSupportActionBar().hide();\n    Button menu = findViewById(R.id.menu1);\n    GridLayout gridLayout = findViewById(R.id.gridlayout);\n    SeekBar heightSeekBar = findViewById(R.id.sizeSeekBar);\n    SeekBar minesSeekBar = findViewById(R.id.minesSeekBar);\n    Button start = findViewById(R.id.start);\n    // Set up the height seek bar listener\n    heightSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n        @Override\n        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n           int x = progress + 1; // Adjust for a range of 2 to 10\n            setupGame();\n        }\n        @Override\n        public void onStartTrackingTouch(SeekBar seekBar) {}\n        @Override\n        public void onStopTrackingTouch(SeekBar seekBar) {\n        }\n    });\n    minesSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {\n        @Override\n        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {\n            numMines = progress;\n            setupGame();\n        }\n        @Override\n        public void onStartTrackingTouch(SeekBar seekBar) {}\n        @Override\n        public void onStopTrackingTouch(SeekBar seekBar) {}\n    });\n\n    // Initialize the ArrayLists for buttons and mine positions\n    buttons = new ArrayList&lt;&gt;();\n    minePositions = new ArrayList&lt;&gt;();\n\n    start.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            if (getEinsatzFromEditText() &gt; 0) {\n                kontostandpositiv(getEinsatzFromEditText(), new Callback() {\n                    @Override\n                    public void Callbackchecked(boolean kontostandPositiv) {\n                        if (kontostandPositiv) {\n                            kontostandandernminus(getEinsatzFromEditText());\n                            for (int i = 0; i &lt; gridSize; i++) {\n                                ArrayList&lt;Button&gt; rowButtons = new ArrayList&lt;&gt;();\n                                ArrayList&lt;Boolean&gt; rowMinePositions = new ArrayList&lt;&gt;();\n                                for (int j = 0; j &lt; gridHeight; j++) {\n                                    Button button = new Button(getApplicationContext());\n                                    int finalI = i;\n                                    int finalJ = j;\n                                    button.setOnClickListener(new View.OnClickListener() {\n                                        @Override\n                                        public void onClick(View v) {\n                                            if (!gameLost) {\n                                                if (minePositions.get(finalI).get(finalJ)) {\n                                                    gameLost = true;\n                                                    showGameOver();\n                                                } else {\n                                                    button.setEnabled(false);\n                                                    calcwin();\n                                                    checkForWin();\n                                                }\n                                            }\n                                        }\n                                    });\n                                    rowButtons.add(button);\n                                    rowMinePositions.add(false);\n                                    gridLayout.addView(button);\n                                }\n                                buttons.add(rowButtons);\n                                minePositions.add(rowMinePositions);\n                            }\n\n                            setupGame();\n                        } else {\n                            Toast.makeText(Minen.this, &quot;Nicht ausreichendes Guthaben&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                });\n            } else {\n                Toast.makeText(Minen.this, &quot;Einsatz setzen&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n</code></pre>\n<p>and there the relevant methods:\nSetupGame:</p>\n<pre><code>private void setupGame() {\n    gameLost = false;\n\n    // Reset the button states and mine positions\n    for (int i = 0; i &lt; gridSize; i++) {\n        for (int j = 0; j &lt; gridHeight; j++) {\n            Button button = buttons.get(i).get(j);\n            button.setEnabled(true);\n            button.setText(&quot;&quot;);\n            minePositions.get(i).set(j, false);\n        }\n    }\n\n    // Randomly generate mine positions\n    generateMinePositions();\n}\n</code></pre>\n<p>generateMinePositions():</p>\n<pre><code> private void generateMinePositions() {\n    Random random = new Random();\n    int minesPlaced = 0;\n\n    while (minesPlaced &lt; numMines) {\n        int row = random.nextInt(4);\n        int col = random.nextInt(gridHeight);\n\n        if (!minePositions.get(row).get(col)) {\n            minePositions.get(row).set(col, true);\n            minesPlaced++;\n        }\n    }\n}\n</code></pre>\n<p>showGameover() :</p>\n<pre><code>private void showGameOver() {\n    Toast.makeText(this, &quot;Game Over! You hit a mine.&quot;, Toast.LENGTH_SHORT).show();\n    for (int i = 0; i &lt; gridSize; i++) {\n        for (int j = 0; j &lt; gridHeight; j++) {\n            if (minePositions.get(i).get(j)) {\n                buttons.get(i).get(j).setText(&quot;X&quot;);\n            }\n            buttons.get(i).get(j).setEnabled(false);\n        }\n    }\n}\n</code></pre>\n<p>checkForWin():</p>\n<pre><code>private void checkForWin() {\n    for (int i = 0; i &lt; gridSize; i++) {\n        for (int j = 0; j &lt; gridHeight; j++) {\n            if (!minePositions.get(i).get(j) &amp;&amp; buttons.get(i).get(j).isEnabled()) {\n                return; // Not all non-mine cells are uncovered yet\n            }\n        }\n    }\n\n    Toast.makeText(this, &quot;Congratulations! You win!&quot;, Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n"},{"tags":["java","dictionary","collections","initialization","idioms"],"comments":[{"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":2,"creation_date":1463988262,"post_id":507602,"comment_id":62279931,"body_markdown":"For initializing a map in Java 8: http://stackoverflow.com/a/37384773/1216775","body":"For initializing a map in Java 8: <a href=\"http://stackoverflow.com/a/37384773/1216775\">stackoverflow.com/a/37384773/1216775</a>"},{"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"score":2,"creation_date":1497115932,"post_id":507602,"comment_id":75947669,"body_markdown":"Please, never use [double brace initialization](https://stackoverflow.com/q/924285/113632) - it&#39;s a hack, and an easy way to leak memory and cause other problems.","body":"Please, never use <a href=\"https://stackoverflow.com/q/924285/113632\">double brace initialization</a> - it&#39;s a hack, and an easy way to leak memory and cause other problems."},{"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":0,"creation_date":1546359244,"post_id":507602,"comment_id":94831143,"body_markdown":"Java 9? If entries count &lt;= 10 use `Map.of` else `Map.ofEntries`, check https://stackoverflow.com/a/37384773/1216775","body":"Java 9? If entries count &lt;= 10 use <code>Map.of</code> else <code>Map.ofEntries</code>, check <a href=\"https://stackoverflow.com/a/37384773/1216775\">stackoverflow.com/a/37384773/1216775</a>"}],"answers":[{"tags":[],"owner":{"account_id":1108,"reputation":9901,"user_id":1471,"accept_rate":64,"display_name":"Tim Frey"},"down_vote_count":5,"up_vote_count":109,"is_accepted":false,"score":104,"last_activity_date":1531893728,"creation_date":1233675898,"answer_id":507621,"question_id":507602,"body_markdown":"One advantage to the second method is that you can wrap it with `Collections.unmodifiableMap()` to guarantee that nothing is going to update the collection later:\r\n\r\n    private static final Map&lt;Integer, String&gt; CONSTANT_MAP = \r\n        Collections.unmodifiableMap(new HashMap&lt;Integer, String&gt;() {{ \r\n            put(1, &quot;one&quot;);\r\n            put(2, &quot;two&quot;);\r\n        }});\r\n\r\n     // later on...\r\n\r\n     CONSTANT_MAP.put(3, &quot;three&quot;); // going to throw an exception!","title":"How can I initialise a static Map?","body":"<p>One advantage to the second method is that you can wrap it with <code>Collections.unmodifiableMap()</code> to guarantee that nothing is going to update the collection later:</p>\n\n<pre><code>private static final Map&lt;Integer, String&gt; CONSTANT_MAP = \n    Collections.unmodifiableMap(new HashMap&lt;Integer, String&gt;() {{ \n        put(1, \"one\");\n        put(2, \"two\");\n    }});\n\n // later on...\n\n CONSTANT_MAP.put(3, \"three\"); // going to throw an exception!\n</code></pre>\n"},{"tags":[],"owner":{"account_id":589,"reputation":30817,"user_id":758,"accept_rate":77,"display_name":"Mark Renouf"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1233675934,"creation_date":1233675934,"answer_id":507626,"question_id":507602,"body_markdown":"The second method could invoke protected methods if needed. This can be useful for initializing classes which are immutable after construction.","title":"How can I initialise a static Map?","body":"<p>The second method could invoke protected methods if needed. This can be useful for initializing classes which are immutable after construction.</p>\n"},{"tags":[],"owner":{"account_id":9943,"reputation":28522,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"down_vote_count":4,"up_vote_count":1198,"is_accepted":true,"score":1194,"last_activity_date":1554990499,"creation_date":1233676264,"answer_id":507658,"question_id":507602,"body_markdown":"The instance initialiser is just syntactic sugar in this case, right? I don&#39;t see why you need an extra anonymous class just to initialize. And it won&#39;t work if the class being created is final.\r\n\r\nYou can create an immutable map using a static initialiser too:\r\n\r\n    public class Test {\r\n        private static final Map&lt;Integer, String&gt; myMap;\r\n        static {\r\n            Map&lt;Integer, String&gt; aMap = ....;\r\n            aMap.put(1, &quot;one&quot;);\r\n            aMap.put(2, &quot;two&quot;);\r\n            myMap = Collections.unmodifiableMap(aMap);\r\n        }\r\n    }","title":"How can I initialise a static Map?","body":"<p>The instance initialiser is just syntactic sugar in this case, right? I don't see why you need an extra anonymous class just to initialize. And it won't work if the class being created is final.</p>\n\n<p>You can create an immutable map using a static initialiser too:</p>\n\n<pre><code>public class Test {\n    private static final Map&lt;Integer, String&gt; myMap;\n    static {\n        Map&lt;Integer, String&gt; aMap = ....;\n        aMap.put(1, \"one\");\n        aMap.put(2, \"two\");\n        myMap = Collections.unmodifiableMap(aMap);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1233735579,"creation_date":1233676518,"answer_id":507686,"question_id":507602,"body_markdown":"I would never create an anonymous subclass in this situation. Static initializers work equally well, if you would like to make the map unmodifiable for example:\r\n\r\n\tprivate static final Map&lt;Integer, String&gt; MY_MAP;\r\n\tstatic\r\n\t{\r\n\t\tMap&lt;Integer, String&gt;tempMap = new HashMap&lt;Integer, String&gt;();\r\n\t\ttempMap.put(1, &quot;one&quot;);\r\n\t\ttempMap.put(2, &quot;two&quot;);\r\n\t\tMY_MAP = Collections.unmodifiableMap(tempMap);\r\n\t}\r\n","title":"How can I initialise a static Map?","body":"<p>I would never create an anonymous subclass in this situation. Static initializers work equally well, if you would like to make the map unmodifiable for example:</p>\n\n<pre><code>private static final Map&lt;Integer, String&gt; MY_MAP;\nstatic\n{\n    Map&lt;Integer, String&gt;tempMap = new HashMap&lt;Integer, String&gt;();\n    tempMap.put(1, \"one\");\n    tempMap.put(2, \"two\");\n    MY_MAP = Collections.unmodifiableMap(tempMap);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4942,"reputation":15741,"user_id":7679,"accept_rate":100,"display_name":"Chase Seibert"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1233677887,"creation_date":1233677887,"answer_id":507800,"question_id":507602,"body_markdown":"I like the anonymous class syntax; it&#39;s just less code. However, one major con I have found is that you won&#39;t be able to serialize that object via remoting. You will get an exception about not being able to find the anonymous class on the remote side.","title":"How can I initialise a static Map?","body":"<p>I like the anonymous class syntax; it's just less code. However, one major con I have found is that you won't be able to serialize that object via remoting. You will get an exception about not being able to find the anonymous class on the remote side.</p>\n"},{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1233742877,"creation_date":1233678686,"answer_id":507850,"question_id":507602,"body_markdown":"The anonymous class you&#39;re creating works well. However you should be aware that this is an *inner* class and as such, it&#39;ll contain a reference to the surrounding class instance. So you&#39;ll find you can&#39;t do certain things with it (using [XStream][1] for one). You&#39;ll get some very strange errors.\r\n\r\nHaving said that, so long as you&#39;re aware then this approach is fine. I use it most of the time for initialising all sorts of collections in a concise fashion. \r\n\r\n\r\n  [1]: http://xstream.codehaus.org/\r\n\r\nEDIT: Pointed out correctly in the comments that this is a static class. Obviously I didn&#39;t read this closely enough. However my comments *do* still apply to anonymous inner classes.","title":"How can I initialise a static Map?","body":"<p>The anonymous class you're creating works well. However you should be aware that this is an <em>inner</em> class and as such, it'll contain a reference to the surrounding class instance. So you'll find you can't do certain things with it (using <a href=\"http://xstream.codehaus.org/\" rel=\"noreferrer\">XStream</a> for one). You'll get some very strange errors.</p>\n\n<p>Having said that, so long as you're aware then this approach is fine. I use it most of the time for initialising all sorts of collections in a concise fashion. </p>\n\n<p>EDIT: Pointed out correctly in the comments that this is a static class. Obviously I didn't read this closely enough. However my comments <em>do</em> still apply to anonymous inner classes.</p>\n"},{"tags":[],"owner":{"account_id":9672,"reputation":4912,"user_id":17967,"accept_rate":66,"display_name":"Gary Kephart"},"down_vote_count":4,"up_vote_count":4,"is_accepted":false,"score":0,"last_activity_date":1233686456,"creation_date":1233686456,"answer_id":508363,"question_id":507602,"body_markdown":"I&#39;ve done something a bit different. Not the best, but it works for me. Maybe it could be &quot;genericized&quot;.\r\n\r\n    private static final Object[][] ENTRIES =\r\n    {\r\n      {new Integer(1), &quot;one&quot;},\r\n      {new Integer(2), &quot;two&quot;},\r\n    };\r\n    private static final Map myMap = newMap(ENTRIES);\r\n    \r\n    private static Map newMap(Object[][] entries)\r\n    {\r\n      Map map = new HashMap();\r\n    \r\n      for (int x = 0; x &lt; entries.length; x++)\r\n      {\r\n        Object[] entry = entries[x];\r\n    \r\n        map.put(entry[0], entry[1]);\r\n      }\r\n    \r\n      return map;\r\n    }","title":"How can I initialise a static Map?","body":"<p>I've done something a bit different. Not the best, but it works for me. Maybe it could be \"genericized\".</p>\n\n<pre><code>private static final Object[][] ENTRIES =\n{\n  {new Integer(1), \"one\"},\n  {new Integer(2), \"two\"},\n};\nprivate static final Map myMap = newMap(ENTRIES);\n\nprivate static Map newMap(Object[][] entries)\n{\n  Map map = new HashMap();\n\n  for (int x = 0; x &lt; entries.length; x++)\n  {\n    Object[] entry = entries[x];\n\n    map.put(entry[0], entry[1]);\n  }\n\n  return map;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7260,"reputation":10592,"user_id":12547,"accept_rate":79,"display_name":"Kaarel"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1391027272,"creation_date":1233696782,"answer_id":508988,"question_id":507602,"body_markdown":"Maybe it&#39;s interesting to check out [Google Collections][1], e.g. the videos that they have on their page. They provide various ways to initialize maps and sets, and provide immutable collections as well.\r\n\r\nUpdate: This library is now named [Guava][2].\r\n\r\n\r\n  [1]: http://code.google.com/p/google-collections/\r\n  [2]: https://code.google.com/p/guava-libraries/","title":"How can I initialise a static Map?","body":"<p>Maybe it's interesting to check out <a href=\"http://code.google.com/p/google-collections/\" rel=\"noreferrer\">Google Collections</a>, e.g. the videos that they have on their page. They provide various ways to initialize maps and sets, and provide immutable collections as well.</p>\n\n<p>Update: This library is now named <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a>.</p>\n"},{"tags":[],"owner":{"account_id":19947,"reputation":32593,"user_id":47190,"accept_rate":80,"display_name":"Peter Štibran&#253;"},"down_vote_count":1,"up_vote_count":210,"is_accepted":false,"score":209,"last_activity_date":1584539155,"creation_date":1233697214,"answer_id":509016,"question_id":507602,"body_markdown":"I would use:\r\n\r\n    public class Test {\r\n        private static final Map&lt;Integer, String&gt; MY_MAP = createMap();\r\n    \r\n        private static Map&lt;Integer, String&gt; createMap() {\r\n            Map&lt;Integer, String&gt; result = new HashMap&lt;&gt;();\r\n            result.put(1, &quot;one&quot;);\r\n            result.put(2, &quot;two&quot;);\r\n            return Collections.unmodifiableMap(result);\r\n        }\r\n    }\r\n\r\n1. it avoids an anonymous class, which I personally consider to be a bad style, and avoid\r\n2. it makes the creation of map more explicit\r\n3. it makes map unmodifiable\r\n4. as MY_MAP is constant, I would name it like constant","title":"How can I initialise a static Map?","body":"<p>I would use:</p>\n\n<pre><code>public class Test {\n    private static final Map&lt;Integer, String&gt; MY_MAP = createMap();\n\n    private static Map&lt;Integer, String&gt; createMap() {\n        Map&lt;Integer, String&gt; result = new HashMap&lt;&gt;();\n        result.put(1, \"one\");\n        result.put(2, \"two\");\n        return Collections.unmodifiableMap(result);\n    }\n}\n</code></pre>\n\n<ol>\n<li>it avoids an anonymous class, which I personally consider to be a bad style, and avoid</li>\n<li>it makes the creation of map more explicit</li>\n<li>it makes map unmodifiable</li>\n<li>as MY_MAP is constant, I would name it like constant</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8244,"reputation":36591,"user_id":14749,"accept_rate":81,"display_name":"Chris Noe"},"down_vote_count":10,"up_vote_count":202,"is_accepted":false,"score":192,"last_activity_date":1247693394,"creation_date":1247693394,"answer_id":1134205,"question_id":507602,"body_markdown":"Java 5 provides this more compact syntax:\r\n\r\n    static final Map&lt;String , String&gt; FLAVORS = new HashMap&lt;String , String&gt;() {{\r\n        put(&quot;Up&quot;,    &quot;Down&quot;);\r\n        put(&quot;Charm&quot;, &quot;Strange&quot;);\r\n        put(&quot;Top&quot;,   &quot;Bottom&quot;);\r\n    }};\r\n","title":"How can I initialise a static Map?","body":"<p>Java 5 provides this more compact syntax:</p>\n\n<pre><code>static final Map&lt;String , String&gt; FLAVORS = new HashMap&lt;String , String&gt;() {{\n    put(\"Up\",    \"Down\");\n    put(\"Charm\", \"Strange\");\n    put(\"Top\",   \"Bottom\");\n}};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":618472,"reputation":479,"user_id":357230,"display_name":"Leninkumar Koppoju"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1275553803,"creation_date":1275553128,"answer_id":2964275,"question_id":507602,"body_markdown":"    public class Test {\r\n        private static final Map&lt;Integer, String&gt; myMap;\r\n        static {\r\n            Map&lt;Integer, String&gt; aMap = ....;\r\n            aMap.put(1, &quot;one&quot;);\r\n            aMap.put(2, &quot;two&quot;);\r\n            myMap = Collections.unmodifiableMap(aMap);\r\n        }\r\n    }\r\n\r\nIf we declare more than one constant then that code will be written in static block and that is hard to maintain in future. So it is better to use anonymous class.\r\n\r\n    public class Test {\r\n       \r\n        public static final Map numbers = Collections.unmodifiableMap(new HashMap(2, 1.0f){\r\n            {\r\n                put(1, &quot;one&quot;);\r\n                put(2, &quot;two&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\nAnd it is suggested to used unmodifiableMap for constants other wise it can&#39;t be treated as constant.","title":"How can I initialise a static Map?","body":"<pre><code>public class Test {\n    private static final Map&lt;Integer, String&gt; myMap;\n    static {\n        Map&lt;Integer, String&gt; aMap = ....;\n        aMap.put(1, \"one\");\n        aMap.put(2, \"two\");\n        myMap = Collections.unmodifiableMap(aMap);\n    }\n}\n</code></pre>\n\n<p>If we declare more than one constant then that code will be written in static block and that is hard to maintain in future. So it is better to use anonymous class.</p>\n\n<pre><code>public class Test {\n\n    public static final Map numbers = Collections.unmodifiableMap(new HashMap(2, 1.0f){\n        {\n            put(1, \"one\");\n            put(2, \"two\");\n        }\n    });\n}\n</code></pre>\n\n<p>And it is suggested to used unmodifiableMap for constants other wise it can't be treated as constant.</p>\n"},{"tags":[],"owner":{"account_id":17795,"reputation":24571,"user_id":40214,"accept_rate":79,"display_name":"Dennis C"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1292128143,"creation_date":1292128143,"answer_id":4420400,"question_id":507602,"body_markdown":"I could strongly suggest the &quot;double brace initialization&quot; style over static block style.\r\n\r\nSomeone may comment that they don&#39;t like anonymous class, overhead, performance, etc.\r\n\r\nBut that I more consider is the code readability and maintainability. In this point of view, I stand a double brace is a better code style rather then static method.\r\n\r\n1. The elements are nested and inline.\r\n2. It is more OO, not procedural.\r\n3. the performance impact is really small and could be ignored.\r\n4. Better IDE outline support (rather then many anonymous static{} block)\r\n5. You saved few lines of comment to bring them relationship.\r\n6. Prevent possible element leak/instance lead of uninitialized object from exception and bytecode optimizer.\r\n7. No worry about the order of execution of static block.\r\n\r\nIn addition, it you aware the GC of the anonymous class, you can always convert it to a normal HashMap by using `new HashMap(Map map)`.\r\n\r\nYou can do this until you faced another problem. If you do, you should use complete another coding style (e.g. no static, factory class) for it.","title":"How can I initialise a static Map?","body":"<p>I could strongly suggest the \"double brace initialization\" style over static block style.</p>\n\n<p>Someone may comment that they don't like anonymous class, overhead, performance, etc.</p>\n\n<p>But that I more consider is the code readability and maintainability. In this point of view, I stand a double brace is a better code style rather then static method.</p>\n\n<ol>\n<li>The elements are nested and inline.</li>\n<li>It is more OO, not procedural.</li>\n<li>the performance impact is really small and could be ignored.</li>\n<li>Better IDE outline support (rather then many anonymous static{} block)</li>\n<li>You saved few lines of comment to bring them relationship.</li>\n<li>Prevent possible element leak/instance lead of uninitialized object from exception and bytecode optimizer.</li>\n<li>No worry about the order of execution of static block.</li>\n</ol>\n\n<p>In addition, it you aware the GC of the anonymous class, you can always convert it to a normal HashMap by using <code>new HashMap(Map map)</code>.</p>\n\n<p>You can do this until you faced another problem. If you do, you should use complete another coding style (e.g. no static, factory class) for it.</p>\n"},{"tags":[],"owner":{"account_id":22705,"reputation":80387,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"down_vote_count":0,"up_vote_count":485,"is_accepted":false,"score":485,"last_activity_date":1582375904,"creation_date":1314799117,"answer_id":7258027,"question_id":507602,"body_markdown":"I like the [Guava][1] way of initialising a static, immutable map:\r\n\r\n    static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.of(\r\n        1, &quot;one&quot;,\r\n        2, &quot;two&quot;\r\n    );\r\n\r\nAs you can see, it&#39;s very concise (because of the convenient factory methods in [`ImmutableMap`][2]).\r\n\r\nIf you want the map to have more than 5 entries, you can no longer use `ImmutableMap.of()`. Instead, try [`ImmutableMap.builder()`][3] along these lines:\r\n\r\n    static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.&lt;Integer, String&gt;builder()\r\n        .put(1, &quot;one&quot;)\r\n        .put(2, &quot;two&quot;)\r\n    \t// ... \r\n        .put(15, &quot;fifteen&quot;)\r\n        .build();\r\n\r\nTo learn more about the benefits of Guava&#39;s immutable collection utilities, see [*Immutable Collections Explained* in Guava User Guide][4].\r\n\r\n(A subset of) Guava used to be called *Google Collections*. If you aren&#39;t using this library in your Java project yet, I **strongly** recommend trying it out! Guava has quickly become one of the most popular and useful free 3rd party libs for Java, as [fellow SO users agree][5]. (If you are new to it, there are some excellent learning resources behind that link.)\r\n\r\n----\r\n\r\n**Update (2015)**: As for **Java 8**, well, I would still use the Guava approach because it is way cleaner than anything else. If you don&#39;t want Guava dependency, consider a [plain old init method][6]. The hack with [two-dimensional array and Stream API][7] is pretty ugly if you ask me, and gets uglier if you need to create a Map whose keys and values are not the same type (like `Map&lt;Integer, String&gt;` in the question).\r\n\r\nAs for future of Guava in general, with regards to Java 8, Louis Wasserman [said this][8] back in 2014, and [*update*] in 2016 it was announced that [**Guava 21 will require and properly support Java 8**][9].\r\n\r\n----------\r\n\r\n**Update (2016)**: As [Tagir Valeev points out][10], **Java 9** will finally make this clean to do using nothing but pure JDK, by adding [convenience factory methods][11] for collections:\r\n\r\n    static final Map&lt;Integer, String&gt; MY_MAP = Map.of(\r\n        1, &quot;one&quot;, \r\n        2, &quot;two&quot;\r\n    );\r\n\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\r\n  [3]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#builder--\r\n  [4]: https://github.com/google/guava/wiki/ImmutableCollectionsExplained\r\n  [5]: https://stackoverflow.com/questions/130095/most-useful-free-third-party-java-libraries/132639#132639\r\n  [6]: https://stackoverflow.com/a/509016/56285\r\n  [7]: https://stackoverflow.com/a/25829097/56285\r\n  [8]: https://groups.google.com/d/msg/guava-discuss/fEdrMyNa8tA/F4XFm6-uA6oJ\r\n  [9]: https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/guava-announce/o954PqvaXLY/7ss96X6sAwAJ\r\n  [10]: https://stackoverflow.com/questions/507602/how-can-i-initialise-a-static-map/34508760#34508760\r\n  [11]: http://openjdk.java.net/jeps/269","title":"How can I initialise a static Map?","body":"<p>I like the <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a> way of initialising a static, immutable map:</p>\n\n<pre><code>static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.of(\n    1, \"one\",\n    2, \"two\"\n);\n</code></pre>\n\n<p>As you can see, it's very concise (because of the convenient factory methods in <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html\" rel=\"noreferrer\"><code>ImmutableMap</code></a>).</p>\n\n<p>If you want the map to have more than 5 entries, you can no longer use <code>ImmutableMap.of()</code>. Instead, try <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/ImmutableMap.html#builder--\" rel=\"noreferrer\"><code>ImmutableMap.builder()</code></a> along these lines:</p>\n\n<pre><code>static final Map&lt;Integer, String&gt; MY_MAP = ImmutableMap.&lt;Integer, String&gt;builder()\n    .put(1, \"one\")\n    .put(2, \"two\")\n    // ... \n    .put(15, \"fifteen\")\n    .build();\n</code></pre>\n\n<p>To learn more about the benefits of Guava's immutable collection utilities, see <a href=\"https://github.com/google/guava/wiki/ImmutableCollectionsExplained\" rel=\"noreferrer\"><em>Immutable Collections Explained</em> in Guava User Guide</a>.</p>\n\n<p>(A subset of) Guava used to be called <em>Google Collections</em>. If you aren't using this library in your Java project yet, I <strong>strongly</strong> recommend trying it out! Guava has quickly become one of the most popular and useful free 3rd party libs for Java, as <a href=\"https://stackoverflow.com/questions/130095/most-useful-free-third-party-java-libraries/132639#132639\">fellow SO users agree</a>. (If you are new to it, there are some excellent learning resources behind that link.)</p>\n\n<hr>\n\n<p><strong>Update (2015)</strong>: As for <strong>Java 8</strong>, well, I would still use the Guava approach because it is way cleaner than anything else. If you don't want Guava dependency, consider a <a href=\"https://stackoverflow.com/a/509016/56285\">plain old init method</a>. The hack with <a href=\"https://stackoverflow.com/a/25829097/56285\">two-dimensional array and Stream API</a> is pretty ugly if you ask me, and gets uglier if you need to create a Map whose keys and values are not the same type (like <code>Map&lt;Integer, String&gt;</code> in the question).</p>\n\n<p>As for future of Guava in general, with regards to Java 8, Louis Wasserman <a href=\"https://groups.google.com/d/msg/guava-discuss/fEdrMyNa8tA/F4XFm6-uA6oJ\" rel=\"noreferrer\">said this</a> back in 2014, and [<em>update</em>] in 2016 it was announced that <a href=\"https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/guava-announce/o954PqvaXLY/7ss96X6sAwAJ\" rel=\"noreferrer\"><strong>Guava 21 will require and properly support Java 8</strong></a>.</p>\n\n<hr>\n\n<p><strong>Update (2016)</strong>: As <a href=\"https://stackoverflow.com/questions/507602/how-can-i-initialise-a-static-map/34508760#34508760\">Tagir Valeev points out</a>, <strong>Java 9</strong> will finally make this clean to do using nothing but pure JDK, by adding <a href=\"http://openjdk.java.net/jeps/269\" rel=\"noreferrer\">convenience factory methods</a> for collections:</p>\n\n<pre><code>static final Map&lt;Integer, String&gt; MY_MAP = Map.of(\n    1, \"one\", \n    2, \"two\"\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1143604,"reputation":41,"user_id":1126874,"display_name":"Staszek Borowy"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1346137227,"creation_date":1346047771,"answer_id":12136950,"question_id":507602,"body_markdown":"I do not like Static initializer syntax and I&#39;m not convinced to anonymous subclasses. Generally, I agree with all cons of using Static initializers and all cons of using anonymous subclasses that were mentioned in previus answers. On the other hand - pros presented in these posts are not enough for me. I prefer to use static initialization method:\r\n\r\n\r\n    public class MyClass {\r\n        private static final Map&lt;Integer, String&gt; myMap = prepareMap();\r\n            \r\n        private static Map&lt;Integer, String&gt; prepareMap() {\r\n            Map&lt;Integer, String&gt; hashMap = new HashMap&lt;&gt;();\r\n            hashMap.put(1, &quot;one&quot;);\r\n            hashMap.put(2, &quot;two&quot;);\r\n            \r\n            return hashMap;\r\n        }\r\n    }\r\n","title":"How can I initialise a static Map?","body":"<p>I do not like Static initializer syntax and I'm not convinced to anonymous subclasses. Generally, I agree with all cons of using Static initializers and all cons of using anonymous subclasses that were mentioned in previus answers. On the other hand - pros presented in these posts are not enough for me. I prefer to use static initialization method:</p>\n\n<pre><code>public class MyClass {\n    private static final Map&lt;Integer, String&gt; myMap = prepareMap();\n\n    private static Map&lt;Integer, String&gt; prepareMap() {\n        Map&lt;Integer, String&gt; hashMap = new HashMap&lt;&gt;();\n        hashMap.put(1, \"one\");\n        hashMap.put(2, \"two\");\n\n        return hashMap;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":2,"up_vote_count":33,"is_accepted":false,"score":31,"last_activity_date":1550454298,"creation_date":1355872243,"answer_id":13943037,"question_id":507602,"body_markdown":"With [Eclipse Collections][1], all of the following will work:\r\n \r\n    import java.util.Map;\r\n    \r\n    import org.eclipse.collections.api.map.ImmutableMap;\r\n    import org.eclipse.collections.api.map.MutableMap;\r\n    import org.eclipse.collections.impl.factory.Maps;\r\n    \r\n    public class StaticMapsTest\r\n    {\r\n        private static final Map&lt;Integer, String&gt; MAP =\r\n            Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n\r\n        private static final MutableMap&lt;Integer, String&gt; MUTABLE_MAP =\r\n           Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n\r\n \r\n        private static final MutableMap&lt;Integer, String&gt; UNMODIFIABLE_MAP =\r\n            Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;).asUnmodifiable();\r\n\r\n \r\n        private static final MutableMap&lt;Integer, String&gt; SYNCHRONIZED_MAP =\r\n            Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;).asSynchronized();\r\n\r\n \r\n        private static final ImmutableMap&lt;Integer, String&gt; IMMUTABLE_MAP =\r\n            Maps.mutable.with(1, &quot;one&quot;, 2, &quot;two&quot;).toImmutable();\r\n\r\n \r\n        private static final ImmutableMap&lt;Integer, String&gt; IMMUTABLE_MAP2 =\r\n            Maps.immutable.with(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n    }\r\n\r\nYou can also statically initialize primitive maps with Eclipse Collections.\r\n\r\n    import org.eclipse.collections.api.map.primitive.ImmutableIntObjectMap;\r\n    import org.eclipse.collections.api.map.primitive.MutableIntObjectMap;\r\n    import org.eclipse.collections.impl.factory.primitive.IntObjectMaps;\r\n    \r\n    public class StaticPrimitiveMapsTest\r\n    {\r\n        private static final MutableIntObjectMap&lt;String&gt; MUTABLE_INT_OBJ_MAP =\r\n                IntObjectMaps.mutable.&lt;String&gt;empty()\r\n                        .withKeyValue(1, &quot;one&quot;)\r\n                        .withKeyValue(2, &quot;two&quot;);\r\n    \r\n        private static final MutableIntObjectMap&lt;String&gt; UNMODIFIABLE_INT_OBJ_MAP =\r\n                IntObjectMaps.mutable.&lt;String&gt;empty()\r\n                        .withKeyValue(1, &quot;one&quot;)\r\n                        .withKeyValue(2, &quot;two&quot;)\r\n                        .asUnmodifiable();\r\n    \r\n        private static final MutableIntObjectMap&lt;String&gt; SYNCHRONIZED_INT_OBJ_MAP =\r\n                IntObjectMaps.mutable.&lt;String&gt;empty()\r\n                        .withKeyValue(1, &quot;one&quot;)\r\n                        .withKeyValue(2, &quot;two&quot;)\r\n                        .asSynchronized();\r\n    \r\n        private static final ImmutableIntObjectMap&lt;String&gt; IMMUTABLE_INT_OBJ_MAP =\r\n                IntObjectMaps.mutable.&lt;String&gt;empty()\r\n                        .withKeyValue(1, &quot;one&quot;)\r\n                        .withKeyValue(2, &quot;two&quot;)\r\n                        .toImmutable();\r\n    \r\n        private static final ImmutableIntObjectMap&lt;String&gt; IMMUTABLE_INT_OBJ_MAP2 =\r\n                IntObjectMaps.immutable.&lt;String&gt;empty()\r\n                        .newWithKeyValue(1, &quot;one&quot;)\r\n                        .newWithKeyValue(2, &quot;two&quot;);\r\n    } \r\n\r\n**Note:** I am a committer for Eclipse Collections \r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections\r\n","title":"How can I initialise a static Map?","body":"<p>With <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a>, all of the following will work:</p>\n\n<pre><code>import java.util.Map;\n\nimport org.eclipse.collections.api.map.ImmutableMap;\nimport org.eclipse.collections.api.map.MutableMap;\nimport org.eclipse.collections.impl.factory.Maps;\n\npublic class StaticMapsTest\n{\n    private static final Map&lt;Integer, String&gt; MAP =\n        Maps.mutable.with(1, \"one\", 2, \"two\");\n\n    private static final MutableMap&lt;Integer, String&gt; MUTABLE_MAP =\n       Maps.mutable.with(1, \"one\", 2, \"two\");\n\n\n    private static final MutableMap&lt;Integer, String&gt; UNMODIFIABLE_MAP =\n        Maps.mutable.with(1, \"one\", 2, \"two\").asUnmodifiable();\n\n\n    private static final MutableMap&lt;Integer, String&gt; SYNCHRONIZED_MAP =\n        Maps.mutable.with(1, \"one\", 2, \"two\").asSynchronized();\n\n\n    private static final ImmutableMap&lt;Integer, String&gt; IMMUTABLE_MAP =\n        Maps.mutable.with(1, \"one\", 2, \"two\").toImmutable();\n\n\n    private static final ImmutableMap&lt;Integer, String&gt; IMMUTABLE_MAP2 =\n        Maps.immutable.with(1, \"one\", 2, \"two\");\n}\n</code></pre>\n\n<p>You can also statically initialize primitive maps with Eclipse Collections.</p>\n\n<pre><code>import org.eclipse.collections.api.map.primitive.ImmutableIntObjectMap;\nimport org.eclipse.collections.api.map.primitive.MutableIntObjectMap;\nimport org.eclipse.collections.impl.factory.primitive.IntObjectMaps;\n\npublic class StaticPrimitiveMapsTest\n{\n    private static final MutableIntObjectMap&lt;String&gt; MUTABLE_INT_OBJ_MAP =\n            IntObjectMaps.mutable.&lt;String&gt;empty()\n                    .withKeyValue(1, \"one\")\n                    .withKeyValue(2, \"two\");\n\n    private static final MutableIntObjectMap&lt;String&gt; UNMODIFIABLE_INT_OBJ_MAP =\n            IntObjectMaps.mutable.&lt;String&gt;empty()\n                    .withKeyValue(1, \"one\")\n                    .withKeyValue(2, \"two\")\n                    .asUnmodifiable();\n\n    private static final MutableIntObjectMap&lt;String&gt; SYNCHRONIZED_INT_OBJ_MAP =\n            IntObjectMaps.mutable.&lt;String&gt;empty()\n                    .withKeyValue(1, \"one\")\n                    .withKeyValue(2, \"two\")\n                    .asSynchronized();\n\n    private static final ImmutableIntObjectMap&lt;String&gt; IMMUTABLE_INT_OBJ_MAP =\n            IntObjectMaps.mutable.&lt;String&gt;empty()\n                    .withKeyValue(1, \"one\")\n                    .withKeyValue(2, \"two\")\n                    .toImmutable();\n\n    private static final ImmutableIntObjectMap&lt;String&gt; IMMUTABLE_INT_OBJ_MAP2 =\n            IntObjectMaps.immutable.&lt;String&gt;empty()\n                    .newWithKeyValue(1, \"one\")\n                    .newWithKeyValue(2, \"two\");\n} \n</code></pre>\n\n<p><strong>Note:</strong> I am a committer for Eclipse Collections </p>\n"},{"tags":[],"owner":{"account_id":302533,"reputation":1451,"user_id":610966,"accept_rate":85,"display_name":"Philip Guin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1375821348,"creation_date":1375407058,"answer_id":18007334,"question_id":507602,"body_markdown":"If you want something terse and relatively safe, you can just shift compile-time type checking to run-time:\r\n\r\n    static final Map&lt;String, Integer&gt; map = MapUtils.unmodifiableMap(\r\n    \tString.class, Integer.class,\r\n    \t&quot;cat&quot;,  4,\r\n    \t&quot;dog&quot;,  2,\r\n    \t&quot;frog&quot;, 17\r\n    );\r\n\r\nThis implementation should catch any errors:\r\n\r\n    import java.util.HashMap;\r\n    \t\r\n    public abstract class MapUtils\r\n    {\r\n    \tprivate MapUtils() { }\r\n    \t\r\n    \tpublic static &lt;K, V&gt; HashMap&lt;K, V&gt; unmodifiableMap(\r\n    \t\t\tClass&lt;? extends K&gt; keyClazz,\r\n    \t\t\tClass&lt;? extends V&gt; valClazz,\r\n    \t\t\tObject...keyValues)\r\n        {\r\n            return Collections.&lt;K, V&gt;unmodifiableMap(makeMap(\r\n                keyClazz,\r\n                valClazz,\r\n                keyValues));\r\n        }\r\n\r\n    \tpublic static &lt;K, V&gt; HashMap&lt;K, V&gt; makeMap(\r\n    \t\t\tClass&lt;? extends K&gt; keyClazz,\r\n    \t\t\tClass&lt;? extends V&gt; valClazz,\r\n    \t\t\tObject...keyValues)\r\n    \t{\r\n    \t\tif (keyValues.length % 2 != 0)\r\n    \t\t{\r\n    \t\t\tthrow new IllegalArgumentException(\r\n    \t\t\t\t\t&quot;&#39;keyValues&#39; was formatted incorrectly!  &quot;\r\n\t    \t\t\t  + &quot;(Expected an even length, but found &#39;&quot; + keyValues.length + &quot;&#39;)&quot;);\r\n\t    \t}\r\n\t\t\r\n    \t\tHashMap&lt;K, V&gt; result = new HashMap&lt;K, V&gt;(keyValues.length / 2);\r\n\t\t\r\n    \t\tfor (int i = 0; i &lt; keyValues.length;)\r\n    \t\t{\r\n                K key = cast(keyClazz, keyValues[i], i);\r\n                ++i;\r\n                V val = cast(valClazz, keyValues[i], i);\r\n                ++i;\r\n                result.put(key, val);\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn result;\r\n    \t}\r\n    \t\r\n    \tprivate static &lt;T&gt; T cast(Class&lt;? extends T&gt; clazz, Object object, int i)\r\n    \t{\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\treturn clazz.cast(object);\r\n    \t\t}\r\n    \t\tcatch (ClassCastException e)\r\n    \t\t{\r\n    \t\t\tString objectName = (i % 2 == 0) ? &quot;Key&quot; : &quot;Value&quot;;\r\n    \t\t\tString format = &quot;%s at index %d (&#39;%s&#39;) wasn&#39;t assignable to type &#39;%s&#39;&quot;;\r\n    \t\t\tthrow new IllegalArgumentException(String.format(format, objectName, i, object.toString(), clazz.getSimpleName()), e);\r\n    \t\t}\r\n    \t}\r\n    }","title":"How can I initialise a static Map?","body":"<p>If you want something terse and relatively safe, you can just shift compile-time type checking to run-time:</p>\n\n<pre><code>static final Map&lt;String, Integer&gt; map = MapUtils.unmodifiableMap(\n    String.class, Integer.class,\n    \"cat\",  4,\n    \"dog\",  2,\n    \"frog\", 17\n);\n</code></pre>\n\n<p>This implementation should catch any errors:</p>\n\n<pre><code>import java.util.HashMap;\n\npublic abstract class MapUtils\n{\n    private MapUtils() { }\n\n    public static &lt;K, V&gt; HashMap&lt;K, V&gt; unmodifiableMap(\n            Class&lt;? extends K&gt; keyClazz,\n            Class&lt;? extends V&gt; valClazz,\n            Object...keyValues)\n    {\n        return Collections.&lt;K, V&gt;unmodifiableMap(makeMap(\n            keyClazz,\n            valClazz,\n            keyValues));\n    }\n\n    public static &lt;K, V&gt; HashMap&lt;K, V&gt; makeMap(\n            Class&lt;? extends K&gt; keyClazz,\n            Class&lt;? extends V&gt; valClazz,\n            Object...keyValues)\n    {\n        if (keyValues.length % 2 != 0)\n        {\n            throw new IllegalArgumentException(\n                    \"'keyValues' was formatted incorrectly!  \"\n                  + \"(Expected an even length, but found '\" + keyValues.length + \"')\");\n        }\n\n        HashMap&lt;K, V&gt; result = new HashMap&lt;K, V&gt;(keyValues.length / 2);\n\n        for (int i = 0; i &lt; keyValues.length;)\n        {\n            K key = cast(keyClazz, keyValues[i], i);\n            ++i;\n            V val = cast(valClazz, keyValues[i], i);\n            ++i;\n            result.put(key, val);\n        }\n\n        return result;\n    }\n\n    private static &lt;T&gt; T cast(Class&lt;? extends T&gt; clazz, Object object, int i)\n    {\n        try\n        {\n            return clazz.cast(object);\n        }\n        catch (ClassCastException e)\n        {\n            String objectName = (i % 2 == 0) ? \"Key\" : \"Value\";\n            String format = \"%s at index %d ('%s') wasn't assignable to type '%s'\";\n            throw new IllegalArgumentException(String.format(format, objectName, i, object.toString(), clazz.getSimpleName()), e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2213553,"reputation":1635,"user_id":1954759,"accept_rate":0,"display_name":"Shushant"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1461823960,"creation_date":1379580539,"answer_id":18890130,"question_id":507602,"body_markdown":"I like anonymous class, because it is easy to deal with it:\r\n\r\n    public static final Map&lt;?, ?&gt; numbers = Collections.unmodifiableMap(new HashMap&lt;Integer, String&gt;() {\r\n\t\t{\r\n\t\t\tput(1, &quot;some value&quot;);\r\n                        //rest of code here\r\n\t\t}\r\n\t});","title":"How can I initialise a static Map?","body":"<p>I like anonymous class, because it is easy to deal with it:</p>\n\n<pre><code>public static final Map&lt;?, ?&gt; numbers = Collections.unmodifiableMap(new HashMap&lt;Integer, String&gt;() {\n    {\n        put(1, \"some value\");\n                    //rest of code here\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":165129,"reputation":1388,"user_id":388317,"accept_rate":0,"display_name":"Christian Ullenboom"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1449615631,"creation_date":1389587954,"answer_id":21083994,"question_id":507602,"body_markdown":"If you can use a String representation of your data this is an option too in Java 8:\r\n\r\n    static Map&lt;Integer, String&gt; MAP = Stream.of(\r\n            &quot;1=one&quot;,\r\n            &quot;2=two&quot;\r\n    ).collect(Collectors.toMap(k -&gt; Integer.parseInt(k.split(&quot;=&quot;)[0]), v -&gt; v.split(&quot;=&quot;)[1]));","title":"How can I initialise a static Map?","body":"<p>If you can use a String representation of your data this is an option too in Java 8:</p>\n\n<pre><code>static Map&lt;Integer, String&gt; MAP = Stream.of(\n        \"1=one\",\n        \"2=two\"\n).collect(Collectors.toMap(k -&gt; Integer.parseInt(k.split(\"=\")[0]), v -&gt; v.split(\"=\")[1]));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":153327,"reputation":1194,"user_id":368503,"display_name":"Domingo Ignacio"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1579617683,"creation_date":1397633523,"answer_id":23102809,"question_id":507602,"body_markdown":"Now that Java 8 is out, this question warrants revisiting. I took a stab at it -- looks like maybe you can exploit lambda expression syntax to get a pretty nice and concise (but type-safe) map literal syntax that looks like this:\r\n```java\r\nMap&lt;String,Object&gt; myMap = hashMap(\r\n    bob -&gt; 5,\r\n    TheGimp -&gt; 8,\r\n    incredibleKoolAid -&gt; &quot;James Taylor&quot;,\r\n    heyArnold -&gt; new Date()\r\n);\r\n\r\nMap&lt;String,Integer&gt; typesafeMap = treeMap(\r\n    a -&gt; 5,\r\n    bee -&gt; 8,\r\n    sea -&gt; 13\r\n    deep -&gt; 21\r\n);\r\n```\r\n\r\nUntested sample code at https://gist.github.com/galdosd/10823529\r\nWould be curious about the opinions of others on this (it&#39;s mildly evil...)","title":"How can I initialise a static Map?","body":"<p>Now that Java 8 is out, this question warrants revisiting. I took a stab at it -- looks like maybe you can exploit lambda expression syntax to get a pretty nice and concise (but type-safe) map literal syntax that looks like this:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String,Object&gt; myMap = hashMap(\n    bob -&gt; 5,\n    TheGimp -&gt; 8,\n    incredibleKoolAid -&gt; \"James Taylor\",\n    heyArnold -&gt; new Date()\n);\n\nMap&lt;String,Integer&gt; typesafeMap = treeMap(\n    a -&gt; 5,\n    bee -&gt; 8,\n    sea -&gt; 13\n    deep -&gt; 21\n);\n</code></pre>\n\n<p>Untested sample code at <a href=\"https://gist.github.com/galdosd/10823529\" rel=\"nofollow noreferrer\">https://gist.github.com/galdosd/10823529</a>\nWould be curious about the opinions of others on this (it's mildly evil...)</p>\n"},{"tags":[],"owner":{"account_id":1886487,"reputation":396547,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1409208605,"creation_date":1398156410,"answer_id":23214686,"question_id":507602,"body_markdown":"I prefer using a static initializer to avoid generating anonymous classes (which would have no further purpose), so I&#39;ll list tips initializing with a static initializer. All listed solutions / tips are type-safe.\r\n\r\n**Note:** The question doesn&#39;t say anything about making the map unmodifiable, so I will leave that out, but know that it can easily be done with `Collections.unmodifiableMap(map)`.\r\n\r\n**First tip**\r\n\r\nThe 1st tip is that you can make a local reference to the map and you give it a SHORT name:\r\n\r\n    private static final Map&lt;Integer, String&gt; myMap = new HashMap&lt;&gt;();\r\n    static {\r\n        final Map&lt;Integer, String&gt; m = myMap; // Use short name!\r\n        m.put(1, &quot;one&quot;); // Here referencing the local variable which is also faster!\r\n        m.put(2, &quot;two&quot;);\r\n        m.put(3, &quot;three&quot;);\r\n    }\r\n\r\n**Second tip**\r\n\r\nThe 2nd tip is that you can create a helper method to add entries; you can also make this helper method public if you want to:\r\n\r\n    private static final Map&lt;Integer, String&gt; myMap2 = new HashMap&lt;&gt;();\r\n    static {\r\n        p(1, &quot;one&quot;); // Calling the helper method.\r\n        p(2, &quot;two&quot;);\r\n        p(3, &quot;three&quot;);\r\n    }\r\n\r\n    private static void p(Integer k, String v) {\r\n        myMap2.put(k, v);\r\n    }\r\n\r\nThe helper method here is not re-usable though because it can only add elements to `myMap2`. To make it re-usable, we could make the map itself a parameter of the helper method, but then initialization code would not be any shorter. \r\n\r\n**Third tip**\r\n\r\nThe 3rd tip is that you can create a re-usable builder-like helper class with the populating functionality. This is really a simple, 10-line helper class which is type-safe:\r\n\r\n    public class Test {\r\n        private static final Map&lt;Integer, String&gt; myMap3 = new HashMap&lt;&gt;();\r\n        static {\r\n            new B&lt;&gt;(myMap3)   // Instantiating the helper class with our map\r\n                .p(1, &quot;one&quot;)\r\n                .p(2, &quot;two&quot;)\r\n                .p(3, &quot;three&quot;);\r\n        }\r\n    }\r\n\r\n    class B&lt;K, V&gt; {\r\n        private final Map&lt;K, V&gt; m;\r\n\r\n        public B(Map&lt;K, V&gt; m) {\r\n            this.m = m;\r\n        }\r\n\r\n        public B&lt;K, V&gt; p(K k, V v) {\r\n            m.put(k, v);\r\n            return this; // Return this for chaining\r\n        }\r\n    }","title":"How can I initialise a static Map?","body":"<p>I prefer using a static initializer to avoid generating anonymous classes (which would have no further purpose), so I'll list tips initializing with a static initializer. All listed solutions / tips are type-safe.</p>\n\n<p><strong>Note:</strong> The question doesn't say anything about making the map unmodifiable, so I will leave that out, but know that it can easily be done with <code>Collections.unmodifiableMap(map)</code>.</p>\n\n<p><strong>First tip</strong></p>\n\n<p>The 1st tip is that you can make a local reference to the map and you give it a SHORT name:</p>\n\n<pre><code>private static final Map&lt;Integer, String&gt; myMap = new HashMap&lt;&gt;();\nstatic {\n    final Map&lt;Integer, String&gt; m = myMap; // Use short name!\n    m.put(1, \"one\"); // Here referencing the local variable which is also faster!\n    m.put(2, \"two\");\n    m.put(3, \"three\");\n}\n</code></pre>\n\n<p><strong>Second tip</strong></p>\n\n<p>The 2nd tip is that you can create a helper method to add entries; you can also make this helper method public if you want to:</p>\n\n<pre><code>private static final Map&lt;Integer, String&gt; myMap2 = new HashMap&lt;&gt;();\nstatic {\n    p(1, \"one\"); // Calling the helper method.\n    p(2, \"two\");\n    p(3, \"three\");\n}\n\nprivate static void p(Integer k, String v) {\n    myMap2.put(k, v);\n}\n</code></pre>\n\n<p>The helper method here is not re-usable though because it can only add elements to <code>myMap2</code>. To make it re-usable, we could make the map itself a parameter of the helper method, but then initialization code would not be any shorter. </p>\n\n<p><strong>Third tip</strong></p>\n\n<p>The 3rd tip is that you can create a re-usable builder-like helper class with the populating functionality. This is really a simple, 10-line helper class which is type-safe:</p>\n\n<pre><code>public class Test {\n    private static final Map&lt;Integer, String&gt; myMap3 = new HashMap&lt;&gt;();\n    static {\n        new B&lt;&gt;(myMap3)   // Instantiating the helper class with our map\n            .p(1, \"one\")\n            .p(2, \"two\")\n            .p(3, \"three\");\n    }\n}\n\nclass B&lt;K, V&gt; {\n    private final Map&lt;K, V&gt; m;\n\n    public B(Map&lt;K, V&gt; m) {\n        this.m = m;\n    }\n\n    public B&lt;K, V&gt; p(K k, V v) {\n        m.put(k, v);\n        return this; // Return this for chaining\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"down_vote_count":1,"up_vote_count":67,"is_accepted":false,"score":66,"last_activity_date":1530833130,"creation_date":1410655477,"answer_id":25829097,"question_id":507602,"body_markdown":"Here&#39;s a Java 8 one-line static map initializer:\r\n\r\n    private static final Map&lt;String, String&gt; EXTENSION_TO_MIMETYPE =\r\n        Arrays.stream(new String[][] {\r\n            { &quot;txt&quot;, &quot;text/plain&quot; }, \r\n            { &quot;html&quot;, &quot;text/html&quot; }, \r\n            { &quot;js&quot;, &quot;application/javascript&quot; },\r\n            { &quot;css&quot;, &quot;text/css&quot; },\r\n            { &quot;xml&quot;, &quot;application/xml&quot; },\r\n            { &quot;png&quot;, &quot;image/png&quot; }, \r\n            { &quot;gif&quot;, &quot;image/gif&quot; }, \r\n            { &quot;jpg&quot;, &quot;image/jpeg&quot; },\r\n            { &quot;jpeg&quot;, &quot;image/jpeg&quot; }, \r\n            { &quot;svg&quot;, &quot;image/svg+xml&quot; },\r\n        }).collect(Collectors.toMap(kv -&gt; kv[0], kv -&gt; kv[1]));\r\n\r\nEdit: to initialize a `Map&lt;Integer, String&gt;` as in the question, you&#39;d need something like this:\r\n\r\n    static final Map&lt;Integer, String&gt; MY_MAP = Arrays.stream(new Object[][]{\r\n            {1, &quot;one&quot;},\r\n            {2, &quot;two&quot;},\r\n    }).collect(Collectors.toMap(kv -&gt; (Integer) kv[0], kv -&gt; (String) kv[1]));\r\n\r\nEdit(2): There is a better, mixed-type-capable version by i_am_zero that uses a stream of `new SimpleEntry&lt;&gt;(k, v)` calls. Check out that answer: https://stackoverflow.com/a/37384773/3950982","title":"How can I initialise a static Map?","body":"<p>Here's a Java 8 one-line static map initializer:</p>\n\n<pre><code>private static final Map&lt;String, String&gt; EXTENSION_TO_MIMETYPE =\n    Arrays.stream(new String[][] {\n        { \"txt\", \"text/plain\" }, \n        { \"html\", \"text/html\" }, \n        { \"js\", \"application/javascript\" },\n        { \"css\", \"text/css\" },\n        { \"xml\", \"application/xml\" },\n        { \"png\", \"image/png\" }, \n        { \"gif\", \"image/gif\" }, \n        { \"jpg\", \"image/jpeg\" },\n        { \"jpeg\", \"image/jpeg\" }, \n        { \"svg\", \"image/svg+xml\" },\n    }).collect(Collectors.toMap(kv -&gt; kv[0], kv -&gt; kv[1]));\n</code></pre>\n\n<p>Edit: to initialize a <code>Map&lt;Integer, String&gt;</code> as in the question, you'd need something like this:</p>\n\n<pre><code>static final Map&lt;Integer, String&gt; MY_MAP = Arrays.stream(new Object[][]{\n        {1, \"one\"},\n        {2, \"two\"},\n}).collect(Collectors.toMap(kv -&gt; (Integer) kv[0], kv -&gt; (String) kv[1]));\n</code></pre>\n\n<p>Edit(2): There is a better, mixed-type-capable version by i_am_zero that uses a stream of <code>new SimpleEntry&lt;&gt;(k, v)</code> calls. Check out that answer: <a href=\"https://stackoverflow.com/a/37384773/3950982\">https://stackoverflow.com/a/37384773/3950982</a></p>\n"},{"tags":[],"owner":{"account_id":2767605,"reputation":196,"user_id":2382934,"display_name":"Jim Daehn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1422481265,"creation_date":1422480925,"answer_id":28202853,"question_id":507602,"body_markdown":"I like using the static initializer &quot;technique&quot; when I have a concrete realization of an abstract class that has defined an initializing constructor but no default constructor but I want my subclass to have a default constructor.\r\n\r\nFor example:\r\n\r\n    public abstract class Shape {\r\n\r\n        public static final String COLOR_KEY = &quot;color_key&quot;;\r\n        public static final String OPAQUE_KEY = &quot;opaque_key&quot;;\r\n\r\n        private final String color;\r\n        private final Boolean opaque;\r\n\r\n        /**\r\n         * Initializing constructor - note no default constructor.\r\n         *\r\n         * @param properties a collection of Shape properties\r\n         */\r\n        public Shape(Map&lt;String, Object&gt; properties) {\r\n            color = ((String) properties.getOrDefault(COLOR_KEY, &quot;black&quot;));\r\n            opaque = (Boolean) properties.getOrDefault(OPAQUE_KEY, false);\r\n        }\r\n\r\n        /**\r\n         * Color property accessor method.\r\n         *\r\n         * @return the color of this Shape\r\n         */\r\n        public String getColor() {\r\n            return color;\r\n        }\r\n\r\n        /**\r\n         * Opaque property accessor method.\r\n         *\r\n         * @return true if this Shape is opaque, false otherwise\r\n         */\r\n        public Boolean isOpaque() {\r\n            return opaque;\r\n        }\r\n    }\r\n\r\nand my concrete realization of this class -- but it wants/needs a default constructor:\r\n\r\n    public class SquareShapeImpl extends Shape {\r\n\r\n        private static final Map&lt;String, Object&gt; DEFAULT_PROPS = new HashMap&lt;&gt;();\r\n\r\n        static {\r\n            DEFAULT_PROPS.put(Shape.COLOR_KEY, &quot;yellow&quot;);\r\n            DEFAULT_PROPS.put(Shape.OPAQUE_KEY, false);\r\n        }\r\n\r\n        /**\r\n         * Default constructor -- intializes this square to be a translucent yellow\r\n         */\r\n        public SquareShapeImpl() {\r\n            // the static initializer was useful here because the call to \r\n            // this(...) must be the first statement in this constructor\r\n            // i.e., we can&#39;t be mucking around and creating a map here\r\n            this(DEFAULT_PROPS);\r\n        }\r\n\r\n        /**\r\n         * Initializing constructor -- create a Square with the given\r\n         * collection of properties.\r\n         *\r\n         * @param props a collection of properties for this SquareShapeImpl\r\n         */\r\n        public SquareShapeImpl(Map&lt;String, Object&gt; props) {\r\n            super(props);\r\n        }\r\n    }\r\n\r\nthen to use this default constructor, we simply do:\r\n\r\n    public class StaticInitDemo {\r\n    \r\n        public static void main(String[] args) {\r\n\r\n            // create a translucent, yellow square...\r\n            Shape defaultSquare = new SquareShapeImpl();\r\n\r\n            // etc...\r\n        }\r\n    }\r\n","title":"How can I initialise a static Map?","body":"<p>I like using the static initializer \"technique\" when I have a concrete realization of an abstract class that has defined an initializing constructor but no default constructor but I want my subclass to have a default constructor.</p>\n\n<p>For example:</p>\n\n<pre><code>public abstract class Shape {\n\n    public static final String COLOR_KEY = \"color_key\";\n    public static final String OPAQUE_KEY = \"opaque_key\";\n\n    private final String color;\n    private final Boolean opaque;\n\n    /**\n     * Initializing constructor - note no default constructor.\n     *\n     * @param properties a collection of Shape properties\n     */\n    public Shape(Map&lt;String, Object&gt; properties) {\n        color = ((String) properties.getOrDefault(COLOR_KEY, \"black\"));\n        opaque = (Boolean) properties.getOrDefault(OPAQUE_KEY, false);\n    }\n\n    /**\n     * Color property accessor method.\n     *\n     * @return the color of this Shape\n     */\n    public String getColor() {\n        return color;\n    }\n\n    /**\n     * Opaque property accessor method.\n     *\n     * @return true if this Shape is opaque, false otherwise\n     */\n    public Boolean isOpaque() {\n        return opaque;\n    }\n}\n</code></pre>\n\n<p>and my concrete realization of this class -- but it wants/needs a default constructor:</p>\n\n<pre><code>public class SquareShapeImpl extends Shape {\n\n    private static final Map&lt;String, Object&gt; DEFAULT_PROPS = new HashMap&lt;&gt;();\n\n    static {\n        DEFAULT_PROPS.put(Shape.COLOR_KEY, \"yellow\");\n        DEFAULT_PROPS.put(Shape.OPAQUE_KEY, false);\n    }\n\n    /**\n     * Default constructor -- intializes this square to be a translucent yellow\n     */\n    public SquareShapeImpl() {\n        // the static initializer was useful here because the call to \n        // this(...) must be the first statement in this constructor\n        // i.e., we can't be mucking around and creating a map here\n        this(DEFAULT_PROPS);\n    }\n\n    /**\n     * Initializing constructor -- create a Square with the given\n     * collection of properties.\n     *\n     * @param props a collection of properties for this SquareShapeImpl\n     */\n    public SquareShapeImpl(Map&lt;String, Object&gt; props) {\n        super(props);\n    }\n}\n</code></pre>\n\n<p>then to use this default constructor, we simply do:</p>\n\n<pre><code>public class StaticInitDemo {\n\n    public static void main(String[] args) {\n\n        // create a translucent, yellow square...\n        Shape defaultSquare = new SquareShapeImpl();\n\n        // etc...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2243116,"reputation":5530,"user_id":1977151,"accept_rate":40,"display_name":"Vlasec"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1546876798,"creation_date":1432113227,"answer_id":30345279,"question_id":507602,"body_markdown":"I&#39;ve read the answers and i decided to write my own map builder. Feel free to copy-paste and enjoy.\r\n\r\n    import java.util.Collections;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    /**\r\n     * A tool for easy creation of a map. Code example:&lt;br/&gt;\r\n     * {@code MapBuilder.of(&quot;name&quot;, &quot;Forrest&quot;).and(&quot;surname&quot;, &quot;Gump&quot;).build()}\r\n     * @param &lt;K&gt; key type (inferred by constructor)\r\n     * @param &lt;V&gt; value type (inferred by constructor)\r\n     * @author Vlasec (for http://stackoverflow.com/a/30345279/1977151)\r\n     */\r\n    public class MapBuilder &lt;K, V&gt; {\r\n        private Map&lt;K, V&gt; map = new HashMap&lt;&gt;();\r\n    \r\n        /** Constructor that also enters the first entry. */\r\n        private MapBuilder(K key, V value) {\r\n            and(key, value);\r\n        }\r\n    \r\n        /** Factory method that creates the builder and enters the first entry. */\r\n        public static &lt;A, B&gt; MapBuilder&lt;A, B&gt; mapOf(A key, B value) {\r\n            return new MapBuilder&lt;&gt;(key, value);\r\n        }\r\n\r\n        /** Puts the key-value pair to the map and returns itself for method chaining */\r\n        public MapBuilder&lt;K, V&gt; and(K key, V value) {\r\n            map.put(key, value);\r\n            return this;\r\n        }\r\n    \r\n        /**\r\n         * If no reference to builder is kept and both the key and value types are immutable,\r\n         * the resulting map is immutable.\r\n         * @return contents of MapBuilder as an unmodifiable map.\r\n         */\r\n        public Map&lt;K, V&gt; build() {\r\n            return Collections.unmodifiableMap(map);\r\n        }\r\n    }\r\n\r\nEDIT: Lately, I keep finding public static method `of` pretty often and I kinda like it. I added it into the code and made the constructor private, thus switching to static factory method pattern.\r\n\r\nEDIT2: Even more recently, I no longer like static method called `of`, as it looks pretty bad when using static imports. I renamed it to `mapOf` instead, making it more suitable for static imports.","title":"How can I initialise a static Map?","body":"<p>I've read the answers and i decided to write my own map builder. Feel free to copy-paste and enjoy.</p>\n\n<pre><code>import java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Map;\n\n/**\n * A tool for easy creation of a map. Code example:&lt;br/&gt;\n * {@code MapBuilder.of(\"name\", \"Forrest\").and(\"surname\", \"Gump\").build()}\n * @param &lt;K&gt; key type (inferred by constructor)\n * @param &lt;V&gt; value type (inferred by constructor)\n * @author Vlasec (for http://stackoverflow.com/a/30345279/1977151)\n */\npublic class MapBuilder &lt;K, V&gt; {\n    private Map&lt;K, V&gt; map = new HashMap&lt;&gt;();\n\n    /** Constructor that also enters the first entry. */\n    private MapBuilder(K key, V value) {\n        and(key, value);\n    }\n\n    /** Factory method that creates the builder and enters the first entry. */\n    public static &lt;A, B&gt; MapBuilder&lt;A, B&gt; mapOf(A key, B value) {\n        return new MapBuilder&lt;&gt;(key, value);\n    }\n\n    /** Puts the key-value pair to the map and returns itself for method chaining */\n    public MapBuilder&lt;K, V&gt; and(K key, V value) {\n        map.put(key, value);\n        return this;\n    }\n\n    /**\n     * If no reference to builder is kept and both the key and value types are immutable,\n     * the resulting map is immutable.\n     * @return contents of MapBuilder as an unmodifiable map.\n     */\n    public Map&lt;K, V&gt; build() {\n        return Collections.unmodifiableMap(map);\n    }\n}\n</code></pre>\n\n<p>EDIT: Lately, I keep finding public static method <code>of</code> pretty often and I kinda like it. I added it into the code and made the constructor private, thus switching to static factory method pattern.</p>\n\n<p>EDIT2: Even more recently, I no longer like static method called <code>of</code>, as it looks pretty bad when using static imports. I renamed it to <code>mapOf</code> instead, making it more suitable for static imports.</p>\n"},{"tags":[],"owner":{"account_id":2538632,"reputation":374,"user_id":2703399,"display_name":"josh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1433364389,"creation_date":1433364389,"answer_id":30630355,"question_id":507602,"body_markdown":"I have not seen the approach I use (and have grown to like) posted in any answers, so here it is:\r\n\r\nI don&#39;t like using static initializers because they are clunky,\r\nand I don&#39;t like anonymous classes because it is creating a new class for each instance.\r\n\r\ninstead, I prefer initialization that looks like this:\r\n\r\n    map(\r\n        entry(&quot;keyA&quot;, &quot;val1&quot;),\r\n        entry(&quot;keyB&quot;, &quot;val2&quot;),\r\n        entry(&quot;keyC&quot;, &quot;val3&quot;)\r\n    );\r\n\r\nunfortunately, these methods are not part of the standard Java library,\r\nso you will need to create (or use) a utility library that defines the following methods:\r\n\r\n     public static &lt;K,V&gt; Map&lt;K,V&gt; map(Map.Entry&lt;K, ? extends V&gt;... entries)\r\n     public static &lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K key, V val)\r\n\r\n(you can use &#39;import static&#39; to avoid needing to prefix the method&#39;s name)\r\n\r\nI found it useful to provide similar static methods for the other collections (list, set, sortedSet, sortedMap, etc.)\r\n\r\nIts not quite as nice as json object initialization, but it&#39;s a step in that direction, as far as readability is concerned.","title":"How can I initialise a static Map?","body":"<p>I have not seen the approach I use (and have grown to like) posted in any answers, so here it is:</p>\n\n<p>I don't like using static initializers because they are clunky,\nand I don't like anonymous classes because it is creating a new class for each instance.</p>\n\n<p>instead, I prefer initialization that looks like this:</p>\n\n<pre><code>map(\n    entry(\"keyA\", \"val1\"),\n    entry(\"keyB\", \"val2\"),\n    entry(\"keyC\", \"val3\")\n);\n</code></pre>\n\n<p>unfortunately, these methods are not part of the standard Java library,\nso you will need to create (or use) a utility library that defines the following methods:</p>\n\n<pre><code> public static &lt;K,V&gt; Map&lt;K,V&gt; map(Map.Entry&lt;K, ? extends V&gt;... entries)\n public static &lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K key, V val)\n</code></pre>\n\n<p>(you can use 'import static' to avoid needing to prefix the method's name)</p>\n\n<p>I found it useful to provide similar static methods for the other collections (list, set, sortedSet, sortedMap, etc.)</p>\n\n<p>Its not quite as nice as json object initialization, but it's a step in that direction, as far as readability is concerned.</p>\n"},{"tags":[],"owner":{"account_id":329814,"reputation":11000,"user_id":653539,"accept_rate":50,"display_name":"Tom&#225;š Z&#225;lusk&#253;"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1438877430,"creation_date":1438877430,"answer_id":31860743,"question_id":507602,"body_markdown":"In Java 8, procedural approach can also be wrapped in `Supplier`:\r\n\r\n    Map&lt;String,String&gt; m = ((Supplier&lt;Map&lt;String,String&gt;&gt;)(() -&gt; {\r\n        Map&lt;String,String&gt; result = new HashMap&lt;&gt;();\r\n        result.put(&quot;foo&quot;,&quot;hoo&quot;);\r\n        ...\r\n        return result;\r\n    )).get();\r\n\r\nIt&#39;s only hypothetical way but can come handy if you really need one-liner.","title":"How can I initialise a static Map?","body":"<p>In Java 8, procedural approach can also be wrapped in <code>Supplier</code>:</p>\n\n<pre><code>Map&lt;String,String&gt; m = ((Supplier&lt;Map&lt;String,String&gt;&gt;)(() -&gt; {\n    Map&lt;String,String&gt; result = new HashMap&lt;&gt;();\n    result.put(\"foo\",\"hoo\");\n    ...\n    return result;\n)).get();\n</code></pre>\n\n<p>It's only hypothetical way but can come handy if you really need one-liner.</p>\n"},{"tags":[],"owner":{"account_id":2720760,"reputation":2190,"user_id":2347107,"accept_rate":79,"display_name":"agad"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1480319273,"creation_date":1441704729,"answer_id":32454155,"question_id":507602,"body_markdown":"As usual apache-commons has proper method [MapUtils.putAll(Map&lt;K, V&gt;, Object[])][1]:\r\n\r\nFor example, to create a color map: \r\n \r\n\r\n    Map&lt;String, String&gt; colorMap = MapUtils.putAll(new HashMap&lt;String, String&gt;(), new String[][] {\r\n         {&quot;RED&quot;, &quot;#FF0000&quot;},\r\n         {&quot;GREEN&quot;, &quot;#00FF00&quot;},\r\n         {&quot;BLUE&quot;, &quot;#0000FF&quot;}\r\n     });\r\n\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/MapUtils.html#putAll(java.util.Map,%20java.lang.Object[])","title":"How can I initialise a static Map?","body":"<p>As usual apache-commons has proper method <a href=\"https://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/MapUtils.html#putAll(java.util.Map,%20java.lang.Object[])\" rel=\"noreferrer\">MapUtils.putAll(Map, Object[])</a>:</p>\n\n<p>For example, to create a color map: </p>\n\n<pre><code>Map&lt;String, String&gt; colorMap = MapUtils.putAll(new HashMap&lt;String, String&gt;(), new String[][] {\n     {\"RED\", \"#FF0000\"},\n     {\"GREEN\", \"#00FF00\"},\n     {\"BLUE\", \"#0000FF\"}\n });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1013289,"reputation":7583,"user_id":1025411,"display_name":"zrvan"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1466673244,"creation_date":1447979184,"answer_id":33816920,"question_id":507602,"body_markdown":"With Java 8 I&#39;ve come to use the following pattern:\r\n\r\n    private static final Map&lt;String, Integer&gt; MAP = Stream.of(\r\n        new AbstractMap.SimpleImmutableEntry&lt;&gt;(&quot;key1&quot;, 1),\r\n        new AbstractMap.SimpleImmutableEntry&lt;&gt;(&quot;key2&quot;, 2)\r\n    ).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n\r\nIt&#39;s not the most terse and a bit roundabout, but\r\n\r\n- it doesn&#39;t require anything outside of `java.util`\r\n- it&#39;s typesafe and easily accommodates different types for key and value. ","title":"How can I initialise a static Map?","body":"<p>With Java 8 I've come to use the following pattern:</p>\n\n<pre><code>private static final Map&lt;String, Integer&gt; MAP = Stream.of(\n    new AbstractMap.SimpleImmutableEntry&lt;&gt;(\"key1\", 1),\n    new AbstractMap.SimpleImmutableEntry&lt;&gt;(\"key2\", 2)\n).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n</code></pre>\n\n<p>It's not the most terse and a bit roundabout, but</p>\n\n<ul>\n<li>it doesn't require anything outside of <code>java.util</code></li>\n<li>it's typesafe and easily accommodates different types for key and value. </li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":1,"up_vote_count":79,"is_accepted":false,"score":78,"last_activity_date":1576552156,"creation_date":1451383644,"answer_id":34508760,"question_id":507602,"body_markdown":"# `Map.of` in Java 9+\r\n\r\n    private static final Map&lt;Integer, String&gt; MY_MAP = Map.of(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n\r\nSee [JEP 269](http://openjdk.java.net/jeps/269) for details. JDK 9 reached [general availability][1] in September 2017. \r\n\r\n  [1]: http://jdk.java.net/9/","title":"How can I initialise a static Map?","body":"<h1><code>Map.of</code> in Java 9+</h1>\n\n<pre><code>private static final Map&lt;Integer, String&gt; MY_MAP = Map.of(1, \"one\", 2, \"two\");\n</code></pre>\n\n<p>See <a href=\"http://openjdk.java.net/jeps/269\" rel=\"noreferrer\">JEP 269</a> for details. JDK 9 reached <a href=\"http://jdk.java.net/9/\" rel=\"noreferrer\">general availability</a> in September 2017. </p>\n"},{"tags":[],"owner":{"account_id":149396,"reputation":11779,"user_id":361855,"accept_rate":58,"display_name":"Jason"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453998021,"creation_date":1453998021,"answer_id":35066601,"question_id":507602,"body_markdown":"There are some good answers here, but I do want to offer one more.\r\n\r\nCreate your own static method to create and initialize a `Map`. I have my own `CollectionUtils` class in a package that I use across projects with various utilities that I use regularly that are easy for me to write and avoids the need for a dependency on some larger library.\r\n\r\nHere&#39;s my `newMap` method:\r\n\r\n    public class CollectionUtils {\r\n        public static Map newMap(Object... keyValuePairs) {\r\n            Map map = new HashMap();\r\n            if ( keyValuePairs.length % 2 == 1 ) throw new IllegalArgumentException(&quot;Must have even number of arguments&quot;);\r\n            for ( int i=0; i&lt;keyValuePairs.length; i+=2 ) {\r\n                map.put(keyValuePairs[i], keyValuePairs[i + 1]);\r\n            }\r\n            return map;\r\n        }\r\n    }\r\n\r\nUsage:\r\n\r\n    import static CollectionUtils.newMap;\r\n    // ...\r\n    Map aMap = newMap(&quot;key1&quot;, 1.23, &quot;key2&quot;, 2.34);\r\n    Map bMap = newMap(objKey1, objVal1, objKey2, objVal2, objKey3, objVal3);\r\n    // etc...\r\n\r\nIt doesn&#39;t make use of generics, but you can typecast the map as you wish (just be sure you typecast it correctly!)\r\n\r\n    Map&lt;String,Double&gt; aMap = (Map&lt;String,Double&gt;)newMap(&quot;key1&quot;, 1.23, &quot;key2&quot;, 2.34);\r\n","title":"How can I initialise a static Map?","body":"<p>There are some good answers here, but I do want to offer one more.</p>\n\n<p>Create your own static method to create and initialize a <code>Map</code>. I have my own <code>CollectionUtils</code> class in a package that I use across projects with various utilities that I use regularly that are easy for me to write and avoids the need for a dependency on some larger library.</p>\n\n<p>Here's my <code>newMap</code> method:</p>\n\n<pre><code>public class CollectionUtils {\n    public static Map newMap(Object... keyValuePairs) {\n        Map map = new HashMap();\n        if ( keyValuePairs.length % 2 == 1 ) throw new IllegalArgumentException(\"Must have even number of arguments\");\n        for ( int i=0; i&lt;keyValuePairs.length; i+=2 ) {\n            map.put(keyValuePairs[i], keyValuePairs[i + 1]);\n        }\n        return map;\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>import static CollectionUtils.newMap;\n// ...\nMap aMap = newMap(\"key1\", 1.23, \"key2\", 2.34);\nMap bMap = newMap(objKey1, objVal1, objKey2, objVal2, objKey3, objVal3);\n// etc...\n</code></pre>\n\n<p>It doesn't make use of generics, but you can typecast the map as you wish (just be sure you typecast it correctly!)</p>\n\n<pre><code>Map&lt;String,Double&gt; aMap = (Map&lt;String,Double&gt;)newMap(\"key1\", 1.23, \"key2\", 2.34);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1456523615,"creation_date":1456523615,"answer_id":35662460,"question_id":507602,"body_markdown":"Because Java does not support map literals, map instances must always be explicitly instantiated and populated.\r\n\r\nFortunately, it is possible to approximate the behavior of map literals in Java using ***factory methods***. \r\n\r\n***For example:***\r\n\r\n    public class LiteralMapFactory {\r\n    \r\n        // Creates a map from a list of entries\r\n        @SafeVarargs\r\n        public static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Map.Entry&lt;K, V&gt;... entries) {\r\n            LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\r\n            for (Map.Entry&lt;K, V&gt; entry : entries) {\r\n                map.put(entry.getKey(), entry.getValue());\r\n            }\r\n            return map;\r\n        }\r\n        // Creates a map entry\r\n        public static &lt;K, V&gt; Map.Entry&lt;K, V&gt; entry(K key, V value) {\r\n            return new AbstractMap.SimpleEntry&lt;&gt;(key, value);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(mapOf(entry(&quot;a&quot;, 1), entry(&quot;b&quot;, 2), entry(&quot;c&quot;, 3)));\r\n        }\r\n    }\r\n\r\n***Output:***\r\n\r\n&gt;{a=1, b=2, c=3}\r\n\r\nIt is a lot more convenient than creating and populating the map an element at a time.","title":"How can I initialise a static Map?","body":"<p>Because Java does not support map literals, map instances must always be explicitly instantiated and populated.</p>\n\n<p>Fortunately, it is possible to approximate the behavior of map literals in Java using <strong><em>factory methods</em></strong>. </p>\n\n<p><strong><em>For example:</em></strong></p>\n\n<pre><code>public class LiteralMapFactory {\n\n    // Creates a map from a list of entries\n    @SafeVarargs\n    public static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Map.Entry&lt;K, V&gt;... entries) {\n        LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\n        for (Map.Entry&lt;K, V&gt; entry : entries) {\n            map.put(entry.getKey(), entry.getValue());\n        }\n        return map;\n    }\n    // Creates a map entry\n    public static &lt;K, V&gt; Map.Entry&lt;K, V&gt; entry(K key, V value) {\n        return new AbstractMap.SimpleEntry&lt;&gt;(key, value);\n    }\n\n    public static void main(String[] args) {\n        System.out.println(mapOf(entry(\"a\", 1), entry(\"b\", 2), entry(\"c\", 3)));\n    }\n}\n</code></pre>\n\n<p><strong><em>Output:</em></strong></p>\n\n<blockquote>\n  <p>{a=1, b=2, c=3}</p>\n</blockquote>\n\n<p>It is a lot more convenient than creating and populating the map an element at a time.</p>\n"},{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1460302673,"creation_date":1460300932,"answer_id":36531434,"question_id":507602,"body_markdown":"[JEP 269][1] provides some convenience factory methods for Collections API. This factory methods are not in current Java version, which is 8, but are planned for Java 9 release. \r\n\r\nFor `Map` there are two factory methods: `of` and `ofEntries`. Using `of`, you can pass alternating key/value pairs. For example, in order to create a `Map` like `{age: 27, major: cs}`:\r\n\r\n    Map&lt;String, Object&gt; info = Map.of(&quot;age&quot;, 27, &quot;major&quot;, &quot;cs&quot;);\r\nCurrently there are ten overloaded versions for `of`, so you can create a map containing ten key/value pairs. If you don&#39;t like this limitation or alternating key/values, you can use `ofEntries`:\r\n\r\n    Map&lt;String, Object&gt; info = Map.ofEntries(\r\n                    Map.entry(&quot;age&quot;, 27),\r\n                    Map.entry(&quot;major&quot;, &quot;cs&quot;)\r\n    );\r\nBoth `of` and `ofEntries` will return an immutable `Map`, so you can&#39;t change their elements after construction. You can try out these features using [JDK 9 Early Access][2].\r\n\r\n\r\n  [1]: http://openjdk.java.net/jeps/269\r\n  [2]: https://jdk9.java.net/jigsaw/","title":"How can I initialise a static Map?","body":"<p><a href=\"http://openjdk.java.net/jeps/269\" rel=\"nofollow\">JEP 269</a> provides some convenience factory methods for Collections API. This factory methods are not in current Java version, which is 8, but are planned for Java 9 release. </p>\n\n<p>For <code>Map</code> there are two factory methods: <code>of</code> and <code>ofEntries</code>. Using <code>of</code>, you can pass alternating key/value pairs. For example, in order to create a <code>Map</code> like <code>{age: 27, major: cs}</code>:</p>\n\n<pre><code>Map&lt;String, Object&gt; info = Map.of(\"age\", 27, \"major\", \"cs\");\n</code></pre>\n\n<p>Currently there are ten overloaded versions for <code>of</code>, so you can create a map containing ten key/value pairs. If you don't like this limitation or alternating key/values, you can use <code>ofEntries</code>:</p>\n\n<pre><code>Map&lt;String, Object&gt; info = Map.ofEntries(\n                Map.entry(\"age\", 27),\n                Map.entry(\"major\", \"cs\")\n);\n</code></pre>\n\n<p>Both <code>of</code> and <code>ofEntries</code> will return an immutable <code>Map</code>, so you can't change their elements after construction. You can try out these features using <a href=\"https://jdk9.java.net/jigsaw/\" rel=\"nofollow\">JDK 9 Early Access</a>.</p>\n"},{"tags":[],"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"down_vote_count":1,"up_vote_count":64,"is_accepted":false,"score":63,"last_activity_date":1639651595,"creation_date":1463987828,"answer_id":37384773,"question_id":507602,"body_markdown":"Java 9\r\n------\r\n\r\nWe can use [`Map.ofEntries`][1], calling [`Map.entry( k , v )`][2] to create each entry.\r\n\r\n    import static java.util.Map.entry;\r\n    private static final Map&lt;Integer,String&gt; map = Map.ofEntries(\r\n            entry(1, &quot;one&quot;),\r\n            entry(2, &quot;two&quot;),\r\n            entry(3, &quot;three&quot;),\r\n            entry(4, &quot;four&quot;),\r\n            entry(5, &quot;five&quot;),\r\n            entry(6, &quot;six&quot;),\r\n            entry(7, &quot;seven&quot;),\r\n            entry(8, &quot;eight&quot;),\r\n            entry(9, &quot;nine&quot;),\r\n            entry(10, &quot;ten&quot;));\r\n\r\nWe can also use `Map.of` as suggested by Tagir in his answer [here][3] but we cannot have more than 10 entries using `Map.of`.\r\n\r\nJava 8 \r\n------\r\n\r\nWe can create a Stream of map entries. We already have two implementations of `Entry` in `java.util.AbstractMap` which are [SimpleEntry][4] and [SimpleImmutableEntry][5]. For this example we can make use of former as:\r\n\r\n    import java.util.AbstractMap.*;\r\n    private static final Map&lt;Integer, String&gt; myMap = Stream.of(\r\n                new SimpleEntry&lt;&gt;(1, &quot;one&quot;),\r\n                new SimpleEntry&lt;&gt;(2, &quot;two&quot;),\r\n                new SimpleEntry&lt;&gt;(3, &quot;three&quot;),\r\n                new SimpleEntry&lt;&gt;(4, &quot;four&quot;),\r\n                new SimpleEntry&lt;&gt;(5, &quot;five&quot;),\r\n                new SimpleEntry&lt;&gt;(6, &quot;six&quot;),\r\n                new SimpleEntry&lt;&gt;(7, &quot;seven&quot;),\r\n                new SimpleEntry&lt;&gt;(8, &quot;eight&quot;),\r\n                new SimpleEntry&lt;&gt;(9, &quot;nine&quot;),\r\n                new SimpleEntry&lt;&gt;(10, &quot;ten&quot;))\r\n                .collect(Collectors.toMap(SimpleEntry::getKey, SimpleEntry::getValue));\r\n                \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#ofEntries(java.util.Map.Entry...)\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#entry(K,V)\r\n  [3]: https://stackoverflow.com/a/34508760/1216775\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/util/AbstractMap.SimpleEntry.html\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/index.html?java/util/AbstractMap.SimpleImmutableEntry.html","title":"How can I initialise a static Map?","body":"<h2>Java 9</h2>\n<p>We can use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#ofEntries(java.util.Map.Entry...)\" rel=\"noreferrer\"><code>Map.ofEntries</code></a>, calling <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#entry(K,V)\" rel=\"noreferrer\"><code>Map.entry( k , v )</code></a> to create each entry.</p>\n<pre><code>import static java.util.Map.entry;\nprivate static final Map&lt;Integer,String&gt; map = Map.ofEntries(\n        entry(1, &quot;one&quot;),\n        entry(2, &quot;two&quot;),\n        entry(3, &quot;three&quot;),\n        entry(4, &quot;four&quot;),\n        entry(5, &quot;five&quot;),\n        entry(6, &quot;six&quot;),\n        entry(7, &quot;seven&quot;),\n        entry(8, &quot;eight&quot;),\n        entry(9, &quot;nine&quot;),\n        entry(10, &quot;ten&quot;));\n</code></pre>\n<p>We can also use <code>Map.of</code> as suggested by Tagir in his answer <a href=\"https://stackoverflow.com/a/34508760/1216775\">here</a> but we cannot have more than 10 entries using <code>Map.of</code>.</p>\n<h2>Java 8</h2>\n<p>We can create a Stream of map entries. We already have two implementations of <code>Entry</code> in <code>java.util.AbstractMap</code> which are <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/AbstractMap.SimpleEntry.html\" rel=\"noreferrer\">SimpleEntry</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/index.html?java/util/AbstractMap.SimpleImmutableEntry.html\" rel=\"noreferrer\">SimpleImmutableEntry</a>. For this example we can make use of former as:</p>\n<pre><code>import java.util.AbstractMap.*;\nprivate static final Map&lt;Integer, String&gt; myMap = Stream.of(\n            new SimpleEntry&lt;&gt;(1, &quot;one&quot;),\n            new SimpleEntry&lt;&gt;(2, &quot;two&quot;),\n            new SimpleEntry&lt;&gt;(3, &quot;three&quot;),\n            new SimpleEntry&lt;&gt;(4, &quot;four&quot;),\n            new SimpleEntry&lt;&gt;(5, &quot;five&quot;),\n            new SimpleEntry&lt;&gt;(6, &quot;six&quot;),\n            new SimpleEntry&lt;&gt;(7, &quot;seven&quot;),\n            new SimpleEntry&lt;&gt;(8, &quot;eight&quot;),\n            new SimpleEntry&lt;&gt;(9, &quot;nine&quot;),\n            new SimpleEntry&lt;&gt;(10, &quot;ten&quot;))\n            .collect(Collectors.toMap(SimpleEntry::getKey, SimpleEntry::getValue));\n            \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7660,"reputation":15986,"user_id":13365,"accept_rate":70,"display_name":"neu242"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1606391468,"creation_date":1473941383,"answer_id":39510693,"question_id":507602,"body_markdown":"Here&#39;s my favorite if I \r\n  * don&#39;t want to (or cannot) use Guava&#39;s `ImmutableMap.of()`\r\n  * or I need a mutable `Map`\r\n  * or I need more than the 10 entry limit in `Map.of()` from JDK9+\r\n\r\n```\r\npublic static &lt;A&gt; Map&lt;String, A&gt; asMap(Object... keysAndValues) {\r\n  return new LinkedHashMap&lt;String, A&gt;() {{\r\n    for (int i = 0; i &lt; keysAndValues.length - 1; i++) {\r\n      put(keysAndValues[i].toString(), (A) keysAndValues[++i]);\r\n    }\r\n  }};\r\n}\r\n```\r\nIt&#39;s very compact, and it ignores stray values (i.e. a final key without a value).\r\n\r\nUsage:\r\n\r\n    Map&lt;String, String&gt; one = asMap(&quot;1stKey&quot;, &quot;1stVal&quot;, &quot;2ndKey&quot;, &quot;2ndVal&quot;);\r\n    Map&lt;String, Object&gt; two = asMap(&quot;1stKey&quot;, Boolean.TRUE, &quot;2ndKey&quot;, new Integer(2));","title":"How can I initialise a static Map?","body":"<p>Here's my favorite if I</p>\n<ul>\n<li>don't want to (or cannot) use Guava's <code>ImmutableMap.of()</code></li>\n<li>or I need a mutable <code>Map</code></li>\n<li>or I need more than the 10 entry limit in <code>Map.of()</code> from JDK9+</li>\n</ul>\n<pre><code>public static &lt;A&gt; Map&lt;String, A&gt; asMap(Object... keysAndValues) {\n  return new LinkedHashMap&lt;String, A&gt;() {{\n    for (int i = 0; i &lt; keysAndValues.length - 1; i++) {\n      put(keysAndValues[i].toString(), (A) keysAndValues[++i]);\n    }\n  }};\n}\n</code></pre>\n<p>It's very compact, and it ignores stray values (i.e. a final key without a value).</p>\n<p>Usage:</p>\n<pre><code>Map&lt;String, String&gt; one = asMap(&quot;1stKey&quot;, &quot;1stVal&quot;, &quot;2ndKey&quot;, &quot;2ndVal&quot;);\nMap&lt;String, Object&gt; two = asMap(&quot;1stKey&quot;, Boolean.TRUE, &quot;2ndKey&quot;, new Integer(2));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673926665,"creation_date":1480375020,"answer_id":40855194,"question_id":507602,"body_markdown":"Here is the code by [abacus-common][1]\r\n\r\n    \r\n    Map&lt;Integer, String&gt; map = N.asMap(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n    // Or for Immutable map \r\n    ImmutableMap&lt;Integer, String&gt; = ImmutableMap.of(1, &quot;one&quot;, 2, &quot;two&quot;);\r\n\r\nDeclaration： I&#39;m the developer of abacus-common.\r\n\r\n  [1]: https://github.com/landawn/AbacusUtil","title":"How can I initialise a static Map?","body":"<p>Here is the code by <a href=\"https://github.com/landawn/AbacusUtil\" rel=\"nofollow noreferrer\">abacus-common</a></p>\n<pre><code>Map&lt;Integer, String&gt; map = N.asMap(1, &quot;one&quot;, 2, &quot;two&quot;);\n// Or for Immutable map \nImmutableMap&lt;Integer, String&gt; = ImmutableMap.of(1, &quot;one&quot;, 2, &quot;two&quot;);\n</code></pre>\n<p>Declaration： I'm the developer of abacus-common.</p>\n"},{"tags":[],"owner":{"account_id":8244404,"reputation":306,"user_id":6201033,"display_name":"Alex Butler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480468569,"creation_date":1480468569,"answer_id":40878647,"question_id":507602,"body_markdown":"Even with Guava&#39;s nice ImmutableMap class, sometimes I&#39;d like to build a mutable map fluently. Finding myself wanting to avoid static blocks &amp; the anonymous subtype thing, when Java 8 came along I wrote a tiny library to help called [Fluent](https://github.com/alexheretic/fluent).\r\n\r\n    // simple usage, assuming someMap is a Map&lt;String, String&gt; already declared\r\n    Map&lt;String, String&gt; example = new Fluent.HashMap&lt;String, String&gt;()\r\n        .append(&quot;key1&quot;, &quot;val1&quot;)\r\n        .append(&quot;key2&quot;, &quot;val2&quot;)\r\n        .appendAll(someMap);\r\n\r\nWith Java 8 interface defaulting I could implement the Fluent.Map methods for all standard Java Map implementations (ie HashMap, ConcurrentSkipListMap, ... etc) without tedious repetition.\r\n\r\nUnmodifiable maps are simple too.\r\n\r\n    Map&lt;String, Integer&gt; immutable = new Fluent.LinkedHashMap&lt;String, Integer&gt;()\r\n        .append(&quot;one&quot;, 1)\r\n        .append(&quot;two&quot;, 2)\r\n        .append(&quot;three&quot;, 3)\r\n        .unmodifiable();\r\n\r\nSee https://github.com/alexheretic/fluent for source, documentation and examples.\r\n","title":"How can I initialise a static Map?","body":"<p>Even with Guava's nice ImmutableMap class, sometimes I'd like to build a mutable map fluently. Finding myself wanting to avoid static blocks &amp; the anonymous subtype thing, when Java 8 came along I wrote a tiny library to help called <a href=\"https://github.com/alexheretic/fluent\" rel=\"nofollow noreferrer\">Fluent</a>.</p>\n\n<pre><code>// simple usage, assuming someMap is a Map&lt;String, String&gt; already declared\nMap&lt;String, String&gt; example = new Fluent.HashMap&lt;String, String&gt;()\n    .append(\"key1\", \"val1\")\n    .append(\"key2\", \"val2\")\n    .appendAll(someMap);\n</code></pre>\n\n<p>With Java 8 interface defaulting I could implement the Fluent.Map methods for all standard Java Map implementations (ie HashMap, ConcurrentSkipListMap, ... etc) without tedious repetition.</p>\n\n<p>Unmodifiable maps are simple too.</p>\n\n<pre><code>Map&lt;String, Integer&gt; immutable = new Fluent.LinkedHashMap&lt;String, Integer&gt;()\n    .append(\"one\", 1)\n    .append(\"two\", 2)\n    .append(\"three\", 3)\n    .unmodifiable();\n</code></pre>\n\n<p>See <a href=\"https://github.com/alexheretic/fluent\" rel=\"nofollow noreferrer\">https://github.com/alexheretic/fluent</a> for source, documentation and examples.</p>\n"},{"tags":[],"owner":{"account_id":4708155,"reputation":245,"user_id":3809588,"accept_rate":75,"display_name":"Stromata"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1493587688,"creation_date":1493587688,"answer_id":43711510,"question_id":507602,"body_markdown":"If you only need to add one value to the map you can use [Collections.singletonMap][1]: \r\n\r\n    Map&lt;K, V&gt; map = Collections.singletonMap(key, value)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#singletonMap(K,%20V)","title":"How can I initialise a static Map?","body":"<p>If you only need to add one value to the map you can use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#singletonMap(K,%20V)\" rel=\"nofollow noreferrer\">Collections.singletonMap</a>: </p>\n\n<pre><code>Map&lt;K, V&gt; map = Collections.singletonMap(key, value)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1215286,"reputation":7830,"user_id":1183010,"accept_rate":80,"display_name":"R. Oosterholt"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1522939952,"creation_date":1495531762,"answer_id":44130916,"question_id":507602,"body_markdown":"Your second approach *(Double Brace initialization)* is thought to be an [anti pattern][1], so I would go for the first approach.\r\n\r\nAnother easy way to initialise a static Map is by using this utility function:\r\n\r\n\tpublic static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Object... keyValues) {\r\n\t\tMap&lt;K, V&gt; map = new HashMap&lt;&gt;(keyValues.length / 2);\r\n\r\n\t\tfor (int index = 0; index &lt; keyValues.length / 2; index++) {\r\n            map.put((K)keyValues[index * 2], (V)keyValues[index * 2 + 1]);\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\t}\r\n\r\n    Map&lt;Integer, String&gt; map1 = mapOf(1, &quot;value1&quot;, 2, &quot;value2&quot;);\r\n    Map&lt;String, String&gt; map2 = mapOf(&quot;key1&quot;, &quot;value1&quot;, &quot;key2&quot;, &quot;value2&quot;);\r\n\r\nNote: in `Java 9` you can use [Map.of][2]\r\n\r\n[1]: https://stackoverflow.com/q/1958636/1183010\r\n[2]: http://download.java.net/java/jdk9/docs/api/java/util/Map.html#of-K-V-","title":"How can I initialise a static Map?","body":"<p>Your second approach <em>(Double Brace initialization)</em> is thought to be an <a href=\"https://stackoverflow.com/q/1958636/1183010\">anti pattern</a>, so I would go for the first approach.</p>\n\n<p>Another easy way to initialise a static Map is by using this utility function:</p>\n\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Object... keyValues) {\n    Map&lt;K, V&gt; map = new HashMap&lt;&gt;(keyValues.length / 2);\n\n    for (int index = 0; index &lt; keyValues.length / 2; index++) {\n        map.put((K)keyValues[index * 2], (V)keyValues[index * 2 + 1]);\n    }\n\n    return map;\n}\n\nMap&lt;Integer, String&gt; map1 = mapOf(1, \"value1\", 2, \"value2\");\nMap&lt;String, String&gt; map2 = mapOf(\"key1\", \"value1\", \"key2\", \"value2\");\n</code></pre>\n\n<p>Note: in <code>Java 9</code> you can use <a href=\"http://download.java.net/java/jdk9/docs/api/java/util/Map.html#of-K-V-\" rel=\"nofollow noreferrer\">Map.of</a></p>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1499677750,"creation_date":1497979686,"answer_id":44659512,"question_id":507602,"body_markdown":"You may use [`StickyMap`](http://static.javadoc.io/org.cactoos/cactoos/0.10/org/cactoos/list/StickyMap.html) and [`MapEntry`](http://static.javadoc.io/org.cactoos/cactoos/0.10/org/cactoos/list/MapEntry.html) from [Cactoos](http://www.cactoos.org):\r\n\r\n    private static final Map&lt;String, String&gt; MAP = new StickyMap&lt;&gt;(\r\n      new MapEntry&lt;&gt;(&quot;name&quot;, &quot;Jeffrey&quot;),\r\n      new MapEntry&lt;&gt;(&quot;age&quot;, &quot;35&quot;)\r\n    );","title":"How can I initialise a static Map?","body":"<p>You may use <a href=\"http://static.javadoc.io/org.cactoos/cactoos/0.10/org/cactoos/list/StickyMap.html\" rel=\"nofollow noreferrer\"><code>StickyMap</code></a> and <a href=\"http://static.javadoc.io/org.cactoos/cactoos/0.10/org/cactoos/list/MapEntry.html\" rel=\"nofollow noreferrer\"><code>MapEntry</code></a> from <a href=\"http://www.cactoos.org\" rel=\"nofollow noreferrer\">Cactoos</a>:</p>\n\n<pre><code>private static final Map&lt;String, String&gt; MAP = new StickyMap&lt;&gt;(\n  new MapEntry&lt;&gt;(\"name\", \"Jeffrey\"),\n  new MapEntry&lt;&gt;(\"age\", \"35\")\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":947388,"reputation":921,"user_id":974355,"accept_rate":60,"display_name":"jglatre"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1508948893,"creation_date":1508948893,"answer_id":46937591,"question_id":507602,"body_markdown":"Well... I like enums ;)\r\n\r\n    enum MyEnum {\r\n        ONE   (1, &quot;one&quot;),\r\n        TWO   (2, &quot;two&quot;),\r\n        THREE (3, &quot;three&quot;);\r\n\r\n        int value;\r\n        String name;\r\n\r\n        MyEnum(int value, String name) {\r\n            this.value = value;\r\n            this.name = name;\r\n        }\r\n\r\n        static final Map&lt;Integer, String&gt; MAP = Stream.of( values() )\r\n                .collect( Collectors.toMap( e -&gt; e.value, e -&gt; e.name ) );\r\n    }\r\n","title":"How can I initialise a static Map?","body":"<p>Well... I like enums ;)</p>\n\n<pre><code>enum MyEnum {\n    ONE   (1, \"one\"),\n    TWO   (2, \"two\"),\n    THREE (3, \"three\");\n\n    int value;\n    String name;\n\n    MyEnum(int value, String name) {\n        this.value = value;\n        this.name = name;\n    }\n\n    static final Map&lt;Integer, String&gt; MAP = Stream.of( values() )\n            .collect( Collectors.toMap( e -&gt; e.value, e -&gt; e.name ) );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3427502,"reputation":699,"user_id":2872888,"display_name":"Bharanidharan K"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1511667516,"creation_date":1511667516,"answer_id":47492794,"question_id":507602,"body_markdown":"If you want unmodifiable map, finally java 9 added a cool factory method `of` to `Map` interface. Similar method is added to Set, List as well.\r\n\r\n`Map&lt;String, String&gt; unmodifiableMap = Map.of(&quot;key1&quot;, &quot;value1&quot;, &quot;key2&quot;, &quot;value2&quot;);`\r\n\r\n","title":"How can I initialise a static Map?","body":"<p>If you want unmodifiable map, finally java 9 added a cool factory method <code>of</code> to <code>Map</code> interface. Similar method is added to Set, List as well.</p>\n\n<p><code>Map&lt;String, String&gt; unmodifiableMap = Map.of(\"key1\", \"value1\", \"key2\", \"value2\");</code></p>\n"},{"tags":[],"owner":{"account_id":1937747,"reputation":14200,"user_id":1744774,"accept_rate":100,"display_name":"Gerold Broser"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1622323187,"creation_date":1536623974,"answer_id":52266947,"question_id":507602,"body_markdown":"Note: This answer actually belongs to question [How to directly initialize a HashMap (in a literal way)?][1] but since that was _**marked** as duplicate_ of this one at time of this writing...\r\n\r\n----\r\n\r\nPrior to Java 9 with its [Map.of()][2] (which is also limited to 10 mappings) you can extend a `Map` implementation of your choice, e.g.:\r\n\r\n    public class InitHashMap&lt;K, V&gt; extends HashMap&lt;K, V&gt;\r\n\r\nre-implement `HashMap`&#39;s constructors:\r\n\r\n\tpublic InitHashMap() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic InitHashMap( int initialCapacity, float loadFactor ) {\r\n\t\tsuper( initialCapacity, loadFactor );\r\n\t}\r\n\r\n\tpublic InitHashMap( int initialCapacity ) {\r\n\t\tsuper( initialCapacity );\r\n\t}\r\n\r\n\tpublic InitHashMap( Map&lt;? extends K, ? extends V&gt; map ) {\r\n\t\tsuper( map );\r\n\t}\r\n\r\nand add an additional constructor that&#39;s inspired by [Aerthel&#39;s answer][3] but is generic by using `Object...` and `&lt;K, V&gt;` types:\r\n\r\n\tpublic InitHashMap( final Object... keyValuePairs ) {\r\n\r\n\t\tif ( keyValuePairs.length % 2 != 0 )\r\n\t\t\tthrow new IllegalArgumentException( &quot;Uneven number of arguments.&quot; );\r\n\r\n\t\tK key = null;\r\n\t\tint i = -1;\r\n\r\n\t\tfor ( final Object keyOrValue : keyValuePairs )\r\n\t\t\tswitch ( ++i % 2 ) {\r\n\t\t\t\tcase 0:  // key\r\n\t\t\t\t\tif ( keyOrValue == null )\r\n\t\t\t\t\t\tthrow new IllegalArgumentException( &quot;Key[&quot; + (i &gt;&gt;&gt; 1) + &quot;] is &lt;null&gt;.&quot; );\r\n\t\t\t\t\tkey = (K) keyOrValue;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcase 1:  // value\r\n\t\t\t\t\tput( key, (V) keyOrValue );\r\n\t\t\t}\r\n\t}\r\n\r\n### Run ###\r\n\r\n\tpublic static void main( final String[] args ) {\r\n\r\n\t\tfinal Map&lt;Integer, String&gt; map = new InitHashMap&lt;&gt;( 1, &quot;First&quot;, 2, &quot;Second&quot;, 3, &quot;Third&quot; );\r\n\t\tSystem.out.println( map );\r\n\t}\r\n\r\n### Output ###\r\n\r\n\t{1=First, 2=Second, 3=Third}\r\n\r\n----\r\n\r\nYou also can extend the `Map` interface likewise:\r\n\r\n    public interface InitMap&lt;K, V&gt; extends Map&lt;K, V&gt; {\r\n    \r\n    \tstatic &lt;K, V&gt; Map&lt;K, V&gt; of( final Object... keyValuePairs ) {\r\n    \r\n    \t\tif ( keyValuePairs.length % 2 != 0 )\r\n    \t\t\tthrow new IllegalArgumentException( &quot;Uneven number of arguments.&quot; );\r\n    \r\n    \t\tfinal Map&lt;K, V&gt; map = new HashMap&lt;&gt;( keyValuePairs.length &gt;&gt;&gt; 1, .75f );\r\n    \t\tK key = null;\r\n    \t\tint i = -1;\r\n    \r\n    \t\tfor ( final Object keyOrValue : keyValuePairs )\r\n    \t\t\tswitch ( ++i % 2 ) {\r\n    \t\t\t\tcase 0: // key\r\n    \t\t\t\t\tif ( keyOrValue == null )\r\n    \t\t\t\t\t\tthrow new IllegalArgumentException( &quot;Key[&quot; + (i &gt;&gt;&gt; 1) + &quot;] is &lt;null&gt;.&quot; );\r\n    \t\t\t\t\tkey = (K) keyOrValue;\r\n    \t\t\t\t\tcontinue;\r\n    \t\t\t\tcase 1: // value\r\n    \t\t\t\t\tmap.put( key, (V) keyOrValue );\r\n    \t\t\t}\r\n    \t\treturn map;\r\n    \t}\r\n    }\r\n\r\n### Run ###\r\n\r\n\tpublic static void main( final String[] args ) {\r\n\r\n\t\tSystem.out.println( InitMap.of( 1, &quot;First&quot;, 2, &quot;Second&quot;, 3, &quot;Third&quot; ) );\r\n\t}\r\n\r\n### Output ###\r\n\r\n\t{1=First, 2=Second, 3=Third}\r\n\r\n[1]: https://stackoverflow.com/q/6802483/1744774\r\n[2]: https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#of-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-\r\n[3]: https://stackoverflow.com/a/17474581/1744774","title":"How can I initialise a static Map?","body":"<p>Note: This answer actually belongs to question <a href=\"https://stackoverflow.com/q/6802483/1744774\">How to directly initialize a HashMap (in a literal way)?</a> but since that was <em><strong>marked</strong> as duplicate</em> of this one at time of this writing...</p>\n<hr />\n<p>Prior to Java 9 with its <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#of-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-K-V-\" rel=\"nofollow noreferrer\">Map.of()</a> (which is also limited to 10 mappings) you can extend a <code>Map</code> implementation of your choice, e.g.:</p>\n<pre><code>public class InitHashMap&lt;K, V&gt; extends HashMap&lt;K, V&gt;\n</code></pre>\n<p>re-implement <code>HashMap</code>'s constructors:</p>\n<pre><code>public InitHashMap() {\n    super();\n}\n\npublic InitHashMap( int initialCapacity, float loadFactor ) {\n    super( initialCapacity, loadFactor );\n}\n\npublic InitHashMap( int initialCapacity ) {\n    super( initialCapacity );\n}\n\npublic InitHashMap( Map&lt;? extends K, ? extends V&gt; map ) {\n    super( map );\n}\n</code></pre>\n<p>and add an additional constructor that's inspired by <a href=\"https://stackoverflow.com/a/17474581/1744774\">Aerthel's answer</a> but is generic by using <code>Object...</code> and <code>&lt;K, V&gt;</code> types:</p>\n<pre><code>public InitHashMap( final Object... keyValuePairs ) {\n\n    if ( keyValuePairs.length % 2 != 0 )\n        throw new IllegalArgumentException( &quot;Uneven number of arguments.&quot; );\n\n    K key = null;\n    int i = -1;\n\n    for ( final Object keyOrValue : keyValuePairs )\n        switch ( ++i % 2 ) {\n            case 0:  // key\n                if ( keyOrValue == null )\n                    throw new IllegalArgumentException( &quot;Key[&quot; + (i &gt;&gt;&gt; 1) + &quot;] is &lt;null&gt;.&quot; );\n                key = (K) keyOrValue;\n                continue;\n            case 1:  // value\n                put( key, (V) keyOrValue );\n        }\n}\n</code></pre>\n<h3>Run</h3>\n<pre><code>public static void main( final String[] args ) {\n\n    final Map&lt;Integer, String&gt; map = new InitHashMap&lt;&gt;( 1, &quot;First&quot;, 2, &quot;Second&quot;, 3, &quot;Third&quot; );\n    System.out.println( map );\n}\n</code></pre>\n<h3>Output</h3>\n<pre><code>{1=First, 2=Second, 3=Third}\n</code></pre>\n<hr />\n<p>You also can extend the <code>Map</code> interface likewise:</p>\n<pre><code>public interface InitMap&lt;K, V&gt; extends Map&lt;K, V&gt; {\n\n    static &lt;K, V&gt; Map&lt;K, V&gt; of( final Object... keyValuePairs ) {\n\n        if ( keyValuePairs.length % 2 != 0 )\n            throw new IllegalArgumentException( &quot;Uneven number of arguments.&quot; );\n\n        final Map&lt;K, V&gt; map = new HashMap&lt;&gt;( keyValuePairs.length &gt;&gt;&gt; 1, .75f );\n        K key = null;\n        int i = -1;\n\n        for ( final Object keyOrValue : keyValuePairs )\n            switch ( ++i % 2 ) {\n                case 0: // key\n                    if ( keyOrValue == null )\n                        throw new IllegalArgumentException( &quot;Key[&quot; + (i &gt;&gt;&gt; 1) + &quot;] is &lt;null&gt;.&quot; );\n                    key = (K) keyOrValue;\n                    continue;\n                case 1: // value\n                    map.put( key, (V) keyOrValue );\n            }\n        return map;\n    }\n}\n</code></pre>\n<h3>Run</h3>\n<pre><code>public static void main( final String[] args ) {\n\n    System.out.println( InitMap.of( 1, &quot;First&quot;, 2, &quot;Second&quot;, 3, &quot;Third&quot; ) );\n}\n</code></pre>\n<h3>Output</h3>\n<pre><code>{1=First, 2=Second, 3=Third}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":428914,"reputation":829,"user_id":811535,"display_name":"egridasov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561451988,"creation_date":1561451988,"answer_id":56749997,"question_id":507602,"body_markdown":"This one uses Apache commons-lang which will most likely be on your class path already:\r\n```\r\nMap&lt;String, String&gt; collect = Stream.of(\r\n        Pair.of(&quot;hello&quot;, &quot;world&quot;),\r\n        Pair.of(&quot;abc&quot;, &quot;123&quot;),\r\n        Pair.of(&quot;java&quot;, &quot;eight&quot;)\r\n).collect(Collectors.toMap(Pair::getKey, Pair::getValue));\r\n```","title":"How can I initialise a static Map?","body":"<p>This one uses Apache commons-lang which will most likely be on your class path already:</p>\n\n<pre><code>Map&lt;String, String&gt; collect = Stream.of(\n        Pair.of(\"hello\", \"world\"),\n        Pair.of(\"abc\", \"123\"),\n        Pair.of(\"java\", \"eight\")\n).collect(Collectors.toMap(Pair::getKey, Pair::getValue));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1975336,"reputation":5011,"user_id":1773233,"accept_rate":58,"display_name":"surfealokesea"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694165329,"creation_date":1605793936,"answer_id":64913102,"question_id":507602,"body_markdown":"Java 8 with streams:\r\n\r\n```java\r\n    private static final Map&lt;String, TemplateOpts&gt; templates = new HashMap&lt;&gt;();\r\n\r\n    static {\r\n        Arrays.stream(new String[][]{\r\n                {CUSTOMER_CSV, &quot;Plantilla cliente&quot;, &quot;csv&quot;}\r\n        }).forEach(f -&gt; templates.put(f[0], new TemplateOpts(f[1], f[2])));\r\n    }\r\n\r\n```\r\n\r\nIt can be also a Object[][] to put anything inside and map it in the forEach loop\r\n\r\n-------------------------\r\n-------------------------\r\n-------------------------\r\n\r\nSeparation of concerns implementation - with method abstraction &amp; generics to decouple things:\r\n```java\r\n    private static final Map&lt;String, TemplateOpts&gt; templates = mapFromArr(\r\n        new String[][]{\r\n                {CUSTOMER_CSV, &quot;Plantilla cliente&quot;, &quot;csv&quot;}\r\n        }, arr-&gt; arr[0], arr-&gt; new TemplateOpts(arr[1], arr[2]));\r\n\r\n    private static &lt;K,V&gt; Map&lt;K,V&gt; mapFromArr(Object[][] arr, Function&lt;Object[],K&gt; keyFnc, Function&lt;Object[],V&gt; valueFnc) {\r\n        Map&lt;K,V&gt; res = new HashMap&lt;&gt;();\r\n        Arrays.stream(arr).forEach(subArr -&gt;\r\n            res.put(keyFnc.apply(subArr), valueFnc.appy(subArr));\r\n        return res;\r\n    }\r\n\r\n```","title":"How can I initialise a static Map?","body":"<p>Java 8 with streams:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static final Map&lt;String, TemplateOpts&gt; templates = new HashMap&lt;&gt;();\n\n    static {\n        Arrays.stream(new String[][]{\n                {CUSTOMER_CSV, &quot;Plantilla cliente&quot;, &quot;csv&quot;}\n        }).forEach(f -&gt; templates.put(f[0], new TemplateOpts(f[1], f[2])));\n    }\n\n</code></pre>\n<p>It can be also a Object[][] to put anything inside and map it in the forEach loop</p>\n<hr />\n<hr />\n<hr />\n<p>Separation of concerns implementation - with method abstraction &amp; generics to decouple things:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static final Map&lt;String, TemplateOpts&gt; templates = mapFromArr(\n        new String[][]{\n                {CUSTOMER_CSV, &quot;Plantilla cliente&quot;, &quot;csv&quot;}\n        }, arr-&gt; arr[0], arr-&gt; new TemplateOpts(arr[1], arr[2]));\n\n    private static &lt;K,V&gt; Map&lt;K,V&gt; mapFromArr(Object[][] arr, Function&lt;Object[],K&gt; keyFnc, Function&lt;Object[],V&gt; valueFnc) {\n        Map&lt;K,V&gt; res = new HashMap&lt;&gt;();\n        Arrays.stream(arr).forEach(subArr -&gt;\n            res.put(keyFnc.apply(subArr), valueFnc.appy(subArr));\n        return res;\n    }\n\n</code></pre>\n"}],"owner":{"account_id":4804,"reputation":268579,"user_id":7412,"accept_rate":96,"display_name":"dogbane"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1034304,"favorite_count":0,"down_vote_count":1,"up_vote_count":1242,"accepted_answer_id":507658,"answer_count":43,"score":1241,"last_activity_date":1694165329,"creation_date":1233675693,"question_id":507602,"body_markdown":"How would you initialise a static `Map` in Java?\r\n\r\nMethod one: static initialiser &lt;br&gt;\r\nMethod two: instance initialiser (anonymous subclass)\r\nor\r\nsome other method?\r\n\r\nWhat are the pros and cons of each?\r\n\r\nHere is an example illustrating the two methods:\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class Test {\r\n        private static final Map&lt;Integer, String&gt; myMap = new HashMap&lt;&gt;();\r\n        static {\r\n            myMap.put(1, &quot;one&quot;);\r\n            myMap.put(2, &quot;two&quot;);\r\n        }\r\n    \r\n        private static final Map&lt;Integer, String&gt; myMap2 = new HashMap&lt;&gt;(){\r\n            {\r\n                put(1, &quot;one&quot;);\r\n                put(2, &quot;two&quot;);\r\n            }\r\n        };\r\n    }","title":"How can I initialise a static Map?","body":"<p>How would you initialise a static <code>Map</code> in Java?</p>\n\n<p>Method one: static initialiser <br>\nMethod two: instance initialiser (anonymous subclass)\nor\nsome other method?</p>\n\n<p>What are the pros and cons of each?</p>\n\n<p>Here is an example illustrating the two methods:</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class Test {\n    private static final Map&lt;Integer, String&gt; myMap = new HashMap&lt;&gt;();\n    static {\n        myMap.put(1, \"one\");\n        myMap.put(2, \"two\");\n    }\n\n    private static final Map&lt;Integer, String&gt; myMap2 = new HashMap&lt;&gt;(){\n        {\n            put(1, \"one\");\n            put(2, \"two\");\n        }\n    };\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","lambda","aws-lambda"],"comments":[{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":1,"creation_date":1484148038,"post_id":41594500,"comment_id":70391977,"body_markdown":"That answer for JavaScript will work just as well for Java. You have to map the HTTP method to a context field in your API Gateway mapping template, as described in that answer.","body":"That answer for JavaScript will work just as well for Java. You have to map the HTTP method to a context field in your API Gateway mapping template, as described in that answer."},{"owner":{"account_id":8200494,"reputation":71,"user_id":6172009,"display_name":"Lars Wi"},"score":0,"creation_date":1484149844,"post_id":41594500,"comment_id":70393134,"body_markdown":"thanks to you mark! I mapped the &#39;http-method&#39; context field. But how can i access this information from java? In javascript its no problem to extend objects as described in the other stackoverflow post.","body":"thanks to you mark! I mapped the &#39;http-method&#39; context field. But how can i access this information from java? In javascript its no problem to extend objects as described in the other stackoverflow post."},{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1484150064,"post_id":41594500,"comment_id":70393278,"body_markdown":"I don&#39;t really use Java in AWS Lambda, but it looks like you will have to map any custom properties in your API Gateway mapping template to the event object since you can&#39;t extend the Context object in Java.","body":"I don&#39;t really use Java in AWS Lambda, but it looks like you will have to map any custom properties in your API Gateway mapping template to the event object since you can&#39;t extend the Context object in Java."},{"owner":{"account_id":8200494,"reputation":71,"user_id":6172009,"display_name":"Lars Wi"},"score":0,"creation_date":1484150579,"post_id":41594500,"comment_id":70393628,"body_markdown":"okay. But we&#39;re using custom objects as our first argument in the handler.\n\nBut since we just started with developing with AWS lambda...maybe we shoud switch to javascript ;)","body":"okay. But we&#39;re using custom objects as our first argument in the handler.  But since we just started with developing with AWS lambda...maybe we shoud switch to javascript ;)"}],"answers":[{"tags":[],"owner":{"account_id":308391,"reputation":8162,"user_id":620237,"accept_rate":97,"display_name":"Dave Maple"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484157157,"creation_date":1484155380,"answer_id":41596978,"question_id":41594500,"body_markdown":"You have several options on how you could receive the `httpMethod` in Java. One of the easiest would be to rename `&#39;http-method&#39;` to `&#39;httpMethod&#39;` in your Integration Request in API Gateway and then use the RequestHandler Interface for your Lambda handler which will marshal your JSON directly to a Java Object:\r\n\r\n    package example;\r\n    \r\n    import com.amazonaws.services.lambda.runtime.RequestHandler;\r\n    import com.amazonaws.services.lambda.runtime.Context; \r\n    \r\n    public class Hello implements RequestHandler&lt;PojoRequest, PojoResponse&gt; {\r\n        \r\n        public PojoResponse handleRequest(PojoRequest request, Context context) {\r\n            System.out.println(String.format(&quot;HTTP method is %s.&quot;, request.getHttpMethod()));\r\n            return new PojoResponse();\r\n        }\r\n    }\r\n\r\nThen you can create whatever Pojo you want to be the request, for example:\r\n\r\n    package example;\r\n    \r\n    public class PojoRequest {\r\n        private String firstName;\r\n        private String lastName;\r\n        private String httpMethod;\r\n    \r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n    \r\n        public void setFirstName(String firstName) {\r\n            this.firstName = firstName;\r\n        }\r\n    \r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n    \r\n        public void setLastName(String lastName) {\r\n            this.lastName = lastName;\r\n        }\r\n    \r\n        public String getHttpMethod() {\r\n            return httpMethod;\r\n        }\r\n    \r\n        public void setHttpMethod(String httpMethod) {\r\n            this.httpMethod = httpMethod;\r\n        }\r\n    }\r\n\r\nSee: [http://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html][1]\r\n\r\n\r\n  [1]: http://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html","title":"How to request http method in AWS lambda handler in java?","body":"<p>You have several options on how you could receive the <code>httpMethod</code> in Java. One of the easiest would be to rename <code>'http-method'</code> to <code>'httpMethod'</code> in your Integration Request in API Gateway and then use the RequestHandler Interface for your Lambda handler which will marshal your JSON directly to a Java Object:</p>\n\n<pre><code>package example;\n\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.amazonaws.services.lambda.runtime.Context; \n\npublic class Hello implements RequestHandler&lt;PojoRequest, PojoResponse&gt; {\n\n    public PojoResponse handleRequest(PojoRequest request, Context context) {\n        System.out.println(String.format(\"HTTP method is %s.\", request.getHttpMethod()));\n        return new PojoResponse();\n    }\n}\n</code></pre>\n\n<p>Then you can create whatever Pojo you want to be the request, for example:</p>\n\n<pre><code>package example;\n\npublic class PojoRequest {\n    private String firstName;\n    private String lastName;\n    private String httpMethod;\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getHttpMethod() {\n        return httpMethod;\n    }\n\n    public void setHttpMethod(String httpMethod) {\n        this.httpMethod = httpMethod;\n    }\n}\n</code></pre>\n\n<p>See: <a href=\"http://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/lambda/latest/dg/java-handler-using-predefined-interfaces.html</a></p>\n"},{"tags":[],"owner":{"account_id":2078676,"reputation":2468,"user_id":1851302,"accept_rate":62,"display_name":"KNU"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1694165276,"creation_date":1694165276,"answer_id":77065701,"question_id":41594500,"body_markdown":"The official documentation you are looking for is : [AWS Lambda function handler in Java][1]\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/lambda/latest/dg/java-handler.html\r\n\r\nYou must be writing a handler class for the lambda function : \r\n\r\n    // Handler value: example.Handler\r\n    public class CustomSOLambdaHandler implements RequestHandler&lt;Map&lt;String,String&gt;, String&gt;{\r\n      @Override\r\n      public String handleRequest(Map&lt;String,String&gt; event, Context context)\r\n\r\nNow let us understand the two arguments of the handleRequest function before we can implement this overridden method : \r\n\r\n**Map&lt;String, String&gt; event**:\r\n\r\n * event is a parameter that represents the input data passed to the Lambda function. In AWS Lambda, events typically contain information about the trigger that invoked the function.\r\n * It is a Map&lt;String, String&gt;, which means it&#39;s a mapping of keys (strings) to values (strings). The specific structure of this map depends on the event source that triggered the Lambda function. AWS Lambda can be triggered by various sources like API Gateway, S3, DynamoDB, etc., and the format of the event parameter will vary accordingly.\r\n * Your Lambda function can extract information from this event to determine what action to take or process.\r\n\r\n**Context context**:\r\n\r\n * The context parameter is an object that provides information about the execution environment of the Lambda function.\r\n * It contains details such as the function name, function version, AWS request ID, and more.\r\n * It can also be used to interact with AWS services or to control the behavior of the Lambda function.\r\n\r\n\r\nNow, let&#39;s consider a *simple example*:\r\n\r\nSuppose you have an AWS Lambda function triggered by an API Gateway. When a client makes an HTTP request to your API, the API Gateway passes the request information to your Lambda function in the event parameter. The event parameter might contain details like the HTTP method (GET, POST, etc.), request headers, request body, and more.\r\n\r\nYour handleRequest method can then extract information from the event parameter to process the incoming HTTP request. For instance, you might retrieve the request body, parse it as JSON, perform some logic based on the received data, and return a response.\r\n\r\nHere&#39;s a very simplified example of how you might use this function in an API Gateway-triggered Lambda:\r\n\r\n    public class MyLambdaHandler implements RequestHandler&lt;Map&lt;String, String&gt;, String&gt; {\r\n        public String handleRequest(Map&lt;String, String&gt; event, Context context) {\r\n            // Extract information from the &#39;event&#39; parameter\r\n            String httpMethod = event.get(&quot;httpMethod&quot;);\r\n            String requestBody = event.get(&quot;body&quot;);\r\n            \r\n            // Perform some processing based on the request data\r\n            String response = &quot;Hello, StackOverflow Lambda!&quot;;\r\n            \r\n            // Return a response\r\n            return response;\r\n        }\r\n    }\r\n\r\nIn this example, the handleRequest method processes an HTTP request passed via the event parameter and returns a simple response. However, the actual implementation can be much more complex, depending on your use case and the data contained in the event parameter.","title":"How to request http method in AWS lambda handler in java?","body":"<p>The official documentation you are looking for is : <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/java-handler.html\" rel=\"nofollow noreferrer\">AWS Lambda function handler in Java</a></p>\n<p>You must be writing a handler class for the lambda function :</p>\n<pre><code>// Handler value: example.Handler\npublic class CustomSOLambdaHandler implements RequestHandler&lt;Map&lt;String,String&gt;, String&gt;{\n  @Override\n  public String handleRequest(Map&lt;String,String&gt; event, Context context)\n</code></pre>\n<p>Now let us understand the two arguments of the handleRequest function before we can implement this overridden method :</p>\n<p><strong>Map&lt;String, String&gt; event</strong>:</p>\n<ul>\n<li>event is a parameter that represents the input data passed to the Lambda function. In AWS Lambda, events typically contain information about the trigger that invoked the function.</li>\n<li>It is a Map&lt;String, String&gt;, which means it's a mapping of keys (strings) to values (strings). The specific structure of this map depends on the event source that triggered the Lambda function. AWS Lambda can be triggered by various sources like API Gateway, S3, DynamoDB, etc., and the format of the event parameter will vary accordingly.</li>\n<li>Your Lambda function can extract information from this event to determine what action to take or process.</li>\n</ul>\n<p><strong>Context context</strong>:</p>\n<ul>\n<li>The context parameter is an object that provides information about the execution environment of the Lambda function.</li>\n<li>It contains details such as the function name, function version, AWS request ID, and more.</li>\n<li>It can also be used to interact with AWS services or to control the behavior of the Lambda function.</li>\n</ul>\n<p>Now, let's consider a <em>simple example</em>:</p>\n<p>Suppose you have an AWS Lambda function triggered by an API Gateway. When a client makes an HTTP request to your API, the API Gateway passes the request information to your Lambda function in the event parameter. The event parameter might contain details like the HTTP method (GET, POST, etc.), request headers, request body, and more.</p>\n<p>Your handleRequest method can then extract information from the event parameter to process the incoming HTTP request. For instance, you might retrieve the request body, parse it as JSON, perform some logic based on the received data, and return a response.</p>\n<p>Here's a very simplified example of how you might use this function in an API Gateway-triggered Lambda:</p>\n<pre><code>public class MyLambdaHandler implements RequestHandler&lt;Map&lt;String, String&gt;, String&gt; {\n    public String handleRequest(Map&lt;String, String&gt; event, Context context) {\n        // Extract information from the 'event' parameter\n        String httpMethod = event.get(&quot;httpMethod&quot;);\n        String requestBody = event.get(&quot;body&quot;);\n        \n        // Perform some processing based on the request data\n        String response = &quot;Hello, StackOverflow Lambda!&quot;;\n        \n        // Return a response\n        return response;\n    }\n}\n</code></pre>\n<p>In this example, the handleRequest method processes an HTTP request passed via the event parameter and returns a simple response. However, the actual implementation can be much more complex, depending on your use case and the data contained in the event parameter.</p>\n"}],"owner":{"account_id":8200494,"reputation":71,"user_id":6172009,"display_name":"Lars Wi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8420,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694165276,"creation_date":1484147845,"question_id":41594500,"body_markdown":"How can I request the used HTTP Method in an AWS Lambda handler in JAVA? There is a argument `&#39;context&#39;`, but after a look on it, I can&#39;t request the used HTTP method.\r\n\r\nHTTP-Methods are: GET, POST, PUT\r\n\r\nBTW: Here is the answer for javascript: https://stackoverflow.com/questions/35252544/how-to-get-the-http-method-in-aws-lambda\r\n\r\n\r\nbest regards,\r\nlars","title":"How to request http method in AWS lambda handler in java?","body":"<p>How can I request the used HTTP Method in an AWS Lambda handler in JAVA? There is a argument <code>'context'</code>, but after a look on it, I can't request the used HTTP method.</p>\n\n<p>HTTP-Methods are: GET, POST, PUT</p>\n\n<p>BTW: Here is the answer for javascript: <a href=\"https://stackoverflow.com/questions/35252544/how-to-get-the-http-method-in-aws-lambda\">How to get the HTTP method in AWS Lambda?</a></p>\n\n<p>best regards,\nlars</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1551569605,"post_id":54964093,"comment_id":96688973,"body_markdown":"can you modify those signatures to have only the varargs?","body":"can you modify those signatures to have only the varargs?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1551569696,"post_id":54964093,"comment_id":96688988,"body_markdown":"You can use [Collections.unmodifiableList(...)](https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList(java.util.List)) to get an unmodifiable version of a list.","body":"You can use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList(java.util.List)\" rel=\"nofollow noreferrer\">Collections.unmodifiableList(...)</a> to get an unmodifiable version of a list."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1551569752,"post_id":54964093,"comment_id":96689000,"body_markdown":"There is no concise way within Java&#39;s API to do what you want that I know of (you can of course always transform the modifiable list to an unmodifiable list through [`Collections.toUnmodifiableList(...)`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html#unmodifiableList(java.util.List))). The question that comes to my mind is: why is the parameter `t` separated in the method&#39;s signature?","body":"There is no concise way within Java&#39;s API to do what you want that I know of (you can of course always transform the modifiable list to an unmodifiable list through <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html#unmodifiableList(java.util.List)\" rel=\"nofollow noreferrer\"><code>Collections.toUnmodifiableList(...)</code></a>). The question that comes to my mind is: why is the parameter <code>t</code> separated in the method&#39;s signature?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1551569894,"post_id":54964093,"comment_id":96689020,"body_markdown":"By the way, `Arrays.asList` produces a fixed-size list, not supporting `add`.","body":"By the way, <code>Arrays.asList</code> produces a fixed-size list, not supporting <code>add</code>."},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":0,"creation_date":1551569914,"post_id":54964093,"comment_id":96689024,"body_markdown":"@Turing85 might be for performance reasons.","body":"@Turing85 might be for performance reasons."},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":0,"creation_date":1551570550,"post_id":54964093,"comment_id":96689139,"body_markdown":"@Turing85 Or to force at least one argument.","body":"@Turing85 Or to force at least one argument."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1551570639,"post_id":54964093,"comment_id":96689153,"body_markdown":"@LppEdd or maybe because the answer was 42 :) Would like to hear an answer from OP ;)","body":"@LppEdd or maybe because the answer was 42 :) Would like to hear an answer from OP ;)"},{"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"score":0,"creation_date":1551571141,"post_id":54964093,"comment_id":96689237,"body_markdown":"@Turing85 hahaha nice movie (and good book) ;)","body":"@Turing85 hahaha nice movie (and good book) ;)"},{"owner":{"account_id":1266843,"reputation":93034,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":0,"creation_date":1551571887,"post_id":54964093,"comment_id":96689367,"body_markdown":"@njzk2 it&#39;s not only varargs because I need the user to pass at least one argument, o/w I want the compiler to complain","body":"@njzk2 it&#39;s not only varargs because I need the user to pass at least one argument, o/w I want the compiler to complain"}],"answers":[{"tags":[],"owner":{"account_id":3044796,"reputation":3439,"user_id":2580773,"display_name":"David SN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551570957,"creation_date":1551570957,"answer_id":54964260,"question_id":54964093,"body_markdown":"There is no concise way to create the list. Probably your best option is to create a new list, add both the array elements and the new element to the list and return a unmodifiable list using `Collections.unmodifiableList`.\r\n\r\n        List&lt;T&gt; newList = new ArrayList&lt;&gt;(tasks.length + 1);\r\n        newList.addAll(Arrays.asList(tasks));\r\n        newList.add(t);\r\n        List&lt;T&gt; unmodifiableList = Collections.unmodifiableList(newList);","title":"Easily add element to varargs list","body":"<p>There is no concise way to create the list. Probably your best option is to create a new list, add both the array elements and the new element to the list and return a unmodifiable list using <code>Collections.unmodifiableList</code>.</p>\n\n<pre><code>    List&lt;T&gt; newList = new ArrayList&lt;&gt;(tasks.length + 1);\n    newList.addAll(Arrays.asList(tasks));\n    newList.add(t);\n    List&lt;T&gt; unmodifiableList = Collections.unmodifiableList(newList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1483504,"reputation":20404,"user_id":1392277,"accept_rate":84,"display_name":"LppEdd"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551573487,"creation_date":1551571045,"answer_id":54964268,"question_id":54964093,"body_markdown":"While a short &amp; performant (well maybe this isn&#39;t bad at all!) solution isn&#39;t possible with the current Java `API`, I&#39;ll showcase a one-liner with the help of `Stream`(s).\r\n\r\n    return cb -&gt; NeoSeries.Series(concat(of(t), of(tasks)).collect(toList()), cb);\r\n\r\nThis line\r\n\r\n    concat(of(t), of(tasks)).collect(toList())\r\n\r\nexpanded becomes\r\n\r\n    Stream.concat(Stream.of(t), Stream.of(tasks))\r\n          .collect(Collectors.toList());\r\n\r\nThis is lazily computed, and will avoid temporary state.\r\n\r\n----------\r\n\r\nWhat the other answer fail to mention is null-handling. What if the varargs array is null? `Arrays.asList` would throw an `Exception`. The same for `Stream.of`\r\n\r\nFor that you can write a masking method such as\r\n\r\n    private static &lt;T, E&gt; AsyncTask&lt;T, E&gt;[] maskNull(final AsyncTask&lt;T, E&gt;[] tasks) {\r\n    \treturn tasks != null ? tasks : (AsyncTask&lt;T, E&gt;[]) new AsyncTask[0];\r\n    }\r\n\r\nAnd use it like\r\n\r\n    of(maskNull(tasks))","title":"Easily add element to varargs list","body":"<p>While a short &amp; performant (well maybe this isn't bad at all!) solution isn't possible with the current Java <code>API</code>, I'll showcase a one-liner with the help of <code>Stream</code>(s).</p>\n\n<pre><code>return cb -&gt; NeoSeries.Series(concat(of(t), of(tasks)).collect(toList()), cb);\n</code></pre>\n\n<p>This line</p>\n\n<pre><code>concat(of(t), of(tasks)).collect(toList())\n</code></pre>\n\n<p>expanded becomes</p>\n\n<pre><code>Stream.concat(Stream.of(t), Stream.of(tasks))\n      .collect(Collectors.toList());\n</code></pre>\n\n<p>This is lazily computed, and will avoid temporary state.</p>\n\n<hr>\n\n<p>What the other answer fail to mention is null-handling. What if the varargs array is null? <code>Arrays.asList</code> would throw an <code>Exception</code>. The same for <code>Stream.of</code></p>\n\n<p>For that you can write a masking method such as</p>\n\n<pre><code>private static &lt;T, E&gt; AsyncTask&lt;T, E&gt;[] maskNull(final AsyncTask&lt;T, E&gt;[] tasks) {\n    return tasks != null ? tasks : (AsyncTask&lt;T, E&gt;[]) new AsyncTask[0];\n}\n</code></pre>\n\n<p>And use it like</p>\n\n<pre><code>of(maskNull(tasks))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1266843,"reputation":93034,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551571617,"creation_date":1551571617,"answer_id":54964321,"question_id":54964093,"body_markdown":"So here is what I got:\r\n\r\nbefore:\r\n\r\n    var tasks = Arrays.asList(args);\r\n    tasks.add(0,t);  // throws exception \r\n\r\nafter:\r\n      \r\n    var newList = new ArrayList&lt;&gt;(Arrays.asList(args));\r\n    newList.add(0,t);\r\n\r\nthe problem with the first one is it creates an immutable list that will throw an exception if you try to add to it after it&#39;s first created.","title":"Easily add element to varargs list","body":"<p>So here is what I got:</p>\n\n<p>before:</p>\n\n<pre><code>var tasks = Arrays.asList(args);\ntasks.add(0,t);  // throws exception \n</code></pre>\n\n<p>after:</p>\n\n<pre><code>var newList = new ArrayList&lt;&gt;(Arrays.asList(args));\nnewList.add(0,t);\n</code></pre>\n\n<p>the problem with the first one is it creates an immutable list that will throw an exception if you try to add to it after it's first created.</p>\n"},{"tags":[],"owner":{"account_id":5444810,"reputation":3671,"user_id":4331750,"accept_rate":83,"display_name":"whistling_marmot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694164253,"creation_date":1694164253,"answer_id":77065582,"question_id":54964093,"body_markdown":"I&#39;m late to the show, but you can use [Guava Lists][1].\r\n\r\n    var listOfTasks = com.google.common.collect.Lists.asList(t, tasks);\r\n\r\n\r\n  [1]: https://guava.dev/releases/19.0/api/docs/com/google/common/collect/Lists.html#asList(E,%20E[])","title":"Easily add element to varargs list","body":"<p>I'm late to the show, but you can use <a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/collect/Lists.html#asList(E,%20E%5B%5D)\" rel=\"nofollow noreferrer\">Guava Lists</a>.</p>\n<pre><code>var listOfTasks = com.google.common.collect.Lists.asList(t, tasks);\n</code></pre>\n"}],"owner":{"account_id":1266843,"reputation":93034,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1694164253,"creation_date":1551569257,"question_id":54964093,"body_markdown":"I have these signatures:\r\n\r\n      public static &lt;T, E&gt; AsyncTask&lt;List&lt;T&gt;, E&gt; Parallel(AsyncTask&lt;T,E&gt; t, AsyncTask&lt;T, E&gt;... tasks) {\r\n        return cb -&gt; NeoParallel.Parallel(List.of(tasks), cb);\r\n      }\r\n      \r\n      public static &lt;T, E&gt; AsyncTask&lt;List&lt;T&gt;, E&gt; Series(AsyncTask&lt;T,E&gt; t, AsyncTask&lt;T, E&gt;... tasks) {\r\n        return cb -&gt; NeoSeries.Series(List.of(tasks), cb);\r\n      }\r\n\r\nhow can I easily add `t` to the `List.of(tasks)`?\r\n\r\nThis won&#39;t work because it creates an immutable list:\r\n\r\n    var listOfTasks = Arrays.asList(tasks);\r\n    listOfTasks.add(0, t);\r\n\r\nis there a way to easily create a list that I can add to, or do it in one line?\r\n\r\nSince this call is likely unperformant:\r\n\r\n       listOfTasks.add(0, t);\r\n\r\nI am looking for an alternative\r\n\r\n","title":"Easily add element to varargs list","body":"<p>I have these signatures:</p>\n\n<pre><code>  public static &lt;T, E&gt; AsyncTask&lt;List&lt;T&gt;, E&gt; Parallel(AsyncTask&lt;T,E&gt; t, AsyncTask&lt;T, E&gt;... tasks) {\n    return cb -&gt; NeoParallel.Parallel(List.of(tasks), cb);\n  }\n\n  public static &lt;T, E&gt; AsyncTask&lt;List&lt;T&gt;, E&gt; Series(AsyncTask&lt;T,E&gt; t, AsyncTask&lt;T, E&gt;... tasks) {\n    return cb -&gt; NeoSeries.Series(List.of(tasks), cb);\n  }\n</code></pre>\n\n<p>how can I easily add <code>t</code> to the <code>List.of(tasks)</code>?</p>\n\n<p>This won't work because it creates an immutable list:</p>\n\n<pre><code>var listOfTasks = Arrays.asList(tasks);\nlistOfTasks.add(0, t);\n</code></pre>\n\n<p>is there a way to easily create a list that I can add to, or do it in one line?</p>\n\n<p>Since this call is likely unperformant:</p>\n\n<pre><code>   listOfTasks.add(0, t);\n</code></pre>\n\n<p>I am looking for an alternative</p>\n"},{"tags":["java","intellij-idea","jpanel","jbutton","jscrollpane"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1694166291,"post_id":77065573,"comment_id":135858695,"body_markdown":"You really need to provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)\nDon&#39;t mix AWT components with Swing (such as `Button`) and, it&#39;s &quot;Answer&quot;","body":"You really need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> Don&#39;t mix AWT components with Swing (such as <code>Button</code>) and, it&#39;s &quot;Answer&quot;"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694208108,"post_id":77065573,"comment_id":135866111,"body_markdown":"This will happen when you do not specify a _width_ and _height_ for your window.","body":"This will happen when you do not specify a <i>width</i> and <i>height</i> for your window."}],"owner":{"account_id":29393605,"reputation":11,"user_id":22521414,"display_name":"war030805"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694164112,"creation_date":1694164112,"question_id":77065573,"body_markdown":"so I am making a program to study and I want to see and edit the words that you upload in a Jscrollpane and I have a JPanel with gridlayout(0,2) in the Jscrollpane (with maximum height of 700) and when I start the program it adds buttons to the JPanel to see that it works. it works but when the Jscrollpane gets to big it does something strange it moves the Jscrollpane to under\r\n[when buttons is to much(35 buttons)](https://i.stack.imgur.com/oGjXK.png)\r\nbut when I have under 30 buttons it is normal\r\n[7 buttons](https://i.stack.imgur.com/2kLEZ.png)\r\nI use GUI form in IntelliJ IDEA CE and this is how it looks in the form(I don&#39;t know that it has anything to do with it)\r\n[GUI form](https://i.stack.imgur.com/ed8qo.png)\r\n\r\ncode:\r\n(does when you start program)\r\npublic void setknoppen() {\r\n        panel1.setVisible(false);\r\n//I have a menu and when you press a button it sets that panel to invisible and this to visible\r\n\r\n        panel2.setLayout(new GridLayout(0, 2));\r\n&gt; //panel2= panel in Jscrollpane\r\n\r\n        for (int i = 0; i &lt; 60; i++) {\r\n            Button button = new Button(&quot;question&quot; + i);\r\n            panel2.add(button);\r\n            button = new Button(&quot;anser&quot; + i);\r\n            panel2.add(button);\r\n        }\r\n        System.out.println(scrollpane.getY());\r\n        panel1.revalidate();\r\n        panel1.repaint();\r\n    }\r\n\r\nI tried to revalidate and repaint the panel1, panel2, Jscrollpane.\r\nI tried tried to add the textfield (what I want in the end instead of the buttons) and the same happens\r\n\r\nwhat I want is that the Jscrollpane is in the top of the Frame and if I want to scroll to see the one that you can&#39;t see I can. \r\njust like this (I made it in pages so it looks a bit strange) (the darker part on the right is the scroller)\r\n[what i want](https://i.stack.imgur.com/OtjsL.jpg)","title":"adding Commonest to jPanel with gridLayout","body":"<p>so I am making a program to study and I want to see and edit the words that you upload in a Jscrollpane and I have a JPanel with gridlayout(0,2) in the Jscrollpane (with maximum height of 700) and when I start the program it adds buttons to the JPanel to see that it works. it works but when the Jscrollpane gets to big it does something strange it moves the Jscrollpane to under\n<a href=\"https://i.stack.imgur.com/oGjXK.png\" rel=\"nofollow noreferrer\">when buttons is to much(35 buttons)</a>\nbut when I have under 30 buttons it is normal\n<a href=\"https://i.stack.imgur.com/2kLEZ.png\" rel=\"nofollow noreferrer\">7 buttons</a>\nI use GUI form in IntelliJ IDEA CE and this is how it looks in the form(I don't know that it has anything to do with it)\n<a href=\"https://i.stack.imgur.com/ed8qo.png\" rel=\"nofollow noreferrer\">GUI form</a></p>\n<p>code:\n(does when you start program)\npublic void setknoppen() {\npanel1.setVisible(false);\n//I have a menu and when you press a button it sets that panel to invisible and this to visible</p>\n<pre><code>    panel2.setLayout(new GridLayout(0, 2));\n</code></pre>\n<blockquote>\n<p>//panel2= panel in Jscrollpane</p>\n</blockquote>\n<pre><code>    for (int i = 0; i &lt; 60; i++) {\n        Button button = new Button(&quot;question&quot; + i);\n        panel2.add(button);\n        button = new Button(&quot;anser&quot; + i);\n        panel2.add(button);\n    }\n    System.out.println(scrollpane.getY());\n    panel1.revalidate();\n    panel1.repaint();\n}\n</code></pre>\n<p>I tried to revalidate and repaint the panel1, panel2, Jscrollpane.\nI tried tried to add the textfield (what I want in the end instead of the buttons) and the same happens</p>\n<p>what I want is that the Jscrollpane is in the top of the Frame and if I want to scroll to see the one that you can't see I can.\njust like this (I made it in pages so it looks a bit strange) (the darker part on the right is the scroller)\n<a href=\"https://i.stack.imgur.com/OtjsL.jpg\" rel=\"nofollow noreferrer\">what i want</a></p>\n"},{"tags":["java","vaadin","vaadin-flow","vaadin-grid"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1603983084,"post_id":64593133,"comment_id":114213275,"body_markdown":"One prime suspect around those things is borked equality/hashcode.  have you tried without overriding those (so back to object identity)? are you sure your IDs are not just null due to some mapping problems from the db etc (that would make those two equal too)","body":"One prime suspect around those things is borked equality/hashcode.  have you tried without overriding those (so back to object identity)? are you sure your IDs are not just null due to some mapping problems from the db etc (that would make those two equal too)"},{"owner":{"account_id":10524216,"reputation":712,"user_id":7755716,"display_name":"Wulf"},"score":0,"creation_date":1603984652,"post_id":64593133,"comment_id":114214143,"body_markdown":"@cfrick Thank you for the thoughts. I add the entity where it workes like it should. I also tried to delete my custom `equals/has` Methodes and two use defaults, but its quite the same result","body":"@cfrick Thank you for the thoughts. I add the entity where it workes like it should. I also tried to delete my custom <code>equals&#47;has</code> Methodes and two use defaults, but its quite the same result"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1604065968,"post_id":64593133,"comment_id":114241180,"body_markdown":"I also think that equals/hashCode could be the problem. @Data also generates these. Can you try without Lombok and any equals/hashCode methods","body":"I also think that equals/hashCode could be the problem. @Data also generates these. Can you try without Lombok and any equals/hashCode methods"},{"owner":{"account_id":10524216,"reputation":712,"user_id":7755716,"display_name":"Wulf"},"score":0,"creation_date":1604166589,"post_id":64593133,"comment_id":114266592,"body_markdown":"@SimonMartinelli Okay. Its was the problem with equals/hasCode. I mean its confusing why the `Notiz` works but `Kunde` not. The difference is the level of inheritance...","body":"@SimonMartinelli Okay. Its was the problem with equals/hasCode. I mean its confusing why the <code>Notiz</code> works but <code>Kunde</code> not. The difference is the level of inheritance..."}],"answers":[{"tags":[],"owner":{"account_id":14365136,"reputation":890,"user_id":10376405,"display_name":"Paul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694163803,"creation_date":1694163803,"answer_id":77065545,"question_id":64593133,"body_markdown":"a Vaadin Grid&lt;&gt; refers to their rows by ID. Internally, the keymapper of the grid will try to assign an ID to each row. Since any collection used to populate the Grid&lt;&gt; through the grid&#39;s ```.setItems()```-method is internally parsed to a Set&lt;&gt;, Vaadin will try to use your equals-method.\r\n\r\nIf you don&#39;t have an equals-method, Vaadin employs several fallbacks, one of which is looking if your objects contain a field named ```id```\r\n\r\nA great explanation and other possible solutions for this, can be found on Github by Martin&#39;s [article on grid-and-broken-equals][1]\r\n\r\n\r\n  [1]: https://mvysny.github.io/grid-and-broken-equals/","title":"Vaadin flow Grid items duplicate rows","body":"<p>a Vaadin Grid&lt;&gt; refers to their rows by ID. Internally, the keymapper of the grid will try to assign an ID to each row. Since any collection used to populate the Grid&lt;&gt; through the grid's <code>.setItems()</code>-method is internally parsed to a Set&lt;&gt;, Vaadin will try to use your equals-method.</p>\n<p>If you don't have an equals-method, Vaadin employs several fallbacks, one of which is looking if your objects contain a field named <code>id</code></p>\n<p>A great explanation and other possible solutions for this, can be found on Github by Martin's <a href=\"https://mvysny.github.io/grid-and-broken-equals/\" rel=\"nofollow noreferrer\">article on grid-and-broken-equals</a></p>\n"}],"owner":{"account_id":10524216,"reputation":712,"user_id":7755716,"display_name":"Wulf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":419,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694163803,"creation_date":1603981607,"question_id":64593133,"body_markdown":"Vaadinversion: 14.4.1&lt;p&gt;\r\nspring-boot-starter-parent: 2.2.10RELEASE\r\n\r\nI have two items in my grid. These two items looks like:\r\n\r\n    Kontakt{id=11657f9e-c4f4-414f-aab2-618252db9b06&#39;vorname=&#39;test1&#39;...\r\n    Kontakt{id=8da74f38-2072-4fb0-8c74-aede661f02b5&#39;vorname=&#39;test&#39;...\r\n\r\nBut the grid only displays only one items and so oft like the `&quot;itemslist.size()&quot;`\r\nAlso they react as &quot;one row&quot;. So I can like on the first and both get selected.\r\n\r\nThese are my `@Entity(s)`\r\n\r\n    @Entity\r\n    @Table(name = &quot;std_kunde&quot;)\r\n    @Data\r\n    public class Kunde extends Kontakt {\r\n    \r\n        public Kunde() {\r\n            super();\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return super.toString();\r\n        }\r\n    }\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @Data\r\n    public abstract class Kontakt extends BasicEntity {\r\n    \r\n        private String vorname;\r\n        private String name;\r\n        ...\r\n    \r\n       \r\n        public Kontakt() {\r\n            super();\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Kontakt{&quot; +\r\n                    &quot;id=&quot; + getId() + &#39;\\&#39;&#39; +\r\n                    &quot;vorname=&#39;&quot; + vorname + &#39;\\&#39;&#39; +\r\n                   ...\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @Data\r\n    public abstract class BasicEntity {\r\n    \r\n        @Id\r\n        @GenericGenerator(name = &quot;id_generator&quot;, strategy = &quot;....KeyGenerator&quot;)\r\n        @GeneratedValue(generator = &quot;id_generator&quot;)\r\n        @Column(length = 128)\r\n        private String id;\r\n    \r\n        @CreationTimestamp\r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;create_date&quot;)\r\n        private Date createDate;\r\n    \r\n        @UpdateTimestamp\r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;modify_date&quot;)\r\n        private Date modifyDate;\r\n    \r\n        @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;basicEntity&quot;)\r\n        private List&lt;Anhang&gt; anhangList;\r\n        @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;basicEntity&quot;)\r\n        private List&lt;Notiz&gt; notizList;\r\n    \r\n    \r\n        public BasicEntity() {\r\n            anhangList = new ArrayList&lt;&gt;();\r\n            notizList = new ArrayList&lt;&gt;();\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(id);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o){\r\n            if(null == o)\r\n                return false;\r\n            if(!(o instanceof BasicEntity))\r\n                return false;\r\n            BasicEntity b = (BasicEntity) o;\r\n            return b.getId().equals(this.getId());\r\n        }\r\n    }\r\n\r\nAnd also the Grid code\r\n\r\n     @Autowired\r\n    private KundeService kundeService;\r\n\r\n    private Grid&lt;Kunde&gt; g;\r\n\r\n    public Dashboard() {\r\n        g = new Grid&lt;&gt;(Kunde.class);\r\n        g.addColumn(Kunde::getVorname).setHeader(&quot;Vorname&quot;);\r\n        g.setSizeFull();\r\n        setSizeFull();\r\n        add(g);\r\n    }\r\n\r\nI tested to build a Grid based upon an other entiy and it worked like it should. Its like the first time I have this behaivor but I dont know how actually to debug it...\r\n\r\nEDIT 29.10.2020 ---------------------------------------------------------------&lt;p&gt;\r\nThis is the `@Entity` (Notiz) which works like expected.&lt;p&gt;\r\nUI-Code\r\n\r\n    private Grid&lt;Kunde&gt; g;\r\n        private Grid&lt;Notiz&gt; n;\r\n    \r\n        public Dashboard() {\r\n            g = new Grid&lt;&gt;(Kunde.class);\r\n            g.addColumn(Kunde::getId).setHeader(&quot;ID&quot;);\r\n            g.addColumn(Kunde::getVorname).setHeader(&quot;Vorname&quot;);\r\n            g.setSizeFull();\r\n    \r\n            n = new Grid&lt;&gt;(Notiz.class);\r\n            n.addColumn(Notiz::getId).setHeader(&quot;ID&quot;);\r\n            n.addColumn(Notiz::getTitel).setHeader(&quot;Titel&quot;);\r\n            n.setSizeFull();\r\n            setSizeFull();\r\n            add(g,n);\r\n        }\r\n    \r\n        @PostConstruct\r\n        private void loadValues(){\r\n            g.setItems(kundeService.findAll());\r\n            n.setItems(notizService.findAll());\r\n        }\r\n\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;ld_notiz&quot;)\r\n    @Data\r\n    public class Notiz extends BasicEntitySystemFeatures {\r\n    \r\n    \r\n        private String titel;\r\n        @Column(length = 5000)  //TODO\r\n        private String content;\r\n        private boolean abgeschlossen = false;\r\n    \r\n        @Enumerated(EnumType.STRING)\r\n        private NOTIZ_TYP notizTyp;\r\n    \r\n        public enum NOTIZ_TYP {\r\n            NOTIZ,\r\n            ERINNERUNG\r\n        }\r\n    \r\n        @ManyToOne\r\n        private BasicEntity basicEntity;\r\n    \r\n        public Notiz() {\r\n            super();\r\n        }\r\n    }\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    @Data\r\n    public abstract class BasicEntitySystemFeatures {\r\n        @Id\r\n        @GenericGenerator(name = &quot;id_generator&quot;, strategy = &quot;...KeyGenerator&quot;)\r\n        @GeneratedValue(generator = &quot;id_generator&quot;)\r\n        @Column(length = 128)\r\n        private String id;\r\n    \r\n        @CreationTimestamp\r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;create_date&quot;)\r\n        private Date createDate;\r\n    \r\n        @UpdateTimestamp\r\n        @Temporal(TemporalType.TIMESTAMP)\r\n        @Column(name = &quot;modify_date&quot;)\r\n        private Date modifyDate;\r\n    \r\n        public BasicEntitySystemFeatures() {\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return Objects.hash(id);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o){\r\n            if(null == o)\r\n                return false;\r\n            if(!(o instanceof BasicEntitySystemFeatures))\r\n                return false;\r\n            BasicEntitySystemFeatures b = (BasicEntitySystemFeatures) o;\r\n            return b.getId().equals(this.getId());\r\n        }\r\n\r\n[![Comparing the UI Result of both Entities][1]][1]\r\n\r\n\r\n[![Screenshot of Vaadin UI Grid not clicked row][2]][2]\r\n[![Screenshot of Vaadin UI Grid clicked row][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/e174J.png\r\n  [2]: https://i.stack.imgur.com/pjhc1.png\r\n  [3]: https://i.stack.imgur.com/0MZ2z.png","title":"Vaadin flow Grid items duplicate rows","body":"<p>Vaadinversion: 14.4.1<p>\nspring-boot-starter-parent: 2.2.10RELEASE</p>\n<p>I have two items in my grid. These two items looks like:</p>\n<pre><code>Kontakt{id=11657f9e-c4f4-414f-aab2-618252db9b06'vorname='test1'...\nKontakt{id=8da74f38-2072-4fb0-8c74-aede661f02b5'vorname='test'...\n</code></pre>\n<p>But the grid only displays only one items and so oft like the <code>&quot;itemslist.size()&quot;</code>\nAlso they react as &quot;one row&quot;. So I can like on the first and both get selected.</p>\n<p>These are my <code>@Entity(s)</code></p>\n<pre><code>@Entity\n@Table(name = &quot;std_kunde&quot;)\n@Data\npublic class Kunde extends Kontakt {\n\n    public Kunde() {\n        super();\n    }\n\n    @Override\n    public String toString() {\n        return super.toString();\n    }\n}\n\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Data\npublic abstract class Kontakt extends BasicEntity {\n\n    private String vorname;\n    private String name;\n    ...\n\n   \n    public Kontakt() {\n        super();\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Kontakt{&quot; +\n                &quot;id=&quot; + getId() + '\\'' +\n                &quot;vorname='&quot; + vorname + '\\'' +\n               ...\n                '}';\n    }\n}\n\n\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Data\npublic abstract class BasicEntity {\n\n    @Id\n    @GenericGenerator(name = &quot;id_generator&quot;, strategy = &quot;....KeyGenerator&quot;)\n    @GeneratedValue(generator = &quot;id_generator&quot;)\n    @Column(length = 128)\n    private String id;\n\n    @CreationTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;create_date&quot;)\n    private Date createDate;\n\n    @UpdateTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;modify_date&quot;)\n    private Date modifyDate;\n\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;basicEntity&quot;)\n    private List&lt;Anhang&gt; anhangList;\n    @OneToMany(cascade = CascadeType.ALL, mappedBy = &quot;basicEntity&quot;)\n    private List&lt;Notiz&gt; notizList;\n\n\n    public BasicEntity() {\n        anhangList = new ArrayList&lt;&gt;();\n        notizList = new ArrayList&lt;&gt;();\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id);\n    }\n\n    @Override\n    public boolean equals(Object o){\n        if(null == o)\n            return false;\n        if(!(o instanceof BasicEntity))\n            return false;\n        BasicEntity b = (BasicEntity) o;\n        return b.getId().equals(this.getId());\n    }\n}\n</code></pre>\n<p>And also the Grid code</p>\n<pre><code> @Autowired\nprivate KundeService kundeService;\n\nprivate Grid&lt;Kunde&gt; g;\n\npublic Dashboard() {\n    g = new Grid&lt;&gt;(Kunde.class);\n    g.addColumn(Kunde::getVorname).setHeader(&quot;Vorname&quot;);\n    g.setSizeFull();\n    setSizeFull();\n    add(g);\n}\n</code></pre>\n<p>I tested to build a Grid based upon an other entiy and it worked like it should. Its like the first time I have this behaivor but I dont know how actually to debug it...</p>\n<p>EDIT 29.10.2020 ---------------------------------------------------------------<p>\nThis is the <code>@Entity</code> (Notiz) which works like expected.<p>\nUI-Code</p>\n<pre><code>private Grid&lt;Kunde&gt; g;\n    private Grid&lt;Notiz&gt; n;\n\n    public Dashboard() {\n        g = new Grid&lt;&gt;(Kunde.class);\n        g.addColumn(Kunde::getId).setHeader(&quot;ID&quot;);\n        g.addColumn(Kunde::getVorname).setHeader(&quot;Vorname&quot;);\n        g.setSizeFull();\n\n        n = new Grid&lt;&gt;(Notiz.class);\n        n.addColumn(Notiz::getId).setHeader(&quot;ID&quot;);\n        n.addColumn(Notiz::getTitel).setHeader(&quot;Titel&quot;);\n        n.setSizeFull();\n        setSizeFull();\n        add(g,n);\n    }\n\n    @PostConstruct\n    private void loadValues(){\n        g.setItems(kundeService.findAll());\n        n.setItems(notizService.findAll());\n    }\n\n\n\n@Entity\n@Table(name = &quot;ld_notiz&quot;)\n@Data\npublic class Notiz extends BasicEntitySystemFeatures {\n\n\n    private String titel;\n    @Column(length = 5000)  //TODO\n    private String content;\n    private boolean abgeschlossen = false;\n\n    @Enumerated(EnumType.STRING)\n    private NOTIZ_TYP notizTyp;\n\n    public enum NOTIZ_TYP {\n        NOTIZ,\n        ERINNERUNG\n    }\n\n    @ManyToOne\n    private BasicEntity basicEntity;\n\n    public Notiz() {\n        super();\n    }\n}\n\n@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\n@Data\npublic abstract class BasicEntitySystemFeatures {\n    @Id\n    @GenericGenerator(name = &quot;id_generator&quot;, strategy = &quot;...KeyGenerator&quot;)\n    @GeneratedValue(generator = &quot;id_generator&quot;)\n    @Column(length = 128)\n    private String id;\n\n    @CreationTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;create_date&quot;)\n    private Date createDate;\n\n    @UpdateTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;modify_date&quot;)\n    private Date modifyDate;\n\n    public BasicEntitySystemFeatures() {\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id);\n    }\n\n    @Override\n    public boolean equals(Object o){\n        if(null == o)\n            return false;\n        if(!(o instanceof BasicEntitySystemFeatures))\n            return false;\n        BasicEntitySystemFeatures b = (BasicEntitySystemFeatures) o;\n        return b.getId().equals(this.getId());\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/e174J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e174J.png\" alt=\"Comparing the UI Result of both Entities\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/pjhc1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pjhc1.png\" alt=\"Screenshot of Vaadin UI Grid not clicked row\" /></a>\n<a href=\"https://i.stack.imgur.com/0MZ2z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0MZ2z.png\" alt=\"Screenshot of Vaadin UI Grid clicked row\" /></a></p>\n"},{"tags":["java","android","json","stringify"],"answers":[{"tags":[],"owner":{"account_id":1018150,"reputation":45383,"user_id":1029225,"display_name":"MH."},"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1393528006,"creation_date":1393528006,"answer_id":22078038,"question_id":22077955,"body_markdown":"`JSON.stringify(JSONObject)` is a Javascript function and will not be available in Java. If you&#39;re using the `org.json.*` package built in the Android SDK, the equivalent would be to simply call `toString()` on your `JSONObject` instance, or the more human-friendly `toString(int)`.\r\n\r\nhttp://developer.android.com/reference/org/json/JSONObject.html#toString()\r\nhttp://developer.android.com/reference/org/json/JSONObject.html#toString(int)\r\n\r\n    JSONObject obj = ...\r\n    String jsonString = obj.toString(4);","title":"JSON.stringify in java - android","body":"<p><code>JSON.stringify(JSONObject)</code> is a Javascript function and will not be available in Java. If you're using the <code>org.json.*</code> package built in the Android SDK, the equivalent would be to simply call <code>toString()</code> on your <code>JSONObject</code> instance, or the more human-friendly <code>toString(int)</code>.</p>\n\n<p><a href=\"http://developer.android.com/reference/org/json/JSONObject.html#toString()\" rel=\"noreferrer\">http://developer.android.com/reference/org/json/JSONObject.html#toString()</a>\n<a href=\"http://developer.android.com/reference/org/json/JSONObject.html#toString(int)\" rel=\"noreferrer\">http://developer.android.com/reference/org/json/JSONObject.html#toString(int)</a></p>\n\n<pre><code>JSONObject obj = ...\nString jsonString = obj.toString(4);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3892970,"reputation":11166,"user_id":3222695,"display_name":"nikis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1393528142,"creation_date":1393528142,"answer_id":22078083,"question_id":22077955,"body_markdown":"Basic actions with JSON objects in JAVA can be done either with a help of `org.json` package (included in Android SDK) or `javax.json` (part of JAVA EE). Both of them have `toString()` method for conversion of JSONObject to string:\r\n\r\n    //assuming you have object `jsonobject` of class `JSONObject`\r\n    String output = jsonobject.toString()","title":"JSON.stringify in java - android","body":"<p>Basic actions with JSON objects in JAVA can be done either with a help of <code>org.json</code> package (included in Android SDK) or <code>javax.json</code> (part of JAVA EE). Both of them have <code>toString()</code> method for conversion of JSONObject to string:</p>\n\n<pre><code>//assuming you have object `jsonobject` of class `JSONObject`\nString output = jsonobject.toString()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2656801,"reputation":856,"user_id":2297333,"display_name":"f10orf12"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1597971623,"creation_date":1439837662,"answer_id":32057656,"question_id":22077955,"body_markdown":"I know this is old, but I ran into the same problem. And there doesn&#39;t seem to be much about it here... so I thought I would add what I learned.\r\n\r\nI used a third-party library to aid in the endeavor: `org.codehaus.jackson`\r\nAll of the downloads for this can be found [here][1].\r\n\r\nFor base JSON functionality, you need to add the following jars to your project&#39;s libraries:\r\n   [jackson-mapper-asl][2]\r\nand \r\n   [jackson-core-asl][3]\r\n\r\nChoose the version your project needs. (Typically you can go with the latest stable build).  \r\n\r\nOnce they are imported in to your project&#39;s libraries, add the following `import` lines to your code:\r\n\r\n     import org.codehaus.jackson.JsonGenerationException;\r\n     import org.codehaus.jackson.map.JsonMappingException;\r\n     import org.codehaus.jackson.map.ObjectMapper;\r\n\r\nWith the java object defined and assigned values that you wish to convert to JSON and return as part of a RESTful web service\r\n\r\n    User u = new User();\r\n     u.firstName = &quot;Sample&quot;;\r\n     u.lastName = &quot;User&quot;;\r\n     u.email = &quot;sampleU@example.com&quot;;\r\n\r\n\tObjectMapper mapper = new ObjectMapper();\r\n\t\t\r\n\ttry {\r\n\t\t// convert user object to json string and return it \r\n\t\treturn mapper.writeValueAsString(u);\r\n\t}\r\n\r\n      // catch various errors\r\n      catch (JsonGenerationException e) {\r\n\t\te.printStackTrace();\r\n\t} \r\n      catch (JsonMappingException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n\r\nThe result should looks like this:\r\n`{&quot;firstName&quot;:&quot;Sample&quot;,&quot;lastName&quot;:&quot;User&quot;,&quot;email&quot;:&quot;sampleU@example.com&quot;}`\r\n\r\n  [1]: http://mvnrepository.com/artifact/org.codehaus.jackson\r\n  [2]: http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-mapper-asl\r\n  [3]: http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-core-asl","title":"JSON.stringify in java - android","body":"<p>I know this is old, but I ran into the same problem. And there doesn't seem to be much about it here... so I thought I would add what I learned.</p>\n<p>I used a third-party library to aid in the endeavor: <code>org.codehaus.jackson</code>\nAll of the downloads for this can be found <a href=\"http://mvnrepository.com/artifact/org.codehaus.jackson\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>For base JSON functionality, you need to add the following jars to your project's libraries:\n<a href=\"http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-mapper-asl\" rel=\"nofollow noreferrer\">jackson-mapper-asl</a>\nand\n<a href=\"http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-core-asl\" rel=\"nofollow noreferrer\">jackson-core-asl</a></p>\n<p>Choose the version your project needs. (Typically you can go with the latest stable build).</p>\n<p>Once they are imported in to your project's libraries, add the following <code>import</code> lines to your code:</p>\n<pre><code> import org.codehaus.jackson.JsonGenerationException;\n import org.codehaus.jackson.map.JsonMappingException;\n import org.codehaus.jackson.map.ObjectMapper;\n</code></pre>\n<p>With the java object defined and assigned values that you wish to convert to JSON and return as part of a RESTful web service</p>\n<pre><code>User u = new User();\n u.firstName = &quot;Sample&quot;;\n u.lastName = &quot;User&quot;;\n u.email = &quot;sampleU@example.com&quot;;\n\nObjectMapper mapper = new ObjectMapper();\n    \ntry {\n    // convert user object to json string and return it \n    return mapper.writeValueAsString(u);\n}\n\n  // catch various errors\n  catch (JsonGenerationException e) {\n    e.printStackTrace();\n} \n  catch (JsonMappingException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>The result should looks like this:\n<code>{&quot;firstName&quot;:&quot;Sample&quot;,&quot;lastName&quot;:&quot;User&quot;,&quot;email&quot;:&quot;sampleU@example.com&quot;}</code></p>\n"},{"tags":[],"owner":{"account_id":12595173,"reputation":477,"user_id":9160102,"display_name":"Bruno L."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694163758,"creation_date":1694163758,"answer_id":77065539,"question_id":22077955,"body_markdown":"More simple to import **com.google.gson.Gson**, code sample: `String json =  new Gson().toJson(yourObject);`","title":"JSON.stringify in java - android","body":"<p>More simple to import <strong>com.google.gson.Gson</strong>, code sample: <code>String json =  new Gson().toJson(yourObject);</code></p>\n"}],"owner":{"account_id":3083092,"reputation":445,"user_id":2610890,"accept_rate":88,"display_name":"בועז יערי"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154661,"favorite_count":0,"down_vote_count":1,"up_vote_count":31,"accepted_answer_id":22078038,"answer_count":4,"score":30,"last_activity_date":1694163758,"creation_date":1393527755,"question_id":22077955,"body_markdown":"Is there any way to perform a `JSON.stringify` in android?\r\n\r\nI keep seeing `JSON.stringify(JSONObject)` all around the web, but I cant find the JSON class in android.\r\n\r\n\r\nAny help?\r\n","title":"JSON.stringify in java - android","body":"<p>Is there any way to perform a <code>JSON.stringify</code> in android?</p>\n\n<p>I keep seeing <code>JSON.stringify(JSONObject)</code> all around the web, but I cant find the JSON class in android.</p>\n\n<p>Any help?</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"score":0,"creation_date":1694178825,"post_id":77065505,"comment_id":135861091,"body_markdown":"Are you using Hibernate? A while ago, I answered on a stackoverflow question and created a `ClientData` class that has an `_id` which is a String. The code can be found here: https://github.com/Lefeverw/stackoverflow-mongodb-query-example. You could try it out. If you have any questions or if it&#39;s not applicable to your situation, let me know.","body":"Are you using Hibernate? A while ago, I answered on a stackoverflow question and created a <code>ClientData</code> class that has an <code>_id</code> which is a String. The code can be found here: <a href=\"https://github.com/Lefeverw/stackoverflow-mongodb-query-example\" rel=\"nofollow noreferrer\">github.com/Lefeverw/stackoverflow-mongodb-query-example</a>. You could try it out. If you have any questions or if it&#39;s not applicable to your situation, let me know."},{"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"score":0,"creation_date":1694205013,"post_id":77065505,"comment_id":135865690,"body_markdown":"Can you share a bit more of your code or upload a minimal example? By default `_id` is an `ObjectId`, but it is not a strict requirement. Maybe something simple such as adding an annotation `@Id` on your entity could fix the issue.","body":"Can you share a bit more of your code or upload a minimal example? By default <code>_id</code> is an <code>ObjectId</code>, but it is not a strict requirement. Maybe something simple such as adding an annotation <code>@Id</code> on your entity could fix the issue."}],"owner":{"account_id":29204480,"reputation":33,"user_id":22373879,"display_name":"James Work account"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694163515,"creation_date":1694163515,"question_id":77065505,"body_markdown":"I am trying to get my mongoDB document&#39;s \\_id to be String instead of ObjectId. I have a model:\r\n\r\n```\r\npublic class Fruit {\r\n    String name;\r\n    String id;\r\n}\r\n// getter setter constructor\r\n```\r\n\r\nConnecting to the db:\r\n\r\n```\r\n\r\nCodecProvider pojoCodecProvider = PojoCodecProvider.builder().automatic(true).build();\r\nCodecRegistry pojoCodecRegistry = fromRegistries(getDefaultCodecRegistry(), fromProviders(pojoCodecProvider));\r\n\r\nMongoClient client = MongoClients.create(&quot;mongodb:....&quot;)\r\nMongoDatabase database = client.getDatabase(&quot;myDbName&quot;).withCodecRegistry(pojoCodecRegistry);\r\nMongoCollection&lt;Fruit&gt; collection = database.getCollection(&quot;Fruits&quot;, Fruit.class);\r\n\r\n// Inserting a document\r\nFruit newFruit = new Fruit(&quot;Apple&quot;);\r\ncollection.insertOne(newFruit);\r\n```\r\n\r\nWhen I look at the database now, the document&#39;s \\_id is an ObjectId instead of a String. I expected the \\_id to be String type when inserting into mongodb.\r\n\r\nI have tried this approach https://stackoverflow.com/questions/51888126/readstring-can-only-be-called-when-currentbsontype-is-string-not-when-currentbs\r\n\r\nWhere we decorate the `id` attribute with `@BsonProperty(&quot;_id&quot;)` but still the same result.","title":"Mongodb Java driver, make id a String instead of ObjectId","body":"<p>I am trying to get my mongoDB document's _id to be String instead of ObjectId. I have a model:</p>\n<pre><code>public class Fruit {\n    String name;\n    String id;\n}\n// getter setter constructor\n</code></pre>\n<p>Connecting to the db:</p>\n<pre><code>\nCodecProvider pojoCodecProvider = PojoCodecProvider.builder().automatic(true).build();\nCodecRegistry pojoCodecRegistry = fromRegistries(getDefaultCodecRegistry(), fromProviders(pojoCodecProvider));\n\nMongoClient client = MongoClients.create(&quot;mongodb:....&quot;)\nMongoDatabase database = client.getDatabase(&quot;myDbName&quot;).withCodecRegistry(pojoCodecRegistry);\nMongoCollection&lt;Fruit&gt; collection = database.getCollection(&quot;Fruits&quot;, Fruit.class);\n\n// Inserting a document\nFruit newFruit = new Fruit(&quot;Apple&quot;);\ncollection.insertOne(newFruit);\n</code></pre>\n<p>When I look at the database now, the document's _id is an ObjectId instead of a String. I expected the _id to be String type when inserting into mongodb.</p>\n<p>I have tried this approach <a href=\"https://stackoverflow.com/questions/51888126/readstring-can-only-be-called-when-currentbsontype-is-string-not-when-currentbs\">readString can only be called when CurrentBSONType is STRING, not when CurrentBSONType is OBJECT_ID</a></p>\n<p>Where we decorate the <code>id</code> attribute with <code>@BsonProperty(&quot;_id&quot;)</code> but still the same result.</p>\n"},{"tags":["java","tomcat","java-8","windows-subsystem-for-linux","tomcat9"],"comments":[{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1596877786,"post_id":63312469,"comment_id":111956173,"body_markdown":"Try starting Tomcat from command line, it may indicate the problem. Ensure catalina.sh is on path (manually to tomcat/bin), set JAVA_HOME (set it manually) to the jdk installation root. Check java -version to ensure path setting for JDK to jdk/din directory. Start Tomcat cataline.sh run. This may indicate what the issue is, give it a shot.","body":"Try starting Tomcat from command line, it may indicate the problem. Ensure catalina.sh is on path (manually to tomcat/bin), set JAVA_HOME (set it manually) to the jdk installation root. Check java -version to ensure path setting for JDK to jdk/din directory. Start Tomcat cataline.sh run. This may indicate what the issue is, give it a shot."},{"owner":{"account_id":9905560,"reputation":641,"user_id":7334180,"accept_rate":75,"display_name":"Holinc"},"score":0,"creation_date":1596881379,"post_id":63312469,"comment_id":111957053,"body_markdown":"I think you should go to the tomcat install directory to start it.","body":"I think you should go to the tomcat install directory to start it."}],"answers":[{"tags":[],"owner":{"account_id":1408759,"reputation":11681,"user_id":1335801,"accept_rate":50,"display_name":"QuickFix"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1598871100,"creation_date":1598871100,"answer_id":63669415,"question_id":63312469,"body_markdown":"It seems the tomcat9 package is broken.\r\n\r\nTo use tomcat9 on your WSL you may either : \r\n\r\n - download tomcat9 and install it by yourself\r\n - try to repair the broken install\r\n\r\nHere is what I did to repair the install on my computer :\r\n\r\n - Download a zip version of tomcat 9 from https://tomcat.apache.org/download-90.cgi\r\n - in windows explorer open the folder \\\\wsl$\\Ubuntu\\usr\\share\\tomcat9\r\n - In order to repair tomcat I copied all the missing folders from the zip to the wsl installation : conf, webapps and work\r\n - I also had to create the folder for the logs /usr/share/tomcat9/logs (you can either create it from linux shell or from windows explorer in \\\\wsl$\\Ubuntu)\r\n - Then I could start tomcat with `sudo /usr/share/tomcat9/bin/startup.sh` and get the logs in /usr/share/tomcat9/logs/catalina.out","title":"installing tomcat 9 on WSL","body":"<p>It seems the tomcat9 package is broken.</p>\n<p>To use tomcat9 on your WSL you may either :</p>\n<ul>\n<li>download tomcat9 and install it by yourself</li>\n<li>try to repair the broken install</li>\n</ul>\n<p>Here is what I did to repair the install on my computer :</p>\n<ul>\n<li>Download a zip version of tomcat 9 from <a href=\"https://tomcat.apache.org/download-90.cgi\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/download-90.cgi</a></li>\n<li>in windows explorer open the folder \\wsl$\\Ubuntu\\usr\\share\\tomcat9</li>\n<li>In order to repair tomcat I copied all the missing folders from the zip to the wsl installation : conf, webapps and work</li>\n<li>I also had to create the folder for the logs /usr/share/tomcat9/logs (you can either create it from linux shell or from windows explorer in \\wsl$\\Ubuntu)</li>\n<li>Then I could start tomcat with <code>sudo /usr/share/tomcat9/bin/startup.sh</code> and get the logs in /usr/share/tomcat9/logs/catalina.out</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2518783,"reputation":1521,"user_id":2189544,"display_name":"fuweichin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635469505,"creation_date":1635469505,"answer_id":69762509,"question_id":63312469,"body_markdown":"I solved the problem by following steps:\r\n\r\n1. enable systemd, see [WSL 2 - Enabling systemd](https://gist.github.com/djfdyuruiry/6720faa3f9fc59bfdf6284ee1f41f950)\r\n2. restart WSL Ubuntu, with cmd `wsl --shutdown` and `wsl -d Ubuntu genie -s`\r\n3. reinstall tomcat9, with shell `apt-get remove tomcat9` and `apt-get install tomcat9`\r\n\r\nthen type `service tomcat9 status`, see how things work in your machine.","title":"installing tomcat 9 on WSL","body":"<p>I solved the problem by following steps:</p>\n<ol>\n<li>enable systemd, see <a href=\"https://gist.github.com/djfdyuruiry/6720faa3f9fc59bfdf6284ee1f41f950\" rel=\"nofollow noreferrer\">WSL 2 - Enabling systemd</a></li>\n<li>restart WSL Ubuntu, with cmd <code>wsl --shutdown</code> and <code>wsl -d Ubuntu genie -s</code></li>\n<li>reinstall tomcat9, with shell <code>apt-get remove tomcat9</code> and <code>apt-get install tomcat9</code></li>\n</ol>\n<p>then type <code>service tomcat9 status</code>, see how things work in your machine.</p>\n"},{"tags":[],"owner":{"account_id":2546577,"reputation":1933,"user_id":2211268,"display_name":"Eamonn Kenny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694162547,"creation_date":1694162547,"answer_id":77065401,"question_id":63312469,"body_markdown":"shockingly, there is no `service tomcat9 status` on my machine after install the tomcat9-admin. But if I created /usr/share/tomcat9/log directory using sudo, I could then start tomcat9 using /usr/share/tomcat9/bin/startup.sh. I also had to run before this an unmask command:\r\n\r\n    sudo apt install systemctl\r\n    sudo systemctl unmask tomcat9\r\n    sudo mkdir /usr/share/tomcat9/log\r\n    sudo /usr/share/tomcat9/bin/startup.sh\r\n\r\nthis is still highly irregular. I think it might be to do with how WSL is handling ports because mariadb and apache2 don&#39;t suffer from the same issues (out of the box).","title":"installing tomcat 9 on WSL","body":"<p>shockingly, there is no <code>service tomcat9 status</code> on my machine after install the tomcat9-admin. But if I created /usr/share/tomcat9/log directory using sudo, I could then start tomcat9 using /usr/share/tomcat9/bin/startup.sh. I also had to run before this an unmask command:</p>\n<pre><code>sudo apt install systemctl\nsudo systemctl unmask tomcat9\nsudo mkdir /usr/share/tomcat9/log\nsudo /usr/share/tomcat9/bin/startup.sh\n</code></pre>\n<p>this is still highly irregular. I think it might be to do with how WSL is handling ports because mariadb and apache2 don't suffer from the same issues (out of the box).</p>\n"}],"owner":{"account_id":12887080,"reputation":47,"user_id":9320175,"display_name":"cornandme"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9556,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":63669415,"answer_count":3,"score":2,"last_activity_date":1694162547,"creation_date":1596867979,"question_id":63312469,"body_markdown":"After installing tomcat 9 on WSL, it isn&#39;t recognized by system.\r\n\r\nSince systemctl command doesn&#39;t work on WSL, I used below command:\r\n\r\n    sudo service tomcat9 start\r\n\r\nreturning \r\n\r\n    tomcat9: unrecognized service\r\n\r\n\r\nI followed 2 ways to install, but the same problem occurred.\r\n\r\nReferences are:\r\n\r\nhttps://www.digitalocean.com/community/tutorials/install-tomcat-9-ubuntu-1804\r\n\r\nhttps://linuxconfig.org/ubuntu-20-04-tomcat-installation\r\n\r\n\r\n\r\nIs there any clue for this problem?\r\n\r\n\r\nHere is my environment:\r\n\r\nwindows 10 version 2004\r\n\r\nubuntu 20.04 (WSL)\r\n\r\nopenjdk version: &quot;1.8.0_265&quot;\r\n\r\n\r\n**update:**\r\n\r\nI did same process on gcp vm instance on which ubuntu 20.04 is installed to investigate the problem, and found the process has no problem on ubuntu 20.04, not on WSL.\r\n\r\nSo I assume that this problem is derived from WSL.\r\n\r\nLogging all my process expecting someone to find a solution to install tomcat 9 on WSL-ubuntu.\r\n\r\n**java install**\r\n\r\n    sudo apt update\r\n    sudo apt install openjdk-8-jdk\r\n\r\nset JAVA_HOME in /etc/environment\r\n   \r\n\r\n    JAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64/jre/bin&quot;\r\n\r\n    source /etc/environment\r\n\r\n**tomcat 9 install**\r\n\r\n    sudo apt install tomcat9 tomcat9-admin\r\n\r\ncheck whether port 8080 is open (positive)\r\n\r\n    ss -ltn\r\n\r\ncheck whether service command works (positive)\r\n\r\n    sudo service tomcat9 stop\r\n    sudo service tomcat9 start","title":"installing tomcat 9 on WSL","body":"<p>After installing tomcat 9 on WSL, it isn't recognized by system.</p>\n<p>Since systemctl command doesn't work on WSL, I used below command:</p>\n<pre><code>sudo service tomcat9 start\n</code></pre>\n<p>returning</p>\n<pre><code>tomcat9: unrecognized service\n</code></pre>\n<p>I followed 2 ways to install, but the same problem occurred.</p>\n<p>References are:</p>\n<p><a href=\"https://www.digitalocean.com/community/tutorials/install-tomcat-9-ubuntu-1804\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/install-tomcat-9-ubuntu-1804</a></p>\n<p><a href=\"https://linuxconfig.org/ubuntu-20-04-tomcat-installation\" rel=\"nofollow noreferrer\">https://linuxconfig.org/ubuntu-20-04-tomcat-installation</a></p>\n<p>Is there any clue for this problem?</p>\n<p>Here is my environment:</p>\n<p>windows 10 version 2004</p>\n<p>ubuntu 20.04 (WSL)</p>\n<p>openjdk version: &quot;1.8.0_265&quot;</p>\n<p><strong>update:</strong></p>\n<p>I did same process on gcp vm instance on which ubuntu 20.04 is installed to investigate the problem, and found the process has no problem on ubuntu 20.04, not on WSL.</p>\n<p>So I assume that this problem is derived from WSL.</p>\n<p>Logging all my process expecting someone to find a solution to install tomcat 9 on WSL-ubuntu.</p>\n<p><strong>java install</strong></p>\n<pre><code>sudo apt update\nsudo apt install openjdk-8-jdk\n</code></pre>\n<p>set JAVA_HOME in /etc/environment</p>\n<pre><code>JAVA_HOME=&quot;/usr/lib/jvm/java-8-openjdk-amd64/jre/bin&quot;\n\nsource /etc/environment\n</code></pre>\n<p><strong>tomcat 9 install</strong></p>\n<pre><code>sudo apt install tomcat9 tomcat9-admin\n</code></pre>\n<p>check whether port 8080 is open (positive)</p>\n<pre><code>ss -ltn\n</code></pre>\n<p>check whether service command works (positive)</p>\n<pre><code>sudo service tomcat9 stop\nsudo service tomcat9 start\n</code></pre>\n"},{"tags":["java","spring","session","spring-security","timeout"],"answers":[{"tags":[],"owner":{"account_id":5294278,"reputation":53,"user_id":4225838,"display_name":"Арсений Плаксин"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1659455687,"creation_date":1659455687,"answer_id":73210432,"question_id":73177094,"body_markdown":"Found a solution. Spring security is unable to solve it, I used JavaScript. This solution sends request every minute and if response data is not null, redirect occurs. It works only with one logged in user in browser.\r\n\r\nHeader html page\r\n\r\n    &lt;script&gt;\r\n                setInterval(function() {\r\n                    $.ajax({\r\n                        url: &quot;/check-session&quot;,\r\n                        method: &quot;GET&quot;,\r\n                        contentType: &#39;application/json; charset=utf-8&#39;,\r\n                        success: function(data){\r\n                            if (data &amp;&amp; data.length &gt; 0) {\r\n                                window.location.replace(&quot;/login&quot;);\r\n                            }\r\n                        },\r\n                        error: function (data) {\r\n                            console.log(&quot;error&quot;);\r\n                            console.log(data);\r\n                        }\r\n                    })\r\n                }, 60000);\r\n        &lt;/script&gt;\r\n\r\nLoginController\r\n\r\n    @GetMapping(&quot;/check-session&quot;)\r\n    public ResponseEntity&lt;String&gt; checkSession() {\r\n        return new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n    }","title":"Spring security auto redirect to login page after session timeout","body":"<p>Found a solution. Spring security is unable to solve it, I used JavaScript. This solution sends request every minute and if response data is not null, redirect occurs. It works only with one logged in user in browser.</p>\n<p>Header html page</p>\n<pre><code>&lt;script&gt;\n            setInterval(function() {\n                $.ajax({\n                    url: &quot;/check-session&quot;,\n                    method: &quot;GET&quot;,\n                    contentType: 'application/json; charset=utf-8',\n                    success: function(data){\n                        if (data &amp;&amp; data.length &gt; 0) {\n                            window.location.replace(&quot;/login&quot;);\n                        }\n                    },\n                    error: function (data) {\n                        console.log(&quot;error&quot;);\n                        console.log(data);\n                    }\n                })\n            }, 60000);\n    &lt;/script&gt;\n</code></pre>\n<p>LoginController</p>\n<pre><code>@GetMapping(&quot;/check-session&quot;)\npublic ResponseEntity&lt;String&gt; checkSession() {\n    return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24523409,"reputation":21,"user_id":18436126,"display_name":"Anton Wijaya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694161572,"creation_date":1694161572,"answer_id":77065307,"question_id":73177094,"body_markdown":"thanks, I tried to implement this js, if i set interval lower than my session timeout, it results in my session never expires. In my case my session timeout might vary, so I need to set a variable value for interval\r\n\r\n```\r\n&lt;script th:inline=&quot;javascript&quot;&gt;\r\n   var sessionExpiresIn = [[${sessionExpiresIn}]];\r\n   if (sessionExpiresIn === null || sessionExpiresIn === undefined) {\r\n       sessionExpiresIn = 1799; // Default value\r\n   } else {\r\n       sessionExpiresIn = parseInt(sessionExpiresIn) + 1;\r\n    }\r\n&lt;/script&gt;\r\n```\r\nIf I didnt set default value it will results in infinite loop of check-session api calls\r\n","title":"Spring security auto redirect to login page after session timeout","body":"<p>thanks, I tried to implement this js, if i set interval lower than my session timeout, it results in my session never expires. In my case my session timeout might vary, so I need to set a variable value for interval</p>\n<pre><code>&lt;script th:inline=&quot;javascript&quot;&gt;\n   var sessionExpiresIn = [[${sessionExpiresIn}]];\n   if (sessionExpiresIn === null || sessionExpiresIn === undefined) {\n       sessionExpiresIn = 1799; // Default value\n   } else {\n       sessionExpiresIn = parseInt(sessionExpiresIn) + 1;\n    }\n&lt;/script&gt;\n</code></pre>\n<p>If I didnt set default value it will results in infinite loop of check-session api calls</p>\n"}],"owner":{"account_id":5294278,"reputation":53,"user_id":4225838,"display_name":"Арсений Плаксин"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3538,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73210432,"answer_count":2,"score":2,"last_activity_date":1694161572,"creation_date":1659196664,"question_id":73177094,"body_markdown":"I need to redirect automatically to login page after session timeout or at least show alert that session is expired, I tried to configure Spring Security, but it is not working ,debugger don&#39;t catch code in LogoutSuccessHandlerService after timeout. Maybe I missed something or this approach with Spring Security is wrong from the start? \r\nIf it is so, can somebody provide full working example of such task? I am using Spring Boot 2.5.6, Spring Security, front-end is html, javascript, JQuery and dataTable.\r\nHere is my code:\r\n\r\nSecurityConfig.java\r\n\r\n    private final AppProperties appProperties;\r\n\r\n    @Autowired\r\n    private LogoutSuccessHandlerService logoutSuccessHandlerService;\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) {\r\n        web.ignoring()\r\n                .antMatchers(&quot;/static/**&quot;)\r\n                .antMatchers(&quot;/webjars/**&quot;)\r\n                .antMatchers(&quot;/css/**&quot;)\r\n                .antMatchers(&quot;/fonts/**&quot;)\r\n                .antMatchers(&quot;/img/**&quot;)\r\n                .antMatchers(&quot;/js/**&quot;)\r\n                .antMatchers(&quot;/scripts/**&quot;)\r\n        ;\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .formLogin()\r\n                .loginPage(&quot;/login&quot;)\r\n                .permitAll()\r\n                .defaultSuccessUrl(&quot;/&quot;, true)\r\n                .failureUrl(&quot;/login?error=true&quot;)\r\n                .loginProcessingUrl(&quot;/j_spring_security_check&quot;)\r\n                .and()\r\n                .authorizeRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .logout()\r\n                .invalidateHttpSession(true)\r\n                .logoutSuccessHandler(logoutSuccessHandlerService)\r\n                .logoutSuccessUrl(&quot;/login&quot;)\r\n                .permitAll()\r\n                .and()\r\n                .csrf().disable();\r\n    }\r\n\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        AppProperties.Security security = appProperties.getSecurity();\r\n\r\n        auth.inMemoryAuthentication()\r\n                .withUser(security.getUser())\r\n                .password(passwordEncoder().encode(security.getPassword()))\r\n                .roles(security.getRole());\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\nLogoutSuccessHandlerService.java extends SimpleUrlLogoutSuccessHandler\r\n\r\n    @Override\r\n    public void onLogoutSuccess(HttpServletRequest request,\r\n                                HttpServletResponse response,\r\n                                Authentication authentication) throws IOException, ServletException {\r\n        if (authentication != null) {\r\n\r\n        }\r\n        log.info(&quot;logout success&quot;);\r\n        setDefaultTargetUrl(&quot;/login&quot;);\r\n        \r\n        super.onLogoutSuccess(request, response, authentication);\r\n    }\r\napplication-local.yml\r\n\r\nserver:\r\n  port: 8086\r\n  servlet:\r\n    session:\r\n      timeout: 2m\r\n\r\n\r\n\r\n","title":"Spring security auto redirect to login page after session timeout","body":"<p>I need to redirect automatically to login page after session timeout or at least show alert that session is expired, I tried to configure Spring Security, but it is not working ,debugger don't catch code in LogoutSuccessHandlerService after timeout. Maybe I missed something or this approach with Spring Security is wrong from the start?\nIf it is so, can somebody provide full working example of such task? I am using Spring Boot 2.5.6, Spring Security, front-end is html, javascript, JQuery and dataTable.\nHere is my code:</p>\n<p>SecurityConfig.java</p>\n<pre><code>private final AppProperties appProperties;\n\n@Autowired\nprivate LogoutSuccessHandlerService logoutSuccessHandlerService;\n\n@Override\npublic void configure(WebSecurity web) {\n    web.ignoring()\n            .antMatchers(&quot;/static/**&quot;)\n            .antMatchers(&quot;/webjars/**&quot;)\n            .antMatchers(&quot;/css/**&quot;)\n            .antMatchers(&quot;/fonts/**&quot;)\n            .antMatchers(&quot;/img/**&quot;)\n            .antMatchers(&quot;/js/**&quot;)\n            .antMatchers(&quot;/scripts/**&quot;)\n    ;\n}\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n            .formLogin()\n            .loginPage(&quot;/login&quot;)\n            .permitAll()\n            .defaultSuccessUrl(&quot;/&quot;, true)\n            .failureUrl(&quot;/login?error=true&quot;)\n            .loginProcessingUrl(&quot;/j_spring_security_check&quot;)\n            .and()\n            .authorizeRequests()\n            .anyRequest().authenticated()\n            .and()\n            .logout()\n            .invalidateHttpSession(true)\n            .logoutSuccessHandler(logoutSuccessHandlerService)\n            .logoutSuccessUrl(&quot;/login&quot;)\n            .permitAll()\n            .and()\n            .csrf().disable();\n}\n\n\n@Override\npublic void configure(AuthenticationManagerBuilder auth) throws Exception {\n    AppProperties.Security security = appProperties.getSecurity();\n\n    auth.inMemoryAuthentication()\n            .withUser(security.getUser())\n            .password(passwordEncoder().encode(security.getPassword()))\n            .roles(security.getRole());\n}\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>LogoutSuccessHandlerService.java extends SimpleUrlLogoutSuccessHandler</p>\n<pre><code>@Override\npublic void onLogoutSuccess(HttpServletRequest request,\n                            HttpServletResponse response,\n                            Authentication authentication) throws IOException, ServletException {\n    if (authentication != null) {\n\n    }\n    log.info(&quot;logout success&quot;);\n    setDefaultTargetUrl(&quot;/login&quot;);\n    \n    super.onLogoutSuccess(request, response, authentication);\n}\n</code></pre>\n<p>application-local.yml</p>\n<p>server:\nport: 8086\nservlet:\nsession:\ntimeout: 2m</p>\n"},{"tags":["java","decimal","bigdecimal"],"answers":[{"tags":[],"owner":{"account_id":22779,"reputation":129011,"user_id":56541,"accept_rate":81,"display_name":"David Z"},"down_vote_count":1,"up_vote_count":51,"is_accepted":true,"score":50,"last_activity_date":1250972536,"creation_date":1250972536,"answer_id":1316955,"question_id":1316945,"body_markdown":"Try `number.toBigInteger().toString()`","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>Try <code>number.toBigInteger().toString()</code></p>\n"},{"tags":[],"owner":{"account_id":6358,"reputation":386062,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1250976877,"creation_date":1250976877,"answer_id":1317093,"question_id":1316945,"body_markdown":"Use this.\r\n\r\n    BigDecimal truncated= number.setScale(0,BigDecimal.ROUND_DOWN);","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>Use this.</p>\n\n<pre><code>BigDecimal truncated= number.setScale(0,BigDecimal.ROUND_DOWN);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1250977583,"creation_date":1250977583,"answer_id":1317121,"question_id":1316945,"body_markdown":"BigDecimal without fractions is BigInteger. Why don&#39;t you just use BigInteger?\r\n","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>BigDecimal without fractions is BigInteger. Why don't you just use BigInteger?</p>\n"},{"tags":[],"owner":{"account_id":1991221,"reputation":1,"user_id":1785199,"display_name":"Vinayak Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366979672,"creation_date":1351591592,"answer_id":13136669,"question_id":1316945,"body_markdown":"    private void showDoubleNo(double n) {\r\n        double num = n; \r\n        int decimalPlace = 2; \r\n        BigDecimal bd = new BigDecimal(num); \r\n        bd = bd.setScale(decimalPlace,BigDecimal.ROUND_UP); \r\n        System.out.println(&quot;Point is &quot;+bd); \r\n    }","title":"Java BigDecimal remove decimal and trailing numbers","body":"<pre><code>private void showDoubleNo(double n) {\n    double num = n; \n    int decimalPlace = 2; \n    BigDecimal bd = new BigDecimal(num); \n    bd = bd.setScale(decimalPlace,BigDecimal.ROUND_UP); \n    System.out.println(\"Point is \"+bd); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5453782,"reputation":71,"user_id":4337849,"display_name":"Flavio H. Furlanetto"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1441573643,"creation_date":1441573643,"answer_id":32428320,"question_id":1316945,"body_markdown":"Here&#39;s the most elegant way I found to resolve this:\r\n\r\n    public static String convertDecimalToString (BigDecimal num){\r\n        String ret = null;\r\n        try {\r\n            ret = num.toBigIntegerExact().toString();\r\n        } catch (ArithmeticException e){\r\n            num = num.setScale(2,BigDecimal.ROUND_UP); \r\n            ret = num.toPlainString();\r\n        }\r\n        return ret;\r\n    }","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>Here's the most elegant way I found to resolve this:</p>\n\n<pre><code>public static String convertDecimalToString (BigDecimal num){\n    String ret = null;\n    try {\n        ret = num.toBigIntegerExact().toString();\n    } catch (ArithmeticException e){\n        num = num.setScale(2,BigDecimal.ROUND_UP); \n        ret = num.toPlainString();\n    }\n    return ret;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9712794,"reputation":849,"user_id":7204083,"display_name":"puneetShanbhag"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1479977145,"creation_date":1479976608,"answer_id":40781421,"question_id":1316945,"body_markdown":"    public static String convertBigDecimalToString(BigDecimal bg) {\r\n\t      System.out.println(&quot;Big Decimal Value before its convertion :&quot; + bg.setScale(2, BigDecimal.ROUND_HALF_UP));\r\n\r\n\t      String bigDecStringValue = bg.setScale(0,BigDecimal.ROUND_HALF_UP).toPlainString();\r\n\r\n\t      System.out.println(&quot;Big Decimal String Value after removing Decimal places is :&quot; + bigDecStringValue);\r\n\r\n\t      return bigDecStringValue;\r\n    }\r\n\r\nPlease note : I have used &#39;BigDecimal.ROUND_HALF_UP&#39; , just to make sure, Rounding mode to round towards &quot;nearest neighbor&quot; unless both neighbors are equidistant","title":"Java BigDecimal remove decimal and trailing numbers","body":"<pre><code>public static String convertBigDecimalToString(BigDecimal bg) {\n      System.out.println(\"Big Decimal Value before its convertion :\" + bg.setScale(2, BigDecimal.ROUND_HALF_UP));\n\n      String bigDecStringValue = bg.setScale(0,BigDecimal.ROUND_HALF_UP).toPlainString();\n\n      System.out.println(\"Big Decimal String Value after removing Decimal places is :\" + bigDecStringValue);\n\n      return bigDecStringValue;\n}\n</code></pre>\n\n<p>Please note : I have used 'BigDecimal.ROUND_HALF_UP' , just to make sure, Rounding mode to round towards \"nearest neighbor\" unless both neighbors are equidistant</p>\n"},{"tags":[],"owner":{"account_id":18126074,"reputation":51,"user_id":13181599,"display_name":"Mahammad Yusifov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694161402,"creation_date":1694161402,"answer_id":77065287,"question_id":1316945,"body_markdown":"\r\nThis worked for me:\r\n\r\n````\r\nnumber.toPlainString();\r\n````","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>This worked for me:</p>\n<pre><code>number.toPlainString();\n</code></pre>\n"}],"owner":{"account_id":16053,"reputation":1866,"user_id":34571,"accept_rate":100,"display_name":"Zero Cool"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79657,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":1316955,"answer_count":7,"score":23,"last_activity_date":1694161402,"creation_date":1250972380,"question_id":1316945,"body_markdown":"I&#39;m new to Java and trying to take a BigDecimal (for example 99999999.99) and convert it to a string but without the decimal place and trailing numbers. Also, I don&#39;t want commas in the number and rounding is not needed.\r\n\r\nI&#39;ve tried:\r\n\r\n    Math.Truncate(number)\r\n\r\nbut BigDecimal is not supported.\r\n\r\nAny ideas?\r\n\r\nThanks very much.","title":"Java BigDecimal remove decimal and trailing numbers","body":"<p>I'm new to Java and trying to take a BigDecimal (for example 99999999.99) and convert it to a string but without the decimal place and trailing numbers. Also, I don't want commas in the number and rounding is not needed.</p>\n\n<p>I've tried:</p>\n\n<pre><code>Math.Truncate(number)\n</code></pre>\n\n<p>but BigDecimal is not supported.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks very much.</p>\n"},{"tags":["java","arrays","tostring"],"comments":[{"owner":{"account_id":13036707,"reputation":21,"user_id":9421376,"display_name":"Cocopapoo"},"score":0,"creation_date":1693372266,"post_id":77005117,"comment_id":135750197,"body_markdown":"-&gt;[100, 70, 90, 0, 0]\n-------------------------\nI want:\n-&gt;[100, 70, 90]","body":"-&gt;[100, 70, 90, 0, 0] ------------------------- I want: -&gt;[100, 70, 90]"}],"answers":[{"tags":[],"owner":{"account_id":13036707,"reputation":21,"user_id":9421376,"display_name":"Cocopapoo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694160074,"creation_date":1693378630,"answer_id":77005593,"question_id":77005117,"body_markdown":"Problem Solved!!\r\n\r\n```\r\npublic class ArrayStream4 {\r\n    public static void main(String[] args) {\r\n        int[] scores = {100, 50, 40, 70, 90};\r\n        int total = 0;\r\n        int max = scores[0];\r\n        int min = scores[0];\r\n        int passCount = 0;\r\n        List&lt;Integer&gt; newPassList = new ArrayList&lt;&gt;();\r\n\r\n        for (int score : scores) {\r\n            total += score;\r\n\r\n            if (score &gt; max) {\r\n                max = score;\r\n            }\r\n            if (score &lt; min) {\r\n                min = score;\r\n            }\r\n            if (score &gt;= 60) {\r\n                newPassList.add(score);\r\n                passCount++;\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;PassGrade: &quot; + newPassList);\r\n        System.out.printf(&quot;SumGrade: %d\\n&quot;, total);\r\n        System.out.printf(&quot;MINGrade: %d\\n&quot;, min);\r\n        System.out.printf(&quot;MAXGrade: %d\\n&quot;, max);\r\n        System.out.printf(&quot;PassCount: %d\\n&quot;, passCount);\r\n    }\r\n}\r\n```","title":"How can I print out newPassArray[i] as String in few lines in Java by NOT USING Stream?","body":"<p>Problem Solved!!</p>\n<pre><code>public class ArrayStream4 {\n    public static void main(String[] args) {\n        int[] scores = {100, 50, 40, 70, 90};\n        int total = 0;\n        int max = scores[0];\n        int min = scores[0];\n        int passCount = 0;\n        List&lt;Integer&gt; newPassList = new ArrayList&lt;&gt;();\n\n        for (int score : scores) {\n            total += score;\n\n            if (score &gt; max) {\n                max = score;\n            }\n            if (score &lt; min) {\n                min = score;\n            }\n            if (score &gt;= 60) {\n                newPassList.add(score);\n                passCount++;\n            }\n        }\n\n        System.out.println(&quot;PassGrade: &quot; + newPassList);\n        System.out.printf(&quot;SumGrade: %d\\n&quot;, total);\n        System.out.printf(&quot;MINGrade: %d\\n&quot;, min);\n        System.out.printf(&quot;MAXGrade: %d\\n&quot;, max);\n        System.out.printf(&quot;PassCount: %d\\n&quot;, passCount);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20487973,"reputation":21,"user_id":15034661,"display_name":"libing"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1693395865,"creation_date":1693395865,"answer_id":77007673,"question_id":77005117,"body_markdown":"Copy a new array and print.\r\n\r\n    System.out.println(&quot;PASS grade: &quot; + Arrays.toString(Arrays.copyOf(newPassArray, passingIndex)));","title":"How can I print out newPassArray[i] as String in few lines in Java by NOT USING Stream?","body":"<p>Copy a new array and print.</p>\n<pre><code>System.out.println(&quot;PASS grade: &quot; + Arrays.toString(Arrays.copyOf(newPassArray, passingIndex)));\n</code></pre>\n"}],"owner":{"account_id":13036707,"reputation":21,"user_id":9421376,"display_name":"Cocopapoo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694160074,"creation_date":1693372143,"question_id":77005117,"body_markdown":"Dear people who can solve this question, I truly appreciate your kindness!\r\nI am a new programming learner(less than 1 year)\r\n\r\nI try to use toSting() but it will print out the empty index too, how can i get rid off those empty index and just show the scores I want by NOT using Stream\r\nHere&#39;s my code:\r\n```\r\npublic class ArrayStream4 {\r\n    public static void main(String[] args) {\r\n        int [] scores = {100, 50, 40, 70, 90};\r\n        // Question: Please calculate the following: How many individuals have achieved a &quot;passing&quot; grade(i&gt;=60) and print out the grade? The total score? The average? The highest score? The lowest score?\r\n        \r\n        int total = 0; \r\n        int max = scores[0];\r\n        int min = scores[0];\r\n        int passCount = 0;\r\n        int [] newPassArray = new int[scores.length];\r\n        int passingIndex = 0;\r\n\r\n\r\n        for(int score : scores){\r\n            total += score;\r\n            \r\n            if(score &gt; max){\r\n                max = score;\r\n            }\r\n            if (score &lt; min){\r\n                min = score;\r\n            }\r\n            if(score &gt;= 60){\r\n                passCount ++;\r\n                newPassArray[passingIndex] = score;\r\n                passingIndex ++;\r\n            }\r\n        }\r\n            for (int i = 0; i &lt; passingIndex; i++) {\r\n                System.out.print(newPassArray[i]);\r\n                \r\n            }\r\n            System.out.println();\r\n            System.out.println(&quot;PASS grade: &quot; + Arrays.toString(newPassArray));\r\n            System.out.printf(&quot;Total grade: %d\\n&quot;, total);\r\n            System.out.printf(&quot;Min grade: %d\\n&quot;, min);\r\n            System.out.printf(&quot;Max grade: %d\\n&quot;, max);\r\n            System.out.printf(&quot;PASSCount: %d\\n&quot;, passCount);\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n","title":"How can I print out newPassArray[i] as String in few lines in Java by NOT USING Stream?","body":"<p>Dear people who can solve this question, I truly appreciate your kindness!\nI am a new programming learner(less than 1 year)</p>\n<p>I try to use toSting() but it will print out the empty index too, how can i get rid off those empty index and just show the scores I want by NOT using Stream\nHere's my code:</p>\n<pre><code>public class ArrayStream4 {\n    public static void main(String[] args) {\n        int [] scores = {100, 50, 40, 70, 90};\n        // Question: Please calculate the following: How many individuals have achieved a &quot;passing&quot; grade(i&gt;=60) and print out the grade? The total score? The average? The highest score? The lowest score?\n        \n        int total = 0; \n        int max = scores[0];\n        int min = scores[0];\n        int passCount = 0;\n        int [] newPassArray = new int[scores.length];\n        int passingIndex = 0;\n\n\n        for(int score : scores){\n            total += score;\n            \n            if(score &gt; max){\n                max = score;\n            }\n            if (score &lt; min){\n                min = score;\n            }\n            if(score &gt;= 60){\n                passCount ++;\n                newPassArray[passingIndex] = score;\n                passingIndex ++;\n            }\n        }\n            for (int i = 0; i &lt; passingIndex; i++) {\n                System.out.print(newPassArray[i]);\n                \n            }\n            System.out.println();\n            System.out.println(&quot;PASS grade: &quot; + Arrays.toString(newPassArray));\n            System.out.printf(&quot;Total grade: %d\\n&quot;, total);\n            System.out.printf(&quot;Min grade: %d\\n&quot;, min);\n            System.out.printf(&quot;Max grade: %d\\n&quot;, max);\n            System.out.printf(&quot;PASSCount: %d\\n&quot;, passCount);\n\n    }\n}\n\n</code></pre>\n"},{"tags":["java","jackson","line-breaks"],"comments":[{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1686130728,"post_id":76421001,"comment_id":134755791,"body_markdown":"Does this answer your question? [Json object contains new line character converted to &quot;\\n&quot; while converting json object to string or byte](https://stackoverflow.com/questions/29771911/json-object-contains-new-line-character-converted-to-n-while-converting-json)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/29771911/json-object-contains-new-line-character-converted-to-n-while-converting-json\">Json object contains new line character converted to &quot;\\n&quot; while converting json object to string or byte</a>"}],"owner":{"account_id":28770591,"reputation":1,"user_id":22034436,"display_name":"mert Div"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694159990,"creation_date":1686124000,"question_id":76421001,"body_markdown":"Body: I&#39;m using Jackson to serialize Java objects to JSON strings. However, I don&#39;t want Jackson to escape line breaks in the JSON strings. How can I configure Jackson to not handle line breaks?\r\n\r\nHere&#39;s an example of the Java code I&#39;m using:\r\n```\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.SerializationFeature;\r\n\r\npublic class MyObject {\r\n    private String message;\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n    public void setMessage(String message) {\r\n        this.message = message;\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        // Create an object\r\n        MyObject myObject = new MyObject();\r\n        myObject.setMessage(&quot;Hello,\\nWorld!&quot;);\r\n\r\n        // Create an ObjectMapper object\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n\r\n        // Convert the object to a JSON string\r\n        String jsonString = objectMapper.writeValueAsString(myObject);\r\n\r\n        // Output the JSON string\r\n        System.out.println(jsonString);\r\n    }\r\n}\r\n```\r\nWhen I run this code, the output is:\r\n```\r\n{&quot;message&quot;:&quot;Hello,\\nWorld!&quot;}\r\n```\r\nbreak line change to String\r\nHowever, I want the output to be:\r\n```\r\n{&quot;message&quot;:&quot;Hello,\r\nWorld!&quot;}\r\n```\r\nHello and World are in different line\r\nHow can I achieve this?","title":"How to configure Jackson to not handle line breaks in Spring boot project?","body":"<p>Body: I'm using Jackson to serialize Java objects to JSON strings. However, I don't want Jackson to escape line breaks in the JSON strings. How can I configure Jackson to not handle line breaks?</p>\n<p>Here's an example of the Java code I'm using:</p>\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\n\npublic class MyObject {\n    private String message;\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n    public static void main(String[] args) throws Exception {\n        // Create an object\n        MyObject myObject = new MyObject();\n        myObject.setMessage(&quot;Hello,\\nWorld!&quot;);\n\n        // Create an ObjectMapper object\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n\n        // Convert the object to a JSON string\n        String jsonString = objectMapper.writeValueAsString(myObject);\n\n        // Output the JSON string\n        System.out.println(jsonString);\n    }\n}\n</code></pre>\n<p>When I run this code, the output is:</p>\n<pre><code>{&quot;message&quot;:&quot;Hello,\\nWorld!&quot;}\n</code></pre>\n<p>break line change to String\nHowever, I want the output to be:</p>\n<pre><code>{&quot;message&quot;:&quot;Hello,\nWorld!&quot;}\n</code></pre>\n<p>Hello and World are in different line\nHow can I achieve this?</p>\n"},{"tags":["java","unit-testing","junit","resources"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":3,"creation_date":1424694011,"post_id":28673651,"comment_id":45640607,"body_markdown":"Out of curiosity: why do you want to know?","body":"Out of curiosity: why do you want to know?"},{"owner":{"account_id":5083509,"reputation":4080,"user_id":4477923,"accept_rate":69,"display_name":"Rory"},"score":4,"creation_date":1424694237,"post_id":28673651,"comment_id":45640734,"body_markdown":"@fge need to pass it to object under test, which uses it to load a file","body":"@fge need to pass it to object under test, which uses it to load a file"},{"owner":{"account_id":3453115,"reputation":1949,"user_id":2892277,"display_name":"Nikolay"},"score":0,"creation_date":1424694319,"post_id":28673651,"comment_id":45640776,"body_markdown":"@fge I had a similar case for JBoss -- get deployment (war file) name of application to read configuration from /etc/mycompany/deployment_name/config (we have a lot of instances of same application deployed at same time).","body":"@fge I had a similar case for JBoss -- get deployment (war file) name of application to read configuration from /etc/mycompany/deployment_name/config (we have a lot of instances of same application deployed at same time)."},{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":8,"creation_date":1424697866,"post_id":28673651,"comment_id":45642779,"body_markdown":"Direct file access to your resource directory is a bad idea.  Refactor your code to operate on a steam, or have your test create a copy in a TemporaryFolder first.","body":"Direct file access to your resource directory is a bad idea.  Refactor your code to operate on a steam, or have your test create a copy in a TemporaryFolder first."},{"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"score":0,"creation_date":1484415192,"post_id":28673651,"comment_id":70504474,"body_markdown":"Unfortunately, there are many libraries which accept only File objects (or Hadoop Path objects), not streams.  While one could simply copy the test data to a temp file, then use that, it would be easier to know the path.  Recognizing, of course, that anything built into a jar would defeat this.","body":"Unfortunately, there are many libraries which accept only File objects (or Hadoop Path objects), not streams.  While one could simply copy the test data to a temp file, then use that, it would be easier to know the path.  Recognizing, of course, that anything built into a jar would defeat this."},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":7,"creation_date":1519753577,"post_id":28673651,"comment_id":85034530,"body_markdown":"@OliverCharlesworth I agree about temp folders and use `org.junit.rules.TemporaryFolder` all the time... but... to copy from test/resources you need to know, er, its path!","body":"@OliverCharlesworth I agree about temp folders and use <code>org.junit.rules.TemporaryFolder</code> all the time... but... to copy from test/resources you need to know, er, its path!"},{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":2,"creation_date":1519756784,"post_id":28673651,"comment_id":85036276,"body_markdown":"@mikerodent - what I think meant was: read the resource via an inputstream, and then write it to a temporary file.","body":"@mikerodent - what I think meant was: read the resource via an inputstream, and then write it to a temporary file."},{"owner":{"account_id":368447,"reputation":24110,"user_id":715269,"accept_rate":60,"display_name":"Gangnus"},"score":0,"creation_date":1558964128,"post_id":28673651,"comment_id":99261890,"body_markdown":"There are three variants of solution, depending on the situation: https://stackoverflow.com/a/56327069/715269","body":"There are three variants of solution, depending on the situation: <a href=\"https://stackoverflow.com/a/56327069/715269\">stackoverflow.com/a/56327069/715269</a>"}],"answers":[{"tags":[],"owner":{"account_id":3849263,"reputation":2884,"user_id":3189818,"display_name":"ashosborne1"},"down_vote_count":6,"up_vote_count":248,"is_accepted":true,"score":242,"last_activity_date":1525628694,"creation_date":1424695810,"answer_id":28674230,"question_id":28673651,"body_markdown":"Try working with the `ClassLoader` class:    \t\t\r\n         \r\n    ClassLoader classLoader = getClass().getClassLoader();\r\n\tFile file = new File(classLoader.getResource(&quot;somefile&quot;).getFile());\r\n\tSystem.out.println(file.getAbsolutePath());\r\n\r\n\r\nA `ClassLoader` is responsible for loading in classes. Every class has a reference to a `ClassLoader`. This code returns a `File` from the resource directory. Calling `getAbsolutePath()` on it returns its absolute `Path`.\r\n\r\nJavadoc for `ClassLoader`: http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Try working with the <code>ClassLoader</code> class:           </p>\n\n<pre><code>ClassLoader classLoader = getClass().getClassLoader();\nFile file = new File(classLoader.getResource(\"somefile\").getFile());\nSystem.out.println(file.getAbsolutePath());\n</code></pre>\n\n<p>A <code>ClassLoader</code> is responsible for loading in classes. Every class has a reference to a <code>ClassLoader</code>. This code returns a <code>File</code> from the resource directory. Calling <code>getAbsolutePath()</code> on it returns its absolute <code>Path</code>.</p>\n\n<p>Javadoc for <code>ClassLoader</code>: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html</a></p>\n"},{"tags":[],"owner":{"account_id":2138679,"reputation":18996,"user_id":1897870,"display_name":"Steve C"},"down_vote_count":4,"up_vote_count":369,"is_accepted":false,"score":365,"last_activity_date":1424697191,"creation_date":1424696756,"answer_id":28674517,"question_id":28673651,"body_markdown":"You don&#39;t need to mess with class loaders. In fact it&#39;s a bad habit to get into because class loader resources are **not** java.io.File objects when they are in a jar archive.\r\n\r\nMaven automatically sets the current working directory before running tests, so you can just use:\r\n\r\n        File resourcesDirectory = new File(&quot;src/test/resources&quot;);\r\n\r\n`resourcesDirectory.getAbsolutePath()` will return the correct value if that is what you really need.\r\n\r\nI recommend creating a `src/test/data` directory if you want your tests to access data via the file system. This makes it clear what you&#39;re doing.","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>You don't need to mess with class loaders. In fact it's a bad habit to get into because class loader resources are <strong>not</strong> java.io.File objects when they are in a jar archive.</p>\n\n<p>Maven automatically sets the current working directory before running tests, so you can just use:</p>\n\n<pre><code>    File resourcesDirectory = new File(\"src/test/resources\");\n</code></pre>\n\n<p><code>resourcesDirectory.getAbsolutePath()</code> will return the correct value if that is what you really need.</p>\n\n<p>I recommend creating a <code>src/test/data</code> directory if you want your tests to access data via the file system. This makes it clear what you're doing.</p>\n"},{"tags":[],"owner":{"account_id":4363555,"reputation":3958,"user_id":3559967,"display_name":"HelloWorld101"},"down_vote_count":3,"up_vote_count":21,"is_accepted":false,"score":18,"last_activity_date":1653488056,"creation_date":1461753292,"answer_id":36887338,"question_id":28673651,"body_markdown":"I have a Maven3 project using JUnit 4.12 and Java8.\r\nIn order to get the path of a file called `myxml.xml` under `src/test/resources`, I do this from within the test case:\r\n\r\n    @Test\r\n    public void testApp()\r\n    {\r\n        File inputXmlFile = new File(this.getClass().getResource(&quot;/myxml.xml&quot;).getFile());\r\n        System.out.println(inputXmlFile.getAbsolutePath());\r\n        ...\r\n    }\r\n\r\n\r\nTested on Ubuntu 14.04 with IntelliJ IDE.\r\nReference [here][1].\r\n\r\n**Note**\r\n\r\nThe prepending `/` symbol is necessary, because `Class.getResource(String)` won&#39;t necessarily reveal entire file path (missing) along with `FileNotFoundException`.\r\n\r\n\r\n\r\n  [1]: http://jlorenzen.blogspot.de/2007/06/proper-way-to-access-file-resources-in.html","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>I have a Maven3 project using JUnit 4.12 and Java8.\nIn order to get the path of a file called <code>myxml.xml</code> under <code>src/test/resources</code>, I do this from within the test case:</p>\n<pre><code>@Test\npublic void testApp()\n{\n    File inputXmlFile = new File(this.getClass().getResource(&quot;/myxml.xml&quot;).getFile());\n    System.out.println(inputXmlFile.getAbsolutePath());\n    ...\n}\n</code></pre>\n<p>Tested on Ubuntu 14.04 with IntelliJ IDE.\nReference <a href=\"http://jlorenzen.blogspot.de/2007/06/proper-way-to-access-file-resources-in.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p><strong>Note</strong></p>\n<p>The prepending <code>/</code> symbol is necessary, because <code>Class.getResource(String)</code> won't necessarily reveal entire file path (missing) along with <code>FileNotFoundException</code>.</p>\n"},{"tags":[],"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1465430890,"creation_date":1465402169,"answer_id":37707661,"question_id":28673651,"body_markdown":"There are differences and constraints in options offered by @Steve C and @ashosborne1. They must be specified, I believe. \n\nWhen can we can use: `File resourcesDirectory = new File(&quot;src/test/resources&quot;);`?\n\n - 1 When tests are going to be run via maven only but not via IDE.\n - 2.1 When tests are going to be run via maven or\n - 2.2 via IDE and only one project is imported into IDE. (I use “imported” term, cause it is used in IntelliJ IDEA. I think users of eclipse also import their maven project). This will work, cause working directory when you run tests via IDE is the same as your project.\n - 3.1 When tests are going to be run via maven or \n - 3.2 via IDE, and more than one projects are imported into IDE (when you are not a student, you usually import several projects), **AND** before you run tests via IDE, you manually configure working directory for your tests. That working directory should refer to your imported project that contains the tests. By default, working directory of all projects imported into IDE is only one.  Probably it is a restriction of `IntelliJ IDEA` only, but I think all IDEs work like this. And this configuration that must be done manually, is not good at all. Working with several tests existing in different maven projects, but imported into one big “IDE” project, force us to remember this and don’t allow to relax and get pleasure from your work.\n\nSolution offered by @ashosborne1 (personally I prefer this one) requires 2 additional requirements that must be done before you run tests. Here is a list of steps to use this solution:\n\n - Create a test folder (“teva”) and file (“readme”) inside of  “src/test/resources/”:\n\n   src/test/resources/teva/readme\n\n   **File must be created in the test folder, otherwise, it will not work. Maven ignores empty folders.**\n - At least once build project via `mvn clean install`. It will run tests also. It may be enough to run only your test class/method via maven without building  a whole project. As a result your test resources will be copied into test-classes, here is a path: `target/test-classes/teva/readme`\n - After that, you can access the folder using code, already offered by @ashosborne1 (I&#39;m sorry, that I could not edit this code inside of this list  of items correctly):\n\n\n&gt;     public static final String TEVA_FOLDER = &quot;teva&quot;; ... \n&gt;     URL tevaUrl = YourTest.class.getClassLoader().getResource(TEVA_FOLDER); \n&gt;     String tevaTestFolder = new File(tevaUrl.toURI()).getAbsolutePath();\n\nNow you can run your test via IDE as many times as you want. Until you run mvn clean. It will drop the target folder.\n\n\nCreating file inside a test folder and running maven first time, before you run tests via IDE are needed steps. Without these steps, if you just in your IDE create test resources, then write test and run it via IDE only, you&#39;ll get an error. Running tests via mvn copies test resources into target/test-classes/teva/readme and they become accessible for a classloader.\n\n\nYou may ask, why do I need import more than one maven project in IDE and why so many complicated things? For me, one of the main motivation: keeping IDA-related files far from code. I first create a new project in my IDE. It is a fake project, that is just a holder of IDE-related files. Then, I import already existing maven projects. I force these imported projects to keep IDEA files in my original fake project only. As a result I don&#39;t see IDE-related files among the code. SVN should not see them (don&#39;t offer to configure svn/git to ignore such files, please). Also it is just very convenient.","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>There are differences and constraints in options offered by @Steve C and @ashosborne1. They must be specified, I believe.</p>\n<p>When can we can use: <code>File resourcesDirectory = new File(&quot;src/test/resources&quot;);</code>?</p>\n<ul>\n<li>1 When tests are going to be run via maven only but not via IDE.</li>\n<li>2.1 When tests are going to be run via maven or</li>\n<li>2.2 via IDE and only one project is imported into IDE. (I use “imported” term, cause it is used in IntelliJ IDEA. I think users of eclipse also import their maven project). This will work, cause working directory when you run tests via IDE is the same as your project.</li>\n<li>3.1 When tests are going to be run via maven or</li>\n<li>3.2 via IDE, and more than one projects are imported into IDE (when you are not a student, you usually import several projects), <strong>AND</strong> before you run tests via IDE, you manually configure working directory for your tests. That working directory should refer to your imported project that contains the tests. By default, working directory of all projects imported into IDE is only one.  Probably it is a restriction of <code>IntelliJ IDEA</code> only, but I think all IDEs work like this. And this configuration that must be done manually, is not good at all. Working with several tests existing in different maven projects, but imported into one big “IDE” project, force us to remember this and don’t allow to relax and get pleasure from your work.</li>\n</ul>\n<p>Solution offered by @ashosborne1 (personally I prefer this one) requires 2 additional requirements that must be done before you run tests. Here is a list of steps to use this solution:</p>\n<ul>\n<li><p>Create a test folder (“teva”) and file (“readme”) inside of  “src/test/resources/”:</p>\n<p>src/test/resources/teva/readme</p>\n<p><strong>File must be created in the test folder, otherwise, it will not work. Maven ignores empty folders.</strong></p>\n</li>\n<li><p>At least once build project via <code>mvn clean install</code>. It will run tests also. It may be enough to run only your test class/method via maven without building  a whole project. As a result your test resources will be copied into test-classes, here is a path: <code>target/test-classes/teva/readme</code></p>\n</li>\n<li><p>After that, you can access the folder using code, already offered by @ashosborne1 (I'm sorry, that I could not edit this code inside of this list  of items correctly):</p>\n</li>\n</ul>\n<blockquote>\n<pre><code>public static final String TEVA_FOLDER = &quot;teva&quot;; ... \nURL tevaUrl = YourTest.class.getClassLoader().getResource(TEVA_FOLDER); \nString tevaTestFolder = new File(tevaUrl.toURI()).getAbsolutePath();\n</code></pre>\n</blockquote>\n<p>Now you can run your test via IDE as many times as you want. Until you run mvn clean. It will drop the target folder.</p>\n<p>Creating file inside a test folder and running maven first time, before you run tests via IDE are needed steps. Without these steps, if you just in your IDE create test resources, then write test and run it via IDE only, you'll get an error. Running tests via mvn copies test resources into target/test-classes/teva/readme and they become accessible for a classloader.</p>\n<p>You may ask, why do I need import more than one maven project in IDE and why so many complicated things? For me, one of the main motivation: keeping IDA-related files far from code. I first create a new project in my IDE. It is a fake project, that is just a holder of IDE-related files. Then, I import already existing maven projects. I force these imported projects to keep IDEA files in my original fake project only. As a result I don't see IDE-related files among the code. SVN should not see them (don't offer to configure svn/git to ignore such files, please). Also it is just very convenient.</p>\n"},{"tags":[],"owner":{"account_id":3508394,"reputation":2007,"user_id":2933389,"accept_rate":100,"display_name":"Paramesh Korrakuti"},"down_vote_count":1,"up_vote_count":34,"is_accepted":false,"score":33,"last_activity_date":1472627841,"creation_date":1472627841,"answer_id":39243107,"question_id":28673651,"body_markdown":"If it&#39;s a spring project, we can use the below code to get files from **src/test/resource** folder.\r\n\r\n    File file = ResourceUtils.getFile(this.getClass().getResource(&quot;/some_file.txt&quot;));","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>If it's a spring project, we can use the below code to get files from <strong>src/test/resource</strong> folder.</p>\n\n<pre><code>File file = ResourceUtils.getFile(this.getClass().getResource(\"/some_file.txt\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1413237,"reputation":17260,"user_id":1339429,"accept_rate":89,"display_name":"JeanValjean"},"down_vote_count":0,"up_vote_count":92,"is_accepted":false,"score":92,"last_activity_date":1526469234,"creation_date":1487703231,"answer_id":42375654,"question_id":28673651,"body_markdown":"I would simply use [`Path`][1] from Java 7\r\n\r\n    Path resourceDirectory = Paths.get(&quot;src&quot;,&quot;test&quot;,&quot;resources&quot;);\r\n\r\nNeat and clean!\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>I would simply use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html\" rel=\"noreferrer\"><code>Path</code></a> from Java 7</p>\n\n<pre><code>Path resourceDirectory = Paths.get(\"src\",\"test\",\"resources\");\n</code></pre>\n\n<p>Neat and clean!</p>\n"},{"tags":[],"owner":{"account_id":224452,"reputation":19768,"user_id":484290,"accept_rate":59,"display_name":"Noor"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1489843285,"creation_date":1489843285,"answer_id":42874921,"question_id":28673651,"body_markdown":"The simplest and clean solution I uses, suppose the name of the test class is `TestQuery1` and there is a `resources` directory in your `test` folder as follows:\r\n\r\n    ├── java\r\n    │&#160;&#160; └── TestQuery1.java\r\n    └── resources\r\n        └── TestQuery1\r\n            ├── query.json\r\n            └── query.rq\r\n\r\nTo get the URI of `TestQuery1` do:\r\n\r\n    URL currentTestResourceFolder = getClass().getResource(&quot;/&quot;+getClass().getSimpleName());\r\n\r\nTo get the URI of one of the file `TestQuery1`, do:\r\n  \r\n\r\n    File exampleDir = new File(currentTestResourceFolder.toURI());\r\n    URI queryJSONFileURI = exampleDir.toURI().resolve(&quot;query.json&quot;);","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>The simplest and clean solution I uses, suppose the name of the test class is <code>TestQuery1</code> and there is a <code>resources</code> directory in your <code>test</code> folder as follows:</p>\n\n<pre><code>├── java\n│   └── TestQuery1.java\n└── resources\n    └── TestQuery1\n        ├── query.json\n        └── query.rq\n</code></pre>\n\n<p>To get the URI of <code>TestQuery1</code> do:</p>\n\n<pre><code>URL currentTestResourceFolder = getClass().getResource(\"/\"+getClass().getSimpleName());\n</code></pre>\n\n<p>To get the URI of one of the file <code>TestQuery1</code>, do:</p>\n\n<pre><code>File exampleDir = new File(currentTestResourceFolder.toURI());\nURI queryJSONFileURI = exampleDir.toURI().resolve(\"query.json\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4169031,"reputation":39,"user_id":3417297,"display_name":"GreatDantone"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1530913966,"creation_date":1508513405,"answer_id":46852453,"question_id":28673651,"body_markdown":"Use .getAbsolutePath() on your File object.\r\n\r\n    getClass().getResource(&quot;somefile&quot;).getFile().getAbsolutePath()","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Use .getAbsolutePath() on your File object.</p>\n\n<pre><code>getClass().getResource(\"somefile\").getFile().getAbsolutePath()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":187289,"reputation":1995,"user_id":425238,"display_name":"whitebrow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517386363,"creation_date":1517386363,"answer_id":48537432,"question_id":28673651,"body_markdown":"Use the following to inject Hibernate with Spring in your unit tests:\r\n\r\n    @Bean\r\n    public LocalSessionFactoryBean getLocalSessionFactoryBean() {\r\n        LocalSessionFactoryBean localSessionFactoryBean = new LocalSessionFactoryBean();\r\n        localSessionFactoryBean.setConfigLocation(new ClassPathResource(&quot;hibernate.cfg.xml&quot;));\r\n        localSessionFactoryBean.setPackagesToScan(&quot;com.example.yourpackage.model&quot;);\r\n        return localSessionFactoryBean;\r\n    }\r\n\r\nIf you don&#39;t have the ```hibernate.cfg.xml``` present in your ```src/test/resources``` folder it will automatically fall back to the one in your ```src/main/resources``` folder.","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Use the following to inject Hibernate with Spring in your unit tests:</p>\n\n<pre><code>@Bean\npublic LocalSessionFactoryBean getLocalSessionFactoryBean() {\n    LocalSessionFactoryBean localSessionFactoryBean = new LocalSessionFactoryBean();\n    localSessionFactoryBean.setConfigLocation(new ClassPathResource(\"hibernate.cfg.xml\"));\n    localSessionFactoryBean.setPackagesToScan(\"com.example.yourpackage.model\");\n    return localSessionFactoryBean;\n}\n</code></pre>\n\n<p>If you don't have the <code>hibernate.cfg.xml</code> present in your <code>src/test/resources</code> folder it will automatically fall back to the one in your <code>src/main/resources</code> folder.</p>\n"},{"tags":[],"owner":{"account_id":1301815,"reputation":31761,"user_id":1251549,"accept_rate":29,"display_name":"Cherry"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1530913918,"creation_date":1525509369,"answer_id":50187427,"question_id":28673651,"body_markdown":"All content in `src/test/resources` is copied into `target/test-classes` folder. So to get file from test resources during maven build you have to load it from `test-classes` folder, like that:\r\n\r\n  \r\n    Paths.get(\r\n        getClass().getProtectionDomain().getCodeSource().getLocation().toURI()\r\n    ).resolve(\r\n        Paths.get(&quot;somefile&quot;)\r\n    ).toFile()\r\n\r\nBreak down:\r\n\r\n 1. `getClass().getProtectionDomain().getCodeSource().getLocation().toURI()` - give you URI to `target/test-classes`.\r\n 1. `resolve(Paths.get(&quot;somefile&quot;))` - resolves `someFile` to `target/test-classes` folder.\r\n\r\nOriginal anwser is taken from [this][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/12178523/1251549","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>All content in <code>src/test/resources</code> is copied into <code>target/test-classes</code> folder. So to get file from test resources during maven build you have to load it from <code>test-classes</code> folder, like that:</p>\n\n<pre><code>Paths.get(\n    getClass().getProtectionDomain().getCodeSource().getLocation().toURI()\n).resolve(\n    Paths.get(\"somefile\")\n).toFile()\n</code></pre>\n\n<p>Break down:</p>\n\n<ol>\n<li><code>getClass().getProtectionDomain().getCodeSource().getLocation().toURI()</code> - give you URI to <code>target/test-classes</code>.</li>\n<li><code>resolve(Paths.get(\"somefile\"))</code> - resolves <code>someFile</code> to <code>target/test-classes</code> folder.</li>\n</ol>\n\n<p>Original anwser is taken from <a href=\"https://stackoverflow.com/a/12178523/1251549\">this</a></p>\n"},{"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1561113157,"creation_date":1536237590,"answer_id":52204348,"question_id":28673651,"body_markdown":"You can&#39;t use a file from a resource folder for tests in a common case. The reason is that  resource files in the resource folder are stored inside a jar. So they don&#39;t have a real path in the file system.\r\n\r\nThe most simple solution can be:\r\n\r\n 1. Copy a file from resources to the temporary folder and get a path to that temporary file.\r\n 2. Do tests using a temporary path.\r\n 3. Delete the temporary file.\r\n\r\n`TemporaryFolder` from `JUnit` can be used to create temporary files and delete it after test is complited. Classes from `guava` library are used to copy a file form resource folder. \r\n\r\nPlease, notice that if we use a subfolder in the resources folder, like `good` one, we don&#39;t have to add leading `/` to the resource path.\r\n\r\n    public class SomeTest {\r\n    \r\n        @Rule\r\n        public TemporaryFolder tmpFolder = new TemporaryFolder();\r\n    \r\n    \r\n        @Test\r\n        public void doSomethinge() throws IOException {\r\n            File file = createTmpFileFromResource(tmpFolder, &quot;file.txt&quot;);\r\n            File goodFile = createTmpFileFromResource(tmpFolder, &quot;good/file.txt&quot;);\r\n    \r\n            // do testing here\r\n        }\r\n    \r\n        private static File createTmpFileFromResource(TemporaryFolder folder,\r\n                                                      String classLoaderResource) throws IOException {\r\n            URL resource = Resources.getResource(classLoaderResource);\r\n    \r\n            File tmpFile = folder.newFile();\r\n            Resources.asByteSource(resource).copyTo(Files.asByteSink(tmpFile));\r\n            return tmpFile;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>You can't use a file from a resource folder for tests in a common case. The reason is that  resource files in the resource folder are stored inside a jar. So they don't have a real path in the file system.</p>\n\n<p>The most simple solution can be:</p>\n\n<ol>\n<li>Copy a file from resources to the temporary folder and get a path to that temporary file.</li>\n<li>Do tests using a temporary path.</li>\n<li>Delete the temporary file.</li>\n</ol>\n\n<p><code>TemporaryFolder</code> from <code>JUnit</code> can be used to create temporary files and delete it after test is complited. Classes from <code>guava</code> library are used to copy a file form resource folder. </p>\n\n<p>Please, notice that if we use a subfolder in the resources folder, like <code>good</code> one, we don't have to add leading <code>/</code> to the resource path.</p>\n\n<pre><code>public class SomeTest {\n\n    @Rule\n    public TemporaryFolder tmpFolder = new TemporaryFolder();\n\n\n    @Test\n    public void doSomethinge() throws IOException {\n        File file = createTmpFileFromResource(tmpFolder, \"file.txt\");\n        File goodFile = createTmpFileFromResource(tmpFolder, \"good/file.txt\");\n\n        // do testing here\n    }\n\n    private static File createTmpFileFromResource(TemporaryFolder folder,\n                                                  String classLoaderResource) throws IOException {\n        URL resource = Resources.getResource(classLoaderResource);\n\n        File tmpFile = folder.newFile();\n        Resources.asByteSource(resource).copyTo(Files.asByteSink(tmpFile));\n        return tmpFile;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5916763,"reputation":3250,"user_id":4655324,"accept_rate":79,"display_name":"Mevl&#252;t&#214;zdemir"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1578474865,"creation_date":1578474865,"answer_id":59642663,"question_id":28673651,"body_markdown":"With Spring you could easily read it from the resources folder (either main/resources or test/resources):\r\n\r\nFor example create a file: `test/resources/subfolder/sample.json`\r\n\r\n\r\n    @Test\r\n    public void testReadFile() {\r\n        String json = this.readFile(&quot;classpath:subfolder/sample.json&quot;);\r\n        System.out.println(json);\r\n    }\r\n\r\n    public String readFile(String path) {\r\n        try {\r\n            File file = ResourceUtils.getFile(path);\r\n            return new String(Files.readAllBytes(file.toPath()));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return null;\r\n    }","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>With Spring you could easily read it from the resources folder (either main/resources or test/resources):</p>\n\n<p>For example create a file: <code>test/resources/subfolder/sample.json</code></p>\n\n<pre><code>@Test\npublic void testReadFile() {\n    String json = this.readFile(\"classpath:subfolder/sample.json\");\n    System.out.println(json);\n}\n\npublic String readFile(String path) {\n    try {\n        File file = ResourceUtils.getFile(path);\n        return new String(Files.readAllBytes(file.toPath()));\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5588556,"reputation":8451,"user_id":4428471,"accept_rate":46,"display_name":"zhuguowei"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1592303657,"creation_date":1591325026,"answer_id":62207262,"question_id":28673651,"body_markdown":"```\r\nList&lt;String&gt; lines = Files.readAllLines(Paths.get(&quot;src/test/resources/foo.txt&quot;));\r\nlines.forEach(System.out::println);\r\n```","title":"How to get the path of src/test/resources directory in JUnit?","body":"<pre><code>List&lt;String&gt; lines = Files.readAllLines(Paths.get(\"src/test/resources/foo.txt\"));\nlines.forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6283683,"reputation":3277,"user_id":4883754,"display_name":"Jess Chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603445639,"creation_date":1603445639,"answer_id":64497516,"question_id":28673651,"body_markdown":"With Spring, you can use this:\r\n```java\r\nimport org.springframework.core.io.ClassPathResource;\r\n\r\n// Don&#39;t worry when use a not existed directory or a empty directory\r\n// It can be used in @before\r\nString dir = new ClassPathResource(&quot;.&quot;).getFile().getAbsolutePath()+&quot;/&quot;+&quot;Your Path&quot;;\r\n```","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>With Spring, you can use this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.core.io.ClassPathResource;\n\n// Don't worry when use a not existed directory or a empty directory\n// It can be used in @before\nString dir = new ClassPathResource(&quot;.&quot;).getFile().getAbsolutePath()+&quot;/&quot;+&quot;Your Path&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5344220,"reputation":57,"user_id":4906168,"display_name":"Timur  Nurmagambetov"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1613828892,"creation_date":1613828892,"answer_id":66292293,"question_id":28673651,"body_markdown":"You can get where you are through\r\n\r\n    new File(&quot;.&quot;).getAbsolutePath()\r\n\r\nthen you can derive path to src/test/resources  \r\nusually it is just \r\n\r\n    new File(&quot;src/test/resources&quot;)\r\n\r\n","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>You can get where you are through</p>\n<pre><code>new File(&quot;.&quot;).getAbsolutePath()\n</code></pre>\n<p>then you can derive path to src/test/resources<br />\nusually it is just</p>\n<pre><code>new File(&quot;src/test/resources&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1015589,"reputation":1607,"user_id":2746335,"accept_rate":29,"display_name":"caduceus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637733053,"creation_date":1637733053,"answer_id":70091292,"question_id":28673651,"body_markdown":"Wow the correct answer is not here yet!\r\n\r\n    MyClass.class.getResource(&quot;/somefile&quot;);\r\n    MyClass.class.getResourceAsStream(&quot;/somefile&quot;);\r\n\r\nhttps://javachannel.org/posts/how-to-access-static-resources/\r\n","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Wow the correct answer is not here yet!</p>\n<pre><code>MyClass.class.getResource(&quot;/somefile&quot;);\nMyClass.class.getResourceAsStream(&quot;/somefile&quot;);\n</code></pre>\n<p><a href=\"https://javachannel.org/posts/how-to-access-static-resources/\" rel=\"nofollow noreferrer\">https://javachannel.org/posts/how-to-access-static-resources/</a></p>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694159928,"creation_date":1694159604,"answer_id":77065083,"question_id":28673651,"body_markdown":"Here is some helper functions when using Kotlin language:\r\n\r\n```kotlin\r\nprivate val resourceAccessor = object {}\r\n\r\nfun getResourceAsPath(name: String): Path = resourceAccessor\r\n    .javaClass\r\n    .getResource(&quot;/$name&quot;)!!\r\n    .toURI()\r\n    .toPath()\r\n\r\nfun getResourceAsURL(name: String): URL {\r\n    val testResourcesDirectory = Path(&quot;src/test/resources&quot;).absolutePathString()\r\n    return URL(&quot;file:$testResourcesDirectory/$name&quot;)\r\n}\r\n```\r\n\r\n```kotlin\r\nclass MyTests {\r\n    @Test\r\n    fun myTest() {\r\n        val myResource = getResourceAsPath(&quot;file.txt&quot;)\r\n        val absolutePath = myResource.absolutePathString()\r\n    }\r\n}\r\n```","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>Here is some helper functions when using Kotlin language:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>private val resourceAccessor = object {}\n\nfun getResourceAsPath(name: String): Path = resourceAccessor\n    .javaClass\n    .getResource(&quot;/$name&quot;)!!\n    .toURI()\n    .toPath()\n\nfun getResourceAsURL(name: String): URL {\n    val testResourcesDirectory = Path(&quot;src/test/resources&quot;).absolutePathString()\n    return URL(&quot;file:$testResourcesDirectory/$name&quot;)\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class MyTests {\n    @Test\n    fun myTest() {\n        val myResource = getResourceAsPath(&quot;file.txt&quot;)\n        val absolutePath = myResource.absolutePathString()\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5083509,"reputation":4080,"user_id":4477923,"accept_rate":69,"display_name":"Rory"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":511892,"favorite_count":0,"down_vote_count":0,"up_vote_count":332,"accepted_answer_id":28674230,"answer_count":17,"score":332,"last_activity_date":1694159928,"creation_date":1424693882,"question_id":28673651,"body_markdown":"I know I can load a file from src/test/resources with:\r\n\r\n    getClass().getResource(&quot;somefile&quot;).getFile()\r\n\r\nBut how can I get the full path to the src/test/resources **directory**, i.e. I don&#39;t want to load a file, I just want to know the path of the directory?\r\n","title":"How to get the path of src/test/resources directory in JUnit?","body":"<p>I know I can load a file from src/test/resources with:</p>\n<pre><code>getClass().getResource(&quot;somefile&quot;).getFile()\n</code></pre>\n<p>But how can I get the full path to the src/test/resources <strong>directory</strong>, i.e. I don't want to load a file, I just want to know the path of the directory?</p>\n"},{"tags":["java","ssl","smtp","jakarta-mail"],"owner":{"account_id":29386174,"reputation":11,"user_id":22515575,"display_name":"Peter M&#252;ller"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694159719,"creation_date":1694089602,"question_id":77059615,"body_markdown":"I am trying to send an email with jakarta mail, with tls and checkserveridentity but it fails with an exception:\r\n\r\n`jakarta.mail.MessagingException: Could not convert socket to TLS;\r\n  nested exception is:\r\n\tjava.io.IOException: Can&#39;t verify identity of server: XXXXXXXXXXX.com\r\n\tat org.eclipse.angus.mail@2.0.2/org.eclipse.angus.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:2173)`\r\n\r\nwhen i dig deeper it happens in the org.eclipse.angus.mail.util.SocketFetcher class:\r\n\r\n`java.lang.IllegalAccessException: class org.eclipse.angus.mail.util.SocketFetcher (in module org.eclipse.angus.mail) cannot access class sun.security.util.HostnameChecker (in module java.base) because module java.base does not export sun.security.util to module org.eclipse.angus.mail`\r\n\r\n\r\n\r\n\r\n\r\nI tried with Java jdk 11 and 17\r\nI&#39;m using jakarta.mail-api-2.1.2, jakarta.activation-api-2.1.2, angus-mail-2.0.2, angus-activation-2.0.1\r\n\r\nI found a bug report which seems similar but doesnt help:\r\n[text](https://github.com/jakartaee/mail-api/issues/391)\r\n\r\nMy code is: \r\n\r\n```\r\n        String to = &quot;some1@mail.com&quot;;\r\n        String from = &quot;some1@mail.com&quot;;\r\n        String host = &quot;mail.host.com&quot;;\r\n        final String username = &quot;some1@mail.com&quot;;\r\n        final String password = &quot;somePWD&quot;;\r\n \r\n\r\n        Properties properties = System.getProperties();\r\n        properties.setProperty(&quot;mail.smtp.host&quot;, host);\r\n        properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n        properties.setProperty(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n        properties.setProperty(&quot;mail.smtp.ssl.checkserveridentity&quot;, &quot;true&quot;);\r\n        properties.setProperty(&quot;mail.smtp.port&quot;, &quot;587&quot;);\r\n        properties.setProperty(&quot;mail.debug&quot;, &quot;true&quot;);\r\n        \r\n\t\tSession session = Session.getDefaultInstance(properties, new Authenticator() {\r\n             \r\n            protected PasswordAuthentication\r\n                    getPasswordAuthentication() {\r\n                return new PasswordAuthentication(username, password);\r\n            }\r\n        });\r\n\t \r\n\r\n\t\ttry {\r\n\t\t    MimeMessage message = new MimeMessage(session);\r\n\t\t     \r\n\t\t    // header field of the header.\r\n\t\t    message.setFrom(new InternetAddress(from));\r\n\t\t     \r\n\t\t    message.addRecipient(Message.RecipientType.TO,\r\n\t\t                          new InternetAddress(to));\r\n\t\t    message.setSubject(&quot;subject&quot;);\r\n\t\t    message.setText(&quot;Test mail&quot;);\r\n\t\t    // Send message\r\n\t\t    Transport.send(message, username, password);\r\n\t\t}\r\n\t\tcatch (MessagingException mex) {\r\n\t\t    mex.printStackTrace();\r\n\t\t}\r\n```\r\n\r\nWithout checkserveridentity it just works fine (properties.setProperty(&quot;mail.smtp.ssl.checkserveridentity&quot;, &quot;false&quot;).\r\n\r\nThe host uses a let&#39;s enrcypt certificate which is in my default truststore, so this shouldn&#39;t be the problem. \r\n\r\nDoes anyone have any suggestion, workarounds, bugfixes, new versions?","title":"jakarta mail with TLS and checkserver identity problem","body":"<p>I am trying to send an email with jakarta mail, with tls and checkserveridentity but it fails with an exception:</p>\n<p><code>jakarta.mail.MessagingException: Could not convert socket to TLS; nested exception is: java.io.IOException: Can't verify identity of server: XXXXXXXXXXX.com at org.eclipse.angus.mail@2.0.2/org.eclipse.angus.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:2173)</code></p>\n<p>when i dig deeper it happens in the org.eclipse.angus.mail.util.SocketFetcher class:</p>\n<p><code>java.lang.IllegalAccessException: class org.eclipse.angus.mail.util.SocketFetcher (in module org.eclipse.angus.mail) cannot access class sun.security.util.HostnameChecker (in module java.base) because module java.base does not export sun.security.util to module org.eclipse.angus.mail</code></p>\n<p>I tried with Java jdk 11 and 17\nI'm using jakarta.mail-api-2.1.2, jakarta.activation-api-2.1.2, angus-mail-2.0.2, angus-activation-2.0.1</p>\n<p>I found a bug report which seems similar but doesnt help:\n<a href=\"https://github.com/jakartaee/mail-api/issues/391\" rel=\"nofollow noreferrer\">text</a></p>\n<p>My code is:</p>\n<pre><code>        String to = &quot;some1@mail.com&quot;;\n        String from = &quot;some1@mail.com&quot;;\n        String host = &quot;mail.host.com&quot;;\n        final String username = &quot;some1@mail.com&quot;;\n        final String password = &quot;somePWD&quot;;\n \n\n        Properties properties = System.getProperties();\n        properties.setProperty(&quot;mail.smtp.host&quot;, host);\n        properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n        properties.setProperty(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n        properties.setProperty(&quot;mail.smtp.ssl.checkserveridentity&quot;, &quot;true&quot;);\n        properties.setProperty(&quot;mail.smtp.port&quot;, &quot;587&quot;);\n        properties.setProperty(&quot;mail.debug&quot;, &quot;true&quot;);\n        \n        Session session = Session.getDefaultInstance(properties, new Authenticator() {\n             \n            protected PasswordAuthentication\n                    getPasswordAuthentication() {\n                return new PasswordAuthentication(username, password);\n            }\n        });\n     \n\n        try {\n            MimeMessage message = new MimeMessage(session);\n             \n            // header field of the header.\n            message.setFrom(new InternetAddress(from));\n             \n            message.addRecipient(Message.RecipientType.TO,\n                                  new InternetAddress(to));\n            message.setSubject(&quot;subject&quot;);\n            message.setText(&quot;Test mail&quot;);\n            // Send message\n            Transport.send(message, username, password);\n        }\n        catch (MessagingException mex) {\n            mex.printStackTrace();\n        }\n</code></pre>\n<p>Without checkserveridentity it just works fine (properties.setProperty(&quot;mail.smtp.ssl.checkserveridentity&quot;, &quot;false&quot;).</p>\n<p>The host uses a let's enrcypt certificate which is in my default truststore, so this shouldn't be the problem.</p>\n<p>Does anyone have any suggestion, workarounds, bugfixes, new versions?</p>\n"},{"tags":["java","redirectstandardoutput"],"answers":[{"tags":[],"owner":{"account_id":5967909,"reputation":2992,"user_id":4993125,"accept_rate":48,"display_name":"Michael Lafayette"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694153906,"creation_date":1438099349,"answer_id":31681587,"question_id":31680099,"body_markdown":"I don&#39;t think so. The `PrintSteam` `System.err` does not appear to be modifiable and I do not see any way for `java.lang.System.setErr` to convey this functionality. ","title":"Disabling auto flush on standard error (Java)","body":"<p>I don't think so. The <code>PrintSteam</code> <code>System.err</code> does not appear to be modifiable and I do not see any way for <code>java.lang.System.setErr</code> to convey this functionality.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694159367,"creation_date":1694158994,"answer_id":77065022,"question_id":31680099,"body_markdown":"I think that OP&#39;s self-answer is incorrect.  \r\n\r\nThe answer is correct that `System.err` is not *directly* modifiable, and that `PrintStream` doesn&#39;t offer a way to toggle the autoflush setting.\r\n\r\nHowever, if you study the source code for `java.lang.System` you will notice that the default `err` stream is set to a `PrintStream` that is created with `autoFlush` set to `true`.  If you dig further you will see that this print stream wraps a `FileOutputStream` created for the `FileDescriptor.err` fd.\r\n\r\nAnd `System.setErr` is provided for cases where you need to update the (`final`) `System.err` variable.\r\n\r\nSo, you *should* be able to do this:\r\n\r\n       FileOutputStream fos = new FileOutputStream(FileDescriptor.err);\r\n       BufferedOutputStream bos = new BufferedOutputStream(fos);\r\n       String encoding = ...\r\n       PrintStream myErr = new PrintStream(bos, false, encoding);\r\n       System.setErr(myErr);\r\n\r\n-----------------\r\n\r\nI am not saying that this is a good idea though.\r\n\r\n&lt;sup&gt;It would even be possible to use reflection to break abstraction on the initial `PrintStream` in `System.err` and change the private `autoFlush` variable.  But that is **a bad idea** ... and I only mentioned it to point this out!&lt;/sup&gt;","title":"Disabling auto flush on standard error (Java)","body":"<p>I think that OP's self-answer is incorrect.</p>\n<p>The answer is correct that <code>System.err</code> is not <em>directly</em> modifiable, and that <code>PrintStream</code> doesn't offer a way to toggle the autoflush setting.</p>\n<p>However, if you study the source code for <code>java.lang.System</code> you will notice that the default <code>err</code> stream is set to a <code>PrintStream</code> that is created with <code>autoFlush</code> set to <code>true</code>.  If you dig further you will see that this print stream wraps a <code>FileOutputStream</code> created for the <code>FileDescriptor.err</code> fd.</p>\n<p>And <code>System.setErr</code> is provided for cases where you need to update the (<code>final</code>) <code>System.err</code> variable.</p>\n<p>So, you <em>should</em> be able to do this:</p>\n<pre><code>   FileOutputStream fos = new FileOutputStream(FileDescriptor.err);\n   BufferedOutputStream bos = new BufferedOutputStream(fos);\n   String encoding = ...\n   PrintStream myErr = new PrintStream(bos, false, encoding);\n   System.setErr(myErr);\n</code></pre>\n<hr />\n<p>I am not saying that this is a good idea though.</p>\n<p><sup>It would even be possible to use reflection to break abstraction on the initial <code>PrintStream</code> in <code>System.err</code> and change the private <code>autoFlush</code> variable.  But that is <strong>a bad idea</strong> ... and I only mentioned it to point this out!</sup></p>\n"}],"owner":{"account_id":5967909,"reputation":2992,"user_id":4993125,"accept_rate":48,"display_name":"Michael Lafayette"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":31681587,"answer_count":2,"score":1,"last_activity_date":1694159367,"creation_date":1438095629,"question_id":31680099,"body_markdown":"My standard error error and standard output are getting garbled and I want to be able to put &quot;\\n&quot; newline characters into standard error bound output without it auto-flushing. Is this physically possible in Java?","title":"Disabling auto flush on standard error (Java)","body":"<p>My standard error error and standard output are getting garbled and I want to be able to put \"\\n\" newline characters into standard error bound output without it auto-flushing. Is this physically possible in Java?</p>\n"},{"tags":["java","android","eclipse","swing","firebase-analytics"],"comments":[{"owner":{"account_id":16646173,"reputation":65,"user_id":12030436,"display_name":"outsidethecave"},"score":0,"creation_date":1612116742,"post_id":65982536,"comment_id":116660498,"body_markdown":"I haven&#39;t found anything this specific on the Firebase documentation","body":"I haven&#39;t found anything this specific on the Firebase documentation"},{"owner":{"account_id":6023206,"reputation":7991,"user_id":4729721,"display_name":"a_local_nobody"},"score":1,"creation_date":1612116851,"post_id":65982536,"comment_id":116660526,"body_markdown":"i think i understand what you&#39;re asking now, you&#39;re asking if there&#39;s a java (not android) equivalent of the analytics library, right ?","body":"i think i understand what you&#39;re asking now, you&#39;re asking if there&#39;s a java (not android) equivalent of the analytics library, right ?"},{"owner":{"account_id":13479916,"reputation":529,"user_id":9725562,"display_name":"Anshul1507"},"score":0,"creation_date":1612117829,"post_id":65982536,"comment_id":116660829,"body_markdown":"@a_local_nobody he is asking to show the analytics stats in an external desktop application instead of the firebase dashboard.","body":"@a_local_nobody he is asking to show the analytics stats in an external desktop application instead of the firebase dashboard."},{"owner":{"account_id":16646173,"reputation":65,"user_id":12030436,"display_name":"outsidethecave"},"score":0,"creation_date":1612123233,"post_id":65982536,"comment_id":116662347,"body_markdown":"@Anshul1507 yes, are you aware of any way to do it?","body":"@Anshul1507 yes, are you aware of any way to do it?"}],"answers":[{"tags":[],"owner":{"account_id":14423201,"reputation":840,"user_id":10418725,"display_name":"Jorn Rigter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694159322,"creation_date":1694159322,"answer_id":77065054,"question_id":65982536,"body_markdown":"You should be able to query your analytics data from the [Analytics Data API][1] in your Java Swing desktop app.\r\n\r\n\r\n  [1]: https://developers.google.com/analytics/devguides/reporting/data/v1","title":"Can I use Firebase Analytics to fetch data from an Android app and show it on a Java Swing desktop app?","body":"<p>You should be able to query your analytics data from the <a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1\" rel=\"nofollow noreferrer\">Analytics Data API</a> in your Java Swing desktop app.</p>\n"}],"owner":{"account_id":16646173,"reputation":65,"user_id":12030436,"display_name":"outsidethecave"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694159322,"creation_date":1612116339,"question_id":65982536,"body_markdown":"I have an Android application which is a social network based on movies. People can search for movies and create personalized movie lists, but also add friends and use basic social media functionalities.\r\n\r\nI already use FirebaseFirestore as a database and FirebaseAuth to authenticate users, but I would like to be able to use Analytics in order to store data such as number of users, number of movie searches, most popular movies etc.\r\n\r\nMy question is: can I view these statistics on a completely separate desktop app, built in Java Swing on Eclipse, which would act as a sort of admin console for my application? ","title":"Can I use Firebase Analytics to fetch data from an Android app and show it on a Java Swing desktop app?","body":"<p>I have an Android application which is a social network based on movies. People can search for movies and create personalized movie lists, but also add friends and use basic social media functionalities.</p>\n<p>I already use FirebaseFirestore as a database and FirebaseAuth to authenticate users, but I would like to be able to use Analytics in order to store data such as number of users, number of movie searches, most popular movies etc.</p>\n<p>My question is: can I view these statistics on a completely separate desktop app, built in Java Swing on Eclipse, which would act as a sort of admin console for my application?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-batch"],"comments":[{"owner":{"account_id":957259,"reputation":29625,"user_id":982341,"display_name":"GreyBeardedGeek"},"score":0,"creation_date":1671307595,"post_id":74837045,"comment_id":132073142,"body_markdown":"Hi, welcome! \nStackOverflow is intended to provide answers to specific technical questions.\nFew people, if any, are going to take what looks like your entire environment and codebase, and debug it for you. So, if you could do some debugging, some simplification, and find the specific problem, then maybe someone can help...","body":"Hi, welcome!  StackOverflow is intended to provide answers to specific technical questions. Few people, if any, are going to take what looks like your entire environment and codebase, and debug it for you. So, if you could do some debugging, some simplification, and find the specific problem, then maybe someone can help..."}],"answers":[{"tags":[],"owner":{"account_id":18394722,"reputation":27,"user_id":13399509,"display_name":"Francisco Valadares"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671323644,"creation_date":1671322877,"answer_id":74838356,"question_id":74837045,"body_markdown":"Please, could you check if the method &quot;afterJob&quot; is doing/happening other status as BatchStatus. ABANDONED?\r\n\r\n   \r\n\r\n     public void afterJob(JobExecution jobExecution) {\r\n            if (jobExecution.getStatus() == BatchStatus.ABANDONED) {\r\n    ...\r\n\r\n","title":"Spring Batch job not being called in Spring Boot","body":"<p>Please, could you check if the method &quot;afterJob&quot; is doing/happening other status as BatchStatus. ABANDONED?</p>\n<pre><code> public void afterJob(JobExecution jobExecution) {\n        if (jobExecution.getStatus() == BatchStatus.ABANDONED) {\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21083132,"reputation":3230,"user_id":15496965,"display_name":"Henning"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1671409645,"creation_date":1671409645,"answer_id":74845329,"question_id":74837045,"body_markdown":"Please try removing the annotation `@EnableBatchProcessing`.\r\n\r\nAs you&#39;re importing from the jakarta namespace, I assume you&#39;re using Spring Boot 3 and Spring Batch 5.\r\n\r\nWith Spring Boot 3, the Spring Batch annotation `@EnableBatchProcessing` now has the effect of disabling the auto-configuration for Spring Batch. If you expect that the exposed `Job` is automatically started on application start-up, then it&#39;s this auto-configuration that you&#39;re missing.","title":"Spring Batch job not being called in Spring Boot","body":"<p>Please try removing the annotation <code>@EnableBatchProcessing</code>.</p>\n<p>As you're importing from the jakarta namespace, I assume you're using Spring Boot 3 and Spring Batch 5.</p>\n<p>With Spring Boot 3, the Spring Batch annotation <code>@EnableBatchProcessing</code> now has the effect of disabling the auto-configuration for Spring Batch. If you expect that the exposed <code>Job</code> is automatically started on application start-up, then it's this auto-configuration that you're missing.</p>\n"}],"owner":{"account_id":21020065,"reputation":21,"user_id":15446615,"display_name":"David Williford"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1458,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1694158481,"creation_date":1671306668,"question_id":74837045,"body_markdown":"I am trying to run a Spring Batch job that takes in a CSV file and writes it into a HSQL imbedded database. My program is supposed to log when each row of the CSV is added to the DB, but it is not.I am getting no errors when running, but I know the job is not being called since it is not logging anything into my console.\r\n\r\n[This is my file system](https://i.stack.imgur.com/BDajC.png)\r\n\r\nThis is my BatchConfig.java (defines the Batch Job)\r\n\r\n```\r\npackage io.davidwilliford.wcdashboard.data;\r\n\r\nimport javax.sql.DataSource;\r\n\r\nimport org.springframework.batch.core.Job;\r\nimport org.springframework.batch.core.Step;\r\nimport org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;\r\nimport org.springframework.batch.core.job.builder.JobBuilder;\r\nimport org.springframework.batch.core.launch.support.RunIdIncrementer;\r\nimport org.springframework.batch.core.repository.JobRepository;\r\nimport org.springframework.batch.core.step.builder.StepBuilder;\r\nimport org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider;\r\nimport org.springframework.batch.item.database.JdbcBatchItemWriter;\r\nimport org.springframework.batch.item.database.builder.JdbcBatchItemWriterBuilder;\r\nimport org.springframework.batch.item.file.FlatFileItemReader;\r\nimport org.springframework.batch.item.file.builder.FlatFileItemReaderBuilder;\r\nimport org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.io.ClassPathResource;\r\nimport org.springframework.transaction.PlatformTransactionManager;\r\n\r\nimport io.davidwilliford.wcdashboard.model.Match;\r\n\r\n/**\r\n * Configuration class for our Batch I/O\r\n * \r\n * Reads, Processes and Writes from CSV file\r\n * Called for every line in our CSV\r\n */\r\n\r\n@Configuration\r\n@EnableBatchProcessing\r\n@ComponentScan(&quot;io.davidwilliford&quot;)\r\npublic class BatchConfig {\r\n\r\n    // includes EVERY field of CSV file\r\n    private final String[] FIELD_NAMES = new String[] {\r\n            &quot;match&quot;, &quot;dayofweek&quot;, &quot;match_time&quot;, &quot;home_team&quot;, &quot;away_team&quot;, &quot;home_xg&quot;, &quot;away_xg&quot;, &quot;score&quot;, &quot;attendance&quot;,\r\n            &quot;venue&quot;, &quot;referee&quot;, &quot;home_formation&quot;, &quot;away_formation&quot;, &quot;home_captain&quot;, &quot;away_captain&quot;, &quot;home_manager&quot;,\r\n            &quot;away_manager&quot;, &quot;home_possession&quot;, &quot;away_possession&quot;, &quot;home_completed_passes&quot;, &quot;home_attempted_pases&quot;,\r\n            &quot;away_completed_passes&quot;, &quot;away_attempted_pases&quot;, &quot;home_sot&quot;, &quot;away_sot&quot;, &quot;home_total_shots&quot;,\r\n            &quot;away_total_shots&quot;, &quot;home_saves&quot;, &quot;away_saves&quot;, &quot;home_fouls&quot;, &quot;away_fouls&quot;, &quot;home_corners&quot;, &quot;away_corners&quot;,\r\n            &quot;home_crosses&quot;, &quot;away_crosses&quot;, &quot;home_touches&quot;, &quot;away_touches&quot;, &quot;home_tackles&quot;, &quot;away_tackles&quot;,\r\n            &quot;home_interceptions&quot;, &quot;away_interceptions&quot;, &quot;home_aerials_won&quot;, &quot;away_aerials_won&quot;, &quot;home_clearances&quot;,\r\n            &quot;away_clearances&quot;, &quot;home_offsides&quot;, &quot;away_offsides&quot;, &quot;home_gks&quot;, &quot;away_gks&quot;, &quot;home_throw_ins&quot;,\r\n            &quot;away_throw_ins&quot;, &quot;home_long_balls&quot;, &quot;away_long_balls&quot;\r\n    };\r\n\r\n    /**\r\n     * Reader\r\n     * \r\n     * Reads from CSV file\r\n     * And turns into MatchInput object\r\n     */\r\n    @Bean\r\n    public FlatFileItemReader&lt;MatchInput&gt; reader() {\r\n        return new FlatFileItemReaderBuilder&lt;MatchInput&gt;()\r\n                .name(&quot;MatchItemReader&quot;)\r\n                .resource(new ClassPathResource(&quot;match-data.csv&quot;))\r\n                .linesToSkip(1)\r\n                .delimited()\r\n                .names(FIELD_NAMES)\r\n                .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;MatchInput&gt;() {\r\n                    {\r\n                        setTargetType(MatchInput.class);\r\n                    }\r\n                })\r\n                .build();\r\n    }\r\n\r\n    /**\r\n     * Processor\r\n     * \r\n     * Takes in MatchInput objects and makes Match objects\r\n     * Is encapsulated into its own class\r\n     */\r\n    @Bean\r\n    public MatchDataProcessor processor() {\r\n        return new MatchDataProcessor();\r\n    }\r\n\r\n    /**\r\n     * Writer\r\n     * \r\n     * Writes the information into Match objects\r\n     */\r\n    @Bean\r\n    public JdbcBatchItemWriter&lt;Match&gt; writer(DataSource dataSource) {\r\n        return new JdbcBatchItemWriterBuilder&lt;Match&gt;()\r\n                .itemSqlParameterSourceProvider(new BeanPropertyItemSqlParameterSourceProvider&lt;&gt;())\r\n                .sql(&quot;INSERT INTO matches (id, dayofweek, match_time, home_team, away_team, home_score, away_score, attendance, venue, referee, home_captain, away_captain,  home_manager, away_manager, home_total_shots, away_total_shots) &quot;\r\n                        +\r\n                        &quot;VALUES (:id, :dayofweek, :match_time, :home_team, :away_team, :home_score, :away_score, :attendance, :venue, :referee, :home_captain, :away_captain, : home_manager, :away_manager, :home_total_shots, :away_total_shots)&quot;)\r\n                .dataSource(dataSource)\r\n                .build();\r\n    }\r\n\r\n    /**\r\n     * Create a Job whose steps are to Read, Process and Write\r\n     */\r\n    @Bean\r\n    public Job importUserJob(JobRepository jobRepository, JobCompletionNotificationListener listener, Step step1) {\r\n        return new JobBuilder(&quot;importUserJob&quot;, jobRepository)\r\n                .incrementer(new RunIdIncrementer())\r\n                .listener(listener)\r\n                .flow(step1)\r\n                .end()\r\n                .build();\r\n    }\r\n\r\n    /**\r\n     * This is the step for the above job\r\n     * Calls reader, processor and writer (written above)\r\n     */\r\n    @Bean\r\n    public Step step1(JobRepository jobRepository, PlatformTransactionManager transactionManager,\r\n            JdbcBatchItemWriter&lt;Match&gt; writer) {\r\n        return new StepBuilder(&quot;step1&quot;, jobRepository)\r\n                .&lt;MatchInput, Match&gt;chunk(10, transactionManager)\r\n                .reader(reader())\r\n                .processor(processor())\r\n                .writer(writer)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nThis is my MatchInput.java class\r\n\r\n```\r\npackage io.davidwilliford.wcdashboard.data;\r\n\r\n/**\r\n * Class for match input\r\n * \r\n * Match will work as our Id\r\n * In total, there are 63 matches\r\n */\r\n\r\npublic class MatchInput {\r\n\r\n    /**\r\n     * Class attributes\r\n     */\r\n    private String match;\r\n    private String dayofweek;\r\n    private String match_time;\r\n    private String home_team;\r\n    private String away_team;\r\n    private String home_xg;\r\n    private String away_xg;\r\n    private String score;\r\n    private String attendance;\r\n    private String venue;\r\n    private String referee;\r\n    private String home_formation;\r\n    private String away_formation;\r\n    private String home_captain;\r\n    private String away_captain;\r\n    private String home_manager;\r\n    private String away_manager;\r\n    private String home_possession;\r\n    private String away_possession;\r\n    private String home_completed_passes;\r\n    private String home_attempted_pases;\r\n    private String away_completed_passes;\r\n    private String away_attempted_pases;\r\n    private String home_sot;\r\n    private String away_sot;\r\n    private String home_total_shots;\r\n    private String away_total_shots;\r\n    private String home_saves;\r\n    private String away_saves;\r\n    private String home_fouls;\r\n    private String away_fouls;\r\n    private String home_corners;\r\n    private String away_corners;\r\n    private String home_crosses;\r\n    private String away_crosses;\r\n    private String home_touches;\r\n    private String away_touches;\r\n    private String home_tackles;\r\n    private String away_tackles;\r\n    private String home_interceptions;\r\n    private String away_interceptions;\r\n    private String home_aerials_won;\r\n    private String away_aerials_won;\r\n    private String home_clearances;\r\n    private String away_clearances;\r\n    private String home_offsides;\r\n    private String away_offsides;\r\n    private String home_gks;\r\n    private String away_gks;\r\n    private String home_throw_ins;\r\n    private String away_throw_ins;\r\n    private String home_long_balls;\r\n    private String away_long_balls;\r\n   \r\n    // purposely left out getters and setters since they arent important \r\n\r\n}\r\n```\r\n\r\nThis is my Match.java model class\r\n\r\n```\r\npackage io.davidwilliford.wcdashboard.model;\r\n\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\n\r\n/**\r\n * This is the model class for all of our matches\r\n * \r\n * @Entity creates a table with this class\r\n */\r\n@Entity\r\n@Table(name = &quot;matches&quot;)\r\npublic class Match {\r\n\r\n    /**\r\n     * Class attributes\r\n     */\r\n\r\n    @Id\r\n    private int id;\r\n    private String dayofweek;\r\n    private String match_time;\r\n    private String home_team;\r\n    private String away_team;\r\n    private String home_score;\r\n    private String away_score;\r\n    private String attendance;\r\n    private String venue;\r\n    private String referee;\r\n    private String home_captain;\r\n    private String away_captain;\r\n    private String home_manager;\r\n    private String away_manager;\r\n    private String home_total_shots;\r\n    private String away_total_shots;\r\n\r\n    /**\r\n     * toString method\r\n     */\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Home Team: &quot; + this.home_team + &quot;, Away Team: &quot; + this.away_team;\r\n    }\r\n\r\n    /**\r\n     * Getters and Setters\r\n     */\r\n\r\n    public long getId() {\r\n\r\n}\r\n```\r\n\r\nAnd this is my JobCompleteNotificationListener.java class\r\n\r\nThis class is supposed to log the names from the home and away team upon completetion.\r\n\r\n```\r\npackage io.davidwilliford.wcdashboard.data;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.batch.core.BatchStatus;\r\nimport org.springframework.batch.core.JobExecution;\r\nimport org.springframework.batch.core.JobExecutionListener;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.jdbc.core.JdbcTemplate;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class JobCompletionNotificationListener implements JobExecutionListener {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(JobCompletionNotificationListener.class);\r\n\r\n    private final JdbcTemplate jdbcTemplate;\r\n\r\n    @Autowired\r\n    public JobCompletionNotificationListener(JdbcTemplate jdbcTemplate) {\r\n        this.jdbcTemplate = jdbcTemplate;\r\n    }\r\n\r\n    /**\r\n     * After job is complete,\r\n     * Return and print the 2 teams, and the time\r\n     */\r\n    @Override\r\n    public void afterJob(JobExecution jobExecution) {\r\n        if (jobExecution.getStatus() == BatchStatus.COMPLETED) {\r\n            log.info(&quot;!!! JOB FINISHED! Time to verify the results&quot;);\r\n\r\n            jdbcTemplate.query(&quot;SELECT home_team, away_team FROM match&quot;,\r\n                    (rs, row) -&gt; &quot;Home Team: &quot; + rs.getString(1) + &quot; Away Team: &quot;\r\n                            + rs.getString(2))\r\n                    .forEach(str -&gt; System.out.println(str));\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nNothing logs in my console when I run the spring boot application. Hopefully this is enough information, I can provide more if needed. Sincerely, thanks for anyone willing to help.\r\n\r\nThis program is intended to take in a CSV (2022 World Cup information) and imbed it into a HSQL embedded database within a Spring Boot application. I have followed the official Spring Boot guide for completing a Spring Batch Job (here: https://spring.io/guides/gs/batch-processing/ ) and have had no luck so far.","title":"Spring Batch job not being called in Spring Boot","body":"<p>I am trying to run a Spring Batch job that takes in a CSV file and writes it into a HSQL imbedded database. My program is supposed to log when each row of the CSV is added to the DB, but it is not.I am getting no errors when running, but I know the job is not being called since it is not logging anything into my console.</p>\n<p><a href=\"https://i.stack.imgur.com/BDajC.png\" rel=\"nofollow noreferrer\">This is my file system</a></p>\n<p>This is my BatchConfig.java (defines the Batch Job)</p>\n<pre><code>package io.davidwilliford.wcdashboard.data;\n\nimport javax.sql.DataSource;\n\nimport org.springframework.batch.core.Job;\nimport org.springframework.batch.core.Step;\nimport org.springframework.batch.core.configuration.annotation.EnableBatchProcessing;\nimport org.springframework.batch.core.job.builder.JobBuilder;\nimport org.springframework.batch.core.launch.support.RunIdIncrementer;\nimport org.springframework.batch.core.repository.JobRepository;\nimport org.springframework.batch.core.step.builder.StepBuilder;\nimport org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider;\nimport org.springframework.batch.item.database.JdbcBatchItemWriter;\nimport org.springframework.batch.item.database.builder.JdbcBatchItemWriterBuilder;\nimport org.springframework.batch.item.file.FlatFileItemReader;\nimport org.springframework.batch.item.file.builder.FlatFileItemReaderBuilder;\nimport org.springframework.batch.item.file.mapping.BeanWrapperFieldSetMapper;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.io.ClassPathResource;\nimport org.springframework.transaction.PlatformTransactionManager;\n\nimport io.davidwilliford.wcdashboard.model.Match;\n\n/**\n * Configuration class for our Batch I/O\n * \n * Reads, Processes and Writes from CSV file\n * Called for every line in our CSV\n */\n\n@Configuration\n@EnableBatchProcessing\n@ComponentScan(&quot;io.davidwilliford&quot;)\npublic class BatchConfig {\n\n    // includes EVERY field of CSV file\n    private final String[] FIELD_NAMES = new String[] {\n            &quot;match&quot;, &quot;dayofweek&quot;, &quot;match_time&quot;, &quot;home_team&quot;, &quot;away_team&quot;, &quot;home_xg&quot;, &quot;away_xg&quot;, &quot;score&quot;, &quot;attendance&quot;,\n            &quot;venue&quot;, &quot;referee&quot;, &quot;home_formation&quot;, &quot;away_formation&quot;, &quot;home_captain&quot;, &quot;away_captain&quot;, &quot;home_manager&quot;,\n            &quot;away_manager&quot;, &quot;home_possession&quot;, &quot;away_possession&quot;, &quot;home_completed_passes&quot;, &quot;home_attempted_pases&quot;,\n            &quot;away_completed_passes&quot;, &quot;away_attempted_pases&quot;, &quot;home_sot&quot;, &quot;away_sot&quot;, &quot;home_total_shots&quot;,\n            &quot;away_total_shots&quot;, &quot;home_saves&quot;, &quot;away_saves&quot;, &quot;home_fouls&quot;, &quot;away_fouls&quot;, &quot;home_corners&quot;, &quot;away_corners&quot;,\n            &quot;home_crosses&quot;, &quot;away_crosses&quot;, &quot;home_touches&quot;, &quot;away_touches&quot;, &quot;home_tackles&quot;, &quot;away_tackles&quot;,\n            &quot;home_interceptions&quot;, &quot;away_interceptions&quot;, &quot;home_aerials_won&quot;, &quot;away_aerials_won&quot;, &quot;home_clearances&quot;,\n            &quot;away_clearances&quot;, &quot;home_offsides&quot;, &quot;away_offsides&quot;, &quot;home_gks&quot;, &quot;away_gks&quot;, &quot;home_throw_ins&quot;,\n            &quot;away_throw_ins&quot;, &quot;home_long_balls&quot;, &quot;away_long_balls&quot;\n    };\n\n    /**\n     * Reader\n     * \n     * Reads from CSV file\n     * And turns into MatchInput object\n     */\n    @Bean\n    public FlatFileItemReader&lt;MatchInput&gt; reader() {\n        return new FlatFileItemReaderBuilder&lt;MatchInput&gt;()\n                .name(&quot;MatchItemReader&quot;)\n                .resource(new ClassPathResource(&quot;match-data.csv&quot;))\n                .linesToSkip(1)\n                .delimited()\n                .names(FIELD_NAMES)\n                .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;MatchInput&gt;() {\n                    {\n                        setTargetType(MatchInput.class);\n                    }\n                })\n                .build();\n    }\n\n    /**\n     * Processor\n     * \n     * Takes in MatchInput objects and makes Match objects\n     * Is encapsulated into its own class\n     */\n    @Bean\n    public MatchDataProcessor processor() {\n        return new MatchDataProcessor();\n    }\n\n    /**\n     * Writer\n     * \n     * Writes the information into Match objects\n     */\n    @Bean\n    public JdbcBatchItemWriter&lt;Match&gt; writer(DataSource dataSource) {\n        return new JdbcBatchItemWriterBuilder&lt;Match&gt;()\n                .itemSqlParameterSourceProvider(new BeanPropertyItemSqlParameterSourceProvider&lt;&gt;())\n                .sql(&quot;INSERT INTO matches (id, dayofweek, match_time, home_team, away_team, home_score, away_score, attendance, venue, referee, home_captain, away_captain,  home_manager, away_manager, home_total_shots, away_total_shots) &quot;\n                        +\n                        &quot;VALUES (:id, :dayofweek, :match_time, :home_team, :away_team, :home_score, :away_score, :attendance, :venue, :referee, :home_captain, :away_captain, : home_manager, :away_manager, :home_total_shots, :away_total_shots)&quot;)\n                .dataSource(dataSource)\n                .build();\n    }\n\n    /**\n     * Create a Job whose steps are to Read, Process and Write\n     */\n    @Bean\n    public Job importUserJob(JobRepository jobRepository, JobCompletionNotificationListener listener, Step step1) {\n        return new JobBuilder(&quot;importUserJob&quot;, jobRepository)\n                .incrementer(new RunIdIncrementer())\n                .listener(listener)\n                .flow(step1)\n                .end()\n                .build();\n    }\n\n    /**\n     * This is the step for the above job\n     * Calls reader, processor and writer (written above)\n     */\n    @Bean\n    public Step step1(JobRepository jobRepository, PlatformTransactionManager transactionManager,\n            JdbcBatchItemWriter&lt;Match&gt; writer) {\n        return new StepBuilder(&quot;step1&quot;, jobRepository)\n                .&lt;MatchInput, Match&gt;chunk(10, transactionManager)\n                .reader(reader())\n                .processor(processor())\n                .writer(writer)\n                .build();\n    }\n}\n</code></pre>\n<p>This is my MatchInput.java class</p>\n<pre><code>package io.davidwilliford.wcdashboard.data;\n\n/**\n * Class for match input\n * \n * Match will work as our Id\n * In total, there are 63 matches\n */\n\npublic class MatchInput {\n\n    /**\n     * Class attributes\n     */\n    private String match;\n    private String dayofweek;\n    private String match_time;\n    private String home_team;\n    private String away_team;\n    private String home_xg;\n    private String away_xg;\n    private String score;\n    private String attendance;\n    private String venue;\n    private String referee;\n    private String home_formation;\n    private String away_formation;\n    private String home_captain;\n    private String away_captain;\n    private String home_manager;\n    private String away_manager;\n    private String home_possession;\n    private String away_possession;\n    private String home_completed_passes;\n    private String home_attempted_pases;\n    private String away_completed_passes;\n    private String away_attempted_pases;\n    private String home_sot;\n    private String away_sot;\n    private String home_total_shots;\n    private String away_total_shots;\n    private String home_saves;\n    private String away_saves;\n    private String home_fouls;\n    private String away_fouls;\n    private String home_corners;\n    private String away_corners;\n    private String home_crosses;\n    private String away_crosses;\n    private String home_touches;\n    private String away_touches;\n    private String home_tackles;\n    private String away_tackles;\n    private String home_interceptions;\n    private String away_interceptions;\n    private String home_aerials_won;\n    private String away_aerials_won;\n    private String home_clearances;\n    private String away_clearances;\n    private String home_offsides;\n    private String away_offsides;\n    private String home_gks;\n    private String away_gks;\n    private String home_throw_ins;\n    private String away_throw_ins;\n    private String home_long_balls;\n    private String away_long_balls;\n   \n    // purposely left out getters and setters since they arent important \n\n}\n</code></pre>\n<p>This is my Match.java model class</p>\n<pre><code>package io.davidwilliford.wcdashboard.model;\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\n\n/**\n * This is the model class for all of our matches\n * \n * @Entity creates a table with this class\n */\n@Entity\n@Table(name = &quot;matches&quot;)\npublic class Match {\n\n    /**\n     * Class attributes\n     */\n\n    @Id\n    private int id;\n    private String dayofweek;\n    private String match_time;\n    private String home_team;\n    private String away_team;\n    private String home_score;\n    private String away_score;\n    private String attendance;\n    private String venue;\n    private String referee;\n    private String home_captain;\n    private String away_captain;\n    private String home_manager;\n    private String away_manager;\n    private String home_total_shots;\n    private String away_total_shots;\n\n    /**\n     * toString method\n     */\n\n    @Override\n    public String toString() {\n        return &quot;Home Team: &quot; + this.home_team + &quot;, Away Team: &quot; + this.away_team;\n    }\n\n    /**\n     * Getters and Setters\n     */\n\n    public long getId() {\n\n}\n</code></pre>\n<p>And this is my JobCompleteNotificationListener.java class</p>\n<p>This class is supposed to log the names from the home and away team upon completetion.</p>\n<pre><code>package io.davidwilliford.wcdashboard.data;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.batch.core.BatchStatus;\nimport org.springframework.batch.core.JobExecution;\nimport org.springframework.batch.core.JobExecutionListener;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class JobCompletionNotificationListener implements JobExecutionListener {\n\n    private static final Logger log = LoggerFactory.getLogger(JobCompletionNotificationListener.class);\n\n    private final JdbcTemplate jdbcTemplate;\n\n    @Autowired\n    public JobCompletionNotificationListener(JdbcTemplate jdbcTemplate) {\n        this.jdbcTemplate = jdbcTemplate;\n    }\n\n    /**\n     * After job is complete,\n     * Return and print the 2 teams, and the time\n     */\n    @Override\n    public void afterJob(JobExecution jobExecution) {\n        if (jobExecution.getStatus() == BatchStatus.COMPLETED) {\n            log.info(&quot;!!! JOB FINISHED! Time to verify the results&quot;);\n\n            jdbcTemplate.query(&quot;SELECT home_team, away_team FROM match&quot;,\n                    (rs, row) -&gt; &quot;Home Team: &quot; + rs.getString(1) + &quot; Away Team: &quot;\n                            + rs.getString(2))\n                    .forEach(str -&gt; System.out.println(str));\n        }\n    }\n}\n</code></pre>\n<p>Nothing logs in my console when I run the spring boot application. Hopefully this is enough information, I can provide more if needed. Sincerely, thanks for anyone willing to help.</p>\n<p>This program is intended to take in a CSV (2022 World Cup information) and imbed it into a HSQL embedded database within a Spring Boot application. I have followed the official Spring Boot guide for completing a Spring Batch Job (here: <a href=\"https://spring.io/guides/gs/batch-processing/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/batch-processing/</a> ) and have had no luck so far.</p>\n"},{"tags":["java","mysql","sockets","ssl","jdbc"],"owner":{"account_id":3748318,"reputation":31,"user_id":3116458,"display_name":"user3116458"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1356,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1694157866,"creation_date":1387395433,"question_id":20666906,"body_markdown":"I set system properties for a SSL-enabled MySQL client, which worked fine:\r\n\r\n    System.setProperty(&quot;javax.net.ssl.trustStore&quot;,&quot;truststore&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;,&quot;12345&quot;);\r\n    String url = &quot;jdbc:mysql://abc.com:3306/test?&quot; +\r\n                 &quot;user=abc&amp;password=123&quot; +\r\n                 &quot;&amp;useUnicode=true&quot; +\r\n                 &quot;&amp;characterEncoding=utf8&amp;useSSL=true&quot;\r\n\r\nA couple days ago I found the client couldn&#39;t connect to another web site in which a commercially signed SSL certificate is installed. Obviously the overriding keystores didn&#39;t work with regular https connections.\r\nThen I decided to build my version of SocketFactory based on StandardSocketFactory.java in MySQL Connector/J source.\r\n\r\nI added a method to create Socket objects in public Socket connect(String hostname, int portNumber, Properties props) method.\r\n\r\n    private Socket createSSLSocket(InetAddress address, int port) {\r\n\t\tSocket socket;\r\n\r\n\t\ttry {\r\n\t\t\tInputStream trustStream = new FileInputStream(new File(&quot;truststore&quot;));\r\n\t\t\tKeyStore trustStore = KeyStore.getInstance(&quot;JKS&quot;);\r\n\t\t\t\r\n                        // load the stream to your store\r\n\t\t\ttrustStore.load(trustStream, trustPassword);\r\n\r\n\t\t\t// initialize a trust manager factory with the trusted store\r\n\t\t\tTrustManagerFactory trustFactory = TrustManagerFactory.getInstance(&quot;PKIX&quot;, &quot;SunJSSE&quot;);\t\t\t        trustFactory.init(trustStore);\r\n\r\n\t\t\t// get the trust managers from the factory\r\n\t\t\tTrustManager[] trustManagers = trustFactory.getTrustManagers();\r\n\r\n\t\t\t// initialize an ssl context to use these managers and set as default\r\n\t\t\tSSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n\t\t\tsslContext.init(null, trustManagers, null);\r\n\t\t\tif(address == null) {\r\n\t\t\t\tsocket = sslContext.getSocketFactory().createSocket();\r\n\t\t\t} else {\r\n\t\t\t\tsocket = sslContext.getSocketFactory().createSocket(address, port);\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(e.getLocalizedMessage());\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn socket;\r\n\t}\r\n\r\nThe url passed to jdbc driver is changed to:\r\n\r\n        String url = &quot;jdbc:mysql://abc.com:3306/test?&quot; +\r\n                 &quot;user=abc&amp;password=123&quot; +\r\n                 &quot;&amp;useUnicode=true&quot; +\r\n                 &quot;&amp;characterEncoding=utf8&amp;useSSL=true&quot; +\r\n                 &quot;&amp;socketFactory=&quot; + MySocketFactory.class.getName();\r\n\r\nThe client did execute my version createSSLSocket() and return a Socket object. However, I got the following Exceptions after continuing the execution:\r\n\r\n\r\n        com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: \r\n        Communications link failure\r\n\r\n        The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n\r\n        javax.net.ssl.SSLException: \r\n        Unrecognized SSL message, plaintext connection?\r\n\r\nI&#39;m sure the MySQL was up and running, the address and port passed to createSSLSocket() were correct. Could anyone help? The client has to communicate to 2 sites at the same time: an HTTPS web server and a self-signed MySQL server.","title":"MySQL jdbc + SSL","body":"<p>I set system properties for a SSL-enabled MySQL client, which worked fine:</p>\n\n<pre><code>System.setProperty(\"javax.net.ssl.trustStore\",\"truststore\");\nSystem.setProperty(\"javax.net.ssl.trustStorePassword\",\"12345\");\nString url = \"jdbc:mysql://abc.com:3306/test?\" +\n             \"user=abc&amp;password=123\" +\n             \"&amp;useUnicode=true\" +\n             \"&amp;characterEncoding=utf8&amp;useSSL=true\"\n</code></pre>\n\n<p>A couple days ago I found the client couldn't connect to another web site in which a commercially signed SSL certificate is installed. Obviously the overriding keystores didn't work with regular https connections.\nThen I decided to build my version of SocketFactory based on StandardSocketFactory.java in MySQL Connector/J source.</p>\n\n<p>I added a method to create Socket objects in public Socket connect(String hostname, int portNumber, Properties props) method.</p>\n\n<pre><code>private Socket createSSLSocket(InetAddress address, int port) {\n    Socket socket;\n\n    try {\n        InputStream trustStream = new FileInputStream(new File(\"truststore\"));\n        KeyStore trustStore = KeyStore.getInstance(\"JKS\");\n\n                    // load the stream to your store\n        trustStore.load(trustStream, trustPassword);\n\n        // initialize a trust manager factory with the trusted store\n        TrustManagerFactory trustFactory = TrustManagerFactory.getInstance(\"PKIX\", \"SunJSSE\");                  trustFactory.init(trustStore);\n\n        // get the trust managers from the factory\n        TrustManager[] trustManagers = trustFactory.getTrustManagers();\n\n        // initialize an ssl context to use these managers and set as default\n        SSLContext sslContext = SSLContext.getInstance(\"SSL\");\n        sslContext.init(null, trustManagers, null);\n        if(address == null) {\n            socket = sslContext.getSocketFactory().createSocket();\n        } else {\n            socket = sslContext.getSocketFactory().createSocket(address, port);\n        }\n    } catch (Exception e) {\n        System.out.println(e.getLocalizedMessage());\n        return null;\n    }\n    return socket;\n}\n</code></pre>\n\n<p>The url passed to jdbc driver is changed to:</p>\n\n<pre><code>    String url = \"jdbc:mysql://abc.com:3306/test?\" +\n             \"user=abc&amp;password=123\" +\n             \"&amp;useUnicode=true\" +\n             \"&amp;characterEncoding=utf8&amp;useSSL=true\" +\n             \"&amp;socketFactory=\" + MySocketFactory.class.getName();\n</code></pre>\n\n<p>The client did execute my version createSSLSocket() and return a Socket object. However, I got the following Exceptions after continuing the execution:</p>\n\n<pre><code>    com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: \n    Communications link failure\n\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n\n    javax.net.ssl.SSLException: \n    Unrecognized SSL message, plaintext connection?\n</code></pre>\n\n<p>I'm sure the MySQL was up and running, the address and port passed to createSSLSocket() were correct. Could anyone help? The client has to communicate to 2 sites at the same time: an HTTPS web server and a self-signed MySQL server.</p>\n"},{"tags":["java","video","h.264","video-encoding","jcodec"],"comments":[{"owner":{"account_id":1806762,"reputation":4128,"user_id":1643723,"display_name":"user1643723"},"score":1,"creation_date":1563011321,"post_id":56829683,"comment_id":100566969,"body_markdown":"Seems like you are feeding encoder&#39;s output ByteBuffer to decoder without calling `flip` on it first. ByteBuffers don&#39;t work that way — a buffer returned by encoder is marked as &quot;full&quot; with it&#39;s position set close to the end. Decoder expects the buffer to &quot;have some space&quot; (position set at the beginning, limit to the amount of available data).","body":"Seems like you are feeding encoder&#39;s output ByteBuffer to decoder without calling <code>flip</code> on it first. ByteBuffers don&#39;t work that way — a buffer returned by encoder is marked as &quot;full&quot; with it&#39;s position set close to the end. Decoder expects the buffer to &quot;have some space&quot; (position set at the beginning, limit to the amount of available data)."},{"owner":{"account_id":16148428,"reputation":1317,"user_id":11657446,"display_name":"arnonuem"},"score":1,"creation_date":1563532452,"post_id":56829683,"comment_id":100740404,"body_markdown":"maybe get inspired here...\n\nhttps://stackoverflow.com/questions/2165593/how-to-decode-h-264-video-frame-in-java-environment","body":"maybe get inspired here...  <a href=\"https://stackoverflow.com/questions/2165593/how-to-decode-h-264-video-frame-in-java-environment\" title=\"how to decode h 264 video frame in java environment\">stackoverflow.com/questions/2165593/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":16476095,"reputation":540,"user_id":11904038,"display_name":"Piotr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694157374,"creation_date":1694157374,"answer_id":77064862,"question_id":56829683,"body_markdown":"    Picture buf = Picture.create(pixelWidth + (pixelWidth % 16), pixelHeight + (pixelHeight % 16), ColorSpace.YUV420);\r\n    ...\r\n    Frame f = dec.decodeFrame(ef.getData(), buf.getData();\r\n\r\nA bit late, but maybe someone else will find my answer useful\r\n\r\n","title":"JCodec simple H264 encode/decode","body":"<pre><code>Picture buf = Picture.create(pixelWidth + (pixelWidth % 16), pixelHeight + (pixelHeight % 16), ColorSpace.YUV420);\n...\nFrame f = dec.decodeFrame(ef.getData(), buf.getData();\n</code></pre>\n<p>A bit late, but maybe someone else will find my answer useful</p>\n"}],"owner":{"account_id":2228175,"reputation":530,"user_id":1966457,"accept_rate":25,"display_name":"pranahata"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2153,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1694157374,"creation_date":1561951416,"question_id":56829683,"body_markdown":"Ok, so trying to get my head around jcodec. Basically, I want to record what&#39;s on the screen as BufferedImages, encode the buffered images as H264 frames and then decode them and convert them back to buffered image. \r\n\r\nThis is the code I have, the ScreenRecorder class extends thread and basically captures the screen in a while true loop. That part works. Then, it seems that encoding the BufferedImage from ScreenRecorder as a H264 frame works too but then when i try to decode it I get an AIOBE\r\n\r\n    ScreenRecorder sc = new ScreenRecorder();\r\n    sc.start();\r\n\r\n        H264Encoder enc = H264Encoder.createH264Encoder();\r\n        ColorSpace cs = enc.getSupportedColorSpaces()[0];\r\n        System.out.println(&quot;cs= &quot; + cs);\r\n        H264Decoder dec = new H264Decoder();\r\n        byte[][] buff = new byte[4096][4096];\r\n        while (true) {\r\n            BufferedImage bi = sc.getSnapshot();\r\n            System.out.println(&quot;Got bi &quot; + bi);\r\n            if (bi != null) {\r\n                Picture pi = AWTUtil.fromBufferedImage(bi, cs);\r\n                int bufSize = enc.estimateBufferSize(pi);\r\n                ByteBuffer bb = ByteBuffer.allocate(bufSize);\r\n                VideoEncoder.EncodedFrame ef = enc.encodeFrame(pi, bb);\r\n                System.out.println(&quot;Data = &quot; + Arrays.toString(ef.getData().array()));\r\n                Frame f = dec.decodeFrame(ef.getData(), buff);\r\n                System.out.println(&quot;Decoded frame = &quot; + f);\r\n            }\r\n        }\r\n\r\nProduces:\r\n\r\n    Got bi BufferedImage@506e1b77: type = 1 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=0 IntegerInterleavedRaster: width = 1920 height = 1080 #Bands = 3 xOff = 0 yOff = 0 dataOffset[0] 0\r\n    org.jcodec.common.VideoEncoder$EncodedFrame@1a93a7ca\r\n    Data = [0, 0, 0, 1, 103, 66, 0, 40, -83, 0, -16, 4, 75, -54, -128, 0, 0, 0, 1, 104, -50, 56, -128, 0, 0, 0, 1, 101, -72, 32, 13, 12, 98, -128, 0, -111, 127, -1, -3, 127, -61, 24, 0, 36, 9, 112, -96, 28, 13, -108, -43, 45, -92, -57, 7, 101, 39, 31, -4, 0, 121, -104, 17, -86, 9, 84, -111, -94, 39, 125, 94, -57, 64, 2, 67, 56, 28, 0, 4, 0, 118, -97, -128, 40, 124, 20, 39, 122, 111, -117, -124, 25, 72, -76, -107, 90, -1, -122, 48, 0, 67, 41, 10, -64, 0, 32, 106, 0, 5, -128, -108, -13, 80, 51, 112, 113, 112, 107, -1, -17, -32, 32, 85, -60, -76, 52, 70, -67, 124, 3, 113, 111, 51, 0, 1, 0, -64, 0, 16, 15, -5, -48, 3, -80, -21, -2, 24, -64, 25, -48, 0, 16, 39, 0, 1, 0, 105, -112, 13, 9, 11, -35, -16, 56, 0, 8, 6, -128, 0, -128, 80, 0, -69, -112, -32, 0, 32, 26, 0, 2, 1, 64, 2, -18, 124, 56, 0, 8, 6, -128, 0, -128, 80, 0, -69, -112, -32, 0, 32, 26, 0, 2, 1, 64, 2, -18, 47, -8, 98, 56, 0, -112, 15, 21, 96, 3, 102, 59, -124, 48, 83, 96, 55, -10, 1, 55, -6, 27, 0, 67, 19, 47, -12, 90, 112, -125, -108, 64, 38, 9, 83, 29, 101, -56, 75, -126, -85, -96, 113, 17, -105, 2, 57, 98, 56, -66, 28, 88, -105, ...\r\n    Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException\r\n    \tat java.lang.System.arraycopy(Native Method)\r\n    \tat org.jcodec.codecs.h264.decode.SliceDecoder.putMacroblock(SliceDecoder.java:198)\r\n    \tat org.jcodec.codecs.h264.decode.SliceDecoder.decodeMacroblocks(SliceDecoder.java:104)\r\n    \tat org.jcodec.codecs.h264.decode.SliceDecoder.decodeFromReader(SliceDecoder.java:73)\r\n    \tat org.jcodec.codecs.h264.H264Decoder$FrameDecoder.decodeFrame(H264Decoder.java:152)\r\n    \tat org.jcodec.codecs.h264.H264Decoder.decodeFrameFromNals(H264Decoder.java:103)\r\n    \tat org.jcodec.codecs.h264.H264Decoder.decodeFrame(H264Decoder.java:99)\r\n    \tat uno.anahata.satgyara.screen.ScreenRecorder.main(ScreenRecorder.java:148)\r\n\r\n\r\n\r\nJust trying to figure out how jcodec works. Any ideas as to what i am doing wrong? Any help would be appreciated","title":"JCodec simple H264 encode/decode","body":"<p>Ok, so trying to get my head around jcodec. Basically, I want to record what's on the screen as BufferedImages, encode the buffered images as H264 frames and then decode them and convert them back to buffered image. </p>\n\n<p>This is the code I have, the ScreenRecorder class extends thread and basically captures the screen in a while true loop. That part works. Then, it seems that encoding the BufferedImage from ScreenRecorder as a H264 frame works too but then when i try to decode it I get an AIOBE</p>\n\n<pre><code>ScreenRecorder sc = new ScreenRecorder();\nsc.start();\n\n    H264Encoder enc = H264Encoder.createH264Encoder();\n    ColorSpace cs = enc.getSupportedColorSpaces()[0];\n    System.out.println(\"cs= \" + cs);\n    H264Decoder dec = new H264Decoder();\n    byte[][] buff = new byte[4096][4096];\n    while (true) {\n        BufferedImage bi = sc.getSnapshot();\n        System.out.println(\"Got bi \" + bi);\n        if (bi != null) {\n            Picture pi = AWTUtil.fromBufferedImage(bi, cs);\n            int bufSize = enc.estimateBufferSize(pi);\n            ByteBuffer bb = ByteBuffer.allocate(bufSize);\n            VideoEncoder.EncodedFrame ef = enc.encodeFrame(pi, bb);\n            System.out.println(\"Data = \" + Arrays.toString(ef.getData().array()));\n            Frame f = dec.decodeFrame(ef.getData(), buff);\n            System.out.println(\"Decoded frame = \" + f);\n        }\n    }\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>Got bi BufferedImage@506e1b77: type = 1 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=0 IntegerInterleavedRaster: width = 1920 height = 1080 #Bands = 3 xOff = 0 yOff = 0 dataOffset[0] 0\norg.jcodec.common.VideoEncoder$EncodedFrame@1a93a7ca\nData = [0, 0, 0, 1, 103, 66, 0, 40, -83, 0, -16, 4, 75, -54, -128, 0, 0, 0, 1, 104, -50, 56, -128, 0, 0, 0, 1, 101, -72, 32, 13, 12, 98, -128, 0, -111, 127, -1, -3, 127, -61, 24, 0, 36, 9, 112, -96, 28, 13, -108, -43, 45, -92, -57, 7, 101, 39, 31, -4, 0, 121, -104, 17, -86, 9, 84, -111, -94, 39, 125, 94, -57, 64, 2, 67, 56, 28, 0, 4, 0, 118, -97, -128, 40, 124, 20, 39, 122, 111, -117, -124, 25, 72, -76, -107, 90, -1, -122, 48, 0, 67, 41, 10, -64, 0, 32, 106, 0, 5, -128, -108, -13, 80, 51, 112, 113, 112, 107, -1, -17, -32, 32, 85, -60, -76, 52, 70, -67, 124, 3, 113, 111, 51, 0, 1, 0, -64, 0, 16, 15, -5, -48, 3, -80, -21, -2, 24, -64, 25, -48, 0, 16, 39, 0, 1, 0, 105, -112, 13, 9, 11, -35, -16, 56, 0, 8, 6, -128, 0, -128, 80, 0, -69, -112, -32, 0, 32, 26, 0, 2, 1, 64, 2, -18, 124, 56, 0, 8, 6, -128, 0, -128, 80, 0, -69, -112, -32, 0, 32, 26, 0, 2, 1, 64, 2, -18, 47, -8, 98, 56, 0, -112, 15, 21, 96, 3, 102, 59, -124, 48, 83, 96, 55, -10, 1, 55, -6, 27, 0, 67, 19, 47, -12, 90, 112, -125, -108, 64, 38, 9, 83, 29, 101, -56, 75, -126, -85, -96, 113, 17, -105, 2, 57, 98, 56, -66, 28, 88, -105, ...\nException in thread \"main\" java.lang.ArrayIndexOutOfBoundsException\n    at java.lang.System.arraycopy(Native Method)\n    at org.jcodec.codecs.h264.decode.SliceDecoder.putMacroblock(SliceDecoder.java:198)\n    at org.jcodec.codecs.h264.decode.SliceDecoder.decodeMacroblocks(SliceDecoder.java:104)\n    at org.jcodec.codecs.h264.decode.SliceDecoder.decodeFromReader(SliceDecoder.java:73)\n    at org.jcodec.codecs.h264.H264Decoder$FrameDecoder.decodeFrame(H264Decoder.java:152)\n    at org.jcodec.codecs.h264.H264Decoder.decodeFrameFromNals(H264Decoder.java:103)\n    at org.jcodec.codecs.h264.H264Decoder.decodeFrame(H264Decoder.java:99)\n    at uno.anahata.satgyara.screen.ScreenRecorder.main(ScreenRecorder.java:148)\n</code></pre>\n\n<p>Just trying to figure out how jcodec works. Any ideas as to what i am doing wrong? Any help would be appreciated</p>\n"},{"tags":["java","mongodb","jdbc","mongodb-java","mongo-java-driver"],"comments":[{"owner":{"account_id":1248144,"reputation":4402,"user_id":1209159,"accept_rate":36,"display_name":"Natalia"},"score":0,"creation_date":1444137317,"post_id":32970871,"comment_id":53766755,"body_markdown":"have you tried MongoClient? `MongoClient mongo = new MongoClient( &quot;localhost&quot; , 27017 );`","body":"have you tried MongoClient? <code>MongoClient mongo = new MongoClient( &quot;localhost&quot; , 27017 );</code>"},{"owner":{"account_id":7073014,"reputation":41,"user_id":5414013,"display_name":"manoj"},"score":0,"creation_date":1444298666,"post_id":32970871,"comment_id":53848650,"body_markdown":"thanks for the reply, I have tried that, but the requirement is to use the jdbc connector.","body":"thanks for the reply, I have tried that, but the requirement is to use the jdbc connector."}],"answers":[{"tags":[],"owner":{"account_id":5733060,"reputation":506,"user_id":4528018,"accept_rate":50,"display_name":"s.meissner"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1444138436,"creation_date":1444138436,"answer_id":32971382,"question_id":32970871,"body_markdown":"You can checkout this project:\r\n\r\nhttps://github.com/erh/mongo-jdbc\r\n\r\nThere are two examples given.\r\n\r\nBut in general I would recommend to use the MongoDB Client or some Spring Data abstraction.","title":"Connecting to MongoDB using jdbc driver","body":"<p>You can checkout this project:</p>\n\n<p><a href=\"https://github.com/erh/mongo-jdbc\" rel=\"nofollow\">https://github.com/erh/mongo-jdbc</a></p>\n\n<p>There are two examples given.</p>\n\n<p>But in general I would recommend to use the MongoDB Client or some Spring Data abstraction.</p>\n"},{"tags":[],"owner":{"account_id":4714434,"reputation":41866,"user_id":3814029,"accept_rate":67,"display_name":"Andy Guibert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1444140940,"creation_date":1444140940,"answer_id":32972273,"question_id":32970871,"body_markdown":"If you are getting a ClassNotFoundException, the issue is that the jar containing the `mongodb.jdbc.MongoDriver` class is not on your classpath.  If you&#39;re not sure what JAR this class is in, I would reccomend getting [7-Zip][1] so that you can inspect the contents of the jar and see for yourself if the class is there.\r\n\r\nThe correct way to connect to MongoDB with your approach is:\r\n\r\n    Class.forName(&quot;mongodb.jdbc.MongoDriver&quot;);\r\n    String URL = &quot;jdbc:mongo://&lt;servername&gt;:&lt;port&gt;/&lt;databaseName&gt;&quot;;\r\n    Connection jdbcConn = DriverManager.getConnection(url,&quot;user&quot;,&quot;pass&quot;);\r\n\r\n&lt;br&gt;But MongoDB isn&#39;t really meant to be used with JDBC, so if your requirements allow, I would reccomend getting a connection the &quot;mongodb&quot; way.\r\n\r\n    MongoClient client = new MongoClient(&quot;localhost&quot;);\r\n\r\nFor details on how to do it this way, [see the MongoDB docs][2]\r\n\r\n\r\n  [1]: http://www.7-zip.org/\r\n  [2]: http://docs.mongodb.org/ecosystem/drivers/java/","title":"Connecting to MongoDB using jdbc driver","body":"<p>If you are getting a ClassNotFoundException, the issue is that the jar containing the <code>mongodb.jdbc.MongoDriver</code> class is not on your classpath.  If you're not sure what JAR this class is in, I would reccomend getting <a href=\"http://www.7-zip.org/\" rel=\"nofollow\">7-Zip</a> so that you can inspect the contents of the jar and see for yourself if the class is there.</p>\n\n<p>The correct way to connect to MongoDB with your approach is:</p>\n\n<pre><code>Class.forName(\"mongodb.jdbc.MongoDriver\");\nString URL = \"jdbc:mongo://&lt;servername&gt;:&lt;port&gt;/&lt;databaseName&gt;\";\nConnection jdbcConn = DriverManager.getConnection(url,\"user\",\"pass\");\n</code></pre>\n\n<p><br>But MongoDB isn't really meant to be used with JDBC, so if your requirements allow, I would reccomend getting a connection the \"mongodb\" way.</p>\n\n<pre><code>MongoClient client = new MongoClient(\"localhost\");\n</code></pre>\n\n<p>For details on how to do it this way, <a href=\"http://docs.mongodb.org/ecosystem/drivers/java/\" rel=\"nofollow\">see the MongoDB docs</a></p>\n"},{"tags":[],"owner":{"account_id":7385224,"reputation":43,"user_id":5620462,"display_name":"Tmac Zhou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1448877615,"creation_date":1448874569,"answer_id":33994900,"question_id":32970871,"body_markdown":"I met this question today morning.\r\nThe key is missing  `mongo-java-driver.jar`.\r\nwhen I add the jar, the project can run normal.\r\n","title":"Connecting to MongoDB using jdbc driver","body":"<p>I met this question today morning.\nThe key is missing  <code>mongo-java-driver.jar</code>.\nwhen I add the jar, the project can run normal.</p>\n"},{"tags":[],"owner":{"account_id":5869283,"reputation":2403,"user_id":4622075,"accept_rate":61,"display_name":"DirtyMind"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530473667,"creation_date":1530473667,"answer_id":51126417,"question_id":32970871,"body_markdown":"I know its very late to answer but might help someone else. If you are compiling and running your code from **cmd**  then before compilation set classpath for mongo.jar like below :\r\n\r\n**set classpath=C:\\DemoProject\\java db\\Mongo\\mongo.jar;**\r\n\r\nthen run your code.\r\n\r\nor if you are using editor like eclipse then add this jar to your lib folder.","title":"Connecting to MongoDB using jdbc driver","body":"<p>I know its very late to answer but might help someone else. If you are compiling and running your code from <strong>cmd</strong>  then before compilation set classpath for mongo.jar like below :</p>\n\n<p><strong>set classpath=C:\\DemoProject\\java db\\Mongo\\mongo.jar;</strong></p>\n\n<p>then run your code.</p>\n\n<p>or if you are using editor like eclipse then add this jar to your lib folder.</p>\n"},{"tags":[],"owner":{"account_id":3425729,"reputation":419,"user_id":2871531,"accept_rate":0,"display_name":"DbSchema"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595618669,"creation_date":1569860765,"answer_id":58171784,"question_id":32970871,"body_markdown":"[DbSchema][1] database designer is providing an Open Source MongoDb JDBC driver which does support native MongoDb queries, including find(), projections, aggregate, etc.. \r\nThe driver is using an internal embedded JavaScript engine.\r\nThe driver is [Open Source on GitHub][2]. \r\nFew of the driver features:\r\n\r\n - Support native [MongoDb queries][3]\r\n - Calling DatabaseMetaData methods can &#39;guess&#39; the collection structure, so a &#39;virtual schema&#39; is created. This is used by the [Designer for MongoDB][1] to represent the MongoDb database structure in diagrams like below.\r\n - Implement most of the JDBC driver methods. Use the native MongoDB JDBC URL to connect, which means full functionality regarding connectivity.\r\n\r\n[![DbSchema Diagram Design for MongoDB][4]][4]\r\n\r\nAnd one snippet of code about how to use the driver\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Class.forName(&quot;com.dbschema.MongoDbJdbcDriver&quot;);\r\n    Properties properties = new Properties();\r\n    properties.put(&quot;user&quot;, &quot;someuser&quot;);\r\n    properties.put(&quot;password&quot;, &quot;somepassword&quot; );\r\n    Connection con = DriverManager.getConnection(&quot;jdbc:mongodb://host1:9160/keyspace1&quot;, properties);\r\n    // OTHER URL (SAME AS FOR MONGODB NATIVE DRIVER): mongodb://db1.example.net,db2.example.net:2500/?replicaSet=test&amp;connectTimeoutMS=300000\r\n    String query = &quot;db.sampleCollection().find()&quot;;\r\n    Statement statement = con.createStatement();\r\n    ResultSet rs = statement.executeQuery( query );\r\n    Object json = rs.getObject(1);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://dbschema.com/mongodb-tool.html\r\n  [2]: https://github.com/wise-coders/mongodb-jdbc-driver\r\n  [3]: https://dbschema.com/documentation/mongodb-features.html\r\n  [4]: https://i.stack.imgur.com/58ZTY.png","title":"Connecting to MongoDB using jdbc driver","body":"<p><a href=\"https://dbschema.com/mongodb-tool.html\" rel=\"nofollow noreferrer\">DbSchema</a> database designer is providing an Open Source MongoDb JDBC driver which does support native MongoDb queries, including find(), projections, aggregate, etc..\nThe driver is using an internal embedded JavaScript engine.\nThe driver is <a href=\"https://github.com/wise-coders/mongodb-jdbc-driver\" rel=\"nofollow noreferrer\">Open Source on GitHub</a>.\nFew of the driver features:</p>\n<ul>\n<li>Support native <a href=\"https://dbschema.com/documentation/mongodb-features.html\" rel=\"nofollow noreferrer\">MongoDb queries</a></li>\n<li>Calling DatabaseMetaData methods can 'guess' the collection structure, so a 'virtual schema' is created. This is used by the <a href=\"https://dbschema.com/mongodb-tool.html\" rel=\"nofollow noreferrer\">Designer for MongoDB</a> to represent the MongoDb database structure in diagrams like below.</li>\n<li>Implement most of the JDBC driver methods. Use the native MongoDB JDBC URL to connect, which means full functionality regarding connectivity.</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/58ZTY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/58ZTY.png\" alt=\"DbSchema Diagram Design for MongoDB\" /></a></p>\n<p>And one snippet of code about how to use the driver</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class.forName(&quot;com.dbschema.MongoDbJdbcDriver&quot;);\nProperties properties = new Properties();\nproperties.put(&quot;user&quot;, &quot;someuser&quot;);\nproperties.put(&quot;password&quot;, &quot;somepassword&quot; );\nConnection con = DriverManager.getConnection(&quot;jdbc:mongodb://host1:9160/keyspace1&quot;, properties);\n// OTHER URL (SAME AS FOR MONGODB NATIVE DRIVER): mongodb://db1.example.net,db2.example.net:2500/?replicaSet=test&amp;connectTimeoutMS=300000\nString query = &quot;db.sampleCollection().find()&quot;;\nStatement statement = con.createStatement();\nResultSet rs = statement.executeQuery( query );\nObject json = rs.getObject(1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2720893,"reputation":1730,"user_id":2347210,"accept_rate":67,"display_name":"Vladi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600258283,"creation_date":1600258283,"answer_id":63919826,"question_id":32970871,"body_markdown":"The first option \r\n\r\n        MongoClient mongoClient = new MongoClient( &quot;1.2.3.4&quot;,27017 );\r\n        MongoDatabase database =  mongoClient.getDatabase(dataBase);\r\n        MongoCollection&lt;Document&gt; collection = database.getCollection(DBcollection);\r\n    \r\n    \r\n   \r\n\r\n **another option** \r\n    \t\r\n    \r\n     MongoClientURI connectionString = new MongoClientURI(&quot;mongodb://1.2.3.4:27017&quot;);\r\n    \t MongoClient mongoClient = new MongoClient(connectionString);\r\n    \tMongoDatabase database =  mongoClient.getDatabase(dataBase);\r\n    \tMongoCollection collection = database.getCollection(DBcollection);\r\n\r\n","title":"Connecting to MongoDB using jdbc driver","body":"<p>The first option</p>\n<pre><code>    MongoClient mongoClient = new MongoClient( &quot;1.2.3.4&quot;,27017 );\n    MongoDatabase database =  mongoClient.getDatabase(dataBase);\n    MongoCollection&lt;Document&gt; collection = database.getCollection(DBcollection);\n</code></pre>\n<p><strong>another option</strong></p>\n<pre><code> MongoClientURI connectionString = new MongoClientURI(&quot;mongodb://1.2.3.4:27017&quot;);\n     MongoClient mongoClient = new MongoClient(connectionString);\n    MongoDatabase database =  mongoClient.getDatabase(dataBase);\n    MongoCollection collection = database.getCollection(DBcollection);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":302544,"reputation":30455,"user_id":610979,"accept_rate":92,"display_name":"Frank Schmitt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694157065,"creation_date":1694157065,"answer_id":77064836,"question_id":32970871,"body_markdown":"(I realize this is a *very* late answer, but since I struggled with this just yesterday, I&#39;ll post it anyway)\r\n\r\nNowadays, the [Unity JDBC driver][1] comes with a complete code example for Java. In short:\r\n\r\n- include the jar file in your CLASSPATH\r\n- reference it with mongodb.jdbc\r\n\r\n**Java code**\r\n\r\n    &lt;usual java.sql import stuff&gt;\r\n    import mongodb.jdbc.MongoStatement;\r\n     \r\n    ...\r\n        Connection con = null;\r\n        String sql;\r\n\r\n        try\r\n        {\r\n            // Create new instance of Mongo JDBC Driver and make connection.\r\n            System.out.println(&quot;Registering Driver.&quot;);\r\n\r\n            // Note: Registering driver using Class.forName() is not required.\r\n            Class.forName(&quot;mongodb.jdbc.MongoDriver&quot;);\r\n\r\n            // Connect to the URL. The last part is the database name (tpch in this case).\r\n            String url = &quot;jdbc:mongodb://server/database/tpch?rebuildschema=true&quot;;\r\n\r\n            System.out.println(&quot;Making a connection to: &quot; + url);\r\n            con = DriverManager.getConnection(url, &quot;user&quot;, &quot;password&quot;);\r\n            System.out.println(&quot;Connection successful.\\n&quot;);\r\n            ... &lt;run queries etc&gt;\r\n\r\n\r\n**Build + Run**\r\n\r\n    javac -cp .;../unityjdbc.jar test/ExampleQuery.java\r\n    java -cp .;../unityjdbc.jar test.ExampleQuery\r\n\r\n\r\n  [1]: https://unityjdbc.com/mongojdbc/mongo_jdbc.php\r\n","title":"Connecting to MongoDB using jdbc driver","body":"<p>(I realize this is a <em>very</em> late answer, but since I struggled with this just yesterday, I'll post it anyway)</p>\n<p>Nowadays, the <a href=\"https://unityjdbc.com/mongojdbc/mongo_jdbc.php\" rel=\"nofollow noreferrer\">Unity JDBC driver</a> comes with a complete code example for Java. In short:</p>\n<ul>\n<li>include the jar file in your CLASSPATH</li>\n<li>reference it with mongodb.jdbc</li>\n</ul>\n<p><strong>Java code</strong></p>\n<pre><code>&lt;usual java.sql import stuff&gt;\nimport mongodb.jdbc.MongoStatement;\n \n...\n    Connection con = null;\n    String sql;\n\n    try\n    {\n        // Create new instance of Mongo JDBC Driver and make connection.\n        System.out.println(&quot;Registering Driver.&quot;);\n\n        // Note: Registering driver using Class.forName() is not required.\n        Class.forName(&quot;mongodb.jdbc.MongoDriver&quot;);\n\n        // Connect to the URL. The last part is the database name (tpch in this case).\n        String url = &quot;jdbc:mongodb://server/database/tpch?rebuildschema=true&quot;;\n\n        System.out.println(&quot;Making a connection to: &quot; + url);\n        con = DriverManager.getConnection(url, &quot;user&quot;, &quot;password&quot;);\n        System.out.println(&quot;Connection successful.\\n&quot;);\n        ... &lt;run queries etc&gt;\n</code></pre>\n<p><strong>Build + Run</strong></p>\n<pre><code>javac -cp .;../unityjdbc.jar test/ExampleQuery.java\njava -cp .;../unityjdbc.jar test.ExampleQuery\n</code></pre>\n"}],"owner":{"account_id":7073014,"reputation":41,"user_id":5414013,"display_name":"manoj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43127,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":7,"score":4,"last_activity_date":1694157065,"creation_date":1444136954,"question_id":32970871,"body_markdown":"Purpose is to connect MongoDB remote server through JAVA:\r\n\r\n        URL = &quot;jdbc:mongo://&quot; + serverIP + &quot;:&quot;\r\n        + port+ &quot;/&quot; +databaseName;                     \r\n        Class.forName(&quot;mongodb.jdbc.MongoDriver&quot;);\r\n\t    dbConn = getConnection(URL,mongo1, mongo1);\r\n\r\nTried Unity_trial.Jar, mongo_version.jar files but the error comes is ***&#39;mongodb.jdbc.MongoDriver&#39; classNameNotFound.***\r\n\r\nIf I comment the class.forname line, the next error is \r\n\r\n       URL = &quot;jdbc:mongo://&quot; + serverIP + &quot;:&quot; + port\r\n\t\t+ &quot;/&quot; +databaseName;\r\n is not in correct format.\r\nNot sure about where I am making the mistake.\r\nThanks for your help in advance.\r\n","title":"Connecting to MongoDB using jdbc driver","body":"<p>Purpose is to connect MongoDB remote server through JAVA:</p>\n\n<pre><code>    URL = \"jdbc:mongo://\" + serverIP + \":\"\n    + port+ \"/\" +databaseName;                     \n    Class.forName(\"mongodb.jdbc.MongoDriver\");\n    dbConn = getConnection(URL,mongo1, mongo1);\n</code></pre>\n\n<p>Tried Unity_trial.Jar, mongo_version.jar files but the error comes is <strong><em>'mongodb.jdbc.MongoDriver' classNameNotFound.</em></strong></p>\n\n<p>If I comment the class.forname line, the next error is </p>\n\n<pre><code>   URL = \"jdbc:mongo://\" + serverIP + \":\" + port\n    + \"/\" +databaseName;\n</code></pre>\n\n<p>is not in correct format.\nNot sure about where I am making the mistake.\nThanks for your help in advance.</p>\n"},{"tags":["java","android","android-studio","kotlin","admob"],"answers":[{"tags":[],"owner":{"account_id":15738329,"reputation":129,"user_id":11356588,"display_name":"Rufan Khokhar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1674636961,"creation_date":1638041133,"answer_id":70138014,"question_id":70138013,"body_markdown":"Finally, After a lot of research, I found the answer,\r\n\r\nFirst, create a theme in style.xml or theme.xml file( make app open ad background black)\r\n\r\n     &lt;style name=&quot;Theme.AppThemeNoActionBar.AdTheme&quot; &gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;@color/black&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@color/black&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@null&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@null&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\nand declare the activity on the manifest.xml file, and apply the theme\r\n\r\n     &lt;activity\r\n            android:name=&quot;com.google.android.gms.ads.AdActivity&quot;\r\n            android:theme=&quot;@style/Theme.AppThemeNoActionBar.AdTheme&quot;\r\n            tools:replace=&quot;android:theme&quot;/&gt;\r\n\r\n\r\n","title":"How to change app open ad background admob","body":"<p>Finally, After a lot of research, I found the answer,</p>\n<p>First, create a theme in style.xml or theme.xml file( make app open ad background black)</p>\n<pre><code> &lt;style name=&quot;Theme.AppThemeNoActionBar.AdTheme&quot; &gt;\n    &lt;item name=&quot;android:background&quot;&gt;@color/black&lt;/item&gt;\n    &lt;item name=&quot;android:windowBackground&quot;&gt;@color/black&lt;/item&gt;\n    &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@null&lt;/item&gt;\n    &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@null&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>and declare the activity on the manifest.xml file, and apply the theme</p>\n<pre><code> &lt;activity\n        android:name=&quot;com.google.android.gms.ads.AdActivity&quot;\n        android:theme=&quot;@style/Theme.AppThemeNoActionBar.AdTheme&quot;\n        tools:replace=&quot;android:theme&quot;/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29314370,"reputation":1,"user_id":22459474,"display_name":"Raheel haider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694156802,"creation_date":1694156779,"answer_id":77064811,"question_id":70138013,"body_markdown":"1: Apply below code in Styles.\r\n\r\n    &lt;style name=&quot;myAdTheme&quot; parent=&quot;Theme.AppCompat.DayNight.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;#000000&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;#000000&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@null&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@null&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n2: Apply this code in Manifest file.\r\n\r\n    &lt;activity\r\n            android:name=&quot;com.google.android.gms.ads.AdActivity&quot;\r\n            android:theme=&quot;@style/myAdTheme&quot;\r\n            tools:replace=&quot;android:theme&quot; /&gt;\r\n\r\n\r\n[Click here to preview][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JhoYk.png","title":"How to change app open ad background admob","body":"<p>1: Apply below code in Styles.</p>\n<pre><code>&lt;style name=&quot;myAdTheme&quot; parent=&quot;Theme.AppCompat.DayNight.NoActionBar&quot;&gt;\n    &lt;item name=&quot;android:background&quot;&gt;#000000&lt;/item&gt;\n    &lt;item name=&quot;android:windowBackground&quot;&gt;#000000&lt;/item&gt;\n    &lt;item name=&quot;android:windowExitAnimation&quot;&gt;@null&lt;/item&gt;\n    &lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@null&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n<p>2: Apply this code in Manifest file.</p>\n<pre><code>&lt;activity\n        android:name=&quot;com.google.android.gms.ads.AdActivity&quot;\n        android:theme=&quot;@style/myAdTheme&quot;\n        tools:replace=&quot;android:theme&quot; /&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/JhoYk.png\" rel=\"nofollow noreferrer\">Click here to preview</a></p>\n"}],"owner":{"account_id":15738329,"reputation":129,"user_id":11356588,"display_name":"Rufan Khokhar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1255,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":70138014,"answer_count":2,"score":5,"last_activity_date":1694156802,"creation_date":1638041133,"question_id":70138013,"body_markdown":"I place the banner ad on the top of the main activity, but when the app switch app open ad shows and violate the AdMob ([policy ][1])\r\n\r\n\r\n  [1]: https://youtu.be/aZfdufLRZYU?t=161\r\n\r\nIs that possible to change the background of the app open ad, as you know that by default app open app ad&#39;s background is transparent, As a result, when the app open ad shows, the banner ad is also showing in the background.","title":"How to change app open ad background admob","body":"<p>I place the banner ad on the top of the main activity, but when the app switch app open ad shows and violate the AdMob (<a href=\"https://youtu.be/aZfdufLRZYU?t=161\" rel=\"noreferrer\">policy </a>)</p>\n<p>Is that possible to change the background of the app open ad, as you know that by default app open app ad's background is transparent, As a result, when the app open ad shows, the banner ad is also showing in the background.</p>\n"},{"tags":["java","file","recursion","directory"],"comments":[{"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1411563648,"post_id":26017545,"comment_id":40749423,"body_markdown":"Any reason you&#39;re using a HashMap instead of a HashSet?","body":"Any reason you&#39;re using a HashMap instead of a HashSet?"},{"owner":{"account_id":4509873,"reputation":2850,"user_id":3666302,"accept_rate":71,"display_name":"TomTom"},"score":0,"creation_date":1411563830,"post_id":26017545,"comment_id":40749575,"body_markdown":"@aioobe Now that you mention it. No.. I will make it a set, because I will only check if it nulls. Thanks.","body":"@aioobe Now that you mention it. No.. I will make it a set, because I will only check if it nulls. Thanks."},{"owner":{"account_id":2912376,"reputation":1279,"user_id":2496309,"accept_rate":56,"display_name":"Michał Urbaniak"},"score":1,"creation_date":1411563870,"post_id":26017545,"comment_id":40749597,"body_markdown":"Maybe this can help you a bit: http://stackoverflow.com/a/20281958/2496309","body":"Maybe this can help you a bit: <a href=\"http://stackoverflow.com/a/20281958/2496309\">stackoverflow.com/a/20281958/2496309</a>"},{"owner":{"account_id":4509873,"reputation":2850,"user_id":3666302,"accept_rate":71,"display_name":"TomTom"},"score":0,"creation_date":1411564491,"post_id":26017545,"comment_id":40750026,"body_markdown":"@Mikrobus You are right that was it. You have to delete all files before you can delete a folder. Also sometimes there are hidden config files in the folders, that can be tricky. Thanks you could post it as an answer.","body":"@Mikrobus You are right that was it. You have to delete all files before you can delete a folder. Also sometimes there are hidden config files in the folders, that can be tricky. Thanks you could post it as an answer."},{"owner":{"account_id":4509873,"reputation":2850,"user_id":3666302,"accept_rate":71,"display_name":"TomTom"},"score":0,"creation_date":1411564524,"post_id":26017545,"comment_id":40750053,"body_markdown":"@aioobe Thanks for your support. I already solved the problem.","body":"@aioobe Thanks for your support. I already solved the problem."}],"answers":[{"tags":[],"owner":{"account_id":5154964,"reputation":71,"user_id":4128429,"display_name":"Arijit Paul"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1484725210,"creation_date":1484723745,"answer_id":41713403,"question_id":26017545,"body_markdown":"This piece of code recursively delete all the empty folders or directory:\r\n\r\n    public class DeleteEmptyDir {\r\n\tprivate static final String FOLDER_LOCATION = &quot;E:\\\\TEST&quot;;\r\n\tprivate static boolean isFinished = false;\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tdo {\r\n\t\t\tisFinished = true;\r\n\t\t\treplaceText(FOLDER_LOCATION);\r\n\t\t} while (!isFinished);\r\n\t}\r\n\r\n\tprivate static void replaceText(String fileLocation) {\r\n\t\tFile folder = new File(fileLocation);\r\n\t\tFile[] listofFiles = folder.listFiles();\r\n\t\tif (listofFiles.length == 0) {\r\n\t\t\tSystem.out.println(&quot;Folder Name :: &quot; + folder.getAbsolutePath() + &quot; is deleted.&quot;);\r\n\t\t\tfolder.delete();\r\n\t\t\tisFinished = false;\r\n\t\t} else {\r\n\t\t\tfor (int j = 0; j &lt; listofFiles.length; j++) {\r\n\t\t\t\tFile file = listofFiles[j];\r\n\t\t\t\tif (file.isDirectory()) {\r\n\t\t\t\t\treplaceText(file.getAbsolutePath());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    }","title":"Delete all empty folders in Java","body":"<p>This piece of code recursively delete all the empty folders or directory:</p>\n\n<pre><code>public class DeleteEmptyDir {\nprivate static final String FOLDER_LOCATION = \"E:\\\\TEST\";\nprivate static boolean isFinished = false;\n\npublic static void main(String[] args) {\n\n    do {\n        isFinished = true;\n        replaceText(FOLDER_LOCATION);\n    } while (!isFinished);\n}\n\nprivate static void replaceText(String fileLocation) {\n    File folder = new File(fileLocation);\n    File[] listofFiles = folder.listFiles();\n    if (listofFiles.length == 0) {\n        System.out.println(\"Folder Name :: \" + folder.getAbsolutePath() + \" is deleted.\");\n        folder.delete();\n        isFinished = false;\n    } else {\n        for (int j = 0; j &lt; listofFiles.length; j++) {\n            File file = listofFiles[j];\n            if (file.isDirectory()) {\n                replaceText(file.getAbsolutePath());\n            }\n        }\n    }\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3411471,"reputation":3358,"user_id":2861283,"accept_rate":20,"display_name":"Rakesh Chaudhari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510207528,"creation_date":1510207528,"answer_id":47194941,"question_id":26017545,"body_markdown":"You can use code to delete empty folders using Java.\r\n\r\n    public static long deleteFolder(String dir) {\r\n    \r\n    \t\tFile f = new File(dir);\r\n    \t\tString listFiles[] = f.list();\r\n    \t\tlong totalSize = 0;\r\n    \t\tfor (String file : listFiles) {\r\n    \r\n    \t\t\tFile folder = new File(dir + &quot;/&quot; + file);\r\n    \t\t\tif (folder.isDirectory()) {\r\n    \t\t\t\ttotalSize += deleteFolder(folder.getAbsolutePath());\r\n    \t\t\t} else {\r\n    \t\t\t\ttotalSize += folder.length();\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tif (totalSize ==0) {\r\n    \t\t\tf.delete();\r\n    \t\t}\r\n    \r\n    \t\treturn totalSize;\r\n    \t}\r\n\r\n\r\n","title":"Delete all empty folders in Java","body":"<p>You can use code to delete empty folders using Java.</p>\n\n<pre><code>public static long deleteFolder(String dir) {\n\n        File f = new File(dir);\n        String listFiles[] = f.list();\n        long totalSize = 0;\n        for (String file : listFiles) {\n\n            File folder = new File(dir + \"/\" + file);\n            if (folder.isDirectory()) {\n                totalSize += deleteFolder(folder.getAbsolutePath());\n            } else {\n                totalSize += folder.length();\n            }\n        }\n\n        if (totalSize ==0) {\n            f.delete();\n        }\n\n        return totalSize;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17637797,"reputation":1850,"user_id":12800717,"display_name":"supernova"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611585716,"creation_date":1611585716,"answer_id":65886908,"question_id":26017545,"body_markdown":"Shortest code I could come up with is following Java &gt;=8 code:\r\n\r\n```\r\n        Files.walk(Paths.get(&quot;/my/base/dir/&quot;))\r\n                .sorted(Comparator.reverseOrder())\r\n                .map(Path::toFile)\r\n                .filter(File::isDirectory)\r\n                .forEach(File::delete);\r\n```\r\nAdd a second (or more) filter statement with whatever clause you need to include/exclude certain folders. **File::delete** should not delete folders with contents.\r\nUse at own risk.","title":"Delete all empty folders in Java","body":"<p>Shortest code I could come up with is following Java &gt;=8 code:</p>\n<pre><code>        Files.walk(Paths.get(&quot;/my/base/dir/&quot;))\n                .sorted(Comparator.reverseOrder())\n                .map(Path::toFile)\n                .filter(File::isDirectory)\n                .forEach(File::delete);\n</code></pre>\n<p>Add a second (or more) filter statement with whatever clause you need to include/exclude certain folders. <strong>File::delete</strong> should not delete folders with contents.\nUse at own risk.</p>\n"},{"tags":[],"owner":{"account_id":1960473,"reputation":917,"user_id":1762235,"accept_rate":71,"display_name":"typik89"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1640267418,"creation_date":1640266886,"answer_id":70462938,"question_id":26017545,"body_markdown":"Kotlin:\r\n\r\n    fun deleteAllEmptyDirectories(rootPath: Path): Collection&lt;Path&gt; =\r\n        mutableListOf&lt;Path&gt;()\r\n            .apply {\r\n                Files.walk(testPath)\r\n                    .sorted { p1, p2 -&gt; p2.count() - p1.count() }\r\n                    .map { it.toFile() }\r\n                    .filter { it.isDirectory }\r\n                    .forEach {\r\n                        if (it.listFiles().all { el -&gt; el.isDirectory &amp;&amp; contains(el.toPath()) }) {\r\n                            val path = it.toPath()\r\n                            add(path)\r\n                            Files.delete(path)\r\n                        }\r\n                    }\r\n            }\r\n\r\nTest:\r\n\r\n     private val testPath = Path.of(&quot;build&quot;, javaClass.simpleName, UUID.randomUUID().toString())\r\n\r\n    @Test\r\n    fun test() {\r\n        Files.createDirectory(testPath)\r\n\r\n        val dirWithTwoEmptySubdirs = Files.createDirectory(testPath.resolve(&quot;dirWithTwoEmptySubdirs&quot;))\r\n        val dir1 = Files.createDirectory(dirWithTwoEmptySubdirs.resolve(&quot;dir1&quot;))\r\n        val dir2 = Files.createDirectory(dirWithTwoEmptySubdirs.resolve(&quot;dir2&quot;))\r\n        val dirWithOneDiffDir = Files.createDirectory(testPath.resolve(&quot;dirWithOneDiffDir&quot;))\r\n        var emptyDir = Files.createDirectory(dirWithOneDiffDir.resolve(&quot;empty&quot;))\r\n        val notEmptyDir = Files.createDirectory(dirWithOneDiffDir.resolve(&quot;notempty&quot;))\r\n        Files.writeString(notEmptyDir.resolve(&quot;file.txt&quot;), &quot;asdf&quot;)\r\n\r\n        assertEquals(\r\n            setOf&lt;Path&gt;(dirWithTwoEmptySubdirs, dir1, dir2, emptyDir),\r\n            deleteAllEmptyDirectories(testPath).toSet()\r\n        )\r\n    }\r\n\r\n","title":"Delete all empty folders in Java","body":"<p>Kotlin:</p>\n<pre><code>fun deleteAllEmptyDirectories(rootPath: Path): Collection&lt;Path&gt; =\n    mutableListOf&lt;Path&gt;()\n        .apply {\n            Files.walk(testPath)\n                .sorted { p1, p2 -&gt; p2.count() - p1.count() }\n                .map { it.toFile() }\n                .filter { it.isDirectory }\n                .forEach {\n                    if (it.listFiles().all { el -&gt; el.isDirectory &amp;&amp; contains(el.toPath()) }) {\n                        val path = it.toPath()\n                        add(path)\n                        Files.delete(path)\n                    }\n                }\n        }\n</code></pre>\n<p>Test:</p>\n<pre><code> private val testPath = Path.of(&quot;build&quot;, javaClass.simpleName, UUID.randomUUID().toString())\n\n@Test\nfun test() {\n    Files.createDirectory(testPath)\n\n    val dirWithTwoEmptySubdirs = Files.createDirectory(testPath.resolve(&quot;dirWithTwoEmptySubdirs&quot;))\n    val dir1 = Files.createDirectory(dirWithTwoEmptySubdirs.resolve(&quot;dir1&quot;))\n    val dir2 = Files.createDirectory(dirWithTwoEmptySubdirs.resolve(&quot;dir2&quot;))\n    val dirWithOneDiffDir = Files.createDirectory(testPath.resolve(&quot;dirWithOneDiffDir&quot;))\n    var emptyDir = Files.createDirectory(dirWithOneDiffDir.resolve(&quot;empty&quot;))\n    val notEmptyDir = Files.createDirectory(dirWithOneDiffDir.resolve(&quot;notempty&quot;))\n    Files.writeString(notEmptyDir.resolve(&quot;file.txt&quot;), &quot;asdf&quot;)\n\n    assertEquals(\n        setOf&lt;Path&gt;(dirWithTwoEmptySubdirs, dir1, dir2, emptyDir),\n        deleteAllEmptyDirectories(testPath).toSet()\n    )\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10489606,"reputation":126,"user_id":11540228,"display_name":"Daan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694156473,"creation_date":1656415100,"answer_id":72785478,"question_id":26017545,"body_markdown":"After reading all answers and concluding that all of them have at least one problem I still had to write it myself: \r\n\r\n    import java.io.File;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n\r\n    public class Temp {\r\n\r\n      public static void main(String[] args) {\r\n        final String path = &quot;D:\\\\&quot;;\r\n        deleteEmpty(new File(path));\r\n      }\r\n\r\n      private static int deleteEmpty(File file) {\r\n        List&lt;File&gt; toBeDeleted = Arrays.stream(file.listFiles()).sorted() //\r\n            .filter(File::isDirectory) //\r\n            // Recursive call to delete sub-directories. \r\n            // If all files in the sub-directory where deleted, also delete this directory. \r\n            .filter(f -&gt; f.listFiles().length == deleteEmpty(f)) //\r\n            .collect(Collectors.toList());\r\n        int size = toBeDeleted.size();\r\n        toBeDeleted.forEach(t -&gt; {\r\n          final String path = t.getAbsolutePath();\r\n          final boolean delete = t.delete();\r\n          System.out.println(&quot;Deleting: \\t&quot; + delete + &quot;\\t&quot; + path);\r\n        });\r\n        return size;\r\n      }\r\n\r\n    }\r\n","title":"Delete all empty folders in Java","body":"<p>After reading all answers and concluding that all of them have at least one problem I still had to write it myself:</p>\n<pre><code>import java.io.File;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class Temp {\n\n  public static void main(String[] args) {\n    final String path = &quot;D:\\\\&quot;;\n    deleteEmpty(new File(path));\n  }\n\n  private static int deleteEmpty(File file) {\n    List&lt;File&gt; toBeDeleted = Arrays.stream(file.listFiles()).sorted() //\n        .filter(File::isDirectory) //\n        // Recursive call to delete sub-directories. \n        // If all files in the sub-directory where deleted, also delete this directory. \n        .filter(f -&gt; f.listFiles().length == deleteEmpty(f)) //\n        .collect(Collectors.toList());\n    int size = toBeDeleted.size();\n    toBeDeleted.forEach(t -&gt; {\n      final String path = t.getAbsolutePath();\n      final boolean delete = t.delete();\n      System.out.println(&quot;Deleting: \\t&quot; + delete + &quot;\\t&quot; + path);\n    });\n    return size;\n  }\n\n}\n</code></pre>\n"}],"owner":{"account_id":4509873,"reputation":2850,"user_id":3666302,"accept_rate":71,"display_name":"TomTom"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14876,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1694156473,"creation_date":1411563453,"question_id":26017545,"body_markdown":"I&#39;d like to write a function that deletes all empty folders, with the option to ignore certain file types (allowed file types are stored in the hashmap) and tell if it should look inside directories.\r\n\r\n**Calling:**\r\n\r\n    HashMap&lt;String, Boolean&gt; allowedFileTypes = new HashMap&lt;String, Boolean&gt;();\r\n    allowedFileTypes.put(&quot;pdf&quot;, true);\r\n    deleteEmptyFolders(&quot;ABSOLUTE PATH&quot;, allowedFileTypes, true);\r\n\r\n**Function:**\r\n\r\n    public static void deleteEmptyFolders(String folderPath, HashMap&lt;String, Boolean&gt; allowedFileTypes, boolean followDirectory) {\r\n\r\n        File targetFolder = new File(folderPath);\r\n        File[] allFiles = targetFolder.listFiles();\r\n\r\n\r\n        if (allFiles.length == 0)\r\n            targetFolder.delete();\r\n\r\n        else {\r\n            boolean importantFiles = false;\r\n\r\n            for (File file : allFiles) {\r\n\r\n                String fileType = &quot;folder&quot;;\r\n                if (!file.isDirectory())\r\n                    fileType = file.getName().substring(file.getName().lastIndexOf(&#39;.&#39;) + 1);\r\n\r\n                if (!importantFiles)\r\n                    importantFiles = (allowedFileTypes.get(fileType) != null);\r\n\r\n                if (file.isDirectory() &amp;&amp; followDirectory)\r\n                    deleteEmptyFolders(file.getAbsolutePath(), allowedFileTypes, followDirectory);\r\n            }\r\n\r\n            // if there are no important files in the target folder\r\n            if (!importantFiles)\r\n                targetFolder.delete();\r\n        }\r\n    }\r\n\r\n\r\nThe problem is that nothing is happening, even though it looks through all folders till the end. Is this a good approach or am I missing something completely?","title":"Delete all empty folders in Java","body":"<p>I'd like to write a function that deletes all empty folders, with the option to ignore certain file types (allowed file types are stored in the hashmap) and tell if it should look inside directories.</p>\n\n<p><strong>Calling:</strong></p>\n\n<pre><code>HashMap&lt;String, Boolean&gt; allowedFileTypes = new HashMap&lt;String, Boolean&gt;();\nallowedFileTypes.put(\"pdf\", true);\ndeleteEmptyFolders(\"ABSOLUTE PATH\", allowedFileTypes, true);\n</code></pre>\n\n<p><strong>Function:</strong></p>\n\n<pre><code>public static void deleteEmptyFolders(String folderPath, HashMap&lt;String, Boolean&gt; allowedFileTypes, boolean followDirectory) {\n\n    File targetFolder = new File(folderPath);\n    File[] allFiles = targetFolder.listFiles();\n\n\n    if (allFiles.length == 0)\n        targetFolder.delete();\n\n    else {\n        boolean importantFiles = false;\n\n        for (File file : allFiles) {\n\n            String fileType = \"folder\";\n            if (!file.isDirectory())\n                fileType = file.getName().substring(file.getName().lastIndexOf('.') + 1);\n\n            if (!importantFiles)\n                importantFiles = (allowedFileTypes.get(fileType) != null);\n\n            if (file.isDirectory() &amp;&amp; followDirectory)\n                deleteEmptyFolders(file.getAbsolutePath(), allowedFileTypes, followDirectory);\n        }\n\n        // if there are no important files in the target folder\n        if (!importantFiles)\n            targetFolder.delete();\n    }\n}\n</code></pre>\n\n<p>The problem is that nothing is happening, even though it looks through all folders till the end. Is this a good approach or am I missing something completely?</p>\n"},{"tags":["java","jpa","micronaut","micronaut-data"],"comments":[{"owner":{"account_id":4129849,"reputation":3184,"user_id":3388069,"display_name":"Sascha Frinken"},"score":0,"creation_date":1569759885,"post_id":58144514,"comment_id":102693210,"body_markdown":"https://github.com/micronaut-projects/micronaut-data/issues/170","body":"<a href=\"https://github.com/micronaut-projects/micronaut-data/issues/170\" rel=\"nofollow noreferrer\">github.com/micronaut-projects/micronaut-data/issues/170</a>"},{"owner":{"account_id":13455741,"reputation":4930,"user_id":9709361,"display_name":"cgrim"},"score":1,"creation_date":1569830476,"post_id":58144514,"comment_id":102709117,"body_markdown":"@SaschaFrinken it is a different issue, but I created the new one especially for this case: https://github.com/micronaut-projects/micronaut-data/issues/184","body":"@SaschaFrinken it is a different issue, but I created the new one especially for this case: <a href=\"https://github.com/micronaut-projects/micronaut-data/issues/184\" rel=\"nofollow noreferrer\">github.com/micronaut-projects/micronaut-data/issues/184</a>"}],"answers":[{"tags":[],"owner":{"account_id":13455741,"reputation":4930,"user_id":9709361,"display_name":"cgrim"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1694156221,"creation_date":1569831198,"answer_id":58163900,"question_id":58144514,"body_markdown":"Now (in latest version 1.0.0.M1) it is not possible. So I created feature request issue for that: https://github.com/micronaut-projects/micronaut-data/issues/184\r\n\r\nCurrent workaround is to map entity bean into DTO bean in Java stream or reactive stream for example and do the properties mapping manually or by Mapstruct.\r\n\r\n\r\n----------\r\n\r\n\r\n**Update:** Here is an answer to question from comments with an example how to do the workaround using Mapstruct:\r\n\r\nAdd Mapstruct dependency into *build.gradle*:\r\n\r\n&lt;!-- language: groovy --&gt;\r\n\r\n    implementation &quot;org.mapstruct:mapstruct:$mapstructVersion&quot;\r\n    annotationProcessor &quot;org.mapstruct:mapstruct-processor:$mapstructVersion&quot;\r\n    testAnnotationProcessor &quot;org.mapstruct:mapstruct-processor:$mapstructVersion&quot;\r\n\r\nDefine mapper:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import org.mapstruct.Mapper;\r\n    \r\n    @Mapper(\r\n        componentModel = &quot;jsr330&quot;\r\n    )\r\n    public interface ParseErrorMapper {\r\n        ParseErrorDto entityToDto(@NotNull ParseError parseError);\r\n    \r\n        EntityReference recipeToDto(@NotNull Recipe recipe);\r\n    }\r\n\r\nAnd here is a usage of that mapper in the controller:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Controller(&quot;/parse-error&quot;)\r\n    public class ParseErrorController {\r\n        private final ParseErrorRepository repository;\r\n        private final ParseErrorMapper mapper;\r\n    \r\n        public ParseErrorController(ParseErrorRepository repository, ParseErrorMapper mapper) {\r\n            this.repository = repository;\r\n            this.mapper = mapper;\r\n        }\r\n    \r\n        @Get(&quot;all&quot;)\r\n        @Transactional\r\n        public Page&lt;ParseErrorDto&gt; getAll(final Pageable pageable) {\r\n            return repository.findAll(pageable).map(mapper::entityToDto);\r\n        }\r\n    }\r\n\r\n**Update (September 2023):** feature implemented by https://github.com/micronaut-projects/micronaut-data/pull/2495","title":"Micronaut Data DTO projection with properties from joined entities","body":"<p>Now (in latest version 1.0.0.M1) it is not possible. So I created feature request issue for that: <a href=\"https://github.com/micronaut-projects/micronaut-data/issues/184\" rel=\"nofollow noreferrer\">https://github.com/micronaut-projects/micronaut-data/issues/184</a></p>\n<p>Current workaround is to map entity bean into DTO bean in Java stream or reactive stream for example and do the properties mapping manually or by Mapstruct.</p>\n<hr />\n<p><strong>Update:</strong> Here is an answer to question from comments with an example how to do the workaround using Mapstruct:</p>\n<p>Add Mapstruct dependency into <em>build.gradle</em>:</p>\n<pre><code>implementation &quot;org.mapstruct:mapstruct:$mapstructVersion&quot;\nannotationProcessor &quot;org.mapstruct:mapstruct-processor:$mapstructVersion&quot;\ntestAnnotationProcessor &quot;org.mapstruct:mapstruct-processor:$mapstructVersion&quot;\n</code></pre>\n<p>Define mapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.mapstruct.Mapper;\n\n@Mapper(\n    componentModel = &quot;jsr330&quot;\n)\npublic interface ParseErrorMapper {\n    ParseErrorDto entityToDto(@NotNull ParseError parseError);\n\n    EntityReference recipeToDto(@NotNull Recipe recipe);\n}\n</code></pre>\n<p>And here is a usage of that mapper in the controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller(&quot;/parse-error&quot;)\npublic class ParseErrorController {\n    private final ParseErrorRepository repository;\n    private final ParseErrorMapper mapper;\n\n    public ParseErrorController(ParseErrorRepository repository, ParseErrorMapper mapper) {\n        this.repository = repository;\n        this.mapper = mapper;\n    }\n\n    @Get(&quot;all&quot;)\n    @Transactional\n    public Page&lt;ParseErrorDto&gt; getAll(final Pageable pageable) {\n        return repository.findAll(pageable).map(mapper::entityToDto);\n    }\n}\n</code></pre>\n<p><strong>Update (September 2023):</strong> feature implemented by <a href=\"https://github.com/micronaut-projects/micronaut-data/pull/2495\" rel=\"nofollow noreferrer\">https://github.com/micronaut-projects/micronaut-data/pull/2495</a></p>\n"}],"owner":{"account_id":13455741,"reputation":4930,"user_id":9709361,"display_name":"cgrim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3905,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":58163900,"answer_count":1,"score":6,"last_activity_date":1694156221,"creation_date":1569658167,"question_id":58144514,"body_markdown":"I use Micronaut Data with JPA and have two entities. The first one is `Recipe`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Entity\r\n    public class Recipe {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n\r\n        private String name;\r\n\r\n        @ManyToOne\r\n        private Category category;\r\n\r\n        @OneToMany(mappedBy = &quot;recipe&quot;, cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\r\n        private Set&lt;Step&gt; steps;\r\n    \r\n    // + other fields, getters and setters\r\n    }\r\n\r\nThe second one is `ParseError` which refers to `Recipe`: \r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Entity\r\n    @Table(name = &quot;parse_error&quot;)\r\n    public class ParseError implements Serializable {\r\n        @Id\r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        private Recipe recipe;\r\n    \r\n        @Id\r\n        @Enumerated(EnumType.ORDINAL)\r\n        @Column(name = &quot;problem_area&quot;)\r\n        private ProblemArea problemArea;\r\n    \r\n        private String message;\r\n    \r\n    // + other fields, getters and setters\r\n    }\r\n\r\nNow I would like to provide DTO in API with `ParseError` properties but not with whole `Recipe` entity because it contains ManyToOne and OneToMany relations which are not needed in this case. So I created projection DTO for that:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Introspected\r\n    public class ParseErrorDto {\r\n        private Integer recipeId;\r\n\r\n        private String recipeName;\r\n\r\n        private ParseError.ProblemArea problemArea;\r\n\r\n        private String message;\r\n    \r\n    // + getters and setters\r\n    }\r\n\r\nAnd added `listAll()` method into `ParseErrorRepository`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Repository\r\n    public interface ParseErrorRepository extends CrudRepository&lt;ParseError, Integer&gt; {\r\n        List&lt;ParseErrorDto&gt; listAll();\r\n    }\r\n\r\nBut it seems that Micronaut Data is not able to project properties from nested entities or I missed something in the DTO or the repository method:\r\n\r\n&gt; ParseErrorRepository.java:22: error: Unable to implement Repository\r\n&gt; method: ParseErrorRepository.listAll(). Property recipeId is not\r\n&gt; present in entity: ParseError\r\n\r\n\r\nI also tried to create `RecipeDto`:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Introspected\r\n    public class RecipeDto {\r\n        private Integer id;\r\n    \r\n        private String name;\r\n    \r\n        // + getters and setters\r\n    }\r\n\r\nAnd updated `ParseErrorDto` accordingly:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Introspected\r\n    public class ParseErrorDto {\r\n        private RecipeDto recipe;\r\n    \r\n        private ParseError.ProblemArea problemArea;\r\n    \r\n        private String message;\r\n    \r\n        // + getters and setters\r\n    }\r\n\r\nAgain no success:\r\n\r\n&gt; ParseErrorRepository.java:22: error: Unable to implement Repository\r\n&gt; method: ParseErrorRepository.listAll(). Property [recipe] of type\r\n&gt; [RecipeDto] is not compatible with equivalent property declared in\r\n&gt; entity: ParseError\r\n\r\nIs Micronaut Data able to handle this use case by DTO projection? If not then is there another way how can I solve it in Micronaut Data?\r\n\r\n\r\n\r\n","title":"Micronaut Data DTO projection with properties from joined entities","body":"<p>I use Micronaut Data with JPA and have two entities. The first one is <code>Recipe</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Recipe {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    private String name;\n\n    @ManyToOne\n    private Category category;\n\n    @OneToMany(mappedBy = \"recipe\", cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)\n    private Set&lt;Step&gt; steps;\n\n// + other fields, getters and setters\n}\n</code></pre>\n\n<p>The second one is <code>ParseError</code> which refers to <code>Recipe</code>: </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = \"parse_error\")\npublic class ParseError implements Serializable {\n    @Id\n    @ManyToOne(fetch = FetchType.LAZY)\n    private Recipe recipe;\n\n    @Id\n    @Enumerated(EnumType.ORDINAL)\n    @Column(name = \"problem_area\")\n    private ProblemArea problemArea;\n\n    private String message;\n\n// + other fields, getters and setters\n}\n</code></pre>\n\n<p>Now I would like to provide DTO in API with <code>ParseError</code> properties but not with whole <code>Recipe</code> entity because it contains ManyToOne and OneToMany relations which are not needed in this case. So I created projection DTO for that:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Introspected\npublic class ParseErrorDto {\n    private Integer recipeId;\n\n    private String recipeName;\n\n    private ParseError.ProblemArea problemArea;\n\n    private String message;\n\n// + getters and setters\n}\n</code></pre>\n\n<p>And added <code>listAll()</code> method into <code>ParseErrorRepository</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface ParseErrorRepository extends CrudRepository&lt;ParseError, Integer&gt; {\n    List&lt;ParseErrorDto&gt; listAll();\n}\n</code></pre>\n\n<p>But it seems that Micronaut Data is not able to project properties from nested entities or I missed something in the DTO or the repository method:</p>\n\n<blockquote>\n  <p>ParseErrorRepository.java:22: error: Unable to implement Repository\n  method: ParseErrorRepository.listAll(). Property recipeId is not\n  present in entity: ParseError</p>\n</blockquote>\n\n<p>I also tried to create <code>RecipeDto</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Introspected\npublic class RecipeDto {\n    private Integer id;\n\n    private String name;\n\n    // + getters and setters\n}\n</code></pre>\n\n<p>And updated <code>ParseErrorDto</code> accordingly:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Introspected\npublic class ParseErrorDto {\n    private RecipeDto recipe;\n\n    private ParseError.ProblemArea problemArea;\n\n    private String message;\n\n    // + getters and setters\n}\n</code></pre>\n\n<p>Again no success:</p>\n\n<blockquote>\n  <p>ParseErrorRepository.java:22: error: Unable to implement Repository\n  method: ParseErrorRepository.listAll(). Property [recipe] of type\n  [RecipeDto] is not compatible with equivalent property declared in\n  entity: ParseError</p>\n</blockquote>\n\n<p>Is Micronaut Data able to handle this use case by DTO projection? If not then is there another way how can I solve it in Micronaut Data?</p>\n"},{"tags":["java","micronaut-client"],"owner":{"account_id":29392952,"reputation":1,"user_id":22520875,"display_name":"Rafal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694156142,"creation_date":1694156033,"question_id":77064748,"body_markdown":"I&#39;m trying to use RxStreamingHttpClient in my controller to stream 100MB file but Micronaut (v3.10.1) logs an error after starting the transfer:\r\n\r\n```\r\n16:13:20.287 [default-nioEventLoopGroup-1-4] WARN  io.netty.util.ReferenceCountUtil - Failed to release a message: PooledSlicedByteBuf(freed)\r\nio.netty.util.IllegalReferenceCountException: refCnt: 0, decrement: 1\r\n        at io.netty.util.internal.ReferenceCountUpdater.toLiveRealRefCnt(ReferenceCountUpdater.java:83)\r\n        at io.netty.util.internal.ReferenceCountUpdater.release(ReferenceCountUpdater.java:148)\r\n        at io.netty.buffer.AbstractReferenceCountedByteBuf.release(AbstractReferenceCountedByteBuf.java:101)\r\n        at io.netty.util.ReferenceCountUtil.release(ReferenceCountUtil.java:90)\r\n        at io.netty.util.ReferenceCountUtil.safeRelease(ReferenceCountUtil.java:116)\r\n        at io.netty.channel.ChannelOutboundBuffer.remove(ChannelOutboundBuffer.java:282)\r\n```\r\n\r\nand curl&#39;s output:\r\n\r\n```\r\nnwer@alpha ~/tmp $ curl --location &#39;http://localhost:8080/binary/test1&#39; -i -o test\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current Dload  Upload   Total   Spent    Left  Speed\r\n100 12489    0 12489    0     0   8642      0 --:--:--  0:00:01 --:--:--  8678\r\ncurl: (18) transfer closed with outstanding read data remaining\r\n```\r\n\r\nBelow is a method in my controller:\r\n \r\n```\r\n@Get(value = &quot;/test1&quot;, produces = MediaType.APPLICATION_OCTET_STREAM)\r\n    Flowable&lt;ByteBuffer&lt;?&gt;&gt; test1() throws MalformedURLException {\r\n    URL url = new URL(&quot;http://localhost:8085&quot;);\r\n    HttpClientConfiguration conf = new DefaultHttpClientConfiguration();\r\n    conf.setMaxContentLength(2147483647);\r\n    RxStreamingHttpClient client = RxStreamingHttpClient.create(url, conf);\r\n    return client.dataStream(HttpRequest.GET(&quot;/v1/objects/9e3aad86-491c-451c-afbc-98f8c21a6ab8/100MbFile&quot;));\r\n    }\r\n```\r\n\r\nWhat is missing in my implementation? Is this the best way to stream ~100MB files via Micronaut?","title":"How to use Micronaut&#39;s RxStreamingHttpClient","body":"<p>I'm trying to use RxStreamingHttpClient in my controller to stream 100MB file but Micronaut (v3.10.1) logs an error after starting the transfer:</p>\n<pre><code>16:13:20.287 [default-nioEventLoopGroup-1-4] WARN  io.netty.util.ReferenceCountUtil - Failed to release a message: PooledSlicedByteBuf(freed)\nio.netty.util.IllegalReferenceCountException: refCnt: 0, decrement: 1\n        at io.netty.util.internal.ReferenceCountUpdater.toLiveRealRefCnt(ReferenceCountUpdater.java:83)\n        at io.netty.util.internal.ReferenceCountUpdater.release(ReferenceCountUpdater.java:148)\n        at io.netty.buffer.AbstractReferenceCountedByteBuf.release(AbstractReferenceCountedByteBuf.java:101)\n        at io.netty.util.ReferenceCountUtil.release(ReferenceCountUtil.java:90)\n        at io.netty.util.ReferenceCountUtil.safeRelease(ReferenceCountUtil.java:116)\n        at io.netty.channel.ChannelOutboundBuffer.remove(ChannelOutboundBuffer.java:282)\n</code></pre>\n<p>and curl's output:</p>\n<pre><code>nwer@alpha ~/tmp $ curl --location 'http://localhost:8080/binary/test1' -i -o test\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current Dload  Upload   Total   Spent    Left  Speed\n100 12489    0 12489    0     0   8642      0 --:--:--  0:00:01 --:--:--  8678\ncurl: (18) transfer closed with outstanding read data remaining\n</code></pre>\n<p>Below is a method in my controller:</p>\n<pre><code>@Get(value = &quot;/test1&quot;, produces = MediaType.APPLICATION_OCTET_STREAM)\n    Flowable&lt;ByteBuffer&lt;?&gt;&gt; test1() throws MalformedURLException {\n    URL url = new URL(&quot;http://localhost:8085&quot;);\n    HttpClientConfiguration conf = new DefaultHttpClientConfiguration();\n    conf.setMaxContentLength(2147483647);\n    RxStreamingHttpClient client = RxStreamingHttpClient.create(url, conf);\n    return client.dataStream(HttpRequest.GET(&quot;/v1/objects/9e3aad86-491c-451c-afbc-98f8c21a6ab8/100MbFile&quot;));\n    }\n</code></pre>\n<p>What is missing in my implementation? Is this the best way to stream ~100MB files via Micronaut?</p>\n"},{"tags":["java","android","fonts","android-support-library"],"comments":[{"owner":{"account_id":2879578,"reputation":3377,"user_id":2470770,"display_name":"lib4backer"},"score":1,"creation_date":1518778787,"post_id":48825038,"comment_id":84654144,"body_markdown":"getFont was added in api version 26 https://developer.android.com/reference/android/support/v4/content/res/ResourcesCompat.html#getFont(android.content.Context,%20int)","body":"getFont was added in api version 26 <a href=\"https://developer.android.com/reference/android/support/v4/content/res/ResourcesCompat.html#getFont(android.content.Context,%20int)\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/support/v4/content/r&zwnj;&#8203;es/&hellip;</a>"},{"owner":{"account_id":6756687,"reputation":8542,"user_id":5204833,"accept_rate":89,"display_name":"Amir_P"},"score":0,"creation_date":1518779235,"post_id":48825038,"comment_id":84654380,"body_markdown":"but I tested and it&#39;s working on lower api&#39;s @lib4","body":"but I tested and it&#39;s working on lower api&#39;s @lib4"},{"owner":{"account_id":2879578,"reputation":3377,"user_id":2470770,"display_name":"lib4backer"},"score":0,"creation_date":1518779525,"post_id":48825038,"comment_id":84654552,"body_markdown":"Would you mind removing the underscore from the font file? Sometimes it is reported similar issue https://stackoverflow.com/questions/43142235/cannot-resolve-method-getfont","body":"Would you mind removing the underscore from the font file? Sometimes it is reported similar issue <a href=\"https://stackoverflow.com/questions/43142235/cannot-resolve-method-getfont\" title=\"cannot resolve method getfont\">stackoverflow.com/questions/43142235/&hellip;</a>"},{"owner":{"account_id":6756687,"reputation":8542,"user_id":5204833,"accept_rate":89,"display_name":"Amir_P"},"score":0,"creation_date":1518781310,"post_id":48825038,"comment_id":84655500,"body_markdown":"that&#39;s just an example. my font name is something different and doesn&#39;t have underscore or other special character @lib4","body":"that&#39;s just an example. my font name is something different and doesn&#39;t have underscore or other special character @lib4"},{"owner":{"account_id":3197333,"reputation":4915,"user_id":2700239,"accept_rate":81,"display_name":"Fartab"},"score":0,"creation_date":1615292242,"post_id":48825038,"comment_id":117640694,"body_markdown":"@Amir_P Did you find a solution to fix this?","body":"@Amir_P Did you find a solution to fix this?"},{"owner":{"account_id":6756687,"reputation":8542,"user_id":5204833,"accept_rate":89,"display_name":"Amir_P"},"score":0,"creation_date":1615297937,"post_id":48825038,"comment_id":117643213,"body_markdown":"Unfortunately I can&#39;t remember what I did to avoid the issue :( @Fartab","body":"Unfortunately I can&#39;t remember what I did to avoid the issue :( @Fartab"}],"answers":[{"tags":[],"owner":{"account_id":1395692,"reputation":471,"user_id":1325490,"display_name":"dwemthy"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1529531050,"creation_date":1529531050,"answer_id":50957503,"question_id":48825038,"body_markdown":"Had this same issue, noticed a detail in the docs that helped:  \r\n\r\n&gt; When you declare font families in XML layout through the support\r\n&gt; library, use the app namespace to ensure your fonts load.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;font-family xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n      &lt;font app:fontStyle=&quot;normal&quot; app:fontWeight=&quot;400&quot; app:font=&quot;@font/myfont-Regular&quot;/&gt;\r\n      &lt;font app:fontStyle=&quot;italic&quot; app:fontWeight=&quot;400&quot; app:font=&quot;@font/myfont-Italic&quot; /&gt;\r\n    &lt;/font-family&gt;\r\n\r\nI had been using the &#39;android&#39; namespace before, changing to the &#39;app&#39; namespace made my fonts load on older devices correctly.","title":"Font resource could not be retrieved","body":"<p>Had this same issue, noticed a detail in the docs that helped:  </p>\n\n<blockquote>\n  <p>When you declare font families in XML layout through the support\n  library, use the app namespace to ensure your fonts load.</p>\n</blockquote>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;font-family xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n  &lt;font app:fontStyle=\"normal\" app:fontWeight=\"400\" app:font=\"@font/myfont-Regular\"/&gt;\n  &lt;font app:fontStyle=\"italic\" app:fontWeight=\"400\" app:font=\"@font/myfont-Italic\" /&gt;\n&lt;/font-family&gt;\n</code></pre>\n\n<p>I had been using the 'android' namespace before, changing to the 'app' namespace made my fonts load on older devices correctly.</p>\n"},{"tags":[],"owner":{"account_id":980790,"reputation":8154,"user_id":1000551,"display_name":"Vadim Kotov"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1549551426,"creation_date":1549551426,"answer_id":54576144,"question_id":48825038,"body_markdown":"I got the same crash while using [Downloadable fonts][1] on API level 16 with Google Play services 9.2.56 (emulator).  \r\n\r\nIf you&#39;re using this, then a **device must have Google Play services version 11 or higher** to use the Google Fonts provider (see this note in the [docs][2]).\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts\r\n  [2]: https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts#via-android-studio","title":"Font resource could not be retrieved","body":"<p>I got the same crash while using <a href=\"https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts\" rel=\"noreferrer\">Downloadable fonts</a> on API level 16 with Google Play services 9.2.56 (emulator).  </p>\n\n<p>If you're using this, then a <strong>device must have Google Play services version 11 or higher</strong> to use the Google Fonts provider (see this note in the <a href=\"https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts#via-android-studio\" rel=\"noreferrer\">docs</a>).</p>\n"},{"tags":[],"owner":{"account_id":1939965,"reputation":843,"user_id":1746379,"display_name":"Algorithm and Blues"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1562753180,"creation_date":1562753180,"answer_id":56968379,"question_id":48825038,"body_markdown":"I had the same problem with a TTF file in R.font when using `ResourcesCompat.getFont()`.\r\n\r\nIt turns out that Android didn&#39;t like this TTF file for some reason. There was no info in logcat, but debugging showed that `TypefaceCompat.createFromResourcesFontFile()` failed.\r\n\r\nI replaced the TTF file with another, similar font and had no problems since.","title":"Font resource could not be retrieved","body":"<p>I had the same problem with a TTF file in R.font when using <code>ResourcesCompat.getFont()</code>.</p>\n\n<p>It turns out that Android didn't like this TTF file for some reason. There was no info in logcat, but debugging showed that <code>TypefaceCompat.createFromResourcesFontFile()</code> failed.</p>\n\n<p>I replaced the TTF file with another, similar font and had no problems since.</p>\n"},{"tags":[],"owner":{"account_id":11383064,"reputation":494,"user_id":8345451,"display_name":"Divya Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593234336,"creation_date":1593234336,"answer_id":62606108,"question_id":48825038,"body_markdown":"In my case, even after upgrading Gradle version to most recent one didn&#39;t work.\r\nWhat worked for me was a really trivial solution, **updating the dependencies version to latest versions**. I don&#39;t know it might work or not in your case, but maybe you should try doing it once.","title":"Font resource could not be retrieved","body":"<p>In my case, even after upgrading Gradle version to most recent one didn't work.\nWhat worked for me was a really trivial solution, <strong>updating the dependencies version to latest versions</strong>. I don't know it might work or not in your case, but maybe you should try doing it once.</p>\n"},{"tags":[],"owner":{"account_id":3762163,"reputation":2306,"user_id":3126760,"accept_rate":37,"display_name":"1234567"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620902282,"creation_date":1620902282,"answer_id":67517812,"question_id":48825038,"body_markdown":"while using **Downloadable fonts** on API level 16\r\n\r\nThe fonts need to be **downloaded** so its better to check the Internet connection and download them, even when they are provided from the fonts folder.","title":"Font resource could not be retrieved","body":"<p>while using <strong>Downloadable fonts</strong> on API level 16</p>\n<p>The fonts need to be <strong>downloaded</strong> so its better to check the Internet connection and download them, even when they are provided from the fonts folder.</p>\n"},{"tags":[],"owner":{"account_id":18594182,"reputation":532,"user_id":13550653,"display_name":"Prateek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694155938,"creation_date":1651974104,"answer_id":72157504,"question_id":48825038,"body_markdown":"I was having the same issue, so I followed another approach and it work fine for me.\r\n\r\n1. Add a new directory in the **app/src/main** named as **assets** and make another subdirectory inside it as **fonts**\r\n2. Add a font file (eg. poppins.ttf) inside the fonts subdirectory\r\n3. If you are a Java developer then write this code in your Activity/Fragment file-  \r\n   ```java\r\n   Typeface font = Typeface.createFromAsset(getAssets(),&quot;fonts/poppins.ttf&quot;); \r\n   yourTextView.setTypeface(font);\r\n   ```\r\n   and if you are a Kotlin developer then you can use this,\r\n  \r\n   ```kotlin\r\n   val customTypeFace = Typeface.createFromAsset(context.assets, \r\n                                                 &quot;fonts/poppins-Light.ttf&quot;)\r\n   ```\r\n","title":"Font resource could not be retrieved","body":"<p>I was having the same issue, so I followed another approach and it work fine for me.</p>\n<ol>\n<li><p>Add a new directory in the <strong>app/src/main</strong> named as <strong>assets</strong> and make another subdirectory inside it as <strong>fonts</strong></p>\n</li>\n<li><p>Add a font file (eg. poppins.ttf) inside the fonts subdirectory</p>\n</li>\n<li><p>If you are a Java developer then write this code in your Activity/Fragment file-</p>\n<pre class=\"lang-java prettyprint-override\"><code>Typeface font = Typeface.createFromAsset(getAssets(),&quot;fonts/poppins.ttf&quot;); \nyourTextView.setTypeface(font);\n</code></pre>\n<p>and if you are a Kotlin developer then you can use this,</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val customTypeFace = Typeface.createFromAsset(context.assets, \n                                              &quot;fonts/poppins-Light.ttf&quot;)\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":6756687,"reputation":8542,"user_id":5204833,"accept_rate":89,"display_name":"Amir_P"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11124,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"answer_count":6,"score":29,"last_activity_date":1694155938,"creation_date":1518777835,"question_id":48825038,"body_markdown":"I&#39;m using `compileSdk` and `targetSdk` version 27 and in last release I used new font resource feature for my project but after a day I got 3 crashes for this line of code\r\n\r\n    Typeface typeface = ResourcesCompat.getFont(this, R.font.my_font);\r\nand the crash report says it&#39;s because of `android.content.res.Resources$NotFoundException` and Font resource could not be retrieved. All 3 crashes happened for users with android version `5.1.1`. Is this a bug in support library or I&#39;m doing something wrong?","title":"Font resource could not be retrieved","body":"<p>I'm using <code>compileSdk</code> and <code>targetSdk</code> version 27 and in last release I used new font resource feature for my project but after a day I got 3 crashes for this line of code</p>\n\n<pre><code>Typeface typeface = ResourcesCompat.getFont(this, R.font.my_font);\n</code></pre>\n\n<p>and the crash report says it's because of <code>android.content.res.Resources$NotFoundException</code> and Font resource could not be retrieved. All 3 crashes happened for users with android version <code>5.1.1</code>. Is this a bug in support library or I'm doing something wrong?</p>\n"},{"tags":["java","google-my-business-api","google-my-business","google-business-profile-api","google-business-profile"],"comments":[{"owner":{"account_id":15273161,"reputation":71,"user_id":11019735,"display_name":"Andrew Walker"},"score":1,"creation_date":1695918629,"post_id":77061046,"comment_id":136091099,"body_markdown":"I&#39;ve had the same issues, with direction actions being especially delayed, sometimes up to 10 days. When I reach out to support they say this is expected behavior. My solution was to re-pull the last 14 days every run","body":"I&#39;ve had the same issues, with direction actions being especially delayed, sometimes up to 10 days. When I reach out to support they say this is expected behavior. My solution was to re-pull the last 14 days every run"},{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1696234842,"post_id":77061046,"comment_id":136122328,"body_markdown":"@AndrewWalker: thank you for the response, my problem is that we have clients that they have more than 5000 stores, so the repetitive task is somehow time and resource consuming.","body":"@AndrewWalker: thank you for the response, my problem is that we have clients that they have more than 5000 stores, so the repetitive task is somehow time and resource consuming."}],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694155806,"creation_date":1694101355,"question_id":77061046,"body_markdown":"I am having problems by the `Google Business Performance API` being late for more than 5 days to return the insights of my locations ( documentation here: [Google Business Performance][1] ). \r\nThis was the same problem I have asked before [this question][2].\r\nI see it continues to change, I need to be sure about the values I read. \r\nThe code is \r\n\r\n  \r\n\r\n          private enum PerformanceMetrics {\r\n                BUSINESS_IMPRESSIONS_DESKTOP_MAPS,\r\n                BUSINESS_IMPRESSIONS_DESKTOP_SEARCH,\r\n                BUSINESS_IMPRESSIONS_MOBILE_MAPS , \r\n                BUSINESS_IMPRESSIONS_MOBILE_SEARCH,\r\n                BUSINESS_CONVERSATIONS,\r\n                BUSINESS_DIRECTION_REQUESTS, \r\n                CALL_CLICKS,\r\n                WEBSITE_CLICKS\r\n            }\r\n        public static void main(String[] args) throws Exception {\r\n        \r\n            business_profile_performance = initializeMyBusiness();\r\n        \r\n            locationsList.stream().forEach(u -&gt; {\r\n        \r\n                for(PerformanceMetrics dailyMetric:PerformanceMetrics.values() ) {\r\n                    try {\r\n                        \r\n                        BusinessProfilePerformance.Locations.GetDailyMetricsTimeSeries metricReport =\r\n                                business_profile_performance.locations().\r\n                                getDailyMetricsTimeSeries(locationID).\r\n                                setDailyMetric(dailyMetric.toString()).\r\n                                setDailyRangeStartDateYear(Integer.valueOf(&quot;2022&quot;)).\r\n                                setDailyRangeStartDateMonth(Integer.valueOf(&quot;12&quot;)).\r\n                                setDailyRangeStartDateDay(Integer.valueOf(&quot;26&quot;)).\r\n        \r\n                                setDailyRangeEndDateYear(Integer.valueOf(&quot;2022&quot;)).\r\n                                setDailyRangeEndDateMonth(Integer.valueOf(&quot;12&quot;)).\r\n                                setDailyRangeEndDateDay(Integer.valueOf(&quot;27&quot;));\r\n        \r\n        \r\n                        GetDailyMetricsTimeSeriesResponse response = metricReport.execute();\r\n                        if (!response.isEmpty()) {\r\n                            System.out.println(&quot; Response == &quot; + response);\r\n                        }\r\n        \r\n                    } catch (Exception e) {\r\n                        System.out.println(e);\r\n                    }\r\n        \r\n                }\r\n            });\r\n    \r\n    }\r\n\r\n Any Experience? \r\nThank you all.\r\n\r\n\r\n  [1]: https://developers.google.com/my-business/reference/performance/rest/v1/locations/fetchMultiDailyMetricsTimeSeries\r\n  [2]: https://stackoverflow.com/questions/74953430/how-long-is-the-google-business-profile-performance-api-latency-for-preparing-th\r\n\r\n\r\n\r\n","title":"How much delay has the Google Business Performance API to return the info fetchMultiDailyMetricsTimeSeries","body":"<p>I am having problems by the <code>Google Business Performance API</code> being late for more than 5 days to return the insights of my locations ( documentation here: <a href=\"https://developers.google.com/my-business/reference/performance/rest/v1/locations/fetchMultiDailyMetricsTimeSeries\" rel=\"nofollow noreferrer\">Google Business Performance</a> ).\nThis was the same problem I have asked before <a href=\"https://stackoverflow.com/questions/74953430/how-long-is-the-google-business-profile-performance-api-latency-for-preparing-th\">this question</a>.\nI see it continues to change, I need to be sure about the values I read.\nThe code is</p>\n<pre><code>      private enum PerformanceMetrics {\n            BUSINESS_IMPRESSIONS_DESKTOP_MAPS,\n            BUSINESS_IMPRESSIONS_DESKTOP_SEARCH,\n            BUSINESS_IMPRESSIONS_MOBILE_MAPS , \n            BUSINESS_IMPRESSIONS_MOBILE_SEARCH,\n            BUSINESS_CONVERSATIONS,\n            BUSINESS_DIRECTION_REQUESTS, \n            CALL_CLICKS,\n            WEBSITE_CLICKS\n        }\n    public static void main(String[] args) throws Exception {\n    \n        business_profile_performance = initializeMyBusiness();\n    \n        locationsList.stream().forEach(u -&gt; {\n    \n            for(PerformanceMetrics dailyMetric:PerformanceMetrics.values() ) {\n                try {\n                    \n                    BusinessProfilePerformance.Locations.GetDailyMetricsTimeSeries metricReport =\n                            business_profile_performance.locations().\n                            getDailyMetricsTimeSeries(locationID).\n                            setDailyMetric(dailyMetric.toString()).\n                            setDailyRangeStartDateYear(Integer.valueOf(&quot;2022&quot;)).\n                            setDailyRangeStartDateMonth(Integer.valueOf(&quot;12&quot;)).\n                            setDailyRangeStartDateDay(Integer.valueOf(&quot;26&quot;)).\n    \n                            setDailyRangeEndDateYear(Integer.valueOf(&quot;2022&quot;)).\n                            setDailyRangeEndDateMonth(Integer.valueOf(&quot;12&quot;)).\n                            setDailyRangeEndDateDay(Integer.valueOf(&quot;27&quot;));\n    \n    \n                    GetDailyMetricsTimeSeriesResponse response = metricReport.execute();\n                    if (!response.isEmpty()) {\n                        System.out.println(&quot; Response == &quot; + response);\n                    }\n    \n                } catch (Exception e) {\n                    System.out.println(e);\n                }\n    \n            }\n        });\n\n}\n</code></pre>\n<p>Any Experience?\nThank you all.</p>\n"},{"tags":["java","spring","spring-boot","migration"],"answers":[{"tags":[],"owner":{"account_id":18516603,"reputation":31,"user_id":13490614,"display_name":"iking1211"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694155542,"creation_date":1694155542,"answer_id":77064706,"question_id":77063149,"body_markdown":"In the docs it says \r\n\r\n&gt; Note: a pattern and a path must both be absolute or must both be relative in order for the two to match. Therefore, it is recommended that users of this implementation to sanitize patterns in order to prefix them with &quot;/&quot; as it makes sense in the context in which they&#39;re used.\r\n\r\nThe path in your request mapping is absolute, please check if the failing test are accessing the controller by a relative route or absolute route.","title":"Migrate RequestMapping from older spring to spring 5 unable to replace /**/ at the beginning","body":"<p>In the docs it says</p>\n<blockquote>\n<p>Note: a pattern and a path must both be absolute or must both be relative in order for the two to match. Therefore, it is recommended that users of this implementation to sanitize patterns in order to prefix them with &quot;/&quot; as it makes sense in the context in which they're used.</p>\n</blockquote>\n<p>The path in your request mapping is absolute, please check if the failing test are accessing the controller by a relative route or absolute route.</p>\n"}],"owner":{"account_id":7377353,"reputation":171,"user_id":5956553,"accept_rate":100,"display_name":"student0495"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694155542,"creation_date":1694124969,"question_id":77063149,"body_markdown":"I&#39;m having issues migrating a Java application from 14 to 17 due to the upgrade on spring to version 5. The problem I have is the following:\r\n\r\nI have a controller with `@RequestMapping(value = &quot;/**/{[something:[^.]*}&quot;)`\r\n\r\nThe application seems to work just fine on localhost, however some paths are built wrongly on the server and some JUnits are failing, throwing: `org.springframework.web.util.pattern.PatternParseException: No more pattern data allowed after {*...} or ** pattern element`. Reading the spring docs here https://spring.io/blog/2020/06/30/url-matching-with-pathpattern-in-spring-mvc/ I discovered we cannot use anymore `/**/` at the beginning, and it&#39;s only allowed at the end.\r\n\r\nIs there any way to still keep the same behavior and replace ** at the beginning with something equivalent? I leave below the docs for the AntPathMatcher, since there is a difference between * and ** and I&#39;m using `spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER` to still use the AntPathMatcher.\r\nhttps://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html\r\n\r\nAnd I&#39;ve also looked at the following samples with no success.\r\nhttps://www.baeldung.com/spring-5-mvc-url-matching\r\n\r\nAny help/suggestion/advice is welcome. Thanks!","title":"Migrate RequestMapping from older spring to spring 5 unable to replace /**/ at the beginning","body":"<p>I'm having issues migrating a Java application from 14 to 17 due to the upgrade on spring to version 5. The problem I have is the following:</p>\n<p>I have a controller with <code>@RequestMapping(value = &quot;/**/{[something:[^.]*}&quot;)</code></p>\n<p>The application seems to work just fine on localhost, however some paths are built wrongly on the server and some JUnits are failing, throwing: <code>org.springframework.web.util.pattern.PatternParseException: No more pattern data allowed after {*...} or ** pattern element</code>. Reading the spring docs here <a href=\"https://spring.io/blog/2020/06/30/url-matching-with-pathpattern-in-spring-mvc/\" rel=\"nofollow noreferrer\">https://spring.io/blog/2020/06/30/url-matching-with-pathpattern-in-spring-mvc/</a> I discovered we cannot use anymore <code>/**/</code> at the beginning, and it's only allowed at the end.</p>\n<p>Is there any way to still keep the same behavior and replace ** at the beginning with something equivalent? I leave below the docs for the AntPathMatcher, since there is a difference between * and ** and I'm using <code>spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER</code> to still use the AntPathMatcher.\n<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/AntPathMatcher.html</a></p>\n<p>And I've also looked at the following samples with no success.\n<a href=\"https://www.baeldung.com/spring-5-mvc-url-matching\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-5-mvc-url-matching</a></p>\n<p>Any help/suggestion/advice is welcome. Thanks!</p>\n"},{"tags":["java","bigdecimal","avro"],"answers":[{"tags":[],"owner":{"account_id":6675345,"reputation":171,"user_id":5150188,"display_name":"Robert Walker"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1467757933,"creation_date":1467757933,"answer_id":38213894,"question_id":38213063,"body_markdown":"Avro introduced logical types in 1.7.7 (I believe) that should help you serialize decimal.\r\n\r\nhttps://avro.apache.org/docs/1.8.1/spec.html#Decimal","title":"How to serialize java.math.BigDecimal in Avro?","body":"<p>Avro introduced logical types in 1.7.7 (I believe) that should help you serialize decimal.</p>\n\n<p><a href=\"https://avro.apache.org/docs/1.8.1/spec.html#Decimal\" rel=\"noreferrer\">https://avro.apache.org/docs/1.8.1/spec.html#Decimal</a></p>\n"},{"tags":[],"owner":{"account_id":7913441,"reputation":21,"user_id":5976719,"display_name":"rajani chauhan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1559822664,"creation_date":1500316771,"answer_id":45151385,"question_id":38213063,"body_markdown":"Here is the code :\r\n\r\n    &quot;type&quot;: [ {\r\n        &quot;type&quot;: &quot;string&quot;,\r\n        &quot;java-class&quot;: &quot;java.math.BigDecimal&quot;\r\n     } ]","title":"How to serialize java.math.BigDecimal in Avro?","body":"<p>Here is the code :</p>\n\n<pre><code>\"type\": [ {\n    \"type\": \"string\",\n    \"java-class\": \"java.math.BigDecimal\"\n } ]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14593176,"reputation":115,"user_id":10539722,"display_name":"3AKOBAH"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694155323,"creation_date":1694155323,"answer_id":77064682,"question_id":38213063,"body_markdown":"To serialize a Java BigDecimal in Avro, you can define an Avro schema that uses the &quot;decimal&quot; logical type. The &quot;decimal&quot; logical type allows you to specify the precision and scale of the BigDecimal. Here&#39;s an example schema definition for a BigDecimal with 2 digits after the decimal point:\r\n\r\n    {\r\n      &quot;name&quot;: &quot;amount&quot;,\r\n      &quot;type&quot;: {\r\n        &quot;type&quot;: &quot;bytes&quot;,\r\n        &quot;logicalType&quot;: &quot;decimal&quot;,\r\n        &quot;precision&quot;: 18,   // Adjust precision as needed\r\n        &quot;scale&quot;: 2        // Adjust scale as needed\r\n      }\r\n    }\r\n\r\n- &quot;amount&quot; is the field name.\r\n- &quot;bytes&quot; is the base Avro type used to store the BigDecimal.\r\n- &quot;logicalType&quot; is set to &quot;decimal&quot; to indicate that this field represents a decimal number.\r\n- &quot;precision&quot; is set to 18 to allow up to 18 digits in total (adjust as needed).\r\n- &quot;scale&quot; is set to 2 to specify that 2 of the digits are after the decimal point (adjust as needed).","title":"How to serialize java.math.BigDecimal in Avro?","body":"<p>To serialize a Java BigDecimal in Avro, you can define an Avro schema that uses the &quot;decimal&quot; logical type. The &quot;decimal&quot; logical type allows you to specify the precision and scale of the BigDecimal. Here's an example schema definition for a BigDecimal with 2 digits after the decimal point:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;amount&quot;,\n  &quot;type&quot;: {\n    &quot;type&quot;: &quot;bytes&quot;,\n    &quot;logicalType&quot;: &quot;decimal&quot;,\n    &quot;precision&quot;: 18,   // Adjust precision as needed\n    &quot;scale&quot;: 2        // Adjust scale as needed\n  }\n}\n</code></pre>\n<ul>\n<li>&quot;amount&quot; is the field name.</li>\n<li>&quot;bytes&quot; is the base Avro type used to store the BigDecimal.</li>\n<li>&quot;logicalType&quot; is set to &quot;decimal&quot; to indicate that this field represents a decimal number.</li>\n<li>&quot;precision&quot; is set to 18 to allow up to 18 digits in total (adjust as needed).</li>\n<li>&quot;scale&quot; is set to 2 to specify that 2 of the digits are after the decimal point (adjust as needed).</li>\n</ul>\n"}],"owner":{"account_id":6627875,"reputation":5335,"user_id":5117474,"accept_rate":93,"display_name":"Pythoner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18541,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":38213894,"answer_count":3,"score":13,"last_activity_date":1694155323,"creation_date":1467754098,"question_id":38213063,"body_markdown":"Avro schemas are defined using JSON. Schemas are composed of primitive types (null, boolean, int, long, float, double, bytes, and string) and complex types (record, enum, array, map, union, and fixed). I want to ask which one is proper for BigDecimal.","title":"How to serialize java.math.BigDecimal in Avro?","body":"<p>Avro schemas are defined using JSON. Schemas are composed of primitive types (null, boolean, int, long, float, double, bytes, and string) and complex types (record, enum, array, map, union, and fixed). I want to ask which one is proper for BigDecimal.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9797,"page":195,"page_size":100}
